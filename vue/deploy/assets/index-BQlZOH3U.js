function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AboutView-BDe2Vm_o.js","assets/AboutView-3WOcCgdZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))I(O);new MutationObserver(O=>{for(const w of O)if(w.type==="childList")for(const T of w.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&I(T)}).observe(document,{childList:!0,subtree:!0});function c(O){const w={};return O.integrity&&(w.integrity=O.integrity),O.referrerPolicy&&(w.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?w.credentials="include":O.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function I(O){if(O.ep)return;O.ep=!0;const w=c(O);fetch(O.href,w)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ru(_,y){const c=new Set(_.split(","));return y?I=>c.has(I.toLowerCase()):I=>c.has(I)}const Bt={},dn=[],Wi=()=>{},ov=()=>!1,pa=_=>_.charCodeAt(0)===111&&_.charCodeAt(1)===110&&(_.charCodeAt(2)>122||_.charCodeAt(2)<97),Pu=_=>_.startsWith("onUpdate:"),oi=Object.assign,ku=(_,y)=>{const c=_.indexOf(y);c>-1&&_.splice(c,1)},rv=Object.prototype.hasOwnProperty,_t=(_,y)=>rv.call(_,y),ze=Array.isArray,pn=_=>fa(_)==="[object Map]",gp=_=>fa(_)==="[object Set]",et=_=>typeof _=="function",zt=_=>typeof _=="string",Cn=_=>typeof _=="symbol",$t=_=>_!==null&&typeof _=="object",yp=_=>($t(_)||et(_))&&et(_.then)&&et(_.catch),mp=Object.prototype.toString,fa=_=>mp.call(_),nv=_=>fa(_).slice(8,-1),bp=_=>fa(_)==="[object Object]",Tu=_=>zt(_)&&_!=="NaN"&&_[0]!=="-"&&""+parseInt(_,10)===_,Jn=Ru(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_a=_=>{const y=Object.create(null);return c=>y[c]||(y[c]=_(c))},sv=/-(\w)/g,gn=_a(_=>_.replace(sv,(y,c)=>c?c.toUpperCase():"")),av=/\B([A-Z])/g,xn=_a(_=>_.replace(av,"-$1").toLowerCase()),vp=_a(_=>_.charAt(0).toUpperCase()+_.slice(1)),Zl=_a(_=>_?`on${vp(_)}`:""),fr=(_,y)=>!Object.is(_,y),Ql=(_,y)=>{for(let c=0;c<_.length;c++)_[c](y)},aa=(_,y,c)=>{Object.defineProperty(_,y,{configurable:!0,enumerable:!1,value:c})},lv=_=>{const y=parseFloat(_);return isNaN(y)?_:y};let Cd;const wp=()=>Cd||(Cd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ga(_){if(ze(_)){const y={};for(let c=0;c<_.length;c++){const I=_[c],O=zt(I)?dv(I):ga(I);if(O)for(const w in O)y[w]=O[w]}return y}else if(zt(_)||$t(_))return _}const uv=/;(?![^(]*\))/g,hv=/:([^]+)/,cv=/\/\*[^]*?\*\//g;function dv(_){const y={};return _.replace(cv,"").split(uv).forEach(c=>{if(c){const I=c.split(hv);I.length>1&&(y[I[0].trim()]=I[1].trim())}}),y}function ya(_){let y="";if(zt(_))y=_;else if(ze(_))for(let c=0;c<_.length;c++){const I=ya(_[c]);I&&(y+=I+" ")}else if($t(_))for(const c in _)_[c]&&(y+=c+" ");return y.trim()}function H1(_){if(!_)return null;let{class:y,style:c}=_;return y&&!zt(y)&&(_.class=ya(y)),c&&(_.style=ga(c)),_}const pv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fv=Ru(pv);function Cp(_){return!!_||_===""}const _v=_=>zt(_)?_:_==null?"":ze(_)||$t(_)&&(_.toString===mp||!et(_.toString))?JSON.stringify(_,xp,2):String(_),xp=(_,y)=>y&&y.__v_isRef?xp(_,y.value):pn(y)?{[`Map(${y.size})`]:[...y.entries()].reduce((c,[I,O],w)=>(c[eu(I,w)+" =>"]=O,c),{})}:gp(y)?{[`Set(${y.size})`]:[...y.values()].map(c=>eu(c))}:Cn(y)?eu(y):$t(y)&&!ze(y)&&!bp(y)?String(y):y,eu=(_,y="")=>{var c;return Cn(_)?`Symbol(${(c=_.description)!=null?c:y})`:_};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let to;class gv{constructor(y=!1){this.detached=y,this._active=!0,this.effects=[],this.cleanups=[],this.parent=to,!y&&to&&(this.index=(to.scopes||(to.scopes=[])).push(this)-1)}get active(){return this._active}run(y){if(this._active){const c=to;try{return to=this,y()}finally{to=c}}}on(){to=this}off(){to=this.parent}stop(y){if(this._active){let c,I;for(c=0,I=this.effects.length;c<I;c++)this.effects[c].stop();for(c=0,I=this.cleanups.length;c<I;c++)this.cleanups[c]();if(this.scopes)for(c=0,I=this.scopes.length;c<I;c++)this.scopes[c].stop(!0);if(!this.detached&&this.parent&&!y){const O=this.parent.scopes.pop();O&&O!==this&&(this.parent.scopes[this.index]=O,O.index=this.index)}this.parent=void 0,this._active=!1}}}function yv(_,y=to){y&&y.active&&y.effects.push(_)}function mv(){return to}let Pr;class Du{constructor(y,c,I,O){this.fn=y,this.trigger=c,this.scheduler=I,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,yv(this,O)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Tr();for(let y=0;y<this._depsLength;y++){const c=this.deps[y];if(c.computed&&(bv(c.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Dr()}return this._dirtyLevel>=4}set dirty(y){this._dirtyLevel=y?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let y=dr,c=Pr;try{return dr=!0,Pr=this,this._runnings++,xd(this),this.fn()}finally{Id(this),this._runnings--,Pr=c,dr=y}}stop(){var y;this.active&&(xd(this),Id(this),(y=this.onStop)==null||y.call(this),this.active=!1)}}function bv(_){return _.value}function xd(_){_._trackId++,_._depsLength=0}function Id(_){if(_.deps.length>_._depsLength){for(let y=_._depsLength;y<_.deps.length;y++)Ip(_.deps[y],_);_.deps.length=_._depsLength}}function Ip(_,y){const c=_.get(y);c!==void 0&&y._trackId!==c&&(_.delete(y),_.size===0&&_.cleanup())}let dr=!0,du=0;const Ep=[];function Tr(){Ep.push(dr),dr=!1}function Dr(){const _=Ep.pop();dr=_===void 0?!0:_}function Mu(){du++}function Lu(){for(du--;!du&&pu.length;)pu.shift()()}function Sp(_,y,c){if(y.get(_)!==_._trackId){y.set(_,_._trackId);const I=_.deps[_._depsLength];I!==y?(I&&Ip(I,_),_.deps[_._depsLength++]=y):_._depsLength++}}const pu=[];function Op(_,y,c){Mu();for(const I of _.keys()){let O;I._dirtyLevel<y&&(O??(O=_.get(I)===I._trackId))&&(I._shouldSchedule||(I._shouldSchedule=I._dirtyLevel===0),I._dirtyLevel=y),I._shouldSchedule&&(O??(O=_.get(I)===I._trackId))&&(I.trigger(),(!I._runnings||I.allowRecurse)&&I._dirtyLevel!==2&&(I._shouldSchedule=!1,I.scheduler&&pu.push(I.scheduler)))}Lu()}const Rp=(_,y)=>{const c=new Map;return c.cleanup=_,c.computed=y,c},fu=new WeakMap,kr=Symbol(""),_u=Symbol("");function Ti(_,y,c){if(dr&&Pr){let I=fu.get(_);I||fu.set(_,I=new Map);let O=I.get(c);O||I.set(c,O=Rp(()=>I.delete(c))),Sp(Pr,O)}}function $o(_,y,c,I,O,w){const T=fu.get(_);if(!T)return;let A=[];if(y==="clear")A=[...T.values()];else if(c==="length"&&ze(_)){const L=Number(I);T.forEach((G,B)=>{(B==="length"||!Cn(B)&&B>=L)&&A.push(G)})}else switch(c!==void 0&&A.push(T.get(c)),y){case"add":ze(_)?Tu(c)&&A.push(T.get("length")):(A.push(T.get(kr)),pn(_)&&A.push(T.get(_u)));break;case"delete":ze(_)||(A.push(T.get(kr)),pn(_)&&A.push(T.get(_u)));break;case"set":pn(_)&&A.push(T.get(kr));break}Mu();for(const L of A)L&&Op(L,4);Lu()}const vv=Ru("__proto__,__v_isRef,__isVue"),Pp=new Set(Object.getOwnPropertyNames(Symbol).filter(_=>_!=="arguments"&&_!=="caller").map(_=>Symbol[_]).filter(Cn)),Ed=wv();function wv(){const _={};return["includes","indexOf","lastIndexOf"].forEach(y=>{_[y]=function(...c){const I=yt(this);for(let w=0,T=this.length;w<T;w++)Ti(I,"get",w+"");const O=I[y](...c);return O===-1||O===!1?I[y](...c.map(yt)):O}}),["push","pop","shift","unshift","splice"].forEach(y=>{_[y]=function(...c){Tr(),Mu();const I=yt(this)[y].apply(this,c);return Lu(),Dr(),I}}),_}function Cv(_){const y=yt(this);return Ti(y,"has",_),y.hasOwnProperty(_)}class kp{constructor(y=!1,c=!1){this._isReadonly=y,this._isShallow=c}get(y,c,I){const O=this._isReadonly,w=this._isShallow;if(c==="__v_isReactive")return!O;if(c==="__v_isReadonly")return O;if(c==="__v_isShallow")return w;if(c==="__v_raw")return I===(O?w?Fv:Lp:w?Mp:Dp).get(y)||Object.getPrototypeOf(y)===Object.getPrototypeOf(I)?y:void 0;const T=ze(y);if(!O){if(T&&_t(Ed,c))return Reflect.get(Ed,c,I);if(c==="hasOwnProperty")return Cv}const A=Reflect.get(y,c,I);return(Cn(c)?Pp.has(c):vv(c))||(O||Ti(y,"get",c),w)?A:Di(A)?T&&Tu(c)?A:A.value:$t(A)?O?Np(A):ba(A):A}}class Tp extends kp{constructor(y=!1){super(!1,y)}set(y,c,I,O){let w=y[c];if(!this._isShallow){const L=yn(w);if(!la(I)&&!yn(I)&&(w=yt(w),I=yt(I)),!ze(y)&&Di(w)&&!Di(I))return L?!1:(w.value=I,!0)}const T=ze(y)&&Tu(c)?Number(c)<y.length:_t(y,c),A=Reflect.set(y,c,I,O);return y===yt(O)&&(T?fr(I,w)&&$o(y,"set",c,I):$o(y,"add",c,I)),A}deleteProperty(y,c){const I=_t(y,c);y[c];const O=Reflect.deleteProperty(y,c);return O&&I&&$o(y,"delete",c,void 0),O}has(y,c){const I=Reflect.has(y,c);return(!Cn(c)||!Pp.has(c))&&Ti(y,"has",c),I}ownKeys(y){return Ti(y,"iterate",ze(y)?"length":kr),Reflect.ownKeys(y)}}class xv extends kp{constructor(y=!1){super(!0,y)}set(y,c){return!0}deleteProperty(y,c){return!0}}const Iv=new Tp,Ev=new xv,Sv=new Tp(!0),Fu=_=>_,ma=_=>Reflect.getPrototypeOf(_);function Xs(_,y,c=!1,I=!1){_=_.__v_raw;const O=yt(_),w=yt(y);c||(fr(y,w)&&Ti(O,"get",y),Ti(O,"get",w));const{has:T}=ma(O),A=I?Fu:c?Bu:rs;if(T.call(O,y))return A(_.get(y));if(T.call(O,w))return A(_.get(w));_!==O&&_.get(y)}function Js(_,y=!1){const c=this.__v_raw,I=yt(c),O=yt(_);return y||(fr(_,O)&&Ti(I,"has",_),Ti(I,"has",O)),_===O?c.has(_):c.has(_)||c.has(O)}function Zs(_,y=!1){return _=_.__v_raw,!y&&Ti(yt(_),"iterate",kr),Reflect.get(_,"size",_)}function Sd(_){_=yt(_);const y=yt(this);return ma(y).has.call(y,_)||(y.add(_),$o(y,"add",_,_)),this}function Od(_,y){y=yt(y);const c=yt(this),{has:I,get:O}=ma(c);let w=I.call(c,_);w||(_=yt(_),w=I.call(c,_));const T=O.call(c,_);return c.set(_,y),w?fr(y,T)&&$o(c,"set",_,y):$o(c,"add",_,y),this}function Rd(_){const y=yt(this),{has:c,get:I}=ma(y);let O=c.call(y,_);O||(_=yt(_),O=c.call(y,_)),I&&I.call(y,_);const w=y.delete(_);return O&&$o(y,"delete",_,void 0),w}function Pd(){const _=yt(this),y=_.size!==0,c=_.clear();return y&&$o(_,"clear",void 0,void 0),c}function Qs(_,y){return function(I,O){const w=this,T=w.__v_raw,A=yt(T),L=y?Fu:_?Bu:rs;return!_&&Ti(A,"iterate",kr),T.forEach((G,B)=>I.call(O,L(G),L(B),w))}}function ea(_,y,c){return function(...I){const O=this.__v_raw,w=yt(O),T=pn(w),A=_==="entries"||_===Symbol.iterator&&T,L=_==="keys"&&T,G=O[_](...I),B=c?Fu:y?Bu:rs;return!y&&Ti(w,"iterate",L?_u:kr),{next(){const{value:z,done:q}=G.next();return q?{value:z,done:q}:{value:A?[B(z[0]),B(z[1])]:B(z),done:q}},[Symbol.iterator](){return this}}}}function sr(_){return function(...y){return _==="delete"?!1:_==="clear"?void 0:this}}function Ov(){const _={get(w){return Xs(this,w)},get size(){return Zs(this)},has:Js,add:Sd,set:Od,delete:Rd,clear:Pd,forEach:Qs(!1,!1)},y={get(w){return Xs(this,w,!1,!0)},get size(){return Zs(this)},has:Js,add:Sd,set:Od,delete:Rd,clear:Pd,forEach:Qs(!1,!0)},c={get(w){return Xs(this,w,!0)},get size(){return Zs(this,!0)},has(w){return Js.call(this,w,!0)},add:sr("add"),set:sr("set"),delete:sr("delete"),clear:sr("clear"),forEach:Qs(!0,!1)},I={get(w){return Xs(this,w,!0,!0)},get size(){return Zs(this,!0)},has(w){return Js.call(this,w,!0)},add:sr("add"),set:sr("set"),delete:sr("delete"),clear:sr("clear"),forEach:Qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{_[w]=ea(w,!1,!1),c[w]=ea(w,!0,!1),y[w]=ea(w,!1,!0),I[w]=ea(w,!0,!0)}),[_,c,y,I]}const[Rv,Pv,kv,Tv]=Ov();function Nu(_,y){const c=y?_?Tv:kv:_?Pv:Rv;return(I,O,w)=>O==="__v_isReactive"?!_:O==="__v_isReadonly"?_:O==="__v_raw"?I:Reflect.get(_t(c,O)&&O in I?c:I,O,w)}const Dv={get:Nu(!1,!1)},Mv={get:Nu(!1,!0)},Lv={get:Nu(!0,!1)},Dp=new WeakMap,Mp=new WeakMap,Lp=new WeakMap,Fv=new WeakMap;function Nv(_){switch(_){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Av(_){return _.__v_skip||!Object.isExtensible(_)?0:Nv(nv(_))}function ba(_){return yn(_)?_:Au(_,!1,Iv,Dv,Dp)}function Fp(_){return Au(_,!1,Sv,Mv,Mp)}function Np(_){return Au(_,!0,Ev,Lv,Lp)}function Au(_,y,c,I,O){if(!$t(_)||_.__v_raw&&!(y&&_.__v_isReactive))return _;const w=O.get(_);if(w)return w;const T=Av(_);if(T===0)return _;const A=new Proxy(_,T===2?I:c);return O.set(_,A),A}function fn(_){return yn(_)?fn(_.__v_raw):!!(_&&_.__v_isReactive)}function yn(_){return!!(_&&_.__v_isReadonly)}function la(_){return!!(_&&_.__v_isShallow)}function Ap(_){return fn(_)||yn(_)}function yt(_){const y=_&&_.__v_raw;return y?yt(y):_}function Bp(_){return Object.isExtensible(_)&&aa(_,"__v_skip",!0),_}const rs=_=>$t(_)?ba(_):_,Bu=_=>$t(_)?Np(_):_;class $p{constructor(y,c,I,O){this.getter=y,this._setter=c,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Du(()=>y(this._value),()=>ia(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!O,this.__v_isReadonly=I}get value(){const y=yt(this);return(!y._cacheable||y.effect.dirty)&&fr(y._value,y._value=y.effect.run())&&ia(y,4),Vp(y),y.effect._dirtyLevel>=2&&ia(y,2),y._value}set value(y){this._setter(y)}get _dirty(){return this.effect.dirty}set _dirty(y){this.effect.dirty=y}}function Bv(_,y,c=!1){let I,O;const w=et(_);return w?(I=_,O=Wi):(I=_.get,O=_.set),new $p(I,O,w||!O,c)}function Vp(_){var y;dr&&Pr&&(_=yt(_),Sp(Pr,(y=_.dep)!=null?y:_.dep=Rp(()=>_.dep=void 0,_ instanceof $p?_:void 0)))}function ia(_,y=4,c){_=yt(_);const I=_.dep;I&&Op(I,y)}function Di(_){return!!(_&&_.__v_isRef===!0)}function $v(_){return jp(_,!1)}function Vv(_){return jp(_,!0)}function jp(_,y){return Di(_)?_:new jv(_,y)}class jv{constructor(y,c){this.__v_isShallow=c,this.dep=void 0,this.__v_isRef=!0,this._rawValue=c?y:yt(y),this._value=c?y:rs(y)}get value(){return Vp(this),this._value}set value(y){const c=this.__v_isShallow||la(y)||yn(y);y=c?y:yt(y),fr(y,this._rawValue)&&(this._rawValue=y,this._value=c?y:rs(y),ia(this,4))}}function Vo(_){return Di(_)?_.value:_}const Hv={get:(_,y,c)=>Vo(Reflect.get(_,y,c)),set:(_,y,c,I)=>{const O=_[y];return Di(O)&&!Di(c)?(O.value=c,!0):Reflect.set(_,y,c,I)}};function Hp(_){return fn(_)?_:new Proxy(_,Hv)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pr(_,y,c,I){try{return I?_(...I):_()}catch(O){va(O,y,c)}}function ro(_,y,c,I){if(et(_)){const w=pr(_,y,c,I);return w&&yp(w)&&w.catch(T=>{va(T,y,c)}),w}const O=[];for(let w=0;w<_.length;w++)O.push(ro(_[w],y,c,I));return O}function va(_,y,c,I=!0){const O=y?y.vnode:null;if(y){let w=y.parent;const T=y.proxy,A=`https://vuejs.org/error-reference/#runtime-${c}`;for(;w;){const G=w.ec;if(G){for(let B=0;B<G.length;B++)if(G[B](_,T,A)===!1)return}w=w.parent}const L=y.appContext.config.errorHandler;if(L){pr(L,null,10,[_,T,A]);return}}Gv(_,c,O,I)}function Gv(_,y,c,I=!0){console.error(_)}let ns=!1,gu=!1;const fi=[];let xo=0;const _n=[];let lr=null,Rr=0;const Gp=Promise.resolve();let $u=null;function Wp(_){const y=$u||Gp;return _?y.then(this?_.bind(this):_):y}function Wv(_){let y=xo+1,c=fi.length;for(;y<c;){const I=y+c>>>1,O=fi[I],w=ss(O);w<_||w===_&&O.pre?y=I+1:c=I}return y}function Vu(_){(!fi.length||!fi.includes(_,ns&&_.allowRecurse?xo+1:xo))&&(_.id==null?fi.push(_):fi.splice(Wv(_.id),0,_),Up())}function Up(){!ns&&!gu&&(gu=!0,$u=Gp.then(Yp))}function Uv(_){const y=fi.indexOf(_);y>xo&&fi.splice(y,1)}function zv(_){ze(_)?_n.push(..._):(!lr||!lr.includes(_,_.allowRecurse?Rr+1:Rr))&&_n.push(_),Up()}function kd(_,y,c=ns?xo+1:0){for(;c<fi.length;c++){const I=fi[c];if(I&&I.pre){if(_&&I.id!==_.uid)continue;fi.splice(c,1),c--,I()}}}function zp(_){if(_n.length){const y=[...new Set(_n)].sort((c,I)=>ss(c)-ss(I));if(_n.length=0,lr){lr.push(...y);return}for(lr=y,Rr=0;Rr<lr.length;Rr++)lr[Rr]();lr=null,Rr=0}}const ss=_=>_.id==null?1/0:_.id,Yv=(_,y)=>{const c=ss(_)-ss(y);if(c===0){if(_.pre&&!y.pre)return-1;if(y.pre&&!_.pre)return 1}return c};function Yp(_){gu=!1,ns=!0,fi.sort(Yv);try{for(xo=0;xo<fi.length;xo++){const y=fi[xo];y&&y.active!==!1&&pr(y,null,14)}}finally{xo=0,fi.length=0,zp(),ns=!1,$u=null,(fi.length||_n.length)&&Yp()}}function qv(_,y,...c){if(_.isUnmounted)return;const I=_.vnode.props||Bt;let O=c;const w=y.startsWith("update:"),T=w&&y.slice(7);if(T&&T in I){const B=`${T==="modelValue"?"model":T}Modifiers`,{number:z,trim:q}=I[B]||Bt;q&&(O=c.map(ie=>zt(ie)?ie.trim():ie)),z&&(O=c.map(lv))}let A,L=I[A=Zl(y)]||I[A=Zl(gn(y))];!L&&w&&(L=I[A=Zl(xn(y))]),L&&ro(L,_,6,O);const G=I[A+"Once"];if(G){if(!_.emitted)_.emitted={};else if(_.emitted[A])return;_.emitted[A]=!0,ro(G,_,6,O)}}function qp(_,y,c=!1){const I=y.emitsCache,O=I.get(_);if(O!==void 0)return O;const w=_.emits;let T={},A=!1;if(!et(_)){const L=G=>{const B=qp(G,y,!0);B&&(A=!0,oi(T,B))};!c&&y.mixins.length&&y.mixins.forEach(L),_.extends&&L(_.extends),_.mixins&&_.mixins.forEach(L)}return!w&&!A?($t(_)&&I.set(_,null),null):(ze(w)?w.forEach(L=>T[L]=null):oi(T,w),$t(_)&&I.set(_,T),T)}function wa(_,y){return!_||!pa(y)?!1:(y=y.slice(2).replace(/Once$/,""),_t(_,y[0].toLowerCase()+y.slice(1))||_t(_,xn(y))||_t(_,y))}let ki=null,Ca=null;function ua(_){const y=ki;return ki=_,Ca=_&&_.type.__scopeId||null,y}function Kp(_){Ca=_}function Xp(){Ca=null}function Xt(_,y=ki,c){if(!y||_._n)return _;const I=(...O)=>{I._d&&Vd(-1);const w=ua(y);let T;try{T=_(...O)}finally{ua(w),I._d&&Vd(1)}return T};return I._n=!0,I._c=!0,I._d=!0,I}function tu(_){const{type:y,vnode:c,proxy:I,withProxy:O,props:w,propsOptions:[T],slots:A,attrs:L,emit:G,render:B,renderCache:z,data:q,setupState:ie,ctx:Se,inheritAttrs:Le}=_;let $e,Te;const Fe=ua(_);try{if(c.shapeFlag&4){const nt=O||I,mt=nt;$e=Co(B.call(mt,nt,z,w,ie,q,Se)),Te=L}else{const nt=y;$e=Co(nt.length>1?nt(w,{attrs:L,slots:A,emit:G}):nt(w,null)),Te=y.props?L:Kv(L)}}catch(nt){ts.length=0,va(nt,_,1),$e=Ot(mn)}let be=$e;if(Te&&Le!==!1){const nt=Object.keys(Te),{shapeFlag:mt}=be;nt.length&&mt&7&&(T&&nt.some(Pu)&&(Te=Xv(Te,T)),be=bn(be,Te))}return c.dirs&&(be=bn(be),be.dirs=be.dirs?be.dirs.concat(c.dirs):c.dirs),c.transition&&(be.transition=c.transition),$e=be,ua(Fe),$e}const Kv=_=>{let y;for(const c in _)(c==="class"||c==="style"||pa(c))&&((y||(y={}))[c]=_[c]);return y},Xv=(_,y)=>{const c={};for(const I in _)(!Pu(I)||!(I.slice(9)in y))&&(c[I]=_[I]);return c};function Jv(_,y,c){const{props:I,children:O,component:w}=_,{props:T,children:A,patchFlag:L}=y,G=w.emitsOptions;if(y.dirs||y.transition)return!0;if(c&&L>=0){if(L&1024)return!0;if(L&16)return I?Td(I,T,G):!!T;if(L&8){const B=y.dynamicProps;for(let z=0;z<B.length;z++){const q=B[z];if(T[q]!==I[q]&&!wa(G,q))return!0}}}else return(O||A)&&(!A||!A.$stable)?!0:I===T?!1:I?T?Td(I,T,G):!0:!!T;return!1}function Td(_,y,c){const I=Object.keys(y);if(I.length!==Object.keys(_).length)return!0;for(let O=0;O<I.length;O++){const w=I[O];if(y[w]!==_[w]&&!wa(c,w))return!0}return!1}function Zv({vnode:_,parent:y},c){for(;y;){const I=y.subTree;if(I.suspense&&I.suspense.activeBranch===_&&(I.el=_.el),I===_)(_=y.vnode).el=c,y=y.parent;else break}}const Qv=Symbol.for("v-ndc"),e0=_=>_.__isSuspense;function t0(_,y){y&&y.pendingBranch?ze(_)?y.effects.push(..._):y.effects.push(_):zv(_)}const i0=Symbol.for("v-scx"),o0=()=>jo(i0),ta={};function oa(_,y,c){return Jp(_,y,c)}function Jp(_,y,{immediate:c,deep:I,flush:O,once:w,onTrack:T,onTrigger:A}=Bt){if(y&&w){const je=y;y=(...Yt)=>{je(...Yt),mt()}}const L=wi,G=je=>I===!0?je:cn(je,I===!1?1:void 0);let B,z=!1,q=!1;if(Di(_)?(B=()=>_.value,z=la(_)):fn(_)?(B=()=>G(_),z=!0):ze(_)?(q=!0,z=_.some(je=>fn(je)||la(je)),B=()=>_.map(je=>{if(Di(je))return je.value;if(fn(je))return G(je);if(et(je))return pr(je,L,2)})):et(_)?y?B=()=>pr(_,L,2):B=()=>(ie&&ie(),ro(_,L,3,[Se])):B=Wi,y&&I){const je=B;B=()=>cn(je())}let ie,Se=je=>{ie=be.onStop=()=>{pr(je,L,4),ie=be.onStop=void 0}},Le;if(Sa)if(Se=Wi,y?c&&ro(y,L,3,[B(),q?[]:void 0,Se]):B(),O==="sync"){const je=o0();Le=je.__watcherHandles||(je.__watcherHandles=[])}else return Wi;let $e=q?new Array(_.length).fill(ta):ta;const Te=()=>{if(!(!be.active||!be.dirty))if(y){const je=be.run();(I||z||(q?je.some((Yt,Jt)=>fr(Yt,$e[Jt])):fr(je,$e)))&&(ie&&ie(),ro(y,L,3,[je,$e===ta?void 0:q&&$e[0]===ta?[]:$e,Se]),$e=je)}else be.run()};Te.allowRecurse=!!y;let Fe;O==="sync"?Fe=Te:O==="post"?Fe=()=>Pi(Te,L&&L.suspense):(Te.pre=!0,L&&(Te.id=L.uid),Fe=()=>Vu(Te));const be=new Du(B,Wi,Fe),nt=mv(),mt=()=>{be.stop(),nt&&ku(nt.effects,be)};return y?c?Te():$e=be.run():O==="post"?Pi(be.run.bind(be),L&&L.suspense):be.run(),Le&&Le.push(mt),mt}function r0(_,y,c){const I=this.proxy,O=zt(_)?_.includes(".")?Zp(I,_):()=>I[_]:_.bind(I,I);let w;et(y)?w=y:(w=y.handler,c=y);const T=hs(this),A=Jp(O,w.bind(I),c);return T(),A}function Zp(_,y){const c=y.split(".");return()=>{let I=_;for(let O=0;O<c.length&&I;O++)I=I[c[O]];return I}}function cn(_,y,c=0,I){if(!$t(_)||_.__v_skip)return _;if(y&&y>0){if(c>=y)return _;c++}if(I=I||new Set,I.has(_))return _;if(I.add(_),Di(_))cn(_.value,y,c,I);else if(ze(_))for(let O=0;O<_.length;O++)cn(_[O],y,c,I);else if(gp(_)||pn(_))_.forEach(O=>{cn(O,y,c,I)});else if(bp(_))for(const O in _)cn(_[O],y,c,I);return _}function Sr(_,y,c,I){const O=_.dirs,w=y&&y.dirs;for(let T=0;T<O.length;T++){const A=O[T];w&&(A.oldValue=w[T].value);let L=A.dir[I];L&&(Tr(),ro(L,c,8,[_.el,A,_,y]),Dr())}}/*! #__NO_SIDE_EFFECTS__ */function In(_,y){return et(_)?oi({name:_.name},y,{setup:_}):_}const Zn=_=>!!_.type.__asyncLoader,Qp=_=>_.type.__isKeepAlive;function n0(_,y){ef(_,"a",y)}function s0(_,y){ef(_,"da",y)}function ef(_,y,c=wi){const I=_.__wdc||(_.__wdc=()=>{let O=c;for(;O;){if(O.isDeactivated)return;O=O.parent}return _()});if(xa(y,I,c),c){let O=c.parent;for(;O&&O.parent;)Qp(O.parent.vnode)&&a0(I,y,c,O),O=O.parent}}function a0(_,y,c,I){const O=xa(y,_,I,!0);tf(()=>{ku(I[y],O)},c)}function xa(_,y,c=wi,I=!1){if(c){const O=c[_]||(c[_]=[]),w=y.__weh||(y.__weh=(...T)=>{if(c.isUnmounted)return;Tr();const A=hs(c),L=ro(y,c,_,T);return A(),Dr(),L});return I?O.unshift(w):O.push(w),w}}const Ho=_=>(y,c=wi)=>(!Sa||_==="sp")&&xa(_,(...I)=>y(...I),c),l0=Ho("bm"),u0=Ho("m"),h0=Ho("bu"),c0=Ho("u"),d0=Ho("bum"),tf=Ho("um"),p0=Ho("sp"),f0=Ho("rtg"),_0=Ho("rtc");function g0(_,y=wi){xa("ec",_,y)}function G1(_,y,c,I){let O;const w=c&&c[I];if(ze(_)||zt(_)){O=new Array(_.length);for(let T=0,A=_.length;T<A;T++)O[T]=y(_[T],T,void 0,w&&w[T])}else if(typeof _=="number"){O=new Array(_);for(let T=0;T<_;T++)O[T]=y(T+1,T,void 0,w&&w[T])}else if($t(_))if(_[Symbol.iterator])O=Array.from(_,(T,A)=>y(T,A,void 0,w&&w[A]));else{const T=Object.keys(_);O=new Array(T.length);for(let A=0,L=T.length;A<L;A++){const G=T[A];O[A]=y(_[G],G,A,w&&w[A])}}else O=[];return c&&(c[I]=O),O}function iu(_,y,c={},I,O){if(ki.isCE||ki.parent&&Zn(ki.parent)&&ki.parent.isCE)return y!=="default"&&(c.name=y),Ot("slot",c,I&&I());let w=_[y];w&&w._c&&(w._d=!1),so();const T=w&&of(w(c)),A=N0(Bi,{key:c.key||T&&T.key||`_${y}`},T||(I?I():[]),T&&_._===1?64:-2);return!O&&A.scopeId&&(A.slotScopeIds=[A.scopeId+"-s"]),w&&w._c&&(w._d=!0),A}function of(_){return _.some(y=>ca(y)?!(y.type===mn||y.type===Bi&&!of(y.children)):!0)?_:null}const yu=_=>_?_f(_)?Wu(_)||_.proxy:yu(_.parent):null,Qn=oi(Object.create(null),{$:_=>_,$el:_=>_.vnode.el,$data:_=>_.data,$props:_=>_.props,$attrs:_=>_.attrs,$slots:_=>_.slots,$refs:_=>_.refs,$parent:_=>yu(_.parent),$root:_=>yu(_.root),$emit:_=>_.emit,$options:_=>ju(_),$forceUpdate:_=>_.f||(_.f=()=>{_.effect.dirty=!0,Vu(_.update)}),$nextTick:_=>_.n||(_.n=Wp.bind(_.proxy)),$watch:_=>r0.bind(_)}),ou=(_,y)=>_!==Bt&&!_.__isScriptSetup&&_t(_,y),y0={get({_},y){const{ctx:c,setupState:I,data:O,props:w,accessCache:T,type:A,appContext:L}=_;let G;if(y[0]!=="$"){const ie=T[y];if(ie!==void 0)switch(ie){case 1:return I[y];case 2:return O[y];case 4:return c[y];case 3:return w[y]}else{if(ou(I,y))return T[y]=1,I[y];if(O!==Bt&&_t(O,y))return T[y]=2,O[y];if((G=_.propsOptions[0])&&_t(G,y))return T[y]=3,w[y];if(c!==Bt&&_t(c,y))return T[y]=4,c[y];mu&&(T[y]=0)}}const B=Qn[y];let z,q;if(B)return y==="$attrs"&&Ti(_,"get",y),B(_);if((z=A.__cssModules)&&(z=z[y]))return z;if(c!==Bt&&_t(c,y))return T[y]=4,c[y];if(q=L.config.globalProperties,_t(q,y))return q[y]},set({_},y,c){const{data:I,setupState:O,ctx:w}=_;return ou(O,y)?(O[y]=c,!0):I!==Bt&&_t(I,y)?(I[y]=c,!0):_t(_.props,y)||y[0]==="$"&&y.slice(1)in _?!1:(w[y]=c,!0)},has({_:{data:_,setupState:y,accessCache:c,ctx:I,appContext:O,propsOptions:w}},T){let A;return!!c[T]||_!==Bt&&_t(_,T)||ou(y,T)||(A=w[0])&&_t(A,T)||_t(I,T)||_t(Qn,T)||_t(O.config.globalProperties,T)},defineProperty(_,y,c){return c.get!=null?_._.accessCache[y]=0:_t(c,"value")&&this.set(_,y,c.value,null),Reflect.defineProperty(_,y,c)}};function Dd(_){return ze(_)?_.reduce((y,c)=>(y[c]=null,y),{}):_}let mu=!0;function m0(_){const y=ju(_),c=_.proxy,I=_.ctx;mu=!1,y.beforeCreate&&Md(y.beforeCreate,_,"bc");const{data:O,computed:w,methods:T,watch:A,provide:L,inject:G,created:B,beforeMount:z,mounted:q,beforeUpdate:ie,updated:Se,activated:Le,deactivated:$e,beforeDestroy:Te,beforeUnmount:Fe,destroyed:be,unmounted:nt,render:mt,renderTracked:je,renderTriggered:Yt,errorCaptured:Jt,serverPrefetch:Ui,expose:Vt,inheritAttrs:Dt,components:$i,directives:dt,filters:zi}=y;if(G&&b0(G,I,null),T)for(const pt in T){const lt=T[pt];et(lt)&&(I[pt]=lt.bind(c))}if(O){const pt=O.call(c,c);$t(pt)&&(_.data=ba(pt))}if(mu=!0,w)for(const pt in w){const lt=w[pt],Ci=et(lt)?lt.bind(c,c):et(lt.get)?lt.get.bind(c,c):Wi,Vi=!et(lt)&&et(lt.set)?lt.set.bind(c):Wi,ri=io({get:Ci,set:Vi});Object.defineProperty(I,pt,{enumerable:!0,configurable:!0,get:()=>ri.value,set:At=>ri.value=At})}if(A)for(const pt in A)rf(A[pt],I,c,pt);if(L){const pt=et(L)?L.call(c):L;Reflect.ownKeys(pt).forEach(lt=>{ra(lt,pt[lt])})}B&&Md(B,_,"c");function Nt(pt,lt){ze(lt)?lt.forEach(Ci=>pt(Ci.bind(c))):lt&&pt(lt.bind(c))}if(Nt(l0,z),Nt(u0,q),Nt(h0,ie),Nt(c0,Se),Nt(n0,Le),Nt(s0,$e),Nt(g0,Jt),Nt(_0,je),Nt(f0,Yt),Nt(d0,Fe),Nt(tf,nt),Nt(p0,Ui),ze(Vt))if(Vt.length){const pt=_.exposed||(_.exposed={});Vt.forEach(lt=>{Object.defineProperty(pt,lt,{get:()=>c[lt],set:Ci=>c[lt]=Ci})})}else _.exposed||(_.exposed={});mt&&_.render===Wi&&(_.render=mt),Dt!=null&&(_.inheritAttrs=Dt),$i&&(_.components=$i),dt&&(_.directives=dt)}function b0(_,y,c=Wi){ze(_)&&(_=bu(_));for(const I in _){const O=_[I];let w;$t(O)?"default"in O?w=jo(O.from||I,O.default,!0):w=jo(O.from||I):w=jo(O),Di(w)?Object.defineProperty(y,I,{enumerable:!0,configurable:!0,get:()=>w.value,set:T=>w.value=T}):y[I]=w}}function Md(_,y,c){ro(ze(_)?_.map(I=>I.bind(y.proxy)):_.bind(y.proxy),y,c)}function rf(_,y,c,I){const O=I.includes(".")?Zp(c,I):()=>c[I];if(zt(_)){const w=y[_];et(w)&&oa(O,w)}else if(et(_))oa(O,_.bind(c));else if($t(_))if(ze(_))_.forEach(w=>rf(w,y,c,I));else{const w=et(_.handler)?_.handler.bind(c):y[_.handler];et(w)&&oa(O,w,_)}}function ju(_){const y=_.type,{mixins:c,extends:I}=y,{mixins:O,optionsCache:w,config:{optionMergeStrategies:T}}=_.appContext,A=w.get(y);let L;return A?L=A:!O.length&&!c&&!I?L=y:(L={},O.length&&O.forEach(G=>ha(L,G,T,!0)),ha(L,y,T)),$t(y)&&w.set(y,L),L}function ha(_,y,c,I=!1){const{mixins:O,extends:w}=y;w&&ha(_,w,c,!0),O&&O.forEach(T=>ha(_,T,c,!0));for(const T in y)if(!(I&&T==="expose")){const A=v0[T]||c&&c[T];_[T]=A?A(_[T],y[T]):y[T]}return _}const v0={data:Ld,props:Fd,emits:Fd,methods:Xn,computed:Xn,beforeCreate:vi,created:vi,beforeMount:vi,mounted:vi,beforeUpdate:vi,updated:vi,beforeDestroy:vi,beforeUnmount:vi,destroyed:vi,unmounted:vi,activated:vi,deactivated:vi,errorCaptured:vi,serverPrefetch:vi,components:Xn,directives:Xn,watch:C0,provide:Ld,inject:w0};function Ld(_,y){return y?_?function(){return oi(et(_)?_.call(this,this):_,et(y)?y.call(this,this):y)}:y:_}function w0(_,y){return Xn(bu(_),bu(y))}function bu(_){if(ze(_)){const y={};for(let c=0;c<_.length;c++)y[_[c]]=_[c];return y}return _}function vi(_,y){return _?[...new Set([].concat(_,y))]:y}function Xn(_,y){return _?oi(Object.create(null),_,y):y}function Fd(_,y){return _?ze(_)&&ze(y)?[...new Set([..._,...y])]:oi(Object.create(null),Dd(_),Dd(y??{})):y}function C0(_,y){if(!_)return y;if(!y)return _;const c=oi(Object.create(null),_);for(const I in y)c[I]=vi(_[I],y[I]);return c}function nf(){return{app:null,config:{isNativeTag:ov,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let x0=0;function I0(_,y){return function(I,O=null){et(I)||(I=oi({},I)),O!=null&&!$t(O)&&(O=null);const w=nf(),T=new WeakSet;let A=!1;const L=w.app={_uid:x0++,_component:I,_props:O,_container:null,_context:w,_instance:null,version:q0,get config(){return w.config},set config(G){},use(G,...B){return T.has(G)||(G&&et(G.install)?(T.add(G),G.install(L,...B)):et(G)&&(T.add(G),G(L,...B))),L},mixin(G){return w.mixins.includes(G)||w.mixins.push(G),L},component(G,B){return B?(w.components[G]=B,L):w.components[G]},directive(G,B){return B?(w.directives[G]=B,L):w.directives[G]},mount(G,B,z){if(!A){const q=Ot(I,O);return q.appContext=w,z===!0?z="svg":z===!1&&(z=void 0),B&&y?y(q,G):_(q,G,z),A=!0,L._container=G,G.__vue_app__=L,Wu(q.component)||q.component.proxy}},unmount(){A&&(_(null,L._container),delete L._container.__vue_app__)},provide(G,B){return w.provides[G]=B,L},runWithContext(G){const B=es;es=L;try{return G()}finally{es=B}}};return L}}let es=null;function ra(_,y){if(wi){let c=wi.provides;const I=wi.parent&&wi.parent.provides;I===c&&(c=wi.provides=Object.create(I)),c[_]=y}}function jo(_,y,c=!1){const I=wi||ki;if(I||es){const O=I?I.parent==null?I.vnode.appContext&&I.vnode.appContext.provides:I.parent.provides:es._context.provides;if(O&&_ in O)return O[_];if(arguments.length>1)return c&&et(y)?y.call(I&&I.proxy):y}}function E0(_,y,c,I=!1){const O={},w={};aa(w,Ea,1),_.propsDefaults=Object.create(null),sf(_,y,O,w);for(const T in _.propsOptions[0])T in O||(O[T]=void 0);c?_.props=I?O:Fp(O):_.type.props?_.props=O:_.props=w,_.attrs=w}function S0(_,y,c,I){const{props:O,attrs:w,vnode:{patchFlag:T}}=_,A=yt(O),[L]=_.propsOptions;let G=!1;if((I||T>0)&&!(T&16)){if(T&8){const B=_.vnode.dynamicProps;for(let z=0;z<B.length;z++){let q=B[z];if(wa(_.emitsOptions,q))continue;const ie=y[q];if(L)if(_t(w,q))ie!==w[q]&&(w[q]=ie,G=!0);else{const Se=gn(q);O[Se]=vu(L,A,Se,ie,_,!1)}else ie!==w[q]&&(w[q]=ie,G=!0)}}}else{sf(_,y,O,w)&&(G=!0);let B;for(const z in A)(!y||!_t(y,z)&&((B=xn(z))===z||!_t(y,B)))&&(L?c&&(c[z]!==void 0||c[B]!==void 0)&&(O[z]=vu(L,A,z,void 0,_,!0)):delete O[z]);if(w!==A)for(const z in w)(!y||!_t(y,z))&&(delete w[z],G=!0)}G&&$o(_,"set","$attrs")}function sf(_,y,c,I){const[O,w]=_.propsOptions;let T=!1,A;if(y)for(let L in y){if(Jn(L))continue;const G=y[L];let B;O&&_t(O,B=gn(L))?!w||!w.includes(B)?c[B]=G:(A||(A={}))[B]=G:wa(_.emitsOptions,L)||(!(L in I)||G!==I[L])&&(I[L]=G,T=!0)}if(w){const L=yt(c),G=A||Bt;for(let B=0;B<w.length;B++){const z=w[B];c[z]=vu(O,L,z,G[z],_,!_t(G,z))}}return T}function vu(_,y,c,I,O,w){const T=_[c];if(T!=null){const A=_t(T,"default");if(A&&I===void 0){const L=T.default;if(T.type!==Function&&!T.skipFactory&&et(L)){const{propsDefaults:G}=O;if(c in G)I=G[c];else{const B=hs(O);I=G[c]=L.call(null,y),B()}}else I=L}T[0]&&(w&&!A?I=!1:T[1]&&(I===""||I===xn(c))&&(I=!0))}return I}function af(_,y,c=!1){const I=y.propsCache,O=I.get(_);if(O)return O;const w=_.props,T={},A=[];let L=!1;if(!et(_)){const B=z=>{L=!0;const[q,ie]=af(z,y,!0);oi(T,q),ie&&A.push(...ie)};!c&&y.mixins.length&&y.mixins.forEach(B),_.extends&&B(_.extends),_.mixins&&_.mixins.forEach(B)}if(!w&&!L)return $t(_)&&I.set(_,dn),dn;if(ze(w))for(let B=0;B<w.length;B++){const z=gn(w[B]);Nd(z)&&(T[z]=Bt)}else if(w)for(const B in w){const z=gn(B);if(Nd(z)){const q=w[B],ie=T[z]=ze(q)||et(q)?{type:q}:oi({},q);if(ie){const Se=$d(Boolean,ie.type),Le=$d(String,ie.type);ie[0]=Se>-1,ie[1]=Le<0||Se<Le,(Se>-1||_t(ie,"default"))&&A.push(z)}}}const G=[T,A];return $t(_)&&I.set(_,G),G}function Nd(_){return _[0]!=="$"&&!Jn(_)}function Ad(_){return _===null?"null":typeof _=="function"?_.name||"":typeof _=="object"&&_.constructor&&_.constructor.name||""}function Bd(_,y){return Ad(_)===Ad(y)}function $d(_,y){return ze(y)?y.findIndex(c=>Bd(c,_)):et(y)&&Bd(y,_)?0:-1}const lf=_=>_[0]==="_"||_==="$stable",Hu=_=>ze(_)?_.map(Co):[Co(_)],O0=(_,y,c)=>{if(y._n)return y;const I=Xt((...O)=>Hu(y(...O)),c);return I._c=!1,I},uf=(_,y,c)=>{const I=_._ctx;for(const O in _){if(lf(O))continue;const w=_[O];if(et(w))y[O]=O0(O,w,I);else if(w!=null){const T=Hu(w);y[O]=()=>T}}},hf=(_,y)=>{const c=Hu(y);_.slots.default=()=>c},R0=(_,y)=>{if(_.vnode.shapeFlag&32){const c=y._;c?(_.slots=yt(y),aa(y,"_",c)):uf(y,_.slots={})}else _.slots={},y&&hf(_,y);aa(_.slots,Ea,1)},P0=(_,y,c)=>{const{vnode:I,slots:O}=_;let w=!0,T=Bt;if(I.shapeFlag&32){const A=y._;A?c&&A===1?w=!1:(oi(O,y),!c&&A===1&&delete O._):(w=!y.$stable,uf(y,O)),T=y}else y&&(hf(_,y),T={default:1});if(w)for(const A in O)!lf(A)&&T[A]==null&&delete O[A]};function wu(_,y,c,I,O=!1){if(ze(_)){_.forEach((q,ie)=>wu(q,y&&(ze(y)?y[ie]:y),c,I,O));return}if(Zn(I)&&!O)return;const w=I.shapeFlag&4?Wu(I.component)||I.component.proxy:I.el,T=O?null:w,{i:A,r:L}=_,G=y&&y.r,B=A.refs===Bt?A.refs={}:A.refs,z=A.setupState;if(G!=null&&G!==L&&(zt(G)?(B[G]=null,_t(z,G)&&(z[G]=null)):Di(G)&&(G.value=null)),et(L))pr(L,A,12,[T,B]);else{const q=zt(L),ie=Di(L);if(q||ie){const Se=()=>{if(_.f){const Le=q?_t(z,L)?z[L]:B[L]:L.value;O?ze(Le)&&ku(Le,w):ze(Le)?Le.includes(w)||Le.push(w):q?(B[L]=[w],_t(z,L)&&(z[L]=B[L])):(L.value=[w],_.k&&(B[_.k]=L.value))}else q?(B[L]=T,_t(z,L)&&(z[L]=T)):ie&&(L.value=T,_.k&&(B[_.k]=T))};T?(Se.id=-1,Pi(Se,c)):Se()}}}const Pi=t0;function k0(_){return T0(_)}function T0(_,y){const c=wp();c.__VUE__=!0;const{insert:I,remove:O,patchProp:w,createElement:T,createText:A,createComment:L,setText:G,setElementText:B,parentNode:z,nextSibling:q,setScopeId:ie=Wi,insertStaticContent:Se}=_,Le=(M,$,X,te=null,Q=null,Z=null,ce=void 0,oe=null,he=!!$.dynamicChildren)=>{if(M===$)return;M&&!Yn(M,$)&&(te=ee(M),At(M,Q,Z,!0),M=null),$.patchFlag===-2&&(he=!1,$.dynamicChildren=null);const{type:ne,ref:we,shapeFlag:Ne}=$;switch(ne){case Ia:$e(M,$,X,te);break;case mn:Te(M,$,X,te);break;case nu:M==null&&Fe($,X,te,ce);break;case Bi:$i(M,$,X,te,Q,Z,ce,oe,he);break;default:Ne&1?mt(M,$,X,te,Q,Z,ce,oe,he):Ne&6?dt(M,$,X,te,Q,Z,ce,oe,he):(Ne&64||Ne&128)&&ne.process(M,$,X,te,Q,Z,ce,oe,he,Ie)}we!=null&&Q&&wu(we,M&&M.ref,Z,$||M,!$)},$e=(M,$,X,te)=>{if(M==null)I($.el=A($.children),X,te);else{const Q=$.el=M.el;$.children!==M.children&&G(Q,$.children)}},Te=(M,$,X,te)=>{M==null?I($.el=L($.children||""),X,te):$.el=M.el},Fe=(M,$,X,te)=>{[M.el,M.anchor]=Se(M.children,$,X,te,M.el,M.anchor)},be=({el:M,anchor:$},X,te)=>{let Q;for(;M&&M!==$;)Q=q(M),I(M,X,te),M=Q;I($,X,te)},nt=({el:M,anchor:$})=>{let X;for(;M&&M!==$;)X=q(M),O(M),M=X;O($)},mt=(M,$,X,te,Q,Z,ce,oe,he)=>{$.type==="svg"?ce="svg":$.type==="math"&&(ce="mathml"),M==null?je($,X,te,Q,Z,ce,oe,he):Ui(M,$,Q,Z,ce,oe,he)},je=(M,$,X,te,Q,Z,ce,oe)=>{let he,ne;const{props:we,shapeFlag:Ne,transition:ke,dirs:He}=M;if(he=M.el=T(M.type,Z,we&&we.is,we),Ne&8?B(he,M.children):Ne&16&&Jt(M.children,he,null,te,Q,ru(M,Z),ce,oe),He&&Sr(M,null,te,"created"),Yt(he,M,M.scopeId,ce,te),we){for(const bt in we)bt!=="value"&&!Jn(bt)&&w(he,bt,null,we[bt],Z,M.children,te,Q,Et);"value"in we&&w(he,"value",null,we.value,Z),(ne=we.onVnodeBeforeMount)&&wo(ne,te,M)}He&&Sr(M,null,te,"beforeMount");const Ze=D0(Q,ke);Ze&&ke.beforeEnter(he),I(he,$,X),((ne=we&&we.onVnodeMounted)||Ze||He)&&Pi(()=>{ne&&wo(ne,te,M),Ze&&ke.enter(he),He&&Sr(M,null,te,"mounted")},Q)},Yt=(M,$,X,te,Q)=>{if(X&&ie(M,X),te)for(let Z=0;Z<te.length;Z++)ie(M,te[Z]);if(Q){let Z=Q.subTree;if($===Z){const ce=Q.vnode;Yt(M,ce,ce.scopeId,ce.slotScopeIds,Q.parent)}}},Jt=(M,$,X,te,Q,Z,ce,oe,he=0)=>{for(let ne=he;ne<M.length;ne++){const we=M[ne]=oe?ur(M[ne]):Co(M[ne]);Le(null,we,$,X,te,Q,Z,ce,oe)}},Ui=(M,$,X,te,Q,Z,ce)=>{const oe=$.el=M.el;let{patchFlag:he,dynamicChildren:ne,dirs:we}=$;he|=M.patchFlag&16;const Ne=M.props||Bt,ke=$.props||Bt;let He;if(X&&Or(X,!1),(He=ke.onVnodeBeforeUpdate)&&wo(He,X,$,M),we&&Sr($,M,X,"beforeUpdate"),X&&Or(X,!0),ne?Vt(M.dynamicChildren,ne,oe,X,te,ru($,Q),Z):ce||lt(M,$,oe,null,X,te,ru($,Q),Z,!1),he>0){if(he&16)Dt(oe,$,Ne,ke,X,te,Q);else if(he&2&&Ne.class!==ke.class&&w(oe,"class",null,ke.class,Q),he&4&&w(oe,"style",Ne.style,ke.style,Q),he&8){const Ze=$.dynamicProps;for(let bt=0;bt<Ze.length;bt++){const Pt=Ze[bt],jt=Ne[Pt],Mi=ke[Pt];(Mi!==jt||Pt==="value")&&w(oe,Pt,jt,Mi,Q,M.children,X,te,Et)}}he&1&&M.children!==$.children&&B(oe,$.children)}else!ce&&ne==null&&Dt(oe,$,Ne,ke,X,te,Q);((He=ke.onVnodeUpdated)||we)&&Pi(()=>{He&&wo(He,X,$,M),we&&Sr($,M,X,"updated")},te)},Vt=(M,$,X,te,Q,Z,ce)=>{for(let oe=0;oe<$.length;oe++){const he=M[oe],ne=$[oe],we=he.el&&(he.type===Bi||!Yn(he,ne)||he.shapeFlag&70)?z(he.el):X;Le(he,ne,we,null,te,Q,Z,ce,!0)}},Dt=(M,$,X,te,Q,Z,ce)=>{if(X!==te){if(X!==Bt)for(const oe in X)!Jn(oe)&&!(oe in te)&&w(M,oe,X[oe],null,ce,$.children,Q,Z,Et);for(const oe in te){if(Jn(oe))continue;const he=te[oe],ne=X[oe];he!==ne&&oe!=="value"&&w(M,oe,ne,he,ce,$.children,Q,Z,Et)}"value"in te&&w(M,"value",X.value,te.value,ce)}},$i=(M,$,X,te,Q,Z,ce,oe,he)=>{const ne=$.el=M?M.el:A(""),we=$.anchor=M?M.anchor:A("");let{patchFlag:Ne,dynamicChildren:ke,slotScopeIds:He}=$;He&&(oe=oe?oe.concat(He):He),M==null?(I(ne,X,te),I(we,X,te),Jt($.children||[],X,we,Q,Z,ce,oe,he)):Ne>0&&Ne&64&&ke&&M.dynamicChildren?(Vt(M.dynamicChildren,ke,X,Q,Z,ce,oe),($.key!=null||Q&&$===Q.subTree)&&cf(M,$,!0)):lt(M,$,X,we,Q,Z,ce,oe,he)},dt=(M,$,X,te,Q,Z,ce,oe,he)=>{$.slotScopeIds=oe,M==null?$.shapeFlag&512?Q.ctx.activate($,X,te,ce,he):zi($,X,te,Q,Z,ce,he):Yi(M,$,he)},zi=(M,$,X,te,Q,Z,ce)=>{const oe=M.component=H0(M,te,Q);if(Qp(M)&&(oe.ctx.renderer=Ie),G0(oe),oe.asyncDep){if(Q&&Q.registerDep(oe,Nt),!M.el){const he=oe.subTree=Ot(mn);Te(null,he,$,X)}}else Nt(oe,M,$,X,Q,Z,ce)},Yi=(M,$,X)=>{const te=$.component=M.component;if(Jv(M,$,X))if(te.asyncDep&&!te.asyncResolved){pt(te,$,X);return}else te.next=$,Uv(te.update),te.effect.dirty=!0,te.update();else $.el=M.el,te.vnode=$},Nt=(M,$,X,te,Q,Z,ce)=>{const oe=()=>{if(M.isMounted){let{next:we,bu:Ne,u:ke,parent:He,vnode:Ze}=M;{const Go=df(M);if(Go){we&&(we.el=Ze.el,pt(M,we,ce)),Go.asyncDep.then(()=>{M.isUnmounted||oe()});return}}let bt=we,Pt;Or(M,!1),we?(we.el=Ze.el,pt(M,we,ce)):we=Ze,Ne&&Ql(Ne),(Pt=we.props&&we.props.onVnodeBeforeUpdate)&&wo(Pt,He,we,Ze),Or(M,!0);const jt=tu(M),Mi=M.subTree;M.subTree=jt,Le(Mi,jt,z(Mi.el),ee(Mi),M,Q,Z),we.el=jt.el,bt===null&&Zv(M,jt.el),ke&&Pi(ke,Q),(Pt=we.props&&we.props.onVnodeUpdated)&&Pi(()=>wo(Pt,He,we,Ze),Q)}else{let we;const{el:Ne,props:ke}=$,{bm:He,m:Ze,parent:bt}=M,Pt=Zn($);if(Or(M,!1),He&&Ql(He),!Pt&&(we=ke&&ke.onVnodeBeforeMount)&&wo(we,bt,$),Or(M,!0),Ne&&St){const jt=()=>{M.subTree=tu(M),St(Ne,M.subTree,M,Q,null)};Pt?$.type.__asyncLoader().then(()=>!M.isUnmounted&&jt()):jt()}else{const jt=M.subTree=tu(M);Le(null,jt,X,te,M,Q,Z),$.el=jt.el}if(Ze&&Pi(Ze,Q),!Pt&&(we=ke&&ke.onVnodeMounted)){const jt=$;Pi(()=>wo(we,bt,jt),Q)}($.shapeFlag&256||bt&&Zn(bt.vnode)&&bt.vnode.shapeFlag&256)&&M.a&&Pi(M.a,Q),M.isMounted=!0,$=X=te=null}},he=M.effect=new Du(oe,Wi,()=>Vu(ne),M.scope),ne=M.update=()=>{he.dirty&&he.run()};ne.id=M.uid,Or(M,!0),ne()},pt=(M,$,X)=>{$.component=M;const te=M.vnode.props;M.vnode=$,M.next=null,S0(M,$.props,te,X),P0(M,$.children,X),Tr(),kd(M),Dr()},lt=(M,$,X,te,Q,Z,ce,oe,he=!1)=>{const ne=M&&M.children,we=M?M.shapeFlag:0,Ne=$.children,{patchFlag:ke,shapeFlag:He}=$;if(ke>0){if(ke&128){Vi(ne,Ne,X,te,Q,Z,ce,oe,he);return}else if(ke&256){Ci(ne,Ne,X,te,Q,Z,ce,oe,he);return}}He&8?(we&16&&Et(ne,Q,Z),Ne!==ne&&B(X,Ne)):we&16?He&16?Vi(ne,Ne,X,te,Q,Z,ce,oe,he):Et(ne,Q,Z,!0):(we&8&&B(X,""),He&16&&Jt(Ne,X,te,Q,Z,ce,oe,he))},Ci=(M,$,X,te,Q,Z,ce,oe,he)=>{M=M||dn,$=$||dn;const ne=M.length,we=$.length,Ne=Math.min(ne,we);let ke;for(ke=0;ke<Ne;ke++){const He=$[ke]=he?ur($[ke]):Co($[ke]);Le(M[ke],He,X,null,Q,Z,ce,oe,he)}ne>we?Et(M,Q,Z,!0,!1,Ne):Jt($,X,te,Q,Z,ce,oe,he,Ne)},Vi=(M,$,X,te,Q,Z,ce,oe,he)=>{let ne=0;const we=$.length;let Ne=M.length-1,ke=we-1;for(;ne<=Ne&&ne<=ke;){const He=M[ne],Ze=$[ne]=he?ur($[ne]):Co($[ne]);if(Yn(He,Ze))Le(He,Ze,X,null,Q,Z,ce,oe,he);else break;ne++}for(;ne<=Ne&&ne<=ke;){const He=M[Ne],Ze=$[ke]=he?ur($[ke]):Co($[ke]);if(Yn(He,Ze))Le(He,Ze,X,null,Q,Z,ce,oe,he);else break;Ne--,ke--}if(ne>Ne){if(ne<=ke){const He=ke+1,Ze=He<we?$[He].el:te;for(;ne<=ke;)Le(null,$[ne]=he?ur($[ne]):Co($[ne]),X,Ze,Q,Z,ce,oe,he),ne++}}else if(ne>ke)for(;ne<=Ne;)At(M[ne],Q,Z,!0),ne++;else{const He=ne,Ze=ne,bt=new Map;for(ne=Ze;ne<=ke;ne++){const _i=$[ne]=he?ur($[ne]):Co($[ne]);_i.key!=null&&bt.set(_i.key,ne)}let Pt,jt=0;const Mi=ke-Ze+1;let Go=!1,gr=0;const yr=new Array(Mi);for(ne=0;ne<Mi;ne++)yr[ne]=0;for(ne=He;ne<=Ne;ne++){const _i=M[ne];if(jt>=Mi){At(_i,Q,Z,!0);continue}let Li;if(_i.key!=null)Li=bt.get(_i.key);else for(Pt=Ze;Pt<=ke;Pt++)if(yr[Pt-Ze]===0&&Yn(_i,$[Pt])){Li=Pt;break}Li===void 0?At(_i,Q,Z,!0):(yr[Li-Ze]=ne+1,Li>=gr?gr=Li:Go=!0,Le(_i,$[Li],X,null,Q,Z,ce,oe,he),jt++)}const cs=Go?M0(yr):dn;for(Pt=cs.length-1,ne=Mi-1;ne>=0;ne--){const _i=Ze+ne,Li=$[_i],En=_i+1<we?$[_i+1].el:te;yr[ne]===0?Le(null,Li,X,En,Q,Z,ce,oe,he):Go&&(Pt<0||ne!==cs[Pt]?ri(Li,X,En,2):Pt--)}}},ri=(M,$,X,te,Q=null)=>{const{el:Z,type:ce,transition:oe,children:he,shapeFlag:ne}=M;if(ne&6){ri(M.component.subTree,$,X,te);return}if(ne&128){M.suspense.move($,X,te);return}if(ne&64){ce.move(M,$,X,Ie);return}if(ce===Bi){I(Z,$,X);for(let Ne=0;Ne<he.length;Ne++)ri(he[Ne],$,X,te);I(M.anchor,$,X);return}if(ce===nu){be(M,$,X);return}if(te!==2&&ne&1&&oe)if(te===0)oe.beforeEnter(Z),I(Z,$,X),Pi(()=>oe.enter(Z),Q);else{const{leave:Ne,delayLeave:ke,afterLeave:He}=oe,Ze=()=>I(Z,$,X),bt=()=>{Ne(Z,()=>{Ze(),He&&He()})};ke?ke(Z,Ze,bt):bt()}else I(Z,$,X)},At=(M,$,X,te=!1,Q=!1)=>{const{type:Z,props:ce,ref:oe,children:he,dynamicChildren:ne,shapeFlag:we,patchFlag:Ne,dirs:ke}=M;if(oe!=null&&wu(oe,null,X,M,!0),we&256){$.ctx.deactivate(M);return}const He=we&1&&ke,Ze=!Zn(M);let bt;if(Ze&&(bt=ce&&ce.onVnodeBeforeUnmount)&&wo(bt,$,M),we&6)Eo(M.component,X,te);else{if(we&128){M.suspense.unmount(X,te);return}He&&Sr(M,null,$,"beforeUnmount"),we&64?M.type.remove(M,$,X,Q,Ie,te):ne&&(Z!==Bi||Ne>0&&Ne&64)?Et(ne,$,X,!1,!0):(Z===Bi&&Ne&384||!Q&&we&16)&&Et(he,$,X),te&&ao(M)}(Ze&&(bt=ce&&ce.onVnodeUnmounted)||He)&&Pi(()=>{bt&&wo(bt,$,M),He&&Sr(M,null,$,"unmounted")},X)},ao=M=>{const{type:$,el:X,anchor:te,transition:Q}=M;if($===Bi){lo(X,te);return}if($===nu){nt(M);return}const Z=()=>{O(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(M.shapeFlag&1&&Q&&!Q.persisted){const{leave:ce,delayLeave:oe}=Q,he=()=>ce(X,Z);oe?oe(M.el,Z,he):he()}else Z()},lo=(M,$)=>{let X;for(;M!==$;)X=q(M),O(M),M=X;O($)},Eo=(M,$,X)=>{const{bum:te,scope:Q,update:Z,subTree:ce,um:oe}=M;te&&Ql(te),Q.stop(),Z&&(Z.active=!1,At(ce,M,$,X)),oe&&Pi(oe,$),Pi(()=>{M.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},Et=(M,$,X,te=!1,Q=!1,Z=0)=>{for(let ce=Z;ce<M.length;ce++)At(M[ce],$,X,te,Q)},ee=M=>M.shapeFlag&6?ee(M.component.subTree):M.shapeFlag&128?M.suspense.next():q(M.anchor||M.el);let ve=!1;const ge=(M,$,X)=>{M==null?$._vnode&&At($._vnode,null,null,!0):Le($._vnode||null,M,$,null,null,null,X),ve||(ve=!0,kd(),zp(),ve=!1),$._vnode=M},Ie={p:Le,um:At,m:ri,r:ao,mt:zi,mc:Jt,pc:lt,pbc:Vt,n:ee,o:_};let ut,St;return y&&([ut,St]=y(Ie)),{render:ge,hydrate:ut,createApp:I0(ge,ut)}}function ru({type:_,props:y},c){return c==="svg"&&_==="foreignObject"||c==="mathml"&&_==="annotation-xml"&&y&&y.encoding&&y.encoding.includes("html")?void 0:c}function Or({effect:_,update:y},c){_.allowRecurse=y.allowRecurse=c}function D0(_,y){return(!_||_&&!_.pendingBranch)&&y&&!y.persisted}function cf(_,y,c=!1){const I=_.children,O=y.children;if(ze(I)&&ze(O))for(let w=0;w<I.length;w++){const T=I[w];let A=O[w];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=O[w]=ur(O[w]),A.el=T.el),c||cf(T,A)),A.type===Ia&&(A.el=T.el)}}function M0(_){const y=_.slice(),c=[0];let I,O,w,T,A;const L=_.length;for(I=0;I<L;I++){const G=_[I];if(G!==0){if(O=c[c.length-1],_[O]<G){y[I]=O,c.push(I);continue}for(w=0,T=c.length-1;w<T;)A=w+T>>1,_[c[A]]<G?w=A+1:T=A;G<_[c[w]]&&(w>0&&(y[I]=c[w-1]),c[w]=I)}}for(w=c.length,T=c[w-1];w-- >0;)c[w]=T,T=y[T];return c}function df(_){const y=_.subTree.component;if(y)return y.asyncDep&&!y.asyncResolved?y:df(y)}const L0=_=>_.__isTeleport,Bi=Symbol.for("v-fgt"),Ia=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),nu=Symbol.for("v-stc"),ts=[];let oo=null;function so(_=!1){ts.push(oo=_?null:[])}function F0(){ts.pop(),oo=ts[ts.length-1]||null}let as=1;function Vd(_){as+=_}function pf(_){return _.dynamicChildren=as>0?oo||dn:null,F0(),as>0&&oo&&oo.push(_),_}function Io(_,y,c,I,O,w){return pf(at(_,y,c,I,O,w,!0))}function N0(_,y,c,I,O){return pf(Ot(_,y,c,I,O,!0))}function ca(_){return _?_.__v_isVNode===!0:!1}function Yn(_,y){return _.type===y.type&&_.key===y.key}const Ea="__vInternal",ff=({key:_})=>_??null,na=({ref:_,ref_key:y,ref_for:c})=>(typeof _=="number"&&(_=""+_),_!=null?zt(_)||Di(_)||et(_)?{i:ki,r:_,k:y,f:!!c}:_:null);function at(_,y=null,c=null,I=0,O=null,w=_===Bi?0:1,T=!1,A=!1){const L={__v_isVNode:!0,__v_skip:!0,type:_,props:y,key:y&&ff(y),ref:y&&na(y),scopeId:Ca,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:I,dynamicProps:O,dynamicChildren:null,appContext:null,ctx:ki};return A?(Gu(L,c),w&128&&_.normalize(L)):c&&(L.shapeFlag|=zt(c)?8:16),as>0&&!T&&oo&&(L.patchFlag>0||w&6)&&L.patchFlag!==32&&oo.push(L),L}const Ot=A0;function A0(_,y=null,c=null,I=0,O=null,w=!1){if((!_||_===Qv)&&(_=mn),ca(_)){const A=bn(_,y,!0);return c&&Gu(A,c),as>0&&!w&&oo&&(A.shapeFlag&6?oo[oo.indexOf(_)]=A:oo.push(A)),A.patchFlag|=-2,A}if(Y0(_)&&(_=_.__vccOpts),y){y=B0(y);let{class:A,style:L}=y;A&&!zt(A)&&(y.class=ya(A)),$t(L)&&(Ap(L)&&!ze(L)&&(L=oi({},L)),y.style=ga(L))}const T=zt(_)?1:e0(_)?128:L0(_)?64:$t(_)?4:et(_)?2:0;return at(_,y,c,I,O,T,w,!0)}function B0(_){return _?Ap(_)||Ea in _?oi({},_):_:null}function bn(_,y,c=!1){const{props:I,ref:O,patchFlag:w,children:T}=_,A=y?$0(I||{},y):I;return{__v_isVNode:!0,__v_skip:!0,type:_.type,props:A,key:A&&ff(A),ref:y&&y.ref?c&&O?ze(O)?O.concat(na(y)):[O,na(y)]:na(y):O,scopeId:_.scopeId,slotScopeIds:_.slotScopeIds,children:T,target:_.target,targetAnchor:_.targetAnchor,staticCount:_.staticCount,shapeFlag:_.shapeFlag,patchFlag:y&&_.type!==Bi?w===-1?16:w|16:w,dynamicProps:_.dynamicProps,dynamicChildren:_.dynamicChildren,appContext:_.appContext,dirs:_.dirs,transition:_.transition,component:_.component,suspense:_.suspense,ssContent:_.ssContent&&bn(_.ssContent),ssFallback:_.ssFallback&&bn(_.ssFallback),el:_.el,anchor:_.anchor,ctx:_.ctx,ce:_.ce}}function ct(_=" ",y=0){return Ot(Ia,null,_,y)}function Co(_){return _==null||typeof _=="boolean"?Ot(mn):ze(_)?Ot(Bi,null,_.slice()):typeof _=="object"?ur(_):Ot(Ia,null,String(_))}function ur(_){return _.el===null&&_.patchFlag!==-1||_.memo?_:bn(_)}function Gu(_,y){let c=0;const{shapeFlag:I}=_;if(y==null)y=null;else if(ze(y))c=16;else if(typeof y=="object")if(I&65){const O=y.default;O&&(O._c&&(O._d=!1),Gu(_,O()),O._c&&(O._d=!0));return}else{c=32;const O=y._;!O&&!(Ea in y)?y._ctx=ki:O===3&&ki&&(ki.slots._===1?y._=1:(y._=2,_.patchFlag|=1024))}else et(y)?(y={default:y,_ctx:ki},c=32):(y=String(y),I&64?(c=16,y=[ct(y)]):c=8);_.children=y,_.shapeFlag|=c}function $0(..._){const y={};for(let c=0;c<_.length;c++){const I=_[c];for(const O in I)if(O==="class")y.class!==I.class&&(y.class=ya([y.class,I.class]));else if(O==="style")y.style=ga([y.style,I.style]);else if(pa(O)){const w=y[O],T=I[O];T&&w!==T&&!(ze(w)&&w.includes(T))&&(y[O]=w?[].concat(w,T):T)}else O!==""&&(y[O]=I[O])}return y}function wo(_,y,c,I=null){ro(_,y,7,[c,I])}const V0=nf();let j0=0;function H0(_,y,c){const I=_.type,O=(y?y.appContext:_.appContext)||V0,w={uid:j0++,vnode:_,type:I,parent:y,appContext:O,root:null,next:null,subTree:null,effect:null,update:null,scope:new gv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:y?y.provides:Object.create(O.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:af(I,O),emitsOptions:qp(I,O),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:I.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=y?y.root:w,w.emit=qv.bind(null,w),_.ce&&_.ce(w),w}let wi=null,da,Cu;{const _=wp(),y=(c,I)=>{let O;return(O=_[c])||(O=_[c]=[]),O.push(I),w=>{O.length>1?O.forEach(T=>T(w)):O[0](w)}};da=y("__VUE_INSTANCE_SETTERS__",c=>wi=c),Cu=y("__VUE_SSR_SETTERS__",c=>Sa=c)}const hs=_=>{const y=wi;return da(_),_.scope.on(),()=>{_.scope.off(),da(y)}},jd=()=>{wi&&wi.scope.off(),da(null)};function _f(_){return _.vnode.shapeFlag&4}let Sa=!1;function G0(_,y=!1){y&&Cu(y);const{props:c,children:I}=_.vnode,O=_f(_);E0(_,c,O,y),R0(_,I);const w=O?W0(_,y):void 0;return y&&Cu(!1),w}function W0(_,y){const c=_.type;_.accessCache=Object.create(null),_.proxy=Bp(new Proxy(_.ctx,y0));const{setup:I}=c;if(I){const O=_.setupContext=I.length>1?z0(_):null,w=hs(_);Tr();const T=pr(I,_,0,[_.props,O]);if(Dr(),w(),yp(T)){if(T.then(jd,jd),y)return T.then(A=>{Hd(_,A,y)}).catch(A=>{va(A,_,0)});_.asyncDep=T}else Hd(_,T,y)}else gf(_,y)}function Hd(_,y,c){et(y)?_.type.__ssrInlineRender?_.ssrRender=y:_.render=y:$t(y)&&(_.setupState=Hp(y)),gf(_,c)}let Gd;function gf(_,y,c){const I=_.type;if(!_.render){if(!y&&Gd&&!I.render){const O=I.template||ju(_).template;if(O){const{isCustomElement:w,compilerOptions:T}=_.appContext.config,{delimiters:A,compilerOptions:L}=I,G=oi(oi({isCustomElement:w,delimiters:A},T),L);I.render=Gd(O,G)}}_.render=I.render||Wi}{const O=hs(_);Tr();try{m0(_)}finally{Dr(),O()}}}function U0(_){return _.attrsProxy||(_.attrsProxy=new Proxy(_.attrs,{get(y,c){return Ti(_,"get","$attrs"),y[c]}}))}function z0(_){const y=c=>{_.exposed=c||{}};return{get attrs(){return U0(_)},slots:_.slots,emit:_.emit,expose:y}}function Wu(_){if(_.exposed)return _.exposeProxy||(_.exposeProxy=new Proxy(Hp(Bp(_.exposed)),{get(y,c){if(c in y)return y[c];if(c in Qn)return Qn[c](_)},has(y,c){return c in y||c in Qn}}))}function Y0(_){return et(_)&&"__vccOpts"in _}const io=(_,y)=>Bv(_,y,Sa);function yf(_,y,c){const I=arguments.length;return I===2?$t(y)&&!ze(y)?ca(y)?Ot(_,null,[y]):Ot(_,y):Ot(_,null,y):(I>3?c=Array.prototype.slice.call(arguments,2):I===3&&ca(c)&&(c=[c]),Ot(_,y,c))}const q0="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const K0="http://www.w3.org/2000/svg",X0="http://www.w3.org/1998/Math/MathML",hr=typeof document<"u"?document:null,Wd=hr&&hr.createElement("template"),J0={insert:(_,y,c)=>{y.insertBefore(_,c||null)},remove:_=>{const y=_.parentNode;y&&y.removeChild(_)},createElement:(_,y,c,I)=>{const O=y==="svg"?hr.createElementNS(K0,_):y==="mathml"?hr.createElementNS(X0,_):hr.createElement(_,c?{is:c}:void 0);return _==="select"&&I&&I.multiple!=null&&O.setAttribute("multiple",I.multiple),O},createText:_=>hr.createTextNode(_),createComment:_=>hr.createComment(_),setText:(_,y)=>{_.nodeValue=y},setElementText:(_,y)=>{_.textContent=y},parentNode:_=>_.parentNode,nextSibling:_=>_.nextSibling,querySelector:_=>hr.querySelector(_),setScopeId(_,y){_.setAttribute(y,"")},insertStaticContent(_,y,c,I,O,w){const T=c?c.previousSibling:y.lastChild;if(O&&(O===w||O.nextSibling))for(;y.insertBefore(O.cloneNode(!0),c),!(O===w||!(O=O.nextSibling)););else{Wd.innerHTML=I==="svg"?`<svg>${_}</svg>`:I==="mathml"?`<math>${_}</math>`:_;const A=Wd.content;if(I==="svg"||I==="mathml"){const L=A.firstChild;for(;L.firstChild;)A.appendChild(L.firstChild);A.removeChild(L)}y.insertBefore(A,c)}return[T?T.nextSibling:y.firstChild,c?c.previousSibling:y.lastChild]}},Z0=Symbol("_vtc");function Q0(_,y,c){const I=_[Z0];I&&(y=(y?[y,...I]:[...I]).join(" ")),y==null?_.removeAttribute("class"):c?_.setAttribute("class",y):_.className=y}const Ud=Symbol("_vod"),ew=Symbol("_vsh"),tw=Symbol(""),iw=/(^|;)\s*display\s*:/;function ow(_,y,c){const I=_.style,O=zt(c);let w=!1;if(c&&!O){if(y)if(zt(y))for(const T of y.split(";")){const A=T.slice(0,T.indexOf(":")).trim();c[A]==null&&sa(I,A,"")}else for(const T in y)c[T]==null&&sa(I,T,"");for(const T in c)T==="display"&&(w=!0),sa(I,T,c[T])}else if(O){if(y!==c){const T=I[tw];T&&(c+=";"+T),I.cssText=c,w=iw.test(c)}}else y&&_.removeAttribute("style");Ud in _&&(_[Ud]=w?I.display:"",_[ew]&&(I.display="none"))}const zd=/\s*!important$/;function sa(_,y,c){if(ze(c))c.forEach(I=>sa(_,y,I));else if(c==null&&(c=""),y.startsWith("--"))_.setProperty(y,c);else{const I=rw(_,y);zd.test(c)?_.setProperty(xn(I),c.replace(zd,""),"important"):_[I]=c}}const Yd=["Webkit","Moz","ms"],su={};function rw(_,y){const c=su[y];if(c)return c;let I=gn(y);if(I!=="filter"&&I in _)return su[y]=I;I=vp(I);for(let O=0;O<Yd.length;O++){const w=Yd[O]+I;if(w in _)return su[y]=w}return y}const qd="http://www.w3.org/1999/xlink";function nw(_,y,c,I,O){if(I&&y.startsWith("xlink:"))c==null?_.removeAttributeNS(qd,y.slice(6,y.length)):_.setAttributeNS(qd,y,c);else{const w=fv(y);c==null||w&&!Cp(c)?_.removeAttribute(y):_.setAttribute(y,w?"":c)}}function sw(_,y,c,I,O,w,T){if(y==="innerHTML"||y==="textContent"){I&&T(I,O,w),_[y]=c??"";return}const A=_.tagName;if(y==="value"&&A!=="PROGRESS"&&!A.includes("-")){const G=A==="OPTION"?_.getAttribute("value")||"":_.value,B=c??"";(G!==B||!("_value"in _))&&(_.value=B),c==null&&_.removeAttribute(y),_._value=c;return}let L=!1;if(c===""||c==null){const G=typeof _[y];G==="boolean"?c=Cp(c):c==null&&G==="string"?(c="",L=!0):G==="number"&&(c=0,L=!0)}try{_[y]=c}catch{}L&&_.removeAttribute(y)}function aw(_,y,c,I){_.addEventListener(y,c,I)}function lw(_,y,c,I){_.removeEventListener(y,c,I)}const Kd=Symbol("_vei");function uw(_,y,c,I,O=null){const w=_[Kd]||(_[Kd]={}),T=w[y];if(I&&T)T.value=I;else{const[A,L]=hw(y);if(I){const G=w[y]=pw(I,O);aw(_,A,G,L)}else T&&(lw(_,A,T,L),w[y]=void 0)}}const Xd=/(?:Once|Passive|Capture)$/;function hw(_){let y;if(Xd.test(_)){y={};let I;for(;I=_.match(Xd);)_=_.slice(0,_.length-I[0].length),y[I[0].toLowerCase()]=!0}return[_[2]===":"?_.slice(3):xn(_.slice(2)),y]}let au=0;const cw=Promise.resolve(),dw=()=>au||(cw.then(()=>au=0),au=Date.now());function pw(_,y){const c=I=>{if(!I._vts)I._vts=Date.now();else if(I._vts<=c.attached)return;ro(fw(I,c.value),y,5,[I])};return c.value=_,c.attached=dw(),c}function fw(_,y){if(ze(y)){const c=_.stopImmediatePropagation;return _.stopImmediatePropagation=()=>{c.call(_),_._stopped=!0},y.map(I=>O=>!O._stopped&&I&&I(O))}else return y}const Jd=_=>_.charCodeAt(0)===111&&_.charCodeAt(1)===110&&_.charCodeAt(2)>96&&_.charCodeAt(2)<123,_w=(_,y,c,I,O,w,T,A,L)=>{const G=O==="svg";y==="class"?Q0(_,I,G):y==="style"?ow(_,c,I):pa(y)?Pu(y)||uw(_,y,c,I,T):(y[0]==="."?(y=y.slice(1),!0):y[0]==="^"?(y=y.slice(1),!1):gw(_,y,I,G))?sw(_,y,I,w,T,A,L):(y==="true-value"?_._trueValue=I:y==="false-value"&&(_._falseValue=I),nw(_,y,I,G))};function gw(_,y,c,I){if(I)return!!(y==="innerHTML"||y==="textContent"||y in _&&Jd(y)&&et(c));if(y==="spellcheck"||y==="draggable"||y==="translate"||y==="form"||y==="list"&&_.tagName==="INPUT"||y==="type"&&_.tagName==="TEXTAREA")return!1;if(y==="width"||y==="height"){const O=_.tagName;if(O==="IMG"||O==="VIDEO"||O==="CANVAS"||O==="SOURCE")return!1}return Jd(y)&&zt(c)?!1:y in _}const yw=oi({patchProp:_w},J0);let Zd;function mw(){return Zd||(Zd=k0(yw))}const bw=(..._)=>{const y=mw().createApp(..._),{mount:c}=y;return y.mount=I=>{const O=ww(I);if(!O)return;const w=y._component;!et(w)&&!w.render&&!w.template&&(w.template=O.innerHTML),O.innerHTML="";const T=c(O,!1,vw(O));return O instanceof Element&&(O.removeAttribute("v-cloak"),O.setAttribute("data-v-app","")),T},y};function vw(_){if(_ instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&_ instanceof MathMLElement)return"mathml"}function ww(_){return zt(_)?document.querySelector(_):_}const Cw="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e";/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const hn=typeof document<"u";function xw(_){return _.__esModule||_[Symbol.toStringTag]==="Module"}const It=Object.assign;function lu(_,y){const c={};for(const I in y){const O=y[I];c[I]=no(O)?O.map(_):_(O)}return c}const is=()=>{},no=Array.isArray,mf=/#/g,Iw=/&/g,Ew=/\//g,Sw=/=/g,Ow=/\?/g,bf=/\+/g,Rw=/%5B/g,Pw=/%5D/g,vf=/%5E/g,kw=/%60/g,wf=/%7B/g,Tw=/%7C/g,Cf=/%7D/g,Dw=/%20/g;function Uu(_){return encodeURI(""+_).replace(Tw,"|").replace(Rw,"[").replace(Pw,"]")}function Mw(_){return Uu(_).replace(wf,"{").replace(Cf,"}").replace(vf,"^")}function xu(_){return Uu(_).replace(bf,"%2B").replace(Dw,"+").replace(mf,"%23").replace(Iw,"%26").replace(kw,"`").replace(wf,"{").replace(Cf,"}").replace(vf,"^")}function Lw(_){return xu(_).replace(Sw,"%3D")}function Fw(_){return Uu(_).replace(mf,"%23").replace(Ow,"%3F")}function Nw(_){return _==null?"":Fw(_).replace(Ew,"%2F")}function ls(_){try{return decodeURIComponent(""+_)}catch{}return""+_}const Aw=/\/$/,Bw=_=>_.replace(Aw,"");function uu(_,y,c="/"){let I,O={},w="",T="";const A=y.indexOf("#");let L=y.indexOf("?");return A<L&&A>=0&&(L=-1),L>-1&&(I=y.slice(0,L),w=y.slice(L+1,A>-1?A:y.length),O=_(w)),A>-1&&(I=I||y.slice(0,A),T=y.slice(A,y.length)),I=Hw(I??y,c),{fullPath:I+(w&&"?")+w+T,path:I,query:O,hash:ls(T)}}function $w(_,y){const c=y.query?_(y.query):"";return y.path+(c&&"?")+c+(y.hash||"")}function Qd(_,y){return!y||!_.toLowerCase().startsWith(y.toLowerCase())?_:_.slice(y.length)||"/"}function Vw(_,y,c){const I=y.matched.length-1,O=c.matched.length-1;return I>-1&&I===O&&vn(y.matched[I],c.matched[O])&&xf(y.params,c.params)&&_(y.query)===_(c.query)&&y.hash===c.hash}function vn(_,y){return(_.aliasOf||_)===(y.aliasOf||y)}function xf(_,y){if(Object.keys(_).length!==Object.keys(y).length)return!1;for(const c in _)if(!jw(_[c],y[c]))return!1;return!0}function jw(_,y){return no(_)?ep(_,y):no(y)?ep(y,_):_===y}function ep(_,y){return no(y)?_.length===y.length&&_.every((c,I)=>c===y[I]):_.length===1&&_[0]===y}function Hw(_,y){if(_.startsWith("/"))return _;if(!_)return y;const c=y.split("/"),I=_.split("/"),O=I[I.length-1];(O===".."||O===".")&&I.push("");let w=c.length-1,T,A;for(T=0;T<I.length;T++)if(A=I[T],A!==".")if(A==="..")w>1&&w--;else break;return c.slice(0,w).join("/")+"/"+I.slice(T).join("/")}var us;(function(_){_.pop="pop",_.push="push"})(us||(us={}));var os;(function(_){_.back="back",_.forward="forward",_.unknown=""})(os||(os={}));function Gw(_){if(!_)if(hn){const y=document.querySelector("base");_=y&&y.getAttribute("href")||"/",_=_.replace(/^\w+:\/\/[^\/]+/,"")}else _="/";return _[0]!=="/"&&_[0]!=="#"&&(_="/"+_),Bw(_)}const Ww=/^[^#]+#/;function Uw(_,y){return _.replace(Ww,"#")+y}function zw(_,y){const c=document.documentElement.getBoundingClientRect(),I=_.getBoundingClientRect();return{behavior:y.behavior,left:I.left-c.left-(y.left||0),top:I.top-c.top-(y.top||0)}}const Oa=()=>({left:window.scrollX,top:window.scrollY});function Yw(_){let y;if("el"in _){const c=_.el,I=typeof c=="string"&&c.startsWith("#"),O=typeof c=="string"?I?document.getElementById(c.slice(1)):document.querySelector(c):c;if(!O)return;y=zw(O,_)}else y=_;"scrollBehavior"in document.documentElement.style?window.scrollTo(y):window.scrollTo(y.left!=null?y.left:window.scrollX,y.top!=null?y.top:window.scrollY)}function tp(_,y){return(history.state?history.state.position-y:-1)+_}const Iu=new Map;function qw(_,y){Iu.set(_,y)}function Kw(_){const y=Iu.get(_);return Iu.delete(_),y}let Xw=()=>location.protocol+"//"+location.host;function If(_,y){const{pathname:c,search:I,hash:O}=y,w=_.indexOf("#");if(w>-1){let A=O.includes(_.slice(w))?_.slice(w).length:1,L=O.slice(A);return L[0]!=="/"&&(L="/"+L),Qd(L,"")}return Qd(c,_)+I+O}function Jw(_,y,c,I){let O=[],w=[],T=null;const A=({state:q})=>{const ie=If(_,location),Se=c.value,Le=y.value;let $e=0;if(q){if(c.value=ie,y.value=q,T&&T===Se){T=null;return}$e=Le?q.position-Le.position:0}else I(ie);O.forEach(Te=>{Te(c.value,Se,{delta:$e,type:us.pop,direction:$e?$e>0?os.forward:os.back:os.unknown})})};function L(){T=c.value}function G(q){O.push(q);const ie=()=>{const Se=O.indexOf(q);Se>-1&&O.splice(Se,1)};return w.push(ie),ie}function B(){const{history:q}=window;q.state&&q.replaceState(It({},q.state,{scroll:Oa()}),"")}function z(){for(const q of w)q();w=[],window.removeEventListener("popstate",A),window.removeEventListener("beforeunload",B)}return window.addEventListener("popstate",A),window.addEventListener("beforeunload",B,{passive:!0}),{pauseListeners:L,listen:G,destroy:z}}function ip(_,y,c,I=!1,O=!1){return{back:_,current:y,forward:c,replaced:I,position:window.history.length,scroll:O?Oa():null}}function Zw(_){const{history:y,location:c}=window,I={value:If(_,c)},O={value:y.state};O.value||w(I.value,{back:null,current:I.value,forward:null,position:y.length-1,replaced:!0,scroll:null},!0);function w(L,G,B){const z=_.indexOf("#"),q=z>-1?(c.host&&document.querySelector("base")?_:_.slice(z))+L:Xw()+_+L;try{y[B?"replaceState":"pushState"](G,"",q),O.value=G}catch(ie){console.error(ie),c[B?"replace":"assign"](q)}}function T(L,G){const B=It({},y.state,ip(O.value.back,L,O.value.forward,!0),G,{position:O.value.position});w(L,B,!0),I.value=L}function A(L,G){const B=It({},O.value,y.state,{forward:L,scroll:Oa()});w(B.current,B,!0);const z=It({},ip(I.value,L,null),{position:B.position+1},G);w(L,z,!1),I.value=L}return{location:I,state:O,push:A,replace:T}}function Qw(_){_=Gw(_);const y=Zw(_),c=Jw(_,y.state,y.location,y.replace);function I(w,T=!0){T||c.pauseListeners(),history.go(w)}const O=It({location:"",base:_,go:I,createHref:Uw.bind(null,_)},y,c);return Object.defineProperty(O,"location",{enumerable:!0,get:()=>y.location.value}),Object.defineProperty(O,"state",{enumerable:!0,get:()=>y.state.value}),O}function eC(_){return typeof _=="string"||_&&typeof _=="object"}function Ef(_){return typeof _=="string"||typeof _=="symbol"}const ar={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Sf=Symbol("");var op;(function(_){_[_.aborted=4]="aborted",_[_.cancelled=8]="cancelled",_[_.duplicated=16]="duplicated"})(op||(op={}));function wn(_,y){return It(new Error,{type:_,[Sf]:!0},y)}function Bo(_,y){return _ instanceof Error&&Sf in _&&(y==null||!!(_.type&y))}const rp="[^/]+?",tC={sensitive:!1,strict:!1,start:!0,end:!0},iC=/[.+*?^${}()[\]/\\]/g;function oC(_,y){const c=It({},tC,y),I=[];let O=c.start?"^":"";const w=[];for(const G of _){const B=G.length?[]:[90];c.strict&&!G.length&&(O+="/");for(let z=0;z<G.length;z++){const q=G[z];let ie=40+(c.sensitive?.25:0);if(q.type===0)z||(O+="/"),O+=q.value.replace(iC,"\\$&"),ie+=40;else if(q.type===1){const{value:Se,repeatable:Le,optional:$e,regexp:Te}=q;w.push({name:Se,repeatable:Le,optional:$e});const Fe=Te||rp;if(Fe!==rp){ie+=10;try{new RegExp(`(${Fe})`)}catch(nt){throw new Error(`Invalid custom RegExp for param "${Se}" (${Fe}): `+nt.message)}}let be=Le?`((?:${Fe})(?:/(?:${Fe}))*)`:`(${Fe})`;z||(be=$e&&G.length<2?`(?:/${be})`:"/"+be),$e&&(be+="?"),O+=be,ie+=20,$e&&(ie+=-8),Le&&(ie+=-20),Fe===".*"&&(ie+=-50)}B.push(ie)}I.push(B)}if(c.strict&&c.end){const G=I.length-1;I[G][I[G].length-1]+=.7000000000000001}c.strict||(O+="/?"),c.end?O+="$":c.strict&&(O+="(?:/|$)");const T=new RegExp(O,c.sensitive?"":"i");function A(G){const B=G.match(T),z={};if(!B)return null;for(let q=1;q<B.length;q++){const ie=B[q]||"",Se=w[q-1];z[Se.name]=ie&&Se.repeatable?ie.split("/"):ie}return z}function L(G){let B="",z=!1;for(const q of _){(!z||!B.endsWith("/"))&&(B+="/"),z=!1;for(const ie of q)if(ie.type===0)B+=ie.value;else if(ie.type===1){const{value:Se,repeatable:Le,optional:$e}=ie,Te=Se in G?G[Se]:"";if(no(Te)&&!Le)throw new Error(`Provided param "${Se}" is an array but it is not repeatable (* or + modifiers)`);const Fe=no(Te)?Te.join("/"):Te;if(!Fe)if($e)q.length<2&&(B.endsWith("/")?B=B.slice(0,-1):z=!0);else throw new Error(`Missing required param "${Se}"`);B+=Fe}}return B||"/"}return{re:T,score:I,keys:w,parse:A,stringify:L}}function rC(_,y){let c=0;for(;c<_.length&&c<y.length;){const I=y[c]-_[c];if(I)return I;c++}return _.length<y.length?_.length===1&&_[0]===80?-1:1:_.length>y.length?y.length===1&&y[0]===80?1:-1:0}function nC(_,y){let c=0;const I=_.score,O=y.score;for(;c<I.length&&c<O.length;){const w=rC(I[c],O[c]);if(w)return w;c++}if(Math.abs(O.length-I.length)===1){if(np(I))return 1;if(np(O))return-1}return O.length-I.length}function np(_){const y=_[_.length-1];return _.length>0&&y[y.length-1]<0}const sC={type:0,value:""},aC=/[a-zA-Z0-9_]/;function lC(_){if(!_)return[[]];if(_==="/")return[[sC]];if(!_.startsWith("/"))throw new Error(`Invalid path "${_}"`);function y(ie){throw new Error(`ERR (${c})/"${G}": ${ie}`)}let c=0,I=c;const O=[];let w;function T(){w&&O.push(w),w=[]}let A=0,L,G="",B="";function z(){G&&(c===0?w.push({type:0,value:G}):c===1||c===2||c===3?(w.length>1&&(L==="*"||L==="+")&&y(`A repeatable param (${G}) must be alone in its segment. eg: '/:ids+.`),w.push({type:1,value:G,regexp:B,repeatable:L==="*"||L==="+",optional:L==="*"||L==="?"})):y("Invalid state to consume buffer"),G="")}function q(){G+=L}for(;A<_.length;){if(L=_[A++],L==="\\"&&c!==2){I=c,c=4;continue}switch(c){case 0:L==="/"?(G&&z(),T()):L===":"?(z(),c=1):q();break;case 4:q(),c=I;break;case 1:L==="("?c=2:aC.test(L)?q():(z(),c=0,L!=="*"&&L!=="?"&&L!=="+"&&A--);break;case 2:L===")"?B[B.length-1]=="\\"?B=B.slice(0,-1)+L:c=3:B+=L;break;case 3:z(),c=0,L!=="*"&&L!=="?"&&L!=="+"&&A--,B="";break;default:y("Unknown state");break}}return c===2&&y(`Unfinished custom RegExp for param "${G}"`),z(),T(),O}function uC(_,y,c){const I=oC(lC(_.path),c),O=It(I,{record:_,parent:y,children:[],alias:[]});return y&&!O.record.aliasOf==!y.record.aliasOf&&y.children.push(O),O}function hC(_,y){const c=[],I=new Map;y=lp({strict:!1,end:!0,sensitive:!1},y);function O(B){return I.get(B)}function w(B,z,q){const ie=!q,Se=cC(B);Se.aliasOf=q&&q.record;const Le=lp(y,B),$e=[Se];if("alias"in B){const be=typeof B.alias=="string"?[B.alias]:B.alias;for(const nt of be)$e.push(It({},Se,{components:q?q.record.components:Se.components,path:nt,aliasOf:q?q.record:Se}))}let Te,Fe;for(const be of $e){const{path:nt}=be;if(z&&nt[0]!=="/"){const mt=z.record.path,je=mt[mt.length-1]==="/"?"":"/";be.path=z.record.path+(nt&&je+nt)}if(Te=uC(be,z,Le),q?q.alias.push(Te):(Fe=Fe||Te,Fe!==Te&&Fe.alias.push(Te),ie&&B.name&&!ap(Te)&&T(B.name)),Se.children){const mt=Se.children;for(let je=0;je<mt.length;je++)w(mt[je],Te,q&&q.children[je])}q=q||Te,(Te.record.components&&Object.keys(Te.record.components).length||Te.record.name||Te.record.redirect)&&L(Te)}return Fe?()=>{T(Fe)}:is}function T(B){if(Ef(B)){const z=I.get(B);z&&(I.delete(B),c.splice(c.indexOf(z),1),z.children.forEach(T),z.alias.forEach(T))}else{const z=c.indexOf(B);z>-1&&(c.splice(z,1),B.record.name&&I.delete(B.record.name),B.children.forEach(T),B.alias.forEach(T))}}function A(){return c}function L(B){let z=0;for(;z<c.length&&nC(B,c[z])>=0&&(B.record.path!==c[z].record.path||!Of(B,c[z]));)z++;c.splice(z,0,B),B.record.name&&!ap(B)&&I.set(B.record.name,B)}function G(B,z){let q,ie={},Se,Le;if("name"in B&&B.name){if(q=I.get(B.name),!q)throw wn(1,{location:B});Le=q.record.name,ie=It(sp(z.params,q.keys.filter(Fe=>!Fe.optional).concat(q.parent?q.parent.keys.filter(Fe=>Fe.optional):[]).map(Fe=>Fe.name)),B.params&&sp(B.params,q.keys.map(Fe=>Fe.name))),Se=q.stringify(ie)}else if(B.path!=null)Se=B.path,q=c.find(Fe=>Fe.re.test(Se)),q&&(ie=q.parse(Se),Le=q.record.name);else{if(q=z.name?I.get(z.name):c.find(Fe=>Fe.re.test(z.path)),!q)throw wn(1,{location:B,currentLocation:z});Le=q.record.name,ie=It({},z.params,B.params),Se=q.stringify(ie)}const $e=[];let Te=q;for(;Te;)$e.unshift(Te.record),Te=Te.parent;return{name:Le,path:Se,params:ie,matched:$e,meta:pC($e)}}return _.forEach(B=>w(B)),{addRoute:w,resolve:G,removeRoute:T,getRoutes:A,getRecordMatcher:O}}function sp(_,y){const c={};for(const I of y)I in _&&(c[I]=_[I]);return c}function cC(_){return{path:_.path,redirect:_.redirect,name:_.name,meta:_.meta||{},aliasOf:void 0,beforeEnter:_.beforeEnter,props:dC(_),children:_.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in _?_.components||null:_.component&&{default:_.component}}}function dC(_){const y={},c=_.props||!1;if("component"in _)y.default=c;else for(const I in _.components)y[I]=typeof c=="object"?c[I]:c;return y}function ap(_){for(;_;){if(_.record.aliasOf)return!0;_=_.parent}return!1}function pC(_){return _.reduce((y,c)=>It(y,c.meta),{})}function lp(_,y){const c={};for(const I in _)c[I]=I in y?y[I]:_[I];return c}function Of(_,y){return y.children.some(c=>c===_||Of(_,c))}function fC(_){const y={};if(_===""||_==="?")return y;const I=(_[0]==="?"?_.slice(1):_).split("&");for(let O=0;O<I.length;++O){const w=I[O].replace(bf," "),T=w.indexOf("="),A=ls(T<0?w:w.slice(0,T)),L=T<0?null:ls(w.slice(T+1));if(A in y){let G=y[A];no(G)||(G=y[A]=[G]),G.push(L)}else y[A]=L}return y}function up(_){let y="";for(let c in _){const I=_[c];if(c=Lw(c),I==null){I!==void 0&&(y+=(y.length?"&":"")+c);continue}(no(I)?I.map(w=>w&&xu(w)):[I&&xu(I)]).forEach(w=>{w!==void 0&&(y+=(y.length?"&":"")+c,w!=null&&(y+="="+w))})}return y}function _C(_){const y={};for(const c in _){const I=_[c];I!==void 0&&(y[c]=no(I)?I.map(O=>O==null?null:""+O):I==null?I:""+I)}return y}const gC=Symbol(""),hp=Symbol(""),zu=Symbol(""),Rf=Symbol(""),Eu=Symbol("");function qn(){let _=[];function y(I){return _.push(I),()=>{const O=_.indexOf(I);O>-1&&_.splice(O,1)}}function c(){_=[]}return{add:y,list:()=>_.slice(),reset:c}}function cr(_,y,c,I,O,w=T=>T()){const T=I&&(I.enterCallbacks[O]=I.enterCallbacks[O]||[]);return()=>new Promise((A,L)=>{const G=q=>{q===!1?L(wn(4,{from:c,to:y})):q instanceof Error?L(q):eC(q)?L(wn(2,{from:y,to:q})):(T&&I.enterCallbacks[O]===T&&typeof q=="function"&&T.push(q),A())},B=w(()=>_.call(I&&I.instances[O],y,c,G));let z=Promise.resolve(B);_.length<3&&(z=z.then(G)),z.catch(q=>L(q))})}function hu(_,y,c,I,O=w=>w()){const w=[];for(const T of _)for(const A in T.components){let L=T.components[A];if(!(y!=="beforeRouteEnter"&&!T.instances[A]))if(yC(L)){const B=(L.__vccOpts||L)[y];B&&w.push(cr(B,c,I,T,A,O))}else{let G=L();w.push(()=>G.then(B=>{if(!B)return Promise.reject(new Error(`Couldn't resolve component "${A}" at "${T.path}"`));const z=xw(B)?B.default:B;T.components[A]=z;const ie=(z.__vccOpts||z)[y];return ie&&cr(ie,c,I,T,A,O)()}))}}return w}function yC(_){return typeof _=="object"||"displayName"in _||"props"in _||"__vccOpts"in _}function cp(_){const y=jo(zu),c=jo(Rf),I=io(()=>y.resolve(Vo(_.to))),O=io(()=>{const{matched:L}=I.value,{length:G}=L,B=L[G-1],z=c.matched;if(!B||!z.length)return-1;const q=z.findIndex(vn.bind(null,B));if(q>-1)return q;const ie=dp(L[G-2]);return G>1&&dp(B)===ie&&z[z.length-1].path!==ie?z.findIndex(vn.bind(null,L[G-2])):q}),w=io(()=>O.value>-1&&vC(c.params,I.value.params)),T=io(()=>O.value>-1&&O.value===c.matched.length-1&&xf(c.params,I.value.params));function A(L={}){return bC(L)?y[Vo(_.replace)?"replace":"push"](Vo(_.to)).catch(is):Promise.resolve()}return{route:I,href:io(()=>I.value.href),isActive:w,isExactActive:T,navigate:A}}const mC=In({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:cp,setup(_,{slots:y}){const c=ba(cp(_)),{options:I}=jo(zu),O=io(()=>({[pp(_.activeClass,I.linkActiveClass,"router-link-active")]:c.isActive,[pp(_.exactActiveClass,I.linkExactActiveClass,"router-link-exact-active")]:c.isExactActive}));return()=>{const w=y.default&&y.default(c);return _.custom?w:yf("a",{"aria-current":c.isExactActive?_.ariaCurrentValue:null,href:c.href,onClick:c.navigate,class:O.value},w)}}}),Su=mC;function bC(_){if(!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)&&!_.defaultPrevented&&!(_.button!==void 0&&_.button!==0)){if(_.currentTarget&&_.currentTarget.getAttribute){const y=_.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(y))return}return _.preventDefault&&_.preventDefault(),!0}}function vC(_,y){for(const c in y){const I=y[c],O=_[c];if(typeof I=="string"){if(I!==O)return!1}else if(!no(O)||O.length!==I.length||I.some((w,T)=>w!==O[T]))return!1}return!0}function dp(_){return _?_.aliasOf?_.aliasOf.path:_.path:""}const pp=(_,y,c)=>_??y??c,wC=In({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(_,{attrs:y,slots:c}){const I=jo(Eu),O=io(()=>_.route||I.value),w=jo(hp,0),T=io(()=>{let G=Vo(w);const{matched:B}=O.value;let z;for(;(z=B[G])&&!z.components;)G++;return G}),A=io(()=>O.value.matched[T.value]);ra(hp,io(()=>T.value+1)),ra(gC,A),ra(Eu,O);const L=$v();return oa(()=>[L.value,A.value,_.name],([G,B,z],[q,ie,Se])=>{B&&(B.instances[z]=G,ie&&ie!==B&&G&&G===q&&(B.leaveGuards.size||(B.leaveGuards=ie.leaveGuards),B.updateGuards.size||(B.updateGuards=ie.updateGuards))),G&&B&&(!ie||!vn(B,ie)||!q)&&(B.enterCallbacks[z]||[]).forEach(Le=>Le(G))},{flush:"post"}),()=>{const G=O.value,B=_.name,z=A.value,q=z&&z.components[B];if(!q)return fp(c.default,{Component:q,route:G});const ie=z.props[B],Se=ie?ie===!0?G.params:typeof ie=="function"?ie(G):ie:null,$e=yf(q,It({},Se,y,{onVnodeUnmounted:Te=>{Te.component.isUnmounted&&(z.instances[B]=null)},ref:L}));return fp(c.default,{Component:$e,route:G})||$e}}});function fp(_,y){if(!_)return null;const c=_(y);return c.length===1?c[0]:c}const Pf=wC;function CC(_){const y=hC(_.routes,_),c=_.parseQuery||fC,I=_.stringifyQuery||up,O=_.history,w=qn(),T=qn(),A=qn(),L=Vv(ar);let G=ar;hn&&_.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const B=lu.bind(null,ee=>""+ee),z=lu.bind(null,Nw),q=lu.bind(null,ls);function ie(ee,ve){let ge,Ie;return Ef(ee)?(ge=y.getRecordMatcher(ee),Ie=ve):Ie=ee,y.addRoute(Ie,ge)}function Se(ee){const ve=y.getRecordMatcher(ee);ve&&y.removeRoute(ve)}function Le(){return y.getRoutes().map(ee=>ee.record)}function $e(ee){return!!y.getRecordMatcher(ee)}function Te(ee,ve){if(ve=It({},ve||L.value),typeof ee=="string"){const $=uu(c,ee,ve.path),X=y.resolve({path:$.path},ve),te=O.createHref($.fullPath);return It($,X,{params:q(X.params),hash:ls($.hash),redirectedFrom:void 0,href:te})}let ge;if(ee.path!=null)ge=It({},ee,{path:uu(c,ee.path,ve.path).path});else{const $=It({},ee.params);for(const X in $)$[X]==null&&delete $[X];ge=It({},ee,{params:z($)}),ve.params=z(ve.params)}const Ie=y.resolve(ge,ve),ut=ee.hash||"";Ie.params=B(q(Ie.params));const St=$w(I,It({},ee,{hash:Mw(ut),path:Ie.path})),M=O.createHref(St);return It({fullPath:St,hash:ut,query:I===up?_C(ee.query):ee.query||{}},Ie,{redirectedFrom:void 0,href:M})}function Fe(ee){return typeof ee=="string"?uu(c,ee,L.value.path):It({},ee)}function be(ee,ve){if(G!==ee)return wn(8,{from:ve,to:ee})}function nt(ee){return Yt(ee)}function mt(ee){return nt(It(Fe(ee),{replace:!0}))}function je(ee){const ve=ee.matched[ee.matched.length-1];if(ve&&ve.redirect){const{redirect:ge}=ve;let Ie=typeof ge=="function"?ge(ee):ge;return typeof Ie=="string"&&(Ie=Ie.includes("?")||Ie.includes("#")?Ie=Fe(Ie):{path:Ie},Ie.params={}),It({query:ee.query,hash:ee.hash,params:Ie.path!=null?{}:ee.params},Ie)}}function Yt(ee,ve){const ge=G=Te(ee),Ie=L.value,ut=ee.state,St=ee.force,M=ee.replace===!0,$=je(ge);if($)return Yt(It(Fe($),{state:typeof $=="object"?It({},ut,$.state):ut,force:St,replace:M}),ve||ge);const X=ge;X.redirectedFrom=ve;let te;return!St&&Vw(I,Ie,ge)&&(te=wn(16,{to:X,from:Ie}),ri(Ie,Ie,!0,!1)),(te?Promise.resolve(te):Vt(X,Ie)).catch(Q=>Bo(Q)?Bo(Q,2)?Q:Vi(Q):lt(Q,X,Ie)).then(Q=>{if(Q){if(Bo(Q,2))return Yt(It({replace:M},Fe(Q.to),{state:typeof Q.to=="object"?It({},ut,Q.to.state):ut,force:St}),ve||X)}else Q=$i(X,Ie,!0,M,ut);return Dt(X,Ie,Q),Q})}function Jt(ee,ve){const ge=be(ee,ve);return ge?Promise.reject(ge):Promise.resolve()}function Ui(ee){const ve=lo.values().next().value;return ve&&typeof ve.runWithContext=="function"?ve.runWithContext(ee):ee()}function Vt(ee,ve){let ge;const[Ie,ut,St]=xC(ee,ve);ge=hu(Ie.reverse(),"beforeRouteLeave",ee,ve);for(const $ of Ie)$.leaveGuards.forEach(X=>{ge.push(cr(X,ee,ve))});const M=Jt.bind(null,ee,ve);return ge.push(M),Et(ge).then(()=>{ge=[];for(const $ of w.list())ge.push(cr($,ee,ve));return ge.push(M),Et(ge)}).then(()=>{ge=hu(ut,"beforeRouteUpdate",ee,ve);for(const $ of ut)$.updateGuards.forEach(X=>{ge.push(cr(X,ee,ve))});return ge.push(M),Et(ge)}).then(()=>{ge=[];for(const $ of St)if($.beforeEnter)if(no($.beforeEnter))for(const X of $.beforeEnter)ge.push(cr(X,ee,ve));else ge.push(cr($.beforeEnter,ee,ve));return ge.push(M),Et(ge)}).then(()=>(ee.matched.forEach($=>$.enterCallbacks={}),ge=hu(St,"beforeRouteEnter",ee,ve,Ui),ge.push(M),Et(ge))).then(()=>{ge=[];for(const $ of T.list())ge.push(cr($,ee,ve));return ge.push(M),Et(ge)}).catch($=>Bo($,8)?$:Promise.reject($))}function Dt(ee,ve,ge){A.list().forEach(Ie=>Ui(()=>Ie(ee,ve,ge)))}function $i(ee,ve,ge,Ie,ut){const St=be(ee,ve);if(St)return St;const M=ve===ar,$=hn?history.state:{};ge&&(Ie||M?O.replace(ee.fullPath,It({scroll:M&&$&&$.scroll},ut)):O.push(ee.fullPath,ut)),L.value=ee,ri(ee,ve,ge,M),Vi()}let dt;function zi(){dt||(dt=O.listen((ee,ve,ge)=>{if(!Eo.listening)return;const Ie=Te(ee),ut=je(Ie);if(ut){Yt(It(ut,{replace:!0}),Ie).catch(is);return}G=Ie;const St=L.value;hn&&qw(tp(St.fullPath,ge.delta),Oa()),Vt(Ie,St).catch(M=>Bo(M,12)?M:Bo(M,2)?(Yt(M.to,Ie).then($=>{Bo($,20)&&!ge.delta&&ge.type===us.pop&&O.go(-1,!1)}).catch(is),Promise.reject()):(ge.delta&&O.go(-ge.delta,!1),lt(M,Ie,St))).then(M=>{M=M||$i(Ie,St,!1),M&&(ge.delta&&!Bo(M,8)?O.go(-ge.delta,!1):ge.type===us.pop&&Bo(M,20)&&O.go(-1,!1)),Dt(Ie,St,M)}).catch(is)}))}let Yi=qn(),Nt=qn(),pt;function lt(ee,ve,ge){Vi(ee);const Ie=Nt.list();return Ie.length?Ie.forEach(ut=>ut(ee,ve,ge)):console.error(ee),Promise.reject(ee)}function Ci(){return pt&&L.value!==ar?Promise.resolve():new Promise((ee,ve)=>{Yi.add([ee,ve])})}function Vi(ee){return pt||(pt=!ee,zi(),Yi.list().forEach(([ve,ge])=>ee?ge(ee):ve()),Yi.reset()),ee}function ri(ee,ve,ge,Ie){const{scrollBehavior:ut}=_;if(!hn||!ut)return Promise.resolve();const St=!ge&&Kw(tp(ee.fullPath,0))||(Ie||!ge)&&history.state&&history.state.scroll||null;return Wp().then(()=>ut(ee,ve,St)).then(M=>M&&Yw(M)).catch(M=>lt(M,ee,ve))}const At=ee=>O.go(ee);let ao;const lo=new Set,Eo={currentRoute:L,listening:!0,addRoute:ie,removeRoute:Se,hasRoute:$e,getRoutes:Le,resolve:Te,options:_,push:nt,replace:mt,go:At,back:()=>At(-1),forward:()=>At(1),beforeEach:w.add,beforeResolve:T.add,afterEach:A.add,onError:Nt.add,isReady:Ci,install(ee){const ve=this;ee.component("RouterLink",Su),ee.component("RouterView",Pf),ee.config.globalProperties.$router=ve,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>Vo(L)}),hn&&!ao&&L.value===ar&&(ao=!0,nt(O.location).catch(ut=>{}));const ge={};for(const ut in ar)Object.defineProperty(ge,ut,{get:()=>L.value[ut],enumerable:!0});ee.provide(zu,ve),ee.provide(Rf,Fp(ge)),ee.provide(Eu,L);const Ie=ee.unmount;lo.add(ee),ee.unmount=function(){lo.delete(ee),lo.size<1&&(G=ar,dt&&dt(),dt=null,L.value=ar,ao=!1,pt=!1),Ie()}}};function Et(ee){return ee.reduce((ve,ge)=>ve.then(()=>Ui(ge)),Promise.resolve())}return Eo}function xC(_,y){const c=[],I=[],O=[],w=Math.max(y.matched.length,_.matched.length);for(let T=0;T<w;T++){const A=y.matched[T];A&&(_.matched.find(G=>vn(G,A))?I.push(A):c.push(A));const L=_.matched[T];L&&(y.matched.find(G=>vn(G,L))||O.push(L))}return[c,I,O]}const IC=_=>(Kp("data-v-a47c673d"),_=_(),Xp(),_),EC={class:"greetings"},SC={class:"green"},OC=IC(()=>at("h3",null,[ct(" Youve successfully created a project with "),at("a",{href:"https://vitejs.dev/",target:"_blank",rel:"noopener"},"Vite"),ct(" + "),at("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"Vue 3"),ct(". What's next? ")],-1)),RC=In({__name:"HelloWorld",props:{msg:{}},setup(_){return(y,c)=>(so(),Io("div",EC,[at("h1",SC,_v(y.msg),1),OC]))}}),_r=(_,y)=>{const c=_.__vccOpts||_;for(const[I,O]of y)c[I]=O;return c},PC=_r(RC,[["__scopeId","data-v-a47c673d"]]),kC=_=>(Kp("data-v-53fae4d8"),_=_(),Xp(),_),TC=kC(()=>at("img",{alt:"Vue logo",class:"logo",src:Cw,width:"125",height:"125"},null,-1)),DC={class:"wrapper"},MC=In({__name:"App",setup(_){return(y,c)=>(so(),Io(Bi,null,[at("header",null,[TC,at("div",DC,[Ot(PC,{msg:"You did it!"}),at("nav",null,[Ot(Vo(Su),{to:"/"},{default:Xt(()=>[ct("Home")]),_:1}),Ot(Vo(Su),{to:"/about"},{default:Xt(()=>[ct("About")]),_:1})])])]),Ot(Vo(Pf))],64))}}),LC=_r(MC,[["__scopeId","data-v-53fae4d8"]]),FC="modulepreload",NC=function(_){return"/vue/deploy/"+_},_p={},AC=function(y,c,I){let O=Promise.resolve();if(c&&c.length>0){const w=document.getElementsByTagName("link");O=Promise.all(c.map(T=>{if(T=NC(T),T in _p)return;_p[T]=!0;const A=T.endsWith(".css"),L=A?'[rel="stylesheet"]':"";if(!!I)for(let z=w.length-1;z>=0;z--){const q=w[z];if(q.href===T&&(!A||q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${L}`))return;const B=document.createElement("link");if(B.rel=A?"stylesheet":FC,A||(B.as="script",B.crossOrigin=""),B.href=T,document.head.appendChild(B),A)return new Promise((z,q)=>{B.addEventListener("load",z),B.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${T}`)))})}))}return O.then(()=>y()).catch(w=>{const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=w,window.dispatchEvent(T),!T.defaultPrevented)throw w})},BC={},$C={class:"item"},VC={class:"details"};function jC(_,y){return so(),Io("div",$C,[at("i",null,[iu(_.$slots,"icon",{},void 0,!0)]),at("div",VC,[at("h3",null,[iu(_.$slots,"heading",{},void 0,!0)]),iu(_.$slots,"default",{},void 0,!0)])])}const Kn=_r(BC,[["render",jC],["__scopeId","data-v-fd0742eb"]]),HC={},GC={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",fill:"currentColor"},WC=at("path",{d:"M11 2.253a1 1 0 1 0-2 0h2zm-2 13a1 1 0 1 0 2 0H9zm.447-12.167a1 1 0 1 0 1.107-1.666L9.447 3.086zM1 2.253L.447 1.42A1 1 0 0 0 0 2.253h1zm0 13H0a1 1 0 0 0 1.553.833L1 15.253zm8.447.833a1 1 0 1 0 1.107-1.666l-1.107 1.666zm0-14.666a1 1 0 1 0 1.107 1.666L9.447 1.42zM19 2.253h1a1 1 0 0 0-.447-.833L19 2.253zm0 13l-.553.833A1 1 0 0 0 20 15.253h-1zm-9.553-.833a1 1 0 1 0 1.107 1.666L9.447 14.42zM9 2.253v13h2v-13H9zm1.553-.833C9.203.523 7.42 0 5.5 0v2c1.572 0 2.961.431 3.947 1.086l1.107-1.666zM5.5 0C3.58 0 1.797.523.447 1.42l1.107 1.666C2.539 2.431 3.928 2 5.5 2V0zM0 2.253v13h2v-13H0zm1.553 13.833C2.539 15.431 3.928 15 5.5 15v-2c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM5.5 15c1.572 0 2.961.431 3.947 1.086l1.107-1.666C9.203 13.523 7.42 13 5.5 13v2zm5.053-11.914C11.539 2.431 12.928 2 14.5 2V0c-1.92 0-3.703.523-5.053 1.42l1.107 1.666zM14.5 2c1.573 0 2.961.431 3.947 1.086l1.107-1.666C18.203.523 16.421 0 14.5 0v2zm3.5.253v13h2v-13h-2zm1.553 12.167C18.203 13.523 16.421 13 14.5 13v2c1.573 0 2.961.431 3.947 1.086l1.107-1.666zM14.5 13c-1.92 0-3.703.523-5.053 1.42l1.107 1.666C11.539 15.431 12.928 15 14.5 15v-2z"},null,-1),UC=[WC];function zC(_,y){return so(),Io("svg",GC,UC)}const YC=_r(HC,[["render",zC]]),qC={},KC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--mdi",width:"24",height:"24",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},XC=at("path",{d:"M20 18v-4h-3v1h-2v-1H9v1H7v-1H4v4h16M6.33 8l-1.74 4H7v-1h2v1h6v-1h2v1h2.41l-1.74-4H6.33M9 5v1h6V5H9m12.84 7.61c.1.22.16.48.16.8V18c0 .53-.21 1-.6 1.41c-.4.4-.85.59-1.4.59H4c-.55 0-1-.19-1.4-.59C2.21 19 2 18.53 2 18v-4.59c0-.32.06-.58.16-.8L4.5 7.22C4.84 6.41 5.45 6 6.33 6H7V5c0-.55.18-1 .57-1.41C7.96 3.2 8.44 3 9 3h6c.56 0 1.04.2 1.43.59c.39.41.57.86.57 1.41v1h.67c.88 0 1.49.41 1.83 1.22l2.34 5.39z",fill:"currentColor"},null,-1),JC=[XC];function ZC(_,y){return so(),Io("svg",KC,JC)}const QC=_r(qC,[["render",ZC]]),e1={},t1={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"currentColor"},i1=at("path",{d:"M11.447 8.894a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm0 1.789a1 1 0 1 0 .894-1.789l-.894 1.789zM7.447 7.106a1 1 0 1 0-.894 1.789l.894-1.789zM10 9a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0H8zm9.447-5.606a1 1 0 1 0-.894-1.789l.894 1.789zm-2.894-.789a1 1 0 1 0 .894 1.789l-.894-1.789zm2 .789a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zM18 5a1 1 0 1 0-2 0h2zm-2 2.5a1 1 0 1 0 2 0h-2zm-5.447-4.606a1 1 0 1 0 .894-1.789l-.894 1.789zM9 1l.447-.894a1 1 0 0 0-.894 0L9 1zm-2.447.106a1 1 0 1 0 .894 1.789l-.894-1.789zm-6 3a1 1 0 1 0 .894 1.789L.553 4.106zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zm-2-.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 2.789a1 1 0 1 0 .894-1.789l-.894 1.789zM2 5a1 1 0 1 0-2 0h2zM0 7.5a1 1 0 1 0 2 0H0zm8.553 12.394a1 1 0 1 0 .894-1.789l-.894 1.789zm-1.106-2.789a1 1 0 1 0-.894 1.789l.894-1.789zm1.106 1a1 1 0 1 0 .894 1.789l-.894-1.789zm2.894.789a1 1 0 1 0-.894-1.789l.894 1.789zM8 19a1 1 0 1 0 2 0H8zm2-2.5a1 1 0 1 0-2 0h2zm-7.447.394a1 1 0 1 0 .894-1.789l-.894 1.789zM1 15H0a1 1 0 0 0 .553.894L1 15zm1-2.5a1 1 0 1 0-2 0h2zm12.553 2.606a1 1 0 1 0 .894 1.789l-.894-1.789zM17 15l.447.894A1 1 0 0 0 18 15h-1zm1-2.5a1 1 0 1 0-2 0h2zm-7.447-5.394l-2 1 .894 1.789 2-1-.894-1.789zm-1.106 1l-2-1-.894 1.789 2 1 .894-1.789zM8 9v2.5h2V9H8zm8.553-4.894l-2 1 .894 1.789 2-1-.894-1.789zm.894 0l-2-1-.894 1.789 2 1 .894-1.789zM16 5v2.5h2V5h-2zm-4.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zm-2.894-1l-2 1 .894 1.789 2-1L8.553.106zM1.447 5.894l2-1-.894-1.789-2 1 .894 1.789zm-.894 0l2 1 .894-1.789-2-1-.894 1.789zM0 5v2.5h2V5H0zm9.447 13.106l-2-1-.894 1.789 2 1 .894-1.789zm0 1.789l2-1-.894-1.789-2 1 .894 1.789zM10 19v-2.5H8V19h2zm-6.553-3.894l-2-1-.894 1.789 2 1 .894-1.789zM2 15v-2.5H0V15h2zm13.447 1.894l2-1-.894-1.789-2 1 .894 1.789zM18 15v-2.5h-2V15h2z"},null,-1),o1=[i1];function r1(_,y){return so(),Io("svg",t1,o1)}const n1=_r(e1,[["render",r1]]),s1={},a1={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor"},l1=at("path",{d:"M15 4a1 1 0 1 0 0 2V4zm0 11v-1a1 1 0 0 0-1 1h1zm0 4l-.707.707A1 1 0 0 0 16 19h-1zm-4-4l.707-.707A1 1 0 0 0 11 14v1zm-4.707-1.293a1 1 0 0 0-1.414 1.414l1.414-1.414zm-.707.707l-.707-.707.707.707zM9 11v-1a1 1 0 0 0-.707.293L9 11zm-4 0h1a1 1 0 0 0-1-1v1zm0 4H4a1 1 0 0 0 1.707.707L5 15zm10-9h2V4h-2v2zm2 0a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3v2zm1 1v6h2V7h-2zm0 6a1 1 0 0 1-1 1v2a3 3 0 0 0 3-3h-2zm-1 1h-2v2h2v-2zm-3 1v4h2v-4h-2zm1.707 3.293l-4-4-1.414 1.414 4 4 1.414-1.414zM11 14H7v2h4v-2zm-4 0c-.276 0-.525-.111-.707-.293l-1.414 1.414C5.42 15.663 6.172 16 7 16v-2zm-.707 1.121l3.414-3.414-1.414-1.414-3.414 3.414 1.414 1.414zM9 12h4v-2H9v2zm4 0a3 3 0 0 0 3-3h-2a1 1 0 0 1-1 1v2zm3-3V3h-2v6h2zm0-6a3 3 0 0 0-3-3v2a1 1 0 0 1 1 1h2zm-3-3H3v2h10V0zM3 0a3 3 0 0 0-3 3h2a1 1 0 0 1 1-1V0zM0 3v6h2V3H0zm0 6a3 3 0 0 0 3 3v-2a1 1 0 0 1-1-1H0zm3 3h2v-2H3v2zm1-1v4h2v-4H4zm1.707 4.707l.586-.586-1.414-1.414-.586.586 1.414 1.414z"},null,-1),u1=[l1];function h1(_,y){return so(),Io("svg",a1,u1)}const c1=_r(s1,[["render",h1]]),d1={},p1={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor"},f1=at("path",{d:"M10 3.22l-.61-.6a5.5 5.5 0 0 0-7.666.105 5.5 5.5 0 0 0-.114 7.665L10 18.78l8.39-8.4a5.5 5.5 0 0 0-.114-7.665 5.5 5.5 0 0 0-7.666-.105l-.61.61z"},null,-1),_1=[f1];function g1(_,y){return so(),Io("svg",p1,_1)}const y1=_r(d1,[["render",g1]]),m1=at("a",{href:"https://vuejs.org/",target:"_blank",rel:"noopener"},"official documentation",-1),b1=at("a",{href:"https://vitejs.dev/guide/features.html",target:"_blank",rel:"noopener"},"Vite",-1),v1=at("a",{href:"https://code.visualstudio.com/",target:"_blank",rel:"noopener"},"VSCode",-1),w1=at("a",{href:"https://github.com/johnsoncodehk/volar",target:"_blank",rel:"noopener"},"Volar",-1),C1=at("a",{href:"https://www.cypress.io/",target:"_blank",rel:"noopener"},"Cypress",-1),x1=at("a",{href:"https://on.cypress.io/component",target:"_blank",rel:"noopener"},"Cypress Component Testing",-1),I1=at("br",null,null,-1),E1=at("code",null,"README.md",-1),S1=at("a",{href:"https://pinia.vuejs.org/",target:"_blank",rel:"noopener"},"Pinia",-1),O1=at("a",{href:"https://router.vuejs.org/",target:"_blank",rel:"noopener"},"Vue Router",-1),R1=at("a",{href:"https://test-utils.vuejs.org/",target:"_blank",rel:"noopener"},"Vue Test Utils",-1),P1=at("a",{href:"https://github.com/vuejs/devtools",target:"_blank",rel:"noopener"},"Vue Dev Tools",-1),k1=at("a",{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"},"Awesome Vue",-1),T1=at("a",{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"},"Vue Land",-1),D1=at("a",{href:"https://stackoverflow.com/questions/tagged/vue.js",target:"_blank",rel:"noopener"},"StackOverflow",-1),M1=at("a",{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"},"our mailing list",-1),L1=at("a",{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"},"@vuejs",-1),F1=at("a",{href:"https://vuejs.org/sponsor/",target:"_blank",rel:"noopener"},"becoming a sponsor",-1),N1=In({__name:"TheWelcome",setup(_){return(y,c)=>(so(),Io(Bi,null,[Ot(Kn,null,{icon:Xt(()=>[Ot(YC)]),heading:Xt(()=>[ct("Documentation")]),default:Xt(()=>[ct(" Vues "),m1,ct(" provides you with all information you need to get started. ")]),_:1}),Ot(Kn,null,{icon:Xt(()=>[Ot(QC)]),heading:Xt(()=>[ct("Tooling")]),default:Xt(()=>[ct(" This project is served and bundled with "),b1,ct(". The recommended IDE setup is "),v1,ct(" + "),w1,ct(". If you need to test your components and web pages, check out "),C1,ct(" and "),x1,ct(". "),I1,ct(" More instructions are available in "),E1,ct(". ")]),_:1}),Ot(Kn,null,{icon:Xt(()=>[Ot(n1)]),heading:Xt(()=>[ct("Ecosystem")]),default:Xt(()=>[ct(" Get official tools and libraries for your project: "),S1,ct(", "),O1,ct(", "),R1,ct(", and "),P1,ct(". If you need more resources, we suggest paying "),k1,ct(" a visit. ")]),_:1}),Ot(Kn,null,{icon:Xt(()=>[Ot(c1)]),heading:Xt(()=>[ct("Community")]),default:Xt(()=>[ct(" Got stuck? Ask your question on "),T1,ct(", our official Discord server, or "),D1,ct(". You should also subscribe to "),M1,ct(" and follow the official "),L1,ct(" twitter account for latest news in the Vue world. ")]),_:1}),Ot(Kn,null,{icon:Xt(()=>[Ot(y1)]),heading:Xt(()=>[ct("Support Vue")]),default:Xt(()=>[ct(" As an independent project, Vue relies on community backing for its sustainability. You can help us by "),F1,ct(". ")]),_:1})],64))}}),A1=In({__name:"HomeView",setup(_){return(y,c)=>(so(),Io("main",null,[Ot(N1)]))}}),B1=CC({history:Qw("/vue/deploy/"),routes:[{path:"/",name:"home",component:A1},{path:"/about",name:"about",component:()=>AC(()=>import("./AboutView-BDe2Vm_o.js"),__vite__mapDeps([0,1]))}]});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var Ou={exports:{}};(function(_,y){(function(c,I){I(y)})(cu,function(c){var I={name:"RealGrid2",version:"2.8.0.1558",license:"enterprise",code:null},O=function(a,i){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},O(a,i)};function w(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=a}O(a,i),a.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}var T=function(){return T=Object.assign||function(a){for(var i,e=1,t=arguments.length;e<t;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o]);return a},T.apply(this,arguments)};function A(a,i,e,t){return new(e||(e=Promise))(function(o,r){function n(u){try{l(t.next(u))}catch(h){r(h)}}function s(u){try{l(t.throw(u))}catch(h){r(h)}}function l(u){var h;u.done?o(u.value):(h=u.value,h instanceof e?h:new e(function(d){d(h)})).then(n,s)}l((t=t.apply(a,i||[])).next())})}function L(a,i){var e,t,o,r,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function s(l){return function(u){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(n=0)),n;)try{if(e=1,t&&(o=2&h[0]?t.return:h[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,h[1])).done)return o;switch(t=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,t=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!((o=o.length>0&&o[o.length-1])||h[0]!==6&&h[0]!==2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=i.call(a,n)}catch(d){h=[6,d],t=0}finally{e=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([l,u])}}}function G(a,i,e){if(e||arguments.length===2)for(var t,o=0,r=i.length;o<r;o++)!t&&o in i||(t||(t=Array.prototype.slice.call(i,0,o)),t[o]=i[o]);return a.concat(t||Array.prototype.slice.call(i))}var B,z,q,ie,Se,Le,$e,Te="$_hash",Fe="$_view",be="$_row",nt="$_idx",mt="$_foc",je="$_lev";c.ValueType=void 0,(B=c.ValueType||(c.ValueType={})).TEXT="text",B.NUMBER="number",B.BOOLEAN="boolean",B.DATETIME="datetime",B.OBJECT="object",B.CHAR="char",B.UNUM="unum",B.INT="int",B.UINT="uint",B.DATE="date",c.SortDirection=void 0,(z=c.SortDirection||(c.SortDirection={})).ASCENDING="ascending",z.DESCENDING="descending",z.NONE="none",c.SortCase=void 0,(q=c.SortCase||(c.SortCase={})).SENSITIVE="sensitive",q.INSENSITIVE="insensitive",function(a){a.ROWS="rows",a.ITEMS="items"}(ie||(ie={})),c.SortMode=void 0,(Se=c.SortMode||(c.SortMode={})).AUTO="auto",Se.EXPLICIT="explicit",c.FilterMode=void 0,(Le=c.FilterMode||(c.FilterMode={})).AUTO="auto",Le.EXPLICIT="explicit",c.RowGroupAdornments=void 0,($e=c.RowGroupAdornments||(c.RowGroupAdornments={})).NONE="none",$e.HEADER="header",$e.FOOTER="footer",$e.SUMMARY="summary",$e.BOTH="both";var Yt,Jt;c.ValidationMode=void 0,(Yt=c.ValidationMode||(c.ValidationMode={})).ALWAYS="always",Yt.UPDATE="update",Yt.INSERT="insert",c.ValidationLevel=void 0,(Jt=c.ValidationLevel||(c.ValidationLevel={})).ERROR="error",Jt.WARNING="warning",Jt.INFO="info",Jt.IGNORE="ignore";var Ui,Vt,Dt,$i,dt,zi,Yi,Nt,pt,lt,Ci,Vi,ri,At,ao,lo,Eo,Et,ee,ve,ge,Ie,ut,St,M,$,X,te={error:1,warning:2,info:3,ignore:4},Q=function(a,i){return te[a]-te[i]};c.SummaryMode=void 0,(Ui=c.SummaryMode||(c.SummaryMode={})).NONE="none",Ui.AGGREGATE="aggregate",Ui.STATISTICAL="statistical",c.ColumnHeaderItemLocation=void 0,(Vt=c.ColumnHeaderItemLocation||(c.ColumnHeaderItemLocation={})).NONE="none",Vt.LEFT_EDGE="leftEdge",Vt.RIGHT_EDGE="rightEdge",Vt.TOP_EDGE="topEdge",Vt.BOTTOM_EDGE="bottomEdge",Vt.LEFT="left",Vt.RIGHT="right",Vt.TOP="top",Vt.BOTTOM="bottom",Vt.CENTER="center",function(a){a.NONE="none",a.HEAD="head",a.BODY="body",a.TAIL="tail"}(Dt||(Dt={})),c.GridFitStyle=void 0,($i=c.GridFitStyle||(c.GridFitStyle={})).NONE="none",$i.EVEN="even",$i.EVEN_FILL="evenFill",$i.FILL="fill",c.GridCellType=void 0,(dt=c.GridCellType||(c.GridCellType={})).DATA="data",dt.HEADER="header",dt.FOOTER="footer",dt.SUMMARY="summary",dt.INDICATOR="indicator",dt.STATE="state",dt.CHECK="check",dt.HEAD="head",dt.FOOT="foot",dt.SUM="sum",dt.FIXED_BAR="fixedbar",dt.GROUP_HEADER="groupHeader",dt.GROUP_FOOTER="groupFooter",dt.GROUP_BAR="groupBar",dt.GROUP_HEAD="groupHead",dt.GROUP_FOOT="groupFoot",dt.GROUP_PANEL="groupPanel",dt.GROUP_COLUMN="groupColumn",dt.GRID_EMPTY="gridEmpty",dt.LAYOUT_HEADER="layoutHeader",dt.FILTER="filter",dt.INLINE_FILTER="inlineFilter",c.RowMaskType=void 0,(zi=c.RowMaskType||(c.RowMaskType={})).NONE="none",zi.ROW="row",zi.DATA="data",zi.FILL="fill",zi.CELL="cell",c.TextInputCase=void 0,(Yi=c.TextInputCase||(c.TextInputCase={})).NORMAL="normal",Yi.UPPER="upper",Yi.LOWER="lower",Yi.DEFAULT="default",c.DefaultShowDate=void 0,(Nt=c.DefaultShowDate||(c.DefaultShowDate={})).NORMAL="normal",Nt.TODAY="today",Nt.TODAY_WHEN_NULL="todayWhenNull",Nt.DEFAULT="default",Nt.DEFAULT_WHEN_NULL="defaultWhenNull",c.SortStyle=void 0,(pt=c.SortStyle||(c.SortStyle={})).NONE="none",pt.EXCLUSIVE="exclusive",pt.INCLUSIVE="inclusive",pt.REVERSE="reverse",c.MenuItemType=void 0,(lt=c.MenuItemType||(c.MenuItemType={})).NORMAL="normal",lt.CHECK="check",lt.RADIO="radio",lt.SEPARATOR="separator",c.HandleVisibility=void 0,(Ci=c.HandleVisibility||(c.HandleVisibility={})).VISIBLE="visible",Ci.HOVERED="hovered",Ci.ALWAYS="always",Ci.HIDDEN="hidden",c.CellButton=void 0,(Vi=c.CellButton||(c.CellButton={})).NONE="none",Vi.ACTION="action",Vi.POPUP="popup",c.ButtonVisibility=void 0,(ri=c.ButtonVisibility||(c.ButtonVisibility={})).ALWAYS="always",ri.DEFAULT="default",ri.VISIBLE="visible",ri.HIDDEN="hidden",ri.ROWFOCUSED="rowfocused",c.IconLocation=void 0,(At=c.IconLocation||(c.IconLocation={})).LEFT="left",At.RIGHT="right",At.LEFT_EDGE="leftEdge",At.RIGHT_EDGE="rightEdge",At.TOP="top",At.BOTTOM="bottom",At.TOP_EDGE="topEdge",At.BOTTOM_EDGE="bottomEdge",At.CENTER="center",c.RefreshMode=void 0,(ao=c.RefreshMode||(c.RefreshMode={})).ALL="all",ao.VISIBLE_ONLY="visibleOnly",ao.RECYCLE="recycle",c.ScrollOnEditing=void 0,(lo=c.ScrollOnEditing||(c.ScrollOnEditing={})).CANCEL="cancel",lo.COMMIT="commit",lo.DEFAULT="default",c.ItemType=void 0,(Eo=c.ItemType||(c.ItemType={})).ROW="row",Eo.GROUP="group",Eo.FOOTER="footer",Eo.TREE="tree",c.SummaryType=void 0,(Et=c.SummaryType||(c.SummaryType={})).COUNT="count",Et.SUM="sum",Et.MAX="max",Et.MIN="min",Et.AVG="avg",Et.VAR="var",Et.VARP="varp",Et.STDEV="stdev",Et.STDEVP="stdevp",Et.DATACOUNT="datacount",Et.DATAAVG="dataavg",c.ExpanderVisibility=void 0,(ee=c.ExpanderVisibility||(c.ExpanderVisibility={})).ALWAYS="always",ee.DEFAULT="default",ee.NONE="none",c.ExitGridWhenTab=void 0,(ve=c.ExitGridWhenTab||(c.ExitGridWhenTab={})).ROW="row",ve.GRID="grid",ve.NONE="none",c.FocusType=void 0,(ge=c.FocusType||(c.FocusType={})).LAYER="layer",ge.LINE="line",c.EdgeMark=void 0,(Ie=c.EdgeMark||(c.EdgeMark={})).LEFT_TOP="leftTop",Ie.LEFT_BOTTOM="leftBottom",Ie.RIGHT_TOP="rightTop",Ie.RIGHT_BOTTOM="rightBottom",c.GroupShowMode=void 0,(ut=c.GroupShowMode||(c.GroupShowMode={})).EXPAND="expand",ut.COLLAPSE="collapse",ut.ALWAYS="always",c.SyncGridHeight=void 0,(St=c.SyncGridHeight||(c.SyncGridHeight={})).NONE="none",St.OVER="over",St.ALWAYS="always",c.InlineFilterOperator=void 0,(M=c.InlineFilterOperator||(c.InlineFilterOperator={})).EQUAL="equal",M.NOT_EQUAL="notEqual",M.CONTAINS="contains",M.NOT_CONTAINS="notContains",M.STARTS_WITH="startsWith",M.ENDS_WITH="endsWith",M.RESET="reset",M.GREATER="greater",M.GREATER_EQUAL="greaterEqual",M.LOWER="lower",M.LOWER_EQUAL="lowerEqual",M.BETWEEN="between",M.EMPTY="empty",c.TreeExpanderIconStyle=void 0,($=c.TreeExpanderIconStyle||(c.TreeExpanderIconStyle={})).TRIANGLE="triangle",$.SQUARE="square",c.NullsOrder=void 0,(X=c.NullsOrder||(c.NullsOrder={})).FIRST="first",X.LAST="last",X.DEFAULT="default";var Z=function(){function a(i,e,t,o){i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0),o===void 0&&(o=0),this.x=i,this.y=e,this.width=t,this.height=o}return Object.defineProperty(a.prototype,"left",{get:function(){return this.x},set:function(i){var e=i-this.x;this.x+=e,this.width-=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.x+this.width},set:function(i){var e=i-(this.x+this.width);this.width+=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.y},set:function(i){var e=i-this.y;this.y+=e,this.height-=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y+this.height},set:function(i){var e=i-(this.y+this.height);this.height+=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isEmpty",{get:function(){return this.width===0||this.height===0},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.getInner=function(){return new a(0,0,this.width,this.height)},a.prototype.equals=function(i){return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height},a.prototype.leftBy=function(i){return this.x+=i,this.width-=i,this},a.prototype.rightBy=function(i){return this.width+=i,this},a.prototype.topBy=function(i){return this.y+=i,this.height-=i,this},a.prototype.bottomBy=function(i){return this.height+=i,this},a.prototype.shrink=function(i,e){return this.width-=i,this.height-=e,this},a.prototype.expand=function(i,e){return this.width+=i,this.height+=e,this},a.prototype.contains=function(i,e){return i>=this.x&&i<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},a.prototype.setEmpty=function(){return this.width=this.height=0,this},a.prototype.move=function(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),this.x=i,this.y=e,this},a.prototype.set=function(i,e,t,o){return this.x=i,this.y=e,this.width=t,this.height=o,this},a.prototype.setWidth=function(i){return this.width=i,this},a.prototype.copy=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},a.prototype.copyHorz=function(i){return this.x=i.x,this.width=i.width,this},a.prototype.copyVert=function(i){return this.y=i.y,this.height=i.height,this},a.prototype.inflate=function(i,e,t,o){return i===void 0&&(i=0),e===void 0&&(e=void 0),t===void 0&&(t=void 0),o===void 0&&(o=void 0),e=e!==void 0?e:i,t=t!==void 0?t:i,o=o!==void 0?o:e,i&&(this.left=this.x-i),e&&(this.top=this.y-e),t&&(this.right=this.right+t),o&&(this.bottom=this.bottom+o),this},a.prototype.offset=function(i,e){return this.x+=i,this.y+=e,this},a.prototype.round=function(){var i=this.clone();return i.x>>>=0,i.y>>>=0,i.width>>>=0,i.height>>>=0,i},a.prototype.union=function(i){var e=this.clone();return e.left=Math.min(this.x,i.x),e.right=Math.max(this.right,i.right),e.top=Math.min(this.y,i.y),e.bottom=Math.max(this.bottom,i.bottom),e},a.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},a.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},a.Temp=new a,a}(),ce=typeof window<"u"?window:{},oe=typeof navigator<"u"?navigator.userAgent:"",he=typeof navigator<"u"?navigator.platform:"",ne=typeof navigator<"u"?navigator.appVersion:"",we=he.toUpperCase().indexOf("MAC")>=0,Ne=he.toUpperCase().indexOf("WIN")>=0,ke=!!ce.opera||oe.indexOf(" OPR/")>=0,He=!!ce.whale,Ze=!!ce.chrome&&!ke,bt=ce.InstallTrigger!==void 0,Pt=!!ce.safari||!Ze&&!ke&&oe.indexOf("Safari")>=0,jt=oe.toLowerCase().indexOf("edge/")>=0,Mi=/iPad|iPhone|iPod/.test(oe)&&!ce.MSStream,Go=oe.toLowerCase().indexOf("edg/")>=0&&oe.toLowerCase().indexOf("chrome/")>=0,gr=function(){try{for(var a=3,i=document.createElement("div"),e=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0];);return a>4?a:void 0}catch{return}}(),yr=gr!==void 0&&gr<=9,cs=gr!==void 0&&gr<=8,_i=!!oe.match(/Trident.*rv\:11\./),Li=ne.indexOf("MSIE 10")!==-1,En=ne.indexOf("MSIE 9")!==-1,Yu=_i||Li||En,Tf=new Date().getTime(),Ra=void 0,Pa=void 0,ka=void 0,Ta=void 0;function tt(a){return a&&a.ownerDocument&&(a.ownerDocument.defaultView||a.ownerDocument.parentWindow)}function xe(a){return a&&a.ownerDocument}function Zt(a){return a.defaultView||a.parentWindow}var Sn,v=function(){function a(){}return a.stopEvent=function(i,e){e===void 0&&(e=!1),i.preventDefault?(i.preventDefault(),i.stopPropagation()):i.returnValue=!1,e&&i.stopImmediatePropagation()},a.setDebugging=function(i,e,t){a.$$_debugging=e,a.$$_keyLog=t},a.isDebugging=function(){return a.$$_debugging},a.setSlotMode=function(i){a.$$_slotMode=i},a.setLanguage=function(i){a.$$_lang=i},Object.defineProperty(a,"language",{get:function(){return this.$$_lang},enumerable:!1,configurable:!0}),a.isSlotMode=function(){return a.$$_slotMode},a.log=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.isDebugging()&&console.log(i,e)},a.keyLog=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.$$_keyLog&&console.log(i,e)},a.isArray=function(i){return Array.isArray(i)},a.isObject=function(i){return i!=null&&typeof i=="object"},a.makeArray=function(i,e){return e===void 0&&(e=!1),i!=null?a.isArray(i)?i:[i]:e?[]:void 0},a.isNumber=function(i){return typeof i=="number"},a.getNumber=function(i,e){return isNaN(parseFloat(i))?e:parseFloat(i)},a.getTimer=function(){return new Date().getTime()-Tf},a.isWhiteSpace=function(i){return!i||!i.trim()},a.pad=function(i,e,t){return e=Math.max(e||2,1),t=t||"0",new Array(e-String(i).length+1).join(t)+i},a.pick=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t,o=i.length,r=0;r<o;r++)if((t=i[r])!=null)return t},a.included=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var o=e.length,r=0;r<o;r++)if(e[r]==i)return!0;return!1},a.valueIn=function(i,e){if(typeof e=="object"){for(var t=Object.keys(e),o=0;o<t.length;o++)if(e[t[o]]===i)return!0}return!1},a.compareTextValue=function(i,e,t,o){if(i===e)return!0;var r=String(i),n=e==null?void 0:String(e);return!r&&!n||!(!r||!n)&&(t||(r=r.toLowerCase(),n=n.toLowerCase()),o?n.indexOf(r)>=0:r==n)},a.cast=function(i,e){return i instanceof e?i:null},a.toInt=function(i,e){var t=parseInt(i,e||10);return isNaN(t)?0:t},a.toFloat=function(i){var e=parseFloat(i);return isNaN(e)?0:e},a.hex=function(i,e,t){e===void 0&&(e=2),t===void 0&&(t="0"),e=Math.max(e||2,1);var o=i.toString(16);return t=t||"0",new Array(e-o.length+1).join(t)+o},a.deepCopy=function(i){if(i==null||typeof i!="object")return i;if(i instanceof Date)return new Date(i);for(var e=a.isArray(i)?[]:{},t=0,o=Object.keys(i);t<o.length;t++){var r=o[t];i.hasOwnProperty(r)&&(e[r]=a.deepCopy(i[r]))}return e},a.extendObj=function(i,e){if(i==null||typeof i!="object"||e==null||typeof e!="object")return e;for(var t=0,o=Object.keys(i);t<o.length;t++){var r=o[t];i.hasOwnProperty(r)&&e[r]===void 0&&(e[r]=i[r])}return e},a.getBounds=function(i){var e=new Z;return e.x=i.offsetLeft,e.y=i.offsetTop,e.width=i.offsetWidth,e.height=i.offsetHeight,e},a.toStr=function(i){return typeof i=="number"?isNaN(i)?"":String(i):i!=null?String(i):""},a.setBounds=function(i,e,t,o,r){var n=i.style;n.left=e+"px",n.top=t+"px",n.width=o+"px",n.height=r+"px"},a.getClientRect=function(i){var e=i.getBoundingClientRect();return e.cx=i.offsetLeft,e.cy=i.offsetTop,e},a.getChildIndex=function(i){if(i){var e=i.parentNode;if(e){for(var t=e.children,o=t.length;o--;)if(t[o]===i)return o}}return-1},a.clearChildren=function(i){for(var e;e=i.lastChild;)i.removeChild(e)},a.clearElements=function(i){for(var e;e=i.lastChild;)a.clearElements(e),i.removeChild(e)},a.addChild=function(i,e){return!(!i||!e||e.parentNode===i)&&(i.appendChild(e),!0)},a.removeChild=function(i,e){return!(!i||!e||e.parentNode!==i)&&(i.removeChild(e),!0)},a.disableSelection=function(i){var e=i.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},a.setMobile=function(i){Ra=i},a.setTablet=function(i){ka=i},a.isMobile=function(){return Ra!==void 0?Ra:(Pa===void 0&&(Pa=this.$_checkMobile()),Pa)},a.isTablet=function(){return ka!==void 0?ka:(Ta===void 0&&(Ta=this.$_checkTablet()),Ta)},a.$_checkTablet=function(){return a.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(oe.toLowerCase())},a.$_checkMobile=function(){var i=!1;return(oe.match(/Android/i)||oe.match(/webOS/i)||oe.match(/iPhone/i)||oe.match(/iPad/i)||oe.match(/iPod/i)||oe.match(/BlackBerry/i)||oe.match(/Windows Phone/i))&&(i=!0),i||(i="ontouchstart"in window&&oe.indexOf("Macintosh")>=0),i},a.getBrowserSize=function(i){var e=i?i.ownerDocument:document,t=e.defaultView;return{width:t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:t.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},a.move=function(i,e,t){i.style.left=e+"px",i.style.top=t+"px"},a.htmlEncode=function(i){return document.createElement("a").appendChild(document.createTextNode(i)).parentNode.innerHTML},a.detach=function(i){return i&&i.parentNode&&i.parentNode.removeChild(i),null},a.getSize=function(i){var e=i.getBoundingClientRect();return{width:e.width,height:e.height}},a.getScrolled=function(i){var e=i.body,t=Zt(i),o=i.documentElement;return{sx:t.pageXOffset||o.scrollLeft||e.scrollLeft,sy:t.pageYOffset||o.scrollTop||e.scrollTop}},a.getOffset=function(i){var e=i.ownerDocument,t=e.defaultView,o=i.getBoundingClientRect(),r=e.body,n=e.documentElement,s=t.pageYOffset||n.scrollTop||r.scrollTop,l=t.pageXOffset||n.scrollLeft||r.scrollLeft,u=n.clientTop||r.clientTop||0,h=n.clientLeft||r.clientLeft||0,d=o.left+l-h,p=o.top+s-u;return{x:Math.round(d),y:Math.round(p)}},a.isAncestorOf=function(i,e,t){var o;if((e instanceof SVGElement||e.shadowRoot)&&t&&t.composedPath)for(var r=t.composedPath();r.length&&(o=r.shift())&&!(o instanceof HTMLElement););else o=e.parentElement;for(;o;){if(o==i)return!0;o=o.parentElement}return!1},a.getComposedPath=function(i){if(i.composedPath)return i.composedPath();for(var e=i.target,t=[];e;)t.push(e),e=e.parentElement;return t},a.equalNumbers=function(i,e){return isNaN(i)&&isNaN(e)||!isNaN(i)&&i==e},a.equalArrays=function(i,e){if(i===e)return!0;if(i==null||e==null)return!1;var t=i.length;if(t!=e.length)return!1;for(var o=0;o<t;++o)if(i[o]!==e[o])return!1;return!0},a.equalObjects=function(i,e){return i==e||JSON.stringify(i)===JSON.stringify(e)},a.isLeapYear=function(i){return i%4==0&&i%100!=0||i%400==0},a.incMonth=function(i,e){var t=i.getDate();return i.setDate(1),i.setMonth(i.getMonth()+e),i.setDate(Math.min(t,a.month_days[a.isLeapYear(i.getFullYear())?1:0][i.getMonth()])),i},a.incYear=function(i,e){var t=i.getDate();return i.setDate(1),i.setFullYear(i.getFullYear()+e),i.setDate(Math.min(t,a.month_days[a.isLeapYear(i.getFullYear())?1:0][i.getMonth()])),i},a.setClassName=function(i,e){(e=e||"")!=i.className&&(i.className=e)},a.addClassName=function(i,e){if(e=e||"",i.classList)i.classList.add(e);else{var t=i.className.split(" ");t.indexOf(e)<0&&t.push(e),i.className=t.join(" ")}},a.removeClassName=function(i,e){if(i.classList)i.classList.remove(e);else{var t,o=i.className.split(" ");(t=o.indexOf(e))>=0&&o.splice(t,1),i.className=o.join(" ")}},a.setStyle=function(i,e){var t=e.style;for(var o in i)i[o]!=null?t[o]=i[o]:(t.removeProperty?t.removeProperty(o):t.removeAttribute&&t.removeAttribute(o),t[o]="")},a.getBoundingClientRect2=function(i){var e=i.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},a.getTextLength=function(i){for(var e=0,t=0,o=0;i&&(t=i.charCodeAt(o));o++)e+=t>>7?2:1;return e},a.isEmpty=function(i){return i&&Object.keys(i).length>0},a.isPassive=function(){if(a.$_supportPassive===null){a.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){a.$_supportPassive=!0}}))}catch{a.log("passive not support")}}return a.$_supportPassive},a.hangulToChosungAll=function(i){for(var e="",t=0;t<i.length;t++){var o=i.charCodeAt(t)-44032;e+=o>-1&&o<11172?a.cho[Math.floor(o/588)]:i[t]}return e},a.hangulToChosung=function(i){var e={cho:i,org:i};if(/[-]/.test(i)){var t=a.cho,o=i.charCodeAt(0);o>=12593&&o<=12622&&(e.org=void 0),(o-=44032)>=0&&o<11172&&(e.cho=t[Math.floor(o/588)])}return e},a.addQuot=function(i,e){return i&&(i.indexOf(`
`)>=0||i.indexOf(`\r
`)>=0||i.charAt(0)=='"')&&(i='"'+(i=i.replace(/\"/g,'""'))+'"'),i},a.addQuatation=function(i,e,t,o){return i!=null&&((t||o)&&(t&&i&&(i=i.replace(/\n/g,t)),o&&i&&(i=i.replace(/\r/g,o))),(e||i.indexOf(`
`)>=0||i.indexOf(",")>=0||i.indexOf('"')>=0)&&(i='"'+i.replace(/\"/g,'""')+'"')),i===null?"":i},a.isClickableTemplate=function(i,e){return Array.prototype.some.call(i.querySelectorAll("input, textarea, a, select, button, [tabindex]"),function(t){return e===t})},a.isFocusableTemplate=function(i,e){return Array.prototype.some.call(i.querySelectorAll("input, textarea, select"),function(t){var o=t.type;return t===e&&o!=="button"&&o!=="checkbox"})},a.objectToCssText=function(i){return typeof i=="string"?i:i?Object.keys(i).map(function(e){return"".concat(e.split(/(?=[A-Z])/).join("-").toLowerCase(),":").concat(i[e])}).join(";"):null},a.getLast=function(i){return i[i.length-1]},a.camelToHyphen=function(i,e,t){return t===void 0&&(t="-"),i&&(e?i.split(/(?=[A-Z])/).join(t).toUpperCase():i.split(/(?=[A-Z])/).join(t).toLowerCase())},a.find=function(i,e){for(var t=0;t<i.length;t++)if(e.call(null,i[t],t,i))return i[t]},a.isInteractive=function(i){var e=tt(i);return i instanceof(e==null?void 0:e.HTMLInputElement)&&i.type==="checkbox"||i instanceof(e==null?void 0:e.HTMLAnchorElement)},a.assign=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var o=Object(i),r=0;r<e.length;r++){var n=e[r];if(n!=null)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=n[s])}return o},a.isIE=Yu,a.isEdge=jt,a.ieAll=Yu||jt,a.ieOld=yr,a.isMac=we,a.isWin=Ne,a.isSafari=Pt,a.isChrome=Ze,a.isFirefox=bt,a.isOpera=ke,a.ieLeg=cs,a.ieTen=Li,a.ieNine=En,a.isiOS=Mi,a.isChromium=Ze||Go||He||ke,a.TextProp=a.ieAll?"innerText":"textContent",a.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],a.cho=["","","","","","","","","","","","","","","","","","",""],a.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,a.$_INVISIBLE_EDIT_BOUNDS=new Z(-1e4,-1e4,100,100),a.$$_debugging=!1,a.$$_keyLog=!1,a.$$_slotMode=!1,a.$_supportPassive=null,a}(),On=function(){function a(){}return a.encode=function(i){var e,t,o,r,n,s,l,u="",h=0,d=a.CHARACTERS;for(i=a.utf8_encode(i);h<i.length;)r=(e=i.charCodeAt(h++))>>2,n=(3&e)<<4|(t=i.charCodeAt(h++))>>4,s=(15&t)<<2|(o=i.charCodeAt(h++))>>6,l=63&o,isNaN(t)?s=l=64:isNaN(o)&&(l=64),u=u+d.charAt(r)+d.charAt(n)+d.charAt(s)+d.charAt(l);return u},a.decode=function(i){var e,t,o,r,n,s,l="",u=0,h=a.CHARACTERS;for(i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<i.length;)e=h.indexOf(i.charAt(u++))<<2|(r=h.indexOf(i.charAt(u++)))>>4,t=(15&r)<<4|(n=h.indexOf(i.charAt(u++)))>>2,o=(3&n)<<6|(s=h.indexOf(i.charAt(u++))),l+=String.fromCharCode(e),n!=64&&(l+=String.fromCharCode(t)),s!=64&&(l+=String.fromCharCode(o));return l=a.utf8_decode(l)},a.utf8_encode=function(i){i=i.replace(/\r\n/g,`
`);for(var e="",t=0;t<i.length;t++){var o=i.charCodeAt(t);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},a.utf8_decode=function(i){for(var e="",t=0,o=0,r=0,n=0,s=i.length;t<s;)(o=i.charCodeAt(t))<128?(e+=String.fromCharCode(o),t++):o>191&&o<224?(r=i.charCodeAt(t+1),e+=String.fromCharCode((31&o)<<6|63&r),t+=2):(r=i.charCodeAt(t+1),n=i.charCodeAt(t+2),e+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&n),t+=3);return e},a.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a.btoa=function(i){for(var e,t,o,r,n=a.CHARACTERS,s="",l=0,u=(i=String(i)).length%3;l<i.length;){if((t=i.charCodeAt(l++))>255||(o=i.charCodeAt(l++))>255||(r=i.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");e=t<<16|o<<8|r,s+=n.charAt(e>>18&63)+n.charAt(e>>12&63)+n.charAt(e>>6&63)+n.charAt(63&e)}return u?s.slice(0,u-3)+"===".substring(u):s},a}();c.RowState=void 0,(Sn=c.RowState||(c.RowState={})).NONE="none",Sn.CREATED="created",Sn.UPDATED="updated",Sn.DELETED="deleted",Sn.CREATE_AND_DELETED="createAndDeleted";var Qt=function(a){return a==c.RowState.DELETED||a==c.RowState.CREATE_AND_DELETED},Wo=function(){function a(i){this.format=i}return Object.defineProperty(a.prototype,"format",{get:function(){return this._format},set:function(i){i!=this._format&&(this._format=i,this.parse(i))},enumerable:!1,configurable:!0}),a.prototype.toBool=function(i){return!!this.toBoolStrict(i)},a.prototype.toBoolEx=function(i){var e=this._sensitive?i:i.toLowerCase(),t=this.$_toBool(i);return t??(e?!!e:void 0)},a.prototype.toBoolStrict=function(i){return this.$_toBool(i)},a.prototype.toText=function(i){return i?this._trueText:this._falseText},a.prototype.$_toBool=function(i){if(this._values){var e=this._sensitive?i:i.toLowerCase();if(e in this._values)return this._values[e]}},a.prototype.parse=function(i){var e=this;if(this._values={},i){this._trueText=this._falseText=null;var t=i.split(/[;\:]/),o=this._sensitive=t[2]!="0",r=t[0]?o?t[0].split(","):t[0].toLowerCase().split(","):null,n=t[1]?o?t[1].split(","):t[1].toLowerCase().split(","):null;r&&r.forEach(function(s){e._values[s]=!1,e._falseText=e._falseText||s}),n&&n.forEach(function(s){e._values[s]=!0,e._trueText=e._trueText||s})}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},a.Default=new a("false,f,0:true,t,1:0"),a}(),Df=function(){function a(i){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",i&&(this.format=i)}return Object.defineProperty(a.prototype,"format",{get:function(){return this._format},set:function(i){if(i!=this._format){if(!i)throw new Error("Invalid empty date format");this._format=i,this.parseFormat(i)}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"baseYear",{get:function(){return this._baseYear},set:function(i){i!=this._baseYear&&(this._baseYear=i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"amText",{get:function(){return this._amText},set:function(i){i!=this._amText&&(this._amText=i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pmText",{get:function(){return this._pmText},set:function(i){i!=this._pmText&&(this._pmText=i)},enumerable:!1,configurable:!0}),a.prototype.parse=function(i,e){try{for(var t=0,o=1,r=1,n=0,s=0,l=0,u=0,h=0,d=0,p=this._patterns.length,f=0,g=i.length,m=0;m<p&&f<g;m++){var b=this._patterns[m],C=b.c,x=b.len;switch(C){case"y":t=parseInt(i.substr(f,x));break;case"M":o=parseInt(i.substr(f,x));break;case"d":r=parseInt(i.substr(f,x));break;case"a":if(this._amText&&i.indexOf(this._amText,f)==f)h=12,x=this._amText.length;else if(i.substr(f,2).toLocaleLowerCase()==="am")h=12,x=2;else if(this._pmText&&i.indexOf(this._pmText,f)==f)d=12,x=this._pmText.length;else{if(i.substr(f,2).toLocaleLowerCase()!=="pm"){if(e)throw"Invalid date value: "+i;return null}d=12,x=2}break;case"H":case"h":n=parseInt(i.substr(f,x));break;case"m":s=parseInt(i.substr(f,x));break;case"s":l=parseInt(i.substr(f,x));break;case"S":u=parseInt(i.substr(f,x));break;case".":case"/":case"-":case":":case" ":if(a.DATE_SEPARATORS.indexOf(i.charAt(f))<0){if(e)throw"Invalid date value: ".concat(i,", invalid token[").concat(i.charAt(f),"]");return null}break;default:if(e)throw"Invalid date value: ".concat(i,", invalid pattern[").concat(i.charAt(f),"]");return null}f+=x}return t<100&&(t+=this._baseYear),h>0?n==12&&(n=0):d>0&&n<12&&(n+=12),new Date(t,o-1,r,n,s,l,u)}catch(E){if(e)throw E;return null}},a.prototype.parseFormat=function(i){var e=this,t=function(f){f&&!isNaN(parseInt(f))&&(e._baseYear=parseInt(f))},o=function(f){if(f){var g=f.split(",");g.length>0&&g[0]&&(e._amText=g[0]||e._amText),g.length>1&&g[1]&&(e._pmText=g[1]||e._pmText)}},r=i.split(";");if(r.length>2)t(r[1]),o(r[2]);else if(r.length>1){var n=r[1];isNaN(parseInt(n))?n&&o(n):t(n)}var s,l,u,h=r[0],d=h.length,p=0;for(this._patterns=[];p<d;)if(s=p,l=h.charAt(p),v.isWhiteSpace(l)){for(p++;p<d&&v.isWhiteSpace(h.charAt(p));)p++;this._patterns.push({c:" ",p:s,len:p-s})}else{switch(u=0,l){case"y":(u=this.getPattern(h,p,l))!=4&&u!=2&&this.throwInvalidFormat(h);break;case"M":case"d":case"H":case"h":case"m":case"s":(u=this.getPattern(h,p,l))!=2&&this.throwInvalidFormat(h);break;case"S":(u=this.getPattern(h,p,l))!=3&&this.throwInvalidFormat(h);break;case"a":case".":case"/":case"-":case":":(u=this.getPattern(h,p,l))!=1&&this.throwInvalidFormat(h);break;default:this.throwInvalidFormat(h)}u>0&&(this._patterns.push({c:l,p,len:u}),p+=u)}},a.prototype.throwInvalidFormat=function(i){throw new Error("Invalid date format: "+i)},a.prototype.throwInvalidValue=function(i){throw new Error("Invalid date format: "+i)},a.prototype.getPattern=function(i,e,t){for(var o=1;++e<i.length&&i.charAt(e)==t;)o++;return o},a.DATE_SEPARATORS="./-: ",a}(),Uo=function(){function a(i){this._format="",this._type=0,this._parser=new Df(null),this.format=i}return a.initialize=function(){a.Default.amText="AM",a.Default.pmText="PM",a.Default.baseYear=2e3},a.getReader=function(i){var e=a.Formatters[i];return e||(a.Formatters[i]=e=new a(i)),e},a.getSimpleDateNull=function(i){if(i instanceof Date)return i;if(typeof i=="number")return new Date(i);if(typeof i!="string")return null;var e=(i=i.length===8&&/^[0-9]*$/.test(i)?i.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):i).split(/[.//-]/);if(e.length!=3)return null;var t=parseInt(e[0]),o=parseInt(e[1])-1,r=parseInt(e[2]);return t==(i=new Date(t,o,r)).getFullYear()&&o==i.getMonth()&&r==i.getDate()?i:null},Object.defineProperty(a.prototype,"format",{get:function(){return this._format},set:function(i){i!=this._format&&(this._format=i,this.parse(i))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"amText",{get:function(){return this._parser.amText},set:function(i){this._parser.amText=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(i){this._parser.pmText=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(i){this._parser.baseYear=i},enumerable:!1,configurable:!0}),a.prototype.toDate=function(i,e){if(!i)return null;var t=null;switch(this._type){case 0:t=this._parser.parse(i,e);break;case 2:var o=parseInt(i);t=new Date(o);break;default:t=new Date(i)}return t&&!isNaN(t.getTime())?t:null},a.prototype.parse=function(i){if(i){if(i.indexOf("T")>0||i.indexOf("Z")>0||/([+\-])(\d\d)?(:)?(\d\d)?$/.test(i))this._type=a.Formats.indexOf("iso");else{var e=i.toLowerCase();this._type=Math.max(0,a.Formats.indexOf(e))}this._type==0&&(this._parser.format=i)}},a.Formats=["custom","iso","timestamp","platform"],a.Default=new a("yyyy/MM/dd HH:mm:ss"),a.Formatters={},a}();Uo.initialize();var Mf=0,me=function(){function a(i){this.$_disposed=!1,i||(this.$_hash=Mf++)}return a.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},a.prototype._doDispose=function(){},Object.defineProperty(a.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!1,configurable:!0}),a.prototype.isMe=function(i){return i==this.$_hash},a.prototype.$_getters=function(i){for(var e=[],t=Object.getOwnPropertyNames(i),o=0,r=t.length;o<r;o++){var n=t[o],s=Object.getOwnPropertyDescriptor(i,n);s&&s.get&&e.push(n)}return e},a.prototype.doAssignSimple=function(i){return!1},a.prototype.assignFrom=function(i){var e=Object.getPrototypeOf(this);if(i instanceof a)for(var t=Object.getPrototypeOf(i),o={};t&&t.constructor!=a;){for(var r=this.$_getters(t),n=0,s=r.length;n<s;n++)if(!((d=r[n])in o))if(o[d]=null,p=Object.getOwnPropertyDescriptor(e,d))p.set&&(h=Object.getOwnPropertyDescriptor(t,d).get)&&p.set.call(this,h.call(i));else for(var l=Object.getPrototypeOf(e);l;){var u=Object.getOwnPropertyDescriptor(l,d);if(u){var h;u.set&&(h=Object.getOwnPropertyDescriptor(t,d).get)&&u.set.call(this,h.call(i)),l=null}else l=Object.getPrototypeOf(l)}t=Object.getPrototypeOf(t)}else if(!this.doAssignSimple(i))for(var d in i){var p;if(p=Object.getOwnPropertyDescriptor(e,d))p.set&&p.set.call(this,i[d]);else for(l=Object.getPrototypeOf(e);l;){var f=Object.getOwnPropertyDescriptor(l,d);f?(f.set&&f.set.call(this,i[d]),l=null):l=Object.getPrototypeOf(l)}}},a.prototype.extend=function(i){for(var e in i)this.hasOwnProperty(e)&&(this[e]=i[e])},a.prototype.toProxy=function(i){i===void 0&&(i=!0);for(var e={},t=Object.getPrototypeOf(this),o=[];t&&t.constructor!=a;){for(var r=this.$_getters(t),n=0,s=r.length;n<s;n++){var l=r[n],u=Object.getOwnPropertyDescriptor(t,l);if(u){if(u.get&&u.set&&o.indexOf(l)<0){o.push(l);var h=u.get.call(this);(i||h!==void 0)&&(e[l]=h)}}else for(var d=Object.getPrototypeOf(t);d;){var p=Object.getOwnPropertyDescriptor(d,l);p?(p.get&&p.set&&o.indexOf(l)<0&&(o.push(l),h=p.get.call(this),(i||h!==void 0)&&(e[l]=p.get.call(this))),d=null):d=Object.getPrototypeOf(d)}}t=Object.getPrototypeOf(t)}return e},a}(),Mr=function(a){function i(e,t){var o=a.call(this,e)||this;return o.message=e,o.tokenPos=t,o}return w(i,a),i}(Error),Ee=function(a){function i(e){var t=a.call(this,e)||this;return t.message=e,t}return w(i,a),i}(Error),ds=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];for(var e=[],t=0,o=a;t<o.length;t++)e[o[t]]=!0;return e},Lf=ds(26,27),Ff=ds(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),Nf=ds(4,5,18,19),Af=ds(11,3,2,14,15,16,17),Bf=function(){function a(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION=34,this.SQUOTATION=39,this.BACKSLASH=92,this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var i=0;i<256;i++)this.IS_IDENT[i]=i==95||i>=48&&i<=57||i>=97&&i<=122||i>=65&&i<=90,this.IS_INTEGER[i]=i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70,this.IS_NUMBER[i]=i>=48&&i<=57||i==46||i==101||i==69,this.IS_WHITE[i]=i>=1&&i<=9||i==11||i>=14&&i<=32,this.IS_END[i]=i==0;this.initProcs()}return a.prototype.clear=function(){this._source=null},a.prototype.next=function(){var i=this._source.charCodeAt(this._run);this._tokenPos=this._run,i<256?this._procs[i].call(this):this.identProc()},a.prototype.unkownProc=function(){this._tokenId=0,this._run++},a.prototype.symbolProc=function(){this._tokenId=80,this._run++},a.prototype.commaProc=function(){this._tokenId=32,this._run++},a.prototype.crProc=function(){this._tokenId=33,this._source.charCodeAt(this._run+1)==10?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},a.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},a.prototype.equalProc=function(){this._tokenId=40,this._run++},a.prototype.greaterProc=function(){this._source.charAt(this._run+1)=="="?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},a.prototype.lowerProc=function(){this._source.charAt(this._run+1)=="="?(this._tokenId=44,this._run+=2):this._source.charAt(this._run+1)==">"?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},a.prototype.nextIdent=function(){for(var i=this._run;i<this._len&&!this.IS_IDENT[this._source.charCodeAt(i)];)i++;for(var e=i;i<this._len&&this.IS_IDENT[this._source.charCodeAt(i)];)i++;return i>e?(this._nextRun=i,this._source.substr(e,i-e).toLowerCase()):null},a.prototype.identProc=function(){for(var i=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(i,this._run-i).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:(e=this.nextIdent())=="not"&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},a.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},a.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if(this._source.charAt(this._run)=="."){if(this._source.charAt(this._run+1)==".")break;this._tokenId=63}this._run++}},a.prototype.minusProc=function(){this._tokenId=4,this._run++},a.prototype.plusProc=function(){this._tokenId=5,this._run++},a.prototype.pointProc=function(){this._source.charAt(this._run+1)=="."?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},a.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},a.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},a.prototype.slashProc=function(){this._tokenId=2,this._run++},a.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},a.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},a.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},a.prototype.starProc=function(){this._tokenId=3,this._run++},a.prototype.modProc=function(){this._tokenId=15,this._run++},a.prototype.stringProc=function(){this._tokenId=61;do{var i=this._source.charCodeAt(this._run);if(this.IS_END[i])throw new Mr("Untermintated string",i);i==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},a.prototype.smallStringProc=function(){this._tokenId=61;do{var i=this._source.charCodeAt(this._run);if(this.IS_END[i])throw new Mr("Untermintated string",i);i==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},a.prototype.initProcs=function(){this._procs=[];for(var i=1;i<=255;i++)this._procs[i]=this.symbolProc;for(i=1;i<=32;i++)this._procs[i]=this.spaceProc;for(this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs[36]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc,i=0;i<=9;i++)this._procs[48+i]=this.numberProc;for(i=65;i<=90;i++)this._procs[i]=this.identProc;for(i=97;i<=122;i++)this._procs[i]=this.identProc;this._procs[95]=this.identProc,this._procs[40]=this.roundOpenProc,this._procs[41]=this.roundCloseProc,this._procs[42]=this.starProc,this._procs[43]=this.plusProc,this._procs[44]=this.commaProc,this._procs[45]=this.minusProc,this._procs[46]=this.pointProc,this._procs[47]=this.slashProc,this._procs[37]=this.modProc,this._procs[60]=this.lowerProc,this._procs[61]=this.equalProc,this._procs[62]=this.greaterProc,this._procs[91]=this.bracketOpenProc,this._procs[93]=this.bracketCloseProc},Object.defineProperty(a.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isSpace",{get:function(){return this._tokenId==71},enumerable:!1,configurable:!0}),a.prototype.init=function(i){this._source=i,this._len=i.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},a.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},a.prototype.nextId=function(i){do this.next();while(this._run<this._len&&this._tokenId!=i);return null},a.prototype.nextNoSpace=function(){if(this._run<this._len)do this.next();while(this._run<this._len&&this.isSpace);return null},a.prototype.isFirstInLine=function(){if(this._tokenPos==0)return!0;var i,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return e==0||(i=this._source.charCodeAt(e))==10||i==13},a}(),xi=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.isIdentifier=function(e){throw new Error("Token is not a valid Identifier: "+e)},i.prototype.evaluateIdentifier=function(e){throw new Error("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){throw new Error("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){throw new Error("Invalid identifier indexer: "+e)},i}(me),So=function(){function a(){}return Object.defineProperty(a.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"asLiteral",{get:function(){return null},enumerable:!1,configurable:!0}),a.prototype.prepareValue=function(){},a.prototype.getLiteral=function(){},a.prototype.isIdentifier=function(i){return!1},a.prototype.toString=function(){return String(this)},a}(),ni=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i}(So);(function(a){function i(){return a.call(this)||this}w(i,a),i.prototype.evaluate=function(e){},i.prototype.toString=function(){return""},i.Default=new i})(So);var Da,ps=function(a){function i(){var e=a.call(this)||this;return e._operator=0,e}return w(i,a),i.prototype.evaluate=function(e){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(e);var t=this._leftExpr.evaluate(e),o=this._rightExpr.evaluate(e);switch(this._operator){case 40:return t==o;case 45:return t!=o;case 41:return t>o;case 42:return t>=o;case 43:return t<o;case 44:return t<=o;case 46:return this.calcLike(t,o,!1);case 47:return!this.calcLike(t,o,!1);case 48:return this.calcLike(t,o,!0);case 49:return!this.calcLike(t,o,!0);case 54:return this.calcLikeHan(t,o,!1);case 56:return!this.calcLikeHan(t,o,!1);case 55:return this.calcLikeHan(t,o,!0);case 57:return!this.calcLikeHan(t,o,!0);case 50:return this.calcMatch(t,o,!1);case 51:return!this.calcMatch(t,o,!1);case 52:return this.calcMatch(t,o,!0);case 53:return!this.calcMatch(t,o,!0);default:throw new Ee("Unknown operator: "+this._operator)}},i.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(this._rightExpr){var t=this._leftExpr.toString(),o=this._rightExpr.toString(),r=void 0;switch(this._operator){case 40:r="=";break;case 45:r="<>";break;case 41:r=">";break;case 42:r=">=";break;case 43:r="<";break;case 44:r="<=";break;case 46:r="like";break;case 47:r="not like";break;case 48:r="ilike";break;case 49:r="not ilike";break;case 50:r="match";break;case 51:r="not match";break;case 52:r="imatch";break;case 53:r="not imatch";break;case 54:r="likeHan";break;case 56:r="not likehan";break;case 55:r="ilikeHan";break;case 57:r="not ilikehan";break;case 32:r=",";break;default:r="<<ERROR>>"}e="("+t+" "+r+" "+o+")"}else e=this._leftExpr.toString();return e},i.prototype.isIdentifier=function(e){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(e)},i.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._rightExpr==null?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},i.prototype.getLiteral=function(){return this._literal},i.prototype.calcLike=function(e,t,o){var r=String(e),n=String(t);if(r&&n){o&&(r=r.toLowerCase(),n=n.toLowerCase());var s=n.length;if(s>1){var l=n.charAt(0)=="%",u=n.charAt(s-1)=="%";return l&&u?(n=n.substr(1,s-2),r.indexOf(n,0)>=0):l?(n=n.substr(1,s-1),r.lastIndexOf(n)==r.length-n.length):u?(n=n.substr(0,s-1),r.indexOf(n,0)==0):r==n}return n!="%"&&r==n}return!1},i.prototype.calcLikeHan=function(e,t,o){if(e&&t){e=String(e);var r=(t=String(t)).length,n=t.charAt(0)=="%",s=t.charAt(r-1)=="%";if(t=n&&s?t.substr(1,r-2):n?t.substr(1,r-1):s?t.substr(0,r-1):t,e.length<t.length)return;o&&(e=e.toLowerCase(),t=t.toLowerCase());var l=v.hangulToChosungAll(e),u=v.hangulToChosungAll(t),h=-1,d=void 0;if(n&&s){for(;(h=l.indexOf(u,h+1))>=0;){for(var p=0;p<u.length&&p+h<l.length;p++){var f=v.hangulToChosung(e[p+h]);if((g=v.hangulToChosung(t[p])).org&&g.org!==f.org||!g.cho||g.cho!==f.cho){d=!1;break}d=!0}if(d)return!0}return!1}if(n){if((h=l.lastIndexOf(u))===l.length-u.length){for(p=0;p<u.length;p++){if(f=v.hangulToChosung(e[h+p]),(g=v.hangulToChosung(t[p])).org&&g.org!==f.org||!g.cho||g.cho!==f.cho){d=!1;break}d=!0}if(d)return!0}return!1}if(s){if(l.indexOf(u)===0){for(p=0;p<u.length;p++){var g;if(f=v.hangulToChosung(e[p]),(g=v.hangulToChosung(t[p])).org&&g.org!==f.org||!g.cho||g.cho!==f.cho){d=!1;break}d=!0}if(d)return!0}return!1}return e==t}return!1},i.prototype.calcMatch=function(e,t,o){return new RegExp(t,"m"+(o?"i":"")).test(e)},i}(So),Rn=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),Object.defineProperty(i.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e){},i}(So),qu=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.toString=function(){return"defined"},i}(Rn),Ku=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.toString=function(){return"empty"},i}(Rn),Xu=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),Object.defineProperty(i.prototype,"value",{get:function(){return NaN},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"null"},i}(Rn),Ju=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.toString=function(){return"NaN"},i}(Rn),$f=function(a){function i(e,t,o){var r=a.call(this)||this;return r._leftExpr=e,r._operator=t,r._isNot=t==27,r._value=-1,o instanceof qu?r._value=i.DEFINED:o instanceof Xu?r._value=i.NULL:o instanceof Ku?r._value=i.EMPTY:o instanceof Ju&&(r._value=i.NAN),r}return w(i,a),i.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},i.prototype.getLiteral=function(){return null},i.prototype.evaluate=function(e){var t,o=this._literal?this._literal.value:this._leftExpr.evaluate(e);switch(this._value){case i.DEFINED:t=o!==void 0;break;case i.NULL:t=o==null;break;case i.EMPTY:t=o==null||String(o).length==0;break;case i.NAN:t=o===null||isNaN(o);break;default:return}return this._isNot?!t:t},i.prototype.toString=function(){var e="<<ERROR>>";switch(this._value){case i.DEFINED:e="defined";break;case i.NULL:e="null";break;case i.EMPTY:e="empty";break;case i.NAN:e="NaN"}return"("+(this._isNot?"is not ":"is ")+e+")"},i.DEFINED=0,i.NULL=1,i.EMPTY=2,i.NAN=3,i}(ps),Vf=function(a){function i(e){var t=a.call(this)||this;return t._value=Number(e),t}return w(i,a),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e){return this._value},i.prototype.toString=function(){return String(this._value)},i}(ni),jf=function(a){function i(e){var t=a.call(this)||this;return t._value=parseInt(e),t}return w(i,a),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e){return this._value},i.prototype.toString=function(){return String(this._value)},i}(ni),Hf=function(a){function i(e){var t=a.call(this)||this;t._value=e.substr(1,e.length-2);for(var o="",r=0,n=!1;r<t._value.length;)t._value[r]!="\\"||n?(n=!1,o+=t._value[r++]):(n=!0,r++);return t._value=o,t}return w(i,a),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e){return this._value},i.prototype.toString=function(){return"'"+this._value+"'"},i}(ni),Zu=function(a){function i(e){var t=a.call(this)||this;return t._idKey=-651212,t._literal=e,t}return w(i,a),Object.defineProperty(i.prototype,"identifier",{get:function(){return this._literal},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e){return this._idKey==-651212&&(this._idKey=e.isIdentifier(this._literal)),e.evaluateIdentifier(this._idKey)},i.prototype.toString=function(){return this._literal},i}(So),Gf=function(a){function i(e,t,o){var r=a.call(this)||this;return r._idKey=-1490313,r._intIndex=NaN,r._strIndex=null,r._ident=e,r._indexer=t,r._capital=o,r}return w(i,a),i.prototype.prepareValue=function(){var e=this._indexer.asLiteral;if(e||this._indexer instanceof ps&&(this._indexer.prepareValue(),e=this._indexer.getLiteral()),e){var t=e.value;typeof t=="string"?this._strIndex=t:this._intIndex=parseInt(t),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},i.prototype.getLiteral=function(){return null},i.prototype.evaluate=function(e){if(this._idKey==-1490313&&(this._idKey=e.isIdentifier(this._ident)),this._strIndex)return e.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var t=this._indexer.evaluate(e);return typeof t=="string"?e.evaluateIndexerS(this._idKey,t,this._capital):e.evaluateIndexerI(this._idKey,t)}return e.evaluateIndexerI(this._idKey,this._intIndex)},i.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},i}(ps),Ii=function(a){function i(e){var t=a.call(this)||this;return t._factor=e,t}return w(i,a),i.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof So&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},i.prototype.getLiteral=function(){return null},i}(So),Wf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t?t.length:0},i.prototype.toString=function(){return"(len "+this._factor+")"},i}(Ii),Uf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t&&t.trim()},i.prototype.toString=function(){return"(trim "+this._factor+")"},i}(Ii),zf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){return-(this._literal instanceof ni?this._literal.value:this._factor.evaluate(e))},i.prototype.toString=function(){return"-"+this._factor},i}(Ii),Yf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){return this._literal instanceof ni?this._literal.value:this._factor.evaluate(e)},i.prototype.toString=function(){return"+"+this._factor},i}(Ii),qf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){return!(this._literal instanceof ni?this._literal.value:this._factor.evaluate(e))},i.prototype.toString=function(){return"(not "+this._factor+")"},i}(Ii),Kf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return!!t},i.prototype.toString=function(){return"(bool "+this._factor+")"},i}(Ii),Xf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return Number(t)},i.prototype.toString=function(){return"(num "+this._factor+")"},i}(Ii),Jf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return String(t)},i.prototype.toString=function(){return"(str "+this._factor+")"},i}(Ii),Zf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);if(t instanceof Date){var o=v.pad;t=o(t.getFullYear(),4)+o(t.getMonth()+1,2)+o(t.getDate(),2)}return String(t)},i.prototype.toString=function(){return"(datestr "+this._factor+")"},i}(Ii),Qf=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t instanceof Date?t.getFullYear():null},i.prototype.toString=function(){return"(year "+this._factor+")"},i}(Ii),e_=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t instanceof Date?t.getMonth()+1:null},i.prototype.toString=function(){return"(month "+this._factor+")"},i}(Ii),t_=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t instanceof Date?t.getDate():null},i.prototype.toString=function(){return"(day "+this._factor+")"},i}(Ii),i_=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._literal instanceof ni?this._literal.value:this._factor.evaluate(e);return t instanceof Date?t.getHours():null},i.prototype.toString=function(){return"(hour "+this._factor+")"},i}(Ii),o_=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.evaluate=function(e){var t=this._factor,o=t.getLiteral();if(t.getLiteral())return o.value;if(t._rightExpr){var r=t._leftExpr.evaluate(e),n=t._rightExpr.evaluate(e);if(t._operator===32){var s=Math.pow(10,n);return Math.floor(r*s)/s}throw new Ee("Unknown operator: "+t._operator)}return t._leftExpr.evaluate(e)},i.prototype.toString=function(){return"(rounddown "+this._factor+")"},i}(Ii),r_=function(a){function i(){var e=a.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}return w(i,a),i.prototype.addFactor=function(e){this._factors.push(e)},i.prototype.addOperator=function(e){this._operators.push(e)},i.prototype.isIdentifier=function(e){return this._factors.length==1&&this._factors[0]instanceof Zu&&this._factors[0].identifier==e},i.prototype.prepareValue=function(){for(var e=0,t=this._factors.length;e<t;e++)this._factors[e].prepareValue();if(this._operators.length==0){var o=this._factors[0];this._literal=o.asLiteral,this._literal||(this._literal=o.getLiteral())}},i.prototype.getLiteral=function(){return this._literal},i.prototype.evaluate=function(e){if(this._literal)return this._literal.value;for(var t=this._factors.length,o=this._factors[0].evaluate(e),r=1;r<t;r++){var n=this._factors[r].evaluate(e);switch(this._operators[r-1]){case 11:o=o&&n;break;case 3:o*=n;break;case 2:o/=n;break;case 14:o=Math.floor(Math.floor(o)/Math.floor(n));break;case 15:o%=n;break;case 16:o<<=n;break;case 17:o>>=n}}return o},i.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(this._factors.length==1)e=this._factors[0].toString();else{e="("+this._factors[0].toString();for(var t=1;t<this._factors.length;t++){switch(this._operators[t-1]){case 11:e+=" and ";break;case 3:e+=" * ";break;case 2:case 14:e+=" / ";break;case 15:e+=" mod ";break;case 16:e+=" shl ";break;case 17:e+=" shr "}e+=this._factors[t].toString()}e+=")"}return e},i}(So),n_=function(a){function i(){var e=a.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}return w(i,a),i.prototype.addTerm=function(e){this._terms.push(e)},i.prototype.addOperator=function(e){this._operators.push(e)},i.prototype.isIdentifier=function(e){return this._terms.length==1&&this._terms[0].isIdentifier(e)},i.prototype.prepareValue=function(){for(var e=0,t=this._terms.length;e<t;e++)this._terms[e].prepareValue();this._operators.length==0&&(this._literal=this._terms[0].getLiteral())},i.prototype.getLiteral=function(){return this._literal},i.prototype.evaluate=function(e){if(this._literal)return this._literal.value;for(var t=this._terms.length,o=this._terms[0].evaluate(e),r=1;r<t;r++){var n=this._terms[r].evaluate(e);switch(this._operators[r-1]){case 4:o-=n;break;case 5:o+=n;break;case 18:o=o||n;break;case 19:o^=n}}return o},i.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(this._terms.length==1)e=this._terms[0].toString();else{e="("+this._terms[0].toString();for(var t=1;t<this._terms.length;t++){switch(this._operators[t-1]){case 4:e+=" - ";break;case 5:e+=" + ";break;case 18:e+=" or ";break;case 19:e+=" xor ";break;default:e+=" <<ERROR>> "}e+=this._terms[t].toString()}e+=")"}return e},i}(So),qi=function(){function a(){this._node=null,this._capitalIndexers=null,this._lexer=new Bf}return a.prototype.syntaxError=function(i,e){throw new Mr(i,e)},a.prototype.expected=function(i){if(i!=this._lexer.tokenId)throw new Mr("Token is not a expected kind ["+i+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},a.prototype.nextToken=function(){this._lexer.nextNoSpace()},a.prototype.doExpression=function(){var i,e=null,t=this.doSimpleExpression();if(Lf[i=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var r=o.getLiteral();if(!(r instanceof Rn))throw new Mr("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new $f(t,i,r)}else(e=new ps)._leftExpr=t,(Ff[this._lexer.tokenId]||this._lexer.tokenId==32)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},a.prototype.doSimpleExpression=function(){var i=new n_;for(i.addTerm(this.doTerm());Nf[this._lexer.tokenId];)i.addOperator(this._lexer.tokenId),this.nextToken(),i.addTerm(this.doTerm());return i},a.prototype.doTerm=function(){var i=new r_;for(i.addFactor(this.doFactor());Af[this._lexer.tokenId];)i.addOperator(this._lexer.tokenId),this.nextToken(),i.addFactor(this.doFactor());return i},a.prototype.doFactor=function(){var i=this._lexer.tokenId;switch(i){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new Mr("Unkown token: "+i,this._lexer.tokenLoc)},a.prototype.doCharString=function(){var i=this._lexer.token;return this.nextToken(),new Hf(i)},a.prototype.doRoundOpen=function(){this.nextToken();var i=this.doExpression();return this.expected(67),i},a.prototype.doIdentifier=function(){var i=this._lexer.token;if(this.nextToken(),this._lexer.tokenId==69){this.nextToken();var e=this.doExpression();return this.expected(70),new Gf(i,e,this._capitalIndexers.indexOf(i)>=0)}return new Zu(i)},a.prototype.doNumber=function(){var i=this._lexer.token;return this.nextToken(),new Vf(i)},a.prototype.doInteger=function(){var i=this._lexer.token;return this.nextToken(),new jf(i)},a.prototype.doMinus=function(){return this.nextToken(),new zf(this.doFactor())},a.prototype.doPlus=function(){return this.nextToken(),new Yf(this.doFactor())},a.prototype.doNot=function(){return this.nextToken(),new qf(this.doFactor())},a.prototype.doDefined=function(){return this.nextToken(),new qu},a.prototype.doNull=function(){return this.nextToken(),new Xu},a.prototype.doEmpty=function(){return this.nextToken(),new Ku},a.prototype.doNaN=function(){return this.nextToken(),new Ju},a.prototype.doToBool=function(){return this.nextToken(),new Kf(this.doFactor())},a.prototype.doToNumber=function(){return this.nextToken(),new Xf(this.doFactor())},a.prototype.doToString=function(){return this.nextToken(),new Jf(this.doFactor())},a.prototype.doLength=function(){return this.nextToken(),new Wf(this.doFactor())},a.prototype.doTrim=function(){return this.nextToken(),new Uf(this.doFactor())},a.prototype.doToDateString=function(){return this.nextToken(),new Zf(this.doFactor())},a.prototype.doToYear=function(){return this.nextToken(),new Qf(this.doFactor())},a.prototype.doToMonth=function(){return this.nextToken(),new e_(this.doFactor())},a.prototype.doToDay=function(){return this.nextToken(),new t_(this.doFactor())},a.prototype.doToHour=function(){return this.nextToken(),new i_(this.doFactor())},a.prototype.doRoundDown=function(){return this.nextToken(),new o_(this.doFactor())},a.prototype.parse=function(i,e){if(i){this._capitalIndexers=e||[],this._lexer.init(i),this.nextToken();var t=this.doExpression();return t&&t.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,t}return null},a.prototype.evaluate=function(i,e,t){return this.parse(i,t).evaluate(e)},a.Default=new a,a}(),s_=["value","values"],Ma=function(a){function i(e,t,o){t===void 0&&(t=c.ValueType.TEXT),o===void 0&&(o=0);var r=a.call(this)||this;return r._index=-1,r._dataType=c.ValueType.TEXT,r._subType=null,r._runType=c.ValueType.TEXT,r._length=0,r._subTypeEnabled=!0,r._required=!1,r._updatable=!0,r._ranged=!1,r._runSet=null,r._typeLock=!1,r._objectKey=null,r._objectCallback=null,e&&(r.fieldName=e),t!=null&&(t===c.ValueType.DATE&&(t=c.ValueType.DATETIME,r._subType=c.ValueType.DATE,r._subTypeEnabled=!0),r._dataType=t),r._length=o,r}return w(i,a),Object.defineProperty(i.prototype,"hash",{get:function(){return this._fieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(e){if(!(e=e&&e.trim()))throw new Error("Field name must be exists.");e!=this._orgFieldName&&(this._orgFieldName=e,this._orgAttrName="@"+e,this._fieldName=e.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataType",{get:function(){return this._dataType},set:function(e){e!=this._dataType&&(this._dataType=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runType",{get:function(){return this._runType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subType",{get:function(){return this._subType},set:function(e){(e=e||null)!=this._subType&&(this._subType=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(e){e!=this._subTypeEnabled&&(this._subTypeEnabled=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseField",{get:function(){return this._baseField},set:function(e){e!=this._orgBaseField&&(this._orgBaseField=e,this._baseField=e&&e.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(e){(e=e||0)!=this._length&&(this._length=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"set",{get:function(){return this._set},set:function(e){e!==this._set&&(this._set=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(e){e!=this._minimum&&(this._minimum=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(e){e!=this._maximum&&(this._maximum=e,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(e){e!=this._required&&(this._required=e,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},set:function(e){e!=this._header&&(this._header=e,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(e){e!=this._defaultValue&&(this._defaultValue=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolParser=e?new Wo(e):null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,e?(this._dateParser=new Uo(e),this._amText&&(this._dateParser.amText=this._amText),this._pmText&&(this._dateParser.pmText=this._pmText),this._baseYear&&(this._dateParser.baseYear=this._baseYear)):this._dateParser=null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(e){e!=this._amText&&(this._amText=e,this._dateParser&&(this._dateParser.amText=e),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(e){e!=this._pmText&&(this._pmText=e,this._dateParser&&(this._dateParser.pmText=e),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(e){e!=this._baseYear&&(this._baseYear=e,this._dateParser&&(this._dateParser.baseYear=e),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(e){e!=this._valueExpression&&(this._valueExpression=e,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!=this._valueCallback&&(this._valueCallback=e,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(e){this._objectKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(e){this._objectCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(e){e!=this._updatable&&(this._updatable=e)},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(e){var t=e==null||e==="";return t||this._dataType!=c.ValueType.NUMBER||(t=isNaN(e)),t},i.prototype.equalValues=function(e,t){return this._equalValues(e,t)},i.prototype.sameValues=function(e,t){return this._sameValues(e,t)},i.prototype.readValue=function(e){return this._readValue(e)},i.prototype.getBool=function(e,t){return typeof t=="boolean"?t:this._boolParser?this._boolParser.toBool(t):e.toBool(t)},i.prototype.getDate=function(e,t){return t instanceof Date?new Date(t.getTime()):typeof t=="number"?new Date(t):this._dateParser?this._dateParser.toDate(t,!1):e.toDate(t,!1)},i.prototype.clone=function(){var e=new i(this.fieldName,this.dataType,this.length);return e._orgFieldName=this._orgFieldName,e._orgAttrName=this._orgAttrName,e._boolParser=this._boolParser,e._dateParser=this._dateParser,e._orgBaseField=this._orgBaseField,e._baseField=this._baseField,e._defaultValue=this._defaultValue,e._valueCallback=this._valueCallback,e._valueExpression=this._valueExpression,e},i.prototype.$_resetTypes=function(e){this.resetTypes(e)},i.prototype.assignFrom=function(e){"fieldName"in e&&(this.fieldName=e.fieldName),"subType"in e&&(this._subType=e.subType),"set"in e&&(this._set=e.set instanceof Array?e.set.slice():null),"defaultValue"in e&&(this._defaultValue=e.defaultValue),"baseField"in e&&(this.baseField=e.baseField),"booleanFormat"in e&&(this.booleanFormat=e.booleanFormat),"amText"in e&&(this._amText=e.amText),"pmText"in e&&(this._pmText=e.pmText),"baseYear"in e&&(this._baseYear=e.baseYear),"header"in e&&(this._header=e.header),"datetimeFormat"in e&&(this.datetimeFormat=e.datetimeFormat),"objectKey"in e&&(this._objectKey=e.objectKey),"objectCallback"in e&&(this._objectCallback=e.objectCallback),"required"in e&&(this._required=e.required),"minimum"in e&&(this._minimum=e.minimum),"maximum"in e&&(this._maximum=e.maximum),"valueExpression"in e&&(this.valueExpression=e.valueExpression),"valueCallback"in e&&(this._valueCallback=e.valueCallback),"tag"in e&&(this._tag=e.tag)},i.prototype.$_setIndex=function(e){this._index=e},i.prototype.$_prepare=function(e){this._owner=e},i.prototype.changed=function(){},i.prototype.resetTypes=function(e){if(!this._typeLock){e&&(this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser);var t=this._dataType,o=this._subType;if(this._runType=t,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(o)switch(t){case c.ValueType.TEXT:o==c.ValueType.CHAR&&this._length>0&&(t=o);break;case c.ValueType.NUMBER:o!=c.ValueType.UNUM&&o!=c.ValueType.INT&&o!=c.ValueType.UINT||(t=o);break;case c.ValueType.DATETIME:o==c.ValueType.DATE&&(t=o)}if(this._runType=t,this._runSet=null,this._set&&this._set.length){if(this._runType==c.ValueType.DATETIME){this._runSet=[];for(var r=0;r<this._set.length;r++)(n=this.getDate(this._ownerDateParser,this._set[r]))&&this._runSet.push(n.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==c.ValueType.DATE){for(this._runSet=[],r=0;r<this._set.length;r++){var n;if(n=this.getDate(this._ownerDateParser,this._set[r])){var s=new Date(n.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case c.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case c.ValueType.DATETIME:case c.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case c.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case c.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case c.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case c.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case c.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case c.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case c.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case c.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case c.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case c.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},i.prototype.$_refreshFormats=function(e){this._owner=e,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=e.baseYear),this._dateParser.amText||(this._dateParser.amText=e.amText),this._dateParser.pmText||(this._dateParser.pmText=e.pmText)),this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser},i.prototype.equalDummyValues=function(e,t){return this.equalTextValues(e,t)},i.prototype.sameDummyValues=function(e,t){return e==null?t==null:t!=null&&e==t},i.prototype.equalTextValues=function(e,t){return e===void 0?t===void 0:t!==void 0&&e==t},i.prototype.sameTextValues=function(e,t){return e==null||e==""?t==null||t=="":t!=null&&t!=""&&e==t},i.prototype.equalNumberValues=function(e,t){return e===void 0?t===void 0:t!==void 0&&(isNaN(e)?isNaN(t):!isNaN(t)&&e==t)},i.prototype.sameNumberValues=function(e,t){return isNaN(e)?isNaN(t):!isNaN(t)&&e==t},i.prototype.equalDateValues=function(e,t){return e===void 0?t===void 0:t!==void 0&&(e instanceof Date?t instanceof Date&&e.getTime()==t.getTime():!(t instanceof Date))},i.prototype.sameDateValues=function(e,t){return e instanceof Date?t instanceof Date&&e.getTime()==t.getTime():!(t instanceof Date)},i.prototype.equalBoolValues=function(e,t){return e===void 0?t===void 0:t!==void 0&&!!e==!!t},i.prototype.sameBoolValues=function(e,t){return this.equalBoolValues(e,t)},i.prototype.equalObjectValues=function(e,t){return e===void 0||t===void 0?e===void 0==(t===void 0):JSON.stringify(e)===JSON.stringify(t)},i.prototype.sameObjectValues=function(e,t){return e==null||t==null?e==null&&t==null:JSON.stringify(e)===JSON.stringify(t)},i.prototype.readDummyValue=function(e){return e},i.prototype.readTextValue=function(e){if(e===void 0)return e;var t=e===null?null:String(e);return this._ranged&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},i.prototype.readCharValue=function(e){if(e===void 0)return e;var t=e===null?null:String(e);return t&&(t=t.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},i.prototype.readNumberValue=function(e){if(e!=null&&e!==""){var t=Number(e);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));return t}},i.prototype.readUnumValue=function(e){if(e!=null&&e!==""){var t=Math.max(0,Number(e));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,t)}return t}},i.prototype.readIntValue=function(e){if(e!=null&&e!==""){var t=e>=0?Math.floor(e):Math.ceil(e);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=t>=0?Math.floor(t):Math.ceil(t)}return t}},i.prototype.readUintValue=function(e){if(e!=null&&e!==""){var t=Math.max(0,Math.floor(Math.floor(e)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,Math.floor(Math.floor(t)))}return t}},i.prototype.readDatetimeValue=function(e){if(e!==void 0){if(e===null)return this._nullValue;var t=this.getDate(this._ownerDateParser,e);if(t&&this._ranged)if(this._runSet){for(var o=!1,r=this._runSet.length;r--;)if(t.getTime()==this._runSet[r]){o=!0;break}if(!o)return}else this._runMin&&t.getTime()<this._runMin.getTime()&&(t=new Date(this._runMin)),this._runMax&&t.getTime()>this._runMax.getTime()&&(t=new Date(this._runMax));return t}},i.prototype.readDateValue=function(e){if(e!==void 0){if(e===null)return this._nullValue;var t=this.getDate(this._ownerDateParser,e);if(t&&(t.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var o=!1,r=this._runSet.length;r--;)if(t.getTime()==this._runSet[r]){o=!0;break}if(!o)return}else this._runMin&&t.getTime()<this._runMin.getTime()&&(t=new Date(this._runMin)),this._runMax&&t.getTime()>this._runMax.getTime()&&(t=new Date(this._runMax));return t}},i.prototype.readBooleanValue=function(e){return e===void 0?e:e!==null&&this.getBool(this._ownerBoolParser,e)},i.prototype.readObjectValues=function(e){if(typeof e=="string")try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+`\r
`+e)}else if(e!=null&&typeof e!="object")try{e=JSON.parse(e)}catch{v.log("JSON.parse fail => ".concat(e))}return v.deepCopy(e)},i.prototype.$_compareObject=function(e,t,o,r){var n=this._objectKey,s=this._objectCallback,l=s?s(this.orgFieldName,o,e):n&&e.hasOwnProperty(n)?e[n]:null,u=s?s(this.orgFieldName,r,t):n&&t.hasOwnProperty(n)?t[n]:null;return l>u?1:l<u?-1:0},i.prototype.$_calculateValue=function(e,t,o,r,n,s,l){return this._valueCallback?this._valueCallback(e.handler,o,r,s,l):this._valueExpression?(this._exprNode||(this._exprNode=qi.Default.parse(this._valueExpression,s_)),t.setValues(l,n),this._exprNode.evaluate(t)):void 0},i}(me);c.RestoreMode=void 0,(Da=c.RestoreMode||(c.RestoreMode={})).NONE="none",Da.EXPLICIT="explicit",Da.AUTO="auto";var a_=function(a){function i(){var e=a.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}return w(i,a),i.prototype.setValues=function(e,t){this._values=e,this._fields=t,this._fieldCount=t?t.length:0},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._values){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);return this._values[t]}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._values&&this._fields){var r=this._fields.indexOf(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);return this._values[r]}},i.ID_VALUE=0,i.ID_VALUES=1,i.IDENTS={value:i.ID_VALUE,values:i.ID_VALUES},i}(xi),Mt=function(a){function i(){var e=a.call(this)||this;return e._listeners=[],e}return w(i,a),i.prototype._doDispose=function(){return this._listeners=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!1,configurable:!0}),i.prototype.addListener=function(e,t){return e!=null&&this._listeners&&this._listeners.indexOf(e)<0&&(t!=null&&t>=0?this._listeners.splice(t,0,e):this._listeners.push(e)),this},i.prototype.removeListener=function(e){if(!this.disposing&&e!=null&&this._listeners){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}return this},i.prototype.clearListener=function(){this._listeners.length=0},i.prototype.fireEvent=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=this;for(var o=0,r=this._listeners.length;o<r;o++){var n=this._listeners[o],s=n[e];s&&s.apply(n,t)}},i.prototype.fireConfirmEvent=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=this;for(var o=0,r=this._listeners.length;o<r;o++){var n=this._listeners[o],s=n[e];if(s){var l=s.apply(n,t);if(typeof l=="boolean"&&!l)return!1}}return!0},i.prototype.fireMessageEvent=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=this;for(var o=0,r=this._listeners.length;o<r;o++){var n=this._listeners[o],s=n[e];if(s){var l=s.apply(n,t);if(typeof l=="string"&&l)return l}}return null},i.prototype.fireObjectEvent=function(e){var t=Array.prototype.slice.call(arguments,0);t[0]=this;for(var o=0,r=this._listeners.length;o<r;o++){var n=this._listeners[o],s=n[e];if(s){var l=s.apply(n,t);if(l!=null)return l}}return null},i}(me),l_=["yy","yyyy","YY","YYYY","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","T","t","Z","z","+"],u_=[".","/","-",":"],h_=65,c_=97,d_=89,p_=121,f_=77,__=109,g_=100,y_=72,m_=104,b_=83,v_=115,uo=function(a,i,e){e===void 0&&(e=0);var t=a.toString();return e&&t.length>=e?t.substr(0,e):(i=Math.max(t.length,i),("0000"+a.toString()).substr(-i))},Lt=function(){function a(i){this.format=i}return a.getFormatter=function(i){var e=a.Formatters[i];return e||(a.Formatters[i]=e=new a(i)),e},Object.defineProperty(a,"Default",{get:function(){return a.getFormatter(a.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"format",{get:function(){return this._format},set:function(i){(i=i||a.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(i),this._format=i)},enumerable:!1,configurable:!0}),a.prototype.getText=function(i){if(!this._tokens)return"";var e=this._hasUTC,t=new Date(i);e||this._timeOff==null||(t=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3+this._timeOff));for(var o=this._tokens,r="",n=e?t.getUTCHours():t.getHours(),s=0,l=o.length;s<l;s++){var u=o[s],h=u.length;switch(u.charCodeAt(0)){case d_:case p_:r+=uo((e?t.getUTCFullYear():t.getFullYear())%Math.pow(10,h),h);break;case f_:r+=uo((e?t.getUTCMonth():t.getMonth())+1,h);break;case g_:r+=uo(e?t.getUTCDate():t.getDate(),h);break;case y_:r+=uo(n,h);break;case m_:r+=uo(this._hasAmPm?n==0?12:n>12?n-12:n:n,h);break;case __:r+=uo(e?t.getUTCMinutes():t.getMinutes(),h);break;case v_:r+=uo(e?t.getUTCSeconds():t.getSeconds(),h);break;case c_:case h_:r+=n<12?this._amText:this._pmText;break;case b_:r+=uo(e?t.getUTCMilliseconds():t.getMilliseconds(),h,h);break;default:r+=u}}if(!e&&this._timeOff!=null){var d=this._timeOff>=0?"+":"-",p=Math.abs(this._timeOff/6e4);r+=d+"".concat(uo(Math.floor(p/60),2),":").concat(uo(p%60,2))}return r},a.prototype.parseDateFormatTokens=function(i){var e=[];if(i){var t,o=i.trim(),r=0;if(t=o.match(/([+\-])(\d\d)?(:)?(\d\d)?$/)){var n=t[1];if(t[2]==null)this._timeOff=60*-new Date().getTimezoneOffset()*1e3;else{var s=parseInt(t[2]),l=parseInt(t[4]||"00");this._timeOff=60*(60*s+l)*1e3,n==="-"&&(this._timeOff=-this._timeOff)}o=o.substr(0,t.index)}for(var u=o.length;r<u;){var h=o.charAt(r);if(u_.indexOf(h)>=0)e.push(h),r++;else{for(var d=r++;r<u&&o.charAt(r)==h;)r++;if(h=o.substring(d,r),l_.indexOf(h)<0&&/[a-zA-Z\+]/.test(h[0]))throw new Error("Invalid datetime write format: "+i);e.push(h)}if(r<u&&v.isWhiteSpace(h=o.charAt(r)))for(e.push(h);r<u&&v.isWhiteSpace(o.charAt(r));)r++}}return e},a.prototype.parse=function(i){if(this._amText="AM",this._pmText="PM",i){var e=i.split(";");this._format=e[0]||a.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,this._hasUTC=this._tokens.indexOf("z")>0||this._tokens.indexOf("Z")>0;var t=void 0;if(e.length>2?t=e[2]:e.length>1&&e[1]&&(t=e[1]),t){var o=t.split(",");o.length>0&&o[0]&&(this._amText=o[0]||this._amText),o.length>1&&o[1]&&(this._pmText=o[1]||this._pmText)}}},a.DEFAULT_FORMAT="yyyy/MM/dd",a.Formatters={},a}(),ho=function(){function a(i){this.$_parse(this._format=i)}return a.getFormatter=function(i){var e=a.Formatters[i];return e||(a.Formatters[i]=e=new a(i)),e},Object.defineProperty(a.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),a.prototype.formatValue=function(i){return i===void 0?this._nullText:i?this._trueText:this._falseText},a.prototype.$_parse=function(i){if(this._falseText=this._trueText=null,i){var e=i.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},a.Formatters={},a}(),ye=function(){function a(){}return Object.defineProperty(a,"messages",{get:function(){return a.currentMessages?a.currentMessages:this.currentMessages=v.assign({},a.defaultMessages)},enumerable:!1,configurable:!0}),a.setMessages=function(i){a.currentMessages=v.assign({},a.defaultMessages,i)},a.defaultMessages={dateEditorCancelLabel:"Cancel",dateEditorDeleteLabel:"Delete",dateEditorHourLabel:"",dateEditorMinuteLabel:"",dateEditorMonths:void 0,dateEditorSaveLabel:"Save",dateEditorSecondLabel:"",dateEditorTodayLabel:"Today",dateEditorWeekDays:["","","","","","",""],dateEditorYearDisplayFormat:"{Y}",dateEditorMonthDisplayFormat:"{M}",searchEditorMoreText:"",checkListAcceptText:"Accept",checkListCancelText:"Cancel",checkListAllCheckText:"Check All",filterSelectorAcceptText:"",filterSelectorAllCheckText:"( )",filterSelectorCancelText:"",filterSelectorEmptyFilterText:"( )",filterSelectorFilterResetText:"",filterSelectorFiltersResetText:" ",filterSelectorSearchPlaceholder:"...",filterSelectorSearchedCheckText:"(  )",filterSelectorDateYearFormat:"{YYYY}",filterSelectorDateQuarterFormat:"{Q}",filterSelectorDateMonthFormat:"{M}",filterSelectorDateDayFormat:"YYYY-MM-DD",filterToastMessage:"Filtering...",dataDropProxyLabel:"${rows} ${mode}",dataDropModeMove:"",dataDropModeCopy:"",groupingPrompt:"        .",groupingToastMessage:"Grouping...",displayEmptyMessage:"  .",filterOperatorContains:"",filterOperatorNotContains:" ",filterOperatorStartsWith:" ",filterOperatorEndsWith:" ",filterOperatorEqual:"",filterOperatorNotEqual:" ",filterOperatorEmpty:" ",filterOperatorReset:"",filterOperatorGreater:" ",filterOperatorGreaterEqual:" ",filterOperatorLower:" ",filterOperatorLowerEqual:" ",filterOperatorBetween:"",invalidDatetimeFormat1:"Invalid datetime read format - 'H' 'a'    : ",invalidDatetimeFormat2:"Invalid datetime read format - 'h'  'a'   : ",commitEditingMessage:"   .",deleteRowsMessage:" () ?",invalidFormatMessage:"  .",decimalSeparator:".",thousandsSeparator:",",sortingToastMessage:"Sorting...",exportProgressMessage:"Exporting...",rowIndicatorHeadText:"No.",rowIndicatorFootText:"",rowIndicatorSumText:"",stateTextCreateAndDeleted:"X",stateTextCreated:"C",stateTextDeleted:"D",stateTextUpdated:"U",rowOutOfBounds:"row is out of bounds: ",fieldIndexOutOfBounds:"fieldIndex is out of bounds: ",fieldNameMustExists:"fieldName must be exists.",fieldNameAlreadyExists:"fieldName is already exists: ",clientEditingError:"Client is editing (call grid.commit() or grid.cancel() first)",gridElementAttachFail:"Grid is already contained ContainerDiv",gridContainerNotFind:"Invalid grid container element: "},a}(),Lr=function(){function a(){}return Object.defineProperty(a,"currency",{get:function(){return a._currency},enumerable:!1,configurable:!0}),Object.defineProperty(a,"locale",{get:function(){return a._locale},enumerable:!1,configurable:!0}),Object.defineProperty(a,"numberFormats",{get:function(){return a._numberFormats||(a._numberFormats=v.assign({},a.defNumberFormats())),a._numberFormats},enumerable:!1,configurable:!0}),a.defNumberFormats=function(){var i=a._currency||"KRW";return{number:{style:"decimal",excelFormat:"#,##0.0"},currency:{style:"currency",currency:i,excelFormat:i==="KRW"?"#,##0":void 0},accounting:{style:"currency",currency:i,currencySign:"accounting"}}},a.getNumberFormatter=function(i){var e=a._numberFormats;e||(e=a._numberFormats=v.assign({},a.defNumberFormats()));var t=e[i];if(t){var o=t.formatter;return o||(o=t.formatter=new Intl.NumberFormat(a._locale||navigator.language,t)),o}},a.addNumberFormat=function(i,e,t){var o=a._numberFormats;if(e&&i)return o||(o=a._numberFormats=v.assign({},a.defNumberFormats())),o[i]&&(!t&&console.warn("numberFormat name is already exists: "+i),!t)||(o[i]=e),i},a.setLocale=function(i){if(a._locale=i.locale||navigator.language,a._currency=i.currency||"KRW",a._numberFormats=v.assign({},a.defNumberFormats()),i.numberFormats)for(var e in i.numberFormats)a.addNumberFormat(e,i.numberFormats[e],!0);i.messages&&ye.setMessages(i.messages)},a}(),La=function(a){return v.included(a,"c","f","C","F","a","A")},ji=function(){function a(i){this._groupPos=0,this._replacement="$&,",this.parse(this._format=i)}return a.getFormatter=function(i){var e=a.Formatters[i];return e||(a.Formatters[i]=e=new a(i)),e},Object.defineProperty(a,"Default",{get:function(){return a.getFormatter(a.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"separator",{get:function(){return this._seperator},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!1,configurable:!0}),a.prototype.parse=function(i){this._minDigits=0,this._maxDigits=0,this._parse(i)},a.prototype.getText=function(i,e){e===void 0&&(e=!0);var t=Number(i);if(isNaN(t))return"";if((Lr.numberFormats||{}).hasOwnProperty(this._format)){var o=Lr.getNumberFormatter(this._format);return o&&o.format(i)}var r=this._minDigits,n=0;if(this._optDecimal){var s=(u=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(u[1]?u[1].length:0)-(u[2]?+u[2]:0)):0;r=Math.min(Math.max(s,this._minDigits),this._maxDigits)}if(this._round)switch(n=Math.pow(10,r),this._round){case"c":t=Math.ceil(n*t)/n;break;case"f":var l=t.toString().split(".");t=parseFloat(l.length>1?l[0]+"."+l[1].substr(0,r):l[0])}t=this._round==="a"?Math.abs(t):t;var u,h=(t=Number(t.toPrecision(15))).toFixed(r);return!e&&(n=parseFloat(h))===Math.abs(parseFloat(h))&&n===0&&(h=Math.abs(t).toFixed(r)),this._seperator&&(h=h.replace(".",this._seperator)),this._reg?r?h.replace(this._regDecimal,this._replacement):h.replace(this._reg,this._replacement):h},a.prototype._parse=function(i){if(i&&(i=i.trim()),i&&!(Lr.numberFormats||{}).hasOwnProperty(i)){var e=ye.messages.decimalSeparator,t=ye.messages.thousandsSeparator;if(i.indexOf(";")>-1){var o=i.split(";");i=o[0],o.length>1&&o[1]&&!La(o[1])&&(e=o[1]),o.length>2&&o[2]&&!La(o[2])&&(t=o[2]),this._round=o[3]||o[2]||o[1],this._round=La(this._round)?this._round.toLowerCase():this._round}this._seperator=e=="."?null:e,this._groupSep=t==","?null:t;var r=i.length,n=i.indexOf(".");if(this._optDecimal=i.indexOf("#",n)>0,n>=0){for(var s=n+1;s<r&&i.charAt(s)=="0";s++)this._minDigits++,this._maxDigits++;for(;s<r&&i.charAt(s)=="#";s++)this._maxDigits++;i=i.substr(0,n)}if(i){var l=i.length;i.charAt(l-1)==","&&(this._groupPos=3,i=i.substr(0,l-1))}if(i){var u=i.length,h=!0;for(s=u-1;s>=0;s--){var d=i.charAt(s);if(!(d=="0"&&h))if(this._groupPos==0&&d==",")this._groupPos=u-s-1;else{if(d!="#")break;h=!1}}}this._groupPos>0&&(this._replacement="$&"+t,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},a.DEFAULT_FORMAT="#,##0.0",a.Formatters={},a}(),Fr=function(a){function i(e){var t=a.call(this)||this;return t._datetimeWriter=null,t._booleanFormatter=null,t._numberFormatter=null,t.assignFrom(e),t}return w(i,a),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?Lt.getFormatter(e):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._booleanFormatter=e?ho.getFormatter(e):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?ji.getFormatter(e):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(e){this._datetimeCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(e){this._booleanCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(e){this._numberCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(e){this._nullDateText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullText",{get:function(){return this._nullText},set:function(e){this._nullText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nanText",{get:function(){return this._nanText},set:function(e){this._nanText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._rowState},set:function(e){this._rowState=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),i}(me),Re=function(){function a(){}return Object.defineProperty(a,"summaryMode",{get:function(){return a._summaryMode},enumerable:!1,configurable:!0}),Object.defineProperty(a,"fixed",{get:function(){return a._fixed||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"display",{get:function(){return a._display||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"format",{get:function(){return a._format||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"edit",{get:function(){return a._edit||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"editor",{get:function(){return a._editor||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"copy",{get:function(){return a._copy||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"paste",{get:function(){return a._paste||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"sorting",{get:function(){return a._sorting||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"filtering",{get:function(){return a._filtering||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"dataDrop",{get:function(){return a._dataDrop||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"rowIndicator",{get:function(){return a._rowIndicator||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"checkBar",{get:function(){return a._checkBar||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"stateBar",{get:function(){return a._stateBar||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"header",{get:function(){return a._header||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"footer",{get:function(){return a._footer},enumerable:!1,configurable:!0}),Object.defineProperty(a,"footers",{get:function(){return a._footers||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"headerSummary",{get:function(){return a._headerSummary||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"headerSummaries",{get:function(){return a._headerSummaries||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"hideDeletedRows",{get:function(){return a._hideDeletedRows},enumerable:!1,configurable:!0}),Object.defineProperty(a,"sortMode",{get:function(){return a._sortMode},enumerable:!1,configurable:!0}),Object.defineProperty(a,"groupSummaryMode",{get:function(){return a._groupSummaryMode},enumerable:!1,configurable:!0}),Object.defineProperty(a,"filterOr",{get:function(){return a._filterOr},enumerable:!1,configurable:!0}),Object.defineProperty(a,"filterMode",{get:function(){return a._filterMode},enumerable:!1,configurable:!0}),Object.defineProperty(a,"rowGroup",{get:function(){return a._rowGroup||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"groupPanel",{get:function(){return a._groupPanel||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"grouping",{get:function(){return a._grouping||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"filterPanel",{get:function(){return a._filterPanel||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"dataOptions",{get:function(){return a._dataOptions||{}},enumerable:!1,configurable:!0}),a.setDefaultOptions=function(i,e){i&&(a._fixed=v.assign({},i.fixed),a._display=v.assign({},i.display),a._format=v.assign({},i.format),a._edit=v.assign({},i.edit),a._editor=v.assign({},i.editor),a._copy=v.assign({},i.copy),a._paste=v.assign({},i.paste),a._sorting=v.assign({},i.sorting),a._filtering=v.assign({},i.filtering),a._dataDrop=v.assign({},i.dataDrop),a._rowIndicator=v.assign({},i.rowIndicator),a._checkBar=v.assign({},i.checkBar),a._stateBar=v.assign({},i.stateBar),a._header=v.assign({},i.header),a._footer=v.assign({},i.footer),a._footers=v.assign({},i.footers),a._headerSummary=v.assign({},i.headerSummary),a._headerSummaries=v.assign({},i.headerSummaries),i.hideDeleted!==void 0&&(a._hideDeletedRows=i.hideDeletedRows),i.hideDeletedRows!==void 0&&(a._hideDeletedRows=i.hideDeletedRows),i.sortMode!==void 0&&(a._sortMode=i.sortMode),i.summaryMode!==void 0&&(a._summaryMode=i.summaryMode),i.inclusiveFiltering!==void 0&&(a._filterOr=i.inclusiveFiltering),i.filterOr!==void 0&&(a._filterOr=i.filterOr),i.filterMode!==void 0&&(a._filterMode=i.filterMode),a._groupPanel=v.assign({},i.groupPanel),i.groupSummaryMode!==void 0&&(a._groupSummaryMode=i.groupSummaryMode),a._rowGroup=v.assign({},i.rowGroup),a._groupPanel=v.assign({},i.groupPanel),a._grouping=v.assign({},i.grouping),a._filterPanel=v.assign({},i.filterPanel)),e&&(a._dataOptions=v.assign({},e))},a}(),w_=function(){function a(){}return a.prototype.compare=function(i,e,t){return i.dataType==c.ValueType.NUMBER?Number(e)-Number(t):e>t?1:e<t?-1:0},a}(),Ki=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i}(Error),Qu=function(a){function i(){return a.call(this,ye.messages.clientEditingError)||this}return w(i,a),i}(Error),eh=function(a){function i(){var e=a.call(this)||this;return e._subTypeEnabled=!0,e._undoable=!1,e._insertable=!0,e._updatable=!0,e._deletable=!0,e._softDeleting=!1,e._deleteCreated=!1,e._checkStates=!0,e._restoreMode=c.RestoreMode.NONE,e._strictRestore=!1,e._booleanFormat=null,e._datetimeFormat=null,e._baseYear=2e3,e._amText="AM",e._pmText="PM",e._alertClientError=!0,e._throwClientError=!1,e._commitBeforeDataEdit=!1,e._fields=[],e._calcFields=[],e._fieldNames=[],e._fieldMap={},e._defComparer=new w_,e._comparers=[],e._boolParser=Wo.Default,e._dateParser=Uo.Default,e._eventLock=0,e._resetLock=0,e._countLock=0,e._clients=[],e.assignFrom(Re.dataOptions),e}return w(i,a),i.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch{v.log("DataSource dispose catch error")}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(e){if(e!=this._subTypeEnabled){this._subTypeEnabled=e;for(var t=0,o=this._fields;t<o.length;t++)o[t].$_resetTypes()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(e){this._insertable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(e){this._updatable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(e){this._deletable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(e){this._softDeleting=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(e){this._deleteCreated=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkStates",{get:function(){return this._checkStates},set:function(e){e!=this._checkStates&&(this._checkStates=e,this._doCheckStatesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(e){if(e!=this._restoreMode){var t=this._restoreMode;this._restoreMode=e,this._doRestoreModeChanged(t,e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(e){this._strictRestore=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolParser=e?new Wo(e):Wo.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(e){this._baseYear=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(e){e!=this._amText&&(this._amText=e,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(e){e!=this._pmText&&(this._pmText=e,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(e){this._alertClientError=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(e){this._throwClientError=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(e){this._commitBeforeDataEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new a_),this._calculateRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eventLocked",{get:function(){return this._eventLock>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valuesCallback",{get:function(){return this._valuesCallback},set:function(e){this._valuesCallback=e},enumerable:!1,configurable:!0}),i.prototype.registerClient=function(e){e&&this._clients.indexOf(e)<0&&this._clients.push(e)},i.prototype.unregisterClient=function(e){if(e){var t=this._clients.indexOf(e);t>=0&&this._clients.splice(t,1)}},i.prototype.cancelClients=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].cancelDataEditing()},i.prototype.commitClients=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].commitDataEditing()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(e){e===void 0&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),this._eventLock==0&&(e&&(this._resetLock>0?(this.clearCommandStack(),this._fireReset()):this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},i.prototype.addField=function(e,t,o){if(this._checkClientState()){var r;this.beginUpdate();try{(r=this.$_internalAddField(e))&&r.$_resetTypes(this)}finally{t?this._doFieldsReset():this._resetLock++,o&&this._reCalculateFields(),this.endUpdate()}return r}},i.prototype.removeField=function(e,t){var o;if(this._checkClientState()&&e&&(typeof e=="string"?o=this.fieldByName(e):e instanceof Ma?o=e:typeof e=="object"&&e.fieldName&&(o=this.fieldByName(e.fieldName)),o)){this.beginUpdate();try{this.$_internalRemoveField(o)}finally{t?this._doFieldsReset():this._resetLock++,this.endUpdate()}}},i.prototype.updateField=function(e,t){var o=0,r=this._calcFields;if(e.calculated&&r.indexOf(e)<0){o=r.length;for(var n=0;n<r.length;n++)if(r[n].index>=e.index){o=n;break}r.splice(o,0,e)}else e.calculated||(o=r.indexOf(e))>=0&&r.splice(o,1);if(t&&e.calculated){this.beginUpdate();try{this._reCalculateFields(e)}finally{this.endUpdate(!0)}}},i.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},i.prototype.setFields=function(e){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),e)for(var t=0,o=e.length;t<o;t++){var r=this.$_internalAddField(e[t]);r&&r.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},i.prototype.getField=function(e){return typeof e=="string"&&(e=this.getFieldIndex(e)),this._fields[e]},i.prototype.getFields=function(){return this._fields.slice()},i.prototype.fieldByName=function(e){if(e)for(var t=e.toUpperCase(),o=0,r=this._fields;o<r.length;o++){var n=r[o];if(n.fieldName==t)return n}return null},i.prototype.getFieldNames=function(){for(var e=[],t=0;t<this._fields.length;t++)e.push(this._fields[t].fieldName);return e},i.prototype.getOrgFieldNames=function(){for(var e=[],t=0;t<this._fields.length;t++)e.push(this._fields[t].orgFieldName);return e},i.prototype.getFieldName=function(e){return this._checkFieldIndex(e),this._fields[e].fieldName},i.prototype.getOrgFieldName=function(e){return this._checkFieldIndex(e),this._fields[e].orgFieldName},i.prototype.getFieldIndex=function(e){if(typeof e=="number")return e;if(e){var t=e.toUpperCase();if(t in this._fieldMap)return this._fieldMap[t]}return-1},i.prototype.getFieldIndexC=function(e){return e in this._fieldMap?this._fieldMap[e]:-1},i.prototype.getBaseField=function(e){return e>=0&&e<this._fields.length?this.getFieldIndex(this._fields[e].baseField):-1},i.prototype.getValueType=function(e){return this._fields[e].dataType},i.prototype.getDefaultValue=function(e){return this._fields[e].defaultValue()},i.prototype.objectToRow=function(e){var t=[],o=this._valuesCallback;if(o){var r=o.call(this,this.$_handler,e);if(r&&Array.isArray(r))return r.slice()}if(e)for(var n=0,s=this.fieldCount;n<s;n++){var l=this.getOrgFieldName(n);e.hasOwnProperty(l)&&(t[n]=e[l])}return t},i.prototype.canUpdateField=function(e,t){if(t>=0&&t<this._fields.length){if(!this._fields[t].updatable&&e>=0)try{var o=this.getRowState(e);return!o||o==c.RowState.CREATED||o==c.RowState.CREATE_AND_DELETED}catch{return!1}return!0}return!1},i.prototype.getDataComparer=function(e){return e>=0&&this._comparers[e]},i.prototype.setDataComparer=function(e,t){this._comparers[e]=t},i.prototype.canSummarize=function(e){return e>=0&&e<this.fieldCount},i.prototype.canAppendRow=function(){return!1},i.prototype._convertValues=function(e,t){var o="*"in t&&t["*"]=="*"?e:{};for(var r in t)o[t[r]]=e[r];return o},i.prototype.getClientsBusy=function(){var e={busy:!1,cnt:0,client:null};if(this.disposing)return e;for(var t=this._clients.length;t--;)this._clients[t].isDataEditing()&&(e.busy=!0,e.cnt++,e.client=this._clients[t]);return e},i.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new Qu;return this._alertClientError&&alert(new Qu().message),!1}return!0},i.prototype._checkFieldIndex=function(e){if(e<0||e>=this._fields.length)throw new Ki(ye.messages.fieldIndexOutOfBounds+e)},i.prototype.$_internalClearFields=function(){this._checkClientState();for(var e=0,t=this._fields;e<t.length;e++)t[e].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},i.prototype.$_internalInsertField=function(e,t){this._checkClientState();var o=this._fields.length;if(e<0||e>o)throw v.isDebugging(),new Ki(ye.messages.fieldIndexOutOfBounds+e);if(t){t.$_prepare(this),this._fields.splice(e,0,t),this._fieldNames.splice(e,0,t.fieldName),t.calculated&&this._calcFields.push(t),t.$_setIndex(e),this._fieldMap[t.fieldName]=e;for(var r=e+1;r<=o;r++)(t=this._fields[r]).$_setIndex(r),this._fieldMap[t.fieldName]=r;return e}return-1},i.prototype.$_internalRemoveField=function(e){if(this._checkClientState(),e){var t=e.index;this._fields.splice(t,1),this._fieldNames.splice(t,1),delete this._fieldMap[e.fieldName];for(var o=0;o<=this._fields.length-1;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o}},i.prototype.$_addField=function(e,t,o,r){if(!e)throw new Ki(ye.messages.fieldNameMustExists);if(this.getFieldIndex(e)>=0)throw new Ki(ye.messages.fieldNameAlreadyExists+e);var n=new Ma(e,t,o);r&&n.assignFrom(r);var s=r&&r.index!=null&&!isNaN(r.index)?r.index:this._fields.length;return this.$_internalInsertField(s,n),n},i.prototype.$_internalAddField=function(e){var t=null;return typeof e=="string"?t=this.$_addField(e,c.ValueType.TEXT,0):e instanceof Ma?(t=e.clone(),this.$_internalInsertField(this._fields.length,t)):e&&(t=this.$_addField(e.fieldName,e.dataType||c.ValueType.TEXT,e.length,e)),t},i.prototype._internalCalculateValues=function(e,t,o){var r=o?v.makeArray(o):this._calcFields;if(r.length>0){for(var n=[],s=0;s<e.length;s++)n[s]=this.getField(s).readValue(e[s]);s=0;for(var l=r.length;s<l;s++){var u=r[s],h=this._fieldMap[u.fieldName];e[h]=n[h]=u.readValue(u.$_calculateValue(this,this.calculateRuntime,t,u.orgFieldName,this._fieldNames,this.getOrgFieldNames(),n))}}},i.prototype.refreshFieldFormats=function(){for(var e=0,t=this._fields;e<t.length;e++)t[e].$_refreshFormats(this)},i.prototype.refreshFieldFormat=function(e){e&&e.$_refreshFormats(this)},i.prototype._getRowValues=function(){return new Array(this.fieldCount)},i.prototype.$_createOutputRows=function(e,t,o){o===void 0&&(o=0);var r=this.fieldCount,n=e.length;t instanceof Fr||(t=new Fr(t));var s=t.nullDateText,l=t.nullText,u=t.nanText;try{for(var h=0;h<r;h++){var d=this.getField(h),p=d.dataType,f=d.orgFieldName,g=void 0,m=void 0,b=void 0,C=void 0,x=void 0,E=void 0;if(p==c.ValueType.DATETIME&&((g=t.datetimeCallback)||(C=t.datetimeWriter)||s))if(g)for(var S=0;S<n;S++)(k=e[S])[f]=g(this.handler,S+o,f,k[f]);else for(S=0;S<n;S++){var P=(k=e[S])[f];k[f]=P?C?C.getText(k[f]):P:s}else if(p==c.ValueType.BOOLEAN&&((m=t.booleanCallback)||(x=t.booleanFormatter)))if(m)for(S=0;S<n;S++)(k=e[S])[f]=m(this.handler,S+o,f,k[f]);else for(S=0;S<n;S++)(k=e[S])[f]=x.formatValue(k[f]);else if(p==c.ValueType.NUMBER&&((b=t.numberCallback)||(E=t.numberFormatter)||u))if(b)for(S=0;S<n;S++)(k=e[S])[f]=b(this.handler,S+o,f,k[f]);else for(S=0;S<n;S++){var R=(k=e[S])[f];k[f]=R==null||isNaN(R)?u:E?E.getText(R):R}else if(l!=null&&l!=null)for(S=0;S<n;S++){var k;R=(k=e[S])[f],k[f]=R==null||R==null?l:R}}}finally{t&&t.dispose()}},i.prototype.$_sortRows=function(e,t,o,r,n){do{var s=r,l=n,u=e[Math.floor((r+n)/2)];do{for(;s<=l&&!(o(t,u,e[s])<=0);)s++;for(;s<=l&&!(o(t,u,e[l])>=0);)l--;if(s<=l){if(s!=l){var h=e[s];e[s]=e[l],e[l]=h}s++,l--}}while(s<=l);r<l&&this.$_sortRows(e,t,o,r,l),r=s}while(r<n)},i.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new Uo(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=Uo.Default},i.prototype._doCheckStatesChanged=function(){},i.prototype._fireCommandStackChanged=function(e,t){this._eventLock<=0&&this.fireEvent(i.COMMAND_STACK_CHANGED,e,t)},i.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",i}(Mt),th=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.connect=function(e){},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){},i.prototype.setRows=function(){},i.prototype.setRowCount=function(e){},i.prototype.insertRow=function(e){},i.prototype.insertRows=function(e,t){},i.prototype.removeRow=function(e){},i.prototype.removeRows=function(e){},i.prototype.updateRow=function(e){},i.prototype.updateRows=function(e,t){},i.prototype.updateRowList=function(e){},i.prototype.setValue=function(e,t){},i.prototype.moveRow=function(e,t){},i.prototype.moveRows=function(e,t,o){},i.prototype.moveRowList=function(e,t){},i.prototype.changeStates=function(e){},i}(me),C_=function(a){function i(e){var t=a.call(this)||this;return t._tags=[],t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){this._owner=null,this._tags=null,a.prototype._doDispose.call(this)},i.prototype.add=function(e){this._tags!=null&&e&&this._tags.indexOf(e)<0&&(this._tags.push(e),e.connect(this._owner))},i.prototype.remove=function(e){if(this._tags!=null&&e){var t=this._tags.indexOf(e);t>=0&&(this._tags.splice(t,1),e.disconnect())}},i.prototype.clearRows=function(){if(this._tags!=null)for(var e=0,t=this._tags;e<t.length;e++)t[e].clearRows()},i.prototype.setRows=function(){if(this._tags!=null)for(var e=0,t=this._tags;e<t.length;e++)t[e].setRows()},i.prototype.setRowCount=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].setRowCount(e)},i.prototype.insertRow=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].insertRow(e)},i.prototype.insertRows=function(e,t){if(this._tags!=null)for(var o=0,r=this._tags;o<r.length;o++)r[o].insertRows(e,t)},i.prototype.removeRow=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].removeRow(e)},i.prototype.removeRows=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].removeRows(e)},i.prototype.updateRow=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].updateRow(e)},i.prototype.updateRows=function(e,t){if(this._tags!=null)for(var o=0,r=this._tags;o<r.length;o++)r[o].updateRows(e,t)},i.prototype.updateRowList=function(e){if(this._tags!=null)for(var t=0,o=this._tags;t<o.length;t++)o[t].updateRowList(e)},i.prototype.setValue=function(e,t){if(this._tags!=null)for(var o=0,r=this._tags;o<r.length;o++)r[o].setValue(e,t)},i.prototype.moveRow=function(e,t){if(this._tags!=null)for(var o=0,r=this._tags;o<r.length;o++)r[o].moveRow(e,t)},i.prototype.moveRows=function(e,t,o){if(this._tags!=null)for(var r=0,n=this._tags;r<n.length;r++)n[r].moveRows(e,t,o)},i.prototype.moveRowList=function(e,t){if(this._tags!=null)for(var o=0,r=this._tags;o<r.length;o++)r[o].moveRowList(e,t)},i}(me),ih=function(){function a(i){this._active=!1,this._exprNode=null,this.criteria=i}return a.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(a.prototype,"criteria",{get:function(){return this._criteria},set:function(i){i!=this._criteria&&(this._criteria=i,this._exprNode=i?qi.Default.parse(i,a.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),a.prototype.select=function(i,e,t){return!this._exprNode||(i.setRow(e,t),this._exprNode.evaluate(i))},a.CAPITAL_INDEXERS=["value","values","len"],a}(),Fa=function(){function a(i,e){this._filterMode=a.FILTER_AND,this._or=!1,this.load(i),e&&(this.filterMode=e)}return a.prototype.dispose=function(){return this._filters&&this._filters.forEach(function(i,e){i.dispose()}),this._filters=null,null},Object.defineProperty(a.prototype,"filterMode",{get:function(){return this._filterMode},set:function(i){var e=i&&i.toLocaleLowerCase();e!=this._filterMode&&(this._filterMode=e,this._or=this._filterMode==a.FILTER_OR)},enumerable:!1,configurable:!0}),a.prototype.load=function(i){if(!i||i instanceof Array||(i=[i]),this._filters=[],i instanceof Array)for(var e=0,t=i.length;e<t;e++){var o=void 0,r=i[e];r&&(typeof r=="string"?o=new ih(r):r.criteria&&(o=new ih(r.criteria))),o&&this._filters.push(o)}},a.prototype.prepare=function(i,e){i.prepare(e)},a.prototype.select=function(i,e,t){var o=this._filters,r=o.length;if(this._or){for(var n=0;n<r;n++)if(o[n].select(i,e,t)==1)return!0;return!1}for(n=0;n<r;n++)if(o[n].select(i,e,t)==0)return!1;return!0},a.FILTER_AND="and",a.FILTER_OR="or",a}(),x_=function(a){function i(){var e=a.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}return w(i,a),i.prototype._doDispose=function(){this._ds=null,a.prototype._doDispose.call(this)},i.prototype.prepare=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},i.prototype.setRow=function(e,t){this._row=e,this._values=t},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){if(e===i.ID_ROW)return this._row;throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);switch(e){case i.ID_VALUE:case i.ID_VALUES:return this._values[t]}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){switch(e){case i.ID_VALUE:case i.ID_VALUES:var r=this.getField(t,o);return this._values[r]}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.getField=function(e,t){var o=t?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new Ee("Data field is not exits:"+e);return o},i.ID_ROW=0,i.ID_VALUE=1,i.ID_VALUES=2,i.IDENTS={row:i.ID_ROW,value:i.ID_VALUE,values:i.ID_VALUES},i}(xi),Na=function(a){function i(){var e=a.call(this)||this;return e._tags=new C_(e),e._filterRuntime=new x_,e._commandListeners=[],e}return w(i,a),i.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,this._fireDispose(),a.prototype._doDispose.call(this)},i.prototype.editCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tags",{get:function(){return this._tags},enumerable:!1,configurable:!0}),i.prototype.addTag=function(e){this._tags.add(e)},i.prototype.removeTag=function(e){this._tags.remove(e)},i.prototype.setFilterMode=function(e){this._filters&&e==this._filters.filterMode||(this._filters?this._filters.filterMode=e:this._filters=new Fa(null,e))},i.prototype.setFilters=function(e,t){!e||e instanceof Fa?(this._filters=e,this._filters&&t&&(this._filters.filterMode=t)):this._filters=new Fa(e,t)},i.prototype.getRowObject=function(e){if(e<0||e>=this.rowCount)throw new Ki(ye.messages.rowOutOfBounds+e);for(var t={},o=0,r=this.fieldCount;o<r;o++){var n=this.getOrgFieldName(o),s=this.getValue(e,o);t[n]=s}return t},i.prototype.compareValues=function(e,t,o,r,n){return 0},i.prototype.compareTexts=function(e,t,o,r){return 0},i.prototype.compareNumbers=function(e,t,o,r){return 0},i.prototype.compareBools=function(e,t,o,r){return 0},i.prototype.compareObjects=function(e,t,o,r){return 0},i.prototype.summarize=function(e,t){return!1},i.prototype.summarizeRange=function(e,t,o){return!1},i.prototype.copyRows=function(e,t,o,r){},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.isHiddenRow=function(e){return!1},i.prototype.registerCommandListener=function(e){e&&this._commandListeners&&this._commandListeners.indexOf(e)<0&&this._commandListeners.push(e)},i.prototype.unregisterCommandListener=function(e){var t=this._commandListeners?this._commandListeners.indexOf(e):-1;t>=0&&this._commandListeners.splice(t,1)},i.prototype.findRow=function(e,t,o){},i.prototype._doFieldsReset=function(){this._fireReset()},i.prototype._keepCommandStates=function(e){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(e)},i.prototype._yieldCommandStates=function(e,t){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(e,t)},i.prototype._fireDispose=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDisposed")},i.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onDataProviderReset"):this._resetLock++},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},i.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},i.prototype.fireRowInserting=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",e,t)},i.prototype.fireRowInserted=function(e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",e),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowsInserted=function(e,t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",e,t),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",e)},i.prototype.fireRowRemoved=function(e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",e),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowsRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",e)},i.prototype.fireRowsRemoved=function(e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",e),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowUpdating=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",e,t)},i.prototype.fireRowUpdated=function(e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",e),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowsUpdated=function(e,t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",e,t),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowListUpdated=function(e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",e),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",e,t)},i.prototype.fireRowMoved=function(e,t){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",e,t)},i.prototype.fireRowsMoving=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",e,t,o)},i.prototype.fireRowsMoved=function(e,t,o){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",e,t,o)},i.prototype.fireRowListMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",e,t)},i.prototype.fireRowListMoved=function(e,t){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",e,t)},i.prototype.fireValueChanging=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",e,t,o)},i.prototype.fireValueChanged=function(e,t){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",e,t),this.fireEvent("onDataProviderDataChanged"))},i.prototype.fireRowStateChanged=function(e){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",e)},i.prototype.fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",e)},i.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},i.prototype.fireRestoreRows=function(e){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",e)},i.prototype.fireRowHided=function(e,t){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",e,t)},i}(eh),Nr=function(a){function i(e){var t=a.call(this)||this;return t.fields=[],t.values=[],t.startIndex=0,t.wrap=!0,t.select=!0,t.allFields=!0,t.caseSensitive=!1,t.partialMatch=!1,t.compareCallback=null,t.reverse=!1,e&&t.extend(e),t}return w(i,a),i}(me),Ar=function(a){function i(e){var t=a.call(this)||this;return t.fields=null,t.value=null,t.startIndex=0,t.startFieldIndex=0,t.wrap=!0,t.select=!0,t.caseSensitive=!1,t.partialMatch=!1,t.columns=null,t.compareCallback=null,t.reverse=!1,e&&t.extend(e),t}return w(i,a),i}(me);(function(a){function i(e){return a.call(this,e)||this}w(i,a)})(Error);var Aa=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){},i.prototype.undo=function(){},i.prototype.redo=function(e){},i.prototype.execute=function(){return this.redo(!1)},i}(me);(function(a){function i(){return a.call(this)||this}w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.undo=function(){},i.prototype.redo=function(e){},i.prototype.execute=function(){return this.redo(!1)}})(Aa);var Ba=function(a){function i(e){var t=a.call(this)||this;return t._commands=[],t._current=-1,t._undoing=!1,t._redoing=!1,t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){this._owner=null,this._commands=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._commands.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._current>=0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){if(this.canUndo){var e=this._commands[this._current];this._undoing=!0;try{e.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},i.prototype.redo=function(e){var t;if(this.canRedo){var o=this._current+1,r=this._commands[o];this._redoing=!0;try{t=r.redo(!0)}finally{this._redoing=!1}this._current=o,this._changed()}return t},i.prototype.execute=function(e){if(e){var t=this._current++;this._commands[this._current]=e,this.$_shrink(this._current+1);var o=void 0;try{o=e.execute()}catch(r){throw this.$_shrink(t+1),this._current=t,r}return this._changed(),o}},i.prototype.flush=function(){var e=this._commands.length;if(e>0){for(;e--;)this._commands[e].dispose();this._commands=[],this._current=-1,this._changed()}},i.prototype._changed=function(){this._owner!=null&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},i.prototype.$_shrink=function(e){if(e>=0&&e<this._commands.length){for(var t=this._commands.length-1;t>=e;t--)this._commands[t].dispose();this._commands.splice(e,this._commands.length-e)}},i}(Mt),oh=function(a){function i(e){var t=a.call(this)||this;return t._ds=e,t}return w(i,a),i.prototype._doDispose=function(){this._ds=null,this._save=null,a.prototype._doDispose.call(this)},i.prototype.redo=function(e){return e?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},i.prototype.undo=function(){this._doUndo(this._ds,this._save)},i.prototype._setSoftDeleting=function(e,t){e._softDeleting=t},i.prototype._setDeleteCreated=function(e,t){e._deleteCreated=t},i.prototype._cloneRow=function(e){if(v.isArray(e))return e.slice();if(e){var t={};for(var o in e)t[o]=e[o];return t}},i.prototype._cloneValues=function(e,t,o){if(t===void 0&&(t=0),o===void 0&&(o=-1),e){var r=e.length,n=[];o<0&&(o=r),t=Math.max(0,t);for(var s=Math.min(r,t+o),l=t;l<s;l++){var u=e[l];if(v.isArray(u))n.push(u.slice());else if(u){var h={};for(var d in u)h[d]=u[d];n.push(h)}}return n}return null},i}(Aa),si=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i}(oh),I_=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i}(Ba),E_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._field=o,n._value=r,n}return w(i,a),i.prototype._doRun=function(e){var t={};return t.row=e._keepRow(this._row),(t.result=e.$_setValue(this._row,this._field,this._value))&&(this._newState=e.getRowState(this._row)),t},i.prototype._doRedo=function(e,t){e.$_setValue(this._row,this._field,this._value)},i.prototype._doUndo=function(e,t){e._yieldRow(this._row,t.row),t.row.state!=this._newState&&e.fireRowStateChanged(this._row),e.fireValueChanged(this._row,this._field)},i}(si),S_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._values=n._cloneRow(o),n._strict=r,n}return w(i,a),i.prototype._doDispose=function(){this._values=null,a.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return t.row=e._keepRow(this._row),(t.result=e.$_updateRow(this._row,this._values,this._strict))&&(this._newState=e.getRowState(this._row)),t},i.prototype._doRedo=function(e,t){e.$_updateRow(this._row,this._values,this._strict)},i.prototype._doUndo=function(e,t){e._yieldRow(this._row,t.row),t.row.state!=this._newState&&e.fireRowStateChanged(this._row),e.fireRowUpdated(this._row)},i}(si),O_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._row=t,v.isArray(o)||(o=e.objectToRow(o)),r._values=o.slice(),r}return w(i,a),i.prototype._doRun=function(e){var t={};return t.result=e.$_insertRow(this._row,this._values),t},i.prototype._doRedo=function(e,t){e.$_insertRow(this._row,this._values)},i.prototype._doUndo=function(e,t){e.$_deleteRow(this._row)},i}(si),R_=function(a){function i(e,t){var o=a.call(this,e)||this;return o._row=t,o}return w(i,a),i.prototype._doRun=function(e){var t={};return this._softDeleting=e.softDeleting,t.row=e._keepRow(this._row),t.result=e.$_deleteRow(this._row),t},i.prototype._doRedo=function(e,t){var o=e.softDeleting;try{this._setSoftDeleting(e,this._softDeleting),e.$_deleteRow(this._row)}finally{this._setSoftDeleting(e,o)}},i.prototype._doUndo=function(e,t){e.$_insertRow(this._row,t.row.values),e._yieldStates(this._row,t.row),e._yieldCommandStates(this._row,t.row.outer)},i}(si),P_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._state=o,n._force=r,n}return w(i,a),i.prototype._doRun=function(e){var t={};return t.row=e._keepStates(this._row),e.$_setRowState(this._row,this._state,this._force),t},i.prototype._doRedo=function(e,t){e.$_setRowState(this._row,this._state,this._force)},i.prototype._doUndo=function(e,t){e._yieldState(this._row,t.row),t.row.state!=this._state&&e.fireRowStateChanged(this._row)},i}(si),rh=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._row=t,r._state=o,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return t.state=e._keepState(this._row),e.$_changeRowState(this._row,this._state,!0,!0,!0),t},i.prototype._doRedo=function(e,t){e.$_changeRowState(this._row,this._state,!0,!0,!0)},i.prototype._doUndo=function(e,t){e._yieldState(this._row,t.state),t.state!=this._state&&e.fireRowStateChanged(this._row)},i}(si),k_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._deleteRows=t,r._rowEvents=o,r}return w(i,a),i.prototype._doRun=function(e){var t={rows:[]};t.orgValues=e._keepOrgValues();var o=e.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return t.rows=o.rows,t.states=o.states,t.values=o.values,t},i.prototype._doRedo=function(e,t){e.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},i.prototype._doUndo=function(e,t){var o=t.rows,r=t.values,n=t.states,s=[];if(r)for(var l=0;l<o.length;l++)e.$_internalInsertRow(l,r[l],t.row,!0);if(n)for(l=0;l<n.length;l++)n[l]&&(e._yieldState(l,n[l]),n[l]!==c.RowState.NONE&&s.push(l));e._yieldOrgValues(t.rows),(o.length>0||n.length>0)&&e._fireRefresh()},i}(si),T_=function(a){function i(e,t,o,r,n,s,l){var u=a.call(this,e)||this;return u._row=t,u._values=u._cloneValues(o,r,n),u._start=0,u._count=u._values.length,u._rowEvents=s,u._strict=l,u}return w(i,a),i.prototype._doDispose=function(){this._values=null,a.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return e.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,t),t},i.prototype._doRedo=function(e,t){e.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},i.prototype._doUndo=function(e,t){var o=t.rows;if(!(o.length<1)){for(var r=t.values,n=t.states,s=t.orgValues,l=0;l<o.length;l++){var u=o[l];e.$_restoreRow(u,r[l],n[l],s[l])}e._fireRefresh()}},i}(si),D_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._rows=t.slice(),r._rowEvents=o,r}return w(i,a),i.prototype._doRun=function(e){var t={};return this._softDeleting=e.softDeleting,e.$_removeRows(this._rows,this._rowEvents,t),t},i.prototype._doRedo=function(e,t){var o=e.softDeleting;try{this._setSoftDeleting(e,this._softDeleting),e.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(e,o)}},i.prototype._doUndo=function(e,t){var o=t.rows,r=t.statedRows;if(!(o.length<1&&r.length<1)){for(var n=t.rowSaves,s=t.states,l=0;l<o.length;l++){var u=o[l],h=n[l];e.$_internalInsertRow(u,h.values,!0),e._yieldRow(u,h,!1)}for(l=0;l<r.length;l++)u=r[l],e._yieldState(u,s[l]);for(e._fireRefresh(),l=0;l<o.length;l++){u=o[l];var d=n[l];e._yieldCommandStates(u,d.outer)}}},i}(si),M_=function(a){function i(e,t,o,r,n,s){var l=a.call(this,e)||this;return l._row=t,l._values=l._cloneValues(o,r,n),l._start=0,l._count=l._values.length,l._rowEvents=s,l}return w(i,a),i.prototype._doRun=function(e){return e.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},i.prototype._doRedo=function(e,t){e.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},i.prototype._doUndo=function(e,t){if(!this._rows){this._rows=[];for(var o=0;o<this._values.length;o++)this._rows.push(this._row+o)}var r=e.softDeleting;try{this._setSoftDeleting(e,!1),e.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(e,r)}},i}(si);function L_(a,i){return a&&a.getAttribute(i)}var mr=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.csvToArray=function(e,t,o,r,n,s){o===void 0&&(o=0),r===void 0&&(r=-1),n===void 0&&(n=!1),s===void 0&&(s=",");for(var l=[],u=[],h=t.length,d=0,p=[],f=!1,g=!1;d<h;){var m=t.charAt(d);m=='"'?f?g&&t.charAt(d+1)=='"'?(p.push(m),d++):g?(g=!1,!n&&p.push(m)):p.push(m):(f=g=!0,!n&&p.push(m)):g||m!=s&&m!="\r"&&m!=`
`?(f=!0,p.push(m)):(m==s?u.push(p.join("")):m!="\r"&&m!=`
`||(u.push(p.join("")),l.push(u),u=[],t.charAt(d+1)==`
`&&d++),p=[],f=!1),d++}g&&p.splice(0,0,'"'),p.length>0&&u.push(p.join("")),u.length>0&&l.push(u),o>0&&(r<=0?l.splice(0,o):l=l.splice(o,r));for(var b=e.getFields(),C=b.length,x=C>0,E=0,S=l.length;E<S;E++){u=l[E],x&&u.length>C&&(u.length=C);for(var P=0;P<C;P++)u[P]=b[P].readValue(u[P])}return l},i.xmlToRow=function(e,t,o){for(var r=e.childNodes,n=t.length,s=new Array(n),l=0,u=r.length;l<u;l++){var h,d=r[l];if((h=o.indexOf(d.tagName))>=0){var p=d.nodeValue;p==null&&d.hasChildNodes()&&(p=v.included(d.childNodes[0].nodeType,3,4)?d.childNodes[0].nodeValue:void 0),p!=null&&(s[h]=p)}}for(l=0;l<n;l++)if(s[l]===void 0){var f=L_(e,o[l]);f!=null&&(s[l]=f)}return s},i.xmlToArray=function(e,t,o,r){o===void 0&&(o=0),r===void 0&&(r=-1);var n=null,s=i.xmlToRow,l=t?t.length:0;if(l&&(o=Math.max(0,o),r<0&&(r=l),r=Math.min(l-o,r))){var u=e.getFields(),h=e.getOrgFieldNames();u.length,n=new Array(r);for(var d=0;d<r;d++){var p=s(t[d+o],u,h);n[d]=p}}return n},i}(me),F_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._row=t,r._newRow=o,r}return w(i,a),i.prototype._doRun=function(e){e.$_moveRow(this._row,this._newRow)},i.prototype._doRedo=function(e,t){e.$_moveRow(this._row,this._newRow)},i.prototype._doUndo=function(e,t){e.$_moveRow(this._newRow,this._row)},i}(si),N_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._count=o,n._newRow=r,n}return w(i,a),i.prototype._doRun=function(e){e.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doRedo=function(e,t){e.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doUndo=function(e,t){e.$_moveRows(this._newRow,this._count,this._row)},i}(si),A_=function(a){function i(e,t,o){var r=a.call(this,e)||this;r._rows=t,r._newRows=t.slice();for(var n=o-t[0],s=0;s<t.length;s++)r._newRows[s]+=n;return r}return w(i,a),i.prototype._doRun=function(e){var t={};return t.result=e.$_moveRowList(this._rows,this._newRows[0]),t},i.prototype._doRedo=function(e,t){return e.$_moveRowList(this._rows,this._newRows[0])},i.prototype._doUndo=function(e,t){return e.$_moveRowList(this._newRows,this._rows[0])},i}(si),B_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._rowFields=v.deepCopy(t),r._value=o,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return e.$_fillValue(this._rowFields,this._value,t),t},i.prototype._doRedo=function(e,t){e.$_fillValue(this._rowFields,this._value,null)},i.prototype._doUndo=function(e,t){var o=t.rows;if(!(o.length<1)){for(var r=t.values,n=t.states,s=t.orgValues,l=0;l<o.length;l++){var u=o[l];e.$_restoreRow(u,r[l],n[l],s[l])}e._fireRefresh()}},i}(si),$_=function(a){function i(e,t,o,r,n){o===void 0&&(o=!1),r===void 0&&(r=null),n===void 0&&(n=c.RowState.NONE);var s=a.call(this,e)||this;return s._newCount=t,s._oldCount=e.rowCount,s._fillDefaults=o,s._defaultValues=r,s._rowState=n,s}return w(i,a),i.prototype._doRun=function(e){var t={};return e.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,t),t},i.prototype._doRedo=function(e,t){e.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},i.prototype._doUndo=function(e,t){if(this._oldCount<this._newCount)e.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var o=t.rows,r=t.statedRows;if(o.length<1&&r.length<1)return;for(var n=t.rowSaves,s=t.states,l=0;l<o.length;l++){var u=o[l],h=n[l];e.$_internalInsertRow(u,h.values,!0),e._yieldRow(u,h,!1)}for(l=0;l<r.length;l++)u=r[l],e._yieldState(u,s[l]);for(e._fireRefresh(),l=0;l<o.length;l++){u=o[l];var d=n[l];e._yieldCommandStates(u,d.outer)}}},i}(si),V_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._values=v.deepCopy(t),n._rowEvents=o,n._strict=r,n}return w(i,a),i.prototype._doDispose=function(){this._values=null,a.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return e.$_updateRows2(this._values,this._strict,this._rowEvents,t),t},i.prototype._doRedo=function(e,t){e.$_updateRows2(this._values,this._strict,this._rowEvents,null)},i.prototype._doUndo=function(e,t){var o=t.rows;if(!(o.length<1)){for(var r=t.values,n=t.states,s=t.orgValues,l=0;l<o.length;l++){var u=o[l];e.$_restoreRow(u,r[l],n[l],s[l])}e._fireRefresh()}},i}(si),$a=function(a){function i(e,t){var o=a.call(this)||this;return o._points=[],o._nextPoint=0,o._values=[],o._rowIds=[],o._rowStates=[],o._orgValues=null,o._needRestore=!1,o._deletedCount=0,o._nextRowId=0,o._hiddenIds=[],o.$_handler=t,e&&(o.undoable=!0,o._commands=new I_(o)),o}return w(i,a),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=this._rowIds=this._rowStates=this._points=this._orgValues=this._hiddenIds=[],a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(e){e!=this.undoable&&(this._undoable=e,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),i.prototype.getDataRow=function(e){return this._rowIds.indexOf(e)},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRowId=function(e){return this._rowIds[e]},i.prototype.$_internalInsertField=function(e,t){if((e=a.prototype.$_internalInsertField.call(this,e,t))>=0){for(var o=this._values.length,r=0;r<o;r++)(n=this._values[r])&&n.splice(e,0,void 0);if(this._orgValues)for(o=Math.min(o,this._orgValues.length),r=0;r<o;r++){var n;(n=this._orgValues[r])&&n.splice(e,0,void 0)}}return e},i.prototype.$_internalRemoveField=function(e){try{var t=e.index;if(t>=0){for(var o=0,r=this._values;o<r.length;o++)(l=r[o])&&l.splice(t,1);if(this._orgValues)for(var n=0,s=this._orgValues;n<s.length;n++){var l;(l=s[n])&&l.splice(t,1)}}a.prototype.$_internalRemoveField.call(this,e)}catch(u){throw u}},i.prototype.$_internalClearFields=function(){a.prototype.$_internalClearFields.call(this),this.$_clearRows()},i.prototype.setRowCount=function(e,t,o,r){t===void 0&&(t=!1),o===void 0&&(o=null),r===void 0&&(r=c.RowState.NONE),this.undoable?this._commands.execute(new $_(this,e,t,o,r)):this.$_setRowCount(e,t,o,r)},i.prototype.$_setRowCount=function(e,t,o,r,n){if(t===void 0&&(t=!1),o===void 0&&(o=null),r===void 0&&(r=c.RowState.NONE),n===void 0&&(n=null),this._checkClientState()){var s=this._values,l=s.length,u=Math.max(0,e);if(u!=l){var h=this._rowIds,d=this._rowStates;if(this.refreshFieldFormats(),n&&(n.rows=[],n.rowSaves=[],n.statedRows=[],n.states=[]),u>l&&(t||o)){var p=this.fieldCount,f=o;if(!f||f instanceof Array||(f=this.objectToRow(f)),f&&f.length<1&&(f=null),t||f)for(var g=f?Math.min(f.length,p):0,m=l;m<u;m++){var b=[];if(t)for(var C=0;C<p;C++){var x=this.getField(C);b[C]=x.defaultValue!==void 0?x.defaultValue:x.nullValue}if(g>0)for(C=0;C<g;C++){var E=f[C];E!==void 0&&(b[C]=this.getField(C).readValue(E))}s[m]=b}}else if(u>l)for(m=l;m<u;m++)s[m]=[];else if(u<l){if(n)for(m=u;m<l;m++){var S=m;n.statedRows.push(S),n.states.push(d[m]),n.rows.push(S),n.rowSaves.push(this._keepRow(S))}if(this._deletedCount>0)for(m=l-1;m>=u;m--)Qt(d[m])&&this._deletedCount--}for(r=this.checkStates&&r?r:c.RowState.NONE,s.length=h.length=d.length=u,this._orgValues&&this._orgValues.length>u&&(this._orgValues.length=u),m=l;m<u;m++)d[m]=r,h[m]=this._nextRowId++;for(m=this._hiddenIds.length-1;m>=0;m--)C=this._hiddenIds[m],h.indexOf(C)<0&&this._hiddenIds.splice(m,1);this.tags.setRowCount(u),this._fireRefresh(),this._fireRowCountChanged()}}},i.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},i.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},i.prototype.setRows=function(e,t,o){if(t===void 0&&(t=0),o===void 0&&(o=-1),this._checkClientState()&&o!=0){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var r=this.checkStates,n=this.filters,s=this.filterRuntime,l=void 0;if(e&&(l=e.length)>0&&t<l){if(t=Math.max(0,t),o=o<0?l:Math.min(o,l-t),n){this._values.length=this._rowIds.length=this._rowStates.length=o,n.prepare(s,this);for(var u=l,h=0,d=0,p=t;p<u&&h<o;p++)(f=e[p])instanceof Array||(f=this.objectToRow(f)),n.select(s,d++,f)&&this.$_internalSetRow(h++,f,r);this._values.length=this._rowIds.length=this._rowStates.length=h}else if((u=Math.min(l,t+o))>t)for(this._values.length=this._rowIds.length=this._rowStates.length=u-t,h=0,p=t;p<u;p++){var f;(f=e[p])instanceof Array||(f=this.objectToRow(f)),this.$_internalSetRow(h++,f,r)}}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},i.prototype.setXmlRows=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=-1),this._checkClientState()&&o!=0&&(e=mr.xmlToArray(this,e,t,o),this.setRows(e))},i.prototype.insertRows=function(e,t,o,r,n){o===void 0&&(o=0),r===void 0&&(r=-1),n===void 0&&(n=!1),this.undoable?this._commands.execute(new M_(this,e,t,o,r,n)):this.$_insertRows(e,t,o,r,n)},i.prototype.$_insertRows=function(e,t,o,r,n){if(this._checkClientState()&&t){var s=t.length;if(!(s<1)&&(r=r<0?s:Math.min(s,r))!=0){if(e<0||e>this._values.length)throw new Ki(ye.messages.rowOutOfBounds+e);this.refreshFieldFormats(),o=Math.max(0,o);var l=Math.min(s,o+r);if(n)for(var u=e,h=o;h<l;h++)(d=t[h])instanceof Array||(d=this.objectToRow(d)),this.fireRowInserting(u,d)&&(this.$_internalInsertRow(u,d,!0),this.fireRowInserted(u),this._fireRowCountChanged(),u++);else{for(u=e,h=o;h<l;h++,u++){var d;(d=t[h])instanceof Array||(d=this.objectToRow(d)),this.$_internalInsertRow(u,d,!1)}this.tags.insertRows(e,r=l-o),this.fireRowsInserted(e,r),this._fireRowCountChanged()}}}},i.prototype.appendRows=function(e,t,o,r){t===void 0&&(t=0),o===void 0&&(o=-1),r===void 0&&(r=!1),this.insertRows(this.rowCount,e,t,o,r)},i.prototype.insertRowsFrom=function(e,t,o,r){for(var n=[],s=0,l=o;s<l.length;s++){var u=l[s];n.push(e.getRowObject(u))}if(t)for(var h=o.length-1;h>=0;h--)n[h]=this._convertValues(n[h],t);this.insertRows(r,n)},i.prototype.appendRowsFrom=function(e,t,o){this.insertRowsFrom(e,t,o,this.rowCount)},i.prototype.insertXmlRows=function(e,t,o,r,n){o===void 0&&(o=0),r===void 0&&(r=-1),n===void 0&&(n=!1),this._checkClientState()&&(t=mr.xmlToArray(this,t,o,r),this.insertRows(e,t,0,-1,n))},i.prototype.appendXmlRows=function(e,t,o,r){r===void 0&&(r=!1),this.insertXmlRows(this.rowCount,e,t,o,r)},i.prototype.fillValue=function(e,t){if(this.undoable)return this._commands.execute(new B_(this,e,t));this.$_fillValue(e,t)},i.prototype.updateRows=function(e,t,o,r,n,s){if(s===void 0&&(s=!1),this.undoable)return this._commands.execute(new T_(this,e,t,o,r,s,n));this.$_updateRows(e,t,o,r,n,s)},i.prototype.updateRows2=function(e,t,o){if(this.undoable)return this._commands.execute(new V_(this,e,o,t));this.$_updateRows2(e,t,o)},i.prototype.updateXmlRows=function(e,t,o,r,n){n===void 0&&(n=!1),this._checkClientState()&&(t=mr.xmlToArray(this,t,o,r),this.updateRows(e,t,0,-1,n))},i.prototype.getValue=function(e,t){this.$_checkRowIndex(e),this._checkFieldIndex(t);var o=this._values[e];return o?o[t]:void 0},i.prototype.setValue=function(e,t,o){return this.undoable?this._commands.execute(new E_(this,e,t,o)):this.$_setValue(e,t,o)},i.prototype.$_setValue=function(e,t,o){if(!this._checkClientState())return!1;this.$_checkRowIndex(e),this._checkFieldIndex(t);var r=this.getField(t),n=this._rowStates[e];if(!r)throw new Ki(ye.messages.fieldIndexOutOfBounds+t);if(!r.updatable&&(n==c.RowState.NONE||n==c.RowState.UPDATED))return!1;var s,l=this._values[e],u=r.readValue(o);if(l&&r.equalValues(u,l[t]))return!1;this.refreshFieldFormat(r);var h=this.checkStates&&(n==c.RowState.NONE||!n);return l||(this._values[e]=l=new Array(this.fieldCount)),h&&this._orgValues&&(s=l.concat()),l[t]=u,this._internalCalculateValues(l,e),h?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,c.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(e),this.tags.setValue(e,t),this.fireValueChanged(e,t),!0},i.prototype.updateRow=function(e,t,o){return this.undoable?this._commands.execute(new S_(this,e,t,o)):this.$_updateRow(e,t,o)},i.prototype.getRow=function(e){this.$_checkRowIndex(e);var t=this._values[e];return t?t.slice():[]},i.prototype.getRows=function(e,t){e===void 0&&(e=0),t===void 0&&(t=-1);var o=this._values.length,r=Math.max(0,e),n=t<0?o-1:Math.min(o-1,t);if(r>=o||n<r)return[];for(var s=n-r+1,l=new Array(s),u=0;u<s;u++)l[u]=this._values[u+r]?this._values[u+r].slice():[];return l},i.prototype.getRowObject=function(e,t){return this.$_checkRowIndex(e),this.$_getRowObject(e,t)},i.prototype.getRowObjects=function(e,t,o){e===void 0&&(e=0),t===void 0&&(t=-1);var r=this._values.length,n=Math.max(0,e),s=t<0?r-1:Math.min(r-1,t);if(n>=r||s<n)return[];for(var l=s-n+1,u=new Array(l),h=0;h<l;h++)u[h]=this.$_getRowObject(h+n,o);return u},i.prototype.getOutputObject=function(e,t){var o=this.getRowObject(t,e==null?void 0:e.rowState);return e&&this.$_createOutputRows([o],e,t),o},i.prototype.getOutputObjects=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=-1);var r=this.getRowObjects(t,o,e==null?void 0:e.rowState);return e&&this.$_createOutputRows(r,e,t),r},i.prototype.getFieldValues=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=-1),this._checkFieldIndex(e);var r=this._values.length;if(o=o<0?r-1:Math.min(r-1,o),(t=Math.max(0,t))>=r||o<t)return null;for(var n=new Array(o-t+1),s=t;s<=o;s++){var l=this._values[s];n[s-t]=l&&l[e]}return n},i.prototype.hasData=function(e){var t=this._values;return e>=0&&e<t.length&&t[e]!==void 0&&t[e].length>0},i.prototype.insertRow=function(e,t){return this.undoable?this._commands.execute(new O_(this,e,t)):this.$_insertRow(e,t)},i.prototype.$_insertRow=function(e,t,o){if(o===void 0&&(o=void 0),!this._checkClientState())return!1;if(e<0||e>this._values.length)throw new Ki(ye.messages.rowOutOfBounds+e);return this.refreshFieldFormats(),!(!t||!this.fireRowInserting(e,t))&&(v.isArray(t)||(t=this.objectToRow(t)),this.$_internalInsertRow(e,t,!0),o&&this._yieldStates(e,o),this.fireRowInserted(e),this._fireRowCountChanged(),!0)},i.prototype.appendRow=function(e){var t=this.rowCount;return this.insertRow(t,e)?t:-1},i.prototype.removeRow=function(e){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[e]){case c.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new rh(this,e,c.RowState.CREATE_AND_DELETED));break;case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:return;default:return this._commands.execute(new rh(this,e,c.RowState.DELETED))}return this._commands.execute(new R_(this,e))}return this.$_removeRow(e)},i.prototype.$_removeRow=function(e){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(e),this.softDeleting&&this.checkStates){switch(this._rowStates[e]){case c.RowState.CREATED:this.deleteCreated?this.$_deleteRow(e):this.$_changeRowState(e,c.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(e,c.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(e)},i.prototype.removeRows=function(e,t){t===void 0&&(t=!1),this.undoable?this._commands.execute(new D_(this,e,t)):this.$_removeRows(e,t,null)},i.prototype.$_removeRows=function(e,t,o){if(this._checkClientState()){var r,n=this.deleteCreated;if(e&&!((r=e.length)<1)){if(e=e.slice(),o&&(o.rows=[],o.rowSaves=[],o.statedRows=[],o.states=[]),this.softDeleting&&this.checkStates){for(var s=t?null:[],l=r;l--;){var u=e[l],h=this._rowStates[u],d=!1;switch(this.$_checkRowIndex(u),h){case c.RowState.CREATED:n||(o&&(o.statedRows.push(u),o.states.push(h)),d=this.$_changeRowState(u,c.RowState.CREATE_AND_DELETED,t,!1,!0),e.splice(l,1));break;case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:e.splice(l,1);break;default:o&&(o.statedRows.push(u),o.states.push(h)),d=this.$_changeRowState(u,c.RowState.DELETED,t,!1,!0),e.splice(l,1)}s&&d&&s.push(u)}t||s&&s.length>0&&this.fireRowStatesChanged(s)}if((r=e.length)>0){if(r>1&&e.sort(function(p,f){return p-f}),o)for(l=0;l<r;l++)u=e[l],o.rows.push(u),o.rowSaves.push(this._keepRow(u));if(t)for(l=r;l--;)u=e[l],this.$_checkRowIndex(u),this.$_deleteRow(u);else if(this.fireRowsRemoving(e)){for(l=r;l--;)u=e[l],h=this._rowStates[u],this.$_checkRowIndex(u),this.$_internalRemoveRow(u),Qt(h)&&this._deletedCount--;this.tags.removeRows(e),this.fireRowsRemoved(e),this._fireRowCountChanged()}}}}},i.prototype.moveRow=function(e,t){if(e!=t)return this.undoable?this._commands.execute(new F_(this,e,t)):void this.$_moveRow(e,t)},i.prototype.$_moveRow=function(e,t){this._checkClientState()&&(this.$_checkRowIndex(e),this.$_checkRowIndex(t),this.fireRowMoving(e,t)&&(this.$_internalMoveRow(e,t),this.tags.moveRow(e,t),this.fireRowMoved(e,t)))},i.prototype.moveRows=function(e,t,o){if(!(t<1||e==o))return this.undoable?this._commands.execute(new N_(this,e,t,o)):void this.$_moveRows(e,t,o)},i.prototype.$_moveRows=function(e,t,o){this._checkClientState()&&(this.$_checkRowIndex(e),this.$_checkRowIndex(o),this.fireRowsMoving(e,t,o)&&(this.$_internalMoveRows(e,t,o),this.tags.moveRows(e,t,o),this.fireRowsMoved(e,t,o)))},i.prototype.moveRowList=function(e,t){if(e&&!(e.length<1))return e=e.sort(function(o,r){return o-r}),this.undoable?this._commands.execute(new A_(this,e,t)):this.$_moveRowList(e,t)},i.prototype.$_moveRowList=function(e,t){if(this._checkClientState()){var o=e[0];return this.$_checkRowIndex(o),this.$_checkRowIndex(t),this.fireRowListMoving(e,t)?(this.$_internalMoveRowList(e,t),this.tags.moveRowList(e,t),this.fireRowListMoved(e,t),!0):void 0}},i.prototype.getRowState=function(e){return this.$_checkRowIndex(e),this._rowStates[e]||c.RowState.NONE},i.prototype.$_checkDeleted=function(e,t){Qt(t)?this._deletedCount++:Qt(e)&&!Qt(t)&&this._deletedCount--},i.prototype.setRowState=function(e,t,o){return this.undoable?this._commands.execute(new P_(this,e,t,o)):this.$_setRowState(e,t,o)},i.prototype.$_setRowState=function(e,t,o){this._checkClientState()&&(this.$_checkRowIndex(e),this._orgValues?this.$_changeRowStateEx(e,t,!0,o,!1):this.$_changeRowState(e,t,!0,o))},i.prototype.setRowStates=function(e,t,o,r){var n;if(r===void 0&&(r=!1),this._checkClientState()&&e&&!((n=e.length)<1))if(r)for(var s=0;s<n;s++){var l=e[s];this.$_checkRowIndex(l),this.$_changeRowStateEx(l,t,!0,o,!1)}else{var u=[],h=this._rowStates;for(s=0;s<n;s++){var d=h[l=e[s]];this.$_checkRowIndex(l),t!=d&&(h[l]=t,u.push(l),this.$_checkDeleted(d,t),this._orgValues&&this.prepareOrgValues(l,d,t))}u.length>0&&this.fireRowStatesChanged(u)}},i.prototype.clearRowStates=function(e,t){t===void 0&&(t=!1),this.undoable?this._commands.execute(new k_(this,e,t)):this.$_clearRowStates(e,t)},i.prototype.$_clearRowStates=function(e,t,o){if(t===void 0&&(t=!1),o===void 0&&(o=!1),this._checkClientState()){for(var r=[],n=o?[]:null,s=o?[]:null,l=this._rowStates.length;l--;){var u=this._rowStates[l];switch(n&&(n[l]=u),s&&(s[l]=null),u){case c.RowState.CREATE_AND_DELETED:case c.RowState.DELETED:if(e){if(r.push(l),s){var h=this._keepRow(l);h&&(s[l]=h.values)}t?this.$_deleteRow(l):(this.$_internalRemoveRow(l),this.tags.removeRow(l),this._deletedCount--)}else this.$_changeRowState(l,c.RowState.NONE,t),this._deletedCount--;break;default:this.$_changeRowState(l,c.RowState.NONE,t)}}return this.$_resetOrgValues(),t||(r.length>0&&(this.fireRowsRemoved(r),this._fireRowCountChanged()),this.fireRowStatesCleared()),o?{rows:r,states:n,values:s}:void 0}},i.prototype.$_restoreStates=function(e,t){this.fireRowStatesChanged(e)},i.prototype.getStateRows=function(e){var t=[];if(e)for(var o=0,r=this._rowStates.length;o<r;o++)this._rowStates[o]==e&&t.push(o);return t},i.prototype.getAllStateRows=function(){for(var e={},t=e[c.RowState.CREATED]=[],o=e[c.RowState.UPDATED]=[],r=e[c.RowState.DELETED]=[],n=e[c.RowState.CREATE_AND_DELETED]=[],s=0,l=this._rowStates.length;s<l;s++){var u=this._rowStates[s];u===c.RowState.CREATED?t.push(s):u===c.RowState.UPDATED?o.push(s):u===c.RowState.DELETED?r.push(s):u===c.RowState.CREATE_AND_DELETED&&n.push(s)}return e},i.prototype.getRowStateCount=function(e){var t=e?e.length:0,o=this._rowStates.length,r=0;if(t&&o)if(t>1)for(var n=0;n<o;n++){var s=this._rowStates[n];e.indexOf(s)>=0&&r++}else for(s=e[0],n=0;n<o;n++)this._rowStates[n]===s&&r++;return r},i.prototype.$_restoreState=function(e){if(this._rowStates[e]===c.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var o=this._values[e],r=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var l=o.length>n?o[n]:void 0,u=t.length>n?t[n]:void 0,h=this.getField(n);if(r){if(!h.equalValues(l,u))return!1}else if(!h.sameValues(l,u))return!1}return this._rowStates[e]=c.RowState.NONE,!0}}return!1},i.prototype.restoreUpdatedStates=function(e){if(this._orgValues&&this._checkClientState()){var t=[];if(e!=null)for(var o=0,r=e.length;o<r;o++){var n=e[o];n>=0&&n<this._values.length&&this.$_restoreState(n)&&t.push(n)}else for(o=0,r=this._values.length;o<r;o++)this.$_restoreState(o)&&t.push(o);t.length>0&&this.fireRowStatesChanged(t)}},i.prototype.$_restoreUpdatedRow=function(e){if(this._rowStates[e]===c.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var o=this._values[e],r=0,n=Math.min(t.length,this.fieldCount);r<n;r++)o[r]=t[r];return this._rowStates[e]=c.RowState.NONE,!0}}return!1},i.prototype.$_restoreRow=function(e,t,o,r){this._values[e]=t.slice(),this._rowStates[e]=o,this._orgValues&&(this._orgValues[e]=r&&r.slice())},i.prototype.restoreUpdatedRows=function(e){if(this._orgValues&&this._checkClientState()){var t=[];if(e!=null)for(var o=0,r=e.length;o<r;o++){var n=e[o];n>=0&&n<this._values.length&&this.$_restoreUpdatedRow(n)&&t.push(n)}else for(o=0,r=this._values.length;o<r;o++)this.$_restoreUpdatedRow(o)&&t.push(o);t.length>0&&(this.fireRestoreRows(t),this.fireRowStatesChanged(t))}},i.prototype._reCalculateFields=function(e){var t=this;this._values.forEach(function(o,r){t._internalCalculateValues(o,r,e)})},i.prototype.getUpdatedCells=function(e){var t=this.restoreMode;if(!this._orgValues||t!=c.RestoreMode.AUTO&&t!=c.RestoreMode.EXPLICIT||(e==null&&(e=this.getStateRows(c.RowState.UPDATED)),e==null))return null;for(var o=[],r=0,n=e.length;r<n;r++){var s=e[r],l=s>=0&&this._orgValues&&s<this._orgValues.length?this._orgValues[s]:null;if(l){for(var u=this._values[s],h=this.strictRestore,d=[],p=0,f=this.fieldCount;p<f;p++){var g=u.length>p?u[p]:void 0,m=l.length>p?l[p]:void 0,b=this.getField(p);b.calculated||(h?b.equalValues(g,m)||d.push({fieldName:this.getOrgFieldName(p),oldValue:l[p],newValue:u[p]}):b.sameValues(g,m)||d.push({fieldName:this.getOrgFieldName(p),oldValue:l[p],newValue:u[p]}))}d.length>0&&o.push({__rowId:s,updatedCells:d})}}return o},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype.findRow=function(e,t,o){if(o===void 0&&(o=0),e.length<1||t.length<e.length)return-1;for(var r=[],n=[],s=this._values,l=0,u=e.length;l<u;l++){var h=void 0;(h=typeof e[l]=="string"?this.getFieldIndex(e[l]):Number(e[l]))>=0&&h<this.fieldCount&&r.indexOf(h)<0&&(r.push(h),n.push(t[l]))}var d=r.length;for(l=0;l<d;l++)r[l]=this.getField(r[l]);for(l=o,u=s.length;l<u;l++){var p=s[l],f=!0;for(h=0;h<d;h++)if(!r[h].equalValues(n[h],p[h])){f=!1;break}if(f)return l}return-1},i.prototype.savePoint=function(e){if(e===void 0&&(e=!0),this._checkClientState()){var t=this._values,o=this.fieldCount,r=t?t.length:0;if(o>0&&r>0){for(var n=new Array(r),s=0;s<r;s++){var l=t[s]&&t[s].concat();n[s]=l}var u=e?this._rowStates.concat():null,h=this._nextPoint++;return this._points.push({id:h,data:n,states:u}),h}return-1}},i.prototype.rollback=function(e){if(this._checkClientState())for(var t=this._points.length-1;t>=0;t--){var o=this._points[t];if(o.id==e){this.$_removeSavePoints(t+1),this.setRows(o.data);var r=o.states;r&&(this._rowStates=r.concat());break}}},i.prototype.$_removeSavePoints=function(e){for(var t=this._points,o=t.length-1;o>=e;o--)t[o].data=null,t.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var e=[],t=0,o=this._points.length;t<o;t++)e.push(this._points[t].id);return e},i.prototype.canUpdateRow=function(e){return!(this._rowStates[e]===c.RowState.NONE&&!this.updatable)},i.prototype.canAppendRow=function(){return!0},i.prototype.canInsertRow=function(e){return!0},i.prototype.canDeleteRow=function(e){return!0},i.prototype.getDistinctValues=function(e,t,o){if(t===void 0&&(t=-1),o===void 0&&(o=c.SortDirection.ASCENDING),t=arguments.length>1?t:-1,this._checkFieldIndex(e),t<0&&(t=this._values.length),t>0){for(var r=this.getField(e).dataType,n=[],s=[],l=void 0,u=0,h=this.rowCount;u<h;u++)switch(l=this._values[u]?this._values[u][e]:void 0,r){case c.ValueType.NUMBER:l!=null&&isNaN(l)||n.indexOf(l)<0&&n.push(l);break;case c.ValueType.DATE:case c.ValueType.DATETIME:l?s.indexOf(l.getTime())<0&&(s.push(l.getTime()),n.push(l)):s.indexOf(void 0)<0&&(s.push(void 0),n.push(void 0));break;case c.ValueType.OBJECT:default:n.indexOf(l)<0&&n.push(l)}return o!==c.SortDirection.NONE&&(n=v.included(r,c.ValueType.DATETIME,c.ValueType.DATE,c.ValueType.NUMBER)?n.sort(function(d,p){return d-p}):n.sort(),o===c.SortDirection.DESCENDING&&(n=n.reverse())),n.slice(0,t)}return null},i.prototype.compareValues=function(e,t,o,r,n){var s=this._values[t],l=this._values[o];if(s===l)return 0;var u=s?s[e]:null,h=l?l[e]:null;return r===-1&&(u=u==""?null:u,h=h==""?null:h),u==null?h==null?0:-1*r:h==null?1*r:(u=n?String(u).toLowerCase():u)>(h=n?String(h).toLowerCase():h)?1:u<h?-1:0},i.prototype.compareTexts=function(e,t,o,r){return this.compareValues(e,t,o,r,!0)},i.prototype.compareNumbers=function(e,t,o,r){var n=this._values[t],s=this._values[o];if(n===s)return 0;var l=n?n[e]:NaN,u=s?s[e]:NaN;return isNaN(l)?isNaN(u)?0:-1*r:isNaN(u)?1*r:l>u?1:l<u?-1:0},i.prototype.compareBools=function(e,t,o,r){var n=this._values[t],s=this._values[o];if(n===s)return 0;var l=!!n&&!!n[e],u=!!s&&!!s[e];return l&&!u?1:!l&&u?-1:0},i.prototype.compareObjects=function(e,t,o,r){var n=this._values[t],s=this._values[o];if(n===s)return 0;var l=n?n[e]:null,u=s?s[e]:null;return l?u?this.getField(e).$_compareObject(l,u,t,o):1*r:u?-1*r:0},i.prototype.summarize=function(e,t){var o=this.rowCount;if(o<1)return!1;for(var r=[],n=0;n<o;n++)r.push(n);return this.summarizeRange(e,r,t)},i.prototype.summarizeRange=function(e,t,o){if(e==null||t==null)return!1;e.clear();var r=t.length;if(r<1)return!1;for(var n,s,l,u=this.getField(e.field).dataType===c.ValueType.NUMBER,h=0,d=e.field,p=0;p<r;){var f=t[p++];(x=(C=this._values[f])&&C[d])==null||u&&(!u||isNaN(x))||(u&&(n=h?n+x:x),(u||x!="")&&h++,(s==null||x<s)&&(s=x),(l==null||x>l)&&(l=x))}if(e.count=r,h>0)if(e.sum=n,e.min=s,e.max=l,u&&(e.avg=n/r),e.dataCount=h,u&&(e.dataAvg=n/h),o&&u){for(var g=0,m=e.avg,b=0;b<r;b++){var C,x;f=t[b],(x=(C=this._values[f])&&C[d])!=null&&(g+=Math.pow(x-m,2))}e.varsp=g/r,e.vars=g/(r-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype._keepRow=function(e){var t={};return t.rowId=this._rowIds[e],t.values=this._values[e]&&this._values[e].slice(),t.state=this._rowStates[e],t.orgValues=this._orgValues&&this._orgValues[e]&&this._orgValues[e].slice(),t.outer=this._keepCommandStates(e),t},i.prototype._yieldRow=function(e,t,o){o===void 0&&(o=!0),this._rowIds[e]=t.rowId,this._values[e]=t.values&&t.values.slice(),this._rowStates[e]=t.state,this._orgValues&&(this._orgValues[e]=t.orgValues&&t.orgValues.slice()),o&&this._yieldCommandStates(e,t.outer)},i.prototype._keepStates=function(e){var t={};return t.rowId=this._rowIds[e],t.state=this._rowStates[e],t.orgValues=this._orgValues&&this._orgValues[e]&&this._orgValues[e].slice(),t},i.prototype._yieldStates=function(e,t){this._rowIds[e]=t.rowId,this._rowStates[e]=t.state,this._orgValues&&(this._orgValues[e]=t.orgValues&&t.orgValues.slice())},i.prototype._keepState=function(e){return this._rowStates[e]},i.prototype._yieldState=function(e,t){this._rowStates[e]=t},i.prototype._keepOrgValues=function(){var e=this._orgValues;if(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o]&&e[o].slice());return t}return null},i.prototype._yieldOrgValues=function(e){if(this._orgValues)if(e){this._orgValues=[];for(var t=0;t<e.length;t++)this._orgValues.push(e[t]&&e[t].slice())}else this._orgValues=e},i.prototype.$_checkRowIndex=function(e){if(isNaN(e)||e<0||e>=this._values.length)throw v.isDebugging(),new Ki(ye.messages.rowOutOfBounds+e)},i.prototype.$_resetOrgValues=function(){var e=this.restoreMode;this._orgValues=this.checkStates&&e!=c.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&e==c.RestoreMode.AUTO},i.prototype.arrayToRow=function(e,t){for(var o=Math.min(e?e.length:0,this.fieldCount),r=new Array(o),n=0;n<o;n++)r[n]=this.getField(n).readValue(e[n]);return this._internalCalculateValues(r,t),r},i.prototype.$_internalSetRow=function(e,t,o){var r=this.arrayToRow(t,e);this._values[e]=r,this._rowIds[e]=this._nextRowId++,this.checkStates&&(this._rowStates[e]=c.RowState.NONE)},i.prototype.$_internalInsertRow=function(e,t,o){var r=this.arrayToRow(t,e),n=e==this._values.length;n?(this._values.push(r),this._rowIds.push(this._nextRowId++)):(this._values.splice(e,0,r),this._rowIds.splice(e,0,this._nextRowId++)),o&&this.tags.insertRow(e),n?this._rowStates.push(this.checkStates?c.RowState.CREATED:c.RowState.NONE):(this._rowStates.splice(e,0,this.checkStates?c.RowState.CREATED:c.RowState.NONE),this._orgValues&&this._orgValues.splice(e,0,void 0))},i.prototype.$_updateRow=function(e,t,o){if(this._checkClientState())return this.$_checkRowIndex(e),this.refreshFieldFormats(),!(!t||!this.fireRowUpdating(e,t))&&(this.$_internalUpdateRow(e,t,o,!0,!0),this.fireRowUpdated(e),!0)},i.prototype.$_updateRows=function(e,t,o,r,n,s,l){if(l===void 0&&(l=null),this._checkClientState()&&t){var u=t.length;if(!(u<1)&&(r=r<0?u:Math.min(u,r))!=0){o=Math.max(0,o),this.refreshFieldFormats();var h=this.rowCount,d=Math.min(u,o+r);if(!(d<=o))if(l&&(l.rows=[],l.values=[],l.states=[],l.orgValues=[]),s)for(var p=e,f=o;f<d&&p<h;f++,p++){var g=t[f];!this._values[p]&&(this._values[p]=new Array(this.fieldCount)),this.fireRowUpdating(p,g)&&(l&&(l.rows.push(p),l.values.push(this._values[p].slice()),l.states.push(this._rowStates[p]),l.orgValues.push(this._orgValues&&this._orgValues[p])),this.$_internalUpdateRow(p,g,n,!0,!0),this.fireRowUpdated(p))}else{var m=[];for(p=e,f=o;f<d&&p<h;f++,p++)this._rowStates[p]==c.RowState.NONE&&m.push(p),!this._values[p]&&(this._values[p]=new Array(this.fieldCount)),l&&(l.rows.push(p),l.values.push(this._values[p].slice()),l.states.push(this._rowStates[p]),l.orgValues.push(this._orgValues&&this._orgValues[p])),g=t[f],this.$_internalUpdateRow(p,g,n,!1,!1);m.length>0&&this.fireRowStatesChanged(m),this.tags.updateRows(e,r=d-o),this.fireRowsUpdated(e,r)}}}},i.prototype.$_updateRows2=function(e,t,o,r){var n=this;if(this._checkClientState()&&e)if(this.refreshFieldFormats(),r&&(r.rows=[],r.values=[],r.states=[],r.orgValues=[]),Object.keys(e).forEach(function(p){return n.$_checkRowIndex(parseInt(p))}),o)for(var s in e){var l=Number(s),u=e[s];!this._values[l]&&(this._values[l]=new Array(this.fieldCount)),this.fireRowUpdating(l,u)&&(r&&(r.rows.push(l),r.values.push(this._values[l].slice()),r.states.push(this._rowStates[l]),r.orgValues.push(this._orgValues&&this._orgValues[l])),this.$_internalUpdateRow(l,u,t,!0,!0),this.fireRowUpdated(l))}else{var h=[],d=[];for(var s in e)l=Number(s),this._rowStates[l]==c.RowState.NONE&&h.push(l),!this._values[l]&&(this._values[l]=new Array(this.fieldCount)),r&&(r.rows.push(l),r.values.push(this._values[l].slice()),r.states.push(this._rowStates[l]),r.orgValues.push(this._orgValues&&this._orgValues[l])),u=e[s],this.$_internalUpdateRow(l,u,t,!1,!1),d.push(l);h.length>0&&this.fireRowStatesChanged(h),this.tags.updateRowList(d),this.fireRowListUpdated(d)}},i.prototype.$_fillValue=function(e,t,o){if(o===void 0&&(o=null),this._checkClientState()&&Object.keys(e).length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);var r=[],n=[];for(var s in e){n.push(+s),this._rowStates[s]==c.RowState.NONE&&r.push(+s),!this._values[s]&&(this._values[s]=new Array(this.fieldCount)),o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s]));for(var l=this._values[s].slice(),u=0,h=e[s];u<h.length;u++)l[h[u]]=t;this.$_internalUpdateRow(+s,l,!1,!1,!1)}r.length>0&&this.fireRowStatesChanged(r),this.tags.updateRowList(n),this.fireRowListUpdated(n)}},i.prototype.$_internalUpdateRow=function(e,t,o,r,n){var s,l=this.getFields(),u=v.isArray(t),h=Math.min(l.length,u?t.length:l.length),d=this._values[e],p=this._rowStates[e],f=this.checkStates&&(p==c.RowState.NONE||!p);d||(this._values[e]=d=new Array(this.fieldCount)),f&&this._orgValues&&(s=v.deepCopy(d));for(var g=!1,m=0;m<h;m++){var b=l[m];if((b.updatable||p==c.RowState.CREATED||p==c.RowState.CREATE_AND_DELETED)&&(u||t.hasOwnProperty(b.orgFieldName))){var C=u?t[m]:t[b.orgFieldName];o&&C===void 0||(g=!this._needRestore||g||(o?!b.equalValues(d[m],b.readValue(C)):!b.sameValues(d[m],b.readValue(C))),d[m]=b.readValue(C))}}g&&this._internalCalculateValues(d,e),f&&g?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,c.RowState.UPDATED,r)):this._needRestore&&this.restoreState(e),n&&this.tags.updateRow(e)},i.prototype.$_changeRowState=function(e,t,o,r,n){if(r===void 0&&(r=!1),n===void 0&&(n=!1),this.checkStates||r){var s=this._rowStates[e];if((t=t||c.RowState.NONE)!=s)return this._rowStates[e]=t,n&&(!Qt(s)&&Qt(t)?this._deletedCount++:Qt(s)&&!Qt(t)&&this._deletedCount--),o&&this.fireRowStateChanged(e),!0}return!1},i.prototype.restoreState=function(e){if(this._rowStates[e]===c.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var o=this._values[e],r=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var l=o.length>n?o[n]:void 0,u=t.length>n?t[n]:void 0;if(r){if(!this.getField(n).equalValues(l,u))return!1}else if(!this.getField(n).sameValues(l,u))return!1}return this._rowStates[e]=c.RowState.NONE,!0}}return!1},i.prototype.prepareOrgValues=function(e,t,o){o==c.RowState.UPDATED?this._orgValues[e]=this._values[e]?this._values[e].concat():[]:t==c.RowState.UPDATED&&this._orgValues[e]&&(this._orgValues[e]=void 0)},i.prototype.$_changeRowStateEx=function(e,t,o,r,n){var s=this._rowStates[e];return!!this.$_changeRowState(e,t,!1,r,n)&&(this._orgValues&&this.prepareOrgValues(e,s,t),o&&this.fireRowStateChanged(e),!0)},i.prototype.$_getRowObject=function(e,t){var o={},r=this._values[e];if(r){for(var n=0;n<this.fieldCount;n++)o[this.getOrgFieldName(n)]=r[n];t&&(o.__rowState=this.getRowState(e))}return o},i.prototype.$_deleteRow=function(e){if(this.fireRowRemoving(e)){var t=this._rowStates[e];return this.$_internalRemoveRow(e),Qt(t)&&this._deletedCount--,this.tags.removeRow(e),this.fireRowRemoved(e),this._fireRowCountChanged(),!0}return!1},i.prototype.$_internalRemoveRow=function(e){var t=this._rowIds[e];this._hiddenIds.indexOf(t)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(t),1),this._values.splice(e,1),this._rowIds.splice(e,1),this._orgValues&&this._orgValues.length>e&&this._orgValues.splice(e,1),this._rowStates.splice(e,1)},i.prototype.$_internalMoveRow=function(e,t){var o=this._values[e],r=this._rowIds[e],n=this._rowStates[e];this._values.splice(e,1),this._rowIds.splice(e,1),this._rowStates.splice(e,1),this._values.splice(t,0,o),this._rowIds.splice(t,0,r),this._rowStates.splice(t,0,n),this._orgValues&&(this._orgValues.length=Math.max(this._orgValues.length,t+1),o=this._orgValues[e],this._orgValues.splice(e,1),this._orgValues.splice(t,0,o))},i.prototype.$_internalMoveRows=function(e,t,o){for(var r=this._values.splice(e,t),n=this._rowIds.splice(e,t),s=this._rowStates.splice(e,t),l=0,u=r.length;l<u;l++)this._values.splice(o+l,0,r[l]),this._rowIds.splice(o+l,0,n[l]),this._rowStates.splice(o+l,0,s[l]);if(this._orgValues)for(this._orgValues.length=Math.max(this._orgValues.length,o+t+1),l=0,u=(r=this._orgValues.splice(e,t)).length;l<u;l++)this._orgValues.splice(o+l,0,r[l])},i.prototype.$_internalMoveRowList=function(e,t){for(var o=[],r=[],n=[],s=e.length-1;s>=0;s--){var l=e[s];o.push(this._values.splice(l,1)[0]),r.push(this._rowIds.splice(l,1)[0]),n.push(this._rowStates.splice(l,1)[0])}o=o.reverse(),r=r.reverse(),n=n.reverse(),s=0;for(var u=e.length;s<u;s++)this._values.splice(t+s,0,o[s]),this._rowIds.splice(t+s,0,r[s]),this._rowStates.splice(t+s,0,n[s]);if(this._orgValues){for(o=[],this._orgValues.length=Math.max(this._orgValues.length,t+e.length+1),s=e.length-1;s>=0;s--)o.push(this._orgValues.splice(e[s],1)[0]);for(o=o.reverse(),s=0,u=e.length;s<u;s++)this._orgValues.splice(t+s,0,o[s])}},i.prototype.$_searchDataRow=function(e,t,o,r,n){var s=this.rowCount;if(s<1)return-1;var l=Math.min(e.length,t.length);if(l<1)return-1;for(var u=o.allFields,h=o.caseSensitive,d=o.partialMatch,p=null,f=[],g=o.reverse,m=o.compareCallback||v.compareTextValue,b=0;b<l;b++)f[b]=this.getField(e[b]).dataType;r=Math.max(0,r),n=Math.min(s-1,n);for(var C=r;g?C>=n:C<=n;g?C--:C++){var x=!0;for(b=0;b<l;b++){var E=this.getValue(C,e[b]),S=this.getOrgFieldName(e[b]);switch(f[b]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t[b]instanceof Date)x=m.call(this.$_handler,t[b],E,h,d,C,S);else{if(!p){var P=/[.]/.test(t[b])?"yyyy.MM.dd":/[/]/.test(t[b])?"yyyy/MM/dd":/[-]/.test(t[b])?"yyyy-MM-dd":"yyyyMMdd";p=new Lt(P)}x=m.call(this.$_handler,t[b],E&&p.getText(E),h,d,C,S)}break;default:x=m.call(this.$_handler,t[b],E,h,d,C,S)}if(x&&!u)return C;if(!x&&u)break}if(x)return C}return-1},i.prototype.searchDataRow=function(e){var t=-1;e instanceof Nr||(e.reverse&&!e.hasOwnProperty("startIndex")&&(e.startIndex=this.rowCount-1),e=new Nr(e));var o=e.fields,r=e.values,n=e.startIndex;if(o&&o.length>0&&r&&r.length>0){for(var s=o.length,l=[],u=0;u<s;u++){var h=parseFloat(o[u]);if(isNaN(h)){var d=this.getFieldIndex(o[u]);d>=0&&l.push(d)}else l.push(h)}if(l.length>0){s=this.rowCount;var p=e.reverse;n=p?Math.min(s,n):Math.max(0,n),(t=(p?n>-1:n<s)?this.$_searchDataRow(l,r,e,n,p?0:s-1):-1)<0&&e.wrap&&(p?n<s-1:n>0)&&(t=this.$_searchDataRow(l,r,e,p?s-1:0,p?n+1:n-1))}}return t},i.prototype.$_searchData=function(e,t,o,r,n,s){var l=this.rowCount;if(l<1)return null;for(var u=o.caseSensitive,h=o.partialMatch,d=this.fieldCount,p=e.length,f=o.reverse,g=null,m=[],b=0;b<d;b++)m[b]=this.getField(b).dataType;r=Math.max(0,r),n=Math.max(0,Math.min(l-1,n)),s=Math.max(f?-1:0,Math.min(s,p)),f?s<0&&(r--,s=p-1):s>=e.length&&(r++,s=0);for(var C=o.compareCallback||v.compareTextValue,x=r;f?x>=n:x<=n;f?x--:x++)for(b=f?x<r?p-1:s:x>r?0:s;f?b>=0:b<p;f?b--:b++){var E=e[b];if(E>=0&&E<d){var S=this.getValue(x,E),P=!1,R=this.getOrgFieldName(E);switch(m[E]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t instanceof Date)P=C.call(this.$_handler,t,S,u,h,x,R);else{if(!g){var k=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd";g=new Lt(k)}P=C.call(this.$_handler,t,S&&g.getText(S),u,h,x,R)}break;default:P=C.call(this.$_handler,t,S,u,h,x,R)}if(P)return{dataRow:x,fieldIndex:E,searchFieldIndex:b,fieldName:R}}}return null},i.prototype.searchData=function(e){var t=this,o=e.value,r=this.rowCount,n=e.fields=v.makeArray(e.fields);n&&n.length||(n=this.getOrgFieldNames());var s=[];if(!(n&&n.length>0&&o!=null))return null;n.forEach(function(m){s.push(t.getFieldIndex(m))}),e instanceof Ar||(e.reverse&&(e.hasOwnProperty("startIndex")||(e.startIndex=r-1),e.hasOwnProperty("startFieldIndex")||(e.startFieldIndex=s.length-1)),e=new Ar(e));var l=null,u=e.reverse,h=s.length,d=u?Math.min(r-1,e.startIndex):Math.max(0,e.startIndex),p=u?0:r-1,f=u?Math.min(h-1,e.startFieldIndex):Math.max(0,e.startFieldIndex),g=u?d<r-1||f<h-1:d>0||f>0;return!(l=(u?d>=0&&f>=0:d<r)?this.$_searchData(s,o,e,d,p,f):null)&&e.wrap&&g&&(l=this.$_searchData(s,o,e,u?r-1:0,d-1,u?f:0)),l&&(l.fieldName=this.getOrgFieldName(l.fieldIndex)),l},i.prototype.isDataChanged=function(e,t){if(this._rowStates[e]!==c.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(e),this._checkFieldIndex(t),this._orgValues[e]){var o=this._orgValues[e][t],r=this.getValue(e,t),n=this.getField(t);return n&&!n.sameValues(o,r)}return!1},i.prototype.$_hideRows=function(e,t){if(e!=null){for(var o=v.isArray(e)?e:[e],r=[],n=this._hiddenIds.length,s=0,l=o.length;s<l;s++){var u=this.getRowId(o[s]);if(u!=null)if(r.push(u),t)this._hiddenIds.indexOf(u)<0&&this._hiddenIds.push(u);else{var h=this._hiddenIds.indexOf(u);h>=0&&this._hiddenIds.splice(h,1)}}this._hiddenIds.length!==n&&this.fireRowHided(r,t)}},i.prototype.hideRows=function(e){this.$_hideRows(e,!0)},i.prototype.showRows=function(e){this.$_hideRows(e,!1)},i.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&(this._hiddenIds=[],this.fireRowHided([],!1))},i.prototype.getHiddenRows=function(){for(var e=[],t=0,o=this._hiddenIds.length;t<o;t++){var r=this._rowIds.indexOf(this._hiddenIds[t]);r>=0&&e.push(r)}return e.sort(function(n,s){return n-s}),e},i.prototype.isHiddenRow=function(e){var t=this._rowIds[e];return this._hiddenIds.indexOf(t)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenIds.length},enumerable:!1,configurable:!0}),i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(Na),j_=function(a){function i(e){var t=a.call(this)||this;return t._tags=new Array,t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.add=function(e){if(e){var t=this._tags||(this._tags=[]);t.indexOf(e)<0&&t.push(e),e.connect(this._owner)}},i.prototype.remove=function(e){if(e&&this._tags){var t=this._tags.indexOf(e);t>=0&&(this._tags.splice(t,1),e.disconnect())}},i.prototype.clearRows=function(){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].clearRows()},i.prototype.setRows=function(){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].setRows()},i.prototype.addRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].addRow(e)},i.prototype.addRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].addRows(e)},i.prototype.removeRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].removeRow(e)},i.prototype.removeRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].removeRows(e)},i.prototype.updateRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].updateRow(e)},i.prototype.updateRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].updateRows(e)},i}(me),Pe=function(){function a(){}return a.parse=function(i){return new window.DOMParser().parseFromString(i,"text/xml")},a.toString=function(i){return new window.XMLSerializer().serializeToString(i)},a.getNodeValue=function(i){return i.firstChild.nodeValue},a.getAttr=function(i,e){return i.getAttribute(e)},a.setAttr=function(i,e,t){i.setAttribute(e,t)},a.addChild=function(i,e,t){var o=i.createElement(t);return e.appendChild(o),o},a.addChildWithAttr=function(i,e,t,o,r){var n=i.createElement(t);return n.setAttribute(o,r),e.appendChild(n),n},a.addChildWithValue=function(i,e,t,o){var r=i.createElement(t);return r.nodeValue=o,e.appendChild(r),r},a.parseXml=function(i){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(i)}catch(t){if(e)throw t;e=new window.DOMParser().parseFromString(i,"text/xml")}return e},a}();function nh(a,i){var e=[];if(a){var t=a.childNodes;if(t)for(var o=0,r=t.length;o<r;o++){var n=t[o];n.tagName===i&&e.push(n)}}return e}var fs,Br=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.extractJson=function(e,t){var o=e;if(t=t&&t.trim())for(var r=t.split("."),n=0;n<r.length;n++){var s=r[n]&&r[n].trim();if(s){var l=s.indexOf("["),u=s.lastIndexOf("]");if(l>0&&u>l){var h=s.substring(0,l),d=h!="$"?o[h]:o;if(Array.isArray(d)){h=s.substring(l+1,u);var p=parseInt(h);o=p>=0&&p<d.length?d[p]:null}else o=null}else s!="$"&&(o=o[s]);if(!o)break}}return Array.isArray(o)?o:null},i.extractXml=function(e,t){var o=null;if(t=t&&t.trim())for(var r=t.split("."),n=0;n<r.length;n++){var s=r[n]&&r[n].trim();if(s){var l=s.indexOf("["),u=s.lastIndexOf("]");if(l>0&&u>l){var h=s.substring(0,l);(o=nh(o?o[0]:e,h))&&(h=s.substring(l+1,u),o=o[parseInt(h)])}else o=nh(o?o[0]:e,s);if(!o)break}}return o},i}(me);c.DataFillMode=void 0,(fs=c.DataFillMode||(c.DataFillMode={})).SET="set",fs.APPEND="append",fs.INSERT="insert",fs.UPDATE="update";var sh,Va,Xi=function(a){function i(e){var t=a.call(this)||this;if(t.fillMode=c.DataFillMode.SET,t.fillPos=0,t.count=-1,t.rootArray=!0,t.rows="row",t.start=0,t.delimiter=",",t.quoted=!1,t.parentId=0,t.childrenField=null,t.treeField=null,t.iconField=null,t.needSorting=!1,t.noStates=!1,e){for(var o in e)e[o]!=null&&(t[o]=e[o]);t.parentId=e.parentId||e.parent,t.childrenField=e.childrenField||e.children,t.treeField=e.treeField||e.tree,t.iconField=e.iconField||e.icon,t.needSorting=e.needSorting||e.sorting}return t}return w(i,a),i}(me),H_=function(a){function i(e){var t=a.call(this)||this;return t._provider=e,t}return w(i,a),i.prototype._doDispose=function(){this._provider=null},i.prototype.load=function(e,t,o){var r=new Xi(o);if(this._checkEmpty(t,r))return 0;var n=this._provider.checkStates;r.noStates&&(this._provider.checkStates=!1);try{switch(e){case"json":return this._loadJson(t,r);case"xml":return this._loadXml(t,r);case"csv":return this._loadCsv(t,r)}}finally{this._provider.checkStates=n,this._provider.fireDataLoadComplated()}},i.prototype._loadJson=function(e,t){typeof e=="string"&&(e=JSON.parse(e));var o=null;if(t.rootArray&&(o=v.isArray(e)?e:null),o||(o=Br.extractJson(e,t.rows)),o){var r=t.fillPos,n=t.start,s=t.count;switch(t.fillMode){case c.DataFillMode.APPEND:this._provider.appendRows(o,n,s);break;case c.DataFillMode.INSERT:this._provider.insertRows(r,o,n,s);break;case c.DataFillMode.UPDATE:this._provider.updateRows(r,o,n,s,!1);break;case c.DataFillMode.SET:default:this._provider.setRows(o,n,s)}return o.length}return this._fillEmpty(t),0},i.prototype._loadXml=function(e,t){if(typeof e=="string"&&(e=Pe.parse(e)),e&&e.documentElement){var o=t.fillPos,r=t.start,n=t.count,s=t.rows,l=Br.extractXml(e.documentElement,s);switch(t.fillMode){case c.DataFillMode.APPEND:this._provider.appendXmlRows(l,r,n);break;case c.DataFillMode.INSERT:this._provider.insertXmlRows(o,l,r,n);break;case c.DataFillMode.UPDATE:this._provider.updateXmlRows(o,l,r,n);break;case c.DataFillMode.SET:default:this._provider.setXmlRows(l,r,n)}return l.length}return this._fillEmpty(t),0},i.prototype._loadCsv=function(e,t){var o=t.fillPos,r=t.start,n=t.count,s=t.quoted,l=t.delimiter,u=mr.csvToArray(this._provider,e,r,n,s,l);if(u&&(n=u.length)>0){switch(t.fillMode){case c.DataFillMode.APPEND:this._provider.appendRows(u,0,n);break;case c.DataFillMode.INSERT:this._provider.insertRows(o,u,0,n);break;case c.DataFillMode.UPDATE:this._provider.updateRows(o,u,0,n,!1);break;case c.DataFillMode.SET:default:this._provider.setRows(u,0,n)}return u.length}return this._fillEmpty(t),0},i.prototype._fillEmpty=function(e){e.fillMode===c.DataFillMode.SET&&this._provider.setRows(null)},i.prototype._checkEmpty=function(e,t){return!e&&(this._fillEmpty(t),!0)},i}(me),ah=function(a){function i(e,t){var o=a.call(this)||this;return o._rowCount=0,o._ds=e,o._rootRow=t,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._ds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!1,configurable:!0}),i.prototype._prepareLoad=function(e){this._rowCount=0,this._rows=[]},i.prototype._createRow=function(e,t,o){return this._ds.createRow(o,isNaN(o[t])?-1:o[t],o[e],!1)},i.prototype._createRow2=function(e,t,o){return this._ds.createRow(o,t,e,!1)},i.prototype._rowAdded=function(e,t){this._rowCount++,this._rows&&t.parent===e&&this._rows.push(t)},i.prototype._addRow=function(e,t,o,r,n){var s=this._createRow(o,r,n);return t._insertChild(t.count,s,!0,!0),this._rowAdded(e,s),s},i.prototype._addRow2=function(e,t,o,r,n){var s=this._createRow2(o,r,n);return t._insertChild(t.count,s,!0,!0),this._rowAdded(e,s),s},i}(me),ja=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype._loadData=function(e,t,o,r,n,s){if(this._prepareLoad(t),!e||e.length<1)return this._rowCount;for(var l=this.provider,u=e.length,h=[],d=new Array(e.length),p=0;p<u;p++)if(h[p]=p,Array.isArray(e[p])){if(Array.isArray(e[p]))for(var f=d[p]=new Array(l.fieldCount),g=0,m=l.fieldCount;g<m;g++)f[g]=e[p][g]}else d[p]=this.provider.objectToRow(e[p]);r&&this.$_sortRows(h,d,o,0,u-1),l.beginUpdate();try{this.$_buildTree(t||this.rootRow,h,d,o,n,s)}finally{l.endUpdate(!1)}return this.insertedCount},i.prototype.$_sortRows=function(e,t,o,r,n){function s(p,f){var g=t[p][o],m=t[f][o];return g==m?0:g<m?-1:1}do{var l=r,u=n,h=e[Math.floor((r+n)/2)];do{for(;!(s(h,e[l])<=0);)l++;for(;!(s(h,e[u])>=0);)u--;if(l<=u){if(l!=u){var d=e[l];e[l]=e[u],e[u]=d}l++,u--}}while(l<=u);r<u&&this.$_sortRows(e,t,o,r,u),r=l}while(r<n)},i.prototype.$_buildTree=function(e,t,o,r,n,s){function l(m,b,C,x){for(var E=x[r];b!=e;){var S=b.getValue(r);if(m.parentCallback){if(m.parentCallback(S,E))return b}else if(E.indexOf(S)==0)return b;b=b.parent}return e}var u=t[0],h=this._createRow(n,s,o[u]),d=l(this,e,0,o[u]);if(d._insertChild(d.count,h,!0,!0),this._rowAdded(e,h),t.length>1)for(var p=t.length,f=h,g=1;g<p;g++)u=t[g],h=this._createRow(n,s,o[u]),(d=l(this,f,0,o[u]))._insertChild(d.count,h,!0,!0),this._rowAdded(e,h),f=h},i}(ah),lh=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.load=function(e,t,o,r,n,s){return this._loadData(t,e,o,r,n,s)},i}(ja),uh=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.load=function(e,t,o,r,n,s){var l=mr.csvToArray(this.provider,t);return this._loadData(l,e,o,r,n,s)},i}(ja),Ha=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.load=function(e,t,o,r,n){if(this._prepareLoad(e),t){var s=Br.extractJson(t,o);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,e||this.rootRow,s,o,r,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},i.prototype.load2=function(e,t,o,r,n,s){if(this._prepareLoad(e),t){var l=Br.extractJson(t,o);if(l&&l.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,e||this.rootRow,l,r,n,s)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},i.prototype.$_buildJsonTree=function(e,t,o,r,n,s){var l=e.getOrgFieldNames();(function u(h,d,p,f){for(var g=f.length,m=0,b=p.length;m<b;m++){for(var C=p[m],x=new Array(g),E=0;E<g;E++){var S=f[E];C.hasOwnProperty(S)&&(x[E]=C[S])}var P=h._addRow(t,d,n,s,x);if(C.hasOwnProperty(r)){var R=C[r];Array.isArray(R)&&R.length>0&&u(h,P,R,f)}}})(this,t,o,l)},i.prototype.$_buildJsonTree2=function(e,t,o,r,n,s){var l=e.getOrgFieldNames();(function u(h,d,p,f){for(var g=f.length,m=0,b=p.length;m<b;m++){for(var C=p[m],x=new Array(g),E=0;E<g;E++){var S=f[E];C.hasOwnProperty(S)&&(x[E]=C[S])}var P=h._addRow2(t,d,C[n],isNaN(C[s])?-1:C[s],x);if(C.hasOwnProperty(r)){var R=C[r];Array.isArray(R)&&R.length>0&&u(h,P,R,f)}}})(this,t,o,l)},i}(ah),hh=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.load=function(e,t,o,r,n){if(this._prepareLoad(e),t){var s=typeof t=="string"?Pe.parseXml(t):t;if(s){var l=Br.extractXml(s.documentElement,o);if(l&&l.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,e||this.rootRow,l,o,r,n)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},i.prototype.$_buildXmlTree=function(e,t,o,r,n,s){(function l(u,h,d,p,f){for(var g=0,m=d.length;g<m;g++){var b=d[g],C=mr.xmlToRow(b,p,f),x=u._addRow(t,h,n,s,C),E=Br.extractXml(b,r);E&&E.length>0&&l(u,x,E,p,f)}})(this,t,o,e.getFields(),e.getOrgFieldNames())},i}(ja),_s=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i}(oh),G_=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i}(Ba),W_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._values=n._cloneRow(o),n._strict=r,n}return w(i,a),i.prototype._doRun=function(e){var t={};return t.row=this._row._keepRow(e),(t.result=this._row.$_update(e,this._values,this._strict,!1))&&(this._newState=this._row.rowState),t},i.prototype._doRedo=function(e,t){this._row.$_update(e,this._values,this._strict,!1)},i.prototype._doUndo=function(e,t){this._row._yieldRow(e,t.row),t.row.state!=this._newState&&e._fireRowStateChanged(this._row,!1),e._rowUpdated(this._row)},i}(_s),$r=function(a){function i(e){var t=a.call(this)||this;return t._children=null,t._descendantCount=0,t._rowId=e&&e._nextRowId++,t}return w(i,a),i.getRowIds=function(e){if(!e)return null;for(var t=[],o=0,r=e;o<r.length;o++){var n=r[o];t.push(n.rowId)}return t},i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowId",{get:function(){return this._rowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"provider",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){var e=this.parent;return e!=null?e._children.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return-1},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendants",{get:function(){if(this._children){var e=[];return function t(o,r){for(var n=0,s=o.count;n<s;n++){var l=o.getChild(n);r.push(l),t(l,r)}}(this,e),e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ancestors",{get:function(){var e=null,t=this.parent;if(t)for(e=[];t&&t.rowId>=0;)e.push(t),t=t.parent;return e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return c.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getChild=function(e){if(e>=0){if(!this._children||e>=this._children.length)throw new RangeError("Index is invalid: "+e);return this._children[e]}throw new RangeError("Index is invalid: "+e)},i.prototype.getChildObjects=function(e,t,o,r,n,s){s===void 0&&(s=-1);var l=this._children;if(l){var u=[];t=t||"rows",o=o||"iconIndex";for(var h=0,d=l.length;h<d;h++){var p=l[h],f=p.getObject();r&&(f.__rowId=p._rowId),n&&(f.__rowState=p.rowState),e&&s!==0&&(f[t]=p.getChildObjects(e,t,o,r,n,s-1)),f[o]=p.iconIndex,u.push(f)}return u}return null},i.prototype.$_createTreeOutputRows=function(e,t,o){var r=[];(function D(F,H,N){for(var V=0,j=F.length;V<j;V++){var K=F[V];H.push(F[V]),N&&K[N]&&K[N].length&&D(K[N],H,N)}})(e,r,o);var n,s=this.provider,l=s.fieldCount,u=r.length;t instanceof Fr||(t=new Fr(t));for(var h=t.nullDateText,d=t.nullText,p=t.nanText,f=this.provider.handler,g=0;g<l;g++){var m=s.getField(g),b=m.orgFieldName,C=void 0,x=void 0;if(m.dataType==c.ValueType.DATETIME&&((C=t.datetimeCallback)||(x=t.datetimeWriter)||h!=null&&h!=null))if(C)for(var E=0;E<u;E++)(n=r[E])[b]=C(f,n._rowId,b,n[b]);else for(E=0;E<u;E++){var S=(n=r[E])[b];n[b]=S?x?x.getText(n[b]):S:h}else if(m.dataType==c.ValueType.BOOLEAN&&((C=t.booleanCallback)||(x=t.booleanFormatter)))if(C)for(E=0;E<u;E++)(n=r[E])[b]=C(f,n._rowId,b,n[b]);else for(E=0;E<u;E++)(n=r[E])[b]=x.formatValue(n[b]);else if(m.dataType==c.ValueType.NUMBER&&((C=t.numberCallback)||(x=t.numberFormatter)||p!=null&&p!=null))if(C)for(E=0;E<u;E++)(n=r[E])[b]=C(f,n._rowId,b,n[b]);else for(E=0;E<u;E++){var P=(n=r[E])[b];n[b]=P==null||isNaN(P)?p:x?x.getText(P):P}else if(d!=null&&d!=null)for(E=0;E<u;E++)P=(n=r[E])[b],n[b]=P==null||P==null?d:P}for(var R=0,k=r.length;R<k;R++)delete r[R]._rowId},i.prototype.getOutput=function(e,t){if(e){var o=this.getObject();return o&&(o[t||"iconIndex"]=this.iconIndex,o._rowId=this._rowId,e.rowState&&(o.__rowState=this.rowState),this.$_createTreeOutputRows([o],e)),o}return null},i.prototype.getChildOutputObjects=function(e,t,o,r){var n=this.getChildObjects(t,o,r,!0,e==null?void 0:e.rowState);return n&&e&&this.$_createTreeOutputRows(n,e,o),n},i.prototype.findById=function(e){if(this._children)for(var t=0,o=this._children.length;t<o;t++){var r=this._children[t];if(r.rowId==e||(r=r.findById(e)))return r}return null},i.prototype.indexOf=function(e){return this._children?this._children.indexOf(e):-1},i.prototype.insertChild=function(e,t,o){return this._insertChild(e,t,!1,o)},i.prototype.addChild=function(e,t){return this._insertChild(this.count,e,!1,t)},i.prototype.insertChildren=function(e,t,o){return this._insertChildren(e,t,!1,o)},i.prototype.removeChild=function(e,t){return this._removeChild(e,!1,t)},i.prototype.clearChildren=function(){var e=this.provider;e&&!e._checkClientState()||this._removeChildren()},i.prototype.findChild=function(e,t){var o=this.provider;if(!o||!e||e.length<1||!t||t.length<e.length)return null;for(var r=[],n=[],s=0,l=e.length;s<l;s++){var u=void 0;(u=typeof e[s]=="string"?o.getFieldIndex(e[s]):Number(e[s]))>=0&&u<o.fieldCount&&r.indexOf(u)<0&&(r.push(u),n.push(t[s]))}s=0;for(var h=r.length;s<h;s++)r[s]=o.getField(r[s]);return this.$_findChild(r,n)},i.prototype.isAncestorOf=function(e){if(e&&e!==this){for(var t=e.parent;t&&t!==this;)t=t.parent;return t===this}return!1},i.prototype.clearRowStates=function(e,t){var o=this.provider;if(o){var r=[],n=e?[]:null;this._collectStateRows(r,n);var s=r.length,l=n?n.length:0;if(s!=0||l!=0){if(t)for(var u=0,h=r.length;u<h;u++)r[u]._changeRowState(c.RowState.NONE,!0,!1);else s&&o.changeRowStates(r,c.RowState.NONE);l&&o.deleteRows(n)}}},i.prototype.toTreeString=function(){for(var e=this.rowId+"",t=new Array(this.level+1).join("  "),o=0;o<this.count;o++)e+=`
`+t+this.getChild(o).toTreeString();return e},i.prototype._checkFieldIndex=function(e){var t=this.provider.fieldCount;if(e<0||e>=t)throw new Ki(ye.messages.fieldIndexOutOfBounds+e)},i.prototype._descendantCountChanged=function(e){this._descendantCount+=e;var t=this.parent;t&&t._descendantCountChanged(e)},i.prototype._moveChild=function(e,t){if(e!=t){if(e<0||e>=this._children.length)throw new RangeError("index is out of range: "+e);if(t<0||t>=this._children.length)throw new RangeError("newIndex is out of range: "+t);var o=this._children[e];if(e>t)for(var r=e;r>t;r--)this._children[r]=this._children[r-1];else for(r=e;r<t;r++)this._children[r]=this._children[r+1];this._children[t]=o}},i.prototype._moveChildren=function(e,t){var o=e[0];if(o!=t){if(o<0||o>=this._children.length)throw new RangeError("index is out of range: "+e[0]);if(t<0||t>=this._children.length)throw new RangeError("newIndex is out of range: "+t);for(var r=this._children,n=[],s=e.length-1;s>=0;s--)n.push(r.splice(e[s],1)[0]);for(s=0;s<n.length;s++)r.splice(t,0,n[s])}},i.prototype._changeParent=function(e,t){if(t<0||t>e._children.length)throw new RangeError("index is out of range: "+t);var o=this.parent,r=this.index;o._children.splice(r,1),o._descendantCountChanged(-1-this.descendantCount),o._detach(this),e._children.splice(t,0,this),e._descendantCountChanged(1+this.descendantCount),e._attach(this)},i.prototype._insertChild=function(e,t,o,r){var n=this.provider;if(n&&!o){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(!t)throw new Error("child is null");if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return!(!o&&!this._doChildAdding(e,t))&&(this._children.splice(e,0,t),this._descendantCountChanged(1+t.descendantCount),this._attach(t),r||t._changeRowState(c.RowState.CREATED,!0,!1),this._doChildAdded(e,t),!0)},i.prototype._insertChildren=function(e,t,o,r){var n=this.provider;if(n&&!o){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);if(o||this._doRowsAdding(e,t)){for(var s=0,l=0;l<t.length;l++){var u=t[l];this._children.splice(e+l,0,u),this._attach(u),s+=u.descendantCount,r||u._changeRowState(c.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(e,t),!0}return!1},i.prototype._addChild=function(e,t,o){return this._insertChild(this.count,e,t,o)},i.prototype.$_removeChild=function(e,t,o){return!(!o&&!this._doChildRemoving(e))&&(this._children.splice(t,1),this._descendantCountChanged(-1-e.descendantCount),this._detach(e),this._doChildRemoved(e),!0)},i.prototype._removeChild=function(e,t,o){var r=this.provider;if(!r||t||r._checkClientState()){if(e&&this._children){var n=this._children.indexOf(e);if(!r.softDeleting||!r.checkStates)return this.$_removeChild(e,n,t);switch(e.rowState){case c.RowState.CREATED:if(r.deleteCreated)return this.$_removeChild(e,n,t);e._changeRowState(c.RowState.CREATE_AND_DELETED,!0,!1);break;case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:break;default:e._changeRowState(c.RowState.DELETED,!0,!1)}if(o&&e.count>0)for(var s=e.children,l=e.count;l--;)e._removeChild(s[l],t,o)}return!1}},i.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},i.prototype._setChildren=function(e){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var t,o=-this._descendantCount;if(e&&(t=e.length)>0){this._children||(this._children=[]);for(var r=0;r<t;r++){var n=e[r];this._children.push(n),o+=1+n.descendantCount,this._attach(n)}}this._descendantCountChanged(o)},i.prototype.$_findChild=function(e,t){for(var o=e.length,r=this.count,n=0;n<r;n++){for(var s=this._children[n],l=!0,u=0;u<o;u++)if(!e[u].equalValues(t[u],s.getValue(e[u].index))){l=!1;break}if(l||(s=s.$_findChild(e,t)))return s}return null},i.prototype._collectStateRows=function(e,t){for(var o=this.count;o--;){var r=this.getChild(o),n=r.rowState;!t||n!=c.RowState.DELETED&&n!=c.RowState.CREATE_AND_DELETED?(n!=c.RowState.NONE&&e.push(r),r._collectStateRows(e,t)):t.push(r)}},i.prototype._clearOrgValues=function(){for(var e=this.count;e--;)this.getChild(e)._clearOrgValues()},i.prototype._restoreState=function(e,t){if(e)for(var o=this.count;o--;)this.getChild(o)._restoreState(!0,t);return!1},i.prototype.$_restoreRow=function(e,t){if(e)for(var o=this.count;o--;)this.getChild(o).$_restoreRow(!0,t);return!1},i.prototype._doChildAdding=function(e,t){var o=this.provider;return!o||o._rowAdding(this,e,t)},i.prototype._doChildAdded=function(e,t){var o=this.provider;o&&o._rowAdded(t)},i.prototype._doRowsAdding=function(e,t){var o=this.provider;return!o||o._rowsAdding(this,e,t)},i.prototype._doRowsAdded=function(e,t){var o=this.provider;o&&o._rowsAdded(this,t)},i.prototype._doChildRemoving=function(e){var t=this.provider;return!t||t._rowRemoving(e)},i.prototype._doChildRemoved=function(e){var t=this.provider;t&&t._rowRemoved(e)},i.prototype._doCleared=function(){var e=this.provider;e&&e._rowCleared(this)},i}(me),Ga=function(a){function i(e){var t=a.call(this,e)||this;return t._provider=e,t}return w(i,a),i.prototype._doDispose=function(){this._provider=null,a.prototype._doDispose.call(this)},i.prototype.set=function(e){for(var t=[],o=0;o<e.count;o++)t.push(e.getChild(o).copy());this._setChildren(t)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.copy=function(){for(var e=new i(null),t=0,o=this.count;t<o;t++){var r=this.getChild(t).copy();e._addChild(r,!0,!0)}return e._provider=this._provider,e},i.prototype._changeRowState=function(e,t,o){return!1},i.prototype.getObject=function(){return null},i.prototype.getValue=function(e){},i.prototype.setValue=function(e,t,o){return!1},i.prototype._attach=function(e){e._parent=this},i.prototype._detach=function(e){e._parent===this&&(e._parent=null)},i.prototype.update=function(e,t){return!1},i.prototype.$_setHasChildren=function(e){},i.prototype.$_setIconIndex=function(e){},i.prototype._keepRow=function(e){},i.prototype._yieldRow=function(e,t){},i.prototype._keepStates=function(e){},i.prototype._yieldStates=function(e,t){},i}($r),U_=function(a){function i(){var e=a.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}return w(i,a),i.prototype._doDispose=function(){this._fireDispose(),a.prototype._doDispose.call(this)},i.prototype.editCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},i.prototype.registerCommandListener=function(e){e&&this._commandListeners.indexOf(e)<0&&this._commandListeners.push(e)},i.prototype.unregisterCommandListener=function(e){var t=this._commandListeners.indexOf(e);t>=0&&this._commandListeners.splice(t,1)},i.prototype._keepCommandStates=function(e){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(e)},i.prototype._yieldCommandStates=function(e,t){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(e,t)},i.prototype._fireDispose=function(){this.fireEvent("onTreeDataProviderDisposed")},i}(eh),z_=function(a){function i(e,t,o){var r=a.call(this,e)||this;return r._rowFields=v.deepCopy(t),r._value=o,r}return w(i,a),i.prototype._doRun=function(e){var t=e,o={};for(var r in this._rowFields){var n=t.rowById(+r)._keepRow(t);o[r]=n}return t.$_fillValue(this._rowFields,this._value),o},i.prototype._doRedo=function(e,t){e.$_fillValue(this._rowFields,this._value)},i.prototype._doUndo=function(e,t){var o=e;for(var r in this._rowFields)o.rowById(+r)._yieldRow(e,t[r]);e._fireRefresh()},i}(_s),Y_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._rows=t.slice(),n._values=n._cloneValues(o.slice()),n}return w(i,a),i.prototype._doRun=function(e){for(var t=e,o=[],r=0,n=this._rows;r<n.length;r++){var s=n[r]._keepRow(t);o.push(s)}return t.$_updateRows(this._rows,this._values,this._strict),o},i.prototype._doRedo=function(e,t){e.$_updateRows(this._rows,this._values,this._strict)},i.prototype._doUndo=function(e,t){for(var o=0;o<this._rows.length;o++)this._rows[o]._yieldRow(e,t[o]);e._fireRefresh()},i}(_s),q_=function(a){function i(e,t,o,r){var n=a.call(this,e)||this;return n._row=t,n._field=o,n._value=r instanceof Date?new Date(r):r,n}return w(i,a),i.prototype._doRun=function(e){var t={};return t.row=this._row._keepRow(e),(t.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),t},i.prototype._doRedo=function(e,t){this._row.$_setValue(this._field,this._value,!1)},i.prototype._doUndo=function(e,t){this._row._yieldRow(e,t.row),t.row.state!=this._newState&&e._fireRowStateChanged(this._row),e._valueChanged(this._row,this._field)},i}(_s),Wa=function(a){function i(e,t){var o=a.call(this,e)||this;if(o._iconIndex=-1,o._hasChildren=!1,o._parent=null,o._values=null,o._orgValues=null,o._state=c.RowState.NONE,e&&t){var r=e.fieldCount;o._values=new Array(r);for(var n=0,s=Math.min(t.length,r);n<s;n++)o._values[n]=e.getField(n).readValue(t[n])}return o}return w(i,a),i.prototype._doDispose=function(){this._values=null,this._orgValues=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(e){if(e!=this._hasChildren){this._hasChildren=e;var t=this.provider;t&&t._hasChildrenChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(e){if(isNaN(e)&&(e=-1),e!=this._iconIndex){this._iconIndex=e;var t=this.provider;t&&t._iconIndexChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values&&this._values.slice()},enumerable:!1,configurable:!0}),i.prototype._attach=function(e){e._parent=this},i.prototype._detach=function(e){e._parent===this&&(e._parent=null)},i.prototype._changeRowState=function(e,t,o){var r=this.provider;if(r&&e!=this._state){var n=this._state;return this._state=e,e==c.RowState.UPDATED&&r._needOrgValues?this._orgValues=this._values.concat():n==c.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),t&&r._stateChanged(this,o),!0}return!1},i.prototype.getValue=function(e){if(this.provider){if(this._checkFieldIndex(e),this._values)return this._values[e];throw new Error("Row data is not loaded")}},i.prototype.setValue=function(e,t,o){var r=this.provider;return!!r&&(r.undoable?r._commands.execute(new q_(r,this,e,t)):this.$_setValue(e,t,o))},i.prototype.getObject=function(){var e=this.provider;if(e){for(var t=e.fieldCount,o={},r=0;r<t;r++)o[e.getOrgFieldName(r)]=this._values[r];return o}return null},i.prototype.copy=function(){var e=new i(null,null);e._rowId=this._rowId,e._iconIndex=this._iconIndex,e._hasChildren=this._hasChildren,e._state=this._state,e._values=this._values?this._values.concat():null;for(var t=0,o=this.count;t<o;t++){var r=this.getChild(t).copy();e._addChild(r,!0,!0)}return e},i.prototype.update=function(e,t){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new W_(o,this,e,t)):this.$_update(o,e,t,!1))},i.prototype._keepRow=function(e){var t={};return t.values=this._values&&this._values.slice(),t.state=this._state,t.orgValues=this._orgValues&&this._orgValues.slice(),t.outer=e._keepCommandStates(this),t},i.prototype._yieldRow=function(e,t){this._values=t.values&&t.values.slice(),this._state=t.state,this._orgValues=t.orgValues&&t.orgValues.slice(),e._yieldCommandStates(this,t.outer)},i.prototype._keepStates=function(e){},i.prototype._yieldStates=function(e,t){},i.prototype._keepState=function(){return this._state},i.prototype._yieldState=function(e){this._state=e},i.prototype.$_setValue=function(e,t,o){var r=this.provider;if(r){if(!r._checkClientState())return;if(r.refreshFieldFormats(),this._checkFieldIndex(e),this._values){if(t!=this._values[e]){var n=null,s=r.getField(e),l=r.checkStates&&(this._state==c.RowState.NONE||!this._state);!o&&l&&r._needOrgValues&&(n=this._values.concat()),this._values[e]=s.readValue(t),r._internalCalculateValues(this._values,this.rowId),!o&&l?(r._needOrgValues&&(this._orgValues=n),this._state=c.RowState.UPDATED,r._stateChanged(this,!1)):r._needRestore&&this.$_restoreState(r),r._valueChanged(this,e)}return!0}throw new Error("Row data is not loaded")}},i.prototype.$_update=function(e,t,o,r){if(!r){if(!e._checkClientState())return;e.refreshFieldFormats()}return!(!t||!r&&!e._rowUpdating(this))&&(this.$_internalUpdate(t,o,!0),e._rowUpdated(this),!0)},i.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),a.prototype._clearOrgValues.call(this)},i.prototype._restoreState=function(e,t){var o=this.$_restoreState(this.provider);return o&&t&&t.push(this),a.prototype._restoreState.call(this,e,t),o},i.prototype.$_restoreRow=function(e,t){var o=!1;if(this._state===c.RowState.UPDATED){var r=this._orgValues;if(r){for(var n=this._values,s=0,l=Math.min(r.length,this.provider.fieldCount);s<l;s++)n[s]=r[s];this._state=c.RowState.NONE,t&&t.push(this),o=!0}}return a.prototype.$_restoreRow.call(this,e,t),o},i.prototype.$_restoreState=function(e){if(this._state==c.RowState.UPDATED&&this._orgValues){for(var t=this._orgValues,o=this._values,r=this.provider,n=r.strictRestore,s=0,l=r.fieldCount;s<l;s++){var u=o.length>s?o[s]:void 0,h=t.length>s?t[s]:void 0;if(n){if(!r.getField(s).equalValues(u,h))return!1}else if(!r.getField(s).sameValues(u,h))return!1}return this._state=c.RowState.NONE,!0}return!1},i.prototype.$_getUpdatedCells=function(){var e=this._orgValues,t=this._values,o=this.provider,r=o.strictRestore,n=[];if(!e||e.length<=0)return null;for(var s=0,l=o.fieldCount;s<l;s++){var u=t.length>s?t[s]:void 0,h=e.length>s?e[s]:void 0,d=o.getField(s);d.calculated||(r?d.equalValues(u,h)||n.push({fieldName:o.getOrgFieldName(s),oldValue:e[s],newValue:t[s]}):d.sameValues(u,h)||n.push({fieldName:o.getOrgFieldName(s),oldValue:e[s],newValue:t[s]}))}return n},i.prototype.$_setHasChildren=function(e){this._hasChildren=e},i.prototype.$_setIconIndex=function(e){this._iconIndex=isNaN(e)?-1:e},i.prototype.$_internalUpdate=function(e,t,o){var r=!1,n=Array.isArray(e),s=this.provider;if(s){var l=Math.min(s.fieldCount,n?e.length:s.fieldCount),u=s.checkStates&&(this._state==c.RowState.NONE||!this._state),h=null;u&&s._needOrgValues&&(h=this._values.concat());for(var d=0;d<l;d++){var p=s.getField(d);if(n||e.hasOwnProperty(p.orgFieldName)){var f=n?e[d]:e[p.orgFieldName];t&&f===void 0||(r=!s._needRestore||r||(t?!p.equalValues(this._values[d],p.readValue(f)):!p.sameValues(this._values[d],p.readValue(f))),this._values[d]=s.getField(d).readValue(f))}}s._internalCalculateValues(this._values,this.rowId),u&&r?(h&&(this._orgValues=h),this._state=c.RowState.UPDATED,o&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},i}($r),gs=function(a){function i(e,t){var o=a.call(this)||this;return o._countDirty=!1,o._tagLock=!1,o._points=[],o._nextPoint=0,o._rowMap=[],o._needOrgValues=!1,o._needRestore=!1,o._checkParentProc=null,o._hiddenRows=[],o.$_handler=t,e&&(o._commands=new G_(o)),o._rootRow=new Ga(o),o._tags=new j_(o),o}return w(i,a),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=this._rowMap=this._hiddenRows=[],this._rootRow.clearChildren(),this._tags=this._tags&&this._tags.dispose(),a.prototype._doDispose.call(this),this._rootRow=null},Object.defineProperty(i.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(e){this._parentCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(e){e!=this.undoable&&(this._undoable=e,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),i.prototype.addTag=function(e){this._tags&&this._tags.add(e)},i.prototype.removeTag=function(e){this._tags&&this._tags.remove(e)},i.prototype.setRows=function(e,t,o,r,n){if(!this._checkClientState())return-1;var s=0,l=this.getFieldIndex(t);if(l>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var u=new lh(this,this._rootRow);u.parentCallback=this._parentCallback,s=u.load(null,e,l,o,this.getFieldIndex(r),this.getFieldIndex(n)),this._checkSum(s),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},i.prototype.setCsvRows=function(e,t,o,r,n){if(!this._checkClientState())return-1;var s=0,l=this.getFieldIndex(t);if(l>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var u=new uh(this,this._rootRow);u.parentCallback=this._parentCallback,s=u.load(null,e,l,o,this.getFieldIndex(r),this.getFieldIndex(n)),this._checkSum(s),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},i.prototype.setXmlRows=function(e,t,o,r){if(!this._checkClientState())return-1;var n=0;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),n=new hh(this,this._rootRow).load(null,e,t,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setJsonRows=function(e,t,o,r){if(!this._checkClientState())return-1;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new Ha(this,this._rootRow);this._rowCount=n.load(null,e,t,this.getFieldIndex(o),this.getFieldIndex(r)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.setJsonRows2=function(e,t,o,r,n){if(!this._checkClientState())return-1;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new Ha(this,this._rootRow);this._rowCount=s.load2(null,e,t,o,r,n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.appendDataRows=function(e,t,o,r,n,s){if(!this._checkClientState())return-1;var l=0,u=this.getFieldIndex(o);if(u>=0){var h=new lh(this,this._rootRow);h.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),l=h.load(e,t,u,r,this.getFieldIndex(n),this.getFieldIndex(s))}finally{if(this.endUpdate(!1),l>0){var d=h.insertedRows;d&&(l=d.length)>0&&this._rowsAdded(e,d)}}}return l},i.prototype.appendCsvRows=function(e,t,o,r,n,s){if(!this._checkClientState())return-1;var l=0,u=this.getFieldIndex(o);if(u>=0){this.beginUpdate();try{this.refreshFieldFormats();var h=new uh(this,this._rootRow);h.parentCallback=this._parentCallback,l=h.load(e,t,u,r,this.getFieldIndex(n),this.getFieldIndex(s))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),l},i.prototype.appendXmlRows=function(e,t,o,r,n){if(!this._checkClientState())return-1;var s=0;if(t){var l=new hh(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(e,t,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),s>0){var u=l.insertedRows;u&&(s=u.length)>0&&this._rowsAdded(e,u)}}}return this._fireRowCountChanged(),s},i.prototype.appendJsonRows=function(e,t,o,r,n){if(!this._checkClientState())return-1;var s=0;if(t){var l=new Ha(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(e,t,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),s>0){var u=l.insertedRows;u&&(s=u.length)>0&&this._rowsAdded(e,u)}}}return this._fireRowCountChanged(),s},i.prototype.setIconIndex=function(e,t){return e.iconIndex!=t&&(e.$_setIconIndex(t),!0)},i.prototype.setHasChildren=function(e,t){return t!=e.hasChildren&&(e.$_setHasChildren(t),!0)},i.prototype.getChildCount=function(e){return(e||this._rootRow).count},i.prototype.getRows=function(e){return(e||this._rootRow).children},i.prototype.getDescendantCount=function(e){return(e||this._rootRow).descendantCount},i.prototype.getDescendants=function(e,t){t=arguments.length>1?t:0;var o=e||this._rootRow;if(t<=0)return o.descendants;if(t>o.level){var r=[];return function n(s,l,u){for(var h=0,d=s.count;h<d;h++){var p;l.push(p=s.getChild(h)),u>p.level&&n(p,l,u)}}(o,r,t),r}return null},i.prototype.getChild=function(e,t){return(e||this._rootRow).getChild(t)},i.prototype.hasData=function(e){return this.rowById(e)!=null},i.prototype.rowById=function(e){var t=this._rowMap[e];return t&&t.rowId===e||(t=this._findRowById(e))&&(this._rowMap[e]=t),t},i.prototype.getDataRow=function(e){var t=this._rowMap[e];return t==null&&(t=this._findRowById(e)),t!=null?e:-1},i.prototype.rowsByIds=function(e,t){if(e){for(var o=[],r=0,n=e;r<n.length;r++){var s=n[r],l=this.rowById(s);(l||t)&&o.push(l)}return o}return null},i.prototype.createRow=function(e,t,o,r){r===void 0&&(r=!0);var n=null;if(r&&this.refreshFieldFormats(),Array.isArray(e))n=new Wa(this,e);else if(e){var s=new Array(this.fieldCount);for(var l in e){var u=this.getFieldIndex(l);u>=0&&(s[u]=e[l])}n=new Wa(this,s)}return n&&(this._internalCalculateValues(n._values,n.rowId),n._iconIndex=t,n._hasChildren=o),n},i.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},i.prototype.removeRows=function(e,t){for(var o=[],r=e.length;r--;)(u=this.rowById(e[r]))&&o.push(u);function n(p,f){for(var g=f;g>=0;g--)if(o[g].isAncestorOf(p))return!1;return!0}if(this._checkClientState()&&o&&!(o.length<1)){o.sort(function(p,f){return p.level-f.level});var s=o;for(r=o.length;r--;)o[r].level>1&&!n(o[r],r-1)&&o.splice(r,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){var l=[];for(r=o.length-1;r>=0;r--){var u,h=!1;switch((u=o[r]).rowState){case c.RowState.CREATED:this.deleteCreated||(h=u._changeRowState(c.RowState.CREATE_AND_DELETED,!1,!1),o.splice(r,1));break;case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:o.splice(r,1);break;default:h=u._changeRowState(c.RowState.DELETED,!0,!1),o.splice(r,1)}if(h&&l.push(u),t&&u.count>0)for(var d=u.count;d--;)u.removeChild(u.children[d],t)}l.length>0&&this._fireRowStatesChanged(l)}return this.deleteRows(s),!0}},i.prototype.changeRowIndex=function(e,t){if(t==0||!this._checkClientState())return!1;var o=e.parent,r=o.children.length,n=e.index,s=Math.min(Math.max(n+t,0),r-1);return(t=s-n)!=0&&!!this._fireRowSiblingMoving(e,t)&&(o._moveChild(n,s),this._fireRowSiblingMoved(e,t),!0)},i.prototype.changeRowsIndex=function(e,t){if(t==0||!this._checkClientState())return!1;var o=e[0].parent,r=o.children.length,n=e[0].index,s=Math.min(Math.max(n+t,0),r-1);if((t=s-n)==0)return!1;for(var l=[],u=0,h=e;u<h.length;u++){var d=h[u];l.push(d.index)}return!!this._fireRowsSiblingMoving(e,t)&&(o._moveChildren(l,s),this._fireRowsSiblingMoved(e,t),!0)},i.prototype.changeRowParent=function(e,t,o){if(e===t)throw new Error("Parent must not be self.");if(e.isAncestorOf(t))throw new Error("Can`t move to child of a descendant.");var r=e.parent;if(r===t&&o==e.index||!this._checkClientState())return!1;t._children||(t._children=[]);var n=t._children.length;return o=Math.min(Math.max(o,0),n),!!this._fireRowParentChanging(e,t,o)&&(e._changeParent(t,o),t instanceof Ga||this.setHasChildren(t,!0),r instanceof Ga||r.count!=0||this.setHasChildren(r,!1),this._fireRowParentChanged(e,t,o),!0)},i.prototype.moveRows=function(e,t){return this.changeRowsIndex(e,t.index-e[0].index)},i.prototype.toTreeString=function(){return this._rootRow.toTreeString()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(e){e===void 0&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),this._eventLock==0&&(e&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},i.prototype.$_extractTreeRowIds=function(e){if(e){for(var t=e.length,o=new Array(t),r=0;r<t;r++)o[r]=e[r].rowId;return o}return null},i.prototype.$_searchDataRow=function(e,t,o,r,n,s){var l=e.length;if(l<1)return-1;var u=Math.min(t.length,o.length);if(u<1)return-1;for(var h=r.allFields,d=r.caseSensitive,p=r.partialMatch,f=null,g=[],m=r.compareCallback||v.compareTextValue,b=r.reverse,C=0;C<u;C++)g[C]=this.getField(t[C]).dataType;n=Math.max(0,n),s=Math.min(l-1,s);for(var x=n;b?x>=s:x<=s;b?x--:x++){var E=!0;if(E)for(C=0;C<u;C++){var S=this.rowById(e[x]).getValue(t[C]),P=this.getOrgFieldName(t[C]);switch(g[C]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(o[C]instanceof Date)E=m.call(this.$_handler,o[C],S,d,p,e[x],P);else{if(!f){var R=/[.]/.test(o[C])?"yyyy.MM.dd":/[/]/.test(o[C])?"yyyy/MM/dd":/[-]/.test(o[C])?"yyyy-MM-dd":"yyyyMMdd";f=new Lt(R)}E=m.call(this.$_handler,o[C],S&&f.getText(S),d,p,e[x],P)}break;default:E=m.call(this.$_handler,o[C],S,d,p,e[x],P)}if(E&&!h)return e[x];if(!E&&h)break}if(E)return e[x]}return-1},i.prototype.searchDataRow=function(e,t){var o;if(t===void 0&&(t=null),t!=null){var r=this.rowById(t);if(!r)return-1;o=this.$_extractTreeRowIds(r.descendants)}else o=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(o)||o.length<=0)return-1;e instanceof Nr||(e.reverse&&!e.hasOwnProperty("startIndex")&&(e.startIndex=o.length-1),e=new Nr(e));var n=e.reverse,s=o.length,l=Math.max(0,o.indexOf(e.startIndex)),u=e.fields,h=e.values,d=-1;if(u&&u.length>0&&h&&h.length>0){for(var p=u.length,f=[],g=0;g<p;g++){var m=u[g];if(v.isNumber(m))f.push(m);else{var b=this.getFieldIndex(u[g]);b>=0&&f.push(b)}}f.length>0&&(d=(n?l>0:l<s)?this.$_searchDataRow(o,f,h,e,l,n?0:s-1):-1)<0&&e.wrap&&(n?l<s-1:l>0)&&(d=this.$_searchDataRow(o,f,h,e,n?s-1:0,n?l+1:l-1))}return d},i.prototype.$_searchData=function(e,t,o,r,n,s,l){var u=this.rowCount;if(u<1)return null;for(var h=r&&r.caseSensitive,d=r&&r.partialMatch,p=this.fieldCount,f=t.length,g=null,m=[],b=r.reverse,C=r.compareCallback||v.compareTextValue,x=0;x<p;x++)m[x]=this.getField(x).dataType;n=Math.max(0,n),s=Math.min(u-1,s),l=Math.max(0,l),r.reverse?l<0&&(n--,l=t.length-1):l>=t.length&&(n++,l=0);for(var E=n;b?E>=s:E<=s;b?E--:E++)for(x=b?E<n?f-1:l:E>n?0:l;b?x>=0:x<f;b?x--:x++){var S=!1,P=t[x],R=this.getOrgFieldName(t[x]);if(P>=0&&P<p){var k=this.rowById(e[E]).getValue(P);switch(m[P]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(o instanceof Date)S=C.call(this.$_handler,o,k,h,d,e[E],R);else{if(!g){var D=/[.]/.test(o)?"yyyy.MM.dd":/[/]/.test(o)?"yyyy/MM/dd":/[-]/.test(o)?"yyyy-MM-dd":"yyyyMMdd";g=new Lt(D)}S=C.call(this.$_handler,o,k&&g.getText(k),h,d,e[E],R)}break;default:S=C.call(this.$_handler,o,k,h,d,e[E],R)}if(S)return{dataRow:e[E],fieldIndex:P,searchFieldIndex:x,fieldName:R}}}return null},i.prototype.searchData=function(e,t){var o,r=this;if(t===void 0&&(t=-1),t>=0){var n=this.rowById(t);if(!n)return null;o=this.$_extractTreeRowIds(n.descendants)}else o=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(o)||o.length<=0)return null;var s=o.length,l=null,u=v.makeArray(e.fields)||this.getOrgFieldNames();u&&u.length||(u=this.getOrgFieldNames());var h=[];u.forEach(function(E){return h.push(r.getFieldIndex(E))}),e instanceof Ar||(e.reverse&&(e.hasOwnProperty("startIndex")||(e.startIndex=s-1),e.hasOwnProperty("startFieldIndex")||(e.startFieldIndex=h.length-1)),e=new Ar(e));var d=e.reverse,p=h.length,f=e.value,g=o.indexOf(e.startIndex)<0?d?s-1:0:o.indexOf(e.startIndex),m=d?0:s-1,b=Math.max(0,Math.min(p-1,e.startFieldIndex)),C=d?g>=0&&b>0:g<s&&b<p,x=d?g<s-1||b<p-1:g>0||b>0;return f!=null&&h.length>0&&!(l=C?this.$_searchData(o,h,f,e,g,m,b):null)&&e.wrap&&x&&(l=this.$_searchData(o,h,f,e,d?s-1:0,g-1,d?b:0)),l},i.prototype.$_hideDataRows=function(e,t){if(e!=null){for(var o=v.isArray(e)?e:[e],r=this._hiddenRows.length,n=[],s=0,l=o.length;s<l;s++){var u=o[s];if(this._findRowById(u)!=null)if(n.push(u),t)this._hiddenRows.indexOf(u)<0&&this._hiddenRows.push(u);else{var h=this._hiddenRows.indexOf(u);h>=0&&this._hiddenRows.splice(h,1)}}this._hiddenRows.length!==r&&this._fireRowsHiddenChanged(n,t)}},i.prototype.hideRows=function(e){this.$_hideDataRows(e,!0)},i.prototype.showRows=function(e){this.$_hideDataRows(e,!1)},i.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var e=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(e,!1)}},i.prototype.getHiddenRows=function(){var e=this._hiddenRows.concat();return e.sort(function(t,o){return t-o}),e},i.prototype.isHiddenRow=function(e){return!!this.rowById(e)&&this._hiddenRows.indexOf(e)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!1,configurable:!0}),i.prototype.summarize=function(e,t){if(e==null)return!1;e.clear();var o=this.rowCount;if(o<1)return!1;if(e.count=o,e.sum=0,e.min=null,e.max=null,e.dataCount=0,this.$_summarizeChildren(this._rootRow,e),e.avg=e.sum/e.count,e.dataAvg=e.dataCount===0?NaN:e.sum/e.dataCount,t){var r=this.$_summarizeVars(this._rootRow,e);e.varsp=r/e.count,e.vars=r/(e.count-1)}return!0},i.prototype.summarizeRange=function(e,t,o){if(e==null||t==null)return!1;e.clear();var r=t.length;if(r<1)return!1;for(var n=0,s=e.field,l=this.getField(s).dataType===c.ValueType.NUMBER,u=null,h=null,d=null,p=0;p<r;)(b=t[p++].getValue(s))==null||l&&(!l||isNaN(b))||(l&&(u=n?u+b:b),(l||b!="")&&n++,(h==null||b<h)&&(h=b),(d==null||b>d)&&(d=b));if(e.count=r,n>0&&(u=u??(l?NaN:null),h=h??(l?NaN:null),d=d??(l?NaN:null),e.sum=u,e.min=h,e.max=d,e.avg=u/r,e.dataCount=n,e.dataAvg=e.dataCount===0?NaN:e.sum/e.dataCount,o))if(r>1){for(var f=0,g=e.avg,m=0;m<r;m++){var b=t[m].getValue(s);isNaN(b)||(f+=Math.pow(b-g,2))}e.varsp=f/r,e.vars=f/(r-1)}else e.varsp=0,e.vars=0;return!0},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRow=function(e){return this.rowById(e).values},i.prototype.deleteRows=function(e){if(this._checkClientState()&&e&&e.length>0){var t=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var o=e.length-1;o>=0;o--){var r=e[o],n=r&&r.parent;n&&n._removeChild(r,!0,!1)}}finally{this._tagLock=!1}}finally{this._softDeleting=t,this.endUpdate(!1)}this._rowsRemoved(e)}},i.prototype.equalValues=function(e,t,o){if(t!==o){var r=this._fields[e],n=t.getValue(e),s=o.getValue(e);return r.equalValues(n,s)}return!0},i.prototype.sameValues=function(e,t,o,r){if(t!==o){var n=this._fields[e],s=t.getValue(e),l=o.getValue(e);return r?String(s).toLowerCase()==String(l).toLowerCase():n.sameValues(s,l)}return!0},i.prototype.equalTexts=function(e,t,o){return this.sameValues(e,t,o,!0)},i.prototype.compareValues=function(e,t,o,r,n){if(t!==o){var s=t.getValue(e),l=o.getValue(e);return r===-1&&(s=s==""?null:s,l=l==""?null:l),s==null?l==null?0:-1*r:l==null?1*r:(s=n?String(s).toLowerCase():s)>(l=n?String(l).toLowerCase():l)?1:s<l?-1:0}return 0},i.prototype.compareTexts=function(e,t,o,r){return this.compareValues(e,t,o,r,!0)},i.prototype.compareNumbers=function(e,t,o,r){if(t!==o){var n=t.getValue(e),s=o.getValue(e);return isNaN(n)?isNaN(s)?0:-1*r:isNaN(s)?1*r:n>s?1:n<s?-1:0}return 0},i.prototype.compareBools=function(e,t,o,r){if(t!==o){var n=t.getValue(e),s=o.getValue(e);return n&&!s?1:!n&&s?-1:0}return 0},i.prototype.compareObjects=function(e,t,o,r){var n=t.values,s=o.values;if(n===s)return 0;var l=n?n[e]:null,u=s?s[e]:null;return l?u?this.getField(e).$_compareObject(l,u,t.rowId,o.rowId):1*r:u?-1*r:0},i.prototype.getDistinctValues=function(e,t,o){if(t===void 0&&(t=-1),o===void 0&&(o=c.SortDirection.ASCENDING),this._checkFieldIndex(e),t<0&&(t=this.getDescendantCount(this._rootRow)),t>0){for(var r=this.getDescendants(this._rootRow,0),n=this.getField(e).dataType,s=[],l=[],u=void 0,h=0,d=r.length;h<d;h++)switch(u=r[h].values[e],n){case c.ValueType.NUMBER:u!=null&&isNaN(u)||s.indexOf(u)<0&&s.push(u);break;case c.ValueType.DATE:case c.ValueType.DATETIME:u?l.indexOf(u.getTime())<0&&(l.push(u.getTime()),s.push(u)):(l.push(u),s.push(u));break;case c.ValueType.OBJECT:default:s.indexOf(u)<0&&s.push(u)}return o!==c.SortDirection.NONE&&(s=v.included(n,c.ValueType.DATETIME,c.ValueType.DATE)?s.sort(function(p,f){return p-f}):s.sort(),o===c.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,t)}return null},i.prototype._doFieldsReset=function(){this._fireReset()},i.prototype.refreshClients=function(){this._fireRefreshClient()},i.prototype.savePoint=function(e){if(e===void 0&&(e=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var t=this._rootRow.copy(),o=this._nextPoint++;return e||t.clearRowStates(!1,!1),this._points.push({id:o,nextRowId:this._nextRowId,data:t}),o}return-1}},i.prototype.rollback=function(e){if(e===void 0&&(e=0),this._checkClientState())for(var t=this._points.length-1;t>=0;t--){var o=this._points[t];if(o.id==e){this.$_removeSavePoints(t+1),this._rowMap=[],this._rootRow.set(o.data),this._nextRowId=o.nextRowId,this.$_prepareMap(),this._fireRefresh();break}}},i.prototype.$_removeSavePoints=function(e){for(var t=this._points,o=t.length-1;o>=e;o--)t[o].data=null,t.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var e=[],t=0,o=this._points.length;t<o;t++)e.push(this._points[t].id);return e},i.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype._hasChildrenChanged=function(e){this._fireHasChildrenChanged(e)},i.prototype._iconIndexChanged=function(e){this._fireIconIndexChanged(e)},i.prototype._stateChanged=function(e,t){this._fireRowStateChanged(e,t)},i.prototype._statesChanged=function(e){this._fireRowStatesChanged(e)},i.prototype._valueChanged=function(e,t){this._fireValueChanged(e,t)},i.prototype._rowAdding=function(e,t,o){return this._fireRowAdding(e,t,o)},i.prototype._rowAdded=function(e){this._tagLock||this._tags.addRow(e),this._eventLock<=0&&(this._fireRowAdded(e),this._fireRowCountChanged())},i.prototype._rowsAdding=function(e,t,o){return this._fireRowsAdding(e,t,o)},i.prototype._rowsAdded=function(e,t){this._tagLock||this._tags.addRows(t),this._eventLock<=0&&(this._fireRowsAdded(e,t),this._fireRowCountChanged())},i.prototype._rowRemoving=function(e){return this._fireRowRemoving(e)},i.prototype._rowRemoved=function(e){this._tagLock||this._tags.removeRow(e),this._eventLock<=0&&(this._fireRowRemoved(e),this._fireRowCountChanged()),this.$_removeMap(e)},i.prototype._rowsRemoving=function(e){return this._fireRowsRemoving(e)},i.prototype._rowsRemoved=function(e){this._tagLock||this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged()),this.$_removeMap(e)},i.prototype._rowCleared=function(e){if(e){var t=e.children;this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged())}},i.prototype._rowUpdating=function(e){return this._fireRowUpdating(e)},i.prototype._rowUpdated=function(e){this._tags.updateRow(e),this._eventLock<=0&&this._fireRowUpdated(e)},i.prototype._rowsUpdating=function(e){return this._fireRowsUpdating(e)},i.prototype._rowsUpdated=function(e){this._tags.updateRows(e),this._eventLock<=0&&this._fireRowsUpdated(e)},i.prototype.$_internalInsertField=function(e,t){return e=a.prototype.$_internalInsertField.call(this,e,t),function o(r,n){if(r.children&&r.children.length>0)for(var s=0,l=r.children;s<l.length;s++)o(l[s],n);r._values&&r._values.splice(n,0,void 0),r._orgValues&&r._orgValues.splice(n,0,void 0)}(this._rootRow,e),e},i.prototype.$_internalRemoveField=function(e){return function t(o,r){if(o.children&&o.children.length>0)for(var n=0,s=o.children;n<s.length;n++)t(s[n],r);o._values&&o._values.splice(r,1),o._orgValues&&o._orgValues.splice(r,1)}(this._rootRow,e.index),a.prototype.$_internalRemoveField.call(this,e)},i.prototype.getRowId=function(e){return e},i.prototype.getValue=function(e,t){var o=this.rowById(e);if(o)return o.getValue(t)},i.prototype.setValue=function(e,t,o){var r=this.rowById(e);if(r)return r.setValue(t,o,!1)},i.prototype.getRowObject=function(e){var t=this.rowById(e),o=this.fieldCount,r={},n=t._values;if(n)for(var s=0;s<o;s++)r[this.getOrgFieldName(s)]=n[s];return r},i.prototype.getRowState=function(e){var t=this.rowById(e);return t?t.rowState:c.RowState.NONE},i.prototype.setRowState=function(e,t,o){var r=this.rowById(e);if(r&&(this.checkStates||o)){var n=r.rowState;t!=n&&r._changeRowState(t,!0,!!Qt(n)||void 0)}},i.prototype.changeRowStates=function(e,t){for(var o=e.length,r=[],n=0;n<o;n++){var s=e[n];s._changeRowState(t,!1,!1)&&r.push(s)}r.length>0&&this._fireRowStatesChanged(r)},i.prototype.clearRowStates=function(e,t){this._checkClientState()&&this._rootRow.clearRowStates(e,t)},i.prototype.$_collectStateRows=function(e,t,o){for(var r=0,n=e.count;r<n;r++){var s=e.getChild(r);s.rowState==t&&o.push(s.rowId),this.$_collectStateRows(s,t,o)}},i.prototype.getStateRows=function(e){var t=[];return this.$_collectStateRows(this._rootRow,e,t),t},i.prototype.$_collectAllStateRows=function(e,t){for(var o=0,r=e.count;o<r;o++){var n=e.getChild(o);switch(n.rowState){case c.RowState.CREATED:case c.RowState.UPDATED:case c.RowState.DELETED:case c.RowState.CREATE_AND_DELETED:t[n.rowState].push(n.rowId)}this.$_collectAllStateRows(n,t)}},i.prototype.getAllStateRows=function(){var e={};return e[c.RowState.CREATED]=[],e[c.RowState.UPDATED]=[],e[c.RowState.DELETED]=[],e[c.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,e),e},i.prototype.setRowStates=function(e,t,o,r){if(this._checkClientState()){for(var n=r?null:[],s=0,l=e.length;s<l;s++){var u=this.rowById(e[s]);u&&(this.checkStates||o)&&u._changeRowState(t,r,!1)&&!r&&n.push(u)}!r&&n.length>0&&this._fireRowStatesChanged(n)}},i.prototype.$_getRowStateCount=function(e,t){for(var o=0,r=0,n=e.count;r<n;r++){var s=e.getChild(r);t.indexOf(s.rowState)>=0&&o++,o+=this.$_getRowStateCount(s,t)}return o},i.prototype.getRowStateCount=function(e){return this.$_getRowStateCount(this._rootRow,e)},i.prototype.restoreUpdatedStates=function(e){this.restoreUpdatedRows(e)},i.prototype.restoreUpdatedRows=function(e){if(this._checkClientState()){var t=[];if(e==null)this._rootRow.$_restoreRow(!0,t);else for(var o=e.length;o--;){var r=this.rowById(e[o]);r&&r.$_restoreRow(!1,t)}t.length==1?this._fireRowStateChanged(t[0],!1):t.length>1&&this._fireRowStatesChanged(t)}},i.prototype._reCalculateFields=function(e){var t=this;this.getDescendants(this._rootRow,-1).forEach(function(o){t._internalCalculateValues(o._values,o.rowId,e)})},i.prototype.getUpdatedCells=function(e){var t=this.restoreMode;if(t!=c.RestoreMode.AUTO&&t!=c.RestoreMode.EXPLICIT)return null;if(e==null)e=this.getStateRows(c.RowState.UPDATED);else if(!Array.isArray(e)){if(typeof e!="number")return null;e=[e]}if(!Array.isArray(e))return null;for(var o=[],r=0,n=e.length;r<n;r++){var s=this.rowById(e[r]);if(s){var l=s.$_getUpdatedCells();l&&l.length>0&&o.push({__rowId:s.rowId,updatedCells:l})}}return o},i.prototype.canUpdateRow=function(e){return!0},i.prototype.canInsertRow=function(e){return!0},i.prototype.canDeleteRow=function(e){return!0},i.prototype.isDataChanged=function(e,t){if(e<0)return!1;var o=this.rowById(e);!o&&v.isDebugging();var r=o._orgValues;if(o.rowState!==c.RowState.UPDATED||!r)return!1;if(r){var n=r[t],s=o._values[t],l=this._fields[t];return l&&!l.sameValues(n,s)}return!1},i.prototype.$_createFrom=function(e,t){var o=e.getObject();t&&(o=this._convertValues(o,t));for(var r=this.objectToRow(o),n=new Wa(this,r),s=0;s<e.count;s++){var l=this.$_createFrom(e.getChild(s),t);n.addChild(l,!1)}return n},i.prototype.$_insertRowsFrom=function(e,t,o,r){for(var n=[],s=0,l=e.rowsByIds(o,!1);s<l.length;s++){var u=l[s];n.push(this.$_createFrom(u,t))}var h=r>=0?this.rowById(r):null,d=h?h.parent:this.rootRow;if(r>=0){var p=d.indexOf(h);d.insertChildren(p,n,!1)}else d.insertChildren(d.count,n,!1)},i.prototype.insertChildNode=function(e,t,o,r,n,s){var l=v.getNumber(o[n],-1),u=o[r],h=this.createRow(o,l,u&&u.length>0);if(t>=0?e.insertChild(t,h,s):e.addChild(h,s),u)for(var d=0;d<u.length;d++)this.insertChildNode(h,-1,u[d],r,n,s);return h?h.rowId:-1},i.prototype.insertRowsFrom=function(e,t,o,r){this.$_insertRowsFrom(e,t,o,r)},i.prototype.appendRowsFrom=function(e,t,o){this.$_insertRowsFrom(e,t,o,-1)},i.prototype.fillValue=function(e,t){Object.keys(e).length&&(this.undoable?this._commands.execute(new z_(this,e,t)):this.$_fillValue(e,t))},i.prototype.updateRows=function(e,t,o){if(e&&e.length!=0){for(var r=[],n=0;n<e.length;n++){var s=this.rowById(e[n]);s?r.push(s):t.splice(n,1)}this.undoable?this._commands.execute(new Y_(this,r,t,o)):this.$_updateRows(r,t,o)}},i.prototype._findRowById=function(e){return this._rootRow.findById(e)},i.prototype._checkSum=function(e){if(e!=this.rowCount)throw new Error("Invalid row count: "+e+" <> "+this.rowCount)},i.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},i.prototype.$_prepareMap=function(){var e=this;(function t(o){var r=o.children;r&&r.forEach(function(n){e._rowMap[n.rowId]=n,t(n)})})(this._rootRow)},i.prototype.$_removeMap=function(e){var t=this;(e=v.makeArray(e,!0)).forEach(function(o){t._rowMap[o.rowId]=void 0,t.$_removeMap(o.children),o.dispose()})},i.prototype.$_fillValue=function(e,t){if(this._checkClientState()){var o=Object.keys(e);if(o&&o.length){this.refreshFieldFormats();var r=[],n=[];for(var s in e){var l=this.rowById(+s);n.push(l),l.rowState==c.RowState.NONE&&r.push(l);for(var u=l.values,h=e[s],d=0;d<h.length;d++)u[h[d]]=t;l.$_internalUpdate(u,!1,!1)}r.length>0&&this._fireRowStatesChanged(r),this._tags.updateRows(n),this._fireRowsUpdated(n)}}},i.prototype.$_updateRows=function(e,t,o){if(this._checkClientState()&&e&&t){var r=Math.min(e.length,t.length);if(!(r<1)){this.refreshFieldFormats();for(var n=[],s=0;s<r;s++){var l=e[s];l.rowState==c.RowState.NONE&&n.push(l),l.$_internalUpdate(t[s],o,!1)}n.length>0&&this._fireRowStatesChanged(n),this._tags.updateRows(e),this._fireRowsUpdated(e)}}},i.prototype.findRow=function(e,t){return e&&e.length>0&&t&&t.length>=e.length?this._rootRow.findChild(e,t):null},i.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=c.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==c.RestoreMode.AUTO,this._rootRow._clearOrgValues()},i.prototype.$_summarizeChildren=function(e,t){for(var o=t.field,r=e.count,n=this.getField(t.field).dataType===c.ValueType.NUMBER,s=0;s<r;s++){var l=e.getChild(s),u=l.getValue(o);u==null||n&&(!n||isNaN(u))||(n&&(t.sum=t.dataCount?t.sum+u:u),(n||u!="")&&t.dataCount++,(t.min==null||u<t.min)&&(t.min=u),(t.max==null||u>t.max)&&(t.max=u)),this.$_summarizeChildren(l,t)}},i.prototype.$_summarizeVars=function(e,t){for(var o=t.field,r=t.avg,n=e.count,s=0,l=0;l<n;l++){var u=e.getChild(l),h=u.getValue(o);isNaN(h)||(s+=Math.pow(h-r,2)),s+=this.$_summarizeVars(u,t)}return s},i.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},i.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onTreeDataProviderReset"):this._resetLock++},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},i.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},i.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},i.prototype._fireRowAdding=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",e,t,o)},i.prototype._fireRowAdded=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",e)},i.prototype._fireRowsAdding=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",e,t,o)},i.prototype._fireRowsAdded=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",e,t)},i.prototype._fireRowRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",e)},i.prototype._fireRowRemoved=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",e)},i.prototype._fireRowsRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",e)},i.prototype._fireRowsRemoved=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",e)},i.prototype._fireRowUpdating=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",e)},i.prototype._fireRowUpdated=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",e)},i.prototype._fireRowsUpdating=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",e)},i.prototype._fireRowsUpdated=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",e)},i.prototype._fireValueChanging=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",e,t,o)},i.prototype._fireValueChanged=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",e,t)},i.prototype._fireIconIndexChanged=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",e)},i.prototype._fireHasChildrenChanged=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",e)},i.prototype._fireRowStateChanged=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",e,t)},i.prototype._fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",e)},i.prototype._fireRowSiblingMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",e,t)},i.prototype._fireRowSiblingMoved=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",e,t)},i.prototype._fireRowsSiblingMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",e,t)},i.prototype._fireRowsSiblingMoved=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",e,t)},i.prototype._fireRowParentChanging=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",e,t,o)},i.prototype._fireRowParentChanged=function(e,t,o){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",e,t,o)},i.prototype._fireRowsParentChanging=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",e,t,o)},i.prototype._fireRowsParentChanged=function(e,t,o){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",e,t,o)},i.prototype._fireRowsHiddenChanged=function(e,t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",e,t)},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(U_),K_=function(a){function i(e){var t=a.call(this)||this;return t._ds=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.load=function(e,t,o){var r=new Xi(o);if(this.$_checkEmpty(t,r))return 0;switch(this.$_prepareLoad(r),e=e&&e.toLowerCase()){case"json":return this.$_loadJson(t,r);case"xml":return this.$_loadXml(t,r);case"csv":return this.$_loadCsv(t,r)}return 0},i.prototype.$_loadJson=function(e,t){if(typeof e=="string"&&(e=JSON.parse(e)),e){var o=t.childrenField,r=t.iconField;if(t.fillMode==c.DataFillMode.APPEND){var n=this._ds.rowById(t.parentId);return this._ds.appendJsonRows(n,e,t.rows,o,r)}return this._ds.setJsonRows(e,t.rows,o,r)}return 0},i.prototype.$_loadXml=function(e,t){if(typeof e=="string"&&(e=Pe.parseXml(e)),e&&e.documentElement){var o=t.childrenField,r=t.iconField;if(t.fillMode==c.DataFillMode.APPEND){var n=this._ds.rowById(t.parentId);return this._ds.appendXmlRows(n,e,t.rows,o,r)}return this._ds.setXmlRows(e,t.rows,o,r)}return 0},i.prototype.$_loadCsv=function(e,t){var o=t.start,r=t.count,n=t.quoted,s=t.delimiter,l=mr.csvToArray(this._ds,e,o,r,n,s);if(l&&(r=l.length)>0){var u=t.treeField,h=t.childrenField,d=t.iconField,p=t.needSorting;if(t.fillMode==c.DataFillMode.APPEND){var f=this._ds.rowById(t.parentId);this._ds.appendDataRows(f,l,u,p,h,d)}else this._ds.setRows(l,u,p,h,d);return l.length}return 0},i.prototype.$_fillEmpty=function(e){e.fillMode===c.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},i.prototype.$_checkEmpty=function(e,t){return!e&&(this.$_fillEmpty(t),!0)},i.prototype.$_prepareLoad=function(e){},i}(me);c.ExportType=void 0,(sh=c.ExportType||(c.ExportType={})).EXCEL="excel",sh.CSV="csv",c.ExportTarget=void 0,(Va=c.ExportTarget||(c.ExportTarget={})).LOCAL="local",Va.REMOTE="remote",Va.STREAM="stream";var Vr,ch=function(a){function i(e){var t=a.call(this,e)||this;return t.datetimeCallback=null,t.numberCallback=null,t.booleanCallback=null,t.objectCallback=null,t.textCallback=null,t.start=0,t.count=-1,t.replaceCrText=null,t.replaceLfText=null,t.seperator=null,t.assignFrom(e),t.extend(e),t}return w(i,a),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e)},enumerable:!1,configurable:!0}),i}(function(a){function i(e){var t=a.call(this)||this;return t._type=c.ExportType.EXCEL,t._target=c.ExportTarget.LOCAL,t.url=void 0,t.done=null,t.showProgress=!1,t.prepareProgress=10,t.progressCallback=null,t.params=null,t.assignFrom(e),t.extend(e),t}return w(i,a),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){e&&v.valueIn(e,c.ExportType)&&(this._type=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(e){e&&v.valueIn(e,c.ExportTarget)&&(this._target=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zip",{get:function(){return this._zip},set:function(e){this._zip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"progressMessage",{get:function(){return this._progressMessage||ye.messages.exportProgressMessage},set:function(e){this._progressMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var e=this.type===c.ExportType.CSV?".csv":".xlsx";return this._fileName+e}return this._fileName}return this.type===c.ExportType.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(e){e!=this._fileName&&(this._fileName=e?e.trim():null)},enumerable:!1,configurable:!0}),i}(me)),dh=function(){function a(){}return a.prototype.dispose=function(){return null},a.prototype.saveLocal=function(i,e,t){var o=Zt(t),r=e instanceof Blob?e:new Blob([e],{type:"text/csv charset=UTF-8"});if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(r,i);else if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(r,i);else{var n=t.createElement("a");t.body.appendChild(n);var s=window.URL.createObjectURL(r);n.href=s,n.download=i,n.click(),setTimeout(function(){t.body.removeChild(n)},100)}},a.prototype.saveServer=function(i,e,t,o,r){var n='<form name="tempForm" action="'+t+'" method="post">';if(n+='<input type="hidden" name="fileName" value = "'+i+'"/>',n+='<input type="hidden" name="data" value = "'+e+'"/>',n+='<input id="submitBtn" type="submit"/>',r)for(var s in r)n+='<input type="hidden" name="'+s+'" value = "'+r[s]+'"/>';n+="</form>";var l=o.createElement("div");l.innerHTML=n,o.body.appendChild(l),o.getElementById("submitBtn").click(),setTimeout(function(){o.body.removeChild(l)},100)},a}(),ph=function(a){function i(e){var t=a.call(this,e)||this;return t.exportFields=null,t.hideFields=null,t.includeFieldNames=!1,t.extend(e),t}return w(i,a),Object.defineProperty(i.prototype,"type",{get:function(){return c.ExportType.CSV},enumerable:!1,configurable:!0}),i}(ch),X_=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.dispose=function(){return a.prototype.dispose.call(this),null},i.prototype.export=function(e,t){this._dataSource=e,this._exportOptions=t instanceof ph?t:new ph(t),this._exportFields=this.$_prepareFields(e,t.exportFields,t.hideFields),this._rows=[],e instanceof gs?this.$_buildTreeBook(function(){this.save()}):e instanceof $a&&this.$_buildBook(function(){this.save()})},i.prototype.$_prepareFields=function(e,t,o){var r=e.getFields();return t?t.map(function(n){return e.fieldByName(n)}).filter(function(n){return n}):o?r.filter(function(n){return o.indexOf(n.orgFieldName)<0}):r},i.prototype.addQuatation=function(e,t){return v.addQuatation(e,t===c.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.$_buildFieldName=function(){return this._exportFields.map(function(e){return e.orgFieldName}).join(this._exportOptions.seperator||",")},i.prototype.$_buildBook=function(e){var t=this._exportOptions,o=this._dataSource.rowCount,r=Math.max(0,t.start),n=t.count==-1?o:Math.min(Math.max(t.count,0),o),s=Math.min(o,r+n);t.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var l=r;l<s;l++)this._rows.push(this.$_buildItem(l));if(t.target===c.ExportTarget.STREAM){var u=this._rows.join(`
`);t.done&&typeof t.done=="function"&&t.done(u)}else t.done&&typeof t.done=="function"&&t.done(),e.call(this)},i.prototype.$_buildTreeBook=function(e){for(var t=this._exportOptions,o=this._dataSource.getDescendants(null,0),r=0;r<o.length;r++)this._rows.push(this.$_buildItem(o[r]));if(t.target===c.ExportTarget.STREAM){var n=this._rows.join(`
`);t.done&&typeof t.done=="function"&&t.done(n)}else t.done&&typeof t.done=="function"&&t.done(),e.call(this)},i.prototype.$_buildItem=function(e){var t,o,r,n=this._dataSource,s=this._exportFields;n instanceof gs?(o=e?e.values:[],r=e.rowId):(o=n.getRow(e),r=e);for(var l,u,h=[],d=s.length,p=this._exportOptions,f=p.seperator,g=0;g<d;g++){if(u=void 0,t=s[g])switch(l=o[t.index],t.dataType){case c.ValueType.NUMBER:u=isNaN(l)||l==null?"":p.numberCallback?(u=p.numberCallback(r,t.orgFieldName,l,n.$_handler))!=null?String(u):u:p.numberFormat?ji.getFormatter(p.numberFormat).getText(l):String(l);break;case c.ValueType.BOOLEAN:l!=null&&(p.booleanCallback?l=(l=p.booleanCallback(r,t.orgFieldName,l,n.$_handler))!=null?String(l):l:p.booleanFormat&&(l=ho.getFormatter(p.booleanFormat).formatValue(l)),u=String(l));break;case c.ValueType.DATE:case c.ValueType.DATETIME:l&&(u=p.datetimeCallback?(l=p.datetimeCallback(r,t.orgFieldName,l,n.$_handler))instanceof Date?Lt.Default.getText(l):l:p.datetimeFormat?Lt.getFormatter(p.datetimeFormat).getText(l):Lt.Default.getText(l));break;case c.ValueType.OBJECT:l&&(u=typeof(l=p.objectCallback?p.objectCallback(r,t.orgFieldName,l,n.$_handler):l)=="object"?JSON.stringify(l):String(l));break;default:u=(l=p.textCallback?p.textCallback(r,t.orgFieldName,l,n.$_handler):l)!=null?String(l):""}h[h.length]=this.addQuatation(u,t&&t.dataType)}return h.join(f||",")},i.prototype.save=function(){var e=this._exportOptions,t=e.fileName,o="\uFEFF"+this._rows.join(`
`);e.target==c.ExportTarget.LOCAL?this.saveLocal(t,o,document):this.saveServer(t,On.encode(o),e.url,document,e.params)},i}(dh),ei=function(){function a(){}return a.getFieldIndex=function(i,e){return typeof e=="string"?i.getFieldIndex(e):e},a.fillData=function(i,e,t,o){var r=new H_(i);try{r.load(e,t,o)}finally{r.dispose()}},a.fillTreeData=function(i,e,t,o){var r=new K_(i);try{r.load(e,t,o)}finally{r.dispose()}},a.extractTreeRows=function(i){if(i){for(var e=i.length,t=new Array(e),o=0;o<e;o++)t[o]=i[o].rowId;return t}return null},a}(),Ua=function(){},za=function(){function a(i){this._dp=this._createProvider(i),this._listener=this._createListener(this._dp)}return a.prototype.dispose=function(){return this._dp.dispose(),this._dp=null},Object.defineProperty(a.prototype,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(i){this._dp.subTypeEnabled=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"undoable",{get:function(){return this._dp.undoable},set:function(i){this._dp.undoable=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"insertable",{get:function(){return this._dp.insertable},set:function(i){this._dp.insertable=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"updatable",{get:function(){return this._dp.updatable},set:function(i){this._dp.updatable=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"deletable",{get:function(){return this._dp.deletable},set:function(i){this._dp.deletable=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(i){this._dp.softDeleting=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(i){this._dp.deleteCreated=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"checkStates",{get:function(){return this._dp.checkStates},set:function(i){this._dp.checkStates=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(i){this._dp.restoreMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(i){this._dp.strictRestore=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(i){this._dp.booleanFormat=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(i){this._dp.datetimeFormat=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"baseYear",{get:function(){return this._dp.baseYear},set:function(i){this._dp.baseYear=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"amText",{get:function(){return this._dp.amText},set:function(i){this._dp.amText=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pmText",{get:function(){return this._dp.pmText},set:function(i){this._dp.pmText=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(i){this._dp.commitBeforeDataEdit=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(i){this._dp.valuesCallback=i},enumerable:!1,configurable:!0}),a.prototype.getOptions=function(){var i=this._dp;return{subTypeEnabled:i.subTypeEnabled,undoable:i.undoable,insertable:i.insertable,updatable:i.updatable,deletable:i.deletable,softDeleting:i.softDeleting,deleteCreated:i.deleteCreated,checkStates:i.checkStates,restoreMode:i.restoreMode.toString(),strictRestore:i.strictRestore,booleanFormat:i.booleanFormat,datetimeFormat:i.datetimeFormat,baseYear:i.baseYear,amText:i.amText,pmText:i.pmText,commitBeforeDataEdit:i.commitBeforeDataEdit}},a.prototype.setOptions=function(i){this._dp.assignFrom(i)},a.prototype.beginUpdate=function(){this._dp.beginUpdate()},a.prototype.endUpdate=function(i){i===void 0&&(i=!0),this._dp.endUpdate(i)},a.prototype.getFields=function(){return this._dp.getFields()},a.prototype.setFields=function(i){v.isArray(i)&&this._dp.setFields(i)},a.prototype.addField=function(i,e,t){return this._dp.addField(i,e,t)},a.prototype.removeField=function(i,e){e===void 0&&(e=!0),this._dp.removeField(i,e)},a.prototype.getFieldCount=function(){return this._dp.fieldCount},a.prototype.fieldByName=function(i){return this._dp.fieldByName(i)},a.prototype.getFieldNames=function(){return this._dp.getFieldNames()},a.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},a.prototype.getFieldName=function(i){return this._dp.getFieldName(i)},a.prototype.getOrgFieldName=function(i){return this._dp.getOrgFieldName(i)},a.prototype.getFieldIndex=function(i){return this._dp.getFieldIndex(i)},a.prototype.hasData=function(i){return this._dp.hasData(i)},a.prototype.getValues=function(i){return this._dp.getRow(i)},a.prototype.checkRowStates=function(i){this._dp.checkStates=i},a.prototype.getRowState=function(i){return this._dp.getRowState(i)},a.prototype.getStateRows=function(i){return i===void 0&&(i=c.RowState.NONE),this._dp.getStateRows(i)},a.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},a.prototype.clearRowStates=function(i,e){e===void 0&&(e=!1),this._dp.clearRowStates(i,e)},a.prototype.setRowState=function(i,e,t){e===void 0&&(e=c.RowState.NONE),t===void 0&&(t=!1),this._dp.setRowState(i,e,t)},a.prototype.setRowStates=function(i,e,t,o){e===void 0&&(e=c.RowState.NONE),t===void 0&&(t=!1),o===void 0&&(o=!1),this._dp.setRowStates(i,e,t,o)},a.prototype.getRowStateCount=function(i){if(!i)return 0;var e=[];if(i=="*"||i=="all")e.push(c.RowState.CREATED,c.RowState.UPDATED,c.RowState.DELETED,c.RowState.CREATE_AND_DELETED);else for(var t=Array.isArray(i)?i:[i],o=0,r=t.length;o<r;o++)e.push(t[o]);return e.length>0?this._dp.getRowStateCount(e):void 0},a.prototype.restoreUpdatedStates=function(i){return this._dp.restoreUpdatedStates(i)},a.prototype.restoreUpdatedRows=function(i){return this._dp.restoreUpdatedRows(v.makeArray(i))},a.prototype.getUpdatedCells=function(i){return this._dp.getUpdatedCells(i)},a.prototype.getDistinctValues=function(i,e,t){e===void 0&&(e=-1),t===void 0&&(t=c.SortDirection.ASCENDING);var o=t||c.SortDirection.ASCENDING,r=typeof i=="string"?this._dp.getFieldIndex(i):i;return this._dp.getDistinctValues(r,e,o)},a.prototype.savePoint=function(i){return i===void 0&&(i=!0),this._dp.savePoint(i)},a.prototype.rollback=function(i){i===void 0&&(i=0),this._dp.rollback(i)},a.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},a.prototype.getSavePoints=function(){return this._dp.getSavePoints()},a.prototype.setDataComparer=function(i,e){var t=typeof i=="string"?this._dp.getFieldIndex(i):i;this._dp.setDataComparer(t,e)},a.prototype.exportToCsv=function(i){new X_().export(this._dp,i)},a.prototype.destroy=function(){return this.dispose()},a.prototype.undo=function(){this._dp.undo()},a.prototype.redo=function(){this._dp.redo()},a.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},a.prototype.getProvider=function(){return this._dp},a}(),fh=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e.onRowCountChanged=null,e.onRowUpdating=null,e.onRowUpdated=null,e.onRowsUpdated=null,e.onRowListUpdated=null,e.onRowInserting=null,e.onRowInserted=null,e.onRowsInserted=null,e.onRowDeleting=null,e.onRowDeleted=null,e.onRowsDeleted=null,e.onRowMoving=null,e.onRowMoved=null,e.onRowsMoving=null,e.onRowsMoved=null,e.onRowListMoving=null,e.onRowListMoved=null,e.onValueChanged=null,e.onDataChanged=null,e.onRowStateChanged=null,e.onRowStatesChanged=null,e.onRowStatesCleared=null,e.onRestoreRows=null,e}return w(i,a),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._dp.rowCount},set:function(e){this._dp.setRowCount(e)},enumerable:!1,configurable:!0}),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRowCount=function(e,t,o,r){return t===void 0&&(t=!1),o===void 0&&(o=null),r===void 0&&(r=c.RowState.NONE),this._dp.setRowCount(e,t,o,r)},i.prototype.setFilterMode=function(e){e===void 0&&(e="and"),this._dp.setFilterMode(e)},i.prototype.setFilters=function(e,t){t===void 0&&(t="and"),this._dp.setFilters(e,t)},i.prototype.fillJsonData=function(e,t){var o=t instanceof Xi?t:new Xi(t);ei.fillData(this._dp,"json",e,o)},i.prototype.fillXmlData=function(e,t){var o=t instanceof Xi?t:new Xi(t);ei.fillData(this._dp,"xml",e,o)},i.prototype.fillCsvData=function(e,t){var o=t instanceof Xi?t:new Xi(t);ei.fillData(this._dp,"csv",e,o)},i.prototype.setRows=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=-1),this._dp.setRows(e,t,o)},i.prototype.addRows=function(e,t,o,r){t===void 0&&(t=0),o===void 0&&(o=-1),r===void 0&&(r=!1),this._dp.appendRows(e,t,o,r)},i.prototype.insertRows=function(e,t,o,r,n){o===void 0&&(o=0),r===void 0&&(r=-1),n===void 0&&(n=!1),this._dp.insertRows(e,t,o,r,n)},i.prototype.updateRows=function(e,t,o,r,n,s){o===void 0&&(o=0),r===void 0&&(r=-1),n===void 0&&(n=!1),s===void 0&&(s=!1),this._dp.updateRows(e,t,o,r,n,s)},i.prototype.updateRowsByDataRow=function(e,t,o){this._dp.updateRows2(e,t,o)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.updateRow=function(e,t,o){o===void 0&&(o=!1),this._dp.updateRow(e,t,o)},i.prototype.hideRows=function(e){this._dp.hideRows(e)},i.prototype.showHiddenRows=function(e){this._dp.showRows(e)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(e){return this._dp.isHiddenRow(e)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.addRow=function(e){return this._dp.appendRow(e)},i.prototype.insertRow=function(e,t){return this._dp.insertRow(e,t)},i.prototype.removeRow=function(e){this._dp.removeRow(e)},i.prototype.removeRows=function(e,t){t===void 0&&(t=!1),this._dp.removeRows(e,t)},i.prototype.moveRow=function(e,t){this._dp.moveRow(e,t)},i.prototype.moveRows=function(e,t,o){this._dp.moveRows(e,t,o)},i.prototype.getValue=function(e,t){var o=ei.getFieldIndex(this._dp,t);return this._dp.getValue(e,o)},i.prototype.setValue=function(e,t,o){var r=ei.getFieldIndex(this._dp,t);this._dp.setValue(e,r,o)},i.prototype.getRows=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=-1),this._dp.getRows(e,t)},i.prototype.getJsonRow=function(e,t){return this._dp.getRowObject(e,t)},i.prototype.getJsonRows=function(e,t,o){return e===void 0&&(e=0),t===void 0&&(t=-1),o===void 0&&(o=!1),this._dp.getRowObjects(e,t,o)},i.prototype.getOutputRow=function(e,t){return this._dp.getOutputObject(e,t)},i.prototype.getOutputRows=function(e,t,o){return t===void 0&&(t=0),o===void 0&&(o=-1),this._dp.getOutputObjects(e,t,o)},i.prototype.getFieldValues=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=-1);var r=ei.getFieldIndex(this._dp,e);return this._dp.getFieldValues(r,t,o)},i.prototype.searchDataRow=function(e){return e?this._dp.searchDataRow(e):-1},i.prototype.searchData=function(e){return e?this._dp.searchData(e):null},i.prototype._createProvider=function(e){return new $a(e,this)},i.prototype._createListener=function(e){return new J_(this,e)},i}(za),_h=function(a){function i(e){e===void 0&&(e=!1);var t=a.call(this,e)||this;return t.onRowCountChanged=null,t.onRowAdding=null,t.onRowAdded=null,t.onRowsAdded=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdating=null,t.onRowsUpdated=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowSiblingMoving=null,t.onRowSiblingMoved=null,t.onRowsSiblingMoving=null,t.onRowsSiblingMoved=null,t.onRowParentChanging=null,t.onRowParentChanged=null,t}return w(i,a),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRows=function(e,t,o,r,n){o===void 0&&(o=!1),this._dp.setRows(e,t,o,r,n)},i.prototype.setCsvRows=function(e,t,o,r,n){this._dp.setCsvRows(e,t,o,r,n)},i.prototype.setXmlRows=function(e,t,o,r){this._dp.setXmlRows(e,t,o,r)},i.prototype.setObjectRows=function(e,t,o,r){this._dp.setJsonRows(e,t,o,r)},i.prototype.setNestedRows=function(e,t,o,r,n){this._dp.setJsonRows2(e,t,o,r,n)},i.prototype.fillJsonData=function(e,t){var o=new Xi(t);try{ei.fillTreeData(this._dp,"json",e,o)}finally{o.dispose(),o=null}},i.prototype.fillXmlData=function(e,t){var o=new Xi(t);try{ei.fillTreeData(this._dp,"xml",e,o)}finally{o.dispose(),o=null}},i.prototype.fillCsvData=function(e,t){var o=new Xi(t);try{ei.fillTreeData(this._dp,"csv",e,o)}finally{o.dispose(),o=null}},i.prototype.getIconIndex=function(e){return this._dp.rowById(e).iconIndex},i.prototype.setIconIndex=function(e,t){this._dp.rowById(e).iconIndex=t},i.prototype.getParent=function(e){var t=this._dp.rowById(e);return t&&t.parent?t.parent.rowId:-1},i.prototype.getLevel=function(e){return this._dp.rowById(e).level},i.prototype.getChildCount=function(e){var t=this._dp;if(e==null||e==-1)return t.getChildCount(null);var o=t.rowById(e);return o&&o.children?o.children.length:0},i.prototype.getChildren=function(e){var t,o=this._dp;return e==null||e==-1?t=o.getRows(null):t=o.rowById(e).children,ei.extractTreeRows(t)},i.prototype.getDescendantCount=function(e){var t=this._dp;return e==null||e==-1?t.getDescendantCount(null):t.rowById(e).descendantCount},i.prototype.getDescendants=function(e,t){t===void 0&&(t=-1);var o=null,r=this._dp;e!=null&&e!=-1&&(o=r.rowById(e));var n=r.getDescendants(o,t);return ei.extractTreeRows(n)},i.prototype.getAncestors=function(e){var t=this._dp.rowById(e);return t&&t.ancestors?ei.extractTreeRows(t.ancestors):null},i.prototype.getJsonRow=function(e,t,o,r,n,s){r===void 0&&(r="rows"),n===void 0&&(n="iconIndex"),s===void 0&&(s=-1);var l=this._dp,u=e==null||e<0?l.rootRow:l.rowById(e);if(u){var h=u.getObject()||{};return t&&(h.__rowState=u.rowState),o&&s!==0&&(h[r]=u.getChildObjects(o,r,n,!1,t,s-1)),h}return null},i.prototype.getJsonRows=function(e,t,o,r,n){t===void 0&&(t=!1),o===void 0&&(o="rows"),r===void 0&&(r="iconIndex");var s=this._dp,l=e==null||e<=-1?s.rootRow:s.rowById(e);return l?l.getChildObjects(t,o,r,!0,n):null},i.prototype.getOutputRow=function(e,t,o){o===void 0&&(o="iconIndex");var r,n=new Fr(e);try{var s=this._dp,l=t==null||t<0?s.rootRow:s.rowById(t);r=l?l.getOutput(n,o):null}finally{n.dispose()}return r},i.prototype.getOutputRows=function(e,t,o,r,n){o===void 0&&(o=!1),r===void 0&&(r="rows"),n===void 0&&(n="iconIndex");var s,l=new Fr(e);try{var u=this._dp,h=t==null||t<=-1?u.rootRow:u.rowById(t);s=h?h.getChildOutputObjects(l,o,r,n):null}finally{l.dispose()}return s},i.prototype.addChildRow=function(e,t,o,r){o===void 0&&(o=-1),r===void 0&&(r=!1);var n=this._dp,s=n.rowById(e)||n.rootRow,l=n.createRow(t,o,r);return s.addChild(l,!1)?l.rowId:-1},i.prototype.insertChildRow=function(e,t,o,r,n){r===void 0&&(r=-1),n===void 0&&(n=!1);var s=this._dp,l=s.rowById(e)||s.rootRow,u=s.createRow(o,r,n);return l.insertChild(t,u,!1)?u.rowId:-1},i.prototype.insertChildNode=function(e,t,o,r,n,s){r===void 0&&(r="rows"),n===void 0&&(n="iconField"),s===void 0&&(s=!1);var l=this._dp,u=e==null||e<0?l.rootRow:l.rowById(e);if(u)return l.insertChildNode(u,t,o,r,n,s)},i.prototype.updateRow=function(e,t,o){var r=this._dp.rowById(e);return!!r&&r.update(t,o)},i.prototype.updateRows=function(e,t,o){this._dp.updateRows(e,t,o)},i.prototype.removeRow=function(e,t){var o=this._dp.rowById(e);return!(!o||!o.parent)&&o.parent.removeChild(o,t)},i.prototype.removeRows=function(e,t){return!!(e&&e.length>0)&&this._dp.removeRows(e,t)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.hideRows=function(e){this._dp.hideRows(e)},i.prototype.showHiddenRows=function(e){this._dp.showRows(e)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(e){return this._dp.isHiddenRow(e)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.getValue=function(e,t){var o=this._dp,r=o.rowById(e),n=ei.getFieldIndex(o,t);return r?r.getValue(n):null},i.prototype.setValue=function(e,t,o){var r=this._dp,n=r.rowById(e),s=ei.getFieldIndex(r,t);n&&n.setValue(s,o,!1)},i.prototype.moveRowSibling=function(e,t){var o=this._dp,r=o.rowById(e);return!!r&&o.changeRowIndex(r,t)},i.prototype.changeRowParent=function(e,t,o){var r=this._dp,n=r.rowById(e),s=t<0?r.rootRow:r.rowById(t);return!(!n||!s)&&r.changeRowParent(n,s,o)},i.prototype.searchDataRow=function(e){return e?this._dp.searchDataRow(e,e.parentId):-1},i.prototype.searchData=function(e){return e?this._dp.searchData(e,e.parentId):null},i.prototype._createProvider=function(e){return new gs(e,this)},i.prototype._createListener=function(e){return new Z_(this,e)},i}(za),J_=function(a){function i(e,t){var o=a.call(this)||this;return o._del=e,o._provider=t,o._provider.addListener(o),o}return w(i,a),i.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},i.prototype.onDataProviderRowCountChanged=function(e){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,e.rowCount):v.log("onRowCountChanged: "+e.rowCount)},i.prototype.onDataProviderRowUpdating=function(e,t,o){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,t):(v.log("onRowUpdating: "+t),!0)},i.prototype.onDataProviderRowUpdated=function(e,t){this._del.onRowUpdated?this._del.onRowUpdated(this._del,t):v.log("onRowUpdated: "+t)},i.prototype.onDataProviderRowsUpdated=function(e,t,o){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,t,o):v.log("onRowsUpdated: "+t+", "+o)},i.prototype.onDataProviderRowListUpdated=function(e,t){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,t):v.log("onRowListUpdated: "+t)},i.prototype.onDataProviderRowInserting=function(e,t,o){return this._del.onRowInserting?this._del.onRowInserting(this._del,t,o):(v.log("onRowInserting: "+t),!0)},i.prototype.onDataProviderRowInserted=function(e,t){this._del.onRowInserted?this._del.onRowInserted(this._del,t):v.log("onRowInserted: "+t)},i.prototype.onDataProviderRowsInserted=function(e,t,o){this._del.onRowsInserted?this._del.onRowsInserted(this._del,t,o):v.log("onRowsInserted: "+t+", "+o)},i.prototype.onDataProviderRowRemoving=function(e,t){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,t):(v.log("onRowDeleting: "+t),!0)},i.prototype.onDataProviderRowRemoved=function(e,t){this._del.onRowDeleted?this._del.onRowDeleted(this._del,t):v.log("onRowDeleted: "+t)},i.prototype.onDataProviderRowsRemoving=function(e,t){return!0},i.prototype.onDataProviderRowsRemoved=function(e,t){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,t):v.log("onRowsDeleted: ",t)},i.prototype.onDataProviderRowMoving=function(e,t,o){return this._del.onRowMoving?this._del.onRowMoving(this._del,t,o):(v.log("onRowMoving: "+t+", "+o),!0)},i.prototype.onDataProviderRowMoved=function(e,t,o){this._del.onRowMoved?this._del.onRowMoved(this._del,t,o):v.log("onRowMoved: "+t+", "+o)},i.prototype.onDataProviderRowsMoving=function(e,t,o,r){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,t,o,r):(v.log("onRowsMoving: "+t+", "+o+", "+r),!0)},i.prototype.onDataProviderRowsMoved=function(e,t,o,r){this._del.onRowsMoved?this._del.onRowsMoved(this._del,t,o,r):v.log("onRowsMoved: "+t+", "+o+", "+r)},i.prototype.onDataProviderRowListMoving=function(e,t,o){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,t,o):(v.log("onRowListMoving: ",t,", ",o),!0)},i.prototype.onDataProviderRowListMoved=function(e,t,o){this._del.onRowListMoved?this._del.onRowListMoved(this._del,t,o):v.log("onRowListMoved: ",t,o)},i.prototype.onDataProviderValueChanged=function(e,t,o){this._del.onValueChanged?this._del.onValueChanged(this._del,t,o):v.log("onValueChanged:"+t+", "+o)},i.prototype.onDataProviderDataChanged=function(e){this._del.onDataChanged?this._del.onDataChanged(this._del):v.log("onDataChanged")},i.prototype.onDataProviderStateChanged=function(e,t){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,t):v.log("onRowStateChanged: "+t)},i.prototype.onDataProviderStatesChanged=function(e,t){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,t):v.log("onRowStatesChanged",t)},i.prototype.onDataProviderStatesCleared=function(e){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):v.log("onRowStatesCleared")},i.prototype.onDataProviderRestoreRows=function(e,t){this._del.onRestoreRows?this._del.onRestoreRows(this._del,t):v.log("onRestoreRows",t)},i}(Ua),Z_=function(a){function i(e,t){var o=a.call(this)||this;return o._del=e,o._provider=t,o._provider.addListener(o),o}return w(i,a),i.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},i.prototype.onTreeDataProviderRowCountChanged=function(e){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,e.rowCount):v.log("onRowCountChanged: "+e.rowCount)},i.prototype.onTreeDataProviderRowAdding=function(e,t,o,r){return this._del.onRowAdding?this._del.onRowAdding(this._del,t.rowId,o,r._values):(v.log("onRowAdding: "+t.rowId+", "+o,r._values),!0)},i.prototype.onTreeDataProviderRowAdded=function(e,t){this._del.onRowAdded?this._del.onRowAdded(this._del,t.rowId):v.log("onRowAdded: "+t.rowId)},i.prototype.onTreeDataProviderRowsAdded=function(e,t,o){var r=ei.extractTreeRows(o);this._del.onRowsAdded?this._del.onRowsAdded(this._del,t.rowId,r):v.log("onRowsAdded: "+t.rowId,r)},i.prototype.onTreeDataProviderRowRemoving=function(e,t){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,t.rowId):(v.log("onRowDeleting: "+t.rowId),!0)},i.prototype.onTreeDataProviderRowRemoved=function(e,t){this._del.onRowDeleted?this._del.onRowDeleted(this._del,t.rowId):v.log("onRowDeleted: "+t.rowId)},i.prototype.onTreeDataProviderRowsRemoved=function(e,t){var o=ei.extractTreeRows(t);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,o):v.log("onRowsDeleted: ",o)},i.prototype.onTreeDataProviderRowUpdating=function(e,t){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,t.rowId):(v.log("onRowUpdating:"+t.rowId),!0)},i.prototype.onTreeDataProviderRowUpdated=function(e,t){this._del.onRowUpdated?this._del.onRowUpdated(this._del,t.rowId):v.log("onRowUpdated: "+t.rowId)},i.prototype.onTreeDataProviderRowsUpdating=function(e,t){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,$r.getRowIds(t)):(v.log("onRowUpdating:"+t.length),!0)},i.prototype.onTreeDataProviderRowsUpdated=function(e,t){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,$r.getRowIds(t)):v.log("onRowsUpdated: "+t.length)},i.prototype.onTreeDataProviderValueChanged=function(e,t,o){this._del.onValueChanged?this._del.onValueChanged(this._del,t.rowId,o):v.log("onValueChanged: "+t.rowId+", "+o)},i.prototype.onTreeDataProviderRowStateChanged=function(e,t){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,t.rowId):v.log("onRowStateChanged: "+t.rowId)},i.prototype.onTreeDataProviderRowStatesChanged=function(e,t){var o=ei.extractTreeRows(t);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,o):v.log("onRowStatesChanged: ",o)},i.prototype.onTreeDataProviderRowSiblingMoving=function(e,t,o){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,t.rowId,o):(v.log("onRowSiblingMoveing: "+t.rowId+", "+o),!0)},i.prototype.onTreeDataProviderRowSiblingMoved=function(e,t,o){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,t.rowId,o):v.log("onSiblingMoved: "+t.rowId+", "+o)},i.prototype.onTreeDataProviderRowsSiblingMoving=function(e,t,o){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,$r.getRowIds(t),o):(v.log("onRowSiblingMoveing: ",t,o),!0)},i.prototype.onTreeDataProviderRowsSiblingMoved=function(e,t,o){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,$r.getRowIds(t),o):v.log("onSiblingMoved: ",t,o)},i.prototype.onTreeDataProviderRowParentChanging=function(e,t,o,r){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,t.rowId,o.rowId,r);v.log("onRowParentChanging: "+t.rowId+", "+o.rowId+", "+r)},i.prototype.onTreeDataProviderRowParentChanged=function(e,t,o,r){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,t.rowId,o.rowId,r):v.log("onRowParentChanged: "+t.rowId+", "+o.rowId+", "+r)},i}(Ua),Hi=function(){function a(i){this.field=i,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return a.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},a}(),Ya=65536,qa=131072,gh=196608,yh=4294705152;c.ItemState=void 0,(Vr=c.ItemState||(c.ItemState={})).NORMAL="normal",Vr.FOCUSED="focused",Vr.UPDATING="updating",Vr.INSERTING="inserting",Vr.APPENDING="appending",Vr.DUMMY="dummy";var ai=function(a){return a==c.ItemState.UPDATING||a==c.ItemState.INSERTING||a==c.ItemState.APPENDING},Ei=function(a){return a==c.ItemState.INSERTING||a==c.ItemState.APPENDING},Q_=function(){function a(){}return a.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},a.prototype.assign=function(i){typeof i=="string"?this.styleName=i:(i.readOnly!=null&&(this.readOnly=i.readOnly),i.editable!=null&&(this.editable=i.editable),i.styleName!=null&&(this.styleName=i.styleName.trim()),i.style!=null&&(this.style=i.style),i.exportStyleName!=null&&(this.exportStyleName=i.exportStyleName))},a}(),kt=function(){function a(){this._id=a.$$_grid_item_id++,this._index=-1}return a.prototype.dispose=function(){this._parent=null},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"itemIndex",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"root",{get:function(){for(var i=this._parent;i&&i.level>1;)i=i._parent;return i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isData",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isDataRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._parent&&this._index>=0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataRow",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataRowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rowState",{get:function(){var i=this.dataRow;if(i>=0){var e=this.dataSource;return e?e.getRowState(i):c.RowState.NONE}return c.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"itemState",{get:function(){return c.ItemState.NORMAL},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"checked",{get:function(){var i=(1&this._getExtents())!=0;return this.provider.getItemChecked(this,i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"checkable",{get:function(){return(4&this._getExtents())==0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"readOnly",{get:function(){return(8&this._getExtents())!=0},set:function(i){this._setExtents(i?8|this._getExtents():-9&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"merged",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){var i=this._getExtents();return i&gh?(i&yh)>>>18:NaN},enumerable:!1,configurable:!0}),a.prototype.$_setHeight=function(i,e){var t=this._getExtents();if(i=Math.round(i),isNaN(i)){if(t&gh)return this._setExtents(-196609&t),!0}else{if(i!=(t&yh)>>>18)return i=Math.max(0,Math.min(53247,i))<<18,t=e?-196609&t|qa:-196609&t|Ya,this._setExtents(262143&t|i),!0;if(e){if(!(t&qa))return t=-196609&t|qa,this._setExtents(t),!0}else if(!(t&Ya))return t=-196609&t|Ya,this._setExtents(t),!0}},a.prototype.$_clearHeight=function(i){i?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),this.heights=null,this.index==0&&v.log("HEIGHT",this.height)},Object.defineProperty(a.prototype,"heights",{get:function(){return this._heights},set:function(i){this._heights=i},enumerable:!1,configurable:!0}),a.prototype.getShadowRow=function(){return this.dataRow},a.prototype.getHeight=function(i){return this._heights[i]},a.prototype.setChecked=function(i,e){var t=this.provider;t&&t.checkItem(this,i,void 0,e)},a.prototype.setCheckable=function(i){var e=this.provider;e&&e.setCheckable(this,i)},a.prototype.getAncestor=function(i){if(i<this.level){for(var e=this._parent;e.level>i;)e=e._parent;return e}return this instanceof ft?this:null},a.prototype.getVisibleAncestor=function(){var i=this._parent;do{if(i.visible)return i;i=i._parent}while(i)},a.prototype.getAncestors=function(){var i=null,e=this._parent;if(e){i=[];do i.push(e),e=e._parent;while(e)}return i},a.prototype.isDescendantOf=function(i){if(i){for(var e=this._parent;e&&e!=i;)e=e._parent;return e===i}return!1},a.prototype.getData=function(i){var e=this.dataSource;i=e.getFieldIndex(i);var t=this.getShadowRow();return e&&t>=0?e.getValue(t,i):void 0},a.prototype.setData=function(i,e){var t=this.dataSource;i=t.getFieldIndex(i),t&&t.setValue(this.dataRow,i,e)},a.prototype.getRowData=function(){var i=this.dataRow;if(i>=0){var e=this.dataSource;if(e)return e.getRow(i)}return null},a.prototype.getRowObject=function(){var i=this.dataRow;if(i>=0){var e=this.dataSource;if(e)return e.getRowObject(i)}return null},a.prototype.isChanged=function(i){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,i):void 0},a.prototype.canEdit=function(){return!1},a.prototype._setIndex=function(i){this._index=i},a.prototype._setChecked=function(i){this.provider.setItemChecked(this,i)||this._setExtents(i?1|this._getExtents():-2&this._getExtents())},a.prototype._setCheckable=function(i){this._setExtents(i?-5&this._getExtents():4|this._getExtents())},a.PARENT="_parent",a.$$_grid_item_id=0,a}(),Tt=function(a){function i(e){var t=a.call(this)||this;return t._displayLevel=-1,t._extents=0,t._dataRow=e,t}return w(i,a),Object.defineProperty(i.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(e,t){this._editable=e,this._readOnly=t},i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(e){this._extents=e},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return c.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){return!0},i.prototype.getShadowRow=function(){return this._dataRow},i.prototype.$_setDisplayLevel=function(e){this._displayLevel=e},i}(kt),ft=function(a){function i(){var e=a.call(this)||this;return e._children=[],e._expanded=!1,e._descendantCount=0,e._summaries=null,e._rows=null,e}return w(i,a),i.prototype.dispose=function(){this._children=null,a.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return!this._rows&&this.$_collectRows(this,this._rows=[]),this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._children.length>0?this._children[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var e=this._children.length;return e>0?this._children[e-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstItem",{get:function(){if(this._children.length>0){var e=this._children[0];return e instanceof i?e.firstItem:e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstDataItem",{get:function(){if(this._children.length>0)for(var e=0,t=this._children.length;e<t;e++){if(this._children[e]instanceof i)return this._children[e].firstDataItem;if(this._children[e]instanceof Tt)return this._children[e]}return null},enumerable:!1,configurable:!0}),i.prototype.getFirstVisibleItem=function(e){return this},i.prototype.getLastItem=function(e){var t;if(this._children.length>0){for(var o=this._children.length;o&&(t=this._children[o-1],e&&t instanceof Kt);o--);return t instanceof i?t.getLastItem(e):t}return null},Object.defineProperty(i.prototype,"lastDataItem",{get:function(){var e=this._children.length;if(e>0)for(;e>0;e--){var t=this._children[e-1];if(t instanceof i)return t.lastDataItem;if(t instanceof Tt)return t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getItem=function(e){if(e<0||e>=this._children.length)throw new RangeError("index is invalid: "+e);return this._children[e]},i.prototype.getRows=function(){var e=[];return this.$_collectRows(this,e),e},i.prototype.getFooterIndex=function(e){return 0},i.prototype.itemOfRow=function(e){for(var t=this._children.length;t--;)if(this._children[t].dataRow==e)return this._children[t];return null},i.prototype.indexOf=function(e){for(var t=this._children.length-1;t>=0;t--)if(this._children[t]==e)return t;return-1},i.prototype.isDescendant=function(e){if(e&&e!==this){for(var t=e._parent;t&&t!==this;)t=t._parent;return t===this}return!1},i.prototype.getDescendants=function(e){if((!e||this._expanded)&&this._children&&this._children.length>0){var t=[];return function o(r,n){for(var s=r.count,l=0;l<s;l++){var u=r.getItem(l);n.push(u),u instanceof i&&(!e||u.expanded)&&o(u,n)}}(this,t),t}return null},i.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},i.prototype.insert=function(e,t){this._addChild(t,e)},i.prototype.add=function(e){this._addChild(e,-1)},i.prototype.addAll=function(e){var t,o=this,r=e.map(function(n){return n[kt.PARENT]=o,n});(t=this._children).push.apply(t,r)},i.prototype.remove=function(e){var t=this.indexOf(e);t>=0&&(this._children.splice(t,1),e instanceof kt&&(e[kt.PARENT]=null))},i.prototype.setItem=function(e,t){if(e&&t&&e!==t){var o=this._removeChild(e);this._insertChild(o,t),t._index=e.index}},i.prototype.setExpanded=function(e,t,o){(e!=this._expanded||o)&&(e?this.provider.expand(this,t,o,0):this.provider.collapse(this,t,o))},i.prototype.getNumber=function(e){var t=this.$_getSummary(e);return t instanceof Hi?t.count:t?t.length:this._descendantCount},i.prototype.getDataCount=function(e){var t=this.$_getSummary(e);if(t instanceof Hi)return t.dataCount;if(t){var o=this.dataSource,r=t.length,n=0;if(r>0){for(var s=0;s<r;s++){var l=o.getValue(t[s],e);l!=null&&l!==""&&n++}return n}}return 0},i.prototype.getDataAvg=function(e){var t=this.$_getSummary(e);if(t instanceof Hi)return t.dataAvg;if(t){for(var o=this.dataSource,r=t.length,n=0,s=0,l=0;l<r;l++){var u=o.getValue(t[l],e);isNaN(u)||(n+=u,s++)}return s>0&&!isNaN(n)?n/s:NaN}return NaN},i.prototype.getSum=function(e){var t=this.$_getSummary(e);if(t instanceof Hi)return t.sum;if(t){for(var o=this.dataSource,r=t.length,n=void 0,s=0;s<r;s++){var l=o.getValue(t[s],e);isNaN(l)||(n=(isNaN(n)?0:n)+l)}return n}return NaN},i.prototype.getMax=function(e){var t=this.$_getSummary(e),o=this.dataSource,r=o.getField(e).dataType===c.ValueType.NUMBER;if(t instanceof Hi)return t.max;if(t){for(var n=t.length,s=void 0,l=0,u=null;l<n;)(s=o.getValue(t[l++],e))!=null&&(!r||!isNaN(s))&&(u=u==null||s>u?s:u);return u}return r?NaN:null},i.prototype.getMin=function(e){var t=this.$_getSummary(e),o=this.dataSource,r=o.getField(e).dataType===c.ValueType.NUMBER;if(t instanceof Hi)return t.min;if(t){for(var n=t.length,s=void 0,l=0,u=null;l<n;)(s=o.getValue(t[l++],e))!=null&&(!r||!isNaN(s))&&(u=u==null||s<u?s:u);return u}return r?NaN:null},i.prototype.getAvg=function(e){var t=this.$_getSummary(e);if(t instanceof Hi)return t.avg;if(t){var o=this.getSum(e);if(!isNaN(o))return o/t.length}return NaN},i.prototype.getVar=function(e,t){t===void 0&&(t=0);var o=this.$_getSummary(e);if(o instanceof Hi)return t===0?o.varsp:o.vars;if(o&&this.provider.summaryMode==c.SummaryMode.STATISTICAL){var r=this.dataSource,n=o.length;if(n>1){for(var s=0,l=0;l<n;l++)s+=r.getValue(o[l],e);var u=s/n;for(s=0,l=0;l<n;l++)s+=Math.pow(r.getValue(o[l],e)-u,2);return s/=n-t}if(n==1)return 0}return NaN},i.prototype.getStdev=function(e,t){t===void 0&&(t=0);var o=this.$_getSummary(e);if(o instanceof Hi)return t==0?Math.sqrt(o.varsp):Math.sqrt(o.vars);if(o&&this.provider.summaryMode==c.SummaryMode.STATISTICAL){var r=this.dataSource,n=o.length;if(typeof e=="string"&&(e=r.getFieldIndex(e)),n>1){for(var s=0,l=0;l<n;l++)s+=r.getValue(o[l],e);var u=s/n;for(s=0,l=0;l<n;l++)s+=Math.pow(r.getValue(o[l],e)-u,2);return s=Math.sqrt(s/(n-t))}if(n==1)return 0}return NaN},i.prototype.getStdevp=function(e){return this.getStdev(e,1)},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype._setExpanded=function(e){this._expanded=e},i.prototype._incDescendants=function(e){e===void 0&&(e=1),this._descendantCount+=e},i.prototype._insertChild=function(e,t){this._children.splice(e,0,t),t instanceof kt&&(t[kt.PARENT]=this)},i.prototype._addChild=function(e,t){e&&this.indexOf(e)<0&&(t<0?this._children.push(e):this._children.splice(t,0,e),e[kt.PARENT]=this)},i.prototype._addChildren=function(e){var t;if(e&&(t=e.length)>0)for(var o=0;o<t;o++){var r=e[o];r&&this.indexOf(r)<0&&(r[kt.PARENT]=this,this._children.push(r))}},i.prototype._removeChild=function(e){var t=this.indexOf(e);return t>=0&&(this._children.splice(t,1),e instanceof kt&&(e[kt.PARENT]=null)),t},i.prototype._exchangeItems=function(e,t){if(e<0||e>=this._children.length)throw new RangeError("index1 is out of range: "+e);if(t<0||t>=this._children.length)throw new RangeError("index2 is out of range: "+t);if(e!==t){var o=this._children[e];this._children[e]=this._children[t],this._children[t]=o}},i.prototype._moveChild=function(e,t){var o=this._children.length;if(e<0||e>=o)throw new RangeError("index is out of range: "+e);var r=Math.min(Math.max(e+t,0),o-1),n=this._children[e];if(t<0)for(var s=e;s>r;s--)this._children[s]=this._children[s-1];else for(s=e;s<r;s++)this._children[s]=this._children[s+1];this._children[r]=n},i.prototype.$_collectRows=function(e,t){for(var o=e.count,r=0;r<o;r++){var n=e.getItem(r);n instanceof i?this.$_collectRows(n,t):n.isDataRow&&t.push(n.dataRow)}},i.prototype.$_getSummary=function(e){var t=this.dataSource;if(!(t instanceof Na))return null;this._summaries==null&&(this._summaries={}),typeof e=="string"&&(e=t.getFieldIndex(e));var o=this._summaries?this._summaries[e]:null;return o||t.canSummarize(e)&&(o=this.$_summarize(e,t))&&(this._summaries[e]=o),o},i.prototype.$_summarize=function(e,t){var o=this.provider.summaryMode;if(o!=c.SummaryMode.NONE){if(this._rows==null&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&t.canSummarize(e)){var r=new Hi(e);return t.summarizeRange(r,this._rows,o==c.SummaryMode.STATISTICAL),r}return this._rows}return null},i.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},i.prototype._restoreExpanded=function(e){if(e===void 0&&(e=!1),this._setExpanded((16&this._getExtents())!=0),e)for(var t=this.count-1;t>=0;t--){var o=this.getItem(t);o instanceof i&&o._restoreExpanded(!0)}},i}(kt),Ht=function(a){function i(e){var t=a.call(this)||this;return t._footers=0,t._extents=0,t._allFooters=[],t._groupField=e,t}return w(i,a),i.prototype.dispose=function(){this._allFooters=null,a.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"groupField",{get:function(){return this._groupField},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupValue",{get:function(){return this._groupValue},set:function(e){this._groupValue=e},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(e){this._extents=e},Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return c.ItemType.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return this._allFooters.length},enumerable:!1,configurable:!0}),i.prototype.getHiddenFooterCount=function(){for(var e=0,t=0;t<this.children.length;t++)this.children[t].hiddenFooter&&e++;return e},i.prototype.getFooter=function(e){return e=this.indexOf(this._footer)+e,this._children[e]},i.prototype.getFooterIndex=function(e){return e.$_footerIndex},i.prototype.isFooter=function(e){if(e===this._footer)return!0;if(this._footers>1)for(var t=this._children,o=t.length-1;o>=0;o--){if(t[o]===e)return!0;if(t[o]===this._footer)break}return!1},i.prototype._addChild=function(e,t){e instanceof Kt?(this._allFooters.push(e),e[kt.PARENT]=this,e.hiddenFooter||(a.prototype._addChild.call(this,e,t),this._footer=this._footer||e,this._footers++)):a.prototype._addChild.call(this,e,t)},i.prototype.getFirstVisibleItem=function(e){if(this.visible)return this;for(var t=0,o=this.children.length;t<o;t++){var r=this.children[t];if(e&&this.footer&&this.footer.visible)return this.footer;if(r instanceof ft){var n=r.getFirstVisibleItem(e);if(n)return n}else if(r.visible)return r}return null},i}(ft),Kt=function(a){function i(){var e=a.call(this)||this;return e.$_footerIndex=0,e._hiddenFooter=!1,e._extents=0,e}return w(i,a),Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(e){this._hiddenFooter=e},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(e){this._extents=e},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return c.ItemType.FOOTER},enumerable:!1,configurable:!0}),i}(kt),zo=function(a){function i(e){var t=a.call(this,-1)||this;return t._provider=e,t}return w(i,a),Object.defineProperty(i.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsable",{get:function(){return!1},enumerable:!1,configurable:!0}),i}(Ht),Ka=function(a){function i(e){var t=a.call(this)||this;return t._hideDeleted=!1,t._eventLock=0,t._rowHeighted=!1,t._explicitHeighted=!1,t._indexing=e,t._rootItem=t._createRootItem(),t}return w(i,a),i.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(e){e!=this._hideDeleted&&(this._hideDeleted=e,this._hideDeletedChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return c.SummaryMode.AGGREGATE},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return c.SortMode.AUTO},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return 0},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.setFixed=function(e,t,o,r){},i.prototype.attachItem=function(e){e._parent=this._rootItem},i.prototype.getItemsByIndices=function(e){var t=[];if(e)for(var o=0,r=e.length;o<r;o++){var n=this.getItem(e[o]);n&&t.push(n)}return t},i.prototype.getIndexOfRow=function(e,t){var o=this.getItemOfRow(e,t);return o?o.index:-1},i.prototype.getIndicesOfRows=function(e,t){var o=[],r=e?e.length:0;if(r)for(var n=0;n<r;n++){var s=this.getItemOfRow(e[n],t);o.push(s?s.index:-1)}return o},i.prototype.getItemsByRows=function(e,t){t===void 0&&(t=!1);for(var o=[],r=e?e.length:0,n=0;n<r;n++){var s=this.getItemOfRow(e[n],t);s&&o.push(s)}return o},i.prototype.exchange=function(e,t){},i.prototype.setCheckable=function(e,t){e&&t!=e.checkable&&(e._setCheckable(t),this._fireCheckableChanged(e))},i.prototype.setGroupCheckable=function(e){},i.prototype.checkItem=function(e,t,o,r){if(e){var n=e.checked;o?(this._clearChecked(),t&&this._setChecked(e,!0),t!=n&&r&&this._fireItemChecked(e),this._fireRefreshClient()):t!=n&&(this._setChecked(e,t),r?this._fireItemChecked(e):this._fireRefreshClient()),this._fireItemCheckChanged([e],t)}},i.prototype.checkItems=function(e,t,o){if(e&&e.length>0){for(var r=0,n=e.length;r<n;r++){var s=e[r];s instanceof kt&&this._setChecked(s,t)}o?e.length===1?this._fireItemChecked(e[0]):this._fireItemsChecked(e,t):this._fireRefreshClient()}this._fireItemCheckChanged(e,t)},i.prototype.checkAll=function(e,t,o,r,n){var s=this.itemCount;if(o)for(var l=0;l<s;l++){var u=this.getItem(l);u.checkable&&this._setChecked(u,e)}else for(l=0;l<s;l++)this._setChecked(this.getItem(l),e);r?this._fireItemAllChecked(e):this._fireRefreshClient(),this._fireItemCheckChanged(null,e)},i.prototype._setCheckItem=function(e,t){e._setChecked(t)},i.prototype._clearDisplayLevels=function(){},i.prototype.canUpdate=function(e,t){if(e){var o=this.dataSource;if(!o)return!1;var r=e.dataRow;if(!o.canUpdateField(r,t))return!1;var n=e.itemState,s=Ei(n)||n===c.ItemState.DUMMY;return(r>=0||s)&&(s||o.canUpdateRow(r))}return!1},i.prototype.canAppend=function(){var e=this.dataSource;return e&&e.canAppendRow()},i.prototype.canInsert=function(e){if(e){var t=e.dataRow,o=this.dataSource;return o&&o.canInsertRow(t)}return!1},i.prototype.canDelete=function(e){if(e){var t=e.dataRow,o=this.dataSource;return t>=0&&o&&o.canDeleteRow(t)}return!1},i.prototype.appendDummy=function(){},i.prototype.cancelDummy=function(){},i.prototype.findItem=function(e,t,o,r,n){return-1},i.prototype.findCell=function(e,t,o,r,n,s){return null},i.prototype.getNumber=function(e){return NaN},i.prototype.getSum=function(e){return NaN},i.prototype.getMax=function(e){return NaN},i.prototype.getMin=function(e){return NaN},i.prototype.getAvg=function(e){return NaN},i.prototype.getVar=function(e){return NaN},i.prototype.getVarp=function(e){return NaN},i.prototype.getStdev=function(e){return NaN},i.prototype.getStdevp=function(e){return NaN},i.prototype.getDataCount=function(e){return NaN},i.prototype.getDataAvg=function(e){return NaN},Object.defineProperty(i.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!1,configurable:!0}),i.prototype.setRowHeight=function(e,t,o){e.$_setHeight(t,o)&&(isNaN(t)||(o?this._explicitHeighted=!0:this._rowHeighted=!0))},i.prototype.clearRowHeights=function(e){if(e||this._rowHeighted){for(var t=!1,o=this.itemCount-1;o>=0;o--){var r=this.getItem(o);isNaN(r.height)&&!r.heights||(r.$_clearHeight(e),r.heights=null,t=!0)}return this._rowHeighted=!1,e&&(this._explicitHeighted=!1),t}},i.prototype.isRowHeighted=function(e){return e===void 0&&(e=!0),this._rowHeighted||e&&this._explicitHeighted},i.prototype.setCheckFieldIndex=function(e){this._checkFieldIndex=e},i.prototype.getItemChecked=function(e,t){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(e.getData(this._checkFieldIndex)):t},i.prototype.setItemChecked=function(e,t){if(this._checkFieldIndex>-1){var o=this.dataSource.getField(this._checkFieldIndex),r=o.readBooleanValue(e.getData(this._checkFieldIndex));return!!r!=t&&(r=(o._boolParser||o._ownerBoolParser).toText(t),e.setData(this._checkFieldIndex,r)),!0}return!1},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!1,configurable:!0}),i.prototype._createRootItem=function(){return new zo(this)},i.prototype._hideDeletedChanged=function(){},i.prototype.$_canFire=function(){return this._eventLock<=0},i.prototype._setChecked=function(e,t){e._setChecked(t)},i.prototype._clearChecked=function(){for(var e=0,t=this.itemCount;e<t;e++)this._setChecked(this.getItem(e),!1)},i.prototype._resetItemIndicies=function(e){if(this._indexing)for(var t=e,o=this.itemCount;t<o;t++)this.getItem(t)._index=t},i.prototype._setExpanded=function(e,t){e._setExpanded(t)},i.prototype._resetItemIndex=function(e){var t=this.getItem(e);t&&(t._index=e)},i.prototype._incDescendents=function(e,t){e._descendantCount+=t,e.parent&&this._incDescendents(e.parent,t)},i.prototype._copyExtents=function(e,t){e instanceof kt&&t instanceof kt&&t._setExtents(e._getExtents())},i.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onItemProviderReset")},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},i.prototype._fireItemInserted=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",e)},i.prototype._fireItemDeleted=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",e)},i.prototype._fireItemUpdated=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",e)},i.prototype._fireCheckableChanged=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",e)},i.prototype._fireItemChecked=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",e)},i.prototype._fireItemsChecked=function(e,t){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",e,t)},i.prototype._fireItemAllChecked=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",e)},i.prototype._fireItemCheckChanged=function(e,t){this.fireEvent("onItemProviderItemCheckChanged",e,t)},i.prototype._fireRowStateChanged=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",e)},i.prototype._fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",e)},i.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},i.prototype._fireSort=function(e,t,o){this._eventLock<=0&&this.fireEvent("onItemProviderSort",e,t,o)},i.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},i.prototype._fireFiltered=function(e,t){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",e,t)},i.prototype._fireCommandStackChanged=function(e,t){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",e,t)},i.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")},i.prototype.canGrouping=function(e){return!1},i}(Mt),mh=function(a){function i(e,t){var o=a.call(this,t)||this;return o._initialize(),o.source=e,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(e){e!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=e,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(e){this._source&&(this._source.dataSource=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._source?this._source.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(e){this._source&&(this._source.maxItemCount=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._source&&this._source.sorted},enumerable:!1,configurable:!0}),i.prototype.setFixed=function(e,t,o,r){this._source&&this._source.setFixed(e,t,o,r)},i.prototype.getIndexOfRow=function(e){return this._source?this._source.getIndexOfRow(e,!1):-1},i.prototype.getItemOfRow=function(e,t){return this._source?this._source.getItemOfRow(e,t):null},i.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},i.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},i.prototype._initialize=function(){},i.prototype._clearItems=function(){},i.prototype._populateItems=function(){this._resetItemIndicies(0)},i.prototype.onItemProviderReset=function(e){this._populateItems(),this._fireReset()},i.prototype.onItemProviderRefresh=function(e){this._populateItems(),this._fireRefresh()},i.prototype.onItemProviderRefreshClient=function(e){this._fireRefreshClient()},i.prototype.onItemProviderItemInserted=function(e,t){this._resetItemIndicies(0),this._fireItemInserted(t)},i.prototype.onItemProviderItemDeleted=function(e,t){this._resetItemIndicies(0),this._fireItemDeleted(t)},i.prototype.onItemProviderItemUpdated=function(e,t){this._resetItemIndicies(0),this._fireItemUpdated(t)},i.prototype.onItemProviderCheckableChanged=function(e,t){this._fireCheckableChanged(t)},i.prototype.onItemProviderItemChecked=function(e,t){this._fireItemChecked(t)},i.prototype.onItemProviderItemsChecked=function(e,t,o){this._fireItemsChecked(t,o)},i.prototype.onItemProviderItemAllChecked=function(e,t){this._fireItemAllChecked(t)},i.prototype.onItemProviderItemCheckChanged=function(e,t,o){this._fireItemCheckChanged(t,o)},i.prototype.onItemProviderRowStateChanged=function(e,t){this._fireRowStateChanged(t)},i.prototype.onItemProviderRowStatesChanged=function(e,t){this._fireRowStatesChanged(t)},i.prototype.onItemProviderRowStatesCleared=function(e){this._fireRowStatesCleared()},i.prototype.onItemProviderFiltered=function(e,t,o){},i.prototype.onItemProviderSort=function(e,t,o){},i.prototype.onItemProviderSorted=function(e){},i.prototype.onItemProviderCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},i.prototype.onItemProviderDataLoadComplated=function(e){this._fireDataLoadComplated()},i}(Ka),jr=function(a){function i(e,t,o,r,n){var s=a.call(this,r)||this;return s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._target=t,e.attachItem(s),s._setIndex(o),s._state=n,s.$_setDisplayLevel(t?t.displayLevel:0),s}return w(i,a),Object.defineProperty(i.prototype,"values",{get:function(){},set:function(e){},enumerable:!1,configurable:!0}),i.prototype.beginEdit=function(e,t){this.$_clearHeight(!0)},i.prototype.setValue=function(e,t){},Object.defineProperty(i.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getData=function(e){return null},i.prototype.setData=function(e,t){},i.prototype.getRowData=function(){return null},i.prototype.getRowObject=function(){return null},i.prototype._clearDisplayLevels=function(){},i}(Tt),Hr=function(a){function i(e,t,o,r,n){var s=a.call(this,r)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=t,e.attachItem(s),s._setIndex(o),s._state=n,s.$_setDisplayLevel(t?t.displayLevel:0),s._invalidFields=[],s}return w(i,a),Object.defineProperty(i.prototype,"values",{get:function(){return this._values.concat()},set:function(e){var t=this.provider,o=this.dataSource,r=o.fieldCount;if(e instanceof Array){r=Math.min(r,e.length);for(var n=0;n<r;n++){var s=o.getField(n),l=this._values[n],u=s.readValue(e[n]);this._values[n]=u,this._started&&!s.equalValues(l,u)&&t._editItemCellUpdated(this,n,l,u)}}else if(e)for(n=0;n<r;n++){var h=o.getOrgFieldName(n);e.hasOwnProperty(h)&&(s=o.getField(n),l=this._values[n],u=s.readValue(e[h]),this._values[n]=u,this._started&&!s.equalValues(l,u)&&t._editItemCellUpdated(this,n,l,u))}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),i.prototype.beginEdit=function(e,t){Ei(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=e,this._strictDiff=t},i.prototype.setValue=function(e,t){var o=this.dataSource;if(e<0&&e>=o.fieldCount)throw new Ki(ye.messages.fieldIndexOutOfBounds+e);var r=o.getField(e),n=this._values[e];t=r.readValue(t),this._values[e]=t,this._started&&!r.equalValues(n,t)&&this.provider._editItemCellUpdated(this,e,n,t),this.$_clearHeight(!1)},Object.defineProperty(i.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._target?this._target.level:1},enumerable:!1,configurable:!0}),i.prototype.getData=function(e){if((e=this.dataSource.getFieldIndex(e))<0&&e>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+e);return this._values[e]},i.prototype.setData=function(e,t){var o=this.dataSource;if(e<0&&e>=o.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=o.getField(e),n=this._values[e],s=!this._checkDiff;t=r.readValue(t),s||(s=this._strictDiff?!r.equalValues(n,t):!r.sameValues(n,t)),s&&(this._values[e]=t,this._changeValues[e]=!0,this.provider._editItemCellUpdated(this,e,n,t),this.provider._editItemCellEdited(this,e)),this.$_clearHeight(!1)},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var e=this.dataSource;if(e){for(var t={},o=0,r=e.fieldCount;o<r;o++)t[e.getOrgFieldName(o)]=this._values[o];return t}return null},i.prototype.isEdited=function(e){return this._changeValues[e]},i.prototype._setChecked=function(e){this.provider.setItemChecked(this,e)||this._setExtents(e?1|this._getExtents():-2&this._getExtents())},i.prototype._clearDisplayLevels=function(){},i}(Tt),gi=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._checkDiff=!1,o._checkCellDiff=!1,o._strictDiff=!1,o._undoable=!1,o._cancelWhenLastUndo=!1,o._orgItem=null,o._editingItem=null,o._dummyEditItem=null,o._editingState=c.ItemState.NORMAL,o._insertMode=0,o._modified=!1,o._commiting=!1,o._saveDs=null,o._commands=new Ba(o),e&&(o._saveDs=e.dataSource)&&o._saveDs.registerClient(o),o}return w(i,a),i.prototype._doDispose=function(){this._saveDs=null,a.prototype._doDispose.call(this)},i.prototype.isDataEditing=function(){return this.isEditing()},i.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},i.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},i.prototype.editCommandStackChanged=function(e,t,o){var r=this._saveDs;r?this._fireCommandStackChanged(t||r.canUndo,o||r.canRedo):this._fireCommandStackChanged(t,o)},Object.defineProperty(i.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(e){this._checkDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(e){this._checkCellDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(e){this._strictDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._editingState==c.ItemState.UPDATING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isInserting",{get:function(){return this._editingState==c.ItemState.INSERTING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAppending",{get:function(){return this._editingState==c.ItemState.APPENDING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(e){e!=this._undoable&&(this._undoable=e,this._commands.flush(),this._saveDs.undoable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(e){this._cancelWhenLastUndo=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.isEditing=function(e){return ai(this._editingState)&&(!e||e===this._editingItem)},i.prototype.isEdited=function(e){return ai(this._editingState)&&(!e||e===this._editingItem)&&this._modified},i.prototype.setDiffs=function(e,t,o){this._checkDiff=e,this._checkCellDiff=t,this._strictDiff=o},i.prototype.edit=function(e){if(this.isEditing())return!0;if(e)try{return this._beginUpdate(e),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.editData=function(e,t,o){var r;if(e&&(r=this.dataSource)&&t>=0&&t<r.fieldCount){if(!this.isEditing())try{return this._beginUpdate(e),!0}catch(n){throw this.cancel(),n}this._editingItem.setData(t,o)}return!1},i.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch{this.cancelDummy()}},i.prototype.append=function(e){if(!this.isEditing())try{return this._beginAppend(e),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.insert=function(e,t,o,r){if(!this.isEditing())try{return this._beginInsert(e,t,o,r),!0}catch(n){throw this.cancel(),n}return!1},i.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},i.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},i.prototype.commit=function(e){if(this.isEditing()){this._commiting=!0;try{var t=this.dataSource;if(t){if(this._editingState==c.ItemState.UPDATING&&this.isCheckDiff){for(var o=this._editingItem.values,r=o.length,n=this.isStrictDiff,s=!1,l=0;l<r;l++)if(n){if(!t.getField(l).equalValues(this._orgItem.getData(l),o[l])){s=!0;break}}else if(!t.getField(l).sameValues(this._orgItem.getData(l),o[l])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this._commitEdit(e)}}finally{this._commiting=!1}}return!0},i.prototype.execute=function(e){e&&(this.undoable?this._commands.execute(e):e.execute())},i.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},i.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},i.prototype.clearCommandStack=function(e){e===void 0&&(e=!0),this._commands.flush(),e&&this._saveDs&&this._saveDs.clearCommandStack()},i.prototype.revert=function(e){},i.prototype.revertAll=function(e){},i.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},i.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},i.prototype._beginUpdate=function(e){if(!e)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=e,this._editingState=c.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},i.prototype._doBeginUpdate=function(e){return null},i.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},i.prototype._doBeginAppendDummy=function(){return null},i.prototype._beginAppend=function(e){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=c.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},i.prototype._doBeginAppend=function(e){return null},i.prototype._beginInsert=function(e,t,o,r){o===void 0&&(o=!1),r===void 0&&(r=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(e,t,o,r),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=c.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},i.prototype._doBeginInsert=function(e,t,o,r){return null},i.prototype._updateEditingRow=function(e){return!1},i.prototype._insertEditingRow=function(e){return!1},i.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},i.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=c.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},i.prototype._doCancelDummyEdit=function(){},i.prototype._doCancelEdit=function(e,t){e==c.ItemState.INSERTING&&this._resetItemIndicies(0)},i.prototype._commitEdit=function(e){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(r){alert(r.message)}var t=this._editingState,o=!1;if(this.isUpdating)try{this._editingState=c.ItemState.NORMAL,o=this._doCompleteUpdate(this._orgItem,e)}catch(r){throw this._editingState=t,r}else try{this._editingState=c.ItemState.NORMAL,o=this._doCompleteInsert(t==c.ItemState.APPENDING)}catch(r){throw this._editingState=t,r}return o?(this._modified=!1,this._doCommitEdit(t,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=t,o},i.prototype._doCommitEdit=function(e,t){return!1},i.prototype._editItemCellEdited=function(e,t){e&&this.isEditing(e)&&(this._modified=!0,this.fireItemCellEdited(e,t))},i.prototype._editItemCellUpdated=function(e,t,o,r){this.isEditing(e)&&(this._modified=!0,this.fireItemCellUpdated(e,t,o,r))},i.prototype.$_editingItem=function(){return this._editingItem},i.prototype.$_dummyItem=function(){return this._dummyEditItem},i.prototype.fireUpdateStarted=function(e){this.$_canFire()&&this.fireEvent(i.UPDATE_STARTED,e)},i.prototype.fireAppendStarted=function(e){this.$_canFire()&&this.fireEvent(i.APPEND_STARTED,e)},i.prototype.fireInsertStarted=function(e){this.$_canFire()&&this.fireEvent(i.INSERT_STARTED,e)},i.prototype.fireItemCellEdited=function(e,t){this.$_canFire()&&this.fireEvent(i.CELL_EDITED,e,t)},i.prototype.fireItemCellUpdated=function(e,t,o,r){this.$_canFire()&&this.fireEvent(i.CELL_UPDATED,e,t,o,r)},i.prototype.fireItemCommitting=function(e){this.$_canFire()&&this.fireEvent(i.COMMITTING,e)},i.prototype.fireCommitted=function(e){this.$_canFire()&&this.fireEvent(i.COMMITTED,e)},i.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(i.CANCELED)},i.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(i.COMMIT_REQUEST)},i.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(i.CANCEL_REQUEST)},i.prototype.onItemProviderReset=function(e){a.prototype.onItemProviderReset.call(this,e);var t=this.dataSource;t!=this._saveDs&&(this._saveDs&&!this._saveDs.disposing&&this._saveDs.unregisterClient(this),this._saveDs=t,this._saveDs&&this._saveDs.registerClient(this))},i.prototype.onItemProviderRefresh=function(e){a.prototype.onItemProviderRefresh.call(this,e)},i.prototype.onItemProviderRefreshClient=function(e){a.prototype.onItemProviderRefreshClient.call(this,e)},i.prototype.onItemProviderItemInserted=function(e,t){a.prototype.onItemProviderItemInserted.call(this,e,t)},i.prototype.onItemProviderItemDeleted=function(e,t){a.prototype.onItemProviderItemDeleted.call(this,e,t)},i.prototype.onItemProviderItemUpdated=function(e,t){a.prototype.onItemProviderItemUpdated.call(this,e,t)},i.prototype.onItemProviderCommandStackChanged=function(e,t,o){var r=this._commands;this._fireCommandStackChanged(t||r.canUndo,o||r.canRedo)},i.UPDATE_STARTED="onItemEditUpdateStarted",i.APPEND_STARTED="onItemEditAppendStarted",i.INSERT_STARTED="onItemEditInsertStarted",i.CELL_EDITED="onItemEditCellEdited",i.CELL_UPDATED="onItemEditCellUpdated",i.COMMITTING="onItemEditCommitting",i.COMMITTED="onItemEditCommitted",i.CANCELED="onItemEditCanceled",i.COMMIT_REQUEST="onItemEditCommitRequest",i.CANCEL_REQUEST="onItemEditCancelRequest",i}(mh),eg=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._insertRow=-1,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemCount",{get:function(){var e=this.source.itemCount;return e+=this.isInserting||this.isAppending?1:0,e+=this.$_dummyItem()?1:0},enumerable:!1,configurable:!0}),i.prototype.getItem=function(e,t){var o=this.source;if(t)return o.getItem(e,t);var r,n=this.$_editingItem(),s=this.$_dummyItem();return this.isEditing()&&n.index==e?n:(this.isInserting?r=e>n.index?o.getItem(e-1):o.getItem(e):e<o.itemCount&&(r=o.getItem(e)),r||(s&&e==this.itemCount-1?s:null))},i.prototype.getItems=function(e,t){return this.source.getItems(e,t)},i.prototype._doBeginUpdate=function(e){return this._createEditItem(e,c.ItemState.UPDATING,null,!1,!1)},i.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},i.prototype._doBeginAppend=function(e){return this._createEditItem(null,c.ItemState.APPENDING,e,!1,!1)},i.prototype._doBeginInsert=function(e,t,o,r){return this._createEditItem(e,c.ItemState.INSERTING,t,o,r)},i.prototype._doCompleteUpdate=function(e,t){var o=this.dataSource;if(o instanceof Na){var r=this.$_editingItem();return this._copyExtents(r,e),t||o.updateRow(r.dataRow,r.values,!1)}return!1},i.prototype._doCompleteInsert=function(e){var t=this.dataSource,o=!1;if(t){var r=this.$_editingItem(),n=e?t.rowCount:Math.max(0,this._insertRow),s=r.values;if(o=t.insertRow(n,s,r._index2)){var l=this.getItemOfRow(n,!0);l&&(r._setCheckable(l.checkable),this._copyExtents(r,l),r.heights&&(l.heights=r.heights.slice()))}}return o},i.prototype.remove=function(e,t){var o=this.dataSource;if(e&&!this.isEditing(e)&&o){var r=e.dataRow;r>=0&&o.removeRow(r,t)}},i.prototype.revert=function(e){if(e instanceof kt||(e=this.getItem(e)),e){var t=this.dataSource;if(t){var o=e.dataRow,r=t.getRowState(o);r==c.RowState.DELETED?t.setRowState(o,c.RowState.NONE,!1):r==c.RowState.CREATE_AND_DELETED&&t.setRowState(o,c.RowState.CREATED,!1)}}},i.prototype.revertAll=function(e){if(e&&e.length!=0){var t=this.dataSource;if(t)for(var o=e.length;o--;){var r=this.getItem(e[o]);if(r){var n=r.dataRow,s=t.getRowState(n);s==c.RowState.DELETED?t.setRowState(n,c.RowState.NONE,!1):s==c.RowState.CREATE_AND_DELETED&&t.setRowState(n,c.RowState.CREATED,!1)}}}},i.prototype.getRemovableRows=function(e){if(!e||e.length==0)return null;for(var t=[],o=0,r=e.length;o<r;o++){var n=this.getItem(e[o]).dataRow;n>=0&&t.push(n)}return t},i.prototype.removeRows=function(e,t){e&&(e.length>1?this.dataSource.removeRows(e,!1,t):this.dataSource.removeRow(e[0],t))},i.prototype.updateRows2=function(e){this.dataSource.updateRows2(e,!1,!1)},i.prototype._createDummyEditItem=function(){return new jr(this,null,this.itemCount,-1,c.ItemState.DUMMY)},i.prototype._createEditItem=function(e,t,o,r,n){var s=this.dataSource;if(!s)return null;var l=null,u=s.fieldCount;switch(t){case c.ItemState.UPDATING:l=new Hr(this,e,e.index,e.dataRow,t);for(var h=0;h<u;h++)l.setValue(h,e.getData(h));this._copyExtents(e,l),e.heights&&(l._heights=e.heights.slice());break;case c.ItemState.INSERTING:case c.ItemState.APPENDING:var d=this._rs,p=t==c.ItemState.INSERTING&&e?r?e.index+1:e.index:this.itemCount;if(l=new Hr(this,e,p,-1,t),t==c.ItemState.INSERTING){var f=e.dataRow,g=e;if(f<=-1){for(var m=this.source._visibleItems;(g=m.getNext(g))&&!(g instanceof Tt););this._insertRow=g?g.dataRow:s.rowCount}else this._insertRow=r?Math.min(s.rowCount,f+1):f;if(e instanceof Tt&&r&&d){var b=d._pubItems.indexOf(g);b++>=0&&b<=d._pubItems.length&&(l._index2=b)}}if(o)for(h=0;h<u;h++)o.length>h&&l.setValue(h,o[h])}return l},i}(gi);(function(a){function i(e,t){var o=a.call(this,e)||this;return o.message=e,o.tokenPos=t,o}w(i,a)})(Error);var Gt,bh=function(){function a(i){this.literal=i}return a.prototype.evaluate=function(i){return this.literal},a}(),tg=function(){function a(i,e){e===void 0&&(e=-1),this.ident=i,this.idKey=e}return a.prototype.evaluate=function(i){return this.idKey<0&&(this.idKey=i.isIdentifier(this.ident)),i.evaluateIdentifier(this.idKey)},a}(),ig=function(){function a(i,e,t){e===void 0&&(e=-1),t===void 0&&(t=!1),this.ident=i,this.idKey=e,this.capital=t}return a.prototype.evaluate=function(i){var e=this.ident,t=e.indexOf("["),o=e.indexOf("]");if(t<o){var r=e.substr(0,t).trim(),n=e.substring(t+1,o).replace(/['|"]/g,"").trim();return this.idKey<0&&(this.idKey=i.isIdentifier(r)),i.evaluateIndexerS(this.idKey,n,this.capital)}},a}(),ys=function(){function a(i,e){e===void 0&&(e=!1),this._silentError=!1,this._tokens=[],this._source=i,this._silentError=e,i&&this._parse(i)}return Object.defineProperty(a.prototype,"source",{get:function(){return this._source},set:function(i){i!=this._source&&(this._source=i,this._parse(i))},enumerable:!1,configurable:!0}),a.prototype.evaluate=function(i){try{for(var e=this._tokens,t="",o=0,r=e.length;o<r;o++)t+=e[o].evaluate(i)||"";return t}catch(n){if(!this._silentError)throw new n}return null},a.prototype._parse=function(i){if(this._tokens=[],i)for(var e,t=i.length,o=0;o<t;){var r=i.indexOf("${",o);if(r>=0){var n=i.indexOf("}",r+2);if(n>=0){if(r>o){var s=i.substring(o,r);e=new bh(s),this._tokens.push(e)}if(h=i.substring(r+2,n).trim()){var l,u=void 0;e=(l=h.indexOf("["))&&(u=h.indexOf("]"))&&l<u?new ig(h):new tg(h),this._tokens.push(e)}o=n+1}else r=-1}if(r<0){var h=i.substr(o,t);e=new bh(h),this._tokens.push(e);break}}},a}();(function(a){a.ACTIVE="active",a.UNACTIVE="unactive",a.INDETERMINATE="indeterminate"})(Gt||(Gt={}));var Pn,co=function(a){function i(e){var t=a.call(this)||this;return t._active=!1,t._visible=!0,t._level=0,t._category=null,t.criteria=e,t}return w(i,a),i.prototype._doDispose=function(){this._criteria=null,this._category=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this.criteriaChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(e){this._callback=e,this.callbackChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this.changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(e){e!=this._active&&(this._active=e,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"category",{get:function(){return this._category},set:function(e){this._category=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return this._text||this._name},i.prototype.changed=function(){this.fireEvent(i.CHANGED)},i.prototype.criteriaChanged=function(){},i.prototype.callbackChanged=function(){},i.CHANGED="onColumnFilterChanged",i}(Mt),Gr=function(a){function i(){var e=a.call(this,null)||this;return e._childs=[],e}return w(i,a),Object.defineProperty(i.prototype,"active",{get:function(){for(var e=this._childs.length;e--;)if(!this._childs[e].active)return!1;return!0},set:function(e){for(var t=this._childs.length;t--;)this._childs[t].active=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._childs.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeState",{get:function(){for(var e=void 0,t=0,o=this._childs.length;t<o;t++){if(e!=null&&this._childs[t].active!=e)return Gt.INDETERMINATE;e=this._childs[t].active}return e?Gt.ACTIVE:Gt.UNACTIVE},enumerable:!1,configurable:!0}),i.prototype._doDispose=function(){this.clear(),a.prototype._doDispose.call(this)},i.prototype.clear=function(){this._childs=[]},i.prototype.add=function(e,t,o,r,n){var s=new co(r);return s.name=t,s.text=o,s.active=n,this.addChild(s),e.add(s),s},i.prototype.addChild=function(e){e.level=this.level+1,e.category=this,this._childs.push(e)},i.prototype.getChild=function(e){return this._childs[e]},i}(co),vh=function(){function a(i){this._model=i,this.parse()}return a.prototype._doDispose=function(){this._exprNode=null,this._model=null},Object.defineProperty(a.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),a.prototype.prepare=function(i,e){i.setDataSource(e)},a.prototype.select=function(i,e,t,o){var r=this._model.callback;return r?r.call(this,i._ds.handler,t.dataRow,e.level+1,o,this._model,t.getData(o)):!this._exprNode||(i.setData(t,o,this._model),this._exprNode.evaluate(i))},a.prototype.criteriaChanged=function(){this.parse()},a.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=qi.Default.parse(this._model.criteria,null):this._exprNode=null)},a}(),kn=function(a){function i(e){var t=a.call(this)||this;return t._items=[],t._names={},t._updating=!1,t._nextId=1,t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeCount",{get:function(){for(var e=0,t=0,o=this._items;t<o.length;t++)o[t].active&&e++;return e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isVisible",{get:function(){for(var e=0,t=this._items;e<t.length;e++)if(t[e].visible)return!0;return!1},enumerable:!1,configurable:!0}),i.prototype.getOwner=function(){return this._owner},i.prototype.getItem=function(e){return this._items[e]},i.prototype.indexOf=function(e){for(var t=this._items.length-1;t>=0;t--)if(this._items[t].name==e)return t;return-1},i.prototype.getActiveItems=function(e){for(var t=[],o=this._items.length-1;o>=0;o--)this._items[o].active==e&&t.push(this._items[o]);return t},i.prototype.assignFrom=function(e){if(e!==this){var t=this.clear(!1);if(e){for(var o=e instanceof Array?e:[e],r=o.length,n=0;n<r;n++)if((e=o[n])&&e.name){this.$_checkName(e.name);var s=new co(null);s.assignFrom(e),this._items.push(s),this._names[e.name]=s,s.addListener(this)}}(t||this.count>0)&&this.changed(null)}},i.prototype.clear=function(e){e===void 0&&(e=!0);var t=this._items.length;if(t>0){for(var o=0;o<t;o++)this._items[o].removeListener(this);return this._items.length=0,this._names={},e&&this.changed(null),!0}return!1},i.prototype.add=function(e,t){t===void 0&&(t=!0);var o=v.cast(e,co);o?this._items.indexOf(o)<0&&o.name&&this.$_checkName(o.name):e&&e.name&&(this.$_checkName(e.name),(o=new co(null)).assignFrom(e)),o&&(this._items.push(o),o._owner=this,this._names[o.name]=o,o.addListener(this),t&&this.changed(null))},i.prototype.addAll=function(e,t){if(e instanceof Array||!e||(e=[e]),e&&e.length>0){for(var o=0,r=e.length,n=0;n<r;n++){var s=v.cast(e[n],co);if(s?this._items.indexOf(s)<0&&s.name&&(t||this.$_checkName(s.name)):e[n]&&e[n].name&&(t||this.$_checkName(e[n].name),(s=new co(null)).assignFrom(e[n])),s){var l=this.indexOf(s.name);l>=0?(this._items[l]&&this._items[l].removeListener(this),this._items[l]=s):this._items.push(s),s.addListener(this),this._names[s.name]=s,o++}}o>0&&this.changed(null)}},i.prototype.removeItems=function(e){if(e){for(var t=0,o=e.length-1;o>=0;o--){var r=this.indexOf(e[o]);if(r>=0){var n=this._items[r];this._items.splice(r,1),delete this._names[n.name],n.removeListener(this),t++}}t>0&&this.changed(null)}},i.prototype.$_activateItems=function(e,t,o){var r=!1;this._updating=!0;try{e.forEach(function(n){n.active!=t&&(n._active=t,r=!0)})}finally{this._updating=!1}o&&r&&this.changed(null)},i.prototype.activateItems=function(e,t,o){var r=this;if(o===void 0&&(o=!0),e){var n=e.filter(function(s){return s&&r._names[s]}).map(function(s){return r._names[s]});this.$_activateItems(n,t,o)}},i.prototype.activateAll=function(e,t){this.$_activateItems(this._items,e,t)},i.prototype.$_hideFilters=function(e,t){e.forEach(function(o){o&&(o.visible=!t)})},i.prototype.hideFilters=function(e,t){var o=this;e&&this.$_hideFilters(e.filter(function(r){return o._names[r]}).map(function(r){return o._names[r]}),t)},i.prototype.hideAllFilters=function(e){this.$_hideFilters(this._items,e)},i.prototype.$_toggleItems=function(e){var t=!1;this._updating=!0;try{e.forEach(function(o){o._active=!o.active,t=!0})}finally{this._updating=!1}t&&this.changed(null)},i.prototype.toggleItems=function(e){var t=this;e&&this.$_toggleItems(e.filter(function(o){return t._names[o]}).map(function(o){return t._names[o]}))},i.prototype.toggleAll=function(){this.$_toggleItems(this._items)},i.prototype.changed=function(e){this._updating||this.fireEvent(co.CHANGED,e)},i.prototype.$_checkName=function(e){if(this._names.hasOwnProperty(e))throw new Error("Column filter already existes: "+e)},i.prototype.onColumnFilterChanged=function(e){this.changed(e)},i.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},i.prototype.onColumnFilterUserAdd=function(e,t,o){},i}(Mt),wh=function(a){function i(){var e=a.call(this)||this;return e._field=-1,e._fieldCount=0,e}return w(i,a),i.prototype._doDispose=function(){this._item=this._ds=null,a.prototype._doDispose.call(this)},i.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=this._ds?this._ds.fieldCount:0},i.prototype.setData=function(e,t,o){this._item=e,this._field=t,this._model=o},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.$_getLookupText=function(e){var t=e._owner._owner;if(t.lookupDisplay){var o=t.lookupSource;if(o){for(var r=t.lookupKeyFieldIds,n=r.length,s=[],l=0;l<n;l++)s.push(this._item.getData(r[l]));return o.lookup(s,t.valueSeparator)}var u=t.labelFieldIndex;return u>=0?this._item.getData(u):t.getLookupLabel(this._item.getData(t.fieldName))}return""},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._item.getData(this._field);case i.ID_TEXT:return this.$_getLookupText(this._model);case i.ID_STATE:switch(this._item.rowState){case c.RowState.CREATED:return"c";case c.RowState.UPDATED:return"u";case c.RowState.DELETED:return"d";case c.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_CHANGED_CELL:var t=this._item.dataRow,o=this._field;return o>=0&&this._item.rowState==c.RowState.UPDATED&&this._ds.isDataChanged(t,o);case i.ID_FIELD:return this._field}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);return this._item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._ds){var r=o?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);return this._item.getData(r)}},i.ID_VALUE=0,i.ID_FIELD=1,i.ID_VALUES=2,i.ID_STATE=3,i.ID_CHANGED_CELL=4,i.ID_TEXT=5,i.IDENTS={value:i.ID_VALUE,field:i.ID_FIELD,values:i.ID_VALUES,state:i.ID_STATE,changedcell:i.ID_CHANGED_CELL,text:i.ID_TEXT},i}(xi),Ch=function(a){function i(e){var t=a.call(this)||this;return t._dirty=!1,t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dirty",{get:function(){return this._dirty},set:function(e){e!==this._dirty&&(this._dirty=e,this.invalidate())},enumerable:!1,configurable:!0}),i.prototype.clean=function(){this._dirty&&(this._dirty=!1)},i.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},i.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},i.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},i.prototype._doChanged=function(){},i}(Mt),Yo=function(a){function i(e){var t=a.call(this,e)||this;return t._visible=!0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._visibleChanged())},enumerable:!1,configurable:!0}),i.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},i.prototype._visibleChanged=function(){this._changed()},i}(Ch),og=function(a){function i(){var e=a.call(this)||this;return e._item=null,e._group=null,e._dataSource=null,e._fieldCount=0,e}return w(i,a),i.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i.prototype.setDataSource=function(e){this._dataSource=e,this._fieldCount=e?e.fieldCount:0},i.prototype.setItem=function(e){this._item=e,this._group=v.cast(e,ft)},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case c.RowState.CREATED:return"c";case c.RowState.UPDATED:return"u";case c.RowState.DELETED:return"d";case c.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_COUNT:return this._group?this._group.count:0;case i.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);return this._item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._dataSource){var r=o?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);return this._item.getData(r)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_STATE=5,i.ID_COUNT=6,i.ID_DCOUNT=7,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,state:i.ID_STATE,count:i.ID_COUNT,dcount:i.ID_DCOUNT},i}(xi),rg=function(a){function i(){var e=a.call(this)||this;return e._fieldCount=0,e}return w(i,a),i.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,a.prototype._doDispose.call(this)},i.prototype.setDataArguments=function(e,t,o){this._ds=e,this._fieldCount=e?e.fieldCount:0,this._cell=t,this._item=o,this._grid=t&&t.index.column.grid},i.prototype.setItem=function(e){this._item=e},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){var t;switch(e){case i.ID_VALUE:return this._item.getData(this._cell.index.dataField);case i.ID_BASE:return(t=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(t):void 0;case i.ID_PREV_VALUES:var o=this._cell.index.column,r=this._grid.getDataColumns();t=r.indexOf(o);var n=[];if(r.length||t<0)return;for(var s=0,l=Math.min(t,r.length);s<l;s++)n.push(this._item.getData(r[s].dataIndex));return n.join("`")}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);return this._item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._ds){var r=o?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);return this._item.getData(r)}},i.ID_VALUE=0,i.ID_VALUES=1,i.ID_BASE=2,i.ID_PREV_VALUES=3,i.IDENTS={value:i.ID_VALUE,values:i.ID_VALUES,base:i.ID_BASE,prevvalues:i.ID_PREV_VALUES},i}(xi),ng=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.setGrid=function(e){this._grid=e},i.prototype.setGroup=function(e){this._group=e},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){var t,o,r=this._group;switch(e){case i.ID_GROUP_FIELD:return(t=r.dataSource.getField(r.groupField))?t.fieldName:"";case i.ID_FIELD_HEADER:return(t=r.dataSource.getField(r.groupField))?t.header:"";case i.ID_GROUP_COLUMN:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.displayText:r.dataSource.getFieldName(r.groupField);case i.ID_COLUMN_HEADER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.header.text||o.displayText:r.dataSource.getFieldName(r.groupField);case i.ID_COLUMN_FOOTER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.footer.text||o.displayText:r.dataSource.getFieldName(r.groupField);case i.ID_GROUP_VALUE:return r?r.groupValue:void 0;case i.ID_ROW_COUNT:return r.descendantCount}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){switch(e){case i.ID_SUM:case i.ID_MAX:case i.ID_MIN:case i.ID_AVG:case i.ID_DATA_COUNT:case i.ID_DATA_AVG:if(isNaN(t)||t<0)return;var o=void 0;switch(e){case i.ID_SUM:o=this._group.getSum(t);break;case i.ID_MAX:o=this._group.getMax(t);break;case i.ID_MIN:o=this._group.getMin(t);break;case i.ID_AVG:o=this._group.getAvg(t);break;case i.ID_DATA_COUNT:o=this._group.getDataCount(t);break;case i.ID_DATA_AVG:o=this._group.getDataAvg(t)}return isNaN(o)?"":String(o)}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){var r=this._group.dataSource,n=t?r?r.getFieldIndex(t):-1:this._group.groupField;return this.evaluateIndexerI(e,n)},i.ID_GROUP_FIELD=0,i.ID_FIELD_HEADER=1,i.ID_GROUP_COLUMN=2,i.ID_COLUMN_HEADER=3,i.ID_COLUMN_FOOTER=4,i.ID_GROUP_VALUE=5,i.ID_ROW_COUNT=6,i.ID_SUM=7,i.ID_MAX=8,i.ID_MIN=9,i.ID_AVG=10,i.ID_DATA_COUNT=11,i.ID_DATA_AVG=12,i.IDENTS={groupfield:i.ID_GROUP_FIELD,fieldheader:i.ID_FIELD_HEADER,groupcolumn:i.ID_GROUP_COLUMN,columnheader:i.ID_COLUMN_HEADER,columnfooter:i.ID_COLUMN_FOOTER,groupvalue:i.ID_GROUP_VALUE,rowcount:i.ID_ROW_COUNT,sum:i.ID_SUM,max:i.ID_MAX,min:i.ID_MIN,avg:i.ID_AVG,datacount:i.ID_DATA_COUNT,dataavg:i.ID_DATA_AVG},i}(xi),li=function(a){function i(e){var t=a.call(this)||this;return t._index=new le,t._name=e,t}return w(i,a),i.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.setIndex=function(e){this._index.assignFrom(e)},i.prototype.setIndex2=function(e,t,o){this._index._grid=e,this._index.set(t,o)},i.prototype.setLayout=function(e){this._index.layout=e},i.ERROR="<<ERROR>>",i}(me),ms=function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this,t)||this;return o._model=e,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e},enumerable:!1,configurable:!0}),i}(li),bs=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.getBlankState=function(){return Dt.NONE},i.prototype.isValueChanged=function(){return!1},i}(li),po=function(a){function i(e){return e===void 0&&(e=null),a.call(this,e||"dataCell")||this}return w(i,a),i.getText=function(e,t){var o=t.dataIndex>=0?e.getData(t.dataIndex):void 0;return i._getText(e,t,o)},i._getText=function(e,t,o){var r,n=t;if(n.lookupDisplay){var s=n.lookupSource;if(s){for(var l=n.lookupKeyFieldIds,u=l.length,h=[],d=0;d<u;d++)h.push(e.getData(l[d]));r=(r=s.lookup(h,n.valueSeparator))!==void 0?r:n.textOfInvalid!=null?n.textOfInvalid:o}else{var p=n.labelFieldIndex;r=p>=0?e.getData(p):n.getLookupLabel(o)}}else{var f,g=void 0;r=o,n.valueType==c.ValueType.NUMBER&&(f=n.nanText)!=null&&isNaN(r)?r=f:(g=n.displayCallback)?r=g(n.grid.handler,mi.tempItem(n.grid,e,t).proxy(),r):r!=null&&typeof r=="object"&&(r=JSON.stringify(r))}return r==null?"":String(r)},i._getDisplayText=function(e,t,o,r,n){var s,l=e.formatOptions,u=n.textFormatter||o.textFormat===void 0&&l.textFormatter,h=n.numberFormatter||o.numberFormat===void 0&&l.numberFormatter,d=n.booleanFormatter||o.booleanFormat===void 0&&l.boolFormatter,p=n.datetimeWriter||o.datetimeFormat===void 0&&l.datetimeWriter;if(o){switch(o.valueType){case c.ValueType.TEXT:s=r&&u?u.getText(r):i._getText(t,o,r);break;case c.ValueType.NUMBER:var f=Number(r);s=isNaN(f)||f==null?o.nanText:f==0&&o.zeroText!=null?o.zeroText:h?h.getText(f,o.displayMinusZero):i._getText(t,o,r);break;case c.ValueType.DATETIME:s=r instanceof Date&&p?p.getText(r):i._getText(t,o,r);break;case c.ValueType.BOOLEAN:s=d?d.formatValue(r):i._getText(t,o,r);break;case c.ValueType.OBJECT:var g=o.getField(),m=t.dataRow,b=o.objectKey||g.objectKey,C=o.objectCallback||g.objectCallback;if(r){var x=C&&typeof C=="function"?C(g.orgFieldName,m,r):b?r[b]:i._getText(t,o,r);switch(typeof x){case"string":s=i._getText(t,o,x);break;case"number":s=h?h.getText(x,o.displayMinusZero):String(x);break;case"boolean":s=d?d.formatValue(x):String(x);break;default:s=x instanceof Date&&p?p.getText(x):x?String(x):""}}break;default:s=i._getText(t,o,r)}if(s){var E=n.prefix;E&&(s=E+s),(E=n.suffix)&&(s+=E)}}return s},i.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new rg),this._equalBlankRuntime},i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.getValue=function(){var e=this.dataColumn.dataIndex;if(e>=0)return this.item.getData(e)},i.prototype.getDisplayText=function(e,t){return i._getDisplayText(e,this.index.item,this.index.dataColumn,this.getValue(),t)},Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.getBlankState=function(){var e=function(C,x){return C instanceof Date&&x instanceof Date?+C==+x:C==x},t=function(C){return h?(d.setItem(C),h.evaluate(d)):C.getData(l.dataIndex)},o=function(C,x,E){if(C>=x&&C<E){var S=t(u),P=C===x?null:p.getItem(C-1),R=C===E-1?null:p.getItem(C+1);if(r=P instanceof Tt&&e(S,t(P))?Dt.BODY:Dt.HEAD,!(R instanceof Tt&&e(S,t(R))))switch(r){case Dt.BODY:r=Dt.TAIL;break;case Dt.HEAD:r=Dt.NONE}}return r},r=Dt.NONE,n=this.index,s=n.layout,l=this.dataColumn,u=this.item,h=s.equalBlankNode,d=h&&i.equalBlankRuntime(),p=s.grid,f=p.fixedOptions.rowCount,g=p.layoutManager.topIndex,m=p.fixedOptions.blankRows;if(s&&s.blanked&&s.dataRoot&&u.dataRow>=0){var b=n.itemIndex;return h&&d&&d.setDataArguments(u.dataSource,this,u),r=b<f&&m?o(b,0,f):o(b,f+g,p.itemCount)}return r},i.prototype.isValueChanged=function(){var e=this.dataColumn.dataIndex;return e>=0&&this.item.isChanged(e)},i}(bs),sg=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.setItem=function(e){this.$_item=e},Object.defineProperty(i.prototype,"item",{get:function(){return this.$_item},enumerable:!1,configurable:!0}),i}(po),Xa=function(a){function i(e){return e===void 0&&(e=null),a.call(this,e||"literalCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getDisplayText=function(e){return this.text},i}(bs),vs=function(a){function i(e){return e===void 0&&(e=null),a.call(this,e||"seriesCell")||this}return w(i,a),i.getText=function(e,t){return t===void 0&&(t=","),e?e.join(t):""},i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.getDisplayText=function(e,t){var o=this.value;return o?o.join(t||","):""},Object.defineProperty(i.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var e=this.index.column;if(e instanceof Ji){var t=e.fields,o=t?t.length:0;if(o>0){for(var r=this.item,n=new Array(o),s=0;s<o;s++)t[s]>=0&&(n[s]=r.getData(t[s]));return n}}return[]},enumerable:!1,configurable:!0}),i}(bs),ag=function(a){function i(e){return e===void 0&&(e=null),a.call(this,e||"mergedDataCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.getValue=function(){var e=this.index,t=e.item;return t instanceof Tt?a.prototype.getValue.call(this):(t=(t instanceof ft?t:t.parent).firstItem).getData(e.dataField)},Object.defineProperty(i.prototype,"text",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i}(po),xh=function(a){function i(){var e=a.call(this)||this;return e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._doRender=function(e,t,o){var r=this._getBarLength();if(!(r<1)){var n=this.barWidth;n<=0&&(n=Math.floor(t.width/r),n=Math.max(this.minBarWidth,n),this.maxBarWidth>0&&(n=Math.min(this.maxBarWidth,n))),r*=n,t.x+=(t.width-r)/2,t.x=Math.floor(t.x),this._drawBars(e,this.barStyle,o,t.x,t.y,n,t.height)}},i}(function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){if(e!=this._value){this._value=e;try{this._error=null,this._parse(e)}catch(t){this._error=t}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),i.prototype.render=function(e,t){this._doRender(e,t,!1)},i.prototype.renders=function(e,t){this._doRender(e,t,!0)},i}(me)),Tn=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],lg=[103,104,105],Ih=[251658240,15728640,983040,61440,3840,240,15],ug=function(a){function i(){var e=a.call(this)||this;return e.quietZoneWidth=10,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._parse=function(e){this._weights=[];var t=e?e.length:0;if(!(t<1)){var o=this.$_detectType(e),r=lg[o],n=Tn[r],s=r;if(this._weights.push(n),o==2)for(var l=0;l<t;l+=2){var u=e.substr(l,2);r=parseInt(u),r=this.$_convert(o,r),n=Tn[r],this._weights.push(n),s+=r*(Math.floor(l/2)+1)}else for(l=0;l<t;l++)r=e.charCodeAt(l),r=this.$_convert(o,r),n=Tn[r],this._weights.push(n),s+=r*(l+1);s%=103,this._weights.push(Tn[s]),this._weights.push(Tn[106])}},i.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},i.prototype._drawBars=function(e,t,o,r,n,s,l){r+=10*s;for(var u,h=this._weights.length-1,d=0;d<h;d++){u=this._weights[d];for(var p=0;p<6;p++){var f=(u&Ih[p+1])>>4*(5-p);f*=s,p%2==0&&(o?e.sbounds(t,r+"",n+"%",f+"",l+"%"):e.bounds(t,r,n,f,l)),r+=f}}for(u=this._weights[h],p=0;p<7;p++)f=(u&Ih[p])>>4*(6-p),f*=s,p%2==0&&(o?e.sbounds(t,r+"",n+"%",f+"",l+"%"):e.bounds(t,r,n,f,l)),r+=f},i.prototype.$_convert=function(e,t){switch(e){case 0:if(t>=0&&t<32)return t+64;if(t>=32&&t<96)return t-32;break;case 1:if(t>=32&&t<128)return t-32;break;case 2:if(t>=0&&t<=99)return t}throw new Error("Invalid code128 charactor: "+t)},i.prototype.$_detectType=function(e){return e.length%2==0&&/^\d+$/.test(e)?2:/[a-z]/.test(e)?1:0},i}(xh),Ja={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},hg=function(a){function i(){var e=a.call(this)||this;return e._wideWidth=3,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._parse=function(e){if(this._codes=[],e){var t=e.length;this._codes.push(Ja["*"]);for(var o=0;o<t;o++){var r=e.charAt(o),n=Ja[r];if(!n)throw new Error("Invalid Code39 character: "+r);this._codes.push(n)}this._codes.push(Ja["*"])}},i.prototype._getBarLength=function(){var e=this._codes.length;return e*(3*this._wideWidth+6)+(e-1)},i.prototype._drawBars=function(e,t,o,r,n,s,l){var u=this._codes.length;if(u>2)for(var h=0;h<u;h++){for(var d=this._codes[h],p=0;p<9;p++){var f=d.charAt(p)=="n"?1:this._wideWidth;f*=s,p%2==0&&(o?e.sbounds(t,r+"",n+"%",f+"",l+"%"):e.bounds(t,r,n,f,l)),r+=f}h<u-1&&(r+=s)}},i}(xh),ui="http://www.w3.org/2000/svg",cg=0,Eh=function(a){function i(e,t){var o=a.call(this)||this;return o._transforms=[],o._defs=e,o._element=t,o}return w(i,a),i.prototype._doDispose=function(){this.clear(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"doc",{get:function(){return xe(this._element)||document},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t){return this._defs=e,this._element=t,this},i.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},i.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},i.prototype.restore=function(){this._trans=this._transforms.pop()},i.prototype.translate=function(e,t){this._trans+="translate("+e+","+t+")"},i.prototype.rotate=function(e){this._trans+="rotate("+180*e/Math.PI+")"},i.prototype.rotateAt=function(e,t,o){this._trans+="rotate("+180*e/Math.PI+","+t+",)"},i.prototype.scale=function(e,t){this._trans+="scale("+e+","+t+")"},i.prototype.clipRect=function(e){this.clip(e.x,e.y,e.width,e.height)},i.prototype.clip=function(e,t,o,r){var n=this.doc,s=cg++,l=n.createElementNS(ui,"clipPath");l.setAttributeNS(null,"id","clip"+s);var u=n.createElementNS(ui,"rect");u.x.baseVal.value=e,u.y.baseVal.value=t,u.width.baseVal.value=o,u.height.baseVal.value=r,l.appendChild(u),this._defs.appendChild(l)},i.prototype.sline=function(e,t,o,r,n){var s=this.doc.createElementNS(ui,"line");this._element.appendChild(s),s.x1.baseVal.valueAsString=t,s.y1.baseVal.valueAsString=o,s.x2.baseVal.valueAsString=r,s.y2.baseVal.valueAsString=n,e&&s.setAttribute("class",e)},i.prototype.polygon=function(e,t){if(!(t==null||t.length<4)){var o=this.doc.createElementNS(ui,"polygon");this._element.appendChild(o);var r=[];r.push(t[0]+","+t[1]);for(var n=2;n<t.length;n+=2)r.push(t[n]+","+t[n+1]);this._trans&&o.setAttributeNS(null,"transform",this._trans),o.setAttributeNS(null,"points",r.join(" ")),e&&o.setAttribute("class",e)}},i.prototype.bounds=function(e,t,o,r,n){var s=this.doc.createElementNS(ui,"rect");this._element.appendChild(s),s.x.baseVal.value=t,s.y.baseVal.value=n<0?o+n:o,s.width.baseVal.value=r,s.height.baseVal.value=Math.abs(n),e&&s.setAttribute("class",e)},i.prototype.pbounds=function(e,t,o,r,n){var s=this.doc.createElementNS(ui,"rect");this._element.appendChild(s),s.x.baseVal.valueAsString=t+"%",s.y.baseVal.valueAsString=(n<0?o+n:o)+"%",s.width.baseVal.valueAsString=r+"%",s.height.baseVal.valueAsString=Math.abs(n)+"%",e&&s.setAttribute("class",e)},i.prototype.sbounds=function(e,t,o,r,n){var s=this.doc.createElementNS(ui,"rect");this._element.appendChild(s),s.x.baseVal.valueAsString=t,s.y.baseVal.valueAsString=o,s.width.baseVal.valueAsString=r,s.height.baseVal.valueAsString=n,e&&s.setAttribute("class",e)},i.prototype.scircle=function(e,t,o,r){var n=this.doc.createElementNS(ui,"circle");this._element.appendChild(n),n.cx.baseVal.valueAsString=t,n.cy.baseVal.valueAsString=o,n.r.baseVal.valueAsString=r,e&&n.setAttribute("class",e)},i.prototype.ellipse=function(e,t,o,r,n){var s=this.doc.createElementNS(ui,"ellipse"),l=r/2,u=n/2;this._element.appendChild(s),s.cx.baseVal.value=t+l,s.cy.baseVal.value=o+u,s.rx.baseVal.value=l,s.ry.baseVal.value=u,e&&s.setAttribute("class",e)},i}(me),fo=function(a){function i(e){var t=a.call(this)||this,o=xe(e),r=t._element=o.createElementNS(ui,"svg"),n=r.style,s=t._defs=o.createElementNS(ui,"defs");return r.appendChild(s),n.background="",n.border="none",n.pointerEvents="none",e.appendChild(r),t._renderer=new Eh(t._defs),t}return w(i,a),i.createSVG=function(e){var t=xe(e),o=t.createElementNS(ui,"svg"),r=o.style,n=t.createElementNS(ui,"defs");o.appendChild(n),r.background="",r.border="none",r.pointerEvents="none";var s=t.createElementNS(ui,"g");return o.appendChild(s),e.appendChild(o),o},i.renderSVG=function(e,t,o){var r=t.lastElementChild,n=this._renderer.init(t.firstChild,r);r.textContent="",o.call(e,t,n,t.clientWidth,t.clientHeight),n.clear()},i.renderSVG2=function(e,t,o){var r=xe(t);t.childElementCount>1&&t.removeChild(t.lastElementChild);var n=r.createElementNS(ui,"g"),s=this._renderer.init(t.firstChild,n);t.appendChild(n),o.call(e,t,s),s.clear()},i.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),i.prototype.render=function(e){this._clear(),e?e.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},i.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var e=xe(this._element).createElementNS(ui,"g");this._element.appendChild(e),this._renderer._element=e},i.prototype._doRender=function(e,t,o){},i._renderer=new Eh,i}(me),Sh=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.draw=function(e,t,o){this._doDraw(e,t,o)},i}(me),Oh={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},Rh={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},Ph=function(a){function i(e){var t=a.call(this)||this;return t._shape=e,t}return w(i,a),Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e?e==="inverted_triangle"?i.INVERTED_TRIANLGE:e.toLowerCase():null},enumerable:!1,configurable:!0}),i.prototype._doDraw=function(e,t,o){var r=this._shape;if(Oh.hasOwnProperty(r)){if(d=Oh[r]){for(var n=0,s=0,l=0,u=(d=d.slice()).length/2;l<u;l++)d[2*l]=n+d[2*l]*t,d[2*l+1]=s+d[2*l+1]*o;d.push(d[0],d[1]),e.polygon(null,d)}}else if(Rh.hasOwnProperty(r)){var h=Rh[r];if(h){var d;for(n=0,s=0,l=0,u=(d=h[0].slice()).length/2;l<u;l++)d[2*l]=n+d[2*l]*t,d[2*l+1]=s+d[2*l+1]*o;for(d.push(d[0],d[1]),e.polygon(null,d),l=0,u=(d=(d=h[1]).slice()).length/2;l<u;l++)d[2*l]=n+d[2*l]*t,d[2*l+1]=s+d[2*l+1]*o;d.push(d[0],d[1]),e.polygon(null,d)}}},i.RECTANGLE="rectangle",i.TRIANLGE="triangle",i.INVERTED_TRIANLGE="itriangle",i.DIAMOND="diamond",i.UP_ARROW="uparrow",i.DOWN_ARROW="downarrow",i.LEFT_ARROW="leftarrow",i.RIGHT_ARROW="rightarrow",i.PLUS="plus",i.MINUS="minus",i.EQUAL="equal",i.STAR="star",i}(Sh),dg=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._doDraw=function(e,t,o){e.ellipse(null,0,0,t,o)},i}(Sh),vt=function(){function a(){}return a.layoutFlex=function(i,e,t,o,r,n){var s=n===c.IconLocation.CENTER,l=v.included(n,c.IconLocation.LEFT,c.IconLocation.LEFT_EDGE),u=v.included(n,c.IconLocation.RIGHT,c.IconLocation.RIGHT_EDGE),h=v.included(n,c.IconLocation.TOP,c.IconLocation.TOP_EDGE),d=v.included(n,c.IconLocation.BOTTOM,c.IconLocation.BOTTOM_EDGE),p=v.included(n,c.IconLocation.LEFT_EDGE,c.IconLocation.RIGHT_EDGE,c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE),f=i.style,g=s||l||u?"row":"column";g+=u||d?"-reverse":"",f.flexDirection=g,f.justifyContent=p?"start":"center",f.alignItems="center",(f=e.style).paddingTop=h&&p?r+"px":"",f.paddingBottom=d&&p?r+"px":"",(f=t.style).display=s?"none":"",f.paddingLeft=l?o+"px":"",f.paddingRight=u?o+"px":"",f.paddingTop=h?o+"px":"",f.paddingBottom=d?o+"px":"",f.flexGrow=p?"1":""},a.clearFlex=function(i){var e=i.style;e.removeProperty("display"),e.removeProperty("flex-direction"),e.removeProperty("justify-content"),e.removeProperty("align-items"),e.removeProperty("flex-grow")},a}(),kh=function(){this.commit=!0,this.value=void 0},Si=function(a){function i(){var e=a.call(this)||this;return e._refreshFocusChanged=!1,e._clickOnlyFocusedCell=!0,e._textProp=v.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return w(i,a),i.getRendererStyle=function(e){var t=e.firstElementChild;if(t){if(t.classList){if(t.classList.length>1)return t.classList[1]}else{var o=t.className&&t.className.split(" ");if(o&&o.length>1)return o[1]}return t.className}},i.prototype._doDispose=function(){this._dom=null,this._index=null,a.prototype._doDispose.call(this)},i.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},i.prototype.initContent=function(e,t,o){this._inited?this._index.assign(e):(this._dom=t,this._index=e.clone(),t.className=this._className=o,t&&(t[v.TextProp]=""),this._doInitContent(t),this._inited=!0)},i.prototype.initFormContent=function(e,t){this._inited||(this._dom=e,e.className=this._className=t,this._doInitContent(e),this._inited=!0)},i.prototype.clearContent=function(){this._inited?(this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]="",this._doClearContent(this._dom)},i.prototype.checkClassName=function(e){return e!=this._className},i.prototype.initOptions=function(){this._doInitOptions()},Object.defineProperty(i.prototype,"grid",{get:function(){return this._index&&this._index.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){this._showTooltip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(e){this._ariaLabelCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(e){this._refreshFocusChanged=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},set:function(e){this._clickOnlyFocusedCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemClickable",{get:function(){return this._itemClickable},enumerable:!1,configurable:!0}),i.prototype.renderCell=function(e,t,o){if(e.accessibility){var r=this._ariaLabelCallback||e.body.ariaLabelCallback,n=r&&r.call(this,e.handler,t);n?o.cell.setAttribute("aria-label",n):o.cell.removeAttribute("aria-label")}this._doRenderCell(e,t,o,o.width-o.$_errorWidth-o.$_buttonWidth-o.$_editWidth-1,o.height-1)},i.prototype.tooltip=function(e,t){},i.prototype.getTooltip=function(e,t){var o=t.grid,r=o.body,n=t.column,s=r.getCellAt(e.item,n,!1),l=this.tooltip(s,t);return(l=l||s&&this._makeText(o,s,e))||void 0},i.prototype.canShowInnerFocus=function(){return!1},i.prototype.canEdit=function(){return!1},i.prototype.canEditClickAt=function(e){return!1},i.prototype.preventDefaultEditClick=function(e){e.preventDefault()},i.prototype.editClick=function(e,t){var o=new kh;if(this._doEditClick(e,t,o))return o},i.prototype._doEditClick=function(e,t,o){return!1},i.prototype.preventDefaultClick=function(e){e.preventDefault()},i.prototype.canClick=function(e){return!1},i.prototype.canClickSpaceKey=function(e){return!1},i.prototype.click=function(e,t,o){return this._doClick(e,t,o)},i.prototype.itemClick=function(e){this._doItemClick(e)},i.prototype._doItemClick=function(e){},i.prototype._doClick=function(e,t,o){},i.prototype.canEditKey=function(e){return!1},i.prototype.editKey=function(e,t){var o=new kh;if(this._doEditKey(e,t,o))return o},i.prototype._doEditKey=function(e,t,o){return!1},i.prototype.moveClickElement=function(e,t){},i.prototype._doInitContent=function(e){},i.prototype._doClearContent=function(e){e&&(e[this._textProp]="")},i.prototype._doRenderCell=function(e,t,o,r,n){},i.prototype._changed=function(){this._dirty=!0},i.prototype._getValue=function(e,t,o){var r=t.item.dataRow;if(r>=0){var n=e.dataSource.getFieldIndex(o);if(n>=0)return e.dataSource.getValue(r,n)}},i.prototype._makeText=function(e,t,o){return t.getDisplayText(e,o)||t.dataColumn.placeHolder||""},i.prototype._clearHeight=function(){this._dom.style.height=""},i.prototype._setHeight=function(e){this._dom.style.height=e>=0?e+"px":""},i.prototype._isEmpty=function(e){return e==null||e==""||typeof e=="number"&&isNaN(e)},i.prototype._doInitOptions=function(){},i}(me),Wr=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),i.prototype._doRenderCell=function(e,t,o,r,n){if(t instanceof bs)if(t.index.itemIndex!==e.layoutManager.topIndex)switch(t.getBlankState()){case Dt.BODY:case Dt.TAIL:this.$_setText(t.dataColumn.equalBlankText);break;default:this.$_setText(this._makeText(e,t,o))}else this.$_setText(this._makeText(e,t,o))},i.prototype.$_setText=function(e){this._dom[this._textProp]=e||""},i.TYPE="text",i.Default=new i,i}(Si);c.BarOrigin=void 0,(Pn=c.BarOrigin||(c.BarOrigin={})).DEFAULT="default",Pn.LEFT="left",Pn.RIGHT="right",Pn.TOP="top",Pn.BOTTOM="bottom";var Za,Th=function(a){function i(){var e=a.call(this)||this;return e._barStyle=i.BAR_STYLE,e._rightBarStyle=i.BAR_RIGHT_STYLE,e._topBarStyle=i.BAR_TOP_STYLE,e._bottomBarStyle=i.BAR_BOTTOM_STYLE,e._minimum=0,e._maximum=100,e._barWidth="80%",e._showLabel=!0,e._origin=c.BarOrigin.LEFT,e._absoluteValue=!1,e._textOffset=5,e._negativeStyle=i.BAR_NEGATIVE_STYLE,e._percentShapeWidth=80,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(e){this._barStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(e){this._rightBarStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(e){this._topBarStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(e){this._bottomBarStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(e){this._minimum=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(e){this._maximum=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showLabel",{get:function(){return this._showLabel},set:function(e){this._showLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(e){e!=this._barWidth&&(this._barWidth=e,typeof e=="string"&&e.charAt(e.length-1)=="%"?this._percentShapeWidth=parseFloat(e.substring(0,e.length-1)):this._percentShapeWidth=NaN)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},set:function(e){this._origin=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(e){this._absoluteValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseValue",{get:function(){return this._baseValue},set:function(e){this._baseValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOffset",{get:function(){return this._textOffset},set:function(e){this._textOffset=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"negativeStyle",{get:function(){return this._negativeStyle},set:function(e){this._negativeStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t,o,r=xe(e);e[this._textProp]="",(t=this._div=r.createElement("div")).style.position="relative",e.appendChild(t);var n=(o=this._span=r.createElement("span")).style;n.display="inline-block",n.position="absolute",e.appendChild(o)},i.prototype._doRenderCell=function(e,t,o,r,n){var s,l=this._div,u=l.style,h=this._minimum,d=this._maximum,p=v.included(this._origin,c.BarOrigin.LEFT,c.BarOrigin.BOTTOM)?this._baseValue:NaN,f=Math.min(d,Math.max(h,t.value));switch(isNaN(p)&&this._absoluteValue&&(f=this._absoluteValue?Math.abs(t.value):t.value),isNaN(p)?(s=Math.min(1,(f-this._minimum)/(this._maximum-this._minimum)),this._middlePosition=NaN):(s=Math.min(1,(f-p)/(d-h)),this._middlePosition=(p-h)/(d-h)),isNaN(s)&&(s=0),this._origin){case c.BarOrigin.RIGHT:this.$_renderBar(c.BarOrigin.RIGHT,u,s),l.className=this.rightBarStyle||i.BAR_RIGHT_STYLE;break;case c.BarOrigin.TOP:this.$_renderBar(c.BarOrigin.TOP,u,s),l.className=this.topBarStyle||i.BAR_TOP_STYLE;break;case c.BarOrigin.BOTTOM:this.$_renderBar(c.BarOrigin.BOTTOM,u,s),l.className=!isNaN(p)&&f<p?this.negativeStyle:this.bottomBarStyle||i.BAR_BOTTOM_STYLE;break;case c.BarOrigin.LEFT:default:this.$_renderBar(c.BarOrigin.LEFT,u,s),l.className=!isNaN(p)&&f<p?this.negativeStyle:this.barStyle||i.BAR_STYLE}this.$_setText(this._showLabel?this._makeText(e,t,o):"",r,n/2,s)},i.prototype.$_renderBar=function(e,t,o){t.removeProperty("transform"),t.removeProperty("ms-transform");var r=this._middlePosition;if(e===c.BarOrigin.LEFT||e===c.BarOrigin.RIGHT)if(isNaN(r)?(t.left=e===c.BarOrigin.LEFT?"0px":100*(1-o)+"%",t.width=100*o+"%"):(t.left=o<0?100*(r+o)+"%":100*r+"%",t.width=100*Math.abs(o)+"%"),isNaN(this._percentShapeWidth)){var n=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=n+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%";else if(isNaN(r)?(t.top=e===c.BarOrigin.TOP?"0px":100*(1-o)+"%",t.height=100*o+"%"):(t.top=o<0?100*r+"%":100*(r-o)+"%",t.height=100*Math.abs(o)+"%"),isNaN(this._percentShapeWidth)){var s=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=s+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},i.prototype.$_setText=function(e,t,o,r){if(this._span[this._textProp]=e||"",e){var n=this._span.style,s=this._middlePosition,l=this._textOffset;if(n.removeProperty("right"),n.removeProperty("left"),n.removeProperty("top"),n.removeProperty("bottom"),n.transform="translate(50%, -50%)",this.origin!==c.BarOrigin.LEFT||isNaN(s)||this._textOffset===0)n.right="50%";else{var u=4*(2*s-1);r<0?n.left="".concat(t*s+l-u,"px"):n.right="".concat(t-t*s+l+u,"px"),n.transform="translate(0px, -50%)"}if(this.origin!==c.BarOrigin.BOTTOM||isNaN(s)||this._textOffset===0)n.top="50%";else{var h=o+this._textOffset+"px";r<0?n.bottom=h:n.top=h,n.transform="translate(50%, ".concat(r<0?"":"-","100%)")}}},i.TYPE="bar",i.STYLE="rg-bar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-bar-renderer-bar",i.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",i.BAR_TOP_STYLE="rg-bar-renderer-bar-top",i.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",i.BAR_NEGATIVE_STYLE="rg-bar-renderer-bar-negative",i}(Si),Dn=function(a){function i(){var e=a.call(this)||this;return e._spaceKey=!1,e._enterKey=!1,e._itemClickable=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"imageMap",{get:function(){return this._imageMap},set:function(e){e!==this._imageMap&&(this._imageMap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(e){e!==this._imageCallback&&(this._imageCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"imageField",{get:function(){return this._imageField},set:function(e){e!=this._imageField&&(this._imageField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleField",{get:function(){return this._titleField},set:function(e){e!=this._titleField&&(this._titleField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(e){e!==this._titleCallback&&(this._titleCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(e){e!=this._imageHeight&&(this._imageHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(e){this._enterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._img=xe(e).createElement("img");t.style.verticalAlign="middle",e.appendChild(t)},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._img,l=this.$_getImageUrl(e,t);if(l){s.src=l;var u=this.$_getTitle(e,t);s.alt=u||"",isNaN(this._imageHeight)?s.style.height="":s.style.height=this._imageHeight+"px"}else s.removeAttribute("src"),s.alt=""},i.prototype.canClick=function(e){return e.target===this._img},i.prototype._doClick=function(e,t,o){if(t.target===this._img||t.type==="keydown")return{type:this.type,value:e.value}},i.prototype._doItemClick=function(){this._img.click()},i.prototype.canClickSpaceKey=function(e){return(this.spaceKey&&e.keyCode==32||this.enterKey&&e.keyCode===13)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},i.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0},i.prototype.$_getImageUrl=function(e,t){var o="",r=this._imageCallback;return r&&(o=r.call(this,e.handler,t)),!o&&this._imageMap&&(o=this._imageMap[t.value]),!o&&this._imageField&&(o=this._getValue(e,t,this._imageField)),o||""},i.prototype.$_getTitle=function(e,t){var o="",r=this._titleCallback;return r&&(o=r.call(this,e.handler,t)),!o&&this._titleField&&(o=this._getValue(e,t,this._titleField)),o||""},i.TYPE="image",i.STYLE="rg-image-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Si),Qa=function(a){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0);var o=a.call(this)||this;return o._itemGap=4,o._verticalEdgePad=2,o._textVisible=!0,o._reversed=!1,o._splitted=!1,o._imgFixed=!1,o._imgMiddle=!1,o._imgCenter=!1,o._imgHeight=16,o._imgWidth=16,o._imgLeft=0,o._imgRight=0,o._imgTop=0,o._imgBottom=0,o._spanVis=void 0,o._spanPadRight=0,o._spanPadLeft=0,o._spanCenter=!1,o._spanText="",o._imgWidth=e,o._imgHeight=t,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(e){e!=this._verticalEdgePad&&(this._verticalEdgePad=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textVisible",{get:function(){return this._textVisible},set:function(e){e!=this._textVisible&&(this._textVisible=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._doClearContent=function(e){a.prototype._doClearContent.call(this,e),this._reset()},i.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[v.TextProp]="")},i.prototype.$_setImgFixed=function(e,t,o){(t!=this._imgFixed||o)&&(this._imgFixed=t,e.style.position=t?"absolute":"")},i.prototype.$_setImgMiddle=function(e,t,o){(t!=this._imgMiddle||o)&&(this._imgMiddle=t,e.style.verticalAlign=t?"middle":"")},i.prototype.$_setImgCenter=function(e,t,o){(t!=this._imgCenter||o)&&(this._imgCenter=t,e.style.textAlign=t?"center":"")},i.prototype.$_setImgWidth=function(e,t,o){((t=isNaN(t)?0:t)!=this._imgWidth||o)&&(this._imgWidth=t,e.style.width=t>0?t+"px":"")},i.prototype.$_setImgHeight=function(e,t,o){((t=isNaN(t)?0:t)!=this._imgHeight||o)&&(this._imgHeight=t,e.style.height=t>0?t+"px":"")},i.prototype.$_setImgBounds=function(e,t,o,r,n,s){(t!=this._imgTop||s)&&(this._imgTop=t,e.style.top=t>0?t+"px":""),(o!=this._imgLeft||s)&&(this._imgLeft=o,e.style.left=o>0?o+"px":""),(r!=this._imgBottom||s)&&(this._imgBottom=r,e.style.bottom=r>0?r+"px":""),(n!=this._imgRight||s)&&(this._imgRight=n,e.style.right=n>0?n+"px":"")},i.prototype.$_clearImgBounds=function(e,t){(this._imgTop>0||t)&&(this._imgTop=0,e.style.top=""),(this._imgLeft>0||t)&&(this._imgLeft=0,e.style.left=""),(this._imgBottom>0||t)&&(this._imgBottom=0,e.style.bottom=""),(this._imgRight>0||t)&&(this._imgRight=0,e.style.right="")},i.prototype.$_setSpanVis=function(e){e!=this._spanVis&&(this._spanVis=e,this._span.style.display=e?"":"none",this.grid.accessibility&&(e?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true")))},i.prototype.$_setSpanPadLeft=function(e){e!=this._spanPadLeft&&(this._spanPadLeft=e,this._span.style.paddingLeft=e>0?e+"px":"")},i.prototype.$_setSpanPadRight=function(e){e!=this._spanPadRight&&(this._spanPadRight=e,this._span.style.paddingRight=e>0?e+"px":"")},i.prototype.$_setSpanCenter=function(e,t){if(t===void 0&&(t=0),e!=this._spanCenter){var o=this._span.style;this._spanCenter=e,e?(o.left="50%",o.top=50+t+"%",o.transform="translate(-50%, -50%)",o.position="absolute"):(o.left="",o.top="",o.transform="",o.position="")}},i.prototype.$_setSpanText=function(e){if(e!=this._spanText){this._spanText=e;var t=this._textVisible?this._spanText:void 0;this._span[this._textProp]=t}},i.prototype.$_layoutLeft=function(e,t,o,r){this._reversed&&(e.insertBefore(t,o),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},i.prototype.$_layoutRight=function(e,t,o,r){this._reversed||(e.insertBefore(o,t),this._reversed=!0),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},i.prototype.$_layoutTop=function(e,t,o,r){this._reversed&&(e.insertBefore(t,o),this._reversed=!1),this._splitted||(e.insertBefore(this._br,o),this._splitted=!0),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!1,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutBottom=function(e,t,o,r){this._reversed||(e.insertBefore(o,t),this._reversed=!0),this._splitted||(e.insertBefore(this._br,t),this._splitted=!0),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!1,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutLeftEdge=function(e,t,o,r,n){this._reversed&&(e.insertBefore(t,o),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!0,n),this.$_setImgMiddle(t,!0,n),this.$_setImgCenter(t,!1,n),this.$_setImgBounds(t,0,2,0,0,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),o.style.marginLeft=isNaN(r)?"":r+"px"},i.prototype.$_layoutRightEdge=function(e,t,o,r,n){this._reversed||(e.insertBefore(o,t),this._reversed=!0),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!0,n),this.$_setImgMiddle(t,!0,n),this.$_setImgCenter(t,!1,n),this.$_setImgBounds(t,0,0,0,2,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(r)},i.prototype.$_layoutTopEdge=function(e,t,o,r,n,s,l,u){this._reversed&&(e.insertBefore(t,o),this._reversed=!1),this._splitted||(e.insertBefore(this._br,o),this._splitted=!0),this.$_setImgFixed(t,!0,u),this.$_setImgMiddle(t,!1,u),this.$_setImgCenter(t,!1,u),this.$_setImgBounds(t,2,(r-s)/2,0,0,u),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,l*((n-l)/n)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutBottomEdge=function(e,t,o,r,n,s,l,u){this._reversed||(e.insertBefore(o,t),this._reversed=!0),this._splitted||(e.insertBefore(this._br,t),this._splitted=!0),this.$_setImgFixed(t,!0,u),this.$_setImgMiddle(t,!1,u),this.$_setImgCenter(t,!0,u),this.$_setImgBounds(t,0,(r-s)/2,2,0,u),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(n-l)/n*-l),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutCenter=function(e,t,o,r){this._reversed&&(e.insertBefore(t,o),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!0,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i}(Si),Ur=function(a){function i(){var e=a.call(this)||this;return e._iconWidth=NaN,e._iconHeight=NaN,e._iconLocation=c.IconLocation.LEFT,e._spaceKey=!1,e._enterKey=!1,e._imgSrc="",e._itemClickable=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"iconMap",{get:function(){return this._iconMap},set:function(e){e!==this._iconMap&&(this._iconMap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(e){e!==this._iconCallback&&(this._iconCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(e){this._titleCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconUrl",{get:function(){return this._iconUrl},set:function(e){this._iconUrl=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconField",{get:function(){return this._iconField},set:function(e){e!=this._iconField&&(this._iconField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconLocation",{get:function(){return this._iconLocation},set:function(e){e!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(e){e!=this._iconWidth&&(this._iconWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(e){e!=this._iconHeight&&(this._iconHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(e){this._enterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=xe(e),o=this._img=t.createElement("img");o.alt="",e.appendChild(o);var r=this._span=t.createElement("span");e.appendChild(r),this._br=t.createElement("br")},i.prototype._reset=function(){a.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},i.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=c.IconLocation.LEFT},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._img,l=this._span;if(this.$_setImgWidth(s,this._iconWidth,!1),this.$_setImgHeight(s,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(e,t),this.$_getTitle(e,t)),this.$_setSpanText(this._makeText(e,t,o)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case c.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,l,!1);break;case c.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,l,!1);break;case c.IconLocation.TOP:this.$_layoutTop(this._dom,s,l,!1);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,l,!1);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,l,this._iconWidth,!1);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,l,this._iconWidth,!1);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,l,r,n,this._iconWidth,this._iconHeight,!1);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,l,r,n,this._iconWidth,this._iconHeight,!1);break;case c.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,l,!1);break;default:this.$_layoutLeft(this._dom,s,l,!1)}this._oldLocation=this._iconLocation}this._iconLocation==c.IconLocation.TOP_EDGE||this._iconLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.canClick=function(e){return e.target===this._img},i.prototype.canClickSpaceKey=function(e){return(this.spaceKey&&e.keyCode==32||this.enterKey&&e.keyCode===13)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},i.prototype._doClick=function(e,t,o){var r={};if(t.target===this._img||t.type==="keydown")return r.type=this.type,r.value=e.value,r},i.prototype._doItemClick=function(){this._img.click()},i.prototype.$_getIconUrl=function(e,t){var o=void 0,r=this._iconCallback;return r&&(o=r.call(this,e.handler,t)),o===void 0&&this._iconMap&&(o=this._iconMap[t.value]),o===void 0&&this._iconField&&(o=this._getValue(e,t,this._iconField)),o===void 0&&(o=this._iconUrl),o||""},i.prototype.$_getTitle=function(e,t){var o,r=this._titleCallback;return r&&(o=r.call(this,e.handler,t)),o||""},i.prototype.$_setImgSrc=function(e,t){e==this._imgSrc&&t===this._img.alt||(this._imgSrc=e,e?(this._img.src=e,this._img.alt=t):(this._img.removeAttribute("src"),this._img.alt=""))},i.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(c.IconLocation.LEFT)},i.prototype.preventDefaultClick=function(e){e.target===this._img&&(e.preventDefault(),e.stopImmediatePropagation())},i.TYPE="icon",i.STYLE="rg-icon-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Qa),pg=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._doInitContent=function(e){a.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(e){a.prototype._doClearContent.call(this,e),vt.clearFlex(e)},i.prototype.$_layoutLeft=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},i}(Ur),el=function(a){function i(){var e=a.call(this,16,16)||this;return e._strictValue=!1,e._threeStates=!1,e._checkLocation=c.IconLocation.CENTER,e._useImages=!1,e._checkedStyle=i.CHECKED_STYLE,e._uncheckedStyle=i.UNCHECKED_STYLE,e._intermediateStyle=i.INTERMEDIATE_STYLE,e._editable=!0,e._spaceKey=!0,e._showInnerFocus=!1,e._oldUsed=!1,e._useChanged=!1,e._values={},e.refreshFocusChanged=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(e){e!==this._getCheckedCallback&&(this._getCheckedCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(e){e!==this._setCheckedCallback&&(this._setCheckedCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trueValues",{get:function(){return this._trueValues},set:function(e){e!==this._trueValues&&(this._trueValues=e,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"falseValues",{get:function(){return this._falseValues},set:function(e){e!==this._falseValues&&(this._falseValues=e,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictValue",{get:function(){return this._strictValue},set:function(e){e!=this._strictValue&&(this._strictValue=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"threeStates",{get:function(){return this._threeStates},set:function(e){e!=this._threeStates&&(this._threeStates=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(e){e!=this._checkLocation&&(this._checkLocation=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(e){e!=this._useImages&&(this._useImages=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(e){this._editable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(e){this._showInnerFocus=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return!this.grid.editOptions.commitByCell||this._clickOnlyFocusedCell},set:function(e){this._clickOnlyFocusedCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnlySetDisabled",{get:function(){return this._readOnlySetDisabled},set:function(e){e!=this._readOnlySetDisabled&&(this._readOnlySetDisabled=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){var e=this.grid.editOptions;if(e.columnEditableFirst){if(!(this.editable!=null?this.editable:e.editable))return!1}else if(!e.editable||!this.editable)return!1;return this._editable},i.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},i.prototype._doInitContent=function(e){var t=xe(e),o=this._check=t.createElement("input");o.type="checkbox",o.tabIndex=-1,o.style.display="inline-block";var r=this._span=t.createElement("label");e.appendChild(o),e.appendChild(r);var n=this._image=t.createElement("span");n.className=this._checkedStyle,n.style.display="inline-block",this._br=t.createElement("br")},i.prototype._reset=function(){a.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._check,l=this._image,u=this._span,h=this._dom,d=s;this._imgWidth=e.container.measureCheckWidth(),this._imgHeight=e.container.measureCheckHeight();var p=this.$_getChecked(e,t.value,t.index,this._getCheckedCallback),f=s.id="".concat(i.FOR_ID,"-").concat(t.dataColumn.$_hash,"-").concat(t.item.index);if(u.setAttribute("for",f),s.checked=p,s.indeterminate=this._threeStates&&p===void 0,s.disabled=this._readOnlySetDisabled&&!this.canEdit(),this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(h.removeChild(l),this._check.style.display="inline-block"):(h.insertBefore(l,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(l.className=p?this._checkedStyle:p===void 0&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,this._readOnlySetDisabled&&!this.canEdit()&&(l.className+=" disabled"),d=l),o.merged&&this.canEdit()&&!v.included(this.checkLocation,c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE)&&o.focused||h.style.removeProperty("top"),this.$_setSpanText(this._makeText(e,t,o)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case c.IconLocation.LEFT:this.$_layoutLeft(h,d,u);break;case c.IconLocation.RIGHT:this.$_layoutRight(h,d,u);break;case c.IconLocation.TOP:this.$_layoutTop(h,d,u);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(h,d,u);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(h,d,u);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(h,d,u);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(h,d,u,r,n);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(h,d,u,r,n);break;case c.IconLocation.CENTER:this.$_layoutCenter(h,d,u);break;default:this.$_layoutLeft(h,d,u)}this._oldLocation=this._checkLocation}this._checkLocation==c.IconLocation.TOP_EDGE||this._checkLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.canEditClickAt=function(e){return this.preventDefaultEditClick(e),e.target===this._check||e.target===this._image},i.prototype.preventDefaultEditClick=function(e){e.target===this._check&&e.preventDefault()},i.prototype._doEditClick=function(e,t,o){if(t.target===this._check||t.target===this._image)return this.$_edit(e,o),!0},i.prototype.canEditKey=function(e){return this.spaceKey&&e.keyCode==32&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},i.prototype._doEditKey=function(e,t,o){return this.$_edit(e,o),!0},i.prototype._doItemClick=function(){this._check.click()},i.prototype.moveClickElement=function(e,t){var o=this._dom;t||!this.canEdit()||v.included(c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE)||(o.style.top=e+"px")},i.prototype.$_resetValues=function(){var e;if(this._values={},this._falseValues)if(e=this._falseValues.split(",")){var t=void 0;this._falseValue=(t=e.length)>0?e[0]:void 0;for(var o=0;o<t;o++)this._values[e[o]]=!1}else this._falseValue=void 0;if(this._trueValues)if(e=this._trueValues.split(","))for(t=void 0,this._trueValue=(t=e.length)>0?e[0]:void 0,o=0;o<t;o++)this._values[e[o]]=!0;else this._trueValue=void 0},i.prototype.$_getChecked=function(e,t,o,r){if(r)return r(e.handler,o.itemIndex,o.dataColumn,t);var n=o.dataColumn;if(n&&n.valueType===c.ValueType.OBJECT){var s=n.getField(),l=n.objectKey||s.objectKey;t=t==null?void 0:t[l]}if(typeof t=="boolean")return t;var u=String(t);return this._values.hasOwnProperty(u)?this._values[u]:this._threeStates&&(this._strictValue||t==""||t==null)?void 0:!!t},i.prototype.$_edit=function(e,t){var o,r=e.grid,n=e.dataColumn,s=e.value,l=this.$_getChecked(r,e.value,e,this._getCheckedCallback);o=!l&&(l===void 0||!this._threeStates||void 0);var u=this._setCheckedCallback;if(u?o=u(r.handler,e.itemIndex,e.dataColumn,s,o):this._trueValue!==void 0&&o?o=this._trueValue:this._falseValue!==void 0&&o===!1&&(o=this._falseValue),n&&n.valueType===c.ValueType.OBJECT){var h=n.getField(),d=s||{};d[n.objectKey||h.objectKey]=o,t.value=d}else t.value=o},i.prototype.$_layoutLeft=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutLeft.call(this,e,n,o,r)},i.prototype.$_layoutRight=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutRight.call(this,e,n,o,r)},i.prototype.$_layoutTop=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutTop.call(this,e,n,o,r)},i.prototype.$_layoutBottom=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutBottom.call(this,e,n,o,r)},i.prototype.$_layoutLeftEdge=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutLeftEdge.call(this,e,n,o,this._imgWidth,r)},i.prototype.$_layoutRightEdge=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutRightEdge.call(this,e,n,o,this._imgWidth,r)},i.prototype.$_layoutTopEdge=function(e,t,o,r,n){var s=this._useImages,l=s?this._image:t;a.prototype.$_layoutTopEdge.call(this,e,l,o,r,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutBottomEdge=function(e,t,o,r,n){var s=this._useImages,l=s?this._image:t;a.prototype.$_layoutBottomEdge.call(this,e,l,o,r,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutCenter=function(e,t,o){var r=this._useImages,n=r?this._image:t;a.prototype.$_layoutCenter.call(this,e,n,o,r)},i.prototype.$_setImageMiddle=function(e,t,o){(t!=this._imgMiddle||o)&&(this._imgMiddle=t)},i.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(c.IconLocation.LEFT)},i.TYPE="check",i.STYLE="rg-check-renderer",i.FOR_ID="$$-check-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.CHECKED_STYLE="rg-check-renderer-checked",i.UNCHECKED_STYLE="rg-check-renderer-unchecked",i.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",i}(Qa),fg=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._doInitContent=function(e){a.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(e){a.prototype._doClearContent.call(this,e),vt.clearFlex(e)},i.prototype.$_layoutLeft=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,t,o,r,n){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,t,o,r,n){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},i}(el),Dh=function(a){function i(){var e=a.call(this)||this;return e._buttonStyle=i.BUTTON_STYLE,e._hideWhenEmpty=!0,e._spaceKey=!0,e._enterKey=!1,e._itemClickable=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(e){e!=this._buttonStyle&&(this._buttonStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(e){e!=this._hideWhenEmpty&&(this._hideWhenEmpty=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(e){this._enterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._button=xe(e).createElement("button");t.type="button",t.tabIndex=-1,t.style.display="inline-block",e.appendChild(t)},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._button;s[this._textProp]=this._makeText(e,t,o),s.setAttribute("class",this._buttonStyle),s.style.visibility=this._hideWhenEmpty&&this._isEmpty(t.value)?"hidden":""},i.prototype.canClick=function(e){return e.target===this._button},i.prototype.canClickSpaceKey=function(e){return(this.spaceKey&&e.keyCode==32||this.enterKey&&e.keyCode===13)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},i.prototype._doClick=function(e,t,o){if(t.target===this._button||t.type==="keydown")return{type:this.type,value:e.value}},i.prototype._doItemClick=function(){this._button.click()},i.TYPE="button",i.STYLE="rg-button-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BUTTON_STYLE="rg-button-renderer-button",i}(Si),Mn=function(a){function i(){var e=a.call(this)||this;return e._spaceKey=!0,e._enterKey=!1,e._hideWhenEmpty=!0,e._itemClickable=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(e){e!=this._baseUrl&&(this._baseUrl=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linkField",{get:function(){return this._linkField},set:function(e){e!=this._linkField&&(this._linkField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(e){e!==this._urlCallback&&(this._urlCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleField",{get:function(){return this._titleField},set:function(e){e!=this._titleField&&(this._titleField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(e){e!==this._titleCallback&&(this._titleCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(e){this._enterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classCallback",{get:function(){return this._classCallback},set:function(e){this._classCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(e){this._target=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(e){this._hideWhenEmpty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._anchor=xe(e).createElement("a");t.tabIndex=-1,e.appendChild(t)},i.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._anchor,l=this._makeText(e,t,o);s[this._textProp]=l,this._url="",this._baseUrl==="#"?(s.removeAttribute("target"),s.href="#"):(this._url=this.$_getUrl(e,t),this._url&&(s.target=this.target==null?"_blank":this.target,s.href=this._url));var u=this.$_getTitle(e,t);u?s.title=u:delete s.title;var h=this.$_getStyle(e,t);h?s.className=h:s.removeAttribute("class"),this.hideWhenEmpty&&!l?v.detach(s):v.addChild(this._dom,s)},i.prototype.preventDefaultClick=function(e){e.target===this._anchor&&(e.preventDefault(),e.stopImmediatePropagation())},i.prototype.canClick=function(e){return e.target===this._anchor},i.prototype._doClick=function(e,t,o){if(t.target===this._anchor||t.type==="keydown")return{type:this.type,url:this._url,value:e.value}},i.prototype.canClickSpaceKey=function(e){return(this.spaceKey&&e.keyCode==32||this.enterKey&&e.keyCode===13)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},i.prototype._doItemClick=function(){this._anchor.click()},i.prototype.$_getUrl=function(e,t){var o="",r=this._urlCallback;return r&&(o=r.call(this,e.handler,t)),o||(o=this._linkField?this._getValue(e,t,this._linkField):t.value,this._baseUrl&&(o=this._baseUrl+o)),o||""},i.prototype.$_getTitle=function(e,t){var o="",r=this._titleCallback;return r&&(o=r.call(this,e.handler,t)),!o&&this._titleField&&(o=this._getValue(e,t,this._titleField)),o||""},i.prototype.$_getStyle=function(e,t){var o="",r=this._classCallback;return r&&(o=r.call(this,e.handler,t)),o||""},i.TYPE="link",i.STYLE="rg-link-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Si),tl=function(a){function i(){var e=a.call(this)||this;return e._shapeStyle=i.SHAPE_STYLE,e._shape=Ph.STAR,e._shapeWidth=16,e._shapeHeight=16,e._shapeLocation=c.IconLocation.LEFT,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(e){e!=this._shapeStyle&&(this._shapeStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(e){e!=this._shape&&(this._shape=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(e){e!==this._shapeMap&&(this._shapeMap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(e){e!=this._shapeCallback&&(this._shapeCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeWidth",{get:function(){return this._shapeWidth},set:function(e){this._shapeWidth!==e&&(this._shapeWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeHeight",{get:function(){return this._shapeHeight},set:function(e){this._shapeHeight!==e&&(this._shapeHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeLocation",{get:function(){return this._shapeLocation},set:function(e){e!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=xe(e),o=(this._svg=fo.createSVG(e)).style,r=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,n=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;o.display="inline-block",o.width=r+"px",o.height=n+"px";var s=this._span=t.createElement("span");e.appendChild(s),this._br=t.createElement("br")},i.prototype._reset=function(){a.prototype._reset.call(this),this._splitted=this._reversed=void 0},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._svg,l=this._span;if(this._runShape=this.$_getShape(e,t),s.setAttribute("class",this._shapeStyle),fo.renderSVG(e,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(e,t,o)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case c.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,l,!1);break;case c.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,l,!1);break;case c.IconLocation.TOP:this.$_layoutTop(this._dom,s,l,!1);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,l,!1);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,l,this._shapeWidth,!1);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,l,this._shapeWidth,!1);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,l,r,n,this._shapeWidth,this._shapeHeight,!1);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,l,r,n,this._shapeWidth,this._shapeHeight,!1);break;case c.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,l,!1);break;default:this.$_layoutLeft(this._dom,s,l,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==c.IconLocation.TOP_EDGE||this._shapeLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.$_getShape=function(e,t){var o=void 0,r=this._shapeCallback;return r&&(o=r.call(this,e.handler,t)),o==null&&this._shapeMap&&(o=this._shapeMap[t.value]),o==null&&(o=this._shape),o},i.prototype.$_getDrawing=function(e){var t;return e&&((e=e.toLowerCase())=="ellipse"?t=this._ellipse?this._ellipse:this._ellipse=new dg:(t=this._polygon?this._polygon:this._polygon=new Ph(e),this._polygon.shape=e)),t},i.prototype.$_render=function(e,t,o,r){if(this._runShape){var n=this.$_getDrawing(this._runShape);n&&n.draw(t,o,r)}},i.TYPE="shape",i.STYLE="rg-shape-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.SHAPE_STYLE="rg-shape-renderer-shape",i}(Qa),_g=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._doInitContent=function(e){e.style.setProperty("display","flex","important"),a.prototype._doInitContent.call(this,e)},i.prototype._doClearContent=function(e){a.prototype._doClearContent.call(this,e),vt.clearFlex(e)},i.prototype.$_layoutLeft=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,t,o,r,n){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,t,o,r,n){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,t,o){vt.layoutFlex(e,t,o,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},i}(tl),Mh=function(a){function i(){var e=a.call(this)||this;return e._barStyle=i.BAR_STYLE,e._inactiveStyle=i.INACTIVE_STYLE,e._barCount=10,e._minimum=NaN,e._maximum=NaN,e._startRate=50,e._endRate=100,e._absoluteValue=!1,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(e){e!=this._inactiveStyle&&(this._inactiveStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barCount",{get:function(){return this._barCount},set:function(e){(e=Math.max(2,e))!=this._barCount&&(this._barCount=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(e){e!=this._minimum&&(this._minimum=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(e){e!=this._maximum&&(this._maximum=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startRate",{get:function(){return this._startRate},set:function(e){!isNaN(e)&&e>=0&&e<=100&&e!==this._startRate&&(this._startRate=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endRate",{get:function(){return this._endRate},set:function(e){!isNaN(e)&&e>=0&&e<=100&&e!==this._endRate&&(this._endRate=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(e){e!=this._absoluteValue&&(this._absoluteValue=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._div=xe(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t);var o=(this._svg=fo.createSVG(t)).style;o.position="absolute",o.left="0px",o.width="100%",o.top=(100-Math.max(this._startRate,this._endRate))/2+"%",o.height=Math.max(this._startRate,this._endRate)+"%"},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._svg;this._value=parseFloat(t.value),s.setAttribute("class",this._barStyle),fo.renderSVG2(e,s,this.$_render.bind(this))},i.prototype.$_render=function(e,t){var o=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(o=this._barCount*(o-this._minimum)/(this._maximum-this._minimum));for(var r=100/Math.max(this._startRate,this._endRate),n=(100-2*(this._barCount+1))/this._barCount,s=0,l=this._startRate*r,u=(this._endRate-this._startRate)/(this._barCount-1),h=0;h<this._barCount;h++){var d=h<o?null:this._inactiveStyle;t.sbounds(d,s+"%",100-l+"%",n+"%",l+"%"),s+=n+2,l+=u}},i.TYPE="signalbar",i.STYLE="rg-signalbar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-signalbar-renderer-bar",i.INACTIVE_STYLE="rg-signalbar-renderer-inactive",i}(Si),Lh=function(a){function i(){var e=a.call(this)||this;return e._barStyle=i.BAR_STYLE,e._barcode=new hg,e.$_render=(function(t,o,r,n){this._value&&(this._barcode.value=this._value,this._barcode.renders(o,new Z(0,0,r,100)))}).bind(e),e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._div=xe(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t);var o=(this._svg=fo.createSVG(t)).style;o.position="absolute",o.left="0px",o.top="0px",o.width="100%",o.height="100%"},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._svg;this._value=t.value==null?"":String(t.value),this._value&&(this._value=this._value.toUpperCase()),s.setAttribute("class",this._barStyle),fo.renderSVG(e,s,this.$_render)},i.TYPE="code39",i.STYLE="rg-code39-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-code39-renderer-bar",i}(Si),Fh=function(a){function i(){var e=a.call(this)||this;return e._barStyle=i.BAR_STYLE,e._barcode=new ug,e.$_render=(function(t,o,r,n){this._value&&(this._barcode.value=this._value,this._barcode.renders(o,new Z(0,0,r,100)))}).bind(e),e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=this._div=xe(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t);var o=(this._svg=fo.createSVG(t)).style;o.position="absolute",o.left="0px",o.top="0px",o.width="100%",o.height="100%"},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._svg;this._value=t.value==null?"":String(t.value),s.setAttribute("class",this._barStyle),fo.renderSVG(e,s,this.$_render)},i.TYPE="code128",i.STYLE="rg-code128-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-code128-renderer-bar",i}(Si),gg=/\$\{[^{}]*\}/g,il=function(){function a(){this._template="",this._tokens=[]}return Object.defineProperty(a.prototype,"template",{get:function(){return this._template},set:function(i){this._template=i,this.$_parse(i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pattern",{set:function(i){this._pattern=i},enumerable:!1,configurable:!0}),a.prototype.realize=function(i,e,t,o){for(var r="",n=0,s=this._tokens;n<s.length;n++){var l=s[n];typeof l=="string"?r+=l||"":l.type==1?r+=e.value||"":l.type==2?r+=e.item.getData(i.dataSource.getFieldIndex(l.field))||"":l.type===4?r+=(e instanceof po?e.getDisplayText(i,t):e.value)||"":o?r+=o.call(this,i.handler,e,l.field)||"":r+=l.field}return r},a.prototype.realizeHeader=function(i,e,t){for(var o,r="",n=0,s=this._tokens;n<s.length;n++){var l=s[n];typeof l=="string"?r+=l:l.type==1?r+=i.displayText:(o=i.getValue(l.field))!=null?r+=String(o):e?r+=e.call(this,t.handler,i,l.field)+""||"":r+=l.field}return r},a.prototype.realizeSummary=function(i,e,t,o){for(var r,n=this._tokens,s="",l=i.column,u=l.grid,h=0,d=n;h<d.length;h++){var p=d[h];typeof p=="string"?s+=p:p.type==1?s+=e.getDisplayText(t)||"":(r=i.getValue(p.field))!=null?s+=String(r):s+=o?(r=o.call(this,u.handler,l,i.summaryIndex,i,p.field))||"":p.field}return s},a.prototype.realizeGroupSummary=function(i,e,t,o){for(var r,n=this._tokens,s="",l=i.column,u=l.grid,h=0,d=n;h<d.length;h++){var p=d[h];typeof p=="string"?s+=p:p.type==1?s+=e.getDisplayText(t)||"":(r=i.getValue(p.field))!=null?s+=String(r):s+=o?(r=o.call(this,u.handler,l,i.summaryIndex,e.index.item.parent,p.field))||"":p.field}return s},a.prototype.$_parse=function(i){var e=this._tokens=[];if(i){for(var t,o=i.length,r=this._pattern||gg,n=0;t=r.exec(i);){var s=t[0],l=t.index;l>n&&(e.push(i.substring(n,l)),n=l);var u=s.substring(2,s.length-1),h={type:u==="value"?1:u==="text"?4:u.indexOf("value:")==0?2:3,field:u};h.type==2&&(h.field=h.field.substring(6)),e.push(h),n+=s.length}n<o&&e.push(i.substring(n,o))}},a}(),Ln=function(a){function i(){var e=a.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new il,e.template="<span>${value}</span>",e._itemClickable=!0,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"template",{get:function(){return this._parser.template},set:function(e){e!=this._parser.template&&(this._parser.template=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pattern",{set:function(e){e!=this._pattern&&(e instanceof RegExp?this._pattern=e:this._pattern=e?new RegExp(e):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"output",{get:function(){return this._output},set:function(e){this._output=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(e){e!==this._callback&&(this._callback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!==this._valueCallback&&(this._valueCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(e){this._inputFocusable!==e&&(this._inputFocusable=e)},enumerable:!1,configurable:!0}),i.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",a.prototype.assignFrom.call(this,e)},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),i.prototype._doClearContent=function(e){a.prototype._doClearContent.call(this,e),this._html=null},i.prototype.canClick=function(e){var t=tt(this._dom),o=e.target;return!(o instanceof t.HTMLTableCellElement&&o.className.indexOf("rg-")>=0||this._dom===o)},i.prototype.click=function(e,t,o){return this._doClick(e,t,o||t.target)},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._callback;s?this.$_setHtml(s.call(this,e.handler,t,r,n)):this.$_setHtml(this._parser.realize(e,t,o,this._valueCallback))},i.prototype._doClick=function(e,t,o){return{type:this.type,target:t.target,value:e.value}},i.prototype.$_setHtml=function(e){e!=this._html&&(this._html=e,this._dom.innerHTML=e)},i.TYPE="html",i}(Si),yg=function(a){function i(){var e=a.call(this)||this;return e.$_userComparer=function(t,o,r){if(this._labelComparer)return this._labelComparer(t,o._rowId,r.rowId)},e}return w(i,a),i.prototype.run=function(e,t,o,r,n,s,l){this._rs=e.provider;var u=this._ds=this._rs.dataSource;this._parent=e,this._field=t;var h=this._ds.getField(t);if(this._labelComparer=this._ds._comparers[t]||this._rs._labelComparer[t],this._labelComparer)this._comparer=this.$_userComparer;else switch(h.dataType){case c.ValueType.NUMBER:case c.ValueType.DATETIME:this._comparer=u.compareNumbers;break;case c.ValueType.BOOLEAN:this._comparer=u.compareBools;break;case c.ValueType.OBJECT:this._comparer=u.compareObjects.bind(u);break;default:this._comparer=r?u.compareTexts.bind(u):u.compareValues.bind(u)}this.$_sort(n,s,o,l)},i.prototype.setNullsOrder=function(e){this._nullsOrder=e},i.prototype.$_sort=function(e,t,o,r){do{var n=this._parent,s=this._field,l=e,u=t,h=Math.floor((e+t)/2),d=n.getItem(h).dataRow,p=n.getItem(h).row,f=o===c.SortDirection.ASCENDING?this._nullsOrder===c.NullsOrder.LAST?-1:1:this._nullsOrder===c.NullsOrder.FIRST?-1:1;do{if(o==c.SortDirection.ASCENDING){for(;l<=u&&((g=this._comparer(s,p,n.getItem(l).row,f))==0&&r&&(g=d-n.getItem(l).dataRow),!(g<=0));)l++;for(;l<=u&&((g=this._comparer(s,p,n.getItem(u).row,f))==0&&r&&(g=d-n.getItem(u).dataRow),!(g>=0));)u--}else{for(;l<=u&&((g=this._comparer(s,p,n.getItem(l).row,f))==0&&r&&(g=d-n.getItem(l).dataRow),!(g>=0));)l++;for(;l<=u;){var g;if((g=this._comparer(s,p,n.getItem(u).row,f))==0&&r&&(g=d-n.getItem(u).dataRow),g<=0)break;u--}}l<=u&&(l!=u&&n._exchangeItems(l,u),l++,u--)}while(l<=u);e<u&&this.$_sort(e,u,o,r),e=l}while(e<t)},i}(me),ti=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.getShadowRow=function(){var e=this.parent.firstDataItem;return e?e.dataRow:-1},i}(Kt),yi=function(a){function i(e,t){var o=a.call(this,t)||this;return o._level=0,o._level=e,o}return w(i,a),Object.defineProperty(i.prototype,"groupLevel",{get:function(){return this._level},enumerable:!1,configurable:!0}),i.prototype.getShadowRow=function(){var e=this.firstDataItem;return e?e.dataRow:-1},Object.defineProperty(i.prototype,"merged",{get:function(){return!0},enumerable:!1,configurable:!0}),i}(Ht),Nh=function(a){function i(e){var t=a.call(this)||this;return t._fixedCount=0,t._items=[],t._list=[],t._rowCount=NaN,t._rs=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var e=this._items,t=0,o=e.length-1;o>=0;o--)e[o]instanceof Tt&&t++;this._rowCount=t}return this._rowCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(e){return this._items[e]},i.prototype.clear=function(e){e===void 0&&(e=null);for(var t=this._rs,o=0,r=(e=e||this._items).length;o<r;o++){var n=e[o];n._parent=t._rootItem,n._index=-1,n instanceof Ht&&n._children&&this.clear(n._children)}e.length=0,this.$_changed()},i.prototype.expand=function(e,t,o,r){return this.$_expandItem(e,t,o,r),this.$_changed(),!0},i.prototype.collapse=function(e,t){var o,r,n=this._rs,s=this._items;if(e._expanded=!1,n.mergeMode){if((u=e.index)>=0?(s.splice(u,1),e._index=-1):(u=this.$_firstIndex(e,n.expandedAdornments==c.RowGroupAdornments.SUMMARY,!0))<0&&(u=e.firstItem.index),u>=0)for(;u<s.length&&(h=s[u]).isDescendantOf(e);)s.splice(u,1),h._index=-1,t&&(h instanceof ft||h instanceof ti)&&(d=h instanceof ft?h:h instanceof ti&&h.parent._expanded?h.parent:null)&&(d._expanded=!1);switch(o=e.footerCount,n.collapsedAdornments){case c.RowGroupAdornments.BOTH:e._index=u,s.splice(u++,0,e);for(var l=0;l<o;l++)s.splice(u+l,0,r=e.getFooter(l)),r._index=u+l;break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(o=e.footerCount)for(l=0;l<o;l++)s.splice(u+l,0,r=e.getFooter(l)),r._index=u+l;else if(o=e.allFooterCount)for(l=0;l<o;l++)s.splice(u+l,0,r=e._allFooters[l]),r._index=u+l;break;case c.RowGroupAdornments.HEADER:default:e._index=u,s.splice(u,0,e)}}else{var u;for((u=e.index)>=0?(s.splice(u,1),e._index=-1):(u=this.$_firstIndex(e,n.expandedAdornments==c.RowGroupAdornments.SUMMARY,!1))<0&&(u=e.firstItem.index);u<s.length;){var h,d;if(!(h=s[u]).isDescendantOf(e))break;s.splice(u,1),h._index=-1,t&&(h instanceof ft||h instanceof Kt)&&(d=h instanceof ft?h:h instanceof Kt&&h.parent._expanded?h.parent:null)&&(d._expanded=!1)}switch(n.collapsedAdornments){case c.RowGroupAdornments.BOTH:for(e._index=u,s.splice(u++,0,e),o=e.footerCount,l=0;l<o;l++)(r=e.getFooter(l))._index=u+l,s.splice(u+l,0,r);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(o=e.footerCount)for(l=0;l<o;l++)(r=e.getFooter(l))._index=u+l,s.splice(u+l,0,r);else for(l=0;l<e.allFooterCount;l++)(r=e._allFooters[l])._index=u+l,s.splice(u+l,0,r);break;case c.RowGroupAdornments.HEADER:default:e._index=u,s.splice(u,0,e)}}return this.$_changed(),!0},i.prototype.getNext=function(e){return e!=null&&e.visible&&e.index<this.count-1?this._items[e.index+1]:null},i.prototype.getPrior=function(e){return e!=null&&e.visible&&e.index>0?this._items[e.index-1]:null},i.prototype.$_changed=function(){this._rowCount=NaN},i.prototype.$_collectChildren=function(e,t,o,r,n){var s,l=this._rs,u=l.expandedAdornments,h=l.collapsedAdornments;if(r&&e&&e._setExpanded(!0),l.mergeMode){var d=void 0;if(!(e instanceof zo)){if(u==c.RowGroupAdornments.HEADER||u==c.RowGroupAdornments.BOTH)t.push(e);else if(u==c.RowGroupAdornments.SUMMARY)for(var p=0,f=e.footerCount;p<f;p++)d=e.getFooter(p),t.push(d)}for(var g=0,m=e.count;g<m;g++)if((x=e.getItem(g))instanceof ft){var b=x;if(o&&(!n||b.level<=n)||b.expanded)this.$_collectChildren(b,t,o,r,n);else{var C=b.footerCount;switch(h){case c.RowGroupAdornments.BOTH:for(t.push(b),p=0;p<C;p++)d=b.getFooter(p),t.push(d);break;case c.RowGroupAdornments.SUMMARY:case c.RowGroupAdornments.FOOTER:if(C)for(p=0;p<C;p++)d=b.getFooter(p),t.push(d);else for(p=0;p<b.allFooterCount;p++)d=b._allFooters[p],t.push(d);break;case c.RowGroupAdornments.HEADER:default:t.push(b)}}}else e.isFooter(x)||t.push(x);if(!(e instanceof zo)&&e.footer&&(u==c.RowGroupAdornments.FOOTER||u==c.RowGroupAdornments.BOTH))for(g=0,m=e.footerCount;g<m;g++)t.push(e.getFooter(g))}else{if(!(e instanceof zo))if(u==c.RowGroupAdornments.SUMMARY)if(d=e.footer,C=e.footerCount,d)for(p=e.indexOf(d),t.push(d),g=1;g<C;g++)d=e.getItem(p+g),t.push(d);else for(C=e.allFooterCount,g=0;g<C;g++)d=e._allFooters[g],t.push(d);else((s=u)==c.RowGroupAdornments.BOTH||s==c.RowGroupAdornments.HEADER)&&t.push(e);for(g=0,m=e.count;g<m;g++){var x;if((x=e.getItem(g))instanceof ft)if(b=x,d=void 0,C=void 0,o&&(!n||b.level<=n)||b.expanded)this.$_collectChildren(b,t,o,r,n);else switch(h){case c.RowGroupAdornments.HEADER:t.push(b);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(d=b.footer){if(C=b.footerCount,t.push(d),C>1){p=b.indexOf(d);for(var E=1;E<C;E++)d=b.getItem(p+E),t.push(d)}}else for(C=b.allFooterCount,E=0;E<C;E++)d=b._allFooters[E],t.push(d);break;case c.RowGroupAdornments.NONE:break;case c.RowGroupAdornments.BOTH:default:if(t.push(b),(d=b.footer)&&(C=b.footerCount,t.push(d),C>1))for(p=b.indexOf(d),E=1;E<C;E++)d=b.getItem(p+E),t.push(d)}else x instanceof Kt||t.push(x)}if(!(e instanceof zo)&&function(S){return S==c.RowGroupAdornments.BOTH||S==c.RowGroupAdornments.FOOTER}(u)&&(d=e.footer)&&(C=e.footerCount,t.push(d),C>1))for(p=e.indexOf(d),g=1;g<C;g++)d=e.getItem(p+g),t.push(d)}},i.prototype.$_expandItem=function(e,t,o,r){var n;if(e instanceof zo)n=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case c.RowGroupAdornments.BOTH:n=e.index,this._items.splice(n,1+e.footerCount);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:var s=e.footer;s?(n=s.index,this._items.splice(n,e.footerCount)):e.allFooterCount>0&&(n=e._allFooters[0].index,this._items.splice(n,e.allFooterCount));break;case c.RowGroupAdornments.HEADER:default:n=e.index,this._items.splice(n,1)}o&&(e._index=-1)}else{switch(this._rs.collapsedAdornments){case c.RowGroupAdornments.BOTH:n=e.index,this._items.splice(n,1+e.footerCount);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:e.footerCount>0?(n=e.footer.index,this._items.splice(n,e.footerCount)):e.allFooterCount>0&&(n=e._allFooters[0].index,this._items.splice(n,e.allFooterCount));break;case c.RowGroupAdornments.HEADER:default:n=e.index,this._items.splice(n,1)}o&&(e._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(e,this._list,t,o,r);for(var l=this._list.length,u=0;u<l;u++)this._items.splice(n+u,0,this._list[u])},i.prototype.$_firstIndex=function(e,t,o){var r=e.index;if(r>=0)return r;for(var n=this._items,s=0,l=n.length;s<l;s++){var u=n[s];if(e.isDescendant(u))return u.index}return-1},i.prototype.$_clearAndInit=function(e,t){if(this.clear(),e){this._fixedCount=Math.min(t,e.itemCount);for(var o=0;o<this._fixedCount;o++)this._items.push(e.getItem(o))}else this._fixedCount=0},i.prototype.$_resetIndices=function(e){e===void 0&&(e=0);for(var t=e,o=this._items.length;t<o;t++)this._items[t]._index=t},i}(me),ol=function(a,i){this.startIndex=a,this.endIndex=i,this.level=0,this.children=[]},qo=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._expandedAdornments=c.RowGroupAdornments.BOTH,o._collapsedAdornments=c.RowGroupAdornments.HEADER,o._indentVisible=!0,o._expandWhenGrouping=!1,o._mergeMode=!1,o._groupSorting=!0,o._grouped=!1,o._checkable=!0,o}return w(i,a),i.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),a.prototype._doDispose.call(this)},i.prototype.groupfFooterCounterChanged=function(e){this.$_footerCounterChanged()},i.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},Object.defineProperty(i.prototype,"footerCounter",{get:function(){return this._footerCounter},set:function(e){e!=this._footerCounter&&(e&&e.setCounterAware(null),this._footerCounter=e,e&&e.setCounterAware(this),this.$_footerCounterChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(e){e!=this._expandedAdornments&&(this._expandedAdornments=e,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),i.prototype.resetAdornments=function(e,t,o){(o||t.expandedAdornments!=this._expandedAdornments||t.collapsedAdornments!=this._collapsedAdornments||t.indentVisible!=this._indentVisible)&&(this._expandedAdornments=t.expandedAdornments,this._collapsedAdornments=t.collapsedAdornments,this._callbackOnwer=e,this._footerCallback=t.createFooterCallback,this._valueForGroupCallback=t.valueForGroupCallback,this._indentVisible=t.indentVisible,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){this._expandWhenGrouping=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Re.groupSummaryMode||c.SummaryMode.AGGREGATE},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this._populateItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(e){this._groupSorting!=e&&(this._groupSorting=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._visibleItems.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(e){return this.fireGrouping(e)},i.prototype.groupBy=function(e){this.groupByMode(e,this._mergeMode)},i.prototype.groupByMode=function(e,t){this._mergeMode=t??this._mergeMode,this._groupFields=e?e.concat():null,t||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(e)}},i.prototype.isGroupedField=function(e){if(this._groupFields){for(var t=this._groupFields.length;t--;)if(this._groupFields[t]==e)return!0}return!1},i.prototype.getGroupLevel=function(e){if(this._groupFields&&e>=0){for(var t=this._groupFields.length;t--;)if(this._groupFields[t]==e)return t+1}return 0},Object.defineProperty(i.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!1,configurable:!0}),i.prototype.expand=function(e,t,o,r){if(e&&(!e.expanded||o)&&this.fireExpand(e)&&(e.expanded&&this._visibleItems.collapse(e,!1),this._visibleItems.expand(e,t,!0,r))){this._resetItemIndicies(e.index);try{this._fireRefresh()}finally{this.fireExpanded(e)}}},i.prototype.$_collapseChild=function(e,t,o){for(var r=0,n=e.count;r<n;r++){var s=e.getItem(r);s instanceof Ht&&(s._expanded=!1,this.$_collapseChild(s,t,o))}},i.prototype.collapse=function(e,t,o,r){if(e&&e.expanded){if(this.fireCollapse(e)&&this._visibleItems.collapse(e,t)){e.index>=0&&this._resetItemIndicies(e.index);try{this._fireRefresh()}finally{this.fireCollapsed(e,r)}}}else e&&t&&o&&this.$_collapseChild(e,t,o)},i.prototype.collapseAll=function(e){for(var t=0;t<this._rootItem.count;t++){var o=this._rootItem.getItem(t);o instanceof ft&&this.collapse(o,e,!0,null)}},i.prototype.expandAll=function(e,t){for(var o=0;o<this._rootItem.count;o++){var r=this._rootItem.getItem(o);r instanceof ft&&this.expand(r,e,!0,t)}},i.prototype.findItem=function(e,t,o,r,n){var s=this.dataSource;if(!s)return-1;var l=this.itemCount;if(l<1)return-1;var u=Math.min(e.length,t.length);if(u<1)return-1;var h=!o||o.allFields,d=o&&o.caseSensitive,p=o&&o.partialMatch,f=null,g=[],m=o.reverse;r=Math.max(0,r),n=Math.min(l-1,n);for(var b=0;b<u;b++)g[b]=s.getField(e[b]).dataType;var C=o.compareCallback;C=typeof C=="function"?C:v.compareTextValue;for(var x=r;m?x>=n:x<=n;m?x--:x++){var E=this.$_getItem(x),S=E.dataRow,P=S>=0;if(P)for(b=0;b<u;b++){var R=E.getData(e[b]),k=s.getOrgFieldName(e[b]);switch(g[b]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t[b]instanceof Date)P=C.call(s.handler,t[b],R,d,p,S,k);else{if(!f){var D=/[.]/.test(t[b])?"yyyy.MM.dd":/[/]/.test(t[b])?"yyyy/MM/dd":/[-]/.test(t[b])?"yyyy-MM-dd":"yyyyMMdd";f=new Lt(D)}P=C.call(s.handler,t[b],R&&f.getText(R),d,p,S,k)}break;default:P=C.call(s.handler,t[b],R,d,p,S,k)}if(P&&!h)return x;if(!P&&h)break}if(P)return x}return-1},i.prototype.findCell=function(e,t,o,r,n,s){var l=this.dataSource;if(!l)return null;var u=this.itemCount;if(u<1)return null;var h=o.caseSensitive,d=o.partialMatch,p=l.fieldCount,f=e.length,g=o.reverse,m=null,b=[],C=o.compareCallback;C=typeof C=="function"?C:v.compareTextValue;for(var x=0;x<p;x++)b[x]=l.getField(x).dataType;r=Math.max(0,r),n=Math.min(u-1,n),s=Math.max(g?-1:0,Math.min(s,f-1)),g?s<0&&(s=e.length-1,r--):s>=e.length&&(r++,s=0);for(var E=r;g?E>=n:E<=n;g?E--:E++){var S=this.$_getItem(E),P=S.dataRow;if(P>=0)for(x=g?E<r?f-1:s:E>r?0:s;g?x>=0:x<f;g?x--:x++){var R=e[x];if(R>=0&&R<p){var k=S.getData(R),D=l.getOrgFieldName(R),F=!1;switch(b[R]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t instanceof Date)F=C.call(l.handler,t,k,h,d,P,D);else{if(!m){var H=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd";m=new Lt(H)}F=C.call(l.handler,t,k&&m.getText(k),h,d,P,D)}break;default:F=C.call(l.handler,t,k,h,d,P,D)}if(F)return{itemIndex:E,fieldIndex:R,searchFieldIndex:x}}}}return null},i.prototype.getGroupItem=function(e){return function t(o){for(var r=0,n=o.children.length;r<n;r++){var s=o.children[r];if(s.id===e)return s;if(s instanceof Ht){var l=t(s);if(l)return l}}}(this._rootItem)},Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(e,t){return this.grouped&&!t?e>=0&&e<this._visibleItems.count?this._visibleItems.getItem(e):null:this.source.getItem(e,t)},i.prototype.getItems=function(e,t){if(this.grouped){for(var o=this._visibleItems,r=[],n=Math.min(o.count,e+t-1),s=e;s<n;s++){var l=o.getItem(s);r.push(l)}return r}return this.source.getItems(e,t)},i.prototype.getAllItems=function(){if(this.grouped){var e=new Nh(this);return e.expand(this.rootItem,!0,!1,0),e.items}return this.source?this.source.getAllItems():null},i.prototype.getIndexOfRow=function(e){if(this.grouped){for(var t=this._visibleItems,o=0,r=t.count;o<r;o++)if(t.getItem(o).dataRow==e)return o;return-1}return this.source.getIndexOfRow(e,!1)},i.prototype.getItemOfRow=function(e,t){if(this.grouped){for(var o=this._visibleItems,r=0,n=o.count;r<n;r++){var s=o.getItem(r);if(s.dataRow==e)return s}return null}return this.source.getItemOfRow(e,t)},i.prototype._initialize=function(){a.prototype._initialize.call(this),this._visibleItems=new Nh(this)},i.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},i.prototype._populateItems=function(){this.$_populateItems(!1)},i.prototype._resetItemIndicies=function(e){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(e):a.prototype._resetItemIndicies.call(this,e)},i.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):a.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},i.prototype.$_groupCheckable=function(e,t){for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o);(n instanceof ft||n instanceof Kt)&&n.setCheckable(t),n instanceof ft&&this.$_groupCheckable(n,t)}},i.prototype.setGroupCheckable=function(e){e!=this._checkable&&(this._checkable=e,this.$_groupCheckable(this.rootItem,e))},i.prototype.checkAll=function(e,t,o,r,n){var s=this.dataSource;if(s)if(this._editItem&&(o?this._editItem.checkable&&this._editItem._setChecked(e):this._editItem._setChecked(e)),t||!this.grouped)a.prototype.checkAll.call(this,e,t,o,r,n);else{var l=this._visibleItems.fixedCount;if(l>0)if(o)for(var u=l;u--;){var h=this.getItem(u);h.checkable&&h._setChecked(e)}else for(u=l;u--;)this.getItem(u)._setChecked(e);var d=this.source._checkFieldIndex>-1;d&&s.beginUpdate();try{this.$_checkChildren(this.rootItem,e,o,n)}finally{d&&s.endUpdate(!1)}this._fireItemCheckChanged(null,e),r?this._fireItemAllChecked(e):this._fireRefreshClient()}},i.prototype.getItemChecked=function(e,t){return this.source.getItemChecked(e,t)},i.prototype.setItemChecked=function(e,t){return this.source.setItemChecked(e,t)},i.prototype.getFirstRow=function(){for(var e=0,t=this._visibleItems.count;e<t;e++){var o=this._visibleItems.getItem(e);if(o instanceof Tt)return o}},i.prototype.getLastRow=function(){for(var e=this._visibleItems.count-1;e>=0;e--){var t=this._visibleItems.getItem(e);if(t instanceof Tt)return t}},i.prototype.getPrevRow=function(e){if(e){e.visible||(e=e.getVisibleAncestor());for(var t=e.index-1;t>=0;t--)if((e=this._visibleItems.getItem(t))instanceof Tt)return e}return this.getFirstRow()},i.prototype.getNextRow=function(e){if(e){e.visible||(e=e.getVisibleAncestor());for(var t=e.index+1,o=this._visibleItems.count;t<o;t++)if((e=this._visibleItems.getItem(t))instanceof Tt)return e}return this.getLastRow()},i.prototype.$_saveExpand=function(e,t){if(this.dataSource)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o);if(n instanceof Ht||n instanceof yi){var s=n.firstItem._dataRowId,l=this.dataSource.getDataRow(s),u=n._groupField;l>=0&&u>=0&&(t[s]={expanded:n._expanded,children:[]},this.$_saveExpand(n,t[s].children))}}},i.prototype.$_restoreExpand=function(e,t){if(this.dataSource)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o);if(n instanceof Ht||n instanceof yi){var s=n.firstItem._dataRowId,l=this.dataSource.getDataRow(s),u=n._groupField;l>=0&&u>=0&&t[s]&&(n._setExpanded(t[s].expanded),this.$_restoreExpand(n,t[s].children))}}},i.prototype.$_populateItems=function(e){if(this.dataSource){var t={},o=this.source.itemCount,r=this._rootItem;if(e&&o>0&&r&&this.$_saveExpand(r,t),this._clearItems(),this.source){if(this._groupFields){for(var n=this.dataSource.fieldCount,s=this._groupFields.length-1;s>=0;s--)this._groupFields[s]>=n&&this._groupFields.splice(s,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&o>0&&(this.$_buildGroupItems(o),e&&this.$_restoreExpand(r,t),this.$_resetVisibleItems())}}},i.prototype.$_checkChildren=function(e,t,o,r){for(var n=0,s=e.count;n<s;n++){var l=e.getItem(n);l&&(o?(r||l.isDataRow)&&l.checkable&&l._setChecked(t):l._setChecked(t)),l instanceof ft&&this.$_checkChildren(l,t,o,r)}},i.prototype.$_getItem=function(e){return this._grouped?this._visibleItems.getItem(e):this.source.getItem(e)},i.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},i.prototype.$_buildGroupItems=function(e){if(e>this.fixedCount){var t=new ol(this.fixedCount,e-1);this.$_buildGroups(t,this.source,this._groupFields),this.$_buildItems(this.rootItem,t,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},i.prototype.$_resetDisplayLevels=function(e){for(var t=0,o=e.count;t<o;t++){var r=v.cast(e.getItem(t),ft);if(r){var n=v.cast(r.firstItem,Tt);n&&n._displayLevel<0&&(n._displayLevel=r.level),this.$_resetDisplayLevels(r)}}},i.prototype.$_buildGroups=function(e,t,o){if(this.dataSource&&!(o.length<=e.level)){var r=e.startIndex,n=e.endIndex;if(!(n<r)){var s=e.level+1,l=o[e.level],u=this.dataSource.getField(l),h=new ol(r,r);h.level=s,e.children.push(h);var d=!this.mergeMode&&this._valueForGroupCallback,p=t.getItem(r),f=p.getData(l);f=d?d.call(this._callbackOnwer,this._callbackOnwer,p.dataRow,u.orgFieldName,f):f;for(var g=r+1;g<=n;g++){var m=(p=t.getItem(g)).getData(l);m=d?d.call(this._callbackOnwer,this._callbackOnwer,p.dataRow,u.orgFieldName,m):m,u.equalValues(m,f)||(h&&(h.endIndex=g-1,h.groupValue=f),(h=new ol(g,g)).level=s,e.children.push(h)),f=m}h&&(h.endIndex=n,h.groupValue=f),g=0;for(var b=e.children.length;g<b;g++)this.$_buildGroups(e.children[g],t,o)}}},i.prototype.$_buildItems=function(e,t,o){var r,n=this.mergeMode,s=t.children.length;if(s>0){r=t.level;for(var l=o[t.level],u=0;u<s;u++){var h=n?new yi(r,l):new Ht(l);h._setExpanded(this.expandWhenGrouping),e.add(h),h._setCheckable(this._checkable),h.groupValue=t.children[u].groupValue,this.$_buildItems(h,t.children[u],o)}}else{var d=t.endIndex-t.startIndex+1,p=this.source.getItems(t.startIndex,d);e.addAll(p),this._incDescendents(e,d)}if((r=e.level)>0){var f=this._callbackOnwer,g=this._footerCallback;if(this._footerCounter)for(var m=0,b=(u=0,this._footerCounter.getGroupFooterCount(e));u<b;u++){var C=!(!g||g(f,e,u));(x=n?new ti:new Kt).$_footerIndex=u,x.$_vindex=C?-1:m++,x.hiddenFooter=C,e.add(x),x.setCheckable(this._checkable)}else if(g||g(f,e,0)){var x=n?new ti:new Kt;e.add(x)}}},i.prototype.$_setEditItem=function(e){this._editItem=e},i.prototype.$_setDummyEditItem=function(e){this._dummyEditItem=e},i.prototype.fireGrouping=function(e){return this.fireConfirmEvent(i.GROUPING,e)},i.prototype.fireGrouped=function(e){this.fireEvent(i.GROUPED)},i.prototype.fireExpand=function(e){return this.fireConfirmEvent(i.EXPAND,e)},i.prototype.fireExpanded=function(e){this.fireEvent(i.EXPANDED,e)},i.prototype.fireCollapse=function(e){return this.fireConfirmEvent(i.COLLAPSE,e)},i.prototype.fireCollapsed=function(e,t){this.fireEvent(i.COLLAPSED,e,t)},i.prototype.onItemProviderRefresh=function(e){this._grouped&&(this.$_populateItems(!0),this._fireRefresh())},i.GROUPING="onGroupedItemProviderGrouping",i.GROUPED="onGroupedItemProviderGrouped",i.EXPAND="onGroupedItemProviderExpand",i.EXPANDED="onGroupedItemProviderExpanded",i.COLLAPSE="onGroupedItemProviderCollapse",i.COLLAPSED="onGroupedItemProviderCollapsed",i}(mh),mg=function(a){function i(e){var t=a.call(this)||this;return t._styleMap={},t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){this._styleMap=null,a.prototype._doDispose.call(this)},i.prototype.addCellStyle=function(e,t,o){return(this._styleMap[e]||(this._styleMap[e]={}))[t]=o,!0},i.prototype.getCellStyle=function(e,t){var o=this._styleMap[e];return o&&o[t]},i.prototype.removeCellStyle=function(e,t){if(e==null)this._styleMap={};else{var o=this._styleMap[e];o&&(t?delete o[t]:delete this._styleMap[e])}return!0},i.prototype.connect=function(e){this._styleMap={}},i.prototype.disconnect=function(){this._styleMap={}},i.prototype.clearRows=function(){this._styleMap={}},i.prototype.setRows=function(){this._styleMap={}},i.prototype.removeRow=function(e){var t=this._owner.getItemOfRow(e,!0);t&&delete this._styleMap[t.dataRowId]},i.prototype.removeRows=function(e){var t=this;e.forEach(function(o){var r=t._owner.getItemOfRow(o,!0);r&&delete t._styleMap[r.dataRowId]})},i}(th),rl=function(a){function i(){return a.call(this)||this}return w(i,a),i}(og),nl=function(a){function i(e,t,o){var r=a.call(this)||this;return r._runtime=new rl,r._owner=e,r._exprNode=qi.Default.parse(t,["value","values"]),r._runtime=new rl,r._callback=o,r}return w(i,a),i.clearCheckables=function(e){for(var t=e.itemCount;t--;)e.getItem(t)._setCheckable(!0)},i.prototype.connect=function(e){this._runtime.setDataSource(e)},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){i.clearCheckables(this._owner)},i.prototype.setRows=function(){for(var e=this._owner._rows,t=e.length;t--;){var o=e[t];this.$_setCheckable(o)}},i.prototype.insertRow=function(e){var t=this._owner.getItemOfRow(e,!0);this.$_setCheckable(t)},i.prototype.insertRows=function(e,t){for(var o=0;o<t;o++){var r=this._owner.getItemOfRow(e+o,!0);r instanceof kt&&this.$_setCheckable(r)}},i.prototype.updateRow=function(e){var t=this._owner.getItemOfRow(e,!0);this.$_setCheckable(t)},i.prototype.updateRows=function(e,t){for(var o=0;o<t;o++){var r=this._owner.getItemOfRow(e+o,!0);r instanceof kt&&this.$_setCheckable(r)}},i.prototype.updateRowList=function(e){for(var t=0,o=e;t<o.length;t++){var r=o[t],n=this._owner.getItemOfRow(r,!0);n instanceof kt&&this.$_setCheckable(n)}},i.prototype.changeStates=function(e){if(e)for(var t=e.length;t--;){var o=this._owner.getItemOfRow(e[t],!0);o instanceof kt&&this.$_setCheckable(o)}},i.prototype.$_setCheckable=function(e){var t,o=this._callback;o?t=o.call(this,e.dataSource.handler,e):(this._runtime.setItem(e),t=this._exprNode.evaluate(this._runtime)),e._setCheckable(t)},i}(th),bg=function(a){function i(e){var t=a.call(this,e)||this;return t._checkableExpression=null,t._rows=[],t._filteredItems=[],t._pageItems=[],t._sortedItems=[],t._pubItems=t._rows,t._items=t._rows,t._distinctRows=[],t._rowCount=0,t._fixedCount=0,t._fixedSorting=!1,t._maxItemCount=0,t._itemCount=0,t._pubCount=0,t._filtered=!1,t._filtering=!1,t._filters=[],t._filterRuntime=new wh,t._filterLock=0,t._fixedFiltering=!1,t._sorted=!1,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._labelComparer={},t._paging=!1,t._pagingSource=ie.ROWS,t._pageSize=10,t._pageCount=-1,t._pageStartIndex=-1,t._currPage=0,t._pageStart=0,t._summaryMap=null,t._checkableTag=null,t._cellStyleMapTag=new mg(t),t}return w(i,a),i.prototype._doDispose=function(){function e(t){for(var o=0,r=t.length;o<r;o++)t[o]&&t[o].dispose();t.length=0}this.dataSource=null,e(this._rows),e(this._filteredItems),e(this._pageItems),e(this._sortedItems),e(this._pubItems),e(this._items),e(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,a.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(e){var t=this._rows[e];return t&&t._getExtents()},i.prototype.setCommandStates=function(e,t){var o=this._rows[e];t!=null&&o&&o._setExtents(t)},Object.defineProperty(i.prototype,"isFilterOr",{get:function(){return this._filterOr===void 0?Re.filterOr!==void 0&&Re.filterOr:this._filterOr},set:function(e){e!=this._filterOr&&(this._filterOr=e,this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPaging",{get:function(){return this._paging},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Re.summaryMode||c.SummaryMode.AGGREGATE},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode||Re.sortMode||c.SortMode.AUTO},set:function(e){this._sortMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._filterMode||Re.filterMode||c.FilterMode.AUTO},set:function(e){this._filterMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullsOrder",{get:function(){return this._nullsOrder||Re.sorting.nullsOrder||c.NullsOrder.DEFAULT},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new nl(this,e),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(e){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new nl(this,null,e),this._dataSource&&this._checkableTag.connect(this._dataSource))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(e){this._labelComparer=e||{}},enumerable:!1,configurable:!0}),i.prototype.getFieldDomain=function(e){if(this._dataSource){for(var t=this._rows.length,o=[],r=void 0,n=0;n<t;n++){var s=this._dataSource.getValue(n,e);s!=r&&o.indexOf(s)<0&&o.push(s),r=s}return o}},i.prototype.beginFilter=function(){this._filterLock++},i.prototype.endFilter=function(e,t,o){e===void 0&&(e=!0),t===void 0&&(t=null),o===void 0&&(o=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),this._filterLock==0&&e&&this.applyFilters(!0,t,o))},i.prototype.hasFilter=function(e){var t=this._filters[e];return t&&t.length>0},i.prototype.addFilter=function(e,t){if(t&&t.criteria,e>=0){var o=this._filters[e];if(o||(o=[],this._filters[e]=o),t.criteria||t.callback){var r=new vh(t);return o.push(r),this.applyFilters(),r}}},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters=[],this.applyFilters())},i.prototype.hasFilters=function(){for(var e=this._filters.length,t=0;t<e;t++){var o=this._filters[t];if(o&&o.length>0)return!0}return!1},i.prototype.applyFilters=function(e,t,o){if(e===void 0&&(e=!0),t===void 0&&(t=null),o===void 0&&(o=null),!(this._filterLock>0)){this.$_buildItems();try{e&&this._fireRefresh()}finally{this._fireFiltered(t,o)}}},i.prototype.orderBy=function(e,t,o,r){var n=this;e===void 0&&(e=null),t===void 0&&(t=null),o===void 0&&(o=null),r===void 0&&(r=!0),this._fireSort(e,t,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=e?e.length:0,l=t?t.length:0,u=o?o.length:0,h=0;h<l;h++)t[h]=t[h]==c.SortDirection.ASCENDING||t[h]==c.SortDirection.DESCENDING?t[h]:c.SortDirection.ASCENDING;for(h=0;h<s;h++)this._sortFields.push(e[h]),l>h?this._sortDirections.push(t[h]):l>0?this._sortDirections.push(t[l-1]):this._sortDirections.push(c.SortDirection.ASCENDING),u>h?this._sortCases.push(o[h]):u>0?this._sortCases.push(o[u-1]):this._sortCases.push(c.SortCase.SENSITIVE);if(this._sorted=this.$_checkSorted(),this.$_buildItems(),this._outerSort&&this._outerSort instanceof Function){var d=this._outerSort(this._sortFields,this._sortDirections);if(d instanceof Promise)d.then(function(){try{r&&n._fireRefresh()}finally{n._fireSorted()}});else try{r&&this._fireRefresh()}finally{this._fireSorted()}}else try{r&&this._fireRefresh()}finally{this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.slice()},i.prototype.getSortDirections=function(){return this._sortDirections.slice()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.setNullsOrder=function(e){this._nullsOrder=e},i.prototype.setOuterSort=function(e){this._outerSort=e},i.prototype.setPaging=function(e,t,o,r){t===void 0&&(t=10),o===void 0&&(o=-1),r===void 0&&(r=null),t=Math.max(t,1),o=Math.max(o,-1),e==this._paging&&t==this._pageSize&&o==this._pageCount&&r==this._pagingSource||(this._currPage=0,this._paging=e,this._pagingSource=r,this._pageSize=t,this._pageCount=o,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(i.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!1,configurable:!0}),i.prototype.setPage=function(e,t){e===void 0&&(e=0),t===void 0&&(t=-1),this._paging&&(e=Math.max(0,Math.min(this.pageCount-1,e)),t=Math.max(-1,t),e==this._currPage&&t==this._pageStartIndex||(this._currPage=e,this._pageStartIndex=t,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(i.prototype,"pageCount",{get:function(){if(this._paging){if(this._pageCount>=0)return this._pageCount;var e=this.$_getPageItems();return Math.floor((e.length+this._pageSize-1)/this._pageSize)}return 0},set:function(e){this._paging&&(e=Math.max(-1,e))!=this._pageCount&&(this._pageCount=e,this.$_buildPage(),this._fireRefresh())},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(e){if(this._dataSource){if(this._paging){if(e<0||e>=this._dataSource.rowCount)return-1;var t=this.$_getPageItems();if(!t||!t.length)return-1;for(var o=0;o<t.length;o++)if(t[o].dataRow===e)return Math.floor(o/this._pageSize);return-1}return 0}},i.prototype.getCheckedRows=function(e){if(this._dataSource){for(var t=e?this._dataSource.rowCount:this.itemCount,o=[],r=0;r<t;r++){var n=e?this._rows[r]:this._pubItems[r];n.checked&&o.push(n.dataRow)}return o}},i.prototype.resetCheckables=function(){for(var e=this._rows.length;e--;)this._rows[e]._setCheckable(!0);this._fireRefresh()},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():nl.clearCheckables(this),this._fireRefresh()},i.prototype.setCheckFieldIndex=function(e){a.prototype.setCheckFieldIndex.call(this,e)},i.prototype.getJsonRows=function(){return this._pubItems.map(function(e){return e.getRowObject()})},i.prototype.addCellStyle=function(e,t,o){return this._cellStyleMapTag.addCellStyle(e,t,o)},i.prototype.removeCellStyle=function(e,t){return this._cellStyleMapTag.removeCellStyle(e,t)},i.prototype.getUserCellStyle=function(e,t){return this._cellStyleMapTag.getCellStyle(e,t)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){if(e!==this._dataSource){this.$_clearRows(!0);var t=this._dataSource;t&&(this._checkableTag&&this._checkableTag.disconnect(),this._cellStyleMapTag.disconnect(),t.disposing||(t.removeTag(this._cellStyleMapTag),t.removeListener(this),t.unregisterCommandListener(this))),(t=this._dataSource=e)&&(this._checkableTag&&this._checkableTag.connect(t),this._cellStyleMapTag.connect(t),t.addTag(this._cellStyleMapTag),this.$_buildRows(),t.addListener(this),t.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset())}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(e){(e=Math.max(0,e))!=this._maxItemCount&&(this._maxItemCount=e,this._refreshItems())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!1,configurable:!0}),i.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},i.prototype.getItem=function(e){return e<0||e>=this._pubCount?null:this._pubItems[e]},i.prototype.getItems=function(e,t){return this._pubItems.slice(e,e+t)},i.prototype.getIndexOfRow=function(e){if(e>=0&&e<this._rows.length){var t=this._rows[e];return t&&this._pubItems.indexOf(t)>=0?t.index:-1}return-1},i.prototype.getItemOfRow=function(e,t){if(e>=0&&e<this._rows.length){var o=this._rows[e];return o.index>=0||t?o:null}return null},i.prototype._refreshItems=function(){var e={};this.$_saveExtents(e),this.$_clearRows(!1),this.$_buildRows(e),this._fireRefresh()},i.prototype.setFixed=function(e,t,o,r){e=Math.max(0,e),(r||e!=this._fixedCount||t!=this._fixedSorting||o!=this._filtering)&&(this._fixedCount=e,this._fixedSorting=t,this._fixedFiltering=o,this.$_buildItems(),this._fireRefresh())},i.prototype.exchange=function(e,t){if(e!=t&&!this._sorted&&!this._filtered){if(e<0||e>=this._rows.length)throw new Error("index1 is out of bounds: "+e);if(t<0||t>=this._rows.length)throw new Error("index2 is out of bounds: "+e);var o=this._rows[e];this._rows[e]=this._rows[t],this._rows[t]=o}},i.prototype.clearDisplayLevels=function(){for(var e=this._rows,t=e.length,o=0;o<t;o++)e[o]._displayLevel=-1},i.prototype.getAllItems=function(){return this._pubItems.slice()},i.prototype.getNumber=function(e){var t=this.$_getSummary(e);return t?t.count:this.itemCount},i.prototype.getSum=function(e){var t=this.$_getSummary(e);return t?t.sum:NaN},i.prototype.getMax=function(e){var t=this.$_getSummary(e);return t?t.max:NaN},i.prototype.getMin=function(e){var t=this.$_getSummary(e);return t?t.min:NaN},i.prototype.getAvg=function(e){var t=this.$_getSummary(e);return t?t.avg:NaN},i.prototype.getVar=function(e){var t=this.$_getSummary(e);return t?t.vars:NaN},i.prototype.getVarp=function(e){var t=this.$_getSummary(e);return t?t.varsp:NaN},i.prototype.getStdev=function(e){var t=this.$_getSummary(e);return t?Math.sqrt(t.vars):NaN},i.prototype.getStdevp=function(e){var t=this.$_getSummary(e);return t?Math.sqrt(t.varsp):NaN},i.prototype.getDataCount=function(e){var t=this.$_getSummary(e);return t?t.dataCount:0},i.prototype.getDataAvg=function(e){var t=this.$_getSummary(e);return t?t.dataAvg:NaN},i.prototype.canGrouping=function(e){return this.fireGrouping(e)},i.prototype.$_saveExtents=function(e){for(var t=0,o=this._rows.length;t<o;t++){var r=this._rows[t];r.dataRowId>=0&&(e[r.dataRowId]={exts:r._extents,heights:r.heights&&r.heights.slice()})}},i.prototype.$_clearRows=function(e){e&&this.clearRowHeights(!0),this._rows.length=this._filteredItems.length=this._sortedItems.length=this._pubCount=0,this._filtered=!1,this._sorted=!1,this._pubItems=this._rows,this.$_clearDistincts()},i.prototype.$_clearIndicies=function(){for(var e=this._rows.length;e--;)this._rows[e]._index=-1},i.prototype.$_clearDistincts=function(){for(var e=this._distinctRows.length;e--;)this._distinctRows[e]=null;this._distinctRows.length=0},i.prototype.$_buildRows=function(e){e===void 0&&(e=null);var t=this._dataSource;if(t){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=t.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var o=0,r=this._rowCount;o<r;o++){var n=this._rows[o]=this.$_createRow(o);if(e&&e.hasOwnProperty(n.dataId)){var s=e[n.dataId];n._extents=s.exts,n.heights=s.heights&&s.heights.slice()}}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),this._rowCount==0&&this.clearRowHeights(!0)}},i.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},i.prototype.$_buildItems=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var o=this._dataSource;if(o){var r=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||o.hiddenCount>0)for(var n=0;n<this._rowCount;n++){var s=this._rows[n],l=o.getRowState(this._rows[n].dataRow),u=o.isHiddenRow(this._rows[n].dataRow);this.hideDeleted&&Qt(l)||u?s._index=-1:s._index=0}else for(n=0;n<this._rowCount;n++)this._rows[n]._index=0;var h=this.fixedCount,d=h>0&&!this._fixedFiltering,p=this._rows.length;if(!e){n=0;for(var f=this._filters.length;n<f;n++)if(E=this._filters[n])for(var g=0;g<E.length;g++)E[g].prepare(this._filterRuntime,o)}this._paging||(p=Math.min(p,r));var m=0;for(n=0;n<this._rowCount&&m<p;n++)if((s=this._rows[n]).index>=0)if(e||d&&m<h)this._filteredItems.push(s),m++;else{var b=!this._filterOr,C=0,x=0;for(f=this._filters.length;x<f;x++){var E;if((E=this._filters[x])&&C++,this._filterOr){if(E&&this.$_select(E,s,x)){b=!0;break}}else if(E&&!this.$_select(E,s,x)){b=!1;break}}b||C===0?(this._filteredItems.push(s),m++):s._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(t){var S=this._sortedItems;for(n=S.length;n--;)S[n].index<0&&S.splice(n,1)}else!this._outerSort&&this.$_sortRows();this._pubItems=this._outerSort?this._items:this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)}},i.prototype.$_buildPageItems=function(){var e=this.$_getPageItems();this._pageItems.length=0;for(var t=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,o=e.length,r=this.maxItemCount>0?this.maxItemCount:o,n=Math.min(this._pageSize,r);t<o&&n>0;t++,n--)this._pageItems.push(e[t]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},i.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},i.prototype.$_compareFuncs=function(e,t){var o={},r=this._dataSource;if(r){for(var n=0,s=e.length;n<s;n++){var l=r.getField(e[n]);if(l){var u=r.getDataComparer(l.index)||this._labelComparer[l.index],h=t[n]==c.SortCase.INSENSITIVE;if(!u)switch(l.dataType){case c.ValueType.DATETIME:case c.ValueType.NUMBER:u=r.compareNumbers.bind(r);break;case c.ValueType.BOOLEAN:u=r.compareBools.bind(r);break;case c.ValueType.OBJECT:u=r.compareObjects.bind(r);break;default:u=h?r.compareTexts.bind(r):r.compareValues.bind(r)}u&&(o[e[n]]=u)}}return o}},i.prototype.$_sortRows=function(e){var t=this;e===void 0&&(e=null);var o=e||this._items.slice(),r=[];this._fixedCount>0&&!this._fixedSorting&&(r=o.splice(0,this._fixedCount));var n=this.$_compareFuncs(this._sortFields,this._sortCases);o.sort(function(s,l){for(var u,h,d,p=0,f=0,g=t._sortFields.length;f<g;f++){var m=!(d=t._sortDirections[f]===c.SortDirection.DESCENDING)&&t.nullsOrder===c.NullsOrder.LAST||d&&t.nullsOrder===c.NullsOrder.FIRST?-1:1;if(h=t._sortFields.length==f+1,(u=n[t._sortFields[f]])&&(p=u(t._sortFields[f],s.dataRow,l.dataRow,m))!==0)break}return p=(p*=d?-1:1)===0&&h?d?l.dataRow-s.dataRow:s.dataRow-l.dataRow:p}),this._sortedItems=r.concat(o)},i.prototype.$_createRow=function(e){var t=new Tt(e);return this.attachItem(t),t._dataRowId=t.dataId,t},i.prototype.$_createAllRow=function(){for(var e=0;e<this._rowCount;e++)this._rows[e]||(this._rows[e]=this.$_createRow(e))},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var e=this._summaryMap.length-1;e>=0;e--)this._summaryMap[e]&&this._summaryMap[e].clear()},i.prototype.$_getSummary=function(e){var t=this._summaryMap[e];if(!t){var o=this._dataSource;o&&o.canSummarize(e)&&(t=new Hi(e),this._summaryMap[e]=t)}return t&&t.count==0&&this.itemCount>0&&this.$_summarize(t),t},i.prototype.$_summarize=function(e){var t=this._dataSource;if(t)if(this._filtered){for(var o=this._items.length,r=new Array(o),n=0;n<o;n++)r[n]=this._items[n].dataRow;t.summarizeRange(e,r,this._summaryMode==c.SummaryMode.STATISTICAL)}else t.summarize(e,this._summaryMode==c.SummaryMode.STATISTICAL)},i.prototype.$_needSort=function(){return this._sorted&&this._sortMode==c.SortMode.AUTO},i.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==c.FilterMode.AUTO},i.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},i.prototype.$_select=function(e,t,o){for(var r=0,n=e.length;r<n;r++)if(e[r].select(this._filterRuntime,t.parent,t,o))return!0},i.prototype.$_checkSorted=function(){for(var e=this._sortFields.length-1;e>=0;e--){var t=this._dataSource?this._dataSource.fieldCount:0;this._sortFields[e]>t&&(this._sortFields.splice(e,1),this._sortDirections.splice(e,1),this._sortCases.splice(e,1))}return this._sortFields&&this._sortFields.length>0},i.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},i.prototype.fireGrouping=function(e){return this.fireConfirmEvent(qo.GROUPING,e)},i.prototype.onDataSourceCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},i.prototype.onDataProviderDisposed=function(e){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},i.prototype.onDataProviderReset=function(e){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},i.prototype.onDataProviderRefresh=function(e){this._refreshItems()},i.prototype.onDataProviderRefreshClient=function(e){this._fireRefreshClient()},i.prototype.onDataProviderRowCountChanged=function(e,t){this._fireRefreshClient()},i.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.prototype.onDataProviderRowInserted=function(e,t,o){var r=this._rows,n=t<r.length?r[t]:null,s=this.$_createRow(t);r.splice(t,0,s);for(var l=t,u=r.length;l<u;l++)r[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var h=this._filteredItems;t=o??Math.max(0,n?h.indexOf(n):h.length),h.splice(t,0,s)}this._sorted&&(h=this._sortedItems,t=o??Math.max(0,n?h.indexOf(n):h.length),h.splice(t,0,s)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:t)}this._checkableTag&&this._checkableTag.insertRow(t),this._fireItemInserted(s),this._fireRefresh()},i.prototype.onDataProviderRowsInserted=function(e,t,o,r){if(!(o<0)){for(var n,s=this._rows,l=t<s.length?s[t]:null,u=[],h=0;h<o;h++)u.push(n=this.$_createRow(t+h)),s.splice(t+h,0,n);var d=s.length;for(h=t;h<d;h++)s[h]._dataRow=h;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var p=this._filteredItems;for(t=r??Math.max(0,l?p.indexOf(l):p.length),h=0;h<u.length;h++)p.splice(t+h,0,u[h])}if(this._sorted)for(p=this._sortedItems,t=r??Math.max(0,l?p.indexOf(l):p.length),h=0;h<u.length;h++)p.splice(t+h,0,u[h]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(t)}this._checkableTag&&this._checkableTag.insertRows(t,o),this._fireRefresh()}},i.prototype.$_silentRemoveRow=function(e){var t,o;this._filtered&&(o=(t=this._filteredItems).indexOf(e))>=0&&t.splice(o,1),this._sorted&&(o=(t=this._sortedItems).indexOf(e))>=0&&t.splice(o,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowRemoved=function(e,t){var o=this._rows,r=o[t];o.splice(t,1);for(var n=o.length-1;n>=t;n--)o[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(r),o.length==0&&this.clearRowHeights(!0),this._fireItemDeleted(r),this._fireRefresh()},i.prototype.onDataProviderRowsRemoving=function(e,t){return!0},i.prototype.$_silentRemoveRows=function(e){if(this._filtered)for(var t=this._filteredItems,o=0;o<e.length;o++){var r=e[o];(n=t.indexOf(r))>=0&&t.splice(n,1)}if(this._sorted)for(t=this._sortedItems,o=0;o<e.length;o++){var n;r=e[o],(n=t.indexOf(r))>=0&&t.splice(n,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowsRemoved=function(e,t){if(t&&!(t.length<1)){t.length>1&&t.sort(function(l,u){return l-u});for(var o=this._rows,r=t[0],n=[],s=t.length-1;s>=0;s--)n.push(o[t[s]]),o.splice(t[s],1);for(s=this._rows.length-1;s>=r;s--)o[s]._dataRow=s;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(n),t.length==0&&this.clearRowHeights(!0),this._fireRefresh()}},i.prototype.onDataProviderRowUpdating=function(e,t,o){return!0},i.prototype.onDataProviderRowUpdated=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(t),this._rows[t]&&this._fireItemUpdated(this._rows[t]),this._fireRefresh()},i.prototype.onDataProviderRowsUpdated=function(e,t,o){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(t,o),this._fireRefresh()},i.prototype.onDataProviderRowListUpdated=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(t),this._fireRefresh()},i.prototype.onDataProviderValueChanging=function(e,t,o,r){return!0},i.prototype.onDataProviderValueChanged=function(e,t,o){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(t),this._rows[t]&&this._fireItemUpdated(this._rows[t]),this._fireRefresh()},i.prototype.onDataProviderRowMoving=function(e,t,o){return!0},i.prototype.onDataProviderRowMoved=function(e,t,o){var r=this._rows,n=r.splice(t,1);r.splice(o,0,n[0]);for(var s=r.length,l=t=Math.min(t,o);l<s;l++)r[l]._dataRow=l;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},i.prototype.onDataProviderRowsMoving=function(e,t,o,r){return!0},i.prototype.onDataProviderRowsMoved=function(e,t,o,r){this._refreshItems()},i.prototype.onDataProviderRowListMoving=function(e,t,o){return!0},i.prototype.onDataProviderRowListMoved=function(e,t,o){this._refreshItems()},i.prototype.onDataProviderStateChanged=function(e,t){if(this.hideDeleted){var o=this._rows[t];Qt(o.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(o),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(t),this._fireRowStateChanged(this._rows[t])},i.prototype.onDataProviderRowHided=function(e,t,o){if(this._filtered=this.$_checkFiltered(),o){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var r=this.getItemsByRows(t);this.$_silentRemoveRows(r)}this._fireRefresh()}else this._refreshItems()},i.prototype.onDataProviderStatesChanged=function(e,t){if(this.hideDeleted){for(var o=!1,r=0,n=t.length;r<n;r++){var s=t[r],l=this._rows[s];if(Qt(l.rowState)){o=!0;break}}if(o){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var u=this.getItemsByRows(t);this.$_silentRemoveRows(u)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(t),this._fireRowStatesChanged(this.getItemsByRows(t))},i.prototype.onDataProviderRestoreRows=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(t),this._fireRowStatesChanged(this.getItemsByRows(t)),this._fireRefresh()},i.prototype.onDataProviderStatesCleared=function(e){this._pubCount!=e.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},i}(Ka),sl=function(a){function i(e,t,o){var r=a.call(this)||this;return r._owner=e,r._exprNode=qi.Default.parse(t,["value","values"]),r._runtime=new rl,r._callback=o,r}return w(i,a),i.clearCheckables=function(e){for(var t=function(n){if(n){n.setCheckable(!0);for(var s=n.count;s--;){var l=n.getItem(s);l instanceof ht&&t(l)}}},o=e.itemCount;o--;){var r=e.getItem(o);r instanceof ht&&t(r)}},i.prototype.connect=function(e){this._runtime.setDataSource(e)},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){i.clearCheckables(this._owner)},i.prototype.setRows=function(){for(var e=this._owner.itemCount;e--;){var t=this._owner.getItem(e);t instanceof ht&&this.$_setCheckable(t,!0)}},i.prototype.addRow=function(e,t){t===void 0&&(t=!0);var o=this._owner.getItemOfRow(e.rowId);o instanceof ht&&this.$_setCheckable(o,t)},i.prototype.addRows=function(e){for(var t=e.length;t--;){var o=this._owner.getItemOfRow(e[t].rowId);o instanceof ht&&this.$_setCheckable(o,!0)}},i.prototype.updateRow=function(e){var t=this._owner.getItemOfRow(e.rowId);t instanceof ht&&this.$_setCheckable(t,!1)},i.prototype.updateRows=function(e){for(var t=0,o=e;t<o.length;t++){var r=o[t],n=this._owner.getItemOfRow(r.rowId);n instanceof ht&&this.$_setCheckable(n,!1)}},i.prototype.changeStates=function(e){for(var t=e.length;t--;){var o=this._owner.getItemOfRow(e[t].rowId);o instanceof ht&&this.$_setCheckable(o,!1)}},i.prototype.$_setCheckable=function(e,t){if(e){var o=this._callback,r=void 0;if(o?r=o.call(this,e.dataSource.handler,e):(this._runtime.setItem(e),r=this._exprNode.evaluate(this._runtime)),e.setCheckable(r),t)for(var n=e.count;n--;){var s=e.getItem(n);s instanceof ht&&this.$_setCheckable(s,!0)}}},i}(me),vg=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e._extents={},e}return w(i,a),i.prototype.connect=function(e){this._extents={}},i.prototype.disconnect=function(){this._extents={}},i.prototype.clearRows=function(){this._extents={}},i.prototype.setRows=function(){},i.prototype.addRow=function(e){this._extents[e.rowId]=0;for(var t=e.count-1;t>=0;t--)this.addRow(e.getChild(t))},i.prototype.addRows=function(e){for(var t=0,o=e;t<o.length;t++){var r=o[t];this.addRow(r)}},i.prototype.removeRow=function(e){delete this._extents[e.rowId];for(var t=e.count-1;t>=0;t--)this.removeRow(e.getChild(t))},i.prototype.removeRows=function(e){for(var t=0,o=e;t<o.length;t++){var r=o[t];this.removeRow(r)}},i.prototype.updateRow=function(e){},i.prototype.updateRows=function(e){},i.prototype.getExtents=function(e){var t=this._extents[e.rowId];return t===void 0?this._extents[e.rowId]=0:t},i.prototype.setExtents=function(e,t){this._extents[e.rowId]=t},i}(me),wg=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e._styleMap={},e}return w(i,a),i.prototype.connect=function(e){this._styleMap={}},i.prototype.disconnect=function(){this._styleMap={}},i.prototype.clearRows=function(){this._styleMap={}},i.prototype.setRows=function(){this._styleMap={}},i.prototype.addRow=function(e){},i.prototype.addRows=function(e){},i.prototype.removeRow=function(e){delete this._styleMap[e.rowId]},i.prototype.removeRows=function(e){var t=this;e.forEach(function(o){return delete t._styleMap[o.rowId]})},i.prototype.updateRow=function(e){},i.prototype.updateRows=function(e){},i.prototype.addCellStyle=function(e,t,o){return(this._styleMap[e]||(this._styleMap[e]={}))[t]=o,!0},i.prototype.getCellStyle=function(e,t){var o=this._styleMap[e];return o&&o[t]},i.prototype.removeCellStyle=function(e,t){if(e==null)this._styleMap={};else{var o=this._styleMap[e];o&&(o[t]&&delete o[t],Object.keys(o).length||this._styleMap[e])}return!0},i}(me),Cg=function(a){function i(){var e=a.call(this)||this;return e._extents=0,e}return w(i,a),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(e){this._extents=e},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){},enumerable:!1,configurable:!0}),i}(kt),ht=function(a){function i(e){var t=a.call(this)||this;return t._iconHeight=0,t._dataRow=e,t}return w(i,a),i.getTemp=function(e,t){return i.$_tempItem._dataRow=e,i.$_tempItem[kt.PARENT]=t,i.$_tempItem},i.prototype.dispose=function(){this._dataRow=null,a.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(e){this._iconHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootItem",{get:function(){for(var e=this;e.level>1;)e=e.parent;return e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return c.SummaryMode.AGGREGATE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(e,t){this._editable=e,this._readOnly=t},i.prototype._getExtents=function(){var e=this.provider;return e?e._extents.getExtents(this):0},i.prototype._setExtents=function(e){var t;(t=this.provider)===null||t===void 0||t._extents.setExtents(this,e)},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),i.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},Object.defineProperty(i.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!this.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return c.ItemType.TREE},enumerable:!1,configurable:!0}),i.prototype.getFooter=function(e){return this._footer},i.prototype.isFooter=function(e){return e===this._footer},i.prototype.canEdit=function(){return!0},i.prototype.createFooter=function(){this._footer||(this._footer=new Cg)},i.prototype.setExpanded=function(e,t,o){(e!=this.expanded||o)&&(e?this.provider.expand(this,t,o,0):this.provider.collapse(this,t,o))},i.prototype.getData=function(e){return e=this.dataSource?this.dataSource.getFieldIndex(e):e,this._dataRow.getValue(e)},i.prototype.setData=function(e,t){e=this.dataSource?this.dataSource.getFieldIndex(e):e,this._dataRow.setValue(e,t,!1)},i.prototype.setItem=function(e,t){a.prototype.setItem.call(this,e,t),t._addChildren(e.children),e.clear()},i.prototype.exchange=function(e,t){this._exchangeItems(e,t)},i.prototype.moveChild=function(e,t){var o=e+t,r=this._children,n=r[e];if(t<0)for(var s=e;s>o;s--)r[s]=r[s-1];else for(s=e;s<o;s++)r[s]=r[s+1];r[o]=n},i.prototype.moveChildren=function(e,t,o){for(var r=this._children,n=r.splice(e,t),s=e+o,l=0;l<t;l++)r.splice(s+l,0,n[l])},i.prototype.changeParent=function(e,t){this.parent.remove(this),e&&e.insert(t,this)},i.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},i.$_tempItem=new i(null),i}(ft),ws=function(a){function i(e){var t=a.call(this,null)||this;return t._rs=e,t}return w(i,a),Object.defineProperty(i.prototype,"id",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.setExpanded=function(e,t,o){},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),i}(ht),xg=function(a){function i(e){var t=a.call(this)||this;return t._fixedCount=0,t._items=new Array,t._list=new Array,t._rs=e,t}return w(i,a),Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(e){return this._items[e]},i.prototype.setItem=function(e,t){this._items[e]=t},i.prototype.indexOf=function(e){return this._items.indexOf(e)},i.prototype.clear=function(){this._items.length=0},i.prototype.expand=function(e,t,o){o===void 0&&(o=0),e&&this.$_expandItem(e,t,o)},i.prototype.collapse=function(e){if(e)for(var t=this._rs,o=this._items,r=e.index+1;r<o.length&&o[r].level>e.level;){if(o[r]==e.footer){t.footerWhenCollapsed||(o[r]._index=-1,o.splice(r,1));break}o[r]._index=-1,o.splice(r,1)}},i.prototype.getNext=function(e){return e&&e.visible&&e.index<this.count-1?this._items[e.index+1]:null},i.prototype.getPrior=function(e){return e&&e.visible&&e.index>0?this._items[e.index-1]:null},i.prototype.insert=function(e,t){this._items.splice(t,0,e)},i.prototype.remove=function(e){var t=this._items,o=t.indexOf(e);if(o>=0&&(t.splice(o,1),e.expanded))for(;o<t.length&&e.isDescendant(t[o]);)t.splice(o,1)},i.prototype.$_collectChildren=function(e,t,o,r){for(var n=0,s=e.count;n<s;n++){var l=e.getItem(n);l&&(t.push(l),(o&&l.level<r||l.expanded)&&this.$_collectChildren(l,t,o,r))}e.footer&&t.push(e.footer)},i.prototype.$_expandItem=function(e,t,o){var r,n=this._items,s=this._list;if(r=e instanceof ws?this._fixedCount:e.index+1,o=Math.max(0,o),s.length=0,this.$_collectChildren(e,s,t,o>0?e.level+o:1e6),t){for(var l=r,u=n.length;l<u&&!(n[l].level<=e.level);l++);n.splice(r,l-r)}for(l=0,u=s.length;l<u;l++)n.splice(r+l,0,s[l])},i.prototype._clearAndInit=function(e){this.clear(),this._fixedCount=Math.min(e,this._rs.itemCount);for(var t=0;t<this._fixedCount;t++)this._items.push(this._rs.getItem(t))},i}(me),zr=function(a){function i(){var e=a.call(this,null)||this;return e._sortMode=c.SortMode.AUTO,e._expandWhenGrouping=!0,e._footerWhenExpanded=!0,e._footerWhenCollapsed=!0,e._labelComparer={},e._checkableExpression=null,e._checkableCallback=null,e._extents=new vg,e._filters={},e._filterRuntime=new wh,e._filtered=!1,e._sorter=new yg,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._visibleItems=new xg(e),e._itemMap=[],e._itemCount=0,e._summaryMap=null,e._filterLock=0,e._includeParentItem=!0,e._cellStyleMap=new wg,e}return w(i,a),i.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null;var e=this.dataSource;e&&!e.disposing&&(e.removeTag(this._extents),e.removeTag(this._cellStyleMap),e.removeListener(this),e.unregisterCommandListener(this)),a.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(e){var t=this._itemMap[e.rowId];return t&&t._getExtents()},i.prototype.setCommandStates=function(e,t){var o=e&&this._itemMap[e.rowId];t!=null&&o&&o._setExtents(t)},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){e!=this._expandWhenGrouping&&(this._expandWhenGrouping=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(e){e!=this._footerWhenExpanded&&(this._footerWhenExpanded=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(e){e!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(e){this._labelComparer=e||{}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Re.summaryMode||c.SummaryMode.AGGREGATE},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this.$_resetSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode||Re.groupSummaryMode||c.SummaryMode.AGGREGATE},set:function(e){e!=this._groupSummaryMode&&(this._groupSummaryMode=e,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(e){e!=this._hideDeleted&&(this._hideDeleted=e,this._saveAndRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new sl(this,e),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(e){e!=this._checkableCallback&&(this._checkableCallback=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new sl(this,null,e),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(e){e!=this._sortMode&&(this._sortMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(e){this._includeParentItem=e},enumerable:!1,configurable:!0}),i.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==c.SortMode.AUTO},i.prototype.insertItem=function(e,t,o,r){var n=this._visibleItems;e.collapsed&&n.expand(e,!1);var s=n.indexOf(e.getItem(o));if(r){e.insert(o+1,t);for(var l=n.count,u=e.level+1;++s<l&&!(n.getItem(s).level<=u););n.insert(t,s)}else e.insert(o,t),n.insert(t,s)},i.prototype.appendItem=function(e,t){var o,r=this._visibleItems;e.collapsed&&r.expand(e,!1),o=e.count>0?r.indexOf(e.getItem(e.count-1)):r.indexOf(e);for(var n=r.count,s=e.level;++o<n&&!(r.getItem(o).level<=s););e.add(t),r.insert(t,o)},i.prototype.removeItem=function(e){this._visibleItems.remove(e),e.parent.remove(e)},i.prototype.$_calcLevel=function(e,t,o){var r,n,s=e.count,l=t;for(r=0;r<s;r++)(n=e.getItem(r))&&(l=Math.max(l,t+1),o&&!n.expanded||(l=Math.max(l,this.$_calcLevel(n,t+1,o))));return l},i.prototype.getLevels=function(e){return this.$_calcLevel(this._rootItem,0,e)},i.prototype.$_setExpanded=function(e,t,o){if(this._setExpanded(e,!0),this.dataSource.setHasChildren(e.row,!1),t)for(var r=0,n=e.count;r<n;r++){var s=e.getItem(r);s instanceof ht&&(s.expanded||s.level<o)&&this.$_setExpanded(s,!0,o)}},i.prototype._expandItem=function(e,t,o,r,n){if(e&&(t||!e.expanded)){if(n&&!this._fireExpanding(e))return;this._visibleItems.collapse(e),this._visibleItems.expand(e,o,r),this._resetItemIndicies(e===this._rootItem?0:e.index),this.$_setExpanded(e,o,r>0?e.level+r:1e6);try{this._fireRefresh()}finally{n&&this._fireExpanded(e)}}},i.prototype.expand=function(e,t,o,r){r===void 0&&(r=0),this._expandItem(e,o,t,r,!0)},i.prototype.expandAll=function(e){this._expandItem(this._rootItem,!0,!0,e>0?e+1:0,!0)},i.prototype.$_setCollapsed=function(e,t){if(this._setExpanded(e,!1),t)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o);n instanceof ht&&this.$_setCollapsed(n,!0)}},i.prototype._collapseItem=function(e,t,o,r){if(e&&(t||e.expanded)){if(r&&!this._fireCollapsing(e))return;this._visibleItems.collapse(e),this.$_setCollapsed(e,o),e==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(e===this._rootItem?0:e.index);try{this._fireRefresh()}finally{r&&this._fireCollapsed(e)}}},i.prototype.collapse=function(e,t,o){this._collapseItem(e,o,t,!0)},i.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},i.prototype.$_saveExpanded=function(e){e._saveExpanded();for(var t=0,o=e.count;t<o;t++)this.$_saveExpanded(e.getItem(t))},i.prototype.orderBy=function(e,t,o,r){var n=this;r===void 0&&(r=!0),this._fireSort(e,t,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=e?e.length:0,l=t?t.length:0,u=o?o.length:0,h=0;h<s;h++)this._sortFields.push(e[h]),l>h?this._sortDirections.push(t[h]):l>0?this._sortDirections.push(t[l-1]):this._sortDirections.push(c.SortDirection.ASCENDING),u>h?this._sortCases.push(o[h]):u>0?this._sortCases.push(o[u-1]):this._sortCases.push(c.SortCase.SENSITIVE);try{if(this._saveAndRefresh(!0,r),this._outerSort&&this._outerSort instanceof Function)try{var d=this._outerSort();d instanceof Promise?d.then(function(){n._fireRefresh()}):this._fireRefresh()}finally{this._fireSorted()}else r&&this._fireRefresh()}finally{this._outerSort&&this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.concat()},i.prototype.getSortDirections=function(){return this._sortDirections.concat()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.setNullsOrder=function(e){this._sorter.setNullsOrder(e)},i.prototype.setOuterSort=function(e){this._outerSort=e},i.prototype.beginFiltering=function(){this._filterLock++},i.prototype.$_prepareFiltering=function(e,t){for(var o=t._dataRow.count,r=t.rowId,n=r<=-1||this.$_selectItem(t.parent,t),s=0;s<o;s++){var l=new ht(t._dataRow._children[s]);l[kt.PARENT]=t,l&&!this.dataSource.isHiddenRow(l.rowId)&&(n=this.$_prepareFiltering(e,l)||n)}return e[r]=n},i.prototype.endFiltering=function(e,t,o){var r={};e&&this._includeParentItem&&(r={},this.$_prepareFilters(),this.$_prepareFiltering(r,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),e&&this._filterLock==0&&this.applyFilters(t,o,r))},i.prototype.hasFilter=function(e){var t=this._filters[e];return!!t&&t.length>0},i.prototype.addFilter=function(e,t){var o=this._filters[e];o||(o=[],this._filters[e]=o);var r=new vh(t);return o.push(r),r},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters={},this.applyFilters(null,null))},i.prototype.hasFilters=function(){for(var e in this._filters){var t=this._filters[e];if(t&&t.length>0)return!0}return!1},i.prototype.$_prepareFilters=function(){var e=this.dataSource,t=e.fieldCount;for(var o in this._filters)Number(o)>=t&&(this._filters[o]=null);if(this._filtered=this.hasFilters())for(var r in this._filters){var n=this._filters[r];if(n)for(var s=n.length;s--;)n[s].prepare(this._filterRuntime,e)}},i.prototype.applyFilters=function(e,t,o){if(o||this.$_prepareFilters(),this._filterLock==0){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,o);try{this._fireRefresh()}finally{this._fireFiltered(e,t)}}},i.prototype.getItemByRow=function(e){return e?this._itemMap[e.rowId]:null},i.prototype.getCheckedRows=function(){var e=[];return function t(o,r){if(o instanceof ht)for(var n=0,s=o.count;n<s;n++){var l=o.getItem(n),u=void 0;l.checked&&(u=l.row)&&r.push(u),t(l,r)}}(this._rootItem,e),e},i.prototype.getCheckedRowIds=function(){var e=[];return function t(o,r){if(o instanceof ht)for(var n=0,s=o.count;n<s;n++){var l=o.getItem(n),u=void 0;l.checked&&(u=l.dataRow)>=0&&r.push(u),t(l,r)}}(this._rootItem,e),e},i.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():sl.clearCheckables(this),this._fireRefresh()},i.prototype.$_checkChildren=function(e,t,o){for(var r=0,n=e.count;r<n;r++){var s=e.getItem(r);s&&(o?s.checkable&&this._setCheckItem(s,t):this._setCheckItem(s,t)),s instanceof ht&&this.$_checkChildren(s,t,o)}},i.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},i.prototype.checkAll=function(e,t,o,r){t?a.prototype.checkAll.call(this,e,t,o,r,!1):(this.$_checkChildren(this._rootItem,e,o),r?this._fireItemAllChecked(e):this._fireRefreshClient())},i.prototype.addCellStyle=function(e,t,o){return this._cellStyleMap.addCellStyle(e,t,o)},i.prototype.removeCellStyle=function(e,t){return this._cellStyleMap.removeCellStyle(e,t)},i.prototype.getUserCellStyle=function(e,t){return this._cellStyleMap.getCellStyle(e,t)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._ds},set:function(e){if(e!==this._ds){this.$_clearItems(),this.$_resetSummary();var t=this._ds;t&&!t.disposing&&(t.removeTag(this._extents),t.removeTag(this._cellStyleMap),t.removeListener(this),t.unregisterCommandListener(this)),(t=this._ds=e)&&(this.$_buildTree(),t.addTag(this._extents),t.addTag(this._cellStyleMap),t.addListener(this,0),t.registerCommandListener(this)),this._fireReset()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!1,configurable:!0}),i.prototype._createRootItem=function(){var e=new ws(this);return this._setExpanded(e,!0),e},i.prototype.getItem=function(e){return e>=0&&e<this._visibleItems.count?this._visibleItems.getItem(e):null},i.prototype.getItems=function(e,t){throw new Error("Method not implemented.")},i.prototype.getItemOfRow=function(e,t){return this._itemMap[e]},i.prototype.$_collectItems=function(e,t){for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o);n instanceof ht&&(t.push(n),this.$_collectItems(n,t))}},i.prototype.getAllItems=function(){var e=[];return this.$_collectItems(this._rootItem,e),e},i.prototype.getJsonRows=function(){return this.getAllItems().map(function(e){var t=e.getRowObject();return t.__level=e.level,t})},i.prototype.getNumber=function(e){var t=this.$_getSummary(e);return t?t.count:this.itemCount},i.prototype.getSum=function(e){var t=this.$_getSummary(e);return t?t.sum:NaN},i.prototype.getMax=function(e){var t=this.$_getSummary(e);return t?t.max:NaN},i.prototype.getMin=function(e){var t=this.$_getSummary(e);return t?t.min:NaN},i.prototype.getAvg=function(e){var t=this.$_getSummary(e);return t?t.avg:NaN},i.prototype.getVar=function(e){var t=this.$_getSummary(e);return t?t.vars:NaN},i.prototype.getVarp=function(e){var t=this.$_getSummary(e);return t?t.varsp:NaN},i.prototype.getStdev=function(e){var t=this.$_getSummary(e);return t?Math.sqrt(t.vars):NaN},i.prototype.getStdevp=function(e){var t=this.$_getSummary(e);return t?Math.sqrt(t.varsp):NaN},i.prototype.getDataCount=function(e){var t=this.$_getSummary(e);return t?t.dataCount:0},i.prototype.getDataAvg=function(e){var t=this.$_getSummary(e);return t?t.dataAvg:NaN},i.prototype.findItem=function(e,t,o,r,n){var s=this.dataSource;if(!s||this.itemCount<1)return-1;var l=Math.min(e.length,t.length);if(l<1)return-1;var u=o.allFields,h=o.caseSensitive,d=o.partialMatch,p=null,f=[],g=o.reverse,m=o.compareCallback;m=typeof m=="function"?m:v.compareTextValue;for(var b=0;b<l;b++)f[b]=s.getField(e[b]).dataType;r=Math.max(0,r),n=Math.min(this._visibleItems.count-1,n);for(var C=r;g?C>=n:C<=n;g?C--:C++){var x=this._visibleItems.getItem(C),E=x.dataRow,S=x.dataRow>=0;if(S)for(b=0;b<l;b++){var P=x.getData(e[b]),R=s.getOrgFieldName(e[b]);switch(f[b]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t[b]instanceof Date)S=m.call(s.handler,t[b],P,h,d,E,R);else{if(!p){var k=/[.]/.test(t[b])?"yyyy.MM.dd":/[/]/.test(t[b])?"yyyy/MM/dd":/[-]/.test(t[b])?"yyyy-MM-dd":"yyyyMMdd";p=new Lt(k)}S=m.call(s.handler,t[b],P&&p.getText(P),h,d,E,R)}break;default:S=m.call(s.handler,t[b],P,h,d,E,R)}if(S&&!u)return C;if(!S&&u)break}if(S)return C}return-1},i.prototype.findCell=function(e,t,o,r,n,s){var l=this.dataSource;if(!l||this.itemCount<1)return null;for(var u=o.reverse,h=o.caseSensitive,d=o.partialMatch,p=l.fieldCount,f=e.length,g=null,m=[],b=0;b<p;b++)m[b]=l.getField(b).dataType;r=Math.max(0,r),n=Math.min(this._visibleItems.count-1,n),s=Math.max(u?-1:0,Math.min(s,f-1)),u?s<0&&(s=e.length-1,r--):s>=e.length&&(r++,s=0);var C=o.compareCallback;C=typeof C=="function"?C:v.compareTextValue;for(var x=r;u?x>=n:x<=n;u?x--:x++){var E=this._visibleItems.getItem(x),S=E.dataRow,P=!1;if(E.dataRow>=0)for(b=u?x<r?f-1:s:x>r?0:s;u?b>=0:b<f;u?b--:b++){var R=e[b],k=l.getOrgFieldName(R);if(R>=0&&R<p){var D=E.getData(R);switch(m[R]){case c.ValueType.DATETIME:case c.ValueType.DATE:if(t instanceof Date)P=C.call(l.handler,t,D,h,d,S,k);else{if(!g){var F=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd";g=new Lt(F)}P=C.call(l.handler,t,D&&g.getText(D),h,d,S,k)}break;default:P=C.call(l.handler,t,D,h,d,S,k)}if(P)return{itemIndex:x,fieldIndex:R,searchFieldIndex:b}}}}return null},i.prototype.$_internalAddItem=function(e,t,o){var r=ht.getTemp(t,e),n=this.dataSource;if(!(this.hideDeleted&&Qt(r.rowState)||n.isHiddenRow(t.rowId)))return r&&(o??this.$_selectItem(e,r))?(r=new ht(t),e.insert(t.index,r),this._itemCount++,this._itemMap[t.rowId]=r,r):void 0},i.prototype.$_internalRemoveItem=function(e){e&&(e.parent.remove(e),this._itemCount--,this._itemMap[e.row.rowId]=void 0)},i.prototype.$_internalRowStateChanged=function(e,t){if(t===void 0&&(t=!0),e)if(this.hideDeleted&&Qt(e.rowState)){var o=e.parent;this.$_internalRemoveItem(e),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(e),t=!0),t&&this._fireRefresh()}else this._fireItemChanged(e)},i.prototype.$_selectField=function(e,t,o,r){for(var n=0,s=e.length;n<s;n++){var l=e[n];if(!(l.model instanceof Gr)&&l.select(this._filterRuntime,t,o,r))return!0}return!1},i.prototype.$_selectItem=function(e,t){if(!t)return!1;for(var o in this._filters){var r=this._filters[o];if(r&&!this.$_selectField(r,e,t,Number(o)))return!1}return!!t},i.prototype._setItem=function(e,t){this._visibleItems.setItem(e.index,t),this._resetItemIndex(e.index)},i.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},i.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},i.prototype.$_buildItems=function(e,t,o){t===void 0&&(t=!1);for(var r=e.row,n=r.count,s=0;s<n;s++){var l=r.getChild(s),u=this.$_internalAddItem(e,l,o?o[l.rowId]:null);u&&(t&&u._restoreExpanded(),l.count>0&&this.$_buildItems(u,t,o))}},i.prototype.$_sortItem=function(e){var t=e.count;t>1&&this.$_sort(e,0,0,t-1);for(var o=0;o<t;o++){var r=e.getItem(o);r instanceof ht&&this.$_sortItem(r)}},i.prototype.$_sort=function(e,t,o,r){var n,s=this._sortFields[t],l=this._sortDirections[t],u=this.dataSource,h=this._sortCases[t]==c.SortCase.INSENSITIVE;if(this._sorter.run(e,s,l,h,o,r,t+1==this._sortFields.length),n=u.getField(s).dataType==c.ValueType.TEXT&&h?u.equalTexts.bind(u):u.equalValues.bind(u),t+1<this._sortFields.length){for(var d=o,p=d;d<r;)d++,n(s,e.getItem(d).row,e.getItem(d-1).row)||(this.$_sort(e,t+1,p,d-1),p=d);p<r&&this.$_sort(e,t+1,p,r)}},i.prototype.$_buildTree=function(e,t){e===void 0&&(e=!1);var o=this.dataSource;this._rootItem._dataRow=o.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,e,t),this.$_clearSummary();for(var r=o.fieldCount,n=this._sortFields,s=this._sortDirections,l=this._sortCases,u=n.length;u--;)(n[u]<0||n[u]>=r)&&(n.splice(u,1),s.splice(u,1),l.splice(u,1));this.sorted&&this._rootItem.count>0&&!this._outerSort&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_resetGroupSummary=function(){},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var e=this._summaryMap.length;e--;)this._summaryMap[e]&&this._summaryMap[e].clear()},i.prototype.$_getSummary=function(e){var t=this._summaryMap[e];if(!t){var o=this.dataSource;o&&o.canSummarize(e)&&(t=new Hi(e),this._summaryMap[e]=t)}return t&&t.count==0&&this.itemCount>0&&this.$_summarize(t),t},i.prototype.$_summarize=function(e){var t=this.dataSource;if(t)if(this._filtered||this.hideDeleted||t.hiddenCount>0){for(var o=this._rootItem.getDescendants(!1),r=o.length,n=[],s=0;s<r;s++){var l=o[s];l instanceof ht&&!t.isHiddenRow(l.rowId)&&n.push(l.row)}e.count=n.length,t.summarizeRange(e,n,this.summaryMode==c.SummaryMode.STATISTICAL)}else e.count=t.rowCount,t.summarize(e,this.summaryMode==c.SummaryMode.STATISTICAL)},i.prototype._fireItemChanged=function(e){this._eventLock<=0&&this.fireEvent(i.ITEM_CHANGED,e)},i.prototype._fireExpanding=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(i.EXPANDING,e)},i.prototype._fireExpanded=function(e){this._eventLock<=0&&this.fireEvent(i.EXPANDED,e)},i.prototype._fireCollapsing=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype._fireCollapsed=function(e){this._eventLock<=0&&this.fireEvent(i.COLLAPSED,e)},i.prototype._fireParentChanging=function(e,t,o){return!(this._eventLock<=0)||this.fireConfirmEvent(i.PARENT_CHANGING,e,t,o)},i.prototype._fireParentChanged=function(e,t,o){this._eventLock<=0&&this.fireEvent(i.PARENT_CHANGED,e,t,o)},i.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},i.prototype._saveAndRefresh=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0),e&&this.$_saveExpanded(this._rootItem);var o={};this.hasFilters()&&function r(n,s){s[n.dataId]=!0,n.children.length>0&&n.children.forEach(function(l){r(l,s)})}(this._rootItem,o),this.$_clearItems(),this.$_buildTree(e,o),t&&this._fireRefresh()},i.prototype.onDataSourceCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},i.prototype.onTreeDataProviderDisposed=function(e){this.disposing||(this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null)},i.prototype.onTreeDataProviderReset=function(e){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},i.prototype.onTreeDataProviderRefresh=function(e){this._refreshItems()},i.prototype.onTreeDataProviderRefreshClient=function(e){this._fireRefreshClient()},i.prototype.onDataProvderCleared=function(e){this._refreshItems()},i.prototype.onTreeDataProviderRowCountChanged=function(e,t){},i.prototype.onTreeDataProviderRowAdding=function(e,t,o){return!0},i.prototype.onTreeDataProviderRowAdded=function(e,t){var o=this._itemMap[t.parent.rowId];if(o){var r=this.$_internalAddItem(o,t,!0);r?(this.$_buildItems(r),this.$_clearSummary(),o.expanded?this._expandItem(o,!0,!1,0,!1):this._fireItemChanged(o)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(t,!1),t.parent.level>0&&this._checkableTag.addRow(t.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowsAdded=function(e,t,o){var r,n=this._itemMap[t.rowId];if(n&&o&&(r=o.length)>0){for(var s=0;s<r;s++){var l=o[s],u=this.$_internalAddItem(n,l,!0);u&&this.$_buildItems(u)}this.$_clearSummary(),n.expanded?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n),this._checkableTag&&(this._checkableTag.addRows(o),t.level>0&&this._checkableTag.addRow(t))}this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowRemoving=function(e,t){return!0},i.prototype.onTreeDataProviderRowRemoved=function(e,t){var o=this._itemMap[t.rowId];if(o){var r=o.parent;this.$_internalRemoveItem(o),this.$_clearSummary(),r.expanded&&r.visible&&(this._visibleItems.remove(o),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsRemoving=function(e,t){return!0},i.prototype.onTreeDataProviderRowsRemoved=function(e,t){for(var o=t.length,r=!1,n=0;n<o;n++){var s=t[n],l=this._itemMap[s.rowId];if(l){var u=l.parent;this.$_internalRemoveItem(l),u.expanded&&u.visible&&(this._visibleItems.remove(l),r=!0)}}this.$_clearSummary(),r&&this._fireRefresh()},i.prototype.onTreeDataProviderRowUpdating=function(e,t){return!0},i.prototype.onTreeDataProviderRowUpdated=function(e,t){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[t.rowId];this.$_clearSummary(),this._fireItemUpdated(o),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(t)},i.prototype.onTreeDataProviderRowsUpdating=function(e,t){return!0},i.prototype.onTreeDataProviderRowsUpdated=function(e,t){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(t)},i.prototype.onTreeDataProviderValueChanging=function(e,t,o){return!0},i.prototype.onTreeDataProviderValueChanged=function(e,t,o){if(this.$_needSort())this._saveAndRefresh();else{var r=this._itemMap[t.rowId];this.$_clearSummary(),this._fireItemUpdated(r),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(t)},i.prototype.onTreeDataProviderIconIndexChanged=function(e,t){var o=this._itemMap[t.rowId];o&&o.visible&&this._fireItemChanged(o)},i.prototype.onTreeDataProviderHasChildrenChanged=function(e,t){var o=this._itemMap[t.rowId];o&&o.visible&&this._fireItemChanged(o)},i.prototype.onTreeDataProviderRowStateChanged=function(e,t,o){var r=this._itemMap[t.rowId];this.$_internalRowStateChanged(r,o),this._checkableTag&&this._checkableTag.updateRow(t),!r&&o&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowStatesChanged=function(e,t){var o=t.length,r=!1;if(o==1){var n=t[0];r=!(h=this._itemMap[n.rowId]),this.$_internalRowStateChanged(h),this._checkableTag&&this._checkableTag.updateRow(n),r&&this._saveAndRefresh()}else if(o>0){var s=!1;if(this.hideDeleted)for(var l=0,u=t.length;l<u;l++){var h=this._itemMap[t[l].rowId];if(r=r||!h,h&&Qt(h.rowState)){var d=h.parent;this.$_internalRemoveItem(h),d.expanded&&d.visible&&this._visibleItems.remove(h),s=!0}}this._checkableTag&&this._checkableTag.changeStates(t),s&&this.$_clearSummary(),r?this._saveAndRefresh():this._fireRefresh()}},i.prototype.onTreeDataProviderRowSiblingMoved=function(e,t,o){if(!this.$_needSort()){var r=this._itemMap[t.rowId];r&&(r.parent.moveChild(r.childIndex,o),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsSiblingMoved=function(e,t,o){if(!this.$_needSort()){var r=this._itemMap[t[0].rowId];r&&(r.parent.moveChildren(r.childIndex,t.length,o),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowParentChanged=function(e,t,o,r){var n=this._itemMap[t.rowId];if(n){var s=this._itemMap[o.rowId];this.$_needSort()&&(r=s?s.count():0),n.changeParent(s,r),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsParentChanged=function(e,t,o,r){var n=this._itemMap[t[0].rowId];if(n){var s=this._itemMap[o.rowId];this.$_needSort()&&(r=s?s.count():0);for(var l=0;l<t.length;l++){var u=t[l];(n=this._itemMap[u.rowId]).changeParent(s,r+l)}this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsHideChanged=function(e,t,o){if(o){for(var r=!1,n=0,s=t.length;n<s;n++){var l=t[n],u=this._itemMap[l];if(u){var h=u.parent;this.$_internalRemoveItem(u),h.expanded&&h.visible&&this._visibleItems.remove(u),r=!0}}r&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},i.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.ITEM_CHANGED="onTreeItemProviderItemChanged",i.EXPANDING="onTreeItemProviderExpanding",i.EXPANDED="onTreeItemProviderExpanded",i.COLLAPSING="onTreeItemProviderCollapsing",i.COLLAPSED="onTreeItemProviderCollapsed",i.PARENT_CHANGING="onTreeItemProviderParentChanging",i.PARENT_CHANGED="onTreeItemProviderParentChanged",i}(Ka),Ah=function(a){function i(e){var t=a.call(this)||this;return t._rs=e,t}return w(i,a),i.prototype.getCount=function(e){return this._rs.getNumber(e)},i.prototype.getSum=function(e){return this._rs.getSum(e)},i.prototype.getMax=function(e){return this._rs.getMax(e)},i.prototype.getMin=function(e){return this._rs.getMin(e)},i.prototype.getAvg=function(e){return this._rs.getAvg(e)},i.prototype.getVar=function(e){return this._rs.getVar(e)},i.prototype.getVarp=function(e){return this._rs.getVarp(e)},i.prototype.getStdev=function(e){return this._rs.getStdev(e)},i.prototype.getStdevp=function(e){return this._rs.getStdevp(e)},i.prototype.getDataCount=function(e){return this._rs.getDataCount(e)},i.prototype.getDataAvg=function(e){return this._rs.getDataAvg(e)},i}(me),Cs=function(a){function i(e,t,o){var r=a.call(this,t&&t.row)||this;return r._values=[],r._changeValues=[],r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._invalidFields=[],r._rs=e,r._target=t,r._state=o,r}return w(i,a),i.prototype.dispose=function(){this._values=null,a.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values.concat()},set:function(e){var t=this.dataSource,o=t.fieldCount;if(e){o=Math.min(o,e.length);for(var r=0;r<o;r++){var n=t.getField(r),s=this._values[r],l=n.readValue(e[r]);this._values[r]=l,this._started&&parent&&!n.equalValues(s,l)&&this._rs._editItemCellUpdated(this,r,s,l)}}else this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),i.prototype.beginEdit=function(e,t){this._started=!0,this._checkDiff=e,this._strictDiff=t},i.prototype.setValue=function(e,t){var o=this.dataSource;if(e<0&&e>=o.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=o.getField(e),n=this._values[e];t=r.readValue(t),this._values[e]=t,this._started&&this.parent&&!r.equalValues(n,t)&&this._rs._editItemCellUpdated(this,e,n,t)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._target?this._target.rowState:c.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!!this._target&&this._target.expanded},enumerable:!1,configurable:!0}),i.prototype.getData=function(e){return e=this.dataSource.getFieldIndex(e),this._values[e]},i.prototype.setData=function(e,t){var o=this.dataSource;if((e=o.getFieldIndex(e))<0||e>=o.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=o.getField(e),n=this._values[e];t=r.readValue(t);var s=!this._checkDiff;s||(s=this._strictDiff?!r.equalValues(n,t):!r.sameValues(n,t)),s&&(this._values[e]=t,this._changeValues[e]=!0,this.parent&&(this._rs._editItemCellUpdated(this,e,n,t),this._rs._editItemCellEdited(this,e)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var e=this.dataSource;if(e){for(var t={},o=0,r=e.fieldCount;o<r;o++)t[e.getOrgFieldName(o)]=this._values[o];return t}return null},i.prototype.isEdited=function(e){return this._changeValues[e]},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs&&this._rs.source},enumerable:!1,configurable:!0}),i}(ht),Ig=function(a){function i(e){var t=a.call(this,null,e)||this;return t._observers=[],t._appending=!1,t._insertAfter=!1,t._insertIndex=-1,t._rs=new zr,t.source=t._rs,t._summarizer=new Ah(t._rs),t}return w(i,a),i.prototype._doDispose=function(){this._rs=this._rs&&this._rs.dispose(),this._summarizer=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.getLevels=function(e){return this._rs.getLevels(e)},i.prototype.setLabelComparer=function(e){this._rs.labelComparer=e},i.prototype.setNullsOrder=function(e){this._rs.setNullsOrder(e)},i.prototype.setOuterSort=function(e){this._rs.setOuterSort(e)},i.prototype.orderBy=function(e,t,o){this._rs.orderBy(e,t,o)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(e){this._rs.labelComparer=e},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(e){return e!=null?this._rs.hasFilter(e):this._rs.hasFilters()},i.prototype.addFilter=function(e,t){this._rs.addFilter(e,t)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFiltering()},i.prototype.endFiltering=function(e,t){this._rs.endFiltering(!0,e,t)},Object.defineProperty(i.prototype,"includeParentItem",{set:function(e){this._rs.includeParentItem=e},enumerable:!1,configurable:!0}),i.prototype.expand=function(e,t,o,r){this._rs.expand(e,t,o,r)},i.prototype.collapse=function(e,t){this._rs.collapse(e,t)},i.prototype.expandAll=function(e){this._rs.expandAll(e)},i.prototype.collapseAll=function(){this._rs.collapseAll()},i.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},i.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(i.prototype,"checkableExpression",{set:function(e){this._rs.checkableExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(e){this._rs.checkableCallback=e},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getAllItems=function(){return this._rs.getAllItems()},i.prototype.getItem=function(e){return this._rs.getItem(e)},i.prototype.getItemOfRow=function(e){return this._rs.getItemOfRow(e)},i.prototype.findItem=function(e,t,o,r,n){return this._rs.findItem(e,t,o,r,n)},i.prototype.findCell=function(e,t,o,r,n,s){return this._rs.findCell(e,t,o,r,n,s)},i.prototype.checkItem=function(e,t,o,r){this._rs.checkItem(e,t,o,r)},i.prototype.checkAll=function(e,t,o,r){this._rs.checkAll(e,t,o,r)},i.prototype.setCheckFieldIndex=function(e){this._rs.setCheckFieldIndex(e)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(e){this._rs.summaryMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{set:function(e){this._rs.groupSummaryMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(e){this._rs.hideDeleted=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(e){this._rs.sortMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._rs.movable},enumerable:!1,configurable:!0}),i.prototype.getItems=function(e,t){throw new Error("Method not implemented.")},i.prototype.canAppend=function(){return!1},i.prototype.canInsert=function(e){return!!e},i.prototype.canDelete=function(e){return!!e},i.prototype.$_replaceItem=function(e,t){e.parent.setItem(e,t),this._rs._setItem(e,t)},i.prototype._doBeginUpdate=function(e){return this._editingItem=this._editItem=this._createEditItem(e,c.ItemState.UPDATING,null),this.$_replaceItem(e,this._editItem),this._editItem},i.prototype._doBeginAppend=function(e){return this._editingItem=this._editItem=this._createEditItem(null,c.ItemState.APPENDING,e),this._editItem},i.prototype._doBeginInsert=function(e,t,o,r){if(o===void 0&&(o=!1),r===void 0&&(r=!1),r)this._appending=!0,e.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,c.ItemState.INSERTING,t),this._rs.appendItem(e,this._editItem);else{var n=e.parent;this._appending=!1,this._insertAfter=o,this._insertIndex=n.indexOf(e),this._editingItem=this._editItem=this._createEditItem(e,c.ItemState.INSERTING,t),this._rs.insertItem(n,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},i.prototype._doCompleteUpdate=function(e){var t=!1;if(this.dataSource){this.$_replaceItem(this._editItem,e);var o=this._editItem.row;try{t=o.update(this._editItem.values,!1)}catch(r){throw this.$_replaceItem(e,this._editItem),r}t||this.$_replaceItem(e,this._editItem)}return t},i.prototype._doCompleteInsert=function(e){var t=this.dataSource,o=this._editItem,r=!1;if(t){var n=o.parent,s=n.row,l=t.createRow(o.values,-1,!1),u=o.parent.indexOf(o);this._rs.removeItem(o);try{r=this.isAppending?s.addChild(l,!1):s.insertChild(u,l,!1)}catch(d){throw this._appending?this._rs.appendItem(n,o):this._rs.insertItem(n,o,this._insertIndex,this._insertAfter),d}if(r){var h=n.itemOfRow(l.rowId);o.setCheckable(h.checkable),this._copyExtents(o,h),o.heights&&(h.heights=o.heights.slice())}else this._appending?this._rs.appendItem(n,o):this._rs.insertItem(n,o,this._insertIndex,this._insertAfter)}return r},i.prototype._doCancelEdit=function(e,t){e==c.ItemState.UPDATING?(this.$_replaceItem(this._editItem,t),this._copyExtents(this._editItem,t)):e==c.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),a.prototype._doCancelEdit.call(this,e,t)},i.prototype._doCommitEdit=function(e,t){return e==c.ItemState.UPDATING||c.ItemState.INSERTING,a.prototype._doCommitEdit.call(this,e,t)},i.prototype.remove=function(e,t){if(e){var o=e.row;o&&o.parent.removeChild(o,t)}},i.prototype.getRemovableRows=function(e){if(e.length>0){for(var t=[],o=0,r=e.length;o<r;o++){var n=this._rs.getItem(e[o]);t.push(n.dataId)}return t}},i.prototype.removeRows=function(e,t){e&&this.dataSource.removeRows(e,t)},i.prototype.updateRows2=function(e){},i.prototype.setDataSource=function(e){this._rs.dataSource=e},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!1,configurable:!0}),i.prototype._createEditItem=function(e,t,o){this._editingItem=null;var r=this.dataSource;if(!r)return null;var n,s=r.fieldCount;switch(t){case c.ItemState.UPDATING:n=this._editingItem=new Cs(this,e,t);for(var l=0;l<s;l++)n.setValue(l,e.getData(l));this._copyExtents(e,n),e.heights&&(n.heights=e.heights.slice());break;case c.ItemState.INSERTING:case c.ItemState.APPENDING:if((n=this._editingItem=new Cs(this,null,t))._setExtents(0),o)for(l=0;l<s;l++)o.length>l&&n.setValue(l,o[l])}return this._editingItem},i.prototype.addCellStyle=function(e,t,o){return this._rs.addCellStyle(e,t,o)},i.prototype.removeCellStyle=function(e,t){return this._rs.removeCellStyle(e,t)},i.prototype.getUserCellStyle=function(e,t){return this._rs.getUserCellStyle(e,t)},i.prototype.onItemProviderFilterAdd=function(e,t,o){},i.prototype.onItemProviderFilterRemove=function(e,t,o){},i.prototype.onItemProviderFilterClear=function(e,t){},i.prototype.onItemProviderFilterClearAll=function(e){},i.prototype.onItemProviderFiltered=function(e,t,o){this._fireFiltered(t,o)},i.prototype.onItemProviderSort=function(e,t,o){this._fireSort(t,o,null)},i.prototype.onItemProviderSorted=function(e){this._fireSorted()},i.prototype.onTreeItemProviderItemChanged=function(e,t){this._eventLock<=0&&this.fireEvent(zr.ITEM_CHANGED,t)},i.prototype.onTreeItemProviderExpanding=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(zr.EXPANDING,t)},i.prototype.onTreeItemProviderExpanded=function(e,t){this._eventLock<=0&&this.fireEvent(zr.EXPANDED,t)},i.prototype.onTreeItemProviderCollapsing=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(zr.COLLAPSING,t)},i.prototype.onTreeItemProviderCollapsed=function(e,t){this._eventLock<=0&&this.fireEvent(zr.COLLAPSED,t)},i}(gi),Ko=function(a){function i(e){var t=a.call(this,e)||this;return Object.setPrototypeOf(t,i.prototype),t}return w(i,a),i}(Error),Rt=function(a){function i(e,t,o,r){var n=a.call(this,t)||this;return Object.setPrototypeOf(n,i.prototype),n.level=e,n.column=o,n.userMessage=r,n}return w(i,a),i.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},i}(Ko),Eg=function(a){function i(e){var t=a.call(this)||this;return t._active=!0,t._mode=c.ValidationMode.ALWAYS,t._level=c.ValidationLevel.ERROR,t._name=e,t}return w(i,a),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?qi.Default.parse(e,i.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!1,configurable:!0}),i.prototype.validate=function(e){if(this._exprNode&&!this._exprNode.evaluate(e)){var t=this._message||this._description||this._name||this._criteria;throw new Rt(this._level,t,null,this._message)}},i.prototype.doAssignSimple=function(e){if(typeof e=="string")return this.criteria=e,!0},i.CAPITAL_INDEXERS=["value","values"],i}(me),Bh=function(a){function i(e){var t=a.call(this)||this;return t._items=[],t._isColumn=e,t}return w(i,a),i.prototype._doDispose=function(){this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(e){this.assignFrom(e)},enumerable:!1,configurable:!0}),i.prototype.clear=function(){this._items=[]},i.prototype.addAll=function(e){if(e&&e.length>0)for(var t=0,o=e.length;t<o;t++)this._items.push(e[t])},i.prototype.validate=function(e,t,o,r){for(var n=0;n<this._items.length;n++){var s=this._items[n];if(s.active&&(s.mode==e||s.mode==c.ValidationMode.ALWAYS))try{s.validate(t)}catch(l){if(!(o=o&&!this._isColumn)||Q(s.level,r)<0)throw l instanceof Rt?(l.level=s.level,l):new Rt(s.level,l)}}},i.prototype.assignFrom=function(e){if(e!==this&&(this.clear(),e)){v.isArray(e)||(e=[e]);for(var t=0,o=e.length;t<o;t++){var r=new Eg;r.assignFrom(e[t]),this._items.push(r)}}},i}(me),Sg=function(a){function i(){var e=a.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}return w(i,a),i.prototype._doDispose=function(){this._item=null,this._dataSource=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!1,configurable:!0}),i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);switch(e){case i.ID_VALUE:case i.ID_VALUES:return this._item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){var r=o?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);switch(e){case i.ID_VALUE:case i.ID_VALUES:return this._item.getData(r)}throw new Ee("Invalid identifier indexer: "+e)},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES},i}(xi),Og=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){this._index=null,this._dataSource=null,a.prototype._doDispose.call(this)},i.prototype.setIndex=function(e){this._index=e,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._value;case i.ID_ROW:return this._index.itemIndex;case i.ID_DATAROW:return this._index.item.dataRow;case i.ID_INDEX:return this._index.column.index;case i.ID_FIELD:return this._index.dataColumn.dataIndex;case i.ID_CHECKED:var t=this._index.item;return!!t&&t.checked;case i.ID_TAG:return this._index.column.tag;case i.ID_BASE:var o=this._index.dataColumn.baseIndex;return o>=0?this._index.item.getData(o):void 0}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){var o=this._dataSource.fieldCount;if(t<0||t>=o)throw new Ee("Data field index out of bounds:"+t);switch(e){case i.ID_VALUE:case i.ID_VALUES:return this._index.item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){var r=o?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t),n=this._dataSource.fieldCount;if(r<0||r>=n)throw new Ee("Data field is not exists:"+t);switch(e){case i.ID_VALUE:case i.ID_VALUES:return this._index.item.getData(r)}throw new Ee("Invalid identifier indexer: "+e)},i.ID_VALUE=0,i.ID_ROW=1,i.ID_DATAROW=2,i.ID_INDEX=3,i.ID_FIELD=4,i.ID_CHECKED=5,i.ID_TAG=6,i.ID_BASE=7,i.ID_VALUES=8,i.IDENTS={value:i.ID_VALUE,row:i.ID_ROW,datarow:i.ID_DATAROW,index:i.ID_INDEX,field:i.ID_FIELD,checked:i.ID_CHECKED,tag:i.ID_TAG,base:i.ID_BASE,values:i.ID_VALUES},i}(xi),Rg=function(a){function i(e){var t=a.call(this)||this;return t._cellList={},t._owner=e,t}return w(i,a),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellList",{get:function(){return this._cellList},enumerable:!1,configurable:!0}),i.prototype.validateCell=function(e,t,o){this.$_validateCell(e,t,!0,this._owner.editOptions.commitLevel,o)},i.prototype.validateRow=function(e,t,o,r){var n=this._owner.editOptions.commitLevel;if(!o)for(var s=this._owner.getDataColumns(),l=0,u=s.length;l<u;l++){var h=s[l],d=le.temp(this._owner,e.index,h);try{this.$_validateCell(d,t,!0,n,r)}catch(g){if(!(g instanceof Rt)||Q(g.level,n)<0)throw g;!r&&this.addInvalidateCell(d,g)}}var p=this._owner.validations;if(p&&p.count>0){var f=this._owner.rowValidationRuntime;f.item=e,p.validate(t?c.ValidationMode.INSERT:c.ValidationMode.UPDATE,f,!0,n)}this.owner._fireValidateRow(e,t,e.getRowObject())},i.prototype.clearInvalidCells=function(e){this.$_clearInvalidateList(e)},i.prototype.clearInvalidCell=function(e){this.$_clearInvalidateCell(e)},i.prototype.getError=function(e){return e.item?(this._cellList[ai(e.item.itemState)?-1:e.dataId]||{})[e.dataField]:null},i.prototype.cloneError=function(e,t){var o=this._cellList;o[e]&&(o[t]=JSON.parse(JSON.stringify(o[e])))},i.prototype.addInvalidateCell=function(e,t){this.$_addInvalidateCell(e,t)},i.prototype.getInvalidCells=function(e){var t,o=[],r=this._cellList;if(e!=null){var n=this._owner.dataSource.getRowId(e);if(n==null)return null;(t={})[n]=this._cellList[n],r=t}for(var s in r){var l=r[s];for(var u in l){var h=l[u];o.push(v.deepCopy(h))}}return o.length>0?o:null},i.prototype.validateCells=function(e,t,o){var r=this._owner,n=r.getDataColumns(),s=[];if(e=v.makeArray(e))for(var l=0,u=e.length;l<u;l++)(d=r.getItem(e[l]))&&d.isDataRow&&(delete this._cellList[d.dataId],s.push(d));else{if(t)for(l=0,u=r.itemCount;l<u;l++)(d=r.getItem(l))&&d.isDataRow&&(delete this._cellList[d.dataId],s.push(d));else s=!r.isTree()&&r.paged&&o?r.itemSource.getPagingAllItems():r.getAllItems();this._cellList={}}l=0;for(var h=s.length;l<h;l++){var d;if((d=s[l]).isDataRow){var p=0;for(u=n.length;p<u;p++){var f=n[p],g=mi.tempItem(r,d,f);try{this.$_validateCell(g,!1,!1,c.ValidationLevel.IGNORE,!1)}catch{v.log("validateCells valiation fail add")}}}}return r.refreshView(),this.getInvalidCells()},i.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},i.prototype.checkRowIds=function(){var e=this.owner.dataSource;for(var t in this._cellList){var o=parseInt(t);o!==-1&&e.getDataRow(o)<0&&delete this._cellList[o]}},i.prototype.$_validateCell=function(e,t,o,r,n){var s=e.dataColumn;if(s){var l=this.owner.editOptions.validateOnlyEditColumn,u=!0;if((e.item instanceof Hr||e.item instanceof Cs)&&(u=e.item.isEdited(s.dataIndex)),!l||u||s.required)try{var h=e.item.getData(s.dataIndex);if(s.required){var d=s.grid,p=d&&d.dataSource&&d.dataSource.getField(s.dataIndex);if(p&&p.isEmpty(h)){var f=s.requiredMessage||"Value is required: "+s.fieldName;throw new Rt(s.requiredLevel||c.ValidationLevel.ERROR,f,s,s.requiredMessage)}}var g=s.validations;if(g&&g.count>0){var m=this._owner.columnValidationRuntime;m.setIndex(e),g.validate(t?c.ValidationMode.INSERT:c.ValidationMode.UPDATE,m,o,r)}this.owner._fireValidateCell(e,t,e.item.getData(e.dataField)),!n&&this.$_clearInvalidateCell(e)}catch(b){throw b instanceof Rt&&(b.column=s,!n&&this.$_addInvalidateCell(e,b)),b}}},i.prototype.$_addInvalidateCell=function(e,t){var o=ai(e.item.itemState)?-1:e.dataId,r=e.dataColumn&&e.dataColumn.dataIndex;if(!(o==null||r<=-1)){var n=this._cellList;(n[o]=n[o]||{})[r]={dataRow:e.dataRow,message:t.message,userMessage:t.userMessage,level:t.level,column:e.dataColumn.name,fieldName:e.dataColumn.fieldName}}},i.prototype.$_clearInvalidateCell=function(e){var t=ai(e.item.itemState)?-1:e.dataId,o=e.dataField,r=this._cellList[t];r&&r[o]&&delete r[o]},i.prototype.$_clearInvalidateList=function(e){e!=null?delete this._cellList[e]:this._cellList={},this._owner.refreshView()},i}(me),Pg=/(.*)/,kg="$1",Yr=function(){function a(i){this._pattern=Pg,this._replace=kg,this.$_parse(this._format=i)}return a.getFormatter=function(i){var e=a.Formatters[i];return e||(a.Formatters[i]=e=new a(i)),e},Object.defineProperty(a.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),a.prototype.getText=function(i){return i&&i.replace(this._pattern,this._replace)},a.prototype.$_parse=function(i){if(i){var e=i.trim().split(v.colonreg);if(e.length>1){var t=e[0].trim(),o=e[1].trim();t&&o&&(t.charAt(0)=='"'&&(t=t.substr(1,t.length-2)),t&&(o.charAt(0)=='"'&&(o=t.substr(1,o.length-2)),o&&(this._pattern=new RegExp(t,e[2]||""),this._replace=o)))}}},a.Formatters={},a}(),_o=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._changed=function(){},i.INIT_COUNT=200,i}(me),al=function(a){function i(){var e=a.call(this)||this;return e._level=0,e._mergeMode=!1,e}return w(i,a),i.getDefault=function(e,t){var o=i.$_default;return o._level=e,o._mergeMode=t,o},i.prototype.parseInit=function(e,t,o,r,n){var s=e.itemCount;(r=Math.min(s-o,r))<1||(this._mergeMode?this.$_parseMerged(e,t,o,r,n):this.$_parseNormal(e,t,o,r,n))},i.prototype.parseBounds=function(e,t,o,r,n){if(!(e.itemCount<1)){for(o=Math.max(0,o);o>=0&&n[o]<=0;){var s=e.getItem(o);if(s==this.$_getAncestor(s,this._level))break;o--}for(;o<=r&&n[o]>0;)o++;o<=r&&(this._mergeMode?this.$_parseMergedBounds(e,t,o,r,n):this.$_parseNormalBounds(e,t,o,r,n))}},i.prototype.$_getAncestor=function(e,t){var o=v.cast(e,ft);for(o||(o=e.parent);o.level>t;)o=o.parent;return o},i.prototype.$_parseNormal=function(e,t,o,r,n){var s=e.itemCount;if(!(s<1)){var l=e.fixedCount,u=e.getItem(o),h=u,d=o,p=d+1;for(n[d]=d+1;p<s;)u=e.getItem(p),(p==l||u.level!=h.level||u.constructor!==h.constructor||u instanceof Kt||u instanceof Ht)&&(d=p),n[p]=d+1,p++,h=u}},i.prototype.$_parseMerged=function(e,t,o,r,n){var s=e.itemCount;if(!(s<1))for(var l=e.getItem(o),u=this.$_getAncestor(l,this._level),h=o,d=n[h]=h+1;d<s;){l=e.getItem(d);var p=this.$_getAncestor(l,this._level);if(p!=u){if(d>=r)break;u=p,h=d}n[d]=h+1,d++}},i.prototype.$_parseNormalBounds=function(e,t,o,r,n){var s=e.itemCount;if(!(s<1)){var l=e.fixedCount,u=e.getItem(o),h=u,d=o,p=d+1;for(n[d]=d+1;p<s;)u=e.getItem(p),p!=l&&u.level==h.level&&u.constructor===h.constructor||(d=p),n[p]=d+1,p++,h=u}},i.prototype.$_parseMergedBounds=function(e,t,o,r,n){var s=e.itemCount;if(!(s<1)){var l=e.getItem(o),u=this.$_getAncestor(l,this._level),h=o,d=h+1;for(n[h]=h+1;d<s;){l=e.getItem(d);var p=this.$_getAncestor(l,this._level);if(p!=u){if(d>r)break;u=p,h=d}n[d]=h+1,d++}}},i.$_default=new i,i}(_o),Tg=function(a){function i(){var e=a.call(this)||this;return e._item=null,e._field=-1,e._ds=null,e._fieldCount=0,e._grid=null,e._layout=null,e}return w(i,a),i.getObjectText=function(e,t,o,r){var n=t.objectKey||t.objectCallback,s=n?t.objectKey:o.objectKey,l=n?t.objectCallback:o.objectCallback;return l&&typeof l=="function"?l(o.orgFieldName,e.dataRow,r):s&&r.hasOwnProperty(s)?r[s]:JSON.stringify(r)},i.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,a.prototype._doDispose.call(this)},i.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},i.prototype.setLayout=function(e){this._layout=e,this._column=e.firstColumn,this._grid=e.grid},i.prototype.setCell=function(e){this._item=e.item,this._field=e.dataField},i.prototype.setItem=function(e,t){this._item=e,this._field=t},i.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){if(this._item){var t=void 0;switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_GROUP:return this._item.parent;case i.ID_VALUE:var o=this._ds.getField(this._field);return(t=this._item.getData(this._field))!=null&&o.dataType===c.ValueType.OBJECT?i.getObjectText(this._item,this._column,o,t):t;case i.ID_PREV_VALUES:var r=this._grid.getDataColumns(),n=r.indexOf(this._column);if(!r.length||n<1)return"";for(var s=[],l=0,u=Math.min(n,r.length);l<u;l++)(t=this._item.getData(r[l].dataIndex))!=null&&this._ds.getField(r[l].dataIndex).dataType===c.ValueType.OBJECT?s.push(i.getObjectText(this._item,r[l],r[l].getField(),t)):s.push(t);return s.join("`")}throw new Ee("Invalid identifier key: "+e)}},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);var o=this._item.getData(t);if(o!=null&&this._ds.getField(t).dataType===c.ValueType.OBJECT){var r=this._column.grid.columnByField(t);return i.getObjectText(this._item,r,r.getField(),o)}return o}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._ds){var r=o?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);var n=this._item.getData(r);if(n!=null&&this._ds.getField(r).dataType===c.ValueType.OBJECT){var s=this._column.grid.columnByField(r);return i.getObjectText(this._item,s,s.getField(),n)}return n}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(xi),$h={},Vh=function(a){function i(e){var t=a.call(this)||this;return t._runtime=i.$_runtime=i.$_runtime||new Tg,t.criteria=e,t}return w(i,a),i.createRule=function(e){var t=typeof e=="string"?e:e&&e.criteria;return t?new i(t):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(e){(e=e?e.trim():null)!=this._criteria&&(this._criteria=e,this._exprNode=e?qi.Default.parse(e,null):null,this._changed())},enumerable:!1,configurable:!0}),i.prototype.parseInit=function(e,t,o,r,n){var s=this._layout.isBreakMergeOnEmpty(),l=e.fixedCount,u=e.itemCount,h=e.dataSource.rowCount;if(!((r=Math.min(u-o,r))<1||h<=0)){this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout);for(var d=null,p=o;p<u&&(d=e.getItem(p),!this.$_isRow(d,!1));)n[p]=p+1,p++;if(!(p>=u)){var f,g=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==c.ValueType.OBJECT,m=o=p;if(n[m]=m+1,!(d.dataRow>=h))for(g?f=d.getData(t):(this._runtime.setItem(d,t),f=this._exprNode.evaluate(this._runtime)),p=o+1;p<u;p++)if(d=e.getItem(p),this.$_isRow(d,!1)){if(d.dataRow>=h)break;var b=void 0;if(g?b=d.getData(t):(this._runtime.setItem(d,t),b=this._exprNode.evaluate(this._runtime)),p==l||b==null&&s||(b instanceof Date&&f instanceof Date?+b!=+f:b!=f)){if(p>=r)break;m=p,f=b}n[p]=m+1}else{if(p>=r)break;f=$h,m=p,n[p]=m+1}}}},i.prototype.parseBounds=function(e,t,o,r,n){var s=this._layout.isBreakMergeOnEmpty(),l=!1,u=e.itemCount;if(!(u<1)){var h=e.fixedCount,d=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==c.ValueType.OBJECT,p=$h,f=Math.max(0,o),g=f,m=-1;if(this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout),f>0&&n[f]<=0){var b=e.getItem(f);if(this.$_isRow(b,l)){var C=void 0;for(d?C=e.getItem(f).getData(t):(this._runtime.setItem(b,t),C=this._exprNode.evaluate(this._runtime)),f--;f>=0&&(b=e.getItem(f),this.$_isRow(b,l))&&(d?p=b.getData(t):(this._runtime.setItem(b,t),p=this._exprNode.evaluate(this._runtime)),!(f==h||p==null&&s||(p instanceof Date&&C instanceof Date?+p!=+C:p!=C)));)f--;for(var x=g-1;x>f;x--)n[x]=f+2;g-1>f&&(m=f+1)}else{for(n[f]=f+1,x=g-1;x>f;x--)n[x]=f+2;for(g-1>f+1&&(m=f+2),f--;f>=0&&n[f]<=0&&!this.$_isRow(e.getItem(f),l);)n[f]=f+1,f--}}for(f=Math.max(0,o);f<=r&&n[f]>0;)f++;for(;f<=r&&!this.$_isRow(e.getItem(f),l);)n[f]=f+1,f++;if(f<r){for(g=f,b=e.getItem(f),C=void 0,d?C=b.getData(t):(this._runtime.setItem(b,t),C=this._exprNode.evaluate(this._runtime)),f++;f<u;)if(b=e.getItem(f),this.$_isRow(b,l)){if(d?p=b.getData(t):(this._runtime.setItem(b,t),p=this._exprNode.evaluate(this._runtime)),f==h||p===void 0&&s||(p instanceof Date&&C instanceof Date?+p!=+C:p!=C)){var E=g;for(m>=0&&(E=m,m=-1),x=g;x<f;x++)n[x]=E+1;if(f>=r)break;C=p,g=f}else n[f]=g+1;f++}else{for(E=g,m>=0&&(E=m,m=-1),x=g;x<f;x++)n[x]=E+1;for(n[f]=f+1,f++;f<u&&!this.$_isRow(e.getItem(f),l);)n[f]=f+1,f++;if(g=f,f>=r)break}if(f==u&&(p instanceof Date&&C instanceof Date?+p==+C:p==C))for(E=m>=0?m:g,x=g;x<f;x++)n[x]=E+1}}},i.prototype.$_isRow=function(e,t){var o=e instanceof Tt&&!(e instanceof jr);if(o&&!t){var r=e.parent;o=r.expanded||r.firstItem!==e}return o},i.$_runtime=null,i}(_o),jh=function(a){function i(){return a.call(this)||this}return w(i,a),Object.defineProperty(i.prototype,"head",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tail",{get:function(){return-1},enumerable:!1,configurable:!0}),i}(me),ll=function(a){function i(e){var t=a.call(this)||this;return t._group=null,t._column=e.c1._columnObj,t._head=e.top,t._tail=e.bottom,t}return w(i,a),i.borrow=function(e){var t=i.$_rooms.pop();return t?(t._head=e.top,t._tail=e.bottom):t=new i(e),t},i.returnTo=function(e){if(e){var t=i.$_rooms;t.indexOf(e)<0&&t.push(e)}},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scope",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(e){this._group=e},enumerable:!1,configurable:!0}),i.prototype.getHead=function(e){return e?e.set(this._head,this._column):e=this._column.grid.getIndex(this._head,this._column),e},i.prototype.getTail=function(e){return e?e.set(this._tail,this._column):e=this._column.grid.getIndex(this._tail,this._column),e},i.prototype.isHead=function(e){return e.column==this._column&&e.itemIndex==this._head},i.prototype.isTail=function(e){return e.column==this._column&&e.itemIndex==this._tail},i.prototype.contains=function(e){return e.column==this._column&&e.itemIndex>=this._head&&e.itemIndex<=this._tail},i.$_rooms=new Array,i.$_roomCount=0,i}(jh),Xo=-1,Oo=65535,xs=function(a){function i(e){var t=a.call(this)||this;return t._flags=null,t._fixedRooms=[],t._rooms=[],t._inited=!1,t._fixedCells=[],t._cells=[],t._nextId=0,t._layout=e,e._merges=t,t}return w(i,a),i.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),i.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},i.prototype.initialize=function(e){if(!this._inited){var t=this._layout.grid,o=t.rowGroup,r=t.itemSource,n=this._layout.firstColumn,s=t.getGroupLevel(n.dataIndex),l=t.isGroupedColumn(n)&&n.mergeGrouped?al.getDefault(s,o.mergeMode):this._layout.$_mergeRuleObj();if(l){for(var u=this._flags=new Array(r.itemCount),h=t.fixedOptions.mergeRows?0:r.fixedCount,d=r.itemCount;d--;)u[d]=0;l._layout=this._layout,l.parseInit(r,n.dataIndex,h,e,u)}this._inited=!0}},i.prototype.refreshRooms=function(e,t,o){if(this._nextId=0,this._inited&&this._flags&&!(t<e)){var r=this._layout.grid,n=this._layout.firstColumn;if(r&&n){var s=this._rooms,l=r.layoutManager.fixedItemCount,u=r.itemSource,h=r.getGroupLevel(n.dataIndex),d=h>0&&n.mergeGrouped?al.getDefault(h,r.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),p=r.displayOptions.editItemMerging,f=0;if(this._fixedRooms.length=0,this._rooms.length=0,d&&(d._layout=this._layout,d.parseBounds(u,n.dataIndex,e,t,this._flags)),o)for(;f<l;)if(m=this.$_checkFixedMerge(u,n,f,l)){if(h<1){var g=new ll(m);this._fixedRooms.push(g)}f=m.r2+1}else f+=1;for(f=e;f<=t;){var m;if(m=this.$_checkMerge(u,n,f,s.length==0,l)){var b;if(h<1)(b=u.getItem(m.r2))instanceof yi||b instanceof ti||(g=new ll(m),this._rooms.push(g));else if((b=p?u.source.getItem(m.top):u.getItem(m.top)).level>=h){for(var C=b instanceof ft?b:b.parent;C.level>h;)C=C.parent;(g=new ll(m)).group=C,s.push(g)}f=m.r2+1}else f+=1}}}},i.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},i.prototype.getRooms=function(){return this._rooms.slice()},i.prototype.scroll=function(e){},i.prototype.getRoom=function(e){for(var t=e.rowFixed?this._fixedRooms:this._rooms,o=t.length-1;o>=0;o--)if(t[o].contains(e))return t[o];return null},i.prototype.prepareCells=function(e,t){if(e>0){for(var o=this._fixedCells,r=0;r<o.length;r++)o[r]=Xo;for(;o.length<e;)o.push(Xo)}var n=this._cells;for(r=0;r<n.length;r++)n[r]=Xo;for(;n.length<t;)n.push(Xo)},i.prototype.refreshCells=function(e,t){for(var o=this.getFixedRooms(),r=o.length-1;r>=0;r--){var n=o[r];this.addFixedCells(n.head,n.tail-n.head+1)}for(r=(o=this.getRooms()).length-1;r>=0;r--){n=o[r];var s=Math.max(0,n.head-t-e),l=n.tail-t-e;this.addCells(s,l-s+1)}},i.prototype.addFixedCells=function(e,t){for(var o=this._fixedCells,r=this._nextId++,n=e+1;n<e+t;n++)o[n]=r+Oo;return o[e]=r,r},i.prototype.addCells=function(e,t){for(var o=this._cells,r=this._nextId++,n=e+1;n<e+t;n++)o[n]=r+Oo;return o[e]=r,r},i.prototype.isMerged=function(e,t){return e<t?this._fixedCells[e]>Xo:this._cells[e-t]>Xo},i.prototype.isMergeRoot=function(e,t){return e<t?this._fixedCells[e]>Xo&&this._fixedCells[e]<Oo:(e-=t,this._cells[e]>Xo&&this._cells[e]<Oo)},i.prototype.isHidden=function(e,t){return e<t?this._fixedCells[e]>=Oo:this._cells[e-t]>=Oo},i.prototype.getMerged=function(e,t){var o=1;if(e<t)for(var r=(s=this._fixedCells)[e],n=e+1;n<s.length&&s[n]-Oo==r;n++,o++);else{e-=t;var s;for(r=(s=this._cells)[e],n=e+1;n<s.length&&s[n]-Oo==r;n++,o++);}return o},i.prototype.getMerged2=function(e,t,o,r){for(var n=this._cells,s=n[o],l=e.itemSource,u=l.getItem(t++),h=u.isData?r:1,d=o+1;d<n.length&&n[d]-Oo==s;d++)h+=(u=l.getItem(t++)).isData?r:1;return h},i.prototype.$_checkFixedMerge=function(e,t,o,r){if(r>0){var n=t.grid,s=n.displayOptions,l=t.mergeEdit&&n.editOptions.commitByCell||s.editItemMerging,u=o,h=this._flags[u],d=e.getItem(u);if(h<=0||ai(d.itemState)&&!l)return null;for(;u&&!(this._flags[u-1]<h||ai(e.getItem(u-1).itemState));)u--;for(var p=o+1;p<=r;){var f=ai(e.getItem(p).itemState);if(p==r||this._flags[p]>h||f&&!l)return p>u+1||f?Ni.createRange(u,t.layout,p-1,t.layout):null;p++}}return null},i.prototype.$_checkMerge=function(e,t,o,r,n){if(o>=0){var s=t.grid,l=s.displayOptions,u=t.mergeEdit&&s.editOptions.commitByCell&&s.isEditing()&&s.isItemEditing()||l.editItemMerging,h=o,d=this._flags[h],p=e.getItem(h);if(d<=0||ai(p.itemState)&&!u)return null;if(r)for(;h>n&&!(this._flags[h-1]<d||ai(e.getItem(h-1).itemState));)h--;for(var f=e.itemCount,g=o+1;g<f;){var m=ai(e.getItem(g).itemState);if(this._flags[g]>d||this._flags[g]<=0||m&&!u){if(g>h+1)return Ni.createRange(h,t.layout,g-1,t.layout);var b=t instanceof Oe?t.groupLevel:-1;return(p=e.getItem(h))instanceof yi&&p.collapsed||p instanceof ti&&p.parent.level==b&&(g==o+1||p.parent.collapsed)||(p instanceof yi||p instanceof ti)&&p.parent.level>b?Ni.createRange(h,t.layout,g-1,t.layout):null}g++}if(g>h)return g>h+1?Ni.createRange(h,t.layout,g-1,t.layout):(b=t instanceof Oe?t.groupLevel:-1,(p=e.getItem(h))instanceof yi&&p.collapsed||p instanceof ti&&p.parent.level==b&&(g==o+1||p.parent.collapsed)||(p instanceof yi||p instanceof ti)&&p.parent.level>b?Ni.createRange(h,t.layout,g-1,t.layout):null)}return null},i.MERGE_ROOMS="mergeRooms",i}(me),Hh=function(a){function i(e){var t=a.call(this,null)||this;return t._column=e,t}return w(i,a),i.prototype._doDispose=function(){this._column=null,this._template=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(e){e!=this.template&&(e?(this.template||(this._template=new il),this._template.template=e):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(e){e!==this._values&&(e?v.extendObj(e,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName=typeof e=="string"?e:null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var e=this.column.grid;return e&&e.addPopupMenu(this._popupMenuName,this._popupMenu,!0),e&&this._popupMenuName}return null},set:function(e){e!=null&&typeof e!="string"||(this._popupMenuName=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getValue=function(e){return this._values&&this._values[e]},i.prototype.setValue=function(e,t){this._values||(this._values={}),this._values[e]!=t&&(this._values[e]=t,this._changed())},i}(Ch),Gh=function(){function a(){}return a.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},a.prototype.assign=function(i){if(typeof i=="string")this.styleName=i;else if(i)for(var e=0,t=Object.keys(i);e<t.length;e++){var o=t[e];this[o]=v.deepCopy(i[o])}return this},a}(),Wh=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summaryIndex",{get:function(){var e=this.$_owner;return e?e.getIndex(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this.summaryIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!==this._valueCallback&&(this._valueCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expression",{get:function(){return this._expression},set:function(e){e&&(e=e.trim()),e!=this._expression&&(this._expression=e,this._exprNode=e?qi.Default.parse(e):void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!=this._styleCallback&&(this._styleCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(e){this._templateCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?ji.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?Lt.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?ho.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(e){e!=this._textFormat&&(this._textFormat=e,this._textFormatter=e?Yr.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prefix",{get:function(){return this._prefix},set:function(e){e!=this._prefix&&(this._prefix=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"suffix",{get:function(){return this._suffix},set:function(e){e!=this._suffix&&(this._suffix=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),i.prototype.evaluate=function(e,t){if(this._exprNode)return this._exprNode.evaluate(e)},i.prototype.realizeSummary=function(e,t){var o=this._template;return o?o.realizeSummary(this,e,t,this._templateCallback):void 0},i.prototype.realizeGroupSummary=function(e,t){var o=this._template;return o?o.realizeGroupSummary(this,e,t,this._templateCallback):void 0},i.prototype.doAssignSimple=function(e){return typeof e=="string"&&(this.expression=e,!0)},i.prototype._doChanged=function(){},i}(Hh),Uh=function(a){function i(e,t){var o=a.call(this)||this;return o._items=[],o._column=e,o._type=t,o._items.push(o.$_createSummary()),o}return w(i,a),i.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach(function(e){e.dispose()}),this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),i.prototype.get=function(e){return e>=0&&e<this.column.grid.getSummaryCount(this._type)&&!this._items[e]&&(this._items[e]=this.$_createSummary()),this._items[e]},i.prototype.getIndex=function(e){return this._items.indexOf(e)},i.prototype.assignFrom=function(e){var t=e&&e.items?v.makeArray(e.items,!0):v.makeArray(e,!0),o=this._items;if(v.isArray(t)){for(var r=Math.max(t.length,1),n=0;n<r;n++)o[n]||(o[n]=this.$_createSummary()),o[n].assignFrom(t[n]);this._items.length=r}},i}(me),Dg=function(a){function i(e){var t=a.call(this,e.column)||this;return t.$_owner=e,t}return w(i,a),i.prototype._doChanged=function(){this.column._headerSummaryChanged()},i}(Wh),Mg=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.$_createSummary=function(){return new Dg(this)},i}(Uh),zh=function(a){function i(e){var t=a.call(this,e)||this;return t._checkLocation=c.ColumnHeaderItemLocation.NONE,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(e){e!=this._itemOffset&&(this._itemOffset=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(e){e!=this._checkLocation&&(this._checkLocation=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){e!=this._tooltip&&(this._tooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){var e,t=this.column,o=v.language||navigator.language,r=o&&o.split("-")[0];if(this._lang&&(e=typeof this._lang=="string"?this._lang:this._lang[o]||this._lang[r]),!(e=e||this._text)&&t instanceof Oe){var n=t.getField();e=n?n.header||n.orgFieldName:t.fieldName}return e||(e=t.name),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){this._styleName!==e&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){e!=this._exportStyleName&&(this._exportStyleName=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(e){this._templateCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lang",{get:function(){return this._lang},set:function(e){this._lang=e},enumerable:!1,configurable:!0}),i.prototype.realizeTemplate=function(){var e=this._template;return e?e.realizeHeader(this,this.templateCallback,this.column.grid):void 0},i.prototype._doChanged=function(){this.column&&this.column._headerChanged()},i.prototype.doAssignSimple=function(e){return typeof e=="string"&&(this.text=e,!0)},i}(Hh),Lg=function(a){function i(e){var t=a.call(this,e.column)||this;return t.$_owner=e,t}return w(i,a),i.prototype._doChanged=function(){this.column._footerChanged()},i}(Wh),Yh=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.$_createSummary=function(){return new Lg(this)},i}(Uh),Fn=function(){function a(){}return a.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=this.button=this.buttonWidth=void 0,this},a.prototype.assign=function(i){if(typeof i=="string")this.styleName=i;else if(i)if(i instanceof Ro)for(var e=0,t=Object.keys(this);e<t.length;e++)(n=t[e])in i&&(this[n]=v.deepCopy(i[n]));else for(var o=0,r=Object.keys(i);o<r.length;o++){var n;(n=r[o]).toLowerCase()==="readonly"?this.readOnly=i[n]:this.hasOwnProperty(n)&&(this[n]=v.deepCopy(i[n]))}return this},a.prototype.toFormatter=function(i){var e;return i||(i={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0}),(e=this.textFormat)&&(i.textFormatter&&i.textFormatter.format==e||(i.textFormatter=Yr.getFormatter(e))),(e=this.numberFormat)&&(i.numberFormatter&&i.numberFormatter.format==e||(i.numberFormatter=ji.getFormatter(e))),(e=this.datetimeFormat)&&(i.datetimeWriter&&i.datetimeWriter.format==e||(i.datetimeWriter=Lt.getFormatter(e))),(e=this.booleanFormat)&&(i.booleanFormatter&&i.booleanFormatter.format==e||(i.booleanFormatter=ho.getFormatter(e))),(e=this.prefix)&&(i.prefix&&i.prefix==e||(i.prefix=e)),(e=this.suffix)&&(i.suffix&&i.suffix==e||(i.suffix=e)),i},a}(),Ro=function(a){function i(e){var t=a.call(this)||this;return t._visible=!0,t._resizable=!0,t._movable=!0,t._checked=!1,t._fillWidth=NaN,t._dirty=!1,t._index=-1,t._states={},t._header=new zh(t),t._footers=new Yh(t,"footer"),t._headerSummaries=new Mg(t,"summary"),t._groupFooters=new Yh(t,"groupFooter"),e&&t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(e){e!=this._name&&(this._name&&this.$_owner&&this.$_owner.exchangeNameMap(this,this.name,e),this._name=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return(this._width==null||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(e){if(e=Math.max(0,e),!isNaN(e)&&e!=this._width){var t=this._width;this._width=e,this._layoutChanged(),this._propChanged("width",this._width,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillWidth",{get:function(){return this._fillWidth},set:function(e){e=Math.max(0,e),isNaN(e)||e==this._fillWidth||(this._fillWidth=e,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(e){e!=this._checked&&(this._checked=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),i.prototype.setHeader=function(e){this._header.assignFrom(e)},Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(e){this._footers.assignFrom(e),this._changed()},Object.defineProperty(i.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),i.prototype.setFooter=function(e){this.setFooters(e)},Object.defineProperty(i.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),i.prototype.setHeaderSummaries=function(e){this._headerSummaries.assignFrom(e),this._changed()},Object.defineProperty(i.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),i.prototype.setHeaderSummary=function(e){this.setHeaderSummaries(e)},Object.defineProperty(i.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!1,configurable:!0}),i.prototype.setGroupFooters=function(e){this._groupFooters.assignFrom(e),this._changed()},Object.defineProperty(i.prototype,"groupFooter",{get:function(){return this._groupFooters.get(0)},enumerable:!1,configurable:!0}),i.prototype.setGroupFooter=function(e){this.setGroupFooters(e)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRoot",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),i.prototype.clean=function(){this._dirty=!1},i.prototype.isWritable=function(){return!1},i.prototype.stateFor=function(e){return this._states[e]},i.prototype.setState=function(e,t){this._states[e]=t},i.prototype.getFooter=function(e){return this._footers.get(e)},i.prototype.getHeaderSummary=function(e){return this._headerSummaries.get(e)},i.prototype.assignFrom=function(e){a.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},i.prototype.toString=function(){return this.displayText},i.prototype._prepareLayout=function(e,t){},i.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var e=this.grid;e&&e.invalidateColumn(this)}},i.prototype._propChanged=function(e,t,o){var r=this.grid;r&&r._fireColumnPropertyChanged(this,e,t,o)},i.prototype.$_setIndex=function(e){this._index=e},i.prototype._headerChanged=function(){this._changed()},i.prototype._headerSummaryChanged=function(){this._changed()},i.prototype._footerChanged=function(){this._changed()},i.prototype._resetIndices=function(e){},i.prototype.$_layoutIndexChanged=function(e,t){this._propChanged("displayIndex",t,e)},i.prototype.$_layoutWidthChanged=function(e,t){this._propChanged("displayWidth",t,e)},i}(me),Fi=function(a){function i(e){var t=a.call(this,e)||this;return t._blankWhenCopy=!1,t._blankWhenExport=!1,t._ignoreDefaultDynamicStyles=!1,t._textInputCase=c.TextInputCase.NORMAL,t._button=c.CellButton.NONE,t._buttonVisibility=c.ButtonVisibility.DEFAULT,t._editButtonVisibility=c.ButtonVisibility.DEFAULT,t._displayMinusZero=!0,t}return w(i,a),i.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!==this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?ji.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(e){this._displayMinusZero!=e&&(this._displayMinusZero=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!==this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?Lt.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!==this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?ho.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(e){e!==this._textFormat&&(this._textFormat=e,this._textFormatter=e?Yr.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prefix",{get:function(){return this._prefix},set:function(e){e!=this._prefix&&(this._prefix=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"suffix",{get:function(){return this._suffix},set:function(e){e!=this._suffix&&(this._suffix=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(e){e!=this._blankWhenCopy&&(this._blankWhenCopy=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(e){e!=this._blankWhenExport&&(this._blankWhenExport=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(e){e!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(e){e!=this._textInputCase&&(this._textInputCase=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){e!=this._exportStyleName&&(this._exportStyleName=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!=this._styleCallback&&(this._styleCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{get:function(){return this._renderer},set:function(e){this._renderer=e,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(e){this._editor=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"button",{get:function(){return this._button},set:function(e){e!=this._button&&(this._button=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonWidth",{get:function(){return this._buttonWidth},set:function(e){e!=this._buttonWidth&&(this._buttonWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(e){e!=this._buttonVisibility&&(this._buttonVisibility=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(e){this._buttonVisibleCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(e){e!=this._editButtonVisibility&&(this._editButtonVisibility=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName=typeof e=="string"?e:null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(e){e!=null&&typeof e!="string"||(this._popupMenuName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellStyle=function(e){return this._styleCallback&&this._styleCallback(this.grid.handler,e)},i.prototype.affix=function(e){return this._prefix&&(e=this._prefix+e),this._suffix&&(e+=this._suffix),e},i.prototype._prepareLayout=function(e,t){a.prototype._prepareLayout.call(this,e,t)},i}(Ro),Oe=function(a){function i(e){var t=a.call(this)||this;return t._fieldIndex=-1,t._readOnly=!1,t._valueSeparator=",",t._breakMergeOnEmpty=!1,t._equalBlank=!1,t._equalBlankText="",t._values=null,t._labels=null,t._lookupDisplay=!1,t._lookupSource=null,t._lookupKeyFields=null,t._lookupKeyFieldIds=null,t._mergeGrouped=!1,t._sortable=!0,t._sortOrder=-1,t._sortByLabel=!1,t._filterable=!0,t._filterIconVisible=!0,t._autoFilter=!1,t._filterSelectorWidth=0,t._lookupData=null,t._required=!1,t._requiredLevel=c.ValidationLevel.ERROR,t._validations=new Bh(!0),t._groupable=!0,t._dataIndex=-1,t._baseIndex=-1,t._valueType=c.ValueType.TEXT,t._groupLevel=-1,t._labelFieldIndex=-1,t._filters=new kn(t),t._filters.addListener(t),t._autoFilters=new kn(t),t._autoFilters.addListener(t),t._inlineFilters=new kn(t),t._inlineFilters.addListener(t),e&&t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(e){(e=Math.max(-1,e))!=this._fieldIndex&&(this._fieldIndex=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(e){e!=this._fieldName&&(this._fieldName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nanText",{get:function(){return this._nanText},set:function(e){e!=this._nanText&&(this._nanText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroText",{get:function(){return this._zeroText},set:function(e){e!=this._zeroText&&(this._zeroText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(e){this._defaultValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(e){e!=this._valueSeparator&&(this._valueSeparator=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(e){if(e!=this._mergeRule){this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?Vh.createRule(e):null;var t=this.grid;t&&this.layout&&t._columnMergeRuleChanged(this.layout)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){if(e!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=e;var t=this.grid;t&&this.layout&&t._columnMergeRuleChanged(this.layout)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(e){e!=this._equalBlank&&(this._equalBlank=e,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(e){e!=this._equalBlankExpression&&(this._equalBlankExpression=e,this._equalBlankNode=e?qi.Default.parse(e,null):void 0,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankText",{get:function(){return this._equalBlankText},set:function(e){e!=this._equalBlankText&&(this._equalBlankText=e,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankLine",{get:function(){return this._equalBlankLine},set:function(e){e!=this._equalBlankLine&&(this._equalBlankLine=e,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(e){e!=this._mergeEdit&&(this._mergeEdit=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(e){e!=this._excelFormat&&(this._excelFormat=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(e){e!=this._excelFormulaStatement&&(this._excelFormulaStatement=e,e?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=e:this._excelFormulaExprStatement=new ys(e):this._excelFormulaExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueType",{get:function(){return this._valueType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(e){e!=this._values&&(this._values=e?e.map(function(t,o){return t!=null?String(t):t}):[],this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(e){e!=this._labels&&(this._labels=e&&e.slice(),this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){this._lookupDisplay!=e&&(this._lookupDisplay=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(e){this._lookupSourceId!=e&&(this._lookupSourceId=e,this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(e){e!=this._lookupKeyFields&&(this._lookupKeyFields=v.makeArray(e,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelField",{get:function(){return this._labelField},set:function(e){this._labelField!=e&&(this._labelField=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(e){this._textOfInvalid!=e&&(this._textOfInvalid=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(e){e!==this._placeHolder&&(this._placeHolder=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(e){e!==this._placeHolderStyleName&&(this._placeHolderStyleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayCallback",{get:function(){return this._displayCallback},set:function(e){this._displayCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortable",{get:function(){return this._sortable},set:function(e){e!=this._sortable&&(this._sortable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(e){this._sortOrder=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(e){this._sortDirection=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(e){this._sortByLabel!==e&&(this._sortByLabel=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterable",{get:function(){return this._filterable},set:function(e){e!=this._filterable&&(this._filterable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterIconVisible",{get:function(){return this._filterIconVisible},set:function(e){this._filterIconVisible!=e&&(this._filterIconVisible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(e){e!==this._autoFilter&&(this._autoFilter=e,!e&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},set:function(e){e instanceof kn||this.setFilters(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilters",{get:function(){return this._autoFilters},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(e){e!==this._showInlineFilter&&(this._showInlineFilter=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterSelectorWidth",{get:function(){return this._filterSelectorWidth},set:function(e){this._filterSelectorWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(e){e!=this._required&&(this._required=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(e){e!=this._requiredMessage&&(this._requiredMessage=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(e){e!=this._requiredLevel&&(this._requiredLevel=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(e){this._validations.assignFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupable",{get:function(){return this._groupable},set:function(e){this._groupable!=e&&(this._groupable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(e){e!=this._objectKey&&(this._objectKey=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(e){this._objectCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupData",{get:function(){return this._lookupData},set:function(e){if(e!==this._lookupData){var t=void 0,o=void 0,r=void 0,n=void 0,s={};if(this._lookupData=v.deepCopy(e),e){v.isArray(e)?s.list=e:s=e,this._labels=[],this._values=[],this._lookupMap=null,this._listItem=[],t=s.hasOwnProperty("value")?s.value:"value",o=s.hasOwnProperty("label")?s.label:"label";for(var l=0,u=s.list.length;l<u;l++)(n=(r=s.list[l])[t]!=null?r[t]:r.code)!=null&&this._values.push(r[t]!=null?r[t]:r.code),n!=null&&this._labels.push(r[o]!=null?r[o]:r.text!=null?r.text:n),this._listItem.push(r)}else this._labels=null,this._values=null,this._lookupMap=null,this._listItem=null;this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listItem",{get:function(){return this._listItem},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(e){this._cellProtectProps=e},enumerable:!1,configurable:!0}),i.prototype.getField=function(){var e=this._dataIndex;if(e>=0){var t=this.grid.dataSource;if(t)return t.getField(e)}return null},i.prototype.getLookupLabel=function(e){if(!this._lookupMap){var t=this._values,o=this._labels;if(t&&t.length>0){this._lookupMap={};for(var r=0;r<t.length;r++)o&&o.length>r?this._lookupMap[t[r]]=o[r]:this._lookupMap[t[r]]=t[r]}}var n;if(typeof e=="string"&&e&&this._valueSeparator){for(var s=e.split(this._valueSeparator),l=[],u=(r=0,s.length);r<u;r++)l.push(this._lookupMap&&this._lookupMap[s[r]]?this._lookupMap[s[r]]:s[r]);if(l.length<=0)return"";n=l.join(this._valueSeparator)}else n=this._lookupMap?this._lookupMap[e]:void 0;return n||(this.textOfInvalid!=null?this.textOfInvalid:e)},i.prototype.getLookupIndex=function(e){if(this._values&&this._values.length>0){for(var t=0,o=this._values.length;t<o;t++)if(this._values[t]==e)return t}return-1},i.prototype.getLookupIndices=function(e){var t=[];if(e&&this._values&&this._values.length>0)for(var o=v.isArray(e)?e:String(e).split(this._valueSeparator),r=0,n=o.length;r<n;r++)this._values.indexOf(o[r])>=0&&t.push(this._values.indexOf(o[r]));return t},i.prototype.getLookupValue=function(e){if(this._values&&this._values.length>0)return this._values[e]},i.prototype.getLookupValues=function(e){var t=[];if(this._values&&this._values.length>0)for(var o=0,r=e.length;o<r;o++)e[o]>=0&&e[o]<this._values.length&&t.push(this._values[e[o]]);return t},i.prototype.getSourceValue=function(e){var t=this._values,o=this._labels;if(o&&t){var r=o.indexOf(e);if(r>=0&&t.length>r||(r=t.indexOf(e))>=0)return t[r]}},i.prototype.getSourceValues=function(e){var t=this._values,o=this._labels;if(o&&t){for(var r=void 0,n=[],s=this._valueSeparator,l=0,u=(e=v.isArray(e)?e:s&&e?String(e).split(s):v.makeArray(e)).length;l<u;l++)(r=o.indexOf(e[l]))>=0&&t.length>r?n.push(t[r]):n.push(e[l]);if(n.length>0&&s)return n.join(s);if(n.length>0)return n.join()}},Object.defineProperty(i.prototype,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters},enumerable:!1,configurable:!0}),i.prototype.clearFilters=function(){this.setFilters(null)},i.prototype.addFilters=function(e,t){if(e){var o=this.grid;o&&!o.canFiltering()||this._filters.addAll(v.makeArray(e),t)}},i.prototype.removeFilters=function(e){if(e){var t=this.grid;t&&!t.canFiltering()||this._filters.removeItems(v.makeArray(e))}},i.prototype.activateFilters=function(e,t){if(e){var o=this.grid;o&&!o.canFiltering()||this.$_filters.activateItems(v.makeArray(e),t)}},i.prototype.activateAllFilters=function(e,t){t===void 0&&(t=!0);var o=this.grid;o&&!o.canFiltering()||this.$_filters.activateAll(e,t)},i.prototype.hideColumnFilters=function(e,t){this.$_filters.hideFilters(v.makeArray(e),t)},i.prototype.hideAllColumnFilters=function(e){this.$_filters.hideAllFilters(e)},i.prototype.toggleFilters=function(e){if(e){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleItems(v.makeArray(e))}},i.prototype.toggleAllFilters=function(){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleAll()},i.prototype.getFilter=function(e){var t=this.$_filters,o=t.indexOf(e);return t.getItem(o)},i.prototype.getActiveFilters=function(e){return this.$_filters.getActiveItems(e)},Object.defineProperty(i.prototype,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(){return this.$_filters.activeCount>0||this._inlineFilters.activeCount>0},i.prototype.setFilters=function(e){var t=this.grid;t&&!t.canFiltering()||this._filters.assignFrom(e)},i.prototype.autoFilterRefresh=function(e){var t=this.grid,o=t==null?void 0:t.dataSource;if(t&&o&&this._autoFilter){var r=t.filterSelector._manager;r&&r.buildItems(this,o,!0,e)}},i.prototype.setInlineFilter=function(e,t){var o=this._inlineFilters,r=o.getItem(0);r||(o.add({name:"inlineFilter"},!1),r=o.getItem(0)),r.criteria!=e&&(e===void 0?(r.criteria=void 0,t?r.active=!1:r._active=!1):(r._active=!1,r.criteria=e,r.active=!!r.criteria))},i.prototype.onColumnFilterChanged=function(e,t){var o=this.grid;o&&o.columnFilterChanged(e,t)},i.prototype._prepareLayout=function(e,t){a.prototype._prepareLayout.call(this,e,t)},i.prototype._resetIndices=function(e){this._dataIndex=-1,this._baseIndex=-1;var t=e.dataSource;t&&(this._fieldName?this._dataIndex=t.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=t.getBaseField(this._dataIndex),this._valueType=t.getValueType(this._dataIndex)),this._labelFieldIndex=t.getFieldIndex(this._labelField),this.$_resetLookup(e))},i.prototype.isWritable=function(){var e=this.grid.editOptions;return(e.columnEditableFirst?this._editable!=null?this._editable:e.editable:e.editable&&this._editable!==!1)&&!this._readOnly},i.prototype.assignFrom=function(e){a.prototype.assignFrom.call(this,e)},i.prototype.$_setMergeGrouped=function(e){this._mergeGrouped=e},i.prototype.$_setGroupLevel=function(e){this._groupLevel=e},i.prototype.$_resetLookup=function(e){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var t=this._lookupKeyFields.length,o=this._lookupKeyFieldIds=new Array(t),r=0;r<t;r++)o[r]=e.dataSource.getFieldIndex(this._lookupKeyFields[r]);this._lookupSource=e.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},i.prototype._changed=function(){a.prototype._changed.call(this)},i.CAPITAL_INDEXERS=["value","values"],i}(Fi),Ji=function(a){function i(e){var t=a.call(this)||this;return t._fieldArray=t._fieldArray||[],t._fields=t._fields||[],e&&t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(e){e!=this._fieldNames&&(this._fieldNames=e,this._fieldArray=e?e.split(","):[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),i.prototype._resetIndices=function(e){this._fields=[];var t=e.dataSource;if(t)for(var o=0,r=this._fieldArray.length;o<r;o++){var n=this._fieldArray[o],s=n.split("..");if(s.length>1){var l=t.getFieldIndex(s[0]),u=t.getFieldIndex(s[1]);if(l>=0&&u>=0)for(var h=Math.min(l,u),d=Math.max(l,u),p=h;p<=d;p++)this._fields.push(p)}else(p=t.getFieldIndex(n))>=0&&this._fields.push(p)}},i}(Fi),Fg=function(){function a(){this._layouts={}}return a.prototype._doDispose=function(){this._layouts=null},a.prototype.find=function(i){return this._layouts[i]},a.prototype.clear=function(){this._layouts={}},a.prototype.load=function(i){if(i=v.makeArray(i),this._layouts={},i)for(var e=0,t=i.length;e<t;e++){var o=i[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},a}();c.CellLayoutType=void 0,(Za=c.CellLayoutType||(c.CellLayoutType={})).GROUP="group",Za.COLUMN="column",Za.PROXY="proxy";var qh,gt=function(a){function i(){var e=a.call(this)||this;return e._visible=!0,e._width=NaN,e._fillWidth=NaN,e._index=-1,e._vindex=-1,e._row=0,e._col=0,e._hrow=0,e._hcol=0,e._cspan=1,e._hspan=1,e._dspan=1,e._clen=1,e._hlen=1,e._dlen=1,e._cellWidth=0,e._fitWidth=NaN,e._defColSpan=1,e._header=e._createHeader(),e._header&&(e._header._layout=e),e}return w(i,a),i.compareLoc=function(e,t){if(e==null||t==null)return 0;if(e==null)return-1;if(t==null)return 1;var o=e.root.vindex,r=t.root.vindex;return o==r&&(e.group===t.group?(o=e.vindex,r=t.vindex):(o=e.dataRoot.vindex,r=t.dataRoot.vindex)),o-r},i.getSource=function(e){return e instanceof go?e.source:e},i.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){if(this.$_grid)return this.$_grid;var e=this.root;return e&&e._parent.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._changed(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(e){return this._visible},Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"owner",{get:function(){return this._parent&&this._parent.owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._parent instanceof hl?null:this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){if(!this._root)for(var e=this;e;){if(e._parent instanceof hl)return this._root=e;e=e._parent}return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRoot",{get:function(){if(!this._dataRoot){var e=this.group;if(e)do this._dataRoot=e,e=e.group;while(e);else this._dataRoot=this}return this._dataRoot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this._vindex},set:function(e){var t=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,e),this._vindex!=t){this._propChanged("displayIndex",this._vindex,t);var o=this.firstColumn;o&&this instanceof We&&o.$_layoutIndexChanged(t,this._vindex)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._row},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hrow",{get:function(){return this._hrow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hcol",{get:function(){return this._hcol},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(e){e=Math.max(0,e),this.grid&&(e=Math.max(e,this.grid.displayOptions.minCellWidth)),e!=this._width&&(this._width=e,this._parent&&this._parent._childWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(e){(e=Math.max(0,e))!=this._fillWidth&&(this._fillWidth=e,this._parent&&this._parent._childFillWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupShowMode",{get:function(){return this._groupShowMode},set:function(e){e!=this._groupShowMode&&(this._groupShowMode=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domWidth",{get:function(){if(this.grid&&this.grid.layoutManager.isColumnFitted){var e=this.grid,t=e.layoutManager,o=e.fixedOptions.colCount,r=t.cellCount,n=this.$_fixed?t._fixedCellPoints:this.$_rfixed?t._rightCellPoints:this.grid.layoutManager._cellPoints,s=this.$_fixed?this._col:this.$_rfixed?this._col-(r-o):this._col-o;return n[s+(this instanceof it?this._clen:this._defColSpan)]-n[s]}return this.cellWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"distance",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cspan",{get:function(){return this._cspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hspan",{get:function(){return this._hspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hlen",{get:function(){return this._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed},enumerable:!1,configurable:!0}),i.prototype.load=function(e){typeof e!="string"&&(e.width!==void 0&&(this.width=e.width),e.header!==void 0&&this._header.assignFrom(e.header),e.fillWidth!==void 0&&(this.fillWidth=e.fillWidth),this.groupShowMode=v.valueIn(e.groupShowMode,c.GroupShowMode)?e.groupShowMode:c.GroupShowMode.ALWAYS,e.visible!==void 0&&(this.visible=e.visible))},i.prototype.isColumn=function(e){return!1},i.prototype.cleanColumns=function(){},i.prototype.findLayout=function(e){return null},i.prototype.getHeaderSpan=function(){return 1},i.prototype.getSummarySpan=function(e){return 1},i.prototype.getFooterSpan=function(e){return 1},i.prototype.getDataSpan=function(){return 1},i.prototype.getGroupFooterSpan=function(e,t){return 1},i.prototype.getDataColumn=function(){return null},i.prototype.getFooterUserSpan=function(e){return null},i.prototype.getSummaryUserSpan=function(e){return null},i.prototype._createHeader=function(){return null},i.prototype._headerChanged=function(){this._changed()},i.prototype._prepareLayout=function(e,t,o){this.$_grid=e,this.$_fixed=t,this.$_rfixed=o,this._merged=!1},i.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},i.prototype._getWidth=function(e){return e},i.prototype._getFillWidth=function(e){return e},i.prototype.changeCellWidth=function(e,t,o){var r=this.owner,n=r&&r.grid,s=n&&n._loading,l=o?this.cellWidth:this.domWidth,u=this.domWidth,h=this.grid.displayOptions.minCellWidth;if(isNaN(l)&&s&&o)this.width=e;else{var d=e-l;if(t&&!o&&(d*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),d=Math.round(d))if(this.grid._columnsDirty&&this.owner.$_refresh(this.grid._columns,h),r&&r.isShowing(this)){if(r){var p=this._col,f=void 0;f=this instanceof it?this._clen:this._defColSpan,r.$_changeCellWidths(p,f,d,h);var g=r._cellWidths;if(g&&g.length)for(var m=r._dataCells,b=0;b<m.length;b++)for(var C=m[b],x=0;x<f;x++)C[p+x]._cellWidth=g[p+x];r.$_calcGroupWidths()}setTimeout((function(){if(this.domWidth!=u){var E=this.firstColumn;this._propChanged("displayWidth",this.domWidth,u),E&&this instanceof We&&E.$_layoutWidthChanged(u,this.domWidth)}}).bind(this),50)}else{if(this instanceof it||this._defColSpan>1)return;this._cellWidth=e}}},i.prototype._setFitWidth=function(e){this._fitWidth=e},i.prototype._clearFitWidth=function(){this._fitWidth=NaN},i.prototype._changed=function(){this._parent&&this._parent._changed()},i.prototype.$_setMerged=function(e){this._merged=e},i.prototype._propChanged=function(e,t,o){var r=this.grid;r&&r._fireLayoutPropertyChanged(this,e,t,o)},i}(me),go=function(a){function i(e,t){var o=a.call(this)||this;return o._type=c.CellLayoutType.PROXY,o._source=e,o._index=t,o}return w(i,a),Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._source.visible},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(e){return this._source.$_isVisible(e)},Object.defineProperty(i.prototype,"cols",{get:function(){return this._source.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._source.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._source.root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._source.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){return this._source.lastColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!1,configurable:!0}),i.prototype.load=function(e){},i.prototype._isResizable=function(){return!1},i.prototype._isMovable=function(){return!1},i.prototype.clearMergeGrouped=function(){},i}(gt),We=function(a){function i(e){var t=a.call(this)||this;return t._cellSpan=1,t._cellWidths=[],t._cols=1,t._rows=1,t._blanked=!1,t._type=c.CellLayoutType.COLUMN,t._column=e,t._columnObj=e instanceof Fi?e:null,t}return w(i,a),i.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellWidth",{get:function(){if(this.owner.isShowing(this)){var e=this.owner.getCellWidths(this._col,this._defColSpan);return isNaN(e)&&(e=this.width),e||this._cellWidth}return this._cellWidths&&this._cellWidths.reduce(function(t,o){return t+o},0)||this._cellWidth},set:function(e){if(!this.owner._loading){var t=!!this.grid&&this.grid.layoutManager.isColumnFitted;e=Math.max(this.grid.displayOptions.minCellWidth,e),this.changeCellWidth(e,t,!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(e){if(e!==this._mergeRule){this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?Vh.createRule(e):e===void 0?void 0:null;var t=this.grid;t&&t._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){if(e!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=e;var t=this.grid;t&&t._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),i.prototype.isBreakMergeOnEmpty=function(){return this._breakMergeOnEmpty===void 0?this._columnObj instanceof Oe&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(e){e!==this._equalBlank&&(this._equalBlank=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankNode",{get:function(){return this._blankNodeRun},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blanked",{get:function(){return this._blanked},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(e){e!==this._equalBlankExpression&&(this._equalBlankExpression=e,this._equalBlankNode=e?qi.Default.parse(e,null):e===void 0?void 0:null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellSpan",{get:function(){return this._cellSpan},set:function(e){(e=Math.max(1,e))!=this._cellSpan&&(this._cellSpan=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSpan",{get:function(){return this._headerSpan},set:function(e){e!=this._headerSpan&&(e!==void 0&&(e=Math.max(1,e)),this._headerSpan=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(e){this._summarySpans=this._summarySpans||[],e!=this._summarySpans[0]&&(e!==void 0&&(e=Math.max(1,e)),this._summarySpans[0]=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(e){e!==this._summarySpans&&(this._summarySpans=e&&e.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(e){this._footerSpans=this._footerSpans||[],e!=this._footerSpans[0]&&(e!==void 0&&(e=Math.max(1,e)),this._footerSpans[0]=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(e){e!==this._footerSpans&&(this._footerSpans=e&&e.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSpan",{get:function(){return this._dataSpan},set:function(e){e!=this._dataSpan&&(e!==void 0&&(e=Math.max(1,e)),this._dataSpan=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(e){this._groupFooterSpans=this._groupFooterSpans||[],e!=this._groupFooterSpans[0]&&(e!==void 0&&(e=Math.max(1,e)),this._groupFooterSpans[0]=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(e){e!==this._groupFooterSpans&&(this._groupFooterSpans=e&&e.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanCallback",{get:function(){return this._spanCallback},set:function(e){e!=this._spanCallback&&(this._spanCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(e){e!=this._summarySpanCallback&&(this._summarySpanCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(e){e!=this._footerSpanCallback&&(this._footerSpanCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(e){e!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(e){this._footerUserSpans=v.makeArray(e,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(e){this._summaryUserSpans=v.makeArray(e,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(e){this._groupFooterUserSpans=v.makeArray(e,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(e){e!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.canMerge=function(){if(this._mergeRuleObj!=null)return!0;if(this._columnObj instanceof Oe){if(this._columnObj.mergeGrouped)return!0;if(this._mergeRuleObj===void 0)return this._columnObj._mergeRuleObj!=null}},Object.defineProperty(i.prototype,"isNull",{get:function(){return!this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},set:function(e){this._rows=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var e=this.parent.visibles,t=e.indexOf(this);t-- >0;){var o=e[t];if(o instanceof i&&o.lastColumn)return o.lastColumn}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()},enumerable:!1,configurable:!0}),i.prototype.getHeaderSpan=function(){return this._headerSpan===void 0?this._cellSpan:this._headerSpan},i.prototype.getSummarySpan=function(e){var t,o=this._summarySpanCallback,r=this._summarySpans;return o?(t=o(this.grid.handler,this,e))===void 0&&r&&r.length>e&&(t=r[e]):r&&r.length>e&&(t=r[e]),t===void 0?this._cellSpan:t},i.prototype.getFooterSpan=function(e){var t,o=this._footerSpanCallback,r=this._footerSpans;return o?(t=o(this.grid.handler,this,e))===void 0&&r&&r.length>e&&(t=r[e]):r&&r.length>e&&(t=r[e]),t===void 0?this._cellSpan:t},i.prototype.getFooterUserSpan=function(e){return this._footerUserSpans&&this._footerUserSpans[e]},i.prototype.getSummaryUserSpan=function(e){return this._summaryUserSpans&&this._summaryUserSpans[e]},i.prototype.getGroupFooterUserSpan=function(e,t){var o,r=this._groupFooterUserSpanCallback;return r&&(o=r(this.grid.handler,this,e,e.index,t)),o||this._groupFooterUserSpans&&this._groupFooterUserSpans[t]},i.prototype.getGroupFooterSpan=function(e,t){var o,r=this._groupFooterSpanCallback,n=this._groupFooterSpans;return r?(o=r(this.grid.handler,this,e,t))===void 0&&n&&n.length>t&&(o=n[t]):n&&n.length>t&&(o=n[t]),o===void 0?this._cellSpan:o},i.prototype.getDataSpan=function(){return this._dataSpan===void 0?this._cellSpan:this._dataSpan},i.prototype.getDataColumn=function(){return this._columnObj},i.prototype._createHeader=function(){return new Jh(this)},i.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},i.prototype._isMovable=function(){for(var e=!0,t=this.parent;t;)e=e&&t.childColumnMovable,t=t.parent;return e&&(!this._columnObj||this._columnObj.movable)},i.prototype.isColumn=function(e){return this._columnObj===e},i.prototype.findLayout=function(e){return e&&this._columnObj===e?this:null},i.prototype.load=function(e){if(this.assignFrom(e),a.prototype.load.call(this,e),!this._columnObj&&typeof this._column=="string"){var t=this.owner&&this.owner.grid;this._columnObj=t?t.columnByName(this._column):null}},i.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},i.prototype.$_isVisible=function(e){return e?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},i.prototype._getWidth=function(e){return isNaN(e)?this._columnObj?this._columnObj.width:NaN:e},i.prototype._getFillWidth=function(e){return isNaN(e)?this._columnObj?this._columnObj.fillWidth:NaN:e},i.prototype._prepareLayout=function(e,t,o){if(a.prototype._prepareLayout.call(this,e,t,o),this._columnObj){this._columnObj._prepareLayout(e,this);var r=this.parent.direction===c.ColumnLayoutDirection.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=r===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||this._blankNodeRun!=null,this._blanked||(this._equalBlankNode===void 0&&(this._blanked=(this._blankNodeRun=this._columnObj._equalBlankNode)!=null),this._blanked||this._equalBlank!==void 0||(this._blanked=this._columnObj._equalBlank)))}},i.prototype.toString=function(){return typeof this._column=="string"?this._column:a.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){this.firstColumn instanceof Oe&&this.firstColumn.$_setMergeGrouped(!1)},i.prototype.$_bindColumn=function(e,t,o){if(o===void 0&&(o=!1),this._columnObj||(this._columnObj=t.columnByName(this._column)),this._columnObj){var r=this._columnObj.$_hash;if(e[r])throw new Error("Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText));o||(this._columnObj._layout=this),!o&&(this._columnObj._layout=this),e[r]=this}},i.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:this._mergeRuleObj===void 0&&this._columnObj instanceof Oe?this._columnObj._mergeRuleObj:null},i}(gt);c.ColumnLayoutDirection=void 0,(qh=c.ColumnLayoutDirection||(c.ColumnLayoutDirection={})).VERTICAL="vertical",qh.HORIZONTAL="horizontal";var Kh,Xh,Jh=function(a){function i(e){var t=a.call(this)||this;return t._layout=e,t}return w(i,a),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(e){this.layout.firstColumn.header.styleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(e){this.layout.firstColumn.header.exportStyleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return 1},enumerable:!1,configurable:!0}),i.prototype.isVisible=function(){return!0},i.prototype.getDisplayText=function(){return this._text},i.prototype.doAssignSimple=function(e){return typeof e=="string"&&(this.text=e,!0)},i.prototype._changed=function(){this._layout&&this._layout._headerChanged()},i}(me),Ng=function(a){function i(e){var t=a.call(this,e)||this;return t._visible=!0,t._showTooltip=void 0,t}return w(i,a),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(e){e!=this.template&&(e?(this.template||(this._template=new il),this._template.template=e):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(e){e!==this._values&&(e?v.extendObj(e,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!==this._showTooltip&&(this._showTooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){e!==this._tooltip&&(this._tooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!==this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(e){e!==this._rows&&(this._rows=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(e){this._templateCallback=e,this._changed()},enumerable:!1,configurable:!0}),i.prototype.realizeTemplate=function(){var e=this._template;return e?e.realizeHeader(this,null,this._layout.grid):void 0},i.prototype.getValue=function(e){return this._values&&this._values[e]},i.prototype.doAssignSimple=function(e){return!a.prototype.doAssignSimple.call(this,e)&&typeof e=="boolean"&&(this.visible=e,!0)},i.prototype.isVisible=function(){return this._visible},i.prototype.getDisplayText=function(){return this.text||this.layout.name},Object.defineProperty(i.prototype,"displayText",{get:function(){return this.getDisplayText()},enumerable:!1,configurable:!0}),i}(Jh),it=function(a){function i(e,t){var o=a.call(this)||this;return o._direction=c.ColumnLayoutDirection.HORIZONTAL,o._items=[],o._resizable=!0,o._movable=!0,o._hideChildHeaders=!1,o._childColumnMovable=!0,o._visibles=[],o._cols=0,o._rows=0,o._headerRows=0,o._expandedLayouts=[],o._collapsedLayouts=[],o._type=c.CellLayoutType.GROUP,o._name=e,o._direction=t==c.ColumnLayoutDirection.VERTICAL?c.ColumnLayoutDirection.VERTICAL:c.ColumnLayoutDirection.HORIZONTAL,o}return w(i,a),i.getNext=function(e){var t=e&&e.parent;return t?((e=t.nextOf(e))||(e=i.getNext(t)),e):null},i.getPrev=function(e){var t=e&&e.parent;return t?((e=t.prevOf(e))||(e=i.getPrev(t)),e):null},i.isTop=function(e){for(var t=e&&e.parent;t;){if(t.vertical&&t.visibleCount>1&&e.vindex>0)return!1;t=(e=t).parent}return!0},i.isBottom=function(e){for(var t=e&&e.parent;t;){if(t.vertical&&t.visibleCount>1&&e.vindex<t.visibleCount-1)return!1;t=(e=t).parent}return!0},i.isLeft=function(e){for(var t=e&&e.parent;t;){if(!t.vertical&&t.visibleCount>1&&e.vindex>0)return!1;t=(e=t).parent}return!0},i.isRight=function(e){return i.isBottom(e)},i.prototype._doDispose=function(){this._items.forEach(function(e){e&&e.dispose()}),this._visibles=this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){e!=c.ColumnLayoutDirection.VERTICAL&&(e=c.ColumnLayoutDirection.HORIZONTAL),e!=this._direction&&(this._direction=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._direction==c.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{get:function(){return this._direction!=c.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(e){this._resizable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(e){this._movable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(e){e!=this._hideChildHeaders&&(this._hideChildHeaders=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(e){this._childColumnMovable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(e){this._items=e?e.slice():[];for(var t=0,o=this._items;t<o.length;t++)o[t]._parent=this;this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibles",{get:function(){return this._visibles.slice()},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(e){return this.visible&&this._visibles.length>0},Object.defineProperty(i.prototype,"expandable",{get:function(){return this._expandable},set:function(e){e!=this._expandable&&(this._expandable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(e){e!=this._expanded&&this.owner.expandLayout(this,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tiedColumn",{get:function(){if(this._tiedColumn instanceof Oe)return this._tiedColumn},set:function(e){this._tiedColumn=typeof e=="string"?this.grid.columnByName(e):e instanceof Oe?e:null,this._changed()},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(e){for(var t=0;t<this._items.length;t++)if(this._items[t]===e)return t;return-1},i.prototype.getItem=function(e){return this._items[e]},i.prototype.getVisible=function(e){return this._visibles[e]},i.prototype.addLayout=function(e,t){if(!this.owner.isDefault()){var o,r,n,s=this.grid,l=this.owner;if(s&&s._checkEditing(),typeof e=="string"?n=l.layoutByName(e):e instanceof Fi?n=l.layoutByColumn(e):e&&typeof e.column=="string"&&(n=l.layoutByName(e.column)),n)throw new Error("addLayout fail - Column or Group is already contained in layouts: "+n.firstColumn.name);if(typeof e=="string"||e instanceof Fi)o=typeof e=="string"&&u(s,e),r=new We(e);else if(e){if(typeof e.column=="string")o=u(s,e.column),r=new We(e.column);else if((e.type===c.CellLayoutType.GROUP||e.items)&&e.name){if(l.layoutByName(e.name))throw new Error("addLayout fail - group is already contained in layouts: "+e.name);r=new i(e.name,e.direction)}}return r?(typeof e=="object"&&r.load(e),this.addItem(r,t),(r instanceof We&&o||r instanceof i&&r._items.length)&&this.owner._root&&this.owner._root.resetColumns(s._columns),r):void 0}function u(h,d){var p=h.columnByName(d);if(!p)throw new Error("not exists column ".concat(d));return p}},i.prototype.removeLayout=function(e){if(!this.owner.isDefault()){var t=this.grid;t&&t._checkEditing(),typeof e=="string"?e=this.layoutByName(e):e instanceof Fi&&(e=e.layout),e instanceof gt&&e.parent.removeItem(e,!0)}},i.prototype.addItem=function(e,t){t===void 0&&(t=this._items.length),e!=null&&t>=0&&t<=this._items.length&&(this._items.splice(t,0,e),e._parent=this,this._changed())},i.prototype.clear=function(e){e===void 0&&(e=!0);for(var t=0,o=this._items;t<o.length;t++){var r=o[t];e&&r instanceof i&&r.clear(),r._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},i.prototype.removeItem=function(e,t){var o=this.indexOf(e);if(o>=0){if(e instanceof We&&e.cellSpan>1)for(var r=e.cellSpan-1;r--;){var n=this._items.splice(o+r,1)[0];n&&(n._detach(),t&&n.dispose())}this._items.splice(o,1),e._detach(),t&&e.dispose(),this._changed()}},i.prototype.layoutByName=function(e){if(e)for(var t=0,o=this._items;t<o.length;t++){var r=o[t];if(r instanceof We&&r.firstColumn.name===e)return r;if(r instanceof i){if(r.name===e)return r;var n=r.layoutByName(e);if(n)return n}}return null},i.prototype.nextOf=function(e){try{var t=this.$_checkVisible(e);if(t<this.visibleCount-1)return e=Ag(this,t+1)}catch{v.log("nextOf fail")}return null},i.prototype.prevOf=function(e){try{var t=this.$_checkVisible(e);if(t>0)return e=Bg(this,t-1)}catch{v.log("prevOf fail")}return null},i.prototype.isExpandable=function(){return this.expandable&&this._expandedLayouts.length>0&&this._collapsedLayouts.length>0},i.prototype.expandAll=function(e,t){this.expandable&&(this.expanded=e),this._items.forEach(function(o){o instanceof i&&o.expandAll(e,t)})},i.prototype._clearFitWidth=function(){a.prototype._clearFitWidth.call(this);for(var e=0,t=this._visibles;e<t.length;e++)t[e]._clearFitWidth()},Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(e){var t=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(e,t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var e=this._visibles?this._visibles.length:0;return e>0?this._visibles[e-1].last:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){for(var e=this._visibles?this._visibles.length-1:-1;e>=0;e--){var t=this._visibles[e].lastColumn;if(t)return t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._name},enumerable:!1,configurable:!0}),i.prototype._createHeader=function(){return new Ng(this)},i.prototype.load=function(e){this.clear(),e.hideChildHeaders!==void 0&&(this.hideChildHeaders=e.hideChildHeaders),this.expandable=e.expandable,this._expanded=e.expanded==null||e.expanded,e.resizable!==void 0&&(this.resizable=e.resizable),e.childColumnMovable!==void 0&&(this.childColumnMovable=e.childColumnMovable),e.movable!==void 0&&(this.movable=e.movable),e.tiedColumn&&(this.tiedColumn=e.tiedColumn),e.rows==null||isNaN(e.rows)||(this._rows=e.rows),e.items&&this._loadItems(e.items),a.prototype.load.call(this,e)},i.prototype.findLayout=function(e){for(var t=0,o=this._items;t<o.length;t++){var r=o[t].findLayout(e);if(r)return r}return null},i.prototype.cleanColumns=function(){for(var e=0,t=this.items.length;e<t;e++)this.getItem(e).cleanColumns()},i.prototype._isResizable=function(){return this._resizable},i.prototype._isMovable=function(){for(var e=this._movable,t=this.parent;t;)e=e&&t.childColumnMovable,t=t.parent;return e},i.prototype._setFitWidth=function(e){if(a.prototype._setFitWidth.call(this,e),this.vertical)for(var t=0,o=this._visibles;t<o.length;t++)if((d=o[t])instanceof We){var r=d._cellWidth/this.cellWidth*e;d._setFitWidth(r)}else d._setFitWidth(e);else{for(var n=0,s=0,l=this._visibles;s<l.length;s++)n+=(d=l[s])._cellWidth;for(var u=0,h=this._visibles;u<h.length;u++){var d;r=(d=h[u])._cellWidth/n*e,d._setFitWidth(r)}}},i.prototype._prepareLayout=function(e,t,o){a.prototype._prepareLayout.call(this,e,t,o);for(var r=0,n=this._visibles;r<n.length;r++)n[r]._prepareLayout(e,t,o)},i.prototype.toString=function(){return this._name||a.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){for(var e=0,t=this.items.length;e<t;e++)this.getItem(e).clearMergeGrouped()},i.prototype._loadItems=function(e){for(var t,o=0,r=0,n=e;r<n.length;r++){var s=n[r],l=void 0;o++,typeof s=="string"?t=l=new We(s):typeof s=="number"?(l=new go(t,o))._width=s:s&&(s.type===c.CellLayoutType.GROUP||s.items?l=new i(s.name,s.direction):typeof s.column=="string"?t=l=new We(s.column):s instanceof Fi&&(t=l=new We(s))),l&&(l._parent=this,l.load(s),this._items.push(l))}},i.prototype.$_bindColumns=function(e,t,o){for(var r=0,n=this._items;r<n.length;r++){var s=n[r];s._root=null,s instanceof i?s.$_bindColumns(e,t,o):!s.isProxy&&s.$_bindColumn(e,t,o)}},i.prototype.$_parseExpandLayouts=function(e){var t=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach(function(o,r){if(!o.isProxy){switch(o.groupShowMode){case c.GroupShowMode.EXPAND:t._expandedLayouts.push(o);break;case c.GroupShowMode.COLLAPSE:t._collapsedLayouts.push(o);break;default:t._expandedLayouts.push(o),t._collapsedLayouts.push(o)}o instanceof i&&o.$_parseExpandLayouts(e)}})},i.prototype.$_parseHeaderCells=function(e,t,o){var r=this._direction===c.ColumnLayoutDirection.HORIZONTAL,n=0,s=this._header.isVisible()?this._header.rows:0;if(s&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var l=0,u=this._visibles;l<u.length;l++){var h=u[l],d=!h.isProxy&&h.header.isVisible()?h.header.rows:h.isProxy&&!r?1:0;if(h._hrow=t,h._hcol=o,h._hspan=d,h._hlen=d,h instanceof i)if(d>0&&(e[t][o]=h),h.$_parseHeaderCells(e,t+d,o),d>0){for(var p=0;p<d;p++)for(var f=p===0?1:0;f<h.cols;f++)e[t+p][o+f]=new go(h,f);r?o+=h.cols:t+=h.headerRows}else r?o+=h.cols:t+=h.headerRows;else if(e[t][o]=h,r){for(p=1;p<this.headerRows-s;p++)e[t+p][o]=new go(h,p),h._hspan++;h._hlen=h._hspan,o+=h.cols}else{for(p=1;p<this.cols;p++)e[t][o+p]=new go(h,p);t+=h.rows}r?n=Math.max(h._hlen,n):n+=h._hlen}this._hlen=r?n+s:Math.max(1,n+s)},i.prototype.$_fillHorz=function(e,t,o,r,n,s,l){for(var u=r+s,h=n,d=h+o-1,p=0,f=t-s;p<f;p++)for(var g=d;g>=h;g--){var m=e[u+p][g];if(m!=null){m=gt.getSource(m);for(var b=g+1;b<=d;b++){var C=e[u+p][b]=new go(m,b-h);l?(C._hrow=u+p,C._hcol=b):(C._row=u+p,C._col=b,C._parent=m.group,m.row===C.row&&(m._cspan++,m instanceof We&&m._clen++))}break}}},i.prototype.$_fillVert=function(e,t,o,r,n,s,l){for(var u=r+s,h=r+t-1,d=n+o-1,p=n;p<=d;p++)for(var f=h;f>=u;f--){var g=e[f][p];if(g!=null){g=gt.getSource(g);for(var m=f+1;m<=h;m++){var b=e[m][p]=new go(g,m-u);l?(b._hrow=m,b._hcol=p,g.hcol===b.hcol&&(g._hspan++,g instanceof We&&g._hlen++)):(b._row=m,b._col=p,g.col===b.col&&(g._dspan++,g instanceof We&&g._dlen++),b._parent=g.group)}break}}},i.prototype.$_adjustHeaderCells=function(e){var t=this._header.isVisible()?this._header.rows:0;if(t&&this._hideChildHeaders){this._hspan=this._hlen;for(var o=0,r=0;r<this._hlen;r++)for(var n=0;n<this._clen;n++)if(r||n){var s=this._hrow+r,l=this._hcol+n,u=e[s][l]=new go(this,o++);u._hrow=s,u._hcol=l}}else if(this._direction===c.ColumnLayoutDirection.VERTICAL){for(var h=this._clen,d=0,p=this._visibles;d<p.length;d++)(m=p[d])instanceof i&&(m._clen=this._clen,m.$_adjustHeaderCells(e));this.$_fillVert(e,this._hlen,h,this._hrow,this._hcol,t,!0),this.$_fillHorz(e,this._hlen,h,this._hrow,this._hcol,t,!0)}else{for(var f=0,g=this._visibles;f<g.length;f++){var m;(m=g[f])instanceof i&&(m._hlen=this._hlen-t,m.$_adjustHeaderCells(e))}this.$_fillVert(e,this._hlen,this._cols,this._hrow,this._hcol,t,!0),this.$_fillHorz(e,this._hlen,this._cols,this._hrow,this._hcol,t,!0)}},i.prototype.$_parseDataCells=function(e,t,o){for(var r,n=this._direction!=c.ColumnLayoutDirection.VERTICAL,s=0,l=0,u=0,h=this._visibles;u<h.length;u++){var d=h[u];if(d._row=t,d._col=o,d._dspan=1,d._dlen=1,d._cspan=1,d._clen=1,d instanceof i){if(d.$_parseDataCells(e,t,o),n)o+=d.cols;else if(t+=d.rows,this.rows==2){for(var p=1/0,f=0,g=0,m=this.visibles;g<m.length;g++){var b=m[g];p=Math.min(p,b.cols),f=Math.max(f,b.cols),b.ignoreCalcWidth=!1}if(p===1&&f>1)for(var C=0,x=this.visibles;C<x.length;C++)(b=x[C]).ignoreCalcWidth=b.cols===1}}else if(e[t][o]=d,n){for(var E=1;E<this.rows;E++)e[t+E][o]=r=new go(d,E),d._dspan++,r._col=o,r._row=t+E,r._parent=this;d._dlen=d._dspan,o+=d.cols}else{for(E=1;E<this.cols;E++)e[t][o+E]=r=new go(d,E),d._cspan++,r._col=o+E,r._row=t,r._parent=this;d._clen=d._cspan,t+=d.rows}n?(l+=d._clen,s=Math.max(d._dlen,s)):(l=Math.max(d._clen,l),s+=d._dlen)}n?(l=Math.max(1,l),this._dlen=s):this._dlen=Math.max(1,s),this._cspan=this._clen=l},i.prototype.$_adjustDataCells=function(e){if(this._direction===c.ColumnLayoutDirection.VERTICAL){for(var t=0,o=this._visibles;t<o.length;t++)(s=o[t])instanceof i&&(s._cspan=s._clen=this._clen,s.$_adjustDataCells(e));this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var r=0,n=this._visibles;r<n.length;r++){var s;(s=n[r])instanceof i&&(s._dlen=this._dlen,s.$_adjustDataCells(e))}this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}},i.prototype.$_calcSpans=function(){var e=this._header.isVisible();if(this._direction==c.ColumnLayoutDirection.HORIZONTAL){for(var t=0,o=1,r=1,n=0,s=this._visibles;n<s.length;n++)(p=s[n])instanceof i&&p.$_calcSpans(),t+=p.cols,o=Math.max(o,p.headerRows),r=Math.max(r,p.rows);this._rows=r,this._cols=t,e&&this._hideChildHeaders?this._headerRows=this._header.rows:this._headerRows=o+(e?this._header.rows:0)}else{this._cols=1,this._headerRows=e?this._header.rows:0,this._rows=0;for(var l=0,u=this._visibles;l<u.length;l++)(p=u[l])instanceof i&&p.$_calcSpans(),this._headerRows+=p.headerRows,this._rows+=p.rows,this._cols=Math.max(p.cols,this._cols);for(var h=0,d=this._visibles;h<d.length;h++){var p;(p=d[h])instanceof i&&(p._cols=this._cols)}e&&this._hideChildHeaders&&(this._headerRows=this._header.rows)}},i.prototype.$_resetVisibles=function(e){var t=0,o=0,r=this.visibles;this._visibles=[];for(var n=0,s=this._items;n<s.length;n++){var l=s[n];l._index=t++,l instanceof i&&l.$_resetVisibles(e);var u=l.$_isVisible(e);u&&this.expandable&&(u=this._expanded?this._expandedLayouts.indexOf(l)>=0:this._collapsedLayouts.indexOf(l)>=0),u&&(this._visibles.push(l),l._vindex=o++)}if(!e&&r.length!=this._visibles.length&&this.direction===c.ColumnLayoutDirection.HORIZONTAL)for(var h=this;h;)h._cellWidth=NaN,h.width=NaN,h=h.parent;this.$_calcSpans()},i.prototype.$_getLeaf=function(e,t){for(var o=0,r=this._visibles;o<r.length;o++){var n=r[o];if(n instanceof i){var s=n.row,l=s+n.rows;if(e>=s&&e<l){var u=n.col,h=u+n.cols;if(t>=u&&t<h)return this.$_getLeaf(e-s,t-u)}}else if(n.row===e&&n.col===t)return n}return null},i.prototype.$_collectCellWidths=function(e){for(var t=[],o=0,r=this._visibles;o<r.length;o++){var n=r[o],s=n._cellWidth||n.width;if(n instanceof We&&(isNaN(s)||s==0)&&(s=e),n instanceof i){var l=n.$_collectCellWidths(e);isNaN(s)&&(s=l),n._cellWidth=s}else n._cellWidth=s;t.push(s)}var u=this.width;return isNaN(u)&&(u=this.vertical?Math.max.apply(null,t):t.reduce(function(h,d){return h+d},0)),u},i.prototype.$_calcCellWidths=function(e,t,o){if(!o){for(var r=t.slice(),n=0;n<r.length;n++)r[n]=0;var s=this.owner._moveColumn,l=e.slice();if(s){var u=l.splice(s.first.row,1);l.splice(0,0,u[0])}for(var h=0;h<l.length;h++)for(var d=l[h],p=0;p<d.length;p++){var f=d[p];s?t[p]=t[p]||f._cellWidth:(!f.isProxy||f._cellWidth>0&&!f.ignoreCalcWidth)&&(t[p]+=f._cellWidth,r[p]++)}for(n=0;n<t.length;n++)t[n]=Math.round(t[n]/Math.max(r[n],1))}for(h=0;h<e.length;h++)for(d=e[h],p=0;p<d.length;p++){var g=d[p];if(g._cellWidth=t[p],g instanceof We){var m=g._cellWidths=[];for(n=0;n<g.cspan;n++)m[n]=t[p+n]||0}}},i.prototype._childIndexChanged=function(e){this.parent&&this.parent._childIndexChanged(e)},i.prototype._childWidthChanged=function(e){this.parent&&this.parent._childWidthChanged(e)},i.prototype._childFillWidthChanged=function(e){this.parent&&this.parent._childFillWidthChanged(e)},i.prototype.$_checkVisible=function(e){var t;if(!e||(t=e.vindex)<0||e!==this.getVisible(t))throw new Error("Column is not a visible group member");return t},i.prototype.$_collectHorzColumns=function(e,t,o){if(this.horizontal)for(var r=t;r<=o;r++){var n=this._visibles[r];n instanceof i?n.$_collectHorzColumns(e,0,n.visibleCount-1):n instanceof We&&e.push(n._columnObj)}},i.prototype.$_changeChildVIndex=function(e,t){e&&t!=e.vindex&&t>=0&&t<this._visibles.length&&this.$_changeChildIndex(e,this._visibles[t].index)},i.prototype.$_changeChildIndex=function(e,t){if(e){var o=e.index;if(o!=t&&t>=0&&t<this._items.length){t=t<=o?t:t+(this._items[t].getHeaderSpan()-1)-(e.getHeaderSpan()-1);for(var r=this._items.splice(o,e.getHeaderSpan()),n=0;n<r.length;n++)this._items.splice(t+n,0,r[n]);this.$_resetVisibles(),this._childIndexChanged(e)}}},i}(gt),Ag=function(a,i){for(var e=i,t=a.visibleCount;e<t;e++){var o=a.getVisible(e);if(o instanceof We||o instanceof it&&(o=gt.getSource(o.first))instanceof We)return o}return null},Bg=function(a,i){for(var e=i;e>=0;e--){var t=a.getVisible(e);if(t instanceof We||t instanceof it&&(t=gt.getSource(t.last))instanceof We)return t}return null},Zh=function(a,i,e){for(var t=e?a.visibleCount:a.count,o=0;o<t;o++){var r=e?a.getVisible(o):a.getItem(o);if(r instanceof We){var n=r._columnObj;n&&i.push(n)}else r instanceof it&&Zh(r,i,e)}},Qh=function(a,i,e){for(var t=e?a.visibleCount:a.count,o=0;o<t;o++){var r=e?a.getVisible(o):a.getItem(o);r instanceof We?i.push(r):r instanceof it&&Qh(r,i,e)}},ec=function(a,i,e,t,o){for(var r=t?a.visibleCount:a.count,n=0;n<r;n++){var s=t?a.getVisible(n):a.getItem(n);if(s instanceof We&&!o){var l=s._columnObj;l&&i.push(l.name)}else s instanceof it&&((!e||o)&&i.push(s.name),ec(s,i,e,t,o))}},ul=function(a,i,e){for(var t=e?a.visibleCount:a.count,o=0;o<t;o++){var r=e?a.getVisible(o):a.getItem(o);if(r instanceof We){var n=r._columnObj;n instanceof Oe&&i.push(n)}else r instanceof it&&ul(r,i,e)}},hl=function(a){function i(e){var t=a.call(this,"$_root_$",null)||this;return t._owner=e,t.header._visible=!1,t}return w(i,a),Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!1},set:function(e){},enumerable:!1,configurable:!0}),i.prototype.resetColumns=function(e){this.items.length>0&&(this.$_bindColumns({},e,!1),this.$_resetVisibles(!1))},Object.defineProperty(i.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this},enumerable:!1,configurable:!0}),i.prototype._changed=function(){this._owner&&this._owner._changed()},i.prototype._childIndexChanged=function(e){this._owner._itemIndexChanged(e)},i.prototype._childWidthChanged=function(e){this._owner._itemWidthChanged(e)},i.prototype._childFillWidthChanged=function(e){this._owner._itemFillWidthChanged(e)},i.prototype._setColumns=function(e){var t=this._items;t.length=0;for(var o=0,r=e.count;o<r;o++){var n=new We(e.getColumn(o));t.push(n),n._parent=this}this.resetColumns(e)},i}(it),Nn=function(a){function i(e){var t=a.call(this)||this;return t._cellWidths=[],t._grid=e,t._root=new hl(t),t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._root.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._root.first},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this._root.last},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!1,configurable:!0}),i.prototype.load=function(e){return this.$_clear(),this._loading=!0,this._root._loadItems(e),this._changed(),this._loading=!1,this},i.prototype.resetColumns=function(e){this._root.resetColumns(e)},i.prototype.cleanColumns=function(){this._root.cleanColumns()},i.prototype.invalidate=function(){this._changed()},i.prototype.invalidateIndices=function(e){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._moveColumn=e,this._changed()},i.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},i.prototype.getVisible=function(e){return this._root.getVisible(e)},i.prototype.addLayout=function(e,t){return this._root.addLayout(e,t)},i.prototype.removeLayout=function(e){this._root.removeLayout(e)},i.prototype.expandLayout=function(e,t){this.fireExpanding(e,t)&&(e._expanded=t,this._root.$_resetVisibles(),this._changed(),this.fireExpanded(e,t))},i.prototype.setColumns=function(e){this._root._setColumns(e),this._changed()},i.prototype.layoutByColumn=function(e){return e&&this._root.findLayout(e)},i.prototype.layoutByName=function(e){return e&&this._root.layoutByName(e)},i.prototype.getHeaderCellPos=function(e){for(var t=0;t<this._headerCells.length;t++)for(var o=this._headerCells[t],r=0;r<o.length;r++)if(o[r]instanceof We&&o[r]._columnObj===e)return{row:t,col:r}},i.prototype.getDataCellPos=function(e){for(var t=0;t<this._dataCells.length;t++)for(var o=this._dataCells[t],r=0;r<o.length;r++)if(o[r]instanceof We&&o[r]._columnObj===e)return{row:t,col:r}},i.prototype.getDataColumns=function(e){e===void 0&&(e=!0);var t=[];return ul(this._root,t,e),t},i.prototype.collectColumns=function(e,t,o){var r=[];return Zh(this._root,r,t),r},i.prototype.collectLayouts=function(e){var t=[];return Qh(this._root,t,!0),t},i.prototype.collectColumnNames=function(e,t,o,r){var n=[],s=this._root;return r?typeof r=="string"?s=function l(u,h){for(var d=0,p=u.count;d<p;d++){var f=u.getItem(d);if(f instanceof it)return f.name===r?f:l(f)}}(s):r instanceof it&&(s=r):s=this._root,s?(ec(s,n,e,t,o),n):null},i.prototype.collectDataColumns=function(e,t){e=e.source,t=t.source;var o=Math.min(e.col,t.col),r=Math.max(e.col+e._defColSpan,t.col+t._defColSpan)-1,n=[];ul(this._root,n,!0);for(var s=n.length-1;s>=0;s--){var l=n[s].layout.col;(l<o||l>r)&&n.splice(s,1)}return n},i.prototype.getHorzColumns=function(e,t){e===void 0&&(e=0);var o=t==null?e+this._root.visibleCount-1:e+t-1,r=[];return this._root.$_collectHorzColumns(r,e,o),r},i.prototype.getHomeOf=function(e){return e=gt.getSource(e),e=this._dataCells[e?e.row:0][0],gt.getSource(e)},i.prototype.getEndOf=function(e){e=gt.getSource(e);var t=this._dataCells,o=e?e.row:t.length-1;return e=t[o][t[o].length-1],gt.getSource(e)},i.prototype.getTopOf=function(e){return e=this._dataCells[0][e.col],gt.getSource(e)},i.prototype.getBottomOf=function(e,t){var o=this._dataCells;return e=o[o.length-1][e.col],t?e:gt.getSource(e)},i.prototype.getLowerOf=function(e){e=gt.getSource(e);var t=this._dataCells,o=e.row,r=e.col,n=0;return o+e.rows<t.length?e=t[o+e.rows][r]:(n=1,e=t[0][r]),{dy:n,layout:gt.getSource(e)}},i.prototype.getUpperOf=function(e){e=gt.getSource(e);var t=this._dataCells,o=e.row,r=e.col,n=0;return o>0?e=t[o-1][r]:(n=-1,e=t[t.length-1][r]),{dy:n,layout:gt.getSource(e)}},i.prototype.getRightOf=function(e){var t=this._dataCells[e.row],o=e.col;return o+e.cols<t.length?(e=t[o+e.cspan],gt.getSource(e)):null},i.prototype.getLeftOf=function(e){e=gt.getSource(e);var t=this._dataCells[e.row],o=e.col;return o>0?(e=t[o-1],gt.getSource(e)):null},i.prototype.getCellWidths=function(e,t){for(var o=0,r=0;r<t;r++)o+=this._cellWidths[r+e];return o},i.prototype.getLayout=function(e,t,o,r,n,s){function l(f){var g,m;if(f instanceof We){var b=f.firstColumn;if(b)return C=(C=b.visible&&f.visible||o)&&n.indexOf(b.name)<0||r.indexOf(b.name)>=0,(x=f.toProxy(!1)).visible=e?C:f.visible,x.width=(e&&t?f._fitWidth:f._cellWidth)||f.width,x.column=b.name,x}else{if(f.isProxy)return(e&&t?f._fitWidth:f._cellWidth)||f.width;if(f instanceof it){var C,x;m=f._items,g=[],C=(C=f.visible||o)&&n.indexOf(f.name)<0||r.indexOf(f.name)>=0;for(var E=0,S=m.length;E<S;E++)g.push(l.call(this,m[E]));if((x=f.toProxy(!1)).name=f.name,x.items=g,x.visible=e?C:f.visible,x.header=f.header&&f.header.toProxy(!1),e&&x.expandable)switch(s){case"current":break;case"expand":x.expanded=!0;break;case"collapse":x.expanded=!1;break;default:x.expandable=!1}return delete x.width,x}}}r===void 0&&(r=[]),n===void 0&&(n=[]),t=t&&!!this.grid.layoutManager.isColumnFitted;for(var u=this._root._items,h=[],d=0,p=u.length;d<p;d++)h.push(l.call(this,u[d]));return h},i.prototype.expandAll=function(e,t){this._root.expandAll(e,t)},i.prototype.isShowing=function(e){for(var t=e;t&&t.parent;){if(t.parent.visibles.indexOf(t)<0)return!1;t=t.parent}return!0},i.prototype.isDefault=function(){return!1},i.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var e=this.grid;e&&e.invalidateCellLayouts()}},i.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},i.prototype.$_refresh=function(e,t){this._dirty?(this._root.$_bindColumns({},e),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,e),this.$_calculateCellWidths(this._root,t),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,t),this._resized=!1,this._moveColumn=null},i.prototype.$_refresh2=function(e,t){this._root.$_bindColumns({},e,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,e),this.$_calculateCellWidths(this._root,t)},i.prototype.$_prepareMerges=function(e){for(var t=this.collectColumns(!0,!0,!1),o=0,r=t.length;o<r;o++){var n=t[o],s=this.layoutByColumn(n);if(s&&s.canMerge()){var l=s.merges;l||(l=new xs(s)),l.clear(),l.initialize(10),l.refreshRooms(0,e.itemCount-1,!0)}}},i.prototype.$_prepareLayout=function(e,t,o){for(var r=0,n=this._root.visibleCount;r<n;r++)this._root.getVisible(r)._prepareLayout(e,r<t,r>=n-o)},i.prototype.$_parseCells=function(e,t){var o=e._visibles;this.$_parseHeaderCells(o),this.$_parseDataCells(o)},i.prototype.$_parseHeaderCells=function(e){for(var t=this._headerCells=[],o=0,r=0,n=e;r<n.length;r++){var s=n[r];o=Math.max(o,s.headerRows)}for(var l=0;l<o;l++)t.push([]);this._root.$_parseHeaderCells(t,0,0),this._root.$_adjustHeaderCells(t)},i.prototype.$_parseDataCells=function(e){for(var t=this._dataCells=[],o=0,r=0,n=e;r<n.length;r++){var s=n[r];o=Math.max(o,s.rows)}for(var l=0;l<o;l++)t.push([]);this._root.$_parseDataCells(t,0,0),this._root.$_adjustDataCells(t);for(var u=0,h=t;u<h.length;u++)for(var d=h[u],p=0;p<d.length;){var f=d[p];if(f._defColSpan=1,f.isNull)p++;else for(;++p<d.length;){var g=d[p];if(!(!g||g.isProxy&&g.source===f||g.isNull&&g.group===f.group))break;f._defColSpan++}}},i.prototype.$_calculateCellWidths=function(e,t){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&e.$_collectCellWidths(t);for(var o=this._cellWidths=[],r=0,n=e.cols;r<n;r++)o.push(0);e.$_calcCellWidths(this._dataCells,o,!1)}else this._resized&&e.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},i.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},i.prototype._columnsChanged=function(e){},i.prototype._columnChanged=function(e){},i.prototype._itemIndexChanged=function(e){this.invalidateIndices(e)},i.prototype._itemWidthChanged=function(e){this.invalidateSize()},i.prototype._itemFillWidthChanged=function(e){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},i.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},i.prototype.$_changeCellWidths=function(e,t,o,r){for(var n=this._cellWidths,s=[],l=0,u=0;u<t;u++)l+=n[e+u],s.push(l);var h=o/l;for(u=0;u<t-1;u++)s[u]=Math.round(s[u]*h);for(s[t-1]=o,u=t-1;u>0;u--)n[e+u]=Math.max(n[e+u]+s[u]-s[u-1],r);n[e]=Math.max(n[e]+s[0],r),this.invalidateSize()},i.prototype.$_calcGroupWidths=function(){var e=this._cellWidths;(function t(o){for(var r=0,n=0;n<o._clen;n++)r+=e[o.col+n];o._width=o._cellWidth=r;for(var s=0,l=o.visibles;s<l.length;s++){var u=l[s];u instanceof it&&t(u)}})(this._root)},i.prototype.fireExpanding=function(e,t){return this.fireConfirmEvent(t?i.LAYOUT_EXPANDING:i.LAYOUT_COLLAPSING,e)},i.prototype.fireExpanded=function(e,t){this.fireEvent(t?i.LAYOUT_EXPANDED:i.LAYOUT_COLLAPSED,e)},i.LAYOUT_EXPANDING="onLayoutExpanding",i.LAYOUT_COLLAPSING="onLayoutCollapsing",i.LAYOUT_EXPANDED="onLayoutExpanded",i.LAYOUT_COLLAPSED="onLayoutCollapsed",i}(Mt),$g=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._columnsChanged=function(e){this.setColumns(e),a.prototype._columnsChanged.call(this,e)},i.prototype.addLayout=function(e){return null},i.prototype.removeLayout=function(e){},i.prototype.isDefault=function(){return!0},i}(Nn);c.VerticalMoveStep=void 0,(Kh=c.VerticalMoveStep||(c.VerticalMoveStep={})).ROW="row",Kh.CELL="cell",c.FocusMoveStep=void 0,(Xh=c.FocusMoveStep||(c.FocusMoveStep={})).GROUP="group",Xh.CELL="cell";var Is,cl,le=function(a){function i(e,t,o){t===void 0&&(t=-1);var r=a.call(this,!0)||this;return r._itemIndex=-1,r._grid=e,r._itemIndex=t,r._layout=o instanceof Ro?o.layout:o,r}return w(i,a),i.temp=function(e,t,o){return t===void 0&&(t=0),i.$_temp||(i.$_temp=new i),i.$_temp._grid=e,i.$_temp._itemIndex=t,i.$_temp._layout=o instanceof gt?o:o&&o.layout,i.$_temp},i.areEquals=function(e,t){return e==t||e&&t&&e._grid===t._grid&&e._itemIndex===t._itemIndex&&e._layout===t._layout},i.equalsTo=function(e,t,o){return e&&e._itemIndex===t&&e.layout===o},i.clearTemp=function(){i.$_temp&&(i.$_temp=i.$_temp.dispose())},i.compareHorz=function(e,t){if(e&&t)return e.layout.distance-t.layout.distance},i.prototype._doDispose=function(){this._grid=null,this._layout=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(e){this._itemIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(e){typeof e=="string"&&(e=this.grid&&this.grid.columnByName(e)),this._layout=e&&e.layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){var e=this.column;return e instanceof Oe?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueColumn",{get:function(){var e=this.column;return e instanceof Fi?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataField",{get:function(){var e=this.dataColumn;return e instanceof Oe?e.dataIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){var e=this.item;return e?e.dataRow:-1},set:function(e){if(this._grid){var t=this._grid.getItemOfRow(e,!1);t&&(this.itemIndex=t.index)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this.dataColumn&&this.dataColumn.fieldName},set:function(e){if(this._grid){var t=this._grid.columnByField(e);t&&(this.column=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this.dataColumn&&this.dataColumn.fieldIndex},set:function(e){if(this._grid){var t=this._grid.columnByField(e);t&&(this.column=t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){var e=this.item;return e?e.dataId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var e=this.column;if(e instanceof Oe){var t=e.dataIndex;if(t<0)throw new Error("Not exists data field: "+e.fieldName);var o=this.item;if(!o)throw new Error("Invalid item index: "+this._itemIndex);return o.getData(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixed",{get:function(){var e=this._layout;if(this._grid&&e&&e.visible){var t=this._grid.layoutManager,o=e.root.vindex;return o<t.fixedLayoutCount||o>=t.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFixed",{get:function(){if(this._grid){var e=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var e=this._grid.layoutManager;return this._layout.root.vindex<e.fixedLayoutCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var e=this._grid.layoutManager;return this._layout.root.vindex>=e.rightFirstLayout}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):it.isTop(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):it.isBottom(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeft",{get:function(){if(this._layout){var e=this._layout.group;return e?e.vindex==0&&it.isLeft(this._layout):this._layout.vindex==0}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRight",{get:function(){if(this._layout){var e=this._layout.group;return e?e.vindex==0&&it.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFirst",{get:function(){return this._layout&&this._grid&&this._grid.visibleLayoutCount>0?gt.getSource(this._grid.activeCellLayout.first)===this._layout:!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableFirst",{get:function(){var e=this._grid;if(e&&this._layout){var t=e.collectColumns(!0,!0,!0),o=t.indexOf(this._layout.firstColumn);if(o>=0){for(var r=o;r--;){var n=t[r];if(n instanceof Ji)return!1;var s=i.temp(e,this.itemIndex,n);if(e.getWritableAt(s))return!1}return!0}}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableLast",{get:function(){var e=this._grid;if(e&&this._layout)for(var t=e.collectColumns(!0,!0,!0),o=t.indexOf(this._layout.firstColumn)+1,r=t.length;o<r;o++){var n=t[o];if(n instanceof Ji)return!1;var s=i.temp(e,this.itemIndex,n);if(e.getWritableAt(s))return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLast",{get:function(){return this._layout&&this._grid&&this._grid.visibleLayoutCount>0?gt.getSource(this._grid.activeCellLayout.last)===this._layout:!1},enumerable:!1,configurable:!0}),i.prototype.set=function(e,t,o){return o!==void 0&&(this._grid=o),this._itemIndex=e,this._layout=t instanceof Ro?t.layout:t,this},i.prototype.assign=function(e){return e?(e.grid&&(this._grid=e._grid),this._itemIndex=e._itemIndex,this._layout=e._layout):(this._itemIndex=-1,this._layout=null),this},i.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},i.prototype.clone=function(){return new i(this._grid,this._itemIndex,this._layout)},i.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},i.prototype.normalize=function(e){return e&&(this._grid=e,this._layout||(this._layout=e.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,e.itemCount-1))),this},i.prototype.incRow=function(e){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+e)))},i.prototype.first=function(){this._grid&&(this._itemIndex=0)},i.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},i.prototype.right=function(){if(this.grid.editOptions.focusMoveStep!==c.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getRightOf(this._layout);e&&(this._layout=e)}else this.next()},i.prototype.left=function(){if(this.grid.editOptions.focusMoveStep!==c.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getLeftOf(this._layout);e&&(this._layout=e)}else this.prev()},i.prototype.next=function(){if(this.grid.editOptions.focusMoveStep!==c.FocusMoveStep.GROUP){var e=Vg(this._grid,this._layout);if(e)return this._layout=e,!0}else{var t=this.layout.root.vindex;t<this.grid.activeCellLayout.visibleCount-1&&(this._layout=this.grid.activeCellLayout.getVisible(t+1).first)}},i.prototype.prev=function(){if(this.grid.editOptions.focusMoveStep!==c.FocusMoveStep.GROUP){var e=jg(this._grid,this._layout);if(e)return this._layout=e,!0}else{var t=this.layout.root.vindex;t>0&&(this._layout=this.grid.activeCellLayout.getVisible(t-1).first)}},i.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},i.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},i.prototype.firstCell=function(){this._layout=this._grid&&gt.getSource(this.grid.activeCellLayout.first)},i.prototype.lastCell=function(){this._layout=this.grid&&gt.getSource(this.grid.activeCellLayout.last)},i.prototype.down=function(e,t,o){if(e===void 0&&(e=c.VerticalMoveStep.ROW),this._grid)return this.itemIndex<this._grid.itemCount-1&&this.grid.editOptions.focusMoveStep===c.FocusMoveStep.GROUP?(this.incRow(1),void(this.layout=this.layout.root.first)):void(e==c.VerticalMoveStep.ROW&&!t||this.isBottom||o?this._itemIndex<this._grid.itemCount-1&&(e==c.VerticalMoveStep.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},i.prototype.up=function(e,t,o){if(e===void 0&&(e=c.VerticalMoveStep.ROW),this._grid){if(this.itemIndex>0&&this.grid.editOptions.focusMoveStep===c.FocusMoveStep.GROUP)return this.incRow(-1),void(this.layout=this.layout.root.first);if(e==c.VerticalMoveStep.ROW&&!t||this.isTop||o){if(this._itemIndex>0){if(e==c.VerticalMoveStep.CELL)if(this._grid.spanned){var r=this._grid.$_getUpperOfCell(this);this._layout=r||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout}},i.prototype.getValue=function(){if(this._grid){var e=this.dataColumn,t=this._grid.getItem(this._itemIndex);return e&&t&&t.getData(e.dataIndex)}},i.prototype.assignFrom=function(e){e instanceof i?(this._grid=e._grid,this._layout=e._layout,this._itemIndex=e._itemIndex):a.prototype.assignFrom.call(this,e)},i.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},i.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},i.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},i}(me),mi=function(a){function i(e,t,o){var r=a.call(this,e,t&&t.index,o)||this;return r._item=t,r}return w(i,a),i.tempItem=function(e,t,o){return i.$_itemTemp||(i.$_itemTemp=new i),i.$_itemTemp._grid=e,i.$_itemTemp._item=t,i.$_itemTemp._itemIndex=t.index,i.$_itemTemp._layout=o instanceof gt?o:o&&o.layout,i.$_itemTemp},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i}(le),Vg=function(a,i){if(!a||!i)return null;var e=a.layoutManager,t=it.getNext(i);if(t)return t;for(var o=(i.group?i.root.vindex:i.vindex)+1,r=e.layoutCount;o<r;o++)if((t=e.getLayout(o))instanceof We||t instanceof it&&(t=gt.getSource(t.first)))return t},jg=function(a,i){if(!a||!i)return null;var e=a.layoutManager,t=it.getPrev(i);if(t)return t;for(var o=(i.group?i.root.vindex:i.vindex)-1;o>=0;o--)if((t=e.getLayout(o))instanceof We||t instanceof it&&(t=gt.getSource(t.last)))return t},Ni=function(a){function i(){var e=a.call(this)||this;return e._row1=0,e._row2=0,e}return w(i,a),i.$_setRange=function(e,t,o,r,n){return e._row1=t<=r?t:r,e._row2=t<=r?r:t,e._col1=o.col<=n.col?o:n,e._col2=o.col<=n.col?n:o,e},i.create=function(e,t){if(t&&e!==t)return i.$_setRange(new i,e.itemIndex,e.layout,t.itemIndex,t.layout);var o=new i;return o._row1=o._row2=e.itemIndex,o._col1=o._col2=e.layout,o},i.temp=function(e,t){var o=i.$_TEMP;return t&&e!==t?i.$_setRange(o,e.itemIndex,e.layout,t.itemIndex,t.layout):(o._row1=o._row2=e.itemIndex,o._col1=o._col2=e.layout,o)},i.createRange=function(e,t,o,r){return i.$_setRange(new i,e,t,o,r)},Object.defineProperty(i.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"c1",{get:function(){return this._col1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"c2",{get:function(){return this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){var e=new le;return e.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?e.layout=this._col1.row<=this._col2.row?this._col1:this._col2:e.layout=this._col1.col<=this._col2.col?this._col1:this._col2,e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){var e=new le;return e.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?e.layout=this._col1.row>=this._col2.row?this._col1:this._col2:e.layout=this._col1.col>=this._col2.col?this._col1:this._col2,e},enumerable:!1,configurable:!0}),i.prototype.contains=function(e,t){if(t){var o=t.col;return e>=this._row1&&e<=this._row2&&o>=this._col1.col&&o<=this._col2.col}return!1},i.prototype.normalize=function(){if(this._row1>this._row2){var e=this._row1;this._row1=this._row2,this._row2=e}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var t=this._col1;this._col1=this._col2,this._col2=t}}else t=this._col1,this._col1=this._col2,this._col2=t;return this},i.prototype.normalizeData=function(){return this.normalize(),this},i.prototype.intersectsWith=function(e){return!1},i.NULL=new i,i.$_TEMP=new i,i}(me),Je=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_COUNT:return this._getCount();case i.ID_SUM:return this._getSum();case i.ID_MAX:return this._getMax();case i.ID_MIN:return this._getMin();case i.ID_AVG:return this._getAvg();case i.ID_VAR:return this._getVar();case i.ID_VARP:return this._getVarp();case i.ID_STDEV:return this._getStdev();case i.ID_STDEVP:return this._getStdevp();case i.ID_DATA_COUNT:return this._getDataCount();case i.ID_DATA_AVG:return this._getDataAvg()}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){throw new Ee("Invalid identifier indexer: "+e)},i.ID_COUNT=0,i.ID_SUM=1,i.ID_MAX=2,i.ID_MIN=3,i.ID_AVG=4,i.ID_VAR=5,i.ID_VARP=6,i.ID_STDEV=7,i.ID_STDEVP=8,i.ID_DATA_COUNT=9,i.ID_DATA_AVG=10,i.IDENTS={count:i.ID_COUNT,sum:i.ID_SUM,max:i.ID_MAX,min:i.ID_MIN,avg:i.ID_AVG,var:i.ID_VAR,varp:i.ID_VARP,stdev:i.ID_STDEV,stdevp:i.ID_STDEVP,datacount:i.ID_DATA_COUNT,dataavg:i.ID_DATA_AVG},i}(xi),tc=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,a.prototype._doDispose.call(this)},i.prototype.setColumn=function(e,t){this._column=e,this._grid=e.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=t},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),Je.IDENTS.hasOwnProperty(e)?Je.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIndexerI=function(e,t){if(this._summarizer){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds: "+t);switch(e){case Je.ID_SUM:return this._summarizer.getSum(t);case Je.ID_COUNT:return this._summarizer.getCount(t);case Je.ID_MAX:return this._summarizer.getMax(t);case Je.ID_MIN:return this._summarizer.getMin(t);case Je.ID_AVG:return this._summarizer.getAvg(t);case Je.ID_VAR:return this._summarizer.getVar(t);case Je.ID_VARP:return this._summarizer.getVarp(t);case Je.ID_STDEV:return this._summarizer.getStdev(t);case Je.ID_STDEVP:return this._summarizer.getStdevp(t);case Je.ID_DATA_COUNT:return this._summarizer.getDataCount(t);case Je.ID_DATA_AVG:return this._summarizer.getDataAvg(t)}throw new Ee("Invalid identifier indexer: "+e)}switch(e){case Je.ID_SUM:case Je.ID_COUNT:return 0;case Je.ID_MAX:case Je.ID_MIN:case Je.ID_AVG:case Je.ID_VAR:case Je.ID_VARP:case Je.ID_STDEV:case Je.ID_STDEVP:return NaN}},i.prototype.evaluateIndexerS=function(e,t,o){if(this._summarizer&&this._ds){var r=o?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field index out of bounds: "+r);switch(e){case Je.ID_SUM:return this._summarizer.getSum(r);case Je.ID_COUNT:return this._summarizer.getCount(r);case Je.ID_MAX:return this._summarizer.getMax(r);case Je.ID_MIN:return this._summarizer.getMin(r);case Je.ID_AVG:return this._summarizer.getAvg(r);case Je.ID_VAR:return this._summarizer.getVar(r);case Je.ID_VARP:return this._summarizer.getVarp(r);case Je.ID_STDEV:return this._summarizer.getStdev(r);case Je.ID_STDEVP:return this._summarizer.getStdevp(r)}throw new Ee("Invalid identifier indexer: "+e)}switch(e){case Je.ID_SUM:case Je.ID_COUNT:return 0;case Je.ID_MAX:case Je.ID_MIN:case Je.ID_AVG:case Je.ID_VAR:case Je.ID_VARP:case Je.ID_STDEV:case Je.ID_STDEVP:return NaN}},i.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},i.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},i.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},i.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},i.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},i.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},i.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},i.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},i.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},i.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},i.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},i}(Je),Hg=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i.prototype.setItem=function(e){this._item=e},i.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},i.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},i.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},i.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},i.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},i.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},i.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},i.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},i.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},i.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},i.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},i}(tc),Gg=function(a){function i(e){var t=a.call(this)||this;return t._columns=[],t._orgColumns=[],t._nameMap={},t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._columns.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!1,configurable:!0}),i.prototype.getColumn=function(e){return this._columns[e]},i.prototype.setColumns=function(e){if(this._columns.length=0,this._nameMap={},e)for(var t=0,o=e;t<o.length;t++){var r=o[t],n=this._addColumn(r);if(!n)throw new Error("column is undefined");n.$_owner=this}this._orgColumns=this._columns.slice()},i.prototype.add=function(e,t){var o=this._addColumn(e,t===void 0?-1:t);return o!=null&&(o.$_owner=this),o},i.prototype.remove=function(e){return!!this._removeColumn(e)},i.prototype.exchangeNameMap=function(e,t,o){this._columns.indexOf(e)>0&&(this._nameMap[t].$_hash===e.$_hash&&delete this._nameMap[t],this._nameMap[o]=e)},i.prototype.resetIndices=function(){if(this._owner)for(var e=0,t=this._columns.length;e<t;e++){var o=this._columns[e];o.$_setIndex(e),o._resetIndices(this._owner)}},i.prototype.resetSortStates=function(){if(this._owner)for(var e=this._owner.getSortDirections(),t=this._owner.getSortFields(),o=0,r=this._columns.length;o<r;o++){var n=this._columns[o];n instanceof Oe&&(n.sortOrder=t.indexOf(n.dataIndex),n.sortDirection=e[n.sortOrder])}},i.prototype.columnByName=function(e){return this._nameMap[e]},i.prototype.columnByField=function(e){if(e>=0)for(var t=0,o=this.count;t<o;t++){var r=this.getColumn(t);if(r instanceof Oe&&r.dataIndex==e)return r}return null},i.prototype.columnsByField=function(e){var t=[];if(e>=0)for(var o=0,r=this.count;o<r;o++){var n=this.getColumn(o);n instanceof Oe&&n.dataIndex==e&&t.push(n)}return t},i.prototype.columnByTag=function(e){if(e)for(var t=0,o=this.count;t<o;t++){var r=this.getColumn(t),n=r.tag;if(v.isArray(e)&&v.equalArrays(e,n)||e instanceof Date&&n instanceof Date&&e.getTime()===n.getTime()||typeof e=="object"&&typeof n=="object"&&v.equalObjects(e,n)||n===e)return r}return null},i.prototype.columnsByTag=function(e){if(e){for(var t=[],o=0,r=this.count;o<r;o++){var n=this.getColumn(o),s=n.tag;(v.isArray(e)&&v.equalArrays(e,s)||e instanceof Date&&s instanceof Date&&e.getTime()===s.getTime()||typeof e=="object"&&typeof s=="object"&&v.equalObjects(e,s)||s===e)&&t.push(n)}return t.length?t:null}return null},i.prototype.restoreColumns=function(){this._restoreColumn()},i.prototype._addColumn=function(e,t){t===void 0&&(t=-1);var o=this._columns;if(!e||e instanceof Ro||(typeof e=="string"&&(e={fieldName:e}),e=Fo.createColumn(e)),e instanceof Ro){if(o.indexOf(e)>=0)throw new Error("column is already contained");t<0?o.push(e):o.splice(t,0,e);var r=e.name;if(!r||this._nameMap[r])if(r=e instanceof Oe?e.fieldName:e instanceof Ji?"series":"column",this._nameMap[r]){for(var n=0;n<1e3;n++)if(!this._nameMap[r+n]){e.name=r+=n;break}}else e.name=r;return r&&(this._nameMap[r]=e),e}return null},i.prototype._removeColumn=function(e){var t=this._columns.indexOf(e);return t>=0&&(this._columns.splice(t,1),e.$_owner=void 0,delete this._nameMap[e.name],!0)},i.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},i.prototype._clearColumn=function(){for(var e=0,t=this._columns;e<t.length;e++)t[e].dispose()},i}(me),Wg=function(a){function i(){var e=a.call(this,"headerCell")||this;return e._itemOffset=2,e._itemGap=2,e._checkLocation=c.ColumnHeaderItemLocation.NONE,e._checked=!1,e}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"template",{get:function(){return this._template},set:function(e){this._template=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(e){this._itemOffset=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){this._itemGap=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(e){this._checkLocation=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){this._showTooltip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._tooltip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(e){this._edgeMark=e},enumerable:!1,configurable:!0}),i}(li),Ug=function(a){function i(e){var t=a.call(this,e)||this;return t._minRowHeight=21,t._minHeight=23,t._height=0,t._resizable=!1,t._itemOffset=2,t._itemGap=2,t._showSelection=!1,t._showTooltip=!1,t._sortWidth=16,t._sortHeight=16,t._filterWidth=16,t._filterHeight=16,t._popupWidth=16,t._popupHeight=16,t._expanderWidth=16,t._expanderHeight=16,t._checkWidth=16,t._checkHeight=16,t._showPopupMenu=c.HandleVisibility.VISIBLE,t._cell=new Wg,t.visible=!0,t.assignFrom(Re.header),t}return w(i,a),i.prototype._doDispose=function(){this._cell=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){e!=this._minRowHeight&&(this._minRowHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(e){e!=this._minHeight&&(this._minHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){e!=this._height&&(this._height=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayHeight",{get:function(){return this._grid.headerView.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(e){if(e!=this._heights){e=v.makeArray(e,!0),this._heights=e&&e.slice();for(var t=0;t<this._heights.length;t++)this._heights[t]=Math.max(this._minRowHeight,isNaN(this._heights[t])?this._minRowHeight:this._heights[t]);this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(e){e!=this._itemOffset&&(this._itemOffset=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(e){e!=this._showSelection&&(this._showSelection=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(e){e!=this._sortWidth&&(this._sortWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(e){e!=this._sortHeight&&(this._sortHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(e){e!=this._filterWidth&&(this._filterWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(e){e!=this._filterHeight&&(this._filterHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupWidth",{get:function(){return this._popupWidth},set:function(e){e!=this._popupWidth&&(this._popupWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupHeight",{get:function(){return this._popupHeight},set:function(e){e!=this._popupHeight&&(this._popupHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderWidth",{get:function(){return this._expanderWidth},set:function(e){e!=this._expanderWidth&&(this._popupWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderHeight",{get:function(){return this._expanderHeight},set:function(e){e!=this._expanderHeight&&(this._popupHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(e){e!=this._showPopupMenu&&(this._showPopupMenu=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(e){e!=this._checkWidth&&(this._checkWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(e){e!=this._checkHeight&&(this._checkHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e},enumerable:!1,configurable:!0}),i.prototype.setCalcHeights=function(e){this._calcHeights=e.slice()},i.prototype.getCalcHeights=function(){return this._calcHeights},i.prototype.getCell=function(e){var t=this._cell;t.setLayout(e);var o=e instanceof it?e.header:e.firstColumn.header;if(o&&(t.text=o.displayText,t.template=o.realizeTemplate(),t.showTooltip=o.showTooltip,t.tooltip=o.tooltip,t.edgeMark=o.edgeMark,o instanceof zh)){var r=e.firstColumn,n=void 0;t.index.set(-1,e.firstColumn),t.itemOffset=(n=o.itemOffset)===void 0?this._itemOffset:n,t.itemGap=(n=o.itemGap)===void 0?this._itemGap:n,t.checkLocation=o.checkLocation,t.checked=r.checked}return t},i.prototype.getStyleName=function(){return this._styleName},i.prototype._doChanged=function(){a.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(Yo),zg=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){this._cell=null,a.prototype._doDispose.call(this)},i.prototype.setCell=function(e){this._cell=e},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._cell.value;case i.ID_FIELD:return this._cell.index.dataField;case i.ID_LEVEL:return this._cell.level}throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){},i.prototype.evaluateIndexerS=function(e,t,o){},i.ID_VALUE=0,i.ID_FIELD=1,i.ID_LEVEL=2,i.IDENTS={value:i.ID_VALUE,field:i.ID_FIELD,level:i.ID_LEVEL},i}(xi),ic=function(a){function i(e){var t=a.call(this,e)||this;return t._childIndex=0,t._error=null,t._errorDetail=null,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!1,configurable:!0}),i.prototype.calculate=function(){var e=this.valueColumn,t=e&&e.grid,o=this._getSummary(e,this._childIndex);if(this._value=NaN,this._error=null,t&&o&&t.itemSource.summaryMode!=c.SummaryMode.NONE){o._value=void 0;var r=o.expression,n=void 0;try{if(r&&t.dataCount>0&&e instanceof Oe&&e.dataIndex>=0){var s=t.columnSummaryRuntime;s.setColumn(e,t.summarizer),n=o.evaluate(s,this._childIndex)}var l=o.valueCallback;l&&(n=l(t.handler,e,this._childIndex,o,n)),o._value=this._value=n}catch(u){this._error=u,this._errorDetail=u,o._value=void 0}}},Object.defineProperty(i.prototype,"text",{get:function(){if(this._error)return li.ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),i.prototype.getDisplayText=function(e){var t,o=this._value,r=this.valueColumn,n="";if(o!==void 0&&r)if(typeof o=="string")n=o+"";else if(typeof o=="boolean")n=String(o);else if(o instanceof Date){var s=e.datetimeWriter;n=s?s.getText(this._value):String(o)}else if(typeof o!="number"||isNaN(o))o==null&&(n="");else{var l=e.numberFormatter;n=l?l.getText(o):String(o)}if(n){var u=e.prefix;u&&(n=u+n),(u=e.suffix)&&(n+=u)}return!n&&r&&(n=(t=this._getSummary(r,this._childIndex))===null||t===void 0?void 0:t.text),n},i.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},i.prototype.getTemplate=function(e){var t=this._getSummary(this.valueColumn,this._childIndex);return t?t.realizeSummary(this,e):void 0},i}(li),Yg=function(a){function i(){return a.call(this,"footerCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(e){e!=this._childIndex&&(this._childIndex=e)},enumerable:!1,configurable:!0}),i.prototype._getSummary=function(e,t){return e&&e.footers.get(t)},i}(ic),dl=function(a){function i(e){var t=a.call(this,e)||this;return t._minHeight=23,t._height=0,t._heights=[],t._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._childIndex=0,t._displayIndex=0,t._runtime=new zg,t._cell=t._createCell(),t.visible=!0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(e){(e=Math.max(0,e))!=this._minHeight&&(this._minHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){(e=Math.max(0,e))!=this._height&&(this._height=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heights",{get:function(){return this._heights},set:function(e){this._heights=e.slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this.refreshOwner())},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var t=this._cell,o=e.firstColumn;return t.index.set(-1,o),t._childIndex=this._childIndex,t.calculate(),t},i.prototype.getCellStyle=function(e,t,o){o===void 0&&(o=!0);var r,n=e.getSummary(),s=this._cellStyleCallback;s&&(r=s(this._grid.handler,e),t.assign(r)),n&&(s=n.styleCallback)&&(r=s(this._grid.handler,e),t.assign(r));var l=t.styleName||n&&n.styleName||"";return o&&(t.styleName=this.getCellStyleName()+" "+l),t},i.prototype.getCellFormatters=function(e,t){return t?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):((t=this._formatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),t},i.prototype._visibleChanged=function(){a.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},i.prototype._doChanged=function(){a.prototype._doChanged.call(this),this.$_owner&&this.$_owner._doChanged()},i}(Yo),qg=function(a){function i(e){var t=a.call(this,e)||this;return t.assignFrom(Re.footer),t}return w(i,a),Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this._childIndex},enumerable:!1,configurable:!0}),i.prototype.getCellStyleName=function(){return i.CELL_CSS},i.prototype._createCell=function(){return new Yg},i.CELL_CSS="rg-footer-cell",i}(dl),oc=function(a){function i(e){var t=a.call(this,e)||this;t._items=[],t._visibles=[];var o=t._createSummary(e);return o.$_owner=t,t._items.push(o),o.visible&&t._visibles.push(o),t}return w(i,a),i.prototype._doDispose=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].dispose();this._items=null,this._visibles=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"canShow",{get:function(){return this.visible&&this._visibles.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dirty",{get:function(){for(var e=this._dirty,t=0,o=this._visibles;t<o.length;t++){var r=o[t];e=e||r.dirty}return e},enumerable:!1,configurable:!0}),i.prototype.get=function(e){return this._items[e]},i.prototype.getVisible=function(e){return this._visibles[e]},i.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},i.prototype.assignFrom=function(e){var t;if(a.prototype.assignFrom.call(this,e),e&&e.items?t=v.makeArray(e.items):v.isArray(e)&&(t=e),t){for(var o=this._items,r=t.length;o.length>r;)o.pop().dispose();o.length=r;for(var n=0,s=t.length;n<s;n++){var l=t[n];l&&(o[n]||(o[n]=this._createSummary()),o[n].assignFrom(l),o[n].$_owner=this)}this.$_resetVisibles()}},i.prototype.clean=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].clean();a.prototype.clean.call(this)},i.prototype.toProxy=function(){for(var e=a.prototype.toProxy.call(this),t=[],o=0;o<this._items.length;o++)t.push(this._items[o].toProxy());return t.length>0&&(e.items=t.slice()),e},i.prototype.$_visibleChanged=function(e){this.$_resetVisibles()},i.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var e=0,t=0;e<this._items.length;e++){var o=this._items[e];o._childIndex=e,o.visible&&(this._visibles.push(o),o._displayIndex=t++)}this._changed()},i.prototype._doChanged=function(){a.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(Yo),Kg=function(a){function i(e){var t=a.call(this,e)||this;return t.assignFrom(Re.footers),t}return w(i,a),i.prototype._createSummary=function(e){return new qg(e||this._grid)},i}(oc),br=function(a){function i(e){var t=a.call(this,e)||this;return t._displayOrder=0,t._headText=null,t._footText=null,t._sumText=null,t._showFocus=!1,t._showSelection=!1,t._headCell=t._createHeadCell(),t._footCell=t._createFootCell(),t._sumCell=t._createSumCell(),t._filterCell=t._createFilterCell(),t.visible=!0,t}return w(i,a),Object.defineProperty(i.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(e){e!=this._displayOrder&&(this._displayOrder=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headText",{get:function(){return this._headText},set:function(e){e!=this._headText&&(this._headText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footText",{get:function(){return this._footText},set:function(e){e!=this._footText&&(this._footText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumText",{get:function(){return this._sumText},set:function(e){e!=this._sumText&&(this._sumText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName=typeof e=="string"?e:null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(e){e!=null&&typeof e!="string"||(this._popupMenuName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visChanged",{get:function(){return this._visChanged},set:function(e){this._visChanged=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showFocus",{get:function(){return this._showFocus},set:function(e){e!=this._showFocus&&(this._showFocus=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(e){e!=this._showSelection&&(this._showSelection=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getHeadCell=function(){return this._headCell},i.prototype.getFootCell=function(){return this._footCell},i.prototype.getSumCell=function(){return this._sumCell},i.prototype.getFilterCell=function(){return this._filterCell},i.prototype._createHeadCell=function(){return new ms(this)},i.prototype._createFootCell=function(){return new ms(this)},i.prototype._createSumCell=function(){return new ms(this)},i.prototype._createFilterCell=function(){return new ms(this)},i.prototype._visibleChanged=function(){a.prototype._visibleChanged.call(this),this._grid&&this._grid.invalidatePosition(),this._visChanged=!0},i}(Yo);c.IndicatorValue=void 0,(Is=c.IndicatorValue||(c.IndicatorValue={})).NONE="none",Is.INDEX="index",Is.REVERSE="reverse",Is.ROW="row",c.StateMark=void 0,(cl=c.StateMark||(c.StateMark={})).IMAGE="image",cl.TEXT="text",cl.NONE="none";var pl,Jo,fl,Xg=function(a){function i(e){var t=a.call(this,"indicatorCell")||this;return t._itemState=c.ItemState.NORMAL,t._indicator=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"indicator",{get:function(){return this._indicator},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._itemState},set:function(e){e!=this._itemState&&(this._itemState=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){var e,t=this._indicator,o=t.owner,r=this.index,n=r.item,s="",l=o.indicatorReverse(t.displayValue);if(n&&n.itemState==c.ItemState.NORMAL)switch(t.displayValue){case c.IndicatorValue.INDEX:case c.IndicatorValue.REVERSE:(e=o.getIndicatorIndex(n,l))>=0&&(e+=t.indexOffset,!t.zeroBase&&e++,s=String(e));break;case c.IndicatorValue.ROW:n.isDataRow&&(e=r.dataRow,e+=t.rowOffset,t.zeroBase||e++,s=String(e))}return s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(li),qr=function(a){function i(e){var t=a.call(this,e)||this;return t._zeroBase=!1,t._indexOffset=0,t._rowOffset=0,t._minWidth=32,t._maxWidth=0,t._width=0,t._selectable=!0,t._displayWidth=0,t._cell=new Xg(t),t.headText=ye.messages.rowIndicatorHeadText,t.footText=ye.messages.rowIndicatorFootText,t.sumText=ye.messages.rowIndicatorSumText,t.showFocus=t.showSelection=!0,t.assignFrom(Re.rowIndicator),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"displayValue",{get:function(){return this._displayValue||Re.rowIndicator.displayValue||c.IndicatorValue.INDEX},set:function(e){e!=this._displayValue&&(this._displayValue=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(e){e!=this._zeroBase&&(this._zeroBase=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(e){e!=this._indexOffset&&(this._indexOffset=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(e){e!=this._rowOffset&&(this._rowOffset=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){e!=this._minWidth&&(this._minWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!=this._maxWidth&&(this._maxWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return this._selectable},set:function(e){e!=this._selectable&&(this._selectable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark||Re.rowIndicator.mark||c.StateMark.IMAGE},set:function(e){e!=this._mark&&(this._mark=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return c.GridCellType.INDICATOR},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var t=this._cell;if(t.setIndex(e),e.item){var o=e.item.itemState;o==c.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==e.itemIndex&&(o=c.ItemState.FOCUSED),t.itemState=o}return t},i.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},i.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},i.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},i.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"},i}(br),Jg=function(a){function i(e){var t=a.call(this,"stateBarCell")||this;return t._bar=e,t}return w(i,a),i.prototype._doDispose=function(){this._bar=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){var e,t=this._bar.stateTexts[this.item.rowState]||((e=Re.stateBar.stateTexts)===null||e===void 0?void 0:e[this.item.rowState]);if(!t)switch(this.item.rowState){case c.RowState.CREATED:return ye.messages.stateTextCreated;case c.RowState.UPDATED:return ye.messages.stateTextUpdated;case c.RowState.CREATE_AND_DELETED:return ye.messages.stateTextCreateAndDeleted;case c.RowState.DELETED:return ye.messages.stateTextDeleted}return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(li),Kr=function(a){function i(e){var t=a.call(this,e)||this;return t._width=20,t._mark=c.StateMark.IMAGE,t._stateTexts={},t._errorVisible=!1,t._cell=new Jg(t),t.assignFrom(Re.stateBar),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(e){e!=this._mark&&(this._mark=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateTexts",{get:function(){return this._stateTexts},set:function(e){if(e!=this._stateTexts){var t=[];for(var o in c.RowState)t.push(c.RowState[o]);for(var r in e)t.indexOf(r)>=0&&(this._stateTexts[r]=e[r]);this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorVisible",{get:function(){return this._errorVisible},set:function(e){e!=this._errorVisible&&(this._errorVisible=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return c.GridCellType.STATE},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var t=this._cell;return t.setIndex(e),t},i.prototype.getHeadStyleName=function(){return"rg-statebar-head"},i.prototype.getFootStyleName=function(){return"rg-statebar-foot"},i.prototype.getSumStyleName=function(){return"rg-statebar-sum"},i.prototype.getFilterStyleName=function(){return"rg-statebar-filter"},i}(br),Zg=function(a){function i(){return a.call(this,"checkBarCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.item.checked},enumerable:!1,configurable:!0}),i}(li),Xr=function(a){function i(e){var t=a.call(this,e)||this;return t._width=20,t._exclusive=!1,t._showAll=!0,t._showGroup=!0,t._visibleOnly=!1,t._checkableOnly=!0,t._syncHeadCheck=!1,t._useImages=!1,t._checkLocation=c.ColumnHeaderItemLocation.TOP,t._itemGap=5,t._fieldIndex=-1,t._breakMergeOnEmpty=!1,t._cell=new Zg,t._merged=!1,t.assignFrom(Re.checkBar),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusive",{get:function(){return this._exclusive},set:function(e){e!=this._exclusive&&(this._exclusive=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(e){e!=this._checkLocation&&(this._checkLocation=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAll",{get:function(){return this._showAll},set:function(e){e!=this._showAll&&(this._showAll=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showGroup",{get:function(){return this._showGroup},set:function(e){e!=this._showGroup&&(this._showGroup=e,this._grid.itemSource.setGroupCheckable(e),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(e){e!=this._visibleOnly&&(this._visibleOnly=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(e){e!=this._checkableOnly&&(this._checkableOnly=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._grid.itemSource.checkableExpression=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(e){this._checkableCallback=e,this._grid.itemSource.checkableCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(e){e!=this._syncHeadCheck&&(this._syncHeadCheck=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(e){e!=this._fieldName&&(this._fieldName=e,this._fieldIndex=this._grid.dataSource.getFieldIndex(e),this._grid.setCheckFieldIndex(this._fieldIndex),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(e){this._useImages!==e&&(this._useImages=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(e){e!=this._mergeRule&&(this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?ey.createRule(e):null,this._changed(),this.owner._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){e!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMove",{get:function(){return!!this._focusMove},set:function(e){this._focusMove=e},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var t=this._cell;return t.setIndex(e),t._exclusive=this._exclusive,t},i.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},i.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},i.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},i.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},i.prototype.canMerge=function(){return this._mergeRuleObj!=null},i.prototype.getCellType=function(){return c.GridCellType.CHECK},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),i.prototype._doChanged=function(){this._grid&&(this._grid._itemCheckChanged=this._syncHeadCheck)},Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),i}(br),An=function(a){function i(){var e=a.call(this)||this;return e._row1=0,e._row2=0,e}return w(i,a),i.$_setRange=function(e,t,o){return e._row1=t<=o?t:o,e._row2=t<=o?o:t,e},i.create=function(e,t){if(t&&e!==t)return i.$_setRange(new i,e.itemIndex,t.itemIndex);var o=new i;return o._row1=o._row2=e.itemIndex,o},i.temp=function(e,t){var o=i.$_TEMP;return t&&e!==t?i.$_setRange(o,e.itemIndex,t.itemIndex):(o._row1=o._row2=e.itemIndex,o)},i.createRange=function(e,t){return i.$_setRange(new i,e,t)},Object.defineProperty(i.prototype,"empty",{get:function(){return this._row2<this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){var e=new le;return e.itemIndex=this._row1<=this._row2?this._row1:this._row2,e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){var e=new le;return e.itemIndex=this._row1>=this._row2?this._row1:this._row2,e},enumerable:!1,configurable:!0}),i.prototype.contains=function(e){return e>=this._row1&&e<=this._row2},i.prototype.intersectsWith=function(e){return!1},i.NULL=new i,i.$_TEMP=new i,i}(me),Qg=function(a){function i(){var e=a.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}return w(i,a),i.prototype._doDispose=function(){this._item=null,this._ds=null,a.prototype._doDispose.call(this)},i.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},i.prototype.setCell=function(e){this._item=e.item},i.prototype.setItem=function(e){this._item=e},i.prototype.clear=function(){this._item=null,this._ds=null},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){if(this._item){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_GROUP:return this._item.parent}throw new Ee("Invalid identifier key: "+e)}},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(t<0||t>=this._fieldCount)throw new Ee("Data field index out of bounds:"+t);return this._item.getData(t)}throw new Ee("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new Ee("Invalid identifier indexer: "+e);if(this._ds){var r=o?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new Ee("Data field is not exists:"+t);return this._item.getData(r)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(xi),rc={},ey=function(a){function i(e){var t=a.call(this)||this;return t._runtime=i.$_runtime=i.$_runtime||new Qg,t.criteria=e,t}return w(i,a),i.createRule=function(e){var t=typeof e=="string"?e:e&&e.criteria;return t?new i(t):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(e){(e=e?e.trim():null)!=this._criteria&&(this._criteria=e,this._exprNode=e?qi.Default.parse(e,null):null,this._changed())},enumerable:!1,configurable:!0}),i.prototype.parseInit=function(e,t,o,r,n){var s=this._checkBar.breakMergeOnEmpty,l=e.fixedCount,u=e.itemCount,h=e.dataSource.rowCount;if(!((r=Math.min(u-o,r))<1||h<=0)){this._runtime.setDataSource(e.dataSource);for(var d=null;o<u&&(d=e.getItem(o),!this.$_isRow(d,!1));)n[o]=o+1,o++;if(!(o>=u)){this._runtime.setItem(d);var p=this._exprNode.evaluate(this._runtime),f=d.checked,g=o;if(n[g]=g+1,!(d.dataRow>=h)){this._runtime.setItem(d);for(var m=o+1;m<u;m++)if(d=e.getItem(m),this.$_isRow(d,!1)){if(d.dataRow>=h)break;this._runtime.setItem(d);var b=this._exprNode.evaluate(this._runtime),C=d.checked;if(m==l||b===void 0&&s||(b instanceof Date&&p instanceof Date?+b!=+p:b!=p)||C!=f){if(m>=r)break;g=m,p=b,f=C}n[m]=g+1}else{if(m>=r)break;p=rc,g=m,n[m]=g+1}}}}},i.prototype.parseBounds=function(e,t,o,r,n){var s=this._checkBar.breakMergeOnEmpty,l=!1,u=e.itemCount;if(!(u<1)){var h,d,p,f=e.fixedCount,g=rc,m=Math.max(0,o),b=m,C=-1;if(this._runtime.setDataSource(e.dataSource),m>0&&n[m]<=0){var x=e.getItem(m);if(this.$_isRow(x,l)){for(this._runtime.setItem(x),d=this._exprNode.evaluate(this._runtime),p=x.checked,m--;m>=0&&(x=e.getItem(m),this.$_isRow(x,l))&&(this._runtime.setItem(x),g=this._exprNode.evaluate(this._runtime),h=x.checked,!(m==f||g===void 0&&s||(g instanceof Date&&d instanceof Date?+g!=+d:g!=d)||p!=h));)m--;for(var E=b-1;E>m;E--)n[E]=m+2;b-1>m&&(C=m+1)}else{for(n[m]=m+1,E=b-1;E>m;E--)n[E]=m+2;for(b-1>m+1&&(C=m+2),m--;m>=0&&n[m]<=0&&!this.$_isRow(e.getItem(m),l);)n[m]=m+1,m--}}for(m=Math.max(0,o);m<=r&&n[m]>0;)m++;for(;m<=r&&!this.$_isRow(e.getItem(m),l);)n[m]=m+1,m++;if(m<r){for(b=m,x=e.getItem(m),this._runtime.setItem(x),d=this._exprNode.evaluate(this._runtime),p=x.checked,m++;m<u;)if(x=e.getItem(m),this.$_isRow(x,l)){if(this._runtime.setItem(x),g=this._exprNode.evaluate(this._runtime),h=x.checked,m==f||g===void 0&&s||(g instanceof Date&&d instanceof Date?+g!=+d:g!=d)||p!=h){var S=b;for(C>=0&&(S=C,C=-1),E=b;E<m;E++)n[E]=S+1;if(m>=r)break;d=g,p=h,b=m}else n[m]=b+1;m++}else{for(S=b,C>=0&&(S=C,C=-1),E=b;E<m;E++)n[E]=S+1;for(n[m]=m+1,m++;m<u&&!this.$_isRow(e.getItem(m),l);)n[m]=m+1,m++;if(b=m,m>=r)break}if(m==u&&(g instanceof Date&&d instanceof Date?+g==+d:g==d)||p!=h)for(S=C>=0?C:b,E=b;E<m;E++)n[E]=S+1}}},i.prototype.$_isRow=function(e,t){var o=e instanceof Tt&&!(e instanceof jr);if(o&&!t){var r=e.parent;o=r.expanded||r.firstItem!==e}return o},i.$_runtime=null,i}(_o),nc=function(a){function i(e,t){var o=a.call(this)||this;return o._checkBar=t,o._head=e.top,o._tail=e.bottom,o}return w(i,a),i.borrow=function(e,t){var o=i.$_rooms.pop();return o?(o._head=e.top,o._tail=e.bottom):o=new i(e,t),o},i.returnTo=function(e){if(e){var t=i.$_rooms;t.indexOf(e)<0&&t.push(e)}},Object.defineProperty(i.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scope",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return null},set:function(e){},enumerable:!1,configurable:!0}),i.prototype.getHead=function(e){return e?e.set(this._head,null):e=new le(this._checkBar.owner,this._head,null),e},i.prototype.getTail=function(e){return e?e.set(this._tail,null):e=new le(this._checkBar.owner,this._tail,null),e},i.prototype.isHead=function(e){return e.itemIndex==this._head},i.prototype.isTail=function(e){return e.itemIndex==this._tail},i.prototype.contains=function(e){return e.itemIndex>=this._head&&e.itemIndex<=this._tail},i.$_rooms=new Array,i}(jh),Zo=-1,Po=65535,sc=function(a){function i(e){var t=a.call(this)||this;return t._flags=null,t._fixedRooms=[],t._rooms=[],t._inited=!1,t._fixedCells=[],t._cells=[],t._nextId=0,t._checkBar=e,e._merges=t,t}return w(i,a),i.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),i.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},i.prototype.initialize=function(e){if(!this._inited){var t=this._checkBar.owner,o=t.itemSource,r=this._checkBar._mergeRuleObj;if(r){for(var n=this._flags=new Array(o.itemCount),s=t.fixedOptions.mergeRows?0:o.fixedCount,l=o.itemCount;l--;)n[l]=0;r._checkBar=this._checkBar,r.parseInit(o,-1,s,e,n)}this._inited=!0}},i.prototype.refreshRooms=function(e,t,o){if(this._nextId=0,this._inited&&this._flags&&!(t<e)){var r=this._checkBar.owner;if(r){var n=this._rooms,s=r.layoutManager.fixedItemCount,l=r.itemSource,u=this._checkBar._mergeRuleObj,h=0;if(this._fixedRooms.length=0,this._rooms.length=0,u&&(u._checkBar=this._checkBar,u.parseBounds(l,-1,e,t,this._flags)),o)for(;h<s;)if(p=this.$_checkFixedMerge(l,h,s)){var d=new nc(p,this._checkBar);this._fixedRooms.push(d),h=p.r2+1}else h+=1;for(h=e;h<=t;){var p;if((p=this.$_checkMerge(l,h,n.length==0,s))!=null){var f=l.getItem(p.r2);f instanceof yi||f instanceof ti||(d=new nc(p,this._checkBar),this._rooms.push(d)),h=p.r2+1}else h+=1}}}},i.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},i.prototype.getRooms=function(){return this._rooms.slice()},i.prototype.scroll=function(e){},i.prototype.getRoom=function(e){for(var t=e.rowFixed?this._fixedRooms:this._rooms,o=t.length-1;o>=0;o--)if(t[o].contains(e))return t[o];return null},i.prototype.prepareCells=function(e,t){if(e>0){for(var o=this._fixedCells,r=0;r<o.length;r++)o[r]=Zo;for(;o.length<e;)o.push(Zo)}var n=this._cells;for(r=0;r<n.length;r++)n[r]=Zo;for(;n.length<t;)n.push(Zo)},i.prototype.refreshCells=function(e,t){for(var o=this.getFixedRooms(),r=o.length-1;r>=0;r--){var n=o[r];this.addFixedCells(n.head,n.tail-n.head+1)}for(r=(o=this.getRooms()).length-1;r>=0;r--){n=o[r];var s=Math.max(0,n.head-t-e),l=n.tail-t-e;this.addCells(s,l-s+1)}},i.prototype.addFixedCells=function(e,t){for(var o=this._fixedCells,r=this._nextId++,n=e+1;n<e+t;n++)o[n]=r+Po;return o[e]=r,r},i.prototype.addCells=function(e,t){for(var o=this._cells,r=this._nextId++,n=e+1;n<e+t;n++)o[n]=r+Po;return o[e]=r,r},i.prototype.isMerged=function(e,t){return e<t?this._fixedCells[e]>Zo:this._cells[e-t]>Zo},i.prototype.isMergeRoot=function(e,t){return e<t?this._fixedCells[e]>Zo&&this._fixedCells[e]<Po:(e-=t,this._cells[e]>Zo&&this._cells[e]<Po)},i.prototype.isHidden=function(e,t){return e<t?this._fixedCells[e]>=Po:this._cells[e-t]>=Po},i.prototype.getMerged=function(e,t){var o=1;if(e<t)for(var r=(s=this._fixedCells)[e],n=e+1;n<s.length&&s[n]-Po==r;n++,o++);else{e-=t;var s;for(r=(s=this._cells)[e],n=e+1;n<s.length&&s[n]-Po==r;n++,o++);}return o},i.prototype.getMerged2=function(e,t,o,r){for(var n=this._cells,s=n[o],l=e.itemSource,u=l.getItem(t++),h=u.isData?r:1,d=o+1;d<n.length&&n[d]-Po==s;d++)h+=(u=l.getItem(t++)).isData?r:1;return h},i.prototype.$_checkFixedMerge=function(e,t,o){if(o>0){var r=t,n=this._flags[r];if(n<=0)return null;for(var s=t+1;s<=o;){if(s==o||this._flags[s]>n)return s>r+1?An.createRange(r,s-1):null;s++}}return null},i.prototype.$_checkMerge=function(e,t,o,r){if(t>=0){var n=t,s=this._flags[n];if(e.getItem(n),s<=0)return null;if(o)for(;n>r&&!(this._flags[n-1]<s);)n--;for(var l=e.itemCount,u=t+1;u<l;){if(this._flags[u]>s||this._flags[u]<=0)return u>n+1?An.createRange(n,u-1):e.getItem(n).isDataRow?null:An.createRange(n,u-1);u++}if(u>n)return u>n+1?An.createRange(n,u-1):e.getItem(n).isDataRow?null:An.createRange(n,u-1)}return null},i.MERGE_ROOMS="mergeRooms",i}(me),Qo=function(){function a(i,e){i===void 0&&(i=0),e===void 0&&(e=0),this.x=i,this.y=e}return a.empty=function(){return new a},a.create=function(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),new a(i,e)},Object.defineProperty(a.prototype,"isEmpty",{get:function(){return this.x===0||this.y===0},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.equals=function(i){return i===this||i&&this.x===i.x&&this.y===i.y},a.prototype.setEmpty=function(){return this.x=this.y=0,this},a.prototype.set=function(i,e){return this.x=i,this.y=e,this},a.prototype.round=function(){var i=this.clone();return i.x>>>=0,i.y>>>=0,i},a.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},a}(),yo=function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this)||this;o._x=0,o._y=0,o._width=0,o._height=0,o._visible=!0,o._mouseEnabled=!0,o._elements=null,o._dirty=!0,o._className="",o._name=t;var r=o._dom=o._createDom(e);return r&&o._initDom(r),o}return w(i,a),i.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),v.detach(this._dom),this._dom=null),this._elements){for(var e=0,t=this._elements;e<t.length;e++)t[e].dispose();this._elements.length=0}this._parent=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSingleton",{get:function(){return this._parent&&this._parent.childCount==1&&this._parent._elements[0]===this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){e!=this._x&&(this._x=e,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){e!=this._y&&(this._y=e,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){(e=Math.max(0,e))!=this._width&&(this._width=e,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){(e=Math.max(0,e))!=this._height&&(this._height=e,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this._x+this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return new Qo(this._x,this._y)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bounds",{get:function(){return new Z(this._x,this._y,this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientRect",{get:function(){return new Z(0,0,this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(e){this._mouseEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mouseX",{get:function(){var e=this.container;if(e){for(var t=e._currentX,o=this;o&&o!==void 0;)t-=o._x,o=o._parent;return t}return NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mouseY",{get:function(){var e=this.container;if(e){for(var t=e._currentY,o=this;o&&o!==void 0;)t-=o._y,o=o._parent;return t}return NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return xe(this._dom)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._dom&&this._dom.style},enumerable:!1,configurable:!0}),i.prototype.isDom=function(e){return e===this._dom},i.prototype.canHover=function(){return!0},i.prototype.getChildren=function(){return this._elements&&this._elements.concat()},i.prototype.getChild=function(e){return this._elements[e]},i.prototype.indexOf=function(e){return this._elements?this._elements.indexOf(e):-1},i.prototype.contains=function(e){return this._elements&&this._elements.indexOf(e)>=0},i.prototype.getAncestor=function(e){for(var t=this._parent;t;){if(t instanceof e)return t;t=t._parent}return null},i.prototype.addChild=function(e){return this.insertChild(-1,e)},i.prototype.insertChild=function(e,t){if(t&&!this.contains(t)){var o=this._elements||[],r=t._dom;if(e<0||e>=o.length)this._dom&&r&&this._dom.appendChild(r),o.push(t);else{if(r){var n=this._elements[e]._dom;this._dom&&n&&this._dom.insertBefore(r,n)}o.splice(e,0,t)}return this._elements=o,t._parent=this,t.$_attached(this),this.invalidate(),!0}return!1},i.prototype.removeChild=function(e){if(e&&this._elements){var t=this._elements.indexOf(e);if(t>=0)return this.removeChildAt(t)===e}return!1},i.prototype.removeChildAt=function(e){if(e>=0&&e<this.childCount){var t=this._elements[e];return this._elements.splice(e,1),this._dom&&t._dom&&this._dom.removeChild(t._dom),t._parent=null,t._dirty=!1,t.$_detached(this),this.invalidate(),t}return null},i.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},i.prototype.clear=function(){var e=this._elements;if((e?e.length:0)>0){for(var t=0,o=e;t<o.length;t++){var r=o[t];r._parent=null,r.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},i.prototype.hideAll=function(){if(this._elements)for(var e=0,t=this._elements;e<t.length;e++)t[e].visible=!1},i.prototype.invalidate=function(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=!1),e||!this._dirty){this._dirty=!0;var o=this.container;o&&o.invalidateElement(this)}if(t&&this._elements)for(var r=0,n=this._elements;r<n.length;r++)n[r].invalidate(e,!0)},i.prototype.validate=function(){this._dirty=!1},i.prototype.invalidateLayout=function(){var e=this.container;e&&e.invalidateLayout()},i.prototype.getBounds=function(e){return e===void 0&&(e=null),e?e.set(this._x,this._y,this._width,this._height):new Z(this._x,this._y,this._width,this._height)},i.prototype.getClientRect=function(e){return e===void 0&&(e=null),e?e.set(0,0,this._width,this._height):new Z(0,0,this._width,this._height)},i.prototype.containsInBounds=function(e,t){return e>=this._x&&e<this._x+this._width&&t>=this._y&&t<this._y+this._height},i.prototype.containsInClient=function(e,t){return e>=0&&e<this._width&&t>=0&&t<this._height},i.prototype.parentToElement=function(e,t,o){for(var r=this;r&&r!=e;)t-=r._x,o-=r._y,r=r._parent;return new Qo(t,o)},i.prototype.translateBy=function(e,t){t===void 0&&(t=null);var o=e;for(t||(t=new Z(0,0,this._width,this._height));o&&o!==this;)t.x-=o._x,t.y-=o._y,o=o._parent;return t},i.prototype.topBy=function(e,t){for(var o=this._y+t,r=this._parent;r&&r!==e;)o+=r._y,r=r._parent;return o},i.prototype.boundsBy=function(e,t){t===void 0&&(t=null);var o=this._x,r=this._y,n=this._parent;for(t&&(o+=t.x,r+=t.y);n&&n!==e;)o+=n._x,r+=n._y,n=n._parent;return t?new Z(o,r,t.width,t.height):new Z(o,r,this._width,this._height)},i.prototype.boundsByContainer=function(e){e===void 0&&(e=null);var t=this._x,o=this._y;e&&(t+=e.x,o+=e.y);for(var r=this._parent;r&&r._x!==void 0;)t+=r._x,o+=r._y,r=r._parent;return e?new Z(t,o,e.width,e.height):new Z(t,o,this._width,this._height)},i.prototype.pointByContainer=function(e,t){for(var o=this._parent;o&&o._x!==void 0;)e+=o._x,t+=o._y,o=o._parent;return new Qo(e+this._x,t+this._y)},i.prototype.containerToElement=function(e,t){for(var o=this;o;)e-=o._x,t-=o._y,o=o._parent;return new Qo(e,t)},i.prototype.boundsByScreen=function(e){return e===void 0&&(e=null),e=this.boundsByContainer(e),e=this.container.toScreen(e)},i.prototype.hitTest=function(e,t){return e>=0&&e<this._width&&t>=0&&t<this._height},i.prototype.findChildAt=function(e,t,o){var r=this._elements,n=r?r.length:0;if(n>0)for(var s=n-1;s>=0;s--){var l=r[s];if(l.visible){var u=e-l._x,h=t-l._y;if((o||l._mouseEnabled)&&(l.isLayer||l.hitTest(u,h))){var d=l.findChildAt(u,h,o);if(d)return d;if(!l.isLayer&&l._mouseEnabled)return l}}}return null},i.prototype.move=function(e,t){e==this._x&&t==this._y||(this._x=e,this._y=t,this.invalidate())},i.prototype.resize=function(e,t){e==this._width&&t==this._height||(this._width=e,this._height=t,this.invalidate())},i.prototype.setBounds=function(e,t,o,r){e==this._x&&t==this._y&&o==this._width&&r==this._height||(this._x=e,this._y=t,this._width=o,this._height=r,this.sizeChanged())},i.prototype.setBoundsI=function(e,t,o,r){t>>=0,o>>=0,r>>=0,(e>>=0)==this._x&&t==this._y&&o==this._width&&r==this._height||(this._x=e,this._y=t,this._width=o,this._height=r,this.sizeChanged())},i.prototype.setRect=function(e){e.x==this._x&&e.y==this._y&&e.width==this._width&&e.height==this._height||(this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height,this.sizeChanged())},i.prototype.setRectI=function(e){var t=e.x>>0,o=e.y>>0,r=e.width>>0,n=e.height>>0;t==this._x&&o==this._y&&r==this._width&&n==this._height||(this._x=t,this._y=o,this._width=r,this._height=n,this.sizeChanged())},i.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},i.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},i.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},i.prototype.setImportantStyle=function(e,t){this._dom.style.setProperty(e,t,"important")},i.prototype._createDom=function(e){return e.createElement("div")},i.prototype._initDom=function(e){var t=e.style;t.position="absolute",t.boxSizing="border-box",this._addEventListeners(e)},i.prototype._addEventListeners=function(e){},i.prototype._removeEventListeners=function(e){},i.prototype.$_attached=function(e){this._doAttached(e)},i.prototype._doAttached=function(e){},i.prototype.$_detached=function(e){this._doDetached(e)},i.prototype._doDetached=function(e){},i.prototype._setSizeStyle=function(e){e.width=this._width+"px",e.height=this._height+"px"},i.prototype._getCssDisplay=function(){return"block"},i.prototype.resetStyleName=function(){this._setClassName(this._dom)},i.prototype._setClassName=function(e){var t=this._getCssSelector();t!=this._className&&(this._className=t,(e||this._dom).className=t||"")},i.prototype.applyBounds=function(){var e=this._dom.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},i.prototype._beforeDraw=function(e){this._setClassName(e);var t=e.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},i.prototype._hoverChanged=function(){},i.prototype._visibleChanged=function(){},i.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},i.prototype._doSizeChanged=function(){},i}(Mt),Ft=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),Object.defineProperty(i.prototype,"isLayer",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){},i.prototype._doDraw=function(e){},i}(yo),ty=function(a){function i(e,t){t===void 0&&(t=!1);var o=a.call(this,e)||this;return o._active=t,o}return w(i,a),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),i}(Ft);c.SelectionMode=void 0,(pl=c.SelectionMode||(c.SelectionMode={})).NONE="none",pl.SINGLE="single",pl.EXTENDED="extended",c.SelectionStyle=void 0,(Jo=c.SelectionStyle||(c.SelectionStyle={})).BLOCK="block",Jo.GROUP="group",Jo.ROWS="rows",Jo.COLUMNS="columns",Jo.SINGLE_ROW="singleRow",Jo.SINGLE_COLUMN="singleColumn",Jo.SINGLE="single",Jo.NONE="none",c.SelectionDisplay=void 0,(fl=c.SelectionDisplay||(c.SelectionDisplay={})).CELL="cell",fl.CELL_AND_BORDER="cellAndBorder",fl.MASK="mask";var ac,_l,Es,vr=function(a){return a==c.SelectionStyle.SINGLE_ROW||a==c.SelectionStyle.SINGLE_COLUMN||a==c.SelectionStyle.SINGLE},Bn=function(a){var i=a&&a.style;return i==c.SelectionStyle.ROWS||i==c.SelectionStyle.SINGLE_ROW},gl=function(a){function i(e,t){var o=a.call(this)||this;return o._manager=e,o._runStyle=t,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runStyle",{get:function(){return this._runStyle},enumerable:!1,configurable:!0}),i.prototype.setValues=function(e){var t=this.grid.dataSource,o=this._getRows(),r=this.grid,n={};if(o&&o.rows&&o.rows.length>0&&o.fields&&o.fields.length>0){for(var s=0;s<o.rows.length;s++){for(var l=[],u=0;u<o.fields.length;u++)r.getWritable(r.getItemIndexOfRow(o.rows[s]),r.columnByField(o.fields[u]))&&l.push(o.fields[u]);l.length&&(n[o.rows[s]]=l.slice())}t.fillValue(n,e)}},i.prototype.inflate=function(e,t){switch(e){case"left":this._inflateLeft(t);break;case"right":this._inflateRight(t);break;case"top":this._inflateTop(t);break;case"bottom":this._inflateBottom(t)}},i.prototype.getItems=function(e){e===void 0&&(e=!0);for(var t=this.grid,o=[],r=this.getBounds(),n=r.top,s=r.bottom,l=n;l<=s;l++){var u=t.getItem(l);u&&(!e||u.dataRow>=0)&&o.push(u)}return o},i.prototype.getItemIndices=function(e){e===void 0&&(e=!0);for(var t=this.grid,o=[],r=this.getBounds(),n=r.top,s=r.bottom,l=n;l<=s;l++){var u=t.getItem(l);u&&(!e||u.dataRow>=0)&&o.push(u.index)}return o},i.prototype.getRows=function(){for(var e=this.grid,t=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var l=e.getItem(s);if(l&&l.dataRow>=0){var u=l.dataRow;u>=0&&t.push(u)}}return t},i.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},i.prototype.toProxy=function(){var e=this.grid,t=this.getBounds(),o=e.getItem(t.r1),r=e.getItem(t.r2);return{style:this.style,startItem:t.r1,startRow:o?o.dataRow:-1,startColumn:t.c1.firstColumn.name,endItem:t.r2,endRow:r?r.dataRow:-1,endColumn:t.c2.lastColumn.name,startLayout:t.c1,endLayout:t.c2}},Object.defineProperty(i.prototype,"startItem",{get:function(){return this.getBounds().r1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startRow",{get:function(){var e=this.grid.getItem(this.getBounds().r1);return e?e.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startColumn",{get:function(){return this.getBounds().c1.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endItem",{get:function(){return this.getBounds().r2},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endRow",{get:function(){var e=this.grid.getItem(this.getBounds().r2);return e?e.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endColumn",{get:function(){return this.getBounds().c2.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startLayout",{get:function(){return this.getBounds().c1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endLayout",{get:function(){return this.getBounds().c2},enumerable:!1,configurable:!0}),i}(me),iy=function(a){function i(e){var t=a.call(this)||this;return t._items=[],t._locked=!1,t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==c.SelectionMode.EXTENDED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return this._items.length==1&&this._items[0].single},enumerable:!1,configurable:!0}),i.prototype.lock=function(){this._locked=!0},i.prototype.unlock=function(){this._locked=!1},i.prototype.getItem=function(e){return this._items[e]},i.prototype.getItems=function(){return this._items.slice()},i.prototype.lastItem=function(){return this._items[this._items.length-1]},i.prototype.add=function(e,t,o,r){if(this._locked)return null;if(o==c.SelectionStyle.NONE)return this.clear(!0),null;this.exclusiveMode&&this.clear(!0);var n=null;switch(o){case c.SelectionStyle.COLUMNS:n=new er(this,o,e.layout,t.layout);break;case c.SelectionStyle.SINGLE_COLUMN:n=new er(this,o,e.layout,e.layout);break;case c.SelectionStyle.ROWS:n=new mo(this,o,e.itemIndex,t.itemIndex);break;case c.SelectionStyle.SINGLE_ROW:n=new mo(this,o,e.itemIndex,e.itemIndex);break;case c.SelectionStyle.BLOCK:n=new ko(this,o,e,t);break;case c.SelectionStyle.GROUP:(e=e.clone()).layout=e.layout.root.first,(t=t.clone()).layout=t.layout.root.last.source,n=new ko(this,o,e,t);break;case c.SelectionStyle.SINGLE:n=new ko(this,o,e,e)}return n&&this.$_addItem(n,r)},i.prototype.remove=function(e){if(!this._locked){var t=this._items.indexOf(e);t>=0&&(this._items.splice(t,1),this.fireEvent(i.REMOVED,e),this._changed())}},i.prototype.clear=function(e){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(i.CLEARED,e))},i.prototype.selectBlock=function(e,t){t&&this.clear(!0),this.containsCell(e)||this.$_addItem(new ko(this,c.SelectionStyle.BLOCK,e,e),!0)},i.prototype.selectRow=function(e,t){t&&this.clear(!0),this.containsItem(e,mo)||this.$_addItem(new mo(this,c.SelectionStyle.ROWS,e,e),!0)},i.prototype.containsItem=function(e,t){for(var o=0,r=this._items.length;o<r;o++){var n=this._items[o];if((!t||n instanceof t)&&n.containsItem(e))return!0}return!1},i.prototype.containsLayout=function(e){for(var t=0,o=this._items.length;t<o;t++)if(this._items[t].containsLayout(e))return!0;return!1},i.prototype.containsCell=function(e){return this.contains(e.itemIndex,e.layout)},i.prototype.contains=function(e,t){for(var o=0,r=this._items.length;o<r;o++)if(this._items[o].contains(e,t))return!0;return!1},i.prototype.normalize=function(){},i.prototype.canResize=function(e){return e&&!vr(e._runStyle)},i.prototype._changed=function(e,t){t===void 0&&(t=!0),this.fireEvent(i.CHANGED,e,t)},i.prototype.$_addItem=function(e,t){if(!e)throw new Error("item is null");return this._items.indexOf(e)<0&&(this._items.push(e),this.fireEvent(i.ADDED,e,t),this._changed(e,t)),e},i.prototype.$_itemResized=function(e){this.fireEvent(i.RESIZED,e),this._changed(e)},i.prototype.$_ended=function(e){this.fireEvent(i.ENDED,e)},i.CHANGED="onSelectionChanged",i.ADDED="onSelectionAdded",i.REMOVED="onSelectionRemoved",i.CLEARED="onSelectionCleared",i.RESIZED="onSelectionResized",i.ENDED="onSelectionEnded",i}(Mt),ko=function(a){function i(e,t,o,r){var n=a.call(this,e,t)||this;return n._startIndex=o.clone(),n._endIndex=r.clone(),v.isDebugging()&&n._startIndex.layout,v.isDebugging()&&n._endIndex.layout,n}return w(i,a),Object.defineProperty(i.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||c.SelectionStyle.BLOCK},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return le.areEquals(this._startIndex,this._endIndex)},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var e=this.grid;this._startIndex.normalize(e),this._endIndex.normalize(e);var t=this._startIndex.clone(),o=this._endIndex.clone();if(this._runStyle===c.SelectionStyle.GROUP&&(t.layout.root.vindex>o.layout.root.vindex&&(t=this._endIndex.clone(),o=this._startIndex.clone()),t.layout=t.layout.root.first,o.layout=o.layout.root.last),le.areEquals(t,o))return Ni.create(t);var r=e.activeCellLayout._dataCells,n=t.layout,s=o.layout,l=void 0,u=void 0;return n.col<=s.col?(l=r[0][n.col],u=r[r.length-1][s.col]):(l=r[0][s.col],u=r[r.length-1][n.col]),Ni.createRange(t.itemIndex,l,o.itemIndex,u)},i.prototype.containsItem=function(e){var t=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return e>=t&&e<=o},i.prototype.containsLayout=function(e){if(!e)return!1;if(this.single)return this._startIndex.layout===e;var t=e.distance,o=this._startIndex.layout.distance,r=this._endIndex.layout.distance;return o<r?t>=o&&t<=r:t>=r&&t<=o},i.prototype.contains=function(e,t){return this.getBounds().contains(e,t)},i.prototype.resizeTo=function(e){var t=this.grid,o=t.displayOptions;t.isValid(e)&&!le.areEquals(e,this._endIndex)&&(o.selectAtSingleRow&&(e.itemIndex=this.startItem),this._endIndex.assign(e),this._resized())},i.prototype.moveRow=function(e){this._startIndex.itemIndex+=e,this._endIndex.itemIndex+=e},i.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},i.prototype.mergeWith=function(e){},i.prototype.getData=function(e){if(e===void 0&&(e=-1),e==0)return null;var t,o=this.grid,r=this.getBounds(),n=this.single?[r.c1.boundColumn]:o.collectDataColumns(r.c1,r.c2);if(!n||(t=n.length)<1)return null;for(var s=r.r1,l=r.r2,u=[],h=s;h<=l;h++){var d=o.getItem(h);if(d&&d.isDataRow){var p={};p.__rowId=d.dataRow;for(var f=0;f<t;f++){var g=n[f];p[g.fieldName]=d.getData(g.dataIndex)}if(u.push(p),e>0&&u.length==e)break}}return u},i.prototype._inflateLeft=function(e){this._startIndex.layout.distance<=this._endIndex.layout.distance?e.layout!==this._startIndex.layout&&(this._startIndex.layout=e.layout,this._resized()):e.layout!==this._endIndex.layout&&(this._endIndex.layout=e.layout,this._resized())},i.prototype._inflateRight=function(e){this._startIndex.layout.distance>this._endIndex.layout.distance?e.layout!==this._startIndex.layout&&(this._startIndex.layout=e.layout,this._resized()):e.layout!==this._endIndex.layout&&(this._endIndex.layout=e.layout,this._resized())},i.prototype._inflateTop=function(e){var t=this.grid,o=Math.max(0,Math.min(t.itemCount-1,e.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?o!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=o,this._resized()):o!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=o,this._resized())},i.prototype._inflateBottom=function(e){var t=this.grid,o=Math.max(0,Math.min(t.itemCount-1,e.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?o!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=o,this._resized()):o!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=o,this._resized())},i.prototype._getRows=function(){var e=this.grid,t=e.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(t&&!(t.length<1)){for(var o=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),r=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),n=[],s=[],l=o;l<=r;l++)n.push(e.getItem(l).dataRow);for(var u=0,h=t;u<h.length;u++){var d=h[u];s.push(d.dataIndex)}return{rows:n,fields:s}}},i.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},i}(gl),mo=function(a){function i(e,t,o,r){var n=a.call(this,e,t)||this;return n._startRow=o,n._endRow=r,n}return w(i,a),Object.defineProperty(i.prototype,"startRow",{get:function(){return this._startRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endRow",{get:function(){return this._endRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||c.SelectionStyle.ROWS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var e=this.grid,t=e.itemCount;return this._startRow=Math.max(0,Math.min(t-1,this._startRow)),this._endRow=Math.max(0,Math.min(t-1,this._endRow)),this._startRow<=this._endRow?Ni.createRange(this._startRow,e.activeCellLayout.first,this._endRow,e.activeCellLayout.last):Ni.createRange(this._endRow,e.activeCellLayout.first,this._startRow,e.activeCellLayout.last)},i.prototype.contains=function(e,t){return this.containsItem(e)},i.prototype.containsItem=function(e){return e>=this.topRow&&e<=this.bottomRow},i.prototype.containsLayout=function(e){return!0},i.prototype.resizeTo=function(e){var t=Math.max(0,e.itemIndex);t!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},i.prototype.moveRow=function(e){this._startRow+=e,this._endRow+=e},i.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},i.prototype.mergeWith=function(e){},i.prototype.getData=function(e){if(e===void 0&&(e=-1),e==0)return null;var t=this.grid,o=t.collectDataColumns(t.getVisibleLayout(0),t.getVisibleLayout(t.visibleLayoutCount-1));if(!o)return null;var r=o.length;if(r<1)return null;for(var n=Math.max(0,Math.min(this._startRow,this._endRow)),s=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),l=[],u=n;u<=s;u++){var h=t.getItem(u);if(h&&h.isDataRow){var d={};d.__rowId=h.dataRow;for(var p=0;p<r;p++){var f=o[p];d[f.fieldName]=h.getData(f.dataIndex)}if(l.push(d),e>0&&l.length==e)break}}return l},i.prototype._inflateLeft=function(e){},i.prototype._inflateRight=function(e){},i.prototype._inflateTop=function(e){var t=e.itemIndex;t!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,t)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},i.prototype._inflateBottom=function(e){var t=e.itemIndex;t!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,t)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},i.prototype._getRows=function(){var e=this.grid,t=e.activeCellLayout,o=e.collectDataColumns(t.first,t.last);if(o&&!(o.length<1)){for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],l=[],u=r;u<=n;u++)s.push(e.getItem(u).dataRow);for(var h=0,d=o;h<d.length;h++){var p=d[h];l.push(p.dataIndex)}return{rows:s,fields:l}}},i}(gl),er=function(a){function i(e,t,o,r){var n=a.call(this,e,t)||this;return n._startLayout=o,n._endLayout=r,n}return w(i,a),Object.defineProperty(i.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||c.SelectionStyle.COLUMNS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var e=this.grid.activeCellLayout,t=this._startLayout,o=this._endLayout;if(t.col>o.col){var r=t;t=o,o=r}t=e.getTopOf(t),o=e.getBottomOf(o,!0);var n=this.grid.itemCount-1;return Ni.createRange(0,t,n,o)},i.prototype.contains=function(e,t){return this.containsLayout(t)},i.prototype.containsItem=function(e){return!0},i.prototype.containsLayout=function(e){return e.col>=this.leftLayout.col&&e.col<=this.rightLayout.col},i.prototype.resizeTo=function(e){e.layout!==this._endLayout&&(this._endLayout=e.layout,this._resized())},i.prototype.moveRow=function(e){},i.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},i.prototype.mergeWith=function(e){},i.prototype.getData=function(e){if(e===void 0&&(e=-1),e==0)return null;var t=this.grid,o=t.collectDataColumns(this._startLayout,this._endLayout);if(!o)return null;for(var r=t.itemCount,n=[],s=0;s<r;s++){var l=t.getItem(s);if(l&&l.isDataRow){var u={};u.__rowId=l.dataRow;for(var h=0,d=o.length;h<d;h++)u[o[h].fieldName]=l.getData(o[h].dataIndex);if(n.push(u),e>0&&n.length==e)break}}return n},i.prototype._inflateLeft=function(e){var t=e.layout;t!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=t:this._endLayout=t,this._resized())},i.prototype._inflateRight=function(e){var t=e.layout;t!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=t:this._endLayout=t,this._resized())},i.prototype._inflateTop=function(e){},i.prototype._inflateBottom=function(e){},i.prototype._getRows=function(){var e=this.grid,t=e.collectDataColumns(this._startLayout,this._endLayout);if(t){for(var o=e.itemCount,r=[],n=[],s=0;s<o;s++)r.push(e.getItem(s).dataRow);for(var l=0,u=t;l<u.length;l++){var h=u[l];n.push(h.dataIndex)}return{rows:r,fields:n}}},i}(gl),oy=function(a){function i(e){return a.call(this,e,"selectionView")||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-selection"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),lc=function(a){function i(e){var t=a.call(this,e,"selectionMask")||this;return t._toped=!1,t._bottomed=!1,t._lefted=!1,t._righted=!1,t._view=new oy(e),t.addChild(t._view),t}return w(i,a),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},i.prototype.updateElement=function(){var e=0,t=0,o=this.width,r=this.height;this._lefted&&(e-=10,o+=10),this._righted&&(o+=10),this._toped&&(t-=10,r+=10),this._bottomed&&(r+=10),this._view.setBounds(e,t,o,r)},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},i}(Ft),uc=function(a){function i(e,t){var o=a.call(this,e.doc,t)||this;return o._pool=[],o._views={},o._rangeRect=new Z,o._grid=e,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.addView=function(e){var t=e.$_hash,o=this._views[t];return o||(o=this._pool.pop()||new lc(this.doc),this._views[t]=o),o._item=e,this.addChild(o),o},i.prototype.removeView=function(e){var t=e.$_hash,o=this._views[t];o&&(this.removeChild(o),this._pool.push(o),delete this._views[t])},i.prototype.clearViews=function(){for(var e in this._views){var t=this._views[e];this.removeChild(t),this._pool.push(t)}this._views={}},i.prototype.layout=function(){var e=this._grid.layoutManager,t=new Z,o=Object.keys(this._views);for(var r in this._views){var n=this._views[r],s=n.item,l=!1;if(!(o.length===1&&s.single&&le.areEquals(s._startIndex,this._grid.focusedIndex))&&(n.prepare(),s instanceof mo?(l=this.$_getSelectionRowsRect(e,s,n,t),n._lefted=!0,n._righted=!0):s instanceof er?(l=this.$_getSelectionColumnsRect(e,s,n,t),n._toped=!0,n._bottomed=!0):l=this.$_getSelectionRangeRect(e,s,n,t),l)){var u=e.contentBounds.y+e.footerBounds.y;t.bottom>u&&(n._bottomed=!0,t.bottom=u)}n.visible=l,n.visible&&(n.setRectI(t),n.updateElement(),n.invalidate())}},i.prototype.$_getSelectionRowsRect=function(e,t,o,r){var n,s,l=this._grid,u=t.getBounds(),h=u.r1,d=u.r2,p=e.itemCount,f=e.fixedItemCount,g=l.topIndex;if(f>0){if(h>=g+f+p||d<0||h>=f&&d<g+f)return!1;var m=e.fixedHeight+l.fixedOptions.rowBarHeight;h<f?n=e.getTableItemBounds(Math.max(0,h)):((n=e.getTableItemBounds(Math.max(0,h-g))).y<m&&(o._toped=!0),n.y=Math.max(n.y,m)),d<f?s=e.getTableItemBounds(d):h<=f&&d<f+g?s=e.getTableItemBounds(Math.min(f+g,f)-1):d>=g?(s=e.getTableItemBounds(Math.min(e.itemCount+f-1,d-g))).y=Math.max(s.y,m):s=n}else{if(!(p>0)||h>=g+p||d<g)return!1;m=h-g,n=e.getTableItemBounds(Math.max(0,m)),s=e.getTableItemBounds(Math.min(p-1,d-g)),m<0&&(o._toped=!0)}return r.copy(n.union(s)),r.offset(e.fixedContentBounds.x,e.contentBounds.y+e.bodyBounds.y),r.right=e.rightLayoutCount>0?e.rightContentBounds.right:e.contentBounds.right,!0},i.prototype.$_getSelectionColumnsRect=function(e,t,o,r,n){var s=this._grid,l=t.getBounds(),u=e.fixedLayoutCount,h=e.rightLayoutCount;e.rightFirstLayout;var d=l.c1.col,p=l.c2.col;s.fixedOptions.colBarWidth;var f=e.getDataRect(l.c1),g=e.getDataRect(l.c2);if(r.left=Math.min(f.x,g.x),r.right=Math.max(f.right,g.right),r.y=e.contentBounds.y+e.headerBounds.bottom+e.summaryBounds.height,r.height=Math.min(e.dataBounds.height,e.footerBounds.y),n&&n.copy(r),d>=u){var m=e.fixedContentBounds.right;r.x<m&&(o._lefted=!0,r.left=Math.max(r.left,m)),r.right<m&&(o._righted=!0,r.width=0)}if(h>0){var b=e.rightFirstLayout,C=e.rightContentBounds;r.left>C.left?r.width=0:p<b&&r.right>=e.rightContentBounds.left&&(r.right=Math.min(r.right,e.rightContentBounds.x),o._righted=!0)}return!0},i.prototype.$_getSelectionRangeRect=function(e,t,o,r,n){var s=this._rangeRect;return!!this.$_getSelectionRowsRect(e,t,o,s)&&(r.y=s.y,r.bottom=s.bottom,this.$_getSelectionColumnsRect(e,t,o,s,n),r.x=s.x,r.right=s.right,n&&(n.y=r.y,n.height=r.height),!0)},i}(Ft),yl=function(){function a(i){this._format=i,this._reader=Uo.getReader(i),this._writer=Lt.getFormatter(i),a.validateDateFormat(i)}return a.getConverter=function(i){var e=a.Formatters;if(e[i])return e[i];var t=new a(i);return e[i]=t},a.validateDateFormat=function(i){if(i=i&&i.trim()){var e=i.indexOf("a")>=0||i.indexOf("A")>=0;if(e&&i.indexOf("H")>=0)throw"Invalid datetime read format - 'H' 'a'    : "+i;if(i.indexOf("h")>=0&&!e)throw"Invalid datetime read format - 'h'  'a'   : "+i}},Object.defineProperty(a.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),a.prototype.getDate=function(i){return this._reader.toDate(i,!0)},a.prototype.getDateNull=function(i){try{return this.getDate(i)}catch{return v.log("getDateNull Fail string => ".concat(i)),null}},a.prototype.getText=function(i){return this._writer.getText(i)},a.DEFAULT_FORMAT="yyyy/MM/dd",a.Formatters={},a.Default=a.getConverter(a.DEFAULT_FORMAT),a}(),Ss=v.isSafari?1:0,wt=function(a){function i(e,t){var o=a.call(this)||this;if(o._textCase=c.TextInputCase.DEFAULT,o._readOnly=!1,o._textReadOnly=!1,o._allowEmpty=!1,o._isMobile=v.isMobile(),o._isTablet=v.isTablet(),o._started=!1,o._dateConverter=yl.Default,o._boolConverter=Wo.Default,o._cellBounds=new Z,o._checkHangeul=!1,o._composing=!1,o._grid=e,o._options=e.editorOptions,o._parentElement=t,o._editor=o._createEditor(t),o._editor.className=i.EDITOR_CSS+o._getInputSelector(),o._container&&(o._container.className=i.CONTAINER_CSS),o._editor.$_owner=o,o._editIndex=e.getIndex(),o._editor){var r=e.container;r.$_addListener(o._editor,"focus",(function(n){this._grid.$_setEditFocused(!0,n)}).bind(o),!1),r.$_addListener(o._editor,"focusin",(function(n){this._grid.$_setEditFocused(!0,n)}).bind(o),!1),r.$_addListener(o._editor,"blur",(function(n){this._grid.$_setEditFocused(!1,n)}).bind(o),!1),r.$_addListener(o._editor,"focusout",(function(n){this._grid.$_setEditFocused(!1,n)}).bind(o),!1)}return o.setVisible(!1,!0),o.$_setEditorId(o._editor),o}return w(i,a),i.copyProc=function(e,t){if(!e.isDisabled()&&!e.editing){var o=e._grid.copyToClipboard(t,null);return o!=null&&(t.clipboardData?t.clipboardData.setData("text/plain",o):window.clipboardData.setData("Text",o)),t.preventDefault()}},i.initDefault=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var r=v.assign.apply(v,G([{}],t,!1));e.assignFrom(r),r=null},i.getEditorType=function(e){return typeof e=="string"?e:e?e.type:"line"},i.getEditorType2=function(e,t){return typeof e=="string"?e:e&&e.type?e.type:typeof t=="string"?t:t&&t.type?t.type:"line"},i.prototype._doDispose=function(){this.unprepare(),this._editor=v.detach(this._editor),this._container=v.detach(this._container),this._container=null,this._grid=null,this._controller=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasList",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(e){e!=this._emptyValue&&(this._emptyValue=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(e){e!=this._textCase&&(this._textCase=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._dateConverter=e?yl.getConverter(e):yl.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayChar",{get:function(){return this._todayChar},set:function(e){e!=this._todayChar&&(this._todayChar=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nowChar",{get:function(){return this._nowChar},set:function(e){e!=this._nowChar&&(this._nowChar=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,e?(this._saveBoolConverter||(this._saveBoolConverter=new Wo(e)),this._saveBoolConverter.format=e,this._boolConverter=this._saveBoolConverter):this._boolConverter=Wo.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>Ss&&parseInt(this._container.style.height)>Ss},enumerable:!1,configurable:!0}),i.prototype.setVisible=function(e,t){t===void 0&&(t=!1);var o=t?!e:this.visible;if(!e&&(this._container.style.width=Ss+"px",this._container.style.height=Ss+"px",v.isMobile())){var r=this._grid;if(r){var n=r.container._containerDom,s=xe(this._container);this._editor===s.activeElement&&n&&n.focus({preventScroll:!0})}else this._editor.blur()}e!=o&&this._doVisibleChanged(e)},i.prototype._doVisibleChanged=function(e){this.setEditorZIndex(e)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(e){var t=tt(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.readOnly=this._readOnly=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},enumerable:!1,configurable:!0}),i.prototype._setTextReadOnly=function(e){e!=this._textReadOnly&&(this._textReadOnly=e,this._changed())},Object.defineProperty(i.prototype,"allowEmpty",{get:function(){return this._allowEmpty},enumerable:!1,configurable:!0}),i.prototype._setAllowEmpty=function(e){e!=this._allowEmpty&&(this._allowEmpty=e,this._changed())},Object.defineProperty(i.prototype,"editing",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(e,t){return!1},i.prototype.applyOptions=function(e){e&&this.assignFrom(e)},i.prototype.setEditIndex=function(e){this._editIndex.assign(e)},i.prototype.setController=function(e){this._controller=e},i.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},i.prototype.unprepare=function(){},i.prototype.beginEdit=function(e,t){this._started||(this._started=this._doBeginEdit())&&(e&&this.clear(),t&&this.selectAll())},i.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},i.prototype.isEdited=function(){return!1},i.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},i.prototype.caretToLast=function(){},i.prototype.commit=function(){this._doCommit()},i.prototype.setReadOnly=function(e){this._editor.readOnly=this._readOnly=e},i.prototype.getEditValue=function(e,t){},i.prototype.getEditListItem=function(){},i.prototype.setEditValue=function(e){this._oldValue=e},i.prototype.setCellEditValue=function(e,t){!this.readOnly&&this._requestStart(t)&&(this.setEditValue(e),this._doChanged())},i.prototype.getEditText=function(){return""},i.prototype.selectAll=function(e){e===void 0&&(e=!1),this._grid.$_editFocused&&(!e&&v.isMobile()||this._selectAll())},i.prototype.clear=function(){var e=tt(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.value="")},i.prototype.setFocus=function(){var e=!v.isMobile();!this._grid.handler._draggable&&(!this._isMobile||!this.hasList)&&this._editor.focus({preventScroll:e})},i.prototype.setEditorTitle=function(e){},i.prototype.setBounds=function(e,t,o,r,n){},i.prototype.setCellBounds=function(e,t,o,r){this._cellBounds.set(e,t,o,r)},i.prototype.closeList=function(e){},i.prototype.dropDownList=function(e){},i.prototype.buttonClicked=function(e,t){},i.prototype.buttonDown=function(e,t){},i.prototype.buttonUp=function(e,t){},i.prototype.setButtonStyle=function(e,t,o,r,n){return!1},i.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=c.TextInputCase.DEFAULT,this._checkHangeul=!1},i.prototype.$_setEditorId=function(e){},i.prototype._changed=function(){},i.prototype.$_setController=function(e){this._controller=e},i.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},i.prototype._isDateEditor=function(){return!1},i.prototype._requestStart=function(e){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},i.prototype._valToStr=function(e){var t=this.editIndex,o="";try{if(e!==void 0||this._mask){var r=t.grid.dataSource.getField(t.dataField);if(r)switch(r.dataType){case c.ValueType.DATETIME:e&&(o=this._dateConverter.getText(e)),this._mask&&(o=this._mask.writeBuffer(o));break;case c.ValueType.BOOLEAN:o=this._boolConverter.toText(e);break;case c.ValueType.NUMBER:isNaN(e)||(o=v.toStr(e));break;case c.ValueType.OBJECT:var n=t.column._objectKey||r.objectKey;e&&(o=n?e[n]:e!=null&&typeof e=="object"?JSON.stringify(e):"");break;default:o=this._mask?this._mask.writeBuffer(e):e}else o=e}}catch{o=e}return o??""},i.prototype._strToVal=function(e){e=v.toStr(e);var t=this._editIndex,o=t.dataColumn&&this._textCase==c.TextInputCase.DEFAULT?t.dataColumn.textInputCase:this._textCase;try{var r=t.grid.dataSource.getField(t.dataField);if(r){var n=r.dataType;if(n==c.ValueType.DATETIME||e&&this._isDateEditor()&&n==c.ValueType.TEXT){var s=n==c.ValueType.DATETIME,l=null;return e&&e==this._nowChar&&(l=new Date),!l&&e&&e==this._todayChar&&(l=new Date).setHours(0,0,0,0),l||(this._mask&&(e=this._mask.getStripValue()),l=this._dateConverter.getDate(e)),s?!l||isNaN(l.getFullYear())?void 0:l:l?this._dateConverter.getText(l):void 0}if(n==c.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(e);if(n==c.ValueType.NUMBER)return parseFloat(e);n==c.ValueType.TEXT&&this._mask&&(e=this._mask.getStripValue())}return o===c.TextInputCase.UPPER?e&&e.toLocaleUpperCase():o===c.TextInputCase.LOWER&&e?e.toLocaleLowerCase():e}catch{return}},i.prototype._dispatchKeyDown=function(e){return this._controller,this._controller.onEditorKeyDown(this,e)},i.prototype._dispatchKeyPress=function(e){return this._controller,this._controller.onEditorKeyPress(this,e)},i.prototype._dispatchKeyUp=function(e){return this._controller,this._controller.onEditorKeyUp(this,e)},i.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},i.prototype._dispatchSearch=function(e){this._controller.onEditorSearch(this,e)},i.prototype._dispatchSearchCellButtonClick=function(e){return this._controller.onSearchCellButtonClick(this,e)},i.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},i.prototype._sendToParent=function(e,t,o){t===void 0&&(t=void 0);try{var r=v.isMac&&e.metaKey||!v.isMac&&e.ctrlKey;if(t==2){if(this._dispatchKeyPress(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0}else if(t==3){if(this._dispatchKeyUp(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0;try{var n=this._controller._grid,s=n.editOptions;if(s.maxLengthToNextCell){var l=s.skipReadOnly,u=n.activeTool,h=this.maxLength,d=this.editIndex.clone(),p=v.included(e.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!p&&!r&&!e.altKey&&n&&n.isEditing(d)&&h>0&&!this._composing&&e.keyCode>47){var f=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof pc&&this.maxLengthExceptComma){var g=this.getEditValue();isNaN(g)&&g!=null||(f=String(g))}if(f&&f.length>=h)return n.getBodyViewAt(d).spanRight(n.layoutManager,d),d.right(),l&&u._checkReadOnly(d)&&(u._skipReadOnly(d,1)||(d=this.editIndex.clone())),le.areEquals(d,this.editIndex)||u.setFocused(d,!0,!0),!0}}}catch(m){if(m instanceof Rt)throw m;return!0}}else if(this._dispatchKeyDown(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0;return!1}finally{}},i.prototype._commitListValue=function(e){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,e);var t=this._grid;if(t){var o=t.container._containerDom,r=xe(o);this._editor==r.activeElement&&o&&o.focus()}else this._editor.blur()},i.Unselected={},i.InvalidFormat={},i.EDITOR_CSS="rg-editor ",i.CONTAINER_CSS="rg-editor-container",i}(Mt),ry=function(){return{9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/}},hc=function(){function a(i,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions=ry(),this._tests=null,this._defBuffer=[],this._editor=i,e&&this.setOptions(e)}return a.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,null},Object.defineProperty(a.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(i){i!=this._includedFormat&&(this._includedFormat=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(i){i!=this._placeHolder&&(this._placeHolder=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editMask",{get:function(){return this._editMask},set:function(i){i!=this._editMask&&(this._editMask=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"definitions",{get:function(){return this._definitions},set:function(i){i!=this._definitions&&(this._definitions=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(i){i!=this._invalidFormatMessage&&(this._invalidFormatMessage=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(i){i!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"overWrite",{get:function(){return this._overwrite},set:function(i){i!=this._overwrite&&(this._overwrite=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(i){i!=this._allowEmpty&&(this._allowEmpty=i,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(i){i!=this._restrictNull&&(this._restrictNull=i,this._changed())},enumerable:!1,configurable:!0}),a.prototype.clickHandler=function(i){this.restrictNull&&this._moveCaret()},a.prototype.clearBuffer=function(i,e){i=arguments.length>0?i:0,e=arguments.length>1?e:this._tests.length;for(var t=i;t<e;t++)this._buffer[t]=this.$_getPlaceHolder(t),this._defBuffer[t]=""},a.prototype.writeBuffer=function(i,e){if(e===void 0&&(e=!1),i){e&&this.clearBuffer();for(var t=0,o=0,r=this._tests.length;t<r;t++)if(this._tests[t]&&this._tests[t]instanceof RegExp){for(var n=void 0;n=i[o++];)if(this._tests[t].test(n)){this._buffer[t]=n,this._defBuffer[t]=n;break}}}return this._buffer&&this._buffer.join("")},a.prototype.getStripValue=function(){var i=[],e=[];if(this._defBuffer.join("")=="")return null;if(this.includedFormat)for(var t=0,o=this._buffer.length;t<o;t++){var r=this._buffer[t];!this._tests[t]||this._tests[t].test(r)?i.push(r):r==this.$_getPlaceHolder(t)&&this._tests[t].test(" ")&&i.push(" ")}else for(t=0,o=this._buffer.length;t<o;t++)this._tests[t]&&this._tests[t]instanceof RegExp&&this._tests[t].test(this._buffer[t])&&(e.length>0&&(i=i.concat(e),e=[]),i.push(this._buffer[t]));return i.join("")},a.prototype.setOptions=function(i){if(typeof i=="string")this.$_parseMask(i);else if(i.definitions&&this.$_parseDefinitions(i.definitions),i.placeHolder&&(this._placeHolder=i.placeHolder),i.editMask&&this.$_parseMask(i.editMask),i.includedFormat!=null&&(this._includedFormat=i.includedFormat),i.invalidFormatMessage&&(this._invalidFormatMessage=i.invalidFormatMessage),i.allowEmpty!=null&&(this._allowEmpty=i.allowEmpty),i.showInvalidFormatMessage!=null&&(this._showInvalidFormatMessage=i.showInvalidFormatMessage),i.overwrite!=null&&(this._overwrite=i.overwrite),i.overWrite!=null&&(this._overwrite=i.overWrite),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},a.prototype.checkValid=function(){var i=[];if(this.allowEmpty){for(var e=0,t=this._tests.length;e<t;e++)i[e]=this.$_getPlaceHolder(e);if(i.join("")===this._buffer.join(""))return!0}for(e=0,t=this._tests.length;e<t;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},a.prototype._changed=function(){},a.prototype._moveCaret=function(i,e){for(var t=this._editor._editor,o=i=arguments.length>0?i:t.selectionStart,r=e=arguments.length>1?e:t.selectionEnd,n=i-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){o=n+1;break}o=n}for(n=e-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){r=n+1;break}r=n}if(o!=i||r!=e){for(n=o;n<=i&&!this._tests[n];n++)o++;for(n=r;n<=e&&!this._tests[n];n++)r++;return t.setSelectionRange(o,r),!0}return o!=i||r!=e},a.prototype.$_setCaret=function(i,e){this._editor._editor.setSelectionRange(i,e)},a.prototype.$_parseDefinitions=function(i){for(var e in i)typeof i[e]=="string"&&(this._definitions[e]=new RegExp(i[e]))},a.prototype.$_parseMask=function(i){var e=this._tests=[],t=this._definitions,o=i.split("");this._editMask=i,this._buffer=[];for(var r=0,n=o.length;r<n;r++)e.push(t[o[r]]),this._buffer.push(t[o[r]]?this.$_getPlaceHolder(r):o[r])},a.prototype.$_getPlaceHolder=function(i){return this._placeHolder&&this._placeHolder.length>i?this._placeHolder[i]:this._tests[i]?"_":this._editMask&&this._editMask.length>i?this._editMask[i]:"_"},a.prototype.$_seekPrev=function(i){for(;--i>=0&&!this._tests[i];);return Math.max(0,i)},a.prototype.$_seekNext=function(i){for(;++i<this._editMask.length&&!this._tests[i];);return Math.min(this._editMask.length,i)},a.prototype.$_shiftL=function(i,e){var t=this._editMask.length,o=this._buffer;if(i>=0){for(var r=i,n=this.$_seekNext(e);t>r;r++)if(this._tests[r]){if(!(t>n&&this._tests[r].test(o[n])))break;o[r]=o[n],this._defBuffer[r]=this._defBuffer[n],o[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}}},a.prototype.$_shiftR=function(i){for(var e,t,o=this._editMask.length,r=this._buffer,n=i,s=this.$_getPlaceHolder(i);o>n;n++)if(this._tests[n]){if(e=this.$_seekNext(n),t=r[n],this._defBuffer[n]=s,r[n]=s,!(o>e&&this._tests[e].test(t)))break;s=t}},a.prototype.keydown=function(i){var e=this._editor.editor;if(!e.readOnly){var t=i.which||i.keyCode,o=e.selectionStart,r=e.selectionEnd;if(t===46||t===8)o==r&&(o=t!==46?this.$_seekPrev(o):r=this.$_seekNext(o-1),r=t===46?this.$_seekNext(r):r),this.clearBuffer(o,r),!this._overwrite&&this.$_shiftL(o,r-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(t===39||t===35)return this._moveCaret();this._pStart=e.selectionStart}},a.prototype.keyPress=function(i){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var t,o=e.selectionStart,r=e.selectionEnd,n=i.which||i.keyCode;this.clearBuffer(o,r),o!==r&&this.$_shiftL(o,r-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(t=String.fromCharCode(n))&&(!this._overwrite&&this.$_shiftR(o),this._buffer[s]=t,this._defBuffer[s]=t,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},a.prototype.input=function(i){var e=this._editor.editor;if(!e.readOnly){var t=e.value;/[---]/.test(t)&&(e.value=e.value.replace(/[---]/g,""),this._pStart!=null&&e.setSelectionRange(this._pStart,this._pStart))}},a}(),cc=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e._maxLength=0,e._fontSize=0,e._modified=!1,e}return w(i,a),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){e!=this._maxLength&&(this._maxLength=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize=isNaN(e)?0:Math.max(0,e)},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._maxLength=0},Object.defineProperty(i.prototype,"readonly",{set:function(e){this._editor.readOnly=this._readOnly=e},enumerable:!1,configurable:!0}),i.prototype.isEdited=function(){return this._modified},i.prototype.setVisible=function(e,t){a.prototype.setVisible.call(this,e,t);var o=this._container.style;e?(o.border="",o.boxShadow=""):e||(o.border="none",o.boxShadow="none")},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e);var t=this._editor.style;v.isMobile()?t.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(t.fontSize=this.fontSize+"px");var o=e.valueColumn;if(o)switch(this._textCase==c.TextInputCase.DEFAULT?o.textInputCase:this._textCase){case c.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case c.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},i.prototype.getEditText=function(){return this._editor.value},i.prototype.setEditValue=function(e){a.prototype.setEditValue.call(this,e),this._editor.value=this._valToStr(e)},i.prototype.getEditValue=function(e,t){e===void 0&&(e=!0);var o=this._editField(),r=this._emptyValue;try{var n=o.dataType,s=this._editor.value;if(n==c.ValueType.TEXT)s||this._emptyValue===void 0||(s=this._emptyValue),(r=this._strToVal(s))===void 0&&(r="");else{if(n===c.ValueType.OBJECT){var l=this._editIndex.dataColumn.objectKey||o.objectKey,u=this._editIndex.item.getData(o.index)||{};return u[l]=s,u}if(v.isWhiteSpace(s))if(this._emptyValue!==void 0)r=this._strToVal(this._emptyValue);else switch(n){case c.ValueType.NUMBER:isNaN(this._oldValue)&&(r=NaN);break;case c.ValueType.DATETIME:this._oldValue===null&&(r=null);case c.ValueType.BOOLEAN:}else r=this._strToVal(s)}if(r===wt.InvalidFormat)return r;r=o.readValue(r)}catch(h){if(e)throw h;r=this._emptyValue}return r},i.prototype._selectAll=function(){var e=this._editor;if(e.select&&e.value){var t=e.value;e.value="",e.value=t,e.select()}},i.prototype._setSelectionRange=function(e,t){try{var o=this._editor;(!v.isMobile()||!this.hasList)&&o.selectionStart!=null&&o.setSelectionRange(e,t)}catch{v.log("setSelectionRange fail type => ".concat(this._editor.getAttribute("type")))}},i.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return v.isMobile()&&this.caretToLast(),!0},i.prototype._doEndEdit=function(){this._modified=!1},i.prototype._doCommit=function(){},i}(wt),bo=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"mask",{get:function(){return this._mask},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._editor.value},set:function(e){!this._editor||e==this._editor.value&&e==this._controller.getData(this._editIndex)||(this._editor.value=e,this._doChanged())},enumerable:!1,configurable:!0}),i.prototype.setMask=function(e){this._mask=null,e&&(this._mask=new hc(this,e))},i.prototype.setAlignment=function(e){this._container.style.textAlign="left"},i.prototype._createContainer=function(e){var t=e.createElement("div"),o=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),o.position="absolute",o.width="0px",o.height="0px",o.padding="0px",o.margin="0px",t},i.prototype._createEditor=function(e){var t=xe(e);this._container=this._createContainer(t),e.appendChild(this._container);var o="$$_rg_editor"+this.$_hash,r=t.createElement("label");r.setAttribute("for",o);var n=r.style;n.display="none",n.position="absolute",n.width=n.height="0px";var s=t.createElement("input");s.id=o,n=s.style,s.setAttribute("aria-hidden","true"),s.autocomplete="off",n.position="absolute",n.boxSizing="border-box",n.margin="0px",n.padding="0px 2px",n.wordWrap="normal",n.overflow="hidden",n.resize="none",n.border="none",n.outline="none",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n["-webkit-user-modify"]="read-write-plaintext-only",n["white-space"]="pre",n["-webkit-transform"]="translateZ(0)",s.tabIndex=-1,s.onkeydown=this._keyDownHandler.bind(this),s.onkeyup=this._keyUpHandler.bind(this),s.onkeypress=this._keyPressHandler.bind(this),s.oninput=this._inputHandler.bind(this),s.onpaste=this._pasteHandler.bind(this),s.oncopy=this._copyHandler.bind(this);var l=this._grid.container;return l.$_addListener(s,"compositionstart",this._compositionstartHandler.bind(this),!1),l.$_addListener(s,"compositionupdate",this._compositionupdateHandler.bind(this),!1),l.$_addListener(s,"compositionend",this._compositionendHandler.bind(this),!1),l.$_addListener(s,"text",this._textHandler.bind(this),!1),this._container.appendChild(s),this._container.appendChild(r),this._defMaxLength=s.maxLength>0?s.maxLength:1e6,s},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},i.prototype.applyOptions=function(e){a.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},i.prototype.caretToLast=function(){var e=v.toStr(this._editor.value).length;this._setSelectionRange(e,e)},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},i.prototype.setEditorZIndex=function(e){var t=this._editor.style,o=this._grid.displayOptions.baseZindex;e?t.zIndex=String(o+0):t.removeProperty("z-index")},i.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&this.text==="")&&(this._modified=!0,this._dispatchChange())},i.prototype.setBounds=function(e,t,o,r,n){v.setBounds(this._container,e,t,o,r),o==0||r==0?this._editor.style.width="100%":n>0&&(this._editor.style.height=Math.round(r-4)+"px",this._editor.style.width=n+"px")},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._editor,o=e.keyCode;if((v.isIE||v.isEdge)&&!this.visible&&e.ctrlKey&&o==90)return!1;if(v.isIE&&e.ctrlKey&&e.keyCode==86&&t.readOnly)return e.preventDefault(),this._pasteHandler(e),!1;if(v.isIE&&e.ctrlKey&&(e.keyCode==67||e.keyCode==45)&&this._editor.value=="")return e.preventDefault(),void xe(this._editor).execCommand("copy");switch(this._inputValue=t.value,o){case 8:case 46:this._sendToParent(e)||(!this.visible&&this._requestStart()?t.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(e.preventDefault(),e.stopImmediatePropagation(),this._mask.keydown(e),this._doChanged()):this.text=""):this._mask&&(e.preventDefault(),e.stopImmediatePropagation(),this._mask.keydown(e),this._doChanged()),o===8&&t.readOnly&&(e.preventDefault(),e.stopImmediatePropagation()));break;case 9:return!this._sendToParent(e);case 37:if(!this.visible||t.selectionEnd==0&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);if(t.readOnly&&v.isChrome)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 39:if(!this.visible||t.selectionEnd==t.value.length&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);if(t.readOnly&&v.isChrome)return!this._sendToParent(e);if(!(e.altKey||e.ctrlKey||e.shiftKey)&&this._mask&&this._mask.restrictNull){var r=t.selectionStart;this._mask._moveCaret(r+1,r+1)&&(e.preventDefault(),e.stopImmediatePropagation())}e.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(e);if(this._mask&&this._mask.restrictNull){var n=t.value?t.value.length-1:0;this._mask._moveCaret(n,n)&&(e.preventDefault(),e.stopImmediatePropagation())}e.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(e);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return e.preventDefault(),e.stopImmediatePropagation(),!this._sendToParent(e);case 229:this._sendToParent(e);break;default:return!this._sendToParent(e,null,!0)}return v.isFirefox?!e.ctrlKey&&!e.altKey&&o!==229&&o>=32&&(o<112||o>130)&&this._requestStart():v.isIE,!0}},i.prototype._keyUpHandler=function(e){if(!this.isDisabled()){var t=e.keyCode;switch(t!=8&&t!=46||v.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),e.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(e,3);break;default:this._sendToParent(e,3)}}},i.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var t=e.which||e.keyCode;this._sendToParent(e,2),v.isFirefox?e.ctrlKey||e.altKey||!(t==0||t>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=e.target.selectionStart,this._mask.keyPress(e),this._doChanged(),e.preventDefault()):e.preventDefault()):v.isMac&&e.metaKey&&(t===122||t===121)?e.preventDefault():v.isMac&&e.metaKey&&(t===99||t===118)||t>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=e.target.selectionStart,this._mask.keyPress(e),this._doChanged(),e.preventDefault()):e.preventDefault())}},i.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},i.prototype._compositionstartHandler=function(e){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},i.prototype._compositionendHandler=function(){this._composing=!1},i.prototype._compositionupdateHandler=function(){this._composing=!0},i.prototype._changeHandler=function(e){},i.prototype._inputHandler=function(e){this.isDisabled()||v.isIE&&!this._started||e.inputType!=="historyUndo"&&e.inputType!=="historyRedo"&&(this._mask&&this._mask.input(e),this._doChanged())},i.prototype._pasteHandler=function(e){if(!this.isDisabled()){var t=this._grid.pasteOptions;try{var o=void 0,r=(e.originalEvent||e).clipboardData;if((o=r?r.getData("text/plain"):window.clipboardData.getData("text"))!=null){if(this.visible){if(this._mask){e.preventDefault();var n=this._editor,s=n.value,l=n.selectionStart,u=n.selectionEnd;s=s.substr(0,l)+o+s.substr(u),n.value=this._mask.writeBuffer(s,!0)}return void this._doChanged()}e.preventDefault(),this._grid.pasteFromClipboard(o,e)}}catch(h){if(h instanceof Rt){if(t.throwValidationError)throw h}else if(h instanceof Ko)alert(h.message);else if(h)throw h}}},i.prototype._copyHandler=function(e){wt.copyProc(this,e)},i.prototype._getInputSelector=function(){return null},i}(cc),ny=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),Object.defineProperty(i.prototype,"inputCharacters",{get:function(){return this._inputCharacters},set:function(e){e!=this._inputCharacters&&(this._inputCharacters=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(e){e!=this._ignoreCharacters&&(this._ignoreCharacters=e)},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,a.prototype.initOptions.call(this)},i.prototype.initDefaultOptions=function(){},i.prototype._inputHandler=function(e){this.$_resetValue(),a.prototype._inputHandler.call(this,e)},i.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,a.prototype._keyDownHandler.call(this,e)},i.prototype._createEditor=function(e){var t=a.prototype._createEditor.call(this,e);return t.tabIndex=-1,t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_resetValue=function(){var e,t=this._editor,o=t.value;if(this.visible){var r;(e=this.inputCharacters)&&(r=new RegExp("[^"+e+"]","g")).test(o)&&(t.value=o=o.replace(r,""),this._pStart!=null&&t.setSelectionRange(this._pStart,this._pStart)),(e=this.ignoreCharacters)&&(r=new RegExp("["+e+"]","g")).test(o)&&(t.value=t.value.replace(r,""),this._pStart!=null&&t.setSelectionRange(this._pStart,this._pStart)),this._pStart=null}},i.INPUT_CSS="rg-text-editor",i}(bo),sy=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype._createEditor=function(e){var t=a.prototype._createEditor.call(this,e);return t.setAttribute("type","password"),t.tabIndex=-1,t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initDefaultOptions=function(){},i.prototype.prepare=function(){},i.INPUT_CSS="rg-password-editor",i}(bo),ay=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(e){e!=this._minHeight&&(this._minHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(e){e!=this._altEnterNewLine&&(this._altEnterNewLine=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),i.prototype.setAlignment=function(e){this._container.style.textAlign="left"},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},i.prototype.initDefaultOptions=function(){},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},i.prototype.setCellEditValue=function(e){a.prototype.setCellEditValue.call(this,e,!1)},i.prototype.setEditorZIndex=function(e){var t=this._editor.style,o=this._grid.displayOptions.baseZindex;e?t.zIndex=String(o+0):t.removeProperty("z-index")},i.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},i.prototype.$_resetBounds=function(){var e,t=v.getClientRect(this._container);this._height<0?(e=this._grid.getEditCellBounds(this,this._editIndex).height,e+=v.isMobile()?3:1):this._height>0&&(e=this._height);var o=t.cx,r=t.cy,n=t.width,s=Math.round(t.height);this._editor.scrollWidth>n&&(n=this._editor.scrollWidth+6),e?(this._editor.style.overflow="auto",s=e):this._editor.scrollHeight>s&&(s=this._editor.scrollHeight+6);var l=isNaN(this._minHeight)?0:this._minHeight;l>0&&(s=Math.max(s,l)),t=v.getClientRect(this._parentElement),n=Math.min(t.width,n),s=Math.min(t.height,s),o+n>t.width&&(o=t.width-n),r+s>t.height&&(r=t.height-s),v.setBounds(this._container,Math.max(o,0),Math.max(r,0),n,s)},i.prototype.$_createContainer=function(e){var t=e.createElement("div"),o=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),o.position="absolute",o.width="0px",o.height="0px",o.padding="0px",o.margin="0px",t},i.prototype._createEditor=function(e){var t=xe(e);this._container=this.$_createContainer(t),e.appendChild(this._container);var o="$$_rg_editor"+this.$_hash,r=t.createElement("label");r.setAttribute("for",o);var n=r.style;n.display="none",n.position="absolute",n.width=n.height="0px";var s=t.createElement("textarea");n=s.style,s.autocomplete="off",s.setAttribute("aria-hidden","true"),n.position="absolute",n.margin="0px",n.padding="0px",n.wordWrap="normal",n.overflow="hidden",n.resize="none",n.border="none",n.outline="none",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n["-webkit-user-modify"]="read-write-plaintext-only",n["white-space"]="pre",n["-webkit-transform"]="translateZ(0)",s.tabIndex=-1,s.onkeydown=this._keyDownHandler.bind(this),s.onkeyup=this._keyUpHandler.bind(this),s.onkeypress=this._keyPressHandler.bind(this),s.oninput=this._inputHandler.bind(this),s.onpaste=this._pasteHandler.bind(this),s.oncopy=this._copyHandler.bind(this);var l=this._grid.container;l.$_addListener(s,"compositionstart",this._compositionstartHandler.bind(this),!1),l.$_addListener(s,"compositionupdate",this._compositionupdateHandler.bind(this),!1),l.$_addListener(s,"compositionend",this._compositionendHandler.bind(this),!1),l.$_addListener(s,"text",this._textHandler.bind(this),!1),this._container.appendChild(s),this._container.appendChild(r);var u=this._dummyEditor=t.createElement("input");return(n=u.style).width="1px",n.height="1px",n.position="absolute",n.top="0px",n.zIndex="-1",n.border="none",u.ariaHidden="true",v.isWin&&this._container.appendChild(u),s},i.prototype.setBounds=function(e,t,o,r){v.setBounds(this._container,e,t,o,r),e>v.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},i.prototype._compositionstartHandler=function(e){this.isDisabled()||(this._composing=!0,this._requestStart())},i.prototype._compositionendHandler=function(){this._composing=!1},i.prototype._compositionupdateHandler=function(){this._composing=!0},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._editor,o=e.keyCode;if((v.isIE||v.isEdge)&&!this.visible&&e.ctrlKey&&o==90)return!1;if(v.isIE&&e.ctrlKey&&(e.keyCode==67||e.keyCode==45)&&this._editor.value=="")return e.preventDefault(),void xe(this._editor).execCommand("copy");switch(o){case 8:case 46:this._sendToParent(e)||!this.visible&&this._requestStart()&&(e.preventDefault(),e.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(e);case 37:if(!this.visible||t.selectionEnd==0&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);break;case 39:if(!this.visible||t.selectionEnd==t.value.length&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(e);break;case 13:var r=e.ctrlKey||v.isMac&&e.metaKey;if(this.altEnterNewLine){if(!(e.altKey&&this.editing||e.shiftKey))return!this._sendToParent(e)}else if(!(r&&this.editing||e.shiftKey))return!this._sendToParent(e);if((this.altEnterNewLine&&e.altKey||!this.altEnterNewLine&&r)&&!e.shiftKey){e.preventDefault(),e.stopImmediatePropagation();var n=t.value;if(n)try{this._grid.container._dummyFocus=!0,v.isWin&&this._dummyEditor&&this._dummyEditor.focus();var s=t.selectionEnd;n=n.substring(0,s)+`\r
`+n.substring(s),t.value=n,t.setSelectionRange(s+1,s+1),v.isWin&&t.focus(),this._doChanged()}finally{this._grid.container._dummyFocus=!1}}break;case 27:case 113:case 45:return e.preventDefault(),e.stopImmediatePropagation(),!this._sendToParent(e);case 229:break;default:return this._sendToParent(e,null,!0),!0}return e.keyCode,!0}},i.prototype._keyUpHandler=function(e){if(!this.isDisabled()){var t=e.keyCode;switch(t!=8&&t!=46||v.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),e.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(e,3);break;default:this._sendToParent(e,3)}}},i.prototype._keyPressHandler=function(e){var t=e.which||e.keyCode;this.isDisabled()||(v.isMac&&e.metaKey&&(t===122||t===121)?e.preventDefault():v.isMac&&e.metaKey&&(t===99||t===118)||t>=32&&!this._requestStart()&&e.preventDefault())},i.prototype._inputHandler=function(e){this.isDisabled()||e.inputType!=="historyUndo"&&e.inputType!=="historyRedo"&&this._doChanged()},i.prototype._pasteHandler=function(e){if(!this.isDisabled())if(this.visible)this._doChanged();else{e.preventDefault();var t=this._grid.pasteOptions;try{var o=void 0,r=(e.originalEvent||e).clipboardData;(o=r?r.getData("text/plain"):window.clipboardData.getData("text"))!=null&&this._grid.pasteFromClipboard(o,e)}catch(n){if(n instanceof Rt){if(t.throwValidationError)throw n}else if(n instanceof Ko)alert(n.message);else if(n)throw n}}},i.prototype._copyHandler=function(e){wt.copyProc(this,e)},i.INPUT_CSS="rg-multiline-editor",i}(cc),dc=/[---]/g,pc=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._regxAll=/[\d]|,|\.|\-|\+|e|E/,o._regxPos=/[\d]|,|\.|\+|e|E/,o._regxInt=/[\d]|,|\+|\-/,o._regxPosInt=/[\d]|,|\+/,o._regx=o._regxAll,o._decLen=void 0,o._decimalFormatter=void 0,o._isMultiple=!1,o._active=!1,o._stepChanged=!1,o._editor.style["ime-mode"]="disabled",o._editor.style["-webkit-ime-mode"]="disabled",o._editor.style["-moz-ime-mode"]="disabled",o._editor.style["-ms-ime-mode"]="disabled",o}return w(i,a),Object.defineProperty(i.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(e){e!=this._positiveOnly&&(this._positiveOnly=e,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(e){e!=this._integerOnly&&(this._integerOnly=e,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editFormat",{get:function(){return this._editFormat},set:function(e){if(e!=this._editFormat)if(this._editFormat=e,e){var t=this._decimalFormatter=new ji(e);t&&(this._decSep=t.separator||ye.messages.decimalSeparator,this._groupSep=t.groupSep||ye.messages.thousandsSeparator,this._decLen=Math.max(t.minDigits,t.maxDigits))}else this._decimalFormatter=void 0,this._decSep=ye.messages.decimalSeparator,this._groupSep=ye.messages.thousandsSeparator,this._decLen=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(e){e!=this._multipleChar&&(this._multipleChar=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"addString",{get:function(){return this._addString},set:function(e){e!=this._addString&&(this._addString=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(e){e!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(e){e!=this._maxIntegerLength&&(this._maxIntegerLength=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(e){e!=this._blankWhenSpace&&(this._blankWhenSpace=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"step",{get:function(){return this._step},set:function(e){e!==this._step&&e!=0&&(this._step=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(e){this._max=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(e){this._min=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(e){e!==this._delay&&(this._delay=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(e){this._setTextReadOnly(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showStepButton",{get:function(){return this._showStepButton},set:function(e){this._showStepButton=e},enumerable:!1,configurable:!0}),i.prototype.setMask=function(e){this._mask=null},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},i.prototype.initDefaultOptions=function(){var e=this._grid;e&&wt.initDefault(this,Re.editor.numberCellEditor,e.editorOptions.numberCellEditor)},i.prototype.hasButton=function(e,t){return t.showStepButton!=null&&t.showStepButton},Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 2},enumerable:!1,configurable:!0}),i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},i.prototype._inputHandler=function(e){e.data&&e.data.match(dc)?e.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(e),a.prototype._inputHandler.call(this,e))},i.prototype._keyPressHandler=function(e){if(!v.isFirefox||!e.ctrlKey&&e.charCode!==0){var t=!0,o=String.fromCharCode(e.keyCode||e.charCode);(!this._regx.test(o)||e.target.value&&e.target.value.indexOf(this._decSep)>=0&&o==this._decSep)&&(this._multipleChar&&o===this._multipleChar||(t=!1,(!this.blankWhenSpace||o!==" ")&&e.preventDefault()));var r=e.target.selectionStart,n=e.target.selectionEnd,s=e.target.value,l=new RegExp("\\"+this._groupSep,"g"),u=s?s.split(""):[];if(u.splice(r,n-r,o===this._multipleChar?this._addString:o),u=u.join("").replace(l,""),this.maxLength>0&&t&&this.maxLengthExceptComma&&s){var h=u&&u[0]==="-";h&&(u=u.substr(1)),u.length>this.maxLength&&e.preventDefault(),u=h?"-"+u:u}if(this._maxIntegerLength>0&&o!==this._decSep){var d=Math.floor(this.$_strToNum(u));if(!isNaN(d)){var p=Math.abs(d).toString().length;this._maxIntegerLength<p&&e.preventDefault()}}this._isMultiple=o==this._multipleChar,a.prototype._keyPressHandler.call(this,e)}else a.prototype._keyPressHandler.call(this,e)},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=e.keyCode||e.charCode;if(this._isMultiple=!1,(t===8||t===46)&&this.editing&&this._editFormat){var o=e.target,r=o.value,n=r.length,s=r&&r.split(""),l=o.selectionStart,u=o.selectionEnd;if(l!==u)return a.prototype._keyDownHandler.call(this,e);var h=r[t===8?l-1:l];if((h===this._groupSep||h===this._decSep)&&!(h===this._decSep&&l===(t===8?r.length:r.length-1))){s.splice(t===8?l-2:l+1,1),o.value=s.join(""),this.$_editFormatting(e),r=o.value;var d=n-(t===8?r.length:n);o.setSelectionRange(l-d,u-d),this._doChanged(),e.preventDefault()}}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._compositionstartHandler=function(e){this.isDisabled()||this._requestStart()},i.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),a.prototype._dispatchChange.call(this))},i.prototype.setEditValue=function(e){var t=parseFloat(e);isNaN(t)?this._editor.value="":this._editFormat&&typeof t=="number"?this._editor.value=this.$_formatNum(t,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=t},i.prototype.getEditValue=function(e,t){e===void 0&&(e=!0),this.$_resetValue();var o=this._emptyValue;try{var r=this._editor.value;if(r=r&&r.trim()){var n=new RegExp("\\"+this._groupSep,"g"),s=new RegExp("[\\"+this._decSep+"]+","g");r=(r=(r=(r=(r=(r=r.replace(n,"")).replace(s,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}o=r?parseFloat(r):o??void 0}catch(l){if(e)throw l}return o},i.prototype.setCellEditValue=function(e){!this.readOnly&&this._requestStart()&&(typeof e!="string"&&typeof e!="number"||(e=this.$_strToNum(e),this.setEditValue(e),this._doChanged()))},i.prototype.buttonDown=function(e,t){var o,r=t.target;v.stopEvent(t),r.$_editButtonType==="up"?o=this.step:r.$_editButtonType==="down"&&(o=-this.step),o&&(this.$_changeStepValue(o),this._active=!0,setTimeout((function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval((function(){this.$_changeStepValue(o)}).bind(this),this._delay))}).bind(this),300))},i.prototype.buttonUp=function(e,t){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},i.prototype.setButtonStyle=function(e,t,o,r,n){var s=e.style;o?(t===0?s.top="0px":s.removeProperty("top"),t===0?s.removeProperty("bottom"):s.bottom="0px",s.right=r+"px",s.height="9px"):(s.top="0px",s.removeProperty("bottom"),s.right=r+n*t+"px",s.height="100%"),s.width=n+"px";var l=t===0?"rg-button-step-up":"rg-button-step-down";return e.className=l,e.$_editButtonType=t===0?"up":"down",!0},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.setFocus=function(){!this._stepChanged&&a.prototype.setFocus.call(this)},i.prototype.$_strToNum=function(e){e=""+e;var t=new RegExp("\\"+this._decSep,"g"),o=new RegExp("\\"+this._groupSep,"g"),r=e[0]==="-";e=e.replace(o,"").replace(t,".").replace(/\+/g,"");var n=parseFloat(e);return isNaN(n)?NaN:r?-Math.abs(n):n},i.prototype.$_formatNum=function(e,t,o){var r=e,n=r<0||r==0&&1/r==-1/0?"-":"",s=Math.max(t,o);s=isNaN(s)?2:s;var l=parseInt(r=Math.abs(+r||0).toFixed(s))+"",u=l.length>3?l.length%3:0;if(r.indexOf(".")>=0){for(var h=r.split(".")[1].split("");h.length>0&&h[h.length-1]==="0"&&h.length>t;)h.splice(h.length-1,1);r=h.join(""),s=h.length}return n+(u?l.substr(0,u)+this._groupSep:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(s?this._decSep+r:"")},i.prototype.$_editFormatting=function(e){var t=e.target.value,o=t&&t[0]==="-",r=t&&t[t.length-1]==this._decSep,n=e.target.selectionStart,s=e.target.selectionEnd;this._isMultiple&&this._addString&&(t=t.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString),n+=this._addString.length,s+=this._addString.length);var l,u=t.split(this._decSep);u.length>1&&(u.length=2,u[1]=u[1].substr(0,this._decimalFormatter._maxDigits),t=u.join(this._decSep)),l=u.length==2?Math.min(u[1].length,this._decLen!=null?this._decLen:99):0;var h=this.$_strToNum(t);if(!isNaN(h)){if(this.maxLength>0||this.maxIntegerLength>0){h=Math.abs(h);var d=String(h).split(".");this.maxIntegerLength>0&&(d[0]=d[0].substr(0,this.maxIntegerLength));var p=d.join(".");this.maxLength>0&&(p=p.substr(0,this.maxLength)),h=parseFloat(p),o&&(h=-h)}t=this.$_formatNum(h,l,this._decimalFormatter.maxDigits);var f=(t=r&&this._decLen&&t.indexOf(this._decSep)<0?t+this._decSep:t).length,g=e.target.value.length;Math.abs(f-g)==1&&(f>g?(n++,s++):t.indexOf(this._decSep)>=n-1&&(n--,s--)),e.target.value=t,e.target.setSelectionRange(n,s)}},i.prototype.$_resetValue=function(){if(this.visible){var e=this._editor,t=e.selectionStart,o=e.selectionEnd,r=e.value?e.value.length:0;e.value=e.value.replace(dc,"").trim(),(e.value?e.value.length:0)==r?e.setSelectionRange(t,o):e.setSelectionRange(o,o)}},i.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},i.prototype.$_changeStepValue=function(e){var t=this.getEditValue();t=t==null||t==isNaN(t)?0:t,t+=e,this._max!=null&&(t=Math.min(this._max,t)),this._min!=null&&(t=Math.max(this._min,t)),this.setEditValue(t),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},i.INPUT_CSS="rg-number-editor",i}(bo),ly=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-editor-marquee"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e.style.pointerEvents="none"},i.prototype._doDraw=function(e){},i.prototype.spread=function(){var e=this._dom,t=e.style,o=e.parentElement.getBoundingClientRect();t.left=o.left+"px",t.top=-o.top+"px",t.width=o.width+"px",t.height=o.height+"px",this._setClassName(e)},i}(yo),ml=function(a){function i(e,t){var o=a.call(this,e,t)||this;if(o._isMobile){var r=xe(t);o._marquee=new ly(r)}return o}return w(i,a),i.prototype.hasButton=function(e,t){return!0},Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasList",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._showMarquee=function(e){this._marquee&&(e.appendChild(this._marquee._dom),this._marquee.spread())},i.prototype._centerPopup=function(e,t){var o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=tt(e).innerHeight;e.appendChild(t),t.style.left=(r.width-o.width)/2+"px",t.style.top=(n-o.height)/2-r.top+"px"},i.prototype._closeMarquee=function(){this._marquee&&v.detach(this._marquee._dom)},i.prototype._isMarquee=function(e){return this._marquee&&e===this._marquee._dom},Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(e){this._setTextReadOnly(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(e){this._setAllowEmpty(e)},enumerable:!1,configurable:!0}),i}(bo);c.DropDownPosition=void 0,(ac=c.DropDownPosition||(c.DropDownPosition={})).BUTTON="button",ac.EDITOR="editor",c.DropDownSortStyle=void 0,(_l=c.DropDownSortStyle||(c.DropDownSortStyle={})).NONE="none",_l.ASCENDING="ascending",_l.DESCENDING="descending",c.DropDownValueLabel=void 0,(Es=c.DropDownValueLabel||(c.DropDownValueLabel={})).VALUE="value",Es.LABEL="label",Es.VALUE_LABEL="valueLabel",Es.LABEL_VALUE="labelValue";var bl=function(a){function i(e){var t=a.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropDownCount=8,t._caseSensitive=!1,t._partialMatch=!1,t._sortStyle=c.DropDownSortStyle.NONE,t._items=null,t._itemIndex=-1,t._dropDownPosition=c.DropDownPosition.BUTTON,t._dropDownWidth=-1,t._displayLabels=null,t._separator=null,t._itemColumned=!1,t._viewGridInside=!1,t._trimLabelText=!0,t._initCount=0,t._moreItemCount=25,t._selected=!1,t._clickHandler=(function(o){var r=o.currentTarget,n=v.getChildIndex(r);n>=0&&(this._itemIndex=n,this._selected=!0,this.fireEvent(i.CLOSE_UP,!0))}).bind(t),t._nextClickHandler=(function(o){var r=o.currentTarget;this.$_addMoreItems(r)}).bind(t),t._container=e,t._element=t._createList(e.doc),t}return w(i,a),i.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,v.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){e!=this._minWidth&&(this._minWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!=this._maxWidth&&(this._maxWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){e!=this._dropDownCount&&(this._dropDownCount=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(e){e!=this._caseSensitive&&(this._caseSensitive=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(e){e!=this._partialMatch&&(this._partialMatch=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortStyle",{get:function(){return this._sortStyle},set:function(e){e!=this._sortStyle&&(this._sortStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(e){if(this._items=[],e)for(var t=0,o=e.length;t<o;t++)this._items.push({label:e[t].label,value:e[t].value,item:e[t].item,index:t})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){e!=this._dropDownPosition&&(this._dropDownPosition=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(e){e!=this._dropDownWidth&&(this._dropDownWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(e){e!==this._displayLabels&&(this._displayLabels=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(e){e!=this._separator&&(this._separator=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(e){e!=this._itemColumned&&(this._itemColumned=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||v.isSlotMode()},set:function(e){e!=this._viewGridInside&&(this._viewGridInside=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(e){e!=this._trimLabelText&&(this._trimLabelText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"initCount",{get:function(){return this._initCount},set:function(e){e!=this._initCount&&(this._initCount=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(e){e!=this._moreItemCount&&(this._moreItemCount=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreText",{get:function(){return this._moreText},set:function(e){e!=this._moreText&&(this._moreText=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this.initCount==0?this._items&&this._items.length:this._element.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueIndex",{get:function(){var e=this._items,t=this._itemIndex;return e&&t>=0&&t<e.length?e[t].index:-1},set:function(e){if(e=Math.max(-1,e),this._itemIndex=-1,e>=0){for(var t=0,o=this._items.length;t<o;t++)if(this._items[t].index==e){this._itemIndex=e;break}}this.listing&&this._refreshItems()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),i.prototype.setItemIndex=function(e,t,o){var r=this._element.childNodes;if((e=Math.max(-1,e))<this._items.length&&(t||e!=this._itemIndex||e>=r.length-1)){if(o&&e>=r.length-1){var n=r[r.length-1];if(n.isMoreButton){var s=e-(r.length-1);s=(Math.floor(s/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(n,s)}}this._itemIndex=e,this.listing&&this._refreshItems(),this._selected=e>=0}},i.prototype.setZIndex=function(e){this._element.style.zIndex=String(e)},i.prototype.show=function(e,t,o,r,n){this._containerElement=this.viewGridInside?this._container._container:e,this._sortStyle!=c.DropDownSortStyle.NONE&&this.$_sortItems(),this._show(t,o,r,n)},i.prototype.hide=function(){v.detach(this._element),this._containerElement=null},i.prototype.currentIsMore=function(e){var t=this._element.childNodes[e??this._itemIndex];return t&&t.isMoreButton},i.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var e=this._element.childNodes[this._itemIndex];this.$_addMoreItems(e,0)}},i.prototype._changed=function(){},i.prototype._createList=function(e){var t=e.createElement("div");return t.className="rg-dropdownlist",t.id="rg-dropdown-list-"+Jr.$$_LIST_ID++,t.setAttribute("role","listbox"),t},i.prototype.$_sortItems=function(){this._sortStyle==c.DropDownSortStyle.ASCENDING?this._items.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}):this._items.sort(function(e,t){return e.label>t.label?-1:e.label<t.label?1:0})},i.prototype._show=function(e,t,o,r){var n=this._element;if(n){var s=n.style;s.position="absolute",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="auto",s.removeProperty("width"),s.removeProperty("height"),this._firstChild=null,v.clearChildren(n),v.disableSelection(n),this._containerElement.appendChild(n),this._cellWidth=o,this._editBounds=r,this._buildItems(),this.$_resetHeight(),this._resetWidth(o),this.$_resetPosition(e,t,o,r),this._selected=!1}},i.prototype._getListElement=function(){return this._element},i.prototype.$_resetHeight=function(){var e=this._getListElement();if(this._firstChild){var t=tt(this._firstChild),o=v.getClientRect(this._firstChild),r=this._firstChild.currentStyle||t.getComputedStyle(this._firstChild),n=parseInt(r.marginTop.replace("px",""));n=isNaN(n)?0:n;var s=parseInt(r.marginBottom.replace("px",""));s=isNaN(s)?0:s;var l=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;e.style.height=(o.height+n)*l+4+s+"px"}else e.style.height="10px"},i.prototype._resetWidth=function(e){var t=this._element,o=v.getClientRect(t),r=this._dropDownWidth,n=r,s=t.offsetWidth?t.offsetWidth+(v.ieOld&&t.style.boxSizing==="border-box"?17:0):0;n<=0?(t.style.removeProperty("width"),n=n<0?e:10):t.style.width=n+"px";var l=0;if(this._firstChild){var u=tt(this._firstChild),h=this._firstChild.currentStyle||u.getComputedStyle(this._firstChild),d=parseInt(h.marginLeft.replace("px",""));d=isNaN(d)?0:d;var p=parseInt(h.marginRight.replace("px",""));p=isNaN(p)?0:p;for(var f=t.childNodes,g=0;g<f.length;g++)l=Math.max(l,f[g].scrollWidth);l+=t.offsetWidth-t.clientWidth+d+p}r<0&&(l=Math.max(l,n));var m=v.getBrowserSize();n=l=Math.min(l,m.width),v.ieOld&&(r>=0||l>n)&&(n+=20),n<o.width?t.style.overflowX="hidden":t.style.overflowX="auto",t.style.width=Math.max(n,s)+"px"},i.prototype.$_resetPosition=function(e,t,o,r){var n=xe(this._element),s=tt(this._element),l=v.getBrowserSize(),u=v.getClientRect(this._containerElement),h=v.getClientRect(this._container._container),d=l.width,p=l.height,f=v.getClientRect(this._element),g=s.pageXOffset||n.documentElement.scrollLeft,m=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(p-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(d-=18),e+=h.left-u.left,t+=h.top-u.top,(v.ieTen||v.ieOld||v.ieLeg)&&(e+=n.documentElement.scrollLeft,t+=n.documentElement.scrollTop),t+f.height>p+m&&r&&(t=t-r.height-f.height)<0&&(t=p-f.height-2),this._dropDownPosition!=c.DropDownPosition.EDITOR?e=Math.max(0,e+o-f.width):e+f.width>d+g&&(e=d-f.width),!v.isMobile()&&this.viewGridInside&&r&&(t=r.bottom-u.top+2,(u.bottom<r.bottom+f.height||p+m<r.bottom+f.height)&&(t=r.top-f.height-u.top-2)),v.isMobile()&&!v.isTablet()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,t+=n.documentElement.offsetTop),v.move(this._element,Math.max(0,e),Math.max(0,t))},i.prototype._resetItems=function(e,t,o,r){v.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(o),this.$_resetPosition(e,t,o,r)},i.prototype._buildItems=function(e,t){e===void 0&&(e=0),t===void 0&&(t=0);var o,r=xe(this._element),n=0,s=function(R,k){var D=k&&k.value?k.value.toString():"",F=r.createElement("span");return F.style.whiteSpace="pre",F.innerHTML=D?v.htmlEncode(D):"&nbsp;",F.tabIndex=-1,F.className="rg-dropdown-value",v.disableSelection(F),R.appendChild(F),F},l=(function(R,k){var D=k&&k.label?k.label.toString():"";D=this._trimLabelText?D.trim():D;var F=r.createElement("span");return!this._trimLabelText&&(F.style.whiteSpace="pre"),F.innerHTML=D?v.htmlEncode(D):"&nbsp;",F.tabIndex=-1,F.className="rg-dropdown-label",v.disableSelection(F),R.appendChild(F),F}).bind(this),u=function(R,k){var D=r.createElement("span");D.style.whiteSpace="pre",D.innerHTML=k?v.htmlEncode(k):"&nbsp;",D.tabIndex=-1,D.className="rg-dropdown-seperator",v.disableSelection(D),R.appendChild(D)},h=function(R){var k=v.getTextLength(R.textContent);k>n&&(o=R,n=k)},d=this._items,p=t||(this._element.children.length>0?this.moreItemCount:this.initCount);if(d&&!(d.length<1)){for(var f=e,g=d.length;f<g;f++){if(this._initCount&&f-e>=p&&f<g){var m=r.createElement("div"),b=m.style;b.position="relative",b.cssFloat="none",b.paddingTop="1px",b.paddingBottom="1px",b.paddingLeft="2px",b.paddingRight="2px",b.whiteSpace="nowrap",b.cursor="pointer",b.textAlign="center",v.disableSelection(m),m.nextIndex=f,m.onclick=this._nextClickHandler,m.isMoreButton=!0,m.className="rg-dropdown-more",l(m,{label:this.moreText}),this._element.appendChild(m);break}var C=d[f],x=r.createElement("div");x.setAttribute("role","option"),x.id=this._element.id+"-"+f.toString();var E=x.style;E.position="relative",E.cssFloat="none",E.paddingTop="1px",E.paddingBottom="1px",E.paddingLeft="2px",E.paddingRight="2px",E.whiteSpace="nowrap",E.cursor="default",x.className=f==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",f===this._itemIndex?x.setAttribute("aria-selected","true"):x.removeAttribute("aria-selected"),v.disableSelection(x),this._element.appendChild(x),f==0&&(this._firstChild=x),x.onclick=this._clickHandler;var S=null;if(this._templateCallback)this._templateCallback(x,C);else{switch(this.displayLabels){case c.DropDownValueLabel.LABEL:l(x,C);break;case c.DropDownValueLabel.VALUE:s(x,C);break;case c.DropDownValueLabel.LABEL_VALUE:S=l(x,C),u(x,this._separator),s(x,C);break;case c.DropDownValueLabel.VALUE_LABEL:S=s(x,C),u(x,this._separator),l(x,C)}S&&this._itemColumned&&h(S)}}if(this._itemColumned&&o){var P=Math.ceil(o.getBoundingClientRect().width);for(f=0,g=this._element.childNodes.length;f<g;f++)(S=this._element.childNodes[f].firstChild).style.display="inline-block",S.style.width=P+"px"}}},i.prototype.$_addMoreItems=function(e,t){var o=e.nextIndex;e.parentNode&&e.parentNode.removeChild(e),this._buildItems(o,t),this._resetWidth(this._cellWidth),this.fireEvent(i.EDITOR_FOCUS)},i.prototype._refreshItems=function(){for(var e=this._element.childNodes,t=0;t<e.length;t++)(o=e[t]).className=t==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",t==this._itemIndex?o.setAttribute("aria-selected","true"):o.removeAttribute("aria-selected"),t==this._itemIndex&&this.fireEvent(i.ACTIVE_DESCENDENT,o.id);var o,r=this._itemIndex;if(r>=0&&r<e.length)if((o=e[r]).offsetTop<this._element.scrollTop)this._element.scrollTop=o.offsetTop;else{var n=o.offsetTop+v.getSize(o).height;n>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight)}},i.prototype.$_search=function(e,t){t===void 0&&(t=!1);try{if(this._items&&this._items.length>0&&e){for(var o=this._items,r=o.length,n=this._caseSensitive?e:e.toLowerCase(),s=[],l=0;l<r;l++){if(p=o[l].label.toString()){if(p=this._caseSensitive?p:p.toLowerCase(),this._partialMatch){for(var u="",h=0;h<p.length;h++){var d=v.hangulToChosung(p[h]);u+=v.hangulToChosung(n[h]).org?d.org:d.cho}if(u==n)return void this.setItemIndex(l,t,!0)}else if(p==n)return void this.setItemIndex(l,t,!0)}s.push(p)}for(l=0;l<r;l++){var p=s[l];if(this._partialMatch){var f=!1;for(h=0;h<n.length;h++){var g=v.hangulToChosung(p[h]);if(!(g.org&&g.org==n[h]||g.cho&&g.cho==n[h])){f=!1;break}f=!0}if(f)return void this.setItemIndex(l,t,!0)}else if(p&&p.indexOf(n)==0)return void this.setItemIndex(l,t,!0)}for(l=0;l<r;l++)if(p=s[l],this._partialMatch){var m=v.hangulToChosungAll(p),b=v.hangulToChosungAll(n),C=m.indexOf(b);if(u=p.substr(0,C),~C){h=0;for(var x=C,E=n.length;h<E;h++,x++)d=v.hangulToChosung(p[x]),u+=v.hangulToChosung(n[h]).org?d.org:d.cho}if(u&&u.indexOf(n)>0)return void this.setItemIndex(l,t,!0)}else if(p&&p.indexOf(n)>0)return void this.setItemIndex(l,t,!0)}this.setItemIndex(-1)}finally{t&&(this._selected=!0)}},i.CLOSE_UP="onDropDownListCloseUp",i.EDITOR_FOCUS="onDropDownListEditorFocus",i.ACTIVE_DESCENDENT="onDropDownListActiveDescendant",i}(Mt),Jr=function(a){function i(e,t){var o=a.call(this,e,t)||this;o._trimLabelText=!0,o._lookup=!1,o._labeling=!1,o._domain=null,o._closing=!1,o._selectedIndex=-1,o._globalMouseHandler=(function(n){var s=n.target;if(this._isMarquee(s))this.closeUp(!1);else{for(;s;){if(s==this._list._element)return;s=s.parentElement}this.closeUp(!0)}}).bind(o);var r=o._list=o._createDropDown(e.container);return o._setEditorAria("aria-owns",r._element.id),o._setEditorAria("aria-expanded","false"),o._setEditorAria("aria-haspopup","true"),o._setEditorAria("role","combobox"),o._list.addListener(o),o}return w(i,a),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(e){(e=v.makeArray(e,!0))?this._values=e.map(function(t){return t!=null?String(t):t}):this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(e){this._labels=e?e.slice():[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(e){this._displayLabels=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(e){this._domainOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(e){this._dropDownWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){this._dropDownCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(e){this._itemSortStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(e){this._caseSensitive=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(e){this._partialMatch=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){this._commitOnSelect=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){this._dropDownWhenClick=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(e){this._trimLabelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(e){this._separator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(e){this._itemColumned=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listCallback",{get:function(){return this._listCallback},set:function(e){this._listCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(e){this._templateCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(e,t){var o=this;if(e===void 0&&(e=!1),t===void 0&&(t=!0),!this.readOnly&&!this.listing&&!this._closing){t&&this._refreshItems(!1,!1,!0);var r=xe(this._container),n=tt(this._container);if(e||this._items&&this._items.length>0){var s=this._list,l=this._options,u=r.documentElement,h=v.getClientRect(this._container);s.viewGridInside=l.viewGridInside,s.displayLabels=this.displayLabels,s.separator=this.separator,s.itemColumned=this.itemColumned,s.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,s.caseSensitive=this._caseSensitive,s.partialMatch=this._partialMatch,s.dropDownCount=this._dropDownCount,s.dropDownWidth=this._dropDownWidth,s.dropDownPosition=this._dropDownPosition,s.sortStyle=this._itemSortStyle,s.valueIndex=this._selectedIndex,s.trimLabelText=this._trimLabelText,s._templateCallback=function(){if(o._templateCallback)return function(p,f){return o._templateCallback(o._grid.handler,o.editIndex.toProxy(),p,f.value,f.label,f.item)}}();var d=this._grid.displayOptions;return s.setZIndex(d.baseZindex+3),this._isMobile&&!this._isTablet?(this._showMarquee(u),s.viewGridInside=!1,s.show(u,0,0,0,null),this._centerPopup(u,s._element)):s.show(r.documentElement,h.cx+1,h.cy+h.height,this._cellBounds.width,v.getClientRect(this._editor)),s.$_search(this._editor.value,!0),this._setEditorAria("aria-expanded","true"),!v.isSlotMode()&&n.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.closeUp=function(e,t){if(this.listing){this._closing=!0;var o=this._isMobile&&!this._isTablet;try{var r=tt(this._container);!v.isSlotMode()&&r.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var n=void 0;if(e&&this._list.selected&&(n=this._list.valueIndex)>=0&&this._items&&this._items.length>n){this._selectedIndex=this._list.valueIndex;var s=this._items[n].value,l=this._labeling?this._items[n].label:this._items[n].value;this._editor.value=l,o?this._commitListValue(s):(n==this._saveIndex&&l==this._saveText||this._dispatchChange(),t&&this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=c.DropDownValueLabel.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=c.DropDownPosition.BUTTON,this._dropDownCount=8,this._itemSortStyle=c.DropDownSortStyle.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._listCallback=null,this._templateCallback=null,this._tempItems=null,this._viewGridInside=!1,this._setEditorAria("aria-activedescendant",null)},i.prototype.initDefaultOptions=function(){var e=this._grid;e&&wt.initDefault(this,Re.editor.dropdownCellEditor,e.editorOptions.dropdownCellEditor)},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems(!1,!1,!1)},i.prototype.setEditValue=function(e){var t=this,o=-1,r=function(d,p){var f;a.prototype.setEditValue.call(t,d?((f={})[d]=p,f):p)};this._value=e;var n=this._editIndex.dataColumn,s=n.getField(),l=n.objectKey||s.objectKey;if(e=l&&e?e[l]:e,this._lookup){var u=this._domain;if(u){var h=o=u.keys?u.keys.indexOf(e):-1;h>=0&&u.values&&u.values.length>h&&u.values[h]}else o=this._editIndex.dataColumn.getLookupIndex(e);this._labeling?r(l,u?o>=0&&u.values&&u.values.length>o?u.values[o]:e:o>=0?this._editIndex.dataColumn.getLookupLabel(e):e):r(l,e)}else this._values&&this._labeling&&this._labels?r(l,this._labels[this._values.indexOf(e)]||e):r(l,e);this._selectedIndex=o},i.prototype.isEdited=function(){var e=a.prototype.isEdited.call(this);return e&&this.domainOnly&&(e=this.$_getEditValue(!1)!==void 0),e},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._setEditorAria=function(e,t){t?this._editor.setAttribute(e,t):this._editor.removeAttribute(e)},i.prototype._createDropDown=function(e){return new bl(e)},i.prototype.setCellEditValue=function(e,t){a.prototype.setCellEditValue.call(this,e,t)},i.prototype.getEditValue=function(e,t){return e===void 0&&(e=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(e,t)},i.prototype.getEditListItem=function(){var e=this._selectedIndex;if(this.isEdited()||!(e<0))return this._list.items&&e>=0&&e<this._list.items.length?this._list.items[e].item:void 0},i.prototype.setBounds=function(e,t,o,r,n){a.prototype.setBounds.call(this,e,t,o,r,n)},i.prototype._createEditor=function(e){return a.prototype._createEditor.call(this,e)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(e){a.prototype._compositionstartHandler.call(this,e)},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list,o=t.itemIndex;switch(e.keyCode){case 8:case 46:if(!(!e.ctrlKey&&!e.shiftKey&&this.domainOnly&&this.allowEmpty)){if(!e.ctrlKey&&!e.shiftKey&&this.textReadOnly)return this._requestStart(),e.preventDefault(),!0}break;case 32:if(this.listing&&t.currentIsMore(o))return t.addMoreItems(),e.preventDefault(),!0;break;case 13:if(this.listing&&t.currentIsMore(o))return t.addMoreItems(),e.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(e);break;case 27:if(this.closeUp(!1,!1))return e.preventDefault(),!0;break;case 40:if(!e.shiftKey&&e.altKey&&!this.listing)return this._requestStart(),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(t.itemCount-1,o+1)),e.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(t.itemCount-1,o+t.dropDownCount)),e.preventDefault(),!0;break;case 38:if(e.altKey&&this.listing)return this.closeUp(!1,!1),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,o-1)),e.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,o-t.dropDownCount)),e.preventDefault(),!0}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._keyPressHandler=function(e){this.isDisabled()||(a.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault())},i.prototype._inputHandler=function(e){this.isDisabled()||(this.textReadOnly&&(e.target.value=this._oldValue||""),a.prototype._inputHandler.call(this,e))},i.prototype._pasteHandler=function(e){this.isDisabled()||a.prototype._pasteHandler.call(this,e)},i.prototype._copyHandler=function(e){this.isDisabled()||a.prototype._copyHandler.call(this,e)},i.prototype._requestStart=function(e){return!!a.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():e!==!1&&this.dropDown(),!0)},i.prototype._doChanged=function(){this._selectedIndex=-1,a.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},i.prototype.dropDownList=function(e){this.dropDown(e)&&this._setEditorAria("aria-expanded","true")},i.prototype.closeList=function(e){this.closeUp(e,!1),this._setEditorAria("aria-expanded","false")},i.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1,!1):this.dropDown()},i.prototype.$_setItems=function(e,t,o){this._items=[];for(var r=0,n=e.length;r<n;r++)this._items.push({value:e[r],label:t&&t.length>r?t[r]:e[r],item:o&&o[r]})},i.prototype._refreshItems=function(e,t,o){var r,n=this,s=function(){return n.displayLabels!==c.DropDownValueLabel.VALUE&&n._labels&&n._labels.length>=n._values.length},l=this.editIndex,u=l.item,h=function(C){if(C&&C.list){var x=[],E=[],S=[],P=C.value||"value",R=C.label||"label";C.list.forEach(function(k){x.push(k[P]),E.push(k[R]!=null?k[R]:k[P]),S.push(k)}),n.$_setItems(n._values=x,n._labels=E,S)}n._labeling=s()};if(o&&this._listCallback&&(r=this._listCallback(this._grid.handler,this.editIndex.toProxy())),r)this._lookup=!1,this._domain=null,r instanceof Promise?(this._items=null,r.then(function(C){h(C),n.dropDown(!1,!1)})):h(r);else if(this._values&&(this._values.length>0||t))this.$_setItems(this._values,this._labels,null),this._labeling=s();else if(l.dataColumn&&l.item&&(l.dataRow>=0||ai(u.itemState))){var d=l.dataColumn;if(d.lookupSource){for(var p=d.lookupKeyFieldIds,f=[],g=0;g<p.length-1;g++)f.push(u.getData(p[g]));var m=d.lookupSource.getTextDomain(f);m&&m.values&&m.values.length>0&&(this.$_setItems(m.keys,m.values,m.listItem),this._labeling=!0,this._lookup=!0,this._domain=m)}else d.values&&d.values.length>0&&(this.$_setItems(d.values,d.labels,d.listItem),this._labeling=s(),this._lookup=!0)}if(e&&this.listing){this._list.items=this._items;var b=v.getClientRect(this._container);this._list._resetItems(b.cx+1,b.cy+b.height,this._cellBounds.width,v.getClientRect(this._editor))}},i.prototype.$_getEditValue=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);var o=this.text,r=bo.prototype.getEditValue.call(this,e,t),n=this._editIndex.dataColumn,s=this._selectedIndex,l=s>=0,u=n.getField(),h=u.dataType===c.ValueType.OBJECT&&(n.objectKey||u.objectKey),d=h&&r?r[h]:r;if(this._lookup){if(this._domain){if(this._labeling&&(d=(p=l?s:this._domain.values?this._domain.values.indexOf(o):-1)>=0&&this._domain.keys&&this._domain.keys.length>p?this._domain.keys[p]:d),this.domainOnly&&d&&(!this._domain.keys||this._domain.keys.indexOf(d)<0))return wt.Unselected}else if(this._labeling&&(d=l?n.getLookupValue(s):n.getSourceValue(o)||(h?r[h]:r)),this.domainOnly&&d&&(!n.values||n.values.indexOf(d)<0))return wt.Unselected}else{var p;if(this._labeling&&(p=l?s:this._labels?this._labels.indexOf(o):-1)>=0&&p<this._values.length&&(d=this._values[p]),this.domainOnly&&d&&(!this._values||this._values.indexOf(d)<0))return wt.Unselected}return h?(r[h]=d,r):d},i.prototype.setActiveDescendant=function(e){this._setEditorAria("aria-activedescendant",e)},i.prototype.onDropDownListCloseUp=function(e,t){this.closeUp(t,!0),!v.isMobile()&&this.setFocus()},i.prototype.onDropDownListEditorFocus=function(){this.setFocus()},i.prototype.onDropDownListActiveDescendant=function(e,t){this.setActiveDescendant(t)},i.INPUT_CSS="rg-list-editor",i.$$_LIST_ID=0,i}(ml),uy=function(a){function i(e){var t=a.call(this,e)||this;return t._selectItemIndices=[],t._acceptText=null,t._cancelText=null,t._showButtons=!1,t._showAllCheck=!1,t._acceptClickHandler=(function(o){this.fireEvent(i.CLOSE_UP_2,!0)}).bind(t),t._cancelClickHandler=(function(o){this.fireEvent(i.CANCEL,!1)}).bind(t),t._checkClickHandler=(function(o){o.stopImmediatePropagation();var r=o.currentTarget,n=r.parentElement;if(n){var s=v.getChildIndex(n),l=r.checked;this.$_changeCheckIndex(n,s,l,!0)}}).bind(t),t._allCheckClickHandler=(function(o){if(o.stopImmediatePropagation(),o.eventPhase==2&&o.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(o.eventPhase==2&&o.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}).bind(t),t._divClickHandler=(function(o){v.stopEvent(o,!0),o.currentTarget.firstElementChild.click()}).bind(t),t}return w(i,a),Object.defineProperty(i.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(e){this._selectItemIndices=[],e!=null&&(this._selectItemIndices=e.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!1,configurable:!0}),i.prototype.changeCheckIndex=function(e,t,o){var r=this._listElement.childNodes;if(e>=0&&e<r.length){for(var n=r[e],s=n.getElementsByTagName("input"),l=void 0,u=0,h=s.length;u<h;u++)if(s[u].type=="checkbox"){l=s[u];break}l&&(l.checked=t??!l.checked,this.$_changeCheckIndex(n,e,l.checked,o))}},i.prototype.$_changeCheckIndex=function(e,t,o,r){var n=this._selectItemIndices;if(!(t<0||t>=this._items.length)){var s=this._items[t].index;o?n.indexOf(s)<0&&n.push(s):n.indexOf(s)>=0&&n.splice(n.indexOf(s),1),e.className="rg-multicheck-item"+(o?" rg-multicheck-select":""),e.setAttribute("aria-selected",o?"true":"false"),this._selected=!0,this.$_changeAllCheck(),r&&this.fireEvent(i.CHECK_CLICK)}},i.prototype._createList=function(){var e=this._container.doc,t=e.createElement("div");t.className="rg-multicheck",t.id="rg-dropdown-list-"+Jr.$$_LIST_ID++,t.setAttribute("role","listbox");var o=e.createElement("div");o.className="rg-multicheck-allcheck",this._allCheckElement=o,o.style.paddingLeft="2px",v.disableSelection(o),t.appendChild(o);var r=e.createElement("div");r.className="rg-multicheck-list",this._listElement=r,t.appendChild(r);var n=e.createElement("div");return n.style.textAlign="center",n.style.whiteSpace="nowrap",n.className="rg-multicheck-button",this._buttonElement=n,n.style.margin="2px",v.disableSelection(n),t.appendChild(n),t},i.prototype._getListElement=function(){return this._listElement},i.prototype.setZIndex=function(e){var t=this._element.style;t.zIndex=String(e),(t=this._listElement.style).zIndex=String(e)},i.prototype.$_toggleAllCheck=function(){for(var e=this._listElement.childElementCount,t=this._allCheck.checked,o=0;o<e;o++)this.changeCheckIndex(o,t,!1);this.fireEvent(i.CHECK_CLICK)},i.prototype.$_changeAllCheck=function(){if(this._showAllCheck){for(var e=!0,t=this._listElement.children,o=0;o<t.length;o++){var r=t[o].firstElementChild;e=e&&r.checked}this._allCheck.checked=e}},i.prototype._show=function(e,t,o,r){var n=this._element;if(n){var s=n.style;s.position="absolute",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="visible",s.removeProperty("width"),s.removeProperty("height"),(s=this._listElement.style).position="relative",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="auto",(s=this._buttonElement.style).position="relative",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.marginLeft="0px",s.marginRight="0px",this._firstChild=null,v.clearChildren(this._listElement),v.disableSelection(this._listElement),this._containerElement.appendChild(n),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(o),this.$_resetPosition(e,t,o,r),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort(function(l,u){return l-u})[0]),this._selected=!1}},i.prototype._resetWidth=function(e){a.prototype._resetWidth.call(this,e);var t=this._element,o=Math.floor(this._buttonElement.getBoundingClientRect().width),r=t.getBoundingClientRect().width;isNaN(o)||(r=Math.max(r,o)),t.style.width=r+"px"},i.prototype._resetItems=function(e,t,o,r){v.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(o),this.$_resetPosition(e,t,o,r)},i.prototype._buildItems=function(){var e,t=this._container.doc,o=0,r=(function(S,P,R){var k=P?P.value.toString():"",D=t.createElement("label");return D.style.whiteSpace="pre",D.innerHTML=k?v.htmlEncode(k):"&nbsp;",D.htmlFor=R&&R.id,D.tabIndex=-1,D.className="rg-dropdown-value",v.disableSelection(D),S.appendChild(D),D}).bind(this),n=(function(S,P,R){var k=P?P.label.toString():"";k=this._trimLabelText?k.trim():k;var D=t.createElement("label");return!this._trimLabelText&&(D.style.whiteSpace="pre"),D.innerHTML=k?v.htmlEncode(k):"&nbsp;",D.htmlFor=R&&R.id,D.tabIndex=-1,D.className="rg-dropdown-label",v.disableSelection(D),S.appendChild(D),D}).bind(this),s=(function(S,P){var R=t.createElement("span");R.style.whiteSpace="pre",R.style.pointerEvents="none",R.innerHTML=P?v.htmlEncode(P):"&nbsp;",R.tabIndex=-1,R.className="rg-dropdown-separator",v.disableSelection(R),S.appendChild(R)}).bind(this),l=(function(S){var P=v.getTextLength(S.textContent);P>o&&(e=S,o=P)}).bind(this),u=this._items;if(u&&!(u.length<1)){for(var h=0,d=u.length;h<d;h++){var p=u[h],f=t.createElement("div");f.setAttribute("role","option"),f.id=this._element.id+"-"+h.toString();var g=f.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="default";var m=this._selectItemIndices.indexOf(u[h].index)>=0;f.className="rg-multicheck-item"+(m?" rg-multicheck-select":""),v.disableSelection(f),this._listElement.appendChild(f),h==0&&(this._firstChild=f),f.onclick=this._divClickHandler;var b=t.createElement("input");b.id="$multiCheck_item_"+i.$_checkId++,b.type="checkBox",b.onclick=this._checkClickHandler,b.checked=m,f.setAttribute("aria-selected",m?"true":"false"),f.appendChild(b);var C=null;if(this._templateCallback){var x=document.createElement("div");x.style.display="inline-block",f.appendChild(x),this._templateCallback(x,p)}else switch(this.displayLabels){case c.DropDownValueLabel.LABEL:n(f,p,b);break;case c.DropDownValueLabel.VALUE:r(f,p,b);break;case c.DropDownValueLabel.LABEL_VALUE:C=n(f,p,b),s(f,this.separator),r(f,p,b);break;case c.DropDownValueLabel.VALUE_LABEL:C=r(f,p,b),s(f,this.separator),n(f,p,b)}C&&this.itemColumned&&(l(C),f._span=C)}if(this.itemColumned&&e){var E=Math.ceil(e.getBoundingClientRect().width);if(E>0)for(h=0,d=this._listElement.childNodes.length;h<d;h++)(C=this._listElement.childNodes[h]._span)&&(C.style.display="inline-block",C.style.width=E+"px")}}},i.prototype.setButtonOptions=function(e,t,o,r,n){this._acceptText=e,this._cancelText=t,this._showButtons=o,this._showAllCheck=r,this._allCheckText=n,this.$_buildButtons()},i.prototype.$_buildButtons=function(){var e=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",v.clearChildren(this._buttonElement);var t=e.createElement("label"),o=t.style;t.innerHTML=this._acceptText,t.onclick=this._acceptClickHandler,t.className="rg-multicheck-accept",o.cursor="pointer",v.disableSelection(t),this._buttonElement.appendChild(t),o=(t=e.createElement("label")).style,t.innerHTML=this._cancelText,t.onclick=this._cancelClickHandler,t.className="rg-multicheck-cancel",o.marginLeft="2px",o.cursor="pointer",v.disableSelection(t),this._buttonElement.appendChild(t);var r=this._allCheckElement;if(r.onclick=this._allCheckClickHandler,v.clearChildren(r),this._showAllCheck){r.style.display="";var n=e.createElement("input");n.type="checkbox",n.id="$multiCheck_item_"+i.$_checkId++,n.onclick=this._allCheckClickHandler,this._allCheck=n,r.appendChild(n);var s=e.createElement("label");s.innerHTML=this._allCheckText,s.htmlFor=n.id,s.tabIndex=-1,v.disableSelection(s),r.appendChild(s),this.$_changeAllCheck()}else r.style.display="none"}},i.prototype._refreshItems=function(){for(var e=this._listElement.childNodes,t=-1,o=0;o<e.length;o++){t=o<this._items.length?this._items[o].index:-1;var r=e[o];o===this._itemIndex?(v.addClassName(r,"rg-multicheck-selectitem"),this.fireEvent(bl.ACTIVE_DESCENDENT,r.id)):v.removeClassName(r,"rg-multicheck-selectitem")}if((t=this._itemIndex)>=0&&t<e.length)if((r=e[t]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=r.offsetTop;else{var n=r.offsetTop+v.getSize(r).height;n>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=n-this._listElement.clientHeight)}},i.CLOSE_UP_2="onMultiCheckListCloseUp",i.CANCEL="onMultiCheckListCancel",i.CHECK_CLICK="onMultiCheckListCheckClick",i.$_checkId=0,i}(bl),hy=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._showButtons=!0,o._showAllCheck=!1,o._setEditorAria("aria-multiselectable","true"),o}return w(i,a),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(e){this._showButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"acceptText",{get:function(){return this._acceptText||ye.messages.checkListAcceptText},set:function(e){this._acceptText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelText",{get:function(){return this._cancelText||ye.messages.checkListCancelText},set:function(e){this._cancelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allCheckText",{get:function(){return this._allCheckText||ye.messages.checkListAllCheckText},set:function(e){this._allCheckText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(e){this._showAllCheck=e},enumerable:!1,configurable:!0}),i.prototype._createDropDown=function(e){return new uy(e)},i.prototype.setMask=function(e){this._mask=null},i.prototype.dropDown=function(e,t){var o=this;if(e===void 0&&(e=!1),t===void 0&&(t=!0),!this.readOnly&&!this.listing&&!this._closing){t&&this._refreshItems(!1,!1,!0);var r=xe(this._container),n=tt(this._container);if(e||this._items&&this._items.length>0){var s=this._list,l=this._options;this._selectedIndices=function(p,f,g){if(!f)return[];var m=f.split(g);return p.map(function(b,C){if(m.includes(b.value))return C}).filter(function(b){return b!=null})}(this._items,this._value,this._editIndex.dataColumn.valueSeparator)||[],s.viewGridInside=l.viewGridInside,s.displayLabels=this.displayLabels,s.separator=this.separator,s.itemColumned=this.itemColumned,s.items=this._items;var u=v.getClientRect(this._container);this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,s.caseSensitive=this.caseSensitive,s.dropDownCount=this.dropDownCount,s.dropDownWidth=this.dropDownWidth,s.dropDownPosition=this.dropDownPosition,s.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),s.sortStyle=this.itemSortStyle,s.valueIndices=this._selectedIndices.slice(),s.trimLabelText=this.trimLabelText,s._templateCallback=function(){if(o._templateCallback)return function(p,f){return o._templateCallback(o._grid.handler,o.editIndex.toProxy(),p,f.value,f.label,f.item)}}();var h=this._grid.displayOptions;if(s.setZIndex(h.baseZindex+3),this._isMobile&&!this._isTablet){var d=r.documentElement;s.viewGridInside=!1,this._showMarquee(d),s.show(d,0,0,0,null),this._centerPopup(d,s._element)}else s.show(r.documentElement,u.cx+1,u.cy+u.height,this._cellBounds.width,v.getClientRect(this._editor));return!v.isSlotMode()&&n.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.getCheckValues=function(e,t,o){for(var r=[],n=0,s=e.length;n<s;n++)e[n]>=0&&e[n]<t.length&&r.push(this._labeling&&!o?t[e[n]].label:t[e[n]].value);return r},i.prototype.closeUp=function(e,t){if(this.listing){this._closing=!0;try{var o=this._list,r=this.editIndex&&this.editIndex.dataColumn,n=tt(this._container);if(!v.isSlotMode()&&n.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),o.hide(),e&&o.selected){if(this._selectedIndices=o.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(r.valueSeparator),!v.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var s=this.getCheckValues(this._selectedIndices,this._items,!0).join(r.valueSeparator);this._commitListValue(s)}else this._dispatchChange(),t&&this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1},i.prototype.initDefaultOptions=function(){var e=this._grid;e&&wt.initDefault(this,Re.editor.multiCheckCellEditor,e.editorOptions.multiCheckCellEditor)},i.prototype.applyOptions=function(e){a.prototype.applyOptions.call(this,e)},i.prototype.setEditValue=function(e){var t=this,o=[],r=-1,n=this._editIndex.dataColumn,s=n.getField(),l=n.objectKey||s.objectKey,u=function(g){wt.prototype.setEditValue.call(t,g),t._editor.value=g??""};l&&e&&(e=e[l]);var h=v.isArray(e)?e:e?e.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=e,this._lookup){var d=this._domain;if(d)for(var p=0,f=h.length;p<f;p++)(r=d.keys.indexOf(h[p]))>=0&&o.push(r<d.values.length?d.values[r]:h[p]);this._labeling?u(d?o.join(this._editIndex.dataColumn.valueSeparator):this._editIndex.dataColumn.getLookupLabel(e)):u(e)}else if(this._values){for(p=0,f=h.length;p<f;p++)(r=this._values.indexOf(h[p]))>=0&&o.push(this._labels&&r>=0&&this._labels.length>r?this._labels[r]:h[p]);this._labeling&&this._labels?u(o.join(this._editIndex.dataColumn.valueSeparator)):u(e)}else u(e)},i.prototype.setCellEditValue=function(e,t){a.prototype.setCellEditValue.call(this,e,t)},i.prototype.getEditValue=function(e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),this.isEdited()||this._list.selected?this.$_getEditValue(e,t):this._value},i.prototype.getEditListItem=function(){var e=this;if(this.isEdited()||!(this._selectedIndices.length<0)){var t=this._list.items.map(function(o,r){if(e._selectedIndices.includes(r))return o&&o.item}).filter(function(o){return o!=null});return t&&t.length>0?t:void 0}},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list;return e.ctrlKey&&e.keyCode==65&&this.listing?(e.preventDefault(),t._allCheck.checked=!t._allCheck.checked,t.$_toggleAllCheck(),!0):e.keyCode===32&&this.listing?(t.changeCheckIndex(t.itemIndex,null,!0),e.preventDefault(),!0):a.prototype._keyDownHandler.call(this,e)}},i.prototype._keyPressHandler=function(e){a.prototype._keyPressHandler.call(this,e),this._list._selected=!1},i.prototype._inputHandler=function(e){a.prototype._inputHandler.call(this,e),this._list._selected=!1},i.prototype.$_getEditValue=function(e,t){function o(b,C,x,E,S){var P=[],R=C&&C.split(S.valueSeparator);if(R&&R.length>0)for(var k=0,D=R.length;k<D;k++)E.indexOf(R[k])>=0&&E.indexOf(R[k])<x.length?P.push(x[E.indexOf(R[k])]):(x.indexOf(R[k])>=0||!b.domainOnly)&&P.push(R[k]);return P}e===void 0&&(e=!1),t===void 0&&(t=!1);var r=this._strToVal(this.text),n=bo.prototype.getEditValue.call(this,e,t),s=this._editIndex.dataColumn,l=s.getField(),u=l.dataType===c.ValueType.OBJECT&&(s.objectKey||l.objectKey),h=u?n[u]:n,d=this._selectedIndices.slice(),p=[],f=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(f)for(var g=0,m=d.length;g<m;g++)d[g]<this._domain.keys.length&&p.push(this._domain.keys[d[g]]);else r&&(p=o(this,r,this._domain.keys,this._domain.values,s));h=p.join(s.valueSeparator)}}else if(this._labeling&&(h=f?s.getLookupValues(d):s.getSourceValues(r))===void 0&&(h=n),this.domainOnly&&h){if(!s.values)return wt.Unselected;for(g=(h=v.isArray(h)?h:h&&h.split?h.split(s.valueSeparator):[h]).length-1;g>=0;g--)s.values.indexOf(h[g])<0&&h.splice(g,1)}}else{if(this._labeling){if(f)for(g=0,m=d.length;g<m;g++)d[g]<this._values.length&&p.push(this._values[d[g]]);else r&&(p=o(this,r,this._values,this._labels,s));h=p.join(s.valueSeparator)}if(this.domainOnly&&h){if(!this._values)return wt.Unselected;for(g=(h=v.isArray(h)?h:h&&h.split?h.split(s.valueSeparator):[h]).length-1;g>=0;g--)this._values.indexOf(h[g])<0&&h.splice(g,1)}}return h=v.isArray(h)?h.join(s.valueSeparator):h,u?(n[u]=h,n):h},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.onMultiCheckListCloseUp=function(e,t){this.closeUp(t,!0),!this._isMobile&&this.setFocus()},i.prototype.onMultiCheckListCheckClick=function(e){this._editor.value=this.getCheckValues(e._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=e._selectItemIndices.slice(),this._saveIndices=e._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},i.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},i.INPUT_CSS="rg-multicheck-editor",i}(Jr),fc=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._searchLength=1,o._searchDelay=1e3,o._useCtrlEnterKey=!1,o._useEnterKey=!1,o._initCount=0,o._moreItemCount=25,o._reInquery=!0,o._timer=void 0,o._editor.setAttribute("aria-autocomplate","list"),o.assignFrom(Re.editor.searchCellEditor),o}return w(i,a),Object.defineProperty(i.prototype,"searchLength",{get:function(){return this._searchLength},set:function(e){this._searchLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(e){this._searchDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(e){this._useCtrlEnterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(e){this._useEnterKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"initCount",{get:function(){return this._initCount},set:function(e){this._initCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(e){this._moreItemCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"moreText",{get:function(){return this._moreText||ye.messages.searchEditorMoreText},set:function(e){this._moreText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"reInquery",{get:function(){return this._reInquery},set:function(e){this._reInquery=e},enumerable:!1,configurable:!0}),i.prototype.fillItems=function(e,t,o,r){if(this.listing&&e==this.getEditText()){if(r&&!t){t=[],o=[];var n=r.value||"value",s=r.label||"label";r.list.forEach(function(l){t.push(l[n]),o.push(l[s]||l[n])})}return this.values=t,this.labels=o,this._tempItems=r&&r.list,this._refreshItems(!0,!0,!1),this._list.$_search(this._editor.value,!0),!0}return!1},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this.initCount=0,this.moreItemCount=25},i.prototype.initDefaultOptions=function(){var e=this._grid;e&&wt.initDefault(this,Re.editor.searchCellEditor,e.editorOptions.searchCellEditor)},i.prototype.$_setItems=function(e,t){a.prototype.$_setItems.call(this,e,t,this._tempItems),(!this.values||this.values.length<=0)&&(this.values=e,this.labels=t)},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=e.keyCode==13;if(t&&(t=e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),t&&this.editing){e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer();var o=this.getEditText();return o&&o!=this._searchKey&&(this._searchKey=o,this._dispatchSearch(o)),!0}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._inputHandler=function(e){this.isDisabled()||(a.prototype._inputHandler.call(this,e),this.$_search())},i.prototype._doEndEdit=function(){a.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},i.prototype.$_getEditValue=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);var o=this.text,r=bo.prototype.getEditValue.call(this,e,t),n=this._selectedIndex,s=n>=0;if(this._labeling){var l=s?n:this._labels?this._labels.indexOf(o):-1;l>=0&&l<this._values.length&&(r=this._values[l])}return this.domainOnly&&r&&(!this._values||this._values.indexOf(r)<0)?wt.Unselected:r},i.prototype.dropDown=function(e){var t=this._list;return t&&(t.initCount=this.initCount,t.moreItemCount=this.moreItemCount,t.moreText=this.moreText),a.prototype.dropDown.call(this,!0)},i.prototype.buttonClicked=function(e){if(this.listing)this.closeUp(!1,!1);else{this.dropDown();var t=this.getEditText(),o=this._dispatchSearchCellButtonClick(t);o&&typeof o=="object"&&(o.values||o.list)&&this.fillItems(t,o.values,o.labels,o)}},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_search=function(){var e=this.getEditText();e&&e.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},i.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setTimeout((function(){var e=this.getEditText();e&&e!=this._searchKey&&(this._searchKey=e,this.$_stopTimer(),this._dispatchSearch(e,!0))}).bind(this),this._searchDelay))},i.prototype.$_stopTimer=function(){this._timer&&clearTimeout(this._timer)},i.INPUT_CSS="rg-search-editor",i}(Jr),cy=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._values=null,o._items=null,o._labels=null,o._sortStyle=c.DropDownSortStyle.NONE,o._itemIndex=-1,o._displayLabels=null,o._separator=null,o._itemColumned=!1,o._trimLabelText=!0,o.$_selectChanged=null,o._handled=!1,o._globalKeyDownHandler=(function(r){var n=tt(this._container);if(!(r.target instanceof n.HTMLTableCellElement))return this._keyDownHandler(r)}).bind(o),o}return w(i,a),i.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,a.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(e,t){return e==null||e},i.prototype._createEditor=function(e){var t=xe(e);this._container=this._createContainer(t),e.appendChild(this._container);var o=t.createElement("select"),r=o.style;return o.setAttribute("aria-hidden","true"),r.position="absolute",r.boxSizing="border-box",r.margin="0px",r.padding="0px",r.wordWrap="normal",r.overflow="hidden",r.resize="none",r.border="none",r.outline="none",r.left="0px",r.top="0px",r.width="100%",r.height="100%",this.$_selectChanged=(function(n){var s=n.target;this._itemIndex!==s.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}).bind(this),o.addEventListener("change",this.$_selectChanged),this._container.appendChild(o),o},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},i.prototype.initDefaultOptions=function(){},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._refreshItems(),this._resetPosition()},i.prototype.setEditValue=function(e){a.prototype.setEditValue.call(this,e),this._itemIndex=-1;for(var t=this._editor.options,o=0,r=t.length;o<r;o++)t[o].value===e?(this._itemIndex=o,t[o].selected=!0):t[o].selected=!1},i.prototype.prepare=function(){var e=tt(this._container);this._handled||(!v.isSlotMode()&&e.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},i.prototype.unprepare=function(){var e=tt(this._container);!v.isSlotMode()&&e.removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=e.keyCode,o=v.isIE&&this.visible;switch(t){case 40:if(e.altKey)return this._requestStart(),!0;if(o)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(o)return!1}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._resetPosition=function(){var e=this._grid.getEditCellBounds(this,this._editIndex);e.x--,e.y--,this.setBounds(e.x,e.y,0,0,0)},i.prototype._refreshItems=function(e,t){t===void 0&&(t=!1);var o=this.editIndex,r=o.item;if(this._values&&(this._values.length>0||t))this.$_setItems(this._values,this._labels);else if(o.dataColumn&&o.item&&(o.dataRow>=0||ai(r.itemState))){var n=o.dataColumn;if(n.lookupSource){for(var s=n.lookupKeyFieldIds,l=[],u=0;u<s.length-1;u++)l.push(r.getData(s[u]));var h=n.lookupSource.getTextDomain(l);h&&h.values&&h.values.length>0&&this.$_setItems(h.keys,h.values)}else n.values&&n.values.length>0&&this.$_setItems(n.values,n.labels)}},i.prototype.$_setItems=function(e,t){this._items=[];for(var o=this._editor,r=o.options,n=xe(o),s=r.length-1;s>=0;s--)r.remove(s);s=0;for(var l=e.length;s<l;s++){var u=n.createElement("option");u.value=e[s],u.text=t&&t.length>s?t[s]:e[s],this._items.push({value:u.value,label:u.text}),o.options.add(u,null)}},i.prototype.getEditValue=function(){return this.$_getEditValue()},i.prototype.$_getEditValue=function(){return this._editor.value},i.INPUT_CSS="rg-nlist-editor",i}(bo),dy=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){throw new Error("Method not implemented.")},i.prototype.getText=function(e,t,o,r){throw new Error("Method not implemented.")},i.prototype.getCellText=function(e,t){throw new Error("Method not implemented.")},i.prototype.getRows=function(e,t,o){throw new Error("Method not implemented.")},i.prototype.getCell=function(e,t,o){throw new Error("Method not implemented.")},i}(me),_c=function(a){function i(e,t,o){var r=a.call(this)||this;return r._colCount=0,r._blockPaste=!1,r._lines=[],r._colCount=0,r._blockPaste=!1,r._parse(e,t,o),r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colCount",{get:function(){return this._colCount},set:function(e){this._colCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._lines.length==0||this._colCount==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return this._lines.length==1&&this._colCount==1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(e){this._blockPaste=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),i.prototype.get=function(e){return this._lines[e]},i.prototype._parse=function(e,t,o){var r,n,s,l,u,h=this._lines,d=[],p=e.length,f=0,g="";if(e==="")d.push(e),h.push(d),this._colCount=1;else{for(;f<p;)u=!1,r=e.charAt(f),n=f<p-1?e.charAt(f+1):"",r=='"'?l?s&&n=='"'?(g+=r,f++):s?s=!1:g+=r:(l=!0,s=!0):s||r!="\r"&&r!=`
`&&r!="	"?(l=!0,g+=r):(r=="	"&&(d.push(g),u=!0),r!="\r"&&r!=`
`||(d.push(g),this._colCount=Math.max(this._colCount,d.length),h.push(d),d=[],r=="\r"&&n==`
`&&f++),g="",l=!1),f++;s&&(g='"'+g),(g.length>0||u)&&d.push(g),d.length>0&&(this._colCount=Math.max(this._colCount,d.length),h.push(d))}if(t&&t instanceof ko&&!t.single&&(!o||this._colCount===1&&h.length===1)){var m=t.startIndex,b=t.endIndex;if(m&&b){var C=t.grid,x=m.layout,E=b.layout,S=m.itemIndex,P=b.itemIndex;if(x.col>E.col){var R=x;x=E,E=R}if(S>P){var k=S;S=P,P=k}x=C.activeCellLayout.getTopOf(x);var D=(E=C.activeCellLayout.getBottomOf(E,!0)).col-x.col+1,F=(E.row-x.row+1)*(P-S+1);f=0;for(var H=0,N=h.length;H<N;H++){for(var V=h[H].slice(),j=V.length;j<D;j++)h[H].push(V[f]),f=f>=V.length?0:f;this._colCount=Math.max(this._colCount,h[H].length)}for(f=0,H=h.length;H<F;H++)h.push(h[f++]),f=f>=h.length?0:f;this._blockPaste=!0,this._startIndex=le.temp(C,S,x)}}},i}(me),py=function(a){function i(){var e=a.call(this)||this;return e._lastLayout=null,e}return w(i,a),i.prototype._doDispose=function(){return a.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){return this._lastLayout},i.prototype.getText=function(e,t,o,r){var n,s,l,u,h=e.grid,d=this._rangeToCells(e,null,t,r),p=[];if(h.copyOptions.includeHeaderText)for(l=0;l<d.length;l++){var f=[];for(u=0;u<d[l].length;u++)(n=v.cast(d[l][u],Oe))?f.push(v.addQuot(n.header.displayText)):f.push("");p.push(f.join("	"))}if(!o){o=[];for(var g=t.r1,m=t.r2;g<=m;g++)o.push(g)}return o.forEach(function(b){var C=h.getItem(b);if(C.dataRow>=0||Ei(C.itemState))for(l=0;l<d.length;l++){var x=[];for(u=0;u<d[l].length;u++)(n=v.cast(d[l][u],Oe))&&!n.blankWhenCopy?(s=le.temp(h,b,n).clone(),x.push(e.getData(s))):x.push("");p.push(x.join("	"))}}),p.join(`\r
`)+`\r
`},i.prototype.getCellText=function(e,t){var o="";return e.grid.copyOptions.includeHeaderText&&(o=t.dataColumn.header.displayText+`\r
`),o+=e.getData(t)},i.prototype.getRows=function(e,t,o){if(t==null)return null;var r,n=o.grid,s=n.pasteOptions,l=n.getSelection(),u=o.dataColumn;if(l&&l.single&&!n.isTree()&&u.mergeEdit&&n.editOptions.commitByCell){var h=n.getMergedItems(o.itemIndex,u,!0,!0),d=new le(n,h[0],u),p=new le(n,h[h.length-1],u);l=new ko(n.selections,c.SelectionStyle.BLOCK,d,p),r=!0}else{if(s.selectBlockPaste&&n.selections.count>1)return void alert("multi selection paste not supported");l=s.selectBlockPaste&&l}var f=new _c(t,l,r);if(f.empty)return null;if(f.single)return f.get(0)[0];f.blockPaste&&f.startIndex&&o.assign(f.startIndex);for(var g=n.activeCellLayout._dataCells,m=g[0][o.layout.col],b=g[g.length-1][Math.min(g[0].length-1,o.layout.col+f.colCount-1)],C=new le(n,o.itemIndex,m),x=new le(n,o.itemIndex,b),E=Ni.create(C,x),S=this._rangeToCells(e,f,E,null),P=void 0,R=void 0,k=void 0,D=void 0,F=[],H=0,N=f.rowCount;H<N;){var V={columns:[],values:[]};for(P=0;P<S.length&&H<N;P++,H++){var j=S[P],K=f.get(H);for(V.columns.push(j),V.values.push(D=[]),k=Math.min(K.length,j.length),R=0;R<k;R++)j[R]?D.push(K[R]):D.push("")}F.push(V)}return F},i.prototype.getCell=function(e,t,o){if(!t)return null;var r=new _c(t);return r.empty?null:r.get(0)[0]},i.prototype._rangeToCells=function(e,t,o,r){o.normalizeData(),this._lastLayout=null;var n=o.c1,s=o.c2,l=e.grid.activeCellLayout._dataCells,u=n===s?n.row:0,h=n===s?n.row:l.length-1,d=[];if(r){for(var p=[],f=u;f<=h;f++){for(var g=[],m=0;m<l[0].length;m++){var b=l[f][m];r.indexOf(b)>=0?(g.push(b.firstColumn),p[m]=p[m]||b):g.push(null)}d.push(g)}for(m=l[0].length-1;m>=0;m--)for(f=u;f<=h;f++)!p[m]&&d[f].splice(m,1)}else for(f=u;f<=h;f++){g=[];var C=n.source,x=s.source,E=C.col,S=x.col+x._defColSpan-1;for(m=E;m<=S;m++)(b=l[f][m])instanceof We?g.push(b.firstColumn):g.push(null);d.push(g)}return this._lastLayout=l[h][s.col],d},i}(dy),gc=function(a){function i(e){var t=a.call(this)||this;return t._values=null,t._dataRow=-1,t._grid=e,t}return w(i,a),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._grid.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return(1&this._getExtents())!=0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return c.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return 0},i.prototype._setExtents=function(e){},Object.defineProperty(i.prototype,"values",{set:function(e){this._values=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},set:function(e){this._dataRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),i.prototype.getRowObject=function(){for(var e={},t=this.dataSource,o=this._dataRow>=0&&t.getRow(this._dataRow),r=0,n=t.fieldCount;r<n;r++){var s=t.getOrgFieldName(r),l=this._values.hasOwnProperty(r)?this._values[r]:o&&o[r];e[s]=l}return e},i.prototype.getRowData=function(){for(var e=[],t=this.dataSource,o=this._dataRow>=0&&t.getRow(this._dataRow),r=0,n=t.fieldCount;r<n;r++){var s=this._values.hasOwnProperty(r)?this._values[r]:o&&o[r];e[r]=s}return e},i.prototype.getData=function(e){return e=this.dataSource.getFieldIndex(e),this._values.hasOwnProperty(e)||this._dataRow<0?this._values[e]:this.dataSource.getRow(this._dataRow)[e]},i.prototype.setIndex=function(e){this._setIndex(e)},i}(kt),fy=function(a){function i(e,t){var o=a.call(this,e)||this;return o._item=t,o}return w(i,a),i.prototype._doDispose=function(){return a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i}(le),_y=function(){function a(i){this._grid=i,this._data=new py,this._appendingItem=new gc(i),this._appendingIndex=new fy(i,this._appendingItem)}return a.prototype.dispose=function(){return null},Object.defineProperty(a.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"appendingIndex",{get:function(){return this._appendingIndex},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isPasting",{get:function(){return this._pasting},enumerable:!1,configurable:!0}),a.prototype.getDataRoots=function(){var i=this._grid._activeCellLayout._dataCells,e=[];if(!i.length||!i[0].length)return e;for(var t=0,o=i[0].length;t<o;t++)e.push(i[0][t].dataRoot);return e},a.prototype.getData=function(i){var e,t,o,r=this.grid,n=i.layout.firstColumn,s=r.getItem(i.itemIndex),l=r.copyOptions,u=l.datetimeFormat?Lt.getFormatter(l.datetimeFormat):null,h=l.booleanFormat?ho.getFormatter(l.booleanFormat):null,d=l.copyTextCallback;if(!s||!(Ei(s.itemState)||s.dataRow>=0))return"";if(o=s.getData(n.dataIndex),n&&(e=r.dataSource.getField(n.dataIndex))!=null){if((t=d?d.call(this,r,i.itemIndex,i.dataColumn,o):void 0)==null)if(l.copyDisplayText)t=r.getDisplayText(i);else switch(e.dataType){case c.ValueType.DATETIME:case c.ValueType.DATE:t=o?u?u.getText(o):String(o):"";break;case c.ValueType.BOOLEAN:t=o!=null?h?h.formatValue(o):String(o):"";break;case c.ValueType.NUMBER:t=o==null||isNaN(o)?"":String(o);break;case c.ValueType.OBJECT:t=o&&typeof o=="object"?JSON.stringify(o):"";break;default:t=l.lookupDisplay&&(n.lookupDisplay||n.labelField)?po.getText(s,n):o!=null?String(o):""}return v.addQuot(t)}return""},a.prototype.copyEmtpyToClipboard=function(){return""},a.prototype.copyToClipboard=function(i,e,t){return this._data.getText(this,i,e,t)},a.prototype.copyCellToClipboard=function(i){return this._data.getCellText(this,i)},a.prototype.pasteCellFromClipboard=function(i,e){if((i=this._correctIndex(i))&&this._grid.isValid(i)&&e!=null){var t=this._data.getCell(this,e,i);this._pasteSingleCell(i,t)}},a.prototype.pasteFromClipboard=function(i,e){var t=i.clone(),o=this.grid.pasteOptions.forceAppend;if((i=this._correctIndex(i))&&this._grid.isValid(i)){if(e!=null){var r=this._data.getRows(this,e,i);r!=null&&(typeof r=="string"?this._pasteSingleCell(i,r):r.length!=1||o?(r.length>1||r.length===1&&o)&&this._pasteMultiLines(i,r):this._pasteSingleLine(i,r[0]))}le.areEquals(i,t)||this._grid.setFocusedIndex(t,!1,!1)}},a.prototype._correctIndex=function(i){if(i){var e=this._grid;if(i.normalize(e),this._grid.isValid(i)&&e.pasteOptions.selectionBase&&e.selections.count>0){var t=e.selections.getItem(0).getBounds().firstCell;i.column=t.column,i.itemIndex=t.itemIndex}}return i},a.prototype._convertValue=function(i,e,t,o,r,n){var s=void 0,l=t.dataIndex,u=i.getField(l),h=this._grid;switch(u.dataType){case c.ValueType.NUMBER:var d=h.delegate.getCellEditor(wt.getEditorType(t.editor));s=NaN;var p=void 0;if(o){var f=void 0;if(e.applyNumberFormat||e.applyMaxLength){var g=h.body.getCell(n,!1);typeof(f=t.getCellStyle(g))!="object"&&(f=void 0);var m=f&&f.editor||t.editor;wt.getEditorType(m)==="number"&&((d=h.delegate.getCellEditor("number")).initOptions(),d.applyOptions(m))}var b=t.name;if(e.applyNumberFormat){var C=d&&d.editFormat||f&&f.numberFormat||t.numberFormat||h.formatOptions.numberFormat;C&&(p=new ji(C))}var x=e.numberCharExpOfCol(b);x&&(o=o.replace(x,""));var E=e.numberSeparatorOfCol(b);if(E&&(o=o.replace(E,".")),s=p?+parseFloat(o).toFixed(p.maxDigits):parseFloat(o),e.applyMaxLength){var S=String(s).split(".");d&&d.maxIntegerLength>0&&(S[0]=S[0].substr(0,d.maxIntegerLength)),o=S.join("."),d&&d.maxLength>0&&(o=o.substr(0,d.maxLength)),s=parseFloat(o)}}else o==""&&(s=null);break;case c.ValueType.DATETIME:s=null;var P=e.dateReaders;if(o&&P)for(var R=0;R<P.length&&!(s=P[R].toDate(o,!1));R++);s===null&&(s=new Date(o),isNaN(s.getTime())&&(s=null)),s===null&&(s=u.readValue(o));break;case c.ValueType.BOOLEAN:s=void 0;var k=e.boolReader;o&&k&&(s=k.toBoolStrict(o)),s===void 0&&(s=u.readValue(o));break;default:if(o=String(o)){var D=h.delegate.getCellEditor(wt.getEditorType(t.editor));if(D instanceof Jr){D.initOptions(),D.applyOptions(t.editor);var F=e.checkDomainOnly&&D.domainOnly,H=e.convertLookupLabel,N=-1,V=[],j=[];if(F||H)if(D.values&&D.values.length>0)j=D.values,V=D.labels;else if(t.lookupSource){var K=t.lookupSource,U=t.lookupKeyFieldIds,Y=[];for(R=0;R<U.length-1;R++)Y.push(r[U[R]]);var J=K.getTextDomain(Y);j=J&&J.keys,V=J&&J.values}else t.values&&t.values.length>0&&(j=t.values,V=t.labels);o=H&&j&&V&&j.indexOf(o)<0&&(N=V.indexOf(o))>=0?j[N]:o,o=j&&j.indexOf(o)>=0?o:F?"":o}else e.applyMaxLength&&D&&D instanceof bo&&(D.initOptions(),D.applyOptions(t.editor),o=o.substr(0,D.maxLength)),t.textInputCase==c.TextInputCase.LOWER?o=o.toLocaleLowerCase():t.textInputCase==c.TextInputCase.UPPER&&(o=o.toLocaleUpperCase())}s=o}return s},a.prototype._fireRowsPasted=function(i){for(var e=this._grid,t=[],o=0;o<i.length;o++)t.push(e.getItemIndexOfRow(i[o]));t.length>0&&e._fireItemsPasted(t)},a.prototype._cellWritable=function(i,e,t){var o=this._grid,r=o._fireCellPasting(i,t);if(typeof r=="boolean")return r;if(!o.pasteOptions.checkReadOnly)return!0;var n=o.body.getIndexCellStyle(i);if(n&&(n.readOnly!=null||n.editable!=null))return n.editable!=null?n.editable&&!n.readOnly:!n.readOnly;var s=o.body.getRowStyle(i.item,i.itemIndex<o.fixedOptions.rowCount);if(typeof s=="object"&&(s.readOnly!=null||s.editable!=null))return s.editable!=null?s.editable&&!s.readOnly:!s.readOnly;var l=o.fixedOptions;if((i.colFixed||i.rightFixed)&&!l.editable||i.rowFixed&&!l.rowEditable)return!1;var u,h=i.item&&i.item.itemState;switch(e||h){case c.ItemState.NORMAL:case c.ItemState.FOCUSED:case c.ItemState.UPDATING:u=o.canUpdate(i.item,i.dataField);break;default:u=!0}var d=this.grid.getBodyCellAt(i,!1);if(d&&d.renderer2&&d.renderer2.canEdit())return u&&!i.dataColumn.readOnly;if(!d){var p=i.dataColumn.renderer;if(p&&p.type==="check"&&p.editable!=null)return u&&p.editable&&!i.dataColumn.readOnly}return u&&i.dataColumn.isWritable()},a.prototype._applyMaskValue=function(i,e){var t,o=this.grid.body.getIndexCellStyle(i);if(o.editor&&o.editor.mask?t=o.editor.mask:o.editor||(t=i.dataColumn.editor&&i.dataColumn.editor.mask),t){var r=new hc(null,t);return r.clearBuffer(),r.writeBuffer(e,!0),r.checkValid()?r.getStripValue():null}return e},a.prototype._applyInputChars=function(i,e){if(!this.grid.pasteOptions.applyInputChars)return e;var t,o,r=this.grid.body.getIndexCellStyle(i).editor||i.dataColumn.editor;return r&&((o=r.inputCharacters)&&(t=new RegExp("[^"+o+"]","g")).test(e)&&(e=e.replace(t,"")),(o=r.ignoreCharacters)&&(t=new RegExp("["+o+"]","g")).test(e)&&(e=e.replace(t,""))),e},a.prototype._pasteSingleCell=function(i,e){var t,o=this._grid,r=o.dataSource,n=i.dataColumn,s=o.pasteOptions;if(e!=null&&r&&n&&!o.editOptions.readOnly&&i.item.canEdit()){e.lastIndexOf(`\r
`)==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf(`
`)==e.length-1&&(e=e.substr(0,e.length-1));var l=this._convertValue(r,s,n,e,i.item&&i.item.getRowData(),i);if(l=s.applyEditMask?this._applyMaskValue(i,l):l,l=this._applyInputChars(i,l),this._cellWritable(i,null,l))if(o.isItemEditing()||s.startEdit&&o.edit(i)){t=i.item;var u=[],h=[];h[i.dataField]=l,u[i.dataField]=t.getData(i.dataField),o.setCellUpdateEventLock(s.noEditEvent);try{t.setData(n.dataIndex,l)}finally{o.setCellUpdateEventLock(!1)}o.validateCellCommit(i,i.item.getData(i.dataField)),o.editOptions.commitByCell&&o.commit(!1,!1,!0),o._fireEditItemPasted(t,[i.dataField],u,h),o.refreshView()}else{this._pasting=!0;try{var d=o.validationManager,p=s.forceRowValidation,f=s.forceColumnValidation;t=i.item;var g=this._appendingItem.values=p||f?t.getRowData():[];g[n.dataIndex]=l;var m=Ei(t.itemState);if(this._appendingItem.dataRow=t.dataRow,this._appendingItem.setIndex(t.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=i.itemIndex,p&&d.validateRow(this._appendingItem,m,!0,!0),f){this._appendingIndex.column=n;try{d.validateCell(this._appendingIndex,m,!0)}catch(b){if(!(b instanceof Rt)||Q(b.level,o.editOptions.commitLevel)<0)throw b}}d.clearInvalidCell(this._appendingIndex),o.updatePastedRow(t,g,!p)}finally{this._pasting=!1}}}},a.prototype._pasteSingleLine=function(i,e){var t,o,r,n,s,l,u,h=this._grid,d=h.dataSource,p=h.pasteOptions,f=h.editOptions,g=!1;if(d&&!f.readOnly&&d){if(h.isItemEditing()||p.startEdit&&h.edit(i)){var m=[],b=[],C=[],x=i.column;for(o=i.item,r=Math.min(e.columns.length,e.values.length),n=0;n<r;n++){var E=e.columns[n],S=e.values[n];for(s=0;s<S.length;s++){u=E[s];var P=S[s];if(u){var R=le.temp(h,i.itemIndex,u),k=o.getData(u.dataIndex);t=this._convertValue(d,p,u,P,o&&o.getRowData(),R),t=p.applyEditMask?this._applyMaskValue(R,t):t,t=this._applyInputChars(R,t),h.setCellUpdateEventLock(p.noEditEvent);try{(l=this._cellWritable(R,null,t))&&o.setData(u.dataIndex,t)}finally{h.setCellUpdateEventLock(!1)}l&&(i.column=u,h.validateCellCommit(i,o.getData(u.dataIndex)),m.push(u.dataIndex),b[u.dataIndex]=k,C[u.dataIndex]=t,g=!0)}}}g&&(f.commitByCell&&h.commit(!1),h._fireEditItemPasted(o,m,b,C),i.column=x,h.refreshView())}else{this._pasting=!0;try{var D=h.validationManager,F=p.forceRowValidation,H=p.forceColumnValidation,N=this._appendingItem;for(o=i.item,N.setIndex(o.index),N.dataRow=o.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=i.itemIndex,C=N.values=F||H?o.getRowData():[],r=Math.min(e.columns.length,e.values.length),E=void 0,S=void 0,n=0;n<r;n++)for(E=e.columns[n],S=e.values[n],s=0;s<S.length;s++)(u=E[s])&&(R=mi.tempItem(h,N,u),t=this._convertValue(d,p,u,S[s],N&&N.getRowData(),R),t=p.applyEditMask?this._applyMaskValue(R,t):t,t=this._applyInputChars(R,t),(l=this._cellWritable(R,null,t))&&(C[u.dataIndex]=t,g=!0));if(g){var V=Ei(o.itemState);if(F&&D.validateRow(N,V,!0,!0),H)for(n=0;n<r;n++)for(E=e.columns[n],S=e.values[n],s=0;s<S.length;s++){this._appendingIndex.column=E[s];try{D.validateCell(this._appendingIndex,V,!0)}catch(j){if(!(j instanceof Rt)||Q(j.level,f.commitLevel)<0)throw j}}D.clearInvalidCells(o.dataId),h.updatePastedRow(o,C,!F)}}finally{this._pasting=!1}}h.selections.clear(!0),h.selections.add(i,new le(h,i.itemIndex,this._data.lastLayout()),c.SelectionStyle.BLOCK,!0)}},a.prototype._pasteMultiLines=function(i,e){var t=this._grid,o=t.dataSource;if(o){var r=t.pasteOptions,n=r.forceAppend,s=r.checkReadOnly;if(s&&t.editOptions.readOnly)return;var l=r.noDataEvent,u=e.length,h=i.itemIndex,d=o.fieldCount,p=t.getDataColumns(!1),f=p.length,g=t.validationManager,m=r.forceRowValidation,b=r.forceColumnValidation,C=this._appendingItem,x=this._appendingIndex,E=void 0,S=void 0,P=void 0,R=void 0,k=r.eventEachRow,D=[];r.commitEdit&&t.commit(!1)||t.cancel();var F=t.itemCount;l&&o.beginUpdate();var H=void 0,N=void 0;if(!t.isTree()){var V=t.itemSource;H=V.filterMode,N=V.sortMode,V.filterMode=c.FilterMode.EXPLICIT,V.sortMode=c.SortMode.EXPLICIT}try{for(this._pasting=!0,E=0;E<u&&h<F&&!n;E++)try{if((De=t.getItem(h)).itemState==c.ItemState.APPENDING)break;for(;De&&De.dataRow<0;)h++,De=t.getItem(h);if(De==null)break;var j=e[E],K=C.values=m||b?De.getRowData():[],U=m||b?De.getRowData():[],Y=!1,J=[];for(C.setIndex(De.index),C.dataRow=De.dataRow,P=Math.min(j.columns.length,j.values.length),S=0;S<P;S++){var ae=j.columns[S],de=j.values[S];for(R=0;R<de.length;R++)if((se=ae[R])&&se instanceof Oe){var Ce=mi.tempItem(t,C,se),pe=this._convertValue(o,r,se,de[R],C&&C.getRowData(),Ce);pe=r.applyEditMask?this._applyMaskValue(Ce,pe):pe,pe=this._applyInputChars(Ce,pe),(Ge=this._cellWritable(Ce,null,pe))&&(Y=Y||Ge||!s,J.push(se.dataIndex),U[se.dataIndex]=De.getData(se.dataIndex),K[se.dataIndex]=pe)}}if(Y)try{x.column=null,x.itemIndex=De.index;var fe=Ei(De.itemState);if(m&&g.validateRow(C,fe,!0,!0),b)for(R=0;R<f;R++){var se=p[R];x.column=se;try{g.validateCell(x,fe,!0)}catch(_e){if(!(_e instanceof Rt)||Q(_e.level,t.editOptions.commitLevel)<0)throw _e}}t.updatePastedRow(De,K,!m),g.clearInvalidCells(C.dataId),k&&t._fireEditItemPasted(De,J,U,K),D.push(De.dataRow)}catch(_e){if(r.stopOnError)throw _e}h++}catch(_e){throw h=Math.max(i.itemIndex,h-1),t.setFocusedIndex(i,!1),t.selections.clear(!0),t.selections.add(i,new le(t,h,this._data.lastLayout()),c.SelectionStyle.BLOCK,!0),_e}if(E<u&&r.enableAppend){for(;E<u;E++){j=e[E],K=C.values=[],U=[],C.dataRow=-1,C.setIndex(-1);try{for(J=[],P=Math.min(j.columns.length,j.values.length),S=0;S<P;S++)for(ae=j.columns[S],de=j.values[S],R=0;R<de.length;R++)if(se=ae[R]){var Ge;Ce=mi.tempItem(t,C,se),pe=this._convertValue(o,r,se,de[R],K,Ce),pe=r.applyEditMask?this._applyMaskValue(Ce,pe):pe,pe=this._applyInputChars(Ce,pe),(Ge=this._cellWritable(Ce,c.ItemState.APPENDING,pe))&&(J.push(se.dataIndex),K[se.dataIndex]=pe,U[se.dataIndex]=void 0)}if(r.fillColumnDefaults)for(R=0;R<f;R++)(se=p[R]).dataIndex>-1&&K[se.dataIndex]===void 0&&se.defaultValue!==void 0&&(K[se.dataIndex]=se.defaultValue);if(r.fillFieldDefaults){for(R=0;R<d;R++)if(K[R]===void 0){var Ye=o.getField(R);Ye.defaultValue!==void 0&&(K[R]=Ye.defaultValue)}}try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,m&&g.validateRow(C,!0,!0,!0),r.forceColumnValidation)for(R=0;R<f;R++){se=p[R],this._appendingIndex.column=se;try{g.validateCell(this._appendingIndex,!0,!0)}catch(_e){if(!(_e instanceof Rt)||Q(_e.level,t.editOptions.commitLevel)<0)throw _e}}var Be=t.appendPastedRow(K);if(k){var De=t.getItem(t.getItemIndexOfRow(Be));t._fireEditItemPasted(De,J,U,K)}D.push(Be)}catch(_e){if(r.stopOnError)throw _e}}catch(_e){throw h=Math.max(i.itemIndex,t.itemCount-1),t.setFocusedIndex(i,!1),t.selections.clear(!0),t.selections.add(i,new le(i.grid,h,this._data.lastLayout()),c.SelectionStyle.BLOCK,!0),_e}}h=l?-1:t.itemCount}this._fireRowsPasted(D)}catch(_e){throw this._fireRowsPasted(D),_e}finally{if(this._pasting=!1,l&&(o.endUpdate(),h<0&&(h=o.rowCount)),!t.isTree()){var Ve=t.itemSource;(Ve.isFiltered(null)&&Ve.filterMode!==H||Ve.sorted&&Ve.sortMode!==N)&&(Ve.filterMode=H,Ve.sortMode=N,Ve._refreshItems())}}n&&D.length>0&&((i=i.clone()).itemIndex=h-D.length),t.setFocusedIndex(i,!1),t.selections.clear(!0),t.selections.add(i,new le(i.grid,h-1,this._data.lastLayout()),c.SelectionStyle.BLOCK,!0)}},a}(),Os=function(a){function i(e){var t=a.call(this,e)||this;return t._cellButtonWidth=16,t._editButtonWidth=16,t._editButtonHeight=16,t._errorIconWidth=16,t._showChangeMarker=!1,t._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._buttonHeight=16,t._dataCell=new po,t._hiddenCell=new sg,t._literalCell=new Xa,t._seriesCell=new vs,t._mergedCell=new ag,t._cs=new Fn,t._rowCs=new Q_,t}return w(i,a),i.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._cs=null,this._rowCs=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(e){e!==this._rowStyleCallback&&(this._rowStyleCallback=e,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(e){this._ariaLabelCallback=e,this.refreshOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(e){e!=this._cellButtonWidth&&(this._cellButtonWidth=e,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(e){e!=this._editButtonWidth&&(this._editButtonWidth=e,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(e){e!=this._editButtonHeight&&(this._editButtonHeight=e,this._buttonHeight=Math.max(16,e),this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(e){e!=this._errorIconWidth&&(this._errorIconWidth=e,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonHeight",{get:function(){return this._buttonHeight},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e,t){return this.getCellAt(e.item,e.column,t)},i.prototype.getCellAt=function(e,t,o){var r,n=this._grid;if(o?r=this._mergedCell:t instanceof Oe?e.index<0||e instanceof gc?(r=this._hiddenCell,this._hiddenCell.setItem(e)):r=this._dataCell:r=t instanceof Ji?this._seriesCell:t instanceof Xa?this._literalCell:this._dataCell,r.setIndex2(n,e?e.index:-1,t),t instanceof Oe){var s=n.validationManager.getError(r.index);s?(r.error=s.message,r.errorLevel=s.level):(r.error=null,r.errorLevel=c.ValidationLevel.IGNORE)}return r},i.prototype.getHidden=function(e,t){return this._hiddenCell.setIndex(e),this._hiddenCell.setItem(t),this._hiddenCell},i.prototype.getCellSimple=function(e,t){var o=e.column,r=t?this._mergedCell:o instanceof Ji?this._seriesCell:o instanceof Xa?this._literalCell:this._dataCell;return r.setIndex(e),r},i.prototype.getIndexCellStyle=function(e,t){var o=this.getCell(e,!1);return this.getCellStyle(o,this._cs.clear(),!1,t)},i.prototype.getCellStyle=function(e,t,o,r){r===void 0&&(r=!0);var n,s=e.valueColumn,l=this._cellStyleCallback;l&&(n=l(this._grid.handler,e),t.assign(n)),s&&(n=s.getCellStyle(e),t.assign(n));var u=this.getUserCellStyle(e.index.dataRow,e.valueColumn.name);u&&t.assign(u);var h=t.styleName||s&&s.styleName||"";return r&&(t.styleName="rg-data-cell "+(o?"rg-merged-cell ":"")+h),t},i.prototype.getCellFormatters=function(e,t,o,r){if(t?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):((t=this._formatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),o){var n=o.grid,s=n.body.getCell(o,!1);t=(r=n.body.getCellStyle(s,r)).toFormatter(t)}return t},i.prototype.getRowStyle=function(e,t,o,r){o===void 0&&(o=!1),r===void 0&&(r=!0);var n=this._grid,s=this._rowCs;if(s.clear(),r){var l=this._rowStyleCallback;if(l){var u=l(n.handler,e,t)||{};s.assign(u)}var h=this.getUserCellStyle(e.dataRow,-1);h&&s.assign(h)}if(!s.styleName){var d=i.ROW_STYLE;e.index%2&&n.displayOptions.useAlternateRowStyle&&(d+=i.ALTERNATE_ROW_STYLE),t&&(d+=i.FIXED_ROW_STYLE),o||(d+=i.STATE_ROW_STYLES[e.rowState]||""),e.checked&&(d+=i.CHECKED_ROW_STYLE),s.styleName=d}return s},i.prototype.addUserCellStyle=function(e,t,o){var r=this._grid,n=r.getItemOfRow(e,!0);n&&r.itemSource.addCellStyle(n.dataId,t,o)&&r.refreshView()},i.prototype.removeUserCellStyle=function(e,t){var o=this._grid,r=e!=null?o.getItemOfRow(e,!0):null;(r||e==null)&&o.itemSource.removeCellStyle(r?r.dataRowId:null,t)&&o.refreshView()},i.prototype.getUserCellStyle=function(e,t){var o=this._grid,r=o.getItemOfRow(e,!0);if(r)return o.itemSource.getUserCellStyle(r.dataId,t)},i.prototype._prepareUpdate=function(){var e=this._grid=this.owner;this._ds=e.dataSource,this._showChangeMarker=e.displayOptions.showChangeMarker},i.ROW_STYLE=" rg-data-row",i.ALTERNATE_ROW_STYLE=" rg-alternate-row",i.FIXED_ROW_STYLE=" rg-fixed-row",i.CHECKED_ROW_STYLE=" rg-checked-row",i.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},i}(Yo),hi=function(a){function i(e){var t=a.call(this)||this;return t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){return this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),i.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},i.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},i.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},i.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},i}(me),To=function(a){function i(e){var t=a.call(this,e)||this;return t._colCount=0,t._rightCount=0,t._rowCount=0,t._rightFixed=!0,t._exceptFromFiltering=!0,t._exceptFromSorting=!0,t._editable=!0,t._rowEditable=!0,t._resizable=!1,t._rowResizable=!1,t._movable=!1,t._colBarWidth=3,t._rightBarWidth=3,t._rowBarHeight=3,t._mergeRows=!1,t._blankRows=!1,t.assignFrom(Re.fixed),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"colCount",{get:function(){return this._colCount},set:function(e){(e=Math.max(0,e))!=this._colCount&&(this._colCount=e,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightCount",{get:function(){return this._rightCount},set:function(e){(e=Math.max(0,e))!=this._rightCount&&(this._rightCount=e,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rowCount},set:function(e){(e=Math.max(0,e))!=this._rowCount&&(this._rowCount=e,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(e){e!=this._rightFixed&&(this._rightFixed=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(e){e!=this._exceptFromFiltering&&(this._exceptFromFiltering=e,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(e){e!=this._exceptFromSorting&&(this._exceptFromSorting=e,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(e){e!=this._rowEditable&&(this._rowEditable=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(e){e!=this._rowResizable&&(this._rowResizable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(e){(e=Math.max(0,e))!=this._colBarWidth&&(this._colBarWidth=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(e){(e=Math.max(0,e))!=this._rightBarWidth&&(this._rightBarWidth=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(e){(e=Math.max(0,e))!=this._rowBarHeight&&(this._rowBarHeight=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRows",{get:function(){return this._mergeRows},set:function(e){e!=this._mergeRows&&(this._mergeRows=e,this.grid._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankRows",{get:function(){return this._blankRows},set:function(e){e!=this._blankRows&&(this._blankRows=e,this.$_resetItemSource(!0))},enumerable:!1,configurable:!0}),i.prototype._refreshOwner=function(){a.prototype._refreshOwner.call(this),this.grid&&this.grid.invalidateColumns()},i.prototype.$_resetItemSource=function(e){var t,o=this.grid;o&&(t=o.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering,e)},i.ROW_BAR_STYLE="rg-fixed-row-bar",i.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",i.COLUMN_BAR_STYLE="rg-fixed-column-bar",i}(hi),Rs=function(a){function i(e){var t=a.call(this,e)||this;return t._refreshMode=c.RefreshMode.ALL,t._columnResizable=!0,t._columnMovable=!0,t._minCellWidth=8,t._defaultColumnWidth=100,t._fitStyle=c.GridFitStyle.NONE,t._rowResizable=!1,t._eachRowResizable=!1,t._autoClearHeights=!0,t._rowHeight=0,t._refCalcHeights=!0,t._dataHeights=null,t._minTableRowHeight=23,t._minRowHeight=23,t._maxRowHeight=0,t._hscrollBar=!0,t._vscrollBar=!0,t._liveScroll=!0,t._scrollDuration=0,t._hscrollDuration=0,t._hintDelay=0,t._showTooltip=!1,t._rowChangeDelay=0,t._horzPageScroll=!1,t._showEmptyMessage=!1,t._focusVisible=!0,t._focusType=c.FocusType.LAYER,t._rowFocusType=c.RowMaskType.NONE,t._groupFocusVisible=!1,t._wheelEnabled=!0,t._wheelScrollLines=3,t._wheelScrollHorz=16,t._wheelAccelDelay=0,t._wheelAccelScroll=null,t._wheelDeltaY=0,t._wheelEventPropagate=!0,t._rightClickable=!0,t._remergeWhenColumnMoved=!0,t._editItemMerging=!1,t._showInnerFocus=!0,t._toastZIndex=3e3,t._popupDropdownCount=0,t._selectionMode=c.SelectionMode.SINGLE,t._selectionStyle=c.SelectionStyle.BLOCK,t._selectionDisplay=c.SelectionDisplay.CELL,t._selectAndImmediateDrag=!1,t._selectAtSingleRow=!1,t._rowHoverType=c.RowMaskType.NONE,t._rowBlockType=c.RowMaskType.NONE,t._showEmptyTooltip=!1,t._showChangeMarker=!0,t._showNativeEditButton=!1,t._baseZindex=2e3,t._useAlternateRowStyle=!0,t._useFocusClass=!1,t._watchDisplayChange=!0,t._syncGridHeight=c.SyncGridHeight.NONE,t.assignFrom(Re.display),v.isMobile()&&(t._selectionStyle=c.SelectionStyle.NONE),(v.ieNine||v.ieTen)&&(t._focusType=c.FocusType.LINE),e.setWatchTimer(t._watchDisplayChange),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"refreshMode",{get:function(){return this._refreshMode},set:function(e){e!=this._refreshMode&&(this._refreshMode=e,this.grid.setNeedRefresh(!0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(e){this._columnResizable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(e){this._columnMovable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(e){e!=this._defaultColumnWidth&&(this._defaultColumnWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(e){e!=this._fitStyle&&(this._fitStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(e){e!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(e){this._rowResizable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(e){this._eachRowResizable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(e){e!=this._autoClearHeights&&(this._autoClearHeights=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(e){e!=this._refCalcHeights&&(this._refCalcHeights=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(e){e!=this._rowHeight&&(this._rowHeight=e,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataHeights",{get:function(){return this._dataHeights},set:function(e){e&&e.length>0?this._dataHeights=e.slice():this._dataHeights=null,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(e){(e=Math.max(i.MIN_TABLE_ROW_HEIGHT,e))!=this._minTableRowHeight&&(this._minTableRowHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){(e=Math.max(i.MIN_TABLE_ROW_HEIGHT,e))!=this._minRowHeight&&(this._minRowHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(e){(e=Math.max(0,e))!=this._maxRowHeight&&(this._maxRowHeight=e,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minCellWidth",{get:function(){return this._minCellWidth},set:function(e){(e=Math.max(0,e))!=this._minCellWidth&&(this._minCellWidth=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(e){e!=this._hscrollBar&&(this._hscrollBar=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(e){e!=this._vscrollBar&&(this._vscrollBar=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(e){e!=this._liveScroll&&(this._liveScroll=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(e){this._scrollDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(e){this._hscrollDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(e){this._hintDelay=Math.max(e,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){this._showTooltip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(e){this._rowChangeDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(e){this._horzPageScroll=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyMessage",{get:function(){return this._emptyMessage||ye.messages.displayEmptyMessage},set:function(e){e!=this._emptyMessage&&(this._emptyMessage=e,this.grid.setEmptyMessage(e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(e){e!=this._showEmptyMessage&&(this._showEmptyMessage=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(e){e!=this._focusVisible&&(this._focusVisible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(e){e!==this.focusType&&(this._focusType=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(e){e!=this._rowFocusType&&(this._rowFocusType=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFocusVisible",{get:function(){return this._groupFocusVisible},set:function(e){e!==this._groupFocusVisible&&(this._groupFocusVisible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(e){this._wheelEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(e){this._wheelScrollLines=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(e){this._wheelScrollHorz=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(e){this._wheelAccelDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(e){this._wheelAccelScroll=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(e){this._wheelDeltaY=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(e){this._wheelEventPropagate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(e){this._rightClickable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(e){this._remergeWhenColumnMoved=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(e){e!=this._editItemMerging&&(this._editItemMerging=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(e){e!=this._showInnerFocus&&(this._showInnerFocus=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(e){this._toastZIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(e){this._popupDropdownCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(e){e!=this._selectionMode&&(this._selectionMode=e,this.grid.clearAddSelection())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(e){e!=this._selectionStyle&&(this.grid.selections.clear(!0),this._selectionStyle=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(e){e!=this._selectionDisplay&&(this._selectionDisplay=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAndImmediateDrag",{get:function(){return this._selectAndImmediateDrag},set:function(e){this._selectAndImmediateDrag=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAtSingleRow",{get:function(){return this._selectAtSingleRow},set:function(e){this._selectAtSingleRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(e){e!=this._rowHoverType&&(this._rowHoverType=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(e){e!=this._rowBlockType&&(this._rowBlockType=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(e){e!==this._rowBlockCallback&&(this._rowBlockCallback=e,this._rowBlockType!=c.RowMaskType.NONE&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(e){this._showEmptyTooltip=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(e){e!=this._showChangeMarker&&(this._showChangeMarker=e,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(e){this._scrollMessageCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(e){e!=this._showNativeEditButton&&(this._showNativeEditButton=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseZindex",{get:function(){return this._baseZindex},set:function(e){this._baseZindex=Math.max(e,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(e){e!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useFocusClass",{get:function(){return this._useFocusClass},set:function(e){e!=this._useFocusClass&&(e||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(e){this.grid.body.editButtonHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(e){e!=this._watchDisplayChange&&(this._watchDisplayChange=e,this.grid.setWatchTimer(e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(e){e!=this._syncGridHeight&&(this._syncGridHeight=e,e!==c.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(e){this._rowHeightCallback=e,this.grid.clearRowHeights(!1),this._changed()},enumerable:!1,configurable:!0}),i.MIN_TABLE_ROW_HEIGHT=15,i}(hi),vo=function(){function a(i,e){i===void 0&&(i=0),e===void 0&&(e=0),this.width=i,this.height=e}return a.empty=function(){return new a},a.create=function(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),new a(i,e)},Object.defineProperty(a.prototype,"isEmpty",{get:function(){return this.width===0||this.height===0},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return new a(this.width,this.height)},a.prototype.equals=function(i){return i===this||i&&this.width===i.width&&this.height===i.height},a.prototype.setEmpty=function(){return this.width=this.height=0,this},a.prototype.set=function(i,e){return this.width=i,this.height=e,this},a.prototype.round=function(){var i=this.clone();return i.width>>>=0,i.height>>>=0,i},a.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},a.EMPTY=new a,a}(),wr=function(a){function i(e,t){return t===void 0&&(t=null),a.call(this,e,t)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){for(var e=this.parent;e;){if(e instanceof Fo)return e;e=e.parent}return null},enumerable:!1,configurable:!0}),i.prototype.measure=function(e,t,o){return this._setClassName(this._dom),this._doMeasure(e,t,o)},i.prototype.layoutContent=function(e){(this.grid._loading||this.visible)&&(this._doPrepareContent(e),this._doLayoutContent(e))},i.prototype._getCssSelector=function(){return""},i.prototype._getCssDisplay=function(){return"table"},i.prototype._doDraw=function(e){this._doRender(e)},i.prototype._doMeasure=function(e,t,o){return new vo(t,o)},i.prototype._doPrepareContent=function(e){},i.prototype._doLayoutContent=function(e){},i.prototype._doRender=function(e){},i}(yo),Ps=function(a){function i(e,t,o){o===void 0&&(o=null);var r=a.call(this,e,o)||this;return r._ff=v.isFirefox,r._chromium=v.isChromium,r._textProp=v.TextProp,r._cursor="default",r._model=t,r}return w(i,a),i.prototype._doDispose=function(){this._model=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),i.prototype.setCursor=function(e){e!==this._cursor&&(this._cursor=e,this._dom.style.cursor=e)},i}(wr),vl=function(a){function i(e){return a.call(this,e,"emptyGridView")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.setMessage=function(e){this._span[v.TextProp]=e},i.prototype._createDom=function(e){var t=a.prototype._createDom.call(this,e),o=this._span=e.createElement("span");return t.appendChild(o),t},i.prototype._getCssSelector=function(){return"rg-empty-grid"},i.prototype._doDraw=function(e){this.setMessage(this.grid.displayOptions.emptyMessage)},i}(wr),wl=function(a){function i(e,t,o){o===void 0&&(o=null);var r=a.call(this,e,t,o)||this;return r._explicitWidth=NaN,r}return w(i,a),i.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!1,configurable:!0}),i.prototype.getCellPoint=function(e,t){return(t=t||new Qo).x+=e.offsetLeft,t.y+=e.offsetTop,t},i.prototype._getTableHidden=function(){return!0},i.prototype._getTableCaption=function(){return""},i.prototype._createDom=function(e){var t=e.createElement("div"),o=this._table=e.createElement("table");this._getTableHidden()&&o.setAttribute("aria-hidden","true"),o.setAttribute("role","grid");var r=o.createCaption();r.textContent="grid table ";var n=r.style;return n.width=n.height="0px",n.overflow="hidden",n.setProperty("padding","0px","important"),n.boxSizing="border-box",(n=o.style).setProperty("table-layout","fixed","important"),n.setProperty("width","100%","important"),o.className="rg-table",t.appendChild(o),this._thead=e.createElement("thead"),o.appendChild(this._thead),this._tbody=e.createElement("tbody"),o.appendChild(this._tbody),t},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e[Fe]=this[Te],e.style.overflow="hidden"},i.prototype._doPrepareContent=function(e){var t=this._getExplicitWidth(e);v.equalNumbers(t,this._explicitWidth)||(this._table.style.width=t>0?t+"px":"100%",this._explicitWidth=t),this._doPrepareTableExtents(e),this._doPrepareTable(e)},i.prototype._doDraw=function(e){this._doRender(e),this._doRenderTable(this._tbody)},i.prototype._visibleChanged=function(){a.prototype._visibleChanged.call(this),this.visible?!this._table.parentElement&&this._dom.appendChild(this._table):v.detach(this._table)},i.prototype._getExplicitWidth=function(e){return NaN},i.prototype._doPrepareTableExtents=function(e){},i.prototype._doPrepareTable=function(e){this._doPrepareTableHead(e,this._thead),this._doPrepareTableRows(e,this._tbody)},i.prototype._doPrepareTableHead=function(e,t){var o,r=xe(t);t.childElementCount==0?((o=r.createElement("tr")).setAttribute("role","row"),t.appendChild(o),this._getTableHidden()&&o.setAttribute("aria-hidden","true"),(h=o.style).setProperty("border","0px none","important")):o=t.lastElementChild;for(var n=this._getCellCount(e);o.childElementCount<n;)(u=r.createElement("th")).scope="col",(h=u.style).setProperty("margin","0px","important"),h.setProperty("padding","0px","important"),h.setProperty("font-size","0px","important"),h.setProperty("line-height","0px","important"),h.height="0px",o.appendChild(u);for(;o.childElementCount>n;)o.removeChild(o.lastChild);for(var s=o.children,l=0;l<s.length;l++){var u,h;(h=(u=s[l]).style).width=this._getCellWidth(e,l)+"px"}},i.prototype._prepareTableRowCells=function(e,t){for(var o=this._getCellCount(e),r=xe(t),n=t.childElementCount;n<o;){var s=r.createElement("td");s.setAttribute("role","gridcell"),t.appendChild(s);var l=this._prepareCellContent(s,n++);s.appendChild(l)}for(;t.childElementCount>o;)l=t.lastElementChild,this._cleanCellContent(l),t.removeChild(t.lastElementChild);return t.childElementCount},i.prototype._isFixedHeight=function(e){return!0},i.prototype._getMinRowHeight=function(e){return e.minRowHeight},i.prototype._doPrepareTableRow=function(e,t,o,r){this._prepareTableRowCells(e,r);var n=this._isFixedHeight(e),s=r.children,l=this._isDataTable(),u=n?this._getTableRowHeight(e,o):this._getMinRowHeight(e),h=isNaN(u)||u<2?"0px":u-2+"px",d=r.style;r[Fe]=this[Te],r.$_fix=n,r.$_hei=n?u:0,l||n?d.setProperty("height",u+"px"):d.removeProperty("height"),d.display="";for(var p=this._getStartCell(e)-this._getFirstCell(e),f=s.length;p<f&&p<=this._getEndCell(e);p++){var g=s[p];this._ff&&(g.style.height="100%");var m=g.firstElementChild;m||(m=this._prepareCellContent(g,p),g.appendChild(m));var b=m.style,C=n?h:"";!n&&l&&b.removeProperty("height"),C!=b.maxHeight&&(b.maxHeight=C),b.overflow!=="hidden"&&(b.overflow="hidden")}},i.prototype._doRenderTable=function(e){for(var t=e.children,o=0;o<t.length;o++){var r=t[o];this._renderRow(r,o)}},i.prototype._renderRow=function(e,t){this._doDrawRow(t,e);for(var o=e.children,r=0;r<o.length;r++){var n=o[r];this._renderCell(n.lastElementChild,t,r)}},i.prototype._renderCell=function(e,t,o){this._doDrawCell(t,o,e)},i.prototype._prepareCellContent=function(e,t){return xe(e).createElement("div")},i.prototype._cleanCellContent=function(e){},i.prototype._doDrawRow=function(e,t){},i.prototype._doDrawCell=function(e,t,o){},i.prototype._getTableRow=function(e,t){return this._tbody.children[t]},i.prototype._getTableRows=function(e,t,o){for(var r=[],n=0;n<o;n++)r.push(this._tbody.children[t+n]);return r},i.prototype._getTableCell=function(e,t){return this._tbody.children[e].children[t]},i.prototype.getCellContent=function(e,t){return this._tbody.children[e].children[t].firstElementChild},i.prototype.getContentAt=function(e){var t,o=e.grid.layoutManager,r=o.fixedItemCount,n=e.column?e.column.index:0;return t=r>0?e.itemIndex<r?e.itemIndex:e.itemIndex-o.topIndex+1:e.itemIndex-o.topIndex,this.getCellContent(t,n)},i.prototype._getFirstCell=function(e){return e.firstCell},i.prototype._getStartCell=function(e){return e.startCell},i.prototype._getLastCell=function(e){return e.lastCell},i.prototype._getEndCell=function(e){return e.endCell},i}(Ps),tr=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._isDataTable=function(){return!1},i.prototype._doPrepareTableRows=function(e,t){for(var o=Math.max(0,this._getTableRowCount(e)),r=xe(t);t.childElementCount<o;)(l=r.createElement("tr")).setAttribute("role","row"),t.appendChild(l);for(;t.childElementCount>o;)t.removeChild(t.lastChild);for(var n=t.children,s=0;s<o;s++){var l;(l=n[s]).style.height=this._getTableRowHeight(e,s)+"px",this._doPrepareTableRow(e,s,s,l)}},i.prototype._getTableRowCount=function(e){return 1},i}(wl),Cl=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}return w(i,a),i.prototype._isDataTable=function(){return!0},i.prototype._getTrs=function(e){return 1},i.prototype._getTableRowCount=function(e){var t=e.fixedItemCount,o=t+e.itemCount;return o*=this._trs,o+=t>0?1:0},i.prototype.$_getTableIndex=function(e,t){var o=e.fixedItemCount,r=t*this._trs;return o>0&&t>=o?r+1:r},i.prototype._getTableRow=function(e,t){var o=this.$_getTableIndex(e,t);return this._tbody.children[o]},i.prototype._doPrepareTableRows=function(e,t){for(var o=e.$_getItems(),r=this._trs=this._getTrs(e),n=e.fixedItemCount,s=e.itemCount+n,l=this._trCount=Math.max(0,this._getTableRowCount(e)),u=xe(t);t.childElementCount<l;){var h=u.createElement("tr");h.setAttribute("role","row"),t.appendChild(h)}for(;t.childElementCount>l;)t.removeChild(t.lastChild);var d=t.children,p=0,f=0;if(n>0){for(p=0;p<n;p++)for(var g=0;g<r;g++,f++)this._doPrepareTableRow(e,p,f,d[f]);this.$_prepareFixedBar(e,d[f++])}for(;p<s&&f<l;p++){var m=o[p].isData?r:1;for(g=0;g<m&&f<l;g++,f++)this._doPrepareTableRow(e,p,f,d[f])}},i.prototype.$_prepareFixedBar=function(e,t){var o=tt(t),r=this._prepareTableRowCells(e,t),n=e.fixedBarHeight,s=t.style;n>0?s.height=e.fixedBarHeight+"px":s.display="none";for(var l=t.children,u=0;u<r;u++){var h=l[u];h instanceof o.HTMLTableCellElement&&(h.rowSpan=1,h.style.display=""),(h=l[u].firstElementChild)&&(h.style.maxHeight="0px",h.style.overflow="hidden")}return n},i.prototype._getTableRowHeight=function(e,t){return e.getTableRowHeight(t,1)},i.prototype._getCellContent=function(e){return e.firstElementChild},i.prototype._updateCellContent=function(e,t,o){this._doUpdateCellContent(e,t,this._getCellContent(o))},i.prototype._doUpdateCellContent=function(e,t,o){},i}(wl),Do=function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this,e,t)||this;return o._fixed=!1,o._index=new le,o}return w(i,a),i.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=v.detach(this._cellDom),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fixed",{get:function(){return this._fixed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},set:function(e){le.areEquals(this._index,e)||(this._index.assignFrom(e),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),i.prototype.updateCell=function(e,t,o){o!=this._cellDom&&(o&&this._clearCellDom(o),this._clearCellCache(),this._cellDom=o),this.index=t.index,this._doPrepareValue(e,t),this._doUpdateContent(e,t,this._cellDom)},i.prototype.removeCellDom=function(e){e===void 0&&(e=!1),e&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},i.prototype._createDom=function(e){return null},i.prototype._clearCellDom=function(e){e.innerHTML=""},i.prototype._clearCellCache=function(){},Object.defineProperty(i.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),i.prototype._changed=function(){this.invalidate()},i.prototype._doPrepareValue=function(e,t){},i.prototype._doUpdateContent=function(e,t,o){},i.prototype._doLayoutContent=function(e){},i}(wr),gy=function(a){function i(e,t){return t===void 0&&(t=null),a.call(this,e,t)||this}return w(i,a),i.prototype._doPrepareValue=function(e,t){},i}(Do),ks=function(a){function i(){var e=a.call(this)||this;return e._valueSeparator=",",e}return w(i,a),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(e){this._valueSeparator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.SERIES_TYPE},enumerable:!1,configurable:!0}),i.prototype._makeText=function(e,t){return t.getDisplayText(e,this._valueSeparator)||""},i.SERIES_TYPE="series",i}(Wr),$n=function(a){function i(){var e=a.call(this)||this;return e._baseValue=NaN,e.$_render=(function(t,o,r,n){var s=this._values;if(s&&s.length){for(var l=s.length,u=s[0],h=s[0],d=1;isNaN(u)&&d<l;)h=u=s[d++];for(;d<l;d++){var p=s[d];isNaN(p)||(p<u&&(u=p),p>h&&(h=p))}var f=isNaN(this._baseValue)?u:this._baseValue;isNaN(u)||this._renderChart(o,s,u,h,f)}}).bind(e),e}return w(i,a),i.interfaced=function(e){return v.included(e.type,ir.TYPE,or.TYPE,Ts.TYPE)},Object.defineProperty(i.prototype,"baseValue",{get:function(){return this._baseValue},set:function(e){this._baseValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(e){this._firstStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(e){this._lastStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"highStyle",{get:function(){return this._highStyle},set:function(e){this._highStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(e){this._lowStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(e){this._belowStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(e){this._pointStyle=e},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=xe(e),o=this._div=t.createElement("div");o.style.position="relative",o.style.height="100%",e.appendChild(o);var r=(this._svg=fo.createSVG(o)).style;r.position="absolute",r.left=r.top="0px",r.width=r.height="100%"},i.prototype._doRenderCell=function(e,t,o,r,n){var s=this._svg;s.setAttribute("class",this._getChartStyle()),this._values=this._getValues(t),fo.renderSVG2(e,s,this.$_render)},i.prototype._getPoints=function(e,t,o){for(var r=e.length,n=[],s=o-t,l=0;l<r;l++){var u=e[l],h=5+l/(r-1)*90,d=10+(isNaN(u)||s==0?80:80*(1-(u-t)/s));n.push(h,d)}return n},i.prototype._getBasePoint=function(e,t,o){var r=t-e;return 0+(isNaN(o)||r==0?100:100*(1-(o-e)/r))},i}(function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._getValues=function(e){return e.value||[]},i}(Si)),ir=function(a){function i(){var e=a.call(this)||this;return e._chartStyle=i.CHART_STYLE,e.lastStyle=i.LAST_STYLE,e.highStyle=i.HIGH_STYLE,e.lowStyle=i.LOW_STYLE,e}return w(i,a),i.interfaced=function(e){return e.type==i.TYPE},Object.defineProperty(i.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(e){this._chartStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(e,t,o,r,n){for(var s,l=isNaN(n)?r:Math.max(r,n),u=isNaN(n)?o:Math.min(o,n),h=this._getPoints(t,u,l),d=t.length,p=0;p<d-1;p++)if(e.sline(null,h[2*p]+"%",h[2*p+1]+"%",h[2*(p+1)]+"%",h[2*(p+1)+1]+"%"),s=this.pointStyle){var f=h[2*p],g=h[2*p+1];e.scircle(s,f+"%",g+"%","2")}if((s=this.firstStyle)&&(f=h[0],g=h[1],e.scircle(s,f+"%",g+"%","2")),(s=this.lastStyle)&&(f=h[2*(d-1)],g=h[2*(d-1)+1],e.scircle(s,f+"%",g+"%","2")),s=this.highStyle)for(p=0;p<d;p++)t[p]>=r&&(f=h[2*p],g=h[2*p+1],e.scircle(s,f+"%",g+"%","2"));if(s=this.lowStyle)for(p=0;p<d;p++)t[p]<=o&&(f=h[2*p],g=h[2*p+1],e.scircle(s,f+"%",g+"%","2"))},i.TYPE="sparkline",i.STYLE="rg-sparkline-renderer",i.CHART_STYLE="rg-sparkline-renderer-chart",i.LAST_STYLE="rg-sparkline-renderer-last",i.HIGH_STYLE="rg-sparkline-renderer-high",i.LOW_STYLE="rg-sparkline-renderer-low",i.STYLE_NAME="rg-renderer "+i.STYLE,i}($n),or=function(a){function i(){var e=a.call(this)||this;return e._chartStyle=i.CHART_STYLE,e._barWidth=.8,e.lastStyle=i.LAST_STYLE,e.highStyle=i.HIGH_STYLE,e.lowStyle=i.LOW_STYLE,e}return w(i,a),i.interfaced=function(e){return e.type===i.TYPE},Object.defineProperty(i.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(e){this._chartStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(e){this._barWidth=Math.min(1,Math.max(0,e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(e,t,o,r,n){for(var s,l=isNaN(n)?r:Math.max(r,n),u=isNaN(n)?o:n,h=t.length,d=this._getBasePoint(u,l,n),p=100/h,f=0+p/2,g=l-u,m=p*this._barWidth,b=0;b<h;b++){var C=t[b];if(!isNaN(C))if(s=C<=o&&this.lowStyle?this.lowStyle:C>=r&&this.highStyle?this.highStyle:C<n&&this.belowStyle?this.belowStyle:b==0&&this.firstStyle?this.firstStyle:b==h-1&&this.lastStyle?this.lastStyle:null,isNaN(this.baseValue)&&u<0)if(l<0){var x=0,E=g===0?100:Math.max(1,Math.floor(Math.abs(C-l)/g*100));e.pbounds(s,f-m/2,x,m,E)}else x=g===0?100:Math.floor(Math.abs(u)/g*100),E=Math.max(1,Math.floor(Math.abs(C)/g*100)),C>0?e.pbounds(s,f-m/2,100-x-E,m,E):e.pbounds(s,f-m/2,100-x,m,E);else E=g==0?100:Math.max(1,Math.floor(100*(C-u)/g)),e.pbounds(s,f-m/2,d,m,-E);f+=p}},i.TYPE="sparkcolumn",i.STYLE="rg-sparkcolumn-renderer",i.CHART_STYLE="rg-sparkcolumn-renderer-chart",i.LAST_STYLE="rg-sparkcolumn-renderer-last",i.HIGH_STYLE="rg-sparkcolumn-renderer-high",i.LOW_STYLE="rg-sparkcolumn-renderer-low",i.STYLE_NAME="rg-renderer "+i.STYLE,i}($n),Ts=function(a){function i(){var e=a.call(this)||this;return e._chartStyle=i.CHART_STYLE,e._barWidth=.8,e._belowHeight=.4,e.belowStyle=i.BELOW_STYLE,e}return w(i,a),i.interfaced=function(e){return e.type===i.TYPE},Object.defineProperty(i.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(e){this._chartStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(e){this._barWidth=Math.min(1,Math.max(0,e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(e){this._belowHeight=Math.min(1,Math.max(0,e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(e,t,o,r,n){for(var s=t.length,l=100/s,u=0+l/2,h=l*this._barWidth,d=0+100*(1-this._belowHeight),p=0;p<s;p++){var f=t[p];if(!isNaN(f)&&f!=n){var g=null;f<n&&this.belowStyle&&(g=this.belowStyle);var m=f<n?100:0;e.pbounds(g,Math.floor(u-h/2),Math.floor(m),Math.floor(h),Math.floor(d-m))}u+=l}},i.TYPE="sparkwinloss",i.STYLE="rg-sparkwinloss-renderer",i.CHART_STYLE="rg-sparkwinloss-renderer-chart",i.BELOW_STYLE="rg-sparkwinloss-renderer-below",i.STYLE_NAME="rg-renderer "+i.STYLE,i}($n);(function(a){function i(e,t){return a.call(this,e,t||"dataCellView")||this}w(i,a),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),i.prototype._doUpdateContent=function(e,t,o){o[v.TextProp]=this._text}})(gy);var yc,Ds,Ms=function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this,e,t)||this;return o._domIndex=-1,o._trs=1,o._fixedHeight=!1,o}return w(i,a),i.prototype._doDispose=function(){this._item=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),i.prototype.updateItem=function(e,t,o,r){this._item=e,this._domIndex=t,this._trs=o,this._fixedHeight=r},i.prototype.clearContent=function(e,t){},i.prototype._createDom=function(){return null},i.prototype.$_getDefaultRenderer=function(e,t){return Wr.TYPE},i.prototype._changed=function(){this.invalidate()},i.prototype._getTableRow=function(e,t){return this.parent._getTableRow(e,this._domIndex)},i.prototype._getTableRows=function(e){return this.parent._getTableRows(e,this._domIndex,this._trs)},i.prototype._getCellContent=function(e){return this.parent.getCellContent(this._domIndex,e)},i}(wr),mc="rg-expander-expanded",bc="rg-expander-collapsed",bi=function(a){function i(e,t){return t===void 0&&(t=null),a.call(this,e,t)||this}return w(i,a),i.isExpander=function(e){var t=e.className;return typeof t=="string"&&(t==mc||t==bc||t.indexOf("rg-tree-expanded")>=0||t.indexOf("rg-tree-collapsed")>=0)},i.prototype.resetButtons=function(e,t,o){for(var r=e.layoutManager,n=this._trs,s=this.parent._cells,l=this._getFirstCell(r),u=this._getStartCell(r)-l,h=this._getEndCell(r)-l,d=t&&o&&t.head===o.head&&e.canMergeEditing(o),p=0;p<n;p++)for(var f=s[this._domIndex+p],g=u;g<=h;g++){var m=f[g],b=m.layout,C=b.firstColumn;!b.isProxy&&this._item.isDataRow&&C instanceof Fi&&!d&&this.$_setButtons(e,m,m.cell.firstElementChild)}},i.prototype.moveCellButtons=function(e,t,o){var r=Math.min(o-t.item.index,t.rowSpan-1);if(!this.grid.canMergeEditing(t)&&r!=t.buttonsOffset){var n=t.rowIndex,s=n+r,l=e.getTableItemBounds(n),u=e.getTableItemBounds(s),h=e.grid.body.buttonHeight,d=u.y-l.y;d=Math.floor(d+(u.height-h)/2),t.buttons.style.top=d+"px",t.buttonsOffset=r}},i.prototype.cellRefresh=function(e,t,o,r,n){var s=e.layoutManager;this._updateDataCell(e,s,t,o,r,n)},i.prototype.clearContent=function(e,t){for(var o=this.parent,r=this._getFirstCell(e),n=this._getStartCell(e)-r,s=this._getEndCell(e)-r,l=0;l<t;l++)for(var u=o._cells[this._domIndex+l],h=n;h<=s;h++){var d=u[h],p=d.renderer2;p&&p.clearContent(),d.setBorderBottom(1),d.changedMarker&&(v.detach(d.changedMarker),d.valueChanged=!1)}},i.prototype._doLayoutContent=function(e){var t,o=e.grid,r=this._trs,n=o.body,s=this.parent,l=s._cells,u=this._getFirstCell(e),h=this._getStartCell(e)-u,d=this._getEndCell(e)-u,p=o.focusedIndex,f=p&&p.itemIndex==this._item.index,g=p.column,m=this._item.index;this._item instanceof ti&&(d=Math.min(d,this._item.parent.level-1),(m=(t=this._item.parent.firstDataItem).index)>=0&&(t=null));for(var b=le.temp(o,m),C=s._tbody.rows,x=0;x<r;x++)for(var E=l[this._domIndex+x],S=C[this._domIndex+x],P=h;P<=d;P++){var R=E[P],k=R.layout;if(!k.isProxy){var D=k.firstColumn;if(!(k instanceof We&&o.isRecycleMode()&&S.recycle)||R.merged||k.blanked){R.focused=f&&g===D,R.mouseEntered=!1,b.layout=k;var F=t?n.getHidden(b,t):n.getCellAt(this._item,D,!1);R.visible?(R.width=e.getCellWidth(P),R.height=e.getTableRowHeightFixed(R.trow,R.rowSpan),D instanceof Fi?this._updateDataCell(o,e,n,F,D,R):this._clearDataCell(R)):D instanceof Fi&&this._updateDataCell(o,e,n,F,D,R,!1)}}}},i.prototype._getFirstCell=function(e){return e._firstCell},i.prototype._getLastCell=function(e){return e._lastCell},i.prototype._getStartCell=function(e){return e.getStartCell(!1)},i.prototype._getEndCell=function(e){return this._item instanceof yi?Math.min(e.getStartCell(!1)+this._item.groupLevel,e.getEndCell(!1)):e.getEndCell(!1)},i.prototype._createRenderer=function(e,t,o,r,n){return e.delegate.createRenderer(o,r,n)},i.prototype.$_getRenderer=function(e,t,o,r,n){var s,l,u,h,d=t.valueColumn.renderer,p=o.renderer;typeof p=="string"?u=p:p&&(u=p.type,h=p),typeof d=="string"?s=d:d&&(s=d.type,l=d);var f=u||s||(r instanceof Ji?ks.SERIES_TYPE:this.$_getDefaultRenderer(e,t));if(!n.renderer2||n.rendererChanged||n.renderer2.type!=f)return this._createRenderer(e,t,f,l,h);n.renderer2&&p&&n.renderer2.assignFrom(p)},i.prototype.$_getCellWidth2=function(e,t,o){return e.getCellWidth2(t,o)},i.prototype.$_clearAriaProperty=function(e){e.removeAttribute("aria-activedescendant"),e.removeAttribute("aria-haspopup")},i.prototype._renderDataCell=function(e,t,o,r,n,s){var l=n.cell,u=e.doc,h=!1,d=this.$_getRenderer(e,o,r,s,n);d&&(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=d,n.rendererChanged=!1,h=!0);var p=l.firstElementChild,f=n.renderer2;(n.heighted=this._fixedHeight)&&(p.style.maxHeight=n.height-2+"px"),!h&&f&&f._dom!=p&&(f.clearContent(),h=!0),e.accessibility&&this.$_clearAriaProperty(l),this.$_setButtons(e,n,p);var g=!1,m=n.merged&&e.findGroupItem(n.item,s.dataIndex);if(m&&s.mergeGrouped&&e.rowGroup.$_isExpanderVisible(m)){var b=n.expander;b||((b=n.expander=u.createElement("span")).style.position="absolute",b.style.display="inline-block",b.style.top="2px",b.style.left="2px",l.appendChild(b)),g=m.expanded,b.className=g?mc:bc}else n.clearExpander();var C=f.styleName;n.expander&&(C+=" "+(g?"rg-expanded-cell":"rg-collapsed-cell")),h?f.initContent(o._index,p,C):f.checkClassName(C)?(f.clearContent(),f.initContent(o._index,p,C)):f.index.assign(o._index),f.renderCell(e,o,n);var x=t._showChangeMarker&&o.isValueChanged();if(x!=n.valueChanged){if(x){var E=n.changedMarker;E||((E=n.changedMarker=u.createElement("div")).className="rg-changed-marker",E.style.position="absolute",E.style.display="block",E.style.top="0px",n.changedMarker=E),l.appendChild(E)}else n.changedMarker&&n.valueChanged&&v.detach(n.changedMarker);n.valueChanged=x}Cr.addEdgeMark(r.edgeMark||s.edgeMark,n,u)},i.prototype._clearDataCell=function(e){e.setClassName(""),e.setEditor(null,null),e.button=c.CellButton.NONE,e.error=void 0,e.editable=!1,e.readonly=!0,e.setBorderBottom(1);var t=e.cell.firstElementChild;this._fixedHeight&&(t.style.maxHeight=e.height-2+"px"),e.renderer2&&e.renderer2.clearContent(),e.valueChanged=!1},i.prototype._updateDataCell=function(e,t,o,r,n,s,l){l===void 0&&(l=!0);var u=o.getCellStyle(r,s.style.clear(),s.merged);(r.value==null||r.value=="")&&n instanceof Oe&&n.placeHolder&&(u.styleName+=" "+(r.dataColumn.placeHolderStyleName||"rg-data-empty-cell"));var h=e.cellGhostStyle;if(v.setStyle(h,s.cell),u.style){for(var d in u.style)h[d]=void 0;u.style&&v.setStyle(u.style,s.cell)}s.refreshFormatters(u),o.getCellFormatters(n,s),s.setEditor(u.editor,n.editor),s.button=u.button||n.button,s.buttonWidth=u.buttonWidth,s.error=r.error,s.errorLevel=r.errorLevel;var p=le.temp(e,s.item.index,s.dataColumn);if(s.editable=e.getEditableAt(p,s.style),s.readonly=e.getReadOnlyAt(p,s.style),s.editable&&!s.readonly||(u.styleName+=" rg-data-readonly-cell"),s.setClassName(u.styleName),!s.merged&&n instanceof Oe&&n.layout.blanked&&!n.equalBlankLine)switch(r.getBlankState()){case Dt.HEAD:case Dt.BODY:s.setBorderBottom(0);break;case Dt.TAIL:case Dt.NONE:s.setBorderBottom(1)}else s.setBorderBottom(1);l?this._renderDataCell(e,o,r,u,s,n):s.renderer2&&(s.renderer2=s.renderer2&&s.renderer2.clearAndDispose())},i.prototype.$_getButtonVisible=function(e,t,o,r){if(r){var n=e.getIndex(t.item.index,t.dataColumn);return r(e.handler,n.proxy(),t.focused,t.mouseEntered)}var s=!0,l=t&&t.item,u=e.getIndex(e.focusedRow,t.dataColumn),h=t.merged?t.head.contains(e.focusedIndex):l.index===e.focusedRow&&t.dataColumn===e.focusedColumn,d=l.index===e.focusedRow,p=t.mouseEntered&&t.item.isDataRow,f=e.focusedItem&&e.focusedItem.isDataRow;switch(o){case c.ButtonVisibility.ALWAYS:s=!t.mouseEntered&&!t.focused||t.item.isDataRow;break;case c.ButtonVisibility.HIDDEN:s=!1;break;case c.ButtonVisibility.VISIBLE:s=h&&f;break;case c.ButtonVisibility.ROWFOCUSED:s=d?f:p;break;case c.ButtonVisibility.DEFAULT:default:s=h?f:p}return!d&&t.merged&&o===c.ButtonVisibility.ROWFOCUSED?t.head.contains(e.focusedIndex)?f:t.head.contains(u)?t.mouseEntered?t.item.isDataRow:f:t.mouseEntered&&t.item.isDataRow:s},i.prototype.$_buttonWidth=function(e,t){var o=0;if(t.button!=c.CellButton.NONE){var r=t.layout.getDataColumn();this.$_getButtonVisible(e,t,r.buttonVisibility,r.buttonVisibleCallback)&&(o=t.buttonWidth||r.buttonWidth||e.body.cellButtonWidth)}return o},i.prototype.$_editButtonWidth=function(e,t){var o=0;if(t.editable&&!t.readonly){var r=t.layout,n=r.getDataColumn(),s=t.editorType,l=e.delegate.getCellEditor(s),u=e.delegate.getEditConfig(s),h=t.editor||n.editor;if(typeof h=="string"&&(h={type:h}),h=v.assign({},u,h),l.hasButton(e.displayOptions.showNativeEditButton,h)){var d=!1;le.equalsTo(e.focusedIndex,t.item.index,r)&&(d=!!l&&l.listing),e.isEditing()&&t.contains(e.focusedIndex)&&e.canMergeEditing(t)&&t.$_editWidth>0&&(d=!0),(d||this.$_getButtonVisible(e,t,n.editButtonVisibility,null))&&(o=e.body.editButtonWidth)}u=h=null}return o},i.prototype.$_editButtonCount=function(e,t){var o=t.editorType,r=e.delegate.getCellEditor(o);return r?r.buttonCount:0},i.prototype.$_editButtonVerti=function(e,t){if(t.editorType==="number"){var o=t.editor||t.dataColumn.editor||{};return o.direction==null||o.direction!=="horizontal"}},i.prototype.$_errorWidth=function(e,t){return t.error?e.body.errorIconWidth:0},i.prototype.$_setButtons=function(e,t,o,r){var n,s,l=t.cell,u=e.doc,h=e.layoutManager,d=t.dataColumn,p=this.$_buttonWidth(e,t),f=this.$_editButtonWidth(e,t),g=this.$_errorWidth(e,t),m=f&&this.$_editButtonCount(e,t),b=f&&this.$_editButtonVerti(e,t),C=e.canMergeEditing(t),x=d&&(d.buttonVisibility===c.ButtonVisibility.ROWFOCUSED||d.editButtonVisibility===c.ButtonVisibility.ROWFOCUSED),E=0,S=0,P=void 0;if(p>0&&S++,f>0&&(S+=m),g>0&&S++,t.merged&&(l=(t=t.head).cell,o=t.cell.firstElementChild),S>0){(P=t.buttons)||((P=t.buttons=u.createElement("div")).className="rg-cell-buttons",P.style.position="absolute",P.style.overflow="hidden",l.appendChild(P));var R=e.body.buttonHeight,k=t.height,D=-100;if((n=P.style).height=R+"px",n.right="0px",t.merged){var F=t.rowIndex,H=h.getTableItemBounds(F),N=F,V=e.getIndex(e.focusedRow,t.dataColumn);if(!C&&(t.contains(e.focusedIndex)||x&&t.contains(V)||r))if(e.focusedRow<e.topIndex)D=-100,t.buttonsOffset=-1;else if(e.focusedRow>e.topIndex+h.itemCount)D=1e4,t.buttonsOffset=-1;else{N=F+(e.focusedRow-t.item.index);var j=h.getTableItemBounds(N);D=j.y-H.y,D=Math.floor(D+(j.height-R)/2),t.buttonsOffset=N-F}else D=t.cell.getBoundingClientRect().height,D=Math.floor((D-R)/2),t.buttonsOffset=C?0:-1}else D=Math.floor((k-R)/2),t.buttonsOffset=0;n.top=Math.floor(D)+"px",E=P.childElementCount}else t.buttons&&(t.clearButtons(),o.style.maxWidth="");for(var K=E;K<S;K++){var U=u.createElement("span");(s=U.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px",P.appendChild(U)}for(K=E;K>S;K--)P.removeChild(P.lastElementChild);var Y=S>0?P.children:null;if(S=0,p>0){if(t.cellButton=Y[S++],(s=t.cellButton.style).right="0px",s.width=p+"px",t.resetButtonClass(),e.accessibility){l.removeAttribute("aria-haspopup");var J=t.renderer2;J&&t.button==c.CellButton.POPUP&&!J.itemClickable&&l.setAttribute("aria-haspopup","true")}t.$_buttonWidth=p}else t.cellButton=null,t.$_buttonWidth=0;if(f>0){t.editButtons=[];var ae=t.editorType,de=e.delegate.getCellEditor(ae);for(K=0;K<m;K++){var Ce=Y[S++];de.setButtonStyle(Ce,K,b,p,f)||((s=Ce.style).right=p+f*K+"px",s.width=f+"px",t.resetEditClass(Ce,K)),t.editButtons.push(Ce)}t.$_editWidth=f*(b?1:m);var pe=le.equalsTo(e.editController.editIndex,t.item.index,t.layout),fe=e.canMergeEditing(t)&&t.contains(e.editController.editIndex);this.$_setButtonZIndex(e,t,e.isEditing()&&(pe||fe),de)}else t.editButtons=null,t.$_editWidth=0;if(g>0?(t.errorIcon=Y[S],(s=t.errorIcon.style).right=p+t.$_editWidth+"px",s.width=g+"px",t.resetErrorClass(),t.$_errorWidth=g):(t.errorIcon=null,t.$_errorWidth=0),P){var se=t.$_buttonWidth+t.$_editWidth+t.$_errorWidth,Ge=this.$_getCellWidth2(h,t.tcol,t.colSpan);n.width=se+"px",o.style.maxWidth=Ge-se+"px"}else o.style.maxWidth=""},i.prototype.$_setButtonZIndex=function(e,t,o,r){var n=t.merged?t.head:t,s=e.displayOptions.baseZindex;function l(u){!o||r&&r.native?u.removeProperty("z-index"):u.zIndex=String(s+1)}n.editButtons&&n.editButtons.forEach(function(u){l(u.style)}),n.cellButton&&l(n.cellButton.style),n.errorIcon&&l(n.errorIcon.style)},i}(Ms),yy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype.$_getCellWidth2=function(e,t,o){return e.getFixedCellWidth2(t,o)},i}(bi),my=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype.$_getCellWidth2=function(e,t,o){return e.getRightCellWidth2(t,o)},i}(bi),Ls="rowspan",Fs="colspan",Cr=function(){function a(i){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=i}return a.addEdgeMark=function(i,e,t){if(i!==e.edgeMark){var o=e.cell;if(i){var r=e.edgeMarker;switch(r||(r=e.edgeMarker=t.createElement("div")),i){case c.EdgeMark.LEFT_TOP:r.className="rg-edgemarker-lefttop";break;case c.EdgeMark.LEFT_BOTTOM:r.className="rg-edgemarker-leftbottom";break;case c.EdgeMark.RIGHT_TOP:r.className="rg-edgemarker-righttop";break;case c.EdgeMark.RIGHT_BOTTOM:r.className="rg-edgemarker-rightbottom";break;default:r.className=i}o.appendChild(r)}else e.edgeMarker&&o.removeChild(e.edgeMarker);e.edgeMark=i}},a.prototype.dispose=function(){this.cell=null},a.prototype.setColSpan=function(i){return this.colSpan!=i&&(this.colSpan=i,i>1?this.cell.colSpan=i:this.cell.removeAttribute(Fs)),this},a.prototype.setRowSpan=function(i){return this.rowSpan!=i&&(this.rowSpan=i,i>1?this.cell.rowSpan=i:this.cell.removeAttribute(Ls)),this},a.prototype.setVisible=function(i){return i!==this.visible&&(this.visible=i,this.cell.style.display=i?"":"none"),this},a.prototype.set=function(i,e,t){return this.colSpan!=i&&(this.colSpan=i,i>1?this.cell.colSpan=i:this.cell.removeAttribute(Fs)),this.rowSpan!=e&&(this.rowSpan=e,e>1?this.cell.rowSpan=e:this.cell.removeAttribute(Ls)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},a.prototype.clear=function(i){return this.colSpan>1&&(this.colSpan=1,this.cell.removeAttribute(Fs)),this.rowSpan>1&&(this.rowSpan=1,this.cell.removeAttribute(Ls)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},a.prototype.isClickableElt=function(i){return!1},a}(),by=function(a){function i(e){var t=a.call(this,e)||this;return t.cellButton=null,t.editButtons=null,t.errorIcon=null,t.buttons=null,t.changedMarker=null,t.expander=null,t.item=null,t.grouped=!1,t.rowIndex=-1,t.rows=0,t.trow=-1,t.tcol=-1,t.head=null,t.merged=!1,t.spanHead=null,t.heighted=!1,t.buttonsOffset=0,t.template=void 0,t.marginRight=-1,t.style=new Fn,t.rendererChanged=!1,t.valueChanged=!1,t.mouseEntered=!1,t.focused=!1,t.borderBottom=1,t.readonly=void 0,t.editable=void 0,t.error=void 0,t.errorLevel=c.ValidationLevel.IGNORE,t.$_errorWidth=0,t.button=c.CellButton.NONE,t.$_buttonWidth=0,t.buttonWidth=0,t.$_editWidth=0,t.edgeMarker=null,t.text=e[v.TextProp],t}return w(i,a),i.prototype.dispose=function(){a.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach(function(e){v.detach(e)}),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this.layout.getDataColumn()},enumerable:!1,configurable:!0}),i.prototype.reset=function(e){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach(function(t){v.detach(t)}),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=e,this},i.prototype.span=function(e){this.spanned=!0,this.spanHead=e,this.clear(!1)},i.prototype.refreshFormatters=function(e){var t;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(t=e.textFormat)&&(this.textFormatter&&this.textFormatter.format==t||(this.textFormatter=Yr.getFormatter(t))),(t=e.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==t||(this.numberFormatter=ji.getFormatter(t))),(t=e.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==t||(this.datetimeWriter=Lt.getFormatter(t))),(t=e.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==t||(this.booleanFormatter=ho.getFormatter(t))),this.prefix=e.prefix,this.suffix=e.suffix},i.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},i.prototype.setEditor=function(e,t){this.editor=e,this.editorType=wt.getEditorType2(e,t)},i.prototype.setBorderBottom=function(e){e!=this.borderBottom&&(this.borderBottom=e,this.cell.style.borderBottom=e==0?"0":"")},i.prototype.setMarginRight=function(e,t){t!=this.marginRight&&(this.marginRight=t,e.style.marginRight=t<=0?"":t+"px")},i.prototype.isCellButton=function(e){return e===this.cellButton},i.prototype.isEditButton=function(e){return this.editButtons&&this.editButtons.some(function(t){return t===e})},i.prototype.isButton=function(e){return e===this.cellButton||this.isEditButton(e)},i.prototype.resetButtonClass=function(){var e=this.button==c.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=e},i.prototype.resetEditClass=function(e,t){var o;switch(this.editorType){case"date":case"btdate":case"ndate":o="rg-button-calendar";break;default:o="rg-button-list"}e.className=o},i.prototype.resetErrorClass=function(){var e;switch(this.errorLevel){case c.ValidationLevel.ERROR:e="rg-validation-error";break;case c.ValidationLevel.WARNING:e="rg-validation-warning";break;case c.ValidationLevel.INFO:e="rg-validation-info";break;default:e=""}this.errorIcon.className=e},i.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},i.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.$_errorWidth=this.$_buttonWidth=this.$_editWidth=0)},i.prototype.getEditIndex=function(e){var t=this.item.index;return this.merged&&(t+=this.buttonsOffset),e.set(t,this.layout.firstColumn)},i.prototype.contains=function(e){if(e.layout===this.layout){var t=e.itemIndex,o=this.item.index,r=o+this.rowSpan/this.layout._dspan;return o<=t&&t<r}return!1},i.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},i}(Cr),Oi=function(a){function i(e,t){var o=a.call(this,e,t,"bodyView")||this;return o._itemViews=[],o._cells=[],o._spanned=!1,o._ghostStyle={},o}return w(i,a),i.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var t=this._cells[e],o=0;o<t.length;o++)t[o].dispose(),t[o]=null;this._cells=this._ghostStyle=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._cells[0][0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanned",{get:function(){return this._spanned},enumerable:!1,configurable:!0}),i.prototype.bodyCellByCell=function(e){for(var t=e.parentElement[be],o=0;o<this._cells.length;o++){var r=this._cells[o],n=r[0].item;if(n&&n.index==t)for(var s=0;s<r.length;s++){var l=r[s];if(l&&l.cell===e)return l}}},i.prototype.bodyCellAt=function(e){for(var t=0;t<this._cells.length;t++){var o=this._cells[t],r=o[0].item;if(r&&r.index==e.itemIndex)for(var n=0;n<o.length;n++){var s=o[n];if(s&&s.layout===e.layout)return s}}},i.prototype.layoutByCell=function(e){var t=this.bodyCellByCell(e);return t&&t.layout},i.prototype.columnByCell=function(e){var t=this.bodyCellByCell(e);return t&&t.layout&&t.layout._columnObj},i.prototype.cellByLayout=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=0);for(var r=t;r<this._cells.length;r++)for(var n=this._cells[r],s=o;s<n.length;s++){var l=n[s];if(l&&l.layout===e)return l}},i.prototype.getCellRectAt=function(e,t,o){var r=this.getCellAt(e,t);return r&&this.getCellRect(e,r,o)},i.prototype.getCellRect=function(e,t,o){o&&t.merged&&(t=t.head);var r=t.layout,n=t.trow,s=t.rowSpan,l=o||s>1&&s==r.getDataSpan()?s:t.item.isData?r._dspan:1,u=e.getTableRowBounds(n,l),h=t.tcol,d=t.colSpan;return this.fixed?(u.x=e.getFixedCellPoint(h),u.width=e.getFixedCellWidth2(h,d)):this.rightFixed?(u.x=e.getRightCellPoint(h),u.width=e.getRightCellWidth2(h,d)):(u.x=e.getCellPoint(h),u.width=e.getCellWidth2(h,d)),u},i.prototype.getRowView=function(e){for(var t=0,o=this.childCount;t<o;t++){var r=this.getChild(t);if(r._item===e)return r}},i.prototype.getRowIndex=function(e){return this._cells[e][0].item.index},i.prototype.getViewIndex=function(e){return this._cells[e][0].rowIndex},i.prototype.cleanRows=function(e,t){this.$_cleanRowViews(e),this.$_cutTailBodyCells(t),this.$_cleanTableRows(t)},i.prototype.getCheckedLayout=function(e){return e.spanned&&(e=this.getUpperOf(e)),e},i.prototype.getLowerOf=function(e){for(var t=this._cells,o=e.trow,r=e.tcol,n=o+1;n<t.length;n++){var s=t[n][r];if(!s.spanned)return s;if(s.spanHead.trow===s.trow)return s.spanHead}},i.prototype.isBottomCell=function(e){for(var t=this._cells,o=e.rowIndex,r=e.trow,n=e.tcol,s=r+1;s<t.length;s++){var l=t[s][n];if(l.rowIndex!=o)break;if(!l.spanned||l.spanHead.trow===l.trow)return!1}return!0},i.prototype.getUpperOf=function(e){for(var t=this._cells,o=e.trow,r=e.tcol,n=o-1;n>=0;n--){var s=t[n][r];if(!s.spanned)return s;if(s.spanHead.trow===s.trow)return s.spanHead}},i.prototype.isTopCell=function(e){for(var t=this._cells,o=e.rowIndex,r=e.trow,n=e.tcol,s=r-1;s>=0;s--){var l=t[s][n];if(l.rowIndex!=o)break;if(!l.spanned||l.rowIndex===e.rowIndex&&l.trow!==e.trow&&l.layout.source)return!1}return!0},i.prototype.getNextVisibleCell=function(e){for(var t=this.bodyCellAt(e);t&&t.spanned;){if(!e.next())return!1;t=this.bodyCellAt(e)}return t!=null},i.prototype.getPrevVisibleCell=function(e){for(var t=this.bodyCellAt(e);t&&t.spanned;){if(!e.prev())return!1;t=this.bodyCellAt(e)}return t!=null},i.prototype.tdClone=function(e){var t=this.grid,o=e&&t.isValid(e)&&this.getCellAt(t.layoutManager,e);if(o){var r=(o=o.merged?o.head:o).cell,n=r.parentElement;if(n){var s=r.cloneNode(!1);s.appendChild(r.firstElementChild.cloneNode(!1)),s.style.display="none",o.rendererChanged=!0,n.insertBefore(s,r.nextElementSibling),o.reset(s),s.setAttribute("tabindex","0");var l=[];if(n=this._table,v.isIE)for(;n&&n!==t.container._containerDom;)l.push({top:n.scrollTop,left:n.scrollLeft}),n=n.parentElement;if(s.style.display="",s.focus({preventScroll:!0}),v.detach(r),n=this._table,v.isIE)for(;n&&n!==t.container._containerDom;){var u=l.shift();u&&u.top!==n.scrollTop&&(n.scrollTop=u.top),u&&u.left!==n.scrollLeft&&(n.scrollLeft=u.left),n=n.parentElement}}else r.focus()}},i.prototype.refreshTdFocused=function(e,t){var o=this.grid,r=e&&o.isValid(e)&&this.getCellAt(o.layoutManager,e);if(r){r=r.merged?r.head:r;var n=this._tbody,s=Array.prototype.slice.call(n.querySelectorAll("td"));t?l.call(this,r):setTimeout((function(){l.call(this,r)}).bind(this),15)}function l(u){var h=u.cell;h&&(s.forEach(function(d){d!==h&&d.removeAttribute("tabindex")}),h.setAttribute("tabindex","0"),h.focus({preventScroll:!0}))}},i.prototype.cleanRecycle=function(){for(var e=this._tbody,t=0;t<e.rows.length;t++)e.rows[t].recycle=!1},i.prototype.reArrangeRows=function(e,t){for(var o=this.grid,r=this._tbody,n=this._cells,s=o.itemSource,l=0,u=e.topIndex+e.fixedItemCount,h=0;h<r.rows.length;h++)r.rows[h].recycle=!0;var d=e.fixedTableRowCount===0?0:e.fixedTableRowCount+1;if(t<0){for(;t++<0;)l+=s.getItem(u+t+e.itemCount-1).isData?this._trs:1;for(;l-- >0;)r.rows[r.rows.length-1].recycle=!1,r.insertBefore(r.rows[r.rows.length-1],r.rows[d]),n.splice.apply(n,G([d,0],n.splice(-1),!1))}else{for(;t-- >0;)l+=s.getItem(u+t).isData?this._trs:1;for(;l-- >0;){var p=r.removeChild(r.rows[d]);p.recycle=!1,r.appendChild(p),n.push.apply(n,n.splice(d,1))}}},i.prototype._doAttached=function(e){var t=this._table;t&&t.setAttribute("role",this.grid.isTree()?"treegrid":"grid")},i.prototype._getCssSelector=function(){return"rg-body"},i.prototype._getTableHidden=function(){return!1},i.prototype._getTableCaption=function(){var e=this.grid;return e&&e.accessibility&&e.WaiOptions&&e.WaiOptions.getDescription()||""},i.prototype._isFixedHeight=function(e){return!e.isAutoRowHeights()},i.prototype._getTrs=function(e){return e.trs},i.prototype._getTableRowCount=function(e){var t=e.fixedItemCount,o=this.grid,r=this._trs;if(e.syncHeight()){for(var n=0,s=0,l=this.grid.itemCount;s<l;s++)n+=o.getItem(s).isData?r:1;return n+(t?1:0)}if(e.isAutoRowHeights())return(l=Math.max(0,Math.ceil(e._itemsBounds/e.grid.displayOptions.minTableRowHeight)+this._trs-1))+(e.grid.displayOptions.refCalcHeights?5:0);if(e.isRowGrouped()){for(var u=t+e.itemCount,h=(n=0,0);h<u;h++)n+=e.getItem(h).isData?r:1;return n+=t?1:0}return a.prototype._getTableRowCount.call(this,e)},i.prototype.$_getTableIndex=function(e,t){var o=e.fixedItemCount;if(t>=o&&e.isRowGrouped()){var r=this._trs,n=o*r;o>0&&n++;for(var s=o;s<t;s++)e.getItem(s).isData?n+=r:n++;return n}return n=t*this._trs,o>0&&t>=o?n+1:n},i.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},i.prototype._doPrepareTableHead=function(e,t){if(this.grid._columnsDirty||this.grid._needPosition||e.syncHeight()){a.prototype._doPrepareTableHead.call(this,e,t),this._table.caption.innerHTML=this._getTableCaption();for(var o=this._getFirstCell(e),r=this._getLastCell(e)-o+1,n=e.cellLayouts._dataCells,s=0;s<1;s++)for(var l=n[s],u=t.children[s],h=0;h<r;h++){var d=l[h+o];d=d.isProxy?d.source:d;var p=u.children[h];d&&p&&(p[v.TextProp]=d.header.getDisplayText()||d.firstColumn.header.displayText)}}},i.prototype._doMeasure=function(e,t,o){return this._spanned=!1,new vo},i.prototype.$_refreshRowCells=function(e,t,o,r,n,s,l){for(var u=this._cells,h=l.children,d=this._getFirstCell(e),p=this._getLastCell(e)-d+1,f=u.length,g=r+s;f<g;f++)u.push([]);for(var m=0;m<s;m++){var b=u[r],C=h[r];this.grid.accessibility&&(t?(C.removeAttribute("aria-hidden"),C.setAttribute("aria-rowindex",(t.index+2).toString())):(C.setAttribute("aria-hidden","true"),C.removeAttribute("aria-rowindex"))),this._ghostStyle&&v.setStyle(this._ghostStyle,C);for(var x=C.children,E=n[m],S=0;S<p;S++){var P=x[S],R=E[S+d],k=b[S];k?k.cell!==P?k.reset(P):k.layout!==R&&(k.rendererChanged=!0,k.layout=R,k.clear(!0)):(k=b[S]=new by(P)).layout=R,k.spanned=!1,k.item=t,k.rowIndex=o,k.trow=r,k.tcol=S}for(r++,S=p;S<b.length;S++)v.isDebugging()&&b[S],b[S].dispose();b.length=p}},i.prototype.layoutRow=function(e,t,o,r,n){function s(R,k){var D=this._ghostStyle=this._ghostStyle||{};for(var F in R)D[F]=void 0;v.setStyle(R,k)}var l,u=e.lm,h=e.fixedItemCount,d=this.model,p=u.cellLayouts._dataCells,f=this._tbody.rows,g=n.isData?this._trs:1;this.$_refreshRowCells(u,n,o,r,p,g,this._tbody),this.childCount<=o?(l=this.$_borrowView(n),this.addChild(l)):l=this.getChild(o),this.$_setRowCellsDisplay(u,e,t,this._cells,n,o,r,g);var m=n.index,b=f[r];if(b.style.display="",b[be]=m,b[nt]=r,l.updateItem(n,r,g,this._isFixedHeight(u)),n.isDataRow||n instanceof yi){var C=u.getItemBounds(o);C.width=this.width,l.setRect(C);var x=d.getRowStyle(n,m<h),E=x.styleName;if(n.isDataRow){n.setEditable(x.editable,x.readOnly);for(var S=1;S<this._trs;S++)(P=f[r+S])[nt]=r+S,P[be]=m,v.setClassName(P,E),x.style&&s.call(this,x.style,P)}l.layoutContent(u),v.setClassName(b,E),x.style&&s.call(this,x.style,b)}else if(n.isData){for(S=1;S<this._trs;S++){var P;(P=f[r+S])[nt]=r+S,P[be]=m}this.grid.isRecycleMode()&&f[r].recycle||l.clearContent(u,this._trs),n instanceof ti&&l.layoutContent(u)}else l.clearContent(u,1)},i.prototype.layoutFixedBar=function(e,t){var o=e.cellLayouts._dataCells,r=this._tbody,n=r.rows[t],s=this.$_prepareFixedBar(e,n),l=e.grid.hoveredCell;l&&l.trow==t&&l.rowIndex==e.fixedItemCount&&e.grid.$_setHoveredCell(null,-1),n[nt]=t,n[be]=-99,n.style.display="",v.setClassName(n,To.ROW_BAR_STYLE),this.$_refreshRowCells(e,null,-1,t,o,1,r),this.$_setFixedBarCellsDisplay(e,this._cells,t);for(var u=0,h=this._cells[t];u<h.length;u++){var d=h[u];d.className="",d.clearExpander(),d.clearButtons()}return s},i.prototype._doRender=function(e){},i.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},i.prototype._getTableRowHeight=function(e,t){return e.getTableRowHeight(t,1)},i.prototype._doDrawCell=function(e,t,o){},i.prototype.getCellAt=function(e,t){var o=t.layout,r=e.fixedItemCount,n=e.topIndex,s=t.itemIndex;if((r>0&&s<r||s>=n&&s-n>=r&&s-n<r+e.itemCount)&&(s>=r&&(s-=n),(s=this.$_getTableIndex(e,s))<this._cells.length))for(var l=0;l<this._trs;l++){var u=this._cells[s+l];if(u)for(var h=0;h<u.length;h++){var d=u[h];if(d&&d.layout===o)return d}}return null},i.prototype.getCellView=function(e,t){var o=this.getCellAt(e,t);return o&&o.cell},i.prototype.spanRight=function(e,t){if(t){var o=this.getCellAt(e,t);o&&(o.spanned&&(o=o.spanHead),o&&(t.layout=this._cells[o.trow][o.tcol+o.colSpan-1].layout))}},i.prototype.spanHead=function(e,t){if(t){var o=this.getCellAt(e,t);o&&(o.spanned&&(o=o.spanHead),o&&(t.layout=o.layout))}},i.prototype._getStartCell=function(e){return e.getStartCell(!1)},i.prototype._getEndCell=function(e){return e.getEndCell(!1)},i.prototype.$_removeView=function(e){var t=this.removeChildAt(e);t.validate(),this._itemViews.push(t)},i.prototype.$_borrowView=function(e){var t=this._itemViews.pop();return t||(t=this.createRowElement()),t},i.prototype.createRowElement=function(){return new bi(this.doc)},i.prototype.$_setFixedBarCellsDisplay=function(e,t,o){for(var r=this._getFirstCell(e),n=this._getFirstCell(e)-r,s=this._getLastCell(e)-r,l=t[o],u=To.ROW_BAR_CELL_STYLE,h=n;h<=s;h++){var d=l[h];d.clear(!0),v.setClassName(d.cell,u)}},i.prototype.$_setRowCellsDisplay=function(e,t,o,r,n,s,l,u){var h=this._getFirstCell(e),d=this._getFirstCell(e)-h,p=this._getLastCell(e)-h,f=t.grid,g=t.fixedItemCount,m=o,b=n.isData,C=n.level;if(b||t.mergedRowGrouped)for(var x=0;x<u;x++)for(var E=(Me=r[l+x]).length,S=d;S<=p;S++){var P=(re=Me[S]).layout,R=P.getDataColumn(),k=P.parent,D=k&&k.vertical;if(re.merged=!1,re.head=null,re.grouped=!1,!re.spanned)if(P.isProxy){for(var F=void 0,H=l;H<l+u;H++){var N=r[H];if(!N)break;for(var V=0;V<N.length;V++)if(N[V].layout===P.source){F=N[V];break}if(F)break}F?re.span(F):re.clear(!1)}else if(!b&&S+h>=C)re.grouped=!0,re.clear(!0);else{var j=!0,K=void 0,U=1;R&&R.mergeGrouped&&R.groupLevel<=n.parent.level||n.isDataRow&&((U=(K=P.spanCallback)?K(f.handler,P,re.item.index):void 0)===void 0&&(U=P.dataSpan),U===void 0&&(j=!1,U=P.cellSpan));var Y=0;if(U>1){var J=0,ae=P.vindex+1;if(D)for(U--;J++<U&&J<u&&(Be=k.getVisible(ae++));)Y+=Be._dspan,this._cells[l+x+J][S].span(re),this._spanned=!0;else{for(var de=P._dspan,Ce=[],pe=0;pe<de;pe++)Ce.push(0);for(var fe=0;fe<de;fe++){Ce[fe]+=P._defColSpan;for(var se=1;se<U&&S-d+se<E;se++){var Ge=this._cells[l+x+fe][S+se].layout;Ge&&!Ge.isProxy&&(Ce[fe]+=Ge._defColSpan)}}var Ye=Math.max.apply(Math,Ce);for(j=j&&Ye===U;J++<U-1&&S-d+J<E&&(j||ae<k.visibleCount);){var Be;if(!(Be=j?Me[S+J].layout:k.getVisible(ae++)))break;!Be.isProxy&&(Y+=Be._defColSpan)}for(P._defColSpan+Y!==U&&(Y=0),J=1;J<P._defColSpan+Y;J++){if(de>1&&j)for(se=1;se<u&&de>se;se++)this._cells[l+x+se][S+J].span(re);Me[S+J].span(re)}}}var De=P._defColSpan,Ve=P._dspan,_e=P.merged&&P.merges;if(_e&&n instanceof ti&&S>=n.parent.level&&(_e=null),_e)if(re.merged=_e.isMerged(s,g),_e.isHidden(s,g))re.set(De+Y,Ve,!1),re.head=m[S-d];else{var Xe=void 0;Xe=n.isData?(re.rows=_e.getMerged(s,g))*Ve:_e.getMerged2(f,n.index,s-g,Ve),re.set(De+Y,Xe,!0),m[S-d]=re.head=re}else D?re.set(De,Ve+Y,!0):re.set(De+Y,Ve,!0)}}else{var Me=r[l];for(S=d;S<=p;S++){var re;(re=Me[S]).clear(!1),re.merged=!1,re.grouped=!0}}},i.prototype.$_refreshSpans=function(e,t,o){},i.prototype.$_cleanRowViews=function(e){for(;this.childCount>e;)this.$_removeView(this.childCount-1)},i.prototype.$_cutTailBodyCells=function(e){for(var t=this._cells,o=e;o<t.length;o++)for(var r=t[o],n=0;n<r.length;n++)r[n].dispose(),r[n]=null;t.length=e},i.prototype.$_cleanTableRows=function(e){var t=this._tbody.rows;if(this.grid.isRecycleMode())for(var o=t.length-1;o>=e;o--){var r=t[o];v.detach(r)}else{for(o=t.length-1;o>=this._cells.length;o--)for(var n=t[o].cells,s=n.length;s--;){for(var l=n[s];l.childElementCount>1;)l.removeChild(l.lastElementChild);l.removeAttribute(Ls),l.removeAttribute(Fs)}for(o=t.length-1;o>=e;o--)(r=t[o]).childElementCount>0?(r[nt]=-1,r.style.display="none"):v.detach(r)}},i.prototype.$_resetHeights=function(e,t){var o=this._tbody.children,r=0;if(e.length>0){for(var n=1;n<e.length;n++)o[r++].style.height=e[n]-e[n-1]+"px";r++}for(n=1;n<t.length;n++)o[r++].style.height=t[n]-t[n-1]+"px"},i.prototype.$_resetCellStyleHeights=function(e,t){var o=this._tbody.children,r=0;if(e.length>0){for(var n=1;n<e.length;n++)for(var s=e[n]-e[n-1],l=o[r++].cells,u=0;u<l.length;u++)l[u].style.height=s+"px";r++}for(n=1;n<t.length;n++)for(s=t[n]-t[n-1],l=o[r++].cells,u=0;u<l.length;u++)l[u].style.height=s+"px"},i.prototype.$_resetCellHeights2=function(e,t){for(var o=e.grid.body.buttonHeight,r=0,n=this._cells.length;r<n;r++)for(var s=this._cells[r],l=0,u=s.length;l<u;l++){var h=s[l],d=h.height,p=e.getTableRowHeightFixed(h.trow,h.rowSpan);if(d!=p&&(h.height=p,(h.$_buttonWidth>0||h.$_editWidth>0)&&h.buttons&&(h.buttons.style.top=Math.floor((p-o)/2)+"px")),t&&!h.heighted){var f=Math.max(0,h.height-2);h.cell.firstElementChild.style.maxHeight=f+"px",v.ieTen&&(h.cell.firstElementChild.style.height=f+"px")}}},i.prototype.$_focusChanged=function(e,t,o){this.$_cellStateChanged(e,t,"focused",o)},i.prototype.$_mouseEnteredChanged=function(e,t,o){this.$_cellStateChanged(e,t,"mouseEntered",o)},i.prototype.$_cellStateChanged=function(e,t,o,r){var n=e.canMergeEditing(t);if(t&&t.item,t&&r!=t[o]){var s=this.getRowView(t.item);if(s instanceof Ms){var l=this.model,u=t.dataColumn;if(t[o]=r,u&&e.getCellType(t.cell)===c.GridCellType.DATA){var h=l.getCellAt(t.item,u,!1);if(s.$_setButtons(e,t,t.cell.firstElementChild),t.merged&&t.head){var d=t.head,p=e.layoutManager,f=this.getCellRect(p,t,!1),g=this.getCellRect(p,t,!0),m=d.renderer2;if(t.focused){var b=f.top-g.top+f.height/2-g.height/2;m.moveClickElement(b,n)}else t.mouseEntered||d.contains(e.focusedIndex)||m.moveClickElement(0,n)}s instanceof bi&&t.renderer2&&o==="focused"&&t.renderer2.refreshFocusChanged&&s.cellRefresh(e,l,h,u,t)}}}},i.prototype.$_buttonZIndexChanged=function(e,t,o,r){var n=t&&t.item;if(n&&n.isDataRow){var s=this.getRowView(n);s instanceof Ms&&t.dataColumn&&s.$_setButtonZIndex(e,t,o,r)}},i.prototype.$_rendererChanged=function(e){for(var t=this._cells,o=0;o<t.length;o++)for(var r=t[o],n=0;n<r.length;n++)r[n].layout===e&&(r[n].rendererChanged=!0)},i}(Cl),vc=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),Object.defineProperty(i.prototype,"fixed",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-fixed-body"},i.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype._getCellCount=function(e){return e.fixedCellCount},i.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},i.prototype.createRowElement=function(){return new yy(this.doc)},i}(Oi),wc=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),Object.defineProperty(i.prototype,"rightFixed",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-fixed-body"},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype.createRowElement=function(){return new my(this.doc)},i.prototype._getCellCount=function(e){return e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},i}(Oi),vy=function(a){function i(e){var t=a.call(this,e)||this;return t.check=null,t.sort=null,t.filter=null,t.popup=null,t.textSpan=null,t.expander=null,t.rendererClass="",t.html=void 0,t.tooltip="",t.checkWidth=0,t.marginLeft=0,t.marginRight=0,t.marginTop=0,t.marginBottom=0,t.edgeMarker=null,t.textSpan=e.firstElementChild.firstElementChild,t}return w(i,a),i.prototype.dispose=function(){a.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(e){a.prototype.clear.call(this,e);var t=this.cell.firstElementChild,o=this.textSpan,r=t.style;return this.check=this.check&&v.detach(this.check),this.filter=this.filter&&v.detach(this.filter),this.sort=this.sort&&v.detach(this.sort),this.popup=this.popup&&v.detach(this.popup),this.expander=this.expander&&v.detach(this.expander),this.checkWidth=0,this.className&&(this.cell.className=this.className=""),this.rendererClass&&(t.className=this.rendererClass=""),this.marginLeft!=0&&(r.marginLeft="",this.marginLeft=0),this.marginRight!=0&&(r.marginRight="",this.marginRight=0),this.marginTop!=0&&(r.marginTop="",this.marginTop=0),this.marginBottom!=0&&(r.marginBottom="",this.marginBottom=0),this.text&&(o[v.TextProp]=this.text=""),this.html&&(o.innerHTML=this.html=""),this},i.prototype.setText=function(e,t){t!=this.text&&(e[v.TextProp]=this.text=t,this.html="")},i.prototype.setHtml=function(e,t){t!=this.html&&(e.innerHTML=this.html=t,this.text="")},i.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},i.prototype.setRendererClassName=function(e,t){t!=this.rendererClass&&(e.className=this.rendererClass=t)},i.prototype.setDivMarigns=function(e,t,o,r,n){t!=this.marginLeft&&(e.marginLeft=t?t+"px":"",this.marginLeft=t),o!=this.marginRight&&(e.marginRight=o?o+"px":"",this.marginRight=o),r!=this.marginTop&&(e.marginTop=r?r+"px":"",this.marginTop=r),n!=this.marginBottom&&(e.marginBottom=n?n+"px":"",this.marginBottom=n)},i.prototype.getIndex=function(e){return e.set(-1,this.layout.firstColumn)},i.prototype.isClickableElt=function(e){return e===this.filter||e===this.popup||e===this.check||e===this.expander},i}(Cr),rr=function(a){function i(e,t){var o=a.call(this,e,t,"headerView")||this;return o._fixedHeight=!0,o._rowPoints=[],o._cells=[],o._pointerEnterHandler=o.$_pointerEnter.bind(o),o._pointerLeaveHandler=o.$_pointerLeave.bind(o),o}return w(i,a),i.renderCell=function(e,t){t[v.TextProp]=e.text||""},i.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var t=this._cells[e],o=0;o<t.length;o++)t[o].cell.removeEventListener("pointerenter",this._pointerEnterHandler),t[o].cell.removeEventListener("pointerleave",this._pointerLeaveHandler),t[o].dispose(),t[o]=null;this._cells=null,a.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++){var n=o[r];if(n&&n.cell===e)return n}},i.prototype.tableCellByLayout=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++)if(o[r].layout===e)return o[r]},i.prototype.tableCellByLayout2=function(e,t){var o=this._cells,r=o.length;if(!(r<1)){for(var n=o[0].length,s=this._getFirstCell(e),l=this._getStartCell(e)-s,u=this._getEndCell(e)-s,h=l;h<=u;h++)for(var d=0;d<r;d++)if(o[d][h].layout===t)return o[d][h];for(h=l-1;h>=0;h--)for(d=0;d<r;d++)if(o[d][h].layout===t)return o[d][h];for(h=u+1;h<n;h++)for(d=0;d<r;d++)if(o[d][h].layout===t)return o[d][h]}},i.prototype.layoutByCell=function(e){var t=this.tableCellByCell(e);return t&&t.layout},i.prototype.columnByCell=function(e){var t=this.layoutByCell(e);return t&&t._columnObj},i.prototype.getSpanRoot=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++){var n=o[r];if(n.layout===e){if(n.spanned){if(n.layout.parent.vertical){for(var s=t-1;s>=0;s--)if(!this._cells[s][r].spanned)return this._cells[s][r].layout}else for(s=r-1;s>=0;s--)if(!o[s].spanned)return o[s].layout}return e}}},i.prototype.refresh=function(e){for(var t=e.focusedColumn,o=e.layoutManager,r=this._getFirstCell(o),n=this._getLastCell(o)-r+1,s=0;s<this._cells.length;s++)for(var l=this._cells[s],u=0;u<n;u++){var h=l[u],d=h.layout;if(h.visible&&d instanceof We){var p=h.cell;p[mt]=d.isColumn(t),h.setClassName(this.$_getCellSelector(d,p))}}},i.prototype.getRowAt=function(e){for(var t=1;t<this._rowPoints.length-1;t++)if(e<this._rowPoints[t])return t-1;return this._rowPoints.length-2},i.prototype.getLayoutHeight=function(e,t,o){var r,n;return e instanceof it?(r=e.hrow,n=o?e.hlen:e.hspan):(r=e.hrow,n=o?t.rowSpan:e.hspan),this._rowPoints[r+n]-this._rowPoints[r]},i.prototype.getMeasureHeights=function(){var e=new Array(this._cells.length);return e.forEach(function(t,o,r){r[o]=0}),this._cells.forEach(function(t,o){t.forEach(function(r){if(r.visible){var n=r.textSpan.getBoundingClientRect();e[o]=Math.max(e[o],n.height+5)}})}),e},i.prototype.getLayoutPos=function(e){return this._rowPoints[e.hrow]},i.prototype._getCssSelector=function(){return"rg-header"},i.prototype._isFixedHeight=function(){return this._fixedHeight},i.prototype._getMinRowHeight=function(e){return this._minRowHeight},i.prototype._prepareCellContent=function(e,t){var o=xe(e),r=o.createElement("div"),n=o.createElement("span");return e.addEventListener("pointerenter",this._pointerEnterHandler,!1),e.addEventListener("pointerleave",this._pointerLeaveHandler,!1),r.appendChild(n),r},i.prototype._cleanCellContent=function(e){e.removeEventListener("pointerenter",this._pointerEnterHandler,!1),e.removeEventListener("pointerleave",this._pointerLeaveHandler,!1)},i.prototype._doMeasure=function(e,t,o){var r=this.model,n=e.layoutManager.headerRows,s=r.height,l=r.heights,u=[];if(this._minRowHeight=r.minRowHeight,l&&l.length>0){for(var h=0,d=0;d<n;d++)h+=u[d]=Math.max(l[d]||this._minRowHeight,this._minRowHeight);s=h}return s=s<=0?Math.max(this._minRowHeight,e.heightMeasurer.headerHeight)*n:Math.max(this._minRowHeight*n,s),this._fixedHeight=s>=0,s=Math.max(this._minRowHeight*n,r.minHeight,s),r.setCalcHeights(u),vo.create(t,s)},i.prototype._doPrepareTableExtents=function(e){var t=this.model,o=this._rowPoints,r=this.height,n=t.getCalcHeights(),s=Math.floor(r/e.headerRows);if(o.length=this._getTableRowCount(e)+1,o[0]=0,o.length>0){for(var l=1;l<o.length-1;l++)o[l]=o[l-1]+(n[l-1]||s);o[l]=r}},i.prototype.$_refreshHeadTitle=function(e,t){for(var o=this._cells[0],r=t.children[0],n=0;r&&n<o.length;n++){var s=o[n].layout.source,l=r.children[n];l&&s&&(l[v.TextProp]=s.header.getDisplayText()||s.firstColumn.header.displayText)}},i.prototype._doLayoutContent=function(e){var t=e.grid,o=t.focusedColumn,r=this.model,n=e.cellLayouts._headerCells,s=n.length,l=this._getFirstCell(e),u=this._getStartCell(e)-l,h=this._getEndCell(e)-l;this.$_refreshCells(e,n,this._tbody),this.$_refreshSpans(e,s),this.$_refreshHeadTitle(e,this._thead);for(var d=0;d<s;d++)for(var p=this._cells[d],f=u;f<=h;f++){var g=p[f];if(g.visible||f===u){var m=void 0;g.layout.isProxy?(m=g.layout.source,g=this.tableCellByLayout(m)):m=g.layout;var b=g.cell;if(b[mt]=m.isColumn(o),g.setClassName(this.$_getCellSelector(m,b)),m.isNull)g.setText(g.textSpan,m.header.getDisplayText());else if(m instanceof it){var C=r.getCell(m);m.hideChildHeaders&&m.tiedColumn?(C=r.getCell(m.tiedColumn.layout),this._updateCell(t,r,C,g)):this._updateGroupCell(t,r,C,g)}else C=r.getCell(m),this._updateCell(t,r,C,g)}}},i.prototype._doRender=function(e){},i.prototype._getTableRowCount=function(e){return e.headerRows},i.prototype._getTableRowHeight=function(e,t){return this._rowPoints[t+1]-this._rowPoints[t]},i.prototype.$_getCellHeight=function(e){var t=e.layout.hrow,o=this._rowPoints[t];return this._rowPoints[t+e.rowSpan]-o},i.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},i.prototype._getCellWidth2=function(e,t,o){return e.getCellWidth2(t,o)},i.prototype._doDrawCell=function(e,t,o){},i.prototype._doPrepareTableRow=function(e,t,o,r){a.prototype._doPrepareTableRow.call(this,e,t,o,r);var n=this.model;v.setClassName(r,n.getStyleName())},i.prototype.$_getCellSelector=function(e,t){var o,r="";if(e instanceof it)r="rg-header-group-cell",(o=e.header.styleName)&&(r+=" "+o);else{r="rg-header-cell",t[mt]?r+=" rg-header-focus":this.grid.isSelectedLayout(e)&&(r+=" rg-header-select");var n=e.firstColumn;(o=o||n&&n.header.styleName)&&(r+=" "+o)}return r},i.prototype.$_hoverChanged=function(e,t){var o=this.grid.getTableCell(e.target),r=this.tableCellByCell(o),n=this.model,s=r.layout,l=n.getCell(s);r.hovered=t,s instanceof We?this._updateCell(this.grid,n,l,r):s instanceof it&&s.hideChildHeaders&&s.tiedColumn&&(l=n.getCell(s.tiedColumn.layout),this._updateCell(this.grid,n,l,r))},i.prototype.$_pointerEnter=function(e){this.$_hoverChanged(e,!0)},i.prototype.$_pointerLeave=function(e){this.$_hoverChanged(e,!1)},i.prototype._getStartCell=function(e){return e.getStartCell()},i.prototype._getEndCell=function(e){return e.getEndCell()},i.prototype.$_refreshCells=function(e,t,o){for(var r=this._cells,n=o.children,s=n.length,l=this._getFirstCell(e),u=this._getLastCell(e)-l+1,h=r.length;h<s;h++)r.push([]);for(var d=0;d<s;d++){for(var p=r[d],f=n[d].children,g=t[d],m=0;m<u;m++){var b=f[m],C=g[m+l],x=p[m];x?x.cell!==b||x.layout!=C&&(x.layout=C,x.clear(!0)):(x=p[m]=new vy(f[m])).layout=C,x.height=this.$_getCellHeight(x),x.width=this._getCellWidth(e,m),x.spanned=!1}for(m=u;m<p.length;m++)p[m].dispose();p.length=u}for(d=s;d<r.length;d++){var E=r[d];for(m=0;m<E.length;m++)E[m].dispose(),E[m]=null}r.length=s},i.prototype.$_refreshSpans=function(e,t){for(var o=this._getFirstCell(e),r=this._getFirstCell(e)-o,n=this._getLastCell(e)-o,s=0;s<t;s++)for(var l=this._cells[s],u=l.length,h=r;h<=n;h++){var d=l[h],p=d.layout,f=p.parent,g=f&&f.vertical;if(!d.spanned)if(p.isProxy)d.clear(!1);else{var m=0,b=p.getHeaderSpan()-1;if(b>0){var C=0,x=p.vindex+1;if(g)for(;C++<b&&C<t;)m+=f.getVisible(x++)._hspan,this._cells[s+C][h].span();else for(;C++<b&&h-r+C<u&&x<f.visibleCount;)m+=f.getVisible(x++)._cspan,l[h+C].span()}(p instanceof it||p.isNull)&&d.clear(!0),g?d.set(p._cspan,p._hspan+m,!0):d.set(p._cspan+m,p._hspan,!0),d.width=this._getCellWidth2(e,h,d.colSpan)}}},i.prototype._updateCell=function(e,t,o,r){var n=e.doc,s=e.sortingOptions,l=e.filteringOptions,u=r.layout.firstColumn,h=o.checkLocation,d=h&&h!=c.ColumnHeaderItemLocation.NONE,p=t.checkWidth+2,f=d?t.checkHeight:0,g=u&&this.$_canSortHandleVisible(s,u,r),m=u&&u.sortDirection||c.SortDirection.NONE,b=g?t.sortWidth:0,C=u&&this.$_canFilterHandleVisible(l,u,r)?t.filterWidth:0,x=u&&this.$_canPopupHandleVisible(t,u,r)?t.popupWidth:0,E=r.cell.firstElementChild,S=r.textSpan,P=r.width,R=this.$_getCellHeight(r),k=0,D=0,F=0,H=0,N=E.style;r.setRendererClassName(E,i.RENDERER_STYLE),N.maxHeight=Math.max(R-2,0)+"px";var V=r.check;if(r.checkWidth=0,d){var j=S.style;V?N=V.style:(V=n.createElement("input"),r.check=V,V.type="checkbox",V.className="rg-header-check",(N=V.style).position="absolute",N.display="inline-block",N.verticalAlign="middle"),v.addChild(E,V),V.checked=u.checked,V.title=o.text+" "+u.checked?"checked":"unchecked";var K=-1,U=-1;switch(j.removeProperty("display"),h){case c.ColumnHeaderItemLocation.LEFT:case c.ColumnHeaderItemLocation.LEFT_EDGE:E.insertBefore(V,r.textSpan),h===c.ColumnHeaderItemLocation.LEFT?(N.position="relative",N.removeProperty("left"),N.removeProperty("top"),r.checkWidth=p):(N.position="absolute",k+=p,K=0,U=Math.floor((R-t.checkHeight)/2));break;case c.ColumnHeaderItemLocation.RIGHT:case c.ColumnHeaderItemLocation.RIGHT_EDGE:E.insertBefore(r.textSpan,V),h===c.ColumnHeaderItemLocation.RIGHT?(N.position="relative",N.removeProperty("left"),N.removeProperty("top"),r.checkWidth=p):(N.position="absolute",D+=p,K=P-p,U=Math.floor((R-t.checkHeight)/2));break;case"top":case"topEdge":E.insertBefore(V,r.textSpan),h===c.ColumnHeaderItemLocation.TOP?(j.display="block",N.position="relative",N.removeProperty("left"),N.removeProperty("top")):(N.position="absolute",F+=f,K=Math.floor((P-b-C-t.checkWidth)/2),U=0);break;case"bottom":case"bottomEdge":E.insertBefore(r.textSpan,V),h===c.ColumnHeaderItemLocation.BOTTOM?(j.display="block",N.position="relative",N.removeProperty("left"),N.removeProperty("top")):(N.position="absolute",H+=f,K=Math.floor((P-b-C-t.checkWidth)/2),U=R-t.checkHeight)}K>-1&&(N.left=K+"px"),U>-1&&(N.top=U+"px")}else V&&v.detach(V);var Y=r.filter;C>0?(Y?N=Y.style:(Y=n.createElement("span"),r.filter=Y,(N=Y.style).position="absolute",N.display="inline-block"),v.addChild(E,Y),Y.className="rg-header-filtering"+(u.isFiltered()?" filter-activated":""),D+=C,N.left=P-D+"px",N.top=Math.floor((R-t.filterHeight)/2)+"px",N.width=C+"px",N.height=t.filterWidth+"px"):v.detach(Y);var J=r.sort;if(g){switch(J?N=J.style:(J=n.createElement("span"),r.sort=J,(N=J.style).position="absolute",N.display="inline-block"),v.addChild(E,J),m){case c.SortDirection.DESCENDING:J.className="rg-header-sort-descending";break;case c.SortDirection.ASCENDING:J.className="rg-header-sort-ascending";break;default:J.className="rg-header-sort-none"}D+=b,N.left=P-D+"px",N.width=b+"px",s.showSortOrder&&u.sortOrder>=0?(J[v.TextProp]=(u.sortOrder+1).toString(),N.top=Math.max(0,Math.floor((R-t.sortHeight-10)/2))+"px",N.height=Math.min(r.height,t.sortHeight+10)+"px",N.backgroundPositionY=v.isIE?"5px":"70%",N.lineHeight=v.isIE?"1.5em":"1em"):(J[v.TextProp]="",N.backgroundPositionY="center",N.top=Math.floor((R-t.sortHeight)/2)+"px",N.height=t.sortHeight+"px")}else v.detach(J);var ae=r.popup;x>0?(ae?N=ae.style:(ae=n.createElement("span"),r.popup=ae,(N=ae.style).position="absolute",N.display="inline-block"),v.addChild(E,ae),ae.className="rg-header-popup",D+=x,N.left=P-D+"px",N.top=Math.floor((R-t.popupHeight)/2)+"px",N.width=x+"px",N.height=t.popupWidth+"px"):v.detach(ae),N=E.style,r.showTooltip=o.showTooltip,r.tooltip=o.tooltip,r.setDivMarigns(N,k,D,F,H);var de=o.template;de?r.setHtml(S,de):r.setText(S,o.text||""),Cr.addEdgeMark(o.edgeMark,r,n)},i.prototype._updateGroupCell=function(e,t,o,r){var n=e.doc,s=r.cell.firstElementChild,l=r.textSpan,u=this.$_getCellHeight(r),h=r.layout,d=0,p=s.style;p.maxHeight=Math.max(u-2,0)+"px";var f=this.$_canExpanderHandleVisible(h),g=r.expander;if(f){r.expander||((g=r.expander=n.createElement("span")).style.position="absolute",g.style.display="inline-block"),g.className=h.expanded?"rg-column-expanded":"rg-column-collapsed";var m=g.style;m.left="2px",m.top=Math.floor((u-t.expanderHeight)/2)+"px",m.width=t.expanderWidth+"px",m.height=t.expanderHeight+"px",d+=t.expanderWidth+2,s.appendChild(r.expander)}else r.expander&&s.removeChild(r.expander);r.showTooltip=o.showTooltip,r.tooltip=o.tooltip,r.setDivMarigns(p,d,0,0,0);var b=o.template;b?r.setHtml(l,b):r.setText(l,o.text||""),Cr.addEdgeMark(o.edgeMark,r,n)},i.prototype.$_canPopupHandleVisible=function(e,t,o){if(t.header.popupMenuName==null)return!1;switch(e.showPopupMenu){case c.HandleVisibility.VISIBLE:case c.HandleVisibility.ALWAYS:return!0;case c.HandleVisibility.HOVERED:return o.hovered;case c.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canFilterHandleVisible=function(e,t,o){var r=e.enabled&&t.hasFilters&&t.filterable&&t.filterIconVisible;if(r)switch(e.handleVisibility){case c.HandleVisibility.HIDDEN:r=!1;break;case c.HandleVisibility.HOVERED:r=r&&o.hovered}return r},i.prototype.$_canSortHandleVisible=function(e,t,o){switch(e.handleVisibility){case c.HandleVisibility.VISIBLE:return t.sortOrder>=0;case c.HandleVisibility.HOVERED:return o.hovered&&t.sortOrder>=0;case c.HandleVisibility.ALWAYS:return t.sortable||t.sortOrder>=0;case c.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canCheckHandleVisible=function(e,t){return!1},i.prototype.$_canExpanderHandleVisible=function(e){return e.isExpandable()},i.prototype.$_checkHeight=function(){return this._dirty&&this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},i.prototype.$_getHeights=function(e){var t=this._tbody.rows;if(e.length==0)for(var o=0,r=this._rowPoints.length-1;o<r;o++)e[o]=0;for(o=0;o<e.length;o++)e[o]=Math.max(e[o],t[o]?t[o].offsetHeight:0)},i.prototype.$_adjustHeights=function(e){var t=this._tbody.rows,o=this._rowPoints;o[0]=0;for(var r=0,n=o.length-1;r<n;r++)t[r].style.height=e[r]+"px",o[r+1]=o[r]+e[r];return o[o.length-1]},i.prototype.$_distributeHeights=function(e,t){for(var o=t.length,r=0,n=0;n<o;n++)r+=t[n];if(e>r){var s=this._tbody.rows,l=e-r,u=l;for(n=0;n<o-1;n++){var h=Math.floor(l*t[n]/r);t[n]+=h,s[n].style.height=t[n]+"px",u-=h}t[n]+=u,s[n]&&(s[n].style.height=t[n]+"px")}},i.RENDERER_STYLE="rg-header-renderer",i}(tr),wy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype._getCellCount=function(e){return e.fixedCellCount},i.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},i.prototype._getCellWidth2=function(e,t,o){return e.getFixedCellWidth2(t,o)},i.prototype.tableCellByLayout2=function(e,t){return this.tableCellByLayout(t)},i}(rr),Cy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype._getCellCount=function(e){return e.cellCount-1},i.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},i.prototype._getCellWidth2=function(e,t,o){return e.getRightCellWidth2(t,o)},i.prototype.tableCellByLayout2=function(e,t){return this.tableCellByLayout(t)},i}(rr),xl=function(a){function i(e){var t=a.call(this)||this;return t._refreshMode=c.RefreshMode.ALL,t._leftPos=0,t._rightFixed=!0,t._footerCount=0,t._headerSummaryCount=0,t._layoutCount=0,t._fixedLayoutCount=0,t._rightLayoutCount=0,t._firstLayout=0,t._lastLayout=0,t._layoutsLength=0,t._layouts=[],t._layoutPoints=[],t._fixedLayoutPoints=[],t._rightLayoutPoints=[],t._cellCount=0,t._fixedCellCount=0,t._rightCellCount=0,t._firstCell=0,t._lastCell=0,t._startCell=0,t._endCell=0,t._cellPoints=[],t._fixedCellPoints=[],t._rightCellPoints=[],t._trs=1,t._rowGrouped=!1,t._items=[],t._topIndex=0,t._itemCount=0,t._fixedItemCount=0,t._fullItemCount=0,t._fixedItemPoints=[],t._itemPoints=[],t._fixedTableRowCount=0,t._tableRowCount=0,t._fixedTableRowPoints=[],t._tableRowPoints=[],t._fixedTableItemPoints=[],t._tableItemPoints=[],t._fixedDataHeight=0,t._dataRowHeights=[],t._dataHeight=0,t._fixedBarWidth=0,t._rightBarWidth=0,t._fixedBarHeight=0,t._itemsBounds=0,t._fixedWidth=0,t._rightWidth=0,t._fixedHeight=0,t._autoRowHeights=!1,t._minRowHeight=Rs.MIN_TABLE_ROW_HEIGHT,t._minItemHeight=Rs.MIN_TABLE_ROW_HEIGHT,t._maxHeight=Rs.MIN_TABLE_ROW_HEIGHT,t._itemHeight=0,t._hscrolled=!1,t._vscrolled=!1,t._hscrollBar=!1,t._vscrollBar=!1,t._scrollBarWidth=0,t._scrollBarHeight=0,t._scrollWidth=0,t._fitStyle=void 0,t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,this._rs=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelBounds",{get:function(){return this._filterPanelBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarBounds",{get:function(){return this._rowBarBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nonFixedBounds",{get:function(){return this._nonFixedBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultItemHeight",{get:function(){return this._itemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trs",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startCell",{get:function(){return this._startCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endCell",{get:function(){return this._endCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isColumnFitted",{get:function(){return!!this._fitStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minItemHeight",{get:function(){return this._minItemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},enumerable:!1,configurable:!0}),i.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==c.SyncGridHeight.NONE},i.prototype.fitSyncHeight=function(){return this._fitSyncHeight},i.prototype.getStartCell=function(e){if(e===void 0&&(e=!0),e)return this._firstCell;var t=this.grid,o=t.isRecycleMode();switch(this._refreshMode){case c.RefreshMode.VISIBLE_ONLY:return this._startCell;case c.RefreshMode.RECYCLE:return o?t._needRefresh&&t._horzScrolled?this._firstCell:this._startCell:this._firstCell;default:return this._firstCell}},i.prototype.getEndCell=function(e){if(e===void 0&&(e=!0),e)return this._lastCell;var t=this.grid,o=t.isRecycleMode();switch(this._refreshMode){case c.RefreshMode.VISIBLE_ONLY:return this._endCell;case c.RefreshMode.RECYCLE:return o?t._needRefresh&&t._horzScrolled?this._lastCell:this._endCell:this._lastCell;default:return this._lastCell}},i.prototype.getLayout=function(e){return this._layouts[e]},i.prototype.getLayoutBounds=function(e){return new Z(this._layoutPoints[e],0,this._layoutPoints[e+1]-this._layoutPoints[e],0)},i.prototype.getLayoutWidth=function(e){return this._layoutPoints[e+1]-this._layoutPoints[e]},i.prototype.getPositionToVIndex=function(e){for(var t=this._layoutPoints,o=0;o<t.length-1;o++)if(e>=t[o]&&e<t[o+1])return o;return-1},i.prototype.getFixedLayoutWidth=function(e){return this._fixedLayoutPoints[e+1]-this._fixedLayoutPoints[e]},i.prototype.getRightLayoutWidth=function(e){return this._rightLayoutPoints[e+1]-this._rightLayoutPoints[e]},i.prototype.getCellIndex=function(e){for(var t=this._cellPoints,o=0;o<t.length-1;o++)if(e>=t[o]&&e<t[o+1])return o;return-1},i.prototype.getHorzColumnIndex=function(e){for(var t=e,o=0;t;)o+=!t.group||t.group.horizontal?t.vindex:0,t=t.group;return o},i.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},i.prototype.getCellPoint=function(e){return this._cellPoints[e]},i.prototype.getCellWidth=function(e){return this._cellPoints[e+1]-this._cellPoints[e]},i.prototype.getCellWidth2=function(e,t){var o=this._cellPoints;return o[Math.min(o.length-1,e+t)]-o[e]},i.prototype.getFixedCellPoint=function(e){return this._fixedCellPoints[e]},i.prototype.getFixedCellWidth=function(e){return this._fixedCellPoints[e+1]-this._fixedCellPoints[e]},i.prototype.getFixedCellWidth2=function(e,t){var o=this._fixedCellPoints;return o[Math.min(o.length-1,e+t)]-o[e]},i.prototype.getRightCellPoint=function(e){return this._rightCellPoints[e]},i.prototype.getRightCellWidth=function(e){return this._rightCellPoints[e+1]-this._rightCellPoints[e]},i.prototype.getRightCellWidth2=function(e,t){var o=this._rightCellPoints;return o[Math.min(o.length-1,e+t)]-o[e]},i.prototype.$_getItems=function(){return this._items},i.prototype.getItem=function(e){return this._items[e]},i.prototype.getDataRowHeights=function(e){var t=this.grid.displayOptions,o=[],r=t.dataHeights;if(r&&r.length>0)for(var n=0;n<e;n++){var s=Math.floor(Math.max(t.minTableRowHeight,r[n]||t.minTableRowHeight));o.push(s)}return o.slice()},i.prototype._calcDefaultRowHeight=function(e){var t=this.grid.displayOptions.rowHeight,o=this._dataRowHeights=this.getDataRowHeights(this._trs);return o&&o.length>0&&(t=o.reduce(function(r,n){return r+n},0)),t<=0&&(t=e.heightMeasurer.rowHeight*this._trs),o.length>0&&this._maxHeight>0&&(t>this._maxHeight||t<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(t=Math.min(this._maxHeight,t)),t=Math.max(this._minItemHeight,t)},i.prototype.measure=function(e,t,o,r,n){var s=this._grid;this._rs=s.itemSource,this._cellLayouts=s._activeCellLayout,this._footerCount=s.footers.visibleCount,this._headerSummaryCount=s.headerSummaries.visibleCount,this._leftPos=t,this._topIndex=o,this._focusIndex&&!s.isValid(this._focusIndex)&&this._focusIndex.normalize(s),this._prevVscrolled=this._vscrolled,this._prevHscrolled=this._hscrolled,this._doMeasure(e,r,n),this._prevVscrolled===this._vscrolled&&this._prevHscrolled===this._hscrolled||(s._columnsDirty=!0)},i.prototype.layout=function(e){var t=this._grid;t.invalidateGridObject(),this._doLayout(t,e),this._adjustLayout(t,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=t.displayOptions.syncGridHeight},i.prototype.getItemHeight=function(e){var t=e.index;return t<this._fixedItemCount?this._fixedItemPoints[t+1]-this._fixedItemPoints[t]:(t-=this._fixedItemCount-this._topIndex,this._itemPoints[t+1]-this._itemPoints[t])},i.prototype.getTableItemHeight=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e+1]-this._fixedTableItemPoints[e]:(e-=this._fixedItemCount,this._tableItemPoints[e+1]-this._tableItemPoints[e])},i.prototype.getTableItemIndex=function(e){for(var t=0;t<this._fixedItemCount;t++)if(e<=this._fixedTableItemPoints[t+1])return t;for(t=0;t<this._itemCount;t++)if(e<=this._tableItemPoints[t+1])return t+this._fixedItemCount;return-1},i.prototype.getTableItemTop=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e]:(e-=this._fixedItemCount,this._tableItemPoints[e])},i.prototype.getTableItemBottom=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e+1]:(e-=this._fixedItemCount,this._tableItemPoints[e+1])},i.prototype.getItemBounds=function(e){var t,o;return this._fixedItemCount>0&&e<this._fixedItemCount?(t=this._fixedItemPoints[e],o=this._fixedItemPoints[e+1]-t):(e-=this._fixedItemCount,t=this._itemPoints[e],o=this._itemPoints[e+1]-t),new Z(0,t,1e3,o)},i.prototype.getItemRect=function(e,t){t===void 0&&(t=!1);var o,r,n=(t?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&e<this._fixedItemCount?(o=this._fixedItemPoints[e]+n,r=this._fixedItemPoints[e+1]+n-o):(e-=this._fixedItemCount,o=this._itemPoints[e]+n,r=this._itemPoints[e+1]+n-o),new Z(0,o,1e3,r)},i.prototype.getTableItemBounds=function(e){var t,o;return this._fixedItemCount>0&&e<this._fixedItemCount?(t=this._fixedTableItemPoints[e],o=this._fixedTableItemPoints[e+1]-t):(e-=this._fixedItemCount,t=this._tableItemPoints[e],o=this._tableItemPoints[e+1]-t),new Z(0,t,1e3,o)},i.prototype.getTableRowHeightFixed=function(e,t){var o=this._fixedTableRowPoints.length;return e<o-1?this._fixedTableRowPoints[Math.min(e+t,o-1)]-this._fixedTableRowPoints[e]:(o>1&&(e-=o),this._tableRowPoints[Math.min(e+t,this._tableRowPoints.length-1)]-this._tableRowPoints[e])},i.prototype.getTableRowHeight=function(e,t){return e<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(e+t,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[e]:(this._fixedItemCount>0&&(e-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(e+t,this._tableRowPoints.length-1)]-this._tableRowPoints[e])},i.prototype.getTableRowBounds=function(e,t){var o,r;return this._fixedTableRowCount>0&&e<this._fixedTableRowCount?(o=this._fixedTableRowPoints[e],r=this._fixedTableRowPoints[Math.min(e+t,this._fixedTableRowCount)]-o):(this._fixedTableRowCount>0&&(e-=this._fixedTableRowCount+1),o=this._tableRowPoints[e],r=this._tableRowPoints[Math.min(e+t,this._tableRowCount)]-o),new Z(0,o,1e3,r)},i.prototype.getTableRowIndex=function(e){e-=this.contentBounds.y+this.bodyBounds.y;for(var t=0;t<this._fixedTableRowCount;t++)if(e<=Math.round(this._fixedTableRowPoints[t+1]))return t;for(t=0;t<this._tableRowCount;t++)if(e<=Math.round(this._tableRowPoints[t+1]))return t+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},i.prototype.setLeftPos=function(e,t){var o=this._grid;this._leftPos=t,this.$_calcLeftPos(),o.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},i.prototype.isMergedCell=function(e){return!1},i.prototype.getMergeRoom=function(e){var t=e.layout;if(t instanceof We&&t.canMerge()){var o=t.merges;return o&&o.getRoom(e)}return null},i.prototype.getHeaderCellAt=function(e,t,o){o===void 0&&(o=!1);var r,n=this._grid,s=this._cellLayouts._headerCells,l=-1;if(e<this._fixedContentBounds.right){r=n.fixedHeaderView,e-=this._fixedContentBounds.x;for(var u=0;u<this._fixedCellCount;u++)if(e>=this._fixedCellPoints[u]&&e<this._fixedCellPoints[u+1]){l=u;break}}else if(e>this._rightContentBounds.x){for(r=n.rightHeaderView,e-=this._rightContentBounds.x,u=0;u<this._rightCellCount;u++)if(e>=this._rightCellPoints[u]&&e<this._rightCellPoints[u+1]){l=u+this._cellCount-this._rightCellCount;break}}else for(r=n.headerView,e-=this._contentBounds.x,u=0;u<this._cellPoints.length;u++)if(e>=this._cellPoints[u]&&e<this._cellPoints[u+1]){l=u+this._fixedCellCount;break}if(l>=0){var h=s[r.getRowAt(t-this._headerBounds.y-this._contentBounds.y)][l];return(h=r.getSpanRoot(h))&&!o?h.source:h}},i.prototype.getHeaderCellRect=function(e,t){t===void 0&&(t=!1);var o,r,n=this.grid,s=e.hcol,l=this.cellCount-this.rightCellCount;if(s<this._fixedCellCount){var u=this._fixedContentBounds.x,h=s,d=(r=n.fixedHeaderView.tableCellByLayout(e))?r.colSpan:e.cols;o=new Z(this._fixedCellPoints[h]+u,0,this._fixedCellPoints[h+d]-this._fixedCellPoints[h],0)}else s>=l?(u=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,h=s-l,d=(r=n.rightHeaderView.tableCellByLayout(e))?r.colSpan:e.cols,o=new Z(this._rightCellPoints[h]+u,0,this._rightCellPoints[h+d]-this._rightCellPoints[h],0)):(u=this._contentBounds.x,h=s-this._fixedCellCount,d=(r=n.headerView.tableCellByLayout(e))?r.colSpan:e.cols,o=new Z(this._cellPoints[h]+u,0,this._cellPoints[h+d]-this._cellPoints[h],0));return o.y=this._contentBounds.y+n.headerView.getLayoutPos(e),o.height=n.headerView.getLayoutHeight(e,r,t),o},i.prototype.getDataRect=function(e){var t,o=(e=e.source).col,r=e instanceof it?e._clen:e._defColSpan,n=this.cellCount-this.rightCellCount;if(o<this._fixedCellCount){var s=this._fixedContentBounds.x,l=o;t=new Z(this._fixedCellPoints[l]+s,0,this._fixedCellPoints[l+r]-this._fixedCellPoints[l],0)}else o>=n?(s=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,l=o-n,t=new Z(this._rightCellPoints[l]+s,0,this._rightCellPoints[l+r]-this._rightCellPoints[l],0)):(s=this._contentBounds.x,l=o-this._fixedCellCount,t=new Z(this._cellPoints[l]+s,0,this._cellPoints[l+r]-this._cellPoints[l],0));return t},i.prototype.getBodyView=function(e){var t=this.rightFirstLayout,o=(e instanceof gt?e:e.layout).root.vindex;return o<this._fixedLayoutCount?this._grid.fixedBodyView:o>=t?this._grid.rightBodyView:this._grid.bodyView},i.prototype.mouseToIndex=function(e,t,o,r){if(r.set(-1,null),this._layoutCount<1)return r;var n=this.grid,s=this._summaryBounds.bottom,l=-1;if((o-=this._contentBounds.y)>=s&&o<this._footerBounds.y){for(var u=0;u<this._fixedItemCount;u++)if(o>=s+this._fixedItemPoints[u]&&o<s+this._fixedItemPoints[u+1]){l=u,o-=s+this._fixedItemPoints[u];break}if(l<0&&this._itemCount>0){for(u=0;u<this._itemCount;u++)if(o>=s+this._itemPoints[u]&&o<s+this._itemPoints[u+1]){l=u;break}l>=0&&(l+=n.topItem)}}else o>=this._footerBounds.y?l=-2:o<this._headerBounds.y&&(l=-3);if(r.itemIndex=l,e){var h=n.getCellViewOf(e),d=h&&n.getBodyView(h),p=d instanceof Oi&&d.layoutByCell(h);if(p)return r.layout=p,r}return r},i.prototype.mouseToIndexEx=function(e,t,o,r){if(this._layoutCount<1)return r;var n=this.grid,s=this._topIndex+this._fixedItemCount,l=this._summaryBounds.bottom,u=0;if((o-=this._contentBounds.y)<l)u=-1;else if(o>=this._bodyBounds.bottom&&o<this._footerBounds.y)u=s+this._fullItemCount;else if(o>=this._footerBounds.y)u=s+this._fullItemCount;else{u=-1,o-=l;for(var h=0;h<this._fixedItemCount;h++)if(o>=this._fixedItemPoints[h]&&o<this._fixedItemPoints[h+1]){u=h;break}if(u<0&&this._itemCount>0){for(h=0;h<this._itemCount;h++)if(o>=this._itemPoints[h]&&o<this._itemPoints[h+1]){u=h;break}u>=0&&(u+=s)}}r.itemIndex=u;var d=-1,p=this._gridBounds.x;if(t<p)d=Math.max(0,this._firstLayout-1);else if(t>=this._bodyBounds.right&&t<this._clientRect.right)d=n.visibleLayoutCount-1;else{for(t-=p,h=0;h<this._fixedLayoutCount;h++)if(t>=this._fixedLayoutPoints[h]&&t<this._fixedLayoutPoints[h+1]){d=h;break}if(d<0&&this._rightLayoutCount>0){var f=t-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+p;for(h=0;h<this._rightLayoutCount;h++)if(f>=this._rightLayoutPoints[h]&&f<this._rightLayoutPoints[h+1]){d=h+this.rightFirstLayout;break}}if(d<0){for(t=t-this._fixedWidth+this._leftPos,h=this._firstLayout;h<=this._lastLayout;h++)if(t>=this._layoutPoints[h-this._fixedLayoutCount]&&t<this._layoutPoints[h-this._fixedLayoutCount+1]){d=h;break}}}return d>=0&&d<n.visibleLayoutCount?r.layout=n.getVisibleLayout(d):r.layout=null,r},i.prototype.cellIsVisible=function(e){var t=e.itemIndex,o=this._fixedItemCount;if(t>=o){if(t<this._topIndex+o)return!1;if(this._fullItemCount==0&&t==this._topIndex+o)return!0;if(t>=this._topIndex+o+this._fullItemCount)return!1}var r=e.layout,n=r.col;return!(n>=(o=this._fixedLayoutCount)&&(n=r.col-this._fixedCellCount,this._cellPoints[n]<this._leftPos||this._cellPoints[n+r.cols]-this._leftPos>this._nonFixedBounds.width))},i.prototype.clearFocusRequest=function(){this._focusIndex=null},i.prototype.focusIsVisible=function(e){return(e=e||this._focusIndex)&&this.cellIsVisible(e)},i.prototype.makeCellVisible=function(e){this._focusIndex=e.clone()},i.prototype.isAutoRowHeights=function(){return this._autoRowHeights},i.prototype.isRowGrouped=function(){return this._rowGrouped},i.prototype.scrollToNextCell=function(){for(var e=0;e<this._cellCount;e++)if(this._cellPoints[e]>this._leftPos)return this._cellPoints[e];return this._leftPos},i.prototype.scrollToPrevCell=function(){for(var e=this._cellCount-1;e>=0;e--)if(this._cellPoints[e]<this._leftPos)return this._cellPoints[e];return this._leftPos},i.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==c.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},i.prototype.$_calcFixedCellPoints=function(e,t){var o=this._layoutCount=t.visibleCount,r=t._cellWidths,n=this._fixedLayoutCount=Math.min(e.colCount,o);if(this._rightLayoutCount=Math.max(0,Math.min(e.rightCount,o-n-1)),this._rightFixed=e.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],n>0){var s=this._layouts,l=this._fixedLayoutPoints,u=this._fixedCellPoints,h=0,d=0;l.push(h),u.push(h);for(var p=0;p<n;p++){for(var f=t.getVisible(p),g=f.cols,m=0;m<g;m++)h+=r[d++],u.push(h);s.push(f),l.push(h)}this._fixedCellCount=this._cellCount=d,this._fixedWidth=l[n]+(this._fixedBarWidth=e.colBarWidth)}},i.prototype.$_calcCellPoints=function(e){var t=e.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,o=e._cellWidths,r=this._layoutPoints=[],n=this._cellPoints=[],s=this._fixedLayoutCount,l=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,t>0){var u=0,h=this._cellCount;r.push(u),n.push(u);for(var d=0;d<t;d++){for(var p=e.getVisible(d+s),f=p.cols,g=0;g<f;g++)u+=o[h++],n.push(u);l.push(p),r.push(u)}this._layoutsLength=u,this._cellCount=h,this._lastCell=h-1}},i.prototype.$_calcRightCellPoints=function(e,t){var o=t._cellWidths,r=this._layoutCount,n=this._rightLayoutPoints=[],s=this._rightCellPoints=[],l=this._layouts;if(this._rightLayoutCount>0){var u=0,h=this._cellCount;n.push(u),s.push(u);for(var d=r-this._rightLayoutCount;d<r;d++){for(var p=t.getVisible(d),f=0;f<p.cols;f++)u+=o[h++],s.push(u);l.push(p),n.push(u)}this._rightCellCount=h-this._cellCount,this._cellCount=h,this._rightWidth=n[this._rightLayoutCount]+(this._rightBarWidth=e.rightBarWidth)}},i.prototype.$_calcScrollWidth=function(e){this._scrollWidth=e.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},i.prototype.$_calcLeftPos=function(){var e=this._focusIndex&&this._focusIndex.layout,t=this._leftPos;if(e){var o=e.root.vindex,r=this._cellPoints,n=this.grid,s=n.editOptions.focusMoveStep===c.FocusMoveStep.GROUP;if(!n.isSwiping&&o>=this._fixedLayoutCount&&o<this.rightFirstLayout){var l=e.col-this._fixedCellCount,u=r[l],h=n.displayOptions.horzPageScroll&&n._eventFrom==="keydown"&&n._prevTop===this._topIndex;if(u<this._leftPos)h&&this._leftPos>=r[l+1]&&(u=u-(this.gridBounds.width+r[l]-r[l+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),t=u;else{var d=r[l+(s?e.root.cols:e.cols)]-this._leftPos-this._scrollWidth;h&&r[l]-this._leftPos>=this._scrollWidth&&(d=Math.max(r[l]-r[this.getLeftCell()],d)),d>0&&(t=Math.min(u,this._leftPos+d))}}}(t=Math.max(0,Math.min(t,this._layoutsLength-this._scrollWidth)))!==this._leftPos&&(this.grid._horzScrolled=!0,this._leftPos=t),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},i.prototype.$_checkFitting=function(e,t){var o=e.fitStyle,r=this.grid,n=r.fixedOptions,s=r.activeCellLayout.count;if(o!=c.GridFitStyle.NONE){if(s>=0&&n.colCount+n.rightCount>=s)return e.fitStyleIncludeFixed?o:void 0;var l=this._cellPoints,u=l.length;if(u>0)return o==c.GridFitStyle.EVEN_FILL||t-l[u-1]>0?o:void 0}},i.prototype.$_fitColumns=function(e,t,o){var r=this;if(e.fitStyleIncludeFixed&&this._fixedCellCount+this._rightCellCount>0){var n=[this._fixedLayoutPoints,this._layoutPoints,this._rightLayoutPoints],s=0;n.forEach(function(de){de.length>0&&(s+=de[de.length-1])});var l=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth;l=l-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),n.forEach(function(de){for(var Ce=1;Ce<de.length;Ce++)de[Ce]=Math.round(de[Ce]*(l/s))});var u=0;n.forEach(function(de,Ce){var pe=Ce===0?r._fixedCellPoints:Ce===1?r._cellPoints:r._rightCellPoints,fe=de.length,se=t._cellWidths,Ge=0;pe.length=0,pe.push(Ge);for(var Ye=0;Ye<fe-1;Ye++){var Be=r._cellLayouts.getVisible(u++),De=Be._cellWidth,Ve=de[Ye+1]-de[Ye],_e=Ve/De,Xe=Be.hcol,Me=Be.cols,re=Ge;Be._setFitWidth(Ve);for(var Ue=0;Ue<Me-1;Ue++)re+=se[Xe+Ue]*_e,pe.push(Math.round(re));Ge+=Ve,pe.push(Math.round(Ge))}pe[pe.length-1]=de[fe-1]}),this._layoutsLength=v.getLast(this._layoutPoints)||0,this._fixedWidth=this._fixedCellCount?v.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?v.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new Z(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(var h=0;h<this._layoutCount;h++)(N=this._cellLayouts.getVisible(h)).isFixed&&N._clearFitWidth();var d=this._layoutsLength,p=this._layoutPoints,f=p.length,g=this._fixedLayoutCount,m=[];for(h=1;h<p.length;h++)m.push(p[h]-p[h-1]);if(f>0){var b=e.fitStyle,C=this._layouts;if(b==c.GridFitStyle.EVEN||b==c.GridFitStyle.EVEN_FILL)for(h=1;h<f;h++)p[h]=p[h]*o/d;else if(b==c.GridFitStyle.FILL){var x=0,E=0;for(h=0;h<f-1;h++){var S=C[h+g].fillWidth;S>0?E+=S:x+=m[h]}if(E>0)for(x=o-x,h=1;h<f;h++){var P=(N=C[h-1+g]).fillWidth;p[h]=P>0?p[h-1]+P*x/E:p[h-1]+m[h-1]}else for(h=1;h<f;h++)p[h]=p[h]*o/d}var R=0;for(h=0;h<f-1;h++)p[h]=Math.round(p[h]);for(h=1;h<f-1;h++){var k=p[h]-p[h-1];k<2?(R=2-k,p[h]+=2-k):R>0&&k>2+R&&(p[h]-=R,R=0)}var D=this._cellPoints=[],F=t._cellWidths,H=0;for(D.push(H),h=0;h<f-1;h++){var N,V=(N=this._cellLayouts.getVisible(h+g))._cellWidth,j=p[h+1]-p[h],K=j/V,U=N.hcol,Y=N.cols,J=H;N._setFitWidth(j);for(var ae=0;ae<Y-1;ae++)J+=F[U+ae]*K,D.push(Math.round(J));H+=j,D.push(Math.round(H))}D[D.length-1]=p[f-1]}this._layoutsLength=p[f-1]=o}},i.prototype.$_measureTopPane=function(e){this._doMeasureTopPane(e,this._topContentBounds)},i.prototype._doMeasureTopPane=function(e,t){t.height=0},i.prototype.$_measureViewHeights=function(e,t){var o;o=0,e.header.visible?(this._headerBounds=t.clone(),o=e.headerView.measure(e,t.width,t.height).height,this._headerBounds.height=o):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new Z,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=t.y,this._headBounds.height=o,t.topBy(o),o=0,e.filterPanel.visible?(this._filterPanelBounds=t.clone(),o=e.filterPanelView.measure(e,t.width,t.height).height,this._filterPanelBounds.height=o):(this._filterPanelBounds=this._filterPanelBounds||new Z,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=t.y,this._filterBounds.height=o,t.topBy(o),o=0,e.headerSummaries.canShow?(this._summaryBounds=t.clone(),o=e.headerSummaryView.measure(e,t.width,t.height).height,e.fixedHeaderSummaryView,this._summaryBounds.height=o):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new Z,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=t.y,this._sumBounds.height=o,t.topBy(o),o=0,e.footers.canShow?(this._footerBounds=t.clone(),o=e.footerView.measure(e,t.width,t.height).height,this._footerBounds.height=o):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new Z,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=t.bottom-this._footerBounds.height,this._footBounds.height=o;var r=this._sumBounds.bottom;o=this._footBounds.y-r,this._rowBarBounds.y=r,this._rowBarBounds.height=o},i.prototype.$_sortSections=function(e){var t=[e.rowIndicator,e.stateBar,e.checkBar];return t.sort(function(o,r){var n=o.displayOrder,s=r.displayOrder;return n==s?o.staticOrder-r.staticOrder:n-s}),t},Object.defineProperty(i.prototype,"sectionObjects",{get:function(){return this._sectionObjects},enumerable:!1,configurable:!0}),i.prototype.$_measureLeftPane=function(e){this._sectionObjects=this.$_sortSections(e);var t,o=this._leftContentBounds.clone().move();this._headBounds=o.clone(),this._sumBounds=o.clone(),this._footBounds=o.clone(),this._filterBounds=o.clone(),t=e.rowBarContainer.measure(e,o.width,o.height),this._rowBarBounds=o.clone(),this._rowBarBounds.width=t.width,this._leftContentBounds.width=t.width,o.leftBy(t.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},i.prototype._measureSidePane=function(e){var t=e.sideContentPane;if(e.isSidePaneVisible()){var o=this._sideContentBounds.clone(),r=t.measure(e,o.width,o.height);this._sideContentBounds.width=r.width}else t&&t.measure(e,0,0),this._sideContentBounds.width=0},i.prototype.$_measureFixedPane=function(e){var t=this._fixedContentBounds.width=this._fixedWidth,o=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=o.x,this._fixedHeaderBounds.y=o.y,this._fixedHeaderBounds.width=o.width,o.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=o.x,this._fixedFilterBounds.y=o.y,this._fixedFilterBounds.width=o.width,o.topBy(this._fixedFilterBounds.height),t>0&&(e.fixedFilterView._rowPoints=e.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=o.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=o.width,o.topBy(this._fixedSummaryBounds.height),t>0&&(e.fixedHeaderSummaryView._rowPoints=e.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=o.x,this._fixedFooterBounds.y=o.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=o.width,o.bottomBy(-this._fixedFooterBounds.height),t>0&&(e.fixedFooterView._rowPoints=e.footerView._rowPoints.slice()),this._fixedBodyBounds=o},i.prototype.$_measureRightPane=function(e){var t=this._rightWidth;this._rightContentBounds.width=t;var o=this._rightContentBounds.clone();o.x=this._rightBarWidth,o.y=0,o.width-=o.x,this._rightHeaderBounds.x=o.x,this._rightHeaderBounds.y=o.y,this._rightHeaderBounds.width=o.width,o.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=o.x,this._rightFilterBounds.y=o.y,this._rightFilterBounds.width=o.width,o.topBy(this._rightFilterBounds.height),t>0&&(e.rightFilterView._rowPoints=e.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=o.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=o.width,o.topBy(this._rightSummaryBounds.height),t>0&&(e.rightHeaderSummaryView._rowPoints=e.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=o.x,this._rightFooterBounds.y=o.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=o.width,o.bottomBy(-this._rightFooterBounds.height),t>0&&(e.rightFooterView._rowPoints=e.footerView._rowPoints.slice()),this._rightBodyBounds=o},i.prototype.$_measureContentPane=function(e){var t=this._layoutsLength;this._contentBounds.width=t;var o=this._contentBounds.clone();o.x=o.y=0,this._headerBounds&&(this._headerBounds.x=o.x,this._headerBounds.y=o.y,this._headerBounds.width=o.width,o.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=o.x,this._filterPanelBounds.y=o.y,this._filterPanelBounds.width=o.width,o.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=o.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=o.width,o.topBy(this._summaryBounds.height)),this._dataBounds=o.clone(),this._footerBounds&&(this._footerBounds.x=o.x,this._footBounds.y=this._footerBounds.y=o.bottom-this._footerBounds.height,this._footerBounds.width=o.width,o.bottomBy(-this._footerBounds.height)),this._bodyBounds=o},i.prototype.getRowHeightOfCallback=function(e,t){var o=e.getItem(t),r=e.displayOptions.rowHeightCallback;if(r){var n=r.call(this,e.handler,o.type,t),s=[],l=void 0,u=this.trs;if(n!=null){if(Array.isArray(n))for(s=n.slice(0,u),h=n.length;h<u;h++)s.push(this.minRowHeight);else{l=0;for(var h=1;h<u;h++){var d=Math.max(this.minRowHeight,h%2?Math.floor(n/u):Math.round(n/u));s.push(d),l+=d}s.push(Math.max(n-l,this.minRowHeight))}var p=s.reduce(function(f,g){return f+g},0);return o.heights=s.slice(),p}}},i.prototype.$_getItemHeight=function(e,t){var o=e.getItem(t),r=o.height;if(!isNaN(r))return r;if(this._autoRowHeights)return this._minItemHeight;if(e.displayOptions.rowHeightCallback&&v.included(o.type,c.ItemType.ROW,c.ItemType.TREE)){var n=this.getRowHeightOfCallback(e,t);if(n)return n;o.heights=null}else o.heights=null;return this._itemHeight},i.prototype.$_calcItemPoints=function(e){var t=this.grid;if(!(t._eventFrom==="mousedown"&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))){e=e==null||e;var o=t.itemSource,r=this.syncHeight(),n=r?1/0:this._itemsBounds;this._topIndex=r?0:this._topIndex;var s=0,l=o?Math.min(o.fixedCount,o.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],l>0){this._fixedItemPoints.push(s);for(var u=0;u<l&&s<n;u++)s+=this.$_getItemHeight(t,u),this._fixedItemPoints.push(s),this._fixedItemCount++;this._fixedHeight=s,s+=this._fixedBarHeight=t.fixedOptions.rowBarHeight}var h=t.itemCount-this._fixedItemCount;if(this._itemPoints=[s],this._itemCount=0,this._fullItemCount=0,h>0&&s<n){var d=this._topIndex,p=-1;if(this._focusIndex&&(p=this._focusIndex.itemIndex)>=this._fixedItemCount&&p<d+this._fixedItemCount){var f=p-this._fixedItemCount;(g=t.topIndexChanging(d,p-this._fixedItemCount-d,!0,!1))==null||isNaN(g)||(f=this._topIndex+g),d=this._topIndex=f}for(u=d;u<h&&s<n;u++)s+=this.$_getItemHeight(t,u+this._fixedItemCount),this._itemCount++,this._itemPoints.push(s);if(this._fullItemCount=this._itemCount-(s>n?1:0),e&&p>=this._topIndex+this._fixedItemCount+this._fullItemCount){s=this.fixedItemCount>0?this._fixedHeight+t.fixedOptions.rowBarHeight:0;var g,m=p-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;for((g=t.topIndexChanging(this._topIndex,m,e,!1))==null||isNaN(g)||(m=g),this._topIndex+=m,this._itemPoints=[s],this._itemCount=0,this._fullItemCount=0,u=this._topIndex;u<t.itemCount-this._fixedItemCount&&s<n;u++)s+=this.$_getItemHeight(t,u+this._fixedItemCount),this._itemCount++,this._itemPoints.push(s);this._fullItemCount=this._itemCount-(s>=n?1:0)}}else this._topIndex=0}},i.prototype.$_updateScrollInfo=function(e,t,o){var r=this._reqScrollBarWidth,n=this._reqScrollBarHeight,s=o?this._tableItemPoints:this._itemPoints,l=s[s.length-1],u=this._layoutsLength,h=t.fitStyle==c.GridFitStyle.EVEN_FILL,d=this.syncHeight();this._hscrolled=u>this._scrollWidth,this._vscrolled=!d&&(this._topIndex>0||e.itemCount>this._itemCount+this._fixedItemCount||l>this._bodyBounds.height);var p=n>0&&this._hscrolled&&!h,f=r>0&&this._vscrolled;p!=f&&(p?r>0&&!d&&(f=l>this._bodyBounds.height-n):n>0&&!h&&(p=u>this._scrollWidth-r)),this._hscrollBar=p,this._vscrollBar=f,this._hscrolled=this._hscrolled||p,this._vscrolled=this._vscrolled||f,this._scrollBarWidth=f?r:0,this._scrollBarHeight=p?n:0,this._scrollWidth-=this._scrollBarWidth},i.prototype.$_recalcScrollInfo=function(e){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(e,e.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},i.prototype.$_adjustVerticals=function(){var e=this._scrollBarHeight,t=this._itemPoints;if(e>0){this._leftContentBounds.height-=e,this._footBounds.y-=e,this._rowBarBounds.height-=e,this._sideContentBounds.height-=e,this._fixedContentBounds.height-=e,this._fixedFooterBounds.y-=e,this._fixedBodyBounds.height-=e,this._nonFixedBounds.height-=e,this._contentBounds.height-=e,this._footerBounds.y-=e,this._bodyBounds.height-=e,this._rightContentBounds.height-=e,this._rightFooterBounds.y-=e,this._rightBodyBounds.height-=e;for(var o=this.syncHeight()?1/0:this._bodyBounds.height;t[t.length-2]>o;)this._itemCount--,t.pop();this._fullItemCount=Math.max(0,this._itemCount-(t[this._itemCount]>=o?1:0));var r=this._focusIndex?this._focusIndex.itemIndex:-1;if(r>=0&&this._itemCount>this._fullItemCount&&r>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var n=this.grid,s=t[this._itemCount],l=0;s>o;)s-=t[++l];var u=n._prevTop+1!==this._topIndex;if(l>0&&n._eventFrom!=="mousedown"){var h=n.topIndexChanging(this._topIndex,l,!!this._focusIndex,!0);h==null||isNaN(h)||(l=h),t.splice(0,l),this._topIndex+=l,this._itemCount-=l,this._fullItemCount-=l,s=t[0];for(var d=0;d<t.length;d++)t[d]-=s;if(s=t[t.length-1],n.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;s<o&&this._topIndex+this._fixedItemCount+this._itemCount<n.itemCount;)t.push(s+=this.$_getItemHeight(n,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;u&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=t[t.length-1],this._fullItemCount==this._itemCount){var p=t[t.length-1];this._rowBarBounds.height=p}},i.prototype.$_adjustHorizontals=function(e){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var t=this._cellPoints,o=t.length,r=this._leftPos,n=r+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var s=0;s<o;s++)if(t[s]>r){this._startCell+=s-1;break}for(s=o-2;s>=0;s--)if(t[s]<n){this._endCell+=s;break}},i.prototype.$_calcTableRowPoints=function(){var e,t,o=this._trs,r=this._items,n=this._fixedItemCount,s=this._itemCount+n,l=this._fixedTableRowPoints=[],u=this._tableRowPoints=[],h=this._dataRowHeights,d=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,n>0){for(var p=this._fixedItemPoints;d<n;d++){var f=p[d];if(e=r[d],l.push(f),this._fixedTableRowCount++,e.isData){t=e.heights||h;for(var g=Math.floor((p[d+1]-f)/o),m=Math.round(p[d+1]-f)/o,b=1;b<o;b++)l.push(f+=t[b-1]?t[b-1]:b%2?g:m),this._fixedTableRowCount++}}l.push(this._fixedDataHeight=this._fixedItemPoints[n])}if(this.itemCount>0){for(p=this._itemPoints;d<s;d++)if(f=p[d-n],g=p[d-n+1]-f,e=r[d],u.push(f),this._tableRowCount++,e.isData){t=e.heights||h;var C=Math.floor(g/o);for(m=Math.round(g/o),b=1;b<o;b++)u.push(f+=t[b-1]?t[b-1]:b%2?C:m),this._tableRowCount++}u.push(this._dataHeight=p[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},i.prototype._doMeasure=function(e,t,o){var r=this._grid,n=r.displayOptions,s=r.fixedOptions,l=e.clone();this._refreshMode=n.refreshMode,this._autoRowHeights=n.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=t,this._reqScrollBarHeight=o,this._minRowHeight=n.minTableRowHeight,this._maxHeight=n.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,n.minRowHeight),this._trs==1&&(this._minRowHeight=this.minItemHeight),r.heightMeasurer.measure(r),this.$_calcFixedCellPoints(s,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(s,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(r);var u=r.container._containerDiv;!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==r.displayOptions.syncGridHeight&&u.style.height!==r.container._orgCssHeight&&(u.style.height=r.container._orgCssHeight),(function(){this._topContentBounds=l.clone(),this.$_measureTopPane(r),l.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=l.clone(),this.$_measureLeftPane(r),l.leftBy(this._leftContentBounds.width),this._sideContentBounds=l.clone(),this._measureSidePane(r),l.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(r,l.clone().move()),this._fixedContentBounds=l.clone(),this.$_measureFixedPane(r),l.leftBy(this._fixedContentBounds.width),this._rightContentBounds=l.clone(),this.$_measureRightPane(r),this._rightContentBounds.x=l.right-this._rightContentBounds.width,l.width-=this._rightContentBounds.width,this._contentBounds=l.clone(),this.$_measureContentPane(r),this._clientRect=e.clone(),this._nonFixedBounds=new Z(this._fixedContentBounds.right,this._fixedContentBounds.y,e.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height)}).call(this),this._itemsBounds=e.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(e),this.$_updateScrollInfo(r,n);var h=this._fitStyle;(this._fitStyle=this.$_checkFitting(n,this._scrollWidth))?(this.$_fitColumns(n,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):r._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=h)&&r.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(e),this._gridBounds=new Z(this._fixedContentBounds.x,this._fixedContentBounds.y,e.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},i.prototype.$_layoutTopPane=function(e,t){var o=this._topContentBounds;this.topPanelVisible?t.setRect(o):t.setBounds(-10,-10,1,1),this._doLayoutTopPane(e,t)},i.prototype._doLayoutTopPane=function(e,t){},i.prototype.$_layoutLeftPane=function(e,t){var o=this._leftContentBounds;function r(n,s,l,u){(n.visible=s.visible)&&(n._table.parentElement!==n._dom&&n._dom.appendChild(n._table),l&&(n.setRect(u),n.layoutContent(this)))}(t.visible=!o.isEmpty)?(t.setRect(o),r.call(this,e.headView,e.header,!1,this._headBounds),r.call(this,e.sumView,e.headerSummaries,!0,this._sumBounds),r.call(this,e.footView,e.footers,!0,this._footBounds),r.call(this,e.filterView,e.filterPanel,!0,this._filterBounds),e.rowBarContainer.visible=e.rowIndicator.visible||e.stateBar.visible||e.checkBar.visible):[e.headView,e.sumView,e.footView].forEach(function(n){n&&v.detach(n._table)})},i.prototype._layoutSidePane=function(e,t){var o=this._sideContentBounds;t.setRect(o),(t.visible=!o.isEmpty)&&t.layoutContent(this,o.width,o.height)},i.prototype._prepareItems=function(e){for(var t=this._topIndex+this._fixedItemCount,o=0;o<this._fixedItemCount;o++){var r=this._rs.getItem(o);this._items.push(r)}var n=this.grid.bodyView,s=e?n._getTableRowCount(this):this._itemCount;for(o=0;o<s&&(r=this._rs.getItem(o+t));o++)this._items.push(r);e&&(this._itemCount=this._items.length-this._fixedItemCount)},i.prototype.$_layoutFixedPane=function(e,t){var o,r=this._fixedContentBounds;if(t.visible=!r.isEmpty){var n=e._columnsDirty||e._cellLayoutDirty||e._needPosition,s=n||e._dataChanged||e._itemCheckChanged;t.setRect(r),((o=e.fixedHeaderView).visible=e.header.visible)&&(o.setRect(this._fixedHeaderBounds),o.layoutContent(this)),((o=e.fixedHeaderSummaryView).visible=e.headerSummaries.canShow)&&(s||e.headerSummaries.dirty)&&(o.setRect(this._fixedSummaryBounds),o.layoutContent(this)),((o=e.fixedFilterView).visible=e.filterPanel.visible)&&(n||e.filterPanel.dirty)&&(o.setRect(this._fixedFilterBounds),o.layoutContent(this)),((o=e.fixedFooterView).visible=e.footers.canShow)&&(s||e.footers.dirty)&&(o.setRect(this._fixedFooterBounds),o.layoutContent(this)),(o=e.fixedBodyView).visible=!0,t.layoutContent(this,r.width,r.height)}else e.fixedHeaderView.visible=!1,e.fixedHeaderSummaryView.visible=!1,e.fixedFilterView.visible=!1,e.fixedFooterView.visible=!1,e.fixedBodyView.visible=!1},i.prototype.$_layoutRightPane=function(e,t){var o,r=this._rightContentBounds,n=e._columnsDirty||e._cellLayoutDirty||e._needPosition,s=n||e._dataChanged||e._itemCheckChanged;(t.visible=!r.isEmpty)?(this._rightFixed||this._hscrolled||(r.x=this._contentBounds.right),t.setRect(r),((o=e.rightHeaderView).visible=e.header.visible)&&(o.setRect(this._rightHeaderBounds),o.layoutContent(this)),((o=e.rightHeaderSummaryView).visible=e.headerSummaries.canShow)&&(s||e.headerSummaries.dirty)&&(o.setRect(this._rightSummaryBounds),o.layoutContent(this)),((o=e.rightFilterView).visible=e.filterPanel.visible)&&(n||e.filterPanel.dirty)&&(o.setRect(this._rightFilterBounds),o.layoutContent(this)),((o=e.rightFooterView).visible=e.footers.canShow)&&(s||e.footers.dirty)&&(o.setRect(this._rightFooterBounds),o.layoutContent(this)),(o=e.rightBodyView).visible=!0,t.layoutContent(this,r.width,r.height)):(e.rightHeaderView.visible=!1,e.rightHeaderSummaryView.visible=!1,e.rightFilterView.visible=!1,e.rightFooterView.visible=!1,e.rightBodyView.visible=!1)},i.prototype.$_layoutContentPane=function(e,t){var o,r=this._contentBounds,n=e._columnsDirty||e._cellLayoutDirty||e._needPosition,s=n||e._dataChanged||e._itemCheckChanged;(t.visible=!r.isEmpty)?(r.x-=this._leftPos,t.setRect(r),((o=e.headerView).visible=e.header.visible)&&(this._headerBounds.width=r.width,o.setRect(this._headerBounds),o.layoutContent(this)),((o=e.filterPanelView).visible=e.filterPanel.visible)&&(n||e.filterPanel.dirty)&&(this._filterPanelBounds.width=r.width,o.setRect(this._filterPanelBounds),o.layoutContent(this)),((o=e.headerSummaryView).visible=e.headerSummaries.canShow)&&(s||e.headerSummaries.dirty)&&(this._summaryBounds.width=r.width,o.setRect(this._summaryBounds),o.layoutContent(this)),((o=e.footerView).visible=e.footers.canShow)&&(s||e.footers.dirty)&&(this._footerBounds.width=r.width,o.setRect(this._footerBounds),o.layoutContent(this)),(o=e.bodyView).visible=!0,this._bodyBounds.width=r.width,t.layoutContent(this,r.width,r.height)):e.headerView.visible=e.headerSummaryView.visible=e.footerView.visible=e.bodyView.visible=!1},i.prototype.$_layoutWatingPane=function(e,t){var o=e.bounds.clone();t.setRect(o),t.layoutContent(this,o.width,o.height)},i.prototype._doLayout=function(e,t){var o;this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),o=e._topContentPane,this.$_layoutTopPane(e,o),o=e._leftContentPane,this.$_layoutLeftPane(e,o),o=e._fixedContentPane,this.$_layoutFixedPane(e,o),o=e._rightContentPane,this.$_layoutRightPane(e,o),o=e._contentPane,this.$_layoutContentPane(e,o)},i.prototype.$_adjustHeader=function(e,t,o,r){var n=e.fixedHeaderView,s=e.rightHeaderView,l=e.headerView,u=e.header.height,h=l.height,d=0,p=!1;if(o&&(p=n.$_checkHeight()),!p&&r&&(p=s.$_checkHeight()),!p&&t&&(p=l.$_checkHeight()),p){var f=[],g=0;o&&(n.$_getHeights(f),u>0?n.$_distributeHeights(u,f):g=Math.max(g,n.$_adjustHeights(f))),r&&(s.$_getHeights(f),u>0?s.$_distributeHeights(u,f):g=Math.max(g,s.$_adjustHeights(f))),t&&(l.$_getHeights(f),u>0?l.$_distributeHeights(u,f):g=Math.max(g,l.$_adjustHeights(f))),u<0&&(d+=g-h,this._headBounds.height=g,o&&this._fixedHeaderBounds.height!=g&&(this._fixedHeaderBounds.height=g,n.setRect(this._fixedHeaderBounds),n.$_adjustHeights(f)),r&&this._rightHeaderBounds.height!=g&&(this._rightHeaderBounds.height=g,s.setRect(this._rightHeaderBounds),s.$_adjustHeights(f)),t&&this._headerBounds.height!=g&&(this._headerBounds.height=g,l.setRect(this._headerBounds),l.$_adjustHeights(f)))}return d},i.prototype._adjustLayout=function(e,t){var o,r=this._autoRowHeights,n=e._fixedContentPane,s=e._rightContentPane,l=e._contentPane,u=e.fixedHeaderView,h=e.rightHeaderView,d=e.headerView,p=e.headView.visible,f=n.visible,g=s.visible,m=l.visible,b=0,C=0,x=this.$_adjustHeader(e,m,f&&d.visible&&u.visible,g&&h.visible);if(x!=0&&(C=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=x,f&&(e.fixedFilterView.y=C),g&&(e.rightFilterView.y=C),m&&(e.filterPanelView.y=C),p&&(e.filterView.y=C)),x!=0&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),e.headerSummaries.canShow&&x!=0&&(f&&(e.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),g&&(e.rightHeaderSummaryView.y=this._rightSummaryBounds.y),m&&(e.headerSummaryView.y=this._summaryBounds.y),p&&(e.sumView.y=this._sumBounds.y)),t.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),x!=0&&(C=this._sumBounds.bottom,b=Math.min(t.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=C,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=b),(o=e.fixedBodyView).visible&&o.setRect(this._fixedBodyBounds),(o=e.bodyView).visible&&o.setRect(this._bodyBounds),(o=e.rightBodyView).visible&&o.setRect(this._rightBodyBounds),this.$_layoutBodyRows(e,f,m,g,this._bodyBounds.height),this.$_adjustTableRowHeights(),r&&this.$_recalcScrollInfo(e),this.syncHeight()){var E=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,S=e.container._containerDom,P=e.container._containerDiv,R=S.offsetWidth-S.clientWidth,k=P.offsetHeight,D=this._tableItemPoints[this._tableItemPoints.length-1];(this._fitSyncHeight=this.itemCount>0&&(E+D+R>=k||e.displayOptions.syncGridHeight===c.SyncGridHeight.ALWAYS))?P.style.height=E+D+R+"px":(e.recallHeight(),D=k-E-R+(this.topPanelVisible?0:1));var F=new Z(0,0,S.clientWidth,S.clientHeight);e.setRect(F),this._topContentBounds.width=F.width,this.$_layoutTopPane(e,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=D,e.bodyView.setRect(this._bodyBounds),e.fixedBodyView.setRect(this._fixedBodyBounds),e.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(e,e._contentPane),this.$_layoutFixedPane(e,e._fixedContentPane),this.$_layoutRightPane(e,e._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,e.footView.y=e.footerView.y=e.fixedFooterView.y=e.rightFooterView.y=this._bodyBounds.bottom,t=this._gridBounds.clone()}else this._fitSyncHeight=!1;if(this._topIndex>0){var H=r?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+H<=this._gridBounds.bottom&&(r?this.$_fillBottomAuto(e,f,m,g,this._bodyBounds.height):this.$_fillBottomFixed(e,f,m,g,this._bodyBounds.height)),this._topIndex==0){var N=this._vscrollBar;this.$_recalcScrollInfo(e),this._vscrollBar!=N&&this._fitStyle&&(this.$_layoutBodyRows(e,f,m,g,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}e.fixedBodyView.visible&&e.fixedBodyView.$_resetCellHeights2(this,r),e.bodyView.visible&&e.bodyView.$_resetCellHeights2(this,r),e.rightBodyView.visible&&e.rightBodyView.$_resetCellHeights2(this,r);var V=this._tableItemPoints;this._dataBounds.height=V[V.length-1],C=this._sumBounds.bottom,b=Math.min(t.height,this._dataBounds.height),this._rowBarBounds.y=C,this._rowBarBounds.height=b,f&&e._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),g&&e._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height),(o=e.headView).visible&&(o.setRect(this._headBounds),o.layoutContent(this)),(o=e.rowBarContainer).visible&&(o.setRect(this._rowBarBounds),o.layoutContent(this))},i.prototype.$_layoutBodyRows=function(e,t,o,r,n,s){function l(re,Ue,st,qe){m._items.push(re),S.forEach(function(Qe,Ke){Qe&&Qe.layoutRow(Ue,P[Ke],st,qe,re)})}function u(re,Ue,st,qe){var Qe=re.height,Ke=[];if(!e.displayOptions.refCalcHeights||isNaN(Qe)){for(var xt=0;xt<N;xt++)Ke[xt]=0;S.forEach(function(Ao){for(var Ut=Ao&&Ao._tbody.children,Gi=0;Ut&&Gi<N;Gi++)Ke[Gi]=Math.round(Math.max(Ke[Gi],H,Ut[st+Gi].offsetHeight))}),re.heights=Ke}else if(re.heights)Ke=re.heights;else{var Ct=0,Ai=0;for(xt=0;xt<N;xt++)Ct+=Ai=xt%2?Math.floor(Qe/N):Math.round(Qe/N),Ke.push(Ai);Ke.push(k-Ct)}Qe=0;var Qi=Ke.reduce(function(Ao,Ut){return Ao+Ut},0)+3;if(Qi>V){var di=V/Qi;Qi=V;for(var pi=0;pi<Ke.length-1;pi++)Qi-=Ke[pi]=Math.max(H,Math.floor(Ke[pi]*di));Ke[Ke.length-1]=Math.max(H,Qi)}for(pi=0;pi<N;pi++)Qe+=Ke[pi],qe.push(Ue+=Ke[pi]);return b.setRowHeight(re,Qe,!1),Qe}s===void 0&&(s=!0);var h,d=t&&this._fixedCellCount>0?e.fixedBodyView:null,p=o&&this.cellCount>0?e.bodyView:null,f=(r&&this._rightCellCount)>0?e.rightBodyView:null,g=this._dataRowHeights,m=this;if(s&&this.$_checkColumnMerging(e,this.syncHeight()),h=p||d||f){var b=e.itemSource,C=b?Math.min(b.fixedCount,b.itemCount):0,x=this._autoRowHeights,E={lm:this,grid:e,topIndex:this._topIndex,fixedItemCount:C,mergeFixed:e.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},S=[d,p,f],P=[[],[],[]];S.forEach(function(re){re&&re._doPrepareContent(m)}),n=this.syncHeight()?1/0:n;var R,k,D,F,H=this._minRowHeight,N=h._trs,V=this._maxHeight>0?Math.min(Math.max(this._maxHeight,H*N),n):n,j=Math.floor(S.reduce(function(re,Ue){return Ue?Math.max(Ue.tableRowCount,re):re},0)/N),K=0,U=0,Y=0,J=[],ae=[],de=[];this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[];var Ce=Math.min(C,this._fixedItemCount,Math.ceil(n/H));if(this._fixedHeight=0,C>0){J.push(U),ae.push(Y);for(var pe=K,fe=0;fe<Ce;fe++)l(b.getItem(fe),E,fe,pe),pe+=N;for(fe=0;fe<C&&U<n;fe++){F=b.getItem(fe);var se=N;if(this._items.indexOf(F)<0&&l(F,E,fe,K),x)Y+=k=u(F,Y,K,ae);else{R=Y,k=this._fixedItemPoints[fe+1]-this._fixedItemPoints[fe],D=Math.floor(k/se);for(var Ge=Math.round(k/se),Ye=F.heights||g,Be=0;Be<se-1;Be++)ae.push(Y+=Ye[Be]?Ye[Be]:Be%2?Ge:D);ae.push(Y=R+k)}this._fixedTableRowCount+=se,U+=k,J.push(U),this._fixedDataHeight=U,K+=se}this._fixedHeight=U,U<n&&(k=0,S.forEach(function(re){re&&(k=re.layoutFixedBar(m,K))}),K++,U+=k,Y+=k),j=j-this._fixedItemCount-1}this._fixedItemCount=J.length?J.length-1:0;var De=e.itemCount-this._fixedItemCount,Ve=[U];if(de.push(U),Ce=Math.min(De,j,Math.ceil((n-U)/H)),this._itemCount=0,this._fullItemCount=0,De>0&&U<n){var _e=this._topIndex,Xe=-1;for(this._focusIndex&&(Xe=this._focusIndex.itemIndex)>=this._fixedItemCount&&Xe<_e+this._fixedItemCount&&(_e=this._topIndex=Xe-this._fixedItemCount),pe=K,fe=0;fe<Ce&&fe+_e<De&&(F=b.getItem(fe+_e+C));fe++)l(F,E,this._fixedItemCount+fe,pe),pe+=F.isData?N:1;for(fe=_e;fe<De&&U<n;fe++){if(se=(F=b.getItem(fe+C)).isData?N:1,this._items.indexOf(F)<0&&l(F,E,this._fixedItemCount+fe-_e,K),F.isData)if(x)Y+=k=u(F,Y,K,de);else{for(R=Y,k=this._itemPoints[fe-_e+1]-this._itemPoints[fe-_e],D=Math.floor(k/se),Ge=Math.round(k/se),Ye=F.heights||g,Be=0;Be<se-1;Be++)de.push(Y+=Ye[Be]?Ye[Be]:Be%2?Ge:D);de.push(Y=R+k)}else k=this._itemPoints[fe-_e+1]-this._itemPoints[fe-_e],de.push(Y+=k);this._tableRowCount+=se,U+=k,Ve.push(U),this._itemCount++,this._dataHeight=U,K+=se}this._fullItemCount=this._itemCount-(U>n?1:0)}x&&S.forEach(function(re){re&&re.$_resetHeights(ae,de)}),v.ieOld&&S.forEach(function(re){re&&re.$_resetCellStyleHeights(ae,de)}),this._fixedItemPoints=J,this._itemPoints=Ve,this._fixedTableRowPoints=ae,this._tableRowPoints=de,this._dataBounds.height=Ve[Ve.length-1];var Me=this._items.length=this.fixedItemCount+this._itemCount;S.forEach(function(re){re&&re.cleanRows(Me,K)})}},i.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){for(var e=this._items,t=this._trs,o=this._fixedTableRowPoints,r=this._fixedTableItemPoints=[0],n=0,s=1,l=this._fixedItemCount;s<=l;s++,n++)r.push(o[s*t]);o=this._tableRowPoints,r=this._tableItemPoints=[o[0]],s=0;var u=0;for(l=this._itemCount;s<l;s++,n++)e[n].isData?r.push(o[u+=t]):r.push(o[++u])}else this._tableItemPoints=this._tableRowPoints.slice()},i.prototype.$_fillBottomFixed=function(e,t,o,r,n){for(var s=this._dataBounds.height,l=this._topIndex,u=0;(s+=this.$_getItemHeight(this.grid,l--))<this._bodyBounds.height&&l>=0;)u++;this._topIndex=Math.max(0,this._topIndex-u),this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,o,r,n),this.$_adjustTableRowHeights()},i.prototype.$_fillBottomAuto=function(e,t,o,r,n){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var s=this._tableItemPoints,l=s[1]-s[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,o,r,n),this.$_adjustTableRowHeights(),l+(s=this._tableItemPoints)[s.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,o,r,n),this.$_adjustTableRowHeights();break}}},i.prototype.$_prepareColumnMerges=function(e,t,o,r){for(var n=this._fixedItemCount,s=this._itemCount,l=!1,u=0,h=e.length;u<h;u++){var d=e[u],p=d&&d.layout;p&&p.canMerge()?((f=p.merges)||((f=new xs(p)).clear(),f.initialize(_o.INIT_COUNT)),f.refreshRooms(t,o,r),f.prepareCells(n,s),f.refreshCells(n,this.topIndex),p.$_setMerged(!0),l=!0):p.$_setMerged(!1)}var f,g=this.grid.checkBar;return g.canMerge()?((f=g.merges)||((f=new sc(g)).clear(),f.initialize(_o.INIT_COUNT)),f.refreshRooms(t,o,r),f.prepareCells(n,s),f.refreshCells(n,this.topIndex),g._merged=!0):g._merged=!1,l},i.prototype.$_checkColumnMerging=function(e,t){t===void 0&&(t=!1);var o=e.fixedOptions,r=o.rowCount,n=this._contentBounds.height/this._minItemHeight-r,s=this._topIndex,l=r>0&&o.mergeRows,u=t?r:r+s,h=t?e.itemCount-1:Math.min(e.itemCount-1,r+s+n-1);h>=0&&this.$_prepareColumnMerges(e.getHorzColumns(),u,h,l)},i}(me),xy=function(a){function i(e){var t=a.call(this,e)||this;return t.summaryIndex=0,t.rowIndex=-1,t.rendererClass="",t.style=new Gh,t.html=void 0,t.text=e[v.TextProp],t}return w(i,a),i.prototype.dispose=function(){a.prototype.dispose.call(this),this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(e){a.prototype.clear.call(this,e);var t=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(t.className=this.rendererClass=""),this.text&&(t[v.TextProp]=this.text=""),this.html&&(t.innerHTML=this.html=""),this},i.prototype.refreshFormatters=function(e){var t;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(t=e.textFormat)&&(this.textFormatter&&this.textFormatter.format==t||(this.textFormatter=Yr.getFormatter(t))),(t=e.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==t||(this.numberFormatter=ji.getFormatter(t))),(t=e.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==t||(this.datetimeWriter=Lt.getFormatter(t))),(t=e.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==t||(this.booleanFormatter=ho.getFormatter(t))),this.prefix=e.prefix,this.suffix=e.suffix},i.prototype.setText=function(e){e!==this.text&&(this.cell.firstElementChild[v.TextProp]=(this.text=e)||"")},i.prototype.setHtml=function(e){e!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=e)||"")},i.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},i.prototype.setRendererClassName=function(e){e!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=e)},i}(Cr),Vn=function(a){function i(e,t,o){var r=a.call(this,e,t,o)||this;return r._rowPoints=[],r._cells=[],r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++){var n=o[r];if(n&&n.cell===e)return n}return null},i.prototype.layoutByCell=function(e){var t=this.tableCellByCell(e);return t&&t.layout},i.prototype.columnByCell=function(e){var t=this.layoutByCell(e);return t&&t._columnObj},i.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},i.prototype._doDrawCell=function(e,t,o){},i.prototype._doRender=function(e){},i.prototype._getStartCell=function(e){return e.getStartCell()},i.prototype._getEndCell=function(e){return e.getEndCell()},i.prototype._prepareCellContent=function(e,t){return xe(e).createElement("div")},i.prototype._doMeasure=function(e,t,o){for(var r=e.layoutManager,n=this._getSummaryRows(r),s=this._getCollection(),l=this._getSummaryHeight(e.heightMeasurer),u=0,h=this._rowPoints=[u],d=0,p=e.layoutManager.getDataRowHeights(n),f=p.reduce(function(k,D){return k+D},0),g=0,m=s.visibleCount;g<m;g++){var b=s.getVisible(g),C=Math.max(f,b.height);C<=0&&(C=l*n),C=Math.max(b.minHeight,C);var x=b.heights;if(x&&x.length>0){for(var E=0;E<n;E++)x[E]=isNaN(x[E])||x==null?l:x[E];C=x.reduce(function(k,D){return k+D},0)}for(var S=Math.floor(C/n),P=0,R=0;R<n-1;R++)x&&x.length>0?(u+=x[R],h.push(u),P+=x[R]):p[R]?(u+=Math.round(p[R]*(C/f)),h.push(u),P+=Math.round(p[R]*(C/f))):(u+=S,h.push(u),P+=S);u+=C-P,h.push(u),d+=C}return vo.create(t,d)},i.prototype._doPrepareTableExtents=function(e){},i.prototype.$_refreshHeadTitle=function(e,t){for(var o=this._cells[0],r=t.children[0],n=0;r&&n<o.length;n++){var s=o[n].layout.source,l=r.children[n];l&&s&&(l[v.TextProp]=(s.header.getDisplayText()||s.firstColumn.header.displayText)+" summary")}},i.prototype._doLayoutContent=function(e){var t=e.grid,o=this._getCollection(),r=this._getSummaryCount(e),n=e.cellLayouts._dataCells,s=n.length,l=this._getFirstCell(e),u=this._getStartCell(e)-l,h=this._getEndCell(e)-l;this._refreshCells(e,r,n,this._tbody),this.$_refreshSpans(e,s*r),this.$_refreshHeadTitle(e,this._thead);for(var d=0;d<r;d++)for(var p=o.getVisible(d),f=0;f<s;f++){var g=this._cells[d*s+f],m=this._getTableRow(e,d*s+f);v.setClassName(m,p.styleName||"");for(var b=u;b<=h;b++){var C=g[b];if(C.visible){var x=C.layout;if(x.isProxy)C.setText(""),C.setClassName(p.getCellStyleName());else if(x instanceof it)C.setText(""),C.setClassName(p.getCellStyleName());else{var E=p.getCell(x);this._updateCell(t,p,E,C)}}}}},i.prototype._updateCell=function(e,t,o,r){var n=o,s=n.getSummary(),l=t.getCellStyle(o,r.style.clear());if(r.setClassName(l.styleName),r.setRendererClassName(this._getRendererStyle()),r.refreshFormatters(l),s){t.getCellFormatters(s,r);var u=n.getTemplate(r);u===void 0?r.setText(n.getDisplayText(r)):r.setHtml(u)}else r.setText("")},i.prototype._getTableRowHeight=function(e,t){return this._rowPoints[t+1]-this._rowPoints[t]},i.prototype._refreshCells=function(e,t,o,r){for(var n=this._cells,s=r.children,l=s.length,u=o.length,h=this._getFirstCell(e),d=this._getLastCell(e)-h+1,p=n.length;p<l;p++)n.push([]);p=0;for(var f=0;p<t&&f<l;p++)for(var g=0;g<u;g++){for(var m=n[f],b=s[f].children,C=o[g],x=0;x<d;x++){var E=C[x+h],S=m[x];S?S.cell!==b[x]||S.layout!=E&&(S.layout=E,S.clear(!0)):(S=m[x]=new xy(b[x])).layout=E,S.spanned=!1,S.summaryIndex=p,S.rowIndex=f}for(f++,x=d;x<m.length;x++)m[x].dispose();m.length=d}for(f=l;f<n.length;f++){var P=n[f];for(x=0;x<P.length;x++)P[x].dispose(),P[x]=null}n.length=l},i.prototype.$_refreshSpans=function(e,t){for(var o=this._getFirstCell(e),r=this._getFirstCell(e)-o,n=this._getLastCell(e)-o,s=e.cellLayouts._dataCells.length,l=this._rowPoints,u=0;u<t;u++)for(var h=this._cells[u],d=h.length,p=r;p<=n;p++){var f=h[p],g=f.layout,m=g.parent,b=m&&m.vertical;if(!f.spanned)if(g.isProxy)f.clear(!1);else{var C=0,x=0,E=this._getSpanOf(g,f.summaryIndex)-1,S=this._getUserSpanOf(g,f.summaryIndex);if(S){var P=S.footerCount||0,R=P>0?P*t:S.rowspan||1,k=S.colspan||1;f.set(k,R,!0);for(var D=0;D<R;D++)for(var F=0;F<k;F++){var H=this._cells[D+u]&&this._cells[D+u][F+p];H&&H!==f&&H.span()}}if(!S&&E>0){var N=0,V=g.vindex+1;if(b)for(;N++<E&&N<s&&(j=m.getVisible(V++));)x+=j._dspan,this._cells[u+N][p].span();else for(;N++<E&&p-r+N<d&&V<m.visibleCount;){var j;if(!(j=m.getVisible(V++)))break;C+=j._cspan,h[p+N].span()}}g.isNull&&f.clear(!0),!S&&f.set(g._cspan+C,g._dspan+x,!0),f.rowSpan>1&&(f.height=l[f.rowIndex+f.rowSpan]-l[f.rowIndex],f.cell.firstElementChild.style.maxHeight=f.height-2+"px")}}},i.prototype._doPrepareTableRow=function(e,t,o,r){a.prototype._doPrepareTableRow.call(this,e,t,o,r)},i}(tr),Ns=function(a){function i(e,t){return a.call(this,e,t,"footerView")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-footer"},i.prototype._getRendererStyle=function(){return"rg-footer-renderer"},i.prototype._getSummaryRows=function(e){return e.dataRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(e){return e.footerHeight},i.prototype._getSummaryCount=function(e){return e.footerCount},i.prototype._getSpanOf=function(e,t){return e.getFooterSpan(t)},i.prototype._getUserSpanOf=function(e,t){return e.getFooterUserSpan(t)},i.prototype._getTableRowCount=function(e){return e.dataRows*e.footerCount},i.prototype._getSummaryItem=function(e,t){return e.firstColumn.footers.get(t)},i}(Vn),Iy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-footer"},i.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype._getCellCount=function(e){return e.fixedCellCount},i.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},i}(Ns),Ey=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-footer"},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype._getCellCount=function(e){return e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},i}(Ns),Il=function(a,i){return typeof a=="object"&&Object.prototype.toString.call(a).indexOf(i)>=0},Cc=function(a){function i(e,t){var o=a.call(this)||this;return o._active=!1,o._completed=!1,o._dragging=!1,o._currentX=0,o._currentY=0,o._container=e,o._name=t,o}return w(i,a),Object.defineProperty(i.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dragging",{get:function(){return this._dragging},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linkable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollable",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},i.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},i.prototype.start=function(e,t,o,r){return r===void 0&&(r=null),this.cancel(),!(!this._active||!this._doStart(e,t,o,r))&&(this._currentX=this._startX=t,this._currentY=this._startY=o,this._dragging=!0,this._completed=!1,this._showFeedback(t,o),!0)},i.prototype.drag=function(e,t,o,r){return!(!this._dragging||(this._currentX=t,this._currentY=o,!this._doDrag(e,t,o,r)))&&(this._moveFeedback(t,o),!0)},i.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.drop=function(e,t,o,r){try{if(this._dragging)try{this._currentX=t,this._currentY=o,this._dragging=!1,this._canAccept(e,t,o,r)?(this._doCompleted(e,t,o,r),this._completed=!0):this._doCanceled(t,o)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.getRequest=function(){return null},i.prototype.getNextRequest=function(e,t){return null},i.prototype.init=function(e,t,o){this._doInit(e,t,o)},Object.defineProperty(i.prototype,"currentX",{get:function(){return this._currentX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentY",{get:function(){return this._currentY},enumerable:!1,configurable:!0}),i.prototype._showFeedback=function(e,t){},i.prototype._moveFeedback=function(e,t){},i.prototype._hideFeedback=function(){},i.prototype._doActivate=function(){},i.prototype._doDeactivate=function(){},i.prototype._doStart=function(e,t,o,r){return!0},i.prototype._doDrag=function(e,t,o,r){return!0},i.prototype._doCanceled=function(e,t){},i.prototype._canAccept=function(e,t,o,r){return!0},i.prototype._doCompleted=function(e,t,o,r){},i.prototype._doEnded=function(){},i.prototype._doInit=function(e,t,o){},i}(me);c.DataDropMode=void 0,(yc=c.DataDropMode||(c.DataDropMode={})).COPY="copy",yc.MOVE="move",c.DragFeedbackStyle=void 0,(Ds=c.DragFeedbackStyle||(c.DragFeedbackStyle={})).LINE="line",Ds.ROW="row",Ds.CELL="cell",Ds.GROUP="group";var Wt,Sy=function(a){function i(e){var t=a.call(this,e)||this;return t._dropMode=c.DataDropMode.COPY,t._feedbackStyle=c.DragFeedbackStyle.LINE,t._scroll=!0,t._cursor="move",t._dropOtherElement=!1,t.assignFrom(Re.dataDrop),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dragCallback",{get:function(){return this._dragCallback},set:function(e){this._dragCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(e){this._callback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropMode",{get:function(){return this._dropMode},set:function(e){this._dropMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"feedbackStyle",{get:function(){return this._feedbackStyle},set:function(e){this._feedbackStyle=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMap",{get:function(){return this._fieldMap},set:function(e){this._fieldMap=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(e){this._fieldMapCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"proxyLabel",{get:function(){return this._proxyLabel||ye.messages.dataDropProxyLabel},set:function(e){this._proxyLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelCallback",{get:function(){return this._labelCallback},set:function(e){this._labelCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scroll",{get:function(){return this._scroll},set:function(e){this._scroll=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{get:function(){return this._cursor},set:function(e){this._cursor=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropOtherElement",{get:function(){return this._dropOtherElement},set:function(e){this._dropOtherElement=e},enumerable:!1,configurable:!0}),i.prototype.getEnabled=function(e,t,o,r,n,s){if(!this.dropOtherElement&&s)return!1;var l=this._dragCallback;if(l)return l(e.handler,t,s||this.grid.handler,o.index,o.column)!==!1;if(this.grid===e&&!s){var u=e.layoutManager;return(n-=u.contentBounds.y)<=u.footerBounds.y&&n>=u.summaryBounds.bottom}return!0},i.prototype.getLabel=function(e,t,o,r){var n=this._labelCallback,s=void 0;return n&&(s=n(e.handler,t,r||this.grid.handler,o.index,o.column)),s===void 0&&this.proxyLabel&&(s=(s=(s=(s=this.proxyLabel.replace("${rows}",t.length+"")).replace("${mode}",e==this.grid||this.dropMode==c.DataDropMode.MOVE?ye.messages.dataDropModeMove:ye.messages.dataDropModeCopy)).replace("${from}",t[0]+"")).replace("${to}",o.index+"")),s},i}(hi),Mo=function(a){function i(e,t){var o=a.call(this,e.container,t)||this;return o._grid=e,o}return w(i,a),i.prototype._doDispose=function(){this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),i}(Cc),Oy=function(a){function i(e,t){var o=a.call(this,e.layout.grid,"columnResizeTracker")||this;o._request=e,o._feedback=t;var r=e.layout;return o._layoutX=e.x+e.offset-r.domWidth,o._offset=e.offset,o}return w(i,a),i.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid.layoutManager,s=n.contentBounds.y,l=n.contentBounds.bottom;return this._feedback.resize(2,l-s),this._feedback.move(t-this._offset,s),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(e,t,o,r){this._request.layout;var n=this.grid.displayOptions.minCellWidth;return(t-=this._offset)>=this._layoutX+n&&t<this._layoutX+1e6&&(this._feedback.x=t,!0)},i.prototype._doEnded=function(){var e=this.grid.displayOptions.minCellWidth,t=Math.max(e,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(t,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},i}(Mo),Ry=function(a){function i(e,t,o){var r=a.call(this,e.layout.grid,"columnMoveTracker")||this;return r._timer=null,r._colLoop=0,r._colPrevLoop=0,r._interval=0,r._request=e,r._layout=e.layout,r._cellFeedback=t,r._feedback=o,r}return w(i,a),i.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid,s=n.layoutManager,l=this._layout.parent,u=this._request.offset,h=s.getHeaderCellRect(this._layout,!0);l.horizontal?(this._offset=u>0?u:t-h.x,this._feedback.setBounds(h.x,h.y,i.WING_SIZE,h.height)):(this._offset=u>0?u:o-h.y,this._feedback.setBounds(h.x,h.y,h.width,i.WING_SIZE)),this._request.offset=this._offset,this._feedback.visible=!1,this._cellFeedback.setBounds(h.x,h.y,h.width,h.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback);var d=this._feedback._dom.style;return d.borderLeft=d.borderRight=d.borderTop=d.borderBottom="",!0},i.prototype._doDrag=function(e,t,o,r){var n=this.grid,s=this._layout.parent,l=this.grid.layoutManager;if(o<l.contentBounds.y&&n.canGrouping())return!1;if(t<l.gridBounds.x||t>l.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var u=l.getHeaderCellAt(t,o),h=this.$_findTarget(u);v.log("MOVE: ",this._layout.displayText+" => "+(h==null?void 0:h.displayText)),h&&!n.canMoveToLayout(h)&&(h=null),this.$_setTarget(h),this._cellFeedback.dragging=!0,s.horizontal?this._cellFeedback.x=t-this._offset:this._cellFeedback.y=o-this._offset}return!0},i.prototype._doCanceled=function(){this.$_stopTimer()},i.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},i.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},i.prototype.getNextRequest=function(e,t){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,e,t)},i.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var e=this._grid,t=this.currentX,o=e.layoutManager,r=0;t>o.clientRect.right?(r=Math.max(0,Math.min(3,(t-o.clientRect.right)/40)),this._interval=4-r,this._colLoop++):t<o.gridBounds.x&&(r=Math.max(0,Math.min(3,(o.gridBounds.x-t)/40)),this._interval=4-r,this._colLoop++),r>0&&(this._interval=4-r),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,t>o.clientRect.right?e.leftCell+=1:t<o.gridBounds.left&&e.leftPos>0&&(e.leftCell-=1)),this.$_setTarget(null)},i.prototype.$_findTarget=function(e){if(e)for(var t=this._layout.parent;e;){if(e.parent===t)return e;e=e.parent}},i.prototype.$_setTarget=function(e){var t=this._request.layout,o=t.parent,r=this._feedback,n=r._dom.style,s=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=e,r.visible=e!=null&&e.parent===o&&e!==t){var l=s.getHeaderCellRect(e,!0);if(o.horizontal){var u=t.hcol;n.height=l.height+"px",e.hcol<u?(n.borderRight="none",n.borderLeft="",r.x=l.x):e.hcol>u&&(n.borderLeft="none",n.borderRight="",r.x=l.right-r.width)}else{var h=t.row;n.width=l.width+"px",e.row<h?(n.borderBottom="none",n.borderTop="",r.y=l.y):e.row>h&&(n.borderTop="none",n.borderBottom="",r.y=l.bottom-r.height)}}},i.WING_SIZE=7,i}(Mo),Py=function(a){function i(e,t){var o=a.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=t,o}return w(i,a),i.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid.layoutManager,s=n.leftContentBounds.x,l=n.rightContentBounds.right;return this._feedback.resize(l-s,2),this._feedback.move(s,o-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(e,t,o,r){return o-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=o-this._request.offset,!0)},i.prototype._doCompleted=function(e,t,o,r){var n=this.grid,s=n.displayOptions,l=Math.max(s.minRowHeight,o-this._request.offset-this._request.rowTop);(l=s.maxRowHeight===0?l:Math.min(s.maxRowHeight,l))>=n.layoutManager.bodyBounds.height&&(l=n.layoutManager.bodyBounds.height-1),this._request.variable?n.setRowHeight(this._request.itemIndex,l):s.rowHeight=l},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(Mo),ky=function(a){function i(e,t){var o=a.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=t,o}return w(i,a),i.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid.layoutManager,s=n.leftContentBounds.x,l=n.rightContentBounds.right;return this._feedback.resize(l-s,2),this._feedback.move(s,o-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(e,t,o,r){return o-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=o-this._request.offset,!0)},i.prototype._doCompleted=function(e,t,o,r){var n=this.grid.header,s=Math.max(n.minHeight,o-this._request.offset-this._request.top);n.height=s},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(Mo),Zr=function(a){function i(e,t,o){var r=a.call(this,e.grid,"rowMoveTracker")||this;return r._timer=null,r._request=e,r._proxy=t,r._line=o,r}return w(i,a),i.updateLineFeedback=function(e,t,o,r,n,s,l,u,h){var d={index:-1,position:0,column:void 0};if(s<0||l<0||s>=e.width||l>=e.height)return n.visible=!1,d;var p=n.feedbackStyle=e.dataDropOptions.feedbackStyle,f=e.layoutManager;l-=f.contentBounds.y;var g=0,m=f.contentBounds.right,b=-1,C=-1,x=0,E=2,S=e.cellToIndex(h),P=!1,R=v.included(p,c.DragFeedbackStyle.CELL,c.DragFeedbackStyle.GROUP);if(l<f.summaryBounds.bottom)C=Math.max(0,f.topIndex-1),b=f.getTableItemTop(0);else if(l>=f.footerBounds.y)C=f.topIndex+f.fullItemCount,b=f.getTableItemBottom(f.fullItemCount);else{var k=l-f.summaryBounds.bottom,D=f.getTableItemIndex(k),F=f.getTableItemHeight(D);if((C=D)>=f.fixedItemCount&&(C+=f.topIndex),C!=t||R){var H=f.getTableItemTop(D);if(p===c.DragFeedbackStyle.ROW){b=H,E=F;var N=Math.floor(F/3);k<H+N?x=-1:k>H+2*N&&(x=1)}else if(p===c.DragFeedbackStyle.GROUP){if(S&&e.isValid(S)){var V=f.getDataRect(S.layout.root),j=S.layout.root.first;E=F,b=H,m=(g=V.x)+V.width,d.column=j.getDataColumn().name,P=j!==o}}else if(p===c.DragFeedbackStyle.CELL){if(S&&e.isValid(S)){var K=f.getBodyView(S);b=(V=K.getCellRectAt(f,S,!0)).y,E=(V=K.boundsByContainer(V)).height,m=(g=V.x)+V.width,P=S.layout!==o,d.column=S.layout.getDataColumn().name}}else k<H+F/2?(b=H,C>t&&(C=Math.max(f.topIndex,C-1)),x=-1):((b=D>-1?f.getTableItemBottom(D):u?0:-1)>=0&&C<t&&C++,x=1)}}return b+=f.contentBounds.y+f.summaryBounds.bottom,n.visible=C>t?C>t+r-1:C>=0&&(C!=t||P),n.visible?(n.resize(m-g,E),e.itemCount==0&&(b+=f.defaultItemHeight),n.move(g,b)):C=-1,e.dataDropOptions.scroll&&(l<f.summaryBounds.bottom?e.topIndex--:l>=f.footerBounds.y&&e.topIndex++),d.index=C,d.position=x,d},i.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"request",{get:function(){return this._request},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!1,configurable:!0}),i.prototype.setEnabled=function(e){this._proxy.setEnabled(e)&&this._proxy.draw()},i.prototype.setLabel=function(e){this._proxy.setLabel(e)&&this._proxy.draw()},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linkable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n,s,l=this.grid,u=xe(e),h=l.selections.count;if(this._sourceItems=[],h===0||(n=l.selections.getItem(0),(s=n&&n.style)==c.SelectionStyle.COLUMNS||s==c.SelectionStyle.SINGLE_COLUMN))if(l.displayOptions.selectionStyle===c.SelectionStyle.NONE)l.selections.selectBlock(l.focusedIndex,!0);else switch(l.dataDropOptions.feedbackStyle){case c.DragFeedbackStyle.LINE:case c.DragFeedbackStyle.ROW:l.selections.selectRow(this._request.itemIndex,!0);break;case c.DragFeedbackStyle.CELL:case c.DragFeedbackStyle.GROUP:l.selections.selectBlock(l.focusedIndex,!0)}if(l.selections.count>=1){this._sourceItems=l.selections.getItem(0).getItemIndices(),u.body.appendChild(this._proxy._dom),l.addFeedbackElement(this._line);var d=this.$_updateLine(t,o,e);return this._proxy.setZIndex(l.displayOptions.baseZindex+6),this.$_updateProxy(t,o,d,e),!0}return!1},i.prototype._doDrag=function(e,t,o,r){var n=this.grid.layoutManager;e=this.$_getTarget(r,e);var s=this.$_updateLine(t,o,e);return this.$_updateProxy(t,o,s,e),(o-=n.contentBounds.y)>n.footerBounds.y||o<n.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},i.prototype._doCompleted=function(e,t,o,r){var n=this._targetRow,s=this.grid;e=this.$_getTarget(r,e);var l,u=s.container.findContainer(null,e);if(u?n.index>=0&&(l=s.canMoveRow(!0,!1)&&s.dataDropOptions.getEnabled(s,this._sourceItems,n,t,o)):l=s.canMoveRow(!1,!0)&&s.dataDropOptions.getEnabled(s,this._sourceItems,n,t,o,e),l){var h=this._request.itemIndex,d=s.dataDropOptions.callback;if(d)u?d(s.handler,this._sourceItems,s.handler,n.index,n.column):d(s.handler,this._sourceItems,e,null,null);else if(u===s.container){var p=n.index>h?n.index-(h+this._sourceItems.length-1):n.index-h,f=s.dataDropOptions.feedbackStyle;v.included(f,c.DragFeedbackStyle.CELL,c.DragFeedbackStyle.GROUP)||s.moveSelection(p,"mouseup")}}},i.prototype._doCanceled=function(e,t){},i.prototype._doEnded=function(){var e=this.grid;this.$_stopTimer(),e.removeFeedbackElement(this._line),e.doc.body.removeChild(this._proxy._dom)},i.prototype.$_getTarget=function(e,t){var o;if(v.isMobile()){var r=xe(e.target);o=r&&r.elementFromPoint(e.clientX,e.clientY)}return o||t},i.prototype.$_updateLine=function(e,t,o){return this._targetRow=i.updateLineFeedback(this.grid,this._request.itemIndex,this._request.layout,this._sourceItems.length,this._line,e,t,!1,o)},i.prototype.$_updateProxy=function(e,t,o,r){var n=this.grid,s=n.container.findContainer(null,r),l=s!==n.container,u=v.getOffset(n.container._containerDom);u.y+=t,u.x+=e+20;var h=!0;if(!l){for(var d=n.selections.getItem(0).getItems(),p=d[0].level,f=1,g=d.length;f<g;f++)if(d[f].level!==p){h=!1;break}}if(h=s?h&&n.canMoveRow(!0,l)&&(l||n.dataDropOptions.getEnabled(n,this._sourceItems,o,e,t)):h&&n.canMoveRow(!1,!0)&&n.dataDropOptions.getEnabled(n,this._sourceItems,o,e,t,r),this._proxy.move(u.x,u.y),this._proxy.setEnabled(h!==void 0?h:o.index>=0),!l||!s){var m=n.dataDropOptions.getLabel(n,this._sourceItems,o,!s&&r);this._proxy.setLabel(m)}return this._proxy.draw(),h},i.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var e=this.currentX,t=this.currentY;this.$_updateLine(e,t,null)},i}(Mo),Qr=function(a){function i(e,t,o,r){var n=a.call(this,e.index.grid,t)||this;return n._request=e,n._currX=o,n._currY=r,n}return w(i,a),i.prototype._doDispose=function(){this._request.dispose(),this._request=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollable",{get:function(){var e=this._getItem().getBounds();return e.top===e.bottom},enumerable:!1,configurable:!0}),i.prototype.getRequest=function(){return this._request},i.prototype._doCanceled=function(){},i.prototype._doEnded=function(){var e=this._getItem();this.grid.selections.$_ended(e)},i.prototype.spanHome=function(e){var t=this.grid;t.getBodyViewAt(e).spanHead(t.layoutManager,e)},i.prototype.spanRight=function(e){var t=this.grid;t.getBodyViewAt(e).spanRight(t.layoutManager,e)},i}(Mo),Ty=function(a){function i(e,t,o){var r=a.call(this,e,"blockSelectTracker",t,o)||this;return r._timer=null,r._rowPrevLoop=0,r._rowLoop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,t,o,r){var n=this.grid,s=n.selections,l=n.layoutManager,u=r&&r.shiftKey,h=r&&(r.ctrlKey||r.metaKey),d=this._request.index;if(l.isMergedCell(d)&&!(d=n.pointToIndex(e,t,o,!0)).layout)return!1;if(u)this._item=s.count>0&&s.lastItem();else{var p=void 0;h||s.count===1&&s.lastItem()instanceof ko?p=s.lastItem():s.clear(!0),this._item=p&&p instanceof ko?p:s.add(d,d,c.SelectionStyle.BLOCK,!0)}return!!this._item},i.prototype._doDrag=function(e,t,o,r){if(this._item){var n=this.grid;if(n.displayOptions.selectAndImmediateDrag)return!1;var s=n.layoutManager;if(this._currX=t,this._currY=o,o-s.contentBounds.y>s.footerBounds.y||o<s.gridBounds.y||t<s.gridBounds.x||t>s.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var l=n.pointToIndex(e,t,o,!0);l.column&&l.itemIndex>=0&&(le.compareHorz(l,this._item.startIndex)>=0?(this.spanRight(l),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(l))}return!0}},i.prototype._doEnded=function(){this.$_stopTimer(),a.prototype._doEnded.call(this)},i.prototype.getNextRequest=function(e,t){return this.grid.activeTool.getNextRequest(this._request,null,e,t)},i.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var e=this._grid,t=this._currX,o=this._currY,r=e.layoutManager,n=0,s=0;o>r.footerBounds.y?(s=Math.max(0,Math.min(3,(o-r.footerBounds.y)/40)),this._interval=4-s,this._rowLoop++):o<r.gridBounds.y&&(s=Math.max(0,Math.min(3,(r.gridBounds.y-o)/40)),this._interval=4-s,this._rowLoop++),t>r.clientRect.right?(n=Math.max(0,Math.min(3,(t-r.clientRect.right)/40)),this._interval=4-n,this._colLoop++):t<r.gridBounds.x&&(n=Math.max(0,Math.min(3,(r.gridBounds.x-t)/40)),this._interval=4-n,this._colLoop++);var l=!1;if(Math.max(n,s)>0&&(this._interval=4-Math.max(n,s)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,o>r.footerBounds.y?e.topItem+r.fullItemCount<e.itemCount&&(e.topIndex=e.topIndex+1,l=!0):o<r.gridBounds.y&&e.topItem>r.fixedItemCount&&(e.topIndex=e.topIndex-1,l=!0)),l||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,t>r.clientRect.right?(e.leftPos+=t-r.clientRect.right,l=!0):t<r.gridBounds.left&&e.leftPos>0&&(e.leftPos-=r.gridBounds.left-t,l=!0)),l){var u=e.pointToIndex(null,t,o,!1);u.column&&(u.itemIndex=Math.min(Math.max(0,u.itemIndex,e.topIndex),e.itemCount-1),this._item.resizeTo(u))}},i}(Qr),Dy=function(a){function i(e,t,o){var r=a.call(this,e,"rowsSelectTracker",t,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,t,o,r){var n=this.grid,s=n.selections,l=n.layoutManager,u=r&&r.shiftKey,h=r&&(r.ctrlKey||r.metaKey),d=this._request.index;if(l.isMergedCell(d)&&(d=n.pointToIndex(e,t,o,!0)),u)this._item=s.count>0&&s.lastItem();else{var p=void 0;h||s.count===1&&s.lastItem()instanceof mo?p=s.lastItem():s.clear(!0),this._item=p&&p instanceof mo?p:s.add(d,d,c.SelectionStyle.ROWS,!0)}return!!this._item},i.prototype._doDrag=function(e,t,o,r){if(this._item){var n=this.grid;if(n.displayOptions.selectAndImmediateDrag)return!1;var s=n.layoutManager;if(this._currX=t,this._currY=o,o>s.footerBounds.y||o<s.gridBounds.y||t<0||t>s.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var l=this.grid.pointToIndex(e,t,o,!1);l.itemIndex>=0&&this._item.resizeTo(l)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),a.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var e,t,o=this._grid,r=this._currX,n=this._currY,s=o.layoutManager;n>s.footerBounds.y?(e=Math.max(0,Math.min(3,(n-s.footerBounds.y)/40)),this._interval=4-e,this._loop++):n<s.gridBounds.y&&(e=Math.max(0,Math.min(3,(s.gridBounds.y-n)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,n>s.footerBounds.y?o.topIndex=o.topIndex+1:n<s.gridBounds.y&&(o.topIndex=o.topIndex-1),(t=o.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,t.itemIndex,o.topIndex),o.itemCount-1),this._item.resizeTo(t)):(r>s.clientRect.right?(e=Math.max(0,Math.min(3,(r-s.clientRect.right)/40)),this._interval=4-e,this._colLoop++):r<0&&(e=Math.max(0,Math.min(3,(s.gridBounds.x-r)/40)),this._interval=4-e,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,r>s.clientRect.right?o.leftLayout=o.leftLayout+1:r<s.gridBounds.x&&o.leftPos>0&&(o.leftLayout=o.leftLayout-1),(t=o.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(t.itemIndex=Math.min(Math.max(0,t.itemIndex,o.topIndex),o.itemCount-1),this._item.resizeTo(t))))},i}(Qr),My=function(a){function i(e,t,o){var r=a.call(this,e,"columnsSelectTracker",t,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._rowPrevLoop=0,r._rowLoop=0,r._interval=0,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,t,o,r){var n,s=this.grid,l=s.selections,u=s.layoutManager,h=r&&r.shiftKey,d=r&&(r.ctrlKey||r.metaKey),p=this._request.index;return u.isMergedCell(p)&&(p=s.pointToIndex(e,t,o,!0)),h?n=l.count>0&&l.lastItem():d||l.count===1&&l.lastItem()instanceof er?n=l.lastItem():l.clear(!0),n&&n instanceof er&&n.containsLayout(p.layout)?this._item=n:this._item=l.add(p,p,c.SelectionStyle.COLUMNS,!0),!!this._item},i.prototype._doDrag=function(e,t,o,r){if(this._item){var n=this.grid.layoutManager;if(this._currX=t,this._currY=o,t<n.gridBounds.x||t>n.clientRect.right||o>n.footerBounds.y||o<0)this.$_startTimer();else{this.$_stopTimer();var s=this.grid.pointToIndex(e,t,o,!0);s.column!=null&&this._item.resizeTo(s)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),a.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var e,t,o=this._grid,r=this._currX,n=this._currY,s=o.layoutManager;r>s.clientRect.right?(e=Math.max(0,Math.min(3,(r-s.clientRect.right)/40)),this._interval=4-e,this._loop++):r<s.gridBounds.x&&(e=Math.max(0,Math.min(3,(s.gridBounds.x-r)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,r>s.clientRect.right?o.leftLayout=o.leftLayout+1:r<s.gridBounds.x&&o.leftPos>0&&(o.leftLayout=o.leftLayout-1),(t=o.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(t)):(n>s.footerBounds.y?(e=Math.max(0,Math.min(3,(n-s.footerBounds.y)/40)),this._interval=4-e,this._rowLoop++):n<0&&(e=Math.max(0,Math.min(3,(s.gridBounds.y-n)/40)),this._interval=4-e,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>s.footerBounds.y?o.topIndex=o.topIndex+1:n<s.gridBounds.y&&(o.topIndex=o.topIndex-1),(t=o.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(t)))},i}(Qr),xc=function(a){function i(e,t){var o=a.call(this)||this;return o._clickX=0,o._clickY=0,o._mouseX=0,o._mouseY=0,o._longTimerHandler=function(){o._longPressed=!0},o._owner=e,o._name=t,o.previous=null,o}return w(i,a),i.prototype._doDispose=function(){this._dragTracker=null,this.previous=null,this._owner=null,this._mouseEventTarget=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(e){e!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=e,this._dragTracker&&this._dragTracker.activate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!1,configurable:!0}),i.prototype.findElementAt=function(e,t,o){return this._owner.findElementAt(e,t,o)},i.prototype.activate=function(e){this._doActivated(e)},i.prototype.deactivate=function(){this._doDeactivated()},i.prototype.keyDown=function(e){return this._doKeyDown(e)},i.prototype.keyUp=function(e){return this._doKeyUp(e)},i.prototype.keyPress=function(e){return this._doKeyPress(e)},i.prototype.pointerDown=function(e){var t=this._mouseX=this._clickX=e.mouseX,o=this._mouseY=this._clickY=e.mouseY;this._longPressed=!1,this._touchEvents=[{x:t,y:o,t:e.timeStamp}],this.dragging&&this._stopDragTracker(t,o,!1,e),this._doPointerDown(e)},i.prototype.mouseDown=function(e){var t=this._mouseX=this._clickX=e.mouseX,o=this._mouseY=this._clickY=e.mouseY;this._doMouseDown(e),this.dragging&&this._stopDragTracker(t,o,!1,e)},i.prototype.pointerCancel=function(e){var t=this._mouseX=e.mouseX,o=this._mouseY=e.mouseY;this.dragging?this._stopDragTracker(t,o,!0,e):(this._dragTracker instanceof Qr&&this._dragTracker._doEnded(),this._dragTracker=null),this._touchEvents=[],this._doPointerCancel(e)},i.prototype.dragFrom=function(e,t){},i.prototype.dropFrom=function(e,t){},i.prototype.cancelFrom=function(e){},i.prototype.pointerMove=function(e){var t=this._mouseX=e.mouseX,o=this._mouseY=e.mouseY,r=this.dragTracker,n=e.buttons;if(r){if(r.dragging){if(n===1){if(!r.drag(this._mouseEventTarget,t,o,e)){var s=r.getNextRequest(t,o);s&&(this._stopDragTracker(t,o,!0,e),this.dragTracker=this._getDragTracker(s,t,o),this._startDragTracker(t,o,e))}}else this._stopDragTracker(t,o,!0,e);return}if(Math.abs(t-this._clickX)>=3||Math.abs(o-this._clickY)>=3){if(n===1)return void this._startDragTracker(t,o,e);this._stopDragTracker(t,o,!0,e),this._dragTracker=null}}this._doPointerMove(e)},i.prototype.pointerUp=function(e){var t=this,o=this._mouseX=e.mouseX,r=this._mouseY=e.mouseY;clearTimeout(this._longTimer),this._touchEvents&&this._touchEvents.push({x:e.mouseX,y:e.mouseY,t:e.timeStamp}),this.dragging?(v.isMobile()&&e.type==="pointerup"&&this._checkSwipe(e),this._stopDragTracker(o,r,!1,e),this._dragTracker.clickable&&!this._longPressed&&this._doPointerUp(e)):(this._dragTracker instanceof Qr&&this._dragTracker._doEnded(),this._dragTracker=null,!this._longPressed&&this._doPointerUp(e)),setTimeout(function(){t._longPressed=!1},100),this._touchEvents=[]},i.prototype.mouseEnter=function(e){this._doMouseEnter(e)},i.prototype.mouseLeave=function(e){this._doMouseLeave(e)},i.prototype.mouseOver=function(e){this._doMouseOver(e)},i.prototype.mouseOutside=function(){this._doMouseOutside()},i.prototype.mouseWheel=function(e){return this._doMouseWheel(e)},i.prototype.contextMenu=function(e){return this._doContextMenu(e)},i.prototype.click=function(e){this._doClick(e)},i.prototype.dblclick=function(e){this._doDblClick(e)},i.prototype.setFocus=function(e){this._doSetFocus(e)},i.prototype.focusLeave=function(e){this._doFocusLeave(e)},i.prototype.resetFocused=function(){},i.prototype.globalKeyup=function(e){this._doGlobalKeyup(e)},i.prototype.touchMove=function(e){return this._doTouchMove(e)},i.prototype._checkSwipe=function(e){},Object.defineProperty(i.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!1,configurable:!0}),i.prototype.isMouseEventTarget=function(e){return e._dom===this._mouseEventTarget},i.prototype._doActivated=function(e){},i.prototype._doDeactivated=function(){},i.prototype._doKeyDown=function(e){return!1},i.prototype._doKeyUp=function(e){return!1},i.prototype._doKeyPress=function(e){return!1},i.prototype._doPointerDown=function(e){},i.prototype._doPointerCancel=function(e){},i.prototype._doPointerMove=function(e){},i.prototype._doPointerUp=function(e){},i.prototype._doMouseDown=function(e){},i.prototype._doMouseEnter=function(e){},i.prototype._doMouseLeave=function(e){},i.prototype._doMouseOver=function(e){},i.prototype._doMouseOutside=function(){},i.prototype._doMouseWheel=function(e){return!1},i.prototype._doContextMenu=function(e){},i.prototype._doClick=function(e){},i.prototype._doDblClick=function(e){},i.prototype._doSetFocus=function(e){},i.prototype._doFocusLeave=function(e){},i.prototype._doGlobalKeyup=function(e){},i.prototype._getDragTracker=function(e,t,o){return null},i.prototype._startDragTracker=function(e,t,o){o===void 0&&(o=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,e,t,o)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},i.prototype._stopDragTracker=function(e,t,o,r){if(this.dragging){var n=this._dragTracker;o?n.cancel():n.drop(this._mouseEventTarget,e,t,r),this._doDragTrackerFinished(n,o)}},i.prototype._doDragTrackerStarted=function(e){},i.prototype._doDragTrackerFinished=function(e,t){},i.prototype._findTableCell=function(e){return this.owner.getTableCell(e||this.mouseEventTarget)},i.prototype._doTouchMove=function(e){return!0},i}(me),El=function(a){function i(){return a.call(this)||this}return w(i,a),Object.defineProperty(i.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dblClickable",{get:function(){return!1},enumerable:!1,configurable:!0}),i}(me);(function(a){a.LINE="line",a.PAGE="page",a.THUMB_TRACK="thumbTrack",a.THUMB_END="thumbEnd",a.SCROLL_END="scrollEnd"})(Wt||(Wt={}));var As,rt,jn=function(a){function i(e,t,o){var r=a.call(this,e,o)||this;return r._scrollBar=t,r}return w(i,a),i.prototype._doDispose=function(){this._scrollBar=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!1,configurable:!0}),i.prototype._doDraw=function(e){this._doRender(e)},i.prototype._doRender=function(e){},i.prototype._changed=function(){this.invalidate()},i}(yo),Ly=function(a){function i(e){return a.call(this,e,null,"scrollEdgeView")||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-scrolledge"},i}(jn),Sl=function(a){function i(e){return a.call(this,e.doc,e,"scrollTrackView")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-scrolltrack"},i}(jn),Bs=function(a){function i(e,t){var o=a.call(this,e.doc,e,"scrollButtonView")||this;return o._enabled=!0,o._far=t,o}return w(i,a),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"far",{get:function(){return this._far},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},i}(jn),Ic=function(a){function i(e){return a.call(this,e.doc,e,"scrollThumbView")||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-scrollthumb"},i}(jn),$s=function(a){function i(e,t){t===void 0&&(t=!1);var o=a.call(this,e.doc,"scrollBarView")||this;return o._lineScrollSize=1,o._pageScrollSize=1,o._minThumbSize=20,o._min=0,o._max=0,o._pos=0,o._page=0,o._maxPosition=0,o._buttonSize=20,o._needLayout=!0,o._tipView=null,o._container=e,o._vertical=t,o._track=new Sl(o),o.addChild(o._track),o._thumb=new Ic(o),o.addChild(o._thumb),o._nearButton=new Bs(o,!1),o.addChild(o._nearButton),o._farButton=new Bs(o,!0),o.addChild(o._farButton),o}return w(i,a),i.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(e){(e=Math.max(1,e))!=this._lineScrollSize&&(this._lineScrollSize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(e){(e=Math.max(1,e))!=this._pageScrollSize&&(this._pageScrollSize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(e){(e=Math.max(8,e))!=this._minThumbSize&&(this._minThumbSize=e,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._vertical},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pos",{get:function(){return this._pos},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonSize",{get:function(){return this._buttonSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tipView",{set:function(e){this._tipView=e},enumerable:!1,configurable:!0}),i.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},i.prototype.setProperties=function(e,t,o){e=Math.max(0,e),t=Math.max(e,t),e==this._min&&t==this._max&&o==this._page||(this._min=e,this._max=t,this._page=o,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},i.prototype.setPosition=function(e,t){t===void 0&&(t=!0),(e=Math.min(this._maxPosition,Math.max(this._min,e)))!=this._pos&&(this._pos=e,this.invalidate(),this._needLayout=!0,t&&this.layoutContent())},i.prototype.ptInTrack=function(e,t,o){var r=this.containerToElement(e,t);if(this._vertical){if(r.y>=this._nearButton.height&&r.x<this._farButton.y)return!o&&r.y<this._thumb.y||o&&r.y>=this._thumb.bottom}else if(e>=this._nearButton.width&&e<this._farButton.x)return!o&&r.x<this._thumb.x||o&&r.x>=this._thumb.right;return!1},i.prototype.setText=function(e){if(this._tipView&&e){this._tipView.show(),this._tipView.setText(e);var t=void 0,o=void 0;if(this._vertical){var r=this._tipView.width();t=this.x-r-5,o=this._thumb.y}else{var n=this._tipView.height();t=this._thumb.x,o=this.y-n-5}this._tipView.move(t,o)}},i.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},i.prototype.draw=function(){a.prototype.draw.call(this)},i.prototype._doDraw=function(e){},i.prototype._doSizeChanged=function(){this.invalidateLayout()},i.prototype.invalidateLayout=function(){this._needLayout=!0,a.prototype.invalidateLayout.call(this)},i.prototype._doLayoutContent=function(){var e=this._vertical,t=this._buttonSize,o=this.height,r=this.width,n=(e?o:r)-2*t,s=Math.min(n,Math.max(this._minThumbSize,Math.floor(n*this._page/(this._max-this._min+1)))),l=t+Math.min(n-s,Math.max(0,Math.floor((n-s)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,r,o),e?(this._nearButton.setBounds(0,0,r,t),this._farButton.setBounds(0,o-t,r,t),s<=n&&this._thumb.setBounds(2,l,r-4,s)):(this._nearButton.setBounds(0,0,t,o),this._farButton.setBounds(r-t,0,t,o),s<=n&&this._thumb.setBounds(l,2,s,o-4))},i.prototype._doScroll=function(e,t,o){this.fireEvent(i.SCROLLED,e,t,o)},i.SCROLLED="onScrollBarScrolled",i}(yo),Fy=function(a){function i(e){return a.call(this,e,"scrollThumbTracker")||this}return w(i,a),i.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"thumb",{get:function(){return this._thumb},set:function(e){this._thumb=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._doStart=function(e,t,o,r){var n=this._thumb.scrollBar,s=n.containerToElement(t,o);return n.vertical?this._offset=s.y-this._thumb.y:this._offset=s.x-this._thumb.x,v.isSlotMode()&&r instanceof PointerEvent&&e.setPointerCapture(r.pointerId),!0},i.prototype._doDrag=function(e,t,o,r){return this.$_doScroll(t,o,Wt.THUMB_TRACK)},i.prototype._doCompleted=function(e,t,o,r){return v.isSlotMode()&&r instanceof PointerEvent&&e.releasePointerCapture(r.pointerId),this.$_doScroll(t,o,Wt.THUMB_END)},i.prototype._doCanceled=function(e,t){},i.prototype._doEnded=function(){},i.prototype.$_doScroll=function(e,t,o){var r=this._thumb.scrollBar,n=r._maxPosition-r._min+1,s=r._buttonSize,l=r.containerToElement(e,t);if(r.vertical){if((u=r.height-2*s-this._thumb.height)<=0)return!1;l.y-=this._offset,l.y=(l.y-s)*n/u,r._doScroll(o,0,Math.max(Math.floor(l.y),0))}else{var u;if((u=r.width-2*s-this._thumb.width)<=0)return!1;l.x-=this._offset,l.x=(l.x-s)*n/u,r._doScroll(o,0,Math.max(Math.floor(l.x),0))}return!0},i}(Cc),Ny=function(a){function i(){var e=a.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return w(i,a),Object.defineProperty(i.prototype,"active",{get:function(){return this._timer!==void 0},enumerable:!1,configurable:!0}),i.prototype.start=function(e){this._button=e,this._scrollBar=e.scrollBar,this._active=!0,setTimeout((function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval((function(){this._active&&this.$_fireEvent()}).bind(this),20))}).bind(this),300),this._ready=!0,this.$_fireEvent()},i.prototype.move=function(e,t){var o=this._button.containerToElement(e,t);this._active=this._button.containsInClient(o.x,o.y)},i.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},i.prototype.$_fireEvent=function(){var e=this._button.far?1:-1,t=Wt.LINE;this._scrollBar._doScroll(t,this._scrollBar.lineScrollSize*e,0)},i}(Mt),Ay=function(a){function i(){var e=a.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return w(i,a),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),i.prototype.start=function(e,t,o,r){this._scrollBar=e,this._far=t,this._active=!0,setTimeout((function(){this._ready&&(this._ready=!1,this._timer=setInterval((function(){this._active&&this.$_fireEvent()}).bind(this),50))}).bind(this),300),this._ready=!0;var n=this._scrollBar.containerToElement(o,r);this._mouseX=n.x,this._mouseY=n.y,this.$_fireEvent()},i.prototype.move=function(e,t){var o=this._scrollBar.containerToElement(e,t);this._mouseX=o.x,this._mouseY=o.y,this._active=this._scrollBar.ptInTrack(o.x,o.y,this._far)},i.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},i.prototype.$_fireEvent=function(){var e=null,t=0,o=this._scrollBar._thumb;if(this._scrollBar.vertical){var r=this._mouseY;this._far&&r>o.bottom?(e=Wt.PAGE,t=1):!this._far&&r<o.y&&(e=Wt.PAGE,t=-1)}else{var n=this._mouseX;this._far&&n>o.right?(t=1,e=Wt.PAGE):n<o.x&&(e=Wt.PAGE,t=-1)}t!=0&&this._scrollBar._doScroll(e,this._scrollBar.pageScrollSize*t,0)},i}(me),Ec=function(a){function i(e){var t=a.call(this,e,"scrollTool")||this;return t._buttonTimer=new Ny,t._trackTimer=new Ay,t._thumbTracker=new Fy(e),t}return w(i,a),i.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),a.prototype._doDispose.call(this)},i.prototype._doPointerDown=function(e){var t=e.mouseX,o=e.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var r=this.findElementAt(t,o,!1);if(r instanceof jn){if(this._clickElement=r,r instanceof Bs)this._buttonTimer.start(r);else if(r instanceof Ic)this._thumbTracker.thumb=r,this.dragTracker=this._thumbTracker;else if(r instanceof Sl){var n=r.scrollBar.ptInTrack(t,o,!0);this._trackTimer.start(r.scrollBar,n,t,o)}}},i.prototype._doPointerMove=function(e){var t=e.mouseX,o=e.mouseY,r=this._clickElement;e.buttons===1?r instanceof Bs&&this._buttonTimer.active?this._buttonTimer.move(t,o):r instanceof Sl&&this._trackTimer.active&&this._trackTimer.move(t,o):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},i.prototype._doPointerUp=function(e){this._clickElement&&this._clickElement.scrollBar._doScroll(Wt.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},i}(xc),Sc=function(a){function i(e){var t=a.call(this)||this;return t._container=e,t._element=t.$_createElement(e.doc),t}return w(i,a),i.prototype._doDispose=function(){this._element=v.detach(this._element),this._container=null,a.prototype._doDispose.call(this)},i.prototype.show=function(){this._container._container.appendChild(this._element)},i.prototype.hide=function(){v.detach(this._element)},i.prototype.move=function(e,t){v.move(this._element,e,t)},i.prototype.setText=function(e){this._element.innerHTML=e},i.prototype.width=function(){return this._element.offsetWidth},i.prototype.height=function(){return this._element.offsetHeight},i.prototype.getRect=function(){return this._element.getBoundingClientRect()},i.prototype.$_createElement=function(e){var t=e.createElement("div"),o=t.style;return o.position="absolute",o.padding="4px 4px",o.boxSizing="border-box",o.display="lnline-block",o.pointerEvents="none",o.userSelect="none",t.className="rg-scroll-tip-view",t},i}(me),By=function(a){function i(e,t,o){var r=a.call(this,e,t)||this;return r._contaner=o,r}return w(i,a),Object.defineProperty(i.prototype,"container",{get:function(){return this._contaner},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){},i.prototype._doDraw=function(e){},i}(yo),xr=function(a){function i(e,t,o){var r=a.call(this)||this;return r._disabled=!1,r._updateRequested=!1,r._layoutNeeded=!1,r._invalidated=!1,r._currentX=0,r._currentY=0,r._defaultCursor="default",r._drawing=!1,r._eventHandlers={},r._eventNodes=[],r._containerRender=r._render.bind(r),r._scrollTool=new Ec(r),r._cursor="default",r._testWidth=NaN,r._testHeight=NaN,r.prepareContainer(e,t,o),r.invalidateLayout(),r._registerEventHandlers(r._rootElement._dom,r._containerDom),r.activeTool=r._defaultTool=r._createDefaultTool(),i.$_Containers[r.$_hash]=r,r}return w(i,a),i.prototype.getMouseContainer=function(){return i.$_Containers[i.$_mouseContainer]},i.prototype.findContainer=function(e,t){for(var o in i.$_Containers){var r=i.$_Containers[o];if(r.contains(t||e.target))return r}return null},i.getActiveGrid=function(){var e=i.$_Containers[i.$_ActiveGrid];return e&&e._gridView},i.refreshGrids=function(){var e=i.$_Containers;for(var t in e){var o=e[t];(o&&o._gridView).refreshView(!0,!0)}},i.setActiveGrid=function(e){if(e!==i.$_ActiveGrid){var t=i.$_Containers[e],o=void 0;if(t=t&&t._gridView,window.RealGrid&&(o=window.RealGrid.onActiveGridChanged)){var r=i.$_Containers[i.$_ActiveGrid];o((r=r&&r._gridView)&&r.handler,t&&t.handler)}t._fireGridActivated()}i.$_ActiveGrid=e},i.getGridInstance=function(e){if(typeof e=="string"&&(e=document.getElementById(e)),Il(e,"HTMLDivElement"))for(var t in i.$_Containers){var o=i.$_Containers[t];if(o._containerDiv===e)return o.gridView}},i.clearContainer=function(e){i[e]&&delete i[e],i.$_ActiveGrid===e&&(i.$_ActiveGrid=null)},i.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},i.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),v.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,v.clearElements(this._containerDiv),a.prototype._doDispose.call(this),delete i.$_Containers[this.$_hash]},Object.defineProperty(i.prototype,"doc",{get:function(){return this._doc},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._disabled},set:function(e){e!=this._disabled&&(this._disabled=e,this._doDisabledChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeTool",{get:function(){return this._activeTool},set:function(e){if((e=e||this._defaultTool)!=this._activeTool){var t=this._activeTool;t&&t.deactivate(),this._activeTool=e,e&&e.activate(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"measurer",{get:function(){return this._measurer},enumerable:!1,configurable:!0}),i.prototype.findElementAt=function(e,t,o){return this._rootElement.findChildAt(e-this._rootElement._x,t-this._rootElement._y,o)},i.prototype.getTableCell=function(e){return null},i.prototype.setCursor=function(e){e!=this._cursor&&(this._containerDom.style.cursor=this._cursor=e)},i.prototype.setFocus=function(){this._containerDom.focus()},i.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(v.getTimer())},i.prototype.toScreen=function(e){var t=this._containerDom.getBoundingClientRect();return e.x+=t.left,e.y+=t.top,e},i.prototype.pointToScreen=function(e,t){var o=this._containerDom.getBoundingClientRect();return{x:e+o.left,y:t+o.top}},i.prototype.getBound=function(){var e=this._containerDom.getBoundingClientRect();return new Z(e.left,e.top,e.width,e.height)},i.prototype.getHtml=function(){return this._containerDom.outerHTML},i.prototype.addElement=function(e){return this._rootElement.addChild(e)},i.prototype.removeElement=function(e){return this._rootElement.removeChild(e)},i.prototype.resetSize=function(e){e===void 0&&(e=null),this.updateNow(),e&&setTimeout(e,0)},i.prototype.measureText=function(e,t,o){this._textMeasurer.className=e;var r=this._textMeasurer.style;return o?(r.fontSize=o.fontSize,r.fontFamily=o.fontFamily,r.fontWeight=o.fontWeight,r.fontStyle=o.fontStyle):(r.removeProperty("font-size"),r.removeProperty("font-family"),r.removeProperty("font-weight"),r.removeProperty("font-style")),this._textMeasurer.innerHTML=t,this._textMeasurer.offsetWidth},i.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var e=this._checkMeasurer.getBoundingClientRect(),t=Zt(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:e.width+parseInt(t.marginLeft)+parseInt(t.marginRight),height:e.height+parseInt(t.marginTop)+parseInt(t.marginBottom)}}return this._checkRect},i.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},i.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},i.prototype.contains=function(e){var t=e;if(t instanceof Zt(this.doc).HTMLElement)for(var o=t.parentElement;o;){if(o===this._containerDom)return!0;o=o.parentElement}return!1},i.prototype.getDomPosition=function(e){return this.offsetDomPosition(e,{x:0,y:0})},i.prototype.offsetDomPosition=function(e,t){var o=Zt(this._doc),r=this._containerDom.getBoundingClientRect(),n=e.getBoundingClientRect(),s=o.getComputedStyle(this._containerDom);return t.x=n.left-r.left-Math.round(parseFloat(s.borderLeftWidth)),t.y=n.top-r.top-Math.round(parseFloat(s.borderTopWidth)),t},i.prototype.cancelOtherContainer=function(e){for(var t in i.$_Containers){var o=i.$_Containers[t];if(o!==this){var r=o._activeTool;r&&r.cancelFrom(e)}}},i.prototype.getContainerWidth=function(){return this._containerDiv.getBoundingClientRect().width},i.prototype._doDisabledChanged=function(){},i.prototype.prepareContainer=function(e,t,o){if(!e)throw new Error("container is null!");if(Il(e,"HTMLDivElement")?this._containerDiv=e:this._containerDiv=document.getElementById(e),!Il(this._containerDiv,"HTMLDivElement"))throw new Error(ye.messages.gridContainerNotFind+e);var r=this._doc=this._containerDiv.ownerDocument,n=Zt(r),s=this._containerDiv.getElementsByClassName("rg-root");if(s&&s.length>0)throw new Error(ye.messages.gridElementAttachFail);n.requestAnimationFrame=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(p){return n.setTimeout(p,10)};var l=this._containerDom=r.createElement("div");this._container=this._containerDom;var u=l.style;this._cursor=u.cursor,this._containerDiv.appendChild(l),l.setAttribute("tabindex","0"),u.position="relative",u.width="100%",u.height="100%",u.boxSizing="border-box",u.overflow="hidden",u["-webkit-touch-callout"]="none",u["-webkit-user-select"]="none",u["user-select"]="none",u["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(r),this._measurer=r.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer);var h=this._textMeasurer=r.createElement("span");h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.left="-10000px",h.style.top="-10000px",h.style.display="block",this._container.appendChild(h);var d=this._checkMeasurer=r.createElement("input");d.type="checkbox",d.title="grid check measurer",d.tabIndex=-1,d.setAttribute("aria-hidden","true"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-11000px",d.style.display="block",this._container.appendChild(d),this._doPrepareContainer(l,t,o)},i.prototype._doPrepareContainer=function(e,t,o){},i.prototype._createRootElement=function(e){var t=new By(e,"root",this);return this._containerDom.appendChild(t._dom),t},i.prototype.isLayoutNeeded=function(){return this._layoutNeeded},i.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},i.prototype.invalidate=function(e){var t=Zt(this._doc);this._updateRequested&&this._invalidated||!e&&this._drawing||(this._requestTimer||(this._requestTimer=t.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},i.prototype.invalidateElement=function(e){var t=Zt(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=t.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},i.prototype._render=function(e){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(e)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},i.prototype.$$_render=function(e){var t=this._containerDom,o=isNaN(this._testWidth)?t.clientWidth:this._testWidth,r=isNaN(this._testHeight)?t.clientHeight:this._testHeight;if(this._layoutChildren(new Z(0,0,o,r)),this._layoutNeeded)try{this._doLayout(new Z(0,0,o,r))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new Z(0,0,o,r));this._doRenderHtml(new Z(0,0,o,r))},i.prototype._doLayout=function(e){},i.prototype._doAfterRender=function(){},i.prototype._doPrepareRender=function(e){},i.prototype._doRenderHtml=function(e){this._doDrawContainer(e),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},i.prototype._doDrawContainer=function(e){},i.prototype._drawElement=function(e){e.draw();for(var t=0,o=e.childCount;t<o;t++){var r=e.getChild(t);r.visible&&this._drawElement(r)}},i.prototype._validateChildren=function(e){for(var t=0,o=e.childCount;t<o;t++)e.getChild(t).validate()},i.prototype._setFocusAndScroll=function(e){e.setFocus?e.setFocus():e.focus&&e.focus({preventScroll:!0})},i.prototype._registerEventHandlers=function(e,t){var o=v.isSlotMode()?t.parentElement:tt(e);e.style.cursor=this._defaultCursor,this.$_addListener(tt(e),"resize",this._resizeHandler.bind(this),!1),this.$_addListener(o,"pointermove",this._pointerMoveHandler.bind(this),!1),this.$_addListener(o,"pointerup",this._pointerUpHandler.bind(this),!1),this.$_addListener(o,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(o,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(o,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(o,"pointerdown",this._globalPointerDownHandler.bind(this),!1),this.$_addListener(o,"keyup",this._globalKeyupHandler.bind(this),!1),t&&(this.$_addListener(t,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(t,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(t,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(e,"click",this._clickHandler.bind(this),!1),!v.isMobile()&&this.$_addListener(e,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(e,"pointerdown",this._pointerDownHandler.bind(this),!1),this.$_addListener(e,"pointerenter",this._pointerEnterHandler.bind(this),!1),this.$_addListener(e,"pointerleave",this._pointerLeaveHandler.bind(this),!1),this.$_addListener(e,"pointerover",this._pointerOverHandler.bind(this),!1),this.$_addListener(e,"pointercancel",this._pointerCancelHandler.bind(this),!1),this.$_addListener(e,"focus",this._focusHandler.bind(this),!1),this.$_addListener(e,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(e,"blur",this._blurHandler.bind(this),!1),this.$_addListener(e,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(e,"wheel",this._wheelHandler.bind(this),!!v.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(e,"touchmove",this._touchMoveHandler.bind(this),!1)},i.prototype.$_addListener=function(e,t,o,r){e in this._eventHandlers||(this._eventHandlers[e]={}),t in this._eventHandlers[e]||(this._eventHandlers[e][t]=[]),this._eventHandlers[e][t].push([o,r]),e.addEventListener(t,o,r),this._eventNodes.indexOf(e)<0&&this._eventNodes.push(e)},i.prototype.$_removeListener=function(e,t,o){if(e in this._eventHandlers){var r=this._eventHandlers[e];if(t in r){for(var n=r[t],s=n.length;s--;){var l=n[s];e.removeEventListener(t,l[0],l[1]),n.splice(s,1)}o&&delete r[t]}}},i.prototype.$_removeListenerAll=function(e){e===void 0&&(e=null);for(var t=e?[e]:this._eventNodes,o=0,r=t.length;o<r;o++){var n=t[o];if(n in this._eventHandlers){var s=this._eventHandlers[n];for(var l in s)for(var u=s[l],h=u.length;h--;){var d=u[h];n.removeEventListener(l,d[0],d[1])}}}},i.prototype.$_existListener=function(e,t){var o=this._eventHandlers[e];return o&&o[t]},i.prototype.addMouseEvent=function(e){this.$_addListener(this._rootElement._dom,"mousedown",this._mouseDownHandler.bind(this),{once:!0}),this.$_addListener(this._rootElement._dom,"mouseup",this._mouseUpHandler.bind(this),{once:!0})},i.prototype.removeMouseEvent=function(){this.$_removeListener(this._rootElement._dom,"mousedown",!0),this.$_removeListener(this._rootElement._dom,"mouseup",!0)},i.prototype._doResized=function(e){},i.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},i.prototype._isOutChildElement=function(e){return!1},i.prototype.$_checkKeyElement=function(e){var t=tt(e.target);return e.target===e.currentTarget&&e.target===this._containerDom||e.target instanceof t.HTMLTableCellElement&&v.isAncestorOf(this._containerDom,e.target,e)},i.prototype._keyDownHandler=function(e){this._isEnabled()&&this.$_checkKeyElement(e)&&this._activeTool.keyDown(e)},i.prototype._keyUpHandler=function(e){this._isEnabled()&&this.$_checkKeyElement(e)&&this._activeTool.keyUp(e)},i.prototype._keyPressHandler=function(e){this._isEnabled()&&this.$_checkKeyElement(e)&&this._activeTool.keyPress(e)},i.prototype.eventToContainer=function(e){var t=this._containerDom.getBoundingClientRect();return new Qo(e.clientX-t.left,e.clientY-t.top)},i.prototype.toOffset=function(e){var t=this._containerDom.getBoundingClientRect();return e.mouseX=e.clientX-t.left,e.mouseY=e.clientY-t.top,e},i.prototype.toOffsetTouch=function(e){var t=this._containerDom.getBoundingClientRect(),o=e.touches[0]||e.changedTouches[0];return e.mouseX=o.clientX-t.left,e.mouseY=o.clientY-t.top,e},i.prototype._clickHandler=function(e){this._isEnabled()?this._activeTool.click(this.toOffset(e)):e.preventDefault()},i.prototype._dblclickHandler=function(e){this._isEnabled()?this._activeTool.dblclick(this.toOffset(e)):e.preventDefault()},i.prototype.$_setMouseTarget=function(e){for(var t=tt(this._containerDom),o=e.target;o&&!(o instanceof t.HTMLElement);)o=o.parentElement||o.parentNode;this.activeTool._mouseEventTarget=o instanceof t.HTMLElement?o:null},i.prototype._pointerDownHandler=function(e){if(e.isPrimary)if(this._isEnabled()){i.$_mouseContainer=this.$_hash,this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY;var t=this.findElementAt(this._currentX,this._currentY,!1);t&&t.getAncestor($s)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool.previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool.previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(e),this.activeTool.pointerDown(e)}else e.preventDefault()},i.prototype._mouseDownHandler=function(e){if(this._isEnabled()){i.$_mouseContainer=this.$_hash,this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY;var t=this.findElementAt(this._currentX,this._currentY,!1);t&&t.getAncestor($s)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool.previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool.previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(e),this.activeTool.mouseDown(e)}else e.preventDefault()},i.prototype._mouseUpHandler=function(e){this.removeMouseEvent(),this.$_pointerUpHandler(e)},i.prototype._pointerMoveHandler=function(e){var t;if(this._containerDom.parentElement&&e.isPrimary&&(this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled())){t=this._activeTool,this.$_setMouseTarget(e),t.pointerMove(e);var o=t.dragTracker;if(o&&o.linkable&&i.$_mouseContainer==this.$_hash)for(var r in i.$_Containers){var n=i.$_Containers[r];n!==this&&(t=n._activeTool)&&t.dragFrom(e,o)}}},i.prototype.$_pointerUpHandler=function(e){var t=i.$_mouseContainer==this.$_hash,o=this._activeTool;try{if(this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()){var r=o.dragTracker;if(this.$_setMouseTarget(e),o.pointerUp(e),o instanceof Ec&&(this.activeTool=o.previous),r&&r.linkable&&t){var n=this.findContainer(e);if(n&&n!==this){var s=n._activeTool;s&&s.dropFrom(e,r)}}}else e.preventDefault()}finally{o&&(this.setCursor("default"),o.dragTracker=null),t&&(i.$_mouseContainer=-1)}},i.prototype._pointerUpHandler=function(e){e.isPrimary&&(!this.activeTool.dragging&&this.$_existListener(this._rootElement._dom,"mouseup")||(this.removeMouseEvent(),this.$_pointerUpHandler(e)))},i.prototype._pointerEnterHandler=function(e){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(e))},i.prototype._pointerLeaveHandler=function(e){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(e))},i.prototype._pointerOverHandler=function(e){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(e))},i.prototype._pointerCancelHandler=function(e){this._isEnabled()&&this._activeTool.pointerCancel(this.toOffset(e))},i.prototype._contextMenuHander=function(e){this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.contextMenu(this.toOffset(e)))},i.prototype._wheelHandler=function(e){this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.mouseWheel(this.toOffset(e))&&v.stopEvent(e))},i.prototype._focusHandler=function(e){},i.prototype._blurHandler=function(e){},i.prototype._selectstartHandler=function(e){return!1},i.prototype._focusinHandler=function(e){},i.prototype._globalPointerDownHandler=function(e){v.isAncestorOf(this._containerDiv,e.target,e)||this._isOutChildElement(e)||(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(e))},i.prototype._globalKeyupHandler=function(e){this._activeTool.globalKeyup(e)},i.prototype._focusoutHandler=function(e){var t=e.relatedTarget;if(v.isAncestorOf(this._containerDiv,e.target,e)&&t&&!v.isAncestorOf(this._containerDiv,t,e)&&!this._isOutChildElement(e)){if(!t&&!e.sourceCapabilities)return;this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(e)}},i.prototype._focusHandlerFireFox=function(e){e.target===this._containerDom||v.isAncestorOf(this._containerDom,e.target,e)?this._isEnabled()&&!this._dummyFocus&&(this._focused=!0,this._activeTool.setFocus(e.target)):this._isOutChildElement(e)||(this._containerDom.setAttribute("tabindex","0"),this._focused=!1)},i.prototype._touchMoveHandler=function(e){if(!(e.touches.length>1))return this.toOffsetTouch(e),this._activeTool.touchMove(e)},i.$_Containers={},i.$_mouseContainer=-1,i.$_ActiveGrid=null,i}(Mt),Ol=function(a){function i(e,t,o){o===void 0&&(o="gridHeadCellView");var r=a.call(this,e,o)||this;return r._text="",r._styleName="",r._textChanged=!1,r._model=t,r}return w(i,a),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),i.prototype.setStyleName=function(e,t,o){o==this._styleName&&t==this._cellDom||(this._styleName=o,this._className="",this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._clearCellCache=function(){a.prototype._clearCellCache.call(this),this._textChanged=!0},i.prototype._doPrepareValue=function(e,t){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},i.prototype._doUpdateContent=function(e,t,o){this._textChanged&&(this._textChanged=!1,o[v.TextProp]=this._text)},i}(Do),$y=function(a){function i(e,t){var o=a.call(this,e,t,"chekHeadCellView")||this;return o._checked=!1,o}return w(i,a),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e},enumerable:!1,configurable:!0}),i.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},i.prototype._doUpdateContent=function(e,t,o){var r,n=e.doc,s=this.model,l=s.showAll&&!s.exclusive;if(l&&!this._check){var u=this._check=n.createElement("input");u.id="$$-grid-head-check-"+this.model.$_hash,r=u.style,u.type="checkbox",u.className="rg-checkbox",u.tabIndex=-1,r.display=s.useImages?"none":"inline-block",o.appendChild(u);var h=this._image=n.createElement("span");(r=h.style).display=s.useImages?"inline-block":"none",o.appendChild(h);var d=this._label=n.createElement("label");d.setAttribute("for",this._check.id),d[v.TextProp]="grid head check",(r=d.style).display="none",o.appendChild(d)}if(l?(this._check.style.display=s.useImages?"none":"inline-block",this._image.style.display=s.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(v.detach(this._check),v.detach(this._image),v.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=n.createElement("span"),this._span.style.display="block",o.appendChild(this._span)),this._span[v.TextProp]=this._text),l&&this._span&&this._text){var p=s.useImages?this._image:this._check,f=this._span,g=p.parentElement,m=s.itemGap!=null?s.itemGap+"px":"5px";switch((r=f.style).margin="",s.checkLocation){case c.ColumnHeaderItemLocation.BOTTOM:g.insertBefore(f,p),r.display="block",r.marginBottom=m;break;case c.ColumnHeaderItemLocation.LEFT:g.insertBefore(p,f),r.display="inline-block",r.marginLeft=m;break;case c.ColumnHeaderItemLocation.RIGHT:g.insertBefore(f,p),r.display="inline-block",r.marginRight=m;break;case c.ColumnHeaderItemLocation.TOP:default:g.insertBefore(p,f),r.display="block",r.marginTop=m}}},i.prototype.$_updateContent=function(){var e=this.model;e.showAll&&!e.exclusive&&this._check&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")},i}(Ol),Rl=function(a){function i(e){var t=a.call(this,e.doc,null,"gridHeadView")||this;t._cells=[];var o=e.doc;return t.addChild(t._indicatorCell=new Ol(o,e.rowIndicator)),t.addChild(t._stateCell=new Ol(o,e.stateBar)),t.addChild(t._checkCell=new $y(o,e.checkBar)),t}return w(i,a),i.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"allChecked",{get:function(){return this._checkCell.checked},set:function(e){var t=this._checkCell;t.checked=e,t.$_updateContent()},enumerable:!1,configurable:!0}),i.prototype.getHeadModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},i.prototype.getCellType=function(e){var t=this.getHeadModel(e);return t instanceof br?t.getCellType():void 0},i.prototype._getCssSelector=function(){return"rg-head"},i.prototype._doPrepareTableExtents=function(e){var t,o=e.grid.rowBarContainer,r=e.sectionObjects;this._cells=[];for(var n=0,s=r;n<s.length;n++){var l=s[n];l instanceof qr&&(((t=this._indicatorCell).visible=t.model.visible)?(this._cells.push(t),t.width=o.rowIndicator.width):t.removeCellDom()),l instanceof Kr&&(((t=this._stateCell).visible=t.model.visible)?(this._cells.push(t),t.width=o.stateBar.width):t.removeCellDom()),l instanceof Xr&&(((t=this._checkCell).visible=t.model.visible)?(this._cells.push(t),t.width=o.checkBar.width):t.removeCellDom(!0))}},i.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},i.prototype._doLayoutContent=function(e){var t=e.grid,o=this._cells.length;this._getTableRowCount(e);for(var r=this._thead,n=r&&r.children[0],s=0;s<o;s++){var l=this._cells[s],u=l.model;if(u.dirty||l._dirty||t._columnsDirty){var h=u.getHeadCell(),d=this._getTableCell(0,s),p=d.firstElementChild,f=this.$_getCellSelector()+" "+u.getHeadStyleName();if(n){var g=n.children[s];g&&(g[v.TextProp]=u.getCellType()+" head")}l.setStyleName(d,p,f),l.updateCell(t,h,p)}}},i.prototype._doRender=function(e){},i.prototype._doDraw=function(e){this._cells.forEach(function(t){t.validate()})},i.prototype._getTableRowCount=function(e){return 1},i.prototype._getTableRowHeight=function(e,t){return this.height},i.prototype._getCellCount=function(e){return this._cells.length},i.prototype._getCellWidth=function(e,t){return this._cells[t].width},i.prototype._doPrepareTableRow=function(e,t,o,r){a.prototype._doPrepareTableRow.call(this,e,t,o,r);var n=e.grid.header.styleName;v.setClassName(r,n)},i.prototype.$_getCellSelector=function(){return i.CELL_CSS},i.CELL_CSS="rg-head-cell",i}(tr),Vy=function(a){function i(e){var t=a.call(this,e,"gridFootCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}return w(i,a),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},set:function(e){e!==this._model&&(this._model=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),i.prototype.setStyleName=function(e,t){t!=this._styleName&&(this._styleName=t,this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(e,t,o){this._textChanged&&(this._textChanged=!1,o[v.TextProp]=this._text)},i.prototype._doRender=function(e){},i}(Do),Oc=function(a){function i(e){var t=a.call(this,e,null,"gridFootView")||this;t._cells=[],t._count=0;for(var o=0;o<3;o++)t.addChild(t._cells[o]=new Vy(e));return t}return w(i,a),i.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},i.prototype.getFootModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},i.prototype.getCellType=function(e){var t=this.getFootModel(e);return t instanceof br?t.getCellType():void 0},i.prototype._getCssSelector=function(){return"rg-foot"},i.prototype._doPrepareTableExtents=function(e){var t,o=e.grid.rowBarContainer,r=e.sectionObjects;this._count=0;for(var n=0,s=r;n<s.length;n++){var l=s[n];l.visible&&((t=this._cells[this._count++]).model=l,l instanceof qr?t.width=o.rowIndicator.width:l instanceof Kr?t.width=o.stateBar.width:l instanceof Xr&&(t.width=o.checkBar.width))}},i.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},i.prototype._doLayoutContent=function(e){for(var t=e.grid,o=this._count,r=this._thead,n=r&&r.children[0];this.childCount<o;)this.addChild(this._cells[this.childCount]);for(;this.childCount>o;)this.removeLast();for(var s=0;s<o;s++){var l=this.getChild(s),u=l.model;if(u.dirty){var h=u.getFootCell(),d=this._getTableCell(0,s),p=d.firstElementChild,f=this.$_getCellSelector()+" "+u.getFootStyleName();if(n){var g=n.children[s];g&&(g[v.TextProp]=u.getCellType()+" foot")}l.setStyleName(d,f),l.text=u.footText,l.updateCell(t,h,p)}}},i.prototype._doRender=function(e){},i.prototype._doDraw=function(e){this._cells.forEach(function(t){t.validate()})},i.prototype._getTableRowCount=function(e){return 1},i.prototype._getTableRowHeight=function(e,t){return this.height},i.prototype._getCellCount=function(e){return this._count},i.prototype._getCellWidth=function(e,t){return this._cells[t].width},i.prototype.$_getCellSelector=function(){return i.CELL_CSS},i.CELL_CSS="rg-foot-cell",i}(tr),jy=function(a){function i(e){var t=a.call(this,e)||this;return t._datetimeFormat=Lt.DEFAULT_FORMAT,t._datetimeWriter=Lt.Default,t._numberFormatter=ji.getFormatter(t._numberFormat=ji.DEFAULT_FORMAT),t.assignFrom(Re.format),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(e){e!=this._textFormat&&(this._textFormat=e,this._textFormatter=e?Yr.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?Lt.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?ji.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?ho.getFormatter(e):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),i}(hi),Hn=function(a){function i(e){var t=a.call(this)||this;return t._message="",t._visible=!0,t._zIndex=void 0,t._styleName="rg-toast",t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"message",{get:function(){return typeof this._message=="string"?this._message:this._message?this._message():void 0},set:function(e){this._message=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){this._styleName=e},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(e){typeof e=="string"?(this._message=e,this._message&&(this._visible=!0)):typeof e=="boolean"?this._visible=e:a.prototype.assignFrom.call(this,e)},i}(me),Hy=function(a){function i(e){var t=a.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropdownCount=8,t._showing=!1,t._container=e,t._element=t.$_createElement(e.doc),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropdownCount},set:function(e){this._dropdownCount=e},enumerable:!1,configurable:!0}),i.prototype.show=function(e){this._showing=!0;try{this.$_show(e)}finally{this._showing=!1}},i.prototype.hide=function(){var e=this._element;e&&e.parentNode&&this._container._container.removeChild(e)},i.prototype.$_createElement=function(e){var t=e.createElement("div");t.onkeydown=(function(r){r.keyCode==27&&this.hide()}).bind(this),this.$_disableSelection(t);var o=this._span=e.createElement("span");return this.$_disableSelection(o),t.appendChild(o),t},i.prototype.$_show=function(e){var t=e.message;if(t){var o=this._element;if(o){var r=this._span,n=this._container._gridView.displayOptions;r.innerHTML=t,o.className=e.styleName,o.style.position="absolute",o.style.overflow="hidden",o.style.zIndex=e.zIndex!=null?e.zIndex:n.toastZIndex,this._container._container.appendChild(o);var s=v.getBoundingClientRect2(o),l=v.getBoundingClientRect2(this._container._container),u=s.width+10,h=s.height+10,d=l.width,p=l.height;o.style.left=(d-u)/2+"px",o.style.top=(p-h)/2+"px"}}},i.prototype.$_disableSelection=function(e){e.onselectstart!==void 0?e.onselectstart=function(){return!1}:e.style.MozUserSelect!==void 0?e.style.MozUserSelect="none":e.onmousedown=function(){return!1}},i}(me),Gy=function(a){function i(e){var t=a.call(this)||this;return t._active=!1,t._container=e.container,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),i.prototype.show=function(e,t,o){if((!this._active||t)&&(this.close(),(e=e instanceof Hn?e:e?new Hn(e):null)&&e.visible))return this._toast||(this._toast=new Hy(this._container)),this._toast.show(e),this._active=!0,void(o&&setTimeout((function(){try{o()}finally{this.close()}}).bind(this),0));o&&o()},i.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},i}(me),Wy=function(a){function i(e){var t=a.call(this,e)||this;return t._pageSorting=!1,t._toast=new Hn({visible:!1,message:t._messageCallback}),t.assignFrom(Re.sorting),t}return w(i,a),i.prototype._doDispose=function(){this._toast=this._toast.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){var e=Re.sorting.enabled;return this._enabled!==void 0?this._enabled:e===void 0||e},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style||Re.sorting.style||c.SortStyle.EXCLUSIVE},set:function(e){e!=this._style&&(this._style=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility||Re.sorting.handleVisibility||c.HandleVisibility.VISIBLE},set:function(e){e!=this._handleVisibility&&(this._handleVisibility=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeSorting",{get:function(){var e=Re.sorting.commitBeforeSorting,t=this._commitBeforeSorting;return t!==void 0?t:e===void 0||e},set:function(e){e!=this._commitBeforeSorting&&(this._commitBeforeSorting=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"keepFocusedRow",{get:function(){var e=Re.sorting.keepFocusedRow,t=this._keepFocusedRow;return t!==void 0?t:e!==void 0&&e},set:function(e){e!=this._keepFocusedRow&&(this._keepFocusedRow=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase||Re.sorting.textCase||c.SortCase.SENSITIVE},set:function(e){e!=this._textCase&&(this._textCase=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSortOrder",{get:function(){var e=Re.sorting.showSortOrder,t=this._showSortOrder;return t!==void 0?t:e!==void 0&&e},set:function(e){e!=this._showSortOrder&&(this._showSortOrder=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(e){e!=this._pageSorting&&(this._pageSorting=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},set:function(e){e&&!e.message&&(e=T(T({},e),{message:this._messageCallback})),this._toast&&this._toast.assignFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullsOrder",{get:function(){return this._nullsOrder||Re.sorting.nullsOrder||c.NullsOrder.DEFAULT},set:function(e){e!==this._nullsOrder&&(this._nullsOrder=e,this.grid&&this.grid.setNullsOrder(e),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outerSort",{get:function(){return this._outerSort},set:function(e){e!==this._outerSort&&(this._outerSort=e,this.grid&&this.grid.setOuterSort(e),this._changed())},enumerable:!1,configurable:!0}),i.prototype._messageCallback=function(){return Re.sorting.toast.message||ye.messages.sortingToastMessage},i}(hi),en=function(a){function i(e,t){return t===void 0&&(t=null),a.call(this,e,t)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){for(var e=this.parent;e;){if(e instanceof Fo)return e;e=e.parent}return null},enumerable:!1,configurable:!0}),i.prototype.measure=function(e,t,o){return this._doMeasure(e,t,o)},i.prototype.layoutContent=function(e,t,o){this._doLayoutContent(e,t,o)},i.prototype._doMeasure=function(e,t,o){return new vo(t,o)},i.prototype._doLayoutContent=function(e,t,o){},i}(Ft),Uy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._initDom=function(e){a.prototype._initDom.call(this,e)},i}(en),Rc=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i}(en),zy=function(a){function i(e){var t=a.call(this,e.doc,"fixedColumnBar")||this;return t._grid=e,t}return w(i,a),i.prototype._getCssSelector=function(){return To.COLUMN_BAR_STYLE},i}(Ft),Pc=function(a){function i(e,t){return t===void 0&&(t=null),a.call(this,e,t)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.layoutBars=function(e,t,o){this._layoutBars(e,t,o)},i.prototype._doLayoutContent=function(e,t,o){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),a.prototype._doLayoutContent.call(this,e,t,o)},i.prototype._createBar=function(e){return new zy(e)},i.prototype._layoutBars=function(e,t,o){var r=e.fixedBarWidth,n=e.footBounds.height;if(this._barView.visible=r>0,this._barView2.visible=!1,this._barView.visible){var s=Math.min(o-n,e.dataBounds.bottom);this._barView.setBounds(t-r,0,r,s),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(t-r,o-n,r,n))}},i}(Rc),Yy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-right-column-bar"},i}(Ft),qy=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._createBar=function(){return new Yy(this.doc,"rightColumnBar")},i.prototype._layoutBars=function(e,t,o){var r=e.rightBarWidth,n=e.footBounds.height;if(this._barView.visible=r>0,this._barView2.visible=!1,this._barView.visible){var s=Math.min(o-n,e.dataBounds.bottom);this._barView.setBounds(0,0,r,s),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,o-n,r,n))}},i}(Pc);(function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this,e,t)||this;return o.visible=!1,o}w(i,a),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(e){e!=this._message&&(this._message=e,this._dom.innerHTML=e,this.invalidate())},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-message-pane"},i.prototype._doLayoutContent=function(e,t,o){a.prototype._doLayoutContent.call(this,e,t,o)}})(en),c.TimeSelectType=void 0,(As=c.TimeSelectType||(c.TimeSelectType={})).NONE="none",As.HOUR="hour",As.MINUTE="minute",As.SECOND="second",function(a){a.DAY="day",a.MONTH="month",a.YEAR="year"}(rt||(rt={}));var ii,kc=/[---]/g,Pl=function(a){if(!a)return null;(a=String(a))&&(a=a.replace(/[^0-9]/g,""));var i=parseInt(a.substr(0,4)),e=parseInt(a.substr(4,2));if(isNaN(i)||i<=0||isNaN(e)||e<0)return null;var t=new Date(i,0,1),o=4-t.getDay()+1;return t.setDate(o),t.getFullYear()==i&&e--,o=7*e,t.setDate(t.getDate()+o),t},Gn=function(a,i,e){var t,o=function(h){var d=new Date(h),p=d.getDay();p=p<i?-3-p:4-p;var f=d.getDate();return d.setDate(f+p),d},r=a.getFullYear(),n=o(new Date(r,0,1)),s=o(new Date(r,a.getMonth(),a.getDate())),l=n.getFullYear(),u=s.getFullYear();return u<r?(n=o(new Date(l,0,1)),t=Math.ceil((s.valueOf()-n.valueOf())/6048e5)+(n.getFullYear()===u?1:0)):t=u>r?1:Math.ceil((s.valueOf()-n.valueOf())/6048e5)+(l===u?1:0),String(u)+(e??"")+(t<10?"0"+t:String(t))},Tc=function(a){function i(e){var t=a.call(this)||this;return t._tooltips=[],t._items=[],t._enabled=!0,t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"tooltips",{get:function(){return this._tooltips},set:function(e){this._tooltips=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName||""},set:function(e){this._styleName=e},enumerable:!1,configurable:!0}),i.prototype.load=function(e){this.clear()},i.prototype.clear=function(){this._items=[],this._tooltips=[]},i.prototype.contains=function(e){return!1},i.prototype.getTooltip=function(e){return null},i}(me),Ky=function(a){function i(e,t){var o=a.call(this,e)||this;return t&&o.load(t),o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.load=function(e){if(a.prototype.load.call(this,e),e){var t=v.makeArray(e.dates,!0);e.tooltips=v.makeArray(e.tooltips,!0);for(var o=0,r=t.length;o<r;o++){var n=t[o],s=void 0;if(n instanceof Date||typeof n=="number")(s=new Date(n)).setHours(0,0,0,0);else if(typeof n=="string"){n.length!==4&&n.length!==8||!/^[0-9]*$/.test(n)||(n=n.length===4?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var l=n.split(/[.//-]/);if(l.length==2)try{s=parseInt(l[0]).toString()+"/"+parseInt(l[1]).toString()}catch{v.log("  (".concat(n,")"))}else l.length==3&&(s=Uo.getSimpleDateNull(n))}s&&(this._items.push(s),e.tooltips[o]&&this._tooltips.push(e.tooltips[o]))}e.enabled!=null&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},i.prototype.getItemIndex=function(e){for(var t=0,o=this._items.length;t<o;t++){var r=this._items[t];if(r instanceof Date&&r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()&&r.getDate()===e.getDate()||r===e.getMonth()+1+"/"+e.getDate())return t}return-1},i.prototype.contains=function(e){return this.getItemIndex(e)>=0},i.prototype.getTooltip=function(e){var t=this.getItemIndex(e);return t>=0?this._tooltips[t]:null},i}(Tc),Xy=function(a){function i(e,t){var o=a.call(this,e)||this;return t&&o.load(t),o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.load=function(e){a.prototype.load.call(this,e),e&&(this._items=v.makeArray(e.days,!0),this._tooltips=v.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},i.prototype.contains=function(e){return e instanceof Date&&this._items.indexOf(e.getDay())>=0},i.prototype.getTooltip=function(e){var t=e instanceof Date?this._items.indexOf(e.getDay()):this._items.indexOf(e);return t>=0?this._tooltips[t]:null},i}(Tc),kl=function(a){function i(){var e=a.call(this)||this;return e._items=[],e._count=-1,e}return w(i,a),i.prototype._doDispose=function(){this._editor=null,this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(e){this._editor=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return this._count==-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),i.prototype.setNull=function(){this.clear()},i.prototype.clear=function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clear();this._items=[],this._count=-1},i.prototype.load=function(e){if(this.clear(),e){for(var t=0,o=(e=v.isArray(e)?e:[e]).length;t<o;t++){var r=e[t],n=void 0;switch(r.type){case"day":n=new Xy(this,r);break;case"date":n=new Ky(this,r)}n.count>0&&this._items.push(n)}this._count=this._items.length}else this._count=-1},i.prototype.contains=function(e){for(var t=0,o=this._items.length;t<o;t++)if(this._items[t].contains(e))return this._items[t];return null},i}(me),Dc=function(a){function i(e,t){var o=a.call(this)||this;return o._minWidth=0,o._maxWidth=0,o._dropDownPosition=c.DropDownPosition.BUTTON,o._showToday=!0,o._viewGridInside=!1,o._showWeeks=!1,o._startWeek=0,o._weekSelectable=!1,o._weekSeparator="",o._currentMode=rt.DAY,o._date=new Date,o._selected=!1,o._focused=!0,o._canceled=!1,o._touchs=null,o._applyTouchs=null,o._clickHandler=function(r){var n=o.$_getCellDate(o._currDate,r.currentTarget.$_day+1);if(o._editor.containsRange(n)){var s=o._holidays&&o._holidays.contains(n);s&&!s.enabled||(o.date=new Date(n),o._selected=!0,o.focused=!0,o._editor.$_selectDate(o._date),!o.showButtons&&o._editor.timeSelectType===c.TimeSelectType.NONE&&o.fireEvent(i.CLOSE_UP,!0))}},o._dblClickHandler=function(r){o.fireEvent(i.CLOSE_UP,!0)},o._yearWeekClickHandler=(function(r){var n,s=r.currentTarget.$_yearWeek;s&&(n=Pl(s)),n&&this._editor.containsRange(n)&&(this._date=new Date(n),this._selected=!0,this._editor.$_selectDate(this._date),!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0))}).bind(o),o._mouseupHandler=(function(r){!this._isMobile&&this._editor.setFocus()}).bind(o),o._timeWheelHandler=function(r){v.stopEvent(r),o._doTimeWheel(r)},o._timeClickHandler=function(r){v.stopEvent(r),o._doTimeClick(r)},o._touchStartHandler=function(r){o._touchs=[],o._applyTouchs=[],o._swipeTimer=clearInterval(o._swipeTimer),r.touches.length!=1&&(o._touchId=void 0),o._touchId=r.touches[0].identifier;var n=r.touches[0];o._touchs.push({x:n.clientX,y:n.clientY,t:r.timeStamp}),o._applyTouchs.push({x:n.clientX,y:n.clientY,t:r.timeStamp})},o._touchEndHandler=function(r){o._checkSwipe(r.target),o._touchs=o._applyTouchs=null},o._touchMoveHandler=function(r){if(!(r.touches.length>1)){v.stopEvent(r);var n=o._touchs,s=o._applyTouchs,l=r.touches[0],u={x:l.clientX,y:l.clientY,t:r.timeStamp};n.push(u),s.push(u);var h=s[0].y,d=s[s.length-1].y;Math.abs(h-d)>13&&(o._applyTouchs=[],o._doTimeScroll(r.target,h-d))}},o._checkSwipe=function(r){var n=o._touchs,s=n.length;if(!(s<2)){for(var l=n[s-1],u=n[s-2],h=s-3;h>=0&&!(l.t-u.t>100);h--)u=n[h];var d=u.x,p=u.y,f=l.x,g=l.y,m=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-g,2))/Math.max(16,l.t-u.t),b=.998;if(m>.1){var C=Math.log(.1/m)/Math.log(b),x=m*(1-Math.pow(b,C+1))/(1-b),E="right",S=Math.round(180*Math.atan2(g-p,f-d)/Math.PI);return S<0&&(S=360+S),S>45&&S<=135?E="bottom":S>135&&S<=225?E="left":S>225&&S<=315&&(E="top"),o.onSwipeHandler(C,x,E,r)}return!1}},o.$_scrollRow=function(){v.getTimer()-o._swipeStarted<o._swipeDuration?o._doTimeScroll(o._swipeTarget,o._swipeDistance):o._swipeTimer=clearInterval(o._swipeTimer)},o.$_nextMonth=function(r){v.incMonth(o._currDate,1),o.$_buildCalendar()},o.$_prevMonth=function(r){v.incMonth(o._currDate,-1),o.$_buildCalendar()},o.$_nextYearMonth=function(r){v.incYear(o._currDate,1),o.$_buildMonths()},o.$_prevYearMonth=function(r){v.incYear(o._currDate,-1),o.$_buildMonths()},o.$_nextYear=function(){var r=o._yearTable.tBodies[0].rows[2].cells[3],n=parseInt(r.getAttribute("year"));o.$_buildYear(n)},o.$_prevYear=function(){var r=o._yearTable.tBodies[0].rows[0].cells[0],n=parseInt(r.getAttribute("year"))-4;o.$_buildYear(n)},o._editor=t,o._container=e,o._yearDisplayFormat=t.yearDisplayFormat,o._monthDisplayFormat=t.monthDisplayFormat,o._months=t.months,o._element=o.$_createPicker(t),o._element.addEventListener("pointerup",o._mouseupHandler),o}return w(i,a),i.prototype.onSwipeHandler=function(e,t,o,r){this._swipeDuration=e,this._swipeStarted=v.getTimer(),this._swipeTarget=r;var n=1;switch(o){case"bottom":n=-1;case"top":this._swipeDistance=n*t/20,this._swipeTimer=setInterval(this.$_scrollRow,40)}return!0},i.prototype._doDispose=function(){var e=this;if(this._element){var t=function(o){o&&(o.removeEventListener("wheel",e._timeWheelHandler),o.removeEventListener("click",e._timeClickHandler),o.removeEventListener("touchstart",e._touchStartHandler),o.removeEventListener("touchend",e._touchEndHandler),o.removeEventListener("touchmove",e._touchMoveHandler),o.removeEventListener("dblclick",e._dblClickHandler))};this._element.removeEventListener("pointerup",this._mouseupHandler),t(this._hourElement.$_UL),t(this._minuteElement.$_UL),t(this._secondElement.$_UL),v.detach(this._element)}a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(e){this._showToday=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(e){this._yearDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(e){this._monthDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months},set:function(e){v.isArray(e)&&(this._months=e,this._months.length=12,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||v.isSlotMode()},set:function(e){this._viewGridInside=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(e){this._showWeeks=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(e){this._startWeek=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(e){this._weekSelectable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(e){this._weekSeparator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(e){this._holidays=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(e){if(e){if((!this._date||this._date.getTime()!==e.getTime())&&(this._currDate=new Date(e),this._date=new Date(e),this.listing)){switch(this._currentMode){case rt.DAY:this.$_buildCalendar();break;case rt.MONTH:this.$_buildMonths();break;case rt.YEAR:this.$_buildYear(this._date.getFullYear())}this._setTime(this._date,!1)}}else e===null&&(this._date=null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canceled",{get:function(){return this._canceled},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(e){e!=this._focused&&(this._focused=e,this._element.style.border=e?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=e?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=e?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=e?"1.0":"0.5")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"today",{get:function(){return this.date=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(e){this._footer&&(this._footer.style.display=e?"":"none"),this._showButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(e){this._saveElement&&(this._saveElement[v.TextProp]=v.htmlEncode(e)),this._saveLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(e){this._cancelElement&&(this._cancelElement[v.TextProp]=v.htmlEncode(e)),this._cancelLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(e){this._deleteElement&&(this._deleteElement[v.TextProp]=v.htmlEncode(e)),this._deleteLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayLabel",{get:function(){return this._todayLabel},set:function(e){this._todayElement&&(this._todayElement[v.TextProp]=v.htmlEncode(e)),this._todayLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentMode",{get:function(){return this._currentMode},set:function(e){if(this._currentMode!==e){this._currentMode=e;for(var t=this._bodyElement,o=void 0,r=this._header,n=r.$_prev,s=r.$_next,l=this._currDate||new Date;o=t.lastElementChild;)t.removeChild(o);var u=l.getMonth(),h=l.getFullYear();switch(this._currentMode){case rt.MONTH:t.appendChild(this._monthsElement),this.$_buildMonths(),n.onclick=this.$_prevYearMonth,s.onclick=this.$_nextYearMonth,n.title="".concat(h-1,"/").concat(u+1),s.title="".concat(h+1,"/").concat(u+1);break;case rt.YEAR:t.appendChild(this._yearsElement),this.$_buildYear(l.getFullYear()),n.onclick=this.$_prevYear,s.onclick=this.$_nextYear,n.title="".concat(10*Math.floor(h/10)-11,"-").concat(10*Math.floor(h/10)),s.title="".concat(10*Math.floor(h/10)+11,"-").concat(10*Math.floor(h/10)+20);break;default:t.appendChild(this._calendarElement),this.$_buildCalendar(),n.onclick=this.$_prevMonth,s.onclick=this.$_nextMonth,n.title=u==0?h-1+"/12":h+"/"+v.pad(u),s.title=s.title=u==11?h+1+"/01":h+"/"+v.pad(u+2)}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(e){if(e)this._hours=e.slice();else{this._hours=[];for(var t=0;t<24;t++)this._hours.push(t)}this.$_buildHourMinutes(c.TimeSelectType.HOUR)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(e){if(e)this._minutes=e.slice();else{this._minutes=[];for(var t=0;t<60;t++)this._minutes.push(t)}this.$_buildHourMinutes(c.TimeSelectType.MINUTE)},enumerable:!1,configurable:!0}),i.prototype.setWeekDays=function(e){this._weekDays=e.slice()},i.prototype.show=function(e,t,o,r,n){this._containerElement=!v.isMobile()&&this.viewGridInside?this._container._container:e,this._element.style.removeProperty("width"),this._timeContainer.style.setProperty("height","0px"),this.$_show(t,o,r,n)},i.prototype.hide=function(){this.focused=!1,v.detach(this._element),this._containerElement=null},i.prototype.incDay=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date)).setDate(this._date.getDate()+e):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},i.prototype.incMonth=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),v.incMonth(t,e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},i.prototype.startDay=function(){var e=new Date(this._currDate),t=e.getDay()-this._startWeek;return e.setDate(e.getDate()-(t+7)%7),this.date=e},i.prototype.endDay=function(){var e=new Date(this._currDate),t=e.getDay()-this._startWeek;return e.setDate(e.getDate()+(6-t)),this.date=e},i.prototype.incHour=function(e){var t,o=new Date(this._currDate),r=o.getHours(),n=this._hours;return n?(t=n.indexOf(r))>=0?(r=n[t+e])==null&&(r=e===1?n[0]:n[n.length-1]):r=n[0]:r=(24+r+e)%24,o.setHours(r),this.$_setTime(this._hourElement,null,r,!0),this.date=o},i.prototype.incMinute=function(e){var t,o=new Date(this._currDate),r=this._minutes,n=o.getMinutes();return r?(t=r.indexOf(n))>=0?(n=r[t+e])==null&&(n=e===1?r[0]:r[r.length-1]):n=r[0]:n=(24+n+e)%24,o.setMinutes(n),this.$_setTime(this._minuteElement,null,n,!0),this.date=o},i.prototype.incSecond=function(e){var t=new Date(this._currDate),o=t.getSeconds();return o=(60+o+e)%60,t.setSeconds(o),this.$_setTime(this._secondElement,null,o,!0),this.date=t},i.prototype.setCurrentLoc=function(e){var t="focused";e===1?v.addClassName(this._hourElement,t):v.removeClassName(this._hourElement,t),e===2?v.addClassName(this._minuteElement,t):v.removeClassName(this._minuteElement,t),e===3?v.addClassName(this._secondElement,t):v.removeClassName(this._secondElement,t)},i.prototype._changed=function(){},i.prototype.$_getCellDate=function(e,t){var o=new Date(e);return o.setDate(t),o},i.prototype.$_createPicker=function(e){var t=this._container.doc,o=t.createElement("div");this._id=o.id="rg-calendar-"+Mc.$$_LIST_ID++;var r=o.style;return r.position="absolute",r.boxSizing="border-box",r.margin="0px",r.overflow="auto",r.zIndex=String(e._baseZindex+2),o.className="rg-calendar",this._header=this.$_createHeader(t),o.appendChild(this._header),this._bodyElement=this.$_createBody(t),o.appendChild(this._bodyElement),this._calendarElement=this.$_createCalTable(t),this._monthsElement=this.$_createMonths(t),this._yearsElement=this.$_createYears(t),this._footer=this.$_createFooter(t),o.appendChild(this._footer),o},i.prototype.$_createBody=function(e){var t=e.createElement("div");return t.className="rg-calendar-body",t},i.prototype.$_createCalTable=function(e){var t,o=e.createElement("div");(t=o.style).display="flex",t.flexDirection="row";var r=this._dateContainer=e.createElement("div");(t=r.style).display="inline-block",o.appendChild(r),this._calendar=this.$_createCalendar(e),r.appendChild(this._calendar);var n=this._timeContainer=e.createElement("div");return o.appendChild(n),(t=n.style).display="none",t.overflow="hidden",t.height="0px",n.appendChild(this._hourElement=this.$_createHour(e)),n.appendChild(this._minuteElement=this.$_createMinute(e)),n.appendChild(this._secondElement=this.$_createSecond(e)),o},i.prototype._getCell=function(e){for(var t=tt(e);e&&!(e instanceof t.HTMLTableCellElement);)e=e.parentElement;return e},i.prototype.$_setCurrentTime=function(e,t,o){for(var r=e.parentElement.clientHeight,n=e.offsetTop,s=0,l=0;l<e.childElementCount;l++){var u=e.children[l];t&&(u.setAttribute("time-value",t[l].toString()),u[v.TextProp]=v.pad(t[l])),t[l]===o?v.addClassName(u,"rg-cal-time-select"):v.removeClassName(u,"rg-cal-time-select"),(n+=s||(s=u.clientHeight+2))>r?u.style.visibility="hidden":u.style.removeProperty("visibility")}},i.prototype._doTimeScroll=function(e,t){for(var o=tt(this._containerElement),r=e;!(r instanceof o.HTMLUListElement)||r==null;)r=r.parentElement;if(r){var n=r.parentElement;if(!(n.scrollHeight<=n.clientHeight)){var s;switch(r.firstElementChild.getAttribute("kind")){case c.TimeSelectType.HOUR:s=this._currDate.getHours();break;case c.TimeSelectType.MINUTE:s=this._currDate.getMinutes();break;case c.TimeSelectType.SECOND:s=this._currDate.getSeconds()}if(r){for(var l=[],u=0;u<r.childElementCount;u++)l.push(Number(r.children[u].getAttribute("time-value")));t>0?l.push(l.shift()):l.unshift(l.pop()),this.$_setCurrentTime(r,l,s)}}}},i.prototype._doTimeWheel=function(e){this._doTimeScroll(e.target,e.deltaY)},i.prototype._doTimeClick=function(e){var t=e.target,o=new Date(this._currDate),r=t.getAttribute("kind"),n=Number(t.getAttribute("time-value"));switch(r){case c.TimeSelectType.HOUR:o.setHours(n);break;case c.TimeSelectType.MINUTE:o.setMinutes(n);break;case c.TimeSelectType.SECOND:o.setSeconds(n)}this._editor.$_selectDate(this.date=o),r===this._editor.timeSelectType&&!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0)},i.prototype._changeCurrent=function(e){switch(this._currentMode){case rt.DAY:this.currentMode=e?rt.MONTH:rt.DAY;break;case rt.MONTH:this.currentMode=e?rt.YEAR:rt.DAY;break;case rt.YEAR:this.currentMode=e?rt.YEAR:rt.MONTH}},i.prototype.$_createHeader=function(e){var t=this,o=function(f,g){var m=f.createElement("span"),b=m.style;return b.position="relative",b.minWidth="17px",b.minHeight="17px",m},r=this,n=this._headerElement=e.createElement("div"),s=n.style;s.position="relative",s.display="flex",n.className="rg-cal-header";var l=n.appendChild(n.$_prev=o(e));l.className="rg-cal-prev-month",l.onclick=this.$_prevMonth;var u=e.createElement("div");(s=u.style).position="relative",s.textAlign="center",s.display="flex",s.alignItems="center",s.justifyContent="center",s.height="100%",s.flexGrow="1",n.appendChild(n.$_title=u),u.className="rg-cal-yearmonth";var h=e.createElement("div");(s=h.style).position="relative",s.fontSize="14px",h.className="rg-cal-year",u.appendChild(u.$_year=h),h.onclick=function(f){t._currentMode!==rt.YEAR&&t._changeCurrent(!0)};var d=this._todayElement=e.createElement("span");(s=d.style).position="relative",d.className="rg-cal-today-button",n.appendChild(d),d.innerHTML=this.todayLabel,d.onclick=function(f){var g=new Date;r.focused=!0,r.date=g,r._selected=!0,r.currentMode=r.viewMode||rt.DAY,r._editor.$_selectDate(r._currDate),r._setTime(g,!0)};var p=n.appendChild(n.$_next=o(e));return p.className="rg-cal-next-month",p.onclick=this.$_nextMonth,n},i.prototype.$_createFooter=function(e){var t,o=e.createElement("div"),r=o.style;return r.display="none",o.className="rg-cal-buttons",t=this._deleteElement=e.createElement("span"),this._deleteLabel&&(t[v.TextProp]=v.htmlEncode(this._deleteLabel)),t.className="rg-cal-delete-button",(r=t.style).float="left",t.onclick=(function(n){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}).bind(this),o.appendChild(t),t=this._saveElement=e.createElement("span"),this._saveLabel&&(t[v.TextProp]=v.htmlEncode(this._saveLabel)),t.className="rg-cal-save-button",(r=t.style).float="right",t.onclick=(function(n){this.fireEvent(i.CLOSE_UP,!0)}).bind(this),o.appendChild(t),t=this._cancelElement=e.createElement("span"),this._cancelLabel&&(t[v.TextProp]=v.htmlEncode(this._cancelLabel)),t.className="rg-cal-cancel-button",(r=t.style).float="right",t.onclick=(function(n){this._selected=!1,this._canceled=!0,this.fireEvent(i.CLOSE_UP,!1)}).bind(this),o.appendChild(t),o},i.prototype.$_createCalendar=function(e){var t=i.weeksClass,o=e.createElement("table"),r=o.style;r.margin="2px",o.className="rg-cal-days-table";var n=o.createTHead();n.className="rg-cal-weeks";var s=e.createElement("tr");n.appendChild(s);var l=[],u=e.createElement("th");(r=u.style).minWidth="20px",r.textAlign="center",u.className="rg-cal-week-year-week",s.appendChild(u);var h=e.createElement("span");u.appendChild(h),n.$_weeks=u;for(var d=0;d<7;d++){var p=e.createElement("th");(r=p.style).minWidth="20px",r.textAlign="center",p.className="rg-cal-week-"+t[d],s.appendChild(p);var f=e.createElement("span");p.appendChild(f),l.push(f)}n.$_cells=l;var g=e.createElement("tbody");g.className="rg-cal-days",o.appendChild(o.$_body=g);for(var m=g.$_rows=[],b=g.$_yearweeks=[],C=0;C<6;C++){var x=e.createElement("tr");g.appendChild(x),m.push(x),x.$_cells=l=[];var E=e.createElement("td");(r=E.style).padding="1px",x.appendChild(E);var S=e.createElement("span");for(E.appendChild(E.$_span=S),b.push(E),d=0;d<7;d++){var P=e.createElement("td");(r=P.style).padding="1px",P.className="rg-cal-day rg-cal-week-"+t[(d+this._startWeek)%7],x.appendChild(P),P.onclick=this._clickHandler,P.ondblclick=this._dblClickHandler;var R=e.createElement("span");P.appendChild(P.$_span=R),P.id=this._id+"-"+C.toString()+"-"+d.toString(),l.push(P)}}return o},i.prototype.$_buildYear=function(e){for(var t=this._yearTable.tBodies[0],o=this._currDate.getFullYear(),r=e=10*Math.floor(e/10)-1,n=0;n<3;n++)for(var s=t.rows[n],l=0;l<4;l++){var u=s.cells[l];u.setAttribute("year",e.toString()),u.firstElementChild[v.TextProp]=v.htmlEncode(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",e+""):e+""),o===e?v.addClassName(u,"rg-cal-focusday"):v.removeClassName(u,"rg-cal-focusday"),e++}var h="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",r+""):r," - ").concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",--e+""):--e);this._headerElement.$_title.$_year[v.TextProp]=v.htmlEncode(h)},i.prototype.$_buildMonths=function(){for(var e=this._months,t=0,o=this._currDate.getMonth(),r=this._monthTable.tBodies[0],n=0;n<3;n++)for(var s=r.rows[n],l=0;l<4;l++){var u=s.cells[l];u.setAttribute("month",t.toString());var h=u.firstElementChild;e&&e[t]?h[v.TextProp]=v.htmlEncode(e[t]):h[v.TextProp]=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",t+1+""):"".concat(t+1),o===t?v.addClassName(u,"rg-cal-focusday"):v.removeClassName(u,"rg-cal-focusday"),t++}var d=this._currDate.getFullYear(),p="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",d+""):d);this._headerElement.$_title.$_year[v.TextProp]=v.htmlEncode(p)},i.prototype.$_buildHourMinutes=function(e){var t,o,r=this._container.doc;switch(e){case c.TimeSelectType.HOUR:t=this._hourElement,o=this._hours;break;case c.TimeSelectType.MINUTE:t=this._minuteElement,o=this._minutes}var n=t.$_UL;if(n){for(;n.lastElementChild;)n.removeChild(n.lastElementChild);o.forEach(function(s){var l=r.createElement("li");l.className="rg-cal-time-item",l.setAttribute("time-value",s.toString()),l[v.TextProp]=v.pad(s,2),l.setAttribute("kind",e),n.appendChild(l)})}},i.prototype.$_monthClick=function(e,t){var o=this._getCell(e.target);if(o){var r=parseInt(o.getAttribute("month")),n=this._currDate.getDate(),s=new Date(this._currDate.getFullYear(),r+1,0).getDate();if(this._currDate.setMonth(r,Math.min(n,s)),this.viewMode===rt.MONTH)return this._selected=!0,this.date=this._currDate,this._editor.$_selectDate(this._currDate),void(this.showButtons&&!t?this.$_buildMonths():this.fireEvent(i.CLOSE_UP,!0));this._changeCurrent(!1),this.$_buildCalendar()}},i.prototype.$_createMonths=function(e){var t=this,o=e.createElement("div"),r=this._monthTable=e.createElement("table");r.className="rg-cal-month-table";var n=e.createElement("tbody");r.appendChild(n);for(var s=0;s<3;s++){var l=n.appendChild(e.createElement("tr"));l.className="rg-cal-month-row";for(var u=0;u<4;u++){var h=l.appendChild(e.createElement("td"));h.className="rg-cal-month-cell",h.appendChild(e.createElement("div"))}}return o.appendChild(r),r.onclick=function(d){t.$_monthClick(d,!1)},r.ondblclick=function(d){t.showButtons&&t.$_monthClick(d,!0)},o},i.prototype.$_yearClick=function(e,t){var o=this._getCell(e.target);if(o){var r=parseInt(o.getAttribute("year"));if(this._currDate.setFullYear(r),this.viewMode===rt.YEAR)return this._selected=!0,this.date=this._currDate,this._editor.$_selectDate(this._currDate),void(this.showButtons&&!t?this.$_buildYear(this._currDate.getFullYear()):this.fireEvent(i.CLOSE_UP,!0));this._changeCurrent(!1)}},i.prototype.$_createYears=function(e){var t=this,o=e.createElement("div"),r=this._yearTable=e.createElement("table");r.className="rg-cal-year-table";for(var n=r.appendChild(e.createElement("tbody")),s=0;s<3;s++){var l=n.appendChild(e.createElement("tr"));l.className="rg-cal-year-row";for(var u=0;u<4;u++){var h=l.appendChild(e.createElement("td"));h.className="rg-cal-year-cell",h.appendChild(e.createElement("div"))}}return o.appendChild(r),r.onclick=function(d){t.$_yearClick(d,!1)},r.ondblclick=function(d){t.showButtons&&t.$_yearClick(d,!0)},o},i.prototype.$_createTimeElt=function(e,t,o,r){var n=t.style;t.className="rg-cal-time rg-cal-time-".concat(r),n.display="inline-block",n.height="100%",n.overflow="hidden",n.position="relative";var s=e.createElement("div");s.className="rg-time-header";var l=e.createElement("div");l.className="rg-time-title",t.$_Label=l,s.appendChild(l),t.appendChild(s);var u=e.createElement("ul");u.addEventListener("wheel",this._timeWheelHandler),u.addEventListener("click",this._timeClickHandler),u.addEventListener("touchstart",this._touchStartHandler),u.addEventListener("touchend",this._touchEndHandler),u.addEventListener("touchmove",this._touchMoveHandler),u.addEventListener("dblclick",this._dblClickHandler),u.className="rg-cal-time-list";for(var h=0;h<o;h++){var d=e.createElement("li");d.className="rg-cal-time-item",d.setAttribute("time-value",h.toString()),d[v.TextProp]=v.pad(h,2),d.setAttribute("kind",r),u.appendChild(d)}t.appendChild(u),t.$_UL=u},i.prototype.$_createHour=function(e){var t=e.createElement("div");return this.$_createTimeElt(e,t,24,c.TimeSelectType.HOUR),t},i.prototype.$_createMinute=function(e){var t=e.createElement("div");return this.$_createTimeElt(e,t,60,c.TimeSelectType.MINUTE),t},i.prototype.$_createSecond=function(e){var t=e.createElement("div");return this.$_createTimeElt(e,t,60,c.TimeSelectType.SECOND),t},i.prototype.$_show=function(e,t,o,r){var n=xe(this._element),s=Zt(n);this.focused=!1,this._selected=!1,this._canceled=!1,this._footer.style.display=this.showButtons?"":"none",this._showToday?this._todayElement.style.removeProperty("display"):this._todayElement.style.setProperty("display","none");var l=this._date;this._currDate=l?new Date(l):new Date,this._today=new Date;for(var u,h=this._bodyElement;u=h.lastElementChild;)h.removeChild(u);this._bodyElement.appendChild(this._calendarElement),this.currentMode=this.viewMode||rt.DAY,this.setCurrentLoc(0),this.$_buildCalendar(),v.disableSelection(this._element),this._containerElement.appendChild(this._element),this._timeContainer.style.height=this._dateContainer.getBoundingClientRect().height+"px",this.$_setTimeSelector(),this._setTime(this._currDate,!0);var d=v.getBrowserSize(),p=v.getClientRect(this._containerElement),f=v.getClientRect(this._container._container),g=d.width,m=d.height,b=v.getClientRect(this._element),C=s.pageXOffset||n.documentElement.scrollLeft,x=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(m-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(g-=18),e+=f.left-p.left,t+=f.top-p.top,(v.ieTen||v.ieOld||v.ieLeg)&&(e+=n.documentElement.scrollLeft,t+=n.documentElement.scrollTop),t+b.height>m+x&&(t=t-r.height-b.height)<0&&(t=m-b.height-2),this._dropDownPosition!=c.DropDownPosition.EDITOR?e=Math.max(0,e+o-b.width):e+b.width>g+C&&(e=g-b.width),!v.isMobile()&&this.viewGridInside&&(t=r.bottom-p.top+2,(p.bottom<r.bottom+b.height||m+x<r.bottom+b.height)&&(t=r.top-b.height-p.top-2)),v.isMobile()&&!v.isTablet()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,t+=n.documentElement.offsetTop),v.move(this._element,Math.max(0,e),Math.max(0,t)),this._element.style.setProperty("width",Math.ceil(b.width)+"px")},i.prototype.$_checkFocusedWeek=function(e,t,o){var r=["rg-cal-week-year-week"];this.$_isFocusedWeek(e,t.$_yearWeek)&&r.push("rg-cal-week-year-focusweek"),this.weekSelectable&&r.push("rg-week-selectable"),t.className=r.join(" ")},i.prototype.$_isFocusedWeek=function(e,t){return e&&t&&Gn(e,this._startWeek)==t},i.prototype.$_isFocusedDay=function(e,t){var o=this._date;return o&&e.getFullYear()==o.getFullYear()&&e.getMonth()==o.getMonth()&&t==o.getDate()},i.prototype.$_isToday=function(e,t){var o=this._today;return o&&e.getFullYear()==o.getFullYear()&&e.getMonth()==o.getMonth()&&t==o.getDate()},i.prototype.$_setTime=function(e,t,o,r){var n=e.$_UL,s=e.$_Label;if(n){s&&t&&(s[v.TextProp]=v.htmlEncode(t));var l=[].map.call(n.children,function(d){return Number(d.getAttribute("time-value"))}),u=l.indexOf(o);if(!(u<0)){if(!this.listing||r)if(u>2){var h=l.splice(0,u-2);l.push.apply(l,h)}else u<2&&(h=l.splice(l.length-u),l.unshift.apply(l,h));this.$_setCurrentTime(n,l,o)}}},i.prototype._setTime=function(e,t){this.$_setTime(this._hourElement,this._editor.hourLabel,e.getHours(),t),this.$_setTime(this._minuteElement,this._editor.minuteLabel,e.getMinutes(),t),this.$_setTime(this._secondElement,this._editor.secondLabel,e.getSeconds(),t)},i.prototype.$_setTimeSelector=function(){var e=this._editor.timeSelectType,t=this._hourElement.style,o=this._minuteElement.style,r=this._secondElement.style;if(t.display=o.display=r.display="none",this.viewMode===rt.DAY){var n=0;switch(e){case c.TimeSelectType.SECOND:r.display="inline-block",n++;case c.TimeSelectType.MINUTE:o.display="inline-block",n++;case c.TimeSelectType.HOUR:t.display="inline-block",n++}var s=this._headerElement.clientHeight+"px";this._hourElement.firstElementChild.style.height=this._minuteElement.firstElementChild.style.height=this._secondElement.firstElementChild.style.height=s,this._timeContainer.style.display=n?"inline-block":"none"}},i.prototype.$_buildCalendar=function(){var e,t,o=i.weeksClass,r=this._header,n=this._currDate,s=r.$_title,l=n.getFullYear(),u=n.getMonth(),h="";h=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",l+""):l)+"&nbsp;",this._months&&this._months.length>0?h+=this._months[u]:h+=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(u+1).toString()):u+1,s.$_year.innerHTML=h,h=s.$_year.innerText;for(var d=this._calendar.tHead.$_cells,p=0;p<7;p++){var f=d[(p+7-this._startWeek)%7];f.innerHTML=v.htmlEncode(this._weekDays[p]),f.parentElement.className="rg-cal-week-"+i.weeksClass[p]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var g=this._calendar.$_body,m=g.$_yearweeks,b=(p=0,m.length);p<b;p++)m[p].style.display=this.showWeeks?"":"none",m[p].onclick=this.weekSelectable?this._yearWeekClickHandler:null,m[p].ondblclick=this.weekSelectable?this._dblClickHandler:null;var C=g.$_rows,x=v.month_days[v.isLeapYear(l)?1:0][u],E=new Date(n);E.setDate(1);var S=(E.getDay()+7-this._startWeek)%7;x==30&&S==6||x==31&&S>=5?v.addChild(g,C[5]):v.removeChild(g,C[5]),x==28&&S==0?v.removeChild(g,C[4]):v.addChild(g,C[4]);var P,R,k=0,D=m[0];if(d=C[0].$_cells,S>0){var F=l,H=u-1;H<0&&(F--,H=11);var N=v.month_days[v.isLeapYear(F)?1:0][H];for(p=0;p<S;p++){(J=d[p]).removeAttribute("title");var V=new Date(this._currDate);J.$_day=p-S,V.setDate(J.$_day+1);var j=this._editor.containsRange(V);p===0&&(D.$_yearWeek=Gn(V,this._startWeek),D.$_span.innerText=D.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,D,j)),J.$_span.innerHTML=N-S+p+1,J.className="rg-cal-day rg-cal-prev-day "+(j?"":"rg-cal-disable-day ")+"rg-cal-week-"+o[(p+this._startWeek)%7]}}for(p=S;p<7;p++)(J=d[p]).removeAttribute("title"),J.$_day=k++,J.$_span.innerHTML=k,(E=new Date(this._currDate)).setDate(k),j=this._editor.containsRange(E),p===0&&(D.$_yearWeek=Gn(E,this._startWeek),D.$_span.innerText=D.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,D,j)),P=this.$_isFocusedDay(n,k),R=this.$_isToday(n,k),P&&this._editor._editor.setAttribute("aria-activedescendant",J.id),J.setAttribute("aria-label",h+" "+k.toString()),R?J.setAttribute("aria-current","date"):J.removeAttribute("aria-current"),j?J.removeAttribute("aria-disabled"):J.setAttribute("aria-disabled","true"),e="rg-cal-day "+(P?"rg-cal-focusday ":""),e+=R?"rg-cal-today ":"",e+=(t=this._holidays&&this._holidays.contains(E))?t.styleName+" rg-cal-holiday ":"",e+=j?"":"rg-cal-disable-day ",e+="rg-cal-week-"+o[(p+this._startWeek)%7],J.className=e,t&&(e=t.getTooltip(this.$_getCellDate(n,k)))&&(J.title=e);for(var K=1;K<6&&k<x;K++){d=C[K].$_cells;var U=m[K];for(p=0;p<7;p++)if(k<x)(J=d[p]).removeAttribute("title"),J.$_day=k++,(E=new Date(this._currDate)).setDate(k),j=this._editor.containsRange(E),p===0&&(U.$_yearWeek=Gn(E,this._startWeek),U.$_span.innerText=U.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,U,j)),J.$_span.innerHTML=k,P=this.$_isFocusedDay(n,k),R=this.$_isToday(n,k),P&&this._editor._editor.setAttribute("aria-activedescendant",J.id),J.setAttribute("aria-label",h+" "+k.toString()),R?J.setAttribute("aria-current","date"):J.removeAttribute("aria-current"),j?J.removeAttribute("aria-disabled"):J.setAttribute("aria-disabled","true"),e="rg-cal-day "+(P?"rg-cal-focusday ":""),e+=this.$_isToday(n,k)?"rg-cal-today ":"",e+=(t=this._holidays&&this._holidays.contains(E))?t.styleName+" rg-cal-holiday ":"",e+=j?"":"rg-cal-disable-day ",e+="rg-cal-week-"+o[(p+this._startWeek)%7],J.className=e,t&&(e=t.getTooltip(this.$_getCellDate(n,k)))&&(J.title=e);else for(var Y=1;p<7;p++){var J;(J=d[p]).removeAttribute("title"),J.$_day=k++,(E=new Date(this._currDate)).setDate(k),j=this._editor.containsRange(E),J.$_span.innerHTML=Y++,J.className="rg-cal-day rg-cal-next-day "+(j?"":"rg-cal-disable-day ")+"rg-cal-week-"+o[(p+this._startWeek)%7]}}},i.CLOSE_UP="onDatePickerCloseUp",i.weeksClass=["sun","mon","tue","wed","thu","fri","sat"],i}(Mt),Mc=function(a){function i(e,t){var o=a.call(this,e,t)||this;o._holidays=null,o._currentLoc=0,o._holidayCollection=new kl,o._closing=!1,o._regx=/[\d\-.:/apmz+ ]/i,o._globalMouseHandler=(function(n){var s=n.target;if(this._isMarquee(s))this.closeUp(!1);else{for(;s;){if(s===this._list._element)return;s=s.parentElement}this.closeUp(!0)}}).bind(o),e.editorOptions,o.assignFrom(Re.editor.dateCellEditor),o._baseZindex=e.displayOptions.baseZindex,o._list=new Dc(e.container,o),o._list.addListener(o);var r=o._editor;return r.setAttribute("aria-owns",o._list._element.id),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true"),o}return w(i,a),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(e){e!=this.datetimeFormat&&(this.datetimeFormat=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(e){e!=this._minDate&&(this._minDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){e!=this._maxDate&&(this._maxDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){e!=this._dropDownWhenClick&&(this._dropDownWhenClick=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(e){this._showToday=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){var e=this._grid;return this._yearDisplayFormat||e&&e.editorOptions.dateCellEditor.yearDisplayFormat||ye.messages.dateEditorYearDisplayFormat},set:function(e){this._yearDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){var e=this._grid;return this._monthDisplayFormat||e&&e.editorOptions.dateCellEditor.monthDisplayFormat||ye.messages.dateEditorMonthDisplayFormat},set:function(e){this._monthDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){var e=this._grid;return this._months||e&&e.editorOptions.dateCellEditor.months||ye.messages.dateEditorMonths},set:function(e){this._months=e.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekDays",{get:function(){var e=this._grid;return this._weekDays||e&&e.editorOptions.dateCellEditor.weekDays||ye.messages.dateEditorWeekDays},set:function(e){this._weekDays=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(e){this._showWeeks=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(e){e=e==null||isNaN(e=Math.floor(e))?0:e,this._startWeek=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(e){this._weekSelectable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(e){this._weekSeparator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){e!=this._commitOnSelect&&(this._commitOnSelect=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(e){e!=this._defaultShowDate&&(this._defaultShowDate=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultDate",{get:function(){return this._defaultDate},set:function(e){e!=this._defaultDate&&(this._defaultDate=e instanceof Date?new Date(e):e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(e){this._holidays=e,e?(this._holidayCollection=this._holidayCollection||new kl,this._holidayCollection.editor=this,this._holidayCollection.load(e)):this._holidayCollection.setNull(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(e){this._showButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel||ye.messages.dateEditorSaveLabel},set:function(e){this._saveLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel||ye.messages.dateEditorCancelLabel},set:function(e){this._cancelLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel||ye.messages.dateEditorDeleteLabel},set:function(e){this._deleteLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayLabel",{get:function(){return this._todayLabel||ye.messages.dateEditorTodayLabel},set:function(e){this._todayLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hourLabel",{get:function(){return this._hourLabel||ye.messages.dateEditorHourLabel},set:function(e){this._hourLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minuteLabel",{get:function(){return this._minuteLabel||ye.messages.dateEditorMinuteLabel},set:function(e){this._minuteLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"secondLabel",{get:function(){return this._secondLabel||ye.messages.dateEditorSecondLabel},set:function(e){this._secondLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(e){var t=this;if(typeof e=="string"){this._hours=[];try{e.split(",").forEach(function(o){var r=o.split("-");if(r.length===1&&r[0]&&!isNaN(parseInt(r[0])))t._hours.push(parseInt(r[0]));else if(r.length=2)for(var n=parseInt(r[0]),s=parseInt(r[1]),l=n;l<s;l++)t._hours.indexOf(l)<0&&t._hours.push(l)})}catch{this._hours=void 0}}else this._hours=e?e.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(e){this._minutes=e?e.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeSelectType",{get:function(){return this._timeSelectType},set:function(e){this._timeSelectType=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewMode",{get:function(){return this._viewMode},set:function(e){this._viewMode=e},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(e){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=xe(this._container),o=Zt(t),r=this._grid.editorOptions,n=this._list,s=t.documentElement,l=v.getClientRect(this._container);return this._currentLoc=0,n.viewGridInside=r.viewGridInside,n.dropDownPosition=this._dropDownPosition,n.showToday=this._showToday,n.yearDisplayFormat=this.yearDisplayFormat,n.monthDisplayFormat=this.monthDisplayFormat,n.months=this.months,n.minDate=this._minDate,n.maxDate=this._maxDate,n.showWeeks=this._showWeeks,n.startWeek=this._startWeek||0,n.weekSelectable=this.weekSelectable,n.weekSeparator=this.weekSeparator,n.showButtons=this.showButtons,n.saveLabel=this.saveLabel,n.cancelLabel=this.cancelLabel,n.deleteLabel=this.deleteLabel,n.currentMode=rt.DAY,n.holidays=this._holidayCollection.isNull?r._holidayCollection:this._holidayCollection,n.hours=this.hours,n.minutes=this.minutes,n.todayLabel=this.todayLabel,n.viewMode=this.viewMode,n.setWeekDays(this.weekDays),this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(s),n.show(s,0,0,0,null),this._centerPopup(s,n._element)):n.show(s,l.cx+1,l.cy+l.height,this._cellBounds.width,v.getClientRect(this._editor)),n.focused=e,this._editor.setAttribute("aria-expanded","true"),!v.isSlotMode()&&o.addEventListener("pointerdown",this._globalMouseHandler),!0}},i.prototype.closeUp=function(e){if(this.listing){var t=Zt(xe(this._container));this._closing=!0;try{t.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),e&&this._list.selected?this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},i.prototype.containsRange=function(e){return(!this._minDate||e>=this._minDate)&&(!this._maxDate||e<=this._maxDate)},i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._textReadOnly=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._dropDownPosition=c.DropDownPosition.BUTTON,this._dropDownWhenClick=!1,this._showToday=!0,this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=c.DefaultShowDate.NORMAL,this._showButtons=!0,this._cancelLabel=null,this._saveLabel=null,this._deleteLabel=null,this._todayLabel=null,this._timeSelectType=c.TimeSelectType.NONE,this._hours=null,this._minutes=null,this._viewMode=rt.DAY,this._holidayCollection&&this._holidayCollection.setNull()},i.prototype.initDefaultOptions=function(){var e=this._grid;e&&wt.initDefault(this,Re.editor.dateCellEditor,e.editorOptions.dateCellEditor)},i.prototype.setEditIndex=function(e){var t;a.prototype.setEditIndex.call(this,e);var o=(t=this._editField())===null||t===void 0?void 0:t.dataType;this._weekSelectable=this._weekSelectable&&o!==c.ValueType.DATE&&o!==c.ValueType.DATETIME},i.prototype.setEditValue=function(e){a.prototype.setEditValue.call(this,e),this.weekSelectable?this._date=Pl(e):this._date=typeof e=="string"?this._dateConverter.getDateNull(e):e},i.prototype.getEditValue=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1);var o=a.prototype.getEditValue.call(this,e),r=this._editField().dataType;return o&&t&&(r==c.ValueType.DATE||r==c.ValueType.DATETIME)&&(o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},i.prototype._createEditor=function(e){return a.prototype._createEditor.call(this,e)},i.prototype._textHandler=function(){this._requestStart(!1)},i.prototype._compositionstartHandler=function(e){this.isDisabled()||this._requestStart(!1)},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list,o=this.listing,r=o&&t.focused,n=this._list.currentMode;switch(e.keyCode){case 13:var s=!0;if(o&&r&&v.included(n,rt.YEAR,rt.MONTH)){if(this._viewMode!==n)return s=!1,t.currentMode=n===rt.YEAR?rt.MONTH:rt.DAY,t.currentMode===rt.DAY&&t.$_buildCalendar(),void v.stopEvent(e,!0);s=!0}if(s&&this.closeUp(!0))return v.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return v.stopEvent(e,!0),!0;break;case 36:case 35:if(r)return v.stopEvent(e,!0),this.$_selectDate(e.keyCode===36?t.startDay():t.endDay()),!0;break;case 37:case 39:if(r){if(this._currentLoc===0){switch(this._list.currentMode){case rt.DAY:this.$_selectDate(t.incDay(e.keyCode===37?-1:1));break;case rt.MONTH:this.$_selectDate(t.incMonth(e.keyCode===37?-1:1));break;case rt.YEAR:this.$_selectDate(t.incMonth(e.keyCode===37?-12:12))}return v.stopEvent(e,!0),!0}if(this._setLocation(e.keyCode===39))return v.stopEvent(e,!0),!0}break;case 33:case 34:if(r){v.stopEvent(e,!0);var l=e.keyCode===33?-1:1,u=e.shiftKey?12:1;return n===rt.MONTH?u=12:n===rt.YEAR&&(u=120),this.$_selectDate(t.incMonth(l*u)),!0}break;case 40:case 38:if(e.altKey&&e.keyCode===40&&!o)return this._requestStart(),v.stopEvent(e,!0),this._list.focused=!0,this.$_setListDate(),!0;if(e.altKey&&e.keyCode===38&&o)return this.closeUp(!1),v.stopEvent(e,!0),!0;if(o)return v.stopEvent(e,!0),r?(l=e.keyCode===40?1:-1,this._currentLoc===0?n===rt.MONTH?this.$_selectDate(t.incMonth(4*l)):n===rt.YEAR?this.$_selectDate(t.incMonth(48*l)):this.$_selectDate(t.incDay(7*l)):this._currentLoc===1?this.$_selectDate(t.incHour(1*l)):this._currentLoc===2?this.$_selectDate(t.incMinute(1*l)):this._currentLoc===3&&this.$_selectDate(t.incSecond(1*l))):this._list.focused=!0,!0;break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(v.stopEvent(e,!0),this._list.date=new Date,this.$_selectDate(this._list.date));break;case 9:if(r&&this.timeSelectType!==c.TimeSelectType.NONE&&this._setLocation(!e.shiftKey))return v.stopEvent(e,!0),!0}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._setLocation=function(e){var t=this._timeSelectType,o=this._currentLoc,r=1;if(t!==c.TimeSelectType.NONE){switch(t){case c.TimeSelectType.SECOND:r++;case c.TimeSelectType.MINUTE:r++;case c.TimeSelectType.HOUR:r++}return e?++o:--o,o<0||o>=r?!1:(this._list.setCurrentLoc(this._currentLoc=o),!0)}this._currentLoc=0},i.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var t=this._list,o=e.keyCode||e.which,r=String.fromCharCode(o);if(r.toLocaleLowerCase()==this.todayChar){if(v.stopEvent(e,!0),this.listing)return t.focused=!0,this.$_selectDate(t.today),t._setTime(t.today,!0),!0}else{if(v.isFirefox&&(e.ctrlKey||o===0))return void a.prototype._keyPressHandler.call(this,e);if(v.isMac&&e.metaKey&&v.included(o,99,118))return void a.prototype._keyPressHandler.call(this,e);if(!this._regx.test(r))return void e.preventDefault()}a.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},i.prototype.$_resetValue=function(e){if(e===void 0&&(e=!1),this.visible||e){var t=this._editor,o=t.selectionStart,r=t.selectionEnd,n=t.value?t.value.length:0;t.value=t.value.replace(kc,"");var s=t.value?t.value.length:0;this._isMobile||(s==n?t.setSelectionRange(o,r):t.setSelectionRange(r,r))}},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),a.prototype._dispatchChange.call(this))},i.prototype._changeHandler=function(e){a.prototype._changeHandler.call(this,e)},i.prototype._pasteHandler=function(e){a.prototype._pasteHandler.call(this,e)},i.prototype._copyHandler=function(e){a.prototype._copyHandler.call(this,e)},i.prototype._requestStart=function(e){return!!a.prototype._requestStart.call(this)&&(this._isMobile?e&&this.dropDown(!1):e!==!1&&this.dropDown(!1),!0)},i.prototype.setBounds=function(e,t,o,r,n){a.prototype.setBounds.call(this,e,t,o,r,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype.dropDownList=function(e){this.dropDown(!0)},i.prototype.closeList=function(e){this.closeUp(e)},i.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1):this.dropDown(!0)},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._isDateEditor=function(){var e=this._editField().dataType;return e==c.ValueType.DATE||e==c.ValueType.DATETIME||!this.weekSelectable},i.prototype.$_selectDate=function(e){if(e){if(this._date=e,this.containsRange(e)){var t=void 0;t=this.weekSelectable?Gn(e,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(t=this._mask.writeBuffer(t)),this._editor.value=t,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},i.prototype.$_setListDate=function(){var e,t=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),o=this._editor.value;switch(this._mask&&(o=this._mask.getStripValue()),e=this.weekSelectable?Pl(o):this._dateConverter.getDateNull(o),this._defaultShowDate){case c.DefaultShowDate.TODAY:e=new Date;break;case c.DefaultShowDate.NORMAL:break;case c.DefaultShowDate.TODAY_WHEN_NULL:e=e||new Date;break;case c.DefaultShowDate.DEFAULT_WHEN_NULL:e=e||t;break;case c.DefaultShowDate.DEFAULT:e=t}e&&(this._list.date=e)},i.prototype.onDatePickerCloseUp=function(e,t){this.closeUp(t),!this._isMobile&&this.setFocus()},i.INPUT_CSS="rg-date-editor",i.$$_LIST_ID=0,i}(ml),Jy=function(a){function i(e,t,o){var r=a.call(this)||this;r._dropDownPosition=c.DropDownPosition.BUTTON,r._viewGridInside=!1,r._selected=!1,r._focused=!1;var n=Zt(e.doc);return r._jquery=n&&n.jQuery,r._editor=t,r._container=e,r._btOptions=o,r._element=r.$_createList(e.doc),r}return w(i,a),i.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(e){if(this._date=e,e.getTime()!==this._date.getTime()&&(this._currDate=new Date(e),this._date=new Date(e),this.listing)){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());this._jquery&&this._jquery(this._element).datepicker("update",t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){this._viewGridInside=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(e){e!=this._focused&&(this._focused=e,this._element.style.border=e?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=e?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")},enumerable:!1,configurable:!0}),i.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},i.prototype.keydown=function(e){if(this._jquery){this._jquery(this._element).datepicker("keydown",e);var t=this._jquery(this._element).data("datepicker").viewDate;t instanceof Date&&(this.date=t,this._editor&&this._editor.selectDate(this._date))}},i.prototype.$_createList=function(e){var t=e.createElement("div"),o=t.style;return o.position="absolute",o.cssFloat="none",o.clear="both",o.boxSizing="border-box",o.zIndex=String(this._editor._baseZindex+2),o.margin="0px",o.overflow="auto",t.className="rg-calendar",t},i.prototype.show=function(e,t,o,r,n){if(this._containerElement=v.isMobile()&&this._viewGridInside?this._container._container:e,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(t,o,r,n)},i.prototype.$_createCalendar=function(){var e,t=this._element,o=this._btOptions;return this._date&&(e=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(t).datepicker&&this._jquery(t).datepicker(o).datepicker("setDate",e).on("changeDate",(function(r){var n=r.date;n&&!this._editor.containsRange(n)||(n?(this._date=new Date(n),this._selected=!0):(this._date=void 0,this._selected=!0),this.fireEvent(Dc.CLOSE_UP,!0))}).bind(this)),!0)},i.prototype.$_show=function(e,t,o,r){var n=this._container.doc,s=Zt(n);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var l=this._date;this._currDate=l?new Date(l):new Date;var u=v.getBrowserSize(),h=v.getClientRect(this._containerElement),d=v.getClientRect(this._container._container),p=u.width,f=u.height,g=v.getClientRect(this._element),m=s.pageXOffset||n.documentElement.scrollLeft,b=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(f-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(p-=18),e+=d.left-h.left,t+=d.top-h.top,(v.ieTen||v.ieOld||v.ieLeg)&&(e+=n.documentElement.scrollLeft,t+=n.documentElement.scrollTop),t+g.height>f+b&&r&&(t=t-r.height-g.height)<0&&(t=f-g.height-2),this._dropDownPosition!=c.DropDownPosition.EDITOR?e=Math.max(0,e+o-g.width):e+g.width>p+m&&(e=p-g.width),!v.isMobile()&&this._viewGridInside&&r&&(t=r.bottom-h.top+2,(h.bottom<r.bottom+g.height||f+b<r.bottom+g.height)&&(t=r.top-g.height-h.top-2)),v.isMobile()&&!v.isTablet()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,t+=n.documentElement.offsetTop),v.move(this._element,Math.max(0,e),Math.max(0,t))},i.prototype.today=function(){return this.date=new Date},i.prototype.incDay=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&t.setDate(this._date.getDate()+e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},i.prototype.incMonth=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&v.incMonth(t,e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},i.prototype.firstDay=function(){var e=new Date(this._currDate);return this._date&&e.setDate(1),this.date=e},i.prototype.lastDay=function(){var e=new Date(this._currDate);if(this._date){var t=e.getFullYear(),o=e.getMonth(),r=v.month_days[v.isLeapYear(t)?1:0][o];e.setDate(r)}return this.date=e},i}(Mt),Zy=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._dropDownPosition=c.DropDownPosition.BUTTON,o._dropDownWhenClick=!1,o._commitOnSelect=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._closing=!1,o._globalMouseHandler=(function(r){var n=r.target;if(this._isMarquee(n))this.closeUp(!1);else{for(;n;){if(n==this._list._element)return;n=n.parentNode}this.closeUp(!0)}}).bind(o),o}return w(i,a),i.prototype._doDispose=function(){this._globalMouseHandler=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"list",{get:function(){return this._list},set:function(e){this._list=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"btOptions",{get:function(){return this._btOptions},set:function(e){this._btOptions=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(e){this.datetimeFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){this._dropDownWhenClick=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){this._commitOnSelect=e},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var e=xe(this._container),t=Zt(e),o=this._grid,r=this._list=new Jy(o.container,this,this._btOptions),n=e.documentElement,s=v.getBounds(this._container);return r.addListener(this),r.viewGridInside=this._options&&this._options.viewGridInside,r.dropDownPosition=this._dropDownPosition,r.minDate=this._minDate,r.maxDate=this._maxDate,this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(n),r.show(n,0,0,0,null),this._centerPopup(n,r._element)):r.show(e.documentElement,s.x+1,s.y+s.height,this._cellBounds.width,v.getClientRect(this._editor)),!v.isSlotMode()&&t.addEventListener("pointerdown",this._globalMouseHandler),!0}return!1},i.prototype.closeUp=function(e){if(this.listing){var t=Zt(xe(this._container));this._closing=!0;try{!v.isSlotMode()&&t.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),e&&this._list.selected&&(this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},i.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1):this.dropDown()},i.prototype.dropDownList=function(){this.dropDown()},i.prototype.closeList=function(e){this.closeUp(e)},i.prototype.$_setListDate=function(){var e=this._editor.value;e&&this._mask&&(e=this._mask.getStripValue());var t=this._dateConverter.getDateNull(e);t&&(this._list.date=t)},i.prototype.selectDate=function(e){this.$_selectDate(e)},i.prototype.$_selectDate=function(e){if(e&&e!=this._date){if(this._date=e,this.containsRange(e)){var t=this._dateConverter.getText(this._date);this._mask&&(t=this._mask.writeBuffer(t)),this._editor.value=t,this._doChanged()}}else e===void 0&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},i.prototype.containsRange=function(e){return(!this._minDate||e>=this._minDate)&&(!this._maxDate||e<=this._maxDate)},Object.defineProperty(i.prototype,"listing",{get:function(){return!!this._list&&this._list.listing},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},i.prototype.initDefaultOptions=function(){},i.prototype._isDateEditor=function(){return!0},i.prototype.setEditValue=function(e){a.prototype.setEditValue.call(this,e),this._date=typeof e=="string"?this._dateConverter.getDateNull(e):e},i.prototype.getEditValue=function(e,t){var o=a.prototype.getEditValue.call(this,e),r=this._editField().dataType;return o&&t&&(r==c.ValueType.DATE||r==c.ValueType.DATETIME)&&(o=o.getTime(),o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},i.prototype._requestStart=function(e){return!!a.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():e!==!1&&this.dropDown(),!0)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(){this._requestStart()},i.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list,o=this.listing,r=o&&t.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return v.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return v.stopEvent(e,!0),!0;break;case 36:if(r)return v.stopEvent(e,!0),this.$_selectDate(t.firstDay()),!0;break;case 35:if(r)return v.stopEvent(e,!0),this.$_selectDate(t.lastDay()),!0;break;case 37:case 39:if(r)return v.stopEvent(e,!0),t&&t.keydown(e),!0;break;case 33:if(r)return v.stopEvent(e,!0),this.$_selectDate(t.incMonth(-1)),!0;break;case 34:if(r)return v.stopEvent(e,!0),this.$_selectDate(t.incMonth(1)),!0;break;case 40:if(e.altKey&&!o)return this._requestStart(),v.stopEvent(e,!0),!0;if(o)return v.stopEvent(e,!0),r?t.keydown(e):(t.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&o)return this.closeUp(!1),v.stopEvent(e,!0),!0;if(o)return v.stopEvent(e,!0),r?t.date.getDate()<=7?t.focused=!1:t.keydown(e):t.focused=!1,!0;break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(v.stopEvent(e,!0),t.date=new Date,this.$_selectDate(t.date))}return a.prototype._keyDownHandler.call(this,e)}},i.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var t=this._list,o=String.fromCharCode(e.keyCode||e.charCode);if(o.toLocaleLowerCase()==this.todayChar){if(v.stopEvent(e,!0),this.listing)return t.focused=!0,this.$_selectDate(t.today()),!0}else{if(v.isFirefox&&(e.ctrlKey||e.charCode===0))return a.prototype._keyPressHandler.call(this,e);if(!this._regx.test(o))return void e.preventDefault()}a.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},i.prototype.$_resetValue=function(e){if(e===void 0&&(e=!1),this.visible||e){var t=this._editor,o=t.selectionStart,r=t.selectionEnd,n=t.value?t.value.length:0;t.value=t.value.replace(kc,"");var s=t.value?t.value.length:0;this._isMobile||(s==n?t.setSelectionRange(o,r):t.setSelectionRange(r,r))}},i.prototype.setBounds=function(e,t,o,r,n){a.prototype.setBounds.call(this,e,t,o,r,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),a.prototype._dispatchChange.call(this))},i.prototype.onDatePickerCloseUp=function(e,t){this.closeUp(t),!this._isMobile&&this.setFocus()},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_listDestroy=function(){var e=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),e.removeChild(this._list._element),this._list.dispose(),delete this._list)},i.INPUT_CSS="rg-btdate-editor",i}(ml),Qy=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o}return w(i,a),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(e){e!=this._minDate&&(this._minDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){e!=this._maxDate&&(this._maxDate=e?e instanceof Date?e:typeof e=="string"?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),i.prototype._createEditor=function(e){var t=a.prototype._createEditor.call(this,e);return t.setAttribute("type","date"),t.tabIndex=this._isMobile?-1:0,t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initOptions=function(){a.prototype.initOptions.call(this)},i.prototype.initDefaultOptions=function(){},i.prototype.hasButton=function(e,t){return e==null||e},i.prototype.setVisible=function(e,t){t===void 0&&(t=!1),a.prototype.setVisible.call(this,e,t),this.visible&&this._editor.click()},i.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e);var t=this._editor;t.min=this._minDate?this.$_toInputDate(this._minDate):"",t.max=this._maxDate?this.$_toInputDate(this._maxDate):""},i.prototype.setEditValue=function(e){this._date=typeof e=="string"?this._dateConverter.getDateNull(e):e,this._editor.value=this.$_toInputDate(this._date)},i.prototype._keyDownHandler=function(e){if(!this.isDisabled())return e.keyCode===40&&e.altKey?(this._requestStart(),!0):a.prototype._keyDownHandler.call(this,e)},i.prototype.setBounds=function(e,t,o,r,n){a.prototype.setBounds.call(this,e,t,o,r,0),this._editor&&v.isiOS&&(this._editor.style.minWidth=o+"px",this._editor.style.width=o+"px")},i.prototype.$_toInputDate=function(e){return e?i.Formatter.getText(e):""},i.INPUT_CSS="rg-ndate-editor",i.Formatter=Lt.getFormatter("yyyy-MM-dd"),i}(bo),em=function(a){function i(e){var t=a.call(this,e)||this;return t._readOnly=!1,t._editable=!v.isMobile(),t._checkable=!0,t._updatable=!0,t._appendable=!1,t._insertable=!1,t._deletable=!1,t._revertable=!1,t._erasable=!1,t._movable=!1,t._commitByCell=!1,t._editWhenFocused=!1,t._commitWhenNoEdit=!1,t._commitWhenExitLast=!1,t._commitWhenLeave=!1,t._crossWhenExitLast=!1,t._validateOnEdited=!0,t._validateOnExit=!1,t._hintOnError=!0,t._showInvalidFormatMessage=!0,t._confirmWhenDelete=!0,t._editWhenClickFocused=!1,t._commitLevel=c.ValidationLevel.IGNORE,t._useTabKey=!0,t._useArrowKeys=!0,t._skipReadOnly=!1,t._skipReadOnlyCell=!1,t._verticalMoveStep=c.VerticalMoveStep.CELL,t._focusMoveStep=c.FocusMoveStep.CELL,t._enterToTab=!1,t._enterToNextRow=!1,t._enterToEdit=!1,t._maxLengthToNextCell=!1,t._forceInsert=!1,t._forceAppend=!1,t._checkDiff=!1,t._checkCellDiff=!1,t._strictDiff=!1,t._deletableWhenEdit=!0,t._showCommitError=!1,t._firstCellWhenInsert=!1,t._appendWhenInsertKey=!1,t._appendWhenExitLast=!1,t._showOnlyValidationMessage=!0,t._displayEmptyEditRow=!1,t._buttonClickWhenSpace=!1,t._exitGridWhenTab=c.ExitGridWhenTab.NONE,t._cancelWhenLastUndo=!1,t._exceptDataClickWhenButton=!1,t._removeValidateOnCommit=!1,t._validateOnlyEditColumn=!1,t._columnEditableFirst=!1,t._currentChangingFirat=!1,t.assignFrom(Re.edit),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=e,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(e){e!=this._columnEditableFirst&&(this._columnEditableFirst=e,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkable",{get:function(){return this._checkable},set:function(e){e!=this._checkable&&(this._checkable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(e){e!=this._updatable&&(this._updatable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendable",{get:function(){return this._appendable},set:function(e){e!=this._appendable&&(this._appendable=e,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(e){e!=this._insertable&&(this._insertable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(e){e!=this._deletable&&(this._deletable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"revertable",{get:function(){return this._revertable},set:function(e){e!=this._revertable&&(this._revertable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"erasable",{get:function(){return this._erasable},set:function(e){e!=this._erasable&&(this._erasable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitByCell",{get:function(){return this._commitByCell},set:function(e){e!=this._commitByCell&&(this._commitByCell=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(e){this._editWhenFocused=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(e){this._commitWhenNoEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(e){this._commitWhenExitLast=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(e){this._commitWhenLeave=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(e){this._crossWhenExitLast=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(e){this._validateOnEdited=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnExit",{get:function(){return this._validateOnExit},set:function(e){this._validateOnExit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(e){this._hintOnError=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(e){this._removeValidateOnCommit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(e){this._validateOnlyEditColumn=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage||ye.messages.deleteRowsMessage},set:function(e){this._deleteRowsMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage||ye.messages.invalidFormatMessage},set:function(e){this._invalidFormatMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(e){this._showInvalidFormatMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(e){this._confirmWhenDelete=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(e){this._editWhenClickFocused=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(e){this._commitLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(e){this._useTabKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(e){this._useArrowKeys=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(e){this._skipReadOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(e){this._skipReadOnlyCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(e){this._verticalMoveStep=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMoveStep",{get:function(){return this._focusMoveStep},set:function(e){this._focusMoveStep=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(e){this._enterToTab=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(e){this._enterToNextRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(e){this._enterToEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(e){this._maxLengthToNextCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(e){this._forceInsert=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(e){this._forceAppend=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(e){this._checkDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(e){this._checkCellDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(e){this._strictDiff=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(e){this._deletableWhenEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitEditingMessage",{get:function(){return this._commitEditingMessage||ye.messages.commitEditingMessage},set:function(e){this._commitEditingMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(e){this._showCommitError=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(e){this._firstCellWhenInsert=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(e){this._appendWhenInsertKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(e){this._appendWhenExitLast=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(e){this._showOnlyValidationMessage=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(e){var t=this.grid;this._displayEmptyEditRow=e,t.itemSource&&(this._displayEmptyEditRow&&this._appendable?t.itemSource.appendDummy():t.itemSource.cancelDummy(),this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(e){this._buttonClickWhenSpace=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(e){this._exitGridWhenTab=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(e){this._cancelWhenLastUndo=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(e){this._exceptDataClickWhenButton=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(e){this._scrollOnEditing=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentChangingFirst",{get:function(){return this._currentChangingFirat},set:function(e){this._currentChangingFirat=e},enumerable:!1,configurable:!0}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(e){return!this._readOnly&&(e||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i.prototype.$_invalidateEditor=function(){this.grid&&this.grid.requestPrepareEditor()},i}(hi),tm=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){this._cell=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"value",{set:function(e){this._value=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cell",{set:function(e){this._cell=e},enumerable:!1,configurable:!0}),i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._value;case i.ID_ROW:return this._cell.itemIndex+1;case i.ID_COLUMN_HEADER:var t=this._cell&&this._cell.column;return t&&t.header&&t.header.text?t.header.text:t.displayText}throw new Ee("Invalid identifier key: "+e)},i.ID_VALUE=0,i.ID_ROW=1,i.ID_COLUMN_HEADER=2,i.IDENTS={value:i.ID_VALUE,row:i.ID_ROW,dcount:i.ID_COLUMN_HEADER},i}(xi),im=function(a){function i(e){var t=a.call(this,e)||this;return t._months=null,t._weekDays=null,t._viewGridInside=!1,t._holidays=null,t._dateCellEditor={},t._numberCellEditor={},t._dropdownCellEditor={},t._multiCheckCellEditor={},t._searchCellEditor={},t._titleExprRuntime=new tm,t.assignFrom(Re.editor),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat||ye.messages.dateEditorYearDisplayFormat},set:function(e){this._yearDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat||ye.messages.dateEditorMonthDisplayFormat},set:function(e){this._monthDisplayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months||ye.messages.dateEditorMonths},set:function(e){this._months=e.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekDays",{get:function(){return this._weekDays||ye.messages.dateEditorWeekDays},set:function(e){this._weekDays=e.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateCellEditor",{get:function(){return this._dateCellEditor},set:function(e){this._dateCellEditor=T({},e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCellEditor",{get:function(){return this._numberCellEditor},set:function(e){this._numberCellEditor=T({},e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropdownCellEditor",{get:function(){return this._dropdownCellEditor},set:function(e){this._dropdownCellEditor=T({},e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multiCheckCellEditor",{get:function(){return this._multiCheckCellEditor},set:function(e){this._multiCheckCellEditor=T({},e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchCellEditor",{get:function(){return this._searchCellEditor},set:function(e){this._searchCellEditor=T({},e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){this._viewGridInside=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(e){e!=this._titleStatement&&(this._titleStatement=e,e?this._titleExprStatement?this._titleExprStatement.source=e:this._titleExprStatement=new ys(e):this._titleExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(e){e!=this._holidays&&(this._holidays=e,e?(this._holidayCollection=this._holidayCollection||new kl,this._holidayCollection.load(e)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!1,configurable:!0}),i}(hi),om=function(a){function i(e){var t=a.call(this,e)||this;return t._enabled=!0,t.assignFrom(Re.copy),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"singleMode",{get:function(){return this._singleMode},set:function(e){this._singleMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){this._datetimeFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){this._booleanFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){this._lookupDisplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(e){this._copyDisplayText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(e){this._includeHeaderText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(e){this._copyTextCallback=e},enumerable:!1,configurable:!0}),i}(hi),rm=function(a){function i(e){var t=a.call(this,e)||this;return t._enabled=!0,t._startEdit=!0,t._commitEdit=!0,t._enableAppend=!0,t._numberCharsOfCols={},t._numberSeparatorOfCols={},t._stopOnError=!0,t._throwValidationError=!0,t.assignFrom(Re.paste),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"singleMode",{get:function(){return this._singleMode},set:function(e){this._singleMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startEdit",{get:function(){return this._startEdit},set:function(e){this._startEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(e){this._commitEdit=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(e){this._enableAppend=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(e){this._forceAppend=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(e){this._fillFieldDefaults=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(e){this._fillColumnDefaults=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(e){this._forceRowValidation=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(e){this._forceColumnValidation=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(e){if(e!==this._datetimeFormats)if(this._datetimeFormats=e&&e.concat(),e){this._dateReaders=[];for(var t=0;t<this._datetimeFormats.length;t++)this._dateReaders.push(new Uo(this._datetimeFormats[t]))}else this._dateReaders=null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolReader=e&&new Wo(e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberChars",{get:function(){return this._numberChars},set:function(e){if(e!==this._numberChars)if(this._numberChars=e,e&&e.length>0){for(var t="[",o=0;o<e.length;o++){var r=e[o];t+=r=="\\"?"\\"+r:r}t+="]",this._numberCharExp=new RegExp(t,"g")}else this._numberCharExp=null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(e){this._numberSeparator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(e){if(e!==this._numberCharsOfCols&&(this._numberCharsOfCols=e,this._numberCharExpOfCols={},e))for(var t in e){var o=e[t];if(o instanceof Array&&o.length>0){for(var r="[",n=0,s=o.length;n<s;n++){var l=o[n];r+=l=="\\"?"\\"+l:l}r+="]",this._numberCharExpOfCols[t]=new RegExp(r,"g")}else this._numberCharExpOfCols[t]=null}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(e){this._numberSeparatorOfCols=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(e){this._selectionBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(e){this._selectBlockPaste=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(e){this._stopOnError=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(e){e!=this._noEditEvent&&(this._noEditEvent=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(e){this._noDataEvent=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(e){this._eventEachRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(e){this._checkReadOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(e){this._checkDomainOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(e){this._convertLookupLabel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(e){this._applyNumberFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(e){this._applyEditMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(e){this._applyMaxLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"applyInputChars",{get:function(){return this._applyInputChars},set:function(e){this._applyInputChars=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(e){this._throwValidationError=e},enumerable:!1,configurable:!0}),i.prototype.numberCharExpOfCol=function(e){return e&&this._numberCharExpOfCols&&this._numberCharExpOfCols[e]?this._numberCharExpOfCols[e]:this._numberCharExp},i.prototype.numberSeparatorOfCol=function(e){return e&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[e]?this._numberSeparatorOfCols[e]:this._numberSeparator},i}(hi),nm=function(a){function i(e){var t=a.call(this,e)||this;return t._longTapDuration=500,t._doubleTapInterval=500,t._tapThreshold=10,t._showEditCommander=!1,t._showTooltip=!1,t._scrollPropagate=!0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(e){e!=this._longTapDuration&&(this._longTapDuration=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(e){e!=this._doubleTapInterval&&(this._doubleTapInterval=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(e){e!=this._tapThreshold&&(this._tapThreshold=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(e){e!=this._showEditCommander&&(this._showEditCommander=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(e){this.grid.editOptions.scrollOnEditing=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollPropagate",{get:function(){return this._scrollPropagate},set:function(e){this._scrollPropagate=e},enumerable:!1,configurable:!0}),i}(hi),nr=function(a){function i(e){var t=a.call(this)||this;return t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),i.prototype.canFocus=function(){return!0},i}(El),Ir=function(a){function i(e,t){var o=a.call(this,e)||this;return o._style=t,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"style",{get:function(){return this._style},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return!0},enumerable:!1,configurable:!0}),i}(function(a){function i(e){var t=a.call(this,e.grid)||this;return t._index=e,t}return w(i,a),i.prototype._doDispose=function(){this._index.dispose(),this._index=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),i}(nr)),Vs=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){this._layout=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t,o,r){return this._layout=e,this._x=t,this._y=o,this._offset=r,this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!1,configurable:!0}),i}(nr),Tl=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){this._layout=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t,o,r){return this._layout=gt.getSource(e),this._x=t,this._y=o,r!=null&&(this._offset=r),this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),i}(nr),Lc=function(a){function i(e){var t=a.call(this,e)||this;return t._itemIndex=-1,t._variable=!1,t._rowTop=0,t._offset=0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"variable",{get:function(){return this._variable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowTop",{get:function(){return this._rowTop},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t,o,r){return this._itemIndex=e,this._variable=t,this._rowTop=o,this._offset=r,this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),i.prototype.canFocus=function(){return!1},i}(nr),Fc=function(a){function i(e){var t=a.call(this,e)||this;return t._offset=0,t._top=0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t){return this._top=e,this._offset=t,this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),i}(nr),Nc=function(a){function i(e){var t=a.call(this,e)||this;return t._itemIndex=-1,t._offset=0,t._layout=null,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t){return this._selStyle=e&&e.style,this._selStyle&&this._selStyle!=c.SelectionStyle.COLUMNS&&this._selStyle!=c.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=e.getBounds().top,this._layout=e.startLayout,this._offset=t-this._itemIndex):(this._itemIndex=t,this._offset=0,this._layout=null),this},Object.defineProperty(i.prototype,"cursor",{get:function(){return this.grid.dataDropOptions.cursor},enumerable:!1,configurable:!0}),i.prototype.canFocus=function(){return this._selStyle==c.SelectionStyle.COLUMNS||this._selStyle==c.SelectionStyle.SINGLE_COLUMN},i}(nr),Dl=function(a){function i(e){var t=a.call(this)||this;return t._visible=!0,e&&t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(e){typeof e=="string"?(this._message=e,this._message&&(this._visible=!0)):typeof e=="boolean"?this._visible=e:e&&a.prototype.assignFrom.call(this,e)},i}(me),sm=function(a){function i(e){var t=a.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropDownCount=8,t._showing=!1,t.$_touchendHandler=null,t._container=e,t._element=t.$_createElement(e.doc),t.$_touchendHandler=(function(o){o.preventDefault(),this.hide()}).bind(t),v.isMobile()&&t._element.addEventListener("touchend",t.$_touchendHandler,!1),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),v.detach(this._element)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){this._dropDownCount=e},enumerable:!1,configurable:!0}),i.prototype.show=function(e,t,o,r,n){this._showing=!0;try{this.$_show(e,t,o,r,n)}finally{this._showing=!1}},i.prototype.hide=function(){var e=this._element;e&&e.parentNode&&this._container._container.removeChild(e)},i.prototype.$_createElement=function(e){var t=e.createElement("div");return t.style.pointerEvents="none",t.onkeydown=(function(o){o.keyCode==27&&this.hide()}).bind(this),this.$_disableSelection(t),this._span=e.createElement("span"),t.appendChild(this._span),this.$_disableSelection(this._span),t},i.prototype.$_disableSelection=function(e){e.onselectstart!==void 0?e.onselectstart=function(){return!1}:e.style.MozUserSelect!==void 0?e.style.MozUserSelect="none":e.onmousedown=function(){return!1}},i.prototype.$_show=function(e,t,o,r,n){var s=this._container.gridView.displayOptions.baseZindex+4,l=this._element,u=e.message;if(l&&u){this._span.innerHTML=u.replace(/\n/g,"<br>"),v.setClassName(l,"rg-tooltip");var h=l.style;h.position="absolute",h.left=t+"px",h.top=o+"px",h.overflow="hidden",h.zIndex=String(s),this._container._container.appendChild(l);var d=l.getBoundingClientRect(),p=this._container._container.getBoundingClientRect();h.left=d.right>p.right?Math.max(p.right-d.width-p.left-2,0)+"px":l.style.left,d.bottom>p.bottom&&(l.style.top=n?Math.max(0,o-(d.bottom-p.bottom))+"px":Math.max(o-d.height-r,0)+"px"),h.visibility="visible"}},i}(me),am=function(a){function i(e){var t=a.call(this)||this;return t._active=!1,t._pos=new Qo,t._container=e.container,t}return w(i,a),i.prototype._doDispose=function(){this._container=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),i.prototype.show=function(e,t,o,r,n){if(!this._active&&(this.close(),(e=e instanceof Dl?e:e?new Dl(e):null)&&e.visible)){this._tipView||(this._tipView=new sm(this._container)),this._tipView.show(e,t,o,r,n);var s=this._container.gridView;return s&&this._pos.set(s.mouseX,s.mouseY),this._active=!0,!0}return!1},i.prototype.close=function(e,t){if(this._active&&e!==void 0){var o=this._pos;if(Math.abs(o.x-e)<4&&Math.abs(o.y-t)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},i}(me),Ml=function(a){function i(e){var t=a.call(this)||this;return t._type=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(e){this._inputFocusable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemClickable",{get:function(){return this._itemClickable},set:function(e){this._itemClickable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grid",{get:function(){return this._index&&this._index.grid.handler},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},enumerable:!1,configurable:!0}),i.prototype._doRenderCell=function(e,t,o,r,n){var s={};s.focused=o.focused,this.render(e.handler,t,r,n,s)},i.prototype.tooltip=function(e,t){},i.prototype.canEdit=function(){return a.prototype.canEdit.call(this)},i.prototype.canClick=function(e){return a.prototype.canClick.call(this,e)},i.prototype.canEditClickAt=function(e){return a.prototype.canEditClickAt.call(this,e)},i.prototype.canClickSpaceKey=function(e){return a.prototype.canClickSpaceKey.call(this,e)},i.prototype.click=function(e,t,o){return a.prototype.click.call(this,e,t,o)},i.prototype.itemClick=function(e){a.prototype.itemClick.call(this,e)},i.prototype.preventDefaultEditClick=function(e){a.prototype.preventDefaultEditClick.call(this,e)},i.prototype.preventDefaultClick=function(e){a.prototype.preventDefaultClick.call(this,e)},i.prototype._doEditClick=function(e,t,o){return a.prototype._doEditClick.call(this,e,t,o)},i}(Si),Ac=function(a){function i(e,t){var o=a.call(this)||this;return o._inputFocusable=!1,o._tags={},e&&typeof e.render=="function"?(o._impl=e,o._impl.type=t,o.assignFrom(o._impl)):o._impl=null,o._itemClickable=!0,o}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(e){this._inputFocusable!==e&&(this._inputFocusable=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tags",{get:function(){return this._tags},set:function(e){this._tags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grid",{get:function(){return this.index.grid.handler},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._impl&&this._impl.type},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,e)},i.prototype._doClearContent=function(e){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,e)},i.prototype._doRenderCell=function(e,t,o,r,n){var s={};s.focused=o.focused,this._impl&&this._impl.render&&this._impl.render.call(this,e.handler,t,r,n,s)},i.prototype.preventDefaultEditClick=function(e){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,e):a.prototype.preventDefaultEditClick.call(this,e)},i.prototype._doEditClick=function(e,t,o){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,e,t,o):a.prototype._doEditClick.call(this,e,t,o)},i.prototype.canEditClickAt=function(e){return this._impl&&this._impl.canEditClickAt?this._impl.canEditClickAt.call(this,e):a.prototype.canEditClickAt.call(this,e)},i.prototype.preventDefaultClick=function(e){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,e):a.prototype.preventDefaultClick.call(this,e)},i.prototype._doClick=function(e,t){return this._impl&&this._impl.click?this._impl.click.call(this,t):a.prototype._doClick.call(this,e,t)},i.prototype._doEditKey=function(e,t,o){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,t,o):a.prototype._doEditKey.call(this,e,t,o)},i.prototype.canClick=function(e){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,e):a.prototype.canClick.call(this,e)},i.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):a.prototype.canEdit.call(this)},i.prototype.canEditKey=function(e){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,e):a.prototype.canEditKey.call(this,e)},i}(Si),Bc=function(a){function i(e,t,o,r){var n=a.call(this)||this;return n._row=e,n._field=t,n._value=o,n._column=r,n._oldValue=v.deepCopy(e.getData(t)),n}return w(i,a),i.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},i.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},i.prototype.$_focusCell=function(){var e=this._column.grid,t=e.focusedIndex.clone();t.layout=this._column.layout,e.setFocusedIndex(t),e.makeCellVisible(t)},i}(Aa),$c=function(a){function i(e){var t=a.call(this)||this;return t._editIndex=new le,t._starting=!1,t._needPrepare=!1,t._modified=!1,t._commiting=!1,t._canceling=!1,t._resetting=!1,t._dirty=!1,t._editable=!1,t._readOnly=!1,t._resetFocused=!1,t._grid=e,t._defaultEditor=e.delegate.getDefaultCellEditor(),t._defaultEditor&&t._defaultEditor.setController(t),t._defaultEditor&&t._internalHideEditor(t._defaultEditor),t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),i.prototype.onEditorStart=function(e){if(!e.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},i.prototype.onEditorKeyDown=function(e,t){var o=t.ctrlKey;return this._editor&&(this._editor.textReadOnly||o||t.altKey||!this._isEditKey(t.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:t.keyCode==229&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(t)},i.prototype.onEditorKeyPress=function(e,t){return this._grid.activeTool.keyPress(t)},i.prototype.onEditorKeyUp=function(e,t){return this._grid.activeTool.keyUp(t)},i.prototype.onEditorChange=function(e){if(this._modified||(this._modified=!0,this._grid._editorStarted(e,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var t=e.getEditValue(!1,!1);t=t===wt.Unselected?e.getEditText():t,this._grid._editorChange(e,this._editIndex,t)}},i.prototype.onEditorSearch=function(e,t){this._grid._editorSearch(this._editor,this._editIndex,t)},i.prototype.onSearchCellButtonClick=function(e,t){return this._grid._searchCellButtonClick(this._editor,this._editIndex,t)},i.prototype.onEditorCommit=function(e){return this.commitEditor(!0,!1,!0,!1)},Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!1,configurable:!0}),i.prototype.setFocus=function(e,t){var o;if(t&&(!this._editor||t!==this._editor.editor)){var r=tt(t),n=this._grid,s=void 0,l=(o=this._editor)===null||o===void 0?void 0:o.editor;if((t instanceof r.HTMLInputElement||t instanceof r.HTMLSelectElement||t instanceof r.HTMLTextAreaElement)&&(s=n.getTableCell(t))){var u=n.getCellType(s),h=n.getTableView(s),d=h&&h.tableCellByCell&&h.tableCellByCell(s);if(u===c.GridCellType.DATA){var p=this._grid.focusedIndex.clone(),f=this._grid.getBodyCellAt(p,!0),g=f&&f.renderer2;if((g instanceof Ln||g instanceof Ac||g instanceof Ml)&&g.inputFocusable)return;l&&(l.tabIndex=-1)}else if(u===c.GridCellType.INLINE_FILTER){if(n.isItemEditing()&&n.filterPanel.beforeCommit&&n.commit(!1),!n.isEditing())return l&&(l.tabIndex=0),void n.makeColumnVisible(d.layout&&d.layout.firstColumn)}else if(v.included(u,c.GridCellType.HEADER,c.GridCellType.LAYOUT_HEADER,c.GridCellType.FOOTER,c.GridCellType.SUMMARY)&&!d.isClickableElt(t)&&v.isFocusableTemplate(s,t))return}}this.$_focusToEditor(e,t)},i.prototype.resetEditor=function(e){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),e&&this.editing){var t=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(t),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},i.prototype.invalidateEditor=function(){this._dirty=!0},i.prototype.closeList=function(e){this._editor&&this._editor.closeList(e)},i.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0,!1,!0,!1))},i.prototype.focusedIndexChanged=function(e,t,o){this._hideEditor(),this._grid.isValid(t)&&(o?this._prepareEditor(t):this._needPrepare=!0)},i.prototype.prepareEditor=function(e){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(e)&&this._prepareEditor(e))},i.prototype.requestPrepareEditor=function(){this._needPrepare=!0},i.prototype.showEditor=function(e,t){var o=this._grid;if(o&&o.isValid(e)&&e.item.canEdit()){if(this._editor&&this._editor.editing)return o.makeCellVisible(e),!0;if(this._editor&&!this._editor.editing&&(!this._showEditorTimer&&this._prepareEditor(e),o.makeCellVisible(e),this._activateEditor(!1,!0,t)))return!0}},i.prototype.showList=function(e){var t=this._grid,o=this._editor;if(o&&o.editing&&(t.makeCellVisible(e),this.cancelEditor(!0)),t&&t.isValid(e)&&(this._prepareEditor(e),t.makeCellVisible(e),o&&this._editable&&!o.editing))return o.dropDownList(!0),!0},i.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},i.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},i.prototype.commitEditor=function(e,t,o,r){if(!this.editing||this._commiting)return!0;var n=this._editor;if(!n)return!1;var s,l,u=this._grid,h=u.editOptions,d=this._editIndex,p=d.dataColumn,f=!0,g=n._mask;this._commiting=!0;try{if(n.commit(),(this._modified||n.isEdited())&&p&&p.dataIndex>=0)try{try{if((s=g&&!g.checkValid()?wt.InvalidFormat:n.getEditValue(!0,!0))===wt.InvalidFormat)f=!1,h.showInvalidFormatMessage&&g&&g.showInvalidFormatMessage&&alert(g&&g.invalidFormatMessage||h.invalidFormatMessage);else if(s===wt.Unselected)this._modified=!1,f=!0;else{var m={text:n.getEditText(),value:s},b=n.getEditListItem();b&&(m.item=b),this._grid.getEditValue(n,d,m),s=m.value,f=r||this._grid.editorCommit(d,this._getData(d),s)}}catch{f=!1}this._grid.isItemEditing()?f&&s!==wt.Unselected&&(this._setData(d,s),this._grid.isItemEditing(d.item)&&(s=this._getData(d),this._grid.validateCellCommit(d,s)),this._modified=!1):this._modified=!1}catch(N){l=N,f=!1}if(this._resetting=!0,f&&e)try{this._internalHideEditor(n),this._prepareEditor(d,o),n.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(l){if(t)throw l;h.showCommitError&&alert(l.message||l)}}finally{this._commiting=!1}if(f&&u.isCellEditing()){var C=u.itemSource,x=C.editingItem.invalidFields,E=u.validationManager.getError(d);if(E)return x.push(p.dataIndex),h.showCommitError&&alert(E.userMessage||E.message||E),!1;if(x.indexOf(p.dataIndex)>=0&&x.splice(x.indexOf(p.dataIndex),1),u.validationManager.clearInvalidCell(d),x.length>0)return!0;var S=u.canMergeEditing(u.getBodyCellAt(d,!0));if(!C.commit(S))return C.cancel(),!0;u.validationManager.cloneError(-1,d.dataId);var P=le.temp(u,d.itemIndex,p);if(S&&s!==wt.Unselected){var R=p.layout.merges.getRoom(d),k={},D={};D[p.fieldName]=s;for(var F=R.head;F<=R.tail;F++){var H=u.getItem(F);P.itemIndex=H.index,H.isDataRow&&(k[H.dataRow]=D),u.validationManager.clearInvalidCell(P)}C.updateRows2(k)}}return f},i.prototype.cancelEditor=function(e){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(o){throw o}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var t=this._grid.itemSource;t.isUpdating&&t.cancel()}}},i.prototype.fillSearchItems=function(e,t,o,r,n){this.editing&&this._editIndex.column===e&&this._editor instanceof fc&&this._editor.fillItems(t,o,r,n)},i.prototype.buttonClicked=function(e,t){var o=this._editor,r=this._grid,n=r.getBodyCellAt(e,!1),s=e.layout.getDataColumn();o&&le.areEquals(this._editIndex,e)&&o.hasButton(r.displayOptions.showNativeEditButton,n.editor||s.editor)&&o.buttonClicked(this._editIndex,t)},i.prototype.buttonDown=function(e,t){this._editor&&this._editor.buttonDown(e,t)},i.prototype.buttonUp=function(e,t){this._editor&&this._editor.buttonUp(e,t)},i.prototype.getData=function(e){return this._getData(e)},i.prototype.setEditValue=function(e,t){this._editor&&this._editor.setCellEditValue(e,t)},i.prototype.currentEditor=function(){return this._editor},i.prototype._internalHideEditor=function(e){this.closeList(!1),e.setVisible(!1,!1),e.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(e.editIndex)},i.prototype.$_hideEdit=function(e,t){t&&(t.setEditIndex(e),t.setVisible(!1),this.$_focusToEditor())},i.prototype.$_getCellEditor=function(e){var t,o=this._grid,r=o.getBodyCellAt(e);if(!(t=r&&r.editor)){var n=e.valueColumn;n&&(t=n.editor)}var s=o.delegate.getCellEditor(wt.getEditorType(t));return s&&(s.initOptions(),s.initDefaultOptions(),t&&s.applyOptions(t),s.setController(this)),s},i.prototype.resetEditable=function(e){var t=this._editor;if(!t)return!1;var o=this._grid;t.setReadOnly(!1);var r=o.editorOptions,n=e.valueColumn,s=e.item,l=o.canEditAt(e);if(r._titleExprStatement&&this._editor.setEditorTitle(e),!l)return this._editable=!1,this.$_hideEdit(e,this._editor),!1;var u=!o.canWriteAt(e);if(!u){var h=s.dataSource,d=h?h.getField(e.dataField):null;u=!d||d.dataType==c.ValueType.OBJECT&&(n.objectKey||d.objectKey)==null}return this._readOnly=u,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(e),this._editable=!0,!0},i.prototype.remainFocusing=function(e){this._resetFocused=e},i.prototype._prepareEditor=function(e,t){var o=this;t===void 0&&(t=!0);var r=this._grid,n=r.editOptions;if(this._dirty=!1,this._grid.isValid(e)&&e.item.canEdit()&&(this._hideEditor(t),this._editor=this.$_getCellEditor(e),this._editor)){this._editIndex.assign(e);var s,l=this._getData(e);this.resetEditable(e)?(this._editor.prepare(),this._editor.setEditValue(l),this._editor.selectAll(),n.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=(s=this._resetFocused,setTimeout(function(){!o._editor.editing&&!s&&r.showEditor(null,!1,o._editor.dropDownWhenClick),o.remainFocusing(!1),o._showEditorTimer=null},100)))):this._editor.setVisible(!1),t&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(l))}},i.prototype._hideEditor=function(e){if(e===void 0&&(e=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,e&&this.$_focusToEditor()}},i.prototype._initEditor=function(e,t,o){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var r=this._editor;r&&(r.endEdit(),this._resetBounds(),r.setVisible(!0,!0),r.beginEdit(e,t),e&&r.clear(),t&&r.selectAll(),o&&r.dropDownList(!1),this.$_focusToEditor(!0))},i.prototype.$_setEditorAttrs=function(e){var t=this._editor;if(t)for(var o in e)o!="callback"&&(e[o]===void 0?t._editor.removeAttribute(o):t._editor.setAttribute(o,e[o]))},i.prototype._editorActivated=function(e){this._grid.editorActivated(e)},i.prototype._activateEditor=function(e,t,o){o===void 0&&(o=!1);var r=this._grid,n=this._editor,s=this._editIndex,l={},u={};if(this._editable&&n&&!n.editing&&r.$_canShowEditor(s,l,u)){l.type&&(n=this._editor=r.delegate.getCellEditor(wt.getEditorType(l.type))||n),v.isEmpty(l)||(n.applyOptions(l),n.setEditIndex(s));var h=n._editor;return n.textReadOnly?n.textReadOnly&&h&&(h.readOnly=n.textReadOnly):n.setReadOnly(this._readOnly),this.$_setEditorAttrs(u),this._initEditor(e,t,o),xe(h).activeElement!==h&&(!v.isMobile()||!n.hasList)&&h.focus(),this._modified=!1,this._editorActivated(this._editor),u&&typeof u.callback=="function"&&u.callback(),!0}return!1},i.prototype._resetBounds=function(){if(this._editor){var e=this._grid.getEditCellBounds(this._editor,this._editIndex),t=this._grid.getEditBounds(this._editor,this._editIndex).width;v.isMobile()&&v.isiOS&&(t-=3),e.x--,e.y--,e.width++,e.height++,v.isMobile()&&(e.y-=1,e.height+=2),this._editor.setBounds(e.x,e.y,e.width,e.height,t),e=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(e.x,e.y,e.width,e.height)}},i.prototype.$_focusToEditor=function(e,t){var o=this._grid;if(e||o.$_editFocused){var r=this._editor||this._defaultEditor;o.$_showFocusCell=o.$_showFocusCell||t&&r&&t!==r._editor,o.container._setFocusAndScroll(r),this.editing||this._editor&&this._editor.selectAll()}},i.prototype._getData=function(e){var t=e.dataColumn,o=e.item;if(t&&o&&o.isDataRow){var r=t.dataIndex;if(r>=0)return o.getData(r)}},i.prototype._setData=function(e,t){var o=e.item;if(o){var r=e.dataColumn.dataIndex;r>=0&&(this._grid.undoable?this._grid.execute(new Bc(e.item,r,t,e.column)):o.setData(r,t))}},i.prototype._isEditKey=function(e){return e==8||e>=46&&e<=90||e>=96&&e<=111||e>=186&&e<=222||e==13&&this._grid.editOptions.enterToEdit},i}(me),js=function(a){function i(e,t,o){var r=a.call(this,e,t,o)||this;return r._col=-1,r._colChanged=!1,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.getCellIndex=function(e){return e.parentElement[be]},i.prototype.refresh=function(e,t){for(var o=0;o<t;o++){var r=this._getTableCell(o);r[mt]=e.isFocusedRow(r.parentElement[be]),v.setClassName(r,this.$_getCellSelector(r))}},i.prototype._createDom=function(){return null},i.prototype._prepareContent=function(e,t){var o=xe(e).createElement("div");return this._prepareCellContent(o,e),o},i.prototype._clearCellContent=function(e){var t=e.firstElementChild;t&&v.detach(t)},i.prototype._prepareCellContent=function(e,t){},i.prototype._updateCellContent=function(e,t,o,r){o[this._textProp]=t.text},i.prototype._doRender=function(e){},i.prototype.$_setCol=function(e){(this._colChanged=e!=this._col)&&(this._col=e)},i.prototype._layoutCell=function(e,t,o){if(this._colChanged){o.removeAttribute("rowspan"),o.style.removeProperty("display");var r=o.firstElementChild;this._clearCellContent(r),this._prepareCellContent(r,o)}},i.prototype._getTableCell=function(e){return this.parent._tbody.children[e].children[this._col]},i.prototype.$_getCellSelector=function(e){var t=this.model.cellStyleCallback,o=this.grid,r=e.parentElement[be],n=o.getItem(r),s=o.getCellType(e);if(t){var l=t(this.grid.handler,s,n==null?void 0:n.index);return l?" "+l:""}return""},i}(Ps),Ll=function(a){function i(e,t){return a.call(this,e,t,"rowIndicatorView")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowindicator"},i.prototype.measureWidth=function(e){var t=this.model,o=t.width;if(o==0&&e.dataSource){var r=e.dataSource.rowCount+"";o=e.container.measureText("rg-rowindicator-cell",r)+1}return o=Math.max(t.minWidth>0?t.minWidth:o,Math.min(t.maxWidth>0?t.maxWidth:o)),t._displayWidth=o,o},i.prototype._layoutCell=function(e,t,o){if(a.prototype._layoutCell.call(this,e,t,o),t){var r=this.model.getCell(t);v.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(e,r,o.firstElementChild,o)}},i.prototype.$_getCellSelector=function(e){var t=this.grid,o=e.parentElement[be],r=e[mt],n=this.model,s="rg-rowindicator-cell";if(o===-99)return To.ROW_BAR_CELL_STYLE;if(r){s+=n.showFocus?" rg-rowindicator-focus":"";var l=t.getItem(o);v.isDebugging();var u=l&&l.itemState;Ei(u)?s+=" rg-rowindicator-inserting":u==c.ItemState.UPDATING&&(s+=" rg-rowindicator-editing")}else t.isSelectedItem(o)&&n.showSelection&&(s+=" rg-rowindicator-select");return s+=a.prototype.$_getCellSelector.call(this,e)},i}(js),Vc=function(a){function i(e,t){var o=a.call(this,e,t,"stateBarView")||this;return o._textMark=!1,o}return w(i,a),i.prototype.rowOf=function(e){return e.parentElement[be]},i.prototype._getCssSelector=function(){return"rg-statebar"},i.prototype.measureWidth=function(e){return e.stateBar.width},i.prototype._layoutCell=function(e,t,o){if(a.prototype._layoutCell.call(this,e,t,o),t){var r=this.model,n=r.mark;this._textMark=n==c.StateMark.TEXT;var s=r.getCell(t);v.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(e,s,o.firstElementChild,o)}},i.prototype._updateCellContent=function(e,t,o,r){o[v.TextProp]=this._textMark&&t.text||""},i.prototype.$_getCellSelector=function(e){var t=this.grid,o=t.getItem(e.parentElement[be]),r=o?o.dataRow:-1,n=e[mt],s=this.model,l=s.mark==c.StateMark.IMAGE,u="rg-statebar-cell ";if(n?s.showFocus&&(u+=" rg-statebar-focus"):r>=0&&s.showSelection&&this.grid.isSelectedItem(r)&&(u+=" rg-statebar-select"),t.isItemEditing(o)&&this._error&&this.model.errorVisible)switch(this._error.level){case c.ValidationLevel.INFO:u+=" rg-statebar-info";break;case c.ValidationLevel.WARNING:u+=" rg-statebar-warning";break;case c.ValidationLevel.ERROR:u+=" rg-statebar-error"}else if(r>=0&&l)switch(o.rowState){case c.RowState.UPDATED:u+=" rg-statebar-updated";break;case c.RowState.CREATED:u+=" rg-statebar-created";break;case c.RowState.DELETED:u+=" rg-statebar-deleted";break;case c.RowState.CREATE_AND_DELETED:u+=" rg-statebar-create-and-deleted"}return u+=a.prototype.$_getCellSelector.call(this,e)},i}(js),jc=function(a){function i(e,t){var o=a.call(this,e,t,"checkBarView")||this;return o._fixedCount=0,o._prevChecked=-1,o._exclusive=!1,o._typeChanged=!1,o._useImage=!1,o._imageChanged=!1,o}return w(i,a),i.prototype.rowOf=function(e){return e.parentElement[be]},i.prototype._getCssSelector=function(){return"rg-checkbar"},i.prototype._doPrepareContent=function(e){var t=e.grid.checkBar;(this._typeChanged=t.exclusive!==this._exclusive)&&(this._exclusive=t.exclusive),(this._imageChanged=t.useImages!==this._useImage)&&(this._useImage=t.useImages)},i.prototype._clearCellContent=function(e){e[this._textProp]="",a.prototype._clearCellContent.call(this,e)},i.prototype._prepareCellContent=function(e,t){var o=xe(e),r=i.FOR_ID+this.rowOf(t)+"-"+this.model.$_hash,n=o.createElement("input"),s=n.style;n.type=this._exclusive?"radio":"checkbox",n.id=r,n.tabIndex=-1,n.className=this._exclusive?"rg-radio":"rg-checkbox",s.display=this._useImage?"none":"inline-block",e.appendChild(n);var l=o.createElement("span");(s=l.style).display=this._useImage?"inline-block":"none",e.appendChild(l);var u=o.createElement("label");u.setAttribute("for",r),(s=u.style).display="none",e.appendChild(u)},i.prototype.measureWidth=function(e){return this.model.width},i.prototype._layoutCell=function(e,t,o){a.prototype._layoutCell.call(this,e,t,o);var r=t&&this.model.getCell(t);v.setClassName(o,this.$_getCellSelector(o)),o.style.display="",o.removeAttribute("rowspan");var n=e.fixedOptions.rowCount,s=e.checkBar;if(s._merged&&t){var l=s._merges,u=t.itemIndex;if(u=u<n?u:u-e.layoutManager.topIndex,l.isMerged(u,n))if(l.isHidden(u,n))o.style.display="none",o.removeAttribute("rowspan");else{var h=l.getMerged(u,n);o.rowSpan=h}else o.removeAttribute("rowspan")}r&&this._updateCellContent(e,r,o.firstElementChild.firstElementChild,o)},i.prototype._updateCellContent=function(e,t,o,r){var n=t.item,s=o,l=e.checkBar,u=i.FOR_ID+this.rowOf(r)+"-"+this.model.$_hash;s.checked=n&&n.checked,s.disabled=n&&!n.checkable,s.id=u,r.firstElementChild.style.display=n instanceof Tt||n instanceof ht||l.showGroup&&l.fieldIndex<0&&!l.merged?"":"none";var h=this._useImage;this._typeChanged&&(s.setAttribute("type",this._exclusive?"radio":"checkbox"),s.className=this._exclusive?"rg-radio":"rg-checkbox");var d=s.nextElementSibling;if(this._imageChanged&&d&&(s.style.display=h?"none":"inline-block",d.style.display=h?"inline-block":"none"),h&&d){var p=s.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";p+=s.disabled?" disabled":"",d.className=p}var f=d.nextElementSibling;f.removeAttribute("for"),f.setAttribute("for",u),f[v.TextProp]=this.rowOf(r)+1+" row "+(n&&n.checkable?n.checked?"checked":"unchecked":"check disable")},i.prototype.getCheckBox=function(e){return e.firstElementChild.firstElementChild},i.prototype.$_getCellSelector=function(e){var t=i.CELL_CSS,o=e[mt],r=this.model,n=e.parentElement[be],s=this.grid.getItem(n);return t+=s&&s.checkable?"":" rg-checkbar-disabled",o?r.showFocus&&(t+=" rg-checkbar-focus"):r.showSelection&&this.grid.isSelectedItem(n)&&(t+=" rg-checkbar-select"),t+=a.prototype.$_getCellSelector.call(this,e)},i.prototype.$_setPrevChecked=function(e){this._prevChecked=e},i.FOR_ID="$$-check-bar-cell",i.CELL_CSS="rg-checkbar-cell",i}(js),tn=function(a){function i(e){var t=a.call(this,e.doc,null,"rowBarContainer")||this;t._count=0;var o=e.doc;return t._bars=[e.rowIndicator,e.stateBar,e.checkBar],t.addChild(t._indicatorView=new Ll(o,e.rowIndicator)),t.addChild(t._stateView=new Vc(o,e.stateBar)),t.addChild(t._checkView=new jc(o,e.checkBar)),t._views=[t._indicatorView,t._stateView,t._checkView],t}return w(i,a),i.prototype._doDispose=function(){this._bars=this._views=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowIndicator",{get:function(){return this._indicatorView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateBar",{get:function(){return this._stateView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkBar",{get:function(){return this._checkView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateError",{get:function(){return this._stateView._error},set:function(e){this._stateView._error=e},enumerable:!1,configurable:!0}),i.prototype.isVisible=function(){return this._indicatorView.visible||this._stateView.visible||this._checkView.visible},i.prototype.getCellIndex=function(e){return e.parentElement[be]},i.prototype.refresh=function(e){var t=this;this._views&&this._views.forEach(function(o){o.visible&&o.refresh(e,t._count)})},i.prototype.rowOf=function(e){return e.parentElement[be]},i.prototype.getCheckBox=function(e){return this._checkView.getCheckBox(e)},i.prototype.getCellType=function(e){var t=this._views[e.cellIndex];return t instanceof Ll?c.GridCellType.INDICATOR:t instanceof Vc?c.GridCellType.STATE:t instanceof jc?c.GridCellType.CHECK:void 0},i.prototype.isRowIndicator=function(e){return this._views[e.cellIndex]instanceof Ll},i.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},i.prototype._isFixedHeight=function(){return!0},i.prototype._doPrepareContent=function(e){if(this._views.length){this._dirty&&this._dom.appendChild(this._table);for(var t=0,o=this._views;t<o.length;t++){var r=o[t];(r._dirty||r.model.dirty)&&r._doPrepareContent(e)}}else v.detach(this._table);a.prototype._doPrepareContent.call(this,e)},i.prototype._prepareCellContent=function(e,t){return this._views[t]._prepareContent(e,t)},i.prototype._getTableRowHeight=function(e,t){var o=e.fixedItemCount;return o>0&&t>o?e.getTableItemHeight(t-1):e.getTableItemHeight(t)},i.prototype._doMeasure=function(e,t,o){this.$_prepareBars(e);for(var r=0,n=0,s=this._views;n<s.length;n++){var l=s[n];r+=l.width=l.measureWidth(e)}return new vo(r,o)},i.prototype._doLayoutContent=function(e){for(var t=e.grid,o=e.topIndex,r=e.itemCount,n=e.fixedItemCount,s=this._count=n+r,l=this._bars.length,u=t.focusedRow,h=this._views,d=this._thead,p=d&&d.children[0],f=t.displayOptions.useAlternateRowStyle,g=0;g<s;g++){var m=g<n?g:g+o,b=le.temp(t,m),C=this._getTableRow(e,g);v.setClassName(C,this.getStyleName(b.item,b.itemIndex%2&&f)),C[be]=m;for(var x=0;x<l;x++){var E=C.cells[x];if(E[mt]=m==u,h[x]._layoutCell(t,b,E),g===0&&p){var S=p.cells[x];S&&(S[v.TextProp]=this.getCellType(E)+" column")}}}n>0&&this._layoutFixedBar(t.fixedOptions,n)},i.prototype._doUpdateCellContent=function(e,t,o){o[this._textProp]=t.text},i.prototype._doRender=function(e){},i.prototype._doDraw=function(e){this._views.forEach(function(t){t.validate()})},i.prototype._getCellCount=function(e){return this._bars.length},i.prototype._getCellWidth=function(e,t){return this._views[t].width},i.prototype.$_prepareBars=function(e){var t=this._bars=[],o=this._views=[];e.rowIndicator.visible&&t.push(e.rowIndicator),e.stateBar.visible&&t.push(e.stateBar),e.checkBar.visible&&t.push(e.checkBar),t.length>1&&t.sort(function(u,h){var d=u.displayOrder,p=h.displayOrder;return d==p?u.staticOrder-h.staticOrder:d-p});for(var r=0,n=t.length;r<n;r++){var s=t[r],l=void 0;(l=s instanceof qr?this._indicatorView:s instanceof Kr?this._stateView:this._checkView).$_setCol(r),l._colChanged=l._colChanged||s.visChanged,o.push(l),s.visChanged=!1}this._indicatorView.visible=o.indexOf(this._indicatorView)>=0,this._stateView.visible=o.indexOf(this._stateView)>=0,this._checkView.visible=o.indexOf(this._checkView)>=0},i.prototype._layoutFixedBar=function(e,t){var o=this._tbody.children[t];o[nt]=t,o[be]=-99,v.setClassName(o,To.ROW_BAR_STYLE);for(var r=0;r<o.childElementCount;r++){var n=o.children[r];n[mt]=!1;var s=this._views[r];s._colChanged&&s._layoutCell(this.grid,null,n),v.setClassName(n,To.ROW_BAR_CELL_STYLE)}},i.prototype.getStyleName=function(e,t){var o=i.ROW_STYLE;return o+=Os.STATE_ROW_STYLES[e.rowState]||"",(o+=t?i.ALTERNATE_ROW_STYLE:"").trim()},i.ROW_STYLE="rg-row-bar",i.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar",i}(Cl),Hc=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"targetElement",{get:function(){return this._targetElement},set:function(e){this._targetElement=e},enumerable:!1,configurable:!0}),i}(nr),Fl=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i}(Hc),Gc=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"handle",{get:function(){return this._handle},set:function(e){this._handle=e},enumerable:!1,configurable:!0}),i}(Hc),Nl=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),Object.defineProperty(i.prototype,"request",{get:function(){return this._request},set:function(e){this._request=e},enumerable:!1,configurable:!0}),i.prototype.stop=function(){},i.prototype.end=function(e){this._doEnd(e)},i.prototype._doEnd=function(e){},i.prototype.getRequest=function(){return this._request},i}(Mo),Al=function(a){function i(e){var t=a.call(this,e,"mobileBodyScrollTracker")||this;return t._tapX=NaN,t._tapY=NaN,t._vertical=!0,t}return w(i,a),i.prototype._doDispose=function(){this._grid=null,a.prototype._doDispose.call(this)},i.prototype._doStart=function(e,t,o,r){var n=this._grid;if(n.isEditing())switch(n.mobileOptions.scrollOnEditing){case c.ScrollOnEditing.CANCEL:n.cancelEditor(!0);break;case c.ScrollOnEditing.COMMIT:n.commitEditor(!0);case c.ScrollOnEditing.DEFAULT:}return this._scrolling=void 0,this._dragTableItemPoints=n.layoutManager._tableItemPoints,this._dragTopIndex=n.topIndex,this._dragLeftPos=n.leftPos,this._doDrag(e,t,o,r),!0},i.prototype._doDrag=function(e,t,o,r){var n=this._grid,s=n.activeTool,l=t-this._tapX,u=o-this._tapY,h=s.findElementAt(r.mouseX,r.mouseY,!1);if(this._vertical=!(h instanceof Vn)&&Math.abs(2*u)>=Math.abs(l),this._vertical){if(Math.abs(u)>5){var d=n.topIndex,p=n.layoutManager.fullItemCount,f=n.itemCount;if(p===f)return this._scrolling=!1,!1;if(this._scrolling===void 0){if(d+p>=f&&u<0||d==0&&u>0)return this._scrolling=!1,!1;this._scrolling=!0}else if(this._scrolling){for(var g=0,m=this._dragTableItemPoints;++g<m.length&&!(m[g]>=Math.abs(u)););n.topIndex=this._dragTopIndex+--g*(u>0?-1:1)}}}else Math.abs(l)>5&&(this._scrolling=!0,n.leftPos=this._dragLeftPos-l);return!0},i.prototype._doEnd=function(e){this._scrolling=void 0},i.prototype._doCanceled=function(e,t){this._scrolling=void 0},i.prototype._doInit=function(e,t,o){this._tapY=t,this._tapX=e},i}(Nl),lm=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype._doStart=function(e,t,o,r){return!0},i.prototype._doDrag=function(e,t,o,r){var n=this._grid.pointToIndex(null,t,o,!1);if(n&&n.itemIndex>=0){var s=this.request.handle,l=s.selectionMask.item;l&&l.inflate(s.dir,n)}return!0},i}(Nl),Hs=function(a){function i(e,t){var o=a.call(this,e.doc,"mobileSelectionHandle")||this;return o._dir=t,o._owner=e,o}return w(i,a),i.prototype._doDispose=function(){this._owner=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"selectionMask",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dir",{get:function(){return this._dir},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return i.STYLE_NAME+this._dir+"-handle"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e.style.background="red"},i.prototype._doDraw=function(){},i.STYLE_NAME="rg-selection-handle",i}(yo),Wc=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype._doDispose=function(){},i.prototype.getSelectHandle=function(e){for(var t in this._views){var o=this._views[t];if(o.leftHandle._dom===e)return o.leftHandle;if(o.topHandle._dom===e)return o.topHandle;if(o.bottomHandle._dom===e)return o.bottomHandle;if(o.rightHandle._dom===e)return o.rightHandle}},i.prototype.addView=function(e){var t=e.$_hash,o=this._views[t];return o||(o=this._pool.pop()||new um(this.doc),this._views[t]=o),o._item=e,this.addChild(o),this.addChild(o.leftHandle),this.addChild(o.topHandle),this.addChild(o.bottomHandle),this.addChild(o.rightHandle),o},i.prototype.clearViews=function(){for(var e in this._views){var t=this._views[e];this.removeChild(t.leftHandle),this.removeChild(t.topHandle),this.removeChild(t.bottomHandle),this.removeChild(t.rightHandle),this.removeChild(t),this._pool.push(t)}this._views={}},i.prototype.layout=function(){var e=this._grid.layoutManager;this._grid.selections;var t=new Z;for(var o in this._views){var r=this._views[o],n=r.item,s=!1,l=new Z;if(r.prepare(),n instanceof mo||n instanceof er||(s=this.$_getMobileSelectionRangeRect(e,n,r,l,t)),s){var u=e.footerBounds.y+e.contentBounds.y;l.bottom>u&&(r._bottomed=!0,l.bottom=u)}r.visible=s,r.visible&&(r.setRectI(l),r.updateElement(),this._layoutHandle(r,l,t),r.invalidate(!1,!0))}},i.prototype._layoutHandle=function(e,t,o){var r,n,s=13,l=13;e._lefted?e.leftHandle.visible=!1:(e.leftHandle.visible=!0,r=o.x-6.5,n=t.y+(t.height-s)/2,e.leftHandle.setBounds(r,n,l,s)),r=o.x+(o.width-l)/2,n=t.y-6.5,!e._toped&&r>=t.x?(e.topHandle.visible=!0,e.topHandle.setBounds(r,n,l,s)):e.topHandle.visible=!1,n=t.bottom-6.5,!e._bottomed&&r>=t.x?(e.bottomHandle.visible=!0,e.bottomHandle.setBounds(r,n,l,s)):e.bottomHandle.visible=!1,e._righted?e.rightHandle.visible=!1:(e.rightHandle.visible=!0,r=o.right-6.5,n=t.y+(t.height-s)/2,e.rightHandle.setBounds(r,n,l,s))},i.prototype.$_getMobileSelectionRowsRect=function(e,t,o,r){return a.prototype.$_getSelectionRowsRect.call(this,e,t,o,r)},i.prototype.$_getMobileSelectionColumnsRect=function(e,t,o,r){return a.prototype.$_getSelectionColumnsRect.call(this,e,t,o,r)},i.prototype.$_getMobileSelectionRangeRect=function(e,t,o,r,n){return a.prototype.$_getSelectionRangeRect.call(this,e,t,o,r,n)},i}(uc),um=function(a){function i(e){var t=a.call(this,e)||this;return t._leftHandle=new Hs(t,"left"),t._topHandle=new Hs(t,"top"),t._bottomHandle=new Hs(t,"bottom"),t._rightHandle=new Hs(t,"right"),t}return w(i,a),i.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"leftHandle",{get:function(){return this._leftHandle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topHandle",{get:function(){return this._topHandle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomHandle",{get:function(){return this._bottomHandle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightHandle",{get:function(){return this._rightHandle},enumerable:!1,configurable:!0}),i.prototype.prepare=function(){a.prototype.prepare.call(this)},i.prototype.updateElement=function(){a.prototype.updateElement.call(this)},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},i.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},i}(lc),Ae=function(){function a(){}return a.getData=function(i){var e=new a;return e.cellType=i,e},a.getSub=function(i,e){var t=new a;return t.cellType=i,t.subType=e,t},a.getField=function(i,e,t){var o=new a;return o.cellType=i,o.field=o.fieldIndex=e,o.fieldName=t,o},a.getItem=function(i,e,t){var o=new a;return o.cellType=i,o.itemIndex=e,t!=null&&(o.dataRow=t),o},a.getLayout=function(i,e){var t=new a;return t.cellType=i,e instanceof it?(t.subType=c.GridCellType.LAYOUT_HEADER,t.column=e.name):(t.column=e.firstColumn&&e.firstColumn.name,e.firstColumn instanceof Oe&&(t.field=t.fieldIndex=e.firstColumn.dataIndex,t.fieldName=e.firstColumn.fieldName)),t},a.getCell=function(i,e,t){var o=new a;i===c.GridCellType.DATA&&(o.editable=e.editable,o.readOnly=e.readonly);var r=e.layout;return o.cellType=i,o.itemIndex=t?t.itemIndex:e.item.index,o.dataRow=t?t.dataRow:e.item.dataRow,o.column=e.layout.firstColumn&&e.layout.firstColumn.name,r.firstColumn instanceof Oe&&(o.field=o.fieldIndex=r.firstColumn.dataIndex,o.fieldName=r.firstColumn.fieldName),o},a.getGroupFooter=function(i,e,t,o){var r=new a,n=t.firstColumn;return r.cellType=i,r.itemIndex=e,r.index=o,r.column=n&&n.name,n instanceof Oe&&(r.field=r.fieldIndex=n.dataIndex,r.fieldName=n.fieldName),r},a.getSummary=function(i,e,t){var o=new a;return o.cellType=i,o.index=e,o.column=t.firstColumn&&t.firstColumn.name,t.firstColumn instanceof Oe&&(o.field=o.fieldIndex=t.firstColumn.dataIndex,o.fieldName=t.firstColumn.fieldName),o},a.getGroupElt=function(i,e){var t=new a;return t.cellType=i,t.groupLevel=e,t},a}(),hm=function(a){function i(e,t){var o=a.call(this,e,"focusView")||this;return o._editing=!1,o._focusType=c.FocusType.LAYER,o._inner=t,o}return w(i,a),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(e){e!==this._focusType&&(this._focusType=e,this.$_typeChanged(e))},enumerable:!1,configurable:!0}),i.prototype.$_createLine=function(e){function t(r,n,s){var l=r.createElement("div");l.className=n?"rg-focus-inner-line":"rg-focus-line";var u=l.style;return u.display="none",u.position="absolute",u.boxSizing="border-box",u.left="0px",u.top="0px",s!==1&&(u.borderTop="none"),s!==2&&(u.borderBottom="none"),s!==3&&(u.borderLeft="none"),s!==4&&(u.borderRight="none"),l}var o=xe(e);e.appendChild(this._topLine=t(o,this._inner,1)),e.appendChild(this._bottomLine=t(o,this._inner,2)),e.appendChild(this._leftLine=t(o,this._inner,3)),e.appendChild(this._rightLine=t(o,this._inner,4))},i.prototype.$_typeChanged=function(e){var t=this._dom.style;this._topLine||this.$_createLine(this._dom),e===c.FocusType.LINE?(t.height="0px",t.width="0px",t.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(t.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},i.prototype.$_linePosition=function(e,t,o,r){var n=this._topLine.style,s=this._bottomLine.style,l=this._leftLine.style,u=this._rightLine.style,h=this.parent.width,d=this.parent.height;s.left=n.left=-e+"px",s.width=n.width=h+e+"px",s.top=r-2+"px",u.height=l.height=d+"px",u.left=o-2+"px",s.display=d<r?"none":"block",l.display=e<0?"none":"block",u.display=h<o?"none":"block"},i.prototype.setEditing=function(e,t,o){e!=this._editing&&(this._editing=e,this.resetStyleName())},i.prototype.setActivated=function(e){this._setClassName(null)},i.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},i.prototype.setBounds=function(e,t,o,r){if(this._focusType===c.FocusType.LINE){var n=this._dom.style;n.left=e+"px",n.top=t+"px",this.width=o,this.height=r,this.$_linePosition(e,t,o,r)}else this.x++,a.prototype.setBounds.call(this,e,t,o,r)},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i.prototype._beforeDraw=function(e){if(this._focusType===c.FocusType.LINE){this._setClassName(e);var t=e.style;t.left=this.x+"px",t.top=this.y+"px"}else a.prototype._beforeDraw.call(this,e)},i}(Ft),Uc=function(a){function i(e,t){t===void 0&&(t=!1);var o=a.call(this,e,"focusMask")||this;return o._focusType=c.FocusType.LAYER,o._focusView=new hm(e,t),o.addChild(o._focusView),o}return w(i,a),i.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(e){e!==this._focusType&&(this._focusType=e,this._focusView.focusType=e,this.$_typeChanged(e))},enumerable:!1,configurable:!0}),i.prototype.$_typeChanged=function(e){var t=this._dom.style;e===c.FocusType.LINE?(t.removeProperty("overflow"),t.width="0px",t.height="0px"):(t.overflow="hidden",t.width=this.width+"px",t.height=this.height+"px")},i.prototype.updateElement=function(e,t,o,r,n){this._focusView.setBounds(e,t,o,r),this._focusView.setEditing(n,0,!1)},i.prototype.setActivated=function(e){this._focusView.setActivated(e)},i.prototype._getCssSelector=function(){return"rg-focus-mask"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(e){if(this._focusType===c.FocusType.LINE){this._setClassName(e);var t=e.style;t.left=this.x+"px",t.top=this.y+"px"}else a.prototype._beforeDraw.call(this,e)},i.prototype.setRect=function(e){this._focusType===c.FocusType.LINE?e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height||(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):a.prototype.setRect.call(this,e)},i}(Ft),cm=function(a){function i(e){var t=a.call(this,e,"groupFocusView")||this;return t.visible=!0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-group-focus"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),dm=function(a){function i(e,t){var o=a.call(this,e,"focusMask")||this;return o._groupFocusView=new cm(e),o.addChild(o._groupFocusView),o}return w(i,a),i.prototype._doDispose=function(){this._groupFocusView=this._groupFocusView&&this._groupFocusView.dispose(),a.prototype._doDispose.call(this)},i.prototype.updateElement=function(e,t,o,r){this._groupFocusView.setBounds(e,t,o,r)},i.prototype._getCssSelector=function(){return"rg-group-focus-mask"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(e){a.prototype._beforeDraw.call(this,e)},i}(Ft),pm=function(a){function i(e){var t=a.call(this,e,"rowBlockView")||this;return t.visible=!1,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowblock"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),fm=function(a){function i(e){return a.call(this,e,"headerCellResizer")||this}return w(i,a),i.prototype._getCssSelector=function(){return"_rg-col-resizer_"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),zc=function(a){function i(e){var t=a.call(this,e,"headerCellFeedback")||this;return t._modelChanged=!1,t.dragging=!1,t}return w(i,a),i.prototype._doDispose=function(){this._model=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"model",{set:function(e){this._model=e,this._modelChanged=!0},enumerable:!1,configurable:!0}),i.prototype._createDom=function(e){var t=e.createElement("table");t.setAttribute("aria-hidden","true");var o=t.createCaption();o.textContent="grid table feedback",o.style.width=o.style.height="0px",o.style.padding="none",o.style.boxSizing="border-box",o.style.overflow="hidden",t.style.setProperty("table-layout","fixed","important");var r=e.createElement("tbody");t.appendChild(r);var n=e.createElement("tr");r.appendChild(n);var s=this._cell=e.createElement("td");return n.appendChild(s),s.className="rg-header rg-header-cell _rg-header-cell-feedback_",t},i.prototype._getCssSelector=function(){return"rg-table"},i.prototype._doDraw=function(e){this.dragging&&!this._modelChanged||(rr.renderCell(this._model,this._cell),this._modelChanged=!1)},i}(Ft),_m=function(a){function i(e){return a.call(this,e,"headerCellMover")||this}return w(i,a),i.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e)},i.prototype._doDraw=function(e){},i}(Ft),gm=function(a){function i(e){var t=a.call(this,e,"rowMoverLine")||this;return t._feedbackStyle=c.DragFeedbackStyle.LINE,t}return w(i,a),Object.defineProperty(i.prototype,"feedbackStyle",{set:function(e){this._feedbackStyle=e},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){switch(this._feedbackStyle){case c.DragFeedbackStyle.LINE:return"_rg-row-mover-line_";case c.DragFeedbackStyle.ROW:return"_rg-row-mover-block_";case c.DragFeedbackStyle.GROUP:case c.DragFeedbackStyle.CELL:return"_rg-row-mover-group_"}},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),ym=function(a){function i(e){var t=a.call(this,e,"rowMover")||this;return t._enabled=!0,t}return w(i,a),i.prototype.setEnabled=function(e){if(e!=this._enabled)return this._enabled=e,this.invalidate(),!0},i.prototype.setLabel=function(e){if(e!=this._label)return this._label=e,this.invalidate(),!0},i.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e)},i.prototype._getCssSelector=function(){var e="_rg-row-mover-proxy_";return this._enabled||(e+=" _rg-row-mover-proxy-disabled_"),e},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},i.prototype._setSizeStyle=function(e){},i.prototype._doDraw=function(e){e[v.TextProp]=this._label},i}(Ft),mm=function(a){function i(e,t){var o=a.call(this,e,t)||this;o._rowBlockStart=-1,o._rowBlockEnd=-1;var r=e.doc,n=o._grid=e.gridView;return o._skipIndex=n.getIndex(),o._tempIndex=n.getIndex(),o._tempInnerIndex=n.getIndex(),n.addFeedbackElement(o._rowBlockMask=new pm(r)),n.addFeedbackElement(o._rowFocusView=new vm(r)),n.addFeedbackElement(o._focusMask=new Uc(r)),n.addFeedbackElement(o._innerFocusMask=new Uc(r,!0)),n.addFeedbackElement(o._groupFocusMask=new dm(r)),o}return w(i,a),i.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._groupFocusMask=this._groupFocusMask&&this._groupFocusMask.dispose(),this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!1,configurable:!0}),i.prototype.setFocused=function(e,t,o){var r=this._grid;if(r.isValid(e)){var n=r.getItem(e.itemIndex);return!r.isEditing()&&n instanceof jr&&r.append(),this._grid.setFocusedIndex(e,t,!0,o)}return!1},i.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype.focusedIndexChanging=function(e){},i.prototype.focusedIndexChanged=function(e,t){var o=this.grid,r=o.layoutManager,n=r.fixedItemCount,s=t.itemIndex;this.grid.setFocusedClass(e,!1),e.itemIndex!==t.itemIndex&&this.grid.setFocusedRowClass(e,!1),(!this.grid.isValid(t)||n>0&&s<n||s>=r.topIndex+n&&s<=n+r.topIndex+r.fullItemCount)&&this.$_resetFocusView(),!o.isEditing()&&t.item instanceof jr&&o.append()},i.prototype.currentRowChanged=function(e,t){var o=this.grid,r=o.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,r.rowBlockType!=c.RowMaskType.NONE){var n=r.rowBlockCallback;if(n){var s;(s=n(o.handler,o.getItemIndexOfRow(t)))?(this._rowBlockStart=s.start,this._rowBlockEnd=s.end):this._rowBlockStart=this._rowBlockEnd=-1}}this.$_resetRowBlockMask()},i.prototype.getNextRequest=function(e,t,o,r){return null},i.prototype.isMouseEventTarget=function(e){if(e instanceof Do){var t=e.getAncestor(wl);if(t)return t.getContentAt(e.index)==this.mouseEventTarget}return a.prototype.isMouseEventTarget.call(this,e)},i.prototype._doSetFocus=function(e){!v.isMobile()&&this.grid.setFocus(e),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doFocusLeave=function(e){var t=this.grid;t._resetTdFocus=void 0,t.editOptions.commitWhenLeave&&(t.isEditing()||t.isItemEdited())&&t.commit(!1,void 0,!1),v.isSlotMode()&&t.closePopups(),this._focusMask.setActivated(t.container._focused)},i.prototype._doGlobalKeyup=function(e){var t=this.grid;e.code==="Tab"?t.setEventFrom("keyup_tab"):t.setEventFrom("keyup")},i.prototype._doLayoutChanged=function(){},i.prototype.$_resetFocusView=function(){var e=this._grid,t=e.layoutManager,o=e.displayOptions,r=e.focusedIndex,n=e.fixedOptions,s=this._tempInnerIndex.assign(r),l=!1,u=!1,h=!1;if(o.focusVisible&&e.isValid(s)&&!e.isEditing()){var d=s.item,p=e.getBodyViewAt(s),f=p.getCellAt(t,s),g=f;if(!f&&s.layout.merged){var m=t.getMergeRoom(s);m&&(s.itemIndex=t.fixedItemCount+t.topIndex,m.contains(s)&&(f=p.getCellAt(t,s)),f||(s.itemIndex=t.fixedItemCount+t.topIndex+t.itemCount-1,m.contains(s)&&(f=p.getCellAt(t,s))))}if(f&&!f.grouped){var b=e.isEditing(),C=p.getCellRectAt(t,s,!0);if((C=p.boundsByContainer(C)).width>0&&C.height>0){var x=0,E=C.width;if(!s.colFixed&&!s.rightFixed){var S=t.fixedContentBounds;x=Math.max(0,S.right-C.x),E=Math.max(0,C.width-x),S=t.rightContentBounds,E-=C.right-S.x}if(E>0){b&&(C.y--,C.height+=1);var P=C.clone();if((S=t.footerBounds.clone()).y+=t.contentBounds.y,Math.max(0,C.bottom-S.y),C.width=Math.min(C.width,E),C.x+=x,C.bottom=Math.min(C.bottom,S.y),this._focusMask.setRect(C),this._focusMask.focusType=o.focusType,this._focusMask.updateElement(-x,0,P.width,P.height,b),l=!0,e.canMergeEditing(g),g&&g.merged){if(o.showInnerFocus&&(F=p.getCellRectAt(t,s,!1)).height<C.height){this._innerFocusMask.focusType=o.focusType,F.height=Math.min(F.height,C.height);var R=(F=p.boundsByContainer(F)).width-8,k=F.height-8;F.bottom=Math.min(C.bottom+4,F.bottom),this._innerFocusMask.setRect(F.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,R,k,b),h=!0}}else{var D=p.getCellAt(t,s);if(D&&D.renderer2&&D.editable&&D.renderer2.canShowInnerFocus()){var F=p.getCellRectAt(t,s,!1);R=(F=p.boundsByContainer(F)).width-8,k=F.height-8,F.bottom=Math.min(C.bottom+4,F.bottom),this._innerFocusMask.setRect(F.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,R,k,b),h=!0}}}}}else if(!d.isData){var H=e.getRowView(p,d);H&&(C=H.boundsByContainer(),this._focusMask.updateElement(0,0,C.width,C.height,!1),C.x<t.leftContentBounds.right&&(C.x=t.leftContentBounds.right,C.width-=t.leftContentBounds.right-C.x),this._focusMask.setRect(C),l=!0)}}var N=o.rowFocusType;if(N!=c.RowMaskType.NONE){var V=t.footerBounds.y+t.contentBounds.y,j=t.fixedItemCount;if((U=(U=s.itemIndex)>=j?U-t.topIndex:U)>=0&&U<=t.itemCount-1){switch((C=t.getTableItemBounds(U)).y+=t.contentBounds.y+t.bodyBounds.y,C.bottom>V&&(C.bottom=V),N){case c.RowMaskType.DATA:C.x=e.fixedContentPane.x,C.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case c.RowMaskType.FILL:C.x=0,C.width=e.width;break;case c.RowMaskType.ROW:C.x=0,C.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}this._rowFocusView.setRect(C),u=!0}else u=!1}if(this._groupFocusMask.visible=o.groupFocusVisible&&e.isValid(r)){var K=r.layout.root;if(K){var U;if(V=t.footerBounds.y+t.contentBounds.y,j=t.fixedItemCount,(U=(U=r.itemIndex)>=j?U-t.topIndex:U)>=0&&U<=t.itemCount+j-1){if(C=t.getTableItemBounds(U),x=0,(F=t.getDataRect(K)).height=C.height,C.x=F.x,E=F.width,C.y+=t.contentBounds.y+t.bodyBounds.y,C.bottom>V&&(C.bottom=V),S=void 0,S=!r.colFixed&&n.colCount>0?t.fixedContentBounds:t.rowBarBounds,C.x=Math.max(S.right,F.x),x=Math.min(0,F.x-S.right),!r.rightFixed&&n.rightCount>0){var Y=t.rightContentBounds;E-=Math.max(0,F.right-Y.x)}E<=0&&(this._groupFocusMask.visible=!1),C.width=E,C.x-=1,C.y-=1,C.width++,C.height++,this._groupFocusMask.setRect(C),this._groupFocusMask.updateElement(x,0,F.width+1,F.height+1)}else this._groupFocusMask.visible=!1}}this._rowFocusView.visible=u,this._focusMask.visible=l,this._innerFocusMask.visible=h,this._focusMask.visible,e.setFocusedClass(r,!0),e.setFocusedRowClass(r,!0)},i.prototype.$_resetRowBlockMask=function(){var e=this.grid,t=e.layoutManager,o=t.fixedItemCount,r=e.topItem,n=this._rowBlockMask,s=e.displayOptions.rowBlockType,l=this._rowBlockStart,u=this._rowBlockEnd,h=Math.max(l-r+o,o),d=Math.min(Math.max(u-r+o),t.itemCount+o-1);if(n.visible=s&&s!=c.RowMaskType.NONE&&h>=0&&d>=0&&h<t.itemCount&&h<=d&&l!==u,n.visible){var p=t.footerBounds.y+t.contentBounds.y,f=t.getTableItemBounds(h),g=t.getTableItemBounds(d);switch((f=f.union(g)).y+=t.contentBounds.y+t.bodyBounds.y,f.bottom>p&&(f.bottom=p),s){case c.RowMaskType.DATA:f.x=e.fixedContentPane.x,f.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case c.RowMaskType.FILL:f.x=0,f.width=e.width;break;case c.RowMaskType.ROW:f.x=0,f.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}n.setRect(f)}},i.prototype.$_resetFocusButton=function(e){var t,o=this.grid;if(o.isValid(e)){var r=o.getBodyViewAt(e),n=o.getBodyCellAt(e),s=this._tempIndex.assign(e);if(!n&&s.layout.merged){var l=o.layoutManager;(t=l.getMergeRoom(s))&&(s.itemIndex=l.fixedItemCount+l.topIndex,t.contains(s)&&(n=o.getBodyCellAt(s)),n||(s.itemIndex=l.fixedItemCount+l.topIndex+l.itemCount-1,t.contains(s)&&(n=o.getBodyCellAt(s))))}var u=r&&n&&r.getRowView(n.item);u&&u.$_setButtons(o,n,n.cell.firstElementChild,t)}},i.prototype._doCancel=function(e){if(e.closeFilterSelector(),e.isEditing())e.cancelEditor(!0);else if(e.isItemEditing())e.itemEditCancel()&&e.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0,null),this.dragTracker.cancel(),this.dragTracker.linkable&&e.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},i.prototype._doEnter=function(e,t,o,r){var n=e.isEditing(),s=r.shiftKey;if(n&&!t.enterToTab)e.commitEditor(!0);else{var l=o.clone(),u=t.skipReadOnly,h=t.skipReadOnlyCell;if(e.isValid(l))if(t.enterToNextRow&&(!s&&l.itemIndex<e.itemCount-1||s&&l.itemIndex>0))s?l.up():l.down(),h&&this._checkReadOnly(l)&&(this._skipReadOnlyCell(l,s?-1:1)||l.assign(o));else if(!s&&(!t.enterToEdit||n)&&t.enterToTab&&t.crossWhenExitLast&&(l.isLast||t.skipReadOnly&&l.isEditableLast)&&l.itemIndex<e.itemCount-1)l.down(),l.firstCell(),u&&this._skipReadOnly(l,1);else if(s&&(!t.enterToEdit||n)&&t.enterToTab&&t.crossWhenExitLast&&(l.isFirst||t.skipReadOnly&&l.isEditableFirst)&&l.itemIndex>0)l.up(),l.lastCell(),u&&this._skipReadOnly(l,-1);else if((!n||t.enterToTab)&&t.commitWhenExitLast&&l.isLast){try{e.commit(t.commitWhenNoEdit)}catch(d){throw d instanceof Rt&&(d=e._fireValidationFail(l.item.index,d.column,d))&&alert(t.showOnlyValidationMessage&&d.userMessage?d.userMessage:d.toString()),d}t.appendWhenExitLast&&l.itemIndex===e.itemCount-1&&(e.append(),e.isItemEditing()&&(l.down(),l.firstCell()))}else(t.enterToTab&&(e.isEditing()||this._checkReadOnly(l))||!t.enterToEdit)&&(e.isEditing()&&e.commitEditor(!0),s?(l.prev(),this._getPrevVisible(e,l)):(l.next(),this._getNextVisible(e,l)),u&&!this._skipReadOnly(l,s?-1:1)&&l.assign(o));else l.normalize(e);le.areEquals(l,o)?e.isValid(l)&&t.enterToEdit&&!n&&!e.isEditing()&&o&&o.dataColumn&&!this._checkReadOnly(o)&&e.showEditor(o):this.setFocused(l,!0,!0)}return!0},i.prototype._doTab=function(e,t,o,r,n,s){var l=o.clone(),u=!1;if(e.isValid(l)){if(t.useTabKey){var h=t.exitGridWhenTab;if(n){if(t.crossWhenExitLast&&(l.isFirst||t.skipReadOnly&&l.isEditableFirst)&&l.itemIndex>0?(l.up(),l.lastCell()):(l.prev(),this._getPrevVisible(e,l)),t.skipReadOnly&&!this._skipReadOnly(l,-1)&&l.assign(o),le.areEquals(l,o)&&h){switch(h){case"row":u=!0;break;case"grid":u=l.itemIndex<=0}if(u)return!v.isMobile()&&e.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(t.crossWhenExitLast&&(l.isLast||t.skipReadOnly&&l.isEditableLast)&&l.itemIndex<e.itemCount-1)l.down(null,t.skipReadOnly&&l.isEditableLast&&t.crossWhenExitLast),l.firstCell();else if(t.commitWhenExitLast&&l.isLast){try{e.commit(t.commitWhenNoEdit)}catch(d){throw d instanceof Rt&&(d=e._fireValidationFail(l.itemIndex,d.column,d))&&alert(t.showOnlyValidationMessage&&d.userMessage?d.userMessage:d.toString()),d}t.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(l.down(),l.firstCell()))}else l.next(),this._getNextVisible(e,l);if(t.skipReadOnly&&!this._skipReadOnly(l,1)&&l.assign(o),le.areEquals(l,o)&&h){switch(h){case"row":u=!0;break;case"grid":u=l.itemIndex>=e.itemCount-1}if(u)return!1}}return le.areEquals(l,o)||this.setFocused(l,!0,!0),s&&(s.preventDefault&&s.preventDefault(),s.stopImmediatePropagation()),!0}}else l.normalize(e),this._skipReadOnly(l,1);return n&&!v.isMobile()&&e.container._containerDom.setAttribute("tabindex","-1"),!1},i.prototype._getNextVisible=function(e,t){e.getBodyViewAt(t).getNextVisibleCell(t)},i.prototype._getPrevVisible=function(e,t){e.getBodyViewAt(t).getPrevVisibleCell(t)},i.prototype._checkReadOnly=function(e){var t=this.grid;if(!t.isValid(e))return!0;var o=t.getWritableAt(e);return o!=null?!o:!e.dataColumn.isWritable()},i.prototype._skipReadOnly=function(e,t){var o=!1;if(this.grid.editOptions.skipReadOnly){var r=this._skipIndex;if(r.assign(e),!(o=!this._checkReadOnly(r))){if(t>0){for(;r.next();)if(!this._checkReadOnly(r)){e.assign(r),o=!0;break}}else for(;r.prev();)if(!this._checkReadOnly(r)){e.assign(r),o=!0;break}}}return o},i.prototype._skipReadOnlyCell=function(e,t,o){var r=this.grid,n=!e.dataColumn.isWritable()&&!0;if(!n&&r.editOptions.skipReadOnlyCell){var s=this._skipIndex;s.assign(e),n=!this._checkReadOnly(s)}return n},i.prototype._commitCancel=function(e,t){var o=this.grid;try{switch(e.itemState){case c.ItemState.INSERTING:return o.commit(t.forceInsert)||o.cancel(!0),!0;case c.ItemState.APPENDING:return o.commit(t.forceAppend)||o.cancel(!0),!0;case c.ItemState.UPDATING:return o.commit(t.commitWhenNoEdit)||o.cancel(!0),!0}}catch(r){if(r instanceof Rt)return(r=o._fireValidationFail(e.index,r.column,r))&&alert(t.showOnlyValidationMessage&&r.userMessage?r.userMessage:r.toString()),!1;if(r instanceof Ko)return!1;throw r}return!1},i.prototype._editButtonClicked=function(e,t){},i}(xc),bm=function(a){function i(e){var t=a.call(this,e,"rowHoverView")||this;return t.visible=!1,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowhover"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),vm=function(a){function i(e){var t=a.call(this,e,"rowFocusView")||this;return t.visible=!1,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowfocus"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},i}(Ft),Bl=function(a){function i(e,t){var o=a.call(this,e,t)||this;o._tooltipOptions=new Dl,o._checkScroll=Date.now(),o._prevScroll=Date.now(),o._wheelDeltaY=0,o._tempRect=new Z,o._reqPoint=new Qo,o._swipeTimer=null,o._swipeDistance=0,o._swipeDuration=0,o._swipeStarted=null,o._swipeAmount=0;var r=e.doc,n=o.grid;return o._cellResizer=new fm(r),o._cellMover=new _m(r),o._cellFeedback=new zc(r),o._rowMoverLine=new gm(r),o._rowMoverProxy=new ym(r),o._colResizeReq=new Vs(n),o._colMoveReq=new Tl(n),o._rowResizeReq=new Lc(n),o._headerResizeReq=new Fc(n),o._rowMoveReq=new Nc(n),o._tooltipIndex=new le(n),v.isMobile()&&(o._touchScrollRequest=new Fl(n),o._touchScrollTracker=new Al(n),o._touchSelectRequest=new Gc(n),o._touchSelectTracker=new lm(n)),o}return w(i,a),i.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),clearTimeout(this._tooltipShowTimer),a.prototype._doDispose.call(this)},i.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},i.prototype._doDragTrackerFinished=function(e,t){e.clickable||(this._clickCell=this._clickElement=null)},i.prototype.$_getIndexAt=function(e,t,o,r,n){var s=e.getDataCellIndex(r,this._tempIndex),l=o.getCellAt(t,s);if(l&&l.merged){var u=t.getTableRowIndex(n);if(u<0)return s;var h=o.getRowIndex(u);s.itemIndex=Math.min(Math.max(l.item.index,h),l.item.index+l.rowSpan-1)}return s},i.prototype._doPointerDown=function(e){var t=e.mouseX,o=e.mouseY,r=e.ctrlKey||e.metaKey,n=e.shiftKey,s=e.altKey,l=e.button,u=this.grid,h=u.layoutManager,d=u.editOptions,p=u.focusedIndex.clone(),f=u.selections.exclusiveMode;this._longTimer=v.isMobile()&&setTimeout(this._longTimerHandler,u.mobileOptions.longTapDuration),this._hideTooltip(),u.closePopups(),u.setEventFrom("mousedown"),this._scrollY=window.scrollY,clearInterval(this._swipeTimer),this._touchMoving=!1;var g,m=this._clickCell=null,b=this._clickElement=null;if(l==0||u.displayOptions.rightClickable&&l==2){var C=this._tempIndex,x=this.mouseEventTarget,E=l==0&&(this._getEditRequest(x,p,t,o,r,n,s)||this._getSelectRequest(x,t,o,r,n,s)||v.isMobile()&&this._getTouchRequest(e));if(!(E instanceof nr)||E.canFocus())if(m=this._clickCell=this._findTableCell(),b=this._clickElement=this.findElementAt(t,o,!1),m){var S=u.getTableView(m),P=S instanceof rr,R=S instanceof Oi,k=S instanceof tn&&S.isRowIndicator(m);if(P||R||k){var D=u.selections.lastItem();if(R?(C=this.$_getIndexAt(u,h,S,m,o),u.editOptions.focusMoveStep===c.FocusMoveStep.GROUP&&(C.layout=C.layout.root.first)):P?(C.assign(u.focusedIndex),C.layout=S.layoutByCell(m)):(C.assign(u.focusedIndex),C.itemIndex=m.parentElement[be]),P){if(r&&n)D&&this.$_resizeSelection(D,C,c.SelectionStyle.COLUMNS);else if(n)return}else{if(n&&D){var F=P?c.SelectionStyle.COLUMNS:k?c.SelectionStyle.ROWS:null;return void this.$_resizeSelection(D,C,F)}if(R){if(this.$_checkAppending(u.focusedIndex,!0,C))return this._clickElement=null,void(this._clickCell=null);var H=S.getCellAt(h,C),N=S.bodyCellByCell(this._clickCell);if(N&&H&&l===0&&N.isEditButton(e.target))this.setFocused(C,!0,!0)&&H.editable&&!H.readonly&&u.editController.buttonDown(C,e);else if(v.isMobile()&&E instanceof Fl)this.grid.container.addMouseEvent(null);else if(le.areEquals(C,this.focused)&&d.editWhenClickFocused)u.showEditor();else{var V=!(r&&u.selections.containsCell(C));this.setFocused(C,f||!r,V)||E instanceof Ir&&(E=null)}}else if(k&&u.rowIndicator.selectable)if(C.column==null&&C.item.isDataRow&&(C.layout=u.getFirstLayout()),E instanceof Ir){if(this.setFocused(C,f||!r,!1)){var j=D&&Bn(D)?D.getItemIndices():[];(j.length!==1||j[0]!==C.itemIndex)&&u.selections.selectRow(C.itemIndex,!r)}}else V=void 0,V=u.displayOptions.selectionStyle===c.SelectionStyle.SINGLE_ROW?!(r&&u.selections.containsItem(C.itemIndex,null)):!(r&&u.selections.containsCell(C)),this.setFocused(C,f||!r,V)}}}else(g=b)&&"itemIndex"in g&&(C.assign(u.focusedIndex),C.itemIndex=b.itemIndex,C.column==null&&(C.layout=u.getFirstLayout()),this.setFocused(C,!0,!0));!E||u.isItemEditing()&&E.selectable||(this.dragTracker=this._getDragTracker(E,t,o))}u.$_resetHovering(t,o);var K=this.dragTracker;K&&K.startWhenCreated?this._startDragTracker(t,o,e):K&&K.init(t,o,e)},i.prototype._doPointerCancel=function(e){this.grid.container.removeMouseEvent()},i.prototype._doMouseDown=function(e){var t=this.grid,o=t.editOptions,r=e.ctrlKey||e.metaKey,n=t.selections.exclusiveMode,s=e.mouseX,l=e.mouseY,u=this._tempIndex;if(le.areEquals(u,this.focused)&&o.editWhenClickFocused)t.showEditor();else{var h=!(r&&t.selections.containsCell(u));this.setFocused(u,n||!r,h)}t.$_resetHovering(s,l)},i.prototype.$_checkOtherGridRowMoving=function(e,t){var o=this.grid,r=o.container,n=r.getMouseContainer(),s={index:-1,position:0,column:void 0};if(n&&n!==r){if(r.findContainer(e)!==r)o.removeFeedbackElement(this._rowMoverLine);else if(t instanceof Zr){var l=r.eventToContainer(e),u=r.findElementAt(l.x,l.y,!1);if(o.itemCount==0||u instanceof bi||u instanceof js||u instanceof tn){var h=Zr.updateLineFeedback(o,Number.MAX_VALUE,null,1,this._rowMoverLine,l.x,l.y,!0,e.target),d=o.canMoveRow(!0,!0)&&o.dataDropOptions.getEnabled(n.gridView,t.sourceItems,h),p=o.dataDropOptions.getLabel(n.gridView,t.sourceItems,h,null);return t.setEnabled(d),t.setLabel(p),o.addFeedbackElement(this._rowMoverLine),d?h:s}u?(t.setEnabled(!1),o.removeFeedbackElement(this._rowMoverLine)):o.removeFeedbackElement(this._rowMoverLine)}}return s},i.prototype.getNextRequest=function(e,t,o,r){if(e instanceof Ir){var n=this.grid.getSelection();return this._rowMoveReq.init(n,n.startItem)}return null},i.prototype.dragFrom=function(e,t){t instanceof Zr&&this.$_checkOtherGridRowMoving(e,t)},i.prototype.dropFrom=function(e,t){if(t instanceof Zr){var o=this.grid,r=this.$_checkOtherGridRowMoving(e,t);o.removeFeedbackElement(this._rowMoverLine),r.index>=0&&o.$_dropData(t.grid,t.sourceItems,r)}},i.prototype.cancelFrom=function(e){var t=this.grid;e instanceof Zr&&t.removeFeedbackElement(this._rowMoverLine)},i.prototype._doPointerMove=function(e){var t=e.mouseX,o=e.mouseY,r=e.ctrlKey||e.metaKey,n=e.shiftKey,s=e.altKey,l=this.grid,u=l.layoutManager;l.$_resetHovering(t,o)||this._hideTooltip();var h=this._getEditRequest(this.mouseEventTarget,l.focusedIndex,t,o,r,n,s);if(v.isMobile()&&!h&&(h=this._getTouchRequest(e)),h&&h.cursor?l.setCursor(this.mouseEventTarget,h.cursor):l.setCursor(this.mouseEventTarget,"default"),!h&&!this.dragging){var d=this._findTableCell(),p=d&&l.getTableView(d);if(p instanceof Oi){var f=p.bodyCellByCell(d);if(f&&f.merged){var g=f.head||f,m=this.$_getIndexAt(l,u,p,d,o);if(!g.contains(l.focusedIndex)){if(f.buttons){var b=p.getRowView(g.item);b instanceof bi&&b.moveCellButtons(u,g,m.itemIndex)}var C=l.canMergeEditing(g);if(g.renderer2&&g.renderer2.refreshFocusChanged){var x=p.getCellRectAt(u,m,!1),E=p.getCellRect(u,g,!0),S=g.renderer2,P=x.top-E.top+x.height/2-E.height/2;S.moveClickElement(P,C)}}}}}},i.prototype._doPointerUp=function(e){var t=this._findTableCell(),o=this.grid,r=o.focusedIndex,n=o.layoutManager;o.setEventFrom("mouseup");var s=o.getCellType(t);if(o.setCursor(this.mouseEventTarget,"default"),o.editController.buttonUp(null,e),s===c.GridCellType.DATA&&(!this.dragTracker||this.dragTracker.scrollable)){var l=t&&o.cellToIndex(t);o.isValid(r)&&le.areEquals(r,l)&&!n.focusIsVisible(r)&&(n.makeCellVisible(r),o.invalidateLayout())}},i.prototype._doClick=function(e,t,o){if(v.isMobile()&&this._longPressed)v.stopEvent(e,!0);else{t=t||e.mouseX,o=o||e.mouseY;var r,n=this.grid,s=this.findElementAt(t,o,!1),l=this._findTableCell(),u=n.getCellType(l),h=this.focused,d=u===c.GridCellType.DATA&&n.cellToIndex(l);(!n._eventFrom||n._eventFrom.indexOf("key")>=0)&&(this._clickCell=l=this._findTableCell(e.target),h=l&&n.getDataCellIndex(l)),n.setEventFrom(null);try{if(l&&l==this._clickCell){var p=n.getCellType(l),f=void 0,g=void 0;switch(p){case c.GridCellType.HEAD:if(this.$_gridCellClicked(r=Ae.getSub(p,n.headView.getCellType(l))),r.subType==="check"){var m=n.headView._checkCell;v.included(e.target,m._check,m._image,m._span)&&this._checkAllClicked()}break;case c.GridCellType.FOOT:this.$_gridCellClicked(Ae.getSub(p,n.footView.getCellType(l)));break;case c.GridCellType.INDICATOR:case c.GridCellType.STATE:case c.GridCellType.CHECK:p===c.GridCellType.CHECK&&this.$_checkCellClicked2(l,e),f=n.rowBarContainer.rowOf(l),g=n.getRowOfItem(f),this.$_gridCellClicked(Ae.getItem(p,f,g));break;case c.GridCellType.HEADER:var b=n.getHeaderView(l),C=b.tableCellByCell(l);if(!(this._getEditRequest(this.mouseEventTarget,h,t,o,!1,!1,!1)instanceof Vs)&&this._doColumnHeaderClicked(e,C.layout)){var x=b.layoutByCell(l);x instanceof it&&x.hideChildHeaders&&x.tiedColumn&&(x=x.tiedColumn.layout),this.$_gridCellClicked(Ae.getLayout(p,x))}break;case c.GridCellType.DATA:var E=n.getBodyView(l).bodyCellByCell(l),S=le.areEquals(h,d)||E.contains(h);if(S&&E.grouped)this.$_gridCellClicked(Ae.getItem(c.GridCellType.GROUP_HEADER,E.item.index,null));else{if(S&&E.isCellButton(e.target))return this.$_cellButtonClicked(E),void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Ae.getCell(p,E,h)));if(S&&bi.isExpander(e.target))return void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Ae.getCell(p,E,h)));var P=n.editController._editor;if(S&&(E.isEditButton(e.target)||!E.readonly&&P&&P.dropDownWhenClick))return n.canMergeEditing(E)?this._tempIndex=n.focusedIndex.clone():E.getEditIndex(this._tempIndex),this._editButtonClicked(this._tempIndex,e),void this.$_gridCellClicked(Ae.getCell(p,E,h));var R=E.renderer2;if(R&&(S||!R.clickOnlyFocusedCell))return r=Ae.getCell(p,E,d),this.$_performRendererClick(E,e,r)?void((!n.editOptions.exceptDataClickWhenButton||!R.itemClickable)&&this.$_gridCellClicked(r)):void this.$_gridCellClicked(Ae.getCell(p,E,d));v.isInteractive(e.target)&&v.stopEvent(e,!0)}break;case c.GridCellType.FOOTER:var k=n.getFooterView(l).tableCellByCell(l);this.$_gridCellClicked(Ae.getSummary(p,k.summaryIndex,k.layout));break;case c.GridCellType.SUMMARY:var D=n.getSummaryView(l).tableCellByCell(l);this.$_gridCellClicked(Ae.getSummary(p,D.summaryIndex,D.layout));break;case c.GridCellType.INLINE_FILTER:var F=n.getFilterView(l).tableCellByCell(l),H=e.target;H===F.operatorButton&&n.popupMenuManager.show(F.popupMenu,H,this._tempIndex.set(-1,F.layout,this.grid),!1);break;case c.GridCellType.SUM:this.$_gridCellClicked(Ae.getSub(p,n.sumView.getCellType(l)));break;case c.GridCellType.FILTER:this.$_gridCellClicked(Ae.getSub(p,n.filterView.getCellType(l)));break;case c.GridCellType.GROUP_FOOTER:var N=n.getBodyView(l).bodyCellByCell(l),V=N.item.footerIndex;this.$_gridCellClicked(Ae.getGroupFooter(p,N.item.index,N.layout,V));break;case c.GridCellType.GROUP_HEAD:case c.GridCellType.GROUP_FOOT:var j=l[je];this.$_gridCellClicked(Ae.getGroupElt(p,j));break;case c.GridCellType.GROUP_BAR:var K=l[be];g=this.grid.getRowOfItem(K),this.$_gridCellClicked(Ae.getItem(p,K,g))}}else if(s&&s===this._clickElement){var U=this._getClickData(s,e);U&&(U.cellType===c.GridCellType.GRID_EMPTY&&n.isEditing()&&n.commitEditor(!0),this.$_gridCellClicked(U))}}finally{if(v.isMobile()){var Y=n.mobileOptions.doubleTapInterval||500;this._clickTimeStamp&&this._clickTimeStamp+Y>e.timeStamp&&this._clickElt===this._findTableCell(e.target)?u!==c.GridCellType.DATA||le.areEquals(this._clickIndex,d)?(this._clickTimeStamp=null,this._clickIndex=null,this._doDblClick(e)):this._clickTimeStamp=e.timeStamp:(this._clickTimeStamp=e.timeStamp,this._clickElt=this._findTableCell(e.target),u===c.GridCellType.DATA&&(this._clickIndex=d.clone()))}}}},i.prototype._getClickData=function(e,t){if(e instanceof Fo||e instanceof vl||e instanceof Oi)return Ae.getData(c.GridCellType.GRID_EMPTY)},i.prototype.$_commitRendererEdit=function(e,t,o){var r=t.item,n=t.dataField,s=t.dataColumn,l=!1;try{(l=e.editorCommit(t,r.getData(n),o))&&(e.undoable?e.execute(new Bc(t.item,n,o,t.column)):r.setData(n,o),e.isItemEditing(t.item)&&e.validateCellCommit(t,o))}catch(x){if(!e.editOptions.showCommitError)throw x;alert(x.message||x)}if(l&&e.isCellEditing()){var u=e.itemSource,h=u.editingItem.invalidFields,d=e.validationManager.getError(t);if(d)return h.push(s.dataIndex),void(e.editOptions.showCommitError&&alert(d.userMessage||d.message||d));if(h.indexOf(s.dataIndex)>=0&&h.splice(h.indexOf(s.dataIndex),1),e.validationManager.clearInvalidCell(t),h.length>0)return;var p=e.canMergeEditing(e.getBodyCellAt(t,!0));if(u.commit(p)||u.cancel(),p){var f=s.layout.merges.getRoom(t),g={},m={};m[s.fieldName]=o;for(var b=f.head;b<=f.tail;b++){var C=e.getItem(b);C.isDataRow&&(g[C.dataRow]=m)}u.updateRows2(g)}}},i.prototype.$_performRendererClick=function(e,t,o){var r,n=e.renderer2,s=this.grid,l=s.layoutManager;if(n){if(e.merged)if(t.pointerType==="")r=s.focusedIndex.clone();else{var u=t.mouseY,h=this._findTableCell(),d=h&&s.getTableView(h);r=this.$_getIndexAt(s,l,d,h,u)}else r=n.index;if(s.canWriteAt(r)&&n.canEdit()&&n.canEditClickAt(t)&&s.edit(r)){var p=n.editClick(r,t);if(p)return p.commit&&this.$_commitRendererEdit(s,r,p.value),!0}if(n.canClick(t)){var f=n.click(r,t);if(f)return v.extendObj(o,f),s._fireCellItemClicked(r,f)===!1&&n.preventDefaultClick(t),!0}return n.preventDefaultEditClick(t),!1}},i.prototype.$_performRendererKey=function(e,t){var o,r=e.renderer2,n=e.head;if(r)o=r.index;else{if(!n||!(r=n.renderer2))return;var s=e.rowIndex-n.rowIndex;(o=r.index.clone()).incRow(s)}var l=this.grid,u=l.canWriteAt(o)&&r.canEdit();if(le.areEquals(o,l.focusedIndex)){var h=Ae.getCell(l.getCellType(e.cell),e,o);if(u&&r.canEditKey(t)||r.canClickSpaceKey(t))return r.itemClick(t),!0;if(t.keyCode===32&&l.editOptions.buttonClickWhenSpace)return e.button===c.CellButton.ACTION||e.button===c.CellButton.POPUP?(l.closePopups(),e.cellButton.click(),!0):(this.$_gridCellClicked(h),!0)}},i.prototype._doDblClick=function(e){var t=e.mouseX,o=e.mouseY,r=e.ctrlKey||e.metaKey,n=e.shiftKey,s=e.altKey,l=this.grid,u=l.layoutManager,h=this.focused,d=this.findElementAt(t,o,!1),p=this._findTableCell();if(l.setEventFrom(null),p&&p==this._clickCell){var f=l.getCellType(p),g=void 0,m=void 0;switch(f){case c.GridCellType.HEAD:this.$_gridCellDblClicked(Ae.getSub(f,l.headView.getCellType(p)));break;case c.GridCellType.FOOT:this.$_gridCellDblClicked(Ae.getSub(f,l.footView.getCellType(p)));break;case c.GridCellType.INDICATOR:case c.GridCellType.STATE:case c.GridCellType.CHECK:g=l.rowBarContainer.rowOf(p),m=l.getRowOfItem(g),this.$_gridCellDblClicked(Ae.getItem(f,g,m));break;case c.GridCellType.HEADER:var b=l.getHeaderView(p),C=l.headerView.tableCellByCell(p);C&&C.isClickableElt(e.target)||((x=b.layoutByCell(p))instanceof it&&x.hideChildHeaders&&x.tiedColumn&&(x=x.tiedColumn.layout),this.$_gridCellDblClicked(Ae.getLayout(f,x)));var x,E=this._getEditRequest(this.mouseEventTarget,l.focusedIndex,t,o,r,n,s);E instanceof Vs&&(x=E.layout).firstColumn&&l.fitLayoutWidth(x);break;case c.GridCellType.DATA:var S=l.getBodyView(p),P=S.bodyCellByCell(p),R=this.$_getIndexAt(l,u,S,p,o);if(bi.isExpander(e.target))return;if(P.grouped)this.$_gridCellDblClicked(Ae.getItem(c.GridCellType.GROUP_HEADER,P.item.index,null));else if(this.$_gridCellDblClicked(Ae.getCell(f,P,h)),le.areEquals(R,h)){var k=l.editController.currentEditor();l.showEditor(R,void 0,v.isMobile()&&(k==null?void 0:k.hasList))}break;case c.GridCellType.FOOTER:var D=l.getFooterView(p).tableCellByCell(p);this.$_gridCellDblClicked(Ae.getSummary(f,D.summaryIndex,D.layout));break;case c.GridCellType.SUMMARY:var F=l.getSummaryView(p).tableCellByCell(p);this.$_gridCellDblClicked(Ae.getSummary(f,F.summaryIndex,F.layout));break;case c.GridCellType.SUM:this.$_gridCellDblClicked(Ae.getSub(f,l.sumView.getCellType(p)));break;case c.GridCellType.GROUP_FOOTER:var H=l.getBodyView(p).bodyCellByCell(p),N=H.item.footerIndex;this.$_gridCellDblClicked(Ae.getGroupFooter(f,H.item.index,H.layout,N));break;case c.GridCellType.GROUP_HEAD:case c.GridCellType.GROUP_FOOT:var V=p[je];this.$_gridCellDblClicked(Ae.getGroupElt(f,V));break;case c.GridCellType.GROUP_BAR:var j=p[be];m=l.getRowOfItem(j),this.$_gridCellDblClicked(Ae.getItem(f,j,m))}}else if(d&&d===this._clickElement){var K=this._getClickData(d,e);K&&this.$_gridCellDblClicked(K)}},i.prototype._doMouseWheel=function(e){var t=this.grid;t.setEventFrom(null),t.scrollOnEditing();var o=t.displayOptions;if(o.wheelEnabled&&!e.ctrlKey){if(!t._fireWheel(e))return!0;if((e.shiftKey||Math.abs(e.deltaX)>Math.abs(e.deltaY))&&o.wheelScrollHorz!==0){var r=t.leftPos,n=Math.abs(o.wheelScrollHorz||16)*((e.deltaX||e.deltaY)>0?1:-1);return t.leftPos=r+n,!0}var s=t.topIndex,l=Date.now(),u=Math.abs(o.wheelScrollLines);u=u||3;var h=t.displayOptions.wheelDeltaY;if(h>0){if(!(this._wheelDeltaY+Math.abs(e.deltaY)>=h))return void(this._wheelDeltaY+=Math.abs(e.deltaY));this._wheelDeltaY=0}if(o.wheelAccelDelay>0){if(l>this._prevScroll+300)this._checkScroll=l;else if(this._checkScroll+o.wheelAccelDelay<l){var d=o.wheelAccelScroll;if(d&&!isNaN(d))u=parseInt(d);else if(typeof d=="string"){var p=d.trim();if(p.indexOf("%")>0){var f=t.itemCount;u=parseInt(p.substr(0,p.length-1))/100*f}}}}return this._prevScroll=l,t.topIndex=t.topIndex+(e.deltaY>0?u:-u),!o.wheelEventPropagate||s!=t.topIndex}return!1},i.prototype._doMouseEnter=function(e){},i.prototype._doMouseLeave=function(e){var t=e.mouseX,o=e.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,t,o),this.$_setHoveredCell(null,t,o)},i.prototype._doMouseOver=function(e){},i.prototype._doContextMenu=function(e){return this.grid.doContextMenu(e)},i.prototype.$_doHome=function(e,t,o){var r=e.clone();if(e.first(),o&&this._checkReadOnly(e)&&!this._skipReadOnlyCell(e,1,r))return e.assign(t),!0},i.prototype.$_doEnd=function(e,t,o){var r=e.clone();if(e.last(),o&&this._checkReadOnly(e)&&!this._skipReadOnlyCell(e,-1,r))return e.assign(t),!0},i.prototype._doKeyDown=function(e){var t,o=e.keyCode,r=e.ctrlKey,n=v.isMac,s=n&&e.metaKey||!n&&e.ctrlKey,l=e.shiftKey,u=e.altKey,h=this.grid,d=h.editOptions,p=h.layoutManager,f=h.popupMenuManager,g=d.skipReadOnly,m=d.skipReadOnlyCell,b=h.focusedIndex,C=b.clone(),x=d.verticalMoveStep;if(!h._fireKeyDown(e))return!0;if(!h.isEditing()&&h.accessibility&&v.included(o,40,34,38,33,32,37,39)&&v.stopEvent(e),f.isShow()&&v.included(o,37,39,38,40,13,32)){var E=h.getBodyCellAt(b);return f.keyDown(e,E&&E.cell),!0}if(h.setEventFrom("keydown"),b&&!h.isEditing()&&(E=h.getBodyCellAt(b))&&this.$_performRendererKey(E,e))return!0;if(!h.isEditing()&&h.accessibility&&(o===67||o===86)&&s)return h.editController.setFocus(!0),!1;if(o==27)h.closePopups(),this._doCancel(h);else{if(o==13)return this._doEnter(h,d,C,e);if(o==9)return this._doTab(h,d,C,r,l,e);if(o==113)!h.isEditing()&&C.dataColumn&&(h.accessibility&&h.$_setEditFocused(!0,null),h.showEditor(C,l));else{if(v.isMac&&e.metaKey&&e.shiftKey&&e.keyCode===90)return h.redo();if(o==90&&s)return h.undo();if(o==89&&s)return h.redo();if(o==45)d.appendWhenInsertKey||h.itemCount==0?h.append():h.insert(C.item,e.shiftKey,r);else{if(o==46)return r&&l?(h.revertSelection(),!0):r?(h.deleteSelection(),!0):!!l&&(h.eraseSelection(!1),!0);if(u&&l&&o==40)h.moveSelection(1,"keydown");else if(u&&l&&o==38)h.moveSelection(-1,"keydown");else if(o==32&&l&&s&&h.rowBarContainer.rowIndicator.visible){var S=h.selections.getItem(0),P=S&&(Bn(S)||v.included(S.style,c.SelectionStyle.BLOCK,c.SelectionStyle.GROUP))&&S.getItems(h.checkBar.merged||h.checkBar.fieldIndex>=0);P||h.checkBar.merged?(P=P||[C.item],h.toggleChecks(P,C.item)):h.toggleCheck(C.itemIndex)}else if(h.editOptions.useArrowKeys&&v.included(o,36,35,39,37,40,38,34,33)){v.isMobile()&&e&&e.preventDefault&&e.preventDefault();var R=h.itemCount;if(o==40&&R==0)return h.append(),!0;if(!h.isValid(C))return C.normalize(h),this.setFocused(C,!0,!0),!0;if((v.included(o,40,34)||o==35&&r)&&C.isBottom&&this.$_checkAppending(C)||(v.included(o,38,33)||o==36&&r)&&C.isTop&&this.$_checkAppending(C,!0))return!0;var k=h.getBodyViewAt(C);if(!k)return!0;switch(o){case 36:if(r){if(this.$_doHome(C,b,g))break}else C.home(),this._skipReadOnly(C,1);break;case 35:if(r){if(this.$_doEnd(C,b,g))break}else C.end(),this._skipReadOnly(C,-1);break;case 39:if(k.spanRight(p,C),C.right(),g&&this._checkReadOnly(C)&&!this._skipReadOnly(C,1)){C.assign(b);break}break;case 37:if(C.left(),g&&this._checkReadOnly(C)&&!this._skipReadOnly(C,-1)){C.assign(b);break}break;case 38:if(n&&s){this.$_doHome(C,b,g);break}try{if(C.itemIndex==0&&C.isTop){if(this.$_commitCancel(C.item,d))return!0;r&&n?C.first():h.filterPanel.visible?h.inlineFilterFocus(C.layout):C.up(x)}else if(r&&n)C.first();else{if(r)return void h.topIndex--;C.up(x,h.isItemEditing(C.item))}}finally{m&&this._checkReadOnly(C)&&(this._skipReadOnlyCell(C,-1)||C.assign(b))}break;case 33:if(r&&!n)return h.topIndex=h.topIndex-p.fullItemCount,!0;if(t=C.clone(),C.incRow(-p.fullItemCount),g&&this._checkReadOnly(C)&&!this._skipReadOnlyCell(C,1,t)){C.assign(b);break}break;case 40:if(n&&s){this.$_doEnd(C,b,g);break}try{if(C.itemIndex!=R-1||!C.isBottom&&x!=c.VerticalMoveStep.ROW)if(r&&n)C.last();else{if(r)return h.topIndex++,!0;C.down(x,h.isItemEditing(C.item))}else{if(C.isBottom&&this._commitCancel(C.item,d))return!0;h.append(),r&&n?C.last():C.down(x,h.isItemEditing(C.item))}}finally{m&&this._checkReadOnly(C)&&(this._skipReadOnlyCell(C,1)||C.assign(b))}break;case 34:if(C.itemIndex==h.itemCount-1&&C.isBottom&&Ei(C.item.itemState))return h.commit(d.forceAppend),!0;if(r&&!n)return h.topIndex=h.topIndex+p.fullItemCount,!0;if(t=C.clone(),C.incRow(p.fullItemCount),g&&this._checkReadOnly(C)&&!this._skipReadOnlyCell(C,-1,t)){C.assign(b);break}}return k.spanHead(p,C),l&&h.selections.count>0&&!vr(h.displayOptions.selectionStyle)?(this.setFocused(C,!1,!1),h.selections.lastItem().resizeTo(C)):this.setFocused(C,!0,!0),!0}}}}return a.prototype._doKeyDown.call(this,e)},i.prototype._doKeyPress=function(e){this.grid._fireKeyPress(e)},i.prototype._doKeyUp=function(e){if(v.isIE){var t=e.ctrlKey,o=e.keyCode,r=this.grid;o===90&&t&&r.undo()}this.grid._fireKeyUp(e)},i.prototype._editButtonClicked=function(e,t){this.grid.makeCellVisible(e),this.grid.showEditor(e)&&this.grid.editorButtonClicked(e,t),a.prototype._editButtonClicked.call(this,e,t)},i.prototype._getSelectRequest=function(e,t,o,r,n,s){var l=this.grid,u=l.displayOptions,h=u.selectionMode,d=u.selectionStyle,p=this._findTableCell(e);if(!p)return null;var f=l.getCellType(p);if(f==c.GridCellType.INDICATOR){if(l.rowIndicator.selectable&&h!=c.SelectionMode.NONE&&d!=c.SelectionStyle.NONE&&!vr(d))return new Ir(l.getIndex(l.rowBarContainer.getCellIndex(p)),c.SelectionStyle.ROWS)}else if(f==c.GridCellType.HEADER){if(r){var g=l.headerView.columnByCell(p);if(l.rowIndicator.selectable&&h!=c.SelectionMode.NONE&&d!=c.SelectionStyle.NONE&&!vr(d))return new Ir(l.getIndex(-1,g),c.SelectionStyle.COLUMNS)}}else if(f==c.GridCellType.DATA){var m=l.getDataCellIndex(p,this._tempIndex);if(r&&l.selections.containsCell(m))return null;if(h!=c.SelectionMode.NONE&&d!=c.SelectionStyle.NONE&&!vr(d)&&!v.isMobile())return new Ir(m.clone(),d)}return null},i.prototype._getEditRequest=function(e,t,o,r,n,s,l){var u=Zt(this.grid.doc),h=this.grid,d=h.layoutManager,p=h.displayOptions,f=this._findTableCell(e);if(!f)return null;var g=h.getTableView(f),m=this.$_getRowResizeRequest(g,f,o,r,n,s,l);if(m)return m;if(g instanceof tn&&g.isRowIndicator(f)){if(l&&(v.isIE||v.isEdge)&&(l=n),l&&h.canMoveRow(!1,!1)){var b=h.getSelection(),C=h.rowBarContainer.rowOf(f),x=!1;if(b?x=b.containsItem(C):C==t.itemIndex&&(x=!0),x)return this._rowMoveReq.init(b,C)}}else if(g instanceof rr){if(e instanceof u.HTMLInputElement)return null;if(!n){var E=g.layoutByCell(f);if(E){var S=h.cellToContainer(f,this._reqPoint.setEmpty());if(p.columnResizable&&E._isResizable()&&(h.fixedOptions.resizable||E.root.vindex>=d.fixedLayoutCount&&E.root.vindex<d.rightFirstLayout)){var P=h.headerView.tableCellByLayout2(d,E);if(S.x+=P?P.width:E.domWidth,o>=S.x-3&&o<=S.x+3)return this._colResizeReq.init(E,o,r,o-S.x)}if(p.columnMovable&&E._isMovable()&&(!E.isRoot||h.canMoveLayout(E)))return this._colMoveReq.init(E,o,r,-1)}}}else if(g instanceof Oi){var R=h.getDataCellIndex(f,this._tempIndex);if(C=R&&R.itemIndex,h.canMoveRow(!1,!1)&&C>=0){var k=!1;if(b=h.getSelection(),(P=h.getBodyCellAt(R,!0)).expander===e)return null;if(l&&(v.isIE||v.isEdge)&&(l=n),b?(k=b.containsItem(C))&&!l&&(k=b.containsLayout(R.layout)&&this._canMoveRowAt(g,R,o)):t&&C==t.itemIndex&&(k=!!l||le.areEquals(R,t)&&this._canMoveRowAt(g,R,o)),k)return this._rowMoveReq.init(b,C)}}else if(g instanceof Rl){var D=g.boundsByContainer();if(h.header.resizable&&r<=D.bottom+1&&r>=D.bottom-2)return this._headerResizeReq.init(D.top,r-D.bottom-1)}},i.prototype.$_resizeSelection=function(e,t,o){var r=this.grid.selections,n=e?e.runStyle:o;if(!vr(n)&&v.included(o,c.SelectionStyle.ROWS,c.SelectionStyle.COLUMNS,c.SelectionStyle.SINGLE_COLUMN)&&(n=o),e){if(e.runStyle!=n){this.grid.selections.clear(!0);var s=e.getBounds();e=r.add(s.firstCell,s.lastCell,n,!0)}r.canResize(e)&&e.resizeTo(t)}else e=r.add(t,t,n,!0)},i.prototype._canMoveRowAt=function(e,t,o){return o<e.boundsByContainer(e.getCellRectAt(this.grid.layoutManager,t,!1)).x+20},i.prototype.$_getRowResizeRequest=function(e,t,o,r,n,s,l){var u=-1,h=this.grid;if(e instanceof tn?u=t.parentElement.$_row:e instanceof Oi&&(h.rowBarContainer.isVisible()||e.rightFixed||(h.fixedOptions.colCount>0&&e.fixed||h.fixedOptions.colCount===0)&&t.cellIndex===0&&(u=t.parentElement.$_row)),u<0)return null;var d=h.layoutManager,p=h.displayOptions,f=p.eachRowResizable&&!n,g=d.fixedItemCount,m=d.contentBounds.y,b=e.boundsByContainer(this._tempRect.setWidth(e.width));if(b.width<=0||o<b.x||o>=b.right)return null;if(u<g){if(h.fixedOptions.rowResizable&&(!p.dataHeights||p.dataHeights.length<=0)&&((b=d.getItemRect(u)).y+=m,r<=b.bottom+2&&r>=b.bottom-3))return this._rowResizeReq.init(u,f,b.y,r-b.bottom-1)}else if(p.rowResizable&&(!p.dataHeights||p.dataHeights.length<=0))for(var C=d.itemCount,x=h.topIndex,E=0;E<C;E++){var S=E+x+g;if(S==u&&((b=d.getItemRect(E+g)).y+=m,r<=b.bottom+2&&r>=b.bottom-3))return this._rowResizeReq.init(S,f,b.y,r-b.bottom-1)}return null},i.prototype._getDragTracker=function(e,t,o){if(e instanceof Ir)switch(e.style){case c.SelectionStyle.ROWS:return new Dy(e,t,o);case c.SelectionStyle.COLUMNS:return new My(e,t,o);case c.SelectionStyle.BLOCK:case c.SelectionStyle.GROUP:return new Ty(e,t,o)}else{if(e instanceof Vs)return new Oy(e,this._cellResizer);if(e instanceof Tl)return new Ry(e,this._cellFeedback,this._cellMover);if(e instanceof Lc)return new Py(e,this._cellResizer);if(e instanceof Nc)return new Zr(e,this._rowMoverProxy,this._rowMoverLine);if(e instanceof Fc)return new ky(e,this._cellResizer);if(v.isMobile()){if(e instanceof Fl)return this._touchScrollTracker.request=e,this._touchScrollTracker;if(e instanceof Gc)return this._touchSelectTracker.request=e,this._touchSelectTracker}}return null},i.prototype.$_checkCellClicked2=function(e,t){if(e!==t.target&&e.firstElementChild!==t.target){var o=tt(e),r=this.grid,n=r.rowBarContainer.getCheckBox(e);if(r.editOptions.checkable){var s=r.getEditItem(),l=r.getItem(e.parentElement[be]);if(s&&s.dataRow!==l.dataRow){var u=r.editOptions;switch(s.itemState){case c.ItemState.APPENDING:r.commit(u.forceAppend);break;case c.ItemState.INSERTING:r.commit(u.forceInsert);break;case c.ItemState.UPDATING:r.commit(u.commitWhenNoEdit)}}t.target instanceof o.HTMLSpanElement&&l.checkable&&(n.checked=r.checkBar.exclusive||!n.checked),this._doCheck(n,l,t.shiftKey)}else t.preventDefault()}},i.prototype._doCheck=function(e,t,o){var r=this.grid,n=r.checkBar,s=r.rowBarContainer.checkBar;if(r.editOptions.checkable){var l=r.checkBar;if(t.checkable&&(l.showGroup||t.dataRow>=0)&&e){var u=s._prevChecked,h=void 0,d=void 0,p=[],f=-1,g=-1,m=void 0;if(o&&u>=0&&!n.exclusive||l.merged){o&&u>=0?(h=le.temp(r,u,null),d=r.getItem(u).checked,l.merged?(f=(m=l.merges.getRoom(h))?m.head:u,g=m?m.tail:u):(f=u,g=t.index)):(d=e.checked,f=g=t.index,s.$_setPrevChecked(t.index),n.exclusive&&r.itemSource._clearChecked()),l.merged?(h=le.temp(r,t.index,null),m=l.merges.getRoom(h),f=Math.min(m?m.head:t.index,f),g=Math.max(m?m.tail:t.index,g)):(f=Math.min(f,t.index),g=Math.max(f,g));for(var b=f;b<=g;b++){var C=r.getItem(b);C.checkable&&C.dataRow>=0&&p.push(C)}p.length>0&&r.itemSource.checkItems(p,d,!0)}else if(r.itemSource.checkItem(t,e.checked,l.exclusive,!0),s.$_setPrevChecked(t.index),l.focusMove){var x=r.focusedIndex.clone();x.itemIndex=t.index,!r.isValid(x)&&x.column==null&&x.item.isDataRow&&(x.layout=r.getFirstLayout()),this.setFocused(x,!0,!0)}}}},i.prototype._checkAllClicked=function(){var e=this.grid;if(!e.empty&&e.editOptions.checkable){var t=e.checkBar,o=e.headView;t.showAll&&!t.exclusive&&(o.allChecked=!o.allChecked,e.itemSource.checkAll(o.allChecked,t.visibleOnly,t.checkableOnly,!0,t.showGroup&&!t.merged&&t.fieldIndex<0))}},i.prototype._doColumnHeaderClicked=function(e,t){if(e.button!=2){var o=void 0;t instanceof We?o=t.getDataColumn():t instanceof it&&t.hideChildHeaders&&t.tiedColumn&&(o=t.tiedColumn);var r=this.grid,n=r.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(o)if(e.target===n.check)n.check.checked=o.checked=!o.checked,r._columnCheckedChanged(o);else if(e.target===n.filter&&o.hasFilters)r.selectColumnFilters(n);else{if(e.target!==n.popup)return!!v.isClickableTemplate(n.cell,e.target)||!(o.sortable&&r.sortingOptions.enabled&&!e.ctrlKey)||(r.sortColumn(o,e),!0);var s=o.header.popupMenuName,l=r.getCellViewOf(n.cell);s&&l&&r.popupMenuManager.show(s,l,null,!0)}else if(t instanceof it){if(e.target!==n.expander||!t.expandable)return!0;t.expanded=!t.expanded}}},i.prototype.$_gridCellClicked=function(e){this.grid._fireCellClicked(e)},i.prototype.$_gridCellDblClicked=function(e){this.grid._fireCellDblClicked(e)},i.prototype.$_setHoveredCell=function(e,t,o){var r=this.grid,n=this._findTableCell();if(e&&n){var s=r.getTableView(n),l=this.$_getIndexAt(r,r.layoutManager,s,n,o);if(e!==this._tooltipCell||!le.areEquals(this._tooltipIndex,l)){this._hideTooltip(t,o),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var u=r.displayOptions.hintDelay;if(e)if(u>0){var h=this;this._tooltipShowTimer=setTimeout((function(){h.$_showTooltip2(e,l)}).bind(h),u)}else this.$_showTooltip2(e,l)}}},i.prototype._hideTooltip=function(e,t){this.grid.tooltipManager.close(e,t),this._tooltipCell=null,this._tooltipIndex.reset()},i.prototype.$_showTooltip2=function(e,t){var o=this.grid,r=o.validationManager.getError(t),n=this._tooltipOptions;if(o.editOptions.hintOnError&&r)n.message=r.message,this.$_showTooltip(e,t,n);else{var s=e.renderer2,l=o.getCellType(e.cell),u=t.item,h=l===c.GridCellType.DATA&&(!v.isMobile()||o.mobileOptions.showTooltip);if(u instanceof yi?h=h&&t.dataColumn.groupLevel>0&&u.groupLevel+1>=t.dataColumn.groupLevel:u instanceof ti&&(h=h&&t.dataColumn&&u.level>t.dataColumn.groupLevel),(h=h&&!!s)&&(h=o.displayOptions.showTooltip?s.showTooltip!==!1:s.showTooltip),h&&!le.areEquals(t,this._tooltipIndex)){var d=s.getTooltip(e,t);if(d||o.displayOptions.showEmptyTooltip){var p=o._fireShowTooltip(t,d);p&&(this._tooltipOptions.assignFrom(p),this.$_showTooltip(e,t,this._tooltipOptions))}}}},i.prototype.$_showTooltip=function(e,t,o){var r=this.grid,n=r.tooltipManager,s=r.layoutManager;if(!n.visible||this._tooltipCell!=e){this._hideTooltip();var l=r.getBodyView(e.cell),u=l.getCellRectAt(s,t,!1);u=l.boundsByContainer(u);var h=e.layout.isFixed?u.x:Math.max(u.x,s.nonFixedBounds.x),d=u.y+u.height;n.show(o,h,d,u.height,!1),this._tooltipCell=e,this._tooltipIndex.assign(t)}},i.prototype.$_showStateError=function(e,t){var o=this.grid,r=o.tooltipManager,n=o.layoutManager,s=this._tooltipOptions;if(e!==this._tooltipCell){this._hideTooltip(),s.message=t;var l=o.focusedIndex.itemIndex,u=o.rowBarContainer.boundsByContainer(),h=n.getItemBounds(l<n.fixedItemCount?l:l-n.topIndex);r.show(s,u.x,u.y+h.bottom,h.height,!0),this._tooltipCell=e,this._tooltipIndex.assign(null)}},i.prototype.$_setHoveredHeaderCell=function(e,t,o){if(e!=this._tooltipCell){this._hideTooltip(t,o),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var r=this.grid.displayOptions.hintDelay;if(r>0){var n=this;this._tooltipShowTimer=setTimeout((function(){n.$_showHeaderTooltip2(e)}).bind(n),r)}else this.$_showHeaderTooltip2(e)}},i.prototype.$_showHeaderTooltip2=function(e){var t=this.grid,o=t.header.showTooltip;if(o!==!1&&this._tooltipCell!=e){var r=e&&e.showTooltip;if(o===void 0?r:r!==!1){var n=e.tooltip||e.text;if(n){var s=t._fireShowHeaderTooltip(e.layout.firstColumn,n,e.layout);s&&(this._tooltipOptions.assignFrom(s),this.$_showHeaderTooltip(e,this._tooltipOptions))}}}},i.prototype.$_showHeaderTooltip=function(e,t){var o=this.grid,r=o.tooltipManager,n=o.layoutManager;if(!r.visible||this._tooltipCell!=e){this._hideTooltip();var s=n.getHeaderCellRect(e.layout,!1),l=e.layout.isFixed?s.x:Math.max(s.x,n.nonFixedBounds.x),u=s.y+s.height;r.show(t,l,u,0,!0),this._tooltipCell=e}},i.prototype.$_cellButtonClicked=function(e){var t=this.grid,o=e.layout.firstColumn;if(o){var r=e.getEditIndex(this._tempIndex);switch(e.button){case c.CellButton.POPUP:var n=o.popupMenuName,s=t.getCellViewOf(e.cell);n&&s&&t.popupMenuManager.show(n,s,r,!0);break;case c.CellButton.ACTION:t._doCellButtonClicked(r)}}},i.prototype.$_commitCancel=function(e,t){var o=this.grid;try{switch(e.itemState){case c.ItemState.INSERTING:return o.commit(t.forceInsert)||o.cancel(!0),!0;case c.ItemState.APPENDING:return o.commit(t.forceAppend)||o.cancel(!0),!0;case c.ItemState.UPDATING:return o.commit(t.commitWhenNoEdit)||o.cancel(!0),!0}}catch(r){if(r instanceof Rt)return(r=o._fireValidationFail(e.index,r.column,r))&&alert(t.showOnlyValidationMessage&&r.userMessage?r.userMessage:r.toString()),!1;if(r instanceof Ko)return!1;throw r}return!1},i.prototype.$_checkAppending=function(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=null);var r=this.grid;if(e.itemIndex==r.itemCount-1&&Ei(e.item.itemState)){var n=e.itemIndex;if(!o||o.itemIndex!=n){try{r.commit(r.editOptions.forceAppend,!0)?((e=e.clone()).itemIndex=n,r.isValid(e)||(e.itemIndex=r.getItemIndexOfRow(r.dataSource.rowCount-1)),this.setFocused(e,!0,!0)):t&&(r.cancel(!0),o&&this.setFocused(o,!0,!0))}catch(s){if(s instanceof Rt)return(s=r._fireValidationFail(n,s.column,s))&&alert(r.editOptions.showOnlyValidationMessage&&s.userMessage?s.userMessage:s.toString()),!0;if(s instanceof Ko)return!0;throw s}return!0}}return!1},i.prototype._getTouchRequest=function(e){var t=this.grid,o=t.selectionLayer;if(o instanceof Wc){var r=o.getSelectHandle(e.target);if(r)return this._touchSelectRequest.handle=r,this._touchSelectRequest}var n=t.getCellViewOf(e.target),s=t.getCellType(n);if(!n){var l=this.findElementAt(e.mouseX,e.mouseY,!1),u=this._getClickData(l,e);s=u&&u.cellType}switch(s){case c.GridCellType.DATA:var h=t.getBodyCellbyCell(e.target);return h&&h.isEditButton(e.target)?void 0:this._touchScrollRequest;case c.GridCellType.GRID_EMPTY:case c.GridCellType.FOOTER:case c.GridCellType.SUMMARY:case c.GridCellType.GROUP_FOOTER:case c.GridCellType.GROUP_HEADER:case c.GridCellType.INDICATOR:case c.GridCellType.STATE:case c.GridCellType.CHECK:return this._touchScrollRequest}},i.prototype._doTouchMove=function(e){var t=this.grid.mobileOptions;if(!this._longPressed){clearTimeout(this._longTimer),this._longPressed=!1;var o=this.dragTracker,r=!!o;return o instanceof Al&&(r=o._scrolling),(r||this._swipeTimer||!t.scrollPropagate)&&e.cancelable&&e.preventDefault(),this._touchEvents.push({x:e.mouseX,y:e.mouseY,t:e.timeStamp}),!1}},i.prototype._checkSwipe=function(e){if(this.dragTracker instanceof Al){var t=this.grid,o=this._clickCell&&t.getTableView(this._clickCell);if(!((o=o||this.findElementAt(e.mouseX,e.mouseY,!1))instanceof Vn||o instanceof vl||o instanceof Oi)){var r=this._getClickData(o,e);if(r&&r.cellType!==c.GridCellType.GROUP_HEADER)return}var n=this._touchEvents,s=n.length;if(!(s<2)){for(var l=n[s-1],u=n[s-2],h=s-3;h>=0&&!(l.t-u.t>100);h--)u=n[h];var d=u.x,p=u.y,f=l.x,g=l.y,m=Math.sqrt(Math.pow(d-f,2)+Math.pow(p-g,2))/Math.max(16,l.t-u.t),b=.998;if(m>.1){var C=Math.log(.1/m)/Math.log(b),x=m*(1-Math.pow(b,C+1))/(1-b),E="right",S=Math.round(180*Math.atan2(g-p,f-d)/Math.PI);return S<0&&(S=360+S),S>45&&S<=135?E="bottom":S>135&&S<=225?E="left":S>225&&S<=315&&(E="top"),o instanceof Vn&&v.included(E,"bottom","top")?void 0:this.onSwipeHandler(C,x,E,e)}}}},i.prototype.onSwipeHandler=function(e,t,o,r){this._touchMoving=!0,this._swipeDuration=e,this._swipeStarted=v.getTimer(),this._swipeAmount=0;var n=1;switch(o){case"right":n=-1;case"left":this._swipeDistance=n*t/20,this._swipeTimer=setInterval(this.$_scrollLeftPos.bind(this),50);break;case"bottom":n=-1;case"top":this._swipeDistance=n*t/20,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},i.prototype.$_checkTopBottom=function(e){var t=this.grid,o=t.layoutManager;return t.topIndex===0&&e<0||t.topIndex+o.fullItemCount>=t.itemCount&&e>0},i.prototype.$_scrollRow=function(){var e=v.getTimer();if(Math.abs(this._scrollY-window.scrollY)>10)this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer);else if(e-this._swipeStarted<this._swipeDuration){var t=Math.floor(50*(this._swipeDistance-this._swipeAmount)/this._swipeDuration);this._swipeAmount-=t,this.grid.topIndex+=t,this.$_checkTopBottom(t)&&(this._swipeTimer=clearInterval(this._swipeTimer))}else this._swipeTimer=clearInterval(this._swipeTimer)},i.prototype.$_scrollLeftPos=function(){v.getTimer()-this._swipeStarted<this._swipeDuration?this.grid.leftPos+=Math.floor(this._swipeDistance):this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer)},i}(mm),Yc=function(a){function i(e){var t=a.call(this)||this;return t._cellEditors={},t._customRenderers={},t._grid=e,t}return w(i,a),i.registryCustomRenderer=function(e,t,o){e&&t&&(i.$_customRenderers[e]&&!o||(i.$_customRenderers[e]=t))},i.prototype._doDispose=function(){this._grid=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),i.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var e=this._grid.container._container;this._defaultEditor=new ny(this._grid,e),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},i.prototype.getCellEditor=function(e){var t=this._grid.container._container,o=this._cellEditors[e];if(!o){switch(e){case"list":case"dropdown":o=new Jr(this._grid,t);break;case"nlist":o=new cy(this._grid,t);break;case"multiline":o=new ay(this._grid,t);break;case"number":o=new pc(this._grid,t);break;case"date":o=new Mc(this._grid,t);break;case"btdate":o=new Zy(this._grid,t);break;case"search":o=new fc(this._grid,t);break;case"checklist":o=new hy(this._grid,t);break;case"password":o=new sy(this._grid,t);break;case"ndate":o=new Qy(this._grid,t);break;default:o=this.getDefaultCellEditor()}this._cellEditors[e]=o,o&&o.setController(this._grid.editController)}return o},i.prototype.getEditConfig=function(e){var t=this.grid,o=t.editorOptions;if(t&&e)switch(e){case"list":case"dropdown":return v.assign({},Re.editor.dropdownCellEditor,o.dropdownCellEditor);case"number":return v.assign({},Re.editor.numberCellEditor,o.numberCellEditor);case"date":return v.assign({},Re.editor.dateCellEditor,o.dateCellEditor);case"search":return v.assign({},Re.editor.searchCellEditor,o.searchCellEditor);case"checklist":return v.assign({},Re.editor.multiCheckCellEditor,o.multiCheckCellEditor)}},i.prototype.$_checkFlexible=function(e,t){if(!v.ieOld&&!v.ieTen)return e&&e.flexible||t&&t.flexible},i.prototype.createRenderer=function(e,t,o){var r=null;if(e){switch(e){case Wr.TYPE:r=new Wr;break;case Th.TYPE:r=new Th;break;case Dn.TYPE:r=new Dn;break;case Ur.TYPE:r=this.$_checkFlexible(t,o)?new pg:new Ur;break;case el.TYPE:r=this.$_checkFlexible(t,o)?new fg:new el;break;case Dh.TYPE:r=new Dh;break;case tl.TYPE:r=this.$_checkFlexible(t,o)?new _g:new tl;break;case Mn.TYPE:r=new Mn;break;case Mh.TYPE:r=new Mh;break;case Lh.TYPE:r=new Lh;break;case Fh.TYPE:r=new Fh;break;case ks.SERIES_TYPE:r=new ks;break;case ir.TYPE:r=new ir;break;case or.TYPE:r=new or;break;case Ts.TYPE:r=new Ts;break;case Ln.TYPE:r=new Ln}if(!r){var n=this._customRenderers[e]||i.$_customRenderers[e];n&&(r=typeof n=="function"?new n(e):new Ac(n,e))}r||(v.log("Renderer type is invalid: "+e),r=new Wr),t&&r.assignFrom(t),o&&r.assignFrom(o)}return r},i.prototype.addCustomRenderer=function(e,t){e&&t&&(this._customRenderers[e]=t)},i.prototype.removeCustomRenderer=function(e){delete this._customRenderers[e]},i.prototype.existsCustomRenderer=function(e){return this._customRenderers.hasOwnProperty(e)},i.prototype.clearCustomRenderers=function(){this._customRenderers={}},i.$_customRenderers={},i}(me),wm=function(a){function i(e,t,o){t===void 0&&(t=0),o===void 0&&(o=!1);var r=a.call(this,e)||this;if(t<1)throw new Error("LookupTable levels must be equals or greater than 1");return r._levels=t,r._tree={},r._listMap=o?{}:null,r}return w(i,a),i.prototype._doDispose=function(){this._tree=this._listMap=null,a.prototype._doDispose.call(this)},i.prototype.clear=function(){this._tree=this._listMap={},this._changed()},i.prototype.exists=function(e){var t;if((e=v.makeArray(e))&&(t=e.length)>0&&t<=this._levels){if((t=Math.min(t,this._levels)-1)>0){for(var o=this._tree,r=0;r<t&&(o=o[e[r]]);r++);return o!=null&&o.hasOwnProperty(e[t])}return this._tree.hasOwnProperty(e[0])}return!1},i.prototype.fill=function(e,t,o){if(e&&e.length>0&&t&&t.length>0){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var s=v.makeArray(e[n]);this.$_add(s,t[n],o==null?void 0:o.list[n])}this._changed()}},i.prototype.fillRows=function(e){if(e&&e.length>0){for(var t=0,o=e.length;t<o;t++)this.$_addRow(e[t]);this._changed()}},i.prototype.add=function(e,t){e&&(this.$_add(e,t),this._changed())},i.prototype.addRow=function(e){e&&(this.$_addRow(e),this._changed())},i.prototype.lookup=function(e,t){var o;if(this._levels>1){var r=void 0,n=this._levels-1;for(o=this._tree,r=0;r<n&&(o=o[e[r]]);r++);}else o=this._tree;var s=e[e.length-1];if(o&&s&&t){for(var l=s.split(t),u=[],h=(r=0,l.length);r<h;r++){var d=o[l[r]]&&o[l[r]].value;u.push(d||l[r])}return u.join(t)}return o?o[s]:void 0},i.prototype.getDomain=function(e){if(!e||e.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var t,o,r=this._tree,n=[],s=[],l=[];if(this._levels>1){for(t=0,o=e.length;t<o;t++)if(!(r=r[e[t]]))return{keys:n,values:s,items:l}}if(this._listMap){var u=this._listMap[e.slice(0,e.length).join("~!~")];for(o=u?u.length:0,t=0;t<o;t++)n.push(u[t]),s.push(r[u[t]].value),l.push(r[u[t]].item)}else for(var h in r)n.push(h),s.push(r[h].value),l.push(r[h].item);return{keys:n,values:s,listItem:l}},i.prototype.getTextDomain=function(e){for(var t=this.getDomain(e),o=t.keys,r=t.values,n=0,s=t.keys.length;n<s;n++)o[n]=o[n]?String(o[n]):null,r[n]=r[n]?String(r[n]):null;return t},i.prototype.$_add=function(e,t,o){if(e){e=v.makeArray(e);var r,n,s,l,u=this._levels;if(e.length<u)throw Error("Keys length must be equals or greater than "+u);var h=this._tree;for(n=0;n<u-1;n++)(l=h[s=e[n]])||(l={},h[s]=l),h=l;if(h[r=e[u-1]]={value:t,item:o},this._listMap){var d=e.slice(0,e.length-1).join("~!~"),p=this._listMap[d];v.isArray(p)||(p=[],this._listMap[d]=p),p.push(r)}}},i.prototype.$_addRow=function(e){if(e){if(e.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var t=e[this._levels],o=e.slice(0,this._levels);this.$_add(o,t,e[this._levels+1])}},i}(function(a){function i(e){var t=a.call(this)||this;return t._id=e,t}return w(i,a),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),i.prototype.exists=function(e){return!1},i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.CHANGED="onLookupSourceChanged",i}(Mt)),$l=function(a){function i(e){e===void 0&&(e=null);var t=a.call(this)||this;return t._sources={},e&&t.load(e),t}return w(i,a),i.prototype.dispose=function(){return a.prototype.dispose.call(this)},i.prototype.load=function(e){if(e=v.makeArray(e)){this._sources={};for(var t=0,o=e.length;t<o;t++)this.$_add(e[t]);this._changed()}},i.prototype.add=function(e){var t=this.$_add(e);return t&&this._changed(),t},i.prototype.remove=function(e){this.$_remove(e)&&this._changed()},i.prototype.getSource=function(e){return this._sources[e]},i.prototype.$_createSource=function(e){if(e){var t=new wm(e.id,e.levels,e.ordered);return t.fill(e.keys,e.values,e.listResult),t}return null},i.prototype.$_add=function(e){if(e&&e.id&&this._sources[e.id]!=e){var t=this.$_createSource(e);if(t)return this.$_remove(e.id),this._sources[e.id]=t,t.addListener(this),t}},i.prototype.$_remove=function(e){if(e){var t=this._sources[e];if(t)return t.removeListener(this),delete this._sources[e],!0}return!1},i.prototype.onLookupSourceChanged=function(e){this._changed()},i.CHANGED="onLookupSourceProviderChanged",i}(function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.CHANGED="onLookupSourceProviderChanged",i}(Mt)),qc=function(a){function i(e){var t=a.call(this)||this;return t._visible=!0,t._enabled=!0,e&&e.name&&(t._name=e.name),e&&t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){return a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){this._styleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.click=function(){},i.prototype.isSeparator=function(){return!1},i}(Mt),Wn=function(a){function i(e,t){var o=a.call(this,t)||this;return o._parent=e,o}return w(i,a),i.prototype._doDispose=function(){this._parent=null,this._callback=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(e){this._group=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(e){this._callback=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e},enumerable:!1,configurable:!0}),i.prototype.isSeparator=function(){return this._label==="-"||this._type===c.MenuItemType.SEPARATOR},i.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},i.prototype.click=function(){this._type==="check"&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(i.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!1,configurable:!0}),i.prototype._itemClicked=function(e){},i}(qc),on=function(a){function i(e,t){var o=a.call(this,t)||this;return o._parent=e,o._items=o._load(t.children),o}return w(i,a),i.prototype._doDispose=function(){this._items&&this._items.forEach(function(e,t){e.dispose()}),this._items=null,this._parent=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"children",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){for(var e=this._parent;e;){if(e.popupMenuManager instanceof Un)return e.popupMenuManager;if(e instanceof Un)return e;e=e._parent}return null},enumerable:!1,configurable:!0}),i.prototype.count=function(){return this._items?this._items.length:0},i.prototype.itemClicked=function(e){if(e.parent==this&&e.type===c.MenuItemType.RADIO){var t=e.group,o=void 0;if(t){for(var r=0;r<this._items.length;r++)(o=this._items[r])instanceof Wn&&o.type===c.MenuItemType.RADIO&&o.group===t&&(o.checked=!1);e.checked=!0}}var n=this.manager.grid;typeof e.callback=="function"?e.callback.call(this,n.handler,e.toProxy(),this.manager.clickData):this._parent instanceof Un?this._parent.doMenuItemClick(e,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(e,this.manager.clickData):this._parent.itemClicked(e)},i.prototype.addMenu=function(e,t){var o;t===void 0&&(t=-1);var r=this._load(v.makeArray(e));t<0&&(t=this._items.length),(o=this._items).splice.apply(o,G([t,0],r,!1))},i.prototype.removeMenu=function(e){var t=this.getMenu(e);if(t){var o=this._items.indexOf(t);return this._items.splice(o,1),t.dispose(),!0}},i.prototype.getMenu=function(e){return v.find(this._items,function(t){return t.name===e})},i.prototype._load=function(e){var t=[];if(e)for(var o=0,r=e.length;o<r;o++){var n=e[o];if(v.isArray(n.children)&&n.children.length>0){var s=new i(this,n);t.push(s)}else s=new Wn(this,n),t.push(s)}return t},i.CLICKED="onPopupMenuClicked",i}(qc),Vl=function(a){function i(e){var t=a.call(this)||this;return t._showing=!1,t._viewGridInside=!1,t._container=e,t._element=t._createElement(),t._element.addEventListener("contextmenu",function(o){o.preventDefault()}),t}return w(i,a),i._borrowView=function(e){var t=i.$_views[e.$_hash]||[];return i.$_views[e.$_hash]=t,t.pop()||new i(e)},i._returnView=function(e){i.$_views[e._container.$_hash].push(e)},i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"parentView",{get:function(){return this._parentView},set:function(e){this._parentView=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childView",{get:function(){return this._childView},set:function(e){this._childView=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currDiv",{get:function(){return this._currDiv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!1,configurable:!0}),i.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},i.prototype.show=function(e,t,o,r,n,s,l,u){if(!this._showing){this._showing=!0;try{var h=o.parent;for(this._containerElement=e._container,this._parentView=t,this._firstItem=null,this._menu=o;h._parent&&!(h instanceof Fo);)h=h.parent;h&&(this._viewGridInside=h instanceof Fo?h.editorOptions.viewGridInside:h instanceof Un&&h.grid.editorOptions.viewGridInside),this.$_show(e,this._menu,r,n,s,l)}finally{this._showing=!1}}},i.prototype.boundsByContainer=function(){return null},i.prototype.hide=function(e){e===void 0&&(e=!0),e&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),v.detach(this._element))},i.prototype.hideChild=function(){this.$_hideChildView()},i.prototype.changeItemIndex=function(e){var t,o=this._itemIndex,r=this._menu._items;if(e==0)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(r&&!(o>=r.length)){for(;(t=r[o+=e])&&!t.enabled;);t&&(this._itemIndex=o,this.$_refreshItems(this._itemIndex))}},i.prototype.getActiveElementId=function(){var e=this._menu._items[this._itemIndex];return e?e._elementId:""},i.prototype.menuItemClicked=function(e){this._menuItemClicked(e)},i.prototype.$_show=function(e,t,o,r,n,s){if(this._element){var l=e.doc,u=Zt(l),h=this._element,d=h.style,p=this.manager,f=e.gridView.displayOptions.baseZindex,g=e._containerDiv;this._element.style.zIndex=String(f+4);var m,b=p.dropdownCount;if(this._viewGridInside)m=e._container;else{var C=g.parentNode;m=!v.isSlotMode()||C.nodeType!==1&&C.nodeType!==11?l.documentElement:C}h.id="rg-popup-"+this._menu.name,this._menu=t,this._itemIndex=-1,v.clearElements(this._element),this.$_buildItems(t),v.disableSelection(h),m.appendChild(h);var x=0;if(b&&t.children.length>b)for(var E=0,S=0;E<t.children.length&&S<b;E++){var P=this._element.children[E];P.menuItem.isSeparator()||(x+=P.offsetHeight,S++)}x>0&&x<h.offsetHeight?(d.height=x+2+"px",d.overflow="auto"):(d.removeProperty("height"),d.overflow="hidden");var R=v.getBrowserSize(),k=v.ieTen||v.ieOld?v.getClientRect(l.body):v.getClientRect(l.documentElement),D=v.getClientRect(e._container),F=R.width,H=R.height,N=v.getClientRect(h),V=u.pageXOffset||l.documentElement.scrollLeft,j=u.pageYOffset||l.documentElement.scrollTop;l.documentElement.scrollWidth>l.documentElement.clientWidth&&(H-=18),l.documentElement.scrollHeight>l.documentElement.clientHeight&&(F-=18),this._viewGridInside?(N.height>=D.height&&(d.height=D.height-4+"px",d.overflow="auto",N=v.getClientRect(this._element)),r+D.top+N.height>D.bottom&&(r=this._parentView?D.bottom-N.height-D.top-3:r-N.height-s),o+D.left+N.width>D.right&&(o=this._parentView?D.right-N.width-D.left-3:o-N.width-n)):(this._parentView||(m===g.parentNode?(o+=g.offsetLeft,r+=g.offsetTop):(o+=D.left-k.left,r+=D.top-k.top)),N.height>=H&&(d.height=H-4+"px",d.overflow="auto",N=v.getClientRect(this._element)),r+N.height>=H+j-3&&(r=r-N.height-3)<0&&(r=Math.max(0,H-N.height-3)),o+N.width>=F+V-3?o=Math.max(0,F-N.width-3):n!==void 0&&N.width<n&&(o+=n-N.width)),v.move(this._element,Math.max(0,o),Math.max(0,r))}},i.prototype._createElement=function(){var e=(function(o){o.keyCode==27&&this.hide()}).bind(this),t=this._container.doc.createElement("div");return t.style.setProperty("position","absolute","important"),t.className="rg-popup-menu",t.setAttribute("role","listbox"),t.tabIndex=-1,this._container.$_addListener(t,"keydown",e,!1),t},i.prototype._showChild=function(e){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===e.menuItem||this._currDiv!==e)){this.$_hideChildView();var t=e.menuItem,o=this._element.getBoundingClientRect(),r=this._element.offsetLeft+o.width-4,n=this._element.offsetTop+e.offsetTop-this._element.scrollTop;this._childView=i._borrowView(this._container),this._childView.show(this._container,this,t,r,n)}},i.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),v.detach(this._childView._element),i._returnView(this._childView)),this._childView=null},i.prototype._menuItemActived=function(e){this._currDiv=e;var t=e.menuItem,o=this.manager.showingView=this.manager.activeView=e.menuView;t instanceof Wn?o.childView&&o.$_hideChildView():t instanceof on&&t.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){o._showChild(e)},200))},i.prototype._menuItemDeactived=function(e){},i.prototype._menuItemClicked=function(e){var t=e.menuItem;t instanceof on?t.enabled&&this._showChild(e):t?t.enabled&&(this.hide(!0),this.manager.close(),t.enabled&&t.click()):this.$_hideChildView()},i.prototype.$_refreshItems=function(e){for(var t=this._element,o=0,r=t.childElementCount;o<r;o++){var n=t.childNodes[o];if(o===e?v.addClassName(n,"rg-popup-item-focused"):v.removeClassName(n,"rg-popup-item-focused"),o==e){var s=n.offsetTop,l=n.offsetHeight+4,u=t.offsetHeight,h=t.scrollTop;h>s?t.scrollTop=Math.max(0,t.scrollTop+(s-h)):h+u<s+l&&(t.scrollTop=t.scrollTop+s+l-(h+u)),this._menuItemActived(n)}}},i.prototype.$_buildItems=function(e){for(var t=e.children,o=[],r=this._container.doc,n=0,s=t.length;n<s;n++){var l=i.$_menuId++,u=t[n];if(u.visible){var h=r.createElement("div");if(h.menuView=this,h.menuItem=u,h.setAttribute("role","option"),h.id=u._elementId="rg-popup-item"+l,u instanceof Wn&&u.isSeparator()){h.className="rg-popup-separator";var d=r.createElement("hr");d.className="rg-popup-separator-hr",h.appendChild(d),h.onmouseover=(function(f){this._menuItemActived(f.currentTarget)}).bind(this)}else{!this._firstItem&&(this._firstItem=h),o.length=0,o.push("rg-popup-item"),u.group&&o.push("rg-popup-"+u.group),!u.enabled&&o.push("rg-popup-item-disable"),h.className=o.join(" "),h.onclick=(function(f){this._menuItemClicked(f.currentTarget)}).bind(this),h.onmouseover=(function(f){this._menuItemActived(f.currentTarget)}).bind(this),h.onmouseout=(function(f){this._menuItemDeactived(f.currentTarget)}).bind(this),o=["rg-popup-content"],v.included(u.type,c.MenuItemType.CHECK,c.MenuItemType.RADIO)&&(u.checked?o.push(u.group?"rg-popup-radio-checked":"rg-popup-check-checked"):o.push(u.group?"rg-popup-radio":"rg-popup-check")),u.styleName&&o.push(u.styleName),u instanceof on&&o.push("rg-popup-expander");var p=r.createElement("span");p.id="$popupMenu_item_"+l,p.innerHTML=u.label,p.className=o.join(" "),v.disableSelection(p),h.appendChild(p)}v.disableSelection(h),this._element.appendChild(h)}}},i.$_menuId=0,i.$_views={},i}(Mt),Un=function(a){function i(e){var t=a.call(this)||this;return t._grolbalMouseHandler=(function(o){for(var r=o.target;r;){if(r===this._mainView._element||r.menuItem)return;r=r.parentElement}this.close()}).bind(t),t._container=e,t._containerDom=e._containerDom,t._menus=[],t}return w(i,a),i.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"clickData",{get:function(){return this._clickData},set:function(e){this._clickData=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showingView",{get:function(){return this._showingView},set:function(e){this._showingView=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeView",{get:function(){return this._activeView},set:function(e){this._activeView=e},enumerable:!1,configurable:!0}),i.prototype.popupManager=function(){return this},i.prototype.isShow=function(){return!!this._mainView},i.prototype.indexOf=function(e){for(var t=this._menus.length;t--;)if(v.compareTextValue(this._menus[t].name,e,!0,!1))return t;return-1},i.prototype.getMenu=function(e){return v.find(this._menus,function(t){return t.name===e})},i.prototype.addMenu=function(e,t,o,r){if(o===void 0&&(o=!1),r===void 0&&(r=null),v.isWhiteSpace(e))throw"Menu name is empty.";var n=v.find(this._menus,function(l){return l.name===e});if(n&&!o)return n;var s=this._menus.indexOf(n);return n&&n.dispose(),n=new on(r||this,{name:e,children:t}),s>=0?this._menus.splice(s,1,n):this._menus.push(n),n},i.prototype.removeMenu=function(e){var t=this.indexOf(e);t>-1&&this._menus.splice(t,1).forEach(function(o){return o.dispose()})},i.prototype.show=function(e,t,o,r){var n=this.grid,s=tt(this._containerDom),l=o&&n.getBodyCellAt(o);if(typeof e=="string"?e=this.getMenu(e):e instanceof on||(e=new on(this,{children:e})),e){var u=this.grid.container.getBound(),h=void 0;l?h=(l.cellButton||l.merged&&l.head.cellButton||l.cell).getBoundingClientRect():h=t.getBoundingClientRect();var d=h.bottom,p=h.left-u.x,f=d-u.y,g=h.width,m=h.height;if(this._mainView=this._activeView=Vl._borrowView(this._container),t instanceof s.HTMLTableCellElement){var b=n.getCellType(t),C=n.getTableView(t),x=void 0;if(b===c.GridCellType.DATA)x=(l=l||C.bodyCellByCell(t)).grouped?Ae.getItem(c.GridCellType.GROUP_HEADER,l.item.index,null):Ae.getCell(b,l,o);else if(b===c.GridCellType.HEADER){var E=C.layoutByCell(t);E instanceof it&&E.hideChildHeaders&&E.tiedColumn&&(E=E.tiedColumn.layout),x=Ae.getLayout(b,E)}this.clickData=x}else if(t instanceof s.HTMLElement){var S=n.getCellViewOf(t),P=(C=n.getTableView(S)).tableCellByCell&&C.tableCellByCell(S);(b=n.getCellType(S))===c.GridCellType.INLINE_FILTER&&(this.clickData=Ae.getLayout(b,P.layout))}var R=typeof e=="string"?e:e.name,k=r?this.fireObjectEvent(i.POPUP_MENU_POPUP,p,f,this.clickData,R,!1):e;if(typeof k=="string")e=this.getMenu(k);else if(k===!1)return;e&&(this._mainView.show(this._container,null,e,p,f,g,m),!v.isSlotMode()&&t&&t.setAttribute("aria-activedescendant",this._mainView.getElementId()),!v.isSlotMode()&&s.addEventListener("pointerdown",this._grolbalMouseHandler,!1))}},i.prototype.showContext=function(e,t,o,r,n){if(e&&!this._mainView){var s=tt(this._containerDom);this.clickData=n,this._mainView=this._activeView=Vl._borrowView(this._container),this._mainView.show(this._container,null,e,o,r,0,0,t),!v.isSlotMode()&&s.addEventListener("pointerdown",this._grolbalMouseHandler,!1)}},i.prototype.close=function(){if(this._mainView){var e=tt(this._containerDom);this._mainView.hide(),Vl._returnView(this._mainView),this._mainView=null,!v.isSlotMode()&&e.removeEventListener("pointerdown",this._grolbalMouseHandler,!1)}},i.prototype.keyDown=function(e,t){this._doKeydown(e,t)},i.prototype.doMenuItemClick=function(e,t){this.fireEvent(i.MENU_ITEM_CLICKED,e,t)},i.prototype._doKeydown=function(e,t){var o=this._activeView,r=o==null?void 0:o.currDiv;switch(e.keyCode){case 40:o.changeItemIndex(1);break;case 38:o.changeItemIndex(-1);break;case 37:o.parentView&&(o.changeItemIndex(0),o.hideChild(),this._showingView=this._activeView=o.parentView||this._mainView);break;case 39:o&&o.childView&&(o=this._showingView=this._activeView=o.childView).changeItemIndex(1);break;case 13:case 32:r&&r.parentElement&&o.menuItemClicked(r)}!v.isSlotMode()&&t&&t.setAttribute("aria-activedescendant",o.getActiveElementId())},i.prototype.$_buildItems=function(e){},i.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",i.POPUP_MENU_POPUP="onPopupMenuManagerPopup",i}(Mt),Cm=function(a){function i(){return a.call(this,"summaryCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(e){this._childIndex=e},enumerable:!1,configurable:!0}),i.prototype._getSummary=function(e,t){return e&&e.headerSummaries.get(t)},i}(ic),xm=function(a){function i(e){var t=a.call(this,e)||this;return t.assignFrom(Re.headerSummary),t}return w(i,a),Object.defineProperty(i.prototype,"summaryIndex",{get:function(){return this._childIndex},enumerable:!1,configurable:!0}),i.prototype.getCellStyleName=function(){return i.CELL_CSS},i.prototype._createCell=function(){return new Cm},i.CELL_CSS="rg-header-summary-cell",i}(dl),Im=function(a){function i(e){var t=a.call(this,e)||this;return t.visible=!1,t.assignFrom(Re.headerSummaries),t}return w(i,a),i.prototype._createSummary=function(e){return new xm(e||this._grid)},i}(oc),Gs=function(a){function i(e,t){return a.call(this,e,t,"headerSummaryView")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-header-summary"},i.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},i.prototype._getSummaryRows=function(e){return e.dataRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(e){return e.summaryHeight},i.prototype._getSummaryCount=function(e){return e.headerSummaryCount},i.prototype._getSpanOf=function(e,t){return e.getSummarySpan(t)},i.prototype._getUserSpanOf=function(e,t){return e.getSummaryUserSpan(t)},i.prototype._getSummaryItem=function(e,t){return e.firstColumn.headerSummaries.get(t)},i.prototype._getTableRowCount=function(e){return e.dataRows*e.headerSummaryCount},i}(Vn),Em=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},i.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype._getCellCount=function(e){return e.fixedCellCount},i.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},i}(Gs),Sm=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype._getCellCount=function(e){return e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},i}(Gs),Om=function(a){function i(e){var t=a.call(this,e,"gridSumCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}return w(i,a),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},set:function(e){e!==this._model&&(this._model=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),i.prototype.setStyleName=function(e,t){t!=this._styleName&&(this._styleName=t,this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(e,t,o){this._textChanged&&(this._textChanged=!1,o[v.TextProp]=this._text)},i.prototype._doRender=function(e){},i}(Do),Kc=function(a){function i(e){var t=a.call(this,e,null,"gridSumView")||this;t._cells=[],t._count=0;for(var o=0;o<3;o++)t.addChild(t._cells[o]=new Om(e));return t}return w(i,a),i.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},i.prototype.getSumModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},i.prototype.getCellType=function(e){var t=this.getSumModel(e);return t instanceof br?t.getCellType():void 0},i.prototype._getCssSelector=function(){return"rg-sum"},i.prototype._doPrepareTableExtents=function(e){var t,o=e.grid.rowBarContainer,r=e.sectionObjects;this._count=0;for(var n=0,s=r;n<s.length;n++){var l=s[n];l.visible&&((t=this._cells[this._count++]).model=l,l instanceof qr?t.width=o.rowIndicator.width:l instanceof Kr?t.width=o.stateBar.width:l instanceof Xr&&(t.width=o.checkBar.width))}},i.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},i.prototype._doLayoutContent=function(e){var t=e.grid,o=this._count;this._getTableRowCount(e);for(var r=this._thead,n=r&&r.children[0];this.childCount<o;)this.addChild(this._cells[this.childCount]);for(;this.childCount>o;)this.removeLast();for(var s=0;s<o;s++){var l=this.getChild(s),u=l.model;if(u.dirty||t._columnsDirty){var h=u.getSumCell(),d=this._getTableCell(0,s),p=d.firstElementChild,f=this.$_getCellSelector()+" "+u.getSumStyleName();if(n){var g=n.children[s];g&&(g[v.TextProp]=u.getCellType()+" sum")}l.setStyleName(d,f),l.text=u.sumText,l.updateCell(t,h,p)}}},i.prototype._doRender=function(e){},i.prototype._doDraw=function(e){this._cells.forEach(function(t){t.validate()})},i.prototype._getTableRowCount=function(e){return 1},i.prototype._getTableRowHeight=function(e,t){return this.height},i.prototype._getCellCount=function(e){return this._count},i.prototype._getCellWidth=function(e,t){return this._cells[t].width},i.prototype.$_getCellSelector=function(){return"rg-sum-cell"},i.CELL_CSS="rg-sum-cell",i}(tr),Rm=function(a){function i(e){var t=a.call(this,e)||this;return t._enabled=!0,t._handleVisibility=c.HandleVisibility.VISIBLE,t._commitBeforeFiltering=!0,t._includeParentItem=!0,t._toast=new Hn({visible:!1,message:t._messageCallback}),t._selector=new km(e),t._automating=new Tm(e),t.assignFrom(Re.filtering),t}return w(i,a),i.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(e){e!=this._handleVisibility&&(this._handleVisibility=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(e){this._commitBeforeFiltering=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(e){this._includeParentItem=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selector",{get:function(){return this._selector},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"automating",{get:function(){return this._automating},set:function(e){this._automating&&this._automating.assignFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},set:function(e){e&&!e.message&&(e=T(T({},e),{message:this._messageCallback})),this._toast&&this._toast.assignFrom(e)},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(e){a.prototype.assignFrom.call(this,e),e.selector&&this._selector.assignFrom(e.selector),e.automating&&this._automating.assignFrom(e.automating),e.toast&&this._toast.assignFrom(e.toast)},i.prototype._messageCallback=function(){return Re.filtering.toast.message||ye.messages.filterToastMessage},i}(hi),Pm="rg-filter-selector",km=function(a){function i(e){var t=a.call(this,e)||this;return t._listHeight=170,t._partialSearch=!0,t._filterReset=!0,t._showEmptyFilter=!0,t._maxWidth=0,t._width=0,t._minWidth=0,t._style=Pm,t}return w(i,a),Object.defineProperty(i.prototype,"listHeight",{get:function(){return this._listHeight},set:function(e){this._listHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return!!this._showButtons},set:function(e){this._showButtons=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(e){this._partialSearch=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"acceptText",{get:function(){return this._acceptText||ye.messages.filterSelectorAcceptText},set:function(e){this._acceptText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelText",{get:function(){return this._cancelText||ye.messages.filterSelectorCancelText},set:function(e){this._cancelText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allCheckText",{get:function(){return this._allCheckText||ye.messages.filterSelectorAllCheckText},set:function(e){this._allCheckText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(e){this._showEmptyFilter=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText||ye.messages.filterSelectorEmptyFilterText},set:function(e){this._emptyFilterText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder||ye.messages.filterSelectorSearchPlaceholder},set:function(e){this._searchPlaceholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText||ye.messages.filterSelectorSearchedCheckText},set:function(e){this._searchedCheckText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(e){this._style=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"closeWhenClick",{get:function(){return!!this._closeWhenClick},set:function(e){this._closeWhenClick=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterReset",{get:function(){return this._filterReset},set:function(e){this._filterReset=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filtersResetText",{get:function(){return this._filtersResetText||ye.messages.filterSelectorFiltersResetText},set:function(e){this._filtersResetText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterResetText",{get:function(){return this._filterResetText||ye.messages.filterSelectorFilterResetText},set:function(e){this._filterResetText=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=Math.max(e,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textToTitle",{get:function(){return!!this._textToTitle},set:function(e){this._textToTitle=!!e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(e){this._searchIgnoreCase=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeWhenEnter",{get:function(){return!!this._activeWhenEnter},set:function(e){this._activeWhenEnter=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandCategory",{get:function(){return!!this._expandCategory},set:function(e){this._expandCategory=e},enumerable:!1,configurable:!0}),i}(hi),Tm=function(a){function i(e){var t=a.call(this,e)||this;return t._dateCategorize=!0,t._numberCategorize=!0,t._textCategorize=!1,t._lookupDisplay=!1,t}return w(i,a),Object.defineProperty(i.prototype,"dateCategorize",{get:function(){return this._dateCategorize},set:function(e){e!=this._dateCategorize&&(this._dateCategorize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCategorize",{get:function(){return this._numberCategorize},set:function(e){e!=this._numberCategorize&&(this._numberCategorize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCategorize",{get:function(){return this._textCategorize},set:function(e){e!=this._textCategorize&&(this._textCategorize=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(e){e!=this._dateCategoryCallback&&(this._dateCategoryCallback=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(e){e!=this._numberCategoryCallback&&(this._numberCategoryCallback=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(e){e!=this._textCategoryCallback&&(this._textCategoryCallback=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateYearFormat",{get:function(){return this._dateYearFormat||ye.messages.filterSelectorDateYearFormat},set:function(e){this._dateYearFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat||ye.messages.filterSelectorDateQuarterFormat},set:function(e){this._dateQuarterFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateMonthFormat",{get:function(){return this._dateMonthFormat||ye.messages.filterSelectorDateMonthFormat},set:function(e){this._dateMonthFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateDayFormat",{get:function(){return this._dateDayFormat||ye.messages.filterSelectorDateDayFormat},set:function(e){this._dateDayFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){this._lookupDisplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(e){this._filteredDataOnly=e},enumerable:!1,configurable:!0}),i}(hi);(function(a){a[a.ALL=0]="ALL",a[a.YQ=1]="YQ",a[a.YM=2]="YM",a[a.Y=3]="Y",a[a.QM=4]="QM",a[a.Q=5]="Q",a[a.M=6]="M",a[a.NONE=7]="NONE"})(ii||(ii={}));var Dm=function(){function a(i){this._options=i}return a.HasPartial=function(i,e,t){if(t&&(i=i&&i.toLowerCase(),e=e&&e.toLowerCase()),i.indexOf(e)>=0)return!0;for(var o=v.hangulToChosungAll(i),r=v.hangulToChosungAll(e),n=-1,s=!1;(n=o.indexOf(r,n+1))>=0;){for(var l=0;l<r.length&&l+n<o.length;l++){var u=v.hangulToChosung(i[l+n]),h=v.hangulToChosung(e[l]);if(h.org&&h.org!==u.org||!h.cho||h.cho!==u.cho){s=!1;break}s=!0}if(s)return!0}return!1},a.getDateProperty=function(i,e){if(!i)return null;switch(e){case 0:return i.getFullYear();case 1:return i.getMonth()>5?2:1;case 2:return Math.floor(i.getMonth()/3);case 3:return i.getMonth();case 4:var t=new Date(i.getFullYear(),i.getMonth(),1);return t.setDate(t.getDate()-t.getDay()),Math.floor((i.getTime()-t.getTime())/6048e5)+1;case 5:return i.getDate();case 6:return i.getHours()}},a.prototype.dispose=function(){return this._filters=null,this._options=null,null},Object.defineProperty(a.prototype,"searched",{get:function(){return this._searched},enumerable:!1,configurable:!0}),a.prototype.buildItems=function(i,e,t,o){o===void 0&&(o=!0);var r=this._options.selector,n=this._options.automating,s=r.emptyFilterText;this._autoFilter=t;var l=this._filters=t?i.autoFilters:i.filters,u=[];if(t){i.autoFilters.activeCount>0&&(u=this._getActivatedFilters(i.autoFilters)),i.autoFilters.clear(!1);var h=!1,d=void 0;this._valueType=i.valueType;var p=n.filteredDataOnly?i.grid.getDistinctItemValues(i.dataIndex):e.getDistinctValues(i.dataIndex);switch(this._valueType){case c.ValueType.DATETIME:d=(h=n.dateCategorize)&&n.dateCategoryCallback?n.dateCategoryCallback(i,p):this._categorizeDateValues(p,h,s);break;case c.ValueType.NUMBER:d=(h=n.numberCategorize)&&n.numberCategoryCallback?n.numberCategoryCallback(i,p):this._categorizeNumberValues(p,h,s);break;case c.ValueType.BOOLEAN:d=[];for(var f=!1,g=0;g<p.length;g++){var m=p[g];m!=null?d.push({text:m.toString().toUpperCase(),value:m}):f=!0}f&&r.showEmptyFilter&&d.push({text:s,empty:!0});break;case c.ValueType.TEXT:h=n.textCategorize,d=i.lookupSource&&this._options.automating.lookupDisplay&&!n.textCategoryCallback?this._categorizeLookupTree(e,i,s):h&&n.textCategoryCallback?n.textCategoryCallback(i,p):this._categorizeTextValues(p,h,s)}d&&this._createCategories(d,null,i.valueType,l),this._filters.activateItems(u,!0,o)}},a.prototype.search=function(i){var e=[];function t(d,p){if(e.indexOf(d)<0){for(var f=[],g=d;g;)e.indexOf(g)<0&&f.push(g),g=g.category;Array.prototype.push.apply(e,f.reverse())}}for(var o=0,r=this._filters.count;o<r;o++){var n=this._filters.getItem(o);if(!(n instanceof Gr)){var s=this._autoFilter?n.tag:n.toString(),l=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,u=this._options.selector.searchIgnoreCase,h=a.HasPartial;(h(s,i,u)||l&&h(n.toString(),i,u))&&t(n)}}return e},a.prototype._getActivatedFilters=function(i){for(var e=[],t=i.count;t--;){var o=i.getItem(t);o instanceof Gr||!o.active||e.push(o.name)}return e},a.prototype._createCategories=function(i,e,t,o){var r=o.getOwner(),n=this._options.automating.lookupDisplay&&r.lookupDisplay,s=n&&r.lookupSource;function l(F,H,N){if(s&&N.fieldIds){for(var V=N,j=[],K=0;K<V.fieldIds.length;K++)V.keys[K]==null||V.keys[K]==""?j.push("(values[".concat(V.fieldIds[K],"] is empty)")):j.push("(values[".concat(V.fieldIds[K],"] = '").concat(V.keys[K],"')"));return j.join(" and ")}if(F==null||N.empty)return"value is empty";if(H==c.ValueType.DATETIME){var U=N;return"(year(value) = ".concat(U.year,") and (month(value) = ").concat(U.month+1,") and (day(value) = ").concat(U.day,")")}return H==c.ValueType.BOOLEAN?N.value?"value":"not(value)":H==c.ValueType.NUMBER?"value = "+F:"value = '"+(F=F.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"))+"'"}function u(F,H,N){return t===c.ValueType.TEXT&&F&&!H.empty?r.getLookupLabel(F):N}for(var h=v.pad,d=0,p=i.length;d<p;d++){var f=i[d],g=f.hasOwnProperty("childs"),m=f.hasOwnProperty("values"),b=void 0;(b=g||m?new Gr:new co(l(f.value,t,f))).text=s?f.text:n?u(f.value,f,f.text):f.text;var C="";if(C=f.name?f.name:f.empty?a.EMPTY_FILTER:t==c.ValueType.DATETIME&&g&&e?e.name+" "+f.text:f.text,b.name=C,this._filters.add(b,!1),e&&e.addChild(b),b instanceof Gr){if(g)this._createCategories(f.childs,b,t,o);else if(v.isArray(f.values))for(var x=f.values,E=0,S=x.length;E<S;E++){var P=x[E],R=P+"",k=new co(l(P,t,f));k.name=R,k.text=n?u(P,f,R):R,k.tag=R,b.addChild(k),this._filters.add(k,!1)}}else if(t!=c.ValueType.DATETIME||f.empty)b.tag=f.text;else{var D=f;b.tag="".concat(D.year,"-").concat(h(D.month+1,2),"-").concat(h(D.day,2))}}},a.prototype._categorizeDateValues=function(i,e,t){if(!i)return null;for(var o=!1,r=!1,n=!1,s=a.getDateProperty,l=0,u=0,h=0,d={year:null,quarter:null,month:null,day:null},p=i.length,f=0;f<p;f++){var g=i[f];if(g){var m=s(g,0),b=s(g,2),C=s(g,3),x=s(g,5);d?m!=d.year?(l++,u++,h++):b!=d.quarter||C!=d.month?(u++,h++):x!=d.day&&h++:(l++,u++,h++),d.year=m,d.quarter=b,d.month=C,d.day=x}}function E(H,N){var V=N+"";return H?H.replace("{YYYY}",V).replace("{YY}",V.slice(-2)).replace("YYYY",V).replace("YY",V.slice(-2)):V}function S(H,N){var V=N+1+"";if(!H)return V;var j=("0"+V).slice(-2);return H.indexOf("{Q")>=0?H.replace("{QQ}",j).replace("{Q}",V):H.replace("QQ",j).replace("Q",V)}function P(H,N){var V=N+1+"";if(!H)return V;var j=("0"+V).slice(-2);return H.replace("{MM}",j).replace("{M}",V).replace("MM",j).replace("M",V)}var R=this._options.automating,k=[],D=[];e&&((o=l>1&&u>6)&&(k.push(0),D.push(function(H,N,V){return E(R.dateYearFormat,V)})),(r=u/l>6)&&(k.push(2),D.push(o?function(H,N,V){return S(R.dateQuarterFormat,V)}:function(H,N,V){return E(R.dateYearFormat,H)+" "+S(R.dateQuarterFormat,V)})),(n=h>9&&u>3)&&(k.push(3),D.push(o||r?function(H,N,V){return P(R.dateMonthFormat,V)}:function(H,N,V){return E(R.dateYearFormat,H)+" "+P(R.dateMonthFormat,V)}))),k.push(5),D.push(function(H,N,V){var j=E(R.dateDayFormat,H);return j=function(K,U){var Y=U+"";if(!K)return Y;var J=("0"+Y).slice(-2);return K.replace("DD",J).replace("D",Y)}(j=P(j,N),V),j});var F=[];return(function H(N,V,j,K,U){K===void 0&&(K=0),U===void 0&&(U=-1),U=U==-1?N.length-1:U;for(var Y,J,ae=null,de=K,Ce=!1,pe=function(Ge){var Ye=N[Ge],Be=function(qe,Qe,Ke){for(var xt=[],Ct=0;Ct<=Ke;Ct++)xt.push(a.getDateProperty(qe,Qe[Ct]));return xt}(Ye,k,V),De=function(qe,Qe,Ke){if(!qe)return null;switch(Qe[Ke]){case 0:return qe.getFullYear().toString();case 1:return qe.getFullYear().toString()+Math.floor(qe.getMonth()/6).toString();case 2:return qe.getFullYear().toString()+Math.floor(qe.getMonth()/3).toString();case 3:return qe.getFullYear().toString()+qe.getMonth().toString();case 5:return qe.getFullYear().toString()+qe.getMonth()+qe.getDate()}}(Ye,k,V);if(Ge>K&&De!=ae){var Ve=Y[V];if(J)if(V===k.length-1){var _e={text:"",year:J.getFullYear(),month:J.getMonth(),day:J.getDate(),value:J};_e.text=D[V](_e.year,_e.month,_e.day),j.push(_e)}else{var Xe={text:"",childs:[]},Me=function(){Xe.year=J.getFullYear()},re=function(){Xe.quarter=Math.floor(J.getMonth()/3)},Ue=function(){Xe.month=J.getMonth()},st=o&&r&&n?ii.ALL:o&&r?ii.YQ:o&&n?ii.YM:o?ii.Y:r&&n?ii.QM:r?ii.Q:n?ii.M:ii.NONE;st===ii.ALL?V===0?Me():V===1?(Me(),re()):V===2&&(Me(),re(),Ue()):st===ii.YQ?V===0?Me():V===1&&(Me(),re()):st===ii.YM?V===0?Me():V===1&&(Me(),Ue()):st===ii.Y?Me():st===ii.QM?V===0?re():V===1&&(re(),Ue()):st===ii.Q?re():st===ii.M&&Ue(),Xe.text=D[V](J.getFullYear(),J.getMonth(),Ve),j.push(Xe),H.call(fe,N,V+1,Xe.childs,de,Ge-1)}de=Ge}Ge>K&&J==null&&(Ce=!0),ae=De,Y=Be,J=Ye},fe=this,se=K;se<=U+1;se++)pe(se);V==0&&Ce&&this._options.selector.showEmptyFilter&&j.push({text:t,empty:!0})}).call(this,i,0,F),F},a.prototype._categorizeNumberValues=function(i,e,t){if(!i||!i.length)return null;var o=i.filter(function(d){return d!=null&&d!=null&&!isNaN(d)}).sort(function(d,p){return d-p}),r=o.length,n=o.length!==i.length,s=1,l=[];if(e&&r>15)for(s=Math.round(r/Math.min(Math.max(4,Math.round(r/5)),8));o.length>0;){var u=o.splice(0,s);l.push({text:u[0]+" ~ "+u[u.length-1],values:u})}else for(var h=0;h<r;h++)l.push({text:o[h]+"",value:o[h]});return n&&this._options.selector.showEmptyFilter&&l.push({text:t,empty:!0}),l},a.prototype._categorizeLookupTree=function(i,e,t){var o=e.grid,r=[];if(this._options.automating.filteredDataOnly)o._items._rs.getAllItems().forEach(function(f){r.push(f.dataRow)});else if(o.isTree())i.getDescendants(null,-1).forEach(function(f){r.push(f.rowId)});else for(var n=i.rowCount,s=0;s<n;s++)r.push(s);var l=[],u=e.lookupKeyFieldIds,h={},d={};function p(f,g,m,b,C){var x=m.shift(),E=i.getValue(g,x);C.push(x),b.push(E);var S=f[E];S||(S=f[E]={value:E,name:b.join("-"),keys:b.slice(),fieldIds:C.slice()}),m.length?(!S.text&&(S.text=function(P,R,k){var D=d[P];if(!D){for(var F=o.columnsByField(P),H=0;H<F.length;H++)if(F[H].lookupSource||F[H].lookupDisplay){D=d[P]=F[H];break}}return D?D.lookupSource?D.lookupSource.lookup(R,D.valueSeparator):D.lookupDisplay?D.getLookupLabel(k):k:k}(x,b,E)||E||t),S.childs=S.childs||{},p(S.childs,g,m,b,C)):!S.text&&(S.text=E?e.lookupSource.lookup(b,e.valueSeparator)||E:t)}for(s=0;s<r.length;s++)p(h,r[s],u.slice(),[],[]);return function f(g,m){Object.keys(g).sort().forEach(function(b){var C=g[b],x={value:C.value,text:C.text,name:C.name,fieldIds:C.fieldIds,keys:C.keys};m.push(x),C.hasOwnProperty("childs")&&(x.childs=[],f(C.childs,x.childs))})}(h,l),l},a.prototype._categorizeTextValues=function(i,e,t){if(!i)return null;var o=i.length,r=[],n=!1;if(e&&o>15){for(var s=[{},{},{},{}],l=[0,0,0,0],u=[0,0,0,0],h=0;h<o;h++){var d=i[h];if(d){var p=(k=d[0]).charCodeAt(0),f=!1,g=void 0;s[g=p>=48&&p<=57?0:p>=65&&p<=90||p>=97&&p<=122?1:p>=1e4?2:3][k]?s[g][k].push(d):(s[g][k]=[d],f=!0),l[g]++,f&&u[g]++}else n=!0}for(var m=Math.min(Math.max(4,Math.round(o/5)),8),b=0;b<4;b++){var C=l[b]==0?0:Math.max(1,Math.min(u[b],Math.round(l[b]/o*m))),x=Math.round(u[b]/C),E=x,S=s[b],P="",R=[];for(var k in S)E===x&&(P=k),Array.prototype.push.apply(R,s[b][k]),--E==0&&(r.push({text:x==1?k:P+" ~ "+k,values:R}),R=[],E=x)}}else{h=0;for(var D=i.length;h<D;h++){var F=i[h];F?r.push({text:F,value:F}):n=!0}}return n&&this._options.selector.showEmptyFilter&&r.push({text:t,empty:!0}),r},a.EMPTY_FILTER="$$empty",a}(),Mm=function(a){function i(e,t,o){var r=a.call(this)||this;r._opened=!1,r._grid=o,r._gridContainer=o.container._containerDom;var n=xe(r._gridContainer),s=r._element=n.createElement("div");return s.style.position="absolute",s.style.display="none",s.className=t.selector.style,s.setAttribute("aria-hidden","true"),r._options=t,r._soptions=t.selector,r._manager=new Dm(r._options),r._globalMouseDownHandler=r._globalMouseDownHandler.bind(r),r._globalKeyDownHandler=r._globalKeyDownHandler.bind(r),r._scrollHandler=r._scrollHandler.bind(r),r._wheelHandler=r._wheelHandler.bind(r),r._resetClickHandler=r._resetClickHandler.bind(r),r._searchInputHandler=r._searchInputHandler.bind(r),r._searchKeyDownHandler=r._searchKeyDownHandler.bind(r),r._checkAllClickHandler=r._checkAllClickHandler.bind(r),r._confirmClickHandler=r._confirmClickHandler.bind(r),r._cancelClickHandler=r._cancelClickHandler.bind(r),r._itemClickHandler=r._itemClickHandler.bind(r),r}return w(i,a),Object.defineProperty(i.prototype,"opened",{get:function(){return this._opened},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"column",{get:function(){return this._targetColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return xe(this._element)},enumerable:!1,configurable:!0}),i.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,v.detach(this._element),a.prototype._doDispose.call(this)},i.prototype.show=function(e,t,o){this._opened&&this.hide();var r,n=this._element,s=this._soptions,l=this._grid.container._containerDiv,u=v.isSlotMode()?l:l.parentElement;!v.isSlotMode()&&(r=l.nextElementSibling)?u.insertBefore(n,r):u.appendChild(n),this._targetColumn=e,n.className=s.style,n.tabIndex=-1,n.style.display="block",this._autoFiltering=e.autoFilter,this._build(e,o,this._autoFiltering);var h=t.getBoundingClientRect(),d=this._gridContainer.parentElement.clientWidth,p=s.width,f=e.filterSelectorWidth,g=n.style,m=s.minWidth,b=0;f>0?b=f:p===-1?(b=this._viewWidth,m=Math.max(m,140)):p===-2?b=e.layout.cellWidth:p>0&&(b=p),b>0?(m>0&&(b=Math.max(m,b)),s.maxWidth>0&&(b=Math.min(b,s.maxWidth)),b=Math.min(b,d),g.width=Math.max(b,m)+"px"):g.removeProperty("width");var C=tt(this._gridContainer),x=n.getBoundingClientRect(),E=n.offsetParent instanceof C.HTMLBodyElement,S=E?{left:0,top:0}:n.offsetParent.getBoundingClientRect(),P=x.left-S.left+(h.right-x.right)+(E?C.scrollX||C.pageXOffset:n.offsetParent.scrollLeft),R=h.bottom-S.top+(E?C.scrollY||C.pageYOffset:n.offsetParent.scrollTop);g.left=Math.max(0,P)+"px",g.top=R+"px",!v.isSlotMode()&&C.addEventListener("pointerdown",this._globalMouseDownHandler,!1),!v.isSlotMode()&&C.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},i.prototype.hide=function(){if(this._opened){v.detach(this._element);var e=tt(this._gridContainer);!v.isSlotMode()&&e.removeEventListener("pointerdown",this._globalMouseDownHandler,!1),!v.isSlotMode()&&e.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},i.prototype._createItemInfo=function(e){this._items=[],this._roots=[],this._visbleItemMap={};for(var t=(e=e instanceof kn?e.items:e).length,o=[],r=0;r<t;r++){var n=e[r],s=n.level;if(this._autoFiltering||n.visible){var l={text:n.toString(),index:r,level:s,filter:n};if(this._items.push(l),n instanceof Gr?l.expanded=this._soptions.expandCategory:l.state=n.active?Gt.ACTIVE:Gt.UNACTIVE,o[s]=l,s>0){var u=o[s-1];l.parent=u,u.childs||(u.childs=[]),u.childs.push(l)}s==0&&this._roots.push(l),this._visbleItemMap[r]=l}}this._calcluateStates(),this._visibleCount=this._calcVisibleItems(),this._dirties=[]},i.prototype._build=function(e,t,o){var r=this._soptions,n=this._applyBatch=r.showButtons,s=this.doc;this._manager.buildItems(e,t,o,!1),this._filters=o?e.autoFilters:e.filters,this._createItemInfo(this._filters),this._headerDiv=s.createElement("div"),this._headerDiv.className="rg-filter-header",r.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var l=this._viewportDiv=s.createElement("div");l.className="rg-filter-list-viewport",l.style.height=r.listHeight+"px",l.addEventListener("scroll",this._scrollHandler),l.addEventListener("wheel",this._wheelHandler),this._listDiv=s.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",l.appendChild(this._listDiv),this._element.appendChild(l),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),n&&this._buildFooter(this._element),this._searched=!1},i.prototype._finalize=function(){var e;this._roots=[],this._visbleItemMap={};for(var t=this._items.length;t--;)this._items[t].filter=null,this._items[t].parent=null,this._items[t].childs=null,this._items[t]=null;for(this._items=[],(e=this._resetDiv)&&(e.removeEventListener("click",this._resetClickHandler),this._resetDiv=v.detach(this._resetDiv)),(e=this._searchDiv)&&(e.removeEventListener("input",this._searchInputHandler),e.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=v.detach(this._searchInput),this._searchDiv=v.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=v.detach(this._selectAllDiv),this._headerDiv=v.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=v.detach(this._confirmButton),this._cancelButton=v.detach(this._cancelButton),this._footerDiv=v.detach(this._footerDiv)),t=this._itemElements.length;t--;)this._removeItem(t);this._itemElements=[];var o=this._viewportDiv;o.removeEventListener("scroll",this._scrollHandler),o.removeEventListener("wheel",this._wheelHandler),this._listDiv=v.detach(this._listDiv),this._viewportDiv=v.detach(this._viewportDiv)},i.prototype._buildSelectAllBox=function(){var e=this.doc,t=this._soptions.allCheckText,o=this._selectAllDiv=e.createElement("div");o.className="rg-filter-select-all",this._soptions.textToTitle&&t&&(o.title=t);var r=this._selectAllCheck=e.createElement("input");r.type="checkbox",r.className="rg-filter-checkbox",this._setCheckState(r,this._allCheck),o.appendChild(r);var n=this._selectAllText=e.createElement("div");n.className="rg-filter-text",n.innerHTML=v.htmlEncode(t),o.appendChild(n);var s=this._columnReset=e.createElement("div");s.className="rg-filter-column-reset",s.innerHTML=v.htmlEncode(this._soptions.filterResetText),o.appendChild(s),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},i.prototype._buildReset=function(e){var t=this.doc,o=this._resetDiv=t.createElement("div");o.className="rg-filter-reset",o.appendChild(t.createTextNode(this._soptions.filtersResetText)),o.addEventListener("click",this._resetClickHandler),e.appendChild(o)},i.prototype._buildItems=function(){var e="temp",t=v.getTextLength(e),o=0;this._filters.items.forEach(function(m){o=Math.max(o,m.level);var b=m.toString();t<v.getTextLength(b)&&(t=v.getTextLength(b),e=b)});var r=this._listDiv,n=r.style;n.display="inline-block";var s=this._buildItemElement(e,0,void 0,"rg-filter-item");s.style.position="relative",r.appendChild(s),this._itemHeight=Math.floor(s.getBoundingClientRect().height),this._viewWidth=Math.floor(s.getBoundingClientRect().width)+15*o+4,r.removeChild(s),n.height="1500px";var l=this._viewportDiv.offsetWidth-this._viewportDiv.clientWidth;n.removeProperty("height");var u=this._visibleCount,h=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(h/this._itemHeight));var d=this._pageCount;n.height=u*this._itemHeight+"px",d<=this._items.length&&(this._viewWidth+=l+2),n.removeProperty("display");var p=u<d?u:d;this._itemElements=[];for(var f=0;f<p;f++){var g=this._visibleItems[f];this._itemElements.push(this._buildItem(g,f))}},i.prototype._buildSearchbox=function(e){var t=this.doc,o=this._searchDiv=t.createElement("div");o.className="rg-filter-searchbox";var r=this._searchInput=this.doc.createElement("input");r.type="text",r.placeholder=this._soptions.searchPlaceholder,r.className="rg-filter-search-input",r.autocomplete="off",r.addEventListener("input",this._searchInputHandler),r.addEventListener("keydown",this._searchKeyDownHandler),o.appendChild(r),e.appendChild(o)},i.prototype._buildFooter=function(e){var t=this.doc;this._footerDiv=t.createElement("div"),this._footerDiv.className="rg-filter-button";var o=this._confirmButton=t.createElement("input");o.type="button",o.className="rg-filter-accept",o.value=this._soptions.acceptText,o.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(o);var r=this._cancelButton=t.createElement("input");r.type="button",r.className="rg-filter-cancel",r.value=this._soptions.cancelText,r.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(r),e.appendChild(this._footerDiv)},i.prototype._buildItem=function(e,t){var o=this._items,r=this._listDiv,n=o[e],s=n.expanded,l=this._buildItemElement(n.text,n.level,n.state,"rg-filter-item",s);return l.filter_id=e+"",l.style.position="absolute",l.style.height=this._itemHeight+"px",l.style.top=t*this._itemHeight+"px",l.addEventListener("click",this._itemClickHandler),r.appendChild(l),l},i.prototype._removeItem=function(e){var t=this._itemElements[e];t.removeEventListener("click",this._itemClickHandler),v.detach(t),this._itemElements.splice(e,1)},i.prototype._buildItemElement=function(e,t,o,r,n){var s,l=this.doc,u=l.createElement("div");r&&(u.className=r,u.tabIndex=-1),this._soptions.textToTitle&&e&&(u.title=e);var h=l.createElement("div");h.className="rg-filter-item-indent-"+t,u.appendChild(h);var d=l.createElement("div"),p="rg-filter-expander";n!==void 0&&(p+=" "+(n?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),d.className=p,u.appendChild(d);var f=l.createElement("input");f.type="checkbox",f.className="rg-filter-checkbox",this._setCheckState(f,o),u.appendChild(f);var g=l.createElement("div");return s=g.style,g.className="rg-filter-text",s.position="relative",s.display="inline",s.pointerEvents="none",g.innerHTML=v.htmlEncode(e),u.appendChild(g),u},i.prototype._calculateState=function(e){for(var t=void 0,o=0,r=e.length;o<r;o++){var n=e[o];if(t&&n.state!=t)return Gt.INDETERMINATE;t=n.state}return t||Gt.UNACTIVE},i.prototype._calcluateStates=function(){for(var e=this._items.length;e--;){var t=this._items[e];t.childs&&(t.state=this._calculateState(t.childs))}},i.prototype._calcVisibleItems=function(){function e(s){for(var l=s.parent;l;){if(!l.expanded)return!1;l=l.parent}return!0}var t=0;this._visibleItems=[];for(var o=0,r=this._items.length;o<r;o++){var n=this._items[o];n.parent&&!e(n)||(t++,this._visibleItems.push(o))}return t},i.prototype._setCheckState=function(e,t){e.checked=t==Gt.ACTIVE,e.indeterminate=t==Gt.INDETERMINATE},i.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},i.prototype._redrawCheck=function(){for(var e=this._itemElements.length;e--;){var t=this._itemElements[e],o=parseInt(t.filter_id),r=this._visbleItemMap[o],n=t.childNodes[i.INDEX_CHECKBOX];this._setCheckState(n,r.state)}},i.prototype._doRedraw=function(e){e===void 0&&(e=0);var t=this._itemElements,o=this._pageCount,r=Math.min(o,this._visibleCount),n=Math.max(0,this._visibleItems.indexOf(e));n+o>this._visibleCount&&(n=Math.max(0,this._visibleCount-o));for(var s=0,l=0;l<r;l++){var u=this._visibleItems[l+n];!t[l]&&l<r&&t.push(this._buildItem(u,l)),this._changeItemModel(t[l],u),s++}for(l=t.length-1;l>s-1;l--)this._removeItem(l);var h=this._visibleCount*this._itemHeight;this._listDiv.style.height=h+"px";var d=this._viewportDiv;d.scrollTop+d.offsetHeight>h&&(d.scrollTop=h-d.offsetHeight)},i.prototype._changeItemModel=function(e,t){var o=tt(e),r=this._items[t];e.filter_id=t+"",this._soptions.textToTitle&&r.text&&(e.title=r.text);for(var n=e.childNodes.length;n--;){var s=e.childNodes.item(n);if(s instanceof o.HTMLElement){var l=s.className;if(l){if(l.indexOf("rg-filter-item-indent-")>-1)s.className="rg-filter-item-indent-"+r.level;else if(l.indexOf("rg-filter-expander")>-1){var u="rg-filter-expander";r.expanded!==void 0&&(u+=" "+(r.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),s.className=u}else if(s instanceof o.HTMLInputElement&&l=="rg-filter-checkbox")this._setCheckState(s,r.state);else if(l.indexOf("rg-filter-text")>=0){var h=v.htmlEncode(r.text),d=this._searchInput?this._searchInput.value:"",p="g"+(this._soptions.searchIgnoreCase?"i":"");h=d?h.replace(new RegExp(d,p),function(f,g,m){return'<span class="rg-filter-search-text">'.concat(f,"</span>")}):h,s.innerHTML="<span>"+h+"</span>"}}}}},i.prototype._doScroll=function(){for(var e=this._itemElements,t=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),o=0,r=e.length;o<r;o++){var n=this._visibleItems[t+o];this._changeItemModel(e[o],n),e[o].style.top=(t+o)*this._itemHeight+"px"}},i.prototype._doSearch=function(e,t){t===void 0&&(t=!0),e?this._createItemInfo(this._manager.search(e)):this._createItemInfo(this._filters),this._selectAllText.textContent=e?this._soptions.searchedCheckText:this._soptions.allCheckText,t&&this._calcAllChecked(),this._doRedraw(),this._searched=!!e},i.prototype._resetActive=function(){for(var e=this._items.length;e--;)this._items[e].state=Gt.UNACTIVE;this._filters.activateAll(!1,!0),this._redrawCheck()},i.prototype._activateAll=function(e){for(var t=!this._applyBatch,o=this._items.length;o--;){var r=this._items[o];r.childs||(r.state=e?Gt.ACTIVE:Gt.UNACTIVE,(!t||this._searched)&&this._dirties.push(r))}if(t&&(this._searched?this._doFilterApply():this._filters.activateAll(e,!0)),this._calcluateStates(),this._itemElements.length){var n=this._itemElements[0].filter_id,s=Math.max(0,this._visibleItems.indexOf(parseInt(n)));this._doRedraw(s)}},i.prototype._doCheck=function(e,t){var o=t?Gt.ACTIVE:Gt.UNACTIVE,r=this._applyBatch||e.childs!==void 0,n=this._applyBatch?this._dirties:[];if(function d(p,f,g,m){if(p.state!=f)if(p.state=f,p.childs)for(var b=p.childs.length;b--;)d(p.childs[b],f,g,m);else g?m.push(p):p.filter.active=t}(e,o,r,n),r&&!this._applyBatch){for(var s=[],l=0,u=n.length;l<u;l++)s.push(n[l].filter.name);s.length>0&&this._filters.activateItems(s,t)}for(var h=e.parent;h;)h.state=this._calculateState(h.childs),h=h.parent;(e.parent||e.childs)&&this._redrawCheck(),this._calcAllChecked()},i.prototype._doFilterApply=function(){this._filters._updating=!0;try{for(var e=this._dirties,t=e.length;t--;){var o=e[t];o.filter.active=o.state==Gt.ACTIVE}this._filters._updating=!1,e.length&&this._filters.changed(e.length==1?e[0].filter:null)}finally{this._filters._updating=!1}this._dirties=[]},i.prototype._doExpand=function(e,t){e.expanded=t,this._visibleCount=this._calcVisibleItems();var o=parseInt(this._itemElements[0].filter_id);this._doRedraw(o)},i.prototype._globalMouseDownHandler=function(e){for(var t=e.target;t;){if(t===this._element)return;t=t.parentElement}this.hide()},i.prototype._globalKeyDownHandler=function(e){e.keyCode==27&&this.hide()},i.prototype._wheelHandler=function(e){var t=e.deltaY;t!==0&&(t=(t>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=t,this._doScroll()),e.preventDefault()},i.prototype._scrollHandler=function(e){this._doScroll()},i.prototype._searchInputHandler=function(e){var t=e.target;t instanceof tt(t).HTMLInputElement&&this._doSearch(t.value)},i.prototype._searchKeyDownHandler=function(e){if(e.keyCode==13&&(this._doSearch(this._searchInput.value),this._searched&&this._soptions.activeWhenEnter&&this._items.length)){var t=this._selectAllCheck;t.checked=!(t.indeterminate=!1),this.$_allCheck(!0)}},i.prototype.$_refreshItem=function(e){for(var t=this._itemElements.length;t--;)this._removeItem(t);this._itemElements=[],this._manager.buildItems(e,e.grid.dataSource,e.autoFilter,!1),this._createItemInfo(e.autoFilters),this._buildItems(),this._dirties=[]},i.prototype._resetClickHandler=function(){var e=this._grid.getFilteredColumns(),t=e.length,o=this._targetColumn,r=this._selectAllCheck;this._setCheckState(r,Gt.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(this._searchInput.value="");for(var n=0;n<t;n++)e[n].activateAllFilters(!1);this._soptions.closeWhenClick?this.hide():o.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(o)},i.prototype.$_allCheck=function(e){this._activateAll(e),this._allCheck=e?Gt.ACTIVE:Gt.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},i.prototype._checkAllClickHandler=function(e){var t=this._selectAllCheck,o=e.target;if(o===this._columnReset){t.checked=t.indeterminate=!1,this._doSearch(this._searchInput.value="",!1);var r=this._targetColumn;this._resetActive(),r.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(r)}else o!==t?(t.checked=!t.checked,t.indeterminate=!1,this.$_allCheck(t.checked)):o===t&&this.$_allCheck(t.checked)},i.prototype._itemClickHandler=function(e){var t=e.target,o=t.className.indexOf("rg-filter-expander")>-1,r=t.className=="rg-filter-checkbox",n=t;t.className!=="rg-filter-item"&&(n=n.parentElement);var s=parseInt(n.filter_id),l=this._visbleItemMap[s];if(o)l.expanded!==void 0&&this._doExpand(l,!l.expanded);else{var u=void 0;r?u=t:(u=n.children.item(i.INDEX_CHECKBOX)).checked=!u.checked,this._doCheck(l,u.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()}},i.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},i.prototype._cancelClickHandler=function(){this.hide()},i.INDEX_CHECKBOX=2,i}(Mt),Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof cu<"u"?cu:typeof self<"u"?self:{},Jc={};function Lm(a,i){return a==i||a.indexOf("*")===0&&(a=a.substr(1,a.length-1),i.substr(i.indexOf(a),a.length)==a)}function Fm(a,i,e){for(var t=a.split(","),o=0,r=t.length;o<r;o++){var n=t[o];if(Lm(n,i)||e&&n&&n[0]==="*"&&n.substr(0,1)!=="*."&&new RegExp("^/"+n.substr(1)+"/").exec(e))return!0}return!1}(function(a){var i,e=Xc&&Xc.__extends||(i=function(h,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(p[g]=f[g])})(h,d)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function p(){this.constructor=h}i(h,d),h.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(a,"__esModule",{value:!0}),a.h=a.r=void 0;var t=function(){function h(){}return h.encode=function(d){for(var p=h.CHARACTERS,f=[],g=d.length,m=g%3,b=g-m,C=0;C<b;){var x=d[C++]<<16|d[C++]<<8|d[C++];f.push(p.charAt(x>>>18&63)),f.push(p.charAt(x>>>12&63)),f.push(p.charAt(x>>>6&63)),f.push(p.charAt(63&x))}switch(m){case 2:x=d[b++]<<16|d[b++]<<8,f.push(p.charAt(x>>>18&63)),f.push(p.charAt(x>>>12&63)),f.push(p.charAt(x>>>6&63)),f.push(h.SUFFIX);break;case 1:x=d[b++]<<16,f.push(p.charAt(x>>>18&63)),f.push(p.charAt(x>>>12&63)),f.push(h.SUFFIX),f.push(h.SUFFIX)}return f.join("")},h.decode=function(d){for(var p=h.CHARACTERS,f=h.SUFFIX,g=d.split(""),m=[],b=g.length;g[--b]===f;);for(var C=0;C<b;){var x=p.indexOf(g[C++])<<18;C<=b&&(x|=p.indexOf(g[C++])<<12),C<=b&&(x|=p.indexOf(g[C++])<<6),C<=b&&(x|=p.indexOf(g[C++])),m.push(x>>>16&255),m.push(x>>>8&255),m.push(255&x)}for(;m[m.length-1]===0;)m.pop();return m},h.SUFFIX="=",h.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h}(),o=function(){function h(){}return h.union=function(d,p){var f=p.s3[255&d],g=p.s2[255&(d>>=8)],m=p.s1[255&(d>>=8)];return((m=((m=((d=p.s0[255&(d>>=8)])>>16)+(m>>16)+((65535&d)+(65535&m)>>16)<<16|(65535&d)+(65535&m)&65535)>>16^g>>16)<<16|65535&(65535&m^65535&g))>>16)+(f>>16)+((65535&m)+(65535&f)>>16)<<16|(65535&m)+(65535&f)&65535},h.xor=function(d,p){return(d>>16^p>>16)<<16|65535&(65535&d^65535&p)},h._encryptBlock=function(d,p){var f=d.left,g=d.right,m=h.xor,b=h.union;f=m(f,p.p[0]),g=m(g,m(b(f,p),p.p[1])),f=m(f,m(b(g,p),p.p[2])),g=m(g,m(b(f,p),p.p[3])),f=m(f,m(b(g,p),p.p[4])),g=m(g,m(b(f,p),p.p[5])),f=m(f,m(b(g,p),p.p[6])),g=m(g,m(b(f,p),p.p[7])),f=m(f,m(b(g,p),p.p[8])),g=m(g,m(b(f,p),p.p[9])),f=m(f,m(b(g,p),p.p[10])),g=m(g,m(b(f,p),p.p[11])),f=m(f,m(b(g,p),p.p[12])),g=m(g,m(b(f,p),p.p[13])),f=m(f,m(b(g,p),p.p[14])),g=m(g,m(b(f,p),p.p[15])),f=m(f,m(b(g,p),p.p[16])),d.right=f,d.left=m(g,p.p[17])},h._decryptBlock=function(d,p){var f=d.left,g=d.right,m=h.xor,b=h.union;f=m(f,p.p[17]),g=m(g,m(b(f,p),p.p[16])),f=m(f,m(b(g,p),p.p[15])),g=m(g,m(b(f,p),p.p[14])),f=m(f,m(b(g,p),p.p[13])),g=m(g,m(b(f,p),p.p[12])),f=m(f,m(b(g,p),p.p[11])),g=m(g,m(b(f,p),p.p[10])),f=m(f,m(b(g,p),p.p[9])),g=m(g,m(b(f,p),p.p[8])),f=m(f,m(b(g,p),p.p[7])),g=m(g,m(b(f,p),p.p[6])),f=m(f,m(b(g,p),p.p[5])),g=m(g,m(b(f,p),p.p[4])),f=m(f,m(b(g,p),p.p[3])),g=m(g,m(b(f,p),p.p[2])),f=m(f,m(b(g,p),p.p[1])),d.right=f,d.left=m(g,p.p[0])},h._init=function(d){for(var p,f=d.split("").map(function(P){return 255&P.charCodeAt(0)}),g=(d=h.kb,h._encryptBlock),m=0,b=0,C={left:0,right:0},x={p:d.p.slice(0).map(function(P){for(var R=f.length,k=0;k<4;k++)b=b*h.POW8|f[m++%R];return(P>>16^b>>16)<<16|65535&(65535&P^65535&b)}),s0:d.s0.slice(0),s1:d.s1.slice(0),s2:d.s2.slice(0),s3:d.s3.slice(0)},E=0,S=x.p.length;E<S;)g(C,x),x.p[E++]=C.left,x.p[E++]=C.right;for(E=0;E<4;E++)for(p=0,S=x["s"+E].length;p<S;)g(C,x),x["s"+E][p++]=C.left,x["s"+E][p++]=C.right;return x},h.encrypt=function(d,p){for(var f=h._encryptBlock,g=h._init(p),m=8-(7&d.length),b=0;b<m;b++)d+=String.fromCharCode(m);var C=0,x=[],E=d.length>>3,S={left:null,right:null};for(b=0;b<E;b++)S.left=d.charCodeAt(C)*h.POW24|d.charCodeAt(C+1)*h.POW16|d.charCodeAt(C+2)*h.POW8|d.charCodeAt(C+3),S.right=d.charCodeAt(C+4)*h.POW24|d.charCodeAt(C+5)*h.POW16|d.charCodeAt(C+6)*h.POW8|d.charCodeAt(C+7),f(S,g),x.push(S.left>>24&255),x.push(S.left>>16&255),x.push(S.left>>8&255),x.push(255&S.left),x.push(S.right>>24&255),x.push(S.right>>16&255),x.push(S.right>>8&255),x.push(255&S.right),C+=8;return t.encode(x)},h.decrypt=function(d,p){for(var f=h._decryptBlock,g=h._init(p),m=[],b=t.decode(d),C=0,x=b.length>>3,E={left:null,right:null},S=0;S<x;S++){E.left=b[C]*h.POW24|b[C+1]*h.POW16|b[C+2]*h.POW8|b[C+3],E.right=b[C+4]*h.POW24|b[C+5]*h.POW16|b[C+6]*h.POW8|b[C+7],f(E,g);var P=E.left,R=E.right;m.push(P>>24&255),m.push(P>>16&255),m.push(P>>8&255),m.push(255&P),m.push(R>>24&255),m.push(R>>16&255),m.push(R>>8&255),m.push(255&R),C+=8}return m[m.length-1]!==m[m.length-2]&&m[m.length-1]!==1||(d=m[m.length-1],m.splice(m.length-d,d)),m.map(function(k){return String.fromCharCode(k)}).join("")},h.POW2=Math.pow(2,2),h.POW3=Math.pow(2,3),h.POW4=Math.pow(2,4),h.POW8=Math.pow(2,8),h.POW16=Math.pow(2,16),h.POW24=Math.pow(2,24),h.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},h}(),r="dkdl",n=function(){function h(d){this._gk=d??r}return h.prototype._ldk=function(d){for(var p="",f=0,g=d.length;f<g;f++)p+=String.fromCharCode(d[f]>>1);return p},h.prototype.get=function(){return this._gk+this._ldk(o.kb.k)},h}(),s=function(){function h(){}return h.run=function(d,p){return p=new n(p).get(),o.encrypt(d,p)},h}();a.r=s;var l=function(h){function d(){var p=h.call(this)||this;return Object.setPrototypeOf(p,d.prototype),p}return e(d,h),d}(Error),u=function(){function h(d,p){this._gk=p,this._code=d,this._lic=this.run()}return h.prototype.run=function(){for(var d={},p=o.decrypt(this._code,new n(this._gk).get()).split(";"),f=0,g=p.length;f<g;f++){var m,b=(m=p[f].split("="))[0];(m=m[1])&&0<m.length&&(d[b]=m)}return d},Object.defineProperty(h.prototype,"lic",{get:function(){return this._lic},enumerable:!1,configurable:!0}),h.prototype.is=function(d,p){return d in this._lic&&this._lic[d]===p},h.prototype.includes=function(d,p){return d in this._lic&&0<=p.indexOf(this._lic[d])},h.prototype.expired=function(d,p){return!(d in this._lic)||!this._lic[d]||(d=this._lic[d],p=(p?new Date(new Date(d).setMonth(new Date(d).getMonth()+p)):new Date(d)).getTime(),d=Date.now(),!isNaN(p)&&p<d)},h.prototype.validate=function(d){var p=this,f=!1;try{d.forEach(function(g){var m=Object.keys(g),b=Object.values(g);m.forEach(function(C,x){if(x=b[x],!(f=Array.isArray(x)?p.includes(C,x):p.is(C,x)))throw new l})})}catch(g){if(!(g instanceof l))throw g;f=!1}return f},h}();a.h=u})(Jc);var Nm=function(){var a;try{if(!(a=I.code||realGrid2Lic))return 1}catch{return 1}var i=null;try{if(!(i=new Jc.h(a,"dkdl")))return 1}catch{return 1}if(!i.is("name",I.name))return 2;var e=window==null?void 0:window.location,t=e?e.hostname:"",o=e?e.pathname.toLowerCase():"",r=Fm,n=i.is("lic","Enterprise"),s=i.is("lic","Evaluation"),l=i.is("lic","Limited"),u=i.is("lic","Subscription"),h=r(i.lic.server,t,o),d=!n&&r(i.lic.server,"*",null);return n||s||l||u?h||d?!n&&i.expired("expire",1)?d?32:16:(I.license=i.lic.lic,I.expire=i.lic.expire,0):8:64},Am=function(a){function i(e){var t=a.call(this,"rowGroupHeaderCell")||this;return t._rowGroup=e,t}return w(i,a),i.prototype._doDispose=function(){this._rowGroup=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this.item instanceof Ht?this._rowGroup.getHeaderText(this.item):""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),i}(li),Lo=function(a){function i(e){var t=a.call(this,"rowGroupFooterCell")||this;return t._footerIndex=0,t._value=NaN,t._rowGroup=e,t}return w(i,a),i.$_getValue=function(e,t){if(t&&t.dataIndex>=0){var o=t.grid,r=e.parent,n=r.getFooterIndex(e),s=t.groupFooters.get(n),l=s&&s.expression,u=s&&s.valueCallback;if(l||u){var h=null;if(l){var d=o.rowGroupSummaryRuntime;d.setColumn(t,t.grid.summarizer),d.setItem(r),h=s.evaluate(d)}return u?u(o.handler,t,n,r,h):h}if(r&&o.isGroupedColumn(t)){var p=o.rowGroup.getFooterText(r);return p??void 0}}},i.getValue=function(e,t){try{return i.$_getValue(e,t)}catch{return li.ERROR}},i.$_displayText=function(e,t,o,r){var n="";if(o!==void 0&&t){if(o instanceof Date){var s=r.datetimeWriter;n=s?s.getText(o):String(o)}else if(typeof o=="number"){var l=r.numberFormatter;n=l?l.getText(o):isNaN(o)?"":String(o)}else typeof o=="string"?n=o+"":typeof o=="boolean"&&(n=String(o));if(n){var u=r.prefix;u&&(n=u+n),(u=r.suffix)&&(n+=u)}}if(!n){var h=v.cast(e.parent,Ht);if(t){var d=t.groupFooters.get(h.getFooterIndex(e));d&&(n=d.text)}}return n||""},i.prototype._doDispose=function(){this._rowGroup=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this._footerIndex},enumerable:!1,configurable:!0}),i.prototype.calculate=function(e){this._value=NaN,this._error=null;try{this._value=i.$_getValue(this.index.item||e,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,v.log("FOOTER ERROR: "+t)}},i.prototype.getDisplayText=function(e){return this._error?li.ERROR:i.$_displayText(this.index.item,this.index.dataColumn,this._value,e)},i.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},i.prototype.getTemplate=function(e){var t=this._getSummary(this.valueColumn,this._footerIndex);return t?t.realizeGroupSummary(this,e):void 0},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this.index.item.level},enumerable:!1,configurable:!0}),i.prototype.setIndex=function(e){a.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},i.prototype._getSummary=function(e,t){return e.groupFooters.get(t)},i}(li),Bm=function(a){function i(){var e=a.call(this,"rowGroupBarCell")||this;return e._level=0,e}return w(i,a),Object.defineProperty(i.prototype,"level",{get:function(){return this.item.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"getText",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),i}(li),jl=function(a){function i(e){var t=a.call(this)||this;return t._index=0,t.$_owner=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!==this._styleCallback&&(this._styleCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},i}(me),$m=function(a){function i(e){var t=a.call(this)||this;return t._items=[],t._owner=e,t._items.push(new jl(t)),t.assignFrom(Re.rowGroup.footers),t}return w(i,a),i.prototype._doDispose=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].dispose();this._items=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},set:function(e){e=Math.max(e,1);var t=this._items;if(e!==t.length){for(var o=void 0;t.length<e;)(o=new jl(this))._index=t.length,t.push(o);for(;t.length>e;)(o=t.pop()).dispose();this.$_itemChanged(null)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),i.prototype.get=function(e){return this._items[e]},i.prototype.assignFrom=function(e){a.prototype.assignFrom.call(this,e);var t=this._items,o=e&&e.items?v.makeArray(e.items,!0):e;if(Array.isArray(o))for(var r=Math.max(o.length,1),n=0;n<r;n++)t[n]||(t[n]=new jl(this)),t[n].assignFrom(o[n]),t[n]._index=n;else t[0].assignFrom(o),t[0]._index=0;this.$_itemChanged(null)},i.prototype.$_itemChanged=function(e){this._owner&&this._owner.rowGroupFooterChanged(e)},i}(me),Hl=function(a){function i(e){var t=a.call(this,e)||this;return t._mergeMode=!1,t._sorting=!0,t._expandedAdornments=c.RowGroupAdornments.BOTH,t._collapsedAdornments=c.RowGroupAdornments.HEADER,t._indentVisible=!0,t._levelIndent=20,t._mergeHeaderIndenting=!0,t._mergeFooterIndenting=!0,t._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",t._expanderVisibility=c.ExpanderVisibility.DEFAULT,t._headerCell=new Am(t),t._footerCell=new Lo(t),t._barCell=new Bm,t._headerStatementExpr=new ys(t._headerStatement),t._footerStatementExpr=new ys,t._statementRuntime=new ng,t._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._footers=new $m(t),t.assignFrom(Re.rowGroup),t}return w(i,a),i.prototype._doDispose=function(){this._footers=this._footers.dispose(),a.prototype._doDispose.call(this)},i.prototype.rowGroupFooterChanged=function(e){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},i.prototype.getGroupFooterCount=function(e){return this._footers.count},i.prototype.setCounterAware=function(e){this._counterAware=e},Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(e){e!=this._mergeMode&&(this._mergeMode=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorting",{get:function(){return this._sorting},set:function(e){e!=this._sorting&&(this._sorting=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(e){e!=this._expandedAdornments&&(this._expandedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!==c.RowGroupAdornments.NONE&&e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(e){e!==this._createFooterCallback&&(this._createFooterCallback=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},set:function(e){e!=this._indentVisible&&(this._indentVisible=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(e){(e=Math.max(0,e))!=this._levelIndent&&(this._levelIndent=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(e){e!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(e){e!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},set:function(e){this.setFooters(e)},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(e){this._footers.assignFrom(e)},Object.defineProperty(i.prototype,"headerStatement",{get:function(){return this._headerStatement},set:function(e){e!==this._headerStatement&&(this._headerStatement=e,this._headerStatementExpr.source=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerCallback",{get:function(){return this._headerCallback},set:function(e){this._headerCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerStatement",{get:function(){return this._footerStatement},set:function(e){e!=this._footerStatement&&(this._footerStatement=e,this._footerStatementExpr.source=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(e){this.expanderVisibility=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(e){e!==this.expanderVisibility&&(this._expanderVisibility=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(e){this._expanderVisibleCallback=e,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(e){this._valueForGroupCallback=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()},enumerable:!1,configurable:!0}),i.prototype.getHeaderCell=function(e){return this._headerCell.setIndex(le.temp(this.owner,e.index)),this._headerCell},i.prototype.getFooterCell=function(e){var t=e.item;return this._footerCell.setIndex(e),this._footerCell.calculate(t),this._footerCell},i.prototype.getFooterStyleName=function(e){var t=this._footers.get(e.$_footerIndex),o="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(e.parent.level),r=t.styleName,n=t.styleCallback;return r&&(o+=" "+r),n&&(r=n(this._grid.handler,e.index,t.index))&&(o+=" "+r),o},i.prototype.getFooterCellStyle=function(e,t,o){o===void 0&&(o=!0);var r=e.footerIndex,n=this._footers.get(r).cellStyleCallback,s=e.index.column.groupFooters.get(e.footerIndex);if(n){var l=n(this._grid.handler,e);t.assign(l)}if(s){var u=s.styleCallback;if(u){var h=u(this._grid.handler,e);t.assign(h)}}return!t.styleName&&s&&(t.styleName=s.styleName),o&&(t.styleName?t.styleName=i.FOOTER_CELL_STYLE+" "+t.styleName:t.styleName=i.FOOTER_CELL_STYLE),t},i.prototype.getFooterCellFormatters=function(e,t){return t&&e?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):e&&((t=this._footerFormatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),t},i.prototype.getBarCell=function(e){return this._barCell.setIndex(e),this._barCell},i.prototype.getHeaderText=function(e){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,e):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(e),this._headerStatementExpr.evaluate(this._statementRuntime))},i.prototype.getFooterText=function(e){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(e),this._footerStatementExpr.evaluate(this._statementRuntime)},i.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},i.prototype.$_isMultiLine=function(e){var t=e.visible?1:0,o=e.footerCount;if((t+=Math.max(e.descendantCount,e.count)-o)>1)return!0;for(var r=0;r<o;r++)if(e.getFooter(r).visible&&++t>1)return!0;return!1},i.prototype.$_isExpanderVisible=function(e){if(!e.expanded)return!0;if(this._expanderVisibleCallback){var t=this._expanderVisibleCallback.call(this._grid,this._grid.handler,e);return t==null||t}switch(this._expanderVisibility){case c.ExpanderVisibility.NONE:return!1;case c.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(e)}},i.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",i.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",i}(Yo),Vm=function(a){function i(e){var t=a.call(this,e.doc,"gridDebugLayer")||this;return t._owner=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype.layout=function(){var e=this._owner.layoutManager;this.$_setBounds(this._grid,e.gridBounds.clone().inflate(-1,-1));var t=e.dataBounds.clone();t.offset(e.contentBounds.x,e.contentBounds.y),this.$_setBounds(this._data,t)},i.prototype._getCssSelector=function(){return"rg-debug-layer"},i.prototype._initDom=function(e){var t=e.style,o=xe(e);t.position="absolute",e.appendChild(this._client=this.$_createElement(o,"Client")),e.appendChild(this._topContent=this.$_createElement(o,"Top Content")),e.appendChild(this._leftContent=this.$_createElement(o,"Left Content")),e.appendChild(this._fixedContent=this.$_createElement(o,"Fixed Content")),e.appendChild(this._content=this.$_createElement(o,"Content")),e.appendChild(this._rightContent=this.$_createElement(o,"Right Content")),e.appendChild(this._grid=this.$_createElement(o,"Grid Bounds","b")),e.appendChild(this._data=this.$_createElement(o,"Data Bounds","g")),e.appendChild(this._nonFixed=this.$_createElement(o,"Non Fixed","g"))},i.prototype.$_createElement=function(e,t,o){o===void 0&&(o="r");var r=e.createElement("span"),n=r.style;return n.display="inline-block",n.position="absolute",n.boxSizing="border-box",n.pointerEvents="none",o=="b"?(n.border="2px dashed rgba(0, 0, 255, 0.5)",n.color="blue"):o=="g"?(n.paddingTop="20px",n.border="2px solid rgba(0, 128, 0, 0.5)",n.color="rgb(0, 128, 0)"):(n.border="1px solid rgba(255, 0, 0, 0.7)",n.color="red"),n.fontWeight="bold",n.textAlign="center",n.verticalAlign="middle",n.whiteSpace="normal",r[v.TextProp]=t,r},i.prototype.$_setBounds=function(e,t){var o=e.style;t.isEmpty?o.display="none":(o.display="inline-block",o.left=t.x+"px",o.top=t.y+"px",o.width=t.width+"px",o.height=t.height+"px",o.lineHeight=t.height+"px")},i}(Ft);(function(a){function i(){var e=a.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}w(i,a),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(e){this._min=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(e){this._max=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e},enumerable:!1,configurable:!0}),i.prototype.execute=function(e){if(e){this._runner=e,this._next=this._min;var t=tt(e.container);e.container instanceof t.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(e.container)),this.$_runNext()}},i.prototype.$_runNext=function(){if(this._next<this._max){var e=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,e),this._next<this._max)return void setTimeout((function(){this.$_runNext()}).bind(this),0)}!this._completed&&this.$_complete()},i.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}})(Mt);var Ws,jm=function(a){function i(e){var t=a.call(this)||this;t._message="Load data...",t._min=0,t._max=0,t._pos=0;var o=xe(e);return t._dom=t.$_createElement(o),t}return w(i,a),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._pos},enumerable:!1,configurable:!0}),i.prototype.setPosition=function(e,t){(e=Math.max(this._min,Math.min(this._max,e)))!=this._pos&&(this._pos=e,this._message=t,this.$_refreshView())},i.prototype.setProperties=function(e,t,o,r,n){r===void 0&&(r=null),n===void 0&&(n=!1),this._min=e,this._max=Math.max(e,t),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,o)),this._message=r,n&&this.$_refreshView()},i.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e+5)},i.prototype.show=function(e,t){t===void 0&&(t=null),this._container=e,t&&this.$_setMessage(t),e.appendChild(this._dom);var o=e.getBoundingClientRect(),r=v.getSize(this._dom);v.move(this._dom,(o.width-r.width)/2,(o.height-r.height)/3)},i.prototype.close=function(){v.detach(this._dom)},i.prototype.$_createElement=function(e){var t=e.createElement("div");t.className="rg-progress";var o=t.style;return o.position="absolute",o.zIndex="3001",o.minWidth="250px",o.padding="8px 10px",t.appendChild(t.$_bar=this.$_createBar(e)),t.appendChild(t.$_msg=this.$_createMsg(e)),t},i.prototype.$_createBar=function(e){var t=e.createElement("div");t.className="rg-progress-bar";var o=t.style;o.width="100%",o.height="13px",o.marginBottom="4px";var r=e.createElement("div");return r.className="rg-progress-progress",(o=r.style).height="100%",o.width="0px",t.appendChild(t.$_led=r),t},i.prototype.$_createMsg=function(e){var t=e.createElement("div"),o=e.createElement("span");o.className="rg-progress-message";var r=t.style;return r.width="100%",r.textAlign="center",t.appendChild(t.$_span=o),t},i.prototype.$_refreshView=function(){var e=this._dom,t=e.$_bar,o=t.$_led;e.$_msg.$_span.innerHTML=v.htmlEncode(this._message);var r=v.getSize(t);o.style.width=Math.min(r.width-1,Math.floor(r.width*(this._pos-this._min)/(this._max-this._min)))+"px"},i.prototype.$_setMessage=function(e){this._dom.$_msg.$_span.innerHTML=v.htmlEncode(this._message)},i}(Mt),Hm=function(a){function i(e){var t=a.call(this)||this;return t._container=e,t}return w(i,a),i.prototype.show=function(e,t,o){this._view||(this._view=new jm(e)),this._view.setZIndex(o),this._view.show(e||this._container,t||"Load data...")},i.prototype.close=function(){this._view&&this._view.close()},i.prototype.setProperties=function(e,t,o,r){this._view&&(r||(r=this._title||"Load data... ",t>e&&(r+=Math.floor(100*(o-e)/(t-e))+"% ("+o+" / "+t+")")),this._view.setProperties(e,t,o,r,!0))},i.prototype.showLoader=function(e,t){this._loaderView||(this._loaderView=new Gm(e)),this._loaderView.setZIndex(t),this._loaderView.show(e||this._container)},i.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},i.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()},i}(Mt),Gm=function(a){function i(e){var t=a.call(this)||this,o=xe(e);return t._dom=t.$_createElement(o),t}return w(i,a),i.prototype.show=function(e){e.appendChild(this._dom)},i.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e+5)},i.prototype.close=function(){v.detach(this._dom)},i.prototype.isShowing=function(){return!!this._dom.parentElement},i.prototype.$_createElement=function(e){var t=e.createElement("div");return t.className="rg-load-indicator",t.style.position="absolute",t},i}(Mt),Wm=function(a){function i(e){var t=a.call(this,e)||this;return t._title="  (     )",t._description="${columns}    .",t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(e){this._description!==e&&(this._description=e)},enumerable:!1,configurable:!0}),i.prototype.getDescription=function(){var e,t=this.title?"<strong>"+this.title+"</strong>":"",o="";if(e=this.grid){var r=e.layoutManager.cellLayouts._dataCells,n=r&&r[0];n&&n.forEach(function(s){s.isProxy||(o+=s.displayText+", ")})}return t+(o=this.description?"<span>"+this.description.replace("${columns}",o.substr(0,o.length-2))+"</span>":"")},i}(hi),Um=function(a){function i(e){var t=a.call(this,e.doc,"watermark")||this;return t._grid=e,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e},enumerable:!1,configurable:!0}),i.prototype.refresh=function(){var e=this._grid.container._lkCheck===32;if(e){this._active=!0;var t=this._dom;t&&!t.parentElement&&this._grid._dom.appendChild(t),this.$_setDiv(t,e),this.$_setSpan(this._span,e,this.message||On.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0}},i.prototype._getCssSelector=function(){return"rg-watermark-layer"},i.prototype._initDom=function(e){var t=xe(e);e.appendChild(this._span=this.$_createElement(t,""))},i.prototype._setSizeStyle=function(e){var t=this._active;e.width=t?"100%":"0px",e.height=t?"100%":"0px"},i.prototype.$_setDiv=function(e,t){var o=e.style;o.position="absolute",o.zIndex="1",t?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),o.removeProperty("pointer-events")):o.pointerEvents="none"},i.prototype.$_setSpan=function(e,t,o){var r=e.style;t&&(r.display="inline-block",r.position="absolute",r.boxSizing="border-box",r.pointerEvents="none",r.fontWeight="bold",r.textAlign="center",r.verticalAlign="middle",r.whiteSpace="normal",r.top="50%",r.left="50%",r.transform="translate(-50%, -50%)",r.fontSize="50px",e[v.TextProp]=o)},i.prototype.$_createElement=function(e,t){return e.createElement("span")},i}(Ft),Zc=function(a){function i(){return a.call(this,"filterPanelCell")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i}(li),zm=function(a){function i(e){var t=a.call(this,e)||this;return t._showInput=!0,t._height=23,t._minRowHeight=23,t._filterDelay=500,t._ignoreCase=!0,t._trimData=!1,t._beforeCommit=!0,t._defaultNumberOperator=c.InlineFilterOperator.GREATER_EQUAL,t._defaultTextOperator=c.InlineFilterOperator.CONTAINS,t._defaultDateOperator=c.InlineFilterOperator.GREATER_EQUAL,t.visible=!1,t.assignFrom(Re.filterPanel),t._cell=new Zc,t}return w(i,a),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(e){e!==this._height&&(this._height=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){e!==this._minRowHeight&&(this._minRowHeight=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInput",{get:function(){return this._showInput},set:function(e){e!=this._showInput&&(this._showInput=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreCase",{get:function(){return this._ignoreCase},set:function(e){e!==this._ignoreCase&&(this._ignoreCase=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterDelay",{get:function(){return this._filterDelay},set:function(e){this._filterDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"beforeCommit",{get:function(){return this._beforeCommit},set:function(e){e!=this._beforeCommit&&(this._beforeCommit=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOperators",{get:function(){if(!i.$_DefaultTextOperators){var e=ye.messages;i.$_DefaultTextOperators={contains:e.filterOperatorContains,notContains:e.filterOperatorNotContains,startsWith:e.filterOperatorStartsWith,endsWith:e.filterOperatorEndsWith,equal:e.filterOperatorEqual,notEqual:e.filterOperatorNotEqual,empty:e.filterOperatorEmpty,reset:e.filterOperatorReset}}return this._textOperators||i.$_DefaultTextOperators},set:function(e){this._grid.closePopups(!1);var t=this.$_setOperators(e);t&&(this._textOperators=t),this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberOperators",{get:function(){if(!i.$_DefaultNumberOperators){var e=ye.messages;i.$_DefaultNumberOperators={equal:e.filterOperatorEqual,notEqual:e.filterOperatorNotEqual,greater:e.filterOperatorGreater,greaterEqual:e.filterOperatorGreaterEqual,lower:e.filterOperatorLower,lowerEqual:e.filterOperatorLowerEqual,between:e.filterOperatorBetween,empty:e.filterOperatorEmpty,reset:e.filterOperatorReset}}return this._numberOperators||i.$_DefaultNumberOperators},set:function(e){this._grid.closePopups(!1);var t=this.$_setOperators(e);t&&(this._numberOperators=t),this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateOperators",{get:function(){if(!i.$_DefaultDateOperators){var e=ye.messages;i.$_DefaultDateOperators={contains:e.filterOperatorContains,notContains:e.filterOperatorNotContains,startsWith:e.filterOperatorStartsWith,endsWith:e.filterOperatorEndsWith,equal:e.filterOperatorEqual,notEqual:e.filterOperatorNotEqual,greater:e.filterOperatorGreater,greaterEqual:e.filterOperatorGreaterEqual,lower:e.filterOperatorLower,lowerEqual:e.filterOperatorLowerEqual,empty:e.filterOperatorEmpty,reset:e.filterOperatorReset}}return this._dateOperators||i.$_DefaultDateOperators},set:function(e){this._grid.closePopups(!1);var t=this.$_setOperators(e);t&&(this._dateOperators=t),this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimData",{get:function(){return this._trimData},set:function(e){e!==this._trimData&&(this._trimData=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelCallback",{get:function(){return this._filterPanelCallback},set:function(e){this._filterPanelCallback=e},enumerable:!1,configurable:!0}),i.prototype.getPopup=function(e){switch(e.valueType){case c.ValueType.DATE:case c.ValueType.DATETIME:return this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!1);case c.ValueType.NUMBER:case c.ValueType.UINT:case c.ValueType.INT:case c.ValueType.UNUM:return this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!1);case c.ValueType.TEXT:case c.ValueType.CHAR:return this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!1)}},i.prototype.clearInput=function(e){(typeof e!="string"||(e=this._grid.columnByName(e)))&&this._grid.clearInlineFilter(e)},i.prototype.getCell=function(e){var t=this._cell,o=e.getDataColumn();return t.index.set(-1,o),t.showInput=!!o&&o.filterable&&(this.showInput?o.showInlineFilter!==!1:o.showInlineFilter),t.filterOperator=o._inlineFilterOp||this.$_getDefaultOperator(o),t.filterText=o._inlineFilterText||"",t},i.prototype.assignFrom=function(e){a.prototype.assignFrom.call(this,e)},i.prototype._doChanged=function(){this._grid&&this._grid.invalidatePosition()},i.prototype.$_getPopup=function(e,t,o){var r=this._grid,n=r.popupMenuManager,s=n.getMenu(e);if(!s||o){for(var l=[],u=Object.keys(t),h=r.filterOperatorCallback.bind(r),d=0,p=u;d<p.length;d++){var f=p[d],g=new Wn(null,{label:t[f],tag:f,styleName:"rg-inline-filter-icon rg-inline-filter-".concat(v.camelToHyphen(f)),callback:h});l.push(g)}s=n.addMenu(e,l,!0,null)}return s.name},i.prototype.$_getDefaultOperator=function(e){switch(e.valueType){case c.ValueType.DATE:case c.ValueType.DATETIME:return this._defaultDateOperator;case c.ValueType.NUMBER:case c.ValueType.UNUM:case c.ValueType.UINT:case c.ValueType.INT:return this._defaultNumberOperator;case c.ValueType.CHAR:case c.ValueType.TEXT:return this._defaultTextOperator}},i.prototype._createCell=function(){return new Zc},i.prototype.$_setOperators=function(e){var t,o=Object.keys(e),r=!1;if(o.length>0){var n=Object.keys(c.InlineFilterOperator);t={};for(var s=0;s<o.length;s++)for(var l=o[s],u=0;u<n.length;u++)c.InlineFilterOperator[n[u]].toLowerCase()==l.toLowerCase()&&(t[c.InlineFilterOperator[n[u]]]=e[l],r=!0)}return r&&t?t:null},i.$_TEXT_POPUP="$$_textOperators_$$",i.$_NUMBER_POPUP="$$_numberOperators_$$",i.$_DATE_POPUP="$$_dateOperators_$$",i}(Yo),Ym=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e.input=null,e.operatorButton=null,e.popupMenu=null,e}return w(i,a),i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(e){return a.prototype.clear.call(this,e),this.className&&(this.cell.className=this.className=""),this},i.prototype.setOperator=function(e){this.setClass(e),this.setPlaceHolder(e)},i.prototype.setClass=function(e){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(e?" rg-inline-filter-".concat(v.camelToHyphen(e)):""))},i.prototype.setPlaceHolder=function(e){this.input&&(this.input.placeholder=e===c.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},i.prototype.setFocus=function(){this.input.focus()},i}(Cr),Us=function(a){function i(e,t){var o=a.call(this,e,t,"filterPanelView")||this;return o._rowPoints=[],o._cells=[],o}return w(i,a),i.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var t=this._cells[e],o=0;o<t.length;o++)t[o].dispose(),t[o]=null;this._cells=null,a.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++){var n=o[r];if(n&&n.cell===e)return n}},i.prototype.tableCellByLayout=function(e){for(var t=0;t<this._cells.length;t++)for(var o=this._cells[t],r=0;r<o.length;r++)if(o[r].layout===e)return o[r]},i.prototype.layoutByCell=function(e){var t=this.tableCellByCell(e);return t&&t.layout},i.prototype.columnByCell=function(e){var t=this.layoutByCell(e);return t&&t._columnObj},i.prototype.operatorChange=function(e,t,o,r){var n=t.tag,s=o.getDataColumn(),l=this.model.getCell(o);n===c.InlineFilterOperator.RESET&&(e.input.value="",n=l.filterOperator),e.setOperator(n),this._filterRun(this.model,e.input.value,n,s)},i.prototype.clearInput=function(e,t){if(e)e.input.value="",this._filterRun(this.model,"",void 0,t);else for(var o=0,r=this._cells.length;o<r;o++)for(var n=0,s=this._cells[o].length;n<s;n++){(e=this._cells[o][n]).input.value="";var l=e.layout.getDataColumn();l._inlineFilterText="",l&&l.setInlineFilter(void 0,!1)}},i.prototype.setFocus=function(e){e.setFocus()},i.prototype._getCssSelector=function(){return"rg-filter-panel"},i.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},i.prototype._getTableRowCount=function(e){return e.dataRows},i.prototype._getTableRowHeight=function(e,t){return this._rowPoints[t+1]-this._rowPoints[t]},i.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},i.prototype._doPrepareTableRow=function(e,t,o,r){a.prototype._doPrepareTableRow.call(this,e,t,o,r)},i.prototype._prepareCellContent=function(e,t){var o=xe(e).createElement("div");return o.className=this._getRendererStyle(),o},i.prototype._doMeasure=function(e,t,o){for(var r=e.layoutManager.dataRows,n=Math.max(e.filterPanel.height,e.filterPanel.minRowHeight*r),s=0,l=this._rowPoints=[s],u=0;u<r-1;u++)l.push(s+=Math.round(n/r));return l.push(s=n),vo.create(t,s)},i.prototype._doPrepareTableExtents=function(e){},i.prototype._doLayoutContent=function(e){var t=e.grid,o=e.cellLayouts._dataCells,r=o.length,n=this._getFirstCell(e),s=this._getStartCell(e)-n,l=this._getEndCell(e)-n,u=this.model;this.$_refreshCells(e,o,this._tbody),this.$_refreshSpans(e,r),this.$_refreshHeadTitle(e,this._thead);for(var h=0;h<r;h++){var d=this._cells[h],p=this._getTableRow(e,h);v.setClassName(p,"rg-filter-panel-row");for(var f=s;f<=l;f++){var g=d[f];if(g.visible){var m=g.layout;if(m.isProxy||m instanceof it)g.clear(!1);else{var b=u.getCell(m);this._updateCell(t,u,b,g)}}}}},i.prototype._updateCell=function(e,t,o,r){var n=e.doc,s=e.container,l=r.input,u=r.operatorButton,h=r.cell.firstElementChild;if(u||(u=r.operatorButton=n.createElement("span"),h.appendChild(u)),!l){(l=r.input=n.createElement("input")).type="text",s.$_addListener(l,"keydown",this._keydownHandler.bind(this),!1),s.$_addListener(l,"keyup",this._keyupHandler.bind(this),!1),s.$_addListener(l,"input",this._inputHandler.bind(this),!1);var d="$$-rg-filter-cell"+o.dataColumn.$_hash;l.id=d;var p=document.createElement("label");p.style.display="none",p.setAttribute("for",d),h.appendChild(p),h.appendChild(l)}l.value!=o.filterText&&(l.value=o.filterText);var f=this._rowPoints[1]-this._rowPoints[0];h.style.display=o.showInput?"":"none";var g=u.style;g.width="20px",g.height="".concat(f-6,"px"),(g=l.style).width=r.width-30+"px",g.height="".concat(f-6,"px"),r.setOperator(o.filterOperator),r.popupMenu=t.getPopup(r.layout.getDataColumn())},i.prototype._keydownHandler=function(e){this.grid,(e.keyCode||e.charCode)===9&&this._timer&&this.$_search(e,!0)},i.prototype._keyupHandler=function(e){var t=this.grid,o=e.keyCode||e.charCode;if(v.included(o,38,40)){var r=t.getTableCell(e.target),n=this.tableCellByCell(r),s=le.temp(t,-1,n.layout),l=void 0;if(o!==38||s.isTop){if(o===40){if(s.isBottom)return s.itemIndex=t.topIndex,t.setFocusedIndex(s,!0,!0,!0),void t.setFocus();s.down(c.VerticalMoveStep.CELL),l=s.layout}}else s.up(c.VerticalMoveStep.CELL),l=s.layout;l&&(n=this.tableCellByLayout(s.layout)).setFocus()}else o===13&&this.$_search(e,!0)},i.prototype._inputHandler=function(e){this.$_search(e,!1)},i.prototype.$_search=function(e,t){var o,r=e.target,n=this.grid,s=this.model;o=r.value;var l=n.getTableCell(r),u=this.columnByCell(l);if(u){var h=s.getCell(u.layout);t?(clearTimeout(this._timer),this._filterRun(s,o,h.filterOperator,u)):this._startTimer(o,h.filterOperator,u)}},i.prototype._startTimer=function(e,t,o){var r=this.model;clearTimeout(this._timer),this._timer=setTimeout((function(){this._filterRun(r,e,t,o)}).bind(this),r.filterDelay)},i.prototype._filterRun=function(e,t,o,r){var n,s,l=t,u=e.filterPanelCallback,h=!0;if(u){var d=this.grid;if(typeof(h=u.call(this,d.handler,r,o,t))=="boolean"){if(h!==!1)return r.setInlineFilter(void 0,!0),void(r._inlineFilterText=t)}else if(h&&(o=h.operator,t=h.text,!o))return}if(t!=null&&t!=""||o===c.InlineFilterOperator.EMPTY)switch(r.valueType){case c.ValueType.DATE:case c.ValueType.DATETIME:case c.ValueType.NUMBER:var p=t=t.replace(/[^0-9\-.~]/g,"");switch(v.included(r.valueType,c.ValueType.DATE,c.ValueType.DATETIME)?(t=t.replace(/-/g,""),s="datestr(value)",p='"'.concat(t,'"')):s="value",o){case c.InlineFilterOperator.EQUAL:n="".concat(s," = ").concat(p);break;case c.InlineFilterOperator.NOT_EQUAL:n="".concat(s," <> ").concat(p);break;case c.InlineFilterOperator.GREATER:n="".concat(s," > ").concat(p);break;case c.InlineFilterOperator.GREATER_EQUAL:n="".concat(s," >= ").concat(p);break;case c.InlineFilterOperator.LOWER:n="".concat(s," < ").concat(p);break;case c.InlineFilterOperator.LOWER_EQUAL:n="".concat(s," <= ").concat(p);break;case c.InlineFilterOperator.CONTAINS:n="".concat(s," like '%").concat(t,"%'");break;case c.InlineFilterOperator.NOT_CONTAINS:n="".concat(s," not like '%").concat(t,"%'");break;case c.InlineFilterOperator.STARTS_WITH:n="".concat(s," like '").concat(t,"%'");break;case c.InlineFilterOperator.ENDS_WITH:n="".concat(s," like '%").concat(t,"'");break;case c.InlineFilterOperator.EMPTY:n="value is empty";break;case c.InlineFilterOperator.BETWEEN:var f=p.split("~").sort(function(b,C){return parseFloat(b)-parseFloat(C)});n=f.length===2&&f[1]?"(value >= ".concat(f[0],") and (value <= ").concat(f[1],")"):"value >= ".concat(f[0])}break;case c.ValueType.TEXT:default:s=r.lookupDisplay?"text":"value",s=e.trimData?"trim(".concat(s,")"):s;var g=e.ignoreCase?"i":"";switch(t=e.trimData&&t?t.trim():t,t=e.ignoreCase&&t?t.toLowerCase():t,o){case c.InlineFilterOperator.CONTAINS:n="".concat(s," ").concat(g,"likehan '%").concat(t,"%'");break;case c.InlineFilterOperator.NOT_CONTAINS:n="".concat(s," not ").concat(g,"likehan '%").concat(t,"%'");break;case c.InlineFilterOperator.STARTS_WITH:n="".concat(s," ").concat(g,"likehan '").concat(t,"%'");break;case c.InlineFilterOperator.ENDS_WITH:n="".concat(s," ").concat(g,"likehan '%").concat(t,"'");break;case c.InlineFilterOperator.EQUAL:n="".concat(s," ").concat(g,"like '").concat(t,"'");break;case c.InlineFilterOperator.NOT_EQUAL:n="".concat(s," not ").concat(g,"like '").concat(t,"'");break;case c.InlineFilterOperator.EMPTY:n="value is empty"}}else n=void 0;var m=this.tableCellByLayout(r.layout);n!=m.criteria&&(m.criteria=n,r.setInlineFilter(n,!0)),o&&(r._inlineFilterOp=o),r._inlineFilterText=l},i.prototype._getStartCell=function(e){return e.getStartCell()},i.prototype._getEndCell=function(e){return e.getEndCell()},i.prototype.$_getCellHeight=function(e){var t=e.layout.hrow,o=this._rowPoints[t];return this._rowPoints[t+e.rowSpan]-o},i.prototype.$_refreshCells=function(e,t,o){for(var r=this._cells,n=o.children,s=n.length,l=this._getFirstCell(e),u=this._getLastCell(e)-l+1,h=r.length;h<s;h++)r.push([]);for(var d=0;d<s;d++){for(var p=r[d],f=n[d].children,g=t[d],m=0;m<u;m++){var b=f[m],C=g[m+l],x=p[m];x?x.cell!==b||x.layout!=C&&(x.layout=C,x.clear(!0)):(x=p[m]=new Ym(f[m])).layout=C,x.height=this.$_getCellHeight(x),x.width=this._getCellWidth(e,m),x.spanned=!1}for(m=u;m<p.length;m++)p[m].dispose();p.length=u}for(d=s;d<r.length;d++){var E=r[d];for(m=0;m<E.length;m++)E[m].dispose(),E[m]=null}r.length=s},i.prototype.$_refreshSpans=function(e,t){for(var o=this._getFirstCell(e),r=this._getFirstCell(e)-o,n=this._getLastCell(e)-o,s=e.cellLayouts._dataCells.length,l=0;l<t;l++)for(var u=this._cells[l],h=u.length,d=r;d<=n;d++){var p=u[d],f=p.layout,g=f.parent,m=g&&g.vertical;if(!p.spanned)if(f.isProxy)p.clear(!1);else{var b=0,C=0,x=f.getDataSpan()-1;if(x>0){var E=0,S=f.vindex+1;if(m)for(;E++<x&&E<s&&(P=g.getVisible(S++));)C+=P._dspan,this._cells[l+E][d].span();else for(;E++<x&&d-r+E<h&&S<g.visibleCount;){var P;if(!(P=g.getVisible(S++)))break;b+=P._cspan,u[d+E].span()}}f.isNull&&p.clear(!0),p.set(f._cspan+b,f._dspan+C,!0)}}},i.prototype.$_refreshHeadTitle=function(e,t){for(var o=this._cells[0],r=t.children[0],n=0;r&&n<o.length;n++){var s=o[n].layout.source,l=r.children[n];l&&s&&(l[v.TextProp]=s.header.getDisplayText()||s.firstColumn.header.displayText)}},i.RENDERER_STYLE="rg-filter-renderer",i}(tr),qm=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},i.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i.prototype._getCellCount=function(e){return e.fixedCellCount},i.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},i}(Us),Km=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i.prototype._getCellCount=function(e){return e.rightCellCount},i.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},i}(Us),Xm=function(a){function i(e){var t=a.call(this,e,"gridFilterCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}return w(i,a),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},set:function(e){e!==this._model&&(this._model=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),i.prototype.setStyleName=function(e,t){t!=this._styleName&&(this._styleName=t,this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(e,t,o){this._textChanged&&(this._textChanged=!1,o[v.TextProp]=this._text)},i.prototype._doRender=function(e){},i}(Do),Qc=function(a){function i(e){var t=a.call(this,e,null,"gridFilterView")||this;t._cells=[],t._count=0;for(var o=0;o<3;o++)t.addChild(t._cells[o]=new Xm(e));return t}return w(i,a),i.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},i.prototype.getFilterModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},i.prototype.getCellType=function(e){var t=this.getFilterModel(e);return t instanceof br?t.getCellType():void 0},i.prototype._getCssSelector=function(){return"rg-filter"},i.prototype._doPrepareTableExtents=function(e){var t,o=e.grid.rowBarContainer,r=e.sectionObjects;this._count=0;for(var n=0,s=r;n<s.length;n++){var l=s[n];l.visible&&((t=this._cells[this._count++]).model=l,l instanceof qr?t.width=o.rowIndicator.width:l instanceof Kr?t.width=o.stateBar.width:l instanceof Xr&&(t.width=o.checkBar.width))}},i.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},i.prototype._doLayoutContent=function(e){for(var t=e.grid,o=this._count,r=this._thead,n=r&&r.children[0];this.childCount<o;)this.addChild(this._cells[this.childCount]);for(;this.childCount>o;)this.removeLast();for(var s=0;s<o;s++){var l=this.getChild(s),u=l.model,h=u.getFilterCell(),d=this._getTableCell(0,s),p=d.firstElementChild,f=this.$_getCellSelector()+" "+u.getFilterStyleName();if(n){var g=n.children[s];g&&(g[v.TextProp]=u.getCellType()+" filter")}l.setStyleName(d,f),l.updateCell(t,h,p)}},i.prototype._doRender=function(e){},i.prototype._getTableRowCount=function(e){return 1},i.prototype._getTableRowHeight=function(e,t){return this.height},i.prototype._getCellCount=function(e){return this._count},i.prototype._getCellWidth=function(e,t){return this._cells[t].width},i.prototype.$_getCellSelector=function(){return i.CELL_CSS},i.CELL_CSS="rg-filter-cell",i}(tr),ed=function(){function a(i,e){this._containerDom=i,this._commandType=e,this.$_createDom()}return a.prototype.getCommandType=function(){return this._commandType},a.prototype.$_getStyle=function(){return this._commandType==="commit"?"rg-editor-commit":this._commandType==="cancel"?"rg-editor-cancel":void 0},a.prototype.$_createDom=function(){var i=this._containerDom,e=xe(i),t=this._dom=e.createElement("div");t.style.touchAction="none",this.$_createButton(),v.addChild(i,t)},a.prototype.$_createButton=function(){var i=xe(this._containerDom),e=this._button=i.createElement("div");e.style.touchAction="none",e.style.pointerEvents="none",e.className=this.$_getStyle(),v.addChild(this._dom,e)},a}(),Jm=function(a){function i(e){var t=a.call(this)||this;return t._owner=e,t._commands=[],t.$_clickHandler=t._clickHandler.bind(t),t}return w(i,a),Object.defineProperty(i.prototype,"showing",{get:function(){return this._showing},enumerable:!1,configurable:!0}),i.prototype.setContainerDom=function(e){this._containerDom=e},i.prototype.show=function(e){var t=xe(this._containerDom);if(this._dom||((this._dom=t.createElement("div")).className=i.STYLE),!this._commands||this._commands.length==0){var o=new ed(this._dom,"commit");this._commands.push(o),o=new ed(this._dom,"cancel"),this._commands.push(o)}v.addChild(this._containerDom,this._dom),this._dom.addEventListener("click",this.$_clickHandler),this._showing=!0,this.$_setPosition(e)},i.prototype.hide=function(){this._showing=!1,this._dom.removeEventListener("click",this.$_clickHandler),v.detach(this._dom)},i.prototype.setPosition=function(e){this._dom&&this.$_setPosition(e)},i.prototype._clickHandler=function(e){e.target!==this._dom&&this.$_doClick(e)},i.prototype.$_doClick=function(e){var t=this.$_findCommand(e.target);if(t)switch(t.getCommandType()){case"commit":this._owner.commitCommand(e);break;case"cancel":this._owner.cancelCommand(e)}},i.prototype.$_findCommand=function(e){for(var t=0;t<this._commands.length;t++)if(this._commands[t]._dom===e)return this._commands[t];return null},i.prototype.$_setPosition=function(e){var t=this._dom.style,o=this._dom.getBoundingClientRect(),r=e.right-o.width,n=e.top-o.height;t.left=r+"px",t.top=n+"px"},i.STYLE="rg-mobile-command-view",i}(me),Zm=function(a){function i(e){var t=a.call(this,e)||this;return t._commandView=new Jm(t),t._commandView.setContainerDom(e.container._containerDom),t}return w(i,a),i.prototype.commitCommand=function(e){this.commitEditor(!0,!1,!0,!1)},i.prototype.cancelCommand=function(e){this.cancelEditor(!0)},i.prototype._showCommand=function(e){this._commandView&&this._commandView.show(e)},i.prototype._resetPosition=function(e){this._commandView&&this._commandView.setPosition(e)},i.prototype._hideCommand=function(){this._commandView&&this._commandView.showing&&this._commandView.hide()},i.prototype._editorActivated=function(e){a.prototype._editorActivated.call(this,e);var t=this._grid;if(this._grid.mobileOptions.showEditCommander&&t.$_canShowEditCommand(this._editIndex)){var o=this._grid.getEditCellBounds(this._editor,this._editIndex);this._showCommand(o)}},i.prototype._internalHideEditor=function(e){a.prototype._internalHideEditor.call(this,e),this._hideCommand()},i.prototype._resetBounds=function(){a.prototype._resetBounds.call(this);var e=this._grid.getEditCellBounds(this._editor,this._editIndex);this._resetPosition(e)},i}($c),Fo=function(a){function i(e,t,o){var r=a.call(this,e.doc,!0)||this;r._debugging=!1,r._scrollBarWidth=16,r._scrollBarHeight=16,r._keepNullFocus=!0,r._loading=!0,r._dataLoad=!1,r._gridObjects=[],r._tableViews={},r._columnMap={},r._columnLayouts=new Fg,r._columnLock=0,r._columnsDirty=!1,r._columnSummaryRuntime=new tc,r._columnValidationRuntime=new Og,r._rowValidationRuntime=new Sg,r._layouted=!1,r._resetting=!1,r._needMerge=!1,r._leftPos=0,r._horzScrolled=!1,r._topIndex=0,r._prevTop=0,r._prevLeftPos=0,r._prevLast=-1,r._updateLock=!1,r._hoveredY=-1,r._focusing=!1,r._dataChanged=!1,r._validations=new Bh(!1),r.$_editFocused=!1,r.$_showFocusCell=!1,r._itemCheckChanged=!1,r._cellUpdateEventLock=!1,r._currentRowId=-1,r._currentRow=-1,r._scrolledTime=0,r._cellLayoutDirty=!1,r._needRefresh=!0,r._needPosition=!0,r._fitHeader=!1,r._cellGhostStyle={};var n=e.doc,s=e._lkCheck=Nm();switch(s){case 0:case 32:break;default:return r}r._container=e,r._addGridObject(r._header=new Ug(r)),r._addGridObject(r._footers=new Kg(r)),r._addGridObject(r._headerSummaries=new Im(r)),r._addGridObject(r._rowIndicator=new qr(r)),r._addGridObject(r._stateBar=new Kr(r)),r._addGridObject(r._checkBar=new Xr(r)),r._addGridObject(r._body=new Os(r)),r._addGridObject(r._filterPanel=new zm(r)),r.addChild(r._rootElement=new Ft(n,"grid root view")),r._debugView=new Vm(r),s===32&&r.addChild(r._watermarkLayer=new Um(r)),r.addChild(r._emptyView=new vl(n)),r.addElement(r._contentPane=new Rc(n,"contentPane")),r.addElement(r._rightContentPane=new qy(n,"rightContentPane")),r.addElement(r._fixedContentPane=new Pc(n,"fixedContentPane")),r._doContentPanesCreated(),r.addElement(r._leftContentPane=new Uy(n,"leftContentPane")),r._sideContentPane=r._createSidePane(),r._sideContentPane&&r.addElement(r._sideContentPane),r.addElement(r._topContentPane=new en(n,"topContentPane")),r._filterPanelView=new Us(n,r._filterPanel),r._fixedFilterView=new qm(n,r._filterPanel),r._rightFilterView=new Km(n,r._filterPanel),r._bodyView=r._createBodyView(r._body),r._fixedBodyView=r._createFixedBodyView(r._body),r._rightBodyView=r._createRightBodyView(r._body),r._headerView=new rr(n,r._header),r._fixedHeaderView=new wy(n,r._header),r._rightHeaderView=new Cy(n,r._header),r._headerSummaryView=new Gs(n,r._headerSummaries),r._fixedHeaderSummaryView=new Em(n,r._headerSummaries),r._rightHeaderSummaryView=new Sm(n,r._headerSummaries),r._footerView=new Ns(n,r.footers),r._fixedFooterView=new Iy(n,r.footers),r._rightFooterView=new Ey(n,r.footers),r._rowBarContainer=new tn(r),r._headView=new Rl(r),r._sumView=new Kc(n),r._footView=new Oc(n),r._filterView=new Qc(n);for(var l=[r._rowBarContainer,r._bodyView,r._fixedBodyView,r._rightBodyView,r._headerView,r._fixedHeaderView,r._rightHeaderView,r._headerSummaryView,r._fixedHeaderSummaryView,r._rightHeaderSummaryView,r._footerView,r._fixedFooterView,r._rightFooterView,r._headView,r._sumView,r._footView,r._filterView,r._filterPanelView,r._fixedFilterView,r._rightFilterView],u=l.length-1;u>=0;u--){var h=l[u];r._tableViews[h.$_hash]=h}return r._contentPane.addChild(r._headerView),r._contentPane.addChild(r._headerSummaryView),r._contentPane.addChild(r._filterPanelView),r._contentPane.addChild(r._bodyView),r._contentPane.addChild(r._footerView),r._fixedContentPane.addChild(r._fixedBodyView),r._fixedContentPane.addChild(r._fixedFooterView),r._fixedContentPane.addChild(r._fixedHeaderSummaryView),r._fixedContentPane.addChild(r._fixedHeaderView),r._fixedContentPane.addChild(r._fixedFilterView),r._rightContentPane.addChild(r._rightBodyView),r._rightContentPane.addChild(r._rightFooterView),r._rightContentPane.addChild(r._rightHeaderSummaryView),r._rightContentPane.addChild(r._rightHeaderView),r._rightContentPane.addChild(r._rightFilterView),r._leftContentPane.addChild(r._rowBarContainer),r._leftContentPane.addChild(r._footView),r._leftContentPane.addChild(r._sumView),r._leftContentPane.addChild(r._headView),r._leftContentPane.addChild(r._filterView),r._doCreateOtherElements(),r.addElement(r._selectionLayer=r._createSelectionLayer()),r.addElement(r._feedbackLayer=new Ft(n,"feedbackLayer")),r.addFeedbackElement(r._rowHoverView=new bm(n)),r.addElement(r._hscrollBar=new $s(e,!1)),r.addElement(r._vscrollBar=new $s(e,!0)),r.addElement(r._scrollEdge=new Ly(n)),r._hscrollBar.addListener(r),r._vscrollBar.addListener(r),r._selections=new iy(r),r._selections.addListener(r),r._fixedOptions=new To(r),r._displayOptions=new Rs(r),r._formatOptions=new jy(r),r._editOptions=new em(r),r._editorOptions=new im(r),r._copyOptions=new om(r),r._pasteOptions=new rm(r),r._dataDropOptions=new Sy(r),r._sortingOptions=new Wy(r),r._filteringOptions=new Rm(r),r._waiOptions=new Wm(r),r._mobileOptions=new nm(r),r._initStyles(),r._columns=new Gg(r),r._activeCellLayout=r._defaultCellLayout=new $g(r),r._defaultCellLayout.addListener(r),r._delegate=r._createDelegate(),r._layoutManager=r._createLayoutManager(),r._editController=r._createEditController(),r._validationManager=new Rg(r),r._lookupProvider=new $l,r._lookupProvider.addListener(r),r._clipboardManager=new _y(r),r._progressManager=new Hm(r._container._containerDom),r._popupMenuManager=new Un(r._container),r._popupMenuManager.addListener(r),r._tooltipManager=new am(r),r._filterSelector=new Mm(r._container,r._filteringOptions,r),r._toastManager=new Gy(r),r._currentIndex=new le(r),r._editorIndex=new le(r),r._focusedIndex=new le(r),(r._accessibility=t)&&r._waiOptions.assignFrom(o),r}return w(i,a),i.createColumn=function(e){return e?e.type=="series"?new Ji(e):new Oe(e):null},i.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),le.clearTemp(),this._cellGhostStyle={},a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"debugging",{get:function(){return this._debugging},set:function(e){e!=this._debugging&&(this._debugging=e,e?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(e){(e=Math.max(0,e))!=this._scrollBarWidth&&(this._scrollBarWidth=e,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(e){(e=Math.max(0,e))!=this._scrollBarHeight&&(this._scrollBarHeight=e,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(e){this._footers.assignFrom(e)},Object.defineProperty(i.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),i.prototype.setHeaderSummaries=function(e){this._headerSummaries.assignFrom(e)},Object.defineProperty(i.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanel",{get:function(){return this._filterPanel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeCellLayout",{get:function(){return this._activeCellLayout},enumerable:!1,configurable:!0}),i.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(e){this.dataSource,this._items&&(this._items.dataSource=e),this.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemSource",{get:function(){return this._items},set:function(e){this._items&&this._items.removeListener(this),this._items=e,this._items&&this._items.addListener(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(e){this.itemSource.maxItemCount=Math.max(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._items?this._items.itemCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataCount",{get:function(){var e=this.dataSource;return e?e.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarContainer",{get:function(){return this._rowBarContainer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerView",{get:function(){return this._headerView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerView",{get:function(){return this._footerView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelView",{get:function(){return this._filterPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedFilterView",{get:function(){return this._fixedFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFilterView",{get:function(){return this._rightFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headView",{get:function(){return this._headView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumView",{get:function(){return this._sumView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footView",{get:function(){return this._footView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterView",{get:function(){return this._filterView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataDropOptions",{get:function(){return this._dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mobileOptions",{get:function(){return this._mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"WaiOptions",{get:function(){return this._waiOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"accessibility",{get:function(){return this._accessibility},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delegate",{get:function(){return this._delegate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heightMeasurer",{get:function(){return this.container.heightMeasurer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selections",{get:function(){return this._selections},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionLayer",{get:function(){return this._selectionLayer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editController",{get:function(){return this._editController},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(e){this._validations.assignFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toastManager",{get:function(){return this._toastManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},set:function(e){if((e=Math.max(0,Math.min(e,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex){var t=this.topIndexChanging(this._topIndex,e-this._topIndex,!1,!1);t==null||isNaN(t)||(e=this._topIndex+t,e=Math.min(this.itemCount-1,Math.max(0,e))),this._topIndex!==e&&(this._needRefresh=!0),this._topIndex=e,this.refreshView(),v.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},set:function(e){(e=Math.max(0,Math.min(e,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=e,this._horzScrolled=!0,this._displayOptions.refreshMode==c.RefreshMode.VISIBLE_ONLY||this.isRecycleMode()&&this._needRefresh?this.refreshView():this.invalidate(),this.closePopups()),!this.isRecycleMode()&&this._debugging&&this._debugView.layout()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(e){this.leftPos=this._layoutManager.getCellPoint(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(e){var t=this._layoutManager;e=Math.max(t.fixedLayoutCount,Math.min(e,t.layoutCount-1)),this.leftPos=t.getLayoutBounds(e).x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canHovering",{get:function(){return!this.isEditing()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this.itemCount==0||this.visibleLayoutCount==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this.itemSource.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSwiping",{get:function(){var e=this.activeTool,t=e.dragTracker;return t instanceof Nl&&t.dragging||e._touchMoving},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellGhostStyle",{get:function(){return this._cellGhostStyle=this._cellGhostStyle||{}},enumerable:!1,configurable:!0}),i.prototype.addFeedbackElement=function(e){if(e&&!this._feedbackLayer.contains(e))return this._feedbackLayer.addChild(e),!0},i.prototype.removeFeedbackElement=function(e){var t=this._feedbackLayer.indexOf(e);return t>=0&&(this._feedbackLayer.removeChildAt(t),!0)},i.prototype.setEventFrom=function(e){this._eventFrom=e},i.prototype.getVisibleLayout=function(e){return this._activeCellLayout.getVisible(e)},i.prototype.getColumn=function(e){return this._columns.getColumn(e)},i.prototype.setColumns=function(e){this._columns.setColumns(e),this._columnMap={};for(var t=this._columns.count-1;t>=0;t--){var o=this._columns.getColumn(t);this._columnMap[o.$_hash]=o}this._columnsReset(),this.dataSource&&this.applyFilters()},i.prototype.setCellLayout=function(e){this._beforeChangeLayout();var t=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var o=e&&new Nn(this).load(e);o&&o.addListener(this);var r=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=o||this._defaultCellLayout,this._cellLayoutDirty=!0,this._clearSelectionViews(),this.invalidateLayout(),this._activeCellLayout.isDefault()&&this.setColumns(this._columns.columns),this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.$_refresh(this._columns,this.displayOptions.minCellWidth),this._activeCellLayout.invalidate(),this.refreshView(),r&&t&&setTimeout((function(){r.layout=this._activeCellLayout.layoutByColumn(t),this.setFocusedIndex(r)}).bind(this),10),this.clearRowHeights(),this._populateMerges()},i.prototype._checkEditing=function(){if(this.itemSource instanceof gi&&this.itemSource.isEditing())throw new Error("Item is editing")},i.prototype.addColumn=function(e,t){this._checkEditing();var o=this._columns.add(e,t);return o&&(this._columnMap[o.$_hash]=o,this._columnsReset(),this.dataSource&&this.applyFilters()),o},i.prototype.removeColumn=function(e){return typeof e=="string"&&(e=this.columnByName(e)),!!e&&(this._checkEditing(),!!this._columns.remove(e)&&(delete this._columnMap[e.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},i.prototype.addLayout=function(e,t){return this.activeCellLayout.addLayout(e,t)},i.prototype.removeLayout=function(e){this.activeCellLayout.removeLayout(e)},i.prototype.restoreColumns=function(e){this._columns.restoreColumns(),this._columnsReset()},i.prototype.linearizeColumns=function(e){var t=this._activeCellLayout.collectColumns(!0,!0,!0);if(e=v.makeArray(e),t&&t.length>0){if(e&&e.length>0)for(var o=function(s){t.sort(function(l,u){var h=l[e[s]],d=u[e[s]];return h<d?1:h>d?-1:0})},r=0;r<e.length;r++)o(r);var n=[];t.forEach(function(s){n.push(s.name)}),this.setCellLayout(n)}},i.prototype.registerColumnLayouts=function(e){this._columnLayouts.load(e)},i.prototype.findColumnLayout=function(e){return this._columnLayouts.find(e)},i.prototype.invalidateColumn=function(e){this._columnLock<=0&&this._resetColumnIndices(e),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},i.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},i.prototype.beginUpdate=function(){this._updateLock=!0},i.prototype.endUpdate=function(e){(e||this._updateLock)&&(this._updateLock=!1,this.refreshView())},i.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},i.prototype.invalidateLayout=function(){this._updateLock||this._loading||a.prototype.invalidateLayout.call(this)},i.prototype.invalidatePosition=function(){this._needPosition=!0},i.prototype.setNeedRefresh=function(e){this._needRefresh=!0,e&&a.prototype.invalidate.call(this,!1,!0)},i.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),a.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},i.prototype.refreshView=function(e,t){if(!this._loading){if(e){var o=this._container;t&&this.setNeedRefresh(t),o._layoutNeeded=!0,this._needPosition=!0,this._horzScrolled=this._horzScrolled||this._needRefresh,o._render(Date.now())}else this.invalidateLayout();this.topIndex=this._topIndex,this.leftPos=this._leftPos}},i.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},i.prototype.getFirstCell=function(){if(this.itemCount>0){for(var e=0,t=0,o=this.itemCount;t<o;t++)if(this.getItem(t)instanceof Tt){e=t;break}return new le(this,e>=0?e:0,this.getFirstColumn())}return null},i.prototype.$_setEditFocused=function(e,t){if(e!=this.$_editFocused){if(this.$_editFocused=e,e&&this.$_showFocusCell){var o=this.focusedIndex;!o||this.isValid(o)}this.$_showFocusCell=!1}e&&t&&t.type=="focusin"&&v.isAncestorOf(this._container._container,t.target,t)&&xr.setActiveGrid(this.container.$_hash)},i.prototype.getItem=function(e){return this._items.getItem(e)},i.prototype.getItemIndexOfRow=function(e){return this._items.getIndexOfRow(e,!1)},i.prototype.getItemOfRow=function(e,t){return this._items.getItemOfRow(e,t)},i.prototype.getItemIndicesOfRows=function(e){return this._items.getIndicesOfRows(e,!1)},i.prototype.getRowOfItem=function(e){var t=this.getItem(e);return t?t.dataRow:-1},i.prototype.getItemOfModel=function(e){return null},i.prototype.getRowsOfItems=function(e,t){t===void 0&&(t=!1);for(var o=[],r=0,n=e;r<n.length;r++){var s=n[r],l=this.getItem(s),u=l?l.dataRow:-1;(t||u>=0)&&o.push(u)}return o},i.prototype.getIndicatorIndex=function(e,t){return t?this.itemCount-e.index-1:e.index},i.prototype.indicatorReverse=function(e){return e===c.IndicatorValue.REVERSE},i.prototype.getAllItems=function(){return this._items.getAllItems()},i.prototype.getImage=function(e){return null},i.prototype.getIndex=function(e,t){return e===void 0&&(e=-1),t===void 0&&(t=null),new le(this,e,t)},i.prototype.getDataCellIndex=function(e,t){var o=e.parentElement,r=this._tableViews[o.$_view],n=o.$_row,s=r.layoutByCell(e);return t!=null?t.set(n,s):le.temp(this,n,s)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),i.prototype.getDataColumns=function(e){return e===void 0&&(e=!0),this._activeCellLayout.getDataColumns(e)},i.prototype.optionsChanged=function(e){this._columnsDirty=!0,this.refreshView()},i.prototype.scrollRow=function(e){var t=this.topIndex;this.topIndex=t+e},i.prototype.selectColumnFilters=function(e){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{if(!this.commit(!1))return}catch(o){var t=this.focusedItem;if(t&&o instanceof Rt)return void((o=this._fireValidationFail(t.index,o.column,o))&&alert(this.editOptions.showOnlyValidationMessage&&o.userMessage?o.userMessage:o.toString()));throw o}}this._fireFiltering()&&(this.hideEditor(!0),this._filterSelector.show(e.layout.firstColumn,e.cell,this.dataSource))},i.prototype.closeFilterSelector=function(){this._filterSelector.hide()},i.prototype.closePopups=function(e){e===void 0&&(e=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),e&&this._editController.closeList(!1)},i.prototype.layoutByDataCell=function(e){var t=e.parentElement;return this._tableViews[t.$_view].layoutByCell(e)},i.prototype.columnByHash=function(e){return this._columnMap[e]},i.prototype.columnByDataCell=function(e){return this._bodyView.columnByCell(e)||this._fixedBodyView.columnByCell(e)||this._rightBodyView.columnByCell(e)},i.prototype.columnByName=function(e){return this._columns.columnByName(e)},i.prototype.columnByField=function(e){return typeof e=="string"&&(e=this.dataSource.getFieldIndex(e)),this._columns.columnByField(e)},i.prototype.columnsByField=function(e){return typeof e=="string"&&(e=this.dataSource.getFieldIndex(e)),this._columns.columnsByField(e)},i.prototype.columnByTag=function(e){return this._columns.columnByTag(e)},i.prototype.columnsByTag=function(e){return this._columns.columnsByTag(e)},i.prototype.getHorzColumns=function(e,t){return this._activeCellLayout.getHorzColumns(e,t)},i.prototype.getGroupLevel=function(e){return-1},i.prototype.isGroupedColumn=function(e){return!1},i.prototype.layoutByColumn=function(e){return e instanceof Ro||(e=this.columnByName(e)),e?this._activeCellLayout.layoutByColumn(e):null},i.prototype.layoutByName=function(e){return this._activeCellLayout.layoutByName(e)},i.prototype.setFocus=function(e,t){function o(r){this.$_showFocusCell=!0;var n=this.focusedIndex.clone();if(!t&&this._eventFrom!=="keyup_tab"||!n||this.isValid(n)||(n.set(Math.max(this.topIndex===0?0:this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(n,!0,!0)),this._accessibility&&!this.isEditing()&&this.isValid(n))if(this.layoutManager.cellIsVisible(n)&&!this._resetTdFocus){var s=this.getBodyCellAt(n,!0);s&&r!==s.cell&&this.getBodyViewAt(n).refreshTdFocused(n,!1)}else this._resetTdFocus=!0;else v.isMobile()?this.container.setFocus():this._editController.setFocus(!0,r);xr.getActiveGrid()!==this&&xr.setActiveGrid(this.container.$_hash)}t===void 0&&(t=!1),this.activeCellLayout.visibleCount>0?o.call(this,e):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout((function(){this._setFocusTimer=null,o.call(this,e)}).bind(this),10))},i.prototype.getFirstLayout=function(){return this._activeCellLayout.first},i.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},i.prototype.collectColumns=function(e,t,o){return this._activeCellLayout.collectColumns(e,t,o)},i.prototype.collectColumnNames=function(e,t){return this._activeCellLayout.collectColumnNames(e,t)},i.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},i.prototype.getChildColumnNames=function(e){return this._activeCellLayout.collectColumnNames(!1,!1,!1,e)},i.prototype.collectDataColumns=function(e,t){return this._activeCellLayout.collectDataColumns(e,t)},i.prototype.isValid=function(e){return e&&e.grid===this&&e.itemIndex>=0&&e.itemIndex<this.itemCount&&e.layout&&e.layout.grid===this},i.prototype.getSelection=function(e){return e===void 0&&(e=0),e>=0&&e<this._selections.count?this._selections.getItem(e):null},i.prototype.getSelections=function(){return this._selections.getItems()},i.prototype.clearAddSelection=function(e,t,o){e===void 0&&(e=!0),t===void 0&&(t=!0),o===void 0&&(o=!0);var r=this.focusedIndex;e&&this._selections.clear(o),t&&this.isValid(r)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(r,r,this._displayOptions.selectionStyle,!0)},i.prototype.deleteSelection=function(e){e===void 0&&(e=!1),this.$_deleteSelection(null,e)},i.prototype.$_deleteSelection=function(e,t){function o(S,P){try{if(P&&P.length>0){for(var R=[],k=0,D=P.length;k<D;k++){var F=S.getItem(P[k]);F&&F.dataRow>=0&&R.push(F.dataRow)}if(R.length>0&&!S._fireRowsDeleting(R))return!1}}catch(H){return alert(H),!1}return!0}function r(S,P){var R=S.recursiveDeleting();return!!P&&((t||!S.editOptions.confirmWhenDelete||confirm(S.editOptions.deleteRowsMessage)&&o(S,[P.index]))&&(S.cancel(),Ei(P.itemState)||S.itemSource.remove(P,R)),!0)}function n(S,P){for(var R=null,k=P.length;k--;){var D=S.getItem(P[k]),F=D.itemState;if(ai(F)){R=D,Ei(F)&&P.splice(k,1);break}}var H=null;P.length>0&&(H=S.itemSource.getRemovableRows(P)),R&&S.cancel(),H&&S.itemSource.removeRows(H,S.recursiveDeleting())}t===void 0&&(t=!1);var s=this.editOptions,l=this.selections,u=this.itemSource;if((t||s.deletable)&&u instanceof gi)if(!this.isItemEditing(null)||s.deletableWhenEdit){if(this.commitEditor(!0),r(this,e))return!0;if(!function(S,P){if(P.count==0||P.count==1&&P.getItem(0).single){var R,k=-1;return(k=P.count==0?S.focusedIndex.itemIndex:P.getItem(0).getBounds().r1)>=0&&S.canDelete(R=S.getItem(k))&&r(S,R),!0}return!1}(this,l)){for(var h=l.count,d=[],p=0;p<h;p++){var f=l.getItem(p);if(Bn(f)||v.included(f.style,c.SelectionStyle.BLOCK,c.SelectionStyle.GROUP))for(var g=f.getBounds(),m=Math.min(g.r1,g.r2),b=Math.max(g.r1,g.r2),C=m;C<=b;C++){var x=this.getItem(C);(x.dataRow>=0||x.editable)&&d.push(C)}}d.sort(function(S,P){return S-P});var E=-1;for(p=d.length;p--;)d[p]==E?d.splice(p,1):E=d[p];d.length>0&&this.canDelete(this.getItem(d[0]))&&(t||!s.confirmWhenDelete?o(this,d)&&(n(this,d),this.clearAddSelection(!0)):confirm(s.deleteRowsMessage)&&o(this,d)&&(n(this,d),this.clearAddSelection(!0)))}}else alert(s.commitEditingMessage)},i.prototype.revertSelection=function(e){e===void 0&&(e=!1);var t=this.editOptions,o=this.selections,r=this.itemSource;if((e||t.revertable)&&r instanceof gi&&(this.commitEditor(!0),!function(b,C){if(C.count==0||C.count==1&&C.getItem(0).single){var x=-1;if((x=C.count==0?b.focusedIndex.itemIndex:C.getItem(0).getBounds().r1)>=0)return b.itemSource.revert(x),!0}return!1}(this,o))){for(var n=o.count,s=[],l=0;l<n;l++){var u=o.getItem(l);if(Bn(u)||v.included(u.style,c.SelectionStyle.BLOCK,c.SelectionStyle.GROUP))for(var h=u.getBounds(),d=Math.min(h.r1,h.r2),p=Math.max(h.r1,h.r2),f=d;f<=p;f++){var g=this.getItem(f);(g.dataRow>=0||g.editable)&&s.push(f)}}s.sort(function(b,C){return b-C});var m=-1;for(l=s.length;l--;)s[l]==m?s.splice(l,1):m=s[l];s.length>0&&r.revertAll(s)}},i.prototype.eraseSelection=function(e){var t=this.editOptions,o=this.selections,r=this.itemSource;if(t.readOnly||!e&&!t.erasable||!t.updatable||!(r instanceof gi)||this.isItemEditing())return!1;if(function(h,d){if(d.count==0||d.count==1&&d.getItem(0).single){var p=h.focusedIndex;return h.getWritableAt(p)&&h.setCellValue(p,void 0),!0}return!1}(this,o))return!0;var n=o.count;if(n<1)return!1;for(var s=[],l=0;l<n;l++){var u=o.getItem(l);(Bn(u)||v.included(u.style,c.SelectionStyle.BLOCK,c.SelectionStyle.GROUP))&&(s=s.concat(u.getItems()))}if(s.length>0){for(l=0;l<n;l++)o.getItem(l).setValues(void 0);return!0}},i.prototype.getSelectedItems=function(e){e===void 0&&(e=!1);var t=this._selections.getItem(0);return t&&t.getItems(e)},i.prototype.getSelectedItemIndices=function(e){e===void 0&&(e=!1);for(var t=this._selections,o=[],r=0;r<t.count;r++)t.getItem(r).getItemIndices(e).forEach(function(n){o.indexOf(n)<0&&o.push(n)});return o},i.prototype.getSelectedRows=function(){for(var e=this._selections,t=[],o=0;o<e.count;o++)e.getItem(o).getRows().forEach(function(r){t.indexOf(r)<0&&t.push(r)});return t},i.prototype.getSelectedLayouts=function(){for(var e=this.activeCellLayout.collectLayouts(!0),t=this._selections,o=[],r=0;r<e.length;r++)t.containsLayout(e[r])&&o.indexOf(e[r])<0&&o.push(e[r]);return o},i.prototype.setFocusedIndex=function(e,t,o,r){if(t===void 0&&(t=!0),o===void 0&&(o=!1),r===void 0&&(r=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(e,t,o,!0,r)}finally{this._focusing=!1}}},i.prototype.setFocusedItem=function(e){e instanceof kt&&(e=e.index),this.setFocusedIndex(this.getIndex(e))},i.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},i.prototype.clearFocusedIndex=function(e){if(e===void 0&&(e=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var t=void 0;e&&this.focusedRow>=this.itemCount&&((t=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this._editController.remainFocusing(!0),this.$_doSetFocusedIndex(t,!0,!1,!1,!1)}finally{this._focusing=!1}}},i.prototype.getTableCell=function(e){if(!e)return null;for(var t=e,o=tt(t);t&&!(t instanceof o.HTMLTableCellElement);)t=t.parentElement;if(t instanceof o.HTMLTableCellElement&&t.parentElement){var r=t.parentElement[Fe];if(r)return t;for(t=t.parentElement;t;){if(t instanceof o.HTMLTableCellElement&&(r=t.parentElement[Fe]))return t;t=t.parentElement}}return null},i.prototype.getTableView=function(e){return this._tableViews[e.parentElement[Fe]]},i.prototype.getBodyViewAt=function(e){return this._layoutManager.getBodyView(e)},i.prototype.getBodyView=function(e){return this.getTableView(e)},i.prototype.getRowView=function(e,t){return e.getRowView(t)},i.prototype.getHeaderView=function(e){return this.getTableView(e)},i.prototype.getFooterView=function(e){return this.getTableView(e)},i.prototype.getSummaryView=function(e){return this.getTableView(e)},i.prototype.getFilterView=function(e){return this.getTableView(e)},i.prototype.getCellType=function(e){if(e){var t=e.parentElement;if(t[be]===-99)return c.GridCellType.FIXED_BAR;var o=this._tableViews[t[Fe]];if(!(o instanceof Oi))return o instanceof tn?o.getCellType(e):o instanceof rr?c.GridCellType.HEADER:o instanceof Ns?c.GridCellType.FOOTER:o instanceof Gs?c.GridCellType.SUMMARY:o instanceof Us?c.GridCellType.INLINE_FILTER:o instanceof Rl?c.GridCellType.HEAD:o instanceof Oc?c.GridCellType.FOOT:o instanceof Kc?c.GridCellType.SUM:o instanceof Qc?c.GridCellType.FILTER:this._getCellTypeOf(o);var r=o.bodyCellByCell(e);if(r)return!(r.item instanceof Kt)||r.dataColumn&&r.dataColumn.mergeGrouped?c.GridCellType.DATA:c.GridCellType.GROUP_FOOTER}},i.prototype._getCellTypeOf=function(e){},i.prototype.getBodyCellAt=function(e,t){var o=this._layoutManager,r=this._bodyView.visible&&this._bodyView.getCellAt(o,e)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(o,e)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(o,e);return r&&t&&r.merged&&r.head?r.head:r},i.prototype.getHeaderCellAt=function(e){return this._headerView.visible&&this._headerView.tableCellByLayout(e)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(e)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(e)},i.prototype.getBodyCellbyCell=function(e){return this.getBodyCellAt(this.cellToIndex(e),!1)},i.prototype.cellToIndex=function(e){var t=le.temp(this,-1,null);if((e=this.getCellViewOf(e))&&e instanceof tt(e).HTMLTableCellElement){var o=this.getBodyView(e);o&&o instanceof Oi&&(t.layout=o.layoutByCell(e),t.itemIndex=e.parentElement[be])}return t},i.prototype.cellToContainer=function(e,t){t===void 0&&(t=null);var o=this.getTableView(e);t=o.getCellPoint(e,t);var r=o.boundsByContainer(Z.Temp.set(t.x,t.y,0,0));return t.set(r.x,r.y),t},i.prototype.pointToIndex=function(e,t,o,r){var n=le.temp(this,-1,null);return r?this._layoutManager.mouseToIndex(this.getCellViewOf(e),t,o,n):this._layoutManager.mouseToIndexEx(this.getCellViewOf(e),t,o,n),n},i.prototype.getCellRectAt=function(e,t,o){var r=this.getBodyViewAt(t);if(r){var n=r.getCellAt(e,t);return n&&r.getCellRect(e,n,o)}},i.prototype.getEditCellBounds=function(e,t){var o=this.layoutManager,r=o.getBodyView(t),n=r.getCellAt(o,t);if(n){var s=this.canMergeEditing(n),l=r.getCellRectAt(o,t,s);return l=r.boundsByContainer(l),!t.colFixed&&l.width>o.nonFixedBounds.width&&(l.width=o.nonFixedBounds.width),l}return v.$_INVISIBLE_EDIT_BOUNDS.clone()},i.prototype.getEditBounds=function(e,t){var o=t.item;if(!o)return null;var r=this.layoutManager,n=r.fixedItemCount;if(n>0&&o.index>=n&&o.index-n<r.topIndex)return v.$_INVISIBLE_EDIT_BOUNDS.clone();var s=r.getBodyView(t),l=s.getCellAt(r,t);if(l){l=l.merged?l.head:l;var u=s.getCellRectAt(r,t,!1);return(u=s.boundsByContainer(u)).width-=(e.native?0:l.$_editWidth)+l.$_buttonWidth+l.$_errorWidth,u}return v.$_INVISIBLE_EDIT_BOUNDS.clone()},i.prototype.getCellViewOf=function(e){for(var t=tt(e);e;){if(e instanceof t.HTMLTableCellElement)return e;e=e.parentElement}return null},i.prototype.getFocusedCellView=function(e){var t=e.item;if(!t)return null;var o=this.layoutManager,r=o.fixedItemCount;if(r>0&&t.index>=r&&t.index-r<o.topIndex)return null;var n=t.merged,s=e.colFixed,l=e.rightFixed;return t.isData||n?(l?this._rightBodyView:s?this._fixedBodyView:this._bodyView).getCellView(o,e):null},i.prototype.isFocusedCell=function(e){return le.areEquals(e,this._focusedIndex)},i.prototype.isFocusedRow=function(e){return this._focusedIndex.itemIndex==e},i.prototype.isFocusedColumn=function(e){return this._focusedIndex.column===e},i.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},i.prototype.pasteFromClipboard=function(e,t){var o=this.focusedIndex.clone(),r=this.pasteOptions;if(o.normalize(this),this.isValid(o)&&o.dataColumn&&r.enabled&&this._firePaste(o,t))try{r.singleMode?this._clipboardManager.pasteCellFromClipboard(o,e):(this._clipboardManager.pasteFromClipboard(o,e),o.item&&ai(o.item.itemState)&&this.refreshView()),this._firePasted()}catch(n){throw n instanceof Rt&&(n=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,n.column,n))&&alert(this._editOptions.showOnlyValidationMessage&&n.userMessage?n.userMessage:n.toString()),n}},i.prototype.copyToClipboard=function(e,t,o){o===void 0&&(o=!1);var r,n=!1,s=this.focusedIndex,l=this.selections;if(o||this.copyOptions.enabled){if(o||(r=(n=this.copyOptions.singleMode||l.count==0||l.single)?new ko(l,c.SelectionStyle.BLOCK,s,s):l.getItems(),o=this._fireCopy(r,e)),o){var u=void 0,h=void 0;if(!t&&Array.isArray(r)){var d=r.length>1,p=r.length>1,f=!0;if(r.length>1&&r.forEach(function(g){f=f&&(g instanceof mo||g instanceof er),d=d&&g instanceof mo,p=p&&g instanceof er}),!f)return alert("multi selection copy not supported"),null;u=d?this.getSelectedItemIndices(!1):null,h=p?this.getSelectedLayouts():null}return t=t||(Array.isArray(r)?r[0].getBounds():r.getBounds()),n?this._clipboardManager.copyCellToClipboard(s):this._clipboardManager.copyToClipboard(t,u,h)}return null}return this._clipboardManager.copyEmtpyToClipboard()},i.prototype.toClipboard=function(e,t){t===void 0&&(t=!0);var o=(function(g){var m;return typeof g=="string"?m=this.columnByName(g):g instanceof Ro&&(m=g),m&&m.layout}).bind(this);if(!this.empty){var r;if(!(e&&e instanceof Ni)){var n=void 0,s=void 0;if(e?(n=o(e.startColumn),s=o(e.endColumn)):(n=this._activeCellLayout.first,s=this._activeCellLayout.last),!n||!s)return;var l=(e=e||{}).startItem==null?0:Math.max(0,e.startItem),u=e.endItem==null?this.itemCount-1:Math.min(e.endItem,this.itemCount-1);r=Ni.createRange(l,n,u,s)}var h=this.copyToClipboard(null,r,!0);if(h=h??"",!t)return h;if(v.isIE&&window.clipboardData)window.clipboardData.setData("text",h);else{var d=this.doc,p=d.createElement("textarea"),f=p.style;f.position="absolute",f.top="-10000px",d.body.appendChild(p),p.value=h,p.select(),d.execCommand("copy"),setTimeout(function(){d.body.removeChild(p)},100)}}},i.prototype.showToast=function(e,t){this._toastManager.show(e,t,null)},i.prototype.hideToast=function(e){this._toastManager.close(),e&&setTimeout(e,0)},i.prototype.isEditing=function(e){return this._editController.editing&&(!e||le.areEquals(e,this._editController.editIndex))},i.prototype.getEditItem=function(){return this.itemSource instanceof gi&&this.itemSource.editingItem},i.prototype.isItemEditing=function(e){return(e=e||this.focusedIndex.item)&&this.itemSource instanceof gi&&this.itemSource.isEditing(e)},i.prototype.isItemEdited=function(e){return(e=e||this.focusedIndex.item)&&this.itemSource instanceof gi&&this.itemSource.isEdited(e)},i.prototype.getEditValue=function(e,t,o){this._doGetEditValue(t,o)},i.prototype._doGetEditValue=function(e,t){this._fireGetEditValue(e,t)},i.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},i.prototype.editorCommit=function(e,t,o){return this._doCellCommit(e,t,o)},i.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case c.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case c.ScrollOnEditing.COMMIT:this.commitEditor(!0);case c.ScrollOnEditing.DEFAULT:}},i.prototype._doCellCommit=function(e,t,o){return this._fireEditCommit(e,t,o)},i.prototype.editorActivated=function(e){this._doEditorActivated(e.editIndex,!0,e)},i.prototype._doEditorActivated=function(e,t,o){var r=this.getBodyCellAt(e,!1),n=r&&this.getBodyView(r.cell);n&&n.$_buttonZIndexChanged(this,r,t,o)},i.prototype.setCellUpdateEventLock=function(e){this._cellUpdateEventLock=e},i.prototype.$_validateCellValue=function(e,t){try{var o=Ei(e.item.itemState);return this._validationManager.validateCell(e,o,!1),!0}catch(r){if(!(r instanceof Rt))throw r;this._validationManager.addInvalidateCell(e,r)}return!1},i.prototype.$_refreshInvalidList=function(e){this.itemCount<=0||e?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},i.prototype.validateCellCommit=function(e,t){this.editOptions.validateOnEdited&&this.$_validateCellValue(e,t)},i.prototype.validateCells=function(e,t,o){return this._validationManager.validateCells(e,t,o)},i.prototype.getInvalidCells=function(e){return this._validationManager.getInvalidCells(e)},i.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},i.prototype.getEditableAt=function(e,t){var o=e.dataColumn;if(!o)return!1;if(t&&t.editable!=null)return t.editable;if(e.item.isDataRow){var r=e.item;if(r.editable!=null)return r.editable}var n=this.editOptions;if(n.columnEditableFirst){if(!(o.editable!=null?o.editable:n.editable))return!1}else if(!n.editable||o.editable===!1)return!1;var s=this.fixedOptions;return!(e.colFixed&&!s.editable)&&!(e.rowFixed&&!s.rowEditable)},i.prototype.getReadOnlyAt=function(e,t){var o=e.dataColumn;if(!o)return!0;var r,n,s=this._items.getItem(e.itemIndex);return!s||(t&&t.readOnly!=null?t.readOnly:(s=s.merged&&s instanceof ft?s.firstDataItem:s,!this.editOptions.updatable&&(r=s.itemState,n=s.rowState,r!=c.ItemState.INSERTING&&r!=c.ItemState.APPENDING&&n!=c.RowState.CREATED)||!this._items.canUpdate(s,o.dataIndex)||!!this._editOptions.readOnly||!!o.readOnly))},i.prototype.getWritableAt=function(e){if(!this.isValid(e))return!1;var t=this.getBodyViewAt(e);if(t){var o=t.getCellAt(this._layoutManager,e);if(o){var r=o.merged&&o.head||o;return(o.editable==null||o.editable||r.renderer2&&r.renderer2.canEdit())&&!o.readonly}var n=e.dataColumn,s=this.body.getCell(e,!1),l=s&&n.getCellStyle(s),u=n.readOnly,h=n.isWritable();return l&&typeof l!="string"&&(u=l.readOnly!==null?l.readOnly:n.readOnly,h=l.editable!==null?l.editable:n.isWritable()),h&&!u}},i.prototype.getWritable=function(e,t){var o=t.layout,r=le.temp(this,e,o),n=this.getWritableAt(r);return n===void 0?t.isWritable():n},i.prototype.canEditAt=function(e){var t=this.getBodyViewAt(e);if(t){var o=t.getCellAt(this._layoutManager,e);return o&&o.editable!==void 0?o.editable:this.getEditableAt(e,null)}},i.prototype.canWriteAt=function(e){var t=this.getBodyViewAt(e);if(t){var o=t.getCellAt(this._layoutManager,e);return o&&o.readonly!==void 0?!o.readonly:!this.getReadOnlyAt(e,null)}},i.prototype.canUpdate=function(e,t){return this.editOptions.canUpdate(e.rowState===c.RowState.CREATED)&&this.visibleLayoutCount>0&&this.itemSource&&this.itemSource.canUpdate(e,t)},i.prototype.canAppend=function(){var e=this.itemSource,t=!this.isEditing()&&this.editOptions.canAppend()&&this.visibleLayoutCount>0&&e&&e.canAppend();if(t)try{if(!this._fireRowInserting(e.itemCount,-1))return!1}catch(o){return alert(o.message||o),!1}return t},i.prototype.canInsert=function(e,t,o){var r=this.itemSource,n=!this.isEditing()&&this._doCanInsert(e,t,o)&&this.editOptions.canInsert()&&this.visibleLayoutCount>0&&r&&r.canInsert(e);if(n)try{if(!this._fireRowInserting(e.index+(t?1:0),-1))return!1}catch(s){return alert(s.message||s),!1}return n},i.prototype._doCanInsert=function(e,t,o){return!0},i.prototype.canDelete=function(e){var t=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&t&&(this.isItemEditing(e)||t.canDelete(e))},i.prototype.canCommit=function(e){return this.isItemEditing(e)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},i.prototype.canCancel=function(e){return this.isItemEditing(e)},i.prototype.canMergeEditing=function(e){return!this.isTree()&&e&&e.merged&&this.editOptions.commitByCell&&e.dataColumn&&e.dataColumn.mergeEdit},i.prototype.edit=function(e){return e||(e=this.focusedIndex),!!(this.isValid(e)&&this.itemSource instanceof gi)&&!(e.dataColumn&&!this.canUpdate(e.item,e.dataField))&&(!ai(e.item.itemState)&&this.validationManager.cloneError(e.dataId,-1),this.itemSource.edit(e.item))},i.prototype.insertAt=function(e,t){return this.insert(this.getItem(e),t)},i.prototype.insert=function(e,t,o){if(e===void 0&&(e=null),t===void 0&&(t=!1),o===void 0&&(o=!1),e||(e=this.focusedIndex?this.focusedIndex.item:null),!e)return!1;var r=this.itemSource;if(r instanceof gi&&this.canInsert(e,t,o)){var n=this.$_getInsertDefaults(null);return this._cancelDummy(),r.insert(e,n,t,o)}return!1},i.prototype.append=function(){var e=this.itemSource;if(e instanceof gi&&e.dataSource&&this.canAppend()){var t=this.$_getInsertDefaults(null);return this._cancelDummy(),e.append(t)}return!1},i.prototype._appendDummy=function(){var e=this._editOptions;e.displayEmptyEditRow&&e.appendable&&this._items.appendDummy()},i.prototype._cancelDummy=function(){this._items.cancelDummy()},i.prototype.setValueAt=function(e,t,o){var r=this.getItem(e);if(r&&t>=0)if(r instanceof Hr||r instanceof Cs)r.setValue(t,o);else{var n=r.dataRow;n>=0&&this.dataSource.setValue(n,t,o)}},i.prototype.setCellValue=function(e,t){this.isValid(e)&&this.setValueAt(e.itemIndex,e.dataField,t)},i.prototype.recallHeight=function(){this._container.recallHeight()},i.prototype.$_canShowEditor=function(e,t,o){return!!this.isValid(e)&&this._fireShowEditor(this._editorIndex.assign(e),t,o)},i.prototype.$_canShowEditCommand=function(e){if(this.isValid(e))return this._fireShowEditCommand(e)},i.prototype.hideEditor=function(e){e===void 0&&(e=!1),this._editController.closeList(!1),this._editController.hideEditor(),e&&this.activeTool.resetFocused()},i.prototype.requestPrepareEditor=function(){var e=this._editController;e&&e.requestPrepareEditor()},i.prototype.fillEditSearchItems=function(e,t,o,r,n){this._editController.fillSearchItems(e,t,o,r,n)},i.prototype.showEditor=function(e,t,o){if(t===void 0&&(t=!1),o===void 0&&(o=!1),e=e||this.focusedIndex,this._editController.showEditor(e,o))return this.activeTool.resetFocused(),t&&this._editController.caretToLast(),!0},i.prototype.showEditList=function(e){if(this._editController.showList(e))return!0},i.prototype.editorButtonClicked=function(e,t){this._editController.buttonClicked(e,t),this._fireEditButtonClicked(e)},Object.defineProperty(i.prototype,"canUndo",{get:function(){var e=this.dataSource;return e&&e.canUndo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(i.prototype,"canRedo",{get:function(){var e=this.dataSource;return e&&e.canRedo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),i.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},i.prototype.execute=function(e){},i.prototype.clearCommandStack=function(e){this.dataSource.clearCommandStack()},i.prototype.setLookups=function(e){e&&(this._lookupProvider||(this._lookupProvider=new $l,this._lookupProvider.addListener(this)),this._lookupProvider.load(e))},i.prototype.addLookupSource=function(e){(this._lookupProvider||(this._lookupProvider=new $l)).add(e)},i.prototype.removeLookupSource=function(e){this._lookupProvider&&this._lookupProvider.remove(e)},i.prototype.existsLookupData=function(e,t){if(e&&t){var o=this._lookupProvider&&this._lookupProvider.getSource(e);if(!o)throw new Error("Invalid lookup source id: "+e);return o.exists(v.makeArray(t))}},i.prototype.fillLookupData=function(e,t){if(e&&t){var o=this._lookupProvider&&this._lookupProvider.getSource(e);if(!o)throw new Error("Invalid lookup source id: "+e);t.rows?o.fillRows(t.rows):o.fill(t.keys,t.values,t.listResult)}},i.prototype.clearLookupData=function(e){if(e){var t=this._lookupProvider&&this._lookupProvider.getSource(e);if(!t)throw new Error("Invalid lookup source id: "+e);t.clear()}},i.prototype.addLookupData=function(e,t,o){if(o===void 0&&(o=null),e&&t){t=v.makeArray(t);var r=this._lookupProvider&&this._lookupProvider.getSource(e);if(!r)throw new Error("Invalid lookup source id: "+e);o?r.add(t,o):r.addRow(t)}},i.prototype.setOptions=function(e){},i.prototype.doContextMenu=function(e){var t,o,r,n,s,l,u,h=e.mouseX,d=e.mouseY,p=this.activeTool,f=p._findTableCell(),g=p.findElementAt(h,d,!1);if(f){var m=this.getTableView(f),b=this.getCellType(f),C=void 0,x=void 0;switch(b){case c.GridCellType.HEAD:t=Ae.getSub(b,this.headView.getCellType(f)),l=(o=this.headView.getHeadModel(f))&&o.popupMenuName;break;case c.GridCellType.FOOT:t=Ae.getSub(b,this.footView.getCellType(f)),l=(o=this.footView.getFootModel(f))&&o.popupMenuName;break;case c.GridCellType.INDICATOR:C=this.rowBarContainer.rowOf(f),x=this.getRowOfItem(C),t=Ae.getItem(b,C,x),l=this.rowIndicator.popupMenuName;break;case c.GridCellType.STATE:C=this.rowBarContainer.rowOf(f),x=this.getRowOfItem(C),t=Ae.getItem(b,C,x),l=this.stateBar.popupMenuName;break;case c.GridCellType.CHECK:C=this.rowBarContainer.rowOf(f),x=this.getRowOfItem(C),t=Ae.getItem(b,C,x),l=this.checkBar.popupMenuName;break;case c.GridCellType.HEADER:u=m.layoutByCell(f),t=Ae.getLayout(b,u),l=u.firstColumn.header.popupMenuName;break;case c.GridCellType.DATA:if((n=m.bodyCellByCell(f)).grouped)t=Ae.getItem(c.GridCellType.GROUP_HEADER,n.item.index,null);else{var E=le.temp(this,g instanceof bi?g.itemIndex:n.item.index,n.layout);t=Ae.getCell(b,n,E),l=n.dataColumn.popupMenuName}break;case c.GridCellType.GROUP_FOOTER:n=m.bodyCellByCell(f),s=g&&g._item&&g._item.$_footerIndex,t=Ae.getGroupFooter(b,n.item.index,n.layout,s);var S=n.dataColumn.groupFooters.get(s);l=S&&S.popupMenuName;break;case c.GridCellType.FOOTER:case c.GridCellType.SUMMARY:var P=m.tableCellByCell(f);s=P.summaryIndex;var R=b===c.GridCellType.FOOTER?P.layout.firstColumn.footers.get(s):P.layout.firstColumn.headerSummaries.get(s);t=Ae.getSummary(b,P.summaryIndex,P.layout),l=R&&R.popupMenuName;break;case c.GridCellType.GROUP_HEAD:case c.GridCellType.GROUP_FOOT:var k=f[je];t=Ae.getGroupElt(b,k);break;case c.GridCellType.GROUP_BAR:var D=f[be];x=this.getRowOfItem(D),t=Ae.getItem(b,D,x)}}else g&&g===p._clickElement&&(t=p._getClickData(g));if((r=this._fireContextMenuPopup(h,d,t,l||this._contextMenu,!0))!==!1){var F=this._popupMenuManager;if(typeof r=="string"?l=r:r!=null&&typeof r=="object"||(l=l||this._contextMenu),l){e.preventDefault();var H=F.getMenu(l);H&&F.showContext(H,e,h,d,t)}}return null},i.prototype.setContextMenu=function(e){return e?this.addPopupMenu(this._contextMenu="gridContextMenu",e,!0,this):this._contextMenu=null},i.prototype.addPopupMenu=function(e,t,o,r){if(o===void 0&&(o=!0),t=v.makeArray(t),e&&t)return this.popupMenuManager.addMenu(e,t,o,r)},i.prototype.removePopupMenu=function(e){this.popupMenuManager.removeMenu(e)},i.prototype.getPopupMenu=function(e){return this.popupMenuManager.getMenu(e)},i.prototype.setCursor=function(e,t){if(e){var o=this.getTableCell(e),r=o?this.getTableView(o):this._tableViews[e[Fe]];if(r instanceof Ps)return void r.setCursor(t)}this._container.setCursor(t)},i.prototype.canMoveLayout=function(e){var t=e.root.vindex,o=this.layoutManager;return!(o.mergedRowGrouped&&t<o.rowGroupLevels)&&(this.fixedOptions.movable||t>=o.fixedLayoutCount&&t<o.rightFirstLayout)},i.prototype.canMoveToLayout=function(e){return this.canMoveLayout(e)},i.prototype.getEditCellValue=function(){return this._editController.editValue},i.prototype.setEditCellValue=function(e,t,o){(this.isEditing()||t)&&this._editController.setEditValue(e,o)},i.prototype.searchItem=function(e){e instanceof Nr||(e=new Nr(e));var t=v.makeArray(e.fields),o=v.makeArray(e.values),r=this.itemSource,n=e.startIndex,s=e.reverse,l=-1;if(t&&t.length>0&&o&&o.length>0&&r){var u=void 0,h=void 0,d=void 0,p=void 0,f=t.length,g=[];for(u=0;u<f;u++)h=parseFloat(t[u]),!isNaN(h)&&h>=0?g.push(h):(d=this.dataSource.getFieldIndex(t[u]))>=0&&g.push(d);if(g.length>0){var m=r.itemCount;n=s?Math.min(m-1,n):Math.max(0,n),(l=(s?n>=0:n<m)?r.findItem(g,o,e,n,s?0:m-1):-1)<0&&e.wrap&&(s?n<m-1:n>0)&&(l=r.findItem(g,o,e,s?m-1:0,s?n+1:n-1))}l>=0&&e.select&&(p=this.getIndex(l,v.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(p,!0,!0))}return l},i.prototype.searchCell=function(e){var t,o,r,n=this.itemSource,s=n&&n.dataSource,l=n.itemCount,u=e.fields=v.makeArray(e.fields),h=e.columns=v.makeArray(e.columns),d=[],p=null;if(s)if(!u&&h)for(t=0,o=h.length;t<o;t++){var f=this.columnByName(h[t]);if(f instanceof Oe){if(f.dataIndex<0)throw new Error("invalid search Column "+h[t]);d.push(f.dataIndex)}}else for(t=0,o=(u=u||s.getOrgFieldNames()).length;t<o;t++)r=parseFloat(u[t]),!isNaN(r)&&r>=0?d.push(r):d.push(s.getFieldIndex(u[t]));e instanceof Ar||(e.reverse&&(e.hasOwnProperty("startIndex")||(e.startIndex=l-1),e.hasOwnProperty("startFieldIndex")||(e.startFieldIndex=d.length-1)),e=new Ar(e));var g=e.wrap,m=e.select,b=e.value,C=e.reverse;if(s&&d&&d.length>0&&b!=null){if(d.length>0){var x=C?Math.min(l-1,e.startIndex):Math.max(0,e.startIndex),E=Math.max(C?-1:0,e.startFieldIndex),S=C?x>=0:x<l,P=C?x<l-1||E<d.length:x>0||E>0,R=C?0:l-1;!(p=S?n.findCell(d,b,e,x,R,E):null)&&g&&P&&(p=n.findCell(d,b,e,C?l-1:0,x,C?E:0)),p&&(p.fieldName=s.getOrgFieldName(p.fieldIndex))}if(p&&m){var k=void 0;(k=h?this.getIndex(p.itemIndex,v.pick(this.columnByName(h[p.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(p.itemIndex,v.pick(this.columnByField(p.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(k,!0,!0)}}return p},i.prototype.isCheckable=function(e){var t=this.getItem(e);return t&&t.checkable},i.prototype.isCheckableOfRow=function(e){var t=this.getItemOfRow(e,!0);return t&&t.checkable},i.prototype.setCheckable=function(e,t){var o=this.getItem(e);o&&o.setCheckable(t)},i.prototype.setCheckableOfRow=function(e,t){var o=this.getItemOfRow(e,!0);o&&o.setCheckable(t)},i.prototype.isCheckedItem=function(e){var t=this.getItem(e);return t&&t.checked},i.prototype.isCheckedRow=function(e){var t=this._items.getItemOfRow(e,!0);return t&&t.checked},i.prototype.checkAll=function(e,t,o,r){var n=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(e,t,o,r,n)},i.prototype.toggleCheck=function(e){var t=this.getItem(e);t&&t.checkable&&this.checkItem(t.index,!t.checked,this.checkBar.exclusive,!0)},i.prototype.toggleChecks=function(e,t){var o=[];if(t&&t.isDataRow&&t.checkable){if(this.checkBar.merged){var r=e[0],n=e[e.length-1],s=r.index,l=n.index,u=this.checkBar.merges,h=u.getRoom(le.temp(this,s,null));s=Math.min(s,h?h.head:s),h=u.getRoom(le.temp(this,l,null)),l=Math.max(l,h?h.tail:l),e=[];for(var d=s;d<=l;d++){var p=this.getItem(d);p.checkable&&p.isDataRow&&e.push(p)}}for(d=0;d<e.length;d++)e[d].checkable&&e[d].dataRow>=0&&o.push(e[d]);var f=!t.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),o.length>0&&this._items.checkItems(o,f,!0)}},i.prototype.checkItem=function(e,t,o,r){var n=this.getItem(e);n&&this._items.checkItem(n,t,o,r)},i.prototype.checkRow=function(e,t,o,r){var n,s=this.getItemIndexOfRow(e);s>-1&&(n=this.getItem(s))&&(n=n instanceof Hr?n:null),(n=n||this.getItemOfRow(e,!0))&&this._items.checkItem(n,t,o,r)},i.prototype.checkItems=function(e,t,o){var r=this._items.getItemsByIndices(e);this._items.checkItems(r,t,o)},i.prototype.checkRows=function(e,t,o){var r=this._items.getItemsByRows(e,!0);this._items.checkItems(r,t,o)},i.prototype.setAllCheck=function(e,t){var o=this.checkBar.exclusive;if(this._headView.allChecked=e,t&&(!o||!e)){var r=this.checkBar;this.checkAll(e,r.visibleOnly,r.checkableOnly,!1)}},Object.defineProperty(i.prototype,"allChecked",{get:function(){return this._headView.allChecked},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){},i.prototype.applyCheckables=function(){},i.prototype.registerCustomRenderer=function(e,t){this._delegate.addCustomRenderer(e,t)},i.prototype.unregisterCustomRenderer=function(e){this._delegate.removeCustomRenderer(e)},i.prototype.existsCustomRenderer=function(e){return this._delegate.existsCustomRenderer(e)},i.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},i.prototype.getValueAt=function(e,t){var o=this.getItem(t),r=e.firstColumn;if(r instanceof Oe)return o&&o.getData(r.dataIndex)},i.prototype.getCellValue=function(e){if(this.isValid(e)){var t=this.getItem(e.itemIndex),o=e.dataColumn;if(t&&o)return t.getData(o.dataIndex)}},i.prototype.getDistinctItemValues=function(e,t,o){t===void 0&&(t=-1),o===void 0&&(o=c.SortDirection.ASCENDING);var r=this.columnByField(e);if(!r)return null;if(t!=0){var n=r.getField().dataType,s=[],l=[];return this._items._rs.getAllItems().forEach(function(u){if(u instanceof Tt||u instanceof ht){var h=u.getData(e);switch(n){case c.ValueType.NUMBER:h!=null&&isNaN(h)||s.indexOf(h)<0&&s.push(h);break;case c.ValueType.DATE:case c.ValueType.DATETIME:h?l.indexOf(h.getTime())<0&&(l.push(h.getTime()),s.push(h)):s.indexOf(h)<0&&s.push(h);break;default:s.indexOf(h)<0&&s.push(h)}}}),o!==c.SortDirection.NONE&&(v.included(n,c.ValueType.DATETIME,c.ValueType.DATE,c.ValueType.NUMBER)?s.sort(function(u,h){return u-h}):s.sort(),o===c.SortDirection.DESCENDING&&s.reverse()),t<0?s:s.slice(0,t)}return null},i.prototype.getDisplayText=function(e){var t=e.dataColumn;if(t){var o=t.dataIndex;if(o>=0){var r=e.item;if(r instanceof Tt||r instanceof ht){var n=r.getData(o);if(t instanceof Ji)return vs.getText(n);var s=new Fn,l=this._body.getCellFormatters(t,null,e,s);return po._getDisplayText(this,r,t,n,l)}if(r instanceof Kt){var u=t.groupFooters.get(r.$_footerIndex);return n=Lo.getValue(r,t),l=this._rowGroup.getFooterCellFormatters(u,null),Lo.$_displayText(r,t,n,l)}}}return""},i.prototype._fitLayoutWidth=function(e,t){var o=function(j){var K=tt(j).getComputedStyle(j),U={};if(K){u=K.paddingLeft;var Y=parseInt(u.substr(0,u.indexOf("px")));h+=Y>0?Y:0,u=K.paddingRight,Y=parseInt(u.substr(0,u.indexOf("px"))),h+=Y>0?Y:0,U={fontSize:K.fontSize,fontFamily:K.fontFamily,fontWeight:K.fontWeight,fontStyle:K.fontStyle}}return{w:h,font:U}};if(!e.visible)return 0;var r=this.itemSource,n=this.getIndex(this.topIndex,e.firstColumn),s=e.firstColumn.header,l="",u="",h=0,d=0,p=0,f=this.getHeaderCellAt(e),g=f&&f.cell.firstElementChild;if(t&&g){var m=o(g),b=m.w,C=m.font,x=f.marginLeft+f.marginRight+2+f.checkWidth;d=b+this.container.measureText("rg-header-cell",s.displayText,C)+x}else t&&(p=v.getTextLength(l),d=h+this.container.measureText("rg-header-cell",s.displayText,null)+2);var E,S=this.getBodyCellAt(n,!1),P=S&&S.renderer2&&S.renderer2._dom;if(P){var R=o(P),k=R.w;E=R.font,h=k}for(var D=0,F=r.itemCount;D<F;D++)n.itemIndex=D,u=this.getDisplayText(n),v.getTextLength(u)>p&&(p=v.getTextLength(u),l=u);if(p>0){h+=this.container.measureText("rg-data-cell",l,E)+2;var H=e.getDataColumn(),N=H.editor,V=this.delegate.getCellEditor(wt.getEditorType(N));V.hasButton(this.displayOptions.showNativeEditButton,N)&&(h+=this.body.editButtonWidth*V.buttonCount),H.button!==c.CellButton.NONE&&(h+=this.body.cellButtonWidth)}return Math.max(h,d)},i.prototype.fitLayoutWidth=function(e,t,o,r){var n=0;function s(l,u){var h=this.getHeaderCellAt(l);if(r&&h){var d=h.textSpan,p=d.style.whiteSpace;d.style.whiteSpace="nowrap";var f=d.getBoundingClientRect().width;return d.style.whiteSpace=p,f+=h.expander?h.expander.getBoundingClientRect().width:0,Math.max(f+6,u)}return u}return r=r==null||r,e instanceof We?n=this._fitLayoutWidth(e,r):e instanceof it&&(n=(function l(u){for(var h=u.direction===c.ColumnLayoutDirection.HORIZONTAL,d=0,p=0,f=u.visibles;p<f.length;p++){var g=f[p],m=0;g instanceof We?(m=this._fitLayoutWidth(g,r),g._defColSpan===1&&(g.cellWidth=m)):g instanceof it&&(m=l.call(this,g),m=s.call(this,g,m)),d=h?d+m:Math.max(d,m)}return d}).call(this,e),n=s.call(this,e,n)),o&&o>this.displayOptions.minCellWidth&&(n=Math.max(n,o)),t&&t>this.displayOptions.minCellWidth&&(n=Math.min(n,t)),e.cellWidth=n},i.prototype.$_fitHeaderHeight=function(){var e=this._headerView.getMeasureHeights(),t=e.reduce(function(o,r){return o+r},0);return this.header.heights=e.slice(),this.header.height=t,t},i.prototype.fitHeaderHeight=function(){this._loading?this._fitHeader=!0:this.$_fitHeaderHeight()},i.prototype.canMoveRow=function(e,t){return t===void 0&&(t=!0),!this.isEditing()&&!this.isItemEditing()&&(t||this._editOptions.movable)&&(!e||this.itemSource.movable)},i.prototype.moveRows=function(e,t){if(this.canMoveRows(e,!0,t))return this._doMoveRows(e,t)},i.prototype.moveSelection=function(e,t){var o=this.getSelectedItems(!1);if(o&&o.length>0){var r=o[0],n=r.index,s=this.itemSource;if(e>0&&n+e<=s.itemCount||e<0&&n>0){var l=this._getMoveTarget(t,o,n,e);if(this.moveRows(o,l)){e=this.isTree()?r.index-n:e;var u=this.getSelection();u.moveRow(e),this._selections.clear(!0),this._selections.$_addItem(u,!0);var h=this._focusedIndex.clone();h.itemIndex=this.isTree()?r.index:n+e,this.setFocusedIndex(h,!1,!0,!1)}}}},i.prototype.isSelectedItem=function(e){return this.selections.containsItem(e,null)},i.prototype.isSelectedLayout=function(e){return this.selections.containsLayout(e)},i.prototype.getFilteredColumns=function(){for(var e=this.columnCount,t=[],o=0;o<e;o++){var r=this.getColumn(o);r.isFiltered()&&t.push(r)}return t},i.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},i.prototype.setProgress=function(e,t,o,r){this._progressManager.setProperties(e,t,o,r)},i.prototype.closeProgress=function(){this._progressManager.close()},i.prototype.showLoading=function(e){this._progressManager.loaderShowing()||(e?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},i.prototype.hideLoading=function(){this._progressManager.closeLoader(),this._progressManager._gridDisabled!==void 0&&(this.container.disabled=this._progressManager._gridDisabled)},i.prototype.beginExportProgress=function(e){this._progressManager.show(this._container._containerDom,e,this._displayOptions.baseZindex)},i.prototype.endExportProgress=function(){this._progressManager.close()},i.prototype.setExportProgress=function(e,t,o){this._progressManager.setProperties(0,e,t,o)},i.prototype.setEmptyMessage=function(e){this._emptyView.setMessage(e)},i.prototype.setWatchTimer=function(e){this._container.setWatchTimer(e)},i.prototype.layoutExpandAll=function(e,t){this._activeCellLayout.expandAll(e,t)},i.prototype.isRecycleMode=function(){return this.displayOptions.refreshMode===c.RefreshMode.RECYCLE},i.prototype.invalidateGridObject=function(){var e=!1,t=this._gridObjects;return t.forEach(function(o){o instanceof Os||(e=e||o.dirty)}),e&&t.forEach(function(o){o instanceof Os||(o._dirty=!0)}),e},i.prototype._getCssSelector=function(){return""},Object.defineProperty(i.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),i.prototype._createDelegate=function(){return new Yc(this)},i.prototype._createLayoutManager=function(){return new xl(this)},i.prototype._createEditController=function(){return v.isMobile()?new Zm(this):new $c(this)},i.prototype._createSelectionLayer=function(){return v.isMobile()?new Wc(this,"mobileSelectionLayer"):new uc(this,"selectionLayer")},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},i.prototype.setRect=function(e){var t=e.width!=this.width||e.height!=this.height;a.prototype.setRect.call(this,e),t&&(this._dirty=!0)},i.prototype._doDraw=function(e){},i.prototype.$_containerResized=function(){v.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout((function(){var e=this.topItem,t=this.layoutManager.fullItemCount,o=this.focusedIndex.itemIndex;e+t<o&&(this.topIndex=o-Math.round(t/2))}).bind(this),10),this._columnsDirty=!0},i.prototype._doCreateOtherElements=function(){},i.prototype._doContentPanesCreated=function(){},i.prototype._createSidePane=function(){return null},i.prototype.isSidePaneVisible=function(){return!1},i.prototype._createBodyView=function(e){return new Oi(this.doc,e)},i.prototype._createFixedBodyView=function(e){return new vc(this.doc,e)},i.prototype._createRightBodyView=function(e){return new wc(this.doc,e)},i.prototype._initStyles=function(){},i.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},i.prototype._columnVisibleChanged=function(e){this._activeCellLayout._columnChanged(e)},i.prototype._resetColumnIndices=function(e){e===void 0&&(e=null),e?e._resetIndices(this):this._columns.resetIndices(),!e&&!this._cellLayoutDirty&&this.clearAddSelection(!0)},i.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},i.prototype._cleanGridObjects=function(){for(var e=0,t=this._gridObjects.length;e<t;e++)this._gridObjects[e].clean()},i.prototype._visualObjectChanged=function(e){this.invalidateLayout()},i.prototype._addGridObject=function(e){this._gridObjects.push(e)},i.prototype.addElement=function(e){this._rootElement.addChild(e)},i.prototype.$_prepareRender=function(e){this._doPrepareRender(e)},i.prototype._doPrepareRender=function(e){if(this._horzScrolled)try{var t=this._layoutManager;t.setLeftPos(e,this._leftPos),this._leftPos=t.leftPos,this.$_updateScrollBars(t),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},i.prototype.$_layout=function(e){this._doLayout(e)},i.prototype.$_detectWidth=function(){return!this.displayOptions.watchDisplayChange&&this.layoutManager.syncHeight()},i.prototype.$_beforeRender=function(){this._itemCheckChanged&&this._syncHeadCheck([]),this._beforeCount=this.layoutManager.itemCount,this.$_detectWidth()&&(this._beforeWidth=this.container.getContainerWidth())},i.prototype.$_afterRender=function(){var e=this.$_detectWidth()&&this._beforeWidth!=this.container.getContainerWidth();if(this._layoutManager.needRelayout()||this._fitHeader||e)this._fitHeader&&this.$_fitHeaderHeight(),this._fitHeader=!1,this.invalidateLayout();else{if(this._topIndexChanged&&(this._topIndexChanged=!1,this._needRefresh=!0,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this.leftPos!==this._prevLeftPos&&(this._fireLeftPosChanged(this.leftPos),this._prevLeftPos=this.leftPos),this._beforeCount<this.layoutManager.itemCount&&(this._needRefresh=!0),this._resetTdFocus&&this._container._focused){var t=this.focusedIndex,o=this.doc;v.isAncestorOf(this.container._containerDom,o.activeElement,null)&&this.accessibility&&this.isValid(t)&&this.layoutManager.cellIsVisible(t)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout((function(){this._setFocusTimer=null,this.getBodyViewAt(t).refreshTdFocused(t,!0)}).bind(this),20)),delete this._resetTdFocus}[this.fixedBodyView,this.bodyView,this.rightBodyView].forEach(function(r){if(r.visible)for(var n=r._tbody.rows,s=0,l=n.length;s<l;s++)n[s].recycle=!1}),this._fireDataLoadComplated(),this._horzScrolled&&this._needRefresh&&(this._needRefresh=!1),this._horzScrolled=!1,this._dataChanged=!1,this._needPosition=!1,this._itemCheckChanged=!1,this._fitHeader=!1,this._watermarkLayer&&this._watermarkLayer.refresh()}},i.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},i.prototype._doLayout=function(e){var t=this._layoutManager;this._resetting=!1;try{this.$_doLayout(t,e)}finally{this._loading=!1,this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var o=t.bodyBounds.clone();o.topBy(t.topContentBounds.bottom),this._emptyView.setBounds(0,o.y,this.width,o.height)}if(this._debugging&&this._debugView.layout(),this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),t.itemCount>0){var r=t.topIndex,n=r+t.fullItemCount;this._topIndexChanged=r!==this._prevTop,this._prevTop=r,n==this._prevLast||n!=this.itemCount||v.included(this.displayOptions.syncGridHeight,[c.SyncGridHeight.ALWAYS,c.SyncGridHeight.OVER])||setTimeout((function(){this._fireScrollToBottom()}).bind(this),1),this._prevLast=n}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._editController.remainFocusing(!1),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},i.prototype.$_doLayout=function(e,t){var o=this._displayOptions,r=this._fixedOptions,n=t.clone(),s=o.vscrollBar?this._scrollBarWidth:0,l=o.hscrollBar?this._scrollBarHeight:0;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,o.minCellWidth),this._columnsDirty&&this._activeCellLayout.$_prepareLayout(this,r.colCount,r.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate();var u=e.topIndex,h=e.leftPos;if(e.measure(n,this._leftPos,this._topIndex,s,l),u!==e.topIndex){var d=e.topIndex-u,p=[this.fixedBodyView,this.bodyView,this.rightBodyView];this.isRecycleMode()&&!this._dataLoad&&d&&Math.abs(d)<e.fullItemCount/2?p.forEach(function(g){g&&g.visible&&g.reArrangeRows(e,d)}):p.forEach(function(g){g&&g.cleanRecycle()})}if(this._horzScrolled=this._horzScrolled||h!==e.leftPos,e.layout(n),this._leftPos=e.leftPos,this._topIndex=e.topIndex,this.displayOptions.refreshMode!==c.RefreshMode.RECYCLE){var f=this.container._containerDom;n=new Z(0,0,f.clientWidth,f.clientHeight)}this.$_updateScrollBars(e,n),this._layoutSelectionViews(),this._layouted=!0},i.prototype._columnCheckedChanged=function(e){this._fireColumnCheckedChanged(e)},i.prototype.$_updateScrollBars=function(e,t){if(e.hscrollBar){var o=e.bodyBounds.width,r=Math.min(e.scrollWidth);this._hscrollBar.setProperties(0,o,r),this._hscrollBar.setPosition(e.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(e.vscrollBar){var n=this.itemCount,s=n-e.fixedItemCount,l=Math.min(e.fullItemCount,n-e.topIndex);this._vscrollBar.setProperties(0,s,l),this._vscrollBar.setPosition(e.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);t&&this.$_layoutScrollBars(e,t)},i.prototype.$_layoutScrollBars=function(e,t){var o=e.scrollBarWidth,r=e.scrollBarHeight,n=this._hscrollBar,s=this._vscrollBar;e.hscrollBar&&(n.setBounds(t.x,t.bottom-r,t.width-o,r),n.layoutContent()),e.vscrollBar&&(s.setBounds(t.right-o,t.y,o,t.height-r),s.layoutContent()),(this._scrollEdge.visible=e.vscrollBar&&e.hscrollBar)&&this._scrollEdge.setBounds(t.right-o,t.bottom-r,o,r)},i.prototype._columnMergeRuleChanged=function(e){this._populateMerges(),this.refreshView()},i.prototype._canMerge=function(){return!1},i.prototype._populateMerges=function(){this._needMerge=!0},i.prototype.$_populateMerges=function(){if(this._canMerge()){for(var e=this.getHorzColumns(),t=0,o=e.length;t<o;t++){var r,n=e[t],s=n&&n.layout;s&&s.canMerge()&&((r=s.merges)||(r=new xs(s)),r.clear(),n instanceof Oe&&n.mergeGrouped?this.getGroupLevel(n.dataIndex)>0&&r.initialize(_o.INIT_COUNT):r.initialize(_o.INIT_COUNT))}this._checkBar.canMerge()&&((r=this._checkBar.merges||new sc(this._checkBar)).clear(),r.initialize(_o.INIT_COUNT))}},i.prototype._doRowGroupMergeModeChanged=function(){},i.prototype._addSelectionView=function(e){this._selectionLayer.addView(e)},i.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},i.prototype._removeSelectionView=function(e){this._selectionLayer.removeView(e)},i.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},i.prototype.$_checkCurrentRow=function(e){if(e===void 0&&(e=!1),this._focusedIndex){var t=this._focusedIndex.dataId,o=this._focusedIndex.dataRow;if(e||t!=this._currentRowId){clearTimeout(this._rowChangeTimer);var r=this.container.defaultTool,n=this._currentRow,s=this._displayOptions.rowChangeDelay,l=e||s<=0;return this._currentRowId=t,this._currentRow=o,l?(this._fireCurrentRowChanged(n,o),r.currentRowChanged(n,o)):s>0&&(this._rowChangeTimer=setTimeout((function(){this._fireCurrentRowChanged(n,o),r.currentRowChanged(n,o)}).bind(this),s)),!0}}return!1},i.prototype.$_doSetFocusedIndex=function(e,t,o,r,n){if(r===void 0&&(r=!0),n===void 0&&(n=!0),!e){if(r)return!1;e=this.getIndex(-1,null)}var s,l,u;if(!this.isValid(e)&&r&&(e=e.clone()).normalize(this),!this.isValid(e)){var h=this.dataSource;if(!h||h.rowCount==0||this.itemCount==0)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}var d=this.selections.count===1?this.getSelection(0):null;if(le.areEquals(e,this._focusedIndex))return!(d&&d.single&&this.selections.containsCell(e))&&this.clearAddSelection(t,n),!0;var p=this._editOptions,f=this._focusedIndex.clone(),g=this.itemSource,m=this.container.defaultTool,b=this.layoutManager;if(this.editOptions.currentChangingFirst?!this._fireCurrentChanging(f,e)||!this._editController.focusedIndexChanging():!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(f,e)){var C=this.activeTool.dragTracker;return C instanceof Qr&&(C.dragging?C.cancel():this.activeTool.dragTracker=null),!1}var x=f.item;if(!this.isItemEditing(x)||this.isItemEdited(x)||e.itemIndex==f.itemIndex||x.itemState!==c.ItemState.UPDATING||p.commitWhenNoEdit)if(g&&e.itemIndex!=f.itemIndex)try{if(x)switch(x.itemState){case c.ItemState.INSERTING:if(!this.commit(p.forceInsert,!0))return this.cancel(!0),!1;break;case c.ItemState.APPENDING:if(!this.commit(p.forceAppend,!0))return this.cancel(!0),!1;break;case c.ItemState.UPDATING:if(!this.commit(p.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(D){if(D instanceof Rt)return(D=this._fireValidationFail(x.index,D.column,D))&&alert(p.showOnlyValidationMessage&&D.userMessage?D.userMessage:D.toString()),this.invalidateLayout(),!1;if(D instanceof Ko)return!1;throw D}else x&&this.isItemEditing(x)&&p.validateOnExit&&this.invalidateLayout();else this.cancel(!0);m.focusedIndexChanging(e),this._focusedIndex.assign(e),this.$_checkFocusedLayout(),u=this.getBodyCellAt(f,!1),l=this.getBodyCellAt(e,!1),this.isValid(f)&&(s=b.getBodyView(f)).$_focusChanged(this,u,!1),this.isValid(e)&&(s=b.getBodyView(e)).$_focusChanged(this,l,!0),g instanceof gi&&g.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(f,e,!1),m.focusedIndexChanged(f,e);var E=this._focusedIndex,S=this.isValid(E);d&&vr(d.style)&&this.selections.containsCell(E)||this.clearAddSelection(t,n),this._layouted&&this._refreshSideViews();var P=!le.areEquals(E,b._prevFocused);if(o||P)if(this.$_makeFocusedIndexVisible())this._resetTdFocus=!1,this.accessibility&&!this.isEditing()&&this.isValid(E)&&this.isValid(f)&&(s=this.getBodyViewAt(f),this._eventFrom!=="mousedown"&&f.itemIndex!==E.itemIndex&&s&&s.tdClone(f),this._resetTdFocus=!0);else{var R,k;this._editController.resetEditor(!1),this.isValid(E)&&this.getItem(E.itemIndex).canEdit()&&this._editController.prepareEditor(E),this.isValid(f)&&(R=this.getBodyViewAt(f))&&(k=R.getRowView(f.item))instanceof bi&&k.resetButtons(this,u,l),!this.container.isLayoutNeeded()&&S&&(R=this.getBodyViewAt(E))&&(k=R.getRowView(E.item))instanceof bi&&k.resetButtons(this,u,l),this.accessibility&&!this.isEditing()&&this.isValid(E)&&this.layoutManager.cellIsVisible(E)&&(s=this.getBodyViewAt(E))&&s.refreshTdFocused(E,!0)}return this._fireCurrentChanged(this._currentIndex.assign(E)),this.$_checkCurrentRow(),!0},i.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},i.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},i.prototype.makeCellVisible=function(e){if(this.isValid(e)||e&&e.column){if(this.layoutManager.makeCellVisible(e),!this.layoutManager.focusIsVisible())return this._eventFrom!=="mousedown"&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},i.prototype.makeColumnVisible=function(e){if(e){var t=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,e);this.makeCellVisible(t)}},i.prototype.makeItemVisible=function(e){if(e>=0){var t=this.getIndex(e,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(t)}},i.prototype.cancelEditor=function(e){this.isEditing()&&(e=!(arguments.length>0)||e,this._editController.cancelEditor(e))},i.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},i.prototype.$_cancelItem=function(e,t){t===void 0&&(t=!1);var o=v.cast(this.itemSource,gi);return!!(o&&e&&o.isEditing(e))&&(this._validationManager.clearInvalidCells(-1),o.cancel(),t&&this.resetFocusedIndex(),!0)},i.prototype.cancel=function(e){e===void 0&&(e=!1);var t=this.editController;this.isEditing()&&(t.cancelEditor(!0),t.invalidateEditor());var o=this.focusedIndex;return!(!this.isValid(o)||!this.$_cancelItem(o.item))&&(o=o.clone(),this._rowBarContainer.stateError=void 0,t._prepareEditor(t._editIndex),o.normalize(this),o.item instanceof jr&&o.up(),this.setFocusedIndex(o),e&&this.$_makeFocusedIndexVisible(),!0)},i.prototype.commitEditor=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!1),this.isEditing()&&this.editController.commitEditor(e,!1,!0,t)},i.prototype.$_commitItem=function(e,t,o){var r=v.cast(this.itemSource,gi),n=this.validationManager;if(r&&e&&r.isEditing(e)&&(t||r.isEdited(e))){var s=Ei(e.itemState);try{n.validateRow(e,s,!1,!1),this._rowBarContainer.stateError=void 0}catch(l){throw l instanceof Rt&&(l.level=l.level||c.ValidationLevel.ERROR,!l.column&&(this._rowBarContainer.stateError=l)),l}if(!r.commit()){if(o)throw new Ko("Commit failed.");return!1}return e.dataId>-1&&n.cloneError(-1,e.dataId),n.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&e.dataId>-1&&n.clearInvalidCells(e.dataId),!0}},i.prototype.commit=function(e,t,o){o===void 0&&(o=!0);var r=this.focusedIndex,n=!0;return!!this.isValid(r)&&(this.isEditing()&&(n=this.editController.commitEditor(!0,!1,o,e),this.editController.invalidateEditor()),n&&this.$_commitItem(r.item,e,t))},i.prototype.editorCancel=function(e,t){this._doCellCancel(t)},i.prototype._doCellCancel=function(e){return this._fireEditCanceled(e)},i.prototype.editorCanceled=function(){this.activeTool.resetFocused()},i.prototype._editorStarted=function(e,t){if(this.closePopups(!1),this.edit(t))return!0},i.prototype._editorChange=function(e,t,o){this._fireEditChange(t,o)},i.prototype._editorSearch=function(e,t,o){this._fireEditSearch(t,o)},i.prototype._searchCellButtonClick=function(e,t,o){return this._fireSearchCellButtonClick(t,o)},i.prototype.$_getFieldDefaults=function(e){function t(l,u){for(var h=0;h<l.columnCount;h++){var d=l.getColumn(h);if(d instanceof Oe&&d.dataIndex==u){var p=d.getField();return p&&p.defaultValue}}}for(var o=this.dataSource.fieldCount,r=[],n=0;n<o;n++)r.push(void 0);for(n=0;n<o;n++){var s=t(this,n);s&&(r[n]=s)}return r},i.prototype.$_getColumnDefaults=function(e){for(var t=0,o=this.columnCount;t<o;t++){var r=this.getColumn(t);r instanceof Oe&&r.defaultValue!=null&&(e[r.dataIndex]=r.defaultValue)}},i.prototype.$_getItemDefaults=function(e,t){},i.prototype.$_readDefaultValues=function(e){},i.prototype.$_getInsertDefaults=function(e){var t=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(t),this.$_getItemDefaults(null,t),this.$_readDefaultValues(t),t},i.prototype.sortColumn=function(e,t){e&&(this.sortingOptions.style==c.SortStyle.EXCLUSIVE?t&&t.shiftKey?this.sortColumnWithStyle(c.SortStyle.INCLUSIVE,e):this.sortColumnWithStyle(c.SortStyle.EXCLUSIVE,e):this.sortColumnWithStyle(this.sortingOptions.style,e))},i.prototype.sortColumnWithStyle=function(e,t){if(!t)throw new Error("column is null");if(!(this.isItemEditing(null)||t.dataIndex<0)){var o=this._sortingOptions.textCase;e==c.SortStyle.EXCLUSIVE?t.sortOrder<0?this.orderBy([t],[c.SortDirection.ASCENDING],[o]):t.sortDirection==c.SortDirection.ASCENDING?this.orderBy([t],[c.SortDirection.DESCENDING],[o]):this.isGroupedColumn(t)&&this.itemSource._groupSorting?this.orderBy([t],[c.SortDirection.ASCENDING],[o]):this.unsortColumnWithStyle(e,t):e!=c.SortStyle.INCLUSIVE&&e!=c.SortStyle.REVERSE||(t.sortOrder<0?this.$$_addSort(t,c.SortDirection.ASCENDING,o,e==c.SortStyle.REVERSE):t.sortDirection==c.SortDirection.ASCENDING?this.$$_addSort(t,c.SortDirection.DESCENDING,o,e==c.SortStyle.REVERSE):this.isGroupedColumn(t)&&this.itemSource._groupSorting?this.$$_addSort(t,c.SortDirection.ASCENDING,o,e==c.SortStyle.REVERSE):this.unsortColumnWithStyle(e,t))}},i.prototype.orderBy=function(e,t,o){if(!this.isItemEditing(null))if(!e||e.length<1)this._sortItems([],[],[]);else{for(var r=[],n=e.length,s=0;s<n;s++){var l=e[s];r.push(l.dataIndex)}this._sortItems(r,t,o)}},i.prototype.unsortColumnWithStyle=function(e,t){if(!this.isItemEditing()&&t){var o=this.getSortFields(),r=this.getSortDirections(),n=this.getSortCases(),s=o.indexOf(t.dataIndex);s<0||(e==c.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):e!=c.SortStyle.INCLUSIVE&&e!=c.SortStyle.REVERSE||(o.splice(s,1),r.splice(s,1),n.splice(s,1),this._sortItems(o,r,n)))}},i.prototype.$$_addSort=function(e,t,o,r){var n=this.getSortFields(),s=this.getSortDirections(),l=this.getSortCases(),u=e.dataIndex,h=n.indexOf(u);h>=0?(s[h]=t,l[h]=o):r?(n.splice(0,0,u),s.splice(0,0,t),l.splice(0,0,o)):(n.push(u),s.push(t),l.push(o)),this._sortItems(n,s,l)},i.prototype._sortItems=function(e,t,o){var r=this,n=e.concat(),s=t?t.concat():[],l=o?o.concat():[];this._fireSorting(n,s)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var u=r.sortingOptions.keepFocusedRow&&r.focusedIndex?r.focusedIndex.dataRow:-1;if(r._doSortItems(e,s,l),u>=0){var h=le.temp(r,r.getItemIndexOfRow(u),r.focusedIndex.column);r._editController.remainFocusing(!0),r.setFocusedIndex(h,!0,!0)}})},i.prototype._doPrepareComparer=function(e){for(var t={},o=0;o<e.length;o++){var r=this.columnByField(e[o]);r.sortByLabel&&(t[e[o]]=n(r))}return t;function n(s){var l=s.grid;return function(u,h,d){var p=l.getItemOfRow(h,!0),f=l.getItemOfRow(d,!0),g=po.getText(p,s),m=po.getText(f,s);return g==m?0:g==null?m==null?0:-1:m==null||g>m?1:g<m?-1:0}}},i.prototype._doSortItems=function(e,t,o){},i.prototype.getSortFields=function(){return null},i.prototype.getSortDirections=function(){return null},i.prototype.getSortCases=function(){return null},i.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(i.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterSelector",{get:function(){return this._filterSelector},enumerable:!1,configurable:!0}),i.prototype.applyFilters=function(e,t){var o=this;if(this.isItemEditing(null))return!1;if(this._fireFiltering()){var r=this.filteringOptions.toast,n=r.visible;return this.dataCount<=0&&(r.visible=!1),this._toastManager.show(r,!0,function(){o._editController.remainFocusing(!0),o.$_doApplyFilters(e,t),r.visible=n}),!0}return!1},i.prototype.$_findFilterView=function(e){if(!e)return{};for(var t,o=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],r=0;r<o.length;r++)if(o[r].visible&&(t=o[r].tableCellByLayout(e)))return{view:o[r],cell:t};return{}},i.prototype.filterOperatorCallback=function(e,t,o){var r=this.layoutByName(o.column),n=this.$_findFilterView(r),s=n.view,l=n.cell;l&&s.operatorChange(l,t,r,o)},i.prototype.clearInlineFilter=function(e){var t=e&&e.layout;if(t){var o=this.$_findFilterView(t),r=o.view,n=o.cell;r.clearInput(n,e)}else[this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach(function(s){return s.clearInput()}),this.$_doApplyFilters(null,null)},i.prototype.inlineFilterFocus=function(e){var t=this.$_findFilterView(e),o=t.view,r=t.cell;o.setFocus(r)},i.prototype.$_doApplyFilters=function(e,t){var o=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(e,t),o!==this._items.itemCount&&(this.topIndex=0),this._filterRunning=!1}},i.prototype.$_addFilters=function(){for(var e=this.columnCount,t=0;t<e;t++){var o=this.getColumn(t),r=o.autoFilter?o.autoFilters:o.filters;if(r&&r.activeCount>0)for(var n=0,s=r.count;n<s;n++){var l;(l=r.getItem(n)).active&&this._items.addFilter(o.dataIndex,l)}(r=o._inlineFilters)&&r.activeCount>0&&(l=r.getItem(0)).active&&this._items.addFilter(o.dataIndex,l)}},i.prototype.columnFilterChanged=function(e,t){this._doColumnFiltersChanged(e,t)},i.prototype.canGrouping=function(){return!1},i.prototype.$_layoutRowHover=function(e,t,o){var r=this._layoutManager,n=r.footerBounds.y+r.contentBounds.y,s=this.getBodyView(e.cell);if(s){var l=r.getTableRowIndex(t);if(!(l<0)){l=s.getViewIndex(l);var u=r.getTableItemBounds(l);switch(u.y+=r.contentBounds.y+r.bodyBounds.y,u.bottom>n&&(u.bottom=n),o){case c.RowMaskType.DATA:u.x=this._fixedContentPane.x,u.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case c.RowMaskType.FILL:u.x=0,u.width=this.width;break;case c.RowMaskType.CELL:var h=s.pointByContainer(0,0),d=s.getCellRect(r,e,!0);u.x=d.x+h.x,u.width=d.width;break;case c.RowMaskType.ROW:u.x=0,u.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(u)}}},i.prototype.$_resetHovering=function(e,t,o){o===void 0&&(o=!1);var r=this.activeTool;if(r instanceof Bl&&this.canHovering){var n=this.container.getTableCell(r.mouseEventTarget);if(o&&this.isRecycleMode()){var s=le.temp(this);this.layoutManager.mouseToIndex(n,e,t,s);var l=this.getBodyCellAt(s);l&&(n=l.cell)}var u=this.getCellType(n),h=!1,d=!1,p=!1;if(u===c.GridCellType.DATA){var f=this.getBodyView(n).bodyCellByCell(n);this.$_setHoveredCell(f,t,o),r.$_setHoveredCell(f,e,t),h=!0}else if(u===c.GridCellType.HEADER)f=this.getHeaderView(n).tableCellByCell(n),r.$_setHoveredHeaderCell(f,e,t),d=!0;else if(u===c.GridCellType.STATE&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var g=this._rowBarContainer.rowOf(n);this.isItemEditing(this.getItem(g))&&(p=!0,r.$_showStateError(n,this._rowBarContainer.stateError.message))}return!(h||d||p)&&r._hideTooltip(),h||this.$_setHoveredCell(null,t,!1),!0}},i.prototype.$_getCellAt=function(e,t){var o=this.getBodyView(e),r=this.layoutManager,n=this.getDataCellIndex(e,this._currentIndex),s=o.getCellAt(r,n);if(s&&s.merged){var l=r.getTableRowIndex(t);if(l<0)return s;var u=o.getRowIndex(l);return n.itemIndex=Math.min(Math.max(s.item.index,u),s.item.index+s.rowSpan-1),o.getCellAt(r,n)}return s},i.prototype.$_setHoveredCell=function(e,t,o){o===void 0&&(o=!1);var r=e&&this.$_getCellAt(e.cell,t);(o||r!==this._hoveredCell)&&(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),r&&this.getBodyView(r.cell).$_mouseEnteredChanged(this,r,!0),this._doHoveredCellChanged(this._hoveredCell=r)),(o||t!=this._hoveredY)&&(this._hoveredY=t,this.$_resetRowHover())},i.prototype.$_resetRowHover=function(){var e=this._displayOptions.rowHoverType;this._hoveredCell&&e&&e!=c.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,e)):this._rowHoverView.visible=!1},i.prototype.$_resetFocusRender=function(e,t){var o=this.getBodyCellAt(this.focusedIndex,!0),r=o&&o.merged&&(o.renderer2||o.head.renderer2),n=this.canMergeEditing(o);if(r&&r.refreshFocusChanged){var s=this.layoutManager,l=this.getBodyViewAt(this.focusedIndex),u=l.getCellRectAt(s,this.focusedIndex,!1),h=l.getCellRectAt(s,this.focusedIndex,!0),d=u.top-h.top+u.height/2-h.height/2;r.moveClickElement(d,n)}},i.prototype._doHoveredCellChanged=function(e){},i.prototype._doCellButtonClicked=function(e){this._fireCellButtonClicked(e)},i.prototype._syncHeadCheck=function(e,t){var o=this.checkBar;if(o.syncHeadCheck){var r=o.showGroup&&!o.merged;if(t===!1)this._headView.allChecked=t;else if(e==null)this._headView.allChecked=t;else{for(var n=0,s=void 0,l=o.visibleOnly,u=l?this._items.itemCount:(s=this.getAllItems()).length,h=0;h<u;h++){var d=l?this._items.getItem(h):s[h];if((d.isDataRow||r)&&d.checkable){if(!d.checked){n=-1;break}n++}}this._headView.allChecked=n>0}}},i.prototype.getRowHeight=function(e){var t=this.getItem(e);return t?t.height:NaN},i.prototype.setRowHeight=function(e,t,o){o===void 0&&(o=!0);var r=this.getItem(e);r&&(this._items.setRowHeight(r,t,!0),o&&this.refreshView())},i.prototype.clearRowHeights=function(e){e===void 0&&(e=!1),this._items&&this._items.clearRowHeights(e)&&this.refreshView()},i.prototype.setFocusedClass=function(e,t){if(this.displayOptions.useFocusClass){var o=this.getBodyCellAt(e,!0);o&&o.cell&&(t?v.addClassName(o.cell,"rg-focused-cell"):v.removeClassName(o.cell,"rg-focused-cell"))}},i.prototype.setFocusedRowClass=function(e,t){function o(n,s){var l=n.getRowView(s);if(l)for(var u=0,h=l._getTableRows(this.layoutManager);u<h.length;u++){var d=h[u];t?v.addClassName(d,"rg-focused-row"):v.removeClassName(d,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var r=e.item;o.call(this,this.bodyView,r),o.call(this,this.fixedBodyView,r),o.call(this,this.rightBodyView,r)}},i.prototype.getSummaryCount=function(e){switch(e){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},i.prototype.topIndexChanging=function(e,t,o,r){return this._fireTopIndexChanging(e,t,o,r)},i.prototype.$_rendererChanged=function(e){var t=this._layoutManager.getBodyView(e);t&&t.$_rendererChanged(e)},i.prototype.$_clearDropData=function(e){var t=this.getRowsOfItems(e,!1);t.length>0&&this.dataSource.removeRows(t)},i.prototype.$_dropData=function(e,t,o){var r=this.dataDropOptions,n=r.callback,s=o.index;if(n)n(e.handler,t,this.handler,o.index,o.column);else if(s>=0){var l=e.getRowsOfItems(t),u=void 0,h=r.fieldMapCallback;if(h&&(u=h(e.handler,t,this.handler,s,o.column)),u=u||r.fieldMap,s<this.itemCount){var d=this.getRowOfItem(s);d>=0&&this.dataSource.insertRowsFrom(e.dataSource,u,l,d)}else this.dataSource.appendRowsFrom(e.dataSource,u,l)}r.dropMode==c.DataDropMode.MOVE&&e.$_clearDropData(t)},i.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var e=this.getBodyCellAt(this._focusedIndex);e&&e.spanned&&(e=this.getBodyView(e.cell).getCheckedLayout(e),this._focusedIndex.layout=e&&e.layout)}},i.prototype.$_isBottomCell=function(e){var t=this.getBodyCellAt(e);if(t)return this.getBodyView(t.cell).isBottomCell(t)},i.prototype.$_getLowerOfCell=function(e){var t=this.getBodyCellAt(e);if(t)return(t=this.getBodyView(t.cell).getLowerOf(t))&&t.layout.source},i.prototype.$_isTopCell=function(e){var t=this.getBodyCellAt(e);if(t)return this.getBodyView(t.cell).isTopCell(t)},i.prototype.$_getUpperOfCell=function(e){var t=this.getBodyCellAt(e);if(t)return(t=this.getBodyView(t.cell).getUpperOf(t))&&t.layout.source},i.prototype.setCheckFieldIndex=function(e){this._items.setCheckFieldIndex(e)},i.prototype._fireCurrentChanging=function(e,t){return this.fireConfirmEvent("onGridBaseCurrentChanging",e,t)},i.prototype._fireCurrentChanged=function(e){this.fireEvent("onGridBaseCurrentChanged",e)},i.prototype._fireCurrentRowChanged=function(e,t){this.fireEvent("onGridBaseCurrentRowChanged",e,t)},i.prototype._fireValidateCell=function(e,t,o){this.fireEvent("onGridBaseValidateCell",e,t,o)},i.prototype._fireValidateRow=function(e,t,o){this.fireEvent("onGridBaseValidateRow",e,t,o)},i.prototype._fireValidationFail=function(e,t,o){return this.fireObjectEvent("onGridBaseValidationFail",e,t,o)},i.prototype._fireCellClicked=function(e){this.fireEvent("onGridBaseCellClicked",e)},i.prototype._fireCellDblClicked=function(e){this.fireEvent("onGridBaseCellDblClicked",e)},i.prototype._fireCellItemClicked=function(e,t){return this.fireConfirmEvent("onGridBaseCellItemClicked",e,t)},i.prototype._fireColumnCheckedChanged=function(e){this.fireEvent("onGridBaseColumnCheckedChanged",e,e.checked)},i.prototype._firePopupMenuPopup=function(e,t,o,r,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",e,t,o,r,n)},i.prototype._fireMenuItemClicked=function(e,t){this.fireEvent("onGridBaseMenuItemClicked",e,t)},i.prototype._fireContextMenuPopup=function(e,t,o,r,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",e,t,o,r,n)},i.prototype._fireContextMenuItemClicked=function(e,t){this.fireEvent("onGridBaseContextMenuItemClicked",e,t)},i.prototype._fireCellButtonClicked=function(e){this.fireEvent("onGridBaseCellButtonClicked",e)},i.prototype._fireEditButtonClicked=function(e){this.fireEvent("onGridBaseEditButtonClicked",e)},i.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},i.prototype._fireTopIndexChanging=function(e,t,o,r){return this.fireObjectEvent("onGridBaseTopIndexChanging",e,t,o,r)},i.prototype._fireTopIndexChanged=function(e){this.fireEvent("onGridBaseTopIndexChanged",e)},i.prototype._fireLeftPosChanged=function(e){this.fireEvent("onGridBaseLeftPosChanged",e)},i.prototype._fireDataCellClicked=function(e){this.fireEvent("onGridBaseDataCellClicked",e)},i.prototype._fireDataCellDblClicked=function(e){this.fireEvent("onGridBaseDataCellDblClicked",e)},i.prototype._fireRowsDeleting=function(e){return this.fireConfirmEvent("onGridBaseRowsDeleting",e)},i.prototype._fireRowInserting=function(e,t){return this.fireConfirmEvent("onGridBaseRowInserting",e,t)},i.prototype._fireItemCommit=function(e,t){this.fireEvent("onGridBaseItemCommit")},i.prototype._fireSelectionChanged=function(e){return this.fireEvent("onGridBaseSelectionChanged",e)},i.prototype._fireSelectionAdded=function(e){return this.fireEvent("onGridBaseSelectionAdded",e)},i.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},i.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},i.prototype._fireSelectionResized=function(e){return this.fireEvent("onGridBaseSelectionResized")},i.prototype._fireSelectionEnded=function(e){return this.fireEvent("onGridBaseSelectionEnded",e)},i.prototype._fireUpdateStarted=function(e,t){this.fireEvent("onGridBaseUpdateStarted",e)},i.prototype._fireInsertStarted=function(e,t){this.fireEvent("onGridBaseInsertStarted",e,t)},i.prototype._fireShowEditor=function(e,t,o){return this.fireConfirmEvent("onGridBaseShowEditor",e,t,o)},i.prototype._fireShowEditCommand=function(e){return this.fireConfirmEvent("onGridBaseShowEditCommand",e)},i.prototype._fireHideEditor=function(e){return this._doEditorActivated(e,!1,null),this.fireEvent("onGridBaseHideEditor",e)},i.prototype._fireEditChange=function(e,t){this.fireEvent("onGridBaseEditChange",e,t)},i.prototype._fireGetEditValue=function(e,t){this.fireEvent("onGridBaseGetEditValue",e,t)},i.prototype._fireEditCommit=function(e,t,o){return this.fireConfirmEvent("onGridBaseEditCommit",e,t,o)},i.prototype._fireEditCanceled=function(e){this.fireEvent("onGridBaseEditCanceled",e)},i.prototype._fireItemEditCancel=function(e){return this.fireConfirmEvent("onGridBaseItemEditCancel",e)},i.prototype._fireItemEditCanceled=function(e){this.fireEvent("onGridBaseItemEditCanceled",e)},i.prototype._fireEditSearch=function(e,t){this.fireEvent("onGridBaseEditSearch",e,t)},i.prototype._fireSearchCellButtonClick=function(e,t){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",e,t)},i.prototype._fireCellEdited=function(e,t){this.fireEvent("onGridBaseCellEdited",e,t)},i.prototype._fireEditRowChanged=function(e,t,o,r){this.fireEvent("onGridBaseEditRowChanged",e,t,o,r)},i.prototype._fireEditItemPasted=function(e,t,o,r){this.fireEvent("onGridBaseEditRowPasted",e,t,o,r)},i.prototype._fireItemsPasted=function(e){this.fireEvent("onGridBaseRowsPasted",e)},i.prototype._fireCellPasting=function(e,t){return this.fireObjectEvent("onGridBaseCellPasting",e,t)},i.prototype._fireItemChecked=function(e){this.fireEvent("onGridBaseItemChecked",e,e.checked)},i.prototype._fireItemsChecked=function(e,t){this.fireEvent("onGridBaseItemsChecked",e,t)},i.prototype._fireItemAllChecked=function(e){this.fireEvent("onGridBaseItemAllChecked",e)},i.prototype._fireErrorClicked=function(e,t){this.fireEvent("onGridBaseErrorClicked",t)},i.prototype._fireSorting=function(e,t){return this.fireConfirmEvent("onGridBaseSorting",e,t)},i.prototype._fireFiltering=function(){return this.fireConfirmEvent("onGridBaseFiltering")},i.prototype._fireKeyDown=function(e){return this.fireConfirmEvent("onGridBaseKeyDown",e)},i.prototype._fireWheel=function(e){return this.fireConfirmEvent("onGridBaseWheel",e)},i.prototype._fireKeyPress=function(e){this.fireEvent("onGridBaseKeyPress",e)},i.prototype._fireKeyUp=function(e){this.fireEvent("onGridBaseKeyUp",e)},i.prototype._fireShowTooltip=function(e,t){return this.fireObjectEvent("onGridBaseShowTooltip",e,t)},i.prototype._fireShowHeaderTooltip=function(e,t,o){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",e,t,o)},i.prototype._fireColumnPropertyChanged=function(e,t,o,r){this.fireEvent("onGridBaseColumnPropertyChanged",e,t,o,r)},i.prototype._fireLayoutPropertyChanged=function(e,t,o,r){this.fireEvent("onGridBaseLayoutPropertyChanged",e,t,o,r)},i.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},i.prototype._fireCopy=function(e,t){return this.fireConfirmEvent("onGridBaseCopy",e,t)},i.prototype._firePaste=function(e,t){return this.fireConfirmEvent("onGridBasePaste",e,t)},i.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},i.prototype._fireCommandStackChanged=function(e,t){this.fireEvent("onGridBaseCommandStackChanged",e,t)},i.prototype.onPopupMenuManagerMenuItemClicked=function(e,t,o){this._fireMenuItemClicked(t,o)},i.prototype.onPopupMenuManagerPopup=function(e,t,o,r,n,s){return this._firePopupMenuPopup(t,o,r,n,s)},i.prototype.onScrollBarScrolled=function(e,t,o,r){var n,s,l,u=this.displayOptions,h=this.fixedOptions,d=u.scrollMessageCallback,p=t===Wt.SCROLL_END;if(!p&&this.scrollOnEditing(),e.vertical){var f=-1;switch(t){case Wt.LINE:return void this.scrollRow(o);case Wt.PAGE:f=this.topIndex+o*e._page;break;case Wt.THUMB_TRACK:var g=u.scrollDuration;u.liveScroll||this._scrolledTime>0&&v.getTimer()-this._scrolledTime>g?(f=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Sc(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(r,!0),s=this._vscrollBar.pos+h.rowCount,n=d?d(this.handler,e.vertical,s):String(s+1),this._vscrollBar.setText(n),g>0&&this._scrolledTime==0&&(this._scrolledTime=v.getTimer()));break;case Wt.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,f=r,p=!0;break;default:f=r}f>=0&&(this.topIndex=f)}else{var m=-1;switch(t){case Wt.LINE:m=this.leftPos+8*o;break;case Wt.PAGE:m=o>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case Wt.THUMB_TRACK:g=u.hscrollDuration,u.liveScroll||this._scrolledTime>0&&v.getTimer()-this._scrolledTime>g?(m=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Sc(this.container)),this._hscrollBar.tipView=this._scrollTipView,(l=this._layoutManager.getPositionToVIndex(r))>-1&&(n=d?d(this.handler,e.vertical,l):this.getVisibleLayout(l).getDataColumn().header.displayText,this._hscrollBar.setText(n)),this._hscrollBar.setPosition(r,!0),g>0&&this._scrolledTime==0&&(this._scrolledTime=v.getTimer()));break;case Wt.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,m=r,p=!0;break;default:m=r}m>=0&&(this.leftPos=m)}p&&!v.isMobile()&&this.setFocus()},i.prototype.$_checkFocusedRow=function(e){e===void 0&&(e=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(e)},i.prototype.onItemProviderReset=function(e){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!0,this.resetGrid(),this.$_refreshInvalidList(!0)},i.prototype.onItemProviderRefresh=function(e){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this._itemCheckChanged=!0,this.refreshView(),!this._keepNullFocus&&this.setFocusedIndex(this.focusedIndex,!0),this.$_refreshInvalidList(!1)},i.prototype.onItemProviderRefreshClient=function(e){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView()},i.prototype.onItemProviderItemInserted=function(e,t){if(e.dataSource.undoing||e.dataSource.redoing){var o=this._focusedIndex.clone();o.itemIndex=t.index,this.setFocusedIndex(o,!0,!0)}},i.prototype.onItemProviderItemDeleted=function(e,t){if(e.dataSource.undoing||e.dataSource.redoing){var o=this._focusedIndex.clone();o.itemIndex=t.index,this.setFocusedIndex(o,!0,!0)}},i.prototype.onItemProviderItemUpdated=function(e,t){if(e.dataSource.undoing||e.dataSource.redoing){var o=this._focusedIndex.clone();o.itemIndex=t.index,this.setFocusedIndex(o,!0,!0)}},i.prototype.onItemProviderCheckableChanged=function(e,t){this._itemCheckChanged=!0,this.refreshView()},i.prototype.onItemProviderItemChecked=function(e,t){this.refreshView(),this._fireItemChecked(t)},i.prototype.onItemProviderItemsChecked=function(e,t,o){this.refreshView(),this._fireItemsChecked(t,o)},i.prototype.onItemProviderItemAllChecked=function(e,t){this.refreshView(),this._fireItemAllChecked(t)},i.prototype.onItemProviderItemCheckChanged=function(e,t,o){this._itemCheckChanged=!0,this.checkBar.canMerge()&&this._populateMerges()},i.prototype.onItemProviderRowStateChanged=function(e,t){this.refreshView()},i.prototype.onItemProviderRowStatesChanged=function(e,t){this.refreshView()},i.prototype.onItemProviderRowStatesCleared=function(e){this.refreshView()},i.prototype.onItemProviderSort=function(e,t,o){this.refreshView()},i.prototype.onItemProviderSorted=function(e){this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},i.prototype.onItemProviderFiltered=function(e,t,o){this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!this._loading,this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseFilteringChanged",t,o)},i.prototype.onItemProviderCommandStackChanged=function(e,t,o){this._fireCommandStackChanged(t,o)},i.prototype.onItemProviderDataLoadComplated=function(e){this._prevLast=0,this._dataLoad=!0},i.prototype.$_focusEditItem=function(e){var t=this.getIndex(e.index,this.focusedIndex?this.focusedIndex.column:null);!t.column&&this.visibleLayoutCount>0&&(t._layout=this.getVisibleLayout(0)),this.setFocusedIndex(t,!0),this.makeCellVisible(this.focusedIndex)},i.prototype.$_beforeEditing=function(e,t){},i.prototype.onItemEditUpdateStarted=function(e,t){this.$_beforeEditing(e,t),this.refreshView(),this._fireUpdateStarted(t,!1)},i.prototype.onItemEditAppendStarted=function(e,t){this.$_beforeEditing(e,t),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(t),this.requestPrepareEditor(),this._fireInsertStarted(t,!0)},i.prototype.onItemEditInsertStarted=function(e,t){this.$_beforeEditing(e,t),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(t),this.requestPrepareEditor(),this._fireInsertStarted(t,!1)},i.prototype.onItemEditCellEdited=function(e,t,o){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(t,o)},i.prototype.onItemEditCellUpdated=function(e,t,o,r,n){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(t,o,r,n)},i.prototype.onItemEditCommitting=function(e,t){},i.prototype.onItemEditCommitted=function(e,t){this._appendDummy(),this.hideEditor(),this.refreshView()},i.prototype.onItemEditCanceled=function(e){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(e._editingItem)},i.prototype.onItemEditCommitRequest=function(e){this.commit(!1)},i.prototype.onItemEditCancelReuqest=function(e){this.cancel()},i.prototype.onLookupSourceProviderChanged=function(e){this._resetColumnIndices(),this.refreshView()},i.prototype.onSelectionChanged=function(e,t,o){this._refreshSideViews(),o&&this._fireSelectionChanged(t)},i.prototype.onSelectionAdded=function(e,t,o){this._addSelectionView(t),this._layoutSelectionViews(),o&&this._fireSelectionAdded(t)},i.prototype.onSelectionRemoved=function(e,t){this._removeSelectionView(t),this._fireSelectionRemoved()},i.prototype.onSelectionCleared=function(e,t){this._clearSelectionViews(),this._refreshSideViews(),t&&this._fireSelectionCleared()},i.prototype.onSelectionResized=function(e,t){this._layoutSelectionViews(),this._fireSelectionResized(t)},i.prototype.onSelectionEnded=function(e,t){this._fireSelectionEnded(t)},i.prototype.onLayoutExpanding=function(e,t){return this.fireConfirmEvent("onGridBaseLayoutExpanding",t)},i.prototype.onLayoutExpanded=function(e,t){this.fireEvent("onGridBaseLayoutExpanded",t)},i.prototype.onLayoutCollapsing=function(e,t){return this.fireConfirmEvent("onGridBaseLayoutCollapsing",t)},i.prototype.onLayoutCollapsed=function(e,t){this.fireEvent("onGridBaseLayoutCollapsed",t)},i.prototype.onMenuItemClick=function(e,t){this._fireContextMenuItemClicked(e,t)},i}(ty),td=function(a){function i(){var e=a.call(this)||this;return e.prepareProgress=10,e.indicatorNo=1,e}return w(i,a),i.prototype.dispose=function(){return null},i.prototype.export=function(e,t){this.grid=e},i}(dh),Qm=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype.dispose=function(){return a.prototype.dispose.call(this),null},i.prototype.export=function(e,t){a.prototype.export.call(this,e,t);var o=this._exportOptions=t;this._cols=[];var r=e.collectColumns(!0,!0,!0);this._cols=r.filter(function(n){return n instanceof Fi}),this.indicator=o.indicatorVisible(e)?e.rowIndicator:null,this.header=o.headerVisible(e),this.headerSummary=o.headerSummaryVisible(e),this.footer=o.footerVisible(e),this.indicatorHead=e.rowIndicator.headText||"No",this.indicatorFoot=e.rowIndicator.footText||"",this.indicatorSummary=e.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.buildBook=function(){this.buildSheet(this.grid)},i.prototype.buildSheet=function(e){this._rows=[],this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1,this._exportOptions.headerSummary),this.buildItems(e),this.footer&&this.buildSummaryItem(e,!0,this._exportOptions.footer),this.done()},i.prototype.addQuatation=function(e,t){return v.addQuatation(e,t===c.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.buildHeader=function(e){var t=[],o=this._cols;this.indicator&&t.push(this.indicatorHead);for(var r=o.length,n=0;n<r;n++){var s=o[n];t.push(this.addQuatation(s.header.displayText))}this._rows.push(t.join(","))},i.prototype.buildSummaryItem=function(e,t,o){var r,n=this._exportOptions,s=t?e.footers:e.headerSummaries;if(s.visible)for(var l=s.visibleCount,u=0;u<l;u++){var h=[];this.indicator&&h.push(u==0?this.indicatorFoot:"");for(var d=s.getVisible(u),p=0,f=this._cols.length;p<f;p++){var g=this._cols[p],m=d.getCell(g.layout),b=m.getSummary(),C=m.value;r=typeof C=="number"?isNaN(C)?m.text:String(C):C instanceof Date?n.datetimeCallback?(C=n.datetimeCallback(-1,g.name,C,e.handler))instanceof Date?Lt.Default.getText(C):C:Lt.Default.getText(C):C==null?m.text||b.text:String(C),h.push(this.addQuatation(r))}this._rows.push(h.join(","))}},i.prototype.buildItems=function(e){for(var t=this.allItems?this.allItems.length:e.itemSource.itemCount,o=this.allItems,r=0;r<t;r++){var n=o?o[r]:e.getItem(r);this.buildRow(e,n)}},i.prototype.buildRow=function(e,t){var o,r=this._exportOptions,n=[];if(this.indicator){var s=r.showIndicatorRow(e)?t.dataRow:this.indicatorNo++;n.push(s.toString())}for(var l=0,u=this._cols.length;l<u;l++){var h=this._cols[l],d=void 0;if(o=void 0,h instanceof Oe)if(d=h.getField()){var p=mi.tempItem(e,t,h);o=e.getDisplayText(p)}else o="";n.push(this.addQuatation(o,d&&d.dataType))}this._rows.push(n.join(","))},i.prototype.buildGroupHeader=function(e,t){},i.prototype.buildGroupFooter=function(e,t){},i.prototype.buildMergedGroupHeader=function(e,t){},i.prototype.buildMergedGroupFooter=function(e,t){},i.prototype.buildTreeSheet=function(e){this._rows=[],this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1,this._exportOptions.headerSummary),this.buildTreeItems(e),this.footer&&this.buildSummaryItem(e,!0,this._exportOptions.footer),this.done()},i.prototype.buildTreeItems=function(e){for(var t=this.allItems?this.allItems.length:e.itemCount,o=this.allItems,r=0;r<t;r++){var n=o?o[r]:e.getItem(r);if(!(n instanceof ht))throw"Unkonw tree item type";this.buildTreeRow(e,n)}},i.prototype.buildTreeRow=function(e,t){this.buildRow(e,t)},i.prototype.save=function(){var e=this._exportOptions,t=e.fileName,o="\uFEFF"+this._rows.join(`
`),r=this.grid.doc;e.done&&typeof e.done=="function"&&(e.target===c.ExportTarget.STREAM?e.done(o):e.done()),e.target==c.ExportTarget.LOCAL?this.saveLocal(t,o,r):e.target==c.ExportTarget.REMOTE&&this.saveServer(t,On.encode(o),e.url,r,e.params)},i}(td),Gl=function(a){function i(e){var t=a.call(this)||this;return t._styles=null,t.message="",t.visible=!0,t.spaceTop=0,t.spaceBottom=0,t.height=-1,t.styleName="",e&&t.extend(e),t._styles=e&&e.styles?e.styles:null,t}return w(i,a),i.prototype._doDispose=function(){this._styles=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cssStyle",{get:function(){return this._styles},enumerable:!1,configurable:!0}),i}(me),zs="default",rn="hidden",Ri="visible",eb="default",id="item",od="reverse";c.ExportLayoutExpand=void 0,(Ws=c.ExportLayoutExpand||(c.ExportLayoutExpand={})).IGNORE="ignore",Ws.CURRENT="current",Ws.EXPAND="expand",Ws.COLLAPSE="collapse";var Ys=function(a){function i(e){var t=a.call(this,e)||this;return t.nullDateText="",t.linear=!1,t.allColumns=!1,t.allItems=!0,t.onlyCheckedItems=!1,t.pagingAllItems=!1,t.indicator=zs,t.checkBar=rn,t.header=zs,t.footer=zs,t.headerSummary=zs,t.indicatorValue=eb,t.checkMark="v",t.unCheckMark="",t.indenting=!0,t.separateRows=!1,t.lookupDisplay=!1,t.showLevelOutline=!1,t.applyFitStyle=!0,t.applyDynamicStyles=!1,t.applyDefaultColumnFormat=!1,t.applyFixed=!1,t.sheetName=null,t.exportSeriesColumn=!1,t.showColumns=[],t.hideColumns=[],t.hiddenColumns=[],t.exportLink=!1,t.exportTemplate=!1,t.sheetAttrs=null,t.stylePrefix="",t.layoutExpand=null,t.exportImage=void 0,t.bulkImageDownload=!0,t.exportLayout=void 0,t.userCells=void 0,t.userCellsCallback=void 0,t.sheetProtect=!1,t.protectPassword=void 0,t.extend(e),t}return w(i,a),i.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"documentTitle",{get:function(){return this._documentTitle},set:function(e){this._documentTitle=new Gl(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(e){this._documentSubtitle=new Gl(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentTail",{get:function(){return this._documentTail},set:function(e){this._documentTail=new Gl(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},v.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(e){this._protectProperties=e?v.deepCopy(e):void 0},enumerable:!1,configurable:!0}),i.prototype.indicatorVisible=function(e){if(e)switch(this.indicator){case Ri:return!0;case rn:return!1;default:return e.rowIndicator.visible}return!1},i.prototype.checkBarVisible=function(e){if(e)switch(this.checkBar){case Ri:return!0;case rn:return!1;default:return e.checkBar.visible}return!1},i.prototype.headerVisible=function(e){if(e)switch(this.header){case Ri:return!0;case rn:return!1;default:return e.header.visible}return!1},i.prototype.headerSummaryVisible=function(e){if(e)switch(this.headerSummary){case Ri:return!0;case rn:return!1;default:return e.headerSummaries.visible&&e.headerSummaries.visibleCount>0}return!1},i.prototype.footerVisible=function(e){if(e)switch(this.footer){case Ri:return!0;case rn:return!1;default:return e.footers.visible&&e.footers.visibleCount>0}return!1},i.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case od:case id:return!1;case"row":return!0;default:return e.rowIndicator.displayValue==c.IndicatorValue.ROW}return!1},i.prototype.showIndicatorReverse=function(e){if(e)switch(this.indicatorValue){case"row":case id:return!1;case od:return!0;default:return e.rowIndicator.displayValue==c.IndicatorValue.REVERSE}},Object.defineProperty(i.prototype,"yOffset",{get:function(){return this._yOffset==null?0:this._yOffset},set:function(e){this._yOffset=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffset",{get:function(){return this._xOffset==null?0:this._xOffset},set:function(e){this._xOffset=Math.floor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffsetWidth",{get:function(){return this._xOffsetWidth==null?100:this._xOffsetWidth},set:function(e){this._xOffsetWidth=Math.floor(e)},enumerable:!1,configurable:!0}),i}(ch),tb=function(a){function i(e,t){var o=a.call(this,t)||this;return o._grids=[],o._parseGrids(e,t),o}return w(i,a),Object.defineProperty(i.prototype,"exportGrids",{get:function(){return this._grids},enumerable:!1,configurable:!0}),i.prototype._doDispose=function(){this._grids=null,a.prototype._doDispose.call(this)},i.prototype._parseGrids=function(e,t){var o=t.exportGrids;if(o&&Array.isArray(o))for(var r=0,n=o.length;r<n;r++){var s,l=o[r].grid;l=l.$_handler?l:l._view,(s=new Ys(t)).assignFrom(o[r]),s.extend(o[r]),s.grid=l;var u={grid:l,sheetName:o[r].sheetName,options:s};this._grids.push(u)}else(s=new Ys(t)).extend(t),s.grid=e,this._grids.push({grid:e,sheetName:t.sheetName?String(t.sheetName):"sheet1",options:s})},i}(Ys),Zi=v.hex,W=function(){function a(i,e){i===void 0&&(i=null),e===void 0&&(e=!1),this._r=0,this._g=0,this._b=0,this._a=0,typeof i=="string"?a._parse(i,this,e,!1):i instanceof a?(this._r=i._r,this._g=i._g,this._b=i._b,this._a=i._a):isNaN(i)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(i>>>24)/255,this._r=(16711680&i)>>16,this._g=(65280&i)>>8,this._b=255&i)}return a._parse=function(i,e,t,o){if(i){var r=i.length;if((i=i.trim().toLowerCase()).charAt(0)=="#")if(i=i.substr(1),--r>=6&&r<=8)e._b=v.toInt(i.substr(r-2,2),16),e._g=v.toInt(i.substr(r-4,2),16),e._r=v.toInt(i.substr(r-6,2),16),e._a=r==6?t?NaN:1:v.toInt(i.substr(0,r-6),16)/255;else{if(r!=3){if(o)throw"Invalid color value text: "+i;return!1}e._r=v.toInt(i.charAt(0)+i.charAt(0),16),e._g=v.toInt(i.charAt(1)+i.charAt(1),16),e._b=v.toInt(i.charAt(2)+i.charAt(2),16),e._a=t?NaN:1}else if(i.indexOf("rgba(")==0&&i.charAt(r-1)==")"){var n=(i=i.substring(5,r-1)).split(",");e._r=v.toInt(n[0]),e._g=v.toInt(n[1]),e._b=v.toInt(n[2]),e._a=v.toFloat(n[3])}else{if(i.indexOf("rgb(")!=0||i.charAt(r-1)!=")"){if(rd.hasOwnProperty(i))return n=rd[i],e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n;if(o)throw new Error("Invalid color text: "+i);return!1}var n=(i=i.substring(4,r-1)).split(",");e._r=v.toInt(n[0]),e._g=v.toInt(n[1]),e._b=v.toInt(n[2]),e._a=t?NaN:1}return!0}return!1},a.prototype.toHex=function(){return""+Zi(Math.floor(255*this._a))+Zi(this._r)+Zi(this._g)+Zi(this._b)},a.prototype.toColorHex=function(){return""+Zi(this._r)+Zi(this._g)+Zi(this._b)},a.prototype.toString=function(){return"#"+Zi(Math.floor(255*this._a))+Zi(this._r)+Zi(this._g)+Zi(this._b)},a}(),rd={transparent:new W("#00000000"),ltGray:new W("#d3d3d3"),ltgray:new W("#d3d3d3"),aliceblue:new W("#f0f8ff"),antiquewhite:new W("#faebd7"),aqua:new W("#00ffff"),aquamarine:new W("#7fffd4"),azure:new W("#f0ffff"),beige:new W("#f5f5dc"),bisque:new W("#ffe4c4"),black:new W("#000000"),blanchedalmond:new W("#ffebcd"),blue:new W("#0000ff"),blueviolet:new W("#8a2be2"),brown:new W("#a52a2a"),burlywood:new W("#deb887"),cadetblue:new W("#5f9ea0"),chartreuse:new W("#7fff00"),chocolate:new W("#d2691e"),coral:new W("#ff7f50"),cornflowerblue:new W("#6495ed"),cornsilk:new W("#fff8dc"),crimson:new W("#dc143c"),cyan:new W("#00ffff"),darkblue:new W("#00008b"),darkcyan:new W("#008b8b"),darkgoldenrod:new W("#b8860b"),darkgray:new W("#a9a9a9"),darkgreen:new W("#006400"),darkgrey:new W("#a9a9a9"),darkkhaki:new W("#bdb76b"),darkmagenta:new W("#8b008b"),darkolivegreen:new W("#556b2f"),darkorange:new W("#ff8c00"),darkorchid:new W("#9932cc"),darkred:new W("#8b0000"),darksalmon:new W("#e9967a"),darkseagreen:new W("#8fbc8f"),darkslateblue:new W("#483d8b"),darkslategray:new W("#2f4f4f"),darkslategrey:new W("#2f4f4f"),darkturquoise:new W("#00ced1"),darkviolet:new W("#9400d3"),deeppink:new W("#ff1493"),deepskyblue:new W("#00bfff"),dimgray:new W("#696969"),dimGray:new W("#696969"),dimgrey:new W("#696969"),dodgerblue:new W("#1e90ff"),firebrick:new W("#b22222"),floralwhite:new W("#fffaf0"),forestgreen:new W("#228b22"),fuchsia:new W("#ff00ff"),gainsboro:new W("#dcdcdc"),ghostwhite:new W("#f8f8ff"),goldenrod:new W("#daa520"),gold:new W("#ffd700"),gray:new W("#808080"),green:new W("#008000"),greenyellow:new W("#adff2f"),grey:new W("#808080"),honeydew:new W("#f0fff0"),hotpink:new W("#ff69b4"),indianred:new W("#cd5c5c"),indigo:new W("#4b0082"),ivory:new W("#fffff0"),khaki:new W("#f0e68c"),lavenderblush:new W("#fff0f5"),lavender:new W("#e6e6fa"),lawngreen:new W("#7cfc00"),lemonchiffon:new W("#fffacd"),lightblue:new W("#add8e6"),lightcoral:new W("#f08080"),lightcyan:new W("#e0ffff"),lightgoldenrodyellow:new W("#fafad2"),lightgray:new W("#d3d3d3"),lightgreen:new W("#90ee90"),lightgrey:new W("#d3d3d3"),lightpink:new W("#ffb6c1"),lightsalmon:new W("#ffa07a"),lightseagreen:new W("#20b2aa"),lightskyblue:new W("#87cefa"),lightslategray:new W("#778899"),lightslategrey:new W("#778899"),lightsteelblue:new W("#b0c4de"),lightyellow:new W("#ffffe0"),lime:new W("#00ff00"),limegreen:new W("#32cd32"),linen:new W("#faf0e6"),magenta:new W("#ff00ff"),maroon:new W("#800000"),mediumaquamarine:new W("#66cdaa"),mediumblue:new W("#0000cd"),mediumorchid:new W("#ba55d3"),mediumpurple:new W("#9370db"),mediumseagreen:new W("#3cb371"),mediumslateblue:new W("#7b68ee"),mediumspringgreen:new W("#00fa9a"),mediumturquoise:new W("#48d1cc"),mediumvioletred:new W("#c71585"),midnightblue:new W("#191970"),mintcream:new W("#f5fffa"),mistyrose:new W("#ffe4e1"),moccasin:new W("#ffe4b5"),navajowhite:new W("#ffdead"),navy:new W("#000080"),oldlace:new W("#fdf5e6"),olive:new W("#808000"),olivedrab:new W("#6b8e23"),orange:new W("#ffa500"),orangered:new W("#ff4500"),orchid:new W("#da70d6"),palegoldenrod:new W("#eee8aa"),palegreen:new W("#98fb98"),paleturquoise:new W("#afeeee"),palevioletred:new W("#db7093"),papayawhip:new W("#ffefd5"),peachpuff:new W("#ffdab9"),peru:new W("#cd853f"),pink:new W("#ffc0cb"),plum:new W("#dda0dd"),powderblue:new W("#b0e0e6"),purple:new W("#800080"),rebeccapurple:new W("#663399"),red:new W("#ff0000"),rosybrown:new W("#bc8f8f"),royalblue:new W("#4169e1"),saddlebrown:new W("#8b4513"),salmon:new W("#fa8072"),sandybrown:new W("#f4a460"),seagreen:new W("#2e8b57"),seashell:new W("#fff5ee"),sienna:new W("#a0522d"),silver:new W("#c0c0c0"),skyblue:new W("#87ceeb"),slateblue:new W("#6a5acd"),slategray:new W("#708090"),slategrey:new W("#708090"),snow:new W("#fffafa"),springgreen:new W("#00ff7f"),steelblue:new W("#4682b4"),tan:new W("#d2b48c"),teal:new W("#008080"),thistle:new W("#d8bfd8"),tomato:new W("#ff6347"),turquoise:new W("#40e0d0"),violet:new W("#ee82ee"),wheat:new W("#f5deb3"),white:new W("#ffffff"),whitesmoke:new W("#f5f5f5"),yellow:new W("#ffff00"),yellowgreen:new W("#9acd32")},qt=function(){function a(){}return a.parseDocumentStyles=function(i){for(var e,t,o,r={},n=i.styleSheets,s=0,l=n.length;s<l;s++){e=n[s];try{e.rules?t=e.rules:e.cssRules&&(t=e.cssRules)}catch{continue}if(t)for(var u=t.length;u--;){var h=(o=t[u]).selectorText;if(h)if(h.indexOf(",")>-1)for(var d=h.split(","),p=d.length;p--;){var f=d[p].trim();f&&(r[f]=o.style)}else r[o.selectorText]=o.style}}return r},a.extendCssStyle=function(i,e){for(var t=0,o=i.length;t<o;t++){var r=i[t];i[r]=="inherit"||v.included(r,"background-color")&&v.included(i[r],"none","initial","unset")||(e[r]||(e[e.length]=r,e.length++),e[r]=i[r])}},a.$_getSelectorStyle=function(i,e){return i[e]},a.getSelectorStyle=function(i,e){if(a.prefix){var t=[],o={length:0};t.push(a.$_getSelectorStyle(i,e)),t.push(a.$_getSelectorStyle(i,a.prefix+e));for(var r=0,n=t.length;r<n;r++)t[r]&&a.extendCssStyle(t[r],o);return o}return a.$_getSelectorStyle(i,e)},a}(),ib=function(){function a(i,e){this._grid=i,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse(e)}return a.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},Object.defineProperty(a.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"colCount",{get:function(){var i=this._layout&&this._layout._dataCells;return i&&i.length?i[0].length:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"sparkColumns",{get:function(){return this._sparkColumns},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"documentCssStyles",{get:function(){return this._documentCssStyles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"groupModel",{get:function(){return this._groupModel},enumerable:!1,configurable:!0}),a.prototype.getHeader=function(i,e){return this._headerCells[i][e]},a.prototype.getItem=function(i,e){return this._dataCells[i][e]},a.prototype.getFooterItem=function(i,e){return this._footerCells[i][e]},a.prototype.getSummaryItem=function(i,e){return this._summaryCells[i][e]},a.prototype.clearDataSpanned=function(){for(var i=this._dataCells,e=0;e<i.length;e++)for(var t=0;t<i[e].length;t++)i[e][t].spanned=!1},a.prototype.getItemLevel=function(i){for(var e=this.grid,t=i.parent,o=i.level-1;t&&t.level>0;){var r=e.columnByField(t.groupField),n=r.layout;r.visible&&n.visible||o--,t=t.parent}return Math.max(o,0)},a.prototype.prepareLayout=function(){var i,e=this.grid,t=this._exportOptions,o=e.activeCellLayout;if(t.linear){for(var r=o.getDataColumns(!1),n=[],s=0;s<=r.length-1;s++){var l=r[s],u=l.visible&&l.layout.visible||t.allColumns;(u=u&&t.hideColumns.indexOf(l.name)<0||t.showColumns.indexOf(l.name)>=0)&&n.push({column:l.name,width:l.layout.domWidth||l.layout.width})}i=new Nn(e).load(n)}else i=t.exportLayout?new Nn(e).load(t.exportLayout):new Nn(e).load(e.activeCellLayout.getLayout(!0,t.applyFitStyle,t.allColumns,t.showColumns,t.hideColumns,t.layoutExpand));return i},a.prototype.parse=function(i){var e=this._grid,t=this._layout=this.prepareLayout(),o=this._exportOptions.stylePrefix;qt.prefix=o?o.trim()+" ":void 0,t.$_refresh2(e._columns,e.displayOptions.minCellWidth),t.$_prepareLayout(e,e.fixedOptions.colCount,e.fixedOptions.rightCount),t.$_prepareMerges(e);var r=e.footers,n=e.headerSummaries;this._setCellInfo(t._headerCells,this._headerCells=[]),this._setCellInfo(t._dataCells,this._dataCells=[]),this._setFooterInfo(t._dataCells,i.footer===Ri?r.count:r.visibleCount,this._footerCells=[]),this._setFooterInfo(t._dataCells,i.headerSummary===Ri?n.count:n.visibleCount,this._summaryCells=[]),this._documentCssStyles=qt.parseDocumentStyles(e.doc),this._setDataColumns(t._dataCells),this._setSparkInfo(this._dataCells)},a.prototype._setCellInfo=function(i,e){for(var t=0;t<i.length;t++){for(var o=[],r=0;r<i[t].length;r++)o.push({layout:i[t][r],spanned:!1});e.push(o)}},a.prototype._setFooterInfo=function(i,e,t){for(var o=0;o<e;o++)for(var r=0;r<i.length;r++){for(var n=[],s=0;s<i[r].length;s++)n.push({footerIndex:o,layout:i[r][s],spanned:!1});t.push(n)}},a.prototype.setGroupFooterItms=function(i,e,t){this._groupModel=i;var o=this._groupFooterCells=[],r=this._dataCells,n=!1;if(!(i.footerCount>0)){var s=i.provider._expandedAdornments,l=i.provider._collapsedAdornments;n=t?e&&!i.expanded&&v.included(l,c.RowGroupAdornments.SUMMARY,c.RowGroupAdornments.FOOTER):(n=i.expanded&&s===c.RowGroupAdornments.SUMMARY)||!e&&!i.expanded&&v.included(l,c.RowGroupAdornments.SUMMARY,c.RowGroupAdornments.FOOTER)}for(var u=n?i.allFooterCount:i.footerCount,h=0;h<u;h++)for(var d=n?i._allFooters[h]:i.getFooter(h),p=0;p<r.length;p++){for(var f=[],g=0;g<r[p].length;g++)f.push({footerIndex:d.footerIndex,layout:r[p][g].layout,spanned:!1});o.push(f)}},a.prototype.getGroupFooterCells=function(){return this._groupFooterCells},a.prototype._setDataColumns=function(i){var e,t;this._dataColumns=[];for(var o=0,r=i.length;o<r;o++){e=[];for(var n=0,s=i[o].length;n<s;n++)(t=i[o][n]).isProxy&&(t=t.source),e.push(t.firstColumn);this._dataColumns.push(e)}},a.prototype._setSparkInfo=function(i){function e(K,U){var Y={start:void 0,end:void 0,row:void 0},J=s[0],ae=s[s.length-1],de=l.columnByField(J),Ce=l.columnByField(ae);if(!de||!Ce)return null;for(var pe=0,fe=U.length;pe<fe;pe++)for(var se=0,Ge=U[pe].length;se<Ge;se++)de==U[pe][se]&&(Y.start=se,Y.row=pe-K),Ce==U[pe][se]&&(Y.end=se);return Y}var t,o,r,n,s,l,u=this.documentCssStyles;this._sparkColumns=[];for(var h=0,d=i.length;h<d;h++)for(var p=0,f=i[h].length;p<f;p++)if((r=(o=(t=i[h][p]).layout)instanceof We?o.firstColumn:null)instanceof Ji&&(n=r.renderer)&&$n.interfaced(n)){s=r.fields,l=r.grid;var g=s.length>0&&e(h,this._dataColumns);if(g){var m=n.firstStyle,b=n.lastStyle,C=n.highStyle,x=n.lowStyle,E=void 0,S=void 0,P=void 0;if(ir.interfaced(n)){E="line",!b&&(b=ir.LAST_STYLE),!C&&(C=ir.HIGH_STYLE),!x&&(x=ir.LOW_STYLE);var R=n.pointStyle?qt.getSelectorStyle(u,"."+n.pointStyle):void 0;S=R?new W(R.fill).toHex():void 0,P=(D=qt.getSelectorStyle(u,"."+ir.CHART_STYLE))?new W(D.stroke).toHex():void 0}else{var k=void 0;or.interfaced(n)?(E="column",k=or.CHART_STYLE,!b&&(b=or.LAST_STYLE),!C&&(C=or.HIGH_STYLE),!x&&(x=or.LOW_STYLE)):(E="stacked",k=Ts.CHART_STYLE);var D=qt.getSelectorStyle(u,"."+k);P=new W(D.fill).toHex()}var F=C?qt.getSelectorStyle(u,"."+C):void 0,H=x?qt.getSelectorStyle(u,"."+x):void 0,N=m?qt.getSelectorStyle(u,"."+m):void 0,V=b?qt.getSelectorStyle(u,"."+b):void 0,j={type:E,colors:{colorHigh:F&&F.fill?new W(F.fill).toHex():void 0,colorLow:H&&H.fill?new W(H.fill).toHex():void 0,colorFirst:N&&N.fill?new W(N.fill).toHex():void 0,colorLast:V&&V.fill?new W(V.fill).toHex():void 0,colorMarkers:S,colorSeries:P},sparkLines:{},range:g};t.sparkLineGroup=j,this._sparkColumns[r.$_hash]=t}}},a}(),nn=function(){function a(){}return a.convertNumberFormat=function(i){return i.indexOf(";")>0&&(i=i.split(";")[0]),i.indexOf(".#")>0?i.replace(".#",".0"):i},a.convertDateFormat=function(i){for(var e="",t=i.length,o=0;o<t;o++){var r=i.charAt(o);switch(r){case"y":case"d":case"m":case"s":case":":e+=r;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(o>=t-1||i.charAt(o+1)!="H")&&(e+="h");break;case"h":o!=0&&i.charAt(o-1)=="h"||(e+="h");break;case"S":case"T":case"t":case"Z":case"z":case"+":break;case".":case"/":case"-":case" ":(o>=t-1||i.charAt(o+1)!="S")&&(e=e+"\\"+r);break;default:e=e+'"'+r+'"'}}return e},a}(),ob=function(){function a(){this._contentTypes={},this._bulkDownload=!0}return Object.defineProperty(a.prototype,"bulkDownload",{get:function(){return this._bulkDownload},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buldDownload",{set:function(i){this._bulkDownload=i},enumerable:!1,configurable:!0}),a.prototype.executeDownLoad=function(i,e,t){return A(this,void 0,void 0,function(){var o,r,n,s,l;return L(this,function(u){switch(u.label){case 0:if(o=[],r=Object.keys(e),!this.bulkDownload)return[3,1];for(n=0;n<r.length;n++)s=r[n],l=e[s],o.push(this.download(l).then(function(h){return new Promise(function(d,p){var f=new Uint8Array(h.buffer);try{var g=Array.prototype.map.call(f,function(C){return String.fromCharCode(C)}).join(""),m="data:".concat(h.type,";base64,").concat(On.btoa(g)),b=document.createElement("img");b.style.position="fixed",b.style.top="-10000px",b.style.left="-10000px",b.src=m,b.onload=function(){h.width=b.width,h.height=b.height,b.src="",d(h)},b.onerror=function(){p()}}finally{}})}).catch(function(){}));return Promise.all(o).catch(function(){}).finally(function(){t&&t.call(i,e)}),[3,6];case 1:n=0,u.label=2;case 2:return n<r.length?(s=r[n],l=e[s],[4,this.download(l).then(function(h){return new Promise(function(d,p){var f=new Uint8Array(h.buffer);try{var g=Array.prototype.map.call(f,function(C){return String.fromCharCode(C)}).join(""),m="data:".concat(h.type,";base64,").concat(On.btoa(g)),b=document.createElement("img");b.style.position="fixed",b.style.top="-10000px",b.style.left="-10000px",b.src=m,b.onload=function(){h.width=b.width,h.height=b.height,b.src="",d(h)},b.onerror=function(){p()}}finally{}})}).catch(function(){})]):[3,5];case 3:u.sent(),u.label=4;case 4:return n++,[3,2];case 5:t&&t.call(i,e),u.label=6;case 6:return[2]}})})},a.prototype.getContentTypes=function(){return this._contentTypes},a.prototype.getExtension=function(i,e){var t=function(d){return Array.prototype.map.call(d,function(p){return v.hex(p)}).join("")};if(i){var o="",r=i.toLowerCase().split(/\s*(?:;|$)\s*/),n=v.find(r,function(d){return d.indexOf("image")===0});n&&(o=n.indexOf("svg")>=0?"svg":n.substring(6));var s=v.find(r,function(d){return d.indexOf("octet-stream")>=0});if(!o&&s&&e.byteLength>20){var l=new Uint8Array(e),u=t(l.slice(0,10)),h=t(l.slice(-18));u.indexOf("474946")===0?(o="gif",i="image/gif"):u.indexOf("89504e47")===0?(o="png",i="image/png"):u.indexOf("ffd8")===0&&h.substr(-4)==="ffd9"?(o="jpeg",i="image/jpeg"):u.indexOf("424d")===0&&(o="bmp",i="image/bmp")}return o&&!this._contentTypes.hasOwnProperty(o)&&(this._contentTypes[o]=i),{ext:o,type:i}}},a.prototype.download=function(i){var e=this;return new Promise(function(t,o){var r=new XMLHttpRequest;r.open("GET",i.url),r.onload=function(){if(r.status===200){var n=e.getExtension(r.getResponseHeader("content-type"),r.response),s=n.ext,l=n.type;s?(i.fileName="".concat(i.id,".").concat(s),i.type=l,i.buffer=r.response,t(i)):t(null)}else t(null)},r.onerror=function(){o()},r.responseType="arraybuffer",r.send()})},a}(),rb=/\<|\>|\&|\"/;function nd(a){return rb.test(a)?a.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):a}var ue=function(){function a(){}return a.createDocument=function(i,e){var t={name:i,attrs:{}};for(var o in e)t.attrs[o]=e[o];return t},a.removeItem=function(i){if(i.texts=null,i.attrs=null,i.childs)for(var e=i.childs.length;e--;)a.removeItem(i.childs[e]),delete i.childs[e];i.childs=null},a.addChild=function(i,e,t,o){var r={name:e,attrs:t};return o&&a.addText(r,nd(o)),a.addChildElement(i,r),r},a.addChildElement=function(i,e){i.childs||(i.childs=[]),i.childs.push(e)},a.addProperty=function(i,e,t){i.attrs||(i.attrs={}),i.attrs[e]=nd(t)},a.addText=function(i,e){i.texts||(i.texts=[]),i.texts.push(e)},a.toString=function(i){var e="<"+i.name;for(var t in i.attrs)e+=" "+t+'="'+i.attrs[t]+'"';if(i.childs||i.texts){if(e+=">",i.texts)for(var o=0,r=i.texts.length;o<r;o++)e+=i.texts[o];if(i.childs)for(o=0,r=i.childs.length;o<r;o++)e+=a.toString(i.childs[o]);e+="</"+i.name+">"}else e+="/>";return e},a}(),ci=function(){function a(){}return a.toColCaption=function(i){for(var e="";i>=0;)e=String.fromCharCode(i%26+65)+e,i=Math.floor(i/26)-1;return e},a.toRange=function(i,e,t,o,r){t===void 0&&(t=!1),o===void 0&&(o=1),r===void 0&&(r=1);var n=e+1;return t?a.toColCaption(i)+n+":"+a.toColCaption(i+o-1)+(n+r-1):a.toColCaption(i)+n},a.daysOfYear=function(i){for(var e=0,t=0;t<i.getMonth();t++)e+=a.$$_MONTH_DAYS[t];if(i.getMonth()>=2){var o=i.getFullYear();(o%400==0||o%4==0&&o%100!=0)&&e++}return e+=i.getDate()},a.daysOfPriorYears=function(i){return i<=1900?0:365*(--i-1899)+(Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400)-460)},a.toExcelDate=function(i){var e=(1e3*(60*(60*i.getHours()+i.getMinutes())+i.getSeconds())+i.getMilliseconds())/a.$$_DAY_MILLISECONDS,t=a.daysOfPriorYears(i.getFullYear())+this.daysOfYear(i)+e;return t>=60&&t++,t},a.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',a.$$_DAY_MILLISECONDS=864e5,a.$$_MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30],a}(),nb=function(){function a(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return a.prototype.dispose=function(){for(var i in this._strings=null,this._stringMap)delete this._stringMap[i];this._stringMap=null},Object.defineProperty(a.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),a.prototype.uniqueCount=function(){return this._nextId},a.prototype.add=function(i){this._count++;var e=this._stringMap[i];return e===void 0&&(e=this._nextId++,this._stringMap[i]=e,this._strings[e]=i),e},a.prototype.getIndex=function(i){return this._stringMap[i]},a.prototype.createPart=function(){var i=ue.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});ue.addProperty(i,"count",this._count.toString()),ue.addProperty(i,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,t=0,o=this._strings.length;t<o;t++){var r=ue.addChild(i,"si"),n=this._strings[t].replace(/([\u0000-\u0008\u000b\u000c\u000e-\u001F])/g,function(u){return"_x".concat(("0000"+u.charCodeAt(0).toString(16)).substr(-4),"_")}),s=ue.addChild(r,"t",null,n);e.test(this._strings[t])&&ue.addProperty(s,"xml:space","preserve")}var l=ue.toString(i);return ci.XML_HEAD_STRING+l},a}(),sb=function(){function a(i,e){this._id=i,this._url=e}return Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),a}(),ab=function(){function a(){this._images=[],this._imageMap={}}return a.prototype.add=function(i){if(this._images.indexOf(i)<0){var e=this._images.push(i);this._imageMap[i]=new sb(e,i)}return i},a.prototype.getImageMap=function(){return this._imageMap},a.prototype.getImage=function(i){return this._imageMap&&this._imageMap[i]},a.prototype.getImageId=function(i){return this._imageMap&&this._imageMap[i]&&this._imageMap[i].id},a}(),lb=function(){function a(i,e,t,o,r,n){switch(this._col=i,this._row=e,this._cWidth=7*t,this._cHeight=o>0?o/.75:-1,this._imageUrl=n,r){case c.IconLocation.CENTER:this._location=c.IconLocation.CENTER;break;case c.IconLocation.RIGHT:case c.IconLocation.RIGHT_EDGE:this._location=c.IconLocation.RIGHT;break;default:this._location=c.IconLocation.LEFT}}return Object.defineProperty(a.prototype,"col",{get:function(){return this._col.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"row",{get:function(){return this._row.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"toCol",{get:function(){return this._toCol.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"toRow",{get:function(){return this._toRow.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fromX",{get:function(){return Math.round((this._fromX!=null?this._fromX:2)*a.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fromY",{get:function(){return Math.round((this._fromY!=null?this._fromY:2)*a.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"colOff",{get:function(){return Math.round(this._xOffset*a.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rowOff",{get:function(){return Math.round(this._yOffset*a.emu).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"imageUrl",{get:function(){return this._imageUrl},enumerable:!1,configurable:!0}),a.prototype.calcPosition=function(i,e){var t,o=this._rHeight,r=this._rWidth;o!=null&&o>0&&r!=null&&r>0?(i=r,e=o):o!=null&&o>0?(t=o/e,e=o,i*=t):r!=null&&r>0&&(t=r/i,i=r,e*=t),this._cWidth=this._cWidth<0?i:this._cWidth,this._cHeight=this._cHeight<0?e:this._cHeight,t=1,(this._cWidth<i||this._cHeight<e)&&(e*=t=Math.min((this._cWidth-2)/i,(this._cHeight-2)/e),i*=t);var n=1;this._location===c.IconLocation.CENTER?n=Math.max(1,this._cWidth/2-i/2):this._location===c.IconLocation.RIGHT&&(n=this._cWidth-i-1);for(var s=this._cHeight/2-e/2,l=this._row,u=this._col,h=l,d=this._col,p=s,f=n,g=s+e,m=n+i,b=this._cHeights||[],C=1;C<b.length;C++)s>=b[C]&&(l++,p-=b[C]-b[C-1]),s+e>b[C]&&(h++,g-=b[C]-b[C-1]);var x=this._cWidths||[];for(C=1;C<x.length;C++)n>=x[C]&&(u++,f-=x[C]-x[C-1]),n+i>x[C]&&(d++,m-=x[C]-x[C-1]);this._row=l,this._toRow=h,this._col=u,this._toCol=d,this._fromX=Math.max(1,f),this._fromY=Math.max(1,p),this._xOffset=Math.min(m,this._cWidth-1),this._yOffset=Math.min(g,this._cHeight-1)},a.emu=9525,a}(),ub=function(){function a(i,e,t){this._infos=[],this._book=i,this._sheet=e,this._index=t}return a.prototype.dispose=function(){return null},Object.defineProperty(a.prototype,"fileName",{get:function(){return"drawing"+this._index+".xml"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"relationId",{get:function(){return"rId"+this._rId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rId",{set:function(i){this._rId=i},enumerable:!1,configurable:!0}),a.prototype.createPart=function(){for(var i=ue,e=i.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),t=this._infos,o=0;o<t.length;o++){var r=t[o],n=this._book.getExcelImage(r.imageUrl);if(n&&n.fileName){var s=this._sheet.getMergeInfo(r.row,r.col);if(s){for(var l=[0],u=-1,h=0,d=[0],p=s.row;p<s.row+s.rows;p++){var f=this._sheet.getRow(p);if(!(f._height>0)){u=-1,l=[];break}l.push(u+=f._height/.75)}for(var g=s.col;g<s.col+s.cols;g++)d.push(h+=7*this._sheet.getColumnWidth(g));r._cols=s.cols,r._cHeight=u,r._cWidth=h,r._cWidths=d.slice(),r._cHeights=l.slice()}r.calcPosition(n.width,n.height);var m=i.addChild(e,"xdr:twoCellAnchor",{editAs:"oneCell"}),b=i.addChild(m,"xdr:from");i.addChild(b,"xdr:col",null,r.col),i.addChild(b,"xdr:colOff",null,r.fromX),i.addChild(b,"xdr:row",null,r.row),i.addChild(b,"xdr:rowOff",null,r.fromY),b=i.addChild(m,"xdr:to"),i.addChild(b,"xdr:col",null,r.toCol),i.addChild(b,"xdr:colOff",null,r.colOff),i.addChild(b,"xdr:row",null,r.toRow),i.addChild(b,"xdr:rowOff",null,r.rowOff);var C=i.addChild(m,"xdr:pic"),x=i.addChild(C,"xdr:nvPicPr");i.addChild(x,"xdr:cNvPr",{id:o+2,name:"picture "+o});var E=i.addChild(x,"xdr:cNvPicPr");i.addChild(E,"a:picLocks",{noChangeAspect:"1"});var S=i.addChild(C,"xdr:blipFill"),P=i.addChild(S,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this._book.getImageIndex(r.imageUrl)}),R=i.addChild(P,"a:extLst"),k=i.addChild(R,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"});i.addChild(k,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),i.addChild(i.addChild(S,"a:stretch"),"a:fillRect");var D=i.addChild(C,"xdr:spPr"),F=i.addChild(D,"a:xfrm");i.addChild(F,"a:off",{x:"1",y:"1"}),i.addChild(F,"a:ext",{cx:"1181100",cy:"1189663"}),i.addChild(i.addChild(D,"a:prstGeom",{prst:"rect"}),"a:avLst"),i.addChild(m,"xdr:clientData")}}var H=ue.toString(e);return ci.XML_HEAD_STRING+H},a.prototype.add=function(i,e,t,o,r,n,s,l){var u=new lb(i,e,t,o,r,n);return u._rWidth=s,u._rHeight=l,this._infos.push(u),u},a.prototype.createSheetRel=function(){var i=ue.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=ue.addChild(i,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"});ue.addProperty(e,"Id",this.relationId),ue.addProperty(e,"Target","../drawings/"+this.fileName);var t=ue.toString(i);return ci.XML_HEAD_STRING+t},a.prototype.createRel=function(){var i=[];this._infos.forEach(function(l){i.indexOf(l.imageUrl)<0&&i.push(l.imageUrl)});for(var e=ue.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),t=0;t<i.length;t++){var o=i[t],r=this._book.getExcelImage(o);if(r&&r.fileName){var n=ue.addChild(e,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"});ue.addProperty(n,"Id","rId"+this._book.getImageIndex(o).toString()),ue.addProperty(n,"Target","../media/"+r.fileName)}}var s=ue.toString(e);return ci.XML_HEAD_STRING+s},a}(),sn=function(){function a(i){this._id=i}return a.EqualsById=function(i,e){return!i&&!e||!(!i&&e||i&&!e)&&i._id==e.id},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){},a}(),an=function(){function a(){this._items=[],this._indexer=0}return a.prototype.dispose=function(){for(var i=this._items.length;i--;)this._items[i].dispose();this._items=null},a.prototype.getIndexer=function(){return this._indexer++},a.prototype.create=function(){for(var i,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o=this._items.length;o--;)if((i=this._items[o]).equals.apply(i,e))return i;return i=this.createInstance.apply(this,e),this._items.push(i),i},a.prototype.createUnique=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=this.createInstance.apply(this,i);return this._items.push(t),t},a}(),sd=function(a){function i(e,t,o,r,n,s,l){var u=a.call(this,e)||this;return u._bold=void 0,u._italic=void 0,u._underline=void 0,u._name=t,u._size=o,u._color=r,u._bold=n,u._italic=s,u._underline=l,u}return w(i,a),i.prototype.assignFrom=function(e){this._name=this._name||e._name,this._size=this._size||e._size,this._color=this._color||e._color,this._bold=this._bold==null?e._bold:this._bold,this._italic=this._italic==null?e._italic:this._italic,this._underline=this._underline==null?e._underline:this._underline},i.prototype.equals=function(e,t,o,r,n,s){return e===void 0&&(e="Tahoma"),t===void 0&&(t=10),o===void 0&&(o="ff000000"),r===void 0&&(r=!1),n===void 0&&(n=!1),s===void 0&&(s=!1),this._name==e&&this._size==t&&this._color==o&&this._bold==r&&this._italic==n&&this._underline==s},i.prototype.toXml=function(e,t){Pe.addChildWithAttr(e,t,"sz","val",this._size||10),Pe.addChildWithAttr(e,t,"name","val",this._name||"Calibri"),Pe.addChildWithAttr(e,t,"color","rgb",this._color||"ff000000"),Pe.addChildWithAttr(e,t,"b","val",this._bold?"true":"false"),Pe.addChildWithAttr(e,t,"i","val",this._italic?"true":"false"),this._underline&&Pe.addChild(e,t,"u")},i}(sn),hb=function(a){function i(e){var t=a.call(this)||this,o=tt(e).getComputedStyle(e);return t._defFontSize=t.$_convertUnit(o.fontSize||"16px"),t}return w(i,a),i.prototype.createInstance=function(e,t,o,r,n,s){return new sd(this.getIndexer(),e,t,o,r,n,s)},i.prototype.createFromCss=function(e){var t=e["font-family"];t?(t.indexOf(",")>-1&&(t=t.split(",")[0]),t=t.replace(/\"/g,"")):t=void 0;var o=this.$_convertUnit(e["font-size"]);o=isNaN(o)?void 0:72*o/96;var r=e.color;r&&(r=r.charAt(0)=="#"?e.color:new W(r).toColorHex());var n=e["font-weight"]=="bold",s=e["font-style"]=="italic",l=e["font-decoration"]=="underline";return this.create(t,o,r,n,s,l)},i.prototype.toXml=function(e,t){for(var o=this._items.length,r=0;r<o;r++){var n=Pe.addChild(e,t,"font");this._items[r].toXml(e,n)}Pe.setAttr(t,"count",o)},i.prototype.$_convertUnit=function(e){return e==null?void 0:typeof e=="string"?e.indexOf("px")>0?parseFloat(e):e.indexOf("pt")>0?Math.round(1.3333*parseFloat(e)):e.indexOf("em")>0?parseFloat(e)*this._defFontSize:12:parseInt(e)},i}(an),ad=function(a){function i(e,t,o,r,n,s,l){t===void 0&&(t="solid"),r===void 0&&(r=0),n===void 0&&(n=!1),l===void 0&&(l=90);var u=a.call(this,e)||this;return u._pattern=t,u._color=o,u._linear=n,u._color2=s,u._degree=l,u._tint=r,u}return w(i,a),i.prototype.assignFrom=function(e){this._pattern=e._pattern||this._pattern,this._color=e._color||this._color,this._tint=e._tint||this._tint,this._linear=e._linear==null?this._linear:e._linear,this._color2=e._color2||this._color2,this._degree=e._degree||this._degree},i.prototype.equalsObj=function(e){return this._pattern==e._pattern&&this._color==e._color&&this._color2==e._color2&&this._linear==e._linear&&this._degree==e._degree&&this._tint==e._tint},i.prototype.equals=function(e,t,o,r,n,s){return e===void 0&&(e="solid"),o===void 0&&(o=0),r===void 0&&(r=!1),s===void 0&&(s=90),this._pattern==e&&this._color==t&&this._color2==n&&this._linear==r&&this._degree==s&&this._tint==o},i.prototype.toXml=function(e,t){var o,r=this._tint||0;if(this._linear){var n=Pe.addChildWithAttr(e,t,"gradientFill","degree",this._degree||90),s=Pe.addChildWithAttr(e,n,"stop","position","0");o=Pe.addChild(e,s,"color"),Pe.setAttr(o,"rgb",this._color),Pe.setAttr(o,"tint",this._tint||0),s=Pe.addChildWithAttr(e,n,"stop","position","1"),o=Pe.addChild(e,s,"color"),Pe.setAttr(o,"rgb",this._color2),Pe.setAttr(o,"tint",r)}else{var l=Pe.addChildWithAttr(e,t,"patternFill","patternType",this._pattern.toString());this._pattern!="none"&&this._color!=null&&(o=Pe.addChild(e,l,"fgColor"),Pe.setAttr(o,"rgb",this._color),Pe.setAttr(o,"tint",r))}},i}(sn),cb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.createInstance=function(e,t,o,r,n,s){return new ad(this.getIndexer(),e,t,o,r,n,s)},i.prototype.createFromCss=function(e){var t=e["background-image"],o="linear-gradient(",r=t?t.indexOf(o):-1;if(r>-1){var n=this._splitEscape(t.slice(r+o.length,t.length-1)),s=void 0,l=void 0,u=void 0;n.length>2?(s=new W(n[1]),l=new W(n[2]),u=parseInt(n[0])):(s=new W(n[0]),l=new W(n[1]),u=180),u=(u+270)%360;var h=1-s._a;return this.create("none",s.toHex(),h,!0,l.toHex(),u)}if(e["background-color"]){var d=new W(e["background-color"]);return h=1-d._a,d?this.create("solid",d.toHex(),h):this._items[0]}},i.prototype.toXml=function(e,t){for(var o=this._items.length,r=0;r<o;r++){var n=Pe.addChild(e,t,"fill");this._items[r].toXml(e,n)}Pe.setAttr(t,"count",o)},i.prototype._splitEscape=function(e,t){if(t===void 0&&(t=","),e){for(var o=[],r=!1,n="",s=0;s<e.length;s++){var l=e[s];l!=t||r?(l!=" "||r)&&(n+=l):(o.push(n),n=""),l=="("&&(r=!0),l==")"&&(r=!1)}return n&&o.push(n),o}return null},i}(an),No=function(a){function i(e,t,o,r){o===void 0&&(o=1),r===void 0&&(r="none");var n=a.call(this,e)||this;return n._color=t,n._width=o,n._type=r,n}return w(i,a),i.equalsObj=function(e,t){return!e&&!t||!(!e&&t||e&&!t)&&e._color==t._color&&e._type==t._type&&e._width==t._width},i.prototype.equals=function(e,t,o){return t===void 0&&(t=1),o===void 0&&(o="none"),this._color==e&&this._width==t&&this._type==o},i.prototype.toXml=function(e,t){var o=this._width<=1?"thin":this._width<=2?"medium":"thick";Pe.setAttr(t,"style",o),Pe.addChildWithAttr(e,t,"color","rgb",this._color)},i}(sn),db=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.createInstance=function(e,t,o){return new No(this.getIndexer(),e,t,o)},i.prototype.createFromCss=function(e,t){var o=e[t+"-style"];if(o&&o!="none"){var r=new W(e[t+"-color"]),n=o,s=parseInt(e[t+"-width"]);if(!r&&isNaN(s))return this._items[0];if(isNaN(s))s=0;else if(s===0)return;return this.create(r.toColorHex(),s,n)}},i}(an),qs=function(a){function i(e,t,o,r,n){var s=a.call(this,e)||this;return s._left=t,s._top=o,s._right=r,s._bottom=n,s}return w(i,a),i.equalsObj=function(e,t){return No.equalsObj(e._left,t._left)&&No.equalsObj(e._top,t._top)&&No.equalsObj(e._right,t._right)&&No.equalsObj(e._bottom,t._bottom)},Object.defineProperty(i.prototype,"left",{get:function(){return this._left},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this._right},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this._bottom},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,a.prototype.dispose.call(this)},i.prototype.equals=function(e,t,o,r){return No.EqualsById(this._left,e)&&No.EqualsById(this._top,t)&&No.EqualsById(this._right,o)&&No.EqualsById(this._bottom,r)},i.prototype.toXml=function(e,t){this.borderToXml(e,t,"left"),this.borderToXml(e,t,"right"),this.borderToXml(e,t,"top"),this.borderToXml(e,t,"bottom")},i.prototype.borderToXml=function(e,t,o){var r=Pe.addChild(e,t,o),n=this[o];n&&n.toXml(e,r)},i}(sn),pb=function(a){function i(e){var t=a.call(this)||this;return t._lines=e,t}return w(i,a),i.prototype.dispose=function(){this._lines=null,a.prototype.dispose.call(this)},i.prototype.createInstance=function(e,t,o,r){return new qs(this.getIndexer(),e,t,o,r)},i.prototype.createFromCss=function(e){var t=this._lines,o=t.createFromCss(e,"border-left"),r=t.createFromCss(e,"border-right"),n=t.createFromCss(e,"border-top"),s=t.createFromCss(e,"border-bottom");return o||r||n||s?this.create(o,n,r,s):void 0},i.prototype.extend=function(e,t){e=e||{};for(var o=new qs(null,t.left||e.left,t.top||e.top,t.right||e.right,t.bottom||e.bottom),r=this._items.length;r--;){var n=this._items[r];if(qs.equalsObj(this._items[r],o))return n}return o._id=this.getIndexer(),this._items.push(o),o},i.prototype.toXml=function(e,t){for(var o=this._items.length,r=0;r<o;r++){var n=Pe.addChild(e,t,"border");this._items[r].toXml(e,n)}Pe.setAttr(t,"count",o)},i}(an),fb=function(a){function i(e,t,o,r,n,s,l,u,h){n===void 0&&(n=!1),s===void 0&&(s=0);var d=a.call(this,t)||this;return d._collection=e,d._horzAlign=o,d._vertAlign=r,d._wrapText=n,d._formatId=s,d._font=l,d._fill=u,d._border=h,d}return w(i,a),Object.defineProperty(i.prototype,"horzAlign",{get:function(){return this._horzAlign},set:function(e){this._horzAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertAlign",{get:function(){return this._vertAlign},set:function(e){this._vertAlign=e},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,a.prototype.dispose.call(this)},i.prototype.equals=function(e,t,o,r,n,s,l,u){return this._horzAlign==e&&this._vertAlign==t&&this._wrapText==o&&this._formatId==r&&sd.EqualsById(this._font,n)&&ad.EqualsById(this._fill,s)&&qs.EqualsById(this._border,l)&&v.equalObjects(this._cellProptectProps,u)},i.prototype.toXml=function(e,t){var o=this;Pe.setAttr(t,"borderId",(this._border?this._border.id:0)+""),Pe.setAttr(t,"fillId",(this._fill?this._fill.id:0)+""),Pe.setAttr(t,"fontId",(this._font?this._font.id:0)+""),Pe.setAttr(t,"numFmtId",this._formatId+""),Pe.setAttr(t,"xfId","0");var r=Pe.addChild(e,t,"alignment");if(Pe.setAttr(r,"horizontal",this._horzAlign||"left"),Pe.setAttr(r,"vertical",this._vertAlign||"center"),this._wrapText&&Pe.setAttr(r,"wrapText","1"),this._cellProptectProps){var n=Pe.addChild(e,t,"protection");Object.keys(this._cellProptectProps).forEach(function(s){Pe.setAttr(n,s,o._cellProptectProps[s])})}},i.prototype.cloneAsNew=function(e,t,o,r,n,s,l,u,h){return new i(this._collection,e,t||this._horzAlign,o||this._vertAlign,r??this._wrapText,n??this._formatId,s||this._font,l||this._fill,u||this._border)},i}(sn),_b=function(a){function i(e,t,o){var r=a.call(this)||this;return r._fonts=e,r._fills=t,r._borders=o,r}return w(i,a),i.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,a.prototype.dispose.call(this)},i.prototype.addStyle=function(e){for(var t=this._items.length;t--;){var o=this._items[t];if(o.equals(e.horzAlign,e.vertAlign,e._wrapText,e._formatId,e._font,e._fill,e._border,e._cellProptectProps))return o}return e._id=this.getIndexer(),e._collection=this,e},i.prototype.changeFormatId=function(e,t){for(var o,r=this._items.length;r--;)if((o=this._items[r]).equals(e.horzAlign,e.vertAlign,e._wrapText,t,e._font,e._fill,e._border,e._cellProptectProps))return o;return(o=e.cloneAsNew(this.getIndexer(),null,null,null,t,null,null,null))._cellProptectProps=v.deepCopy(e._cellProptectProps),this._items.push(o),o},i.prototype.changeBorder=function(e,t){for(var o,r=this._borders.extend(e._border,t),n=this._items.length;n--;)if((o=this._items[n]).equals(e.horzAlign,e.vertAlign,e._wrapText,e._formatId,e._font,e._fill,r,e._cellProptectProps))return o;var s=e.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,r);return s._cellProptectProps=v.deepCopy(e._cellProptectProps),this._items.push(s),s},i.prototype.createInstance=function(e,t,o,r,n,s,l){return o===void 0&&(o=!1),r===void 0&&(r=0),n===void 0&&(n=null),s===void 0&&(s=null),l===void 0&&(l=null),new fb(this,this.getIndexer(),e,t,o,r,n,s,l)},i.prototype.createFromCss=function(e,t,o,r,n,s,l){t===void 0&&(t=!0),o===void 0&&(o=!0),r===void 0&&(r=!0),n===void 0&&(n=!1),s===void 0&&(s=0),l===void 0&&(l=null);var u,h,d=t?this._borders.createFromCss(e):null,p=o?this._fonts.createFromCss(e):null,f=r?this._fills.createFromCss(e):null,g=e["text-align"];g&&(g=="center"?u="center":g=="right"?u="right":g=="left"&&(u="left"));var m=e["vertical-align"];return m&&(m=="top"?h="top":m=="bottom"&&(h="bottom")),this.create(u,h,n,s,p,f,d,l)},i.prototype.toXml=function(e,t){for(var o=this._items.length,r=0;r<o;r++){var n=Pe.addChild(e,t,"xf");this._items[r].toXml(e,n)}Pe.setAttr(t,"count",o)},i}(an),gb=function(){function a(i){this._numberFmts=[],this._fonts=new hb(i),this._fills=new cb,this._lines=new db,this._borders=new pb(this._lines),this._styles=new _b(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return a.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},a.prototype.addNumberFormat=function(i){var e=this._numberFmts.indexOf(i);return e<0&&(this._numberFmts.push(i),e=this._numberFmts.length-1),a.EXCEL_NUMFMT_START+e},a.prototype.addStyle=function(i,e,t,o,r,n){return i?this._styles.createFromCss(i,e,t,o,r,n):null},a.prototype.extendStyle=function(i,e,t,o,r){o=o??i._formatId;var n=this._styles.createFromCss(e,!0,!0,!0,t,o,r);return n._border=n._border||i._border,n._fill=n._fill||i._fill,n._font&&i._font?n._font.assignFrom(i._font):n._font=n._font||i._font,n._horzAlign=n._horzAlign||i._horzAlign,n._vertAlign=n._vertAlign||i._vertAlign,n._wrapText=n._wrapText!=null?n._wrapText:i._wrapText,n._formatId=o!=null&&n._formatId!=null?n._formatId:i._formatId,n._cellProptectProps=v.deepCopy(r)||v.deepCopy(i._cellProptectProps),this._styles.addStyle(n)},a.prototype.changeFormatId=function(i,e){return this._styles.changeFormatId(i,e)},a.prototype.changeBorder=function(i,e){return this._styles.changeBorder(i,e)},a.prototype.createPart=function(){var i='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=Pe.parse(i),t=e.documentElement;if(this._numberFmts.length>0){var o=Pe.addChild(e,t,"numFmts");this._createNumberFormats(e,o)}var r=Pe.addChild(e,t,"fonts");this._createFonts(e,r);var n=Pe.addChild(e,t,"fills");this._createFills(e,n);var s=Pe.addChild(e,t,"borders");this._createBorders(e,s);var l=Pe.addChild(e,t,"cellStyleXfs");this._createDefXfs(e,l);var u=Pe.addChild(e,t,"cellXfs");return this._createStyles(e,u),i=Pe.toString(e),ci.XML_HEAD_STRING+i},a.prototype._createNumberFormats=function(i,e){for(var t=0,o=this._numberFmts.length;t<o;t++){var r=Pe.addChild(i,e,"numFmt");Pe.setAttr(r,"formatCode",this._numberFmts[t]),Pe.setAttr(r,"numFmtId",a.EXCEL_NUMFMT_START+t)}},a.prototype._createFonts=function(i,e){this._fonts.toXml(i,e)},a.prototype._createFills=function(i,e){this._fills.toXml(i,e)},a.prototype._createBorders=function(i,e){this._borders.toXml(i,e)},a.prototype._createDefXfs=function(i,e){var t=Pe.addChildWithAttr(i,e,"xf","count",1);Pe.setAttr(t,"borderId",0),Pe.setAttr(t,"fillId",0),Pe.setAttr(t,"fontId",0),Pe.setAttr(t,"numFmtId",0)},a.prototype._createStyles=function(i,e){this._styles.toXml(i,e)},a.EXCEL_NUMFMT_START=200,a}(),yb=function(a){function i(e,t,o,r,n){var s=a.call(this,e)||this;return s._hash=t,s._width=o,s._style=r,s._hidden=n,s}return w(i,a),i.prototype.dispose=function(){this._style=null,a.prototype.dispose.call(this)},i.prototype.equals=function(e){return this.id==e},i.prototype.toTextXml=function(e){var t=this.id+1,o={min:t,max:t,width:this._width,customWidth:"1"};this._style&&(o.style=this._style.id),this._hidden&&(o.hidden="1"),ue.addChild(e,"col",o)},i}(sn),mb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.createInstance=function(e,t,o,r){return new yb(this.getIndexer(),e,t,o,r)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),i.prototype.toTextXml=function(e){for(var t=ue.addChild(e,"cols"),o=0,r=this.count;o<r;o++)this._items[o].toTextXml(t)},i.prototype.getWidth=function(e){return this._items[e]?this._items[e]._width:9},i}(an),bb=function(){function a(i,e,t,o,r,n){r===void 0&&(r=""),this._range=ci.toRange(e,i),this._style=t,this._type=r,this._fomula=n,this._value=o}return a.prototype.dispose=function(){this._style=null},Object.defineProperty(a.prototype,"style",{get:function(){return this._style},set:function(i){this._style=i},enumerable:!1,configurable:!0}),a.prototype.toXmlText=function(){var i=[];return i.push("<"+a.ELEMENT_NAME),i.push(' r="'.concat(this._range,'"')),this._type!=""&&i.push(' t="'.concat(this._type,'"')),this._style&&i.push(' s="'.concat(this._style.id,'"')),i.push(">"),this._fomula&&i.push("<f>".concat(this._fomula,"</f>")),this._value!=null&&i.push("<v>".concat(this._value,"</v>")),i.push("</"+a.ELEMENT_NAME+">"),i.join("")},a.ELEMENT_NAME="c",a}(),vb=function(){function a(i,e,t){this._row=0,this._sheet=i,this._book=i.workbook,this._index=e,this._height=t,this._cells=[]}return Object.defineProperty(a.prototype,"outLineLevel",{get:function(){return this._outlineLevel},set:function(i){this._outlineLevel=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){for(var i=this._cells.length;i--;)this._cells[i].dispose(),this._cells[i]=null;this._cells=null},a.prototype.toXmlText=function(){var i=[];i.push("<"+a.ELEMENT_NAME),i.push(' r="'.concat(this._index+1,'"')),this._height&&this._height>-1&&(i.push(' ht="'.concat(this._height,'"')),i.push(' customHeight="1"')),this._outlineLevel!=null&&i.push(' outlineLevel="'.concat(this._outlineLevel,'"')),i.push(">");for(var e=0,t=this._cells.length;e<t;e++){var o=this._cells[e];o&&i.push(o.toXmlText())}return i.push("</"+a.ELEMENT_NAME+">"),i.join("")},a.prototype.borrowCell=function(i,e,t,o,r){o===void 0&&(o="");var n=this._cells[i];n&&n.dispose(),n=new bb(this._index,i,e,t,o,r),this._cells[i]=n},a.prototype.addBlank=function(i,e){this.borrowCell(i,e)},a.prototype.addCell=function(i,e,t,o,r){this.borrowCell(i,o,t,e,r)},a.prototype.addText=function(i,e,t){var o=e!=null?String(e):"",r=this._book.addSharedString(o);this.addCell(i,"s",r,t)},a.prototype.addNumber=function(i,e,t,o){var r=isNaN(e)||e==null?"":String(e);this.addCell(i,"n",r,t,o)},a.prototype.addBool=function(i,e,t){this.addCell(i,"b",e==null?"":e?1:0,t)},a.prototype.addDate=function(i,e,t){if(e){var o=ci.toExcelDate(e);this.addNumber(i,o,t)}else this.addCell(i,"s","",t)},a.prototype.addLink=function(i,e,t,o){if(t&&t!=""){var r=document.createElement("div");r.innerText=r.textContent=t,t=r.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),r.innerText=r.textContent=e,t='HYPERLINK("'+t+((e=r.innerHTML.replace(/(<br>|<br\/>)/gi,`\r
`))?'","'+e+'")':'")'),this.addCell(i,"str",e,o,t)}else this.addText(i,e,o)},a.prototype.addImage=function(i,e,t,o,r,n,s,l){if(r)return e&&o!==c.IconLocation.CENTER?this.addText(i,e,n):this.addBlank(i,n),this._sheet.addImage(i,this._index,t,this._height,o,r,s,l);e?this.addText(i,e,n):this.addBlank(i,n)},a.prototype.addSparkLine=function(i,e,t,o){var r=t.layout.firstColumn,n=this._sheet,s=this._index,l=n.borrowSparkGroup(r.index,t.sparkLineGroup),u=l.range.start,h=l.range.end-u+1,d=l.range.row;d=d??0;var p=l.sparkLines,f=n.name+"!"+ci.toRange(e+u,s+d,!0,h);p[ci.toRange(i,this._index)]=f,this.addBlank(i,o)},a.ELEMENT_NAME="row",a.LINE_REGEX=/\r|\n|\r\n/,a.BR_REGEX=/<br>|<br\/>/,a}(),wb=function(){function a(i,e,t,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=i,this._index=e,this._name=t,this._attrs=o.sheetAttrs,this._protectPassword=o.protectPassword,this._protectProperties=o.protectProperties,this._sheetProtect=o.sheetProtect,this._columns=new mb,this._prepare()}return a.prototype.dispose=function(){this._txmerge=null,ue.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},Object.defineProperty(a.prototype,"id",{get:function(){return a.RELATION_ID+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"colCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rowCount",{get:function(){return this._dataRows.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"workbook",{get:function(){return this._book},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"drawing",{get:function(){return this._drawing},enumerable:!1,configurable:!0}),a.prototype.setFirstRow=function(i){this._firstRow<0&&(this._firstRow=i)},a.prototype.setLastRow=function(i){this._lastRow=Math.max(this._lastRow,i)},a.prototype.setFirstCol=function(i){this._firstCol<0&&(this._firstCol=i)},a.prototype.clearRows=function(){for(var i=this._dataRows.length;i--;)this._dataRows[i].dispose(),this._dataRows[i]=null;this._dataRows=[]},a.prototype.addColumn=function(i,e,t,o){return this._columns.createUnique(i,e,t,o)},a.prototype.getColumnWidth=function(i){return this._columns.getWidth(i)},a.prototype.getMergeInfo=function(i,e){return this._mergeInfos["".concat(i,":").concat(e)]},a.prototype.addRow=function(i,e){return this._dataRows[i]=new vb(this,i,e)},a.prototype.getRow=function(i){return this._dataRows[i]},a.prototype.borrowRow=function(i,e){return this._dataRows[i]||this.addRow(i,e)},a.prototype.borrowSparkGroup=function(i,e){return this._sparkGroups[i]||(this._sparkGroups[i]=e),this._sparkGroups[i]},a.prototype.setRowLevel=function(i,e){if(e>=0){var t=this._dataRows[i];t&&(t.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},a.prototype.addMerge=function(i,e,t,o){if(t>1||o>1){var r=ci.toRange(e,i,!0,o,t);this._mergeInfos["".concat(i,":").concat(e)]={row:i,rows:t,col:e,cols:o,range:r}}},a.prototype.createPart=function(){var i=this._txdoc,e="A1:"+ci.toRange(this._columns.count-1,this._dataRows.length-1);ue.addChild(i,"dimension",{ref:e}),this._outlineLevel>0&&ue.addChild(i,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var t=ue.addChild(i,"sheetViews"),o={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&v.extendObj(this._attrs,o),this._book.count==0&&(o.tabSelected=1);var r=ue.addChild(t,"sheetView",o);(this._fixedCol>0||this._fixedRow>0)&&ue.addChild(r,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:ci.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(i);for(var n=ue.addChild(i,"sheetData"),s=this._dataRows,l=this._borderEdges,u=0,h=s.length;u<h;u++){if(u==this._firstRow){for(var d=0,p=Math.max(0,this._firstCol);p<s[u]._cells.length;p++)(f=s[u]._cells[p])&&l&&(f.style=this._book.changeBorderId(f.style,l[d++?"top":"leftTop"]));for(p=s[u]._cells.length;p--;)if((f=s[u]._cells[p])&&l){f.style=this._book.changeBorderId(f.style,l.rightTop);break}}else if(u===this._lastRow){for(d=0,p=Math.max(0,this._firstCol);p<s[u]._cells.length;p++)(f=s[u]._cells[p])&&l&&(f.style=this._book.changeBorderId(f.style,l[d++?"bottom":"leftBottom"]));for(p=s[u]._cells.length;p--;)if((f=s[u]._cells[p])&&l){f.style=this._book.changeBorderId(f.style,l.rightBottom);break}}else if(u>this._firstRow&&u<this._lastRow){for(p=Math.max(0,this._firstCol);p<s[u]._cells.length;p++)if((f=s[u]._cells[p])&&l){f.style=this._book.changeBorderId(f.style,l.left);break}for(p=s[u]._cells.length;p--;){var f;if((f=s[u]._cells[p])&&l){f.style=this._book.changeBorderId(f.style,l.right);break}}}s[u]&&ue.addText(n,s[u].toXmlText())}if(this._sheetProtect){var g=ue.addChild(i,"sheetProtection");if(ue.addProperty(g,"sheet","1"),this._protectPassword){var m=function(V){var j,K,U=0,Y=function(de){for(var Ce=[],pe=de.split(""),fe=0;fe<pe.length;++fe)Ce[fe]=pe[fe].charCodeAt(0);return Ce}(V),J=Y.length+1;K=J,(j=typeof Buffer<"u"?Buffer.alloc?Buffer.alloc(K):new Buffer(K):typeof Uint8Array<"u"?new Uint8Array(K):new Array(K))[0]=Y.length;for(var ae=1;ae<J;++ae)j[ae]=Y[ae-1];for(ae=J-1;ae>=0;--ae)U=((16384&U?1:0)|U<<1&32767)^j[ae];return(52811^U).toString(16).toUpperCase()}(this._protectPassword);ue.addProperty(g,"password",m)}if(this._protectProperties){var b=this._protectProperties;Object.keys(b).forEach(function(V){ue.addProperty(g,V,b[V])})}}if(this._mergeCount=Object.keys(this._mergeInfos).length,this._mergeCount>0){for(var C in ue.addProperty(this._txmerge,"count",this._mergeCount+""),this._mergeInfos)ue.addChild(this._txmerge,"mergeCell",{ref:this._mergeInfos[C].range});ue.addChildElement(this._txdoc,this._txmerge)}if(this._drawing&&ue.addChild(i,"drawing",{"r:id":this._drawing.relationId}),Object.keys(this._sparkGroups).length>0){var x=ue.addChild(i,"extLst"),E=ue.addChild(x,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),S=ue.addChild(E,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var u in this._sparkGroups){var P=this._sparkGroups[u],R=P.colors,k=P.sparkLines,D=ue.addChild(S,"x14:sparklineGroup",{type:P.type||"line"});R.colorSeries&&ue.addChild(D,"x14:colorSeries",{rgb:R.colorSeries}),R.colorMarkers&&(ue.addProperty(D,"markers","1"),ue.addChild(D,"x14:colorMarkers",{rgb:R.colorMarkers})),R.colorFirst&&(ue.addProperty(D,"first","1"),ue.addChild(D,"x14:colorFirst",{rgb:R.colorFirst})),R.colorLast&&(ue.addProperty(D,"last","1"),ue.addChild(D,"x14:colorLast",{rgb:R.colorLast})),R.colorHigh&&(ue.addProperty(D,"high","1"),ue.addChild(D,"x14:colorHigh",{rgb:R.colorHigh})),R.colorLow&&(ue.addProperty(D,"low","1"),ue.addChild(D,"x14:colorLow",{rgb:R.colorLow}));var F=ue.addChild(D,"x14:sparklines");for(var H in k){var N=ue.addChild(F,"x14:sparkline");ue.addChild(N,"xm:f",void 0,k[H]),ue.addChild(N,"xm:sqref",void 0,H)}}}return ci.XML_HEAD_STRING+ue.toString(i)},a.prototype.createBorderEdges=function(i){function e(t){var o={};return t.forEach(function(r){o["border-".concat(r,"-style")]=i["border-".concat(r,"-style")],o["border-".concat(r,"-color")]=i["border-".concat(r,"-color")],o["border-".concat(r,"-width")]=i["border-".concat(r,"-width")]}),this._book._styles._borders.createFromCss(o)||{}}i&&(this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])})},a.prototype.setFixedInfo=function(i,e){this._fixedRow=i==null?this._fixedRow:Math.max(this._fixedRow,i),this._fixedCol=e==null?this._fixedCol:Math.max(this._fixedCol,e)},a.prototype.addImage=function(i,e,t,o,r,n,s,l){this._drawing===void 0&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++);var u=this._book.addImage(n);return this._drawing.add(i,e,t,o,r,u,s,l)},a.prototype._prepare=function(){this._txdoc=ue.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=ue.createDocument("mergeCells")},a.RELATION_ID="rId",a}(),Cb=function(){function a(i){this._sheet_indexer=3,this._drawing_indexer=1,this._parts={},this._parts={},this._strings=new nb,this._images=new ab,this._styles=new gb(i),this._downloader=new ob,this._sheets=[],this._drawings=[],this._preapreTemplateParts()}return a.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach(function(i){i.dispose()}),this._drawings=null,this._sheets.forEach(function(i){i.dispose()}),this._sheets=null},Object.defineProperty(a.prototype,"currentSheet",{get:function(){return this._currentSheet},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"count",{get:function(){return this._sheets?this._sheets.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"styles",{get:function(){return this._styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"downloader",{get:function(){return this._downloader},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasDrawing",{get:function(){return this._drawing_indexer>1},enumerable:!1,configurable:!0}),a.prototype.createSheet=function(i,e){var t=new wb(this,this._sheet_indexer++,i||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(t),this._currentSheet=t,t},a.prototype.createDrawing=function(i){var e=new ub(this,i,this._drawing_indexer++);return this._drawings.push(e),e},a.prototype.addSharedString=function(i){return this._strings.add(i)},a.prototype.addImage=function(i){return this._images.add(i)},a.prototype.getImageMap=function(){return this._images.getImageMap()},a.prototype.getExcelImage=function(i){return this._images.getImage(i)},a.prototype.getImageIndex=function(i){return this._images.getImageId(i)},a.prototype.addNumberFormat=function(i){return this._styles.addNumberFormat(i)},a.prototype.addStyle=function(i,e,t,o,r,n){if(r==null){var s=i.whiteSpace||i["white-space"];r=s!=null&&s!=="none"&&s!=="nowrap"}return this._styles.addStyle(i,e,t,o,r,n)},a.prototype.changeFormatId=function(i,e){return this._styles.changeFormatId(i,e)},a.prototype.changeBorderId=function(i,e){return this._styles.changeBorder(i,e)},a.prototype.extendStyle=function(i,e,t,o,r){return this._styles.extendStyle(i,e,t,o,r)},a.prototype.createParts=function(){var i=this._parts,e=ue.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(ue.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),ue.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),ue.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),ue.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),ue.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),ue.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),ue.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),this._drawings.length>0){for(var t=0;t<this._drawings.length;t++){var o="/xl/drawings/"+(g=this._drawings[t]).fileName;ue.addChild(e,"Override",{PartName:o,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}var r=this.downloader.getContentTypes();Object.keys(r).forEach(function(b){ue.addChild(e,"Default",{Extension:b,ContentType:r[b]})})}var n=ue.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});ue.addChild(n,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),ue.addChild(n,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var s=ue.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});ue.addChild(s,"workbookPr",{date1904:"false"});var l=ue.addChild(s,"bookViews");ue.addChild(l,"workbookView",{activeTab:"0"});for(var u=ue.addChild(s,"sheets"),h=(t=0,this._sheets.length);t<h;t++){var d=this._sheets[t],p="worksheets/sheet"+(t+1).toString()+".xml",f="xl/"+p;if(i[f]=d.createPart(),e&&ue.addChild(e,"Override",{PartName:"/"+f,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),u&&ue.addChild(u,"sheet",{name:d.name||"Sheet"+(t+1).toString(),sheetId:(t+1).toString(),"r:id":d.id}),n&&ue.addChild(n,"Relationship",{Id:d.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:p}),d.drawing){var g=d.drawing;i[f="xl/worksheets/_rels/sheet"+(t+1).toString()+".xml.rels"]=g.createSheetRel(),i[f="xl/drawings/_rels/"+g.fileName+".rels"]=g.createRel(),i[f="xl/drawings/"+g.fileName]=g.createPart()}}var m=ci.XML_HEAD_STRING;return i["[Content_Types].xml"]=m+ue.toString(e),i["xl/workbook.xml"]=m+ue.toString(s),i["xl/_rels/workbook.xml.rels"]=m+ue.toString(n),i["xl/sharedStrings.xml"]=this._strings.createPart(),i["xl/styles.xml"]=this._styles.createPart(),i},a.prototype._preapreTemplateParts=function(){var i=this._parts,e=ci.XML_HEAD_STRING,t=new Date().toISOString();i["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',i["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',i["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+t+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},a}(),ld=function(a){function i(e,t){t===void 0&&(t=null);var o=a.call(this,null,e)||this;return o._groupSorting=!0,o._groupSortDirection=c.SortDirection.ASCENDING,o._groupSortCase=c.SortCase.SENSITIVE,o.source=o._rs=new bg(!1),o._groupedProvider=new qo(o._rs,!1),o._groupedProvider.footerCounter=t,o._summarizer=new Ah(o._rs),o}return w(i,a),i.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(e){this._rs.maxItemCount=Math.max(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(e){this._rs.hideDeleted=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(e){this._rs.isFilterOr=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(e){this._rs.summaryMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(e){this._groupedProvider.summaryMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(e){this._rs.sortMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(e){this._rs.filterMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenGrouping",{set:function(e){this._groupedProvider.expandWhenGrouping=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(e){return this.source.canGrouping(e)},i.prototype.getFieldDomain=function(e){return this._rs.getFieldDomain(e)},i.prototype.isFiltered=function(e){return e!=null?this._rs.hasFilter(e):this._rs.hasFilters()},i.prototype.addFilter=function(e,t){this._rs.addFilter(e,t)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFilter()},i.prototype.endFiltering=function(e,t){this._rs.endFilter(!0,e,t)},i.prototype.setHideDeletedRows=function(e){this._rs.hideDeleted=e},i.prototype.orderBy=function(e,t,o){if(this._groupedProvider.grouped&&this._groupSorting){for(var r=t?t.length:0,n=o?o.length:0,s=this._groupedProvider.groupedFields,l=this._rs.getSortDirections(),u=this._rs.getSortCases(),h=[],d=0,p=s.length;d<p;d++)h.push(s[d]);for(d=0,p=e.length;d<p;d++){var f=e[d],g=h.indexOf(f),m=void 0,b=void 0;m=r>d?t[d]:r>0?t[r-1]:c.SortDirection.ASCENDING,b=n>d?o[d]:n>0?o[n-1]:c.SortCase.SENSITIVE,g<0?(h.push(f),l[h.length-1]=m,u[h.length-1]=b):(l[g]=m,u[g]=b)}s=h,this._rs.orderBy(s,l,u)}else this._rs.orderBy(e,t,o)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype.setLabelComparer=function(e){this._rs.labelComparer=e},i.prototype.setNullsOrder=function(e){this._rs.setNullsOrder(e)},i.prototype.setOuterSort=function(e){this._rs.setOuterSort(e)},i.prototype.groupBy=function(e,t,o,r){t===void 0&&(t=!0),o===void 0&&(o=c.SortDirection.ASCENDING),r===void 0&&(r=c.SortCase.SENSITIVE),(e&&!(e.length<1)||this._groupedProvider.grouped)&&this.source.canGrouping(e)&&(this._groupSorting=t,this._groupSortDirection=o,t&&this._rs.orderBy(e,[o],[r],!1),this.$_groupBy(e))},i.prototype.groupByMode=function(e,t){this._groupSorting&&this._rs.orderBy(e,[this._groupSortDirection],[this._groupSortCase],!1),this.source.canGrouping(e)&&this._groupedProvider.groupByMode(e,t)},i.prototype.$_groupBy=function(e,t){e&&e.length>0?(this.source=this._groupedProvider,this._groupedProvider.groupByMode(e,t)):(this._groupedProvider.groupByMode(e,t),this.source=this._rs)},i.prototype.addGroupBy=function(e,t,o){var r;if(this._groupedProvider.groupCount<1?r=[t]:(r=this._groupedProvider.groupedFields).splice(e,0,t),this._groupSorting=e===0?o:this._groupSorting,this.source.canGrouping(r)){if(this._groupSorting){var n=[this._groupSortDirection];this._rs.orderBy(r,n,null,!1)}this.$_groupBy(r)}},i.prototype.removeGroupBy=function(e,t){if(this._groupedProvider.grouped){for(var o=this._groupedProvider.groupedFields,r=-1,n=0,s=o.length-1;s>=0;s--)if(n++,o[s]==e){r=s;break}if(r>=0){if(o.splice(r,t?n:1),!this.source.canGrouping(o))return;this._groupSorting&&this._rs.orderBy(o,[this._groupSortDirection],null,!1),this.$_groupBy(o)}else{if(!this.source.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},i.prototype.isGroupedField=function(e){return this._groupedProvider.isGroupedField(e)},i.prototype.getGroupLevel=function(e){return this._groupedProvider.getGroupLevel(e)},i.prototype.expand=function(e,t,o,r){this._groupedProvider.expand(e,t,o,r)},i.prototype.collapse=function(e,t,o,r){this._groupedProvider.collapse(e,t,o,r)},i.prototype.collapseAll=function(e){this._groupedProvider.collapseAll(e)},i.prototype.expandAll=function(e,t){this._groupedProvider.expandAll(e,t)},i.prototype.setPaging=function(e,t,o,r){this._rs.setPaging(e,t,o,r)},Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},enumerable:!1,configurable:!0}),i.prototype.setPage=function(e,t){this._rs.setPage(e,t)},Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(e){this._rs.pageCount=e},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(e){return this._rs.getPageOfDataRow(e)},i.prototype.getDisplayItemIndex=function(e){return this._rs.isPaging?e.index+this._rs.pageStartIndex:e.index},i.prototype.getCheckedRows=function(e){return this._rs.getCheckedRows(e)},Object.defineProperty(i.prototype,"checkableExpression",{set:function(e){this._rs.checkableExpression=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(e){this._rs.checkableCallback=e},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},i.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},i.prototype.getPrevRow=function(e){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(e):e&&e.index>0?this._rs.getItem(e.index-1):this._rs.getItem(0)},i.prototype.getNextRow=function(e){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(e):e&&e.index<this._rs.itemCount-1?this._rs.getItem(e.index+1):this._rs.getItem(0)},i.prototype.getGroupItem=function(e){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(e)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._rs.itemLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.grouped&&this._rs.movable},enumerable:!1,configurable:!0}),i.prototype.getAllItems=function(){return this.source.getAllItems()},i.prototype.getPagingAllItems=function(){var e=this._rs;return e.isSorted?e._sortedItems.slice():e._items.slice()},i.prototype.findItem=function(e,t,o,r,n){return this._groupedProvider.findItem(e,t,o,r,n)},i.prototype.findCell=function(e,t,o,r,n,s){return this._groupedProvider.findCell(e,t,o,r,n,s)},i.prototype.checkItems=function(e,t,o){this.source.checkItems(e,t,o)},i.prototype.checkItem=function(e,t,o,r){this.source.checkItem(e,t,o,r)},i.prototype.checkAll=function(e,t,o,r,n){this.source.checkAll(e,t,o,r,n)},i.prototype.setCheckFieldIndex=function(e){this._rs.setCheckFieldIndex(e)},i.prototype.setItemChecked=function(e,t){return this._rs.setItemChecked(e,t)},i.prototype.getItemChecked=function(e,t){return this._rs.getItemChecked(e,t)},i.prototype.setGroupCheckable=function(e){this.grouped&&this._groupedProvider.setGroupCheckable(e)},i.prototype.getItemOfRow=function(e,t){return this._rs.getItemOfRow(e,t)},i.prototype.addCellStyle=function(e,t,o){return this._rs.addCellStyle(e,t,o)},i.prototype.removeCellStyle=function(e,t){return this._rs.removeCellStyle(e,t)},i.prototype.getUserCellStyle=function(e,t){return this._rs.getUserCellStyle(e,t)},i.prototype._doBeginUpdate=function(e){var t=a.prototype._doBeginUpdate.call(this,e);return this._groupedProvider.$_setEditItem(t),t},i.prototype._doBeginAppendDummy=function(){var e=a.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(e),e},i.prototype._doBeginAppend=function(e){var t=a.prototype._doBeginAppend.call(this,e);return this._groupedProvider.$_setEditItem(t),t},i.prototype._doBeginInsert=function(e,t,o,r){var n=a.prototype._doBeginInsert.call(this,e,t,o,r);return this._groupedProvider.$_setEditItem(n),n},i.prototype._doCancelDummyEdit=function(){a.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},i.prototype._doCancelEdit=function(e,t){a.prototype._doCancelEdit.call(this,e,t),this._groupedProvider.$_setEditItem(null)},i.prototype._doCommitEdit=function(e,t){return!!a.prototype._doCommitEdit.call(this,e,t)&&(this._groupedProvider.$_setEditItem(null),!0)},i.prototype.onGroupedItemProviderGrouping=function(e,t){return this.fireConfirmEvent(qo.GROUPING,t)},i.prototype.onGroupedItemProviderGrouped=function(e){this.fireEvent(qo.GROUPED)},i.prototype.onGroupedItemProviderExpand=function(e,t){return this.fireConfirmEvent(qo.EXPAND,t)},i.prototype.onGroupedItemProviderExpanded=function(e,t){this.fireEvent(qo.EXPANDED,t)},i.prototype.onGroupedItemProviderCollapse=function(e,t){return this.fireConfirmEvent(qo.COLLAPSE,t)},i.prototype.onGroupedItemProviderCollapsed=function(e,t,o){this.fireEvent(qo.COLLAPSED,t,o)},i.prototype.onItemProviderFiltered=function(e,t,o){this._fireFiltered(t,o)},i.prototype.onItemProviderSort=function(e,t,o){this._fireSort(t,o,null)},i.prototype.onItemProviderSorted=function(e){this._fireSorted()},i}(eg),ud=function(a){function i(e,t,o){return o===void 0&&(o=null),a.call(this,e,t,o)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cellView",{get:function(){return this.owner},enumerable:!1,configurable:!0}),i}(function(a){function i(e,t,o){o===void 0&&(o=null);var r=a.call(this,e,o)||this;return r._clickable=!1,r._owner=t,r}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickable",{get:function(){return this._clickable},set:function(e){e!=this._clickable&&(this._clickable=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return""},i.prototype._doDraw=function(e){},i.prototype._hoverChanged=function(){this.invalidate()},i.prototype._changed=function(){this.invalidate()},i}(yo)),hd=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype._doUpdateContent=function(e,t,o){o[v.TextProp]=""},i.prototype._doRender=function(e){},i}(Do),cd=function(a){function i(e,t){var o=a.call(this,e,null,t)||this;return o._cells=[],o._levels=0,o}return w(i,a),i.prototype._doDispose=function(){this._cells.forEach(function(e){e.dispose()}),this._cells=null,a.prototype._doDispose.call(this)},i.prototype.prepare=function(e){for(this._levels=e;this._cells.length<e;){var t=this.$_createCell();this._cells.push(t)}},i.prototype._doPrepareTableExtents=function(e){if(this._levels>0)for(var t=this.width/this._levels,o=0;o<this._levels;o++)this._cells[o].width=t},i.prototype._doPrepareTableRow=function(e,t,o,r){a.prototype._doPrepareTableRow.call(this,e,t,o,r),r.className=this.$_getRowClassName(t)},i.prototype._prepareCellContent=function(e,t){var o=xe(e);return e[je]=t+1,o.createElement("div")},i.prototype._doLayoutContent=function(e){for(var t=this._levels;this.childCount<t;)this.addChild(this._cells[this.childCount]);for(;this.childCount>t;)this.removeLast()},i.prototype._doRender=function(e){},i.prototype._getCellCount=function(e){return this._levels},i.prototype._getCellWidth=function(e,t){return this._cells[t].width},i}(tr),dd=function(a){function i(e){return a.call(this,e,"rowGroupHeadView")||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-rowgroup-head"},i.prototype._getTableRowHeight=function(e,t){var o=this.grid,r=[];return o.header.visible&&r.push(e.headBounds.height),o.filterPanel.visible&&r.push(e.filterPanelBounds.height),o.headerSummaries.visible&&r.push(e.sumBounds.height),r[t]||0},i.prototype.$_createCell=function(){return new hd(this.doc,"rowGroupHeadCellView")},i.prototype._getTableRowCount=function(e){var t=this.grid,o=0;return t.header.visible&&o++,t.filterPanel.visible&&o++,t.headerSummaries.isVisible()&&o++,o},i.prototype.$_getRowClassName=function(e){var t=this.grid,o=[];return t.header.visible&&o.push(""),t.filterPanel.visible&&o.push("rg-rowgroup-filter-panel"),t.headerSummaries.isVisible()&&o.push("rg-rowgroup-summary"),o[e]||""},i}(cd),pd=function(a){function i(e){return a.call(this,e,"rowGroupFootView")||this}return w(i,a),i.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},i.prototype._getTableRowHeight=function(e,t){return e.footBounds.height},i.prototype.$_createCell=function(){return new hd(this.doc,"rowGroupFootCellView")},i.prototype._getTableRowCount=function(e){return 1},i.prototype.$_getRowClassName=function(e){return"rg-rowgroup-foot-row"},i}(cd),Wl="rg-rowgroup-expander",xb=Wl+" rg-rowgroup-expander-expanded",Ib=Wl+" rg-rowgroup-expander-collapsed",Ul=function(a){function i(e,t){var o=a.call(this,e,t,"rowGroupExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return w(i,a),i.isExpander=function(e){var t=e.className;return t&&t.indexOf(Wl)>=0},Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(e){e!=this._expanded&&(this._expanded=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._createDom=function(e){return e.createElement("span")},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},i.prototype._getCssSelector=function(){return this._expanded?xb:Ib},i.prototype._getCssDisplay=function(){return""},i.prototype._beforeDraw=function(e){this._setClassName(e)},i}(ud),Eb=function(a){function i(e){var t=a.call(this,e,"rowGroupBarCell")||this;return t._level=0,t._expander=new Ul(e,t),t.addChild(t._expander),t}return w(i,a),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),i.prototype.updateCell=function(e,t,o){a.prototype.updateCell.call(this,e,t,o);var r,n=t.item,s=n.getAncestor(this.bar.l);if(s){var l=e.rowGroup;r=(s.expanded?l.expandedAdornments:l.collapsedAdornments)===c.RowGroupAdornments.SUMMARY}if(s&&(n instanceof Ht&&n===s||s.getFirstVisibleItem(r)===n)&&s.level===this.bar.l){var u=this._expander._dom;o.appendChild(u),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=s.expanded;var h=e.rowGroup.$_isExpanderVisible(s);this._expander.visible=!s.expanded||h==null||h,u[be]=n.index}else this._expander.visible=!1;o.style.paddingTop="2px"},i.prototype.validate=function(){a.prototype.validate.call(this);var e=this._expander._dom;v.detach(e)},i}(Do),zl=function(a){function i(e){var t=a.call(this,e,null,"rowGroupBarContainer")||this;return t._cells=[],t._levels=0,t._bars=[],t}return w(i,a),i.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},i.prototype.prepare=function(e,t){this._levels=t},i.prototype.getLevelIndent=function(e){return e*this.width/Math.max(1,this._levels)},i.prototype.getViewOf=function(e){for(var t=this.getChildren(),o=0,r=t.length;o<r;o++){var n=t[o];if(n._expander._dom===e)return n}},Object.defineProperty(i.prototype,"currentLevels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},i.prototype._prepareCellContent=function(e,t){return xe(e).createElement("div")},i.prototype._doLayoutContent=function(e){for(var t,o=e.grid,r=o.rowGroup,n=this.width/Math.max(1,this._levels),s=this._bars,l=s.length,u=e.topIndex,h=e.fixedItemCount,d=h>0;this.childCount<l;)t=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(t);for(;this.childCount>l;)(t=this.removeLast()).validate(),this._cells.push(t);for(var p=0;p<l;p++){var f=s[p];t=this.getChild(p);var g=f.tr1,m=d?g<h?g:g-1+u:g+u,b=le.temp(o,m),C=r.getBarCell(b),x=e.getTableItemBounds(f.r);t.bar=f,t.level=f.c+1,t.updateCell(o,C,this.getCellContent(g,f.c)),x.x=n*f.c,x.width=n,t.setRect(x)}},i.prototype._doRender=function(e){},i.prototype._doPrepareTableRows=function(e,t){a.prototype._doPrepareTableRows.call(this,e,t),this.$_layoutBarCells(e,t)},i.prototype._getTableRowHeight=function(e,t){var o=e.fixedItemCount>0&&t>e.fixedItemCount?1:0;return e.getTableItemHeight(t-o)},i.prototype._getCellCount=function(e){return this._levels},i.prototype._getCellWidth=function(e,t){return this.width/Math.max(1,this._levels)},i.prototype._createCell=function(){return new Eb(this.doc)},i.prototype.$_calcLevels=function(e,t,o,r){for(var n,s=[],l=1,u=0,h=0;h<r-o;h++){var d=e[h+o].getAncestor(t);s.push(-1),d&&n===d||(s[u]=l,n=d,u=s.length-1,l=0),l++}return s[u]=l,s},i.prototype.$_layoutBarCells=function(e,t){var o=e.$_getItems(),r=o.length,n=e.fixedItemCount,s=t.children,l=this._bars=[];if(!(r<1)){for(var u=0,h=this._getCellCount(e);u<h;u++){var d=u+1,p=0,f=0;if(n>0){for(var g=void 0,m=void 0;p<n;p++,f++)(m=(g=s[f]).children[u]).style.display="",m.removeAttribute("rowspan"),v.setClassName(m,""),u===0&&v.setClassName(g,""),m[be]=p;g=s[f++],u===0&&v.setClassName(g,To.ROW_BAR_STYLE),(m=g.children[u]).style.display="",m.removeAttribute("rowspan"),v.setClassName(m,To.ROW_BAR_CELL_STYLE)}if(p<r)for(var b=this.$_calcLevels(o,d,p,r),C=0;p<r;p++,C++,f++){var x=b[C],E=(m=(g=s[f]).children[u],o[p]),S=E.getAncestor(d);if(u===0&&v.setClassName(g,""),m.removeAttribute("rowspan"),x>0){var P=this.grid.rowGroup,R=S&&(S.expanded?P.expandedAdornments:P.collapsedAdornments)===c.RowGroupAdornments.SUMMARY,k=x===1&&S&&(E instanceof Ht||S.getFirstVisibleItem(R)===E);(x>1||k)&&(l.push({r:p,tr1:f,tr2:f+x-1,c:u,l:d}),m.rowSpan=x),m.style.display="",v.setClassName(m,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(d)),m[be]=E.index}else m.style.display="none",v.setClassName(m,"")}}l.sort(function(D,F){return D.r-F.r})}},i}(Cl),Sb=function(a){function i(e){var t=a.call(this,e,"rowGroupBarPane")||this;return t._barContainer=new zl(e),t.addChild(t._barContainer),t._footView=new pd(e),t.addChild(t._footView),t._headView=new dd(e),t.addChild(t._headView),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentLevel",{get:function(){return this._barContainer.currentLevels},enumerable:!1,configurable:!0}),i.prototype.getLevelIndent=function(e){return this._barContainer.getLevelIndent(e)},i.prototype._doMeasure=function(e,t,o){var r=this.levelCount;return this._headView.prepare(r),this._footView.prepare(r),this._barContainer.prepare(e,r),new vo(this.levelCount*e.rowGroup.levelIndent,o)},i.prototype._doLayoutContent=function(e){var t=this.grid,o=e.headBounds;if(this._headView.visible=t.header.visible||t.headerSummaries.isVisible()||t.filterPanel.visible){var r=0;t.header.visible&&(r+=o.height),t.headerSummaries.isVisible()&&(r+=e.summaryBounds.height),t.filterPanel.visible&&(r+=e.filterPanelBounds.height),this._headView.setBounds(0,o.y,this.width,r),this._headView.layoutContent(e)}o=e.footBounds,(this._footView.visible=t.footers.isVisible())&&(this._footView.setBounds(0,o.y,this.width,o.height),this._footView.layoutContent(e)),o=e.rowBarBounds,this._barContainer.setBounds(0,o.y,this.width,o.height),this._barContainer.layoutContent(e)},i.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},i.prototype._visibleChanged=function(){var e=this;a.prototype._visibleChanged.call(this),this.getChildren().forEach(function(t){t.visible=e.visible})},i}(en);(function(a){function i(e){return a.call(this,e,"rowGroupPane")||this}w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)}})(en);var Ob=function(a){function i(e){var t=a.call(this,e,"rowGroupHeaderCellView")||this;return t._indent=0,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"indent",{get:function(){return this._indent},set:function(e){this._indent=Math.max(0,e)},enumerable:!1,configurable:!0}),i.prototype._createDom=function(e){return e.createElement("div")},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=e.style;t.top="50%",t.msTransform=t.transform="translate(0px, -50%)",t.setProperty("overflow","hidden","important"),t.setProperty("pointer-events","none","important")},i.prototype._beforeDraw=function(e){},i.prototype._doUpdateContent=function(e,t,o){o[v.TextProp]=t.text,o.style.left=this._indent>0?this._indent+"px":""},i}(Do),Yl=function(a){function i(e){var t=a.call(this,e,"rowGroupHeaderView")||this;return t._cellView=new Ob(e),t.addChild(t._cellView),t}return w(i,a),i.prototype._doDispose=function(){this._item=null,this._cellView=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),i.prototype._initDom=function(e){a.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},i.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},i.prototype._doLayoutContent=function(e){var t=e.grid,o=t.rowGroup;this._cellView.indent=o.indentVisible?0:t.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(t,o.getHeaderCell(this._item),this._cellView._dom)},i}(wr),Rb=function(a){function i(e){return a.call(this,e,"rowGroupRightHeaderView")||this}return w(i,a),i.prototype._doDispose=function(){this._item=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},i}(wr),ql=function(a){function i(e){return a.call(this,e,"rowGroupFooterView")||this}return w(i,a),i.prototype._doLayoutContent=function(e){var t=e.grid,o=t.rowGroup,r=e.cellLayouts._dataCells.length,n=this._getFirstCell(e),s=this._getStartCell(e)-n,l=s,u=this._getEndCell(e)-n,h=this._item instanceof ti;h&&(l=Math.max(s,this._item.parent.level-n)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,r,l,u),l=0;for(var d=0;d<r;d++){var p=this._getTableRow(e,this._domIndex+d),f=this._getBodyCells(this._domIndex+d),g=o.getFooterStyleName(this._item);p.className=g;for(var m=l;m<=u;m++){var b=f[m],C=b.layout;if(!(h&&b.merged&&b.head&&b===b.head)&&!(t.isRecycleMode()&&p.recycle)){if(b.clearExpander(),b.clearButtons(),b.renderer2&&b.renderer2.clearContent(),b.visible)if(C.isNull)C.isProxy||b.setClassName(Hl.FOOTER_CELL_STYLE);else{var x=le.temp(t,this._item.index,C),E=o.getFooterCell(x);this._updateCell(t,o,E,b)}}}}},i.prototype._getBodyCells=function(e){return this.parent.$_getBodyCells(e)},i.prototype._getTableRow=function(e,t){return this.parent.$_getTableRow(e,t)},i.prototype._getTableCell=function(e){return this.parent.$_getTableCell(this._domIndex,e)},i.prototype._getFirstCell=function(e){return e._firstCell},i.prototype._getLastCell=function(e){return e._lastCell},i.prototype._getStartCell=function(e){return e.getStartCell(!1)},i.prototype._getEndCell=function(e){return e.getEndCell(!1)},i.prototype._getBodyView=function(){return this.parent._bodyView},i.prototype._updateCell=function(e,t,o,r){var n=o.dataColumn.groupFooters.get(o.footerIndex),s=t.getFooterCellStyle(o,r.style.clear()),l=o.getSummary(),u=r.cell.firstElementChild;if(r.setClassName(s.styleName),v.setClassName(u,Hl.FOOTER_CELL_RENDERER),r.refreshFormatters(s),t.getFooterCellFormatters(n,r),l){var h=o.getTemplate(r);h===void 0?u[v.TextProp]=o.getDisplayText(r):u.innerHTML=h}else u[v.TextProp]=""},i.prototype.$_refreshSpans=function(e,t,o,r,n){for(var s=this.grid.layoutManager._tableRowPoints,l=0;l<o;l++)for(var u=this._getBodyCells(this._domIndex+l),h=r;h<=n;h++){var d=u[h],p=d.layout,f=p.parent,g=f&&f.vertical;if(!d.spanned)if(p.isProxy)d.clear(!1);else{var m=0,b=0,C=p.getGroupFooterUserSpan(this._item.parent,t),x=C?0:p.getGroupFooterSpan(e,t)-1;if(C){var E=this._item,S=(E.parent.footerCount-E.vindex)*o,P=C.footerCount||0,R=P>0?P*o:C.rowspan||1,k=C.colspan||1;R=Math.min(R,S),d.set(k,R,!0);for(var D=0;D<R;D++)for(var F=this._getBodyCells(this._domIndex+D+l),H=0;H<k;H++){var N=F&&F[H+h];N&&N!==d&&N.span(d)}}else if(x>0){var V=0,j=p.vindex+1;if(g)for(;V++<x&&V<o;)b+=(K=f.getVisible(j++))._dspan,this._getBodyCells(this._domIndex+l+1)[h].span(d);else for(;V++<x&&h-r+V<u.length&&j<f.visibleCount;){var K;if(!(K=f.getVisible(j++)))break;m+=K._cspan,u[h+V].span(d)}}p.isNull&&d.clear(!0),!C&&d.set(p._cspan+m,p._dspan+b,!0),d.rowSpan>1&&(d.height=s[d.rowIndex+d.rowSpan]-s[d.rowIndex],d.cell.firstElementChild.style.maxHeight=d.height-2+"px")}}},i}(Ms),Pb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getBodyCells=function(e){return this.parent.$_getFixedBodyCells(e)},i.prototype._getTableRow=function(e,t){return this.parent.$_getFixedTableRow(t)},i.prototype._getTableCell=function(e){return this.parent.$_getFixedTableCell(this._domIndex,e)},i.prototype._getBodyView=function(){return this.parent._fixedView},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i}(ql),kb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getBodyCells=function(e){return this.parent.$_getRightBodyCells(e)},i.prototype._getTableRow=function(e,t){return this.parent.$_getRightTableRow(t)},i.prototype._getTableCell=function(e){return this.parent.$_getRightTableCell(this._domIndex,e)},i.prototype._getBodyView=function(){return this.parent._rightView},i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i}(ql),Tb=function(a){function i(e,t){var o=a.call(this,e,t||"rowGroupLayer")||this;return o._headerPool=[],o._headerViews=[],o._rightHeaderPool=[],o._rightHeaderViews=[],o._footerPool=[],o._footerViews=[],o._fixedFooterPool=[],o._fixedFooterViews=[],o._rightFooterPool=[],o._rightFooterViews=[],o._indents=[],o}return w(i,a),i.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this.getAncestor(Er)},enumerable:!1,configurable:!0}),i.prototype.layout=function(e){this._doPrepareContent(e),this._doLayoutContent(e)},i.prototype.getHeaderView=function(e){for(var t=0,o=this._headerViews;t<o.length;t++){var r=o[t];if(r.item===e)return r}},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=e.style;t.setProperty("overflow","hidden","important"),t.setProperty("pointer-events","none","important")},i.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},i.prototype._doDraw=function(e){},i.prototype._doPrepareContent=function(e){this.$_prepareHeaders(e)},i.prototype.$_prepareIndents=function(e){for(var t=this._indents=[],o=e.rowGroupLevels+1,r=0;r<o;r++)t[r]=e.getLevelIndent(r);return t},i.prototype._doLayoutContent=function(e){var t,o=this.$_prepareIndents(e),r=e.$_getItems(),n=r.length,s=e.fixedItemCount,l=s>0,u=this._rightView,h=e.contentBounds.right-e.sideContentBounds.x,d=0,p=0,f=e.trs,g=s,m=l?g*f+1:g*f;for(u&&(t=e.rightContentBounds.clone(),h=Math.min(h,this.width-t.width),t.x-=this.x,t.leftBy(e.rightBarWidth));g<n;g++){var b=r[g];if(b instanceof Ht){var C=this._headerViews[d],x=e.getTableItemBounds(g),E=o[b.level];if(C.item=b,C.setBounds(E,x.y,h-E,x.height),C.layoutContent(e),u){var S=this._rightHeaderViews[d];S.item=b,S.setBounds(t.x,x.y,t.width,x.height),S.layoutContent(e)}d++,m++}else b instanceof Kt&&(this._fixedView&&((C=this._fixedFooterViews[p]).updateItem(b,m,f,!0),C.layoutContent(e)),this._rightView&&((C=this._rightFooterViews[p]).updateItem(b,m,f,!0),C.layoutContent(e)),this._bodyView&&(C=this._footerViews[p++],v.isDebugging(),C.updateItem(b,m,f,!0),C.layoutContent(e))),m+=f}},i.prototype.$_prepareHeaders=function(e){for(var t=e.$_getItems(),o=0,r=e.fixedItemCount,n=t.length;r<n;r++)t[r]instanceof Ht&&o++;for(var s=this._headerPool,l=this._headerViews;l.length<o;)(u=s.pop())||(u=new Yl(this.doc)),this.addChild(u),l.push(u);for(;l.length>o;){var u=l.pop();this.removeChild(u),s.push(u)}var h=this._rightHeaderPool,d=this._rightHeaderViews;if(this._rightView){for(;d.length<o;)(u=h.pop())||(u=new Rb(this.doc)),this.addChild(u),d.push(u);for(;d.length>o;)u=d.pop(),this.removeChild(u),h.push(u)}else for(;d.length>0;)u=d.pop(),this.removeChild(u),h.push(u)},i.prototype.$_prepareGroupItems=function(e,t,o,r){this._bodyView=t,this._fixedView=o,this._rightView=r},i.prototype.$_prepareGroupFooters=function(e,t){for(var o=0,r=t.fixedItemCount,n=e.length;r<n;r++)e[r]instanceof Kt&&o++;for(;this._footerViews.length<o;)(s=this._footerPool.pop())||(s=new ql(this.doc)),this.addChild(s),this._footerViews.push(s);for(;this._footerViews.length>o;){var s=this._footerViews.pop();this.removeChild(s),this._footerPool.push(s)}if(this._fixedView){for(;this._fixedFooterViews.length<o;)(s=this._fixedFooterPool.pop())||(s=new Pb(this.doc)),this.addChild(s),this._fixedFooterViews.push(s);for(;this._fixedFooterViews.length>o;)s=this._fixedFooterViews.pop(),this.removeChild(s),this._fixedFooterPool.push(s)}else for(;this._fixedFooterViews.length>0;)s=this._fixedFooterViews.pop(),this.removeChild(s),this._fixedFooterPool.push(s);if(this._rightView){for(;this._rightFooterViews.length<o;)(s=this._rightFooterPool.pop())||(s=new kb(this.doc)),this.addChild(s),this._rightFooterViews.push(s);for(;this._rightFooterViews.length>o;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)}else for(;this._rightFooterViews.length>0;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)},i.prototype.$_getTableRow=function(e,t){return this._bodyView._tbody.children[t]},i.prototype.$_getTableCell=function(e,t){return this._bodyView._tbody.children[e].children[t]},i.prototype.$_getFixedTableRow=function(e){return this._fixedView._tbody.children[e]},i.prototype.$_getFixedTableCell=function(e,t){return this._fixedView._tbody.children[e].children[t]},i.prototype.$_getRightTableRow=function(e){return this._rightView._tbody.children[e]},i.prototype.$_getRightTableCell=function(e,t){return this._rightView._tbody.children[e].children[t]},i.prototype.$_getBodyCells=function(e){return this._bodyView._cells[e]},i.prototype.$_getFixedBodyCells=function(e){return this._fixedView._cells[e]},i.prototype.$_getRightBodyCells=function(e){return this._rightView._cells[e]},i}(Ft),Db=function(a){function i(e){var t=a.call(this,e)||this;return t._enabled=!0,t._expandWhenGrouping=!0,t._summarizing=!0,t._commitBeforeGrouping=!0,t._commitBeforeExpand=!0,t._commitBeforeCollapse=!0,t._fixMergedColumns=!0,t._headerClickable=!1,t._toast=new Hn({visible:!1,message:t._messageCallback}),t.assignFrom(Re.grouping),t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prompt",{get:function(){return this._prompt||ye.messages.groupingPrompt},set:function(e){e!=this._prompt&&(this._prompt=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){e!=this._expandWhenGrouping&&(this._expandWhenGrouping=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizing",{get:function(){return this._summarizing},set:function(e){e!=this._summarizing&&(this._summarizing=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(e){this._commitBeforeGrouping=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(e){this._commitBeforeExpand=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(e){this._commitBeforeCollapse=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(e){this._fixMergedColumns=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerClickable",{get:function(){return this._headerClickable},set:function(e){this._headerClickable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},set:function(e){e&&!e.message&&((e=T(T({},e),{message:this._messageCallback})).message=this._messageCallback),this._toast.assignFrom(e)},enumerable:!1,configurable:!0}),i.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},i.prototype._messageCallback=function(){return Re.grouping.toast.message||ye.messages.groupingToastMessage},i}(hi),Ks=function(a){function i(e){var t=a.call(this,e)||this;return t._field=-1,t._text="",t._textWidth=0,t._textHeight=0,t._closeHeight=0,t._padHorz=5,t._padVert=4,t._itemGap=8,t}return w(i,a),i.prototype._doDispose=function(){v.detach(this._textView),v.detach(this._closeView),this._textView=this._closeView=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),i.prototype.setColumn=function(e){this._field=e.dataIndex,this._textView[v.TextProp]=this._text=e.displayText},i.prototype.isCloseButton=function(e){return e===this._closeView},i.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=xe(e);this._textView=t.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=t.createElement("span"),this._closeView.className="rg-group-panel-item-close",e.appendChild(this._closeView)},i.prototype._doMeasure=function(e,t,o){var r=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,n=this._textHeight=this._textView.offsetHeight;return n=Math.max(n,this._closeHeight=this._closeView.offsetHeight),n+=2*this._padVert,new vo(r,n)},i.prototype._doLayoutContent=function(e){},i.prototype._doDraw=function(e){var t=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((t-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((t-this._closeHeight)/2)+"px"},i}(wr),fd=function(a){function i(e,t){var o=a.call(this,e,t)||this;return o._minHeight=0,o._itemViews=[],o._count=0,o._padHorz=16,o._padVert=10,o._itemGap=20,o.visible=!1,o.assignFrom(Re.groupPanel),o}return w(i,a),i.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach(function(e,t){e.dispose()}),this._itemViews=null,v.detach(this._messageView),this._messageView=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(e){this._minHeight!==e&&(this._minHeight=e,this._doSizeChanged())},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-group-panel"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=xe(e);e.style.overflow="hidden";var o=this._messageView=t.createElement("span");o.className="rg-group-panel-message",e.appendChild(o)},i.prototype._doMeasure=function(e,t,o){var r=e.groupingOptions;this._count=e.rowGroupLevels;var n=this.minHeight,s=0,l=this._messageView.style;if(this._count>0?l.display="none":(l.display="",this._messageView[v.TextProp]=r.prompt,s=this._messageView.offsetHeight,n=Math.max(n,s+2*this._padVert),l.left=this._padHorz+"px",l.top=(n-s)/2+"px"),this.$_prepareItemViews(e,this._count),this._count>0){for(var u=0;u<this._count;u++){var h=(d=this._itemViews[u]).measure(e,t,o);d.width=h.width,s=Math.max(s,h.height)}for(n=Math.max(n,s+2*this._padVert),u=0;u<this._count;u++){var d;(d=this._itemViews[u]).height=s,d.y=(n-s)/2}}return new vo(t,n)},i.prototype._doPrepareContent=function(e){},i.prototype._doLayoutContent=function(e){if(this._count>0){var t=this._padHorz;this._padVert;for(var o=0;o<this._count;o++){var r=this._itemViews[o];r.x=t,t+=this._itemGap+r.width}}},i.prototype._doDraw=function(e){},i.prototype._visibleChanged=function(){var e=this.grid;e&&(e.invalidateLayout(),e.invalidatePosition())},i.prototype._doSizeChanged=function(){var e=this.grid;this.invalidate(!0),e&&(e.invalidateLayout(),e.invalidatePosition())},i.prototype.$_prepareItemViews=function(e,t){for(var o=this._itemViews,r=e.rowGroupFields,n=o.length;n<t;n++)o.push(new Ks(e.doc));for(n=0;n<t;n++){var s=o[n];s.setColumn(e.$_getVisibleRootByField(r[n],!0)),s.visible=!0,this.addChild(s)}for(n=t;n<o.length;n++)this.removeChild(o[n])},i}(Ps),Er=function(a){function i(e,t,o){var r=a.call(this,e,t,o)||this;r._rowGroupSummaryRuntime=new Hg,r._addGridObject(r._rowGroup=new Hl(r)),r._rs=r._createItemSource(),r.itemSource=r._rs,r._groupingOptions=new Db(r),r._groupingOptionsChanged(r._groupingOptions),r._groupPanelView=new fd(r.doc,r.rowGroup),r.topContentPane.addChild(r._groupPanelView);for(var n=[r._groupBarPane._headView,r._groupBarPane._footView,r._groupBarPane._barContainer],s=n.length-1;s>=0;s--){var l=n[s];r._tableViews[l.$_hash]=l}return r.editOptions.displayEmptyEditRow&&r.editOptions.appendable&&r._rs.appendDummy(),r}return w(i,a),i.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),a.prototype._doDispose.call(this)},i.prototype._doCreateOtherElements=function(){this._groupView=new Tb(this.doc),this.addElement(this._groupView)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(e){this._rs.maxRowCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupView",{get:function(){return this._groupView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paged",{get:function(){return this._rs.page>=0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},set:function(e){this.setPage(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(e){var t=this._rs.pageCount;this._rs.pageCount=e,this._rs.pageCount!=t&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!1},i.prototype.recursiveDeleting=function(){return!1},i.prototype._beforeChangeLayout=function(){this.ungroupBy()},i.prototype.isGrouped=function(e){return e&&e.groupLevel>0},i.prototype.isGroupedField=function(e){return this._rs.isGroupedField(e)},i.prototype.isSortByLabelColumn=function(e){return this.columnByField(e).sortByLabel},i.prototype.getGroupLevel=function(e){return this._rs.getGroupLevel(e)},i.prototype.groupByFieldNames=function(e,t,o){o===void 0&&(o=c.SortDirection.ASCENDING);var r=this.dataSource;if(r&&e&&e.length>0){for(var n=[],s=0;s<e.length;s++){var l=e[s],u=r.getFieldIndex(l),h=this.columnByField(l),d=h&&this.layoutByColumn(h);!d||this.rowGroup.mergeMode&&d.parent!=this.activeCellLayout._root||u>=0&&n.push(u)}n.length>0&&(t=t===void 0?this.rowGroup.sorting:t,this.groupBy(n,t,o))}else this.ungroupBy()},i.prototype.groupBy=function(e,t,o){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,(function(){this.$_doGroupBy(e,t,o)}).bind(this))},i.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,c.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},i.prototype.ungroupBy=function(){this.clearGroupBy()},i.prototype.addGroupBy=function(e,t){var o=this;t&&(this.isItemEditing(null)||this.isGrouped(t)||t.layout&&t.layout.visible&&(!t.layout.isRoot&&this.rowGroup.mergeMode||t.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,function(){o.editController.remainFocusing(!0),o.$_doAddGroupBy(e,t)})))},i.prototype.removeGroupByField=function(e){!(e<0)&&!this.isItemEditing(null)&&this.isGroupedField(e)&&(this._rs.removeGroupBy(e,!1),this.$_doRowGroupFooterMergeChanged(),this.editController.remainFocusing(!0))},i.prototype.expand=function(e,t,o,r){this.isItemEditing(null)||this._rs.expand(e,t,o,r)},i.prototype.expandAll=function(e,t){this.isItemEditing(null)||this._rs.expandAll(e,t)},i.prototype.collapse=function(e,t,o,r){this.isItemEditing(null)||this._rs.collapse(e,t,o,r)},i.prototype.collapseAll=function(e){this.isItemEditing(null)||this._rs.collapseAll(e)},i.prototype.isGroupedColumn=function(e){return e&&e.dataIndex>=0&&this._rs.isGroupedField(e.dataIndex)},i.prototype.getSortFields=function(){return this.itemSource.getSortFields()},i.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},i.prototype.getSortCases=function(){return this.itemSource.getSortCases()},i.prototype.setPaging=function(e,t,o){t===void 0&&(t=10),o===void 0&&(o=-1),this._rs.setPaging(e,t,o,null)},i.prototype.setPage=function(e,t){if(t===void 0&&(t=-1),(e=Math.max(0,Math.min(e,this._rs.pageCount-1)))!=this._rs.page){var o=!1;this.$_firePageChanging(e)&&(this._rs.setPage(e,t),o=!0),o&&this.$_firePageChanged(this._rs.page)}},i.prototype.getPageOfDataRow=function(e){return this._rs.getPageOfDataRow(e)},Object.defineProperty(i.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._createSidePane=function(){return this._groupBarPane=new Sb(this.doc)},i.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},i.prototype._createLayoutManager=function(){return new Mb(this)},i.prototype.canGrouping=function(){return this._groupPanelView.visible},i.prototype._canMerge=function(){return this.dataCount>0},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(e){this._rs.undoable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(e){this._rs.execute(e)},i.prototype.clearCommandStack=function(e){e===void 0&&(e=!0),this._rs.clearCommandStack(e)},i.prototype.getRowView=function(e,t){return t instanceof Ht?this._groupView.getHeaderView(t):a.prototype.getRowView.call(this,e,t)},i.prototype._doSortItems=function(e,t,o){var r=this.itemSource;r.setLabelComparer(this._doPrepareComparer(e)),r.orderBy(e,t,o)},i.prototype.setNullsOrder=function(e){this._rs.setNullsOrder(e)},i.prototype.setOuterSort=function(e){var t=this;e instanceof Function?this._rs.setOuterSort(function(o,r){var n=o.map(function(s,l,u){return{fieldName:t.dataSource.getFieldName(s),orgFieldName:t.dataSource.getOrgFieldName(s),direction:r[l]||c.SortDirection.ASCENDING}});return e.call(t,t.handler,n)}):this._rs.setOuterSort(e)},i.prototype._doColumnFiltersChanged=function(e,t){this.applyFilters(e,t),this.invalidateLayout()},i.prototype.setOptions=function(e){if(e){var t=this._rs;e.hideDeleted!==void 0&&(t.hideDeleted=e.hideDeleted),e.hideDeletedRows!==void 0&&(t.hideDeleted=e.hideDeletedRows),e.inclusiveFiltering!==void 0&&(t.inclusiveFiltering=e.inclusiveFiltering),e.filterOr!==void 0&&(t.inclusiveFiltering=e.filterOr),e.summaryMode!==void 0&&(t.summaryMode=e.summaryMode),e.groupSummaryMode!==void 0&&(t.groupSummaryMode=e.groupSummaryMode),e.sortMode!==void 0&&(t.sortMode=e.sortMdoe),e.filterMode!==void 0&&(t.filterMode=e.filterMode),e.rowGroup&&this.rowGroup.assignFrom(e.rowGroup),a.prototype.setOptions.call(this,e)}},i.prototype.$_beforeRender=function(){this._groupBarPane.levelCount!==this._groupBarPane.currentLevel&&(this._needPosition=!0),a.prototype.$_beforeRender.call(this)},i.prototype._visualObjectChanged=function(e){a.prototype._visualObjectChanged.call(this,e),e instanceof Xr&&(this._rs.checkableExpression=e.checkableExpression)},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getCheckedRows=function(e,t,o){var r,n;if(t){r=[];for(var s=0,l=this.itemCount;s<l;s++)(n=this.getItem(s)).checked&&n.dataRow>=0&&r.push(n.dataRow)}else r=this._rs.getCheckedRows(o);return e&&r.sort(function(u,h){return u-h}),r},i.prototype.getCheckedItemIndices=function(e){for(var t=[],o=0,r=this.itemCount;o<r;o++){var n=this.getItem(o);n.checked&&(e||n.dataRow>=0)&&t.push(n.index)}return t},i.prototype.getCheckedItems=function(e){for(var t=[],o=0,r=this.itemCount;o<r;o++){var n=this.getItem(o);n.checked&&(e||n.dataRow>=0)&&t.push(n)}return t},i.prototype.getMergedItems=function(e,t,o,r){var n=(function(){return h.index<p?d.mergeRows?u.$_checkFixedMerge(this.itemSource,s,e,p):null:u.$_checkMerge(this.itemSource,s,e,!0,p)}).bind(this),s=t instanceof Oe?t:this.columnByName(t),l=s.layout,u=l.merges,h=this.getItem(e);if(!h)return null;if(!u)return r?o&&!h.isDataRow?null:[h.index]:null;var d=this.fixedOptions,p=d.rowCount,f=n();if(!f){var g=this.getGroupLevel(s.dataIndex);(g>0&&s.mergeGrouped&&!this.isTree()?al.getDefault(g,this.rowGroup.mergeMode):l.$_mergeRuleObj()).parseBounds(this.itemSource,s.dataIndex,0,this.itemCount-1,u._flags),f=n()}if(!f&&r)return[e];if(f){for(var m=[],b=f.top;b<=f.bottom;b++)(this.getItem(b).isDataRow||!o)&&m.push(b);return m.length>0?m:null}return null},i.prototype.findGroupItem=function(e,t){var o=this.getGroupLevel(t);if(o>0)for(var r=e instanceof ft?e:e.parent;r;){if(r.level==o)return r;r=r.parent}return null},i.prototype.getItemOfModel=function(e){return e.itemIndex>=0?this.getItem(e.itemIndex):e.id>=0?this._rs.getGroupItem(e.id):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},i.prototype.getIndicatorIndex=function(e,t){var o=this._rs.getDisplayItemIndex(e),r=this.paged?this._rs.itemLength:this.itemCount;return t?r-o-1:o},i.prototype.indicatorReverse=function(e){return!(this.rowGrouped&&this.paged)&&e===c.IndicatorValue.REVERSE},i.prototype.getFirstRow=function(){return this._rs.getFirstRow()},i.prototype.getLastRow=function(){return this._rs.getLastRow()},i.prototype.getPrevRow=function(e){return this._rs.getPrevRow(e)},i.prototype.getNextRow=function(e){return this._rs.getNextRow(e)},i.prototype.canMoveRows=function(e,t,o){if(o&&this.canMoveRow(t,!1)&&e){for(var r=!1,n=0;n<e.length;n++){var s=e[n];s&&s.isDataRow&&(r=!0)}return r}},i.prototype._getMoveTarget=function(e,t,o,r){return this.getItem(o+r)},i.prototype._doMoveRows=function(e,t){var o=t&&t.dataRow;if(o>=0){for(var r=[],n=0,s=e;n<s.length;n++){var l=s[n],u=l&&l.dataRow;u>=0&&r.push(u)}if(r.length>0)return this.dataSource.moveRowList(r,o)}},i.prototype._getCellTypeOf=function(e){return e instanceof dd?c.GridCellType.GROUP_HEAD:e instanceof pd?c.GridCellType.GROUP_FOOT:e instanceof zl?c.GridCellType.GROUP_BAR:void 0},i.prototype.updatePastedRow=function(e,t,o){var r=e.dataRow;if(r>=0){var n=this.dataSource;n&&n.updateRow(r,t,o)}},i.prototype.appendPastedRow=function(e){var t=this.dataSource;if(t)return t.appendRow(e)},i.prototype.getSummaryCount=function(e){return e==="groupFooter"?this.rowGroup.footers.count:a.prototype.getSummaryCount.call(this,e)},i.prototype.isRecycleMode=function(){return a.prototype.isRecycleMode.call(this)&&(!this.rowGrouped||this.activeCellLayout.dataRows===1)},i.prototype._createItemSource=function(){return new ld(!0,this._rowGroup)},i.prototype.$_rowGroupChanged=function(e){this._doRowGroupMergeModeChanged()},i.prototype._groupingOptionsChanged=function(e){this._rs.expandWhenGrouping=e.expandWhenGrouping,this.groupPanelView&&this.groupPanelView.invalidate()},i.prototype.$_rowGroupAdornmentsChanged=function(e,t){this._rs._groupedProvider.resetAdornments(this.handler,e,t)},i.prototype.$_getVisibleRootByField=function(e,t){for(var o=this.visibleLayoutCount,r=0;r<o;r++){var n=this.getVisibleLayout(r),s=n instanceof We&&v.cast(n.firstColumn,Oe);if(s&&s.dataIndex==e)return s}return t?this.columnByField(e):null},i.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},i.prototype._doRowGroupMergeModeChanged=function(){a.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var e=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(e&&e.length>0)for(var t=e.length-1;t>=0;t--){var o=this.$_getVisibleRootByField(e[t],!1);o?o.$_setMergeGrouped(!0):e.splice(t,1)}this._rs.groupByMode(e,!0)}else this._rs.groupByMode(e,!1)},i.prototype.$_doRowGroupFooterMergeChanged=function(){},i.prototype.$_doGroupBy=function(e,t,o){var r,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&e&&(r=e.length)>0){for(var s=n.fieldCount,l=[],u=0;u<r;u++)e[u]>=0&&e[u]<s&&l.push(e[u]);if(l.length>0){if(this.rowGroup.mergeMode)for(u=l.length-1;u>=0;u--){var h=this.$_getVisibleRootByField(l[u],!1);h?h.$_setMergeGrouped(!0):l.splice(u,1)}l.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(l)),this._rs.groupBy(l,t,o))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,c.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},i.prototype.$_doAddGroupBy=function(e,t){var o=t.dataIndex;t.$_setMergeGrouped(this.rowGroup.mergeMode);try{var r=this.rowGroupFields?this.rowGroupFields.slice():[];r.push(o),this._rs.setLabelComparer(this._doPrepareComparer(r)),this._rs.addGroupBy(e,o,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(n){throw t.$_setMergeGrouped(!1),n}},i.prototype.$_clearGroupedIndices=function(){for(var e=this.columnCount-1;e>=0;e--){var t=v.cast(this.getColumn(e),Oe);t&&t.$_setGroupLevel(this._rs.getGroupLevel(-1))}},i.prototype.$_setGroupedIndices=function(){for(var e=this.columnCount-1;e>=0;e--){var t=v.cast(this.getColumn(e),Oe);t&&t.$_setGroupLevel(this._rs.getGroupLevel(t.dataIndex))}},i.prototype.$_firePageChanging=function(e){return this.fireConfirmEvent(i.PAGE_CHANGING,e)},i.prototype.$_firePageChanged=function(e){this.fireEvent(i.PAGE_CHANGED,e)},i.prototype.$_firePageCountChanged=function(e){this.fireEvent(i.PAGE_COUNT_CHANGED,e)},i.prototype.$_fireGrouping=function(e){return this.fireConfirmEvent(i.GROUPING,e)},i.prototype.$_fireGrouped=function(){this.fireEvent(i.GROUPED)},i.prototype.$_fireExpanding=function(e){return this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.$_fireExpanded=function(e){this.fireEvent(i.EXPANDED,e)},i.prototype.$_fireCollapsing=function(e){return this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.$_fireCollapsed=function(e){this.fireEvent(i.COLLAPSED,e)},i.prototype.onGroupedItemProviderGrouping=function(e,t){return this.$_fireGrouping(t)},i.prototype.onGroupedItemProviderGrouped=function(e){this.selections.clear(!0),this.$_clearGroupedIndices(),this.groupPanelView.invalidate(),this.setNeedRefresh(!0);var t,o=this._rs.groupByFields;if(o&&o.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var r=[],n=this.visibleLayoutCount,s=0;s<n;s++){var l=this.getVisibleLayout(s),u=v.cast(l.firstColumn,Oe);t=l.merges,u&&(u.mergeGrouped&&u.groupLevel<=0?(t&&t.clear(),u.$_setMergeGrouped(!1)):u.mergeGrouped&&(t||(t=new xs(l)),r.push(u)))}if((n=r.length)>0)for(r=r.sort(function(h,d){return h.groupLevel-d.groupLevel}),s=0;s<n;s++)(t=r[s].layout.merges).clear(),t.initialize(_o.INIT_COUNT),r[s].layout.vindex=s;for(n=this.visibleLayoutCount,s=0;s<n;s++)(u=v.cast(this.getVisibleLayout(s).firstColumn,Oe))&&!u.mergeGrouped&&(t=u.layout.merges)&&(t.clear(),t.initialize(_o.INIT_COUNT))}this.requestPrepareEditor(),this._itemCheckChanged=!0,this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},i.prototype.onGroupedItemProviderExpand=function(e,t){return this.$_fireExpanding(t)},i.prototype.onGroupedItemProviderExpanded=function(e,t){this.$_fireExpanded(t)},i.prototype.onGroupedItemProviderCollapse=function(e,t){return this.$_fireCollapsing(t)},i.prototype.onGroupedItemProviderCollapsed=function(e,t,o){if(o&&this.topIndex>t.getFirstVisibleItem(!1).index&&t instanceof yi){var r=t.getFirstVisibleItem(!1),n=this.layoutByColumn(this.columnByField(t.groupField)),s=mi.tempItem(this,r,n);le.areEquals(this.focusedIndex,s)?this.topIndex=s.itemIndex:this.setFocusedIndex(s)}this.$_fireCollapsed(t)},i.PAGE_CHANGING="onGridViewPageChanging",i.PAGE_CHANGED="onGridViewPageChanged",i.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",i.GROUPING="onGridViewGrouping",i.GROUPED="onGridViewGrouped",i.EXPANDING="onGridViewExpanding",i.EXPANDED="onGridViewExpanded",i.COLLAPSING="onGridViewCollapsing",i.COLLAPSED="onGridViewCollapsed",i}(Fo),Mb=function(a){function i(e){return a.call(this,e)||this}return w(i,a),Object.defineProperty(i.prototype,"panelVisible",{get:function(){return this.grid.groupPanelView.visible},enumerable:!1,configurable:!0}),i.prototype.getLevelIndent=function(e){var t=this.grid;if(this.mergedRowGrouped){for(var o=this.fixedLayoutCount,r=0,n=0;n<e;n++)r+=n<o?this.getFixedLayoutWidth(n):this.getLayoutWidth(n-o);return o?e>o?r=Math.max(this.fixedWidth,r+this.fixedBarWidth-this.leftPos):e===o&&(r+=this.fixedBarWidth):r-=this.leftPos,r}return t.rowGroup.indentVisible?t.groupBarPane.getLevelIndent(e):0},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topPanelVisible",{get:function(){return this.panelVisible},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return this.grid.rowGroupFields},enumerable:!1,configurable:!0}),i.prototype.$_groupView=function(e){return this.grid.groupView},i.prototype.setLeftPos=function(e,t){a.prototype.setLeftPos.call(this,e,t);var o=this.grid,r=o.mergedRowGrouped,n=this.$_groupView(r);n.visible&&this.$_layoutRowGroupView(o,n)},i.prototype._prepareItems=function(e){a.prototype._prepareItems.call(this,e);var t=this.grid;if(t.rowGrouped){var o=t.mergedRowGrouped,r=this.$_groupView(o),n=this.contentBounds.isEmpty?null:t.bodyView,s=this.fixedContentBounds.isEmpty?null:t.fixedBodyView,l=this.rightContentBounds.isEmpty?null:t.rightBodyView;r.$_prepareGroupItems(this,n,s,l),r.$_prepareGroupFooters(this._items,this)}},i.prototype._doMeasureTopPane=function(e,t){var o=e.groupPanelView;if(this.panelVisible)if(o._dirty){var r=o.measure(e,t.width,t.height);t.height=r.height}else t.height=o.bounds.height;else t.height=1,t.width=1},i.prototype._doLayoutTopPane=function(e,t){var o=e.groupPanelView;o.setBounds(0,0,t.width,t.height),this.panelVisible&&o.layoutContent(this)},i.prototype._doLayout=function(e,t){a.prototype._doLayout.call(this,e,t)},i.prototype._adjustLayout=function(e,t){a.prototype._adjustLayout.call(this,e,t);var o=e.rowGrouped,r=e.mergedRowGrouped,n=e._sideContentPane;n&&this._layoutSidePane(e,n);var s=this.$_groupView(r);this.$_groupView(!r).visible=!1,(s.visible=o)&&this.$_layoutRowGroupView(e,s)},i.prototype.isMergedCell=function(e){var t=this.grid;if(t.rowGroup.mergeMode&&t.isGroupedColumn(e.dataColumn))return!0;var o=e.layout;if(o&&o.isColumn&&e.layout.merged){var r=o.merges;if(r)return r.getRoom(e)!=null}return!1},i.prototype.$_layoutRowGroupView=function(e,t){var o=this.contentBounds,r=this.sideContentBounds.clone();r.top=o.y+this.bodyBounds.y,r.right=this.rightContentBounds.right,r.bottom=Math.min(this.footBounds.y+o.y,o.bottom),t.setRect(r),t.layout(this)},i}(xl),Lb=function(a){function i(e){var t=a.call(this,e,"gridSelectionTool")||this;return t._panelCellReq=new _d,t._panelCellFeedback=new Fb(e.doc),t._groupingReq=new Kl,t}return w(i,a),i.prototype._doDispose=function(){this._panelCellReq=null,a.prototype._doDispose.call(this)},i.prototype._doPointerDown=function(e){var t=this.grid,o=this.mouseEventTarget;if(o instanceof tt(e.target).HTMLElement&&(bi.isExpander(o)||Ul.isExpander(o))){var r=this._findTableCell(o),n=t.getTableView(r);if(bi.isExpander(o)&&n instanceof Oi){var s=t.getDataCellIndex(r,this._tempIndex),l=n.getCellAt(t.layoutManager,s),u=t.findGroupItem(l.item,l.layout.firstColumn.dataIndex);this.$_toggleExpanded(t,u,e)}else if(Ul.isExpander(o)&&n instanceof zl){var h=n.getViewOf(o);return void((u=(u=t.getItem(o[be])).getAncestor(h.level))instanceof Ht&&this.$_toggleExpanded(t,u,e))}}a.prototype._doPointerDown.call(this,e)},i.prototype._doClick=function(e){var t=e.mouseX,o=e.mouseY,r=this.grid,n=this.findElementAt(t,o,!1);n instanceof Ks&&n.isCloseButton(e.target)&&r.removeGroupByField(n.field),a.prototype._doClick.call(this,e)},i.prototype._doDblClick=function(e){var t=e.mouseX,o=e.mouseY,r=this.grid,n=this.findElementAt(t,o,!1);n instanceof Yl&&r.groupingOptions.headerClickable?this.$_toggleExpanded(r,n.item,e):a.prototype._doDblClick.call(this,e)},i.prototype._getEditRequest=function(e,t,o,r,n,s,l){var u=a.prototype._getEditRequest.call(this,e,t,o,r,n,s,l);if(u)return u;var h=this.grid,d=this.findElementAt(o,r,!1),p=this._findTableCell(e),f=p&&h.getTableView(p);if(f instanceof rr){var g=f.layoutByCell(p),m=g.firstColumn;if(h.groupPanelView.visible&&m&&m.groupable&&h.groupingOptions.enabled){var b=h.layoutManager.getHeaderCellRect(g);return this._groupingReq.init(g,b,o,r)}}return d instanceof Ks?this._panelCellReq.init(d,o,r):void 0},i.prototype._getDragTracker=function(e,t,o){var r=this.grid;return e instanceof _d?new Nb(r,e,this._panelCellFeedback):e instanceof Kl?new Ab(r,e,this._panelCellFeedback):a.prototype._getDragTracker.call(this,e,t,o)},i.prototype.getNextRequest=function(e,t,o,r){if(!(e instanceof Tl&&e.layout instanceof We))return e instanceof Kl&&e.layout instanceof We&&t instanceof zc?this._colMoveReq.init(e.layout,o,r,null):a.prototype.getNextRequest.call(this,e,t,o,r);var n=this.grid,s=e.layout.firstColumn;return n.groupingOptions.enabled&&n.layoutManager.topPanelVisible&&s instanceof Oe&&s.groupable&&r+3<n.groupPanelView.bottom?this._groupingReq.init(e.layout,t,o,r):void 0},i.prototype._getClickData=function(e,t){if(e instanceof Yl)return Ae.getItem(c.GridCellType.GROUP_HEADER,e.itemIndex,null);if(e instanceof fd)return Ae.getData(c.GridCellType.GROUP_PANEL);if(e instanceof Ks){if(e.isCloseButton(t.target))return;var o=this.grid.dataSource.getOrgFieldName(e.field);return Ae.getField(c.GridCellType.GROUP_COLUMN,e.field,o)}return a.prototype._getClickData.call(this,e,t)},i.prototype.$_toggleExpanded=function(e,t,o){t.expanded?e.collapse(t,!1,!1,o):e.expand(t,!1,!1,0)},i}(Bl),_d=function(a){function i(){var e=a.call(this)||this;return e._field=-1,e}return w(i,a),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t,o){return this._source=e,this._x=t,this._y=o,this._field=e.field,this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),i}(El),Fb=function(a){function i(e){var t=a.call(this,e)||this;return t._no=!1,t}return w(i,a),i.prototype.setField=function(e,t){t===void 0&&(t=!1),this._textView[v.TextProp]=e,this._noMark.style.display=(this._no=t)?"inline-block":"none"},i.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=this.doc;this._textView=t.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=t.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},i.prototype._doDraw=function(e){var t=this._textView.offsetWidth,o=this._textView.offsetHeight,r=this._textView.style;r.left=Math.max(0,(this.width-t)/2)+"px",r.top=Math.max(0,(this.height-o)/2)+"px",this._no&&(t=this._noMark.offsetWidth,o=this._noMark.offsetHeight,(r=this._noMark.style).left=Math.max(0,(this.width-t)/2)+"px",r.top=Math.max(0,(this.height-o)/2)+"px")},i}(yo),Nb=function(a){function i(e,t,o){var r=a.call(this,e,"groupPanelCellTracker")||this;return r._request=t,r._feedback=o,r}return w(i,a),i.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid,s=this._request.source.boundsByContainer();return this._feedback.setRect(s),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=t-s.x,this._offsetY=o-s.y,!0},i.prototype._doDrag=function(e,t,o,r){return t-=this._offsetX,o-=this._offsetY,this._feedback.move(t,o),!0},i.prototype._doCompleted=function(){var e=this.grid,t=e.layoutManager;this.currentY>t.contentBounds.y&&e.removeGroupByField(this._request.field)},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(Mo),Kl=function(a){function i(){return a.call(this)||this}return w(i,a),i.prototype._doDispose=function(){this._layout=null,this._source=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),i.prototype.init=function(e,t,o,r){return this._layout=e,this._source=t,this._x=o,this._y=r,this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),i}(El),Ab=function(a){function i(e,t,o){var r=a.call(this,e,"groupingCellTracker")||this;return r._request=t,r._feedback=o,r}return w(i,a),i.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,t,o,r){var n=this.grid,s=this._request.source,l=s instanceof yo?s.boundsByContainer():s,u=n.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(l),this._feedback.setField(this._request.layout.firstColumn.displayText,u),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=t-l.x,this._offsetY=l.height/3,!0},i.prototype._doDrag=function(e,t,o,r){return!(o>this.grid.layoutManager.topContentBounds.bottom)&&(t-=this._offsetX,o-=this._offsetY,this._feedback.move(t,o),!0)},i.prototype._doCompleted=function(){var e=this.grid,t=e.layoutManager;if(this.currentY<t.contentBounds.y){var o=e.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);e.addGroupBy(t.rowGroupLevels,o)}},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i.prototype.getNextRequest=function(e,t){return this.grid.activeTool.getNextRequest(this._request,this._request.source,e,t)},i}(Mo),gd=function(a){function i(e,t,o,r){o===void 0&&(o=!1),r===void 0&&(r=null);var n=a.call(this,e,o,r)||this,s=n._containerDom.parentElement;return s.style.height&&(n._orgCssHeight=s.style.height),n._gridView&&(n._gridView.$_handler=t),n}return w(i,a),i.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"gridView",{get:function(){return this._gridView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},enumerable:!1,configurable:!0}),i.prototype.setWatchTimer=function(e){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),e&&(this._watchTimer=setInterval(this._displayObserver,100))},i.prototype.recallHeight=function(){var e=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?e.height=this._orgCssHeight:e.removeProperty("height"))},i.prototype.getTableCell=function(e){return this._gridView.getTableCell(e)},i.prototype._doResized=function(e){a.prototype._doResized.call(this,e),this._gridView.$_containerResized()},i.prototype._isOutChildElement=function(e){var t=this.gridView,o=e.type==="focusout"?e.relatedTarget:e.target;if(t.filterSelector.opened&&v.isAncestorOf(t.filterSelector._element,o,e))return!0;if(o instanceof SVGElement)for(var r=v.getComposedPath(e);r&&r.length&&!((o=r.shift())instanceof HTMLElement););var n=o&&o.className||"";if(n.indexOf("rg-popup")>=0)return!0;try{if(n.indexOf("rg-editor")>=0&&o.$_owner._grid.container!==this||n.indexOf("rg-root")>=0&&o!==this._containerDom)return!1;if(t.isEditing())for(var s=o;s;){if((s.className||"").indexOf("rg-")>=0)return!0;s=s.parentElement}}catch{v.log("check outer elements fail => ".concat(o))}return!1},i.prototype._doPrepareContainer=function(e,t,o){e.className="rg-root rg-grid",v.isMobile()&&(e.style.touchAction="unset"),this._gridView=this._createGridView(t,o),this.addElement(this._gridView),this._heightMeasurer=new Bb(this.measurer),this._sizeInfo=new Z(0,0,e.clientWidth,e.clientHeight)},i.prototype._createDefaultTool=function(){return new Lb(this)},i.prototype._doLayout=function(e){var t=this._gridView,o=e.clone();t.setRect(o),o.x=o.y=0,t.$_layout(o)},i.prototype._layoutChildren=function(e){this._sizeInfo.width=e.width,this._sizeInfo.height=e.height},i.prototype._doBeforeRender=function(){var e=this.gridView,t=e._dom;if(t&&t.scrollLeft>0){var o=t.scrollLeft;e.leftPos=o,t.scrollLeft=0}e.visible&&e.$_beforeRender()},i.prototype._doAfterRender=function(){if(!this.gridView.fitSyncHeight()){var e=this._containerDom.parentElement;this._orgCssHeight=e.style.height}this._gridView.visible&&this._gridView.$_afterRender()},i.prototype._doPrepareRender=function(e){var t=e.clone();this._gridView.visible&&(this._gridView.setRect(t),t.x=t.y=0,this._gridView.$_prepareRender(t))},i.prototype._createGridView=function(e,t){return new Er(this,e,t)},i.prototype._resizeHandler=function(e){if(this._watchTimer==null){var t=this;this._resizeTimer=setTimeout(function(){t._displayObserver()},100)}},i.prototype.$_displayObserver=function(){var e=this._containerDom,t=e.clientWidth,o=e.clientHeight,r=this._sizeInfo;t>0&&o>0&&(Math.abs(this._sizeInfo.width-t)>=1||Math.abs(this._sizeInfo.height-o)>=1)&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=e.parentElement.style.height),r.width=t,r.height=o,this.invalidateLayout(),this._doResized(null))},i}(xr),Bb=function(a){function i(e){var t=a.call(this)||this;return t._bodyStyle="rg-body",t._headerStyle="rg-header",t._summaryStyle="rg-header-summary",t._footerStyle="rg-footer",t._dataRowStyle="rg-data-row",t._headerRowStyle="",t._summaryRowStyle="",t._footerRowStyle="",t._groupFooterStyle="rg-rowgroup-footer",t._dataCellStyle="rg-data-cell",t._headerCellStyle="rg-header-cell",t._summaryCellStyle="rg-header-summary-cell",t._footerCellStyle="rg-footer-cell",t._groupFooterCellStyle="rg-rowgroup-footer-cell",t._rowHeight=0,t._headerHeight=0,t._summaryHeight=0,t._footerHeight=0,t._gfooterHeight=0,t._dirty=!0,t._container=e,t.$_prepareElements(e),t}return w(i,a),i.prototype._doDispose=function(){this._container=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)},enumerable:!1,configurable:!0}),i.prototype.measure=function(e){this._dirty&&(this._dirty=!1)},i.prototype.invalidate=function(){this._dirty=!0},i.prototype.$_prepareElements=function(e){var t=xe(e),o=t.createElement("table");o.setAttribute("aria-hidden","true");var r=o.createCaption();r.textContent="grid measurer table",r.style.width=r.style.height="0px",r.style.padding="none",r.style.boxSizing="border-box",r.style.overflow="hidden",o.createTHead().appendChild(document.createElement("tr")).appendChild(document.createElement("th")).scope="col",e.appendChild(o);var n=o.style;n.width="1000px",n.height="1px",n.left="-10000px",n.position="absolute",o.className="rg-table";var s=t.createElement("tbody");o.appendChild(s);var l=t.createElement("tr");s.appendChild(l);var u=t.createElement("td");u.className="rg-data-cell",l.appendChild(u);var h=t.createElement("div");u.appendChild(h),h[v.TextProp]="AYwyhi"},i.prototype.$_measure=function(e,t,o){var r=this._container,n=this._container.firstElementChild.tBodies[0].rows[0],s=n.cells[0];return r.className=e,n.className=t,s.className=o,n.offsetHeight},i}(me),$b=function(a){function i(e){var t=a.call(this,e)||this;return t._levelIndent=16,t._lineVisible=!0,t._showCheckBox=!1,t._iconImagesRoot="",t._defaultIcon=-1,t._collapseWhenLeftKey=!0,t._collapseWhenCtrlKey=!0,t._expandWhenRightKey=!0,t._expandWhenCtrlKey=!0,t._iconVisible=!0,t._expanderIconStyle=c.TreeExpanderIconStyle.TRIANGLE,t._expandedIcon=-1,t._collapsedIcon=-1,t._recursiveSoftDeleting=!1,t}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(e){e!=this._lineVisible&&(this._lineVisible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(e){e!=this._showCheckBox&&(this._showCheckBox=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(e){e!==this._iconImagesRoot&&(this._iconImagesRoot=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImages",{get:function(){return this._iconImages},set:function(e){e!==this._iconImages&&(this._iconImages=e?e.slice():[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(e){e!=this._defaultIcon&&(this._defaultIcon=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedIcon",{get:function(){return this._expandedIcon},set:function(e){e!=this._expandedIcon&&(this._expandedIcon=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(e){e!=this._collapsedIcon&&(this._collapsedIcon=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(e){e!=this._iconCallback&&(this._iconCallback=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(e){this._collapseWhenLeftKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(e){this._collapseWhenCtrlKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(e){this._expandWhenRightKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(e){this._expandWhenCtrlKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconVisible",{get:function(){return this._iconVisible},set:function(e){e!=this._iconVisible&&(this._iconVisible=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(e){e!=this._expanderIconStyle&&(this._expanderIconStyle=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recursiveDeleting",{get:function(){return this._recursiveSoftDeleting},set:function(e){this._recursiveSoftDeleting=e},enumerable:!1,configurable:!0}),i}(hi);(function(a){function i(e,t){var o=a.call(this,e,t,"treeExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}w(i,a),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(e){e!=this._expanded&&(this._expanded=e,this._changed())},enumerable:!1,configurable:!0}),i.prototype._createDom=function(){return null}})(ud);var ln=function(a){function i(e){var t=a.call(this)||this;return t._exclusive=!1,t.assignFrom(e),t}return w(i,a),i.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(e){var t=xe(e),o=this._expander=t.createElement("span");e.appendChild(o);var r=this._check=t.createElement("input");r.type="checkbox",r.className="rg-tree-checkbox",r.style.display="inline-block",e.appendChild(r);var n=this._icon=t.createElement("img");n.className="rg-tree-icon",n.alt="",e.appendChild(n);var s=this._span=t.createElement("span");e.appendChild(s);var l=this._label=t.createElement("label");l.style.display="none",e.appendChild(l)},i.prototype._doRenderCell=function(e,t,o,r,n){var s=e.treeOptions,l=s.showCheckBox,u=s.levelIndent,h=this._expander,d=this._dom,p=this._check,f=this._icon,g=this._span,m=this._label,b=t.item,C=o.cell,x=s.expanderIconStyle===c.TreeExpanderIconStyle.SQUARE?" square":"";if(h.className=b.isLeaf?"rg-tree-leaf":b.expanded?"rg-tree-expanded"+x:"rg-tree-collapsed"+x,e.accessibility&&(b.isLeaf?C.removeAttribute("aria-expanded"):C.setAttribute("aria-expanded",b.expanded?"true":"false")),this._exclusive!=e.checkBar.exclusive&&(this._exclusive=e.checkBar.exclusive,p.setAttribute("type",this._exclusive?"radio":"checkbox"),p.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),l){p.parentElement||d.insertBefore(p,this._span),p.checked=b.checked;var E=p.id=i.FOR_ID+t.item.index;m.setAttribute("for",E),m[v.TextProp]=this._makeText(e,t,o)+(p.checked?" checked":" unchecked")}else p.parentElement&&d.removeChild(p);if(s.iconVisible){f.parentElement||d.insertBefore(f,this._span);var S=e.getTreeIcon(b);S?(f.src=S,f.removeAttribute("height"),f.style.removeProperty("visibility")):(f.removeAttribute("src"),f.height=1,f.style.visibility="hidden")}else f.parentElement&&d.removeChild(f);g[v.TextProp]=this._makeText(e,t,o),d.style.setProperty("padding-left",3+(b.level-1)*u+"px","important")},i.TYPE="tree",i.FOR_ID="$$-tree-check",i.STYLE="rg-tree-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Si),zn=function(a){function i(e){return a.call(this,e,"treeItemView")||this}return w(i,a),i.prototype.isCheckBox=function(e){var t=e.className;return t=="rg-tree-checkbox"||t=="rg-tree-radio"},i.prototype._doLayoutContent=function(e){a.prototype._doLayoutContent.call(this,e)},i.prototype._createRenderer=function(e,t,o,r,n){var s=e.layoutManager,l=t.dataColumn.layout;return s.getHorzColumnIndex(l)===0?new ln(r):a.prototype._createRenderer.call(this,e,t,o,r,n)},i.prototype.$_getDefaultRenderer=function(e,t){var o=e.layoutManager,r=t.dataColumn.layout;return o.getHorzColumnIndex(r)===0?ln.TYPE:Wr.TYPE},i}(bi),Vb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return 0},i.prototype._getEndCell=function(e){return e.fixedCellCount-1},i}(zn),jb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype._getFirstCell=function(e){return this._getStartCell(e)},i.prototype._getLastCell=function(e){return this._getEndCell(e)},i.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},i.prototype._getEndCell=function(e){return e.cellCount-1},i}(zn),Hb=function(a){function i(e,t){return a.call(this,e,t)||this}return w(i,a),i.prototype.isTreeCell=function(e){var t=this.bodyCellAt(e);return t&&t.renderer2 instanceof ln},i.prototype.createRowElement=function(){return new zn(this.doc)},i}(Oi),Gb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.isTreeCell=function(e){var t=this.bodyCellAt(e);return t&&t.renderer2 instanceof ln},i.prototype.createRowElement=function(){return new Vb(this.doc)},i}(vc),Wb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.isTreeCell=function(e){var t=this.bodyCellAt(e);return t&&t.renderer2 instanceof ln},i.prototype.createRowElement=function(){return new jb(this.doc)},i}(wc),Ub=function(a){function i(e){var t=a.call(this,e.doc)||this;return t._levelWidth=16,t._handleWidth=9,t._handleHeight=9,t._stroke="gray",t._linePool=[],t._lines=[],t._startIndex=-1,t._endIndex=-1,t._treeView=e,t}return w(i,a),i.prototype._doDispose=function(){this._linePool=null,this._lines=null,a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(e){e!=this._levelWidth&&(this._levelWidth=e,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(e){e!=this._handleWidth&&(this._handleWidth=e,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(e){e!=this._handleHeight&&(this._handleHeight=e,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){e!=this._stroke&&(this._stroke=e,this.invalidate())},enumerable:!1,configurable:!0}),i.prototype.setRange=function(e,t,o){t==this._startIndex&&o==this._endIndex||(this._startIndex=t,this._endIndex=o,this.invalidate())},i.prototype.layout=function(e){var t=this._treeView;if(this.$_hideAll(),!(!t||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var o,r=null;for(o=this._startIndex;o<=this._endIndex&&!(r=t.getItem(o));o++);if(r){var n=r.level;if(n>1||r.childIndex>0){for(var s=0;s<n;s++){var l=r.getAncestor(s);(u=l.last)&&u.index>=o&&(u=this.$_findLevelItem(s+1,o),this.$_drawVertLine(e,this.$_borrowLine(),null,u,l.level))}r.childIndex>0&&this.$_drawVertLine(e,this.$_borrowLine(),null,r,r.parent.level)}for(;o<=this._endIndex;o++){var u,h=(r=t.getItem(o)).parent;(s=r.childIndex)<h.count-1&&((u=h.getItem(s+1)).index>this._endIndex&&(u=null),this.$_drawVertLine(e,this.$_borrowLine(),r,u,h.level)),(h=r)&&h.expanded&&h.count>0&&((u=h.getItem(0)).index>this._endIndex&&(u=null),this.$_drawChildLine(e,this.$_borrowLine(),r,u)),this.$_drawHorzLine(e,this.$_borrowLine(),r)}}}},i.prototype._getCssSelector=function(){return"rg-tree-lines"},i.prototype._initDom=function(e){a.prototype._initDom.call(this,e);var t=e.style;t.setProperty("pointer-events","none","important"),t.setProperty("overflow","hidden")},i.prototype._doDraw=function(e){},i.prototype.$_borrowLine=function(){var e=this._linePool.pop();return e||((e=this._treeView.doc.createElement("div")).className="rg-tree-line",e.style.position="absolute",this._dom.appendChild(e)),e.style.display="inline-block",this._lines.push(e),e},i.prototype.$_hideAll=function(){for(var e=this._lines.length-1;e>=0;e--)this._lines[e].style.display!="none"&&(this._lines[e].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},i.prototype.$_findLevelItem=function(e,t){for(var o=t;o<=this._endIndex;o++){var r=this._treeView.getItem(o);if(r&&r.level==e)return r}return null},i.prototype.$_setBounds=function(e,t,o,r,n){var s=e.style;s.left=3+t+"px",s.top=o+"px",s.width=r==1?"1px":r+"px",s.height=n==1?"1px":n+"px"},i.prototype.$_drawVertLine=function(e,t,o,r,n){var s=e.topIndex,l=n*this._levelWidth+this._levelWidth/2,u=0,h=this.height,d=this._handleHeight;if(o){var p=e.getItemBounds(o.index-s),f=o instanceof ht&&o.hasChildren?d+2:0;u=p.y+p.height/2+f/2+1}r&&(p=e.getItemBounds(r.index-s),f=r instanceof ht&&r.hasChildren?d:0,h=p.y+p.height/2-f/2),this.$_setBounds(t,l,u,1,h-u)},i.prototype.$_drawHorzLine=function(e,t,o){var r,n=e.topIndex,s=o.parent.level*this._levelWidth+this._levelWidth/2,l=o.level*this._levelWidth+1;o.hasChildren&&(s+=this._handleWidth/2+1);var u=e.getItemBounds(o.index-n);r=u.y+u.height/2,this.$_setBounds(t,s,r,l-s,1)},i.prototype.$_drawChildLine=function(e,t,o,r){var n,s=e.topIndex,l=o.level*this._levelWidth+this._levelWidth/2,u=this.height,h=e.getItemBounds(o.index-s);if(n=h.y+h.height/2+5,r){h=e.getItemBounds(r.index-s);var d=r.hasChildren?this._handleHeight:0;u=h.y+h.height/2-d/2}this.$_setBounds(t,l,n,1,u-n)},i}(Ft),zb=function(a){function i(e){return a.call(this,e,"treeViewSelectionTool")||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},i.prototype._doKeyDown=function(e){var t,o=this.focused.clone(),r=this.grid.treeOptions,n=e.which,s=e.ctrlKey||e.metaKey;if(o&&(t=o.item))switch(n){case 39:if(!s&&this.grid.visibleLayoutCount==1&&o.isRight&&r.expandWhenRightKey||s&&r.expandWhenCtrlKey){if(!t.expanded)return t.setExpanded(!0,!1,!1),!0;if(t.count>0)return o.down(),this.setFocused(o,!0,!0),!0}break;case 37:if(!s&&o.isLeft&&r.collapseWhenLeftKey||s&&r.collapseWhenCtrlKey){if(t.expanded)return t.setExpanded(!1,!1,!1),!0;if(!(t.parent instanceof ws))return o.itemIndex=t.parent.index,this.setFocused(o,!0,!0),!0}}return a.prototype._doKeyDown.call(this,e)},i.prototype._doPointerDown=function(e){var t=e.mouseX,o=e.mouseY,r=e.altKey,n=this.grid,s=this.findElementAt(t,o,!1),l=this.mouseEventTarget;if(s instanceof zn&&bi.isExpander(l)&&!r){var u=s._item;u instanceof ht&&(u.expanded?n.collapse(u,!1):n.expand(u,!1,!1))}a.prototype._doPointerDown.call(this,e)},i.prototype._doClick=function(e,t,o){t=t||e.mouseX,o=o||e.mouseY;var r=e.shiftKey,n=this.grid;this.focused;var s=this.findElementAt(t,o,!1),l=this.mouseEventTarget;if(s instanceof zn&&s.isCheckBox(l))if(n.editOptions.checkable){var u=n.getItem(s.itemIndex);this._doCheck(l,u,r)}else e.preventDefault();a.prototype._doClick.call(this,e,t,o)},i.prototype._canMoveRowAt=function(e,t,o){var r=e.boundsByContainer(e.getCellRectAt(this.grid.layoutManager,t,!1)),n=3+(t.item.level-1)*this.grid.treeOptions.levelIndent;if(o<r.x+(e.isTreeCell(t)?n:20)){var s=this.grid.getSelectedItems();if(s.length>1){for(var l=s[0].level,u=1;u<s.length;u++)if(s[u].level<l)return!1}return!0}},i}(Bl),Yb=function(a){function i(e,t,o,r){return a.call(this,e,t,o,r)||this}return w(i,a),i.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"treeView",{get:function(){return this.gridView},enumerable:!1,configurable:!0}),i.prototype._createGridView=function(e,t){return new Xl(this,e,t)},i.prototype._createDefaultTool=function(){return new zb(this)},i}(gd),qb=function(a){function i(){return a.call(this,"treeItemExpanderCell")||this}return w(i,a),Object.defineProperty(i.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(li),Kb=function(a){function i(){return a.call(this,"treeItemFooterCell")||this}return w(i,a),Object.defineProperty(i.prototype,"getText",{get:function(){var e=String(this.value());if(!e){var t=this.index;t.dataColumn&&(e=t.column.footer.text)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(li),Xl=function(a){function i(e,t,o){var r=a.call(this,e,t,o)||this;return r._expanderCell=new qb,r._footerCell=new Kb,r._focusedRow=-1,r.itemSource=r._rs=r._createItemSource(),r}return w(i,a),i.prototype._doDispose=function(){this.itemSource=this._rs=this.itemSource&&this.itemSource.dispose(),a.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linesView",{get:function(){return this._linesView},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!0},i.prototype.recursiveDeleting=function(){return this.treeOptions.recursiveDeleting},i.prototype._beforeChangeLayout=function(){},i.prototype.getLevels=function(e){return this._rs.getLevels(e)},i.prototype.getExpanderCell=function(e){return this._expanderCell.setIndex(le.temp(this,e)),this._expanderCell},i.prototype.getFooterCell=function(e){return this._footerCell.setIndex(e),this._footerCell},i.prototype.expand=function(e,t,o,r){this.isItemEditing(null)||this._rs.expand(e,t,o,r)},i.prototype.collapse=function(e,t){this.isItemEditing(null)||this._rs.collapse(e,t)},i.prototype.expandAll=function(e){e===void 0&&(e=0),this.isItemEditing(null)||this._rs.expandAll(e)},i.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},i.prototype.getTreeIcon=function(e){var t=this.treeOptions,o=t.iconImages;if(o){var r=void 0;r=e.hasChildren&&e.expanded&&t.expandedIcon>-1?t.expandedIcon:e.hasChildren&&e.collapsed&&t.collapsedIcon>-1?t.collapsedIcon:e.iconIndex;var n=t.iconCallback;if(n){var s=n(this.handler,e.index,e.dataRow,r);if(typeof s=="string")return s;isNaN(s)||(r=s)}if((r<0||r>=o.length)&&(r=t.defaultIcon),r>=0&&r<o.length)return t.iconImagesRoot+o[r]}},i.prototype.getCheckedItems=function(){for(var e=[],t=0,o=this.itemCount;t<o;t++){var r=this.getItem(t);r.checked&&e.push(r)}return e},i.prototype.getCheckedItemIndices=function(){for(var e=[],t=0,o=this.itemCount;t<o;t++){var r=this.getItem(t);r.checked&&e.push(r.index)}return e},i.prototype.getCheckedRows=function(e){var t=null;if(e){t=[];for(var o=0,r=this.itemCount;o<r;o++){var n=this.getItem(o);n.checked&&t.push(n.row)}}else t=this._rs.getCheckedRows();return t},i.prototype.getCheckedRowIds=function(e){var t=null;if(e){t=[];for(var o=0,r=this.itemCount;o<r;o++){var n=this.getItem(o);n.checked&&t.push(n.dataRow)}}else t=this._rs.getCheckedRowIds();return t},i.prototype.checkChildren=function(e,t,o,r,n,s){if(n===void 0&&(n=!0),s===void 0&&(s=!1),e)for(var l=0,u=e.count;l<u;l++){var h=e.getItem(l);n?h.checkable&&h.setChecked(t,s):h.setChecked(t,s),!o||!h.expanded&&r||this.checkChildren(h,t,!0,r,n,s)}},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getItemOfModel=function(e){return e.itemIndex>=0?this.getItem(e.itemIndex):e.dataRow>=0?this.getItemOfRow(e.dataRow,!1):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(e){this._rs&&(this._rs.dataSource=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(e){this._rs&&(this._rs.maxItemCount=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._initStyles=function(){a.prototype._initStyles.call(this),this._treeOptions=new $b(this)},i.prototype._createItemSource=function(){return new Ig(!0)},i.prototype._doContentPanesCreated=function(){this._linesView=new Ub(this),this.addElement(this._linesView)},i.prototype._createSidePane=function(){return a.prototype._createSidePane.call(this)},i.prototype._createLayoutManager=function(){return new Xb(this)},i.prototype._createBodyView=function(e){return new Hb(this.doc,e)},i.prototype._createFixedBodyView=function(e){return new Gb(this.doc,e)},i.prototype._createRightBodyView=function(e){return new Wb(this.doc,e)},i.prototype._visualObjectChanged=function(e){a.prototype._visualObjectChanged.call(this,e)},i.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},i.prototype._doCanInsert=function(e,t,o){return e&&(e.count>0||!o||e.level==0||this.editOptions.appendable)},i.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype._doSortItems=function(e,t,o){this._rs.setLabelComparer(this._doPrepareComparer(e)),this._rs.orderBy(e,t,o)},i.prototype.setNullsOrder=function(e){this._rs.setNullsOrder(e)},i.prototype.setOuterSort=function(e){var t=this;e instanceof Function&&this._rs.setOuterSort(function(o,r){var n=o.map(function(s,l){return{fieldName:t.dataSource.getFieldName(s),orgFieldName:t.dataSource.getOrgFieldName(s),direction:r[l]||c.SortDirection.ASCENDING}});return e.call(t,t.handler,n)}),this._rs.setOuterSort(e)},i.prototype._doColumnFiltersChanged=function(e,t){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(e,t)},i.prototype.setOptions=function(e){if(e){var t=this._rs;e.hideDeleted!==void 0&&(t.hideDeleted=e.hideDeleted),e.hideDeletedRows!==void 0&&(t.hideDeleted=e.hideDeletedRows),e.summaryMode!==void 0&&(t.summaryMode=e.summaryMode),e.sortMode!==void 0&&(t.sortMode=e.sortMdoe),a.prototype.setOptions.call(this,e)}},i.prototype._doPrepareRender=function(e){var t=this._horzScrolled;a.prototype._doPrepareRender.call(this,e),t&&this.layoutManager.$_layoutLines()},i.prototype.$_doLayout=function(e,t){this._treeOptions,a.prototype.$_doLayout.call(this,e,t)},i.prototype.assignImageList=function(e){},i.prototype.refreshView=function(){a.prototype.refreshView.call(this)},i.prototype.getEditBounds=function(e,t){return a.prototype.getEditBounds.call(this,e,t)},i.prototype.updatePastedRow=function(e,t,o){if(e instanceof ht){var r=e.row;r&&r.update(t,o)}},i.prototype.appendPastedRow=function(e){var t=this.dataSource;if(t){var o=t.createRow(e,-1,!1);return t.rootRow.addChild(o,!1),o.rowId}},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(e){this._rs.undoable=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(e){this._rs.execute(e)},i.prototype.clearCommandStack=function(e){e===void 0&&(e=!0),this._rs.clearCommandStack(e)},i.prototype.getFirstRow=function(){return null},i.prototype.getLastRow=function(){return null},i.prototype.getPrevRow=function(e){return null},i.prototype.getNextRow=function(e){return null},i.prototype.canMoveRows=function(e,t,o){if(o&&this.canMoveRow(t,!1)&&e&&e.length>0){var r=e[0].parent;if(r!==o.parent)return!1;for(var n=1,s=e.length;n<s;n++)if(r!==e[n].parent)return!1;var l=!1;for(n=0;n<e.length;n++){var u=e[n];u&&u.isDataRow&&(l=!0)}return l}},i.prototype._getMoveTarget=function(e,t,o,r){if(e==="keydown"){var n=this.getItem(o),s=n.parent;if(n.childIndex+t.length>=s.children.length&&r>0||n.childIndex===0&&r<0)return;var l=this.getItem(o+r);if(n.level===l.level)return l;var u=n.childIndex+r;return!s||u<0||u>=s.children.length?void 0:s.children[u]}return this.getItem(o+r)},i.prototype._doMoveRows=function(e,t){var o=t&&t.dataId;if(o>=0){for(var r=[],n=0,s=e;n<s.length;n++){var l=s[n],u=l&&l.dataId;u>=0&&r.push(u)}if(r.length>0){var h=this.dataSource,d=h.rowsByIds(r,!1);if(d.length>0)return h.moveRows(d,h.rowById(o))}}return!1},i.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var t,o=this.itemSource,r=this.getIndex(this.topIndex,e.firstColumn),n="",s=0;t=n=e.firstColumn.header.displayText;var l,u=this.getBodyCellAt(r,!1),h=u&&u.renderer2&&u.renderer2._dom,d=u&&u.renderer2 instanceof ln,p={0:v.getTextLength(t)},f={0:t};if(h){var g=tt(h).getComputedStyle(h);if(g){n=g.paddingLeft;var m=parseInt(n.substr(0,n.indexOf("px")));s+=m>0?m:0,n=g.paddingRight,s+=(m=parseInt(n.substr(0,n.indexOf("px"))))>0?m:0,l={fontSize:g.fontSize,fontFamily:g.fontFamily,fontWeight:g.fontWeight,fontStyle:g.fontStyle}}}for(var b=0,C=o.itemCount;b<C;b++)r.itemIndex=b,p[R=d?r.item.level:0]=p[R]||0,n=this.getDisplayText(r),v.getTextLength(n)>p[R]&&(p[R]=v.getTextLength(n),f[R]=n);for(var x=0,E=0,S=0,P=Object.keys(p);S<P.length;S++){var R=P[S];x=d?parseInt(R)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,x+=this.container.measureText("rg-data-cell",f[R],l),E=Math.max(E,x)}s+=E;var k=e.firstColumn,D=k.editor,F=this.delegate.getCellEditor(wt.getEditorType(D));return F.hasButton(this.displayOptions.showNativeEditButton,D)&&(s+=this.body.editButtonWidth*F.buttonCount),k.button!==c.CellButton.NONE&&(s+=this.body.cellButtonWidth),s},i.prototype.$_getVisibleAncestor=function(e){var t=this._rs.getItemOfRow(e);if(t){for(;t&&!t.visible;)t=t.parent;return t}return null},i.prototype.onItemProviderReset=function(e){this._currentRowId=-1,a.prototype.onItemProviderReset.call(this,e)},i.prototype.onTreeItemProviderItemChanged=function(e,t){this.invalidateLayout(),this.fireEvent(i.CHANGED,t)},i.prototype.onTreeItemProviderExpanding=function(e,t){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!e.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!e.isEditing()&&this.fireConfirmEvent(i.EXPANDING,t)},i.prototype.onTreeItemProviderExpanded=function(e,t){this.fireEvent(i.EXPANDED,t)},i.prototype.onTreeItemProviderCollapsing=function(e,t){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!e.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!e.isEditing()&&this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype.onTreeItemProviderCollapsed=function(e,t){this.fireEvent(i.COLLAPSED,t)},i.EXPANDING="onTreeViewExpanding",i.EXPANDED="onTreeViewExpanded",i.COLLAPSING="onTreeViewCollapsing",i.COLLAPSED="onTreeViewCollapsed",i.CHANGED="onTreeViewChanged",i}(Fo),Xb=function(a){function i(e){return a.call(this,e)||this}return w(i,a),i.prototype.layout=function(e){a.prototype.layout.call(this,e),this.$_layoutLines()},i.prototype.$_layoutLines=function(){var e=this.grid,t=e.linesView;if(t.visible=e.treeOptions.lineVisible){var o=this.fixedLayoutCount>0,r=(o?this.fixedBodyBounds:this.bodyBounds).clone();o?(r.y+=this.fixedContentBounds.y,r.x+=this.fixedContentBounds.x):(r.y+=this.contentBounds.y,r.x+=this.contentBounds.x),this.layoutCount>0?r.width=Math.max(0,this.getLayoutWidth(0)):r.width=0,t.setRect(r),t.levelWidth=16,t.setRange(e,this.topIndex,Math.min(e.itemCount,this.topIndex+this.itemCount)-1),t.layout(this)}},i}(xl),Jb=function(a){function i(){var e=a.call(this)||this;return e._columns=null,e}return w(i,a),i.prototype._doDispose=function(){this._columns=null,a.prototype._doDispose.call(this)},i.prototype.setColumns=function(e){this._columns=[];for(var t=0;t<e.length;t++)e[t].layout instanceof We&&this._columns.push(e[t].layout.firstColumn.name)},i.prototype.setItemIndex=function(e,t){this._itemIndex=e,this._startCol=t},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){if(e===i.ID_ROW)return String(this._itemIndex+1);throw new Ee("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(e==i.ID_EXCELCOLUMN){if(t<0||t>=this._columns.length)throw new Ee("Data field index out of bounds:"+t);return this._columns[t]}throw new Ee("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,o){if(e!=i.ID_EXCELCOLUMN)throw new Ee("Invalid identifier indexer: "+e);if(this._columns){var r=this._columns.indexOf(t);if(r<0||r>=this._columns.length)throw new Ee("Column is not exists:"+t);return ci.toColCaption(r+this._startCol)}},i.ID_EXCELCOLUMN=0,i.ID_ROW=1,i.IDENTS={excelcolumn:i.ID_EXCELCOLUMN,row:i.ID_ROW},i}(xi),Zb=function(a){function i(){var e=a.call(this)||this;return e._gridIndex=0,e._numberFormatId=0,e._textFormatId=49,e._dateFormatId=14,e._rowLevels=0,e._indents=0,e._indentWidth=3,e._seriesCell=new vs,e._excelFormulaRuntime=new Jb,e}return w(i,a),i.prototype.dispose=function(){return a.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},i.prototype._progressCallback=function(e,t,o,r){var n=this._progressGrid,s=this._multiOptions;n&&n.setExportProgress(o,r+s.prepareProgress,s.progressMessage)},i.prototype.export=function(e,t){if(a.prototype.export.call(this,e,t),this._progressGrid=e,t){var o=this._multiOptions=t,r=this._multiOptions.exportGrids;if(r&&!(r.length<=0)){var n=xe(e.container._containerDiv).documentElement,s=new Cb(n);if(this._mergeHeads={},o.showProgress)this._allCount=this._prepareCount(o,r),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(s,o,this._gridIndex=0,(function h(){var d=++this._gridIndex;d<o.exportGrids.length?this._exportGridAsync(s,o,d,h.bind(this)):(!t.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}).bind(this));else{for(var l=0,u=r.length;l<u;l++)this._exportGrid(s,r[l].options);this.save()}}}},i.prototype.buildBook=function(e){var t=this._exportOptions.grid;t.isTree()?this.buildTreeSheet(t,e):this.buildSheet(t,e)},i.prototype.buildSheet=function(e,t){var o=this,r=this._exportOptions,n=this._workbook,s=n.createSheet(this._sheetName,r),l=e.displayOptions;if(this._defaultHeight=l.rowHeight||l.minRowHeight,this._rowGrouped=e.rowGrouped,this._mergedGrouped=e.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=e.rowGroupLevels),this._startItem=0,r.allItems&&this._rowGrouped){this.allItems=e.itemSource.getAllItems();var u=e.layoutManager.fixedItemCount;if(u>0)for(var h=0;h<u;h++)this.allItems.splice(h,0,e.getItem(h))}else if(r.pagingAllItems&&e.paged){var d=e.itemSource;d instanceof ld&&(this.allItems=d.getPagingAllItems()),r.onlyCheckedItems&&!e.rowGrouped&&(this.allItems=this.allItems.filter(function(m){return m.checked}))}else r.onlyCheckedItems&&!e.rowGrouped&&(this.allItems=e.getCheckedItems(!1));var p=this.allItems,f=p?p.length:e.itemCount;if(!this._rowGrouped){this._startItem=r.start>0?r.start:0;var g=r.count>0?r.count:f;f=g>0?this._startItem+g>f?f-this._startItem:g:f-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+f,this._currentRow=r.yOffset,s.setFirstCol(this._startCol=r.xOffset),this._prepareCommonStyles(e),this._buildColumns(e),s.createBorderEdges(qt.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(n),this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1,r.headerSummary),this.buildItems(e,function(){o.footer&&o.buildSummaryItem(e,!0,r.footer),o._buildDocumentTail(n),o._buildUserCells(e,n),t&&t()})},i.prototype.buildHeader=function(e){for(var t=this._workbook,o=t.currentSheet,r=this._preparer,n=r.colCount,s=r.headerRowCount,l=e.header.heights||[],u=l&&l.length>0?e.header.minRowHeight:Math.max(e.header.height,e.header.minRowHeight*s)/s,h=[],d=0;d<s;d++)h.push(Math.max(l[d]||u,u)*i.LINE_HEIGHT);var p=this._indents,f=this._currentRow;o.setFirstRow(this._currentRow);var g,m=this._startCol,b=this._headerCellStyle,C=[];for(d=0;d<s;d++)C.push(o.borrowRow(f+d,h[d]));if(this.indicator){if((g=C[0]).addText(m,this.indicatorHead,b),s>1){for(d=1;d<s;d++)C[d].addBlank(m,b);o.addMerge(f,m,s,1)}m++}if(this.checkBar){if((g=C[0]).addText(m,this.checkBarHead,b),s>1){for(d=1;d<s;d++)C[d].addBlank(m,b);o.addMerge(f,m,s,1)}m++}if(p>0){for(var x=0;x<p;x++){for(d=0;d<s;d++)C[d].addBlank(x+m,this._indentHeadStyle);o.addMerge(f,x+m,s,1)}m+=p}for(d=0;d<s;d++){var E=f+d;for(g=C[d],x=0;x<n;x++){var S=r.getHeader(d,x),P=S&&S.layout,R=x+m;if(P.isProxy||S.spanned)g.addBlank(R,b);else{var k=P.displayText,D=this._preparer.documentCssStyles,F=P instanceof We?P.firstColumn.header:P.header,H=F.exportStyleName||F.styleName;b=this._headerCellStyle,H&&(b=this._parseStyles(t,this._inheritStyles([this._headerCssStyle,qt.getSelectorStyle(D,"."+H)]),!0)),g.addText(R,k,b);var N=0,V=P.getHeaderSpan()-1,j=P.parent,K=j&&j.vertical;if(V>0){var U=0,Y=P.vindex+1;if(K)for(;U++<V&&U<s;)N+=j.getVisible(Y++)._hspan,r.getHeader(d+U,x).spanned=!0;else for(;U++<V&&x+U<n&&Y<j.visibleCount;)N+=j.getVisible(Y++)._cspan,r.getHeader(d,x+U).spanned=!0}K?o.addMerge(E,R,P.hspan+N,P.cspan):o.addMerge(E,R,P.hspan,P.cspan+N)}}}this._currentRow+=s,this._exportOptions.applyFixed&&o.setFixedInfo(this._currentRow,void 0),o.setLastRow(this._currentRow-1)},i.prototype.buildSummaryItem=function(e,t,o){function r(xt,Ct,Ai,Qi,di){var pi=n.getCell(Ai.layout),Ao=this._exportOptions,Ut=pi.value;if(Ut instanceof Date)Ao.datetimeCallback?(Ut=Ao.datetimeCallback(-1,Ai.name,Ut))instanceof Date?xt.addDate(Ct,Ut,di):xt.addText(Ct,Ut,di):xt.addDate(Ct,Ut,di);else if(isNaN(Ut)){var Gi=t?Ai.getFooter(n._childIndex):Ai.getHeaderSummary(n._childIndex),eo=Gi&&n.getCellFormatters(Gi,null),un=eo?pi.getDisplayText(eo):Ut;xt.addText(Ct,un||"",di)}else xt.addNumber(Ct,Ut,di)}var n,s=this._workbook.currentSheet,l=this._preparer,u=l.colCount,h=l.dataRowCount,d=this._indents,p=t?e.footers:e.headerSummaries,f=o===Ri?p.count:p.visibleCount,g=f*h,m=this._currentRow;s.setFirstRow(this._currentRow);for(var b,C=this._startCol,x=e.layoutManager.getDataRowHeights(h),E=x.reduce(function(xt,Ct){return xt+Ct},0),S=[],P=0;P<f;P++){var R=(n=o===Ri?p.get(P):p.getVisible(P)).heights||[],k=R.reduce(function(xt,Ct){return xt+Ct},0),D=n.height;D=D===-1?-1:D>0?D/h:Math.max(n.minHeight,e.heightMeasurer.summaryHeight,D);for(var F=0;F<h;F++)k>0&&R[F]>0?S.push(R[F]*i.LINE_HEIGHT):E>0&&x[F]>0?S.push(x[F]*n.height/E*i.LINE_HEIGHT):S.push(D===-1?-1:D*i.LINE_HEIGHT)}for(P=0;P<f*h;P++)s.borrowRow(m+P,S[P]);if(this.indicator){P=0;for(var H=0;P<f;P++)for(var N=0;N<h;N++)b=s.borrowRow(m+H,S[H]),t?H===0?b.addText(C,this.indicatorFoot,this._indicatorFootStyle):b.addBlank(C,this._indicatorFootStyle):H===0?b.addText(C,this.indicatorSummary,this._indicatorSumStyle):b.addBlank(C,this._indicatorSumStyle),H++;s.addMerge(m,C++,g,1)}if(this.checkBar){for(P=0,H=0;P<f;P++)for(N=0;N<h;N++)b=s.borrowRow(m+H,S[H]),t?H===0?b.addText(C,this.checkBarSummary,this._checkBarSumStyle):b.addBlank(C,this._checkBarSumStyle):H===0?b.addText(C,this.checkBarFoot,this._checkBarFootStyle):b.addBlank(C,this._checkBarFootStyle),H++;s.addMerge(m,C++,g,1)}if(d>0){for(var V=0;V<d;V++){for(P=0,H=0;P<f;P++)for(N=0;N<h;N++)(b=s.borrowRow(m+H,S[H])).addBlank(C+V,this._indentFootStyle),H++;s.addMerge(m,C+V,f*h,1)}C+=d}for(var j=m,K=(t?l.getFooterItem:l.getSummaryItem).bind(l),U=(F=0,0);F<f;F++)for(n=o===Ri?p.get(F):p.getVisible(F),P=0;P<h;P++,U++){for(b=s.borrowRow(j,S[U]),V=0;V<u;V++){var Y=K(F*h+P,V),J=Y.layout,ae=J.firstColumn,de=V+C,Ce=J.firstColumn.$_hash,pe=(t?this._columnFooterStyles:this._columnSummaryStyles)[Ce][F];if(J.isProxy||Y.spanned)b.addBlank(de,pe);else{var fe=0,se=t?J.getFooterSpan(F)-1:J.getSummarySpan(F)-1,Ge=t?J.getFooterUserSpan(n._childIndex):J.getSummaryUserSpan(n._childIndex),Ye=J.parent,Be=Ye&&Ye.vertical;if(Ge){var De=Ge.footerCount||0,Ve=De>0?De*h:Ge.rowspan||1,_e=Ge.colspan||1;r.call(this,b,de,ae,F,pe);for(var Xe=0,Me=0,re=0;re<Ve;re++){var Ue=(t?l._footerCells:l._summaryCells)[F*h+P+re];Ue&&Xe++;for(var st=0;Ue&&st<_e;st++){var qe=Ue[V+st];qe&&(Me=Math.max(Me,st+1),qe.spanned=!0)}}(Ve>1||_e>1)&&s.addMerge(j,de,Xe,Me)}else{if(se>0){var Qe=0,Ke=J.vindex+1;if(Be)for(;Qe++<se&&Qe<h;)fe+=Ye.getVisible(Ke++)._dspan,K(F*h+P+Qe,V).spanned=!0;else for(;Qe++<se&&V+Qe<u&&Ke<Ye.visibleCount;)fe+=Ye.getVisible(Ke++)._cspan,K(F*h+P,V+Qe).spanned=!0}r.call(this,b,de,ae,F,pe),Be?s.addMerge(j,de,J._dspan+fe,J._cspan):s.addMerge(j,de,J._dspan,J._cspan+fe)}}}j++}this._rowGrouped&&this._exportOptions.showLevelOutline&&s.setRowLevel(j,1),this._currentRow+=g,s.setLastRow(this._currentRow-1)},i.prototype.buildItems=function(e,t){for(var o=this._exportOptions,r=o.showIndicatorRow(e),n=o.showIndicatorReverse(e),s=this.allItems,l=s?s.length:e.itemCount,u=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,h=this._indexItem;h<u;h++){var d=s?s[h]:e.getItem(h);if(this._indicatorNo=r?d.isDataRow?d.dataRow+1:void 0:n?l-h:h+1,d instanceof Tt)this.buildRow(e,d);else if(d instanceof yi)this.buildMergedGroupHeader(e,d);else if(d instanceof ti||d instanceof Kt)this._preparer.groupModel!=d.parent&&this._preparer.setGroupFooterItms(d.parent,o.allItems,e.rowGroup.mergeMode),d instanceof ti?this.buildMergedGroupFooter(e,d):this.buildGroupFooter(e,d);else{if(!(d instanceof Ht))throw new Error("Unkown item type");this.buildGroupHeader(e,d)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(e.handler,"process",this._progressMax,this._progressPos),this._indexItem=u,this._indexItem>=this._lastItem?t&&t():setTimeout((function(){this.buildItems(e,t)}).bind(this),0)},i.prototype.buildRow=function(e,t){var o,r,n=e.rowGroup,s=this._preparer,l=s.dataRowCount,u=s.colCount,h=e.layoutManager,d=this._columnMerged,p=this._mergeHeads,f=this._indents,g=this._workbook.currentSheet,m=this._currentRow;g.setFirstRow(this._currentRow);var b,C=this._startCol,x=e.displayOptions,E=x.rowHeightCallback;t.index>=0&&E&&(h.getRowHeightOfCallback(e,t.index),b=t.heights);var S=(b=b||h.getDataRowHeights(l)).reduce(function(Qi,di){return Qi+di},0)||t.height;isNaN(S)&&(S=x.rowHeight===-1?-1:Math.max(x.rowHeight||0,x.minRowHeight*l)),S=S===-1?-1:S>0?S/l:S;for(var P=n.expandedAdornments===c.RowGroupAdornments.SUMMARY&&n.mergeMode,R=[],k=0;k<l;k++)R.push(g.borrowRow(m+k,S===-1?-1:(b[k]||S)*i.LINE_HEIGHT));for(this.indicator&&this._buildIndicatorCell(e,g,R,this._indicatorNo,m,C++,l),this.checkBar&&this._buildCheckBarCell(e,g,R,t.checked,m,C++,l),k=0;k<l;k++){var D=R[k];D._row=k;var F=m+k,H=C;for(o=0;o<f;o++)D.addBlank(H,this._indentBarStyle),H++;for(o=0;o<u;o++){var N=o+H,V=s.getItem(k,o),j=V.layout,K=j.firstColumn,U=K.$_hash,Y=this._columnStyles[U],J=mi.tempItem(e,t,j);if(j.isProxy||V.spanned)D.addBlank(N,V.style||Y);else{var ae=j._dspan,de=!1,Ce=!1;if(d){var pe=h.getMergeRoom(J);if(pe)if(pe.isHead(J)&&k==0||this._startItem>0&&t.index==this._startItem&&!P)Y=this._buildValueCell(e,g,D,t,j,N,H),p[U]={startRow:F,style:Y},de=!0,Ce=!K.mergeGrouped&&t.isDataRow;else{var fe=p[U];D.addBlank(N,fe.style||Y),(pe.isTail(J)||this._lastItem>0&&t.index==this._lastItem-1)&&(ae=F-fe.startRow+l,g.addMerge(fe.startRow,N,ae,1+(fe.cols||0)),delete p[U]),de=!0,Ce=!K.mergeGrouped&&t.isDataRow}else if(this.allItems&&!t.visible&&e.isGroupedColumn(K)&&this._mergedGrouped){for(D.addBlank(N,Y),de=!0,r=t.parent;K.groupLevel!=r.level&&r;)r=r.parent;var se=p[U]?p[U].startRow:void 0;switch(e.rowGroup.expandedAdornments){case c.RowGroupAdornments.NONE:t==r.firstItem&&t==r.lastDataItem?de=!1:t==r.firstItem?(Y=this._buildValueCell(e,g,D,t,j,N,H),p[U]={startRow:F,style:Y}):t==r.lastDataItem&&(ae=F-se+l,g.addMerge(se,N,ae,1));break;case c.RowGroupAdornments.BOTH:t==r.lastDataItem&&r.footerCount==0&&(ae=F-se+l,g.addMerge(se,N,ae,1));break;case c.RowGroupAdornments.HEADER:case c.RowGroupAdornments.SUMMARY:t==r.firstItem&&t==r.lastDataItem?p[U]?(ae=F-se+l,g.addMerge(se,N,ae,1),delete p[U]):de=!1:t==r.lastDataItem?(ae=F-se+l,g.addMerge(se,N,ae,1),delete p[U]):r.firstDataItem;break;case c.RowGroupAdornments.FOOTER:t==r.firstItem&&(Y=this._buildValueCell(e,g,D,t,j,N,H),p[U]={startRow:F,style:Y}),t==r.lastDataItem&&(r.footerCount>0||(ae=F-p[U].startRow+l,g.addMerge(p[U].startRow,N,ae,1),delete p[U]))}}}if(!de||Ce){var Ge=!Ce&&this._buildValueCell(e,g,D,t,j,N,H),Ye=j.parent,Be=Ye&&Ye.vertical,De=!0,Ve=j.spanCallback,_e=Ve?Ve(e.handler,j,t.index):void 0;_e===void 0&&(_e=j.dataSpan),_e===void 0&&(De=!1,_e=j.cellSpan);var Xe=0;if(_e>0){var Me=0,re=j.vindex+1;if(Be)for(_e--;Me++<_e&&Me<l;)Xe+=(Ct=Ye.getVisible(re++))._dspan,s.getItem(k+Me,o).spanned=!0,s.getItem(k+Me,o).style=Ge;else{for(var Ue=j._dspan,st=[],qe=0;qe<Ue;qe++)st.push(0);for(var Qe=0;Qe<Ue;Qe++){st[Qe]+=j._defColSpan;for(var Ke=1;Ke<_e&&o+Ke<u;Ke++){var xt=s.getItem(k+Qe,o+Ke).layout;xt&&!xt.isProxy&&(st[Qe]+=xt._defColSpan)}}for(De=Math.max.apply(Math,st)===_e;Me++<_e-1&&o+Me<u&&(De||re<Ye.visibleCount);){var Ct;if(!(Ct=De?s.getItem(k,o+Me).layout:Ye.getVisible(re++)))break;!Ct.isProxy&&(Xe+=Ct._defColSpan)}for(j._defColSpan+Xe!==_e&&(Xe=0),Me=1;Me<j._defColSpan+Xe;Me++){if(Ue>1&&De)for(Ke=1;Ke<l&&Ue>Ke;Ke++)s.getItem(k+Ke,o+Me).spanned=!0,s.getItem(k+Ke,o+Me).style=Ge;s.getItem(k,o+Me).spanned=!0,s.getItem(k,o+Me).style=Ge}}}if(Ce){var Ai=p[U];Ai&&(Ai.cols=Xe)}else Be?g.addMerge(F,N,j._dspan+Xe,j._defColSpan):g.addMerge(F,N,j._dspan,j._defColSpan+Xe)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&g.setRowLevel(F,t.level)}this._currentRow+=l,g.setLastRow(this._currentRow-1)},i.prototype.buildGroupHeader=function(e,t){var o=this._workbook,r=o.currentSheet,n=this._preparer,s=t.level-1,l=this._indentBarStyle,u=n.colCount,h=this._currentRow;r.setFirstRow(this._currentRow);var d=this._startCol,p=e.layoutManager.getDataRowHeights(n.dataRowCount).reduce(function(k,D){return k+D},0);p=p||Math.max(e.displayOptions.rowHeight,e.displayOptions.minRowHeight,e.displayOptions.minTableRowHeight*n.dataRowCount);var f=this._exportOptions,g=r.borrowRow(h,p*i.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(e,r,g,this._indicatorNo,h,d++,1),this.checkBar&&this._buildCheckBarCell(e,r,g,t.checked,h,d++,1),f.indenting)for(var m=0;m<s;m++)g.addBlank(d,l),d++;var b=e.rowGroup.getHeaderText(t),C=this._groupHeaderStyle,x=this._preparer.documentCssStyles,E=this._dynamicStyles,S="groupheader-style=.rg-rowgroup-header-level-"+t.level;if(E[S])C=E[S];else{var P=qt.getSelectorStyle(x,".rg-rowgroup-header-level-"+t.level);P&&(C=this._extendStyles(o,C,P)),this._dynamicStyles[S]=C}g.addText(d,b,C),this._indents>0&&(u+=this._indents-(t.level-1));for(var R=1;R<u;R++)g.addBlank(R+d,C);r.addMerge(h,d,1,u),this._rowGrouped&&f.showLevelOutline&&r.setRowLevel(h,t.level),this._currentRow++,r.setLastRow(this._currentRow-1)},i.prototype.buildGroupFooter=function(e,t){function o(_e,Xe,Me,re){var Ue=Lo.getValue(t,Me),st=this._exportOptions;if(Ue instanceof Date)st.datetimeCallback?(Ue=st.datetimeCallback(t.index,Me.name,Ue))instanceof Date?_e.addDate(Xe,Ue,re):_e.addText(Xe,Ue,re):_e.addDate(Xe,Ue,re);else if(isNaN(Ue))if(Ue)_e.addText(Xe,Ue,re);else{var qe=void 0;if(t){var Qe=mi.tempItem(e,t,Me);qe=e.getDisplayText(Qe)||""}else qe=Me.groupFooter.text||"";_e.addText(Xe,qe,re)}else _e.addNumber(Xe,Ue,re)}var r,n,s,l=this._workbook.currentSheet,u=this._exportOptions,h=this._preparer,d=h.dataRowCount,p=h.colCount,f=this._groupFooterCellStyle,g=this._indentBarStyle,m=this._indents,b=t.level,C=this._currentRow;l.setFirstRow(this._currentRow);for(var x=this._startCol,E=e.rowGroup.expandedAdornments==c.RowGroupAdornments.SUMMARY,S=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/d,e.displayOptions.minTableRowHeight),P=e.layoutManager.getDataRowHeights(d),R=[],k=0;k<d;k++)R.push(l.borrowRow(C+k,(P[k]||S)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,l,R,this._indicatorNo,C,x++,d),this.checkBar&&this._buildCheckBarCell(e,l,R,t.checked,C,x++,d);var D=h.getGroupFooterCells(),F=t.vindex*d;for(k=0;k<d;k++){var H=C+k,N=x,V=R[k];if(m>0)for(var j=0;j<m;j++)E?j<b-2?V.addBlank(N,g):V.addBlank(N,f):V.addBlank(N,g),k==0&&d>1&&l.addMerge(H,N,d,1),N++;for(j=0;j<p;j++){r=j+N;var K=D[F+k][j],U=K.layout;if(n=U.firstColumn,s=this._columnGroupFooterStyles[n.$_hash][t.footerIndex],u.applyDynamicStyles){var Y=mi.tempItem(e,t,U),J=e.rowGroup.getFooterCell(Y),ae=J.getSummary();s=this.$_summaryStyleSet(J,ae,s)}if(U.isProxy||K.spanned)V.addBlank(r,s);else{var de=U.parent,Ce=de&&de.vertical,pe=0,fe=0,se=U.getGroupFooterUserSpan(t.parent,t.footerIndex),Ge=se?0:U.getGroupFooterSpan(t.index,t.footerIndex)-1;if(se){var Ye=se.footerCount||0;pe=Ye>0?Ye*d:se.rowspan||1,fe=se.colspan||1,pe=Math.min((t.parent.footerCount-t.vindex)*d,pe),l.addMerge(H,r,pe,fe);for(var Be=0;Be<pe;Be++)for(var De=0;De<fe;De++)D[F+Be+k][j+De].spanned=!0}else if(Ge>0){var Ve=0;if(Y=U.vindex+1,Ce)for(;Ve++<Ge&&Ve<d;)pe+=de.getVisible(Y++)._dspan,D[F+Ve][j].spanned=!0;else for(;Ve++<Ge&&Y<Math.min(p,de.visibleCount);)fe+=de.getVisible(Y++)._cspan,D[F+k][j+Ve].spanned=!0}o.call(this,V,r,n,s),!se&&l.addMerge(H,r,U._dspan+pe,U._cspan+fe)}this._rowGrouped&&u.showLevelOutline&&l.setRowLevel(H,t.level)}}this._currentRow+=d,l.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupHeader=function(e,t){var o=this._workbook.currentSheet,r=this._preparer,n=t.level,s=Math.max(e.displayOptions.rowHeight,e.displayOptions.minRowHeight,e.displayOptions.minTableRowHeight*r.dataRowCount),l=r.colCount,u=this._currentRow;o.setFirstRow(this._currentRow);var h=this._startCol,d=o.borrowRow(u,s===-1?-1:s*i.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(e,o,d,this._indicatorNo,u,h++,1),this.checkBar&&this._buildCheckBarCell(e,o,d,t.checked,u,h++,1);for(var p=0;p<n-1;p++){var f=r.getItem(0,h+p);d.addBlank(h+p,this._columnStyles[f.layout.firstColumn.$_hash])}var g=n-1,m=r.getItem(0,g).layout,b=m.firstColumn,C=this._buildValueCell(e,o,d,t.firstItem,m,h+g);this._mergeHeads[b.$_hash]={startRow:u,style:C};var x=e.rowGroup.getHeaderText(t);for(p=h+n,C=this._groupHeaderStyle,n<r.colCount&&d.addText(p++,x,C);p<l+h;p++)d.addBlank(p,C);l-n>1&&o.addMerge(u,n+h,1,l-n),this._currentRow++,o.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupFooter=function(e,t){function o(Me,re,Ue,st){var qe=Lo.getValue(t,Ue),Qe=this._exportOptions;if(qe instanceof Date)Qe.datetimeCallback?(qe=Qe.datetimeCallback(t.index,Ue.name,qe))instanceof Date?Me.addDate(re,qe,st):Me.addText(re,qe,st):Me.addDate(re,qe,st);else if(isNaN(qe)){var Ke=mi.tempItem(e,t,Ue),xt=e.getDisplayText(Ke)||"";Me.addText(re,xt,st)}else Me.addNumber(re,qe,st)}var r,n,s,l,u=this._workbook.currentSheet,h=this._exportOptions,d=this._preparer,p=d.dataRowCount,f=d.colCount,g=d.getItemLevel(t),m=this._currentRow;u.setFirstRow(this._currentRow);for(var b=this._startCol,C=e.rowGroup.expandedAdornments==c.RowGroupAdornments.SUMMARY,x=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/p,e.displayOptions.minTableRowHeight),E=e.layoutManager.getDataRowHeights(p),S=[],P=e.layoutManager,R=0;R<p;R++){var k=u.borrowRow(m+R,(E[R]||x)*i.LINE_HEIGHT);k._row=R,S.push(k)}for(this.indicator&&this._buildIndicatorCell(e,u,S,this._indicatorNo,m,b++,p),this.checkBar&&this._buildCheckBarCell(e,u,S,t.checked,m,b++,p),r=0;r<g;r++){s=(Y=d.getItem(0,r).layout).firstColumn;var D=this._mergeHeads[s.$_hash];l=D?D.style:this._columnStyles[s.$_hash];for(var F=t.parent;F&&s.groupLevel!==F.level;)F=F.parent;if(this.allItems||t.parent.expanded){for(R=0;R<p;R++)C&&R===0&&F&&F.getFirstVisibleItem(!0)===t?(l=this._buildValueCell(e,u,S[R],t.parent.firstItem,Y,b+r),this._mergeHeads[s.$_hash]={startRow:m,style:l}):S[R].addBlank(b+r,l);if(this._columnMerged)if(C)s.groupLevel;else{var H=this._mergeHeads[s.$_hash].startRow;if(t.visible){var N=mi.tempItem(e,t,Y),V=P.getMergeRoom(N);V&&V.isTail(N)&&u.addMerge(H,r+b,m+p-H,Y._defColSpan)}else F&&F.last===t&&u.addMerge(H,r+b,m+p-H,Y._defColSpan)}}else for(R=0;R<p;R++)this._buildValueCell(e,u,S[R],t.parent.firstItem,Y,b+r)}var j=d.getGroupFooterCells(),K=t.vindex*p;for(R=0;R<p;R++){var U=m+R;for(r=g;r<f;r++){n=r+b;var Y,J=j[K+R][r];if(s=(Y=J.layout).firstColumn,Y.isProxy||J.spanned)l=this._columnStyles[s.$_hash],S[R].addBlank(n,l);else{var ae=Y.parent,de=ae&&ae.vertical,Ce=0,pe=0,fe=Y.getGroupFooterUserSpan(t.parent,t.footerIndex),se=fe?0:Y.getGroupFooterSpan(t.index,t.footerIndex)-1;if(fe){var Ge=fe.footerCount||0;Ce=Ge>0?Ge*p:fe.rowspan||1,pe=fe.colspan||1,Ce=Math.min((t.parent.footerCount-t.vindex)*p,Ce),u.addMerge(U,n,Ce,pe);for(var Ye=0;Ye<Ce;Ye++)for(var Be=0;Be<pe;Be++)j[K+Ye+R][Be+r].spanned=!0}else if(se>0){var De=0,Ve=Y.vindex+1;if(de)for(;De++<se&&De<p;)Ce+=ae.getVisible(Ve++)._dspan,j[K+De][r].spanned=!0;else for(;De++<se&&Ve<Math.min(f-1,ae.visibleCount);)pe+=ae.getVisible(Ve++)._cspan,j[K+R][r+De].spanned=!0}if(l=this._columnGroupFooterStyles[s.$_hash][t.footerIndex],h.applyDynamicStyles){Ve=mi.tempItem(e,t,Y);var _e=e.rowGroup.getFooterCell(Ve),Xe=_e.getSummary();l=this.$_summaryStyleSet(_e,Xe,l)}o.call(this,S[R],n,s,l),!fe&&u.addMerge(U,n,Y._dspan+Ce,Y._cspan+pe)}this._rowGrouped&&h.showLevelOutline&&u.setRowLevel(U,g)}}this._currentRow+=p,u.setLastRow(this._currentRow-1)},i.prototype.buildTreeSheet=function(e,t){var o=this,r=this._exportOptions,n=this._workbook;r.allItems&&(this.allItems=e.getAllItems());var s=this.allItems,l=s?s.length:e.itemCount,u=n.createSheet(this._sheetName,r),h=e.displayOptions;if(this._defaultHeight=h.rowHeight||h.minRowHeight,this._rowLevels=e.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=r.start>0?r.start:0;var d=r.count>0?r.count:l;l=d>0?this._startItem+d>l?l-this._startItem:d:l-this._startItem}this._lastItem=this._startItem+l,this._prepareCommonStyles(e),this._currentRow=r.yOffset,this._startCol=r.xOffset,this._buildColumns(e),u.createBorderEdges(qt.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(n),this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1,r.headerSummary),this.buildTreeItems(e,function(){o.footer&&o.buildSummaryItem(e,!0,r.footer),o._buildDocumentTail(n),o._buildUserCells(e,n),t&&t()})},i.prototype.buildTreeItems=function(e,t){for(var o=this._exportOptions.showIndicatorRow(e),r=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<n;s++){var l=r?r[s]:e.getItem(s);if(this._indicatorNo=l instanceof Tt&&o?l.dataRow:s+1,!(l instanceof ht))throw new Error("Unkown tree item type");this.buildTreeRow(e,l),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(e.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?t&&t():setTimeout((function(){this.buildTreeItems(e,t)}).bind(this),0)},i.prototype.buildTreeRow=function(e,t){var o,r=this._workbook.currentSheet,n=this._preparer,s=n.dataRowCount,l=n.colCount,u=this._indents,h=t.level,d=this._currentRow;r.setFirstRow(this._currentRow);var p=this._startCol,f=e.displayOptions,g=e.layoutManager.getDataRowHeights(s),m=g.reduce(function(de,Ce){return de+Ce},0)||t.height;isNaN(m)&&(m=(f.rowHeight||f.minRowHeight)*s),m=m===-1?-1:m>0?m/s:m;for(var b=[],C=0;C<s;C++)b.push(r.borrowRow(d+C,m===-1?-1:(g[C]||m)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,r,b,this._indicatorNo,d,p++,s),this.checkBar&&this._buildCheckBarCell(e,r,b,t.checked,d,p++,s);var x=this._bodyCellStyle;for(C=0;C<s;C++){var E=b[C];E._row=C;var S=d+C,P=u>0?p+h-1:p,R=n.getItem(C,0),k=R.layout,D=k.firstColumn,F=this._columnStyles[D.$_hash],H=u>0?u-h+1:0;for(o=0;o<h-1;o++)E.addBlank(o+p,x);for(k.isProxy||R.spanned?E.addBlank(P,F):(this._buildValueCell(e,r,E,t,k,P,P),r.addMerge(S,P,k._dspan,k._defColSpan+H)),o=0;o<H;o++)E.addBlank(1+o+P,F);for(P=u>0?p+u:p,o=1;o<l;o++){var N=o+P;if(D=(k=(R=n.getItem(C,o)).layout).firstColumn,F=this._columnStyles[D.$_hash],k.isProxy||R.spanned)E.addBlank(N,F);else{var V=k.parent,j=V&&V.vertical,K=k.spanCallback,U=K?K(e.handler,k,t.index)-1:void 0;U===void 0&&(U=k.getDataSpan()-1);var Y=0;if(U>0){var J=0,ae=k.vindex+1;if(j)for(;J++<U&&J<s;)Y+=V.getVisible(ae++)._dspan,n.getItem(C+J,o).spanned=!0;else for(;J++<U&&o+J<l&&ae<V.visibleCount;)Y+=V.getVisible(ae++)._cspan,n.getItem(C,o+J).spanned=!0}this._buildValueCell(e,r,E,t,k,N,P),j?r.addMerge(S,N,k._dspan+Y,k._cspan):r.addMerge(S,N,k._dspan,k._cspan+Y)}}this._exportOptions.showLevelOutline&&r.setRowLevel(d,t.level)}this._currentRow+=s,r.setLastRow(this._currentRow-1)},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.save=function(){var e=this._multiOptions.zip||JSZip,t=(function(p){var f=new e;if(p)for(var g=f.folder("xl/media"),m=Object.keys(p),b=0;b<m.length;b++){var C=p[m[b]];C.fileName&&C.buffer&&g.file(C.fileName,C.buffer)}var x=this._workbook.createParts();for(var E in x){var S=x[E];S.indexOf('xmlns=""')>=0&&(S=S.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),f.file(E,S)}if(l)f.generateAsync?f.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},function(R){r.progressCallback&&r.progressCallback(null,"zip",100,R.percent)}).then(function(R){r.done&&typeof r.done=="function"&&r.done(),u.saveLocal(n,R,o)}):(r.done&&typeof r.done=="function"&&r.done(),u.saveLocal(n,f.generate({type:"blob",compression:"DEFLATE"}),o));else if(r.target===c.ExportTarget.STREAM)if(f.generateAsync)f.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(R){r.progressCallback&&r.progressCallback(null,"zip",100,R.percent)}).then(function(R){r.done&&typeof r.done=="function"&&r.done(R)});else{var P=f.generate({type:"base64",compression:"DEFLATE"});r.done&&typeof r.done=="function"&&r.done(P)}else f.generateAsync?f.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(R){r.progressCallback&&r.progressCallback(null,"zip",100,R.percent)}).then(function(R){r.done&&typeof r.done=="function"&&r.done(),u.saveServer(n,R,r.url,o,s)}):(r.done&&typeof r.done=="function"&&r.done(),u.saveServer(n,f.generate({type:"base64",compression:"DEFLATE"}),r.url,o,s))}).bind(this),o=this.grid.doc,r=this._multiOptions,n=r.fileName,s=r.params,l=r.target=="local",u=this,h=this._workbook;if(e.support.blob||!l)if(h.hasDrawing){var d=h.getImageMap();h.downloader.buldDownload=r.bulkImageDownload,h.downloader.executeDownLoad(this,d,t)}else t();else alert("not supported on this browser")},i.prototype._prepareCount=function(e,t){for(var o=0,r=0,n=t.length;r<n;r++){var s=void 0,l=t[r].grid;if(l instanceof Er)if(e.allItems&&this._rowGrouped){s=l.itemSource.getAllItems();var u=l.layoutManager.fixedItemCount;if(u>0)for(var h=0;h<u;h++)s.splice(h,0,l.getItem(h))}else e.pagingAllItems&&l.paged?s=l.itemSource.getPagingAllItems():e.onlyCheckedItems&&!l.rowGrouped&&(s=l.getCheckedItems(!1));else l instanceof Xl&&e.allItems&&(s=l.getAllItems());o+=s?s.length:l.itemCount}return o},i.prototype._inheritStyles=function(e){for(var t={length:0},o=0,r=e.length;o<r;o++)e[o]&&qt.extendCssStyle(e[o],t);return t},i.prototype._prepareCommonStyles=function(e){var t,o,r=this,n=this._preparer.documentCssStyles,s=function(st){return qt.getSelectorStyle(n,st)},l=function(st){var qe=[];return st.forEach(function(Qe){var Ke=typeof Qe=="string"?s(Qe):Qe;Ke&&qe.push(Ke)}),r._inheritStyles(qe)},u=s("table"),h=l([u,s("tr"),s("td")]),d=l(["html",".rg-root"]),p=s(".rg-header"),f=s(".rg-footer"),g=s(".rg-header-summary"),m=s(".rg-body"),b=s(".rg-fixed-body"),C=l([".rg-root table",".rg-root .rg-table",".rg-root table tr",".rg-root .rg-table tr",".rg-root table tr td",".rg-root .rg-table tr td",".rg-root .rg-table td"]),x=l([C,".rg-header table",".rg-header .rg-table",".rg-header table tr",".rg-header .rg-table tr",".rg-header table tr td",".rg-header .rg-table tr td"]),E=l([C,".rg-footer table",".rg-footer .rg-table",".rg-footer table tr",".rg-footer .rg-table tr",".rg-footer table tr td",".rg-footer .rg-table tr td"]),S=l([C,".rg-header-summary table",".rg-header-summary .rg-table",".rg-header-summary table tr",".rg-header-summary .rg-table tr",".rg-header-summary table tr td",".rg-header-summary .rg-table tr td"]),P=l([C,".rg-body table",".rg-body .rg-table",".rg-body table tr",".rg-body .rg-table tr",".rg-body table tr td",".rg-body .rg-table tr td"]),R=l([C,".rg-fixed-body .rg-table",".rg-fixed-body .rg-table tr",".rg-fixed-body table tr",".rg-fixed-body .rg-table tr td",".rg-fixed-body table tr td",".rg-fixed-body .rg-data-row"]),k=l([C,".rg-rowgroup-bar .rg-table",".rg-rowgroup-bar .rg-table tr",".rg-rowgroup-bar table tr",".rg-rowgroup-bar .rg-table tr td",".rg-rowgroup-bar table tr td"]),D=l([C,".rg-rowgroup-head .rg-table",".rg-rowgroup-head .rg-table tr",".rg-rowgroup-head table tr",".rg-rowgroup-head .rg-table tr td",".rg-rowgroup-head table tr td"]),F=l([C,".rg-rowgroup-foot .rg-table",".rg-rowgroup-foot .rg-table tr",".rg-rowgroup-foot table tr",".rg-rowgroup-foot .rg-table tr td",".rg-rowgroup-foot table tr td"]),H=l([C,P]),N=s(".rg-header-cell"),V=s(".rg-footer-cell"),j=s(".rg-header-summary-cell"),K=s(".rg-data-cell"),U=s(".rg-rowgroup-header"),Y=s(".rg-rowgroup-footer"),J=s(".rg-rowgroup-footer-cell"),ae=l([d,".rg-rowgroup-head",h,D]),de=l([d,".rg-rowgroup-foot",h,F]),Ce=l([d,".rg-rowgroup-bar",h,".rg-rowgroup-bar-cell",k]),pe=s(".rg-data-row"),fe=s(".rg-fixed-row"),se=l([d,".rg-rowbarcontainer",h,C,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td",".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell"]),Ge=l([d,".rg-foot",h,C,".rg-foot .rg-table tr td",".rg-rowindicator-foot"]),Ye=l([d,".rg-sum",h,C,".rg-sum .rg-table tr td",".rg-rowindicator-sum"]);this._indicatorCellStyle=this._parseStyles(this._workbook,se),this._indicatorFootStyle=this._parseStyles(this._workbook,Ge),this._indicatorSumStyle=this._parseStyles(this._workbook,Ye);var Be=l([d,".rg-rowbarcontainer",h,C,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td.rg-checkbar-cell"]),De=l([d,".rg-foot",h,C,".rg-foot .rg-table tr td",".rg-checkbar-foot"]),Ve=l([d,".rg-sum",h,C,".rg-sum .rg-table tr td",".rg-checkbar-sum"]);this._checkBarCellStyle=this._parseStyles(this._workbook,Be),this._checkBarFootStyle=this._parseStyles(this._workbook,De),this._checkBarSumStyle=this._parseStyles(this._workbook,Ve),o=this._headerCssStyle=l([d,p,s("."+e.header.styleName),h,N,x,s("."+e.header.exportStyleName)]),this._headerCellStyle=this._parseStyles(this._workbook,o,!0);var _e=this._exportOptions,Xe=_e.footer===Ri,Me=_e.headerSummary===Ri;this._footerCellStyles=[];for(var re=0;re<(Xe?e.footers.count:e.footers.visibleCount);re++)o=l([d,f,o=(t=(Xe?e.footers.get(re):e.footers.getVisible(re)).styleName)?s("."+t):null,h,V,E]),this._footerCellStyles.push(this._parseStyles(this._workbook,o,!0));for(this._summaryCellStyles=[],re=0;re<(Me?e.headerSummaries.count:e.headerSummaries.visibleCount);re++)o=l([d,g,o=(t=(Me?e.headerSummaries.get(re):e.headerSummaries.getVisible(re)).styleName)?s("."+t):null,h,j,S]),this._summaryCellStyles.push(this._parseStyles(this._workbook,o,!0));if(this._groupFooterCellStyles=[],e instanceof Er)for(re=0;re<e.rowGroup.footers.count;re++){var Ue=e.rowGroup.footers.get(re);o=l([d,Y,o=(t=Ue.exportStyleName||Ue.styleName)?s("."+t):null,h,J,H]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,o,!0))}o=this._cellCssStyle=l([d,m,u,P,pe,K]),this._bodyCellStyle=this._parseStyles(this._workbook,o,!1),o=l([d,m,u,fe,P,K]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,o,!1),o=this._fixedCellCssStyle=l([d,b,u,pe,R,K]),this._fixedCellStyle=this._parseStyles(this._workbook,o,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,l([d,U])),this._groupFooterCellStyle=this._parseStyles(this._workbook,l([d,u,Y,J,P])),this._indentHeadStyle=this._parseStyles(this._workbook,ae),this._indentFootStyle=this._parseStyles(this._workbook,de),this._indentBarStyle=this._parseStyles(this._workbook,Ce),this._dynamicStyles={}},i.prototype._exportGridAsync=function(e,t,o,r){if(r===void 0&&(r=null),o<t.exportGrids.length){var n=t.exportGrids[o];setTimeout((function(){this._exportGrid(e,n.options,(function(){r()}).bind(this))}).bind(this))}},i.prototype._exportGrid=function(e,t,o){var r=t.grid;this._preparer=new ib(r,t),this._exportOptions=t,this.indicator=t.indicatorVisible(r)?r.rowIndicator:null,this.checkBar=t.checkBarVisible(r)?r.checkBar:null,this.header=t.headerVisible(r),this.headerSummary=t.headerSummaryVisible(r),this.footer=t.footerVisible(r),this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=t.sheetName,this._workbook=e,this.allItems=null,this.buildBook((function(){this._preparer&&this._preparer.dispose(),o&&o()}).bind(this))},i.prototype._changeFormatId=function(e,t,o){return e.changeFormatId(t,o)},i.prototype._parseStyles=function(e,t,o){return e.addStyle(t,!0,!0,!0,o)},i.prototype._extendStyles=function(e,t,o,r,n,s){return r===void 0&&(r=!0),e.extendStyle(t,o,r,n,s)},i.prototype.$_summaryStyleSet=function(e,t,o){var r=this._exportOptions,n=this._workbook,s=void 0;if(t){var l=t.exportStyleName||t.styleName,u=void 0;if(r.applyDynamicStyles){if(e instanceof dl){var h=new Gh;l=(u=e.getCellStyle(e.getCell(t.column.layout),h.clear(),!1)).exportStyleName||u.styleName||l}else if(e instanceof Lo){var d=this.grid,p=(h=new Fn,d.rowGroup.getFooterStyleName(e.item));l=(u=d.rowGroup.getFooterCellStyle(e,h.clear(),!1)).exportStyleName||u.styleName||l||p}}var f=void 0,g=void 0;if((f=u&&u.numberFormat||t.numberFormat)?f=nn.convertNumberFormat(f):(f=u&&u.datetimeFormat||t.datetimeFormat)&&(f=nn.convertDateFormat(f)),f&&((g=t.prefix)&&(f='"'+g+'"'+f),(g=t.suffix)&&(f=f+'"'+g+'"'),s=n.addNumberFormat(f)),l||s!==void 0){for(var m=this._preparer.documentCssStyles,b=l?l.trim().split(" "):[],C=[],x=0,E=b.length;x<E;x++)C.push(qt.getSelectorStyle(m,"."+b[x]));if(t.$_owner.type){var S=t.$_owner.type+"=styleName="+l+"formatId="+s,P=this._dynamicStyles;return P[S]||(P[S]=this._extendStyles(n,o,this._inheritStyles(C),!0,s)),P[S]}return this._extendStyles(n,o,this._inheritStyles(C),!0,s)}}return o},i.prototype._buildColumns=function(e){for(var t,o,r,n=this._exportOptions,s=this._workbook,l=s.currentSheet,u=this._preparer,h=0;h<this._startCol;h++)l.addColumn(-1,n.xOffsetWidth/i.PIXELS_PER_CHAR,null);if(this.indicator&&(r=Math.round(e.rowIndicator.minWidth/i.PIXELS_PER_CHAR),l.addColumn(e.rowIndicator.$_hash,r,null)),this.checkBar&&(r=Math.round(e.checkBar.width/i.PIXELS_PER_CHAR),l.addColumn(e.checkBar.$_hash,r,null)),n.indenting&&(e instanceof Er&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(e.rowGroup.expandedAdornments===c.RowGroupAdornments.SUMMARY?0:1):e instanceof Xl&&(this._indents=this._rowLevels-1),this._indents>0))for(h=0;h<this._indents;h++)r=Math.max(this._indentWidth,1),l.addColumn(-1,r,null);var d=e.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var p=u.colCount,f=u.dataRowCount,g=!1;for(h=0;h<f;h++)for(var m=0;m<p;m++){var b=u.getItem(h,m).layout;if(t=b.firstColumn,h===0&&(r=Math.round(b._cellWidth/i.PIXELS_PER_CHAR),l.addColumn(t.$_hash,r,null,n.hiddenColumns.indexOf(t.name)>=0)),o=t.$_hash,!this._columnStyles[o]){var C=e.dataSource;if(t instanceof Fi){var x=this._textFormatId;if(t instanceof Oe){var E=n.exportLink&&t.renderer&&t.renderer.type==Mn.TYPE&&!t.excelFormat,S=C.getField(t.dataIndex),P=S?S.dataType:c.ValueType.TEXT;P===c.ValueType.NUMBER?x=this._numberFormatId:P===c.ValueType.DATETIME&&(x=this._dateFormatId);var R=t.excelFormat,k=void 0,D=!0;if(R!=null)x=typeof R=="number"||parseInt(R)>0?parseInt(R):s.addNumberFormat(R);else if(E)x=0;else{if(P==c.ValueType.NUMBER){var F=t.numberFormat===null?void 0:t.numberFormat||n.numberFormat||d.numberFormat;if(F)if(F.match(/^[#0]([#0,.;aAfFcC ]+$|$)/))R=nn.convertNumberFormat(F);else{var H=Lr.numberFormats&&Lr.numberFormats[F];R=H&&H.excelFormat,D=!1}}else P==c.ValueType.DATETIME&&typeof(R=t.datetimeFormat||n.datetimeFormat||d.datetimeFormat)=="string"&&(R=nn.convertDateFormat(R));R&&(D&&((k=t.prefix)&&(R='"'+k+'"'+R),(k=t.suffix)&&(R=R+'"'+k+'"')),x=s.addNumberFormat(R))}}this._columnStyles[o]=this._changeFormatId(s,b.isFixed?this._fixedCellStyle:this._bodyCellStyle,x),this._columnFixedStyles[o]=this._changeFormatId(s,this._bodyFixedCellStyle,x),this._columnFooterStyles[o]=[],this._columnSummaryStyles[o]=[],this._columnGroupFooterStyles[o]=[];for(var N=n.footer===Ri,V=n.headerSummary===Ri,j=0;j<(N?e.footers.count:e.footers.visibleCount);j++){var K=N?e.footers.get(j):e.footers.getVisible(j),U=t.footers.get(K._childIndex);this._columnFooterStyles[o][j]=this.$_summaryStyleSet(K,U,this._footerCellStyles[j])}for(j=0;j<(V?e.headerSummaries.count:e.headerSummaries.visibleCount);j++){var Y=V?e.headerSummaries.get(j):e.headerSummaries.getVisible(j),J=t.headerSummaries.get(Y._childIndex);this._columnSummaryStyles[o][j]=this.$_summaryStyleSet(Y,J,this._summaryCellStyles[j])}if(e instanceof Er)for(j=0;j<e.rowGroup.footers.count;j++){var ae=e.rowGroup.footers.get(j),de=t.groupFooters.get(ae.index);this._columnGroupFooterStyles[o][j]=this.$_summaryStyleSet(null,de,this._groupFooterCellStyles[j])}}e instanceof Er&&(n.separateRows||n.onlyCheckedItems&&!e.rowGrouped||t instanceof Oe&&(t.mergeRule||t.layout.mergeRule||e.rowGroup.mergeMode&&e.isGroupedColumn(t))&&(g=!0))}}this._columnMerged=g},i.prototype._buildTitleCommon=function(e,t,o){if(t&&t.visible){for(var r=this._currentRow,n=this._startCol,s=void 0,l=e.currentSheet,u=0;u<t.spaceTop;u++){s=l.addRow(r+u,void 0);for(var h=0;h<o;h++)s.addBlank(n+h,void 0)}r+=t.spaceTop;var d=t.message,p=void 0;if(t.styleName){var f=this._preparer.documentCssStyles,g=[];t.styleName.split(" ").forEach(function(m){g.push(qt.getSelectorStyle(f,"."+m))}),p=this._parseStyles(e,this._inheritStyles(g),!0)}else p=this._parseStyles(e,t.cssStyle,!0);for(s=l.addRow(r,t.height),u=0;u<o;u++)u==0?(s.addText(n,d,p),l.addMerge(r,n,1,o)):s.addBlank(n+u,p);for(r++,u=0;u<t.spaceBottom;u++)for(s=l.addRow(r+u,void 0),h=0;h<o;h++)s.addBlank(n+h,void 0);r+=t.spaceBottom,this._currentRow=r}},i.prototype._buildDocumentTitle=function(e){var t=this._exportOptions,o=e,r=this._preparer.colCount;this.indicator&&r++,this.checkBar&&r++,r+=Math.max(this._indents,0),this._buildTitleCommon(o,t.documentTitle,r),this._buildTitleCommon(o,t.documentSubtitle,r)},i.prototype._buildDocumentTail=function(e){var t=this._exportOptions,o=e,r=this._preparer.colCount;this.indicator&&r++,this.checkBar&&r++,r+=Math.max(this._indents,0),this._buildTitleCommon(o,t.documentTail,r)},i.prototype._buildIndicatorCell=function(e,t,o,r,n,s,l){var u=this._indicatorCellStyle;if((Array.isArray(o)?o[0]:o).addNumber(s,r,u),l>1){for(var h=1;h<l;h++)o[h].addBlank(s,u);t.addMerge(n,s,l,1)}},i.prototype._buildCheckBarCell=function(e,t,o,r,n,s,l){var u=this._checkBarCellStyle,h=Array.isArray(o)?o[0]:o,d=this._exportOptions.checkMark,p=this._exportOptions.unCheckMark;if(h.addText(s,r?d:p||"",u),l>1){for(var f=1;f<l;f++)o[f].addBlank(s,u);t.addMerge(n,s,l,1)}},i.prototype._buildValueCell=function(e,t,o,r,n,s,l){l===void 0&&(l=0);var u,h,d=this._workbook,p=r.index>=0&&r.index<e.fixedOptions.rowCount,f=e.body,g=this._exportOptions,m=mi.tempItem(e,r,n),b=n.firstColumn,C=f.getRowStyle(r,p,!0,g.applyDynamicStyles),x=C.exportStyleName||C.styleName,E=b.exportStyleName||b.styleName;g.applyDynamicStyles&&(h=f.getIndexCellStyle(m,!1));var S,P=h&&h.renderer||b.renderer,R=(!n.isFixed&&p?this._columnFixedStyles[b.$_hash]:this._columnStyles[b.$_hash])||this._bodyCellStyle;if(g.applyFixed&&(!e.isTree()&&p&&t.setFixedInfo(o.index+1,void 0),n.$_fixed&&t.setFixedInfo(void 0,s+1)),b.blankWhenExport)o.addBlank(s,R);else if(b instanceof Oe){var k=b.dataIndex,D=h&&h.cellProtectProps||b.cellProtectProps,F=e.dataSource.getField(k),H=g.exportLink&&!b.excelFormat&&b.renderer&&b.renderer.type==Mn.TYPE,N=g.exportTemplate&&b.renderer&&b.renderer.type===Ln.TYPE,V=g.exportImage!==!1&&P&&(P.type===Dn.TYPE||P.type===Ur.TYPE),j=(V=V&&(g.exportImage?P.exportImage!==!1:!!P.exportImage))&&P.type===Ur.TYPE,K=V&&P.type===Dn.TYPE,U=void 0;if(F){var Y=r.getData(k);if(U=b.displayCallback,x||E||h||D){var J=void 0,ae=void 0,de=[n.isFixed?this._fixedCellCssStyle:this._cellCssStyle];if(h&&typeof h=="object"){var Ce=h;J=typeof(J=h.exportStyleName||h.styleName||E)=="string"?J:void 0;var pe=void 0;if(!(ae=h.excelFormat)){if(F.dataType==c.ValueType.NUMBER?ae=(pe=Ce.numberFormat)?nn.convertNumberFormat(pe):void 0:F.dataType==c.ValueType.DATETIME&&(ae=(pe=Ce.datetimeFormat)?nn.convertDateFormat(pe):void 0),ae){var fe=Ce.prefix;fe&&(ae='"'+fe+'"'+ae);var se=Ce.suffix;se&&(ae=ae+'"'+se+'"')}}}else J=typeof h=="string"?h:void 0;var Ge=this._preparer.documentCssStyles,Ye=this._dynamicStyles;if(Ye[di=b.$_hash+"="+x+"="+E+"="+JSON.stringify(h)+"="+JSON.stringify(D)+"=true"])R=Ye[di];else{var Be=[];if(x){var De=x.trim().split(" ");Array.prototype.push.apply(Be,De),n.isFixed&&De.forEach(function(iv){Be.push("rg-fixed-body .".concat(iv))})}E&&Array.prototype.push.apply(Be,E.trim().split(" ")),J&&Array.prototype.push.apply(Be,J.trim().split(" "));for(var Ve=0,_e=Be.length;Ve<_e;Ve++)de.push(qt.getSelectorStyle(Ge,"."+Be[Ve]));var Xe=void 0;ae&&(Xe=d.addNumberFormat(ae)),S=this._inheritStyles(de),H&&(S["font-decoration"]="underline",S.color="blue");var Me=S.whiteSpace||S["white-space"],re=Me!=null&&Me!="none"&&Me!="nowrap",Ue=S.textWrap||S["text-wrap"];re=re||Ue!=="nowrap",R=this._extendStyles(d,R,S,re,Xe,D),this._dynamicStyles[di]=R}}switch(F.dataType){case"number":(g.numberCallback||U)&&(Y=g.numberCallback?g.numberCallback(r.index,b.name,Y,e.handler):U(e.handler,m.proxy(),Y));var st=b.excelFormulaExprStatement,qe=void 0;if(st){var Qe=this._excelFormulaRuntime;Qe.setItemIndex(o.index,l),Qe.setColumns(this._preparer._dataCells[o._row]),qe=st.evaluate(Qe)}Y!=null||qe?typeof Y=="number"?o.addNumber(s,Y,R,qe):o.addText(s,Y,R):o.addBlank(s,R);break;case"datetime":case"date":Y?g.datetimeCallback||U?(Y=g.datetimeCallback?g.datetimeCallback(r.index,b.name,Y,e.handler):U(e.handler,m.proxy(),Y))instanceof Date?o.addDate(s,Y,R):o.addText(s,Y,R):o.addDate(s,Y,R):g.nullDateText?o.addText(s,g.nullDateText,R):o.addBlank(s,R);break;case"boolean":g.booleanCallback||U?typeof(Y=g.booleanCallback?g.booleanCallback(r.index,b.name,Y,e.handler):U(e.handler,m.proxy(),Y))=="boolean"?o.addBool(s,Y,R):o.addText(s,Y,R):g.booleanFormat?(Y=ho.getFormatter(g.booleanFormat).formatValue(Y),o.addText(s,Y,R)):o.addBool(s,Y,R);break;default:if(u=Y||"",g.lookupDisplay&&(b.labelField||b.lookupDisplay))u=po.getText(r,b);else if(N){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(b.renderer):this._templateRenderer=e.delegate.createRenderer(Ln.TYPE,b.renderer,null);var Ke=this._templateRenderer._parser,xt=b.renderer.callback,Ct=e.body.getCell(m,!1),Ai=xt?xt.call(this,e.handler,Ct,-1,-1):Ke.realize(e,Ct,null,this._templateRenderer.valueCallback);u=Ai?Ai.replace(/<br[\s/]*>/gi,`
`).replace(/(<([^>]+)>)/gi,""):""}else if(F.dataType===c.ValueType.OBJECT&&typeof Y=="object")if(g.objectCallback)u=g.objectCallback(r.index,b.name,Y,e.handler);else{var Qi=b.objectKey||b.objectCallback,di=Qi?b.objectKey:F.objectKey,pi=Qi?b.objectCallback:F.objectCallback;u=pi&&typeof pi=="function"?pi(F.orgFieldName,r.dataRow,Y):di&&Y.hasOwnProperty(di)?Y[di]:JSON.stringify(Y)}else Y!=null&&(u=b.textFormatter?b.textFormatter.getText(Y):u);if(typeof(u=g.textCallback?g.textCallback(r.index,b.name,u,e.handler):U&&!b.textFormatter?U(e.handler,m.proxy(),Y):u)=="number")o.addNumber(s,u,R);else if(u&&H)if(Ct=e.body.getCell(m,!1),this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(b.renderer)):this._linkRenderer=e.delegate.createRenderer(Mn.TYPE,b.renderer,null),eo=this._linkRenderer){var Ao=eo.$_getUrl(e,Ct);o.addLink(s,u,Ao,R)}else o.addText(s,u,R);else if(K){Ct=e.body.getCell(m,!1),this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(P)):this._imageRenderer=e.delegate.createRenderer(Dn.TYPE,P,null);var Ut=(eo=this._imageRenderer).$_getImageUrl(e,Ct),Gi=t.getColumnWidth(s);Ut?o.addImage(s,u,Gi,c.IconLocation.CENTER,Ut,R,-1,eo.imageHeight):o.addText(s,u,R)}else if(j){Ct=e.body.getCell(m,!1),this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(P)):this._iconRenderer=e.delegate.createRenderer(Ur.TYPE,P,null);var eo;Ut=(eo=this._iconRenderer).$_getIconUrl(e,Ct),Gi=t.getColumnWidth(s),Ut?o.addImage(s,u,Gi,eo.iconLocation,Ut,R,eo.iconWidth,eo.iconHeight):o.addText(s,u,R)}else u?o.addText(s,u,R):o.addBlank(s,R)}}else o.addBlank(s,R)}else if(b instanceof Ji){var un=b.renderer;if(un&&un.type&&un.type!=ks.TYPE){var vd=this._preparer;g.exportSeriesColumn&&$n.interfaced(un)&&vd.sparkColumns[b.$_hash]?o.addSparkLine(s,l,vd.sparkColumns[b.$_hash],R):o.addBlank(s,R)}else{this._seriesCell.setIndex(m);var wd=this._seriesCell.value;wd?(pe=vs.getText(wd,","),o.addText(s,pe,R)):o.addBlank(s,R)}}return R},i.prototype._buildUserCells=function(e,t){var o=this,r=this._exportOptions,n=t.currentSheet,s=r.userCellsCallback,l=r.userCells||s&&s(e.handler,n.rowCount,n.colCount,n.name);if(v.isArray(l)){var u=this._dynamicStyles,h=this._preparer.documentCssStyles,d=n.workbook.styles._styles._items[0],p=e.doc.createElement("userCell").style;l.forEach(function(f){var g,m,b;if(f.format&&(b=t.addNumberFormat(f.format)),f.styleName){var C=f.styleName;g="userCells;styleName=".concat(C,";formatId=").concat(b);var x=C?C.trim().split(" "):[];if(!(m=u[g])){for(var E=[],S=0,P=x.length;S<P;S++)E.push(qt.getSelectorStyle(h,"."+x[S]));var R=o._inheritStyles(E);m=u[g]=o._parseStyles(t,R,!!R.whiteSpace&&null),b&&(m._formatId=b)}}else if(f.styles){var k=v.objectToCssText(f.styles);g="userCells;styleName=".concat(k,";formatId=").concat(b),(m=u[g])||(p.cssText=k,m=u[g]=o._parseStyles(t,p,!!p.whiteSpace&&null),b&&(m._formatId=b))}else b&&(g="userCells;styleName=".concat(void 0,";formatId=").concat(b),(m=u[g])||(m=u[g]=o._extendStyles(t,d,{},!1,b)));m=m||d;var D=f.mergeRow||1,F=f.mergeCol||1,H=v.makeArray(f.heights,!0);for(S=0;S<D;S++)for(var N=0;N<F;N++){var V=n.borrowRow(f.row+S,H[S]||f.height||-1);if(S===0&&N===0){var j=f.value==null?"":f.value,K=n.getColumnWidth(f.col);if(f.image&&r.exportImage!==!1){var U=void 0;U=typeof f.image=="string"?{url:f.image}:f.image,V.addImage(f.col,j,K,U.location||c.IconLocation.CENTER,U.url,m,U.width,U.height)}else switch(typeof j){case"string":V.addText(f.col,j,m);break;case"number":V.addNumber(f.col,j,m,f.formula);break;case"boolean":V.addBool(f.col,j??null,m);break;default:j instanceof Date&&V.addDate(f.col,j,m)}}else V.addBlank(f.col+N,m)}D*F>1&&n.addMerge(f.row,f.col,D,F)})}},i.CSS_HEAD="rg-header",i.CSS_FOOT="rg-footer",i.CSS_BODY="rg-body",i.CSS_FIXED="rg-fixed-body",i.CSS_TABLE="rg-table",i.CSS_ROWGROUP_BAR="rg-rowgroup-bar",i.CSS_ROWGROUP_HEAD="rg-rowgroup-head",i.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",i.CSS_HEAD_CELL="rg-header-cell",i.CSS_INDICATOR="rg-rowindicator-cell",i.CSS_CHECK="rg-checkbar-cell",i.CSS_DATA_ROW="rg-data-row",i.PIXELS_PER_CHAR=7,i.LINE_HEIGHT=.75,i}(td),ot=function(){function a(){}return a.getColumn=function(i,e){if(e){if(typeof e=="string")return i.columnByName(e);if(e instanceof Ro)return e;if(e.$_hash)return i.columnByHash(e.$_hash);if(e.name)return i.columnByName(e.name)}return null},a.getItemProxy=function(i,e){var t=i.parent,o={type:void 0,id:i.id,parentId:t==null?-1:t.id,itemIndex:i.index,index:i.index,dataRow:-1,checked:i.checked};return e&&(o.childIndex=i.childIndex,o.level=i.level),i instanceof Tt?(o.type="row",o.dataRow=i.dataRow):i instanceof ft?(o.count=i.children.length,o.expanded=i.expanded,i instanceof Ht||i instanceof yi?(o.type="group",o.footerId=i.footer?i.footer.id:-1,i instanceof zo||e&&(o.firstItem=a.getItemProxy(i.firstItem),o.firstDataItem=a.getItemProxy(i.firstDataItem),o.dataRows=i.getRows())):i instanceof ht&&(o.type="tree",o.dataRow=i.dataRow?i.dataRow:-1)):i instanceof Kt&&(o.type="footer"),o},a.getItemIndices=function(i){for(var e=[],t=0,o=i.length;t<o;t++)e.push(i[t].index);return e},a.getValues=function(i,e){var t={},o=e.dataSource;if(i.isItemEditing(e))return(t=e.getRowObject()).__rowId=e.dataRow,t;if(e.dataRow>=0){if(e instanceof ht){var r=e.row,n=r.values;t.__rowId=r.rowId;for(var s=0,l=o.fieldCount;s<l;s++)t[o.getOrgFieldName(s)]=n[s]}else(t=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return t}return null},a.getDisplayValues=function(i,e,t){var o=i.getDataColumns();if(e){for(var r=t?{}:e.getRowObject(),n=new Fn,s=0,l=o.length;s<l;s++){var u=o[s],h=e.index>=0?le.temp(i,e.index,u):mi.tempItem(i,e,u),d=i.body.getCell(h,!1);d._index=h,n.clear(),n.assign(u),i.body.getCellStyle(d,n);var p=n.toFormatter(null);r[t?u.name:u.fieldName]=po._getDisplayText(i,e,u,e.getData(u.dataIndex),p)}return r}},a.setValues=function(i,e,t,o){var r,n,s,l=e.dataSource,u=l.fieldCount;if(i.isItemEditing(e))if(e)e.values=t;else for(var h=0;h<u;h++){var d=l.getOrgFieldName(h);t.hasOwnProperty(d)&&e.setData(h,t[d])}else if((s=e.dataRow)>=0){if(l instanceof gs){var p=l.rowById(s);if(p){if(r=p.values||[],Array.isArray(t)){h=0;for(var f=t.length;h<f&&!(n=!l.getField(h).equalValues(r[h],t[h]));h++);}else for(h=0;h<u&&(d=l.getOrgFieldName(h),!(t.hasOwnProperty(d)&&(n=!l.getField(h).equalValues(r[h],t[d]))));h++);if(!n)return;p.update(t,o)}}else if(l instanceof $a){if(r=l.getRow(s),Array.isArray(t))for(h=0,f=t.length;h<f&&!(n=!l.getField(h).equalValues(r[h],t[h]));h++);else for(h=0;h<u&&(d=l.getOrgFieldName(h),!(t.hasOwnProperty(d)&&(n=!l.getField(h).equalValues(r[h],t[d]))));h++);if(!n)return;l.updateRow(s,t,o)}}},a}(),Jl=function(){function a(i,e,t){this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onPopupMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onLeftPosChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onShowEditCommand=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onWheel=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this.onLayoutExpanding=null,this.onLayoutExpanded=null,this.onLayoutCollapsing=null,this.onLayoutCollapsed=null,this._view=this._createView(i,e,t),this._listener=this._createListener(this._view)}return a.prototype.dispose=function(){return this._view.dispose(),this._view=null,this._container=this._container&&this._container.dispose(),this._listener=this._listener&&this._listener.dispose()},Object.defineProperty(a.prototype,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(i){this._view.itemSource.summaryMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(i){this._view.itemSource.hideDeleted=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(i){this._view.itemSource.sortMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"undoable",{get:function(){return this._view.undoable},set:function(i){this._view.undoable=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"undoing",{get:function(){return this._view.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"redoing",{get:function(){return this._view.redoing},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"disabled",{get:function(){return this._view.container.disabled},set:function(i){this._view.container.disabled=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(i){this._view.scrollBarWidth=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(i){this._view.scrollBarHeight=i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fixedOptions",{get:function(){return this._view.fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"displayOptions",{get:function(){return this._view.displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"formatOptions",{get:function(){return this._view.formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editOptions",{get:function(){return this._view.editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editorOptions",{get:function(){return this._view.editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"copyOptions",{get:function(){return this._view.copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pasteOptions",{get:function(){return this._view.pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"sortingOptions",{get:function(){return this._view.sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"filteringOptions",{get:function(){return this._view.filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"mobileOptions",{get:function(){return this._view.mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataDropOptions",{get:function(){return this._view.dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rowIndicator",{get:function(){return this._view.rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"stateBar",{get:function(){return this._view.stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"checkBar",{get:function(){return this._view.checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"header",{get:function(){return this._view.header},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"footer",{get:function(){return this._view.footer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"footers",{get:function(){return this._view.footers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"headerSummary",{get:function(){return this._view.headerSummary},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"headerSummaries",{get:function(){return this._view.headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"filterPanel",{get:function(){return this._view.filterPanel},enumerable:!1,configurable:!0}),a.prototype.ping=function(i){this._view instanceof Fo&&alert(i)},a.prototype.refresh=function(i){this._view.refreshView(i)},a.prototype.beginUpdate=function(){this._view.beginUpdate()},a.prototype.endUpdate=function(i){this._view.endUpdate(i)},a.prototype.isVisible=function(){return this._view.visible},a.prototype.setVisible=function(i){this._view.visible=i},a.prototype.getItemCount=function(){return this._view.itemCount},a.prototype.getDataRow=function(i){var e=this._view.getItem(i);return e?e.dataRow:-1},a.prototype.getRowsOfItems=function(i){var e=[];if(i)for(var t=0,o=i.length;t<o;t++){var r=this._view.getItem(i[t]);r&&e.push(r.dataRow)}return e},a.prototype.getItemIndex=function(i){return this._view.getItemIndexOfRow(i)},a.prototype.getItemsOfRows=function(i){return this._view.getItemIndicesOfRows(i)},a.prototype.restoreColumns=function(){this._view.restoreColumns()},a.prototype.getDataSource=function(){return this._dataDelegator},a.prototype.setDataSource=function(i){this._dataDelegator=i,this._dataProvider=i?i.getProvider():null,this._view.dataSource=this._dataProvider},a.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),hideDeletedRows:this._view.itemSource.hideDeleted,sortMode:this._view.itemSource.sortMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},a.prototype.setOptions=function(i){i&&(this._view.setOptions(i),i.fixed&&this.setFixedOptions(i.fixed),i.display&&this.setDisplayOptions(i.display),i.format&&this.setFormatOptions(i.format),i.edit&&this.setEditOptions(i.edit),i.editor&&this.setEditorOptions(i.editor),i.copy&&this.setCopyOptions(i.copy),i.paste&&this.setPasteOptions(i.paste),i.sorting&&this.setSortingOptions(i.sorting),i.filtering&&this.setFilteringOptions(i.filtering),i.dataDrop&&this.setDataDropOptions(i.dataDrop),i.rowIndicator&&this.setRowIndicator(i.rowIndicator),i.checkBar&&this.setCheckBar(i.checkBar),i.stateBar&&this.setStateBar(i.stateBar),i.header&&this.setHeader(i.header),i.footer&&this.setFooter(i.footer),i.footers&&this.setFooters(i.footers),i.headerSummary&&this.setHeaderSummary(i.headerSummary),i.headerSummaries&&this.setHeaderSummaries(i.headerSummaries),i.filterPanel&&this.setFilterPanel(i.filterPanel))},a.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},a.prototype.setFixedOptions=function(i){this._view.fixedOptions.assignFrom(i)},a.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},a.prototype.setDisplayOptions=function(i){this._view.displayOptions.assignFrom(i)},a.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},a.prototype.setFormatOptions=function(i){this._view.formatOptions.assignFrom(i)},a.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},a.prototype.setEditOptions=function(i){this._view.editOptions.assignFrom(i)},a.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},a.prototype.setEditorOptions=function(i){this._view.editorOptions.assignFrom(i)},a.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},a.prototype.setCopyOptions=function(i){this._view.copyOptions.assignFrom(i)},a.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},a.prototype.setPasteOptions=function(i){this._view.pasteOptions.assignFrom(i)},a.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},a.prototype.setSortingOptions=function(i){this._view.sortingOptions.assignFrom(i)},a.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},a.prototype.setFilteringOptions=function(i){this._view.filteringOptions.assignFrom(i)},a.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},a.prototype.setMobileOptions=function(i){this._view.mobileOptions.assignFrom(i)},a.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},a.prototype.setDataDropOptions=function(i){this._view.dataDropOptions.assignFrom(i)},a.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},a.prototype.setRowIndicator=function(i){this._view.rowIndicator.assignFrom(i)},a.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},a.prototype.setStateBar=function(i){this._view.stateBar.assignFrom(i)},a.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},a.prototype.setCheckBar=function(i){this._view.checkBar.assignFrom(i)},a.prototype.getHeader=function(){return this._view.header.toProxy()},a.prototype.setHeader=function(i){this._view.header.assignFrom(i)},a.prototype.getFooter=function(){return this._view.footer.toProxy()},a.prototype.setFooter=function(i){this._view.footer.assignFrom(i)},a.prototype.getFooters=function(){return this._view.footers.toProxy()},a.prototype.setFooters=function(i){this._view.footers.assignFrom(i)},a.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},a.prototype.setHeaderSummary=function(i){this._view.headerSummary.assignFrom(i)},a.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},a.prototype.setHeaderSummaries=function(i){this._view.headerSummaries.assignFrom(i)},a.prototype.setFilterPanel=function(i){this._view.filterPanel.assignFrom(i)},a.prototype.setCellStyleCallback=function(i){this._view.body.cellStyleCallback=i},a.prototype.setRowStyleCallback=function(i){this._view.body.rowStyleCallback=i},a.prototype.addUserCellStyle=function(i,e,t){this._view.body.addUserCellStyle(i,e,t)},a.prototype.removeUserCellStyle=function(i,e){i===void 0&&(i=null),e===void 0&&(e=null),this._view.body.removeUserCellStyle(i,e)},a.prototype.getUserCellStyle=function(i,e){return this._view.body.getUserCellStyle(i,e)},a.prototype.setAriaLabelCallback=function(i){this._view.body.ariaLabelCallback=i},a.prototype.orderBy=function(i,e,t){if(i){var o=[],r=[],n=[];i=v.makeArray(i,!1),e=v.makeArray(e,!0),t=v.makeArray(t,!0);for(var s=0,l=i.length;s<l;s++)o.push(this._view.columnByField(i[s])),r.push(e[s]||c.SortDirection.ASCENDING),n.push(t[s]||c.SortCase.SENSITIVE);this._view.orderBy(o,r,n)}},a.prototype.getSortedFields=function(){var i,e=this._view,t=e.getSortFields(),o=e.getSortDirections();if(t&&(i=t.length)>0){for(var r=this._dataProvider,n=[],s=0;s<i;s++)n.push({fieldName:r.getFieldName(t[s]),orgFieldName:r.getOrgFieldName(t[s]),direction:o[s]});return n}return null},a.prototype.setFocus=function(){this._view.setFocus(null,!0)},a.prototype.getColumn=function(i){return this._view.getColumn(i)},a.prototype.getColumns=function(){for(var i=this._view.columnCount,e=[],t=0;t<i;t++)e.push(this._view.getColumn(t));return e},a.prototype.setColumns=function(i){this._view.setColumns(i)},a.prototype.addColumn=function(i,e){return this._view.addColumn(i,e)},a.prototype.removeColumn=function(i){return this._view.removeColumn(i)},a.prototype.addLayout=function(i,e){return this._view.addLayout(i,e)},a.prototype.removeLayout=function(i){this._view.removeLayout(i)},a.prototype.layoutByColumn=function(i){return this._view.layoutByColumn(i)},a.prototype.layoutByName=function(i){return this._view.layoutByName(i)},a.prototype.getColumnNames=function(i,e){return this._view.collectColumnNames(i,e)},a.prototype.columnByName=function(i){return this._view.columnByName(i)},a.prototype.columnByField=function(i){return this._view.columnByField(i)},a.prototype.columnByTag=function(i){return this._view.columnByTag(i)},a.prototype.columnsByTag=function(i){return this._view.columnsByTag(i)},a.prototype.getColumnProperty=function(i,e){var t=ot.getColumn(this._view,i);if(t&&e)return t[e]instanceof me?t[e].toProxy():t[e]},a.prototype.setColumnProperty=function(i,e,t){var o=ot.getColumn(this._view,i);o&&e&&(o[e]instanceof me?o[e].assignFrom(t):o[e]=t)},a.prototype.setColumn=function(i){var e=ot.getColumn(this._view,i);e&&e.assignFrom(i)},a.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},a.prototype.setColumnLayout=function(i){(typeof i!="string"||(i=this._view.findColumnLayout(i)))&&this._view.setCellLayout(i)},a.prototype.getLayoutByColumn=function(i){var e=this._view.layoutByColumn(i);return e?e.toProxy():null},a.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},a.prototype.linearizeColumns=function(i){this._view.linearizeColumns(i)},a.prototype.registerColumnLayouts=function(i){this._view.registerColumnLayouts(i)},a.prototype.fitLayoutWidth=function(i,e,t,o){var r;return i?i instanceof gt?r=i:typeof i=="string"?r=this._view.layoutByName(i):i.name&&(r=this._view.layoutByColumn(i.name)):i==null&&(r=this._view.activeCellLayout._root),r&&this._view.fitLayoutWidth(r,e,t,o)},a.prototype.setRowHeight=function(i,e,t){e===void 0&&(e=0),t===void 0&&(t=!0),this._view.setRowHeight(i,e,t)},a.prototype.getRowHeight=function(i){var e=this._view.getRowHeight(i);if(isNaN(e)){var t=this._view.getItem(i);e=this._view.layoutManager.getItemHeight(t)}return e},a.prototype.clearRowHeights=function(i){this._view.clearRowHeights(i)},a.prototype.getCurrent=function(){var i=this._view.focusedIndex;return i?i.proxy():null},a.prototype.setCurrent=function(i,e){e===void 0&&(e=!0);var t=this._view.focusedIndex.clone();t.assignFrom(i),this._view.setFocusedIndex(t,e,!0)},a.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},a.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},a.prototype.mouseToIndex=function(i,e){var t=this._view.pointToIndex(null,i,e,!1);return t?t.proxy():null},a.prototype.getCellBounds=function(i,e,t){t===void 0&&(t=!0);var o=ot.getColumn(this._view,e),r=new le(this._view,i,o);if(o&&r){var n=this._view.layoutManager,s=n.getBodyView(r),l=s.getCellRectAt(n,r,!0);if(l=l&&(t?s.boundsByScreen(l):s.boundsByContainer(l)))return{x:l.x,y:l.y,width:l.width,height:l.height}}return null},a.prototype.getIndexOfElement=function(i){var e=this._view.getCellViewOf(i),t=this._view.getDataCellIndex(e);return t?t.proxy():null},a.prototype.setColumnFilters=function(i,e){var t=ot.getColumn(this._view,i);t instanceof Oe&&t.setFilters(e)},a.prototype.clearColumnFilters=function(i){var e=ot.getColumn(this._view,i);e instanceof Oe&&e.clearFilters()},a.prototype.addColumnFilters=function(i,e,t){var o=ot.getColumn(this._view,i);o instanceof Oe&&o.addFilters(e,t)},a.prototype.removeColumnFilters=function(i,e){var t=ot.getColumn(this._view,i);t instanceof Oe&&t.removeFilters(e)},a.prototype.activateColumnFilters=function(i,e,t){var o=ot.getColumn(this._view,i);o instanceof Oe&&o.activateFilters(e,t)},a.prototype.activateAllColumnFilters=function(i,e){var t=ot.getColumn(this._view,i);t instanceof Oe&&t.activateAllFilters(e)},a.prototype.resetFilters=function(){this._view.itemSource.beginFiltering();try{this._view.itemSource.clearAllFilters(),this._view.getDataColumns(!1).forEach(function(i){i.isFiltered()&&(i.activateAllFilters(!1,!1),i.setInlineFilter(null,!1))})}finally{this._view.itemSource.endFiltering(null,null)}},a.prototype.hideColumnFilters=function(i,e,t){t===void 0&&(t=!0);var o=ot.getColumn(this._view,i);o instanceof Oe&&(o.hideColumnFilters(e,t),this._view.closePopups())},a.prototype.hideAllColumnFilters=function(i,e){e===void 0&&(e=!0);var t=ot.getColumn(this._view,i);t instanceof Oe&&(t.hideAllColumnFilters(e),this._view.closePopups())},a.prototype.toggleColumnFilters=function(i,e){var t=ot.getColumn(this._view,i);t instanceof Oe&&t.toggleFilters(e)},a.prototype.toggleAllColumnFilters=function(i){var e=ot.getColumn(this._view,i);e instanceof Oe&&e.toggleAllFilters()},a.prototype.getColumnFilter=function(i,e){var t=ot.getColumn(this._view,i);return t instanceof Oe&&t.getFilter(e)?t.getFilter(e).toProxy():null},a.prototype.getColumnFilters=function(i){var e=ot.getColumn(this._view,i);if(e instanceof Oe){for(var t=e.autoFilter?e.autoFilters.items:e.filters.items,o=[],r=0,n=t.length;r<n;r++)o.push(t[r].toProxy());return o}return null},a.prototype.getActiveColumnFilters=function(i,e){e===void 0&&(e=!0);var t=ot.getColumn(this._view,i);if(t instanceof Oe){for(var o=t.getActiveFilters(e),r=[],n=0,s=o.length;n<s;n++)r.push(o[n].toProxy());return r}return null},a.prototype.isFiltered=function(i){if(i){var e=ot.getColumn(this._view,i);return e instanceof Oe&&e.isFiltered()}var t=this._view.getFilteredColumns();return t&&t.length>0},a.prototype.autoFiltersRefresh=function(i,e){i=i?v.makeArray(i):this._view.getChildColumnNames(null);for(var t=0;t<i.length;t++){var o=ot.getColumn(this._view,i[t]);o instanceof Oe&&o.autoFilterRefresh(e)}},a.prototype.getValues=function(i){var e=this._view.getItem(i);return e?ot.getValues(this._view,e):null},a.prototype.getDisplayValues=function(i,e){var t=this._view.getItem(i);if(t)return ot.getDisplayValues(this._view,t,e)},a.prototype.getDisplayValuesOfRow=function(i,e){var t=this._view.getItemOfRow(i,!0);if(t)return ot.getDisplayValues(this._view,t,e)},a.prototype.getJsonRows=function(){return this._view.getJsonRows()},a.prototype.setValues=function(i,e,t){var o=this._view.getItem(i);o&&ot.setValues(this._view,o,e,t)},a.prototype.getValue=function(i,e){var t,o=this._view._clipboardManager;if(o.isPasting&&(t=o.appendingIndex.item).index!==i&&(t=null),t=t||this._view.getItem(i)){var r=typeof e=="string"?this._dataProvider.getFieldIndex(e):e;return t.getData(r)}return null},a.prototype.setValue=function(i,e,t){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(i,e,t)},a.prototype.getEditValue=function(){return this._view.getEditCellValue()},a.prototype.setEditValue=function(i,e,t){t===void 0&&(t=!0),this._view.setEditCellValue(i,e,t)},a.prototype.registerCustomRenderer=function(i,e){this._view.registerCustomRenderer(i,e)},a.prototype.unregisterCustomRenderer=function(i){this._view.unregisterCustomRenderer(i)},a.prototype.existsCustomRenderer=function(i){return this._view.existsCustomRenderer(i)},a.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},a.prototype.addPopupMenu=function(i,e){this._view.addPopupMenu(i,e)},a.prototype.getPopupMenu=function(i){return this._view.getPopupMenu(i)},a.prototype.removePopupMenu=function(i){this._view.removePopupMenu(i)},a.prototype.setContextMenu=function(i){return this._view.setContextMenu(i)},a.prototype.getSelection=function(i){i===void 0&&(i=0);var e=this._view.getSelection(i);return e?e.toProxy():null},a.prototype.getSelections=function(){var i=this._view.getSelections(),e=[];return i.forEach(function(t){e.push(t.toProxy())}),e},a.prototype.setSelection=function(i,e){i.style&&typeof i.style=="string"&&(this._view.clearAddSelection(!0,!1,e),this.addSelection(i,e))},a.prototype.addSelection=function(i,e){if(e===void 0&&(e=!0),i.style&&typeof i.style=="string"){var t,o,r=v.valueIn(i.style,c.SelectionStyle)?i.style:c.SelectionStyle.BLOCK,n=0,s=0;if(i.hasOwnProperty("startItem"))s=n=i.startItem;else if(i.hasOwnProperty("startRow"))s=n=this._view.getItemIndexOfRow(i.startRow);else if(r!="singleColumn"&&r!="columns")return;if(i.hasOwnProperty("endItem"))s=i.endItem;else if(i.hasOwnProperty("endRow"))s=this._view.getItemIndexOfRow(i.endRow);else if(r!="singleColumn"&&r!="columns")return;t=ot.getColumn(this._view,i.startColumn),o=ot.getColumn(this._view,i.endColumn);var l=new le(this._view,n,t),u=new le(this._view,s,o);this._view.selections.add(l,u,r,e)}},a.prototype.clearSelection=function(){this._view.clearAddSelection()},a.prototype.removeSelection=function(i){var e=this._view.selections.getItem(i);e&&this._view.selections.remove(e)},a.prototype.getSelectedItems=function(i){return this._view.getSelectedItemIndices(i)},a.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},a.prototype.deleteSelection=function(i){this._view.deleteSelection(i)},a.prototype.eraseSelection=function(i){this._view.eraseSelection(i)},a.prototype.getSelectionData=function(i,e){return i===void 0&&(i=-1),e===void 0&&(e=0),e>=0&&e<this._view.selections.count?this._view.selections.getItem(e).getData(i):null},a.prototype.getSelectionsData=function(){var i=[],e=this._view.selections.getItems(),t={};return e.forEach(function(o){o.getData(-1).forEach(function(r){var n=r.__rowId;n>=0&&(t[n]=t[n]||{},v.extendObj(r,t[n]))})}),Object.keys(t).forEach(function(o){i.push(t[o])}),i},a.prototype.copyToClipboard=function(i,e){return e===void 0&&(e=!0),this._view.toClipboard(i,e)},a.prototype.commitEditor=function(i,e){i===void 0&&(i=!0),e===void 0&&(e=!0),this._view.commitEditor(i,e)},a.prototype.commit=function(i){return this._view.commit(i)},a.prototype.cancel=function(){return this._view.cancel()},a.prototype.fillEditSearchItems=function(i,e,t,o,r){var n=ot.getColumn(this._view,i);this._view.fillEditSearchItems(n,e,t,o,r)},a.prototype.isItemEditing=function(){return this._view.isItemEditing()},a.prototype.isEditing=function(){return this._view.isEditing()},a.prototype.showEditor=function(i){i===void 0&&(i=!1),this._view.showEditor(null,null,i)},a.prototype.hideEditor=function(){this._view.hideEditor(!0)},a.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},a.prototype.setValidations=function(i){this._view.validations=i},a.prototype.validateCells=function(i,e,t){return e===void 0&&(e=!0),t===void 0&&(t=!1),this._view.validateCells(i,e,t)},a.prototype.getInvalidCells=function(i){var e;return i!=null&&(e=this.getDataRow(i))<0?null:this._view.getInvalidCells(e)},a.prototype.getInvalidCellsOfRow=function(i){return i==null?null:this._view.getInvalidCells(i)},a.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},a.prototype.getEditingItem=function(){var i=this._view.getEditItem();return i?(i.getRowObject(),{itemIndex:i.index,dataRow:i.dataRow,values:i.getRowObject()}):null},a.prototype.getItemState=function(i){var e=this._view.getItem(i);if(e){var t=e.itemState;return t==c.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==e.index&&(t=c.ItemState.FOCUSED),t}return null},a.prototype.showToast=function(i,e){this._view.showToast(i,e)},a.prototype.hideToast=function(i){this._view.hideToast(i)},a.prototype.setLookups=function(i){this._view.setLookups(i)},a.prototype.addLookupSource=function(i){this._view.addLookupSource(i)},a.prototype.removeLookupSource=function(i){this._view.removeLookupSource(i)},a.prototype.existsLookupData=function(i,e){return this._view.existsLookupData(i,e)},a.prototype.fillLookupData=function(i,e){this._view.fillLookupData(i,e)},a.prototype.clearLookupData=function(i){this._view.clearLookupData(i)},a.prototype.isCheckable=function(i){return this._view.isCheckable(i)},a.prototype.isCheckableOfRow=function(i){return this._view.isCheckableOfRow(i)},a.prototype.setCheckable=function(i,e){this._view.setCheckable(i,e)},a.prototype.setCheckableOfRow=function(i,e){this._view.setCheckableOfRow(i,e)},a.prototype.isCheckedItem=function(i){return this._view.isCheckedItem(i)},a.prototype.isCheckedRow=function(i){return this._view.isCheckedRow(i)},a.prototype.checkItem=function(i,e,t,o){e===void 0&&(e=!0),o===void 0&&(o=!0),this._view.checkItem(i,e,t,o)},a.prototype.checkRow=function(i,e,t,o){e===void 0&&(e=!0),o===void 0&&(o=!0),this._view.checkRow(i,e,t,o)},a.prototype.checkItems=function(i,e,t){e===void 0&&(e=!0),t===void 0&&(t=!0),this._view.checkItems(i,e,t)},a.prototype.checkRows=function(i,e,t){e===void 0&&(e=!0),t===void 0&&(t=!0),this._view.checkRows(i,e,t)},a.prototype.checkAll=function(i,e,t,o){i===void 0&&(i=!0),t===void 0&&(t=!0),o===void 0&&(o=!0),this._view.checkAll(i,e,t,o)},a.prototype.setAllCheck=function(i,e){i===void 0&&(i=!0),e===void 0&&(e=!0),this._view.setAllCheck(i,e)},a.prototype.isAllChecked=function(){return this._view.allChecked},a.prototype.resetCheckables=function(i){this._view.resetCheckables(),i&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},a.prototype.applyCheckables=function(){this._view.applyCheckables()},a.prototype.setCheckableExpression=function(i,e){e===void 0&&(e=!0),this._view.checkBar.checkableExpression=i,e&&this._view.applyCheckables()},a.prototype.setCheckableCallback=function(i,e){e===void 0&&(e=!0),this._view.checkBar.checkableCallback=i,e&&this._view.applyCheckables()},a.prototype.getSummary=function(i,e){var t=this._view.summarizer,o=typeof i=="string"?this._dataProvider.getFieldIndex(i):i;if(o==-1)return null;switch(e){case"count":return t.getCount(o);case"sum":return t.getSum(o);case"max":return t.getMax(o);case"min":return t.getMin(o);case"avg":return t.getAvg(o);case"var":return t.getVar(o);case"varp":return t.getVarp(o);case"stdev":return t.getStdev(o);case"stdevp":return t.getStdevp(o);case"datacount":return t.getDataCount(o);case"dataavg":return t.getDataAvg(o)}},a.prototype.getModel=function(i,e){var t=this._view.getItem(i);return t&&ot.getItemProxy(t,e)},a.prototype.getModelAs=function(i,e,t){var o=this._view.getItem(i);switch(e){case"row":o=v.cast(o,Tt);break;case"group":o=v.cast(o,ft);break;case"footer":o=v.cast(o,Kt);break;case"tree":o=v.cast(o,ht)}return o?ot.getItemProxy(o,t):null},a.prototype.getGroupModel=function(i,e){var t=this._view.getItem(i);return!t||t instanceof ft||(t=t.parent instanceof zo?null:t.parent),t?ot.getItemProxy(t,e):null},a.prototype.getRootModel=function(i,e){if(!i||!this._view.isTree()&&!this._view.rowGrouped)return null;if(i){var t=this._view.getItem(i.index);if(t)return t.root?ot.getItemProxy(t.root,e):null}return null},a.prototype.getModels=function(i,e){if(i=v.makeArray(i)){for(var t=[],o=0,r=i.length;o<r;o++){var n=this._view.getItem(i[o]);n&&t.push(ot.getItemProxy(n,e))}return t}},a.prototype.getModelOfRow=function(i,e){var t=this._view.getItemOfRow(i,!1);return t?ot.getItemProxy(t,e):null},a.prototype.getModelsOfRows=function(i,e){if(i=v.makeArray(i)){for(var t=[],o=0,r=i.length;o<r;o++){var n=this._view.getItemOfRow(i[o],!1);n&&t.push(ot.getItemProxy(n,e))}return t}},a.prototype.getParentModel=function(i,e){var t;return i&&(t=this._view.getItemOfModel(i)),!t||t instanceof Hr||!this._view.isTree()&&!this._view.rowGrouped?null:ot.getItemProxy(t.parent,e)},a.prototype.getChildModel=function(i,e,t){var o=i&&this._view.getItemOfModel(i);if(o instanceof ft){var r=o.getItem(e);return r?ot.getItemProxy(r,t):null}return null},a.prototype.getChildModels=function(i,e){var t=i&&this._view.getItemOfModel(i);if(t instanceof ft){for(var o=[],r=0,n=t.count;r<n;r++)o.push(ot.getItemProxy(t.children[r],e));return o}return null},a.prototype.getDescendantModels=function(i,e){var t=i&&this._view.getItemOfModel(i);if(t instanceof ft){var o=t.getDescendants(!1),r=[];if(o)for(var n=0,s=o.length;n<s;n++)r.push(ot.getItemProxy(o[n],e));return r}return null},a.prototype.getGroupSummary=function(i,e,t){if(i){var o=this._view.getItemOfModel(i),r=typeof e=="string"?this._dataProvider.getFieldIndex(e):e;if(o instanceof ft&&r>=0){var n={count:o.getNumber(r),sum:o.getSum(r),max:o.getMax(r),min:o.getMin(r),avg:o.getAvg(r),datacount:o.getDataCount(r),dataavg:o.getSum(r)/o.getDataCount(r)};return t&&(n.var=o.getVar(r,1),n.varp=o.getVar(r,0),n.stdev=o.getStdev(r,1),n.stdevp=o.getStdev(r,0)),n}}return null},a.prototype.getDistinctItemValues=function(i,e,t){return e===void 0&&(e=-1),t===void 0&&(t=c.SortDirection.ASCENDING),i=this._dataProvider.getFieldIndex(i),this._view.getDistinctItemValues(i,e,t)},a.prototype.showProgress=function(){this._view.showProgress()},a.prototype.setProgress=function(i,e,t,o){this._view.setProgress(i,e,t,o)},a.prototype.closeProgress=function(){this._view.closeProgress()},a.prototype.showLoading=function(i){this._view.showLoading(i)},a.prototype.closeLoading=function(){this._view&&this._view.hideLoading()},a.prototype.searchItem=function(i){return i?this._view.searchItem(i):-1},a.prototype.searchCell=function(i){return i?this._view.searchCell(i):null},a.prototype.resetSize=function(i){this._view.container.resetSize(i)},a.prototype.closeList=function(){this._view.closePopups()},a.prototype.exportGrid=function(i){if(i.type==="csv"){var e=new Ys(i);new Qm().export(this._view,e)}else i.type==="excel"&&(e=new tb(this._view,i),new Zb().export(this._view,e))},a.prototype.scrollPage=function(i){this._view._vscrollBar._doScroll(Wt.PAGE,i,0)},a.prototype.getTopItem=function(){return this._view.topIndex},a.prototype.setTopItem=function(i){i===void 0&&(i=0),this._view.topIndex=i},a.prototype.getLeftPos=function(){return this._view.leftPos},a.prototype.setLeftPos=function(i){this._view.leftPos=i},a.prototype.setLeftCol=function(i){var e;if(typeof i=="string"){var t=this._view.layoutByName(i);t&&(e=t._col)}else e=i;this._view.leftCell=e},a.prototype.getContainer=function(){return this._view.container._containerDiv},a.prototype.requestPrepareEditor=function(){this._view.requestPrepareEditor()},a.prototype.destroy=function(){return this.dispose()},a.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},a.prototype.undo=function(){return this._view.undo()},a.prototype.redo=function(){return this._view.redo()},a.prototype.clearCommandStack=function(i){i===void 0&&(i=!0),this._view.clearCommandStack(i)},a.prototype._getView=function(){return this._view},a}(),yd=function(a){function i(e,t,o){var r=a.call(this,e,t,o)||this;return r.onPageChanging=null,r.onPageChanged=null,r.onPageCountChanged=null,r.onGrouping=null,r.onGrouped=null,r.onExpanding=null,r.onExpanded=null,r.onCollapsing=null,r.onCollapsed=null,t&&(r.shadowDom=r._view._shadowDom),r}return w(i,a),Object.defineProperty(i.prototype,"rowGroup",{get:function(){return this._view.rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupPanel",{get:function(){return this._view.groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(e){this._view._rs.filterMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(e){this._view._rs.inclusiveFiltering=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(e){this._view._rs.groupSummaryMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupingOptions",{get:function(){return this._view.groupingOptions},enumerable:!1,configurable:!0}),i.prototype.getDataSource=function(){return this._dataDelegator},i.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},i.prototype.setRowGroup=function(e){this._view.rowGroup.assignFrom(e)},i.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},i.prototype.setGroupPanel=function(e){this._view.groupPanelView.assignFrom(e)},i.prototype.getOptions=function(){var e=a.prototype.getOptions.call(this),t=this._view._rs;return e.filterOr=t.inclusiveFiltering,e.groupSummaryMode=t.groupSummaryMode,e.filterMode=t.filterMode,e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},i.prototype.setOptions=function(e){a.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},i.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},i.prototype.setGroupingOptions=function(e){this._view.groupingOptions.assignFrom(e)},i.prototype.groupBy=function(e,t,o){this._view.groupByFieldNames(e,t,o)},i.prototype.isGrouped=function(){return this._view.rowGrouped},i.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},i.prototype.getGroupFields=function(){return this._view.rowGroupFields},i.prototype.getGroupFieldNames=function(e){e===void 0&&(e=!0);var t=this._view.rowGroupFields;if(t){var o=this._dataProvider;if(o){for(var r=[],n=0,s=t.length;n<s;n++)r.push(e?o.getOrgFieldName(t[n]):o.getFieldName(t[n]));return r}return t}return null},i.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},i.prototype.getGroupLevel=function(e){return(e=this._dataProvider.getFieldIndex(e))>-1?this._view.getGroupLevel(e):-1},i.prototype.getGroupIndex=function(e){var t=this._view.getItem(e);if(t){var o=t.parent;return o?o.index:-1}return-1},i.prototype.isGroupItem=function(e){return this._view.getItem(e)instanceof ft},i.prototype.isParentVisible=function(e){var t=this._view.getItem(e);return t&&t.parent&&t.parent.visible},i.prototype.expandGroup=function(e,t,o,r){r===void 0&&(r=0);var n=this._view.getItem(e);n&&n instanceof ft&&this._view.expand(n,t,o,r)},i.prototype.collapseGroup=function(e,t,o){var r=this._view.getItem(e);r&&r instanceof ft&&this._view.collapse(r,t,o)},i.prototype.expandParent=function(e,t,o,r){r===void 0&&(r=0);var n=this._view.getItem(e);if(n){var s=n.parent;s&&s.expandable&&(s.collapsed||o)&&this._view.expand(s,t,o,r)}},i.prototype.collapseParent=function(e,t,o){var r=this._view.getItem(e);if(r){var n=r.parent;n&&n.collapsable&&n instanceof ft&&this._view.collapse(n,t,o)}},i.prototype.expandAll=function(e,t){e===void 0&&(e=!0),this._view.itemCount>0&&this._view.expandAll(e,t)},i.prototype.collapseAll=function(e){this._view.itemCount>0&&this._view.collapseAll(e)},i.prototype.getGroupSummaryValue=function(e,t,o){if(e&&this._view.rowGrouped){var r=this._view.getItemOfModel(e),n=ot.getColumn(this._view,t);if(r instanceof Ht){var s=r._allFooters;return(o=r.allFooterCount===1?0:o)!=null&&r._allFooters[o]?(r=r._allFooters[o],Lo.getValue(r,n)):s.map(function(l){return Lo.getValue(l,n)})}if(r instanceof Kt)return Lo.getValue(r,n)}return null},i.prototype.layoutExpandAll=function(e){this._view.layoutExpandAll(!0,e)},i.prototype.layoutCollapseAll=function(e){this._view.layoutExpandAll(!1,e)},i.prototype.beginInsertRow=function(e,t){e===void 0&&(e=-1),this._view.insertAt(e,t)},i.prototype.beginAppendRow=function(){this._view.append()},i.prototype.beginUpdateRow=function(e){if(this._view.focusedIndex){var t=this._view.focusedIndex.clone();e!==void 0&&(t.itemIndex=e),this._view.edit(t)}},i.prototype.setPaging=function(e,t,o){t===void 0&&(t=10),o===void 0&&(o=-1),this._view.setPaging(e,t,o)},i.prototype.getPage=function(){return this._view.page},i.prototype.setPage=function(e,t){t===void 0&&(t=-1),this._view.setPage(e,t)},i.prototype.getPageCount=function(){return this._view.pageCount},i.prototype.setPageCount=function(e){this._view.pageCount=e},i.prototype.getPageOfDataRow=function(e){return this._view.getPageOfDataRow(e)},i.prototype.getCheckedItems=function(e){return e===void 0&&(e=!0),this._view.getCheckedItemIndices(!e)},i.prototype.getCheckedRows=function(e,t,o){return e===void 0&&(e=!0),this._view.getCheckedRows(e,t,o)},i.prototype.getMergedItems=function(e,t,o,r){return o===void 0&&(o=!0),r===void 0&&(r=!0),this._view.getMergedItems(e,t,o,r)},i.prototype._createView=function(e,t,o){return(this._container=new gd(e,this,t,o)).gridView},i.prototype._createListener=function(e){return new Qb(this,e)},i}(Jl),md=function(a){function i(){var e=a!==null&&a.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}return w(i,a),Object.defineProperty(i.prototype,"treeOptions",{get:function(){return this._view.treeOptions},enumerable:!1,configurable:!0}),i.prototype.getDataSource=function(){return this._dataDelegator},i.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},i.prototype.setTreeOptions=function(e){this._view.treeOptions.assignFrom(e)},i.prototype.getParent=function(e){var t=this._view.getItem(e);return t?t.parentIndex:-1},i.prototype.getChildren=function(e){var t=this._view.getItem(e);if(t){for(var o=[],r=0,n=t.count;r<n;r++)o.push(t.getItem(r).index);return o}return null},i.prototype.getDescendants=function(e){var t=this._view.getItem(e);if(t){for(var o=[],r=t.getDescendants(!1)||[],n=0,s=r.length;n<s;n++)o.push(r[n].index);return o}return null},i.prototype.getAncestors=function(e,t){t===void 0&&(t=!0);var o=this._view.getItem(e);if(o){for(var r=[],n=o.getAncestors(),s=0,l=n.length;s<l;s++)!t&&n[s]instanceof ws||r.push(n[s].index);return r}return null},i.prototype.expand=function(e,t,o,r){r===void 0&&(r=0);var n=this._view.getItem(e);n&&this._view.expand(n,t,o,r)},i.prototype.expandModel=function(e,t,o,r){r===void 0&&(r=0);var n=this._view.getItemOfModel(e);n&&this._view.expand(n,t,o,r)},i.prototype.collapse=function(e,t){var o=this._view.getItem(e);o&&this._view.collapse(o,t)},i.prototype.collapseModel=function(e,t){var o=this._view.getItemOfModel(e);o&&this._view.collapse(o,t)},i.prototype.expandAll=function(e){e===void 0&&(e=0),this._view.expandAll(e)},i.prototype.collapseAll=function(){this._view.collapseAll()},i.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},i.prototype.getCheckedRows=function(e){return this._view.getCheckedRowIds(e)},i.prototype.checkChildren=function(e,t,o,r,n,s){s===void 0&&(s=!0);var l=this._view.getItem(e);l&&this._view.checkChildren(l,t,o,r,n,s)},i.prototype._createView=function(e,t,o){return(this._container=new Yb(e,this,t,o)).gridView},i.prototype._createListener=function(e){return new ev(this,e)},i}(Jl),bd=function(a){function i(e,t){var o=a.call(this)||this;return o._del=e,o._view=t,o._view.addListener(o),o}return w(i,a),i.prototype.dispose=function(){return this._view.removeListener(this),this._view=null,this._del=null},i.prototype.onGridBaseCurrentChanging=function(e,t,o){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,t.proxy(),o.proxy()):(v.log("onCurrentChanging",t,o),!0)},i.prototype.onGridBaseCurrentChanged=function(e,t){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,t.proxy()):v.log("onCurrentChanged",t)},i.prototype.onGridBaseCurrentRowChanged=function(e,t,o){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,t,o):v.log("onCurrentRowChanged",t,o)},i.prototype.onGridBaseValidateCell=function(e,t,o,r){if(this._del.onValidateColumn){var n=t.itemIndex,s=t.item&&t.item.dataRow,l=this._del.onValidateColumn(this._del,t.column,o,r,n,s);if(l&&l.level&&l.message)throw new Rt(l.level,l.message,t.column,l.message);if(typeof l=="string"||typeof l=="number")throw new Rt(c.ValidationLevel.ERROR,l,t.column,l)}},i.prototype.onGridBaseValidateRow=function(e,t,o,r){if(this._del.onValidateRow){var n=this._del.onValidateRow(this._del,t.index,t.dataRow,o,r);if(n&&n.level&&n.message)throw new Rt(n.level,n.message,null,n.message);if(typeof n=="string"||typeof n=="number")throw new Rt(c.ValidationLevel.ERROR,n,null,n)}},i.prototype.onGridBaseValidationFail=function(e,t,o,r){if(!this._del.onValidationFail)return r;var n=this._del.onValidationFail(this._del,t,o,{level:r.level,message:r.message});return n&&n.level&&n.message?(r.level=n.level,r.message=n.message,r.userMessage=n.message,r):typeof n=="string"||typeof n=="number"?(r.message=n,r.userMessage=n,r):void 0},i.prototype.onGridBaseCellClicked=function(e,t){this._del.onCellClicked?this._del.onCellClicked(this._del,t):v.log("onCellClicked: ",t)},i.prototype.onGridBaseCellDblClicked=function(e,t){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,t):v.log("onCellDblClicked: ",t)},i.prototype.onGridBaseCellItemClicked=function(e,t,o){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,t.toProxy(),o):v.log("onCellItemClicked: ",o)},i.prototype.onGridBaseColumnCheckedChanged=function(e,t,o){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,t,o):v.log("onColumnCheckedChanged: ("+t.name+", "+o+")")},i.prototype.onGridBaseMenuItemClicked=function(e,t,o){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,t.toProxy(),o):v.log("onMenuItemClicked: ",t.toProxy(),o)},i.prototype.onGridBaseContextMenuPopup=function(e,t,o,r,n,s){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,t,o,r,n,s):v.log("onContextMenuPopup: x = ",t,", y = ",o,", clickData =",r)},i.prototype.onGridBaseContextMenuItemClicked=function(e,t,o){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,t.toProxy(),o):v.log("onContextMenuItemClicked: ",t.toProxy(),o)},i.prototype.onGridBaseCellButtonClicked=function(e,t){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,t.proxy(),t.column):v.log("onCellButtonClicked: ",t)},i.prototype.onGridBaseScrollToBottom=function(e){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):v.log("onScrollToBottom")},i.prototype.onGridBaseTopIndexChanged=function(e,t){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,t):v.log("onTopItemIndexChanged: "+t)},i.prototype.onGridBaseLeftPosChanged=function(e,t){this._del.onLeftPosChanged?this._del.onLeftPosChanged(this._del,t):v.log("onLeftPosChanged: "+t)},i.prototype.onGridBaseTopIndexChanging=function(e,t,o,r,n){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,t,o,r,n):v.log("onTopItemIndexChanging: ",t,o,r,n)},i.prototype.onGridBaseRowsDeleting=function(e,t){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,t):(v.log("onRowsDeleting:",t),!0)},i.prototype.onGridBaseRowInserting=function(e,t,o){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,t,o);v.log("onRowInserting: "+t,o)},i.prototype.onGridBaseSelectionCleared=function(e){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):v.log("onSelectionCleared")},i.prototype.onGridBaseSelectionChanged=function(e,t){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,t):v.log("onSelectionChanged")},i.prototype.onGridBaseSelectionAdded=function(e,t){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,t):v.log("onSelectionAdded: ",t)},i.prototype.onGridBaseSelectionEnded=function(e,t){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,t):v.log("onSelectionEnded")},i.prototype.onGridBaseShowEditor=function(e,t,o,r){return this._del.onShowEditor?this._del.onShowEditor(this._del,t.proxy(),o,r):v.log("onShowEditor",t.proxy(),o,r)},i.prototype.onGridBaseShowEditCommand=function(e,t){return this._del.onShowEditCommand&&this._del.onShowEditCommand(this._del,t.proxy())},i.prototype.onGridBaseHideEditor=function(e,t){this._del.onHideEditor?this._del.onHideEditor(this._del,t.proxy()):v.log("onHideEditor: ",t.proxy())},i.prototype.onGridBaseEditChange=function(e,t,o){this._del.onEditChange?this._del.onEditChange(this._del,t.proxy(),o):v.log("onEditChange: "+o,t.proxy())},i.prototype.onGridBaseGetEditValue=function(e,t,o){this._del.onGetEditValue?this._del.onGetEditValue(this._del,t.proxy(),o):v.log("onGetEditValue: ",t,o)},i.prototype.onGridBaseEditCommit=function(e,t,o,r){return this._del.onEditCommit?this._del.onEditCommit(this._del,t.proxy(),o,r):(v.log("onEditCommit",t.proxy(),o,r),!0)},i.prototype.onGridBaseEditCanceled=function(e,t){this._del.onEditCanceled?this._del.onEditCanceled(this._del,t.proxy()):v.log("onEditCanceled",t.proxy())},i.prototype.onGridBaseItemEditCanceled=function(e,t){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,t.index,t.itemState):v.log("onItemEditCanceled: "+t.index+", "+t.itemState)},i.prototype.onGridBaseItemEditCancel=function(e,t){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,t.index,t.itemState):(v.log("onItemEditCancel: "+t.index+", "+t.itemState),!0)},i.prototype.onGridBaseEditSearch=function(e,t,o){this._del.onEditSearch?this._del.onEditSearch(this._del,t.proxy(),o):v.log("onEditSearch: "+o,t.proxy())},i.prototype.onGridBaseSearchCellButtonClick=function(e,t,o){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,t.proxy(),o):(v.log("onSearchCellButtonClick: "+o,t.proxy()),null)},i.prototype.onGridBaseCellEdited=function(e,t,o){return this._del.onCellEdited?this._del.onCellEdited(this._del,t.index,t.dataRow,o):v.log("onCellEdited: "+t.index+", "+t.dataRow+", "+o)},i.prototype.onGridBaseEditRowChanged=function(e,t,o,r,n){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,t.index,t.dataRow,o,r,n):v.log("onEditRowChanged: "+t.index+", "+t.dataRow+", "+o+", "+r+" => "+n)},i.prototype.onGridBaseEditRowPasted=function(e,t,o,r,n){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,t.index,t.dataRow,o,r,n):v.log("onEditRowPasted: "+t.index+", "+t.dataRow,o,r,n)},i.prototype.onGridBaseRowsPasted=function(e,t){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,t):v.log("onRowsPasted: ",t)},i.prototype.onGridBaseCellPasting=function(e,t,o){return this._del.onCellPasting?this._del.onCellPasting(this._del,t.proxy(),o):v.log("onCellPasting: ",t,o)},i.prototype.onGridBaseItemChecked=function(e,t,o){return this._del.onItemChecked?this._del.onItemChecked(this._del,t.index,o):v.log("onItemChecked",t.index,o)},i.prototype.onGridBaseItemsChecked=function(e,t,o){var r=ot.getItemIndices(t);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,r,o):v.log("onItemsChecked: "+o,r)},i.prototype.onGridBaseItemAllChecked=function(e,t){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,t):v.log("onItemAllChecked: "+t)},i.prototype.onGridBaseErrorClicked=function(e,t){this._del.onErrorClicked?this._del.onErrorClicked(this._del,t):v.log("onErrorClicked: "+t)},i.prototype.onGridBaseSorting=function(e,t,o){for(var r=[],n=0,s=o.length;n<s;n++)r.push(o[n]?o[n].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,t,o):v.log("onSorting: ",t,r)},i.prototype.onGridBaseSortingChanged=function(e){this._del.onSortingChanged?this._del.onSortingChanged(this._del):v.log("onSortingChanged")},i.prototype.onGridBaseFiltering=function(e){return this._del.onFiltering?this._del.onFiltering(this._del):v.log("onFiltering")},i.prototype.onGridBaseFilteringChanged=function(e,t,o){var r=t?t.getOwner():null,n=o?o.toProxy():null,s=r?r.name:"",l=o?o.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,r,n):v.log("onFilteringChanged: "+s+", "+l)},i.prototype.onGridBaseWheel=function(e,t){return this._del.onWheel?this._del.onWheel(this._del,t):v.keyLog("onWheel: "+t)},i.prototype.onGridBaseKeyDown=function(e,t){return this._del.onKeyDown?this._del.onKeyDown(this._del,t):v.keyLog("onKeyDown: "+t)},i.prototype.onGridBaseKeyPress=function(e,t){this._del.onKeyPress?this._del.onKeyPress(this._del,t):v.keyLog("onKeyPress: "+t)},i.prototype.onGridBaseKeyUp=function(e,t){this._del.onKeyUp?this._del.onKeyUp(this._del,t):v.keyLog("onKeyUp: "+t)},i.prototype.onGridBaseShowTooltip=function(e,t,o){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,t.proxy(),o):(v.log("onShowTooltip: "+o,t.proxy()),o)},i.prototype.onGridBaseShowHeaderTooltip=function(e,t,o,r){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,t,o,r):(v.log("onShowHeaderTooltip: "+t.name+", "+o),o)},i.prototype.onGridBaseColumnPropertyChanged=function(e,t,o,r,n){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,t,o,r,n):v.log("onColumnPropertyChanged: "+t.name+", "+o+", "+r+", "+n)},i.prototype.onGridBaseLayoutPropertyChanged=function(e,t,o,r,n){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,t,o,r,n):v.log("onLayoutPropertyChanged: "+t.name+", "+o+", "+r+", "+n)},i.prototype.onGridBaseGridActivated=function(e){this._del.onGridActivated?this._del.onGridActivated(this._del):v.log("onGridActivated")},i.prototype.onGridBasePaste=function(e,t,o){if(this._del.onPaste)return this._del.onPaste(this._del,t.proxy(),o);v.log("onPaste: ",t)},i.prototype.onGridBaseCopy=function(e,t,o){var r;if(Array.isArray(t)?(r=[],t.forEach(function(n){r.push(n.toProxy())})):r=t.toProxy(),this._del.onCopy)return this._del.onCopy(this._del,r,o);v.log("onCopy: ",r)},i.prototype.onGridBasePasted=function(e){return this._del.onPasted?this._del.onPasted(this._del):v.log("onPasted")},i.prototype.onGridBaseCommandStackChanged=function(e,t,o){this._del.onCommandStackChanged?this._del.onCommandStackChanged(e.handler,t,o):v.log("onCommandStackChanged: undoable "+t+", redoable "+o)},i.prototype.onGridBaseDataLoadComplated=function(e){this._del.onDataLoadComplated?this._del.onDataLoadComplated(e.handler):v.log("onDataLoadComplated: ")},i.prototype.onGridBaseLayoutExpanding=function(e,t){return this._del.onLayoutExpanding?this._del.onLayoutExpanding(e.handler,t):(v.log("onLayoutExpanding"),!0)},i.prototype.onGridBaseLayoutExpanded=function(e,t){this._del.onLayoutExpanded?this._del.onLayoutExpanded(e.handler,t):v.log("onLayoutExpanded")},i.prototype.onGridBaseLayoutCollapsing=function(e,t){return this._del.onLayoutCollapsing?this._del.onLayoutCollapsing(e.handler,t):(v.log("onLayoutCollapsing"),!0)},i.prototype.onGridBaseLayoutCollapsed=function(e,t){this._del.onLayoutCollapsed?this._del.onLayoutCollapsed(e.handler,t):v.log("onLayoutCollapsed")},i}(Ua),Qb=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.onGridViewPageChanging=function(e,t){return this._del.onPageChanging?this._del.onPageChanging(this._del,t):(v.log("onPageChanging:"+t),!0)},i.prototype.onGridViewPageChanged=function(e,t){this._del.onPageChanged?this._del.onPageChanged(this._del,t):v.log("onPageChanged:"+t)},i.prototype.onGridViewPageCountChanged=function(e,t){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,t):v.log("onPageCountChanged:"+t)},i.prototype.onGridViewGrouping=function(e,t){return this._del.onGrouping?this._del.onGrouping(this._del,t):(v.log("onGrouping",t),!0)},i.prototype.onGridViewGrouped=function(e){this._del.onGrouped?this._del.onGrouped(this._del):v.log("onGrouped")},i.prototype.onGridViewExpanding=function(e,t){return this._del.onExpanding?this._del.onExpanding(this._del,t.index):(v.log("onExpanding: "+t.index),!0)},i.prototype.onGridViewExpanded=function(e,t){this._del.onExpanded?this._del.onExpanded(this._del,t.index):v.log("onExpanded: "+t.index)},i.prototype.onGridViewCollapsing=function(e,t){return this._del.onCollapsing?this._del.onCollapsing(this._del,t.index):(v.log("onCollapsing: "+t.index),!0)},i.prototype.onGridViewCollapsed=function(e,t){this._del.onCollapsed?this._del.onCollapsed(this._del,t.index):v.log("onCollapsed: "+t.index)},i}(bd),ev=function(a){function i(){return a!==null&&a.apply(this,arguments)||this}return w(i,a),i.prototype.onTreeViewExpanding=function(e,t){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,t.index,t.rowId):(v.log("TreeItem expanding: "+t),!0)},i.prototype.onTreeViewExpanded=function(e,t){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,t.index,t.rowId):v.log("TreeItem expanded: "+t)},i.prototype.onTreeViewCollapsing=function(e,t){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,t.index,t.rowId):(v.log("TreeItem collapsing: "+t),!0)},i.prototype.onTreeViewCollapsed=function(e,t){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,t.index,t.rowId):v.log("TreeItem collapsed: "+t)},i.prototype.onTreeViewChanged=function(e,t){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,t.index,t.rowId):v.log("TreeItem item changed: "+t)},i}(bd),tv=function(){function a(){}return a.getVersion=function(){return I.version},a.getLicenseType=function(){return I.license},a.getLicenseCode=function(){return I.code},a.getActiveGrid=function(){var i=xr.getActiveGrid();return i&&i.handler},a.getGridInstance=function(i){var e=xr.getGridInstance(i);return e&&e.handler},a.exportGrid=function(i){var e=i&&i.exportGrids;if(e){for(var t=this.getActiveGrid(),o=void 0,r=0;r<e.length;r++){var n=e[r].grid;if(n===t){o=n;break}o=o||n}if(o)return void o.exportGrid(i)}throw new Error("multiExport must have exportGrids.")},a.setDebug=function(i,e,t){v.setDebugging(i,e,t)},a.setMobile=function(i){v.setMobile(i)},a.setTablet=function(i){v.setTablet(i)},a.setSlotMode=function(i){v.setSlotMode(i)},a.setLocale=function(i){Lr.setLocale(i),xr.refreshGrids()},a.setDefault=function(i,e){Re.setDefaultOptions(i,e)},a.setLicenseKey=function(i){I.code=i},Object.defineProperty(a,"GridView",{get:function(){return yd},enumerable:!1,configurable:!0}),Object.defineProperty(a,"TreeView",{get:function(){return md},enumerable:!1,configurable:!0}),Object.defineProperty(a,"LocalDataProvider",{get:function(){return fh},enumerable:!1,configurable:!0}),Object.defineProperty(a,"LocalTreeDataProvider",{get:function(){return _h},enumerable:!1,configurable:!0}),a.registerCustomRenderer=function(i,e,t){Yc.registryCustomRenderer(i,e,t)},Object.defineProperty(a,"CustomCellRendererImpl",{get:function(){return Ml},enumerable:!1,configurable:!0}),a}();c.PolygonShape=void 0,function(a){a.RECTANGLE="rectangle",a.TRIANLGE="triangle",a.INVERTED_TRIANLGE="itriangle",a.DIAMOND="diamond",a.UP_ARROW="uparrow",a.DOWN_ARROW="downarrow",a.LEFT_ARROW="leftarrow",a.RIGHT_ARROW="rightarrow",a.PLUS="plus",a.MINUS="minus",a.EQUAL="equal",a.STAR="star"}(c.PolygonShape||(c.PolygonShape={})),c.CustomCellRendererImpl=Ml,c.DataProviderBase=za,c.GridBase=Jl,c.GridView=yd,c.LocalDataProvider=fh,c.LocalTreeDataProvider=_h,c.TreeView=md,c.VisualObject=Yo,c.default=tv,Object.defineProperty(c,"__esModule",{value:!0})})})(Ou,Ou.exports);var V1=Ou.exports;const j1=$1(V1);j1.setLicenseKey("upVcPE+wPOmtLjqyBIh9RkM/nBOseBrflwxYpzGZyYnR7qAIX78NqUtfo3lzwa+LSL3Zk1LV8emnNNImgVXI1z4FYX8iDcVsNTakk0yR9UcUfDUw29zw/CqQNVtxmmYt");const kf=bw(LC);kf.use(B1);kf.mount("#app");export{Bi as F,Ot as a,at as b,Io as c,In as d,so as e,G1 as f,N0 as g,yf as h,H1 as i,B0 as j,V1 as m,Wp as n,u0 as o,$v as r,yt as t,Vo as u,Xt as w};
