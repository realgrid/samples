/** 
 * RealGridJS v2.0.1.0001
 * Copyright (C) 2013-2020 WooriTech Inc.
 * All Rights Reserved.
 */
var RealGridJS=function(){"use strict";var he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var W=e(function(t,e){var i,o,r,n,s,a,l,u,h,c;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.ValueType||(e.ValueType={})).TEXT="text",i.NUMBER="number",i.BOOLEAN="boolean",i.DATETIME="datetime",i.OBJECT="object",i.CHAR="char",i.UNUM="unum",i.INT="int",i.UINT="uint",i.DATE="date",(o=e.SortDirection||(e.SortDirection={})).ASCENDING="ascending",o.DESCENDING="descending",(r=e.SortCase||(e.SortCase={})).SENSITIVE="sensitive",r.INSENSITIVE="insensitive",(n=e.PagingSource||(e.PagingSource={})).ROWS="rows",n.ITEMS="items",(s=e.SortMode||(e.SortMode={})).AUTO="auto",s.EXPLICIT="explicit",(a=e.FilterMode||(e.FilterMode={})).AUTO="auto",a.EXPLICIT="explicit",(u=l=e.RowGroupAdornments||(e.RowGroupAdornments={})).NONE="none",u.HEADER="header",u.FOOTER="footer",u.SUMMARY="summary",u.BOTH="both",e.isHeaderAdornment=function(t){return t==l.BOTH||t==l.HEADER},e.isFooterAdornment=function(t){return t==l.BOTH||t==l.FOOTER},e.isFooterOnlyAdornment=function(t){return t==l.FOOTER||t==l.SUMMARY},(h=e.ValidationMode||(e.ValidationMode={})).ALWAYS="always",h.UPDATE="update",h.INSERT="insert",(c=e.ValidationLevel||(e.ValidationLevel={})).ERROR="error",c.WARNING="warning",c.INFO="info",c.IGNORE="ignore";var p,d,_,f,y,m,g,b,v,C,w,E,x,I,O,S,D,R,P={error:1,warning:2,info:3,ignore:4};e.ValidationLevel_compare=function(t,e){return P[t]-P[e]},(p=e.SummaryMode||(e.SummaryMode={})).NONE="none",p.AGGREGATE="aggregate",p.STATISTICAL="statistical",(d=e.SubTextLocation||(e.SubTextLocation={})).DEFAULT="default",d.NONE="none",d.LEFT="left",d.RIGHT="right",d.UPPER="upper",d.LOWER="lower",d.LEFT_FILL="leftFill",d.RIGHT_FILL="rightFill",d.UPPER_FILL="upperFill",d.LOWER_FILL="lowerFill",(_=e.ColumnHeaderItemLocation||(e.ColumnHeaderItemLocation={})).NONE="none",_.LEFT_EDGE="leftEdge",_.RIGHT_EDGE="rightEdge",_.TOP_EDGE="topEdge",_.BOTTOM_EDGE="bottomEdge",_.LEFT="left",_.RIGHT="right",_.TOP="top",_.BOTTOM="bottom",_.CENTER="center",(f=e.ClickBehavior||(e.ClickBehavior={})).NONE="none",f.SORT="sort",(y=e.BlankState||(e.BlankState={})).NONE="none",y.HEAD="head",y.BODY="body",y.TAIL="tail",(m=e.GridFitStyle||(e.GridFitStyle={})).NONE="none",m.EVEN="even",m.EVEN_FILL="evenFill",m.FILL="fill",(g=e.Keys||(e.Keys={}))[g.BACK=8]="BACK",g[g.TAB=9]="TAB",g[g.ENTER=13]="ENTER",g[g.ESC=27]="ESC",g[g.ESCAPE=27]="ESCAPE",g[g.SPACE=32]="SPACE",g[g.PAGEUP=33]="PAGEUP",g[g.PAGEDOWN=34]="PAGEDOWN",g[g.END=35]="END",g[g.HOME=36]="HOME",g[g.LEFT=37]="LEFT",g[g.UP=38]="UP",g[g.RIGHT=39]="RIGHT",g[g.DOWN=40]="DOWN",g[g.INSERT=45]="INSERT",g[g.DELETE=46]="DELETE",g[g.F2=113]="F2",g[g.F3=114]="F3",g[g.A=65]="A",g[g.D=68]="D",g[g.I=73]="I",g[g.T=84]="T",g[g.U=85]="U",g[g.V=86]="V",g[g.W=87]="W",g[g.X=88]="X",g[g.Y=89]="Y",g[g.Z=90]="Z",(b=e.Cursor||(e.Cursor={})).DEFAULT="default",b.AUTO="auto",b.POINTER="pointer",b.WAIT="wait",b.MOVE="move",b.COL_RESIZE="col-resize",b.ROW_RESIZE="row-resize",b.CROSSHAIR="crosshair",b.HORZ_RESIZE="ew-resize",b.VERT_RESIZE="ns-resize",b.NESW_RESIZE="nesw-resize",b.NWSE_RESIZE="nwse-resize",b.NO_DROP="no-drop",b.NOT_ALLOWED="not-allowed",(v=e.TableCellType||(e.TableCellType={})).DATA="data",v.HEADER="header",v.FOOTER="footer",v.INDICATOR="indicator",v.STATE="state",v.CHECK="check",v.HEAD="head",v.FIXED_BAR="fixedbar",(C=e.RowMaskType||(e.RowMaskType={})).NONE="none",C.ROW="row",C.DATA="data",C.FILL="fill",C.CELL="cell",(w=e.TextInputCase||(e.TextInputCase={})).NORMAL="normal",w.UPPER="upper",w.LOWER="lower",w.DEFAULT="default",(E=e.Alignment||(e.Alignment={})).NEAR="near",E.CENTER="center",E.FAR="far",(x=e.DefaultShowDate||(e.DefaultShowDate={})).NORMAL="normal",x.TODAY="today",x.TODAY_WHEN_NULL="todayWhenNull",(I=e.SortStyle||(e.SortStyle={})).NONE="none",I.EXCLUSIVE="exclusive",I.INCLUSIVE="inclusive",I.REVERSE="reverse",(O=e.MenuItemType||(e.MenuItemType={})).NORMAL="normal",O.CHECK="check",O.RADIO="radio",O.SEPARATOR="separator",(S=e.HandleVisibility||(e.HandleVisibility={})).VISIBLE="visible",S.HOVERED="hovered",S.ALWAYS="always",S.HIDDEN="hidden",(D=e.CellButton||(e.CellButton={})).NONE="none",D.ACTION="action",D.POPUP="popup",D.IMAGE="image",(R=e.ButtonVisibility||(e.ButtonVisibility={})).ALWAYS="always",R.DEFAULT="default",R.VISIBLE="visible",R.HIDDEN="hidden",R.ROWFOCUSED="rowfocused"});t(W);W.ValueType,W.SortDirection,W.SortCase,W.PagingSource,W.SortMode,W.FilterMode,W.RowGroupAdornments,W.isHeaderAdornment,W.isFooterAdornment,W.isFooterOnlyAdornment,W.ValidationMode,W.ValidationLevel,W.ValidationLevel_compare,W.SummaryMode,W.SubTextLocation,W.ColumnHeaderItemLocation,W.ClickBehavior,W.BlankState,W.GridFitStyle,W.Keys,W.Cursor,W.TableCellType,W.RowMaskType,W.TextInputCase,W.Alignment,W.DefaultShowDate,W.SortStyle,W.MenuItemType,W.HandleVisibility,W.CellButton,W.ButtonVisibility;var x=e(function(t,e){var i,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=i=e.RowState||(e.RowState={})).NONE="none",o.CREATED="created",o.UPDATED="updated",o.DELETED="deleted",o.CREATE_AND_DELETED="createAndDeleted",e.isDeletedState=function(t){return t==i.DELETED||t==i.CREATE_AND_DELETED}});t(x);x.RowState,x.isDeletedState;var R=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),o.prototype.toBool=function(t){if(this._values&&t){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}return!1},o.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase();return this._values&&e in this._values?this._values[e]:e?Boolean(e):void 0},o.prototype.toBoolStrict=function(t){if(this._values&&t){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},o.prototype.toText=function(t){return t?this._trueText:this._falseText},o.prototype.parse=function(t){if(t){var e,i,o,r,n=t.split(/[;\:]/),s=!0;for(o=(e=n[0])?e.split(","):null,1<n.length&&(r=(e=n[1])?e.split(","):null),2<n.length&&"0"==(e=n[2].trim())&&(s=!1),this._values={},this._sensitive=s,i=0;i<o.length;i++)e=o[i],this._values[s?e:e.toLowerCase()]=!1;for(i=0;i<r.length;i++)e=r[i],this._values[s?e:e.toLowerCase()]=!0;this._trueText=r&&0<r.length?r[0]:"true",this._falseText=o&&0<o.length?o[0]:"false"}else this._values={},this._values.true=!0,this._values.false=!1,this._trueText="true",this._falseText="false"},o.Default=new o("false,f,0:true,t,1:0"),o);function o(t){this._format="",this.format=t}e.BooleanConverter=i});t(R);R.BooleanConverter;var K=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height)},o.prototype.getInner=function(){return new o(0,0,this.width,this.height)},o.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},o.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},o.prototype.rightBy=function(t){return this.width+=t,this},o.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},o.prototype.bottomBy=function(t){return this.height+=t,this},o.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},o.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},o.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.setEmpty=function(){return this.width=this.height=0,this},o.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},o.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},o.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},o.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},o.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:0,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},o.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},o.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},o.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},o.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},o.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},o.Temp=new o,o);function o(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}e.Rectangle=i});t(K);K.Rectangle;var z=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=0<=navigator.platform.toUpperCase().indexOf("MAC"),r=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),n=(window.whale,!!window.chrome&&!r),s=void 0!==window.InstallTrigger,a=0<Object.prototype.toString.call(HTMLElement).indexOf("Constructor")||!n&&!r&&0<=navigator.userAgent.indexOf("Safari"),l=a&&("Win32"==navigator.platform||0<=navigator.userAgent.indexOf("Windows")),u=!!document.documentMode,h=0<=navigator.userAgent.toLowerCase().indexOf("edge/"),c=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:void 0}()),p=void 0!==c&&c<=9,d=void 0!==c&&c<=8,_=-1!==navigator.appVersion.indexOf("MSIE 10"),f=(navigator.appVersion.indexOf("MSIE 9"),(new Date).getTime()),y=void 0,m=(g.stopEvent=function(t){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1},g.$_getActiveGrid=function(){return i},g.$_setActiveGrid=function(t){i!=t&&t&&t._fireGridActivated(),i=t},g.isArray=function(t){return Array.isArray(t)},g.makeArray=function(t){if(null!=t)return g.isArray(t)?t:[t]},g.isNumber=function(t){return"number"==typeof t},g.getTimer=function(){return(new Date).getTime()-f},g.isWhiteSpace=function(t){return!t||!t.trim()},g.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},g.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,r=0;r<o;r++)if(null!=(i=t[r]))return i},g.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,r=0;r<o;r++)if(e[r]==t)return!0;return!1},g.compareTextValue=function(t,e,i,o){if(t===e)return!0;var r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),o?0<=n.indexOf(r):r==n)},g.cast=function(t,e){return t instanceof e?t:null},g.irandom=function(t,e){if(void 0!==e){var i=Math.floor(t),o=Math.floor(e);return Math.floor(Math.random()*(o-i)+i)}var r=Math.floor(t);return Math.floor(Math.random()*r)},g.brandom=function(){return.5<Math.random()},g.erandom=function(t){return Object.keys(t)},g.alert=function(t){},g.toInt=function(t,e){return null!=t?parseInt(t,e||10):0},g.toFloat=function(t){return null!=t?parseFloat(t):0},g.toArray=function(t){return t instanceof Array?t:null!=t?[t]:null},g.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},g.getBounds=function(t){var e=new K.Rectangle;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},g.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},g._included=function(t){for(var e=arguments,i=e.length,o=1;o<i;o++)if(e[o]==t)return!0;return!1},g.setBounds=function(t,e,i,o,r){var n=t.style;n.left=e+"px",n.top=i+"px",n.width=o+"px",n.height=r+"px"},g.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},g.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.childNodes,o=0;o<i.length;o++)if(i[o]===t)return o}return-1},g.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},g.clearElements=function(t){for(var e;e=t.lastChild;)g.clearElements(e),t.removeChild(e)},g.addChild=function(t,e){return!(!t||!e||e.parentNode===t||(t.appendChild(e),0))},g.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t||(t.removeChild(e),0))},g.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},g.setMobile=function(t){y=t},g.isMobile=function(){if(null!=y)return!!y;var t,e=!1;return(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(e=!0),e||(t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)),e},g.getBrowserSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},g.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},g.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentElement.innerHTML},g.detach=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},g.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},g.getScrolled=function(){var t=document.body,e=document.documentElement;return{sx:window.pageXOffset||e.scrollLeft||t.scrollLeft,sy:window.pageYOffset||e.scrollTop||t.scrollTop}},g.getOffset=function(t){var e=t.getBoundingClientRect(),i=document.body,o=document.documentElement,r=window.pageYOffset||o.scrollTop||i.scrollTop,n=window.pageXOffset||o.scrollLeft||i.scrollLeft,s=o.clientTop||i.clientTop||0,a=o.clientLeft||i.clientLeft||0,l=e.left+n-a,u=e.top+r-s;return{x:Math.round(l),y:Math.round(u)}},g.isAncestorOf=function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1},g.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},g.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},g.incMonth=function(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,g.month_days[g.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t},g.minDate=function(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e},g.maxDate=function(t,e){return null!==t?e:null!==e?t:t.getTime()>e.getTime()?t:e},g.setClassName=function(t,e){e!=t.className&&(t.className=e)},g.setClassName2=function(t,e,i){var o=i?e+" "+i:e;o!=t.className&&(t.className=o)},g.addClassName=function(t,e){if(t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},g.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");0<=(i=o.indexOf(e))&&o.splice(i,1),t.className=o.join(" ")}},g.isIE=u,g.isEdge=h,g.isMac=o,g.ieOld=p,g.isSafari=a,g.isWinSafari=l,g.isChrome=n,g.isFirefox=s,g.isOpera=r,g.ieLeg=d,g.ieTen=_,g.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],g.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],g.$_INVISIBLE_EDIT_BOUNDS=new K.Rectangle(-1e4,-1e4,100,100),g);function g(){}e.Utils=m});t(z);z.Utils;var r=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(m.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)},enumerable:!0,configurable:!0}),m.prototype.parse=function(t){try{for(var e=0,i=1,o=1,r=0,n=0,s=0,a=0,l=0,u=0,h=this._patterns.length,c=0,p=t.length,d=0;d<h&&c<p;d++){var _=this._patterns[d],f=_.c,y=_.len;switch(f){case"y":e=parseInt(t.substr(c,y));break;case"M":i=parseInt(t.substr(c,y));break;case"d":o=parseInt(t.substr(c,y));break;case"a":if(this._amText&&t.indexOf(this._amText,c)==c)l=12,y=this._amText.length;else{if(!this._pmText||t.indexOf(this._pmText,c)!=c)return null;u=12,y=this._pmText.length}break;case"H":case"h":r=parseInt(t.substr(c,y));break;case"m":n=parseInt(t.substr(c,y));break;case"s":s=parseInt(t.substr(c,y));break;case"S":a=parseInt(t.substr(c,y));break;case".":case"/":case"-":case":":case" ":if(m.DATE_SEPARATORS.indexOf(t.charAt(c))<0)return null;break;default:return null}c+=y}return e<100&&(e+=this._baseYear),0<l?12==r&&(r=0):0<u&&r<12&&(r+=12),new Date(e,i-1,o,r,n,s,a)}catch(t){return null}},m.prototype.parseFormat=function(t){var e,i,o,r=t,n=r.length,s=0;for(this._patterns=[];s<n;)if(e=s,i=r.charAt(s),z.Utils.isWhiteSpace(i)){for(s++;s<n&&z.Utils.isWhiteSpace(r.charAt(s));)s++;this._patterns.push({c:" ",p:e,len:s-e})}else{switch(o=0,i){case"y":4!=(o=this.getPattern(r,s,i))&&2!=o&&this.throwInvalidFormat(r);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;case"S":3!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;case"a":case".":case"/":case"-":case":":1!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;default:this.throwInvalidFormat(r)}0<o&&(this._patterns.push({c:i,p:s,len:o}),s+=o)}},m.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},m.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},m.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},m.DATE_SEPARATORS="./-: ",m);function m(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}e.DateTimeParser=i});t(r);r.DateTimeParser;var n=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(E.parse=function(e,i){var t=null;try{var o,r,n,s,a=e.indexOf("T"),l=e.substring(0,a),u=e.substring(a+1),h=l.split("-"),c=h.length,p=parseInt(h[0]),d=1<c?parseInt(h[1]):1,_=2<c?parseInt(h[2]):1;-1!=u.indexOf("Z")?(o=1,n=r=0,u=u.replace("Z","")):-1!=u.indexOf("+")?(o=1,s=u.substring(u.indexOf("+")+1,u.length),r=Number(s.substring(0,s.indexOf(":"))),n=Number(s.substring(s.indexOf(":")+1,s.length)),u=u.substring(0,u.indexOf("+"))):-1!=u.indexOf("-")?(o=-1,s=u.substring(u.indexOf("-")+1,u.length),r=Number(s.substring(0,s.indexOf(":"))),n=Number(s.substring(s.indexOf(":")+1,s.length)),u=u.substring(0,u.indexOf("-"))):o=0;var f=u.split(":"),y=0<(c=f?f.length:0)?parseInt(f[0]):0,m=1<c?parseInt(f[1]):0,g=2<c?String(f[2]).split("."):null,b=g&&0<g.length?parseInt(g[0]):0,v=g&&1<g.length?1e3*parseFloat("0."+g[1]):0,C=Date.UTC(p,d-1,_,y,m,b,v);if(t=new Date(C-(o?(36e5*r+6e4*n)*o:E._zoneOffset)),i&&isNaN(t.getTime()))throw"Invalidate date text: "+e}catch(t){if(i){var w="Invalid date Text: "+e;throw w+="\nError: "+t.toString()}}return t},E._zoneOffset=60*(new Date).getTimezoneOffset()*1e3,E);function E(){}e.ISODateTimeParser=i});t(n);n.ISODateTimeParser;var w=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.initialize=function(){o.Default.amText="AM",o.Default.pmText="PM",o.Default.baseYear=2e3},Object.defineProperty(o.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t},enumerable:!0,configurable:!0}),o.prototype.toDate=function(t){if(!t)return null;var e=null;switch(this._type){case 0:e=this._parser.parse(t);break;case 1:e=n.ISODateTimeParser.parse(t,!1);break;case 2:var i=parseInt(t);e=new Date(i);break;case 3:default:e=new Date(t)}return e},o.prototype.parse=function(t){if(t){var e=t.toLowerCase();this._type=Math.max(0,o.Formats.indexOf(e)),0==this._type&&(this._parser.format=t)}},o.Formats=["custom","iso","timestamp","platform"],o.Default=new o("yyyy/MM/dd HH:mm:ss"),o);function o(t){this._type=0,this._parser=new r.DateTimeParser(null),this.format=t}(e.DateTimeReader=i).initialize()});t(w);w.DateTimeReader;var ce=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=0,o=(c.prototype.dispose=function(){return this.$_disposing||(this.$_disposing=!0,this._doDispose()),null},c.prototype._doDispose=function(){},Object.defineProperty(c.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!0,configurable:!0}),c.prototype.isMe=function(t){return t==this.$_hash},c.prototype.$_getters=function(t){var e=t.$$_getters_$$;if(!e){var i=Object.getOwnPropertyNames(t);e=t.$$_getters_$$=[];for(var o=0,r=i;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.get&&e.push(s)}}return e},c.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);if(t instanceof c)for(var i=Object.getPrototypeOf(t),o={};i&&i.constructor!=c;){var r=this.$_getters(i);for(var n in r)if(!(n in o))if(o[n]=null,u=Object.getOwnPropertyDescriptor(e,n))u.set&&(a=Object.getOwnPropertyDescriptor(i,n).get)&&u.set.call(this,a.call(t));else for(var s=Object.getPrototypeOf(e);s;){var a,l=Object.getOwnPropertyDescriptor(s,n);if(l)l.set&&(a=Object.getOwnPropertyDescriptor(i,n).get)&&l.set.call(this,a.call(t)),s=null;else s=Object.getPrototypeOf(s)}i=Object.getPrototypeOf(i)}else for(var n in t){var u;if(u=Object.getOwnPropertyDescriptor(e,n))u.set&&u.set.call(this,t[n]);else for(s=Object.getPrototypeOf(e);s;){var h=Object.getOwnPropertyDescriptor(s,n);s=h?(h.set&&h.set.call(this,t[n]),null):Object.getPrototypeOf(s)}}},c.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},c);function c(){this.$_hash=i++}e.Base=o});t(ce);ce.Base;var f=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),Object.defineProperty(s.prototype,"hash",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"runType",{get:function(){return this._runType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanForamt",{get:function(){return this._booleanFormat},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanFormat",{set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new R.BooleanConverter(t):null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._dateParser=new w.DateTimeReader(t),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)},enumerable:!0,configurable:!0}),s.prototype.isEmpty=function(t){var e=null==t||""==t;return e||this._dataType!=W.ValueType.NUMBER||(e=isNaN(t)),e},s.prototype.isNull=function(t){if(null==t)return!0;switch(this._runType){case W.ValueType.TEXT:case W.ValueType.CHAR:if(0==t.length)return!0;break;case W.ValueType.NUMBER:case W.ValueType.UNUM:case W.ValueType.INT:case W.ValueType.UINT:if(isNaN(t))return!0}return!1},s.prototype.equalValues=function(t,e){return this._equalValues(t,e)},s.prototype.sameValues=function(t,e){return this._sameValues(t,e)},s.prototype.readValue=function(t){return this._readValue(t)},s.prototype.getBool=function(t,e){if("boolean"==typeof e)return e;var i=e;return this._boolParser?this._boolParser.toBool(i):t.toBool(i)},s.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e):t.toDate(e)},s.prototype.clone=function(){var t=new s(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},s.prototype.$_resetTypes=function(t){this.resetTypes(t)},s.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback)},s.prototype.$_setIndex=function(t){this._index=t},s.prototype.$_prepare=function(t){this._owner=t},s.prototype.changed=function(){this._owner},s.prototype.resetTypes=function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser);var e=this._dataType,i=this._subType;if(this._runType=e,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(i)switch(e){case W.ValueType.TEXT:i==W.ValueType.CHAR&&0<this._length&&(e=i);break;case W.ValueType.NUMBER:i!=W.ValueType.UNUM&&i!=W.ValueType.INT&&i!=W.ValueType.UINT||(e=i);break;case W.ValueType.DATETIME:i==W.ValueType.DATE&&(e=i)}if(this._runType=e,this._runSet=null,this._set&&this._set.length){if(this._runType==W.ValueType.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++)(r=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(r.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==W.ValueType.DATE){for(this._runSet=[],o=0;o<this._set.length;o++){var r;if(r=this.getDate(this._ownerDateParser,this._set[o])){var n=new Date(r.getDate());this._runSet.push(n.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case W.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case W.ValueType.DATETIME:case W.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case W.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case W.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case W.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case W.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case W.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case W.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case W.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case W.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case W.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case W.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},s.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},s.prototype.equalDummyValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},s.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},s.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},s.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},s.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},s.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},s.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},s.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},s.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},s.prototype.sameBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},s.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):t===e},s.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:t==e},s.prototype.readDummyValue=function(t){return t},s.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},s.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e=e&&e.substr(0,this._length),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},s.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},s.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},s.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=0<=t?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=0<=e?Math.floor(e):Math.ceil(e)}return e}},s.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},s.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},s.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},s.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},s.prototype.readObjectValues=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+"\r\n"+e)}else if("object"!=typeof e)try{e=JSON.parse(e)}catch(t){}return e},s.prototype.$_compareObject=function(t,e,i,o){var r=this._objectKey,n=this._objectCallback,s=n?n(this.orgFieldName,i,t):r&&t.hasOwnProperty(r)?t[r]:null;return(n?n(this.orgFieldName,o,e):r&&e.hasOwnProperty(r)?e[r]:null)<s?1:s<e?0:-1},s.prototype.$_calculateValue=function(t,e,i,o,r,n){if(this._valueCallback)return this._valueCallback(e,i,r,n);this._valueExpression},s);function s(t,e,i){void 0===e&&(e=W.ValueType.TEXT),void 0===i&&(i=0);var o=r.call(this)||this;return o._index=-1,o._dataType=W.ValueType.TEXT,o._subType=null,o._runType=W.ValueType.TEXT,o._length=0,o._subTypeEnabled=!0,o._required=!1,o._updatable=!0,o._ranged=!1,o._runSet=null,o._typeLock=!1,o._calculated=!1,o._objectKey=null,o._objectCallback=null,t&&(o.fieldName=t),null!=e&&(o._dataType=e),o._length=i,o}e.DataField=n});t(f);f.DataField;var P=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Error,i(s,r),s);function s(t,e){var i=r.call(this,t)||this;return i.message=t,i.tokenPos=e,i}e.ExpressionSyntaxError=n;var a,l,u,h=(a=Error,i(c,a),c);function c(t){var e=a.call(this,t)||this;return e.message=t,e}e.ExpressionEvaluationError=h,(u=l=l||{})[u.Unknown=0]="Unknown",u[u.Add=1]="Add",u[u.Slash=2]="Slash",u[u.Star=3]="Star",u[u.Minus=4]="Minus",u[u.Plus=5]="Plus",u[u.Identifier=10]="Identifier",u[u.And=11]="And",u[u.In=12]="In",u[u.Not=13]="Not",u[u.Div=14]="Div",u[u.Mod=15]="Mod",u[u.Shl=16]="Shl",u[u.Shr=17]="Shr",u[u.Or=18]="Or",u[u.Xor=19]="Xor",u[u.ToStr=20]="ToStr",u[u.ToNum=21]="ToNum",u[u.ToBool=23]="ToBool",u[u.Length=24]="Length",u[u.Is=26]="Is",u[u.IsNot=27]="IsNot",u[u.BraceClose=30]="BraceClose",u[u.BraceOpen=31]="BraceOpen",u[u.Comma=32]="Comma",u[u.CRLF=33]="CRLF",u[u.Null=34]="Null",u[u.Defined=35]="Defined",u[u.Empty=36]="Empty",u[u.NaN=37]="NaN",u[u.Equal=40]="Equal",u[u.Greater=41]="Greater",u[u.GreaterEqual=42]="GreaterEqual",u[u.Lower=43]="Lower",u[u.LowerEqual=44]="LowerEqual",u[u.NotEqual=45]="NotEqual",u[u.Like=46]="Like",u[u.NotLike=47]="NotLike",u[u.ILike=48]="ILike",u[u.NotILike=49]="NotILike",u[u.Match=50]="Match",u[u.NotMatch=51]="NotMatch",u[u.IMatch=52]="IMatch",u[u.NotIMatch=53]="NotIMatch",u[u.String=60]="String",u[u.StringLiteral=61]="StringLiteral",u[u.Ascii=62]="Ascii",u[u.FloatLiteral=63]="FloatLiteral",u[u.IntegerLiteral=64]="IntegerLiteral",u[u.Point=65]="Point",u[u.RoundOpen=66]="RoundOpen",u[u.RoundClose=67]="RoundClose",u[u.DotDot=68]="DotDot",u[u.BracketOpen=69]="BracketOpen",u[u.BracketClose=70]="BracketClose",u[u.Space=71]="Space",u[u.Symbol=80]="Symbol",u[u.ToDateStr=90]="ToDateStr",u[u.ToYear=91]="ToYear",u[u.ToMonth=92]="ToMonth",u[u.ToDay=93]="ToDay",u[u.ToHour=94]="ToHour",u[u.ToRoundDown=95]="ToRoundDown";function p(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,r=t;o<r.length;o++){i[r[o]]=!0}return i}var _=d(l.Is,l.IsNot),f=d(l.Equal,l.NotEqual,l.Like,l.NotLike,l.ILike,l.NotILike,l.Match,l.NotMatch,l.IMatch,l.NotIMatch,l.Greater,l.GreaterEqual,l.Lower,l.LowerEqual),y=d(l.Minus,l.Plus,l.Or,l.Xor),m=d(l.And,l.Star,l.Slash,l.Div,l.Mod,l.Shl,l.Shr),g=(b.prototype.clear=function(){this._source=null},b.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},b.prototype.unkownProc=function(){this._tokenId=l.Unknown,this._run++},b.prototype.symbolProc=function(){this._tokenId=l.Symbol,this._run++},b.prototype.commaProc=function(){this._tokenId=l.Comma,this._run++},b.prototype.crProc=function(){this._tokenId=l.CRLF,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},b.prototype.lfProc=function(){this._tokenId=l.CRLF,this._run++,this._lineNo++,this._linePos=this._run},b.prototype.equalProc=function(){this._tokenId=l.Equal,this._run++},b.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=l.GreaterEqual,this._run+=2):(this._tokenId=l.Greater,this._run++)},b.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=l.LowerEqual,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=l.NotEqual,this._run+=2):(this._tokenId=l.Lower,this._run++)},b.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return e<t?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},b.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||255<this._source.charCodeAt(this._run));)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case l.Not:if(e=this.nextIdent())switch(e){case"like":this._tokenId=l.NotLike,this._run=this._nextRun;break;case"ilike":this._tokenId=l.NotILike,this._run=this._nextRun;break;case"match":this._tokenId=l.NotMatch,this._run=this._nextRun;break;case"imatch":this._tokenId=l.NotIMatch,this._run=this._nextRun}break;case l.Is:"not"==(e=this.nextIdent())&&(this._tokenId=l.IsNot,this._run=this._nextRun)}else this._tokenId=l.Identifier},b.prototype.integerProc=function(){for(this._tokenId=l.IntegerLiteral,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},b.prototype.numberProc=function(){for(this._tokenId=l.IntegerLiteral,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=l.FloatLiteral}this._run++}},b.prototype.minusProc=function(){this._tokenId=l.Minus,this._run++},b.prototype.plusProc=function(){this._tokenId=l.Plus,this._run++},b.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=l.DotDot,this._run+=2):(this._tokenId=l.Point,this._run++)},b.prototype.roundOpenProc=function(){this._tokenId=l.RoundOpen,this._run++},b.prototype.roundCloseProc=function(){this._tokenId=l.RoundClose,this._run++},b.prototype.slashProc=function(){this._tokenId=l.Slash,this._run++},b.prototype.spaceProc=function(){for(this._tokenId=l.Space,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},b.prototype.bracketOpenProc=function(){this._tokenId=l.BracketOpen,this._run++},b.prototype.bracketCloseProc=function(){this._tokenId=l.BracketClose,this._run++},b.prototype.starProc=function(){this._tokenId=l.Star,this._run++},b.prototype.modProc=function(){this._tokenId=l.Mod,this._run++},b.prototype.stringProc=function(){this._tokenId=l.StringLiteral;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new n("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},b.prototype.smallStringProc=function(){this._tokenId=l.StringLiteral;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new n("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},b.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;for(this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc,t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},Object.defineProperty(b.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isSpace",{get:function(){return this._tokenId==l.Space},enumerable:!0,configurable:!0}),b.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},b.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&0<this._source.charCodeAt(this._runAhead)&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},b.prototype.nextId=function(t){for(;this.next(),this._run<this._len&&this._tokenId!=t;);},b.prototype.nextNoSpace=function(){if(this._run<this._len)for(;this.next(),this._run<this._len&&this.isSpace;);},b.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;0<e&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||10==(t=this._source.charCodeAt(e))||13==t},b);function b(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:l.ToStr,num:l.ToNum,bool:l.ToBool,not:l.Not,len:l.Length,and:l.And,in:l.In,mod:l.Mod,or:l.Or,div:l.Div,shl:l.Shl,shr:l.Shr,xor:l.Xor,is:l.Is,like:l.Like,ilike:l.ILike,match:l.Match,imatch:l.IMatch,defined:l.Defined,null:l.Null,empty:l.Empty,nan:l.NaN,datestr:l.ToDateStr,year:l.ToYear,month:l.ToMonth,day:l.ToDay,hour:l.ToHour,rounddown:l.ToRoundDown},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0;for(var t=this._tokenPos=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=1<=t&&t<=9||11==t||14<=t&&t<=32,this.IS_END[t]=0==t;this.initProcs()}var v,C=(v=ce.Base,i(w,v),w.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},w.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},w.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},w.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},w);function w(){return v.call(this)||this}e.ExpressionRuntime=C;var E=(Object.defineProperty(x.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"asLiteral",{get:function(){return null},enumerable:!0,configurable:!0}),x.prototype.prepareValue=function(){},x.prototype.getLiteral=function(){},x.prototype.isIdentifier=function(t){return!1},x.prototype.toString=function(){return String(this)},x);function x(){}e.ExpressionNode=E;var I,O=(i(S,I=E),S);function S(){return null!==I&&I.apply(this,arguments)||this}var D;i(R,D=E),R.prototype.evaluate=function(t){},R.prototype.toString=function(){return""},R.Default=new R;function R(){return D.call(this)||this}var P;i(T,P=E),T.prototype.evaluate=function(t){};function T(t){var e=P.call(this)||this;return e._func=t,e}var k,L=(i(M,k=E),M.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case l.Equal:return e==i;case l.NotEqual:return e!=i;case l.Greater:return i<e;case l.GreaterEqual:return i<=e;case l.Lower:return e<i;case l.LowerEqual:return e<=i;case l.Like:return this.calcLike(e,i,!1);case l.NotLike:return!this.calcLike(e,i,!1);case l.ILike:return this.calcLike(e,i,!0);case l.NotILike:return!this.calcLike(e,i,!0);case l.Match:return this.calcMatch(e,i,!1);case l.NotMatch:return!this.calcMatch(e,i,!1);case l.IMatch:return this.calcMatch(e,i,!0);case l.NotIMatch:return!this.calcMatch(e,i,!0);default:throw new h("Unknown operator: "+this._operator)}},M.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e,i=this._leftExpr.toString(),o=this._rightExpr.toString();switch(this._operator){case l.Equal:e="=";break;case l.NotEqual:e="<>";break;case l.Greater:e=">";break;case l.GreaterEqual:e=">=";break;case l.Lower:e="<";break;case l.LowerEqual:e="<=";break;case l.Like:e="like";break;case l.NotLike:e="not like";break;case l.ILike:e="ilike";break;case l.NotILike:e="not ilike";break;case l.Match:e="match";break;case l.NotMatch:e="not match";break;case l.IMatch:e="imatch";break;case l.NotIMatch:e="not imatch";break;case l.Comma:e=",";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+o+")"}else t=this._leftExpr.toString();return t},M.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},M.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},M.prototype.getLiteral=function(){return this._literal},M.prototype.calcLike=function(t,e,i){var o=String(t),r=String(e);if(o&&r){i&&(o=o.toLowerCase(),r=r.toLowerCase());var n=r.length;if(1<n){var s="%"==r.charAt(0),a="%"==r.charAt(n-1);return s&&a?(r=r.substr(1,n-2),0<=o.indexOf(r,0)):s?(r=r.substr(1,n-1),o.lastIndexOf(r)==o.length-r.length):a?(r=r.substr(0,n-1),0==o.indexOf(r,0)):o==r}return"%"!=r&&o==r}return!1},M.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},M);function M(){var t=k.call(this)||this;return t._operator=l.Unknown,t}var A,V=(i(N,A=E),Object.defineProperty(N.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),N.prototype.evaluate=function(t){},N);function N(){return null!==A&&A.apply(this,arguments)||this}var j,B=(i(F,j=V),F.prototype.toString=function(){return"defined"},F);function F(){return null!==j&&j.apply(this,arguments)||this}var $,G=(i(H,$=V),H.prototype.toString=function(){return"empty"},H);function H(){return null!==$&&$.apply(this,arguments)||this}var U,W=(i(K,U=V),Object.defineProperty(K.prototype,"value",{get:function(){return NaN},enumerable:!0,configurable:!0}),K.prototype.toString=function(){return"null"},K);function K(){return null!==U&&U.apply(this,arguments)||this}var z,Y=(i(q,z=V),q.prototype.toString=function(){return"NaN"},q);function q(){return null!==z&&z.apply(this,arguments)||this}var X,Z=(i(J,X=L),J.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},J.prototype.getLiteral=function(){return null},J.prototype.evaluate=function(t){var e,i=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case J.DEFINED:e=void 0!==i;break;case J.NULL:e=null==i;break;case J.EMPTY:e=null==i||0==String(i).length;break;case J.NAN:e=null===i||isNaN(i);break;default:return}return this._isNot?!e:e},J.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case J.DEFINED:t="defined";break;case J.NULL:t="null";break;case J.EMPTY:t="empty";break;case J.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},J.DEFINED=0,J.NULL=1,J.EMPTY=2,J.NAN=3,J);function J(t,e,i){var o=X.call(this)||this;return o._leftExpr=t,o._operator=e,o._isNot=e==l.IsNot,o._value=-1,i instanceof B?o._value=J.DEFINED:i instanceof W?o._value=J.NULL:i instanceof G?o._value=J.EMPTY:i instanceof Y&&(o._value=J.NAN),o}var Q,tt=(i(et,Q=O),Object.defineProperty(et.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(et.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),et.prototype.evaluate=function(t){return this._value},et.prototype.toString=function(){return String(this._value)},et);function et(t){var e=Q.call(this)||this;return e._value=Number(t),e}var it,ot=(i(rt,it=O),Object.defineProperty(rt.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(rt.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),rt.prototype.evaluate=function(t){return this._value},rt.prototype.toString=function(){return String(this._value)},rt);function rt(t){var e=it.call(this)||this;return e._value="string"==typeof t?parseInt(t):Math.floor(t),e}var nt,st=(i(at,nt=O),Object.defineProperty(at.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(at.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),at.prototype.evaluate=function(t){return this._value},at.prototype.toString=function(){return"'"+this._value+"'"},at);function at(t){var e=nt.call(this)||this;e._value=t.substr(1,t.length-2);for(var i="",o=0,r=!1;o<e._value.length;)"\\"!=e._value[o]||r?(r=!1,i+=e._value[o++]):(r=!0,o++);return e._value=i,e}var lt,ut=(i(ht,lt=E),Object.defineProperty(ht.prototype,"identifier",{get:function(){return this._literal},enumerable:!0,configurable:!0}),ht.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},ht.prototype.toString=function(){return this._literal},ht);function ht(t){var e=lt.call(this)||this;return e._idKey=-651212,e._literal=t,e}var ct,pt=(i(dt,ct=L),dt.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof L&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},dt.prototype.getLiteral=function(){return null},dt.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},dt.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},dt);function dt(t,e,i){var o=ct.call(this)||this;return o._idKey=-1490313,o._intIndex=NaN,o._strIndex=null,o._ident=t,o._indexer=e,o._capital=i,o}var _t,ft=(i(yt,_t=E),yt.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof E&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},yt.prototype.getLiteral=function(){return null},yt);function yt(t){var e=_t.call(this)||this;return e._factor=t,e}var mt,gt=(i(bt,mt=ft),bt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e?e.length:0},bt.prototype.toString=function(){return"(len "+this._factor+")"},bt);function bt(t){return mt.call(this,t)||this}var vt,Ct=(i(wt,vt=ft),wt.prototype.evaluate=function(t){return-(this._literal instanceof O?this._literal.value:this._factor.evaluate(t))},wt.prototype.toString=function(){return"-"+this._factor},wt);function wt(t){return vt.call(this,t)||this}var Et,xt=(i(It,Et=ft),It.prototype.evaluate=function(t){return this._literal instanceof O?this._literal.value:this._factor.evaluate(t)},It.prototype.toString=function(){return"+"+this._factor},It);function It(t){return Et.call(this,t)||this}var Ot,St=(i(Dt,Ot=ft),Dt.prototype.evaluate=function(t){return!(this._literal instanceof O?this._literal.value:this._factor.evaluate(t))},Dt.prototype.toString=function(){return"(not "+this._factor+")"},Dt);function Dt(t){return Ot.call(this,t)||this}var Rt,Pt=(i(Tt,Rt=ft),Tt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return Boolean(e)},Tt.prototype.toString=function(){return"(bool "+this._factor+")"},Tt);function Tt(t){return Rt.call(this,t)||this}var kt,Lt=(i(Mt,kt=ft),Mt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return Number(e)},Mt.prototype.toString=function(){return"(num "+this._factor+")"},Mt);function Mt(t){return kt.call(this,t)||this}var At,Vt=(i(Nt,At=ft),Nt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return String(e)},Nt.prototype.toString=function(){return"(str "+this._factor+")"},Nt);function Nt(t){return At.call(this,t)||this}var jt,Bt=(i(Ft,jt=ft),Ft.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e instanceof Date&&(e=p(e.getFullYear(),4)+p(e.getMonth()+1,2)+p(e.getDate(),2)+p(e.getHours(),2)+p(e.getMinutes(),2)+p(e.getSeconds(),2)+p(e.getMilliseconds(),3)),String(e)},Ft.prototype.toString=function(){return"(datestr "+this._factor+")"},Ft);function Ft(t){return jt.call(this,t)||this}var $t,Gt=(i(Ht,$t=ft),Ht.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},Ht.prototype.toString=function(){return"(year "+this._factor+")"},Ht);function Ht(t){return $t.call(this,t)||this}var Ut,Wt=(i(Kt,Ut=ft),Kt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},Kt.prototype.toString=function(){return"(month "+this._factor+")"},Kt);function Kt(t){return Ut.call(this,t)||this}var zt,Yt=(i(qt,zt=ft),qt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},qt.prototype.toString=function(){return"(day "+this._factor+")"},qt);function qt(t){return zt.call(this,t)||this}var Xt,Zt=(i(Jt,Xt=ft),Jt.prototype.evaluate=function(t){var e=this._literal instanceof O?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},Jt.prototype.toString=function(){return"(hour "+this._factor+")"},Jt);function Jt(t){return Xt.call(this,t)||this}var Qt,te=(i(ee,Qt=ft),ee.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(!e._rightExpr)return e._leftExpr.evaluate(t);var o=e._leftExpr.evaluate(t),r=e._rightExpr.evaluate(t);switch(e._operator){case l.Comma:var n=Math.pow(10,r);return Math.floor(o*n)/n;default:throw new h("Unknown operator: "+e._operator)}},ee.prototype.toString=function(){return"(rounddown "+this._factor+")"},ee);function ee(t){return Qt.call(this,t)||this}var ie,oe=(i(re,ie=E),re.prototype.addFactor=function(t){this._factors.push(t)},re.prototype.addOperator=function(t){this._operators.push(t)},re.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof ut&&this._factors[0].identifier==t},re.prototype.prepareValue=function(){var t,e,i;for(t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();0==this._operators.length&&(i=this._factors[0],this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral()))},re.prototype.getLiteral=function(){return this._literal},re.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var r=this._factors[o].evaluate(t);switch(this._operators[o-1]){case l.And:i=i&&r;break;case l.Star:i*=r;break;case l.Slash:i/=r;break;case l.Div:i=Math.floor(Math.floor(i)/Math.floor(r));break;case l.Mod:i%=r;break;case l.Shl:i<<=r;break;case l.Shr:i>>=r}}return i},re.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{var e,i=this._factors.length;for(t="("+this._factors[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case l.And:t+=" and ";break;case l.Star:t+=" * ";break;case l.Slash:case l.Div:t+=" / ";break;case l.Mod:t+=" mod ";break;case l.Shl:t+=" shl ";break;case l.Shr:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},re);function re(){var t=ie.call(this)||this;return t._factors=[],t._operators=[],t._literal=null,t}var ne,se=(i(ae,ne=E),ae.prototype.addTerm=function(t){this._terms.push(t)},ae.prototype.addOperator=function(t){this._operators.push(t)},ae.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},ae.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},ae.prototype.getLiteral=function(){return this._literal},ae.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var r=this._terms[o].evaluate(t);switch(this._operators[o-1]){case l.Minus:i-=r;break;case l.Plus:i+=r;break;case l.Or:i=i||r;break;case l.Xor:i^=r}}return i},ae.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{var e,i=this._terms.length;for(t="("+this._terms[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case l.Minus:t+=" - ";break;case l.Plus:t+=" + ";break;case l.Or:t+=" or ";break;case l.Xor:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},ae);function ae(){var t=ne.call(this)||this;return t._terms=[],t._operators=[],t._literal=null,t}var le=(ue.prototype.syntaxError=function(t,e){throw new n(t,e)},ue.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new n("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},ue.prototype.nextToken=function(){this._lexer.nextNoSpace()},ue.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(_[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var r=o.getLiteral();if(!(r instanceof V))throw new n("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new Z(i,t,r)}else(e=new L)._leftExpr=i,f[this._lexer.tokenId]?(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression()):this._lexer.tokenId==l.Comma&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},ue.prototype.doSimpleExpression=function(){var t=new se;for(t.addTerm(this.doTerm());y[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},ue.prototype.doTerm=function(){var t=new oe;for(t.addFactor(this.doFactor());m[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},ue.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case l.StringLiteral:return this.doCharString();case l.RoundOpen:return this.doRoundOpen();case l.Identifier:return this.doIdentifier();case l.IntegerLiteral:return this.doInteger();case l.FloatLiteral:return this.doNumber();case l.Minus:return this.doMinus();case l.Plus:return this.doPlus();case l.Not:return this.doNot();case l.Defined:return this.doDefined();case l.Null:return this.doNull();case l.Empty:return this.doEmpty();case l.NaN:return this.doNaN();case l.ToBool:return this.doToBool();case l.ToNum:return this.doToNumber();case l.ToStr:return this.doToString();case l.Length:return this.doLength();case l.ToDateStr:return this.doToDateString();case l.ToYear:return this.doToYear();case l.ToMonth:return this.doToMonth();case l.ToDay:return this.doToDay();case l.ToHour:return this.doToHour();case l.ToRoundDown:return this.doRoundDown()}throw new n("Unkown token: "+t,this._lexer.tokenLoc)},ue.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new st(t)},ue.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(l.RoundClose),t},ue.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),this._lexer.tokenId!=l.BracketOpen)return new ut(t);this.nextToken();var e=this.doExpression();return this.expected(l.BracketClose),new pt(t,e,0<=this._capitalIndexers.indexOf(t))},ue.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new tt(t)},ue.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new ot(t)},ue.prototype.doMinus=function(){return this.nextToken(),new Ct(this.doFactor())},ue.prototype.doPlus=function(){return this.nextToken(),new xt(this.doFactor())},ue.prototype.doNot=function(){return this.nextToken(),new St(this.doFactor())},ue.prototype.doDefined=function(){return this.nextToken(),new B},ue.prototype.doNull=function(){return this.nextToken(),new W},ue.prototype.doEmpty=function(){return this.nextToken(),new G},ue.prototype.doNaN=function(){return this.nextToken(),new Y},ue.prototype.doToBool=function(){return this.nextToken(),new Pt(this.doFactor())},ue.prototype.doToNumber=function(){return this.nextToken(),new Lt(this.doFactor())},ue.prototype.doToString=function(){return this.nextToken(),new Vt(this.doFactor())},ue.prototype.doLength=function(){return this.nextToken(),new gt(this.doFactor())},ue.prototype.doToDateString=function(){return this.nextToken(),new Bt(this.doFactor())},ue.prototype.doToYear=function(){return this.nextToken(),new Gt(this.doFactor())},ue.prototype.doToMonth=function(){return this.nextToken(),new Wt(this.doFactor())},ue.prototype.doToDay=function(){return this.nextToken(),new Yt(this.doFactor())},ue.prototype.doToHour=function(){return this.nextToken(),new Zt(this.doFactor())},ue.prototype.doRoundDown=function(){return this.nextToken(),new te(this.doFactor())},ue.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},ue.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},ue.Default=new ue,ue);function ue(){this._node=null,this._capitalIndexers=null,this._lexer=new g}e.ExpressionParser=le});t(P);P.ExpressionSyntaxError,P.ExpressionEvaluationError,P.ExpressionRuntime,P.ExpressionNode,P.ExpressionParser;var T=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Error,i(s,r),s);function s(t,e){var i=r.call(this,t)||this;return i.message=t,i.tokenPos=e,i}e.ExpressionStatementError=n;var h=(a.prototype.evaluate=function(t){return this.literal},a);function a(t){this.literal=t}var c=(l.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},l);function l(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}var p=(u.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var r=e.substr(0,i).trim(),n=e.substring(i+1,o).replace(/'|"/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(r)),t.evaluateIndexerS(this.idKey,n,this.capital)}},u);function u(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}var d=(Object.defineProperty(_.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))},enumerable:!0,configurable:!0}),_.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,r=e.length;o<r;o++)i+=e[o].evaluate(t)||"";return i}catch(t){if(!this._silentError)throw new t}return null},_.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,o=0;o<i;){var r=t.indexOf("${",o);if(0<=r){var n=t.indexOf("}",r+2);if(0<=n){if(o<r){var s=t.substring(o,r);e=new h(s),this._tokens.push(e)}if(u=t.substring(r+2,n).trim()){var a,l=void 0;e=(a=u.indexOf("["))&&(l=u.indexOf("]"))&&a<l?new p(u):new c(u),this._tokens.push(e)}o=n+1}else r=-1}if(r<0){var u=t.substr(o,i);e=new h(u),this._tokens.push(e);break}}},_);function _(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}e.ExpressionStatement=d});t(T);T.ExpressionStatementError,T.ExpressionStatement;var j=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){return this._listeners=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!0,configurable:!0}),s.prototype.addListener=function(t){return null!=t&&this._listeners.indexOf(t)<0&&this._listeners.push(t),this},s.prototype.removeListener=function(t){if(null!=t){var e=this._listeners.indexOf(t);0<=e&&this._listeners.splice(e,1)}return this},s.prototype.clearListener=function(){this._listeners.length=0},s.prototype.fireEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),r=0,n=(o[0]=this)._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];a&&a.apply(s,o)}},s.prototype.fireConfirmEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),r=0,n=(o[0]=this)._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if("boolean"==typeof l&&!l)return!1}}return!0},s.prototype.fireMessageEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),r=0,n=(o[0]=this)._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if("string"==typeof l&&l)return l}}return null},s.prototype.fireObjectEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),r=0,n=(o[0]=this)._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if(l)return l}}return null},s);function s(){var t=r.call(this)||this;return t._listeners=[],t}e.EventAware=n});t(j);j.EventAware;var Y=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=j.EventAware,i(s,r),s.prototype._doDispose=function(){this._grid=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"owner",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),s.prototype.clean=function(){this._dirty&&(this._dirty=!1)},s.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},s.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},s.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},s.prototype._doChanged=function(){},s);function s(t){var e=r.call(this)||this;return e._dirty=!1,e._grid=t,e}e.GridObject=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"visible",{get:function(){return this._visible},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),u.prototype._setVisible=function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())},u.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},u.prototype._visibleChanged=function(){this._changed()},u);function u(t){var e=a.call(this,t)||this;return e._visible=!0,e}e.VisualObject=l});t(Y);Y.GridObject,Y.VisualObject;var k=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function c(t){return t<10?"0"+t:String(t)}var l=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],u=[".","/","-",":"],h="Z".charCodeAt(0),p="z".charCodeAt(0),d="A".charCodeAt(0),_="a".charCodeAt(0),f="y".charCodeAt(0),y="M".charCodeAt(0),m="m".charCodeAt(0),g="d".charCodeAt(0),b="H".charCodeAt(0),v="h".charCodeAt(0),C="S".charCodeAt(0),w="s".charCodeAt(0),i=(Object.defineProperty(o.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"formatString",{get:function(){return this._formatString},set:function(t){(t=t||o.DefaultFormat)!=this._formatString&&(this._tokens=[],this.parse(t),this._formatString=t)},enumerable:!0,configurable:!0}),o.prototype.getText=function(t){if(!this._tokens)return"";for(var e,i=t instanceof Date?t:new Date(t),o=this._tokens,r="",n=0,s=o.length;n<s;n++){var a=o[n],l=a.length;switch(a.charCodeAt(0)){case f:r+=2<l?i.getFullYear():c(i.getFullYear()%100);break;case y:r+=1<l?c(i.getMonth()+1):i.getMonth()+1;break;case g:r+=1<l?c(i.getDate()):i.getDate();break;case b:r+=1<l?c(i.getHours()):i.getHours();break;case v:if(this._hasAmPm){var u=i.getHours();0==u?u=12:12<u&&(u-=12),r+=1<l?c(u):u}else r+=1<l?c(i.getHours()):i.getHours();break;case m:r+=1<l?c(i.getMinutes()):i.getMinutes();break;case w:r+=1<l?c(i.getSeconds()):i.getSeconds();break;case _:case d:i.getHours()<12?r+=this._amText:r+=this._pmText;break;case C:var h=i.getMilliseconds();r+=3==l?(e=h)<10?"00"+e:e<100?"0":String(e):2==l?c(h):h.toString().substr(0,l);break;default:r+=a}}return r},o.prototype.parseDateFormatTokens=function(t){var e=[];if(t)for(var i=t.trim(),o=i.length,r=0;r<o;){var n=i.charAt(r);if(0<=u.indexOf(n))e.push(n),r++;else{for(var s=r++;r<o&&i.charAt(r)==n;)r++;if(n=i.substring(s,r),l.indexOf(n)<0){var a=n.charCodeAt(0);if(d<=a&&a<=h||_<=a&&a<=p)throw new Error("Invalid datetime write format: "+t)}e.push(n)}if(r<o&&z.Utils.isWhiteSpace(n=i.charAt(r)))for(e.push(n);r<o&&z.Utils.isWhiteSpace(i.charAt(r));)r++}return e},o.prototype.parse=function(t){if(this._amText="AM",this._pmText="PM",t){var e=t.split(";");if(this._format=e[0]||o.DefaultFormat,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=0<=this._tokens.indexOf("a")||0<=this._tokens.indexOf("A"),1<e.length&&e[1]){var i=e[1].split(",");0<i.length&&i[0]&&(this._amText=i[0]),1<i.length&&i[1]&&(this._pmText=i[1])}}},o.Default=new o(o.DefaultFormat="yyyy/MM/dd"),o);function o(t){this._baseYear=2e3,this._preserveTime=!1,this._hasAmPm=!1,this.formatString=t}e.DateTimeWriter=i});t(k);k.DateTimeWriter;var L=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function u(t){return z.Utils.included(t,"c","f","C","F","a","A")}var i=(Object.defineProperty(o.prototype,"separator",{get:function(){return this._seperator},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!0,configurable:!0}),o.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this._parse(t)},o.prototype.format=function(t){var e=Number(t);if(isNaN(e))return"";var i=this._minDigits,o=0;if(this._optDecimal){var r=function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);i=Math.min(Math.max(r,this._minDigits),this._maxDigits)}if(0<i&&this._round)switch(o=Math.pow(10,i),this._round){case"c":e=Math.ceil(o*e)/o;break;case"f":e=Math.floor(o*e)/o}e="a"===this._round?Math.abs(e):e;var n=(e=Number(e.toPrecision(15))).toFixed(i);try{this._displayMinusZero||(o=parseFloat(n))!==Math.abs(parseFloat(n))||0!==o||(n=Math.abs(e).toFixed(i))}catch(t){}return this._seperator&&(n=n.replace(".",this._seperator)),this._reg?i?n.replace(this._regDecimal,this._replacement):n.replace(this._reg,this._replacement):n},o.prototype._parse=function(t){if(t=t&&t.trim()){var e,i,o=".",r=",";if(-1<t.indexOf(";")){var n=t.split(";");t=n[0],1<n.length&&n[1]&&!u(n[1])&&(o=n[1]),2<n.length&&n[2]&&!u(n[2])&&(r=n[2]),this._round=n[3]||n[2]||n[1],this._round=u(this._round)?this._round.toLowerCase():this._round}this._seperator="."==o?null:o,this._groupSep=","==r?null:r;var s=t.length,a=t.indexOf(".");if(this._optDecimal=0<t.indexOf("#",a),0<=a){for(e=a+1;e<s&&"0"==t.charAt(e);e++)this._minDigits++,this._maxDigits++;for(;e<s&&"#"==t.charAt(e);e++)this._maxDigits++;t=t.substr(0,a)}if(t&&(s=t.length,","==t.charAt(s-1)&&(this._groupPos=3,t=t.substr(0,s-1))),t){var l=!0;for(e=(s=t.length)-1;0<=e;e--)if("0"==(i=t.charAt(e))&&l)this._minInts++,this._maxInts++;else if(0==this._groupPos&&","==i)this._groupPos=s-e-1;else{if("#"!=i)break;l=!1}}0<this._groupPos&&(this._replacement="$&"+r,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+o+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+o+")","g"))}},o);function o(t){this._optDecimal=!1,this._groupPos=0,this._replacement="$&,",this._displayMinusZero=!0,this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this.parse(t)}e.DecimalFormatter=i});t(L);L.DecimalFormatter;var M=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse())},enumerable:!0,configurable:!0}),o.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},o.prototype.parse=function(){if(this._falseText=this._trueText=null,this._format){var t=this._format.split(/[;\:]/);this._falseText=t[0],0<t.length&&(this._trueText=t[1]),1<t.length&&(this._nullText=t[2])}},o);function o(t){this.format=t}e.BooleanFormatter=i});t(M);M.BooleanFormatter;var I=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.prototype.clear=function(){this.count=0,this.sum=this.max=this.min=this.avg=this.vars=this.varsp=NaN},o);function o(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}e.FieldSummary=i});t(I);I.FieldSummary;var y=e(function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.RestoreMode||(e.RestoreMode={})).NONE="none",i.EXPLICIT="explicit",i.AUTO="auto"});t(y);y.RestoreMode;var m=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=P.ExpressionRuntime,i(s,r),s.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},s.prototype.isIdentifier=function(t){return t=t.toLowerCase(),s.IDENTS.hasOwnProperty(t)?s.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},s.prototype.evaluateIdentifier=function(t){throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},s.prototype.evaluateIndexerI=function(t,e){if(this._values){if(t!=s.ID_VALUE&&t!=s.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._values[e]}},s.prototype.evaluateIndexerS=function(t,e,i){if(t!=s.ID_VALUE&&t!=s.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._values&&this._fields){var o=this._fields.indexOf(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._values[o]}},s.IDENTS={value:s.ID_VALUE=0,values:s.ID_VALUES=1},s);function s(){var t=r.call(this)||this;return t._values=null,t._fields=null,t._fieldCount=0,t}e.CalculateExpressionRuntime=n});t(m);m.CalculateExpressionRuntime;var b=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),Object.defineProperty(s.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new k.DateTimeWriter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?new M.BooleanFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new L.DecimalFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this)||this;return e._datetimeWriter=null,e._booleanFormatter=null,e._numberFormatter=null,e.assignFrom(t),e}e.DataOutputOptions=n});t(b);b.DataOutputOptions;var g=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=(n.prototype.compare=function(t,e,i){return t.dataType==W.ValueType.NUMBER?Number(e)-Number(i):i<e?1:e<i?-1:0},n);function n(){}var s,a=(s=Error,i(l,s),l);function l(t){return s.call(this,t)||this}e.DataSourceError=a;var u,h=(u=Error,i(c,u),c);function c(){return u.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}e.ClientEditingError=h;var p,d=(p=j.EventAware,i(_,p),_.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=null,this._calcFields=null,this._fieldNames=null,this._fieldMap=null,this._boolParser=this._dateParser=null,this._comparers=null,this._clients=null,this._defComparer=null,p.prototype._doDispose.call(this)},Object.defineProperty(_.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++)i[e].$_resetTypes()}},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"undoable",{get:function(){return this._undoable},set:function(t){this._undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new R.BooleanConverter(t):R.BooleanConverter.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new m.CalculateExpressionRuntime),this._calculateRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"local",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"immediateUpdate",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"summarized",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"eventLocked",{get:function(){return 0<this._eventLock},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"canUndo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"canRedo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"undoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"redoing",{get:function(){return!1},enumerable:!0,configurable:!0}),_.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},_.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);0<=e&&this._clients.splice(e,1)}},_.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].cancelDataEditing()},_.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].commitDataEditing()},_.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},_.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),0<this._countLock&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},_.prototype.addField=function(t,e,i){if(this._checkClientState()){var o=null;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),this.endUpdate()}return o}},_.prototype.clearFields=function(){this._checkClientState()&&0<this._fields.length&&(this.$_internalClearFields(),this._doFieldsReset())},_.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},_.prototype.getField=function(t){return this._fields[t]},_.prototype.getFields=function(){return this._fields.slice()},_.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var r=o[i];if(r.fieldName==e)return r}return null},_.prototype.getFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].fieldName);return i},_.prototype.getOrgFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].orgFieldName);return i},_.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},_.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},_.prototype.getFieldIndex=function(t){if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},_.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},_.prototype.getBaseField=function(t){return 0<=t&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},_.prototype.getValueType=function(t){return this._fields[t].dataType},_.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},_.prototype.hasData=function(t){return!1},_.prototype.canUpdateField=function(t,e){if(0<=e&&e<this._fields.length){if(!this._fields[e].updatable&&0<=t)try{var i=this.getRowState(t);return!i||i==x.RowState.CREATED||i==x.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},_.prototype.getDataComparer=function(t){if(0<=t){var e=this._comparers[t];return e||null}},_.prototype.setDataComparer=function(t,e){this._comparers[t]=e||void 0},_.prototype.canSummarize=function(t){if(0<=t&&t<this.fieldCount){var e=this.getValueType(t);if(e==W.ValueType.BOOLEAN||e==W.ValueType.NUMBER||W.ValueType.DATE)return!0}return!1},_.prototype.findRow=function(t,e){},_.prototype.getDistinctValues=function(t,e,i){return void 0===i&&(i=W.SortDirection.ASCENDING),null},_.prototype.exportToJson=function(){},_.prototype.exportToCsv=function(t){},_.prototype.exportToXml=function(){},_.prototype.canUpdateRow=function(t){return!1},_.prototype.canAppendRow=function(){return!1},_.prototype.canInsertRow=function(t){return!1},_.prototype.canDeleteRow=function(t){return!1},_.prototype.undo=function(){},_.prototype.redo=function(){},_.prototype.clearCommandStack=function(){},_.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},_.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new h;return this._alertClientError&&z.Utils.alert((new h).message),!1}return!0},_.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new a("Invalid field index: "+t)},_.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++)e[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},_.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||i<t)throw new a("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t);for(var o=(this._fieldMap[e.fieldName]=t)+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},_.prototype.$_addField=function(t,e,i){if(!t)throw new a("fieldName must be exists.");if(0<=this.getFieldIndex(t))throw new a("fieldName is already exists: "+t);var o=new f.DataField(t,e,i);return this.$_internalInsertField(this._fields.length,o),o},_.prototype.$_internalAddField=function(t){var e=null;return"string"==typeof t?e=this.$_addField(t,W.ValueType.TEXT,0):t instanceof f.DataField?(e=t.clone(),this.$_internalInsertField(this._fields.length,e)):t&&(e=this.$_addField(t.fieldName,t.dataType||W.ValueType.TEXT,t.length)).assignFrom(t),e},_.prototype._internalCalculateValues=function(t,e){var i=this._calcFields;if(0<i.length){for(var o=[],r=0;r<t.length;r++)o[r]=this.getField(r).readValue(t[r]);r=0;for(var n=i.length;r<n;r++){var s=i[r],a=this._fieldMap[s.fieldName];t[a]=o[a]=s.readValue(s.$_calculateValue(this._calculateRuntime,e,s.orgFieldName,this._fieldNames,this.getOrgFieldNames(),o))}}},_.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++)e[t].$_refreshFormats(this)},_.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},_.prototype.$_createOutputRows=function(t,e,i){void 0===i&&(i=0);var o=this.fieldCount,r=t.length;e instanceof b.DataOutputOptions||(e=new b.DataOutputOptions(e));for(var n=e.nullDateText,s=e.nullText,a=e.nanText,l=0;l<o;l++){var u=this.getField(l),h=u.dataType,c=u.orgFieldName,p=void 0,d=void 0;if(h==W.ValueType.DATETIME&&((p=e.datetimeCallback)||(d=e.datetimeWriter)||null!=n&&null!=n))if(p)for(var _=0;_<r;_++)(m=t[_])[c]=p(_+i,c,m[c]);else for(_=0;_<r;_++){var f=(m=t[_])[c];m[c]=f?d?d.getText(m[c]):f:n}else if(h==W.ValueType.BOOLEAN&&((p=e.booleanCallback)||(d=e.booleanFormatter)))if(p)for(_=0;_<r;_++)(m=t[_])[c]=p(_+i,c,m[c]);else for(_=0;_<r;_++)(m=t[_])[c]=d.formatValue(m[c]);else if(h==W.ValueType.NUMBER&&((p=e.numberCallback)||(d=e.numberFormatter)||null!=a&&null!=a))if(p)for(_=0;_<r;_++)(m=t[_])[c]=p(_+i,c,m[c]);else for(_=0;_<r;_++){var y=(m=t[_])[c];m[c]=null==y||isNaN(y)?a:d?d.format(y):y}else if(null!=s&&null!=s)for(_=0;_<r;_++){var m,g=(m=t[_])[c];m[c]=null==g||null==g?s:g}}},_.prototype.$_sortRows=function(t,e,i,o,r){do{var n=o,s=r,a=t[Math.floor((o+r)/2)];do{for(;n<=s&&!(i(e,a,t[n])<=0);)n++;for(;n<=s&&!(0<=i(e,a,t[s]));)s--;if(n<=s){if(n!=s){var l=t[n];t[n]=t[s],t[s]=l}n++,s--}}while(n<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=n}while(o<r)},_.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new w.DateTimeReader(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=w.DateTimeReader.Default},_.prototype._doCheckStatesChanged=function(){},_.prototype._doRestoreModeChanged=function(t,e){},_.prototype._doFieldsReset=function(){},_.prototype._refreshClients=function(){},_.prototype._fireReset=function(){},_.prototype._fireRowCountChanged=function(){},_.prototype._fireRefresh=function(){},_.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(_.COMMAND_STACK_CHANGED,t,e)},_.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",_);function _(){var t=p.call(this)||this;return t._subTypeEnabled=!0,t._undoable=!1,t._insertable=!0,t._updatable=!0,t._deletable=!0,t._softDeleting=!1,t._deleteCreated=!1,t._checkStates=!0,t._restoreMode=y.RestoreMode.NONE,t._strictRestore=!1,t._booleanFormat=null,t._datetimeFormat=null,t._baseYear=2e3,t._amText="AM",t._pmText="PM",t._alertClientError=!0,t._throwClientError=!1,t._commitBeforeDataEdit=!1,t._fields=[],t._calcFields=[],t._fieldNames=[],t._fieldMap={},t._defComparer=new r,t._comparers=[],t._boolParser=R.BooleanConverter.Default,t._dateParser=w.DateTimeReader.Default,t._eventLock=0,t._resetLock=0,t._countLock=0,t._clients=[],t}e.DataSource=d});t(g);g.DataSourceError,g.ClientEditingError,g.DataSource;var d=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype.connect=function(t){},s.prototype.disconnect=function(){},s.prototype.clearRows=function(){},s.prototype.setRows=function(){},s.prototype.setRowCount=function(t){},s.prototype.insertRow=function(t){},s.prototype.insertRows=function(t,e){},s.prototype.removeRow=function(t){},s.prototype.removeRows=function(t){},s.prototype.updateRow=function(t){},s.prototype.updateRows=function(t,e){},s.prototype.setValue=function(t,e){},s.prototype.moveRow=function(t,e){},s.prototype.moveRows=function(t,e,i){},s.prototype.changeStates=function(t){},s);function s(){return r.call(this)||this}e.DataTag=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){this._owner=null,this._tags=null,a.prototype._doDispose.call(this)},u.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},u.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);0<=e&&(this._tags.splice(e,1),t.disconnect())}},u.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].clearRows()},u.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].setRows()},u.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].setRowCount(t)},u.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].insertRow(t)},u.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].insertRows(t,e)},u.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRow(t)},u.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRows(t)},u.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRow(t)},u.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].updateRows(t,e)},u.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].setValue(t,e)},u.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRow(t,e)},u.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,r=this._tags;o<r.length;o++)r[o].moveRows(t,e,i)},u);function u(t){var e=a.call(this)||this;return e._tags=[],e._owner=t,e}e.DataTagCollection=l});t(d);d.DataTag,d.DataTagCollection;var a=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=(r.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(r.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?P.ExpressionParser.Default.parse(t,r.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isActive",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!0,configurable:!0}),r.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},r.CAPITAL_INDEXERS=["value","values","len"],r);function r(t){this._active=!1,this._exprNode=null,this.criteria=t}e.DataFilter=n;var s=(a.prototype.dispose=function(){return this._filters&&this._filters.forEach(function(t,e){t.dispose()}),this._filters=null},Object.defineProperty(a.prototype,"filterMode",{get:function(){return this._filterMode},set:function(t){var e=t?t.toLocaleLowerCase():t;e!=this._filterMode&&(this._filterMode=e,this._or=this._filterMode==a.FILTER_OR)},enumerable:!0,configurable:!0}),a.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=null,r=t[e];r&&("string"==typeof r?o=new n(r):r.criteria&&(o=new n(r.criteria))),o&&this._filters.push(o)}},a.prototype.prepare=function(t,e){t.prepare(e)},a.prototype.select=function(t,e,i){var o=this._filters,r=o.length;if(this._or){for(var n=0;n<r;n++)if(1==o[n].select(t,e,i))return!0;return!1}for(n=0;n<r;n++)if(0==o[n].select(t,e,i))return!1;return!0},a.FILTER_AND="and",a.FILTER_OR="or",a);function a(t,e){this._filterMode=a.FILTER_AND,this._or=!1,this.load(t),e&&(this._filterMode=e)}e.DataFilterCollection=s;var l,u=(l=P.ExpressionRuntime,i(h,l),h.prototype._doDispose=function(){this._ds=null,l.prototype._doDispose.call(this)},h.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},h.prototype.setRow=function(t,e){this._row=t,this._values=e},h.prototype.isIdentifier=function(t){return t=t.toLowerCase(),h.IDENTS.hasOwnProperty(t)?h.IDENTS[t]:l.prototype.isIdentifier.call(this,t)},h.prototype.evaluateIdentifier=function(t){switch(t){case h.ID_ROW:return this._row}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},h.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case h.ID_VALUE:case h.ID_VALUES:return this._values[e]}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},h.prototype.evaluateIndexerS=function(t,e,i){switch(t){case h.ID_VALUE:case h.ID_VALUES:var o=this.getField(e,i);return this._values[o]}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},h.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exits:"+t);return i},h.IDENTS={row:h.ID_ROW=0,value:h.ID_VALUE=1,values:h.ID_VALUES=2},h);function h(){var t=l.call(this)||this;return t._ds=null,t._fieldCount=0,t._row=-1,t._values=null,t}e.DataFilterRuntime=u});t(a);a.DataFilter,a.DataFilterCollection,a.DataFilterRuntime;var O=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=g.DataSource,i(s,r),s.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,r.prototype._doDispose.call(this)},s.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},Object.defineProperty(s.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deletedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tags",{get:function(){return this._tags},enumerable:!0,configurable:!0}),s.prototype.addTag=function(t){this._tags.add(t)},s.prototype.removeTag=function(t){this._tags.remove(t)},s.prototype.setFilters=function(t,e){!t||t instanceof a.DataFilterCollection?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new a.DataFilterCollection(t,e)},s.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new g.DataSourceError("row is out of range: "+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i),n=this.getValue(t,i);e[r]=n}return e},s.prototype.objectToRow=function(t){var e=[];if(t)for(var i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i);t.hasOwnProperty(r)&&(e[i]=t[r])}return e},s.prototype.equalValues=function(t,e,i){if(e===i)return!0;var o=this.getField(t),r=this.getValue(e,t),n=this.getValue(i,t);return o.equalValues(r,n)},s.prototype.equalTexts=function(t,e,i){if(e===i)return!0;this.getField(t);var o=this.getValue(e,t),r=this.getValue(i,t);return null==o?null==r:null!=r&&o.toLowerCase()==r.toLowerCase()},s.prototype.sameValues=function(t,e,i){if(e===i)return!0;var o=this.getField(t),r=this.getValue(e,t),n=this.getValue(i,t);return o.sameValues(r,n)},s.prototype.compareValues=function(t,e,i){return 0},s.prototype.compareTexts=function(t,e,i){return 0},s.prototype.compareNumbers=function(t,e,i){return 0},s.prototype.compareBools=function(t,e,i){return 0},s.prototype.compareObjects=function(t,e,i){return 0},s.prototype.summarize=function(t,e){return!1},s.prototype.summarizeRange=function(t,e,i){return!1},s.prototype.copyRows=function(t,e,i,o){},Object.defineProperty(s.prototype,"hideCount",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},s.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);0<=e&&this._commandListeners.splice(e,1)},s.prototype._doFieldsReset=function(){this._fireReset()},s.prototype._refreshClients=function(){this.fireRefreshClients()},s.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},s.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)},s.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent(s.DISPOSED)},s.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent(s.RESET):this._resetLock++},s.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(s.REFRESH)},s.prototype.fireRefreshClients=function(){this._eventLock<=0&&this.fireEvent(s.REFRESH)},s.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent(s.ROW_COUNT_CHANGED):this._countLock++},s.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_INSERTING,t,e)},s.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent(s.ROW_INSERTED,t),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent(s.ROWS_INSERTED,t,e),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_REMOVING,t)},s.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent(s.ROW_REMOVED,t),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROWS_REMOVING,t)},s.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent(s.ROWS_REMOVED,t),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_UPDATING,t,e)},s.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent(s.ROW_UPDATED,t),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent(s.ROWS_UPDATED,t,e),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROW_MOVING,t,e)},s.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent(s.ROW_MOVED,t,e)},s.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(s.ROWS_MOVING,t,e,i)},s.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent(s.ROWS_MOVED,t,e,i)},s.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(s.VALUE_CHANGING,t,e,i)},s.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent(s.VALUE_CHANGED,t,e),this.fireEvent(s.DATA_CHANGED))},s.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(s.STATE_CHANGED,t)},s.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(s.STATES_CHANGED,t)},s.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(s.STATES_CLEARED)},s.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent(s.RESTOREROWS,t)},s.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent(s.ROW_HIDED,t,e)},s.DISPOSED="onDataProvderDisposed",s.RESET="onDataProviderReset",s.REFRESH="onDataProviderRefresh",s.REFRESH_CLIENT="onDataProviderRefreshClient",s.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",s.ROW_INSERTING="onDataProviderRowInserting",s.ROW_INSERTED="onDataProviderRowInserted",s.ROWS_INSERTED="onDataProviderRowsInserted",s.ROW_REMOVING="onDataProviderRowRemoving",s.ROW_REMOVED="onDataProviderRowRemoved",s.ROWS_REMOVING="onDataProviderRowsRemoving",s.ROWS_REMOVED="onDataProviderRowsRemoved",s.ROW_UPDATING="onDataProviderRowUpdating",s.ROW_UPDATED="onDataProviderRowUpdated",s.ROWS_UPDATED="onDataProviderRowsUpdated",s.ROW_MOVING="onDataProviderRowMoving",s.ROW_MOVED="onDataProviderRowMoved",s.ROWS_MOVING="onDataProviderRowsMoving",s.ROWS_MOVED="onDataProviderRowsMoved",s.VALUE_CHANGING="onDataProviderValueChanging",s.VALUE_CHANGED="onDataProviderValueChanged",s.DATA_CHANGED="onDataProviderDataChanged",s.STATE_CHANGED="onDataProviderStateChanged",s.STATES_CHANGED="onDataProviderStatesChanged",s.STATES_CLEARED="onDataProviderStatesCleared",s.RESTOREROWS="onDataProviderRestoreRows",s.ROW_HIDED="onDataProviderRowHided",s);function s(){var t=r.call(this)||this;return t._tags=new d.DataTagCollection(t),t._filterRuntime=new a.DataFilterRuntime,t._commandListeners=[],t}e.DataProvider=n});t(O);O.DataProvider;var q=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ITEM_EXT_CHECKED=1,e.ITEM_UNCHECKABLE=4;e.ITEM_EXT_SAVEEXPAND=16,e.ITEM_EXT_FILTERED=32;var r,n,s="_parent";(n=r=e.ItemState||(e.ItemState={})).NORMAL="normal",n.FOCUSED="focused",n.UPDATING="updating",n.INSERTING="inserting",n.APPENDING="appending",n.DUMMY="dummy",e.ItemState_isEditing=function(t){return t==r.UPDATING||t==r.INSERTING||t==r.APPENDING},e.ItemState_isInserting=function(t){return t==r.INSERTING||t==r.APPENDING};var a=(l.prototype.dispose=function(){this._parent=null},Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){for(var t=this._parent;t&&1<t.level;)t=t._parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isData",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"visible",{get:function(){return this._parent&&0<=this._index},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"displayLevel",{get:function(){return this.level},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dataRow",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dataId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"rowState",{get:function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;return e?e.getRowState(t):x.RowState.NONE}return x.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"itemState",{get:function(){return r.NORMAL},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"checked",{get:function(){return 0!=(this._extents&e.ITEM_EXT_CHECKED)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"checkable",{get:function(){return 0==(this._extents&e.ITEM_UNCHECKABLE)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"readOnly",{get:function(){return 0!=(8&this._extents)},set:function(t){this._extents=t?8|this._extents:-9&this._extents},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"merged",{get:function(){return!1},enumerable:!0,configurable:!0}),l.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},l.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},l.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof y?this:null},l.prototype.getAncestors=function(){var t=null,e=this._parent;if(e)for(t=[];t.push(e),e=e._parent;);return t},l.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},l.prototype.getData=function(t){var e=this.dataSource;return e?e.getValue(this.dataRow,t):void 0},l.prototype.setData=function(t,e){var i=this.dataSource;i&&i.setValue(this.dataRow,t,e)},l.prototype.getRowData=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRow(t)}return null},l.prototype.getRowObject=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},l.prototype.canEdit=function(){return!1},l.prototype._setIndex=function(t){this._index=t},l.prototype._setChecked=function(t){this._extents=t?this._extents|e.ITEM_EXT_CHECKED:this._extents&~e.ITEM_EXT_CHECKED},l.prototype._setCheckable=function(t){this._extents=t?this._extents&~e.ITEM_UNCHECKABLE:this._extents|e.ITEM_UNCHECKABLE},l);function l(){this._id=0,this._index=-1,this._extents=0}e.GridItem=a;var u,h=(i(c,u=a),c);function c(){return null!==u&&u.apply(this,arguments)||this}e.DataItem=h;var p,d=(i(_,p=h),Object.defineProperty(_.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"editable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"displayLevel",{get:function(){return 0<=this._displayLevel?this._displayLevel:this.level},enumerable:!0,configurable:!0}),_.prototype.canEdit=function(){return!0},_.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},_);function _(t){var e=p.call(this)||this;return e._displayLevel=-1,e._dataRow=t,e}e.GridRow=d;var f,y=(i(m,f=a),Object.defineProperty(m.prototype,"expanded",{get:function(){return this._expanded},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"count",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"children",{get:function(){return this._children.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"first",{get:function(){return 0<this._children.length?this._children[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"last",{get:function(){var t=this._children.length;return 0<t?this._children[t-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"firstItem",{get:function(){if(0<this._children.length){var t=this._children[0];return t instanceof m?t.firstItem:t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"firstDataItem",{get:function(){if(0<this._children.length)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof m)return this._children[t].firstDataItem;if(this._children[t]instanceof d)return this._children[t]}return null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"lastItem",{get:function(){return this.getLastItem(!1)},enumerable:!0,configurable:!0}),m.prototype.getLastItem=function(t){return null},Object.defineProperty(m.prototype,"lastDataItem",{get:function(){var t=this._children.length;if(0<t)for(;0<t;t--){var e=this._children[t-1];if(e instanceof m)return e.lastDataItem;if(e instanceof d)return e}return null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"expandable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"collapsable",{get:function(){return!0},enumerable:!0,configurable:!0}),m.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},m.prototype.getFooterIndex=function(t){return 0},m.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},m.prototype.indexOf=function(t){for(var e=this._children.length-1;0<=e;e--)if(this._children[e]==t)return e;return-1},m.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},m.prototype.getDescendants=function(s){if((!s||this._expanded)&&this._children&&0<this._children.length){var t=[];return function t(e,i){for(var o=e.count,r=0;r<o;r++){var n=e.getItem(r);i.push(n),n instanceof m&&(!s||n.expanded)&&t(n,i)}}(this,t),t}return null},m.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},m.prototype.insert=function(t,e){this._addChild(e,t)},m.prototype.add=function(t){this._addChild(t,-1)},m.prototype.addAll=function(t){this._addChildren(t)},m.prototype.remove=function(t){var e=this.indexOf(t);0<=e&&(this._children.splice(e,1),t instanceof a&&(t[s]=null))},m.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},m.prototype.setExpanded=function(t,e,i){t==this._expanded&&!i||(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},m.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof I.FieldSummary?e.count:e?e.length:this._descendantCount},m.prototype.getDataCount=function(t){throw new Error("Not implemented.")},m.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof I.FieldSummary)return e.sum;if(e){for(var i=this.dataSource,o=e.length,r=0,n=0;n<o;n++){var s=i.getValue(e[n],t);isNaN(s)||(r+=s)}return r}return NaN},m.prototype.getDataSum=function(t){throw new Error("Not implemented.")},m.prototype.getMax=function(t){var e=this.$_getSummary(t);if(e instanceof I.FieldSummary)return e.max;if(e){var i=this.dataSource,o=e.length,r=void 0;if(1<o){r=NaN;for(var n=0;r=i.getValue(e[n++],t),isNaN(r=null==r?void 0:r)&&n<o;);for(;n<o;){var s=i.getValue(e[n++],t);!isNaN(s=null==s?void 0:s)&&r<s&&(r=s)}return r}if(1==o)return null==(r=i.getValue(e[0],t))?void 0:r}return NaN},m.prototype.getMin=function(t){var e=this.$_getSummary(t);if(e instanceof I.FieldSummary)return e.min;if(e){var i=this.dataSource,o=e.length,r=void 0;if(1<o){r=NaN;for(var n=0;r=i.getValue(e[n++],t),isNaN(r=null==r?void 0:r)&&n<o;);for(;n<o;){var s=i.getValue(e[n++],t);!isNaN(s=null==s?void 0:s)&&s<r&&(r=s)}return r}if(1==o)return null==(r=i.getValue(e[0],t))?void 0:r}return NaN},m.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof I.FieldSummary)return e.avg;if(e){var i=this.dataSource,o=e.length,r=void 0;if(1<o){for(var n=r=0;n<o;n++)r+=i.getValue(e[n],t);return r/o}if(1==o)return r=i.getValue(e[0],t)}return NaN},m.prototype.getVar=function(t,e){var i=this.$_getSummary(t);if(i instanceof I.FieldSummary)return i.vars;if(i&&this.provider.summaryMode==W.SummaryMode.STATISTICAL){var o=this.dataSource,r=i.length;if(1<r){for(var n=0,s=0;s<r;s++)n+=o.getValue(i[s],t);var a=n/r;for(s=n=0;s<r;s++)n+=Math.pow(o.getValue(i[s],t)-a,2);return n/=r-e}if(1==r)return 0}return NaN},m.prototype.getStdev=function(t,e){var i=this.$_getSummary(t);if(i instanceof I.FieldSummary)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.provider.summaryMode==W.SummaryMode.STATISTICAL){var o=this.dataSource,r=i.length;if(1<r){for(var n=0,s=0;s<r;s++)n+=o.getValue(i[s],t);var a=n/r;for(s=n=0;s<r;s++)n+=Math.pow(o.getValue(i[s],t)-a,2);return n=Math.sqrt(n/(r-e))}if(1==r)return 0}return NaN},Object.defineProperty(m.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),m.prototype._setExpanded=function(t){this._expanded=t},m.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},m.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof a&&(e[s]=this)},m.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[s]=this)},m.prototype._addChildren=function(t){var e;if(t&&0<(e=t.length))for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[s]=this)._children.push(o)}},m.prototype._removeChild=function(t){var e=this.indexOf(t);return 0<=e&&(this._children.splice(e,1),t instanceof a&&(t[s]=null)),e},m.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},m.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||i<=t)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),r=this._children[t];if(e<0)for(var n=t;o<n;n--)this._children[n]=this._children[n-1];else for(n=t;n<o;n++)this._children[n]=this._children[n+1];this._children[o]=r},m.prototype.$_collectRows=function(t,e){for(var i=t.count,o=0;o<i;o++){var r=t.getItem(o);if(r instanceof m)this.$_collectRows(r,e);else{var n=r.dataRow;0<=n&&e.push(n)}}},m.prototype.$_getRows=function(){var t=[];return this.$_collectRows(this,t),t},m.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof O.DataProvider))return null;null==this._summaries&&(this._summaries={});var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},m.prototype.$_summarize=function(t,e){var i=this.provider.summaryMode;if(i==W.SummaryMode.NONE)return null;if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),3<this._rows.length&&e.canSummarize(t)){var o=new I.FieldSummary(t);e.summarizeRange(o,this._rows,i==W.SummaryMode.STATISTICAL)}return this._rows},m);function m(){var t=f.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}e.GroupItem=y;var g,b=(i(v,g=y),Object.defineProperty(v.prototype,"groupField",{get:function(){return this._groupField},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"footerCount",{get:function(){return this._footers},enumerable:!0,configurable:!0}),v.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},v.prototype.getFooterIndex=function(t){return t.$_footerIndex},v.prototype.isFooter=function(t){if(t===this._footer)return!0;if(1<this._footers)for(var e=this._children,i=e.length-1;0<=i;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},v.prototype._addChild=function(t,e){g.prototype._addChild.call(this,t,e),t instanceof w&&(this._footer||(this._footer=t),this._footers++)},v);function v(t){var e=g.call(this)||this;return e._footers=0,e._groupField=t,e}e.GroupItemImpl=b;var C,w=(i(E,C=a),Object.defineProperty(E.prototype,"expandable",{get:function(){return this._expandable},set:function(t){this._expandable=t},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"displayLevel",{get:function(){return this._expandable?this.level-1:this.level},enumerable:!0,configurable:!0}),E);function E(){var t=C.call(this)||this;return t._expandable=!1,t.$_footerIndex=0,t}e.GroupFooter=w});t(q);q.ITEM_EXT_CHECKED,q.ITEM_UNCHECKABLE,q.ITEM_EXT_SAVEEXPAND,q.ITEM_EXT_FILTERED,q.ItemState,q.ItemState_isEditing,q.ItemState_isInserting,q.GridItem,q.DataItem,q.GridRow,q.GroupItem,q.GroupItemImpl,q.GroupFooter;var D=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),Object.defineProperty(s.prototype,"grid",{get:function(){var t=this.root;return t&&t._parent.grid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isProxy",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"group",{get:function(){return this._parent instanceof P?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof P)return this._root=t;t=t._parent}return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataRoot",{get:function(){if(!this._dataRoot)if(0==this._y)this._dataRoot=this;else{for(var t=this.group;t&&0<t._y;)t=t.group;this._dataRoot=t}return this._dataRoot},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"vindex",{get:function(){return this._vindex},set:function(t){this._parent&&this._parent.$_changeChildVIndex(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cellIndex",{get:function(){for(var t=this._col,e=this._parent;e;)t+=e._col,e=e._parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){this._setCellWidth(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"distance",{get:function(){return this._d},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hspan",{get:function(){return this._hspan},enumerable:!0,configurable:!0}),s.prototype.load=function(t){t.width&&(this.width=t.width)},s.prototype.getCellWidth=function(t){return this.width},s.prototype.isColumn=function(t){return!1},s.prototype.cleanColumns=function(){},s.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._fspan=1,this._sspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._flen=1,this._slen=1,this._root=void 0,this._dataRoot=void 0,this._y=0,this._d=0},s.prototype._getWidth=function(t){return t},s.prototype._setCellWidth=function(t){this.width=t},s.prototype._changed=function(){},s);function s(){var t=r.call(this)||this;return t._width=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._cspan=1,t._hspan=1,t._dspan=1,t._fspan=1,t._sspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._flen=1,t._slen=1,t._cellWidth=0,t._y=0,t._d=0,t}e.CellLayoutItem=n;var a,c=(i(l,a=n),Object.defineProperty(l.prototype,"isProxy",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"visible",{get:function(){return this._source.visible},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"cols",{get:function(){return this._source.cols},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"rows",{get:function(){return this._source.rows},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"footerRows",{get:function(){return this._source.footerRows},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"summaryRows",{get:function(){return this._source.summaryRows},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"first",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"last",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstColumn",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!0,configurable:!0}),l.prototype.load=function(t){},l.prototype._prepareLayout=function(t){},l.prototype.clearMergeGrouped=function(){},l);function l(t,e){var i=a.call(this)||this;return i._source=t,i._index=e,i}e.ProxyCellLayoutItem=c;var u,p,h,d=(i(_,u=n),Object.defineProperty(_.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"visible",{get:function(){return this._columnObj&&this._columnObj.visible},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"cols",{get:function(){return this._cols},set:function(t){(t=Math.max(1,t))!=this._cols&&(this._cols=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"headerRows",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"rows",{get:function(){return this._rows},set:function(t){(t=Math.max(1,t))!=this._rows&&(this._rows=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"footerRows",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"summaryRows",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"first",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"last",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),_.prototype.isColumn=function(t){return this._columnObj===t},_.prototype.load=function(t){u.prototype.load.call(this,t)},_.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},_.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:0:t},_.prototype._prepareLayout=function(t){this._columnObj&&this._columnObj.$_setMerged(!1)},_.prototype.toString=function(){return"string"==typeof this._column?this._column:u.prototype.toString.call(this)},_.prototype.clearMergeGrouped=function(){this.firstColumn instanceof G.DataColumn&&this.firstColumn.$_setMergeGrouped(!1)},_.prototype.$_bindColumn=function(t){this._columnObj||(this._columnObj=t.columnByName(this._column)),this._columnObj&&(this._columnObj._layout=this)},_);function _(t){var e=u.call(this)||this;return e._cols=1,e._rows=1,e._cellWidths=[],e._column=t,e._columnObj=t instanceof F.ValueColumn&&t,e}e.CellLayoutColumnItem=d,(h=p=e.ColumnLayoutDirection||(e.ColumnLayoutDirection={})).VERTICAL="vertical",h.HORIZONTAL="horizontal";var f,y=(f=ce.Base,i(m,f),Object.defineProperty(m.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),m.prototype._changed=function(){},m);function m(){var t=f.call(this)||this;return t._visible=!0,t}e.CellLayoutHeader=y;var g,b=(i(v,g=n),v.getRight=function(t){var e=t&&t.parent;return e?t=(t=e.rightOf(t))||v.getRight(e):null},v.getLeft=function(t){var e=t&&t.parent;return e?t=(t=e.leftOf(t))||v.getLeft(e):null},v.getNext=function(t){var e=t&&t.parent;return e?t=(t=e.nextOf(t))||v.getNext(e):null},v.getPrev=function(t){var e=t&&t.parent;return e?t=(t=e.prevOf(t))||v.getPrev(e):null},v.getLower=function(t){var e=t&&t.parent;return e?t=(t=e.lowerOf(t))||v.getLower(e):null},v.getUpper=function(t){var e=t&&t.parent;return e?t=(t=e.upperOf(t))||v.getUpper(e):null},v.getTop=function(t){for(var e=null;t;){if(v.isTop(t)){e=t;break}var i=v.getUpper(t);if(!i){e=t;break}t=i}return e?(e.group,e):null},v.getBottom=function(t){for(var e=null;t;){if(v.isBottom(t)){e=t;break}var i=v.getLower(t);if(!i){e=t;break}t=i}return e?(e.group,e):null},v.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},v.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},v.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},v.isRight=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},v.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),this._items.forEach(function(t){t&&t.dispose()}),this._visibles=this._items=null,this._cellWidths=null,g.prototype._doDispose.call(this)},Object.defineProperty(v.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"direction",{get:function(){return this._direction},set:function(t){t!=this._direction&&(this._direction=t,this.$_resetSpans(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"vertical",{get:function(){return this._direction==p.VERTICAL},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"horizontal",{get:function(){return this._direction==p.HORIZONTAL},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++)i[e]._parent=this;this.$_resetSpans(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"visibles",{get:function(){return this._visibles.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),v.prototype.contains=function(t){for(var e=0,i=this._items;e<i.length;e++)if(i[e]===t)return!0;return!1},v.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},v.prototype.getItem=function(t){return this._items[t]},v.prototype.getVisible=function(t){return this._visibles[t]},v.prototype.addColumn=function(t,e){var i=new d(t);this.addItem(i,e)},v.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&0<=e&&e<=this._items.length&&(this._items.splice(e,0,t),(t._parent=this).$_resetVisibles())},v.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,i=this._items;e<i.length;e++){var o=i[e];t&&o instanceof v&&o.clear(),o._detach()}this._items=[],this._visibles=[],this._headerCols=0,this._headerRows=0,this._cols=0,this._rows=0,this._footerCols=0,this._footerRows=0,this._summaryCols=0,this._summaryRows=0},v.prototype.removeItem=function(t){var e=this.indexOf(t);0<=e&&(this._items.splice(e,1),t._detach())},v.prototype.removeItemAt=function(t){0<=t&&t<this._items.length&&this._items.splice(t,1)[0]._detach()},v.prototype.moveItem=function(t,e){var i=this._items.length;if(t!=e&&0<=t&&t<i&&0<=e&&e<i){var o=this._items[t];this._items.splice(t,1),this._items.splice(e,0,o)}},v.prototype.getColumn=function(t,e,i){var o=this.$_getLeaf(e,i).column;return"string"==typeof o?t.columnByName(o):o},v.prototype.findItem=function(t){if(t)for(var e=0,i=this._items;e<i.length;e++){var o=i[e];if(o instanceof d&&o.column===t)return o;if(o instanceof v){var r=o.findItem(t);if(r)return r}}return null},v.prototype.rightOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=w(this,e+1)}catch(t){}return null},v.prototype.leftOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(0<e)return t=E(this,e-1)}catch(t){}return null},v.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=x(this,e+1)}catch(t){}return null},v.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(0<e)return t=I(this,e-1)}catch(t){}return null},v.prototype.lowerOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e<this.count-1)return t=O(this,e+1)}catch(t){}return null},v.prototype.upperOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(0<e)return t=S(this,e-1)}catch(t){}return null},Object.defineProperty(v.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this.$_resetSpans(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"footerRows",{get:function(){return this._footerRows},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"summaryRows",{get:function(){return this._summaryRows},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"first",{get:function(){return 0<this._visibles.length?this._visibles[0].first:this},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"last",{get:function(){var t=this._visibles.length;return 0<t?this._visibles[t-1].last:this},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"firstColumn",{get:function(){return 0<this._visibles.length?this._visibles[0].firstColumn:null},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"boundColumn",{get:function(){return this.firstColumn},enumerable:!0,configurable:!0}),v.prototype.load=function(t){this.clear(),t.items&&this._loadItems(t.items),t.header&&this._header.assignFrom(t.header),g.prototype.load.call(this,t)},v.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},v.prototype.getCellWidth=function(t){return 100},v.prototype._prepareLayout=function(t){for(var e=0,i=this._visibles;e<i.length;e++)i[e]._prepareLayout(t)},v.prototype.toString=function(){return this._name||g.prototype.toString.call(this)},v.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},v.prototype._setColumns=function(t){for(var e=this._items.length=0,i=t.count;e<i;e++){var o=new d(t.getColumn(e));this._items.push(o),o._parent=this}},v.prototype._loadItems=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],r=void 0;"string"==typeof o?r=new d(o):o&&(o.items?r=new v(o.name,o.direction):o.column&&(r=new d(o.column))),r&&(r._parent=this,r.load(o),this._items.push(r))}},v.prototype.$_bindColumns=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e];o._root=null,o instanceof v?o.$_bindColumns(t):o.$_bindColumn(t)}},v.prototype.$_parseHeaderCells=function(t,e,i,o){for(var r=this._direction===p.HORIZONTAL,n=0,s=0,a=0,l=this._visibles;a<l.length;a++){var u=l[a];if(u._row=e,u._col=i,u._hspan=1,u._cspan=1,(t[e][i]=u)instanceof v)if(u.$_parseHeaderCells(t,e+1,i,o),r){i++;for(var h=1;h<u.cols;h++)t[e][i++]=new c(u,h)}else{for(h=1;h<u.cols;h++)t[e][i+h]=new c(u,h);e+=u.headerRows}else if(r){for(h=1;h<this.headerRows-1;h++)t[e+h][i]=new c(u,h),u._hlen=u._hspan++;i+=u.cols}else{for(h=1;h<this.cols;h++)t[e][i+h]=new c(u,h),u._clen=u._cspan++;e+=u.rows}r?(s+=u._clen,n=Math.max(u._hlen,n)):(s=Math.max(u._clen,s),n+=u._hlen)}r?(s=Math.max(1,s),n+=this._header.visible?1:0,this._cspan=this._clen=s):(n=Math.max(1,n+(this._header.visible?1:0)),this._clen=this._cspan=s),this._hlen=n},v.prototype.$_parseDataCells=function(t,e,i,o){for(var r=this._direction===p.HORIZONTAL,n=0,s=0,a=0,l=this._visibles;a<l.length;a++){var u=l[a];if(u instanceof v)u.$_parseDataCells(t,e,i,o),r?i+=u.cols:e+=u.rows;else if((t[e][i]=u)._row=e,u._col=i,u._dspan=1,u._cspan=1,r){for(var h=1;h<this.rows;h++)t[e+h][i]=new c(u,h),u._dlen=u._dspan++;i+=u.cols}else{for(h=1;h<this.cols;h++)t[e][i+h]=new c(u,h),u._clen=u._cspan++;e+=u.rows}r?(s+=u._clen,n=Math.max(u._dlen,n)):(s=Math.max(u._clen,s),n+=u._dlen)}r?(s=Math.max(1,s),this._cspan=this._clen=s):(n=Math.max(1,n),this._clen=s),this._dlen=n},v.prototype.$_parseFooterCells=function(t,e,i,o){for(var r=this._direction===p.HORIZONTAL,n=0,s=0,a=0,l=this._visibles;a<l.length;a++){var u=l[a];if(u instanceof v)u.$_parseFooterCells(t,e,i,o),r?i+=u.cols:e+=u.rows;else if((t[e][i]=u)._row=e,u._col=i,u._fspan=1,u._cspan=1,r){for(var h=1;h<this.footerRows;h++)t[e+h][i]=new c(u,h),u._flen=u._fspan++;i+=u.cols}else{for(h=1;h<this.cols;h++)t[e][i+h]=new c(u,h),u._clen=u._cspan++;e+=u.rows}r?(s+=u._clen,n=Math.max(u._flen,n)):(s=Math.max(u._clen,s),n+=u._flen)}r?(s=Math.max(1,s),this._cspan=this._clen=s):(n=Math.max(1,n),this._clen=s),this._flen=n},v.prototype.$_parseSummaryCells=function(t,e,i,o){for(var r=this._direction===p.HORIZONTAL,n=0,s=0,a=0,l=this._visibles;a<l.length;a++){var u=l[a];if(u instanceof v)u.$_parseSummaryCells(t,e,i,o),r?i+=u.cols:e+=u.rows;else if((t[e][i]=u)._row=e,u._col=i,u._sspan=1,u._cspan=1,r){for(var h=1;h<this.summaryRows;h++)t[e+h][i]=new c(u,h),u._slen=u._sspan++;i+=u.cols}else{for(h=1;h<this.cols;h++)t[e][i+h]=new c(u,h),u._clen=u._cspan++;e+=u.rows}r?(s+=u._clen,n=Math.max(u._slen,n)):(s=Math.max(u._clen,s),n+=u._flen)}r?(s=Math.max(1,s),this._cspan=this._clen=s):(n=Math.max(1,n),this._clen=s),this._slen=n},v.prototype.$_resetCellWidths=function(){var t=this._cellWidths;if(t.length=0,this.vertical){for(var e=0,i=this._visibles;e<i.length;e++)if((s=i[e]._cellWidths).length>t.length)for(var o=0;o<s.length;o++)t[o]=s[o]}else for(var r=0,n=this._visibles;r<n.length;r++){var s=n[r]._cellWidths;for(o=0;o<s.length;o++)t.push(s[o])}},v.prototype.$_resetSpans=function(){if(this._direction==p.HORIZONTAL){for(var t=0,e=1,i=1,o=0,r=this._visibles;o<r.length;o++)(a=r[o])instanceof v&&a.$_resetSpans(),t+=a.cols,e=Math.max(e,a.headerRows),i=Math.max(i,a.rows);this._cols=t,this._headerRows=e+1,this._rows=i,this._footerRows=i,this._summaryRows=i}else{this._cols=1,this._headerRows=1,this._rows=0,this._footerRows=0;for(var n=this._summaryRows=0,s=this._visibles;n<s.length;n++){var a;(a=s[n])instanceof v&&a.$_resetSpans(),this._headerRows+=a.headerRows,this._rows+=a.rows,this._footerRows+=a.footerRows,this._summaryRows+=a.summaryRows,this._cols=Math.max(a.cols,this._cols)}}this.$_resetCellWidths()},v.prototype.$_resetVisibles=function(){var t=this.vertical,e=this._y,i=this._d,o=0,r=0;this._visibles=[];for(var n=0,s=this._items;n<s.length;n++){var a=s[n];a._index=o++,a.visible&&(this._visibles.push(a),a._y=t?e+1:e,a._vindex=r++),a instanceof v&&a.$_resetVisibles(),a.visible&&(a._d=t?Math.max(i,a._vindex):i+a._vindex)}this.$_resetSpans()},v.prototype.$_getLeaf=function(t,e){for(var i=0,o=this._items;i<o.length;i++){var r=o[i];if(r instanceof v){var n=r.row,s=n+r.rows;if(n<=t&&t<s){var a=r.col,l=a+r.cols;if(a<=e&&e<l)return this.$_getLeaf(t-n,e-a)}}else if(r.row===t&&r.col===e)return r}return null},v.prototype.$_collectCellWidths=function(){for(var t=this._cellWidths=[],e=0,i=this._items;e<i.length;e++){var o=i[e],r=o.width;if(o instanceof v){var n=o.$_collectCellWidths();isNaN(r)&&(r=n)}t.push(o._cellWidth=r)}var s=this.width;if(isNaN(this.width))if(s=0,this.vertical)for(var a=0,l=t;a<l.length;a++){var u=l[a];s=Math.max(s,u)}else for(var h=0,c=t;h<c.length;h++)s+=u=c[h];return s},v.prototype.$_arrangeCellWidths=function(){var t=this._items.length;if(!(t<1)){var e=this.width;if(!isNaN(e))if(this.vertical)for(var i=0;i<t;i++)this._items[i]._cellWidth=e,this._cellWidths[i]=e;else{for(var o=0,r=0,n=this._items;r<n.length;r++)o+=n[r]._cellWidth;var s=o;for(i=0;i<t-1;i++){var a=this._items[i],l=Math.floor(e*a._cellWidth/o);this._items[i]._cellWidth=l,s-=this._cellWidths[i]=l}(c=this._items[t-1])._cellWidth=s,this._cellWidths[t-1]=s}for(var u=0,h=this._items;u<h.length;u++){var c;(c=h[u])instanceof v&&c.$_arrangeCellWidths()}}},v.prototype.$_fillCellWidths=function(t,e){var i=t;if(this.vertical)for(var o=0,r=this._items;o<r.length;o++)(a=r[o])instanceof v?a.$_fillCellWidths(i,e):e[i]=Math.max(e[i],a._cellWidth);else for(var n=0,s=this._items;n<s.length;n++){var a;(a=s[n])instanceof v?(a.$_fillCellWidths(i,e),i+=a.cols):(e[i]=Math.max(e[i],a._cellWidth),i++)}},v.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},v.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},v.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},v.prototype.$_collectHorzColumns=function(t,e,i){if(this.horizontal)for(var o=e;o<=i;o++){var r=this._visibles[o];r instanceof v?r.$_collectHorzColumns(t,0,r.visibleCount-1):r instanceof d&&t.push(r._columnObj)}},v.prototype.$_changeChildVIndex=function(t,e){t&&e!=t.vindex&&0<=e&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index)},v.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;i!=e&&0<=e&&e<this._items.length&&(this._items.splice(i,1),this._items.splice(e,0,t),this._childIndexChanged(t))}},v);function v(t,e){var i=g.call(this)||this;return i._direction=p.HORIZONTAL,i._items=[],i._visible=!0,i._header=new y,i._visibles=[],i._headerCols=0,i._headerRows=0,i._cols=0,i._rows=0,i._footerCols=0,i._footerRows=0,i._summaryCols=0,i._summaryRows=0,i._cellWidths=[],i._name=t,i._direction=e||p.HORIZONTAL,i}e.CellLayoutGroupItem=b;var C,w=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof d)return r;if(r instanceof b&&(r=r.first)instanceof d)return r}return null},E=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof d)return o;if(o instanceof b&&(o=o.last)instanceof d)return o}return null},x=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof d)return r;if(r instanceof b&&(r=r.first)instanceof d)return r}return null},I=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof d)return o;if(o instanceof b&&(o=o.last)instanceof d)return o}return null},O=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof d)return r;if(r instanceof b&&(r=r.first)instanceof d)return r}return null},S=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof d)return o;if(o instanceof b&&(o=o.last)instanceof d)return o}return null},D=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);n instanceof d?e.push(n._columnObj):n instanceof b&&D(n,e,i)}},R=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);n instanceof d?e.push(n._columnObj):n instanceof b&&R(n,e,i)}},P=(i(T,C=b),Object.defineProperty(T.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"root",{get:function(){return this},enumerable:!0,configurable:!0}),T.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},T.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},T);function T(t){var e=C.call(this,"$_root_$",null)||this;return e._owner=t,e.header._visible=!1,e}var k,L=(k=j.EventAware,i(M,k),M.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),k.prototype._doDispose.call(this)},Object.defineProperty(M.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"count",{get:function(){return this._root.count},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"footerRows",{get:function(){return this._root._flen},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"sumaryRows",{get:function(){return this._root._slen},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"first",{get:function(){return this._root.first},enumerable:!0,configurable:!0}),Object.defineProperty(M.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!0,configurable:!0}),M.prototype.load=function(t){return this.$_clear(),this._root._loadItems(t),this._changed(),this},M.prototype.cleanColumns=function(){this._root.cleanColumns()},M.prototype.invalidate=function(){this._changed()},M.prototype.invalidateIndices=function(){this._changed()},M.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateLayout())},M.prototype.getVisible=function(t){return this._root.getVisible(t)},M.prototype.add=function(t,e){(t=t||this._root).addColumn(e)},M.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},M.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof d&&i[o]._columnObj===t)return{row:e,col:o};return null},M.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof d&&i[o]._columnObj===t)return{row:e,col:o};return null},M.prototype.getFooterCellPos=function(t){for(var e=0;e<this._footerCells.length;e++)for(var i=this._footerCells[e],o=0;o<i.length;o++)if(i[o]instanceof d&&i[o]._columnObj===t)return{row:e,col:o};return null},M.prototype.getSummaryCellPos=function(t){for(var e=0;e<this._summaryCells.length;e++)for(var i=this._summaryCells[e],o=0;o<i.length;o++)if(i[o]instanceof d&&i[o]._columnObj===t)return{row:e,col:o};return null},M.prototype.getDataColumns=function(t){return[]},M.prototype.collectColumns=function(t,e,i){var o=[];return D(this._root,o,e),o},M.prototype.collectDataColumns=function(t,e){var i=t.index,o=e.index,r=[];R(this._root,r,!0);for(var n=r.length-1;0<=n;n--){var s=r[n].layout.index;(s<i||o<s)&&r.splice(n,1)}return r},M.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},M.prototype._changed=function(){this._dirty=!0,this.grid.invalidateLayout()},M.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[],this._footerCells=[]},M.prototype.$_refresh=function(t){this._dirty?(this._root.$_bindColumns(t),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root),this._dirty=!1):this._resized&&(this.$_calculateCellWidths(this._root),this._resized=!1)},M.prototype.$_prepareLayout=function(t){this._root._prepareLayout(t)},M.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i,e),this.$_parseDataCells(i,e),this.$_parseFooterCells(i,e),this.$_parseSummaryCells(i,e)},M.prototype.$_parseHeaderCells=function(t,e){for(var i=this._headerCells,o=0,r=0,n=t;r<n.length;r++){var s=n[r];o=Math.max(o,s.headerRows)}for(var a=i.length;a<o;a++)i.push([]);this._root.$_parseHeaderCells(i,0,0,e)},M.prototype.$_parseDataCells=function(t,e){for(var i=this._dataCells,o=0,r=0,n=t;r<n.length;r++){var s=n[r];o=Math.max(o,s.rows)}for(var a=i.length;a<o;a++)i.push([]);this._root.$_parseDataCells(i,0,0,e)},M.prototype.$_parseFooterCells=function(t,e){for(var i=this._footerCells,o=0,r=0,n=t;r<n.length;r++){var s=n[r];o=Math.max(o,s.footerRows)}for(var a=i.length;a<o;a++)i.push([]);this._root.$_parseFooterCells(i,0,0,e)},M.prototype.$_parseSummaryCells=function(t,e){for(var i=this._summaryCells,o=0,r=0,n=t;r<n.length;r++){var s=n[r];o=Math.max(o,s.summaryRows)}for(var a=i.length;a<o;a++)i.push([]);this._root.$_parseSummaryCells(i,0,0,e)},M.prototype.$_calculateCellWidths=function(t){t.$_collectCellWidths(),t.$_arrangeCellWidths();for(var e=this._cellWidths=[],i=0,o=t.cols;i<o;i++)e.push(0);t.$_fillCellWidths(0,e)},M.prototype._columnsChanged=function(t){},M.prototype._columnChanged=function(t){},M.prototype._itemIndexChanged=function(t){this.invalidateIndices()},M.prototype._itemWidthChanged=function(t){this.invalidateSize()},M.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},M);function M(t){var e=k.call(this)||this;return e._dirty=!1,e._resized=!1,e._headerCells=[],e._dataCells=[],e._footerCells=[],e._summaryCells=[],e._cellWidths=[],e._grid=t,e._root=new P(e),e}e.GridCellLayout=L;var A,V=(i(N,A=L),N.prototype._columnsChanged=function(t){this.setColumns(t),A.prototype._columnsChanged.call(this,t)},N.prototype._columnChanged=function(t){A.prototype._columnChanged.call(this,t)},N);function N(t){return A.call(this,t)||this}e.DefaultCellLayout=V});t(D);D.CellLayoutItem,D.ProxyCellLayoutItem,D.CellLayoutColumnItem,D.ColumnLayoutDirection,D.CellLayoutHeader,D.CellLayoutGroupItem,D.GridCellLayout,D.DefaultCellLayout;var X=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.temp=function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=null),s.$_temp||(s.$_temp=new s),s.$_temp._grid=t,s.$_temp._itemIndex=e,s.$_temp._layout=i instanceof D.CellLayoutItem?i:i&&i.layout,s.$_temp},s.areEquals=function(t,e){return t===e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},s.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},s.clearTemp=function(){s.$_temp&&(s.$_temp=s.$_temp.dispose())},s.prototype._doDispose=function(){this._grid=null,this._layout=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataColumn",{get:function(){var t=this.column;return t instanceof G.DataColumn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueColumn",{get:function(){var t=this.column;return t instanceof F.ValueColumn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataField",{get:function(){var t=this.dataColumn;return t instanceof G.DataColumn?t.dataIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){var t=this.column;if(t instanceof G.DataColumn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixed",{get:function(){var t=this.column;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.layout.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||0<=this._itemIndex&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowFixed",{get:function(){var t=this.column;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager;return 0<=this._itemIndex&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isFirst",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var t=this._grid.getVisibleLayout(0);return(t=t instanceof D.CellLayoutColumnItem?t:t.root.first)===this._layout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isEditableFirst",{get:function(){if(this._grid&&this._layout){var t=this.grid.collectColumns(!0,!0,!0),e=t.indexOf(this._layout.firstColumn);if(0<=e){for(var i=e-1;i--;){var o=t[i];if(o instanceof G.SeriesColumn)return!1;if(o instanceof G.DataColumn&&o.editable&&!o.readOnly&&o.visible)return!1}return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isLast",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var t=this._grid.getVisibleLayout(this._grid.visibleLayoutCount-1);return(t=t instanceof D.CellLayoutColumnItem?t:t.root.last)===this._layout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isTop",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isBottom",{get:function(){return!0},enumerable:!0,configurable:!0}),s.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof F.GridColumn?e.layout:e,this},s.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},s.prototype.reset=function(){this._itemIndex=-1,this._layout=null},s.prototype.clone=function(){return new s(this._grid,this._itemIndex,this._layout)},s.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},s.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},s.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},s.prototype.first=function(){this._grid&&(this._itemIndex=0)},s.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},s.prototype.right=function(){var t=l(this._grid,this._layout);t&&(this._layout=t)},s.prototype.left=function(){var t=u(this._grid,this._layout);t&&(this._layout=t)},s.prototype.next=function(){var t=h(this._grid,this._layout);return!!t&&(this._layout=t,!0)},s.prototype.prev=function(){var t=c(this._grid,this._layout);return!!t&&(this._layout=t,!0)},s.prototype.lower=function(t){return this.isBottom?this._itemIndex<this._grid.itemCount-1&&(this.incRow(1),!0):(this._layout=D.CellLayoutGroupItem.getLower(this._layout),!0)},s.prototype.upper=function(t){return this.isTop?0<this._itemIndex&&(this.incRow(-1),!0):(this._layout=D.CellLayoutGroupItem.getUpper(this._layout),!0)},s.prototype.home=function(){var t=this._grid;if(t&&0<t.visibleLayoutCount){var e=t.getVisibleLayout(0);this._layout=e instanceof D.CellLayoutColumnItem?e:e.root.first}},s.prototype.end=function(){var t=this._grid;if(t&&0<t.visibleLayoutCount){var e=t.getVisibleLayout(t.visibleLayoutCount-1);this._layout=e instanceof D.CellLayoutColumnItem?e:e.root.last}},s.prototype.down=function(t,e){this._itemIndex<this._grid.itemCount-1?this.incRow(1):this._layout=D.CellLayoutGroupItem.getLower(this._layout)},s.prototype.up=function(t,e){0<this._itemIndex?this.incRow(-1):this._layout=D.CellLayoutGroupItem.getUpper(this._layout)},s.prototype.isEditableLast=function(){var t=this._grid;if(t&&this.column)for(var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this.column)+1,o=e.length;i<o;i++)if(e[i]instanceof G.SeriesColumn)return!1;return!0},s.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},s.prototype.assignFrom=function(t){t instanceof s?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):r.prototype.assignFrom.call(this,t)},s.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},s);function s(t,e,i){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===i&&(i=null);var o=r.call(this)||this;return o._itemIndex=-1,o._grid=t,o._itemIndex=e,o._layout=i instanceof F.GridColumn?i.layout:i,o}e.CellIndex=n;var a,l=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=D.CellLayoutGroupItem.getRight(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)+1,n=i.layoutCount;r<n;r++){if((o=i.getLayout(r))instanceof D.CellLayoutColumnItem)return o;if(o instanceof D.CellLayoutGroupItem&&(o=o.first))return o}return null},u=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=D.CellLayoutGroupItem.getLeft(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)-1;0<=r;r--){if((o=i.getLayout(r))instanceof D.CellLayoutColumnItem)return o;if(o instanceof D.CellLayoutGroupItem&&(o=o.last))return o}return null},h=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=D.CellLayoutGroupItem.getNext(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)+1,n=i.layoutCount;r<n;r++){if((o=i.getLayout(r))instanceof D.CellLayoutColumnItem)return o;if(o instanceof D.CellLayoutGroupItem&&(o=o.first))return o}return null},c=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=D.CellLayoutGroupItem.getPrev(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)-1;0<=r;r++){if((o=i.getLayout(r))instanceof D.CellLayoutColumnItem)return o;if(o instanceof D.CellLayoutGroupItem&&(o=o.last))return o}return null},p=(a=ce.Base,i(d,a),d.$_setRange=function(t,e,i,o,r){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.index<=r.index?i:r,t._col2=i.index<=r.index?r:i,t},d.create=function(t,e){if(e&&t!==e)return d.$_setRange(new d,t.itemIndex,t.layout,e.itemIndex,e.layout);var i=new d;return i._row1=i._row2=t.itemIndex,i._col1=i._col2=t.layout,i},d.temp=function(t,e){var i=d.$_TEMP;return e&&t!==e?d.$_setRange(i,t.itemIndex,t.layout,e.itemIndex,e.layout):(i._row1=i._row2=t.itemIndex,i._col1=i._col2=t.layout,i)},d.createRange=function(t,e,i,o){return d.$_setRange(new d,t,e,i,o)},Object.defineProperty(d.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"r1",{get:function(){return this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"c1",{get:function(){return this._col1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"r2",{get:function(){return this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"c2",{get:function(){return this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"firstCell",{get:function(){var t=new n;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.index<=this._col2.index?t.layout=this._col1:t.layout=this._col2,t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"lastCell",{get:function(){var t=new n;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.index>=this._col2.index?t.layout=this._col1:t.layout=this._col2,t},enumerable:!0,configurable:!0}),d.prototype.contains=function(t,e){if(e){var i=e.index;return t>=this._row1&&t<=this._row2&&i>=this._col1.index&&i<=this._col2.index}return!1},d.prototype.containsIndex=function(t){return t&&this.contains(t.itemIndex,t.column)},d.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.index>this._col2.index){var e=this._col1;this._col1=this._col2,this._col2=e}return this},d.prototype.normalizeData=function(){return this.normalize(),this},d.prototype.intersectsWith=function(t){return!1},d.NULL=new d,d.$_TEMP=new d,d);function d(){var t=a.call(this)||this;return t._row1=0,t._row2=0,t}e.CellRange=p});t(X);X.CellIndex,X.CellRange;var A=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=P.ExpressionRuntime,i(s,r),s.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"index",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),s.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},s.prototype.setItem=function(t){this._item=t,this._group=z.Utils.cast(t,q.GroupItem)},s.prototype.isIdentifier=function(t){return t=t.toLowerCase(),s.IDENTS.hasOwnProperty(t)?s.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},s.prototype.evaluateIdentifier=function(t){switch(t){case s.ID_ROW:return this._item.index;case s.ID_DATAROW:return this._item.dataRow;case s.ID_CHECKED:return this._item.checked;case s.ID_STATE:switch(this._item.rowState){case x.RowState.CREATED:return"c";case x.RowState.UPDATED:return"u";case x.RowState.DELETED:return"d";case x.RowState.CREATE_AND_DELETED:return"x"}return;case s.ID_COUNT:return this._group?this._group.count:0;case s.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},s.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=s.ID_VALUE&&t!=s.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},s.prototype.evaluateIndexerS=function(t,e,i){if(t!=s.ID_VALUE&&t!=s.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},s.IDENTS={row:s.ID_ROW=0,datarow:s.ID_DATAROW=1,checked:s.ID_CHECKED=2,value:s.ID_VALUE=3,values:s.ID_VALUES=4,state:s.ID_STATE=5,count:s.ID_COUNT=6,dcount:s.ID_DCOUNT=7},s);function s(){var t=r.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowExpressionRuntime=n;var a,l=(a=P.ExpressionRuntime,i(p,a),p.prototype._doDispose=function(){this._cell=null,this._item=null,this._grid=null,this._dataSource=null,a.prototype._doDispose.call(this)},p.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},p.prototype.setCell=function(t,e){this._cell=t,this._grid=t.index.grid,this._item=t.index.item||e},p.prototype.isIdentifier=function(t){return t=t.toLowerCase(),p.IDENTS.hasOwnProperty(t)?p.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},p.prototype.evaluateIdentifier=function(t){if(this._cell.index.itemIndex<0){var e=this._cell.index.dataField;switch(t){case p.ID_VALUE:return this._item.getData(e);case p.ID_DATA_ROW:return this._item.dataRow}}switch(t){case p.ID_VALUE:return this._cell.value();case p.ID_ROW:return this._cell.index.itemIndex;case p.ID_DATA_ROW:return this._cell.index.dataRow;case p.ID_INDEX:return this._cell.index.column.index;case p.ID_FIELD:return this._cell.index.dataField;case p.ID_CHECKED:return this._item.checked;case p.ID_STATE:switch(this._item.rowState){case x.RowState.CREATED:return"c";case x.RowState.UPDATED:return"u";case x.RowState.DELETED:return"d";case x.RowState.CREATE_AND_DELETED:return"x"}return;case p.ID_TAG:return this._cell.index.column.tag;case p.ID_BASE:var i=this._cell.index.dataColumn.baseIndex;return 0<=i?this._item.getData(i):void 0;case p.ID_COUNT:return this._item instanceof q.GroupItem?this._item.count:0;case p.ID_DCOUNT:return this._item instanceof q.GroupItem?this._item.descendantCount:0;case p.ID_CHANGED_CELL:var o=this._cell.index,r=o.dataRow,n=o.dataField;return 0<=n&&this._item.rowState==x.RowState.UPDATED&&this._dataSource.isDataChanged(r,n);case p.ID_LOOKUP_EXISTS:var s=this._cell.index.dataColumn,a=void 0;if(a=s.lookupSource){for(var l=s.lookupKeyFieldIds,u=l.length,h=[],c=0;c<u;c++)h.push(this._item.getData(l[c]));return a.exists(h)}return-1<s.getLookupIndex(this._cell.value())}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},p.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=p.ID_VALUE&&t!=p.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},p.prototype.evaluateIndexerS=function(t,e,i){if(t!=p.ID_VALUE&&t!=p.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},p.IDENTS={value:p.ID_VALUE=0,row:p.ID_ROW=1,datarow:p.ID_DATA_ROW=2,index:p.ID_INDEX=3,field:p.ID_FIELD=4,checked:p.ID_CHECKED=5,state:p.ID_STATE=6,tag:p.ID_TAG=7,base:p.ID_BASE=8,values:p.ID_VALUES=9,count:p.ID_COUNT=10,dcount:p.ID_DCOUNT=11,changedcell:p.ID_CHANGED_CELL=12,lookupexists:p.ID_LOOKUP_EXISTS=13},p);function p(){var t=a.call(this)||this;return t._fieldCount=0,t}e.DataCellExpressionRuntime=l;var u,h=(u=P.ExpressionRuntime,i(c,u),c.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,u.prototype._doDispose.call(this)},c.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},c.prototype.setItem=function(t){this._item=t},c.prototype.isIdentifier=function(t){return t=t.toLowerCase(),c.IDENTS.hasOwnProperty(t)?c.IDENTS[t]:u.prototype.isIdentifier.call(this,t)},c.prototype.evaluateIdentifier=function(t){var e;switch(t){case c.ID_VALUE:return this._item.getData(this._cell.index.dataField);case c.ID_BASE:return 0<=(e=this._cell.index.dataColumn.baseIndex)?this._item.getData(e):void 0;case c.ID_PREV_VALUES:var i=this._cell.index.column,o=this._grid.getDataColumns();e=o.indexOf(i);var r=[];if(o.length<0||e<0)return;for(var n=0,s=Math.min(e,o.length);n<s;n++)r.push(this._item.getData(o[n].dataIndex));return r.join("`")}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},c.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=c.ID_VALUE&&t!=c.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},c.prototype.evaluateIndexerS=function(t,e,i){if(t!=c.ID_VALUE&&t!=c.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},c.IDENTS={value:c.ID_VALUE=0,values:c.ID_VALUES=1,base:c.ID_BASE=2,prevvalues:c.ID_PREV_VALUES=3},c);function c(){var t=u.call(this)||this;return t._fieldCount=0,t}e.EqualBlankRuntime=h;var d,_=(d=P.ExpressionRuntime,i(f,d),f.prototype.setGrid=function(t){this._grid=t},f.prototype.setGroup=function(t){this._group=t},f.prototype.isIdentifier=function(t){return t=t.toLowerCase(),f.IDENTS.hasOwnProperty(t)?f.IDENTS[t]:d.prototype.isIdentifier.call(this,t)},f.prototype.evaluateIdentifier=function(t){var e,i,o=this._group;switch(t){case f.ID_GROUP_FIELD:return(e=o.dataSource.getField(o.groupField))?e.fieldName:"";case f.ID_FIELD_HEADER:return(e=o.dataSource.getField(o.groupField))?e.header:"";case f.ID_GROUP_COLUMN:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.displayText:o.dataSource.getFieldName(o.groupField);case f.ID_COLUMN_HEADER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.header.text||i.displayText:o.dataSource.getFieldName(o.groupField);case f.ID_COLUMN_FOOTER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.footer.groupText||i.displayText:o.dataSource.getFieldName(o.groupField);case f.ID_GROUP_VALUE:var r=o.firstItem;return r?r.getData(o.groupField):void 0;case f.ID_ROW_COUNT:return o.descendantCount}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},f.prototype.evaluateIndexerI=function(t,e){switch(t){case f.ID_SUM:case f.ID_MAX:case f.ID_MIN:case f.ID_AVG:case f.ID_DATA_COUNT:case f.ID_DATA_AVG:if(isNaN(e)||e<0)return;var i=void 0;switch(t){case f.ID_SUM:i=this._group.getSum(e);break;case f.ID_MAX:i=this._group.getMax(e);break;case f.ID_MIN:i=this._group.getMin(e);break;case f.ID_AVG:i=this._group.getAvg(e)}return isNaN(i)?"":String(i)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},f.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,r=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,r)},f.IDENTS={groupfield:f.ID_GROUP_FIELD=0,fieldheader:f.ID_FIELD_HEADER=1,groupcolumn:f.ID_GROUP_COLUMN=2,columnheader:f.ID_COLUMN_HEADER=3,columnfooter:f.ID_COLUMN_FOOTER=4,groupvalue:f.ID_GROUP_VALUE=5,rowcount:f.ID_ROW_COUNT=6,sum:f.ID_SUM=7,max:f.ID_MAX=8,min:f.ID_MIN=9,avg:f.ID_AVG=10,datacount:f.ID_DATA_COUNT=11,dataavg:f.ID_DATA_AVG=12},f);function f(){return d.call(this)||this}e.RowGroupStatementRuntime=_});t(A);A.DataRowExpressionRuntime,A.DataCellExpressionRuntime,A.EqualBlankRuntime,A.RowGroupStatementRuntime;var Z=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"error",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"errorLevel",{get:function(){return W.ValidationLevel.IGNORE},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.setIndex=function(t){this._index.assignFrom(t)},s.prototype.setLayout=function(t){this._index.layout=t},s.ERROR="<<ERROR>>",s);function s(t){var e=r.call(this)||this;return e._index=new X.CellIndex,e._name=t,e}e.GridCell=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),u);function u(t,e){void 0===e&&(e=null);var i=a.call(this,e)||this;return i._model=t,i}e.StyledCell=l;var h,c=(i(p,h=n),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"blankState",{get:function(){return W.BlankState.NONE},enumerable:!0,configurable:!0}),p.prototype.setCellStyles=function(t){this._cellStyles=t},p);function p(t){return h.call(this,t)||this}e.ValueCell=c;var d,_=(i(f,d=c),f.getText=function(t,e){var i=0<=e.dataIndex?t.getData(e.dataIndex):void 0;return f._getText(t,e,i)},f._getText=function(t,e,i){var o,r=e;if(r.lookupDisplay){var n=r.lookupSource;if(n){for(var s=r.lookupKeyFieldIds,a=s.length,l=[],u=0;u<a;u++)l.push(t.getData(s[u]));o=void 0!==(o=n.lookup(l,r.valueSeparator))?o:null!=r.textOfInvalid?r.textOfInvalid:i}else{var h=r.labelFieldIndex;o=0<=h?t.getData(h):r.getLookupLabel(i)}}else{var c=void 0,p=void 0,d=void 0;o=i,r.valueType&&r.valueType==W.ValueType.NUMBER&&null!=r.nanText&&isNaN(o)?o=r.nanText:null!=o&&("string"==typeof o||"number"==typeof o)&&o.toString()&&(c=r.displayRegExp)&&(p=r.displayReplace)?o=o.toString().replace(c,p):(d=r.displayCallback)?o=d(r.grid.getHandler(),X.CellIndex.temp(r.grid,t.index,e).proxy(),o):null!=o&&"object"==typeof o&&(o=JSON.stringify(o))}var _=null==o?"":String(o);return _=r.affix(_)},f.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new A.EqualBlankRuntime),this._equalBlankRuntime},f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},f.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(0<=t)return this.item.getData(t)},f.prototype.getDisplayText=function(t){var e,i=t.formatOptions,o=this.value,r=(this.error,this.errorLevel,this.dataColumn);if(r)switch(r.valueType){case W.ValueType.TEXT:e=this.getText;break;case W.ValueType.NUMBER:var n=Number(o),s=void 0;e=isNaN(n)?r.nanText:0==n&&null!=r.zeroText?r.zeroText:(s=i.getNumberFormatter(r.numberFormatter))?s.format(n):this.getText;break;case W.ValueType.DATETIME:var a=void 0;e=o instanceof Date&&(a=i.getDateWriter(r.datetimeWriter))?a.getText(o):this.getText;break;case W.ValueType.BOOLEAN:var l=void 0;e=(l=i.getBoolFormatter(r.boolFormatter))?l.formatValue(o):this.getText;break;case W.ValueType.OBJECT:default:e=this.getText}return e},Object.defineProperty(f.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"blankState",{get:function(){var t=W.BlankState.NONE,e=this.index,i=this.dataColumn,o=this.item,r=i.equalBlankNode,n=r&&f.equalBlankRuntime();if(i&&(i.equalBlank||r)&&i.dataRoot&&0<=o.dataRow){var s=i.grid,a=s.itemCount;if(r&&n&&n.setDataArguments(o.dataSource,this,o),1<a){var l=e.itemIndex,u=i.dataIndex,h=r?(n.setItem(o),r.evaluate(n)):o.getData(u);if(0<l){var c,p,d,_=s.getItem(l-1);l<a-1?(d=s.getItem(l+1),_ instanceof q.GridRow?(c=r?(n.setItem(_),r.evaluate(n)):_.getData(u),(h instanceof Date&&c instanceof Date?+h==+c:h==c)?t=d instanceof q.GridRow&&((p=r?(n.setItem(d),r.evaluate(n)):d.getData(u))instanceof Date&&h instanceof Date?+p==+h:p==h)?W.BlankState.BODY:W.BlankState.TAIL:d instanceof q.GridRow&&((p=r?(n.setItem(d),r.evaluate(n)):d.getData(u))instanceof Date&&h instanceof Date?+p==+h:p==h)&&(t=W.BlankState.HEAD)):d instanceof q.GridRow&&((p=r?(n.setItem(d),r.evaluate(n)):d.getData(u))instanceof Date&&h instanceof Date?+p==+h:p==h)&&(t=W.BlankState.HEAD)):_ instanceof q.GridRow&&((c=r?(n.setItem(_),r.evaluate(n)):_.getData(u))instanceof Date&&h instanceof Date?+c==+h:c==h)&&(t=W.BlankState.TAIL)}else(d=s.getItem(l+1))instanceof q.GridRow&&((p=r?(n.setItem(d),r.evaluate(n)):d.getData(u))instanceof Date&&h instanceof Date?+p==+h:p==h)&&(t=W.BlankState.HEAD)}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"getText",{get:function(){var t=this.index,e=t.dataColumn,i=t.item;return f._getText(i,e,this.value)},enumerable:!0,configurable:!0}),f);function f(t){return void 0===t&&(t=null),d.call(this,t||"dataCell")||this}e.DataCell=_;var y,m=(i(g,y=c),g.prototype._doDispose=function(){y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"text",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),g.prototype.getDisplayText=function(t){return this.text},g);function g(t){return void 0===t&&(t=null),y.call(this,t||"literalCell")||this}e.LiteralCell=m;var b,v=(i(C,b=c),C.getText=function(t,e){return t?t.join(null!=e?e:","):""},C.prototype._doDispose=function(){b.prototype._doDispose.call(this)},C.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(null!=e?e:","):""},Object.defineProperty(C.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"value",{get:function(){var t=this.index.column;if(t instanceof G.SeriesColumn){var e=t.fields,i=e?e.length:0;if(0<i){for(var o=this.item,r=new Array(i),n=0;n<i;n++)0<=e[n]&&(r[n]=o.getData(e[n]));return r}}return[]},enumerable:!0,configurable:!0}),C);function C(t){return void 0===t&&(t=null),b.call(this,t||"seriesCell")||this}e.SeriesCell=v});t(Z);Z.GridCell,Z.StyledCell,Z.ValueCell,Z.DataCell,Z.LiteralCell,Z.SeriesCell;var E=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=q.GroupItemImpl,i(s,r),Object.defineProperty(s.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expanded",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expandable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"collapsable",{get:function(){return!1},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this,-1)||this;return e._provider=t,e}e.RootItem=n;var a,l=(a=j.EventAware,i(u,a),u.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(u.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"summaryMode",{get:function(){return W.SummaryMode.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"fixedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),u.prototype.setFixed=function(t,e,i){},u.prototype.attachItem=function(t){t._parent=this._rootItem},u.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]);r&&e.push(r)}return e},u.prototype.getIndexOfRow=function(t){var e=this.getItemOfRow(t);return e?e.index:-1},u.prototype.getIndicesOfRows=function(t){var e=[],i=t?t.length:0;if(i)for(var o=0;o<i;o++){var r=this.getItemOfRow(t[o]);e.push(r?r.index:-1)}return e},u.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,r=0;r<o;r++){var n=this.getItemOfRow(t[r],e);n&&i.push(n)}return i},u.prototype.exchange=function(t,e){},u.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},u.prototype.checkItem=function(t,e,i,o){if(t){var r=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=r&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=r&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},u.prototype.checkItems=function(t,e,i){if(t&&0<t.length){for(var o=0,r=t.length;o<r;o++){var n=t[o];n instanceof q.GridItem&&this._setChecked(n,e)}i?this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},u.prototype.checkAll=function(t,e,i,o,r){var n=this.itemCount;if(i)for(var s=0;s<n;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<n;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},u.prototype._setCheckItem=function(t,e){t.$_setChecked(e)},u.prototype._clearDisplayLevels=function(){},u.prototype.hasCellStyle=function(){return!1},u.prototype.setCellStyle=function(t,e,i){},u.prototype.setCellStyles=function(t,e,i){},u.prototype.clearCellStyles=function(){},u.prototype.removeCellStyle=function(t){},u.prototype.checkCellStyle=function(t,e){return!1},u.prototype.getCellStyle=function(t,e){return null},u.prototype.canUpdate=function(t,e){if(t){var i=t.dataRow,o=this.dataSource,r=t.itemState,n=q.ItemState_isInserting(r);return(0<=i||n)&&o&&(n||o.canUpdateRow(i))&&o.canUpdateField(i,e)}return!1},u.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},u.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},u.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return 0<=e&&i&&i.canDeleteRow(e)}return!1},u.prototype.findItem=function(t,e,i,o,r){return-1},u.prototype.getSum=function(t){return NaN},u.prototype.getMax=function(t){return NaN},u.prototype.getMin=function(t){return NaN},u.prototype.getAvg=function(t){return NaN},u.prototype.getVar=function(t){return NaN},u.prototype.getVarp=function(t){return NaN},u.prototype.getStdev=function(t){return NaN},u.prototype.getStdevp=function(t){return NaN},Object.defineProperty(u.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!0,configurable:!0}),u.prototype._createRootItem=function(){return new n(this)},u.prototype._hideDeletedChanged=function(){},u.prototype.$_canFire=function(){return this._eventLock<=0},u.prototype._setChecked=function(t,e){t._setChecked(e)},u.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},u.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},u.prototype._setExpanded=function(t,e){t._setExpanded(e)},u.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},u.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},u.prototype._copyExtents=function(t,e){t instanceof q.GridItem&&q.GridItem},u.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(u.RESET)},u.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH)},u.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH_CLIENT)},u.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent(u.ITEM_INSERTED,t)},u.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent(u.ITEM_DELETED,t)},u.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent(u.ITEM_UPDATED,t)},u.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent(u.CHECKABLE_CHANGED,t)},u.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent(u.ITEM_CHECKED,t)},u.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent(u.ITEMS_CHECKED,t,e)},u.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent(u.ITEM_ALL_CHECKED,t)},u.prototype._fireItemCheckChanged=function(t,e){this.fireEvent(u.ITEMCHECK_CHANGED,t,e)},u.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_STATE_CHANGED,t)},u.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CHANGED,t)},u.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CLEARED)},u.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent(u.SORT,t,e,i)},u.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent(u.SORTED)},u.prototype._fireFilterAdded=function(t,e){this._eventLock<=0&&this.fireEvent(u.FILTER_ADDED,t,e)},u.prototype._fireFilterRemoved=function(t,e){this._eventLock<=0&&this.fireEvent(u.FILTER_REMOVED,t,e)},u.prototype._fireFilterCleared=function(t){this._eventLock<=0&&this.fireEvent(u.FILTER_CLEARED,t)},u.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent(u.FILTER_ALL_CLEARED)},u.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent(u.FILTERED,t,e)},u.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(u.COMMAND_STACK_CHANGED,t,e)},u.RESET="onItemProviderReset",u.REFRESH="onItemProviderRefresh",u.REFRESH_CLIENT="onItemProviderRefreshClient",u.ITEM_INSERTED="onItemProviderItemInserted",u.ITEM_DELETED="onItemProviderItemDeleted",u.ITEM_UPDATED="onItemProviderItemUpdated",u.CHECKABLE_CHANGED="onItemProviderCheckableChanged",u.ITEM_CHECKED="onItemProviderItemChecked",u.ITEMS_CHECKED="onItemProviderItemsChecked",u.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",u.ROW_STATE_CHANGED="onItemProviderRowStateChanged",u.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",u.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",u.SORT="onItemProviderSort",u.SORTED="onItemProviderSorted",u.FILTER_ADDED="onItemProviderFilterAdded",u.FILTER_REMOVED="onItemProviderFilterRemoved",u.FILTER_CLEARED="onItemProviderFilterCleared",u.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",u.FILTERED="onItemProviderFiltered",u.ITEMCHECK_CHANGED="onItemProviderItemCheckChanged",u.COMMAND_STACK_CHANGED="onItemProviderCommandStackChanged",u);function u(t){var e=a.call(this)||this;return e._hideDeleted=!1,e._eventLock=0,e._indexing=t,e._rootItem=e._createRootItem(),e}e.ItemProvider=l;var h,c=(i(p,h=l),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)},enumerable:!0,configurable:!0}),p.prototype.setFixed=function(t,e,i){this._source&&this._source.setFixed(t,e,i)},p.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t):-1},p.prototype.getItemOfRow=function(t){return this._source?this._source.getItemOfRow(t):null},p.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},p.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},p.prototype.setCellStyle=function(t,e,i){this._source&&this._source.setCellStyle(t,e,i)},p.prototype.removeCellStyle=function(t){this._source&&this._source.removeCellStyle(t)},p.prototype.clearCellStyles=function(){this._source&&this._source.clearCellStyles()},p.prototype._initialize=function(){},p.prototype._clearItems=function(){},p.prototype._populateItems=function(){this._resetItemIndicies(0)},p.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},p.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},p.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},p.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},p.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},p.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},p.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},p.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},p.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},p.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},p.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},p.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},p.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},p.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},p.prototype.onItemProviderFilterAdded=function(t,e,i){},p.prototype.onItemProviderFilterRemoved=function(t,e,i){},p.prototype.onItemProviderFilterCleared=function(t,e){},p.prototype.onItemProviderFilterAllCleared=function(t){},p.prototype.onItemProviderFiltered=function(t){},p.prototype.onItemProviderSort=function(t,e,i){},p.prototype.onItemProviderSorted=function(t){},p.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},p);function p(t,e){var i=h.call(this,e)||this;return i._initialize(),i.source=t,i}e.ProxyItemProvider=c});t(E);E.RootItem,E.ItemProvider,E.ProxyItemProvider;var v=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Error,i(s,r),s);function s(t){return r.call(this,t)||this}e.EditCommandError=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){},u.prototype.undo=function(){},u.prototype.redo=function(t){},u.prototype.execute=function(){return this.redo(!1)},u);function u(){return a.call(this)||this}e.EditCommand=l;var h,c=(i(p,h=l),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},p.prototype.undo=function(){},p.prototype.redo=function(t){},p.prototype.execute=function(){return this.redo(!1)},p);function p(){return h.call(this)||this}e.EditCommandGruop=c;var d,_=(d=j.EventAware,i(f,d),f.prototype._doDispose=function(){this._owner=null,this._commands=null,d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._commands.length},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canUndo",{get:function(){return 0<=this._current},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"undoing",{get:function(){return this._undoing},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"redoing",{get:function(){return this._redoing},enumerable:!0,configurable:!0}),f.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},f.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},f.prototype.execute=function(t){if(t){var e=t.execute();return this._current++,this._commands[this._current]=t,this.$_shrink(this._current+1),this._changed(),e}},f.prototype.flush=function(){var t=this._commands.length;if(0<t){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},f.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},f.prototype.$_shrink=function(t){if(0<=t&&t<this._commands.length){for(var e=this._commands.length-1;t<=e;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},f);function f(t){var e=d.call(this)||this;return e._commands=[],e._current=-1,e._undoing=!1,e._redoing=!1,e._owner=t,e}e.EditCommandStack=_});t(v);v.EditCommandError,v.EditCommand,v.EditCommandGruop,v.EditCommandStack;var V=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s,r=(s=q.GridRow,i(n,s),Object.defineProperty(n.prototype,"values",{get:function(){},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.beginEdit=function(t,e){},n.prototype.setValue=function(t,e){},Object.defineProperty(n.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),n.prototype.getData=function(t){return null},n.prototype.setData=function(t,e){},n.prototype.getRowData=function(){return null},n.prototype.getRowObject=function(){return null},n.prototype._clearDisplayLevels=function(){},n);function n(t,e,i,o,r){var n=s.call(this,o)||this;return n._started=!1,n._checkDiff=!1,n._strictDiff=!1,n._target=e,t.attachItem(n),n._setIndex(i),n._state=r,n.$_setDisplayLevel(e?e.displayLevel:0),n}e.DummyEditItem=r;var a,f=(a=q.GridRow,i(l,a),Object.defineProperty(l.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var r=0;r<o;r++){var n=i.getField(r),s=this._values[r],a=n.readValue(t[r]);this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a)}}else if(t)for(r=0;r<o;r++){var l=i.getOrgFieldName(r);t.hasOwnProperty(l)&&(n=i.getField(r),s=this._values[r],a=n.readValue(t[l]),this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a))}},enumerable:!0,configurable:!0}),l.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},l.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new g.DataSourceError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&!o.equalValues(r,e)&&this.provider._editItemCellUpdated(this,t,r,e)},Object.defineProperty(l.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),l.prototype.getData=function(t){if(t<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},l.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e);var n=!this._checkDiff;(n=n||(this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)))&&(this.provider,this._values[t]=e,this.provider._editItemCellUpdated(this,t,r,e),this.provider._editItemCellEdited(this,t))},l.prototype.getRowData=function(){return this._values.concat()},l.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},l.prototype._clearDisplayLevels=function(){},l);function l(t,e,i,o,r){var n=a.call(this,o)||this;return n._values=[],n._started=!1,n._checkDiff=!1,n._strictDiff=!1,n._target=e,t.attachItem(n),n._setIndex(i),n._state=r,n.$_setDisplayLevel(e?e.displayLevel:0),n}e.EditItem=f;var u,h=(u=E.ProxyItemProvider,i(c,u),c.prototype._doDispose=function(){this._saveDs=null,u.prototype._doDispose.call(this)},c.prototype.isDataEditing=function(){},c.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},c.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},c.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},Object.defineProperty(c.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isUpdating",{get:function(){return this._editingState==q.ItemState.UPDATING},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isInserting",{get:function(){return this._editingState==q.ItemState.INSERTING},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isAppending",{get:function(){return this._editingState==q.ItemState.APPENDING},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!0,configurable:!0}),c.prototype.isEditing=function(t){return q.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)},c.prototype.isEdited=function(t){return q.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)&&this._modified},c.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},c.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&0<=e&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},c.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},c.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},c.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},c.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},c.prototype.commit=function(){if(this.isEditing()){this._commiting=!0;try{var t=this.dataSource;if(t){if(this._editingState==q.ItemState.UPDATING&&this.isCheckDiff){for(var e=this._editingItem.values,i=e.length,o=this.isStrictDiff,r=!1,n=0;n<i;n++)if(o){if(!t.getField(n).equalValues(this._orgItem.getData(n),e[n])){r=!0;break}}else if(!t.getField(n).sameValues(this._orgItem.getData(n),e[n])){r=!0;break}if(!r)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},c.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},c.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},c.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},c.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},c.prototype.revert=function(t){},c.prototype.revertAll=function(t){},c.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},c.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},c.prototype._beginUpdate=function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=t,this._editingState=q.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},c.prototype._doBeginUpdate=function(t){return null},c.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},c.prototype._doBeginAppendDummy=function(){return null},c.prototype._beginAppend=function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=q.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},c.prototype._doBeginAppend=function(t){return null},c.prototype._beginInsert=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,i,o),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=q.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},c.prototype._doBeginInsert=function(t,e,i,o){return null},c.prototype._updateEditingRow=function(t){return!1},c.prototype._insertEditingRow=function(t){return!1},c.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},c.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=q.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},c.prototype._doCancelDummyEdit=function(){},c.prototype._doCancelEdit=function(t,e){t==q.ItemState.INSERTING&&this._resetItemIndicies(0)},c.prototype._commitEdit=function(){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var e=this._editingState,t=!1;if(this.isUpdating)try{this._editingState=q.ItemState.NORMAL,t=this._doCompleteUpdate(this._orgItem)}catch(t){throw this._editingState=e,t}else try{this._editingState=q.ItemState.NORMAL,t=this._doCompleteInsert(e==q.ItemState.APPENDING)}catch(t){throw this._editingState=e,t}return t?(this._modified=!1,this._doCommitEdit(e,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=e,t},c.prototype._doCommitEdit=function(t,e){return!1},c.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},c.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},c.prototype.$_editingItem=function(){return this._editingItem},c.prototype.$_dummyItem=function(){return this._dummyEditItem},c.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(c.UPDATE_STARTED,t)},c.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(c.APPEND_STARTED,t)},c.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(c.INSERT_STARTED,t)},c.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(c.CELL_EDITED,t,e)},c.prototype.fireItemCellUpdated=function(t,e,i,o){this.$_canFire()&&this.fireEvent(c.CELL_UPDATED,t,e,i,o)},c.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(c.COMMITTING,t)},c.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(c.COMMITTED,t)},c.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(c.CANCELED)},c.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(c.COMMIT_REQUEST)},c.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(c.CANCEL_REQUEST)},c.prototype.onItemProviderReset=function(t){u.prototype.onItemProviderReset.call(this,t);var e=this.dataSource;e!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=e,this._saveDs&&this._saveDs.registerClient(this))},c.prototype.onItemProviderRefresh=function(t){u.prototype.onItemProviderRefresh.call(this,t)},c.prototype.onItemProviderRefreshClient=function(t){u.prototype.onItemProviderRefreshClient.call(this,t)},c.prototype.onItemProviderItemInserted=function(t,e){u.prototype.onItemProviderItemInserted.call(this,t,e)},c.prototype.onItemProviderItemDeleted=function(t,e){u.prototype.onItemProviderItemDeleted.call(this,t,e)},c.prototype.onItemProviderItemUpdated=function(t,e){u.prototype.onItemProviderItemUpdated.call(this,t,e)},c.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},c.UPDATE_STARTED="onItemEditUpdateStarted",c.APPEND_STARTED="onItemEditAppendStarted",c.INSERT_STARTED="onItemEditInsertStarted",c.CELL_EDITED="onItemEditCellEdited",c.CELL_UPDATED="onItemEditCellUpdated",c.COMMITTING="onItemEditCommitting",c.COMMITTED="onItemEditCommitted",c.CANCELED="onItemEditCanceled",c.COMMIT_REQUEST="onItemEditCommitRequest",c.CANCEL_REQUEST="onItemEditCancelRequest",c);function c(t,e){var i=u.call(this,t,e)||this;return i._checkDiff=!1,i._checkCellDiff=!1,i._strictDiff=!1,i._undoable=!1,i._cancelWhenLastUndo=!1,i._orgItem=null,i._editingItem=null,i._dummyEditItem=null,i._editingState=q.ItemState.NORMAL,i._insertMode=0,i._modified=!1,i._commiting=!1,i._saveDs=null,i._commands=new v.EditCommandStack(i),t&&(i._saveDs=t.dataSource)&&i._saveDs.registerClient(i),i}e.EditableItemProvider=h;var p,d=(i(_,p=h),_.prototype._doDispose=function(){p.prototype._doDispose.call(this)},Object.defineProperty(_.prototype,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+=this.$_dummyItem()?1:0},enumerable:!0,configurable:!0}),_.prototype.getItem=function(t){var e,i=this.$_editingItem(),o=this.$_dummyItem(),r=this.source;return this.isEditing()&&i.index==t?i:(this.isInserting?e=t>i.index?r.getItem(t-1):r.getItem(t):t<r.itemCount&&(e=r.getItem(t)),e||(o&&t==this.itemCount-1?o:null))},_.prototype.getItems=function(t,e){return this.source.getItems(t,e)},_.prototype._doBeginUpdate=function(t){return this._createEditItem(t,q.ItemState.UPDATING,null,!1,!1)},_.prototype._doBeginAppendDummy=function(){var t=this.$_dummyItem()||this._createDummyEditItem();return t._index=this.itemCount-1,t},_.prototype._doBeginAppend=function(t){return this._createEditItem(null,q.ItemState.APPENDING,t,!1,!1)},_.prototype._doBeginInsert=function(t,e,i,o){return this._createEditItem(t,q.ItemState.INSERTING,e,i,o)},_.prototype._doCompleteUpdate=function(t){var e=this.dataSource;if(e instanceof O.DataProvider){var i=this.$_editingItem();return this._copyExtents(i,t),e.updateRow(i.dataRow,i.values)}return!1},_.prototype._doCompleteInsert=function(t){var e=!1,i=this.dataSource;if(i){var o=this.$_editingItem(),r=t?i.rowCount:Math.max(0,this._insertRow),n=o.values;if(e=i.insertRow(r,n,o._index2)){var s=this.getItemOfRow(r);this._copyExtents(o,s)}}return e},_.prototype.remove=function(t){var e=this.dataSource;if(t&&!this.isEditing(t)&&e){var i=t.dataRow;0<=i&&e.removeRow(i)}},_.prototype.removeAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e){var i=t.length;if(1<i){for(var o=[],r=0;r<i;r++)0<=(n=this.getItem(t[r]).dataRow)&&o.push(n);1<o.length?e.removeRows(o):1==o.length&&e.removeRow(o[0])}else if(1==i){var n;0<=(n=this.getItem(t[0]).dataRow)&&e.removeRow(n)}}}},_.prototype.revert=function(t){if(t instanceof q.GridItem||(t=this.getItem(t)),t){var e=this.dataSource;if(e){var i=t.dataRow,o=e.getRowState(i);o==x.RowState.DELETED?e.setRowState(i,x.RowState.NONE,!1):o==x.RowState.CREATE_AND_DELETED&&e.setRowState(i,x.RowState.CREATED,!1)}}},_.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e)for(var i=t.length;i--;){var o=this.getItem(t[i]);if(o){var r=o.dataRow,n=e.getRowState(r);n==x.RowState.DELETED?e.setRowState(r,x.RowState.NONE,!1):n==x.RowState.CREATE_AND_DELETED&&e.setRowState(r,x.RowState.CREATED,!1)}}}},_.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]).dataRow;0<=r&&e.push(r)}return e},_.prototype.removeRows=function(t){t&&(1<t.length?this.dataSource.removeRows(t):this.dataSource.removeRow(t[0]))},_.prototype._createDummyEditItem=function(){return new r(this,null,this.itemCount,-1,q.ItemState.DUMMY)},_.prototype._createEditItem=function(t,e,i,o,r){var n=this.dataSource;if(!n)return null;var s=null,a=n.fieldCount;switch(e){case q.ItemState.UPDATING:s=new f(this,t,t.index,t.dataRow,e);for(var l=0;l<a;l++)s.setValue(l,t.getData(l));this._copyExtents(t,s);break;case q.ItemState.INSERTING:case q.ItemState.APPENDING:var u=this._rs,h=e==q.ItemState.INSERTING&&t?o?t.index+1:t.index:this.itemCount;if(s=new f(this,t,h,-1,e),e==q.ItemState.INSERTING){var c=t.dataRow,p=t;if(c<=-1){for(var d=this.source._visibleItems;(p=d.getNext(p))&&!(p instanceof q.GridRow););this._insertRow=p?p.dataRow:n.rowCount}else this._insertRow=o?Math.min(n.rowCount,c+1):c;if(t instanceof q.GridRow&&o&&u){var _=u._pubItems.indexOf(p);0<=_++&&_<=u._pubItems.length&&(s._index2=_)}}if(i)for(l=0;l<a;l++)i.length>l&&s.setValue(l,i[l])}return s},_);function _(t,e){var i=p.call(this,t,e)||this;return i._insertRow=-1,i}e.EditableItemProviderImpl=d});t(V);V.DummyEditItem,V.EditItem,V.EditableItemProvider,V.EditableItemProviderImpl;var N=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Z.GridCell,i(s,r),s.prototype._doDispose=function(){this._rowGroup=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"text",{get:function(){return this.item instanceof q.GroupItemImpl?this._rowGroup.getHeaderText(this.item):""},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this,"rowGroupHeaderCell")||this;return e._rowGroup=t,e}e.RowGroupHeaderCell=n;var a,l=(a=Z.GridCell,i(u,a),u.$_getValue=function(t,e){if(e&&0<=e.dataIndex){var i=e.grid,o=t.parent,r=e.groupFooters.getItem(o.getFooterIndex(t));if(r&&r.expression){var n=i.rowGroupSummaryRuntime;return n.setColumn(e,e.grid.summarizer),n.setItem(o),r.evaluate(n)}if(o&&e&&i.isGroupedColumn(e)){var s=i.rowGroup.getFooterText(o);return null==s?void 0:s}}},u.getValue=function(t,e){try{return u.$_getValue(t,e)}catch(t){return Z.GridCell.ERROR}},u.$_displayText=function(t,e,i){var o=isNaN(i)?null:String(i);if(!o){var r=e.grid,n=z.Utils.cast(t.parent,q.GroupItemImpl),s=r.rowGroup,a=void 0;if(n&&e&&r.isGroupedColumn(e)&&(a=s.getFooterText(n)))o=a;else if(e){var l=e.groupFooters.getItem(n.getFooterIndex(t));l&&(o=l.groupText)}}return o||""},u.prototype._doDispose=function(){this._rowGroup=null,a.prototype._doDispose.call(this)},u.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=u.$_getValue(this.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,console.log("FOOTER ERROR: "+t)}},Object.defineProperty(u.prototype,"text",{get:function(){return this._error?Z.GridCell.ERROR:u.$_displayText(this.item,this.index.dataColumn,this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"level",{get:function(){return this.index.item.level},enumerable:!0,configurable:!0}),u);function u(t){var e=a.call(this,"rowGroupFooterCell")||this;return e._value=NaN,e._rowGroup=t,e}e.RowGroupFooterCell=l;var h,c=(h=Z.GridCell,i(p,h),Object.defineProperty(p.prototype,"level",{get:function(){return this.item.level},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"getText",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),p);function p(){var t=h.call(this,"rowGroupBarCell")||this;return t._level=0,t}e.RowGroupBarCell=c;var d,_=(d=ce.Base,i(f,d),f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),f.prototype._changed=function(){this.$_collection&&this.$_collection.$_itemChanged(this)},f);function f(){return d.call(this)||this}e.RowGroupFooter=_;var y,m=(y=ce.Base,i(g,y),g.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),g.prototype.get=function(t){return this._items[t]},g.prototype.assignFrom=function(t){if(z.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new _),this._items[i].assignFrom(t[i]),this._items[i].$_collection=this):this._items[i]=null}else this._items[0].assignFrom(t)},g.prototype.$_itemChanged=function(t){},g);function g(t){var e=y.call(this)||this;return e._items=[],e._owner=t,e._items.push(new _),e._items[0].$_collection=e}e.RowGroupFooterCollection=m;var b,v=(b=ce.Base,i(C,b),C.prototype._doDispose=function(){b.prototype._doDispose.call(this)},C);function C(){return b.call(this)||this}e.RowGroupLevel=v;var w,E=(w=Y.VisualObject,i(x,w),x.prototype._doDispose=function(){this._footers=this._footers.dispose(),w.prototype._doDispose.call(this)},x.prototype.rowGroupFooterChanged=function(t){},x.prototype.getGroupFooterCount=function(t){return this._footers.count},Object.defineProperty(x.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"mergeExpander",{get:function(){return this._mergeExpander},set:function(t){t!=this._mergeExpander&&(this._mergeExpander=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),x.prototype.setFooters=function(t){this._footers.assignFrom(t)},x.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(X.CellIndex.temp(this.owner,t.index)),this._headerCell},x.prototype.getFooterCell=function(t){var e=t.item;return e.parent,t.valueColumn,this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},x.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},x.prototype.getHeaderText=function(t){return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerExprStatement.evaluate(this._statementRuntime)},x.prototype.getFooterText=function(t){return this._footerExprStatement?(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerExprStatement.evaluate(this._statementRuntime)):null},x.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},x);function x(t){var e=w.call(this,t)||this;return e._mergeMode=!1,e._sorting=!0,e._expandedAdornments=W.RowGroupAdornments.BOTH,e._collapsedAdornments=W.RowGroupAdornments.HEADER,e._levelIndent=20,e._mergeHeaderIndenting=!0,e._mergeFooterIndenting=!0,e._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",e._expandedIconUrl="images/expanded.png",e._collapsedIconUrl="images/collapsed.png",e._mergeExpander=!0,e._headerCell=new n(e),e._footerCell=new l(e),e._barCell=new c,e._headerExprStatement=new T.ExpressionStatement(e._headerStatement),e._footerExprStatement=new T.ExpressionStatement,e._statementRuntime=new A.RowGroupStatementRuntime,e._footers=new m(e),e}e.RowGroup=E;var I,O=(I=q.GroupFooter,i(S,I),S);function S(){return I.call(this)||this}e.MergedGroupFooter=O;var D,R=(D=q.GroupItemImpl,i(P,D),Object.defineProperty(P.prototype,"groupLevel",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"dataRow",{get:function(){var t=this.firstDataItem;return t?t.dataRow:-1},enumerable:!0,configurable:!0}),P);function P(t,e){var i=D.call(this,e)||this;return i._level=0,i._level=t,i}e.MergedGroupHeader=R});t(N);N.RowGroupHeaderCell,N.RowGroupFooterCell,N.RowGroupBarCell,N.RowGroupFooter,N.RowGroupFooterCollection,N.RowGroupLevel,N.RowGroup,N.MergedGroupFooter,N.MergedGroupHeader;var B=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._changed=function(){},s);function s(){return r.call(this)||this}e.GridMergeRule=n;var a,f=(i(l,a=n),l.getDefault=function(t,e){var i=l.$_default;return i._level=t,i._mergeMode=e,i},l.prototype.parseInit=function(t,e,i,o,r){var n=t.itemCount;(o=Math.min(n-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,r):this.$_parseNormal(t,e,i,o,r))},l.prototype.parseBounds=function(t,e,i,o,r){if(!(t.itemCount<1)){for(i=Math.max(0,i);0<=i&&r[i]<=0;){var n=t.getItem(i);if(n==this.$_getAncestor(n,this._level))break;i--}for(;i<=o&&0<r[i];)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,r):this.$_parseNormalBounds(t,e,i,o,r))}},l.prototype.$_getAncestor=function(t,e){var i=z.Utils.cast(t,q.GroupItem);for(i=i||t.parent;i.level>e;)i=i.parent;return i},l.prototype.$_parseNormal=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=s,l=i,u=l+1;for(r[l]=l+1;u<n;)((s=t.getItem(u)).level!=a.level||s.constructor!==a.constructor||s instanceof q.GroupFooter||s instanceof q.GroupItemImpl)&&(l=u),r[u]=l+1,u++,a=s}},l.prototype.$_parseMerged=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=r[l]=l+1;u<n;){s=t.getItem(u);var h=this.$_getAncestor(s,this._level);if(h!=a){if(o<=u)break;a=h,l=u}r[u]=l+1,u++}},l.prototype.$_parseNormalBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=s,l=i,u=l+1;for(r[l]=l+1;u<n;)(s=t.getItem(u)).level==a.level&&s.constructor===a.constructor||(l=u),r[u]=l+1,u++,a=s}},l.prototype.$_parseMergedBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=l+1;for(r[l]=l+1;u<n;){s=t.getItem(u);var h=this.$_getAncestor(s,this._level);if(h!=a){if(o<u)break;a=h,l=u}r[u]=l+1,u++}}},l.INIT_COUNT=200,l.$_default=new l,l);function l(){var t=a.call(this)||this;return t._level=0,t._mergeMode=!1,t}e.RowGroupMergeRule=f;var u,h=(u=P.ExpressionRuntime,i(c,u),c.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._column=null,u.prototype._doDispose.call(this)},c.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},c.prototype.setColumn=function(t){this._column=t,this._grid=t.grid},c.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},c.prototype.setItem=function(t,e){this._item=t,this._field=e},c.prototype.isIdentifier=function(t){return t=t.toLowerCase(),c.IDENTS.hasOwnProperty(t)?c.IDENTS[t]:u.prototype.isIdentifier.call(this,t)},c.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case c.ID_ROW:return this._item.index;case c.ID_DATAROW:return this._item.dataRow;case c.ID_CHECKED:return this._item.checked;case c.ID_GROUP:return this._item.parent;case c.ID_VALUE:return this._item.getData(this._field);case c.ID_PREV_VALUES:var e=this._grid.getDataColumns(),i=e.indexOf(this._column);if(e.length<0||i<0)return;for(var o=[],r=0,n=Math.min(i,e.length);r<n;r++)o.push(this._item.getData(e[r].dataIndex));return o.join("`")}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)}},c.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=c.ID_VALUE&&t!=c.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},c.prototype.evaluateIndexerS=function(t,e,i){if(t!=c.ID_VALUE&&t!=c.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},c.IDENTS={row:c.ID_ROW=0,datarow:c.ID_DATAROW=1,checked:c.ID_CHECKED=2,value:c.ID_VALUE=3,values:c.ID_VALUES=4,group:c.ID_GROUP=5,prevvalues:c.ID_PREV_VALUES=6},c);function c(){var t=u.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._column=null,t}var p,y={},d=(i(_,p=n),_.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new _(e):null},_.prototype._doDispose=function(){this._runtime=null,p.prototype._doDispose.call(this)},Object.defineProperty(_.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?P.ExpressionParser.Default.parse(t,null):null,this._changed())},enumerable:!0,configurable:!0}),_.prototype.parseInit=function(t,e,i,o,r){var n=t.itemCount,s=t.dataSource.rowCount;if(!((o=Math.min(n-i,o))<1||s<=0)){this._runtime.setDataSource(t.dataSource),this._runtime.setColumn(this._column);for(var a=null,l=i;l<n&&(a=t.getItem(l),!this.$_isRow(a,!1));)r[l]=l+1,l++;if(!(n<=l)){var u=y,h=this._exprNode.isIdentifier("value"),c=i=l;if(r[c]=c+1,!(a.dataRow>=s)){u=h?a.getData(e):(this._runtime.setItem(a,e),this._exprNode.evaluate(this._runtime));for(var p=i+1;p<n;p++)if(a=t.getItem(p),this.$_isRow(a,!1)){if(a.dataRow>=s)break;var d=void 0;if((d=h?a.getData(e):(this._runtime.setItem(a,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&u instanceof Date?+d!=+u:d!=u){if(o<=p)break;c=p,u=d}r[p]=c+1}else{if(o<=p)break;u=y,r[c=p]=c+1}}}}},_.prototype.parseBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=this._exprNode.isIdentifier("value"),a=y,l=Math.max(0,i),u=l,h=-1;if(this._runtime.setDataSource(t.dataSource),this._runtime.setColumn(this._column),0<l&&r[l]<=0){var c=t.getItem(l);if(this.$_isRow(c,!1)){var p=void 0;for(p=s?t.getItem(l).getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),l--;0<=l&&(c=t.getItem(l),this.$_isRow(c,!1))&&((a=s?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&p instanceof Date?+a==+p:a==p);)l--;for(var d=u-1;l<d;d--)r[d]=l+2;l<u-1&&(h=l+1)}else{for(r[l]=l+1,d=u-1;l<d;d--)r[d]=l+2;for(l+1<u-1&&(h=l+2),l--;0<=l&&r[l]<=0&&!this.$_isRow(t.getItem(l),!1);)r[l]=l+1,l--}}for(l=Math.max(0,i);l<=o&&0<r[l];)l++;for(;l<=o&&!this.$_isRow(t.getItem(l),!1);)r[l]=l+1,l++;if(l<o){for(u=l,c=t.getItem(l),p=void 0,p=s?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),l++;l<n;)if(c=t.getItem(l),this.$_isRow(c,!1)){if((a=s?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)))instanceof Date&&p instanceof Date?+a!=+p:a!=p){var _=u;for(0<=h&&(_=h,h=-1),d=u;d<l;d++)r[d]=_+1;if(o<=l)break;p=a,u=l}else r[l]=u+1;l++}else{for(_=u,0<=h&&(_=h,h=-1),d=u;d<l;d++)r[d]=_+1;for(r[l]=l+1,l++;l<n&&!this.$_isRow(t.getItem(l),!1);)r[l]=l+1,l++;if(o<=(u=l))break}if(l==n&&a instanceof Date&&p instanceof Date?+a==+p:a==p)for(_=0<=h?h:u,d=u;d<l;d++)r[d]=_+1}}},_.prototype.$_isRow=function(t,e){var i=t instanceof q.GridRow&&!(t instanceof V.DummyEditItem);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},_.INIT_COUNT=200,_.$_runtime=null,_);function _(t){var e=p.call(this)||this;return e._runtime=_.$_runtime=_.$_runtime||new h,e.criteria=t,e}e.ColumnMergeRule=d;var m,g=(m=Z.DataCell,i(b,m),b.prototype._doDispose=function(){m.prototype._doDispose.call(this)},b.prototype.getValue=function(){var t=this.index,e=t.item;return e instanceof q.GridRow?m.prototype.getValue.call(this):(e=(e instanceof q.GroupItem?e:e.parent).firstItem).getData(t.dataField)},Object.defineProperty(b.prototype,"text",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),b);function b(t){return void 0===t&&(t=null),m.call(this,t||"mergedDataCell")||this}e.MergedDataCell=g;var v,C=(v=ce.Base,i(w,v),Object.defineProperty(w.prototype,"head",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"tail",{get:function(){return-1},enumerable:!0,configurable:!0}),w);function w(){return v.call(this)||this}e.GridMergeRoom=C;var E,x=(i(I,E=C),I.borrow=function(t){var e=I.$_rooms.pop();return e?(e._head=t.top,e._tail=t.bottom):e=new I(t),e},I.returnTo=function(t){if(t){var e=I.$_rooms;e.indexOf(t)<0&&e.push(t)}},Object.defineProperty(I.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"scope",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),I.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},I.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},I.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},I.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},I.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},I.$_rooms=new Array,I.$_roomCount=0,I);function I(t){var e=E.call(this)||this;return e._group=null,e._column=t.c1._columnObj,e._head=t.top,e._tail=t.bottom,e}e.ColumnMergeRoom=x;var O,S=0,D=(O=ce.Base,i(R,O),Object.defineProperty(R.prototype,"count",{get:function(){return this._rooms.length},enumerable:!0,configurable:!0}),R.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},R.prototype.initialize=function(t){if(!this._inited){var e=this._column.grid,i=e.rowGroup,o=e.itemSource,r=this._column,n=e.getGroupLevel(r.dataIndex),s=e.isGroupedColumn(r)?f.getDefault(n,i.mergeMode):r.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(o.itemCount),l=o.itemCount;l--;)a[l]=0;s._column=r,s.parseInit(o,r.dataIndex,e.fixedOptions.rowCount,t,a)}this._inited=!0}},R.prototype.refresh=function(t,e){if(this._inited&&this._flags&&!(e<t)){var i=this._rooms,o=this._column.grid,r=o.layoutManager.fixedItemCount,n=o.itemSource,s=this._column,a=o.getGroupLevel(s.dataIndex),l=0<a?f.getDefault(a,o.rowGroup.mergeMode):s.$_mergeRuleObj(),u=o.displayOptions.editItemMerging,h=t;for(this._rooms.length=0,l&&(l._column=s,l.parseBounds(n,s.dataIndex,t,e,this._flags));h<=e;){var c=this.$_checkMerge(n,this._column,h,0==i.length,r);if(c){var p;if(a<1)if((p=n.getItem(c.r2))instanceof N.MergedGroupHeader||p instanceof N.MergedGroupFooter);else{var d=new x(c);this._rooms.push(d)}else if((p=u?n.source.getItem(c.top):n.getItem(c.top)).level>=a){for(var _=p instanceof q.GroupItem?p:p.parent;_.level>a;)_=_.parent;(d=new x(c)).group=_,i.push(d)}h=c.r2+1}else h+=1}}},R.prototype.getRooms=function(){return this._rooms.slice()},R.prototype.scroll=function(t){},R.prototype.getRoom=function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},R.prototype.findRoom=function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(t>=e[i].head&&t<=e[i].tail)return e[i];return null},R.prototype.prepareCells=function(t){for(var e=this._cells,i=0;i<e.length;i++)e[i]=-1;for(;e.length<t;)e.push(-1)},R.prototype.addCells=function(t,e){for(var i=S++,o=t+1;o<t+e;o++)this._cells[o]=65535+i;return this._cells[t]=i},R.prototype.isMerged=function(t){return-1<this._cells[t]},R.prototype.isMergeRoot=function(t){return-1<this._cells[t]&&this._cells[t]<65535},R.prototype.isHidden=function(t){return 65535<=this._cells[t]},R.prototype.getMerged=function(t){for(var e=this._cells,i=e[t],o=1,r=t+1;r<e.length&&e[r]-65535==i;r++,o++);return o},R.prototype.$_checkMerge=function(t,e,i,o,r){if(t&&e&&0<=i){var n=e.grid.displayOptions.editItemMerging,s=i,a=this._flags[s],l=t.getItem(s);if(a<=0||q.ItemState_isEditing(l.itemState)&&!n)return null;if(o)for(;r<s&&!(this._flags[s-1]<a||q.ItemState_isEditing(t.getItem(s-1).itemState));)s--;for(var u=t.itemCount,h=i+1;h<u;){var c=q.ItemState_isEditing(t.getItem(h).itemState);if(this._flags[h]>a||this._flags[h]<=0||c&&!n){if(s+1<h)return X.CellRange.createRange(s,e.layout,h-1,e.layout);var p=e instanceof G.DataColumn?e.groupLevel:-1;return(l=t.getItem(s))instanceof N.MergedGroupHeader&&l.collapsed?X.CellRange.createRange(s,e.layout,h-1,e.layout):l instanceof N.MergedGroupFooter&&l.parent.level==p&&(h==i+1||l.parent.collapsed)?X.CellRange.createRange(s,e.layout,h-1,e.layout):(l instanceof N.MergedGroupHeader||l instanceof N.MergedGroupFooter)&&l.parent.level>p?X.CellRange.createRange(s,e.layout,h-1,e.layout):null}h++}if(s<h)return s+1<h?X.CellRange.createRange(s,e.layout,h-1,e.layout):(p=e instanceof G.DataColumn?e.groupLevel:-1,(l=t.getItem(s))instanceof N.MergedGroupHeader&&l.collapsed?X.CellRange.createRange(s,e.layout,h-1,e.layout):l instanceof N.MergedGroupFooter&&l.parent.level==p&&(h==i+1||l.parent.collapsed)?X.CellRange.createRange(s,e.layout,h-1,e.layout):(l instanceof N.MergedGroupHeader||l instanceof N.MergedGroupFooter)&&l.parent.level>p?X.CellRange.createRange(s,e.layout,h-1,e.layout):null)}return null},R.MERGE_ROOMS="mergeRooms",R);function R(t){var e=O.call(this)||this;return e._flags=null,e._rooms=new Array,e._inited=!1,e._cells=[],e._column=t,e}e.ColumnMergeManager=D});t(B);B.GridMergeRule,B.RowGroupMergeRule,B.ColumnMergeRule,B.MergedDataCell,B.GridMergeRoom,B.ColumnMergeRoom,B.ColumnMergeManager;var F=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Y.VisualObject,i(s,r),s.prototype._dispose=function(){this._column=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"capitalIndexers",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expression",{get:function(){return this._expression},set:function(t){(t=t&&t.trim())!=this._expression&&(this._expression=t,this._exprNode=t?P.ExpressionParser.Default.parse(t):void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupText",{get:function(){return this._groupText},set:function(t){t!=this._groupText&&(this._groupText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),s.prototype.evaluate=function(t,e){return this._exprNode?this._exprNode instanceof Array?void 0!==e&&this._exprNode[e]?this._exprNode[e].evaluate(t):void 0:this._exprNode.evaluate(t):void 0},s.prototype._doChanged=function(){},s);function s(t){var e=r.call(this,null)||this;return e._index=0,e._column=t,e}e.ColumnSummary=n;var a,l=(i(u,a=n),u.prototype._doChanged=function(){this.column._headerSummaryChanged()},u);function u(t){return a.call(this,t)||this}e.ColumnHeaderSummary=l;var h,c=(h=ce.Base,i(p,h),Object.defineProperty(p.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),p.prototype.getItem=function(t){return this._items[t]},p.prototype.assignFrom=function(t){if(z.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new l(this._column)),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t)},p);function p(t){var e=h.call(this)||this;return e._items=[],e._column=t,e._items.push(new l(t)),e}e.ColumnHeaderSummaryCollection=c;var d,_=(d=Y.GridObject,i(f,d),f.prototype._doDispose=function(){this._column=null,d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"subText",{get:function(){return this._subText},set:function(t){t!=this._subText&&(this._subText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"subTextGap",{get:function(){return this._subTextGap},set:function(t){t!=this._subTextGap&&(this._subTextGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"subTextLocation",{get:function(){return this._subTextLocation},set:function(t){t!=this._subTextLocation&&(this._subTextLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageIndex",{get:function(){return this._imageIndex},set:function(t){t!=this._imageIndex&&(this._imageIndex=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(t){t!=this._imageUrl&&(this._imageUrl=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageLocation",{get:function(){return this._imageLocation},set:function(t){t!=this._imageLocation&&(this._imageLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"clickBehavior",{get:function(){return this._clickBehavior},set:function(t){t!=this._clickBehavior&&(this._clickBehavior=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fixedHeight",{get:function(){return this._fixedHeight},set:function(t){t!=this._fixedHeight&&(this._fixedHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"displayText",{get:function(){var t=this._text;if(!t&&this._column instanceof G.DataColumn){var e=this._column.getField();t=e?e.header||e.orgFieldName:this._column.fieldName}return t=t||this._column.name},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"popupMenu",{set:function(t){this.setPopupMenu(t)},enumerable:!0,configurable:!0}),f.prototype.setPopupMenu=function(t){"string"==typeof t?(this._popupMenu=null,this._popupMenuName=t):((t=z.Utils.makeArray(t))?this._popupMenu=t:this._popupMenu=null,this._popupMenuName=null),this._changed(),this._popupMenuChanged=!0},f.prototype.resetPopupMenu=function(t){var e;(e=this._popupMenu)&&!this._popupMenuName&&(this._popupMenuName="$$_columnHeader_popup"+this.$_hash+"menu",e=Array.isArray(e)?e:[e],t.addMenu(this._popupMenuName,e,!0))},f.prototype._doChanged=function(){this._column&&this._column._headerChanged()},f);function f(t){var e=d.call(this,null)||this;return e._imageIndex=-1,e._checkLocation=W.ColumnHeaderItemLocation.NONE,e._imageLocation=W.ColumnHeaderItemLocation.NONE,e._clickBehavior=W.ClickBehavior.NONE,e._showTooltip=!0,e._fixedHeight=0,e._popupMenuChanged=!1,e._column=t,e}e.ColumnHeader=_;var y,m=(i(g,y=n),g.prototype._doChanged=function(){this.column._footerChanged()},g);function g(t){return y.call(this,t)||this}e.ColumnFooter=m;var b,v=(b=ce.Base,i(C,b),Object.defineProperty(C.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),C.prototype.getItem=function(t){return this._items[t]},C.prototype.assignFrom=function(t){if(z.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new m(this._column)),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t)},C);function C(t){var e=b.call(this)||this;return e._items=[],e._column=t,e._items.push(new m(t)),e}e.ColumnFooterCollection=v;var w=(E.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"text"},E.prototype.clear=function(){return this.styleName=this.renderer=this.editable=this.editor=this.readonly=this.textFormat=this.datetimeFormat=this.numberFormat=this.prefix=this.suffix=void 0,this},E.prototype.assign=function(t){return"string"==typeof t?this.styleName=t:t&&("styleName"in t&&(this.styleName=t.styleName),"renderer"in t&&(this.renderer=t.renderer),"editor"in t&&(this.editor=t.editor),"editable"in t&&(this.editable=t.editable),"readonly"in t&&(this.readonly=t.readonly),"textFormat"in t&&(this.textFormat=t.textFormat),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"numberFormat"in t&&(this.numberFormat=t.numberFormat),"prefix"in t&&(this.prefix=t.prefix),"suffix"in t&&(this.suffix=t.suffix)),this},E);function E(){}e.ColumnStyle=w;var x,I=(x=ce.Base,i(O,x),O.compareLoc=function(t,e){return null==t||null==e?0:null==t?-1:null==e?1:t.index-e.index},O.prototype._doDispose=function(){this._layout=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),x.prototype._doDispose.call(this)},O.prototype.stylesChanged=function(t){this._changed()},Object.defineProperty(O.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"visible",{get:function(){return this._visible},set:function(t){if(t!=this._visible){this._visible=t;var e=this.grid;e&&e._columnVisibleChanged(this),this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"footer",{get:function(){return this._footers.getItem(0)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"headerSummary",{get:function(){return this._headerSummaries.getItem(0)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"groupFooter",{get:function(){return this._groupFooters.getItem(0)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"grid",{get:function(){return this.$_grid||(this.$_owner?this.$_owner.owner:null)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"dataRoot",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),O.prototype.clean=function(){this._dirty=!1},O.prototype.isWritable=function(){return!1},O.prototype.prepareLayout=function(t){},O.prototype.stateFor=function(t){return this._states[t]},O.prototype.setState=function(t,e){this._states[t]=e},O.prototype.assignFrom=function(t){x.prototype.assignFrom.call(this,t),this._header.assignFrom(t.header),this._footers.assignFrom(t.footers||t.footer),this._headerSummaries.assignFrom(t.summaries||t.summary),this._groupFooters.assignFrom(t.groupFooters||t.groupFooter)},O.prototype.toString=function(){return this.displayText},O.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},O.prototype.$_setIndex=function(t){this._index=t},O.prototype._headerChanged=function(){},O.prototype._headerSummaryChanged=function(){},O.prototype._footerChanged=function(){},O.prototype._resetIndices=function(t){},O);function O(t){var e=x.call(this)||this;return e._visible=!0,e._width=100,e._resizable=!0,e._movable=!0,e._checked=!1,e._dirty=!1,e._index=-1,e._states={},e._header=new _(e),e._footers=new v(e),e._headerSummaries=new c(e),e._groupFooters=new v(e),t&&e.assignFrom(t),e}e.GridColumn=I;var S,D=(i(R,S=I),R.prototype._doDispose=function(){S.prototype._doDispose.call(this)},Object.defineProperty(R.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj=t?B.ColumnMergeRule.createRule(t):null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new k.DateTimeWriter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new L.DecimalFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new M.BooleanFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"renderer",{get:function(){return this._renderer},set:function(t){t!==this._renderer&&(this._renderer=t,this._rendererChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"buttonVisiblility",{get:function(){return this._buttonVisiblility},set:function(t){t!=this._buttonVisiblility&&(this._buttonVisiblility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"rendererObj",{get:function(){if(this._rendererChanged){var t=this.grid;t&&(this._rendererChanged=!1,this._rendererObj=t.delegate.createRenderer(this._renderer))}return this._rendererObj},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"merged",{get:function(){return this._merged},enumerable:!0,configurable:!0}),R.prototype.prepareLayout=function(t){S.prototype.prepareLayout.call(this,t),this._merged=!1},R.prototype.canMerge=function(){return null!=this._mergeRuleObj},R.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid,t)},R.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},R.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj},R.prototype.$_setMerged=function(t){this._merged=t},R);function R(t){var e=S.call(this,t)||this;return e._blankWhenCopy=!1,e._blankWhenExport=!1,e._ignoreDefaultDynamicStyles=!1,e._textInputCase=W.TextInputCase.NORMAL,e._button=W.CellButton.NONE,e._buttonVisiblility=W.ButtonVisibility.DEFAULT,e._editButtonVisibility=W.ButtonVisibility.DEFAULT,e._merged=!1,e}e.ValueColumn=D});t(F);F.ColumnSummary,F.ColumnHeaderSummary,F.ColumnHeaderSummaryCollection,F.ColumnHeader,F.ColumnFooter,F.ColumnFooterCollection,F.ColumnStyle,F.GridColumn,F.ValueColumn;var h=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),s.prototype.apply=function(t,e){},s.prototype.check=function(t){return!1},s);function s(t){var e=r.call(this)||this;return e._body=!0,e._fixed=!0,e._owner=t,e}e.DynamicStyle=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),u.prototype.setItems=function(t){},u.prototype.applyInternal=function(t,e){},u.prototype.checkStyle=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].check(t))return!0;return!1},u);function u(t){var e=a.call(this)||this;return e._items=[],e._owner=t,e}e.DynamicStyleCollection=l});t(h);h.DynamicStyle,h.DynamicStyleCollection;var S=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=j.EventAware,i(n,r),n.prototype._doDispose=function(){this._criteria=null,r.prototype._doDispose.call(this)},Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return this._text||this._name},n.prototype.changed=function(){this.fireEvent(n.CHANGED)},n.prototype.criteriaChanged=function(){},n.CHANGED="onColumnFilterChanged",n);function n(t){var e=r.call(this)||this;return e._active=!1,e._visible=!0,e.criteria=t,e}e.ColumnFilter=a;var s,l=(i(u,s=a),u.prototype._doDispose=function(){this._exprNode=null,this._model=null,s.prototype._doDispose.call(this)},u.prototype.prepare=function(t,e){t.setDataSource(e)},u.prototype.select=function(t,e,i){return!this._exprNode||(t.setData(e,i),this._exprNode.evaluate(t))},u.prototype.criteriaChanged=function(){this.parse()},u.prototype.parse=function(){this.criteria?this._exprNode=P.ExpressionParser.Default.parse(this.criteria,null):this._exprNode=null},u);function u(t){var e=s.call(this,t.criteria)||this;return e._model=t,e.parse(),e}e.ColumnFilterRun=l;var h,c=(h=j.EventAware,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++)i[e].active&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++)if(e[t].visible)return!0;return!1},enumerable:!0,configurable:!0}),p.prototype.getItem=function(t){return this._items[t]},p.prototype.itemByName=function(t){return this._names[t]},p.prototype.indexOf=function(t){for(var e=this._items.length-1;0<=e;e--)if(this._items[e].name==t)return e;return-1},p.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;0<=i;i--)this._items[i].active==t&&e.push(this._items[i]);return e},p.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],o=i.length,r=0;r<o;r++)if((t=i[r])&&t.name){this.$_checkName(t.name);var n=new a(null);n.assignFrom(t),this._items.push(n),(this._names[t.name]=n).addListener(this)}(e||0<this.count)&&this.changed(null)}},p.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(0<e){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},p.prototype.add=function(t,e){void 0===e&&(e=!0);var i=z.Utils.cast(t,a);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),this._items.push(i),(this._names[i.name]=i).addListener(this),e&&this.changed(null)},p.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&0<t.length){for(var i=0,o=t.length,r=0;r<o;r++){var n=z.Utils.cast(t[r],a);n?this._items.indexOf(n)<0&&n.name&&(e||this.$_checkName(n.name)):t[r]&&t[r].name&&(e||this.$_checkName(t[r].name),(n=new a(null)).assignFrom(t[r]));var s=this.indexOf(n.name);0<=s?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=n):this._items.push(n),n.addListener(this),this._names[n.name]=n,i++}0<i&&this.changed(null)}},p.prototype.remove=function(t){if(t){for(var e=this._items.length-1;0<=e;e--){var i=this._items[e];if(i.name==t)return this._items.splice(e,1),delete this._names[i.name],i.removeListener(this),this.changed(null),!0}return!1}},p.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;0<=i;i--){var o=this.indexOf(t[i]);if(0<=o){var r=this._items[o];this._items.splice(o,1),delete this._names[r.name],r.removeListener(this),e++}}0<e&&this.changed(null)}},p.prototype.activateItems=function(t,e){if(t){var i=0;this._updating=!0;try{for(var o=t.length-1;0<=o;o--){var r=this._names[t[o]];r&&r.active!=e&&(r._active=e,i++)}}finally{this._updating=!1}0<i&&this.changed(null)}},p.prototype.activateAll=function(t){var e=!1;this._updating=!0;try{for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];r.active!=t&&(r._active=t,e=!0)}}finally{this._updating=!1}e&&this.changed(null)},p.prototype.hideFilters=function(t,e){if(t)for(var i=0,o=t.length;i<o;i++){var r=this._names[t[i]];r&&(r.visible=!e)}},p.prototype.hideAllFilters=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o&&(o.visible=!t)}},p.prototype.toggleItems=function(t){if(t){var e=0;this._updating=!0;try{for(var i=t.length-1;0<=i;i--){var o=this._names[t[i]];o&&(o._active=!o.active,e++)}}finally{this._updating=!1}0<e&&this.changed(null)}},p.prototype.toggleAll=function(){var t=!1;this._updating=!0;try{for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o._active=!o.active,t=!0}}finally{this._updating=!1}t&&this.changed(null)},p.prototype.changed=function(t){this._updating||this.fireEvent(a.CHANGED,t)},p.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},p.prototype.$_userFilterAdd=function(t,e){var i=t instanceof a?t:null;return i||(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),this.add(i,e),i},p.prototype.onColumnFilterChanged=function(t){this.changed(t)},p.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},p.prototype.onColumnFilterUserAdd=function(t,e,i){},p);function p(t){var e=h.call(this)||this;return e._items=[],e._names={},e._updating=!1,e._nextId=1,e._owner=t,e}e.ColumnFilterCollection=c;var d,_=(d=P.ExpressionRuntime,i(f,d),f.prototype._doDispose=function(){this._item=this._ds=null,d.prototype._doDispose.call(this)},f.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},f.prototype.setData=function(t,e){this._item=t,this._field=e},f.prototype.isIdentifier=function(t){return t=t.toLowerCase(),f.IDENTS.hasOwnProperty(t)?f.IDENTS[t]:d.prototype.isIdentifier.call(this,t)},f.prototype.evaluateIdentifier=function(t){switch(t){case f.ID_VALUE:return this._item.getData(this._field);case f.ID_STATE:switch(this._item.rowState){case x.RowState.CREATED:return"c";case x.RowState.UPDATED:return"u";case x.RowState.DELETED:return"d";case x.RowState.CREATE_AND_DELETED:return"x"}return;case f.ID_CHANGED_CELL:var e=this._item.dataRow,i=this._field;return 0<=i&&this._item.rowState==x.RowState.UPDATED&&this._ds.isDataChanged(e,i);case f.ID_FIELD:return this._field;case f.ID_MAX:case f.ID_MIN:case f.ID_MEAN:return 0}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},f.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=f.ID_VALUE&&t!=f.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},f.prototype.evaluateIndexerS=function(t,e,i){if(t!=f.ID_VALUE&&t!=f.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},f.IDENTS={value:f.ID_VALUE=0,field:f.ID_FIELD=1,values:f.ID_VALUES=2,state:f.ID_STATE=3,changedcell:f.ID_CHANGED_CELL=4,min:f.ID_MAX=10,max:f.ID_MIN=11,mean:f.ID_MEAN=12},f);function f(){var t=d.call(this)||this;return t._field=-1,t._fieldCount=0,t}e.ColumnFilterRuntime=_});t(S);S.ColumnFilter,S.ColumnFilterRun,S.ColumnFilterCollection,S.ColumnFilterRuntime;var $=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Error,i(s,r),s);function s(t){var e=r.call(this)||this;return e.message=t,e}e.AbortError=n;var a,p=(i(l,a=n),l.prototype.toString=function(){return"Validation failed["+this.level+"]: "+this.message},l);function l(t,e,i,o){var r=a.call(this,e)||this;return r.level=t,r.column=i,r.userMessage=o,r}e.ValidationError=p;var u,h=(u=ce.Base,i(c,u),Object.defineProperty(c.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?P.ExpressionParser.Default.parse(t,c.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),c.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new p(this._level,e,null,this._message)}},c.CAPITAL_INDEXERS=["value","values"],c);function c(t){var e=u.call(this)||this;return e._active=!0,e._mode=W.ValidationMode.ALWAYS,e._level=W.ValidationLevel.ERROR,e._name=t,e}e.EditValidation=h;var d,_=(d=ce.Base,i(f,d),f.prototype._doDispose=function(){this._items=null,d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this.assign(t)},enumerable:!0,configurable:!0}),f.prototype.assign=function(t){if(t!==this&&(this.clear(),t)){z.Utils.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new h;o.assignFrom(t[e]),this._items.push(o)}}},f.prototype.clear=function(){this._items=[]},f.prototype.addAll=function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},f.prototype.validate=function(t,e,i,o){for(var r=0;r<this._items.length;r++){var n=this._items[r];if(n.active&&(n.mode==t||n.mode==W.ValidationMode.ALWAYS))try{n.validate(e)}catch(t){if(!i||W.ValidationLevel_compare(n.level,o)<0)throw t instanceof p?(t.level=n.level,t):new p(n.level,t)}}},f);function f(){var t=d.call(this)||this;return t._items=[],t}e.EditValidationCollection=_;var y,m=(y=P.ExpressionRuntime,i(g,y),g.prototype._doDispose=function(){this._item=null,this._dataSource=null,y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!0,configurable:!0}),g.prototype.isIdentifier=function(t){return t=t.toLowerCase(),g.IDENTS.hasOwnProperty(t)?g.IDENTS[t]:y.prototype.isIdentifier.call(this,t)},g.prototype.evaluateIdentifier=function(t){switch(t){case g.ID_ROW:return this._item.index;case g.ID_DATAROW:return this._item.dataRow;case g.ID_CHECKED:return this._item.checked}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},g.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(e)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(o)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.IDENTS={row:g.ID_ROW=0,datarow:g.ID_DATAROW=1,checked:g.ID_CHECKED=2,value:g.ID_VALUE=3,values:g.ID_VALUES=4},g);function g(){var t=y.call(this)||this;return t._item=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowValidationRuntime=m;var b,v=(b=P.ExpressionRuntime,i(C,b),C.prototype._doDispose=function(){this._index=null,this._dataSource=null,b.prototype._doDispose.call(this)},C.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},C.prototype.isIdentifier=function(t){return t=t.toLowerCase(),C.IDENTS.hasOwnProperty(t)?C.IDENTS[t]:b.prototype.isIdentifier.call(this,t)},C.prototype.evaluateIdentifier=function(t){switch(t){case C.ID_VALUE:return this._value;case C.ID_ROW:return this._index.itemIndex;case C.ID_DATAROW:return this._index.item.dataRow;case C.ID_INDEX:return this._index.column.index;case C.ID_FIELD:return this._index.dataColumn.dataIndex;case C.ID_CHECKED:var e=this._index.item;return!!e&&e.checked;case C.ID_TAG:return this._index.column.tag;case C.ID_BASE:var i=this._index.dataColumn.baseIndex;return 0<=i?this._index.item.getData(i):void 0}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},C.prototype.evaluateIndexerI=function(t,e){var i=this._dataSource.fieldCount;if(e<0||i<=e)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case C.ID_VALUE:case C.ID_VALUES:return this._index.item.getData(e)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},C.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e),r=this._dataSource.fieldCount;if(o<0||r<=o)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case C.ID_VALUE:case C.ID_VALUES:return this._index.item.getData(o)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},C.IDENTS={value:C.ID_VALUE=0,row:C.ID_ROW=1,datarow:C.ID_DATAROW=2,index:C.ID_INDEX=3,field:C.ID_FIELD=4,checked:C.ID_CHECKED=5,tag:C.ID_TAG=6,base:C.ID_BASE=7,values:C.ID_VALUES=8},C);function C(){return b.call(this)||this}e.DataCellValidationRuntime=v;var w,E=(w=ce.Base,i(x,w),Object.defineProperty(x.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"hasRowValidation",{get:function(){return 0<this._owner.validations.count},enumerable:!0,configurable:!0}),x.prototype.validateCell=function(t,e){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel)},x.prototype.validateRow=function(t,e,i){var o=this._owner.editOptions.commitLevel;if(!i)for(var r=this._owner.getDataColumns(),n=0,s=r.length;n<s;n++){var a=r[n],l=X.CellIndex.temp(this._owner,t.index,a);this.$_validateCell(l,e,!0,o)}var u=this._owner.validations;if(u&&0<u.count){var h=this._owner.rowValidationRuntime;h.item=t,u.validate(e?W.ValidationMode.INSERT:W.ValidationMode.UPDATE,h,!1,o)}},x.prototype.clearInvalidCellList=function(){this.$_clearInvalidateList()},x.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},x.prototype.getInvalidCellList=function(){var t=[],e=this._cellList;for(var i in e){var o=e[i];for(var r in o){var n=o[r];t.push({column:n.column,dataRow:n.dataRow,message:n.message,level:n.level})}}return 0<t.length?t:null},x.prototype.checkValidateCells=function(t,e){var i=this._owner,o=i.getDataColumns(),r=[];if(null!=t)for(var n=0,s=t.length;n<s;n++)(l=i.getItem(t[n]))&&l.dataId&&-1<l.dataId&&(delete this._cellList[l.dataId],r.push(l));else{if(e)for(n=0,s=i.itemCount;n<s;n++)(l=i.getItem(n))&&l.dataId&&-1<l.dataId&&(delete this._cellList[l.dataId],r.push(l));else r=i.getAllItems();this._cellList={}}n=0;for(var a=r.length;n<a;n++){var l;if((l=r[n]).dataId&&!(l.dataId<0)){var u=0;for(s=o.length;u<s;u++){var h=o[u],c=h.dataIndex,p=X.CellIndex.temp(i,l.index,h);try{this.$_validateCell(p,!1,!1,W.ValidationLevel.IGNORE),i._fireValidateCell(p,!1,l.getData(c))}catch(t){this.$_addInvalidateCell(p,t),this._userValidations=!0}}}}return i.refreshView(),this.getInvalidCellList()},x.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},x.prototype.$_validateCell=function(t,e,i,o){var r=t.dataColumn;if(r){var n=t.item.getData(r.dataIndex);if(r.required){var s=r.grid,a=s&&s.dataSource&&s.dataSource.getField(r.dataIndex);if(a&&a.isEmpty(n)){var l=r.requiredLevel||W.ValidationLevel.ERROR,u=r.requiredMessage||"Value is required: "+r.fieldName;throw new p(l,u,r,r.requiredMessage)}}var h=r.validations;if(h&&0<h.count()){var c=this._owner.columnValidationRuntime;c.setIndex(t);try{h.validate(e?W.ValidationMode.INSERT:W.ValidationMode.UPDATE,c,i,o),this.$_clearInvalidateCell(t)}catch(t){throw t instanceof p&&(t.column=r),t}}}},x.prototype.$_addInvalidateCell=function(t,e){var i=t.dataId&&t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var r=this._cellList;(r[i]?r[i]:r[i]={})[o]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name}}},x.prototype.$_clearInvalidateCell=function(t){var e=t.dataId,i=t.dataColumn.dataIndex,o=this._cellList[e];o&&o[i]&&delete o[i]},x.prototype.$_clearInvalidateList=function(){this._cellList={},this._userValidations=!1,this._owner.refreshView()},x);function x(t){var e=w.call(this)||this;return e._userValidations=!1,e._cellList={},e._owner=t,e}e.ValidationManager=E});t($);$.AbortError,$.ValidationError,$.EditValidation,$.EditValidationCollection,$.DataRowValidationRuntime,$.DataCellValidationRuntime,$.ValidationManager;var G=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=F.ValueColumn,i(s,r),s.prototype._doDispose=function(){this._filters&&this._filters.dispose(),this._filters=null,this._menu=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"capitalIndexers",{get:function(){return s.CAPITAL_INDEXERS},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?P.ExpressionParser.Default.parse(t,null):void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"equalBlankNode",{get:function(){return this._equalBlankNode},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"blanked",{get:function(){return this._equalBlank||null!=this._equalBlankNode},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&((this._excelFormulaStatement=t)?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new T.ExpressionStatement(t):this._excelFormulaExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"valueType",{get:function(){return this._valueType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupValues",{get:function(){return this._lookupValues},set:function(t){t!=this._lookupValues&&(this._lookupValues=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupLabels",{get:function(){return this._lookupLabels},set:function(t){t!=this._lookupLabels&&(this._lookupLabels=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=z.Utils.makeArray(t).slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"textOfInValid",{set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"displayCallback",{get:function(){return this._displayCallback},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"displayRegExp",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"displayReplace",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dynamicStyles",{get:function(){return this._dynamicStyles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(t){this._autoFilter=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assign(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"error",{get:function(){return this._error},set:function(t){(t=this._error)&&(this._error=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"errorLevel",{get:function(){return this._errorLevel},set:function(t){(t=this._errorLevel)&&(this._errorLevel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"popupMenu",{set:function(t){this._popupMenu=t,this.grid&&this._resetPopupMenu()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"menu",{get:function(){return this._menu},enumerable:!0,configurable:!0}),s.prototype.setDynamicStyles=function(t){this._dynamicStyles.setItems(t),this._changed()},s.prototype.getField=function(){var t=this._dataIndex;if(0<=t){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},s.prototype.setLookupData=function(t){var e,i,o,r,n={};if(this._lookupData=t){z.Utils.isArray(t)?n.list=t:n=t,this._lookupLabels=[],this._lookupValues=[],this._lookupMap=null,e=n.hasOwnProperty("value")?n.value:"value",i=n.hasOwnProperty("label")?n.label:"label";for(var s=0,a=n.list.length;s<a;s++)null!=(r=null!=(o=n.list[s])[e]?o[e]:o.code)&&this._lookupValues.push(null!=o[e]?o[e]:o.code),null!=r&&this._lookupLabels.push(null!=o[i]?o[i]:null!=o.text?o.text:r)}else this._lookupLabels=null,this._lookupValues=null,this._lookupMap=null;this._changed()},s.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._lookupValues,i=this._lookupLabels;if(e&&0<e.length){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var r;if(t&&this._valueSeparator){for(var n=t.split(this._valueSeparator),s=[],a=(o=0,n.length);o<a;o++)s.push(this._lookupMap&&this._lookupMap[n[o]]?this._lookupMap[n[o]]:n[o]);if(s.length<=0)return"";r=s.join(this._valueSeparator)}else r=this._lookupMap?this._lookupMap[t]:void 0;return r||(null!=this.textOfInvalid?this.textOfInvalid:t)},s.prototype.getLookupIndex=function(t){if(this._lookupValues&&0<this._lookupValues.length)for(var e=0,i=this._lookupValues.length;e<i;e++)if(this._lookupValues[e]==t)return e;return-1},s.prototype.getLookupIndices=function(t){var e=[];if(t&&this._lookupValues&&0<this._lookupValues.length)for(var i=z.Utils.isArray(t)?t:String(t).split(this._valueSeparator),o=0,r=i.length;o<r;o++)0<=this._lookupValues.indexOf(i[o])&&e.push(this._lookupValues.indexOf(i[o]));return e},s.prototype.getLookupValue=function(t){if(this._lookupValues&&0<this._lookupValues.length)return this._lookupValues[t]},s.prototype.getLookupValues=function(t){var e=[];if(this._lookupValues&&0<this._lookupValues.length)for(var i=0,o=t.length;i<o;i++)0<=t[i]&&t[i]<this._lookupValues.length&&e.push(this._lookupValues[t[i]]);return e},s.prototype.getSourceValue=function(t){var e=this._lookupValues,i=this._lookupLabels;if(i&&e){var o=i.indexOf(t);if(0<=o&&e.length>o)return e[o];if(0<=(o=e.indexOf(t)))return e[o]}},s.prototype.getSourceValues=function(t){var e=this._lookupValues,i=this._lookupLabels;if(i&&e){for(var o=void 0,r=[],n=this._valueSeparator,s=0,a=(t=z.Utils.isArray(t)?t:n&&t?String(t).split(n):z.Utils.makeArray(t)).length;s<a;s++)0<=(o=i.indexOf(t[s]))&&e.length>o?r.push(e[o]):r.push(t[s]);if(0<r.length&&n)return r.join(n);if(0<r.length)return r.join()}},s.prototype.clearFilters=function(){this.setFilters(null)},s.prototype.addFilters=function(t,e){if(void 0===e&&(e=!1),t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(z.Utils.makeArray(t),e)}},s.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(z.Utils.makeArray(t))}},s.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.activateItems(z.Utils.makeArray(t),e)}},s.prototype.activateAllFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.activateAll(t)},s.prototype.hideColumnFilters=function(t,e){this._filters.hideFilters(z.Utils.makeArray(t),e)},s.prototype.hideAllColumnFilters=function(t){this._filters.hideAllFilters(t)},s.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.toggleItems(z.Utils.makeArray(t))}},s.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this._filters.toggleAll()},s.prototype.getFilter=function(t){var e=this._filters.indexOf(t);return this._filters.getItem(e)},s.prototype.getActiveFilters=function(t){return this._filters.getActiveItems(t)},s.prototype.getFilters=function(){return this._filters.items},Object.defineProperty(s.prototype,"hasFilters",{get:function(){return this._autoFilter||0<this._filters.count},enumerable:!0,configurable:!0}),s.prototype.isFiltered=function(){return 0<this._filters.activeCount},s.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},s.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},s.prototype._resetPopupMenu=function(){if(null!=this._popupMenu&&null==this._menu){var t=this.grid.popupMenuManager;if("string"==typeof this._popupMenu)this._menu=t.getMenu(this._popupMenu);else if(this._popupMenu){var e="$$_column_popup_menu"+this.$_hash;this._menu=t.addMenu(e,z.Utils.makeArray(this._popupMenu))}}else null==this._popupMenu&&null!=this._menu&&(this._menu=null)},s.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;if(e)if(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex&&(e.getField(this._dataIndex),this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this._lookupKeyFields&&0<this._lookupKeyFields.length&&this._lookupSourceId){for(var i=this._lookupKeyFields.length,o=this._lookupKeyFieldIds=new Array(i),r=0;r<i;r++)o[r]=e.getFieldIndex(this._lookupKeyFields[r]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[];this._resetPopupMenu()},s.prototype.isWritable=function(){return this._editable&&!this._readOnly},s.prototype.canMerge=function(){return this._mergeGrouped||r.prototype.canMerge.call(this)},s.prototype.assignFrom=function(t){r.prototype.assignFrom.call(this,t),t.values&&(this.lookupValues=t.values),t.labels&&(this.lookupLabels=t.labels)},s.prototype.getText=function(t,e){var i;if(void 0===e&&(e=-1),this._lookupDisplay)i=t;else{var o=void 0,r=void 0,n=void 0;i=t,this._valueType&&this._valueType==W.ValueType.NUMBER&&null!=this._nanText&&isNaN(i)?i=this.nanText:null!=i&&("string"==typeof i||"number"==typeof i)&&i.toString()&&(o=this.displayRegExp)&&(r=this.displayReplace)?i=i.toString().replace(o,r):(n=this._displayCallback)?i=n(this.grid.getHandler(),X.CellIndex.temp(this.grid,e,this).proxy(),i):null!=i&&"object"==typeof i&&(i=JSON.stringify(i))}var s=null==i?"":String(i);return s=this.affix(s)},s.prototype.getDisplayText=function(t){var e,i=this.grid.formatOptions;switch(this._valueType){case W.ValueType.TEXT:e=t;break;case W.ValueType.NUMBER:var o=Number(t),r=void 0;e=isNaN(o)?this._nanText:0==o&&null!=this.zeroText?this.zeroText:(r=i.getNumberFormatter(this.numberFormatter))?r.format(o):this.getText(t);break;case W.ValueType.DATETIME:var n=void 0;e=t instanceof Date&&(n=i.getDateWriter(this.datetimeWriter))?n.getText(t):this.getText(t);break;case W.ValueType.BOOLEAN:var s=void 0;e=(s=i.getBoolFormatter(this.boolFormatter))?s.formatValue(t):this.getText(t);break;case W.ValueType.OBJECT:default:e=this.getText(t)}return e},s.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},s.prototype.$_setGroupLevel=function(t){this._groupLevel=t},s.prototype._changed=function(){r.prototype._changed.call(this)},s.CAPITAL_INDEXERS=["value","values"],s);function s(t){var e=r.call(this)||this;return e._fieldIndex=-1,e._editable=!0,e._readOnly=!1,e._equalBlank=!1,e._lookupValues=null,e._lookupLabels=null,e._lookupDisplay=!1,e._lookupSource=null,e._lookupKeyFields=null,e._lookupKeyFieldIds=null,e._mergeGrouped=!1,e._sortable=!0,e._sortOrder=-1,e._filterable=!0,e._autoFilter=!1,e._lookupData=null,e._required=!1,e._requiredLevel=W.ValidationLevel.ERROR,e._validations=new $.EditValidationCollection,e._errorLevel=W.ValidationLevel.IGNORE,e._dataIndex=-1,e._baseIndex=-1,e._valueType=W.ValueType.TEXT,e._groupLevel=-1,e._labelFieldIndex=-1,e._dynamicStyles=new h.DynamicStyleCollection(e),e._filters=new S.ColumnFilterCollection(e),e._filters.addListener(e),t&&e.assignFrom(t),e}e.DataColumn=n;var a,l=(a=F.ValueColumn,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),u.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var r=this._fieldArray[i],n=r.split("..");if(1<n.length){var s=e.getFieldIndex(n[0]),a=e.getFieldIndex(n[1]);if(0<=s&&0<=a)for(var l=Math.min(s,a),u=Math.max(s,a),h=l;h<=u;h++)this._fields.push(h)}else 0<=(h=e.getFieldIndex(r))&&this._fields.push(h)}},u);function u(t){var e=a.call(this,t)||this;return e._fieldArray=e._fieldArray||[],e._fields=e._fields||[],t&&e.assignFrom(t),e}e.SeriesColumn=l});t(G);G.DataColumn,G.SeriesColumn;var H=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=P.ExpressionRuntime,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype.isIdentifier=function(t){return t=t.toLowerCase(),s.IDENTS.hasOwnProperty(t)?s.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},s.prototype.evaluateIdentifier=function(t){switch(t){case s.ID_COUNT:return this._getCount();case s.ID_SUM:return this._getSum();case s.ID_MAX:return this._getMax();case s.ID_MIN:return this._getMin();case s.ID_AVG:return this._getAvg();case s.ID_VAR:return this._getVar();case s.ID_VARP:return this._getVarp();case s.ID_STDEV:return this._getStdev();case s.ID_STDEVP:return this._getStdevp();case s.ID_DCOUNT:return this._getDataCount();case s.ID_DSUM:return this._getDataSum()}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},s.prototype.evaluateIndexerI=function(t,e){throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},s.prototype.evaluateIndexerS=function(t,e,i){throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)},s.IDENTS={count:s.ID_COUNT=0,sum:s.ID_SUM=1,max:s.ID_MAX=2,min:s.ID_MIN=3,avg:s.ID_AVG=4,var:s.ID_VAR=5,varp:s.ID_VARP=6,stdev:s.ID_STDEV=7,stdevp:s.ID_STDEVP=8,dcount:s.ID_DCOUNT=9,dsum:s.ID_DSUM=10},s);function s(){return r.call(this)||this}e.SummaryExpressionRuntime=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,a.prototype._doDispose.call(this)},u.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},u.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},u.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds: "+e);switch(t){case n.ID_SUM:return this._summarizer.getSum(e);case n.ID_COUNT:return this._summarizer.getCount(e);case n.ID_MAX:return this._summarizer.getMax(e);case n.ID_MIN:return this._summarizer.getMin(e);case n.ID_AVG:return this._summarizer.getAvg(e);case n.ID_VAR:return this._summarizer.getVar(e);case n.ID_VARP:return this._summarizer.getVarp(e);case n.ID_STDEV:return this._summarizer.getStdev(e);case n.ID_STDEVP:return this._summarizer.getStdevp(e)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},u.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new P.ExpressionEvaluationError("Data field index out of bounds: "+o);switch(t){case n.ID_SUM:return this._summarizer.getSum(o);case n.ID_COUNT:return this._summarizer.getCount(o);case n.ID_MAX:return this._summarizer.getMax(o);case n.ID_MIN:return this._summarizer.getMin(o);case n.ID_AVG:return this._summarizer.getAvg(o);case n.ID_VAR:return this._summarizer.getVar(o);case n.ID_VARP:return this._summarizer.getVarp(o);case n.ID_STDEV:return this._summarizer.getStdev(o);case n.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},u.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},u.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},u.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},u.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},u.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},u.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},u.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},u.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},u.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},u.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},u.prototype._getDataSum=function(){return this._summarizer?this._summarizer.getDataSum(this._column.dataIndex):NaN},u);function u(){return a.call(this)||this}e.ColumnSummaryRuntime=l;var h,c=(i(p,h=l),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),p.prototype.setItem=function(t){this._item=t},p.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},p.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},p.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},p.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},p.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},p.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},p.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},p.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},p.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},p.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},p.prototype._getDataSum=function(){return this._item.getDataSum(this._column.dataIndex)},p);function p(){return h.call(this)||this}e.RowGroupSummaryRuntime=c});t(H);H.SummaryExpressionRuntime,H.ColumnSummaryRuntime,H.RowGroupSummaryRuntime;var l=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._columns=null,this._owner=null,this._nameMap=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return this._columns.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!0,configurable:!0}),s.prototype.getColumn=function(t){return this._columns[t]},s.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._addColumn(o);if(!r)throw new Error("column is undefined");r.$_owner=this}},s.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},s.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var r=this._columns[i];r instanceof G.DataColumn&&(r.sortOrder=e.indexOf(r.dataIndex),r.sortDirection=t[r.sortOrder])}},s.prototype.columnByName=function(t){return this._nameMap[t]},s.prototype.columnByField=function(t){if(0<=t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof G.DataColumn&&o.dataIndex==t)return o}return null},s.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof F.GridColumn||(t=ue.GridBase.createColumn(t)),t instanceof F.GridColumn){if(0<=i.indexOf(t))throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;return o&&(this._nameMap[o]=t),t}return null},s);function s(t){var e=r.call(this)||this;return e._columns=[],e._nameMap={},e._owner=t,e}e.ColumnCollection=n});t(l);l.ColumnCollection;var u=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Z.GridCell,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"subText",{get:function(){return this._subText},set:function(t){this._subText=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"subTextGap",{get:function(){return this._subTextGap},set:function(t){this._subTextGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"subLocation",{get:function(){return this._subLocation},set:function(t){this._subLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageList",{get:function(){return this._imageList},set:function(t){this._imageList=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageIndex",{get:function(){return this._imageIndex},set:function(t){this._imageIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(t){this._imageUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"imageLocation",{get:function(){return this._imageLocation},set:function(t){this._imageLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t},enumerable:!0,configurable:!0}),s);function s(){var t=r.call(this,"headerCell")||this;return t._subTextGap=1,t._subLocation=W.SubTextLocation.LOWER,t._itemOffset=2,t._itemGap=2,t._imageIndex=-1,t._checkLocation=W.ColumnHeaderItemLocation.NONE,t._imageLocation=W.ColumnHeaderItemLocation.NONE,t._checked=!1,t._showTooltip=!0,t}e.HeaderCell=n;var a,l=(a=Y.VisualObject,i(u,a),u.prototype._doDispose=function(){this._cell=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"subTextLocation",{get:function(){return this._subTextLocation},set:function(t){(t=t||W.SubTextLocation.LOWER)!=this._subTextLocation&&(this._subTextLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"subTextGap",{get:function(){return this._subTextGap},set:function(t){t!=this._subTextGap&&(this._subTextGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"imageList",{get:function(){return this._imageList},set:function(t){t!=this._imageList&&(this._imageList=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())},enumerable:!0,configurable:!0}),u.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;if(e.index.set(-1,i),i){var o=i.header,r=void 0;e.setLayout(t),e.text=o.displayText,e.subText=o.subText,e.subLocation=(r=o.subTextLocation)?r:this._subTextLocation,e.subTextGap=void 0===(r=o.subTextGap)?this._subTextGap:r,e.itemOffset=void 0===(r=o.itemOffset)?this._itemOffset:r,e.itemGap=void 0===(r=o.itemGap)?this._itemGap:r,e.imageList=this._imageList,e.imageIndex=o.imageIndex,e.imageUrl=o.imageUrl,e.checkLocation=o.checkLocation,e.imageLocation=o.imageLocation,e.checked=i.checked,e.showTooltip=o.showTooltip,e.tooltip=o.tooltip}return e},u.prototype.clean=function(){a.prototype.clean.call(this)},u);function u(t){var e=a.call(this,t)||this;return e._minHeight=23,e._height=0,e._resizable=!1,e._sortable=!0,e._filterable=!0,e._subTextLocation=W.SubTextLocation.LOWER,e._subTextGap=1,e._itemOffset=2,e._itemGap=2,e._showSelection=!1,e._showTooltip=!1,e._sortWidth=16,e._sortHeight=16,e._filterWidth=16,e._filterHeight=16,e._checkWidth=16,e._checkHeight=16,e._cell=new n,e.visible=!0,e}e.GridHeader=l});t(u);u.HeaderCell,u.GridHeader;var _=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=P.ExpressionRuntime,i(s,r),s.prototype._doDispose=function(){this._cell=null,this._grid=null,r.prototype._doDispose.call(this)},s.prototype.setCell=function(t){this._cell=t,this._grid=t.index&&t.index.grid},s.prototype.isIdentifier=function(t){return t=t.toLowerCase(),s.IDENTS.hasOwnProperty(t)?s.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},s.prototype.evaluateIdentifier=function(t){switch(t){case s.ID_VALUE:return this._cell.value;case s.ID_FIELD:return this._cell.index.dataField;case s.ID_LEVEL:return this._cell.level}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},s.prototype.evaluateIndexerI=function(t,e){},s.prototype.evaluateIndexerS=function(t,e,i){},s.IDENTS={value:s.ID_VALUE=0,field:s.ID_FIELD=1,level:s.ID_LEVEL=2},s);function s(){return r.call(this)||this}e.FooterExpressionRuntime=n;var a,l=(a=Z.GridCell,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!0,configurable:!0}),u.prototype.calculate=function(){var t=this.index.dataColumn,e=t?t.grid:null;if(this._value=NaN,this._error=null,e&&e.summaryMode!=W.SummaryMode.NONE&&0<=t.dataIndex){var i=this._getSummary(t,this._childIndex);if(i&&i.expression&&0<e.rowCount)try{var o=e.columnSummaryRuntime;o.setColumn(t,e.summarizer),this._value=i.evaluate(o,this._childIndex)}catch(t){this._error=t,this._errorDetail=t}}},Object.defineProperty(u.prototype,"text",{get:function(){if(this._error)return Z.GridCell.ERROR;var t=isNaN(this._value)?null:String(this._value),e=void 0;if(!t&&(e=this.index.valueColumn)){var i=this._getSummary(e,this._childIndex);t=i?i.text:""}return t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),u);function u(t){var e=a.call(this,t)||this;return e._childIndex=0,e._value=NaN,e._error=null,e._errorDetail=null,e}e.SummaryCell=l;var h,c=(i(p,h=l),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)},enumerable:!0,configurable:!0}),p.prototype._getSummary=function(t,e){return t.footers.getItem(e)},p);function p(){return h.call(this,"footerCell")||this}e.FooterCell=c;var d,_=(d=Y.VisualObject,i(f,d),f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!0,configurable:!0}),f.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},f.prototype._visibleChanged=function(){d.prototype._visibleChanged.call(this)},f);function f(t){var e=d.call(this,t)||this;return e._minHeight=23,e._height=0,e._resizable=!1,e._headText="Σ",e._childIndex=0,e._displayIndex=0,e._runtime=new n,e._cell=e._createCell(),e.visible=!0,e}e.GridSummaryObject=_;var y,m=(i(g,y=_),g.prototype._doDispose=function(){y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"footerIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),g.prototype._createCell=function(){return new c},g.prototype._visibleChanged=function(){y.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},g);function g(t){return y.call(this,t)||this}e.GridFooter=m;var b,v=(b=Y.VisualObject,i(C,b),C.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,this._visibles=null,b.prototype._doDispose.call(this)},Object.defineProperty(C.prototype,"visible",{get:function(){return this._visible&&0<this._visibles.length},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),C.prototype.get=function(t){return this._items[t]},C.prototype.getVisible=function(t){return this._visibles[t]},C.prototype.getHeight=function(){for(var t=0,e=0,i=this._visibles;e<i.length;e++)t+=i[e].minHeight;return t},C.prototype.assignFrom=function(t){if(z.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new m(this._grid)),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t);this.$_resetVisibles()},C.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},C.prototype.$_resetVisibles=function(){for(var t=this._visibles.length=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}},C);function C(t){var e=b.call(this,t)||this;return e._items=[],e._visibles=[],e._items.push(new m(t)),e._visibles.push(e._items[0]),e}e.GridFooterCollection=v});t(_);_.FooterExpressionRuntime,_.SummaryCell,_.FooterCell,_.GridSummaryObject,_.GridFooter,_.GridFooterCollection;var C=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Y.VisualObject,i(s,r),Object.defineProperty(s.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summaryText",{get:function(){return this._summaryText},set:function(t){t!=this._summaryText&&(this._summaryText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headImageUrl",{get:function(){return this._headImageUrl},set:function(t){t!=this._headImageUrl&&(this._headImageUrl=t,this._headImage=t?this._grid.getImage(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footImageUrl",{get:function(){return this._footImageUrl},set:function(t){t!=this._footImageUrl&&(this._footImageUrl=t,this._footImage=t?this._grid.getImage(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summaryImageUrl",{get:function(){return this._summaryImageUrl},set:function(t){t!=this._summaryImageUrl&&(this._summaryImageUrl=t,this._summaryImage=t?this._grid.getImage(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t)},enumerable:!0,configurable:!0}),s.prototype.headImage=function(){return this._headImage?this._headImage:this._headImage=this._headImageUrl?this._grid.getImage(this._headImageUrl):null},s.prototype.footImage=function(){return this._footImage?this._footImage:this._footImage=this._footImageUrl?this._grid.getImage(this._footImageUrl):null},s.prototype.summaryImage=function(){return this._summaryImage?this._summaryImage:this._summaryImage=this._summaryImageUrl?this._grid.getImage(this._summaryImageUrl):null},s.prototype.getHeadCell=function(){return this._headCell},s.prototype.getFootCell=function(){return this._footCell},s.prototype.getSumCell=function(){return this._sumCell},s.prototype._createHeadCell=function(){return new Z.StyledCell(this)},s);function s(t){var e=r.call(this,t)||this;return e._displayOrder=0,e._headText=null,e._footText=null,e._summaryText=null,e._headImageUrl=null,e._footImageUrl=null,e._summaryImageUrl=null,e._popupMenu=null,e._headCell=e._createHeadCell(),e._footCell=new Z.StyledCell(e),e._sumCell=new Z.StyledCell(e),e.visible=!0,e}e.SectionObject=n});t(C);C.SectionObject;var c=e(function(t,e){var o,n,i,r,s,a=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),(i=n=e.IndicatorValue||(e.IndicatorValue={})).NONE="none",i.INDEX="index",i.ROW="row",(s=r=e.StateMark||(e.StateMark={})).DEFAULT="default",s.TEXT="text",s.NONE="none",s.IMAGE="image";var l,u=(l=Z.GridCell,a(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},Object.defineProperty(h.prototype,"indicator",{get:function(){return this._indicator},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"text",{get:function(){var t,e=this._indicator,i=this.index,o=i.item,r="";if(o&&o.itemState==q.ItemState.NORMAL)switch(e.displayValue){case n.INDEX:0<=(t=e.owner.getIndicatorIndex(o))&&(t+=e.indexOffset,e.zeroBase||t++,r=String(t));break;case n.ROW:0<=(t=i.dataRow)&&(t+=e.rowOffset,e.zeroBase||t++,r=String(t))}return r},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),h);function h(t){var e=l.call(this,"indicatorCell")||this;return e._itemState=q.ItemState.NORMAL,e._indicator=t,e}e.RowIndicatorCell=u;var c,p=(c=C.SectionObject,a(d,c),d.prototype._doDispose=function(){c.prototype._doDispose.call(this)},Object.defineProperty(d.prototype,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"stateImages",{get:function(){return this._stateImages},set:function(t){if(t!=this._stateImages){for(var e in t)this._stateImages[e]=t[e];this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"staticOrder",{get:function(){return 0},enumerable:!0,configurable:!0}),d.prototype.getCell=function(t){var e=this._cell;if(e.setIndex(t),t.item){var i=t.item.itemState;i==q.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==t.itemIndex&&(i=q.ItemState.FOCUSED),e.itemState=i}return e},d.prototype.getHeadCellSelector=function(){return"rg-rowindicator-head"},d);function d(t){var e=c.call(this,t)||this;return e._displayValue=n.INDEX,e._zeroBase=!1,e._indexOffset=0,e._rowOffset=0,e._minWidth=40,e._maxWidth=0,e._width=0,e._selectable=!0,e._mark=r.DEFAULT,e._showFocus=!0,e._showSelection=!1,e._stateImages={},e._cell=new u(e),e.headText="No.",e}e.RowIndicator=p});t(c);c.IndicatorValue,c.StateMark,c.RowIndicatorCell,c.RowIndicator;var p=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Z.GridCell,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"text",{get:function(){switch(this.item.rowState){case x.RowState.CREATED:return"C";case x.RowState.UPDATED:return"U";case x.RowState.DELETED:return"D";case x.RowState.CREATE_AND_DELETED:return"CD";default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),s);function s(){return r.call(this,"stateBarCell")||this}e.StateBarCell=n;var a,l=(a=C.SectionObject,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"stateTexts",{get:function(){return this._stateTexts},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"stateStyles",{get:function(){return this._stateStyles},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"stateImages",{get:function(){return this._stateImages},set:function(t){if(t!=this._stateImages){for(var e in t)this._stateImages[e]=t[e];this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!0,configurable:!0}),u.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},u.prototype.getHeadCellSelector=function(){return"rg-statebar-head"},u);function u(t){var e=a.call(this,t)||this;return e._width=20,e._mark=c.StateMark.DEFAULT,e._stateTexts={},e._stateStyles={},e._stateImages={},e._stateTexts[x.RowState.CREATED]="C",e._stateTexts[x.RowState.UPDATED]="U",e._stateTexts[x.RowState.DELETED]="D",e._stateTexts[x.RowState.CREATE_AND_DELETED]="X",e._stateStyles[x.RowState.CREATED]=null,e._stateStyles[x.RowState.UPDATED]=null,e._stateStyles[x.RowState.DELETED]=null,e._stateStyles[x.RowState.CREATE_AND_DELETED]=null,e._cell=new n,e}e.StateBar=l});t(p);p.StateBarCell,p.StateBar;var U=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=P.ExpressionRuntime,i(a,r),a.prototype._doDispose=function(){this._cell=null,this._grid=null,r.prototype._doDispose.call(this)},a.prototype.setCell=function(t){this._cell=t,this._grid=t.index&&t.index.grid},a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),a.IDENTS.hasOwnProperty(t)?a.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIdentifier=function(t){switch(t){case a.ID_VALUE:case a.ID_CHECKED:return this._cell.item.checked;case a.ID_CHECKABLE:return this._cell.item.checkable;case a.ID_ROW:return this._cell.item.index;case a.ID_DATA_ROW:return this._cell.item.dataRow;case a.ID_STATE:switch(this._cell.item.rowState){case x.RowState.CREATED:return"c";case x.RowState.UPDATED:return"u";case x.RowState.DELETED:return"d";case x.RowState.CREATE_AND_DELETED:return"x"}return}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},a.prototype.evaluateIndexerI=function(t,e){if(this._cell){var i=this._cell.item,o=(i&&i.dataSource).fieldCount;if(t!=a.ID_VALUE&&t!=a.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||o<=e)throw new P.ExpressionEvaluationError("Data field index out of bounds:"+e);return i.getData(e)}},a.prototype.evaluateIndexerS=function(t,e,i){if(t!=a.ID_VALUE&&t!=a.ID_VALUES)throw new P.ExpressionEvaluationError("Invalid identifier indexer: "+t);var o=this._cell.item,r=o&&o.dataSource,n=r.fieldCount;if(r){var s=i?r.getFieldIndexC(e):r.getFieldIndex(e);if(s<0||n<=s)throw new P.ExpressionEvaluationError("Data field is not exists:"+e);return o.getData(s)}},a.IDENTS={value:a.ID_VALUE=0,values:a.ID_VALUES=1,checked:a.ID_CHECKED=2,checkable:a.ID_CHECKABLE=3,row:a.ID_ROW=4,datarow:a.ID_DATA_ROW=5,state:a.ID_STATE=6},a);function a(){return r.call(this)||this}e.CheckBarExpressionRuntime=n;var s,l=(s=Z.GridCell,i(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"value",{get:function(){return this.item.checked},enumerable:!0,configurable:!0}),u);function u(){return s.call(this,"checkBarCell")||this}e.CheckBarCell=l;var h,c=(h=C.SectionObject,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"capitalIndexers",{get:function(){return["value","values"]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"headCheckImageUrl",{get:function(){return this._headCheckImageUrl},set:function(t){t!=this._headCheckImageUrl&&((this._headCheckImageUrl=t)&&this._grid.getImage(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"headUnCheckImageUrl",{get:function(){return this._headUnCheckImageUrl},set:function(t){t!=this._headUnCheckImageUrl&&((this._headUnCheckImageUrl=t)&&this._grid.getImage(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checkImageUrl",{get:function(){return this._checkImageUrl},set:function(t){t!=this._checkImageUrl&&((this._checkImageUrl=t)&&this._grid.getImage(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"unCheckImageUrl",{get:function(){return this._unCheckImageUrl},set:function(t){t!=this._unCheckImageUrl&&((this._unCheckImageUrl=t)&&this._grid.getImage(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"drawCheckBox",{get:function(){return this._drawCheckBox},set:function(t){t!=this._drawCheckBox&&(this._drawCheckBox=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"radioImageUrl",{get:function(){return this._radioImageUrl},set:function(t){t!=this._radioImageUrl&&((this._radioImageUrl=t)&&this._grid.getImage(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!0,configurable:!0}),p.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},p.prototype.getHeadCellSelector=function(){return"rg-checkbar-head"},p);function p(t){var e=h.call(this,t)||this;return e._width=20,e._exclusive=!1,e._showAll=!0,e._showGroup=!0,e._visibleOnly=!1,e._checkableOnly=!0,e._checkableExpression=null,e._headCheckImageUrl=null,e._headUnCheckImageUrl=null,e._checkImageUrl=null,e._unCheckImageUrl=null,e._drawCheckBox=!0,e._radioImageUrl=null,e._syncHeadCheck=!1,e._cell=new l,e._runtime=new n,e._allChecked=!1,e}e.CheckBar=c});t(U);U.CheckBarExpressionRuntime,U.CheckBarCell,U.CheckBar;var J=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=["value","values"],s=(r=Y.VisualObject,i(a,r),a.prototype._doDispose=function(){this._dataCell=null,this._literalCell=null,this._seriesCell=null,this._mergedCell=null,this._rowRuntime=null,this._cellRuntime=null,this._runBodyStyles=null,this._styleTargets=null,this._rowStylesOwner=null,this._cellStylesOwner=null,r.prototype._doDispose.call(this)},Object.defineProperty(a.prototype,"capitalIndexers",{get:function(){return n},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowRuntime",{get:function(){return this._rowRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellRunTime",{get:function(){return this._cellRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),a.prototype.getCell=function(t,e){var i,o=t.column;return t.dataColumn,t.colFixed,(i=e?this._mergedCell:o instanceof G.DataColumn?this._dataCell:o instanceof G.SeriesColumn?this._seriesCell:o instanceof Z.LiteralCell?this._literalCell:this._dataCell).setIndex(t),i},a.prototype.getCellSimple=function(t,e){var i=t.column,o=e?this._mergedCell:i instanceof G.SeriesColumn?this._seriesCell:i instanceof Z.LiteralCell?this._literalCell:this._dataCell;return o.setIndex(t),o},a.prototype.addDynamicStyle=function(t,e){},a.prototype.getCellStyle=function(t,e){var i=t.valueColumn.styleName,o=this._cellStyleCallback;if(o){var r=o(this._grid,t);e.assign(r)}var n=t.valueColumn.getCellStyle(t);return e.assign(n),!e.styleName&&i&&(e.styleName=i),e.styleName?e.styleName="rg-data-cell "+e.styleName:e.styleName="rg-data-cell",e},a.prototype.getFixedRowBarStyle=function(){return a.FIXED_BAR_STYLE},a.prototype.getFixedBarCellStyle=function(){return a.FIXED_BAR_CELL_STYLE},a.prototype.getRowStyle=function(t){var e=this._rowStyleCallback;return e&&e(this._grid,t)||a.ROW_STYLE},a.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._rs=t.itemSource,this._ds=t.dataSource,this._rowRuntime.setDataSource(this._ds),this._cellRuntime.setDataSource(this._ds),h.DynamicStyleCollection.prototype},a.CELL_STYLE="rg-data-cell",a.ROW_STYLE="rg-data-row",a.FIXED_BAR_STYLE="rg-fixed-row-bar",a.FIXED_BAR_CELL_STYLE="rg-fixed-bar-cell",a);function a(t){var e=r.call(this,t)||this;return e._cellButtonWidth=20,e._editButtonWidth=16,e._rowStylesOwner={capitalIndexers:["value","values"]},e._cellStylesOwner={capitalIndexers:["value","values"]},e._styleTargets={body:!0,fixed:!1},e._dataCell=new Z.DataCell,e._literalCell=new Z.LiteralCell,e._seriesCell=new Z.SeriesCell,e._mergedCell=new B.MergedDataCell,e._rowRuntime=new A.DataRowExpressionRuntime,e._cellRuntime=new A.DataCellExpressionRuntime,e}e.GridBody=s});t(J);J.GridBody;var Q=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){return this._grid=null,r.prototype._doDispose.call(this)},s.prototype.stylesChanged=function(t){this._refreshOwner()},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),s.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},s.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},s.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},s.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},s.prototype._invalidateEditor=function(){},s);function s(t){var e=r.call(this)||this;return e._grid=t,e}e.GridBaseOptions=n});t(Q);Q.GridBaseOptions;var tt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=j.EventAware,i(s,n),s.initStyles=function(t){return t},s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fireEvents",{get:function(){return this._fireEvents},set:function(t){this._fireEvents=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"background",{get:function(){return this.searchStyles(s.BACKGROUND)._background},set:function(t){void 0!==t?this._values[s.BACKGROUND]&&t===this._background||(this._background=t,this._values[s.BACKGROUND]=!0,this._fireEvents&&this.changed(s.BACKGROUND)):this._values[s.BACKGROUND]&&(delete this._background,this._values[s.BACKGROUND]=!1,this._fireEvents&&this.changed(s.BACKGROUND))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"line",{get:function(){return this.searchStyles(s.LINE)._line},set:function(t){void 0!==t?this._values[s.LINE]&&t===this._line||(this._line=t,this._values[s.LINE]=!0,this._fireEvents&&this.changed(s.LINE)):this._values[s.LINE]&&(delete this._line,this._values[s.LINE]=!1,this._fireEvents&&this.changed(s.LINE))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"figureBackground",{get:function(){return this.searchStyles(s.FIGURE_BACKGROUND)._figureBackground},set:function(t){void 0!==t?this._values[s.FIGURE_BACKGROUND]&&t===this._figureBackground||(this._figureBackground=t,this._values[s.FIGURE_BACKGROUND]=!0,this._fireEvents&&this.changed(s.FIGURE_BACKGROUND)):this._values[s.FIGURE_BACKGROUND]&&(delete this._figureBackground,this._values[s.FIGURE_BACKGROUND]=!1,this._fireEvents&&this.changed(s.FIGURE_BACKGROUND))},enumerable:!0,configurable:!0}),s.prototype.setParent=function(t,e){},s.prototype.clearValues=function(){},s.prototype.extend=function(t,e){},s.prototype.searchStyles=function(t){if(this._values[t])return this;for(var e=this._parent;e;){if(e._values[t])return e;e=e._parent}if(this._sysDefault&&this._sysDefault._values[t])return this._sysDefault;for(e=this._parent;e;){if(e._sysDefault&&e._sysDefault._values[t])return e._sysDefault;e=e._parent}return s.Default},s.prototype.changed=function(t,e){void 0===e&&(e=!0),0==this._updateLock&&e&&(this._owner&&this._owner.stylesChanged?this._owner.stylesChanged(t):this.fireEvent(s.CHANGED,t))},s.CHANGED="onVisualStylesChanged",s.STYLE_ALL=-1,s.VISIBILITY=0,s.BACKGROUND=1,s.SELECTED_BACKGROUND=2,s.INACTIVE_BACKGROUND=3,s.FOREGROUND=4,s.SELECTED_FOREGROUND=5,s.INACTIVE_FOREGROUND=6,s.BORDER=10,s.BORDER_LEFT=11,s.BORDER_RIGHT=12,s.BORDER_TOP=13,s.BORDER_BOTTOM=14,s.LINE=15,s.RENDERER=16,s.TEXT_ALIGNMENT=20,s.LINE_ALIGNMENT=21,s.NUMBER_FORMAT=22,s.DATETIME_FORMAT=23,s.BOOLEAN_FORMAT=24,s.PREFIX=25,s.SUFFIX=26,s.FONT=30,s.FONT_FAMILY=31,s.FONT_SIZE=32,s.FONT_BOLD=33,s.FONT_ITALIC=34,s.FONT_UNDERLINE=35,s.FONT_LINETHROUGH=36,s.TEXT_WRAP=37,s.PADDING_LEFT=40,s.PADDING_RIGHT=41,s.PADDING_TOP=42,s.PADDING_BOTTOM=43,s.ICON_INDEX=44,s.ICON_LOCATION=45,s.ICON_ALIGNMENT=46,s.ICON_OFFSET=47,s.ICON_PADDING=48,s.CONTENT_FIT=49,s.SELECTION_DISPLAY=50,s.HOVERED_MASK_BACKGROUND=51,s.HOVERED_MASK_BORDER=52,s.HOVERED_BACKGROUND=53,s.HOVERED_FOREGROUND=54,s.FIGURE_BACKGROUND=55,s.FIGURE_INACTIVE_BACKGROUND=56,s.FIGURE_BORDER=57,s.FIGURE_SIZE=58,s.FIGURE_NAME=59,s.FIGURE_STATE=60,s.Default=s.initStyles(new s(null,"defaultStyles")),s);function s(t,e,i,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!1);var r=n.call(this)||this;return r._background=void 0,r._line=void 0,r._figureBackground=void 0,r._values=[],r._updateLock=0,r._owner=t,r._name=e,r._fireEvents=o,i&&r.extend(i),r}e.VisualStyles=r});t(tt);tt.VisualStyles;var et=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){this._styles=null,this._rowBarStyles=null,this._colBarStyles=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._resizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"styles",{get:function(){return this._styles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ignoreColumnStyles",{get:function(){return this._ignoreColumnStyles},set:function(t){t!=this._ignoreColumnStyles&&(this._ignoreColumnStyles=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ignoreDynamicStyles",{get:function(){return this._ignoreDynamicStyles},set:function(t){t!=this._ignoreDynamicStyles&&(this._ignoreDynamicStyles=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},enumerable:!0,configurable:!0}),s.prototype.$_resetItemSource=function(){var t,e=this.grid;e&&(t=e.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},s);function s(t){var e=r.call(this,t)||this;return e._colCount=0,e._rightCount=0,e._rowCount=0,e._rightFixed=!0,e._exceptFromFiltering=!0,e._exceptFromSorting=!0,e._editable=!0,e._rowEditable=!0,e._resizable=!1,e._rowResizable=!1,e._movable=!1,e._colBarWidth=3,e._rightBarWidth=3,e._rowBarHeight=3,e._ignoreColumnStyles=!1,e._ignoreDynamicStyles=!1,e._styles=new tt.VisualStyles(e,"fixedBody"),e._rowBarStyles=new tt.VisualStyles(e,"fixedRowBar"),e._colBarStyles=new tt.VisualStyles(e,"fixedColumnBar"),e}e.FixedOptions=n});t(et);et.FixedOptions;var s=e(function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var e=z.Utils.hex,a=(o.createFrom=function(t,e){void 0===e&&(e=!1);var i=o._parse(t,r,e,!1);return i?i instanceof o?i:r.clone():null},o.getColorStringArray=function(t){return t.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},o.getColorCsvArray=function(t){return t.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},o._parse=function(t,e,i,o){if(t){var r=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),6<=--r&&r<=8)e._b=z.Utils.toInt(t.substr(r-2,2),16),e._g=z.Utils.toInt(t.substr(r-4,2),16),e._r=z.Utils.toInt(t.substr(r-6,2),16),e._a=6==r?i?NaN:1:z.Utils.toInt(t.substr(0,r-6),16)/255;else{if(3!=r){if(o)throw"Invalid color value text: "+t;return!1}e._r=z.Utils.toInt(t.charAt(0)+t.charAt(0),16),e._g=z.Utils.toInt(t.charAt(1)+t.charAt(1),16),e._b=z.Utils.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(r-1)){var n=(t=t.substring(5,r-1)).split(",");e._r=z.Utils.toInt(n[0]),e._g=z.Utils.toInt(n[1]),e._b=z.Utils.toInt(n[2]),e._a=z.Utils.toFloat(n[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(r-1)){if(i&&s.StrictColors.hasOwnProperty(t))return n=s.StrictColors[t],e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n;if(!i&&s.Colors.hasOwnProperty(t))return n=s.Colors[t],e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n;if(o)throw new Error("Invalid color text: "+t);return!1}var n=(t=t.substring(4,r-1)).split(",");e._r=z.Utils.toInt(n[0]),e._g=z.Utils.toInt(n[1]),e._b=z.Utils.toInt(n[2]),e._a=i?NaN:1}return!0}return!1},o.areEqual=function(t,e){return t&&e&&t._r==e._r&&t._g==e._g&&t._b==e._b&&t._a==e._a},o.prototype.clone=function(){return new o(this)},o.prototype.copy=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=1),t?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=isNaN(t._a)?e:t._a):this._a=e,this},o.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},o.prototype.valueWithBrightness=function(t){var e=this._r,i=this._g,o=this._b,r=Number(t);return isNaN(r)||1==r||(e=Math.floor(Math.max(0,Math.min(255,e*r))),i=Math.floor(Math.max(0,Math.min(255,i*r))),o=Math.floor(Math.max(0,Math.min(255,o*r))),255==e&&this._r<255&&(e=Math.floor((255+this._r)/2)),255==i&&this._g<255&&(i=Math.floor((255+this._g)/2)),255==o&&this._b<255&&(o=Math.floor((255+this._b)/2))),"rgba("+e+","+i+","+o+","+this._a+")"},o.prototype.argb=function(){return Math.floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},o.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},o.prototype.extractAlpha=function(){var t=this._a;return this._a=NaN,t},o.prototype.toHex=function(){return""+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},o.prototype.toColorHex=function(){return""+e(this._r)+e(this._g)+e(this._b)},o.prototype.toString=function(){return"#"+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},o.prototype.toColorString=function(){return"#"+e(this._r)+e(this._g)+e(this._b)},o);function o(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof t?o._parse(t,this,e,!1):t instanceof o?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)}var r=new(s.Color=a);new a,new a;s.Colors={transparent:new a("#00000000"),aqua:new a("#00ffff"),black:new a("#000000"),blue:new a("#0000ff"),fuchsia:new a("#ff00ff"),gray:new a("#808080"),green:new a("#008000"),lime:new a("#00ff00"),maroon:new a("#800000"),navy:new a("#000080"),olive:new a("#808000"),orange:new a("#ffa500"),purple:new a("#800080"),red:new a("#ff0000"),silver:new a("#c0c0c0"),teal:new a("#008080"),white:new a("#ffffff"),yellow:new a("#ffff00"),dimGray:new a("#696969"),dimgray:new a("#696969"),ltGray:new a("#d3d3d3"),ltgray:new a("#d3d3d3")},s.StrictColors={transparent:new a("#00000000"),aqua:new a("#ff00ffff",!0),black:new a("#ff000000",!0),blue:new a("#ff0000ff",!0),fuchsia:new a("#ffff00ff",!0),gray:new a("#ff808080",!0),green:new a("#ff008000",!0),lime:new a("#ff00ff00",!0),maroon:new a("#ff800000",!0),navy:new a("#ff000080",!0),olive:new a("#ff808000",!0),orange:new a("#ffffa500",!0),purple:new a("#ff800080",!0),red:new a("#ffff0000",!0),silver:new a("#ffc0c0c0",!0),teal:new a("#ff008080",!0),white:new a("#ffffffff",!0),yellow:new a("#ffffff00",!0),dimGray:new a("#ff696969",!0),dimgray:new a("#ff696969",!0),ltGray:new a("#ffd3d3d3",!0),ltgray:new a("#ffd3d3d3",!0)};var i=(n.createFrom=function(t,e){void 0===e&&(e=!1);var i=e?t.trim().toLowerCase():t;if(0!=i.indexOf("pal(")||")"!=i.charAt(i.length-1))return null;if(1<=(i=i.substring(4,i.length-1)).indexOf(",")){var o=i.split(",");return 1<o.length?new n(o[0],parseInt(o[1])):new n(o[0])}return new n(i)},n.prototype.clone=function(){var t=new n(this._paletteName,this._index);return t._palette=this._palette,t},n.prototype.getColor=function(){var t=this.getIndex();return 0<=t?this._palette.getColor(t):s.Colors.transparent},n.prototype.getIndex=function(){var t=this._palette;return t||(this._palette=t=l.getPalette(this._paletteName)),t?((this._index<0||this._index>=t.count)&&(this._index=t.next()),this._index):-1},n);function n(t,e){void 0===e&&(e=-1),this._index=-1,this._paletteName=t,this._index=e}s.ColorPaletteItem=i;var l=(u.register=function(t,e){t&&e&&(u._palettes[t]=e)},u.loadPalettes=function(t){if(t){var e=z.Utils.toArray(t);if(e)for(var i=0;i<e.length;i++){var o=e[i].name,r=e[i].colors;if(o&&r){var n=new u(r);u.register(o,n)}}}},u.getPalette=function(t){return u._palettes.hasOwnProperty(t)?u._palettes[t]:u._palettes.default},Object.defineProperty(u.prototype,"count",{get:function(){return this._colors.length},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"colors",{get:function(){return this._colors.slice()},enumerable:!0,configurable:!0}),u.prototype.next=function(){var t=this._next;return this._next=(this._next+1)%this._colors.length,t},u.prototype.getColor=function(t){return this._colors[t]},u.prototype._parse=function(t,e){if(this._colors=[],t){var i=t;i instanceof Array||(i=String(t).split(","));for(var o=0,r=i.length;o<r;o++){var n=a.createFrom(i[o],!0);this._colors.push(n)}}this._colors.length<1&&this._colors.push(a.createFrom("#00000000"))},u._palettes={default:new u("#eeeeee")},u);function u(t){this._colors=[],this._next=0,this._parse(t)}s.ColorPalette=l});t(s);s.Color,s.Colors,s.StrictColors,s.ColorPaletteItem,s.ColorPalette;var it=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),o.WHITE=new o(s.Colors.white),o.BLACK=new o(s.Colors.black),o.GRAY=new o(s.Colors.gray),o.DKGRAY=new o(s.Colors.dimGray),o.LTGRAY=new o(s.Colors.ltGray),o.RED=new o(s.Colors.red),o.GREEN=new o(s.Colors.green),o.BLUE=new o(s.Colors.blue),o.FOCUS=new o(s.Colors.gray,1,[1,1]),o);function o(t,e,i){void 0===e&&(e=1),void 0===i&&(i=null),this._color=t instanceof s.Color?t:new s.Color(t),this._width=Math.max(0,Math.floor(e)),i&&(this._dash=i)}e.SolidPen=i});t(it);it.SolidPen;var ot=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(o.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),o.prototype.toCss=function(){return this._color.toColorString()},o.WHITE=new o(s.Colors.white),o.BLACK=new o(s.Colors.black),o.GRAY=new o(s.Colors.gray),o.DKGRAY=new o(s.Colors.dimGray),o.LTGRAY=new o(s.Colors.ltGray),o.RED=new o(s.Colors.red),o.YELLOW=new o(s.Colors.yellow),o.GREEN=new o(s.Colors.green),o.BLUE=new o(s.Colors.blue),o.NULL=new o(0),o);function o(t){this._color=t instanceof s.Color?t:new s.Color(t)}e.SolidBrush=i});t(ot);ot.SolidBrush;var rt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.empty=function(){return new o},o.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new o(t,e)},Object.defineProperty(o.prototype,"isEmpty",{get:function(){return 0===this.x||0===this.y},enumerable:!0,configurable:!0}),o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},o.prototype.setEmpty=function(){return this.x=this.y=0,this},o.prototype.set=function(t,e){return this.x=t,this.y=e,this},o.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},o.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},o.EMPTY=new o,o);function o(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}e.Point=i});t(rt);rt.Point;var nt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=j.EventAware,i(s,r),s.prototype._doDispose=function(){if(this._removeEventListeners(this._dom),z.Utils.detach(this._dom),this._dom=null,this._elements){for(var t=0,e=this._elements;t<e.length;t++)e[t].dispose();this._elements.length=0}this._parent=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){return this._x+this._width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"position",{get:function(){return new rt.Point(this._x,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bounds",{get:function(){return new K.Rectangle(this._x,this._y,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"clientRect",{get:function(){return new K.Rectangle(0,0,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this._hoverChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"clickable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return this._dom.style},enumerable:!0,configurable:!0}),s.prototype.canHover=function(){return!0},s.prototype.getChildren=function(){return this._elements&&this._elements.concat()},s.prototype.getChild=function(t){return this._elements[t]},s.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},s.prototype.contains=function(t){return this._elements&&0<=this._elements.indexOf(t)},s.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},s.prototype.addChild=function(t){return this.insertChild(-1,t)},s.prototype.insertChild=function(t,e){if(!e||this.contains(e))return!1;var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var r=this._elements[t]._dom;this._dom&&r&&this._dom.insertBefore(o,r)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0},s.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(0<=e)return this.removeChildAt(e)===t}return!1},s.prototype.removeChildAt=function(t){if(0<=t&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},s.prototype.removeLast=function(){return this._elements&&0<this._elements.length?this.removeChildAt(this._elements.length-1):null},s.prototype.clear=function(){var t=this._elements;if(0<(t?t.length:0)){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},s.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++)e[t].visible=!1},s.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,r=this._elements;o<r.length;o++)r[o].invalidate(t,!0)},s.prototype.validate=function(){this._dirty=!1},s.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},s.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new K.Rectangle(this._x,this._y,this._width,this._height)},s.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new K.Rectangle(0,0,this._width,this._height)},s.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},s.prototype.containsInClient=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},s.prototype.parentToElement=function(t,e,i){for(var o=this;o&&o!=t;)e-=o._x,i-=o._y,o=o._parent;return new rt.Point(e,i)},s.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e=e||new K.Rectangle(0,0,this._width,this._height);i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},s.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},s.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,o=this._y,r=this._parent;for(e&&(i+=e.x,o+=e.y);r&&r!==t;)i+=r._x,o+=r._y,r=r._parent;return e?new K.Rectangle(i,o,e.width,e.height):new K.Rectangle(i,o,this._width,this._height)},s.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var o=this._parent;o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new K.Rectangle(e,i,t.width,t.height):new K.Rectangle(e,i,this._width,this._height)},s.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),t=this.container.toScreen(t)},s.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new rt.Point(t,e)},s.prototype.hitTest=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},s.prototype.findChildAt=function(t,e,i){var o=this._elements,r=o?o.length:0;if(0<r)for(var n=r-1;0<=n;n--){var s=o[n];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var u=s.findChildAt(a,l,i);if(u)return u;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},s.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},s.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},s.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.invalidate())},s.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.invalidate())},s.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.invalidate())},s.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,r=t.height>>0;e==this._x&&i==this._y&&o==this._width&&r==this._height||(this._x=e,this._y=i,this._width=o,this._height=r,this.invalidate())},s.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},s.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},s.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},s.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},s.prototype._createDom=function(){return document.createElement("div")},s.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},s.prototype._addEventListeners=function(t){},s.prototype._removeEventListeners=function(t){},s.prototype.$_attached=function(t){this._doAttached(t)},s.prototype._doAttached=function(t){},s.prototype.$_detached=function(t){this._doDetached(t)},s.prototype._doDetached=function(t){},s.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},s.prototype._getCssDisplay=function(){return"block"},s.prototype._setClassName=function(t,e){if(void 0===e&&(e=!1),e||!this._classNamed){var i=this._getCssSelector();t.className=i||"",this._classNamed=!0}},s.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},s.prototype._hoverChanged=function(){},s.prototype._visibleChanged=function(){},s.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},s.prototype._doSizeChanged=function(){},s);function s(t){void 0===t&&(t=null);var e=r.call(this)||this;e._x=0,e._y=0,e._width=0,e._height=0,e._visible=!0,e._mouseEnabled=!0,e._elements=null,e._dirty=!0,e._hovered=!1,e._classNamed=!1,e._name=t;var i=e._dom=e._createDom();return i&&e._initDom(i),e}e.VisualElement=n;var a,l=(i(u,a=n),Object.defineProperty(u.prototype,"isLayer",{get:function(){return!0},enumerable:!0,configurable:!0}),u.prototype._getCssSelector=function(){},u.prototype._doDraw=function(t){},u);function u(){return null!==a&&a.apply(this,arguments)||this}e.LayerElement=l});t(nt);nt.VisualElement,nt.LayerElement;var st=e(function(t,e){var o,i,r,n,s,a=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SelectionMode||(e.SelectionMode={})).NONE="none",i.SINGLE="single",i.EXTENDED="extended",(n=r=e.SelectionStyle||(e.SelectionStyle={})).BLOCK="block",n.ROWS="rows",n.COLUMNS="columns",n.SINGLE_ROW="singleRow",n.SINGLE_COLUMN="singleColumn",n.SINGLE="single",n.NONE="none",(s=e.SelectionDisplay||(e.SelectionDisplay={})).CELL="cell",s.CELL_AND_BORDER="cellAndBorder",s.MASK="mask",e.isSingleSelectionStyle=function(t){return t==r.SINGLE_ROW||t==r.SINGLE_COLUMN||t==r.SINGLE},e.isRowSelectionStyle=function(t){return t==r.ROWS||t==r.SINGLE_ROW},e.isColumnSelectionStyle=function(t){return t==r.COLUMNS||t==r.SINGLE_COLUMN};var l,u=(l=ce.Base,a(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},Object.defineProperty(h.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!0,configurable:!0}),h.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},h.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var a=e.getItem(s);a&&(!t||0<=a.dataRow)&&i.push(a)}return i},h.prototype._resized=function(){this._manager&&this._manager._itemResized(this)},h);function h(t){var e=l.call(this)||this;return e._manager=t,e}e.SelectionItem=u;var c,p=(c=j.EventAware,a(d,c),d.prototype._doDispose=function(){this._grid=null,this._items=null,c.prototype._doDispose.call(this)},Object.defineProperty(d.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"exclusiveMode",{get:function(){return this._exclusiveMode},set:function(t){t!=this._exclusiveMode&&(this._exclusiveMode=t,this.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"itemStyle",{get:function(){return this._itemStyle},set:function(t){t!=this._itemStyle&&(this._itemStyle=t,this.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"single",{get:function(){return 1==this._items.length&&this._items[0].single},enumerable:!0,configurable:!0}),d.prototype.lock=function(){this._locked=!0},d.prototype.unlock=function(){this._locked=!1},d.prototype.getItem=function(t){return this._items[t]},d.prototype.add=function(t,e,i){if(this._locked)return null;if(i==r.NONE)return this.clear(),null;this._exclusiveMode&&i!=this._style&&this.clear();var o=null;switch(i){case r.COLUMNS:o=new C(this,t.layout,e.layout);break;case r.SINGLE_COLUMN:o=new C(this,t.layout,t.layout);break;case r.ROWS:o=new g(this,t.itemIndex,e.itemIndex);break;case r.SINGLE_ROW:o=new g(this,t.itemIndex,t.itemIndex);break;case r.BLOCK:o=new f(this,t,e);break;case r.SINGLE:o=new f(this,t,t)}return this._addItem(o)},d.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);0<=e&&(this._items.splice(e,1),this.fireEvent(d.REMOVED,t))}},d.prototype.clear=function(){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(d.CLEARED))},d.prototype.containsItem=function(t){return!1},d.prototype.containsColumn=function(t){return!1},d.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.column)},d.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},d.prototype.normalize=function(){},d.prototype._changed=function(){this.fireEvent(d.CHANGED)},d.prototype._addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(d.ADDED,t)),t},d.prototype._itemResized=function(t){this.fireEvent(d.RESIZED,t)},d.CHANGED="onSelectionChanged",d.ADDED="onSelectionAdded",d.REMOVED="onSelectionRemoved",d.CLEARED="onSelectionCleared",d.RESIZED="onSelectionResized",d.ENDED="onSelectionEnded",d);function d(t){var e=c.call(this)||this;return e._exclusiveMode=!0,e._itemStyle=r.BLOCK,e._items=[],e._locked=!1,e._grid=t,e}e.SelectionManager=p;var _,f=(a(y,_=u),Object.defineProperty(y.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"style",{get:function(){return r.BLOCK},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"single",{get:function(){return X.CellIndex.areEquals(this._startIndex,this._endIndex)},enumerable:!0,configurable:!0}),y.prototype.getBounds=function(){var t=this.grid;if(this._startIndex.normalize(t),this._endIndex.normalize(t),X.CellIndex.areEquals(this._startIndex,this._endIndex))return X.CellRange.create(this._startIndex);var e=this._startIndex.layout&&this._startIndex.layout.dataRoot,i=this._endIndex.layout&&this._endIndex.layout.dataRoot;return X.CellRange.createRange(this._startIndex.itemIndex,e,this._endIndex.itemIndex,i)},y.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},y.prototype.resizeTo=function(t){this.grid.isValid(t)&&!X.CellIndex.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},y.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},y.prototype.mergeWith=function(t){},y.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!o||(e=o.length)<1)return null;for(var r=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),n=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=[],a=r;a<=n;a++){var l=i.getItem(a);if(l){for(var u={},h=0;h<e;h++){var c=o[h];u[c.fieldName]=l.getData(c.dataIndex)}if(s.push(u),0<t&&s.length==t)break}}return s},y.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},y.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},y.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},y.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},y.prototype.setValues=function(t){var e,i=this.grid,o=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(o&&!((e=o.length)<1))for(var r=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),n=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=r;s<=n;s++){var a=i.getItem(s);if(a)for(var l=0;l<e;l++){var u=o[l];a.setData(u.dataIndex,t)}}},y.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},y);function y(t,e,i){var o=_.call(this,t)||this;return o._startIndex=e.clone(),o._endIndex=i.clone(),o}e.BlockSelection=f;var m,g=(a(b,m=u),Object.defineProperty(b.prototype,"startRow",{get:function(){return this._startRow},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"endRow",{get:function(){return this._endRow},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"style",{get:function(){return r.ROWS},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),b.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?X.CellRange.createRange(this._startRow,t.getVisibleLayout(0),this._endRow,t.getVisibleLayout(t.visibleLayoutCount-1)):X.CellRange.createRange(this._endRow,t.getVisibleLayout(0),this._startRow,t.getVisibleLayout(t.visibleLayoutCount-1))},b.prototype.contains=function(t,e){return t>=this.topRow&&t<=this.bottomRow},b.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},b.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},b.prototype.mergeWith=function(t){},b.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=r;a<=n;a++){var l=e.getItem(a);if(l){for(var u={},h=0;h<o;h++){var c=i[h];u[c.fieldName]=l.getData(c.dataIndex)}if(s.push(u),0<t&&s.length==t)break}}return s},b.prototype._inflateLeft=function(t){},b.prototype._inflateRight=function(t){},b.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},b.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},b.prototype.setValues=function(t){var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(i){var o=i.length;if(!(o<1))for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=r;s<=n;s++){var a=e.getItem(s);if(a)for(var l=0;l<o;l++){var u=i[l];a.setData(u.dataIndex,t)}}}},b);function b(t,e,i){var o=m.call(this,t)||this;return o._startRow=e,o._endRow=i,o}e.RowSelection=g;var v,C=(a(w,v=u),Object.defineProperty(w.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"leftLayout",{get:function(){return this._startLayout.distance<=this._endLayout.distance?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"rightLayout",{get:function(){return this._startLayout.distance>this._endLayout.distance?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"style",{get:function(){return r.COLUMNS},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),w.prototype.getBounds=function(){return this._startLayout.distance<=this._endLayout.distance?X.CellRange.createRange(0,this._startLayout,this._startLayout.grid.itemCount-1,this._endLayout):X.CellRange.createRange(0,this._endLayout,this._endLayout.grid.itemCount-1,this._startLayout)},w.prototype.contains=function(t,e){return!1},w.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},w.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},w.prototype.mergeWith=function(t){},w.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,r=[],n=0;n<o;n++){var s=e.getItem(n);if(s){for(var a={},l=0,u=i.length;l<u;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(r.push(a),0<t&&r.length==t)break}}return r},w.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},w.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},w.prototype._inflateTop=function(t){},w.prototype._inflateBottom=function(t){},w.prototype.setValues=function(t){var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(i)for(var o=e.itemCount,r=0;r<o;r++){var n=e.getItem(r);if(n)for(var s=0,a=i.length;s<a;s++)n.setData(i[s].dataIndex,t)}},w);function w(t,e,i){var o=v.call(this,t)||this;return o._startLayout=e,o._endLayout=i,o}e.ColumnSelection=C;var E,x=(E=nt.LayerElement,a(I,E),I.prototype._getCssSelector=function(){return"rg-selection"},I.prototype._initDom=function(t){E.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},I);function I(){return E.call(this,"selectionView")||this}e.SelectionView=x;var O,S=(O=nt.LayerElement,a(D,O),Object.defineProperty(D.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),D.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},D.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},D.prototype._initDom=function(t){O.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},D);function D(){var t=O.call(this,"selectionMask")||this;return t._toped=!1,t._bottomed=!1,t._lefted=!1,t._righted=!1,t._view=new x,t.addChild(t._view),t}e.SelectionMask=S;var R,P=(R=nt.LayerElement,a(T,R),T.prototype._doDispose=function(){R.prototype._doDispose.call(this)},T.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new S,this._views[e]=i),i._item=t,this.addChild(i),i},T.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},T.prototype.layout=function(){var t=this._grid.layoutManager;for(var e in this._grid.selections,this._views){var i=this._views[e],o=i.item,r=!1,n=new K.Rectangle;if(!o.single&&(i.prepare(),o instanceof g?(r=this.$_getSelectionRowsRect(t,o,i,n),i._lefted=!0,i._righted=!0):o instanceof C?(r=this.$_getSelectionColumnsRect(t,o,i,n),i._toped=!0,i._bottomed=!0):r=this.$_getSelectionRangeRect(t,o,i,n),r)){var s=t.footerBounds.y;n.bottom>s&&(i._bottomed=!0,n.bottom=s)}i.visible=r,i.visible&&(i.setRectI(n),i.updateElement(),i.invalidate())}},T.prototype.$_getSelectionRowsRect=function(t,e,i,o){var r,n,s=this._grid,a=e.getBounds(),l=a.r1,u=a.r2,h=t.itemCount,c=t.fixedItemCount,p=s.topIndex;if(0<c){if(p+c+h<=l||u<0||c<=l&&u<p+c)return!1;var d=t.fixedHeight+s.fixedOptions.rowBarHeight;l<c?r=t.getItemBounds(Math.max(0,l)):((r=t.getItemBounds(Math.max(0,l-p))).y<d&&(i._toped=!0),r.y=Math.max(r.y,d)),u<c?n=t.getItemBounds(u):l<=c&&u<c+p?n=t.getItemBounds(Math.min(c+p,c)-1):p<=u?(n=t.getItemBounds(Math.min(t.itemCount+c-1,u-p))).y=Math.max(n.y,d):n=r}else{if(!(0<h))return!1;if(p+h<=l||u<p)return!1;d=l-p,r=t.getItemBounds(Math.max(0,d)),n=t.getItemBounds(Math.min(h-1,u-p)),d<0&&(i._toped=!0)}return o.copy(r.union(n)),o.offset(0,t.contentBounds.y+t.bodyBounds.y),o.right=0<t.rightLayoutCount?t.rightContentBounds.right:t.bodyBounds.right,!0},T.prototype.$_getSelectionColumnsRect=function(t,e,i,o){var r=this._grid,n=e.getBounds(),s=t.fixedLayoutCount,a=t.rightLayoutCount,l=(t.rightFirstLayout,n.c1.root.vindex),u=n.c2.root.vindex,h=(r.fixedOptions.colBarWidth,t.getDataLayoutRect(n.c1)),c=t.getDataLayoutRect(n.c2);if(o.left=Math.min(h.x,c.x),o.right=Math.max(h.right,c.right),o.y=t.headerBounds.bottom,o.height=t.getItemRect(t.itemCount-1).bottom,0<t.fixedItemCount&&(o.height+=t.fixedHeight),s<=l){var p=t.fixedContentBounds.right;o.x<p&&(i._lefted=!0,o.left=Math.max(o.left,p))}if(0<a){var d=t.rightFirstLayout;d<=l?o.width=0:u<d&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)}return!0},T.prototype.$_getSelectionRangeRect=function(t,e,i,o){var r=new K.Rectangle;return!!this.$_getSelectionRowsRect(t,e,i,r)&&(o.y=r.y,o.bottom=r.bottom,this.$_getSelectionColumnsRect(t,e,i,r),o.x=r.x,o.right=r.right,!0)},T);function T(t){var e=R.call(this,"selectionLayer")||this;return e._pool=[],e._views={},e._grid=t,e}e.SelectionLayer=P});t(st);st.SelectionMode,st.SelectionStyle,st.SelectionDisplay,st.isSingleSelectionStyle,st.isRowSelectionStyle,st.isColumnSelectionStyle,st.SelectionItem,st.SelectionManager,st.BlockSelection,st.RowSelection,st.ColumnSelection,st.SelectionView,st.SelectionMask,st.SelectionLayer;var at=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(t){t!=this._columnResizable&&(this._columnResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(t){t!=this._columnMovable&&(this._columnMovable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parentChangable",{get:function(){return this._parentChangable},set:function(t){t!=this._parentChangable&&(this._parentChangable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minColumnWidth",{get:function(){return this._minColumnWidth},set:function(t){(t=Math.max(0,t))!=this._minColumnWidth&&(this._minColumnWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){t!=this._eachRowResizable&&(this._eachRowResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){(t=Math.max(0,t))!=this._rowHeight&&(this._rowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(0,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"horizLiveScroll",{get:function(){return this._horizLiveScroll},set:function(t){t!=this._horizLiveScroll&&(this._horizLiveScroll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){t!=this._scrollDuration&&(this._scrollDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){t!=this._hscrollDuration&&(this._hscrollDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(t){(t=Math.max(t,0))!=this._hintDelay&&(this._hintDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"emptyShowTooltip",{get:function(){return this._emptyShowTooltip},set:function(t){t!=this._emptyShowTooltip&&(this._emptyShowTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){t!=this._rowChangeDelay&&(this._rowChangeDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"horzScrollStep",{get:function(){return this._horzScrollStep},set:function(t){t!=this._horzScrollStep&&(this._horzScrollStep=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},set:function(t){t!=this._heightMeasurer&&(this._heightMeasurer=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fitWhenResized",{get:function(){return this._fitWhenResized},set:function(t){t!=this._fitWhenResized&&(this._fitWhenResized=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){t!=this._wheelEnabled&&(this._wheelEnabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){t!=this._wheelScrollLines&&(this._wheelScrollLines=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){t!=this._wheelScrollHorz&&(this._wheelScrollHorz=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){t!=this._wheelAccelDelay&&(this._wheelAccelDelay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){t!=this._wheelAccelScroll&&(this._wheelAccelScroll=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){t!=this._wheelEventPropagate&&(this._wheelEventPropagate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(t){t!=this._rightClickable&&(this._rightClickable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){t!=this._toastZIndex&&(this._toastZIndex=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusBackground",{get:function(){return this._focusBackground},set:function(t){t!=this._focusBackground&&(this._focusBackground=t,this._focusBackgroundBrush=new ot.SolidBrush(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusColor",{get:function(){return this._focusColor},set:function(t){t!=this._focusColor&&(this._focusColor=t,this._focusPen=new it.SolidPen(t,this._focusBorderWidth),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"innerFocusColor",{get:function(){return this._innerFocusColor},set:function(t){t!=this._innerFocusColor&&(this._innerFocusColor=t,this._innerFocusPen=new it.SolidPen(t,1,[1,1]),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusActiveColor",{get:function(){return this._focusActiveColor},set:function(t){t!=this._focusActiveColor&&(this._focusActiveColor=t,this._focusActivePen=new it.SolidPen(t,this._focusBorderWidth),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusBorderWidth",{get:function(){return this._focusBorderWidth},set:function(t){t!=this._focusBorderWidth&&(this._focusBorderWidth=t,this._focusPen=new it.SolidPen(this._focusColor,t),this._focusActivePen=new it.SolidPen(this._focusActiveColor,t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"useCssStyleProgress",{get:function(){return this._useCssStyleProgress},set:function(t){t!=this._useCssStyleProgress&&(this._useCssStyleProgress=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){t!=this._popupDropdownCount&&(this._popupDropdownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"drawBorderTop",{get:function(){return this._drawBorderTop},set:function(t){t!=this._drawBorderTop&&(this._drawBorderTop=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"drawBorderBottom",{get:function(){return this._drawBorderBottom},set:function(t){t!=this._drawBorderBottom&&(this._drawBorderBottom=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"drawBorderLeft",{get:function(){return this._drawBorderLeft},set:function(t){t!=this._drawBorderLeft&&(this._drawBorderLeft=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"drawBorderRight",{get:function(){return this._drawBorderRight},set:function(t){t!=this._drawBorderRight&&(this._drawBorderRight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"drawLastColumnRight",{get:function(){return this._drawLastColumnRight},set:function(t){t!=this._drawLastColumnRight&&(this._drawLastColumnRight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollBarStyles",{get:function(){return this._scrollBarStyles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollThumbStyles",{get:function(){return this._scrollThumbStyles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollButtonStyles",{get:function(){return this._scrollButtonStyles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cursorCallback",{get:function(){return this._cursorCallback},set:function(t){this._cursorCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearSelection())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){if(t!=this._selectionStyle){var e=this.grid.selections;0<e.count&&(e.getItem(0).getBounds(),e.clear()),this._selectionStyle=t,this._refreshOwner()}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(t){t!==this._rowBlockCallback&&(this._rowBlockCallback=t,this._rowBlockType!=W.RowMaskType.NONE&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t},enumerable:!0,configurable:!0}),s.prototype.setScrollBarStyles=function(t){t!=this._scrollBarStyles&&(t?this._scrollBarStyles.extend(t):this._scrollBarStyles.clearValues()),this._refreshOwner()},s.prototype.setScrollThumbStyles=function(t){t!=this._scrollThumbStyles&&(t?this._scrollThumbStyles.extend(t):this._scrollThumbStyles.clearValues()),this._refreshOwner()},s.prototype.setScrollButtonStyles=function(t){t!=this._scrollButtonStyles&&(t?this._scrollButtonStyles.extend(t):this._scrollButtonStyles.clearValues()),this._refreshOwner()},s);function s(t){var e=r.call(this,t)||this;return e._columnResizable=!0,e._columnMovable=!0,e._parentChangable=!1,e._minColumnWidth=2,e._defaultColumnWidth=120,e._fitStyle=W.GridFitStyle.NONE,e._rowResizable=!1,e._eachRowResizable=!1,e._rowHeight=0,e._minRowHeight=4,e._maxRowHeight=0,e._hscrollBar=!0,e._vscrollBar=!0,e._liveScroll=!0,e._horizLiveScroll=!0,e._scrollDuration=0,e._hscrollDuration=0,e._hintDelay=0,e._emptyShowTooltip=!1,e._rowChangeDelay=0,e._horzScrollStep=8,e._emptyMessage="이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",e._showEmptyMessage=!1,e._heightMeasurer=null,e._fitWhenResized=!0,e._focusVisible=!0,e._rowFocusType=W.RowMaskType.NONE,e._wheelEnabled=!0,e._wheelScrollLines=3,e._wheelScrollHorz=16,e._wheelAccelDelay=0,e._wheelAccelScroll=null,e._wheelEventPropagate=!0,e._rightClickable=!0,e._editItemMerging=!1,e._showInnerFocus=!0,e._toastZIndex=3e3,e._focusBackground=null,e._focusColor="#ff333333",e._innerFocusColor="#ff333333",e._focusActiveColor="#ff5292f7",e._focusBorderWidth=2,e._useCssStyleProgress=!1,e._popupDropdownCount=0,e._drawBorderTop=!0,e._drawBorderBottom=!0,e._drawBorderLeft=!0,e._drawBorderRight=!0,e._drawLastColumnRight=!0,e._cursorCallback=null,e._selectionMode=st.SelectionMode.SINGLE,e._selectionStyle=st.SelectionStyle.BLOCK,e._selectionDisplay=st.SelectionDisplay.CELL,e._rowHoverType=W.RowMaskType.NONE,e._rowBlockType=W.RowMaskType.NONE,e._showEmptyTooltip=!1,e._focusPen=new it.SolidPen(e._focusColor,e._focusBorderWidth),e._innerFocusPen=new it.SolidPen(e._innerFocusColor,1,[1,1]),e._focusActivePen=new it.SolidPen(e._focusActiveColor,e._focusBorderWidth),e._focusBackgroundBrush=new ot.SolidBrush(e._focusBackground),e._scrollBarStyles=new tt.VisualStyles(e,"scrollBarStyles"),e._scrollThumbStyles=new tt.VisualStyles(e,"scrollThumbStyles"),e._scrollButtonStyles=new tt.VisualStyles(e,"scrollButtonStyles"),e}e.DisplayOptions=n});t(at);at.DisplayOptions;var lt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.empty=function(){return new o},o.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new o(t,e)},Object.defineProperty(o.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),o.prototype.clone=function(){return new o(this.width,this.height)},o.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},o.prototype.setEmpty=function(){return this.width=this.height=0,this},o.prototype.set=function(t,e){return this.width=t,this.height=e,this},o.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},o.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},o.EMPTY=new o,o);function o(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}e.Size=i});t(lt);lt.Size;var ut=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=nt.VisualElement,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof ue.GridBase)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),s.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},s.prototype.layoutContent=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},s.prototype._getCssSelector=function(){return""},s.prototype._doDraw=function(t){this._doRender(t)},s.prototype._doMeasure=function(t,e,i){return new lt.Size(e,i)},s.prototype._doPrepareContent=function(t){},s.prototype._doLayoutContent=function(t){},s.prototype._doRender=function(t){},s);function s(t){return void 0===t&&(t=null),r.call(this,t)||this}e.GridElement=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._model=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),u.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},u);function u(t,e){void 0===e&&(e=null);var i=a.call(this,e)||this;return i._cursor="auto",i._model=t,i}e.VisualObjectElement=l});t(ut);ut.GridElement,ut.VisualObjectElement;var ht=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ut.VisualObjectElement,i(s,r),s.prototype._doDispose=function(){this._tbody=null,this._table=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"spanned",{get:function(){return this._spanned},enumerable:!0,configurable:!0}),s.prototype.getCellPoint=function(t,e){return(e=e||new rt.Point).x+=t.offsetLeft,e.y+=t.offsetTop,e},s.prototype._createDom=function(){var t=document.createElement("div"),e=this._table=document.createElement("table"),i=e.style;return i.setProperty("table-layout","fixed","important"),i.setProperty("width","0px","important"),e.className="rg-table",t.appendChild(e),this._thead=document.createElement("thead"),e.appendChild(this._thead),this._tbody=document.createElement("tbody"),e.appendChild(this._tbody),t},s.prototype._clearSpans=function(){},s.prototype._addSpan=function(t,e,i,o){},s.prototype._addColSpan=function(t,e,i){},s.prototype._addRowSpan=function(t,e,i){},s.prototype._initDom=function(t){r.prototype._initDom.call(this,t),t.style.overflow="hidden"},s.prototype._doPrepareContent=function(t){this._doPrepareTableExtents(t),this._doPrepareTable(t)},s.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},s.prototype._doPrepareTableExtents=function(t){},s.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},s.prototype._doPrepareTableHead=function(t,e){var i;0==e.childElementCount?(i=document.createElement("tr"),e.appendChild(i),i.setAttribute("aria-hidden","true"),(a=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var o=this._getCellCount(t);i.childElementCount<o;)(s=document.createElement("th")).scope="col",(a=s.style).setProperty("visibility","hidden","important"),a.setProperty("margin","0px","important"),a.setProperty("padding","0px","important"),a.setProperty("font-size","0px","important"),a.setProperty("line-height","0px","important"),a.height="0px",i.appendChild(s);for(;i.childElementCount>o;)i.removeChild(i.lastChild);for(var r=i.children,n=0;n<r.length;n++){var s,a;(a=(s=r[n]).style).width=this._getCellWidth(t,n)+"px"}},s.prototype._prepareTableRowCells=function(t,e,i){for(var o=this._getCellCount(t);i.childElementCount<o;){var r=document.createElement("td");i.appendChild(r);var n=this._prepareCellContent(r);n&&r.appendChild(n)}for(;i.childElementCount>o;)i.removeChild(i.lastChild);return i.childElementCount},s.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,e,o);var r=o.children,n=this._getTableRowHeight(t,i),s=n-1+"px",a=o.style;o.$_view=this.$_hash,o.$_type=this instanceof p?null:t.getItem(e).isData?"d":"g",a.height=n+"px",a.display="";for(var l=0,u=r.length;l<u;l++){var h=r[l],c=h.lastElementChild;c||(c=this._prepareCellContent(h))&&h.appendChild(c),c.style.maxHeight=s,c.style.overflow="hidden"}},s.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},s.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var r=i[o];this._renderCell(r.lastElementChild,e,o)}},s.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},s.prototype._prepareCellContent=function(t){return document.createElement("div")},s.prototype._doDrawRow=function(t,e){},s.prototype._doDrawCell=function(t,e,i){},s.prototype._getTableRow=function(t,e){return this._tbody.children[e]},s.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},s.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].lastElementChild},s.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,r=t.column?t.column.index:0;return e=0<o?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,r)},s.prototype.$_setSpanned=function(t){this._spanned=t},s);function s(t,e){void 0===e&&(e=null);var i=r.call(this,t,e)||this;return i._spanned=!1,i}e.TableBaseElement=n;var a,p=(i(l,a=n),l.prototype._doPrepareTableRows=function(t,e){for(var i=this._getTableRowCount(t);e.childElementCount<i;){var o=document.createElement("tr");e.appendChild(o)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var r=e.children,n=0;n<i;n++)(o=r[n]).style.height=this._getTableRowHeight(t,n)+"px",this._doPrepareTableRow(t,n,n,o)},l.prototype._getTableRowCount=function(t){return 1},l);function l(){return null!==a&&a.apply(this,arguments)||this}e.SimpleTableElement=p;var u,h=(i(c,u=n),c.prototype._getTrs=function(t){return 1},c.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+=0<e?1:0},c.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return 0<i&&i<=e?1+o:o},c.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},c.prototype.$_getTableRowAt=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},c.prototype._getTableRowInternal=function(t,e,i){var o=this.$_getTableIndex(t,e);return this._tbody.children[o+i]},c.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),r=t.fixedItemCount,n=t.itemCount+r,s=this._trCount=this._getTableRowCount(t);e.childElementCount<s;){var a=document.createElement("tr");e.appendChild(a)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var l=e.children,u=0,h=0;if(0<r){for(u=0;u<r;u++)for(var c=0;c<o;c++,h++)this._doPrepareTableRow(t,u,h,l[h]);this.$_prepareFixedBar(t,u,l[h++])}for(;u<n;u++){var p=i[u].isData?o:1;for(c=0;c<p;c++,h++)this._doPrepareTableRow(t,u,h,l[h])}},c.prototype.$_prepareFixedBar=function(t,e,i){var o=this._prepareTableRowCells(t,e,i),r=t.fixedBarHeight,n=i.style;0<r?n.height=t.fixedBarHeight+"px":n.display="none";for(var s=i.children,a=0;a<o;a++){var l=s[a].lastElementChild;l&&(l.rowSpan=1,l.style.maxHeight="0px",l.style.overflow="hidden")}},c.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return 0<i&&i<e?t.getItemHeight(e-i):t.getItemHeight(e)},c.prototype._getCellContent=function(t){return t.lastElementChild},c.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},c.prototype._doUpdateCellContent=function(t,e,i){},c);function c(){var t=null!==u&&u.apply(this,arguments)||this;return t._trCount=0,t._trs=1,t}e.DataTableElement=h});t(ht);ht.TableBaseElement,ht.SimpleTableElement,ht.DataTableElement;var ct=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r="rowspan",n="colspan",m=(s.prototype.dispose=function(){this.cell=this.check=this.sort=this.filter=null,this.layout=null},s.prototype.reset=function(t){return this.cell=t,this.text=void 0,this},s.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this},s.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(r)),this},s.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(r)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},s.prototype.clear=function(t){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(n)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(r)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.setText=function(t,e){e!==this.text&&(t.textContent=this.text=e)},s.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},s.prototype.setDivMarigns=function(t,e,i,o,r){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"0",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"0",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"0",this.marginTop=o),r!=this.marginBottom&&(t.marginBottom=r?r+"px":"0",this.marginBottom=r)},s);function s(t){this.cell=null,this.check=null,this.sort=null,this.filter=null,this.layout=null,this.visible=void 0,this.width=0,this.height=0,this.rowSpan=1,this.colSpan=1,this.className="",this.text=void 0,this.showTooltip=!0,this.tooltip="",this.sortWidth=0,this.filterWidth=0,this.checkWidth=0,this.marginLeft=0,this.marginRight=0,this.marginTop=0,this.marginBottom=0,this.cell=t,this.text=t.textContent}e.HeaderTableCell=m;var a,l=(a=ht.SimpleTableElement,i(u,a),u.renderCell=function(t,e){e.textContent=t.text||""},u.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,a.prototype._doDispose.call(this)},u.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}return null},u.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},u.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},u.prototype.getLayoutAt=function(t,e){return this.grid.layoutManager.cellLayouts._headerCells[t][e]},u.prototype.refresh=function(t){for(var e=t.layoutManager,i=e.cellLayouts._headerCells,o=this._getStartCell(e),r=this._getEndCell(e),n=0;n<i.length;n++)for(var s=i[n],a=this._getTableRow(e,n),l=o;l<=r;l++){var u=s[l];if(u instanceof D.CellLayoutColumnItem){var h=a.children[l-o];h.$_foc=t.isFocusedColumn(u.firstColumn),z.Utils.setClassName(h,this.$_getCellSelector(h))}}},u.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},u.prototype.getLayoutHeight=function(t){var e=t.row;return this._rowPoints[e+t.hspan]-this._rowPoints[e]},u.prototype._getCssSelector=function(){return"rg-header"},u.prototype._prepareCellContent=function(t){var e=document.createElement("div"),i=document.createElement("span");return e.appendChild(i),e},u.prototype._doMeasure=function(t,e,i){return lt.Size.create(e,this.model.minHeight)},u.prototype._doPrepareTableExtents=function(t){var e=this._rowPoints,i=this.height,o=Math.floor(i/t.headerRows);if(e.length=this._getTableRowCount(t)+1,(e[0]=0)<e.length){for(var r=1;r<e.length-1;r++)e[r]=e[r-1]+o;e[r]=i}},u.prototype.$_refreshCells=function(t,e,i){for(var o=z.Utils.getTimer(),r=this._cells,n=i.children,s=n.length,a=this._getStartCell(t),l=this._getEndCell(t)-a+1,u=r.length;u<s;u++)r.push([]);for(var h=0;h<s;h++){for(var c=r[h],p=n[h].children,d=e[h],_=(this._getTableRowHeight(t,h),0);_<l;_++){var f=c[_];f?f.cell!==p[_]&&f.reset(p[_]):f=c[_]=new m(p[_]),f.layout=d[_+a],f.height=this.$_getCellHeight(f.layout),f.width=this._getCellWidth(t,_)}for(_=l;_<c.length;_++)c[_]=null;c.length=d.length}for(h=s;h<r.length;h++){var y=r[h];for(_=0;_<y.length;_++)y[_]=null}r.length=s,o=z.Utils.getTimer()-o,console.log("$$$$ REFRESH_HEADER_CELLS: "+o)},u.prototype._doLayoutContent=function(t){var e=t.grid,i=this.model,o=t.cellLayouts._headerCells,r=this._getStartCell(t),n=this._getEndCell(t);this.$_refreshCells(t,o,this._tbody);for(var s=0;s<o.length;s++)for(var a=this._cells[s],l=o[s],u=r;u<=n;u++){var h=a[u-r],c=l[u],p=h.cell;if(c.isProxy)h.clear(!1),h.setText(p.firstElementChild.firstElementChild,"");else if(c instanceof D.CellLayoutGroupItem)h.set(c._cspan,c._hspan,!0),h.setText(p.firstElementChild.firstElementChild,c.header.text);else{h.set(c._cspan,c._hspan,!0);var d=i.getCell(c);this._updateCell(e,i,d,h)}h.setClassName(this.$_getCellSelector(p))}},u.prototype._doRender=function(t){},u.prototype._getTableRowCount=function(t){return t.headerRows},u.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},u.prototype.$_getCellHeight=function(t){var e=t.row,i=this._rowPoints[e];return this._rowPoints[e+t.hspan]-i},u.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},u.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},u.prototype._doDrawCell=function(t,e,i){},u.prototype.$_getCellSelector=function(t){return t.$_foc?"rg-header-cell rg-header-focus":"rg-header-cell"},u.prototype._getStartCell=function(t){return t.firstCell},u.prototype._getEndCell=function(t){return t.lastCell},u.prototype._updateCell=function(t,e,i,o){var r=t.sortingOptions,n=t.filteringOptions,s=o.layout.firstColumn,a=i.checkLocation,l=a&&a!=W.ColumnHeaderItemLocation.NONE?e.checkWidth:0,u=0<l?e.checkWidth:0,h=this.$_canSortHandleVisible(r,s),c=h?e.sortWidth:0,p=this.$_canFilterHandleVisible(n,s)?e.filterWidth:0,d=o.cell,_=o.width,f=o.height,y=0,m=0,g=0,b=0,v=o.check;if(0<l){var C;v?C=v.style:(v=document.createElement("input"),(o.check=v).type="checkbox",v.className="rg-header-check",(C=v.style).position="absolute",C.display="inline-block"),o.checkWidth<=0&&(d.appendChild(v),o.checkWidth=l),v.checked=s.checked;var w=0,E=0;switch(a){case"left":case"leftEdge":y+=l,E=Math.floor((f-e.checkHeight)/2);break;case"right":case"rightEdge":m+=l,w=_-l,E=Math.floor((f-e.checkHeight)/2);break;case"top":case"topEdge":g+=u,w=Math.floor((_-c-p-e.checkWidth)/2);break;case"bottom":case"bottomEdge":b+=u,w=Math.floor((_-c-p-e.checkWidth)/2),E=f-e.checkHeight}C.left=w+"px",C.top=E+"px"}else 0<o.checkWidth&&(d.removeChild(v),o.checkWidth=0);var x,I=o.filter;0<p?(I?x=I.style:(I=document.createElement("span"),(x=(o.filter=I).style).position="absolute",x.display="inline-block"),o.filterWidth<=0&&(d.appendChild(I),o.filterWidth=p),I.className="rg-header-filtering",m+=p,x.left=_-m+"px",x.top=Math.floor((f-e.filterHeight)/2)+"px",x.width=p+"px",x.height=e.filterWidth+"px"):0<o.filterWidth&&(d.removeChild(I),o.filterWidth=0);var O,S=o.sort;h?(S?O=S.style:(S=document.createElement("span"),(O=(o.sort=S).style).position="absolute",O.display="inline-block"),o.sortWidth<=0&&(d.appendChild(S),o.sortWidth=c),S.className=h===W.SortDirection.DESCENDING?"rg-header-descending":"rg-header-ascending",m+=c,O.left=_-m+"px",O.top=Math.floor((f-e.sortHeight)/2)+"px",O.width=c+"px",O.height=e.sortHeight+"px"):0<o.sortWidth&&(d.removeChild(S),o.sortWidth=0);var D=d.firstElementChild,R=D.style;o.setDivMarigns(R,y,m,g,b),o.setText(D.firstElementChild,i.text||"")},u.prototype.$_canPopupHandleVisible=function(t){return!!t.header._popupMenuName},u.prototype.$_canFilterHandleVisible=function(t,e){var i=e.hasFilters;if(i)switch(t.handleVisibility){case W.HandleVisibility.HIDDEN:i=!1}return i},u.prototype.$_canSortHandleVisible=function(t,e){var i=e.sortDirection;if(i){var o=!0;if(o)switch(t.handleVisibility){case W.HandleVisibility.VISIBLE:o=0<=e.sortOrder;break;case W.HandleVisibility.HIDDEN:o=!1}o||(i=void 0)}return i},u.prototype.$_canCheckHandleVisible=function(t,e){return!1},u);function u(t){var e=a.call(this,t,"headerView")||this;return e._rowPoints=[],e._cells=[],e}e.HeaderElement=l;var h,c=(i(p,h=l),p.prototype._getStartCell=function(t){return 0},p.prototype._getEndCell=function(t){return t.fixedCellCount-1},p.prototype._getCellCount=function(t){return t.fixedCellCount},p.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},p);function p(){return null!==h&&h.apply(this,arguments)||this}e.FixedHeaderElement=c;var d,_=(i(f,d=l),f.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},f.prototype._getEndCell=function(t){return t.cellCount-1},f.prototype._getCellCount=function(t){return t.rightCellCount},f.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},f);function f(){return null!==d&&d.apply(this,arguments)||this}e.RightHeaderElement=_});t(ct);ct.HeaderTableCell,ct.HeaderElement,ct.FixedHeaderElement,ct.RightHeaderElement;var pt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ht.DataTableElement,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype.getCellIndex=function(t){return t.parentElement.$_row},s.prototype.refresh=function(t){for(var e=0;e<this._count;e++){var i=this._getTableCell(e,0);i.$_foc=t.isFocusedRow(i.parentElement.$_row),z.Utils.setClassName(i,this.$_getCellSelector(i))}},s.prototype._getCssSelector=function(){return"rg-rowindicator"},s.prototype._doPrepareTableRows=function(t,e){r.prototype._doPrepareTableRows.call(this,t,e)},s.prototype._prepareCellContent=function(t){return document.createElement("div")},s.prototype._doMeasure=function(t,e,i){var o=this.model;return new lt.Size(o.minWidth,i)},s.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this.model,o=t.topIndex,r=t.itemCount,n=t.fixedItemCount,s=this._count=n+r,a=e.focusedRow,l=0;l<s;l++){var u=l<n?l:l+o,h=X.CellIndex.temp(e,u),c=i.getCell(h),p=this._getTableRow(t,l);p.$_row=u;var d=p.children[0];d.$_foc=u==a,z.Utils.setClassName(d,this.$_getCellSelector(d)),this._updateCellContent(e,c,d)}},s.prototype._doUpdateCellContent=function(t,e,i){i.textContent=e.text},s.prototype._doRender=function(t){},s.prototype._getCellCount=function(t){return 1},s.prototype._getCellWidth=function(t,e){return this.width},s.prototype.$_getCellSelector=function(t){if(t.$_foc){var e=this.grid.getItem(t.parentElement.$_row).itemState;return q.ItemState_isInserting(e)?"rg-rowindicator-cell rg-rowindicator-focus rg-rowindicator-inserting":e==q.ItemState.UPDATING?"rg-rowindicator-cell rg-rowindicator-focus rg-rowindicator-editing":"rg-rowindicator-cell rg-rowindicator-focus"}return"rg-rowindicator-cell"},s);function s(t){var e=r.call(this,t,"rowIndicatorView")||this;return e._count=0,e}e.RowIndicatorElement=n});t(pt);pt.RowIndicatorElement;var dt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ut.GridElement,i(s,r),s.prototype._doDispose=function(){this._grid=null,this._index&&this._index.dispose(),this._index=null,this._cellDom&&this._cellDom.parentElement.removeChild(this._cellDom),this._cellDom=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"fixed",{get:function(){return this._fixed},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},set:function(t){X.CellIndex.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),s.prototype.updateCell=function(t,e,i){this._grid=t,this.index=e.index,this._cellDom=i,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},s.prototype._createDom=function(){return null},Object.defineProperty(s.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),s.prototype._changed=function(){this.invalidate()},s.prototype._doPrepareValue=function(t,e){},s.prototype._doUpdateContent=function(t,e,i){},s.prototype._doLayoutContent=function(t){},s);function s(t){void 0===t&&(t=null);var e=r.call(this,t)||this;return e._fixed=!1,e._index=new X.CellIndex,e}e.CellElement=n;var a,l=(i(u,a=n),Object.defineProperty(u.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._focusedChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"numberFormatter",{get:function(){return this._numberFormatter},set:function(t){this._numberFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},set:function(t){this._datetimeWriter=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"boolFormatter",{get:function(){return this._boolFormatter},set:function(t){this._boolFormatter=t},enumerable:!0,configurable:!0}),u.prototype._doPrepareValue=function(t,e){var i=t.formatOptions,o=this.valueColumn;this._numberFormatter=i.getNumberFormatter(o.numberFormatter),this._datetimeWriter=i.getDateWriter(o.datetimeWriter),this._boolFormatter=i.getBoolFormatter(o.boolFormatter)},u.prototype._focusedChanged=function(){this._changed()},u.prototype._doLayoutHandles=function(){},u);function u(t){void 0===t&&(t=null);var e=a.call(this,t)||this;return e._focused=!1,e}e.ValueCellElement=l;var h,c=(i(p,h=n),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},p);function p(t){return void 0===t&&(t=null),h.call(this,t)||this}e.SelectableCellElement=c});t(dt);dt.CellElement,dt.ValueCellElement,dt.SelectableCellElement;var _t=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),s.prototype.render=function(t,e){this._doRender(t,e,!1)},s.prototype.renders=function(t,e){this._doRender(t,e,!0)},s);function s(){return r.call(this)||this}var a,l=(i(u,a=n),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},u.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var r=this.barWidth;r<=0&&(r=this.integralBar?Math.floor(e.width/o):e.width/o,r=Math.max(this.minBarWidth,r),0<this.maxBarWidth&&(r=Math.min(this.maxBarWidth,r))),o*=r,e.x+=(e.width-o)/2,this.integralBar&&(e.x=Math.floor(e.x)),this._drawBars(t,this.barStyle,i,e.x,e.y,r,e.height)}},u);function u(){var t=a.call(this)||this;return t.integralBar=!0,t.minBarWidth=1,t.maxBarWidth=0,t.barWidth=0,t}var h,c=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],p=[103,104,105],d=[251658240,15728640,983040,61440,3840,240,15],_=(i(f,h=l),f.prototype._doDispose=function(){h.prototype._doDispose.call(this)},f.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t);2==i&&e%2==1&&(t="0"+t,e++);var o=p[i],r=c[o],n=o;if(this._weights.push(r),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);o=parseInt(a),o=this.$_convert(i,o),r=c[o],this._weights.push(r),n+=o*(s+1)}else for(s=0;s<e;s++)o=t.charCodeAt(s),o=this.$_convert(i,o),r=c[o],this._weights.push(r),n+=o*(s+1);n%=103,this._weights.push(c[n]),this._weights.push(c[106])}},f.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},f.prototype._drawBars=function(t,e,i,o,r,n,s){o+=10*n;for(var a,l=this._weights.length-1,u=0;u<l;u++){a=this._weights[u];for(var h=0;h<6;h++){var c=(a&d[h+1])>>4*(5-h);c*=n,h%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c}}for(a=this._weights[l],h=0;h<7;h++)c=(a&d[h])>>4*(6-h),c*=n,h%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c},f.prototype.$_convert=function(t,e){switch(t){case 0:if(0<=e&&e<32)return e+64;if(32<=e&&e<96)return e-32;case 1:if(32<=e&&e<128)return e-32;case 2:if(0<=e&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},f.prototype.$_detectType=function(t){var e=/^[0-9]+$/;return e.test(t)?2:(e=/[a-z]/).test(t)?1:0},f);function f(){var t=h.call(this)||this;return t.quietZoneWidth=10,t}e.Code128=_;var y,m={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},g=(i(b,y=l),b.prototype._doDispose=function(){y.prototype._doDispose.call(this)},b.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(m["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),r=m[o];if(!r)throw new Error("Invalid Code39 character: "+o);this._codes.push(r)}this._codes.push(m["*"])}},b.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},b.prototype._drawBars=function(t,e,i,o,r,n,s){var a=this._codes.length;if(2<a)for(var l=0;l<a;l++){for(var u=this._codes[l],h=0;h<9;h++){var c="n"==u.charAt(h)?1:this._wideWidth;c*=n,h%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c}l<a-1&&(o+=n)}},b);function b(){var t=y.call(this)||this;return t._wideWidth=3,t}e.Code39=g});t(_t);_t.Code128,_t.Code39;var ft=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,h="http://www.w3.org/2000/svg",a=0,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._element=null,r.prototype._doDispose.call(this)},s.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},s.prototype.restore=function(){this._trans=this._transforms.pop()},s.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},s.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},s.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},s.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},s.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},s.prototype.clip=function(t,e,i,o){var r=a++,n=document.createElementNS(h,"clipPath");n.setAttributeNS(null,"id","clip"+r);var s=document.createElementNS(h,"rect");s.x.baseVal.value=t,s.y.baseVal.value=e,s.width.baseVal.value=i,s.height.baseVal.value=o,n.appendChild(s),this._defs.appendChild(n)},s.prototype.line=function(t,e,i,o,r){var n=document.createElementNS(h,"line");this._element.appendChild(n),n.x1.baseVal.value=e,n.y1.baseVal.value=i,n.x2.baseVal.value=o,n.y2.baseVal.value=r,t&&n.setAttribute("class",t)},s.prototype.sline=function(t,e,i,o,r){var n=document.createElementNS(h,"line");this._element.appendChild(n),n.x1.baseVal.valueAsString=e,n.y1.baseVal.valueAsString=i,n.x2.baseVal.valueAsString=o,n.y2.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},s.prototype.lines=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!(null==e||e.length<4)){var o=document.createElementNS(h,"polyline");this._element.appendChild(o);var r=[];r.push(e[0]+","+e[1]);for(var n=2;n<e.length;n+=2)r.push(e[n]+","+e[n+1]);o.setAttributeNS(null,"points",r.join(" ")),t&&o.setAttribute("class",t)}},s.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=document.createElementNS(h,"polygon");this._element.appendChild(i);var o=[];o.push(e[0]+","+e[1]);for(var r=2;r<e.length;r+=2)o.push(e[r]+","+e[r+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},s.prototype.quadratic=function(t,e,i,o,r,n,s){var a=document.createElementNS(h,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",["M",e,i,"Q",o,r,n,s].join(" ")),t&&a.setAttribute("class",t)},s.prototype.squadratic=function(t,e,i,o,r,n,s){var a=document.createElementNS(h,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",["M",e+"%",i+"%","Q",o+"%",r+"%",n+"%",s+"%"].join(" ")),t&&a.setAttribute("class",t)},s.prototype.curve=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.$_getCurvedLinePath(e,0,e.length-1);if(o){var r=document.createElementNS(h,"path");this._element.appendChild(r),r.setAttributeNS(null,"d",o.join(" ")),t&&r.setAttribute("class",t)}},s.prototype.scurve=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.$_getCurvedLinePath(e,0,e.length-1);if(o){var r=document.createElementNS(h,"path");this._element.appendChild(r);for(var n=0;n<o.length;n++)"number"==typeof o[n]&&(o[n]=o[n]+"%");r.setAttributeNS(null,"d",o.join(" ")),t&&r.setAttribute("class",t)}},s.prototype.curveRange=function(t,e,i,o,r){if(o&&1<o.length&&r&&1<r.length&&(t||e)){var n=this.$_getCurvedLinePath(o,0,o.length/2-1,!0);if(n){n.push("L",r[r.length-2],[r.length-1]);var s=this.$_getCurvedLinePath(r,r.length/2-1,0,!1);s&&(n=n.concat(s)),n.push("L",o[0],o[1]);var a=document.createElementNS(h,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",n.join(" ")),this.$_fillOrStroke(a,t,e,i)}}},s.prototype.rect=function(t,e){var i=document.createElementNS(h,"rect");this._element.appendChild(i),i.x.baseVal.value=e.x,i.y.baseVal.value=e.y,i.width.baseVal.value=e.width,i.height.baseVal.value=e.height,t&&i.setAttribute("class",t)},s.prototype.srect=function(t,e){var i=document.createElementNS(h,"rect");this._element.appendChild(i),i.x.baseVal.valueAsString=e.x+"%",i.y.baseVal.valueAsString=e.y+"%",i.width.baseVal.valueAsString=e.width+"%",i.height.baseVal.valueAsString=e.height+"%",t&&i.setAttribute("class",t)},s.prototype.bounds=function(t,e,i,o,r){var n=document.createElementNS(h,"rect");this._element.appendChild(n),n.x.baseVal.value=e,n.y.baseVal.value=r<0?i+r:i,n.width.baseVal.value=o,n.height.baseVal.value=Math.abs(r),t&&n.setAttribute("class",t)},s.prototype.pbounds=function(t,e,i,o,r){var n=document.createElementNS(h,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e+"%",n.y.baseVal.valueAsString=(r<0?i+r:i)+"%",n.width.baseVal.valueAsString=o+"%",n.height.baseVal.valueAsString=Math.abs(r)+"%",t&&n.setAttribute("class",t)},s.prototype.sbounds=function(t,e,i,o,r){var n=document.createElementNS(h,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e,n.y.baseVal.valueAsString=i,n.width.baseVal.valueAsString=o,n.height.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},s.prototype.circle=function(t,e,i,o){var r=document.createElementNS(h,"circle");this._element.appendChild(r),r.cx.baseVal.value=e,r.cy.baseVal.value=i,r.r.baseVal.value=o,t&&r.setAttribute("class",t)},s.prototype.scircle=function(t,e,i,o){var r=document.createElementNS(h,"circle");this._element.appendChild(r),r.cx.baseVal.valueAsString=e,r.cy.baseVal.valueAsString=i,r.r.baseVal.valueAsString=o,t&&r.setAttribute("class",t)},s.prototype.circleRect=function(t,e,i,o,r,n){var s=document.createElementNS(h,"circle"),a=i+r/2,l=o+n/2,u=Math.min(r,n)/2;this._element.appendChild(s),s.cx.baseVal.value=a,s.cy.baseVal.value=l,s.r.baseVal.value=u,t&&s.setAttribute("class",t)},s.prototype.scircleRect=function(t,e,i,o,r){var n=document.createElementNS(h,"circle"),s=e+o/2,a=i+r/2,l=Math.min(o,r)/2;this._element.appendChild(n),n.cx.baseVal.valueAsString=s+"%",n.cy.baseVal.valueAsString=a+"%",n.r.baseVal.valueAsString=l+"%",t&&n.setAttribute("class",t)},s.prototype.ellipse=function(t,e,i,o,r){var n=document.createElementNS(h,"ellipse"),s=o/2,a=r/2;this._element.appendChild(n),n.cx.baseVal.value=e+s,n.cy.baseVal.value=i+a,n.rx.baseVal.value=s,n.ry.baseVal.value=a,t&&n.setAttribute("class",t)},s.prototype.sellipse=function(t,e,i,o,r){var n=document.createElementNS(h,"ellipse"),s=o/2,a=r/2;this._element.appendChild(n),n.cx.baseVal.valueAsString=e+s+"%",n.cy.baseVal.valueAsString=i+a+"%",n.rx.baseVal.valueAsString=s+"%",n.ry.baseVal.valueAsString=a+"%",t&&n.setAttribute("class",t)},s.prototype.text=function(t,e,i,o,r,n,s,a){var l=document.createElementNS(h,"text");this._element.appendChild(l),t=t||"Verdana",l.setAttributeNS(null,"y",s+""),l.setAttributeNS(null,"dy","top"),l.setAttributeNS(null,"x",n+""),l.setAttributeNS(null,"text-anchor",a),l.setAttributeNS(null,"font-family",t),l.setAttributeNS(null,"font-size",e+""),o&&l.setAttributeNS(null,"text-decoration",o),l.textContent=r},s.prototype.stext=function(t,e,i,o,r){var n=document.createElementNS(h,"text");this._element.appendChild(n),n.setAttributeNS(null,"y",o+"%"),n.setAttributeNS(null,"dy","top"),n.setAttributeNS(null,"x",i+"%"),n.textContent=e,t&&n.setAttribute("class",t)},s.prototype.$_stroke=function(t,e,i){t.style.fill="none",t.style.stroke=e,isNaN(i)||(t.style.strokeWidth=i+"")},s.prototype.$_fill=function(t,e){t.style.fill=e},s.prototype.$_fillOrStroke=function(t,e,i,o){i&&(t.style.stroke=i,isNaN(o)||(t.style.strokeWidth=o+"")),t.style.fill=e||"none"},s.prototype.$_getCurvedLinePath=function(t,e,i,o){if(void 0===o&&(o=!0),t&&i!=e&&t.length/2>i){var r=[],n=i<e?-1:1,s=e;if(o&&r.push("M",t[2*s],t[2*s+1]),2==Math.abs(i-e))return r.push("L",t[2*(s+n)],t[2*(s+n)+1]),r;var a={x:0,y:0},l={x:0,y:0},u={x:0,y:0},h={x:t[2*(s+n)]-t[2*s],y:t[2*(s+n)+1]-t[2*s+1]},c={x:0,y:0},p={x:0,y:0},d={x:0,y:0},_={x:0,y:0},f=Math.sqrt(h.x*h.x+h.y*h.y);h.x/=f,h.y/=f;var y=t[2*(s+n)]-t[2*s],m=t[2*s],g=t[2*s+1];for(s+=n;s!=i;s+=n){u.x=-h.x,u.y=-h.y,h.x=t[2*(s+n)]-t[2*s],h.y=t[2*(s+n)]-t[2*s+1],f=Math.sqrt(h.x*h.x+h.y*h.y),h.x/=f,h.y/=f,h.x<u.x?(c.x=u.x-h.x,c.y=u.y-h.y):(c.x=h.x-u.x,c.y=h.y-u.y);var b=Math.sqrt(c.x*c.x+c.y*c.y);c.x/=b,c.y/=b,0<=u.y*h.y&&(c={x:1,y:0}),a.x=-c.x*y*.25,a.y=-c.y*y*.25,s==n+e?r.push("Q",t[2*s]+a.x,t[2*s+1]+a.y,t[2*s],t[2*s+1]):(p.x=m+l.x,p.y=g+l.y,d.x=t[2*s]+a.x,d.y=t[2*s+1]+a.y,_.x=(p.x+d.x)/2,_.y=(p.y+d.y)/2,r.push("Q",p.x,p.y,_.x,_.y),r.push("Q",d.x,d.y,t[2*s],t[2*s+1])),y=t[2*(s+n)]-t[2*s],l.x=c.x*y*.25,l.y=c.y*y*.25,m=t[2*s],g=t[2*s+1]}return r.push("Q",m+l.x,g+l.y,t[2*s],t[2*s+1]),r}return null},s);function s(t,e){var i=r.call(this)||this;return i._transforms=[],i._defs=t,i._element=e,i}e.SvgRenderer=n;var l,u=(l=ce.Base,i(c,l),c.createSVG=function(t){var e=document.createElementNS(h,"svg"),i=e.style,o=document.createElementNS(h,"defs");return e.appendChild(o),i.background="",i.border="none",i.pointerEvents="none",t.appendChild(e),e},c.renderSVG=function(t,e){1<t.childElementCount&&t.removeChild(t.lastElementChild);var i=document.createElementNS(h,"g"),o=new n(t.firstChild,i);t.appendChild(i),e.call(t,o,t.clientWidth,t.clientHeight),o.dispose()},c.renderSVG2=function(t,e){1<t.childElementCount&&t.removeChild(t.lastElementChild);var i=document.createElementNS(h,"g"),o=new n(t.firstChild,i);t.appendChild(i),e.call(t,o),o.dispose()},c.prototype._doDispose=function(){this._renderer=null,this._element=null,l.prototype._doDispose.call(this)},Object.defineProperty(c.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),c.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},c.prototype._clear=function(){1<this._element.childElementCount&&this._element.removeChild(this._element.lastElementChild);var t=document.createElementNS(h,"g");this._element.appendChild(t),this._renderer._element=t},c.prototype._doRender=function(t,e,i){},c);function c(t){var e=l.call(this)||this,i=e._element=document.createElementNS(h,"svg"),o=i.style,r=e._defs=document.createElementNS(h,"defs");return i.appendChild(r),o.background="",o.border="none",o.pointerEvents="none",t.appendChild(i),e._renderer=new n(e._defs),e}e.SvgElement=u});t(ft);ft.SvgRenderer,ft.SvgElement;var yt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},s);function s(){return null!==r&&r.apply(this,arguments)||this}e.ShapeDrawing=n;var a,h={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},c={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},l=(i(u,a=n),Object.defineProperty(u.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?u.INVERTED_TRIANLGE:t.toLowerCase():null},enumerable:!0,configurable:!0}),u.prototype._doDraw=function(t,e,i){var o=this._shape;if(h.hasOwnProperty(o)){if(u=h[o]){for(var r=0,n=0,s=0,a=(u=u.slice()).length/2;s<a;s++)u[2*s]=r+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}else if(c.hasOwnProperty(o)){var l=c[o];if(l){var u;for(a=(u=l[s=n=r=0].slice()).length/2;s<a;s++)u[2*s]=r+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;for(u.push(u[0],u[1]),t.polygon(null,u),s=0,a=(u=(u=l[1]).slice()).length/2;s<a;s++)u[2*s]=r+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}},u.RECTANGLE="rectangle",u.TRIANLGE="triangle",u.INVERTED_TRIANLGE="itriangle",u.DIAMOND="diamond",u.UP_ARROW="uparrow",u.DOWN_ARROW="downarrow",u.LEFT_ARROW="leftarrow",u.RIGHT_ARROW="rightarrow",u.PLUS="plus",u.MINUS="minus",u.EQUAL="equal",u.STAR="star",u);function u(t){var e=a.call(this)||this;return e._shape=t,e}e.PolygonShape=l;var p,d=(i(_,p=n),_.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},_);function _(){return null!==p&&p.apply(this,arguments)||this}e.EllipseShape=d});t(yt);yt.ShapeDrawing,yt.PolygonShape,yt.EllipseShape;var mt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Y.GridObject,i(s,r),s.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(1<e.classList.length)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&1<i.length)return i[1]}return e.className}},s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),s.prototype.performEdit=function(t,e){},s.prototype.getTooltip=function(t,e){if(this.showTooltip){var i=t.text;return i||void 0}},s.prototype.canEditable=function(){return!0},s.prototype._init=function(t){},s.prototype._changed=function(){},s.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(0<=o){var r=t.dataSource.getFieldIndex(i);if(0<=r)return t.dataSource.getValue(o,r)}},s.prototype._makeText=function(t,e){return e.getDisplayText(t)||""},s);function s(){var t=r.call(this,null)||this;return t._showTooltip=!1,t}e.DataCellRenderer=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){this._delegate=null,a.prototype._doDispose.call(this)},u.prototype.addRenderers=function(t){z.Utils.isArray(t)||(t=[t]);for(var e=0,i=t;e<i.length;e++){var o=i[e];o.id&&(this._renderers[o.id]=o)}},u.prototype.getRenderer=function(t){var e=this._renderers[t];return e instanceof n?e:(e&&((e=this._delegate.createRenderer(e))?(this._renderers[t]=e)._init(this._delegate.grid):delete this._renderers.id),null)},u);function u(t){var e=a.call(this)||this;return e._renderers={},e._delegate=t,e}e.DataCellRendererCollection=l;var h,c,p,d=(i(_,h=n),_.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_.prototype.renderCell=function(t,e,i,o,r){if(r&&z.Utils.clearChildren(o),e instanceof Z.DataCell)if(e.index.itemIndex!==t.topIndex)switch(e.blankState){case W.BlankState.BODY:case W.BlankState.TAIL:i.setText(o,"");break;default:i.setText(o,this._makeText(t,e))}else i.setText(o,this._makeText(t,e))},_.Default=new _,_);function _(){return h.call(this)||this}e.TextCellRenderer=d,(p=c=e.BarOrigin||(e.BarOrigin={})).DEFAULT="default",p.LEFT="left",p.RIGHT="right",p.TOP="top",p.BOTTOM="bottom";var f,y=(i(m,f=n),m.prototype._doDispose=function(){f.prototype._doDispose.call(this)},Object.defineProperty(m.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&("string"==typeof(this._barWidth=t)&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"styleName",{get:function(){return m.STYLE_NAME},enumerable:!0,configurable:!0}),m.prototype.renderCell=function(t,e,i,o,r){var n,s,a=o.childElementCount;0==a||r?(0<a&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("div")).style.position="relative",o.appendChild(n),(s=document.createElement("span")).style.display="inline-block",s.style.position="absolute",s.style.top="50%",s.style.right="50%",s.style.msTransform=s.style.transform="translate(50%, -50%)",o.appendChild(s)):(n=o.children[0],s=o.children[1]);var l=this._absoluteValue?Math.abs(e.value):e.value,u=Math.min(1,(l-this._minimum)/(this._maximum-this._minimum)),h=n.style;switch(this._origin){case c.LEFT:this.$_renderLeft(h,u),n.className=this.barStyle||m.BAR_STYLE;break;case c.RIGHT:this.$_renderRight(h,u),n.className=this.rightBarStyle||m.BAR_RIGHT_STYLE;break;case c.TOP:this.$_renderTop(h,u),n.className=this.topBarStyle||m.BAR_TOP_STYLE;break;case c.BOTTOM:this.$_renderBottom(h,u),n.className=this.bottomBarStyle||m.BAR_BOTTOM_STYLE;break;default:this.$_renderLeft(h,u),n.className=this.barStyle||m.BAR_STYLE}i.setText(s,this._makeText(t,e))},m.prototype.$_renderLeft=function(t,e){if(t.left="0px",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},m.prototype.$_renderRight=function(t,e){if(t.left=100*(1-e)+"%",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},m.prototype.$_renderTop=function(t,e){if(t.top="0px",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},m.prototype.$_renderBottom=function(t,e){if(t.top=100*(1-e)+"%",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},m.STYLE_NAME="rg-renderer "+(m.STYLE="rg-bar-renderer"),m.BAR_STYLE="rg-bar-renderer-bar",m.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",m.BAR_TOP_STYLE="rg-bar-renderer-bar-top",m.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",m);function m(){var t=f.call(this)||this;return t._barStyle=m.BAR_STYLE,t._rightBarStyle=m.BAR_RIGHT_STYLE,t._topBarStyle=m.BAR_TOP_STYLE,t._bottomBarStyle=m.BAR_BOTTOM_STYLE,t._minimum=0,t._maximum=100,t._barWidth="80%",t._showLabel=!1,t._origin=c.LEFT,t._absoluteValue=!1,t._percentShapeWidth=80,t}e.BarCellRenderer=y;var g,b=(i(v,g=n),v.prototype._doDispose=function(){g.prototype._doDispose.call(this)},Object.defineProperty(v.prototype,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"styleName",{get:function(){return v.STYLE_NAME},enumerable:!0,configurable:!0}),v.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;0==s||r?(0<s&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("img")).style.verticalAlign="middle",o.appendChild(n)):n=o.firstElementChild;var a=this.$_getImageUrl(t,e);if(a){n.src=a;var l=this.$_getTitle(t,e);l?n.title=l:delete n.title,isNaN(this._imageHeight)?n.style.height="":n.style.height=this._imageHeight+"px"}else n.removeAttribute("src"),n.removeAttribute("title")},v.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},v.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},v.STYLE_NAME="rg-renderer "+(v.STYLE="rg-image-renderer"),v);function v(){return g.call(this)||this}e.ImageCellRenderer=b;var C,w=(i(E,C=n),E.prototype._doDispose=function(){C.prototype._doDispose.call(this)},Object.defineProperty(E.prototype,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"styleName",{get:function(){return E.STYLE_NAME},enumerable:!0,configurable:!0}),E.prototype.renderCell=function(t,e,i,o,r){var n,s,a=o.childElementCount;0==a||r?(0<a&&z.Utils.clearChildren(o),o.textContent="",n=document.createElement("img"),o.appendChild(n),s=document.createElement("span"),o.appendChild(s)):(n=o.children[0],s=o.children[1]);var l=this.$_getIconUrl(t,e);l?(n.src=l,isNaN(this._iconHeight)?n.style.height="":n.style.height=this._iconHeight+"px"):n.removeAttribute("src"),s.textContent=this._makeText(t,e),n.style.display="inline-block",n.style.marginRight="4px",s.style.display="inline-block"},E.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),i||""},E.STYLE_NAME="rg-renderer "+(E.STYLE="rg-icon-renderer"),E.ICON_STYLE="rg-icon-renderer-icon",E);function E(){var t=C.call(this)||this;return t._iconStyle=E.ICON_STYLE,t}e.IconCellRenderer=w;var x,I=(i(O,x=n),O.prototype._doDispose=function(){x.prototype._doDispose.call(this)},Object.defineProperty(O.prototype,"checkCallback",{get:function(){return this._checkCallback},set:function(t){t!==this._checkCallback&&(this._checkCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"threeState",{get:function(){return this._threeState},set:function(t){t!=this._threeState&&(this._threeState=t,this._changed())},enumerable:!0,configurable:!0}),O.prototype.performEdit=function(t,e){var i=this.$_getValue(t,e),o=i,r=e.dataColumn.dataIndex,n=t.dataSource,s=e.item;i=0<=r&&n.getValueType(r)==W.ValueType.BOOLEAN?this._threeState&&void 0!==i&&!i?void 0:!i:i?!!this._falseValue&&this._falseValue:void 0!==i&&this._threeState?void 0:!this._trueValue||this._trueValue,t.editorCommit(null,e.index,o,i)&&s.setData(r,i)},Object.defineProperty(O.prototype,"styleName",{get:function(){return O.STYLE_NAME},enumerable:!0,configurable:!0}),O.prototype.renderCell=function(t,e,i,o,r){var n,s,a=o.childElementCount;0==a||r?(0<a&&z.Utils.clearChildren(o),o.textContent="",n=document.createElement("input"),s=document.createElement("span"),n.type="checkbox",n.style.display="inline-block",n.style.marginRight="4px",s.style.display="inline-block",o.appendChild(n),o.appendChild(s)):(n=o.children[0],s=o.children[1]),n.checked=this.$_getValue(t,e)},O.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=0<(e=t.length)?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(e=void 0,this._trueValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},O.prototype.$_getValue=function(t,e){if(this._checkCallback)return this._checkCallback(t,e);var i=e.value;if("boolean"==typeof i)return i;var o=String(i);return this._values.hasOwnProperty(o)?this._values[o]:!this._threeState||""!=i&&null!=i?Boolean(i):void 0},O.STYLE_NAME="rg-renderer "+(O.STYLE="rg-check-renderer"),O.CHECK_STYLE="rg-check-renderer-check",O);function O(){var t=x.call(this)||this;return t._checkStyle=O.CHECK_STYLE,t._threeState=!1,t._values={},t}e.CheckCellRenderer=I;var S,D=(i(R,S=n),R.prototype._doDispose=function(){S.prototype._doDispose.call(this)},Object.defineProperty(R.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"styleName",{get:function(){return R.STYLE_NAME},enumerable:!0,configurable:!0}),R.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;0==s||r?(0<s&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("button")).type="button",n.style.display="inline-block",o.appendChild(n)):n=o.children[0],n.textContent=this._makeText(t,e),n.setAttribute("class",this._buttonStyle)},R.STYLE_NAME="rg-renderer "+(R.STYLE="rg-button-renderer"),R.BUTTON_STYLE="rg-button-renderer-button",R);function R(){var t=S.call(this)||this;return t._buttonStyle=R.BUTTON_STYLE,t}e.ButtonCellRenderer=D;var P,T=(i(k,P=n),k.prototype._doDispose=function(){P.prototype._doDispose.call(this)},Object.defineProperty(k.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"styleName",{get:function(){return k.STYLE_NAME},enumerable:!0,configurable:!0}),k.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;if(0==s||r?(0<s&&z.Utils.clearChildren(o),o.textContent="",n=document.createElement("a"),o.appendChild(n)):n=o.firstElementChild,n.textContent=this._makeText(t,e),"#"===this._baseUrl)n.removeAttribute("target"),n.href="#";else{var a=this.$_getUrl(t,e);a&&(n.target="_blank",n.href=a)}var l=this.$_getTitle(t,e);l?n.title=l:delete n.title},k.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},k.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},k.STYLE_NAME="rg-renderer "+(k.STYLE="rg-link-renderer"),k.LINK_STYLE="rg-link-renderer-link",k);function k(){var t=P.call(this)||this;return t._linkStyle=k.LINK_STYLE,t}e.LinkCellRenderer=T;var L,M=(i(A,L=n),A.prototype._doDispose=function(){L.prototype._doDispose.call(this)},Object.defineProperty(A.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"styleName",{get:function(){return A.STYLE_NAME},enumerable:!0,configurable:!0}),A.prototype.renderCell=function(t,e,i,o,r){var n,s,a=o.childElementCount;if(0==a||r){0<a&&z.Utils.clearChildren(o);var l=(n=ft.SvgElement.createSVG(o)).style;l.display="inline-block",l.width="16px",l.height="16px",(s=document.createElement("span")).style.display="inline-block",o.appendChild(s)}else n=o.children[0],s=o.children[1];this._runShape=this.$_getShape(t,e),n.setAttribute("class",this._shapeStyle),ft.SvgElement.renderSVG(n,this.$_render),s.textContent=this._makeText(t,e),n.style.verticalAlign="middle",n.style.marginRight="4px"},A.prototype.renderCell_div=function(t,e,i,o){var r,n=i.childElementCount;if(0==n||o){0<n&&z.Utils.clearChildren(i),(r=document.createElement("div")).style.position="relative",r.style.height="100%",i.appendChild(r);var s=ft.SvgElement.createSVG(r).style;s.width="16px",s.height="16px"}this._runShape=this.$_getShape(t,e);var a=i.firstElementChild.firstElementChild;a.setAttribute("class",this._shapeStyle),ft.SvgElement.renderSVG(a,this.$_render)},A.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},A.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new yt.EllipseShape:(e=this._polygon?this._polygon:this._polygon=new yt.PolygonShape(t),this._polygon.shape=t)),e},A.STYLE_NAME="rg-renderer "+(A.STYLE="rg-shape-renderer"),A.SHAPE_STYLE="rg-shape-renderer-shape",A);function A(){var t=L.call(this)||this;return t._shapeStyle=A.SHAPE_STYLE,t._shape=yt.PolygonShape.STAR,t.$_render=function(t,e,i){if(this._runShape){var o=this.$_getDrawing(this._runShape);o&&o.draw(t,e,i)}}.bind(t),t}e.ShapeCellRenderer=M;var V,N=(i(j,V=n),j.prototype._doDispose=function(){V.prototype._doDispose.call(this)},Object.defineProperty(j.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"styleName",{get:function(){return j.STYLE_NAME},enumerable:!0,configurable:!0}),j.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;if(0==s||r){0<s&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("div")).style.position="relative",n.style.height="100%",o.appendChild(n);var a=ft.SvgElement.createSVG(n).style;a.position="absolute",a.left="0px",a.top="0px",a.width="100%",a.height="100%"}this._value=parseFloat(e.value);var l=o.firstElementChild.firstElementChild;l.setAttribute("class",this._barStyle),ft.SvgElement.renderSVG2(l,this.$_render)},j.STYLE_NAME="rg-renderer "+(j.STYLE="rg-signalbar-renderer"),j.BAR_STYLE="rg-signalbar-renderer-bar",j.INACTIVE_STYLE="rg-signalbar-renderer-inactive",j);function j(){var t=V.call(this)||this;return t._barStyle=j.BAR_STYLE,t._inactiveStyle=j.INACTIVE_STYLE,t._barCount=10,t._minimum=NaN,t._maximum=NaN,t._absoluteValue=!1,t.$_render=function(t){var e=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(e=this._barCount*(e-this._minimum)/(this._maximum-this._minimum));for(var i=(100-2*(this._barCount+1))/this._barCount,o=0,r=50,n=50/(this._barCount-1),s=0;s<this._barCount;s++){var a=s<e?null:this._inactiveStyle;t.sbounds(a,o+"%",r+"%",i+"%",100-r+"%"),o+=2+i,r-=n}}.bind(t),t}e.SignalBarCellRenderer=N;var B,F=(i($,B=n),$.prototype._doDispose=function(){B.prototype._doDispose.call(this)},Object.defineProperty($.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty($.prototype,"styleName",{get:function(){return $.STYLE_NAME},enumerable:!0,configurable:!0}),$.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;if(0==s||r){0<s&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("div")).style.position="relative",n.style.height="100%",o.appendChild(n);var a=ft.SvgElement.createSVG(n).style;a.position="absolute",a.left="0px",a.top="0px",a.width="100%",a.height="100%"}this._value=String(e.value),this._value&&(this._value=this._value.toUpperCase());var l=o.firstElementChild.firstElementChild;l.setAttribute("class",this._barStyle),ft.SvgElement.renderSVG(l,this.$_render)},$.STYLE_NAME="rg-renderer "+($.STYLE="rg-code39-renderer"),$.BAR_STYLE="rg-code39-renderer-bar",$);function $(){var t=B.call(this)||this;return t._barStyle=$.BAR_STYLE,t._barcode=new _t.Code39,t.$_render=function(t,e,i){this._value&&(this._barcode.value=this._value,this._barcode.renders(t,new K.Rectangle(0,0,e,100)))}.bind(t),t}e.Code39CellRenderer=F;var G,H=(i(U,G=n),U.prototype._doDispose=function(){G.prototype._doDispose.call(this)},Object.defineProperty(U.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"styleName",{get:function(){return U.STYLE_NAME},enumerable:!0,configurable:!0}),U.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;if(0==s||r){0<s&&z.Utils.clearChildren(o),o.textContent="",(n=document.createElement("div")).style.position="relative",n.style.height="100%",o.appendChild(n);var a=ft.SvgElement.createSVG(n).style;a.position="absolute",a.left="0px",a.top="0px",a.width="100%",a.height="100%"}this._value=String(e.value);var l=o.firstElementChild.firstElementChild;l.setAttribute("class",this._barStyle),ft.SvgElement.renderSVG(l,this.$_render)},U.STYLE_NAME="rg-renderer "+(U.STYLE="rg-code128-renderer"),U.BAR_STYLE="rg-code128-renderer-bar",U);function U(){var t=G.call(this)||this;return t._barStyle=U.BAR_STYLE,t._barcode=new _t.Code128,t.$_render=function(t,e,i){this._value&&(this._barcode.value=this._value,this._barcode.renders(t,new K.Rectangle(0,0,e,100)))}.bind(t),t}e.Code128CellRenderer=H});t(mt);mt.DataCellRenderer,mt.DataCellRendererCollection,mt.TextCellRenderer,mt.BarOrigin,mt.BarCellRenderer,mt.ImageCellRenderer,mt.IconCellRenderer,mt.CheckCellRenderer,mt.ButtonCellRenderer,mt.LinkCellRenderer,mt.ShapeCellRenderer,mt.SignalBarCellRenderer,mt.Code39CellRenderer,mt.Code128CellRenderer;var gt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=dt.ValueCellElement,i(s,n),Object.defineProperty(s.prototype,"expanderVisible",{get:function(){return!1},set:function(t){this.expanderVisible},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),s.prototype._doPrepareValue=function(t,e){var i;n.prototype._doPrepareValue.call(this,t,e),this._dataColumn=this.dataColumn,this._value=e.value,this._error=e.error,this._errorLevel=e.errorLevel;var o=this._dataColumn;if(o)switch(o.valueType){case W.ValueType.TEXT:i=e.text;break;case W.ValueType.NUMBER:var r=Number(this._value);i=isNaN(r)?o.nanText:0==r&&null!=o.zeroText?o.zeroText:this.numberFormatter?this.numberFormatter.format(r):e.text;break;case W.ValueType.DATETIME:i=this._value instanceof Date&&this.datetimeWriter?this.datetimeWriter.getText(this._value):e.text;break;case W.ValueType.BOOLEAN:i=this.boolFormatter?this.boolFormatter.formatValue(this._value):e.text;break;case W.ValueType.OBJECT:default:i=e.text}this._text=i},s.prototype._doUpdateContent=function(t,e,i){i.textContent=this._text},s);function s(t){return n.call(this,t||"dataCellView")||this}e.DataCellElement=r;var a,l=(a=ut.GridElement,i(u,a),u.prototype._doDispose=function(){this._item=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),u.prototype.updateItem=function(t,e){this._item=t,this._domIndex=e},u.prototype.clearContent=function(t){},u.prototype._createDom=function(){return null},u.prototype._changed=function(){this.invalidate()},u.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},u.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},u);function u(t){void 0===t&&(t=null);var e=a.call(this,t)||this;return e._domIndex=-1,e}e.ItemElement=l;var h,c=(i(p,h=l),p.prototype.clearContent=function(t){for(var e=this.parent,i=this._getStartCell(t),o=this._getEndCell(t)-i+1,r=0;r<o;r++)e._clearDataCellContent_2(this._domIndex,r)},p.prototype._doLayoutContent=function(t){for(var e=t.grid,i=(e.editOptions.isWritable(),t.cellLayouts.dataRows),o=e.body,r=this.parent._cells,n=this._getStartCell(t),s=this._getEndCell(t),a=e.focusedIndex,l=a&&a.itemIndex==this._item.index,u=a.column,h=0;h<i;h++)for(var c=r[this._domIndex+h],p=n;p<=s;p++){var d=c[p-n],_=d.layout.firstColumn;if(d.width=t.getCellWidth(p-n),d.height=t.getTableRowHeight(d.row),_ instanceof F.ValueColumn){var f=X.CellIndex.temp(e,this._item.index,_),y=o.getCell(f,!1);d.mouseEntered=!1,d.focused=l&&u===_,this._updateDataCell(e,t,o,y,_,d)}}},p.prototype._getStartCell=function(t){return this._item,N.MergedGroupHeader,t.firstCell},p.prototype._getEndCell=function(t){return this._item instanceof N.MergedGroupHeader?t.firstCell+this._item.groupLevel:t.lastCell},p.prototype._getRenderer=function(t,e){return e.valueColumn.rendererObj||mt.TextCellRenderer.Default},p.prototype._renderDataCell=function(t,e,i,o){var r=o.renderer=this._getRenderer(t,i),n=o.setInnerClass(r.styleName),s=o.cell,a=s.firstElementChild,l=this.$_buttonWidth(t,o),u=o.cellButton;if(0<l){var h=void 0;u?h=u.style:(u=document.createElement("span"),(h=(o.cellButton=u).style).position="absolute",h.display="inline-block"),o.actionWidth<=0&&(s.appendChild(u),o.actionWidth=l),u.className="rg-button-action",h.left=o.width-l+"px",h.top="0",h.width=l+"px",h.height=o.height+"px"}else 0<o.actionWidth&&(s.removeChild(u),o.actionWidth=0);a.style.marginRight=0<l?l+"px":"0",r.renderCell(t,i,o,a,n)},p.prototype._updateDataCell=function(t,e,i,o,r,n){n.cell;var s=i.getCellStyle(o,n.style.clear());n.setClassName(s.styleName),n.setEditor(s.editor||r.editor),n.button=r.button;var a=t.$_editOptionsWritable;if(a=(a=a&&r.isWritable()&&(e.fixedItemCount<1||t.$_fixedRowEditable||n.item.index>=e.fixedItemCount))&&n.renderer&&n.renderer.canEditable(),n.writable=a,r instanceof G.DataColumn&&r.blanked)switch(o.blankState){case W.BlankState.HEAD:case W.BlankState.BODY:n.setBorderBottom(0);break;case W.BlankState.TAIL:case W.BlankState.NONE:n.setBorderBottom(1)}this._renderDataCell(t,i,o,n)},p.prototype.$_getButtonVisible=function(t,e,i){var o=!1;switch(i){case W.ButtonVisibility.ALWAYS:o=!0;break;case W.ButtonVisibility.HIDDEN:o=!1;break;case W.ButtonVisibility.VISIBLE:o=e.focused;break;case W.ButtonVisibility.ROWFOCUSED:o=t.focusedIndex&&t.focusedIndex.itemIndex==e.item.index||e.mouseEntered;break;case W.ButtonVisibility.DEFAULT:default:o=e.focused||e.mouseEntered}return o},p.prototype.$_buttonWidth=function(t,e){var i=0;if(e.button!=W.CellButton.NONE){var o=e.layout.firstColumn;this.$_getButtonVisible(t,e,o.buttonVisiblility)&&(i=t.body.cellButtonWidth)}return i},p.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.writable)if(e.renderer&&!e.renderer.canEditable());else{var o=e.item,r=e.dataColumn;if(t.delegate.hasEditorButton(o,r)){var n=!1;if(X.CellIndex.equalsTo(t.focusedIndex,e.item.index,e.layout)){var s=t.delegate.getCellEditor(e.editorType);n=!!s&&s.listing}(n||this.$_getButtonVisible(t,e,r.editButtonVisibility))&&(i=t.body.cellButtonWidth)}}return i},p);function p(t){return void 0===t&&(t=null),h.call(this,t)||this}e.RowElement=c;var d,_=(i(f,d=c),f.prototype._getStartCell=function(t){return 0},f.prototype._getEndCell=function(t){return t.fixedCellCount-1},f);function f(){return null!==d&&d.apply(this,arguments)||this}e.FixedRowElement=_;var y,m=(i(g,y=c),g.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},g.prototype._getEndCell=function(t){return t.cellCount-1},g);function g(){return null!==y&&y.apply(this,arguments)||this}e.RightRowElement=m});t(gt);gt.DataCellElement,gt.ItemElement,gt.RowElement,gt.FixedRowElement,gt.RightRowElement;var bt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r="rowspan",n="colspan",I=(s.prototype.dispose=function(){this.item=null,this.cell=null,this.layout=null},Object.defineProperty(s.prototype,"dataColumn",{get:function(){return this.layout.firstColumn},enumerable:!0,configurable:!0}),s.prototype.setEditor=function(t){this.editor=t,this.editorType=F.ColumnStyle.getEditorType(t)},s.prototype.reset=function(t){return this.cell=t,this.className="",this.innerClass="",this.text=void 0,this},s.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this},s.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(r)),this},s.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(r)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},s.prototype.clear=function(t){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(n)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(r)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},s.prototype.setInnerClass=function(t){return t!=this.innerClass&&(this.cell.lastElementChild.className=this.innerClass=t,!0)},s.prototype.setText=function(t,e){e!==this.text&&(t.textContent=this.text=e)},s.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},s.prototype.isCellButton=function(t){return t===this.cellButton},s.prototype.getIndex=function(t){return t.set(this.item.index,this.layout.firstColumn)},s.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},s);function s(t){this.cell=null,this.cellButton=null,this.editButton=null,this.item=null,this.rowIndex=-1,this.row=-1,this.col=-1,this.layout=null,this.visible=void 0,this.width=0,this.height=0,this.rowSpan=1,this.colSpan=1,this.text=void 0,this.className="",this.innerClass="",this.style=new F.ColumnStyle,this.mouseEntered=!1,this.focused=!1,this.borderBottom=1,this.writable=!0,this.button=W.CellButton.NONE,this.actionWidth=0,this.editWidth=0,this.cell=t,this.text=t.textContent}e.BodyTableCell=I;var a,l=(a=ht.DataTableElement,i(u,a),u.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,a.prototype._doDispose.call(this)},u.prototype.bodyCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}return null},u.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},u.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},u.prototype.getCellRectAt=function(t,e){var i=e.column,o=t.fixedItemCount,r=e.itemIndex;0<o?r<o?r*=this._trs:r=(r-t.topIndex)*this._trs+1:r=(r-t.topIndex)*this._trs;for(var n=0;n<this._trs;n++){var s=this._cells[r+n];if(s)for(var a=0;a<s.length;a++){var l=s[a];if(l&&l.layout.isColumn(i)){var u=t.getTableRowBounds(l.rowIndex*this._trs+n);return e.colFixed?(u.x=t.getFixedCellPoint(a),u.width=t.getFixedCellWidth(a)):e.rightFixed?(u.x=t.getRightCellPoint(a),u.width=t.getRightCellWidth(a)):(u.x=t.getCellPoint(a),u.width=t.getCellWidth(a)),u}}}return null},u.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}return null},u.prototype._getCssSelector=function(){return"rg-body"},u.prototype._getTrs=function(t){return t.cellLayouts.dataRows},u.prototype._getTableRowCount=function(t){if(t.isRowGrouped()){for(var e=t.fixedItemCount,i=e+t.itemCount,o=this._trs,r=0,n=0;n<i;n++)r+=t.getItem(n).isData?o:1;return r+=e?1:0}return a.prototype._getTableRowCount.call(this,t)},u.prototype._doPrepareTableRows=function(t,e){a.prototype._doPrepareTableRows.call(this,t,e)},u.prototype._doPrepareTableRow=function(t,e,i,o){a.prototype._doPrepareTableRow.call(this,t,e,i,o)},u.prototype._prepareCellContent=function(t){var e=document.createElement("div");return e.style.whiteSpace="nowrap",e},u.prototype._clearDataCellContent_2=function(t,e){var i=this._cells[t][e];i.setText(i.cell.lastElementChild,""),i.cell.lastElementChild.innerHTML=""},u.prototype._prepareDataCellValue=function(t,e){var i=t.formatOptions,o=e.valueColumn;this._numberFormatter=i.getNumberFormatter(o.numberFormatter),this._datetimeWriter=i.getDateWriter(o.datetimeWriter),this._boolFormatter=i.getBoolFormatter(o.boolFormatter)},u.prototype._doMeasure=function(t,e,i){return new lt.Size},u.prototype.$_refreshCells=function(t,e,i,o,r){for(var n=z.Utils.getTimer(),s=this._cells,a=e.length,l=r.children,u=t.fixedItemCount,h=0<u,c=l.length,p=this._getStartCell(t),d=this._getEndCell(t)-p+1,_=s.length;_<c;_++)s.push([]);for(var f=_=0;_<a&&f<c;_++){var y=e[_],m=y.isData?o:1;if(h&&_==u){for(var g=s[f],b=l[f].children,v=0;v<b.length;v++)(E=g[v])?E.cell!==b[v]&&E.reset(b[v]):E=g[v]=new I(b[v]),E.item=y,E.rowIndex=_,E.row=f,E.col=v;for(v=d;v<g.length;v++)g[v]=null;f++}for(var C=0;C<m;C++){g=s[f+C],b=l[f+C].children;var w=i[C];for(v=0;v<d;v++){var E;(E=g[v])?E.cell!==b[v]&&E.reset(b[v]):E=g[v]=new I(b[v]),E.item=y,E.rowIndex=_,E.row=f,E.col=v,E.layout=w[v+p]}for(v=d;v<g.length;v++)g[v]=null;g.length=w.length}f+=m}for(f=c;f<s.length;f++){var x=s[f];for(v=0;v<x.length;v++)x[v]=null}s.length=c,n=z.Utils.getTimer()-n,console.log("$$$$ REFRESH_CELLS: "+n)},u.prototype._doLayoutContent=function(t){var e=t.$_getItems(),i=t.cellLayouts._dataCells;this._mergedGrouped=t.mergedRowGrouped,this.$_refreshCells(t,e,i,this._trs,this._tbody);for(var o,r,n=this.grid,s=this.model,a=this._itemCount=e.length,l=this._fixedCount=t.fixedItemCount,u=0<l,h=(n.topIndex,this._tbody.children),c=this._trs;(o=this.childCount)<a;){var p=e[o],d=this.$_borrowView(p);this.addChild(d)}for(;(o=this.childCount)>a;)this.$_removeView(o-1);var _=this._getEndCell(t)-this._getStartCell(t)+1;this.$_setCellsDisplay(this._cells,e,l,a,_);for(var f=0,y=0;f<a;f++){p=e[f],d=this.getChild(f),u&&f==l&&(h[y].$_idx=y,h[y].$_row=-99,z.Utils.setClassName(h[y],s.getFixedRowBarStyle()),y++);var m=p.index,g=h[y];if(g.$_row=m,g.$_idx=y,d.updateItem(p,y++),p instanceof q.GridRow||p instanceof N.MergedGroupHeader){var b=t.getItemBounds(m);d.setRect(b),r=s.getRowStyle(p);for(var v=1;v<c;v++){var C=h[y++];C.$_idx=y,C.$_row=m,z.Utils.setClassName(C,r)}p instanceof q.GridRow?d.layoutContent(t):p instanceof N.MergedGroupHeader&&d.layoutContent(t),z.Utils.setClassName(g,r)}else d.clearContent(t)}},u.prototype._doRender=function(t){},u.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},u.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},u.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e)},u.prototype._doDrawCell=function(t,e,i){},u.prototype.getCellView=function(t,e){var i=t.fixedItemCount,o=e.itemIndex;return i<=o&&(o-=t.topIndex),this.$_getCellView(t,o,e.column)},u.prototype.$_getCellView=function(t,e,i){if((e=this.$_getTableIndex(t,e))<this._cells.length)for(var o=0;o<this._trs;o++){var r=this._cells[e+o];if(r)for(var n=0;n<r.length;n++){var s=r[n];if(s&&s.layout.isColumn(i))return s.cell}}return null},u.prototype._getStartCell=function(t){return t.firstCell},u.prototype._getEndCell=function(t){return t.lastCell},u.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},u.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e=e||this.createRowElement()},u.prototype.createRowElement=function(){return new gt.RowElement},u.prototype.$_setCellsDisplay=function(t,e,i,o,r){var n=z.Utils.getTimer(),s=0<i,a=this._trs,l=(this._tbody.children,0),u=0;if(s){for(;u<i;u++)for(var h=0;h<a;h++,l++)for(var c=t[l],p=0;p<r;p++)(y=(f=(g=c[p]).layout).firstColumn)?(g.setColSpan(f._cspan),g.setRowSpan(f._dspan),g.setVisible(!0)):g.clear(!1);var d=t[l++];for(p=0;p<r;p++)(g=d[p]).clear(!0)}for(var _=l;u<o;u++)if(e[u].isData||this._mergedGrouped){for(h=0;h<a;h++)for(d=t[_+h],p=0;p<r;p++){var f,y;if(y=(f=(g=d[p]).layout).firstColumn)if(y.merged){var m=y._merges;m.isHidden(u-i)?g.clear(!1):(g.setColSpan(f._cspan),g.setRowSpan(m.getMerged(u-i)*f._dspan),g.setVisible(!0))}else g.setColSpan(f._cspan),g.setRowSpan(f._dspan),g.setVisible(!0);else g.clear(!1)}_+=a}else for(d=t[_++],p=0;p<r;p++){var g;(g=d[p]).clear(!1)}n=z.Utils.getTimer()-n,console.log("#### CELLS_DISPLAY: "+n)},u.prototype.$_mouseEnteredChanged=function(t,e,i){if(e&&i!=e.mouseEntered){var o=this.getRowView(e.item),r=this.model,n=e.dataColumn,s=r.getCell(X.CellIndex.temp(t,e.item.index,n),!1);e.mouseEntered=i,o._updateDataCell(t,t.layoutManager,r,s,n,e)}},u);function u(t){var e=a.call(this,t,"bodyView")||this;return e._mergedGrouped=!1,e._itemCount=0,e._fixedCount=0,e._itemViews=[],e._cells=[],e}e.GridBodyElement=l;var h,c=(i(p,h=l),p.prototype._getCssSelector=function(){return"rg-fixed-body"},p.prototype._getStartCell=function(t){return 0},p.prototype._getEndCell=function(t){return t.fixedCellCount-1},p.prototype.createRowElement=function(){return new gt.FixedRowElement},p.prototype._getCellCount=function(t){return t.fixedCellCount},p.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},p);function p(){return null!==h&&h.apply(this,arguments)||this}e.FixedBodyElement=c;var d,_=(i(f,d=l),f.prototype._getCssSelector=function(){return"rg-fixed-body"},f.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},f.prototype._getEndCell=function(t){return t.cellCount-1},f.prototype.createRowElement=function(){return new gt.RightRowElement},f.prototype._getCellCount=function(t){return t.rightCellCount},f.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},f);function f(){return null!==d&&d.apply(this,arguments)||this}e.RightBodyElement=_});t(bt);bt.BodyTableCell,bt.GridBodyElement,bt.FixedBodyElement,bt.RightBodyElement;var vt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._grid=null,this._rs=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"indicatorBounds",{get:function(){return this._indicatorBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"indicatorWidth",{get:function(){return this._indicatorBounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"stateBarWidth",{get:function(){return this._stateBarBounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkBarWidth",{get:function(){return this._checkBarBounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnMerged",{get:function(){return this._columnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedColumnMerged",{get:function(){return this._fixedColumnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightColumnMerged",{get:function(){return this._rightColumnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerSummaryRows",{get:function(){return this._cellLayouts.sumaryRows},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footerRows",{get:function(){return this._cellLayouts.footerRows},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!0,configurable:!0}),s.prototype.getLayout=function(t){return this._layouts[t]},s.prototype.getLayoutBounds=function(t){return new K.Rectangle(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},s.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},s.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},s.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},s.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},s.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},s.prototype.getCellPoint=function(t){return this._cellPoints[t]},s.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},s.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},s.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},s.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},s.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},s.prototype.$_getItems=function(){return this._items},s.prototype.getItem=function(t){return this._items[t]},s.prototype._calcRowHeight=function(){var t=this.grid.displayOptions,e=0;return 0<t.rowHeight&&(e=t.rowHeight),e<=0&&(e=23),e=Math.max(t.minRowHeight,e),0<t.maxRowHeight&&(e=Math.min(t.maxRowHeight,e)),e},s.prototype.measure=function(t,e,i,o,r){var n=this._grid;this._rs=n.itemSource,this._cellLayouts=n._activeCellLayout,this._footerCount=n.footers.visibleCount,this._headerSummaryCount=n.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._columnMerged=!1,this._fixedColumnMerged=!1,this._rightColumnMerged=!1,this._rowHeight=this._calcRowHeight(),this._focusIndex&&!n.isValid(this._focusIndex)&&this._focusIndex.normalize(n),this._doMeasure(t,o,r),this._prevFocused=this._focusIndex,this._focusIndex=null},s.prototype.layout=function(t){this._doLayout(t)},s.prototype.getItemHeight=function(t){return t<this._fixedItemCount?this._fixedItemPoints[t+1]-this._fixedItemPoints[t]:(t-=this._fixedItemCount,this._itemPoints[t+1]-this._itemPoints[t])},s.prototype.getItemBounds=function(t){var e,i;return i=0<this._fixedItemCount&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],this._itemPoints[t+1]-e),new K.Rectangle(0,e,1e3,i)},s.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,o,r=(e?this._fixedContentBounds:this._bodyBounds).y;return o=0<this._fixedItemCount&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+r,this._fixedItemPoints[t+1]-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+r,this._itemPoints[t+1]-i),new K.Rectangle(0,i,1e3,o)},s.prototype.getTableRowHeight=function(t){return t<this._fixedTableRowCount?this._fixedTableRowPoints[t+1]-this._fixedTableRowPoints[t]:(0<this._fixedItemCount&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[t+1]-this._tableRowPoints[t])},s.prototype.getTableRowBounds=function(t){var e,i;return i=0<this._fixedTableRowCount&&t<this._fixedTableRowCount?(e=this._fixedTableRowPoints[t],this._fixedTableRowPoints[t+1]-e):(t-=this._fixedTableRowCount,e=this._tableRowPoints[t],this._tableRowPoints[t+1]-e),new K.Rectangle(0,e,1e3,i)},s.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(t,this._scrollBarWidth),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos,this._bodyBounds.x=this._contentBounds.x},s.prototype.isMergedCell=function(t){return!1},s.prototype.getMergedCell=function(t){var e=t.column;if(e instanceof F.ValueColumn&&e.canMerge()){var i=e.stateFor(B.ColumnMergeManager.MERGE_ROOMS);if(i)return i.getRoom(t)}return null},s.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o=this._grid.headerView,r=o.getRowAt(e-this._headerBounds.y);if(t<this._fixedContentBounds.right){t-=this.fixedContentBounds.x;for(var n=0;n<this._fixedCellCount;n++)if(t>=this._fixedCellPoints[n]&&t<this._fixedCellPoints[n+1]){var s=o.getLayoutAt(r,n);return!i&&s instanceof D.ProxyCellLayoutItem?s.source:s}}else if(t>this._rightContentBounds.x);else for(t-=this.contentBounds.x,n=0;n<this._cellPoints.length;n++)if(t>=this._cellPoints[n]&&t<this._cellPoints[n+1])return s=o.getLayoutAt(r,n+this._fixedCellPoints.length),!i&&s instanceof D.ProxyCellLayoutItem?s.source:s;return null},s.prototype.getHeaderCellRect=function(t){var e,i=t.dataRoot.cellIndex,o=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var r=this._gridBounds.x,n=i;e=new K.Rectangle(this._fixedCellPoints[n]+r,0,this._fixedCellPoints[n+1]-this._fixedCellPoints[n],0)}else e=o<=i?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,n=i-o,new K.Rectangle(this._rightCellPoints[n]+r,0,this._rightCellPoints[n+1]-this._rightCellPoints[n],0)):(r=this._contentBounds.x,n=i-this._fixedCellCount,new K.Rectangle(this._cellPoints[n]+r,0,this._cellPoints[n+1]-this._cellPoints[n],0));return e.y=this._contentBounds.y,e.height=this.grid.headerView.getLayoutHeight(t),e},s.prototype.getLayoutRect=function(t){var e,i=this.rightFirstLayout;if(t<this._fixedLayoutCount){var o=this._fixedContentBounds.x,r=t;e=new K.Rectangle(this._fixedLayoutPoints[r]+o,0,this._fixedLayoutPoints[r+1]-this._fixedLayoutPoints[r],0)}else e=i<=t?(o=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,r=t-i,new K.Rectangle(this._rightLayoutPoints[r]+o,0,this._rightLayoutPoints[r+1]-this._rightLayoutPoints[r],0)):(o=this._contentBounds.x,r=t-this._fixedLayoutCount,new K.Rectangle(this._layoutPoints[r]+o,0,this._layoutPoints[r+1]-this._layoutPoints[r],0));return e},s.prototype.getDataLayoutRect=function(t){var e,i=t.dataRoot.cellIndex,o=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var r=this._fixedContentBounds.x,n=i;e=new K.Rectangle(this._fixedCellPoints[n]+r,0,this._fixedCellPoints[n+1]-this._fixedCellPoints[n],0)}else e=o<=i?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,n=i-o,new K.Rectangle(this._rightCellPoints[n]+r,0,this._rightCellPoints[n+1]-this._rightCellPoints[n],0)):(r=this._contentBounds.x,n=i-this._fixedCellCount,new K.Rectangle(this._cellPoints[n]+r,0,this._cellPoints[n+1]-this._cellPoints[n],0));return e},s.prototype.getDataCellBounds=function(t){var e=this.getItemBounds(t.itemIndex-this._topIndex),i=this.rightFirstLayout,o=t.column.layout.root.vindex;if(o<this._fixedLayoutCount)e.x=this._fixedLayoutPoints[o],e.width=this._fixedLayoutPoints[o+1]-this._fixedLayoutPoints[o];else if(i<=o){var r=o-i;e.x=this._rightLayoutPoints[r],e.width=this._rightLayoutPoints[r+1]-this._rightLayoutPoints[r]}else r=o-this._fixedLayoutCount,e.x=this._layoutPoints[r],e.width=this._layoutPoints[r+1]-this._layoutPoints[r];return e},s.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var r=this.grid,n=this._summaryBounds.bottom,s=-1;if(n<=(i-=this._contentBounds.y)&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=n+this._fixedItemPoints[a]&&i<n+this._fixedItemPoints[a+1]){s=a,i-=n+this._fixedItemPoints[a];break}if(s<0&&0<this._itemCount){for(a=0;a<this._itemCount;a++)if(i>=n+this._itemPoints[a]&&i<n+this._itemPoints[a+1]){s=a,i-=n+this._itemPoints[a];break}0<=s&&(s+=r.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(o.itemIndex=s,t){var l=r.getCellViewOf(t),u=l&&r.getBodyView(l),h=u instanceof bt.GridBodyElement&&u.layoutByCell(l);if(h)return o.layout=h,o}return o.layout=null,o.itemIndex=-1,o},s.prototype.mouseToIndexEx=function(t,e,i,o){if(this._layoutCount<1)return o;var r=this.grid,n=this._topIndex+this._fixedItemCount,s=this._bodyBounds.y,a=0;if(i<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=n+this._fullItemCount;else if(i>=this._footerBounds.y)a=n+this._fullItemCount;else{a=-1;for(var l=0;l<this._fixedItemCount;l++)if(i>=s+this._fixedItemPoints[l]&&i<s+this._fixedItemPoints[l+1]){a=l;break}if(a<0&&0<this._itemCount){for(l=0;l<this._itemCount;l++)if(i>=s+this._itemPoints[l]&&i<s+this._itemPoints[l+1]){a=l;break}0<=a&&(a+=n)}}o.itemIndex=a;var u=-1,h=this._gridBounds.x;if(e<h)u=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)u=r.visibleLayoutCount-1;else if(e>this._clientRect.right)u=Math.min(r.visibleLayoutCount-1,this._lastLayout+1);else{for(e-=h,l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){u=l;break}if(u<0&&0<this._rightLayoutCount){var c=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+h;for(l=0;l<this._rightLayoutCount;l++)if(c>=this._rightLayoutPoints[l]&&c<this._rightLayoutPoints[l+1]){u=l+this.rightFirstLayout;break}}if(u<0)for(e=e-this._fixedWidth+this._leftPos,l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){u=l;break}}return 0<=u&&u<r.visibleLayoutCount?o.layout=r.getVisibleCellLayout(u):o.layout=null,o},s.prototype.cellIsVisible=function(t){var e,i=t.itemIndex,o=this._fixedItemCount;if(o<=i){if(i<this._topIndex+o)return!1;if(0==this._fullItemCount&&i==this._topIndex+o)return!0;if(i>=this._topIndex+o+this._fullItemCount)return!1}var r=t.layout.vindex;if((o=this._fixedLayoutCount)<=r){if((e=this.getLayoutBounds(r).x)<this._leftPos)return!1;if(e+t.column.width-this._leftPos>this._nonfixedBounds.width-this._scrollBarWidth)return!1}return!0},s.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},s.prototype.makeLayoutVisible=function(t){this._focusIndex=new X.CellIndex(this.grid,-1,t)},s.prototype.isRowGrouped=function(){return this._rowGrouped},s.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths;if(this._fixedLayoutCount=Math.min(t.colCount,i),this._rightLayoutCount=Math.min(t.rightCount,i-this._fixedLayoutCount),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._fixedCellPoints=[],this._firstCell=0,(this._lastCell=0)<this._fixedLayoutCount){var r=this._fixedLayoutPoints,n=this._fixedCellPoints,s=0,a=0;r.push(s),n.push(s);for(var l=0;l<this._fixedLayoutCount;l++){for(var u=e.getVisible(l),h=u.cols,c=0;c<h;c++)s+=o[a++],n.push(s);this._layouts.push(u),r.push(s)}this._fixedCellCount=this._cellCount=a;var p=this._fixedBarWidth=t.colBarWidth;this._fixedWidth=r[this._fixedLayoutCount]+p}},s.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],r=this._cellPoints=[],n=this._fixedLayoutCount;if(this._firstCell=this._cellCount,(this._layoutsLength=0)<e){var s=0,a=this._cellCount;o.push(s),r.push(s);for(var l=0;l<e;l++){for(var u=t.getVisible(l+n),h=u.cols,c=0;c<h;c++)s+=i[a++],r.push(s);this._layouts.push(u),o.push(s)}this._layoutsLength=s,this._cellCount=a,this._lastCell=a-1}},s.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,r=this._rightLayoutPoints=[],n=this._rightCellPoints=[];if(0<this._rightLayoutCount){var s=0,a=this._cellCount;r.push(s),n.push(s);for(var l=o-this._rightLayoutCount;l<o;l++){for(var u=e.getVisible(l),h=u.cols,c=0;c<h;c++)s+=i[a++],n.push(s);this._layouts.push(u),r.push(s)}this._rightCellCount=a-this._cellCount,this._cellCount=a;var p=this._rightBarWidth=t.rightBarWidth;this._rightWidth=r[this._rightLayoutCount]+p}},s.prototype.$_calcScrollWidth=function(t,e){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width-e},s.prototype.$_calcLeftPos=function(t,e){this.$_calcScrollWidth(t,e);var i=this._focusIndex&&this._focusIndex.column;if(i){var o=i.layout,r=o.root.vindex;if(r>=this._fixedLayoutCount&&r<this.rightFirstLayout){var n=this._layoutPoints[r-this._fixedLayoutCount];if(n<this._leftPos)this._leftPos=n;else{var s=n+o.width-this._leftPos-this._scrollWidth;0<s&&(this._leftPos=Math.min(n,this._leftPos+s))}}}this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=0<this._layoutCount?this._layoutCount-this._rightLayoutCount-1:-1},s.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},s.prototype._doMeasureTopPane=function(t,e){e.height=0},s.prototype.$_measureViews=function(t,e){var i;this._headerBounds=e.clone(),i=t.header.visible?t.headerView.measure(t,e.width,e.height):lt.Size.EMPTY,this._headerBounds.height=i.height,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._summaryBounds=e.clone(),i=t.headerSummaries.visible?t.headerSummaryView.measure(t,e.width,e.height):lt.Size.EMPTY,this._summaryBounds.height=i.height,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._footerBounds=e.clone(),i=t.footers.visible?t.footerView.measure(t,e.width,e.height):lt.Size.EMPTY,this._footerBounds.height=i.height,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone()},s.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort(function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}),e},Object.defineProperty(s.prototype,"sectionObjects",{get:function(){return this._sectionObjects},enumerable:!0,configurable:!0}),s.prototype.$_measureLeftPane=function(t){var e,i=this._sectionObjects=this.$_sortSections(t),o=this._leftContentBounds.clone();this._leftContentBounds.width=0,o.x=o.y=0,this._headBounds=o.clone(),this._headBounds.height=this._headerBounds.height,o.topBy(this._headBounds.height),this._sumBounds=o.clone(),this._sumBounds.height=this._summaryBounds.height,o.topBy(this._sumBounds.height),this._footBounds=o.clone(),this._footBounds.height=this._footerBounds.height,this._footBounds.y=o.bottom-this._footBounds.height,o.bottomBy(-this._footBounds.height);for(var r=0,n=i;r<n.length;r++){var s=n[r];s instanceof c.RowIndicator?(this._indicatorBounds=o.clone(),e=t.rowIndicator.visible?t.rowIndicatorView.measure(t,o.width,o.height):lt.Size.EMPTY,this._indicatorBounds.width=e.width,this._leftContentBounds.width+=e.width,o.leftBy(e.width)):s instanceof p.StateBar?(this._stateBarBounds=o.clone(),e=t.stateBar.visible?t.stateBarView.measure(t,o.width,o.height):lt.Size.EMPTY,this._stateBarBounds.width=e.width,this._leftContentBounds.width+=e.width,o.leftBy(e.width)):s instanceof U.CheckBar&&(this._checkBarBounds=o.clone(),e=t.checkBar.visible?t.checkBarView.measure(t,o.width,o.height):lt.Size.EMPTY,this._checkBarBounds.width=e.width,this._leftContentBounds.width+=e.width,o.leftBy(e.width))}this._headBounds.width=this._leftContentBounds.width,this._sumBounds.width=this._leftContentBounds.width,this._footBounds.width=this._leftContentBounds.width},s.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},s.prototype.$_measureFixedPane=function(t){var e=this._fixedWidth;this._fixedContentBounds.width=e;var i=this._fixedContentBounds.clone();i.x=i.y=0,this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedHeaderBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),this._fixedBodyBounds=i},s.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightHeaderBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),this._rightBodyBounds=i},s.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height),this._summaryBounds.x=i.x,this._summaryBounds.y=this._headerBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height),this._dataBounds=i.clone(),this._footerBounds.x=i.x,this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height),this._bodyBounds=i},s.prototype.$_calcItemHeight=function(t,e){return this._calcRowHeight()},s.prototype.$_calcItemPoints=function(t){var e=this.grid,i=e.itemSource,o=t.height-this._topContentBounds.height-this._headerBounds.height-this._summaryBounds.height-this._footBounds.height+1,r=0;if(this._compensated=0,this._fixedRows=i?Math.min(i.fixedCount,i.itemCount):0,this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],0<this._fixedRows){this._fixedItemPoints.push(r);for(var n=0;n<this._fixedRows&&r<o;n++)r+=c=this.$_calcItemHeight(e,n),this._fixedItemPoints.push(r),this._fixedItemCount++;this._fixedHeight=r,r+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var s=e.itemCount-this._fixedItemCount;if(this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,(this._availableItemCount=0)<s&&r<o){var a=this._topIndex,l=-1;for(this._focusIndex&&(l=this._focusIndex.itemIndex)>=this._fixedItemCount&&l<a+this._fixedItemCount&&(a=this._topIndex=l-this._fixedItemCount),n=a;n<s&&r<o;n++)r+=c=this.$_calcItemHeight(e,n+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);if(this._fullItemCount=this._itemCount-(o<r?1:0),l>=this._topIndex+this._fixedItemCount+this._fullItemCount){r=0<this.fixedItemCount?this._fixedHeight+e.fixedOptions.rowBarHeight:0,this._topIndex=l-this._fixedItemCount-Math.max(0,this._fullItemCount-1),this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0;var u=e.itemCount-this._fixedItemCount;for(n=this._topIndex;n<u&&r<o;n++)r+=c=this.$_calcItemHeight(e,n+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);this._fullItemCount=this._itemCount-(o<=r?1:0)}if(0<a&&r<o){for(var h=o-r;0<a&&0<h;a--){var c;if(!((c=this.$_calcItemHeight(e,a+this._fixedItemCount))<=h))break;h-=c,r+=c,this._itemCount++,this._itemPoints.push(r),this._compensated++}0<this._compensated&&(this._topIndex=a,this._fullItemCount=this._itemCount-(0<h?1:0))}}else this._topIndex=0},s.prototype.$_updateScrollInfo=function(t,e,i){var o=this._layoutsLength,r=this._itemPoints[this._itemPoints.length-1];this._hscrolled=o>this._scrollWidth,this._vscrolled=0<this._topIndex||r>this._bodyBounds.height||this._topIndex+this._itemCount+this._fixedItemCount<this.grid.itemCount;var n=0<i&&this._hscrolled,s=0<e&&this._vscrolled;(n||s)&&(n&&s||(n?s=r>this._bodyBounds.height-i:n=o>this._scrollWidth-e)),this._hscrollBar=n,this._vscrollBar=s,this._scrollBarWidth=s?e:0,this._scrollBarHeight=n?i:0,this._hscrolled=this._hscrolled||n,this._vscrolled=this._vscrolled||s,this._clientRect=t.clone(),this._clientRect.width-=this._hscrolled?e:0,this._clientRect.height-=this._vscrolled?i:0},s.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(0<t){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._indicatorBounds.height-=t,this._stateBarBounds.height-=t,this._checkBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();if(0<this._compensated)for(;0<this._itemCount&&e[e.length-1]>i;){this._itemCount--,this._topIndex++,e.splice(0,1);for(var o=e[1]-e[0],r=0;r<e.length;r++)e[r]-=o}this._fullItemCount=this._itemCount-(e[this._itemCount]>=i?1:0);var n=this._focusIndex?this._focusIndex.itemIndex:-1;if(0<=n&&this._itemCount>this._fullItemCount&&n>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var s=e[this._itemCount]-e[this._itemCount-1],a=0,l=0;a<s;)a+=e[l+1]-e[l],l++;for(this._topIndex+=l,this._itemCount-=l-1,this._fullItemCount-=l-1,this._topIndex+this._fixedItemCount+this._itemCount>this.grid.itemCount&&this._itemCount--,e.splice(0,l),r=0;r<e.length;r++)e[r]-=a}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var u=e[e.length-1];this._indicatorBounds.height=u,this._stateBarBounds.height=u,this._checkBarBounds.height=u}},s.prototype.$_adjustHorizontals=function(t){var e=this._scrollBarWidth;this._rightContentBounds.x-=e,this.$_calcLeftPos(t,e)},s.prototype.$_calcTableRowPoints=function(){this._cellLayouts;var t=this._trs,e=this._items,i=this._fixedItemCount,o=this._itemCount+i,r=this._fixedTableRowPoints=[],n=this._tableRowPoints=[],s=0;if(this._fixedTableRowCount=0,(this._tableRowCount=0)<this.fixedItemCount){for(;s<i;s++){var a=this._fixedItemPoints[s];if(r.push(a),this._fixedTableRowCount++,e[s].isData)for(var l=Math.floor((this._fixedItemPoints[s+1]-a)/t),u=1;u<t;u++)r.push(a+=l),this._fixedTableRowCount++}r.push(this._fixedItemPoints[i])}if(0<this.itemCount){for(;s<o;s++)if(a=this._itemPoints[s-i],l=this._itemPoints[s-i+1]-a,n.push(a),this._tableRowCount++,e[s].isData)for(l=Math.floor(l/t),u=1;u<t;u++)n.push(a+=l),this._tableRowCount++;n.push(this._itemPoints[this._itemCount])}},s.prototype._doMeasure=function(t,e,i){var o=this._grid,r=t.clone();this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this.$_calcFixedCellPoints(o.fixedOptions,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(o.fixedOptions,this._cellLayouts),this._topContentBounds=r.clone(),this.$_measureTopPane(o),r.topBy(this.topPanelVisible?this._topContentBounds.height:0),this.$_measureViews(o,r),this._leftContentBounds=r.clone(),this.$_measureLeftPane(o),r.leftBy(this._leftContentBounds.width),this._sideContentBounds=r.clone(),this._measureSidePane(o),r.leftBy(this._sideContentBounds.width),this._fixedContentBounds=r.clone(),this.$_measureFixedPane(o),r.leftBy(this._fixedContentBounds.width),this._rightContentBounds=r.clone(),this.$_measureRightPane(o),this._rightContentBounds.x=r.right-this._rightContentBounds.width,r.width-=this._rightContentBounds.width,this._contentBounds=r.clone(),this.$_measureContentPane(o),this._nonfixedBounds=new K.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._footerBounds.y-this._fixedContentBounds.y),this.$_calcItemPoints(t),this.$_calcScrollWidth(t,e),this.$_updateScrollInfo(t,e,i),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this.$_checkColumnMerging(),this._gridBounds=new K.Rectangle(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x,this._footerBounds.y-this._fixedContentBounds.y)},s.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},s.prototype._doLayoutTopPane=function(t,e){},s.prototype.$_layoutLeftPane=function(t,e){var i,o=this._leftContentBounds;(e.visible=!o.isEmpty)&&(e.setRect(o),((i=t.headView).visible=t.header.visible)&&(i.setRect(this._headBounds),i.layoutContent(this)),((i=t.sumView).visible=t.headerSummaries.visible)&&(i.setRect(this._sumBounds),i.layoutContent(this)),((i=t.footView).visible=t.footers.visible)&&(i.setRect(this._footBounds),i.layoutContent(this)),((i=t.rowIndicatorView).visible=t.rowIndicator.visible)&&(i.setRect(this._indicatorBounds),i.layoutContent(this)),((i=t.stateBarView).visible=t.stateBar.visible)&&(i.setRect(this._stateBarBounds),i.layoutContent(this)),((i=t.checkBarView).visible=t.checkBar.visible)&&(i.setRect(this._checkBarBounds),i.layoutContent(this)))},s.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;(e.visible=!i.isEmpty)&&(e.setRect(i),e.layoutContent(this,i.width,i.height))},s.prototype._prepareItems=function(){var t=this._topIndex+this._fixedItemCount;this._items=[];for(var e=0;e<this._fixedItemCount;e++){var i=this._rs.getItem(e);this._items.push(i)}for(e=0;e<this._itemCount;e++)i=this._rs.getItem(e+t),this._items.push(i)},s.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;(e.visible=!o.isEmpty)?(e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.visible)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.visible)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,i.setRect(this._fixedBodyBounds),i.layoutContent(this),this._layoutFixedBodyView(this._rightBodyBounds,this.$_getItems()),((i=t.fixedMergeView).visible=this._fixedColumnMerged)&&i.layoutContent(this),e.layoutContent(this,o.width,o.height)):(t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1,t.fixedMergeView.visible=!1)},s.prototype._layoutFixedBodyView=function(t,e){},s.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.visible)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.visible)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,i.setRect(this._rightBodyBounds),i.layoutContent(this),this._layoutRightBodyView(this._rightBodyBounds,this.$_getItems()),((i=t.rightMergeView).visible=this._rightColumnMerged)&&i.layoutContent(this),e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1,t.rightMergeView.visible=!1)},s.prototype._layoutRightBodyView=function(t,e){},s.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds;(e.visible=!o.isEmpty)&&(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.visible)&&(i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.visible)&&(i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).setRect(this._bodyBounds),i.layoutContent(this),this._layoutBodyView(this._bodyBounds,this.$_getItems()),((i=t.mergeView).visible=this._columnMerged)&&i.layoutContent(this),e.layoutContent(this,o.width,o.height))},s.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},s.prototype._layoutBodyView=function(t,e){},s.prototype._doLayout=function(t){var e,i=this._grid;this._prepareItems(),this.$_calcTableRowPoints(),e=i._topContentPane,this.$_layoutTopPane(i,e),e=i._leftContentPane,this.$_layoutLeftPane(i,e),(e=i._sideContentPane)&&this._layoutSidePane(i,e),e=i._fixedContentPane,this.$_layoutFixedPane(i,e),e=i._rightContentPane,this.$_layoutRightPane(i,e),e=i._contentPane,this.$_layoutContentPane(i,e),e=i._waitingPane,this.$_layoutWatingPane(i,e),this._bodyBounds.x=this._contentBounds.x,this._fixedBodyBounds.x=this._fixedContentBounds.x,this._rightBodyBounds.x=this._rightContentBounds.x},s.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var r=this._itemCount,n=!1,s=0,a=e.length;s<a;s++){var l=e[s];if(l instanceof F.ValueColumn&&l.canMerge()){var u=l._merges;u||(u=new B.ColumnMergeManager(l),l._merges=u),u.refresh(i,o),u.prepareCells(r),t.addColumnRooms(this,s,l,u),l.$_setMerged(!0),n=!0}}return t.bodyView.$_setSpanned(n),n},s.prototype.$_checkColumnMerging=function(){var t=this._grid,e=this._layoutCount,i=t.mergeView,o=t.fixedMergeView,r=t.rightMergeView,n=this._fixedItemCount+this._topIndex,s=Math.min(t.itemCount-1,this._fixedItemCount+this._topIndex+this._itemCount-1),a=0<this._fixedLayoutCount,l=0<this._rightLayoutCount;if(i.clearRooms(),a&&o.clearRooms(),l&&r.clearRooms(),a){var u=t.getHorzColumns(0,this._fixedLayoutCount);this._fixedColumnMerged=this.$_prepareColumnMerges(o,u,n,s)}if(l){var h=t.getHorzColumns(e-this._rightLayoutCount,this._rightLayoutCount);this._rightColumnMerged=this.$_prepareColumnMerges(r,h,n,s)}var c=t.getHorzColumns(this._fixedLayoutCount,e-this._fixedLayoutCount-this._rightLayoutCount);this._columnMerged=this.$_prepareColumnMerges(i,c,n,s)},s);function s(t){var e=r.call(this)||this;return e._leftPos=0,e._rightFixed=!0,e._footerCount=0,e._headerSummaryCount=0,e._layoutCount=0,e._fixedLayoutCount=0,e._rightLayoutCount=0,e._firstLayout=0,e._lastLayout=0,e._layoutsLength=0,e._layouts=[],e._layoutPoints=[],e._fixedLayoutPoints=[],e._rightLayoutPoints=[],e._cellCount=0,e._fixedCellCount=0,e._rightCellCount=0,e._firstCell=0,e._lastCell=0,e._cellPoints=[],e._fixedCellPoints=[],e._rightCellPoints=[],e._trs=1,e._rowGrouped=!1,e._items=[],e._topIndex=0,e._itemCount=0,e._fixedRows=0,e._fixedItemCount=0,e._fullItemCount=0,e._availableItemCount=0,e._fixedItemPoints=[],e._itemPoints=[],e._fixedTableRowCount=0,e._tableRowCount=0,e._fixedTableRowPoints=[],e._tableRowPoints=[],e._fixedBarWidth=0,e._rightBarWidth=0,e._fixedBarHeight=0,e._columnMerged=!1,e._fixedColumnMerged=!1,e._rightColumnMerged=!1,e._fixedWidth=0,e._rightWidth=0,e._fixedHeight=0,e._rowHeight=0,e._hscrolled=!1,e._vscrolled=!1,e._hscrollBar=!1,e._vscrollBar=!1,e._scrollBarWidth=0,e._scrollBarHeight=0,e._scrollWidth=0,e._compensated=0,e._grid=t,e}e.GridLayoutManager=n});t(vt);vt.GridLayoutManager;var Ct=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ht.DataTableElement,i(s,r),s.prototype._getCssSelector=function(){return"rg-statebar"},s.prototype._prepareCellContent=function(t){return document.createElement("div")},s.prototype._doMeasure=function(t,e,i){var o=t.stateBar;return new lt.Size(o.width,i)},s.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this.model,o=t.topIndex,r=t.itemCount,n=t.fixedItemCount,s=n+r,a=e.focusedRow,l=0;l<s;l++){var u=l<n?l:l+o,h=X.CellIndex.temp(e,u),c=i.getCell(h),p=this._getTableRow(t,l);p.$_row=u;var d=p.children[0];d.$_foc=u==a,z.Utils.setClassName(d,this.$_getCellSelector(d)),this._updateCellContent(e,c,d)}},s.prototype._doRender=function(t){},s.prototype._getCellCount=function(t){return 1},s.prototype._getCellWidth=function(t,e){return this.width},s.prototype._doDrawCell=function(t,e,i){},s.prototype.$_getCellSelector=function(t){var e=this.grid.getItem(t.parentElement.$_row);if(!(0<=e.dataRow))return"rg-statebar-cell";switch(e.rowState){case x.RowState.UPDATED:return"rg-statebar-cell rg-statebar-updated";case x.RowState.CREATED:return"rg-statebar-cell rg-statebar-created";case x.RowState.DELETED:return"rg-statebar-cell rg-statebar-deleted";case x.RowState.CREATE_AND_DELETED:return"rg-statebar-cell rg-statebar-create-and-deleted";default:return"rg-statebar-cell"}},s);function s(t){return r.call(this,t,"stateBarView")||this}e.StateBarElement=n});t(Ct);Ct.StateBarElement;var wt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=dt.SelectableCellElement,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())},enumerable:!0,configurable:!0}),s.prototype._doUpdateContent=function(t,e,i){var o=e.item,r=i;this._checked=o&&o.checked,r.checked=this._checked},s);function s(){var t=r.call(this,"checkBarCellView")||this;return t._exclusive=!1,t._checked=!1,t}e.CheckBarCellElement=n;var a,l=(a=ht.DataTableElement,i(u,a),u.prototype._getCssSelector=function(){return"rg-checkbar"},u.prototype._prepareCellContent=function(t){var e=document.createElement("div"),i=document.createElement("input"),o=i.style;return i.type="checkbox",i.className="rg-checkbox",o.display="inline-block",e.appendChild(i),e},u.prototype._doMeasure=function(t,e,i){var o=this.model;return new lt.Size(o.width,i)},u.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this.model,o=t.topIndex,r=t.itemCount,n=this._fixedCount=t.fixedItemCount,s=n+r,a=e.focusedRow,l=0;l<s;l++){var u=l<n?l:l+o,h=X.CellIndex.temp(e,u),c=i.getCell(h),p=this._getTableRow(t,l);p.$_row=u;var d=p.children[0];d.$_foc=u==a,z.Utils.setClassName(d,this.$_getCellSelector()),this._updateCellContent(e,c,d)}},u.prototype._doUpdateCellContent=function(t,e,i){var o=e.item;i.checked=o&&o.checked},u.prototype._getCellCount=function(t){return 1},u.prototype._getCellWidth=function(t,e){return this.width},u.prototype.getCellContent=function(t,e){return a.prototype.getCellContent.call(this,t,e).lastElementChild},u.prototype._getCellContent=function(t){return t.lastElementChild.lastElementChild},u.prototype.getCheckBox=function(t){return t.lastElementChild.lastElementChild},u.prototype.$_getCellSelector=function(){return u.CELL_CSS},u.prototype.$_setPrevChecked=function(t){this._prevChecked=t},u.CELL_CSS="rg-checkbar-cell",u);function u(t){var e=a.call(this,t,"checkBarView")||this;return e._cells=[],e._fixedCount=0,e._prevChecked=-1,e}e.CheckBarElement=l});t(wt);wt.CheckBarCellElement,wt.CheckBarElement;var Et=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r="rowspan",n="colspan",v=(s.prototype.dispose=function(){this.cell=null,this.layout=null},s.prototype.reset=function(t){return this.cell=t,this.text=void 0,this},s.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this},s.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(r)),this},s.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(r)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},s.prototype.clear=function(t){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(n)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(r)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},s.prototype.setText=function(t){t!==this.text&&(this.cell.firstChild.textContent=this.text=t)},s.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},s);function s(t){this.cell=null,this.layout=null,this.visible=void 0,this.rowSpan=1,this.colSpan=1,this.className="",this.text=void 0,this.cell=t,this.text=t.textContent}e.SummaryTableCell=v;var a,l=(a=ht.SimpleTableElement,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},u.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},u.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},u.prototype._doDrawCell=function(t,e,i){},u.prototype._doRender=function(t){},u.prototype._getStartCell=function(t){return t.firstCell},u.prototype._getEndCell=function(t){return t.lastCell},u.prototype._refreshCells=function(t,e,i,o){for(var r=z.Utils.getTimer(),n=this._cells,s=o.children,a=s.length,l=i.length,u=this._getStartCell(t),h=this._getEndCell(t)-u+1,c=n.length;c<a;c++)n.push([]);for(var p=c=0;c<e&&p<a;c++)for(var d=0;d<l;d++){for(var _=n[p],f=s[p].children,y=i[d],m=0;m<h;m++){var g=_[m];g?g.cell!==f[m]&&g.reset(f[m]):g=_[m]=new v(f[m]),g.layout=y[m+u]}for(m=h;m<_.length;m++)_[m]=null;_.length=y.length,p++}for(p=a;p<n.length;p++){var b=n[p];for(m=0;m<b.length;m++)b[m]=null}n.length=a,r=z.Utils.getTimer()-r,console.log("$$$$ REFRESH_SUMMARY_CELLS: "+r)},u);function u(t,e){var i=a.call(this,t,e)||this;return i._cells=[],i}e.SummaryElement=l});t(Et);Et.SummaryTableCell,Et.SummaryElement;var xt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Et.SummaryElement,i(g,r),g.prototype._doDispose=function(){r.prototype._doDispose.call(this)},g.prototype._getCssSelector=function(){return"rg-footer"},g.prototype._prepareCellContent=function(t){return document.createElement("div")},g.prototype._doMeasure=function(t,e,i){return lt.Size.create(e,this.model.getHeight())},g.prototype._doPrepareTableExtents=function(t){var e=this._heights,i=this.height,o=Math.floor(i/(t.footerCount*t.footerRows));if(e.length=this._getTableRowCount(t)+1,(e[0]=0)<e.length){for(var r=1;r<e.length-1;r++)e[r]=e[r-1]+o;e[r]=i}},g.prototype._doLayoutContent=function(t){var e=t.grid,i=this.model,o=t.footerCount,r=t.cellLayouts._footerCells,n=r.length,s=this._getStartCell(t),a=this._getEndCell(t);this._refreshCells(t,o,r,this._tbody);for(var l=0;l<o;l++){var u=i.getVisible(l),h=u.styleName;h=h?g.CELL_CSS+" "+h:g.CELL_CSS;for(var c=0;c<n;c++)for(var p=this._cells[l*n+c],d=r[c],_=s;_<=a;_++){var f=p[_-s],y=d[_];if(f.cell,y.isProxy)f.clear(!1),f.setText("");else if(y instanceof D.CellLayoutGroupItem)f.set(y._cspan,y._hspan,!0),f.setText("");else{f.set(y._cspan,y._hspan,!0);var m=u.getCell(y);this._updateCell(e,u,m,f)}f.setClassName(h)}}},g.prototype._getTableRowCount=function(t){return t.footerRows*t.footerCount},g.prototype._getTableRowHeight=function(t,e){return this._heights[e+1]-this._heights[e]},g.prototype._updateCell=function(t,e,i,o){o.setText(i.text||"")},g.CELL_CSS="rg-footer-cell",g);function g(t){var e=r.call(this,t,"footerView")||this;return e._heights=[],e}e.FooterElement=n;var s,a=(i(l,s=n),l.prototype._getCssSelector=function(){return"rg-fixed-footer"},l.prototype._getStartCell=function(t){return 0},l.prototype._getEndCell=function(t){return t.fixedCellCount-1},l.prototype._getCellCount=function(t){return t.fixedCellCount},l.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.FixedFooterElement=a;var u,h=(i(c,u=n),c.prototype._getCssSelector=function(){return"rg-fixed-footer"},c.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},c.prototype._getEndCell=function(t){return t.cellCount-1},c.prototype._getCellCount=function(t){return t.rightCellCount},c.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},c);function c(){return null!==u&&u.apply(this,arguments)||this}e.RightFooterElement=h});t(xt);xt.FooterElement,xt.FixedFooterElement,xt.RightFooterElement;var It=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),Object.defineProperty(s.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dragging",{get:function(){return this._dragging},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"completed",{get:function(){return this._completed},enumerable:!0,configurable:!0}),s.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},s.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},s.prototype.start=function(t,e,i,o){return void 0===o&&(o=!1),this.cancel(),!(!this._active||!this._doStart(t,e,i,o)||(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),0))},s.prototype.drag=function(t,e,i){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i))||(this._moveFeedback(e,i),0))},s.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},s.prototype.drop=function(t,e,i){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i)?(this._doCompleted(t,e,i),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},s.prototype.getNextRequest=function(t,e){return null},Object.defineProperty(s.prototype,"currentX",{get:function(){return this._currentX},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currentY",{get:function(){return this._currentY},enumerable:!0,configurable:!0}),s.prototype._showFeedback=function(t,e){},s.prototype._moveFeedback=function(t,e){},s.prototype._hideFeedback=function(){},s.prototype._doActivate=function(){},s.prototype._doDeactivate=function(){},s.prototype._doStart=function(t,e,i,o){return!0},s.prototype._doDrag=function(t,e,i){return!0},s.prototype._doCanceled=function(t,e){},s.prototype._canAccept=function(t,e,i){return!0},s.prototype._doCompleted=function(t,e,i){},s.prototype._doEnded=function(){},s);function s(t,e){var i=r.call(this)||this;return i._active=!1,i._completed=!1,i._dragging=!1,i._currentX=0,i._currentY=0,i._container=t,i._name=e,i}e.DragTracker=n});t(It);It.DragTracker;var Ot=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"previous",{get:function(){return this._previous},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!0,configurable:!0}),s.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},s.prototype.activate=function(t){this._doActivated(t)},s.prototype.deactivate=function(){this._doDeactivated()},s.prototype.keyDown=function(t){return this._doKeyDown(t)},s.prototype.keyUp=function(t){return this._doKeyUp(t)},s.prototype.keyPress=function(t){return this._doKeyPress(t)},s.prototype.mouseDown=function(t){var e=this._currX=this._clickX=t.mouseX,i=this._currY=this._clickY=t.mouseY;this.dragging&&this._stopDragTracker(e,i,!1),this._doMouseDown(t)},s.prototype.mouseMove=function(t){var e=this._currX=t.mouseX,i=this._currY=t.mouseY,o=this.dragTracker;if(o)if(o.dragging)if(null==t.buttons||0<t.buttons||z.Utils.ieOld&&0<=t.buttons){if(!o.drag(this._mouseEventTarget,e,i)){var r=o.getNextRequest(e,i);r&&(this._stopDragTracker(e,i,!0),this.dragTracker=this._getDragTracker(r,e,i),this._startDragTracker(e,i,!1))}}else this._stopDragTracker(e,i,!0);else 3<=Math.abs(e-this._clickX)||3<=Math.abs(i-this._clickY)?this._startDragTracker(e,i,!1):this._doMouseMove(t);else this._doMouseMove(t)},s.prototype.mouseUp=function(t){var e=this._currX=t.mouseX,i=this._currY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!1):(this._dragTracker=null,this._doMouseUp(t))},s.prototype.mouseEnter=function(t){this._doMouseEnter(t)},s.prototype.mouseLeave=function(t){this._doMouseLeave(t)},s.prototype.mouseOver=function(t){this._doMouseOver(t)},s.prototype.mouseOutside=function(){this._doMouseOutside()},s.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},s.prototype.contextMenu=function(t){return this._doContextMenu(t)},s.prototype.click=function(t){this._doClick(t)},s.prototype.dblclick=function(t){this._doDblClick(t)},s.prototype.setFocus=function(){this._doSetFocus()},Object.defineProperty(s.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!0,configurable:!0}),s.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},s.prototype._doActivated=function(t){},s.prototype._doDeactivated=function(){},s.prototype._doKeyDown=function(t){return!1},s.prototype._doKeyUp=function(t){return!1},s.prototype._doKeyPress=function(t){return!1},s.prototype._doMouseDown=function(t){},s.prototype._doMouseMove=function(t){},s.prototype._doMouseUp=function(t){},s.prototype._doMouseEnter=function(t){},s.prototype._doMouseLeave=function(t){},s.prototype._doMouseOver=function(t){},s.prototype._doMouseOutside=function(){},s.prototype._doMouseWheel=function(t){return!1},s.prototype._doContextMenu=function(t){},s.prototype._doClick=function(t){},s.prototype._doDblClick=function(t){},s.prototype._doSetFocus=function(){},s.prototype._getDragTracker=function(t,e,i){return null},s.prototype._startDragTracker=function(t,e,i){this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},s.prototype._stopDragTracker=function(t,e,i){if(this.dragging){var o=this._dragTracker;i?o.cancel():o.drop(this._mouseEventTarget,t,e),this.dragTracker=null,this._doDragTrackerFinished(o,i)}},s.prototype._doDragTrackerStarted=function(t){},s.prototype._doDragTrackerFinished=function(t,e){},s);function s(t,e){var i=r.call(this)||this;return i._clickX=0,i._clickY=0,i._currX=0,i._currY=0,i._owner=t,i._name=e,i._previous=null,i}e.VisualTool=n;var a,l=(a=ce.Base,i(u,a),Object.defineProperty(u.prototype,"cursor",{get:function(){return W.Cursor.AUTO},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"source",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"selectable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dblClickable",{get:function(){return!1},enumerable:!0,configurable:!0}),u);function u(){return a.call(this)||this}e.EditRequest=l});t(Ot);Ot.VisualTool,Ot.EditRequest;var St=e(function(t,e){var o,n,i,r=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),(i=n=e.ScrollEventType||(e.ScrollEventType={})).LINE="line",i.PAGE="page",i.THUMB_TRACK="thumbTrack",i.THUMB_END="thumbEnd";var s,a=(s=nt.VisualElement,r(l,s),l.prototype._doDispose=function(){s.prototype._doDispose.call(this)},Object.defineProperty(l.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pressed",{get:function(){return this._pressed},set:function(t){t!=this._pressed&&(this._pressed=t,this._changed())},enumerable:!0,configurable:!0}),l.prototype._doDraw=function(t){this._doRender(t)},l.prototype._doRender=function(t){},l.prototype._changed=function(){this.invalidate()},l);function l(t,e){var i=s.call(this,e)||this;return i._pressed=!1,i._scrollBar=t,i}var u,h=(r(c,u=a),c.prototype._getCssSelector=function(){return"rg-scrolledge"},c);function c(){return u.call(this,null,"scrollEdgeView")||this}e.ScrollEdge=h;var p,d=(r(_,p=a),_.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_.prototype._getCssSelector=function(){return"rg-scrolltrack"},_);function _(t){return p.call(this,t,"scrollTrackView")||this}e.ScrollTrack=d;var f,y=(r(m,f=a),Object.defineProperty(m.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"far",{get:function(){return this._far},enumerable:!0,configurable:!0}),m.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},m);function m(t,e){var i=f.call(this,t,"scrollButtonView")||this;return i._enabled=!0,i._far=e,i}e.ScrollButton=y;var g,b=(r(v,g=a),v.prototype._getCssSelector=function(){return"rg-scrollthumb"},v);function v(t){return g.call(this,t,"scrollThumbView")||this}e.ScrollThumb=b;var C,w=(C=nt.VisualElement,r(E,C),E.prototype._doDispose=function(){C.prototype._doDispose.call(this)},Object.defineProperty(E.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"vertical",{get:function(){return this._vertical},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"pos",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!0,configurable:!0}),E.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},E.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},E.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},E.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},E.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},E.prototype.draw=function(){C.prototype.draw.call(this)},E.prototype._doDraw=function(t){},E.prototype._doSizeChanged=function(){this.invalidateLayout()},E.prototype.invalidateLayout=function(){this._needLayout=!0,C.prototype.invalidateLayout.call(this)},E.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,r=(t?i:o)-2*e,n=Math.min(r,Math.max(this._minThumbSize,Math.floor(r*this._page/(this._max-this._min+1)))),s=e+Math.min(r-n,Math.max(0,Math.floor((r-n)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),n<=r&&this._thumb.setBounds(2,s,o-4,n)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),n<=r&&this._thumb.setBounds(s,2,n,i-4))},E.prototype._doScroll=function(t,e,i){this.fireEvent(E.SCROLLED,t,e,i)},E.SCROLLED="onScrollBarScrolled",E);function E(t,e){void 0===e&&(e=!1);var i=C.call(this,"scrollBarView")||this;return i._lineScrollSize=1,i._pageScrollSize=1,i._minThumbSize=20,i._min=0,i._max=0,i._pos=0,i._page=0,i._maxPosition=0,i._buttonSize=20,i._needLayout=!0,i._container=t,i._vertical=e,i._track=new d(i),i.addChild(i._track),i._thumb=new b(i),i.addChild(i._thumb),i._nearButton=new y(i,!1),i.addChild(i._nearButton),i._farButton=new y(i,!0),i.addChild(i._farButton),i}e.ScrollBar=w;var x,I=(x=It.DragTracker,r(O,x),O.prototype._doDispose=function(){this._thumb=null,this._doDispose()},Object.defineProperty(O.prototype,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),O.prototype._doStart=function(t,e,i){var o=this._thumb.scrollBar,r=o.containerToElement(e,i);return o.vertical?this._offset=r.y-this._thumb.y:this._offset=r.x-this._thumb.x,this._thumb.pressed=!0},O.prototype._doDrag=function(t,e,i){return this.$_doScroll(e,i,n.THUMB_TRACK)},O.prototype._doCompleted=function(t,e,i){return this.$_doScroll(e,i,n.THUMB_END)},O.prototype._doCanceled=function(t,e){},O.prototype._doEnded=function(){this._thumb.pressed=!1},O.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,r=o._maxPosition-o._min+1,n=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*n-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-n)*r/a,o._doScroll(i,0,Math.floor(s.y))}else{var a;if((a=o.width-2*n-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-n)*r/a,o._doScroll(i,0,Math.floor(s.x))}return!0},O);function O(t){return x.call(this,t,"scrollThumbTracker")||this}e.ScrollThumbTracker=I;var S,D=(S=j.EventAware,r(R,S),Object.defineProperty(R.prototype,"active",{get:function(){return void 0!==this._timer},enumerable:!0,configurable:!0}),R.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._button.pressed=!0,this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),200),this._ready=!0},R.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},R.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button&&(this._button.pressed=!1)},R.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=n.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},R);function R(){var t=S.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t}e.ScrollButtonTimer=D;var P,T=(P=ce.Base,r(k,P),Object.defineProperty(k.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),k.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0;var r=this._scrollBar.containerToElement(i,o);this._mouseX=r.x,this._mouseY=r.y},k.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},k.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},k.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var o=this._mouseY;this._far&&o>i.bottom?(t=n.PAGE,e=1):!this._far&&o<i.y&&(t=n.PAGE,e=-1)}else{var r=this._mouseX;this._far&&r>i.right?(e=1,t=n.PAGE):r<i.x&&(t=n.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},k);function k(){var t=P.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t._mouseX=0,t._mouseY=0,t}e.ScrollTrackTimer=T;var L,M=(L=Ot.VisualTool,r(A,L),A.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=null,this._buttonTimer.stop(),this._buttonTimer=null,L.prototype._doDispose.call(this)},A.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement&&(this._clickElement.pressed=!1,this._clickElement=null),this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(o instanceof a)if((this._clickElement=o).pressed=!0,o instanceof y)this._buttonTimer.start(o);else if(o instanceof b)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof d){var r=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,r,e,i)}},A.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement;o instanceof y&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof d&&this._trackTimer.active&&this._trackTimer.move(e,i)},A.prototype._doMouseUp=function(t){this._clickElement&&(this._clickElement.pressed=!1,this._clickElement=null),this._buttonTimer.stop(),this._trackTimer.stop()},A);function A(t){var e=L.call(this,t,"scrollTool")||this;return e._buttonTimer=new D,e._trackTimer=new T,e._thumbTracker=new I(t),e}e.ScrollTool=M});t(St);St.ScrollEventType,St.ScrollEdge,St.ScrollTrack,St.ScrollButton,St.ScrollThumb,St.ScrollBar,St.ScrollThumbTracker,St.ScrollButtonTimer,St.ScrollTrackTimer,St.ScrollTool;var Dt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,a=(r=dt.SelectableCellElement,i(n,r),Object.defineProperty(n.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"popupMenu",{get:function(){if(this._model&&this._model.popupMenu)return this._model.popupMenu},enumerable:!0,configurable:!0}),n.prototype._doUpdateContent=function(t,e,i){i.textContent=this._text},n.prototype._doRender=function(t){},n);function n(){var t=r.call(this,"gridHeadCellView")||this;return t._text="",t}e.GridHeadCellElement=a;var s,l=(s=ht.SimpleTableElement,i(u,s),u.prototype._doDispose=function(){this._cells=null,s.prototype._doDispose.call(this)},u.prototype.getHeadModel=function(t){for(var e=0;e<this._count;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},u.prototype._getCssSelector=function(){return"rg-head"},u.prototype._doPrepareTableExtents=function(t){for(var e=t.grid,i=0,o=0,r=0,n=t.sectionObjects;r<n.length;r++){var s=n[r];s instanceof c.RowIndicator&&e.rowIndicator.visible&&(this._cells.length<=i&&this._cells.push(new a),this._cells[i].model=e.rowIndicator,this._cells[i].width=t.indicatorWidth,this._cells[i].height=t.headBounds.height,this._cells[i].x=o,this._cells[i].y=t.headBounds.y,o+=t.indicatorWidth,i++),s instanceof p.StateBar&&e.stateBar.visible&&(this._cells.length<=i&&this._cells.push(new a),this._cells[i].model=e.stateBar,this._cells[i].width=t.stateBarWidth,this._cells[i].height=t.headBounds.height,this._cells[i].x=o,this._cells[i].y=t.headBounds.y,o+=t.stateBarWidth,i++),s instanceof U.CheckBar&&e.checkBar.visible&&(this._cells.length<=i&&this._cells.push(new a),this._cells[i].model=e.checkBar,this._cells[i].width=t.checkBarWidth,this._cells[i].height=t.headBounds.height,this._cells[i].x=o,this._cells[i].y=t.headBounds.y,o+=t.checkBarWidth,i++)}this._count=i},u.prototype._prepareCellContent=function(t){return document.createElement("div")},u.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count;this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var o=0;o<i;o++){var r=this.getChild(o),n=this._cells[o].model,s=n.getHeadCell(),a=this._getTableCell(0,o),l=this.$_getCellSelector()+" "+n.getHeadCellSelector();z.Utils.setClassName(a,l),r.text=n.headText,r.updateCell(e,s,this.getCellContent(0,o))}},u.prototype._doRender=function(t){},u.prototype._getTableRowCount=function(t){return 1},u.prototype._getTableRowHeight=function(t,e){return this.height},u.prototype._getCellCount=function(t){return this._count},u.prototype._getCellWidth=function(t,e){return this._cells[e].width},u.prototype.$_getCellSelector=function(){return u.CELL_CSS},u.CELL_CSS="rg-head-cell",u);function u(){var t=s.call(this,null,"gridHeadView")||this;return t._cells=[],t._count=0,t}e.GridHeadElement=l});t(Dt);Dt.GridHeadCellElement,Dt.GridHeadElement;var Rt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=dt.SelectableCellElement,i(s,r),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._changed())},enumerable:!0,configurable:!0}),s.prototype._doUpdateContent=function(t,e,i){i.textContent=this.text},s.prototype._doRender=function(t){},s);function s(){var t=r.call(this,"gridHeadCellView")||this;return t._text="",t}e.GridFootCellElement=n;var a,l=(a=ht.SimpleTableElement,i(u,a),u.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},u.prototype._getCssSelector=function(){return"rg-foot"},u.prototype._doPrepareTableExtents=function(t){var e=t.grid,i=0;e.rowIndicator.visible&&(i+=t.indicatorWidth),e.stateBar.visible&&(i+=t.stateBarWidth),e.checkBar.visible&&(i+=t.checkBarWidth),0<i&&(0==this._cells.length&&this._cells.push(new n),this._cells[0].width=i),this._count=0<i?1:0},u.prototype._prepareCellContent=function(t){return document.createElement("div")},u.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count;this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var o=0;o<i;o++){var r=this.getChild(o),n=e.rowIndicator.getFootCell(),s=this._getTableCell(0,o),a=this.$_getCellSelector();z.Utils.setClassName(s,a),r.text=e.footers.get(0).headText,r.updateCell(e,n,this.getCellContent(0,o))}},u.prototype._doRender=function(t){},u.prototype._getTableRowCount=function(t){return 1},u.prototype._getTableRowHeight=function(t,e){return this.height},u.prototype._getCellCount=function(t){return this._count},u.prototype._getCellWidth=function(t,e){return this._cells[e].width},u.prototype.$_getCellSelector=function(){return u.CELL_CSS},u.CELL_CSS="rg-foot-cell",u);function u(){var t=a.call(this,null,"gridFootView")||this;return t._cells=[],t._count=0,t}e.GridFootElement=l});t(Rt);Rt.GridFootCellElement,Rt.GridFootElement;var Pt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?new k.DateTimeWriter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?new L.DecimalFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?new M.BooleanFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),s.prototype.getNumberFormatter=function(t){return t||this._numberFormatter},s.prototype.getDateWriter=function(t){return t||this._datetimeWriter||k.DateTimeWriter.Default},s.prototype.getBoolFormatter=function(t){return t||this._boolFormatter},s);function s(t){return r.call(this,t)||this}e.FormatOptions=n});t(Pt);Pt.FormatOptions;var Tt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this,t)||this;return e._enabled=!0,e._style=W.SortStyle.EXCLUSIVE,e._handleVisibility=W.HandleVisibility.VISIBLE,e._commitBeforeSorting=!0,e._keepFocusedRow=!1,e._textCase=W.SortCase.SENSITIVE,e._showSortOrder=!1,e._pageSorting=!1,e}e.SortingOptions=n});t(Tt);Tt.SortingOptions;var kt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=nt.LayerElement,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof ue.GridBase)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),s.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},s.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},s.prototype._doMeasure=function(t,e,i){return new lt.Size(e,i)},s.prototype._doLayoutContent=function(t,e,i){},s);function s(t){return void 0===t&&(t=null),r.call(this,t)||this}e.ContentPane=n;var a,l=(i(u,a=n),u.prototype._initDom=function(t){a.prototype._initDom.call(this,t),t.style.setProperty("background","#fff","important")},u);function u(){return null!==a&&a.apply(this,arguments)||this}e.LeftContentPane=l;var h,c=(i(p,h=n),p);function p(){return null!==h&&h.apply(this,arguments)||this}e.DataContentPane=c;var d,_=(d=nt.LayerElement,i(f,d),f.prototype._getCssSelector=function(){return"rg-fixed-column-bar"},f);function f(){return null!==d&&d.apply(this,arguments)||this}var y,m=(i(g,y=c),g.prototype._doDispose=function(){y.prototype._doDispose.call(this)},g.prototype._doLayoutContent=function(t,e,i){this._barView||(this._barView=this._createBars(),this.addChild(this._barView),this._barView2=this._createBars(),this.addChild(this._barView2)),this._layoutBars(t,e,i),y.prototype._doLayoutContent.call(this,t,e,i)},g.prototype._createBars=function(){return new _("fixedColumnBar")},g.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,r=t.footBounds.isEmpty?0:t.footBounds.height;if(this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,n),0<r&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-r,o,r))}},g);function g(t){return void 0===t&&(t=null),y.call(this,t)||this}e.FixedContentPane=m;var b,v=(b=nt.LayerElement,i(C,b),C.prototype._getCssSelector=function(){return"rg-right-column-bar"},C);function C(){return null!==b&&b.apply(this,arguments)||this}var w,E=(i(x,w=m),x.prototype._createBars=function(){return new v("rightColumnBar")},x.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,r=t.footBounds.isEmpty?0:t.footBounds.height;if(this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(0,0,o,n),0<r&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-r,o,r))}},x);function x(){return null!==w&&w.apply(this,arguments)||this}e.RightContentPane=E;var I,O=(i(S,I=n),Object.defineProperty(S.prototype,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())},enumerable:!0,configurable:!0}),S.prototype._getCssSelector=function(){return"rg-waiting"},S.prototype._doLayoutContent=function(t,e,i){I.prototype._doLayoutContent.call(this,t,e,i)},S);function S(t){void 0===t&&(t=null);var e=I.call(this,t)||this;return e.visible=!1,e}e.WaitingPane=O;var D,R=(i(P,D=n),Object.defineProperty(P.prototype,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())},enumerable:!0,configurable:!0}),P.prototype._getCssSelector=function(){return"rg-message-pane"},P.prototype._doLayoutContent=function(t,e,i){D.prototype._doLayoutContent.call(this,t,e,i)},P);function P(t){void 0===t&&(t=null);var e=D.call(this,t)||this;return e.visible=!1,e}e.MessagePane=R});t(kt);kt.ContentPane,kt.LeftContentPane,kt.DataContentPane,kt.FixedContentPane,kt.RightContentPane,kt.WaitingPane,kt.MessagePane;var Lt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i,u=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],p=[".","/","-",":"],d="0".charCodeAt(0),_="9".charCodeAt(0),r=[31,28,31,30,31,30,31,31,30,31,30],f=["am","pm","AM","PM","Am","Pm","aM","pM"];(i=o=e.DateProperty||(e.DateProperty={}))[i.YEAR=0]="YEAR",i[i.HALF=1]="HALF",i[i.QUARTER=2]="QUARTER",i[i.MONTH=3]="MONTH",i[i.WEEK=4]="WEEK",i[i.DAY=5]="DAY",i[i.HOUR=6]="HOUR";var n=(s.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,r=parseInt(e[2]);return i==(t=new Date(i,o,r)).getFullYear()&&o==t.getMonth()&&r==t.getDate()?t:null},s.getDateProperty=function(t,e){if(!t)return null;switch(e){case o.YEAR:return t.getFullYear();case o.HALF:return 5<t.getMonth()?2:1;case o.QUARTER:return Math.floor(t.getMonth()/3);case o.MONTH:return t.getMonth();case o.WEEK:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case o.DAY:return t.getDate();case o.HOUR:return t.getHours()}},Object.defineProperty(s.prototype,"formatString",{get:function(){return this._formatString},set:function(t){t!=this._formatString&&(this._formatString=t,this.parse(t))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),s.prototype.getDate=function(t){var e;if(t=t.trim()){for(var i=this.parseDateFormatTokens(this._format),o=this.parseDateValueTokens(t,this._amText,this._pmText),r=(0<=i.indexOf("a")||i.indexOf("A"),i.length),n=o.length,s=0,a=1,l=1,u=0,h=0,c=0,p=0,d=0,_=0,f=0;_<r&&f<n;){var y=i[_],m=o[f];switch(y.charAt(0)){case"L":var g=String(m);for(_++;_<r&&"E"!=(t=i[_]);){var b=g?parseInt(g.substr(0,t.length)):-1;switch(g=g.substr(t.length),t.charAt(0)){case"Y":case"y":s=Math.max(0,b);break;case"M":a=0<=b?b:1;break;case"D":case"d":l=0<=b?b:1;break;case"H":case"h":u=Math.max(0,b);break;case"m":h=Math.max(0,b);break;case"s":c=Math.max(0,b)}_++}break;case"Y":case"y":s=parseInt(m);break;case"M":a=parseInt(m);break;case"D":case"d":l=parseInt(m);break;case"H":case"h":u=parseInt(m);break;case"m":h=parseInt(m);break;case"s":c=parseInt(m);break;case"a":(t=String(m))&&(t=t.toLowerCase(),this._amText&&t==this._amText.toLowerCase()||"am"==t?p=12:(this._pmText&&t==this._pmText.toLowerCase()||"pm"==t)&&(d=12))}_++,f++}if(s<100&&0<=s&&(s+=this._baseYear),s<0||9999<s)return null;if(z.Utils.included(a,1,3,5,7,8,10,12)){if(l<1||31<l)return null}else if(z.Utils.included(a,4,6,9,11)){if(l<1||30<l)return null}else{if(2!=a)return null;if(29<l)return null;if(29==l&&(s%4!=0||s%100==0)&&s%400!=0)return null}if(u<0||24<u)return null;if((0<p||0<d)&&12<u)return null;if(h<0||59<h)return null;if(c<0||59<c)return null;0<p?u%=12:0<d&&(u=u%12+12),e=new Date(s,a-1,l,u,h,c)}return e},s.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},s.prototype.getText=function(t){var e=t;e instanceof Date||(e=new Date(t));for(var i=this.parseDateFormatTokens(this._format),o=0<=i.indexOf("a")||0<=i.indexOf("A"),r="",n=0,s=i.length;n<s;n++){var a=i[n],l=a.length;switch(a.charAt(0)){case"L":break;case"Y":case"y":r+=2<l?e.getFullYear():z.Utils.pad(e.getFullYear()%100);break;case"M":r+=1<l?z.Utils.pad(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":r+=1<l?z.Utils.pad(e.getDate()):e.getDate();break;case"H":r+=1<l?z.Utils.pad(e.getHours()):e.getHours();break;case"h":if(o){var u=e.getHours();0==u?u=12:12<u&&(u-=12),r+=1<l?z.Utils.pad(u):u}else r+=1<l?z.Utils.pad(e.getHours()):e.getHours();break;case"m":r+=1<l?z.Utils.pad(e.getMinutes()):e.getMinutes();break;case"s":r+=1<l?z.Utils.pad(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?r+=this._amText:r+=this._pmText;break;default:r+=a}}return r},s.prototype.daysOfYear=function(t){for(var e=0,i=0;i<t.getMonth();i++)e+=r[i];if(2<=t.getMonth()){var o=t.getFullYear();(o%400==0||o%4==0&&o%100!=0)&&e++}return e+=t.getDate()},s.prototype.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},s.prototype.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,i=this.daysOfPriorYears(t.getFullYear())+this.daysOfYear(t)+e;return 60<=i&&i++,i},s.prototype.splitWords=function(t){for(var e=t.length,i=[],o=0,r=0,n=t.charAt(r++);r<e;){var s=t.charAt(r);s!=n&&(i.push(t.substring(o,r)),n=s,o=r),r++}return o<e&&i.push(t.substr(o)),i},s.prototype.parseDateFormatTokens=function(t){var e=[],i=t&&t.trim();if(i){for(var o=i.length,r=0;r<o;){var n=i.charAt(r);if(0<=p.indexOf(n))e.push(n),r++;else{for(var s=r++;r<o&&i.charAt(r)==n;)r++;if(n=i.substring(s,r),u.indexOf(n)<0)throw new Error("Invalid datetime read format: "+t);e.push("A"==n?"a":n)}if(r<o&&z.Utils.isWhiteSpace(n=i.charAt(r)))for(e.push(" ");r<o&&z.Utils.isWhiteSpace(i.charAt(r));)r++}var a=[],l=0;for(o=e.length,r=0;r<o;r++)"a"==(n=e[r])||u.indexOf(n)<0?(1<l&&a.push("E"),a.push(n),l=0):(1==l&&a.splice(a.length-2,0,"L"),a.push(n),l++);e=a}return e},s.prototype.parseDateValueTokens=function(t,e,i){var o=[],r=t.trim();if(r){var n=f.slice();e&&n.push(e),i&&n.push(i);for(var s=r.length,a=0;a<s;){var l=r.charAt(a);if(0<=p.indexOf(l))o.push(l),a++;else if(l.charCodeAt(0)>=d&&l.charCodeAt(0)<=_){for(var u=a++;a<s&&r.charCodeAt(a)>=d&&r.charCodeAt(a)<=_;)a++;l=r.substring(u,a),o.push(l)}else{for(var h=-1,c=0;c<n.length;c++)if(r.indexOf(n[c],a)==a){h=c;break}if(h<0)throw"Invalid date value: "+r;o.push(n[c]),a+=n[c].length}if(a<s&&z.Utils.isWhiteSpace(l=r.charAt(a)))for(o.push(" ");a<s&&z.Utils.isWhiteSpace(r.charAt(a));)a++}}return o},s.prototype.validateDateFormat=function(t){if(t=t&&t.trim()){var e=this.parseDateFormatTokens(t),i=0<=e.indexOf("a");if(i&&0<=e.indexOf("H"))throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(0<=e.indexOf("h")&&!i)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}},s.prototype.parse=function(t){if(this._amText="am",this._pmText="pm",this._baseYear=2e3,this._preserveTime=!1,t){var e=t.split(";");if(this._format=e[0]?e[0]:s.DEFAULT_FORMAT,this.validateDateFormat(this._format),1<e.length&&e[1]&&(this._baseYear=parseInt(e[1])),2<e.length&&e[2]){var i=e[2].split(",");this._amText=i[0]?i[0]:"am",1<i.length&&(this._pmText=i[1]?i[1]:"pm")}3<e.length&&(this._preserveTime=!!e[3]&&"1"==e[3])}},s.Default=new s(s.DEFAULT_FORMAT="yyyy/MM/dd"),s);function s(t){this._baseYear=2e3,this._preserveTime=!1,this.formatString=t}e.DateTimeConverter=n});t(Lt);Lt.DateProperty,Lt.DateTimeConverter;var Mt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=z.Utils.isSafari?1:0,h="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er",s="Tahoma",a=(r=j.EventAware,i(l,r),l.prototype._doDispose=function(){this._editor&&this._editor.parentElement.removeChild(this._editor),this._editor=null,this._container&&this._container.parentElement.removeChild(this._container),this._container=null,this._grid=null,this._controller=null,r.prototype._doDispose.call(this)},Object.defineProperty(l.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){t!=this._fontFamily&&(this._fontFamily=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t!=this._fontSize&&(this._fontSize=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dateTimeFormat",{get:function(){return this._dateTimeFormat},set:function(t){t!=this._dateTimeFormat&&((this._dateTimeFormat=t)?(this._saveDateConverter||(this._saveDateConverter=new Lt.DateTimeConverter(t)),this._saveDateConverter.formatString=t,this._dateConverter=this._saveDateConverter):this._dateConverter=Lt.DateTimeConverter.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&((this._booleanFormat=t)?(this._saveBoolConverter||(this._saveBoolConverter=new R.BooleanConverter(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=R.BooleanConverter.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>n&&parseInt(this._container.style.height)>n},enumerable:!0,configurable:!0}),l.prototype.setVisible=function(t,e){if(t){var i=void 0;(i=this._fontFamily?this._fontFamily:s)!=this._editor.style.fontFamily&&(this._editor.style.fontFamily=i),(i=this._fontSize?this._fontSize:"10pt")!=this._editor.style.fontSize&&(this._editor.style.fontSize=i)}this._editor instanceof HTMLInputElement&&(t&&this._editor.value==h?this._editor.value="":t||null!=this._editor.value&&null!=this._editor.value&&""!=this._editor.value||(this._editor.value=h,this._grid.$_editFocused&&this.selectAll())),t||(this._container.style.width=n+"px",this._container.style.height=n+"px")},Object.defineProperty(l.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){this._editor instanceof HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editing",{get:function(){return this._started},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"hasButton",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"value",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"listing",{get:function(){return!1},enumerable:!0,configurable:!0}),l.prototype.applyOptions=function(t){},l.prototype.setEditIndex=function(t){this._editIndex.assign(t)},l.prototype.setController=function(t){this._controller=t},l.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},l.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},l.prototype.isEdited=function(){return!1},l.prototype.caretToLast=function(){},l.prototype.commit=function(){this._doCommit()},l.prototype.setReadOnly=function(t){},l.prototype.getEditValue=function(t,e){},l.prototype.setEditValue=function(t){this._oldValue=t},l.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},l.prototype.getEditText=function(){return""},l.prototype.selectAll=function(){this._grid.$_editFocused&&this._selectAll()},l.prototype.clear=function(){this._editor instanceof HTMLInputElement&&(this._editor.value="")},l.prototype.setFocus=function(t){void 0===t&&(t=!1),this._editor.focus({preventScroll:!t})},l.prototype.setEditorTitle=function(t){},l.prototype.setBounds=function(t,e,i,o){},l.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},l.prototype.closeList=function(t){},l.prototype.dropDownList=function(t){},l.prototype.buttonClicked=function(t){},l.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.dateTimeFormat=null,this._textCase=W.TextInputCase.DEFAULT,this._fontFamily=null,this._fontSize=null,this._checkHangeul=!1},l.prototype.$_setEditorId=function(t){},l.prototype._changed=function(){},l.prototype.$_setController=function(t){this._controller=t},l.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},l.prototype._isDateEditor=function(){return!1},l.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},l.prototype._valToStr=function(e){var t=this.editIndex,i="";try{if(void 0!==e||this._mask){var o=t.grid.dataSource.getField(t.dataField);if(o)switch(o.dataType){case W.ValueType.DATETIME:e&&(i=this._dateConverter.getText(e)),this._mask&&(i=this._mask.writeBuffer(i));break;case W.ValueType.BOOLEAN:i=this._boolConverter.toText(e);break;case W.ValueType.NUMBER:isNaN(e)||(i=z.Utils.toStr(e));break;case W.ValueType.OBJECT:var r=t.column,n=t.dataRow,s=r._objectKey,a=r._objectCallback;e&&(i=a&&"function"==typeof a?a(o.orgFieldName,n,e):s&&e.hasOwnProperty(s)?e[s]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:i=this._mask?this._mask.writeBuffer(e):e}else i=e}}catch(t){i=e}return null===i?"":i},l.prototype._strToVal=function(t){t=z.Utils.toStr(t);var e=this._editIndex,i=e.dataColumn&&this._textCase==W.TextInputCase.DEFAULT?e.dataColumn.textInputCase:this._textCase;try{var o=e.grid.dataSource.getField(e.dataField);if(o){var r=o.dataType;if(r==W.ValueType.DATETIME||t&&this._isDateEditor()&&r==W.ValueType.TEXT){var n=r==W.ValueType.DATETIME,s=null;return t&&t==this._nowChar&&(s=new Date),!s&&t&&t==this._todayChar&&(s=new Date).setHours(0,0,0,0),s||(this._mask&&(t=this._mask.getStripValue()),s=this._dateConverter.getDate(t)),n?!s||isNaN(s.getFullYear())?void 0:s:s?this._dateConverter.getText(s):void 0}if(r==W.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(t);if(r==W.ValueType.NUMBER)return parseFloat(t);r==W.ValueType.TEXT&&this._mask&&(t=this._mask.getStripValue())}return i===W.TextInputCase.UPPER?t?t.toLocaleUpperCase():t:i===W.TextInputCase.LOWER&&t?t.toLocaleLowerCase():t}catch(t){return}},l.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},l.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},l.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},l.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},l.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},l.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},l.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},l.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var o=z.Utils.isMac&&t.metaKey||!z.Utils.isMac&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var r=this._controller._grid,n=r.editOptions;if(n.imaxLengthToNextCell){var s=n.skipReadOnly,a=r.activeTool,l=this.maxLength,u=this.editIndex.clone(),h=z.Utils.included(t.keyCode,W.Keys.UP,W.Keys.PAGEUP,W.Keys.DOWN,W.Keys.PAGEDOWN,W.Keys.F2,W.Keys.TAB,W.Keys.ENTER);if(!this._checkHangeul&&!h&&!o&&!t.altKey&&r&&r.isEditing(u)&&0<l&&!this._composing&&47<t.keyCode&&l<=this._editor.value.length)return u.right(),s&&a.checkReadOnly(u)&&(a.skipReadOnly(u,1)||(u=this.editIndex.clone())),X.CellIndex.areEquals(u,this.editIndex)||a.setFocused(u,!0),!0}}catch(t){if(t instanceof $.ValidationError)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},l.Unselected={},l.InvalidFormat={},l);function l(t,e){var i=r.call(this)||this;if(i._textCase=W.TextInputCase.DEFAULT,i._readOnly=!1,i._editorBorder="2px solid rgb(82, 146, 247)",i._editorShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",i._started=!1,i._dateConverter=Lt.DateTimeConverter.Default,i._boolConverter=R.BooleanConverter.Default,i._cellBounds=new K.Rectangle,i._checkHangeul=!1,i._composing=!1,i._grid=t,i._parentElement=e,i._editor=i._createEditor(e),(i._editor.$_owner=i)._editIndex=t.getIndex(),i._editor){var o=t.container;o.$_addListener(i._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),o.$_addListener(i._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),o.$_addListener(i._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1),o.$_addListener(i._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1)}return i.setVisible(!1,!0),i.$_setEditorId(i._editor),i}e.CellEditor=a;var u,c=(u=ce.Base,i(p,u),p.prototype._doDispose=function(){this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,u.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())},enumerable:!0,configurable:!0}),p.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},p.prototype.clearBuffer=function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},p.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,r=this._tests.length;i<r;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var n=void 0;n=t[o++];)if(this._tests[i].test(n)){this._buffer[i]=n,this._defBuffer[i]=n;break}}return this._buffer&&this._buffer.join("")},p.prototype.getStripValue=function(){var t=[],e=[];if(this.allowEmpty,""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var r=this._buffer[i];!this._tests[i]||this._tests[i].test(r)?t.push(r):r==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])?(0<e.length&&(t=t.concat(e),e=[]),t.push(this._buffer[i])):this._tests[i]&&"function"==typeof this._tests[i]&&(0<e.length&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},p.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),t.showInvlidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overWrite&&(this._overwrite=!!t.overWrite),null!=t.allowEmpty&&(this._allowEmpty=!!t.allowEmpty),void 0!==t.restrictNull&&(this._restrictNull=!!t.restrictNull),this._restrictNull){var e=this._editor._editor;e.onclick||(e.onclick=this.clickHandler.bind(this))}},p.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},p.prototype._changed=function(){},p.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=0<arguments.length?t:i.selectionStart,r=e=1<arguments.length?e:i.selectionEnd,n=t-1;0<=n;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){o=n+1;break}o=n}for(n=e-1;0<=n;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){r=n+1;break}r=n}if(o==t&&r==e)return o!=t||r!=e;for(n=o;n<=t&&!this._tests[n];n++)o++;for(n=r;n<=e&&!this._tests[n];n++)r++;return i.setSelectionRange(o,r),!0},p.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},p.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},p.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var r=0,n=o.length;r<n;r++)e.push(i[o[r]]),this._buffer.push(i[o[r]]?this.$_getPlaceHolder(r):o[r])},p.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},p.prototype.$_seekPrev=function(t){for(;0<=--t&&!this._tests[t];);return t},p.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},p.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(0<=t)for(var r=t,n=this.$_seekNext(e);r<i;r++)if(this._tests[r]){if(!(n<i&&this._tests[r].test(o[n])))break;o[r]=o[n],this._defBuffer[r]=this._defBuffer[n],o[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}},p.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,r=this._buffer,n=t,s=this.$_getPlaceHolder(t);n<o;n++)if(this._tests[n]){if(e=this.$_seekNext(n),i=r[n],this._defBuffer[n]=s,r[n]=s,!(e<o&&this._tests[e].test(i)))break;s=i}},p);function p(t,e){var i=u.call(this)||this;return i._includedFormat=!1,i._showInvalidFormatMessage=!0,i._overwrite=!1,i._allowEmpty=!1,i._restrictNull=!1,i._definitions={9:new RegExp("[0-9 ]"),0:new RegExp("[0-9]"),a:new RegExp("[A-Za-z]"),"*":new RegExp("[A-Za-z0-9]")},i._tests=null,i._editor=t,i}e.EditMask=c;var d,_=(i(f,d=a),f.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(t){t!=this._textAlignment&&(this._textAlignment=t,this.$_resetStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())},enumerable:!0,configurable:!0}),f.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new c(this,t))},f.prototype.setAlignment=function(t){this._container.style.textAlign="left"},Object.defineProperty(f.prototype,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t},enumerable:!0,configurable:!0}),f.prototype.isEdited=function(){return this._modified},f.prototype._createContainer=function(){var t=document.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.zIndex="2000",e.boxSizing="border-box",e.overflow="hidden",e.border="none",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",e.backgroundColor="#fff",e.border="none",e.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",e.resize="none",t},f.prototype._createEditor=function(t){this._container=this._createContainer(),t.appendChild(this._container);var e=document.createElement("input"),i=e.style;e.setAttribute("aria-hidden","true"),e.autocomplete="off",i.position="absolute",i.boxSizing="border-box",i.margin="0px",i.padding="0px",i.fontFamily=s,i.fontStyle="normal",i.fontVariant="normal",i.fontWeight="normal",i.fontSize="10pt",i.lineHeight="normal",i.wordWrap="normal",i.overflow="hidden",i.resize="none",i.border="none",i.outline="none",i.textAlign="left",i.color="rgb(68, 84, 106)",i.left="0px",i.top="0px",i.width="100%",i.height="100%",i.imeMode="auto",i.cursor="text",i["-webkit-user-modify"]="read-write-plaintext-only",i["white-space"]="pre",i["-webkit-transform"]="translateZ(0)",e.tabIndex=-1,e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.oninput=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncopy=this._copyHandler.bind(this);var o=this._grid.container;return o.$_addListener(e,"compositionstart",this._compositionstartHandler.bind(this),!1),o.$_addListener(e,"compositionupdate",this._compositionupdateHandler.bind(this),!1),o.$_addListener(e,"compositionend",this._compositionendHandler.bind(this),!1),o.$_addListener(e,"text",this._textHandler.bind(this),!1),this._container.appendChild(e),this._defMaxLength=0<e.maxLength?e.maxLength:1e6,e},f.prototype.initOptions=function(){d.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._maxLength=0,this._mask&&(this._mask.dispose(),this._mask=null),this.textAlignment=W.Alignment.NEAR},f.prototype._selectAll=function(){this._editor.select()},f.prototype._doBeginEdit=function(){return this._modified=!1,this.visible&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},f.prototype._doEndEdit=function(){this._modified=!1},f.prototype.caretToLast=function(){var t=z.Utils.toStr(this._editor.value).length;this._editor.setSelectionRange(t,t)},f.prototype._doCommit=function(){},f.prototype.setEditIndex=function(t){d.prototype.setEditIndex.call(this,t),t&&t.grid;var e=t.valueColumn;if(e){switch(this._textCase==W.TextInputCase.DEFAULT?e.textInputCase:this._textCase){case W.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case W.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=0<this._maxLength?this._maxLength:this._defMaxLength}},f.prototype.setEditValue=function(t){d.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},f.prototype.setCellEditValue=function(t,e){d.prototype.setCellEditValue.call(this,t,e)},f.prototype.getEditValue=function(e,t){void 0===e&&(e=!0);var i=this._editField(),o=this._emptyValue;try{var r=i.dataType,n=this._editor.value;if(r==W.ValueType.TEXT)n||void 0===this._emptyValue||(n=this._emptyValue),void 0===(o=this._strToVal(n))&&(o="");else if(z.Utils.isWhiteSpace(n))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(r){case W.ValueType.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case W.ValueType.DATETIME:null===this._oldValue&&(o=null);break;case W.ValueType.BOOLEAN:}else o=this._strToVal(n);if(o===a.InvalidFormat)return o;o=i.readValue(o)}catch(t){if(e)throw t;o=this._emptyValue}return o},f.prototype.getEditText=function(){return this._editor.value},f.prototype.setVisible=function(t,e){if(d.prototype.setVisible.call(this,t,e),t&&this._borderable){var i=this._editorBorder;this._container.style.border=i,this._container.style["box-shadow"]=this._editorShadow}else this._container.style.border="none",this._container.style["box-shadow"]="none";if(z.Utils.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},f.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange())},f.prototype.setBounds=function(t,e,i,o){z.Utils.setBounds(this._container,t,e,i,o)},f.prototype._keyDownHandler=function(t){var e=this._editor,i=t.keyCode;if((z.Utils.isIE||z.Utils.isEdge)&&!this.visible&&t.ctrlKey&&i==W.Keys.Z)return!1;if(z.Utils.isIE&&t.ctrlKey&&t.keyCode==W.Keys.V&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;switch(this._inputValue=e.value,i){case W.Keys.BACK:case W.Keys.DELETE:this._sendToParent(t)||(!this.visible&&this._requestStart()?!e.readOnly&&this._controller._getData(this._editIndex)&&(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),i===W.Keys.BACK&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case W.Keys.TAB:return!this._sendToParent(t);case W.Keys.LEFT:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&z.Utils.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case W.Keys.RIGHT:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&z.Utils.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var o=e.selectionStart;this._mask._moveCaret(o+1,o+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case W.Keys.HOME:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case W.Keys.END:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var r=e.value?e.value.length-1:0;this._mask._moveCaret(r,r)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case W.Keys.SPACE:if(!this.visible)return!this._sendToParent(t);break;case W.Keys.UP:case W.Keys.PAGEUP:case W.Keys.DOWN:case W.Keys.PAGEDOWN:case W.Keys.ENTER:case W.Keys.ESCAPE:case W.Keys.F2:case W.Keys.INSERT:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return z.Utils.isFirefox?!t.ctrlKey&&!t.altKey&&(0==i||32<=i)&&(i<112||130<i)&&this._requestStart():z.Utils.isIE,!0},f.prototype._keyUpHandler=function(t){var e=t.keyCode;switch(e!=W.Keys.BACK&&e!=W.Keys.DELETE||z.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case W.Keys.LEFT:case W.Keys.RIGHT:case W.Keys.HOME:case W.Keys.END:case W.Keys.SPACE:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}},f.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode;this._sendToParent(t,2),z.Utils.isFirefox?t.ctrlKey||t.altKey||!(0==e||32<=e)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):32<=e&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())},f.prototype._textHandler=function(){this._requestStart()},f.prototype._compositionstartHandler=function(t){this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0)},f.prototype._compositionendHandler=function(){this._composing=!1},f.prototype._compositionupdateHandler=function(){this._composing=!0},f.prototype._changeHandler=function(t){},f.prototype._inputHandler=function(t){if(z.Utils.ieTen){if(this._editor.value==h)return;if((null==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}this._mask&&this._mask.input(t),this._doChanged()},f.prototype._pasteHandler=function(t){if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof $.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof $.AbortError)alert(t.message);else if(t)throw t}}},f.prototype._copyHandler=function(t){if(!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},f.prototype.$_resetStyle=function(){var t="left";switch(this._textAlignment){case W.Alignment.FAR:t="right";break;case W.Alignment.CENTER:t="center"}this._editor.style["text-align"]=t},f);function f(){var t=null!==d&&d.apply(this,arguments)||this;return t._maxLength=0,t._borderable=!0,t._modified=!1,t}e.TextCellEditor=_;var y,m=(i(g,y=_),g.prototype._createEditor=function(t){var e=y.prototype._createEditor.call(this,t);return e.tabIndex=z.Utils.isMobile?-1:0,e},g);function g(t,e){return y.call(this,t,e)||this}e.LineCellEditor=m;var b,v=(i(C,b=_),C.prototype._createEditor=function(t){var e=b.prototype._createEditor.call(this,t);return e.setAttribute("type","password"),e.tabIndex=z.Utils.isMobile?-1:0,e},C);function C(t,e){return b.call(this,t,e)||this}e.PasswordCellEditor=v;var w,E=(i(x,w=a),x.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,w.prototype._doDispose.call(this)},Object.defineProperty(x.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"text",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),x.prototype.setAlignment=function(t){this._container.style.textAlign="left"},x.prototype.isEdited=function(){return this._modified},x.prototype.initOptions=function(){w.prototype.initOptions.call(this),this._maxLength=0,this._minHeight=0,this.setReadOnly(!1)},x.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},x.prototype._selectAll=function(){this._editor.select()},x.prototype._doBeginEdit=function(){return this._modified=!1,this.visible&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},x.prototype._doEndEdit=function(){this._modified=!1},x.prototype._doCommit=function(){},x.prototype.setEditIndex=function(t){switch(w.prototype.setEditIndex.call(this,t),t&&t.grid,this._textCase==W.TextInputCase.DEFAULT?t.dataColumn.textInputCase:this._textCase){case W.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case W.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=0<this._maxLength?this._maxLength:2e9},x.prototype.setEditValue=function(t){w.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},x.prototype.setCellEditValue=function(t){},x.prototype.getEditValue=function(e,t){void 0===e&&(e=!0);var i=this._editField(),o=i.nullValue;try{var r=i.dataType,n=this._editor.value;if(r==W.ValueType.TEXT)n||void 0===this._emptyValue||(n=this._emptyValue),void 0===(o=this._strToVal(n))&&(o="");else if(z.Utils.isWhiteSpace(n))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(r){case W.ValueType.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case W.ValueType.DATETIME:null===this._oldValue&&(o=null);break;case W.ValueType.BOOLEAN:}else o=this._strToVal(n);o=i.readValue(o)}catch(t){if(e)throw t}return o},x.prototype.getEditText=function(){return this._editor.value},x.prototype.setVisible=function(t,e){w.prototype.setVisible.call(this,t,e)},x.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},x.prototype.$_resetBounds=function(){var t=z.Utils.getClientRect(this._container),e=t.cx,i=t.cy,o=t.width,r=Math.round(t.height),n=this._editor.value==h;!n&&this._editor.scrollWidth>o&&(o=this._editor.scrollWidth+6),!n&&this._editor.scrollHeight>r&&(r=this._editor.scrollHeight+6);var s=isNaN(this._minHeight)?0:this._minHeight;0<s&&(r=Math.max(r,s)),t=z.Utils.getClientRect(this._parentElement),o=Math.min(t.width,o),r=Math.min(t.height,r),e+o>t.width&&(e=t.width-o),i+r>t.height&&(i=t.height-r),z.Utils.setBounds(this._container,Math.max(e,0),Math.max(i,0),o,r)},x.prototype.$_createContainer=function(){var t=document.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.zIndex="2000",e.boxSizing="border-box",e.overflow="hidden",e.border="none",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",e.backgroundColor="#fff",e.border="none",e.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",e.resize="none",t},x.prototype._createEditor=function(t){this._container=this.$_createContainer(),t.appendChild(this._container);var e=document.createElement("textarea"),i=e.style;e.autocomplete="off",e.setAttribute("aria-hidden","true"),i.position="absolute",i.margin="0px",i.padding="0px",i.fontFamily=s,i.fontStyle="normal",i.fontVariant="normal",i.fontWeight="normal",i.fontSize="10pt",i.lineHeight="normal",i.wordWrap="normal",i.overflow="hidden",i.resize="none",i.border="none",i.outline="none",i.textAlign="left",i.color="rgb(68, 84, 106)",i.left="0px",i.top="0px",i.width="100%",i.height="100%",i.imeMode="auto",i.cursor="text",i["-webkit-user-modify"]="read-write-plaintext-only",i["white-space"]="pre",i["-webkit-transform"]="translateZ(0)",e.tabIndex=-1,e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.oninput=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncopy=this._copyHandler.bind(this);var o=this._grid.container;return o.$_addListener(e,"compositionstart",this._compositionstartHandler.bind(this),!1),o.$_addListener(e,"compositionupdate",this._compositionupdateHandler.bind(this),!1),o.$_addListener(e,"compositionend",this._compositionendHandler.bind(this),!1),o.$_addListener(e,"text",this._textHandler.bind(this),!1),this._container.appendChild(e),e},x.prototype.setBounds=function(t,e,i,o){z.Utils.setBounds(this._container,t,e,i,o),t>z.Utils.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},x.prototype._textHandler=function(){this._requestStart()},x.prototype._compositionstartHandler=function(t){this._composing=!0,this._requestStart()},x.prototype._compositionendHandler=function(){this._composing=!1},x.prototype._compositionupdateHandler=function(){this._composing=!0},x.prototype._keyDownHandler=function(t){var e=this._editor,i=t.keyCode;if((z.Utils.isIE||z.Utils.isEdge)&&!this.visible&&t.ctrlKey&&i==W.Keys.Z)return!1;switch(i){case W.Keys.BACK:case W.Keys.DELETE:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case W.Keys.TAB:return!this._sendToParent(t);case W.Keys.LEFT:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case W.Keys.RIGHT:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case W.Keys.HOME:case W.Keys.END:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case W.Keys.UP:case W.Keys.PAGEUP:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case W.Keys.DOWN:case W.Keys.PAGEDOWN:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case W.Keys.SPACE:if(!this.visible)return!this._sendToParent(t);break;case W.Keys.ENTER:if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(t.ctrlKey&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&t.ctrlKey)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var o=e.value===h?"":e.value;if(o){var r=e.selectionEnd;o=o.substring(0,r)+"\r\n"+o.substring(r),e.value=o,e.setSelectionRange(r+1,r+1),this._doChanged()}}break;case W.Keys.ESCAPE:case W.Keys.F2:case W.Keys.INSERT:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0},x.prototype._keyUpHandler=function(t){var e=t.keyCode;switch(e!=W.Keys.BACK&&e!=W.Keys.DELETE||z.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case W.Keys.LEFT:case W.Keys.RIGHT:case W.Keys.HOME:case W.Keys.END:case W.Keys.SPACE:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}},x.prototype._keyPressHandler=function(t){32<=t.keyCode&&(this._requestStart()||t.preventDefault())},x.prototype._inputHandler=function(t){this._doChanged()},x.prototype._pasteHandler=function(t){if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof $.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof $.AbortError)alert(t.message);else if(t)throw t}}},x.prototype._copyHandler=function(t){if(!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},x);function x(t,e){var i=w.call(this,t,e)||this;return i._maxLength=0,i._minHeight=0,i._altEnterNewLine=!1,i._modified=!1,i}e.MultiLineCellEditor=E;var I,O=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,S=(i(D,I=_),Object.defineProperty(D.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"decSep",{get:function(){return this._decSep},set:function(t){t!=this._decSep&&(this._decSep=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"groupSep",{get:function(){return this._groupSep},set:function(t){t!=this._groupSep&&(this._groupSep=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t){var e=this._decimalFormatter=new L.DecimalFormatter(t);e&&(this._decSep=e.separator?e.separator:".",this._groupSep=e.groupSep?e.groupSep:",",this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())},enumerable:!0,configurable:!0}),D.prototype.setMask=function(t){this._mask=null},D.prototype.initOptions=function(){I.prototype.initOptions.call(this),this._decSep=".",this._groupSep=",",this.editFormat=void 0,this.positiveOnly=!1,this.integerOnly=!1},D.prototype.setEditIndex=function(t){I.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},D.prototype._inputHandler=function(t){this._editFormat&&(t.target,this.$_editFormatting(t)),I.prototype._inputHandler.call(this,t)},D.prototype._keyPressHandler=function(t){if(!z.Utils.isFirefox||!t.ctrlKey&&0!==t.charCode){var e=!0,i=String.fromCharCode(t.keyCode||t.charCode);(!this._regx.test(i)||t.target.value&&0<=t.target.value.indexOf(this._decSep)&&i==this._decSep)&&(this._multipleChar&&i===this._multipleChar||(e=!1,this.blankWhenSpace&&" "===i||t.preventDefault()));var o=t.target.selectionStart,r=t.target.selectionEnd,n=t.target.value,s=new RegExp("\\"+this._groupSep,"g"),a=n?n.split(""):[];if(a.splice(o,r-o,i===this._multipleChar?this._addString:i),a=a.join("").replace(s,""),0<this.maxLength&&e&&this.maxLengthExceptComma&&n&&n!==h&&a.length>this.maxLength&&t.preventDefault(),0<this._maxIntegerLength&&i!==this._decSep){var l=Math.floor(this.$_strToNum(a));if(!isNaN(l)){var u=Math.abs(l).toString().length;this._maxIntegerLength<u&&t.preventDefault()}}this._isMultiple=i==this._multipleChar,I.prototype._keyPressHandler.call(this,t)}else I.prototype._keyPressHandler.call(this,t)},D.prototype._keyDownHandler=function(t){var e=t.keyCode||t.charCode;if(this._isMultiple=!1,(8===e||46===e)&&this.editing&&this._editFormat){var i=t.target,o=i.value,r=o.length,n=o&&o.split(""),s=i.selectionStart,a=i.selectionEnd;if(s!==a)return I.prototype._keyDownHandler.call(this,t);var l=o[8===e?s-1:s];if(l===this._groupSep||l===this._decSep)if(l===this._decSep&&s===(8===e?o.length:o.length-1));else{n.splice(8===e?s-2:s+1,1),i.value=n.join(""),this.$_editFormatting(t);var u=i.value,h=r-(8===e?u.length:r);i.setSelectionRange(s-h,a-h),this._doChanged(),t.preventDefault()}}return I.prototype._keyDownHandler.call(this,t)},D.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),I.prototype._dispatchChange.call(this))},D.prototype.setEditValue=function(t){var e=parseFloat(t);if(isNaN(e))this._editor.value="";else if(this._editFormat&&"number"==typeof e){var i=Math.max(0,e.toString().length-Math.floor(e).toFixed().length-1,this._decimalFormatter._minDigits);this._editor.value=this.$_formatNum(e,i)}else this._editor.value=e},D.prototype.getEditValue=function(e,t){void 0===e&&(e=!0),this.$_resetValue();var i=this._editField().nullValue;try{var o=this._editor.value;if(o=o&&o.trim()){var r=new RegExp("\\"+this._groupSep,"g"),n=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(r,"")).replace(n,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=o?parseFloat(o):void 0}catch(t){if(e)throw t}return i},D.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},D.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".");var r=parseFloat(t);return isNaN(r)?NaN:o?-Math.abs(r):r},D.prototype.$_formatNum=function(t,e){var i=t;e=Math.abs(e),e=isNaN(e)?2:e;var o=i<0?"-":0==i&&1/i==-1/0?"-":"",r=parseInt(i=Math.abs(+i||0).toFixed(e)),n=r+"",s=n.length;return o+((s=3<n.length?s%3:0)?n.substr(0,s)+this._groupSep:"")+n.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(e?this._decSep+Math.abs(i-r).toFixed(e).slice(2):"")},D.prototype.$_editFormatting=function(t){this._editor;var e=t.target.value,i=e&&e[e.length-1]==this._decSep,o=t.target.selectionStart,r=t.target.selectionEnd;e=this._isMultiple&&this._addString?e.replace(/\+/g,this._addString):e,this._isMultiple&&this._addString&&(o+=this._addString.length,r+=this._addString.length);var n=e.split(this._decSep),s=0;1<n.length&&(n.length=2,n[1]=n[1].substr(0,this._decimalFormatter._maxDigits),s=n[1].length,e=n.join(this._decSep)),s=2==n.length?Math.min(n[1].length,null!=this._decLen?this._decLen:99):0;var a=this.$_strToNum(e);if(!isNaN(a)){if(0<this.maxLength||0<this.maxIntegerLength){var l=String(a).split(".");0<this.maxIntegerLength&&(l[0]=l[0].substr(0,this.maxIntegerLength));var u=l.join(".");0<this.maxLength&&(u=u.substr(0,this.maxLength)),a=parseFloat(u)}e=this.$_formatNum(a,s);var h=(e=i&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,c=t.target.value.length;1==Math.abs(h-c)&&(c<h?(o++,r++):e.indexOf(this._decSep)>=o&&(o--,r--)),t.target.value=e,t.target.setSelectionRange(o,r)}},D.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(O,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},D.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},D);function D(t,e){var i=I.call(this,t,e)||this;return i._positiveOnly=!1,i._integerOnly=!1,i._decSep=".",i._groupSep=",",i._addString="000",i._maxLengthExceptComma=!1,i._maxIntegerLength=0,i._blankWhenSpace=!1,i._regxAll=/[0-9]|,|\.|\-|\+|e|E/,i._regxPos=/[0-9]|,|\.|\+|e|E/,i._regxInt=/[0-9]|,|\+|\-/,i._regxPosInt=/[0-9]|,|\+/,i._regx=i._regxAll,i._numValue=void 0,i._decLen=void 0,i._decimalFormatter=void 0,i._isMultiple=!1,i._editor.style.imeMode="disabled",i._editor.style["-webkit-ime-mode"]="disabled",i._editor.style["-moz-ime-mode"]="disabled",i._editor.style["-ms-ime-mode"]="disabled",i}e.NumberCellEditor=S});t(Mt);Mt.CellEditor,Mt.EditMask,Mt.TextCellEditor,Mt.LineCellEditor,Mt.PasswordCellEditor,Mt.MultiLineCellEditor,Mt.NumberCellEditor;var At=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var p,r,n,s,g,a,l="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er";(r=p=e.DropDownPosition||(e.DropDownPosition={})).BUTTON="button",r.EDITOR="editor",(s=n=e.DropDownSortStyle||(e.DropDownSortStyle={})).NONE="none",s.ASCENDING="ascending",s.DESCENDING="descending",(a=g=e.DropDownValueLabel||(e.DropDownValueLabel={})).VALUE="value",a.LABEL="label",a.VALUE_LABEL="valueLabel",a.LABEL_VALUE="labelValue";var u,h=(u=j.EventAware,i(c,u),c.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,z.Utils.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,u.prototype._doDispose.call(this)},Object.defineProperty(c.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"items",{get:function(){return this._items},set:function(t){if(t!==this._items&&(this._items=[],t))for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&0<=e&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,0<=t)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems(),this._selected=!0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),c.prototype.setItemIndex=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var r=o[o.length-1];if(r.isMoreButton){var n=t-(o.length-1);n=(Math.floor(n/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(r,n)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=0<=t}},c.prototype.show=function(t,e,i,o,r){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=n.NONE&&this.$_sortItems(),this._show(e,i,o,r)},c.prototype.hide=function(){z.Utils.detach(this._element),this._containerElement=null},c.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},c.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},c.prototype._changed=function(){},c.prototype._createList=function(){var t=document.createElement("div");return t.className="rg-dropdownlist",t.onkeydown=function(t){27==t.keyCode&&this.fireEvent(c.CLOSE_UP,!1)}.bind(this),t},c.prototype.$_sortItems=function(){this._sortStyle==n.ASCENDING?this._items.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}):this._items.sort(function(t,e){return t.label>e.label?-1:t.label<e.label?1:0})},c.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",n.zIndex="3000",this._firstChild=null,z.Utils.clearChildren(r),z.Utils.disableSelection(r),this._containerElement.appendChild(r),this._cellWidth=i,this._editBounds=o,n.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},c.prototype.$_resetHeight=function(){var t=this._element;if(this._firstChild){var e=z.Utils.getClientRect(this._firstChild),i=this._firstChild.currentStyle||window.getComputedStyle(this._firstChild),o=parseInt(i.marginTop.replace("px",""));o=isNaN(o)?0:o;var r=parseInt(i.marginBottom.replace("px",""));r=isNaN(r)?0:r;var n=0<this._dropDownCount?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(e.height+o)*n+4+r+"px"}else t.style.height="10px"},c.prototype._resetWidth=function(t){var e=this._element,i=z.Utils.getClientRect(e),o=this._dropDownWidth,r=this._dropDownWidth,n=e.offsetWidth?e.offsetWidth+(z.Utils.ieOld&&"border-box"===e.style.boxSizing?17:0):0;r<0?r=t:0==r&&(r=10),e.style.width=r+"px";var s=0;if(this._firstChild){var a=this._firstChild.currentStyle||window.getComputedStyle(this._firstChild),l=parseInt(a.marginLeft.replace("px",""));l=isNaN(l)?0:l;var u=parseInt(a.marginRight.replace("px",""));u=isNaN(u)?0:u;for(var h=e.childNodes,c=0;c<h.length;c++)s=Math.max(s,h[c].scrollWidth);s+=e.offsetWidth-e.clientWidth+l+u+2}o<0&&(s=Math.max(s,r)),z.Utils.getBrowserSize(),r=s=Math.min(s,i.width),z.Utils.ieOld&&(0<=o||r<s)&&(r+=20),r<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(r,n)+"px"},c.prototype.$_resetPosition=function(t,e,i,o){var r=z.Utils.getBrowserSize(),n=z.Utils.getClientRect(this._containerElement),s=z.Utils.getClientRect(this._container._container),a=r.width,l=r.height,u=z.Utils.getClientRect(this._element),h=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(l-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=s.left-n.left,e+=s.top-n.top,(z.Utils.ieTen||z.Utils.ieOld||z.Utils.ieLeg)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+u.height>l+c&&(e=e-o.height-u.height)<0&&(e=l-u.height-2),this._dropDownPosition!=p.EDITOR?t=Math.max(0,t+i-u.width):t+u.width>a+h&&(t=a-u.width),this._viewGridInside&&(e=o.bottom-n.top+2,(n.bottom<o.bottom+u.height||l+c<o.bottom+u.height)&&(e=o.top-u.height-n.top-2)),z.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},c.prototype._resetItems=function(t,e,i,o){z.Utils.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},c.prototype._buildItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i,o=0,r=function(t,e){var i=e&&e.value?e.value.toString():"",o=document.createElement("span");return o.style.whiteSpace="pre",o.innerHTML=i?z.Utils.htmlEncode(i):"&nbsp;",o.tabIndex=-1,z.Utils.disableSelection(o),t.appendChild(o),o}.bind(this),n=function(t,e,i){var o=e&&e.label?e.label.toString():"";o=this._trimLabelText?o.trim():o;var r=document.createElement("span");return this._trimLabelText||(r.style.whiteSpace="pre"),r.innerHTML=o?z.Utils.htmlEncode(o):"&nbsp;",r.tabIndex=-1,z.Utils.disableSelection(r),t.appendChild(r),r}.bind(this),s=function(t,e){var i=document.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?z.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,z.Utils.disableSelection(i),t.appendChild(i)}.bind(this),a=function(t){if(!i){var e=window.getComputedStyle(t);i={font:e.fontSize+" "+e.fontFamily,size:parseInt(e.fontSize)}}return o}.bind(this),l=this._items,u=e||(0<this._element.children.length?this.moreItemCount:this.initCount);if(l&&!(l.length<1)){for(var h=t,c=l.length;h<c;h++){if(this._initCount&&u<=h-t&&h<c){var p=document.createElement("div"),d=p.style;d.position="relative",d.cssFloat="none",d.paddingTop="1px",d.paddingBottom="1px",d.paddingLeft="2px",d.paddingRight="2px",d.whiteSpace="nowrap",d.cursor="pointer",d.textAlign="center",z.Utils.disableSelection(p),p.nextIndex=h,p.onmouseover=null,p.onmouseout=null,p.onclick=this._nextClickHandler,p.isMoreButton=!0,p.className="rg-dropdown-more",n(p,{label:this.moreText}),this._element.appendChild(p);break}var _=l[h],f=document.createElement("div"),y=f.style;y.position="relative",y.cssFloat="none",y.paddingTop="1px",y.paddingBottom="1px",y.paddingLeft="2px",y.paddingRight="2px",y.whiteSpace="nowrap",y.cursor="default",z.Utils.disableSelection(f),this._element.appendChild(f),0==h&&(this._firstChild=f),f.onmouseover=null,f.onmouseout=null,f.onclick=this._clickHandler;var m=null;switch(this.displayLabels){case g.LABEL:n(f,_);break;case g.VALUE:r(f,_);break;case g.LABEL_VALUE:m=n(f,_,!0),s(f,this._separator),r(f,_);break;case g.VALUE_LABEL:m=r(f,_,!0),s(f,this._separator),n(f,_)}m&&this._itemColumned&&(o=Math.max(o,a(m)))}if(this._itemColumned&&o)for(h=0,c=this._element.childNodes.length;h<c;h++)(m=this._element.childNodes[h].firstChild).style.display="inline-block",m.style.width=o+"px"}},c.prototype.$_addMoreItems=function(t,e){var i=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(i,e),this._resetWidth(this._cellWidth),this.fireEvent(c.EDITOR_FOCUS)},c.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)(i=t[e]).className=e==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item";var i,o=this._itemIndex;if(0<=o&&o<t.length)if((i=t[o]).offsetTop<this._element.scrollTop)this._element.scrollTop=i.offsetTop;else{var r=i.offsetTop+z.Utils.getSize(i).height;r>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=r-this._element.clientHeight)}},c.prototype.$_hangulToChosungAll=function(t){for(var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i="",o=0;o<t.length;o++){var r=t.charCodeAt(o)-44032;i+=-1<r&&r<11172?e[Math.floor(r/588)]:t[o]}return i},c.prototype.$_hangulToChosung=function(t){var e={cho:t,org:t};if(/[ㄱ-힝]/.test(t)){var i=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],o=t.charCodeAt(0)-44032,r=o%28,n=(o-r)/28%21,s=((o-r)/28-n)/21;e.cho=i[s]?i[s]:t,["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"][n]&&(e.org=t)}return e},c.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&0<this._items.length&&t){for(var i=this._items,o=i.length,r=this._caseSensitive?t:t.toLowerCase(),n=[],s=0;s<o;s++){if(h=i[s].label.toString())if(h=this._caseSensitive?h:h.toLowerCase(),this._partialMatch){for(var a="",l=0;l<h.length;l++){var u=this.$_hangulToChosung(h[l]);a+=this.$_hangulToChosung(r[l]).org?u.org:u.cho}if(a==r)return void this.setItemIndex(s,e,!0)}else if(h==r)return void this.setItemIndex(s,e,!0);n.push(h)}for(s=0;s<o;s++){var h=n[s];if(this._partialMatch){var c=!1;for(l=0;l<r.length;l++){var p=this.$_hangulToChosung(h[l]);if(!(p.org&&p.org==r[l]||p.cho&&p.cho==r[l])){c=!1;break}c=!0}if(c)return void this.setItemIndex(s,e,!0)}else if(h&&0==h.indexOf(r))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++)if(h=n[s],this._partialMatch){var d=this.$_hangulToChosungAll(h),_=this.$_hangulToChosungAll(r),f=d.indexOf(_);if(a=h.substr(0,f),~f){l=0;for(var y=f,m=r.length;l<m;l++,y++)u=this.$_hangulToChosung(h[y]),a+=this.$_hangulToChosung(r[l]).org?u.org:u.cho}if(a&&0<a.indexOf(r))return void this.setItemIndex(s,e,!0)}else if(h&&0<h.indexOf(r))return void this.setItemIndex(s,e,!0)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},c.CLOSE_UP="onDropDownListCloseUp",c.EDITOR_FOCUS="onDropDownListEditorFocus",c);function c(t){var e=u.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._caseSensitive=!1,e._partialMatch=!1,e._sortStyle=n.NONE,e._items=null,e._itemIndex=-1,e._dropDownPosition=p.BUTTON,e._dropDownWidth=-1,e._displayLabels=null,e._separator=null,e._itemColumned=!1,e._viewGridInside=!1,e._trimLabelText=!0,e._initCount=0,e._moreItemCount=25,e._moreText=null,e._selected=!1,e._mouseoverHandler=function(t){var e=this._currDiv=t.currentTarget;z.Utils.getChildIndex(e)!=this._itemIndex&&(e.style.background="rgba(0, 255, 0, 0.2)")}.bind(e),e._mouseoutHandler=function(t){var e=this._currDiv=t.currentTarget;z.Utils.getChildIndex(e)!=this._itemIndex&&(e.style.background="")}.bind(e),e._clickHandler=function(t){var e=t.currentTarget,i=z.Utils.getChildIndex(e);0<=i&&(this._itemIndex=i,this._selected=!0,this.fireEvent(c.CLOSE_UP,!0))}.bind(e),e._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(e),e._container=t,e}e.DropDownList=h;var d,_=(d=Mt.TextCellEditor,i(f,d),f.prototype._doDispose=function(){this._list.removeListener(this),this._list.dispose(),this._list=null,this._globalMouseHandler=null,this._items=null,this._values=null,this._labels=null,this._value=void 0,d.prototype._doDispose.call(this)},f.prototype._createDropDown=function(t){return new h(t)},Object.defineProperty(f.prototype,"values",{get:function(){return this._values},set:function(t){this._values=t?t.slice():[]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"items",{get:function(){return this._values},set:function(t){this.values=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"itemSortStyle",{get:function(){return this.itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this.itemSortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),f.prototype.dropDown=function(t){if(void 0===t&&(t=!1),this.readOnly||this.listing||this._closing||(this._refreshItems(),!(t||this._items&&0<this._items.length)))return!1;var e=this._grid.editorOptions;this._list.viewGridInside=e.viewGridInside,this._list.displayLabels=this.displayLabels,this._list.separator=this.separator,this._list.itemColumned=this.itemColumned,this._list.items=this._items;var i=z.Utils.getClientRect(this._container);return this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,this._list.caseSensitive=this._caseSensitive,this._list.partialMatch=this._partialMatch,this._list.dropDownCount=this._dropDownCount,this._list.dropDownWidth=this._dropDownWidth,this._list.dropDownPosition=this._dropDownPosition,this._list.sortStyle=this._itemSortStyle,this._list.valueIndex=this._selectedIndex,this._list.trimLabelText=this._trimLabelText,this._list.show(document.documentElement,i.cx-1,i.cy+i.height,this._cellBounds.width,z.Utils.getClientRect(this._editor)),this._list.$_search(this._editor.value,!0),window.addEventListener("mousedown",this._globalMouseHandler),!0},f.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{window.removeEventListener("mousedown",this._globalMouseHandler),this._list.hide();var e=void 0;t&&this._list.selected&&0<=(e=this._list.itemIndex)&&this._items&&this._items.length>e?(this._selectedIndex=this._list.valueIndex,this._editor.value=this._labeling?this._items[e].label:this._items[e].value,this._selectedIndex==this._saveIndex&&this._editor.value==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit()):this._selectedIndex=-1}finally{this._closing=!1}return!0}return!1},Object.defineProperty(f.prototype,"hasButton",{get:function(){return!0},enumerable:!0,configurable:!0}),f.prototype.initOptions=function(){d.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=g.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=p.BUTTON,this._dropDownCount=8,this._itemSortStyle=n.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기"},f.prototype.setEditIndex=function(t){d.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null},f.prototype.setEditValue=function(t){var e,i=-1;if(this._value=t,this._lookup){var o=this._domain;o?e=0<=(r=i=o.keys?o.keys.indexOf(t):-1)&&o.values&&o.values.length>r?o.values[r]:t:i=this._editIndex.dataColumn.getLookupIndex(t),this._labeling?(e=o?0<=i&&o.values&&o.values.length>i?o.values[i]:t:0<=i?this._editIndex.dataColumn.getLookupLabel(t):t,d.prototype.setEditValue.call(this,e)):d.prototype.setEditValue.call(this,t)}else if(this._values){for(var r=0,n=this._values.length;r<n;r++)if(t==this._values[r]){i=r;break}this._labeling&&this._labels&&(i<0||this._labels.length>i)?(e=0<=i?this._labels[r]:t,d.prototype.setEditValue.call(this,e)):d.prototype.setEditValue.call(this,t)}else d.prototype.setEditValue.call(this,t);this._selectedIndex=i},f.prototype.isEdited=function(){var t=d.prototype.isEdited.call(this);return t&&this.domainOnly&&(t=void 0!==this.$_getEditValue(!1)),t},f.prototype.setCellEditValue=function(t,e){d.prototype.setCellEditValue.call(this,t,e)},f.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},f.prototype._createContainer=function(){var t=d.prototype._createContainer.call(this);return t.style.border="none",t.style.boxShadow="none",t},f.prototype.setBounds=function(t,e,i,o){t+=2,e+=2,i-=4,o-=4,d.prototype.setBounds.call(this,t,e,i,o)},f.prototype._createEditor=function(t){return d.prototype._createEditor.call(this,t)},f.prototype._textHandler=function(){this._requestStart()},f.prototype._compositionstartHandler=function(t){d.prototype._compositionstartHandler.call(this,t)},f.prototype._keyDownHandler=function(t){var e=this._list;switch(t.keyCode){case W.Keys.BACK:case W.Keys.DELETE:if(!t.ctrlKey&&this.textReadOnly)return this._requestStart(),t.preventDefault(),!0;break;case W.Keys.SPACE:if(this.listing&&e.currentIsMore)return e.addMoreItems(),t.preventDefault(),!0;break;case W.Keys.ENTER:if(this.listing&&e.currentIsMore)return e.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0))return!this._sendToParent(t);break;case W.Keys.ESCAPE:if(this.closeUp(!1))return t.preventDefault(),!0;break;case W.Keys.DOWN:if(t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,e.itemIndex+1)),t.preventDefault(),!0;break;case W.Keys.PAGEDOWN:if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,e.itemIndex+e.dropDownCount)),t.preventDefault(),!0;break;case W.Keys.UP:if(t.altKey&&this.listing)return this.closeUp(!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,e.itemIndex-1)),t.preventDefault(),!0;break;case W.Keys.PAGEUP:if(this.listing)return this._list.setItemIndex(Math.max(0,e.itemIndex-e.dropDownCount)),t.preventDefault(),!0}return d.prototype._keyDownHandler.call(this,t)},f.prototype._keyPressHandler=function(t){d.prototype._keyPressHandler.call(this,t),t.keyCode&&this.isTextReadOnly&&this.isTextReadOnly()&&t.preventDefault()},f.prototype._inputHandler=function(t){this.isTextReadOnly&&this.isTextReadOnly()&&(t.target.value=this._oldValue||""),d.prototype._inputHandler.call(this,t)},f.prototype._pasteHandler=function(t){d.prototype._pasteHandler.call(this,t)},f.prototype._copyHandler=function(t){d.prototype._copyHandler.call(this,t)},f.prototype._requestStart=function(t){return void 0===t&&(t=!1),!!d.prototype._requestStart.call(this,t)&&(!1!==t&&this.dropDown(),!0)},f.prototype._doChanged=function(){d.prototype._doChanged.call(this),this.listing&&(this._list.$_search(this._editor.value),this._selectedIndex=-1)},f.prototype.dropDownList=function(t){this.dropDown(t)},f.prototype.closeList=function(t){this.closeUp(t)},f.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},f.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},f.prototype._refreshItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==g.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn&&i.item&&(0<=i.dataRow||q.ItemState_isEditing(o.itemState))){var r=i.dataColumn;if(r.lookupSource()){for(var n=r.lookupKeyFieldIds,s=[],a=0;a<n.length-1;a++)s.push(o.getData(n[a]));var l=r.lookupSource().getTextDomain(s);l&&l.values&&0<l.values.length&&(this.$_setItems(l.keys,l.values),this._labeling=!0,this._lookup=!0,this._domain=l)}else r.lookupValues&&0<r.lookupValues.length&&(this.$_setItems(r.lookupValues,r.lookupLabels),this._labeling=this.displayLabels!==g.VALUE&&r.lookupLabels&&r.lookupLabels.length>=r.lookupValues.length,this._lookup=!0)}if(t&&this.listing){this._list.items=this._items;var u=z.Utils.getClientRect(this._container);this._list._resetItems(u.cx-1,u.cy+u.height,this._cellBounds.width,z.Utils.getBounds(this._editor))}},f.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i,o=this.text,r=Mt.TextCellEditor.prototype.getEditValue.call(this,t,e),n=r,s=this._editIndex.dataColumn,a=this._selectedIndex,l=0<=a;if(this._lookup){if(this._domain){if(this._labeling&&(n=0<=(i=l?a:this._domain.values?this._domain.values.indexOf(o):-1)&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:n),this.domainOnly&&(!this._domain.keys||this._domain.keys.indexOf(n)<0))return Mt.CellEditor.Unselected}else if(this._labeling&&void 0===(n=l?s.getLookupValue(a):s.getSourceValue(o))&&(n=r),this.domainOnly&&(!s.lookupValues||s.lookupValues.indexOf(n)<0))return Mt.CellEditor.Unselected}else if(this._labeling&&0<=(i=l?a:this._labels?this._labels.indexOf(o):-1)&&i<this._values.length&&(n=this._values[i]),this.domainOnly&&(!this._values||this._values.indexOf(n)<0))return Mt.CellEditor.Unselected;return n},f.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e),z.Utils.isMobile||this.setFocus()},f.prototype.onDropDownListEditorFocus=function(){this.setFocus()},f);function f(t,e){var i=d.call(this,t,e)||this;return i._values=null,i._items=null,i._labels=null,i._displayLabels=g.LABEL,i._domainOnly=!1,i._textReadOnly=!1,i._dropDownWidth=-1,i._dropDownPosition=p.BUTTON,i._dropDownCount=8,i._itemSortStyle=n.NONE,i._caseSensitive=!1,i._partialMatch=!1,i._commitOnSelect=!0,i._dropDownWhenClick=!1,i._trimLabelText=!0,i._separator=null,i._itemColumned=!1,i._lookup=!1,i._labeling=!1,i._domain=null,i._closing=!1,i._selectedIndex=-1,i._globalMouseHandler=function(t){for(var e=t.target;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}.bind(i),i._list=i._createDropDown(t.container),i._list.addListener(i),i}e.DropDownCellEditor=_;var y,m=(i(b,y=h),Object.defineProperty(b.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!0,configurable:!0}),b.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(0<=t&&t<o.length){for(var r=o[t],n=r.getElementsByTagName("input"),s=void 0,a=0,l=n.length;a<l;a++)if("checkbox"==n[a].type){s=n[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(r,t,s.checked,i))}},b.prototype.$_changeCheckIndex=function(t,e,i,o){var r=this._selectItemIndices;if(!(e<0||e>=this._items.length)){var n=this._items[e].index;i?r.indexOf(n)<0&&r.push(n):0<=r.indexOf(n)&&r.splice(r.indexOf(n),1),t.style.background=i?"#aaa":this._itemIndex==e?"#888":"",t.style.color=i||this._itemIndex==e?"#fff":"",t.className=i?"rg-multicheck-select":"rg-multicheck-item",this._selected=!0,o&&this.fireEvent(b.CHECK_CLICK,!1)}},b.prototype._createList=function(){var t=document.createElement("div");t.className="rg-multicheck";var e=document.createElement("div");e.className="rg-multicheck-allcheck",(this._allCheckElement=e).style.paddingLeft="2px",z.Utils.disableSelection(e),t.appendChild(e);var i=document.createElement("div");i.className="rg-multicheck-list",this._listElement=i,t.appendChild(i);var o=document.createElement("div");return o.style.textAlign="center",o.className="rg-multicheck-button",(this._buttonElement=o).style.margin="2px",o.style.paddingLeft="2px",z.Utils.disableSelection(o),t.appendChild(o),t.onkeydown=function(t){27==t.keyCode&&this.fireEvent(b.CLOSE_UP_2,!1)}.bind(this),t},b.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,i=0;i<t;i++)this.changeCheckIndex(i,e,!1);this.fireEvent(b.CHECK_CLICK,!1)},b.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="visible",n.zIndex="3000",(n=this._listElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",n.zIndex="3000",(n=this._buttonElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.marginLeft="0px",n.marginRight="0px",this._firstChild=null,z.Utils.clearChildren(this._element),z.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),0<this._selectItemIndices.length&&this._itemIndex<0&&this.setItemIndex(this._selectItemIndices[0]),this._selected=!1}},b.prototype._resetWidth=function(t){var e=this._listElement,i=z.Utils.getClientRect(e),o=this.dropDownWidth,r=o;r<0?r=t:0==r&&(r=10),e.style.width=r+"px";var n=0;if(this._firstChild){var s=this._firstChild.currentStyle||window.getComputedStyle(this._firstChild),a=parseInt(s.marginLeft.replace("px",""));a=isNaN(a)?0:a;var l=parseInt(s.marginRight.replace("px",""));l=isNaN(l)?0:l;for(var u=e.childNodes,h=0;h<u.length;h++)n=Math.max(n,u[h].scrollWidth);n+=e.offsetWidth-e.clientWidth+a+l}o<0&&(n=Math.max(n,r));var c=z.Utils.getBrowserSize();r=n=Math.min(n,c.width),z.Utils.ieOld&&(0<=o||r<n)&&(r+=20),r<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",n=Math.floor(this._buttonElement.getBoundingClientRect().width),isNaN(n)||(r=Math.max(r,n)),e.style.width=r+"px"},b.prototype.$_resetPosition=function(t,e,i,o){var r=z.Utils.getBrowserSize(),n=z.Utils.getClientRect(this._containerElement),s=z.Utils.getClientRect(this._container._container),a=r.width,l=r.height,u=z.Utils.getClientRect(this._element),h=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(l-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=18),t+=s.left-n.left,e+=s.top-n.top,(z.Utils.ieTen||z.Utils.ieOld||z.Utils.ieLeg)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+u.height>l+c&&(e=e-o.height-u.height)<0&&(e=l-u.height-2),this.dropDownPosition!=p.EDITOR?t=Math.max(0,t+i-u.width):t+u.width>a+h&&(t=a-u.width),this.viewGridInside&&(e=o.bottom-n.top+2,(n.bottom<o.bottom+u.height||l+c<o.bottom+u.height)&&(e=o.top-u.height-n.top-2)),z.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},b.prototype._resetItems=function(t,e,i,o){z.Utils.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},b.prototype._buildItems=function(){var i,o=0,t=function(t,e,i){var o=e?e.value.toString():"",r=document.createElement("label");return r.style.whiteSpace="pre",r.innerHTML=o?z.Utils.htmlEncode(o):"&nbsp;",r.htmlFor=i&&i.id,r.tabIndex=-1,z.Utils.disableSelection(r),t.appendChild(r),r}.bind(this),e=function(t,e,i){var o=e?e.label.toString():"";o=this._trimLabelText?o.trim():o;var r=document.createElement("label");return this._trimLabelText||(r.style.whiteSpace="pre"),r.innerHTML=o?z.Utils.htmlEncode(o):"&nbsp;",r.htmlFor=i&&i.id,r.tabIndex=-1,z.Utils.disableSelection(r),t.appendChild(r),r}.bind(this),r=function(t,e){var i=document.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?z.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,z.Utils.disableSelection(i),t.appendChild(i)}.bind(this),n=function(t){if(!i){var e=window.getComputedStyle(t);i={font:e.fontSize+" "+e.fontFamily,size:parseInt(e.fontSize)}}return o}.bind(this),s=this._items;if(s&&!(s.length<1)){for(var a=0,l=s.length;a<l;a++){var u=s[a],h=document.createElement("div"),c=h.style;c.position="relative",c.cssFloat="none",c.paddingTop="1px",c.paddingBottom="1px",c.paddingLeft="2px",c.paddingRight="2px",c.whiteSpace="nowrap",c.cursor="default";var p=0<=this._selectItemIndices.indexOf(s[a].index);z.Utils.disableSelection(h),this._listElement.appendChild(h),0==a&&(this._firstChild=h),h.onclick=this._clickHandler;var d=document.createElement("input");d.id="$multiCheck_item_"+b.$_checkId++,d.type="checkBox",d.onclick=this._checkClickHandler,d.checked=p,h.appendChild(d);var _=null;switch(this.displayLabels){case g.LABEL:e(h,u,d);break;case g.VALUE:t(h,u,d);break;case g.LABEL_VALUE:_=e(h,u,d),r(h,this.separator),t(h,u,d);break;case g.VALUE_LABEL:_=t(h,u,d),r(h,this.separator),e(h,u,d)}_&&this.itemColumned&&(o=Math.max(o,n(_)),h._firstItem=_)}if(this.itemColumned&&o)for(var f=0,y=this._listElement.childNodes.length;f<y;f++)(_=this._listElement.childNodes[f]._firstItem)&&(_.style.display="inline-block"),_&&(_.style.width=o+"px")}},b.prototype.setButtonOptions=function(t,e,i,o,r){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=r,this.$_buildButtons()},b.prototype.$_buildButtons=function(){if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",z.Utils.clearChildren(this._buttonElement);var t=document.createElement("label"),e=t.style;t.innerHTML=this._acceptText,t.onclick=this._acceptClickHandler,t.className="rg-multicheck-accept",e.padding="0px 3px",e.marginRight="0px",e.marginLeft="2px",e.cursor="pointer",z.Utils.disableSelection(t),this._buttonElement.appendChild(t),e=(t=document.createElement("label")).style,t.innerHTML=this._cancelText,t.onclick=this._cancelClickHandler,t.className="rg-multicheck-cancel",e.padding="0px 1px",e.marginRight="0px",e.marginLeft="2px",e.cursor="pointer",z.Utils.disableSelection(t),this._buttonElement.appendChild(t);var i=this._allCheckElement;if(i.onclick=this._allCheckClickHandler,z.Utils.clearChildren(i),this._showAllCheck){i.style.display="";var o=document.createElement("input");o.type="checkbox",o.id="$multiCheck_item_"+b.$_checkId++,o.onclick=this._allCheckClickHandler,this._allCheck=o,i.appendChild(o);var r=document.createElement("label");r.innerHTML=this._allCheckText,r.htmlFor=o.id,r.tabIndex=-1,z.Utils.disableSelection(r),i.appendChild(r)}else i.style.display="none"}},b.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i==this._itemIndex?(o.style.background="#888",o.style.color="#fff"):(o.style.background=0<=this._selectItemIndices.indexOf(e)?"#aaa":"",o.style.color=0<=this._selectItemIndices.indexOf(e)?"#fff":"")}if(0<=(e=this._itemIndex)&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var r=o.offsetTop+z.Utils.getSize(o).height;r>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=r-this._listElement.clientHeight)}},b.CLOSE_UP_2="onMultiCheckListCloseUp",b.CANCEL="onMultiCheckListCancel",b.CHECK_CLICK="onMultiCheckListCheckClick",b.$_checkId=0,b);function b(t){var e=y.call(this,t)||this;return e._selectItemIndices=[],e._acceptText=null,e._cancelText=null,e._showButtons=!1,e._showAllCheck=!1,e._acceptClickHandler=function(t){this.fireEvent(b.CLOSE_UP_2,!0)}.bind(e),e._cancelClickHandler=function(t){this.fireEvent(b.CANCEL,!1)}.bind(e),e._acceptMouseoverHandler=function(t){t.currentTarget.style.background="rgba(9, 211, 140, 0.5)"}.bind(e),e._acceptMouseoutHander=function(t){t.currentTarget.style.background=""}.bind(e),e._cancelMouseoverHandler=function(t){t.currentTarget.style.background="#888"}.bind(e),e._cancelMouseoutHandler=function(t){t.currentTarget.style.background=""}.bind(e),e._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget.parentNode;if(e){var i=z.Utils.getChildIndex(e),o=t.currentTarget.checked;this.$_changeCheckIndex(e,i,o,!0)}}.bind(e),e._allCheckMouseoverHandler=function(t){var e=t.currentTarget;e.style.background="rgba(0, 255, 0, 0.2)",e.style.color=""}.bind(e),e._allCheckMouseoutHandler=function(t){var e=this._currDiv=t.currentTarget;e.style.background="",e.style.color=""}.bind(e),e._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(e),e._mouseoverHandler=function(t){var e=this._currDiv=t.currentTarget,i=z.Utils.getChildIndex(e),o=0<=i&&i<this._items.length?this._items[i].index:i;this._selectItemIndices.indexOf(o)<0&&(e.style.background="rgba(0, 255, 0, 0.2)",e.style.color="")}.bind(e),e._mouseoutHandler=function(t){var e=this._currDiv=t.currentTarget,i=z.Utils.getChildIndex(e),o=0<=i&&i<this._items.length?this._items[i].index:i;this._selectItemIndices.indexOf(o)<0&&(e.style.background=i==this._itemIndex?"#888":"",e.style.color=i==this._itemIndex?"#fff":"")}.bind(e),e._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var i=z.Utils.getChildIndex(e),o=void 0,r=e.getElementsByTagName("input"),n=0,s=r.length;n<s;n++)if("checkbox"==r[n].type){o=r[n];break}o&&(o.checked=!o.checked),this.$_changeCheckIndex(e,i,o.checked,!0)}}.bind(e),e}var v;i(C,v=_),Object.defineProperty(C.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t},enumerable:!0,configurable:!0}),C.prototype._createDropDown=function(t){return new m(t)},C.prototype.setMask=function(t){this._mask=null},C.prototype.dropDown=function(t){if(void 0===t&&(t=!1),this.readOnly||this.listing||this._closing||(this._refreshItems(),!(t||this._items&&0<this._items.length)))return!1;var e=this._list,i=this._grid.editorOptions;e.viewGridInside=i.viewGridInside,e.displayLabels=this.displayLabels,e.separator=this.separator,e.itemColumned=this.itemColumned,e.items=this._items;var o=z.Utils.getClientRect(this._container);return this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,e.caseSensitive=this.caseSensitive,e.dropDownCount=this.dropDownCount,e.dropDownWidth=this.dropDownWidth,e.dropDownPosition=this.dropDownPosition,e.setButtonOptions(this._acceptText,this._cancelText,this._showButtons,this._showAllCheck,this._allCheckText),e.sortStyle=this.itemSortStyle,e.valueIndices=this._selectedIndices,e.trimLabelText=this.trimLabelText,e.show(document.documentElement,o.cx-1,o.cy+o.height,this._cellBounds.width,z.Utils.getClientRect(this._editor)),window.addEventListener("mousedown",this._globalMouseHandler),!0},C.prototype.getCheckValues=function(t,e){for(var i=[],o=0,r=t.length;o<r;o++)0<=t[o]&&t[o]<e.length&&i.push(this._labeling?e[t[o]].label:e[t[o]].value);return i},C.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{var e=this._list,i=this.editIndex&&this.editIndex.dataColumn;window.removeEventListener("mousedown",this._globalMouseHandler),e.hide(),t&&e.selected?(this._selectedIndices=e.valueIndices,this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(i.valueSeparator),z.Utils.equalArrays(this._saveIndices,this._selectedIndices)&&this._editor.value==this._saveText||this._dispatchChange(),this.commitOnSelect&&this._dispatchCommit()):this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},C.prototype.initOptions=function(){v.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"accept",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"accept"},C.prototype.setEditValue=function(t){var e,i=[],o=[],r=-1,n=z.Utils.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var s=this._domain;if(s)for(var a=0,l=n.length;a<l;a++)0<=(r=s.keys.indexOf(n[a]))&&(i.push(r),o.push(r<s.values.length?s.values[r]:n[a]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=s?o.join(this._editIndex.dataColumn.valueSeparator):0<i.length?this._editIndex.dataColumn.getLookupLabel(t):t,v.prototype.setEditValue.call(this,e)):v.prototype.setEditValue.call(this,t)}else if(this._values){for(var u=0,h=n.length;u<h;u++)0<=(r=this._values.indexOf(n[u]))&&(i.push(r),o.push(this._labels&&0<=r&&this._labels.length>r?this._labels[r]:n[u]));this._labeling&&this._labels?(e=o.join(this._editIndex.dataColumn.valueSeparator),v.prototype.setEditValue.call(this,e)):v.prototype.setEditValue.call(this,t)}else v.prototype.setEditValue.call(this,t);this._selectedIndices=i},C.prototype.setCellEditValue=function(t,e){v.prototype.setCellEditValue.call(this,t,e)},C.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},C.prototype._keyDownHandler=function(t){var e=this._list;if(t.ctrlKey&&t.keyCode==W.Keys.A&&this.listing)return t.preventDefault(),e._allCheck.checked=!e._allCheck.checked,e.$_toggleAllCheck(),!0;switch(t.keyCode){case W.Keys.SPACE:if(this.listing)return e.changeCheckIndex(e.itemIndex,null,!0),t.preventDefault(),!0}return v.prototype._keyDownHandler.call(this,t)},C.prototype.$_getEditValue=function(t,e){function i(t,e,i,o,r){var n=[],s=e&&e.split(r.valueSeparator());if(s&&0<s.length)for(var a=0,l=s.length;a<l;a++)0<=o.indexOf(s[a])&&o.indexOf(s[a])<i.length?n.push(i[a]):0<=i.indexOf(s[a])?n.push(i[a]):t.isDomainOnly()||n.push(s[a]);return n}void 0===t&&(t=!1),void 0===e&&(e=!1),this._list;var o=this.text,r=Mt.TextCellEditor.prototype.getEditValue.call(this,t,e),n=r,s=this._editIndex.dataColumn,a=this._selectedIndices.slice(),l=[],u=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(u)for(var h=0,c=a.length;h<c;h++)a[h]<this._domain.keys.length&&l.push(this._domain.keys[a[h]]);else o&&(l=i(this,o,this._domain.keys,this._domain.values,s));n=l.join(s.valueSeparator)}}else if(this._labeling&&void 0===(n=u?s.getLookupValues(a):s.getSourceValues(o))&&(n=r),this.domainOnly){if(!s.lookupValues)return Mt.CellEditor.Unselected;for(var p=(n=z.Utils.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;0<=p;p--)s.lookupValues.indexOf(n[p])<0&&n.splice(p,1)}}else{if(this._labeling){if(u){var d=0;for(c=a.length;d<c;d++)a[d]<this._values.length&&l.push(this._values[a[d]])}else o&&(l=i(this,o,this._values,this._labels,s));n=l.join(s.valueSeparator)}if(this.domainOnly){if(!s.lookupValues)return Mt.CellEditor.Unselected;for(p=(n=z.Utils.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;0<=p;p--)s.lookupValues.indexOf(n[p])<0&&n.splice(p,1)}}return n},C.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e),this.setFocus()},C.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),this._editor.focus()},C.prototype.onMultiCheckListCancel=function(){this._controller.cancelEditor(!0)};function C(t,e){var i=v.call(this,t,e)||this;return i._showButtons=!0,i._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"accept",i._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"accept",i._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"accept",i._showAllCheck=!1,i}var w,E=(i(x,w=_),Object.defineProperty(x.prototype,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())},enumerable:!0,configurable:!0}),x.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText()||(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),0))},x.prototype._keyDownHandler=function(t){var e=t.keyCode==W.Keys.ENTER;if((e=e&&(t.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)))&&this.editing){t.preventDefault(),t.stopImmediatePropagation(),this.$_stopTimer();var i=this.getEditText();return i&&i!=this._searchKey&&(this._searchKey=i,this._dispatchSearch(i)),!0}return w.prototype._keyDownHandler.call(this,t)},x.prototype._keyUpHandler=function(t){w.prototype._keyUpHandler.call(this,t),z.Utils.isChrome&&this.$_search()},x.prototype._inputHandler=function(t){w.prototype._inputHandler.call(this,t),z.Utils.isChrome||this.$_search()},x.prototype._doEndEdit=function(){w.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},x.prototype.dropDown=function(t){var e=this._list;return e&&(e.initCount=this.initCount,e.moreItemCount=this.moreItemCount,e.moreText=this.moreText),w.prototype.dropDown.call(this,!0)},x.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},x.prototype.$_search=function(){var t=this.getEditText();t&&t!==l&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},x.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&0<this._list._items.length||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!==l&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},x.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},x.SEARCH="onSearchCellEditorSearch",x);function x(t,e){var i=w.call(this,t,e)||this;return i._searchLength=1,i._searchDelay=1e3,i._useCtrlEnterKey=!1,i._useEnterKey=!1,i._initCount=0,i._moreItemCount=25,i._reInquery=!0,i._timer=void 0,i}e.SearchCellEditor=E});t(At);At.DropDownPosition,At.DropDownSortStyle,At.DropDownValueLabel,At.DropDownList,At.DropDownCellEditor,At.SearchCellEditor;var Vt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});function r(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),r=4-o.getDay()+1;return o.setDate(r),o.getFullYear()==e&&i--,r=7*i,o.setDate(o.getDate()+r),o}function P(t,r,e){function i(t){var e=new Date(t),i=e.getDay();i=i<r?-3-i:4-i;var o=e.getDate();return e.setDate(o+i),e}void 0===e&&(e=!1);var o,n=t.getFullYear(),s=i(new Date(n,0,1)),a=i(new Date(n,t.getMonth(),t.getDate())),l=s.getFullYear(),u=a.getFullYear();return o=u<n?(s=i(new Date(l,0,1)),Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===u?1:0)):n<u?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===u?1:0),String(u)+(e?"-":"")+(o<10?"0"+o:String(o))}var n,s=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,a=(n=ce.Base,i(l,n),l.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,n.prototype._doDispose.call(this)},Object.defineProperty(l.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!0,configurable:!0}),l.prototype.load=function(t){this.clear()},l.prototype.clear=function(){this._items=[],this._tooltips=[]},l.prototype.contains=function(t){return!1},l.prototype.getTooltip=function(t){return null},l);function l(t){var e=n.call(this)||this;return e._tooltips=[],e._items=[],e._enabled=!0,e._owner=t,e}var u,h=(i(c,u=a),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},c.prototype.load=function(t){if(u.prototype.load.call(this,t),t){var e=z.Utils.isArray(t.dates)?t.dates:t.dates?[t.dates]:[];t.tooltips=z.Utils.isArray(t.tooltips)?t.tooltips:t.tooltips?[t.tooltips]:[];for(var i=0,o=e.length;i<o;i++){var r=e[i],n=void 0;if(r instanceof Date)(n=new Date(r)).setHours(0,0,0,0);else if("number"==typeof r)(n=new Date(r)).setHours(0,0,0,0);else if("string"==typeof r){4!==r.length&&8!==r.length||!/^[0-9]*$/.test(r)||(r=4===r.length?r.replace(/(\d{2})(\d{2})/,"$1/$2"):r.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var s=r.split(/[.//-]/);if(2==s.length)try{n=parseInt(s[0]).toString()+"/"+parseInt(s[1]).toString()}catch(t){}else 3==s.length&&(n=Lt.DateTimeConverter.getSimpleDateNull(r))}n&&(this._items.push(n),t.tooltips[i]&&this._tooltips.push(t.tooltips[i]))}this.enabled=!!t.enabled}},c.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},c.prototype.contains=function(t){return 0<=this.getItemIndex(t)},c.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return 0<=e?this._tooltips[e]:null},c);function c(t,e){var i=u.call(this,t)||this;return e&&i.load(e),i}var p,d=(i(_,p=a),_.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_.prototype.load=function(t){p.prototype.load.call(this,t),t&&(this._items=z.Utils.isArray(t.days)?t.days:t.days?[t.days]:[],this._tooltips=z.Utils.isArray(t.tooltips)?t.tooltips:t.tooltips?[t.tooltips]:[],this.enabled=!!t.enabled)},_.prototype.contains=function(t){return t instanceof Date&&0<=this._items.indexOf(t.getDay())},_.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return 0<=e?this._tooltips[e]:null},_);function _(t,e){var i=p.call(this,t)||this;return e&&i.load(e),i}var f,y=(f=ce.Base,i(m,f),m.prototype._doDispose=function(){this._editor=null,this._items=null,f.prototype._doDispose.call(this)},Object.defineProperty(m.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isNull",{get:function(){return-1==this._count},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),m.prototype.setNull=function(){this._count=-1},m.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},m.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},m.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=z.Utils.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],r=void 0;switch(o.type){case"day":r=new d(this,o);break;case"date":r=new h(this,o)}0<r.count&&this._items.push(r)}this._count=this._items.length}else this._count=-1},m.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},m);function m(){var t=f.call(this)||this;return t._items=[],t._count=-1,t}e.HolidayCollection=y;var g;g=j.EventAware,i(b,g),Object.defineProperty(b.prototype,"month",{get:function(){return this._month},set:function(t){this._month=t},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"listElement",{get:function(){return this._listElement},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"listing",{get:function(){return this._container&&this._container.contains(this._element)},enumerable:!0,configurable:!0}),b.prototype.show=function(t,e,i,o){if(this._container=t){t.appendChild(this._element);var r=z.Utils.getClientRect(this._element),n=z.Utils.getScrolled();if(o&&this._listElement){var s=this._listElement.getBoundingClientRect().width;e=parseInt(this._listElement.style.left.replace("px",""))+s/2,i=parseInt(this._listElement.style.top.replace("px",""))}e=Math.max(n.sx,e-r.width-2),i=Math.max(n.sy,i-r.height/2+13),z.Utils.move(this._element,e,i)}},b.prototype.hide=function(){z.Utils.detach(this._element),this._container=null},b.prototype.$_createPicker=function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.cssFloat="none",e.clear="both",e.boxSizing="border-box",e.zIndex="3001",t.className="rg-cal-month-picker",t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this);for(var i=1;i<=12;i++){var o=document.createElement("div"),r=o.style;r.position="relative",r.cssFloat="none",o.className="rg-cal-month-picker-item",z.Utils.disableSelection(o),t.appendChild(o),o.onclick=this._clickHandler,o.onmouseup=this._clickHandler;var n=document.createElement("span");n.innerHTML=z.Utils.htmlEncode((this._months?this._months[i-1]:i)+" "),n.tabIndex=-1,z.Utils.disableSelection(n),o.appendChild(n)}return t},b.CLOSE_UP="onMonthPickerCloseUp";function b(t,e){var i=g.call(this)||this;return i._month=-1,i._mouseoverHandler=function(t){var e=t.currentTarget;e.style.background="rgba(0, 0, 0, 0.9)",e.style.color="#fff"}.bind(i),i._mouseoutHandler=function(t){var e=t.currentTarget;e.style.background="",e.style.color=""}.bind(i),i._clickHandler=function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.currentTarget,i=z.Utils.getChildIndex(e);0<=i&&(this._month=i,this.fireEvent(b.CLOSE_UP,this._month)),this.hide()}.bind(i),i._listElement=e,i._months=t.months,i._element=i.$_createPicker(),i}var v,C=(v=j.EventAware,i(w,v),Object.defineProperty(w.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"date",{get:function(){return this._date},set:function(t){t.getTime()!=this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing&&this.$_buildCalendar())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"monthListing",{get:function(){return this._monthPicker.listing},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"focused",{get:function(){return this._selected},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=t?"1.0":"0.5")},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"today",{get:function(){return this.date=new Date},enumerable:!0,configurable:!0}),w.prototype.setWeekDays=function(t){t!=this._weekDays&&(z.Utils.isArray(t)&&7<=t.length?this._weekDays=t:this._weekDays=z.Utils.week_days)},w.prototype.closeMonth=function(){this._monthPicker.hide()},w.prototype.show=function(t,e,i,o,r){this._containerElement=this._viewGridInside?this._container._container:t,this.$_show(e,i,o,r)},w.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),z.Utils.detach(this._element),this._containerElement=null},w.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},w.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&z.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},w.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},w.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=z.Utils.month_days[z.Utils.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},w.prototype._changed=function(){},w.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},w.prototype.$_createPicker=function(){var t=document.createElement("div"),e=t.style;return e.position="absolute",e.cssFloat="none",e.clear="both",e.boxSizing="border-box",e.margin="0px",e.overflow="auto",e.zIndex="3000",t.className="rg-calendar",this._header=this.$_createHeader(),t.appendChild(this._header),this._calendar=this.$_createCalendar(),t.appendChild(this._calendar),t.addEventListener("keydown",function(t){27==t.keyCode&&(this.isMonthLisiting()?this.closeMonth():this.fireEvent(At.DropDownList.CLOSE_UP,!1))}.bind(this)),t.addEventListener("mouseup",function(t){this._editor.setFocus()}.bind(this)),t},w.prototype.$_createHeader=function(){var e=this,t=this._headerElement=document.createElement("div"),i=t.style;i.position="relative",t.className="rg-cal-header";var o=document.createElement("span");(i=o.style).position="absolute",i.left="4px",i.minWidth="17px",i.minHeight="17px",i.backgroundRepeat="no-repeat",i.backgroundPosition="center center",o.className="rg-cal-prev-month",t.appendChild(t.$_prev=o),o.onclick=function(t){z.Utils.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this);var r=document.createElement("span");(i=r.style).position="absolute",i.right="4px",i.minWidth="17px",i.minHeight="17px",i.backgroundRepeat="no-repeat",i.backgroundPosition="center center",r.className="rg-cal-next-month",t.appendChild(t.$_next=r),r.onclick=function(t){z.Utils.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this);var n=this._todayElement=document.createElement("span");(i=n.style).position="absolute",i.right="18px",i.top="2px",n.className="rg-cal-today-button",t.appendChild(n),n.innerHTML="Today",n.onclick=function(t){e.setFocused(!0),e.setDate(new Date),e._editor.$_selectDate(e._currDate)};var s=document.createElement("div");(i=s.style).position="relative",i.textAlign="center",i.marginLeft="20px",i.marginRight="50px",t.appendChild(t.$_title=s),s.className="rg-cal-yearmonth";var a=document.createElement("span");(i=a.style).position="relative",i.verticalAlign="top",i.height="16px",a.className="rg-cal-year",s.appendChild(s.$_year=a),a.innerHTML="2015년",a.onclick=function(t){};var l=this.$_createYearSpin();s.appendChild(s.$_yearSpin=l);var u=document.createElement("span");return(i=u.style).position="relative",i.verticalAlign="top",u.className="rg-cal-month",s.appendChild(s.$_month=u),u.innerHTML="1월",u.onmousedown=function(t){t.preventDefault(),t.stopImmediatePropagation();var e=z.Utils.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,e.x,e.y,this._viewGridInside)}.bind(this),t},w.prototype.$_createYearSpin=function(){var t=document.createElement("div"),e=t.style;e.display="inline-block",e.visibility="hidden",e.position="relative",e.width="15px",e.height="16px",e.marginLeft="-4px",e.marginRight="2px";var i=document.createElement("span");(e=i.style).position="absolute",e.top="0px",e.left="0px",e.width="15px",e.height="9px",e.backgroundRepeat="no-repeat",e.backgroundPosition="center center",i.className="rg-cal-next-year",t.appendChild(i),i.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this);var o=document.createElement("span");return(e=o.style).position="absolute",e.top="7px",e.left="0px",e.width="15px",e.height="9px",e.backgroundRepeat="no-repeat",e.backgroundPosition="center center",o.className="rg-cal-prev-year",t.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),t},w.prototype.$_createCalendar=function(){var t=["sun","mon","tue","wed","thu","fri","sat"],e=document.createElement("table"),i=e.style;i.margin="2px",e.className="rg-cal-days-table";var o=document.createElement("thead");o.className="rg-cal-weeks",e.appendChild(e.$_head=o);var r=document.createElement("tr");o.appendChild(r);var n=[],s=document.createElement("th");(i=s.style).minWidth="20px",i.textAlign="center",s.className="rg-cal-week-year-week",r.appendChild(s);var a=document.createElement("span");s.appendChild(a),o.$_weeks=s;for(var l=0;l<7;l++){var u=document.createElement("th");(i=u.style).minWidth="20px",i.textAlign="center",u.className="rg-cal-week-"+t[l],r.appendChild(u);var h=document.createElement("span");h.innerHTML=z.Utils.htmlEncode(this._weekDays[l]),u.appendChild(h),n.push(h)}o.$_cells=n;var c=document.createElement("tbody");c.className="rg-cal-days",e.appendChild(e.$_body=c);for(var p=c.$_rows=[],d=c.$_yearweeks=[],_=0;_<6;_++){var f=document.createElement("tr");c.appendChild(f),p.push(f),f.$_cells=n=[];var y=document.createElement("td");(i=y.style).padding="1px",y.className="rg-cal-day rg-cal-year-weeks",f.appendChild(y);var m=document.createElement("span");for(y.appendChild(y.$_span=m),d.push(y),l=0;l<7;l++){var g=document.createElement("td");(i=g.style).padding="1px",g.className="rg-cal-day rg-cal-week-"+t[(l+this._startWeek)%7],f.appendChild(g),g.onclick=this._clickHandler;var b=document.createElement("span");g.appendChild(g.$_span=b),n.push(g)}}return e},w.prototype.$_show=function(t,e,i,o){this.focused=!1,this._selected=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"50px":"20px";var r=this._date;this._currDate=r?new Date(r):new Date,this._today=new Date,this.$_buildCalendar(),z.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element);var n=z.Utils.getBrowserSize(),s=z.Utils.getBounds(this._containerElement),a=z.Utils.getBounds(this._container._container),l=n.width,u=n.height,h=z.Utils.getClientRect(this._element),c=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(u-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(l-=18),t+=a.left-s.left,e+=a.top-s.top,(z.Utils.ieTen||z.Utils.ieOld||z.Utils.ieLeg)&&(t+=document.documentElement.scrollLeft,e+=document.documentElement.scrollTop),e+h.height>u+p&&(e=e-o.height-h.height)<0&&(e=u-h.height-2),this._dropDownPosition!=At.DropDownPosition.EDITOR?t=Math.max(0,t+i-h.width):t+h.width>l+c&&(t=l-h.width),this._viewGridInside&&(e=o.bottom-s.top+2,(s.bottom<o.bottom+h.height||u+p<o.bottom+h.height)&&(e=o.top-h.height-s.top-2)),z.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},w.prototype.$_checkFocusedWeek=function(t,e,i){this.$_isFocusedWeek(t,e.$_yearWeek),e.className="rg-cal-week-year-focusweek"},w.prototype.$_isFocusedWeek=function(t,e){return t&&e&&P(t,this._startWeek)==e},w.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},w.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},w.prototype.$_buildCalendar=function(){var t=["sun","mon","tue","wed","thu","fri","sat"],e=this._header,i=this._currDate,o=e.$_prev,r=e.$_next,n=e.$_title,s=i.getFullYear(),a=i.getMonth();n.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",s+""):s+"년")+"&nbsp;",this._months&&0<this._months.length?n.$_month.innerHTML=this._months[a]:n.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",a+"1"):a+1+"월",o.title=0==a?s-1+"/12":s+"/"+z.Utils.pad(a),r.title=11==a?s+1+"/01":s+"/"+z.Utils.pad(a+2);for(var l=this._calendar.$_head.$_cells,u=0;u<7;u++){var h=l[(u+7-this._startWeek)%7];h.innerHTML=z.Utils.htmlEncode(this._weekDays[u]),h.parentElement.className="rg-cal-week-"+t[u]}this._calendar.$_head.$_weeks.style.display=this.showWeeks?"":"none";for(var c=this._calendar.$_body,p=c.$_yearweeks,d=(u=0,p.length);u<d;u++)p[u].style.display=this.showWeeks?"":"none",p[u].onclick=this.weekSelectable?this._yearWeekClickHandler:null;var _=c.$_rows,f=z.Utils.month_days[z.Utils.isLeapYear(s)?1:0][a],y=new Date(i);y.setDate(1);var m=(y.getDay()+7-this._startWeek)%7;30==f&&6==m||31==f&&5<=m?z.Utils.addChild(c,_[5]):z.Utils.removeChild(c,_[5]),28==f&&0==m?z.Utils.removeChild(c,_[4]):z.Utils.addChild(c,_[4]);var g=0,b=p[0];if(l=_[0].$_cells,0<m){var v=s,C=a-1;C<0&&(v--,C=11);var w=z.Utils.month_days[z.Utils.isLeapYear(v)?1:0][C];for(u=0;u<m;u++){(R=l[u]).removeAttribute("title");var E=new Date(this._currDate);R.$_day=u-m,E.setDate(R.$_day+1);var x=this._editor.containsRange(E);0===u&&(b.$_yearWeek=P(E,this._startWeek),b.$_span.innerText=b.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,b,x)),R.$_span.innerHTML=w-m+u+1,R.className="rg-cal-day rg-cal-prev-day "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7]}}for(u=m;u<7;u++)if((R=l[u]).removeAttribute("title"),R.$_day=g++,R.$_span.innerHTML=g,(y=new Date(this._currDate)).setDate(g),x=this._editor.containsRange(y),0===u&&(b.$_yearWeek=P(y,this._startWeek),b.$_span.innerText=b.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,b,x)),this.$_isFocusedDay(i,g))R.className="rg-cal-day rg-cal-focusday "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7];else if(this.$_isToday(i,g))R.className="rg-cal-day rg-cal-today "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7];else{var I=this._holidays&&this._holidays.contains(y);R.className="rg-cal-day "+(x?"":"rg-cal-disable-day ")+(I?"rg-cal-holiday ":"")+"rg-cal-week-"+t[(u+this._startWeek)%7]}for(var O=1;O<6&&g<f;O++){l=_[O].$_cells;var S=p[O];for(u=0;u<7;u++)if(g<f)(R=l[u]).removeAttribute("title"),R.$_day=g++,(y=new Date(this._currDate)).setDate(g),x=this._editor.containsRange(y),0===u&&(S.$_yearWeek=P(y,this._startWeek),S.$_span.innerText=S.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,S,x)),R.$_span.innerHTML=g,this.$_isFocusedDay(i,g)?R.className="rg-cal-day rg-cal-focusday "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7]:this.$_isToday(i,g)?R.className="rg-cal-day rg-cal-today "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7]:(I=this._holidays&&this._holidays.contains(y),R.className="rg-cal-day "+(x?"":"rg-cal-disable-day ")+(I?"rg-cal-holiday ":"")+"rg-cal-week-"+t[(u+this._startWeek)%7]);else for(var D=1;u<7;u++){var R;(R=l[u]).removeAttribute("title"),R.$_day=g++,(y=new Date(this._currDate)).setDate(g),x=this._editor.containsRange(y),R.$_span.innerHTML=D++,R.className="rg-cal-day rg-cal-next-day "+(x?"":"rg-cal-disable-day ")+"rg-cal-week-"+t[(u+this._startWeek)%7]}}},w.prototype.$_refreshItems=function(){},w.prototype.$_search=function(t){},w.prototype.onMonthPickerCloseUp=function(t,e){var i=e-this._currDate.getMonth();i&&(z.Utils.incMonth(this._currDate,i),this.$_buildCalendar()),this._editor.setFocus()},w.CLOSE_UP="onDatePickerCloseUp",w);function w(t,e){var i=v.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._yearNavigation=!1,i._dropDownPosition=At.DropDownPosition.BUTTON,i._showToday=!0,i._viewGridInside=!1,i._showWeeks=!1,i._startWeek=0,i._weekSelectable=!1,i._weekSeparator="",i._date=new Date,i._selected=!1,i._focused=!0,i._cellBackground="#f5f5f5",i._todayBackground="#d5d5d5",i._focusedBackground="rgba(255, 255, 0, 0.3)",i._hoveredBackground="",i._prevBackground="",i._cellBorder="1px solid #eee",i._nullBorder="1px solid #fff",i._focusedBorder="1px solid #aaa",i._todayBorder="1px solid #aaa",i._hoveredBorder="1px solid #000",i._cellColor="#333",i._nullColor="#ccc",i._prevColor="#565656",i._mouseoverHandler=function(t){var e=t.currentTarget,i=this.$_getCellDate(this._currDate,e.$_day+1),o=this._editor.containsRange(i),r=this._holidays&&this._holidays.contains(i);e.style.background=r&&o?r.styles().background().css():o?this._hoveredBackground:"",o&&r&&(e.style.color=r.styles().foreground().css()),e.style.border=o?this._hoveredBorder:this._nullBorder,o&&r&&r.getTooltip(i)&&(e.title=r.getTooltip(i))}.bind(i),i._mouseoutHandler=function(t){var e=this._currDate,i=e.getFullYear(),o=e.getMonth(),r=z.Utils.month_days[z.Utils.isLeapYear(i)?1:0][o],n=t.currentTarget,s=n.$_day,a=this.$_getCellDate(this._currDate,n.$_day+1),l=this._editor.containsRange(a),u=this._holidays&&this._holidays.contains(a);s<0||r<=s?(n.style.background="",n.style.border=this._nullBorder,n.style.color=l?this._prevColor:this._nullColor):this.$_isFocusedDay(this._currDate,s+1)?(n.style.background=this._focusedBackground,n.style.border=this._focusedBorder,n.style.color=l?this._cellColor:this._nullColor):this.$_isToday(this._currDate,s+1)?(n.style.background=this._todayBackground,n.style.border=this._todayBorder,n.style.color=l?this._cellColor:this._nullColor):(n.style.background=l&&u?u.styles().background().css():this._cellBackground,n.style.border=this._cellBorder,n.style.color=l?u?u.styles().foreground().css():this._cellColor:this._nullColor)}.bind(i),i._yearWeekmouseoverHandler=function(t){var e=t.currentTarget,i=this._editor.containsRange(r(t.currentTarget.$_yearWeek));e.style.background=i?this._hoveredBackground:"",e.style.border=i?this._hoveredBorder:this._nullBorder,e.style.color=i?this._cellColor:this._nullColor}.bind(i),i._yearWeekmouseoutHandler=function(t){var e=t.currentTarget,i=this._editor.containsRange(r(t.currentTarget.$_yearWeek)),o=this.$_isFocusedWeek(this._currDate,t.currentTarget.$_yearWeek);e.style.background=o?this._focusedBackground:this._cellBackground,e.style.border=o?this._focusedBorder:i?this._cellBorder:this._nullBorder,e.style.color=i?this._cellColor:this._nullColor}.bind(i),i._clickHandler=function(t){var e=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);if(this._editor.containsRange(e)){var i=this._holidays&&this._holidays.contains(e);i&&!i.isEnabled()||(this._date=new Date(e),this._selected=!0,this.fireEvent(w.CLOSE_UP,!0))}}.bind(i),i._yearWeekClickHandler=function(t){var e,i=t.currentTarget.$_yearWeek;i&&(e=r(i)),e&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0,this.fireEvent(w.CLOSE_UP,!0))}.bind(i),i._editor=e,i._container=t,i._yearDisplayFormat=e.yearDisplayFormat,i._monthDisplayFormat=e.monthDisplayFormat,i._months=e.months(),i._weekDays=z.Utils.week_days,i}var E,x=(E=Mt.TextCellEditor,i(I,E),I.prototype._doDispose=function(){E.prototype._doDispose.call(this)},Object.defineProperty(I.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&(this._editFormat=t,this.dateTimeFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){(t=null==t?0:isNaN(t=Math.floor(t))?0:t)!==this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){if(t!=this._defaultShowDate){switch(t){case W.DefaultShowDate.TODAY:case W.DefaultShowDate.NORMAL:case W.DefaultShowDate.TODAY_WHEN_NULL:}this._defaultShowDate=t,this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&((this._holidays=t)?(this._holidayCollection=this._holidayCollection||new y,(this._holidayCollection.editor=this)._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"monthListing",{get:function(){return this._list.monthListing},enumerable:!0,configurable:!0}),I.prototype.dropDown=function(){if(this.readOnly||this._controller._readOnly||this.listing||this._closing)return!1;var t=this._grid.editorOptions,e=this._list,i=z.Utils.getClientRect(this._container);return e.viewGridInside=t.viewGridInside,e.yearNavigation=this._yearNavigation,e.dropDownPosition=this._dropDownPosition,e.showToday=this._showToday,e.yearDisplayFormat=this._yearDisplayFormat,e.monthDisplayFormat=this._monthDisplayFormat,e.months=this._months,e.minDate=this._minDate,e.maxDate=this._maxDate,e.showWeeks=this._showWeeks,e.startWeek=this._startWeek||0,e.weekSelectable=this.weekSelectable,e.weekSeparator=this.weekSeparator,e.holidays=this._holidayCollection.isNull?t._holidayCollection:this._holidayCollection,this._weekDays&&0<this._weekDays.length&&e.setWeekDays(this._weekDays),this.$_setListDate(),e.show(document.documentElement,i.cx-1,i.cy+i.height,this._cellBounds.width,z.Utils.getClientRect(this._editor)),window.addEventListener("mousedown",this._globalMouseHandler),!0},I.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{window.removeEventListener("mousedown",this._globalMouseHandler),this._list.hide(),t&&this._list.selected&&(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit())}finally{this._closing=!1}return!0}return!1},I.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},Object.defineProperty(I.prototype,"hasButton",{get:function(){return!0},enumerable:!0,configurable:!0}),I.prototype.initOptions=function(){E.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=W.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull()},I.prototype.setEditIndex=function(t){E.prototype.setEditIndex.call(this,t);var e=this._editField().dataType;this._weekSelectable=this._weekSelectable&&e!==W.ValueType.DATE&&e!==W.ValueType.DATETIME},I.prototype.setEditValue=function(t){E.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=r(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this._valToStr(t)},I.prototype.setCellEditValue=function(t,e){E.prototype.setCellEditValue.call(this,t,e)},I.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=E.prototype.getEditValue.call(this,t),o=this._editField().dataType;return i&&e&&(o==W.ValueType.DATE||o==W.ValueType.DATETIME)&&(i=this._minDate?Math.max(this._minDate.getTime(),i):i,i=(i=this._maxDate?Math.min(this._maxDate.getTime(),i):i)&&new Date(i)),i},I.prototype._createContainer=function(){var t=E.prototype._createContainer.call(this);return t.style.border="none",t.style.boxShadow="none",t},I.prototype._createEditor=function(t){return E.prototype._createEditor.call(this,t)},I.prototype._textHandler=function(){this._requestStart(!1)},I.prototype._compositionstartHandler=function(t){this._requestStart(!1)},I.prototype._keyDownHandler=function(t){var e=this._list;if(e.monthListing)return t.keyCode==W.Keys.ESCAPE&&(this.closeMonthList(),t.preventDefault(),t.stopImmediatePropagation(),!0);var i=this.listing,o=i&&e.focused;switch(t.keyCode){case W.Keys.ENTER:if(this.closeUp(!0))return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);break;case W.Keys.ESCAPE:if(this.closeUp(!1))return t.preventDefault(),t.stopImmediatePropagation(),!0;break;case W.Keys.HOME:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.firstDay()),!0;break;case W.Keys.END:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.lastDay()),!0;break;case W.Keys.LEFT:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incDay(-1)),!0;break;case W.Keys.RIGHT:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incDay(1)),!0;break;case W.Keys.PAGEUP:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(-1)),!0;break;case W.Keys.PAGEDOWN:if(o)return t.preventDefault(),t.stopImmediatePropagation(),this.$_selectDate(e.incMonth(1)),!0;break;case W.Keys.DOWN:if(t.altKey&&!i)return this._requestStart(!1),t.preventDefault(),t.stopImmediatePropagation(),!0;if(i)return t.preventDefault(),t.stopImmediatePropagation(),o?this.$_selectDate(e.incDay(7)):(this._list.focused=!0,this.$_setListDate()),!0;break;case W.Keys.UP:if(t.altKey&&i)return this.closeUp(!1),t.preventDefault(),t.stopImmediatePropagation(),!0;if(i)return t.preventDefault(),t.stopImmediatePropagation(),o?e.date.getDate()<=7?this._list.focused=!1:this.$_selectDate(e.incDay(-7)):this._list.focused=!1,!0;break;case W.Keys.T:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(t.preventDefault(),t.stopImmediatePropagation(),this._list.date=new Date,this.$_selectDate(this._list.date))}return E.prototype._keyDownHandler.call(this,t)},I.prototype._keyPressHandler=function(t){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar){if(t.preventDefault(),t.stopImmediatePropagation(),this.listing)return e.focused=!0,this.$_selectDate(e.today),!0}else{if(z.Utils.isFirefox&&(t.ctrlKey||0===t.charCode))return void E.prototype._keyPressHandler.call(this,t);if(!this._regx.test(i))return void t.preventDefault()}E.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()},I.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(s,""),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},I.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),E.prototype._dispatchChange.call(this))},I.prototype._changeHandler=function(t){E.prototype._changeHandler.call(this,t)},I.prototype._pasteHandler=function(t){E.prototype._pasteHandler.call(this,t)},I.prototype._copyHandler=function(t){E.prototype._copyHandler.call(this,t)},I.prototype._requestStart=function(t){return void 0===t&&(t=!1),!!E.prototype._requestStart.call(this)&&(t&&this.dropDown(),!0)},I.prototype.setBounds=function(t,e,i,o){t+=2,e+=2,i-=4,o-=4,E.prototype.setBounds.call(this,t,e,i,o)},I.prototype._doChanged=function(){this._started||this._requestStart(),this._started&&!this._controller._readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange())},I.prototype.dropDownList=function(t){this.dropDown()},I.prototype.closeList=function(t){this.closeUp(t)},I.prototype.closeMonthList=function(){this._list.closeMonth()},I.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},I.prototype._isDateEditor=function(){var t=this._editField().dataType;return t==W.ValueType.DATE||t==W.ValueType.DATETIME||!this.weekSelectable},I.prototype.$_selectDate=function(t){if(t&&t!=this._date&&(this._date=t,this.containsRange(t))){var e=void 0;e=this.weekSelectable?P(t,this._startWeek,!!this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}},I.prototype.$_setListDate=function(){var t,e=this._editor.value;switch(this._mask&&(e=this._mask.getStripValue()),t=this.weekSelectable?r(e):this._dateConverter.getDateNull(e),this._defaultShowDate){case W.DefaultShowDate.TODAY:t=new Date;break;case W.DefaultShowDate.NORMAL:break;case W.DefaultShowDate.TODAY_WHEN_NULL:t=t||new Date}t&&(this._list.date=t)},I.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),z.Utils.isMobile||this.setFocus()},I);function I(t,e){var i=E.call(this,t,e)||this;i._minDate=new Date(1970,0,1),i._maxDate=new Date(2100,11,31),i._yearNavigation=!1,i._textReadOnly=!1,i._dropDownPosition=At.DropDownPosition.BUTTON,i._dropDownWhenClick=!1,i._showToday=!0,i._yearDisplayFormat="{Y}년",i._monthDisplayFormat="{M}월",i._months=null,i._weekDays=null,i._showWeeks=!1,i._startWeek=0,i._weekSelectable=!1,i._weekSeparator="",i._commitOnSelect=!1,i._holidays=null,i._holidayCollection=new y,i._closing=!1,i._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,i._globalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._dom._element)return;e=e.parentElement}this.closeUp(!0)}.bind(i);var o=t.editorOptions;return i._yearDisplayFormat=o.yearDisplayFormat,i._monthDisplayFormat=o.monthDisplayFormat,i._months=o.months,i._weekDays=o.weekDays,i._list=new C(t.container,i),i._list.addListener(i),i}e.DateCellEditor=x});t(Vt);Vt.HolidayCollection,Vt.DateCellEditor;var Nt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deleteRowsConfirm",{get:function(){return this._deleteRowsConfirm},set:function(t){this._deleteRowsConfirm=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkWhenSpace",{get:function(){return this._checkWhenSpace},set:function(t){this._checkWhenSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"innerDraggable",{get:function(){return this._innerDraggable},set:function(t){this._innerDraggable=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),s.prototype.isWritable=function(){return this._editable&&!this._readOnly},s.prototype.canUpdate=function(){return!this._readOnly&&this._updatable},s.prototype.canInsert=function(){return!this._readOnly&&this._insertable},s.prototype.canAppend=function(){return!this._readOnly&&this._appendable},s.prototype.canDelete=function(){return!this._readOnly&&this._deletable},s);function s(t){var e=r.call(this,t)||this;return e._readOnly=!1,e._editable=!z.Utils.isMobile(),e._checkable=!0,e._updatable=!0,e._appendable=!1,e._insertable=!1,e._deletable=!1,e._revertable=!1,e._erasable=!1,e._editWhenFocused=!1,e._commitWhenNoEdit=!1,e._commitWhenExitLast=!1,e._crossWhenExitLast=!1,e._validateOnEdited=!0,e._validateOnExit=!1,e._hintOnError=!0,e._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",e._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",e._showInvalidFormatMessage=!0,e._deleteRowsConfirm=!0,e._confirmWhenDelete=!0,e._editWhenClickFocused=!1,e._commitLevel=W.ValidationLevel.IGNORE,e._useTabKey=!0,e._useArrowKeys=!0,e._skipReadOnly=!1,e._skipReadOnlyCell=!1,e._enterToTab=!1,e._enterToNextRow=!1,e._enterToEdit=!1,e._maxLengthToNextCell=!1,e._forceInsert=!1,e._forceAppend=!1,e._checkDiff=!1,e._checkCellDiff=!1,e._strictDiff=!1,e._deletableWhenEdit=!0,e._showCommitError=!0,e._firstCellWhenInsert=!1,e._appendWhenInsertKey=!1,e._appendWhenExitLast=!1,e._showOnlyValidationMessage=!0,e._displayEmptyEditRow=!1,e._checkWhenSpace=!1,e._buttonClickWhenSpace=!1,e._exitGridWhenTab=!1,e._innerDraggable=!1,e._exceptDataClickWhenButton=!1,e._cancelWhenLastUndo=!1,e}e.EditOptions=n;var a,l=(a=P.ExpressionRuntime,i(u,a),u.prototype._doDispose=function(){this._cell=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"value",{set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cell",{set:function(t){this._cell=t},enumerable:!0,configurable:!0}),u.prototype.isIdentifier=function(t){return t=t.toLowerCase(),u.IDENTS.hasOwnProperty(t)?u.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},u.prototype.evaluateIdentifier=function(t){switch(t){case u.ID_VALUE:return this._value;case u.ID_ROW:return this._cell.itemIndex+1;case u.ID_COLUMN_HEADER:var e=this._cell&&this._cell.column;return e&&e.header&&e.header.text?e.header.text:e.displayText}throw new P.ExpressionEvaluationError("Invalid identifier key: "+t)},u.IDENTS={value:u.ID_VALUE=0,row:u.ID_ROW=1,dcount:u.ID_COLUMN_HEADER=2},u);function u(){return a.call(this)||this}e.EditorTitleExpressionRuntime=l;var h,c=(h=Q.GridBaseOptions,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"applyCellFont",{get:function(){return this._applyCellFont},set:function(t){t!=this._applyCellFont&&(this._applyCellFont=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&((this._titleStatement=t)?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new T.ExpressionStatement(t):this._titleExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&((this._holidays=t)?(this._holidayCollection=this._holidayCollection||new Vt.HolidayCollection,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!0,configurable:!0}),p);function p(t){var e=h.call(this,t)||this;return e._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",e._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",e._months=null,e._weekDays=null,e._viewGridInside=!1,e._useCssStyle=!1,e._useCssStyleDropDownList=!1,e._useCssStyleDatePicker=!1,e._useCssStylePopupMenu=!1,e._useCssStyleMultiCheck=!1,e._applyCellFont=!1,e._holidays=null,e._titleExprRuntime=new l,e}e.EditorOptions=c;var d,_=(d=Q.GridBaseOptions,i(f,d),f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t},enumerable:!0,configurable:!0}),f);function f(t){var e=d.call(this,t)||this;return e._enabled=!0,e._singleMode=!1,e._copyDisplayText=!1,e._includeHeaderText=!1,e}e.CopyOptions=_;var y,m=(y=Q.GridBaseOptions,i(g,y),g.prototype._doDispose=function(){y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"startEdit",{get:function(){return this._startEdit},set:function(t){t!=this._startEdit&&(this._startEdit=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(t){t!=this._commitEdit&&(this._commitEdit=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(t){t!=this._enableAppend&&(this._enableAppend=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){t!=this._fillFieldDefaults&&(this._fillFieldDefaults=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){t!=this._fillColumnDefaults&&(this._fillColumnDefaults=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){t!=this._forceRowValidation&&(this._forceRowValidation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){t!=this._forceColumnValidation&&(this._forceColumnValidation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new w.DateTimeReader(this._datetimeFormats[e]))}else this._dateReaders=null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new R.BooleanConverter(t))},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if((this._numberChars=t)&&0<t.length){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){t!=this._numberSeparator&&(this._numberSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&0<i.length){for(var o="[",r=0,n=i.length;r<n;r++){var s=i[r];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){t!==this._numberSeparatorOfCols&&(this._numberSeparatorOfCols=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(t){t!=this._selectionBase&&(this._singleMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){t!=this._selectBlockPaste&&(this._selectBlockPaste=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(t){t!=this._stopOnError&&(this._stopOnError=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){t!=this._noDataEvent&&(this._noDataEvent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){t!=this._eventEachRow&&(this._eventEachRow=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){t!=this._checkReadOnly&&(this._checkReadOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){t!=this._checkDomainOnly&&(this._checkDomainOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){t!=this._convertLookupLabel&&(this._convertLookupLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){t!=this._applyNumberFormat&&(this._applyNumberFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){t!=this._applyEditMask&&(this._applyEditMask=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){t!=this._applyMaxLength&&(this._applyMaxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){t!=this._throwValidationError&&(this._throwValidationError=t,this._changed())},enumerable:!0,configurable:!0}),g.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},g.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},g);function g(t){var e=y.call(this,t)||this;return e._enabled=!0,e._singleMode=!1,e._startEdit=!0,e._commitEdit=!0,e._enableAppend=!0,e._fillFieldDefaults=!1,e._fillColumnDefaults=!1,e._forceRowValidation=!1,e._forceColumnValidation=!1,e._datetimeFormats=null,e._booleanFormat=null,e._numberChars=null,e._numberSeparator=null,e._numberCharsOfCols={},e._numberSeparatorOfCols={},e._selectionBase=!1,e._selectBlockPaste=!1,e._stopOnError=!0,e._noEditEvent=!1,e._noDataEvent=!1,e._eventEachRow=!1,e._checkReadOnly=!1,e._checkDomainOnly=!1,e._convertLookupLabel=!1,e._applyNumberFormat=!1,e._applyEditMask=!1,e._applyMaxLength=!1,e._throwValidationError=!0,e}e.PasteOptions=m;var b,v=(b=Q.GridBaseOptions,i(C,b),C.prototype._doDispose=function(){b.prototype._doDispose.call(this)},Object.defineProperty(C.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),C);function C(t){var e=b.call(this,t)||this;return e._longTapDuration=500,e._doubleTapInterval=300,e._tapThreshold=4,e._showEditCommander=!0,e._showTooltip=!1,e}e.MobileOptions=v});t(Nt);Nt.EditOptions,Nt.EditorTitleExpressionRuntime,Nt.EditorOptions,Nt.CopyOptions,Nt.PasteOptions,Nt.MobileOptions;var jt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=gt.DataCellElement,i(s,r),Object.defineProperty(s.prototype,"mergeRoom",{get:function(){return this._mergeRoom},enumerable:!0,configurable:!0}),s.prototype._focusedChanged=function(){this._doLayoutHandles(),r.prototype._focusedChanged.call(this)},s.prototype.$_setMergeRoom=function(t){this._mergeRoom=t},s);function s(){var t=r.call(this,"mergedDataCellView")||this;return t._topIndex=-1,t._bottomIndex=-1,t}e.MergedDataCellElement=n;var a,l=(a=ut.VisualObjectElement,i(u,a),u.prototype._doDispose=function(){this._roomMap=null,this._scopeViews=null,this._tailIndex&&this._tailIndex.dispose(),this._tailIndex=null,this._headIndex&&this._headIndex.dispose(),this._headIndex=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),u.prototype.clearRooms=function(){this._roomMap={};for(var t=this._cellLayer.childCount-1;0<=t;t--){var e=this._cellLayer.getChild(t),i=e.mergeRoom,o=this.$_getViews(i.scope);e.visible=!1,o.indexOf(e)<0&&o.push(e)}},u.prototype.addColumnRooms=function(t,e,i,o){for(var r=t.fixedItemCount,n=t.topIndex,s=this.$_getViews(i),a=o.getRooms(),l=a.length-1;0<=l;l--){var u=a[l],h=void 0;0<s.length?h=s.pop():(h=this._createCellElement(u),this._cellLayer.addChild(h)),h.visible=!0,h.$_setMergeRoom(u),this._roomMap[u.$_hash]=h;var c=Math.max(0,u.head-n-r),p=u.tail-n-r;o.addCells(c,p-c+1)}},u.prototype._doAttached=function(t){a.prototype._doAttached.call(this,t);var e=this.grid;this._headIndex=new X.CellIndex(e),this._tailIndex=new X.CellIndex(e)},u.prototype._doLayoutContent=function(t){this._headerViews,this._footerViews,this._fixedFooterViews,this._rightFooterViews,t.$_getItems().length,t.fixedItemCount,this.width},u.prototype.$_getViews=function(t){var e=this._scopeViews[t.$_hash];return e||(e=[],this._scopeViews[t.$_hash]=e),e},u.prototype._createCellElement=function(t){var e=null;if(null!=t){var i=t.column;i instanceof G.SeriesColumn||i instanceof G.DataColumn&&(e=new n)}return e},u);function u(t){var e=a.call(this,null,"mergedGoupLayer")||this;return e._roomMap={},e._scopeViews={},e._bodyView=t,e._cellLayer=new nt.LayerElement("mergedCellLayer"),e.addChild(e._cellLayer),e}e.ColumnMergeElement=l});t(jt);jt.MergedDataCellElement,jt.ColumnMergeElement;var Bt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return this._urls.length},enumerable:!0,configurable:!0}),s.prototype.addUrl=function(t){t&&this._urls.indexOf(t)<0&&this._urls.push(t)},s.prototype.addUrls=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var i=0;i<t.length;i++)this.addUrl(t[i])},s.prototype.getImage=function(t){return 0<=t&&t<this._urls.length?this._rootUrl+this._urls[t]:null},s);function s(t,e){var i=r.call(this)||this;return i._urls=[],i._name=t,i._rootUrl=e,i}e.ImageList=n});t(Bt);Bt.ImageList;var Ft=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ot.EditRequest,i(s,r),s.prototype._doDispose=function(){this._grid=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this)||this;return e._grid=t,e}e.GridEditRequest=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._index.dispose(),this._index=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),u);function u(t){var e=a.call(this,t.grid)||this;return e._index=t,e}e.CellRequest=l;var h,c=(i(p,h=l),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"style",{get:function(){return this._style},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!0,configurable:!0}),p);function p(t,e){var i=h.call(this,t)||this;return i._style=e,i}e.SelectRequest=c;var d,_=(i(f,d=n),f.prototype._doDispose=function(){this._layout=null,d.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),f.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(f.prototype,"cursor",{get:function(){return W.Cursor.COL_RESIZE},enumerable:!0,configurable:!0}),f);function f(t){return d.call(this,t)||this}e.ColumnResizeRequest=_;var y,m=(i(g,y=n),g.prototype._doDispose=function(){this._layout=null,y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),g.prototype.init=function(t,e,i,o){return this._layout=t instanceof D.ProxyCellLayoutItem?t.source:t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(g.prototype,"cursor",{get:function(){return W.Cursor.AUTO},enumerable:!0,configurable:!0}),g);function g(t){return y.call(this,t)||this}e.ColumnMoveRequest=m});t(Ft);Ft.GridEditRequest,Ft.CellRequest,Ft.SelectRequest,Ft.ColumnResizeRequest,Ft.ColumnMoveRequest;var $t=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=It.DragTracker,i(s,r),s.prototype._doDispose=function(){this._grid=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),s);function s(t,e){var i=r.call(this,t.container,e)||this;return i._grid=t,i}e.GridDragTracker=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._request=null,this._feedback=null,a.prototype._doDispose.call(this)},u.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.contentBounds.y,s=r.contentBounds.bottom;return this._feedback.resize(2,s-n),this._feedback.move(e-this._offset,n),this.grid.addFeedbackElement(this._feedback),!0},u.prototype._doDrag=function(t,e,i){var o=this._request.layout,r=this.grid.displayOptions.minColumnWidth;return o.cellWidth,(e-=this._offset)>=this._layoutX+r&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},u.prototype._doEnded=function(){var t=this._feedback.x-this._layoutX;this.grid.removeFeedbackElement(this._feedback),this._request.layout.cellWidth=t},u);function u(t,e){var i=a.call(this,t.layout.grid,"columnResizeTracker")||this;i._request=t,i._feedback=e;var o=t.layout;return i._layoutX=t.x+t.offset-o.cellWidth,i._offset=t.offset,i}e.ColumnResizeTracker=l;var h,c=(i(p,h=n),p.prototype._doDispose=function(){this._request=null,this._cellFeedback=null,this._feedback=null,h.prototype._doDispose.call(this)},p.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.layoutManager,s=this._layout.parent,a=n.getHeaderCellRect(this._layout);return s.horizontal?(this._offset=e-a.x,this._feedback.setBounds(a.x,a.y,7,a.height)):(this._offset=i-a.y,this._feedback.setBounds(a.x,a.y,a.width,7)),this._feedback.visible=!1,this._cellFeedback.setBounds(a.x,a.y,a.width,a.height),this._cellFeedback.model=r.header.getCell(this._layout),this._cellFeedback.dragging=!1,r.addFeedbackElement(this._cellFeedback),r.addFeedbackElement(this._feedback),!0},p.prototype._doDrag=function(t,e,i){var o=this.grid,r=this._layout.parent,n=this.grid.layoutManager;if(i<n.contentBounds.y&&o.canGrouping())return!1;if(e<n.gridBounds.x||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=this._target=n.getHeaderCellAt(e,i);this.$_setTarget(s),this._cellFeedback.dragging=!0,r.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i+this._offset}return!0},p.prototype._doCanceled=function(){this.$_stopTimer()},p.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},p.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},p.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},p.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},p.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},p.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),0<o&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&0<t.leftPos&&(t.leftCell-=1)),this.$_setTarget(null)},p.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,r=o._dom.style,n=this.grid.layoutManager,s=(this.currentX,this.currentY);if(null!=t&&t.parent===i&&t!==e)if(i.horizontal){var a=e.col,l=n.getHeaderCellRect(t);o.visible=!0,t.col<a?(r.borderRight="none",r.borderLeft="",o.x=l.x):t.col>a&&(r.borderLeft="none",r.borderRight="",o.x=l.right-o.width),this.grid.makeLayoutVisible(t)}else o.y=s+this._offset;else o.visible=!1},p);function p(t,e,i){var o=h.call(this,t.layout.grid,"columnMoveTracker")||this;return o._timer=null,o._colLoop=0,o._colPrevLoop=0,o._interval=0,o._request=t,o._layout=t.layout,o._cellFeedback=e,o._feedback=i,o}e.ColumnMoveTracker=c});t($t);$t.GridDragTracker,$t.ColumnResizeTracker,$t.ColumnMoveTracker;var Gt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=$t.GridDragTracker,i(s,n),s.prototype._doDispose=function(){this._request.dispose(),this._request=null,n.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),s.prototype._doEnded=function(){this._getItem()},s);function s(t,e,i,o){var r=n.call(this,t.index.grid,e)||this;return r._request=t,r._currX=i,r._currY=o,r}e.SelectTracker=r;var a,l=(i(u,a=r),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},u.prototype._getItem=function(){return this._item},u.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=r.pointToIndex(t,e,i,!0)),n.itemStyle=st.SelectionStyle.BLOCK,o?this._item=0<n.count&&n.getItem(0):(n.clear(),this._item=n.add(a,a,st.SelectionStyle.BLOCK)),Boolean(this._item)},u.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,(this._currY=i)>o.footerBounds.y||i<o.gridBounds.y||e<o.gridBounds.x||e>o.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!0);r.column&&0<=r.itemIndex&&this._item.resizeTo(r)}return!0}return!1},u.prototype._doEnded=function(){this.$_stopTimer(),a.prototype._doEnded.call(this)},u.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},u.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},u.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,r=0,n=0;i>o.footerBounds.y?(n=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-n,this._rowLoop++):i<o.gridBounds.y&&(n=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-n,this._rowLoop++),e>o.clientRect.right?(r=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-r,this._colLoop++):e<o.gridBounds.x&&(r=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-r,this._colLoop++);var s=!1;if(0<Math.max(r,n)&&(this._interval=4-Math.max(r,n)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftLayout=t.leftLayout+1,s=!0):e<o.gridBounds.left&&0<t.leftPos&&(t.leftLayout=t.leftLayout-1,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},u);function u(t,e,i){var o=a.call(this,t,"blockSelectTracker",e,i)||this;return o._timer=null,o._rowPrevLoop=0,o._rowLoop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}e.BlockSelectTracker=l;var h,c=(i(p,h=r),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},p.prototype._getItem=function(){return this._item},p.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=r.pointToIndex(t,e,i,!0)),n.itemStyle=st.SelectionStyle.ROWS,o?this._item=0<n.count&&n.getItem(0):(n.clear(),this._item=n.add(a,a,st.SelectionStyle.ROWS)),Boolean(this._item)},p.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,(this._currY=i)>o.footerBounds.y||i<o.gridBounds.y||e<0||e>o.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!1);0<=r.itemIndex&&this._item.resizeTo(r)}return!0}return!1},p.prototype._doEnded=function(){this.$_stopTimer(),h.prototype._doEnded.call(this)},p.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},p.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},p.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._loop++):r<n.gridBounds.y&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),0<=(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},p);function p(t,e,i){var o=h.call(this,t,"rowsSelectTracker",e,i)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}e.RowsSelectTracker=c;var d,_=(i(f,d=r),f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},f.prototype._getItem=function(){return this._item},f.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=r.pointToIndex(t,e,i,!0)),n.itemStyle=st.SelectionStyle.ROWS,o?this._item=0<n.count&&n.getItem(0):(n.clear(),this._item=n.add(a,a,st.SelectionStyle.COLUMNS)),Boolean(this._item)},f.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<o.gridBounds.x||e>o.clientRect.right||i>o.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!1);null!=r.column&&this._item.resizeTo(r)}return!0}return!1},f.prototype._doEnded=function(){this.$_stopTimer(),d.prototype._doEnded.call(this)},f.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},f.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},f.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._loop++):o<n.gridBounds.x&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):r<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},f);function f(t,e,i){var o=d.call(this,t,"columnsSelectTracker",e,i)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._rowPrevLoop=0,o._rowLoop=0,o._interval=0,o}e.ColumnsSelectTracker=_});t(Gt);Gt.SelectTracker,Gt.BlockSelectTracker,Gt.RowsSelectTracker,Gt.ColumnsSelectTracker;var Ht=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),s.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:t&&r.prototype.assignFrom.call(this,t)},s);function s(t){var e=r.call(this)||this;return e._visible=!0,t&&e.assignFrom(t),e}e.TooltipOptions=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t},enumerable:!0,configurable:!0}),u.prototype.show=function(t,e,i,o){this._showing=!0;try{this.$_show(t,e,i,o)}finally{this._showing=!1}},u.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},u.prototype.$_createElement=function(){var t=document.createElement("div");return t.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),z.Utils.isMobile()&&t.addEventListener("touchend",this.$_touchendHandler.bind(this),!1),this.$_disableSelection(t),this._span=document.createElement("span"),t.appendChild(this._span),this.$_disableSelection(this._span),t},u.prototype.$_touchendHandler=function(t){t.preventDefault(),this.hide()},u.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},u.prototype.$_show=function(t,e,i,o){var r=this._element,n=t.message;if(r&&n){this._span.innerHTML=n.replace(/\n/g,"<br>"),z.Utils.setClassName(r,"rg-tooltip");var s=r.style;s.position="absolute",s.left=e+"px",s.top=i+"px",s.overflow="hidden",s.zIndex="3000",this._container._container.appendChild(r);var a=r.getBoundingClientRect(),l=this._container._container.getBoundingClientRect();s.left=a.right>l.right?Math.max(l.right-a.width-l.left-2,0)+"px":r.style.left,a.bottom>l.bottom&&(r.style.top=o?Math.max(0,i-(a.bottom-l.bottom))+"px":Math.max(i-a.height-l.bottom,0)+"px"),s.visibility="visible"}},u);function u(t){var e=a.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._showing=!1,e._container=t,e._element=e.$_createElement(),e}e.ToolTipView=l;var h,c=(h=ce.Base,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},Object.defineProperty(p.prototype,"visible",{get:function(){return this._active},enumerable:!0,configurable:!0}),p.prototype.show=function(t,e,i,o){if(!this._active&&(this.close(),(t=t instanceof n?t:t?new n(t):null)&&t.visible)){this._tipView||(this._tipView=new l(this._container)),this._tipView.show(t,e,i,o);var r=this._container.gridView;return r&&this._pos.set(r.mouseX,r.mouseY),this._active=!0}return!1},p.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!(!this._active||(this._tipView&&this._tipView.hide(),this._active=!1))},p);function p(t){var e=h.call(this)||this;return e._active=!1,e._pos=new rt.Point,e._container=t.container,e}e.TooltipManager=c});t(Ht);Ht.TooltipOptions,Ht.ToolTipView,Ht.TooltipManager;var Ut=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=nt.LayerElement,i(s,r),s.prototype._getCssSelector=function(){return"rg-focus"},s.prototype._initDom=function(t){r.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none")},s);function s(){return r.call(this,"focusView")||this}e.FocusView=n;var a,l=(a=nt.LayerElement,i(u,a),u.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,a.prototype._doDispose.call(this)},u.prototype.updateElement=function(t,e,i,o){this._focusView.setBounds(t,0,i,o)},u.prototype._initDom=function(t){a.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},u);function u(){var t=a.call(this,"focusMask")||this;return t._focusView=new n,t.addChild(t._focusView),t}var h,c=(h=nt.LayerElement,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},p.prototype._getCssSelector=function(){return"rg-rowblock"},p.prototype._initDom=function(t){h.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},p);function p(){var t=h.call(this,"rowBlockView")||this;return t.visible=!1,t}e.RowBlockView=c;var d,_=(d=nt.LayerElement,i(f,d),f.prototype._getCssSelector=function(){return"_rg-col-resizer_"},f.prototype._initDom=function(t){d.prototype._initDom.call(this,t)},f);function f(){return d.call(this,"headerCellResizer")||this}e.HeaderCellResizer=_;var y,m=(y=nt.LayerElement,i(g,y),g.prototype._doDispose=function(){this._model=null,y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"model",{set:function(t){this._model=t},enumerable:!0,configurable:!0}),g.prototype._getCssSelector=function(){return"rg-header rg-header-cell _rg-header-cell-feedback_"},g.prototype._initDom=function(t){y.prototype._initDom.call(this,t)},g.prototype._doDraw=function(t){this.dragging||ct.HeaderElement.renderCell(this._model,t)},g);function g(){var t=y.call(this,"headerCellFeedback")||this;return t.dragging=!1,t}e.HeaderCellFeedback=m;var b,v=(b=nt.LayerElement,i(C,b),C.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},C.prototype._initDom=function(t){b.prototype._initDom.call(this,t)},C.prototype._doDraw=function(t){},C);function C(){return b.call(this,"headerCellMover")||this}e.HeaderCellMover=v;var w,E=(w=Ot.VisualTool,i(x,w),x.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._focusMask&&this._focusMask.dispose(),this._focusMask=null,this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,w.prototype._doDispose.call(this)},Object.defineProperty(x.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!0,configurable:!0}),x.prototype.setFocused=function(t,e){if(this._grid.isValid(t))return this._grid.setFocusedIndex(t,e,!0)},x.prototype.layoutChanged=function(){this.$_resetFocusedView(),this.$_resetRowBlockMask(),this._doLayoutChanged()},x.prototype.resetFocused=function(){this.$_resetFocusedView()},x.prototype.focusedIndexChanging=function(t){},x.prototype.focusedIndexChanged=function(t,e){this.$_resetFocusedView()},x.prototype.currentRowChanged=function(t,e){var i=this.grid,o=i.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,o.rowBlockType!=W.RowMaskType.NONE){var r,n=o.rowBlockCallback;if(n)(r=n(i,e))?(this._rowBlockStart=r.start,this._rowBlockEnd=r.end):this._rowBlockStart=this._rowBlockEnd=-1}this.$_resetRowBlockMask()},x.prototype.getNextRequest=function(t,e,i,o){return null},x.prototype.isMouseEventTarget=function(t){if(t instanceof dt.CellElement){var e=t.getAncestor(ht.TableBaseElement);if(e)return e.getContentAt(t.index)==this.mouseEventTarget}return w.prototype.isMouseEventTarget.call(this,t)},x.prototype._doSetFocus=function(){this.grid.editController.setFocus(!0,!1)},x.prototype._findTableCell=function(t){for(var e=t||this.mouseEventTarget;e&&!(e instanceof HTMLTableCellElement);)e=e.parentElement;return e instanceof HTMLTableCellElement&&this.grid.getTableView(e)?e:null},x.prototype._doLayoutChanged=function(){},x.prototype.$_resetFocusedView=function(){var t=this._grid,e=t.layoutManager,i=t.displayOptions,o=(i.showInnerFocus,t.focusedIndex),r=!1,n=!1;if(i.focusVisible&&t.isValid(o)){var s=t.getFocusedCellView(o);if(s){var a=t.getBodyView(s),l=a.getCellRectAt(e,o);if(0<(l=a.boundsByContainer(l)).width&&0<l.height){var u=0,h=l.width;if(!o.colFixed&&!o.rightFixed){var c=e.fixedContentBounds;u=Math.max(0,c.right-l.x),h=Math.max(0,l.width-u),c=e.rightContentBounds,h-=l.right-c.x}if(0<h){this._focusMask.updateElement(-u,0,l.width,l.height),(c=e.footerBounds).y+=e.contentBounds.y;var p=Math.max(0,l.bottom-c.y);l.width=h,l.x+=u,l.height=Math.max(0,l.height-p),this._focusMask.setRect(l),r=!0}}}var d=i.rowFocusType;if(d!=W.RowMaskType.NONE){var _=e.footerBounds.y,f=e.fixedItemCount,y=o.itemIndex;if(0<=(y=f<=y?y-e.topIndex:y)&&y<=e.itemCount-1){switch((l=e.getItemBounds(y)).y+=e.contentBounds.y+e.bodyBounds.y,l.bottom>_&&(l.bottom=_),d){case W.RowMaskType.DATA:l.x=t.fixedContentPane.x,l.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case W.RowMaskType.FILL:l.x=0,l.width=t.width;break;case W.RowMaskType.ROW:l.x=0,l.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}this._rowFocusView.setRect(l),n=!0}else n=!1}}this._rowFocusView.visible=n,this._focusMask.visible=r,this._focusMask.visible},x.prototype.$_resetRowBlockMask=function(){var t=this.grid,e=t.layoutManager,i=e.fixedItemCount,o=t.topItem,r=Math.max(this._rowBlockStart-o+i,i),n=Math.min(Math.max(this._rowBlockEnd-o+i),e.itemCount+i-1);if(this._rowBlockMask.visible=0<=r&&0<=n&&r<e.itemCount&&r<=n&&this._rowBlockStart!==this._rowBlockEnd,this._rowBlockMask.visible){var s=e.footerBounds.y,a=e.getItemBounds(r),l=e.getItemBounds(n);switch((a=a.union(l)).y+=e.contentBounds.y+e.bodyBounds.y,a.bottom>s&&(a.bottom=s),t.displayOptions.rowBlockType){case W.RowMaskType.DATA:a.x=t.fixedContentPane.x,a.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case W.RowMaskType.FILL:a.x=0,a.width=t.width;break;case W.RowMaskType.ROW:a.x=0,a.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}this._rowBlockMask.setRect(a)}},x.prototype._doCancel=function(t){t.closeFilterSelector(),t.isEditing()?t.cancelEditor(!0):t.itemEditCancel()&&t.cancel()},x.prototype._doEnter=function(e,i,t){var o=e.isEditing();if(o&&!i.enterToTab)e.commitEditor(!0);else{var r=t.clone(),n=i.skipReadOnly,s=i.skipReadOnlyCell;if(e.isValid(r))if(i.enterToNextRow&&r.itemIndex<e.itemCount-1)r.down(),s&&this._checkReadOnly(r)&&(this._skipReadOnlyCell(r,1)||r.assign(t));else if((!o||i.enterToTab)&&i.crossWhenExitLast&&(r.isLast||i.skipReadOnly&&r.isEditableLast())&&r.itemIndex<e.itemCount-1)r.down(),r.home(),n&&this._skipReadOnly(r,1);else if((!o||i.enterToTab)&&i.commitWhenExitLast&&r.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof $.ValidationError&&(t=e._fireValidationFail(r.item.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(r.down(),r.home()))}else i.enterToTab&&(e.isEditing()||this._checkReadOnly(r))?(e.isEditing()&&e.commitEditor(!0),r.next(),n&&!this._skipReadOnly(r,1)&&r.assign(t)):i.enterToEdit||(r.next(),n&&!this._skipReadOnly(r,1)&&r.assign(t));else r.normalize(e);X.CellIndex.areEquals(r,t)?e.isValid(r)&&i.enterToEdit&&!e.isEditing()&&t&&t.dataColumn&&!this._checkReadOnly(t)&&e.showEditor(t):this.setFocused(r,!0)}return!0},x.prototype._doTab=function(e,i,t,o,r,n){var s=t.clone();if(e.isValid(s)){if(i.useTabKey){var a=i.exitGridWhenTab;if(r){if(i.crossWhenExitLast&&(s.isFirst||i.skipReadOnly&&s.isEditableFirst)&&0<s.itemIndex?(s.up(),s.end()):s.prev(),i.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(t),X.CellIndex.areEquals(s,t)&&a){switch(a){case"row":e._exiting=!0;break;case"grid":e._exiting=s.itemIndex<=0}if(e._exiting)return!1}}else{if(i.crossWhenExitLast&&(s.isLast||i.skipReadOnly&&s.isEditableLast())&&s.itemIndex<e.itemCount-1)s.down(null,i.skipReadOnly&&s.isEditableLast&&i.crossWhenExitLast),s.home();else if(i.commitWhenExitLast&&s.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof $.ValidationError&&(t=e._fireValidationFail(s.itemIndex,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(s.down(),s.home()))}else s.next();if(i.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(t),X.CellIndex.areEquals(s,t)&&a){switch(a){case"row":e._exiting=!0;break;case"grid":e._exiting=s.itemIndex>=e.itemCount-1}if(e._exiting)return!1}}return X.CellIndex.areEquals(s,t)||this.setFocused(s,!0),z.Utils.isMobile&&n&&n.preventDefault&&n.preventDefault(),!0}}else s.normalize(e),this._skipReadOnly(s,1);return!(e._exiting=!0)},x.prototype._checkReadOnly=function(t){return this.grid.isValid(t)&&t.dataColumn,!0},x.prototype.checkReadOnly=function(t){return this._checkReadOnly(t)},x.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(0<e){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},x.prototype.skipReadOnly=function(t,e){return this._skipReadOnly(t,e)},x.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,r=!t.dataColumn.isWritable()&&!0;if(!r&&o.editOptions.skipReadOnlyCell){var n=this._skipIndex;n.assign(t),r=!this._checkReadOnly(n)}return r},x.prototype._commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case q.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case q.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case q.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof $.ValidationError)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof $.AbortError)return!1;throw t}return!1},x.prototype._doColumnHeaderClicked=function(t,e){},x);function x(t,e){var i=w.call(this,t,e)||this;i._focusMask=new l,i._rowFocusView=new R,i._rowBlockMask=new c,i._rowBlockStart=-1,i._rowBlockEnd=-1;var o=i._grid=t.gridView;return i._skipIndex=o.getIndex(),o.addFeedbackElement(i._rowBlockMask),o.addFeedbackElement(i._rowFocusView),o.addFeedbackElement(i._focusMask),i}e.GridTool=E;var I,O=(I=nt.LayerElement,i(S,I),S.prototype._doDispose=function(){I.prototype._doDispose.call(this)},S.prototype._getCssSelector=function(){return"rg-rowhover"},S.prototype._initDom=function(t){I.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},S);function S(){var t=I.call(this,"rowHoverView")||this;return t.visible=!1,t}e.RowHoverView=O;var D,R=(D=nt.LayerElement,i(P,D),P.prototype._doDispose=function(){D.prototype._doDispose.call(this)},P.prototype._getCssSelector=function(){return"rg-rowfocus"},P.prototype._initDom=function(t){D.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},P);function P(){var t=D.call(this,"rowFocusView")||this;return t.visible=!1,t}e.RowFocusView=R;var T,k=(i(L,T=E),L.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),T.prototype._doDispose.call(this)},L.prototype._doMouseDown=function(t){var e=this.grid,i=t.mouseX,o=t.mouseY,r=t.ctrlKey||t.metaKey;this._hideTooltip(),e.closePopups();var n=this._clickCell=null;if(0==t.button||e.displayOptions.rightClickable){if(null!=(n=this._clickCell=this._findTableCell())&&e.getTableView(n)instanceof bt.GridBodyElement){var s=e.getDataCellIndex(n);console.log("("+n.parentElement.$_row+", "+e.columnByHash(n.$_col)+") cell clicked at "+n.parentElement.$_idx),e.setFocusedIndex(s,!0)}if(0==t.button){var a=this.mouseEventTarget,l=this._getSelectRequest(a,i,o,r,t.shiftKey)||this._getEditRequest(a,i,o,r,t.shiftKey),u=this._getDragTracker(l,i,o);this.dragTracker=u}}var h=this.dragTracker;h&&h.startWhenCreated&&(h instanceof Gt.SelectTracker&&t.shiftKey||this._startDragTracker(i,o,!1))},L.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,r=this._findTableCell(),n=o.getCellType(r);if(o.canHovering)if(n===W.TableCellType.DATA){var s=o.getBodyView(r).bodyCellByCell(r);o.$_setHoveredCell(s),this.$_setHoveredCell(s,e,i)}else n===W.TableCellType.HEADER&&(s=o.getHeaderView(r).tableCellByCell(r),this.$_setHoverdHeaderCell(s,e,i));else this._hideTooltip();if(this.dragTracker)this._hideTooltip();else{o.setCursor(this.mouseEventTarget,W.Cursor.AUTO);var a=this._getEditRequest(this.mouseEventTarget,e,i,!1,!1);a&&a.cursor&&o.setCursor(this.mouseEventTarget,a.cursor)}},L.prototype._doMouseUp=function(t){var e=t.mouseX,i=t.mouseY,o=(this.findElementAt(e,i,!1),this._findTableCell()),r=this.grid;if(r.setCursor(this.mouseEventTarget,W.Cursor.AUTO),o&&o==this._clickCell&&r.getCellType(o)===W.TableCellType.HEADER){var n=r.headerView.columnByCell(o);this.$_columnHeaderClicked(t,n)}},L.prototype._doClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,r=(this.findElementAt(e,i,!1),this._findTableCell());if(r&&r==this._clickCell){var n=this.grid.getCellType(r);if(n==W.TableCellType.CHECK)this._checkCellClicked2(r,t.shiftKey);else if(n==W.TableCellType.DATA){var s=o.getBodyView(r).bodyCellByCell(r);if(s.isCellButton(t.target))return void this.$_cellButtonClicked(s);var a=mt.DataCellRenderer.getRendererStyle(r),l=o.getDataCellIndex(r),u=l.valueColumn.rendererObj;if(u instanceof mt.CheckCellRenderer){var h=o.body.getCell(l,!1);t.target instanceof HTMLInputElement&&this._performRendererClick(h,u)}else if(a===mt.LinkCellRenderer.STYLE){if(t.target instanceof HTMLAnchorElement){if(p=o.linkCellClickedCallback){var c=o.getDataCellIndex(r);p.call(o,o,c),t.preventDefault(),t.stopImmediatePropagation()}return}}else if(a==mt.IconCellRenderer.STYLE);else if(a==mt.ImageCellRenderer.STYLE);else if(a==mt.ButtonCellRenderer.STYLE){var p;if(t.target instanceof HTMLButtonElement&&(p=o.buttonCellClickedCallback)){var d=o.getDataCellIndex(r);p.call(o,o,d)}}}}},L.prototype._doDblClick=function(t){var e=this.grid,i=this.focused,o=e.getItem(i.itemIndex),r=this._findTableCell();if(this.findElementAt(t.mosueX,t.mouseY,!1),r&&r==this._clickCell){console.log("DOUBLE CLICK CELL: "+r);var n=e.getCellType(r);if(o instanceof q.DataItem&&n==W.TableCellType.DATA){var s=e.getDataCellIndex(r);X.CellIndex.areEquals(s,i)&&e.showEditor(s)}}},L.prototype._doMouseWheel=function(t){var e=this.grid,i=e.displayOptions;if(i.wheelEnabled){var o=t.shiftKey||z.Utils.isChrome&&t.wheelDeltaX||z.Utils.isFirefox&&1==t.axis||z.Utils.isOpera&&t.wheelDeltaX;if(o=o&&0!==i.wheelScrollHorz){var r=e.leftPos,n=Math.abs(i.wheelScrollHorz||16)*(0<t.wheelDelta?-1:1);return e.leftPos=r+n,!(!z.Utils.isIE&&!z.Utils.isEdge&&i.wheelEventPropagate&&r==e.leftPos)}var s=e.topIndex,a=Math.abs(i.wheelScrollLines);return a=a||3,i.wheelAccelDelay,e.topIndex=e.topIndex+(0<t.wheelDelta?-a:a),!i.wheelEventPropagate||s!=e.topIndex}return!1},L.prototype._doMouseEnter=function(t){},L.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(e,i)},L.prototype._doMouseOver=function(t){},L.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},L.prototype._doKeyDown=function(t){var e=t.keyCode,i=t.ctrlKey,o=t.shiftKey,r=this.grid,n=r.editOptions,s=r.layoutManager,a=n.skipReadOnly,l=n.skipReadOnlyCell,u=r.focusedIndex,h=u.clone(),c=z.Utils.isMac,p=r.popupMenuManager;if(p.isShow()&&z.Utils.included(e,W.Keys.LEFT,W.Keys.RIGHT,W.Keys.UP,W.Keys.DOWN,W.Keys.ENTER,W.Keys.SPACE))return p.keyDown(t),!0;if(e==W.Keys.ESCAPE)r.closePopups(),this._doCancel(r);else{if(e==W.Keys.ENTER)return this._doEnter(r,n,h);if(e==W.Keys.TAB)return this._doTab(r,n,h,i,o,t);if(e==W.Keys.F2)!r.isEditing()&&h.dataColumn&&r.showEditor(h,o);else{if(e==W.Keys.Z&&i)return r.undo();if(e==W.Keys.Y&&i)return r.redo();if(e==W.Keys.INSERT)n.appendWhenInsertKey||0==r.itemCount?r.append():r.insert(h.item,t.shiftKey,i);else{if(e==W.Keys.DELETE)return i&&o?(r.revertSelection(),!0):i?(r.deleteSelection(),!0):(o&&r.eraseSelection(),!1);if(z.Utils.included(e,W.Keys.HOME,W.Keys.END,W.Keys.RIGHT,W.Keys.LEFT,W.Keys.DOWN,W.Keys.UP,W.Keys.PAGEDOWN,W.Keys.PAGEUP)){var d=r.itemCount;if(e==W.Keys.DOWN&&0==d)return r.append(),!0;if(!r.isValid(h))return h.normalize(r),this.setFocused(h,!0),!0;switch(e){case W.Keys.LEFT:h.layout?0<h.layout.vindex&&(h.layout=r.getVisibleLayout(h.layout.vindex-1)):h.layout=r.getVisibleLayout(0);break;case W.Keys.HOME:if(i){var _=h.clone();if(h.first(),a&&this._checkReadOnly(h)&&!this._skipReadOnlyCell(h,1,_)){h.assign(u);break}}else h.home(),this._skipReadOnly(h,1);break;case W.Keys.RIGHT:h.layout?h.layout.vindex<r.visibleLayoutCount-1&&(h.layout=r.getVisibleLayout(h.layout.vindex+1)):h.layout=r.getVisibleLayout(0);break;case W.Keys.END:if(i){if(_=h.clone(),h.last(),a&&this._checkReadOnly(h)&&!this._skipReadOnlyCell(h,-1,_)){h.assign(u);break}}else h.end(),this._skipReadOnly(h,-1);break;case W.Keys.UP:h.itemIndex<0?h.itemIndex=0:0<h.itemIndex&&h.itemIndex--;break;case W.Keys.PAGEUP:h.itemIndex<0?h.itemIndex=0:0<h.itemIndex&&(h.itemIndex-=s.fullItemCount);break;case W.Keys.DOWN:try{if(h.itemIndex==d-1&&h.isBottom){if(h.isBottom&&this._commitCancel(h.item,n))return!0;r.append(),i&&c?h.last():h.down(r.isItemEditing(h.item))}else if(i&&c)h.last();else{if(i)return r.topIndex=r.topIndex+1,!0;h.down(r.isItemEditing(h.item))}}finally{l&&this._checkReadOnly(h)&&(this._skipReadOnlyCell(h,1)||h.assign(u))}break;case W.Keys.PAGEDOWN:h.itemIndex<0?h.itemIndex=0:h.itemIndex<r.itemCount-1&&(h.itemIndex+=s.fullItemCount)}return o&&0<r.selections.count?(this.setFocused(h,!1),r.selections.getItem(0).resizeTo(h)):this.setFocused(h,!0),!0}}}}return T.prototype._doKeyDown.call(this,t)},L.prototype._doKeyPress=function(t){return!1},L.prototype._getSelectRequest=function(t,e,i,o,r){var n=this.grid,s=n.displayOptions,a=s.selectionMode,l=s.selectionStyle,u=this._findTableCell(t);if(!u)return null;var h=n.getCellType(u);if(h==W.TableCellType.INDICATOR){if(n.rowIndicator.selectable&&a!=st.SelectionMode.NONE&&l!=st.SelectionStyle.NONE&&!st.isSingleSelectionStyle(l))return new Ft.SelectRequest(n.getIndex(n.rowIndicatorView.getCellIndex(u)),st.SelectionStyle.ROWS)}else if(h==W.TableCellType.HEADER){if(o){var c=n.headerView.columnByCell(u);if(n.rowIndicator.selectable&&a!=st.SelectionMode.NONE&&l!=st.SelectionStyle.NONE&&!st.isSingleSelectionStyle(l))return new Ft.SelectRequest(n.getIndex(-1,c),st.SelectionStyle.COLUMNS)}}else if(h==W.TableCellType.DATA){var p=n.getDataCellIndex(u);if(p.layout,a!=st.SelectionMode.NONE&&l!=st.SelectionStyle.NONE&&!st.isSingleSelectionStyle(l))return 0<n.selections.count&&r?new Ft.SelectRequest(p,n.selections.itemStyle):new Ft.SelectRequest(p,l);this.grid.displayOptions.selectionStyle}return null},L.prototype._getEditRequest=function(t,e,i,o,r){var n=this.grid,s=n.layoutManager,a=n.displayOptions,l=this._findTableCell(t);if(!l)return null;var u=n.getTableView(l);if(u instanceof pt.RowIndicatorElement);else if(u instanceof ct.HeaderElement){if(t instanceof HTMLInputElement)return null;if(o);else{var h=(p=u.layoutByCell(l)).firstColumn,c=n.cellToContainer(l,rt.Point.EMPTY.setEmpty());if(a.columnResizable&&(!h||h.resizable)&&(n.fixedOptions.resizable||p.root.vindex>=s.fixedLayoutCount&&p.root.vindex<s.rightFirstLayout)&&(c.x+=p.cellWidth,e>=c.x-3&&e<=c.x+3))return this._colResizeReq.init(p,e,i,e-c.x);if(a.columnMovable&&(!h||h.movable)&&(!p.isRoot||n.canMoveIndex(p.root.vindex)))return this._colMoveReq.init(p,e,i,e-c.x)}}else if(u instanceof bt.GridBodyElement){var p;h=(p=n.getDataCellIndex(l).layout).firstColumn}return null},L.prototype._getDragTracker=function(t,e,i){if(t instanceof Ft.SelectRequest)switch(t.style){case st.SelectionStyle.ROWS:return new Gt.RowsSelectTracker(t,e,i);case st.SelectionStyle.COLUMNS:return new Gt.ColumnsSelectTracker(t,e,i);case st.SelectionStyle.BLOCK:return new Gt.BlockSelectTracker(t,e,i)}else{if(t instanceof Ft.ColumnResizeRequest)return new $t.ColumnResizeTracker(t,this._cellResizer);if(t instanceof Ft.ColumnMoveRequest)return new $t.ColumnMoveTracker(t,this._cellFeedback,this._cellMover)}return null},L.prototype._checkCellClicked2=function(t,e){var i=this.grid,o=i.checkBar,r=i.checkBarView;if(i.editOptions.checkable){var n=i.checkBar,s=i.getItem(t.parentElement.$_row);if(s.checkable&&(n.showGroup||0<=s.dataRow)){var a=i.checkBarView.getCheckBox(t);if(a){var l=s.index,u=r._prevChecked;if(i.makeItemVisible(l),e&&0<=u&&!o.exclusive){for(var h=i.getItem(r._prevChecked),c=[],p=Math.min(u,l);p<=Math.max(u,l);p++){var d=i.getItem(p);d.checkable&&0<=d.dataRow&&c.push(d)}0<c.length&&i.itemSource.checkItems(c,h.checked,!0)}else i.itemSource.checkItem(s,a.checked,n.exclusive,!0),r.$_setPrevChecked(s.index)}}}},L.prototype._performRendererClick=function(t,e,i){var o=t.index;this.grid.edit(o)&&e.performEdit(this.grid,t)},L.prototype._doColumnHeaderClicked=function(t,e){if(T.prototype._doColumnHeaderClicked.call(this,t,e),2!=t.button){var i=e,o=this.grid;if(!o.isEmpty()&&i){var r=o.headerView.tableCellByCell(this._clickCell);t.target===r.check?(r.check.checked=i.checked=!i.checked,o._columnCheckedChanged(i)):t.target===r.filter&&i.hasFilters?o.selectColumnFilters(r):i.sortable&&o.sortingOptions.enabled&&o.sortColumn(i,t)}}},L.prototype.$_columnHeaderClicked=function(t,e){var i=2==t.button;this.grid._fireColumnHeaderClicked(e,i,t),this._doColumnHeaderClicked(t,e)},L.prototype.$_setHoveredCell=function(t,e,i){if(t!=this._hoveredCell){this._hoveredCell=t,this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(0<o){var r=this;this._tooltipShowTimer=setTimeout(function(){r.$_showTooltip2(t)}.bind(r),o)}else this.$_showTooltip2(t)}},L.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._hoveredCell=null,this._hoveredHeaderCell=null,this._tooltipIndex.reset()},L.prototype.$_showTooltip2=function(t){var e=this.grid,i=t.layout.firstColumn,o=t.item.dataId,r=e.validationManager._cellList[o]&&e.validationManager._cellList[o][i.dataIndex],n=this._tempIndex.set(t.item.index,t.layout.firstColumn),s=this._tooltipOptions;if(e.editOptions.hintOnError&&i&&e.isItemEditing(t.item)&&i.error||r)s.message=r?r.message:i.error.message||i.error,this.$_showTooltip(t,n,s);else{var a=t.renderer;if(a&&a.showTooltip&&!X.CellIndex.areEquals(n,this._tooltipIndex)){var l=a.getTooltip(t,n);if(l||e.displayOptions.showEmptyTooltip){var u=e._fireShowTooltip(n,l);u&&(this._tooltipOptions.assignFrom(u),this.$_showTooltip(t,n,this._tooltipOptions))}}}},L.prototype.$_showTooltip=function(t,e,i){var o=this.grid,r=o.tooltipManager,n=o.layoutManager;if(!r.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(n,e),l=(a=s.boundsByContainer(a)).x,u=a.y+a.height;r.show(i,l,u,!0),this._tooltipCell=t,this._tooltipIndex.assign(e)}},L.prototype.$_setHoverdHeaderCell=function(t,e,i){if(t!=this._hoveredHeaderCell){console.log("HOVERED HEADER CELL: "+t),this._hoveredHeaderCell=t,this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(0<o){var r=this;this._tooltipShowTimer=setTimeout(function(){r.$_showHeaderTooltip2(t)}.bind(r),o)}else this.$_showHeaderTooltip2(t)}},L.prototype.$_showHeaderTooltip2=function(t){var e=this.grid;if(e.header.showTooltip&&this._tooltipCell!=t&&t.showTooltip){var i=t.tooltip||t.text;if(i){var o=e._fireShowHeaderTooltip(t.layout.firstColumn,i);o&&(this._tooltipOptions.assignFrom(o),this.$_showHeaderTooltip(t,this._tooltipOptions))}}},L.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,r=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var n=r.getHeaderCellRect(t.layout),s=n.x,a=n.y+n.height;o.show(e,s,a,!0),this._tooltipCell=t}},L.prototype.$_cellButtonClicked=function(t){var e=this.grid,i=t.layout.firstColumn;if(i){var o=e.layoutManager,r=t.getIndex(this._tempIndex);switch(o.getMergedCell(r),i.button){case W.CellButton.POPUP:var n=i.menu,s=e.getCellViewOf(t.cell);n&&s&&e.popupMenuManager.show(n,s);break;case W.CellButton.ACTION:e._doCellButtonClicked(r);break;case W.CellButton.IMAGE:}}},L);function L(t,e){var i=T.call(this,t,e)||this;i._cellResizer=new _,i._cellMover=new v,i._cellFeedback=new m,i._tooltipOptions=new Ht.TooltipOptions;var o=i.grid;return i._colResizeReq=new Ft.ColumnResizeRequest(o),i._colMoveReq=new Ft.ColumnMoveRequest(o),i._tooltipIndex=new X.CellIndex(o),i._tempIndex=new X.CellIndex(o),i}e.GridSelectionTool=k});t(Ut);Ut.FocusView,Ut.RowBlockView,Ut.HeaderCellResizer,Ut.HeaderCellFeedback,Ut.HeaderCellMover,Ut.GridTool,Ut.RowHoverView,Ut.RowFocusView,Ut.GridSelectionTool;var Wt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=v.EditCommand,i(s,n),s.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},s.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},s.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},s);function s(t,e,i,o){var r=n.call(this)||this;return r._row=t,r._field=e,r._value=i,r._column=o,r._oldValue=t.getData(e),r}var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editor=null,this._editors=null,a.prototype._doDispose.call(this)},u.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},u.prototype.onEditorKeyDown=function(t,e){return e.ctrlKey,this._editor,this._grid.activeTool.keyDown(e)},u.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},u.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},u.prototype.onEditorChange=function(t){this._modified||(this._modified=!0,this._grid._editorStarted(this._editor,this._editIndex)),this.editing&&(this._grid.makeCellVisible(this._editIndex),this._grid._editorChange(this._editor,this._editIndex,this._editor.getEditValue(!1,!1)))},u.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},u.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},u.prototype.onEditorCommit=function(t){return this.commitEditor(!0)},Object.defineProperty(u.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!0,configurable:!0}),u.prototype.setFocus=function(t,e){void 0===e&&(e=!1),this.$_focusToEditor(t,e)},u.prototype.resetEditor=function(t){if(this.editing)if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor()},u.prototype.reprepareEditor=function(t){X.CellIndex.areEquals(t,this._editIndex)&&(this.editing?this._editor.selectAll():this._prepareEditor(t))},u.prototype.invalidateEditor=function(){this._dirty=!0},u.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},u.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},u.prototype.focusedIndexChanged=function(t,e){this._hideEditor(),this._grid.isValid(e)&&this._prepareEditor(e)},u.prototype.dataColumnChanged=function(t){if(t&&this._editor&&this._editIndex&&this._editIndex.dataColumn===t){var e=!t.editable||t.readOnly;e!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))}},u.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing)return this._showEditorTimer||this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)}return!1},u.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},u.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},u.prototype.commitEditor=function(t,e){if(void 0===e&&(e=!1),!this.editing||this._commiting)return!0;var i=this._editor;if(!i)return!1;var o,r,n=this._grid.editOptions,s=this._editIndex,a=s.dataColumn,l=!0,u=i._mask;this._commiting=!0;try{if(i.commit(),(this._modified||i.isEdited())&&a&&0<=a.dataIndex)try{try{if((o=u&&!u.checkValid()?Mt.CellEditor.InvalidFormat:i.getEditValue(!0,!0))===Mt.CellEditor.InvalidFormat)l=!1,n.showInvalidFormatMessage&&u&&u.showInvalidFormatMessage&&alert(u&&u.invalidFormatMessage||n.invalidFormatMessage);else if(o===Mt.CellEditor.Unselected)l=!1;else{var h={text:i.getEditText(),value:o};this._grid.getEditValue(i,s,h),o=h.value,l=this._grid.editorCommit(i,s,this._getData(s),o)}}catch(t){l=!1}this._grid.isItemEditing()?l&&(this._setData(s,o),this._grid.isItemEditing(s.item)&&(o=this._getData(s),this._grid.validateCellCommit(s,o)),this._modified=!1):this._modified=!1}catch(t){r=t,l=!1}if(this._resetting=!0,t)try{this._internalHideEditor(i),this._prepareEditor(s)}finally{this._resetting=!1}if(r){if(e)throw r;alert(r.message||r)}}finally{this._commiting=!1}return l},u.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}}},u.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof At.SearchCellEditor&&this._editor.fillItems(e,i,o)},u.prototype.buttonClicked=function(t){this._editor&&X.CellIndex.areEquals(this._editIndex,t)&&this._editor.hasButton&&this._editor.buttonClicked(this._editIndex)},u.prototype.getData=function(t){throw new Error("Method not implemented.")},u.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},u.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),this._grid._loading||this._grid._fireHideEditor(t._editIndex)},u.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},u.prototype.$_getCellEditor=function(t){var e=this._grid,i=e.body.getCell(t,!1),o=e.body.getCellStyle(i,this._style.clear()).editor||t.dataColumn.editor,r=e.delegate.getCellEditor(F.ColumnStyle.getEditorType(o));return r&&(r.initOptions(),o&&this._editor.applyOptions(o),r.setController(this)),r},u.prototype._prepareEditor=function(t){if(this._dirty=!1,this._grid.isValid(t)&&(this._hideEditor(),this._editor=this.$_getCellEditor(t),this._editor)){this._editIndex.assign(t),this._editor.setReadOnly(!1);var e=this._grid,i=e.editOptions,o=e.editorOptions,r=t.dataColumn,n=t.item,s=n.itemState,a=(q.ItemState_isInserting(s)||t.dataRow,e.canEdit(t));if(o._titleExprStatement&&this._editor.setEditorTitle(t),a){var l=void 0;void 0===l&&void 0===(l=e.getCellReadOnly(t))&&(l=i.readOnly||r.readOnly||!q.ItemState_isInserting(s)&&!e.canUpdate(n,t.dataField)),this._editor.initOptions();var u=n.dataSource,h=u?u.getField(t.dataField):null;this._readOnly=l||!h||!h.updatable||!t.dataColumn||h.dataType==W.ValueType.OBJECT,this._editor.setEditIndex(t),this._editable=!0,this._editor.clear();var c=this._getData(t);this._editor.setEditValue(c),this._editor.selectAll(),i.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||(this._showEditorTimer=setTimeout(function(){e.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),this.$_focusToEditor()}else this.$_hideEdit(t,this._editor)}},u.prototype._applyCellFont=function(){this._grid.editorOptions.applyCellFont},u.prototype._hideEditor=function(){if(this._editor)try{this._editor.clear(),this._editor.setVisible(!1)}finally{this._editor.endEdit(),this._editor=null,this._editable=!1,this.$_focusToEditor()}},u.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),this._applyCellFont(),o.setVisible(!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},u.prototype._setEditAttribute=function(t){var e=this._editor;if(e){for(var i in t)"callback"!==i&&e._editor.setAttribute(i,t[i]);t.callback&&"function"==typeof t.callback&&t.callback()}},u.prototype._editorActivated=function(t){this._grid.editorActivated(t)},u.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,r=this._editor,n=this._editIndex,s={};return!(!this._editable||!r||r.editing||!o.canShowEditor(n,s)||(this._initEditor(t,e,i),this._modified=!1,this._editorActivated(this._editor),this._setEditAttribute(s),0))},u.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditBounds(this._editIndex);t.x--,t.y--,t.width++,t.height++,z.Utils.isIE&&t.right>this._grid.width+3?this._editor.setBounds(t.x+1e4,t.y,0,0):this._editor.setBounds(t.x,t.y,t.width,t.height),t=this._grid.getEditCellBounds(this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0&&(this._resetFocused=!0)}},u.prototype.$_focusToEditor=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),(t||this._grid.$_editFocused)&&(this._grid.container._setFocusAndScroll(this._editor||this._defaultEditor,e),this.editing||this._editor&&this._editor.selectAll())},u.prototype.$_focusToContainer=function(){},u.prototype._getData=function(t){var e=t.item;if(e){var i=t.dataColumn.dataIndex;if(0<=i)return e.getData(i)}},u.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;0<=o&&(this._grid.undoable?this._grid.execute(new r(t.item,o,e,t.column)):i.setData(o,e))}},u.prototype._isEditKey=function(t){return 8==t||46<=t&&t<=90||96<=t&&t<=111||186<=t&&t<=222||t==W.Keys.ENTER&&this._grid.editOptions.enterToEdit},u);function u(t){var e=a.call(this)||this;return e._editIndex=new X.CellIndex,e._editors=[],e._starting=!1,e._editRow=-1,e._modified=!1,e._commiting=!1,e._canceling=!1,e._resetting=!1,e._dirty=!1,e._editable=!1,e._readOnly=!1,e.$_editFocused=!1,e._resetFocused=!1,e._style=new F.ColumnStyle,e._grid=t,e._defaultEditor=t.delegate.getDefaultCellEditor(),e._defaultEditor&&e._defaultEditor.setController(e),e._defaultEditor&&e._internalHideEditor(e._defaultEditor),e}e.DefaultEditController=l});t(Wt);Wt.DefaultEditController;var Kt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=mt.TextCellRenderer,i(s,r),Object.defineProperty(s.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),s.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},s);function s(){var t=r.call(this)||this;return t._valueSeparator=",",t}e.SeriesTextCellRenderer=n;var a,l=(a=mt.DataCellRenderer,i(u,a),u.prototype._getValues=function(t){return t.value||[]},u);function u(){return a.call(this)||this}var h,c=(i(p,h=l),Object.defineProperty(p.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){t!=this._baseValue&&(this._baseValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(t){t!=this._firstStyle&&(this._firstStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(t){t!=this._lastStyle&&(this._lastStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"highStyle",{get:function(){return this._highStyle},set:function(t){t!=this._highStyle&&(this._highStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(t){t!=this._lowStyle&&(this._lowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(t){t!=this._belowStyle&&(this._belowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(t){t!=this._pointStyle&&(this._pointStyle=t,this._changed())},enumerable:!0,configurable:!0}),p.prototype.renderCell=function(t,e,i,o,r){var n,s=o.childElementCount;if(0==s||r){0<s&&z.Utils.clearChildren(o),(n=document.createElement("div")).style.position="relative",n.style.height="100%",o.appendChild(n);var a=ft.SvgElement.createSVG(n).style;a.position="absolute",a.left="0px",a.top="0px",a.width="100%",a.height="100%"}var l=o.firstElementChild.firstElementChild;l.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),ft.SvgElement.renderSVG2(l,this.$_render)},p.prototype._getPoints=function(t,e,i){for(var o=t.length,r=[],n=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,u=10+(isNaN(a)||0==n?80:80*(1-(a-e)/n));r.push(l,u)}return r},p.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},p);function p(){var t=h.call(this)||this;return t._baseValue=NaN,t.$_render=function(t,e,i){var o=this._values;if(o&&o.length){for(var r=o.length,n=o[0],s=o[0],a=1;isNaN(n)&&a<r;)s=n=o[a++];for(;a<r;a++){var l=o[a];isNaN(l)||(l<n&&(n=l),s<l&&(s=l))}var u=isNaN(this._baseValue)?n:this._baseValue;isNaN(n)||this._renderChart(t,o,n,s,u)}}.bind(t),t}var d,_=(i(f,d=c),Object.defineProperty(f.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"curved",{get:function(){return this._curved},set:function(t){t!=this._curved&&(this._curved=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"styleName",{get:function(){return f.STYLE_NAME},enumerable:!0,configurable:!0}),f.prototype._getChartStyle=function(){return this._chartStyle},f.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:Math.min(i,r),l=this._getPoints(e,a,s),u=e.length,h=0;h<u-1;h++)if(t.sline(null,l[2*h]+"%",l[2*h+1]+"%",l[2*(h+1)]+"%",l[2*(h+1)+1]+"%"),n=this.pointStyle){var c=l[2*h],p=l[2*h+1];t.scircle(n,c+"%",p+"%","2")}if((n=this.firstStyle)&&(c=l[0],p=l[1],t.scircle(n,c+"%",p+"%","2")),(n=this.lastStyle)&&(c=l[2*(u-1)],p=l[2*(u-1)+1],t.scircle(n,c+"%",p+"%","2")),n=this.highStyle)for(h=0;h<u;h++)e[h]>=o&&(c=l[2*h],p=l[2*h+1],t.scircle(n,c+"%",p+"%","2"));if(n=this.lowStyle)for(h=0;h<u;h++)e[h]<=i&&(c=l[2*h],p=l[2*h+1],t.scircle(n,c+"%",p+"%","2"))},f.STYLE_NAME="rg-renderer "+(f.STYLE="rg-sparkline-renderer"),f.CHART_STYLE="rg-sparkline-renderer-chart",f);function f(){var t=d.call(this)||this;return t._chartStyle=f.CHART_STYLE,t._curved=!1,t.lastStyle="rg-sparkline-renderer-last",t.highStyle="rg-sparkline-renderer-high",t.lowStyle="rg-sparkline-renderer-low",t}e.SparkLineRenderer=_;var y,m=(i(g,y=c),Object.defineProperty(g.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"styleName",{get:function(){return g.STYLE_NAME},enumerable:!0,configurable:!0}),g.prototype._getChartStyle=function(){return this._chartStyle},g.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:r,l=e.length,u=this._getBasePoint(a,s,r),h=100/l,c=0+h/2,p=s-a,d=h*this._barWidth,_=0;_<l;_++){var f=e[_];if(!isNaN(f)){n=f<=i&&this.lowStyle?this.lowStyle:o<=f&&this.highStyle?this.highStyle:f<r&&this.belowStyle?this.belowStyle:0==_&&this.firstStyle?this.firstStyle:_==l-1&&this.lastStyle?this.lastStyle:null;var y=0==p?1:Math.max(1,Math.floor(100*(f-a)/p));t.pbounds(n,c-d/2,u,d,-y)}c+=h}},g.STYLE_NAME="rg-renderer "+(g.STYLE="rg-sparkcolumn-renderer"),g.CHART_STYLE="rg-sparkcolumn-renderer-chart",g);function g(){var t=y.call(this)||this;return t._chartStyle=g.CHART_STYLE,t._barWidth=.8,t.lastStyle="rg-sparkcolumn-renderer-last",t.highStyle="rg-sparkcolumn-renderer-high",t.lowStyle="rg-sparkcolumn-renderer-low",t}e.SparkColumnRenderer=m;var b,v=(i(C,b=c),Object.defineProperty(C.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(t){(t=Math.max(0,t))!=this._belowHeight&&(this._belowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"styleName",{get:function(){return C.STYLE_NAME},enumerable:!0,configurable:!0}),C.prototype._getChartStyle=function(){return this._chartStyle},C.prototype._renderChart=function(t,e,i,o,r){for(var n=e.length,s=100/n,a=0+s/2,l=s*this._barWidth,u=0+100*(1-this._belowHeight),h=0;h<n;h++){var c=e[h];if(!isNaN(c)&&c!=r){var p=null;c<r&&this.belowStyle&&(p=this.belowStyle);var d=c<r?100:0;t.pbounds(p,Math.floor(a-l/2),Math.floor(d),Math.floor(l),Math.floor(u-d))}a+=s}},C.STYLE_NAME="rg-renderer "+(C.STYLE="rg-sparkwinloss-renderer"),C.CHART_STYLE="rg-sparkwinloss-renderer-chart",C);function C(){var t=b.call(this)||this;return t._chartStyle=C.CHART_STYLE,t._barWidth=.8,t._belowHeight=.4,t.belowStyle="rg-sparkwinloss-renderer-below",t}e.SparkWinLossRenderer=v});t(Kt);Kt.SeriesTextCellRenderer,Kt.SparkLineRenderer,Kt.SparkColumnRenderer,Kt.SparkWinLossRenderer;var zt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){this._grid=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),s.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new Mt.LineCellEditor(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},s.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"dropdown":i=new At.DropDownCellEditor(this._grid,e);break;case"multiline":i=new Mt.MultiLineCellEditor(this._grid,e);break;case"number":i=new Mt.NumberCellEditor(this._grid,e);break;case"date":i=new Vt.DateCellEditor(this._grid,e);break;case"search":i=new At.SearchCellEditor(this._grid,e);break;case"password":i=new Mt.PasswordCellEditor(this._grid,e);break;case"line":default:i=this.getDefaultCellEditor()}(this._cellEditors[t]=i)&&i.setController(this._grid.editController)}return i},s.prototype.createRenderer=function(t){var e=null;if(t){var i=void 0,o=void 0;switch("string"==typeof t?i=t:(i=t.type||"text",o=t),i){case"text":e=new mt.TextCellRenderer;break;case"bar":e=new mt.BarCellRenderer;break;case"image":e=new mt.ImageCellRenderer;break;case"icon":e=new mt.IconCellRenderer;break;case"check":e=new mt.CheckCellRenderer;break;case"button":e=new mt.ButtonCellRenderer;break;case"shape":e=new mt.ShapeCellRenderer;break;case"link":e=new mt.LinkCellRenderer;break;case"signal":e=new mt.SignalBarCellRenderer;break;case"code39":e=new mt.Code39CellRenderer;break;case"code128":e=new mt.Code128CellRenderer;break;case"sparkLine":case"sparkline":e=new Kt.SparkLineRenderer;break;case"sparkColumn":case"sparkcolumn":e=new Kt.SparkColumnRenderer;break;case"sparkWinLoss":case"sparkwinloss":e=new Kt.SparkWinLossRenderer}e&&o&&e.assignFrom(o)}return e},s.prototype.hasEditorButton=function(t,e){return!1},s);function s(t){var e=r.call(this)||this;return e._cellEditors={},e._grid=t,e}e.GridDelegate=n});t(zt);zt.GridDelegate;var Yt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=j.EventAware,i(s,r),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),s.prototype.exists=function(t){return!1},s.prototype._changed=function(){this.fireEvent(s.CHANGED)},s.CHANGED="onLookupSourceChanged",s);function s(t){var e=r.call(this)||this;return e._id=t,e}e.LookupSource=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._tree=this._listMap=null,a.prototype._doDispose.call(this)},u.prototype.clear=function(){this._tree=this._listMap={},this._changed()},u.prototype.exists=function(t){var e;if((t=z.Utils.makeArray(t))&&0<(e=t.length)&&e<=this._levels){if(0<(e=Math.min(e,this._levels)-1)){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},u.prototype.fill=function(t,e){if(t&&0<t.length&&e&&0<e.length){for(var i=Math.min(t.length,e.length),o=0;o<i;o++){var r=z.Utils.makeArray(t[o]);this.$_add(r,e[o])}this._changed()}},u.prototype.fillRows=function(t){if(t&&0<t.length){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},u.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},u.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},u.prototype.lookup=function(t,e){var i,o;if(1<this._levels){var r=void 0,n=this._levels-1;for(i=this._tree,r=0;r<n&&(i=i[o=t[r]]);r++);}else i=this._tree;if(o=t[t.length-1],i&&o&&e){for(var s=o.split(e),a=[],l=(r=0,s.length);r<l;r++)a.push(i[s[r]]?i[s[r]]:s[r]);return a.join(e)}return i?i[o]:void 0},u.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var e,i,o=this._tree,r=[],n=[];if(1<this._levels)for(e=0,i=t.length;e<i;e++)if(t[e],!(o=o[t[e]]))return{keys:r,values:n};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)r.push(s[e]),n.push(o[s[e]])}else for(var a in o)r.push(a),n.push(o[a]);return{keys:r,values:n}},u.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,r=0,n=e.keys.length;r<n;r++)i[r]=i[r]?String(i[r]):null,o[r]=o[r]?String(o[r]):null;return e},u.prototype.$_add=function(t,e){if(t){t=z.Utils.makeArray(t);var i,o,r,n,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(o=0;o<s-1;o++)(n=a[r=t[o]])||(n={},a[r]=n),a=n;if(a[i=t[s-1]]=e,this._listMap){var l=t.slice(0,t.length-1).join("~!~"),u=this._listMap[l];z.Utils.isArray(u)||(u=[],this._listMap[l]=u),u.push(i)}}},u.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},u);function u(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);var o=a.call(this,t)||this;if(e<1)throw"LookupTable levels must be equals or greater than 1";return o._levels=e,o._tree={},o._listMap=i?{}:null,o}var h,c=(h=j.EventAware,i(p,h),p.prototype._changed=function(){this.fireEvent(p.CHANGED)},p.CHANGED="onLookupSourceProviderChanged",p);function p(){return h.call(this)||this}e.LookupSourceProvider=c;var d,_=(i(f,d=c),f.prototype.dispose=function(){return d.prototype.dispose.call(this)},f.prototype.load=function(t){if(t=z.Utils.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},f.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},f.prototype.remove=function(t){this.$_remove(t)&&this._changed()},f.prototype.getSource=function(t){return this._sources[t]},f.prototype.$_createSource=function(t){if(t){var e=new l(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},f.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),(this._sources[t.id]=e).addListener(this),e}},f.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},f.prototype.onLookupSourceChanged=function(t){this._changed()},f.CHANGED="onLookupSourceProviderChanged",f);function f(t){void 0===t&&(t=null);var e=d.call(this)||this;return e._sources={},t&&e.load(t),e}e.LocalLookupSourceProvider=_});t(Yt);Yt.LookupSource,Yt.LookupSourceProvider,Yt.LocalLookupSourceProvider;var qt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype.lastColumn=function(){throw new Error("Method not implemented.")},s.prototype.getText=function(t,e){throw new Error("Method not implemented.")},s.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},s.prototype.getRows=function(){throw new Error("Method not implemented.")},s.prototype.getCell=function(){throw new Error("Method not implemented.")},s);function s(){return r.call(this)||this}e.ClipboardData=n;var a,l=(a=ce.Base,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t},enumerable:!0,configurable:!0}),u.prototype.isEmpty=function(){return 0==this._lines.length||0==this._colCount},u.prototype.isSingle=function(){return 1==this._lines.length&&1==this._colCount},u.prototype.isBlockPaste=function(){return this._blockPaste},u.prototype.get=function(t){return this._lines[t]},u.prototype.$_parseQuoted=function(t,e){},u);function u(){var t=a.call(this)||this;return t._colCount=0,t._blockPaste=!1,t}e.ClipboardSource=l;var h,c=(i(p,h=n),p.prototype._doDispose=function(){return h.prototype._doDispose.call(this)},p.prototype.lastColumn=function(){return this._columns?this._columns[this._columns.length-1]:null},p.prototype.getText=function(t,e){var i,o,r,n,s,a,l=t.grid,u=this.$_rangeToCells(t,null,e),h=[];if(l.copyOptions.includeHeaderText)for(s=0;s<u.length;s++){var c=[];for(a=0;a<u[s].length;a++)(i=z.Utils.cast(u[s][a],G.DataColumn))?c.push(i.header.displayText):c.push("");h.push(c.join("\t"))}for(r=e.r1,n=e.r2;r<=n;r++){var p=l.getItem(r);if(0<=p.dataRow||q.ItemState_isInserting(p.itemState))for(s=0;s<u.length;s++){for(c=[],a=0;a<u[s].length;a++)(i=z.Utils.cast(u[s][a],G.DataColumn))&&!i.blankWhenCopy?(o=X.CellIndex.temp(l,r,i).clone(),c.push(t.getData(o))):c.push("");h.push(c.join("\t"))}}return h.join("\r\n")+"\r\n"},p.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+=t.getData(e)},p.prototype.$_parseQuoted=function(t,e){},p.prototype.$_rangeToCells=function(t,e,i){i.normalizeData();var o=i.c1,r=i.c2;o!=o.dataRoot&&(o=o.dataRoot),r!=r.dataRoot&&(r=r.dataRoot);var n,s,a,l,u=0,h=0,c=[],p=t.getDataRoots(),d=this._columns=[],_=p.indexOf(o),f=p.indexOf(r);for(s=_;s<=f;s++)l=p[s],d.push(l),u+=l.firstColumn?l.cols:0,h=Math.max(h,l.rows);for(s=0;s<h;s++)c.push(new Array(u));for(s=n=0,a=d.length;s<a;s++)this.$_setFields(d[s],c,n,0),n+=d[s].firstColumn?d[s].cols:0;return c},p.prototype.$_setFields=function(t,e,i,o){var r,n,s,a=z.Utils.cast(t,D.CellLayoutGroupItem);if(a)if(a.vertical)for(r=o,n=0;n<a.visibleCount;n++)s=a.getVisible(n),this.$_setFields(s,e,i,r),r+=s.rows;else for(r=i,n=0;n<a.visibleCount;n++)s=a.getVisible(n),this.$_setFields(s,e,r,o),r+=s.cols;else e[o].length>i&&(e[o][i]=t.firstColumn)},p);function p(){var t=h.call(this)||this;return t._columns=null,t}e.DefalutClipboardData=c;var d,_=(d=q.GridItem,i(f,d),Object.defineProperty(f.prototype,"isLeaf",{get:function(){throw new Error("Method not implemented.")},enumerable:!0,configurable:!0}),f);function f(){return d.call(this)||this}e.ClipboardItem=_;var y,m=(y=X.CellIndex,i(g,y),g.prototype._doDispose=function(){return y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"isLeaf",{get:function(){throw new Error("Method not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),g);function g(t,e){var i=y.call(this,t)||this;return i._item=e,i}e.ClipboardIndex=m;var b=(v.prototype.dispose=function(){return null},Object.defineProperty(v.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),v.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(t.length<0||t[0].length<0)return e;for(var i=0,o=t[0].length;i<o;i++)t[0][i].dataRoot,e.push(t[0][i].dataRoot);return e},v.prototype.getData=function(t){var e,i,o,r=this.grid,n=t.layout.firstColumn,s=r.getItem(t.itemIndex),a=r.copyOptions;if(new gt.DataCellElement,!s||!(q.ItemState_isInserting(s.itemState)||0<=s.dataRow))return"";if(o=s.getData(n.dataIndex),n&&null!=(e=r.dataSource.getField(n.dataIndex))){if(a.copyDisplayText)r.body.getCell(t,!1);else switch(e.dataType){case W.ValueType.DATETIME:case W.ValueType.DATE:i=o?String(o):"";break;case W.ValueType.BOOLEAN:i=null!=o?String(o):"";break;case W.ValueType.NUMBER:i=o==isNaN(o)?"":String(o);case W.ValueType.OBJECT:i=o&&"object"==typeof o?JSON.stringify(o):"";default:i=null!=o?String(o):""}return i&&(0<=i.indexOf("\n")||0<=i.indexOf("\r\n")||'"'==i.charAt(0))&&(i='"'+(i=i.replace(/\"/g,'""'))+'"'),i}return""},v.prototype.copyEmtpyToClipboard=function(){return""},v.prototype.copyToClipboard=function(t){return this._data.getText(this,t)},v.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},v);function v(t){this._grid=t,this._data=new c,this._appendingItem=new _,this._appendingIndex=new m(t,this._appendingItem)}e.ClipboardManager=b});t(qt);qt.ClipboardData,qt.ClipboardSource,qt.DefalutClipboardData,qt.ClipboardItem,qt.ClipboardIndex,qt.ClipboardManager;var Xt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=j.EventAware,i(s,r),s.prototype._doDispose=function(){return r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"group",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"manager",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checked",{get:function(){return null},enumerable:!0,configurable:!0}),s.prototype.click=function(){},s);function s(){var t=r.call(this)||this;return t._visible=!0,t._enabled=!0,t}var a,p=(i(l,a=n),l.prototype._doDispose=function(){this._parent=null,this._callback=null,a.prototype._doDispose.call(this)},Object.defineProperty(l.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),l.prototype.isSeparator=function(){return"-"===this._label||this._type===W.MenuItemType.SEPARATOR},l.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this._tag}},l.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(l.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!0,configurable:!0}),l.prototype._itemClicked=function(t){},l);function l(t,e){var i=a.call(this)||this;return i._checked=!1,i._parent=t,e&&i.assignFrom(e),i}e.PopupMenuItem=p;var u,d=(i(h,u=n),h.prototype._doDispose=function(){this._items&&this._items.forEach(function(t,e){t.dispose()}),this._items=null,this._parent=null,u.prototype._doDispose.call(this)},Object.defineProperty(h.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof m)return t.popupMenuManager;if(t instanceof m)return t;t=t._parent}return null},enumerable:!0,configurable:!0}),h.prototype.count=function(){return this._items?this._items.length:0},h.prototype.itemClicked=function(t){if(t.parent==this&&t.type===W.MenuItemType.RADIO){var e=t.group,i=void 0;if(e){for(var o=0;o<this._items.length;o++)(i=this._items[o])instanceof p&&i.type===W.MenuItemType.RADIO&&i.group===e&&(i.checked=!1);t.checked=!0}}var r=this.manager.popupIndex;"function"==typeof t.callback?t.callback(t,r.proxy()):this._parent instanceof m?this._parent.doMenuItemClick(t,r):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,r):this._parent.itemClicked(t)},h.prototype._load=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=t[i];if(z.Utils.isArray(r.children)&&0<r.children.length){var n=new h(r.name,this,r.children);e.push(n),n._parent=this,n._label=r.label}else n=new p(this,r),e.push(n)}return e},h.CLICKED="onPopupMenuClicked",h);function h(t,e,i){var o=u.call(this)||this;return o._name=t,o._parent=e,o._items=o._load(i),o}e.PopupMenu=d;var c,_=(c=j.EventAware,i(f,c),f._borrowView=function(t){return f.$_views.pop()||new f(t)},f._returnView=function(t){f.$_views.push(t)},f.prototype._doDispose=function(){c.prototype._doDispose.call(this)},Object.defineProperty(f.prototype,"targetView",{get:function(){return this._targetView},set:function(t){this._targetView=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"childView",{get:function(){return this._childView},set:function(t){this._childView=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!0,configurable:!0}),f.prototype.show=function(t,e,i,o,r,n,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof ue.GridBase);)l=l.parent;if(l&&(this._viewGridInside=l instanceof ue.GridBase?l.editorOptions.viewGridInside:l instanceof m&&l.grid.editorOptions.viewGridInside),i.parent instanceof ue.GridBase||i.parent instanceof m)if(this._targetView)this._targetView.getIndex(this.manager.popupIndex=new X.CellIndex(this.manager.grid));else{var u=this.manager.grid;this.manager.popupIndex=X.CellIndex.temp(u,-1,null)}this.$_show(t,this._menu,o,r,n,s)}finally{this._showing=!1}}},f.prototype.boundsByContainer=function(){return null},f.prototype.hide=function(t){if(void 0===t&&(t=!0),t&&this._parentView)this._parentView.hide(!0);else{this.$_hideChildView();var e=this._element;e&&e.parentElement&&e.parentElement.removeChild(e)}},f.prototype.hideChild=function(){this.$_hideChildView()},f.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},f.prototype.menuItemClicked=function(){},f.prototype.$_show=function(t,e,i,o,r,n){if(this._element){var s=this._element,a=this.manager.dropdownCount,l=this._viewGridInside?t._container:document.documentElement;this._menu=e,this._itemIndex=-1,z.Utils.clearElements(this._element),this.$_buildItems(e),z.Utils.disableSelection(s),l.appendChild(s);var u=e.items.length;a&&a<u||(s.style.overflow="hidden",this._element.style.removeProperty("height"));var h=z.Utils.getBrowserSize(),c=z.Utils.ieTen||z.Utils.ieOld?z.Utils.getClientRect(document.body):z.Utils.getClientRect(document.documentElement),p=z.Utils.getClientRect(t._container),d=h.width,_=h.height,f=z.Utils.getClientRect(this._element),y=window.pageXOffset||document.documentElement.scrollLeft,m=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(_-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(d-=18),this._viewGridInside?(o+p.top+f.height>p.bottom&&(o=this._parentView?p.bottom-f.height-p.top-3:o-f.height-n),i+p.left+f.width>p.right&&(i=this._parentView?p.right-f.width-p.left-3:i-f.width-r)):(this._parentView||(i+=p.left-c.left,o+=p.top-c.top),o+f.height>=_+m-3&&(o=o-f.height-3)<0&&(o=Math.max(0,_-f.height-3)),i+f.width>=d+y-3?i=Math.max(0,d-f.width-3):void 0!==r&&f.width<r&&(i+=r-f.width)),z.Utils.move(this._element,Math.max(0,i),Math.max(0,o))}},f.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=document.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",this._container.$_addListener(e,"keydown",t,!1),e},f.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,i=this._element.getBoundingClientRect(),o=this._element.offsetLeft+i.width-4,r=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=f._borrowView(this._container),this._childView.show(this._container,this,e,o,r)}},f.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),this._childView._element&&this._childView._element.parentElement&&this._childView._element.parentElement.removeChild(this._childView._element),f._returnView(this._childView)),this._childView=null},f.prototype._menuItemActived=function(t){var e=(this._currDiv=t).menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof p?i.childView&&i.$_hideChildView():(this._timer&&clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._showChild(t)},200))},f.prototype._menuItemDeactived=function(t){},f.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof d?e.enabled&&this._showChild(t):e?(this.hide(!0),e.enabled&&e.click(),this.manager.close()):this.$_hideChildView()},f.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var r=e.childNodes[i];if(r.style.background=i===t?"rgba(0,255,0,0.2)":"",i==t){if(0<this.manager.dropdownCount){var n=r.offsetTop,s=r.offsetHeight+4,a=r.offsetHeight,l=r.scrollTop;n<l?r.scrollTop=Math.max(0,r.scrollTop+(n-l)):l+a<n+s&&(r.scrollTop=r.scrollTop+n+s-(l+a))}this._menuItemActived(r)}}},f.prototype.$_buildItems=function(t){for(var e=t.items,i=[],o=0,r=e.length;o<r;o++){var n=e[o];if(n.visible){var s=document.createElement("div");if(s.menuView=this,s.menuItem=n,s.style.position="relative",s.style.cssFloat="none",s.style.width="100%",n instanceof p&&n.isSeparator()){s.className="rg-popup-separator";var a=document.createElement("hr");a.className="rg-popup-separator-hr",s.appendChild(a),s.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{this._firstItem||(this._firstItem=s),i.length=0,i.push("rg-popup-item"),n.group&&i.push("rg-popup-"+n.group),n.enabled||i.push("rg-popup-item-disabled"),s.className=i.join(" "),s.style.whiteSpace="pre",s.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),s.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),s.onmouseout=function(t){this._menuItemDeactived(event.currentTarget)}.bind(this);var l=document.createElement("span"),u=l.style;i.length=0,u.setProperty("display","inline-block"),u.setProperty("min-width","20px"),u.setProperty("min-height","7px"),u.setProperty("vertical-align","middle"),u.setProperty("pointer-events","none","important"),l.textContent="",z.Utils.included(n.type,[W.MenuItemType.CHECK,W.MenuItemType.RADIO])&&i.push(n.group?"rg-popup-radio":"rg-popup-check"),n.checked&&i.push(n.group?"rg-popup-radio-checked":"rg-popup-check-checked"),l.className=i.join(" "),l.tabIndex=-1,z.Utils.disableSelection(l),s.appendChild(l);var h=document.createElement("span");if(h.id="$popupMenu_item_"+f.$_menuId++,h.style.paddingRight="24px",h.style.pointerEvents="none",h.style.verticalAlign="middle",h.innerHTML=n.label,h.tabIndex=-1,z.Utils.disableSelection(h),s.appendChild(h),n instanceof d){var c=document.createElement("span");c.className="rg-popup-expander",s.appendChild(c),c.style.position="absolute",c.style.right="0px",c.style.width="24px",c.style.height="17px",c.style.verticalAlign="middle",c.style.setProperty("pointer-events","none","important"),c.innerHTML=" ",c.tabIndex=-1,z.Utils.disableSelection(c),s.appendChild(c)}}z.Utils.disableSelection(s),this._element.appendChild(s)}}},f.$_menuId=0,f.$_views=[],f);function f(t){var e=c.call(this)||this;return e._showing=!1,e._viewGridInside=!1,e._container=t,e._element=e._createElement(),e._element.addEventListener("contextmenu",function(t){t.preventDefault()}),e}e.PopupMenuView=_;var y,m=(y=j.EventAware,i(g,y),g.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._popupIndex=null,this._activeView=null,this._container=this._containerDom=null,y.prototype._doDispose.call(this)},Object.defineProperty(g.prototype,"popupIndex",{get:function(){return this._popupIndex},set:function(t){this._popupIndex=t.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"dropdownCount",{get:function(){return this._dropdownCount},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t},enumerable:!0,configurable:!0}),g.prototype.popupManager=function(){return this},g.prototype.isShow=function(){return!!this._mainView},g.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(z.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},g.prototype.getMenu=function(t){for(var e=this._menus.length;e--;)if(z.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return this._menus[e];return null},g.prototype.addMenu=function(t,e,i){if(void 0===i&&(i=!1),z.Utils.isWhiteSpace(t))throw"Menu name is empty.";var o=-1;if(!i&&0<=(o=this.indexOf(t)))return this._menus[o];var r=new d(t,this,e);return i&&-1<o?this._menus[o]=r:this._menus.push(r),r},g.prototype.removeMenu=function(t){var e=this.indexOf(t);-1<e&&this._menus.splice(e,1)},g.prototype.clearMenus=function(){this._menus.length=0},g.prototype.show=function(t,e,i,o,r,n){void 0===i&&(i=null),void 0===o&&(o=null),void 0===r&&(r=null),void 0===n&&(n=null);var s=this.grid;if(s.layoutManager,"string"==typeof t?t=this.getMenu(t):t instanceof d||(t=new d(null,this,t)),t){if(null!=i&&null!=o)r=isNaN(r=Math.round(r))?0:r,n=isNaN(n=Math.round(n))?0:n;else{var a=e.getBoundingClientRect(),l=s.container.getBound(),u=void 0;e instanceof jt.MergedDataCellElement||(u=a.bottom-l.y),i=a.left,o=u,r=a.width,n=a.height}this._mainView=this._activeView=_._borrowView(this._container);var h=s.getCellType(e),c=void 0;h===W.TableCellType.DATA?c=s.getBodyView(e).bodyCellByCell(e):h===W.TableCellType.HEADER&&(c=s.getHeaderView(e).tableCellByCell(e)),this._mainView.targetView=c,this._mainView.show(this._container,null,t,i,o,r,n),window.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},g.prototype.showContext=function(t,e,i,o){t&&!this._mainView&&(this._mainView=this._activeView=_._borrowView(this._container),this._mainView.show(this._container,null,t,i,o,0,0,e),window.addEventListener("mousedown",this._grolbalMouseHandler,!1))},g.prototype.close=function(){this._mainView&&(this._mainView.hide(),_._returnView(this._mainView),this._mainView.targetView=null,this._mainView=null,window.removeEventListener("mousedown",this._grolbalMouseHandler,!1))},g.prototype.keyDown=function(t){this._doKeydown(t)},g.prototype.doMenuItemClick=function(t,e){this.fireEvent(g.MENU_ITEM_CLICKED,t,e)},g.prototype._doKeydown=function(t){var e=this._activeView;switch(t.keyCode){case W.Keys.DOWN:e.changeItemIndex(1);break;case W.Keys.UP:e.changeItemIndex(-1);break;case W.Keys.LEFT:e.parentView&&(e.changeItemIndex(0),e.hideChild(),this._showingView=this._activeView=e.parentView||this._mainView);break;case W.Keys.RIGHT:e&&e.childView&&(e=this._showingView=this._activeView=e.childView).changeItemIndex(1);break;case W.Keys.ENTER:case W.Keys.SPACE:e.menuItemClicked()}},g.prototype.$_buildItems=function(t){},g.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",g);function g(t){var e=y.call(this)||this;return e._dropdownCount=0,e._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(e),e._container=t,e._containerDom=t._containerDom,e._menus=[],e}e.PopupMenuManager=m});t(Xt);Xt.PopupMenuItem,Xt.PopupMenu,Xt.PopupMenuView,Xt.PopupMenuManager;var Zt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=_.SummaryCell,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!0,configurable:!0}),s.prototype._getSummary=function(t,e){return t.headerSummaries.getItem(e)},s);function s(){return r.call(this,"summaryCell")||this}e.HeaderSummaryCell=n;var a,l=(a=_.GridSummaryObject,i(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"summaryIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),u.prototype._visibleChanged=function(){a.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},u.prototype._createCell=function(){return new n},u);function u(t){return a.call(this,t)||this}e.HeaderSummary=l;var h,c=(h=Y.VisualObject,i(p,h),Object.defineProperty(p.prototype,"visible",{get:function(){return this._visible&&0<this._visibles.length},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),p.prototype.get=function(t){return this._items[t]},p.prototype.getVisible=function(t){return this._visibles[t]},p.prototype.getHeight=function(){for(var t=0,e=0,i=this._visibles;e<i.length;e++)t+=i[e].minHeight;return t},p.prototype.assignFrom=function(t){if(z.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new l(this._grid)),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t);this.$_resetVisibles()},p.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},p.prototype.$_resetVisibles=function(){for(var t=this._visibles.length=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}},p);function p(t){var e=h.call(this,t)||this;return e._items=[],e._visibles=[],e._items.push(new l(t)),e._visibles.push(e._items[0]),e.visible=!1,e}e.HeaderSummaryCollection=c});t(Zt);Zt.HeaderSummaryCell,Zt.HeaderSummary,Zt.HeaderSummaryCollection;var Jt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Et.SummaryElement,i(g,r),g.prototype._doDispose=function(){r.prototype._doDispose.call(this)},g.prototype._getCssSelector=function(){return"rg-header-summary"},g.prototype._prepareCellContent=function(t){return document.createElement("div")},g.prototype._doMeasure=function(t,e,i){return lt.Size.create(e,this.model.getHeight())},g.prototype._doPrepareTableExtents=function(t){var e=this._heights,i=this.height,o=Math.floor(i/(t.headerSummaryCount*t.headerSummaryRows));if(e.length=this._getTableRowCount(t)+1,(e[0]=0)<e.length){for(var r=1;r<e.length-1;r++)e[r]=e[r-1]+o;e[r]=i}},g.prototype._doLayoutContent=function(t){var e=t.grid,i=this.model,o=t.headerSummaryCount,r=t.cellLayouts._summaryCells,n=r.length,s=this._getStartCell(t),a=this._getEndCell(t);this._refreshCells(t,o,r,this._tbody);for(var l=0;l<o;l++){var u=i.getVisible(l),h=u.styleName;h=h?g.CELL_CSS+" "+h:g.CELL_CSS;for(var c=0;c<r.length;c++)for(var p=this._cells[l*n+c],d=r[c],_=s;_<=a;_++){var f=p[_-s],y=d[_];if(y.isProxy)f.clear(!1),f.setText("");else if(y instanceof D.CellLayoutGroupItem)f.set(y._cspan,y._hspan,!0),f.setText("");else{f.set(y._cspan,y._hspan,!0);var m=u.getCell(y);this._updateCell(e,u,m,f)}f.setClassName(h)}}},g.prototype._getTableRowCount=function(t){return t.headerSummaryRows*t.headerSummaryCount},g.prototype._getTableRowHeight=function(t,e){return this._heights[e+1]-this._heights[e]},g.prototype._updateCell=function(t,e,i,o){o.setText(i.text||"")},g.CELL_CSS="rg-header-summary-cell",g);function g(t){var e=r.call(this,t,"headerSummaryView")||this;return e._heights=[],e}e.HeaderSummaryElement=n;var s,a=(i(l,s=n),l.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},l.prototype._getStartCell=function(t){return 0},l.prototype._getEndCell=function(t){return t.fixedCellCount-1},l.prototype._getCellCount=function(t){return t.fixedCellCount},l.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.FixedHeaderSummaryElement=a;var u,h=(i(c,u=n),c.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},c.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},c.prototype._getEndCell=function(t){return t.cellCount-1},c.prototype._getCellCount=function(t){return t.rightCellCount},c.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},c);function c(){return null!==u&&u.apply(this,arguments)||this}e.RightHeaderSummaryElement=h});t(Jt);Jt.HeaderSummaryElement,Jt.FixedHeaderSummaryElement,Jt.RightHeaderSummaryElement;var Qt=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=dt.SelectableCellElement,i(s,r),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._changed())},enumerable:!0,configurable:!0}),s.prototype._doUpdateContent=function(t,e,i){i.textContent=this.text},s.prototype._doRender=function(t){},s);function s(){var t=r.call(this,"gridSumCellView")||this;return t._text="",t}e.GridSumCellElement=n;var a,l=(a=ht.SimpleTableElement,i(u,a),u.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},u.prototype._getCssSelector=function(){return"rg-sum"},u.prototype._doPrepareTableExtents=function(t){var e=t.grid,i=0;e.rowIndicator.visible&&(i+=t.indicatorWidth),e.stateBar.visible&&(i+=t.stateBarWidth),e.checkBar.visible&&(i+=t.checkBarWidth),0<i&&(0==this._cells.length&&this._cells.push(new n),this._cells[0].width=i),this._count=0<i?1:0},u.prototype._prepareCellContent=function(t){return document.createElement("div")},u.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count;this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var o=0;o<i;o++){var r=this.getChild(o),n=e.rowIndicator.getSumCell();r.text=e.footers.get(0).headText,r.updateCell(e,n,this.getCellContent(0,o))}},u.prototype._doRender=function(t){},u.prototype._getTableRowCount=function(t){return 1},u.prototype._getTableRowHeight=function(t,e){return this.height},u.prototype._getCellCount=function(t){return this._count},u.prototype._getCellWidth=function(t,e){return this._cells[e].width},u.prototype.$_getCellSelector=function(t){return"rg-sum-cell"},u);function u(){var t=a.call(this,null,"gridSumView")||this;return t._cells=[],t._count=0,t}e.GridSumElement=l});t(Qt);Qt.GridSumCellElement,Qt.GridSumElement;var te=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){this._selector=this._selector.dispose(),r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitBeforeFiltering",{get:function(){return this._enabled},set:function(t){t!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){t!=this._includeParentItem&&(this._includeParentItem=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selector",{get:function(){return this._selector},enumerable:!0,configurable:!0}),s.prototype.assignFrom=function(t){r.prototype.assignFrom.call(this,t),this._selector.assignFrom(t.selector)},s);function s(t){var e=r.call(this,t)||this;return e._enabled=!0,e._handleVisibility=W.HandleVisibility.VISIBLE,e._commitBeforeFiltering=!0,e._includeParentItem=!0,e._selector=new l(t),e}e.FilteringOptions=n;var a,l=(a=Q.GridBaseOptions,i(u,a),Object.defineProperty(u.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._showButtons=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){t!=this._maxItemCount&&(this._maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"excludeCheck",{get:function(){return this._excludeCheck},set:function(t){t!=this._excludeCheck&&(this._excludeCheck=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)},enumerable:!0,configurable:!0}),u);function u(t){var e=a.call(this,t)||this;return e._showButtons=!1,e._partialSearch=!0,e._excludeCheck=!0,e._acceptText=null,e._cancelText=null,e._maxItemCount=10,e._allCheckText="(전체 선택)",e._searchedCheckText="(조회 전체 선택)",e._emptyFilterText="(값 없음)",e._searchPlaceholder="검색...",e}e.FilterSelectorOptions=l});t(te);te.FilteringOptions,te.FilterSelectorOptions;var ee=e(function(t,e){var o,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=o=e.ActiveState||(e.ActiveState={})).ACTIVE="active",i.UNACTIVE="unactive",i.INDETERMINATE="indeterminate";var r=(a.HasPartial=function(t,e){return!(!t&&!e)&&-1<t.indexOf(e)},a.prototype.dispose=function(){this._filter=null,this._clearSearch(),this._clearChilds(),this._childs=null,this._founded=null},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this._filter&&(this._filter.active=t))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"activeState",{get:function(){var t;if(this._isLeaf)t=this._active;else{t=this._childs[0].active;for(var e=1,i=this._childs.length;e<i;e++)if(this._childs[e].active!=t)return o.INDETERMINATE}return t?o.ACTIVE:o.UNACTIVE},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isLeaf",{get:function(){return this._isLeaf},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"childCount",{get:function(){return this._isLeaf?0:(this._searched?this._founded:this._childs).length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"descendantCount",{get:function(){if(this._isLeaf)return 0;for(var t=0,e=this._searched?this._founded:this._childs,i=0,o=e.length;i<o;i++)t+=e[i].descendantCount+1;return t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),a.prototype.clear=function(){if(!this._isLeaf){for(var t=this._childs.length;t--;)this._childs[t].dispose(),delete this._childs[t];this._childs=null,this._isLeaf=!0}},a.prototype.resetChange=function(){this._changed=!1},a.prototype.addNew=function(t,e,i,o){var r=new a(t,e,i,null,o);this.addChild(r)},a.prototype.addNewFilter=function(t){this.addNew(t.name,t.toString(),t.active,t)},a.prototype.addChild=function(t){this._childs||(this._childs=[]),this._childs.push(t),this._isLeaf=!1},a.prototype.getChild=function(t){return this._childs[t]},a.prototype.activate=function(t,e){void 0===e&&(e=!0);var i=this._founded||this._childs;if(this._isLeaf)e?this.active=t:this._tempActive(t);else for(var o=0,r=i.length;o<r;o++)i[o].activate(t,e)},a.prototype.search=function(t){if(!this._isLeaf){var e=this._childs;if(this._clearSearch(),t){for(var i=0,o=0,r=0,n=e.length;r<n;r++){var s=e[r];s._isLeaf?a.HasPartial(s._text,t)&&(this._founded.push(s),i++):0<(o=s.search(t))&&(this._founded.push(s),i+=o+1)}return this._searched=!0,i}this._clearChilds()}return 0},a.prototype.getAllDescendants=function(){for(var t=this._searched?this._founded:this._childs,e=[],i=0,o=t.length;i<o;i++)t[i].isLeaf,e.push(t[i]),t[i].isLeaf||Array.prototype.push.apply(e,t[i].getAllDescendants());return e},a.prototype.getLeafs=function(){for(var t=this._searched?this._founded:this._childs,e=[],i=0,o=t.length;i<o;i++)t[i]._isLeaf?e.push(t[i]):Array.prototype.push.apply(e,t[i].getLeafs());return e},a.prototype.excludeOutside=function(){if(!this._isLeaf){var t=this._childs,e=this._founded;if(e)for(var i=0,o=t.length;i<o;i++){var r=t[i];e.indexOf(r)<0&&(r.activate(!1,!1),r._isLeaf||r.excludeOutside())}}},a.prototype._tempActive=function(t){t!=this._active&&(this._active=t,this._changed=!0)},a.prototype._clearSearch=function(){this._searched=!1,this._founded=[]},a.prototype._clearChilds=function(){var t=this._childs;if(t){for(var e=t.length;e--;)t[e].dispose(),delete t[e];this._childs=null}},a);function a(t,e,i,o,r){this._isLeaf=!0,this._searched=!1,this._changed=!1,this._name=t,this._text=e,this._active=i,o?(this._level=o.level+1,o.addChild(this)):this._level=0,this._parent=o,this._filter=r,this._childs=null,this._founded=null}e.FilterItem=r;var n=(y.prototype.dispose=function(){this._rootItem.clear(),this._rootItem.dispose(),this._rootItem=null},Object.defineProperty(y.prototype,"searched",{get:function(){return this._searched},enumerable:!0,configurable:!0}),y.prototype.buildItems=function(t,e,i,o,r){this._exclude=r,this._autoFilter=i;var n=this._filters=t.filters,s=this._rootItem;if(s.clear(),i){var a=e.getDistinctValues(t.fieldIndex);switch(t.valueType){case W.ValueType.DATETIME:this._categorizeDateValues(a);break;case W.ValueType.NUMBER:this._categorizeNumberValues(a)}for(var l=!1,u=0,h=a.length;u<h;u++){var c=a[u];l=l||!c;var p=c+"",d=this._isActiveAutoFilter(p);s.addNew(p,p,d)}if(l){var _=y.EMPTY_FILTER;d=this._isActiveAutoFilter(_),s.addNew(_,o,d)}}else for(u=0,h=n.count;u<h;u++){var f=n.getItem(u);f.visible&&s.addNewFilter(f)}},y.prototype.search=function(t){this._rootItem.search(t)},y.prototype.getAllDescendants=function(){return this._rootItem.getAllDescendants()},y.prototype.activateAll=function(t){this._searched?(this._exclude&&this._rootItem.excludeOutside(),this._rootItem.activate(t,!1),this._applyFilterActive()):this._filters.activateAll(t)},y.prototype.activateItems=function(t,e){this._exclude&&this._searched&&this._rootItem.excludeOutside();for(var i=0,o=t.length;i<o;i++)t[i].activate(e[i],!1);this._applyFilterActive()},y.prototype.activate=function(t,e){this._exclude&&this._searched&&this._rootItem.excludeOutside(),t.activate(e,!0)},y.prototype._categorizeDateValues=function(t){for(var e=0,i=t.length,o=i-1,r=0;r<i&&!t[r];r++)e++;for(r=i;r--&&!t[r];)o--;t[o].getTime(),t[e].getTime();for(var n=[],s=Lt.DateTimeConverter.getDateProperty,a=(r=0,t.length);r<a;r++){var l=t[r];n.push({year:s(l,Lt.DateProperty.YEAR),half:s(l,Lt.DateProperty.HALF),quarter:s(l,Lt.DateProperty.QUARTER),MONTH:s(l,Lt.DateProperty.MONTH),WEEK:s(l,Lt.DateProperty.WEEK),DAY:s(l,Lt.DateProperty.DAY),value:l})}},y.prototype._categorizeNumberValues=function(t){},y.prototype._applyFilterActive=function(){for(var t=this._rootItem.getLeafs(),e=[],i=[],o=0,r=t.length;o<r;o++)t[o].changed&&(t[o].active?e.push(t[o].name):i.push(t[o].name),t[o].resetChange());0<e.length&&this._filters.activateItems(e,!0),0<i.length&&this._filters.activateItems(i,!1)},y.prototype._isActiveAutoFilter=function(t){return!1},y.prototype._applyAutoFilters=function(t){},y.prototype._runAutoFilter=function(t,e,i){var o;void 0===e&&(e=""),void 0===i&&(i=""),this._autoRunFilter?((o=this._autoRunFilter).criteria=e,o.active=t,o.tag=i):((o=this._autoRunFilter=new S.ColumnFilter(e)).name=y.AUTO_FILTER,o.tag=i,this._filters.add(o,t))},y.AUTO_FILTER="$$auto_filter",y.EMPTY_FILTER="$$empty",y.ROOT_ITEM="$$rootItem",y.DAY_TIME=864e5,y);function y(){this._rootItem=new r(y.ROOT_ITEM,"",!1)}e.FilteringManager=n});t(ee);ee.ActiveState,ee.FilterItem,ee.FilteringManager;var ie=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=j.EventAware,i(s,r),s.prototype._doDispose=function(){this._options=null,this._manager.dispose(),this._manager=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"opened",{get:function(){return this._opened},enumerable:!0,configurable:!0}),s.prototype.show=function(t,e){this._opened&&this.hide(),this._autoFiltering=t.autoFilter,this._buildElements(t,this._autoFiltering);var i=e.getBoundingClientRect(),o=this._containerDom.clientWidth,r=i.right,n=i.bottom;this._containerDom.appendChild(this._element);var s=this._element.getBoundingClientRect();this._setPosition(Math.max(0,Math.min(r,o)-s.width),n),window.addEventListener("mousedown",this._globalMouseDownHandler.bind(this),!1),window.addEventListener("keydown",this._globalKeyDownHandler.bind(this),!1),this._opened=!0},s.prototype.hide=function(){this._opened&&(window.removeEventListener("mousedown",this._globalMouseDownHandler.bind(this),!1),window.removeEventListener("keydown",this._globalKeyDownHandler.bind(this),!1),this._finalizeElements(),this._containerDom.removeChild(this._element),this._opened=!1)},s.prototype.isOwned=function(t){for(var e=t;e;){if(e==this._element)return!0;e=e.parentElement}return!1},s.prototype._setPosition=function(t,e){this._element.style.left=t+"px",this._element.style.top=e+"px"},s.prototype._createItemElement=function(t,e){var i=document.createElement("div"),o=document.createElement("input");o.type="checkbox",o.className="rg-filter-checkbox",i.appendChild(o);var r=document.createTextNode("default");return i.appendChild(r),this._changeItemElement(i,t,e)},s.prototype._changeItemElement=function(t,e,i){if(t.className="rg-filter-item",void 0!==i&&0!==i){var o="rg-filter-item-indent-"+i;t.classList.add(o)}return void 0!==e&&(t.childNodes[1].textContent=e),t},s.prototype._createCheckInfo=function(){this._items=this._manager.getAllDescendants();for(var t=this._items.length,e=0;e<t;e++)this._checkInfo.push(this._items[e].activeState)},s.prototype._removeCheckInfo=function(){this._checkInfo=[]},s.prototype._filtersApply=function(t,e){this._manager.activateItems(t,e)},s.prototype._filtersApplyHelper=function(){for(var t=[],e=[],i=Object.keys(this._changedIndex),o=i.length,r=0;r<o;r++){var n=Number(i[r]),s=this._checkInfo[n];if(t.push(this._items[n]),s===ee.ActiveState.ACTIVE)e.push(!0);else{if(s!==ee.ActiveState.UNACTIVE)throw new Error("invaild access: externally change on activeState as indeterminate");e.push(!1)}delete this._changedIndex[n]}this._filtersApply(t,e)},s.prototype._allBoxCheck=function(){var t;this._selectAllElement.children[0]instanceof HTMLInputElement&&(t=this._selectAllElement.children[0]);var e=this._checkInfo.length;if(0!=e){for(var i=this._checkInfo[0],o=0;o<e;o++){var r=this._checkInfo[o];if(0!==o&&i!==r)return t.checked=!1,void(t.indeterminate=!0);if(o===e-1&&this._checkInfo[o]===ee.ActiveState.ACTIVE)return t.indeterminate=!1,void(t.checked=!0)}t.indeterminate=!1,t.checked=!1}else t.checked=!1},s.prototype._selectAll=function(t){for(var e=this._items.length,i=0;i<e;i++)i<this._viewingItemsLen&&(this._filterBoxElementList[i].checked=t),t?(this._checkInfo[i]!==ee.ActiveState.ACTIVE?this._changedIndex[i]=!0:delete this._changedIndex[i],this._checkInfo[i]=ee.ActiveState.ACTIVE):(this._checkInfo[i]===ee.ActiveState.ACTIVE?this._changedIndex[i]=!0:delete this._changedIndex[i],this._checkInfo[i]=ee.ActiveState.UNACTIVE)},s.prototype._checkSelectAllBoxDOM=function(t){var e,i=t.target;if(i instanceof HTMLInputElement)i.indeterminate=!1,e=i.checked;else if(i instanceof HTMLDivElement){var o=i.children[0];o instanceof HTMLInputElement&&(o.indeterminate=!1,o.checked=!o.checked,e=o.checked)}return e},s.prototype._getViewportIndex=function(t){var e,i=t.target;if(i instanceof HTMLInputElement){var o=i.parentElement.parentElement.children;e=Array.from(o).indexOf(i.parentElement)}else if(i instanceof HTMLDivElement){var r=i.children[0];r instanceof HTMLInputElement&&(r.checked=!r.checked,o=i.parentElement.children,e=Array.from(o).indexOf(i))}return e},s.prototype._observeChange=function(t){this._changedIndex[t]?delete this._changedIndex[t]:this._changedIndex[t]=!0},s.prototype._buildElements=function(t,e){var i=this._options.showButtons;this._hasFooter=!1,this._targetColumn=t;var o=this._options;this._manager.buildItems(t,this._dataSource,e,o.emptyFilterText,o.excludeCheck),this._createCheckInfo(),this._header=document.createElement("div"),this._header.className="rg-filter-header",this._element.appendChild(this._header);var r,n=this._options.partialSearch;n&&((r=document.createElement("div")).className="rg-filter-searchbox",this._header.appendChild(r)),this._buildSelectAllBox(i),this._body=document.createElement("div"),this._body.className="rg-filter-body-container",this._element.appendChild(this._body),this._filterListViewport=document.createElement("div"),this._filterListViewport.className="rg-filter-list-viewport",this._body.appendChild(this._filterListViewport),this._buildFilterItems(i),n&&this._buildSearchbox(r),this._buildFooter(this._element,i)},s.prototype._buildSelectAllBox=function(t){var e,i=this._options.allCheckText;this._selectAllElement=this._createItemElement(i,0),this._header.appendChild(this._selectAllElement),this._manager.searched&&(e=this._options.searchedCheckText),this._changeItemElement(this._selectAllElement,e),this._selectAllElement.addEventListener("click",this._selectAllHandler.bind(this)),this._allBoxCheck()},s.prototype._buildFilterItems=function(t){var e=this._filterListViewport,i=this._items,o=this._items.length;this._viewingItemsLen=o,this._filterBoxElementList=[];for(var r=0;r<o;r++){var n=this._createItemElement(i[r].text,i[r].level),s=void 0;n.children[0]instanceof HTMLInputElement&&(s=n.children[0]);var a=i[r].activeState;a===ee.ActiveState.ACTIVE?s.checked=!0:a===ee.ActiveState.UNACTIVE?s.checked=!1:s.indeterminate=!0,n.addEventListener("click",this._boxHandler.bind(this)),e.appendChild(n),this._filterBoxElementList.push(s)}},s.prototype._buildSearchbox=function(t){this._searchbox=document.createElement("input"),this._searchbox.type="text";var e=this._options.searchPlaceholder;this._searchbox.placeholder=e,this._searchbox.className="rg-filter-search-input",t.appendChild(this._searchbox),this._searchbox.addEventListener("keyup",this._searchHandler.bind(this)),this._hasSearchbox=!0},s.prototype._buildFooter=function(t,e){if(e){this._footer=document.createElement("div"),this._footer.className="rg-filter-footer-container";var i=document.createElement("button");i.className="rg-filter-footer-confirm-button";var o=document.createElement("button");o.className="rg-filter-footer-cancel-button",this._footer.appendChild(o),this._footer.appendChild(i),i.textContent=this._options.acceptText||"Confirm",i.addEventListener("click",this._filtersApply.bind(this)),o.textContent=this._options.cancelText||"Cancel",o.addEventListener("click",this._finalizeElements.bind(this)),t.appendChild(this._footer),this._hasFooter=!0}},s.prototype._finalizeSearchbox=function(){this._hasSearchbox&&(this._searchbox&&this._searchbox.removeEventListener("keyup",this._searchHandler.bind(this)),this._searchbox.parentElement.parentElement.removeChild(this._searchbox.parentElement),this._searchbox.parentElement.removeChild(this._searchbox),this._searchbox=null,this._hasSearchbox=!1)},s.prototype._finalizeSelectAllBox=function(){this._selectAllElement.removeEventListener("click",this._selectAllHandler.bind(this)),this._selectAllElement.removeChild(this._selectAllElement.children[0]),this._selectAllElement.parentElement.removeChild(this._selectAllElement),this._selectAllElement=null},s.prototype._finalizeFilterItems=function(){for(var t=this._items.length-1;-1<t;t--){var e=this._filterBoxElementList[t].parentElement;e.removeEventListener("click",this._boxHandler.bind(this)),e.removeChild(this._filterBoxElementList[t]),e.parentElement.removeChild(e)}this._filterBoxElementList=null},s.prototype._finalizeFooter=function(){if(this._hasFooter){var t=this._footer.children[1];t.removeEventListener("click",this._filtersApply.bind(this)),this._footer.removeChild(t);var e=this._footer.children[0];e.removeEventListener("click",this._finalizeElements.bind(this)),this._footer.removeChild(e),this._footer.parentElement.removeChild(this._footer),this._footer=null,this._hasFooter=!1}},s.prototype._finalizeHeader=function(){this._finalizeSearchbox(),this._finalizeSelectAllBox()},s.prototype._finalizeElements=function(){this._finalizeHeader(),this._finalizeFilterItems(),this._removeCheckInfo(),this._finalizeFooter(),this._element.removeChild(this._header),this._body.removeChild(this._filterListViewport),this._element.removeChild(this._body),this._header=null,this._body=null,this._filterListViewport=null},s.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},s.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},s.prototype._searchHandler=function(t){t.target instanceof HTMLInputElement&&(this._finalizeFilterItems(),this._finalizeSelectAllBox(),this._removeCheckInfo(),this._manager.search(t.target.value),this._createCheckInfo(),this._buildSelectAllBox(this._hasFooter),this._buildFilterItems(this._hasFooter))},s.prototype._selectAllHandler=function(t){console.log("select all box handler runned");var e=this._checkSelectAllBoxDOM(t);this._selectAll(e),this._hasFooter||(this._changedIndex={},this._manager.activateAll(e))},s.prototype._boxHandler=function(t){var e=this._getViewportIndex(t),i=e+this._startIndex;this._checkInfo[i]===ee.ActiveState.ACTIVE?this._checkInfo[i]=ee.ActiveState.UNACTIVE:this._checkInfo[i]=ee.ActiveState.ACTIVE,this._observeChange(i),console.log("index is: "+e),console.log("res index is: "+i),this._allBoxCheck(),this._hasFooter||this._filtersApplyHelper()},s.prototype._scrollHandler=function(){this._upsideScroll(),this._downsideScroll()},s.prototype._upsideScroll=function(){this._filterBoxElementList.length},s.prototype._downsideScroll=function(){},s);function s(t,e,i){var o=r.call(this)||this;return o._opened=!1,o._hasFooter=!1,o._hasSearchbox=!1,o._checkInfo=[],o._changedIndex={},o._startIndex=0,o._containerDom=document.documentElement,o._element=document.createElement("div"),o._element.className="rg-filter-selector",o._element.style.position="absolute",o._options=e,o._dataSource=i,o._manager=new ee.FilteringManager,o}e.FilterSelector=n});t(ie);ie.FilterSelector;var oe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype.run=function(t,e,i,o,r,n,s){this._rs=t.provider;var a=this._ds=this._rs.dataSource;this._parent=t,this._field=e;var l=this._ds.getField(e);if(this._comparer=this._ds._comparers[e]||this._rs._labelComparer[e],this._comparer)this._comparer=this.$_userComparer;else switch(l.dataType){case W.ValueType.NUMBER:case W.ValueType.DATETIME:this._comparer=a.compareNumbers;break;case W.ValueType.BOOLEAN:this._comparer=a.compareBools;break;case W.ValueType.OBJECT:this._comparer=a.compareObjects;break;default:this._comparer=o?a.compareTexts:a.compareValues}this.$_sort(r,n,i,s)},s.prototype.$_sort=function(t,e,i,o){do{var r=this._parent,n=this._field,s=t,a=e,l=Math.floor((t+e)/2),u=r.getItem(l).dataRow,h=r.getItem(l).row;do{if(i==W.SortDirection.ASCENDING){for(;s<=a&&(0==(c=this._comparer(this._field,h,r.getItem(s).row))&&o&&(c=u-r.getItem(s).dataRow),!(c<=0));)s++;for(;s<=a&&(0==(c=this._comparer(n,h,r.getItem(a).row))&&o&&(c=u-r.getItem(a).dataRow),!(0<=c));)a--}else{for(;s<=a&&(0==(c=this._comparer(n,h,r.getItem(s).row))&&o&&(c=u-r.getItem(s).dataRow),!(0<=c));)s++;for(;s<=a;){var c;if(0==(c=this._comparer(n,h,r.getItem(a).row))&&o&&(c=u-r.getItem(a).dataRow),c<=0)break;a--}}s<=a&&(s!=a&&r._exchangeItems(s,a),s++,a--)}while(s<=a);t<a&&this.$_sort(t,a,i,o),t=s}while(t<e)},s);function s(){var t=r.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._comparer)return this._comparer(t,e._rowId,i.rowId)},t}e.TreeItemsSorter=n});t(oe);oe.TreeItemsSorter;var re=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=d.DataTag,i(s,r),s.prototype._doDispose=function(){this._styleMap=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"isEmpty",{get:function(){return 0==this._styleMap.length},enumerable:!0,configurable:!0}),s.prototype.setCellStyle=function(t,e,i){if(e<0)this._styleMap[t]=i;else{var o=this._styleMap[t];if(o)if(o instanceof Array)o[e]=i;else{for(var r=this._owner.dataSource.fieldCount,n=[],s=0;s<r;s++)n[s]=o;this._styleMap[t]=n}var a=this._styleMap[t];(a=a||[])[e]=i,this._styleMap[t]=a}},s.prototype.setCellStyles=function(t,e,i){if(e&&!(e.length<1)&&i){var o=this._owner.dataSource,r=o.fieldCount,n=i;if(n instanceof Array){n=n.concat();for(var s=Math.min(r,n.length),a=0;a<s;a++){var l=Math.floor(n[a]);isNaN(l)||l<0?n[a]=-1:n[a]=l}!function(t,e,i,o){for(var r=i.length,n=Math.min(o.length,e.fieldCount),s=0;s<r;s++)if(i[s]instanceof Array)for(var a=0;a<n;a++)o[a]}(0,o,e,n)}else{var u=[];for(var h in i){var c=i[h];0<=(l=isNaN(c)?o.getFieldIndex(c):Math.floor(c))&&l<r&&(u[h]=l)}!function(t,e,i){for(var o=0,r=e.length;o<r;o++)if(e[o])for(var n in i)i[n]}(0,e,u)}}},s.prototype.removeCellStyle=function(t){for(var e=0,i=this._styleMap.length;e<i;e++){var o=this._styleMap[e];if(o instanceof Array)for(var r=o.length-1;0<=r;r--)o[r]===t&&(o[r]=null);else this._styleMap[e]===t&&delete this._styleMap[e]}},s.prototype.clearCellStyles=function(){this._styleMap=[]},s.prototype.checkCellStyle=function(t,e){var i=this._styleMap[t];return i instanceof Array?!!i[e]:!!i},s.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i instanceof Array?i[e]:i},s.prototype.connect=function(t){},s.prototype.disconnect=function(){},s.prototype.clearRows=function(){this._styleMap=[]},s.prototype.setRows=function(){this._owner.dataSource&&(this._styleMap.length=Math.min(this._styleMap.length,this._owner.dataSource.rowCount))},s.prototype.setRowCount=function(t){this._styleMap.length=t},s.prototype.insertRow=function(t){this._styleMap.splice(t,0,null)},s.prototype.insertRows=function(t,e){for(var i=0;i<e;i++)this._styleMap.splice(t,0,null)},s.prototype.removeRow=function(t){this._styleMap.splice(t,1)},s.prototype.removeRows=function(t){for(var e=t.length-1;0<=e;e--)this._styleMap.splice(t[e],1)},s.prototype.updateRow=function(){},s.prototype.updateRows=function(t,e){},s.prototype.setValue=function(t,e){},s.prototype.moveRow=function(t,e){var i=this._styleMap.splice(t,1);this._styleMap.splice(e,0,i[0])},s.prototype.moveRows=function(t,e,i){for(var o=this._styleMap.splice(t,e),r=0;r<e;r++)this._styleMap.splice(i+r,0,o[r])},s);function s(t){var e=r.call(this)||this;return e._styleMap=[],e._owner=t,e}e.CellStyleMap=n;var a,l=(a=d.DataTag,i(u,a),u.prototype._doDispose=function(){this._editableMap=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"isEmpty",{get:function(){return 0==this._editableMap.length&&!this._editableMap[-1]},enumerable:!0,configurable:!0}),u.prototype.setReadOnly=function(t,e,i){var o=this._editableMap[t]=this._editableMap[t]||[];o[e]=o[e]||{},o[e]._readOnly=i},u.prototype.setEditable=function(t,e,i){var o=this._editableMap[t]=this._editableMap[t]||[];o[e]=o[e]||{},o[e]._editable=i},u.prototype.getReadOnly=function(t,e){var i=this._editableMap[t]&&this._editableMap[t][e];return i&&i._readOnly},u.prototype.getEditable=function(t,e){var i=this._editableMap[t]&&this._editableMap[t][e];return i&&i._editable},u.prototype.setCursor=function(t,e,i){var o=this._editableMap[t]=this._editableMap[t]||[];o[e]=o[e]||{},o[e]._cursor=i},u.prototype.getCursor=function(t,e){var i=this._editableMap[t]&&this._editableMap[t][e];return i&&i._cursor},u.prototype.setEditor=function(t,e,i){var o=this._editableMap[t]=this._editableMap[t]||[];o[e]=o[e]||{},o[e]._editor=i},u.prototype.getEditor=function(t,e,i){var o=this._editableMap[t]&&this._editableMap[t][e];return o&&o._editor},u.prototype.removeEditableMap=function(t,e){if(null!=t)if((e=arguments.length<2?-1:e)<0)delete this._editableMap[t];else{var i=this._editableMap[t];i&&delete i[e]}},u.prototype.clearEditableMap=function(){return(0!==this._editableMap.length||null!=this._editableMap[-1])&&(this._editableMap=[],!0)},u.prototype.getWritable=function(t,e){var i=this.getReadOnly(t,e),o=this.getEditable(t,e);return!i&&o},u.prototype.connect=function(t){},u.prototype.disconnect=function(){},u.prototype.clearRows=function(){},u.prototype.setRows=function(){},u.prototype.setRowCount=function(t){},u.prototype.insertRow=function(t){},u.prototype.insertRows=function(t,e){},u.prototype.removeRow=function(t){},u.prototype.removeRows=function(t){},u.prototype.updateRow=function(){},u.prototype.updateRows=function(t,e){},u.prototype.setValue=function(t,e){},u.prototype.moveRow=function(t,e){},u.prototype.moveRows=function(t,e,i){},u);function u(t){var e=a.call(this)||this;return e._editableMap=[],e}e.CellEditableMap=l});t(re);re.CellStyleMap,re.CellEditableMap;var ne=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=A.DataRowExpressionRuntime,i(s,r),s);function s(){return r.call(this)||this}e.CheckableExpressionRuntime=n;var a,l=(a=d.DataTag,i(u,a),u.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},u.prototype.connect=function(t){this._runtime.setDataSource(t)},u.prototype.disconnect=function(){},u.prototype.clearRows=function(){u.clearCheckables(this._owner)},u.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},u.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t);this.$_setCheckable(e)},u.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i);o instanceof q.GridItem&&this.$_setCheckable(o)}},u.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t);this.$_setCheckable(e)},u.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i);o instanceof q.GridItem&&this.$_setCheckable(o)}},u.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e]);i instanceof q.GridItem&&this.$_setCheckable(i)}},u.prototype.$_setCheckable=function(t){this._runtime.setItem(t),t._setCheckable(this._exprNode.evaluate(this._runtime))},u);function u(t,e){var i=a.call(this)||this;return i._runtime=new n,i._owner=t,i._exprNode=P.ExpressionParser.Default.parse(e,["value","values"]),i._runtime=new n,i}var h,c=(h=E.ItemProvider,i(p,h),p.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._cellStyles&&this._cellStyles.dispose(),this._cellStyles=null,this._editableMap&&this._editableMap.dispose(),this._editableMap=null,this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer={},this._summaryMap=null,this._checkableTag=null,h.prototype._doDispose.call(this)},p.prototype.getCommandStates=function(t){return this._rows[t]._extents},p.prototype.setCommandStates=function(t,e){this._rows[t]._extents=e},Object.defineProperty(p.prototype,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isFiltered",{get:function(){return this._filtered},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isPaging",{get:function(){return this._paging},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(t){this._sorter=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"summaryMode",{set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new l(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t},enumerable:!0,configurable:!0}),p.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,r=0;r<e;r++){var n=this._dataSource.getValue(r,t);n!=o&&i.indexOf(n)<0&&i.push(n),o=n}return i},p.prototype.beginFilter=function(){this._filterLock++},p.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},p.prototype.hasFilter=function(t){var e=this._filters[t];return e&&0<e.length},p.prototype.addFilter=function(t,e){var i=e&&e.criteria;if(0<=t){this._fireFilterAdded(t,i);var o=this._filters[t];o||(o=[],this._filters[t]=o);var r=new S.ColumnFilterRun(e);return o.push(r),this.applyFilters(),r}},p.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);var i=this._filters[t],o=i.indexOf(e);0<=o&&(i.splice(o,1),this.applyFilters())}},p.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];0<e.length&&(e.length=0,delete this._filters[t],this.applyFilters())}},p.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},p.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&0<i.length)return!0}return!1},p.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(0<this._filterLock)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},p.prototype.orderBy=function(t,e,i,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,n=e?e.length:0,s=i?i.length:0,a=0;a<n;a++)e[a]=e[a]==W.SortDirection.ASCENDING||e[a]==W.SortDirection.DESCENDING?e[a]:W.SortDirection.ASCENDING;for(a=0;a<r;a++)this._sortFields.push(t[a]),a<n?this._sortDirections.push(e[a]):0<n?this._sortDirections.push(e[n-1]):this._sortDirections.push(W.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(W.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},p.prototype.getSortFields=function(){return this._sortFields.slice()},p.prototype.getSortDirections=function(){return this._sortDirections.slice()},p.prototype.getSortCases=function(){return this._sortCases.concat()},p.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(p.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!0,configurable:!0}),p.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(p.prototype,"pageCount",{get:function(){return this._paging?0<=this._pageCount?this._pageCount:Math.floor((this._dataSource.rowCount+this._pageSize-1)/this._pageSize):0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},enumerable:!0,configurable:!0}),p.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var r=t?this._rows[o]:this._pubItems[o];r.checked&&i.push(r.dataRow)}return i},p.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},p.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():l.clearCheckables(this),this._fireRefresh()},Object.defineProperty(p.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){t!==this._dataSource&&(this.$_clearRows(),this._dataSource&&!this.$_disposing&&(this._dataSource.removeTag(this._cellStyles),this._dataSource.removeTag(this._editableMap),this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.addTag(this._cellStyles),this._dataSource.addTag(this._editableMap),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())},enumerable:!0,configurable:!0}),p.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},p.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},p.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},p.prototype.getIndexOfRow=function(t){if(0<=t&&t<this._rows.length){var e=this._rows[t];return e&&0<=this._pubItems.indexOf(e)?e.index:-1}return-1},p.prototype.getItemOfRow=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this._rows.length){var i=this._rows[t];return 0<=i.index||e?i:null}return null},p.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(),this.$_buildRows(t),this._fireRefresh()},p.prototype.setFixed=function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},p.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},p.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},p.prototype.getAllItems=function(){return this._pubItems.slice()},p.prototype.hasCellStyle=function(){return!this._cellStyles.isEmpty},p.prototype.setCellStyle=function(t,e,i){this._cellStyles.setCellStyle(t,e,i)},p.prototype.setCellStyles=function(t,e,i){this._cellStyles.setCellStyles(t,e,i)},p.prototype.removeCellStyle=function(t){this._cellStyles.removeCellStyle(t)},p.prototype.clearCellStyles=function(){this._cellStyles.clearCellStyles()},p.prototype.checkCellStyle=function(t,e){return this._cellStyles.checkCellStyle(t,e)},p.prototype.getCellStyle=function(t,e){return this._cellStyles.getCellStyle(t,e)},p.prototype.setCellEditable=function(t,e,i){this._editableMap.setEditable(t,e,i)},p.prototype.setCellReadOnly=function(t,e,i){this._editableMap.setReadOnly(t,e,i)},p.prototype.getCellEditable=function(t,e){return this._editableMap.getEditable(t,e)},p.prototype.getCellReadOnly=function(t,e){return this._editableMap.getReadOnly(t,e)},p.prototype.setCellCursor=function(t,e,i){return this._editableMap.setCursor(t,e,i)},p.prototype.getCellCursor=function(t,e){return this._editableMap.getCursor(t,e)},p.prototype.setCellEditor=function(t,e,i){return this._editableMap.setEditor(t,e,i)},p.prototype.getCellEditor=function(t,e){return this._editableMap.getEditor(t,e,void 0)},p.prototype.clearEditableMap=function(){return this._editableMap.clearEditableMap()},p.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},p.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},p.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},p.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},p.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},p.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},p.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},p.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},p.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},p.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];0<=o.dataRowId&&(t[o.dataRowId]=o._extents)}},p.prototype.$_clearRows=function(){this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},p.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},p.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},p.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&0<this.maxItemCount&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rows.length;i<o;i++){var r=this._rows[i]=this.$_createRow(i);t&&t.hasOwnProperty(r.dataId)&&(r._extents=t[r.dataId])}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows()}},p.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},p.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=0<this.maxItemCount?this.maxItemCount:this._rows.length,o=this._dataSource.hideCount;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||0<o)for(var r=0;r<this._rowCount;r++){var n=this._rows[r],s=this._dataSource.getRowState(this._rows[r].dataRow);this.hideDeleted&&x.isDeletedState(s)?n._index=-1:n._index=0}else for(r=0;r<this._rowCount;r++)this._rows[r]._index=0;var a=this.fixedCount,l=0<a&&!this._fixedFiltering,u=this._rows.length;if(!t){r=0;for(var h=this._filters.length;r<h;r++)if(y=this._filters[r])for(var c=0;c<y.length;c++)y[c].prepare(this._filterRuntime,this._dataSource)}this._paging||(u=Math.min(u,i));var p=0;for(r=0;r<this._rowCount&&p<u;r++)if(0<=(n=this._rows[r]).index)if(t||l&&p<a)this._filteredItems.push(n),p++;else{var d=!this._filterOr,_=0,f=0;for(h=this._filters.length;f<h;f++){var y;if((y=this._filters[f])&&_++,this._filterOr){if(y&&this.$_select(y,n,f)){d=!0;break}}else if(y&&!this.$_select(y,n,f)){d=!1;break}}!d&&0!==_||(this._filteredItems.push(n),p++)}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var m=this._sortedItems;for(r=m.length;r--;)m[r].index<0&&m.splice(r,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},p.prototype.$_buildPageItems=function(){var t=this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items;this._pageItems.length=0;for(var e=this._pageStart=0<=this._pageStartIndex?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=0<this.maxItemCount?this.maxItemCount:i,r=Math.min(this._pageSize,o);e<i&&0<r;e++,r--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},p.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},p.prototype.$_compareFuncs=function(t,e){for(var i={},o=this._dataSource,r=0,n=t.length;r<n;r++){var s=o.getField(t[r]);if(s){var a=o.getDataComparer(s.index)?o.getDataComparer(s.index):this._labelComparer[s.index],l=e[r]==W.SortCase.INSENSITIVE;if(!a)switch(s.dataType){case W.ValueType.DATETIME:case W.ValueType.NUMBER:a=o.compareNumbers.bind(o);break;case W.ValueType.BOOLEAN:a=o.compareBools.bind(o);break;case W.ValueType.OBJECT:a=o.compareObjects.bind(o);break;default:a=l?o.compareTexts.bind(o):o.compareValues.bind(o)}a&&(i[t[r]]=a)}}return i},p.prototype.$_sortRows=function(t){void 0===t&&(t=null);var e=t||this._items.slice(),i=[];0<this._fixedCount&&!this._fixedSorting&&(i=e.splice(0,this._fixedCount));var l=this.$_compareFuncs(this._sortFields,this._sortCases);e.sort(function(t,e){for(var i,o,r,n=0,s=0,a=this._sortFields.length;s<a&&(o=this._sortDirections[s],r=this._sortFields.length==s+1,!(i=l[this._sortFields[s]])||0===(n=i(this._sortFields[s],t.dataRow,e.dataRow)));s++);return n=0==(n*=o===W.SortDirection.DESCENDING?-1:1)&&r?o===W.SortDirection.DESCENDING?e.dataRow-t.dataRow:t.dataRow-e.dataRow:n}.bind(this)),this._sortedItems=i.concat(e)},p.prototype.$_createRow=function(t){var e=new q.GridRow(t);return this.attachItem(e),e._dataRowId=e.dataId,e},p.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},p.prototype.$_resetSummary=function(){this._summaryMap=[]},p.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;0<=t;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},p.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new I.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&0<this.itemCount&&this.$_summarize(e),e},p.prototype.$_summarize=function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,o=new Array(i),r=0;r<i;r++)o[r]=this._pubItems[r].dataRow;e.summarizeRange(t,o,this._summaryMode==W.SummaryMode.STATISTICAL)}else e.summarize(t,this._summaryMode==W.SummaryMode.STATISTICAL)},p.prototype.$_needSort=function(){return this._sorted&&this._sortMode==W.SortMode.AUTO},p.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==W.FilterMode.AUTO},p.prototype.$_checkFiltered=function(){return!!this._dataSource&&(this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&0<this._dataSource.deletedCount||0<this._dataSource.hideCount)},p.prototype.$_select=function(t,e,i){for(var o=t.length,r=0;r<o;r++)if(t[r].select(this._filterRuntime,e,i))return!0;return!1},p.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;0<=t;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&0<this._sortFields.length},p.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},p.prototype.onDataProviderDisposed=function(t){t.removeTag(this._cellStyles),t.removeTag(this._editableMap),this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},p.prototype.onDataProviderReset=function(t){this.$_clearRows(),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},p.prototype.onDataProviderRefresh=function(t){this._refreshItems()},p.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},p.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},p.prototype.onDataProviderRowInserting=function(t,e,i){return!0},p.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,r=e<o.length?o[e]:null,n=this.$_createRow(e);o.splice(e,0,n);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,r?l.indexOf(r):l.length),l.splice(e,0,n)}this._sorted&&(l=this._sortedItems,e=null!=i?i:Math.max(0,r?l.indexOf(r):l.length),l.splice(e,0,n)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(n),this._fireItemInserted(n)},p.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var r,n=this._rows,s=e<n.length?n[e]:null,a=[],l=0;l<i;l++)a.push(r=this.$_createRow(e+l)),n.splice(e+l,0,r);var u=n.length;for(l=e;l<u;l++)n[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var h=this._filteredItems;for(e=null!=o?o:Math.max(0,s?h.indexOf(s):h.length),l=0;l<a.length;l++)h.splice(e+l,0,a[l])}if(this._sorted)for(h=this._sortedItems,e=null!=o?o:Math.max(0,s?h.indexOf(s):h.length),l=0;l<a.length;l++)h.splice(e+l,0,a[l]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},p.prototype.onDataProviderRowRemoving=function(t,e){return!0},p.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&0<=(i=(e=this._filteredItems).indexOf(t))&&e.splice(i,1),this._sorted&&0<=(i=(e=this._sortedItems).indexOf(t))&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},p.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var r=i.length-1;e<=r;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),this._fireItemDeleted(o)},p.prototype.onDataProviderRowsRemoving=function(t,e){return!0},p.prototype.$_silentRemoveRows=function(t){var e,i,o,r;if(this._filtered)for(i=this._filteredItems,e=0;e<t.length;e++)o=t[e],0<=(r=i.indexOf(o))&&i.splice(r,1);if(this._sorted)for(i=this._sortedItems,e=0;e<t.length;e++)o=t[e],0<=(r=i.indexOf(o))&&i.splice(r,1);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},p.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){1<e.length&&e.sort(function(t,e){return t-e});for(var i=this._rows,o=e[0],r=[],n=e.length-1;0<=n;n--)r.push(i[e[n]]),i.splice(e[n],1);for(n=this._rows.length-1;o<=n;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(r),this._fireRefresh()}},p.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},p.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._rows[e]&&this._fireItemUpdated(this._rows[e])},p.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},p.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},p.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._rows[e]&&this._fireItemUpdated(this._rows[e])},p.prototype.onDataProviderRowMoving=function(t,e,i){return!0},p.prototype.onDataProviderRowMoved=function(t,e,i){for(var o=this._rows,r=o.length,n=e=Math.min(e,i);n<r;n++)o[n]._dataRow=n;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},p.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},p.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},p.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];x.isDeletedState(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(this._rows[e]),this._fireRowStateChanged(this._rows[e])},p.prototype.onDataProviderRowHided=function(t,e,i){},p.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){var i,o,r,n,s=!1;for(i=0,o=e.length;i<o;i++)if(r=e[i],r=this._rows[r],x.isDeletedState(r.rowState)){s=!0;break}s&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(n=this.getItemsByRows(e),this.$_silentRemoveRows(n)),this._fireRefresh())}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},p.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},p.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},p);function p(t){var e=h.call(this,t)||this;return e._sortMode=W.SortMode.AUTO,e._filterMode=W.FilterMode.AUTO,e._filterOr=!1,e._checkableExpression=null,e._rows=[],e._filteredItems=[],e._pageItems=[],e._sortedItems=[],e._pubItems=e._rows,e._items=e._rows,e._distinctRows=[],e._cellStyles=new re.CellStyleMap(e),e._editableMap=new re.CellEditableMap(e),e._rowCount=0,e._fixedCount=0,e._fixedSorting=!1,e._maxItemCount=0,e._itemCount=0,e._pubCount=0,e._filtered=!1,e._filtering=!1,e._filters=[],e._filterRuntime=new S.ColumnFilterRuntime,e._filterLock=0,e._fixedFiltering=!1,e._sorted=!1,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._labelComparer={},e._sorter=null,e._defSorter=null,e._paging=!1,e._pagingSource=W.PagingSource.ROWS,e._pageSize=10,e._pageCount=-1,e._pageStartIndex=-1,e._currPage=0,e._pageStart=0,e._summaryMode=W.SummaryMode.AGGREGATE,e._summaryMap=null,e._checkableTag=null,e}e.DefaultItemProvider=c});t(ne);ne.CheckableExpressionRuntime,ne.DefaultItemProvider;var se=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.clearCheckables=function(t){for(var o=function(t){if(t){t.setCheckable(!0);for(var e=t.count;e--;){var i=t.getItem(e);i instanceof c&&o(i)}}},e=t.itemCount;e--;){var i=t.getItem(e);i instanceof c&&o(i)}},s.prototype.connect=function(t){this._runtime.setDataSource(t)},s.prototype.disconnect=function(){},s.prototype.clearRows=function(){s.clearCheckables(this._owner)},s.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof c&&this.$_setCheckable(e,!0)}},s.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof c&&this.$_setCheckable(i,e)},s.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof c&&this.$_setCheckable(i,!0)}},s.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof c&&this.$_setCheckable(e,!1)},s.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof c&&this.$_setCheckable(i,!1)}},s.prototype.$_setCheckable=function(t,e){if(t&&(this._runtime.setItem(t),t.setCheckable(this._exprNode.evaluate(this._runtime)),e))for(var i=t.count;i--;){var o=t.getItem(i);o instanceof c&&this.$_setCheckable(o,!0)}},s);function s(t,e){var i=r.call(this)||this;return i._owner=t,i._exprNode=P.ExpressionParser.Default.parse(e,["value","values"]),i._runtime=new ne.CheckableExpressionRuntime,i}var a,l=(a=q.GridItem,i(u,a),Object.defineProperty(u.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),u);function u(){return a.call(this)||this}e.TreeItemFooter=l;var h,c=(h=q.GroupItem,i(p,h),p.getTemp=function(t){return p.$_tempItem._dataRow=t,p.$_tempItem},p.prototype.dispose=function(){this._dataRow=null,h.prototype.dispose.call(this)},Object.defineProperty(p.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"row",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"iconIndex",{get:function(){return this._dataRow.iconIndex},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"hasChildren",{get:function(){return 0<this.count||this._dataRow.hasChildren},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"rootItem",{get:function(){for(var t=this;1<t.level;)t=t.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"summaryMode",{get:function(){return W.SummaryMode.AGGREGATE},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"checked",{get:function(){return this._dataRow&&0!=(this._dataRow._extents&q.ITEM_EXT_CHECKED)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"isLeaf",{get:function(){return 0==this.count},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"editable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),p.prototype.getFooter=function(t){return this._footer},p.prototype.isFooter=function(t){return t===this._footer},p.prototype.canEdit=function(){return!0},p.prototype.createFooter=function(){this._footer||(this._footer=new l)},p.prototype._setChecked=function(t){if(this._dataRow){var e=this._dataRow._extents;this._dataRow._extents=t?e|q.ITEM_EXT_CHECKED:e&~q.ITEM_EXT_CHECKED}},Object.defineProperty(p.prototype,"checkable",{get:function(){return!this._dataRow||0==(this._dataRow._extents&q.ITEM_UNCHECKABLE)},enumerable:!0,configurable:!0}),p.prototype._setCheckable=function(t){if(this._dataRow){var e=this._dataRow._extents;this._dataRow._extents=t?e&~q.ITEM_UNCHECKABLE:e|q.ITEM_UNCHECKABLE}},p.prototype.setExpanded=function(t,e,i){this.expanded},p.prototype.getData=function(t){return this._dataRow.getValue(t)},p.prototype.setData=function(t,e){this._dataRow.setValue(t,e,!1)},p.prototype.setItem=function(t,e){h.prototype.setItem.call(this,t,e),e._addChildren(t.children),t.clear()},p.prototype.exchange=function(t,e){this._exchangeItems(t,e)},p.prototype.moveChild=function(t,e){var i=t+e,o=this._children,r=o[t];if(e<0)for(var n=t;i<n;n--)o[n]=o[n-1];else for(n=t;n<i;n++)o[n]=o[n+1];o[i]=r},p.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},p.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},p.$_tempItem=new p(null),p);function p(t){var e=h.call(this)||this;return e._iconHeight=0,e._dataRow=t,e}e.TreeItem=c;var d,_=(i(f,d=c),Object.defineProperty(f.prototype,"id",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"expanded",{get:function(){return!0},enumerable:!0,configurable:!0}),f.prototype.setExpanded=function(t,e,i){},Object.defineProperty(f.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"visible",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),f);function f(t){var e=d.call(this,null)||this;return e._rs=t,e}var y,m=(y=ce.Base,i(g,y),Object.defineProperty(g.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),g.prototype.getItem=function(t){return this._items[t]},g.prototype.setItem=function(t,e){this._items[t]=e},g.prototype.indexOf=function(t){return this._items.indexOf(t)},g.prototype.clear=function(){this._items.length=0},g.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},g.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},g.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},g.prototype.getPrior=function(t){return t&&t.visible&&0<t.index?this._items[t.index-1]:null},g.prototype.insert=function(t,e){this._items.splice(e,0,t)},g.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(0<=i&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},g.prototype.$_collectChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},g.prototype.$_expandItem=function(t,e,i){var o,r=this._items,n=this._list;if(o=t instanceof _?this._fixedCount:t.index+1,i=Math.max(0,i),n.length=0,this.$_collectChildren(t,n,e,0<i?t.level+i:1e6),e){for(var s=o,a=r.length;s<a&&!(r[s].level<=t.level);s++);r.splice(o,s-o)}for(s=0,a=n.length;s<a;s++)r.splice(o+s,0,n[s])},g.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},g);function g(t){var e=y.call(this)||this;return e._fixedCount=0,e._items=new Array,e._list=new Array,e._rs=t,e}var b,v=(b=E.ItemProvider,i(C,b),C.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null,b.prototype._doDispose.call(this)},C.prototype.getCommandStates=function(t){return this._itemMap[t.rowId]._extents},C.prototype.setCommandStates=function(t,e){this._itemMap[t.rowId]._extents=e},Object.defineProperty(C.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"sorted",{get:function(){return this._sortFields&&0<this._sortFields.length},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new n(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!0,configurable:!0}),C.prototype.$_needSort=function(){return this._sortFields&&0<this._sortFields.length&&this._sortMode==W.SortMode.AUTO},C.prototype.insertItem=function(t,e,i,o){var r=this._visibleItems;t.collapsed&&r.expand(t,!1);var n=r.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=r.count,a=t.level+1;++n<s&&!(r.getItem(n).level<=a););r.insert(e,n)}else t.insert(i,e),r.insert(e,n)},C.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=0<t.count?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var r=o.count,n=t.level;++i<r&&!(o.getItem(i).level<=n););t.add(e),o.insert(e,i)},C.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},C.prototype.$_calcLevel=function(t,e,i){var o,r,n=t.count,s=e;for(o=0;o<n;o++)(r=t.getItem(o))&&(s=Math.max(s,e+1),i&&!r.expanded||(s=Math.max(s,this.$_calcLevel(r,e+1,i))));return s},C.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},C.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n instanceof c&&(n.expanded||n.level<i)&&this.$_setExpanded(n,!0,i)}},C.prototype._expandItem=function(t,e,i,o,r){if(t&&(e||!t.expanded)){if(r&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,0<o?t.level+o:1e6);try{this._fireRefresh()}finally{r&&this._fireExpanded(t)}}},C.prototype.expand=function(t,e,i){this._expandItem(t,i,e,0,!0)},C.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,0<t?t+1:0,!0)},C.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof c&&this.$_setCollapsed(r,!0)}},C.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},C.prototype.collapse=function(t,e){this._collapseItem(t,!1,e,!0)},C.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},C.prototype.$_saveExpanded=function(t,e){for(var i=0,o=e.count;i<o;i++){var r=e.getItem(i);r&&(t[r.rowId]=q.ITEM_EXT_FILTERED|(r.expanded?q.ITEM_EXT_SAVEEXPAND:0),0<r.count&&this.$_saveExpanded(t,r))}},C.prototype.orderBy=function(t,e,i,o){void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,n=e?e.length:0,s=i?i.length:0,a=0;a<r;a++)this._sortFields.push(t[a]),a<n?this._sortDirections.push(e[a]):0<n?this._sortDirections.push(e[n-1]):this._sortDirections.push(W.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(W.SortCase.SENSITIVE);var l=[];this.$_saveExpanded(l,this._rootItem),this.$_clearItems(),this.$_buildTree(l);try{o&&this._fireRefresh()}finally{this._fireSorted()}},C.prototype.getSortFields=function(){return this._sortFields.concat()},C.prototype.getSortDirections=function(){return this._sortDirections.concat()},C.prototype.getSortCases=function(){return this._sortCases.concat()},C.prototype.beginFiltering=function(){this._filterLock++},C.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,r=o<=-1||this.$_selectItem(e),n=0;n<i;n++){var s=new c(e._dataRow._children[n]);s&&!this.dataSource.isHiddenRow(s.rowId)&&(r=this.$_prepareFiltering(t,s)||r)}return t[o]=r&&0<=o?t[o]|q.ITEM_EXT_FILTERED:t[o]&~q.ITEM_EXT_FILTERED,r},C.prototype.endFiltering=function(t,e,i){var o=[];t&&this._addParentNodeOnFiltering&&this.$_prepareFiltering(o,this._rootItem),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(o,e,i))},C.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&0<e.length},C.prototype.addFilter=function(t,e){this._fireFilterAdded(t,e.text);var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new S.ColumnFilterRun(e);return i.push(o),o},C.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],o=i.length;o--;)if(i[o]===e){i.splice(o,1),this.applyFilters(null,null,null);break}}},C.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e&&0<e.length&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters(null,null,null))}},C.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null,null))},C.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&0<e.length)return!0}return!1},C.prototype.applyFilters=function(t,e,i){var o=this.dataSource,r=o.fieldCount;for(var n in this._filters)Number(n)>=r&&(this._filters[n]=null);if(this._filtered=this.hasFilters(),this._filtered)for(var s in this._filters){var a=this._filters[s];if(a)for(var l=a.length;l--;)a[l].prepare(this._filterRuntime,o)}if(0==this._filterLock){this.$_clearItems(),this.$_buildTree(t);try{this._fireRefresh()}finally{this._fireFiltered(e,i)}}},C.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},C.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof c)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&(s=n.row)&&i.push(s),t(n,i)}}(this._rootItem,t),t},C.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof c)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&0<=(s=n.dataRow)&&i.push(s),t(n,i)}}(this._rootItem,t),t},C.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},C.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():n.clearCheckables(this),this._fireRefresh()},C.prototype.$_checkChildren=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n&&(i?n.checkable&&this._setCheckItem(n,e):this._setCheckItem(n,e)),n instanceof c&&this.$_checkChildren(n,e,i)}},C.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},C.prototype.checkAll=function(t,e,i,o){e?b.prototype.checkAll.call(this,t,e,i,o,!1):(this.$_checkChildren(this._rootItem,t,i),o?this._fireItemAllChecked(t):this._fireRefreshClient())},C.prototype.hasCellstyle=function(){return!this._cellStyles.isEmpty()},C.prototype.setCellStyle=function(t,e,i){this._cellStyles.setCellStyle(t,e,i)},C.prototype.setCellStyles=function(t,e,i){this._cellStyles.setCellStyles(t,e,i)},C.prototype.removeCellStyle=function(t){this._cellStyles.removeCellStyle(t)},C.prototype.clearCellStyles=function(){this._cellStyles.clearCellStyles()},C.prototype.checkCellStyle=function(t,e){return this._cellStyles.checkCellStyle(t,e)},C.prototype.getCellStyle=function(t,e){return this._cellStyles.getCellStyle(t,e)},C.prototype.setCellEditable=function(t,e,i){this._editableMap.setEditable(t,e,i)},C.prototype.setCellReadOnly=function(t,e,i){this._editableMap.setReadOnly(t,e,i)},C.prototype.getCellEditable=function(t,e){return this._editableMap.getEditable(t,e)},C.prototype.getCellReadOnly=function(t,e,i){return this._editableMap.getReadOnly(t,e)},C.prototype.setCellCursor=function(t,e,i){this._editableMap.setCursor(t,e,i)},C.prototype.getCellCursor=function(t,e){return this._editableMap.getCursor(t,e)},C.prototype.setCellEditor=function(t,e,i){this._editableMap.setEditor(t,e,i)},C.prototype.getCellEditor=function(t,e){return this._editableMap.getEditor(t,e)},C.prototype.clearEditableMap=function(){return this._editableMap.clearEditableMap()},Object.defineProperty(C.prototype,"dataSource",{get:function(){return this._ds},set:function(t){t!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._cellStyles),this._ds.removeTag(this._editableMap),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=t,this._ds&&(this.$_buildTree(null),this._ds.addTag(this._cellStyles),this._ds.addTag(this._editableMap),this._ds.addListener(this),this._ds.registerCommandListener(this)),this._fireReset())},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),C.prototype._createRootItem=function(){var t=new _(this);return this._setExpanded(t,!0),t},C.prototype.getItem=function(t){return 0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},C.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},C.prototype.getItemOfRow=function(t,e){throw new Error("Method not implemented.")},C.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof c&&(e.push(r),this.$_collectItems(r,e))}},C.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},C.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},C.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},C.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},C.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},C.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},C.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},C.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},C.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},C.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},C.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},C.prototype.findItem=function(t,e,i,o,r){var n=this.dataSource;if(!n)return-1;if(this.itemCount<1)return-1;var s=Math.min(t.length,e.length);if(s<1)return-1;for(var a=!i||i.allFields,l=i&&i.caseSensitive,u=i&&i.partialMatch,h=null,c=[],p=0;p<s;p++)c[p]=n.getField(t[p]).dataType;o=Math.max(0,o),r=Math.min(this._visibleItems.count-1,r);for(var d=o;d<=r;d++){var _=this._visibleItems.getItem(d),f=0<=_.dataRow;if(f)for(p=0;p<s;p++){var y=_.getData(t[p]);switch(c[p]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e[p]instanceof Date)f=z.Utils.compareTextValue(e[p],y,l,u);else{if(!h){var m=/[.]/.test(e[p])?"yyyy.MM.dd":/[/]/.test(e[p])?"yyyy/MM/dd":/[-]/.test(e[p])?"yyyy-MM-dd":"yyyyMMdd";h=new Lt.DateTimeConverter(m)}f=z.Utils.compareTextValue(e[p],y?h.getText(y):y,l,u)}break;default:f=z.Utils.compareTextValue(e[p],y,l,u)}if(f&&!a)return d;if(!f&&a)break}if(f)return d}return-1},C.prototype.findCell=function(t,e,i,o,r,n){var s=this.dataSource;if(!s)return null;if(this.itemCount<1)return null;for(var a=i&&i.caseSensitive,l=i&&i.partialMatch,u=s.fieldCount,h=t.length,c=null,p=[],d=0;d<u;d++)p[d]=s.getField(d).dataType;o=Math.max(0,o),r=Math.min(this._visibleItems.count-1,r),(n=Math.max(0,n))>=t.length&&(o++,n=0);for(var _=o;_<=r;_++){var f=this._visibleItems.getItem(_),y=!1;if(0<=f.dataRow)for(d=o<_?0:n;d<h;d++){var m=t[d];if(0<=m&&m<u){var g=f.getData(m);switch(p[m]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e instanceof Date)y=z.Utils.compareTextValue(e,g,a,l);else{if(!c){var b=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";c=new Lt.DateTimeConverter(b)}y=z.Utils.compareTextValue(e,g?c.getText(g):g,a,l)}break;default:y=z.Utils.compareTextValue(e,g,a,l)}if(y)return{itemIndex:_,fieldIndex:m,searchFieldIndex:d}}}}return null},C.prototype.$_internalAddItem=function(t,e,i){var o=c.getTemp(e),r=this.dataSource;return(this.hideDeleted&&x.isDeletedState(o.rowState)||r.isHiddenRow(e.rowId))&&(o=null),o&&(i&&i[e.rowId]&q.ITEM_EXT_FILTERED||this.$_selectItem(o))?(o=new c(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o):null},C.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},C.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&x.isDeletedState(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},C.prototype.$_selectField=function(t,e,i){for(var o=0,r=t.length;o<r;o++)if(t[o].select(this._filterRuntime,e,i))return!0;return!1},C.prototype.$_selectItem=function(t){if(!t)return!1;for(var e in this._filters){var i=this._filters[e];if(i&&!this.$_selectField(i,t,Number(e)))return!1}return!!t&&!0},C.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},C.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},C.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},C.prototype.$_buildItems=function(t,e){for(var i=t.row,o=i.count,r=0;r<o;r++){var n=i.getChild(r),s=this.$_internalAddItem(t,n,e);s&&(e&&this._setExpanded(s,0!=(e[n.rowId]&q.ITEM_EXT_SAVEEXPAND)),0<n.count&&this.$_buildItems(s,e))}},C.prototype.$_sortItem=function(t){var e=t.count;1<e&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof c&&this.$_sortItem(o)}},C.prototype.$_sort=function(t,e,i,o){var r,n=this._sortFields[e],s=this._sortDirections[e],a=this.dataSource,l=this._sortCases[e]==W.SortCase.INSENSITIVE;if(this._sorter.run(t,n,s,l,i,o,e+1==this._sortFields.length),r=a.getField(n).dataType==W.ValueType.TEXT&&l?a.equalTexts.bind(a):a.equalValues.bind(a),e+1<this._sortFields.length){for(var u=i,h=u;u<o;)u++,r(n,t.getItem(u).row,t.getItem(u-1).row)||(this.$_sort(t,e+1,h,u-1),h=u);h<o&&this.$_sort(t,e+1,h,o)}},C.prototype.$_buildTree=function(t){var e=this.dataSource;this._rootItem._dataRow=e.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t),this.$_clearSummary();for(var i=e.fieldCount,o=this._sortFields,r=this._sortDirections,n=this._sortCases,s=o.length;s--;)(o[s]<0||o[s]>=i)&&(o.splice(s,1),r.splice(s,1),n.splice(s,1));this.sorted&&0<this._rootItem.count&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&(!t||t.length<=0)&&this._checkableTag.setRows()},C.prototype.$_resetSummary=function(){this._summaryMap=[]},C.prototype.$_resetGroupSummary=function(){},C.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},C.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new I.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&0<this.itemCount&&this.$_summarize(e),e},C.prototype.$_summarize=function(t){var e=this.dataSource;if(e)if(this._filtered||this.hideDeleted||0<e.hiddenCount){for(var i=this._rootItem.getDescendants(!1),o=i.length,r=[],n=0;n<o;n++){var s=i[n];s instanceof c&&!e.isHiddenRow(s.rowId)&&r.push(s.row)}t.count=r.length,e.summarizeRange(t,r,this.summaryMode==W.SummaryMode.STATISTICAL)}else t.count=e.rowCount,e.summarize(t,this.summaryMode==W.SummaryMode.STATISTICAL)},C.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(C.ITEM_CHANGED,t)},C.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(C.EXPANDING,t)},C.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(C.EXPANDED,t)},C.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(C.COLLAPSING,t)},C.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(C.COLLAPSED,t)},C.prototype._fireParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(C.PARENT_CHANGING,t,e,i)},C.prototype._fireParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(C.PARENT_CHANGED,t,e,i)},C.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(null),this._fireRefresh()},C.prototype._saveAndRefresh=function(){var t=[];this.$_saveExpanded(t,this._rootItem),this.$_clearItems(),this.$_buildTree(t),this._fireRefresh()},C.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},C.prototype.onTreeDataProviderDisposed=function(t){t.removeTag(this._cellStyles),this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},C.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(null),this._fireReset()},C.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},C.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},C.prototype.onDataProvderCleared=function(t){this._refreshItems()},C.prototype.onTreeDataProviderRowCountChanged=function(t,e){},C.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},C.prototype.onTreeDataProviderRowAdded=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.parent.rowId],o=this.$_internalAddItem(i,e,null);o?(this.$_buildItems(o,null),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),0<e.parent.level&&this._checkableTag.addRow(e.parent,!1))},C.prototype.onTreeDataProviderRowsAdded=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o,r=this._itemMap[e.rowId];if(r&&i&&0<(o=i.length)){for(var n=0;n<o;n++){var s=i[n],a=this.$_internalAddItem(r,s,null);a&&this.$_buildItems(a,null)}this.$_clearSummary(),r.expanded?this._expandItem(r,!0,!1,0,!1):this._fireItemChanged(r),this._checkableTag&&(this._checkableTag.addRows(i),0<e.level&&this._checkableTag.addRow(e))}}},C.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},C.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},C.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},C.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,r=0;r<i;r++){var n=e[r],s=this._itemMap[n.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},C.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},C.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i)}this._checkableTag&&this._checkableTag.updateRow(e)},C.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},C.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o)}this._checkableTag&&this._checkableTag.updateRow(e)},C.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.isVisible()&&this._fireItemChanged(i)},C.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.isVisible()&&this._fireItemChanged(i)},C.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},C.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var r=e[0];o=!(l=this._itemMap[r.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(r),o&&this._saveAndRefresh()}else if(0<i){var n=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(o=o||!l,l&&x.isDeletedState(l.rowState)){var u=l.parent;this.$_internalRemoveItem(l),u.expanded&&u.visible&&this._visibleItems.remove(l),n=!0}}this._checkableTag&&this._checkableTag.changeStates(e),n&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},C.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];o&&(o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh())}},C.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var r=this._itemMap[e.rowId];if(r){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0),r.changeParent(n,o),this.$_resetVisibleItems(),this._fireRefresh()}},C.prototype.onTreeDataProviderRowHiddenChanged=function(t,e,i){if(i){for(var o=!1,r=0,n=e.length;r<n;r++){var s=e[r],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},C.ITEM_CHANGED="onTreeItemProviderItemChanged",C.EXPANDING="onTreeItemProviderExpanding",C.EXPANDED="onTreeItemProviderExpanded",C.COLLAPSING="onTreeItemProviderCollapsing",C.COLLAPSED="onTreeItemProviderCollapsed",C.PARENT_CHANGING="onTreeItemProviderParentChanging",C.PARENT_CHANGED="onTreeItemProviderParentChanged",C);function C(){var t=b.call(this,null)||this;return t._sortMode=W.SortMode.AUTO,t._expandWhenGrouping=!0,t._footerWhenExpanded=!0,t._footerWhenCollapsed=!0,t._summaryMode=W.SummaryMode.AGGREGATE,t._groupSummaryMode=W.SummaryMode.AGGREGATE,t._checkableExpression=null,t._cellStyles=null,t._editableMap=null,t._filters={},t._filterRuntime=new S.ColumnFilterRuntime,t._filtered=!1,t._sorter=new oe.TreeItemsSorter,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._visibleItems=new m(t),t._itemMap=[],t._itemCount=0,t._summaryMap=null,t._checkableTag=null,t._filterLock=0,t._addParentNodeOnFiltering=!1,t}e.TreeItemProvider=v});t(se);se.TreeItemFooter,se.TreeItem,se.TreeItemProvider;var ae=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype.getCount=function(t){return this._rs.itemCount},s.prototype.getSum=function(t){return this._rs.getSum(t)},s.prototype.getMax=function(t){return this._rs.getMax(t)},s.prototype.getMin=function(t){return this._rs.getMin(t)},s.prototype.getAvg=function(t){return this._rs.getAvg(t)},s.prototype.getVar=function(t){return this._rs.getVar(t)},s.prototype.getVarp=function(t){return this._rs.getVarp(t)},s.prototype.getStdev=function(t){return this._rs.getStdev(t)},s.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},s.prototype.getDataCount=function(t){throw new Error("Not implented.")},s.prototype.getDataSum=function(t){throw new Error("Not implented.")},s);function s(t){var e=r.call(this)||this;return e._rs=t,e}e.DefaultSummarizer=n});t(ae);ae.DefaultSummarizer;var le=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=(r=se.TreeItem,i(n,r),n.prototype.dispose=function(){this._values=null,r.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var r=e.getField(o),n=this._values[o],s=r.readValue(t[o]);this._values[o]=s,this._started&&parent&&!r.equalValues(n,s)&&this._rs._editItemCellUpdated(this,o,n,s)}}else this._values=[]},enumerable:!0,configurable:!0}),n.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},n.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(r,e)&&this._rs._editItemCellUpdated(this,t,r,e)},Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowState",{get:function(){return this._item?this._item.rowState:x.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expanded",{get:function(){return!!this._item&&this._item.expanded},enumerable:!0,configurable:!0}),n.prototype.getData=function(t){if(t<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},n.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e);var n=!this._checkDiff;(n=n||(this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)))&&(this._values[t]=e,this.parent&&(this._rs._editItemCellUpdated(this,t,r,e),this._rs._editItemCellEdited(this,t)))},n.prototype.getRowData=function(){return this._values.concat()},n.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},n);function n(t,e,i){var o=r.call(this,e&&e.row)||this;return o._values=[],o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._rs=t,o._item=e,o._state=i,o}e.TreeEditItem=s;var a,l=(a=V.EditableItemProvider,i(u,a),u.prototype._doDispose=function(){this._rs=null,this._summarizer=null,a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),u.prototype.getLevels=function(t){return this._rs.getLevels(t)},u.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},u.prototype.getSortFields=function(){return this._rs.getSortFields()},u.prototype.getSortDirections=function(){return this._rs.getSortDirections()},u.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(u.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t},enumerable:!0,configurable:!0}),u.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},u.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},u.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},u.prototype.clearFilters=function(t){this._rs.clearFilters(t)},u.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},u.prototype.beginFiltering=function(){this._rs.beginFiltering()},u.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},u.prototype.expand=function(t,e,i){this._rs.expand(t,e,i)},u.prototype.collapse=function(t,e){this._rs.collapse(t,e)},u.prototype.expandAll=function(t){this._rs.expandAll(t)},u.prototype.collapseAll=function(){this._rs.collapseAll()},u.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},u.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(u.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),u.prototype.resetCheckables=function(){this._rs.resetCheckables()},u.prototype.applyCheckables=function(){this._rs.applyCheckables()},Object.defineProperty(u.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),u.prototype.getAllItems=function(){return this._rs.getAllItems()},u.prototype.getItem=function(t){return this._rs.getItem(t)},u.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},u.prototype.findItem=function(t,e,i,o,r){return this._rs.findItem(t,e,i,o,r)},u.prototype.findCell=function(t,e,i,o,r,n){return this._rs.findCell(t,e,i,o,r,n)},u.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},u.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},u.prototype.hasCellStyle=function(){return this._rs.hasCellstyle()},u.prototype.setCellStyle=function(t,e,i){this._rs.setCellStyle(t,e,i)},u.prototype.setCellStyles=function(t,e,i){this._rs.setCellStyles(t,e,i)},u.prototype.removeCellStyle=function(t){this._rs.removeCellStyle(t)},u.prototype.clearCellStyles=function(){this._rs.clearCellStyles()},u.prototype.checkCellStyle=function(t,e){return this._rs.checkCellStyle(t,e)},u.prototype.getCellStyle=function(t,e){return this._rs.getCellStyle(t,e)},u.prototype.setCellEditable=function(t,e,i){this._rs.setCellEditable(t,e,i)},u.prototype.setCellReadOnly=function(t,e,i){this._rs.setCellReadOnly(t,e,i)},u.prototype.getCellEditable=function(t,e){return this._rs.getCellEditable(t,e)},u.prototype.getCellReadOnly=function(t,e){return this._rs.getCellReadOnly(t,e,null)},u.prototype.setCellCursor=function(t,e,i){this._rs.setCellCursor(t,e,i)},u.prototype.getCellCursor=function(t,e){return this._rs.getCellCursor(t,e)},u.prototype.setCellEditor=function(t,e,i){this._rs.setCellEditor(t,e,i)},u.prototype.getCellEditor=function(t,e){return this._rs.getCellEditor(t,e)},u.prototype.clearEditableMap=function(){return this._rs.clearEditableMap()},Object.defineProperty(u.prototype,"summaryMode",{set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!0,configurable:!0}),u.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},u.prototype.canAppend=function(){return!1},u.prototype.canInsert=function(t){return!!t},u.prototype.canDelete=function(t){return!!t},u.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},u.prototype._doBeginUpdate=function(t){return this._editingItem=this._editItem=this._createEditItem(t,q.ItemState.UPDATING,null),this.$_replaceItem(t,this._editItem),this._editItem},u.prototype._doBeginAppend=function(t){return this._editingItem=this._editItem=this._createEditItem(null,q.ItemState.APPENDING,t),this._editItem},u.prototype._doBeginInsert=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),o)this._appending=!0,t.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,q.ItemState.INSERTING,e),this._rs.appendItem(t,this._editItem);else{var r=t.parent;this._appending=!1,this._insertAfter=i,this._insertIndex=r.indexOf(t),this._editingItem=this._editItem=this._createEditItem(t,q.ItemState.INSERTING,e),this._rs.insertItem(r,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},u.prototype._doCompleteUpdate=function(e){var t=!1;if(this.dataSource){this.$_replaceItem(this._editItem,e);var i=this._editItem.row;try{t=i.update(this._editItem.values)}catch(t){throw this.$_replaceItem(e,this._editItem),t}t||this.$_replaceItem(e,this._editItem)}return t},u.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this._editItem.parent,r=o.row,n=e.createRow(this._editItem.values,-1,!1),s=this._editItem.parent.indexOf(this._editItem);this._rs.removeItem(this._editItem);try{i=this.isAppending?r.addChild(n,!1):r.insertChild(s,n,!1)}catch(t){throw this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter),t}if(i){var a=o.itemOfRow(n.rowId);this._copyExtents(this._editItem,a)}else this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter)}return i},u.prototype._doCancelEdit=function(t,e){t==q.ItemState.UPDATING?(this.$_replaceItem(this._editItem,e),this._copyExtents(this._editItem,e)):t==q.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),a.prototype._doCancelEdit.call(this,t,e)},u.prototype._doCommitEdit=function(t,e){return t==q.ItemState.UPDATING||q.ItemState.INSERTING,a.prototype._doCommitEdit.call(this,t,e)},u.prototype.remove=function(t){if(t){var e=t.row;e&&e.parent.removeChild(e)}},u.prototype.removeAll=function(t){if(t&&0<t.length){for(var e=[],i=0,o=t.length;i<o;i++){var r=this._rs.getItem(t[i]);e.push(r.row)}this.dataSource.removeRows(e)}},u.prototype.getRemovableRows=function(t){if(0<t.length){for(var e=[],i=0,o=t.length;i<o;i++){var r=this._rs.getItem(t[i]);e.push(r.row)}return e}},u.prototype.removeRows=function(t){t&&this.dataSource.removeRows(t)},u.prototype.setDataSource=function(t){this._rs.dataSource=t},Object.defineProperty(u.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!0,configurable:!0}),u.prototype._createEditItem=function(t,e,i){this._editingItem=null;var o=this.dataSource;if(!o)return null;var r=o.fieldCount;switch(e){case q.ItemState.UPDATING:this._editingItem=new s(this,t,e);for(var n=0;n<r;n++)this._editingItem.setValue(n,t.getData(n));this._copyExtents(t,this._editingItem);break;case q.ItemState.INSERTING:case q.ItemState.APPENDING:if(this._editingItem=new s(this,null,e),i)for(n=0;n<r;n++)i.length>n&&this._editingItem.setValue(n,i[n])}return this._editingItem},u.prototype.onItemProviderFilterAdd=function(t,e,i){},u.prototype.onItemProviderFilterRemove=function(t,e,i){},u.prototype.onItemProviderFilterClear=function(t,e){},u.prototype.onItemProviderFilterClearAll=function(t){},u.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},u.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},u.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},u.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},u.prototype.onItemProviderFiltered=function(t){this._fireFiltered(null,null)},u.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},u.prototype.onItemProviderSorted=function(t){this._fireSorted()},u.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(se.TreeItemProvider.ITEM_CHANGED,e)},u.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(se.TreeItemProvider.EXPANDING,e)},u.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(se.TreeItemProvider.EXPANDED,e)},u.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(se.TreeItemProvider.COLLAPSING,e)},u);function u(t){var e=a.call(this,null,t)||this;return e._observers=[],e._appending=!1,e._insertAfter=!1,e._insertIndex=-1,e._rs=new se.TreeItemProvider,e.source=e._rs,e._summarizer=new ae.DefaultSummarizer(e._rs),e}e.TreeGridItemProvider=l});t(le);le.TreeEditItem,le.TreeGridItemProvider;var ue=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=new K.Rectangle(-1e4,-1e4,100,100),s=(n=nt.LayerElement,i(a,n),a.createColumn=function(t){return t?"series"==t.type?new G.SeriesColumn(t):new G.DataColumn(t):null},a.prototype._doDispose=function(){return z.Utils.$_getActiveGrid()==this&&z.Utils.$_setActiveGrid(null),this.clearListener(),this._container&&this._container.dispose(),this._container=null,this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane&&this._rightContentPane.dispose(),this._rightContentPane=null,this._fixedContentPane&&this._fixedContentPane.dispose(),this._fixedContentPane=null,this._leftContentPane&&this._leftContentPane.dispose(),this._leftContentPane=null,this._sideContentPane&&this._sideContentPane.dispose(),this._sideContentPane=null,this._topContentPane&&this._topContentPane.dispose(),this._topContentPane=null,this._bodyView&&this._bodyView.dispose(),this._bodyView=null,this._fixedBodyView&&this._fixedBodyView.dispose(),this._fixedBodyView=null,this._rightBodyView&&this._rightBodyView.dispose(),this._rightBodyView=null,this._mergeView&&this._mergeView.dispose(),this._mergeView=null,this._fixedMergeView&&this._fixedMergeView.dispose(),this._fixedMergeView=null,this._rightMergeView&&this._rightMergeView.dispose(),this._rightMergeView=null,this._headerView&&this._headerView.dispose(),this._headerView=null,this._fixedHeaderView&&this._fixedHeaderView.dispose(),this._fixedHeaderView=null,this._rightHeaderView&&this._rightHeaderView.dispose(),this._rightHeaderView=null,this._headerSummaryView&&this._headerSummaryView.dispose(),this._headerSummaryView=null,this._fixedHeaderSummaryView&&this._fixedHeaderSummaryView.dispose(),this._fixedHeaderSummaryView=null,this._rightHeaderSummaryView&&this._rightHeaderSummaryView.dispose(),this._rightHeaderSummaryView=null,this._footerView&&this._footerView.dispose(),this._footerView=null,this._fixedFooterView&&this._fixedFooterView.dispose(),this._fixedFooterView=null,this._rightFooterView&&this._rightFooterView.dispose(),this._rightFooterView=null,this._rowIndicatorView&&this._rowIndicatorView.dispose(),this._rowIndicatorView=null,this._stateBarView&&this._stateBarView.dispose(),this._stateBarView=null,this._checkBarView&&this._checkBarView.dispose(),this._checkBarView=null,this._headView&&this._headView.dispose(),this._headView=null,this._sumView&&this._sumView.dispose(),this._sumView=null,this._footView&&this._footView.dispose(),this._footView=null,this._selectionLayer&&this._selectionLayer.dispose(),this._selectionLayer=null,this._feedbackLayer&&this._feedbackLayer.dispose(),this._feedbackLayer=null,this._hscrollBar&&this._hscrollBar.dispose(),this._hscrollBar=null,this._vscrollBar&&this._vscrollBar.dispose(),this._vscrollBar=null,this._scrollEdge&&this._scrollEdge.dispose(),this._scrollEdge=null,this._selections&&this._selections.dispose(),this._selections=null,this._fixedOptions&&this._fixedOptions.dispose(),this._fixedOptions=null,this._displayOptions&&this._displayOptions.dispose(),this._displayOptions=null,this._formatOptions&&this._formatOptions.dispose(),this._formatOptions=null,this._editOptions&&this._editOptions.dispose(),this._editOptions=null,this._editorOptions&&this._editorOptions.dispose(),this._editorOptions=null,this._copyOptions&&this._copyOptions.dispose(),this._copyOptions=null,this._pasteOptions&&this._pasteOptions.dispose(),this._pasteOptions=null,this._sortingOptions&&this._sortingOptions.dispose(),this._sortingOptions=null,this._filteringOptions&&this._filteringOptions.dispose(),this._filteringOptions=null,this._columns&&this._columns.dispose(),this._columns=null,this._activeCellLayout&&this._activeCellLayout.dispose(),this._activeCellLayout=null,this._defaultCellLayout&&this._defaultCellLayout.dispose(),this._defaultCellLayout=null,this._delegate&&this._delegate.dispose(),this._delegate=null,this._layoutManager&&this._layoutManager.dispose(),this._layoutManager=null,this._editController&&this._editController.dispose(),this._editController=null,this._filterSelector&&this._filterSelector.dispose(),this._filterSelector=null,this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),X.CellIndex.clearTemp(),n.prototype._doDispose.call(this)},Object.defineProperty(a.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!0,configurable:!0}),a.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(a.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!0,configurable:!0}),a.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},Object.defineProperty(a.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellLayout",{set:function(t){var e=t&&new D.GridCellLayout(this).load(t);this._activeCellLayout=e||this._defaultCellLayout,this.refreshView()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataSource",{get:function(){return this._itemProvider?this._itemProvider.dataSource:null},set:function(t){this.dataSource,this._itemProvider&&(this._itemProvider.dataSource=t),this.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemSource",{get:function(){return this._itemProvider},set:function(t){this._itemProvider&&this._itemProvider.removeListener(this),this._itemProvider=t,this._itemProvider&&this._itemProvider.addListener(this)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemCount",{get:function(){return this._itemProvider?this._itemProvider.itemCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_summaryModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"linkCellClickedCallback",{get:function(){return this._linkCellClickedCallback},set:function(t){this._linkCellClickedCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonCellClickedCallback",{get:function(){return this._buttonCellClickedCallback},set:function(t){this._buttonCellClickedCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowIndicatorView",{get:function(){return this._rowIndicatorView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stateBarView",{get:function(){return this._stateBarView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"checkBarView",{get:function(){return this._checkBarView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mergeView",{get:function(){return this._mergeView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedMergeView",{get:function(){return this._fixedMergeView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightMergeView",{get:function(){return this._rightMergeView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"headerView",{get:function(){return this._headerView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footerView",{get:function(){return this._footerView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"headView",{get:function(){return this._headView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sumView",{get:function(){return this._sumView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footView",{get:function(){return this._footView},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"delegate",{get:function(){return this._delegate},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selections",{get:function(){return this._selections},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"editController",{get:function(){return this._editController},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"validations",{get:function(){return this._validations},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topIndex",{get:function(){return this._topIndex},set:function(t){(t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex&&(this._topIndex=t,this.refreshView(),this.closePopups())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftPos",{get:function(){return this._leftPos},set:function(t){(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=t,this._horzScrolled=!0,this.invalidate(),this.closePopups())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"undoable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"undoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"redoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"filtering",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canHovering",{get:function(){return!this.isEditing()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!0,configurable:!0}),a.prototype.isEmpty=function(){return 0==this.itemCount||0==this.visibleLayoutCount},a.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},a.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return 0<=e&&(this._feedbackLayer.removeChildAt(e),!0)},a.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},a.prototype.getColumn=function(t){return this._columns.getColumn(t)},a.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;0<=e;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset()},a.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},a.prototype.invalidateColumns=function(){this._columnLock,this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},a.prototype.getVisibleCellLayout=function(t){return this._activeCellLayout.getVisible(t)},a.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},a.prototype.invalidateLayout=function(){this._updateLock||(n.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},a.prototype.refreshView=function(){this._loading||(this.invalidateLayout(),this.topIndex=this.topIndex,this.leftPos=this.leftPos)},a.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},a.prototype.getFirstCell=function(){if(0<this.itemCount){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof q.GridRow){t=e;break}return new X.CellIndex(this,0<=t?t:0,this.getFirstColumn())}return null},a.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused&&(this.$_editFocused=t)){var i=this.focusedIndex;i&&this.isValid(i)||(i=this.getFirstCell())&&this.setFocusedIndex(i)}t&&"focusin"==e.type&&z.Utils.isAncestorOf(this._container._container,e.target)&&z.Utils.$_setActiveGrid(this)},a.prototype.getItem=function(t){return this._itemProvider.getItem(t)},a.prototype.getIndicatorIndex=function(t){return t.index},a.prototype.getAllItems=function(){return this._itemProvider.getAllItems()},a.prototype.getImage=function(t){return null},a.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new X.CellIndex(this,t,e)},a.prototype.getDataCellIndex=function(t,e){var i=t.parentElement.$_row,o=this.columnByDataCell(t);return null!=e?e.set(i,o):new X.CellIndex(this,i,o)},a.prototype.getHandler=function(){return null},a.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},a.prototype.optionsChanged=function(t){this.refreshView()},a.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t,t=this.topIndex-e},a.prototype.selectColumnFilters=function(t){this.isItemEditing(null)||this._fireFiltering()&&this._filterSelector.show(t.layout.firstColumn,t.cell)},a.prototype.closeFilterSelector=function(){this._filterSelector.hide()},a.prototype.closePopups=function(){this.filtering||this._filterSelector.hide()},a.prototype.columnByHash=function(t){return this._columnMap[t]},a.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},a.prototype.columnByName=function(t){return this._columns.columnByName(t)},a.prototype.columnByField=function(t){return this._columns.columnByField(t)},a.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},a.prototype.getGroupLevel=function(t){return-1},a.prototype.isGroupedColumn=function(t){return!1},a.prototype.setFocus=function(t){void 0===t&&(t=!1),this._editController.setFocus(!0,t)},a.prototype.registerImageList=function(t){t&&t.name&&!this._imageLists.hasOwnProperty(t.name)&&(this._imageLists[t.name]=t,this.$_assignImageList(t,!1))},a.prototype.unregisterImageList=function(t){t&&t.name&&this._imageLists.hasOwnProperty(t.name)&&(delete this._imageLists[t.name],this.$_assignImageList(t,!0))},a.prototype.getImageList=function(t){return t&&this._imageLists[t]},a.prototype.getListImage=function(t,e){return t instanceof Bt.ImageList?t.getImage(e):t?(t=this._imageLists[t])?t.getImage(e):null:void 0},a.prototype.$_assignImageList=function(t,e){for(var i=this.getDataColumns(),o=0,r=i.length;o<r;o++)i[o]},a.prototype.getFirstLayout=function(){return this._activeCellLayout.first},a.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},a.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},a.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},a.prototype.isValid=function(t){return t&&t.grid===this&&0<=t.itemIndex&&t.itemIndex<this.itemCount&&t.column&&t.column.grid===this},a.prototype.getSelection=function(){return 0<this._selections.count?this._selections.getItem(0):null},a.prototype.clearSelection=function(){var t=this.focusedIndex;this._selections.clear(),this.isValid(t)&&0<this.itemCount&&0<this.visibleLayoutCount&&this._selections.add(t,t,this._displayOptions.selectionStyle)},a.prototype.deleteSelection=function(r){function n(t,e){try{if(e&&0<e.length){for(var i=[],o=0,r=e.length;o<r;o++){var n=t.getItem(e[o]);n&&0<=n.dataRow&&i.push(n.dataRow)}if(0<i.length&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function t(t,e){for(var i=null,o=e.length;o--;){var r=t.getItem(e[o]),n=r.itemState;if(q.ItemState_isEditing(n)){i=r,q.ItemState_isInserting(n)&&e.splice(o,1);break}}var s=null;0<e.length&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s)}void 0===r&&(r=!1);var e=this.editOptions,i=this.selections,o=this.itemSource;if((r||e.deletable)&&o instanceof V.EditableItemProvider)if(!this.isItemEditing(null)||e.deletableWhenEdit){if(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1,o=void 0;return 0<=(i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)&&t.canDelete(o=t.getItem(i))&&(r||!t.editOptions.confirmWhenDelete?(t.cancel(),q.ItemState_isInserting(o.itemState)||t.itemSource.remove(o)):confirm(t.editOptions.deleteRowsMessage)&&function(t,e){var i=[];return i.push(e),n(t,i)}(t,i)&&(t.cancel(),q.ItemState_isInserting(o.itemState)||t.itemSource.remove(o))),!0}return!1}(this,i)){for(var s=i.count,a=[],l=0;l<s;l++){var u=i.getItem(l);if(u.style==st.SelectionStyle.ROWS||u.style==st.SelectionStyle.BLOCK)for(var h=u.getBounds(),c=Math.min(h.r1,h.r2),p=Math.max(h.r1,h.r2),d=c;d<=p;d++){var _=this.getItem(d);(0<=_.dataRow||_ instanceof V.EditItem||_ instanceof le.TreeEditItem)&&a.push(d)}}a.sort(function(t,e){return e-e});var f=-1;for(l=a.length;l--;)a[l]==f?a.splice(l,1):f=a[l];0<a.length&&this.canDelete(this.getItem(a[0]))&&(r||!e.confirmWhenDelete?n(this,a)&&(t(this,a),this.clearSelection()):confirm(e.deleteRowsMessage)&&n(this,a)&&(t(this,a),this.clearSelection()))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.")},a.prototype.revertSelection=function(t){void 0===t&&(t=!1);var e=this.editOptions,i=this.selections,o=this.itemSource;if((t||e.revertable)&&o instanceof V.EditableItemProvider&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if(0<=(i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1))return t.itemSource.revert(i),!0}return!1}(this,i))){for(var r=i.count,n=[],s=0;s<r;s++){var a=i.getItem(s);if(a.style==st.SelectionStyle.ROWS||a.style==st.SelectionStyle.BLOCK)for(var l=a.getBounds(),u=Math.min(l.r1,l.r2),h=Math.max(l.r1,l.r2),c=u;c<=h;c++){var p=this.getItem(c);(0<=p.dataRow||p instanceof V.EditItem||p instanceof le.TreeEditItem)&&n.push(c)}}n.sort(function(t,e){return e-e});var d=-1;for(s=n.length;s--;)n[s]==d?n.splice(s,1):d=n[s];0<n.length&&o.revertAll(n)}},a.prototype.eraseSelection=function(){var t=this.editOptions,e=this.selections,i=this.itemSource;if(t.readOnly||!t.erasable||!t.updatable)return!1;if(!(i instanceof V.EditableItemProvider))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.setCellValue(i,void 0),!0}return!1}(this,e))return!0;var o=e.count;if(o<1)return!1;for(var r=[],n=0;n<o;n++)(s=e.getItem(n)).style!=st.SelectionStyle.ROWS&&s.style!=st.SelectionStyle.BLOCK||(r=r.concat(s.getItems()));if(0==r.length)return!1;for(n=0;n<o;n++){var s;(s=e.getItem(n)).setValues(void 0)}return!0},a.prototype.getSelectedRows=function(){var t=this._selections.getItem(0);if(t){for(var e=this.itemSource,i=t.getBounds(),o=[],r=i.r1;r<=i.r2;r++){var n=e.getItem(r).dataRow;0<=n&&o.push(n)}return o}return null},a.prototype.setFocusedIndex=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),!this._focusing){this._focusing=!0;try{this.$_doSetFocusedIndex(t,e,i)}finally{this._focusing=!1}}},a.prototype.getTableCell=function(t){for(var e=t;e;){if(e instanceof HTMLTableCellElement)return e;e=e.parentElement}return null},a.prototype.getTableView=function(t){return this._tableViews[t.parentElement.$_view]},a.prototype.getBodyView=function(t){return this.getTableView(t)},a.prototype.getHeaderView=function(t){return this.getTableView(t)},a.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e.$_row)return W.TableCellType.FIXED_BAR;var i=this._tableViews[e.$_view];if(i instanceof bt.GridBodyElement)return W.TableCellType.DATA;if(i instanceof ct.HeaderElement)return W.TableCellType.HEADER;if(i instanceof xt.FooterElement)return W.TableCellType.FOOTER;if(i instanceof pt.RowIndicatorElement)return W.TableCellType.INDICATOR;if(i instanceof Ct.StateBarElement)return W.TableCellType.STATE;if(i instanceof wt.CheckBarElement)return W.TableCellType.CHECK;if(i instanceof Dt.GridHeadElement)return W.TableCellType.HEAD}},a.prototype.cellToIndex=function(t){var e=X.CellIndex.temp(this,-1,null);if((t=this.getCellViewOf(t))instanceof HTMLTableCellElement){var i=this.getBodyView(t);i&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement.$_row)}return e},a.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=e||new rt.Point,o=this.getTableView(t);o.getCellPoint(t,e);var r=o.boundsByContainer(K.Rectangle.Temp.set(e.x,e.y,0,0));return i.set(r.x,r.y),i},a.prototype.pointToIndex=function(t,e,i,o){var r=X.CellIndex.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,r):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,r),r},a.prototype.getEditCellBounds=function(t){return this.layoutManager.getMergedCell(t),r.clone()},a.prototype.getEditBounds=function(t){var e=this.layoutManager;if(e.getMergedCell(t),this._bodyView.getCellView(e,t)){var i=e.getDataCellBounds(t);return i=this._bodyView.boundsByContainer(i)}return r.clone()},a.prototype.getCellViewOf=function(t){for(;t;){if(t instanceof HTMLTableCellElement)return t;t=t.parentElement}return null},a.prototype.getCellView=function(t,e,i,o){return null},a.prototype.getFocusedCellView=function(t){var e=this.layoutManager,i=t.item,o=(i&&i.merged,t.colFixed),r=t.rightFixed;return q.GroupItemImpl,i instanceof q.GroupItemImpl?null:(r?this._rightBodyView:o?this._fixedBodyView:this._bodyView).getCellView(e,t)},a.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},a.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},a.prototype.pasteFromClipboard=function(t,e){},a.prototype.copyToClipboard=function(t,e,i){void 0===i&&(i=!1);var o,r=!1,n=this.focusedIndex;if(i||this.copyOptions.enabled){if(!i){var s=this.selections;o=(r=this.copyOptions.singleMode||0==s.count||s.single)?new st.BlockSelection(s,n,n):s.getItem(0),i=!0}return i?(e=e||o.getBounds(),r?this._clipboardManager.copyCellToClipboard(n):this._clipboardManager.copyToClipboard(e)):null}return this._clipboardManager.copyEmtpyToClipboard()},a.prototype.toClipboard=function(t,e){if(void 0===e&&(e=!0),!this.isEmpty()){var i;if(!(t&&t instanceof X.CellRange)){var o=void 0,r=void 0;if(o=this._activeCellLayout.first,r=this._activeCellLayout.first,!o||!r)return;var n=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),s=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);i=X.CellRange.createRange(n,o,s,r)}var a=this.copyToClipboard(null,i,!0);if(a=null==a?"":a,!e)return a;if(window.clipboardData)window.clipboardData.setData("text",a);else{var l=document.createElement("textarea");l.style.display="none",document.body.appendChild(l),l.value=a,l.select(),document.execCommand("copy"),setTimeout(function(){document.body.removeChild(l),l=null},100)}}},a.prototype.isEditing=function(t){return this._editController.editing&&(!t||X.CellIndex.areEquals(t,this._editController.editIndex))},a.prototype.isItemEditing=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof V.EditableItemProvider&&this.itemSource.isEditing(t)},a.prototype.isItemEdited=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof V.EditableItemProvider&&this.itemSource.isEdited(t)},a.prototype.getEditValue=function(t,e,i){},a.prototype.editorCommit=function(t,e,i,o){return this._doCellCommit(e,i,o)},a.prototype._doCellCommit=function(t,e,i){return this._fireEditCommit(t,e,i)},a.prototype.editorActivated=function(t){},a.prototype.$_validateCell=function(e,t,i){try{this._fireValidateCell(e,i,t)}catch(t){if(t instanceof $.ValidationError&&t.level!==W.ValidationLevel.IGNORE)throw t.column=e.column,t;throw t}},a.prototype.$_validateRow=function(t,e){for(var i=this.getDataColumns(),o=0,r=i.length;o<r;o++){var n=i[o],s=X.CellIndex.temp(this,t.index,n),a=t.getData(n.dataIndex);this.$_validateCell(s,a,e)}var l=t.getRowObject();try{this._fireValidateRow(t,e,l)}catch(t){if(t instanceof $.ValidationError&&t.level!==W.ValidationLevel.IGNORE)throw t;throw t}},a.prototype.$_validateCellValue=function(e,t){var i=e.dataColumn;try{var o=q.ItemState_isInserting(e.item.itemState);this._validationManager.validateCell(e,o),this.$_validateCell(e,t,o),i.error=null,i.errorLevel=W.ValidationLevel.IGNORE;var r=e.dataId,n=i.dataIndex,s=this._validationManager._cellList[r];return s&&s[n]&&delete s[n],!0}catch(t){if(!(t instanceof $.ValidationError))throw t;i.error=t.message||t,i.errorLevel=t.level||W.ValidationLevel.ERROR,this._validationManager._userValidations&&this._validationManager.addInvalidateCell(e,t)}return!1},a.prototype.validateCellCommit=function(t,e){},a.prototype.checkValidateCells=function(t,e){return this._validationManager.checkValidateCells(t,e)},a.prototype.getInvalidCellList=function(){return this._validationManager.getInvalidCellList()},a.prototype.clearInvalidCellList=function(){this._validationManager.clearInvalidCellList()},a.prototype.getCellEditable=function(t){},a.prototype.getCellReadOnly=function(t){return!1},a.prototype.canWrite=function(t){return this._editOptions.editable&&this.isValid(t)&&0<this.visibleLayoutCount&&t.item.canEdit()&&!!t.dataColumn&&(this.fixedOptions.rowEditable||t.itemIndex>=this.layoutManager.fixedItemCount)},a.prototype.canEdit=function(t){var e=this.getCellEditable(t);return"boolean"==typeof e?this.canWrite(t)&&e:this.canWrite(t)&&t.dataColumn.editable},a.prototype.canUpdate=function(t,e){return this.editOptions.canUpdate()&&0<this.visibleLayoutCount&&this.itemSource&&this.itemSource.canUpdate(t,e)},a.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&0<this.visibleLayoutCount&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},a.prototype.canInsert=function(t,e,i){var o=this.itemSource,r=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&0<this.visibleLayoutCount&&o&&o.canInsert(t);if(r)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return r},a.prototype._doCanInsert=function(t,e,i){return!0},a.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&0<this.visibleLayoutCount&&e&&(this.isItemEditing(t)||e.canDelete(t))},a.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},a.prototype.canCancel=function(t){return this.isItemEditing(t)},a.prototype.edit=function(t){return t=t||this.focusedIndex,!!(this.isValid(t)&&this.itemSource instanceof V.EditableItemProvider)&&!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&this.itemSource.edit(t.item)},a.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},a.prototype.insert=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),!(t=t||(this.focusedIndex?this.focusedIndex.item:null)))return!1;var o=this.itemSource;if(o instanceof V.EditableItemProvider&&this.canInsert(t,e,i)){var r=this.$_getInsertDefaults(null);return this._cancelDummy(),o.insert(t,r,e,i)}return!1},a.prototype.append=function(){var t=this.itemSource;if(t instanceof V.EditableItemProvider&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},a.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable},a.prototype._cancelDummy=function(){},a.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);o&&o instanceof V.EditItem&&o.setData(e,i)},a.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},a.prototype.canShowEditor=function(t,e){return!!this.isValid(t)},a.prototype.hideEditor=function(){this._editController.closeList(!1),this._editController.hideEditor()},a.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},a.prototype.showEditor=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,!!this._editController.showEditor(t,i)&&(e&&this._editController.caretToLast(),!0)},Object.defineProperty(a.prototype,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),a.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(a.prototype,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),a.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},a.prototype.execute=function(t){},a.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},a.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new Yt.LocalLookupSourceProvider,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},a.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new Yt.LocalLookupSourceProvider)).add(t)},a.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},a.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;return i.exists(z.Utils.makeArray(e))}},a.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},a.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw"Invalid lookup source id: "+t;e.clear()}},a.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=z.Utils.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw"Invalid lookup source id: "+t;i?o.add(e,i):o.addRow(e)}},a.prototype.setOptions=function(t){},a.prototype.doContextMenu=function(t){var e=(t.currentTarget||t.srcElement).getBoundingClientRect(),i=t.clientX-e.left,o=t.clientY-e.top,r=this._contextMenu,n=this.activeTool._findTableCell();if(this.getCellType(n)===W.TableCellType.HEAD){var s=this.headView.getHeadModel(n);r=this.popupMenuManager.getMenu(s&&s.popupMenu)||this._contextMenu}var a=this._fireContextMenuPopup(i,o,void 0);r&&(t.preventDefault(),a&&this._popupMenuManager.showContext(r,t,i,o))},a.prototype.setContextMenu=function(t){return(t=z.Utils.makeArray(t))?(this._contextMenu&&this._contextMenu.dispose(),this._contextMenu=new Xt.PopupMenu("gridContextMenu",this,t)):(this._contextMenu&&this._contextMenu.dispose(),this._contextMenu=null),this._contextMenu},a.prototype.addPopupMenu=function(t,e,i){void 0===i&&(i=!0),e=z.Utils.makeArray(e),t&&e&&this.popupMenuManager.addMenu(t,e,i)},a.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},a.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t);if(i){var o=this.getTableView(i);if(o instanceof ut.VisualObjectElement)return void o.setCursor(e)}}this._container.setCursor(e)},a.prototype.canMoveIndex=function(t){var e=this.layoutManager;return this.fixedOptions.movable||t>=e.fixedLayoutCount&&t<e.rightFirstLayout},a.prototype.canMoveToIndex=function(t){var e=this.layoutManager;return this._fixedOptions.movable||t>=e.fixedLayoutCount&&t<e.rightFirstLayout},a.prototype.getEditCellValue=function(){return this._editController.editValue},a.prototype.setEditCellValue=function(t,e,i){(this.isEditing||e)&&this._editController.setEditValue(t,i)},a.prototype._getCssSelector=function(){return""},Object.defineProperty(a.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),a.prototype._createDelegate=function(){return new zt.GridDelegate(this)},a.prototype._createLayoutManager=function(){return new vt.GridLayoutManager(this)},a.prototype._createEditController=function(){return new Wt.DefaultEditController(this)},a.prototype._initDom=function(t){n.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},a.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;n.prototype.setRect.call(this,t),e&&(this._dirty=!0)},a.prototype._doDraw=function(t){},a.prototype._doCreateOtherElements=function(){},a.prototype._createSidePane=function(){return null},a.prototype.isSidePaneVisible=function(){return!1},a.prototype._createBodyView=function(t){return new bt.GridBodyElement(t)},a.prototype._createFixedBodyView=function(t){return new bt.FixedBodyElement(t)},a.prototype._createRightBodyView=function(t){return new bt.RightBodyElement(t)},a.prototype._createGridPanel=function(){return null},a.prototype._createGridFooter=function(){return new _.GridFooter(this)},a.prototype._initStyles=function(){},a.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},a.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},a.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),this.clearSelection()},a.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},a.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},a.prototype._visualObjectChanged=function(t){this.invalidateLayout()},a.prototype.$_summaryModeChanged=function(){this._doSummaryModeChanged()},a.prototype._doSummaryModeChanged=function(){},a.prototype._addGridObject=function(t){this._gridObjects.push(t)},a.prototype.addElement=function(t){this._rootElement.addChild(t)},a.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},a.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this._updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1)}finally{this._horzScrolled=!1}},a.prototype.$_layout=function(t){this._doLayout(t)},a.prototype._doLayout=function(t){var e=this._layoutManager;this._resetting=!1;try{this.$_doLayout(e,t)}finally{this._loading&&(this._loading=!1)}this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_checkCurrentRow()},a.prototype.$_doLayout=function(t,e){var i=e.clone(),o=this._displayOptions.vscrollBar?this._scrollBarWidth:0,r=this._displayOptions.hscrollBar?this._scrollBarHeight:0;this.$_editOptionsWritable=this._editOptions.isWritable(),this.$_fixedRowEditable=this._fixedOptions.rowEditable,this._activeCellLayout.$_refresh(this._columns),this._activeCellLayout.$_prepareLayout(this),t.measure(i,this._leftPos,this._topIndex,o,r),this._leftPos=t.leftPos,this._topIndex=t.topIndex,t.layout(i),this._updateScrollBars(t,i),this._layoutSelectionViews(),this._layouted=!0,this._editController.resetEditor(!1)},a.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},a.prototype._updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,o=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,o),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var r=this.itemCount,n=r-t.fixedItemCount,s=Math.min(t.fullItemCount,r-t.topIndex);this._vscrollBar.setProperties(0,n,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);this._container&&this._container.defaultTool.layoutChanged(),e&&this._layoutScrollBars(t,e)},a.prototype._layoutScrollBars=function(t,e){var i=this._displayOptions.vscrollBar?this._scrollBarWidth:0,o=this._displayOptions.hscrollBar?this._scrollBarHeight:0,r=this._hscrollBar,n=this._vscrollBar;t.hscrollBar&&(r.setBounds(e.x,e.bottom-o,e.width-(t.vscrollBar?i:0),o),r.layoutContent()),t.vscrollBar&&(n.setBounds(e.right-i,e.y,i,e.height-(t.hscrollBar?o:0)),n.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},a.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},a.prototype._canMerge=function(){return!1},a.prototype._populateMerges=function(){if(this._canMerge())for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o=t[e];if(o&&o.canMerge()){var r=o._merges;r||(r=new B.ColumnMergeManager(o),o._merges=r),r.clear(),o instanceof G.DataColumn&&o.mergeGrouped?0<this.getGroupLevel(o.dataIndex)&&r.initialize(B.RowGroupMergeRule.INIT_COUNT):r.initialize(B.ColumnMergeRule.INIT_COUNT)}}},a.prototype._doRowGroupMergeModeChanged=function(){},a.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},a.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},a.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},a.prototype.$_layoutRowBlock=function(){var t=this.displayOptions;t.rowBlockType!=W.RowMaskType.NONE&&t.rowBlockType},a.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var o=this.activeTool,r=this._currentRow,n=this._displayOptions.rowChangeDelay,s=t||n<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(r,i),o.currentRowChanged(r,i)):0<n&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(r,i),o.currentRowChanged(r,i)}.bind(this),n)),!0}}return!1},a.prototype.$_doSetFocusedIndex=function(t,e,i){if(!t)return!1;if(this.isValid(t)||(t=t.clone()).normalize(this),!this.isValid(t)){var o=this.dataSource;return o&&0!=o.rowCount&&0!=this.itemCount||(this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=this.getFirstLayout()),!1}if(X.CellIndex.areEquals(t,this._focusedIndex))return!0;var r=this._editOptions,n=this._focusedIndex.clone();if(!this._fireCurrentChanging(n,t))return!1;var s=this.itemSource,a=this.container.activeTool,l=this.layoutManager;if(!this._editController.focusedIndexChanging())return!1;var u=n.item;if(s&&t.itemIndex!=n.itemIndex)try{if(u)switch(u.itemState){case q.ItemState.INSERTING:if(!this.commit(r.forceInsert,!0))return this.cancel(!0),!1;break;case q.ItemState.APPENDING:if(!this.commit(r.forceAppend,!0))return this.cancel(!0),!1;break;case q.ItemState.UPDATING:if(!this.commit(this.isEditing()&&r.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof $.ValidationError)return(t=this._fireValidationFail(u.index,t.column,t))&&alert(r.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof $.AbortError)return!1;throw t}else u&&this.isItemEditing(u)&&r.validateOnExit&&this.invalidateLayout();a.focusedIndexChanging(t),this.isValid(n),this._focusedIndex.assign(t),V.EditableItemProvider,this._editController.focusedIndexChanged(n,t),a.focusedIndexChanged(n,t),this.isValid(this._focusedIndex),e&&this.clearSelection(),this.isValid(this._focusedIndex)&&(this._rowIndicatorView.visible&&this._rowIndicatorView.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this));var h=!X.CellIndex.areEquals(this._focusedIndex,l._prevFocused);return(i||h)&&this.$_makeFocusIndexVisible(h),this._fireCurrentChanged(this._currentIndex.assign(this._focusedIndex)),this.$_checkCurrentRow(),!0},a.prototype.$_makeFocusIndexVisible=function(t){this.isValid(this._focusedIndex)&&this.makeCellVisible(this._focusedIndex,t)},a.prototype.makeCellVisible=function(t,e){void 0===e&&(e=!1),e?(this.layoutManager.makeCellVisible(t),this.invalidateLayout()):this.isValid(t)?this.layoutManager.cellIsVisible(t)||(this.layoutManager.makeCellVisible(t),this.invalidateLayout()):t&&t.column&&(this.layoutManager.makeCellVisible(t),this.invalidateLayout())},a.prototype.makeColumnVisible=function(t,e){void 0===e&&(e=!1);var i=this.getIndex(-1,t);this.makeCellVisible(i,e)},a.prototype.makeItemVisible=function(t,e){void 0===e&&(e=!1);var i=this.getIndex(t,null);this.makeCellVisible(i,e)},a.prototype.makeLayoutVisible=function(t){t&&(this.layoutManager.makeLayoutVisible(t),this.invalidateLayout())},a.prototype.cancelEditor=function(t){t=!(0<arguments.length)||t,this._editController.cancelEditor(t)},a.prototype.itemEditCancel=function(){return!0},a.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex,o=this.itemSource;return!(!this.isValid(i)||!o.isEditing(i.item))&&(i.dataId,i=i.clone(),o.cancel(),e._prepareEditor(e._editIndex),i.normalize(this),this.setFocusedIndex(i),t&&this.$_makeFocusIndexVisible(!1),!0)},a.prototype.commitEditor=function(t){void 0===t&&(t=!0),this.editController.commitEditor(t,!1)},a.prototype.commit=function(t,e){void 0===e&&(e=!1);var i=this.focusedIndex;if(!this.isValid(i))return!1;var o=z.Utils.cast(this.itemSource,V.EditableItemProvider);if(!o)return!1;this.isEditing()&&(this.editController.commitEditor(!0,!1),this.editController.invalidateEditor());var r=i.item;if(o.isEditing(r)&&(t||o.isEdited(r))){if(q.ItemState_isInserting(r.itemState),o.commit())return!0;if(e)throw new $.AbortError("Commit failed.");return!1}return!1},a.prototype.editorCancel=function(t,e){},a.prototype.editorCanceled=function(){this.activeTool.resetFocused()},a.prototype._editorStarted=function(t,e){this.edit(e)},a.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},a.prototype._editorSearch=function(t,e,i){},a.prototype._searchCellButtonClick=function(t,e,i){return!0},a.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var i=0;i<t.columnCount;i++){var o=t.getColumn(i);if(o instanceof G.DataColumn&&o.dataIndex==e){var r=o.getField();return r&&r.defaultValue}}}for(var i=this.dataSource.fieldCount,o=[],r=0;r<i;r++)o.push(void 0);for(r=0;r<i;r++){var n=e(this,r);n&&(o[r]=n)}return o},a.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);o instanceof G.DataColumn&&null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},a.prototype.$_getItemDefaults=function(t,e){},a.prototype.$_readDefaultValues=function(t){},a.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},a.prototype._clearColumnErrors=function(){},a.prototype._setColumnErrors=function(t){},a.prototype.sortColumn=function(t,e){t&&(this.sortingOptions.style==W.SortStyle.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(W.SortStyle.INCLUSIVE,t):this.sortColumnWithStyle(W.SortStyle.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions.style,t))},a.prototype.sortColumnWithStyle=function(t,e){if(!e)throw new Error("column is null");if(!(this.isItemEditing(null)||e.dataIndex<0)){var i=this._sortingOptions.textCase;t==W.SortStyle.EXCLUSIVE?e.sortOrder<0?this.orderBy([e],[W.SortDirection.ASCENDING],[i]):e.sortDirection==W.SortDirection.ASCENDING?this.orderBy([e],[W.SortDirection.DESCENDING],[i]):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.orderBy([e],[W.SortDirection.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=W.SortStyle.INCLUSIVE&&t!=W.SortStyle.REVERSE||(e.sortOrder<0?this.$$_addSort(e,W.SortDirection.ASCENDING,i,t==W.SortStyle.REVERSE):e.sortDirection==W.SortDirection.ASCENDING?this.$$_addSort(e,W.SortDirection.DESCENDING,i,t==W.SortStyle.REVERSE):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.$$_addSort(e,W.SortDirection.ASCENDING,i,t==W.SortStyle.REVERSE):this.unsortColumnWithStyle(t,e))}},a.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o,r=[],n=t.length,s=0;s<n;s++)o=t[s],r.push(o.dataIndex);this._sortItems(r,e,i)}},a.prototype.unsortColumnWithStyle=function(t,e){if(!this.isItemEditing()&&e){var i=this.getSortFields(),o=this.getSortDirections(),r=this.getSortCases(),n=i.indexOf(e.dataIndex);n<0||(t==W.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):t!=W.SortStyle.INCLUSIVE&&t!=W.SortStyle.REVERSE||(i.splice(n,1),o.splice(n,1),r.splice(n,1),this._sortItems(i,o,r)))}},a.prototype.$$_addSort=function(t,e,i,o){var r=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=r.indexOf(a);0<=l?(n[l]=e,s[l]=i):o?(r.splice(0,0,a),n.splice(0,0,e),s.splice(0,0,i)):(r.push(a),n.push(e),s.push(i)),this._sortItems(r,n,s)},a.prototype._sortItems=function(t,e,i){var o=t.concat(),r=e?e.concat():[],n=i?i.concat():[];this._fireSorting(o,r)&&this._doSortItems(t,r,n)},a.prototype._doSortItems=function(t,e,i){},a.prototype.getSortFields=function(){return null},a.prototype.getSortDirections=function(){return null},a.prototype.getSortCases=function(){return null},a.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(a.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!0,configurable:!0}),a.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},a.prototype.canGrouping=function(){return!1},a.prototype.$_layoutRowHover=function(t,e){var i=this._layoutManager,o=i.footerBounds.y,r=i.getItemBounds(t.rowIndex);switch(r.y+=i.contentBounds.y+i.bodyBounds.y,r.bottom>o&&(r.bottom=o),e){case W.RowMaskType.DATA:r.x=this._fixedContentPane.x,r.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case W.RowMaskType.FILL:r.x=0,r.width=this.width;break;case W.RowMaskType.ROW:r.x=0,r.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(r)},a.prototype.$_setHoveredCell=function(t){if(t!==this._hoveredCell){this._hoveredCell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),this._hoveredCell=t,this._hoveredCell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!0);var e=this._displayOptions.rowHoverType;t&&e&&e!=W.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(t,e)):this._rowHoverView.visible=!1,this._doHoveredCellChanged(t)}},a.prototype._doHoveredCellChanged=function(t){},a.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},a.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent(a.CURRENT_CHANGING,t,e)},a.prototype._fireCurrentChanged=function(t){this.fireEvent(a.CURRENT_CHANGED,t)},a.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent(a.CURRENT_ROW_CHANGED,t,e)},a.prototype._fireValidateCell=function(t,e,i){this.fireEvent(a.VALIDATE_CELL,t,e,i)},a.prototype._fireValidateRow=function(t,e,i){this.fireEvent(a.VALIDATE_ROW,t,e,i)},a.prototype._fireValidationFail=function(t,e,i){this.fireObjectEvent(a.VALIDATION_FAIL,t,e,i)},a.prototype._fireColumnHeaderClicked=function(t,e,i){this.fireEvent(a.COLUMN_HEADER_CLICKED,t,e,i)},a.prototype._fireColumnHeaderImageClicked=function(t){this.fireEvent(a.COLUMN_HEADER_IMAGE_CLICKED,t)},a.prototype._fireColumnHeaderDblClicked=function(t){this.fireEvent(a.COLUMN_HEADER_DBL_CLICKED,t)},a.prototype._fireColumnCheckedChanged=function(t){this.fireEvent(a.COLUMN_CHECKED_CHANGED,t)},a.prototype._fireFooterCellClicked=function(t){this.fireEvent(a.FOOTER_CELL_CLICKED,t)},a.prototype._fireFooterCellDblClicked=function(t){this.fireEvent(a.FOOTER_CELL_DBL_CLICKED,t)},a.prototype._fireHeaderSummaryCellClicked=function(t){this.fireEvent(a.HEADERSUMMARY_CELL_CLICKED,t)},a.prototype._fireHeaderSummaryCellDblClicked=function(t){this.fireEvent(a.HEADERSUMMARY_CELL_DBL_CLICKED,t)},a.prototype._fireCheckBarHeadClicked=function(){this.fireEvent(a.CHECK_BAR_HEAD_CLICKED)},a.prototype._fireCheckBarFootClicked=function(){this.fireEvent(a.CHECK_BAR_FOOT_CLICKED)},a.prototype._fireIndicatorCellClicked=function(t){this.fireEvent(a.INDICATOR_CELL_CLICKED,t)},a.prototype._fireStateBarCellClicked=function(t){this.fireEvent(a.STATE_BAR_CELL_CLICKED,t)},a.prototype._fireRowGroupHeadClicked=function(){this.fireEvent(a.ROWGROUP_HEAD_CLICKED)},a.prototype._fireRowGroupFootClicked=function(){this.fireEvent(a.ROWGROUP_FOOT_CLICKED)},a.prototype._fireRowGroupHeaderFooterClicked=function(t,e){this.fireEvent(a.ROWGROUP_HEADER_FOOTER_CLICKED,t,e)},a.prototype._fireRowGroupBarClicked=function(t){this.fireEvent(a.ROWGROUP_BAR_CLICKED,t)},a.prototype._fireCheckBarFootDblClicked=function(){this.fireEvent(a.CHECK_BAR_FOOT_DBL_CLICKED)},a.prototype._fireIndicatorCellDblClicked=function(t){this.fireEvent(a.INDICATOR_CELL_DBL_CLICKED,t)},a.prototype._fireStateBarCellDblClicked=function(t){this.fireEvent(a.STATE_BAR_CELL_DBL_CLICKED,t)},a.prototype._fireRowGroupHeadDblClicked=function(){this.fireEvent(a.ROWGROUP_HEAD_DBL_CLICKED)},a.prototype._fireRowGroupFootDblClicked=function(){this.fireEvent(a.ROWGROUP_FOOT_DBL_CLICKED)},a.prototype._fireRowGroupHeaderFooterDblClicked=function(t,e){this.fireEvent(a.ROWGROUP_HEADER_FOOTER_DBL_CLICKED,t,e)},a.prototype._fireRowGroupBarDblClicked=function(t){this.fireEvent(a.ROWGROUP_BAR_DBL_CLICKED,t)},a.prototype._firePanelClicked=function(){this.fireEvent(a.PANEL_CLICKED)},a.prototype._firePanelDblClicked=function(){this.fireEvent(a.PANEL_DBL_CLICKED)},a.prototype._fireRowGroupPanelClicked=function(t){this.fireEvent(a.ROWGROUP_PANEL_CLICKED,t)},a.prototype._fireRowGroupPanelDblClicked=function(t){this.fireEvent(a.ROWGROUP_PANEL_DBL_CLICKED,t)},a.prototype._fireBodyEmptyClicked=function(){this.fireEvent(a.BODY_EMPTY_CLICKED)},a.prototype._fireBodyEmptyDblClicked=function(){this.fireEvent(a.BODY_EMPTY_DBL_CLICKED)},a.prototype._fireMenuItemClicked=function(t,e){this.fireEvent(a.MENU_ITEM_CLICKED,t,e)},a.prototype._fireContextMenuPopup=function(t,e,i){return this.fireConfirmEvent(a.CONTEXT_MENU_POPUP,t,e,i)},a.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent(a.CONTEXT_MENU_ITEM_CLICKED,t,e)},a.prototype._fireCellButtonClicked=function(t){this._buttonClicked=!0,this.fireEvent(a.CELL_BUTTON_CLICKED,t)},a.prototype._fireEditButtonClicked=function(t){this.fireEvent(a.EDIT_BUTTON_CLICKED,t)},a.prototype._fireImageButtonClicked=function(t,e,i){this._buttonClicked=!0,this.fireEvent(a.IMAGE_BUTTON_CLICKED,t,e,i)},a.prototype._fireScrollToBottom=function(){this.fireEvent(a.SCROLL_TO_BOTTOM)},a.prototype._fireTopIndexChanged=function(t){this.fireEvent(a.TOPITEMINDEX_CHANGED,t)},a.prototype._fireDataCellClicked=function(t){this.editOptions.exceptDataClickWhenButton&&this._buttonClicked||this.fireEvent(a.DATA_CELL_CLICKED,t)},a.prototype._fireDataCellDblClicked=function(t){this.fireEvent(a.DATA_CELL_DBL_CLICKED,t)},a.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent(a.ROWS_DELETING,t)},a.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent(a.ROW_INSERTING,t,e)},a.prototype._fireItemCommit=function(t,e){this.fireEvent(a.ITEM_COMMIT)},a.prototype._fireSelectionChanged=function(){},a.prototype._fireSelectionAdded=function(t){},a.prototype._fireSelectionRemoved=function(){},a.prototype._fireSelectionCleared=function(){},a.prototype._fireSelectionResized=function(t){},a.prototype._fireSelectionEnded=function(t){},a.prototype._fireUpdateStarted=function(t,e){this.fireEvent(a.UPDATE_STARTED,t)},a.prototype._fireInsertStarted=function(t,e){this.fireEvent(a.INSERT_STARTED,t,e)},a.prototype._fireShowEditor=function(t,e){},a.prototype._fireHideEditor=function(t){},a.prototype._fireEditChange=function(t,e){this.fireEvent(a.EDIT_CHANGE,t,e)},a.prototype._fireGetEditValue=function(t,e){this.fireEvent(a.GET_EDIT_VALUE,t,e)},a.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent(a.EDIT_COMMIT,t,e,i)},a.prototype._fireEditCanceled=function(t){this.fireEvent(a.EDIT_CANCELED,t)},a.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent(a.ITEM_EDIT_CANCEL,t)},a.prototype._fireItemEditCanceled=function(t){this.fireEvent(a.ITEM_EDIT_CANCELED,t)},a.prototype._fireEditSearch=function(t,e){this.fireEvent(a.EDIT_SEARCH,t,e)},a.prototype._fireSearchCellButtonClick=function(t,e){this.fireObjectEvent(a.SEARCH_BUTTON_CLICK,t,e)},a.prototype._fireCellEdited=function(t,e){this.fireEvent(a.CELL_EDITED,t,e)},a.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent(a.EDIT_ROW_CHANGED,t,e,i,o)},a.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent(a.EDIT_ROW_PASTED,t,e,i,o)},a.prototype._fireItemsPasted=function(t){this.fireEvent(a.ROWS_PASTED,t)},a.prototype._fireItemChecked=function(t){this.fireEvent(a.ITEM_CHECKED,t,t.checked)},a.prototype._fireItemsChecked=function(t,e){this.fireEvent(a.ITEMS_CHECKED,t,e)},a.prototype._fireItemAllChecked=function(t){this.fireEvent(a.ITEM_ALL_CHECKED,t)},a.prototype._fireErrorClicked=function(t,e){this.fireEvent(a.ERROR_CLICKED,e)},a.prototype._fireSorting=function(t,e){return this.fireConfirmEvent(a.SORTING,t,e)},a.prototype._fireFiltering=function(){return this.fireConfirmEvent(a.FILTERING)},a.prototype._fireKeyDown=function(t,e,i,o){return this.fireConfirmEvent(a.KEY_DOWN,t,e,i,o)},a.prototype._fireKeyPress=function(t){this.fireEvent(a.KEY_PRESS,t)},a.prototype._fireKeyUp=function(t,e,i,o){this.fireEvent(a.KEY_UP,t,e,i,o)},a.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent(a.SHOW_TOOLTIP,t,e)},a.prototype._fireShowHeaderTooltip=function(t,e){return this.fireObjectEvent(a.SHOW_HEADER_TOOLTIP,t,e)},a.prototype._fireColumnPropertyChanged=function(t,e,i){this.fireEvent(a.COLUMN_PROPERTY_CHANGED,t,e,i)},a.prototype._fireShowInnerDragCursor=function(t){this.fireObjectEvent(a.SHOW_INNER_DRAG_CURSOR,t)},a.prototype._fireInnerDragStart=function(t){this.fireConfirmEvent(a.INNER_DRAG_START,t)},a.prototype._fireInnerDragOver=function(t,e){this.fireObjectEvent(a.INNER_DRAG_OVER,t,e)},a.prototype._fireInnerDrop=function(t,e){return this.fireConfirmEvent(a.INNER_DROP,t,e)},a.prototype._fireGridActivated=function(){},a.prototype._fireApplyCallback=function(){var t=Array.prototype.slice.call(arguments,0);t.splice(0,1,a.APPLY_CALLBACK),this.fireEvent.apply(this,t)},a.prototype._firePaste=function(t,e){this.fireConfirmEvent(a.PASTE,t,e)},a.prototype._firePasted=function(){this.fireEvent(a.PASTED)},a.prototype._fireCommandStackChanged=function(t,e){this.fireEvent(a.COMMAND_STACK_CHANGED,t,e),this.onCommandStackChanged&&this.onCommandStackChanged(this,t,e)},a.prototype.onScrollBarScrolled=function(t,e,i,o){if(this.displayOptions,t.vertical){var r=this.topIndex;switch(e){case St.ScrollEventType.LINE:return void this.scrollRow(i);case St.ScrollEventType.PAGE:r=this.topIndex+i*t._page;break;case St.ScrollEventType.THUMB_TRACK:default:r=o}r!=this.topIndex&&(this.topIndex=r)}else{var n=this.leftPos;switch(e){case St.ScrollEventType.LINE:n=this.leftPos+8*i;break;case St.ScrollEventType.PAGE:break;case St.ScrollEventType.THUMB_TRACK:default:n=o}n!=this.leftPos&&(this.leftPos=n)}},a.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.resetGrid()},a.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this._populateMerges(),this.refreshView()},a.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.refreshView()},a.prototype.onItemProviderItemInserted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._syncHeadCheck=!0,this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},a.prototype.onItemProviderItemDeleted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._syncHeadCheck=!0,this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},a.prototype.onItemProviderItemUpdated=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId):this._updateRows=[e.dataId],this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},a.prototype.onItemProviderCheckableChanged=function(t,e){this.refreshView()},a.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},a.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},a.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},a.prototype.onItemProviderItemCheckChanged=function(t,e,i){},a.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},a.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},a.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},a.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},a.prototype.onItemProviderSorted=function(t){this.refreshView(),this.fireEvent(a.SORTING_CHANGED)},a.prototype.onItemProviderFilterAdded=function(t){},a.prototype.onItemProviderFilterRemoved=function(t){},a.prototype.onItemProviderFilterCleared=function(t){},a.prototype.onItemProviderFilterAllCleared=function(t){},a.prototype.onItemProviderFiltered=function(t,e,i){this.refreshView(),this.fireEvent(a.FILTERING_CHANGED,e,i)},a.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},a.prototype.$_focusEditItem=function(t){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&0<this.visibleLayoutCount&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)},a.prototype.onItemEditUpdateStarted=function(t,e){this.refreshView(),this._fireUpdateStarted(e,!1)},a.prototype.onItemEditAppendStarted=function(t,e){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this._fireInsertStarted(e,!0)},a.prototype.onItemEditInsertStarted=function(t,e){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this._fireInsertStarted(e,!1)},a.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),this._cellUpdateEventLock||this._fireCellEdited(e,i)},a.prototype.onItemEditCellUpdated=function(t,e,i,o,r){this.refreshView(),this._cellUpdateEventLock||this._fireEditRowChanged(e,i,o,r)},a.prototype.onItemEditCommitting=function(t,e){},a.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView()},a.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem)},a.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},a.prototype.onItemEditCancelReuqest=function(t){this.cancel()},a.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},a.prototype.onSelectionChanged=function(t){this._fireSelectionChanged()},a.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e),this._fireSelectionChanged()},a.prototype.onSelectionRemoved=function(t){this._fireSelectionRemoved(),this._fireSelectionChanged()},a.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._fireSelectionCleared(),this._fireSelectionChanged()},a.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e),this._fireSelectionChanged()},a.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},a.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},a.CURRENT_CHANGING="onGridBaseCurrentChanging",a.CURRENT_CHANGED="onGridBaseCurrentChanged",a.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",a.VALIDATE_CELL="onGridBaseValidateCell",a.VALIDATE_ROW="onGridBaseValidateRow",a.VALIDATION_FAIL="onGridBaseValidationFail",a.COLUMN_HEADER_CLICKED="onGridBaseColumnHeaderClicked",a.COLUMN_HEADER_IMAGE_CLICKED="onGridBaseColumnHeaderImageClicked",a.COLUMN_HEADER_DBL_CLICKED="onGridBaseColumnHeaderDblClicked",a.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",a.FOOTER_CELL_CLICKED="onGridBaseFooterCellClicked",a.FOOTER_CELL_DBL_CLICKED="onGridBaseFooterCellDblClicked",a.HEADERSUMMARY_CELL_CLICKED="onGridBaseHeaderSummaryCellClicked",a.HEADERSUMMARY_CELL_DBL_CLICKED="onGridBaseHeaderSummaryCellDblClicked",a.CHECK_BAR_HEAD_CLICKED="onGridBaseCheckBarHeadClicked",a.CHECK_BAR_FOOT_CLICKED="onGridBaseCheckBarFootClicked",a.INDICATOR_CELL_CLICKED="onGridBaseIndicatorCellClicked",a.STATE_BAR_CELL_CLICKED="onGridBaseStateBarCellClicked",a.ROWGROUP_HEAD_CLICKED="onGridBaseRowGroupHeadClicked",a.ROWGROUP_FOOT_CLICKED="onGridBaseRowGroupFootClicked",a.ROWGROUP_BAR_CLICKED="onGridBaseRowGroupBarClicked",a.ROWGROUP_HEADER_FOOTER_CLICKED="onGridBaseRowGroupHeaderFooterClicked",a.CHECK_BAR_FOOT_DBL_CLICKED="onGridBaseCheckBarFootDblClicked",a.INDICATOR_CELL_DBL_CLICKED="onGridBaseIndicatorCellDblClicked",a.STATE_BAR_CELL_DBL_CLICKED="onGridBaseStateBarCellDblClicked",a.ROWGROUP_HEAD_DBL_CLICKED="onGridBaseRowGroupHeadDblClicked",a.ROWGROUP_FOOT_DBL_CLICKED="onGridBaseRowGroupFootDblClicked",a.ROWGROUP_BAR_DBL_CLICKED="onGridBaseRowGroupBarDblClicked",a.ROWGROUP_HEADER_FOOTER_DBL_CLICKED="onGridBaseRowGroupHeaderFooterDblClicked",a.PANEL_CLICKED="onGridBasePanelClicked",a.PANEL_DBL_CLICKED="onGridBasePanelDblClicked",a.ROWGROUP_PANEL_CLICKED="onGridBaseRowGroupPanelClicked",a.ROWGROUP_PANEL_DBL_CLICKED="onGridBaseRowGroupPanelDblClicked",a.BODY_EMPTY_CLICKED="onGridBaseBodyEmptyClicked",a.BODY_EMPTY_DBL_CLICKED="onGridBaseBodyEmptyDblClicked",a.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",a.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",a.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",a.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",a.IMAGE_BUTTON_CLICKED="onGridBaseImageButtonClicked",a.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",a.CLICKABLE_CELL_CLICKED="onGridBaseClickableCellClicked",a.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",a.TOPITEMINDEX_CHANGED="onGridBaseTopItemIndexChanged",a.DATA_CELL_CLICKED="onGridBaseDataCellClicked",a.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",a.ROWS_DELETING="onGridBaseRowsDeleting",a.ROW_INSERTING="onGridBaseRowInserting",a.ITEM_COMMIT="onGridBaseItemCommit",a.SELECTION_ADDED="onGridBaseSelectionAdded",a.SELECTION_CHANGED="onGridBaseSelectionChanged",a.SELECTION_REMOVED="onGridBaseSelectionRemoved",a.SELECTION_CLEARED="onGridBaseSelectionCleared",a.SELECTION_RESIZED="onGridBaseSelectionResized",a.SELECTION_ENDED="onGridBaseSelectionEnded",a.INSERT_STARTED="onGridBaseInsertStarted",a.UPDATE_STARTED="onGridBaseUpdateStarted",a.SHOW_EDITOR="onGridBaseShowEditor",a.HIDE_EDITOR="onGridBaseHideEditor",a.EDIT_CHANGE="onGridBaseEditChange",a.GET_EDIT_VALUE="onGridBaseGetEditValue",a.EDIT_COMMIT="onGridBaseEditCommit",a.EDIT_CANCELED="onGridBaseEditCanceled",a.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",a.ITEM_EDIT_CANCEL="onGridBaseItemEditCancel",a.EDIT_SEARCH="onGridBaseEditSearch",a.SEARCH_BUTTON_CLICK="onGridBaseSearchCellButtonClick",a.CELL_EDITED="onGridBaseCellEdited",a.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",a.EDIT_ROW_PASTED="onGridBaseEditRowPasted",a.ROWS_PASTED="onGridBaseRowsPasted",a.ITEM_CHECKED="onGridBaseItemChecked",a.ITEMS_CHECKED="onGridBaseItemsChecked",a.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",a.ERROR_CLICKED="onGridBaseErrorClicked",a.SORTING="onGridBaseSorting",a.SORTING_CHANGED="onGridBaseSortingChanged",a.FILTERING="onGridBaseFiltering",a.FILTERING_CHANGED="onGridBaseFilteringChanged",a.KEY_PRESS="onGridBaseKeyPress",a.KEY_DOWN="onGridBaseKeyDown",a.KEY_UP="onGridBaseKeyUp",a.SHOW_TOOLTIP="onGridBaseShowTooltip",a.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip",a.COLUMN_PROPERTY_CHANGED="onGridBaseColumnPropertyChanged",a.SHOW_INNER_DRAG_CURSOR="onGridBaseShowInnerDragCursor",a.INNER_DRAG_START="onGridBaseInnerDragStart",a.INNER_DRAG_OVER="onGridBaseInnerDragOver",a.INNER_DROP="onGridBaseInnerDrop",a.GRID_ACTIVATED="onGridBaseGridActivated",a.APPLY_CALLBACK="onGridBaseApplyCallback",a.RUN_CALLBACK="onApplyCallback",a.GET_HANDLER="getHandler",a.PASTE="onGridBasePaste",a.PASTED="onGridBasePasted",a.COMMAND_STACK_CHANGED="onGridBaseCommandStackChanged",a);function a(t){var e=n.call(this)||this;e._summaryMode=W.SummaryMode.AGGREGATE,e._scrollBarWidth=16,e._scrollBarHeight=16,e._filterRunning=!1,e._loading=!0,e._userMode=!1,e._userModeError=null,e._gridObjects=[],e._tableViews={},e._imageLists={},e._columnMap={},e._columnLock=0,e._columnsDirty=!1,e._columnSummaryRuntime=new H.ColumnSummaryRuntime,e._columnValidationRuntime=new $.DataCellValidationRuntime,e._rowValidationRuntime=new $.DataRowValidationRuntime,e._layouted=!1,e._resetting=!1,e._focusedIndex=new X.CellIndex,e._leftPos=0,e._horzScrolled=!1,e._topIndex=0,e._updateLock=!1,e._focusing=!1,e._dataChanged=!1,e._validations=new $.EditValidationCollection,e.$_editFocused=!1,e._buttonClicked=!1,e._syncHeadCheck=!1,e._cellUpdateEventLock=!1,e._currentRowId=-1,e._currentRow=-1,e.$_editOptionsWritable=!0,e.$_fixedRowEditable=!1,e._container=t,e._addGridObject(e._header=new u.GridHeader(e)),e._footers=new _.GridFooterCollection(e),e._addGridObject(e._headerSummaries=new Zt.HeaderSummaryCollection(e)),e._addGridObject(e._rowIndicator=new c.RowIndicator(e)),e._addGridObject(e._stateBar=new p.StateBar(e)),e._addGridObject(e._checkBar=new U.CheckBar(e)),e._addGridObject(e._body=new J.GridBody(e)),e._rootElement=new nt.LayerElement("grid root view"),e.addChild(e._rootElement),e._contentPane=new kt.DataContentPane("contentPane"),e.addElement(e._contentPane),e._rightContentPane=new kt.RightContentPane("rightContentPane"),e.addElement(e._rightContentPane),e._fixedContentPane=new kt.FixedContentPane("fixedContentPane"),e.addElement(e._fixedContentPane),e._leftContentPane=new kt.LeftContentPane("leftContentPane"),e.addElement(e._leftContentPane),e._sideContentPane=e._createSidePane(),e._sideContentPane&&e.addElement(e._sideContentPane),e._topContentPane=new kt.ContentPane("topContentPane"),e.addElement(e._topContentPane),e._bodyView=e._createBodyView(e._body),e._fixedBodyView=e._createFixedBodyView(e._body),e._rightBodyView=e._createRightBodyView(e._body),e._mergeView=new jt.ColumnMergeElement(e._bodyView),e._fixedMergeView=new jt.ColumnMergeElement(e._fixedBodyView),e._rightMergeView=new jt.ColumnMergeElement(e._rightBodyView),e._headerView=new ct.HeaderElement(e._header),e._fixedHeaderView=new ct.FixedHeaderElement(e._header),e._rightHeaderView=new ct.RightHeaderElement(e._header),e._headerSummaryView=new Jt.HeaderSummaryElement(e._headerSummaries),e._fixedHeaderSummaryView=new Jt.FixedHeaderSummaryElement(e._headerSummaries),e._rightHeaderSummaryView=new Jt.RightHeaderSummaryElement(e._headerSummaries),e._footerView=new xt.FooterElement(e.footers),e._fixedFooterView=new xt.FixedFooterElement(e.footers),e._rightFooterView=new xt.RightFooterElement(e.footers),e._rowIndicatorView=new pt.RowIndicatorElement(e._rowIndicator),e._stateBarView=new Ct.StateBarElement(e.stateBar),e._checkBarView=new wt.CheckBarElement(e.checkBar),e._headView=new Dt.GridHeadElement,e._sumView=new Qt.GridSumElement,e._footView=new Rt.GridFootElement;for(var i=[e._rowIndicatorView,e._stateBarView,e._checkBarView,e._bodyView,e._fixedBodyView,e._rightBodyView,e._headerView,e._fixedHeaderView,e._rightHeaderView,e._headerSummaryView,e._fixedHeaderSummaryView,e._rightHeaderSummaryView,e._footerView,e._fixedFooterView,e._rightFooterView,e._headView,e._sumView,e._footView],o=i.length-1;0<=o;o--){var r=i[o];e._tableViews[r.$_hash]=r}return e._contentPane.addChild(e._bodyView),e._contentPane.addChild(e._mergeView),e._contentPane.addChild(e._footerView),e._contentPane.addChild(e._headerSummaryView),e._contentPane.addChild(e._headerView),e._fixedContentPane.addChild(e._fixedBodyView),e._fixedContentPane.addChild(e._fixedMergeView),e._fixedContentPane.addChild(e._fixedFooterView),e._fixedContentPane.addChild(e._fixedHeaderSummaryView),e._fixedContentPane.addChild(e._fixedHeaderView),e._rightContentPane.addChild(e._rightBodyView),e._rightContentPane.addChild(e._rightMergeView),e._rightContentPane.addChild(e._rightFooterView),e._rightContentPane.addChild(e._rightHeaderSummaryView),e._rightContentPane.addChild(e._rightHeaderView),e._leftContentPane.addChild(e._rowIndicatorView),e._leftContentPane.addChild(e._stateBarView),e._leftContentPane.addChild(e._checkBarView),e._leftContentPane.addChild(e._footView),e._leftContentPane.addChild(e._sumView),e._leftContentPane.addChild(e._headView),e._doCreateOtherElements(),e._selectionLayer=new st.SelectionLayer(e),e.addElement(e._selectionLayer),e._feedbackLayer=new nt.LayerElement("feedbackLayer"),e.addElement(e._feedbackLayer),e._rowHoverView=new Ut.RowHoverView,e.addFeedbackElement(e._rowHoverView),e._hscrollBar=new St.ScrollBar(t,!1),e._vscrollBar=new St.ScrollBar(t,!0),e._scrollEdge=new St.ScrollEdge,e.addElement(e._hscrollBar),e.addElement(e._vscrollBar),e.addElement(e._scrollEdge),e._hscrollBar.addListener(e),e._vscrollBar.addListener(e),e._selections=new st.SelectionManager(e),e._selections.addListener(e),e._fixedOptions=new et.FixedOptions(e),e._displayOptions=new at.DisplayOptions(e),e._formatOptions=new Pt.FormatOptions(e),e._editOptions=new Nt.EditOptions(e),e._editorOptions=new Nt.EditorOptions(e),e._copyOptions=new Nt.CopyOptions(e),e._pasteOptions=new Nt.PasteOptions(e),e._sortingOptions=new Tt.SortingOptions(e),e._filteringOptions=new te.FilteringOptions(e),e._initStyles(),e._columns=new l.ColumnCollection(e),e._activeCellLayout=e._defaultCellLayout=new D.DefaultCellLayout(e),e._delegate=e._createDelegate(),e._layoutManager=e._createLayoutManager(),e._editController=e._createEditController(),e._validationManager=new $.ValidationManager(e),e._lookupProvider=new Yt.LocalLookupSourceProvider,e._lookupProvider.addListener(e),e._clipboardManager=new qt.ClipboardManager(e),e._popupMenuManager=new Xt.PopupMenuManager(e._container),e._tooltipManager=new Ht.TooltipManager(e),e._dataCellRenderers=new mt.DataCellRendererCollection(e._delegate),e._filterSelector=new ie.FilterSelector(e._container,e._filteringOptions.selector,e.dataSource),e._waitingPane=new kt.WaitingPane("waitingPane"),e.addElement(e._waitingPane),e._currentIndex=new X.CellIndex(e),e}e.GridBase=s});t(ue);ue.GridBase;var pe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),s.prototype.getItem=function(t){return this._items[t]},s.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,o=(t=t||this._items).length;i<o;i++){var r=t[i];r._parent=e._rootItem,r instanceof q.GroupItemImpl&&r._children&&this.clear(r._children)}t.splice(0,t.length)},s.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),!0},s.prototype.collapse=function(t,e){var i,o,r,n=this._rs,s=this._items;if(t._expanded=!1,n.mergeMode){for(0<=(l=t.index)?(s.splice(l,1),t._index=-1):(l=this.$_firstIndex(t,n.expandedAdornments==W.RowGroupAdornments.SUMMARY))<0&&(l=this.$_firstIndex(t));l<s.length&&(u=s[l]).isDescendantOf(t);)s.splice(l,1),u._index=-1,e&&(u instanceof q.GroupItem||u instanceof N.MergedGroupFooter)&&(h=u instanceof q.GroupItem?u:u instanceof N.MergedGroupFooter&&u.parent._expanded?u.parent:null)&&(h._expanded=!1);switch(n.collapsedAdornments){case W.RowGroupAdornments.BOTH:if(t._index=l,s.splice(l,0,t),1<(i=t.footerCount)){o=t.footer,r=l+1,s.splice(r,0,o);for(var a=1;a<i;a++)s.splice(r+a,0,t.getFooter(a))}else s.splice(l+1,0,t.footer);break;case W.RowGroupAdornments.FOOTER:case W.RowGroupAdornments.SUMMARY:if(1<(i=t.footerCount))for(o=t.footer,r=l,s.splice(r,0,o),a=1;a<i;a++)s.splice(r+a,0,t.getFooter(a));else s.splice(l,0,t.footer);break;case W.RowGroupAdornments.HEADER:default:t._index=l,s.splice(l,0,t)}}else{var l;if(0<=(l=t.index))s.splice(l,1),t._index=-1;else if(l=(o=t.footer).index,1<(i=t.footerCount))for(r=l,s.splice(r,1),o._index=-1,a=1;a<i;a++)s[r+a]._index=-1,s.splice(r+a,1);else s.splice(l,1),o._index=-1;for(;l<s.length;){var u,h;if(!(u=s[l]).isDescendantOf(t))break;s.splice(l,1),u._index=-1,e&&(u instanceof q.GroupItem||u instanceof q.GroupFooter)&&(h=u instanceof q.GroupItem?u:u instanceof q.GroupFooter&&u.parent._expanded?u.parent:null)&&(h._expanded=!1)}switch(n.collapsedAdornments){case W.RowGroupAdornments.BOTH:if(t._index=l,s.splice(l,0,t),o=t.footer,1<(i=t.footerCount))for(r=l+1,o._index=l,o._expandable=!1,s.splice(r,0,o),a=1;a<i;a++)(o=t.getFooter(a))._index=l+a,o._expandable=!1,s.splice(r+a,0,o);else o._index=l,o._expandable=!1,s.splice(l+1,0,o);break;case W.RowGroupAdornments.FOOTER:case W.RowGroupAdornments.SUMMARY:if(o=t.footer,1<(i=t.footerCount))for(r=l,o._index=l,o._expandable=!0,s.splice(r,0,o),a=1;a<i;a++)(o=t.getFooter(a))._index=l+a,o._expandable=!0,s.splice(r+a,0,o);else o._index=l,o._expandable=!0,s.splice(l,0,o);break;case W.RowGroupAdornments.HEADER:default:t._index=l,s.splice(l,0,t)}}return!0},s.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},s.prototype.getPrior=function(t){return null!=t&&t.visible&&0<t.index?this._items[t.index-1]:null},s.prototype.$_collectChildren=function(t,e,i,o,r){if(o&&t&&t._setExpanded(!0),this._rs.mergeMode){t instanceof E.RootItem||(this._rs.expandedAdornments==W.RowGroupAdornments.HEADER||this._rs.expandedAdornments==W.RowGroupAdornments.BOTH?e.push(t):(this._rs.expandedAdornments,W.RowGroupAdornments.SUMMARY));for(var n=0,s=t.count;n<s;n++){var a=void 0,l=void 0;if((c=t.getItem(n))instanceof q.GroupItem){var u=c;if(i&&(!r||u.level<=r)||u.expanded)this.$_collectChildren(u,e,i,o,r);else switch(this._rs.collapsedAdornments){case W.RowGroupAdornments.BOTH:if(e.push(u),l=u.footer,1<(a=u.footerCount)){e.push(l);for(var h=1;h<a;h++)e.push(u.getFooter(h))}else l&&e.push(l);break;case W.RowGroupAdornments.SUMMARY:case W.RowGroupAdornments.FOOTER:if(l=u.footer,1<(a=u.footerCount))for(e.push(l),h=1;h<a;h++)e.push(u.getFooter(h));else l&&e.push(l);break;case W.RowGroupAdornments.HEADER:default:e.push(u)}}else t.isFooter(c)||e.push(c)}t instanceof E.RootItem||this._rs.expandedAdornments!=W.RowGroupAdornments.FOOTER&&this._rs.expandedAdornments!=W.RowGroupAdornments.BOTH||e.push(t.footer)}else{if(!(t instanceof E.RootItem))if(this._rs.expandedAdornments==W.RowGroupAdornments.SUMMARY){if(l=t.footer,a=t.footerCount,l._expandable=!0,e.push(l),1<a)for(h=t.indexOf(l),n=1;n<a;n++)(l=t.getItem(h+n))._expandable=!0,e.push(l)}else e.push(t);for(n=0,s=t.count;n<s;n++){var c;if((c=t.getItem(n))instanceof q.GroupItem)if(u=c,a=l=void 0,i&&(!r||u.level<=r)||u.expanded)this.$_collectChildren(u,e,i,o,r);else switch(this._rs.collapsedAdornments){case W.RowGroupAdornments.HEADER:e.push(u);break;case W.RowGroupAdornments.FOOTER:case W.RowGroupAdornments.SUMMARY:if(l=t.footer,a=t.footerCount,l._expandable=!0,e.push(l),1<a){h=t.indexOf(l);for(var p=1;p<a;p++)(l=t.getItem(h+p))._expandable=!0,e.push(l)}break;case W.RowGroupAdornments.BOTH:default:if(e.push(u),l=t.footer,a=t.footerCount,l._expandable=!0,e.push(l),1<a){h=t.indexOf(l);for(var d=1;d<a;d++)(l=t.getItem(h+d))._expandable=!0,e.push(l)}}else c instanceof q.GroupFooter||e.push(c)}if(!(t instanceof E.RootItem)&&this._rs.expandedAdornments==W.RowGroupAdornments.BOTH){var _=!t._expanded&&!t.visible;if(l=t.footer,a=t.footerCount,l._expandable=_,e.push(l),1<a)for(h=t.indexOf(l),n=1;n<a;n++)(l=t.getItem(h+n))._expandable=_,e.push(l)}}},s.prototype.$_expandItem=function(t,e,i,o){var r;if(t instanceof E.RootItem)r=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case W.RowGroupAdornments.BOTH:r=t.index,this._items.splice(r,1+t.footerCount);break;case W.RowGroupAdornments.FOOTER:case W.RowGroupAdornments.SUMMARY:r=t.footer.index,this._items.splice(r,t.footerCount);break;case W.RowGroupAdornments.HEADER:default:r=t.index,this._items.splice(r,1)}i&&(t._index=-1)}else{switch(this._rs.collapsedAdornments){case W.RowGroupAdornments.BOTH:r=t.index,this._items.splice(r,1+t.footerCount);break;case W.RowGroupAdornments.FOOTER:case W.RowGroupAdornments.SUMMARY:r=t.footer.index,this._items.splice(r,t.footerCount);break;case W.RowGroupAdornments.HEADER:r=t.index,this._items.splice(r,1)}i&&(t._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(t,this._list,e,i,o);for(var n=0,s=this._list.length;n<s;n++)this._items.splice(r+n,0,this._list[n])},s.prototype.$_firstIndex=function(t,e){void 0===e&&(e=!1);var i=t.index;if(0<=i)return i;if(e){if(0<=(i=t.footer.index))return i;for(var o=0,r=t.count;o<r;o++)if((n=z.Utils.cast(t.getItem(o),q.GroupItem))&&(i=this.$_firstIndex(n,e)),0<=i)return i;return-1}for(o=0,r=t.count;o<r;o++){var n,s=t.getItem(o);if(0<=s.index)return s.index;if((n=z.Utils.cast(s,q.GroupItem))&&0<=(i=this.$_firstIndex(n)))return i}return-1},s.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},s.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},s);function s(t){var e=r.call(this)||this;return e._fixedCount=0,e._items=[],e._list=[],e._rs=t,e}var l,d=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},a=(l=E.ProxyItemProvider,i(u,l),u.prototype._doDispose=function(){this._visibleItems.dispose(),this._visibleItems=null,l.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"treeMode",{get:function(){return this._treeMode},set:function(t){this._treeMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"footerCounter",{get:function(){return this._fooerCounter},set:function(t){t!=this._fooerCounter&&(this._fooerCounter=t,this._populateItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),u.prototype.resetAdornments=function(t,e){t==this._expandedAdornments&&e==this._collapsedAdornments||(this._expandedAdornments=t,this._collapsedAdornments=e,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(u.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!=this._createFooterCallback&&(this._createFooterCallback=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&((this._mergeMode=t)||this._clearDisplayLevels(),this._populateItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"grouped",{get:function(){return this._grouped},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)},enumerable:!0,configurable:!0}),u.prototype.canGrouping=function(t){return this.fireGrouping(t)},u.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},u.prototype.groupByMode=function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},u.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},u.prototype.getGroupLevel=function(t){if(this._groupFields&&0<=t)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},Object.defineProperty(u.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!0,configurable:!0}),u.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&(this.fireExpand(t),t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},u.prototype.$_collapseChild=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n instanceof q.GroupItemImpl&&(n._expanded=!1,this.$_collapseChild(n,e,i))}},u.prototype.collapse=function(t,e,i){if(t&&t.expanded){if(this.fireCollapse(t),this._visibleItems.collapse(t,e)){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},u.prototype.findItem=function(t,e,i,o,r){var n=this.dataSource;if(!n)return-1;var s=this.itemCount;if(s<1)return-1;var a=Math.min(t.length,e.length);if(a<1)return-1;var l=!i||i.allFields,u=i&&i.caseSensitive,h=i&&i.partialMatch,c=null,p=[];o=Math.max(0,o),r=Math.min(s-1,r);for(var d=0;d<a;d++)p[d]=n.getField(t[d]).dataType;for(var _=o;_<=r;_++){var f=this.$_getItem(_),y=0<=f.dataRow;if(y)for(d=0;d<a;d++){var m=f.getData(t[d]);switch(p[d]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e[d]instanceof Date)y=C(e[d],m,u,h);else{if(!c){var g=/[.]/.test(e[d])?"yyyy.MM.dd":/[/]/.test(e[d])?"yyyy/MM/dd":/[-]/.test(e[d])?"yyyy-MM-dd":"yyyyMMdd";c=new Lt.DateTimeConverter(g)}y=C(e[d],m?c.getText(m):m,u,h)}break;default:y=C(e[d],m,u,h)}if(y&&!l)return _;if(!y&&l)break}if(y)return _}return-1},u.prototype.findCell=function(t,e,i,o,r,n){var s=this.dataSource;if(!s)return null;var a=this.itemCount;if(a<1)return null;for(var l=i&&i.caseSensitive,u=i&&i.partialMatch,h=this.dataSource.fieldCount,c=t.length,p=null,d=[],_=0;_<h;_++)d[_]=s.getField(_).dataType;o=Math.max(0,o),r=Math.min(a-1,r),(n=Math.max(0,n))>=t.length&&(o++,n=0);for(var f=o;f<=r;f++){var y=this.$_getItem(f);if(0<=y.dataRow)for(_=o<f?0:n;_<c;_++){var m=t[_];if(0<=m&&m<h){var g=y.getData(m),b=!1;switch(d[m]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e instanceof Date)b=C(e,g,l,u);else{if(!p){var v=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";p=new Lt.DateTimeConverter(v)}b=C(e,g?p.getText(g):g,l,u)}break;default:b=C(e,g,l,u)}if(b)return{itemIndex:f,fieldIndex:m,searchFieldIndex:_}}}}return null},Object.defineProperty(u.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!0,configurable:!0}),u.prototype.getItem=function(t){return this.grouped?0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t)},u.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],r=Math.min(i.count,t+e-1),n=t;n<r;n++){var s=i.getItem(n);o.push(s)}return o}return this.source.getItems(t,e)},u.prototype.getAllItems=function(){if(this.grouped){var t=new n(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},u.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t)},u.prototype.getItemOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++){var r=e.getItem(i);if(r.dataRow==t)return r}return null}return this.source.getItemOfRow(t)},u.prototype._initialize=function(){l.prototype._initialize.call(this),this._visibleItems=new n(this)},u.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},u.prototype._populateItems=function(){this.$_populateItems(!1)},u.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):l.prototype._resetItemIndicies.call(this,t)},u.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):l.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},u.prototype.checkAll=function(t,e,i,o,r){if(this._editItem&&(i?this._editItem.checkable&&this._editItem._setChecked(t):this._editItem._setChecked(t)),e||!this.grouped)l.prototype.checkAll.call(this,t,e,i,o,r);else{var n=this._visibleItems.fixedCount;if(0<n)if(i)for(var s=n;s--;){var a=this.getItem(s);a.checkable&&a._setChecked(t)}else for(s=n;s--;)this.getItem(s)._setChecked(t);this.$_checkChildren(this.rootItem,t,i,r),this._fireItemCheckChanged(null,t),o?this._fireItemAllChecked(t):this._fireRefreshClient()}},u.prototype.$_saveExpand=function(t,e){for(var i=0,o=t.count;i<o;i++)t.getItem(i)instanceof q.GroupItemImpl||N.MergedGroupHeader},u.prototype.$_restoreExpand=function(t,e){for(var i=0,o=t.count;i<o;i++)t.getItem(i)instanceof q.GroupItemImpl||N.MergedGroupHeader},u.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&0<i&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var r=this.dataSource.fieldCount,n=this._groupFields.length-1;0<=n;n--)this._groupFields[n]>=r&&this._groupFields.splice(n,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;this._grouped&&0<i&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},u.prototype.$_checkChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(i?(o||s instanceof q.DataItem)&&s.checkable&&s._setChecked(e):s._setChecked(e)),s instanceof q.GroupItem&&this.$_checkChildren(s,e,i,o)}},u.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},u.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},u.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new d(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},u.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o=z.Utils.cast(t.getItem(e),q.GroupItem);if(o){var r=z.Utils.cast(o.firstItem,q.GridRow);r&&r._displayLevel<0&&(r._displayLevel=o.level),this.$_resetDisplayLevels(o)}}},u.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,r=t.endIndex;if(!(r<o)){var n=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new d(o,o);l.level=n,t.children.push(l);for(var u=e.getItem(o).getData(s),h=o+1;h<=r;h++){var c=e.getItem(h).getData(s);a.equalValues(c,u)||(l&&(l.endIndex=h-1),(l=new d(h,h)).level=n,t.children.push(l)),u=c}l&&(l.endIndex=r),h=0;for(var p=t.children.length;h<p;h++)this.$_buildGroups(t.children[h],e,i)}}},u.prototype.$_buildItems=function(t,e,i){var o=this.mergeMode,r=e.children.length;if(0<r)for(var n=e.level,s=i[e.level],a=0;a<r;a++){var l=o?new N.MergedGroupHeader(n,s):new q.GroupItemImpl(s);l._setExpanded(this.expandWhenGrouping),t.add(l),this.$_buildItems(l,e.children[a],i)}else{var u=e.endIndex-e.startIndex+1,h=this.source.getItems(e.startIndex,u);t.addAll(h),this._incDescendents(t,u)}if(0<t.level)if(this._fooerCounter){a=0;for(var c=this._fooerCounter.getGroupFooterCount(t);a<c;a++)(p=o?new N.MergedGroupFooter:new q.GroupFooter).$_footerIndex=a,t.add(p)}else{var p=o?new N.MergedGroupFooter:new q.GroupFooter;t.add(p)}},u.prototype.$_setEditItem=function(t){this._editItem=t},u.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},u.prototype.fireGrouping=function(t){return this.fireConfirmEvent(u.GROUPING,t)},u.prototype.fireGrouped=function(t){this.fireEvent(u.GROUPED)},u.prototype.fireExpand=function(t){this.fireEvent(u.EXPAND,t)},u.prototype.fireExpanded=function(t){this.fireEvent(u.EXPANDED,t)},u.prototype.fireCollapse=function(t){this.fireEvent(u.COLLAPSE,t)},u.prototype.fireCollapsed=function(t){this.fireEvent(u.COLLAPSED,t)},u.prototype.onItemProviderRefresh=function(t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),l.prototype.onItemProviderRefresh.call(this,t))},u.prototype.onItemProviderItemInserted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),l.prototype.onItemProviderItemInserted.call(this,t,e))},u.prototype.onItemProviderItemDeleted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),l.prototype.onItemProviderItemDeleted.call(this,t,e))},u.prototype.onItemProviderItemUpdated=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),l.prototype.onItemProviderItemUpdated.call(this,t,e))},u.GROUPING="onGroupedItemProviderGrouping",u.GROUPED="onGroupedItemProviderGrouped",u.EXPAND="onGroupedItemProviderExpand",u.EXPANDED="onGroupedItemProviderExpanded",u.COLLAPSE="onGroupedItemProviderCollapse",u.COLLAPSED="onGroupedItemProviderCollapsed",u);function u(t,e){var i=l.call(this,t,e)||this;return i._treeMode=!1,i._expandedAdornments=W.RowGroupAdornments.BOTH,i._collapsedAdornments=W.RowGroupAdornments.HEADER,i._expandWhenGrouping=!1,i._mergeMode=!1,i._summaryMode=W.SummaryMode.AGGREGATE,i._groupSorting=!0,i._sortDirection=W.SortDirection.ASCENDING,i._summarizing=!1,i._grouped=!1,i}e.GroupedItemProvider=a;var C=function(t,e,i,o){if(t===e)return!0;var r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),o?0<=n.indexOf(r):r==n)}});t(pe);pe.GroupedItemProvider;var de=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=V.EditableItemProviderImpl,i(s,n),s.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,n.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mergeMode",{get:function(){return this._groupedProvider.mergeMode},set:function(t){this._groupedProvider.mergeMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),s.prototype.canGrouping=function(t){return this._groupedProvider.canGrouping(t)},s.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},s.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},s.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},s.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},s.prototype.clearFilters=function(t){this._rs.clearFilters(t)},s.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},s.prototype.beginFiltering=function(){this._rs.beginFilter()},s.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},s.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},s.prototype.orderBy=function(t,e,i){if(this._groupedProvider.grouped&&this._groupSorting){for(var o=e?e.length:0,r=i?i.length:0,n=this._groupedProvider.groupedFields,s=this._rs.getSortDirections(),a=this._rs.getSortCases(),l=[],u=0,h=n.length;u<h;u++)l.push(n[u]);for(u=0,h=t.length;u<h;u++){var c=t[u],p=l.indexOf(c),d=void 0,_=void 0;d=u<o?e[u]:0<o?e[o-1]:W.SortDirection.ASCENDING,_=u<r?i[u]:0<r?i[r-1]:W.SortCase.SENSITIVE,p<0?(l.push(c),s[l.length-1]=d,a[l.length-1]=_):(s[p]=d,a[p]=_)}n=l,this._rs.orderBy(n,s,a)}else this._rs.orderBy(t,e,i)},s.prototype.getSortFields=function(){return this._rs.getSortFields()},s.prototype.getSortDirections=function(){return this._rs.getSortDirections()},s.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(s.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},enumerable:!0,configurable:!0}),s.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},s.prototype.groupBy=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=W.SortDirection.ASCENDING),void 0===o&&(o=W.SortCase.SENSITIVE),(t&&!(t.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=i,e&&this._rs.orderBy(t,[i],[o],!1),this._groupedProvider.groupBy(t))},s.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},s.prototype.addGroupBy=function(t,e){var i;if(this._groupedProvider.groupCount<1?i=[e]:(i=this._groupedProvider.groupedFields).splice(t,0,e),this._groupedProvider.canGrouping(i)){if(this._groupSorting){var o=[this._groupSortDirection];this._rs.orderBy(i,o,null,!1)}this._groupedProvider.groupBy(i)}},s.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,r=0,n=i.length-1;0<=n;n--)if(r++,i[n]==t){o=n;break}if(0<=o){if(i.splice(o,e?r:1),!this._groupedProvider.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(i)}else{if(!this._groupedProvider.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},s.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},s.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},Object.defineProperty(s.prototype,"isGroupSorting",{set:function(t){this._groupSorting=t,this._groupedProvider._groupSorting=t},enumerable:!0,configurable:!0}),s.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},s.prototype.collapse=function(t,e,i){this._groupedProvider.collapse(t,e,i)},s.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},Object.defineProperty(s.prototype,"page",{get:function(){return this._rs.page},enumerable:!0,configurable:!0}),s.prototype.setPage=function(t,e){this._rs.setPage(t,e)},Object.defineProperty(s.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t},enumerable:!0,configurable:!0}),s.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},s.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},Object.defineProperty(s.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),s.prototype.resetCheckables=function(){this._rs.resetCheckables()},s.prototype.applyCheckables=function(){this._rs.applyCheckables()},s.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},s.prototype.findItem=function(t,e,i,o,r){return this._groupedProvider.findItem(t,e,i,o,r)},s.prototype.findCell=function(t,e,i,o,r,n){return this._groupedProvider.findCell(t,e,i,o,r,n)},s.prototype.checkItems=function(t,e,i){this._groupedProvider.checkItems(t,e,i)},s.prototype.checkItem=function(t,e,i,o){this._groupedProvider.checkItem(t,e,i,o)},s.prototype.checkAll=function(t,e,i,o,r){this._groupedProvider.checkAll(t,e,i,o,r)},s.prototype.hasCellStyle=function(){return this._rs.hasCellStyle()},s.prototype.setCellStyle=function(t,e,i){this._rs.setCellStyle(t,e,i)},s.prototype.setCellStyles=function(t,e,i){this._rs.setCellStyles(t,e,i)},s.prototype.clearCellStyles=function(){this._rs.clearCellStyles()},s.prototype.removeCellStyle=function(t){this._rs.removeCellStyle(t)},s.prototype.getCellStyle=function(t,e){return this._rs.getCellStyle(t,e)},s.prototype.checkCellStyle=function(t,e){return this._rs.checkCellStyle(t,e)},s.prototype.setCellEditable=function(t,e,i){this._rs.setCellEditable(t,e,i)},s.prototype.setCellReadOnly=function(t,e,i){this._rs.setCellReadOnly(t,e,i)},s.prototype.getCellEditable=function(t,e){return this._rs.getCellEditable(t,e)},s.prototype.getCellReadOnly=function(t,e){return this._rs.getCellReadOnly(t,e)},s.prototype.setCellCursor=function(t,e,i){this._rs.setCellCursor(t,e,i)},s.prototype.getCellCursor=function(t,e){return this._rs.getCellCursor(t,e)},s.prototype.setCellEditor=function(t,e,i){this._rs.setCellEditor(t,e,i)},s.prototype.getCellEditor=function(t,e){return this._rs.getCellEditor(t,e)},s.prototype.clearEditableMap=function(){return this._rs.clearEditableMap()},s.prototype.getItemOfRow=function(t,e){return void 0===e&&(e=!1),this._rs.getItemOfRow(t,e)},s.prototype._doBeginUpdate=function(t){var e=n.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(e),e},s.prototype._doBeginAppendDummy=function(){var t=n.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},s.prototype._doBeginAppend=function(t){var e=n.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(e),e},s.prototype._doBeginInsert=function(t,e,i,o){var r=n.prototype._doBeginInsert.call(this,t,e,i,o);return this._groupedProvider.$_setEditItem(r),r},s.prototype._doCancelDummyEdit=function(){n.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},s.prototype._doCancelEdit=function(t,e){n.prototype._doCancelEdit.call(this,t,e),this._groupedProvider.$_setEditItem(null)},s.prototype._doCommitEdit=function(t,e){return!!n.prototype._doCommitEdit.call(this,t,e)&&(this._groupedProvider.$_setEditItem(null),!0)},s.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(pe.GroupedItemProvider.GROUPING,e)},s.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(pe.GroupedItemProvider.GROUPED)},s.prototype.onGroupedItemProviderExpand=function(t,e){this.fireEvent(pe.GroupedItemProvider.EXPAND,e)},s.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(pe.GroupedItemProvider.EXPANDED,e)},s.prototype.onGroupedItemProviderCollapse=function(t,e){this.fireEvent(pe.GroupedItemProvider.COLLAPSE,e)},s.prototype.onGroupedItemProviderCollapsed=function(t,e){this.fireEvent(pe.GroupedItemProvider.COLLAPSED,e)},s.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},s.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},s.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},s.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},s.prototype.onItemProviderFiltered=function(t){},s.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},s.prototype.onItemProviderSorted=function(t){this._fireSorted()},s);function s(t,e){void 0===e&&(e=null);var i=n.call(this,null,t)||this;return i._groupSorting=!0,i._groupSortDirection=W.SortDirection.ASCENDING,i._groupSortCase=W.SortCase.SENSITIVE,i._rs=new ne.DefaultItemProvider(!1),i._rs.addListener(i),i._groupedProvider=new pe.GroupedItemProvider(i._rs,!1),i._groupedProvider.footerCounter=e,i.source=i._groupedProvider,i._summarizer=new ae.DefaultSummarizer(i._rs),i}e.GridItemProvider=r});t(de);de.GridItemProvider;var _e=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=nt.VisualElement,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())},enumerable:!0,configurable:!0}),s.prototype._getCssSelector=function(){return""},s.prototype._doDraw=function(t){},s.prototype._hoverChanged=function(){this.invalidate()},s.prototype._changed=function(){this.invalidate()},s);function s(t,e){void 0===e&&(e=null);var i=r.call(this,e)||this;return i._clickable=!1,i._owner=t,i}e.HandleElement=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"cellView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),u);function u(t,e){return void 0===e&&(e=null),a.call(this,t,e)||this}e.CellHandle=l});t(_e);_e.HandleElement,_e.CellHandle;var fe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=dt.SelectableCellElement,i(s,r),s.prototype._doUpdateContent=function(t,e,i){i.textContent=""},s.prototype._doRender=function(t){},s);function s(){return r.call(this,"rowGroupHeadCellView")||this}var a,l=(a=ht.SimpleTableElement,i(u,a),u.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},u.prototype.prepare=function(t,e){for(this._levels=t,this._count=e?2*t:t;this._cells.length<this._count;){var i=new n;this._cells.push(i)}},u.prototype._getCssSelector=function(){return"rg-rowgroup-head"},u.prototype._getTableRowHeight=function(t,e){return 1==e?t.summaryBounds.height:t.headBounds.height},u.prototype._doPrepareTableExtents=function(t){if(0<this._count)for(var e=this.width/this._levels,i=0;i<this._count;i++)this._cells[i].width=e},u.prototype._prepareCellContent=function(t){return document.createElement("div")},u.prototype._doLayoutContent=function(t){for(var e=this._count;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},u.prototype._doRender=function(t){},u.prototype._getTableRowCount=function(t){return 2},u.prototype._getCellCount=function(t){return this._count},u.prototype._getCellWidth=function(t,e){return this._cells[e].width},u);function u(){var t=a.call(this,null,"rowGroupHeadView")||this;return t._cells=[],t._levels=0,t._count=0,t}e.RowGroupHeadElement=l;var h,c=(h=dt.SelectableCellElement,i(p,h),p.prototype._doUpdateContent=function(t,e,i){i.textContent=""},p.prototype._doRender=function(t){},p);function p(){return h.call(this,"rowGroupFootCellView")||this}var d,_=(d=ht.SimpleTableElement,i(f,d),f.prototype._doDispose=function(){this._cells=null,d.prototype._doDispose.call(this)},f.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=new c;this._cells.push(e)}},f.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},f.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},f.prototype._doPrepareTableExtents=function(t){if(0<this._levels)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},f.prototype._prepareCellContent=function(t){return document.createElement("div")},f.prototype._doLayoutContent=function(t){t.grid;for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},f.prototype._doRender=function(t){},f.prototype._getTableRowCount=function(t){return 1},f.prototype._getCellCount=function(t){return this._levels},f.prototype._getCellWidth=function(t,e){return this._cells[e].width},f);function f(){var t=d.call(this,null,"rowGroupFootView")||this;return t._cells=[],t._levels=0,t}e.RowGroupFootElement=_;var y,m=(y=_e.CellHandle,i(g,y),Object.defineProperty(g.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),g.prototype._createDom=function(){return document.createElement("img")},g.prototype._initDom=function(t){y.prototype._initDom.call(this,t),t.style.position=""},g.prototype._getCssSelector=function(){return""},g.prototype._getCssDisplay=function(){return""},g.prototype._doDraw=function(t){t.src=this._expanded?"images/expanded.png":"images/collapsed.png"},g);function g(t){var e=y.call(this,t,"rowGroupExpandHandle")||this;return e._expanded=!1,e.clickable=!0,e}e.RowGroupExpandHandle=m;var b,v=(b=dt.CellElement,i(C,b),Object.defineProperty(C.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),C.prototype.updateCell=function(t,e,i){b.prototype.updateCell.call(this,t,e,i);var o=e.item;o instanceof q.GroupItemImpl&&o.level==this.bar.l?(i.appendChild(this._expander._dom),this._expander.setBounds(1,1,13,13),this._expander.expanded=o.expanded,this._expander.visible=!0):this._expander.visible=!1,i.style.paddingTop="2px"},C.prototype.validate=function(){b.prototype.validate.call(this);var t=this._expander._dom;t&&t.parentElement&&t.parentElement.removeChild(t)},C);function C(){var t=b.call(this,"rowGroupBarCell")||this;return t._level=0,t._expander=new m(t),t.addChild(t._expander),t}var w,E=(w=ht.DataTableElement,i(x,w),x.prototype._doDispose=function(){this._cells=null,w.prototype._doDispose.call(this)},x.prototype.prepare=function(t,e){this._levels=e},x.prototype.getLevelIndent=function(t){return t*this.width/this._levels},x.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},x.prototype._prepareCellContent=function(t){return document.createElement("div")},x.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,r=this.width/this._levels,n=this._bars,s=n.length,a=t.topIndex,l=t.fixedItemCount,u=0<l;this.childCount<s;)e=0<this._cells.length?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var h=0;h<s;h++){var c=n[h];e=this.getChild(h);var p=c.tr1,d=u?p<l?p:p-1+a:p+a,_=X.CellIndex.temp(i,d),f=o.getBarCell(_),y=t.getItemBounds(c.r);e.bar=c,e.level=c.c+1,e.updateCell(i,f,this.getCellContent(p,c.c)),y.x=r*c.c,y.width=r,e.setRect(y)}},x.prototype._doRender=function(t){},x.prototype._doPrepareTableRows=function(t,e){w.prototype._doPrepareTableRows.call(this,t,e),this.$_layoutBars(t,e)},x.prototype._getCellCount=function(t){return this._levels},x.prototype._getCellWidth=function(t,e){return this.width/this._levels},x.prototype._createCell=function(){return new v},x.prototype.$_calcLevels=function(t,e,i,o){for(var r=new Array,n=i;n<o;n++)r.push(t[n].level);var s=-1,a=0;for(n=0;n<r.length;n++){var l=r[n];l<e?(r[n]=1,0<=s&&(r[s]=a,s=-1,a=0)):l==e?(0<=s&&(r[s]=a),s=n,a=1):(s<0?s=n:r[n]=-1,a++)}return 0<=s&&(r[s]=a),r},x.prototype.$_layoutBars=function(t,e){t.grid;var i=t.$_getItems(),o=i.length,r=t.fixedItemCount,n=(t.topIndex,e.children),s=this._bars=[];if(!(o<1)){for(var a=0,l=this._getCellCount(t);a<l;a++){var u=a+1,h=0,c=0;if(0<r){for(var p=void 0;h<r;h++)(p=n[c++].children[a]).style.display="",p.removeAttribute("rowspan");(p=n[c++].children[a]).style.display="",p.removeAttribute("rowspan")}if(h<o)for(var d=this.$_calcLevels(i,u,h,o),_=0;h<o;h++,_++,c++){var f=d[_],y=(p=n[c].children[a],i[h]);0<f?(1<f||y instanceof q.GroupItemImpl&&y.level==u?(s.push({r:h,tr1:c,tr2:c+f-1,c:a,l:u}),p.rowSpan=f):p.removeAttribute("rowspan"),p.style.display=""):(p.removeAttribute("rowspan"),p.style.display="none")}}s.sort(function(t,e){return t.r-e.r})}},x);function x(){var t=w.call(this,null,"rowGroupBarContainer")||this;return t._cells=[],t._levels=0,t._bars=[],t}e.RowGroupBarContainer=E;var I,O=(I=kt.DataContentPane,i(S,I),S.prototype._doDispose=function(){I.prototype._doDispose.call(this)},Object.defineProperty(S.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!0,configurable:!0}),S.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},S.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o,t.headerSummaries.visible),this._footView.prepare(o),this._barContainer.prepare(t,o),new lt.Size(this.levelCount*t.rowGroup.levelIndent,i)},S.prototype._doLayoutContent=function(t){t.grid;var e=t.headBounds,i=t.summaryBounds;(this._headView.visible=!e.isEmpty||!i.isEmpty)&&(this._headView.setBounds(0,e.y,this.width,e.height+i.height),this._headView.layoutContent(t)),e=t.footBounds,(this._footView.visible=!e.isEmpty)&&(this._footView.setBounds(0,e.y,this.width,e.height),this._footView.layoutContent(t)),e=t.indicatorBounds,this._barContainer.setBounds(0,e.y,this.width,e.height),this._barContainer.layoutContent(t)},S);function S(){var t=I.call(this,"rowGroupBarPane")||this;return t._barContainer=new E,t.addChild(t._barContainer),t._footView=new _,t.addChild(t._footView),t._headView=new l,t.addChild(t._headView),t}e.RowGroupBarPane=O;var D,R=(D=kt.DataContentPane,i(P,D),P.prototype._doDispose=function(){D.prototype._doDispose.call(this)},P);function P(){return D.call(this,"rowGroupPane")||this}e.RowGroupPane=R;var T,k=(T=dt.CellElement,i(L,T),L.prototype._doDispose=function(){T.prototype._doDispose.call(this)},Object.defineProperty(L.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),L.prototype._createDom=function(){return document.createElement("div")},L.prototype._initDom=function(t){T.prototype._initDom.call(this,t);var e=t.style;e.top="50%",e.left="0px",e.msTransform=e.transform="translate(0px, -50%)",e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},L.prototype._beforeDraw=function(t){},L.prototype._doUpdateContent=function(t,e,i){this._dom.textContent=e.text},L);function L(){return T.call(this,"rowGroupHeaderCellView")||this}e.RowGroupHeaderCellElement=k;var M,A=(M=ut.GridElement,i(V,M),V.prototype._doDispose=function(){this._item=null,this._cellView=null,M.prototype._doDispose.call(this)},Object.defineProperty(V.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!0,configurable:!0}),V.prototype._getCssSelector=function(){return"rg-rowgroup-header"},V.prototype._doDraw=function(t){},V.prototype._doLayoutContent=function(t){var e=t.grid;this._cellView.updateCell(e,e.rowGroup.getHeaderCell(this._item),null),this._cellView.setBounds(0,0,this.width,this.height)},V);function V(){var t=M.call(this,"rowGroupHeaderView")||this;return t._visIndex=-1,t._cellView=new k,t.addChild(t._cellView),t}e.RowGroupHeaderElement=A;var N,j=(N=gt.ItemElement,i(B,N),B.prototype._doLayoutContent_save=function(t){t.grid.rowGroup,this._getTableRow(t,this._domIndex).className="rg-rowgroup-footer"},B.prototype._doLayoutContent=function(t){for(var e=t.grid,i=e.rowGroup,o=t.cellLayouts._footerCells,r=this._getStartCell(t),n=this._getEndCell(t),s=0;s<o.length;s++){var a=o[s],l=this._getTableRow(t,this._domIndex+s),u=this._getBodyCells(this._domIndex+s);l.className="rg-rowgroup-footer";for(var h=r;h<=n;h++){var c=a[h],p=u[h-r];if(l.children[h-r],c.isProxy);else{var d=X.CellIndex.temp(e,this._item.index,c),_=i.getFooterCell(d);p.setClassName("rg-rowgroup-footer-cell"),this._updateCell(e,_,p)}}}},B.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},B.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},B.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},B.prototype._getStartCell=function(t){return t.firstCell},B.prototype._getEndCell=function(t){return t.lastCell},B.prototype._getBodyView=function(){return this.parent._bodyView},B.prototype._updateCell=function(t,e,i){i.setText(i.cell.lastElementChild,e.text)},B);function B(){return N.call(this,"rowGroupFooterView")||this}e.RowGroupFooterElement=j;var F,$=(i(G,F=j),G.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},G.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},G.prototype._getBodyView=function(){return this.parent._fixedView},G.prototype._getStartCell=function(t){return 0},G.prototype._getEndCell=function(t){return t.fixedLayoutCount-1},G);function G(){return null!==F&&F.apply(this,arguments)||this}e.RowGroupFixedFooterElement=$;var H,U=(i(W,H=j),W.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},W.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},W.prototype._getBodyView=function(){return this.parent._rightView},W.prototype._getStartCell=function(t){return t.layoutCount-t.rightLayoutCount},W.prototype._getEndCell=function(t){return t.layoutCount-1},W);function W(){return null!==H&&H.apply(this,arguments)||this}e.RowGroupRightFooterElement=U;var K,z=(K=nt.LayerElement,i(Y,K),Y.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,K.prototype._doDispose.call(this)},Object.defineProperty(Y.prototype,"grid",{get:function(){return this.getAncestor(ge.GridView)},enumerable:!0,configurable:!0}),Y.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},Y.prototype._initDom=function(t){K.prototype._initDom.call(this,t);var e=t.style;e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},Y.prototype._doDraw=function(t){},Y.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},Y.prototype.$_prepareIndents=function(t){for(var e=this._indents,i=t.rowGroupLevels+1,o=0;o<e.length;o++)e[o]=t.getLevelIndent(o);for(;e.length<i;)e.push(t.getLevelIndent(e.length));return e},Y.prototype._doLayoutContent=function(t){for(var e=this.$_prepareIndents(t),i=t.$_getItems(),o=i.length,r=t.fixedItemCount,n=0<r,s=this.width,a=0,l=0,u=this._bodyView._trs,h=r,c=n?h*u+1:h*u;h<o;h++){var p=i[h];if(p instanceof q.GroupItemImpl){var d=this._headerViews[a++],_=t.getItemBounds(h),f=e[p.level];d.item=p,d._visIndex=h-r,d.setBounds(f,_.y,s-f,_.height),d.layoutContent(t),c++}else if(p instanceof q.GroupFooter){if(this._fixedView){var y=this._fixedFooterViews[l];y.updateItem(p,c),y.layoutContent(t)}if(this._rightView){var m=this._rightFooterViews[l];m.updateItem(p,c),m.layoutContent(t)}(d=this._footerViews[l++]).updateItem(p,c),d.layoutContent(t),c+=u}else c+=u}},Y.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,r=e.length;o<r;o++)e[o]instanceof q.GroupItemImpl&&i++;for(;this._headerViews.length<i;)n=(n=this._headerPool.pop())||new A,this.addChild(n),this._headerViews.push(n);for(;this._headerViews.length>i;){var n=this._headerViews.pop();this.removeChild(n),this._headerPool.push(n)}},Y.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},Y.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,r=t.length;o<r;o++)t[o]instanceof q.GroupFooter&&i++;for(;this._footerViews.length<i;)n=(n=this._footerPool.pop())||new j,this.addChild(n),this._footerViews.push(n);for(;this._footerViews.length>i;){var n=this._footerViews.pop();this.removeChild(n),this._footerPool.push(n)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)n=(n=this._fixedFooterPool.pop())||new $,this.addChild(n),this._fixedFooterViews.push(n);for(;this._fixedFooterViews.length>i;)n=this._fixedFooterViews.pop(),this.removeChild(n),this._fixedFooterPool.push(n)}if(this._rightView){for(;this._rightFooterViews.length<i;)n=(n=this._rightFooterPool.pop())||new U,this.addChild(n),this._rightFooterViews.push(n);for(;this._rightFooterViews.length>i;)n=this._rightFooterViews.pop(),this.removeChild(n),this._rightFooterPool.push(n)}},Y.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},Y.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},Y.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},Y.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},Y.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},Y.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},Y.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},Y);function Y(t){var e=K.call(this,t||"rowGroupLayer")||this;return e._headerPool=[],e._headerViews=[],e._footerPool=[],e._footerViews=[],e._fixedFooterPool=[],e._fixedFooterViews=[],e._rightFooterPool=[],e._rightFooterViews=[],e._indents=[],e}e.RowGroupElement=z});t(fe);fe.RowGroupHeadElement,fe.RowGroupFootElement,fe.RowGroupExpandHandle,fe.RowGroupBarContainer,fe.RowGroupBarPane,fe.RowGroupPane,fe.RowGroupHeaderCellElement,fe.RowGroupHeaderElement,fe.RowGroupFooterElement,fe.RowGroupFixedFooterElement,fe.RowGroupRightFooterElement,fe.RowGroupElement;var ye=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"linear",{get:function(){return this._linear},set:function(t){t!=this._linear&&(this._linear=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t},enumerable:!0,configurable:!0}),s.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},s);function s(t){var e=r.call(this,t)||this;return e._enabled=!1,e._prompt="컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",e._linear=!1,e._expandWhenGrouping=!0,e._summarizing=!0,e._commitBeforeGrouping=!0,e._commitBeforeExpand=!0,e._commitBeforeCollapse=!0,e._fixMergedColumns=!0,e}e.GroupingOptions=n});t(ye);ye.GroupingOptions;var me=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=(r=ut.GridElement,i(n,r),n.prototype._doDispose=function(){z.Utils.detach(this._textView),z.Utils.detach(this._closeView),this._textView=this._closeView=null,r.prototype._doDispose.call(this)},Object.defineProperty(n.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),n.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView.textContent=this._text=t.displayText},n.prototype.isCloseButton=function(t){return t===this._closeView},n.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},n.prototype._initDom=function(t){r.prototype._initDom.call(this,t),this._textView=document.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._closeView=document.createElement("span"),this._closeView.className="rg-group-panel-item-close",t.appendChild(this._closeView)},n.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,r=this._textHeight=this._textView.offsetHeight;return r=Math.max(r,this._closeHeight=this._closeView.offsetHeight),r+=2*this._padVert,new lt.Size(o,r)},n.prototype._doLayoutContent=function(t){},n.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},n);function n(){var t=r.call(this)||this;return t._field=-1,t._text="",t._textWidth=0,t._textHeight=0,t._closeHeight=0,t._padHorz=5,t._padVert=4,t._itemGap=8,t}e.GroupPanelItemView=s;var a,l=(a=ut.VisualObjectElement,i(u,a),u.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach(function(t,e){t.dispose()}),this._itemViews=null,z.Utils.detach(this._messageView),this._messageView=null,a.prototype._doDispose.call(this)},u.prototype._getCssSelector=function(){return"rg-group-panel"},u.prototype._initDom=function(t){a.prototype._initDom.call(this,t),t.style.overflow="hidden";var e=this._messageView=document.createElement("span");e.className="rg-group-panel-message",t.appendChild(e)},u.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions;this._count=t.rowGroupLevels;var r=0,n=this._messageView.style;if(0<this._count?n.display="none":(n.display="",n.left=this._padHorz+"px",n.top=this._padVert+"px",this._messageView.textContent=o.prompt,r=this._messageView.offsetHeight),this.$_prepareItemViews(t,this._count),0<this._count){for(var s=0;s<this._count;s++){var a=(l=this._itemViews[s]).measure(t,e,i);l.width=a.width,r=Math.max(r,a.height)}for(s=0;s<this._count;s++){var l;(l=this._itemViews[s]).height=r}}return new lt.Size(e,r+2*this._padVert)},u.prototype._doPrepareContent=function(t){},u.prototype._doLayoutContent=function(t){if(0<this._count)for(var e=this._padHorz,i=this._padVert,o=0;o<this._count;o++){var r=this._itemViews[o];r.x=e,r.y=i,e+=this._itemGap+r.width}},u.prototype._doDraw=function(t){},u.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,r=i.length;r<e;r++)i.push(new s);for(r=0;r<e;r++){var n=i[r];n.setColumn(t.columnByField(o[r])),n.visible=!0,this.addChild(n)}for(r=e;r<i.length;r++)this.removeChild(i[r])},u);function u(t){var e=a.call(this,t)||this;return e._itemViews=[],e._count=0,e._padHorz=16,e._padVert=10,e._itemGap=20,e}e.GroupPanelElement=l});t(me);me.GroupPanelItemView,me.GroupPanelElement;var ge=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ue.GridBase,i(s,r),s.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),r.prototype._doDispose.call(this)},s.prototype._doCreateOtherElements=function(){this._groupView=new fe.RowGroupElement,this.addElement(this._groupView)},Object.defineProperty(s.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupView",{get:function(){return this._groupView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"paged",{get:function(){return 0<=this._rs.page},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pageSorting",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!0,configurable:!0}),s.prototype.isGrouped=function(t){return t&&0<t.groupLevel},s.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},s.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},s.prototype.groupByFieldNames=function(t,e,i){void 0===i&&(i=W.SortDirection.ASCENDING);var o=this.dataSource;if(o&&t&&0<t.length){for(var r=[],n=0;n<t.length;n++){var s=t[n],a=o.getFieldIndex(s);0<=a&&r.push(a)}0<r.length&&(e=void 0===e?this.rowGroup.sorting:e,this.groupBy(r,e,i))}else this.ungroupBy()},s.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.$_doGroupBy(t,e,i)},s.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.groupBy(null,!0,W.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged())},s.prototype.ungroupBy=function(){this.clearGroupBy()},s.prototype.addGroupBy=function(t,e){this.isItemEditing(null)||this.isGrouped(e)||e.visible&&0<=e.dataIndex&&this.$_doAddGroupBy(t,e)},s.prototype.addGroupByField=function(t,e){var i=this.columnByField(e);i&&this.addGroupBy(t,i)},s.prototype.removeGroupByField=function(t){t<0||this.isItemEditing(null)||!this.isGroupedField(t)||(this._rs.groupByFields,this._rs.removeGroupBy(t,!1),this._rs.groupByFields.length,this.$_doRowGroupFooterMergeChanged())},s.prototype.removeGroupBy=function(t){this.removeGroupByField(t.dataIndex)},s.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},s.prototype.collapse=function(t,e,i){this.isItemEditing(null)||this._rs.collapse(t,e,i)},s.prototype.isGroupedColumn=function(t){return t&&0<=t.dataIndex&&this._rs.isGroupedField(t.dataIndex)},s.prototype.getSortFields=function(){return this.itemSource.getSortFields()},s.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},s.prototype.getSortCases=function(){return this.itemSource.getSortCases()},s.prototype.canFiltering=function(){return this._fireFiltering()},s.prototype.applyFilters=function(t,e){return this.isItemEditing(null)||this._fireFiltering()&&this.$_doApplyFilters(t,e),!1},s.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},s.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},Object.defineProperty(s.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!0,configurable:!0}),s.prototype._createSidePane=function(){return this._groupBarPane=new fe.RowGroupBarPane},s.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped},s.prototype._createLayoutManager=function(){return new l(this)},s.prototype.canGrouping=function(){return this._groupPanelView.visible},s.prototype._canMerge=function(){return!0},Object.defineProperty(s.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),s.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},s.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},s.prototype.execute=function(t){this._rs.execute(t)},s.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},s.prototype._doSortItems=function(t,e,i){this.itemSource.orderBy(t,e,i)},s.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},s.prototype.setOptions=function(t){if(t){var e=this._rs;void 0!==t.hideDeleted&&(e.hideDeleted=t.hideDeleted),void 0!==t.inclusiveFiltering&&(e.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(e.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(e.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(e.groupSummaryMode=t.groupSummaryMode),void 0!==t.mergeMode&&(e.mergeMode=t.mergeMode),void 0!==t.sortMode&&(e.sortMode=t.sortMdoe),void 0!==t.filterMode&&(e.filterMode=t.filterMode),r.prototype.setOptions.call(this,t)}},s.prototype._createItemSource=function(){return new de.GridItemProvider(!0,this._rowGroup)},s.prototype.$_rowGroupChanged=function(t){this._rs.mergeMode=t.mergeMode},s.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping},s.prototype.$_rowGroupAdornmentsChanged=function(t){this._rs._groupedProvider.resetAdornments(t.expandedAdornments,t.collapsedAdornments)},s.prototype.$_getVisibleRootByField=function(t){for(var e=this.visibleLayoutCount,i=0;i<e;i++){var o=this.getVisibleLayout(i),r=o instanceof D.CellLayoutColumnItem&&z.Utils.cast(o.firstColumn,G.DataColumn);if(r&&r.dataIndex==t)return r}return null},s.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},s.prototype._doRowGroupMergeModeChanged=function(){if(r.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped(),this.rowGroup.mergeMode){var t=this._rs.groupByFields;if(t&&0<t.length)for(var e=t.length-1;0<=e;e--){var i=this.$_getVisibleRootByField(t[e]);i?i.$_setMergeGrouped(!0):t.splice(e,1)}t&&0<t.length?this._rs.groupByMode(t,!0):this._rs.groupByMode(null,!0)}else this._rs.mergeMode=!1},s.prototype.$_doRowGroupFooterMergeChanged=function(){},s.prototype.$_doGroupBy=function(t,e,i){var o,r=this.dataSource;if(this.$_clearColumnMergeGrouped(),r&&t&&0<(o=t.length)){for(var n=r.fieldCount,s=[],a=0;a<o;a++)0<=t[a]&&t[a]<n&&s.push(t[a]);if(0<s.length){if(this.rowGroup.mergeMode)for(a=s.length-1;0<=a;a--){var l=this.$_getVisibleRootByField(s[a]);l?l.$_setMergeGrouped(!0):s.splice(a,1)}0<s.length&&this._rs.groupBy(s,e,i)}}else this._rs.groupBy(null,!0,W.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},s.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{this._rs.addGroupBy(t,i),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},s.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=z.Utils.cast(this.getColumn(t),G.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},s.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=z.Utils.cast(this.getColumn(t),G.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},s.prototype.$_doApplyFilters=function(t,e){var i=this._rs.itemCount;this._rs.beginFiltering();try{this._filterRunning=!0,this._rs.clearAllFilters(),this.$_addFilters()}finally{this._rs.endFiltering(t,e),this._filterRunning=!1}i!==this._rs.itemCount&&(this.topIndex=0)},s.prototype.$_addFilters=function(){var t,e,i,o,r=this.columnCount;for(t=0;t<r;t++)if((o=(e=this.getColumn(t)).filters)&&0<o.activeCount)for(var n=0,s=o.count;n<s;n++)(i=o.getItem(n)).active&&this._rs.addFilter(e.dataIndex,i)},s.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(s.PAGE_CHANGING,t)},s.prototype.$_firePageChanged=function(t){this.fireEvent(s.PAGE_CHANGED,t)},s.prototype.$_firePageCountChanged=function(t){this.fireEvent(s.PAGE_COUNT_CHANGED,t)},s.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(s.GROUPING,t)},s.prototype.$_fireGrouped=function(){this.fireEvent(s.GROUPED)},s.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(s.EXPANDING,t)},s.prototype.$_fireExpanded=function(t){this.fireEvent(s.EXPANDED,t)},s.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(s.COLLAPSING,t)},s.prototype.$_fireCollapsed=function(t){this.fireEvent(s.COLLAPSED,t)},s.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},s.prototype.onGroupedItemProviderGrouped=function(t){this.$_clearGroupedIndices();var e=this._rs.groupByFields;if(e&&0<e.length&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var i=new Array,o=this.visibleLayoutCount,r=0;r<o;r++){var n=this.getVisibleLayout(r);n instanceof D.CellLayoutColumnItem&&z.Utils.cast(n.firstColumn,G.DataColumn)}for(o=i.length,o=this.visibleLayoutCount,r=0;r<o;r++);}this.$_fireGrouped()},s.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},s.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},s.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},s.prototype.onGroupedItemProviderCollapsed=function(t,e){this.$_fireCollapsed(e)},s.PAGE_CHANGING="onGridViewPageChanging",s.PAGE_CHANGED="onGridViewPageChanged",s.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",s.GROUPING="onGridViewGrouping",s.GROUPED="onGridViewGrouped",s.EXPANDING="onGridViewExpanding",s.EXPANDED="onGridViewExpanded",s.COLLAPSING="onGridViewCollapsing",s.COLLAPSED="onGridViewCollapsed",s);function s(t){var e=r.call(this,t)||this;return e._rowGroupSummaryRuntime=new H.RowGroupSummaryRuntime,e._addGridObject(e._rowGroup=new N.RowGroup(e)),e._rs=e._createItemSource(),e.itemSource=e._rs,e._groupingOptions=new ye.GroupingOptions(e),e._groupingOptionsChanged(e._groupingOptions),e._groupPanelView=new me.GroupPanelElement(e.rowGroup),e.topContentPane.addChild(e._groupPanelView),e}e.GridView=n;var a,l=(a=vt.GridLayoutManager,i(u,a),u.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,r=0;r<t&&r<i;r++)o+=this.getFixedLayoutWidth(r);for(r=i;r<t;r++)o+=this.getLayoutWidth(r-i);return i?i<t?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):o+=this.fixedBarWidth:o-=this.leftPos,o}return e.groupBarPane.getLevelIndent(t)},Object.defineProperty(u.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"topPanelVisible",{get:function(){return this._panelVisible},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!0,configurable:!0}),u.prototype.$_groupView=function(t){return this.grid._groupView},u.prototype.setLeftPos=function(t,e){a.prototype.setLeftPos.call(this,t,e);var i=this.grid,o=i.mergedRowGrouped,r=this.$_groupView(o);r.visible&&this.$_layoutRowGroupView(i,r)},u.prototype._prepareItems=function(){a.prototype._prepareItems.call(this);var t=this.grid;if(t.rowGrouped){var e=t.mergedRowGrouped,i=this.$_groupView(e),o=this.contentBounds.isEmpty?null:t.bodyView,r=this.fixedContentBounds.isEmpty?null:t.fixedBodyView,n=this.rightContentBounds.isEmpty?null:t.rightBodyView;i.$_prepareGroupItems(this,o,r,n),i.$_prepareGroupFooters(this._items,this)}},u.prototype._doMeasureTopPane=function(t,e){var i=t.groupingOptions,o=t.groupPanelView;if(this._panelVisible=i.enabled,this._panelVisible){var r=o.measure(t,e.width,e.height);e.height=r.height}else e.height=1,e.width=1},u.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this._panelVisible&&i.layoutContent(this)},u.prototype._doLayout=function(t){a.prototype._doLayout.call(this,t);var e=this.grid,i=e.mergedRowGrouped,o=this.$_groupView(i);this.$_groupView(!i).visible=!1,(o.visible=e.rowGrouped)&&this.$_layoutRowGroupView(e,o)},u.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.column;if(i instanceof F.ValueColumn&&i.merged){var o=i._merges;if(o)return null!=o.getRoom(t)}return!1},u.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=t.fixedOptions.rightFixed?i.right:this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y,i.bottom),e.setRect(o),e.layout(this)},u);function u(t){var e=a.call(this,t)||this;return e._panelVisible=!1,e}e.GridViewLayoutManager=l;var h,c=(h=Ut.GridSelectionTool,i(p,h),p.prototype._doDispose=function(){this._panelCellReq=null,h.prototype._doDispose.call(this)},p.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,r=this.findElementAt(e,i,!1);if(r instanceof fe.RowGroupExpandHandle){var n=r.cellView.item;n instanceof q.GroupItemImpl&&(n.expanded?o.collapse(n,!1,!1):o.expand(n,!1,!1,0))}else h.prototype._doMouseDown.call(this,t)},p.prototype._doClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,r=this.findElementAt(e,i,!1);r instanceof me.GroupPanelItemView&&r.isCloseButton(t.target)&&o.removeGroupByField(r.field),h.prototype._doClick.call(this,t)},p.prototype._getEditRequest=function(t,e,i,o,r){this.grid;var n=this.findElementAt(e,i,!1);return n instanceof me.GroupPanelItemView?this._panelCellReq.init(n,e,i):h.prototype._getEditRequest.call(this,t,e,i,o,r)},p.prototype._getDragTracker=function(t,e,i){var o=this.grid;return t instanceof _?new v(o,t,this._panelCellFeedback):t instanceof E?new O(o,t,this._panelCellFeedback):h.prototype._getDragTracker.call(this,t,e,i)},p.prototype.getNextRequest=function(t,e,i,o){var r=this.grid;return t instanceof Ft.ColumnMoveRequest&&t.layout instanceof D.CellLayoutColumnItem&&r.layoutManager.topPanelVisible&&o<r.groupPanelView.bottom?this._groupingReq.init(t.layout,e,i,o):null},p);function p(t){var e=h.call(this,t,"gridSelectionTool")||this;return e._panelCellReq=new _,e._panelCellFeedback=new m,e._groupingReq=new E,e}e.GridViewSelectionTool=c;var d,_=(d=Ot.EditRequest,i(f,d),Object.defineProperty(f.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),f.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},Object.defineProperty(f.prototype,"cursor",{get:function(){return W.Cursor.POINTER},enumerable:!0,configurable:!0}),f);function f(){var t=d.call(this)||this;return t._field=-1,t}var y,m=(y=nt.VisualElement,i(g,y),g.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView.textContent=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},g.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},g.prototype._initDom=function(t){y.prototype._initDom.call(this,t),this._textView=document.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._noMark=document.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",t.appendChild(this._noMark)},g.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;if(o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no){var r=this._noMark.offsetWidth,n=this._noMark.offsetHeight,s=this._noMark.style;s.left=Math.max(0,(this.width-r)/2)+"px",s.top=Math.max(0,(this.height-n)/2)+"px"}},g);function g(){var t=y.call(this)||this;return t._no=!1,t}var b,v=(b=$t.GridDragTracker,i(C,b),C.prototype._doDispose=function(){this._request=null,this._feedback=null,b.prototype._doDispose.call(this)},C.prototype._doStart=function(t,e,i,o){var r=this.grid,n=(r.layoutManager,this._request.source.boundsByContainer());return this._feedback.setRect(n),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-n.x,this._offsetY=i-n.y,!0},C.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},C.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},C.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},C);function C(t,e,i){var o=b.call(this,t,"groupPanelCellTracker")||this;return o._request=e,o._feedback=i,o}var w,E=(w=Ot.EditRequest,i(x,w),x.prototype._doDispose=function(){this._layout=null,this._source=null,w.prototype._doDispose.call(this)},Object.defineProperty(x.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),x.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},Object.defineProperty(x.prototype,"cursor",{get:function(){return W.Cursor.POINTER},enumerable:!0,configurable:!0}),x);function x(){return w.call(this)||this}var I,O=(I=$t.GridDragTracker,i(S,I),S.prototype._doDispose=function(){this._request=null,this._feedback=null,I.prototype._doDispose.call(this)},S.prototype._doStart=function(t,e,i,o){var r=this.grid,n=(r.layoutManager,this._request.source.boundsByContainer()),s=r.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(n),this._feedback.setField(this._request.layout.firstColumn.displayText,s),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-n.x,this._offsetY=i-n.y,!0},S.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},S.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY<e.contentBounds.y&&t.addGroupByField(e.rowGroupLevels,this._request.layout.firstColumn.dataIndex)},S.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},S);function S(t,e,i){var o=I.call(this,t,"groupingCellTracker")||this;return o._request=e,o._feedback=i,o}});t(ge);ge.GridView,ge.GridViewLayoutManager,ge.GridViewSelectionTool;var be=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.$_instanceOf=function(t,e){return"object"==typeof t&&0<=Object.prototype.toString.call(t).indexOf(e)},e._gk="dkdl"});t(be);be.$_instanceOf,be._gk;var ve=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,10)};var r,n=(r=nt.VisualElement,i(s,r),Object.defineProperty(s.prototype,"container",{get:function(){return this._contaner},enumerable:!0,configurable:!0}),s.prototype._getCssSelector=function(){},s.prototype._doDraw=function(t){},s);function s(t,e){var i=r.call(this,t)||this;return i._contaner=e,i}var a,l=void 0!==window.InstallTrigger,u=(navigator.platform.toUpperCase().indexOf("MAC"),a=j.EventAware,i(h,a),h.prototype._doDispose=function(){this._activeTool=null,this._defaultTool&&this._defaultTool.dispose(),this._defaultTool=null,this._scrollTool&&this._scrollTool.dispose(),this._scrollTool=null,this.$_removeListenerAll(null),this._containerDom&&this._containerDom.parentElement.removeChild(this._containerDom),this._containerDom=null,this._container=null,z.Utils.clearElements(this._containerDiv),a.prototype._doDispose.call(this)},Object.defineProperty(h.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),(this._activeTool=t)&&t.activate(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!0,configurable:!0}),h.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},h.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},h.prototype.setFocus=function(){this._setFocusAndScroll(this._containerDom)},h.prototype.updateNow=function(){this._render(z.Utils.getTimer())},h.prototype.toScreen=function(t){return t.x+=this._offsetX,t.y+=this._offsetY,t},h.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new K.Rectangle(t.left,t.top,t.width,t.height)},h.prototype.getHtml=function(){return this._containerDom.outerHTML},h.prototype.addElement=function(t){return this._rootElement.addChild(t)},h.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},h.prototype.resetSize=function(t){this.invalidateLayout()},h.prototype.prepareContainer=function(t){if(!t)throw new Error("container is null!");if(be.$_instanceOf(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!be.$_instanceOf(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var e=this._containerDom=document.createElement("div");this._container=this._containerDom;var i=e.style;this._cursor=i.cursor,this._containerDiv.appendChild(e),e.setAttribute("tabindex","0"),i.position="relative",i.width="100%",i.height="100%",i.boxSizing="border-box",i.overflow="hidden",i["-webkit-touch-callout"]="none",i["-webkit-user-select"]="none",i["user-select"]="none",i["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(),this._doPrepareContainer(e)},h.prototype._doPrepareContainer=function(t){},h.prototype._createRootElement=function(){var t=new n("root",this);return this._containerDom.appendChild(t._dom),t},h.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},h.prototype.invalidate=function(t){this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=window.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},h.prototype.invalidateElement=function(t){this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=window.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},h.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._offsetX=this._containerDom.offsetLeft,this._offsetY=this._containerDom.offsetTop,this._drawing=!0;try{this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null}}},h.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;this._layoutChildren(new K.Rectangle(0,0,i,o)),this._layoutNeeded?(this._layoutNeeded=!1,this._doLayout(new K.Rectangle(0,0,i,o))):this._doPrepareRender(new K.Rectangle(0,0,i,o)),this._doRenderHtml(new K.Rectangle(0,0,i,o))},h.prototype._layoutChildren=function(t){},h.prototype._doLayout=function(t){},h.prototype._doPrepareRender=function(t){},h.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},h.prototype._doDrawContainer=function(t){},h.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},h.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++)t.getChild(e).validate()},h.prototype._setFocusAndScroll=function(t,e){void 0===e&&(e=!1),t.setFocus?t.setFocus(e):t.focus&&t.focus()},h.prototype._registerEventHandlers=function(t){var e=window;t.style.cursor=this._defaultCursor,this.$_addListener(e,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(e,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(e,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(e,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(e,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),l?this.$_addListener(t,"DOMMouseScroll",this._mouseScrollHandler.bind(this),!1):this.$_addListener(t,"mousewheel",this._mouseWheelHandler.bind(this),!1),this.$_addListener(t,"touchstart",this._touchStartHandler.bind(this),!1),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!1),this.$_addListener(t,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(t,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(t,"touchleave",this._touchLeaveHandler.bind(this),!1)},h.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},h.prototype.$_removeListener=function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var o=i[e],r=o.length;r--;){var n=o[r];t.removeEventListener(e,n[0],n[1])}}},h.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var r=e[i];if(r in this._eventHandlers){var n=this._eventHandlers[r];for(var s in n)for(var a=n[s],l=a.length;l--;){var u=a[l];r.removeEventListener(s,u[0],u[1])}}}},h.prototype._unloadHandler=function(){this.$_removeListenerAll(),this._containerDiv=null,this._containerDom=null},h.prototype._resizeHandler=function(t){this.resetSize()},h.prototype._keyDownHandler=function(t){this._activeTool&&this._activeTool.keyDown(t)},h.prototype._keyUpHandler=function(t){this._activeTool&&this._activeTool.keyUp(t)},h.prototype._keyPressHandler=function(t){this._activeTool&&this._activeTool.keyPress(t)},h.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},h.prototype._clickHandler=function(t){this._activeTool&&this._activeTool.click(this.toOffset(t))},h.prototype._dblclickHandler=function(t){this._activeTool&&this._activeTool.dblclick(this.toOffset(t))},h.prototype._mouseDownHandler=function(t){this._activeTool.setFocus(),this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(St.ScrollBar)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._activeTool&&(this._activeTool._mouseEventTarget=t.target instanceof HTMLElement?t.target:null,this._activeTool.mouseDown(t)),t.preventDefault()},h.prototype._mouseMoveHandler=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._activeTool&&(this._activeTool._mouseEventTarget=t.target instanceof HTMLElement?t.target:null,this._activeTool.mouseMove(t))},h.prototype._mouseUpHandler=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._activeTool&&(this._activeTool._mouseEventTarget=t.target instanceof HTMLElement?t.target:null,this._activeTool.mouseUp(t),this._activeTool instanceof St.ScrollTool&&(this.activeTool=this._activeTool.previous))},h.prototype._mouseEnterHandler=function(t){},h.prototype._mouseLeaveHandler=function(t){},h.prototype._mouseOverHandler=function(t){},h.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._activeTool&&(this._activeTool._mouseEventTarget=t.target instanceof HTMLElement?t.target:null,this._activeTool.contextMenu(t))},h.prototype._mouseWheelHandler=function(t){this._activeTool&&this._activeTool.mouseWheel(this.toOffset(t))&&z.Utils.stopEvent(t)},h.prototype._mouseScrollHandler=function(t){this._activeTool&&(t.wheelDelta=-t.detail,this._activeTool.mouseWheel(this.toOffset(t))&&z.Utils.stopEvent(t))},h.prototype._focusHandler=function(t){},h.prototype._blurHandler=function(t){},h.prototype._selectstartHandler=function(t){return!1},h.prototype._focusinHandler=function(t){},h.prototype._focusHandlerFireFox=function(t){},h.prototype._focusoutHandler=function(t){},h.prototype._touchStartHandler=function(t){},h.prototype._touchMoveHandler=function(t){},h.prototype._touchEndHandler=function(t){},h.prototype._touchCancelHandler=function(t){},h.prototype._touchLeaveHandler=function(t){},h.prototype.onMenuItemClick=function(t){},h);function h(t){var e=a.call(this)||this;return e._updateRequested=!1,e._layoutNeeded=!1,e._invalidated=!1,e._captured=!1,e._focusing=!1,e._focusingTarget=null,e._hovered=null,e._currentX=0,e._currentY=0,e._rendered=0,e._defaultCursor=W.Cursor.AUTO,e._drawing=!1,e._offsetX=0,e._offsetY=0,e._clicked=0,e._clicket=0,e._children=[],e._eventHandlers={},e._eventNodes=[],e._contextMenu=null,e._containerRender=e._render.bind(e),e._scrollTool=new St.ScrollTool(e),e._cursor="auto",e._testWidth=NaN,e._testHeight=NaN,e.prepareContainer(t),e.invalidateLayout(),e._registerEventHandlers(e._containerDom),e.activeTool=e._defaultTool=e._createDefaultTool(),e}e.VisualContainer=u});t(ve);ve.VisualContainer;var Ce=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ve.VisualContainer,i(s,r),s.prototype._doDispose=function(){this._gridView=null,r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"gridView",{get:function(){return this._gridView},enumerable:!0,configurable:!0}),s.prototype._doPrepareContainer=function(t){t.className="rg-root rg-grid",this._gridView=this._createGridView(),this.addElement(this._gridView)},s.prototype._createDefaultTool=function(){return new ge.GridViewSelectionTool(this)},s.prototype._doLayout=function(t){var e=t.clone();this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_layout(e)},s.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e)},s.prototype._createGridView=function(){return new ge.GridView(this)},s);function s(t){return r.call(this,t)||this}e.GridContainer=n});t(Ce);Ce.GridContainer;var we=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s);function s(t){var e=r.call(this)||this;return e.allFields=!0,e.caseSensitive=!1,e.partialMatch=!1,e.regularExpression=!1,t&&e.extend(t),e}e.SearchOptions=n;var a,l=(a=ce.Base,i(u,a),u);function u(t){var e=a.call(this)||this;return e.fields=null,e.caseSensitive=!1,e.partialMatch=!1,e.regularExpression=!1,e.columns=null,t&&e.extend(t),e}e.SearchCellOptions=l});t(we);we.SearchOptions,we.SearchCellOptions;var Ee=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=v.EditCommand,i(s,r),s.prototype._doDispose=function(){this._ds=null,r.prototype._doDispose.call(this)},s.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save.result},s.prototype.undo=function(){this._doUndo(this._ds,this._save)},s.prototype._cloneRow=function(t){if(z.Utils.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},s.prototype._cloneValues=function(t){if(t){for(var e=[],i=0;i<t.length;i++){var o=t[i];if(z.Utils.isArray(o))e.push(o.slice());else if(o){var r={};for(var n in o)r[n]=o[n];e.push(r)}}return e}return null},s);function s(t){var e=r.call(this)||this;return e._ds=t,e}e.DataEditCommand=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},u);function u(t){return a.call(this,t)||this}e.LocalDataEditCommand=l;var h,c=(h=v.EditCommandStack,i(p,h),p);function p(){return null!==h&&h.apply(this,arguments)||this}e.LocalDataCommandStack=c});t(Ee);Ee.DataEditCommand,Ee.LocalDataEditCommand,Ee.LocalDataCommandStack;var xe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=Ee.LocalDataEditCommand,i(s,n),s.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},s.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},s.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},s);function s(t,e,i,o){var r=n.call(this,t)||this;return r._row=e,r._field=i,r._value=o,r}e.SetValueDataCommand=r});t(xe);xe.SetValueDataCommand;var Ie=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=Ee.LocalDataEditCommand,i(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},s.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},s.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},s.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},s);function s(t,e,i,o){var r=n.call(this,t)||this;return r._row=e,r._values=r._cloneRow(i),r._strict=o,r}e.UpdateRowDataCommand=r});t(Ie);Ie.UpdateRowDataCommand;var Oe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.LocalDataEditCommand,i(s,r),s.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},s.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},s.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},s);function s(t,e,i){var o=r.call(this,t)||this;return o._row=e,o._values=i.slice(),o}e.InsertRowDataCommand=n});t(Oe);Oe.InsertRowDataCommand;var Se=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.LocalDataEditCommand,i(s,r),s.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},s.prototype._doRedo=function(t,e){t.$_deleteRow(this._row)},s.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},s);function s(t,e){var i=r.call(this,t)||this;return i._row=e,i}e.RemoveRowDataCommand=n});t(Se);Se.RemoveRowDataCommand;var De=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=Ee.LocalDataEditCommand,i(s,n),s.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},s.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},s.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},s);function s(t,e,i,o){var r=n.call(this,t)||this;return r._row=e,r._state=i,r._force=o,r}e.SetRowStateDataCommand=r});t(De);De.SetRowStateDataCommand;var Re=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.LocalDataEditCommand,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},s.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},s.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},s);function s(t,e,i){var o=r.call(this,t)||this;return o._row=e,o._state=i,o}e.ChangeRowStateDataCommand=n});t(Re);Re.ChangeRowStateDataCommand;var Pe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.LocalDataEditCommand,i(s,r),s.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},s.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},s.prototype._doUndo=function(t,e){var i=e.rows,o=e.values,r=e.states;if(o)for(var n=0;n<i.length;n++)t.$_internalInsertRow(n,o[n],e.row,!0);if(r)for(n=0;n<r.length;n++)r[n]&&t._yieldState(n,r[n]);t._yieldOrgValues(e.rows),0<i.length&&t._fireRefresh()},s);function s(t,e,i){var o=r.call(this,t)||this;return o._deleteRows=e,o._rowEvents=i,o}e.ClearRowStatesDataCommand=n});t(Pe);Pe.ClearRowStatesDataCommand;var Te=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var l,r=(l=Ee.LocalDataEditCommand,i(n,l),n.prototype._doDispose=function(){l.prototype._doDispose.call(this)},n.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},n.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},n.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[a],n[a])}t._fireRefresh()}},n);function n(t,e,i,o,r,n,s){var a=l.call(this,t)||this;return a._row=e,a._values=a._cloneValues(i),a._start=o,a._count=r,a._rowEvents=n,a._strict=s,a}e.UpdateRowsDataCommand=r});t(Te);Te.UpdateRowsDataCommand;var ke=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.LocalDataEditCommand,i(s,r),s.prototype._doRun=function(t){var e={};return t.$_removeRows(this._rows,this._rowEvents,e),e},s.prototype._doRedo=function(t,e){t.$_removeRows(this._rows,this._rowEvents,null)},s.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.rows,r=e.rowSaves,n=e.statedRows,s=e.states,a=0;a<o.length;a++){var l=i[a],u=r[a];t.$_internalInsertRow(l,u.values,!0),t._yieldRow(l,u)}for(a=0;a<n.length;a++)l=n[a],t._yieldState(l,s[a]);t._fireRefresh()}},s);function s(t,e,i){var o=r.call(this,t)||this;return o._rows=e.slice(),o._rowEvents=i,o}e.RemoveRowsDataCommand=n});t(ke);ke.RemoveRowsDataCommand;var Le=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var a,r=(a=Ee.LocalDataEditCommand,i(n,a),n.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},n.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},n.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}t.$_removeRows(this._rows,!1,null)},n);function n(t,e,i,o,r,n){var s=a.call(this,t)||this;return s._row=e,s._values=s._cloneValues(i),s._start=o,s._count=r,s._rowEvents=n,s}e.InsertRowsDataCommand=r});t(Le);Le.InsertRowsDataCommand;var Me=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=O.DataProvider,i(s,n),s.prototype._doDispose=function(){this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,n.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),s.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},Object.defineProperty(s.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),s.prototype.getRowId=function(t){return this._rowIds[t]},s.prototype.$_internalInsertField=function(t,e){if(0<=(t=n.prototype.$_internalInsertField.call(this,t,e))){for(var i=this._values.length,o=0;o<i;o++)(r=this._values[o])&&r.splice(t,0,void 0);if(this._orgValues)for(i=Math.min(i,this._orgValues.length),o=0;o<i;o++){var r;(r=this._orgValues[o])&&r.splice(t,0,void 0)}}return t},s.prototype.$_internalClearFields=function(){n.prototype.$_internalClearFields.call(this),this.$_clearRows()},s.prototype.setRowCount=function(t,e,i,o){if(void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=x.RowState.NONE),this._checkClientState()){var r=this._values,n=r.length,s=Math.max(0,t);if(s!=n){var a=this._rowIds,l=this._rowStates;if(this.refreshFieldFormats(),r.length=a.length=l.length=s,this._orgValues&&this._orgValues.length>s&&(this._orgValues.length=s),n<s&&(e||i)){var u=this.fieldCount,h=i;if(!h||h instanceof Array||(h=this.objectToRow(h)),h&&h.length<1&&(h=null),e||h)for(var c=h?Math.min(h.length,u):0,p=n;p<s;p++){var d=[];if(e)for(var _=0;_<u;_++){var f=this.getField(_);d[_]=void 0!==f.defaultValue?f.defaultValue:f.nullValue}if(0<c)for(_=0;_<c;_++){var y=h[_];void 0!==y&&(d[_]=this.getField(_).readValue(y))}r[p]=d}}else if(s<n&&0<this._deletedCount)for(p=n-1;s<=p;p--)l[p]!=x.RowState.DELETED&&l[p]!=x.RowState.CREATE_AND_DELETED||this._deletedCount--,l[p]=x.RowState.NONE;for(o=this.checkStates&&o?o:x.RowState.NONE,p=n;p<s;p++)l[p]=o,a[p]=this._nextRowId++;this.tags.setRowCount(s),this._fireRefresh(),this._fireRowCountChanged()}}},s.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.tags.clearRows()},s.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged())},s.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,r=this.filters,n=this.filterRuntime,s=void 0;if(t&&0<(s=t.length)&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),r){this._values.length=this._rowIds.length=this._rowStates.length=i,r.prepare(n,this);for(var a=s,l=0,u=0,h=e;h<a&&l<i;h++)(c=t[h])instanceof Array||(c=this.objectToRow(c)),r.select(n,u++,c)&&this.$_internalSetRow(l++,c,o);this._values.length=this._rowIds.length=this._rowStates.length=l}else if(e<(a=Math.min(s,e+i)))for(this._values.length=this._rowIds.length=this._rowStates.length=a-e,l=0,h=e;h<a;h++){var c;(c=t[h])instanceof Array||(c=this.objectToRow(c)),this.$_internalSetRow(l++,c,o)}}finally{this.endUpdate(!1)}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged()}},s.prototype.setXmlRows=function(t,e,i){void 0===i&&(i=-1),this._checkClientState()},s.prototype.insertRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this.undoable?this._commands.execute(new Le.InsertRowsDataCommand(this,t,e,i,o,r)):this.$_insertRows(t,e,i,o,r)},s.prototype.$_insertRows=function(t,e,i,o,r){if(this._checkClientState()&&e){var n=e.length;if(!(n<1)&&0!=(o=o<0?n:Math.min(n,o))){if(t<0||t>this._values.length)throw new g.DataSourceError("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(n,i+o);if(r)for(var a=t,l=i;l<s;l++)(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.fireRowInserting(a,u)&&(this.$_internalInsertRow(a,u,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++);else{for(a=t,l=i;l<s;l++,a++){var u;(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.$_internalInsertRow(a,u,!1)}this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},s.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},s.prototype.insertXmlRows=function(t,e,i,o,r){throw new Error("Method not implemented.")},s.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},s.prototype.updateRows=function(t,e,i,o,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new Te.UpdateRowsDataCommand(this,t,e,i,o,r,!1));this.$_updateRows(t,e,i,o,!1,r)},s.prototype.updateStrictRows=function(t,e,i,o,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new Te.UpdateRowsDataCommand(this,t,e,i,o,r,!0));this.$_updateRows(t,e,i,o,!0,r)},s.prototype.updateXmlRows=function(t,e,i,o,r){throw new Error("Method not implemented.")},s.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},s.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new xe.SetValueDataCommand(this,t,e,i)):this.$_setValue(t,e,i)},s.prototype.$_setValue=function(t,e,i){if(!this._checkClientState())return!1;this.$_checkRowIndex(t),this._checkFieldIndex(e);var o=this.getField(e),r=this._rowStates[t];if(!o.updatable&&(r==x.RowState.NONE||r==x.RowState.UPDATED))return!1;var n,s=this._values[t],a=o.readValue(i);if(s&&o.equalValues(a,s[e]))return!1;this.refreshFieldFormat(o);var l=this.checkStates&&(r==x.RowState.NONE||!r);return s||(this._values[t]=s=[]),l&&this._orgValues&&(n=s.concat()),s[e]=a,this._internalCalculateValues(s,t),l?(n&&(this._orgValues[t]=n),this.$_changeRowState(t,x.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(t),this.tags.setValue(t,e),this.fireValueChanged(t,e),!0},s.prototype.updateRow=function(t,e){return this.undoable?this._commands.execute(new Ie.UpdateRowDataCommand(this,t,e,!1)):this.$_updateRow(t,e,!1)},s.prototype.updateStrictRow=function(t,e){return this.undoable?this._commands.execute(new Ie.UpdateRowDataCommand(this,t,e,!0)):this.$_updateRow(t,e,!0)},s.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},s.prototype.getRowObject=function(t){return this.$_checkRowIndex(t),this.$_getRowObject(t,this.fieldCount)},s.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),r=e<0?i-1:Math.min(i-1,e);if(i<=o||r<o)return[];for(var n=r-o+1,s=new Array(n),a=0;a<n;a++)s[a]=this._values[a+o]||[];return s},s.prototype.getRowObjects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),r=e<0?i-1:Math.min(i-1,e);if(i<=o||r<o)return[];for(var n=this.fieldCount,s=r-o+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+o,n);return a},s.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e);return t&&this.$_createOutputRows([i],t),i},s.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i);return t&&this.$_createOutputRows(o,t,e),o},s.prototype.getColumn=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),o<=(e=Math.max(0,e))||i<e)return null;for(var r=new Array(i-e+1),n=e;n<=i;n++){var s=this._values[n];r[n-e]=s&&s[t]}return r},s.prototype.hasData=function(t){return 0<=t&&t<this._values.length&&void 0!==this._values[t]},s.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new Oe.InsertRowDataCommand(this,t,e)):this.$_insertRow(t,e)},s.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new g.DataSourceError("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e)||(e instanceof Array||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),0))},s.prototype.appendRow=function(t){return this.insertRow(this.rowCount,t)},s.prototype.removeRow=function(t){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[t]){case x.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new Re.ChangeRowStateDataCommand(this,t,x.RowState.CREATE_AND_DELETED));break;case x.RowState.DELETED:case x.RowState.CREATE_AND_DELETED:break;default:return this._commands.execute(new Re.ChangeRowStateDataCommand(this,t,x.RowState.DELETED))}return this._commands.execute(new Se.RemoveRowDataCommand(this,t))}return this.$_removeRow(t)},s.prototype.$_removeRow=function(t){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(t),this.softDeleting&&this.checkStates){switch(this._rowStates[t]){case x.RowState.CREATED:this.deleteCreated?this.$_deleteRow(t):this.$_changeRowState(t,x.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case x.RowState.DELETED:case x.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(t,x.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)},s.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new ke.RemoveRowsDataCommand(this,t,e)):this.$_removeRows(t,e,null)},s.prototype.$_removeRows=function(t,e,i){if(this._checkClientState()){var o,r=this.deleteCreated;if(t&&!((o=t.length)<1)){if(i&&(i.rows=[],i.rowSaves=[],i.statedRows=[],i.states=[]),this.softDeleting&&this.checkStates){for(var n=e?null:[],s=o;s--;){var a=t[s],l=this._rowStates[a],u=!1;switch(this.$_checkRowIndex(a),l){case x.RowState.CREATED:r||(i&&(i.statedRows.push(a),i.states.push(l)),u=this.$_changeRowState(a,x.RowState.CREATE_AND_DELETED,e,!1,!0),t.splice(s,1));break;case x.RowState.DELETED:case x.RowState.CREATE_AND_DELETED:t.splice(s,1);break;default:i&&(i.statedRows.push(a),i.states.push(l)),u=this.$_changeRowState(a,x.RowState.DELETED,e,!1,!0),t.splice(s,1)}n&&u&&n.push(a)}e||n&&0<n.length&&this.fireRowStatesChanged(n)}if(0<(o=t.length)){if(1<o&&t.sort(function(t,e){return t-e}),i)for(s=0;s<o;s++)a=t[s],i.rows.push(a),i.rowSaves.push(this._keepRow(a));if(e)for(s=o;s--;)a=t[s],this.$_checkRowIndex(a),this.$_deleteRow(a);else if(this.fireRowsRemoving(t)){for(s=o;s--;)a=t[s],l=this._rowStates[a],this.$_checkRowIndex(a),this.$_internalRemoveRow(a),x.isDeletedState(l)&&this._deletedCount--;this.tags.removeRows(t),this.fireRowsRemoved(t),this._fireRowCountChanged()}}}}},s.prototype.moveRow=function(t,e){this._checkClientState()&&t!=e&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},s.prototype.moveRows=function(t,e,i){this._checkClientState()&&(e<1||t==i||(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i))))},s.prototype.getRowState=function(t){return this.$_checkRowIndex(t),this._rowStates[t]||x.RowState.NONE},s.prototype.$_checkDeleted=function(t,e){x.isDeletedState(e)?this._deletedCount++:x.isDeletedState(t)&&!x.isDeletedState(e)&&this._deletedCount--},s.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new De.SetRowStateDataCommand(this,t,e,i)):this.$_setRowState(t,e,i)},s.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},s.prototype.setRowStates=function(t,e,i,o){var r;if(void 0===o&&(o=!1),this._checkClientState()&&t&&!((r=t.length)<1))if(o)for(var n=0;n<r;n++){var s=t[n];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(n=0;n<r;n++){var u=l[s=t[n]];this.$_checkRowIndex(s),e!=u&&(l[s]=e,a.push(s),this.$_checkDeleted(u,e),this._orgValues&&this.prepareOrgValues(s,u,e))}0<a.length&&this.fireRowStatesChanged(a)}},s.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new Pe.ClearRowStatesDataCommand(this,t,e)):this.$_clearRowStates(t,e)},s.prototype.$_clearRowStates=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._checkClientState()){for(var o=[],r=i?[]:null,n=i?[]:null,s=this._rowStates.length;s--;){var a=this._rowStates[s];switch(r&&(r[s]=a),n&&(n[s]=null),a){case x.RowState.CREATE_AND_DELETED:case x.RowState.DELETED:t?(e?this.$_deleteRow(s):(this.$_internalRemoveRow(s),this.tags.removeRow(s),this._deletedCount--),o.push(s),n&&(n[s]=this._keepRow[s])):(this.$_changeRowState(s,x.RowState.NONE,e),this._deletedCount--);break;default:this.$_changeRowState(s,x.RowState.NONE,e)}}return this.$_resetOrgValues(),e||(0<o.length&&(this.fireRowsRemoved(o),this._fireRowCountChanged()),this.fireRowStatesCleared()),i?{rows:o,states:r,values:n}:void 0}},s.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},s.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++)this._rowStates[i]==t&&e.push(i);return e},s.prototype.getAllStateRows=function(){for(var t={},e=t.created=[],i=t.updated=[],o=t.deleted=[],r=t.createAndDeleted=[],n=0,s=this._rowStates.length;n<s;n++){var a=this._rowStates[n];a===x.RowState.CREATED?e.push(n):a===x.RowState.UPDATED?i.push(n):a===x.RowState.DELETED?o.push(n):a===x.RowState.CREATE_AND_DELETED&&r.push(n)}return t},s.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(1<e)for(var r=0;r<i;r++){var n=this._rowStates[r];0<=t.indexOf(n)&&o++}else for(n=t[0],r=0;r<i;r++)this._rowStates[r]===n&&o++;return o},s.prototype.$_restoreState=function(t){if(this._rowStates[t]===x.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,r=0,n=this.fieldCount;r<n;r++){var s=i.length>r?i[r]:void 0,a=e.length>r?e[r]:void 0,l=this.getField(r);if(o){if(!l.equalValues(s,a))return!1}else if(!l.sameValues(s,a))return!1}return this._rowStates[t]=x.RowState.NONE,!0}}return!1},s.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var r=t[i];0<=r&&r<this._values.length&&this.$_restoreState(r)&&e.push(r)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);0<e.length&&this.fireRowStatesChanged(e)}},s.prototype.$_restoreUpdatedRow=function(t){if(this._rowStates[t]===x.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=0,r=Math.min(e.length,this.fieldCount);o<r;o++)i[o]=e[o];return this._rowStates[t]=x.RowState.NONE,!0}}return!1},s.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},s.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var r=t[i];0<=r&&r<this._values.length&&this.$_restoreUpdatedRow(r)&&e.push(r)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);0<e.length&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},s.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(!this._orgValues||e!=y.RestoreMode.AUTO&&e!=y.RestoreMode.EXPLICIT)return null;if(null==t&&(t=this.getStateRows(x.RowState.UPDATED)),null==t)return null;for(var i=[],o=0,r=t.length;o<r;o++){var n=t[o],s=0<=n&&this._orgValues&&n<this._orgValues.length?this._orgValues[n]:null;if(s){for(var a=this._values[n],l=this.strictRestore,u=[],h=0,c=this.fieldCount;h<c;h++){var p=a.length>h?a[h]:void 0,d=s.length>h?s[h]:void 0,_=this.getField(h);_.calculated||(l?_.equalValues(p,d)||u.push({fieldName:this.getOrgFieldName(h),oldValue:s[h],newValue:a[h]}):_.sameValues(p,d)||u.push({fieldName:this.getOrgFieldName(h),oldValue:s[h],newValue:a[h]}))}0<u.length&&i.push({__rowId:n,updatedCells:u})}}return i},s.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},s.prototype.findRow=function(t,e){if(t.length<1||e.length<t.length)return-1;for(var i=[],o=[],r=this._values,n=0,s=t.length;n<s;n++){var a=void 0;0<=(a="string"==typeof t[n]?this.getFieldIndex(t[n]):Number(t[n]))&&a<this.fieldCount&&i.indexOf(a)<0&&(i.push(a),o.push(e[n]))}var l=i.length;for(n=0;n<l;n++)i[n]=this.getField(i[n]);var u=r.length;for(n=0;n<u;n++){var h=r[n],c=!0;for(a=0;a<l;a++)if(!i[a].equalValues(o[a],h[a])){c=!1;break}if(c)return n}return-1},s.prototype.canUpdateRow=function(t){return!0},s.prototype.canAppendRow=function(){return!0},s.prototype.canInsertRow=function(t){return!0},s.prototype.canDeleteRow=function(t){return!0},s.prototype.$_getSortedRows=function(t){var e,i=new Array(this._values.length);switch(this.getField(t).dataType){case W.ValueType.NUMBER:e=this.compareNumbers;break;case W.ValueType.DATETIME:e=this.compareDates;break;case W.ValueType.BOOLEAN:e=this.compareBools;break;case W.ValueType.OBJECT:e=this.compareObjects;break;default:e=this.compareValues}for(var o=i.length;o--;)i[o]=o;return this.$_sortRows(i,t,e.bind(this),0,i.length-1),i},s.prototype.getDistinctValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=W.SortDirection.ASCENDING),e=1<arguments.length?e:-1,this._checkFieldIndex(t);var o=[];if(e<0&&(e=this._values.length),0<e){var r=this.getField(t).dataType==W.ValueType.NUMBER,n=this.$_getSortedRows(t);i===W.SortDirection.DESCENDING&&n.reverse();var s=this._values[n[0]];o.push(s?s[t]:void 0);for(var a=1,l=n.length;a<l&&!(o.length>=e);a++)if(!this.equalValues(t,n[a-1],n[a])){var u=this._values[n[a]],h=u?u[t]:void 0;-1!=o.indexOf(h)||r&&isNaN(h)||o.push(h)}}return o},s.prototype.compareValues=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return null==n?null==s?0:-1:null==s?1:s<n?1:n<s?-1:0},s.prototype.compareTexts=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return null==n?null==s?0:-1:null==s?1:(n=String(n).toLocaleLowerCase(),(s=String(s).toLocaleLowerCase())<n?1:n<s?-1:0)},s.prototype.compareNumbers=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:NaN,s=r?r[t]:NaN;return isNaN(n)?isNaN(s)?0:-1:isNaN(s)?1:s<n?1:n<s?-1:0},s.prototype.compareDates=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n instanceof Date?s instanceof Date?s<n?1:n<s?-1:0:1:s instanceof Date?-1:0},s.prototype.compareBools=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=!!o&&Boolean(o[t]),s=!!r&&Boolean(r[t]);return n&&!s?1:!n&&s?-1:0},s.prototype.compareObjects=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0},s.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;for(var o=0,r=t.field,n=0,s=NaN,a=NaN,l=0;l<i;){var u=(d=this._values[l++])?null==d[r]?void 0:d[r]:NaN;if(!isNaN(u)){n=s=a=u,o++;break}}for(;l<i;)u=(d=this._values[l++])?null==d[r]?void 0:d[r]:NaN,isNaN(u)||(n+=u,u<s&&(s=u),a<u&&(a=u),o++);if(t.count=i,0<o)if(t.sum=n,t.min=s,t.max=a,t.avg=n/i,e){for(var h=0,c=t.avg,p=0;p<i;p++){var d;u=(d=this._values[p])?null==d[r]?void 0:d[r]:NaN,isNaN(u)||(h+=Math.pow(u-c,2))}t.varsp=h/i,t.vars=h/(i-1)}else t.varsp=NaN,t.vars=NaN;return!0},s.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var r=0,n=t.field,s=0,a=NaN,l=NaN,u=0;u<o;){var h=e[u++],c=(f=this._values[h])?null==f[n]?void 0:f[n]:NaN;if(!isNaN(c)){s=a=l=c,r++;break}}for(;u<o;)h=e[u++],c=(f=this._values[h])?null==f[n]?void 0:f[n]:NaN,isNaN(c)||(s+=c,c<a&&(a=c),l<c&&(l=c),r++);if(t.count=o,0<r)if(t.sum=s,t.min=a,t.max=l,t.avg=s/o,i){for(var p=0,d=t.avg,_=0;_<o;_++){var f;h=e[_],c=(f=this._values[h])?null==f[n]?void 0:f[n]:NaN,isNaN(c)||(p+=Math.pow(c-d,2))}t.varsp=p/o,t.vars=p/(o-1)}else t.varsp=NaN,t.vars=NaN;return!0},s.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},s.prototype._yieldRow=function(t,e){this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),this._yieldCommandStates(t,e.outer)},s.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},s.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},s.prototype._keepState=function(t){return this._rowStates[t]},s.prototype._yieldState=function(t,e){this._rowStates[t]=e},s.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},s.prototype._yieldOrgValues=function(t){if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},s.prototype.$_checkRowIndex=function(t){if(t<0||t>=this._values.length)throw new g.DataSourceError("row is out of bounds: "+t)},s.prototype.$_resetOrgValues=function(){var t=this.restoreMode;this._orgValues=this.checkStates&&t!=y.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&t==y.RestoreMode.AUTO},s.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),r=0;r<i;r++)o[r]=this.getField(r).readValue(t[r]);return this._internalCalculateValues(o,e),o},s.prototype.$_internalSetRow=function(t,e,i){var o=this.arrayToRow(e,t);this._values[t]=o,this._rowIds[t]=this._nextRowId++,this.checkStates&&(this._rowStates[t]=x.RowState.NONE)},s.prototype.$_internalInsertRow=function(t,e,i){var o=this.arrayToRow(e,t),r=t==this._values.length;r?(this._values.push(o),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,o),this._rowIds.splice(t,0,this._nextRowId++)),i&&this.tags.insertRow(t),r?this._rowStates.push(this.checkStates?x.RowState.CREATED:x.RowState.NONE):(this._rowStates.splice(t,0,this.checkStates?x.RowState.CREATED:x.RowState.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},s.prototype.$_updateRow=function(t,e,i){if(void 0===i&&(i=!1),this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e)||(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),0))},s.prototype.$_updateRows=function(t,e,i,o,r,n,s){if(void 0===s&&(s=null),this._checkClientState()&&e){var a=e.length;if(!(a<1)&&0!=(o=o<0?a:Math.min(a,o))){i=Math.max(0,i),this.refreshFieldFormats();var l=this.rowCount,u=Math.min(a,i+o);if(!(u<=i))if(s&&(s.rows=[],s.values=[],s.states=[],s.orgValues=[]),n)for(var h=t,c=i;c<u&&h<l;c++,h++){var p=e[c];this.fireRowUpdating(h,p)&&(s&&(s.rows.push(h),s.values.push(this._values[h].slice()),s.states.push(this._rowStates[h]),s.orgValues.push(this._orgValues&&this._orgValues[h])),this.$_internalUpdateRow(h,p,r,!0,!0),this.fireRowUpdated(h))}else{var d=[];for(h=t,c=i;c<u&&h<l;c++,h++)this._rowStates[h]==x.RowState.NONE&&d.push(h),s&&(s.rows.push(h),s.values.push(this._values[h].slice()),s.states.push(this._rowStates[h]),s.orgValues.push(this._orgValues&&this._orgValues[h])),p=e[c],this.$_internalUpdateRow(h,p,r,!1,!1);0<d.length&&this.fireRowStatesChanged(d),this.tags.updateRows(t,o=u-i),this.fireRowsUpdated(t,o)}}}},s.prototype.$_internalUpdateRow=function(t,e,i,o,r){var n,s=this.getFields(),a=z.Utils.isArray(e),l=Math.min(s.length,a?e.length:s.length),u=this._values[t],h=this._rowStates[t],c=this.checkStates&&(h==x.RowState.NONE||!h);u||(this._values[t]=u=[]),c&&this._orgValues&&(n=u.concat());for(var p=!1,d=0;d<l;d++){var _=s[d];if((_.updatable||h==x.RowState.CREATED||h==x.RowState.CREATE_AND_DELETED)&&(a||e.hasOwnProperty(_.orgFieldName))){var f=a?e[d]:e[_.orgFieldName];i&&void 0===f||(p=!this._needRestore||p||(i?!_.equalValues(u[d],_.readValue(f)):!_.sameValues(u[d],_.readValue(f))),u[d]=_.readValue(f))}}p&&this._internalCalculateValues(u,t),c&&p?(n&&(this._orgValues[t]=n),this.$_changeRowState(t,x.RowState.UPDATED,o)):this._needRestore&&this.restoreState(t),r&&this.tags.updateRow(t)},s.prototype.$_changeRowState=function(t,e,i,o,r){if(void 0===o&&(o=!1),void 0===r&&(r=!1),this.checkStates||o){var n=this._rowStates[t];if((e=e||x.RowState.NONE)!=n)return this._rowStates[t]=e,r&&(!x.isDeletedState(n)&&x.isDeletedState(e)?this._deletedCount++:x.isDeletedState(n)&&!x.isDeletedState(e)&&this._deletedCount--),i&&this.fireRowStateChanged(t),!0}return!1},s.prototype.restoreState=function(t){if(this._rowStates[t]===x.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,r=0,n=this.fieldCount;r<n;r++){var s=i.length>r?i[r]:void 0,a=e.length>r?e[r]:void 0;if(o){if(!this.getField(r).equalValues(s,a))return!1}else if(!this.getField(r).sameValues(s,a))return!1}return this._rowStates[t]=x.RowState.NONE,!0}}return!1},s.prototype.prepareOrgValues=function(t,e,i){i==x.RowState.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==x.RowState.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},s.prototype.$_changeRowStateEx=function(t,e,i,o,r){var n=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,r)&&(this._orgValues&&this.prepareOrgValues(t,n,e),i&&this.fireRowStateChanged(t),!0)},s.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o)for(var r=0;r<e;r++)i[this.getOrgFieldName(r)]=o[r];return i},s.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),x.isDeletedState(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},s.prototype.$_internalRemoveRow=function(t){this._rowIds[t],this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},s.prototype.internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],r=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,r),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},s.prototype.internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),r=this._rowIds.splice(t,e),n=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,r[s]),this._rowStates.splice(i+s,0,n[s]);this._orgValues&&this._orgValues.length>t&&(o=this._orgValues.splice(t,e),this._orgValues.splice(i+s,0,o[s]))},s.prototype.$_searchDataRow=function(t,e,i,o,r){var n=this.rowCount;if(n<1)return-1;var s=Math.min(t.length,e.length);if(s<1)return-1;for(var a=!i||i.allFields,l=i&&i.caseSensitive,u=i&&i.partialMatch,h=null,c=[],p=0;p<s;p++)c[p]=this.getField(t[p]).dataType;o=Math.max(0,o),r=Math.min(n-1,r);for(var d=o;d<=r;d++){var _=!0;for(p=0;p<s;p++){var f=this.getValue(d,t[p]);switch(c[p]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e[p]instanceof Date)_=z.Utils.compareTextValue(e[p],f,l,u);else{if(!h){var y=/[.]/.test(e[p])?"yyyy.MM.dd":/[/]/.test(e[p])?"yyyy/MM/dd":/[-]/.test(e[p])?"yyyy-MM-dd":"yyyyMMdd";h=new Lt.DateTimeConverter(y)}_=z.Utils.compareTextValue(e[p],f?h.getText(f):f,l,u)}break;default:_=z.Utils.compareTextValue(e[p],f,l,u)}if(_&&!a)return d;if(!_&&a)break}if(_)return d}return-1},s.prototype.searchDataRow=function(t,e,i,o,r){void 0===o&&(o=0),void 0===r&&(r=!0);var n=-1;if(t&&0<t.length&&e&&0<e.length){i=i instanceof we.SearchOptions?i:i?new we.SearchOptions(i):null;for(var s=t.length,a=[],l=0;l<s;l++){var u=parseFloat(t[l]);if(isNaN(u)){var h=this.getFieldIndex(t[l]);0<=h&&a.push(h)}else a.push(u)}0<a.length&&(s=this.rowCount,(n=(o=Math.max(0,o))<s?this.$_searchDataRow(a,e,i,o,s-1):-1)<0&&r&&0<o&&(n=this.$_searchDataRow(a,e,i,0,o-1)))}return n},s.prototype.$_searchData=function(t,e,i,o,r,n){var s=this.rowCount;if(s<1)return null;for(var a=i&&i.caseSensitive,l=i&&i.partialMatch,u=this.fieldCount,h=t.length,c=null,p=[],d=0;d<u;d++)p[d]=this.getField(d).dataType;o=Math.max(0,o),r=Math.min(s-1,r),(n=Math.max(0,n))>=t.length&&(o++,n=0);for(var _=o;_<=r;_++)for(d=o<_?0:n;d<h;d++){var f=t[d];if(0<=f&&f<u){var y=this.getValue(_,f),m=!1;switch(p[f]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(e instanceof Date)m=z.Utils.compareTextValue(e,y,a,l);else{if(!c){var g=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";c=new Lt.DateTimeConverter(g)}m=z.Utils.compareTextValue(e,y?c.getText(y):y,a,l)}break;default:m=z.Utils.compareTextValue(e,y,a,l)}if(m)return{dataRow:_,fieldIndex:f,searchFieldIndex:d}}}return null},s.prototype.searchData=function(t,e,i,o,r,n){void 0===o&&(o=0),void 0===r&&(r=0),void 0===n&&(n=!0);var s=i instanceof we.SearchCellOptions?i:i?new we.SearchCellOptions(i):null,a=null;if(!t||t.length<1){t=[];for(var l=this.getFields(),u=0;u<l.length;u++)t.push(l[u].orgFieldName)}if(t&&0<t.length&&null!=e){var h,c,p=t.length,d=[];for(h=0;h<p;h++)c=parseFloat(t[h]),isNaN(c)?d.push(this.getFieldIndex(t[h])):d.push(c);0<d.length&&(p=this.rowCount,o=Math.max(0,o),r=Math.max(0,r),!(a=o<p?this.$_searchData(d,e,s,o,p-1,r):null)&&n&&0<o&&(a=this.$_searchData(d,e,s,0,o-1,0)),a&&(a.fieldName=this.getOrgFieldName(a.fieldIndex)))}return a},s.prototype.isDataChanged=function(t,e){if(this._rowStates[t]!==x.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(t),this._checkFieldIndex(e),this._orgValues&&this._orgValues[t]){var i=this._orgValues[t][e],o=this.getValue(t,e),r=this.getField(e);return r&&r.dataType!==W.ValueType.OBJECT&&!r.sameValues(i,o)}return!1},s.prototype.undo=function(){this.canUndo&&this._commands.undo()},s.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},s.prototype.clearCommandStack=function(){this._commands.flush()},s);function s(t){void 0===t&&(t=!1);var e=n.call(this)||this;return e._points=[],e._nextPoint=0,e._values=[],e._rowIds=[],e._rowStates=[],e._orgValues=null,e._needRestore=!1,e._deletedCount=0,e._nextRowId=0,t&&(e._commands=new Ee.LocalDataCommandStack(e)),e}e.LocalDataProvider=r});t(Me);Me.LocalDataProvider;var Ae=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Q.GridBaseOptions,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._expanderWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"iconImages",{get:function(){return this._iconImages},set:function(t){t!=this._iconImages&&(this._iconImages=t,this._icons=t&&this.grid&&this.grid.getImageList(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(t){(t=Math.max(0,t))!=this._iconWidth&&(this._iconWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){(t=Math.max(0,t))!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){t!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){t!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){t!=this._expandWhenRightKey&&(this._expandWhenRightKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){t!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"icons",{get:function(){return this._icons},enumerable:!0,configurable:!0}),s);function s(t){var e=r.call(this,t)||this;return e._expanderWidth=17,e._lineVisible=!0,e._showCheckBox=!1,e._defaultIcon=-1,e._iconWidth=0,e._iconHeight=0,e._collapseWhenLeftKey=!0,e._collapseWhenCtrlKey=!0,e._expandWhenRightKey=!0,e._expandWhenCtrlKey=!0,e._expandedIconUrl="images/tree-expanded.png",e._collapsedIconUrl="images/tree-collapsed.png",e}e.TreeOptions=n});t(Ae);Ae.TreeOptions;var Ve=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=_e.CellHandle,i(s,r),Object.defineProperty(s.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),s.prototype._createDom=function(){return null},s);function s(t){var e=r.call(this,t,"rowGroupExpandHandle")||this;return e._expanded=!1,e.clickable=!0,e}e.TreeExpandHandle=n;var a;a=nt.VisualElement,i(l,a),l.prototype._getCssSelector=function(){throw new Error("Method not implemented.")},l.prototype._doDraw=function(t){throw new Error("Method not implemented.")};function l(){return null!==a&&a.apply(this,arguments)||this}var u,h=(u=gt.DataCellElement,i(c,u),c.prototype._doDispose=function(){this._expanderDom=null,this._checkDom=null,this._iconDom=null,this._valueDom=null,u.prototype._doDispose.call(this)},c.prototype._doUpdateContent=function(t,e,i){var o=e.item,r=i.style;this._expander.expanded=o.expanded,r.textAlign="left",r.textIndent=16*(o.level-1)+"px",i.appendChild(this._expanderDom),this._expanderDom.className=o.isLeaf?"rg-tree-leaf":this._expander.expanded?"rg-tree-expanded":"rg-tree-collapsed",i.appendChild(this._iconDom),this._iconDom.src=t.getTreeIcon(o)||"",i.appendChild(this._checkDom),i.appendChild(this._valueDom),this._valueDom.textContent=this.text},c.prototype._doLayoutContent=function(t){var e=this._expanderDom;this._expander.setBounds(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight)},c);function c(){var t=u.call(this,"treeCellView")||this;t._expander=new n(t),t.addChild(t._expander),t._expanderDom=document.createElement("span");var e=t._expanderDom.style,i=t._checkDom=document.createElement("input");return i.type="checkbox",i.className="rg-checkbox",i.style.display="inline-block",(e=i.style).marginLeft=e.marginRight="2px",t._iconDom=document.createElement("img"),(e=t._iconDom.style).marginLeft=e.marginRight="2px",e.verticalAlign="middle",t._valueDom=document.createElement("span"),t}var p,d=(p=mt.DataCellRenderer,i(_,p),_.prototype._doDispose=function(){p.prototype._doDispose.call(this)},Object.defineProperty(_.prototype,"styleName",{get:function(){return _.STYLE_NAME},enumerable:!0,configurable:!0}),_.prototype.renderCell=function(t,e,i,o,r){var n,s,a,l,u,h=e.item,c=o.childElementCount;0==c||r?(0<c&&z.Utils.clearChildren(o),n=document.createElement("span"),o.appendChild(n),(s=document.createElement("input")).type="checkbox",s.className="rg-checkbox",s.style.display="inline-block",(u=s.style).marginLeft=u.marginRight="2px",o.appendChild(s),(u=(a=document.createElement("img")).style).marginLeft=u.marginRight="2px",u.verticalAlign="middle",o.appendChild(a),l=document.createElement("span"),o.appendChild(l)):(n=o.children[0],s=o.children[1],a=o.children[2],l=o.children[3]),n.className=h.isLeaf?"rg-tree-leaf":h.expanded?"rg-tree-expanded":"rg-tree-collapsed",a.src=t.getTreeIcon(h)||"",l.textContent=this._makeText(t,e),o.style.setProperty("padding-left",16*(h.level-1)+"px","important")},_.STYLE_NAME="rg-renderer "+(_.STYLE="rg-tree-renderer"),_.Default=new _,_);function _(){return p.call(this)||this}e.TreeCellRenderer=d;var f,y=(f=gt.RowElement,i(m,f),m.prototype.isTreeExpander=function(t){var e=t.className;return"rg-tree-expanded"==e||"rg-tree-collapsed"==e},m.prototype._getRenderer=function(t,e){return 0==e.dataColumn.index?d.Default:f.prototype._getRenderer.call(this,t,e)},m);function m(){var t=f.call(this,"treeItemView")||this;return t._treeCellView=new h,t.addChild(t._treeCellView),t}e.TreeItemElement=y;var g,b=(g=bt.GridBodyElement,i(v,g),v.prototype.createRowElement=function(){return new y},v);function v(t){return g.call(this,t)||this}e.TreeBodyElement=b;var C,w=(C=nt.LayerElement,i(E,C),E.prototype._doDispose=function(){this._linePool=null,this._lines=null,C.prototype._doDispose.call(this)},Object.defineProperty(E.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},enumerable:!0,configurable:!0}),E.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},E.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var r=o.level;if(1<r||0<o.childIndex){for(var n=0;n<r;n++){var s=o.getAncestor(n);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(n+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}0<o.childIndex&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=e.getItem(i),u=l.parent;(n=l.childIndex)<u.count-1&&((a=u.getItem(n+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),l,a,u.level)),(u=l)&&u.expanded&&0<u.count&&((a=u.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),l,a)),this.$_drawHorzLine(t,this.$_borrowLine(),l)}}}},E.prototype._initDom=function(t){C.prototype._initDom.call(this,t),t.style.setProperty("pointer-events","none","important")},E.prototype._doDraw=function(t){},E.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=document.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},E.prototype.$_hideAll=function(){for(var t=this._lines.length-1;0<=t;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},E.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},E.prototype.$_setBounds=function(t,e,i,o,r){var n=t.style;n.left=e+"px",n.top=i+"px",n.width=1==o?"1px":o+"px",n.height=1==r?"1px":r+"px"},E.prototype.$_drawVertLine=function(t,e,i,o,r){var n=t.topIndex,s=r*this._levelWidth+this._levelWidth/2,a=0,l=this.height;if(i){var u=t.getItemBounds(i.index-n),h=i instanceof se.TreeItem&&i.hasChildren?this._handleHeight:0;a=u.y+u.height/2+h/2}o&&(u=t.getItemBounds(o.index-n),h=o instanceof se.TreeItem&&o.hasChildren?this._handleHeight:0,l=u.y+u.height/2-h/2),this.$_setBounds(e,s,a,1,l-a)},E.prototype.$_drawHorzLine=function(t,e,i){var o,r=t.topIndex,n=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth;i.hasChildren&&(n+=this._handleWidth/2);var a=t.getItemBounds(i.index-r);o=a.y+a.height/2,this.$_setBounds(e,n,o,s-n,1)},E.prototype.$_drawChildLine=function(t,e,i,o){var r,n=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-n);if(r=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-n);var u=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-u/2}this.$_setBounds(e,s,r,1,a-r)},E);function E(t){var e=C.call(this)||this;return e._levelWidth=16,e._handleWidth=9,e._handleHeight=9,e._stroke="gray",e._linePool=[],e._lines=[],e._startIndex=-1,e._endIndex=-1,e._treeView=t,e}e.TreeLinesElement=w});t(Ve);Ve.TreeExpandHandle,Ve.TreeCellRenderer,Ve.TreeItemElement,Ve.TreeBodyElement,Ve.TreeLinesElement;var Ne=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r;r=zt.GridDelegate,i(n,r),n.prototype.createRenderer=function(t){return new Ve.TreeCellRenderer};function n(){return null!==r&&r.apply(this,arguments)||this}var a,s=(a=Ut.GridSelectionTool,i(l,a),l.prototype._doDispose=function(){a.prototype._doDispose.call(this)},l.prototype._doKeyDown=function(t){return a.prototype._doKeyDown.call(this,t)},l.prototype._doColumnHeaderClicked=function(t,e){},l.prototype._doElementClicked=function(t){},l.prototype._doHandleClicked=function(t){},l.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,r=this.findElementAt(e,i,!1),n=this.mouseEventTarget;if(r instanceof Ve.TreeItemElement&&r.isTreeExpander(n)){var s=r._item;s instanceof se.TreeItem&&(s.expanded?o.collapse(s,!1):o.expand(s,!1,!1))}else a.prototype._doMouseDown.call(this,t)},l);function l(t){return a.call(this,t,"treeViewSelectionTool")||this}var u,h=(u=Ce.GridContainer,i(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},Object.defineProperty(c.prototype,"treeView",{get:function(){return this.gridView},enumerable:!0,configurable:!0}),c.prototype._createGridView=function(){return new b(this)},c.prototype._createDefaultTool=function(){return new s(this)},c);function c(t){return u.call(this,t)||this}e.TreeContainer=h;var p,d=(p=Z.GridCell,i(_,p),Object.defineProperty(_.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),_);function _(){return p.call(this,"treeItemExpanderCell")||this}var f,y=(f=Z.GridCell,i(m,f),Object.defineProperty(m.prototype,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.groupText)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),m);function m(){return f.call(this,"treeItemFooterCell")||this}var g,b=(g=ue.GridBase,i(v,g),v.prototype._doDispose=function(){g.prototype._doDispose.call(this)},Object.defineProperty(v.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"linesView",{get:function(){return this._linesView},enumerable:!0,configurable:!0}),v.prototype.getLevels=function(t){return this._rs.getLevels(t)},v.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(X.CellIndex.temp(this,t)),this._expanderCell},v.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},v.prototype.expand=function(t,e,i){this.isItemEditing(null)||this._rs.expand(t,e,i)},v.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},v.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},v.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},v.prototype.getTreeIcon=function(t){var e=this._treeOptions.icons;if(e){var i=t.iconIndex;if((i<0||i>=e.count)&&(i=this._treeOptions.defaultIcon),0<=i&&i<e.count)return e.getImage(i)}return null},v.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},v.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},v.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.row)}}else e=this._rs.getCheckedRows();return e},v.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.dataRow)}}else e=this._rs.getCheckedRowIds();return e},v.prototype.checkChildren=function(t,e,i,o,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);r?l.checkable&&l.setChecked(e,n):l.setChecked(e,n),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,r,n)}},v.prototype.resetCheckables=function(){this._rs.resetCheckables()},v.prototype.applyCheckables=function(){this._rs.applyCheckables()},Object.defineProperty(v.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"summarizer",{get:function(){throw new Error("Method not implemented.")},enumerable:!0,configurable:!0}),v.prototype._initStyles=function(){g.prototype._initStyles.call(this),this._treeOptions=new Ae.TreeOptions(this)},v.prototype._createItemSource=function(){return new le.TreeGridItemProvider(!0)},v.prototype._createSidePane=function(){return this._linesView=new Ve.TreeLinesElement(this),this.addElement(this._linesView),g.prototype._createSidePane.call(this)},v.prototype.addMasks=function(){},v.prototype._createLayoutManager=function(){return new w(this)},v.prototype._createBodyView=function(t){return new Ve.TreeBodyElement(t)},v.prototype._createFixedBodyView=function(t){return g.prototype._createFixedBodyView.call(this,t)},v.prototype._createRightBodyView=function(t){return g.prototype._createRightBodyView.call(this,t)},v.prototype._visualObjectChanged=function(t){g.prototype._visualObjectChanged.call(this,t),U.CheckBar},v.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},v.prototype._doCanInsert=function(t,e,i){return t&&(0<t.count||!i||0==t.level||this.editOptions.appendable)},v.prototype.getSummarizer=function(){return this._rs.summarizer},v.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},v.prototype.getSortFields=function(){return this._rs.getSortFields()},v.prototype.getSortDirections=function(){return this._rs.getSortDirections()},v.prototype.getSortCases=function(){return this._rs.getSortCases()},v.prototype._doSortItems=function(t,e,i){this._rs.orderBy(t,e,i)},v.prototype._doColumnFiltersChanged=function(t,e){},v.prototype.$_doLayout=function(t,e){this._treeOptions,g.prototype.$_doLayout.call(this,t,e)},v.prototype.assignImageList=function(t){},v.prototype.refreshView=function(){g.prototype.refreshView.call(this)},v.prototype.getEditBounds=function(t){return g.prototype.getEditBounds.call(this,t)},v.prototype.updatePastedRow=function(t,e,i){if(t instanceof se.TreeItem){var o=t.row;o&&(i?o.updateStrict(e):o.update(e))}},v.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);e.rootRow.addChild(i,!1)}},Object.defineProperty(v.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),v.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},v.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},v.prototype.execute=function(t){this._rs.execute(t)},v.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},v.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},v.prototype.onItemProviderReset=function(t){this._currentRowId=-1,g.prototype.onItemProviderReset.call(this,t)},v.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(v.CHANGED,e)},v.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,!0},v.prototype.onTreeItemProviderExpanded=function(t,e){},v.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,!0},v.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(v.COLLAPSED,e)},v.EXPANDING="onTreeViewExpanding",v.EXPANDED="onTreeViewExpanded",v.COLLAPSING="onTreeViewCollapsing",v.COLLAPSED="onTreeViewCollapsed",v.CHANGED="onTreeViewChanged",v);function v(t){var e=g.call(this,t)||this;return e._expanderCell=new d,e._footerCell=new y,e._focusedRow=-1,e.itemSource=e._rs=e._createItemSource(),e}e.TreeView=b;var C,w=(C=vt.GridLayoutManager,i(E,C),E.prototype._doLayout=function(t){C.prototype._doLayout.call(this,t);var e=this.grid,i=e.linesView;if(i){var o=(0<this.fixedLayoutCount?this.fixedBodyBounds:this.bodyBounds).clone();0<this.layoutCount?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,i.setRect(o),i.levelWidth=16,i.setRange(e,this.topIndex,Math.min(e.itemCount,this.topIndex+this.itemCount)-1),i.layout(this)}},E);function E(t){return C.call(this,t)||this}e.TreeGridLayoutManager=w});t(Ne);Ne.TreeContainer,Ne.TreeView,Ne.TreeGridLayoutManager;var je=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},s.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);0<=e&&(this._tags.splice(e,1),t.disconnect())}},s.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},s.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},s.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},s.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},s.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},s.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},s.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},s);function s(t){var e=r.call(this)||this;return e._tags=new Array,e._owner=t,e}e.TreeDataTagCollection=n});t(je);je.TreeDataTagCollection;var Be=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(c,r),c.csvToArray=function(t,e,i,o,r,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),void 0===n&&(n=",");for(var s=[],a=[],l=e.length,u=0,h=[],c=!1,p=!1;u<l;){var d=e.charAt(u);'"'==d?c?p&&'"'==e.charAt(u+1)?(h.push(d),u++):p?(p=!1,r||h.push(d)):h.push(d):(c=p=!0,r||h.push(d)):p||d!=n&&"\r"!=d&&"\n"!=d?(c=!0,h.push(d)):(d==n?a.push(h.join("")):"\r"!=d&&"\n"!=d||(a.push(h.join("")),s.push(a),a=[],"\n"==e.charAt(u+1)&&u++),c=!(h=[])),u++}p&&h.splice(0,0,'"'),0<h.length&&a.push(h.join("")),0<a.length&&s.push(a),0<i&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var _=t.getFields(),f=_.length,y=0<f,m=0,g=s.length;m<g;m++){a=s[m],y&&a.length>f&&(a.length=f);for(var b=0;b<f;b++)a[b]=_[b].readValue(a[b])}return s},c.xmlToRow=function(t,e,i){for(var o,r,n=t.childNodes,s=e.length,a=new Array(s),l=0,u=n.length;l<u;l++){var h,c=n[l];0<=(h=i.indexOf(c.tagName))&&(a[h]=e[h].readValue(c.nodeValue||c.hasChildNodes()&&3===c.childNodes[0].nodeType&&c.childNodes[0].nodeValue))}for(l=0;l<s;l++)void 0===a[l]&&(a[l]=e[l].readValue((o=t,r=i[l],o&&o.getAttribute(r))));return a},c.xmlToArray=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var r=null,n=c.xmlToRow,s=e?e.length:0;if(s&&(i=Math.max(0,i),o<0&&(o=s),o=Math.min(s-i,o))){var a=t.getFields(),l=t.getOrgFieldNames();a.length,r=new Array(o);for(var u=0;u<o;u++){var h=n(e[u+i],a,l);r[u]=h}}return r},c);function c(){return null!==r&&r.apply(this,arguments)||this}e.DataHelper=n});t(Be);Be.DataHelper;var Fe=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function u(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var r=0,n=o.length;r<n;r++){var s=o[r];s.tagName===e&&i.push(s)}}return i}Object.defineProperty(e,"__esModule",{value:!0});var r,n,s,a=(r=ce.Base,i(l,r),l.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(0<s&&s<a){var l=n.substring(0,s),u="$"!=l?i[l]:i;if(Array.isArray(u)){l=n.substring(s+1,a);var h=parseInt(l);i=0<=h&&h<u.length?u[h]:null}else i=null}else"$"!=n&&(i=i[n]);if(!i)break}}return Array.isArray(i)?i:null},l.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(0<s&&s<a){var l=n.substring(0,s);(i=u(i?i[0]:t,l))&&(l=n.substring(s+1,a),i=i[parseInt(l)])}else i=u(i?i[0]:t,n);if(!i)break}}return i},l);function l(){return null!==r&&r.apply(this,arguments)||this}e.DataPath=a,(s=n=e.DataFillMode||(e.DataFillMode={}))[s.SET=0]="SET",s[s.APPEND=1]="APPEND",s[s.INSERT=2]="INSERT",s[s.UPDATE=3]="UPDATE";var h,c=(h=ce.Base,i(p,h),p);function p(t){var e=h.call(this)||this;if(e.fillMode=n.SET,e.fillPos=0,e.count=-1,e.rootArray=!0,e.rows="row",e.start=0,e.delimiter=",",e.quoted=!1,e.parentId=0,e.childrenField=null,e.treeField=null,e.iconField=null,e.needSorting=!1,e.itemIndex=-1,t){for(var i in t.hasOwnProperty("append")&&(e.fillMode=n.APPEND),t.hasOwnProperty("fillMode")&&(e.fillMode=t.fillMode),t.hasOwnProperty("fillPos")&&(e.fillPos=t.fillPos),t.hasOwnProperty("count")&&(e.count=t.count),t.hasOwnProperty("rootArray")&&(e.rootArray=t.rootArray),t.hasOwnProperty("rows")&&(e.rows=t.rows),t.hasOwnProperty("start")&&(e.start=t.start),t.hasOwnProperty("delimiter")&&(e.delimiter=t.delimiter),t.hasOwnProperty("quoted")&&(e.quoted=t.quoted),t.hasOwnProperty("itemIndex")&&(e.itemIndex=t.itemIndex),t)void 0!==t[i]&&(e[i]=t[i]);e.parentId=t.parentId||t.parent,e.childrenField=t.childrenField||t.children,e.treeField=t.treeField||t.tree,e.iconField=t.iconField||t.icon,e.needSorting=t.needSorting||t.sorting}return e}e.DataFillOptions=c});t(Fe);Fe.DataPath,Fe.DataFillMode,Fe.DataFillOptions;var $e=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},o.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},o.getNodeValue=function(t){return t.firstChild.nodeValue},o.getAttr=function(t,e){return t.getAttribute(e)},o.setAttr=function(t,e,i){t.setAttribute(e,i)},o.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},o.addChildWithAttr=function(t,e,i,o,r){var n=t.createElement(i);return n.setAttribute(o,r),e.appendChild(n),n},o.addChildWithValue=function(t,e,i,o){var r=t.createElement(i);return r.nodeValue=o,e.appendChild(r),r},o.parseXml=function(e){var i=null;try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(e)}catch(t){if(i)throw t;i=(new window.DOMParser).parseFromString(e,"text/xml")}return i},o);function o(){}e.XmlUtils=i});t($e);$e.XmlUtils;var Ge=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"provider",{get:function(){return this._ds},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),s.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},s.prototype._objectToArray=function(t,e){for(var i=e.fieldCount,o=new Array(i),r=0;r<i;r++){var n=e.getOrgFieldName(r);t.hasOwnProperty(n)&&(o[r]=t[n])}return e._internalCalculateValues(o,-1),o},s.prototype._createRow=function(t,e,i){var o=new Ke.TreeDataRowImpl(this._ds,i);return this._ds._internalCalculateValues(o._values,o.rowId),0<=t&&this._ds.setHasChildren(o,i[t]),0<=e&&this._ds.setIconIndex(o,i[e]),o},s.prototype._createRow2=function(t,e,i){var o=new Ke.TreeDataRowImpl(this._ds,i);return this._ds._internalCalculateValues(o._values,o.rowId),void 0!==t&&this._ds.setHasChildren(o,t),void 0!==e&&this._ds.setIconIndex(o,e),o},s.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},s.prototype._addRow=function(t,e,i,o,r){var n=this._createRow(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},s.prototype._addRow2=function(t,e,i,o,r){var n=this._createRow2(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},s);function s(t,e){var i=r.call(this)||this;return i._rowCount=0,i._ds=t,i._rootRow=e,i}e.TreeDataSource=n;var a,l=(i(u,a=n),u.prototype._loadData=function(t,e,i,o,r,n){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],u=0;u<a;u++)l[u]=u,Array.isArray(t[u])||(t[u]=this._objectToArray(t[u],s));o&&this.$_sortRows(l,t,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,t,i,r,n)}finally{s.endUpdate(!1)}return this.insertedCount},u.prototype.$_sortRows=function(t,r,n,e,i){function o(t,e){var i=r[t][n],o=r[e][n];return i==o?0:i<o?-1:1}do{var s=e,a=i,l=t[Math.floor((e+i)/2)];do{for(;!(o(l,t[s])<=0);)s++;for(;!(0<=o(l,t[a]));)a--;if(s<=a){if(s!=a){var u=t[s];t[s]=t[a],t[a]=u}s++,a--}}while(s<=a);e<a&&this.$_sortRows(t,r,n,e,a),e=s}while(e<i)},u.prototype.$_buildTree=function(s,t,e,a,i,o){function r(t,e,i,o){for(var r=o[a];e!=s;){var n=e.getValue(a);if(t.parentCallback){if(t.parentCallback(n,r))return e}else if(0==r.indexOf(n))return e;e=e.parent}return s}var n=t[0],l=this._createRow(i,o,e[n]),u=r(this,s,0,e[n]);if(u._insertChild(u.count,l,!0,!0),this._rowAdded(s,l),1<t.length)for(var h=t.length,c=l,p=1;p<h;p++)n=t[p],l=this._createRow(i,o,e[n]),(u=r(this,c,0,e[n]))._insertChild(u.count,l,!0,!0),this._rowAdded(s,l),c=l},u);function u(t,e){return a.call(this,t,e)||this}var h,c=(i(p,h=l),p.prototype.load=function(t,e,i,o,r,n){return this._loadData(e,t,i,o,r,n)},p);function p(t,e){return h.call(this,t,e)||this}e.ArrayTreeSource=c;var d,_=(i(f,d=l),f.prototype.load=function(t,e,i,o,r,n){var s=Be.DataHelper.csvToArray(this.provider,e);return this._loadData(s,t,i,o,r,n)},f);function f(t,e){return d.call(this,t,e)||this}e.CsvTreeSource=_;var y,m=(i(g,y=n),g.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n=Fe.DataPath.extractJson(e,i);if(n&&0<n.length){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,n,i,o,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},g.prototype.load2=function(t,e,i,o,r,n){if(this._prepareLoad(t),e){var s=Fe.DataPath.extractJson(e,i);if(s&&0<s.length){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,o,r,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},g.prototype.$_buildJsonTree=function(t,_,e,f,y,m){var i=t.getOrgFieldNames();!function t(e,i,o,r){for(var n=r.length,s=0,a=o.length;s<a;s++){for(var l=o[s],u=new Array(n),h=0;h<n;h++){var c=r[h];l.hasOwnProperty(c)&&(u[h]=l[c])}var p=e._addRow(_,i,y,m,u);if(l.hasOwnProperty(f)){var d=l[f];Array.isArray(d)&&0<d.length&&t(e,p,d,r)}}}(this,_,e,i)},g.prototype.$_buildJsonTree2=function(t,_,e,f,y,m){var i=t.getOrgFieldNames();!function t(e,i,o,r){for(var n=r.length,s=0,a=o.length;s<a;s++){for(var l=o[s],u=new Array(n),h=0;h<n;h++){var c=r[h];l.hasOwnProperty(c)&&(u[h]=l[c])}var p=e._addRow2(_,i,l[y],l[m],u);if(l.hasOwnProperty(f)){var d=l[f];Array.isArray(d)&&0<d.length&&t(e,p,d,r)}}}(this,_,e,i)},g);function g(t,e){return y.call(this,t,e)||this}e.JsonTreeSource=m;var b,v=(i(C,b=l),C.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n="string"==typeof e?$e.XmlUtils.parseXml(e):e;if(n){var s=Fe.DataPath.extractXml(n.documentElement,i);if(s&&0<s.length){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,o,r)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},C.prototype.$_buildXmlTree=function(t,p,e,d,_,f){!function t(e,i,o,r,n){for(var s=0,a=o.length;s<a;s++){var l=o[s],u=Be.DataHelper.xmlToRow(l,r,n),h=e._addRow(p,i,_,f,u),c=Fe.DataPath.extractXml(l,d);c&&0<c.length&&t(e,h,c,r,n)}}(this,p,e,t.getFields(),t.getOrgFieldNames())},C);function C(t,e){return b.call(this,t,e)||this}e.XmlTreeSource=v});t(Ge);Ge.TreeDataSource,Ge.ArrayTreeSource,Ge.CsvTreeSource,Ge.JsonTreeSource,Ge.XmlTreeSource;var He=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=Ee.DataEditCommand,i(s,r),s);function s(t){return r.call(this,t)||this}e.LocalTreeDataCommand=n;var a,l=(a=v.EditCommandStack,i(u,a),u);function u(){return null!==a&&a.apply(this,arguments)||this}e.LocalTreeDataCommandStack=l});t(He);He.LocalTreeDataCommand,He.LocalTreeDataCommandStack;var Ue=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=He.LocalTreeDataCommand,i(s,n),s.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},s.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},s.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},s);function s(t,e,i,o){var r=n.call(this,t)||this;return r._row=e,r._values=r._cloneRow(i),r._strict=o,r}e.UpdateTreeDataCommand=r});t(Ue);Ue.UpdateTreeDataCommand;var We=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=ce.Base,i(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"rowId",{get:function(){return this._rowId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"provider",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"iconIndex",{get:function(){return-1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasChildren",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,r=e.count;o<r;o++){var n=e.getChild(o);i.push(n),t(n,i)}}(this,t),t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&0<=e.rowId;)t.push(e),e=e.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowState",{get:function(){return x.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"values",{get:function(){return null},enumerable:!0,configurable:!0}),s.prototype.getChild=function(t){if(0<=t){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},s.prototype.getChildObjects=function(t,e,i,o){var r=this._children;if(r){var n=[];e=e||"rows",i=i||"iconIndex";for(var s=0,a=r.length;s<a;s++){var l=r[s],u=l.getObject();o&&(u._rowId=l._rowId),t&&(u[e]=l.getChildObjects(t,e,i,o)),u[i]=l.iconIndex,n.push(u)}return n}return null},s.prototype.$_createTreeOutputRows=function(t,e,i){},s.prototype.getOutput=function(t,e){return null},s.prototype.getChildOutputObjects=function(t,e,i,o){var r=this.getChildObjects(e,i,o,!0);return r&&t&&this.$_createTreeOutputRows(r,t,i),r},s.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},s.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},s.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},s.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},s.prototype.removeChild=function(t){return this._removeChild(t,!1)},s.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},s.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],r=[],n=0,s=t.length;n<s;n++){var a=void 0;0<=(a="string"==typeof t[n]?i.getFieldIndex(t[n]):Number(t[n]))&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),r.push(e[n]))}n=0;for(var l=o.length;n<l;n++)o[n]=i.getField(o[n]);return this.$_findChild(o,r)},s.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},s.prototype.clearRowStates=function(t,e){var i=this.provider;if(i){var o=[],r=t?[]:null;this._collectStateRows(o,r);var n=o.length,s=r?r.length:0;if(0!=n||0!=s){if(e)for(var a=0,l=o.length;a<l;a++)o[a]._changeRowState(x.RowState.NONE,!0,!1);else n&&i.changeRowStates(o,x.RowState.NONE);s&&i.deleteRows(r)}}},s.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},s.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||e<=t)throw new g.DataSourceError("Field index is out of bounds: "+t)},s.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},s.prototype._moveChild=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(e<t)for(var o=t;e<o;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i},s.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},s.prototype._insertChild=function(t,e,i,o){var r=this.provider;if(r&&!i){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e)||(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount),this._attach(e),o||e._changeRowState(x.RowState.CREATED,!0,!1),this._doChildAdded(t,e),0))},s.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},s.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t)||(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),0))},s.prototype._removeChild=function(t,e){var i=this.provider;if(!i||e||i._checkClientState()){if(t&&this._children)for(var o=this._children.length;o--;)if(this._children[o]===t){if(!i.softDeleting||!i.checkStates)return this.$_removeChild(t,o,e);switch(t.rowState){case x.RowState.CREATED:if(i.deleteCreated)return this.$_removeChild(t,o,e);t._changeRowState(x.RowState.CREATE_AND_DELETED,!0,!1);break;case x.RowState.DELETED:case x.RowState.CREATE_AND_DELETED:break;default:t._changeRowState(x.RowState.DELETED,!0,!1)}}return!1}},s.prototype._removeChildren=function(){this._children&&0<this._children.length&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},s.prototype._setChildren=function(t){this._children&&0<this._children.length&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&0<(e=t.length)){this._children||(this._children=[]);for(var o=0;o<e;o++){var r=t[o];this._children.push(r),i+=1+r.descendantCount,this._attach(r)}}this._descendantCountChanged(i)},s.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,r=0;r<o;r++){for(var n=this._children[r],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],n.getValue(t[a].index))){s=!1;break}if(s)return n;if(n=n.$_findChild(t,e))return n}return null},s.prototype._collectStateRows=function(t,e){for(var i=this.count;i--;){var o=this.getChild(i),r=o.rowState;!e||r!=x.RowState.DELETED&&r!=x.RowState.CREATE_AND_DELETED?(r!=x.RowState.NONE&&t.push(o),o._collectStateRows(t,e)):e.push(o)}},s.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},s.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},s.prototype._restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreRow(!0,e);return!1},s.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},s.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},s.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},s.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},s.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},s);function s(t){var e=r.call(this)||this;return e._children=null,e._descendantCount=0,e._rowId=t&&t._nextRowId++,e}e.TreeDataRow=n;var a,l=(i(u,a=n),u.prototype._doDispose=function(){this._provider=null,a.prototype._doDispose.call(this)},u.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},Object.defineProperty(u.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"index",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"hasChildren",{get:function(){return!0},enumerable:!0,configurable:!0}),u.prototype.copy=function(){for(var t=new u(null),e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t._provider=this._provider,t},u.prototype._changeRowState=function(t,e,i){return!1},u.prototype.getObject=function(){return null},u.prototype.getValue=function(t){},u.prototype.setValue=function(t,e,i){},u.prototype._attach=function(t){t._parent=this},u.prototype._detach=function(t){t._parent===this&&(t._parent=null)},u.prototype.update=function(t){return!1},u.prototype.updateStrict=function(t){return!1},u.prototype.$_setHasChildren=function(t){},u.prototype.$_setIconIndex=function(t){},u.prototype._keepRow=function(t){},u.prototype._yieldRow=function(t,e){},u.prototype._keepStates=function(t){},u.prototype._yieldStates=function(t,e){},u);function u(t){var e=a.call(this,t)||this;return e._provider=t,e}e.RootTreeRow=l;var h,c=(h=g.DataSource,i(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},p.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},p.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},p.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);0<=e&&this._commandListeners.splice(e,1)},p.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},p.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)},p);function p(){var t=h.call(this)||this;return t._nextRowId=0,t._commandListeners=[],t}e.TreeDataProvider=c});t(We);We.TreeDataRow,We.RootTreeRow,We.TreeDataProvider;var Ke=e(function(t,e){var o,i=he&&he.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var a,l=(a=We.TreeDataRow,i(r,a),r.prototype._doDispose=function(){this._values=null,this._orgValues=null,a.prototype._doDispose.call(this)},Object.defineProperty(r.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"values",{get:function(){return this._values&&this._values.concat()},enumerable:!0,configurable:!0}),r.prototype._attach=function(t){t._parent=this},r.prototype._detach=function(t){t._parent===this&&(t._parent=null)},r.prototype._changeRowState=function(t,e,i){var o=this.provider;if(o&&t!=this._state){var r=this._state;return(this._state=t)==x.RowState.UPDATED&&o._needOrgValues?this._orgValues=this._values.concat():r==x.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),e&&o._stateChanged(this,i),!0}return!1},r.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},r.prototype.setValue=function(t,e,i){var o=this.provider;if(o){if(!o._checkClientState())return;if(o.refreshFieldFormats(),this._checkFieldIndex(t),this._values){if(e!=this._values[t]){var r=null,n=o.checkStates&&(this._state==x.RowState.NONE||!this._state);!i&&n&&o._needOrgValues&&(r=this._values.concat()),this._values[t]=e,o._internalCalculateValues(this._values,this.rowId),!i&&n?(o._needOrgValues&&(this._orgValues=r),this._state=x.RowState.UPDATED,o._stateChanged(this,!1)):o._needRestore&&this.$_restoreState(o),o._valueChanged(this,t)}return}throw new Error("Row data is not loaded")}},r.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++)i[t.getOrgFieldName(o)]=this._values[o];return i}return null},r.prototype.copy=function(){var t=new r(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t},r.prototype.update=function(t){var e=this.provider;return!!e&&(e._commands?e._commands.execute(new Ue.UpdateTreeDataCommand(e,this,t,!1)):this.$_update(e,t,!1,!1))},r.prototype.updateStrict=function(t){var e=this.provider;return!!e&&this.$_update(e,t,!0,!1)},r.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},r.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},r.prototype._keepStates=function(t){},r.prototype._yieldStates=function(t,e){},r.prototype._keepState=function(){return this._state},r.prototype._yieldState=function(t){this._state=t},r.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this)||(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),0))},r.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),a.prototype._clearOrgValues.call(this)},r.prototype._restoreState=function(t,e){var i=this.$_restoreState(this.provider);return i&&e&&e.push(this),a.prototype._restoreState.call(this,t,e),i},r.prototype._restoreRow=function(t,e){var i=!1;if(this._state===x.RowState.UPDATED){var o=this._orgValues;if(o){for(var r=this._values,n=0,s=Math.min(o.length,this.provider.fieldCount);n<s;n++)r[n]=o[n];this._state=x.RowState.NONE,e&&e.push(this),i=!0}}return a.prototype._restoreRow.call(this,t,e),i},r.prototype.$_restoreState=function(t){if(this._state==x.RowState.UPDATED&&this._orgValues){for(var e=this._orgValues,i=this._values,o=this.provider,r=o.strictRestore,n=0,s=o.fieldCount;n<s;n++){var a=i.length>n?i[n]:void 0,l=e.length>n?e[n]:void 0;if(r){if(!o.getField(n).equalValues(a,l))return!1}else if(!o.getField(n).sameValues(a,l))return!1}return this._state=x.RowState.NONE,!0}return!1},r.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,r=[];if(!t||t.length<=0)return null;for(var n=0,s=i.fieldCount;n<s;n++){var a=e.length>n?e[n]:void 0,l=t.length>n?t[n]:void 0,u=i.getField(n);u.calculated||(o?u.equalValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}):u.sameValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}))}return r},r.prototype.$_setHasChildren=function(t){this._hasChildren=t},r.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},r.prototype.$_internalUpdate=function(t,e,i){var o=!1,r=Array.isArray(t),n=this.provider;if(n){var s=Math.min(n.fieldCount,r?t.length:n.fieldCount),a=n.checkStates&&(this._state==x.RowState.NONE||!this._state),l=null;a&&n._needOrgValues&&(l=this._values.concat());for(var u=0;u<s;u++){var h=n.getField(u);if(r||t.hasOwnProperty(h.orgFieldName)){var c=r?t[u]:t[h.orgFieldName];e&&void 0===c||(o=!n._needRestore||o||(e?!h.equalValues(this._values[u],h.readValue(c)):!h.sameValues(this._values[u],h.readValue(c))),this._values[u]=n.getField(u).readValue(c))}}n._internalCalculateValues(this._values,this.rowId),a&&o?(l&&(this._orgValues=l),this._state=x.RowState.UPDATED,i&&n._stateChanged(this,!1)):n._needRestore&&this.$_restoreState(n)}},r);function r(t,e){var i=a.call(this,t)||this;if(i._iconIndex=-1,i._hasChildren=!1,i._parent=null,i._values=null,i._orgValues=null,i._state=x.RowState.NONE,i._extents=0,t&&e){var o=t.fieldCount;Math.min(e.length,o);i._values=new Array(o);for(var r=0,n=Math.min(e.length,o);r<n;r++)i._values[r]=t.getField(r).readValue(e[r])}return i}e.TreeDataRowImpl=l;var n,s=(n=We.TreeDataProvider,i(u,n),u.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,n.prototype._doDispose.call(this)},Object.defineProperty(u.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),u.prototype.addTag=function(t){this._tags.add(t)},u.prototype.removeTag=function(t){this._tags.remove(t)},u.prototype.setRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(0<=s){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Ge.ArrayTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),n},u.prototype.setCsvRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(0<=s){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Ge.CsvTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),n},u.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var r=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),r=new Ge.XmlTreeSource(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(r)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),r},u.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new Ge.JsonTreeSource(this,this._rootRow);this._rowCount=r.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.rowCount},u.prototype.setJsonRows2=function(t,e,i,o,r){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new Ge.JsonTreeSource(this,this._rootRow);this._rowCount=n.load2(null,t,e,i,o,r)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.rowCount},u.prototype.appendDataRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(0<=a){var l=new Ge.ArrayTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),0<s){var u=l.insertedRows;u&&0<(s=u.length)&&this._rowsAdded(t,u)}}}return s},u.prototype.appendCsvRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(0<=a){this.beginUpdate();try{this.refreshFieldFormats();var l=new Ge.CsvTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s},u.prototype.appendXmlRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Ge.XmlTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),0<n){var a=s.insertedRows;a&&0<(n=a.length)&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},u.prototype.appendJsonRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Ge.JsonTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),0<n){var a=s.insertedRows;a&&0<(n=a.length)&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},u.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},u.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},u.prototype.getAllRows=function(){return[]},u.prototype.getJsonRows=function(t,e,i){return[]},u.prototype.getChildCount=function(t){return(t||this._rootRow).count},u.prototype.getRows=function(t){return(t||this._rootRow).children},u.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},u.prototype.getDescendants=function(t,e){e=1<arguments.length?e:0;var i=t||this._rootRow;if(e<=0)return i.descendants;if(e>i.level){var o=[];return function t(e,i,o){for(var r=0,n=e.count;r<n;r++){var s;i.push(s=e.getChild(r)),o>s.level&&t(s,i,o)}}(i,o,e),o}return null},u.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},u.prototype.hasData=function(t){return null!=this.rowById(t)},u.prototype.rowById=function(t){var e=this._rowMap[t];return e||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},u.prototype.createRow=function(t,e,i){var o=null;if(this.refreshFieldFormats(),Array.isArray(t))o=new l(this,t);else if(t){var r=new Array(this.fieldCount);for(var n in t){var s=this.getFieldIndex(n);0<=s&&(r[s]=t[n])}o=new l(this,r)}return o&&(this._internalCalculateValues(o._values,o.rowId),o._iconIndex=e,o._hasChildren=i),o},u.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged()))},u.prototype.removeRows=function(o){function t(t,e){for(var i=e;0<=i;i--)if(o[i].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&o&&!(o.length<1)){o.sort(function(t,e){return t.level-e.level});for(var e=o,i=o.length;i--;)1<o[i].level&&!t(o[i],i-1)&&o.splice(i,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){var r=[];for(i=o.length-1;0<=i;i--){var n=o[i],s=!1;switch(n.rowState){case x.RowState.CREATED:this.deleteCreated||(s=n._changeRowState(x.RowState.CREATE_AND_DELETED,!1,!1),o.splice(i,1));break;case x.RowState.DELETED:case x.RowState.CREATE_AND_DELETED:o.splice(i,1);break;default:s=n._changeRowState(x.RowState.DELETED,!0,!1),o.splice(i,1)}s&&r.push(n)}0<r.length&&this._fireRowStatesChanged(r)}return this.deleteRows(e),!0}},u.prototype.moveRowSibling=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,r=t.index,n=Math.min(Math.max(r+e,0),o-1);return 0!=(e=n-r)&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(r,n),this._fireRowSiblingMoved(t,e),!0)},u.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("parent must not be self.");if(t.isAncestorOf(e))throw new Error("can`t move to child of descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var r=e._children.length;return i=Math.min(Math.max(i,0),r),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof We.RootTreeRow||this.setHasChildren(e,!0),o instanceof We.RootTreeRow||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},u.prototype.toTreeString=function(){return this._rootRow.toTreeString()},u.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},u.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},u.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},u.prototype.$_searchDataRow=function(t,e,i,o,r,n){var s=t.length;if(s<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;for(var l=!o||o.allFields,u=o&&o.caseSensitive,h=o&&o.partialMatch,c=null,p=[],d=0;d<a;d++)p[d]=this.getField(e[d]).dataType;r=Math.max(0,r),n=Math.min(s-1,n);for(var _=r;_<=n;_++){var f=!0;if(f)for(d=0;d<a;d++){var y=this.rowById(t[_]).getValue(e[d]);switch(p[d]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(i[d]instanceof Date)f=z.Utils.compareTextValue(i[d],y,u,h);else{if(!c){var m=/[.]/.test(i[d])?"yyyy.MM.dd":/[/]/.test(i[d])?"yyyy/MM/dd":/[-]/.test(i[d])?"yyyy-MM-dd":"yyyyMMdd";c=new Lt.DateTimeConverter(m)}f=z.Utils.compareTextValue(i[d],y?c.getText(y):y,u,h)}break;default:f=z.Utils.compareTextValue(i[d],y,u,h)}if(f&&!l)return t[_];if(!f&&l)break}if(f)return t[_]}return-1},u.prototype.searchDataRow=function(t,e,i,o,r,n){var s;if(void 0===o&&(o=0),void 0===r&&(r=!0),void 0===n&&(n=null),i=i instanceof we.SearchOptions?i:i?new we.SearchOptions(i):null,null!=n){var a=this.rowById(n);if(!a)return-1;s=this.$_extractTreeRowIds(a.descendants)}else s=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(s)||s.length<=0)return-1;var l=s.length,u=Math.max(0,s.indexOf(o)),h=-1;if(t&&0<t.length&&e&&0<e.length){for(var c=t.length,p=[],d=0;d<c;d++){var _=t[d];if(z.Utils.isNumber(_))p.push(_);else{var f=this.getFieldIndex(t[d]);0<=f&&p.push(f)}}0<p.length&&(h=u<l?this.$_searchDataRow(s,p,e,i,u,l-1):-1)<0&&r&&0<u&&(h=this.$_searchDataRow(s,p,e,i,0,u-1))}return h},u.prototype.$_searchData=function(t,e,i,o,r,n,s){var a=this.rowCount;if(a<1)return null;for(var l=o&&o.caseSensitive,u=o&&o.partialMatch,h=this.fieldCount,c=e.length,p=null,d=[],_=0;_<h;_++)d[_]=this.getField(_).dataType;r=Math.max(0,r),n=Math.min(a-1,n),(s=Math.max(0,s))>=e.length&&(r++,s=0);for(var f=r;f<=n;f++)for(_=r<f?0:s;_<c;_++){var y=!1,m=e[_];if(0<=m&&m<h){var g=this.rowById(t[f]).getValue(m);switch(d[m]){case W.ValueType.DATETIME:case W.ValueType.DATE:if(i instanceof Date)y=z.Utils.compareTextValue(i,g,l,u);else{if(!p){var b=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";p=new Lt.DateTimeConverter(b)}y=z.Utils.compareTextValue(i,g?p.getText(g):g,l,u)}break;default:y=z.Utils.compareTextValue(i,g,l,u)}if(y)return{dataRow:t[f],fieldIndex:m,searchFieldIndex:_}}}return null},u.prototype.searchData=function(t,e,i,o,r,n,s){var a;if(void 0===o&&(o=0),void 0===r&&(r=0),void 0===n&&(n=!0),void 0===s&&(s=-1),i=i instanceof we.SearchCellOptions?i:i?new we.SearchCellOptions(i):null,0<=s){var l=this.rowById(s);if(!l)return null;a=this.$_extractTreeRowIds(l.descendants)}else a=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(a)||a.length<=0)return null;var u=a.length,h=null;if(o=Math.max(0,a.indexOf(o)),!t||t.length<1){t=[];for(var c=this.getFields(),p=0;p<c.length;p++)t.push(c[p].orgFieldName)}if(t&&0<t.length&&null!=e){for(var d=t.length,_=[],f=0;f<d;f++){var y=t[f];z.Utils.isNumber(y)?_.push(y):_.push(this.getFieldIndex(t[f]))}0<_.length&&(r=Math.max(0,r),!(h=o<u?this.$_searchData(a,_,e,i,o,u-1,r):null)&&n&&0<o&&(h=this.$_searchData(a,_,e,i,0,o-1,0)),h&&(h.fieldName=this.getOrgFieldName(h.fieldIndex)))}return h},u.prototype.$_hideDataRows=function(t,e){if(!(null==t||t.length<1)){for(var i=this._hiddenRows.length,o=[],r=0,n=t.length;r<n;r++){var s=t[r];if(null!=this._findRowById(s))if(o.push(s),e)this._hiddenRows.indexOf(s)<0&&this._hiddenRows.push(s);else{var a=this._hiddenRows.indexOf(s);0<=a&&this._hiddenRows.splice(a,1)}}this._hiddenRows.length!==i&&this._fireRowsHiddenChanged(o,e)}},u.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},u.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},u.prototype.clearHiddenRows=function(){if(0<this._hiddenRows.length){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},u.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort(function(t,e){return t-e}),t},u.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&0<=this._hiddenRows.indexOf(t)},Object.defineProperty(u.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!0,configurable:!0}),u.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=Number.MAX_VALUE,t.max=Number.MIN_VALUE,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},u.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var r=0,n=t.field,s=0,a=NaN,l=NaN,u=0;u<o;){var h=e[u++].getValue(n);if(!isNaN(h)){s=a=l=h,r++;break}}for(;u<o;)h=e[u++].getValue(n),isNaN(h)||(s+=h,h<a&&(a=h),l<h&&(l=h),r++);if(t.count=o,0<r&&(t.sum=s,t.min=a,t.max=l,t.avg=s/o,t.dataCount=r,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,i))if(1<o){for(var c=0,p=t.avg,d=0;d<o;d++)h=e[d++].getValue(n),isNaN(h)||(c+=Math.pow(h-p,2));t.varsp=c/o,t.vars=c/(o-1)}else t.varsp=0,t.vars=0;return!0},Object.defineProperty(u.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"immediateUpdate",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),u.prototype.getRow=function(t){return this.rowById(t).values},u.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&0<t.length){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;0<=i;i--){var o=t[i],r=o&&o.parent;r&&r._removeChild(o,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},u.prototype.equalValues=function(t,e,i){if(e===i)return!0;var o=this._fields[t],r=e.getValue(t),n=i.getValue(t);return o.equalValues(r,n)},u.prototype.sameValues=function(t,e,i){if(e===i)return!0;var o=this._fields[t],r=e.getValue(t),n=i.getValue(t);return o.sameValues(r,n)},u.prototype.compareValues=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),r=i.getValue(t);return null===o?null===r?0:-1:null===r?1:r<o?1:o<r?-1:0},u.prototype.compareNumbers=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),r=i.getValue(t);return isNaN(o)?isNaN(r)?0:-1:isNaN(r)?1:r<o?1:o<r?-1:0},u.prototype.compareBools=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),r=i.getValue(t);return o&&!r?1:!o&&r?-1:0},u.prototype.compareDates=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),r=i.getValue(t);return o instanceof Date?r instanceof Date?r<o?1:o<r?-1:0:1:r instanceof Date?-1:0},u.prototype.compareObjects=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0},u.prototype.$_getSortedRows=function(t){var e;switch(this.getField(t).dataType){case W.ValueType.NUMBER:e=this.compareNumbers;break;case W.ValueType.DATETIME:e=this.compareDates;break;case W.ValueType.BOOLEAN:e=this.compareBools;break;case W.ValueType.OBJECT:e=this.compareObjects;break;default:e=this.compareValues}var i=this.getDescendants(this._rootRow,0);return this.$_sortRows(i,t,e.bind(this),0,i.length-1),i},u.prototype.getDistinctValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=W.SortDirection.ASCENDING),this._checkFieldIndex(t);var o=[];if(e<0&&(e=this.getDescendantCount(this._rootRow)),0<e){var r=this.getField(t).dataType==W.ValueType.NUMBER,n=this.$_getSortedRows(t);i===W.SortDirection.DESCENDING&&n.reverse(),o.push(n[0]._values[t]);for(var s=1,a=n.length;s<a&&!(o.length>=e);s++)if(!this.equalValues(t,n[s-1],n[s])){var l=n[s]._values[t];-1!=o.indexOf(l)||r&&isNaN(l)||o.push(l)}}return o},u.prototype._doFieldsReset=function(){n.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},u.prototype.refreshClients=function(){this._fireRefreshClient()},u.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(0<this.fieldCount&&0<this._rootRow.count){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,data:e}),i}return-1}},u.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._fireReset();break}}},u.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},u.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},u.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},u.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},u.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},u.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},u.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},u.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},u.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},u.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},u.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},u.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},u.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},u.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged())},u.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},u.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged())},u.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},u.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},u.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},u.prototype.getRowId=function(t){throw new Error("Method not implemented.")},u.prototype.getValue=function(t,e){throw new Error("Method not implemented.")},u.prototype.setValue=function(t,e,i){throw new Error("Method not implemented.")},u.prototype.getRowObject=function(t){throw new Error("Method not implemented.")},u.prototype.getRowState=function(t){var e=this.rowById(t);return e?e.rowState:x.RowState.NONE},u.prototype.setRowState=function(t,e,i){var o=this.rowById(t);if(o&&(this.checkStates||i)){var r=o.rowState;e!=r&&o._changeRowState(e,!0,!!x.isDeletedState(r)||void 0)}},u.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],r=0;r<i;r++){var n=t[r];n._changeRowState(e,!1,!1)&&o.push(n)}0<o.length&&this._fireRowStatesChanged(o)},u.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},u.prototype.$_collectStateRows=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getChild(o);n.rowState==e&&i.push(n.rowId),this.$_collectStateRows(n,e,i)}},u.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},u.prototype.$_collectAllStateRows=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getChild(i);switch(r.rowState){case x.RowState.CREATED:e.created.push(r.rowId);break;case x.RowState.UPDATED:e.updated.push(r.rowId);break;case x.RowState.DELETED:e.deleted.push(r.rowId);break;case x.RowState.CREATE_AND_DELETED:e.createAndDeleted.push(r.rowId)}this.$_collectAllStateRows(r,e)}},u.prototype.getAllStateRows=function(){var t={created:[],updated:[],deleted:[],createAndDeleted:[]};return this.$_collectAllStateRows(this._rootRow,t),t},u.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var r=o?null:[],n=0,s=t.length;n<s;n++){var a=this.rowById(t[n]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&r.push(a)}!o&&0<r.length&&this._fireRowStatesChanged(r)}},u.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,r=t.count;o<r;o++){var n=t.getChild(o);0<=e.indexOf(n.rowState)&&i++,i+=this.$_getRowStateCount(n,e)}return i},u.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},u.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},u.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):1<e.length&&this._fireRowStatesChanged(e)}},u.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(e!=y.RestoreMode.AUTO&&e!=y.RestoreMode.EXPLICIT)return null;if(null==t)t=this.getStateRows(x.RowState.UPDATED);else if(!Array.isArray(t)){if("number"!=typeof t)return null;t=[t]}if(!Array.isArray(t))return null;for(var i=[],o=0,r=t.length;o<r;o++){var n=this.rowById(t[o]);if(n){var s=n.$_getUpdatedCells();s&&0<s.length&&i.push({__rowId:n.rowId,updatedCells:s})}}return i},u.prototype.canUpdateRow=function(t){return!0},u.prototype.canInsertRow=function(t){return!0},u.prototype.canDeleteRow=function(t){return!0},u.prototype.isDataChanged=function(t,e){var i=this.rowById(t),o=i._orgValues;if(i.rowState!==x.RowState.UPDATED||!o)return!1;if(o){var r=o[e],n=i._values[e],s=this._fields[e];return s&&s.dataType!==W.ValueType.OBJECT&&!s.sameValues(r,n)}return!1},u.prototype._findRowById=function(t){return this._rootRow.findById(t)},u.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},u.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&0<this._rootRow.descendantCount||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},u.prototype.findRow=function(t,e){return t&&0<t.length&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},u.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=y.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==y.RestoreMode.AUTO,this._rootRow._clearOrgValues()},u.prototype.$_summarizeChildren=function(t,e){for(var i=e.field,o=t.count,r=0;r<o;r++){var n=t.getChild(r),s=n.getValue(i);isNaN(s)||(e.sum+=s,e.dataCount++,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this.$_summarizeChildren(n,e)}},u.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,r=t.count,n=0,s=0;s<r;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-o,2)),n+=this.$_summarizeVars(a,e)}return n},u.prototype._summarizeChildren=function(t,e){for(var i=e.field,o=t.count,r=0;r<o;r++){var n=t.getChild(r),s=n.getValue(i);isNaN(s)||(e.sum+=s,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this._summarizeChildren(n,e)}},u.prototype._summarizeVars=function(t,e){for(var i=e.field,o=e.avg,r=t.count,n=0,s=0;s<r;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-o,2)),n+=this._summarizeVars(a,e)}return n},u.prototype._summarize=function(t,e){if(null==t)return!1;if(t.clear(),this.rowCount<1)return!1;if(t.count=0,t.sum=0,t.min=Number.MIN_VALUE,t.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e){var i=this._summarizeVars(this._rootRow,t);t.vars=i/t.count}return!0},u.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent(u.DISPOSED)},u.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(u.RESET)},u.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH)},u.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH_CLIENT)},u.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent(u.CLEARED)},u.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent(u.ROW_COUNT_CHANGED,this.rowCount)},u.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_ADDING,t,e,i)},u.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_ADDED,t)},u.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent(u.ROWS_ADDED,t,e)},u.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_REMOVING,t)},u.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_REMOVED,t)},u.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_REMOVING,t)},u.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent(u.ROWS_REMOVED,t)},u.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_UPDATING,t)},u.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_UPDATED,t)},u.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(u.VALUE_CHNAGED,t,e,i)},u.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent(u.VALUE_CHNAGED,t,e)},u.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent(u.ICON_INDEX_CHANGED,t)},u.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent(u.HAS_CHILDREN_CHANGED,t)},u.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent(u.ROW_STATE_CHANGED,t,e)},u.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CHANGED,t)},u.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_SIBLING_MOVING,t,e)},u.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent(u.ROW_SIBLING_MOVED,t,e)},u.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_PARENT_CHANGING,t,e,i)},u.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(u.ROW_PARENT_CHANGED,t,e,i)},u.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent(u.ROWS_HIDDEN_CHANGED,t,e)},u.prototype.undo=function(){this.canUndo&&this._commands.undo()},u.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},u.prototype.clearCommandStack=function(){this._commands.flush()},u.DISPOSED="onTreeDataProviderDisposed",u.RESET="onTreeDataProviderReset",u.REFRESH="onTreeDataProviderRefresh",u.REFRESH_CLIENT="onTreeDataProviderRefreshClient",u.CLEARED="onTreeDataProviderCleared",u.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",u.ROW_ADDING="onTreeDataProviderRowAdding",u.ROW_ADDED="onTreeDataProviderRowAdded",u.ROWS_ADDED="onTreeDataProviderRowsAdded",u.ROW_REMOVING="onTreeDataProviderRowRemoving",u.ROW_REMOVED="onTreeDataProviderRowRemoved",u.ROWS_REMOVING="onTreeDataProviderRowsRemoving",u.ROWS_REMOVED="onTreeDataProviderRowsRemoved",u.ROW_UPDATING="onTreeDataProviderRowUpdating",u.ROW_UPDATED="onTreeDataProviderRowUpdated",u.VALUE_CHANGING="onTreeDataProviderValueChanging",u.VALUE_CHNAGED="onTreeDataProviderValueChanged",u.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",u.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",u.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",u.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",u.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",u.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",u.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",u.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged",u.ROWS_HIDDEN_CHANGED="onTreeDataProviderRowsHideChanged",u.GET_HANDLER="getHandler",u);function u(t){void 0===t&&(t=!1);var e=n.call(this)||this;return e._countDirty=!1,e._tagLock=!1,e._points=[],e._nextPoint=0,e._rowMap=[],e._needOrgValues=!1,e._needRestore=!1,e._checkParentProc=null,e._hiddenRows=[],t&&(e._commands=new He.LocalTreeDataCommandStack(e)),e._rootRow=new We.RootTreeRow(e),e._tags=new je.TreeDataTagCollection(e),e}e.LocalTreeDataProvider=s});t(Ke);Ke.TreeDataRowImpl,Ke.LocalTreeDataProvider;var ze=e(function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.LicenseType||(e.LicenseType={})).Developer="developer",i.Evaluation="evaluation",i.Limited="limited",i.Enterprise="enterprise",e.globalRealGridInfo={name:"RealGridJs",version:"2.0.0.20200114",license:"enterprise",vender:null},e.licenseNo=""});t(ze);ze.LicenseType,ze.globalRealGridInfo,ze.licenseNo;return t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.getVersion=function(){return ze.globalRealGridInfo.version},o.getActiveGrid=function(){},o.exportGrid=function(){},Object.defineProperty(o,"ImageList",{get:function(){return Bt.ImageList},enumerable:!0,configurable:!0}),Object.defineProperty(o,"GridContainer",{get:function(){return Ce.GridContainer},enumerable:!0,configurable:!0}),Object.defineProperty(o,"GridView",{get:function(){return ge.GridView},enumerable:!0,configurable:!0}),Object.defineProperty(o,"TreeContainer",{get:function(){return Ne.TreeContainer},enumerable:!0,configurable:!0}),Object.defineProperty(o,"TreeView",{get:function(){return Ne.TreeView},enumerable:!0,configurable:!0}),Object.defineProperty(o,"LocalDataProvider",{get:function(){return Me.LocalDataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(o,"LocalTreeDataProvider",{get:function(){return Ke.LocalTreeDataProvider},enumerable:!0,configurable:!0}),Object.defineProperty(o,"DataType",{get:function(){return W.ValueType},enumerable:!0,configurable:!0}),Object.defineProperty(o,"DataField",{get:function(){return f.DataField},enumerable:!0,configurable:!0}),Object.defineProperty(o,"DataColumn",{get:function(){return G.DataColumn},enumerable:!0,configurable:!0}),Object.defineProperty(o,"DataOutputOptions",{get:function(){return b.DataOutputOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o,"RowState",{get:function(){return x.RowState},enumerable:!0,configurable:!0}),Object.defineProperty(o,"ColumnHeaderItemLocation",{get:function(){return W.ColumnHeaderItemLocation},enumerable:!0,configurable:!0}),Object.defineProperty(o,"Column",{get:function(){return F.GridColumn},enumerable:!0,configurable:!0}),Object.defineProperty(o,"Rectangle",{get:function(){return K.Rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(o,"GroupItemImpl",{get:function(){return q.GroupItemImpl},enumerable:!0,configurable:!0}),Object.defineProperty(o,"MergedGroupHeader",{get:function(){return N.MergedGroupHeader},enumerable:!0,configurable:!0}),Object.defineProperty(o,"GridRow",{get:function(){return q.GridRow},enumerable:!0,configurable:!0}),o);function o(){}e.default=i}))}();
