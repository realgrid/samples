/** 
 * RealGridJS v2.0.1.0001
 * Copyright (C) 2013-2020 WooriTech Inc.
 * All Rights Reserved.
 */
var RealGrid = (function () {
	'use strict';

	var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

	function unwrapExports (x) {
		return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
	}

	function createCommonjsModule(fn, module) {
		return module = { exports: {} }, fn(module, module.exports), module.exports;
	}

	var Types = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Types.ts
	// 2019. 07. 05. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var ValueType;
	(function (ValueType) {
	    ValueType["TEXT"] = "text";
	    ValueType["NUMBER"] = "number";
	    ValueType["BOOLEAN"] = "boolean";
	    ValueType["DATETIME"] = "datetime";
	    ValueType["OBJECT"] = "object";
	    ValueType["CHAR"] = "char";
	    ValueType["UNUM"] = "unum";
	    ValueType["INT"] = "int";
	    ValueType["UINT"] = "uint";
	    ValueType["DATE"] = "date";
	})(ValueType = exports.ValueType || (exports.ValueType = {}));
	var SortDirection;
	(function (SortDirection) {
	    SortDirection["ASCENDING"] = "ascending";
	    SortDirection["DESCENDING"] = "descending";
	    SortDirection["NONE"] = "none";
	})(SortDirection = exports.SortDirection || (exports.SortDirection = {}));
	var SortCase;
	(function (SortCase) {
	    SortCase["SENSITIVE"] = "sensitive";
	    SortCase["INSENSITIVE"] = "insensitive";
	})(SortCase = exports.SortCase || (exports.SortCase = {}));
	var PagingSource;
	(function (PagingSource) {
	    PagingSource["ROWS"] = "rows";
	    PagingSource["ITEMS"] = "items";
	})(PagingSource = exports.PagingSource || (exports.PagingSource = {}));
	var SortMode;
	(function (SortMode) {
	    SortMode["AUTO"] = "auto";
	    SortMode["EXPLICIT"] = "explicit";
	})(SortMode = exports.SortMode || (exports.SortMode = {}));
	var FilterMode;
	(function (FilterMode) {
	    FilterMode["AUTO"] = "auto";
	    FilterMode["EXPLICIT"] = "explicit";
	})(FilterMode = exports.FilterMode || (exports.FilterMode = {}));
	var RowGroupAdornments;
	(function (RowGroupAdornments) {
	    RowGroupAdornments["NONE"] = "none";
	    RowGroupAdornments["HEADER"] = "header";
	    RowGroupAdornments["FOOTER"] = "footer";
	    RowGroupAdornments["SUMMARY"] = "summary";
	    RowGroupAdornments["BOTH"] = "both";
	})(RowGroupAdornments = exports.RowGroupAdornments || (exports.RowGroupAdornments = {}));
	exports.isHeaderAdornment = function (v) {
	    return v == RowGroupAdornments.BOTH || v == RowGroupAdornments.HEADER;
	};
	exports.isFooterAdornment = function (v) {
	    return v == RowGroupAdornments.BOTH || v == RowGroupAdornments.FOOTER;
	};
	exports.isFooterOnlyAdornment = function (v) {
	    return v == RowGroupAdornments.FOOTER || v == RowGroupAdornments.SUMMARY;
	};
	var ValidationMode;
	(function (ValidationMode) {
	    ValidationMode["ALWAYS"] = "always";
	    ValidationMode["UPDATE"] = "update";
	    ValidationMode["INSERT"] = "insert";
	})(ValidationMode = exports.ValidationMode || (exports.ValidationMode = {}));
	var ValidationLevel;
	(function (ValidationLevel) {
	    ValidationLevel["ERROR"] = "error";
	    ValidationLevel["WARNING"] = "warning";
	    ValidationLevel["INFO"] = "info";
	    ValidationLevel["IGNORE"] = "ignore";
	})(ValidationLevel = exports.ValidationLevel || (exports.ValidationLevel = {}));
	var $_levels = {
	    error: 1,
	    warning: 2,
	    info: 3,
	    ignore: 4
	};
	exports.ValidationLevel_compare = function (level1, level2) {
	    return $_levels[level1] - $_levels[level2];
	};
	var SummaryMode;
	(function (SummaryMode) {
	    SummaryMode["NONE"] = "none";
	    SummaryMode["AGGREGATE"] = "aggregate";
	    SummaryMode["STATISTICAL"] = "statistical";
	})(SummaryMode = exports.SummaryMode || (exports.SummaryMode = {}));
	// export enum SubTextLocation {
	//     DEFAULT = "default",
	//     NONE = "none",
	//     LEFT = "left",
	//     RIGHT = "right",
	//     UPPER = "upper",
	//     LOWER = "lower",
	// 	LEFT_FILL = "leftFill",
	// 	RIGHT_FILL = "rightFill",
	// 	UPPER_FILL = "upperFill",
	// 	LOWER_FILL = "lowerFill"
	// }
	var ColumnHeaderItemLocation;
	(function (ColumnHeaderItemLocation) {
	    ColumnHeaderItemLocation["NONE"] = "none";
	    ColumnHeaderItemLocation["LEFT_EDGE"] = "leftEdge";
	    ColumnHeaderItemLocation["RIGHT_EDGE"] = "rightEdge";
	    ColumnHeaderItemLocation["TOP_EDGE"] = "topEdge";
	    ColumnHeaderItemLocation["BOTTOM_EDGE"] = "bottomEdge";
	    ColumnHeaderItemLocation["LEFT"] = "left";
	    ColumnHeaderItemLocation["RIGHT"] = "right";
	    ColumnHeaderItemLocation["TOP"] = "top";
	    ColumnHeaderItemLocation["BOTTOM"] = "bottom";
	    ColumnHeaderItemLocation["CENTER"] = "center";
	})(ColumnHeaderItemLocation = exports.ColumnHeaderItemLocation || (exports.ColumnHeaderItemLocation = {}));
	var ClickBehavior;
	(function (ClickBehavior) {
	    ClickBehavior["NONE"] = "none";
	    ClickBehavior["SORT"] = "sort";
	})(ClickBehavior = exports.ClickBehavior || (exports.ClickBehavior = {}));
	var BlankState;
	(function (BlankState) {
	    BlankState["NONE"] = "none";
	    BlankState["HEAD"] = "head";
	    BlankState["BODY"] = "body";
	    BlankState["TAIL"] = "tail";
	})(BlankState = exports.BlankState || (exports.BlankState = {}));
	var GridFitStyle;
	(function (GridFitStyle) {
	    GridFitStyle["NONE"] = "none";
	    GridFitStyle["EVEN"] = "even";
	    GridFitStyle["EVEN_FILL"] = "evenFill";
	    GridFitStyle["FILL"] = "fill";
	})(GridFitStyle = exports.GridFitStyle || (exports.GridFitStyle = {}));
	// export enum RowFocusMask {
	// 	ROW = "row",
	// 	DATA = "data",
	// 	FILL = "fill",
	// 	CELL = "cell"
	// }
	var Keys;
	(function (Keys) {
	    Keys[Keys["BACK"] = 8] = "BACK";
	    Keys[Keys["TAB"] = 9] = "TAB";
	    Keys[Keys["ENTER"] = 13] = "ENTER";
	    Keys[Keys["ESC"] = 27] = "ESC";
	    Keys[Keys["ESCAPE"] = 27] = "ESCAPE";
	    Keys[Keys["SPACE"] = 32] = "SPACE";
	    Keys[Keys["PAGEUP"] = 33] = "PAGEUP";
	    Keys[Keys["PAGEDOWN"] = 34] = "PAGEDOWN";
	    Keys[Keys["END"] = 35] = "END";
	    Keys[Keys["HOME"] = 36] = "HOME";
	    Keys[Keys["LEFT"] = 37] = "LEFT";
	    Keys[Keys["UP"] = 38] = "UP";
	    Keys[Keys["RIGHT"] = 39] = "RIGHT";
	    Keys[Keys["DOWN"] = 40] = "DOWN";
	    Keys[Keys["INSERT"] = 45] = "INSERT";
	    Keys[Keys["DELETE"] = 46] = "DELETE";
	    Keys[Keys["F2"] = 113] = "F2";
	    Keys[Keys["F3"] = 114] = "F3";
	    Keys[Keys["A"] = 65] = "A";
	    Keys[Keys["D"] = 68] = "D";
	    Keys[Keys["I"] = 73] = "I";
	    Keys[Keys["T"] = 84] = "T";
	    Keys[Keys["U"] = 85] = "U";
	    Keys[Keys["V"] = 86] = "V";
	    Keys[Keys["W"] = 87] = "W";
	    Keys[Keys["X"] = 88] = "X";
	    Keys[Keys["Y"] = 89] = "Y";
	    Keys[Keys["Z"] = 90] = "Z";
	})(Keys = exports.Keys || (exports.Keys = {}));
	var Cursor;
	(function (Cursor) {
	    Cursor["DEFAULT"] = "default";
	    Cursor["AUTO"] = "auto";
	    Cursor["POINTER"] = "pointer";
	    Cursor["WAIT"] = "wait";
	    Cursor["MOVE"] = "move";
	    Cursor["COL_RESIZE"] = "col-resize";
	    Cursor["ROW_RESIZE"] = "row-resize";
	    Cursor["CROSSHAIR"] = "crosshair";
	    Cursor["HORZ_RESIZE"] = "ew-resize";
	    Cursor["VERT_RESIZE"] = "ns-resize";
	    Cursor["NESW_RESIZE"] = "nesw-resize";
	    Cursor["NWSE_RESIZE"] = "nwse-resize";
	    Cursor["NO_DROP"] = "no-drop";
	    Cursor["NOT_ALLOWED"] = "not-allowed";
	})(Cursor = exports.Cursor || (exports.Cursor = {}));
	var TableCellType;
	(function (TableCellType) {
	    TableCellType["DATA"] = "data";
	    TableCellType["HEADER"] = "header";
	    TableCellType["FOOTER"] = "footer";
	    TableCellType["INDICATOR"] = "indicator";
	    TableCellType["STATE"] = "state";
	    TableCellType["CHECK"] = "check";
	    TableCellType["HEAD"] = "head";
	    TableCellType["FOOT"] = "foot";
	    TableCellType["SUM"] = "sum";
	    TableCellType["FIXED_BAR"] = "fixedbar";
	})(TableCellType = exports.TableCellType || (exports.TableCellType = {}));
	var RowMaskType;
	(function (RowMaskType) {
	    RowMaskType["NONE"] = "none";
	    RowMaskType["ROW"] = "row";
	    RowMaskType["DATA"] = "data";
	    RowMaskType["FILL"] = "fill";
	    RowMaskType["CELL"] = "cell";
	})(RowMaskType = exports.RowMaskType || (exports.RowMaskType = {}));
	var TextInputCase;
	(function (TextInputCase) {
	    TextInputCase["NORMAL"] = "normal";
	    TextInputCase["UPPER"] = "upper";
	    TextInputCase["LOWER"] = "lower";
	    TextInputCase["DEFAULT"] = "default";
	})(TextInputCase = exports.TextInputCase || (exports.TextInputCase = {}));
	var Alignment;
	(function (Alignment) {
	    Alignment["NEAR"] = "near";
	    Alignment["CENTER"] = "center";
	    Alignment["FAR"] = "far";
	})(Alignment = exports.Alignment || (exports.Alignment = {}));
	var DefaultShowDate;
	(function (DefaultShowDate) {
	    DefaultShowDate["NORMAL"] = "normal";
	    DefaultShowDate["TODAY"] = "today";
	    DefaultShowDate["TODAY_WHEN_NULL"] = "todayWhenNull";
	})(DefaultShowDate = exports.DefaultShowDate || (exports.DefaultShowDate = {}));
	var SortStyle;
	(function (SortStyle) {
	    SortStyle["NONE"] = "none";
	    SortStyle["EXCLUSIVE"] = "exclusive";
	    SortStyle["INCLUSIVE"] = "inclusive";
	    SortStyle["REVERSE"] = "reverse";
	})(SortStyle = exports.SortStyle || (exports.SortStyle = {}));
	var MenuItemType;
	(function (MenuItemType) {
	    MenuItemType["NORMAL"] = "normal";
	    MenuItemType["CHECK"] = "check";
	    MenuItemType["RADIO"] = "radio";
	    MenuItemType["SEPARATOR"] = "separator";
	})(MenuItemType = exports.MenuItemType || (exports.MenuItemType = {}));
	var HandleVisibility;
	(function (HandleVisibility) {
	    HandleVisibility["VISIBLE"] = "visible";
	    HandleVisibility["HOVERED"] = "hovered";
	    HandleVisibility["ALWAYS"] = "always";
	    HandleVisibility["HIDDEN"] = "hidden";
	})(HandleVisibility = exports.HandleVisibility || (exports.HandleVisibility = {}));
	var CellButton;
	(function (CellButton) {
	    CellButton["NONE"] = "none";
	    CellButton["ACTION"] = "action";
	    CellButton["POPUP"] = "popup";
	    CellButton["IMAGE"] = "image";
	})(CellButton = exports.CellButton || (exports.CellButton = {}));
	var ButtonVisibility;
	(function (ButtonVisibility) {
	    ButtonVisibility["ALWAYS"] = "always";
	    ButtonVisibility["DEFAULT"] = "default";
	    ButtonVisibility["VISIBLE"] = "visible";
	    ButtonVisibility["HIDDEN"] = "hidden";
	    ButtonVisibility["ROWFOCUSED"] = "rowfocused";
	})(ButtonVisibility = exports.ButtonVisibility || (exports.ButtonVisibility = {}));
	var IconPosition;
	(function (IconPosition) {
	    IconPosition["LEFT"] = "left";
	    IconPosition["RIGHT"] = "right";
	    IconPosition["LEFT_EDGE"] = "leftEdge";
	    IconPosition["RIGHT_EDGE"] = "rightEdge";
	    IconPosition["TOP"] = "top";
	    IconPosition["BOTTOM"] = "bottom";
	    IconPosition["TOP_EDGE"] = "topEdge";
	    IconPosition["BOTTOM_EDGE"] = "bottomEdge";
	    IconPosition["CENTER"] = "center";
	})(IconPosition = exports.IconPosition || (exports.IconPosition = {}));
	var RefreshMode;
	(function (RefreshMode) {
	    RefreshMode["ALL"] = "all";
	    RefreshMode["VISIBLE_ONLY"] = "visibleOnly";
	})(RefreshMode = exports.RefreshMode || (exports.RefreshMode = {}));
	});

	unwrapExports(Types);
	var Types_1 = Types.ValueType;
	var Types_2 = Types.SortDirection;
	var Types_3 = Types.SortCase;
	var Types_4 = Types.PagingSource;
	var Types_5 = Types.SortMode;
	var Types_6 = Types.FilterMode;
	var Types_7 = Types.RowGroupAdornments;
	var Types_8 = Types.isHeaderAdornment;
	var Types_9 = Types.isFooterAdornment;
	var Types_10 = Types.isFooterOnlyAdornment;
	var Types_11 = Types.ValidationMode;
	var Types_12 = Types.ValidationLevel;
	var Types_13 = Types.ValidationLevel_compare;
	var Types_14 = Types.SummaryMode;
	var Types_15 = Types.ColumnHeaderItemLocation;
	var Types_16 = Types.ClickBehavior;
	var Types_17 = Types.BlankState;
	var Types_18 = Types.GridFitStyle;
	var Types_19 = Types.Keys;
	var Types_20 = Types.Cursor;
	var Types_21 = Types.TableCellType;
	var Types_22 = Types.RowMaskType;
	var Types_23 = Types.TextInputCase;
	var Types_24 = Types.Alignment;
	var Types_25 = Types.DefaultShowDate;
	var Types_26 = Types.SortStyle;
	var Types_27 = Types.MenuItemType;
	var Types_28 = Types.HandleVisibility;
	var Types_29 = Types.CellButton;
	var Types_30 = Types.ButtonVisibility;
	var Types_31 = Types.IconPosition;
	var Types_32 = Types.RefreshMode;

	var RowState_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RowState.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var RowState;
	(function (RowState) {
	    RowState["NONE"] = "none";
	    RowState["CREATED"] = "created";
	    RowState["UPDATED"] = "updated";
	    RowState["DELETED"] = "deleted";
	    RowState["CREATE_AND_DELETED"] = "createAndDeleted";
	})(RowState = exports.RowState || (exports.RowState = {}));
	exports.isDeletedState = function (value) {
	    return value == RowState.DELETED || value == RowState.CREATE_AND_DELETED;
	};
	});

	unwrapExports(RowState_1);
	var RowState_2 = RowState_1.RowState;
	var RowState_3 = RowState_1.isDeletedState;

	var BooleanConverter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// BooleanConverter.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var BooleanConverter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function BooleanConverter(format) {
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        this._format = "";
	        this.format = format;
	    }
	    Object.defineProperty(BooleanConverter.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        set: function (value) {
	            if (value != this._format) {
	                this._format = value;
	                this.parse(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    BooleanConverter.prototype.toBool = function (value) {
	        if (this._values && value) {
	            var s = this._sensitive ? value : value.toLowerCase();
	            if (s in this._values) {
	                return this._values[s];
	            }
	        }
	        return false;
	    };
	    BooleanConverter.prototype.toBoolEx = function (value) {
	        var s = this._sensitive ? value : value.toLowerCase();
	        if (this._values) {
	            if (s in this._values) {
	                return this._values[s];
	            }
	        }
	        return s ? Boolean(s) : undefined;
	    };
	    BooleanConverter.prototype.toBoolStrict = function (value) {
	        if (this._values && value) {
	            var s = this._sensitive ? value : value.toLowerCase();
	            if (s in this._values) {
	                return this._values[s];
	            }
	        }
	        return undefined;
	    };
	    BooleanConverter.prototype.toText = function (value) {
	        return value ? this._trueText : this._falseText;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    BooleanConverter.prototype.parse = function (fmt) {
	        if (fmt) {
	            var s, i, arr = fmt.split(/[;\:]/), falses, trues, sensitive = true;
	            s = arr[0];
	            falses = s ? s.split(",") : null;
	            if (arr.length > 1) {
	                s = arr[1];
	                trues = s ? s.split(",") : null;
	            }
	            if (arr.length > 2) {
	                s = arr[2].trim();
	                if (s == "0")
	                    sensitive = false;
	            }
	            this._values = {};
	            this._sensitive = sensitive;
	            for (i = 0; i < falses.length; i++) {
	                s = falses[i];
	                this._values[sensitive ? s : s.toLowerCase()] = false;
	            }
	            for (i = 0; i < trues.length; i++) {
	                s = trues[i];
	                this._values[sensitive ? s : s.toLowerCase()] = true;
	            }
	            this._trueText = trues && trues.length > 0 ? trues[0] : "true";
	            this._falseText = falses && falses.length > 0 ? falses[0] : "false";
	        }
	        else {
	            this._values = {};
	            this._values["true"] = true;
	            this._values["false"] = false;
	            this._trueText = "true";
	            this._falseText = "false";
	        }
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    BooleanConverter.Default = new BooleanConverter("false,f,0:true,t,1:0");
	    return BooleanConverter;
	}());
	exports.BooleanConverter = BooleanConverter;
	});

	unwrapExports(BooleanConverter_1);
	var BooleanConverter_2 = BooleanConverter_1.BooleanConverter;

	var Rectangle_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Rectangle.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var Rectangle = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function Rectangle(x, y, width, height) {
	        if (x === void 0) { x = 0; }
	        if (y === void 0) { y = 0; }
	        if (width === void 0) { width = 0; }
	        if (height === void 0) { height = 0; }
	        this.x = x;
	        this.y = y;
	        this.width = width;
	        this.height = height;
	    }
	    Object.defineProperty(Rectangle.prototype, "left", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** left */
	        get: function () {
	            return this.x;
	        },
	        set: function (value) {
	            var dx = value - this.x;
	            this.x += dx;
	            this.width -= dx;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Rectangle.prototype, "right", {
	        /** right */
	        get: function () {
	            return this.x + this.width;
	        },
	        set: function (value) {
	            var dx = value - (this.x + this.width);
	            this.width += dx;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Rectangle.prototype, "top", {
	        /** top */
	        get: function () {
	            return this.y;
	        },
	        set: function (value) {
	            var dy = value - this.y;
	            this.y += dy;
	            this.height -= dy;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Rectangle.prototype, "bottom", {
	        /** bottom */
	        get: function () {
	            return this.y + this.height;
	        },
	        set: function (value) {
	            var dy = value - (this.y + this.height);
	            this.height += dy;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Rectangle.prototype, "isEmpty", {
	        /** isEmpty */
	        get: function () {
	            return this.width === 0 || this.height === 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Rectangle.prototype.clone = function () {
	        return new Rectangle(this.x, this.y, this.width, this.height);
	    };
	    Rectangle.prototype.getInner = function () {
	        return new Rectangle(0, 0, this.width, this.height);
	    };
	    Rectangle.prototype.equals = function (r) {
	        return r === this
	            || r && this.x === r.x && this.y === r.y && this.width === r.width && this.height === r.height;
	    };
	    Rectangle.prototype.leftBy = function (delta) {
	        this.x += delta;
	        this.width -= delta;
	        return this;
	    };
	    Rectangle.prototype.rightBy = function (delta) {
	        this.width += delta;
	        return this;
	    };
	    Rectangle.prototype.topBy = function (delta) {
	        this.y += delta;
	        this.height -= delta;
	        return this;
	    };
	    Rectangle.prototype.bottomBy = function (delta) {
	        this.height += delta;
	        return this;
	    };
	    Rectangle.prototype.shrink = function (dx, dy) {
	        this.width -= dx;
	        this.height -= dy;
	        return this;
	    };
	    Rectangle.prototype.expand = function (dx, dy) {
	        this.width += dx;
	        this.height += dy;
	        return this;
	    };
	    Rectangle.prototype.contains = function (x, y) {
	        return x >= this.x && x <= this.x + this.width
	            && y >= this.y && y <= this.y + this.height;
	    };
	    Rectangle.prototype.setEmpty = function () {
	        this.width = this.height = 0;
	        return this;
	    };
	    Rectangle.prototype.move = function (x, y) {
	        if (x === void 0) { x = 0; }
	        if (y === void 0) { y = 0; }
	        this.x = x;
	        this.y = y;
	        return this;
	    };
	    Rectangle.prototype.set = function (x, y, width, height) {
	        this.x = x;
	        this.y = y;
	        this.width = width;
	        this.height = height;
	        return this;
	    };
	    Rectangle.prototype.setWidth = function (value) {
	        this.width = value;
	        return this;
	    };
	    Rectangle.prototype.copy = function (r) {
	        this.x = r.x;
	        this.y = r.y;
	        this.width = r.width;
	        this.height = r.height;
	        return this;
	    };
	    Rectangle.prototype.copyHorz = function (r) {
	        this.x = r.x;
	        this.width = r.width;
	        return this;
	    };
	    Rectangle.prototype.copyVert = function (r) {
	        this.y = r.y;
	        this.height = r.height;
	        return this;
	    };
	    Rectangle.prototype.inflate = function (left, top, right, bottom) {
	        if (left === void 0) { left = 0; }
	        if (top === void 0) { top = undefined; }
	        if (right === void 0) { right = undefined; }
	        if (bottom === void 0) { bottom = undefined; }
	        top = top !== undefined ? top : 0;
	        right = right !== undefined ? right : left;
	        bottom = bottom !== undefined ? bottom : top;
	        if (left)
	            this.left = this.x - left;
	        if (top)
	            this.top = this.y - top;
	        if (right)
	            this.right = this.right + right;
	        if (bottom)
	            this.bottom = this.bottom + bottom;
	        return this;
	    };
	    Rectangle.prototype.offset = function (dx, dy) {
	        this.x += dx;
	        this.y += dy;
	        return this;
	    };
	    Rectangle.prototype.round = function () {
	        var r = this.clone();
	        r.x >>>= 0;
	        r.y >>>= 0;
	        r.width >>>= 0;
	        r.height >>>= 0;
	        return r;
	    };
	    Rectangle.prototype.union = function (r) {
	        var r2 = this.clone();
	        r2.left = Math.min(this.x, r.x);
	        r2.right = Math.max(this.right, r.right);
	        r2.top = Math.min(this.y, r.y);
	        r2.bottom = Math.max(this.bottom, r.bottom);
	        return r2;
	    };
	    Rectangle.prototype.normalize = function () {
	        if (this.width < 0) {
	            this.x -= this.width;
	            this.width *= -1;
	        }
	        if (this.height < 0) {
	            this.y -= this.height;
	            this.height *= -1;
	        }
	        return this;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    Rectangle.prototype.toString = function () {
	        return "{x: " + this.x + ", y: " + this.y + ", width: " + this.width + ", height: " + this.height + "}";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    Rectangle.Temp = new Rectangle();
	    return Rectangle;
	}());
	exports.Rectangle = Rectangle;
	});

	unwrapExports(Rectangle_1);
	var Rectangle_2 = Rectangle_1.Rectangle;

	var AppInfo = createCommonjsModule(function (module, exports) {
	Object.defineProperty(exports, "__esModule", { value: true });
	var LicenseType;
	(function (LicenseType) {
	    LicenseType["Developer"] = "developer";
	    LicenseType["Evaluation"] = "evaluation";
	    LicenseType["Limited"] = "limited";
	    LicenseType["Enterprise"] = "enterprise";
	})(LicenseType = exports.LicenseType || (exports.LicenseType = {}));
	exports.globalRealGridInfo = {
	    name: "RealGridJs",
	    version: "2.0.0.2020026",
	    license: "developer",
	    vender: null
	};
	exports.licenseNo = "";
	});

	unwrapExports(AppInfo);
	var AppInfo_1 = AppInfo.LicenseType;
	var AppInfo_2 = AppInfo.globalRealGridInfo;
	var AppInfo_3 = AppInfo.licenseNo;

	var Utils_1 = createCommonjsModule(function (module, exports) {
	Object.defineProperty(exports, "__esModule", { value: true });


	// const _win = window;
	// const _doc = document;
	var _isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
	var _isOpera = !!window["opera"] || navigator.userAgent.indexOf(' OPR/') >= 0;
	//const _isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
	var _isWhale = !!window["whale"]; // whale은 체크만하고 처리하지는 않는다. 
	var _isChrome = !!window["chrome"] && !_isOpera; // Chrome 1+
	var _isFirefox = typeof window["InstallTrigger"] !== 'undefined'; // Firefox 1.0+
	var _isSafari = Object.prototype.toString.call(HTMLElement).indexOf('Constructor') > 0 || (!_isChrome && !_isOpera && navigator.userAgent.indexOf("Safari") >= 0);
	var _isWinSafari = _isSafari && (navigator.platform == "Win32" || navigator.userAgent.indexOf("Windows") >= 0);
	var _isIE = /*@cc_on!@*/  !!document["documentMode"]; // At least IE6
	var _isEdge = navigator.userAgent.toLowerCase().indexOf('edge/') >= 0; // MS Edge 
	var _isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window["MSStream"]; // iOS
	var _ieVer = (function () {
	    var undef, v = 3, div = document.createElement('div'), all = div.getElementsByTagName('i');
	    while (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
	        all[0])
	        ;
	    return v > 4 ? v : undef;
	})();
	var _ieOld = _ieVer !== undefined && _ieVer <= 9;
	var _ieLeg = _ieVer !== undefined && _ieVer <= 8;
	var _ieTen = navigator.appVersion.indexOf("MSIE 10") !== -1;
	var _ieNine = navigator.appVersion.indexOf("MSIE 9") !== -1;
	var __epoch = new Date().getTime();
	var $$_mobile = undefined;
	var $$_activeGrid;
	var Utils = /** @class */ (function () {
	    function Utils() {
	    }
	    Utils.stopEvent = function (e, immediate) {
	        if (immediate === void 0) { immediate = false; }
	        if (e.preventDefault) {
	            e.preventDefault();
	            e.stopPropagation();
	        }
	        else {
	            e.returnValue = false;
	        }
	        immediate && e.stopImmediatePropagation();
	    };
	    Utils.$_getActiveGrid = function () {
	        // return $$_activeGrid && $$_activeGrid.getHandler && $$_activeGrid.getHandler();
	        // TODO
	        return $$_activeGrid;
	    };
	    Utils.$_setActiveGrid = function (grid) {
	        if ($$_activeGrid != grid) {
	            grid && grid._fireGridActivated();
	        }
	        $$_activeGrid = grid;
	    };
	    Utils.isArray = function (v) {
	        return Array.isArray(v);
	    };
	    Utils.makeArray = function (v, force) {
	        if (force === void 0) { force = false; }
	        if (v != null) {
	            return Utils.isArray(v) ? v : [v];
	        }
	        else if (force) {
	            return [];
	        }
	    };
	    Utils.isNumber = function (value) {
	        return typeof value === "number";
	    };
	    Utils.getTimer = function () {
	        return new Date().getTime() - __epoch;
	    };
	    Utils.isWhiteSpace = function (s) {
	        return !s || !s.trim();
	    };
	    Utils.pad = function (value, len, c) {
	        len = Math.max(len || 2, 1);
	        c = c || '0';
	        return new Array(len - String(value).length + 1).join(c) + value;
	    };
	    Utils.pick = function () {
	        var args = [];
	        for (var _i = 0; _i < arguments.length; _i++) {
	            args[_i] = arguments[_i];
	        }
	        var len = args.length;
	        var v;
	        for (var i = 0; i < len; i++) {
	            v = args[i];
	            if (v !== undefined && v !== null) {
	                return v;
	            }
	        }
	        return undefined;
	    };
	    Utils.included = function (value) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        var len = args.length;
	        for (var i = 0; i < len; i++) {
	            if (args[i] == value) {
	                return true;
	            }
	        }
	        return false;
	    };
	    Utils.compareTextValue = function (v1, v2, caseSensitive, partialMatch) {
	        if (v1 === v2) {
	            return true;
	        }
	        var s1 = String(v1);
	        var s2 = v2 == null ? undefined : String(v2);
	        if (!s1 && !s2) {
	            return true;
	        }
	        if (!s1 || !s2) {
	            return false;
	        }
	        if (!caseSensitive) {
	            s1 = s1.toLowerCase();
	            s2 = s2.toLowerCase();
	        }
	        if (partialMatch) {
	            return s2.indexOf(s1) >= 0;
	        }
	        else {
	            return s1 == s2;
	        }
	    };
	    Utils.cast = function (obj, clazz) {
	        return obj instanceof clazz ? obj : null;
	    };
	    Utils.irandom = function (min, max) {
	        if (max !== undefined) {
	            var v1 = Math.floor(min);
	            var v2 = Math.floor(max);
	            return Math.floor(Math.random() * (v2 - v1) + v1);
	        }
	        else {
	            var v = Math.floor(min);
	            return Math.floor(Math.random() * v);
	        }
	    };
	    Utils.brandom = function () {
	        return Math.random() > 0.5 ? true : false;
	    };
	    Utils.erandom = function (clazz) {
	        return Object.keys(clazz);
	    };
	    Utils.alert = function (message) {
	        window.alert(message);
	    };
	    Utils.toInt = function (v, radix) {
	        return (v !== undefined && v !== null) ? parseInt(v, radix || 10) : 0;
	    };
	    Utils.toFloat = function (v) {
	        return (v !== undefined && v !== null) ? parseFloat(v) : 0;
	    };
	    Utils.toArray = function (v) {
	        if (v instanceof Array)
	            return v;
	        if (v !== undefined && v !== null)
	            return [v];
	        return null;
	    };
	    Utils.hex = function (value, len, c) {
	        if (len === void 0) { len = 2; }
	        if (c === void 0) { c = "0"; }
	        len = Math.max(len || 2, 1);
	        var s = value.toString(16);
	        c = c || "0";
	        return new Array(len - s.length + 1).join(c) + s;
	    };
	    Utils.getBounds = function (dom) {
	        var r = new Rectangle_1.Rectangle();
	        r.x = dom.offsetLeft;
	        r.y = dom.offsetTop;
	        r.width = dom.offsetWidth;
	        r.height = dom.offsetHeight;
	        return r;
	    };
	    Utils.toStr = function (value) {
	        if (typeof value === "number") {
	            return !isNaN(value) ? String(value) : "";
	        }
	        else {
	            return value !== null && value !== undefined ? String(value) : "";
	        }
	    };
	    Utils._included = function (value) {
	        var args = arguments;
	        var len = args.length;
	        for (var i = 1; i < len; i++) {
	            if (args[i] == value) {
	                return true;
	            }
	        }
	        return false;
	    };
	    Utils.setBounds = function (element, x, y, w, h) {
	        var style = element.style;
	        style.left = x + "px";
	        style.top = y + "px";
	        style.width = w + "px";
	        style.height = h + "px";
	    };
	    Utils.getClientRect = function (element) {
	        var r = element.getBoundingClientRect();
	        r["cx"] = element.offsetLeft;
	        r["cy"] = element.offsetTop;
	        return r;
	    };
	    Utils.getChildIndex = function (element) {
	        if (element) {
	            var parent = element.parentNode;
	            if (parent) {
	                var childs = parent.childNodes;
	                for (var i = 0; i < childs.length; i++) {
	                    if (childs[i] === element) {
	                        return i;
	                    }
	                }
	            }
	        }
	        return -1;
	    };
	    Utils.clearChildren = function (element) {
	        var elt;
	        while (elt = element.lastChild) {
	            element.removeChild(elt);
	        }
	    };
	    Utils.clearElements = function (element) {
	        var elt;
	        while (elt = element.lastChild) {
	            Utils.clearElements(elt);
	            element.removeChild(elt);
	        }
	    };
	    Utils.addChild = function (element, child) {
	        if (element && child && child.parentNode !== element) {
	            element.appendChild(child);
	            return true;
	        }
	        return false;
	    };
	    Utils.removeChild = function (element, child) {
	        if (element && child && child.parentNode === element) {
	            element.removeChild(child);
	            return true;
	        }
	        return false;
	    };
	    Utils.disableSelection = function (element) {
	        var css = element.style;
	        css["-moz-user-select"] = "-moz-none";
	        css["-khtml-user-select"] = "none";
	        css["-webkit-user-select"] = "none";
	        css["-o-user-select"] = "none";
	        css["-ms-user-select"] = "none";
	        css["user-select"] = "none";
	        /*
	        if (typeof element.onselectstart !== 'undefined') {
	            element.onselectstart = function() { return false; };
	        } else if (typeof element.style.MozUserSelect !== 'undefined') {
	            element.style.MozUserSelect = 'none';
	        } else {
	            element.onmousedown = function() { return false; };
	        }
	        */
	    };
	    Utils.setMobile = function (value) {
	        $$_mobile = value;
	    };
	    Utils.isMobile = function () {
	        if ($$_mobile == undefined) {
	            var check_1 = false;
	            if (navigator.userAgent.match(/Android/i)
	                || navigator.userAgent.match(/webOS/i)
	                || navigator.userAgent.match(/iPhone/i)
	                || navigator.userAgent.match(/iPad/i)
	                || navigator.userAgent.match(/iPod/i)
	                || navigator.userAgent.match(/BlackBerry/i)
	                || navigator.userAgent.match(/Windows Phone/i))
	                check_1 = true;
	            if (!check_1) {
	                (function (a) {
	                    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) ||
	                        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))
	                        check_1 = true;
	                })(navigator.userAgent || navigator.vendor || window["opera"]);
	            }
	            return check_1;
	        }
	        else {
	            return !!$$_mobile;
	        }
	    };
	    Utils.getBrowserSize = function (elt) {
	        var doc = elt ? elt.ownerDocument : document;
	        var win = doc.defaultView;
	        return {
	            // width: _win.innerWidth || _doc.documentElement.clientWidth || _doc.body.clientWidth,
	            // height: _win.innerHeight || _doc.documentElement.clientHeight || _doc.body.clientHeight
	            width: win.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
	            height: win.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
	        };
	    };
	    Utils.move = function (element, x, y) {
	        element.style.left = x + "px";
	        element.style.top = y + "px";
	    };
	    Utils.htmlEncode = function (text) {
	        return document.createElement('a').appendChild(document.createTextNode(text)).parentNode["innerHTML"];
	    };
	    Utils.detach = function (element) {
	        element && element.parentNode && element.parentNode.removeChild(element);
	    };
	    Utils.getSize = function (element) {
	        var r = element.getBoundingClientRect();
	        return { width: r.width, height: r.height };
	    };
	    Utils.getScrolled = function () {
	        var body = document.body;
	        var docElem = document.documentElement;
	        return {
	            sx: window.pageXOffset || docElem.scrollLeft || body.scrollLeft,
	            sy: window.pageYOffset || docElem.scrollTop || body.scrollTop
	        };
	    };
	    Utils.getOffset = function (element) {
	        var box = element.getBoundingClientRect();
	        var body = document.body;
	        var docElem = document.documentElement;
	        var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
	        var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
	        var clientTop = docElem.clientTop || body.clientTop || 0;
	        var clientLeft = docElem.clientLeft || body.clientLeft || 0;
	        var x = box.left + scrollLeft - clientLeft;
	        var y = box.top + scrollTop - clientTop;
	        return { x: Math.round(x), y: Math.round(y) };
	    };
	    Utils.isAncestorOf = function (elt, child) {
	        var p = child.parentElement;
	        while (p) {
	            if (p == elt) {
	                return true;
	            }
	            p = p.parentElement;
	        }
	        return false;
	    };
	    Utils.equalArrays = function (a, b) {
	        if (a === b)
	            return true;
	        if (a == null || b == null)
	            return false;
	        var len = a.length;
	        if (len != b.length)
	            return false;
	        for (var i = 0; i < len; ++i) {
	            if (a[i] !== b[i])
	                return false;
	        }
	        return true;
	    };
	    Utils.isLeapYear = function (year) {
	        return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);
	    };
	    Utils.incMonth = function (d, delta) {
	        var day = d.getDate();
	        d.setDate(1);
	        d.setMonth(d.getMonth() + delta);
	        d.setDate(Math.min(day, Utils.month_days[Utils.isLeapYear(d.getFullYear()) ? 1 : 0][d.getMonth()]));
	        return d;
	    };
	    Utils.minDate = function (d1, d2) {
	        if (d1 !== null)
	            return d1;
	        if (d2 !== null)
	            return d2;
	        return d1.getTime() < d2.getTime() ? d1 : d2;
	    };
	    Utils.maxDate = function (d1, d2) {
	        if (d1 !== null)
	            return d2;
	        if (d2 !== null)
	            return d1;
	        return d1.getTime() > d2.getTime() ? d1 : d2;
	    };
	    Utils.setClassName = function (element, clsName) {
	        var className = element.className;
	        if (clsName != className) {
	            element.className = clsName;
	        }
	    };
	    Utils.addClassName = function (element, clsName) {
	        if (element.classList) {
	            element.classList.add(clsName);
	        }
	        else {
	            var i = void 0;
	            var classList = element.className.split(" ");
	            if ((i = classList.indexOf(clsName)) < 0) {
	                classList.push(clsName);
	            }
	            element.className = classList.join(" ");
	        }
	    };
	    Utils.removeClassName = function (element, clsName) {
	        if (element.classList) {
	            element.classList.remove(clsName);
	        }
	        else {
	            var i = void 0;
	            var classList = element.className.split(" ");
	            if ((i = classList.indexOf(clsName)) >= 0) {
	                classList.splice(i, 1);
	            }
	            element.className = classList.join(" ");
	        }
	    };
	    Utils.getBoundingClientRect2 = function (element) {
	        var cr = element.getBoundingClientRect();
	        return {
	            left: cr.left,
	            right: cr.right,
	            width: cr.right - cr.left,
	            top: cr.top,
	            bottom: cr.bottom,
	            height: cr.bottom - cr.top
	        };
	    };
	    Utils.isDebugging = function () {
	        return AppInfo.globalRealGridInfo.license == AppInfo.LicenseType.Developer;
	    };
	    // static getHtmlElement(target: EventTarget, clazz: string): HTMLElement {
	    //     if (target && target["ownerDocument"] && target instanceof eval("target.ownerDocument.defaultView."+clazz)) {
	    //         return target as HTMLElement
	    //     } else {
	    //         return null;
	    //     }
	    // }
	    // static isHtmlElement(target: EventTarget, clazz: any): boolean {
	    //     return target && target["ownerDocument"] && target instanceof eval("target.ownerDocument.defaultView."+clazz)
	    // }
	    Utils.getDocuemnt = function (elt) {
	        return elt && elt.ownerDocument;
	    };
	    Utils.getWindow = function (elt) {
	        return elt && elt.ownerDocument && (elt.ownerDocument.defaultView || elt.ownerDocument["parentWindow"]);
	    };
	    // 아래 코드는 단순히 화면에 그려질 문자열이 한글이면 2 영/숫자/기호 이면 1로 계산하기 위한 로직이다.
	    Utils.getTextLength = function (s) {
	        var b = 0, i = 0, c = 0;
	        for (; c = s.charCodeAt(i++); b += c >> 7 ? 2 : 1)
	            ;
	        return b;
	    };
	    Utils.getClassName = function (model) {
	        function getFuncName(clazz) {
	            var ret = clazz.toString();
	            ret = ret.substr('function '.length);
	            ret = ret.substr(0, ret.indexOf('('));
	            return ret;
	        }
	        if (model && model.constructor) {
	            return model.constructor.name || getFuncName(model.constructor);
	        }
	    };
	    // static readonly win = _win;
	    Utils.isIE = _isIE;
	    Utils.isEdge = _isEdge;
	    Utils.isMac = _isMac;
	    Utils.ieOld = _ieOld;
	    Utils.isSafari = _isSafari;
	    Utils.isWinSafari = _isWinSafari;
	    Utils.isChrome = _isChrome;
	    Utils.isFirefox = _isFirefox;
	    Utils.isOpera = _isOpera;
	    Utils.ieLeg = _ieLeg;
	    Utils.ieTen = _ieTen;
	    Utils.week_days = window["RG_CONST"] && window["RG_CONST"]["WEEKDAYS"] ? window["RG_CONST"]["WEEKDAYS"] : ['일', '월', '화', '수', '목', '금', '토'];
	    Utils.month_days = [
	        [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
	        [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
	    ];
	    Utils.colonreg = /;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/;
	    Utils.$_INVISIBLE_EDIT_BOUNDS = new Rectangle_1.Rectangle(-10000, -10000, 100, 100);
	    return Utils;
	}());
	exports.Utils = Utils;
	});

	unwrapExports(Utils_1);
	var Utils_2 = Utils_1.Utils;

	var DateTimeParser_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DateTimeParser.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });

	var DateTimeParser = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DateTimeParser(format) {
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        this._format = null;
	        this._baseYear = 2000;
	        this._patterns = [];
	        this._amText = "AM";
	        this._pmText = "PM";
	        format && (this.format = format);
	    }
	    Object.defineProperty(DateTimeParser.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        set: function (value) {
	            if (value != this._format) {
	                if (!value) {
	                    throw new Error("Invalid empty date format");
	                }
	                this._format = value;
	                this.parseFormat(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeParser.prototype, "baseYear", {
	        /** baseYear */
	        get: function () {
	            return this._baseYear;
	        },
	        set: function (value) {
	            if (value != this._baseYear) {
	                this._baseYear = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeParser.prototype, "amText", {
	        /** amText */
	        get: function () {
	            return this._amText;
	        },
	        set: function (value) {
	            if (value != this._amText) {
	                this._amText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeParser.prototype, "pmText", {
	        /** pmText */
	        get: function () {
	            return this._pmText;
	        },
	        set: function (value) {
	            if (value != this._pmText) {
	                this._pmText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DateTimeParser.prototype.parse = function (str) {
	        try {
	            var y = 0;
	            var m = 1;
	            var d = 1;
	            var h = 0;
	            var n = 0;
	            var s = 0;
	            var S = 0;
	            var am = 0;
	            var pm = 0;
	            var len = this._patterns.length;
	            var p = 0;
	            var strlen = str.length;
	            for (var i = 0; i < len && p < strlen; i++) {
	                var pattern = this._patterns[i];
	                var c = pattern.c;
	                var l = pattern.len;
	                switch (c) {
	                    case "y":
	                        y = parseInt(str.substr(p, l));
	                        break;
	                    case "M":
	                        m = parseInt(str.substr(p, l));
	                        break;
	                    case "d":
	                        d = parseInt(str.substr(p, l));
	                        break;
	                    case "a":
	                        if (this._amText && str.indexOf(this._amText, p) == p) {
	                            am = 12;
	                            l = this._amText.length;
	                        }
	                        else if (this._pmText && str.indexOf(this._pmText, p) == p) {
	                            pm = 12;
	                            l = this._pmText.length;
	                        }
	                        else {
	                            return null;
	                        }
	                        break;
	                    case "H":
	                        h = parseInt(str.substr(p, l));
	                        break;
	                    case "h":
	                        h = parseInt(str.substr(p, l));
	                        break;
	                    case "m":
	                        n = parseInt(str.substr(p, l));
	                        break;
	                    case "s":
	                        s = parseInt(str.substr(p, l));
	                        break;
	                    case "S":
	                        S = parseInt(str.substr(p, l));
	                        break;
	                    case ".":
	                    case "/":
	                    case "-":
	                    case ":":
	                    case " ":
	                        /*
	                        if (strict) {
	                            if (str.charAt(p) != c) {
	                                return null;
	                            }
	                        } else*/ if (DateTimeParser.DATE_SEPARATORS.indexOf(str.charAt(p)) < 0) {
	                            return null;
	                        }
	                        break;
	                    default:
	                        return null;
	                }
	                p += l;
	            }
	            if (y < 100) {
	                y += this._baseYear;
	            }
	            if (am > 0) {
	                if (h == 12) {
	                    h = 0;
	                }
	            }
	            else if (pm > 0 && h < 12) {
	                h += 12;
	            }
	            return new Date(y, m - 1, d, h, n, s, S);
	        }
	        catch (err) {
	            return null;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DateTimeParser.prototype.parseFormat = function (format) {
	        var s = format;
	        var len = s.length;
	        var i = 0;
	        var p;
	        var c;
	        var l;
	        this._patterns = [];
	        while (i < len) {
	            p = i;
	            c = s.charAt(i);
	            if (Utils_1.Utils.isWhiteSpace(c)) {
	                i++;
	                while (i < len && Utils_1.Utils.isWhiteSpace(s.charAt(i))) {
	                    i++;
	                }
	                this._patterns.push({ c: " ", p: p, len: i - p });
	            }
	            else {
	                l = 0;
	                switch (c) {
	                    case "y":
	                        l = this.getPattern(s, i, c);
	                        if (l != 4 && l != 2)
	                            this.throwInvalidFormat(s);
	                        break;
	                    case "M":
	                    case "d":
	                    case "H":
	                    case "h":
	                    case "m":
	                    case "s":
	                        l = this.getPattern(s, i, c);
	                        if (l != 2)
	                            this.throwInvalidFormat(s);
	                        break;
	                    case "S":
	                        l = this.getPattern(s, i, c);
	                        if (l != 3)
	                            this.throwInvalidFormat(s);
	                        break;
	                    case "a":
	                    case ".":
	                    case "/":
	                    case "-":
	                    case ":":
	                        l = this.getPattern(s, i, c);
	                        if (l != 1)
	                            this.throwInvalidFormat(s);
	                        break;
	                    default:
	                        this.throwInvalidFormat(s);
	                }
	                if (l > 0) {
	                    this._patterns.push({ c: c, p: i, len: l });
	                    i += l;
	                }
	            }
	        }
	    };
	    DateTimeParser.prototype.throwInvalidFormat = function (format) {
	        throw new Error("Invalid date format: " + format);
	    };
	    DateTimeParser.prototype.throwInvalidValue = function (value) {
	        throw new Error("Invalid date format: " + value);
	    };
	    DateTimeParser.prototype.getPattern = function (str, i, c) {
	        var len = 1;
	        while (++i < str.length && str.charAt(i) == c) {
	            len++;
	        }
	        return len;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DateTimeParser.DATE_SEPARATORS = "./-: ";
	    return DateTimeParser;
	}());
	exports.DateTimeParser = DateTimeParser;
	});

	unwrapExports(DateTimeParser_1);
	var DateTimeParser_2 = DateTimeParser_1.DateTimeParser;

	var ISODateTimeParser_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ISODateTimeParser.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var ISODateTimeParser = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ISODateTimeParser() {
	    }
	    ISODateTimeParser.parse = function (str, check) {
	        var finalDate = null;
	        try {
	            var t = str.indexOf("T");
	            var dateStr = str.substring(0, t);
	            var timeStr = str.substring(t + 1);
	            var arr = dateStr.split("-");
	            var len = arr.length;
	            var year = parseInt(arr[0]);
	            var month = len > 1 ? parseInt(arr[1]) : 1;
	            var date = len > 2 ? parseInt(arr[2]) : 1;
	            var multiplier;
	            var offsetHours;
	            var offsetMinutes;
	            var offsetStr;
	            if (timeStr.indexOf("Z") != -1) {
	                multiplier = 1;
	                offsetHours = 0;
	                offsetMinutes = 0;
	                timeStr = timeStr.replace("Z", "");
	            }
	            else if (timeStr.indexOf("+") != -1) {
	                multiplier = 1;
	                offsetStr = timeStr.substring(timeStr.indexOf("+") + 1, timeStr.length);
	                offsetHours = Number(offsetStr.substring(0, offsetStr.indexOf(":")));
	                offsetMinutes = Number(offsetStr.substring(offsetStr.indexOf(":") + 1, offsetStr.length));
	                timeStr = timeStr.substring(0, timeStr.indexOf("+"));
	            }
	            else if (timeStr.indexOf("-") != -1) {
	                multiplier = -1;
	                offsetStr = timeStr.substring(timeStr.indexOf("-") + 1, timeStr.length);
	                offsetHours = Number(offsetStr.substring(0, offsetStr.indexOf(":")));
	                offsetMinutes = Number(offsetStr.substring(offsetStr.indexOf(":") + 1, offsetStr.length));
	                timeStr = timeStr.substring(0, timeStr.indexOf("-"));
	            }
	            else {
	                multiplier = 0;
	            }
	            var timeArr = timeStr.split(":");
	            len = timeArr ? timeArr.length : 0;
	            var hour = len > 0 ? parseInt(timeArr[0]) : 0;
	            var minutes = len > 1 ? parseInt(timeArr[1]) : 0;
	            var secondsArr = (len > 2) ? String(timeArr[2]).split(".") : null;
	            var seconds = (secondsArr && secondsArr.length > 0) ? parseInt(secondsArr[0]) : 0;
	            var milliseconds = (secondsArr && secondsArr.length > 1) ? 1000 * parseFloat("0." + secondsArr[1]) : 0;
	            var utc = Date.UTC(year, month - 1, date, hour, minutes, seconds, milliseconds);
	            var offset = multiplier ? (((offsetHours * 3600000) + (offsetMinutes * 60000)) * multiplier) : ISODateTimeParser._zoneOffset;
	            finalDate = new Date(utc - offset);
	            if (check && isNaN(finalDate.getTime())) {
	                throw "Invalidate date text: " + str;
	            }
	        }
	        catch (e) {
	            if (check) {
	                var eStr = "Invalid date Text: " + str;
	                eStr += "\nError: " + e.toString();
	                throw eStr;
	            }
	        }
	        return finalDate;
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    ISODateTimeParser._zoneOffset = new Date().getTimezoneOffset() * 60 * 1000;
	    return ISODateTimeParser;
	}());
	exports.ISODateTimeParser = ISODateTimeParser;
	});

	unwrapExports(ISODateTimeParser_1);
	var ISODateTimeParser_2 = ISODateTimeParser_1.ISODateTimeParser;

	var DateTimeReader_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DateTimeReader.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });


	var DateTimeReader = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DateTimeReader(format) {
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        this._format = "";
	        this._type = 0;
	        this._parser = new DateTimeParser_1.DateTimeParser(null);
	        this.format = format;
	    }
	    DateTimeReader.initialize = function () {
	        DateTimeReader.Default.amText = "AM";
	        DateTimeReader.Default.pmText = "PM";
	        DateTimeReader.Default.baseYear = 2000;
	    };
	    Object.defineProperty(DateTimeReader.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        set: function (value) {
	            if (value != this._format) {
	                this._format = value;
	                this.parse(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeReader.prototype, "amText", {
	        /** amText */
	        get: function () {
	            return this._parser.amText;
	        },
	        set: function (value) {
	            this._parser.amText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeReader.prototype, "pmText", {
	        /** pmText */
	        get: function () {
	            return this._parser.pmText;
	        },
	        set: function (value) {
	            this._parser.pmText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeReader.prototype, "baseYear", {
	        /** baseYear */
	        get: function () {
	            return this._parser.baseYear;
	        },
	        set: function (value) {
	            this._parser.baseYear = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DateTimeReader.prototype.toDate = function (value) {
	        if (!value) {
	            return null;
	        }
	        var d = null;
	        switch (this._type) {
	            case 0:
	                d = this._parser.parse(value /*, strict*/);
	                break;
	            case 1:
	                d = ISODateTimeParser_1.ISODateTimeParser.parse(value, false);
	                break;
	            case 2:
	                var v = parseInt(value);
	                d = new Date(v);
	                break;
	            case 3:
	            default:
	                d = new Date(value);
	                break;
	        }
	        return d;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DateTimeReader.prototype.parse = function (fmt) {
	        if (fmt) {
	            var s = fmt.toLowerCase();
	            this._type = Math.max(0, DateTimeReader.Formats.indexOf(s));
	            if (this._type == 0) {
	                this._parser.format = fmt;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DateTimeReader.Formats = ["custom", "iso", "timestamp", "platform"];
	    DateTimeReader.Default = new DateTimeReader("yyyy/MM/dd HH:mm:ss");
	    return DateTimeReader;
	}());
	exports.DateTimeReader = DateTimeReader;
	DateTimeReader.initialize();
	});

	unwrapExports(DateTimeReader_1);
	var DateTimeReader_2 = DateTimeReader_1.DateTimeReader;

	var Base_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Base.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var $$_hash = 0;
	var Base = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function Base() {
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this.$_hash = $$_hash++;
	        this.$_disposed = false;
	    }
	    Base.prototype.dispose = function () {
	        if (!this.$_disposed && !this["$_disposing"]) {
	            this.$_disposed = true;
	            this["$_disposing"] = true;
	            this._doDispose();
	        }
	        return null;
	    };
	    Base.prototype._doDispose = function () {
	    };
	    Object.defineProperty(Base.prototype, "disposing", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this["$_disposing"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Base.prototype.isMe = function (hash) {
	        return hash == this.$_hash;
	    };
	    Base.prototype.$_getters = function (proto) {
	        var getters = proto.$$_getters_$$;
	        if (!getters) {
	            var props = Object.getOwnPropertyNames(proto);
	            getters = proto.$$_getters_$$ = [];
	            for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {
	                var prop = props_1[_i];
	                var p = Object.getOwnPropertyDescriptor(proto, prop);
	                if (p && p.get) {
	                    getters.push(prop);
	                }
	            }
	        }
	        return getters;
	    };
	    /**
	     * true를 리턴하면 assign()이 호출되지 않는다.
	     */
	    Base.prototype.assignSimple = function (source) {
	        return false;
	    };
	    Base.prototype.assignFrom = function (source) {
	        var proto = Object.getPrototypeOf(this);
	        if (source instanceof Base) {
	            var pSource = Object.getPrototypeOf(source);
	            var props = {};
	            while (pSource && pSource.constructor != Base) {
	                //let descs = Object.getOwnPropertyDescriptors(pSource);
	                //let descs = Object.getOwnPropertyNames(pSource);
	                var descs = this.$_getters(pSource);
	                //console.log(descs);
	                for (var i = 0, len = descs.length; i < len; i++) {
	                    var k = descs[i];
	                    if (!(k in props)) {
	                        props[k] = null;
	                        var p = Object.getOwnPropertyDescriptor(proto, k);
	                        if (p) {
	                            if (p.set) {
	                                var g = Object.getOwnPropertyDescriptor(pSource, k).get;
	                                if (g) {
	                                    p.set.call(this, g.call(source));
	                                }
	                            }
	                        }
	                        else {
	                            var proto2 = Object.getPrototypeOf(proto);
	                            while (proto2) {
	                                var p_1 = Object.getOwnPropertyDescriptor(proto2, k);
	                                if (p_1) {
	                                    if (p_1.set) {
	                                        var g = Object.getOwnPropertyDescriptor(pSource, k).get;
	                                        if (g) {
	                                            p_1.set.call(this, g.call(source));
	                                        }
	                                    }
	                                    proto2 = null;
	                                }
	                                else {
	                                    proto2 = Object.getPrototypeOf(proto2);
	                                }
	                            }
	                        }
	                    }
	                }
	                pSource = Object.getPrototypeOf(pSource);
	            }
	        }
	        else if (!this.assignSimple(source)) {
	            for (var k in source) {
	                var p = Object.getOwnPropertyDescriptor(proto, k);
	                if (p) {
	                    if (p.set) {
	                        p.set.call(this, source[k]);
	                    }
	                }
	                else {
	                    var proto2 = Object.getPrototypeOf(proto);
	                    while (proto2) {
	                        var p_2 = Object.getOwnPropertyDescriptor(proto2, k);
	                        if (p_2) {
	                            if (p_2.set) {
	                                p_2.set.call(this, source[k]);
	                            }
	                            proto2 = null;
	                        }
	                        else {
	                            proto2 = Object.getPrototypeOf(proto2);
	                        }
	                    }
	                }
	            }
	        }
	    };
	    Base.prototype.extend = function (source) {
	        for (var k in source) {
	            if (this.hasOwnProperty(k)) {
	                this[k] = source[k];
	            }
	        }
	    };
	    Base.prototype.toProxy = function () {
	        var proxy = {};
	        var proto = Object.getPrototypeOf(this);
	        while (proto && proto.constructor != Base) {
	            var descs = this.$_getters(proto);
	            for (var i = 0, len = descs.length; i < len; i++) {
	                var k = descs[i];
	                var p = Object.getOwnPropertyDescriptor(proto, k);
	                if (p) {
	                    if (p.get && p.set) {
	                        proxy[k] = p.get.call(this);
	                    }
	                }
	                else {
	                    var proto2 = Object.getPrototypeOf(proto);
	                    while (proto2) {
	                        var p_3 = Object.getOwnPropertyDescriptor(proto2, k);
	                        if (p_3) {
	                            if (p_3.get && p_3.set) {
	                                proxy[k] = p_3.get.call(this);
	                            }
	                            proto2 = null;
	                        }
	                        else {
	                            proto2 = Object.getPrototypeOf(proto2);
	                        }
	                    }
	                }
	            }
	            proto = Object.getPrototypeOf(proto);
	        }
	        return proxy;
	    };
	    return Base;
	}());
	exports.Base = Base;
	});

	unwrapExports(Base_1);
	var Base_2 = Base_1.Base;

	var DataField_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataField.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var DataField = /** @class */ (function (_super) {
	    __extends(DataField, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DataField(fieldName, dataType, length) {
	        if (dataType === void 0) { dataType = Types.ValueType.TEXT; }
	        if (length === void 0) { length = 0; }
	        var _this = _super.call(this) || this;
	        _this._index = -1;
	        _this._dataType = Types.ValueType.TEXT;
	        _this._subType = null;
	        _this._runType = Types.ValueType.TEXT;
	        _this._length = 0;
	        _this._subTypeEnabled = true;
	        _this._required = false;
	        _this._updatable = true;
	        _this._ranged = false;
	        _this._runSet = null;
	        _this._typeLock = false;
	        _this._calculated = false;
	        _this._objectKey = null;
	        _this._objectCallback = null;
	        fieldName && (_this.fieldName = fieldName);
	        if (dataType != null) {
	            if (dataType === Types.ValueType.DATE) {
	                dataType = Types.ValueType.DATETIME;
	                _this._subType = Types.ValueType.DATE;
	                _this._subTypeEnabled = true;
	            }
	            _this._dataType = dataType;
	        }
	        _this._length = length;
	        return _this;
	    }
	    Object.defineProperty(DataField.prototype, "hash", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** hash */
	        get: function () {
	            return this._fieldName;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "fieldName", {
	        /** fieldName */
	        get: function () {
	            return this._fieldName;
	        },
	        set: function (value) {
	            value = value && value.trim();
	            if (!value) {
	                throw new Error("Field name must be exists.");
	            }
	            if (value != this._orgFieldName) {
	                this._orgFieldName = value;
	                this._orgAttrName = "@" + value;
	                this._fieldName = value.toUpperCase();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "orgFieldName", {
	        /** orgFieldName */
	        get: function () {
	            return this._orgFieldName;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "orgAttrName", {
	        /** orgAttrName */
	        get: function () {
	            return this._orgAttrName;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "dataType", {
	        /** dataType */
	        get: function () {
	            return this._dataType;
	        },
	        set: function (value) {
	            if (value != this._dataType) {
	                this._dataType = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "runType", {
	        /** runType */
	        get: function () {
	            return this._runType;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "subType", {
	        /** subType */
	        get: function () {
	            return this._subType;
	        },
	        set: function (value) {
	            value = value || null;
	            if (value != this._subType) {
	                this._subType = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "subTypeEnabled", {
	        /** subTypeEnabled */
	        get: function () {
	            return this._subTypeEnabled;
	        },
	        set: function (value) {
	            if (value != this._subTypeEnabled) {
	                this._subTypeEnabled = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "baseField", {
	        /** baseField */
	        get: function () {
	            return this._baseField;
	        },
	        set: function (value) {
	            if (value != this._orgBaseField) {
	                this._orgBaseField = value;
	                this._baseField = value && value.toUpperCase();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "length", {
	        /** length */
	        get: function () {
	            return this._length;
	        },
	        set: function (value) {
	            value = value || 0;
	            if (value != this._length) {
	                this._length = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "set", {
	        /** set */
	        get: function () {
	            return this._set;
	        },
	        set: function (value) {
	            if (value !== this._set) {
	                this._set = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "minimum", {
	        /** minimum */
	        get: function () {
	            return this._minimum;
	        },
	        set: function (value) {
	            if (value != this._minimum) {
	                this._minimum = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "maximum", {
	        /** maximum */
	        get: function () {
	            return this._maximum;
	        },
	        set: function (value) {
	            if (value != this._maximum) {
	                this._maximum = value;
	                this.resetTypes();
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "required", {
	        /** required */
	        get: function () {
	            return this._required;
	        },
	        set: function (value) {
	            if (value != this._required) {
	                this._required = value;
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "header", {
	        /** header */
	        get: function () {
	            return this._header;
	        },
	        set: function (value) {
	            if (value != this._header) {
	                this._header = value;
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "defaultValue", {
	        /** defaultValue */
	        get: function () {
	            return this._defaultValue;
	        },
	        set: function (value) {
	            if (value != this._defaultValue) {
	                this._defaultValue = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "nullValue", {
	        /** nullValue */
	        get: function () {
	            return this._nullValue;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "booleanForamt", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "booleanFormat", {
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                if (value) {
	                    this._boolParser = new BooleanConverter_1.BooleanConverter(value);
	                }
	                else {
	                    this._boolParser = null;
	                }
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                if (value) {
	                    this._dateParser = new DateTimeReader_1.DateTimeReader(value);
	                    this._dateParser.amText = this._amText;
	                    this._dateParser.pmText = this._pmText;
	                    this._dateParser.baseYear = this._baseYear;
	                }
	                else {
	                    this._dateParser = null;
	                }
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "amText", {
	        /** amText */
	        get: function () {
	            return this._amText;
	        },
	        set: function (value) {
	            if (value != this._amText) {
	                this._amText = value;
	                if (this._dateParser) {
	                    this._dateParser.amText = value;
	                }
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "pmText", {
	        /** pmText */
	        get: function () {
	            return this._pmText;
	        },
	        set: function (value) {
	            if (value != this._pmText) {
	                this._pmText = value;
	                if (this._dateParser) {
	                    this._dateParser.pmText = value;
	                }
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "baseYear", {
	        /** baseYear */
	        get: function () {
	            return this._baseYear;
	        },
	        set: function (value) {
	            if (value != this._baseYear) {
	                this._baseYear = value;
	                if (this._dateParser) {
	                    this._dateParser.baseYear = value;
	                }
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "valueExpression", {
	        /** valueExpression */
	        get: function () {
	            return this._valueExpression;
	        },
	        set: function (value) {
	            if (value != this._valueExpression) {
	                this._valueExpression = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "valueCallback", {
	        /** valueCallback */
	        get: function () {
	            return this._valueCallback;
	        },
	        set: function (value) {
	            if (value != this._valueCallback) {
	                this._valueCallback = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "calculated", {
	        /** calulcated */
	        get: function () {
	            return !!this._valueExpression || !!this._valueCallback;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataField.prototype, "updatable", {
	        /** updatable */
	        get: function () {
	            //return this._updatable;
	            return (this._valueExpression || this._valueCallback) ? false : this._updatable;
	        },
	        set: function (value) {
	            if (value != this._updatable) {
	                this._updatable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataField.prototype.isEmpty = function (value) {
	        var v = value === undefined || value === null || value == "";
	        if (!v && this._dataType == Types.ValueType.NUMBER) {
	            v = isNaN(value);
	        }
	        return v;
	    };
	    DataField.prototype.isNull = function (value) {
	        if (value === undefined || value === null) {
	            return true;
	        }
	        switch (this._runType) {
	            case Types.ValueType.TEXT:
	            case Types.ValueType.CHAR:
	                if (value.length == 0) {
	                    return true;
	                }
	                break;
	            case Types.ValueType.NUMBER:
	            case Types.ValueType.UNUM:
	            case Types.ValueType.INT:
	            case Types.ValueType.UINT:
	                if (isNaN(value)) {
	                    return true;
	                }
	                break;
	        }
	        return false;
	    };
	    DataField.prototype.equalValues = function (v1, v2) {
	        return this._equalValues(v1, v2);
	    };
	    DataField.prototype.sameValues = function (v1, v2) {
	        return this._sameValues(v1, v2);
	    };
	    DataField.prototype.readValue = function (source) {
	        return this._readValue(source);
	    };
	    DataField.prototype.getBool = function (parser, value) {
	        if (typeof value == 'boolean') {
	            return value;
	        }
	        else {
	            var s = value;
	            return this._boolParser ? this._boolParser.toBool(s) : parser.toBool(s);
	        }
	    };
	    DataField.prototype.getDate = function (parser, value) {
	        if (value instanceof Date) {
	            return new Date(value.getTime());
	        }
	        else if (typeof value === 'number') {
	            return new Date(value);
	        }
	        else {
	            return this._dateParser ? this._dateParser.toDate(value) : parser.toDate(value);
	        }
	    };
	    DataField.prototype.clone = function () {
	        var fld = new DataField(this.fieldName, this.dataType, this.length);
	        fld._orgFieldName = this._orgFieldName;
	        fld._orgAttrName = this._orgAttrName;
	        fld._boolParser = this._boolParser;
	        fld._dateParser = this._dateParser;
	        fld._orgBaseField = this._orgBaseField;
	        fld._baseField = this._baseField;
	        fld._defaultValue = this._defaultValue;
	        fld._valueCallback = this._valueCallback;
	        fld._valueExpression = this._valueExpression;
	        return fld;
	    };
	    DataField.prototype.$_resetTypes = function (provider) {
	        this.resetTypes(provider);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataField.prototype.assignFrom = function (fld) {
	        if ("fieldName" in fld) {
	            this.fieldName = fld.fieldName;
	        }
	        if ("subType" in fld) {
	            this._subType = fld.subType;
	        }
	        if ("set" in fld) {
	            this._set = fld.set instanceof Array ? fld.set.slice() : null;
	        }
	        if ("defaultValue" in fld) {
	            this._defaultValue = fld.defaultValue;
	        }
	        if ("baseField" in fld) {
	            this.baseField = fld.baseField;
	        }
	        if ("booleanFormat" in fld) {
	            this.booleanFormat = fld.booleanFormat;
	        }
	        if ("amText" in fld) {
	            this._amText = fld.amText;
	        }
	        if ("pmText" in fld) {
	            this._pmText = fld.pmText;
	        }
	        if ("baseYear" in fld) {
	            this._baseYear = fld.baseYear;
	        }
	        if ("header" in fld) {
	            this._header = fld.header;
	        }
	        if ("datetimeFormat" in fld) {
	            this.datetimeFormat = fld.datetimeFormat;
	        }
	        if ("objectKey" in fld) {
	            this._objectKey = fld.objectKey;
	        }
	        if ("objectCallback" in fld) {
	            this._objectCallback = fld.objectCallback;
	        }
	        if ("required" in fld) {
	            this._required = fld.required;
	        }
	        if ("minimum" in fld) {
	            this._minimum = fld.minimum;
	        }
	        if ("maximum" in fld) {
	            this._maximum = fld.maximum;
	        }
	        if ("valueExpression" in fld) {
	            this.valueExpression = fld.valueExpression;
	        }
	        if ("valueCallback" in fld) {
	            this._valueCallback = fld.valueCallback;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataField.prototype.$_setIndex = function (value) {
	        this._index = value;
	    };
	    DataField.prototype.$_prepare = function (owner) {
	        this._owner = owner;
	    };
	    DataField.prototype.changed = function () {
	        if (this._owner) ;
	    };
	    DataField.prototype.resetTypes = function (provider) {
	        if (this._typeLock) {
	            return;
	        }
	        if (provider) {
	            this._ownerBoolParser = provider.boolParser;
	            this._ownerDateParser = provider.dateParser;
	        }
	        var type = this._dataType;
	        var stype = this._subType;
	        this._runType = type;
	        this._ranged = false;
	        if ((!this._owner || this._owner.subTypeEnabled) && this._subTypeEnabled) {
	            if (stype) {
	                switch (type) {
	                    case Types.ValueType.TEXT:
	                        if (stype == Types.ValueType.CHAR && this._length > 0) {
	                            type = stype;
	                        }
	                        break;
	                    case Types.ValueType.NUMBER:
	                        if (stype == Types.ValueType.UNUM || stype == Types.ValueType.INT || stype == Types.ValueType.UINT) {
	                            type = stype;
	                        }
	                        break;
	                    case Types.ValueType.DATETIME:
	                        if (stype == Types.ValueType.DATE /* || stype == GridValueType.TIME*/) {
	                            type = stype;
	                        }
	                        break;
	                }
	            }
	            this._runType = type;
	            this._runSet = null;
	            if (this._set && this._set.length) {
	                if (this._runType == Types.ValueType.DATETIME) {
	                    this._runSet = [];
	                    for (var i = 0; i < this._set.length; i++) {
	                        var d = this.getDate(this._ownerDateParser, this._set[i]);
	                        if (d) {
	                            this._runSet.push(d.getTime());
	                        }
	                    }
	                    if (this._runSet.length < 1) {
	                        this._runSet = null;
	                    }
	                }
	                else if (this._runType == Types.ValueType.DATE) {
	                    this._runSet = [];
	                    for (var i = 0; i < this._set.length; i++) {
	                        var d = this.getDate(this._ownerDateParser, this._set[i]);
	                        if (d) {
	                            var d2 = new Date(d.getDate());
	                            this._runSet.push(d2.setHours(0, 0, 0, 0));
	                        }
	                    }
	                    if (this._runSet.length < 1) {
	                        this._runSet = null;
	                    }
	                }
	                else {
	                    this._runSet = this._set;
	                }
	                this._ranged = true;
	            }
	            if (!this._ranged) {
	                switch (this._dataType) {
	                    case Types.ValueType.NUMBER:
	                        this._runMin = Number(this._minimum);
	                        this._runMax = Number(this._maximum);
	                        if (!isNaN(this._runMin) && !isNaN(this._runMax)) {
	                            this._ranged = this._runMin <= this._runMax;
	                        }
	                        else {
	                            this._ranged = !isNaN(this._runMin) || !isNaN(this._runMax);
	                        }
	                        break;
	                    case Types.ValueType.DATETIME:
	                    case Types.ValueType.DATE:
	                        this._runMin = this.getDate(this._ownerDateParser, this._minimum);
	                        this._runMax = this.getDate(this._ownerDateParser, this._maximum);
	                        if (this._runMin && this._runMax) {
	                            this._ranged = this._runMin.getTime() <= this._runMax.getTime();
	                        }
	                        else {
	                            this._ranged = this._runMin || this._runMax;
	                        }
	                        break;
	                }
	            }
	            switch (this._runType) {
	                case Types.ValueType.TEXT:
	                    this._equalValues = this.equalTextValues;
	                    this._sameValues = this.sameTextValues;
	                    this._readValue = this.readTextValue;
	                    this._nullValue = null;
	                    break;
	                case Types.ValueType.CHAR:
	                    this._equalValues = this.equalTextValues;
	                    this._sameValues = this.sameTextValues;
	                    this._readValue = this.readCharValue;
	                    this._nullValue = null;
	                    break;
	                case Types.ValueType.NUMBER:
	                    this._equalValues = this.equalNumberValues;
	                    this._sameValues = this.sameNumberValues;
	                    this._readValue = this.readNumberValue;
	                    this._nullValue = NaN;
	                    break;
	                case Types.ValueType.UNUM:
	                    this._equalValues = this.equalNumberValues;
	                    this._sameValues = this.sameNumberValues;
	                    this._readValue = this.readUnumValue;
	                    this._nullValue = NaN;
	                    break;
	                case Types.ValueType.INT:
	                    this._equalValues = this.equalNumberValues;
	                    this._sameValues = this.sameNumberValues;
	                    this._readValue = this.readIntValue;
	                    this._nullValue = NaN;
	                    break;
	                case Types.ValueType.UINT:
	                    this._equalValues = this.equalNumberValues;
	                    this._sameValues = this.sameNumberValues;
	                    this._readValue = this.readUintValue;
	                    this._nullValue = NaN;
	                    break;
	                case Types.ValueType.DATETIME:
	                    this._equalValues = this.equalDateValues;
	                    this._sameValues = this.sameDateValues;
	                    this._readValue = this.readDatetimeValue;
	                    this._nullValue = null;
	                    break;
	                case Types.ValueType.DATE:
	                    this._equalValues = this.equalDateValues;
	                    this._sameValues = this.sameDateValues;
	                    this._readValue = this.readDateValue;
	                    this._nullValue = null;
	                    break;
	                case Types.ValueType.BOOLEAN:
	                    this._equalValues = this.equalBoolValues;
	                    this._sameValues = this.sameBoolValues;
	                    this._readValue = this.readBooleanValue;
	                    this._nullValue = false;
	                    break;
	                case Types.ValueType.OBJECT:
	                    this._equalValues = this.equalObjectValues;
	                    this._sameValues = this.sameObjectValues;
	                    this._readValue = this.readObjectValues;
	                    this._nullValue = false;
	                    break;
	                default:
	                    this._equalValues = this.equalDummyValues;
	                    this._sameValues = this.sameDummyValues;
	                    this._readValue = this.readDummyValue;
	                    this._nullValue = undefined;
	                    break;
	            }
	        }
	    };
	    DataField.prototype.$_refreshFormats = function (owner) {
	        this._owner = owner;
	        if (this._dateParser) {
	            if (!this._dateParser.baseYear) {
	                this._dateParser.baseYear = owner.baseYear;
	            }
	            if (!this._dateParser.amText) {
	                this._dateParser.amText = owner.amText;
	            }
	            if (!this._dateParser.pmText) {
	                this._dateParser.pmText = owner.pmText;
	            }
	        }
	        this._ownerBoolParser = owner.boolParser;
	        this._ownerDateParser = owner.dateParser;
	    };
	    DataField.prototype.equalDummyValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.sameDummyValues = function (v1, v2) {
	        if (v1 === undefined || v1 === null) {
	            return v2 === undefined || v2 === null;
	        }
	        if (v2 === undefined || v2 === null) {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.equalTextValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.sameTextValues = function (v1, v2) {
	        if (v1 === undefined || v1 === null || v1 == "") {
	            return v2 === undefined || v2 === null || v2 == "";
	        }
	        if (v2 === undefined || v2 === null || v2 == "") {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.equalNumberValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        if (isNaN(v1)) {
	            return isNaN(v2);
	        }
	        if (isNaN(v2)) {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.sameNumberValues = function (v1, v2) {
	        if (isNaN(v1)) {
	            return isNaN(v2);
	        }
	        if (isNaN(v2)) {
	            return false;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.equalDateValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        if (!(v1 instanceof Date)) {
	            return !(v2 instanceof Date);
	        }
	        if (!(v2 instanceof Date)) {
	            return false;
	        }
	        return v1.getTime() == v2.getTime();
	    };
	    DataField.prototype.sameDateValues = function (v1, v2) {
	        if (!(v1 instanceof Date)) {
	            return !(v2 instanceof Date);
	        }
	        if (!(v2 instanceof Date)) {
	            return false;
	        }
	        return v1.getTime() == v2.getTime();
	    };
	    DataField.prototype.equalBoolValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        return Boolean(v1) == Boolean(v2);
	    };
	    DataField.prototype.sameBoolValues = function (v1, v2) {
	        if (v1 === undefined) {
	            return v2 === undefined;
	        }
	        if (v2 === undefined) {
	            return false;
	        }
	        return Boolean(v1) == Boolean(v2);
	    };
	    DataField.prototype.equalObjectValues = function (v1, v2) {
	        if (v1 === undefined || v2 === undefined) {
	            return (v1 === undefined) == (v2 === undefined);
	        }
	        return v1 === v2;
	    };
	    DataField.prototype.sameObjectValues = function (v1, v2) {
	        if (v1 == undefined || v2 == undefined) {
	            return v1 == undefined && v2 == undefined;
	        }
	        return v1 == v2;
	    };
	    DataField.prototype.readDummyValue = function (v) {
	        return v;
	    };
	    DataField.prototype.readTextValue = function (v) {
	        if (v === undefined) {
	            return v;
	        }
	        var s = (v === null) ? null : String(v);
	        if (this._ranged && this._runSet) {
	            if (this._runSet.indexOf(s) < 0) {
	                return undefined;
	            }
	        }
	        return s;
	    };
	    DataField.prototype.readCharValue = function (v) {
	        if (v === undefined) {
	            return v;
	        }
	        var s = (v === null) ? null : String(v);
	        if (s) {
	            s = s.substr(0, this._length);
	        }
	        if (this._ranged && this._runSet) {
	            if (this._runSet.indexOf(s) < 0) {
	                return undefined;
	            }
	        }
	        return s;
	    };
	    DataField.prototype.readNumberValue = function (v) {
	        if (v === undefined || v === null || v === "") {
	            return undefined;
	        }
	        var n = Number(v);
	        if (this._ranged) {
	            if (this._runSet) {
	                if (this._runSet.indexOf(n) < 0) {
	                    return undefined;
	                }
	            }
	            else {
	                if (!isNaN(this._runMin)) {
	                    n = Math.max(this._runMin, n);
	                }
	                if (!isNaN(this._runMax)) {
	                    n = Math.min(this._runMax, n);
	                }
	            }
	        }
	        return n;
	    };
	    DataField.prototype.readUnumValue = function (v) {
	        if (v === undefined || v === null || v === "") {
	            return undefined;
	        }
	        var n = Math.max(0, Number(v));
	        if (this._ranged) {
	            if (this._runSet) {
	                if (this._runSet.indexOf(n) < 0) {
	                    return undefined;
	                }
	            }
	            else {
	                if (!isNaN(this._runMin)) {
	                    n = Math.max(this._runMin, n);
	                }
	                if (!isNaN(this._runMax)) {
	                    n = Math.min(this._runMax, n);
	                }
	            }
	            n = Math.max(0, n);
	        }
	        return n;
	    };
	    DataField.prototype.readIntValue = function (v) {
	        if (v === undefined || v === null || v === "") {
	            return undefined;
	        }
	        var n = v >= 0 ? Math.floor(v) : Math.ceil(v);
	        if (this._ranged) {
	            if (this._runSet) {
	                if (this._runSet.indexOf(n) < 0) {
	                    return undefined;
	                }
	            }
	            else {
	                if (!isNaN(this._runMin)) {
	                    n = Math.max(this._runMin, n);
	                }
	                if (!isNaN(this._runMax)) {
	                    n = Math.min(this._runMax, n);
	                }
	            }
	            n = n >= 0 ? Math.floor(n) : Math.ceil(n);
	        }
	        return n;
	    };
	    DataField.prototype.readUintValue = function (v) {
	        if (v === undefined || v === null || v === "") {
	            return undefined;
	        }
	        var n = Math.max(0, Math.floor(Math.floor(v)));
	        if (this._ranged) {
	            if (this._runSet) {
	                if (this._runSet.indexOf(n) < 0) {
	                    return undefined;
	                }
	            }
	            else {
	                if (!isNaN(this._runMin)) {
	                    n = Math.max(this._runMin, n);
	                }
	                if (!isNaN(this._runMax)) {
	                    n = Math.min(this._runMax, n);
	                }
	            }
	            n = Math.max(0, Math.floor(Math.floor(n)));
	        }
	        return n;
	    };
	    DataField.prototype.readDatetimeValue = function (v) {
	        if (v === undefined) {
	            return undefined;
	        }
	        if (v === null) {
	            return this._nullValue;
	        }
	        var d = this.getDate(this._ownerDateParser, v);
	        if (d && this._ranged) {
	            if (this._runSet) {
	                var found = false;
	                for (var i = this._runSet.length; i--;) {
	                    if (d.getTime() == this._runSet[i]) {
	                        found = true;
	                        break;
	                    }
	                }
	                if (!found) {
	                    return undefined;
	                }
	            }
	            else {
	                if (this._runMin) {
	                    if (d.getTime() < this._runMin.getTime()) {
	                        d = new Date(this._runMin);
	                    }
	                }
	                if (this._runMax) {
	                    if (d.getTime() > this._runMax.getTime()) {
	                        d = new Date(this._runMax);
	                    }
	                }
	            }
	        }
	        return d;
	    };
	    DataField.prototype.readDateValue = function (v) {
	        if (v === undefined) {
	            return undefined;
	        }
	        if (v === null) {
	            return this._nullValue;
	        }
	        var d = this.getDate(this._ownerDateParser, v);
	        if (d) {
	            d.setHours(0, 0, 0, 0);
	            if (this._ranged) {
	                if (this._runSet) {
	                    var found = false;
	                    for (var i = this._runSet.length; i--;) {
	                        if (d.getTime() == this._runSet[i]) {
	                            found = true;
	                            break;
	                        }
	                    }
	                    if (!found) {
	                        return undefined;
	                    }
	                }
	                else {
	                    if (this._runMin) {
	                        if (d.getTime() < this._runMin.getTime()) {
	                            d = new Date(this._runMin);
	                        }
	                    }
	                    if (this._runMax) {
	                        if (d.getTime() > this._runMax.getTime()) {
	                            d = new Date(this._runMax);
	                        }
	                    }
	                }
	            }
	        }
	        return d;
	    };
	    DataField.prototype.readBooleanValue = function (v) {
	        if (v === undefined) {
	            return v;
	        }
	        if (v === null) {
	            return false;
	        }
	        var b = this.getBool(this._ownerBoolParser, v);
	        return b;
	    };
	    DataField.prototype.readObjectValues = function (v) {
	        if (typeof v === "string") {
	            try {
	                v = JSON.parse(v);
	            }
	            catch (e) {
	                throw new Error("Invalid Object String " + e + "\r\n" + v);
	            }
	        }
	        else if (typeof v != "object") {
	            try {
	                v = JSON.parse(v);
	            }
	            catch (e) {
	            }
	        }
	        return v;
	    };
	    DataField.prototype.$_compareObject = function (v1, v2, row1, row2) {
	        var key = this._objectKey;
	        var fn = this._objectCallback;
	        var val1 = fn ? fn(this.orgFieldName, row1, v1) : key && v1.hasOwnProperty(key) ? v1[key] : null;
	        var val2 = fn ? fn(this.orgFieldName, row2, v2) : key && v2.hasOwnProperty(key) ? v2[key] : null;
	        return val1 > val2 ? 1 : val1 < v2 ? 0 : -1;
	    };
	    DataField.prototype.$_calculateValue = function (runtime, rowId, fieldName, fields, orgFields, values) {
	        if (this._valueCallback) {
	            return this._valueCallback(rowId, fieldName, orgFields, values);
	        }
	        else if (this._valueExpression) ;
	        return undefined;
	    };
	    return DataField;
	}(Base_1.Base));
	exports.DataField = DataField;
	});

	unwrapExports(DataField_1);
	var DataField_2 = DataField_1.DataField;

	var DateTimeWriter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DateTimeWriter.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });

	var $$_DT_DATE_TOKENS = [
	    "yy", "yyyy",
	    "M", "MM",
	    "d", "dd",
	    "a",
	    "H", "HH", "h", "hh",
	    "m", "mm",
	    "s", "ss",
	    "S", "SS", "SSS"
	];
	var $$_DT_DATE_SEPARATORS = [
	    ".", "/", "-", ":"
	];
	var U_Z = "Z".charCodeAt(0);
	var L_Z = "z".charCodeAt(0);
	var U_A = "A".charCodeAt(0);
	var L_A = "a".charCodeAt(0);
	var L_Y = "y".charCodeAt(0);
	var U_M = "M".charCodeAt(0);
	var L_M = "m".charCodeAt(0);
	var L_D = "d".charCodeAt(0);
	var U_H = "H".charCodeAt(0);
	var L_H = "h".charCodeAt(0);
	var U_S = "S".charCodeAt(0);
	var L_S = "s".charCodeAt(0);
	var pad = function (v) {
	    return (v < 10) ? "0" + v : String(v);
	};
	var pad3 = function (v) {
	    return (v < 10) ? "00" + v : (v < 100) ? "0" : String(v);
	};
	var DateTimeWriter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DateTimeWriter(format) {
	        this._baseYear = 2000;
	        this._preserveTime = false;
	        this._hasAmPm = false;
	        this._formatString = "";
	        this.formatString = format;
	    }
	    DateTimeWriter.getFormatter = function (format) {
	        var f = DateTimeWriter.Formatters[format];
	        if (!f) {
	            DateTimeWriter.Formatters[format] = f = new DateTimeWriter(format);
	        }
	        return f;
	    };
	    Object.defineProperty(DateTimeWriter, "Default", {
	        get: function () {
	            return DateTimeWriter.getFormatter(DateTimeWriter.DEFAULT_FORMAT);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeWriter.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeWriter.prototype, "formatString", {
	        /** formatString */
	        get: function () {
	            return this._formatString;
	        },
	        set: function (value) {
	            value = value || DateTimeWriter.DEFAULT_FORMAT;
	            if (value != this._formatString) {
	                this._tokens = [];
	                this.parse(value);
	                this._formatString = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DateTimeWriter.prototype.getText = function (d) {
	        if (!this._tokens) {
	            return "";
	        }
	        var date = d instanceof Date ? d : new Date(d);
	        var tokens = this._tokens;
	        var s = "";
	        for (var i = 0, cnt = tokens.length; i < cnt; i++) {
	            var t = tokens[i];
	            var len = t.length;
	            switch (t.charCodeAt(0)) {
	                case L_Y:
	                    s += len > 2 ? date.getFullYear() : pad(date.getFullYear() % 100);
	                    break;
	                case U_M:
	                    s += len > 1 ? pad(date.getMonth() + 1) : (date.getMonth() + 1);
	                    break;
	                case L_D:
	                    s += len > 1 ? pad(date.getDate()) : date.getDate();
	                    break;
	                case U_H:
	                    s += len > 1 ? pad(date.getHours()) : date.getHours();
	                    break;
	                case L_H:
	                    if (this._hasAmPm) {
	                        var h = date.getHours();
	                        if (h == 0) {
	                            h = 12;
	                        }
	                        else if (h > 12) {
	                            h = h - 12;
	                        }
	                        s += len > 1 ? pad(h) : h;
	                    }
	                    else {
	                        s += len > 1 ? pad(date.getHours()) : date.getHours();
	                    }
	                    break;
	                case L_M:
	                    s += len > 1 ? pad(date.getMinutes()) : date.getMinutes();
	                    break;
	                case L_S:
	                    s += len > 1 ? pad(date.getSeconds()) : date.getSeconds();
	                    break;
	                case L_A:
	                case U_A:
	                    if (date.getHours() < 12) {
	                        s += this._amText;
	                    }
	                    else {
	                        s += this._pmText;
	                    }
	                    break;
	                case U_S:
	                    var v = date.getMilliseconds();
	                    if (len == 3)
	                        s += pad3(v);
	                    else if (len == 2)
	                        s += pad(v);
	                    else
	                        s += v.toString().substr(0, len);
	                    break;
	                /*
	                 case U_Y:
	                 break;
	                 case U_D:
	                 s += day of year
	                 break;
	                 */
	                default:
	                    s += t;
	            }
	        }
	        return s;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DateTimeWriter.prototype.parseDateFormatTokens = function (format) {
	        var tokens = [];
	        if (format) {
	            var str = format.trim();
	            var len = str.length;
	            var i = 0;
	            while (i < len) {
	                var tok = str.charAt(i);
	                if ($$_DT_DATE_SEPARATORS.indexOf(tok) >= 0) {
	                    tokens.push(tok);
	                    i++;
	                }
	                else {
	                    var p = i++;
	                    while (i < len && str.charAt(i) == tok) {
	                        i++;
	                    }
	                    tok = str.substring(p, i);
	                    if ($$_DT_DATE_TOKENS.indexOf(tok) < 0) {
	                        var c = tok.charCodeAt(0);
	                        if (c >= U_A && c <= U_Z || c >= L_A && c <= L_Z) {
	                            throw new Error("Invalid datetime write format: " + format);
	                        }
	                    }
	                    tokens.push(tok);
	                }
	                if (i < len && Utils_1.Utils.isWhiteSpace(tok = str.charAt(i))) {
	                    tokens.push(tok);
	                    while (i < len && Utils_1.Utils.isWhiteSpace(str.charAt(i))) {
	                        i++;
	                    }
	                }
	            }
	        }
	        return tokens;
	    };
	    DateTimeWriter.prototype.parse = function (fmt) {
	        this._amText = "AM";
	        this._pmText = "PM";
	        if (fmt) {
	            var arr = fmt.split(";");
	            this._format = arr[0] || DateTimeWriter.DEFAULT_FORMAT;
	            this._tokens = this.parseDateFormatTokens(this._format);
	            this._hasAmPm = this._tokens.indexOf("a") >= 0 || this._tokens.indexOf("A") >= 0;
	            if (arr.length > 1 && arr[1]) {
	                var ampms = arr[1].split(",");
	                if (ampms.length > 0 && ampms[0]) {
	                    this._amText = ampms[0];
	                }
	                if (ampms.length > 1 && ampms[1]) {
	                    this._pmText = ampms[1];
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DateTimeWriter.DEFAULT_FORMAT = "yyyy/MM/dd";
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DateTimeWriter.Formatters = {};
	    return DateTimeWriter;
	}());
	exports.DateTimeWriter = DateTimeWriter;
	});

	unwrapExports(DateTimeWriter_1);
	var DateTimeWriter_2 = DateTimeWriter_1.DateTimeWriter;

	var BooleanFormatter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// BooleanFormatter.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var BooleanFormatter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function BooleanFormatter(format) {
	        this.$_parse(this._format = format);
	    }
	    BooleanFormatter.getFormatter = function (format) {
	        var f = BooleanFormatter.Formatters[format];
	        if (!f) {
	            BooleanFormatter.Formatters[format] = f = new BooleanFormatter(format);
	        }
	        return f;
	    };
	    Object.defineProperty(BooleanFormatter.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    BooleanFormatter.prototype.formatValue = function (v) {
	        return (v === undefined) ? this._nullText : v ? this._trueText : this._falseText;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    BooleanFormatter.prototype.$_parse = function (format) {
	        this._falseText = this._trueText = null;
	        if (format) {
	            var arr = format.split(/[;\:]/);
	            this._falseText = arr[0];
	            if (arr.length > 0) {
	                this._trueText = arr[1];
	            }
	            if (arr.length > 1) {
	                this._nullText = arr[2];
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    BooleanFormatter.Formatters = {};
	    return BooleanFormatter;
	}());
	exports.BooleanFormatter = BooleanFormatter;
	});

	unwrapExports(BooleanFormatter_1);
	var BooleanFormatter_2 = BooleanFormatter_1.BooleanFormatter;

	var DecimalFormatter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DecimalFormatter.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });

	var DEC_SEP = ".";
	var GRP_SEP = ",";
	var decimalPlaces = function (num) {
	    var match = ('' + num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
	    if (!match) {
	        return 0;
	    }
	    return Math.max(0, 
	    // Number of digits right of decimal point.
	    (match[1] ? match[1].length : 0)
	        // Adjust for scientific notation.
	        - (match[2] ? +match[2] : 0));
	};
	var _isRoundChar = function (c) {
	    return Utils_1.Utils.included(c, "c", "f", "C", "F", "a", "A");
	};
	var DecimalFormatter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DecimalFormatter(format) {
	        this._optDecimal = false;
	        this._groupPos = 0;
	        this._replacement = "$&,";
	        this._displayMinusZero = true;
	        this._minDigits = 0;
	        this._maxDigits = 0;
	        this._minInts = 0;
	        this._maxInts = 0;
	        this.parse(this._format = format);
	    }
	    DecimalFormatter.getFormatter = function (format) {
	        var f = DecimalFormatter.Formatters[format];
	        if (!f) {
	            DecimalFormatter.Formatters[format] = f = new DecimalFormatter(format);
	        }
	        return f;
	    };
	    Object.defineProperty(DecimalFormatter, "Default", {
	        get: function () {
	            return DecimalFormatter.getFormatter(DecimalFormatter.DEFAULT_FORMAT);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DecimalFormatter.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DecimalFormatter.prototype, "separator", {
	        /** separator */
	        get: function () {
	            return this._seperator;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DecimalFormatter.prototype, "groupSep", {
	        /** groupSep */
	        get: function () {
	            return this._groupSep;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DecimalFormatter.prototype, "minDigits", {
	        /** minDigits */
	        get: function () {
	            return this._minDigits;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DecimalFormatter.prototype, "maxDigits", {
	        /** maxDigits */
	        get: function () {
	            return this._maxDigits;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DecimalFormatter.prototype.parse = function (format) {
	        this._minDigits = 0;
	        this._maxDigits = 0;
	        this._minInts = 0;
	        this._maxInts = 0;
	        this._parse(format);
	    };
	    DecimalFormatter.prototype.getText = function (value) {
	        var v = Number(value);
	        if (isNaN(v)) {
	            return "";
	        }
	        else {
	            var digits = this._minDigits;
	            var p = 0;
	            if (this._optDecimal) {
	                var dlen = decimalPlaces(v);
	                digits = Math.min(Math.max(dlen, this._minDigits), this._maxDigits);
	            }
	            if (digits > 0 && this._round) {
	                p = Math.pow(10, digits);
	                switch (this._round) {
	                    case "c":
	                        v = Math.ceil(p * v) / p;
	                        break;
	                    case "f":
	                        v = Math.floor(p * v) / p;
	                        break;
	                }
	            }
	            v = (this._round === "a") ? Math.abs(v) : v;
	            v = Number(v.toPrecision(15));
	            var fixed = v.toFixed(digits);
	            try {
	                !this._displayMinusZero && (p = parseFloat(fixed)) === Math.abs(parseFloat(fixed)) && p === 0 && (fixed = Math.abs(v).toFixed(digits));
	            }
	            catch (e) {
	            }
	            if (this._seperator) {
	                fixed = fixed.replace(DEC_SEP, this._seperator);
	            }
	            if (this._reg) {
	                if (digits)
	                    return fixed.replace(this._regDecimal, this._replacement);
	                else
	                    return fixed.replace(this._reg, this._replacement);
	            }
	            else {
	                return fixed;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DecimalFormatter.prototype._parse = function (format) {
	        if (format) {
	            format = format.trim();
	        }
	        if (!format) {
	            return;
	        }
	        var seperator = DEC_SEP;
	        var groupSep = GRP_SEP;
	        if (format.indexOf(";") > -1) {
	            var fmts = format.split(";");
	            format = fmts[0];
	            if (fmts.length > 1 && fmts[1] && !_isRoundChar(fmts[1])) {
	                seperator = fmts[1];
	            }
	            if (fmts.length > 2 && fmts[2] && !_isRoundChar(fmts[2])) {
	                groupSep = fmts[2];
	            }
	            this._round = fmts[3] || fmts[2] || fmts[1];
	            this._round = _isRoundChar(this._round) ? this._round.toLowerCase() : this._round;
	        }
	        this._seperator = seperator == DEC_SEP ? null : seperator;
	        this._groupSep = groupSep == GRP_SEP ? null : groupSep;
	        var len = format.length;
	        var period = format.indexOf(DEC_SEP);
	        this._optDecimal = format.indexOf("#", period) > 0;
	        if (period >= 0) {
	            var i = period + 1;
	            for (; i < len; i++) {
	                if (format.charAt(i) == "0") {
	                    this._minDigits++;
	                    this._maxDigits++;
	                }
	                else {
	                    break;
	                }
	            }
	            for (; i < len; i++) {
	                if (format.charAt(i) == "#") {
	                    this._maxDigits++;
	                }
	                else {
	                    break;
	                }
	            }
	            format = format.substr(0, period);
	        }
	        if (format) {
	            var len_1 = format.length;
	            if (format.charAt(len_1 - 1) == GRP_SEP) {
	                this._groupPos = 3; // locale default
	                format = format.substr(0, len_1 - 1);
	            }
	        }
	        if (format) {
	            var len_2 = format.length;
	            var zero = true;
	            for (var i = len_2 - 1; i >= 0; i--) {
	                var c = format.charAt(i);
	                if (c == "0" && zero) {
	                    this._minInts++;
	                    this._maxInts++;
	                }
	                else if (this._groupPos == 0 && c == GRP_SEP) {
	                    this._groupPos = len_2 - i - 1;
	                }
	                else if (c == "#") {
	                    zero = false;
	                }
	                else {
	                    break;
	                }
	            }
	        }
	        if (this._groupPos > 0) {
	            this._replacement = "$&" + groupSep;
	            this._reg = new RegExp('\\d(?=(\\d{' + this._groupPos + '})+($|\\' + seperator + '))', 'g');
	            this._regDecimal = new RegExp('\\d(?=(\\d{' + this._groupPos + '})+\\' + seperator + ')', 'g');
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DecimalFormatter.DEFAULT_FORMAT = "#,##0.0";
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DecimalFormatter.Formatters = {};
	    return DecimalFormatter;
	}());
	exports.DecimalFormatter = DecimalFormatter;
	});

	unwrapExports(DecimalFormatter_1);
	var DecimalFormatter_2 = DecimalFormatter_1.DecimalFormatter;

	var DataOutputOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataOutputOptions.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var DataOutputOptions = /** @class */ (function (_super) {
	    __extends(DataOutputOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataOutputOptions(config) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._datetimeWriter = null;
	        _this._booleanFormatter = null;
	        _this._numberFormatter = null;
	        _this.assignFrom(config);
	        return _this;
	    }
	    Object.defineProperty(DataOutputOptions.prototype, "datetimeFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                if (value) {
	                    this._datetimeWriter = DateTimeWriter_1.DateTimeWriter.getFormatter(value);
	                }
	                else {
	                    this._datetimeWriter = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                if (value) {
	                    this._booleanFormatter = BooleanFormatter_1.BooleanFormatter.getFormatter(value);
	                }
	                else {
	                    this._booleanFormatter = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "numberFormat", {
	        /** numberFormat */
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                if (value) {
	                    this._numberFormatter = DecimalFormatter_1.DecimalFormatter.getFormatter(value);
	                }
	                else {
	                    this._numberFormatter = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "datetimeCallback", {
	        /** datetimeCallback */
	        get: function () {
	            return this._datetimeCallback;
	        },
	        set: function (value) {
	            this._datetimeCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "booleanCallback", {
	        /** booleanCallback */
	        get: function () {
	            return this._booleanCallback;
	        },
	        set: function (value) {
	            this._booleanCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "numberCallback", {
	        /** numberCallback */
	        get: function () {
	            return this._numberCallback;
	        },
	        set: function (value) {
	            this._numberCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "nullDateText", {
	        /** nullDateText */
	        get: function () {
	            return this._nullDateText;
	        },
	        set: function (value) {
	            this._nullDateText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "nullText", {
	        /** nullText */
	        get: function () {
	            return this._nullText;
	        },
	        set: function (value) {
	            this._nullText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "nanText", {
	        /** nanText */
	        get: function () {
	            return this._nanText;
	        },
	        set: function (value) {
	            this._nanText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "datetimeWriter", {
	        get: function () {
	            return this._datetimeWriter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "booleanFormatter", {
	        get: function () {
	            return this._booleanFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataOutputOptions.prototype, "numberFormatter", {
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return DataOutputOptions;
	}(Base_1.Base));
	exports.DataOutputOptions = DataOutputOptions;
	});

	unwrapExports(DataOutputOptions_1);
	var DataOutputOptions_2 = DataOutputOptions_1.DataOutputOptions;

	var ExpressionStatement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ExpressionStatement.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	var ExpressionStatementError = /** @class */ (function (_super) {
	    __extends(ExpressionStatementError, _super);
	    function ExpressionStatementError(message, tokenPos) {
	        var _this = _super.call(this, message) || this;
	        _this.message = message;
	        _this.tokenPos = tokenPos;
	        return _this;
	    }
	    return ExpressionStatementError;
	}(Error));
	exports.ExpressionStatementError = ExpressionStatementError;
	var $$_SEP_HEAD = "${";
	var $$_SEP_TAIL = "}";
	var LiteralToken = /** @class */ (function () {
	    function LiteralToken(literal) {
	        this.literal = literal;
	    }
	    LiteralToken.prototype.evaluate = function (runtime) {
	        return this.literal;
	    };
	    return LiteralToken;
	}());
	var IdentToken = /** @class */ (function () {
	    function IdentToken(ident, idKey) {
	        if (idKey === void 0) { idKey = -1; }
	        this.ident = ident;
	        this.idKey = idKey;
	    }
	    IdentToken.prototype.evaluate = function (runtime) {
	        if (this.idKey < 0) {
	            this.idKey = runtime.isIdentifier(this.ident);
	        }
	        return runtime.evaluateIdentifier(this.idKey);
	    };
	    return IdentToken;
	}());
	var IndexerToken = /** @class */ (function () {
	    function IndexerToken(ident, idKey, capital) {
	        if (idKey === void 0) { idKey = -1; }
	        if (capital === void 0) { capital = false; }
	        this.ident = ident;
	        this.idKey = idKey;
	        this.capital = capital;
	    }
	    IndexerToken.prototype.evaluate = function (runtime) {
	        var ident = this.ident;
	        var bo = ident.indexOf("[");
	        var bc = ident.indexOf("]");
	        if (bo < bc) {
	            var s = ident.substr(0, bo).trim();
	            var strIdx = ident.substring(bo + 1, bc).replace(/'|"/g, "").trim();
	            if (this.idKey < 0) {
	                this.idKey = runtime.isIdentifier(s);
	            }
	            return runtime.evaluateIndexerS(this.idKey, strIdx, this.capital);
	        }
	    };
	    return IndexerToken;
	}());
	var ExpressionStatement = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ExpressionStatement(source, silentError) {
	        if (silentError === void 0) { silentError = false; }
	        this._silentError = false;
	        this._tokens = [];
	        this._source = source;
	        this._silentError = silentError;
	        source && this._parse(source);
	    }
	    Object.defineProperty(ExpressionStatement.prototype, "source", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** source */
	        get: function () {
	            return this._source;
	        },
	        set: function (value) {
	            if (value != this._source) {
	                this._source = value;
	                this._parse(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ExpressionStatement.prototype.evaluate = function (runtime) {
	        try {
	            var tokens = this._tokens;
	            var s = "";
	            for (var i = 0, cnt = tokens.length; i < cnt; i++) {
	                var v = tokens[i].evaluate(runtime);
	                s += v || "";
	            }
	            return s;
	        }
	        catch (err) {
	            if (!this._silentError) {
	                throw new err;
	            }
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ExpressionStatement.prototype._parse = function (str) {
	        this._tokens = [];
	        if (!str) {
	            return;
	        }
	        var len = str.length;
	        var i = 0;
	        var token;
	        while (i < len) {
	            var p = str.indexOf($$_SEP_HEAD, i);
	            if (p >= 0) {
	                var q = str.indexOf($$_SEP_TAIL, p + 2);
	                if (q >= 0) {
	                    if (p > i) {
	                        var s_1 = str.substring(i, p);
	                        token = new LiteralToken(s_1);
	                        this._tokens.push(token);
	                    }
	                    var s = str.substring(p + 2, q).trim();
	                    if (s) {
	                        var bo = void 0;
	                        var bc = void 0;
	                        if ((bo = s.indexOf("[")) && (bc = s.indexOf("]")) && (bo < bc)) {
	                            token = new IndexerToken(s);
	                        }
	                        else {
	                            token = new IdentToken(s);
	                        }
	                        this._tokens.push(token);
	                    }
	                    i = q + 1;
	                }
	                else {
	                    p = -1;
	                }
	            }
	            if (p < 0) {
	                var s = str.substr(i, len);
	                token = new LiteralToken(s);
	                this._tokens.push(token);
	                break;
	            }
	        }
	    };
	    return ExpressionStatement;
	}());
	exports.ExpressionStatement = ExpressionStatement;
	});

	unwrapExports(ExpressionStatement_1);
	var ExpressionStatement_2 = ExpressionStatement_1.ExpressionStatementError;
	var ExpressionStatement_3 = ExpressionStatement_1.ExpressionStatement;

	var EventAware_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EventAware.ts
	// 2019. 06. 30. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var EventAware = /** @class */ (function (_super) {
	    __extends(EventAware, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EventAware() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._listeners = [];
	        return _this;
	    }
	    EventAware.prototype._doDispose = function () {
	        this._listeners = null;
	        return _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EventAware.prototype, "listenerCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._listeners.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EventAware.prototype.addListener = function (listener) {
	        if (listener != null && this._listeners.indexOf(listener) < 0) {
	            this._listeners.push(listener);
	        }
	        return this;
	    };
	    EventAware.prototype.removeListener = function (listener) {
	        if (listener != null) {
	            var i = this._listeners.indexOf(listener);
	            if (i >= 0) {
	                this._listeners.splice(i, 1);
	            }
	        }
	        return this;
	    };
	    EventAware.prototype.clearListener = function () {
	        this._listeners.length = 0;
	    };
	    EventAware.prototype.fireEvent = function (event) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        var args2 = Array.prototype.slice.call(arguments, 0);
	        args2[0] = this;
	        for (var i = 0, cnt = this._listeners.length; i < cnt; i++) {
	            var listener = this._listeners[i];
	            var callback = listener[event];
	            callback && callback.apply(listener, args2);
	        }
	    };
	    EventAware.prototype.fireConfirmEvent = function (event) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        var args2 = Array.prototype.slice.call(arguments, 0);
	        args2[0] = this;
	        for (var i = 0, cnt = this._listeners.length; i < cnt; i++) {
	            var listener = this._listeners[i];
	            var callback = listener[event];
	            if (callback) {
	                var ret = callback.apply(listener, args2);
	                if (typeof ret === "boolean" && !ret) {
	                    return false;
	                }
	            }
	        }
	        return true;
	    };
	    EventAware.prototype.fireMessageEvent = function (event) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        var args2 = Array.prototype.slice.call(arguments, 0);
	        args2[0] = this;
	        for (var i = 0, cnt = this._listeners.length; i < cnt; i++) {
	            var listener = this._listeners[i];
	            var callback = listener[event];
	            if (callback) {
	                var ret = callback.apply(listener, args2);
	                if (typeof ret === "string" && ret) {
	                    return ret;
	                }
	            }
	        }
	        return null;
	    };
	    EventAware.prototype.fireObjectEvent = function (event) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        var args2 = Array.prototype.slice.call(arguments, 0);
	        args2[0] = this;
	        for (var i = 0, cnt = this._listeners.length; i < cnt; i++) {
	            var listener = this._listeners[i];
	            var callback = listener[event];
	            if (callback) {
	                var ret = callback.apply(listener, args2);
	                if (ret != null) {
	                    return ret;
	                }
	            }
	        }
	        return null;
	    };
	    return EventAware;
	}(Base_1.Base));
	exports.EventAware = EventAware;
	});

	unwrapExports(EventAware_1);
	var EventAware_2 = EventAware_1.EventAware;

	var Expression = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Expression.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var ExpressionSyntaxError = /** @class */ (function (_super) {
	    __extends(ExpressionSyntaxError, _super);
	    function ExpressionSyntaxError(message, tokenPos) {
	        var _this = _super.call(this, message) || this;
	        _this.message = message;
	        _this.tokenPos = tokenPos;
	        return _this;
	    }
	    return ExpressionSyntaxError;
	}(Error));
	exports.ExpressionSyntaxError = ExpressionSyntaxError;
	var ExpressionEvaluationError = /** @class */ (function (_super) {
	    __extends(ExpressionEvaluationError, _super);
	    function ExpressionEvaluationError(message) {
	        var _this = _super.call(this, message) || this;
	        _this.message = message;
	        return _this;
	    }
	    return ExpressionEvaluationError;
	}(Error));
	exports.ExpressionEvaluationError = ExpressionEvaluationError;
	var _pad = function (value, len, c) {
	    len = Math.max(len || 2, 1);
	    c = c || '0';
	    return new Array(len - String(value).length + 1).join(c) + value;
	};
	var $$_createTokenArray = function () {
	    var args = [];
	    for (var _i = 0; _i < arguments.length; _i++) {
	        args[_i] = arguments[_i];
	    }
	    var arr = [];
	    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
	        var arg = args_1[_a];
	        arr[arg] = true;
	    }
	    return arr;
	};
	var IS_CHECK = $$_createTokenArray(26 /* Is */, 27 /* IsNot */);
	var IS_RELATIVE = $$_createTokenArray(40 /* Equal */, 45 /* NotEqual */, 46 /* Like */, 47 /* NotLike */, 48 /* ILike */, 49 /* NotILike */, 50 /* Match */, 51 /* NotMatch */, 52 /* IMatch */, 53 /* NotIMatch */, 41 /* Greater */, 42 /* GreaterEqual */, 43 /* Lower */, 44 /* LowerEqual */);
	var IS_ADDITIVE = $$_createTokenArray(4 /* Minus */, 5 /* Plus */, 18 /* Or */, 19 /* Xor */);
	var IS_MULTIPLICATIVE = $$_createTokenArray(11 /* And */, 3 /* Star */, 2 /* Slash */, 14 /* Div */, 15 /* Mod */, 16 /* Shl */, 17 /* Shr */);
	var ExpressionLexer = /** @class */ (function () {
	    function ExpressionLexer() {
	        this.IS_IDENT = [];
	        this.IS_INTEGER = [];
	        this.IS_NUMBER = [];
	        this.IS_WHITE = [];
	        this.IS_END = [];
	        this.QUOTATION = "\"".charCodeAt(0);
	        this.SQUOTATION = "'".charCodeAt(0);
	        this.BACKSLASH = "\\".charCodeAt(0);
	        this.Keywords = {
	            "str": 20 /* ToStr */,
	            "num": 21 /* ToNum */,
	            "bool": 23 /* ToBool */,
	            "not": 13 /* Not */,
	            "len": 24 /* Length */,
	            "and": 11 /* And */,
	            "in": 12 /* In */,
	            "mod": 15 /* Mod */,
	            "or": 18 /* Or */,
	            "div": 14 /* Div */,
	            "shl": 16 /* Shl */,
	            "shr": 17 /* Shr */,
	            "xor": 19 /* Xor */,
	            "is": 26 /* Is */,
	            "like": 46 /* Like */,
	            "ilike": 48 /* ILike */,
	            "match": 50 /* Match */,
	            "imatch": 52 /* IMatch */,
	            "defined": 35 /* Defined */,
	            "null": 34 /* Null */,
	            "empty": 36 /* Empty */,
	            "nan": 37 /* NaN */,
	            "datestr": 90 /* ToDateStr */,
	            "year": 91 /* ToYear */,
	            "month": 92 /* ToMonth */,
	            "day": 93 /* ToDay */,
	            "hour": 94 /* ToHour */,
	            "rounddown": 95 /* ToRoundDown */,
	        };
	        this._procs = null;
	        this._source = null;
	        this._len = 0;
	        this._tokenId = 0;
	        this._run = 0;
	        this._runAhead = 0;
	        this._nextRun = 0;
	        this._lineNo = 0;
	        this._linePos = 0;
	        this._tokenPos = 0;
	        for (var i = 0; i < 256; i++) {
	            this.IS_IDENT[i] = (i == "_".charCodeAt(0)) ||
	                (i >= "0".charCodeAt(0) && i <= "9".charCodeAt(0)) ||
	                (i >= "a".charCodeAt(0) && i <= "z".charCodeAt(0)) ||
	                (i >= "A".charCodeAt(0) && i <= "Z".charCodeAt(0));
	            this.IS_INTEGER[i] =
	                (i >= "0".charCodeAt(0) && i <= "9".charCodeAt(0)) ||
	                    (i >= "a".charCodeAt(0) && i <= "f".charCodeAt(0)) ||
	                    (i >= "A".charCodeAt(0) && i <= "F".charCodeAt(0));
	            this.IS_NUMBER[i] =
	                (i >= "0".charCodeAt(0) && i <= "9".charCodeAt(0)) ||
	                    i == ".".charCodeAt(0) || i == "e".charCodeAt(0) || i == "E".charCodeAt(0);
	            this.IS_WHITE[i] = (i >= 1 && i <= 9) || (i == 11) || (i >= 14 && i <= 32);
	            this.IS_END[i] = (i == 0); // || (i == 10) || (i == 13); // 개행문자는 끝이 아니므로 제외
	        }
	        this.initProcs();
	    }
	    ExpressionLexer.prototype.clear = function () {
	        this._source = null;
	    };
	    ExpressionLexer.prototype.next = function () {
	        var c = this._source.charCodeAt(this._run);
	        this._tokenPos = this._run;
	        if (c < 256) {
	            this._procs[c].call(this);
	        }
	        else {
	            this.identProc();
	        }
	    };
	    ExpressionLexer.prototype.unkownProc = function () {
	        this._tokenId = 0 /* Unknown */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.symbolProc = function () {
	        this._tokenId = 80 /* Symbol */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.commaProc = function () {
	        this._tokenId = 32 /* Comma */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.crProc = function () {
	        this._tokenId = 33 /* CRLF */;
	        if (this._source.charCodeAt(this._run + 1) == 10) {
	            this._run += 2;
	        }
	        else {
	            this._run++;
	        }
	        this._lineNo++;
	        this._linePos = this._run;
	    };
	    ExpressionLexer.prototype.lfProc = function () {
	        this._tokenId = 33 /* CRLF */;
	        this._run++;
	        this._lineNo++;
	        this._linePos = this._run;
	    };
	    ExpressionLexer.prototype.equalProc = function () {
	        this._tokenId = 40 /* Equal */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.greaterProc = function () {
	        if (this._source.charAt(this._run + 1) == "=") {
	            this._tokenId = 42 /* GreaterEqual */;
	            this._run += 2;
	        }
	        else {
	            this._tokenId = 41 /* Greater */;
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.lowerProc = function () {
	        if (this._source.charAt(this._run + 1) == "=") {
	            this._tokenId = 44 /* LowerEqual */;
	            this._run += 2;
	        }
	        else if (this._source.charAt(this._run + 1) == ">") {
	            this._tokenId = 45 /* NotEqual */;
	            this._run += 2;
	        }
	        else {
	            this._tokenId = 43 /* Lower */;
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.nextIdent = function () {
	        var i = this._run;
	        while (i < this._len && (!this.IS_IDENT[this._source.charCodeAt(i)])) {
	            i++;
	        }
	        var j = i;
	        while (i < this._len && (this.IS_IDENT[this._source.charCodeAt(i)])) {
	            i++;
	        }
	        if (i > j) {
	            this._nextRun = i;
	            return this._source.substr(j, i - j).toLowerCase();
	        }
	        else {
	            return null;
	        }
	    };
	    ExpressionLexer.prototype.identProc = function () {
	        var i = this._run;
	        while (this._run < this._len && (this.IS_IDENT[this._source.charCodeAt(this._run)] || this._source.charCodeAt(this._run) > 255)) {
	            this._run++;
	        }
	        var s = this._source.substr(i, this._run - i).toLowerCase();
	        if (this.Keywords.hasOwnProperty(s)) {
	            this._tokenId = this.Keywords[s];
	            switch (this._tokenId) {
	                case 13 /* Not */:
	                    s = this.nextIdent();
	                    if (s) {
	                        switch (s) {
	                            case "like":
	                                this._tokenId = 47 /* NotLike */;
	                                this._run = this._nextRun;
	                                break;
	                            case "ilike":
	                                this._tokenId = 49 /* NotILike */;
	                                this._run = this._nextRun;
	                                break;
	                            case "match":
	                                this._tokenId = 51 /* NotMatch */;
	                                this._run = this._nextRun;
	                                break;
	                            case "imatch":
	                                this._tokenId = 53 /* NotIMatch */;
	                                this._run = this._nextRun;
	                                break;
	                        }
	                    }
	                    break;
	                case 26 /* Is */:
	                    s = this.nextIdent();
	                    if (s == "not") {
	                        this._tokenId = 27 /* IsNot */;
	                        this._run = this._nextRun;
	                    }
	                    break;
	            }
	        }
	        else {
	            this._tokenId = 10 /* Identifier */;
	        }
	    };
	    ExpressionLexer.prototype.integerProc = function () {
	        this._tokenId = 64 /* IntegerLiteral */;
	        this._run++;
	        while (this._run < this._len && this.IS_INTEGER[this._source.charCodeAt(this._run)]) {
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.numberProc = function () {
	        this._tokenId = 64 /* IntegerLiteral */;
	        this._run++;
	        while (this._run < this._len && this.IS_NUMBER[this._source.charCodeAt(this._run)]) {
	            if (this._source.charAt(this._run) == ".") {
	                if (this._source.charAt(this._run + 1) == ".") { // dotdot에서 처리함.
	                    break;
	                }
	                this._tokenId = 63 /* FloatLiteral */;
	            }
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.minusProc = function () {
	        this._tokenId = 4 /* Minus */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.plusProc = function () {
	        this._tokenId = 5 /* Plus */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.pointProc = function () {
	        var s = this._source.charAt(this._run + 1);
	        if (s == ".") {
	            this._tokenId = 68 /* DotDot */;
	            this._run += 2;
	        }
	        else {
	            this._tokenId = 65 /* Point */;
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.roundOpenProc = function () {
	        this._tokenId = 66 /* RoundOpen */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.roundCloseProc = function () {
	        this._tokenId = 67 /* RoundClose */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.slashProc = function () {
	        this._tokenId = 2 /* Slash */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.spaceProc = function () {
	        this._tokenId = 71 /* Space */;
	        this._run++;
	        while (this._run < this._len && this.IS_WHITE[this._source.charCodeAt(this._run)]) {
	            this._run++;
	        }
	    };
	    ExpressionLexer.prototype.bracketOpenProc = function () {
	        this._tokenId = 69 /* BracketOpen */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.bracketCloseProc = function () {
	        this._tokenId = 70 /* BracketClose */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.starProc = function () {
	        this._tokenId = 3 /* Star */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.modProc = function () {
	        this._tokenId = 15 /* Mod */;
	        this._run++;
	    };
	    ExpressionLexer.prototype.stringProc = function () {
	        this._tokenId = 61 /* StringLiteral */;
	        do {
	            var c = this._source.charCodeAt(this._run);
	            if (this.IS_END[c]) {
	                throw new ExpressionSyntaxError("Untermintated string", c);
	            }
	            if (c == this.BACKSLASH) {
	                this._run++;
	            }
	            this._run++;
	        } while (this._run < this._len && this._source.charCodeAt(this._run) != this.QUOTATION);
	        this._run++;
	    };
	    ExpressionLexer.prototype.smallStringProc = function () {
	        this._tokenId = 61 /* StringLiteral */;
	        do {
	            var c = this._source.charCodeAt(this._run);
	            if (this.IS_END[c]) {
	                throw new ExpressionSyntaxError("Untermintated string", c);
	            }
	            if (c == this.BACKSLASH) {
	                this._run++;
	            }
	            this._run++;
	        } while (this._run < this._len && this._source.charCodeAt(this._run) != this.SQUOTATION);
	        this._run++;
	    };
	    ExpressionLexer.prototype.initProcs = function () {
	        this._procs = [];
	        for (var i = 1; i <= 255; i++) {
	            this._procs[i] = this.symbolProc;
	        }
	        for (var i = 1; i <= 32; i++) {
	            this._procs[i] = this.spaceProc;
	        }
	        this._procs[10] = this.lfProc;
	        this._procs[13] = this.crProc;
	        this._procs["$".charCodeAt(0)] = this.integerProc;
	        this._procs[this.QUOTATION] = this.stringProc;
	        this._procs[this.SQUOTATION] = this.smallStringProc;
	        for (var i = 0; i <= 9; i++) {
	            this._procs["0".charCodeAt(0) + i] = this.numberProc;
	        }
	        for (var i = "A".charCodeAt(0); i <= "Z".charCodeAt(0); i++) {
	            this._procs[i] = this.identProc;
	        }
	        for (var i = "a".charCodeAt(0); i <= "z".charCodeAt(0); i++) {
	            this._procs[i] = this.identProc;
	        }
	        this._procs["_".charCodeAt(0)] = this.identProc;
	        this._procs["(".charCodeAt(0)] = this.roundOpenProc;
	        this._procs[")".charCodeAt(0)] = this.roundCloseProc;
	        this._procs["*".charCodeAt(0)] = this.starProc;
	        this._procs["+".charCodeAt(0)] = this.plusProc;
	        this._procs[",".charCodeAt(0)] = this.commaProc;
	        this._procs["-".charCodeAt(0)] = this.minusProc;
	        this._procs[".".charCodeAt(0)] = this.pointProc;
	        this._procs["/".charCodeAt(0)] = this.slashProc;
	        this._procs["%".charCodeAt(0)] = this.modProc;
	        this._procs["<".charCodeAt(0)] = this.lowerProc;
	        this._procs["=".charCodeAt(0)] = this.equalProc;
	        this._procs[">".charCodeAt(0)] = this.greaterProc;
	        this._procs["[".charCodeAt(0)] = this.bracketOpenProc;
	        this._procs["]".charCodeAt(0)] = this.bracketCloseProc;
	    };
	    Object.defineProperty(ExpressionLexer.prototype, "tokenId", {
	        get: function () {
	            return this._tokenId;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExpressionLexer.prototype, "tokenLoc", {
	        get: function () {
	            return { x: this._tokenPos - this._linePos, y: this._lineNo };
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExpressionLexer.prototype, "tokenLen", {
	        get: function () {
	            return this._run - this._tokenPos;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExpressionLexer.prototype, "token", {
	        get: function () {
	            return this._source.substr(this._tokenPos, this.tokenLen);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExpressionLexer.prototype, "isSpace", {
	        get: function () {
	            return this._tokenId == 71 /* Space */;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ExpressionLexer.prototype.init = function (source) {
	        this._source = source;
	        this._len = source.length;
	        this._lineNo = 0;
	        this._linePos = 0;
	        this._tokenPos = 0;
	        this._runAhead = this._run = 0;
	        this._tokenId = 0;
	    };
	    ExpressionLexer.prototype.charAhread = function () {
	        this._runAhead = this._run;
	        while (this._runAhead < this._len && this._source.charCodeAt(this._runAhead) > 0 && this._source.charCodeAt(this._runAhead) <= 32) {
	            this._runAhead++;
	        }
	        return this._source.charCodeAt(this._runAhead);
	    };
	    ExpressionLexer.prototype.nextId = function (tokenId) {
	        do {
	            this.next();
	        } while (this._run < this._len && this._tokenId != tokenId);
	    };
	    ExpressionLexer.prototype.nextNoSpace = function () {
	        if (this._run < this._len) {
	            do {
	                this.next();
	            } while (this._run < this._len && this.isSpace);
	        }
	    };
	    ExpressionLexer.prototype.isFirstInLine = function () {
	        if (this._tokenPos == 0) {
	            return true;
	        }
	        var c;
	        var runBack = this._tokenPos;
	        runBack--;
	        while (runBack > 0 && this.IS_WHITE[this._source.charCodeAt(runBack)]) {
	            runBack--;
	        }
	        if (runBack == 0) {
	            return true;
	        }
	        c = this._source.charCodeAt(runBack);
	        if (c == 10 || c == 13) {
	            return true;
	        }
	        return false;
	    };
	    return ExpressionLexer;
	}());
	var ExpressionRuntime = /** @class */ (function (_super) {
	    __extends(ExpressionRuntime, _super);
	    function ExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    ExpressionRuntime.prototype.isIdentifier = function (token) {
	        throw new Error("Token is not a valid Identifier: " + token);
	    };
	    ExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        throw new Error("Invalid identifier key: " + idKey);
	    };
	    ExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        throw new Error("Invalid identifier indexer: " + idKey);
	    };
	    ExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capital) {
	        throw new Error("Invalid identifier indexer: " + idKey);
	    };
	    return ExpressionRuntime;
	}(Base_1.Base));
	exports.ExpressionRuntime = ExpressionRuntime;
	var ExpressionNode = /** @class */ (function () {
	    function ExpressionNode() {
	    }
	    Object.defineProperty(ExpressionNode.prototype, "value", {
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExpressionNode.prototype, "asLiteral", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ExpressionNode.prototype.prepareValue = function () {
	    };
	    ExpressionNode.prototype.getLiteral = function () {
	        return undefined;
	    };
	    ExpressionNode.prototype.isIdentifier = function (value) {
	        return false;
	    };
	    ExpressionNode.prototype.toString = function () {
	        return String(this);
	    };
	    return ExpressionNode;
	}());
	exports.ExpressionNode = ExpressionNode;
	var LiteralNode = /** @class */ (function (_super) {
	    __extends(LiteralNode, _super);
	    function LiteralNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return LiteralNode;
	}(ExpressionNode));
	var EmptyExpressionNode = /** @class */ (function (_super) {
	    __extends(EmptyExpressionNode, _super);
	    function EmptyExpressionNode() {
	        return _super.call(this) || this;
	    }
	    EmptyExpressionNode.prototype.evaluate = function (runtime) {
	        return undefined;
	    };
	    EmptyExpressionNode.prototype.toString = function () {
	        return "";
	    };
	    EmptyExpressionNode.Default = new EmptyExpressionNode();
	    return EmptyExpressionNode;
	}(ExpressionNode));
	var FunctionExpressionNode = /** @class */ (function (_super) {
	    __extends(FunctionExpressionNode, _super);
	    function FunctionExpressionNode(func) {
	        var _this = _super.call(this) || this;
	        _this._func = func;
	        return _this;
	    }
	    FunctionExpressionNode.prototype.evaluate = function (runtime) {
	        /*
	        if (this._funcProc && typeof this._funcProc === "function") {
	            var grid = runtime._grid;
	            var cell = runtime._cell;
	            !cell && runtime._target instanceof DataCellElement && (cell = runtime._target);
	            !grid && runtime._target instanceof DataCellElement && (grid = runtime._target.grid());
	            var index = cell && cell._index && cell._index.proxy();
	            if (!index) {
	                if (runtime instanceof DataRowExpressionRuntime) {
	                    index = {dataRow:runtime._item._dataRow, itemIndex:runtime._item._index}
	                } else {
	                    index = {}; //
	                }
	            }
	            if (cell instanceof FooterCell) {
	                index["footerIndex"] = cell._footerIndex;
	            }
	            var handler = grid && grid.getHandler();
	            var value = cell && ( cell.value() != null ? cell.value() : cell.displayText ? cell.displayText() : cell.value());
	            try {
	                return this._funcProc(handler, index, value);
	            } catch (e) {
	                return null;	//
	            }
	        }
	        */
	    };
	    return FunctionExpressionNode;
	}(ExpressionNode));
	var ExpressionNodeImpl = /** @class */ (function (_super) {
	    __extends(ExpressionNodeImpl, _super);
	    function ExpressionNodeImpl() {
	        var _this = _super.call(this) || this;
	        _this._operator = 0 /* Unknown */;
	        return _this;
	    }
	    ExpressionNodeImpl.prototype.evaluate = function (runtime) {
	        if (this._literal) {
	            return this._literal.value;
	        }
	        else if (this._rightExpr) {
	            var v1 = this._leftExpr.evaluate(runtime);
	            var v2 = this._rightExpr.evaluate(runtime);
	            switch (this._operator) {
	                case 40 /* Equal */:
	                    return v1 == v2;
	                case 45 /* NotEqual */:
	                    return v1 != v2;
	                case 41 /* Greater */:
	                    return v1 > v2;
	                case 42 /* GreaterEqual */:
	                    return v1 >= v2;
	                case 43 /* Lower */:
	                    return v1 < v2;
	                case 44 /* LowerEqual */:
	                    return v1 <= v2;
	                /*
	                * case TokenKind.Is: case TokenKind.IsNot:
	                */
	                case 46 /* Like */:
	                    return this.calcLike(v1, v2, false);
	                case 47 /* NotLike */:
	                    return !this.calcLike(v1, v2, false);
	                case 48 /* ILike */:
	                    return this.calcLike(v1, v2, true);
	                case 49 /* NotILike */:
	                    return !this.calcLike(v1, v2, true);
	                case 50 /* Match */:
	                    return this.calcMatch(v1, v2, false);
	                case 51 /* NotMatch */:
	                    return !this.calcMatch(v1, v2, false);
	                case 52 /* IMatch */:
	                    return this.calcMatch(v1, v2, true);
	                case 53 /* NotIMatch */:
	                    return !this.calcMatch(v1, v2, true);
	                default:
	                    throw new ExpressionEvaluationError("Unknown operator: " + this._operator);
	            }
	        }
	        else {
	            return this._leftExpr.evaluate(runtime);
	        }
	    };
	    ExpressionNodeImpl.prototype.toString = function () {
	        var s = "";
	        if (this._literal) {
	            s = this._literal.toString();
	        }
	        else if (this._rightExpr) {
	            var s1 = this._leftExpr.toString();
	            var s2 = this._rightExpr.toString();
	            var op;
	            switch (this._operator) {
	                case 40 /* Equal */:
	                    op = "=";
	                    break;
	                case 45 /* NotEqual */:
	                    op = "<>";
	                    break;
	                case 41 /* Greater */:
	                    op = ">";
	                    break;
	                case 42 /* GreaterEqual */:
	                    op = ">=";
	                    break;
	                case 43 /* Lower */:
	                    op = "<";
	                    break;
	                case 44 /* LowerEqual */:
	                    op = "<=";
	                    break;
	                case 46 /* Like */:
	                    op = "like";
	                    break;
	                case 47 /* NotLike */:
	                    op = "not like";
	                    break;
	                case 48 /* ILike */:
	                    op = "ilike";
	                    break;
	                case 49 /* NotILike */:
	                    op = "not ilike";
	                    break;
	                case 50 /* Match */:
	                    op = "match";
	                    break;
	                case 51 /* NotMatch */:
	                    op = "not match";
	                    break;
	                case 52 /* IMatch */:
	                    op = "imatch";
	                    break;
	                case 53 /* NotIMatch */:
	                    op = "not imatch";
	                    break;
	                case 32 /* Comma */:
	                    op = ",";
	                    break;
	                default:
	                    op = "<<ERROR>>";
	                    break;
	            }
	            s = "(" + s1 + " " + op + " " + s2 + ")";
	        }
	        else {
	            s = this._leftExpr.toString();
	        }
	        return s;
	    };
	    ExpressionNodeImpl.prototype.isIdentifier = function (value) {
	        return this._leftExpr && !this._rightExpr && this._leftExpr.isIdentifier(value);
	    };
	    ExpressionNodeImpl.prototype.prepareValue = function () {
	        this._leftExpr.prepareValue();
	        if (this._rightExpr == null) {
	            this._literal = this._leftExpr.getLiteral();
	        }
	        else {
	            this._rightExpr.prepareValue();
	        }
	    };
	    ExpressionNodeImpl.prototype.getLiteral = function () {
	        return this._literal;
	    };
	    ExpressionNodeImpl.prototype.calcLike = function (v1, v2, ignoreCase) {
	        var s1 = String(v1);
	        var s2 = String(v2);
	        if (s1 && s2) {
	            if (ignoreCase) {
	                s1 = s1.toLowerCase();
	                s2 = s2.toLowerCase();
	            }
	            var len = s2.length;
	            if (len > 1) {
	                var first = s2.charAt(0) == "%";
	                var last = s2.charAt(len - 1) == "%";
	                if (first && last) {
	                    s2 = s2.substr(1, len - 2);
	                    return s1.indexOf(s2, 0) >= 0;
	                }
	                else if (first) {
	                    s2 = s2.substr(1, len - 1);
	                    return s1.lastIndexOf(s2) == s1.length - s2.length;
	                }
	                else if (last) {
	                    s2 = s2.substr(0, len - 1);
	                    return s1.indexOf(s2, 0) == 0;
	                }
	                else {
	                    return s1 == s2;
	                }
	            }
	            else if (s2 == "%") {
	                return false;
	            }
	            else {
	                return s1 == s2;
	            }
	        }
	        return false;
	    };
	    ExpressionNodeImpl.prototype.calcMatch = function (v1, v2, ignoreCase) {
	        var exp = new RegExp(v2, "m" + (ignoreCase ? "i" : ""));
	        return exp.test(v1);
	    };
	    return ExpressionNodeImpl;
	}(ExpressionNode));
	var CheckableNode = /** @class */ (function (_super) {
	    __extends(CheckableNode, _super);
	    function CheckableNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    Object.defineProperty(CheckableNode.prototype, "value", {
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckableNode.prototype, "asLiteral", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CheckableNode.prototype.evaluate = function (runtime) {
	        return undefined;
	    };
	    return CheckableNode;
	}(ExpressionNode));
	var DefinedNode = /** @class */ (function (_super) {
	    __extends(DefinedNode, _super);
	    function DefinedNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    DefinedNode.prototype.toString = function () {
	        return "defined";
	    };
	    return DefinedNode;
	}(CheckableNode));
	var EmptyNode = /** @class */ (function (_super) {
	    __extends(EmptyNode, _super);
	    function EmptyNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    EmptyNode.prototype.toString = function () {
	        return "empty";
	    };
	    return EmptyNode;
	}(CheckableNode));
	var NullNode = /** @class */ (function (_super) {
	    __extends(NullNode, _super);
	    function NullNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    Object.defineProperty(NullNode.prototype, "value", {
	        get: function () {
	            return NaN;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    NullNode.prototype.toString = function () {
	        return "null";
	    };
	    return NullNode;
	}(CheckableNode));
	var NanNode = /** @class */ (function (_super) {
	    __extends(NanNode, _super);
	    function NanNode() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    NanNode.prototype.toString = function () {
	        return "NaN";
	    };
	    return NanNode;
	}(CheckableNode));
	var CheckNode = /** @class */ (function (_super) {
	    __extends(CheckNode, _super);
	    function CheckNode(leftExpr, op, literal) {
	        var _this = _super.call(this) || this;
	        _this._leftExpr = leftExpr;
	        _this._operator = op;
	        _this._isNot = op == 27 /* IsNot */;
	        _this._value = -1;
	        if (literal instanceof DefinedNode) {
	            _this._value = CheckNode.DEFINED;
	        }
	        else if (literal instanceof NullNode) {
	            _this._value = CheckNode.NULL;
	        }
	        else if (literal instanceof EmptyNode) {
	            _this._value = CheckNode.EMPTY;
	        }
	        else if (literal instanceof NanNode) {
	            _this._value = CheckNode.NAN;
	        }
	        return _this;
	    }
	    CheckNode.prototype.prepareValue = function () {
	        this._leftExpr.prepareValue();
	        this._literal = this._leftExpr.getLiteral();
	    };
	    CheckNode.prototype.getLiteral = function () {
	        return null;
	    };
	    CheckNode.prototype.evaluate = function (runtime) {
	        var v = this._literal ? this._literal.value : this._leftExpr.evaluate(runtime);
	        var r;
	        switch (this._value) {
	            case CheckNode.DEFINED:
	                r = (v !== undefined);
	                break;
	            case CheckNode.NULL:
	                r = (v === undefined || v === null);
	                break;
	            case CheckNode.EMPTY:
	                r = (v === undefined || v === null || String(v).length == 0);
	                break;
	            case CheckNode.NAN:
	                r = (v === null || isNaN(v));
	                break;
	            default:
	                return undefined;
	        }
	        return this._isNot ? !r : r;
	    };
	    CheckNode.prototype.toString = function () {
	        var s = "<<ERROR>>";
	        switch (this._value) {
	            case CheckNode.DEFINED:
	                s = "defined";
	                break;
	            case CheckNode.NULL:
	                s = "null";
	                break;
	            case CheckNode.EMPTY:
	                s = "empty";
	                break;
	            case CheckNode.NAN:
	                s = "NaN";
	                break;
	        }
	        return "(" + ((this._isNot ? "is not " : "is ") + s) + ")";
	    };
	    CheckNode.DEFINED = 0;
	    CheckNode.NULL = 1;
	    CheckNode.EMPTY = 2;
	    CheckNode.NAN = 3;
	    return CheckNode;
	}(ExpressionNodeImpl));
	var FloatLiteralNode = /** @class */ (function (_super) {
	    __extends(FloatLiteralNode, _super);
	    function FloatLiteralNode(literal) {
	        var _this = _super.call(this) || this;
	        _this._value = Number(literal);
	        return _this;
	    }
	    Object.defineProperty(FloatLiteralNode.prototype, "value", {
	        get: function () {
	            return this._value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FloatLiteralNode.prototype, "asLiteral", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    FloatLiteralNode.prototype.evaluate = function (runtime) {
	        return this._value;
	    };
	    FloatLiteralNode.prototype.toString = function () {
	        return String(this._value);
	    };
	    return FloatLiteralNode;
	}(LiteralNode));
	var IntegerLiteralNode = /** @class */ (function (_super) {
	    __extends(IntegerLiteralNode, _super);
	    function IntegerLiteralNode(literal) {
	        var _this = _super.call(this) || this;
	        _this._value = typeof literal == 'string' ? parseInt(literal) : Math.floor(literal);
	        return _this;
	    }
	    Object.defineProperty(IntegerLiteralNode.prototype, "value", {
	        get: function () {
	            return this._value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IntegerLiteralNode.prototype, "asLiteral", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    IntegerLiteralNode.prototype.evaluate = function (runtime) {
	        return this._value;
	    };
	    IntegerLiteralNode.prototype.toString = function () {
	        return String(this._value);
	    };
	    return IntegerLiteralNode;
	}(LiteralNode));
	var StringLiteralNode = /** @class */ (function (_super) {
	    __extends(StringLiteralNode, _super);
	    function StringLiteralNode(literal) {
	        var _this = _super.call(this) || this;
	        _this._value = literal.substr(1, literal.length - 2);
	        var val = "";
	        var run = 0;
	        var isEscape = false;
	        while (run < _this._value.length) {
	            if (_this._value[run] == "\\" && !isEscape) {
	                isEscape = true;
	                run++;
	                continue;
	            }
	            isEscape = false;
	            val += _this._value[run++];
	        }
	        _this._value = val;
	        return _this;
	    }
	    Object.defineProperty(StringLiteralNode.prototype, "value", {
	        get: function () {
	            return this._value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(StringLiteralNode.prototype, "asLiteral", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    StringLiteralNode.prototype.evaluate = function (runtime) {
	        return this._value;
	    };
	    StringLiteralNode.prototype.toString = function () {
	        return "'" + this._value + "'";
	    };
	    return StringLiteralNode;
	}(LiteralNode));
	var IdentifierNode = /** @class */ (function (_super) {
	    __extends(IdentifierNode, _super);
	    function IdentifierNode(literal) {
	        var _this = _super.call(this) || this;
	        _this._idKey = -651212;
	        _this._literal = literal;
	        return _this;
	    }
	    Object.defineProperty(IdentifierNode.prototype, "identifier", {
	        get: function () {
	            return this._literal;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    IdentifierNode.prototype.evaluate = function (runtime) {
	        if (this._idKey == -651212) {
	            this._idKey = runtime.isIdentifier(this._literal);
	        }
	        return runtime.evaluateIdentifier(this._idKey);
	    };
	    IdentifierNode.prototype.toString = function () {
	        return this._literal;
	    };
	    return IdentifierNode;
	}(ExpressionNode));
	var IndexerNode = /** @class */ (function (_super) {
	    __extends(IndexerNode, _super);
	    function IndexerNode(ident, expression, captial) {
	        var _this = _super.call(this) || this;
	        _this._idKey = -1490313;
	        _this._intIndex = NaN;
	        _this._strIndex = null;
	        _this._ident = ident;
	        _this._indexer = expression;
	        _this._capital = captial;
	        return _this;
	    }
	    IndexerNode.prototype.prepareValue = function () {
	        var lit = this._indexer.asLiteral;
	        if (!lit) {
	            if (this._indexer instanceof ExpressionNodeImpl) {
	                this._indexer.prepareValue();
	                lit = this._indexer.getLiteral();
	            }
	        }
	        if (lit) {
	            var v = lit.value;
	            if (typeof v === "string") {
	                this._strIndex = v;
	            }
	            else {
	                this._intIndex = parseInt(v);
	            }
	            if (this._capital && this._strIndex) {
	                this._strIndex = this._strIndex.toUpperCase();
	            }
	        }
	    };
	    IndexerNode.prototype.getLiteral = function () {
	        return null;
	    };
	    IndexerNode.prototype.evaluate = function (runtime) {
	        if (this._idKey == -1490313) {
	            this._idKey = runtime.isIdentifier(this._ident);
	        }
	        if (this._strIndex) {
	            return runtime.evaluateIndexerS(this._idKey, this._strIndex, this._capital);
	        }
	        else if (!isNaN(this._intIndex)) {
	            return runtime.evaluateIndexerI(this._idKey, this._intIndex);
	        }
	        else {
	            var index = this._indexer.evaluate(runtime);
	            if (typeof index === "string") {
	                return runtime.evaluateIndexerS(this._idKey, index, this._capital);
	            }
	            else {
	                return runtime.evaluateIndexerI(this._idKey, index);
	            }
	        }
	    };
	    IndexerNode.prototype.toString = function () {
	        var s = this._ident + "[" + this._indexer.toString() + "]";
	        return s;
	    };
	    return IndexerNode;
	}(ExpressionNodeImpl));
	var UnaryNode = /** @class */ (function (_super) {
	    __extends(UnaryNode, _super);
	    function UnaryNode(factor) {
	        var _this = _super.call(this) || this;
	        _this._factor = factor;
	        return _this;
	    }
	    UnaryNode.prototype.prepareValue = function () {
	        this._literal = this._factor.asLiteral;
	        if (!this._literal && this._factor instanceof ExpressionNode) {
	            this._factor.prepareValue();
	            this._literal = this._factor.getLiteral();
	        }
	    };
	    UnaryNode.prototype.getLiteral = function () {
	        return null;
	    };
	    return UnaryNode;
	}(ExpressionNode));
	var LenNode = /** @class */ (function (_super) {
	    __extends(LenNode, _super);
	    function LenNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    LenNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v ? v.length : 0;
	    };
	    LenNode.prototype.toString = function () {
	        return "(len " + this._factor + ")";
	    };
	    return LenNode;
	}(UnaryNode));
	var MinusNode = /** @class */ (function (_super) {
	    __extends(MinusNode, _super);
	    function MinusNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    MinusNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return -v;
	    };
	    MinusNode.prototype.toString = function () {
	        return "-" + this._factor;
	    };
	    return MinusNode;
	}(UnaryNode));
	var PlusNode = /** @class */ (function (_super) {
	    __extends(PlusNode, _super);
	    function PlusNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    PlusNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v;
	    };
	    PlusNode.prototype.toString = function () {
	        return "+" + this._factor;
	    };
	    return PlusNode;
	}(UnaryNode));
	var NotNode = /** @class */ (function (_super) {
	    __extends(NotNode, _super);
	    function NotNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    NotNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return !v;
	    };
	    NotNode.prototype.toString = function () {
	        return "(not " + this._factor + ")";
	    };
	    return NotNode;
	}(UnaryNode));
	var ToBoolNode = /** @class */ (function (_super) {
	    __extends(ToBoolNode, _super);
	    function ToBoolNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToBoolNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return Boolean(v);
	    };
	    ToBoolNode.prototype.toString = function () {
	        return "(bool " + this._factor + ")";
	    };
	    return ToBoolNode;
	}(UnaryNode));
	var ToNumberNode = /** @class */ (function (_super) {
	    __extends(ToNumberNode, _super);
	    function ToNumberNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToNumberNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return Number(v);
	    };
	    ToNumberNode.prototype.toString = function () {
	        return "(num " + this._factor + ")";
	    };
	    return ToNumberNode;
	}(UnaryNode));
	var ToStringNode = /** @class */ (function (_super) {
	    __extends(ToStringNode, _super);
	    function ToStringNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToStringNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return String(v);
	    };
	    ToStringNode.prototype.toString = function () {
	        return "(str " + this._factor + ")";
	    };
	    return ToStringNode;
	}(UnaryNode));
	var ToDateStringNode = /** @class */ (function (_super) {
	    __extends(ToDateStringNode, _super);
	    function ToDateStringNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToDateStringNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        if (v instanceof Date) {
	            v = _pad(v.getFullYear(), 4) +
	                _pad((v.getMonth() + 1), 2) +
	                _pad(v.getDate(), 2) +
	                _pad(v.getHours(), 2) +
	                _pad(v.getMinutes(), 2) +
	                _pad(v.getSeconds(), 2) +
	                _pad(v.getMilliseconds(), 3);
	        }
	        return String(v);
	    };
	    ToDateStringNode.prototype.toString = function () {
	        return "(datestr " + this._factor + ")";
	    };
	    return ToDateStringNode;
	}(UnaryNode));
	var ToYearNode = /** @class */ (function (_super) {
	    __extends(ToYearNode, _super);
	    function ToYearNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToYearNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v instanceof Date ? v.getFullYear() : null;
	    };
	    ToYearNode.prototype.toString = function () {
	        return "(year " + this._factor + ")";
	    };
	    return ToYearNode;
	}(UnaryNode));
	var ToMonthNode = /** @class */ (function (_super) {
	    __extends(ToMonthNode, _super);
	    function ToMonthNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToMonthNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v instanceof Date ? v.getMonth() + 1 : null;
	    };
	    ToMonthNode.prototype.toString = function () {
	        return "(month " + this._factor + ")";
	    };
	    return ToMonthNode;
	}(UnaryNode));
	var ToDayNode = /** @class */ (function (_super) {
	    __extends(ToDayNode, _super);
	    function ToDayNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToDayNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v instanceof Date ? v.getDate() : null;
	    };
	    ToDayNode.prototype.toString = function () {
	        return "(day " + this._factor + ")";
	    };
	    return ToDayNode;
	}(UnaryNode));
	var ToHourNode = /** @class */ (function (_super) {
	    __extends(ToHourNode, _super);
	    function ToHourNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToHourNode.prototype.evaluate = function (runtime) {
	        var v = this._literal instanceof LiteralNode ? this._literal.value : this._factor.evaluate(runtime);
	        return v instanceof Date ? v.getHours() : null;
	    };
	    ToHourNode.prototype.toString = function () {
	        return "(hour " + this._factor + ")";
	    };
	    return ToHourNode;
	}(UnaryNode));
	var ToRoundDownNode = /** @class */ (function (_super) {
	    __extends(ToRoundDownNode, _super);
	    function ToRoundDownNode(factor) {
	        return _super.call(this, factor) || this;
	    }
	    ToRoundDownNode.prototype.evaluate = function (runtime) {
	        var factor = this._factor;
	        var literal = factor.getLiteral();
	        if (factor.getLiteral()) {
	            return literal.value;
	        }
	        else if (factor["_rightExpr"]) {
	            var v1 = factor["_leftExpr"].evaluate(runtime);
	            var v2 = factor["_rightExpr"].evaluate(runtime);
	            switch (factor["_operator"]) {
	                case 32 /* Comma */:
	                    var v3 = Math.pow(10, v2);
	                    return Math.floor(v1 * v3) / v3;
	                    break;
	                default:
	                    throw new ExpressionEvaluationError("Unknown operator: " + factor["_operator"]);
	            }
	        }
	        else {
	            return factor["_leftExpr"].evaluate(runtime);
	        }
	    };
	    ToRoundDownNode.prototype.toString = function () {
	        return "(rounddown " + this._factor + ")";
	    };
	    return ToRoundDownNode;
	}(UnaryNode));
	var TermNode = /** @class */ (function (_super) {
	    __extends(TermNode, _super);
	    function TermNode() {
	        var _this = _super.call(this) || this;
	        _this._factors = [];
	        _this._operators = [];
	        _this._literal = null;
	        return _this;
	    }
	    TermNode.prototype.addFactor = function (factor) {
	        this._factors.push(factor);
	    };
	    TermNode.prototype.addOperator = function (tokenId) {
	        this._operators.push(tokenId);
	    };
	    TermNode.prototype.isIdentifier = function (value) {
	        return this._factors.length == 1 && this._factors[0] instanceof IdentifierNode &&
	            this._factors[0].identifier == value;
	    };
	    TermNode.prototype.prepareValue = function () {
	        var i, cnt, factor;
	        for (i = 0, cnt = this._factors.length; i < cnt; i++) {
	            this._factors[i].prepareValue();
	        }
	        if (this._operators.length == 0) {
	            factor = this._factors[0];
	            this._literal = factor.asLiteral;
	            if (!this._literal) {
	                this._literal = factor.getLiteral();
	            }
	        }
	    };
	    TermNode.prototype.getLiteral = function () {
	        return this._literal;
	    };
	    TermNode.prototype.evaluate = function (runtime) {
	        if (this._literal) {
	            return this._literal.value;
	        }
	        var len = this._factors.length;
	        var v1 = this._factors[0].evaluate(runtime);
	        for (var i = 1; i < len; i++) {
	            var v2 = this._factors[i].evaluate(runtime);
	            switch (this._operators[i - 1]) {
	                case 11 /* And */:
	                    v1 = v1 && v2;
	                    break;
	                case 3 /* Star */:
	                    v1 = v1 * v2;
	                    break;
	                case 2 /* Slash */:
	                    v1 = v1 / v2;
	                    break;
	                case 14 /* Div */:
	                    v1 = Math.floor(Math.floor(v1) / Math.floor(v2));
	                    break;
	                case 15 /* Mod */:
	                    v1 = v1 % v2;
	                    break;
	                case 16 /* Shl */:
	                    v1 = v1 << v2;
	                    break;
	                case 17 /* Shr */:
	                    v1 = v1 >> v2;
	                    break;
	            }
	        }
	        return v1;
	    };
	    TermNode.prototype.toString = function () {
	        var s = "";
	        if (this._literal) {
	            s = this._literal.toString();
	        }
	        else if (this._factors.length == 1) {
	            s = this._factors[0].toString();
	        }
	        else {
	            var i;
	            var len = this._factors.length;
	            s = "(" + this._factors[0].toString();
	            for (i = 1; i < len; i++) {
	                switch (this._operators[i - 1]) {
	                    case 11 /* And */:
	                        s += " and ";
	                        break;
	                    case 3 /* Star */:
	                        s += " * ";
	                        break;
	                    case 2 /* Slash */:
	                        s += " / ";
	                        break;
	                    case 14 /* Div */:
	                        s += " / ";
	                        break;
	                    case 15 /* Mod */:
	                        s += " mod ";
	                        break;
	                    case 16 /* Shl */:
	                        s += " shl ";
	                        break;
	                    case 17 /* Shr */:
	                        s += " shr ";
	                        break;
	                }
	                s += this._factors[i].toString();
	            }
	            s += ")";
	        }
	        return s;
	    };
	    return TermNode;
	}(ExpressionNode));
	var SimpleExpressioNode = /** @class */ (function (_super) {
	    __extends(SimpleExpressioNode, _super);
	    function SimpleExpressioNode() {
	        var _this = _super.call(this) || this;
	        _this._terms = [];
	        _this._operators = [];
	        _this._literal = null;
	        return _this;
	    }
	    SimpleExpressioNode.prototype.addTerm = function (term) {
	        this._terms.push(term);
	    };
	    SimpleExpressioNode.prototype.addOperator = function (tokenId) {
	        this._operators.push(tokenId);
	    };
	    SimpleExpressioNode.prototype.isIdentifier = function (value) {
	        return this._terms.length == 1 && this._terms[0].isIdentifier(value);
	    };
	    SimpleExpressioNode.prototype.prepareValue = function () {
	        for (var i = 0, cnt = this._terms.length; i < cnt; i++) {
	            this._terms[i].prepareValue();
	        }
	        if (this._operators.length == 0) {
	            this._literal = this._terms[0].getLiteral();
	        }
	    };
	    SimpleExpressioNode.prototype.getLiteral = function () {
	        return this._literal;
	    };
	    SimpleExpressioNode.prototype.evaluate = function (runtime) {
	        if (this._literal) {
	            return this._literal.value;
	        }
	        var len = this._terms.length;
	        var v1 = this._terms[0].evaluate(runtime);
	        for (var i = 1; i < len; i++) {
	            var v2 = this._terms[i].evaluate(runtime);
	            switch (this._operators[i - 1]) {
	                case 4 /* Minus */:
	                    v1 = v1 - v2;
	                    break;
	                case 5 /* Plus */:
	                    v1 = v1 + v2;
	                    break;
	                case 18 /* Or */:
	                    v1 = v1 || v2;
	                    break;
	                case 19 /* Xor */:
	                    v1 = v1 ^ v2;
	                    break;
	            }
	        }
	        return v1;
	    };
	    SimpleExpressioNode.prototype.toString = function () {
	        var s = "";
	        if (this._literal) {
	            s = this._literal.toString();
	        }
	        else if (this._terms.length == 1) {
	            s = this._terms[0].toString();
	        }
	        else {
	            var i;
	            var len = this._terms.length;
	            s = "(" + this._terms[0].toString();
	            for (i = 1; i < len; i++) {
	                switch (this._operators[i - 1]) {
	                    case 4 /* Minus */:
	                        s += " - ";
	                        break;
	                    case 5 /* Plus */:
	                        s += " + ";
	                        break;
	                    case 18 /* Or */:
	                        s += " or ";
	                        break;
	                    case 19 /* Xor */:
	                        s += " xor ";
	                        break;
	                    default:
	                        s += " <<ERROR>> ";
	                }
	                s += this._terms[i].toString();
	            }
	            s += ")";
	        }
	        return s;
	    };
	    return SimpleExpressioNode;
	}(ExpressionNode));
	var ExpressionParser = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ExpressionParser() {
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._node = null;
	        this._capitalIndexers = null;
	        this._lexer = new ExpressionLexer();
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ExpressionParser.prototype.syntaxError = function (message, pos) {
	        throw new ExpressionSyntaxError(message, pos);
	    };
	    ExpressionParser.prototype.expected = function (tokenId) {
	        if (tokenId != this._lexer.tokenId) {
	            throw new ExpressionSyntaxError("Token is not a expected kind [" + tokenId + "]: " + this._lexer.tokenId, this._lexer.tokenLoc);
	        }
	        this.nextToken();
	    };
	    ExpressionParser.prototype.nextToken = function () {
	        this._lexer.nextNoSpace();
	    };
	    ExpressionParser.prototype.doExpression = function () {
	        var expr = null;
	        var left = this.doSimpleExpression();
	        var op;
	        if (IS_CHECK[op = this._lexer.tokenId]) {
	            this.nextToken();
	            var right = this.doSimpleExpression();
	            right.prepareValue();
	            var check = right.getLiteral();
	            if (check instanceof CheckableNode) {
	                expr = new CheckNode(left, op, check);
	            }
	            else {
	                throw new ExpressionSyntaxError("is operator's operand must be defined, null or empty: " + this._lexer.tokenId, null);
	            }
	        }
	        else {
	            expr = new ExpressionNodeImpl();
	            expr["_leftExpr"] = left;
	            if (IS_RELATIVE[this._lexer.tokenId]) {
	                expr["_operator"] = this._lexer.tokenId;
	                this.nextToken();
	                expr["_rightExpr"] = this.doSimpleExpression();
	            }
	            else if (this._lexer.tokenId == 32 /* Comma */) {
	                expr["_operator"] = this._lexer.tokenId;
	                this.nextToken();
	                expr["_rightExpr"] = this.doSimpleExpression();
	            }
	        }
	        return expr;
	    };
	    ExpressionParser.prototype.doSimpleExpression = function () {
	        var expr = new SimpleExpressioNode();
	        expr.addTerm(this.doTerm());
	        while (IS_ADDITIVE[this._lexer.tokenId]) {
	            expr.addOperator(this._lexer.tokenId);
	            this.nextToken();
	            expr.addTerm(this.doTerm());
	        }
	        return expr;
	    };
	    ExpressionParser.prototype.doTerm = function () {
	        var term = new TermNode();
	        term.addFactor(this.doFactor());
	        while (IS_MULTIPLICATIVE[this._lexer.tokenId]) {
	            term.addOperator(this._lexer.tokenId);
	            this.nextToken();
	            term.addFactor(this.doFactor());
	        }
	        return term;
	    };
	    ExpressionParser.prototype.doFactor = function () {
	        var tokenId = this._lexer.tokenId;
	        switch (tokenId) {
	            case 61 /* StringLiteral */:
	                return this.doCharString();
	            case 66 /* RoundOpen */:
	                return this.doRoundOpen();
	            case 10 /* Identifier */:
	                return this.doIdentifier();
	            case 64 /* IntegerLiteral */:
	                return this.doInteger();
	            case 63 /* FloatLiteral */:
	                return this.doNumber();
	            case 4 /* Minus */:
	                return this.doMinus();
	            case 5 /* Plus */:
	                return this.doPlus();
	            case 13 /* Not */:
	                return this.doNot();
	            case 35 /* Defined */:
	                return this.doDefined();
	            case 34 /* Null */:
	                return this.doNull();
	            case 36 /* Empty */:
	                return this.doEmpty();
	            case 37 /* NaN */:
	                return this.doNaN();
	            case 23 /* ToBool */:
	                return this.doToBool();
	            case 21 /* ToNum */:
	                return this.doToNumber();
	            case 20 /* ToStr */:
	                return this.doToString();
	            case 24 /* Length */:
	                return this.doLength();
	            // case TokenKind.LengthBin:
	            // 	return this.doLengthBin();
	            case 90 /* ToDateStr */:
	                return this.doToDateString();
	            case 91 /* ToYear */:
	                return this.doToYear();
	            case 92 /* ToMonth */:
	                return this.doToMonth();
	            case 93 /* ToDay */:
	                return this.doToDay();
	            case 94 /* ToHour */:
	                return this.doToHour();
	            case 95 /* ToRoundDown */:
	                return this.doRoundDown();
	        }
	        throw new ExpressionSyntaxError("Unkown token: " + tokenId, this._lexer.tokenLoc);
	    };
	    ExpressionParser.prototype.doCharString = function () {
	        var literal = this._lexer.token;
	        this.nextToken();
	        return new StringLiteralNode(literal);
	    };
	    ExpressionParser.prototype.doRoundOpen = function () {
	        this.nextToken();
	        var node = this.doExpression();
	        this.expected(67 /* RoundClose */);
	        return node;
	    };
	    ExpressionParser.prototype.doIdentifier = function () {
	        var literal = this._lexer.token;
	        this.nextToken();
	        if (this._lexer.tokenId == 69 /* BracketOpen */) {
	            this.nextToken();
	            var node = this.doExpression();
	            this.expected(70 /* BracketClose */);
	            return new IndexerNode(literal, node, this._capitalIndexers.indexOf(literal) >= 0);
	        }
	        else {
	            return new IdentifierNode(literal);
	        }
	    };
	    ExpressionParser.prototype.doNumber = function () {
	        var literal = this._lexer.token;
	        this.nextToken();
	        return new FloatLiteralNode(literal);
	    };
	    ExpressionParser.prototype.doInteger = function () {
	        var literal = this._lexer.token;
	        this.nextToken();
	        return new IntegerLiteralNode(literal);
	    };
	    ExpressionParser.prototype.doMinus = function () {
	        this.nextToken();
	        return new MinusNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doPlus = function () {
	        this.nextToken();
	        return new PlusNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doNot = function () {
	        this.nextToken();
	        return new NotNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doDefined = function () {
	        this.nextToken();
	        return new DefinedNode();
	    };
	    ExpressionParser.prototype.doNull = function () {
	        this.nextToken();
	        return new NullNode();
	    };
	    ExpressionParser.prototype.doEmpty = function () {
	        this.nextToken();
	        return new EmptyNode();
	    };
	    ExpressionParser.prototype.doNaN = function () {
	        this.nextToken();
	        return new NanNode();
	    };
	    ExpressionParser.prototype.doToBool = function () {
	        this.nextToken();
	        return new ToBoolNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToNumber = function () {
	        this.nextToken();
	        return new ToNumberNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToString = function () {
	        this.nextToken();
	        return new ToStringNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doLength = function () {
	        this.nextToken();
	        return new LenNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToDateString = function () {
	        this.nextToken();
	        return new ToDateStringNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToYear = function () {
	        this.nextToken();
	        return new ToYearNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToMonth = function () {
	        this.nextToken();
	        return new ToMonthNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToDay = function () {
	        this.nextToken();
	        return new ToDayNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doToHour = function () {
	        this.nextToken();
	        return new ToHourNode(this.doFactor());
	    };
	    ExpressionParser.prototype.doRoundDown = function () {
	        this.nextToken();
	        return new ToRoundDownNode(this.doFactor());
	    };
	    ExpressionParser.prototype.parse = function (source, capitalIndexers) {
	        if (source) {
	            this._capitalIndexers = capitalIndexers || [];
	            this._lexer.init(source);
	            this.nextToken();
	            var expr = this.doExpression();
	            if (expr) {
	                expr.prepareValue();
	            }
	            this._lexer.clear();
	            this._capitalIndexers = null;
	            return expr;
	        }
	        return null;
	    };
	    ExpressionParser.prototype.evaluate = function (source, runtime, capitalIndexers) {
	        var expr = this.parse(source, capitalIndexers);
	        return expr.evaluate(runtime);
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    ExpressionParser.Default = new ExpressionParser();
	    return ExpressionParser;
	}());
	exports.ExpressionParser = ExpressionParser;
	});

	unwrapExports(Expression);
	var Expression_1 = Expression.ExpressionSyntaxError;
	var Expression_2 = Expression.ExpressionEvaluationError;
	var Expression_3 = Expression.ExpressionRuntime;
	var Expression_4 = Expression.ExpressionNode;
	var Expression_5 = Expression.ExpressionParser;

	var ColumnFilter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ColumnFilter.ts
	// 2019. 07. 05. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var ColumnFilter = /** @class */ (function (_super) {
	    __extends(ColumnFilter, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFilter(criteria) {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._visible = true;
	        _this.criteria = criteria;
	        return _this;
	    }
	    ColumnFilter.prototype._doDispose = function () {
	        this._criteria = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnFilter.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        set: function (value) {
	            this._name = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "criteria", {
	        /** criteria */
	        get: function () {
	            return this._criteria;
	        },
	        set: function (value) {
	            if (value != this._criteria) {
	                this._criteria = value;
	                this.criteriaChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            this._text = value;
	            this.changed();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "description", {
	        /** description */
	        get: function () {
	            return this._description;
	        },
	        set: function (value) {
	            this._description = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "active", {
	        /** active */
	        get: function () {
	            return this._active;
	        },
	        set: function (value) {
	            if (value != this._active) {
	                this._active = value;
	                this.changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "visible", {
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            this._visible = value;
	            this.changed();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilter.prototype, "tag", {
	        /** tag */
	        get: function () {
	            return this._tag;
	        },
	        set: function (value) {
	            this._tag = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnFilter.prototype.toString = function () {
	        return this._text || this._name;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnFilter.prototype.changed = function () {
	        this.fireEvent(ColumnFilter.CHANGED);
	    };
	    ColumnFilter.prototype.criteriaChanged = function () {
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ColumnFilter.CHANGED = "onColumnFilterChanged";
	    return ColumnFilter;
	}(EventAware_1.EventAware));
	exports.ColumnFilter = ColumnFilter;
	var ColumnFilterRun = /** @class */ (function (_super) {
	    __extends(ColumnFilterRun, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFilterRun(model) {
	        var _this = _super.call(this, model.criteria) || this;
	        _this._model = model;
	        _this.parse();
	        return _this;
	    }
	    ColumnFilterRun.prototype._doDispose = function () {
	        this._exprNode = null;
	        this._model = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnFilterRun.prototype.prepare = function (runtime, dataSource) {
	        runtime.setDataSource(dataSource);
	    };
	    ColumnFilterRun.prototype.select = function (runtime, item, field) {
	        if (this._exprNode) {
	            runtime.setData(item, field);
	            return this._exprNode.evaluate(runtime);
	        }
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnFilterRun.prototype.criteriaChanged = function () {
	        this.parse();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnFilterRun.prototype.parse = function () {
	        if (this.criteria) {
	            this._exprNode = Expression.ExpressionParser.Default.parse(this.criteria, null);
	            // if (this._exprNode instanceof FunctionExpressionNode) {
	            // 	this._exprNode.evaluate = this._evaluate.bind(this);
	            // }
	        }
	        else {
	            this._exprNode = null;
	        }
	    };
	    return ColumnFilterRun;
	}(ColumnFilter));
	exports.ColumnFilterRun = ColumnFilterRun;
	var ColumnFilterCollection = /** @class */ (function (_super) {
	    __extends(ColumnFilterCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFilterCollection(owner) {
	        var _this = _super.call(this) || this;
	        _this._items = [];
	        _this._names = {};
	        _this._updating = false;
	        _this._nextId = 1;
	        _this._owner = owner;
	        return _this;
	    }
	    ColumnFilterCollection.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnFilterCollection.prototype, "count", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilterCollection.prototype, "activeCount", {
	        /** activeCount */
	        get: function () {
	            var cnt = 0;
	            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	                var f = _a[_i];
	                if (f.active) {
	                    cnt++;
	                }
	            }
	            return cnt;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilterCollection.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFilterCollection.prototype, "isVisible", {
	        /** visible */
	        get: function () {
	            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	                var f = _a[_i];
	                if (f.visible) {
	                    return true;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnFilterCollection.prototype.getOwner = function () {
	        return this._owner;
	    };
	    ColumnFilterCollection.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    ColumnFilterCollection.prototype.itemByName = function (name) {
	        return this._names[name];
	    };
	    ColumnFilterCollection.prototype.indexOf = function (name) {
	        for (var i = this._items.length - 1; i >= 0; i--) {
	            if (this._items[i].name == name) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    ColumnFilterCollection.prototype.getActiveItems = function (active) {
	        var items = [];
	        for (var i = this._items.length - 1; i >= 0; i--) {
	            if (this._items[i].active == active) {
	                items.push(this._items[i]);
	            }
	        }
	        return items;
	    };
	    ColumnFilterCollection.prototype.assignFrom = function (source) {
	        if (source === this) {
	            return;
	        }
	        var cleared = this.clear(false);
	        if (source) {
	            var src = source instanceof Array ? source : [source];
	            var cnt = src.length;
	            for (var i = 0; i < cnt; i++) {
	                source = src[i];
	                if (source && source.name) {
	                    this.$_checkName(source.name);
	                    var filter = new ColumnFilter(null);
	                    filter.assignFrom(source);
	                    this._items.push(filter);
	                    this._names[source.name] = filter;
	                    filter.addListener(this);
	                }
	            }
	        }
	        if (cleared || this.count > 0) {
	            this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.clear = function (fireEvent) {
	        if (fireEvent === void 0) { fireEvent = true; }
	        var cnt = this._items.length;
	        if (cnt > 0) {
	            for (var i = 0; i < cnt; i++) {
	                this._items[i].removeListener(this);
	            }
	            this._items.length = 0;
	            this._names = {};
	            fireEvent && this.changed(null);
	            return true;
	        }
	        return false;
	    };
	    ColumnFilterCollection.prototype.add = function (filter, apply) {
	        if (apply === void 0) { apply = true; }
	        var f = Utils_1.Utils.cast(filter, ColumnFilter);
	        if (f) {
	            if (this._items.indexOf(f) < 0 && f.name) {
	                this.$_checkName(f.name);
	            }
	        }
	        else if (filter && filter.name) {
	            this.$_checkName(filter.name);
	            f = new ColumnFilter(null);
	            f.assignFrom(filter);
	        }
	        if (f) {
	            this._items.push(f);
	            this._names[f.name] = f;
	            f.addListener(this);
	            apply && this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.addAll = function (filters, overwrite) {
	        if (!(filters instanceof Array) && filters) {
	            filters = [filters];
	        }
	        if (filters && filters.length > 0) {
	            var cnt = 0;
	            var len = filters.length;
	            for (var i = 0; i < len; i++) {
	                var filter = Utils_1.Utils.cast(filters[i], ColumnFilter);
	                if (filter) {
	                    if (this._items.indexOf(filter) < 0 && filter.name) {
	                        if (!overwrite) {
	                            this.$_checkName(filter.name);
	                        }
	                    }
	                }
	                else if (filters[i] && filters[i].name) {
	                    if (!overwrite) {
	                        this.$_checkName(filters[i].name);
	                    }
	                    filter = new ColumnFilter(null);
	                    filter.assignFrom(filters[i]);
	                }
	                if (filter) {
	                    var idx = this.indexOf(filter.name);
	                    if (idx >= 0) {
	                        if (this._items[idx]) {
	                            this._items[idx].removeListener(this);
	                        }
	                        this._items[idx] = filter;
	                    }
	                    else {
	                        this._items.push(filter);
	                    }
	                    filter.addListener(this);
	                    this._names[filter.name] = filter;
	                    cnt++;
	                }
	            }
	            if (cnt > 0) {
	                this.changed(null);
	            }
	        }
	    };
	    ColumnFilterCollection.prototype.remove = function (filterName) {
	        if (!filterName) {
	            return;
	        }
	        for (var i = this._items.length - 1; i >= 0; i--) {
	            var filter = this._items[i];
	            if (filter.name == filterName) {
	                this._items.splice(i, 1);
	                delete this._names[filter.name];
	                filter.removeListener(this);
	                this.changed(null);
	                return true;
	            }
	        }
	        return false;
	    };
	    ColumnFilterCollection.prototype.removeItems = function (filterNames) {
	        if (!filterNames) {
	            return;
	        }
	        var cnt = 0;
	        for (var i = filterNames.length - 1; i >= 0; i--) {
	            var j = this.indexOf(filterNames[i]);
	            if (j >= 0) {
	                var filter = this._items[j];
	                this._items.splice(j, 1);
	                delete this._names[filter.name];
	                filter.removeListener(this);
	                cnt++;
	            }
	        }
	        if (cnt > 0) {
	            this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.activateItems = function (filterNames, active) {
	        if (!filterNames) {
	            return;
	        }
	        var cnt = 0;
	        this._updating = true;
	        try {
	            for (var i = filterNames.length - 1; i >= 0; i--) {
	                var filter = this._names[filterNames[i]];
	                if (filter && filter.active != active) {
	                    filter["_active"] = active;
	                    cnt++;
	                }
	            }
	        }
	        finally {
	            this._updating = false;
	        }
	        if (cnt > 0) {
	            this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.activateAll = function (active) {
	        var dirty = false;
	        this._updating = true;
	        try {
	            for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	                var filter = this._items[i];
	                if (filter.active != active) {
	                    filter["_active"] = active;
	                    dirty = true;
	                }
	            }
	        }
	        finally {
	            this._updating = false;
	        }
	        if (dirty) {
	            this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.hideFilters = function (filterNames, hide) {
	        if (!filterNames) {
	            return;
	        }
	        for (var i = 0, cnt = filterNames.length; i < cnt; i++) {
	            var filter = this._names[filterNames[i]];
	            if (filter) {
	                filter.visible = !hide;
	            }
	        }
	    };
	    ColumnFilterCollection.prototype.hideAllFilters = function (hide) {
	        for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	            var filter = this._items[i];
	            filter && (filter.visible = !hide);
	        }
	    };
	    ColumnFilterCollection.prototype.toggleItems = function (filterNames) {
	        if (!filterNames) {
	            return;
	        }
	        var cnt = 0;
	        this._updating = true;
	        try {
	            for (var i = filterNames.length - 1; i >= 0; i--) {
	                var filter = this._names[filterNames[i]];
	                if (filter) {
	                    filter["_active"] = !filter.active;
	                    cnt++;
	                }
	            }
	        }
	        finally {
	            this._updating = false;
	        }
	        if (cnt > 0) {
	            this.changed(null);
	        }
	    };
	    ColumnFilterCollection.prototype.toggleAll = function () {
	        var dirty = false;
	        this._updating = true;
	        try {
	            for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	                var filter = this._items[i];
	                filter["_active"] = !filter.active;
	                dirty = true;
	            }
	        }
	        finally {
	            this._updating = false;
	        }
	        if (dirty) {
	            this.changed(null);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnFilterCollection.prototype.changed = function (filter) {
	        if (!this._updating) {
	            this.fireEvent(ColumnFilter.CHANGED, filter);
	        }
	    };
	    ColumnFilterCollection.prototype.$_checkName = function (name) {
	        if (this._names.hasOwnProperty(name)) {
	            throw new Error("Column filter already existes: " + name);
	        }
	    };
	    ColumnFilterCollection.prototype.$_userFilterAdd = function (filter, apply) {
	        var f = filter instanceof ColumnFilter ? filter : null;
	        if (!f) {
	            this.$_checkName(filter.name);
	            f = new ColumnFilter(null);
	            f.assignFrom(filter);
	        }
	        this.add(f, apply);
	        return f;
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    ColumnFilterCollection.prototype.onColumnFilterChanged = function (filter) {
	        this.changed(filter);
	    };
	    ColumnFilterCollection.prototype.onColumnFilterSelectorChanged = function () {
	        this.changed(null);
	    };
	    ColumnFilterCollection.prototype.onColumnFilterUserAdd = function (selector, filter, apply) {
	        // if (!filter || !filter.criteria || !filter.text) {
	        // 	return;
	        // }
	        // filter.name = filter.name || "$userFilter_"+(this._nextId++);
	        // return this.$_userFilterAdd(filter, apply);
	    };
	    return ColumnFilterCollection;
	}(EventAware_1.EventAware));
	exports.ColumnFilterCollection = ColumnFilterCollection;
	var ColumnFilterRuntime = /** @class */ (function (_super) {
	    __extends(ColumnFilterRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFilterRuntime() {
	        var _this = _super.call(this) || this;
	        _this._field = -1;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    ColumnFilterRuntime.prototype._doDispose = function () {
	        this._item = this._ds = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnFilterRuntime.prototype.setDataSource = function (ds) {
	        this._ds = ds;
	        this._fieldCount = this._ds ? this._ds.fieldCount : 0;
	    };
	    ColumnFilterRuntime.prototype.setData = function (item, field) {
	        this._item = item;
	        this._field = field;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnFilterRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (ColumnFilterRuntime.IDENTS.hasOwnProperty(token)) {
	            return ColumnFilterRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    ColumnFilterRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case ColumnFilterRuntime.ID_VALUE:
	                return this._item.getData(this._field);
	            case ColumnFilterRuntime.ID_STATE:
	                switch (this._item.rowState) {
	                    case RowState_1.RowState.CREATED:
	                        return "c";
	                    case RowState_1.RowState.UPDATED:
	                        return "u";
	                    case RowState_1.RowState.DELETED:
	                        return "d";
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        return "x";
	                }
	                return undefined;
	            case ColumnFilterRuntime.ID_CHANGED_CELL:
	                // update 인경우만 가능하다.
	                var dataRow = this._item.dataRow;
	                var dataField = this._field;
	                return dataField >= 0 && this._item.rowState == RowState_1.RowState.UPDATED && this._ds.isDataChanged(dataRow, dataField);
	            case ColumnFilterRuntime.ID_FIELD:
	                return this._field;
	            case ColumnFilterRuntime.ID_MAX:
	                return 0;
	            case ColumnFilterRuntime.ID_MIN:
	                return 0;
	            case ColumnFilterRuntime.ID_MEAN:
	                return 0;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    ColumnFilterRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._item) {
	            if (idKey == ColumnFilterRuntime.ID_VALUE || idKey == ColumnFilterRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    ColumnFilterRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == ColumnFilterRuntime.ID_VALUE || idKey == ColumnFilterRuntime.ID_VALUES) {
	            if (this._ds) {
	                var idx = capitalized ? this._ds.getFieldIndexC(index) : this._ds.getFieldIndex(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ColumnFilterRuntime.ID_VALUE = 0;
	    ColumnFilterRuntime.ID_FIELD = 1;
	    ColumnFilterRuntime.ID_VALUES = 2;
	    ColumnFilterRuntime.ID_STATE = 3;
	    ColumnFilterRuntime.ID_CHANGED_CELL = 4;
	    ColumnFilterRuntime.ID_MAX = 10;
	    ColumnFilterRuntime.ID_MIN = 11;
	    ColumnFilterRuntime.ID_MEAN = 12;
	    ColumnFilterRuntime.IDENTS = {
	        value: ColumnFilterRuntime.ID_VALUE,
	        field: ColumnFilterRuntime.ID_FIELD,
	        values: ColumnFilterRuntime.ID_VALUES,
	        state: ColumnFilterRuntime.ID_STATE,
	        changedcell: ColumnFilterRuntime.ID_CHANGED_CELL,
	        min: ColumnFilterRuntime.ID_MAX,
	        max: ColumnFilterRuntime.ID_MIN,
	        mean: ColumnFilterRuntime.ID_MEAN,
	    };
	    return ColumnFilterRuntime;
	}(Expression.ExpressionRuntime));
	exports.ColumnFilterRuntime = ColumnFilterRuntime;
	});

	unwrapExports(ColumnFilter_1);
	var ColumnFilter_2 = ColumnFilter_1.ColumnFilter;
	var ColumnFilter_3 = ColumnFilter_1.ColumnFilterRun;
	var ColumnFilter_4 = ColumnFilter_1.ColumnFilterCollection;
	var ColumnFilter_5 = ColumnFilter_1.ColumnFilterRuntime;

	var GridObject_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridObject.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var GridObject = /** @class */ (function (_super) {
	    __extends(GridObject, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridObject(grid) {
	        var _this = _super.call(this) || this;
	        _this._dirty = false;
	        _this._grid = grid;
	        return _this;
	    }
	    GridObject.prototype._doDispose = function () {
	        this._grid = null;
	        // for (var attr in this) {
	        // 	if (this[attr] instanceof VisualStyles || this[attr] instanceof DynamicStyleCollection) {
	        // 		this[attr] = null;
	        // 		// delete this[attr];
	        // 	}
	        // }
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridObject.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner  */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridObject.prototype, "dirty", {
	        /** dirty */
	        get: function () {
	            return this._dirty;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridObject.prototype.clean = function () {
	        if (this._dirty) {
	            this._dirty = false;
	        }
	    };
	    GridObject.prototype.invalidate = function () {
	        this._grid && this._grid.invalidate();
	    };
	    GridObject.prototype.refreshOwner = function () {
	        this._grid && this._grid.refreshView();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridObject.prototype._changed = function () {
	        this._doChanged();
	        if (!this._dirty) {
	            this._dirty = true;
	            this.refreshOwner();
	        }
	    };
	    GridObject.prototype._doChanged = function () {
	    };
	    return GridObject;
	}(EventAware_1.EventAware));
	exports.GridObject = GridObject;
	var VisualObject = /** @class */ (function (_super) {
	    __extends(VisualObject, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function VisualObject(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        return _this;
	    }
	    VisualObject.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(VisualObject.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            this._setVisible(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    VisualObject.prototype._setVisible = function (value) {
	        if (value != this._visible) {
	            this._visible = value;
	            this._visibleChanged();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    VisualObject.prototype._doChanged = function () {
	        if (this._grid) {
	            this._grid["_visualObjectChanged"](this);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    VisualObject.prototype._visibleChanged = function () {
	        this._changed();
	    };
	    return VisualObject;
	}(GridObject));
	exports.VisualObject = VisualObject;
	});

	unwrapExports(GridObject_1);
	var GridObject_2 = GridObject_1.GridObject;
	var GridObject_3 = GridObject_1.VisualObject;

	var FieldSummary_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FieldSummary.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var FieldSummary = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FieldSummary(field) {
	        this.field = field;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        this.count = 0;
	        this.sum = NaN;
	        this.max = NaN;
	        this.min = NaN;
	        this.avg = NaN;
	        this.vars = NaN;
	        this.varsp = NaN;
	        this.dataCount = 0;
	        this.dataAvg = NaN;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FieldSummary.prototype.clear = function () {
	        this.count = 0;
	        this.sum = this.max = this.min = this.avg = this.vars = this.varsp = NaN;
	    };
	    return FieldSummary;
	}());
	exports.FieldSummary = FieldSummary;
	});

	unwrapExports(FieldSummary_1);
	var FieldSummary_2 = FieldSummary_1.FieldSummary;

	var RestoreMode_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RestoreMode.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var RestoreMode;
	(function (RestoreMode) {
	    RestoreMode["NONE"] = "none";
	    RestoreMode["EXPLICIT"] = "explicit";
	    RestoreMode["AUTO"] = "auto";
	})(RestoreMode = exports.RestoreMode || (exports.RestoreMode = {}));
	});

	unwrapExports(RestoreMode_1);
	var RestoreMode_2 = RestoreMode_1.RestoreMode;

	var CalculateExpressionRuntime_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CalculateExpressionRuntime.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var CalculateExpressionRuntime = /** @class */ (function (_super) {
	    __extends(CalculateExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CalculateExpressionRuntime() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._values = null;
	        _this._fields = null;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CalculateExpressionRuntime.prototype.setValues = function (values, fields) {
	        this._values = values;
	        this._fields = fields;
	        this._fieldCount = fields ? fields.length : 0;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CalculateExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (CalculateExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return CalculateExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    CalculateExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    CalculateExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._values) {
	            if (idKey == CalculateExpressionRuntime.ID_VALUE || idKey == CalculateExpressionRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._values[index];
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    CalculateExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capital) {
	        if (idKey == CalculateExpressionRuntime.ID_VALUE || idKey == CalculateExpressionRuntime.ID_VALUES) {
	            if (this._values && this._fields) {
	                var idx = this._fields.indexOf(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._values[idx];
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    CalculateExpressionRuntime.ID_VALUE = 0;
	    CalculateExpressionRuntime.ID_VALUES = 1;
	    CalculateExpressionRuntime.IDENTS = {
	        "value": CalculateExpressionRuntime.ID_VALUE,
	        "values": CalculateExpressionRuntime.ID_VALUES
	    };
	    return CalculateExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.CalculateExpressionRuntime = CalculateExpressionRuntime;
	});

	unwrapExports(CalculateExpressionRuntime_1);
	var CalculateExpressionRuntime_2 = CalculateExpressionRuntime_1.CalculateExpressionRuntime;

	var DataSource_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataSource.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	var SimpleDataComparer = /** @class */ (function () {
	    function SimpleDataComparer() {
	    }
	    SimpleDataComparer.prototype.compare = function (field, v1, v2) {
	        if (field.dataType == Types.ValueType.NUMBER) {
	            return Number(v1) - Number(v2);
	        }
	        else {
	            return v1 > v2 ? 1 : (v1 < v2 ? -1 : 0);
	        }
	    };
	    return SimpleDataComparer;
	}());
	var DataSourceError = /** @class */ (function (_super) {
	    __extends(DataSourceError, _super);
	    function DataSourceError(message) {
	        return _super.call(this, message) || this;
	    }
	    return DataSourceError;
	}(Error));
	exports.DataSourceError = DataSourceError;
	var ClientEditingError = /** @class */ (function (_super) {
	    __extends(ClientEditingError, _super);
	    function ClientEditingError() {
	        return _super.call(this, "Client is editing (call grid.commit() or grid.cancel() first)") || this;
	    }
	    return ClientEditingError;
	}(Error));
	exports.ClientEditingError = ClientEditingError;
	var DataSource = /** @class */ (function (_super) {
	    __extends(DataSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataSource() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._subTypeEnabled = true;
	        _this._undoable = false;
	        _this._insertable = true;
	        _this._updatable = true;
	        _this._deletable = true;
	        _this._softDeleting = false;
	        _this._deleteCreated = false;
	        _this._checkStates = true;
	        _this._restoreMode = RestoreMode_1.RestoreMode.NONE;
	        _this._strictRestore = false;
	        _this._booleanFormat = null;
	        _this._datetimeFormat = null;
	        _this._baseYear = 2000;
	        _this._amText = "AM";
	        _this._pmText = "PM";
	        _this._alertClientError = true;
	        _this._throwClientError = false;
	        _this._commitBeforeDataEdit = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._fields = [];
	        _this._calcFields = [];
	        _this._fieldNames = [];
	        _this._fieldMap = {};
	        _this._defComparer = new SimpleDataComparer();
	        _this._comparers = [];
	        _this._boolParser = BooleanConverter_1.BooleanConverter.Default;
	        _this._dateParser = DateTimeReader_1.DateTimeReader.Default;
	        _this._eventLock = 0;
	        _this._resetLock = 0;
	        _this._countLock = 0;
	        _this._clients = [];
	        return _this;
	    }
	    DataSource.prototype._doDispose = function () {
	        try {
	            this.$_internalClearFields();
	            this._fieldMap = null;
	        }
	        catch (err) {
	        }
	        this._fields = null;
	        this._calcFields = null;
	        this._fieldNames = null;
	        this._fieldMap = null,
	            this._boolParser = this._dateParser = null;
	        this._comparers = null;
	        this._clients = null;
	        this._defComparer = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DataSource.prototype, "subTypeEnabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** subTypeEnabled */
	        get: function () {
	            return this._subTypeEnabled;
	        },
	        set: function (value) {
	            if (value != this._subTypeEnabled) {
	                this._subTypeEnabled = value;
	                for (var _i = 0, _a = this._fields; _i < _a.length; _i++) {
	                    var field = _a[_i];
	                    field.$_resetTypes();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "undoable", {
	        /** undoable */
	        get: function () {
	            return this._undoable;
	        },
	        set: function (value) {
	            this._undoable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "insertable", {
	        /** insertable */
	        get: function () {
	            return this._insertable;
	        },
	        set: function (value) {
	            this._insertable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "updatable", {
	        /** updatable */
	        get: function () {
	            return this._updatable;
	        },
	        set: function (value) {
	            this._updatable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "deletable", {
	        /** deletable */
	        get: function () {
	            return this._deletable;
	        },
	        set: function (value) {
	            this._deletable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "softDeleting", {
	        /** softDeleting */
	        get: function () {
	            return this._softDeleting;
	        },
	        set: function (value) {
	            this._softDeleting = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "deleteCreated", {
	        /** deleteCreated */
	        get: function () {
	            return this._deleteCreated;
	        },
	        set: function (value) {
	            this._deleteCreated = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "checkStates", {
	        /** checkStates */
	        get: function () {
	            return this._checkStates;
	        },
	        set: function (value) {
	            if (value != this._checkStates) {
	                this._checkStates = value;
	                this._doCheckStatesChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "restoreMode", {
	        /** restoreMode */
	        get: function () {
	            return this._restoreMode;
	        },
	        set: function (value) {
	            if (value != this._restoreMode) {
	                var old = this._restoreMode;
	                this._restoreMode = value;
	                this._doRestoreModeChanged(old, value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "strictRestore", {
	        /** strictRestore */
	        get: function () {
	            return this._strictRestore;
	        },
	        set: function (value) {
	            this._strictRestore = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolParser = value ? new BooleanConverter_1.BooleanConverter(value) : BooleanConverter_1.BooleanConverter.Default;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                this.$_createDateReader();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "baseYear", {
	        /** baseYear */
	        get: function () {
	            return this._baseYear;
	        },
	        set: function (value) {
	            this._baseYear = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "amText", {
	        /** amText */
	        get: function () {
	            return this._amText;
	        },
	        set: function (value) {
	            if (value != this._amText) {
	                this._amText = value;
	                this.$_createDateReader();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "pmText", {
	        /** pmText */
	        get: function () {
	            return this._pmText;
	        },
	        set: function (value) {
	            if (value != this._pmText) {
	                this._pmText = value;
	                this.$_createDateReader();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "alertClientError", {
	        /** alertClientError */
	        get: function () {
	            return this._alertClientError;
	        },
	        set: function (value) {
	            this._alertClientError = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "throwClientError", {
	        /** throwClientError */
	        get: function () {
	            return this._throwClientError;
	        },
	        set: function (value) {
	            this._throwClientError = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "commitBeforeDataEdit", {
	        /** commitBeforeDataEdit */
	        get: function () {
	            return this._commitBeforeDataEdit;
	        },
	        set: function (value) {
	            this._commitBeforeDataEdit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "calculateRuntime", {
	        /** calculateRuntime */
	        get: function () {
	            if (!this._calculateRuntime) {
	                this._calculateRuntime = new CalculateExpressionRuntime_1.CalculateExpressionRuntime();
	            }
	            return this._calculateRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "local", {
	        /** local */
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "immediateUpdate", {
	        /** immediateUpdate */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "summarized", {
	        /** summarized */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "fieldCount", {
	        /** fieldCount */
	        get: function () {
	            return this._fields.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "boolParser", {
	        /** boolParser */
	        get: function () {
	            return this._boolParser;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "dateParser", {
	        /** dateParser */
	        get: function () {
	            return this._dateParser;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "eventLocked", {
	        /** eventLocked */
	        get: function () {
	            return this._eventLock > 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "canUndo", {
	        /** canUndo */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "canRedo", {
	        /** canRedo */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "undoing", {
	        /** undoing */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSource.prototype, "redoing", {
	        /** redoing */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataSource.prototype.registerClient = function (client) {
	        if (client && this._clients.indexOf(client) < 0) {
	            this._clients.push(client);
	        }
	    };
	    DataSource.prototype.unregisterClient = function (client) {
	        if (client) {
	            var index = this._clients.indexOf(client);
	            index >= 0 && this._clients.splice(index, 1);
	        }
	    };
	    DataSource.prototype.cancelClients = function () {
	        for (var _i = 0, _a = this._clients; _i < _a.length; _i++) {
	            var client = _a[_i];
	            client.cancelDataEditing();
	        }
	    };
	    DataSource.prototype.commitClients = function () {
	        for (var _i = 0, _a = this._clients; _i < _a.length; _i++) {
	            var client = _a[_i];
	            client.commitDataEditing();
	        }
	    };
	    DataSource.prototype.beginUpdate = function () {
	        this._checkClientState();
	        this._eventLock++;
	    };
	    DataSource.prototype.endUpdate = function (refresh) {
	        if (refresh === void 0) { refresh = true; }
	        this._checkClientState();
	        this._eventLock = Math.max(0, this._eventLock - 1);
	        if (this._eventLock == 0) {
	            if (refresh) {
	                if (this._resetLock > 0) {
	                    this._fireReset();
	                }
	                else {
	                    this._fireRefresh();
	                }
	                if (this._countLock > 0) {
	                    this._fireRowCountChanged();
	                }
	            }
	            this._resetLock = this._countLock = 0;
	        }
	    };
	    DataSource.prototype.addField = function (source, resetFields, calculateData) {
	        if (!this._checkClientState())
	            return;
	        var field = null;
	        this.beginUpdate();
	        try {
	            field = this.$_internalAddField(source);
	            field && field.$_resetTypes(this);
	        }
	        finally {
	            resetFields && this._doFieldsReset();
	            this.endUpdate();
	        }
	        return field;
	    };
	    DataSource.prototype.clearFields = function () {
	        if (!this._checkClientState())
	            return;
	        if (this._fields.length > 0) {
	            this.$_internalClearFields();
	            this._doFieldsReset();
	        }
	    };
	    DataSource.prototype.setFields = function (fields) {
	        if (!this._checkClientState())
	            return;
	        this.beginUpdate();
	        try {
	            this.$_internalClearFields();
	            if (fields) {
	                for (var i = 0, cnt = fields.length; i < cnt; i++) {
	                    var field = this.$_internalAddField(fields[i]);
	                    if (field) {
	                        field.$_resetTypes(this);
	                    }
	                }
	            }
	        }
	        finally {
	            this.endUpdate();
	            this._doFieldsReset();
	        }
	    };
	    DataSource.prototype.getField = function (index) {
	        return this._fields[index];
	    };
	    DataSource.prototype.getFields = function () {
	        return this._fields.slice();
	    };
	    DataSource.prototype.fieldByName = function (name) {
	        if (name) {
	            var uppname = name.toUpperCase();
	            for (var _i = 0, _a = this._fields; _i < _a.length; _i++) {
	                var field = _a[_i];
	                if (field.fieldName == uppname) {
	                    return field;
	                }
	            }
	        }
	        return null;
	    };
	    DataSource.prototype.getFieldNames = function () {
	        var i, cnt = this._fields.length, names = [];
	        for (i = 0; i < cnt; i++) {
	            names.push(this._fields[i].fieldName);
	        }
	        return names;
	    };
	    DataSource.prototype.getOrgFieldNames = function () {
	        var i, cnt = this._fields.length, names = [];
	        for (i = 0; i < cnt; i++) {
	            names.push(this._fields[i].orgFieldName);
	        }
	        return names;
	    };
	    DataSource.prototype.getFieldName = function (field) {
	        this._checkFieldIndex(field);
	        return this._fields[field].fieldName;
	    };
	    DataSource.prototype.getOrgFieldName = function (field) {
	        this._checkFieldIndex(field);
	        return this._fields[field].orgFieldName;
	    };
	    DataSource.prototype.getFieldIndex = function (fieldName) {
	        if (fieldName) {
	            var s = fieldName.toUpperCase();
	            if (s in this._fieldMap) {
	                return this._fieldMap[s];
	            }
	        }
	        return -1;
	    };
	    DataSource.prototype.getFieldIndexC = function (fieldName) {
	        if (fieldName in this._fieldMap) {
	            return this._fieldMap[fieldName];
	        }
	        return -1;
	    };
	    DataSource.prototype.getBaseField = function (field) {
	        if (field >= 0 && field < this._fields.length) {
	            return this.getFieldIndex(this._fields[field].baseField);
	        }
	        else {
	            return -1;
	        }
	    };
	    // getFieldIndexOf(field: any): number {
	    // 	return typeof field == "string" ? this.getFieldIndex(field) : parseInt(field);
	    // }
	    DataSource.prototype.getValueType = function (field) {
	        return this._fields[field].dataType;
	    };
	    DataSource.prototype.getDefaultValue = function (field) {
	        return this._fields[field].defaultValue();
	    };
	    DataSource.prototype.hasData = function (row) {
	        return false;
	    };
	    DataSource.prototype.canUpdateField = function (row, field) {
	        if (field >= 0 && field < this._fields.length) {
	            var fld = this._fields[field];
	            if (!fld.updatable && row >= 0) {
	                try {
	                    var st = this.getRowState(row);
	                    return !st || st == RowState_1.RowState.CREATED || st == RowState_1.RowState.CREATE_AND_DELETED;
	                }
	                catch (err) {
	                    return false;
	                }
	            }
	            return true;
	        }
	        return false;
	    };
	    DataSource.prototype.getDataComparer = function (field) {
	        if (field >= 0) {
	            var comparer = this._comparers[field];
	            if (comparer) {
	                return comparer;
	            }
	            else {
	                return null;
	            }
	        }
	        // this._defComparer.dataType = field >= 0 ? this.getValueType(field) : ValueType.TEXT;
	        // return this._defComparer;
	    };
	    DataSource.prototype.setDataComparer = function (field, comparer) {
	        if (comparer) {
	            this._comparers[field] = comparer;
	        }
	        else {
	            this._comparers[field] = undefined;
	        }
	    };
	    DataSource.prototype.canSummarize = function (field) {
	        if (field >= 0 && field < this.fieldCount) {
	            var t = this.getValueType(field);
	            if (t == Types.ValueType.BOOLEAN || t == Types.ValueType.NUMBER || Types.ValueType.DATE) {
	                return true;
	            }
	        }
	        return false;
	    };
	    DataSource.prototype.findRow = function (fields, values) {
	        return undefined;
	    };
	    DataSource.prototype.getDistinctValues = function (field, maxCount, sortDir) {
	        if (sortDir === void 0) { sortDir = Types.SortDirection.ASCENDING; }
	        return null;
	    };
	    DataSource.prototype.exportToJson = function () {
	    };
	    DataSource.prototype.exportToCsv = function (options) {
	        //new DataProviderCsvExporter()["export"](this, options);		
	    };
	    DataSource.prototype.exportToXml = function () {
	    };
	    DataSource.prototype.canUpdateRow = function (row) {
	        return false;
	    };
	    DataSource.prototype.canAppendRow = function () {
	        return false;
	    };
	    DataSource.prototype.canInsertRow = function (row) {
	        return false;
	    };
	    DataSource.prototype.canDeleteRow = function (row) {
	        return false;
	    };
	    DataSource.prototype.undo = function () {
	    };
	    DataSource.prototype.redo = function () {
	    };
	    DataSource.prototype.clearCommandStack = function () {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataSource.prototype.getClientsBusy = function () {
	        var client = null;
	        var ret = { busy: false, cnt: 0, client: client };
	        if (this.disposing) {
	            return ret;
	        }
	        for (var i = this._clients.length; i--;) {
	            if (this._clients[i].isDataEditing()) {
	                ret.busy = true;
	                ret.cnt++;
	                ret.client = this._clients[i];
	            }
	        }
	        return ret;
	    };
	    DataSource.prototype._checkClientState = function () {
	        var busyInfo = this.getClientsBusy();
	        if (busyInfo.busy) {
	            /*
	            // 편집중인 그리드가 1개인경우 편집중인 그리드를 commit한다.
	            // 2개이상인 경우 clientError발생.//
	            if (this._commitBeforeDataEdit && busyInfo.cnt == 1) {
	                listeners = busyInfo.client._listeners;
	                var hasCommit = true;
	                for (var i=0, cnt = listeners.length; i< cnt; i++) {
	                    var isCommit = listeners[i].commit(false,true);
	                    hasCommit = hasCommit && (isCommit || (listeners[i].isEditing && !listeners[i].isEditing()));
	                }
	                if (hasCommit) return true;
	            }
	            */
	            if (this._throwClientError) {
	                throw new ClientEditingError();
	            }
	            if (this._alertClientError) {
	                Utils_1.Utils.alert(new ClientEditingError().message);
	            }
	            return false;
	        }
	        return true;
	    };
	    DataSource.prototype._checkFieldIndex = function (field) {
	        if (field < 0 || field >= this._fields.length) {
	            throw new DataSourceError("Invalid field index: " + field);
	        }
	    };
	    DataSource.prototype.$_internalClearFields = function () {
	        this._checkClientState();
	        for (var _i = 0, _a = this._fields; _i < _a.length; _i++) {
	            var field = _a[_i];
	            field.$_setIndex(-1);
	        }
	        this._fields.splice(0, this._fields.length);
	        this._calcFields.splice(0, this._calcFields.length);
	        this._fieldNames.splice(0, this._fieldNames.length);
	        this._fieldMap = {};
	    };
	    DataSource.prototype.$_internalInsertField = function (index, field) {
	        this._checkClientState();
	        var len = this._fields.length;
	        if (index < 0 || index > len) {
	            debugger;
	            throw new DataSourceError("index is out of bounds:" + index);
	        }
	        if (field) {
	            field.$_prepare(this);
	            this._fields.splice(index, 0, field);
	            this._fieldNames.splice(index, 0, field.fieldName);
	            if (field.calculated) {
	                this._calcFields.push(field);
	            }
	            field.$_setIndex(index);
	            this._fieldMap[field.fieldName] = index;
	            for (var i = index + 1; i <= len; i++) {
	                field = this._fields[i];
	                field.$_setIndex(i);
	                this._fieldMap[field.fieldName] = i;
	            }
	            return index;
	        }
	        return -1;
	    };
	    DataSource.prototype.$_addField = function (fieldName, dataType, length) {
	        if (!fieldName) {
	            throw new DataSourceError("fieldName must be exists.");
	        }
	        if (this.getFieldIndex(fieldName) >= 0) {
	            throw new DataSourceError("fieldName is already exists: " + fieldName);
	        }
	        var field = new DataField_1.DataField(fieldName, dataType, length);
	        this.$_internalInsertField(this._fields.length, field);
	        return field;
	    };
	    DataSource.prototype.$_internalAddField = function (fld) {
	        var field = null;
	        if (typeof fld === "string") {
	            field = this.$_addField(fld, Types.ValueType.TEXT, 0);
	        }
	        else if (fld instanceof DataField_1.DataField) {
	            field = fld.clone();
	            this.$_internalInsertField(this._fields.length, field);
	        }
	        else if (fld) {
	            field = this.$_addField(fld.fieldName, fld.dataType || Types.ValueType.TEXT, fld.length);
	            field.assignFrom(fld);
	        }
	        return field;
	    };
	    DataSource.prototype._internalCalculateValues = function (values, row) {
	        var fields = this._calcFields;
	        if (fields.length > 0) {
	            var rvalues = [];
	            for (var i = 0; i < values.length; i++) {
	                rvalues[i] = this.getField(i).readValue(values[i]);
	            }
	            for (var i = 0, len = fields.length; i < len; i++) {
	                var field = fields[i];
	                var fldIdx = this._fieldMap[field.fieldName];
	                values[fldIdx] = rvalues[fldIdx] = field.readValue(field.$_calculateValue(this._calculateRuntime, row, field.orgFieldName, this._fieldNames, this.getOrgFieldNames(), rvalues));
	            }
	        }
	    };
	    DataSource.prototype.refreshFieldFormats = function () {
	        for (var _i = 0, _a = this._fields; _i < _a.length; _i++) {
	            var field = _a[_i];
	            field.$_refreshFormats(this);
	        }
	    };
	    DataSource.prototype.refreshFieldFormat = function (field) {
	        field && field.$_refreshFormats(this);
	    };
	    DataSource.prototype.$_createOutputRows = function (rows, options, startIdx) {
	        if (startIdx === void 0) { startIdx = 0; }
	        var fldCount = this.fieldCount;
	        var rowCount = rows.length;
	        if (!(options instanceof DataOutputOptions_1.DataOutputOptions)) {
	            options = new DataOutputOptions_1.DataOutputOptions(options);
	        }
	        var nullDate = options.nullDateText;
	        var nullText = options.nullText;
	        var nanText = options.nanText;
	        for (var i = 0; i < fldCount; i++) {
	            var field = this.getField(i);
	            var dt = field.dataType;
	            var prop = field.orgFieldName;
	            var callback = void 0;
	            var writer = void 0;
	            if (dt == Types.ValueType.DATETIME && ((callback = options.datetimeCallback) || (writer = options.datetimeWriter) || (nullDate != null && nullDate != undefined))) {
	                if (callback) {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        row[prop] = callback(r + startIdx, prop, row[prop]);
	                    }
	                }
	                else {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        var d = row[prop];
	                        row[prop] = d ? writer ? writer.getText(row[prop]) : d : nullDate;
	                    }
	                }
	            }
	            else if (dt == Types.ValueType.BOOLEAN && ((callback = options.booleanCallback) || (writer = options.booleanFormatter))) {
	                if (callback) {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        row[prop] = callback(r + startIdx, prop, row[prop]);
	                    }
	                }
	                else {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        row[prop] = writer.formatValue(row[prop]);
	                    }
	                }
	            }
	            else if (dt == Types.ValueType.NUMBER && ((callback = options.numberCallback) || (writer = options.numberFormatter) || (nanText != null && nanText != undefined))) {
	                if (callback) {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        row[prop] = callback(r + startIdx, prop, row[prop]);
	                    }
	                }
	                else {
	                    for (var r = 0; r < rowCount; r++) {
	                        var row = rows[r];
	                        var v = row[prop];
	                        row[prop] = v == null || isNaN(v) ? nanText : writer ? writer.format(v) : v;
	                    }
	                }
	            }
	            else if (nullText != null && nullText != undefined) {
	                for (var r = 0; r < rowCount; r++) {
	                    var row = rows[r];
	                    var v_1 = row[prop];
	                    row[prop] = v_1 == null || v_1 == undefined ? nullText : v_1;
	                }
	            }
	        }
	    };
	    DataSource.prototype.$_sortRows = function (rows, field, compFunc, left, right) {
	        do {
	            var i = left;
	            var j = right;
	            var row = Math.floor((left + right) / 2);
	            var m = rows[row];
	            var r = void 0;
	            var v = void 0;
	            do {
	                while (i <= j) {
	                    r = rows[i];
	                    v = compFunc(field, m, r);
	                    if (v <= 0)
	                        break;
	                    i++;
	                }
	                while (i <= j) {
	                    r = rows[j];
	                    v = compFunc(field, m, r);
	                    if (v >= 0)
	                        break;
	                    j--;
	                }
	                if (i <= j) {
	                    if (i != j) {
	                        var t = rows[i];
	                        rows[i] = rows[j];
	                        rows[j] = t;
	                    }
	                    i++;
	                    j--;
	                }
	            } while (i <= j);
	            if (left < j) {
	                this.$_sortRows(rows, field, compFunc, left, j);
	            }
	            left = i;
	        } while (left < right);
	    };
	    DataSource.prototype.$_createDateReader = function () {
	        if (this._datetimeFormat) {
	            this._dateParser = new DateTimeReader_1.DateTimeReader(this._datetimeFormat);
	            this._dateParser.amText = this._amText;
	            this._dateParser.pmText = this._pmText;
	            this._dateParser.baseYear = this._baseYear;
	        }
	        else {
	            this._dateParser = DateTimeReader_1.DateTimeReader.Default;
	        }
	    };
	    DataSource.prototype._doCheckStatesChanged = function () {
	    };
	    DataSource.prototype._doRestoreModeChanged = function (oldMode, newMode) {
	    };
	    DataSource.prototype._doFieldsReset = function () {
	    };
	    DataSource.prototype._refreshClients = function () {
	    };
	    DataSource.prototype._fireReset = function () {
	    };
	    DataSource.prototype._fireRowCountChanged = function () {
	    };
	    DataSource.prototype._fireRefresh = function () {
	    };
	    DataSource.prototype._fireCommandStackChanged = function (undoable, redoable) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataSource.COMMAND_STACK_CHANGED, undoable, redoable);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    DataSource.COMMAND_STACK_CHANGED = "onDataSourceCommandStackChanged";
	    return DataSource;
	}(EventAware_1.EventAware));
	exports.DataSource = DataSource;
	});

	unwrapExports(DataSource_1);
	var DataSource_2 = DataSource_1.DataSourceError;
	var DataSource_3 = DataSource_1.ClientEditingError;
	var DataSource_4 = DataSource_1.DataSource;

	var DataTag_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataTag.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var DataTag = /** @class */ (function (_super) {
	    __extends(DataTag, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataTag() {
	        return _super.call(this) || this;
	    }
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataTag.prototype.connect = function (ds) {
	    };
	    DataTag.prototype.disconnect = function () {
	    };
	    DataTag.prototype.clearRows = function () {
	    };
	    DataTag.prototype.setRows = function () {
	    };
	    DataTag.prototype.setRowCount = function (newCount) {
	    };
	    DataTag.prototype.insertRow = function (row) {
	    };
	    DataTag.prototype.insertRows = function (row, count) {
	    };
	    DataTag.prototype.removeRow = function (row) {
	    };
	    DataTag.prototype.removeRows = function (rows) {
	    };
	    DataTag.prototype.updateRow = function (row) {
	    };
	    DataTag.prototype.updateRows = function (row, count) {
	    };
	    DataTag.prototype.setValue = function (row, field) {
	    };
	    DataTag.prototype.moveRow = function (row, newRow) {
	    };
	    DataTag.prototype.moveRows = function (row, count, newRow) {
	    };
	    DataTag.prototype.changeStates = function (rows) {
	    };
	    return DataTag;
	}(Base_1.Base));
	exports.DataTag = DataTag;
	var DataTagCollection = /** @class */ (function (_super) {
	    __extends(DataTagCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataTagCollection(owner) {
	        var _this = _super.call(this) || this;
	        _this._tags = [];
	        _this._owner = owner;
	        return _this;
	    }
	    DataTagCollection.prototype._doDispose = function () {
	        this._owner = null;
	        this._tags = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataTagCollection.prototype.add = function (tag) {
	        if (this._tags == null)
	            return;
	        if (tag && this._tags.indexOf(tag) < 0) {
	            this._tags.push(tag);
	            tag.connect(this._owner);
	        }
	    };
	    DataTagCollection.prototype.remove = function (tag) {
	        if (this._tags == null)
	            return;
	        if (tag) {
	            var idx = this._tags.indexOf(tag);
	            if (idx >= 0) {
	                this._tags.splice(idx, 1);
	                tag.disconnect();
	            }
	        }
	    };
	    DataTagCollection.prototype.clearRows = function () {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.clearRows();
	        }
	    };
	    DataTagCollection.prototype.setRows = function () {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.setRows();
	        }
	    };
	    DataTagCollection.prototype.setRowCount = function (newCount) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.setRowCount(newCount);
	        }
	    };
	    DataTagCollection.prototype.insertRow = function (row) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.insertRow(row);
	        }
	    };
	    DataTagCollection.prototype.insertRows = function (row, count) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.insertRows(row, count);
	        }
	    };
	    DataTagCollection.prototype.removeRow = function (row) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.removeRow(row);
	        }
	    };
	    DataTagCollection.prototype.removeRows = function (rows) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.removeRows(rows);
	        }
	    };
	    DataTagCollection.prototype.updateRow = function (row) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.updateRow(row);
	        }
	    };
	    DataTagCollection.prototype.updateRows = function (row, count) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.updateRows(row, count);
	        }
	    };
	    DataTagCollection.prototype.setValue = function (row, field) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.setValue(row, field);
	        }
	    };
	    DataTagCollection.prototype.moveRow = function (row, newRow) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.moveRow(row, newRow);
	        }
	    };
	    DataTagCollection.prototype.moveRows = function (row, count, newRow) {
	        if (this._tags == null)
	            return;
	        for (var _i = 0, _a = this._tags; _i < _a.length; _i++) {
	            var tag = _a[_i];
	            tag.moveRows(row, count, newRow);
	        }
	    };
	    return DataTagCollection;
	}(Base_1.Base));
	exports.DataTagCollection = DataTagCollection;
	});

	unwrapExports(DataTag_1);
	var DataTag_2 = DataTag_1.DataTag;
	var DataTag_3 = DataTag_1.DataTagCollection;

	var DataFilter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataFilter.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var DataFilter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataFilter(criteria) {
	        this._active = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._exprNode = null;
	        this.criteria = criteria;
	    }
	    DataFilter.prototype.dispose = function () {
	        this._exprNode = null;
	    };
	    Object.defineProperty(DataFilter.prototype, "criteria", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** criteria */
	        get: function () {
	            return this._criteria;
	        },
	        set: function (value) {
	            if (value != this._criteria) {
	                this._criteria = value;
	                if (value) {
	                    this._exprNode = Expression.ExpressionParser.Default.parse(value, DataFilter.CAPITAL_INDEXERS);
	                }
	                else {
	                    this._exprNode = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataFilter.prototype, "isActive", {
	        /** active */
	        get: function () {
	            return this._active;
	        },
	        set: function (value) {
	            this._active = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataFilter.prototype.select = function (runtime, row, values) {
	        if (this._exprNode) {
	            runtime.setRow(row, values);
	            return this._exprNode.evaluate(runtime);
	        }
	        else {
	            return true;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataFilter.CAPITAL_INDEXERS = ["value", "values", "len"];
	    return DataFilter;
	}());
	exports.DataFilter = DataFilter;
	var DataFilterCollection = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataFilterCollection(source, filterMode) {
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        this._filterMode = DataFilterCollection.FILTER_AND;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._or = false;
	        this.load(source);
	        if (filterMode) {
	            this._filterMode = filterMode;
	        }
	    }
	    DataFilterCollection.prototype.dispose = function () {
	        this._filters && this._filters.forEach(function (item, idx) { item.dispose(); });
	        this._filters = null;
	        return null;
	    };
	    Object.defineProperty(DataFilterCollection.prototype, "filterMode", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** filterMode */
	        get: function () {
	            return this._filterMode;
	        },
	        set: function (value) {
	            var s = value ? value.toLocaleLowerCase() : value;
	            if (s != this._filterMode) {
	                this._filterMode = s;
	                this._or = this._filterMode == DataFilterCollection.FILTER_OR;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataFilterCollection.prototype.load = function (source) {
	        if (source && !(source instanceof Array)) {
	            source = [source];
	        }
	        this._filters = [];
	        if (source instanceof Array) {
	            for (var i = 0, cnt = source.length; i < cnt; i++) {
	                var filter = null;
	                var f = source[i];
	                if (f) {
	                    if (typeof f === "string") {
	                        filter = new DataFilter(f);
	                    }
	                    else if (f.criteria) {
	                        filter = new DataFilter(f.criteria);
	                    }
	                }
	                if (filter) {
	                    this._filters.push(filter);
	                }
	            }
	        }
	    };
	    DataFilterCollection.prototype.prepare = function (runtime, ds) {
	        runtime.prepare(ds);
	    };
	    DataFilterCollection.prototype.select = function (runtime, row, values) {
	        var filters = this._filters;
	        var cnt = filters.length;
	        if (this._or) {
	            for (var i = 0; i < cnt; i++) {
	                if (filters[i].select(runtime, row, values) == true) {
	                    return true;
	                }
	            }
	            return false;
	        }
	        else {
	            for (var i = 0; i < cnt; i++) {
	                if (filters[i].select(runtime, row, values) == false) {
	                    return false;
	                }
	            }
	            return true;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataFilterCollection.FILTER_AND = "and";
	    DataFilterCollection.FILTER_OR = "or";
	    return DataFilterCollection;
	}());
	exports.DataFilterCollection = DataFilterCollection;
	var DataFilterRuntime = /** @class */ (function (_super) {
	    __extends(DataFilterRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataFilterRuntime() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._ds = null;
	        _this._fieldCount = 0;
	        _this._row = -1;
	        _this._values = null;
	        return _this;
	    }
	    DataFilterRuntime.prototype._doDispose = function () {
	        this._ds = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataFilterRuntime.prototype.prepare = function (ds) {
	        this._ds = ds;
	        this._fieldCount = ds ? ds.fieldCount : 0;
	    };
	    DataFilterRuntime.prototype.setRow = function (row, values) {
	        this._row = row;
	        this._values = values;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataFilterRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (DataFilterRuntime.IDENTS.hasOwnProperty(token)) {
	            return DataFilterRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    DataFilterRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case DataFilterRuntime.ID_ROW:
	                return this._row;
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    DataFilterRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (index < 0 || index >= this._fieldCount) {
	            //if ($_debug) debugger;
	            throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	        }
	        switch (idKey) {
	            case DataFilterRuntime.ID_VALUE:
	            case DataFilterRuntime.ID_VALUES:
	                return this._values[index];
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    DataFilterRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        switch (idKey) {
	            case DataFilterRuntime.ID_VALUE:
	            case DataFilterRuntime.ID_VALUES:
	                var field = this.getField(index, capitalized);
	                return this._values[field];
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataFilterRuntime.prototype.getField = function (index, capitalized) {
	        var fld = capitalized ? this._ds.getFieldIndexC(index) : this._ds.getFieldIndex(index);
	        if (fld < 0 || fld >= this._fieldCount) {
	            //if ($_debug) debugger;
	            throw new Expression.ExpressionEvaluationError("Data field is not exits:" + index);
	        }
	        return fld;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataFilterRuntime.ID_ROW = 0;
	    DataFilterRuntime.ID_VALUE = 1;
	    DataFilterRuntime.ID_VALUES = 2;
	    DataFilterRuntime.IDENTS = {
	        row: DataFilterRuntime.ID_ROW,
	        value: DataFilterRuntime.ID_VALUE,
	        values: DataFilterRuntime.ID_VALUES
	    };
	    return DataFilterRuntime;
	}(Expression.ExpressionRuntime));
	exports.DataFilterRuntime = DataFilterRuntime;
	});

	unwrapExports(DataFilter_1);
	var DataFilter_2 = DataFilter_1.DataFilter;
	var DataFilter_3 = DataFilter_1.DataFilterCollection;
	var DataFilter_4 = DataFilter_1.DataFilterRuntime;

	var DataProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataProvider.ts
	// 2019. 07. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var DataProvider = /** @class */ (function (_super) {
	    __extends(DataProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataProvider() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._tags = new DataTag_1.DataTagCollection(_this);
	        _this._filterRuntime = new DataFilter_1.DataFilterRuntime();
	        _this._commandListeners = [];
	        return _this;
	    }
	    DataProvider.prototype._doDispose = function () {
	        this._tags = this._tags.dispose();
	        this._filters = this._filters && this._filters.dispose();
	        this._filterRuntime = this._filterRuntime.dispose();
	        this._commandListeners = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // EditCommandStackOwner
	    //-------------------------------------------------------------------------
	    DataProvider.prototype.editCommandStackChanged = function (stack, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    Object.defineProperty(DataProvider.prototype, "filters", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** filters */
	        get: function () {
	            return this._filters;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProvider.prototype, "filterRuntime", {
	        /** filterRuntime */
	        get: function () {
	            return this._filterRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProvider.prototype, "deletedCount", {
	        /** deletedCount */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProvider.prototype, "tags", {
	        /** tags */
	        get: function () {
	            return this._tags;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // members
	    //-------------------------------------------------------------------------
	    DataProvider.prototype.addTag = function (tag) {
	        this._tags.add(tag);
	    };
	    DataProvider.prototype.removeTag = function (tag) {
	        this._tags.remove(tag);
	    };
	    DataProvider.prototype.setFilters = function (filters, filterMode) {
	        if (!filters || filters instanceof DataFilter_1.DataFilterCollection) {
	            this._filters = filters;
	            if (this._filters && filterMode) {
	                this._filters.filterMode = filterMode;
	            }
	        }
	        else {
	            this._filters = new DataFilter_1.DataFilterCollection(filters, filterMode);
	        }
	    };
	    DataProvider.prototype.getRowObject = function (row) {
	        if (row < 0 || row >= this.rowCount) {
	            throw new DataSource_1.DataSourceError("row is out of range: " + row);
	        }
	        var vals = {};
	        for (var i = 0, cnt = this.fieldCount; i < cnt; i++) {
	            var fld = this.getOrgFieldName(i);
	            var v = this.getValue(row, i);
	            vals[fld] = v;
	        }
	        return vals;
	    };
	    DataProvider.prototype.objectToRow = function (values) {
	        var row = [];
	        if (values) {
	            for (var i = 0, cnt = this.fieldCount; i < cnt; i++) {
	                var fld = this.getOrgFieldName(i);
	                if (values.hasOwnProperty(fld)) {
	                    row[i] = values[fld];
	                }
	            }
	        }
	        return row;
	    };
	    DataProvider.prototype.equalValues = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var fld = this.getField(field);
	            var v1 = this.getValue(row1, field);
	            var v2 = this.getValue(row2, field);
	            return fld.equalValues(v1, v2);
	        }
	        else {
	            return true;
	        }
	    };
	    DataProvider.prototype.equalTexts = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var fld = this.getField(field);
	            var v1 = this.getValue(row1, field);
	            var v2 = this.getValue(row2, field);
	            if (v1 === undefined || v1 === null) {
	                return v2 === undefined || v2 === null;
	            }
	            if (v2 === undefined || v2 === null) {
	                return false;
	            }
	            return v1.toLowerCase() == v2.toLowerCase();
	        }
	        else {
	            return true;
	        }
	    };
	    DataProvider.prototype.sameValues = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var fld = this.getField(field);
	            var v1 = this.getValue(row1, field);
	            var v2 = this.getValue(row2, field);
	            return fld.sameValues(v1, v2);
	        }
	        else {
	            return true;
	        }
	    };
	    DataProvider.prototype.compareValues = function (field, row1, row2) {
	        return 0;
	    };
	    DataProvider.prototype.compareTexts = function (field, row1, row2) {
	        return 0;
	    };
	    DataProvider.prototype.compareNumbers = function (field, row1, row2) {
	        return 0;
	    };
	    DataProvider.prototype.compareBools = function (field, row1, row2) {
	        return 0;
	    };
	    DataProvider.prototype.compareObjects = function (field, row1, row2) {
	        return 0;
	    };
	    DataProvider.prototype.summarize = function (field, calcVars) {
	        return false;
	    };
	    DataProvider.prototype.summarizeRange = function (field, rows, calcVars) {
	        return false;
	    };
	    DataProvider.prototype.copyRows = function (sourceRow, count, targetRow, noStates) {
	    };
	    Object.defineProperty(DataProvider.prototype, "hiddenCount", {
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DataProvider.prototype.isHiddenRow = function (dataRow) {
	        return false;
	    };
	    DataProvider.prototype.registerCommandListener = function (listener) {
	        if (listener && this._commandListeners.indexOf(listener) < 0) {
	            this._commandListeners.push(listener);
	        }
	    };
	    DataProvider.prototype.unregisterCommandListener = function (listener) {
	        var i = this._commandListeners.indexOf(listener);
	        if (i >= 0) {
	            this._commandListeners.splice(i, 1);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataProvider.prototype._doFieldsReset = function () {
	        this._fireReset();
	    };
	    DataProvider.prototype._refreshClients = function () {
	        this.fireRefreshClients();
	    };
	    DataProvider.prototype._keepCommandStates = function (row) {
	        if (this._commandListeners.length > 0) {
	            return this._commandListeners[0].getCommandStates(row);
	        }
	        return undefined;
	    };
	    DataProvider.prototype._yieldCommandStates = function (row, save) {
	        if (this._commandListeners.length > 0) {
	            return this._commandListeners[0].setCommandStates(row, save);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    DataProvider.prototype.fireDisposed = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.DISPOSED);
	        }
	    };
	    DataProvider.prototype._fireReset = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.RESET);
	        }
	        else {
	            this._resetLock++;
	        }
	    };
	    DataProvider.prototype._fireRefresh = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.REFRESH);
	        }
	    };
	    DataProvider.prototype.fireRefreshClients = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.REFRESH);
	        }
	    };
	    DataProvider.prototype._fireRowCountChanged = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_COUNT_CHANGED);
	        }
	        else {
	            this._countLock++;
	        }
	    };
	    DataProvider.prototype.fireRowInserting = function (row, values) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROW_INSERTING, row, values);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowInserted = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_INSERTED, row);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowsInserted = function (row, count) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROWS_INSERTED, row, count);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowRemoving = function (row) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROW_REMOVING, row);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowRemoved = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_REMOVED, row);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowsRemoving = function (rows) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROWS_REMOVING, rows);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowsRemoved = function (rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROWS_REMOVED, rows);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowUpdating = function (row, values) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROW_UPDATING, row, values);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowUpdated = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_UPDATED, row);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowsUpdated = function (row, count) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROWS_UPDATED, row, count);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowMoving = function (row, newRow) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROW_MOVING, row, newRow);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowMoved = function (row, newRow) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_MOVED, row, newRow);
	        }
	    };
	    DataProvider.prototype.fireRowsMoving = function (row, count, newRow) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.ROWS_MOVING, row, count, newRow);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireRowsMoved = function (row, count, newRow) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROWS_MOVED, row, count, newRow);
	        }
	    };
	    DataProvider.prototype.fireValueChanging = function (row, field, value) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(DataProvider.VALUE_CHANGING, row, field, value);
	        }
	        return true;
	    };
	    DataProvider.prototype.fireValueChanged = function (row, field) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.VALUE_CHANGED, row, field);
	            this.fireEvent(DataProvider.DATA_CHANGED);
	        }
	    };
	    DataProvider.prototype.fireRowStateChanged = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.STATE_CHANGED, row);
	        }
	    };
	    DataProvider.prototype.fireRowStatesChanged = function (rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.STATES_CHANGED, rows);
	        }
	    };
	    DataProvider.prototype.fireRowStatesCleared = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.STATES_CLEARED);
	        }
	    };
	    DataProvider.prototype.fireRestoreRows = function (rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.RESTOREROWS, rows);
	        }
	    };
	    DataProvider.prototype.fireRowHided = function (rows, hide) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(DataProvider.ROW_HIDED, rows, hide);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    DataProvider.DISPOSED = "onDataProvderDisposed";
	    DataProvider.RESET = "onDataProviderReset";
	    DataProvider.REFRESH = "onDataProviderRefresh";
	    DataProvider.REFRESH_CLIENT = "onDataProviderRefreshClient";
	    DataProvider.ROW_COUNT_CHANGED = "onDataProviderRowCountChanged";
	    DataProvider.ROW_INSERTING = "onDataProviderRowInserting";
	    DataProvider.ROW_INSERTED = "onDataProviderRowInserted";
	    DataProvider.ROWS_INSERTED = "onDataProviderRowsInserted";
	    DataProvider.ROW_REMOVING = "onDataProviderRowRemoving";
	    DataProvider.ROW_REMOVED = "onDataProviderRowRemoved";
	    DataProvider.ROWS_REMOVING = "onDataProviderRowsRemoving";
	    DataProvider.ROWS_REMOVED = "onDataProviderRowsRemoved";
	    DataProvider.ROW_UPDATING = "onDataProviderRowUpdating";
	    DataProvider.ROW_UPDATED = "onDataProviderRowUpdated";
	    DataProvider.ROWS_UPDATED = "onDataProviderRowsUpdated";
	    DataProvider.ROW_MOVING = "onDataProviderRowMoving";
	    DataProvider.ROW_MOVED = "onDataProviderRowMoved";
	    DataProvider.ROWS_MOVING = "onDataProviderRowsMoving";
	    DataProvider.ROWS_MOVED = "onDataProviderRowsMoved";
	    DataProvider.VALUE_CHANGING = "onDataProviderValueChanging";
	    DataProvider.VALUE_CHANGED = "onDataProviderValueChanged";
	    DataProvider.DATA_CHANGED = "onDataProviderDataChanged";
	    DataProvider.STATE_CHANGED = "onDataProviderStateChanged";
	    DataProvider.STATES_CHANGED = "onDataProviderStatesChanged";
	    DataProvider.STATES_CLEARED = "onDataProviderStatesCleared";
	    DataProvider.RESTOREROWS = "onDataProviderRestoreRows";
	    DataProvider.ROW_HIDED = "onDataProviderRowHided";
	    return DataProvider;
	}(DataSource_1.DataSource));
	exports.DataProvider = DataProvider;
	});

	unwrapExports(DataProvider_1);
	var DataProvider_2 = DataProvider_1.DataProvider;

	var GridItem_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridItem.ts
	// 2019. 07. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	exports.ITEM_EXT_CHECKED = 0x00000001;
	exports.ITEM_UNCHECKABLE = 0x00000004;
	var ITEM_EXT_READONLY = 0x00000008;
	exports.ITEM_EXT_SAVEEXPAND = 0x00000010;
	exports.ITEM_EXT_FILTERED = 0x00000020;
	var ITEM_EXT_HEIGHTED = 0x00010000;
	var ITEM_EXT_HEIGHT = 0xFFFE0000;
	var $$_grid_item_id = 0;
	var PARENT = "_parent";
	var INDEX = "_index";
	var ItemState;
	(function (ItemState) {
	    ItemState["NORMAL"] = "normal";
	    ItemState["FOCUSED"] = "focused";
	    ItemState["UPDATING"] = "updating";
	    ItemState["INSERTING"] = "inserting";
	    ItemState["APPENDING"] = "appending";
	    ItemState["DUMMY"] = "dummy";
	})(ItemState = exports.ItemState || (exports.ItemState = {}));
	exports.ItemState_isEditing = function (state) {
	    return state == ItemState.UPDATING || state == ItemState.INSERTING || state == ItemState.APPENDING;
	};
	exports.ItemState_isInserting = function (state) {
	    return state == ItemState.INSERTING || state == ItemState.APPENDING;
	};
	var GridItem = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridItem() {
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._id = $$_grid_item_id;
	        this._index = -1;
	        this._extents = 0;
	    }
	    // 주의: Base를 계승하지 않는다!
	    GridItem.prototype.dispose = function () {
	        this._parent = null;
	    };
	    Object.defineProperty(GridItem.prototype, "id", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** id  */
	        get: function () {
	            return this._id;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "index", {
	        /** index  */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "parent", {
	        /** parent  */
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "parentIndex", {
	        /** parentIndex  */
	        get: function () {
	            return this._parent ? this._parent._index : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "root", {
	        /** root  */
	        get: function () {
	            var p = this._parent;
	            while (p && p.level > 1) {
	                p = p._parent;
	            }
	            return p;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "childIndex", {
	        /** childIndex  */
	        get: function () {
	            return this._parent ? this._parent.indexOf(this) : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "level", {
	        /** level */
	        get: function () {
	            return this._parent ? this._parent.level + 1 : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "isData", {
	        /** isData */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "isDataRow", {
	        /** isDataRow */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "visible", {
	        /** isVisible */
	        get: function () {
	            return this._parent && this._index >= 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "displayLevel", {
	        /** displayLevel */
	        get: function () {
	            return this.level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "provider", {
	        /** provider */
	        get: function () {
	            return this._parent && this._parent.provider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "dataSource", {
	        /** dataSource */
	        get: function () {
	            return this._parent && this._parent.dataSource;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "dataRow", {
	        /** dataRow */
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "dataId", {
	        /** dataId */
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "rowState", {
	        /** rowState */
	        get: function () {
	            var row = this.dataRow;
	            if (row >= 0) {
	                var ds = this.dataSource;
	                return ds ? ds.getRowState(row) : RowState_1.RowState.NONE;
	            }
	            else {
	                return RowState_1.RowState.NONE;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "itemState", {
	        /** itemState */
	        get: function () {
	            return ItemState.NORMAL;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "checked", {
	        /** checked */
	        get: function () {
	            return (this._extents & exports.ITEM_EXT_CHECKED) != 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "checkable", {
	        /** checkable */
	        get: function () {
	            return (this._extents & exports.ITEM_UNCHECKABLE) == 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "editable", {
	        /** editable */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "readOnly", {
	        /** readOnly */
	        get: function () {
	            return (this._extents & ITEM_EXT_READONLY) != 0;
	        },
	        set: function (value) {
	            this._extents = value ? (this._extents | ITEM_EXT_READONLY) : (this._extents & ~ITEM_EXT_READONLY);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "resizable", {
	        /** resizable */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "merged", {
	        /** merged */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "height", {
	        /** height */
	        get: function () {
	            if (this._extents & ITEM_EXT_HEIGHTED) {
	                return (this._extents & ITEM_EXT_HEIGHT) >>> 17;
	            }
	            return NaN;
	        },
	        set: function (value) {
	            value = Math.floor(value);
	            if (isNaN(value)) {
	                this._extents &= ~ITEM_EXT_HEIGHTED;
	            }
	            else {
	                value = Math.max(0, Math.min(0xfffe, value)) << 17;
	                this._extents = value | (this._extents & 0x1ffff) | ITEM_EXT_HEIGHTED;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItem.prototype, "heights", {
	        /** heights */
	        get: function () {
	            return this._heights;
	        },
	        set: function (value) {
	            this._heights = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridItem.prototype.getHeight = function (index) {
	        return this._heights[index];
	    };
	    GridItem.prototype.setChecked = function (value, checkEvent) {
	        var provider = this.provider;
	        if (provider) {
	            provider.checkItem(this, value, undefined, checkEvent);
	        }
	    };
	    GridItem.prototype.setCheckable = function (value) {
	        var provider = this.provider;
	        if (provider) {
	            provider.setCheckable(this, value);
	        }
	    };
	    GridItem.prototype.getAncestor = function (level) {
	        if (level < this.level) {
	            var p = this._parent;
	            while (p.level > level) {
	                p = p._parent;
	            }
	            return p;
	        }
	        return this instanceof GroupItem ? this : null;
	    };
	    GridItem.prototype.getAncestors = function () {
	        var items = null;
	        var p = this._parent;
	        if (p) {
	            items = [];
	            do {
	                items.push(p);
	                p = p._parent;
	            } while (p);
	        }
	        return items;
	    };
	    GridItem.prototype.isDescendantOf = function (group) {
	        if (group) {
	            var p = this._parent;
	            while (p && p != group) {
	                p = p._parent;
	            }
	            return p === group;
	        }
	        return false;
	    };
	    GridItem.prototype.getData = function (field) {
	        var ds = this.dataSource;
	        return ds ? ds.getValue(this.dataRow, field) : undefined;
	        //var dataRow = this instanceof MergedGroupHeader || this instanceof GroupItemImpl ? this.firstItem().dataRow() : ( this instanceof MergedGroupFooter ? this.parent().firstItem().dataRow() : this.dataRow() );
	        //return ds ? ds.getValue(dataRow, field) : UNDEFINED;
	    };
	    GridItem.prototype.setData = function (field, value) {
	        var ds = this.dataSource;
	        if (ds) {
	            ds.setValue(this.dataRow, field, value);
	        }
	    };
	    GridItem.prototype.getRowData = function () {
	        var row = this.dataRow;
	        if (row >= 0) {
	            var ds = this.dataSource;
	            if (ds) {
	                return ds.getRow(row);
	            }
	        }
	        return null;
	    };
	    GridItem.prototype.getRowObject = function () {
	        var row = this.dataRow;
	        if (row >= 0) {
	            var ds = this.dataSource;
	            if (ds) {
	                return ds.getRowObject(row);
	            }
	        }
	        return null;
	    };
	    GridItem.prototype.isChanged = function (field) {
	        var ds = this.dataSource;
	        return ds ? ds.isDataChanged(this.dataRow, field) : undefined;
	    };
	    GridItem.prototype.canEdit = function () {
	        return false;
	    };
	    /* provider로 이동시킨다.
	    makeVisible() {
	        if (this._parent) {
	            this._parent.setExpanded(true);
	            this._parent.makeVisible();
	        }
	    }
	    */
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridItem.prototype._setIndex = function (value) {
	        this._index = value;
	    };
	    GridItem.prototype._setChecked = function (value) {
	        this._extents = value ? (this._extents | exports.ITEM_EXT_CHECKED) : (this._extents & ~exports.ITEM_EXT_CHECKED);
	    };
	    GridItem.prototype._setCheckable = function (value) {
	        this._extents = value ? (this._extents & ~exports.ITEM_UNCHECKABLE) : (this._extents | exports.ITEM_UNCHECKABLE);
	    };
	    return GridItem;
	}());
	exports.GridItem = GridItem;
	var GridRow = /** @class */ (function (_super) {
	    __extends(GridRow, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridRow(dataRow) {
	        var _this = _super.call(this) || this;
	        _this._displayLevel = -1;
	        _this._dataRow = dataRow;
	        return _this;
	    }
	    Object.defineProperty(GridRow.prototype, "dataRowId", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** dataRowId */
	        get: function () {
	            return this._dataRowId;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "isData", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "isDataRow", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "dataRow", {
	        get: function () {
	            return this._dataRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "dataId", {
	        get: function () {
	            return this.dataSource.getRowId(this._dataRow);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "isLeaf", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "resizable", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridRow.prototype, "displayLevel", {
	        get: function () {
	            return this._displayLevel >= 0 ? this._displayLevel : this.level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridRow.prototype.canEdit = function () {
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridRow.prototype.$_setDisplayLevel = function (value) {
	        this._displayLevel = value;
	    };
	    return GridRow;
	}(GridItem));
	exports.GridRow = GridRow;
	var GroupItem = /** @class */ (function (_super) {
	    __extends(GroupItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupItem() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._children = [];
	        _this._expanded = false;
	        _this._descendantCount = 0;
	        _this._summaries = null;
	        _this._rows = null;
	        return _this;
	    }
	    Object.defineProperty(GroupItem.prototype, "expanded", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanded */
	        get: function () {
	            return this._expanded;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "collapsed", {
	        /** collapsed */
	        get: function () {
	            return !this.expanded;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._children.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "children", {
	        /** children */
	        get: function () {
	            return this._children.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "first", {
	        /** first */
	        get: function () {
	            return this._children.length > 0 ? this._children[0] : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "last", {
	        /** last */
	        get: function () {
	            var n = this._children.length;
	            return n > 0 ? this._children[n - 1] : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "firstItem", {
	        /** firstItem */
	        get: function () {
	            if (this._children.length > 0) {
	                var item = this._children[0];
	                return (item instanceof GroupItem) ? item.firstItem : item;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "firstDataItem", {
	        /** firstDataItem */
	        get: function () {
	            if (this._children.length > 0) {
	                for (var i = 0, cnt = this._children.length; i < cnt; i++) {
	                    if (this._children[i] instanceof GroupItem) {
	                        return this._children[i].firstDataItem;
	                    }
	                    else if (this._children[i] instanceof GridRow) {
	                        return this._children[i];
	                    }
	                }
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "lastItem", {
	        /** lastItem */
	        get: function () {
	            return this.getLastItem(false);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GroupItem.prototype.getLastItem = function (checkFooter) {
	        /*
	        var cnt, item;
	        if (this._children.length > 0) {
	            cnt = this._children.length;
	            for (;cnt;cnt--) {
	                item = this._children[cnt-1];
	                if (checkFooter && !this.hasFooter && item instanceof MergedGroupFooter) {
	                    continue;
	                };
	                break;
	            }
	            // var item = this._children[this._children.length - 1];
	            return (item instanceof GroupItem) ? item.lastItem(checkFooter) : item;
	        }
	        */
	        return null;
	    };
	    Object.defineProperty(GroupItem.prototype, "lastDataItem", {
	        /** lastDataItem */
	        get: function () {
	            var n = this._children.length;
	            if (n > 0) {
	                for (; n > 0; n--) {
	                    var item = this._children[n - 1];
	                    if (item instanceof GroupItem) {
	                        return item.lastDataItem;
	                    }
	                    else if (item instanceof GridRow) {
	                        return item;
	                    }
	                }
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "descendantCount", {
	        /** descendantCount */
	        get: function () {
	            return this._descendantCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "expandable", {
	        /*
	        firstVisibleItem(isSummary): boolean {
	            var item;
	            if (isSummary) {
	                if (this._hasFooter && this.footer().isVisible) {
	                    return this.footer();
	                }
	                for (var i = 0, len = this._children.length; i < len; i++) {
	                    item = this._children[i];
	                    if (item instanceof GroupItem) {
	                        item = item.firstVisibleItem(isSummary);
	                    } else if (item.isVisible()) {
	                        return item;
	                    }
	                    if (item) {
	                        return item;
	                    }
	                }
	                return null;
	            }
	            for (var i = 0, len = this._children.length; i < len; i++) {
	                item = this._children[i];
	                if (item.isVisible()) {
	                    return item;
	                } else {
	                    if (item instanceof GroupItem) {
	                        var c = item.firstVisibleItem(isSummary);
	                        if (c) {
	                            return c;
	                        }
	                    }
	                }
	            }
	            return null;
	        }
	        */
	        /** expandable */
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItem.prototype, "collapsable", {
	        /** collapsable */
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /* 특별한 이유가 없으면 cookie는 제거한다!
	    setExpanded(value: boolean, recursive = false, force = false): void {
	        if (value != this._expanded || force) {
	            const provider = this.provider;

	            if (value) {
	                provider.expand(this, recursive, force);
	            } else {
	                provider.collapse(this, recursive);
	            }
	        }
	    }
	    */
	    GroupItem.prototype.getItem = function (index) {
	        if (index < 0 || index >= this._children.length) {
	            throw new RangeError("index is invalid: " + index);
	        }
	        return this._children[index];
	    };
	    GroupItem.prototype.getRows = function () {
	        var rows = [];
	        this.$_collectRows(this, rows);
	        return rows;
	    };
	    // item이 footer라고 전제한다.
	    GroupItem.prototype.getFooterIndex = function (item) {
	        return 0;
	    };
	    GroupItem.prototype.itemOfRow = function (dataRow) {
	        for (var i = this._children.length; i--;) {
	            if (this._children[i].dataRow == dataRow) {
	                return this._children[i];
	            }
	        }
	        return null;
	    };
	    GroupItem.prototype.indexOf = function (item) {
	        for (var i = this._children.length - 1; i >= 0; i--) {
	            if (this._children[i] == item) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    GroupItem.prototype.isDescendant = function (item) {
	        if (item && item !== this) {
	            var g = item["_parent"];
	            while (g && g !== this) {
	                g = g["_parent"];
	            }
	            return g === this;
	        }
	        return false;
	    };
	    GroupItem.prototype.getDescendants = function (visibleOnly) {
	        function collectItems(p, items) {
	            var cnt = p.count;
	            for (var i = 0; i < cnt; i++) {
	                var item = p.getItem(i);
	                items.push(item);
	                if (item instanceof GroupItem && (!visibleOnly || item.expanded)) {
	                    collectItems(item, items);
	                }
	            }
	        }
	        if ((!visibleOnly || this._expanded) && this._children && this._children.length > 0) {
	            var items = [];
	            collectItems(this, items);
	            return items;
	        }
	        return null;
	    };
	    GroupItem.prototype.clear = function () {
	        this._summaries = null;
	        this._children.length = 0;
	        this._descendantCount = 0;
	    };
	    GroupItem.prototype.insert = function (index, item) {
	        this._addChild(item, index);
	    };
	    GroupItem.prototype.add = function (item) {
	        this._addChild(item, -1);
	    };
	    GroupItem.prototype.addAll = function (items) {
	        this._addChildren(items);
	    };
	    GroupItem.prototype.remove = function (item) {
	        var idx = this.indexOf(item);
	        if (idx >= 0) {
	            this._children.splice(idx, 1);
	            if (item instanceof GridItem) {
	                item[PARENT] = null;
	            }
	        }
	    };
	    GroupItem.prototype.setItem = function (item, newItem) {
	        if (item && newItem && item !== newItem) {
	            var idx = this._removeChild(item);
	            this._insertChild(idx, newItem);
	            newItem[INDEX] = item.index;
	        }
	    };
	    GroupItem.prototype.setExpanded = function (value, recursive, force) {
	        if (value != this._expanded || force) {
	            if (value) {
	                this.provider.expand(this, recursive, force, 0);
	            }
	            else {
	                this.provider.collapse(this, recursive, force);
	            }
	        }
	    };
	    GroupItem.prototype.getNumber = function (field) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return summary.count;
	        }
	        else if (summary) {
	            return summary.length;
	        }
	        return this._descendantCount;
	    };
	    GroupItem.prototype.getDataCount = function (field) {
	        throw new Error("Not implemented.");
	    };
	    GroupItem.prototype.getSum = function (field) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return summary.sum;
	        }
	        else if (summary) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            var v = 0;
	            for (var i = 0; i < cnt; i++) {
	                var v2 = ds.getValue(summary[i], field);
	                if (!isNaN(v2)) {
	                    v += v2;
	                }
	            }
	            return v;
	        }
	        return NaN;
	    };
	    GroupItem.prototype.getDataSum = function (field) {
	        throw new Error("Not implemented.");
	    };
	    GroupItem.prototype.getMax = function (field) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return summary.max;
	        }
	        else if (summary) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            var v = void 0;
	            if (cnt > 1) {
	                v = NaN;
	                var i = 0;
	                do {
	                    v = ds.getValue(summary[i++], field);
	                } while (isNaN(v = v == null ? undefined : v) && i < cnt);
	                while (i < cnt) {
	                    var v2 = ds.getValue(summary[i++], field);
	                    if (!isNaN(v2 = v2 == null ? undefined : v2) && v2 > v) {
	                        v = v2;
	                    }
	                }
	                return v;
	            }
	            else if (cnt == 1) {
	                v = ds.getValue(summary[0], field);
	                return v == null ? undefined : v;
	            }
	        }
	        return NaN;
	    };
	    GroupItem.prototype.getMin = function (field) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return summary.min;
	        }
	        else if (summary) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            var v = void 0;
	            if (cnt > 1) {
	                v = NaN;
	                var i = 0;
	                do {
	                    v = ds.getValue(summary[i++], field);
	                } while (isNaN(v = v == null ? undefined : v) && i < cnt);
	                while (i < cnt) {
	                    var v2 = ds.getValue(summary[i++], field);
	                    if (!isNaN(v2 = v2 == null ? undefined : v2) && v2 < v) {
	                        v = v2;
	                    }
	                }
	                return v;
	            }
	            else if (cnt == 1) {
	                v = ds.getValue(summary[0], field);
	                return v == null ? undefined : v;
	            }
	        }
	        return NaN;
	    };
	    GroupItem.prototype.getAvg = function (field) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return summary.avg;
	        }
	        else if (summary) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            var v = void 0;
	            if (cnt > 1) {
	                v = 0;
	                for (var i = 0; i < cnt; i++) {
	                    v += ds.getValue(summary[i], field);
	                }
	                return v / cnt;
	            }
	            else if (cnt == 1) {
	                v = ds.getValue(summary[0], field);
	                return v;
	            }
	        }
	        return NaN;
	    };
	    GroupItem.prototype.getVar = function (field, n) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return n =  summary.vars;
	        }
	        else if (summary && this.provider.summaryMode == Types.SummaryMode.STATISTICAL) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            if (cnt > 1) {
	                var v = 0;
	                for (var i = 0; i < cnt; i++) {
	                    v += ds.getValue(summary[i], field);
	                }
	                var avg = v / cnt;
	                v = 0;
	                for (var i = 0; i < cnt; i++) {
	                    v += Math.pow(ds.getValue(summary[i], field) - avg, 2);
	                }
	                v = v / (cnt - n);
	                return v;
	            }
	            else if (cnt == 1) {
	                return 0;
	            }
	        }
	        return NaN;
	    };
	    GroupItem.prototype.getStdev = function (field, n) {
	        var summary = this.$_getSummary(field);
	        if (summary instanceof FieldSummary_1.FieldSummary) {
	            return n == 0 ? Math.sqrt(summary.varsp) : Math.sqrt(summary.vars);
	        }
	        else if (summary && this.provider.summaryMode == Types.SummaryMode.STATISTICAL) {
	            var ds = this.dataSource;
	            var cnt = summary.length;
	            if (cnt > 1) {
	                var v = 0;
	                for (var i = 0; i < cnt; i++) {
	                    v += ds.getValue(summary[i], field);
	                }
	                var avg = v / cnt;
	                v = 0;
	                for (var i = 0; i < cnt; i++) {
	                    v += Math.pow(ds.getValue(summary[i], field) - avg, 2);
	                }
	                v = Math.sqrt(v / (cnt - n));
	                return v;
	            }
	            else if (cnt == 1) {
	                return 0;
	            }
	        }
	        return NaN;
	    };
	    Object.defineProperty(GroupItem.prototype, "isLeaf", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GroupItem.prototype._setExpanded = function (value) {
	        this._expanded = value;
	    };
	    GroupItem.prototype._incDescendants = function (inc) {
	        if (inc === void 0) { inc = 1; }
	        this._descendantCount += inc;
	    };
	    GroupItem.prototype._insertChild = function (index, item) {
	        this._children.splice(index, 0, item);
	        if (item instanceof GridItem) {
	            item[PARENT] = this;
	        }
	    };
	    GroupItem.prototype._addChild = function (item, index) {
	        if (item && this.indexOf(item) < 0) {
	            if (index < 0) {
	                this._children.push(item);
	            }
	            else {
	                this._children.splice(index, 0, item);
	            }
	            item[PARENT] = this;
	        }
	    };
	    GroupItem.prototype._addChildren = function (items) {
	        var cnt;
	        if (items && (cnt = items.length) > 0) {
	            for (var i = 0; i < cnt; i++) {
	                var item = items[i];
	                if (item && this.indexOf(item) < 0) {
	                    item[PARENT] = this;
	                    this._children.push(item);
	                }
	            }
	        }
	    };
	    GroupItem.prototype._removeChild = function (item) {
	        var idx = this.indexOf(item);
	        if (idx >= 0) {
	            this._children.splice(idx, 1);
	            if (item instanceof GridItem) {
	                item[PARENT] = null;
	            }
	        }
	        return idx;
	    };
	    /*
	    attachItem(item: GridItem): void {
	        if (item) {
	            item[PARENT] = this;
	        }
	    }
	    
	    detachItem(item: GridItem): void {
	        if (item && item[PARENT] === this) {
	            item[PARENT] = null;
	        }
	    }
	    */
	    GroupItem.prototype._exchangeItems = function (index1, index2) {
	        if (index1 < 0 || index1 >= this._children.length) {
	            throw new RangeError("index1 is out of range: " + index1);
	        }
	        if (index2 < 0 || index2 >= this._children.length) {
	            throw new RangeError("index2 is out of range: " + index2);
	        }
	        if (index1 === index2) {
	            return;
	        }
	        var t = this._children[index1];
	        this._children[index1] = this._children[index2];
	        this._children[index2] = t;
	    };
	    GroupItem.prototype._moveChild = function (index, delta) {
	        var count = this._children.length;
	        if (index < 0 || index >= count) {
	            throw new RangeError("index is out of range: " + index);
	        }
	        var newIndex = Math.min(Math.max(index + delta, 0), count - 1);
	        var child = this._children[index];
	        if (delta < 0) {
	            for (var i = index; i > newIndex; i--)
	                this._children[i] = this._children[i - 1];
	        }
	        else {
	            for (var i = index; i < newIndex; i++)
	                this._children[i] = this._children[i + 1];
	        }
	        this._children[newIndex] = child;
	    };
	    /*
	    private _changeParent(parent: GroupItem, index: number, expand: boolean): void {
	        var old = this._parent;
	        old.remove(this);
	        parent._addChild(this, index);
	        if (expand)
	            parent.setExpanded(true);
	    }
	    */
	    GroupItem.prototype.$_collectRows = function (group, rows) {
	        var cnt = group.count;
	        for (var i = 0; i < cnt; i++) {
	            var item = group.getItem(i);
	            if (item instanceof GroupItem) {
	                this.$_collectRows(item, rows);
	            }
	            else {
	                var row = item.dataRow;
	                if (row >= 0) {
	                    rows.push(row);
	                }
	            }
	        }
	    };
	    GroupItem.prototype.$_getSummary = function (field) {
	        var ds = this.dataSource;
	        if (!(ds instanceof DataProvider_1.DataProvider)) {
	            return null;
	        }
	        if (this._summaries == null) {
	            this._summaries = {};
	        }
	        var fs = this._summaries ? this._summaries[field] : null;
	        if (!fs) {
	            if (ds.canSummarize(field)) {
	                fs = this.$_summarize(field, ds);
	                if (fs) {
	                    this._summaries[field] = fs;
	                }
	            }
	        }
	        return fs;
	    };
	    GroupItem.prototype.$_summarize = function (field, ds) {
	        var THRESHOLD = 3;
	        var mode = this.provider.summaryMode;
	        if (mode != Types.SummaryMode.NONE) {
	            if (this._rows == null) {
	                this._rows = [];
	                this.$_collectRows(this, this._rows);
	            }
	            if (this._rows.length > THRESHOLD && ds.canSummarize(field)) {
	                var fs = new FieldSummary_1.FieldSummary(field);
	                ds.summarizeRange(fs, this._rows, mode == Types.SummaryMode.STATISTICAL);
	            }
	            return this._rows;
	        }
	        return null;
	    };
	    return GroupItem;
	}(GridItem));
	exports.GroupItem = GroupItem;
	var GroupItemImpl = /** @class */ (function (_super) {
	    __extends(GroupItemImpl, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupItemImpl(field) {
	        var _this = _super.call(this) || this;
	        _this._footers = 0;
	        _this._groupField = field;
	        return _this;
	    }
	    Object.defineProperty(GroupItemImpl.prototype, "groupField", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** groupField */
	        get: function () {
	            return this._groupField;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItemImpl.prototype, "footer", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._footer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupItemImpl.prototype, "footerCount", {
	        get: function () {
	            return this._footers;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GroupItemImpl.prototype.getFooter = function (index) {
	        index = this.indexOf(this._footer) + index;
	        return this["_children"][index];
	    };
	    GroupItemImpl.prototype.getFooterIndex = function (item) {
	        return item["$_footerIndex"];
	    };
	    GroupItemImpl.prototype.isFooter = function (item) {
	        if (item === this._footer)
	            return true;
	        if (this._footers > 1) {
	            var children = this["_children"];
	            for (var i = children.length - 1; i >= 0; i--) {
	                if (children[i] === item)
	                    return true;
	                if (children[i] === this._footer)
	                    break;
	            }
	        }
	        return false;
	    };
	    GroupItemImpl.prototype._addChild = function (item, index) {
	        _super.prototype._addChild.call(this, item, index);
	        if (item instanceof GroupFooter) {
	            if (!this._footer) {
	                this._footer = item;
	            }
	            this._footers++;
	        }
	    };
	    return GroupItemImpl;
	}(GroupItem));
	exports.GroupItemImpl = GroupItemImpl;
	var GroupFooter = /** @class */ (function (_super) {
	    __extends(GroupFooter, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupFooter() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._expandable = false;
	        _this.$_footerIndex = 0;
	        return _this;
	    }
	    Object.defineProperty(GroupFooter.prototype, "expandable", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expandable */
	        get: function () {
	            return this._expandable;
	        },
	        set: function (value) {
	            this._expandable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupFooter.prototype, "isLeaf", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupFooter.prototype, "isData", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupFooter.prototype, "displayLevel", {
	        get: function () {
	            return this._expandable ? this.level - 1 : this.level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return GroupFooter;
	}(GridItem));
	exports.GroupFooter = GroupFooter;
	});

	unwrapExports(GridItem_1);
	var GridItem_2 = GridItem_1.ITEM_EXT_CHECKED;
	var GridItem_3 = GridItem_1.ITEM_UNCHECKABLE;
	var GridItem_4 = GridItem_1.ITEM_EXT_SAVEEXPAND;
	var GridItem_5 = GridItem_1.ITEM_EXT_FILTERED;
	var GridItem_6 = GridItem_1.ItemState;
	var GridItem_7 = GridItem_1.ItemState_isEditing;
	var GridItem_8 = GridItem_1.ItemState_isInserting;
	var GridItem_9 = GridItem_1.GridItem;
	var GridItem_10 = GridItem_1.GridRow;
	var GridItem_11 = GridItem_1.GroupItem;
	var GridItem_12 = GridItem_1.GroupItemImpl;
	var GridItem_13 = GridItem_1.GroupFooter;

	var ItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ItemProvider.ts
	// 2019. 07. 04. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var RootItem = /** @class */ (function (_super) {
	    __extends(RootItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RootItem(provier) {
	        var _this = _super.call(this, -1) || this;
	        _this._provider = provier;
	        return _this;
	    }
	    Object.defineProperty(RootItem.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._provider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "level", {
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "expanded", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "isLeaf", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "dataSource", {
	        get: function () {
	            return this._provider.dataSource;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "expandable", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootItem.prototype, "collapsable", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RootItem;
	}(GridItem_1.GroupItemImpl));
	exports.RootItem = RootItem;
	var ItemProvider = /** @class */ (function (_super) {
	    __extends(ItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ItemProvider(indexing) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._hideDeleted = false;
	        _this._eventLock = 0;
	        _this._indexing = indexing;
	        _this._rootItem = _this._createRootItem();
	        return _this;
	    }
	    ItemProvider.prototype._doDispose = function () {
	        this._rootItem.dispose();
	        return null;
	    };
	    Object.defineProperty(ItemProvider.prototype, "hideDeleted", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** hideDeleted */
	        get: function () {
	            return this._hideDeleted;
	        },
	        set: function (value) {
	            if (value != this._hideDeleted) {
	                this._hideDeleted = value;
	                this._hideDeletedChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ItemProvider.prototype, "summaryMode", {
	        /** summaryMode */
	        get: function () {
	            return Types.SummaryMode.NONE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ItemProvider.prototype, "fixedCount", {
	        /** fixedCount */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ItemProvider.prototype, "maxItemCount", {
	        /** fixedCount */
	        get: function () {
	            return 0;
	        },
	        set: function (value) {
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ItemProvider.prototype.setFixed = function (count, sorting, filtering) {
	    };
	    ItemProvider.prototype.attachItem = function (item) {
	        item["_parent"] = this._rootItem;
	    };
	    ItemProvider.prototype.getItemsByIndices = function (indices) {
	        var items = [];
	        if (indices) {
	            for (var i = 0, cnt = indices.length; i < cnt; i++) {
	                var item = this.getItem(indices[i]);
	                item && items.push(item);
	            }
	        }
	        return items;
	    };
	    ItemProvider.prototype.getIndexOfRow = function (dataRow) {
	        var item = this.getItemOfRow(dataRow);
	        return item ? item.index : -1;
	    };
	    ItemProvider.prototype.getIndicesOfRows = function (dataRows) {
	        var items = [];
	        var cnt = dataRows ? dataRows.length : 0;
	        if (cnt) {
	            for (var i = 0; i < cnt; i++) {
	                var item = this.getItemOfRow(dataRows[i]);
	                items.push(item ? item.index : -1);
	            }
	        }
	        return items;
	    };
	    ItemProvider.prototype.getItemsByRows = function (dataRows, force) {
	        if (force === void 0) { force = false; }
	        var items = [];
	        var cnt = dataRows ? dataRows.length : 0;
	        for (var i = 0; i < cnt; i++) {
	            var item = this.getItemOfRow(dataRows[i], force);
	            if (item) {
	                items.push(item);
	            }
	        }
	        return items;
	    };
	    ItemProvider.prototype.exchange = function (index1, index2) {
	    };
	    ItemProvider.prototype.setCheckable = function (item, value) {
	        if (item) {
	            if (value != item.checkable) {
	                item["_setCheckable"](value);
	                this._fireCheckableChanged(item);
	            }
	        }
	    };
	    ItemProvider.prototype.checkItem = function (item, checked, exclusive, checkEvent) {
	        if (item) {
	            var prev = item.checked;
	            if (exclusive) {
	                this._clearChecked();
	                if (checked) {
	                    this._setChecked(item, true);
	                }
	                if ((checked != prev) && checkEvent) {
	                    this._fireItemChecked(item);
	                }
	                this._fireRefreshClient();
	            }
	            else if (checked != prev) {
	                this._setChecked(item, checked);
	                checkEvent ? this._fireItemChecked(item) : this._fireRefreshClient();
	            }
	            this._fireItemCheckChanged([item], checked);
	        }
	    };
	    ItemProvider.prototype.checkItems = function (items, checked, checkEvent) {
	        if (items && items.length > 0) {
	            for (var i = 0, cnt = items.length; i < cnt; i++) {
	                var item = items[i];
	                item instanceof GridItem_1.GridItem && this._setChecked(item, checked);
	            }
	            checkEvent ? this._fireItemsChecked(items, checked) : this._fireRefreshClient();
	        }
	        this._fireItemCheckChanged(items, checked);
	    };
	    ItemProvider.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent, groupCheckable) {
	        var cnt = this.itemCount;
	        if (checkableOnly) {
	            for (var i = 0; i < cnt; i++) {
	                var item = this.getItem(i);
	                if (item.checkable) {
	                    this._setChecked(item, checked);
	                }
	            }
	        }
	        else {
	            for (var i = 0; i < cnt; i++) {
	                this._setChecked(this.getItem(i), checked);
	            }
	        }
	        checkEvent ? this._fireItemAllChecked(checked) : this._fireRefreshClient();
	        this._fireItemCheckChanged(null, checked);
	    };
	    ItemProvider.prototype._setCheckItem = function (item, checked) {
	        item["$_setChecked"](checked);
	    };
	    ItemProvider.prototype._clearDisplayLevels = function () {
	    };
	    ItemProvider.prototype.hasCellStyle = function () {
	        return false;
	    };
	    ItemProvider.prototype.setCellStyle = function (row, field, style) {
	    };
	    ItemProvider.prototype.setCellStyles = function (provider, rows, fieldMap) {
	    };
	    ItemProvider.prototype.clearCellStyles = function () {
	    };
	    ItemProvider.prototype.removeCellStyle = function (style) {
	    };
	    ItemProvider.prototype.checkCellStyle = function (dataRow, field) {
	        return false;
	    };
	    ItemProvider.prototype.getCellStyle = function (dataRow, field) {
	        return null;
	    };
	    ItemProvider.prototype.canUpdate = function (item, field) {
	        if (item) {
	            var row = item.dataRow;
	            var ds = this.dataSource;
	            var state = item.itemState;
	            var inserting = GridItem_1.ItemState_isInserting(state); // || state === ItemState.DUMMY;
	            return (row >= 0 || inserting) && ds && (inserting || ds.canUpdateRow(row)) && ds.canUpdateField(row, field);
	        }
	        return false;
	    };
	    ItemProvider.prototype.canAppend = function () {
	        var ds = this.dataSource;
	        return ds && ds.canAppendRow();
	    };
	    ItemProvider.prototype.canInsert = function (item) {
	        if (item) {
	            var row = item.dataRow;
	            var ds = this.dataSource;
	            return /*(row >= 0) &&*/ ds && ds.canInsertRow(row);
	        }
	        return false;
	    };
	    ItemProvider.prototype.canDelete = function (item) {
	        if (item) {
	            var row = item.dataRow;
	            var ds = this.dataSource;
	            return (row >= 0) && ds && ds.canDeleteRow(row);
	        }
	        return false;
	    };
	    ItemProvider.prototype.findItem = function (fields, values, options, startIndex, endIndex) {
	        return -1;
	    };
	    ItemProvider.prototype.getSum = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getMax = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getMin = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getAvg = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getVar = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getVarp = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getStdev = function (field) {
	        return NaN;
	    };
	    ItemProvider.prototype.getStdevp = function (field) {
	        return NaN;
	    };
	    Object.defineProperty(ItemProvider.prototype, "isIndexing", {
	        get: function () {
	            return this._indexing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ItemProvider.prototype.clearRowHeights = function () {
	        var changed = false;
	        for (var i = this.itemCount - 1; i >= 0; i--) {
	            var item = this.getItem(i);
	            var h = item.height;
	            if (!isNaN(h)) {
	                item.height = NaN;
	                item.heights = null;
	                changed = true;
	            }
	        }
	        return changed;
	    };
	    Object.defineProperty(ItemProvider.prototype, "rootItem", {
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rootItem;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ItemProvider.prototype._createRootItem = function () {
	        return new RootItem(this);
	    };
	    ItemProvider.prototype._hideDeletedChanged = function () {
	    };
	    ItemProvider.prototype.$_canFire = function () {
	        return this._eventLock <= 0;
	    };
	    ItemProvider.prototype._setChecked = function (item, checked) {
	        item["_setChecked"](checked);
	    };
	    ItemProvider.prototype._clearChecked = function () {
	        for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	            this._setChecked(this.getItem(i), false);
	        }
	    };
	    ItemProvider.prototype._resetItemIndicies = function (fromIndex) {
	        if (this._indexing) {
	            for (var i = fromIndex, cnt = this.itemCount; i < cnt; i++) {
	                this.getItem(i)["_index"] = i;
	            }
	        }
	    };
	    ItemProvider.prototype._setExpanded = function (group, value) {
	        group["_setExpanded"](value);
	    };
	    ItemProvider.prototype._resetItemIndex = function (index) {
	        var item = this.getItem(index);
	        if (item) {
	            item["_index"] = index;
	        }
	    };
	    ItemProvider.prototype._incDescendents = function (group, count) {
	        group["_descendantCount"] += count;
	        if (group.parent) {
	            this._incDescendents(group.parent, count);
	        }
	    };
	    ItemProvider.prototype._copyExtents = function (source, target) {
	        if (source instanceof GridItem_1.GridItem && target instanceof GridItem_1.GridItem) ;
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    ItemProvider.prototype._fireReset = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.RESET);
	        }
	    };
	    ItemProvider.prototype._fireRefresh = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.REFRESH);
	        }
	    };
	    ItemProvider.prototype._fireRefreshClient = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.REFRESH_CLIENT);
	        }
	    };
	    ItemProvider.prototype._fireItemInserted = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEM_INSERTED, item);
	        }
	    };
	    ItemProvider.prototype._fireItemDeleted = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEM_DELETED, item);
	        }
	    };
	    ItemProvider.prototype._fireItemUpdated = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEM_UPDATED, item);
	        }
	    };
	    ItemProvider.prototype._fireCheckableChanged = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.CHECKABLE_CHANGED, item);
	        }
	    };
	    ItemProvider.prototype._fireItemChecked = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEM_CHECKED, item);
	        }
	    };
	    ItemProvider.prototype._fireItemsChecked = function (items, checked) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEMS_CHECKED, items, checked);
	        }
	    };
	    ItemProvider.prototype._fireItemAllChecked = function (checked) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ITEM_ALL_CHECKED, checked);
	        }
	    };
	    ItemProvider.prototype._fireItemCheckChanged = function (items, checked) {
	        this.fireEvent(ItemProvider.ITEMCHECK_CHANGED, items, checked);
	    };
	    ItemProvider.prototype._fireRowStateChanged = function (item) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ROW_STATE_CHANGED, item);
	        }
	    };
	    ItemProvider.prototype._fireRowStatesChanged = function (items) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ROW_STATES_CHANGED, items);
	        }
	    };
	    ItemProvider.prototype._fireRowStatesCleared = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.ROW_STATES_CLEARED);
	        }
	    };
	    ItemProvider.prototype._fireSort = function (fields, directions, cases) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.SORT, fields, directions, cases);
	        }
	    };
	    ItemProvider.prototype._fireSorted = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.SORTED);
	        }
	    };
	    ItemProvider.prototype._fireFilterAdded = function (field, criteria) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.FILTER_ADDED, field, criteria);
	        }
	    };
	    ItemProvider.prototype._fireFilterRemoved = function (field, filter) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.FILTER_REMOVED, field, filter);
	        }
	    };
	    ItemProvider.prototype._fireFilterCleared = function (field) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.FILTER_CLEARED, field);
	        }
	    };
	    ItemProvider.prototype._fireFilterAllCleared = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.FILTER_ALL_CLEARED);
	        }
	    };
	    ItemProvider.prototype._fireFiltered = function (filterCollection, filter) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.FILTERED, filterCollection, filter);
	        }
	    };
	    ItemProvider.prototype._fireCommandStackChanged = function (undoable, redoable) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(ItemProvider.COMMAND_STACK_CHANGED, undoable, redoable);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ItemProvider.RESET = "onItemProviderReset";
	    ItemProvider.REFRESH = "onItemProviderRefresh";
	    ItemProvider.REFRESH_CLIENT = "onItemProviderRefreshClient";
	    ItemProvider.ITEM_INSERTED = "onItemProviderItemInserted";
	    ItemProvider.ITEM_DELETED = "onItemProviderItemDeleted";
	    ItemProvider.ITEM_UPDATED = "onItemProviderItemUpdated";
	    ItemProvider.CHECKABLE_CHANGED = "onItemProviderCheckableChanged";
	    ItemProvider.ITEM_CHECKED = "onItemProviderItemChecked";
	    ItemProvider.ITEMS_CHECKED = "onItemProviderItemsChecked";
	    ItemProvider.ITEM_ALL_CHECKED = "onItemProviderItemAllChecked";
	    ItemProvider.ROW_STATE_CHANGED = "onItemProviderRowStateChanged";
	    ItemProvider.ROW_STATES_CHANGED = "onItemProviderRowStatesChanged";
	    ItemProvider.ROW_STATES_CLEARED = "onItemProviderRowStatesCleared";
	    ItemProvider.SORT = "onItemProviderSort";
	    ItemProvider.SORTED = "onItemProviderSorted";
	    ItemProvider.FILTER_ADDED = "onItemProviderFilterAdded";
	    ItemProvider.FILTER_REMOVED = "onItemProviderFilterRemoved";
	    ItemProvider.FILTER_CLEARED = "onItemProviderFilterCleared";
	    ItemProvider.FILTER_ALL_CLEARED = "onItemProviderFilterAllCleared";
	    ItemProvider.FILTERED = "onItemProviderFiltered";
	    ItemProvider.ITEMCHECK_CHANGED = "onItemProviderItemCheckChanged";
	    ItemProvider.COMMAND_STACK_CHANGED = "onItemProviderCommandStackChanged";
	    return ItemProvider;
	}(EventAware_1.EventAware));
	exports.ItemProvider = ItemProvider;
	var ProxyItemProvider = /** @class */ (function (_super) {
	    __extends(ProxyItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ProxyItemProvider(source, indexing) {
	        var _this = _super.call(this, indexing) || this;
	        _this._initialize();
	        _this.source = source;
	        return _this;
	    }
	    ProxyItemProvider.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ProxyItemProvider.prototype, "source", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** source */
	        get: function () {
	            return this._source;
	        },
	        set: function (value) {
	            if (value != this._source) {
	                if (this._source) {
	                    this._source.removeListener(this);
	                }
	                this._clearItems();
	                this._source = value;
	                if (this._source) {
	                    this._populateItems();
	                    this._source.addListener(this);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyItemProvider.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._source && this._source.dataSource;
	        },
	        set: function (value) {
	            this._source && (this._source.dataSource = value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyItemProvider.prototype, "fixedCount", {
	        get: function () {
	            return this._source ? this._source.fixedCount : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyItemProvider.prototype, "maxItemCount", {
	        get: function () {
	            return this._source ? this._source.maxItemCount : 0;
	        },
	        set: function (value) {
	            if (this._source) {
	                this._source.maxItemCount = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ProxyItemProvider.prototype.setFixed = function (count, sorting, filtering) {
	        if (this._source) {
	            this._source.setFixed(count, sorting, filtering);
	        }
	    };
	    ProxyItemProvider.prototype.getIndexOfRow = function (dataRow) {
	        return this._source ? this._source.getIndexOfRow(dataRow) : -1;
	    };
	    ProxyItemProvider.prototype.getItemOfRow = function (dataRow) {
	        return this._source ? this._source.getItemOfRow(dataRow) : null;
	    };
	    ProxyItemProvider.prototype._refreshItems = function () {
	        this._source && this._source["_refreshItems"]();
	    };
	    ProxyItemProvider.prototype._clearDisplayLevels = function () {
	        this._source && this._source._clearDisplayLevels();
	    };
	    ProxyItemProvider.prototype.setCellStyle = function (row, field, style) {
	        this._source && this._source.setCellStyle(row, field, style);
	    };
	    ProxyItemProvider.prototype.removeCellStyle = function (style) {
	        this._source && this._source.removeCellStyle(style);
	    };
	    ProxyItemProvider.prototype.clearCellStyles = function () {
	        this._source && this._source.clearCellStyles();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ProxyItemProvider.prototype._initialize = function () {
	    };
	    ProxyItemProvider.prototype._clearItems = function () {
	    };
	    ProxyItemProvider.prototype._populateItems = function () {
	        this._resetItemIndicies(0);
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    ProxyItemProvider.prototype.onItemProviderReset = function (rs) {
	        this._populateItems();
	        this._fireReset();
	    };
	    ProxyItemProvider.prototype.onItemProviderRefresh = function (rs) {
	        this._populateItems();
	        this._fireRefresh();
	    };
	    ProxyItemProvider.prototype.onItemProviderRefreshClient = function (rs) {
	        this._fireRefreshClient();
	    };
	    ProxyItemProvider.prototype.onItemProviderItemInserted = function (rs, item) {
	        this._resetItemIndicies(0);
	        this._fireItemInserted(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemDeleted = function (rs, item) {
	        this._resetItemIndicies(0);
	        this._fireItemDeleted(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemUpdated = function (rs, item) {
	        this._resetItemIndicies(0);
	        this._fireItemUpdated(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderCheckableChanged = function (rs, item) {
	        this._fireCheckableChanged(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemChecked = function (rs, item) {
	        this._fireItemChecked(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemsChecked = function (rs, items, checked) {
	        this._fireItemsChecked(items, checked);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemAllChecked = function (rs, checked) {
	        this._fireItemAllChecked(checked);
	    };
	    ProxyItemProvider.prototype.onItemProviderItemCheckChanged = function (rs, items, checked) {
	        this._fireItemCheckChanged(items, checked);
	    };
	    ProxyItemProvider.prototype.onItemProviderRowStateChanged = function (rs, item) {
	        this._fireRowStateChanged(item);
	    };
	    ProxyItemProvider.prototype.onItemProviderRowStatesChanged = function (rs, items) {
	        this._fireRowStatesChanged(items);
	    };
	    ProxyItemProvider.prototype.onItemProviderRowStatesCleared = function (rs) {
	        this._fireRowStatesCleared();
	    };
	    ProxyItemProvider.prototype.onItemProviderFilterAdded = function (rs, field, criteria) {
	    };
	    ProxyItemProvider.prototype.onItemProviderFilterRemoved = function (rs, field, filter) {
	    };
	    ProxyItemProvider.prototype.onItemProviderFilterCleared = function (rs, field) {
	    };
	    ProxyItemProvider.prototype.onItemProviderFilterAllCleared = function (rs) {
	    };
	    ProxyItemProvider.prototype.onItemProviderFiltered = function (rs) {
	    };
	    ProxyItemProvider.prototype.onItemProviderSort = function (rs, fields, directions) {
	    };
	    ProxyItemProvider.prototype.onItemProviderSorted = function (rs) {
	    };
	    ProxyItemProvider.prototype.onItemProviderCommandStackChanged = function (rs, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    return ProxyItemProvider;
	}(ItemProvider));
	exports.ProxyItemProvider = ProxyItemProvider;
	});

	unwrapExports(ItemProvider_1);
	var ItemProvider_2 = ItemProvider_1.RootItem;
	var ItemProvider_3 = ItemProvider_1.ItemProvider;
	var ItemProvider_4 = ItemProvider_1.ProxyItemProvider;

	var EditCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditCommand.ts
	// 2019. 11. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var EditCommandError = /** @class */ (function (_super) {
	    __extends(EditCommandError, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditCommandError(message) {
	        return _super.call(this, message) || this;
	    }
	    return EditCommandError;
	}(Error));
	exports.EditCommandError = EditCommandError;
	var EditCommand = /** @class */ (function (_super) {
	    __extends(EditCommand, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditCommand() {
	        return _super.call(this) || this;
	    }
	    EditCommand.prototype._doDispose = function () {
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditCommand.prototype.undo = function () {
	    };
	    EditCommand.prototype.redo = function (redoing) {
	    };
	    EditCommand.prototype.execute = function () {
	        return this.redo(false);
	    };
	    return EditCommand;
	}(Base_1.Base));
	exports.EditCommand = EditCommand;
	var EditCommandGruop = /** @class */ (function (_super) {
	    __extends(EditCommandGruop, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditCommandGruop() {
	        return _super.call(this) || this;
	    }
	    EditCommandGruop.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditCommandGruop.prototype.undo = function () {
	    };
	    EditCommandGruop.prototype.redo = function (redoing) {
	    };
	    EditCommandGruop.prototype.execute = function () {
	        return this.redo(false);
	    };
	    return EditCommandGruop;
	}(EditCommand));
	exports.EditCommandGruop = EditCommandGruop;
	var EditCommandStack = /** @class */ (function (_super) {
	    __extends(EditCommandStack, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditCommandStack(owner) {
	        var _this = _super.call(this) || this;
	        _this._commands = [];
	        _this._current = -1;
	        _this._undoing = false;
	        _this._redoing = false;
	        _this._owner = owner;
	        return _this;
	    }
	    EditCommandStack.prototype._doDispose = function () {
	        this._owner = null;
	        this._commands = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditCommandStack.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditCommandStack.prototype, "length", {
	        /** length */
	        get: function () {
	            return this._commands.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditCommandStack.prototype, "canUndo", {
	        /** canUndo */
	        get: function () {
	            return this._current >= 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditCommandStack.prototype, "canRedo", {
	        /** canRedo */
	        get: function () {
	            return this._commands.length > this._current + 1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditCommandStack.prototype, "undoing", {
	        /** undoing */
	        get: function () {
	            return this._undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditCommandStack.prototype, "redoing", {
	        /** redoing */
	        get: function () {
	            return this._redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditCommandStack.prototype.undo = function () {
	        if (this.canUndo) {
	            var cmd = this._commands[this._current];
	            this._undoing = true;
	            try {
	                cmd.undo();
	            }
	            finally {
	                this._undoing = false;
	            }
	            this._current = this._current - 1;
	            this._changed();
	        }
	    };
	    EditCommandStack.prototype.redo = function (redoing) {
	        var ret;
	        if (this.canRedo) {
	            var curr = this._current + 1;
	            var cmd = this._commands[curr];
	            this._redoing = true;
	            try {
	                ret = cmd.redo(true);
	            }
	            finally {
	                this._redoing = false;
	            }
	            this._current = curr;
	            this._changed();
	        }
	        return ret;
	    };
	    EditCommandStack.prototype.execute = function (command) {
	        if (command) {
	            var ret = command.execute();
	            this._current++;
	            this._commands[this._current] = command;
	            this.$_shrink(this._current + 1);
	            this._changed();
	            return ret;
	        }
	    };
	    EditCommandStack.prototype.flush = function () {
	        var len = this._commands.length;
	        if (len > 0) {
	            for (; len--;) {
	                this._commands[len].dispose();
	            }
	            this._commands = [];
	            this._current = -1;
	            this._changed();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditCommandStack.prototype._changed = function () {
	        if (this._owner != null) {
	            this._owner.editCommandStackChanged(this, this.canUndo, this.canRedo);
	        }
	    };
	    EditCommandStack.prototype.$_shrink = function (index) {
	        if (index >= 0 && index < this._commands.length) {
	            for (var i = this._commands.length - 1; i >= index; i--) {
	                this._commands[i].dispose();
	            }
	            this._commands.splice(index, this._commands.length - index);
	        }
	    };
	    return EditCommandStack;
	}(EventAware_1.EventAware));
	exports.EditCommandStack = EditCommandStack;
	});

	unwrapExports(EditCommand_1);
	var EditCommand_2 = EditCommand_1.EditCommandError;
	var EditCommand_3 = EditCommand_1.EditCommand;
	var EditCommand_4 = EditCommand_1.EditCommandGruop;
	var EditCommand_5 = EditCommand_1.EditCommandStack;

	var EditableItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EdiatbleItemProvider.ts
	// 2019. 07. 10. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var DummyEditItem = /** @class */ (function (_super) {
	    __extends(DummyEditItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DummyEditItem(rs, target, index, dataRow, state) {
	        var _this = _super.call(this, dataRow) || this;
	        _this._started = false;
	        _this._checkDiff = false;
	        _this._strictDiff = false;
	        _this._target = target;
	        rs.attachItem(_this);
	        _this._setIndex(index);
	        _this._state = state;
	        _this.$_setDisplayLevel(target ? target.displayLevel : 0);
	        return _this;
	    }
	    Object.defineProperty(DummyEditItem.prototype, "values", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** values */
	        get: function () {
	            return undefined;
	        },
	        set: function (value) {
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DummyEditItem.prototype.beginEdit = function (checkDiff, strictDiff) {
	    };
	    DummyEditItem.prototype.setValue = function (field, value) {
	    };
	    Object.defineProperty(DummyEditItem.prototype, "resizable", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DummyEditItem.prototype, "itemState", {
	        get: function () {
	            return this._state;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DummyEditItem.prototype, "editable", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DummyEditItem.prototype.getData = function (field) {
	        return null;
	    };
	    DummyEditItem.prototype.setData = function (field, value) {
	    };
	    DummyEditItem.prototype.getRowData = function () {
	        return null;
	    };
	    DummyEditItem.prototype.getRowObject = function () {
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DummyEditItem.prototype._clearDisplayLevels = function () {
	        // for (let i = 0, cnt = this._rows.length; i < cnt; i++) {
	        // 	this._rows[i]._displayLevel = -1;
	        // }
	    };
	    return DummyEditItem;
	}(GridItem_1.GridRow));
	exports.DummyEditItem = DummyEditItem;
	var EditItem = /** @class */ (function (_super) {
	    __extends(EditItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditItem(rs, target, index, dataRow, state) {
	        var _this = _super.call(this, dataRow) || this;
	        _this._values = [];
	        _this._started = false;
	        _this._checkDiff = false;
	        _this._strictDiff = false;
	        _this._target = target;
	        rs.attachItem(_this);
	        _this._setIndex(index);
	        _this._state = state;
	        _this.$_setDisplayLevel(target ? target.displayLevel : 0);
	        return _this;
	    }
	    Object.defineProperty(EditItem.prototype, "values", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** values */
	        get: function () {
	            return this._values.concat();
	        },
	        set: function (vals) {
	            var rs = this.provider;
	            var ds = this.dataSource;
	            var cnt = ds.fieldCount;
	            if (vals instanceof Array) {
	                cnt = Math.min(cnt, vals.length);
	                for (var i = 0; i < cnt; i++) {
	                    var fld = ds.getField(i);
	                    var oldValue = this._values[i];
	                    var newValue = fld.readValue(vals[i]);
	                    this._values[i] = newValue;
	                    if (this._started && !fld.equalValues(oldValue, newValue)) {
	                        rs["_editItemCellUpdated"](this, i, oldValue, newValue);
	                    }
	                }
	            }
	            else if (vals) {
	                for (var i = 0; i < cnt; i++) {
	                    var f = ds.getOrgFieldName(i);
	                    if (vals.hasOwnProperty(f)) {
	                        var fld = ds.getField(i);
	                        var oldValue = this._values[i];
	                        var newValue = fld.readValue(vals[f]);
	                        this._values[i] = newValue;
	                        if (this._started && !fld.equalValues(oldValue, newValue)) {
	                            rs["_editItemCellUpdated"](this, i, oldValue, newValue);
	                        }
	                    }
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditItem.prototype.beginEdit = function (checkDiff, strictDiff) {
	        this._started = true;
	        this._checkDiff = checkDiff;
	        this._strictDiff = strictDiff;
	    };
	    EditItem.prototype.setValue = function (field, value) {
	        var ds = this.dataSource;
	        if (field < 0 && field >= ds.fieldCount) {
	            throw new DataSource_1.DataSourceError("field index is out of bounds: " + field);
	        }
	        var fld = ds.getField(field);
	        var oldValue = this._values[field];
	        value = fld.readValue(value);
	        this._values[field] = value;
	        if (this._started && !fld.equalValues(oldValue, value)) {
	            this.provider["_editItemCellUpdated"](this, field, oldValue, value);
	        }
	    };
	    Object.defineProperty(EditItem.prototype, "resizable", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditItem.prototype, "itemState", {
	        get: function () {
	            return this._state;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditItem.prototype, "editable", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    EditItem.prototype.getData = function (field) {
	        if (field < 0 && field >= this.dataSource.fieldCount) {
	            throw new RangeError("field index is out of bounds: " + field);
	        }
	        return this._values[field];
	    };
	    EditItem.prototype.setData = function (field, value) {
	        var ds = this.dataSource;
	        if (field < 0 && field >= ds.fieldCount) {
	            throw new RangeError("field index is out of bounds: " + field);
	        }
	        var fld = ds.getField(field);
	        var oldValue = this._values[field];
	        value = fld.readValue(value);
	        var can = !this._checkDiff;
	        if (!can) {
	            if (this._strictDiff) {
	                can = !fld.equalValues(oldValue, value);
	            }
	            else {
	                can = !fld.sameValues(oldValue, value);
	            }
	        }
	        if (can) {
	            var rs = this.provider;
	            this._values[field] = value;
	            this.provider["_editItemCellUpdated"](this, field, oldValue, value);
	            this.provider["_editItemCellEdited"](this, field);
	        }
	    };
	    EditItem.prototype.getRowData = function () {
	        return this._values.concat();
	    };
	    EditItem.prototype.getRowObject = function () {
	        var ds = this.dataSource;
	        if (ds) {
	            var row = {};
	            for (var i = 0, cnt = ds.fieldCount; i < cnt; i++) {
	                var fld = ds.getOrgFieldName(i);
	                row[fld] = this._values[i];
	            }
	            return row;
	        }
	        else {
	            return null;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditItem.prototype._clearDisplayLevels = function () {
	        // for (let i = 0, cnt = this._rows.length; i < cnt; i++) {
	        // 	this._rows[i]._displayLevel = -1;
	        // }
	    };
	    return EditItem;
	}(GridItem_1.GridRow));
	exports.EditItem = EditItem;
	var EditableItemProvider = /** @class */ (function (_super) {
	    __extends(EditableItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditableItemProvider(source, indexing) {
	        var _this = _super.call(this, source, indexing) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._checkDiff = false;
	        _this._checkCellDiff = false;
	        _this._strictDiff = false;
	        _this._undoable = false;
	        _this._cancelWhenLastUndo = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._orgItem = null;
	        _this._editingItem = null;
	        _this._dummyEditItem = null;
	        _this._editingState = GridItem_1.ItemState.NORMAL;
	        _this._insertMode = 0;
	        _this._modified = false;
	        _this._commiting = false;
	        _this._saveDs = null;
	        _this._commands = new EditCommand_1.EditCommandStack(_this);
	        if (source && (_this._saveDs = source.dataSource)) {
	            _this._saveDs.registerClient(_this);
	        }
	        return _this;
	    }
	    EditableItemProvider.prototype._doDispose = function () {
	        this._saveDs = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // DataSourceClient
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype.isDataEditing = function () {
	        return this.isEditing();
	    };
	    EditableItemProvider.prototype.cancelDataEditing = function () {
	        if (this.isEditing()) {
	            this.fireCancelRequest();
	        }
	    };
	    EditableItemProvider.prototype.commitDataEditing = function () {
	        if (this.isEditing()) {
	            this.fireCommitRequest();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // EditCommandStack
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype.editCommandStackChanged = function (stack, undoable, redoable) {
	        var ds = this._saveDs;
	        if (ds) {
	            this._fireCommandStackChanged(undoable || ds.canUndo, redoable || ds.canRedo);
	        }
	        else {
	            this._fireCommandStackChanged(undoable, redoable);
	        }
	    };
	    Object.defineProperty(EditableItemProvider.prototype, "isCheckDiff", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** checkDiff */
	        get: function () {
	            return this._checkDiff;
	        },
	        set: function (value) {
	            this._checkDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "isCheckCellDiff", {
	        /** checkCellDiff */
	        get: function () {
	            return this._checkCellDiff;
	        },
	        set: function (value) {
	            this._checkCellDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "isStrictDiff", {
	        /** strictDiff */
	        get: function () {
	            return this._strictDiff;
	        },
	        set: function (value) {
	            this._strictDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "editingItem", {
	        /** editingItem */
	        get: function () {
	            return (this._commiting || this.isEditing()) ? this._editingItem : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "isUpdating", {
	        /** updating */
	        get: function () {
	            return this._editingState == GridItem_1.ItemState.UPDATING;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "isInserting", {
	        /** inserting */
	        get: function () {
	            return this._editingState == GridItem_1.ItemState.INSERTING;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "isAppending", {
	        /** appending */
	        get: function () {
	            return this._editingState == GridItem_1.ItemState.APPENDING;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "undoable", {
	        /** undoable */
	        get: function () {
	            return this._undoable && this._saveDs && this._saveDs.undoable;
	        },
	        set: function (value) {
	            if (value != this._undoable) {
	                this._undoable = value;
	                this._commands.flush();
	                this._saveDs.undoable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "cancelWhenLastUndo", {
	        /** cancelWhenLastUndo */
	        get: function () {
	            return this._cancelWhenLastUndo;
	        },
	        set: function (value) {
	            this._cancelWhenLastUndo = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "canUndo", {
	        /** canUndo */
	        get: function () {
	            return this._commands.canUndo || this._saveDs && this._saveDs.canUndo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "canRedo", {
	        /** canRedo */
	        get: function () {
	            return this._commands.canRedo || this._saveDs && this._saveDs.canRedo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "undoing", {
	        /** undoing */
	        get: function () {
	            return this._commands.undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditableItemProvider.prototype, "redoing", {
	        /** redoing */
	        get: function () {
	            return this._commands.redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype.isEditing = function (item) {
	        return GridItem_1.ItemState_isEditing(this._editingState) && (!item || item === this._editingItem);
	    };
	    EditableItemProvider.prototype.isEdited = function (item) {
	        return GridItem_1.ItemState_isEditing(this._editingState) && (!item || item === this._editingItem) && this._modified;
	    };
	    EditableItemProvider.prototype.setDiffs = function (check, cell, strict) {
	        this._checkDiff = check;
	        this._checkCellDiff = cell;
	        this._strictDiff = strict;
	    };
	    EditableItemProvider.prototype.edit = function (item) {
	        if (this.isEditing()) {
	            return true;
	        }
	        else if (item) {
	            try {
	                this._beginUpdate(item);
	                return true;
	            }
	            catch (err) {
	                this.cancel();
	                throw err;
	            }
	        }
	        return false;
	    };
	    EditableItemProvider.prototype.editData = function (item, field, value) {
	        var ds;
	        if (item && (ds = this.dataSource) && field >= 0 && field < ds.fieldCount) {
	            if (!this.isEditing()) {
	                try {
	                    this._beginUpdate(item);
	                    return true;
	                }
	                catch (err) {
	                    this.cancel();
	                    throw err;
	                }
	            }
	            this._editingItem.setData(field, value);
	        }
	        return false;
	    };
	    EditableItemProvider.prototype.append = function (defaultValues) {
	        if (!this.isEditing()) {
	            try {
	                this._beginAppend(defaultValues);
	                return true;
	            }
	            catch (err) {
	                this.cancel();
	                throw err;
	            }
	        }
	        return false;
	    };
	    EditableItemProvider.prototype.insert = function (item, defaultValues, shift, ctrl) {
	        if (!this.isEditing()) {
	            try {
	                this._beginInsert(item, defaultValues, shift, ctrl);
	                return true;
	            }
	            catch (err) {
	                this.cancel();
	                throw err;
	            }
	        }
	        return false;
	    };
	    EditableItemProvider.prototype.cancelDummy = function () {
	        if (this._dummyEditItem) {
	            this._cancelDummyEdit();
	        }
	    };
	    EditableItemProvider.prototype.cancel = function () {
	        if (this.isEditing()) {
	            this._cancelEdit();
	        }
	    };
	    EditableItemProvider.prototype.commit = function () {
	        if (this.isEditing()) {
	            this._commiting = true;
	            try {
	                var ds = this.dataSource;
	                if (ds) {
	                    if (this._editingState == GridItem_1.ItemState.UPDATING && this.isCheckDiff) {
	                        var values = this._editingItem["values"];
	                        var cnt = values.length;
	                        var strict = this.isStrictDiff;
	                        var diff = false;
	                        for (var i = 0; i < cnt; i++) {
	                            if (strict) {
	                                if (!ds.getField(i).equalValues(this._orgItem.getData(i), values[i])) {
	                                    diff = true;
	                                    break;
	                                }
	                            }
	                            else {
	                                if (!ds.getField(i).sameValues(this._orgItem.getData(i), values[i])) {
	                                    diff = true;
	                                    break;
	                                }
	                            }
	                        }
	                        if (!diff) {
	                            this._cancelEdit();
	                            return true;
	                        }
	                    }
	                    return this._commitEdit();
	                }
	            }
	            finally {
	                this._commiting = false;
	            }
	        }
	        return true;
	    };
	    EditableItemProvider.prototype.execute = function (command) {
	        if (command) {
	            this.undoable ? this._commands.execute(command) : command.execute();
	        }
	    };
	    EditableItemProvider.prototype.undo = function () {
	        if (this.isEditing()) {
	            this._commands.undo();
	            if (!this._commands.canUndo && this._cancelWhenLastUndo) {
	                this.cancel();
	            }
	        }
	        else if (this._saveDs) {
	            this._saveDs.undo();
	        }
	    };
	    EditableItemProvider.prototype.redo = function () {
	        if (this.isEditing()) {
	            this._commands.redo();
	        }
	        else if (this._saveDs) {
	            this._saveDs.redo();
	        }
	    };
	    EditableItemProvider.prototype.clearCommandStack = function (all) {
	        if (all === void 0) { all = true; }
	        this._commands.flush();
	        all && this._saveDs && this._saveDs.clearCommandStack();
	    };
	    EditableItemProvider.prototype.revert = function (item) {
	    };
	    EditableItemProvider.prototype.revertAll = function (items) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype._checkEditing = function () {
	        if (!this.isEditing()) {
	            throw new Error("itemProvider is not editing");
	        }
	    };
	    EditableItemProvider.prototype._checkNotEditing = function () {
	        if (this.isEditing()) {
	            throw new Error("itemProvider is already editing");
	        }
	    };
	    EditableItemProvider.prototype._beginUpdate = function (item) {
	        if (!item) {
	            throw new Error("item is null");
	        }
	        this._checkNotEditing();
	        this._modified = false;
	        this._editingItem = this._doBeginUpdate(item);
	        this._editingItem["beginEdit"](this.isCheckCellDiff, this.isStrictDiff);
	        if (this._editingItem) {
	            this._orgItem = item;
	            this._editingState = GridItem_1.ItemState.UPDATING;
	            this._commands.flush();
	            this.fireUpdateStarted(this._editingItem);
	        }
	    };
	    EditableItemProvider.prototype._doBeginUpdate = function (item) {
	        return null;
	    };
	    EditableItemProvider.prototype._beginAppendDummy = function () {
	        this._dummyEditItem = this._doBeginAppendDummy();
	    };
	    EditableItemProvider.prototype._doBeginAppendDummy = function () {
	        return null;
	    };
	    EditableItemProvider.prototype._beginAppend = function (defaultValues) {
	        this._checkNotEditing();
	        this._modified = false;
	        this._editingItem = this._doBeginAppend(defaultValues);
	        this._editingItem["beginEdit"](this.isCheckCellDiff, this.isStrictDiff);
	        if (this._editingItem) {
	            this._editingState = GridItem_1.ItemState.APPENDING;
	            this._commands.flush();
	            this.fireAppendStarted(this._editingItem);
	        }
	    };
	    EditableItemProvider.prototype._doBeginAppend = function (defaultValues) {
	        return null;
	    };
	    EditableItemProvider.prototype._beginInsert = function (item, defaultValues, shift, ctrl) {
	        if (shift === void 0) { shift = false; }
	        if (ctrl === void 0) { ctrl = false; }
	        this._checkNotEditing();
	        this._modified = false;
	        this._editingItem = this._doBeginInsert(item, defaultValues, shift, ctrl);
	        this._editingItem["beginEdit"](this.isCheckCellDiff, this.isStrictDiff);
	        if (this._editingItem) {
	            this._editingState = GridItem_1.ItemState.INSERTING;
	            this._resetItemIndicies(0); //this._editingItem.index());
	            this._commands.flush();
	            this.fireInsertStarted(this._editingItem);
	        }
	    };
	    EditableItemProvider.prototype._doBeginInsert = function (item, defaultValues, shift, ctrl) {
	        return null;
	    };
	    EditableItemProvider.prototype._updateEditingRow = function (orgItem) {
	        return false;
	    };
	    EditableItemProvider.prototype._insertEditingRow = function (appending) {
	        return false;
	    };
	    EditableItemProvider.prototype._cancelDummyEdit = function () {
	        this._dummyEditItem = null;
	        this._doCancelDummyEdit();
	    };
	    EditableItemProvider.prototype._cancelEdit = function () {
	        this._checkEditing();
	        var saveState = this._editingState;
	        try {
	            this._editingState = GridItem_1.ItemState.NORMAL;
	            this._doCancelEdit(saveState, this._orgItem);
	        }
	        catch (err) {
	            this._editingState = saveState;
	            throw err;
	        }
	        this._modified = false;
	        this._commands.flush();
	        this.fireCanceled();
	    };
	    EditableItemProvider.prototype._doCancelDummyEdit = function () {
	    };
	    EditableItemProvider.prototype._doCancelEdit = function (state, orgItem) {
	        if (state == GridItem_1.ItemState.INSERTING) {
	            this._resetItemIndicies(0);
	        }
	    };
	    EditableItemProvider.prototype._commitEdit = function () {
	        this._checkEditing();
	        var ds = this.dataSource;
	        if (!ds) {
	            throw new Error("data provier is null");
	        }
	        try {
	            this.fireItemCommitting(this._editingItem);
	        }
	        catch (err) {
	            alert(err.message);
	        }
	        var saveState = this._editingState;
	        var completed = false;
	        if (this.isUpdating) {
	            try {
	                this._editingState = GridItem_1.ItemState.NORMAL;
	                completed = this._doCompleteUpdate(this._orgItem);
	            }
	            catch (err) {
	                this._editingState = saveState;
	                throw err;
	            }
	        }
	        else {
	            try {
	                this._editingState = GridItem_1.ItemState.NORMAL;
	                completed = this._doCompleteInsert(saveState == GridItem_1.ItemState.APPENDING);
	            }
	            catch (err) {
	                this._editingState = saveState;
	                throw err;
	            }
	        }
	        if (completed) {
	            this._modified = false;
	            this._doCommitEdit(saveState, this._orgItem);
	            this._commands.flush();
	            this.fireCommitted(this._editingItem);
	        }
	        else {
	            this._editingState = saveState;
	        }
	        return completed;
	    };
	    EditableItemProvider.prototype._doCommitEdit = function (state, orgItem) {
	        return false;
	    };
	    EditableItemProvider.prototype._editItemCellEdited = function (item, field) {
	        if (item && this.isEditing(item)) {
	            this._modified = true;
	            this.fireItemCellEdited(item, field);
	        }
	    };
	    EditableItemProvider.prototype._editItemCellUpdated = function (item, field, oldValue, newValue) {
	        if (this.isEditing(item)) {
	            this._modified = true;
	            this.fireItemCellUpdated(item, field, oldValue, newValue);
	        }
	    };
	    EditableItemProvider.prototype.$_editingItem = function () {
	        return this._editingItem;
	    };
	    EditableItemProvider.prototype.$_dummyItem = function () {
	        return this._dummyEditItem;
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype.fireUpdateStarted = function (item) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.UPDATE_STARTED, item);
	        }
	    };
	    EditableItemProvider.prototype.fireAppendStarted = function (item) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.APPEND_STARTED, item);
	        }
	    };
	    EditableItemProvider.prototype.fireInsertStarted = function (item) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.INSERT_STARTED, item);
	        }
	    };
	    EditableItemProvider.prototype.fireItemCellEdited = function (item, field) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.CELL_EDITED, item, field);
	        }
	    };
	    EditableItemProvider.prototype.fireItemCellUpdated = function (item, field, oldValue, newValue) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.CELL_UPDATED, item, field, oldValue, newValue);
	        }
	    };
	    EditableItemProvider.prototype.fireItemCommitting = function (item) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.COMMITTING, item);
	        }
	    };
	    EditableItemProvider.prototype.fireCommitted = function (item) {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.COMMITTED, item);
	        }
	    };
	    EditableItemProvider.prototype.fireCanceled = function () {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.CANCELED);
	        }
	    };
	    EditableItemProvider.prototype.fireCommitRequest = function () {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.COMMIT_REQUEST);
	        }
	    };
	    EditableItemProvider.prototype.fireCancelRequest = function () {
	        if (this.$_canFire()) {
	            this.fireEvent(EditableItemProvider.CANCEL_REQUEST);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    EditableItemProvider.prototype.onItemProviderReset = function (rs) {
	        _super.prototype.onItemProviderReset.call(this, rs);
	        var ds = this.dataSource;
	        if (ds != this._saveDs) {
	            this._saveDs && this._saveDs.unregisterClient(this);
	            this._saveDs = ds;
	            this._saveDs && this._saveDs.registerClient(this);
	        }
	    };
	    EditableItemProvider.prototype.onItemProviderRefresh = function (rs) {
	        _super.prototype.onItemProviderRefresh.call(this, rs);
	    };
	    EditableItemProvider.prototype.onItemProviderRefreshClient = function (rs) {
	        _super.prototype.onItemProviderRefreshClient.call(this, rs);
	    };
	    EditableItemProvider.prototype.onItemProviderItemInserted = function (rs, item) {
	        _super.prototype.onItemProviderItemInserted.call(this, rs, item);
	    };
	    EditableItemProvider.prototype.onItemProviderItemDeleted = function (rs, item) {
	        _super.prototype.onItemProviderItemDeleted.call(this, rs, item);
	    };
	    EditableItemProvider.prototype.onItemProviderItemUpdated = function (rs, item) {
	        _super.prototype.onItemProviderItemUpdated.call(this, rs, item);
	    };
	    EditableItemProvider.prototype.onItemProviderCommandStackChanged = function (rs, undoable, redoable) {
	        var stack = this._commands;
	        this._fireCommandStackChanged(undoable || stack.canUndo, redoable || stack.canRedo);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    EditableItemProvider.UPDATE_STARTED = "onItemEditUpdateStarted";
	    EditableItemProvider.APPEND_STARTED = "onItemEditAppendStarted";
	    EditableItemProvider.INSERT_STARTED = "onItemEditInsertStarted";
	    EditableItemProvider.CELL_EDITED = "onItemEditCellEdited";
	    EditableItemProvider.CELL_UPDATED = "onItemEditCellUpdated";
	    EditableItemProvider.COMMITTING = "onItemEditCommitting";
	    EditableItemProvider.COMMITTED = "onItemEditCommitted";
	    EditableItemProvider.CANCELED = "onItemEditCanceled";
	    EditableItemProvider.COMMIT_REQUEST = "onItemEditCommitRequest";
	    EditableItemProvider.CANCEL_REQUEST = "onItemEditCancelRequest";
	    return EditableItemProvider;
	}(ItemProvider_1.ProxyItemProvider));
	exports.EditableItemProvider = EditableItemProvider;
	var EditableItemProviderImpl = /** @class */ (function (_super) {
	    __extends(EditableItemProviderImpl, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditableItemProviderImpl(source, indexing) {
	        var _this = _super.call(this, source, indexing) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._insertRow = -1;
	        return _this;
	    }
	    EditableItemProviderImpl.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditableItemProviderImpl.prototype, "itemCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            var cnt = this.source.itemCount;
	            cnt += (this.isInserting || this.isAppending) ? 1 : 0;
	            cnt += (this.$_dummyItem()) ? 1 : 0;
	            return cnt;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    EditableItemProviderImpl.prototype.getItem = function (index) {
	        var editItem = this.$_editingItem();
	        var dummyItem = this.$_dummyItem();
	        var ret;
	        var ip = this.source;
	        if (this.isEditing() && editItem.index == index) {
	            return editItem;
	        }
	        else if (this.isInserting) {
	            if (index > editItem.index) {
	                ret = ip.getItem(index - 1);
	            }
	            else {
	                ret = ip.getItem(index);
	            }
	        }
	        else if (index < ip.itemCount) {
	            ret = ip.getItem(index);
	        }
	        if (ret) {
	            return ret;
	        }
	        else if (dummyItem && index == this.itemCount - 1) {
	            return dummyItem;
	        }
	        return null;
	    };
	    EditableItemProviderImpl.prototype.getItems = function (index, count) {
	        return this.source.getItems(index, count);
	    };
	    EditableItemProviderImpl.prototype._doBeginUpdate = function (item) {
	        return this._createEditItem(item, GridItem_1.ItemState.UPDATING, null, false, false);
	    };
	    EditableItemProviderImpl.prototype._doBeginAppendDummy = function () {
	        var item = this.$_dummyItem() || this._createDummyEditItem();
	        item["_index"] = this.itemCount - 1;
	        return item;
	    };
	    EditableItemProviderImpl.prototype._doBeginAppend = function (defaultValues) {
	        return this._createEditItem(null, GridItem_1.ItemState.APPENDING, defaultValues, false, false);
	    };
	    EditableItemProviderImpl.prototype._doBeginInsert = function (item, defaultValues, shift, ctrl) {
	        return this._createEditItem(item, GridItem_1.ItemState.INSERTING, defaultValues, shift, ctrl);
	    };
	    EditableItemProviderImpl.prototype._doCompleteUpdate = function (orgItem) {
	        var ds = this.dataSource;
	        if (ds instanceof DataProvider_1.DataProvider) {
	            var editItem = this.$_editingItem();
	            this._copyExtents(editItem, orgItem);
	            return ds.updateRow(editItem.dataRow, editItem["values"]);
	        }
	        return false;
	    };
	    EditableItemProviderImpl.prototype._doCompleteInsert = function (appending) {
	        var rslt = false;
	        var ds = this.dataSource;
	        if (ds) {
	            var editItem = this.$_editingItem();
	            var r = appending ? ds.rowCount : Math.max(0, this._insertRow);
	            var values = editItem["values"];
	            rslt = ds["insertRow"](r, values, editItem["_index2"]);
	            if (rslt) {
	                var item = this.getItemOfRow(r);
	                this._copyExtents(editItem, item);
	            }
	        }
	        return rslt;
	    };
	    EditableItemProviderImpl.prototype.remove = function (item) {
	        var ds = this.dataSource;
	        if (item && !this.isEditing(item) && ds) {
	            var r = item.dataRow;
	            if (r >= 0) {
	                ds.removeRow(r);
	            }
	        }
	    };
	    EditableItemProviderImpl.prototype.removeAll = function (items) {
	        if (!items || items.length == 0) {
	            return;
	        }
	        var ds = this.dataSource;
	        if (!ds) {
	            return;
	        }
	        var cnt = items.length;
	        if (cnt > 1) {
	            var rows = [];
	            for (var i = 0; i < cnt; i++) {
	                var row = this.getItem(items[i]).dataRow;
	                if (row >= 0) {
	                    rows.push(row);
	                }
	            }
	            if (rows.length > 1) {
	                ds.removeRows(rows);
	            }
	            else if (rows.length == 1) {
	                ds.removeRow(rows[0]);
	            }
	        }
	        else if (cnt == 1) {
	            var row = this.getItem(items[0]).dataRow;
	            row >= 0 && ds.removeRow(row);
	        }
	    };
	    EditableItemProviderImpl.prototype.revert = function (item) {
	        if (!(item instanceof GridItem_1.GridItem)) {
	            item = this.getItem(item);
	        }
	        if (item) {
	            var ds = this.dataSource;
	            if (ds) {
	                var r = item.dataRow;
	                var st = ds.getRowState(r);
	                if (st == RowState_1.RowState.DELETED) {
	                    ds.setRowState(r, RowState_1.RowState.NONE, false);
	                }
	                else if (st == RowState_1.RowState.CREATE_AND_DELETED) {
	                    ds.setRowState(r, RowState_1.RowState.CREATED, false);
	                }
	            }
	        }
	    };
	    EditableItemProviderImpl.prototype.revertAll = function (items) {
	        if (!items || items.length == 0) {
	            return;
	        }
	        var ds = this.dataSource;
	        if (!ds) {
	            return;
	        }
	        for (var i = items.length; i--;) {
	            var item = this.getItem(items[i]);
	            if (item) {
	                var r = item.dataRow;
	                var st = ds.getRowState(r);
	                if (st == RowState_1.RowState.DELETED) {
	                    ds.setRowState(r, RowState_1.RowState.NONE, false);
	                }
	                else if (st == RowState_1.RowState.CREATE_AND_DELETED) {
	                    ds.setRowState(r, RowState_1.RowState.CREATED, false);
	                }
	            }
	        }
	    };
	    EditableItemProviderImpl.prototype.getRemovableRows = function (items) {
	        if (!items || items.length == 0) {
	            return null;
	        }
	        var rows = [];
	        for (var i = 0, cnt = items.length; i < cnt; i++) {
	            var row = this.getItem(items[i]).dataRow;
	            row >= 0 && rows.push(row);
	        }
	        return rows;
	    };
	    EditableItemProviderImpl.prototype.removeRows = function (rows) {
	        if (rows) {
	            if (rows.length > 1) {
	                this.dataSource.removeRows(rows);
	            }
	            else {
	                this.dataSource.removeRow(rows[0]);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditableItemProviderImpl.prototype._createDummyEditItem = function () {
	        var item = null;
	        item = new DummyEditItem(this, null, this.itemCount, -1 /*target.dataRow*/, GridItem_1.ItemState.DUMMY);
	        return item;
	    };
	    EditableItemProviderImpl.prototype._createEditItem = function (target, state, defaultValues, shift, ctrl) {
	        var ds = this.dataSource;
	        if (!ds) {
	            return null;
	        }
	        var item = null;
	        var flds = ds.fieldCount;
	        switch (state) {
	            case GridItem_1.ItemState.UPDATING:
	                item = new EditItem(this, target, target.index, target.dataRow, state);
	                for (var i = 0; i < flds; i++) {
	                    item.setValue(i, target.getData(i));
	                }
	                this._copyExtents(target, item);
	                break;
	            case GridItem_1.ItemState.INSERTING:
	            case GridItem_1.ItemState.APPENDING:
	                var provider = this["_rs"];
	                var targetIndex = state == GridItem_1.ItemState.INSERTING && target ? (shift ? target.index + 1 : target.index) : this.itemCount;
	                item = new EditItem(this, target, targetIndex, -1, state);
	                if (state == GridItem_1.ItemState.INSERTING) {
	                    var row = target.dataRow;
	                    var nextItem = target;
	                    if (row <= -1) {
	                        var visibleItems = this.source["_visibleItems"];
	                        while (nextItem = visibleItems.getNext(nextItem)) {
	                            if (nextItem instanceof GridItem_1.GridRow) {
	                                break;
	                            }
	                        }
	                        this._insertRow = nextItem ? nextItem.dataRow : ds.rowCount;
	                    }
	                    else {
	                        this._insertRow = shift ? Math.min(ds.rowCount, row + 1) : row;
	                    }
	                    if (target instanceof GridItem_1.GridRow && shift && provider) {
	                        var index2 = provider["_pubItems"].indexOf(nextItem);
	                        index2++ >= 0 && index2 <= provider._pubItems.length && (item._index2 = index2);
	                    }
	                }
	                if (defaultValues) {
	                    for (var i = 0; i < flds; i++) {
	                        if (defaultValues.length > i) {
	                            item.setValue(i, defaultValues[i]);
	                        }
	                    }
	                }
	                break;
	        }
	        return item;
	    };
	    return EditableItemProviderImpl;
	}(EditableItemProvider));
	exports.EditableItemProviderImpl = EditableItemProviderImpl;
	});

	unwrapExports(EditableItemProvider_1);
	var EditableItemProvider_2 = EditableItemProvider_1.DummyEditItem;
	var EditableItemProvider_3 = EditableItemProvider_1.EditItem;
	var EditableItemProvider_4 = EditableItemProvider_1.EditableItemProvider;
	var EditableItemProvider_5 = EditableItemProvider_1.EditableItemProviderImpl;

	var DateTimeConverter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DateTimeConverter.ts
	// 2019. 07. 04. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });

	var $$_DATE_TOKENS = [
	    "yy", "yyyy",
	    "M", "MM",
	    "d", "dd",
	    "a", "A",
	    "H", "HH", "h", "hh",
	    "m", "mm",
	    "s", "ss"
	];
	var $$_DATE_SEPARATORS = [
	    ".", "/", "-", ":"
	];
	var $$_ZERO_CHAR = "0".charCodeAt(0);
	var $$_NINE_CHAR = "9".charCodeAt(0);
	var $$_MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30];
	var $$_DAY_MILLISECONDS = 86400000;
	var $$_AMPMS = ["am", "pm", "AM", "PM", "Am", "Pm", "aM", "pM"];
	var $$_WEEK_TIME = 604800000;
	var DateProperty;
	(function (DateProperty) {
	    DateProperty[DateProperty["YEAR"] = 0] = "YEAR";
	    DateProperty[DateProperty["HALF"] = 1] = "HALF";
	    DateProperty[DateProperty["QUARTER"] = 2] = "QUARTER";
	    DateProperty[DateProperty["MONTH"] = 3] = "MONTH";
	    DateProperty[DateProperty["WEEK"] = 4] = "WEEK";
	    DateProperty[DateProperty["DAY"] = 5] = "DAY";
	    DateProperty[DateProperty["HOUR"] = 6] = "HOUR";
	})(DateProperty = exports.DateProperty || (exports.DateProperty = {}));
	var DateTimeConverter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DateTimeConverter(format) {
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._formatString = "";
	        this._baseYear = 2000;
	        this._preserveTime = false;
	        this.formatString = format;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DateTimeConverter.getSimpleDateNull = function (date) {
	        if (date instanceof Date) {
	            return date;
	        }
	        if (typeof date === "number") {
	            return new Date(date);
	        }
	        date = date.length === 8 && /^[0-9]*$/.test(date) ? date.replace(/(\d{4})(\d{2})(\d{2})/, "$1/$2/$3") : date;
	        var arr = date.split(/[.//-]/);
	        if (arr.length != 3) {
	            return null;
	        }
	        var y = parseInt(arr[0]);
	        var m = parseInt(arr[1]) - 1;
	        var d = parseInt(arr[2]);
	        date = new Date(y, m, d);
	        if (y == date.getFullYear() && m == date.getMonth() && d == date.getDate()) {
	            return date; // 20190099 처럼 올바르지 않은 날짜는 null처리해버린다.
	        }
	        else {
	            return null;
	        }
	    };
	    DateTimeConverter.getDateProperty = function (d, type) {
	        if (!d) {
	            return null;
	        }
	        switch (type) {
	            case DateProperty.YEAR:
	                return d.getFullYear();
	            case DateProperty.HALF:
	                return d.getMonth() > 5 ? 2 : 1;
	            case DateProperty.QUARTER:
	                return Math.floor(d.getMonth() / 3);
	            case DateProperty.MONTH:
	                return d.getMonth();
	            case DateProperty.WEEK:
	                var start = new Date(d.getFullYear(), d.getMonth(), 1);
	                start.setDate(start.getDate() - start.getDay());
	                return Math.floor((d.getTime() - start.getTime()) / $$_WEEK_TIME) + 1;
	            case DateProperty.DAY:
	                return d.getDate();
	            case DateProperty.HOUR:
	                return d.getHours();
	        }
	    };
	    Object.defineProperty(DateTimeConverter.prototype, "formatString", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** formatString */
	        get: function () {
	            return this._formatString;
	        },
	        set: function (value) {
	            if (value != this._formatString) {
	                this._formatString = value;
	                this.parse(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateTimeConverter.prototype, "format", {
	        /** format */
	        get: function () {
	            return this._format;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /**
	     * 1. trim()한다.
	     * 2. 이어진 space는 하나의 space로 간주한다.
	     * 3. 일 구분자는 ".", "/", "-" 셋 중 하나면 된다.
	     */
	    DateTimeConverter.prototype.getDate = function (str) {
	        var date;
	        if (str = str.trim()) {
	            var tokens = this.parseDateFormatTokens(this._format);
	            var values = this.parseDateValueTokens(str, this._amText, this._pmText);
	            var ampm = tokens.indexOf("a") >= 0 || tokens.indexOf("A") >= 0;
	            var len = tokens.length;
	            var vlen = values.length;
	            var y = 0;
	            var m = 1;
	            var d = 1;
	            var h = 0;
	            var n = 0;
	            var s = 0;
	            var am = 0;
	            var pm = 0;
	            var i = 0;
	            var j = 0;
	            while (i < len && j < vlen) {
	                var token = tokens[i];
	                var v = values[j];
	                switch (token.charAt(0)) {
	                    case "L":
	                        var ss = String(v);
	                        i++;
	                        while (i < len && (str = tokens[i]) != "E") {
	                            var v_1 = ss ? parseInt(ss.substr(0, str.length)) : -1;
	                            ss = ss.substr(str.length);
	                            switch (str.charAt(0)) {
	                                case "Y":
	                                case "y":
	                                    y = Math.max(0, v_1);
	                                    break;
	                                case "M":
	                                    m = v_1 >= 0 ? v_1 : 1;
	                                    break;
	                                case "D":
	                                case "d":
	                                    d = v_1 >= 0 ? v_1 : 1;
	                                    break;
	                                case "H":
	                                case "h":
	                                    h = Math.max(0, v_1);
	                                    break;
	                                case "m":
	                                    n = Math.max(0, v_1);
	                                    break;
	                                case "s":
	                                    s = Math.max(0, v_1);
	                                    break;
	                            }
	                            i++;
	                        }
	                        break;
	                    case "Y":
	                    case "y":
	                        y = parseInt(v);
	                        break;
	                    case "M":
	                        m = parseInt(v);
	                        break;
	                    case "D":
	                    case "d":
	                        d = parseInt(v);
	                        break;
	                    case "H":
	                    case "h":
	                        h = parseInt(v);
	                        break;
	                    case "m":
	                        n = parseInt(v);
	                        break;
	                    case "s":
	                        s = parseInt(v);
	                        break;
	                    case "a":
	                        str = String(v);
	                        if (str) {
	                            str = str.toLowerCase();
	                            if ((this._amText && str == this._amText.toLowerCase()) || (str == "am")) {
	                                am = 12;
	                            }
	                            else if ((this._pmText && str == this._pmText.toLowerCase()) || (str == "pm")) {
	                                pm = 12;
	                            }
	                        }
	                        break;
	                }
	                i++;
	                j++;
	            }
	            if (y < 100 && y >= 0) {
	                y += this._baseYear;
	            }
	            if (y < 0 || y > 9999) {
	                return null;
	            }
	            if (Utils_1.Utils.included(m, 1, 3, 5, 7, 8, 10, 12)) {
	                if (d < 1 || d > 31)
	                    return null;
	            }
	            else if (Utils_1.Utils.included(m, 4, 6, 9, 11)) {
	                if (d < 1 || d > 30)
	                    return null;
	            }
	            else if (m == 2) {
	                if (d > 29) {
	                    return null;
	                }
	                if (d == 29) {
	                    if (!((y % 4 == 0) && (y % 100 != 0) || (y % 400 == 0)))
	                        return null;
	                }
	            }
	            else {
	                return null;
	            }
	            if (h < 0 || h > 24) {
	                return null;
	            }
	            if ((am > 0 || pm > 0) && h > 12) {
	                return null;
	            }
	            if (n < 0 || n > 59) {
	                return null;
	            }
	            if (s < 0 || s > 59) {
	                return null;
	            }
	            if (am > 0) {
	                h = h % 12;
	            }
	            else if (pm > 0) {
	                h = h % 12 + 12;
	            }
	            date = new Date(y, m - 1, d, h, n, s);
	        }
	        return date;
	    };
	    DateTimeConverter.prototype.getDateNull = function (s) {
	        try {
	            return this.getDate(s);
	        }
	        catch (err) {
	        }
	        return null;
	    };
	    DateTimeConverter.prototype.getText = function (d) {
	        var date = d;
	        if (!(date instanceof Date)) {
	            date = new Date(d);
	        }
	        var tokens = this.parseDateFormatTokens(this._format);
	        var ampm = tokens.indexOf("a") >= 0 || tokens.indexOf("A") >= 0;
	        var s = "";
	        for (var i = 0, cnt = tokens.length; i < cnt; i++) {
	            var t = tokens[i];
	            var len = t.length;
	            switch (t.charAt(0)) {
	                case "L":
	                    break;
	                case "Y":
	                case "y":
	                    s += len > 2 ? date.getFullYear() : Utils_1.Utils.pad(date.getFullYear() % 100);
	                    break;
	                case "M":
	                    s += len > 1 ? Utils_1.Utils.pad(date.getMonth() + 1) : date.getMonth() + 1;
	                    break;
	                case "D":
	                case "d":
	                    s += len > 1 ? Utils_1.Utils.pad(date.getDate()) : date.getDate();
	                    break;
	                case "H":
	                    s += len > 1 ? Utils_1.Utils.pad(date.getHours()) : date.getHours();
	                    break;
	                case "h":
	                    if (ampm) {
	                        var h = date.getHours();
	                        if (h == 0) {
	                            h = 12;
	                        }
	                        else if (h > 12) {
	                            h = h - 12;
	                        }
	                        s += len > 1 ? Utils_1.Utils.pad(h) : h;
	                    }
	                    else {
	                        s += len > 1 ? Utils_1.Utils.pad(date.getHours()) : date.getHours();
	                    }
	                    break;
	                case "m":
	                    s += len > 1 ? Utils_1.Utils.pad(date.getMinutes()) : date.getMinutes();
	                    break;
	                case "s":
	                    s += len > 1 ? Utils_1.Utils.pad(date.getSeconds()) : date.getSeconds();
	                    break;
	                case "A":
	                case "a":
	                    if (date.getHours() < 12) {
	                        s += this._amText;
	                    }
	                    else {
	                        s += this._pmText;
	                    }
	                    break;
	                default:
	                    s += t;
	            }
	        }
	        return s;
	    };
	    DateTimeConverter.prototype.daysOfYear = function (d) {
	        var days = 0;
	        for (var i = 0; i < d.getMonth(); i++) {
	            days += $$_MONTH_DAYS[i];
	        }
	        if (d.getMonth() >= 2) {
	            var y = d.getFullYear();
	            if (y % 400 == 0 || (y % 4 == 0 && y % 100 != 0))
	                days++;
	        }
	        days += d.getDate();
	        return days;
	    };
	    DateTimeConverter.prototype.daysOfPriorYears = function (y) {
	        if (y <= 1900)
	            return 0;
	        y--;
	        var leapDays = Math.floor(y / 4) // plus julian leap days in prior years
	            - Math.floor(y / 100) // minus prior century years
	            + Math.floor(y / 400) // plus years divisible by 400
	            - 460; // leap days in previous 1900 years
	        return 365 * (y - 1899) + leapDays;
	    };
	    DateTimeConverter.prototype.toExcelDate = function (d) {
	        var time = (((d.getHours() * 60 + d.getMinutes()) * 60 + d.getSeconds()) * 1000 + d.getMilliseconds()) / $$_DAY_MILLISECONDS;
	        var days = this.daysOfPriorYears(d.getFullYear()) + this.daysOfYear(d);
	        var v = days + time;
	        if (v >= 60)
	            v++; // ?
	        return v;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DateTimeConverter.prototype.splitWords = function (str) {
	        var len = str.length;
	        var words = [];
	        var p = 0;
	        var i = 0;
	        var c = str.charAt(i++);
	        while (i < len) {
	            var c2 = str.charAt(i);
	            if (c2 != c) {
	                words.push(str.substring(p, i));
	                c = c2;
	                p = i;
	            }
	            i++;
	        }
	        if (p < len) {
	            words.push(str.substr(p));
	        }
	        return words;
	    };
	    DateTimeConverter.prototype.parseDateFormatTokens = function (format) {
	        var tokens = [];
	        var str = format && format.trim();
	        if (str) {
	            var len = str.length;
	            var i = 0;
	            while (i < len) {
	                var c = str.charAt(i);
	                if ($$_DATE_SEPARATORS.indexOf(c) >= 0) {
	                    tokens.push(c);
	                    i++;
	                }
	                else {
	                    var p_1 = i++;
	                    while (i < len && str.charAt(i) == c) {
	                        i++;
	                    }
	                    c = str.substring(p_1, i);
	                    if ($$_DATE_TOKENS.indexOf(c) < 0) {
	                        throw new Error("Invalid datetime read format: " + format);
	                    }
	                    tokens.push(c == "A" ? "a" : c);
	                }
	                if (i < len && Utils_1.Utils.isWhiteSpace(c = str.charAt(i))) {
	                    tokens.push(" ");
	                    while (i < len && Utils_1.Utils.isWhiteSpace(str.charAt(i))) {
	                        i++;
	                    }
	                }
	            }
	            var tokens2 = [];
	            var p = 0;
	            len = tokens.length;
	            for (i = 0; i < len; i++) {
	                var c = tokens[i];
	                if (c == "a" || $$_DATE_TOKENS.indexOf(c) < 0) {
	                    if (p > 1) {
	                        tokens2.push("E");
	                    }
	                    tokens2.push(c);
	                    p = 0;
	                }
	                else {
	                    if (p == 1) {
	                        tokens2.splice(tokens2.length - 2, 0, "L");
	                    }
	                    tokens2.push(c);
	                    p++;
	                }
	            }
	            tokens = tokens2;
	        }
	        return tokens;
	    };
	    DateTimeConverter.prototype.parseDateValueTokens = function (date, amStr, pmStr) {
	        var tokens = [];
	        var str = date.trim();
	        if (str) {
	            var ampms = $$_AMPMS.slice();
	            amStr && ampms.push(amStr);
	            pmStr && ampms.push(pmStr);
	            var len = str.length;
	            var i = 0;
	            while (i < len) {
	                var c = str.charAt(i);
	                if ($$_DATE_SEPARATORS.indexOf(c) >= 0) {
	                    tokens.push(c);
	                    i++;
	                }
	                else if (c.charCodeAt(0) >= $$_ZERO_CHAR && c.charCodeAt(0) <= $$_NINE_CHAR) {
	                    var p = i++;
	                    while (i < len && str.charCodeAt(i) >= $$_ZERO_CHAR && str.charCodeAt(i) <= $$_NINE_CHAR) {
	                        i++;
	                    }
	                    c = str.substring(p, i);
	                    tokens.push(c);
	                }
	                else {
	                    var idx = -1;
	                    var j = 0;
	                    for (; j < ampms.length; j++) {
	                        if (str.indexOf(ampms[j], i) == i) {
	                            idx = j;
	                            break;
	                        }
	                    }
	                    if (idx < 0) {
	                        throw "Invalid date value: " + str;
	                    }
	                    tokens.push(ampms[j]);
	                    i += ampms[j].length;
	                }
	                if (i < len && Utils_1.Utils.isWhiteSpace(c = str.charAt(i))) {
	                    tokens.push(" ");
	                    while (i < len && Utils_1.Utils.isWhiteSpace(str.charAt(i))) {
	                        i++;
	                    }
	                }
	            }
	        }
	        return tokens;
	    };
	    DateTimeConverter.prototype.validateDateFormat = function (format) {
	        format = format && format.trim();
	        if (format) {
	            var tokens = this.parseDateFormatTokens(format);
	            /*
	             var str:String = StringUtil.trim(format);
	             var arr:Array = str.split(/[\s+|\.|\-|\/|\:]/);
	             for each (var s:String in arr) {
	             if (s && DATE_TOKENS.indexOf(s) < 0) {
	             var words:Array = splitWords(s);
	             var valid:Boolean = true;
	             for each (var w:String in words) {
	             if(DATE_TOKENS.indexOf(w) < 0) {
	             valid = false;
	             break;
	             }
	             }
	             if (!valid) {
	             throw new Error("Invalid datetime read format: " + format);
	             }
	             }
	             }
	             var ampm:Boolean = arr.indexOf("a") >= 0 || arr.indexOf("A") >= 0;
	             */
	            var ampm = tokens.indexOf("a") >= 0;
	            if (ampm && tokens.indexOf("H") >= 0) {
	                throw "Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: " + format;
	            }
	            if (tokens.indexOf("h") >= 0 && !ampm) {
	                throw "Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: " + format;
	            }
	        }
	    };
	    DateTimeConverter.prototype.parse = function (fmt) {
	        this._amText = "am";
	        this._pmText = "pm";
	        this._baseYear = 2000;
	        this._preserveTime = false;
	        if (fmt) {
	            var arr = fmt.split(";");
	            this._format = arr[0] ? arr[0] : DateTimeConverter.DEFAULT_FORMAT;
	            this.validateDateFormat(this._format);
	            if (arr.length > 1 && arr[1]) {
	                this._baseYear = parseInt(arr[1]);
	            }
	            if (arr.length > 2 && arr[2]) {
	                var ampms = arr[2].split(",");
	                this._amText = ampms[0] ? ampms[0] : "am";
	                if (ampms.length > 1) {
	                    this._pmText = ampms[1] ? ampms[1] : "pm";
	                }
	            }
	            if (arr.length > 3) {
	                this._preserveTime = arr[3] ? arr[3] == "1" : false;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DateTimeConverter.DEFAULT_FORMAT = "yyyy/MM/dd";
	    DateTimeConverter.Default = new DateTimeConverter(DateTimeConverter.DEFAULT_FORMAT);
	    return DateTimeConverter;
	}());
	exports.DateTimeConverter = DateTimeConverter;
	});

	unwrapExports(DateTimeConverter_1);
	var DateTimeConverter_2 = DateTimeConverter_1.DateProperty;
	var DateTimeConverter_3 = DateTimeConverter_1.DateTimeConverter;

	var GroupedItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GroupedItemPovider.ts
	// 2019. 07. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var MergedGroupFooter = /** @class */ (function (_super) {
	    __extends(MergedGroupFooter, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MergedGroupFooter() {
	        return _super.call(this) || this;
	    }
	    return MergedGroupFooter;
	}(GridItem_1.GroupFooter));
	exports.MergedGroupFooter = MergedGroupFooter;
	var MergedGroupHeader = /** @class */ (function (_super) {
	    __extends(MergedGroupHeader, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MergedGroupHeader(level, field) {
	        var _this = _super.call(this, field) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._level = 0;
	        _this._level = level;
	        return _this;
	    }
	    Object.defineProperty(MergedGroupHeader.prototype, "groupLevel", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** groupLevel */
	        get: function () {
	            return this._level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MergedGroupHeader.prototype, "dataRow", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            var row = this.firstDataItem;
	            return row ? row.dataRow : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MergedGroupHeader.prototype, "merged", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return MergedGroupHeader;
	}(GridItem_1.GroupItemImpl));
	exports.MergedGroupHeader = MergedGroupHeader;
	/**
	    mergeMode에서는 expandedAdornments가 both인경우 header, footer 모두 존재
	                                            header인경우 header만 존재
	                                            summary인경우 footer가 위에 존재
	                                            footer인경우 footer가 아래에 존재
	                                            none인경우 header, footer가 없다.
	                    collapsedAdornments가 both인경우 header, footer모두 존재
	                                            header인경우 header만 존재
	                                            summary, footer인경우 footer만 존재.
	                                            none일수는 없다.
	    normalMode expandedAdornments가 both인경우 header, footer모두 존재
	                                    header인경우 header만 존재.
	                                    footer인경우는 존재하지 않는다.
	                                    summary인경우 footer가 위에 있으면서 expander를 가진다.
	                collapseAdornments가 both 인경우 header, footer존재
	                                    header인경우 header만 존재
	                                    footer, summary인경우 footer만 있으면서 footer가 expander를 가진다.
	                expandedAdornments, collapsedAdornments모두 none을 가질수 없다.
	*/
	var GroupedVisibleItems = /** @class */ (function (_super) {
	    __extends(GroupedVisibleItems, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupedVisibleItems(rs) {
	        var _this = _super.call(this) || this;
	        _this._fixedCount = 0;
	        _this._items = [];
	        _this._list = [];
	        _this._rs = rs;
	        return _this;
	    }
	    GroupedVisibleItems.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GroupedVisibleItems.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rs;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedVisibleItems.prototype, "count", {
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedVisibleItems.prototype, "fixedCount", {
	        get: function () {
	            return this._fixedCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedVisibleItems.prototype, "items", {
	        get: function () {
	            return this._items.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GroupedVisibleItems.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    GroupedVisibleItems.prototype.clear = function (items) {
	        if (items === void 0) { items = null; }
	        var rs = this._rs;
	        items = items || this._items;
	        for (var i = 0, cnt = items.length; i < cnt; i++) {
	            var item = items[i];
	            item["_parent"] = rs["_rootItem"];
	            item["_index"] = -1;
	            if (item instanceof GridItem_1.GroupItemImpl && item["_children"]) {
	                this.clear(item["_children"]);
	            }
	        }
	        items.splice(0, items.length);
	    };
	    GroupedVisibleItems.prototype.expand = function (group, recursive, setFlag, level) {
	        this.$_expandItem(group, recursive, setFlag, level);
	        return true;
	    };
	    GroupedVisibleItems.prototype.collapse = function (group, recursive) {
	        var rs = this._rs;
	        var items = this._items;
	        var nFooter;
	        var footer;
	        var f;
	        group["_expanded"] = false;
	        if (rs.mergeMode) {
	            var idx = group.index;
	            if (idx >= 0) {
	                items.splice(idx, 1);
	                group["_index"] = -1;
	            }
	            else {
	                idx = this.$_firstIndex(group, rs.expandedAdornments == Types.RowGroupAdornments.SUMMARY);
	                idx < 0 && (idx = this.$_firstIndex(group));
	            }
	            while (idx < items.length) {
	                var item = items[idx];
	                if (!item.isDescendantOf(group)) {
	                    break;
	                }
	                items.splice(idx, 1);
	                item["_index"] = -1;
	                if (recursive && (item instanceof GridItem_1.GroupItem || item instanceof MergedGroupFooter)) {
	                    var pItem = item instanceof GridItem_1.GroupItem ? item : item instanceof MergedGroupFooter && item.parent["_expanded"] ? item.parent : null;
	                    pItem && (pItem["_expanded"] = false);
	                }
	            }
	            switch (rs.collapsedAdornments) {
	                case Types.RowGroupAdornments.BOTH:
	                    group["_index"] = idx;
	                    items.splice(idx, 0, group);
	                    nFooter = group.footerCount;
	                    if (nFooter > 1) {
	                        footer = group.footer;
	                        f = idx + 1;
	                        items.splice(f, 0, footer);
	                        for (var i = 1; i < nFooter; i++) {
	                            items.splice(f + i, 0, group.getFooter(i));
	                        }
	                    }
	                    else {
	                        items.splice(idx + 1, 0, group.footer);
	                    }
	                    break;
	                case Types.RowGroupAdornments.FOOTER:
	                case Types.RowGroupAdornments.SUMMARY:
	                    nFooter = group.footerCount;
	                    if (nFooter > 1) {
	                        footer = group.footer;
	                        f = idx;
	                        items.splice(f, 0, footer);
	                        for (var i = 1; i < nFooter; i++) {
	                            items.splice(f + i, 0, group.getFooter(i));
	                        }
	                    }
	                    else {
	                        items.splice(idx, 0, group.footer);
	                    }
	                    break;
	                case Types.RowGroupAdornments.HEADER:
	                default:
	                    group["_index"] = idx;
	                    items.splice(idx, 0, group);
	                    break;
	            }
	        }
	        else {
	            var idx = group.index;
	            if (idx >= 0) {
	                items.splice(idx, 1);
	                group["_index"] = -1;
	            }
	            else {
	                footer = group.footer;
	                idx = footer.index;
	                nFooter = group.footerCount;
	                if (nFooter > 1) {
	                    f = idx;
	                    items.splice(f, 1);
	                    footer["_index"] = -1;
	                    for (var i = 1; i < nFooter; i++) {
	                        items[f + i]["_index"] = -1;
	                        items.splice(f + i, 1);
	                    }
	                }
	                else {
	                    items.splice(idx, 1);
	                    footer["_index"] = -1;
	                }
	            }
	            while (idx < items.length) {
	                var item = items[idx];
	                if (!item.isDescendantOf(group)) {
	                    break;
	                }
	                items.splice(idx, 1);
	                item["_index"] = -1;
	                if (recursive && (item instanceof GridItem_1.GroupItem || item instanceof GridItem_1.GroupFooter)) {
	                    var pItem = item instanceof GridItem_1.GroupItem ? item : item instanceof GridItem_1.GroupFooter && item.parent["_expanded"] ? item.parent : null;
	                    pItem && (pItem["_expanded"] = false);
	                }
	            }
	            switch (rs.collapsedAdornments) {
	                case Types.RowGroupAdornments.BOTH:
	                    group["_index"] = idx;
	                    items.splice(idx, 0, group);
	                    footer = group.footer;
	                    nFooter = group.footerCount;
	                    if (nFooter > 1) {
	                        f = idx + 1;
	                        footer["_index"] = idx;
	                        footer["_expandable"] = false;
	                        items.splice(f, 0, footer);
	                        for (var i = 1; i < nFooter; i++) {
	                            footer = group.getFooter(i);
	                            footer["_index"] = idx + i;
	                            footer["_expandable"] = false;
	                            items.splice(f + i, 0, footer);
	                        }
	                    }
	                    else {
	                        footer["_index"] = idx;
	                        footer["_expandable"] = false;
	                        items.splice(idx + 1, 0, footer);
	                    }
	                    break;
	                case Types.RowGroupAdornments.FOOTER:
	                case Types.RowGroupAdornments.SUMMARY:
	                    footer = group.footer;
	                    nFooter = group.footerCount;
	                    if (nFooter > 1) {
	                        f = idx;
	                        footer["_index"] = idx;
	                        footer["_expandable"] = true;
	                        items.splice(f, 0, footer);
	                        for (var i = 1; i < nFooter; i++) {
	                            footer = group.getFooter(i);
	                            footer["_index"] = idx + i;
	                            footer["_expandable"] = true;
	                            items.splice(f + i, 0, footer);
	                        }
	                    }
	                    else {
	                        footer["_index"] = idx;
	                        footer["_expandable"] = true;
	                        items.splice(idx, 0, footer);
	                    }
	                    break;
	                case Types.RowGroupAdornments.HEADER:
	                default:
	                    group["_index"] = idx;
	                    items.splice(idx, 0, group);
	                    break;
	            }
	        }
	        return true;
	    };
	    GroupedVisibleItems.prototype.getNext = function (item) {
	        if (item != null && item.visible && item.index < this.count - 1) {
	            return this._items[item.index + 1];
	        }
	        return null;
	    };
	    GroupedVisibleItems.prototype.getPrior = function (item) {
	        if (item != null && item.visible && item.index > 0) {
	            return this._items[item.index - 1];
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GroupedVisibleItems.prototype.$_collectChildren = function (parent, list, recursive, setFlag, level) {
	        if (setFlag && parent) {
	            parent["_setExpanded"](true);
	        }
	        if (this._rs.mergeMode) {
	            if (!(parent instanceof ItemProvider_1.RootItem)) {
	                if (this._rs.expandedAdornments == Types.RowGroupAdornments.HEADER || this._rs.expandedAdornments == Types.RowGroupAdornments.BOTH) {
	                    list.push(parent);
	                }
	                else if (this._rs.expandedAdornments == Types.RowGroupAdornments.SUMMARY && parent.footer) {
	                    list.push(parent.footer);
	                }
	            }
	            for (var i = 0, cnt = parent.count; i < cnt; i++) {
	                var item = parent.getItem(i);
	                var nFooter = void 0;
	                var footer = void 0;
	                if (item instanceof GridItem_1.GroupItem) {
	                    var group = item;
	                    if (recursive && (!level || group.level <= level) || group.expanded) {
	                        this.$_collectChildren(group, list, recursive, setFlag, level);
	                    }
	                    else {
	                        switch (this._rs.collapsedAdornments) {
	                            case Types.RowGroupAdornments.BOTH:
	                                list.push(group);
	                                footer = group.footer;
	                                if (footer) {
	                                    nFooter = group.footerCount;
	                                    if (nFooter > 1) {
	                                        footer && list.push(footer);
	                                        for (var f = 1; f < nFooter; f++) {
	                                            footer = group.getFooter(f);
	                                            list.push(footer);
	                                        }
	                                    }
	                                    else {
	                                        list.push(footer);
	                                    }
	                                }
	                                break;
	                            case Types.RowGroupAdornments.SUMMARY:
	                            case Types.RowGroupAdornments.FOOTER:
	                                footer = group.footer;
	                                if (footer) {
	                                    nFooter = group.footerCount;
	                                    if (nFooter > 1) {
	                                        list.push(footer);
	                                        for (var f = 1; f < nFooter; f++) {
	                                            footer = group.getFooter(f);
	                                            list.push(footer);
	                                        }
	                                    }
	                                    else {
	                                        list.push(footer);
	                                    }
	                                }
	                                break;
	                            case Types.RowGroupAdornments.HEADER:
	                            default:
	                                list.push(group);
	                                break;
	                            /*
	                            case ROWGROUPADORNMENTS.NONE:
	                                list.push(group.firstItem());
	                                break;
	                            */
	                        }
	                    }
	                }
	                else if (!parent.isFooter(item)) {
	                    list.push(item);
	                }
	            }
	            if (parent.footer && !(parent instanceof ItemProvider_1.RootItem) &&
	                (this._rs.expandedAdornments == Types.RowGroupAdornments.FOOTER || this._rs.expandedAdornments == Types.RowGroupAdornments.BOTH)) {
	                for (var i = 0, cnt = parent.footerCount; i < cnt; i++) {
	                    list.push(parent.getFooter(i));
	                }
	            }
	        }
	        else {
	            if (!(parent instanceof ItemProvider_1.RootItem)) {
	                if (this._rs.expandedAdornments == Types.RowGroupAdornments.SUMMARY) {
	                    var footer = parent.footer;
	                    if (footer) {
	                        var nFooter = parent.footerCount;
	                        var f = parent.indexOf(footer);
	                        footer["_expandable"] = true;
	                        list.push(footer);
	                        for (var i = 1; i < nFooter; i++) {
	                            footer = parent.getItem(f + i);
	                            footer["_expandable"] = true;
	                            list.push(footer);
	                        }
	                    }
	                }
	                else {
	                    list.push(parent);
	                }
	            }
	            for (var i = 0, cnt = parent.count; i < cnt; i++) {
	                var item = parent.getItem(i);
	                if (item instanceof GridItem_1.GroupItem) {
	                    var group = item;
	                    var footer = void 0;
	                    var nFooter = void 0;
	                    if (recursive && (!level || group.level <= level) || group.expanded) {
	                        this.$_collectChildren(group, list, recursive, setFlag, level);
	                    }
	                    else {
	                        switch (this._rs.collapsedAdornments) {
	                            case Types.RowGroupAdornments.HEADER:
	                                list.push(group);
	                                break;
	                            case Types.RowGroupAdornments.FOOTER:
	                            case Types.RowGroupAdornments.SUMMARY:
	                                footer = parent.footer;
	                                if (footer) {
	                                    nFooter = parent.footerCount;
	                                    footer["_expandable"] = true;
	                                    list.push(footer);
	                                    if (nFooter > 1) {
	                                        var f = parent.indexOf(footer);
	                                        for (var i_1 = 1; i_1 < nFooter; i_1++) {
	                                            footer = parent.getItem(f + i_1);
	                                            footer["_expandable"] = true;
	                                            list.push(footer);
	                                        }
	                                    }
	                                }
	                                break;
	                            case Types.RowGroupAdornments.BOTH:
	                            default:
	                                list.push(group);
	                                footer = parent.footer;
	                                if (footer) {
	                                    nFooter = parent.footerCount;
	                                    footer["_expandable"] = true;
	                                    list.push(footer);
	                                    if (nFooter > 1) {
	                                        var f = parent.indexOf(footer);
	                                        for (var i_2 = 1; i_2 < nFooter; i_2++) {
	                                            footer = parent.getItem(f + i_2);
	                                            footer["_expandable"] = true;
	                                            list.push(footer);
	                                        }
	                                    }
	                                }
	                                break;
	                        }
	                    }
	                }
	                else if (!(item instanceof GridItem_1.GroupFooter)) { // footer는 제일 마지막에
	                    list.push(item);
	                }
	            }
	            if (!(parent instanceof ItemProvider_1.RootItem)) {
	                if (this._rs.expandedAdornments == Types.RowGroupAdornments.BOTH) {
	                    var expandable = (parent["_expanded"] || parent.visible) ? false : true;
	                    var footer = parent.footer;
	                    if (footer) {
	                        var nFooter = parent.footerCount;
	                        footer["_expandable"] = expandable;
	                        list.push(footer);
	                        if (nFooter > 1) {
	                            var f = parent.indexOf(footer);
	                            for (var i = 1; i < nFooter; i++) {
	                                footer = parent.getItem(f + i);
	                                footer["_expandable"] = expandable;
	                                list.push(footer);
	                            }
	                        }
	                    }
	                }
	            }
	        }
	    };
	    GroupedVisibleItems.prototype.$_expandItem = function (group, recursive, setFlag, level) {
	        var idx;
	        if (group instanceof ItemProvider_1.RootItem) {
	            idx = this._fixedCount;
	        }
	        else if (this._rs.mergeMode) {
	            /*
	             * 현재, collapsed 상태에서만 여기가 호출된다고 가정한다.
	             * group item 이 포함되지 않는 경우가 있다.
	             * collapsed style 별로 기존 아이템들을 제거한다.
	             */
	            switch (this._rs.collapsedAdornments) {
	                case Types.RowGroupAdornments.BOTH:
	                    idx = group.index;
	                    this._items.splice(idx, 1 + group.footerCount);
	                    break;
	                case Types.RowGroupAdornments.FOOTER:
	                case Types.RowGroupAdornments.SUMMARY:
	                    idx = group.footer.index;
	                    this._items.splice(idx, group.footerCount);
	                    break;
	                case Types.RowGroupAdornments.HEADER:
	                default:
	                    idx = group.index;
	                    this._items.splice(idx, 1);
	                    break;
	            }
	            if (setFlag) {
	                group["_index"] = -1;
	            }
	        }
	        else {
	            switch (this._rs.collapsedAdornments) {
	                case Types.RowGroupAdornments.BOTH:
	                    idx = group.index;
	                    this._items.splice(idx, 1 + group.footerCount);
	                    break;
	                case Types.RowGroupAdornments.FOOTER:
	                case Types.RowGroupAdornments.SUMMARY:
	                    idx = group.footer.index;
	                    this._items.splice(idx, group.footerCount);
	                    break;
	                case Types.RowGroupAdornments.HEADER:
	                    idx = group.index;
	                    this._items.splice(idx, 1);
	                    break;
	            }
	            // if (this._rs.collapsedAdornments() == RowGroupAdornments.FOOTER) {
	            // 	idx = group.footer().index();
	            // 	_items.splice(idx,1);
	            // } else {
	            // 	idx = group.index();
	            // 	 * 현재, collapsed 상태에서만 여기가 호출된다고 가정한다.
	            // 	 * 기존 group header와 footer를 제거한다.
	            // 	_items.splice(idx, 1);
	            // 	let collapsedAdornment = this._rs.collapsedAdornments();
	            // 	if (collapsedAdornment == RowGroupAdornments.BOTH || collapsedAdornment == RowGroupAdornments.FOOTER) {
	            // 		_items.splice(idx, 1);
	            // 	}
	            // }
	            if (setFlag) {
	                group["_index"] = -1;
	            }
	        }
	        this._list.splice(0, this._list.length);
	        this.$_collectChildren(group, this._list, recursive, setFlag, level);
	        for (var i = 0, cnt = this._list.length; i < cnt; i++) {
	            this._items.splice(idx + i, 0, this._list[i]);
	        }
	    };
	    GroupedVisibleItems.prototype.$_firstIndex = function (group, isSummary) {
	        if (isSummary === void 0) { isSummary = false; }
	        var idx = group.index;
	        if (idx >= 0) {
	            return idx;
	        }
	        if (isSummary) {
	            idx = group.footer.index;
	            if (idx >= 0) {
	                return idx;
	            }
	            for (var i = 0, cnt = group.count; i < cnt; i++) {
	                var g = Utils_1.Utils.cast(group.getItem(i), GridItem_1.GroupItem);
	                if (g) {
	                    idx = this.$_firstIndex(g, isSummary);
	                }
	                if (idx >= 0) {
	                    return idx;
	                }
	            }
	            return -1;
	        }
	        for (var i = 0, cnt = group.count; i < cnt; i++) {
	            var item = group.getItem(i);
	            if (item.index >= 0) {
	                return item.index;
	            }
	            var g = Utils_1.Utils.cast(item, GridItem_1.GroupItem);
	            if (g) {
	                idx = this.$_firstIndex(g);
	                if (idx >= 0) {
	                    return idx;
	                }
	            }
	        }
	        return -1;
	    };
	    GroupedVisibleItems.prototype.$_clearAndInit = function (source, fixedCount) {
	        this.clear();
	        if (source) {
	            this._fixedCount = Math.min(fixedCount, source.itemCount);
	            for (var i = 0; i < this._fixedCount; i++) {
	                this._items.push(source.getItem(i));
	            }
	        }
	        else {
	            this._fixedCount = 0;
	        }
	    };
	    GroupedVisibleItems.prototype.$_resetIndices = function (fromIndex) {
	        if (fromIndex === void 0) { fromIndex = 0; }
	        for (var i = fromIndex, cnt = this._items.length; i < cnt; i++) {
	            this._items[i]["_index"] = i;
	        }
	    };
	    return GroupedVisibleItems;
	}(Base_1.Base));
	var GroupInfo = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupInfo(startIndex, endIndex) {
	        this.startIndex = startIndex;
	        this.endIndex = endIndex;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        this.level = 0;
	        this.children = [];
	    }
	    return GroupInfo;
	}());
	var GroupedItemProvider = /** @class */ (function (_super) {
	    __extends(GroupedItemProvider, _super);
	    //private _groupList: { [key: number]: GroupItem};
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupedItemProvider(source, indexing) {
	        var _this = _super.call(this, source, indexing) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._treeMode = false;
	        _this._expandedAdornments = Types.RowGroupAdornments.BOTH;
	        _this._collapsedAdornments = Types.RowGroupAdornments.HEADER;
	        _this._expandWhenGrouping = false;
	        _this._mergeMode = false;
	        _this._summaryMode = Types.SummaryMode.AGGREGATE;
	        _this._groupSorting = true;
	        _this._sortDirection = Types.SortDirection.ASCENDING;
	        _this._summarizing = false;
	        _this._grouped = false;
	        return _this;
	    }
	    GroupedItemProvider.prototype._doDispose = function () {
	        //this._groupList = null;
	        this._visibleItems.dispose();
	        this._visibleItems = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // GroupFooterCounterOwner
	    //-------------------------------------------------------------------------
	    GroupedItemProvider.prototype.groupfFooterCounterChanged = function (count) {
	        this.$_footerCounterChanged();
	    };
	    GroupedItemProvider.prototype.$_footerCounterChanged = function () {
	        this._populateItems();
	        this._fireRefresh();
	    };
	    Object.defineProperty(GroupedItemProvider.prototype, "treeMode", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** treeMode */
	        get: function () {
	            return this._treeMode;
	        },
	        set: function (value) {
	            this._treeMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "footerCounter", {
	        /** footerCounter */
	        get: function () {
	            return this._footerCounter;
	        },
	        set: function (value) {
	            if (value != this._footerCounter) {
	                value && value.setCounterAware(null);
	                this._footerCounter = value;
	                value && value.setCounterAware(this);
	                this.$_footerCounterChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "expandedAdornments", {
	        /** expandedAdornments */
	        get: function () {
	            return this._expandedAdornments;
	        },
	        set: function (value) {
	            if (value != this._expandedAdornments) {
	                this._expandedAdornments = value;
	                if (this.grouped) {
	                    this._populateItems();
	                    this._fireRefresh();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "collapsedAdornments", {
	        /** collapsedAdornments */
	        get: function () {
	            return this._collapsedAdornments;
	        },
	        set: function (value) {
	            if (value != this._collapsedAdornments) {
	                this._collapsedAdornments = value;
	                if (this.grouped) {
	                    this._populateItems();
	                    this._fireRefresh();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GroupedItemProvider.prototype.resetAdornments = function (expanded, collapsed, footerCallback) {
	        if (expanded != this._expandedAdornments || collapsed != this._collapsedAdornments || footerCallback !== this._footerCallback) {
	            this._expandedAdornments = expanded;
	            this._collapsedAdornments = collapsed;
	            this._footerCallback = footerCallback;
	            if (this.grouped) {
	                this._populateItems();
	                this._fireRefresh();
	            }
	        }
	    };
	    Object.defineProperty(GroupedItemProvider.prototype, "expandWhenGrouping", {
	        /** expandWhenGrouping */
	        get: function () {
	            return this._expandWhenGrouping;
	        },
	        set: function (value) {
	            this._expandWhenGrouping = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "mergeMode", {
	        /** mergeMode */
	        get: function () {
	            return this._mergeMode;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "summaryMode", {
	        // set mergeMode(value: boolean) {
	        // 	if (value != this._mergeMode) {
	        // 		this._mergeMode = value;
	        // 		if (!value) {
	        // 			this._clearDisplayLevels();
	        // 		}
	        // 		this._populateItems();
	        // 		this._fireRefresh();
	        // 	}
	        // }
	        /** summaryMode */
	        get: function () {
	            return this._summaryMode;
	        },
	        set: function (value) {
	            if (value != this._summaryMode) {
	                this._summaryMode = value;
	                this._populateItems();
	                this._fireRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "grouped", {
	        /** grouped */
	        get: function () {
	            return this._grouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "groupCount", {
	        // get groupList(): { [key: number]: GroupItem} {
	        // 	return this._groupList;
	        // }
	        get: function () {
	            return this._groupFields ? this._groupFields.length : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupedItemProvider.prototype, "groupSorting", {
	        get: function () {
	            return this._groupSorting;
	        },
	        set: function (value) {
	            if (this._groupSorting != value) {
	                this._groupSorting = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GroupedItemProvider.prototype.canGrouping = function (fields) {
	        return this.fireGrouping(fields);
	    };
	    GroupedItemProvider.prototype.groupBy = function (fields) {
	        this.groupByMode(fields, this._mergeMode);
	    };
	    GroupedItemProvider.prototype.groupByMode = function (fields, mergeMode) {
	        this._mergeMode = mergeMode;
	        this._groupFields = fields ? fields.concat() : null;
	        if (!mergeMode) {
	            this._clearDisplayLevels();
	        }
	        this._populateItems();
	        try {
	            this._fireRefresh();
	        }
	        finally {
	            this.fireGrouped(fields);
	        }
	    };
	    GroupedItemProvider.prototype.isGroupedField = function (field) {
	        if (this._groupFields) {
	            for (var i = this._groupFields.length; i--;) {
	                if (this._groupFields[i] == field) {
	                    return true;
	                }
	            }
	        }
	        return false;
	    };
	    GroupedItemProvider.prototype.getGroupLevel = function (field) {
	        if (this._groupFields && field >= 0) {
	            for (var i = this._groupFields.length; i--;) {
	                if (this._groupFields[i] == field) {
	                    return i + 1;
	                }
	            }
	        }
	        return 0;
	    };
	    Object.defineProperty(GroupedItemProvider.prototype, "groupedFields", {
	        get: function () {
	            return this._groupFields ? this._groupFields.concat() : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GroupedItemProvider.prototype.expand = function (group, recursive, force, level) {
	        if (group && (!group.expanded || force)) {
	            this.fireExpand(group);
	            if (group.expanded) {
	                this._visibleItems.collapse(group, false);
	            }
	            if (this._visibleItems.expand(group, recursive, true, level)) {
	                this._resetItemIndicies(group.index);
	                try {
	                    this._fireRefresh();
	                }
	                finally {
	                    this.fireExpanded(group);
	                }
	            }
	        }
	    };
	    // 상위 group이 접혀있는 경우 하위 그룹도 접혀있는 상태로 만들기 위해서 사용한다.
	    // 반드시 상위 group이 접혀있어야 한다.
	    GroupedItemProvider.prototype.$_collapseChild = function (group, recursive, force) {
	        for (var i = 0, cnt = group.count; i < cnt; i++) {
	            var child = group.getItem(i);
	            if (child instanceof GridItem_1.GroupItemImpl) {
	                child["_expanded"] = false;
	                this.$_collapseChild(child, recursive, force);
	            }
	        }
	    };
	    GroupedItemProvider.prototype.collapse = function (group, recursive, force) {
	        if (!group || !group.expanded) {
	            if (group && recursive && force) {
	                this.$_collapseChild(group, recursive, force);
	            }
	            return;
	        }
	        this.fireCollapse(group);
	        if (this._visibleItems.collapse(group, recursive)) {
	            this._resetItemIndicies(group.index);
	            try {
	                this._fireRefresh();
	            }
	            finally {
	                this.fireCollapsed(group);
	            }
	        }
	    };
	    GroupedItemProvider.prototype.findItem = function (fields, values, options, startIndex, endIndex) {
	        var ds = this.dataSource;
	        if (!ds) {
	            return -1;
	        }
	        var rows = this.itemCount;
	        if (rows < 1) {
	            return -1;
	        }
	        var flds = Math.min(fields.length, values.length);
	        if (flds < 1) {
	            return -1;
	        }
	        var all = !options || options.allFields;
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var dateConvert = null;
	        var fieldTypes = [];
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(rows - 1, endIndex);
	        for (var c = 0; c < flds; c++) {
	            fieldTypes[c] = ds.getField(fields[c]).dataType;
	        }
	        for (var i = startIndex; i <= endIndex; i++) {
	            var item = this.$_getItem(i);
	            var found = item.dataRow >= 0;
	            if (found) {
	                for (var c = 0; c < flds; c++) {
	                    var v = item.getData(fields[c]);
	                    switch (fieldTypes[c]) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.DATE:
	                            if (values[c] instanceof Date) {
	                                found = $$_compareTextValue(values[c], v, sensitive, partial);
	                            }
	                            else {
	                                if (!dateConvert) {
	                                    var fmt = /[.]/.test(values[c]) ? "yyyy.MM.dd" : /[/]/.test(values[c]) ? "yyyy/MM/dd" : /[-]/.test(values[c]) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                    dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                }
	                                found = $$_compareTextValue(values[c], v ? dateConvert.getText(v) : v, sensitive, partial);
	                            }
	                            break;
	                        default:
	                            found = $$_compareTextValue(values[c], v, sensitive, partial);
	                            break;
	                    }
	                    if (found && !all) {
	                        return i;
	                    }
	                    if (!found && all) {
	                        break;
	                    }
	                }
	            }
	            if (found) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    GroupedItemProvider.prototype.findCell = function (fields, value, options, startIndex, endIndex, startFieldIndex) {
	        var ds = this.dataSource;
	        if (!ds) {
	            return null;
	        }
	        var rows = this.itemCount;
	        if (rows < 1) {
	            return null;
	        }
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var fldCount = this.dataSource.fieldCount;
	        var fldLen = fields.length;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < fldCount; c++) {
	            fieldTypes[c] = ds.getField(c).dataType;
	        }
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(rows - 1, endIndex);
	        startFieldIndex = Math.max(0, startFieldIndex);
	        if (startFieldIndex >= fields.length) {
	            startIndex++;
	            startFieldIndex = 0;
	        }
	        for (var i = startIndex; i <= endIndex; i++) {
	            var item = this.$_getItem(i);
	            if (item.dataRow >= 0) {
	                var c = (i > startIndex) ? 0 : startFieldIndex;
	                for (; c < fldLen; c++) {
	                    var f = fields[c];
	                    if (f >= 0 && f < fldCount) {
	                        var v = item.getData(f);
	                        var found = false;
	                        switch (fieldTypes[f]) {
	                            case Types.ValueType.DATETIME:
	                            case Types.ValueType.DATE:
	                                if (value instanceof Date) {
	                                    found = $$_compareTextValue(value, v, sensitive, partial);
	                                }
	                                else {
	                                    if (!dateConvert) {
	                                        var fmt = /[.]/.test(value) ? "yyyy.MM.dd" : /[/]/.test(value) ? "yyyy/MM/dd" : /[-]/.test(value) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                        dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                    }
	                                    found = $$_compareTextValue(value, v ? dateConvert.getText(v) : v, sensitive, partial);
	                                }
	                                break;
	                            default:
	                                found = $$_compareTextValue(value, v, sensitive, partial);
	                                break;
	                        }
	                        if (found) {
	                            return {
	                                itemIndex: i,
	                                fieldIndex: f,
	                                searchFieldIndex: c
	                            };
	                        }
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    Object.defineProperty(GroupedItemProvider.prototype, "itemCount", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._grouped ? this._visibleItems.count : this.source.itemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GroupedItemProvider.prototype.getItem = function (index) {
	        if (this.grouped) {
	            if (index >= 0 && index < this._visibleItems.count) {
	                return this._visibleItems.getItem(index);
	            }
	            else {
	                return null;
	            }
	        }
	        else {
	            return this.source.getItem(index);
	        }
	    };
	    GroupedItemProvider.prototype.getItems = function (index, count) {
	        if (this.grouped) {
	            var vitems = this._visibleItems;
	            var items = [];
	            var end = Math.min(vitems.count, index + count - 1);
	            for (var i = index; i < end; i++) {
	                var item = vitems.getItem(i);
	                items.push(item);
	            }
	            return items;
	        }
	        else {
	            return this.source.getItems(index, count);
	        }
	    };
	    GroupedItemProvider.prototype.getAllItems = function () {
	        if (this.grouped) {
	            var items = new GroupedVisibleItems(this);
	            items.expand(this.rootItem, true, false, 0);
	            return items.items;
	        }
	        else if (this.source) {
	            return this.source.getAllItems();
	        }
	        else {
	            return null;
	        }
	    };
	    GroupedItemProvider.prototype.getIndexOfRow = function (dataRow) {
	        if (this.grouped) {
	            var vitems = this._visibleItems;
	            for (var i = 0, cnt = vitems.count; i < cnt; i++) {
	                if (vitems.getItem(i).dataRow == dataRow) {
	                    return i;
	                }
	            }
	            return -1;
	        }
	        else {
	            return this.source.getIndexOfRow(dataRow);
	        }
	    };
	    GroupedItemProvider.prototype.getItemOfRow = function (dataRow) {
	        if (this.grouped) {
	            var vitems = this._visibleItems;
	            for (var i = 0, cnt = vitems.count; i < cnt; i++) {
	                var item = vitems.getItem(i);
	                if (item.dataRow == dataRow) {
	                    return item;
	                }
	            }
	            return null;
	        }
	        else {
	            return this.source.getItemOfRow(dataRow);
	        }
	    };
	    GroupedItemProvider.prototype._initialize = function () {
	        _super.prototype._initialize.call(this);
	        this._visibleItems = new GroupedVisibleItems(this);
	    };
	    GroupedItemProvider.prototype._clearItems = function () {
	        this._visibleItems.clear();
	        this.rootItem.clear();
	        //this._groupList = {};
	    };
	    GroupedItemProvider.prototype._populateItems = function () {
	        this.$_populateItems(false);
	    };
	    GroupedItemProvider.prototype._resetItemIndicies = function (fromIndex) {
	        if (this.isIndexing && this.grouped) {
	            this._visibleItems["$_resetIndices"](fromIndex);
	        }
	        else {
	            _super.prototype._resetItemIndicies.call(this, fromIndex);
	        }
	    };
	    GroupedItemProvider.prototype._clearChecked = function () {
	        if (this.grouped) {
	            this.$_checkChildren(this.rootItem, false, false, false);
	        }
	        else {
	            _super.prototype._clearChecked.call(this);
	        }
	        this._editItem && this._editItem["_setChecked"](false);
	    };
	    GroupedItemProvider.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent, groupCheckable) {
	        if (this._editItem) {
	            if (checkableOnly) {
	                this._editItem.checkable && this._editItem["_setChecked"](checked);
	            }
	            else {
	                this._editItem["_setChecked"](checked);
	            }
	        }
	        if (visibleOnly || !this.grouped) {
	            _super.prototype.checkAll.call(this, checked, visibleOnly, checkableOnly, checkEvent, groupCheckable);
	        }
	        else {
	            var cnt = this._visibleItems.fixedCount;
	            if (cnt > 0) {
	                if (checkableOnly) {
	                    for (var i = cnt; i--;) {
	                        var item = this.getItem(i);
	                        item.checkable && item["_setChecked"](checked);
	                    }
	                }
	                else {
	                    for (var i = cnt; i--;) {
	                        this.getItem(i)["_setChecked"](checked);
	                    }
	                }
	            }
	            this.$_checkChildren(this.rootItem, checked, checkableOnly, groupCheckable);
	            this._fireItemCheckChanged(null, checked);
	            checkEvent ? this._fireItemAllChecked(checked) : this._fireRefreshClient();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    // dataRowId의 경우 해당 row가 삭제되기 전까지는 값을 유지한다.
	    GroupedItemProvider.prototype.$_saveExpand = function (parent, map) {
	        for (var i = 0, cnt = parent.count; i < cnt; i++) {
	            var child = parent.getItem(i);
	            if (child instanceof GridItem_1.GroupItemImpl || child instanceof MergedGroupHeader) ;
	        }
	    };
	    GroupedItemProvider.prototype.$_restoreExpand = function (parent, map) {
	        for (var i = 0, cnt = parent.count; i < cnt; i++) {
	            var child = parent.getItem(i);
	            if (child instanceof GridItem_1.GroupItemImpl || child instanceof MergedGroupHeader) ;
	        }
	    };
	    GroupedItemProvider.prototype.$_populateItems = function (saveExpand) {
	        var expandMap = {};
	        var srcCount = this.source.itemCount;
	        var root = this["_rootItem"];
	        saveExpand && srcCount > 0 && root && this.$_saveExpand(root, expandMap);
	        this._clearItems();
	        if (!this.source) {
	            return;
	        }
	        if (this._groupFields) {
	            var fieldCount = this.dataSource.fieldCount;
	            for (var i = this._groupFields.length - 1; i >= 0; i--) {
	                if (this._groupFields[i] >= fieldCount) {
	                    this._groupFields.splice(i, 1);
	                }
	            }
	            this._grouped = this._groupFields.length > 0;
	        }
	        else {
	            this._grouped = false;
	        }
	        if (this._grouped && srcCount > 0) {
	            this.$_buildGroupItems(srcCount);
	            saveExpand && this.$_restoreExpand(root, expandMap);
	            this.$_resetVisibleItems();
	        }
	    };
	    GroupedItemProvider.prototype.$_checkChildren = function (p, checked, checkableOnly, groupCheckable) {
	        for (var i = 0, cnt = p.count; i < cnt; i++) {
	            var item = p.getItem(i);
	            if (item) {
	                if (checkableOnly) {
	                    (groupCheckable || item.isDataRow) && item.checkable && item["_setChecked"](checked);
	                }
	                else {
	                    item["_setChecked"](checked);
	                }
	            }
	            if (item instanceof GridItem_1.GroupItem) {
	                this.$_checkChildren(item, checked, checkableOnly, groupCheckable);
	            }
	        }
	    };
	    GroupedItemProvider.prototype.$_getItem = function (index) {
	        return this._grouped ? this._visibleItems.getItem(index) : this.source.getItem(index);
	    };
	    GroupedItemProvider.prototype.$_resetVisibleItems = function () {
	        this._visibleItems["$_clearAndInit"](this.source, this.fixedCount);
	        if (this.source) {
	            if (this.source.itemCount > this._visibleItems.fixedCount) {
	                this._visibleItems.expand(this.rootItem, false, false, 0);
	            }
	        }
	        this._resetItemIndicies(0);
	    };
	    GroupedItemProvider.prototype.$_buildGroupItems = function (sourceCount) {
	        if (sourceCount > this.fixedCount) {
	            var ginfo = new GroupInfo(this.fixedCount, sourceCount - 1);
	            this.$_buildGroups(ginfo, this.source, this._groupFields);
	            //this._groupList = {};
	            this.$_buildItems(this.rootItem, ginfo, this._groupFields);
	            if (this.mergeMode) {
	                this._clearDisplayLevels();
	                this.$_resetDisplayLevels(this.rootItem);
	            }
	        }
	    };
	    GroupedItemProvider.prototype.$_resetDisplayLevels = function (group) {
	        for (var i = 0, cnt = group.count; i < cnt; i++) {
	            var g = Utils_1.Utils.cast(group.getItem(i), GridItem_1.GroupItem);
	            if (g) {
	                var row = Utils_1.Utils.cast(g.firstItem, GridItem_1.GridRow);
	                if (row && row._displayLevel < 0) {
	                    row._displayLevel = g.level;
	                }
	                this.$_resetDisplayLevels(g);
	            }
	        }
	    };
	    GroupedItemProvider.prototype.$_buildGroups = function (parent, source, groupFields) {
	        if (groupFields.length <= parent.level) {
	            return;
	        }
	        var startIndex = parent.startIndex;
	        var endIndex = parent.endIndex;
	        if (endIndex < startIndex) {
	            return;
	        }
	        var level = parent.level + 1;
	        var field = groupFields[parent.level];
	        var fld = this.dataSource.getField(field);
	        var ginfo = new GroupInfo(startIndex, startIndex);
	        ginfo.level = level;
	        parent.children.push(ginfo);
	        var priorVal = source.getItem(startIndex).getData(field);
	        for (var i = startIndex + 1; i <= endIndex; i++) {
	            var val = source.getItem(i).getData(field);
	            if (!fld.equalValues(val, priorVal)) {
	                if (ginfo) {
	                    ginfo.endIndex = i - 1;
	                }
	                ginfo = new GroupInfo(i, i);
	                ginfo.level = level;
	                parent.children.push(ginfo);
	            }
	            priorVal = val;
	        }
	        if (ginfo) {
	            ginfo.endIndex = endIndex;
	        }
	        for (var i = 0, cnt = parent.children.length; i < cnt; i++) {
	            this.$_buildGroups(parent.children[i], source, groupFields);
	        }
	    };
	    GroupedItemProvider.prototype.$_buildItems = function (parent, info, groupFields) {
	        var mergeMode = this.mergeMode;
	        var cnt = info.children.length;
	        if (cnt > 0) {
	            var level_1 = info.level;
	            var field = groupFields[info.level];
	            for (var i = 0; i < cnt; i++) {
	                var group = mergeMode ? new MergedGroupHeader(level_1, field) : new GridItem_1.GroupItemImpl(field);
	                //this._groupList[group.id] = group;
	                group["_setExpanded"](this.expandWhenGrouping);
	                parent.add(group);
	                this.$_buildItems(group, info.children[i], groupFields);
	            }
	        }
	        else {
	            var rows = info.endIndex - info.startIndex + 1;
	            var items = this.source.getItems(info.startIndex, rows);
	            parent.addAll(items);
	            this._incDescendents(parent, rows);
	        }
	        var level = parent.level;
	        if (level > 0) { // excepts root
	            var cb = this._footerCallback;
	            if (this._footerCounter) {
	                for (var i = 0, cnt_1 = this._footerCounter.getGroupFooterCount(parent); i < cnt_1; i++) {
	                    if (!cb || cb(parent, i)) {
	                        var footer = mergeMode ? new MergedGroupFooter() : new GridItem_1.GroupFooter();
	                        footer["$_footerIndex"] = i;
	                        parent.add(footer);
	                    }
	                }
	            }
	            else {
	                if (cb || cb(parent, 0)) {
	                    var footer = mergeMode ? new MergedGroupFooter() : new GridItem_1.GroupFooter();
	                    parent.add(footer);
	                }
	            }
	        }
	    };
	    GroupedItemProvider.prototype.$_setEditItem = function (item) {
	        this._editItem = item;
	    };
	    GroupedItemProvider.prototype.$_setDummyEditItem = function (item) {
	        this["_dummyEditItem"] = item;
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    GroupedItemProvider.prototype.fireGrouping = function (fields) {
	        return this.fireConfirmEvent(GroupedItemProvider.GROUPING, fields);
	    };
	    GroupedItemProvider.prototype.fireGrouped = function (fields) {
	        this.fireEvent(GroupedItemProvider.GROUPED);
	    };
	    GroupedItemProvider.prototype.fireExpand = function (group) {
	        this.fireEvent(GroupedItemProvider.EXPAND, group);
	    };
	    GroupedItemProvider.prototype.fireExpanded = function (group) {
	        this.fireEvent(GroupedItemProvider.EXPANDED, group);
	    };
	    GroupedItemProvider.prototype.fireCollapse = function (group) {
	        this.fireEvent(GroupedItemProvider.COLLAPSE, group);
	    };
	    GroupedItemProvider.prototype.fireCollapsed = function (group) {
	        this.fireEvent(GroupedItemProvider.COLLAPSED, group);
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    GroupedItemProvider.prototype.onItemProviderRefresh = function (rs) {
	        if (this.grouped) {
	            this.$_populateItems(true);
	            this._fireRefresh();
	        }
	        else {
	            this._resetItemIndicies(0);
	            _super.prototype.onItemProviderRefresh.call(this, rs);
	        }
	    };
	    GroupedItemProvider.prototype.onItemProviderItemInserted = function (rs, item) {
	        if (this.grouped) {
	            this.$_populateItems(true);
	            this._fireRefresh();
	        }
	        else {
	            this._resetItemIndicies(0);
	            _super.prototype.onItemProviderItemInserted.call(this, rs, item);
	        }
	    };
	    GroupedItemProvider.prototype.onItemProviderItemDeleted = function (rs, item) {
	        if (this.grouped) {
	            this.$_populateItems(true);
	            this._fireRefresh();
	        }
	        else {
	            this._resetItemIndicies(0);
	            _super.prototype.onItemProviderItemDeleted.call(this, rs, item);
	        }
	    };
	    GroupedItemProvider.prototype.onItemProviderItemUpdated = function (rs, item) {
	        if (this.grouped) {
	            this.$_populateItems(true);
	            this._fireRefresh();
	        }
	        else {
	            this._resetItemIndicies(0);
	            _super.prototype.onItemProviderItemUpdated.call(this, rs, item);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GroupedItemProvider.GROUPING = "onGroupedItemProviderGrouping";
	    GroupedItemProvider.GROUPED = "onGroupedItemProviderGrouped";
	    GroupedItemProvider.EXPAND = "onGroupedItemProviderExpand";
	    GroupedItemProvider.EXPANDED = "onGroupedItemProviderExpanded";
	    GroupedItemProvider.COLLAPSE = "onGroupedItemProviderCollapse";
	    GroupedItemProvider.COLLAPSED = "onGroupedItemProviderCollapsed";
	    return GroupedItemProvider;
	}(ItemProvider_1.ProxyItemProvider));
	exports.GroupedItemProvider = GroupedItemProvider;
	var $$_compareTextValue = function (v1, v2, caseSensitive, partialMatch) {
	    if (v1 === v2) {
	        return true;
	    }
	    var s1 = String(v1);
	    var s2 = v2 == null ? undefined : String(v2);
	    if (!s1 && !s2) {
	        return true;
	    }
	    if (!s1 || !s2) {
	        return false;
	    }
	    if (!caseSensitive) {
	        s1 = s1.toLowerCase();
	        s2 = s2.toLowerCase();
	    }
	    if (partialMatch) {
	        return s2.indexOf(s1) >= 0;
	    }
	    else {
	        return s1 == s2;
	    }
	};
	});

	unwrapExports(GroupedItemProvider_1);
	var GroupedItemProvider_2 = GroupedItemProvider_1.MergedGroupFooter;
	var GroupedItemProvider_3 = GroupedItemProvider_1.MergedGroupHeader;
	var GroupedItemProvider_4 = GroupedItemProvider_1.GroupedItemProvider;

	var ColumnMerge = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ColumnMerge.ts
	// 2019. 07. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });








	var GridMergeRule = /** @class */ (function (_super) {
	    __extends(GridMergeRule, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridMergeRule() {
	        return _super.call(this) || this;
	    }
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridMergeRule.prototype._changed = function () {
	    };
	    return GridMergeRule;
	}(Base_1.Base));
	exports.GridMergeRule = GridMergeRule;
	var RowGroupMergeRule = /** @class */ (function (_super) {
	    __extends(RowGroupMergeRule, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupMergeRule() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._level = 0;
	        _this._mergeMode = false;
	        return _this;
	    }
	    RowGroupMergeRule.getDefault = function (groupLevel, mergeMode) {
	        var rule = RowGroupMergeRule.$_default;
	        rule._level = groupLevel;
	        rule._mergeMode = mergeMode;
	        return rule;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupMergeRule.prototype.parseInit = function (rs, field, start, count, flags) {
	        var itemCount = rs.itemCount;
	        count = Math.min(itemCount - start, count);
	        if (count < 1) {
	            return;
	        }
	        if (this._mergeMode) {
	            this.$_parseMerged(rs, field, start, count, flags);
	        }
	        else {
	            this.$_parseNormal(rs, field, start, count, flags);
	        }
	    };
	    RowGroupMergeRule.prototype.parseBounds = function (rs, field, start, end, flags) {
	        var itemCount = rs.itemCount;
	        if (itemCount < 1)
	            return;
	        start = Math.max(0, start);
	        while (start >= 0 && flags[start] <= 0) {
	            var item = rs.getItem(start);
	            if (item == this.$_getAncestor(item, this._level)) {
	                break;
	            }
	            start--;
	        }
	        while (start <= end && flags[start] > 0) {
	            start++;
	        }
	        if (start <= end) {
	            if (this._mergeMode) {
	                this.$_parseMergedBounds(rs, field, start, end, flags);
	            }
	            else {
	                this.$_parseNormalBounds(rs, field, start, end, flags);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupMergeRule.prototype.$_getAncestor = function (item, level) {
	        var group = Utils_1.Utils.cast(item, GridItem_1.GroupItem);
	        if (!group) {
	            group = item.parent;
	        }
	        while (group.level > level) {
	            group = group.parent;
	        }
	        return group;
	    };
	    RowGroupMergeRule.prototype.$_parseNormal = function (rs, field, start, count, flags) {
	        var itemCount = rs.itemCount;
	        if (itemCount < 1)
	            return;
	        var item = rs.getItem(start);
	        var prev = item;
	        var p = start;
	        var i = p + 1;
	        flags[p] = p + 1;
	        while (i < itemCount) {
	            item = rs.getItem(i);
	            if (item.level != prev.level || item.constructor !== prev.constructor || item instanceof GridItem_1.GroupFooter || item instanceof GridItem_1.GroupItemImpl) {
	                p = i;
	            }
	            flags[i] = p + 1;
	            i++;
	            prev = item;
	        }
	    };
	    RowGroupMergeRule.prototype.$_parseMerged = function (rs, field, start, count, flags) {
	        var itemCount = rs.itemCount;
	        if (itemCount < 1)
	            return;
	        var item = rs.getItem(start);
	        var group = this.$_getAncestor(item, this._level);
	        var p = start;
	        var i = flags[p] = p + 1;
	        while (i < itemCount) {
	            item = rs.getItem(i);
	            var parent_1 = this.$_getAncestor(item, this._level);
	            if (parent_1 != group) {
	                if (i >= count) {
	                    break;
	                }
	                group = parent_1;
	                p = i;
	            }
	            flags[i] = p + 1;
	            i++;
	        }
	    };
	    RowGroupMergeRule.prototype.$_parseNormalBounds = function (rs, field, start, end, flags) {
	        var itemCount = rs.itemCount;
	        if (itemCount < 1)
	            return;
	        var item = rs.getItem(start);
	        var prev = item;
	        var p = start;
	        var i = p + 1;
	        flags[p] = p + 1;
	        while (i < itemCount) {
	            item = rs.getItem(i);
	            if (item.level != prev.level || item.constructor !== prev.constructor) {
	                p = i;
	            }
	            flags[i] = p + 1;
	            i++;
	            prev = item;
	        }
	    };
	    RowGroupMergeRule.prototype.$_parseMergedBounds = function (rs, field, start, end, flags) {
	        var itemCount = rs.itemCount;
	        if (itemCount < 1)
	            return;
	        var item = rs.getItem(start);
	        var group = this.$_getAncestor(item, this._level);
	        var p = start;
	        var i = p + 1;
	        flags[p] = p + 1;
	        while (i < itemCount) {
	            item = rs.getItem(i);
	            var parent_2 = this.$_getAncestor(item, this._level);
	            if (parent_2 != group) {
	                if (i > end) {
	                    break;
	                }
	                group = parent_2;
	                p = i;
	            }
	            flags[i] = p + 1;
	            i++;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    RowGroupMergeRule.INIT_COUNT = 200;
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    RowGroupMergeRule.$_default = new RowGroupMergeRule();
	    return RowGroupMergeRule;
	}(GridMergeRule));
	exports.RowGroupMergeRule = RowGroupMergeRule;
	var ColumnMergeRuntime = /** @class */ (function (_super) {
	    __extends(ColumnMergeRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMergeRuntime() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._item = null;
	        _this._field = -1;
	        _this._ds = null;
	        _this._fieldCount = 0;
	        _this._grid = null;
	        _this._layout = null;
	        return _this;
	    }
	    ColumnMergeRuntime.prototype._doDispose = function () {
	        this._item = null;
	        this._ds = null;
	        this._grid = null;
	        this._layout = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnMergeRuntime.prototype.setDataSource = function (value) {
	        this._ds = value;
	        this._fieldCount = value ? value.fieldCount : 0;
	    };
	    ColumnMergeRuntime.prototype.setLayout = function (layout) {
	        this._layout = layout;
	        this._column = layout.firstColumn;
	        this._grid = layout.grid;
	    };
	    ColumnMergeRuntime.prototype.setCell = function (index) {
	        this._item = index.item;
	        this._field = index.dataField;
	    };
	    ColumnMergeRuntime.prototype.setItem = function (item, field) {
	        this._item = item;
	        this._field = field;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnMergeRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (ColumnMergeRuntime.IDENTS.hasOwnProperty(token)) {
	            return ColumnMergeRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    ColumnMergeRuntime.prototype.evaluateIdentifier = function (idKey) {
	        if (this._item) {
	            switch (idKey) {
	                case ColumnMergeRuntime.ID_ROW:
	                    return this._item.index;
	                case ColumnMergeRuntime.ID_DATAROW:
	                    return this._item.dataRow;
	                case ColumnMergeRuntime.ID_CHECKED:
	                    return this._item.checked;
	                case ColumnMergeRuntime.ID_GROUP:
	                    return this._item.parent;
	                case ColumnMergeRuntime.ID_VALUE:
	                    return this._item.getData(this._field);
	                case ColumnMergeRuntime.ID_PREV_VALUES:
	                    var cols = this._grid.getDataColumns();
	                    var idx = cols.indexOf(this._column);
	                    if (cols.length < 0 || idx < 0) {
	                        return;
	                    }
	                    var vals = [];
	                    for (var i = 0, cnt = Math.min(idx, cols.length); i < cnt; i++) {
	                        vals.push(this._item.getData(cols[i].dataIndex));
	                    }
	                    return vals.join("`");
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    ColumnMergeRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._item) {
	            if (idKey == ColumnMergeRuntime.ID_VALUE || idKey == ColumnMergeRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    ColumnMergeRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == ColumnMergeRuntime.ID_VALUE || idKey == ColumnMergeRuntime.ID_VALUES) {
	            if (this._ds) {
	                var idx = capitalized ? this._ds.getFieldIndexC(index) : this._ds.getFieldIndex(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ColumnMergeRuntime.ID_ROW = 0;
	    ColumnMergeRuntime.ID_DATAROW = 1;
	    ColumnMergeRuntime.ID_CHECKED = 2;
	    ColumnMergeRuntime.ID_VALUE = 3;
	    ColumnMergeRuntime.ID_VALUES = 4;
	    ColumnMergeRuntime.ID_GROUP = 5;
	    ColumnMergeRuntime.ID_PREV_VALUES = 6;
	    ColumnMergeRuntime.IDENTS = {
	        row: ColumnMergeRuntime.ID_ROW,
	        datarow: ColumnMergeRuntime.ID_DATAROW,
	        checked: ColumnMergeRuntime.ID_CHECKED,
	        value: ColumnMergeRuntime.ID_VALUE,
	        values: ColumnMergeRuntime.ID_VALUES,
	        group: ColumnMergeRuntime.ID_GROUP,
	        prevvalues: ColumnMergeRuntime.ID_PREV_VALUES
	    };
	    return ColumnMergeRuntime;
	}(Expression.ExpressionRuntime));
	var $_NEVER_VALUE = {};
	var ColumnMergeRule = /** @class */ (function (_super) {
	    __extends(ColumnMergeRule, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMergeRule(criteria) {
	        var _this = _super.call(this) || this;
	        _this._runtime = ColumnMergeRule.$_runtime = ColumnMergeRule.$_runtime || new ColumnMergeRuntime();
	        _this.criteria = criteria;
	        return _this;
	    }
	    ColumnMergeRule.createRule = function (source) {
	        var s = typeof (source) === "string" ? source : (source && source.criteria);
	        if (s) {
	            return new ColumnMergeRule(s);
	        }
	        return null;
	    };
	    ColumnMergeRule.prototype._doDispose = function () {
	        this._runtime = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnMergeRule.prototype, "criteria", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** criteria */
	        get: function () {
	            return this._criteria;
	        },
	        set: function (value) {
	            value = value ? value.trim() : null;
	            if (value != this._criteria) {
	                this._criteria = value;
	                this._exprNode = value ? Expression.ExpressionParser.Default.parse(value, null) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnMergeRule.prototype.parseInit = function (rs, field, start, count, flags) {
	        var breakEmpty = this._layout.isBreakMergeOnEmpty();
	        var header = false;
	        var itemCount = rs.itemCount;
	        var valueCount = rs.dataSource.rowCount;
	        count = Math.min(itemCount - start, count);
	        if (count < 1 || valueCount <= 0) {
	            return;
	        }
	        this._runtime.setDataSource(rs.dataSource);
	        this._runtime.setLayout(this._layout);
	        var item = null;
	        var i = start;
	        while (i < itemCount) {
	            item = rs.getItem(i);
	            if (this.$_isRow(item, header)) {
	                break;
	            }
	            flags[i] = i + 1;
	            i++;
	        }
	        if (i >= itemCount) {
	            return;
	        }
	        var prev = $_NEVER_VALUE;
	        var isValue = this._exprNode.isIdentifier("value");
	        var p = start = i;
	        flags[p] = p + 1;
	        if (item.dataRow >= valueCount) {
	            return;
	        }
	        if (isValue) {
	            prev = item.getData(field);
	        }
	        else {
	            this._runtime.setItem(item, field);
	            prev = this._exprNode.evaluate(this._runtime);
	        }
	        for (var i_1 = start + 1; i_1 < itemCount; i_1++) {
	            item = rs.getItem(i_1);
	            if (this.$_isRow(item, header)) {
	                if (item.dataRow >= valueCount) {
	                    break;
	                }
	                var v = void 0;
	                if (isValue) {
	                    v = item.getData(field);
	                }
	                else {
	                    this._runtime.setItem(item, field);
	                    v = this._exprNode.evaluate(this._runtime);
	                }
	                if ((v === undefined && breakEmpty) || (v instanceof Date && prev instanceof Date ? +v != +prev : v != prev)) {
	                    if (i_1 >= count) {
	                        break;
	                    }
	                    p = i_1;
	                    prev = v;
	                }
	                flags[i_1] = p + 1;
	            }
	            else {
	                if (i_1 >= count) {
	                    break;
	                }
	                prev = $_NEVER_VALUE;
	                p = i_1;
	                flags[i_1] = p + 1;
	            }
	        }
	    };
	    ColumnMergeRule.prototype.parseBounds = function (rs, field, start, end, flags) {
	        var breakEmpty = this._layout.isBreakMergeOnEmpty();
	        var header = false;
	        var itemCount = rs.itemCount;
	        if (itemCount < 1) {
	            return;
	        }
	        var isValue = this._exprNode.isIdentifier("value");
	        var v = $_NEVER_VALUE;
	        var p = Math.max(0, start);
	        var s = p;
	        var cont = -1;
	        this._runtime.setDataSource(rs.dataSource);
	        this._runtime.setLayout(this._layout);
	        if (p > 0 && flags[p] <= 0) {
	            var item = rs.getItem(p);
	            if (this.$_isRow(item, header)) {
	                var prev = void 0;
	                if (isValue) {
	                    prev = rs.getItem(p).getData(field);
	                }
	                else {
	                    this._runtime.setItem(item, field);
	                    prev = this._exprNode.evaluate(this._runtime);
	                }
	                p--;
	                while (p >= 0) {
	                    item = rs.getItem(p);
	                    if (!this.$_isRow(item, header)) {
	                        break;
	                    }
	                    if (isValue) {
	                        v = item.getData(field);
	                    }
	                    else {
	                        this._runtime.setItem(item, field);
	                        v = this._exprNode.evaluate(this._runtime);
	                    }
	                    if ((v === undefined && breakEmpty) || v instanceof Date && prev instanceof Date ? +v != +prev : v != prev) {
	                        break;
	                    }
	                    p--;
	                }
	                for (var i = s - 1; i > p; i--) {
	                    flags[i] = p + 2;
	                }
	                if (s - 1 > p) {
	                    cont = p + 1;
	                }
	            }
	            else {
	                flags[p] = p + 1;
	                for (var i = s - 1; i > p; i--) {
	                    flags[i] = p + 2;
	                }
	                if (s - 1 > p + 1) {
	                    cont = p + 2;
	                }
	                p--;
	                while (p >= 0 && flags[p] <= 0 && !this.$_isRow(rs.getItem(p), header)) {
	                    flags[p] = p + 1;
	                    p--;
	                }
	            }
	        }
	        p = Math.max(0, start);
	        while (p <= end && flags[p] > 0) {
	            p++;
	        }
	        while (p <= end && !this.$_isRow(rs.getItem(p), header)) {
	            flags[p] = p + 1;
	            p++;
	        }
	        if (p < end) {
	            s = p;
	            var item = rs.getItem(p);
	            var prev = void 0;
	            if (isValue) {
	                prev = item.getData(field);
	            }
	            else {
	                this._runtime.setItem(item, field);
	                prev = this._exprNode.evaluate(this._runtime);
	            }
	            p++;
	            while (p < itemCount) {
	                item = rs.getItem(p);
	                if (this.$_isRow(item, header)) {
	                    if (isValue) {
	                        v = item.getData(field);
	                    }
	                    else {
	                        this._runtime.setItem(item, field);
	                        v = this._exprNode.evaluate(this._runtime);
	                    }
	                    if ((v === undefined && breakEmpty) || v instanceof Date && prev instanceof Date ? +v != +prev : v != prev) {
	                        var y = s;
	                        if (cont >= 0) {
	                            y = cont;
	                            cont = -1;
	                        }
	                        for (var i = s; i < p; i++) {
	                            flags[i] = y + 1;
	                        }
	                        if (p >= end) {
	                            break;
	                        }
	                        prev = v;
	                        s = p;
	                    }
	                    else {
	                        flags[p] = s + 1;
	                    }
	                    p++;
	                }
	                else {
	                    var y = s;
	                    if (cont >= 0) {
	                        y = cont;
	                        cont = -1;
	                    }
	                    for (var i = s; i < p; i++) {
	                        flags[i] = y + 1;
	                    }
	                    flags[p] = p + 1;
	                    p++;
	                    while ((p < itemCount) && !this.$_isRow(rs.getItem(p), header)) {
	                        flags[p] = p + 1;
	                        p++;
	                    }
	                    s = p;
	                    if (p >= end) {
	                        break;
	                    }
	                }
	            }
	            if (p == itemCount && v instanceof Date && prev instanceof Date ? +v == +prev : v == prev) {
	                var y = (cont >= 0) ? cont : s;
	                for (var i = s; i < p; i++) {
	                    flags[i] = y + 1;
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnMergeRule.prototype.$_isRow = function (item, header) {
	        var row = item instanceof GridItem_1.GridRow && !(item instanceof EditableItemProvider_1.DummyEditItem);
	        if (row && !header) {
	            var group = item.parent;
	            row = group.expanded || group.firstItem !== item;
	        }
	        return row;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ColumnMergeRule.INIT_COUNT = 200;
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    ColumnMergeRule.$_runtime = null;
	    return ColumnMergeRule;
	}(GridMergeRule));
	exports.ColumnMergeRule = ColumnMergeRule;
	var GridMergeRoom = /** @class */ (function (_super) {
	    __extends(GridMergeRoom, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridMergeRoom() {
	        return _super.call(this) || this;
	    }
	    Object.defineProperty(GridMergeRoom.prototype, "head", {
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridMergeRoom.prototype, "tail", {
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return GridMergeRoom;
	}(Base_1.Base));
	exports.GridMergeRoom = GridMergeRoom;
	var ColumnMergeRoom = /** @class */ (function (_super) {
	    __extends(ColumnMergeRoom, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMergeRoom(range) {
	        var _this = _super.call(this) || this;
	        _this._group = null;
	        _this._column = range.c1["_columnObj"];
	        _this._head = range.top;
	        _this._tail = range.bottom;
	        return _this;
	    }
	    ColumnMergeRoom.borrow = function (range) {
	        var room = ColumnMergeRoom.$_rooms.pop();
	        if (!room) {
	            room = new ColumnMergeRoom(range);
	        }
	        else {
	            room._head = range.top;
	            room._tail = range.bottom;
	        }
	        return room;
	    };
	    ColumnMergeRoom.returnTo = function (room) {
	        if (room) {
	            var rooms = ColumnMergeRoom.$_rooms;
	            if (rooms.indexOf(room) < 0) {
	                rooms.push(room);
	            }
	        }
	    };
	    Object.defineProperty(ColumnMergeRoom.prototype, "column", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** column */
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMergeRoom.prototype, "head", {
	        /** head */
	        get: function () {
	            return this._head;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMergeRoom.prototype, "tail", {
	        /** tail */
	        get: function () {
	            return this._tail;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMergeRoom.prototype, "scope", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMergeRoom.prototype, "group", {
	        get: function () {
	            return this._group;
	        },
	        set: function (value) {
	            this._group = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ColumnMergeRoom.prototype.getHead = function (index) {
	        if (!index) {
	            index = this._column.grid.getIndex(this._head, this._column);
	        }
	        else {
	            index.set(this._head, this._column);
	        }
	        return index;
	    };
	    ColumnMergeRoom.prototype.getTail = function (index) {
	        if (!index) {
	            index = this._column.grid.getIndex(this._tail, this._column);
	        }
	        else {
	            index.set(this._tail, this._column);
	        }
	        return index;
	    };
	    ColumnMergeRoom.prototype.isHead = function (index) {
	        return (index.column == this._column) && (index.itemIndex == this._head);
	    };
	    ColumnMergeRoom.prototype.isTail = function (index) {
	        return (index.column == this._column) && (index.itemIndex == this._tail);
	    };
	    ColumnMergeRoom.prototype.contains = function (index) {
	        return (index.column == this._column) && (index.itemIndex >= this._head) && (index.itemIndex <= this._tail);
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    ColumnMergeRoom.$_rooms = new Array();
	    ColumnMergeRoom.$_roomCount = 0; // for debugging only
	    return ColumnMergeRoom;
	}(GridMergeRoom));
	exports.ColumnMergeRoom = ColumnMergeRoom;
	var $_nextId = 0;
	var $_SINGLE = -1;
	var $_HIDDEN = 0xffff;
	var ColumnMergeManager = /** @class */ (function (_super) {
	    __extends(ColumnMergeManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMergeManager(layout) {
	        var _this = _super.call(this) || this;
	        _this._flags = null;
	        _this._rooms = new Array();
	        _this._inited = false;
	        _this._cells = [];
	        _this._layout = layout;
	        return _this;
	    }
	    Object.defineProperty(ColumnMergeManager.prototype, "count", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** count */
	        get: function () {
	            return this._rooms.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnMergeManager.prototype.clear = function () {
	        this._flags = null;
	        this._rooms = [];
	        this._inited = false;
	    };
	    ColumnMergeManager.prototype.initialize = function (count) {
	        if (this._inited) {
	            return;
	        }
	        var grid = this._layout.grid;
	        var rowGroup = grid.rowGroup;
	        var rs = grid.itemSource;
	        var dcolumn = this._layout.firstColumn;
	        var level = grid.getGroupLevel(dcolumn.dataIndex);
	        var rule = grid.isGroupedColumn(dcolumn) ? RowGroupMergeRule.getDefault(level, rowGroup.mergeMode) : this._layout["$_mergeRuleObj"]();
	        if (rule) {
	            var flags = this._flags = new Array(rs.itemCount);
	            for (var i = rs.itemCount; i--;) {
	                flags[i] = 0;
	            }
	            rule["_layout"] = this._layout;
	            rule.parseInit(rs, dcolumn.dataIndex, grid.fixedOptions.rowCount, count, flags);
	        }
	        this._inited = true;
	    };
	    ColumnMergeManager.prototype.refresh = function (first, last) {
	        if (!this._inited || !this._flags || last < first) {
	            return;
	        }
	        var rooms = this._rooms;
	        var grid = this._layout.grid;
	        var fixed = grid.layoutManager.fixedItemCount;
	        var rs = grid.itemSource;
	        var dcolumn = this._layout.firstColumn;
	        var level = grid.getGroupLevel(dcolumn.dataIndex);
	        var rule = level > 0 ? RowGroupMergeRule.getDefault(level, grid.rowGroup.mergeMode) : this._layout["$_mergeRuleObj"]();
	        var editItemMerging = grid.displayOptions.editItemMerging;
	        var i = first;
	        this._rooms.length = 0;
	        if (rule) {
	            rule["_layout"] = this._layout;
	            rule.parseBounds(rs, dcolumn.dataIndex, first, last, this._flags);
	        }
	        while (i <= last) {
	            var range = this.$_checkMerge(rs, dcolumn, i, rooms.length == 0, fixed);
	            if (range) {
	                if (level < 1) { // rowGrouping이 아닐 때
	                    // colMerge일때는 header/footer는 merge하지 않는다.
	                    var item = rs.getItem(range.r2);
	                    if (item instanceof GroupedItemProvider_1.MergedGroupHeader || item instanceof GroupedItemProvider_1.MergedGroupFooter) ;
	                    else {
	                        var room = new ColumnMergeRoom(range);
	                        this._rooms.push(room);
	                    }
	                }
	                else { // rowGrouping일 때
	                    // item = items.getItem(range.top());
	                    // insert 중인 경우 range가 어떻게 나오나??
	                    var item = editItemMerging ? rs.source.getItem(range.top) : rs.getItem(range.top);
	                    if (item.level >= level) {
	                        var group = (item instanceof GridItem_1.GroupItem) ? item : item.parent;
	                        while (group.level > level) {
	                            group = group.parent;
	                        }
	                        var room = new ColumnMergeRoom(range);
	                        room.group = group;
	                        rooms.push(room);
	                    }
	                }
	                i = range.r2 + 1;
	            }
	            else {
	                i += 1;
	            }
	        }
	    };
	    ColumnMergeManager.prototype.getRooms = function () {
	        return this._rooms.slice();
	    };
	    ColumnMergeManager.prototype.scroll = function (delta) {
	    };
	    ColumnMergeManager.prototype.getRoom = function (index) {
	        var rooms = this._rooms;
	        for (var i = rooms.length - 1; i >= 0; i--) {
	            if (rooms[i].contains(index))
	                return rooms[i];
	        }
	        return null;
	    };
	    ColumnMergeManager.prototype.findRoom = function (itemIndex) {
	        var rooms = this._rooms;
	        for (var i = rooms.length - 1; i >= 0; i--) {
	            if (itemIndex >= rooms[i].head && itemIndex <= rooms[i].tail) {
	                return rooms[i];
	            }
	        }
	        return null;
	    };
	    ColumnMergeManager.prototype.prepareCells = function (rows) {
	        var cells = this._cells;
	        for (var r = 0; r < cells.length; r++) {
	            cells[r] = $_SINGLE;
	        }
	        while (cells.length < rows) {
	            cells.push($_SINGLE);
	        }
	    };
	    ColumnMergeManager.prototype.addCells = function (row, count) {
	        var id = $_nextId++;
	        for (var r = row + 1; r < row + count; r++) {
	            this._cells[r] = id + $_HIDDEN;
	        }
	        this._cells[row] = id;
	        return id;
	    };
	    ColumnMergeManager.prototype.isMerged = function (row) {
	        return this._cells[row] > $_SINGLE;
	    };
	    ColumnMergeManager.prototype.isMergeRoot = function (row) {
	        return this._cells[row] > $_SINGLE && this._cells[row] < $_HIDDEN;
	    };
	    ColumnMergeManager.prototype.isHidden = function (row) {
	        return this._cells[row] >= $_HIDDEN;
	    };
	    ColumnMergeManager.prototype.getHead = function (row) {
	        var cells = this._cells;
	        var id = cells[row];
	        if (id == $_SINGLE)
	            return row;
	        if (id < $_HIDDEN)
	            return row;
	        for (var i = row - 1; i >= 0; i--) {
	            if (cells[i] < $_HIDDEN)
	                return i;
	        }
	        debugger;
	    };
	    ColumnMergeManager.prototype.getMerged = function (row) {
	        var cells = this._cells;
	        var id = cells[row];
	        var n = 1;
	        for (var r = row + 1; r < cells.length; r++, n++) {
	            if (cells[r] - $_HIDDEN != id) {
	                break;
	            }
	        }
	        return n;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnMergeManager.prototype.$_checkMerge = function (rs, column, start, first, fixed) {
	        if (rs && column && start >= 0) {
	            var options = column.grid.displayOptions;
	            var editMerge = options.editItemMerging;
	            var p = start;
	            var f = this._flags[p];
	            var item = rs.getItem(p);
	            if (f <= 0 || (GridItem_1.ItemState_isEditing(item.itemState) && !editMerge)) {
	                return null;
	            }
	            if (first) {
	                while (p > fixed) {
	                    if (this._flags[p - 1] < f || GridItem_1.ItemState_isEditing(rs.getItem(p - 1).itemState)) {
	                        break;
	                    }
	                    p--;
	                }
	            }
	            var count = rs.itemCount;
	            var i = start + 1;
	            while (i < count) {
	                var editing = GridItem_1.ItemState_isEditing(rs.getItem(i).itemState);
	                if (this._flags[i] > f || this._flags[i] <= 0 || (editing && !editMerge)) {
	                    //if (this._flags[i] <= 0) debugger;
	                    if (i > p + 1) { // 적어도 아이템이 두 개 이상
	                        return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                    }
	                    else {
	                        var level = (column instanceof GridColumn_1.DataColumn) ? column.groupLevel : -1;
	                        item = rs.getItem(p);
	                        if (item instanceof GroupedItemProvider_1.MergedGroupHeader && item.collapsed) {
	                            return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                        }
	                        /*
	                        if (item instanceof MergedGroupHeader && item.level() == level && item.isCollapsed()) {
	                            return GridRange.createRange(p, column, i - 1, column);
	                        }
	                        */
	                        if (item instanceof GroupedItemProvider_1.MergedGroupFooter && item.parent.level == level &&
	                            (i == start + 1 || // 첫번째 행에 footer가 있을 때 expander를 표시할 수 있도록
	                                item.parent.collapsed)) {
	                            return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                        }
	                        if ((item instanceof GroupedItemProvider_1.MergedGroupHeader || item instanceof GroupedItemProvider_1.MergedGroupFooter) && item.parent.level > level) {
	                            return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                        }
	                        return null;
	                    }
	                }
	                i++;
	            }
	            if (i > p) {
	                if (i > p + 1) {
	                    return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                }
	                else {
	                    var level = (column instanceof GridColumn_1.DataColumn) ? column.groupLevel : -1;
	                    item = rs.getItem(p);
	                    if (item instanceof GroupedItemProvider_1.MergedGroupHeader && item.collapsed) {
	                        return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                    }
	                    /*
	                    if (item instanceof MergedGroupHeader && item.level() == level && item.isCollapsed()) {
	                        return GridRange.createRange(p, column, i - 1, column);
	                    }
	                    */
	                    if (item instanceof GroupedItemProvider_1.MergedGroupFooter && item.parent.level == level &&
	                        (i == start + 1 || item.parent.collapsed)) {
	                        return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                    }
	                    if ((item instanceof GroupedItemProvider_1.MergedGroupHeader || item instanceof GroupedItemProvider_1.MergedGroupFooter) && item.parent.level > level) {
	                        return CellIndex_1.CellRange.createRange(p, column.layout, i - 1, column.layout);
	                    }
	                    return null;
	                }
	            }
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ColumnMergeManager.MERGE_ROOMS = "mergeRooms";
	    return ColumnMergeManager;
	}(Base_1.Base));
	exports.ColumnMergeManager = ColumnMergeManager;
	});

	unwrapExports(ColumnMerge);
	var ColumnMerge_1 = ColumnMerge.GridMergeRule;
	var ColumnMerge_2 = ColumnMerge.RowGroupMergeRule;
	var ColumnMerge_3 = ColumnMerge.ColumnMergeRule;
	var ColumnMerge_4 = ColumnMerge.GridMergeRoom;
	var ColumnMerge_5 = ColumnMerge.ColumnMergeRoom;
	var ColumnMerge_6 = ColumnMerge.ColumnMergeManager;

	var CellLayout = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ColumnLayout.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	/**
	 * [ Spanning ]
	 * layout 단위로 span한다. 즉, 다음 layout이 그룹이면 그 그룹 전체를 span한다.
	 * 그룹을 벗어나서 span할 수 없다.
	 * 그룹은 span할 수 없다.
	 * 왼쪽에서 오른쪽으로, 위에서 아래로 진행한다.
	 * 상위 layout부터 먼저 span한다(top-down).
	 * 그룹이 다음 layout들을 span한 경우 새로 추가된 셀들을 하위 layout들에 배분한다.
	 * (배분 방식: 하위 layout의 cell 개수 비율에 따라 마지막 layout부터 배분한다.)
	 *
	 * 행 병합 상태일 경우 span하려는 다음 layout들과 행 어긋남이 없어야 한다.
	 * fixed, rightFixed 경계를 넘어갈 수 없다.
	 */
	var CellLayoutItem = /** @class */ (function (_super) {
	    __extends(CellLayoutItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellLayoutItem() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        _this._width = NaN;
	        _this._fillWidth = 0;
	        _this._index = -1;
	        _this._vindex = -1;
	        _this._row = 0; // body tr row
	        _this._col = 0; // body td col
	        _this._hrow = 0; // header tr row
	        _this._hcol = 0; // header td col
	        // protected _frow = 0;    // footer tr row
	        // protected _fcol = 0;    // footer td col
	        // protected _srow = 0;    // summary tr row
	        // protected _scol = 0;    // summary td col
	        _this._cspan = 1; // 자신의 col span (자신 td + proxy들의 셀 개수)
	        _this._hspan = 1; // 자신의 header span (자신 td + proxy들의 셀 개수)
	        _this._dspan = 1; // 자신의 data span (자신 td + proxy들의 셀 개수)
	        // private _fspan = 1;     // 자신의 footer span (자신 td + proxy들의 셀 개수)
	        // private _sspan = 1;     // 자신의 summary span (자신 td + proxy들의 셀 개수)
	        _this._clen = 1; // col length (_cspan + 자식 span을 포함한 셀 개수)
	        _this._hlen = 1; // header row length (_hspan + 자식 span을 포함한 셀 개수)
	        _this._dlen = 1; // data row length (_dspan + 자식 span을 포함한 셀 개수)
	        _this._cellWidth = 0;
	        _this._fitWidth = NaN;
	        _this._y = 0;
	        _this._d = 0;
	        _this._merged = false;
	        _this.$_fixed = false;
	        _this.$_rfixed = false;
	        _this._header = _this._createHeader();
	        _this._header && (_this._header["_layout"] = _this);
	        return _this;
	    }
	    CellLayoutItem.prototype._doDispose = function () {
	        this._header = this._header && this._header.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellLayoutItem.prototype, "grid", {
	        get: function () {
	            if (this.$_grid) {
	                return this.$_grid;
	            }
	            else {
	                var root = this.root;
	                return root && root["_parent"].grid;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "isNull", {
	        /** null */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "isProxy", {
	        /** proxy */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "visible", {
	        /**
	         * visible property.
	         * 컬럼이 연결된 layout의 경우 column의 visible도 true여야 그리드에 표시된다.
	         */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellLayoutItem.prototype.$_isVisible = function () {
	        return this._visible;
	    };
	    Object.defineProperty(CellLayoutItem.prototype, "header", {
	        /** header */
	        get: function () {
	            return this._header;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "parent", {
	        /** parent */
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "group", {
	        /** group */
	        get: function () {
	            return this._parent instanceof RootCellLayout ? null : this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "root", {
	        /** root */
	        get: function () {
	            if (!this._root) {
	                var p = this;
	                while (p) {
	                    if (p._parent instanceof RootCellLayout) {
	                        return (this._root = p);
	                    }
	                    p = p._parent;
	                }
	            }
	            return this._root;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "isRoot", {
	        /** isRoot */
	        get: function () {
	            return this.root === this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "dataRoot", {
	        /** dataRoot */
	        get: function () {
	            if (!this._dataRoot) {
	                if (this._y == 0) {
	                    this._dataRoot = this;
	                }
	                else {
	                    var p = this.group;
	                    while (p && p._y > 0) {
	                        p = p.group;
	                    }
	                    this._dataRoot = p;
	                }
	            }
	            return this._dataRoot;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "vindex", {
	        /** vindex */
	        get: function () {
	            return this._vindex;
	        },
	        set: function (value) {
	            this._parent && this._parent["$_changeChildVIndex"](this, value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "row", {
	        // /** cellIndex */
	        // get cellIndex(): number {
	        //     let c = this._col;
	        //     let p = this._parent;
	        //     while (p) {
	        //         c += p._col;
	        //         p = p._parent;
	        //     }
	        //     return c;
	        // }
	        /** row */
	        get: function () {
	            return this._row;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "col", {
	        /** col */
	        get: function () {
	            return this._col;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "hrow", {
	        /** hrow */
	        get: function () {
	            return this._hrow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "hcol", {
	        /** hcol */
	        get: function () {
	            return this._hcol;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "width", {
	        // /** frow */
	        // get frow(): number {
	        //     return this._frow;
	        // }
	        // /** fcol */
	        // get fcol(): number {
	        //     return this._fcol;
	        // }
	        // /** srow */
	        // get srow(): number {
	        //     return this._srow;
	        // }
	        // /** scol */
	        // get scol(): number {
	        //     return this._scol;
	        // }
	        /** width */
	        get: function () {
	            return this._getWidth(this._width);
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._width) {
	                this._width = value;
	                this._parent && this._parent["_childWidthChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "fillWidth", {
	        /** fillWidth */
	        get: function () {
	            return this._fillWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._width) {
	                this._fillWidth = value;
	                this._parent && this._parent["_childFillWidthChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "cellWidth", {
	        /** cellWidth */
	        get: function () {
	            return isNaN(this._fitWidth) ? this._cellWidth : this._fitWidth;
	        },
	        set: function (value) {
	            this.changeCellWidth(value, false);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "distance", {
	        /** distance */
	        get: function () {
	            return this._d;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "cspan", {
	        /** cspan */
	        get: function () {
	            return this._cspan;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "hspan", {
	        /** hspan */
	        get: function () {
	            return this._hspan;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "hlen", {
	        /** hlen */
	        get: function () {
	            return this._hlen;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "merged", {
	        /** merged */
	        get: function () {
	            return this._merged;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutItem.prototype, "isFixed", {
	        /** isFixed */
	        get: function () {
	            return this.$_fixed || this.$_rfixed;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellLayoutItem.prototype.load = function (src) {
	        src.width !== undefined && (this.width = src.width);
	        src.header !== undefined && this._header.assignFrom(src.header);
	    };
	    CellLayoutItem.prototype.getCellWidth = function (col) {
	        return this.width;
	    };
	    CellLayoutItem.prototype.isColumn = function (column) {
	        return false;
	    };
	    CellLayoutItem.prototype.cleanColumns = function () {
	    };
	    CellLayoutItem.prototype.findLayout = function (column) {
	        return null;
	    };
	    CellLayoutItem.prototype.getHeaderSpan = function () {
	        return 1;
	    };
	    CellLayoutItem.prototype.getSummarySpan = function () {
	        return 1;
	    };
	    CellLayoutItem.prototype.getFooterSpan = function () {
	        return 1;
	    };
	    CellLayoutItem.prototype.getDataSpan = function () {
	        return 1;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CellLayoutItem.prototype._createHeader = function () {
	        return null;
	    };
	    CellLayoutItem.prototype._headerChanged = function () {
	    };
	    CellLayoutItem.prototype._prepareLayout = function (grid, fixed, rfixed) {
	        this.$_grid = grid;
	        this.$_fixed = fixed;
	        this.$_rfixed = rfixed;
	        this._merged = false;
	    };
	    CellLayoutItem.prototype._detach = function () {
	        this._parent = undefined;
	        this._index = -1;
	        this._vindex = -1;
	        this._row = -1;
	        this._col = -1;
	        this._cspan = 1;
	        this._hspan = 1;
	        this._dspan = 1;
	        // this._fspan = 1;
	        // this._sspan = 1;
	        this._clen = 1;
	        this._hlen = 1;
	        this._dlen = 1;
	        // this._flen = 1;
	        // this._slen = 1;
	        this._root = undefined;
	        this._dataRoot = undefined;
	        this._y = 0;
	        this._d = 0;
	    };
	    CellLayoutItem.prototype._getWidth = function (value) {
	        return value;
	    };
	    /**
	     * 현재 보여지는 기준으로 width를 조정한다.
	     * 최상위 layout이고 fiiting이 아니면 width를 변경하는 것과 동일하다.
	     * fitting인 경우 layout에 추가된 fill 너비 비율에 맞춰 조정한다.
	     * 실제로 변경하는 것은 width이고, _cellWidth, _fitWidth는 계산된다.
	     */
	    CellLayoutItem.prototype.changeCellWidth = function (newWidth, fitting) {
	        var dw = 0;
	        if (fitting) {
	            dw = newWidth - this._fitWidth;
	        }
	        else {
	            dw = newWidth - this._cellWidth;
	        }
	        if (fitting) {
	            dw *= this._cellWidth / this._fitWidth;
	        }
	        this._incCellWidth(dw, fitting);
	    };
	    /**
	     * horz 그룹의 자식인 경우 모델 너비와 표시 너비의 비율에 맞게 설정한다.
	     * 그룹이고 width가 NaN인 경우 자식들의 너비를 배분 조정한다.
	     */
	    CellLayoutItem.prototype._incCellWidth = function (dw, fitting) {
	        // width가 NaN인 그룹 layout인 경우는 groupLayout에서 처리한다.
	        if (this.isRoot || this.parent.vertical) {
	            this.width += dw;
	        }
	        else {
	            var rate = this.cellWidth / this.width;
	            this.width += Math.floor(dw * rate);
	        }
	    };
	    CellLayoutItem.prototype.$_setFitWidth = function (value) {
	        this._fitWidth = value;
	    };
	    CellLayoutItem.prototype._clearFitWidth = function () {
	        this._fitWidth = NaN;
	    };
	    CellLayoutItem.prototype._changed = function () {
	        this._parent && this._parent._changed();
	    };
	    CellLayoutItem.prototype.$_setMerged = function (value) {
	        this._merged = value;
	    };
	    return CellLayoutItem;
	}(Base_1.Base));
	exports.CellLayoutItem = CellLayoutItem;
	var ProxyCellLayoutItem = /** @class */ (function (_super) {
	    __extends(ProxyCellLayoutItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ProxyCellLayoutItem(source, index) {
	        var _this = _super.call(this) || this;
	        _this._source = source;
	        _this["_index"] = index;
	        return _this;
	    }
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "isNull", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "isProxy", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "source", {
	        get: function () {
	            return this._source;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "visible", {
	        get: function () {
	            return this._source.visible;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "cols", {
	        get: function () {
	            return this._source.cols;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "headerRows", {
	        get: function () {
	            return this._source.headerRows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "rows", {
	        get: function () {
	            return this._source.rows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "first", {
	        // get footerRows(): number {
	        //     return this._source.footerRows;
	        // }
	        // get summaryRows(): number {
	        //     return this._source.summaryRows;
	        // }
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "last", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "firstColumn", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ProxyCellLayoutItem.prototype, "boundColumn", {
	        get: function () {
	            return this._source.boundColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ProxyCellLayoutItem.prototype.load = function (src) {
	    };
	    ProxyCellLayoutItem.prototype._isResizable = function () {
	        return false;
	    };
	    ProxyCellLayoutItem.prototype._isMovable = function () {
	        return false;
	    };
	    ProxyCellLayoutItem.prototype.clearMergeGrouped = function () {
	    };
	    return ProxyCellLayoutItem;
	}(CellLayoutItem));
	exports.ProxyCellLayoutItem = ProxyCellLayoutItem;
	var CellLayoutColumnItem = /** @class */ (function (_super) {
	    __extends(CellLayoutColumnItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellLayoutColumnItem(column) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._mergeRule = undefined;
	        _this._breakMergeOnEmpty = false;
	        _this._equalBlank = undefined;
	        _this._equalBlankExpression = undefined;
	        _this._cellSpan = 1;
	        _this._mergeRuleObj = undefined;
	        _this._equalBlankNode = undefined;
	        _this._cellWidths = []; // table col별 width
	        _this._cols = 1;
	        _this._rows = 1;
	        _this._blanked = false;
	        _this._column = column;
	        _this._columnObj = column instanceof GridColumn_1.ValueColumn && column;
	        return _this;
	    }
	    Object.defineProperty(CellLayoutColumnItem.prototype, "column", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** column */
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "mergeRule", {
	        /**
	         * mergeRule property.
	         * undefined이면(기본값) 컬럼의 mergeRule로 병합한다.
	         * null이면 컬럼의 mergeRule을 무시한다.
	         */
	        get: function () {
	            return this._mergeRule;
	        },
	        set: function (value) {
	            if (value !== this._mergeRule) {
	                this._mergeRule = value;
	                this._mergeRuleObj = value ? ColumnMerge.ColumnMergeRule.createRule(value) : value === undefined ? undefined : null;
	                var grid = this.grid;
	                if (grid) {
	                    grid["_columnMergeRuleChanged"](this);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "breakMergeOnEmpty", {
	        /** breakMergeOnEmpty */
	        get: function () {
	            return this._breakMergeOnEmpty;
	        },
	        set: function (value) {
	            if (value !== this._breakMergeOnEmpty) {
	                this._breakMergeOnEmpty = value;
	                var grid = this.grid;
	                if (grid) {
	                    grid["_columnMergeRuleChanged"](this);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellLayoutColumnItem.prototype.isBreakMergeOnEmpty = function () {
	        if (this._breakMergeOnEmpty === undefined) {
	            return this._columnObj instanceof GridColumn_1.DataColumn && this._columnObj.breakMergeOnEmpty;
	        }
	        return this._breakMergeOnEmpty;
	    };
	    Object.defineProperty(CellLayoutColumnItem.prototype, "equalBlank", {
	        /** equalBlank */
	        get: function () {
	            return this._equalBlank;
	        },
	        set: function (value) {
	            if (value !== this._equalBlank) {
	                this._equalBlank = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "equalBlankNode", {
	        /** equalBlankNode */
	        get: function () {
	            return this._blankNodeRun; // this._equalBlankNode;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "blanked", {
	        /** blanked */
	        get: function () {
	            return this._blanked; //this._equalBlank || this._equalBlankNode != null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "equalBlankExpression", {
	        /** equalBlankExpression */
	        get: function () {
	            return this._equalBlankExpression;
	        },
	        set: function (value) {
	            if (value !== this._equalBlankExpression) {
	                this._equalBlankExpression = value;
	                this._equalBlankNode = value ? Expression.ExpressionParser.Default.parse(value, null) : value === undefined ? undefined : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "cellSpan", {
	        /** cellSpan */
	        get: function () {
	            return this._cellSpan;
	        },
	        set: function (value) {
	            value = Math.max(1, value);
	            if (value != this._cellSpan) {
	                this._cellSpan = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "headerSpan", {
	        /** headerSpan */
	        get: function () {
	            return this._headerSpan;
	        },
	        set: function (value) {
	            if (value != this._headerSpan) {
	                if (value !== undefined)
	                    value = Math.max(1, value);
	                this._headerSpan = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "summarySpan", {
	        /** summarySpan */
	        get: function () {
	            return this._summarySpan;
	        },
	        set: function (value) {
	            if (value != this._summarySpan) {
	                if (value !== undefined)
	                    value = Math.max(1, value);
	                this._summarySpan = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "footerSpan", {
	        /** footerSpan */
	        get: function () {
	            return this._footerSpan;
	        },
	        set: function (value) {
	            if (value != this._footerSpan) {
	                if (value !== undefined)
	                    value = Math.max(1, value);
	                this._footerSpan = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "dataSpan", {
	        /** dataSpan */
	        get: function () {
	            return this._dataSpan;
	        },
	        set: function (value) {
	            if (value != this._dataSpan) {
	                if (value !== undefined)
	                    value = Math.max(1, value);
	                this._dataSpan = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "spanCallback", {
	        /** spanCallback */
	        get: function () {
	            return this._spanCallback;
	        },
	        set: function (value) {
	            if (value != this._spanCallback) {
	                this._spanCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellLayoutColumnItem.prototype.canMerge = function () {
	        if (this._mergeRuleObj != null) {
	            return true;
	        }
	        if (this._columnObj instanceof GridColumn_1.DataColumn) {
	            if (this._columnObj.mergeGrouped) {
	                return true;
	            }
	            if (this._mergeRuleObj === undefined) {
	                return this._columnObj["_mergeRuleObj"] != null;
	            }
	        }
	    };
	    Object.defineProperty(CellLayoutColumnItem.prototype, "isNull", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return !this._columnObj;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "cols", {
	        get: function () {
	            return this._cols;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "headerRows", {
	        get: function () {
	            return 1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "rows", {
	        get: function () {
	            return this._rows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "first", {
	        // get footerRows(): number {
	        //     return 1;
	        // }
	        // get summaryRows(): number {
	        //     return 1;
	        // }
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "last", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "firstColumn", {
	        get: function () {
	            return this._columnObj;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutColumnItem.prototype, "boundColumn", {
	        get: function () {
	            return this._columnObj;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellLayoutColumnItem.prototype.getHeaderSpan = function () {
	        return this._headerSpan === undefined ? this._cellSpan : this._headerSpan;
	    };
	    CellLayoutColumnItem.prototype.getSummarySpan = function () {
	        return this._summarySpan === undefined ? this._cellSpan : this._summarySpan;
	    };
	    CellLayoutColumnItem.prototype.getFooterSpan = function () {
	        return this._footerSpan === undefined ? this._cellSpan : this._footerSpan;
	    };
	    CellLayoutColumnItem.prototype.getDataSpan = function () {
	        return this._dataSpan === undefined ? this._cellSpan : this._dataSpan;
	    };
	    CellLayoutColumnItem.prototype._createHeader = function () {
	        return new CellLayoutHeader();
	    };
	    CellLayoutColumnItem.prototype._isResizable = function () {
	        return !this._columnObj || this._columnObj.resizable;
	    };
	    CellLayoutColumnItem.prototype._isMovable = function () {
	        return !this._columnObj || this._columnObj.movable;
	    };
	    CellLayoutColumnItem.prototype.isColumn = function (column) {
	        return this._columnObj === column;
	    };
	    CellLayoutColumnItem.prototype.findLayout = function (column) {
	        return (column && this._columnObj === column) ? this : null;
	    };
	    CellLayoutColumnItem.prototype.load = function (src) {
	        _super.prototype.load.call(this, src);
	        src.cellSpan !== undefined && (this.cellSpan = src.cellSpan);
	        src.headerSpan !== undefined && (this.headerSpan = src.headerSpan);
	        src.summarySpan !== undefined && (this.summarySpan = src.summarySpan);
	        src.footerSpan !== undefined && (this.footerSpan = src.footerSpan);
	    };
	    CellLayoutColumnItem.prototype.cleanColumns = function () {
	        this._columnObj && this._columnObj.clean();
	    };
	    CellLayoutColumnItem.prototype.$_isVisible = function () {
	        return this["_visible"] && (!this._columnObj || this._columnObj.visible);
	    };
	    CellLayoutColumnItem.prototype._getWidth = function (value) {
	        return !isNaN(value) ? value : this._columnObj ? this._columnObj.width : NaN;
	    };
	    CellLayoutColumnItem.prototype._prepareLayout = function (grid, fixed, rfixed) {
	        _super.prototype._prepareLayout.call(this, grid, fixed, rfixed);
	        if (this._columnObj) {
	            this._columnObj["_prepareLayout"](grid, this);
	            this._blankNodeRun = this._equalBlankNode;
	            this._blanked = this._equalBlank || this._blankNodeRun != null;
	            if (!this._blanked) {
	                if (this._equalBlankNode === undefined) {
	                    this._blanked = (this._blankNodeRun = this._columnObj["_equalBlankNode"]) != null;
	                }
	                if (!this._blanked && this._equalBlank === undefined) {
	                    this._blanked = this._columnObj["_equalBlank"];
	                }
	            }
	        }
	    };
	    CellLayoutColumnItem.prototype.toString = function () {
	        return typeof this._column === "string" ? this._column : _super.prototype.toString.call(this);
	    };
	    CellLayoutColumnItem.prototype.clearMergeGrouped = function () {
	        if (this.firstColumn instanceof GridColumn_1.DataColumn) {
	            (this.firstColumn)["$_setMergeGrouped"](false);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CellLayoutColumnItem.prototype.$_bindColumn = function (colMap, columns) {
	        if (!this._columnObj) {
	            this._columnObj = columns.columnByName(this._column);
	        }
	        if (this._columnObj) {
	            var hash = this._columnObj["$_hash"];
	            if (colMap[hash]) {
	                throw "Column is already contained in layouts: " + (this._columnObj.name || this._columnObj.displayText);
	            }
	            this._columnObj["_layout"] = this;
	            colMap[hash] = this;
	        }
	    };
	    CellLayoutColumnItem.prototype.$_mergeRuleObj = function () {
	        if (this._mergeRuleObj)
	            return this._mergeRuleObj;
	        if (this._mergeRuleObj === undefined && this._columnObj instanceof GridColumn_1.DataColumn) {
	            return this._columnObj["_mergeRuleObj"];
	        }
	        return null;
	    };
	    return CellLayoutColumnItem;
	}(CellLayoutItem));
	exports.CellLayoutColumnItem = CellLayoutColumnItem;
	var ColumnLayoutDirection;
	(function (ColumnLayoutDirection) {
	    ColumnLayoutDirection["VERTICAL"] = "vertical";
	    ColumnLayoutDirection["HORIZONTAL"] = "horizontal";
	})(ColumnLayoutDirection = exports.ColumnLayoutDirection || (exports.ColumnLayoutDirection = {}));
	var CellLayoutHeader = /** @class */ (function (_super) {
	    __extends(CellLayoutHeader, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellLayoutHeader() {
	        return _super.call(this) || this;
	    }
	    Object.defineProperty(CellLayoutHeader.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellLayoutHeader.prototype.isVisible = function () {
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CellLayoutHeader.prototype.assignSimple = function (source) {
	        if (typeof source === 'string') {
	            this.text = source;
	            return true;
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CellLayoutHeader.prototype._changed = function () {
	        this._layout && this._layout["_headerChanged"]();
	    };
	    return CellLayoutHeader;
	}(Base_1.Base));
	exports.CellLayoutHeader = CellLayoutHeader;
	var CellLayoutGroupHeader = /** @class */ (function (_super) {
	    __extends(CellLayoutGroupHeader, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellLayoutGroupHeader() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        return _this;
	    }
	    Object.defineProperty(CellLayoutGroupHeader.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CellLayoutGroupHeader.prototype.assignSimple = function (source) {
	        if (!_super.prototype.assignSimple.call(this, source)) {
	            if (typeof source === 'boolean') {
	                this.visible = source;
	                return true;
	            }
	        }
	        return false;
	    };
	    CellLayoutGroupHeader.prototype.isVisible = function () {
	        return this._visible;
	    };
	    return CellLayoutGroupHeader;
	}(CellLayoutHeader));
	exports.CellLayoutGroupHeader = CellLayoutGroupHeader;
	var CellLayoutGroupItem = /** @class */ (function (_super) {
	    __extends(CellLayoutGroupItem, _super);
	    // private _groupWidth = NaN;
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellLayoutGroupItem(name, direction) {
	        var _this = _super.call(this) || this;
	        _this._direction = ColumnLayoutDirection.HORIZONTAL;
	        _this._items = [];
	        _this._resizable = true;
	        _this._movable = true;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._visibles = [];
	        _this._cols = 0;
	        _this._rows = 0;
	        _this._headerCols = 0;
	        _this._headerRows = 0;
	        // private _footerCols = 0;
	        // private _footerRows = 0;
	        // private _summaryCols = 0;
	        // private _summaryRows = 0;
	        _this._cellWidths = []; // table col별 width
	        _this._name = name;
	        _this._direction = direction == ColumnLayoutDirection.VERTICAL ? ColumnLayoutDirection.VERTICAL : ColumnLayoutDirection.HORIZONTAL;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    CellLayoutGroupItem.getRight = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.rightOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getRight(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getLeft = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.leftOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getLeft(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getNext = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.nextOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getNext(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getPrev = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.prevOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getPrev(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getLower = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.lowerOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getLower(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getUpper = function (layout) {
	        var group = layout && layout.parent;
	        if (group) {
	            layout = group.upperOf(layout);
	            if (!layout) {
	                layout = CellLayoutGroupItem.getUpper(group);
	            }
	            return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.getTop = function (layout) {
	        var top = null;
	        while (layout) {
	            if (CellLayoutGroupItem.isTop(layout)) {
	                top = layout;
	                break;
	            }
	            var upper = CellLayoutGroupItem.getUpper(layout);
	            if (!upper) {
	                top = layout;
	                break;
	            }
	            layout = upper;
	        }
	        if (top) {
	            var group = top.group;
	            if (group) {
	                return top; //group.first();
	            }
	            else {
	                return top;
	            }
	        }
	        else {
	            return null;
	        }
	    };
	    CellLayoutGroupItem.getBottom = function (layout) {
	        var bottom = null;
	        while (layout) {
	            if (CellLayoutGroupItem.isBottom(layout)) {
	                bottom = layout;
	                break;
	            }
	            var lower = CellLayoutGroupItem.getLower(layout);
	            if (!lower) {
	                bottom = layout;
	                break;
	            }
	            layout = lower;
	        }
	        if (bottom) {
	            var group = bottom.group;
	            if (group) {
	                return bottom; //group.last();
	            }
	            else {
	                return bottom;
	            }
	        }
	        else {
	            return null;
	        }
	    };
	    CellLayoutGroupItem.isTop = function (layout) {
	        var group = layout && layout.parent;
	        while (group) {
	            if (group.vertical && group.visibleCount > 1 && layout.vindex > 0) {
	                return false;
	            }
	            layout = group;
	            group = layout.parent;
	        }
	        return true;
	    };
	    CellLayoutGroupItem.isBottom = function (layout) {
	        var group = layout && layout.parent;
	        while (group) {
	            if (group.vertical && group.visibleCount > 1 && layout.vindex < group.visibleCount - 1) {
	                return false;
	            }
	            layout = group;
	            group = layout.parent;
	        }
	        return true;
	    };
	    CellLayoutGroupItem.isLeft = function (layout) {
	        var group = layout && layout.parent;
	        while (group) {
	            if (!group.vertical && group.visibleCount > 1 && layout.vindex > 0) {
	                return false;
	            }
	            layout = group;
	            group = layout.parent;
	        }
	        return true;
	    };
	    CellLayoutGroupItem.isRight = function (layout) {
	        var group = layout && layout.parent;
	        while (group) {
	            if (group.vertical && group.visibleCount > 1 && layout.vindex < group.visibleCount - 1) {
	                return false;
	            }
	            layout = group;
	            group = layout.parent;
	        }
	        return true;
	    };
	    CellLayoutGroupItem.prototype._doDispose = function () {
	        this._items.forEach(function (item) { item && item["dispose"](); });
	        this._visibles = this._items = null;
	        this._cellWidths = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellLayoutGroupItem.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "direction", {
	        /** direction */
	        get: function () {
	            return this._direction;
	        },
	        set: function (value) {
	            debugger;
	            if (value != ColumnLayoutDirection.VERTICAL) {
	                value = ColumnLayoutDirection.HORIZONTAL;
	            }
	            if (value != this._direction) {
	                this._direction = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "vertical", {
	        /** vertical */
	        get: function () {
	            return this._direction == ColumnLayoutDirection.VERTICAL;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "horizontal", {
	        /** horizontal */
	        get: function () {
	            return this._direction != ColumnLayoutDirection.VERTICAL;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "resizable", {
	        /** resizable */
	        get: function () {
	            return this._resizable;
	        },
	        set: function (value) {
	            this._resizable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "movable", {
	        /** movable */
	        get: function () {
	            return this._movable;
	        },
	        set: function (value) {
	            this._movable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items.slice();
	        },
	        set: function (value) {
	            this._items = value ? value.slice() : [];
	            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	                var item = _a[_i];
	                item["_parent"] = this;
	            }
	            this._changed();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "visibleCount", {
	        /** visibleCount */
	        get: function () {
	            return this._visibles.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "visibles", {
	        /** visibles */
	        get: function () {
	            return this._visibles.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellLayoutGroupItem.prototype.contains = function (item) {
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var i = _a[_i];
	            if (i === item)
	                return true;
	        }
	        return false;
	    };
	    CellLayoutGroupItem.prototype.indexOf = function (item) {
	        for (var i = 0; i < this._items.length; i++) {
	            if (this._items[i] === item)
	                return i;
	        }
	        return -1;
	    };
	    CellLayoutGroupItem.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    CellLayoutGroupItem.prototype.getVisible = function (index) {
	        return this._visibles[index];
	    };
	    CellLayoutGroupItem.prototype.addColumn = function (column, index) {
	        var item = new CellLayoutColumnItem(column);
	        this.addItem(item, index);
	    };
	    CellLayoutGroupItem.prototype.addItem = function (item, index) {
	        if (index === undefined)
	            index = this._items.length;
	        if (item != null && index >= 0 && index <= this._items.length) {
	            this._items.splice(index, 0, item);
	            item["_parent"] = this;
	            this._changed();
	        }
	    };
	    CellLayoutGroupItem.prototype.clear = function (recursive) {
	        if (recursive === void 0) { recursive = true; }
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var item = _a[_i];
	            if (recursive && item instanceof CellLayoutGroupItem) {
	                item.clear();
	            }
	            item["_detach"]();
	        }
	        this._items = [];
	        this._visibles = [];
	        this._cols = 0;
	        this._rows = 0;
	        this._headerCols = 0;
	        this._headerRows = 0;
	        // this._footerCols = 0;
	        // this._footerRows = 0;
	        // this._summaryCols = 0;
	        // this._summaryRows = 0;
	    };
	    CellLayoutGroupItem.prototype.removeItem = function (item) {
	        var i = this.indexOf(item);
	        if (i >= 0) {
	            this._items.splice(i, 1);
	            item["_detach"]();
	        }
	    };
	    CellLayoutGroupItem.prototype.removeItemAt = function (index) {
	        if (index >= 0 && index < this._items.length) {
	            var items = this._items.splice(index, 1);
	            items[0]["_detach"]();
	        }
	    };
	    CellLayoutGroupItem.prototype.moveItem = function (from, to) {
	        var cnt = this._items.length;
	        if (from != to && from >= 0 && from < cnt && to >= 0 && to < cnt) {
	            var item = this._items[from];
	            this._items.splice(from, 1);
	            this._items.splice(to, 0, item);
	        }
	    };
	    CellLayoutGroupItem.prototype.getColumn = function (grid, row, col) {
	        var item = this.$_getLeaf(row, col);
	        var column = item.column;
	        if (typeof column === "string") {
	            return grid.columnByName(column);
	        }
	        return column;
	    };
	    CellLayoutGroupItem.prototype.findItem = function (column) {
	        if (column) {
	            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	                var item = _a[_i];
	                if (item instanceof CellLayoutColumnItem && item.column === column) {
	                    return item;
	                }
	                if (item instanceof CellLayoutGroupItem) {
	                    var i = item.findItem(column);
	                    if (i)
	                        return i;
	                }
	            }
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.rightOf = function (layout) {
	        if (this.horizontal) {
	            try {
	                var idx = this.$_checkVisible(layout);
	                if (idx < this.visibleCount - 1) {
	                    layout = $_getRightLayout(this, idx + 1);
	                    return layout;
	                }
	            }
	            catch (err) {
	            }
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.leftOf = function (layout) {
	        if (this.horizontal) {
	            try {
	                var idx = this.$_checkVisible(layout);
	                if (idx > 0) {
	                    layout = $_getLeftLayout(this, idx - 1);
	                    return layout;
	                }
	            }
	            catch (err) {
	            }
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.nextOf = function (layout) {
	        try {
	            var idx = this.$_checkVisible(layout);
	            if (idx < this.visibleCount - 1) {
	                layout = $_getNextLayout(this, idx + 1);
	                return layout;
	            }
	        }
	        catch (err) {
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.prevOf = function (layout) {
	        try {
	            var idx = this.$_checkVisible(layout);
	            if (idx > 0) {
	                layout = $_getPrevLayout(this, idx - 1);
	                return layout;
	            }
	        }
	        catch (err) {
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.lowerOf = function (layout) {
	        if (this.vertical) {
	            try {
	                var idx = this.$_checkVisible(layout);
	                if (idx < this.count - 1) {
	                    layout = $_getLowerLayout(this, idx + 1);
	                    return layout;
	                }
	            }
	            catch (err) {
	            }
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.upperOf = function (layout) {
	        if (this.vertical) {
	            try {
	                var idx = this.$_checkVisible(layout);
	                if (idx > 0) {
	                    layout = $_getUpperLayout(this, idx - 1);
	                    return layout;
	                }
	            }
	            catch (err) {
	            }
	        }
	        return null;
	    };
	    Object.defineProperty(CellLayoutGroupItem.prototype, "cols", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._cols;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "headerRows", {
	        get: function () {
	            return this._headerRows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "rows", {
	        get: function () {
	            return this._rows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "first", {
	        // get footerRows(): number {
	        //     return this._footerRows;
	        // }
	        // get summaryRows(): number {
	        //     return this._summaryRows;
	        // }
	        get: function () {
	            return this._visibles.length > 0 ? this._visibles[0].first : this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "last", {
	        get: function () {
	            var len = this._visibles.length;
	            return len > 0 ? this._visibles[len - 1].last : this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "firstColumn", {
	        get: function () {
	            return this._visibles.length > 0 ? this._visibles[0].firstColumn : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellLayoutGroupItem.prototype, "boundColumn", {
	        get: function () {
	            return this.firstColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellLayoutGroupItem.prototype._createHeader = function () {
	        return new CellLayoutGroupHeader();
	    };
	    CellLayoutGroupItem.prototype.load = function (src) {
	        this.clear();
	        src.items && this._loadItems(src.items);
	        _super.prototype.load.call(this, src);
	    };
	    CellLayoutGroupItem.prototype.findLayout = function (column) {
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var item = _a[_i];
	            var layout = item.findLayout(column);
	            if (layout)
	                return layout;
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.cleanColumns = function () {
	        for (var i = 0, cnt = this.items.length; i < cnt; i++) {
	            this.getItem(i).cleanColumns();
	        }
	    };
	    CellLayoutGroupItem.prototype._isResizable = function () {
	        return this._resizable;
	    };
	    CellLayoutGroupItem.prototype._isMovable = function () {
	        return this._movable;
	    };
	    CellLayoutGroupItem.prototype.getCellWidth = function (col) {
	        return 100;
	    };
	    /**
	     * width가 NaN인 경우 자식들의 너비를 배분 조정한다.
	     */
	    CellLayoutGroupItem.prototype._incCellWidth = function (dw, fitting) {
	        if (isNaN(this.width)) {
	            if (this.horizontal) {
	                var sum = 0;
	                for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	                    var item = _a[_i];
	                    sum += item["_cellWidth"];
	                }
	                for (var _b = 0, _c = this._visibles; _b < _c.length; _b++) {
	                    var item = _c[_b];
	                    item["_incCellWidth"](dw * item["_cellWidth"] / sum, fitting);
	                }
	            }
	            else {
	                for (var _e = 0, _f = this._visibles; _e < _f.length; _e++) {
	                    var item = _f[_e];
	                    item["_incCellWidth"](dw, fitting);
	                }
	            }
	        }
	        else {
	            _super.prototype._incCellWidth.call(this, dw, fitting);
	        }
	    };
	    CellLayoutGroupItem.prototype._clearFitWidths = function () {
	        _super.prototype._clearFitWidth.call(this);
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            item["_clearFitWidth"]();
	        }
	    };
	    CellLayoutGroupItem.prototype._prepareLayout = function (grid, fixed, rfixed) {
	        _super.prototype._prepareLayout.call(this, grid, fixed, rfixed);
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            item["_prepareLayout"](grid, fixed, rfixed);
	        }
	    };
	    CellLayoutGroupItem.prototype.toString = function () {
	        return this._name || _super.prototype.toString.call(this);
	    };
	    CellLayoutGroupItem.prototype.clearMergeGrouped = function () {
	        for (var i = 0, cnt = this.items.length; i < cnt; i++) {
	            this.getItem(i).clearMergeGrouped();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CellLayoutGroupItem.prototype._setColumns = function (columns) {
	        this._items.length = 0;
	        for (var i = 0, cnt = columns.count; i < cnt; i++) {
	            var item = new CellLayoutColumnItem(columns.getColumn(i));
	            this._items.push(item);
	            item["_parent"] = this;
	            //item["_index"] = i;
	            // if (item.visible) {
	            //     this._visibles.push(item);
	            //     item["_vindex"] = this._visibles.length - 1;
	            // }
	        }
	    };
	    CellLayoutGroupItem.prototype._loadItems = function (source) {
	        for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {
	            var src = source_1[_i];
	            var item = void 0;
	            if (typeof src === "string") {
	                item = new CellLayoutColumnItem(src);
	            }
	            else if (typeof src == "number") {
	                item = new CellLayoutColumnItem(null);
	                item.width = src;
	            }
	            else if (src) {
	                if (src.items) {
	                    item = new CellLayoutGroupItem(src.name, src.direction);
	                }
	                else {
	                    item = new CellLayoutColumnItem(src.column);
	                }
	            }
	            if (item) {
	                item["_parent"] = this;
	                item.load(src);
	                this._items.push(item);
	                //item["_index"] = this._items.length - 1;
	                // if (item.visible) {
	                //     this._visibles.push(item);
	                //     item["_vindex"] = this._visibles.length - 1;
	                // }
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_bindColumns = function (colMap, columns) {
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var item = _a[_i];
	            item["_root"] = null;
	            if (item instanceof CellLayoutGroupItem) {
	                item.$_bindColumns(colMap, columns);
	            }
	            else {
	                item["$_bindColumn"](colMap, columns);
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_parseHeaderCells = function (cells, row, col) {
	        var isHorz = this._direction === ColumnLayoutDirection.HORIZONTAL;
	        var hlen = 0;
	        var clen = 0;
	        var dy = this._header.isVisible() ? 1 : 0;
	        //debugger;
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            // header
	            var h = item.header.isVisible() ? 1 : 0;
	            item["_hrow"] = row;
	            item["_hcol"] = col;
	            item["_hspan"] = h;
	            item["_cspan"] = 1;
	            // children
	            if (item instanceof CellLayoutGroupItem) {
	                // header가 hidden이면 위치 정보 등은 설정하지만 cells 배열에서는 제외한다.
	                if (h > 0) {
	                    cells[row][col] = item;
	                }
	                item.$_parseHeaderCells(cells, row + h, col);
	                if (h > 0) {
	                    if (isHorz) {
	                        // header cell의 오른쪽 나머지를 채운다.
	                        col++;
	                        for (var i = 1; i < item.cols; i++) {
	                            cells[row][col++] = new ProxyCellLayoutItem(item, i);
	                        }
	                    }
	                    else {
	                        // header cell의 오른쪽 나머지를 채운다.
	                        for (var i = 1; i < item.cols; i++) {
	                            cells[row][col + i] = new ProxyCellLayoutItem(item, i);
	                        }
	                        row += item.headerRows;
	                    }
	                }
	                else {
	                    if (isHorz) {
	                        col += item.cols;
	                    }
	                    else {
	                        row += item.headerRows;
	                    }
	                }
	            }
	            else {
	                cells[row][col] = item;
	                // 그룹의 너비/높이에 맞춰 자신을 제외한 나머지 행들을 채운다.
	                if (isHorz) {
	                    for (var i = 1; i < this.headerRows - dy; i++) {
	                        cells[row + i][col] = new ProxyCellLayoutItem(item, i);
	                        item["_hspan"]++;
	                    }
	                    item["_hlen"] = item["_hspan"];
	                    col += item.cols;
	                }
	                else {
	                    for (var i = 1; i < this.cols; i++) {
	                        cells[row][col + i] = new ProxyCellLayoutItem(item, i);
	                        item["_cspan"]++;
	                    }
	                    item["_clen"] = item["_cspan"];
	                    row += item.rows;
	                }
	            }
	            if (isHorz) {
	                clen += item["_clen"];
	                hlen = Math.max(item["_hlen"], hlen);
	            }
	            else {
	                clen = Math.max(item["_clen"], clen);
	                hlen += item["_hlen"];
	            }
	        }
	        if (isHorz) {
	            clen = Math.max(1, clen);
	            hlen = hlen + (this._header.isVisible() ? 1 : 0);
	            this._cspan = this._clen = clen;
	            this._hlen = hlen;
	        }
	        else {
	            //clen = clen + 1;
	            hlen = Math.max(1, hlen + (this._header.isVisible() ? 1 : 0));
	            this["_clen"] = this["_cspan"] = clen;
	            this["_hlen"] = hlen;
	            // // clen보다 작은 자식들의 오른쪽을 채운다.
	            // for (let item of this._visibles) {
	            //     if (item instanceof CellLayoutGroupItem && item["_clen"] < clen) {
	            //         r1 += item.row;
	            //         c1 += item.col;
	            //         for (let y = 0; y < item["_hlen"] - 1; y++) {
	            //             for (let c = item["_clen"]; c < clen; c++) {
	            //                 if (c > 0) {
	            //                     const prev = cells[item.row + y][item.col + c - 1];
	            //                     if (prev instanceof ProxyCellLayoutItem) {
	            //                         cells[r1 + y][c1 + c] = new ProxyCellLayoutItem(prev.source, c); 
	            //                     } else {
	            //                         cells[r1 + y][c1 + c] = new ProxyCellLayoutItem(item, c); 
	            //                     }
	            //                 } else {
	            //                     cells[r1 + y][c1 + c] = new ProxyCellLayoutItem(item, c); 
	            //                 }
	            //             }
	            //         }
	            //     }
	            // }
	        }
	    };
	    // 가장 오른쪽 셀을 확장한다.
	    CellLayoutGroupItem.prototype.$_fillHorz = function (cells, rows, row, col, dy, header) {
	        var r = row + dy;
	        var c1 = col;
	        var c2 = c1 + this._clen - 1;
	        for (var i = 0, cnt = rows - dy; i < cnt; i++) {
	            for (var c = c2; c >= c1; c--) {
	                var layout = cells[r + i][c];
	                if (layout != null) {
	                    if (layout instanceof ProxyCellLayoutItem) {
	                        layout = layout.source;
	                    }
	                    for (var j = c + 1; j <= c2; j++) {
	                        var px = cells[r + i][j] = new ProxyCellLayoutItem(layout, j - c1);
	                        if (header) {
	                            px["_hrow"] = r + i;
	                            px["_hcol"] = j;
	                            layout["_cspan"]++;
	                            if (layout instanceof CellLayoutColumnItem) {
	                                layout["_clen"]++;
	                            }
	                        }
	                        else {
	                            px["_row"] = r + i;
	                            px["_col"] = j;
	                            // header에서 이미 늘려놨으므로 하면 안된다.
	                            //layout["_cspan"]++;
	                            //layout["_clen"]++;
	                        }
	                    }
	                    break;
	                }
	            }
	        }
	    };
	    // 가장 아래쪽 셀을 확장한다.
	    CellLayoutGroupItem.prototype.$_fillVert = function (cells, rows, cols, row, col, dy, header) {
	        var r1 = row + dy;
	        var r2 = row + rows - 1;
	        var c1 = col;
	        var c2 = c1 + cols - 1;
	        for (var c = c1; c <= c2; c++) {
	            for (var r = r2; r >= r1; r--) {
	                var layout = cells[r][col];
	                if (layout != null) {
	                    if (layout instanceof ProxyCellLayoutItem) {
	                        layout = layout.source;
	                    }
	                    for (var j = r + 1; j <= r2; j++) {
	                        var px = cells[j][c] = new ProxyCellLayoutItem(layout, j - r1);
	                        if (header) {
	                            px["_hrow"] = j;
	                            px["_hcol"] = c;
	                            layout["_hspan"]++;
	                            if (layout instanceof CellLayoutColumnItem) {
	                                layout["_hlen"]++;
	                            }
	                        }
	                        else {
	                            px["_row"] = j;
	                            px["_col"] = c;
	                            layout["_dspan"]++;
	                            if (layout instanceof CellLayoutColumnItem) {
	                                layout["_dlen"]++;
	                            }
	                        }
	                    }
	                    break;
	                }
	            }
	        }
	    };
	    /**
	     * 비어 있는 셀들을 채운다.
	     * 바로 아래 자식 item들의 너비/높이를 자신의 높이/너비에 맞춘다.
	     */
	    CellLayoutGroupItem.prototype.$_adjustHeaderCells = function (cells) {
	        var vHeader = this._header.isVisible();
	        var dy = vHeader ? 1 : 0;
	        var isHorz = this._direction != ColumnLayoutDirection.VERTICAL;
	        if (isHorz) {
	            for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	                var item = _a[_i];
	                if (item instanceof CellLayoutGroupItem) {
	                    item._hlen = this._hlen - dy;
	                    item.$_adjustHeaderCells(cells);
	                }
	            }
	            this.$_fillHorz(cells, this._hlen, this._hrow, this._hcol, dy, true);
	        }
	        else {
	            var cols = this._clen;
	            for (var _b = 0, _c = this._visibles; _b < _c.length; _b++) {
	                var item = _c[_b];
	                if (item instanceof CellLayoutGroupItem) {
	                    // for (let c = item._clen; c < cols; c++) {
	                    //     // header를 확장한다.
	                    //     if (item.header.isVisible()) {
	                    //         cells[item._hrow][item._hcol + c] = new ProxyCellLayoutItem(item, c);
	                    //     }
	                    //     // item._clen++;
	                    //     // item._cspan++;
	                    // }
	                    item._clen = this._clen;
	                    item.$_adjustHeaderCells(cells);
	                }
	            }
	            this.$_fillVert(cells, this._hlen, cols, this._hrow, this._hcol, dy, true);
	        }
	    };
	    CellLayoutGroupItem.prototype.$_parseDataCells = function (cells, row, col) {
	        var isHorz = this._direction != ColumnLayoutDirection.VERTICAL;
	        var dlen = 0;
	        // let clen = 0;
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            item["_row"] = row;
	            item["_col"] = col;
	            item["_dspan"] = 1;
	            //item["_cspan"] = 1;
	            if (item instanceof CellLayoutGroupItem) {
	                item.$_parseDataCells(cells, row, col);
	                if (isHorz) {
	                    // for (let i = 1; i < item.cols; i++) {
	                    //     cells[row][++col] = new ProxyCellLayoutItem(item, i);
	                    // }
	                    // col++;
	                    col += item.cols;
	                }
	                else {
	                    // for (let i = 1; i < item.rows; i++) {
	                    //     cells[++row][col] = new ProxyCellLayoutItem(item, i);
	                    // }
	                    // row++;
	                    row += item.rows;
	                }
	            }
	            else {
	                cells[row][col] = item;
	                // 그룹의 너비/높이에 맞춰 자신을 제외한 나머지 행들을 채운다.
	                if (isHorz) {
	                    for (var i = 1; i < this.rows; i++) {
	                        cells[row + i][col] = new ProxyCellLayoutItem(item, i);
	                        item["_dspan"]++;
	                    }
	                    item["_dlen"] = item["_dspan"];
	                    col += item.cols;
	                }
	                else {
	                    for (var i = 1; i < this.cols; i++) {
	                        cells[row][col + i] = new ProxyCellLayoutItem(item, i);
	                        // item["_cspan"]++;
	                    }
	                    // item["_clen"] = item["_cspan"]
	                    row += item.rows;
	                }
	            }
	            if (isHorz) {
	                // clen += item["_clen"];
	                dlen = Math.max(item["_dlen"], dlen);
	            }
	            else {
	                // clen = Math.max(item["_clen"], clen);
	                dlen += item["_dlen"];
	            }
	        }
	        if (isHorz) {
	            // clen = Math.max(1, clen);
	            // this["_cspan"] = this["_clen"] = clen;
	            this._dlen = dlen;
	        }
	        else {
	            dlen = Math.max(1, dlen);
	            // this["_clen"] = clen;
	            this._dlen = dlen;
	        }
	    };
	    /**
	     * 비어 있는 셀들을 채운다.
	     * 바로 아래 자식 item들의 너비/높이를 자신의 높이/너비에 맞춘다.
	     */
	    CellLayoutGroupItem.prototype.$_adjustDataCells = function (cells) {
	        var isHorz = this._direction != ColumnLayoutDirection.VERTICAL;
	        if (isHorz) {
	            for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	                var item = _a[_i];
	                if (item instanceof CellLayoutGroupItem) {
	                    item._dlen = this._dlen;
	                    item.$_adjustDataCells(cells);
	                }
	            }
	            this.$_fillHorz(cells, this._dlen, this._row, this._col, 0, false);
	        }
	        else {
	            var cols = this._clen;
	            for (var _b = 0, _c = this._visibles; _b < _c.length; _b++) {
	                var item = _c[_b];
	                if (item instanceof CellLayoutGroupItem) {
	                    // for (let c = item._clen; c < cols; c++) {
	                    //     item._clen++;
	                    //     item._cspan++;
	                    // }
	                    item._clen = this._clen;
	                    item.$_adjustDataCells(cells);
	                }
	            }
	            this.$_fillVert(cells, this._dlen, cols, this._row, this._col, 0, false);
	        }
	    };
	    // private $_parseFooterCells(cells: CellLayoutItem[][], row: number, col: number): void {
	    //     const isHorz = this._direction === ColumnLayoutDirection.HORIZONTAL;
	    //     let flen = 0;
	    //     let clen = 0;
	    //     for (let item of this._visibles) {
	    //         if (item instanceof CellLayoutGroupItem) {
	    //             item.$_parseFooterCells(cells, row, col)
	    //             if (isHorz) {
	    //                 // for (let i = 1; i < item.cols; i++) {
	    //                 //     cells[row][++col] = new ProxyCellLayoutItem(item, i);
	    //                 // }
	    //                 // col++;
	    //                 col += item.cols;
	    //             } else {
	    //                 // for (let i = 1; i < item.rows; i++) {
	    //                 //     cells[++row][col] = new ProxyCellLayoutItem(item, i);
	    //                 // }
	    //                 // row++;
	    //                 row += item.rows;
	    //             }
	    //         } else {
	    //             cells[row][col] = item;
	    //             item["_frow"] = row;
	    //             item["_fcol"] = col;
	    //             item["_fspan"] = 1;
	    //             item["_cspan"] = 1;
	    //             if (isHorz) {
	    //                 for (let i = 1; i < this.footerRows; i++) {
	    //                     cells[row + i][col] = new ProxyCellLayoutItem(item, i);
	    //                     item["_fspan"]++;
	    //                 }
	    //                 item["_flen"] = item["_fspan"];
	    //                 col += item.cols;
	    //             } else {
	    //                 for (let i = 1; i < this.cols; i++) {
	    //                     cells[row][col + i] = new ProxyCellLayoutItem(item, i);
	    //                     item["_cspan"]++;
	    //                 }
	    //                 item["_clen"] = item["_cspan"];
	    //                 row += item.rows;
	    //             }
	    //         }
	    //         if (isHorz) {
	    //             clen += item["_clen"];
	    //             flen = Math.max(item["_flen"], flen);
	    //         } else {
	    //             clen = Math.max(item["_clen"], clen);
	    //             flen += item["_flen"];
	    //         }
	    //     }
	    //     if (isHorz) {
	    //         clen = Math.max(1, clen);
	    //         this["_cspan"] = this["_clen"] = clen;
	    //         this["_flen"] = flen;
	    //     } else {
	    //         flen = Math.max(1, flen);
	    //         this["_clen"] = clen;
	    //         this["_flen"] = flen;
	    //     }
	    // }
	    // /**
	    //  * 비어 있는 셀들을 채운다.
	    //  * 바로 아래 자식 item들의 너비/높이를 자신의 높이/너비에 맞춘다.
	    //  */
	    // private $_adjustFooterCells(cells: CellLayoutItem[][]): void {
	    //     const isHorz = this._direction != ColumnLayoutDirection.VERTICAL;
	    //     if (isHorz) {
	    //         this.$_fillHorz(cells, this._flen, this._frow, this._fcol, 0);
	    //         for (let item of this._visibles) {
	    //             if (item instanceof CellLayoutGroupItem) {
	    //                 item.$_adjustFooterCells(cells)
	    //             } else {
	    //             }
	    //         }
	    //     } else {
	    //         const cols = this._clen;
	    //         for (let item of this._visibles) {
	    //             if (item instanceof CellLayoutGroupItem) {
	    //                 for (let c = item._clen; c < cols; c++) {
	    //                     item._clen++;
	    //                     item._cspan++;
	    //                 }
	    //                 item.$_adjustFooterCells(cells)
	    //             } else {
	    //             }
	    //         }
	    //     }
	    // }
	    // private $_parseSummaryCells(cells: CellLayoutItem[][], row: number, col: number): void {
	    //     const isHorz = this._direction === ColumnLayoutDirection.HORIZONTAL;
	    //     let flen = 0;
	    //     let clen = 0;
	    //     for (let item of this._visibles) {
	    //         if (item instanceof CellLayoutGroupItem) {
	    //             item.$_parseSummaryCells(cells, row, col)
	    //             if (isHorz) {
	    //                 // for (let i = 1; i < item.cols; i++) {
	    //                 //     cells[row][++col] = new ProxyCellLayoutItem(item, i);
	    //                 // }
	    //                 // col++;
	    //                 col += item.cols;
	    //             } else {
	    //                 // for (let i = 1; i < item.rows; i++) {
	    //                 //     cells[++row][col] = new ProxyCellLayoutItem(item, i);
	    //                 // }
	    //                 // row++;
	    //                 row += item.rows;
	    //             }
	    //         } else {
	    //             cells[row][col] = item;
	    //             item["_srow"] = row;
	    //             item["_scol"] = col;
	    //             item["_sspan"] = 1;
	    //             item["_cspan"] = 1;
	    //             if (isHorz) {
	    //                 for (let i = 1; i < this.summaryRows; i++) {
	    //                     cells[row + i][col] = new ProxyCellLayoutItem(item, i);
	    //                     item["_slen"] = ++item["_sspan"];
	    //                 }
	    //                 col += item.cols;
	    //             } else {
	    //                 for (let i = 1; i < this.cols; i++) {
	    //                     cells[row][col + i] = new ProxyCellLayoutItem(item, i);
	    //                     item["_clen"] = ++item["_cspan"];
	    //                 }
	    //                 row += item.rows;
	    //             }
	    //         }
	    //         if (isHorz) {
	    //             clen += item["_clen"];
	    //             flen = Math.max(item["_slen"], flen);
	    //         } else {
	    //             clen = Math.max(item["_clen"], clen);
	    //             flen += item["_flen"];
	    //         }
	    //     }
	    //     if (isHorz) {
	    //         clen = Math.max(1, clen);
	    //         this["_cspan"] = this["_clen"] = clen;
	    //         this["_slen"] = flen;
	    //     } else {
	    //         flen = Math.max(1, flen);
	    //         this["_clen"] = clen;
	    //         this["_slen"] = flen;
	    //     }
	    // }
	    // /**
	    //  * 비어 있는 셀들을 채운다.
	    //  * 바로 아래 자식 item들의 너비/높이를 자신의 높이/너비에 맞춘다.
	    //  */
	    // private $_adjustSummaryCells(cells: CellLayoutItem[][]): void {
	    //     const isHorz = this._direction != ColumnLayoutDirection.VERTICAL;
	    //     if (isHorz) {
	    //         this.$_fillHorz(cells, this._slen, this._srow, this._scol, 0);
	    //         for (let item of this._visibles) {
	    //             if (item instanceof CellLayoutGroupItem) {
	    //                 item.$_adjustSummaryCells(cells)
	    //             } else {
	    //             }
	    //         }
	    //     } else {
	    //         const cols = this._clen;
	    //         for (let item of this._visibles) {
	    //             if (item instanceof CellLayoutGroupItem) {
	    //                 for (let c = item._clen; c < cols; c++) {
	    //                     item._clen++;
	    //                     item._cspan++;
	    //                 }
	    //                 item.$_adjustSummaryCells(cells)
	    //             } else {
	    //             }
	    //         }
	    //     }
	    // }
	    // private $_resetCellWidths(): void {
	    //     const widths = this._cellWidths;
	    //     widths.length = 0;
	    //     if (this.vertical) {
	    //         for (let item of this._visibles) {
	    //             const ws = item["_cellWidths"];
	    //             if (ws.length > widths.length) {
	    //                 for (let i = 0; i < ws.length; i++) {
	    //                     widths[i] = ws[i];
	    //                 }
	    //             }
	    //         }
	    //     } else {
	    //         for (let item of this._visibles) {
	    //             const ws = item["_cellWidths"];
	    //             for (let i = 0; i < ws.length; i++) {
	    //                 widths.push(ws[i])
	    //             }
	    //         }
	    //     }
	    // }
	    CellLayoutGroupItem.prototype.$_resetSpans = function () {
	        if (this._direction == ColumnLayoutDirection.HORIZONTAL) {
	            var cols = 0;
	            var hrows = 1;
	            var rows = 1;
	            for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	                var item = _a[_i];
	                if (item instanceof CellLayoutGroupItem) {
	                    item.$_resetSpans();
	                }
	                cols += item.cols;
	                hrows = Math.max(hrows, item.headerRows);
	                rows = Math.max(rows, item.rows);
	            }
	            this._cols = cols;
	            this._headerRows = hrows + (this._header.isVisible() ? 1 : 0);
	            this._rows = rows;
	            // this._footerRows = rows;
	            // this._summaryRows = rows;
	        }
	        else {
	            this._cols = 1;
	            this._headerRows = this._header.isVisible() ? 1 : 0;
	            this._rows = 0;
	            // this._footerRows = 0;
	            // this._summaryRows = 0;
	            for (var _b = 0, _c = this._visibles; _b < _c.length; _b++) {
	                var item = _c[_b];
	                if (item instanceof CellLayoutGroupItem) {
	                    item.$_resetSpans();
	                }
	                this._headerRows += item.headerRows;
	                this._rows += item.rows;
	                // this._footerRows += item.footerRows;
	                // this._summaryRows += item.summaryRows;
	                this._cols = Math.max(item.cols, this._cols);
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_resetVisibles = function () {
	        var vertical = this.vertical;
	        var y = this["_y"];
	        var d = this["_d"];
	        var i = 0;
	        var v = 0;
	        this._visibles = [];
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var item = _a[_i];
	            var vis = item["$_isVisible"]();
	            item["_index"] = i++;
	            if (vis) {
	                this._visibles.push(item);
	                item["_y"] = vertical ? y + 1 : y;
	                item["_vindex"] = v++;
	            }
	            if (item instanceof CellLayoutGroupItem) {
	                item["$_resetVisibles"]();
	            }
	            if (vis) {
	                if (vertical) {
	                    item["_d"] = Math.max(d, item["_vindex"]);
	                }
	                else {
	                    item["_d"] = d + item["_vindex"];
	                }
	            }
	        }
	        this.$_resetSpans();
	    };
	    CellLayoutGroupItem.prototype.$_getLeaf = function (row, col) {
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            if (item instanceof CellLayoutGroupItem) {
	                var r = item.row;
	                var r2 = r + item.rows;
	                if (row >= r && row < r2) {
	                    var c = item.col;
	                    var c2 = c + item.cols;
	                    if (col >= c && col < c2) {
	                        return this.$_getLeaf(row - r, col - c);
	                    }
	                }
	            }
	            else if (item.row === row && item.col === col) {
	                return item;
	            }
	        }
	        return null;
	    };
	    CellLayoutGroupItem.prototype.$_collectCellWidths = function (minCellWidth) {
	        var widths = this._cellWidths = [];
	        for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	            var item = _a[_i];
	            var w_1 = item.width;
	            if (item instanceof CellLayoutColumnItem && isNaN(w_1)) {
	                w_1 = minCellWidth;
	            }
	            if (item instanceof CellLayoutGroupItem) {
	                var w2 = item.$_collectCellWidths(minCellWidth);
	                if (isNaN(w_1))
	                    w_1 = w2;
	            }
	            widths.push(item["_cellWidth"] = w_1);
	        }
	        var w = this.width;
	        if (isNaN(this.width)) {
	            w = 0;
	            if (this.vertical) {
	                for (var _b = 0, widths_1 = widths; _b < widths_1.length; _b++) {
	                    var cw = widths_1[_b];
	                    w = Math.max(w, cw);
	                }
	            }
	            else {
	                for (var _c = 0, widths_2 = widths; _c < widths_2.length; _c++) {
	                    var cw = widths_2[_c];
	                    w += cw;
	                }
	            }
	        }
	        return w;
	    };
	    CellLayoutGroupItem.prototype.$_arrangeCellWidths = function () {
	        var cnt = this._visibles.length;
	        if (cnt < 1)
	            return;
	        var w = this.width;
	        var items = this._visibles;
	        if (!isNaN(w)) {
	            if (this.vertical) {
	                for (var i = 0; i < cnt; i++) {
	                    items[i]["_cellWidth"] = w;
	                    this._cellWidths[i] = w;
	                }
	            }
	            else {
	                var len = 0;
	                for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
	                    var item_1 = items_1[_i];
	                    len += item_1["_cellWidth"];
	                }
	                var sum = len;
	                for (var i = 0; i < cnt - 1; i++) {
	                    var item_2 = items[i];
	                    var cw = Math.floor(w * item_2["_cellWidth"] / len);
	                    items[i]["_cellWidth"] = cw;
	                    this._cellWidths[i] = cw;
	                    sum -= cw;
	                }
	                var item = items[cnt - 1];
	                item["_cellWidth"] = sum;
	                this._cellWidths[cnt - 1] = sum;
	            }
	        }
	        for (var _a = 0, items_2 = items; _a < items_2.length; _a++) {
	            var item = items_2[_a];
	            if (item instanceof CellLayoutGroupItem) {
	                item.$_arrangeCellWidths();
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_fillCellWidths = function (col, widths) {
	        var c = col;
	        if (this.vertical) {
	            for (var _i = 0, _a = this._visibles; _i < _a.length; _i++) {
	                var item = _a[_i];
	                if (item instanceof CellLayoutGroupItem) {
	                    item.$_fillCellWidths(c, widths);
	                }
	                else {
	                    widths[c] = Math.max(widths[c], item["_cellWidth"]);
	                }
	            }
	        }
	        else {
	            for (var _b = 0, _c = this._visibles; _b < _c.length; _b++) {
	                var item = _c[_b];
	                if (item instanceof CellLayoutGroupItem) {
	                    item.$_fillCellWidths(c, widths);
	                    c += item.cols;
	                }
	                else {
	                    widths[c] = Math.max(widths[c], item["_cellWidth"]);
	                    c++;
	                }
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype._childIndexChanged = function (item) {
	        this.parent && this.parent["_childIndexChanged"](item);
	    };
	    CellLayoutGroupItem.prototype._childWidthChanged = function (item) {
	        this.parent && this.parent["_childWidthChanged"](item);
	    };
	    CellLayoutGroupItem.prototype._childFillWidthChanged = function (item) {
	        this.parent && this.parent["_childFillWidthChanged"](item);
	    };
	    CellLayoutGroupItem.prototype.$_checkVisible = function (item) {
	        var i;
	        if (!item || (i = item.vindex) < 0 || item !== this.getVisible(i)) {
	            throw new Error("Column is not a visible group member");
	        }
	        return i;
	    };
	    CellLayoutGroupItem.prototype.$_collectHorzColumns = function (list, start, end) {
	        if (this.horizontal) {
	            for (var i = start; i <= end; i++) {
	                var layout = this._visibles[i];
	                if (layout instanceof CellLayoutGroupItem) {
	                    layout.$_collectHorzColumns(list, 0, layout.visibleCount - 1);
	                }
	                else if (layout instanceof CellLayoutColumnItem) {
	                    list.push(layout["_columnObj"]);
	                }
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_changeChildVIndex = function (item, newIndex) {
	        if (item) {
	            var index = item.vindex;
	            if (newIndex != index && newIndex >= 0 && newIndex < this._visibles.length) {
	                this.$_changeChildIndex(item, this._visibles[newIndex].index);
	            }
	        }
	    };
	    CellLayoutGroupItem.prototype.$_changeChildIndex = function (item, newIndex) {
	        if (item) {
	            var index = item.index;
	            if (index != newIndex && newIndex >= 0 && newIndex < this._items.length) {
	                this._items.splice(index, 1);
	                this._items.splice(newIndex, 0, item);
	                this._childIndexChanged(item);
	            }
	        }
	    };
	    return CellLayoutGroupItem;
	}(CellLayoutItem));
	exports.CellLayoutGroupItem = CellLayoutGroupItem;
	var $_getRightLayout = function (group, from) {
	    for (var i = from, cnt = group.visibleCount; i < cnt; i++) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.first;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_getLeftLayout = function (group, from) {
	    for (var i = from; i >= 0; i--) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.last;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_getNextLayout = function (group, from) {
	    for (var i = from, cnt = group.visibleCount; i < cnt; i++) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.first;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_getPrevLayout = function (group, from) {
	    for (var i = from; i >= 0; i--) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.last;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_getLowerLayout = function (group, from) {
	    for (var i = from, cnt = group.visibleCount; i < cnt; i++) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.first;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_getUpperLayout = function (group, from) {
	    for (var i = from; i >= 0; i--) {
	        var layout = group.getVisible(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            return layout;
	        }
	        if (layout instanceof CellLayoutGroupItem) {
	            layout = layout.last;
	            if (layout instanceof CellLayoutColumnItem) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $_collectColumns = function (group, columns, visibleOnly) {
	    var cnt = visibleOnly ? group.visibleCount : group.count;
	    for (var i = 0; i < cnt; i++) {
	        var layout = visibleOnly ? group.getVisible(i) : group.getItem(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            columns.push(layout["_columnObj"]);
	        }
	        else if (layout instanceof CellLayoutGroupItem) {
	            $_collectColumns(layout, columns, visibleOnly);
	        }
	    }
	};
	var $_collectDataColumns = function (group, columns, visibleOnly) {
	    var cnt = visibleOnly ? group.visibleCount : group.count;
	    for (var i = 0; i < cnt; i++) {
	        var layout = visibleOnly ? group.getVisible(i) : group.getItem(i);
	        if (layout instanceof CellLayoutColumnItem) {
	            columns.push(layout["_columnObj"]);
	        }
	        else if (layout instanceof CellLayoutGroupItem) {
	            $_collectDataColumns(layout, columns, visibleOnly);
	        }
	    }
	};
	var RootCellLayout = /** @class */ (function (_super) {
	    __extends(RootCellLayout, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RootCellLayout(owner) {
	        var _this = _super.call(this, "$_root_$", null) || this;
	        _this._owner = owner;
	        _this.header["_visible"] = false;
	        return _this;
	    }
	    Object.defineProperty(RootCellLayout.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._owner.grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootCellLayout.prototype, "root", {
	        get: function () {
	            return this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RootCellLayout.prototype._changed = function () {
	        this._owner && this._owner["_changed"]();
	    };
	    RootCellLayout.prototype._childIndexChanged = function (item) {
	        this._owner["_itemIndexChanged"](item);
	    };
	    RootCellLayout.prototype._childWidthChanged = function (item) {
	        this._owner["_itemWidthChanged"](item);
	    };
	    RootCellLayout.prototype._childFillWidthChanged = function (item) {
	        this._owner["_itemFillWidthChanged"](item);
	    };
	    return RootCellLayout;
	}(CellLayoutGroupItem));
	var GridCellLayout = /** @class */ (function (_super) {
	    __extends(GridCellLayout, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridCellLayout(grid) {
	        var _this = _super.call(this) || this;
	        _this._dirty = false;
	        _this._resized = false;
	        _this._headerCells = [];
	        _this._dataCells = [];
	        // private _footerCells: CellLayoutItem[][] = [];
	        // private _summaryCells: CellLayoutItem[][] = [];
	        _this._cellWidths = [];
	        _this._grid = grid;
	        _this._root = new RootCellLayout(_this);
	        return _this;
	    }
	    GridCellLayout.prototype._doDispose = function () {
	        this._grid = null;
	        this._root = this._root.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridCellLayout.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._root.count;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "visibleCount", {
	        /** visibleCount */
	        get: function () {
	            return this._root.visibleCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "headerRows", {
	        get: function () {
	            return this._root["_hlen"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "dataRows", {
	        get: function () {
	            return this._root["_dlen"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "first", {
	        // get footerRows(): number {
	        //     return this._root["_flen"];
	        // }
	        // get sumaryRows(): number {
	        //     return this._root["_slen"];
	        // }
	        get: function () {
	            return this._root.first;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCellLayout.prototype, "firstColumn", {
	        get: function () {
	            return this._root.firstColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridCellLayout.prototype.load = function (source) {
	        this.$_clear();
	        this._root["_loadItems"](source);
	        this._changed();
	        return this;
	    };
	    GridCellLayout.prototype.cleanColumns = function () {
	        this._root.cleanColumns();
	    };
	    GridCellLayout.prototype.invalidate = function () {
	        this._changed();
	    };
	    GridCellLayout.prototype.invalidateIndices = function () {
	        this._changed();
	    };
	    GridCellLayout.prototype.invalidateSize = function () {
	        if (!this._resized) {
	            this._resized = true;
	            this.grid.invalidateCellLayouts();
	        }
	    };
	    GridCellLayout.prototype.getVisible = function (index) {
	        return this._root.getVisible(index);
	    };
	    GridCellLayout.prototype.add = function (group, column) {
	        group = group || this._root;
	        group.addColumn(column);
	    };
	    GridCellLayout.prototype.setColumns = function (columns) {
	        this._root["_setColumns"](columns);
	        this._changed();
	    };
	    GridCellLayout.prototype.layoutByColumn = function (column) {
	        return this._root.findLayout(column);
	    };
	    GridCellLayout.prototype.getHeaderCellPos = function (column) {
	        //return this._headerMap[column["$_hash"]];
	        for (var r = 0; r < this._headerCells.length; r++) {
	            var cells = this._headerCells[r];
	            for (var c = 0; c < cells.length; c++) {
	                if (cells[c] instanceof CellLayoutColumnItem && cells[c]["_columnObj"] === column) {
	                    return { row: r, col: c };
	                }
	            }
	        }
	        return null;
	    };
	    GridCellLayout.prototype.getDataCellPos = function (column) {
	        //return this._dataMap[column["$_hash"]];
	        for (var r = 0; r < this._dataCells.length; r++) {
	            var cells = this._dataCells[r];
	            for (var c = 0; c < cells.length; c++) {
	                if (cells[c] instanceof CellLayoutColumnItem && cells[c]["_columnObj"] === column) {
	                    return { row: r, col: c };
	                }
	            }
	        }
	        return null;
	    };
	    // getFooterCellPos(column: GridColumn): {row: number, col: number} {
	    //     //return this._footerMap[column["$_hash"]];
	    //     for (let r = 0; r < this._footerCells.length; r++) {
	    //         const cells = this._footerCells[r];
	    //         for (let c = 0; c < cells.length; c++) {
	    //             if (cells[c] instanceof CellLayoutColumnItem && cells[c]["_columnObj"] === column) {
	    //                 return { row: r, col: c };
	    //             }
	    //         }
	    //     }
	    //     return null;
	    // }
	    // getSummaryCellPos(column: GridColumn): {row: number, col: number} {
	    //     //return this._footerMap[column["$_hash"]];
	    //     for (let r = 0; r < this._summaryCells.length; r++) {
	    //         const cells = this._summaryCells[r];
	    //         for (let c = 0; c < cells.length; c++) {
	    //             if (cells[c] instanceof CellLayoutColumnItem && cells[c]["_columnObj"] === column) {
	    //                 return { row: r, col: c };
	    //             }
	    //         }
	    //     }
	    //     return null;
	    // }
	    GridCellLayout.prototype.getDataColumns = function (visibleOnly) {
	        if (visibleOnly === void 0) { visibleOnly = true; }
	        var columns = [];
	        $_collectDataColumns(this._root, columns, visibleOnly);
	        return columns;
	    };
	    GridCellLayout.prototype.collectColumns = function (columnsOnly, visibleOnly, ordered) {
	        var columns = [];
	        $_collectColumns(this._root, columns, visibleOnly);
	        return columns;
	    };
	    GridCellLayout.prototype.collectDataColumns = function (c1, c2) {
	        var i1 = c1.index;
	        var i2 = c2.index;
	        var columns = [];
	        $_collectDataColumns(this._root, columns, true);
	        for (var i = columns.length - 1; i >= 0; i--) {
	            var c = columns[i].layout.index;
	            if (c < i1 || c > i2) {
	                columns.splice(i, 1);
	            }
	        }
	        return columns;
	    };
	    GridCellLayout.prototype.getHorzColumns = function (start, count) {
	        if (start === void 0) { start = 0; }
	        var end = count == undefined ? start + this._root.visibleCount - 1 : start + count - 1;
	        var columns = [];
	        this._root["$_collectHorzColumns"](columns, start, end);
	        return columns;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridCellLayout.prototype._changed = function () {
	        if (!this._dirty) {
	            this._dirty = true;
	            var grid = this.grid;
	            grid && grid.invalidateLayout();
	        }
	    };
	    GridCellLayout.prototype.$_clear = function () {
	        this._headerCells = [];
	        this._dataCells = [];
	        // this._footerCells = [];
	        // this._summaryCells = [];
	    };
	    GridCellLayout.prototype.$_refresh = function (columns, minCellWidth) {
	        if (this._dirty) {
	            this._root["$_bindColumns"]({}, columns);
	            this._root["$_resetVisibles"]();
	            this.$_parseCells(this._root, columns);
	            this.$_calculateCellWidths(this._root, minCellWidth);
	            this._dirty = false;
	        }
	        else if (this._resized) {
	            this.$_calculateCellWidths(this._root, minCellWidth);
	        }
	        this._resized = false;
	    };
	    GridCellLayout.prototype.$_prepareLayout = function (grid, fixedCols, rightCols) {
	        for (var i = 0, cnt = this._root.visibleCount; i < cnt; i++) {
	            this._root.getVisible(i)["_prepareLayout"](grid, i < fixedCols, i >= cnt - rightCols);
	        }
	    };
	    GridCellLayout.prototype.$_parseCells = function (root, columns) {
	        var visibles = root["_visibles"];
	        this.$_parseHeaderCells(visibles);
	        this.$_parseDataCells(visibles);
	        // this.$_parseFooterCells(visibles);
	        // this.$_parseSummaryCells(visibles);
	    };
	    GridCellLayout.prototype.$_parseHeaderCells = function (visibles) {
	        var cells = this._headerCells;
	        var rows = 0;
	        for (var _i = 0, visibles_1 = visibles; _i < visibles_1.length; _i++) {
	            var item = visibles_1[_i];
	            rows = Math.max(rows, item.headerRows);
	        }
	        for (var r = cells.length; r < rows; r++) {
	            cells.push([]);
	        }
	        this._root["$_parseHeaderCells"](cells, 0, 0);
	        // 비어 있는 셀들을 채운다.
	        this._root["$_adjustHeaderCells"](cells);
	    };
	    GridCellLayout.prototype.$_parseDataCells = function (visibles) {
	        var cells = this._dataCells;
	        var rows = 0;
	        for (var _i = 0, visibles_2 = visibles; _i < visibles_2.length; _i++) {
	            var item = visibles_2[_i];
	            rows = Math.max(rows, item.rows);
	        }
	        for (var r = cells.length; r < rows; r++) {
	            cells.push([]);
	        }
	        this._root["$_parseDataCells"](cells, 0, 0);
	        this._root["$_adjustDataCells"](cells);
	    };
	    // private $_parseFooterCells(visibles: CellLayoutItem[]): void {
	    //     const cells = this._footerCells;
	    //     let rows = 0;
	    //     for (let item of visibles) {
	    //         rows = Math.max(rows, item.footerRows);
	    //     }
	    //     for (let r = cells.length; r < rows; r++) {
	    //         cells.push([]);
	    //     }
	    //     this._root["$_parseFooterCells"](cells, 0, 0);
	    //     this._root["$_adjustFooterCells"](cells);
	    // }
	    // private $_parseSummaryCells(visibles: CellLayoutItem[]): void {
	    //     const cells = this._summaryCells;
	    //     let rows = 0;
	    //     for (let item of visibles) {
	    //         rows = Math.max(rows, item.summaryRows);
	    //     }
	    //     for (let r = cells.length; r < rows; r++) {
	    //         cells.push([]);
	    //     }
	    //     this._root["$_parseSummaryCells"](cells, 0, 0);
	    //     this._root["$_adjustSummaryCells"](cells);
	    // }
	    GridCellLayout.prototype.$_calculateCellWidths = function (root, minCellWidth) {
	        // leaf 컬럼으로 부터 위쪽으로 너비를 계산해 간다.
	        // 수평 그룹은 그룹 너비가 설정이면 그 값, 아니면 하위 항목의 합.
	        // 수직 그룹은 그룹 너비가 설정이면 그 값, 아니면 하위 항목 너비 중 최대 값.
	        // 그룹의 너비가 설정된 경우 그 값에 맞춰 하위 및 자손 항목들의 너비를 비율로 조정.
	        // 계산된 값을 그룹의 cellWidths에 담는다.
	        root["$_collectCellWidths"](minCellWidth);
	        root["$_arrangeCellWidths"]();
	        var widths = this._cellWidths = [];
	        for (var i = 0, cnt = root.cols; i < cnt; i++) {
	            widths.push(0);
	        }
	        root["$_fillCellWidths"](0, widths);
	        // root의 cellWidths가 table 각 컬럼의 너비가 된다.
	    };
	    GridCellLayout.prototype.$_clearFitWidths = function () {
	        this._root["_clearFitWidths"]();
	    };
	    GridCellLayout.prototype._columnsChanged = function (columns) {
	    };
	    GridCellLayout.prototype._columnChanged = function (column) {
	    };
	    GridCellLayout.prototype._itemIndexChanged = function (item) {
	        this.invalidateIndices();
	    };
	    GridCellLayout.prototype._itemWidthChanged = function (item) {
	        this.invalidateSize();
	    };
	    GridCellLayout.prototype._itemFillWidthChanged = function (item) {
	        if (this.grid.layoutManager.isColumnFitted) {
	            this.invalidateSize();
	        }
	    };
	    GridCellLayout.prototype._clearMergeGrouped = function () {
	        this._root.clearMergeGrouped();
	    };
	    return GridCellLayout;
	}(EventAware_1.EventAware));
	exports.GridCellLayout = GridCellLayout;
	var DefaultCellLayout = /** @class */ (function (_super) {
	    __extends(DefaultCellLayout, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DefaultCellLayout(grid) {
	        return _super.call(this, grid) || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DefaultCellLayout.prototype._columnsChanged = function (columns) {
	        this.setColumns(columns);
	        _super.prototype._columnsChanged.call(this, columns);
	    };
	    return DefaultCellLayout;
	}(GridCellLayout));
	exports.DefaultCellLayout = DefaultCellLayout;
	});

	unwrapExports(CellLayout);
	var CellLayout_1 = CellLayout.CellLayoutItem;
	var CellLayout_2 = CellLayout.ProxyCellLayoutItem;
	var CellLayout_3 = CellLayout.CellLayoutColumnItem;
	var CellLayout_4 = CellLayout.ColumnLayoutDirection;
	var CellLayout_5 = CellLayout.CellLayoutHeader;
	var CellLayout_6 = CellLayout.CellLayoutGroupHeader;
	var CellLayout_7 = CellLayout.CellLayoutGroupItem;
	var CellLayout_8 = CellLayout.GridCellLayout;
	var CellLayout_9 = CellLayout.DefaultCellLayout;

	var CellIndex_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CellIndex.ts
	// 2019. 07. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var VerticalMovingStep;
	(function (VerticalMovingStep) {
	    VerticalMovingStep["ROW"] = "row";
	    VerticalMovingStep["CELL"] = "cell";
	})(VerticalMovingStep = exports.VerticalMovingStep || (exports.VerticalMovingStep = {}));
	var CellIndex = /** @class */ (function (_super) {
	    __extends(CellIndex, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellIndex(grid, itemIndex, column) {
	        if (grid === void 0) { grid = null; }
	        if (itemIndex === void 0) { itemIndex = -1; }
	        if (column === void 0) { column = null; }
	        var _this = _super.call(this) || this;
	        _this._itemIndex = -1;
	        _this._grid = grid;
	        _this._itemIndex = itemIndex;
	        _this._layout = column instanceof GridColumn_1.GridColumn ? column.layout : column;
	        return _this;
	    }
	    CellIndex.temp = function (grid, itemIndex, column) {
	        if (grid === void 0) { grid = null; }
	        if (itemIndex === void 0) { itemIndex = 0; }
	        if (column === void 0) { column = null; }
	        if (!CellIndex.$_temp) {
	            CellIndex.$_temp = new CellIndex();
	        }
	        CellIndex.$_temp._grid = grid;
	        CellIndex.$_temp._itemIndex = itemIndex;
	        CellIndex.$_temp._layout = column instanceof CellLayout.CellLayoutItem ? column : (column && column.layout);
	        //CellIndex.$_item = null;
	        return CellIndex.$_temp;
	    };
	    CellIndex.areEquals = function (idx1, idx2) {
	        return (idx1 === idx2) ||
	            (idx1 && idx2 && idx1._grid === idx2._grid && idx1._itemIndex === idx2._itemIndex && idx1._layout === idx2._layout);
	    };
	    CellIndex.equalsTo = function (idx, itemIndex, layout) {
	        return idx && idx._itemIndex === itemIndex && idx.layout === layout;
	    };
	    CellIndex.clearTemp = function () {
	        if (CellIndex.$_temp) {
	            CellIndex.$_temp = CellIndex.$_temp.dispose();
	        }
	    };
	    CellIndex.prototype._doDispose = function () {
	        this._grid = null;
	        this._layout = null;
	        // CellIndex.$_temp._grid = null;
	        // CellIndex.$_temp._layout = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellIndex.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "itemIndex", {
	        /** itemIndex */
	        get: function () {
	            return this._itemIndex;
	        },
	        set: function (value) {
	            this._itemIndex = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "layout", {
	        /** layout */
	        get: function () {
	            return this._layout;
	        },
	        set: function (value) {
	            this._layout = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "column", {
	        /** column */
	        get: function () {
	            return this._layout && this._layout.firstColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "dataColumn", {
	        // set column(value: GridColumn) {
	        //     this._layout = value && value.layout;
	        // }
	        /** dataColumn */
	        get: function () {
	            var c = this.column;
	            return c instanceof GridColumn_1.DataColumn ? c : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "valueColumn", {
	        /** valueColumn */
	        get: function () {
	            var c = this.column;
	            return c instanceof GridColumn_1.ValueColumn ? c : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "dataField", {
	        /** dataField */
	        get: function () {
	            var c = this.dataColumn;
	            return c instanceof GridColumn_1.DataColumn ? c.dataIndex : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "item", {
	        /** item */
	        get: function () {
	            return this._grid && this._grid.getItem(this._itemIndex);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "dataRow", {
	        /** dataRow */
	        get: function () {
	            var item = this.item;
	            return item ? item.dataRow : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "dataId", {
	        /** dataId */
	        get: function () {
	            var item = this.item;
	            return item ? item.dataId : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "value", {
	        /** value */
	        get: function () {
	            var column = this.column;
	            if (column instanceof GridColumn_1.DataColumn) {
	                var fld = column.dataIndex;
	                if (fld < 0) {
	                    throw new Error("Not exists data field: " + column.fieldName);
	                }
	                var item = this.item;
	                if (!item) {
	                    throw new Error("Invalid item index: " + this._itemIndex);
	                }
	                return item.getData(fld);
	            }
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "fixed", {
	        get: function () {
	            var layout = this._layout;
	            if (this._grid && layout && layout.visible) {
	                var lm = this._grid.layoutManager;
	                var rootIndex = layout.root.vindex;
	                return rootIndex < lm.fixedLayoutCount || rootIndex >= lm.rightFirstLayout ||
	                    (this._itemIndex >= 0 && this._itemIndex < lm.fixedItemCount);
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "rowFixed", {
	        get: function () {
	            var layout = this._layout;
	            if (this._grid && layout && layout.visible) {
	                var lm = this._grid.layoutManager;
	                return this._itemIndex >= 0 && this._itemIndex < lm.fixedItemCount;
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "colFixed", {
	        get: function () {
	            if (this._grid && this._layout && this._layout.visible) {
	                var lm = this._grid.layoutManager;
	                var rootIndex = this._layout.root.vindex;
	                return rootIndex < lm.fixedLayoutCount;
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "rightFixed", {
	        get: function () {
	            if (this._grid && this._layout && this._layout.visible) {
	                var lm = this._grid.layoutManager;
	                var rootIndex = this._layout.root.vindex;
	                return rootIndex >= lm.rightFirstLayout;
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isTop", {
	        get: function () {
	            if (this._layout && this._layout.group) {
	                CellLayout.CellLayoutGroupItem.isTop(this._layout);
	            }
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isBottom", {
	        get: function () {
	            if (this._layout && this._layout.group) {
	                CellLayout.CellLayoutGroupItem.isBottom(this._layout);
	            }
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isLeft", {
	        get: function () {
	            if (this._layout) {
	                var g = this._layout.group;
	                if (g) {
	                    g.vindex == 0 && CellLayout.CellLayoutGroupItem.isLeft(this._layout);
	                }
	                else {
	                    this._layout.vindex == 0;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isRight", {
	        get: function () {
	            if (this._layout) {
	                var g = this._layout.group;
	                if (g) {
	                    g.vindex == 0 && CellLayout.CellLayoutGroupItem.isRight(this._layout);
	                }
	                else {
	                    this._layout.vindex == this._grid.visibleLayoutCount - 1;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isFirst", {
	        get: function () {
	            if (this._layout) {
	                if (this._grid && this._grid.visibleLayoutCount > 0) {
	                    var layout = this._grid.getVisibleLayout(0);
	                    layout = layout instanceof CellLayout.CellLayoutColumnItem ? layout : layout.root.first;
	                    return layout === this._layout;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isEditableFirst", {
	        get: function () {
	            if (this._grid && this._layout) {
	                var columns = this.grid.collectColumns(true, true, true);
	                var idx = columns.indexOf(this._layout.firstColumn);
	                if (idx >= 0) {
	                    for (var i = idx - 1; i--;) {
	                        var column = columns[i];
	                        if (column instanceof GridColumn_1.SeriesColumn) {
	                            return false;
	                        }
	                        if (column instanceof GridColumn_1.DataColumn && column.editable && !column.readOnly && this._layout.visible) {
	                            return false;
	                        }
	                    }
	                    return true;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellIndex.prototype, "isLast", {
	        get: function () {
	            if (this._layout) {
	                if (this._grid && this._grid.visibleLayoutCount > 0) {
	                    var layout = this._grid.getVisibleLayout(this._grid.visibleLayoutCount - 1);
	                    layout = layout instanceof CellLayout.CellLayoutColumnItem ? layout : layout.root.last;
	                    return layout === this._layout;
	                }
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellIndex.prototype.set = function (itemIndex, column, grid) {
	        grid !== undefined && (this._grid = grid);
	        this._itemIndex = itemIndex;
	        this._layout = column instanceof GridColumn_1.GridColumn ? column.layout : column;
	        return this;
	    };
	    CellIndex.prototype.assign = function (source) {
	        if (source) {
	            source.grid && (this._grid = source._grid);
	            this._itemIndex = source._itemIndex;
	            this._layout = source._layout;
	            // this._verticalStep = source._verticalStep;
	            // this._item = source._item ? source._item : null;
	        }
	        else {
	            //this._grid = null;
	            this._itemIndex = -1;
	            this._layout = null;
	            // this._item = null;
	        }
	        return this;
	    };
	    CellIndex.prototype.reset = function () {
	        this._itemIndex = -1;
	        this._layout = null;
	    };
	    CellIndex.prototype.clone = function () {
	        return new CellIndex(this._grid, this._itemIndex, this._layout);
	    };
	    CellIndex.prototype.proxy = function () {
	        return {
	            itemIndex: isNaN(this._itemIndex) ? -1 : this._itemIndex,
	            column: (this.column ? this.column.name : null),
	            dataRow: this.dataRow,
	            fieldIndex: (this.dataColumn ? this.column.dataIndex : -1),
	            fieldName: (this.dataColumn ? this.column.fieldName : null)
	        };
	    };
	    CellIndex.prototype.normalize = function (grid) {
	        if (grid) {
	            this._grid = grid;
	            if (!this._layout) {
	                this._layout = grid.getFirstLayout();
	            }
	            this._itemIndex = Math.max(0, Math.min(this._itemIndex, grid.itemCount - 1));
	        }
	        return this;
	    };
	    CellIndex.prototype.incRow = function (delta) {
	        if (this._grid) {
	            this._itemIndex = Math.max(0, Math.min(this._grid.itemCount - 1, this._itemIndex + delta));
	        }
	    };
	    CellIndex.prototype.first = function () {
	        if (this._grid) {
	            this._itemIndex = 0;
	        }
	    };
	    CellIndex.prototype.last = function () {
	        if (this._grid) {
	            this._itemIndex = this._grid.itemCount - 1;
	        }
	    };
	    CellIndex.prototype.right = function () {
	        var layout = $$_cellIndex_getRight(this._grid, this._layout);
	        if (layout) {
	            this._layout = layout;
	        }
	    };
	    CellIndex.prototype.left = function () {
	        var layout = $$_cellIndex_getLeft(this._grid, this._layout);
	        if (layout) {
	            this._layout = layout;
	        }
	    };
	    CellIndex.prototype.next = function () {
	        var layout = $$_cellIndex_getNext(this._grid, this._layout);
	        if (layout) {
	            this._layout = layout;
	            return true;
	        }
	        return false;
	    };
	    CellIndex.prototype.prev = function () {
	        var layout = $$_cellIndex_getPrev(this._grid, this._layout);
	        if (layout) {
	            this._layout = layout;
	            return true;
	        }
	        return false;
	    };
	    CellIndex.prototype.lower = function (editing, step) {
	        if (step === VerticalMovingStep.ROW && !editing) {
	            if (this._itemIndex < this._grid.itemCount - 1) {
	                this.incRow(1);
	                return true;
	            }
	            else {
	                return false;
	            }
	        }
	        else if (step === VerticalMovingStep.CELL) {
	            if (this.isBottom) {
	                if (this._itemIndex < this._grid.itemCount - 1) {
	                    this.incRow(1);
	                    this._layout = CellLayout.CellLayoutGroupItem.getTop(this._layout);
	                    return true;
	                }
	                else {
	                    return false;
	                }
	            }
	            else {
	                this._layout = CellLayout.CellLayoutGroupItem.getLower(this._layout);
	                return true;
	            }
	        }
	        else {
	            if (this.isBottom) {
	                if (this._itemIndex < this._grid.itemCount - 1) {
	                    this.incRow(1);
	                    return true;
	                }
	                else {
	                    return false;
	                }
	            }
	            else {
	                this._layout = CellLayout.CellLayoutGroupItem.getLower(this._layout);
	                return true;
	            }
	        }
	    };
	    CellIndex.prototype.upper = function (editing, step) {
	        if (step === VerticalMovingStep.ROW && !editing) {
	            if (this._itemIndex > 0) {
	                this.incRow(-1);
	                return true;
	            }
	            else {
	                return false;
	            }
	        }
	        else if (step === VerticalMovingStep.CELL) {
	            if (this.isTop) {
	                if (this._itemIndex > 0) {
	                    this.incRow(-1);
	                    this._layout = CellLayout.CellLayoutGroupItem.getBottom(this._layout);
	                    return true;
	                }
	                else {
	                    return false;
	                }
	            }
	            else {
	                this._layout = CellLayout.CellLayoutGroupItem.getUpper(this._layout);
	                return true;
	            }
	        }
	        else {
	            if (this.isTop) {
	                if (this._itemIndex > 0) {
	                    this.incRow(-1);
	                    return true;
	                }
	                else {
	                    return false;
	                }
	            }
	            else {
	                this._layout = CellLayout.CellLayoutGroupItem.getUpper(this._layout);
	                return true;
	            }
	        }
	    };
	    CellIndex.prototype.home = function () {
	        var grid = this._grid;
	        if (grid && grid.visibleLayoutCount > 0) {
	            var layout = grid.getVisibleLayout(0);
	            this._layout = layout instanceof CellLayout.CellLayoutColumnItem ? layout : layout.root.first;
	        }
	    };
	    CellIndex.prototype.end = function () {
	        var grid = this._grid;
	        if (grid && grid.visibleLayoutCount > 0) {
	            var layout = grid.getVisibleLayout(grid.visibleLayoutCount - 1);
	            this._layout = layout instanceof CellLayout.CellLayoutColumnItem ? layout : layout.root.last;
	        }
	    };
	    CellIndex.prototype.down = function (step, editing, crossTab) {
	        if (step === void 0) { step = VerticalMovingStep.ROW; }
	        if (editing === void 0) { editing = false; }
	        if (crossTab === void 0) { crossTab = false; }
	        if ((step == VerticalMovingStep.ROW && !editing) || this.isBottom || crossTab) {
	            if (this._itemIndex < this._grid.itemCount - 1) {
	                this.incRow(1);
	                if (step == VerticalMovingStep.CELL)
	                    this._layout = CellLayout.CellLayoutGroupItem.getTop(this._layout);
	            }
	        }
	        else {
	            this._layout = CellLayout.CellLayoutGroupItem.getLower(this._layout);
	        }
	    };
	    CellIndex.prototype.up = function (step, editing, crossTab) {
	        if (step === void 0) { step = VerticalMovingStep.ROW; }
	        if (editing === void 0) { editing = false; }
	        if (crossTab === void 0) { crossTab = false; }
	        if ((step == VerticalMovingStep.ROW && !editing) || this.isBottom || crossTab) {
	            if (this._itemIndex > 0) {
	                this.incRow(-1);
	                if (step == VerticalMovingStep.CELL)
	                    this._layout = CellLayout.CellLayoutGroupItem.getTop(this._layout);
	            }
	        }
	        else {
	            this._layout = CellLayout.CellLayoutGroupItem.getUpper(this._layout);
	        }
	    };
	    CellIndex.prototype.isEditableLast = function () {
	        var grid = this._grid;
	        if (grid && this.column) {
	            var columns = grid.collectColumns(true, true, true);
	            var idx = columns.indexOf(this.column);
	            for (var i = idx + 1, cnt = columns.length; i < cnt; i++) {
	                var column = columns[i];
	                if (column instanceof GridColumn_1.SeriesColumn) {
	                    return false;
	                }
	                // if (column.isEditable() && !column.isReadOnly() && column.isVisible()) {
	                // 	return false;
	                // }
	            }
	        }
	        return true;
	    };
	    CellIndex.prototype.getValue = function () {
	        if (this._grid) {
	            var dcol = this.dataColumn;
	            var item = this._grid.getItem(this._itemIndex);
	            return dcol && item && item.getData(dcol.dataIndex);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CellIndex.prototype.assignFrom = function (source) {
	        if (source instanceof CellIndex) {
	            this._grid = source._grid;
	            this._layout = source._layout;
	            this._itemIndex = source._itemIndex;
	        }
	        else {
	            _super.prototype.assignFrom.call(this, source);
	        }
	    };
	    CellIndex.prototype.toString = function () {
	        return "(" + this._itemIndex + ", " + this.column + ")";
	    };
	    return CellIndex;
	}(Base_1.Base));
	exports.CellIndex = CellIndex;
	var $$_cellIndex_getRight = function (grid, start) {
	    if (!grid || !start) {
	        return null;
	    }
	    var lm = grid.layoutManager;
	    var layout = CellLayout.CellLayoutGroupItem.getRight(start);
	    if (layout) {
	        return layout;
	    }
	    var idx;
	    if (start.group) {
	        idx = start.root.vindex;
	    }
	    else {
	        idx = start.vindex;
	    }
	    for (var i = idx + 1, cnt = lm.layoutCount; i < cnt; i++) {
	        layout = lm.getLayout(i);
	        if (layout instanceof CellLayout.CellLayoutColumnItem) {
	            return layout;
	        }
	        else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            layout = layout.first;
	            if (layout) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $$_cellIndex_getLeft = function (grid, start) {
	    if (!grid || !start) {
	        return null;
	    }
	    var lm = grid.layoutManager;
	    var layout = CellLayout.CellLayoutGroupItem.getLeft(start);
	    if (layout) {
	        return layout;
	    }
	    var idx;
	    if (start.group) {
	        idx = start.root.vindex;
	    }
	    else {
	        idx = start.vindex;
	    }
	    for (var i = idx - 1; i >= 0; i--) {
	        layout = lm.getLayout(i);
	        if (layout instanceof CellLayout.CellLayoutColumnItem) {
	            return layout;
	        }
	        else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            layout = layout.last;
	            if (layout) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $$_cellIndex_getNext = function (grid, start) {
	    if (!grid || !start) {
	        return null;
	    }
	    var lm = grid.layoutManager;
	    var layout = CellLayout.CellLayoutGroupItem.getNext(start);
	    if (layout) {
	        return layout;
	    }
	    var idx;
	    if (start.group) {
	        idx = start.root.vindex;
	    }
	    else {
	        idx = start.vindex;
	    }
	    for (var i = idx + 1, cnt = lm.layoutCount; i < cnt; i++) {
	        layout = lm.getLayout(i);
	        if (layout instanceof CellLayout.CellLayoutColumnItem) {
	            return layout;
	        }
	        else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            layout = layout.first;
	            if (layout) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var $$_cellIndex_getPrev = function (grid, start) {
	    if (!grid || !start) {
	        return null;
	    }
	    var lm = grid.layoutManager;
	    var layout = CellLayout.CellLayoutGroupItem.getPrev(start);
	    if (layout) {
	        return layout;
	    }
	    var idx;
	    if (start.group) {
	        idx = start.root.vindex;
	    }
	    else {
	        idx = start.vindex;
	    }
	    for (var i = idx - 1; i >= 0; i++) {
	        layout = lm.getLayout(i);
	        if (layout instanceof CellLayout.CellLayoutColumnItem) {
	            return layout;
	        }
	        else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            layout = layout.last;
	            if (layout) {
	                return layout;
	            }
	        }
	    }
	    return null;
	};
	var CellRange = /** @class */ (function (_super) {
	    __extends(CellRange, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellRange() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._row1 = 0;
	        _this._row2 = 0;
	        return _this;
	    }
	    CellRange.$_setRange = function (range, r1, c1, r2, c2) {
	        range._row1 = r1 <= r2 ? r1 : r2;
	        range._row2 = r1 <= r2 ? r2 : r1;
	        // range._col1 = c1.dataRoot().distance() <= c2.dataRoot().distance() ? c1 : c2;
	        // range._col2 = c1.dataRoot().distance() <= c2.dataRoot().distance() ? c2 : c1;
	        range._col1 = c1.index <= c2.index ? c1 : c2;
	        range._col2 = c1.index <= c2.index ? c2 : c1;
	        return range;
	    };
	    CellRange.create = function (index1, index2) {
	        if (!index2 || index1 === index2) {
	            var r = new CellRange();
	            r._row1 = r._row2 = index1.itemIndex;
	            r._col1 = r._col2 = index1.layout;
	            return r;
	        }
	        else {
	            return CellRange.$_setRange(new CellRange(), index1.itemIndex, index1.layout, index2.itemIndex, index2.layout);
	        }
	    };
	    CellRange.temp = function (index1, index2) {
	        var r = CellRange.$_TEMP;
	        if (!index2 || index1 === index2) {
	            r._row1 = r._row2 = index1.itemIndex;
	            r._col1 = r._col2 = index1.layout;
	            return r;
	        }
	        else {
	            return CellRange.$_setRange(r, index1.itemIndex, index1.layout, index2.itemIndex, index2.layout);
	        }
	    };
	    CellRange.createRange = function (r1, c1, r2, c2) {
	        return CellRange.$_setRange(new CellRange(), r1, c1, r2, c2);
	    };
	    Object.defineProperty(CellRange.prototype, "empty", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return (this._row2 < this._row1) || (!this._col2 && !this._col2);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "r1", {
	        get: function () {
	            return this._row1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "c1", {
	        get: function () {
	            return this._col1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "r2", {
	        get: function () {
	            return this._row2;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "c2", {
	        get: function () {
	            return this._col2;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "top", {
	        get: function () {
	            return this._row1 <= this._row2 ? this._row1 : this._row2;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "bottom", {
	        get: function () {
	            return this._row1 <= this._row2 ? this._row2 : this._row1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "firstCell", {
	        get: function () {
	            var index = new CellIndex();
	            index.itemIndex = this._row1 <= this._row2 ? this._row1 : this._row2;
	            //if (this._col1.dataRoot.distance <= this._col2.dataRoot.distance) {
	            if (this._col1.index <= this._col2.index) {
	                index.layout = this._col1;
	            }
	            else {
	                index.layout = this._col2;
	            }
	            return index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellRange.prototype, "lastCell", {
	        get: function () {
	            var index = new CellIndex();
	            index.itemIndex = this._row1 >= this._row2 ? this._row1 : this._row2;
	            //if (this._col1.dataRoot.distance >= this._col2.dataRoot.distance) {
	            if (this._col1.index >= this._col2.index) {
	                index.layout = this._col1;
	            }
	            else {
	                index.layout = this._col2;
	            }
	            return index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellRange.prototype.contains = function (itemIndex, column) {
	        if (column) {
	            // var i = column.root.displayIndex;
	            // return (itemIndex >= this._row1) && (itemIndex <= this._row2) &&
	            // 	(i >= this._col1.root.displayIndex) && (i <= this._col2.root.displayIndex);
	            var i = column.index;
	            return (itemIndex >= this._row1) && (itemIndex <= this._row2) &&
	                (i >= this._col1.index) && (i <= this._col2.index);
	        }
	        return false;
	    };
	    CellRange.prototype.containsIndex = function (index) {
	        return index && this.contains(index.itemIndex, index.column);
	    };
	    CellRange.prototype.normalize = function () {
	        if (this._row1 > this._row2) {
	            var r = this._row1;
	            this._row1 = this._row2;
	            this._row2 = r;
	        }
	        //if (this._col1.dataRoot().distance() > this._col2.dataRoot().distance()) {
	        if (this._col1.index > this._col2.index) {
	            var c = this._col1;
	            this._col1 = this._col2;
	            this._col2 = c;
	        }
	        return this;
	    };
	    CellRange.prototype.normalizeData = function () {
	        this.normalize();
	        // var g = this._col1;
	        // if (g instanceof ColumnGroup) {
	        // 	this._col1 = ColumnGroup.getFirstDataRoot(g);
	        // }
	        // g = this._col2;
	        // if (g instanceof ColumnGroup) {
	        // 	this._col2 = ColumnGroup.getLastDataRoot(g);
	        // }
	        return this;
	    };
	    CellRange.prototype.intersectsWith = function (other) {
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    CellRange.NULL = new CellRange();
	    CellRange.$_TEMP = new CellRange();
	    return CellRange;
	}(Base_1.Base));
	exports.CellRange = CellRange;
	});

	unwrapExports(CellIndex_1);
	var CellIndex_2 = CellIndex_1.VerticalMovingStep;
	var CellIndex_3 = CellIndex_1.CellIndex;
	var CellIndex_4 = CellIndex_1.CellRange;

	var Runtimes = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Runtimes.ts
	// 2019. 07. 08. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var DataRowExpressionRuntime = /** @class */ (function (_super) {
	    __extends(DataRowExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataRowExpressionRuntime() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._item = null;
	        _this._group = null;
	        _this._dataSource = null;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    DataRowExpressionRuntime.prototype._doDispose = function () {
	        this._item = null;
	        this._group = null;
	        this._dataSource = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DataRowExpressionRuntime.prototype, "index", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** index */
	        get: function () {
	            return this._item.index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataRowExpressionRuntime.prototype, "item", {
	        /** item */
	        get: function () {
	            return this._item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataRowExpressionRuntime.prototype.setDataSource = function (value) {
	        this._dataSource = value;
	        this._fieldCount = value ? value.fieldCount : 0;
	    };
	    DataRowExpressionRuntime.prototype.setItem = function (item) {
	        this._item = item;
	        this._group = Utils_1.Utils.cast(item, GridItem_1.GroupItem);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataRowExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (DataRowExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return DataRowExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    DataRowExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case DataRowExpressionRuntime.ID_ROW:
	                return this._item.index;
	            case DataRowExpressionRuntime.ID_DATAROW:
	                return this._item.dataRow;
	            case DataRowExpressionRuntime.ID_CHECKED:
	                return this._item.checked;
	            case DataRowExpressionRuntime.ID_STATE:
	                switch (this._item.rowState) {
	                    case RowState_1.RowState.CREATED:
	                        return "c";
	                    case RowState_1.RowState.UPDATED:
	                        return "u";
	                    case RowState_1.RowState.DELETED:
	                        return "d";
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        return "x";
	                }
	                return undefined;
	            case DataRowExpressionRuntime.ID_COUNT:
	                return this._group ? this._group.count : 0;
	            case DataRowExpressionRuntime.ID_DCOUNT:
	                return this._group ? this._group.descendantCount : 0;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    DataRowExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._item) {
	            if (idKey == DataRowExpressionRuntime.ID_VALUE || idKey == DataRowExpressionRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    DataRowExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == DataRowExpressionRuntime.ID_VALUE || idKey == DataRowExpressionRuntime.ID_VALUES) {
	            if (this._dataSource) {
	                var idx = capitalized ? this._dataSource.getFieldIndexC(index) : this._dataSource.getFieldIndex(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataRowExpressionRuntime.ID_ROW = 0;
	    DataRowExpressionRuntime.ID_DATAROW = 1;
	    DataRowExpressionRuntime.ID_CHECKED = 2;
	    DataRowExpressionRuntime.ID_VALUE = 3;
	    DataRowExpressionRuntime.ID_VALUES = 4;
	    DataRowExpressionRuntime.ID_STATE = 5;
	    DataRowExpressionRuntime.ID_COUNT = 6;
	    DataRowExpressionRuntime.ID_DCOUNT = 7;
	    DataRowExpressionRuntime.IDENTS = {
	        row: DataRowExpressionRuntime.ID_ROW,
	        datarow: DataRowExpressionRuntime.ID_DATAROW,
	        checked: DataRowExpressionRuntime.ID_CHECKED,
	        value: DataRowExpressionRuntime.ID_VALUE,
	        values: DataRowExpressionRuntime.ID_VALUES,
	        state: DataRowExpressionRuntime.ID_STATE,
	        count: DataRowExpressionRuntime.ID_COUNT,
	        dcount: DataRowExpressionRuntime.ID_DCOUNT,
	    };
	    return DataRowExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.DataRowExpressionRuntime = DataRowExpressionRuntime;
	var DataCellExpressionRuntime = /** @class */ (function (_super) {
	    __extends(DataCellExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataCellExpressionRuntime() {
	        var _this = _super.call(this) || this;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    DataCellExpressionRuntime.prototype._doDispose = function () {
	        this._cell = null;
	        this._item = null;
	        this._grid = null;
	        this._dataSource = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataCellExpressionRuntime.prototype.setDataSource = function (value) {
	        this._dataSource = value;
	        this._fieldCount = value ? value.fieldCount : 0;
	    };
	    DataCellExpressionRuntime.prototype.setCell = function (value, item) {
	        this._cell = value;
	        this._grid = value.index.grid;
	        this._item = value.index.item || item;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataCellExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (DataCellExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return DataCellExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    DataCellExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        if (this._cell.index.itemIndex < 0) {
	            var fld = this._cell.index.dataField;
	            switch (idKey) {
	                case DataCellExpressionRuntime.ID_VALUE:
	                    return this._item.getData(fld);
	                case DataCellExpressionRuntime.ID_DATA_ROW:
	                    return this._item.dataRow;
	            }
	        }
	        switch (idKey) {
	            case DataCellExpressionRuntime.ID_VALUE:
	                return this._cell.value();
	            case DataCellExpressionRuntime.ID_ROW:
	                return this._cell.index.itemIndex;
	            case DataCellExpressionRuntime.ID_DATA_ROW:
	                return this._cell.index.dataRow;
	            case DataCellExpressionRuntime.ID_INDEX:
	                return this._cell.index.column.index;
	            case DataCellExpressionRuntime.ID_FIELD:
	                return this._cell.index.dataField;
	            case DataCellExpressionRuntime.ID_CHECKED:
	                return this._item.checked;
	            case DataCellExpressionRuntime.ID_STATE:
	                switch (this._item.rowState) {
	                    case RowState_1.RowState.CREATED:
	                        return "c";
	                    case RowState_1.RowState.UPDATED:
	                        return "u";
	                    case RowState_1.RowState.DELETED:
	                        return "d";
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        return "x";
	                }
	                return undefined;
	            case DataCellExpressionRuntime.ID_TAG:
	                return this._cell.index.column.tag;
	            case DataCellExpressionRuntime.ID_BASE:
	                var idx = this._cell.index.dataColumn.baseIndex;
	                return idx >= 0 ? this._item.getData(idx) : undefined;
	            case DataCellExpressionRuntime.ID_COUNT:
	                return this._item instanceof GridItem_1.GroupItem ? this._item.count : 0;
	            case DataCellExpressionRuntime.ID_DCOUNT:
	                return this._item instanceof GridItem_1.GroupItem ? this._item.descendantCount : 0;
	            case DataCellExpressionRuntime.ID_CHANGED_CELL:
	                // update 인경우만 가능하다.
	                var index = this._cell.index;
	                var dataRow = index.dataRow;
	                var dataField = index.dataField;
	                return dataField >= 0 && this._item.rowState == RowState_1.RowState.UPDATED && this._dataSource.isDataChanged(dataRow, dataField);
	            case DataCellExpressionRuntime.ID_LOOKUP_EXISTS:
	                var column = this._cell.index.dataColumn;
	                var lookup = void 0;
	                if (lookup = column.lookupSource) {
	                    var flds = column.lookupKeyFieldIds;
	                    var cnt = flds.length;
	                    var keys = [];
	                    for (var i = 0; i < cnt; i++) {
	                        keys.push(this._item.getData(flds[i]));
	                    }
	                    return lookup.exists(keys);
	                }
	                else {
	                    return column.getLookupIndex(this._cell.value()) > -1;
	                }
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    DataCellExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._item) {
	            if (idKey == DataCellExpressionRuntime.ID_VALUE || idKey == DataCellExpressionRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    DataCellExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == DataCellExpressionRuntime.ID_VALUE || idKey == DataCellExpressionRuntime.ID_VALUES) {
	            if (this._dataSource) {
	                var idx = capitalized ? this._dataSource.getFieldIndexC(index) : this._dataSource.getFieldIndex(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataCellExpressionRuntime.ID_VALUE = 0;
	    DataCellExpressionRuntime.ID_ROW = 1;
	    DataCellExpressionRuntime.ID_DATA_ROW = 2;
	    DataCellExpressionRuntime.ID_INDEX = 3;
	    DataCellExpressionRuntime.ID_FIELD = 4;
	    DataCellExpressionRuntime.ID_CHECKED = 5;
	    DataCellExpressionRuntime.ID_STATE = 6;
	    DataCellExpressionRuntime.ID_TAG = 7;
	    DataCellExpressionRuntime.ID_BASE = 8;
	    DataCellExpressionRuntime.ID_VALUES = 9;
	    DataCellExpressionRuntime.ID_COUNT = 10;
	    DataCellExpressionRuntime.ID_DCOUNT = 11;
	    DataCellExpressionRuntime.ID_CHANGED_CELL = 12;
	    DataCellExpressionRuntime.ID_LOOKUP_EXISTS = 13;
	    DataCellExpressionRuntime.IDENTS = {
	        value: DataCellExpressionRuntime.ID_VALUE,
	        row: DataCellExpressionRuntime.ID_ROW,
	        datarow: DataCellExpressionRuntime.ID_DATA_ROW,
	        index: DataCellExpressionRuntime.ID_INDEX,
	        field: DataCellExpressionRuntime.ID_FIELD,
	        checked: DataCellExpressionRuntime.ID_CHECKED,
	        state: DataCellExpressionRuntime.ID_STATE,
	        tag: DataCellExpressionRuntime.ID_TAG,
	        base: DataCellExpressionRuntime.ID_BASE,
	        values: DataCellExpressionRuntime.ID_VALUES,
	        count: DataCellExpressionRuntime.ID_COUNT,
	        dcount: DataCellExpressionRuntime.ID_DCOUNT,
	        changedcell: DataCellExpressionRuntime.ID_CHANGED_CELL,
	        lookupexists: DataCellExpressionRuntime.ID_LOOKUP_EXISTS
	    };
	    return DataCellExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.DataCellExpressionRuntime = DataCellExpressionRuntime;
	var EqualBlankRuntime = /** @class */ (function (_super) {
	    __extends(EqualBlankRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EqualBlankRuntime() {
	        var _this = _super.call(this) || this;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    EqualBlankRuntime.prototype._doDispose = function () {
	        this._cell = null;
	        this._item = null;
	        this._ds = null;
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EqualBlankRuntime.prototype.setDataArguments = function (dataSource, cell, item) {
	        this._ds = dataSource;
	        this._fieldCount = dataSource ? dataSource.fieldCount : 0;
	        this._cell = cell;
	        this._item = item;
	        this._grid = cell && cell.index.column.grid;
	    };
	    EqualBlankRuntime.prototype.setItem = function (item) {
	        this._item = item;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EqualBlankRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (EqualBlankRuntime.IDENTS.hasOwnProperty(token)) {
	            return EqualBlankRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    EqualBlankRuntime.prototype.evaluateIdentifier = function (idKey) {
	        //assert(this._cell != null, "cell is null");
	        var idx;
	        switch (idKey) {
	            case EqualBlankRuntime.ID_VALUE:
	                return this._item.getData(this._cell.index.dataField);
	            case EqualBlankRuntime.ID_BASE:
	                idx = this._cell.index.dataColumn.baseIndex;
	                return idx >= 0 ? this._item.getData(idx) : undefined;
	            case EqualBlankRuntime.ID_PREV_VALUES:
	                var col = this._cell.index.column;
	                var cols = this._grid.getDataColumns();
	                idx = cols.indexOf(col);
	                var vals = [];
	                if (cols.length < 0 || idx < 0) {
	                    return;
	                }
	                for (var i = 0, cnt = Math.min(idx, cols.length); i < cnt; i++) {
	                    vals.push(this._item.getData(cols[i].dataIndex));
	                }
	                return vals.join("`");
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    EqualBlankRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._item) {
	            if (idKey == EqualBlankRuntime.ID_VALUE || idKey == EqualBlankRuntime.ID_VALUES) {
	                if (index < 0 || index >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return this._item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    EqualBlankRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == EqualBlankRuntime.ID_VALUE || idKey == EqualBlankRuntime.ID_VALUES) {
	            if (this._ds) {
	                var idx = capitalized ? this._ds.getFieldIndexC(index) : this._ds.getFieldIndex(index);
	                if (idx < 0 || idx >= this._fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return this._item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    EqualBlankRuntime.ID_VALUE = 0;
	    EqualBlankRuntime.ID_VALUES = 1;
	    EqualBlankRuntime.ID_BASE = 2;
	    EqualBlankRuntime.ID_PREV_VALUES = 3;
	    EqualBlankRuntime.IDENTS = {
	        value: EqualBlankRuntime.ID_VALUE,
	        values: EqualBlankRuntime.ID_VALUES,
	        base: EqualBlankRuntime.ID_BASE,
	        prevvalues: EqualBlankRuntime.ID_PREV_VALUES
	    };
	    return EqualBlankRuntime;
	}(Expression.ExpressionRuntime));
	exports.EqualBlankRuntime = EqualBlankRuntime;
	var RowGroupStatementRuntime = /** @class */ (function (_super) {
	    __extends(RowGroupStatementRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupStatementRuntime() {
	        return _super.call(this) || this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupStatementRuntime.prototype.setGrid = function (grid) {
	        this._grid = grid;
	    };
	    RowGroupStatementRuntime.prototype.setGroup = function (group) {
	        this._group = group;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupStatementRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (RowGroupStatementRuntime.IDENTS.hasOwnProperty(token)) {
	            return RowGroupStatementRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    RowGroupStatementRuntime.prototype.evaluateIdentifier = function (idKey) {
	        var g = this._group;
	        var field;
	        var column;
	        switch (idKey) {
	            case RowGroupStatementRuntime.ID_GROUP_FIELD:
	                field = g.dataSource.getField(g.groupField);
	                return field ? field.fieldName : "";
	            case RowGroupStatementRuntime.ID_FIELD_HEADER:
	                field = g.dataSource.getField(g.groupField);
	                return field ? field.header : "";
	            case RowGroupStatementRuntime.ID_GROUP_COLUMN:
	                column = this._grid ? this._grid.columnByField(g.groupField) : null;
	                return column ? column.displayText : g.dataSource.getFieldName(g.groupField);
	            case RowGroupStatementRuntime.ID_COLUMN_HEADER:
	                column = this._grid ? this._grid.columnByField(g.groupField) : null;
	                if (column) {
	                    return column.header.text || column.displayText;
	                }
	                else {
	                    return g.dataSource.getFieldName(g.groupField);
	                }
	            case RowGroupStatementRuntime.ID_COLUMN_FOOTER:
	                column = this._grid ? this._grid.columnByField(g.groupField) : null;
	                if (column) {
	                    return column.footer.text || column.displayText;
	                }
	                else {
	                    return g.dataSource.getFieldName(g.groupField);
	                }
	            case RowGroupStatementRuntime.ID_GROUP_VALUE:
	                var item = g.firstItem;
	                return item ? item.getData(g.groupField) : undefined;
	            case RowGroupStatementRuntime.ID_ROW_COUNT:
	                return g.descendantCount;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    RowGroupStatementRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        switch (idKey) {
	            case RowGroupStatementRuntime.ID_SUM:
	            case RowGroupStatementRuntime.ID_MAX:
	            case RowGroupStatementRuntime.ID_MIN:
	            case RowGroupStatementRuntime.ID_AVG:
	            case RowGroupStatementRuntime.ID_DATA_COUNT:
	            case RowGroupStatementRuntime.ID_DATA_AVG:
	                if (isNaN(index) || index < 0) {
	                    return undefined;
	                }
	                else {
	                    var ret = void 0;
	                    switch (idKey) {
	                        case RowGroupStatementRuntime.ID_SUM:
	                            ret = this._group.getSum(index);
	                            break;
	                        case RowGroupStatementRuntime.ID_MAX:
	                            ret = this._group.getMax(index);
	                            break;
	                        case RowGroupStatementRuntime.ID_MIN:
	                            ret = this._group.getMin(index);
	                            break;
	                        case RowGroupStatementRuntime.ID_AVG:
	                            ret = this._group.getAvg(index);
	                            break;
	                        case RowGroupStatementRuntime.ID_DATA_COUNT:
	                            //ret = this._group.getDataCount(index);
	                            break;
	                        case RowGroupStatementRuntime.ID_DATA_AVG:
	                            //ret = this._group.getDataAvg(index);
	                            break;
	                    }
	                    return isNaN(ret) ? "" : String(ret);
	                }
	                break;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    RowGroupStatementRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        var ds = this._group.dataSource;
	        var field = index ? (ds ? ds.getFieldIndex(index) : -1) : (this._group.groupField);
	        return this.evaluateIndexerI(idKey, field);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    RowGroupStatementRuntime.ID_GROUP_FIELD = 0;
	    RowGroupStatementRuntime.ID_FIELD_HEADER = 1;
	    RowGroupStatementRuntime.ID_GROUP_COLUMN = 2;
	    RowGroupStatementRuntime.ID_COLUMN_HEADER = 3;
	    RowGroupStatementRuntime.ID_COLUMN_FOOTER = 4;
	    RowGroupStatementRuntime.ID_GROUP_VALUE = 5;
	    RowGroupStatementRuntime.ID_ROW_COUNT = 6;
	    RowGroupStatementRuntime.ID_SUM = 7;
	    RowGroupStatementRuntime.ID_MAX = 8;
	    RowGroupStatementRuntime.ID_MIN = 9;
	    RowGroupStatementRuntime.ID_AVG = 10;
	    RowGroupStatementRuntime.ID_DATA_COUNT = 11;
	    RowGroupStatementRuntime.ID_DATA_AVG = 12;
	    RowGroupStatementRuntime.IDENTS = {
	        groupfield: RowGroupStatementRuntime.ID_GROUP_FIELD,
	        fieldheader: RowGroupStatementRuntime.ID_FIELD_HEADER,
	        groupcolumn: RowGroupStatementRuntime.ID_GROUP_COLUMN,
	        columnheader: RowGroupStatementRuntime.ID_COLUMN_HEADER,
	        columnfooter: RowGroupStatementRuntime.ID_COLUMN_FOOTER,
	        groupvalue: RowGroupStatementRuntime.ID_GROUP_VALUE,
	        rowcount: RowGroupStatementRuntime.ID_ROW_COUNT,
	        sum: RowGroupStatementRuntime.ID_SUM,
	        max: RowGroupStatementRuntime.ID_MAX,
	        min: RowGroupStatementRuntime.ID_MIN,
	        avg: RowGroupStatementRuntime.ID_AVG,
	        datacount: RowGroupStatementRuntime.ID_DATA_COUNT,
	        dataavg: RowGroupStatementRuntime.ID_DATA_AVG,
	    };
	    return RowGroupStatementRuntime;
	}(Expression.ExpressionRuntime));
	exports.RowGroupStatementRuntime = RowGroupStatementRuntime;
	});

	unwrapExports(Runtimes);
	var Runtimes_1 = Runtimes.DataRowExpressionRuntime;
	var Runtimes_2 = Runtimes.DataCellExpressionRuntime;
	var Runtimes_3 = Runtimes.EqualBlankRuntime;
	var Runtimes_4 = Runtimes.RowGroupStatementRuntime;

	var GridCell_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridCell.ts
	// 2019. 07. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var GridCell = /** @class */ (function (_super) {
	    __extends(GridCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridCell(name) {
	        var _this = _super.call(this) || this;
	        _this._index = new CellIndex_1.CellIndex();
	        _this._name = name;
	        return _this;
	    }
	    GridCell.prototype._doDispose = function () {
	        this._index && this._index.dispose();
	        this._index = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridCell.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "item", {
	        /** item */
	        get: function () {
	            return this._index.item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "valueColumn", {
	        /** valueColumn */
	        get: function () {
	            return this._index.valueColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "dataColumn", {
	        /** dataColumn */
	        get: function () {
	            return this._index.dataColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "error", {
	        /** error */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "errorLevel", {
	        /** errorLevel */
	        get: function () {
	            return Types.ValidationLevel.IGNORE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "text", {
	        /** text */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "value", {
	        /** value  */
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridCell.prototype, "level", {
	        /** level */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    // /** styles */
	    // get styles(): VisualStyles {
	    //     return this._styles;
	    // }
	    // set styles(value: VisualStyles) {
	    //     this._styles = value;
	    // }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridCell.prototype.setIndex = function (value) {
	        this._index.assignFrom(value);
	    };
	    GridCell.prototype.setLayout = function (layout) {
	        this._index.layout = layout;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridCell.ERROR = "<<ERROR>>";
	    return GridCell;
	}(Base_1.Base));
	exports.GridCell = GridCell;
	var StyledCell = /** @class */ (function (_super) {
	    __extends(StyledCell, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function StyledCell(model, name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this._model = model;
	        return _this;
	    }
	    StyledCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(StyledCell.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        set: function (value) {
	            this._model = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return StyledCell;
	}(GridCell));
	exports.StyledCell = StyledCell;
	var ValueCell = /** @class */ (function (_super) {
	    __extends(ValueCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ValueCell(name) {
	        return _super.call(this, name) || this;
	    }
	    ValueCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ValueCell.prototype, "blankState", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.BlankState.NONE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueCell.prototype, "changed", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ValueCell.prototype.setCellStyles = function (value) {
	        this._cellStyles = value;
	        // this._styles.assignFrom(value);
	    };
	    return ValueCell;
	}(GridCell));
	exports.ValueCell = ValueCell;
	var DataCell = /** @class */ (function (_super) {
	    __extends(DataCell, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataCell(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name || "dataCell") || this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DataCell.getText = function (item, column) {
	        var value = column.dataIndex >= 0 ? item.getData(column.dataIndex) : undefined;
	        return DataCell._getText(item, column, value);
	    };
	    DataCell._getText = function (item, column, value) {
	        var col = column;
	        var v;
	        if (col.lookupDisplay) {
	            var lookup = col.lookupSource;
	            if (lookup) {
	                var flds = col.lookupKeyFieldIds;
	                var cnt = flds.length;
	                var keys = [];
	                for (var i = 0; i < cnt; i++) {
	                    keys.push(item.getData(flds[i]));
	                }
	                v = lookup.lookup(keys, col.valueSeparator);
	                v = (v !== undefined) ? v : col.textOfInvalid != null ? col.textOfInvalid : value;
	            }
	            else {
	                var fld = col.labelFieldIndex;
	                v = (fld >= 0) ? item.getData(fld) : col.getLookupLabel(value);
	            }
	        }
	        else {
	            var cb = void 0;
	            var s_1;
	            v = value;
	            if (col.valueType == Types.ValueType.NUMBER && (s_1 = col.nanText) != null && isNaN(v)) {
	                v = s_1;
	            }
	            else if (cb = col.displayCallback) {
	                var handler = col.grid.getHandler();
	                var idx = CellIndex_1.CellIndex.temp(col.grid, item.index, column);
	                v = cb(handler, idx.proxy(), v);
	            }
	            else if (v != null && typeof v === "object") {
	                v = JSON.stringify(v);
	            }
	        }
	        var s = (v === undefined || v === null) ? "" : String(v);
	        return s;
	    };
	    DataCell._getDisplayText = function (grid, index, value, cf) {
	        var options = grid.formatOptions;
	        var col = index.dataColumn;
	        var s;
	        //numberFormatter && (col._displayMinusZero != null ? this._numberFormatter.setDisplayMinusZero(!!col._displayMinusZero) : this._numberFormatter.setDisplayMinusZero(true));
	        if (col) {
	            switch (col.valueType) {
	                case Types.ValueType.TEXT:
	                    var tf = void 0;
	                    if (value && (tf = options.getTextFormatter(cf.textFormatter))) {
	                        s = tf.getText(value);
	                    }
	                    else {
	                        s = DataCell._getText(index.item, col, value);
	                    }
	                    break;
	                case Types.ValueType.NUMBER:
	                    var v = Number(value);
	                    var f = void 0;
	                    if (isNaN(v)) {
	                        s = col.nanText;
	                    }
	                    else if (v == 0 && col.zeroText != null) {
	                        s = col.zeroText;
	                    }
	                    else if (f = options.getNumberFormatter(cf.numberFormatter)) {
	                        //col._displayMinusZero != null ? f.setDisplayMinusZero(!!col._displayMinusZero) : f.setDisplayMinusZero(true);
	                        s = f.getText(v);
	                    }
	                    else {
	                        s = DataCell._getText(index.item, col, value);
	                    }
	                    break;
	                case Types.ValueType.DATETIME:
	                    var w = void 0;
	                    /*if (this._value instanceof Date && this._datetimeFormatter) {
	                        s = this._datetimeFormatter.format(this._value);
	                    } else*/ if (value instanceof Date && (w = options.getDateWriter(cf.datetimeWriter))) {
	                        s = w.getText(value);
	                    }
	                    else {
	                        s = DataCell._getText(index.item, col, value);
	                    }
	                    break;
	                case Types.ValueType.BOOLEAN:
	                    var bf = void 0;
	                    if (bf = options.getBoolFormatter(cf.booleanFormatter)) {
	                        s = bf.formatValue(value);
	                    }
	                    else {
	                        s = DataCell._getText(index.item, col, value);
	                    }
	                    break;
	                case Types.ValueType.OBJECT:
	                // var field = col.getField;
	                // var dataRow = this._index.dataRow;
	                // var key = col._objectKey;
	                // var fn = col._objectCallback;
	                // var v = this._value;
	                // var f;
	                // if (v) {
	                //     s = v = fn && typeof fn === "function" ? fn(field.orgFieldName(), dataRow, v) : key && v.hasOwnProperty(key) ? v[key]  : model.displayText();
	                //     switch (typeof v) {
	                //         case "stirng":
	                //             break;
	                //         case "number":
	                //             s = (f = this.numberFormatter) ? f.format(v) : v;
	                //             break;
	                //         case "boolean":
	                //             s = (f = this._boolFormatter) ? f.formatValue(v) : v;
	                //             break;
	                //         default:
	                //             s = v instanceof Date && (f = this.datetimeWriter()) ? f.getText(v) : v;
	                //             break;
	                //     }
	                // }
	                // break;
	                default:
	                    s = DataCell._getText(index.item, col, value);
	                    break;
	            }
	            if (s) {
	                var f = cf.prefix;
	                if (f)
	                    s = f + s;
	                f = cf.suffix;
	                if (f)
	                    s += f;
	            }
	        }
	        return s;
	    };
	    DataCell.equalBlankRuntime = function () {
	        if (!this._equalBlankRuntime) {
	            this._equalBlankRuntime = new Runtimes.EqualBlankRuntime();
	        }
	        return this._equalBlankRuntime;
	    };
	    DataCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataCell.prototype.getValue = function () {
	        var fld = this.dataColumn.dataIndex;
	        if (fld >= 0) {
	            return this.item.getData(fld);
	        }
	        return undefined;
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataCell.prototype.getDisplayText = function (grid, cell) {
	        return DataCell._getDisplayText(grid, this.index, this.getValue(), cell);
	    };
	    Object.defineProperty(DataCell.prototype, "value", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            // typescript에 super proeperty를 호출하는 방법이 없어서...
	            return this.getValue();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCell.prototype, "blankState", {
	        get: function () {
	            var state = Types.BlankState.NONE, idx = this.index, layout = idx.layout, col = this.dataColumn, item = this.item, expr = layout.equalBlankNode, runtime = expr && DataCell.equalBlankRuntime();
	            // TODO dataRoot 1.0에서는 root_column의 하위인경우만 처리되었다.
	            if (layout && (layout.blanked) && layout.dataRoot && item.dataRow >= 0) {
	                var grid = layout.grid, //TODO 그리드는 어디서?
	                cnt = grid.itemCount;
	                expr && runtime && runtime.setDataArguments(item.dataSource, this, item);
	                if (cnt > 1) {
	                    var i = idx.itemIndex, fld = col.dataIndex, v = expr ? (runtime.setItem(item), expr.evaluate(runtime)) : item.getData(fld);
	                    var prev = void 0, next = void 0, nextItem = void 0;
	                    if (i > 0) {
	                        var prevItem = grid.getItem(i - 1);
	                        if (i < cnt - 1) {
	                            nextItem = grid.getItem(i + 1);
	                            if (prevItem instanceof GridItem_1.GridRow) {
	                                prev = expr ? (runtime.setItem(prevItem), expr.evaluate(runtime)) : prevItem.getData(fld);
	                                if (v instanceof Date && prev instanceof Date ? +v == +prev : v == prev) {
	                                    if (nextItem instanceof GridItem_1.GridRow) {
	                                        next = expr ? (runtime.setItem(nextItem), expr.evaluate(runtime)) : nextItem.getData(fld);
	                                        state = (next instanceof Date && v instanceof Date ? +next == +v : next == v) ? Types.BlankState.BODY : Types.BlankState.TAIL;
	                                    }
	                                    else {
	                                        state = Types.BlankState.TAIL;
	                                    }
	                                }
	                                else if (nextItem instanceof GridItem_1.GridRow) {
	                                    next = expr ? (runtime.setItem(nextItem), expr.evaluate(runtime)) : nextItem.getData(fld);
	                                    if (next instanceof Date && v instanceof Date ? +next == +v : next == v) {
	                                        state = Types.BlankState.HEAD;
	                                    }
	                                }
	                            }
	                            else if (nextItem instanceof GridItem_1.GridRow) {
	                                next = expr ? (runtime.setItem(nextItem), expr.evaluate(runtime)) : nextItem.getData(fld);
	                                if (next instanceof Date && v instanceof Date ? +next == +v : next == v) {
	                                    state = Types.BlankState.HEAD;
	                                }
	                            }
	                        }
	                        else if (prevItem instanceof GridItem_1.GridRow) {
	                            prev = expr ? (runtime.setItem(prevItem), expr.evaluate(runtime)) : prevItem.getData(fld);
	                            if (prev instanceof Date && v instanceof Date ? +prev == +v : prev == v) {
	                                state = Types.BlankState.TAIL;
	                            }
	                        }
	                    }
	                    else {
	                        nextItem = grid.getItem(i + 1);
	                        if (nextItem instanceof GridItem_1.GridRow) {
	                            next = expr ? (runtime.setItem(nextItem), expr.evaluate(runtime)) : nextItem.getData(fld);
	                            if (next instanceof Date && v instanceof Date ? +next == +v : next == v) {
	                                state = Types.BlankState.HEAD;
	                            }
	                        }
	                    }
	                }
	            }
	            return state;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCell.prototype, "changed", {
	        get: function () {
	            var fld = this.dataColumn.dataIndex;
	            if (fld >= 0) {
	                return this.item.isChanged(fld);
	            }
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return DataCell;
	}(ValueCell));
	exports.DataCell = DataCell;
	var LiteralCell = /** @class */ (function (_super) {
	    __extends(LiteralCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LiteralCell(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name || "literalCell") || this;
	    }
	    LiteralCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(LiteralCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            // TODO: Fix it
	            return ""; //this.index.column.value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LiteralCell.prototype, "value", {
	        get: function () {
	            // TODO: Fix it
	            return null; //this.index.column.getValue();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LiteralCell.prototype.getDisplayText = function (grid) {
	        return this.text;
	    };
	    return LiteralCell;
	}(ValueCell));
	exports.LiteralCell = LiteralCell;
	var SeriesCell = /** @class */ (function (_super) {
	    __extends(SeriesCell, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SeriesCell(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name || "seriesCell") || this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    SeriesCell.getText = function (value, separator) {
	        return value ? value.join(separator || ",") : "";
	    };
	    SeriesCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SeriesCell.prototype.getDisplayText = function (grid, separator) {
	        var vals = this.value;
	        return vals ? vals.join(separator || ",") : "";
	    };
	    Object.defineProperty(SeriesCell.prototype, "getText", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SeriesCell.prototype, "value", {
	        get: function () {
	            var column = this.index.column;
	            if (column instanceof GridColumn_1.SeriesColumn) {
	                var fields = column.fields;
	                var cnt = fields ? fields.length : 0;
	                if (cnt > 0) {
	                    var item = this.item;
	                    var vals = new Array(cnt);
	                    for (var i = 0; i < cnt; i++) {
	                        if (fields[i] >= 0) {
	                            vals[i] = item.getData(fields[i]);
	                        }
	                    }
	                    return vals;
	                }
	            }
	            return [];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return SeriesCell;
	}(ValueCell));
	exports.SeriesCell = SeriesCell;
	var MergedDataCell = /** @class */ (function (_super) {
	    __extends(MergedDataCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MergedDataCell(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name || "mergedDataCell") || this;
	    }
	    MergedDataCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    MergedDataCell.prototype.getValue = function () {
	        var index = this.index;
	        var item = index.item;
	        if (item instanceof GridItem_1.GridRow) {
	            return _super.prototype.getValue.call(this);
	        }
	        else {
	            var group = (item instanceof GridItem_1.GroupItem) ? item : item.parent;
	            item = group.firstItem;
	            return item.getData(index.dataField);
	        }
	    };
	    Object.defineProperty(MergedDataCell.prototype, "text", {
	        get: function () {
	            return this.getValue();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return MergedDataCell;
	}(DataCell));
	exports.MergedDataCell = MergedDataCell;
	});

	unwrapExports(GridCell_1);
	var GridCell_2 = GridCell_1.GridCell;
	var GridCell_3 = GridCell_1.StyledCell;
	var GridCell_4 = GridCell_1.ValueCell;
	var GridCell_5 = GridCell_1.DataCell;
	var GridCell_6 = GridCell_1.LiteralCell;
	var GridCell_7 = GridCell_1.SeriesCell;
	var GridCell_8 = GridCell_1.MergedDataCell;

	var Barcode_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Barcode.ts
	// 2019. 11. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var Barcode = /** @class */ (function (_super) {
	    __extends(Barcode, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Barcode() {
	        return _super.call(this) || this;
	    }
	    Barcode.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(Barcode.prototype, "value", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** value */
	        get: function () {
	            return this._value;
	        },
	        set: function (v) {
	            if (v != this._value) {
	                this._value = v;
	                try {
	                    this._error = null;
	                    this._parse(v);
	                }
	                catch (err) {
	                    this._error = err;
	                    //throw err;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Barcode.prototype, "error", {
	        /** error */
	        get: function () {
	            return this._error;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Barcode.prototype.render = function (svg, r) {
	        this._doRender(svg, r, false);
	    };
	    Barcode.prototype.renders = function (svg, r) {
	        this._doRender(svg, r, true);
	    };
	    return Barcode;
	}(Base_1.Base));
	var LinearBarcode = /** @class */ (function (_super) {
	    __extends(LinearBarcode, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LinearBarcode() {
	        var _this = _super.call(this) || this;
	        _this.integralBar = true;
	        _this.minBarWidth = 1;
	        _this.maxBarWidth = 0;
	        _this.barWidth = 0;
	        return _this;
	    }
	    LinearBarcode.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    LinearBarcode.prototype._doRender = function (svg, r, relatvie) {
	        var len = this._getBarLength();
	        if (len < 1) {
	            return;
	        }
	        var w = this.barWidth;
	        if (w <= 0) {
	            if (this.integralBar) {
	                w = Math.floor(r.width / len);
	            }
	            else {
	                w = r.width / len;
	            }
	            w = Math.max(this.minBarWidth, w);
	            if (this.maxBarWidth > 0) {
	                w = Math.min(this.maxBarWidth, w);
	            }
	        }
	        len = w * len;
	        r.x += (r.width - len) / 2;
	        if (this.integralBar) {
	            r.x = Math.floor(r.x);
	        }
	        this._drawBars(svg, this.barStyle, relatvie, r.x, r.y, w, r.height);
	    };
	    return LinearBarcode;
	}(Barcode));
	var $$_C128_BAR_WEIGHTS = [
	    0x212222, 0x222122, 0x222221, 0x121223, 0x121322, 0x131222, 0x122213, 0x122312, 0x132212, 0x221213,
	    0x221312, 0x231212, 0x112232, 0x122132, 0x122231, 0x113222, 0x123122, 0x123221, 0x223211, 0x221132,
	    0x221231, 0x213212, 0x223112, 0x312131, 0x311222, 0x321122, 0x321221, 0x312212, 0x322112, 0x322211,
	    0x212123, 0x212321, 0x232121, 0x111323, 0x131123, 0x131321, 0x112313, 0x132113, 0x132311, 0x211313,
	    0x231113, 0x231311, 0x112133, 0x112331, 0x132131, 0x113123, 0x113321, 0x133121, 0x313121, 0x211331,
	    0x231131, 0x213113, 0x213311, 0x213131, 0x311123, 0x311321, 0x331121, 0x312113, 0x312311, 0x332111,
	    0x314111, 0x221411, 0x431111, 0x111224, 0x111422, 0x121124, 0x121421, 0x141122, 0x141221, 0x112214,
	    0x112412, 0x122114, 0x122411, 0x142112, 0x142211, 0x241211, 0x221114, 0x413111, 0x241112, 0x134111,
	    0x111242, 0x121142, 0x121241, 0x114212, 0x124112, 0x124211, 0x411212, 0x421112, 0x421211, 0x212141,
	    0x214121, 0x412121, 0x111143, 0x111341, 0x131141, 0x114113, 0x114311, 0x411113, 0x411311, 0x113141,
	    0x114131, 0x311141, 0x411131, 0x211412, 0x211214, 0x211232, 0x2331112
	];
	var $$_C128_STOP_CODE = 106;
	var $$_C128_TYPE_A = 0;
	var $$_C128_TYPE_B = 1;
	var $$_C128_TYPE_C = 2;
	var $$_C128_START_CODES = [103, 104, 105];
	var $$_C128_MASKS = [
	    0xF000000, 0x0F00000, 0x00F0000, 0x000F000, 0x0000F00, 0x00000F0, 0x000000F
	];
	var Code128 = /** @class */ (function (_super) {
	    __extends(Code128, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Code128() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.quietZoneWidth = 10;
	        return _this;
	    }
	    Code128.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    Code128.prototype._parse = function (value) {
	        this._weights = [];
	        var len = value ? value.length : 0;
	        if (len < 1) {
	            return;
	        }
	        var type = this.$_detectType(value);
	        if (type == $$_C128_TYPE_C && len % 2 == 1) {
	            value = "0" + value;
	            len++;
	        }
	        var c = $$_C128_START_CODES[type];
	        var w = $$_C128_BAR_WEIGHTS[c];
	        var check = c;
	        this._weights.push(w);
	        if (type == $$_C128_TYPE_C) {
	            for (var i = 0; i < len; i += 2) {
	                var s = value.substr(i, 2);
	                c = parseInt(s);
	                c = this.$_convert(type, c);
	                w = $$_C128_BAR_WEIGHTS[c];
	                this._weights.push(w);
	                check += c * (i + 1);
	            }
	        }
	        else {
	            for (var i = 0; i < len; i++) {
	                c = value.charCodeAt(i);
	                c = this.$_convert(type, c);
	                w = $$_C128_BAR_WEIGHTS[c];
	                this._weights.push(w);
	                check += c * (i + 1);
	            }
	        }
	        check = check % 103;
	        this._weights.push($$_C128_BAR_WEIGHTS[check]);
	        this._weights.push($$_C128_BAR_WEIGHTS[$$_C128_STOP_CODE]);
	    };
	    Code128.prototype._getBarLength = function () {
	        return this.quietZoneWidth + (this._weights.length - 1) * 11 + 13 + this.quietZoneWidth;
	    };
	    Code128.prototype._drawBars = function (g, barStyle, relatvie, x, y, barWidth, barHeight) {
	        x += 10 * barWidth;
	        var cnt = this._weights.length - 1;
	        var code;
	        for (var i = 0; i < cnt; i++) {
	            code = this._weights[i];
	            for (var j = 0; j < 6; j++) {
	                var b = (code & $$_C128_MASKS[j + 1]) >> ((5 - j) * 4);
	                b *= barWidth;
	                if (j % 2 == 0) {
	                    if (relatvie) {
	                        this.integralBar ?
	                            g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%") :
	                            g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%");
	                    }
	                    else {
	                        this.integralBar ?
	                            g.bounds(barStyle, x, y, b, barHeight) :
	                            g.bounds(barStyle, x, y, b, barHeight);
	                    }
	                }
	                x += b;
	            }
	        }
	        code = this._weights[cnt];
	        for (var j = 0; j < 7; j++) {
	            var b = (code & $$_C128_MASKS[j]) >> ((6 - j) * 4);
	            b *= barWidth;
	            if (j % 2 == 0) {
	                if (relatvie) {
	                    this.integralBar ?
	                        g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%") :
	                        g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%");
	                }
	                else {
	                    this.integralBar ?
	                        g.bounds(barStyle, x, y, b, barHeight) :
	                        g.bounds(barStyle, x, y, b, barHeight);
	                }
	            }
	            x += b;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    Code128.prototype.$_convert = function (type, char) {
	        switch (type) {
	            case $$_C128_TYPE_A:
	                if (char >= 0 && char < 32)
	                    return char + 64;
	                if (char >= 32 && char < 96)
	                    return char - 32;
	            case $$_C128_TYPE_B:
	                if (char >= 32 && char < 128)
	                    return char - 32;
	            case $$_C128_TYPE_C:
	                if (char >= 0 && char <= 99)
	                    return char;
	        }
	        throw new Error("Invalid code128 charactor: " + char);
	    };
	    Code128.prototype.$_detectType = function (value) {
	        var pattern = /^[0-9]+$/;
	        if (pattern.test(value)) {
	            return $$_C128_TYPE_C;
	        }
	        pattern = /[a-z]/;
	        if (pattern.test(value)) {
	            return $$_C128_TYPE_B;
	        }
	        return $$_C128_TYPE_A;
	    };
	    return Code128;
	}(LinearBarcode));
	exports.Code128 = Code128;
	var $$_C39_CODES = {
	    "0": "nnnwwnwnn",
	    "1": "wnnwnnnnw",
	    "2": "nnwwnnnnw",
	    "3": "wnwwnnnnn",
	    "4": "nnnwwnnnw",
	    "5": "wnnwwnnnn",
	    "6": "nnwwwnnnn",
	    "7": "nnnwnnwnw",
	    "8": "wnnwnnwnn",
	    "9": "nnwwnnwnn",
	    "A": "wnnnnwnnw",
	    "B": "nnwnnwnnw",
	    "C": "wnwnnwnnn",
	    "D": "nnnnwwnnw",
	    "E": "wnnnwwnnn",
	    "F": "nnwnwwnnn",
	    "G": "nnnnnwwnw",
	    "H": "wnnnnwwnn",
	    "I": "nnwnnwwnn",
	    "J": "nnnnwwwnn",
	    "K": "wnnnnnnww",
	    "L": "nnwnnnnww",
	    "M": "wnwnnnnwn",
	    "N": "nnnnwnnww",
	    "O": "wnnnwnnwn",
	    "P": "nnwnwnnwn",
	    "Q": "nnnnnnwww",
	    "R": "wnnnnnwwn",
	    "S": "nnwnnnwwn",
	    "T": "nnnnwnwwn",
	    "U": "wwnnnnnnw",
	    "V": "nwwnnnnnw",
	    "W": "wwwnnnnnn",
	    "X": "nwnnwnnnw",
	    "Y": "wwnnwnnnn",
	    "Z": "nwwnwnnnn",
	    "-": "nwnnnnwnw",
	    ".": "wwnnnnwnn",
	    " ": "nwwnnnwnn",
	    "$": "nwnwnwnnn",
	    "/": "nwnwnnnwn",
	    "+": "nwnnnwnwn",
	    "%": "nnnwnwnwn",
	    "*": "nwnnwnwnn"
	};
	var Code39 = /** @class */ (function (_super) {
	    __extends(Code39, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Code39() {
	        var _this = _super.call(this) || this;
	        _this._wideWidth = 3;
	        return _this;
	    }
	    Code39.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    Code39.prototype._parse = function (value) {
	        this._codes = [];
	        if (!value) {
	            return;
	        }
	        var cnt = value.length;
	        this._codes.push($$_C39_CODES["*"]);
	        for (var i = 0; i < cnt; i++) {
	            var c = value.charAt(i);
	            var code = $$_C39_CODES[c];
	            if (!code) {
	                throw new Error("Invalid Code39 character: " + c);
	            }
	            this._codes.push(code);
	        }
	        this._codes.push($$_C39_CODES["*"]);
	    };
	    Code39.prototype._getBarLength = function () {
	        var len = this._codes.length;
	        return len * (3 * this._wideWidth + 6) + (len - 1);
	    };
	    Code39.prototype._drawBars = function (g, barStyle, relatvie, x, y, barWidth, barHeight) {
	        var cnt = this._codes.length;
	        if (cnt > 2) {
	            for (var i = 0; i < cnt; i++) {
	                var code = this._codes[i];
	                for (var j = 0; j < 9; j++) {
	                    var b = code.charAt(j) == "n" ? 1 : this._wideWidth;
	                    b *= barWidth;
	                    if (j % 2 == 0) {
	                        if (relatvie) {
	                            this.integralBar ?
	                                g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%") :
	                                g.sbounds(barStyle, x + "", y + "%", b + "", barHeight + "%");
	                        }
	                        else {
	                            this.integralBar ?
	                                g.bounds(barStyle, x, y, b, barHeight) :
	                                g.bounds(barStyle, x, y, b, barHeight);
	                        }
	                    }
	                    x += b;
	                }
	                if (i < cnt - 1) {
	                    x += barWidth;
	                }
	            }
	        }
	    };
	    return Code39;
	}(LinearBarcode));
	exports.Code39 = Code39;
	});

	unwrapExports(Barcode_1);
	var Barcode_2 = Barcode_1.Code128;
	var Barcode_3 = Barcode_1.Code39;

	var Svg = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Svg.ts
	// 2019. 11. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var SVGNS = "http://www.w3.org/2000/svg";
	var $_clip = 0;
	var SvgRenderer = /** @class */ (function (_super) {
	    __extends(SvgRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SvgRenderer(defs, element) {
	        var _this = _super.call(this) || this;
	        _this._transforms = [];
	        _this._defs = defs;
	        _this._element = element;
	        return _this;
	    }
	    SvgRenderer.prototype._doDispose = function () {
	        this._defs = null;
	        this._element = null;
	        this._transforms = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SvgRenderer.prototype.save = function () {
	        this._transforms.push(this._trans);
	        this._trans = "";
	    };
	    SvgRenderer.prototype.restore = function () {
	        this._trans = this._transforms.pop();
	    };
	    SvgRenderer.prototype.translate = function (x, y) {
	        this._trans += "translate(" + x + "," + y + ")";
	    };
	    SvgRenderer.prototype.rotate = function (angle) {
	        this._trans += "rotate(" + (angle * 180 / Math.PI) + ")";
	    };
	    SvgRenderer.prototype.rotateAt = function (angle, x, y) {
	        this._trans += "rotate(" + (angle * 180 / Math.PI) + "," + x + "," + ")";
	    };
	    SvgRenderer.prototype.scale = function (x, y) {
	        this._trans += "scale(" + x + "," + y + ")";
	    };
	    SvgRenderer.prototype.clipRect = function (r) {
	        this.clip(r.x, r.y, r.width, r.height);
	    };
	    SvgRenderer.prototype.clip = function (x, y, w, h) {
	        var id = $_clip++;
	        var clip = document.createElementNS(SVGNS, "clipPath");
	        clip.setAttributeNS(null, "id", "clip" + id);
	        var rect = document.createElementNS(SVGNS, "rect");
	        rect.x.baseVal.value = x;
	        rect.y.baseVal.value = y;
	        rect.width.baseVal.value = w;
	        rect.height.baseVal.value = h;
	        clip.appendChild(rect);
	        this._defs.appendChild(clip);
	    };
	    SvgRenderer.prototype.line = function (style, x1, y1, x2, y2) {
	        var elt = document.createElementNS(SVGNS, "line");
	        this._element.appendChild(elt);
	        elt.x1.baseVal.value = x1;
	        elt.y1.baseVal.value = y1;
	        elt.x2.baseVal.value = x2;
	        elt.y2.baseVal.value = y2;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.sline = function (style, x1, y1, x2, y2) {
	        var elt = document.createElementNS(SVGNS, "line");
	        this._element.appendChild(elt);
	        elt.x1.baseVal.valueAsString = x1;
	        elt.y1.baseVal.valueAsString = y1;
	        elt.x2.baseVal.valueAsString = x2;
	        elt.y2.baseVal.valueAsString = y2;
	        style && elt.setAttribute("class", style);
	    };
	    // iline(color: string, width: number, x1: number, y1: number, x2: number, y2: number): void {
	    //     const elt = document.createElementNS(SVGNS, "line");
	    //     this._element.appendChild(elt);
	    //     const d = width > 0 ? (width % 2) / 2 : 0;
	    //     if (x1 == x2) {
	    //         elt.x1.baseVal.value = x1 + d;
	    //         elt.y1.baseVal.value = y1;
	    //         elt.x2.baseVal.value = x2 + d;
	    //         elt.y2.baseVal.value = y2;
	    //     } else if (y1 == y2) {
	    //         elt.x1.baseVal.value = x1;
	    //         elt.y1.baseVal.value = y1 + d;
	    //         elt.x2.baseVal.value = x2;
	    //         elt.y2.baseVal.value = y2 + d;
	    //     } else {
	    //         elt.x1.baseVal.value = x1;
	    //         elt.y1.baseVal.value = y1;
	    //         elt.x2.baseVal.value = x2;
	    //         elt.y2.baseVal.value = y2;
	    //     }
	    //     this.$_stroke(elt, color, width);
	    // }
	    SvgRenderer.prototype.lines = function (style) {
	        var pts = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            pts[_i - 1] = arguments[_i];
	        }
	        if (pts == null || pts.length < 4)
	            return;
	        var elt = document.createElementNS(SVGNS, "polyline");
	        this._element.appendChild(elt);
	        var points = [];
	        points.push(pts[0] + "," + pts[1]);
	        for (var i = 2; i < pts.length; i += 2) {
	            points.push(pts[i] + "," + pts[i + 1]);
	        }
	        elt.setAttributeNS(null, 'points', points.join(" "));
	        style && elt.setAttribute("class", style);
	    };
	    // ilines(color: string, width: number, ...pts: number[]) {
	    //     if (pts == null || pts.length < 2) return;
	    //     const elt = document.createElementNS(SVGNS, "polyline");
	    //     this._element.appendChild(elt);
	    //     const points = [];
	    //     const d = width > 0 ? (width % 2) / 2 : 0;
	    //     points.push(pts[0] + "," + pts[1]);
	    //     for (let i = 2; i < pts.length; i += 2) {
	    //         points.push(pts[i] + "," + pts[i + 1]);
	    //     }
	    //     elt.setAttributeNS(null, 'points', points.join(" "));
	    //     this.$_stroke(elt, color, width);
	    // }
	    SvgRenderer.prototype.polygon = function (style, pts) {
	        if (pts == null || pts.length < 4)
	            return;
	        var elt = document.createElementNS(SVGNS, "polygon");
	        this._element.appendChild(elt);
	        var points = [];
	        points.push(pts[0] + "," + pts[1]);
	        for (var i = 2; i < pts.length; i += 2) {
	            points.push(pts[i] + "," + pts[i + 1]);
	        }
	        this._trans && elt.setAttributeNS(null, 'transform', this._trans);
	        elt.setAttributeNS(null, 'points', points.join(" "));
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.quadratic = function (style, x1, y1, x2, y2, x3, y3) {
	        var elt = document.createElementNS(SVGNS, "path");
	        this._element.appendChild(elt);
	        elt.setAttributeNS(null, 'd', ['M', x1, y1, 'Q', x2, y2, x3, y3].join(' '));
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.squadratic = function (style, x1, y1, x2, y2, x3, y3) {
	        var elt = document.createElementNS(SVGNS, "path");
	        this._element.appendChild(elt);
	        elt.setAttributeNS(null, 'd', ['M', x1 + "%", y1 + "%", 'Q', x2 + "%", y2 + "%", x3 + "%", y3 + "%"].join(' '));
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.curve = function (style) {
	        var pts = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            pts[_i - 1] = arguments[_i];
	        }
	        var cmds = this.$_getCurvedLinePath(pts, 0, pts.length - 1);
	        if (cmds) {
	            var elt = document.createElementNS(SVGNS, "path");
	            this._element.appendChild(elt);
	            elt.setAttributeNS(null, 'd', cmds.join(' '));
	            style && elt.setAttribute("class", style);
	        }
	    };
	    SvgRenderer.prototype.scurve = function (style) {
	        var pts = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            pts[_i - 1] = arguments[_i];
	        }
	        var cmds = this.$_getCurvedLinePath(pts, 0, pts.length - 1);
	        if (cmds) {
	            var elt = document.createElementNS(SVGNS, "path");
	            this._element.appendChild(elt);
	            for (var i = 0; i < cmds.length; i++) {
	                if (typeof cmds[i] === "number") {
	                    cmds[i] = cmds[i] + "%";
	                }
	            }
	            elt.setAttributeNS(null, 'd', cmds.join(' '));
	            style && elt.setAttribute("class", style);
	        }
	    };
	    SvgRenderer.prototype.curveRange = function (fill, stroke, width, pts1, pts2) {
	        if (pts1 && pts1.length > 1 && pts2 && pts2.length > 1 && (fill || stroke)) {
	            var cmds1 = this.$_getCurvedLinePath(pts1, 0, pts1.length / 2 - 1, true);
	            if (cmds1) {
	                cmds1.push("L", pts2[pts2.length - 2], [pts2.length - 1]);
	                var cmds2 = this.$_getCurvedLinePath(pts2, pts2.length / 2 - 1, 0, false);
	                if (cmds2) {
	                    cmds1 = cmds1.concat(cmds2);
	                }
	                cmds1.push("L", pts1[0], pts1[1]);
	                var elt = document.createElementNS(SVGNS, "path");
	                this._element.appendChild(elt);
	                elt.setAttributeNS(null, 'd', cmds1.join(' '));
	                this.$_fillOrStroke(elt, fill, stroke, width);
	            }
	        }
	    };
	    SvgRenderer.prototype.rect = function (style, r) {
	        var elt = document.createElementNS(SVGNS, "rect");
	        this._element.appendChild(elt);
	        elt.x.baseVal.value = r.x;
	        elt.y.baseVal.value = r.y;
	        elt.width.baseVal.value = r.width;
	        elt.height.baseVal.value = r.height;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.srect = function (style, r) {
	        var elt = document.createElementNS(SVGNS, "rect");
	        this._element.appendChild(elt);
	        elt.x.baseVal.valueAsString = r.x + "%";
	        elt.y.baseVal.valueAsString = r.y + "%";
	        elt.width.baseVal.valueAsString = r.width + "%";
	        elt.height.baseVal.valueAsString = r.height + "%";
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.bounds = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "rect");
	        this._element.appendChild(elt);
	        elt.x.baseVal.value = x;
	        elt.y.baseVal.value = h < 0 ? y + h : y;
	        elt.width.baseVal.value = w;
	        elt.height.baseVal.value = Math.abs(h);
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.pbounds = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "rect");
	        this._element.appendChild(elt);
	        elt.x.baseVal.valueAsString = x + "%";
	        elt.y.baseVal.valueAsString = (h < 0 ? y + h : y) + "%";
	        elt.width.baseVal.valueAsString = w + "%";
	        elt.height.baseVal.valueAsString = Math.abs(h) + "%";
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.sbounds = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "rect");
	        this._element.appendChild(elt);
	        elt.x.baseVal.valueAsString = x;
	        elt.y.baseVal.valueAsString = y;
	        elt.width.baseVal.valueAsString = w;
	        elt.height.baseVal.valueAsString = h;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.circle = function (style, cx, cy, rd) {
	        var elt = document.createElementNS(SVGNS, "circle");
	        this._element.appendChild(elt);
	        elt.cx.baseVal.value = cx;
	        elt.cy.baseVal.value = cy;
	        elt.r.baseVal.value = rd;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.scircle = function (style, cx, cy, rd) {
	        var elt = document.createElementNS(SVGNS, "circle");
	        this._element.appendChild(elt);
	        elt.cx.baseVal.valueAsString = cx;
	        elt.cy.baseVal.valueAsString = cy;
	        elt.r.baseVal.valueAsString = rd;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.circleRect = function (style, width, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "circle");
	        var cx = x + w / 2;
	        var cy = y + h / 2;
	        var rd = Math.min(w, h) / 2;
	        this._element.appendChild(elt);
	        elt.cx.baseVal.value = cx;
	        elt.cy.baseVal.value = cy;
	        elt.r.baseVal.value = rd;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.scircleRect = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "circle");
	        var cx = x + w / 2;
	        var cy = y + h / 2;
	        var rd = Math.min(w, h) / 2;
	        this._element.appendChild(elt);
	        elt.cx.baseVal.valueAsString = cx + "%";
	        elt.cy.baseVal.valueAsString = cy + "%";
	        elt.r.baseVal.valueAsString = rd + "%";
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.ellipse = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "ellipse");
	        var rx = w / 2;
	        var ry = h / 2;
	        this._element.appendChild(elt);
	        elt.cx.baseVal.value = x + rx;
	        elt.cy.baseVal.value = y + ry;
	        elt.rx.baseVal.value = rx;
	        elt.ry.baseVal.value = ry;
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.sellipse = function (style, x, y, w, h) {
	        var elt = document.createElementNS(SVGNS, "ellipse");
	        var rx = w / 2;
	        var ry = h / 2;
	        this._element.appendChild(elt);
	        elt.cx.baseVal.valueAsString = (x + rx) + "%";
	        elt.cy.baseVal.valueAsString = (y + ry) + "%";
	        elt.rx.baseVal.valueAsString = rx + "%";
	        elt.ry.baseVal.valueAsString = ry + "%";
	        style && elt.setAttribute("class", style);
	    };
	    SvgRenderer.prototype.text = function (font, fontSize, color, deco, text, x, y, align) {
	        var elt = document.createElementNS(SVGNS, "text");
	        this._element.appendChild(elt);
	        font = font || "Verdana";
	        elt.setAttributeNS(null, "y", y + "");
	        elt.setAttributeNS(null, "dy", "top"); // top : 1em, middle: .5em, bottom : "".
	        elt.setAttributeNS(null, "x", x + "");
	        elt.setAttributeNS(null, "text-anchor", align);
	        elt.setAttributeNS(null, "font-family", font);
	        elt.setAttributeNS(null, "font-size", fontSize + "");
	        deco && elt.setAttributeNS(null, "text-decoration", deco);
	        elt.textContent = text;
	    };
	    SvgRenderer.prototype.stext = function (style, text, x, y, align) {
	        var elt = document.createElementNS(SVGNS, "text");
	        this._element.appendChild(elt);
	        elt.setAttributeNS(null, "y", y + "%");
	        elt.setAttributeNS(null, "dy", "top"); // top : 1em, middle: .5em, bottom : "".
	        elt.setAttributeNS(null, "x", x + "%");
	        elt.textContent = text;
	        style && elt.setAttribute("class", style);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SvgRenderer.prototype.$_stroke = function (elt, color, width) {
	        elt.style.fill = "none";
	        elt.style.stroke = color;
	        if (!isNaN(width)) {
	            elt.style.strokeWidth = width + "";
	        }
	    };
	    SvgRenderer.prototype.$_fill = function (elt, color) {
	        elt.style.fill = color;
	    };
	    SvgRenderer.prototype.$_fillOrStroke = function (elt, fill, stroke, width) {
	        if (stroke) {
	            elt.style.stroke = stroke;
	            if (!isNaN(width)) {
	                elt.style.strokeWidth = width + "";
	            }
	        }
	        if (fill) {
	            elt.style.fill = fill;
	        }
	        else {
	            elt.style.fill = "none";
	        }
	    };
	    SvgRenderer.prototype.$_getCurvedLinePath = function (pts, start, end, moving) {
	        if (moving === void 0) { moving = true; }
	        if (pts && end != start && pts.length / 2 > end) {
	            var points = [];
	            var reverse = start > end;
	            var delta = reverse ? -1 : 1;
	            var p = start;
	            if (moving) {
	                points.push("M", pts[p * 2], pts[p * 2 + 1]);
	            }
	            if (Math.abs(end - start) == 2) {
	                points.push("L", pts[(p + delta) * 2], pts[(p + delta) * 2 + 1]);
	                return points;
	            }
	            var tension = 0.25;
	            var tanLeft = { x: 0, y: 0 };
	            var tanRight = { x: 0, y: 0 };
	            var v1 = { x: 0, y: 0 };
	            var v2 = { x: pts[(p + delta) * 2] - pts[p * 2], y: pts[(p + delta) * 2 + 1] - pts[p * 2 + 1] };
	            var tan = { x: 0, y: 0 };
	            var p1 = { x: 0, y: 0 };
	            var p2 = { x: 0, y: 0 };
	            var mp = { x: 0, y: 0 };
	            var len = Math.sqrt(v2.x * v2.x + v2.y * v2.y);
	            v2.x /= len;
	            v2.y /= len;
	            var tanLenFactor = pts[(p + delta) * 2] - pts[p * 2];
	            var prevX = pts[p * 2];
	            var prevY = pts[p * 2 + 1];
	            for (p += delta; p != end; p += delta) {
	                v1.x = -v2.x;
	                v1.y = -v2.y;
	                v2.x = pts[(p + delta) * 2] - pts[p * 2];
	                v2.y = pts[(p + delta) * 2] - pts[p * 2 + 1];
	                len = Math.sqrt(v2.x * v2.x + v2.y * v2.y);
	                v2.x /= len;
	                v2.y /= len;
	                if (v2.x < v1.x) {
	                    tan.x = v1.x - v2.x;
	                    tan.y = v1.y - v2.y;
	                }
	                else {
	                    tan.x = v2.x - v1.x;
	                    tan.y = v2.y - v1.y;
	                }
	                var tanlen = Math.sqrt(tan.x * tan.x + tan.y * tan.y);
	                tan.x /= tanlen;
	                tan.y /= tanlen;
	                if (v1.y * v2.y >= 0) {
	                    tan = { x: 1, y: 0 };
	                }
	                tanLeft.x = -tan.x * tanLenFactor * tension;
	                tanLeft.y = -tan.y * tanLenFactor * tension;
	                if (p == (delta + start)) {
	                    points.push("Q", pts[p * 2] + tanLeft.x, pts[p * 2 + 1] + tanLeft.y, pts[p * 2], pts[p * 2 + 1]);
	                }
	                else {
	                    p1.x = prevX + tanRight.x;
	                    p1.y = prevY + tanRight.y;
	                    p2.x = pts[p * 2] + tanLeft.x;
	                    p2.y = pts[p * 2 + 1] + tanLeft.y;
	                    mp.x = (p1.x + p2.x) / 2;
	                    mp.y = (p1.y + p2.y) / 2;
	                    points.push("Q", p1.x, p1.y, mp.x, mp.y);
	                    points.push("Q", p2.x, p2.y, pts[p * 2], pts[p * 2 + 1]);
	                }
	                tanLenFactor = pts[(p + delta) * 2] - pts[p * 2];
	                tanRight.x = tan.x * tanLenFactor * tension;
	                tanRight.y = tan.y * tanLenFactor * tension;
	                prevX = pts[p * 2];
	                prevY = pts[p * 2 + 1];
	            }
	            points.push("Q", prevX + tanRight.x, prevY + tanRight.y, pts[p * 2], pts[p * 2 + 1]);
	            return points;
	        }
	        return null;
	    };
	    return SvgRenderer;
	}(Base_1.Base));
	exports.SvgRenderer = SvgRenderer;
	var SvgElement = /** @class */ (function (_super) {
	    __extends(SvgElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SvgElement(parent) {
	        var _this = _super.call(this) || this;
	        var elt = _this._element = document.createElementNS(SVGNS, "svg");
	        var css = elt.style;
	        var defs = _this._defs = document.createElementNS(SVGNS, "defs");
	        //elt.innerHTML = "Your browser does not support SVG";
	        elt.appendChild(defs);
	        css.background = "";
	        css.border = "none";
	        css.pointerEvents = "none";
	        parent.appendChild(elt);
	        _this._renderer = new SvgRenderer(_this._defs);
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    SvgElement.createSVG = function (parent) {
	        var elt = document.createElementNS(SVGNS, "svg");
	        var css = elt.style;
	        var defs = document.createElementNS(SVGNS, "defs");
	        //elt.innerHTML = "Your browser does not support SVG";
	        elt.appendChild(defs);
	        css.background = "";
	        css.border = "none";
	        css.pointerEvents = "none";
	        parent.appendChild(elt);
	        return elt;
	    };
	    SvgElement.renderSVG = function (svg, callback) {
	        if (svg.childElementCount > 1) {
	            svg.removeChild(svg.lastElementChild);
	        }
	        var g = document.createElementNS(SVGNS, "g");
	        var r = new SvgRenderer(svg.firstChild, g);
	        svg.appendChild(g);
	        callback.call(svg, r, svg.clientWidth, svg.clientHeight);
	        r.dispose();
	    };
	    SvgElement.renderSVG2 = function (svg, callback) {
	        if (svg.childElementCount > 1) {
	            svg.removeChild(svg.lastElementChild);
	        }
	        var g = document.createElementNS(SVGNS, "g");
	        var r = new SvgRenderer(svg.firstChild, g);
	        svg.appendChild(g);
	        callback.call(svg, r);
	        r.dispose();
	    };
	    SvgElement.prototype._doDispose = function () {
	        this._renderer = this._renderer.dispose();
	        this._element.parentElement.removeChild(this._element);
	        this._element = this._defs = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SvgElement.prototype, "element", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** element */
	        get: function () {
	            return this._element;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SvgElement.prototype.render = function (callback) {
	        this._clear();
	        if (callback) {
	            //callback.call(this, renderer, this._element.width.baseVal.value, this._height);
	            callback.call(this, this._renderer, this._element.clientWidth, this._element.clientHeight);
	        }
	        else {
	            this._doRender(this._renderer, this._element.clientWidth, this._element.clientHeight);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SvgElement.prototype._clear = function () {
	        if (this._element.childElementCount > 1) {
	            this._element.removeChild(this._element.lastElementChild);
	        }
	        var g = document.createElementNS(SVGNS, "g");
	        this._element.appendChild(g);
	        this._renderer["_element"] = g;
	    };
	    SvgElement.prototype._doRender = function (renderer, width, height) {
	    };
	    return SvgElement;
	}(Base_1.Base));
	exports.SvgElement = SvgElement;
	});

	unwrapExports(Svg);
	var Svg_1 = Svg.SvgRenderer;
	var Svg_2 = Svg.SvgElement;

	var Shapes = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Shapes.ts
	// 2019. 11. 06. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var ShapeDrawing = /** @class */ (function (_super) {
	    __extends(ShapeDrawing, _super);
	    function ShapeDrawing() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // Fill
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ShapeDrawing.prototype.draw = function (g, width, height) {
	        this._doDraw(g, width, height);
	    };
	    return ShapeDrawing;
	}(Base_1.Base));
	exports.ShapeDrawing = ShapeDrawing;
	var $$_polygonShapes = {
	    rectangle: [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0],
	    triangle: [0.5, 0.0, 0.0, 1.0, 1.0, 1.0],
	    itriangle: [0.0, 0.0, 0.5, 1.0, 1.0, 0.0],
	    diamond: [0.5, 0.0, 0.0, 0.5, 0.5, 1.0, 1.0, 0.5],
	    uparrow: [0.5, 0.0, 0.0, 0.5, 0.3, 0.5, 0.3, 1.0, 0.7, 1.0, 0.7, 0.5, 1.0, 0.5],
	    downarrow: [0.3, 0.0, 0.3, 0.5, 0.0, 0.5, 0.5, 1.0, 1.0, 0.5, 0.7, 0.5, 0.7, 0.0],
	    leftarrow: [0.0, 0.5, 0.5, 1.0, 0.5, 0.7, 1.0, 0.7, 1.0, 0.3, 0.5, 0.3, 0.5, 0.0],
	    rightarrow: [0.0, 0.3, 0.0, 0.7, 0.5, 0.7, 0.5, 1.0, 1.0, 0.5, 0.5, 0.0, 0.5, 0.3],
	    plus: [0.3, 0.0, 0.3, 0.3, 0.0, 0.3, 0.0, 0.7, 0.3, 0.7, 0.3, 1.0, 0.7, 1.0, 0.7, 0.7, 1.0, 0.7, 1.0, 0.3, 0.7, 0.3, 0.7, 0.0],
	    minus: [0.0, 0.3, 0.0, 0.7, 1.0, 0.7, 1.0, 0.3],
	    star: [0.5, 0, 0.6122, 0.3454, 0.9755, 0.3454, 0.6816, 0.5590, 0.7938, 0.9045, 0.5, 0.6910, 0.2061, 0.9045, 0.3183, 0.5590, 0.02447, 0.3454, 0.3877, 0.3454]
	};
	var $$_pairShapes = {
	    equal: [[0.0, 0.2, 0.0, 0.4, 1.0, 0.4, 1.0, 0.2], [0.0, 0.6, 0.0, 0.8, 1.0, 0.8, 1.0, 0.6]]
	};
	var PolygonShape = /** @class */ (function (_super) {
	    __extends(PolygonShape, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function PolygonShape(shape) {
	        var _this = _super.call(this) || this;
	        _this._shape = shape;
	        return _this;
	    }
	    Object.defineProperty(PolygonShape.prototype, "shape", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** shape */
	        get: function () {
	            return this._shape;
	        },
	        set: function (value) {
	            this._shape = value ? (value === "inverted_triangle" ? PolygonShape.INVERTED_TRIANLGE : value.toLowerCase()) : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    PolygonShape.prototype._doDraw = function (g, width, height) {
	        var shape = this._shape;
	        if ($$_polygonShapes.hasOwnProperty(shape)) {
	            var pts = $$_polygonShapes[shape];
	            if (pts) {
	                var x = 0;
	                var y = 0;
	                pts = pts.slice();
	                for (var i = 0, cnt = pts.length / 2; i < cnt; i++) {
	                    pts[i * 2] = x + pts[i * 2] * width;
	                    pts[i * 2 + 1] = y + pts[i * 2 + 1] * height;
	                }
	                pts.push(pts[0], pts[1]);
	                g.polygon(null, pts);
	            }
	        }
	        else if ($$_pairShapes.hasOwnProperty(shape)) {
	            var points = $$_pairShapes[shape];
	            if (points) {
	                var x = 0;
	                var y = 0;
	                var pts = points[0].slice();
	                for (var i = 0, cnt = pts.length / 2; i < cnt; i++) {
	                    pts[i * 2] = x + pts[i * 2] * width;
	                    pts[i * 2 + 1] = y + pts[i * 2 + 1] * height;
	                }
	                pts.push(pts[0], pts[1]);
	                g.polygon(null, pts);
	                pts = points[1];
	                pts = pts.slice();
	                for (var i = 0, cnt = pts.length / 2; i < cnt; i++) {
	                    pts[i * 2] = x + pts[i * 2] * width;
	                    pts[i * 2 + 1] = y + pts[i * 2 + 1] * height;
	                }
	                pts.push(pts[0], pts[1]);
	                g.polygon(null, pts);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    PolygonShape.RECTANGLE = "rectangle";
	    PolygonShape.TRIANLGE = "triangle";
	    PolygonShape.INVERTED_TRIANLGE = "itriangle";
	    PolygonShape.DIAMOND = "diamond";
	    PolygonShape.UP_ARROW = "uparrow";
	    PolygonShape.DOWN_ARROW = "downarrow";
	    PolygonShape.LEFT_ARROW = "leftarrow";
	    PolygonShape.RIGHT_ARROW = "rightarrow";
	    PolygonShape.PLUS = "plus";
	    PolygonShape.MINUS = "minus";
	    PolygonShape.EQUAL = "equal";
	    PolygonShape.STAR = "star";
	    return PolygonShape;
	}(ShapeDrawing));
	exports.PolygonShape = PolygonShape;
	var EllipseShape = /** @class */ (function (_super) {
	    __extends(EllipseShape, _super);
	    function EllipseShape() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    EllipseShape.prototype._doDraw = function (g, width, height) {
	        g.ellipse(null, 0, 0, width, height);
	    };
	    return EllipseShape;
	}(ShapeDrawing));
	exports.EllipseShape = EllipseShape;
	});

	unwrapExports(Shapes);
	var Shapes_1 = Shapes.ShapeDrawing;
	var Shapes_2 = Shapes.PolygonShape;
	var Shapes_3 = Shapes.EllipseShape;

	var CellRenderers = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CellRenderers.ts
	// 2019. 10. 28. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });







	var DataCellRenderer = /** @class */ (function (_super) {
	    __extends(DataCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._showTooltip = false;
	        _this._tooltipEllipseTextOnly = false;
	        _this._inited = false;
	        _this._dirty = false;
	        _this._className = '';
	        _this._height = -1;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DataCellRenderer.getRendererStyle = function (cell) {
	        var dom = cell.firstElementChild;
	        if (dom) {
	            // IE9는 classList가 없다.
	            if (dom.classList) {
	                if (dom.classList.length > 1) {
	                    return dom.classList[1];
	                }
	            }
	            else {
	                var classList = dom.className && dom.className.split(" ");
	                if (classList && classList.length > 1) {
	                    return classList[1];
	                }
	            }
	            return dom.className;
	        }
	        return undefined;
	    };
	    DataCellRenderer.prototype._doDispose = function () {
	        this._dom = null;
	        this._index = null;
	        _super.prototype._doDispose.call(this);
	    };
	    DataCellRenderer.prototype.clearAndDispose = function () {
	        this.clearContent();
	        return this.dispose();
	    };
	    DataCellRenderer.prototype.initContent = function (index, dom, styleName) {
	        if (!this._inited) {
	            this._dom = dom;
	            this._index = index.clone();
	            dom.className = this._className = styleName;
	            this._doInitContent(dom);
	            this._inited = true;
	        }
	        else {
	            this._index.assign(index);
	        }
	    };
	    DataCellRenderer.prototype.clearContent = function () {
	        if (this._inited) {
	            this._doClearContent(this._dom);
	            this._dom.className = this._className = '';
	            this._inited = false;
	        }
	    };
	    DataCellRenderer.prototype.click = function (event) {
	        return this._doClick(event);
	    };
	    DataCellRenderer.prototype.checkClassName = function (value) {
	        return value != this._className;
	    };
	    Object.defineProperty(DataCellRenderer.prototype, "grid", {
	        /** grid */
	        get: function () {
	            return this._index && this._index.grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellRenderer.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellRenderer.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            return "rg-renderer";
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellRenderer.prototype, "showTooltip", {
	        /** showTooltip */
	        get: function () {
	            return this._showTooltip;
	        },
	        set: function (value) {
	            this._showTooltip = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellRenderer.prototype, "tooltipEllipseTextOnly", {
	        /** tooltipEllipseTextOnly */
	        get: function () {
	            return this._tooltipEllipseTextOnly;
	        },
	        set: function (value) {
	            this._tooltipEllipseTextOnly = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellRenderer.prototype, "clickCallback", {
	        /** clickCallback */
	        get: function () {
	            return this._clickCallback;
	        },
	        set: function (value) {
	            this._clickCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataCellRenderer.prototype.renderCell = function (grid, model, cell) {
	        this._doRenderCell(grid, model, cell, cell.width - cell.buttonWidth - cell.editWidth - 1, cell.height - 1);
	    };
	    DataCellRenderer.prototype.getTooltip = function (cell, index) {
	        if (this.showTooltip) {
	            var s = cell.text;
	            return s ? s : undefined;
	        }
	        return undefined;
	    };
	    DataCellRenderer.prototype.canEditable = function () {
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataCellRenderer.prototype._doInitContent = function (dom) {
	    };
	    DataCellRenderer.prototype._doClearContent = function (dom) {
	        //Utils.clearChildren(dom);
	        dom.innerHTML = "";
	    };
	    DataCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	    };
	    // link인 경우를 생각해 보자.
	    // link를 클릭하면 일반적으로는 link관련 이벤트 또는 link자체가 실행되기를 원할 것이다.
	    // data영역외에 다른곳을 클릭했을때 click이 기본동작인 element라면 그것만 실행하고 
	    // 그렇지 않은 경우 (img 등) 해당 영역의 grid event가 있다면 실행한 결과값이 true이면 더이상 진행하지 않고 
	    // false이면 clickCallback -> grid event순으로 진행한다.
	    // 
	    DataCellRenderer.prototype._doClick = function (event) {
	        // true를 리턴하면 event 핸들링을 여기서 종료.
	        if (this._clickCallback) {
	            var grid = this.index.grid;
	            if (this._clickCallback.call(this, grid.getHandler(), this._index)) {
	                return true;
	            }
	        }
	        if (this._fireClickEvent(this.index)) ;
	        return false;
	    };
	    DataCellRenderer.prototype._fireClickEvent = function (index) {
	        index.grid._fireDataCellClicked(index);
	        return false; // 기본적으로는 false이다. 필요시 fireEvent => fireConfirmEvent로 변경해야 한다.
	    };
	    DataCellRenderer.prototype._changed = function () {
	        this._dirty = true;
	    };
	    DataCellRenderer.prototype._getValue = function (grid, model, fieldName) {
	        var r = model.item.dataRow;
	        if (r >= 0) {
	            var ds = grid.dataSource;
	            var f = ds.getFieldIndex(fieldName);
	            if (f >= 0) {
	                return grid.dataSource.getValue(r, f);
	            }
	        }
	        return undefined;
	    };
	    DataCellRenderer.prototype._makeText = function (grid, model, bcell) {
	        var s = model.getDisplayText(grid, bcell);
	        return s || "";
	    };
	    DataCellRenderer.prototype._clearHeight = function () {
	        this._setHeight(-1);
	    };
	    DataCellRenderer.prototype._setHeight = function (value) {
	        if (value != this._height) {
	            this._height = value;
	            this._dom.style.height = value >= 0 ? (value + "px") : "";
	            this._changed();
	        }
	    };
	    return DataCellRenderer;
	}(Base_1.Base));
	exports.DataCellRenderer = DataCellRenderer;
	// export class DataCellRendererCollection extends Base {
	//     //-------------------------------------------------------------------------
	//     // consts
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // static members
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // property fields
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // fields
	//     //-------------------------------------------------------------------------
	//     private _delegate: GridDelegate;
	//     private _renderers: {[key: string] : any | DataCellRenderer} = {};
	//     //-------------------------------------------------------------------------
	//     // constructor
	//     //-------------------------------------------------------------------------
	//     constructor(delegate: GridDelegate) {
	//         super();
	//         this._delegate = delegate;
	//     }
	//     protected _doDispose(): void {
	//         this._delegate = null;
	// 		super._doDispose();
	//     }
	//     //-------------------------------------------------------------------------
	//     // properties
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // methods
	//     //-------------------------------------------------------------------------
	//     addRenderers(renderers: any): void {
	//         if (!Utils.isArray(renderers)) {
	//             renderers = [renderers];
	//         }
	//         for (let r of renderers) {
	//             if (r.id) {
	//                 this._renderers[r.id] = r;
	//             }
	//         }
	//     }
	//     getRenderer(id: string): DataCellRenderer {
	//         let renderer = this._renderers[id];
	//         if (renderer instanceof DataCellRenderer) {
	//             return renderer;
	//         }
	//         if (renderer) {
	//             renderer = this._delegate.createRenderer(renderer);
	//             if (renderer) {
	//                 this._renderers[id] = renderer;
	//                 renderer["_init"](this._delegate.grid);
	//             } else {
	//                 delete this._renderers.id;
	//             }
	//         }
	//         return null;
	//     }
	//     //-------------------------------------------------------------------------
	//     // internal members
	//     //-------------------------------------------------------------------------
	// }
	var TextCellRenderer = /** @class */ (function (_super) {
	    __extends(TextCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TextCellRenderer() {
	        return _super.call(this) || this;
	    }
	    TextCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TextCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return TextCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TextCellRenderer.prototype.initContent = function (index, dom, styleName) {
	        _super.prototype.initContent.call(this, index, dom, styleName);
	        this._text = "";
	    };
	    TextCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        if (model instanceof GridCell_1.ValueCell) {
	            if (model.index.itemIndex !== grid.topIndex) {
	                switch (model.blankState) {
	                    case Types.BlankState.BODY:
	                    case Types.BlankState.TAIL:
	                        this.$_setText("");
	                        break;
	                    default:
	                        this.$_setText(this._makeText(grid, model, bcell));
	                        break;
	                }
	            }
	            else {
	                this.$_setText(this._makeText(grid, model, bcell));
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TextCellRenderer.prototype.$_setText = function (value) {
	        if (value != this._text) {
	            this._text = value;
	            this["_dom"].textContent = value || '';
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    TextCellRenderer.TYPE = "text";
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    TextCellRenderer.Default = new TextCellRenderer();
	    return TextCellRenderer;
	}(DataCellRenderer));
	exports.TextCellRenderer = TextCellRenderer;
	var BarOrigin;
	(function (BarOrigin) {
	    BarOrigin["DEFAULT"] = "default";
	    BarOrigin["LEFT"] = "left";
	    BarOrigin["RIGHT"] = "right";
	    BarOrigin["TOP"] = "top";
	    BarOrigin["BOTTOM"] = "bottom";
	})(BarOrigin = exports.BarOrigin || (exports.BarOrigin = {}));
	var BarCellRenderer = /** @class */ (function (_super) {
	    __extends(BarCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function BarCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._barStyle = BarCellRenderer.BAR_STYLE;
	        _this._rightBarStyle = BarCellRenderer.BAR_RIGHT_STYLE;
	        _this._topBarStyle = BarCellRenderer.BAR_TOP_STYLE;
	        _this._bottomBarStyle = BarCellRenderer.BAR_BOTTOM_STYLE;
	        _this._minimum = 0;
	        _this._maximum = 100;
	        _this._barWidth = "80%";
	        _this._showLabel = false;
	        _this._origin = BarOrigin.LEFT;
	        _this._absoluteValue = false;
	        _this._text = '';
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._percentShapeWidth = 80;
	        return _this;
	    }
	    BarCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(BarCellRenderer.prototype, "barStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        /** barStyle */
	        get: function () {
	            return this._barStyle;
	        },
	        set: function (value) {
	            if (value != this._barStyle) {
	                this._barStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "rightBarStyle", {
	        /** rightBarStyle */
	        get: function () {
	            return this._rightBarStyle;
	        },
	        set: function (value) {
	            if (value != this._rightBarStyle) {
	                this._rightBarStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "topBarStyle", {
	        /** topBarStyle */
	        get: function () {
	            return this._topBarStyle;
	        },
	        set: function (value) {
	            if (value != this._topBarStyle) {
	                this._topBarStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "bottomBarStyle", {
	        /** bottomBarStyle */
	        get: function () {
	            return this._bottomBarStyle;
	        },
	        set: function (value) {
	            if (value != this._bottomBarStyle) {
	                this._bottomBarStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "minimum", {
	        /** minimum */
	        get: function () {
	            return this._minimum;
	        },
	        set: function (value) {
	            if (value != this._minimum) {
	                this._minimum = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "maximum", {
	        /** maximum */
	        get: function () {
	            return this._maximum;
	        },
	        set: function (value) {
	            if (value != this._maximum) {
	                this._maximum = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "showLabel", {
	        /** showLabel */
	        get: function () {
	            return this._showLabel;
	        },
	        set: function (value) {
	            if (value != this._showLabel) {
	                this._showLabel = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "barWidth", {
	        /** barWidth */
	        get: function () {
	            return this._barWidth;
	        },
	        set: function (value) {
	            if (value != this._barWidth) {
	                this._barWidth = value;
	                if (typeof value == "string" && value.charAt(value.length - 1) == "%") {
	                    this._percentShapeWidth = parseFloat(value.substring(0, value.length - 1));
	                }
	                else {
	                    this._percentShapeWidth = NaN;
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "origin", {
	        /** origin */
	        get: function () {
	            return this._origin;
	        },
	        set: function (value) {
	            if (value != this._origin) {
	                this._origin = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "absoluteValue", {
	        /** absoluteValue */
	        get: function () {
	            return this._absoluteValue;
	        },
	        set: function (value) {
	            if (value != this._absoluteValue) {
	                this._absoluteValue = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return BarCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BarCellRenderer.prototype, "styleName", {
	        get: function () {
	            return BarCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    BarCellRenderer.prototype._doInitContent = function (dom) {
	        var div;
	        var span;
	        var cnt = dom.childElementCount;
	        // TODO td의 높이를 변경해야 한다.
	        // 지금은 style에 height: 0px로 되어있지만 border의 width를 참조하는 속성이 추가되면
	        // 해당 속성을 참조해서 고정된값으로 변경할수 있도록 해야 한다. (row별 높이가 달라지는 경우 감안해서 처리해야 함)
	        dom.textContent = "";
	        div = this._div = document.createElement("div");
	        div.style.position = "relative"; // "absolute";
	        dom.appendChild(div);
	        span = this._span = document.createElement("span");
	        var css = span.style;
	        css.display = "inline-block";
	        css.position = "absolute";
	        css.top = "50%";
	        css.right = "50%";
	        css["msTransform"] = span.style.transform = "translate(50%, -50%)";
	        dom.appendChild(span);
	    };
	    BarCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var div = this._div;
	        var css = div.style;
	        var v = this._absoluteValue ? Math.abs(model.value) : model.value;
	        var rate = Math.min(1, (v - this._minimum) / (this._maximum - this._minimum));
	        if (isNaN(rate)) {
	            rate = 0;
	        }
	        // bar
	        switch (this._origin) {
	            case BarOrigin.LEFT:
	                this.$_renderLeft(css, rate);
	                div.className = this.barStyle || BarCellRenderer.BAR_STYLE;
	                break;
	            case BarOrigin.RIGHT:
	                this.$_renderRight(css, rate);
	                div.className = this.rightBarStyle || BarCellRenderer.BAR_RIGHT_STYLE;
	                break;
	            case BarOrigin.TOP:
	                this.$_renderTop(css, rate);
	                div.className = this.topBarStyle || BarCellRenderer.BAR_TOP_STYLE;
	                break;
	            case BarOrigin.BOTTOM:
	                this.$_renderBottom(css, rate);
	                div.className = this.bottomBarStyle || BarCellRenderer.BAR_BOTTOM_STYLE;
	                break;
	            default:
	                this.$_renderLeft(css, rate);
	                div.className = this.barStyle || BarCellRenderer.BAR_STYLE;
	                break;
	        }
	        // text
	        this.$_setText(this._makeText(grid, model, bcell));
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    BarCellRenderer.prototype.$_renderLeft = function (css, rate) {
	        css.left = "0px";
	        css.width = (rate * 100) + "%";
	        if (!isNaN(this._percentShapeWidth)) {
	            css.top = ((100 - this._percentShapeWidth) / 2) + "%";
	            css.height = this._percentShapeWidth + "%";
	        }
	        else {
	            var h = this._barWidth;
	            css.top = "50%";
	            css['msTransform'] = css.transform = "translate(0%,-50%)";
	            css.height = h + "px";
	        }
	    };
	    BarCellRenderer.prototype.$_renderRight = function (css, rate) {
	        css.left = ((1 - rate) * 100) + "%";
	        css.width = (rate * 100) + "%";
	        if (!isNaN(this._percentShapeWidth)) {
	            css.top = ((100 - this._percentShapeWidth) / 2) + "%";
	            css.height = this._percentShapeWidth + "%";
	        }
	        else {
	            var h = this._barWidth;
	            css.top = "50%";
	            css['msTransform'] = css.transform = "translate(0%,-50%)";
	            css.height = h + "px";
	        }
	    };
	    BarCellRenderer.prototype.$_renderTop = function (css, rate) {
	        css.top = "0px";
	        css.height = (rate * 100) + "%";
	        if (!isNaN(this._percentShapeWidth)) {
	            css.left = ((100 - this._percentShapeWidth) / 2) + "%";
	            css.width = this._percentShapeWidth + "%";
	        }
	        else {
	            var w = this._barWidth;
	            css.left = "50%";
	            css["msTransform"] = css.transform = "translate(-50%,0%)";
	            css.width = w + "px";
	        }
	    };
	    BarCellRenderer.prototype.$_renderBottom = function (css, rate) {
	        css.top = ((1 - rate) * 100) + "%";
	        css.height = (rate * 100) + "%";
	        if (!isNaN(this._percentShapeWidth)) {
	            css.left = ((100 - this._percentShapeWidth) / 2) + "%";
	            css.width = this._percentShapeWidth + "%";
	        }
	        else {
	            var w = this._barWidth;
	            css.left = "50%";
	            css["msTransform"] = css.transform = "translate(-50%,0%)";
	            css.width = w + "px";
	        }
	    };
	    BarCellRenderer.prototype.$_setText = function (value) {
	        if (value != this._text) {
	            this._text = value;
	            this._span.textContent = value || '';
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    BarCellRenderer.TYPE = "bar";
	    BarCellRenderer.STYLE = "rg-bar-renderer";
	    BarCellRenderer.STYLE_NAME = "rg-renderer " + BarCellRenderer.STYLE;
	    BarCellRenderer.BAR_STYLE = "rg-bar-renderer-bar";
	    BarCellRenderer.BAR_RIGHT_STYLE = "rg-bar-renderer-bar-right";
	    BarCellRenderer.BAR_TOP_STYLE = "rg-bar-renderer-bar-top";
	    BarCellRenderer.BAR_BOTTOM_STYLE = "rg-bar-renderer-bar-bottom";
	    return BarCellRenderer;
	}(DataCellRenderer));
	exports.BarCellRenderer = BarCellRenderer;
	var ImageCellRenderer = /** @class */ (function (_super) {
	    __extends(ImageCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ImageCellRenderer() {
	        return _super.call(this) || this;
	    }
	    ImageCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ImageCellRenderer.prototype, "imageMap", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** imageMap */
	        get: function () {
	            return this._imageMap;
	        },
	        set: function (value) {
	            if (value !== this._imageMap) {
	                this._imageMap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "imageCallback", {
	        /** imageCallback */
	        get: function () {
	            return this._imageCallback;
	        },
	        set: function (value) {
	            if (value !== this._imageCallback) {
	                this._imageCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "imageField", {
	        /** imageField */
	        get: function () {
	            return this._imageField;
	        },
	        set: function (value) {
	            if (value != this._imageField) {
	                this._imageField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "titleField", {
	        /** titleField */
	        get: function () {
	            return this._titleField;
	        },
	        set: function (value) {
	            if (value != this._titleField) {
	                this._titleField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "titleCallback", {
	        /** titleCallback */
	        get: function () {
	            return this._titleCallback;
	        },
	        set: function (value) {
	            if (value !== this._titleCallback) {
	                this._titleCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "imageHeight", {
	        /** imageHeight */
	        get: function () {
	            return this._imageHeight;
	        },
	        set: function (value) {
	            if (value != this._imageHeight) {
	                this._imageHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return ImageCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageCellRenderer.prototype, "styleName", {
	        get: function () {
	            return ImageCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ImageCellRenderer.prototype._doInitContent = function (dom) {
	        var img = this._img = document.createElement("img");
	        img.style.verticalAlign = "middle";
	        dom.appendChild(img);
	    };
	    ImageCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var img = this._img;
	        // let width = dom.offsetWidth;
	        // let height = dom.offsetHeight;
	        var s = this.$_getImageUrl(grid, model);
	        if (s) {
	            img.src = s;
	            var alt = this.$_getTitle(grid, model);
	            if (alt) {
	                img.title = alt;
	            }
	            else {
	                delete img.title;
	            }
	            if (!isNaN(this._imageHeight)) {
	                img.style.height = this._imageHeight + "px";
	            }
	            else {
	                img.style.height = "";
	            }
	        }
	        else {
	            img.removeAttribute("src");
	            img.removeAttribute("title"); // title이있는 경우 이미지없음 표시 나타남.
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ImageCellRenderer.prototype.$_getImageUrl = function (grid, model) {
	        var s = "";
	        var cb = this._imageCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), model);
	        }
	        if (!s && this._imageMap) {
	            s = this._imageMap[model.value];
	        }
	        if (!s && this._imageField) {
	            s = this._getValue(grid, model, this._imageField);
	        }
	        return s || "";
	    };
	    ImageCellRenderer.prototype.$_getTitle = function (grid, model) {
	        var s = "";
	        var cb = this._titleCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), model);
	        }
	        if (!s && this._titleField) {
	            s = this._getValue(grid, model, this._titleField);
	        }
	        return s || "";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ImageCellRenderer.TYPE = "image";
	    ImageCellRenderer.STYLE = "rg-image-renderer";
	    ImageCellRenderer.STYLE_NAME = "rg-renderer " + ImageCellRenderer.STYLE;
	    return ImageCellRenderer;
	}(DataCellRenderer));
	exports.ImageCellRenderer = ImageCellRenderer;
	var IconCellRenderer = /** @class */ (function (_super) {
	    __extends(IconCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function IconCellRenderer() {
	        var _this = _super.call(this) || this;
	        _this._iconWidth = NaN;
	        _this._iconHeight = NaN;
	        _this._iconPosition = Types.IconPosition.LEFT;
	        _this._textVisible = true;
	        _this._splitted = false;
	        _this._reversed = false;
	        _this._imgFixed = false;
	        _this._imgMiddle = false;
	        _this._imgCenter = false;
	        _this._imgHeight = 0;
	        _this._imgWidth = 0;
	        _this._imgLeft = 0;
	        _this._imgRight = 0;
	        _this._imgTop = 0;
	        _this._imgBottom = 0;
	        _this._imgSrc = "";
	        _this._spanVis = true;
	        _this._spanPadRight = 0;
	        _this._spanPadLeft = 0;
	        _this._spanCenter = false;
	        _this._spanText = "";
	        return _this;
	    }
	    IconCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(IconCellRenderer.prototype, "iconMap", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** iconMap */
	        get: function () {
	            return this._iconMap;
	        },
	        set: function (value) {
	            if (value !== this._iconMap) {
	                this._iconMap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconCallback", {
	        /** iconCallback */
	        get: function () {
	            return this._iconCallback;
	        },
	        set: function (value) {
	            if (value !== this._iconCallback) {
	                this._iconCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconUrl", {
	        /** iconUrl */
	        get: function () {
	            return this._iconUrl;
	        },
	        set: function (value) {
	            this._iconUrl = value;
	            this._changed();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconField", {
	        /** iconField */
	        get: function () {
	            return this._iconField;
	        },
	        set: function (value) {
	            if (value != this._iconField) {
	                this._iconField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconPosition", {
	        /** iconPosition */
	        get: function () {
	            return this._iconPosition;
	        },
	        set: function (value) {
	            if (value != this._iconPosition) {
	                this._oldPosition = this._iconPosition;
	                this._iconPosition = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconWidth", {
	        /** iconWidth */
	        get: function () {
	            return this._iconWidth;
	        },
	        set: function (value) {
	            if (value != this._iconWidth) {
	                this._iconWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "iconHeight", {
	        /** iconHeight */
	        get: function () {
	            return this._iconHeight;
	        },
	        set: function (value) {
	            if (value != this._iconHeight) {
	                this._iconHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "textVisible", {
	        /** textVisible */
	        get: function () {
	            return this._textVisible;
	        },
	        set: function (value) {
	            if (value != this._textVisible) {
	                this._textVisible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return IconCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(IconCellRenderer.prototype, "styleName", {
	        get: function () {
	            return IconCellRenderer.STYLE_NAME + " rg-icon-" + this.$_getStyleName().toLowerCase();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    IconCellRenderer.prototype._doInitContent = function (dom) {
	        var img = this._img = document.createElement("img");
	        dom.appendChild(img);
	        var span = this._span = document.createElement("span");
	        dom.appendChild(span);
	        this._br = document.createElement("br");
	    };
	    IconCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var img = this._img;
	        var span = this._span;
	        // icon
	        this.$_setImgWidth(this._iconWidth);
	        this.$_setImgHeight(this._iconHeight);
	        this.$_setImgSrc(this.$_getIconUrl(grid, model));
	        // text
	        this.$_setSpanText(this._makeText(grid, model, bcell));
	        if (this._oldPosition != this._iconPosition) {
	            switch (this._iconPosition) {
	                case Types.IconPosition.LEFT:
	                    this._clearHeight();
	                    this.$_layoutLeft(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.RIGHT:
	                    this._clearHeight();
	                    this.$_layoutRight(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.TOP:
	                    this._clearHeight();
	                    this.$_layoutTop(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.BOTTOM:
	                    this._clearHeight();
	                    this.$_layoutBottom(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.LEFT_EDGE:
	                    this._clearHeight();
	                    this.$_layoutLeftEdge(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.RIGHT_EDGE:
	                    this._clearHeight();
	                    this.$_layoutRightEdge(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                case Types.IconPosition.TOP_EDGE:
	                    this._setHeight(h);
	                    this.$_layoutTopEdge(this["_dom"], img, span, this._oldPosition, this._iconPosition, w, h);
	                    break;
	                case Types.IconPosition.BOTTOM_EDGE:
	                    this._setHeight(h);
	                    this.$_layoutBottomEdge(this["_dom"], img, span, this._oldPosition, this._iconPosition, w, h);
	                    break;
	                case Types.IconPosition.CENTER:
	                    this._clearHeight();
	                    this.$_layoutCenter(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	                default:
	                    this._clearHeight();
	                    this.$_layoutLeft(this["_dom"], img, span, this._oldPosition, this._iconPosition);
	                    break;
	            }
	            this._oldPosition = this._iconPosition;
	        }
	        else if (this._oldPosition == Types.IconPosition.TOP_EDGE || this._oldPosition == Types.IconPosition.BOTTOM_EDGE) {
	            this._setHeight(h);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    IconCellRenderer.prototype.$_getIconUrl = function (grid, model) {
	        var s = undefined;
	        var cb = this._iconCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), model);
	        }
	        if (s === undefined && this._iconMap) {
	            s = this._iconMap[model.value];
	        }
	        if (s === undefined && this._iconField) {
	            s = this._getValue(grid, model, this._iconField);
	        }
	        if (s === undefined) {
	            s = this._iconUrl;
	        }
	        return s || "";
	    };
	    IconCellRenderer.prototype.$_layoutLeft = function (dom, img, span, oldPos, newPos) {
	        if (this._reversed) {
	            dom.insertBefore(img, span);
	            // dom.removeChild(span);
	            // dom.appendChild(span);
	            this._reversed = false;
	        }
	        if (this._splitted) {
	            dom.removeChild(this._br);
	            this._splitted = false;
	        }
	        this.$_setImgFixed(false);
	        this.$_setImgMiddle(true);
	        this.$_setImgCenter(false);
	        this.$_clearImgBounds();
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(4);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_layoutRight = function (dom, img, span, oldPos, newPos) {
	        if (!this._reversed) {
	            dom.insertBefore(span, img);
	            // dom.removeChild(img);
	            // dom.appendChild(img);
	            this._reversed = true;
	        }
	        if (this._splitted) {
	            dom.removeChild(this._br);
	            this._splitted = false;
	        }
	        this.$_setImgFixed(false);
	        this.$_setImgMiddle(true);
	        this.$_setImgCenter(false);
	        this.$_clearImgBounds();
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(4);
	    };
	    IconCellRenderer.prototype.$_layoutTop = function (dom, img, span, oldPos, newPos) {
	        if (this._reversed) {
	            dom.insertBefore(img, span);
	            // dom.removeChild(span);
	            // dom.appendChild(span);
	            this._reversed = false;
	        }
	        if (!this._splitted) {
	            dom.insertBefore(this._br, span);
	            this._splitted = true;
	        }
	        this.$_setImgFixed(false);
	        this.$_setImgMiddle(false);
	        this.$_setImgCenter(false);
	        this.$_clearImgBounds();
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_layoutBottom = function (dom, img, span, oldPos, newPos) {
	        if (!this._reversed) {
	            dom.insertBefore(span, img);
	            // dom.removeChild(img);
	            // dom.appendChild(img);
	            this._reversed = true;
	        }
	        if (!this._splitted) {
	            dom.insertBefore(this._br, img);
	            this._splitted = true;
	        }
	        this.$_setImgFixed(false);
	        this.$_setImgMiddle(false);
	        this.$_setImgCenter(false);
	        this.$_clearImgBounds();
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_layoutLeftEdge = function (dom, img, span, oldPos, newPos) {
	        if (this._reversed) {
	            dom.insertBefore(img, span);
	            // dom.removeChild(span);
	            // dom.appendChild(span);
	            this._reversed = false;
	        }
	        if (this._splitted) {
	            dom.removeChild(this._br);
	            this._splitted = false;
	        }
	        this.$_setImgFixed(true);
	        this.$_setImgMiddle(true);
	        this.$_setImgCenter(false);
	        this.$_setImgBounds(0, 2, 0, 0);
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	        span.style.marginLeft = isNaN(this._iconWidth) ? "" : (this._iconWidth + "px");
	    };
	    IconCellRenderer.prototype.$_layoutRightEdge = function (dom, img, span, oldPos, newPos) {
	        if (!this._reversed) {
	            dom.insertBefore(span, img);
	            // dom.removeChild(img);
	            // dom.appendChild(img);
	            this._reversed = true;
	        }
	        if (this._splitted) {
	            dom.removeChild(this._br);
	            this._splitted = false;
	        }
	        this.$_setImgFixed(true);
	        this.$_setImgMiddle(true);
	        this.$_setImgCenter(false);
	        this.$_setImgBounds(0, 0, 0, 2);
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(false);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(this._iconWidth);
	    };
	    IconCellRenderer.prototype.$_layoutTopEdge = function (dom, img, span, oldPos, newPos, w, h) {
	        if (this._reversed) {
	            dom.insertBefore(img, span);
	            // dom.removeChild(span);
	            // dom.appendChild(span);
	            this._reversed = false;
	        }
	        if (!this._splitted) {
	            dom.insertBefore(this._br, span);
	            this._splitted = true;
	        }
	        this.$_setImgFixed(true);
	        this.$_setImgMiddle(false);
	        this.$_setImgCenter(false);
	        this.$_setImgBounds(2, (w - this._iconWidth) / 2, 0, 0);
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(true, this._iconHeight * ((h - this._iconHeight) / h));
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_layoutBottomEdge = function (dom, img, span, oldPos, newPos, w, h) {
	        if (!this._reversed) {
	            dom.insertBefore(span, img);
	            // dom.removeChild(img);
	            // dom.appendChild(img);
	            this._reversed = true;
	        }
	        if (!this._splitted) {
	            dom.insertBefore(this._br, img);
	            this._splitted = true;
	        }
	        this.$_setImgFixed(true);
	        this.$_setImgMiddle(false);
	        this.$_setImgCenter(true);
	        this.$_setImgBounds(0, (w - this._iconWidth) / 2, 2, 0);
	        this.$_setSpanVis(true);
	        this.$_setSpanCenter(true, -this._iconHeight * ((h - this._iconHeight) / h));
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_layoutCenter = function (dom, img, span, oldPos, newPos) {
	        if (this._reversed) {
	            dom.insertBefore(img, span);
	            // dom.removeChild(span);
	            // dom.appendChild(span);
	            this._reversed = false;
	        }
	        if (this._splitted) {
	            dom.removeChild(this._br);
	            this._splitted = false;
	        }
	        this.$_setImgFixed(false);
	        this.$_setImgMiddle(true);
	        this.$_setImgCenter(true);
	        this.$_clearImgBounds();
	        this.$_setSpanVis(false);
	        this.$_setSpanCenter(true);
	        this.$_setSpanPadLeft(0);
	        this.$_setSpanPadRight(0);
	    };
	    IconCellRenderer.prototype.$_setImgFixed = function (fixed) {
	        if (fixed != this._imgFixed) {
	            this._imgFixed = fixed;
	            this._img.style.position = fixed ? "absolute" : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgMiddle = function (middle) {
	        if (middle != this._imgMiddle) {
	            this._imgMiddle = middle;
	            this._img.style.verticalAlign = middle ? "middle" : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgCenter = function (center) {
	        if (center != this._imgCenter) {
	            this._imgCenter = center;
	            this._img.style.textAlign = center ? "center" : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgWidth = function (value) {
	        value = isNaN(value) ? 0 : value;
	        if (value != this._imgWidth) {
	            this._imgWidth = value;
	            this._img.style.width = value > 0 ? (value + "px") : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgHeight = function (value) {
	        value = isNaN(value) ? 0 : value;
	        if (value != this._imgHeight) {
	            this._imgHeight = value;
	            this._img.style.height = value > 0 ? (value + "px") : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgBounds = function (top, left, bottom, right) {
	        if (top != this._imgTop) {
	            this._imgTop = top;
	            this._img.style.top = top > 0 ? (top + "px") : "";
	        }
	        if (left != this._imgLeft) {
	            this._imgLeft = left;
	            this._img.style.left = left > 0 ? (left + "px") : "";
	        }
	        if (bottom != this._imgBottom) {
	            this._imgBottom = bottom;
	            this._img.style.bottom = bottom > 0 ? (bottom + "px") : "";
	        }
	        if (right != this._imgRight) {
	            this._imgRight = right;
	            this._img.style.right = right > 0 ? (right + "px") : "";
	        }
	    };
	    IconCellRenderer.prototype.$_clearImgBounds = function () {
	        if (this._imgTop > 0) {
	            this._imgTop = 0;
	            this._img.style.top = "";
	        }
	        if (this._imgLeft > 0) {
	            this._imgLeft = 0;
	            this._img.style.left = "";
	        }
	        if (this._imgBottom > 0) {
	            this._imgBottom = 0;
	            this._img.style.bottom = "";
	        }
	        if (this._imgRight > 0) {
	            this._imgRight = 0;
	            this._img.style.right = "";
	        }
	    };
	    IconCellRenderer.prototype.$_setImgSrc = function (value) {
	        if (value != this._imgSrc) {
	            this._imgSrc = value;
	            if (value) {
	                this._img.src = value;
	            }
	            else {
	                this._img.removeAttribute("src");
	            }
	        }
	    };
	    IconCellRenderer.prototype.$_setSpanVis = function (visible) {
	        if (visible != this._spanVis) {
	            this._spanVis = visible;
	            this._span.style.display = visible ? "" : "none";
	        }
	    };
	    IconCellRenderer.prototype.$_setSpanPadLeft = function (pad) {
	        if (pad != this._spanPadLeft) {
	            this._spanPadLeft = pad;
	            this._span.style.paddingLeft = pad > 0 ? (pad + "px") : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setSpanPadRight = function (pad) {
	        if (pad != this._spanPadRight) {
	            this._spanPadRight = pad;
	            this._span.style.paddingRight = pad > 0 ? (pad + "px") : "";
	        }
	    };
	    IconCellRenderer.prototype.$_setSpanCenter = function (center, hImg) {
	        if (hImg === void 0) { hImg = 0; }
	        if (center != this._spanCenter) {
	            var css = this._span.style;
	            this._spanCenter = center;
	            if (center) {
	                css.left = "50%";
	                css.top = (50 + hImg) + "%";
	                css.transform = "translate(-50%, -50%)";
	                css.position = "absolute";
	            }
	            else {
	                css.left = "";
	                css.top = "";
	                css.transform = "";
	                css.position = "";
	            }
	        }
	    };
	    IconCellRenderer.prototype.$_setSpanText = function (value) {
	        if (value != this._spanText) {
	            this._spanText = value;
	            this._span.textContent = this._textVisible ? this._spanText : undefined;
	        }
	    };
	    IconCellRenderer.prototype.$_getStyleName = function () {
	        return String(this._iconPosition) || String(Types.IconPosition.LEFT);
	    };
	    IconCellRenderer.prototype._doClick = function (event) {
	        if (event.target === this._img) {
	            // const cb = this.index.grid.linkCellClickedCallback;  필요시 각 renderer마다 처리하는 경우.
	            if (!this.$_fireButtonEvent(this.index)) {
	                event.preventDefault();
	                event.stopImmediatePropagation();
	                return true;
	            }
	        }
	        else {
	            _super.prototype._doClick.call(this, event);
	        }
	        return false;
	    };
	    IconCellRenderer.prototype.$_fireButtonEvent = function (index) {
	        index.grid._fireButtonClicked(index, 0, undefined);
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    IconCellRenderer.TYPE = "icon";
	    IconCellRenderer.STYLE = "rg-icon-renderer";
	    IconCellRenderer.STYLE_NAME = "rg-renderer " + IconCellRenderer.STYLE;
	    return IconCellRenderer;
	}(DataCellRenderer));
	exports.IconCellRenderer = IconCellRenderer;
	var CheckCellRenderer = /** @class */ (function (_super) {
	    __extends(CheckCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._checkStyle = CheckCellRenderer.CHECK_STYLE;
	        _this._threeState = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._values = {};
	        return _this;
	    }
	    CheckCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CheckCellRenderer.prototype, "checkCallback", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** checkCallback */
	        get: function () {
	            return this._checkCallback;
	        },
	        set: function (value) {
	            if (value !== this._checkCallback) {
	                this._checkCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckCellRenderer.prototype, "trueValues", {
	        /** trueValues */
	        get: function () {
	            return this._trueValues;
	        },
	        set: function (value) {
	            if (value !== this._trueValues) {
	                this._trueValues = value;
	                this.$_resetValues();
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckCellRenderer.prototype, "falseValues", {
	        /** falseValues */
	        get: function () {
	            return this._falseValues;
	        },
	        set: function (value) {
	            if (value !== this._falseValues) {
	                this._falseValues = value;
	                this.$_resetValues();
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckCellRenderer.prototype, "threeState", {
	        /** threeState */
	        get: function () {
	            return this._threeState;
	        },
	        set: function (value) {
	            if (value != this._threeState) {
	                this._threeState = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return CheckCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckCellRenderer.prototype, "styleName", {
	        get: function () {
	            return CheckCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CheckCellRenderer.prototype._doInitContent = function (dom) {
	        var check = this._check = document.createElement("input");
	        var span = this._span = document.createElement("span");
	        // align
	        check.type = "checkbox";
	        check.style.display = "inline-block";
	        //img.style.position = "absolute";
	        check.style.marginRight = "4px";
	        span.style.display = "inline-block";
	        dom.appendChild(check);
	        dom.appendChild(span);
	    };
	    CheckCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var check = this._check;
	        var span = this._span;
	        // let width = dom.clientWidth;
	        // let height = dom.clientHeight;
	        // check
	        check.checked = this.$_getValue(grid, model);
	        // text
	        // TODO showLable|labelPosition을 정해야함. 
	        // 기존은 Hidden, top, left, right, bottom이 있었음.
	        // hidden의 경우 span없이 check가 가운데.
	        // span.textContent = this.getText(grid, model);
	        // check.style.display = "inline-block";
	        // //img.style.position = "absolute";
	        // check.style.marginRight = "4px";
	        // span.style.display = "inline-block";
	    };
	    CheckCellRenderer.prototype._doClick = function (event) {
	        if (event.target === this._check) {
	            var index = this.index;
	            var grid = index.grid;
	            if (!grid || !grid.edit(this.index)) {
	                return false;
	            }
	            var model = grid.body.getCell(index, false);
	            var v = this.$_getValue(grid, model);
	            var oldValue = v;
	            var fld = model.dataColumn.dataIndex;
	            var ds = grid.dataSource;
	            var item = model.item;
	            if (fld >= 0 && ds.getValueType(fld) == Types.ValueType.BOOLEAN) {
	                if (this._threeState && v !== undefined && !v) {
	                    v = undefined;
	                }
	                else {
	                    v = !v;
	                }
	            }
	            else {
	                if (v) {
	                    v = this._falseValue ? this._falseValue : false;
	                }
	                else if (v !== undefined && this._threeState) {
	                    v = undefined;
	                }
	                else {
	                    v = this._trueValue ? this._trueValue : true;
	                }
	            }
	            var commit = grid.editorCommit(null, model.index, oldValue, v);
	            if (commit) {
	                item.setData(fld, v);
	                // if (index.grid()) {
	                // 	index.grid().validateCellCommit(index, v);
	                // }
	            }
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CheckCellRenderer.prototype.$_resetValues = function () {
	        this._values = {};
	        if (this._falseValues) {
	            var vals = this._falseValues.split(",");
	            if (vals) {
	                var len = void 0;
	                this._falseValue = (len = vals.length) > 0 ? vals[0] : undefined;
	                for (var i = 0; i < len; i++) {
	                    this._values[vals[i]] = false;
	                }
	            }
	            else {
	                this._falseValue = undefined;
	            }
	        }
	        if (this._trueValues) {
	            var vals = this._trueValues.split(",");
	            if (vals) {
	                var len = void 0;
	                this._trueValue = (len = vals.length) > 0 ? vals[0] : undefined;
	                for (var i = 0; i < len; i++) {
	                    this._values[vals[i]] = true;
	                }
	            }
	            else {
	                this._trueValue = undefined;
	            }
	        }
	    };
	    CheckCellRenderer.prototype.$_getValue = function (grid, cell) {
	        var cb = this._checkCallback;
	        if (cb) {
	            return this._checkCallback(grid, cell);
	        }
	        var v = cell.value;
	        if (typeof v === "boolean") {
	            return v;
	        }
	        else {
	            var val = String(v);
	            if (this._values.hasOwnProperty(val)) {
	                return this._values[val];
	            }
	            else if (this._threeState && (v == "" || v === undefined || v === null)) {
	                return undefined;
	            }
	            else {
	                return Boolean(v);
	            }
	            return Boolean(v);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    CheckCellRenderer.TYPE = "check";
	    CheckCellRenderer.STYLE = "rg-check-renderer";
	    CheckCellRenderer.STYLE_NAME = "rg-renderer " + CheckCellRenderer.STYLE;
	    CheckCellRenderer.CHECK_STYLE = "rg-check-renderer-check";
	    return CheckCellRenderer;
	}(DataCellRenderer));
	exports.CheckCellRenderer = CheckCellRenderer;
	var ButtonCellRenderer = /** @class */ (function (_super) {
	    __extends(ButtonCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ButtonCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._buttonStyle = ButtonCellRenderer.BUTTON_STYLE;
	        return _this;
	    }
	    ButtonCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ButtonCellRenderer.prototype, "buttonStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** buttonStyle */
	        get: function () {
	            return this._buttonStyle;
	        },
	        set: function (value) {
	            if (value != this._buttonStyle) {
	                this._buttonStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ButtonCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return ButtonCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ButtonCellRenderer.prototype, "styleName", {
	        get: function () {
	            return ButtonCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ButtonCellRenderer.prototype._doInitContent = function (dom) {
	        var button = this._button = document.createElement("button");
	        button.type = "button";
	        button.style.display = "inline-block";
	        dom.appendChild(button);
	    };
	    ButtonCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var button = this._button;
	        // let width = dom.clientWidth;
	        // let height = dom.clientHeight;
	        // button
	        //button.value = this.getText(grid, model);
	        //button.setAttribute("value", this.getText(grid, model));
	        button.textContent = this._makeText(grid, model, bcell);
	        button.setAttribute("class", this._buttonStyle);
	    };
	    ButtonCellRenderer.prototype._doClick = function (event) {
	        if (event.target === this._button) {
	            // const cb = this.index.grid.linkCellClickedCallback;  필요시 각 renderer마다 처리하는 경우.
	            if (!this.$_fireButtonEvent(this.index)) {
	                event.preventDefault();
	                event.stopImmediatePropagation();
	                return true;
	            }
	        }
	        else {
	            _super.prototype._doClick.call(this, event);
	        }
	        return false;
	    };
	    ButtonCellRenderer.prototype.$_fireButtonEvent = function (index) {
	        index.grid._fireButtonClicked(index, 0, undefined);
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ButtonCellRenderer.TYPE = "button";
	    ButtonCellRenderer.STYLE = "rg-button-renderer";
	    ButtonCellRenderer.STYLE_NAME = "rg-renderer " + ButtonCellRenderer.STYLE;
	    ButtonCellRenderer.BUTTON_STYLE = "rg-button-renderer-button";
	    return ButtonCellRenderer;
	}(DataCellRenderer));
	exports.ButtonCellRenderer = ButtonCellRenderer;
	var LinkCellRenderer = /** @class */ (function (_super) {
	    __extends(LinkCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LinkCellRenderer() {
	        return _super.call(this) || this;
	    }
	    LinkCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(LinkCellRenderer.prototype, "baseUrl", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * baseUrl property.
	         * "#"이면 클릭 시 grid.linkCellClickedCallback이 호출된다.
	         */
	        get: function () {
	            return this._baseUrl;
	        },
	        set: function (value) {
	            if (value != this._baseUrl) {
	                this._baseUrl = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "linkField", {
	        /** linkField */
	        get: function () {
	            return this._linkField;
	        },
	        set: function (value) {
	            if (value != this._linkField) {
	                this._linkField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "urlCallback", {
	        /** urlCallback */
	        get: function () {
	            return this._urlCallback;
	        },
	        set: function (value) {
	            if (value !== this._urlCallback) {
	                this._urlCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "titleField", {
	        /** titleField */
	        get: function () {
	            return this._titleField;
	        },
	        set: function (value) {
	            if (value != this._titleField) {
	                this._titleField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "titleCallback", {
	        /** titleCallback */
	        get: function () {
	            return this._titleCallback;
	        },
	        set: function (value) {
	            if (value !== this._titleCallback) {
	                this._titleCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return LinkCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LinkCellRenderer.prototype, "styleName", {
	        get: function () {
	            return LinkCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LinkCellRenderer.prototype._doInitContent = function (dom) {
	        var anchor = this._anchor = document.createElement("a");
	        dom.appendChild(anchor);
	    };
	    LinkCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var anchor = this._anchor;
	        anchor.textContent = this._makeText(grid, model, bcell);
	        this._url = "";
	        if (this._baseUrl === "#") {
	            anchor.removeAttribute("target");
	            anchor.href = "#";
	        }
	        else {
	            this._url = this.$_getUrl(grid, model);
	            if (this._url) {
	                anchor.target = "_blank";
	                anchor.href = this._url;
	            }
	        }
	        var title = this.$_getTitle(grid, model);
	        if (title) {
	            anchor.title = title;
	        }
	        else {
	            delete anchor.title;
	        }
	    };
	    LinkCellRenderer.prototype._doClick = function (event) {
	        if (event.target === this._anchor) {
	            // const cb = this.index.grid.linkCellClickedCallback;  필요시 각 renderer마다 처리하는 경우.
	            if (!this.$_fireLinkEvent(this.index, this._url)) {
	                event.preventDefault();
	                event.stopImmediatePropagation();
	                return true;
	            }
	        }
	        else {
	            _super.prototype._doClick.call(this, event);
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    LinkCellRenderer.prototype.$_getUrl = function (grid, cell) {
	        var s = "";
	        var cb = this._urlCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), cell);
	        }
	        if (!s) {
	            if (this._linkField) {
	                s = this._getValue(grid, cell, this._linkField);
	            }
	            else {
	                s = cell.value;
	            }
	            if (this._baseUrl) {
	                s = this._baseUrl + s;
	            }
	        }
	        return s || "";
	    };
	    LinkCellRenderer.prototype.$_getTitle = function (grid, model) {
	        var s = "";
	        var cb = this._titleCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), model);
	        }
	        if (!s && this._titleField) {
	            s = this._getValue(grid, model, this._titleField);
	        }
	        return s || "";
	    };
	    LinkCellRenderer.prototype.$_fireLinkEvent = function (index, url) {
	        return index.grid._fireLinkableCellClicked(index, url);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    LinkCellRenderer.TYPE = "link";
	    LinkCellRenderer.STYLE = "rg-link-renderer";
	    LinkCellRenderer.STYLE_NAME = "rg-renderer " + LinkCellRenderer.STYLE;
	    return LinkCellRenderer;
	}(DataCellRenderer));
	exports.LinkCellRenderer = LinkCellRenderer;
	var ShapeCellRenderer = /** @class */ (function (_super) {
	    __extends(ShapeCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ShapeCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._shapeStyle = ShapeCellRenderer.SHAPE_STYLE;
	        _this._shape = Shapes.PolygonShape.STAR;
	        _this._shapeWidth = 16;
	        _this._shapeHeight = 16;
	        return _this;
	    }
	    ShapeCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ShapeCellRenderer.prototype, "shapeStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        /** shapeStyle */
	        get: function () {
	            return this._shapeStyle;
	        },
	        set: function (value) {
	            if (value != this._shapeStyle) {
	                this._shapeStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "shape", {
	        /** shape */
	        get: function () {
	            return this._shape;
	        },
	        set: function (value) {
	            if (value != this._shape) {
	                this._shape = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "shapeMap", {
	        /** shapeMap */
	        get: function () {
	            return this._shapeMap;
	        },
	        set: function (value) {
	            if (value !== this._shapeMap) {
	                this._shapeMap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "shapeCallback", {
	        /** shapeCallback */
	        get: function () {
	            return this._shapeCallback;
	        },
	        set: function (value) {
	            if (value != this._shapeCallback) {
	                this._shapeCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "shapeWidth", {
	        /** width */
	        get: function () {
	            return this._shapeWidth;
	        },
	        set: function (value) {
	            if (this._shapeWidth !== value) {
	                this._shapeWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "shapeHeight", {
	        /** shapeHeight */
	        get: function () {
	            return this._shapeHeight;
	        },
	        set: function (value) {
	            if (this._shapeHeight !== value) {
	                this._shapeHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return ShapeCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ShapeCellRenderer.prototype, "styleName", {
	        get: function () {
	            return ShapeCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ShapeCellRenderer.prototype._doInitContent = function (dom) {
	        var svg = this._svg = Svg.SvgElement.createSVG(dom);
	        var css = svg.style;
	        var width = isNaN(this._shapeWidth) || this._shapeWidth <= 0 ? 16 : this._shapeWidth;
	        var height = isNaN(this._shapeHeight) || this._shapeHeight <= 0 ? 16 : this._shapeHeight;
	        css.display = "inline-block";
	        //css.position = "absolute";
	        //css.left = "0px";
	        //css.top = "0px";
	        css.width = width + "px";
	        css.height = height + "px";
	        var span = this._span = document.createElement("span");
	        span.style.display = "inline-block";
	        dom.appendChild(span);
	    };
	    ShapeCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var svg = this._svg;
	        var span = this._span;
	        // shape
	        this._runShape = this.$_getShape(grid, model);
	        svg.setAttribute("class", this._shapeStyle);
	        Svg.SvgElement.renderSVG(svg, this.$_render.bind(this));
	        // text
	        if (!span)
	            debugger;
	        span.textContent = this._makeText(grid, model, bcell);
	        // align
	        svg.style.verticalAlign = "middle";
	        svg.style.marginRight = "4px";
	    };
	    // renderCell_div(grid: GridBase, model: GridCell, dom: HTMLElement, needClear: boolean): void {
	    //     let div: HTMLDivElement;
	    //     let cnt = dom.childElementCount;
	    //     if (cnt == 0 || needClear) {
	    //         if (cnt > 0) {
	    //             Utils.clearChildren(dom);
	    //         }
	    //         div = document.createElement("div");
	    //         div.style.position = "relative";;
	    //         div.style.height = "100%";
	    //         dom.appendChild(div);
	    //         const svg = SvgElement.createSVG(div);
	    //         const css = svg.style;
	    //         // css.position = "absolute";
	    //         // css.left = "0px";
	    //         // css.top = "0px";
	    //         // css.width = "100%";
	    //         // css.height = "100%";
	    //         css.width = "16px";
	    //         css.height = "16px";
	    //     }
	    //     this._runShape = this.$_getShape(grid, model);
	    //     const svg = dom.firstElementChild.firstElementChild as SVGSVGElement;
	    //     svg.setAttribute("class", this._shapeStyle);
	    //     SvgElement.renderSVG(svg, this.$_render);
	    // }
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ShapeCellRenderer.prototype.$_getShape = function (grid, cell) {
	        var s = undefined;
	        var cb = this._shapeCallback;
	        if (cb) {
	            s = cb.call(this, grid.getHandler(), cell);
	        }
	        if (s == undefined && this._shapeMap) {
	            s = this._shapeMap[cell.value];
	        }
	        if (s == undefined) {
	            s = this._shape;
	        }
	        return s;
	    };
	    ShapeCellRenderer.prototype.$_getDrawing = function (shape) {
	        var drawing;
	        if (shape) {
	            shape = shape.toLowerCase();
	            if (shape == "ellipse") {
	                drawing = this._ellipse ? this._ellipse : (this._ellipse = new Shapes.EllipseShape());
	            }
	            else {
	                drawing = this._polygon ? this._polygon : (this._polygon = new Shapes.PolygonShape(shape));
	                this._polygon.shape = shape;
	            }
	        }
	        return drawing;
	    };
	    ShapeCellRenderer.prototype.$_render = function (renderer, width, height) {
	        if (!this._runShape)
	            return;
	        var drawing = this.$_getDrawing(this._runShape);
	        if (drawing) {
	            drawing.draw(renderer, width, height);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    ShapeCellRenderer.TYPE = "shape";
	    ShapeCellRenderer.STYLE = "rg-shape-renderer";
	    ShapeCellRenderer.STYLE_NAME = "rg-renderer " + ShapeCellRenderer.STYLE;
	    ShapeCellRenderer.SHAPE_STYLE = "rg-shape-renderer-shape";
	    return ShapeCellRenderer;
	}(DataCellRenderer));
	exports.ShapeCellRenderer = ShapeCellRenderer;
	var SignalBarCellRenderer = /** @class */ (function (_super) {
	    __extends(SignalBarCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SignalBarCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._barStyle = SignalBarCellRenderer.BAR_STYLE;
	        _this._inactiveStyle = SignalBarCellRenderer.INACTIVE_STYLE;
	        _this._barCount = 10;
	        _this._minimum = NaN;
	        _this._maximum = NaN;
	        _this._startRate = 50;
	        _this._endRate = 100;
	        _this._absoluteValue = false;
	        return _this;
	    }
	    SignalBarCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SignalBarCellRenderer.prototype, "barStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** barStyle */
	        get: function () {
	            return this._barStyle;
	        },
	        set: function (value) {
	            if (value != this._barStyle) {
	                this._barStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "inactiveStyle", {
	        /** inactiveStyle */
	        get: function () {
	            return this._inactiveStyle;
	        },
	        set: function (value) {
	            if (value != this._inactiveStyle) {
	                this._inactiveStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "barCount", {
	        /** barCount */
	        get: function () {
	            return this._barCount;
	        },
	        set: function (value) {
	            value = Math.max(2, value);
	            if (value != this._barCount) {
	                this._barCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "minimum", {
	        /** minimum */
	        get: function () {
	            return this._minimum;
	        },
	        set: function (value) {
	            if (value != this._minimum) {
	                this._minimum = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "maximum", {
	        /** maximum */
	        get: function () {
	            return this._maximum;
	        },
	        set: function (value) {
	            if (value != this._maximum) {
	                this._maximum = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "startRate", {
	        /** startRate */
	        get: function () {
	            return this._startRate;
	        },
	        set: function (value) {
	            if (!isNaN(value) && value >= 0 && value <= 100 && value !== this._startRate) {
	                this._startRate = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "endRate", {
	        /** endRate */
	        get: function () {
	            return this._endRate;
	        },
	        set: function (value) {
	            if (!isNaN(value) && value >= 0 && value <= 100 && value !== this._endRate) {
	                this._endRate = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "absoluteValue", {
	        /** absoluteValue */
	        get: function () {
	            return this._absoluteValue;
	        },
	        set: function (value) {
	            if (value != this._absoluteValue) {
	                this._absoluteValue = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SignalBarCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SignalBarCellRenderer.prototype, "styleName", {
	        get: function () {
	            return SignalBarCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SignalBarCellRenderer.prototype._doInitContent = function (dom) {
	        var div = this._div = document.createElement("div");
	        div.style.position = "relative";
	        div.style.height = "100%";
	        dom.appendChild(div);
	        var svg = this._svg = Svg.SvgElement.createSVG(div);
	        var css = svg.style;
	        css.position = "absolute";
	        css.left = "0px";
	        // css.top = "0px";
	        css.width = "100%";
	        // css.height = "100%";
	        css.top = ((100 - Math.max(this._startRate, this._endRate)) / 2) + "%";
	        css.height = Math.max(this._startRate, this._endRate) + "%";
	    };
	    SignalBarCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        // const div = this._div;
	        var svg = this._svg;
	        this._value = parseFloat(model.value);
	        svg.setAttribute("class", this._barStyle);
	        Svg.SvgElement.renderSVG2(svg, this.$_render.bind(this));
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SignalBarCellRenderer.prototype.$_render = function (g) {
	        var v = this.absoluteValue ? Math.abs(this._value) : this._value;
	        if (!isNaN(this._minimum) && !isNaN(this._maximum)) {
	            v = this._barCount * (v - this._minimum) / (this._maximum - this._minimum);
	        }
	        var w = 100;
	        var rate = 100 / Math.max(this._startRate, this._endRate);
	        var bg = 2; // bar gap
	        var bw = (w - (this._barCount + 1) * bg) / this._barCount;
	        var bx = 0;
	        var by = this._startRate * rate;
	        var dy = (this._endRate - this._startRate) / (this._barCount - 1);
	        for (var i = 0; i < this._barCount; i++) {
	            var style = i < v ? null : this._inactiveStyle;
	            g.sbounds(style, bx + "%", (100 - by) + "%", bw + "%", (by) + "%");
	            bx += bw + bg;
	            by += dy;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SignalBarCellRenderer.TYPE = "signalbar";
	    SignalBarCellRenderer.STYLE = "rg-signalbar-renderer";
	    SignalBarCellRenderer.STYLE_NAME = "rg-renderer " + SignalBarCellRenderer.STYLE;
	    SignalBarCellRenderer.BAR_STYLE = "rg-signalbar-renderer-bar";
	    SignalBarCellRenderer.INACTIVE_STYLE = "rg-signalbar-renderer-inactive";
	    return SignalBarCellRenderer;
	}(DataCellRenderer));
	exports.SignalBarCellRenderer = SignalBarCellRenderer;
	var Code39CellRenderer = /** @class */ (function (_super) {
	    __extends(Code39CellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Code39CellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._barStyle = Code39CellRenderer.BAR_STYLE;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._barcode = new Barcode_1.Code39();
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        _this.$_render = function (renderer, width, height) {
	            if (!this._value)
	                return;
	            this._barcode.value = this._value;
	            //this._barcode.barStyle = this._barStyle; 개별바에 지정하지 않고 svg에 지정한다.
	            this._barcode.renders(renderer, new Rectangle_1.Rectangle(0, 0, width, 100));
	        }.bind(_this);
	        return _this;
	    }
	    Code39CellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(Code39CellRenderer.prototype, "barStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        /** barStyle */
	        get: function () {
	            return this._barStyle;
	        },
	        set: function (value) {
	            if (value != this._barStyle) {
	                this._barStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Code39CellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Code39CellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Code39CellRenderer.prototype, "styleName", {
	        get: function () {
	            return Code39CellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Code39CellRenderer.prototype._doInitContent = function (dom) {
	        var div = this._div = document.createElement("div");
	        div.style.position = "relative";
	        div.style.height = "100%";
	        dom.appendChild(div);
	        var svg = this._svg = Svg.SvgElement.createSVG(div);
	        var css = svg.style;
	        css.position = "absolute";
	        css.left = "0px";
	        css.top = "0px";
	        css.width = "100%";
	        css.height = "100%";
	    };
	    Code39CellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var div = this._div;
	        var svg = this._svg;
	        this._value = String(model.value);
	        if (this._value)
	            this._value = this._value.toUpperCase();
	        svg.setAttribute("class", this._barStyle);
	        Svg.SvgElement.renderSVG(svg, this.$_render);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    Code39CellRenderer.TYPE = "code39";
	    Code39CellRenderer.STYLE = "rg-code39-renderer";
	    Code39CellRenderer.STYLE_NAME = "rg-renderer " + Code39CellRenderer.STYLE;
	    Code39CellRenderer.BAR_STYLE = "rg-code39-renderer-bar";
	    return Code39CellRenderer;
	}(DataCellRenderer));
	exports.Code39CellRenderer = Code39CellRenderer;
	var Code128CellRenderer = /** @class */ (function (_super) {
	    __extends(Code128CellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Code128CellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._barStyle = Code128CellRenderer.BAR_STYLE;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._barcode = new Barcode_1.Code128();
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        _this.$_render = function (renderer, width, height) {
	            if (!this._value)
	                return;
	            this._barcode.value = this._value;
	            //this._barcode.barStyle = this._barStyle; 개별바에 지정하지 않고 svg에 지정한다.
	            this._barcode.renders(renderer, new Rectangle_1.Rectangle(0, 0, width, 100));
	        }.bind(_this);
	        return _this;
	    }
	    Code128CellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(Code128CellRenderer.prototype, "barStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** barStyle */
	        get: function () {
	            return this._barStyle;
	        },
	        set: function (value) {
	            if (value != this._barStyle) {
	                this._barStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Code128CellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Code128CellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Code128CellRenderer.prototype, "styleName", {
	        get: function () {
	            return Code128CellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Code128CellRenderer.prototype._doInitContent = function (dom) {
	        var div = this._div = document.createElement("div");
	        div.style.position = "relative";
	        div.style.height = "100%";
	        dom.appendChild(div);
	        var svg = this._svg = Svg.SvgElement.createSVG(div);
	        var css = svg.style;
	        css.position = "absolute";
	        css.left = "0px";
	        css.top = "0px";
	        css.width = "100%";
	        css.height = "100%";
	    };
	    Code128CellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var div = this._div;
	        var svg = this._svg;
	        this._value = String(model.value);
	        svg.setAttribute("class", this._barStyle);
	        Svg.SvgElement.renderSVG(svg, this.$_render);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    Code128CellRenderer.TYPE = "code128";
	    Code128CellRenderer.STYLE = "rg-code128-renderer";
	    Code128CellRenderer.STYLE_NAME = "rg-renderer " + Code128CellRenderer.STYLE;
	    Code128CellRenderer.BAR_STYLE = "rg-code128-renderer-bar";
	    return Code128CellRenderer;
	}(DataCellRenderer));
	exports.Code128CellRenderer = Code128CellRenderer;
	});

	unwrapExports(CellRenderers);
	var CellRenderers_1 = CellRenderers.DataCellRenderer;
	var CellRenderers_2 = CellRenderers.TextCellRenderer;
	var CellRenderers_3 = CellRenderers.BarOrigin;
	var CellRenderers_4 = CellRenderers.BarCellRenderer;
	var CellRenderers_5 = CellRenderers.ImageCellRenderer;
	var CellRenderers_6 = CellRenderers.IconCellRenderer;
	var CellRenderers_7 = CellRenderers.CheckCellRenderer;
	var CellRenderers_8 = CellRenderers.ButtonCellRenderer;
	var CellRenderers_9 = CellRenderers.LinkCellRenderer;
	var CellRenderers_10 = CellRenderers.ShapeCellRenderer;
	var CellRenderers_11 = CellRenderers.SignalBarCellRenderer;
	var CellRenderers_12 = CellRenderers.Code39CellRenderer;
	var CellRenderers_13 = CellRenderers.Code128CellRenderer;

	var TemplateRenderer = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TemplateCellRenderer.ts
	// 2019. 11. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var $_pattern = /\$\{[^{}]*\}/g;
	var T_VALUE = 1;
	var T_FIELD = 2;
	var T_VAR = 3;
	var HtmlTemplateParser = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HtmlTemplateParser() {
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        this._template = '';
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        this._tokens = [];
	    }
	    Object.defineProperty(HtmlTemplateParser.prototype, "template", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** template */
	        get: function () {
	            return this._template;
	        },
	        set: function (value) {
	            this._template = value;
	            this.$_parse(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    HtmlTemplateParser.prototype.realize = function (grid, model, cb) {
	        var toks = this._tokens;
	        var html = "";
	        for (var _i = 0, toks_1 = toks; _i < toks_1.length; _i++) {
	            var t = toks_1[_i];
	            if (typeof t === "string") {
	                html += t;
	            }
	            else if (t.type == T_VALUE) {
	                html += model.value;
	            }
	            else if (t.type == T_FIELD) {
	                html += model.item.getData(grid.dataSource.getFieldIndex(t.field));
	            }
	            else if (cb) {
	                var s = cb.call(this, grid.getHandler(), model, t.field);
	                html += s || "";
	            }
	            else {
	                html += t.field;
	            }
	        }
	        return html;
	    };
	    HtmlTemplateParser.prototype.realizeHeader = function (header, cb) {
	        var toks = this._tokens;
	        var html = "";
	        for (var _i = 0, toks_2 = toks; _i < toks_2.length; _i++) {
	            var t = toks_2[_i];
	            if (typeof t === "string") {
	                html += t;
	            }
	            else if (t.type == T_VALUE) {
	                html += header.displayText;
	            }
	            else if (cb) {
	                var s = cb.call(this, header.column.grid.getHandler(), header, t.field);
	                html += s || "";
	            }
	            else {
	                var s = header.getValue(t.field);
	                html += s !== undefined ? s : t.field;
	            }
	        }
	        return html;
	    };
	    HtmlTemplateParser.prototype.realizeSummary = function (column, model, cb) {
	        var toks = this._tokens;
	        var html = "";
	        for (var _i = 0, toks_3 = toks; _i < toks_3.length; _i++) {
	            var t = toks_3[_i];
	            if (typeof t === "string") {
	                html += t;
	            }
	            else if (t.type == T_VALUE) {
	                html += model.text;
	            }
	            else if (cb) {
	                var s = cb.call(this, column.column.grid.getHandler(), column, t.field);
	                html += s || "";
	            }
	            else {
	                var s = column.getValue(t.field);
	                html += s !== undefined ? s : t.field;
	            }
	        }
	        return html;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HtmlTemplateParser.prototype.$_parse = function (source) {
	        var toks = this._tokens = [];
	        var len = source.length;
	        var p = 0;
	        var match;
	        while (match = $_pattern.exec(source)) {
	            var s = match[0];
	            var i = match.index;
	            if (i > p) {
	                toks.push(source.substring(p, i));
	                p = i;
	            }
	            var fld = s.substring(2, s.length - 1);
	            var tok = {
	                type: fld == "value" ? T_VALUE : (fld.indexOf("value:") == 0) ? T_FIELD : T_VAR,
	                field: fld
	            };
	            if (tok.type == T_FIELD) {
	                tok.field = tok.field.substring(6);
	            }
	            toks.push(tok);
	            p += s.length;
	        }
	        if (p < len) {
	            toks.push(source.substring(p, len));
	        }
	    };
	    return HtmlTemplateParser;
	}());
	exports.HtmlTemplateParser = HtmlTemplateParser;
	var TemplateCellRenderer = /** @class */ (function (_super) {
	    __extends(TemplateCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TemplateCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._output = undefined;
	        //-------------------------------------------------------------------------
	        // dom fields
	        //-------------------------------------------------------------------------
	        _this._html = '';
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._parser = new HtmlTemplateParser();
	        _this.template = "<span>${value}</span>";
	        return _this;
	    }
	    TemplateCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TemplateCellRenderer.prototype, "template", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** template */
	        get: function () {
	            return this._parser.template;
	        },
	        set: function (value) {
	            if (value != this._parser.template) {
	                this._parser.template = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TemplateCellRenderer.prototype, "output", {
	        /** output */
	        get: function () {
	            return this._output;
	        },
	        set: function (value) {
	            this._output = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TemplateCellRenderer.prototype, "callback", {
	        /** callback */
	        get: function () {
	            return this._callback;
	        },
	        set: function (value) {
	            if (value !== this._callback) {
	                this._callback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TemplateCellRenderer.prototype, "valueCallback", {
	        /** valueCallback */
	        get: function () {
	            return this._valueCallback;
	        },
	        set: function (value) {
	            if (value !== this._valueCallback) {
	                this._valueCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TemplateCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return TemplateCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TemplateCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var cb = this._callback;
	        if (cb) {
	            this.$_setHtml(cb.call(this, grid.getHandler(), model, w, h));
	        }
	        else {
	            this.$_setHtml(this._parser.realize(grid, model, this._valueCallback));
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TemplateCellRenderer.prototype.$_setHtml = function (value) {
	        if (value != this._html) {
	            this._html = value;
	            this["_dom"].innerHTML = value;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    TemplateCellRenderer.TYPE = "html";
	    return TemplateCellRenderer;
	}(CellRenderers.DataCellRenderer));
	exports.TemplateCellRenderer = TemplateCellRenderer;
	});

	unwrapExports(TemplateRenderer);
	var TemplateRenderer_1 = TemplateRenderer.HtmlTemplateParser;
	var TemplateRenderer_2 = TemplateRenderer.TemplateCellRenderer;

	var Validation = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Validation.ts
	// 2019. 10. 14. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var AbortError = /** @class */ (function (_super) {
	    __extends(AbortError, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    // readonly message: string;
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function AbortError(message) {
	        var _this = _super.call(this, message) || this;
	        Object.setPrototypeOf(_this, AbortError.prototype);
	        return _this;
	        // this.message = message;
	    }
	    return AbortError;
	}(Error));
	exports.AbortError = AbortError;
	var ValidationError = /** @class */ (function (_super) {
	    __extends(ValidationError, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ValidationError(level, message, column, userMessage) {
	        var _this = _super.call(this, message) || this;
	        Object.setPrototypeOf(_this, ValidationError.prototype);
	        _this.level = level;
	        _this.column = column;
	        _this.userMessage = userMessage;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ValidationError.prototype.toString = function () {
	        return "Validation failed[" + this.level + "]: " + this.message;
	    };
	    return ValidationError;
	}(AbortError));
	exports.ValidationError = ValidationError;
	var EditValidation = /** @class */ (function (_super) {
	    __extends(EditValidation, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditValidation(name) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._active = true;
	        _this._mode = Types.ValidationMode.ALWAYS;
	        _this._level = Types.ValidationLevel.ERROR;
	        _this._name = name;
	        return _this;
	    }
	    Object.defineProperty(EditValidation.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "active", {
	        /** active */
	        get: function () {
	            return this._active;
	        },
	        set: function (value) {
	            this._active = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "mode", {
	        /** mode */
	        get: function () {
	            return this._mode;
	        },
	        set: function (value) {
	            this._mode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "level", {
	        /** level */
	        get: function () {
	            return this._level;
	        },
	        set: function (value) {
	            this._level = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "criteria", {
	        /** criteria */
	        get: function () {
	            return this._criteria;
	        },
	        set: function (value) {
	            if (value != this._criteria) {
	                this._criteria = value;
	                if (value) {
	                    this._exprNode = Expression.ExpressionParser.Default.parse(value, EditValidation.CAPITAL_INDEXERS);
	                }
	                else {
	                    this._exprNode = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "message", {
	        /** message */
	        get: function () {
	            return this._message;
	        },
	        set: function (value) {
	            this._message = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidation.prototype, "description", {
	        /** description */
	        get: function () {
	            return this._description;
	        },
	        set: function (value) {
	            this._description = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditValidation.prototype.validate = function (runtime) {
	        if (this._exprNode && !this._exprNode.evaluate(runtime)) {
	            var s = this._message || this._description || this._name || this._criteria;
	            throw new ValidationError(this._level, s, null, this._message);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    EditValidation.CAPITAL_INDEXERS = ["value", "values"];
	    return EditValidation;
	}(Base_1.Base));
	exports.EditValidation = EditValidation;
	var EditValidationCollection = /** @class */ (function (_super) {
	    __extends(EditValidationCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditValidationCollection() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        _this._items = [];
	        return _this;
	    }
	    EditValidationCollection.prototype._doDispose = function () {
	        this._items = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditValidationCollection.prototype, "count", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditValidationCollection.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items.slice();
	        },
	        set: function (value) {
	            this.assign(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditValidationCollection.prototype.assign = function (source) {
	        if (source !== this) {
	            this.clear();
	            if (source) {
	                if (!Utils_1.Utils.isArray(source)) {
	                    source = [source];
	                }
	                for (var i = 0, cnt = source.length; i < cnt; i++) {
	                    var ev = new EditValidation();
	                    ev.assignFrom(source[i]);
	                    this._items.push(ev);
	                }
	            }
	        }
	    };
	    EditValidationCollection.prototype.clear = function () {
	        this._items = [];
	    };
	    EditValidationCollection.prototype.addAll = function (items) {
	        if (items && items.length > 0) {
	            for (var i = 0, cnt = items.length; i < cnt; i++) {
	                this._items.push(items[i]);
	            }
	        }
	    };
	    EditValidationCollection.prototype.validate = function (mode, runtime, checkLevel, commitLevel) {
	        for (var i = 0; i < this._items.length; i++) {
	            var item = this._items[i];
	            if (item.active && (item.mode == mode || item.mode == Types.ValidationMode.ALWAYS)) {
	                try {
	                    item.validate(runtime);
	                }
	                catch (err) {
	                    if (!checkLevel || (Types.ValidationLevel_compare(item.level, commitLevel) < 0)) {
	                        if (err instanceof ValidationError) {
	                            err.level = item.level;
	                            throw err;
	                        }
	                        else {
	                            throw new ValidationError(item.level, err);
	                        }
	                    }
	                }
	            }
	        }
	    };
	    return EditValidationCollection;
	}(Base_1.Base));
	exports.EditValidationCollection = EditValidationCollection;
	var DataRowValidationRuntime = /** @class */ (function (_super) {
	    __extends(DataRowValidationRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataRowValidationRuntime() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._item = null;
	        _this._dataSource = null;
	        _this._fieldCount = 0;
	        return _this;
	    }
	    DataRowValidationRuntime.prototype._doDispose = function () {
	        this._item = null;
	        this._dataSource = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DataRowValidationRuntime.prototype, "item", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** item */
	        get: function () {
	            return this._item;
	        },
	        set: function (value) {
	            this._item = value;
	            this._dataSource = this._item.dataSource;
	            this._fieldCount = this._dataSource ? this._dataSource.fieldCount : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataRowValidationRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (DataRowValidationRuntime.IDENTS.hasOwnProperty(token)) {
	            return DataRowValidationRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    DataRowValidationRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case DataRowValidationRuntime.ID_ROW:
	                return this._item.index;
	            case DataRowValidationRuntime.ID_DATAROW:
	                return this._item.dataRow;
	            case DataRowValidationRuntime.ID_CHECKED:
	                return this._item.checked;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    DataRowValidationRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (index < 0 || index >= this._fieldCount) {
	            throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	        }
	        switch (idKey) {
	            case DataRowValidationRuntime.ID_VALUE:
	            case DataRowValidationRuntime.ID_VALUES:
	                return this._item.getData(index);
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    DataRowValidationRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        var idx = capitalized ? this._dataSource.getFieldIndexC(index) : this._dataSource.getFieldIndex(index);
	        if (idx < 0 || idx >= this._fieldCount) {
	            throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	        }
	        switch (idKey) {
	            case DataRowValidationRuntime.ID_VALUE:
	            case DataRowValidationRuntime.ID_VALUES:
	                return this._item.getData(idx);
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataRowValidationRuntime.ID_ROW = 0;
	    DataRowValidationRuntime.ID_DATAROW = 1;
	    DataRowValidationRuntime.ID_CHECKED = 2;
	    DataRowValidationRuntime.ID_VALUE = 3;
	    DataRowValidationRuntime.ID_VALUES = 4;
	    DataRowValidationRuntime.IDENTS = {
	        row: DataRowValidationRuntime.ID_ROW,
	        datarow: DataRowValidationRuntime.ID_DATAROW,
	        checked: DataRowValidationRuntime.ID_CHECKED,
	        value: DataRowValidationRuntime.ID_VALUE,
	        values: DataRowValidationRuntime.ID_VALUES
	    };
	    return DataRowValidationRuntime;
	}(Expression.ExpressionRuntime));
	exports.DataRowValidationRuntime = DataRowValidationRuntime;
	var DataCellValidationRuntime = /** @class */ (function (_super) {
	    __extends(DataCellValidationRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataCellValidationRuntime() {
	        return _super.call(this) || this;
	    }
	    DataCellValidationRuntime.prototype._doDispose = function () {
	        this._index = null;
	        this._dataSource = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataCellValidationRuntime.prototype.setIndex = function (value) {
	        this._index = value;
	        this._value = this._index.item.getData(this._index.dataColumn.dataIndex);
	        this._dataSource = this._index.item.dataSource;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataCellValidationRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (DataCellValidationRuntime.IDENTS.hasOwnProperty(token)) {
	            return DataCellValidationRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    DataCellValidationRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case DataCellValidationRuntime.ID_VALUE:
	                return this._value;
	            case DataCellValidationRuntime.ID_ROW:
	                return this._index.itemIndex;
	            case DataCellValidationRuntime.ID_DATAROW:
	                return this._index.item.dataRow;
	            case DataCellValidationRuntime.ID_INDEX:
	                return this._index.column.index;
	            case DataCellValidationRuntime.ID_FIELD:
	                return this._index.dataColumn.dataIndex;
	            case DataCellValidationRuntime.ID_CHECKED:
	                var item = this._index.item;
	                return item ? item.checked : false;
	            case DataCellValidationRuntime.ID_TAG:
	                return this._index.column.tag;
	            case DataCellValidationRuntime.ID_BASE:
	                var idx = this._index.dataColumn.baseIndex;
	                return idx >= 0 ? this._index.item.getData(idx) : undefined;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    DataCellValidationRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        var fldCnt = this._dataSource.fieldCount;
	        if (index < 0 || index >= fldCnt) {
	            throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	        }
	        switch (idKey) {
	            case DataCellValidationRuntime.ID_VALUE:
	            case DataCellValidationRuntime.ID_VALUES:
	                return this._index.item.getData(index);
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    DataCellValidationRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        var idx = capitalized ? this._dataSource.getFieldIndexC(index) : this._dataSource.getFieldIndex(index);
	        var fldCnt = this._dataSource.fieldCount;
	        if (idx < 0 || idx >= fldCnt) {
	            throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	        }
	        switch (idKey) {
	            case DataCellValidationRuntime.ID_VALUE:
	            case DataCellValidationRuntime.ID_VALUES:
	                return this._index.item.getData(idx);
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataCellValidationRuntime.ID_VALUE = 0;
	    DataCellValidationRuntime.ID_ROW = 1;
	    DataCellValidationRuntime.ID_DATAROW = 2;
	    DataCellValidationRuntime.ID_INDEX = 3;
	    DataCellValidationRuntime.ID_FIELD = 4;
	    DataCellValidationRuntime.ID_CHECKED = 5;
	    DataCellValidationRuntime.ID_TAG = 6;
	    DataCellValidationRuntime.ID_BASE = 7;
	    DataCellValidationRuntime.ID_VALUES = 8;
	    DataCellValidationRuntime.IDENTS = {
	        value: DataCellValidationRuntime.ID_VALUE,
	        row: DataCellValidationRuntime.ID_ROW,
	        datarow: DataCellValidationRuntime.ID_DATAROW,
	        index: DataCellValidationRuntime.ID_INDEX,
	        field: DataCellValidationRuntime.ID_FIELD,
	        checked: DataCellValidationRuntime.ID_CHECKED,
	        tag: DataCellValidationRuntime.ID_TAG,
	        base: DataCellValidationRuntime.ID_BASE,
	        values: DataCellValidationRuntime.ID_VALUES
	    };
	    return DataCellValidationRuntime;
	}(Expression.ExpressionRuntime));
	exports.DataCellValidationRuntime = DataCellValidationRuntime;
	var ValidationManager = /** @class */ (function (_super) {
	    __extends(ValidationManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ValidationManager(owner) {
	        var _this = _super.call(this) || this;
	        _this._userValidations = false;
	        _this._cellList = {};
	        _this._owner = owner;
	        return _this;
	    }
	    Object.defineProperty(ValidationManager.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValidationManager.prototype, "hasRowValidation", {
	        /** hasRowValidation */
	        get: function () {
	            return this._owner.validations.count > 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ValidationManager.prototype.validateCell = function (index, inserting) {
	        this.$_validateCell(index, inserting, true, this._owner.editOptions.commitLevel);
	    };
	    ValidationManager.prototype.validateRow = function (item, inserting, rowOnly) {
	        var level = this._owner.editOptions.commitLevel;
	        if (!rowOnly) {
	            var columns = this._owner.getDataColumns();
	            for (var i = 0, cnt = columns.length; i < cnt; i++) {
	                var column = columns[i];
	                var index = CellIndex_1.CellIndex.temp(this._owner, item.index, column);
	                this.$_validateCell(index, inserting, true, level);
	            }
	        }
	        var validations = this._owner.validations;
	        if (validations && validations.count > 0) {
	            var runtime = this._owner.rowValidationRuntime;
	            runtime.item = item;
	            validations.validate(inserting ? Types.ValidationMode.INSERT : Types.ValidationMode.UPDATE, runtime, false, level);
	        }
	    };
	    ValidationManager.prototype.clearInvalidCellList = function () {
	        this.$_clearInvalidateList();
	    };
	    ValidationManager.prototype.addInvalidateCell = function (index, err) {
	        this.$_addInvalidateCell(index, err);
	    };
	    ValidationManager.prototype.getInvalidCellList = function () {
	        var ret = [];
	        var invalidList = this._cellList;
	        for (var r in invalidList) {
	            var row = invalidList[r];
	            for (var c in row) {
	                var cell = row[c];
	                ret.push({ column: cell.column, dataRow: cell.dataRow, message: cell.message, level: cell.level });
	            }
	        }
	        return ret.length > 0 ? ret : null;
	    };
	    ValidationManager.prototype.checkValidateCells = function (itemIndices, visibleOnly) {
	        var grid = this._owner;
	        var columns = grid.getDataColumns();
	        var items = [];
	        if (itemIndices != null) {
	            for (var i = 0, cnt = itemIndices.length; i < cnt; i++) {
	                var item = grid.getItem(itemIndices[i]);
	                if (item && item.dataId && item.dataId > -1) {
	                    delete this._cellList[item.dataId];
	                    items.push(item);
	                }
	            }
	        }
	        else {
	            if (visibleOnly) {
	                for (var i = 0, cnt = grid.itemCount; i < cnt; i++) {
	                    var item = grid.getItem(i);
	                    if (item && item.dataId && item.dataId > -1) {
	                        delete this._cellList[item.dataId];
	                        items.push(item);
	                    }
	                }
	            }
	            else {
	                items = grid.getAllItems();
	            }
	            this._cellList = {};
	        }
	        for (var i = 0, rCnt = items.length; i < rCnt; i++) {
	            var item = items[i];
	            if (item.dataId < 0) {
	                continue;
	            }
	            for (var j = 0, cnt = columns.length; j < cnt; j++) {
	                var column = columns[j];
	                var dataIndex = column.dataIndex;
	                var index = CellIndex_1.CellIndex.temp(grid, item.index, column);
	                try {
	                    this.$_validateCell(index, false, false, Types.ValidationLevel.IGNORE);
	                    grid._fireValidateCell(index, false, item.getData(dataIndex));
	                }
	                catch (err) {
	                    this.$_addInvalidateCell(index, err);
	                    this._userValidations = true;
	                }
	            }
	        }
	        grid.refreshView();
	        return this.getInvalidCellList();
	    };
	    ValidationManager.prototype.clearInvalidateList = function () {
	        this.$_clearInvalidateList();
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ValidationManager.prototype.$_validateCell = function (index, inserting, levelCheck, level) {
	        var column = index.dataColumn;
	        if (column) {
	            var value = index.item.getData(column.dataIndex);
	            if (column.required) {
	                var grid = column.grid;
	                var fld = grid && grid.dataSource && grid.dataSource.getField(column.dataIndex);
	                if (fld && fld.isEmpty(value)) {
	                    var level_1 = column.requiredLevel || Types.ValidationLevel.ERROR;
	                    var msg = column.requiredMessage || "Value is required: " + column.fieldName;
	                    throw new ValidationError(level_1, msg, column, column.requiredMessage);
	                }
	            }
	            var validations = column.validations;
	            if (validations && validations.count > 0) {
	                var runtime = this._owner.columnValidationRuntime;
	                runtime.setIndex(index);
	                try {
	                    validations.validate(inserting ? Types.ValidationMode.INSERT : Types.ValidationMode.UPDATE, runtime, levelCheck, level);
	                    this.$_clearInvalidateCell(index);
	                }
	                catch (err) {
	                    if (err instanceof ValidationError) {
	                        err.column = column;
	                    }
	                    throw err;
	                }
	            }
	        }
	    };
	    ValidationManager.prototype.$_addInvalidateCell = function (index, err) {
	        var dataId = index.dataId && index.dataId;
	        var dataIndex = index.dataColumn && index.dataColumn.dataIndex;
	        if (dataId == undefined || dataIndex <= -1) {
	            return;
	        }
	        var validateList = this._cellList;
	        var row = validateList[dataId] ? validateList[dataId] : (validateList[dataId] = {});
	        row[dataIndex] = {
	            dataRow: index.dataRow,
	            message: err.message,
	            userMessage: err.userMessage,
	            level: err.level,
	            column: index.dataColumn.name
	        };
	    };
	    ValidationManager.prototype.$_clearInvalidateCell = function (index) {
	        var dataId = index.dataId;
	        var dataIndex = index.dataColumn.dataIndex;
	        var row = this._cellList[dataId];
	        if (row && row[dataIndex]) {
	            delete row[dataIndex];
	        }
	    };
	    ValidationManager.prototype.$_clearInvalidateList = function () {
	        this._cellList = {};
	        this._userValidations = false;
	        this._owner.refreshView();
	    };
	    return ValidationManager;
	}(Base_1.Base));
	exports.ValidationManager = ValidationManager;
	});

	unwrapExports(Validation);
	var Validation_1 = Validation.AbortError;
	var Validation_2 = Validation.ValidationError;
	var Validation_3 = Validation.EditValidation;
	var Validation_4 = Validation.EditValidationCollection;
	var Validation_5 = Validation.DataRowValidationRuntime;
	var Validation_6 = Validation.DataCellValidationRuntime;
	var Validation_7 = Validation.ValidationManager;

	var TextFormatter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TextFormatter.ts
	// 2020. 02. 04. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });

	var DUMMY_PATTERN = /(.*)/;
	var DUMMY_REPLACE = "$1";
	var TextFormatter = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function TextFormatter(format) {
	        this._pattern = DUMMY_PATTERN;
	        this._replace = DUMMY_REPLACE;
	        this.$_parse(this._format = format);
	    }
	    TextFormatter.getFormatter = function (format) {
	        var f = TextFormatter.Formatters[format];
	        if (!f) {
	            TextFormatter.Formatters[format] = f = new TextFormatter(format);
	        }
	        return f;
	    };
	    Object.defineProperty(TextFormatter.prototype, "format", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._format;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TextFormatter.prototype.getText = function (text) {
	        return text && text.replace(this._pattern, this._replace);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TextFormatter.prototype.$_parse = function (fmt) {
	        if (fmt) {
	            var arr = fmt.trim().split(Utils_1.Utils.colonreg);
	            if (arr.length > 1) {
	                var p = arr[0].trim();
	                var f = arr[1].trim();
	                if (p && f) {
	                    if (p.charAt(0) == '"') {
	                        p = p.substr(1, p.length - 2);
	                    }
	                    if (p) {
	                        if (f.charAt(0) == '"') {
	                            f = p.substr(1, f.length - 2);
	                        }
	                        if (f) {
	                            this._pattern = new RegExp(p, arr[2] || '');
	                            this._replace = f;
	                        }
	                    }
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    TextFormatter.Formatters = {};
	    return TextFormatter;
	}());
	exports.TextFormatter = TextFormatter;
	});

	unwrapExports(TextFormatter_1);
	var TextFormatter_2 = TextFormatter_1.TextFormatter;

	var GridColumn_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridColumn.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });














	var ColumnObject = /** @class */ (function (_super) {
	    __extends(ColumnObject, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnObject(column) {
	        var _this = _super.call(this, null) || this;
	        _this._column = column;
	        return _this;
	    }
	    ColumnObject.prototype._dispose = function () {
	        this._column = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnObject.prototype, "column", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** column */
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnObject.prototype, "template", {
	        /** template */
	        get: function () {
	            return this._template && this._template.template;
	        },
	        set: function (value) {
	            if (value != this.template) {
	                if (value) {
	                    if (!this.template) {
	                        this._template = new TemplateRenderer.HtmlTemplateParser();
	                    }
	                    this._template.template = value;
	                }
	                else {
	                    this._template && (this._template.template = undefined);
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnObject.prototype, "values", {
	        /** values */
	        get: function () {
	            return this._values;
	        },
	        set: function (value) {
	            if (value !== this._values) {
	                if (value) {
	                    Object.assign(this._values, value);
	                }
	                else {
	                    this._values = null;
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnObject.prototype.getValue = function (key) {
	        return this._values && this._values[key];
	    };
	    ColumnObject.prototype.setValue = function (key, value) {
	        if (!this._values)
	            this._values = {};
	        if (this._values[key] != value) {
	            this._values[key] = value;
	            this._changed();
	        }
	    };
	    return ColumnObject;
	}(GridObject_1.GridObject));
	exports.ColumnObject = ColumnObject;
	var ColumnSummaryStyle = /** @class */ (function () {
	    function ColumnSummaryStyle() {
	    }
	    ColumnSummaryStyle.prototype.clear = function () {
	        this.styleName =
	            this.textFormat =
	                this.datetimeFormat =
	                    this.numberFormat =
	                        this.booleanFormat =
	                            this.prefix =
	                                this.suffix = undefined;
	        return this;
	    };
	    ColumnSummaryStyle.prototype.assign = function (source) {
	        if (typeof source === "string") {
	            this.styleName = source;
	        }
	        else if (source) {
	            if ('styleName' in source) {
	                this.styleName = source.styleName;
	            }
	            if ('textFormat' in source) {
	                this.textFormat = source.textFormat;
	            }
	            if ('datetimeFormat' in source) {
	                this.datetimeFormat = source.datetimeFormat;
	            }
	            if ('numberFormat' in source) {
	                this.numberFormat = source.numberFormat;
	            }
	            if ('booleanFormat' in source) {
	                this.booleanFormat = source.booleanFormat;
	            }
	            if ('prefix' in source) {
	                this.prefix = source.prefix;
	            }
	            if ('suffix' in source) {
	                this.suffix = source.suffix;
	            }
	        }
	        return this;
	    };
	    return ColumnSummaryStyle;
	}());
	exports.ColumnSummaryStyle = ColumnSummaryStyle;
	var ColumnSummary = /** @class */ (function (_super) {
	    __extends(ColumnSummary, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnSummary(column) {
	        var _this = _super.call(this, column) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._index = 0;
	        return _this;
	    }
	    ColumnSummary.prototype._dispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnSummary.prototype, "index", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "valueCallback", {
	        /** valueCallback */
	        get: function () {
	            return this._valueCallback;
	        },
	        set: function (value) {
	            if (value !== this._valueCallback) {
	                this._valueCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "expression", {
	        /** expression */
	        get: function () {
	            return this._expression;
	        },
	        set: function (value) {
	            if (value) {
	                value = value.trim();
	            }
	            if (value != this._expression) {
	                this._expression = value;
	                if (value) {
	                    this._exprNode = Expression.ExpressionParser.Default.parse(value);
	                }
	                else {
	                    this._exprNode = undefined;
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            return this._styleName;
	        },
	        set: function (value) {
	            if (value != this._styleName) {
	                this._styleName = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "styleCallback", {
	        /** styleCallback */
	        get: function () {
	            return this._styleCallback;
	        },
	        set: function (value) {
	            if (value != this._styleCallback) {
	                this._styleCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "numberFormat", {
	        /** numberFormat */
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                this._numberFormatter = value ? DecimalFormatter_1.DecimalFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                this._datetimeWriter = value ? DateTimeWriter_1.DateTimeWriter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolFormatter = value ? BooleanFormatter_1.BooleanFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "textFormat", {
	        /** textFormat */
	        get: function () {
	            return this._textFormat;
	        },
	        set: function (value) {
	            if (value != this._textFormat) {
	                this._textFormat = value;
	                this._textFormatter = value ? TextFormatter_1.TextFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "prefix", {
	        /** prefix */
	        get: function () {
	            return this._prefix;
	        },
	        set: function (value) {
	            if (value != this._prefix) {
	                this._prefix = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "suffix", {
	        /** suffix */
	        get: function () {
	            return this._suffix;
	        },
	        set: function (value) {
	            if (value != this._suffix) {
	                this._suffix = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "textFormatter", {
	        /** textFormatter */
	        get: function () {
	            return this._textFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "numberFormatter", {
	        /** numberFormatter */
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "datetimeWriter", {
	        /** datetimeWriter */
	        get: function () {
	            return this._datetimeWriter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSummary.prototype, "boolFormatter", {
	        /** boolFormatter */
	        get: function () {
	            return this._boolFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnSummary.prototype.evaluate = function (runtime, index) {
	        if (this._exprNode) {
	            if (this._exprNode instanceof Array) {
	                if (index !== undefined && this._exprNode[index]) {
	                    var v = this._exprNode[index].evaluate(runtime);
	                    return v;
	                    //return this._valueCallback ? this._valueCallback(this, v) : v;
	                }
	                else {
	                    return;
	                }
	            }
	            else {
	                var v = this._exprNode.evaluate(runtime);
	                return v;
	                //return this._valueCallback ? this._valueCallback(this, v) : v;
	            }
	        }
	    };
	    ColumnSummary.prototype.realizeTemplate = function (cell) {
	        var t = this["_template"];
	        if (t) {
	            return t.realizeSummary(this, cell, null);
	        }
	        else {
	            return undefined;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnSummary.prototype.assignSimple = function (src) {
	        if (typeof src === 'string') {
	            this.expression = src;
	            return true;
	        }
	        return false;
	    };
	    ColumnSummary.prototype._doChanged = function () {
	    };
	    return ColumnSummary;
	}(ColumnObject));
	exports.ColumnSummary = ColumnSummary;
	var ColumnHeaderSummary = /** @class */ (function (_super) {
	    __extends(ColumnHeaderSummary, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnHeaderSummary(column) {
	        return _super.call(this, column) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnHeaderSummary.prototype._doChanged = function () {
	        this.column["_headerSummaryChanged"]();
	    };
	    return ColumnHeaderSummary;
	}(ColumnSummary));
	exports.ColumnHeaderSummary = ColumnHeaderSummary;
	var ColumnHeaderSummaryCollection = /** @class */ (function (_super) {
	    __extends(ColumnHeaderSummaryCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnHeaderSummaryCollection(column) {
	        var _this = _super.call(this) || this;
	        _this._items = [];
	        _this._column = column;
	        _this._items.push(new ColumnHeaderSummary(column));
	        return _this;
	    }
	    Object.defineProperty(ColumnHeaderSummaryCollection.prototype, "column", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** column */
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeaderSummaryCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnHeaderSummaryCollection.prototype.get = function (index) {
	        return this._items[index];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnHeaderSummaryCollection.prototype.assignFrom = function (source) {
	        if (Utils_1.Utils.isArray(source)) {
	            var len = source.length;
	            while (this._items.length < len) {
	                this._items.push(null);
	            }
	            if (len > 1 && this._items.length > len) {
	                this._items.length = len;
	            }
	            if (len > 0) {
	                this._items[0].assignFrom(source[0]);
	            }
	            for (var i = 1; i < len; i++) {
	                var src = source[i];
	                if (src) {
	                    if (!this._items[i]) {
	                        this._items[i] = new ColumnHeaderSummary(this._column);
	                    }
	                    this._items[i].assignFrom(source[i]);
	                }
	                else {
	                    this._items[i] = null;
	                }
	            }
	        }
	        else {
	            this._items[0].assignFrom(source);
	        }
	    };
	    return ColumnHeaderSummaryCollection;
	}(Base_1.Base));
	exports.ColumnHeaderSummaryCollection = ColumnHeaderSummaryCollection;
	var ColumnHeader = /** @class */ (function (_super) {
	    __extends(ColumnHeader, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnHeader(column) {
	        var _this = _super.call(this, column) || this;
	        _this._imageIndex = -1;
	        _this._checkLocation = Types.ColumnHeaderItemLocation.NONE;
	        _this._imageLocation = Types.ColumnHeaderItemLocation.NONE;
	        _this._clickBehavior = Types.ClickBehavior.NONE;
	        _this._showTooltip = true;
	        _this._fixedHeight = 0;
	        _this._popupChanged = false;
	        return _this;
	    }
	    ColumnHeader.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnHeader.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "itemOffset", {
	        /** itemOffset */
	        get: function () {
	            return this._itemOffset;
	        },
	        set: function (value) {
	            if (value != this._itemOffset) {
	                this._itemOffset = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "itemGap", {
	        /** itemGap */
	        get: function () {
	            return this._itemGap;
	        },
	        set: function (value) {
	            if (value != this._itemGap) {
	                this._itemGap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "imageIndex", {
	        /** imageIndex */
	        get: function () {
	            return this._imageIndex;
	        },
	        set: function (value) {
	            if (value != this._imageIndex) {
	                this._imageIndex = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "imageUrl", {
	        /** imageUrl */
	        get: function () {
	            return this._imageUrl;
	        },
	        set: function (value) {
	            if (value != this._imageUrl) {
	                this._imageUrl = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "checkLocation", {
	        /** checkLocation */
	        get: function () {
	            return this._checkLocation;
	        },
	        set: function (value) {
	            if (value != this._checkLocation) {
	                this._checkLocation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "imageLocation", {
	        /** imageLocation */
	        get: function () {
	            return this._imageLocation;
	        },
	        set: function (value) {
	            if (value != this._imageLocation) {
	                this._imageLocation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "clickBehavior", {
	        /** clickBehavior */
	        get: function () {
	            return this._clickBehavior;
	        },
	        set: function (value) {
	            if (value != this._clickBehavior) {
	                this._clickBehavior = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "showTooltip", {
	        /** showTooltip */
	        get: function () {
	            return this._showTooltip;
	        },
	        set: function (value) {
	            if (value != this._showTooltip) {
	                this._showTooltip = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "tooltip", {
	        /** tooltip */
	        get: function () {
	            return this._tooltip;
	        },
	        set: function (value) {
	            if (value != this._tooltip) {
	                this._tooltip = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "fixedHeight", {
	        /** fixedHeight */
	        get: function () {
	            return this._fixedHeight;
	        },
	        set: function (value) {
	            if (value != this._fixedHeight) {
	                this._fixedHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "displayText", {
	        /** displayText */
	        get: function () {
	            var column = this.column;
	            var s = this._text;
	            if (!s && column instanceof DataColumn) {
	                var fld = column.getField();
	                if (fld) {
	                    s = fld.header || fld.orgFieldName;
	                }
	                else {
	                    s = column.fieldName;
	                }
	            }
	            if (!s) {
	                s = column.name;
	            }
	            return s;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "popupMenu", {
	        /** popupMenu */
	        get: function () {
	            return this._popupMenu;
	        },
	        set: function (value) {
	            if (value != this._popupMenu) {
	                this._popupMenu = value;
	                if (typeof value === "string") {
	                    this._popupMenuName = value;
	                }
	                else {
	                    this._popupMenuName = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnHeader.prototype, "popupMenuName", {
	        get: function () {
	            if (this._popupMenuName) {
	                return this._popupMenuName;
	            }
	            else if (this._popupMenu) {
	                this._popupMenuName = "$$_column_header_menu" + this["$_hash"];
	                var grid = this.column.grid;
	                grid && grid.addPopupMenu(this._popupMenuName, this._popupMenu, true);
	                return grid && this._popupMenuName;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnHeader.prototype.realizeTemplate = function () {
	        var t = this["_template"];
	        if (t) {
	            return t.realizeHeader(this, null);
	        }
	        else {
	            return undefined;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnHeader.prototype._doChanged = function () {
	        if (this.column) {
	            this.column["_headerChanged"]();
	        }
	    };
	    return ColumnHeader;
	}(ColumnObject));
	exports.ColumnHeader = ColumnHeader;
	var ColumnFooter = /** @class */ (function (_super) {
	    __extends(ColumnFooter, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFooter(column) {
	        return _super.call(this, column) || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnFooter.prototype._doChanged = function () {
	        this.column["_footerChanged"]();
	    };
	    return ColumnFooter;
	}(ColumnSummary));
	exports.ColumnFooter = ColumnFooter;
	var ColumnFooterCollection = /** @class */ (function (_super) {
	    __extends(ColumnFooterCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnFooterCollection(column) {
	        var _this = _super.call(this) || this;
	        _this._items = [];
	        _this._column = column;
	        _this._items.push(new ColumnFooter(column));
	        return _this;
	    }
	    Object.defineProperty(ColumnFooterCollection.prototype, "column", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** column */
	        get: function () {
	            return this._column;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnFooterCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnFooterCollection.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnFooterCollection.prototype.assignFrom = function (source) {
	        if (Utils_1.Utils.isArray(source)) {
	            var len = source.length;
	            while (this._items.length < len) {
	                this._items.push(null);
	            }
	            if (len > 1 && this._items.length > len) {
	                this._items.length = len;
	            }
	            if (len > 0) {
	                this._items[0].assignFrom(source[0]);
	            }
	            for (var i = 1; i < len; i++) {
	                var src = source[i];
	                if (src) {
	                    if (!this._items[i]) {
	                        this._items[i] = new ColumnFooter(this._column);
	                    }
	                    this._items[i].assignFrom(source[i]);
	                }
	                else {
	                    this._items[i] = null;
	                }
	            }
	        }
	        else {
	            this._items[0].assignFrom(source);
	        }
	    };
	    return ColumnFooterCollection;
	}(Base_1.Base));
	exports.ColumnFooterCollection = ColumnFooterCollection;
	// 1.0 VisualStyles + CellStyle - css
	var ColumnStyle = /** @class */ (function () {
	    function ColumnStyle() {
	    }
	    ColumnStyle.getEditorType = function (editor) {
	        return typeof editor === "string" ? editor : editor ? editor.type : "text";
	    };
	    ColumnStyle.prototype.clear = function () {
	        this.styleName =
	            this.renderer =
	                this.editable =
	                    this.editor =
	                        this.readonly =
	                            this.textFormat =
	                                this.datetimeFormat =
	                                    this.numberFormat =
	                                        this.booleanFormat =
	                                            this.prefix =
	                                                this.suffix = undefined;
	        return this;
	    };
	    ColumnStyle.prototype.assign = function (source) {
	        if (typeof source === "string") {
	            this.styleName = source;
	        }
	        else if (source) {
	            if ('styleName' in source) {
	                this.styleName = source.styleName;
	            }
	            if ('renderer' in source) {
	                this.renderer = source.renderer;
	            }
	            if ('editor' in source) {
	                this.editor = source.editor;
	            }
	            if ('editable' in source) {
	                this.editable = source.editable;
	            }
	            if ('readonly' in source) {
	                this.readonly = source.readonly;
	            }
	            if ('textFormat' in source) {
	                this.textFormat = source.textFormat;
	            }
	            if ('datetimeFormat' in source) {
	                this.datetimeFormat = source.datetimeFormat;
	            }
	            if ('numberFormat' in source) {
	                this.numberFormat = source.numberFormat;
	            }
	            if ('booleanFormat' in source) {
	                this.booleanFormat = source.booleanFormat;
	            }
	            if ('prefix' in source) {
	                this.prefix = source.prefix;
	            }
	            if ('suffix' in source) {
	                this.suffix = source.suffix;
	            }
	        }
	        return this;
	    };
	    return ColumnStyle;
	}());
	exports.ColumnStyle = ColumnStyle;
	var GridColumn = /** @class */ (function (_super) {
	    __extends(GridColumn, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridColumn(config) {
	        var _this = _super.call(this) || this;
	        _this._visible = true;
	        _this._width = 100;
	        _this._resizable = true;
	        _this._movable = true;
	        _this._checked = false;
	        _this._dirty = false;
	        _this._index = -1;
	        //private _displayIndex = -1; // bodyView 내에서 컬럼의 td index.
	        _this._states = {};
	        _this._header = new ColumnHeader(_this);
	        //this._footer = new ColumnFooter(this);
	        _this._footers = new ColumnFooterCollection(_this);
	        _this._headerSummaries = new ColumnHeaderSummaryCollection(_this);
	        _this._groupFooters = new ColumnFooterCollection(_this);
	        config && _this.assignFrom(config);
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    GridColumn.compareLoc = function (col1, col2) {
	        if (col1 == null || col2 == null) {
	            return 0;
	        }
	        if (col1 == null) {
	            return -1;
	        }
	        if (col2 == null) {
	            return 1;
	        }
	        // const idx1 = col1.root.displayIndex;
	        // const idx2 = col2.root.displayIndex;
	        var idx1 = col1.index;
	        var idx2 = col2.index;
	        // if (idx1 == idx2) {
	        // 	if (col1.group() == col2.group()) {
	        // 		idx1 = col1.displayIndex();
	        // 		idx2 = col2.displayIndex();
	        // 	} else {
	        // 		idx1 = col1.dataRoot().displayIndex();
	        // 		idx2 = col2.dataRoot().displayIndex();
	        // 	}
	        // }
	        return idx1 - idx2;
	    };
	    GridColumn.prototype._doDispose = function () {
	        this._layout = null;
	        this._header = this._header && this._header.dispose();
	        this._footers = this._footers && this._footers.dispose();
	        this._headerSummaries = this._headerSummaries && this._headerSummaries.dispose();
	        this._groupFooters = this._groupFooters && this._groupFooters.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridColumn.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        set: function (value) {
	            if (value != this._name) {
	                this._name = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype._layoutChanged = function () {
	        this._changed();
	        this._layout && this._layout["_changed"]();
	    };
	    Object.defineProperty(GridColumn.prototype, "visible", {
	        /**
	         * visible property.
	         * false이면 연결된 layout의 visible이 true여도 표시되지 않는다.
	         * 즉, layout과 컬럼의 visible이 모두 true여야 한다.
	         */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	                if (this._layout) {
	                    this._layoutChanged();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "width", {
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            value = Math.max(0, value); // 이렇게 하면 value가 string일 때 number로 변경된다.
	            // type을 number로 지정했다고 실행 시간에 자동을 형변환 해주지 않는다.
	            if (!isNaN(value) && value != this._width) {
	                this._width = value;
	                this._layoutChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "resizable", {
	        /** resizable */
	        get: function () {
	            return this._resizable;
	        },
	        set: function (value) {
	            if (value != this._resizable) {
	                this._resizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "movable", {
	        /** movable */
	        get: function () {
	            return this._movable;
	        },
	        set: function (value) {
	            if (value != this._movable) {
	                this._movable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "checked", {
	        /** checked */
	        get: function () {
	            return this._checked;
	        },
	        set: function (value) {
	            if (value != this._checked) {
	                this._checked = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "header", {
	        /** header */
	        get: function () {
	            return this._header;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setHeader = function (value) {
	        this._header.assignSimple(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "footers", {
	        /** footers */
	        get: function () {
	            return this._footers;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setFooters = function (value) {
	        this._footers.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "footer", {
	        /** footer */
	        get: function () {
	            return this._footers.getItem(0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setFooter = function (value) {
	        var footer = this._footers.getItem(0);
	        footer && footer.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "headerSummaries", {
	        /** headerSummaries */
	        get: function () {
	            return this._headerSummaries;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setHeaderSummaries = function (value) {
	        this._headerSummaries.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "headerSummary", {
	        /** headerSummary */
	        get: function () {
	            return this._headerSummaries.get(0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setHeaderSummary = function (value) {
	        var summary = this._headerSummaries.get(0);
	        summary && summary.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "groupFooters", {
	        /** groupFooters */
	        get: function () {
	            return this._groupFooters;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setGroupFooters = function (value) {
	        this._groupFooters.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "groupFooter", {
	        /** groupFooter */
	        get: function () {
	            return this._groupFooters.getItem(0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridColumn.prototype.setGroupFooter = function (value) {
	        var footer = this._groupFooters.getItem(0);
	        footer && footer.assignFrom(value);
	    };
	    Object.defineProperty(GridColumn.prototype, "grid", {
	        /** grid */
	        get: function () {
	            // createColumn시 grid를 참조해야 하는 경우 layout이 설정되어있지 않기 때문에 참조할수 없다.
	            if (this._layout) {
	                return this._layout.grid;
	            }
	            else if (this.$_owner) {
	                return this.$_owner.owner;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "tag", {
	        /** tag */
	        get: function () {
	            return this._tag;
	        },
	        set: function (value) {
	            this._tag = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "displayText", {
	        // /** displayIndex */
	        // get displayIndex(): number {
	        //     return this._index;
	        // }
	        // /** distance */
	        // get distance(): number {
	        //     return this._index;
	        // }
	        /** displayText */
	        get: function () {
	            return this._header.text || this._name || ("col_" + this._index);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "dataRoot", {
	        /** dataRoot */
	        get: function () {
	            return this; // this._dataRoot;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridColumn.prototype, "layout", {
	        /** layout */
	        get: function () {
	            return this._layout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridColumn.prototype.clean = function () {
	        this._dirty = false;
	    };
	    GridColumn.prototype.isWritable = function () {
	        return false;
	    };
	    GridColumn.prototype.stateFor = function (state) {
	        return this._states[state];
	    };
	    GridColumn.prototype.setState = function (state, value) {
	        this._states[state] = value;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridColumn.prototype.assignFrom = function (source) {
	        _super.prototype.assignFrom.call(this, source);
	        this._header.assignFrom(source.header);
	        this._footers.assignFrom(source.footers || source.footer);
	        this._headerSummaries.assignFrom(source.summaries || source.summary);
	        this._groupFooters.assignFrom(source.groupFooters || source.groupFooter);
	    };
	    GridColumn.prototype.toString = function () {
	        return this.displayText;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridColumn.prototype._prepareLayout = function (grid, layout) {
	    };
	    GridColumn.prototype._changed = function () {
	        if (!this._dirty) {
	            this._dirty = true;
	            var grid = this.grid;
	            grid && grid.invalidateColumn(this);
	        }
	    };
	    GridColumn.prototype.$_setIndex = function (value) {
	        this._index = value;
	    };
	    GridColumn.prototype._headerChanged = function () {
	    };
	    GridColumn.prototype._headerSummaryChanged = function () {
	    };
	    GridColumn.prototype._footerChanged = function () {
	    };
	    GridColumn.prototype._resetIndices = function (grid) {
	    };
	    return GridColumn;
	}(Base_1.Base));
	exports.GridColumn = GridColumn;
	var ValueColumn = /** @class */ (function (_super) {
	    __extends(ValueColumn, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ValueColumn(config) {
	        var _this = _super.call(this, config) || this;
	        _this._blankWhenCopy = false;
	        _this._blankWhenExport = false;
	        _this._ignoreDefaultDynamicStyles = false;
	        _this._textInputCase = Types.TextInputCase.NORMAL;
	        _this._button = Types.CellButton.NONE;
	        _this._buttonVisiblility = Types.ButtonVisibility.DEFAULT;
	        _this._editButtonVisibility = Types.ButtonVisibility.DEFAULT;
	        return _this;
	    }
	    ValueColumn.prototype._doDispose = function () {
	        this._popupMenu = null;
	        this._popupMenuName = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ValueColumn.prototype, "numberFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** numberFormat */
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                this._numberFormatter = value ? DecimalFormatter_1.DecimalFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                this._datetimeWriter = value ? DateTimeWriter_1.DateTimeWriter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolFormatter = value ? BooleanFormatter_1.BooleanFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "textFormat", {
	        /** textFormat */
	        get: function () {
	            return this._textFormat;
	        },
	        set: function (value) {
	            if (value != this._textFormat) {
	                this._textFormat = value;
	                this._textFormatter = value ? TextFormatter_1.TextFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "prefix", {
	        /** prefix */
	        get: function () {
	            return this._prefix;
	        },
	        set: function (value) {
	            if (value != this._prefix) {
	                this._prefix = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "suffix", {
	        /** suffix */
	        get: function () {
	            return this._suffix;
	        },
	        set: function (value) {
	            if (value != this._suffix) {
	                this._suffix = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "blankWhenCopy", {
	        /** blankWhenCopy */
	        get: function () {
	            return this._blankWhenCopy;
	        },
	        set: function (value) {
	            if (value != this._blankWhenCopy) {
	                this._blankWhenCopy = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "blankWhenExport", {
	        /** blankWhenExport */
	        get: function () {
	            return this._blankWhenExport;
	        },
	        set: function (value) {
	            if (value != this._blankWhenExport) {
	                this._blankWhenExport = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "ignoreDefaultDynamicStyles", {
	        /** ignoreDefaultDynamicStyles */
	        get: function () {
	            return this._ignoreDefaultDynamicStyles;
	        },
	        set: function (value) {
	            if (value != this._ignoreDefaultDynamicStyles) {
	                this._ignoreDefaultDynamicStyles = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "textInputCase", {
	        /** textInputCase */
	        get: function () {
	            return this._textInputCase;
	        },
	        set: function (value) {
	            if (value != this._textInputCase) {
	                this._textInputCase = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            return this._styleName;
	        },
	        set: function (value) {
	            if (value != this._styleName) {
	                this._styleName = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "styleCallback", {
	        /** styleCallback */
	        get: function () {
	            return this._styleCallback;
	        },
	        set: function (value) {
	            if (value != this._styleCallback) {
	                this._styleCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "renderer", {
	        /** renderer */
	        get: function () {
	            return this._renderer;
	        },
	        set: function (value) {
	            // if (value !== this._renderer) {
	            this._renderer = value;
	            this.grid && this.grid["$_rendererChanged"](this["_layout"]);
	            this._changed();
	            // }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "editor", {
	        /** editor */
	        get: function () {
	            return this._editor;
	        },
	        set: function (value) {
	            this._editor = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "button", {
	        /** button */
	        get: function () {
	            return this._button;
	        },
	        set: function (value) {
	            if (value != this._button) {
	                this._button = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "buttonVisiblility", {
	        /** buttonVisiblility */
	        get: function () {
	            return this._buttonVisiblility;
	        },
	        set: function (value) {
	            if (value != this._buttonVisiblility) {
	                this._buttonVisiblility = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "editButtonVisibility", {
	        /** editButtonVisibility */
	        get: function () {
	            return this._editButtonVisibility;
	        },
	        set: function (value) {
	            if (value != this._editButtonVisibility) {
	                this._editButtonVisibility = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "textFormatter", {
	        /** textFormatter */
	        get: function () {
	            return this._textFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "numberFormatter", {
	        /** numberFormatter */
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "datetimeWriter", {
	        /** datetimeWriter */
	        get: function () {
	            return this._datetimeWriter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "boolFormatter", {
	        /** boolFormatter */
	        get: function () {
	            return this._boolFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "popupMenu", {
	        /** popupMenu */
	        get: function () {
	            return this._popupMenu;
	        },
	        set: function (value) {
	            if (value != this._popupMenu) {
	                this._popupMenu = value;
	                if (typeof value === "string") {
	                    this._popupMenuName = value;
	                }
	                else {
	                    this._popupMenuName = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ValueColumn.prototype, "popupMenuName", {
	        get: function () {
	            if (this._popupMenuName) {
	                return this._popupMenuName;
	            }
	            else if (this._popupMenu) {
	                this._popupMenuName = "$$_column_popup_menu" + this["$_hash"];
	                this.grid.addPopupMenu(this._popupMenuName, this._popupMenu, true);
	                return this.grid && this._popupMenuName;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ValueColumn.prototype.getCellStyle = function (model) {
	        return (this._styleCallback && this._styleCallback(this.grid, model));
	    };
	    ValueColumn.prototype.affix = function (s) {
	        if (this._prefix)
	            s = this._prefix + s;
	        if (this._suffix)
	            s += this._suffix;
	        return s;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ValueColumn.prototype._prepareLayout = function (grid, layout) {
	        _super.prototype._prepareLayout.call(this, grid, layout);
	    };
	    return ValueColumn;
	}(GridColumn));
	exports.ValueColumn = ValueColumn;
	var DataColumn = /** @class */ (function (_super) {
	    __extends(DataColumn, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataColumn(config) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._fieldIndex = -1;
	        _this._editable = true;
	        _this._readOnly = false;
	        _this._breakMergeOnEmpty = false;
	        _this._equalBlank = false;
	        _this._values = null;
	        _this._labels = null;
	        _this._lookupDisplay = false;
	        _this._lookupSource = null;
	        _this._lookupKeyFields = null;
	        _this._lookupKeyFieldIds = null;
	        _this._mergeGrouped = false;
	        // add flowmt
	        _this._sortable = true;
	        _this._sortOrder = -1;
	        // add jun
	        _this._filterable = true;
	        _this._autoFilter = false;
	        // lookup
	        _this._lookupData = null;
	        _this._required = false;
	        _this._requiredLevel = Types.ValidationLevel.ERROR;
	        _this._validations = new Validation.EditValidationCollection();
	        _this._errorLevel = Types.ValidationLevel.IGNORE;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._dataIndex = -1;
	        _this._baseIndex = -1;
	        _this._valueType = Types.ValueType.TEXT;
	        _this._groupLevel = -1;
	        _this._labelFieldIndex = -1;
	        _this._filters = new ColumnFilter_1.ColumnFilterCollection(_this);
	        _this._filters.addListener(_this);
	        config && _this.assignFrom(config);
	        return _this;
	    }
	    DataColumn.prototype._doDispose = function () {
	        this._filters && this._filters.dispose();
	        this._filters = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DataColumn.prototype, "fieldIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** fieldIndex */
	        get: function () {
	            return this._fieldIndex;
	        },
	        set: function (value) {
	            value = Math.max(-1, value);
	            if (value != this._fieldIndex) {
	                this._fieldIndex = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "fieldName", {
	        /** fieldName */
	        get: function () {
	            return this._fieldName;
	        },
	        set: function (value) {
	            if (value != this._fieldName) {
	                this._fieldName = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "editable", {
	        /** editable */
	        get: function () {
	            return this._editable;
	        },
	        set: function (value) {
	            if (value != this._editable) {
	                this._editable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "readOnly", {
	        /** readOnly */
	        get: function () {
	            return this._readOnly;
	        },
	        set: function (value) {
	            if (value != this._readOnly) {
	                this._readOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "nanText", {
	        /** nanText */
	        get: function () {
	            return this._nanText;
	        },
	        set: function (value) {
	            if (value != this._nanText) {
	                this._nanText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "zeroText", {
	        /** zeroText */
	        get: function () {
	            return this._zeroText;
	        },
	        set: function (value) {
	            if (value != this._zeroText) {
	                this._zeroText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "defaultValue", {
	        /** defaultValue */
	        get: function () {
	            return this._defaultValue;
	        },
	        set: function (value) {
	            this._defaultValue = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "valueSeparator", {
	        /** valueSeparator */
	        get: function () {
	            return this._valueSeparator;
	        },
	        set: function (value) {
	            if (value != this._valueSeparator) {
	                this._valueSeparator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "mergeRule", {
	        /** mergeRule */
	        get: function () {
	            return this._mergeRule;
	        },
	        set: function (value) {
	            if (value != this._mergeRule) {
	                this._mergeRule = value;
	                this._mergeRuleObj = value ? ColumnMerge.ColumnMergeRule.createRule(value) : null;
	                this._layoutChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "breakMergeOnEmpty", {
	        /** breakMergeOnEmpty */
	        get: function () {
	            return this._breakMergeOnEmpty;
	        },
	        set: function (value) {
	            if (value != this._breakMergeOnEmpty) {
	                this._breakMergeOnEmpty = value;
	                this._layoutChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "equalBlank", {
	        /** equalBlank */
	        get: function () {
	            return this._equalBlank;
	        },
	        set: function (value) {
	            if (value != this._equalBlank) {
	                this._equalBlank = value;
	                this._layoutChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "equalBlankExpression", {
	        /** equalBlankExpression */
	        get: function () {
	            return this._equalBlankExpression;
	        },
	        set: function (value) {
	            if (value != this._equalBlankExpression) {
	                this._equalBlankExpression = value;
	                this._equalBlankNode = value ? Expression.ExpressionParser.Default.parse(value, null) : undefined;
	                this._layoutChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "excelFormat", {
	        /** excelFormat */
	        get: function () {
	            return this._excelFormat;
	        },
	        set: function (value) {
	            if (value != this._excelFormat) {
	                this._excelFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "excelFormulaStatement", {
	        /** excelFormulaStatement */
	        get: function () {
	            return this._excelFormulaStatement;
	        },
	        set: function (value) {
	            if (value != this._excelFormulaStatement) {
	                this._excelFormulaStatement = value;
	                if (value) {
	                    if (this._excelFormulaExprStatement) {
	                        this._excelFormulaExprStatement.source = value;
	                    }
	                    else {
	                        this._excelFormulaExprStatement = new ExpressionStatement_1.ExpressionStatement(value);
	                    }
	                }
	                else {
	                    this._excelFormulaExprStatement = null;
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "dataIndex", {
	        /** dataIndex */
	        get: function () {
	            return this._dataIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "baseIndex", {
	        /** baseIndex */
	        get: function () {
	            return this._baseIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "valueType", {
	        /** valueType */
	        get: function () {
	            return this._valueType;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "groupLevel", {
	        /** groupLevel */
	        get: function () {
	            return this._groupLevel;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "values", {
	        /** values */
	        get: function () {
	            return this._values;
	        },
	        set: function (value) {
	            if (value != this._values) {
	                this._values = value && value.slice();
	                this._lookupMap = null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "labels", {
	        /** labels */
	        get: function () {
	            return this._labels;
	        },
	        set: function (value) {
	            if (value != this._labels) {
	                this._labels = value && value.slice();
	                this._lookupMap = null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "lookupDisplay", {
	        /** lookupDisplay */
	        get: function () {
	            return this._lookupDisplay;
	        },
	        set: function (value) {
	            if (this._lookupDisplay != value) {
	                this._lookupDisplay = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "lookupSource", {
	        /** lookupSource */
	        get: function () {
	            return this._lookupSource;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "lookupSourceId", {
	        /** lookupSourceId */
	        get: function () {
	            return this._lookupSourceId;
	        },
	        set: function (value) {
	            if (this._lookupSourceId != value) {
	                this._lookupSourceId = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "lookupKeyFields", {
	        /** lookupKeyFields */
	        get: function () {
	            return this._lookupKeyFields;
	        },
	        set: function (value) {
	            if (value != this._lookupKeyFields) {
	                this._lookupKeyFields = Utils_1.Utils.makeArray(value).slice();
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "lookupKeyFieldIds", {
	        /** lookupKeyFieldIds */
	        get: function () {
	            return this._lookupKeyFieldIds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "labelField", {
	        /** labelField */
	        get: function () {
	            return this._labelField;
	        },
	        set: function (value) {
	            if (this._labelField != value) {
	                this._labelField = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "textOfInvalid", {
	        /** textOfInvalid */
	        get: function () {
	            return this._textOfInvalid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "textOfInValid", {
	        set: function (value) {
	            if (this._textOfInvalid != value) {
	                this._textOfInvalid = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "labelFieldIndex", {
	        /** labelFieldIndex */
	        get: function () {
	            return this._labelFieldIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "displayCallback", {
	        /** displayCallback */
	        get: function () {
	            return this._displayCallback;
	        },
	        set: function (value) {
	            if (this._displayCallback !== value) {
	                this._displayCallback = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "displayRegExp", {
	        /** displayRegExp */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "displayReplace", {
	        /** displayReplace */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "mergeGrouped", {
	        /** mergedGrouped */
	        get: function () {
	            return this._mergeGrouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "sortable", {
	        /** sortable */
	        get: function () {
	            return this._sortable;
	        },
	        set: function (value) {
	            if (value != this._sortable) {
	                this._sortable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "sortOrder", {
	        /** sortOrder */
	        get: function () {
	            return this._sortOrder;
	        },
	        set: function (value) {
	            this._sortOrder = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "sortDirection", {
	        /** sortDirection */
	        get: function () {
	            return this._sortDirection;
	        },
	        set: function (value) {
	            this._sortDirection = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "filterable", {
	        /** filterable */
	        get: function () {
	            return this._filterable;
	        },
	        set: function (value) {
	            if (value != this._filterable) {
	                this._filterable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "autoFilter", {
	        /** autoFilter */
	        get: function () {
	            return this._autoFilter;
	        },
	        set: function (value) {
	            this._autoFilter = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "filters", {
	        /** filters */
	        get: function () {
	            return this._filters;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "required", {
	        /** required */
	        get: function () {
	            return this._required;
	        },
	        set: function (value) {
	            if (value != this._required) {
	                this._required = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "requiredMessage", {
	        /** requiredMessage */
	        get: function () {
	            return this._requiredMessage;
	        },
	        set: function (value) {
	            if (value != this._requiredMessage) {
	                this._requiredMessage = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "requiredLevel", {
	        /** requiredLevel */
	        get: function () {
	            return this._requiredLevel;
	        },
	        set: function (value) {
	            if (value != this._requiredLevel) {
	                this._requiredLevel = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "validations", {
	        /** validations */
	        get: function () {
	            return this._validations;
	        },
	        set: function (value) {
	            this._validations.assign(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "error", {
	        /** error */
	        get: function () {
	            return this._error;
	        },
	        set: function (value) {
	            if (value = this._error) {
	                this._error = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataColumn.prototype, "errorLevel", {
	        /** errorLevel */
	        get: function () {
	            return this._errorLevel;
	        },
	        set: function (value) {
	            if (value = this._errorLevel) {
	                this._errorLevel = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DataColumn.prototype.getField = function () {
	        var f = this._dataIndex;
	        if (f >= 0) {
	            var ds = this.grid.dataSource;
	            if (ds) {
	                return ds.getField(f);
	            }
	        }
	        return null;
	    };
	    /* setLookupData douzone 요구사항 */
	    // 서버에서 가져온 코드 data를 lookup으로 만들기위해서 사용한다.
	    // 1 [{code:"code", text:"text"}...] 형태
	    // 1.1 [{value:"value", label:"label"}] 형태. code, text, value, label의 경우 기본
	    // 2 {valus:valuesName, label:labelsName, list:[1 또는 1.1 ....]]}
	    // 
	    DataColumn.prototype.setLookupData = function (value) {
	        var valueProp, labelProp, data, code;
	        var datas = {};
	        this._lookupData = value;
	        if (value) {
	            if (Utils_1.Utils.isArray(value)) {
	                datas["list"] = value;
	            }
	            else {
	                datas = value;
	            }
	            this._labels = [];
	            this._values = [];
	            this._lookupMap = null;
	            valueProp = datas.hasOwnProperty("value") ? datas["value"] : "value";
	            labelProp = datas.hasOwnProperty("label") ? datas["label"] : "label";
	            for (var i = 0, cnt = datas["list"].length; i < cnt; i++) {
	                data = datas["list"][i];
	                code = data[valueProp] != null ? data[valueProp] : data["code"];
	                code != null && this._values.push(data[valueProp] != null ? data[valueProp] : data["code"]);
	                code != null && this._labels.push(data[labelProp] != null ? data[labelProp] : data["text"] != null ? data["text"] : code);
	            }
	        }
	        else {
	            this._labels = null;
	            this._values = null;
	            this._lookupMap = null;
	        }
	        this._changed();
	    };
	    DataColumn.prototype.getLookupLabel = function (value) {
	        if (!this._lookupMap) {
	            var lookupValues = this._values;
	            var lookupLabels = this._labels;
	            if (lookupValues && lookupValues.length > 0) {
	                this._lookupMap = {};
	                for (var i = 0; i < lookupValues.length; i++) {
	                    if (lookupLabels && lookupLabels.length > i) {
	                        this._lookupMap[lookupValues[i]] = lookupLabels[i];
	                    }
	                    else {
	                        this._lookupMap[lookupValues[i]] = lookupValues[i];
	                    }
	                }
	            }
	        }
	        var label;
	        if (value && this._valueSeparator) {
	            var values = value.split(this._valueSeparator);
	            var labels = [];
	            for (var i = 0, cnt = values.length; i < cnt; i++) {
	                labels.push(this._lookupMap && this._lookupMap[values[i]] ? this._lookupMap[values[i]] : values[i]);
	            }
	            if (labels.length <= 0) {
	                return "";
	            }
	            label = labels.join(this._valueSeparator);
	        }
	        else {
	            label = this._lookupMap ? this._lookupMap[value] : undefined;
	        }
	        return label ? label : this.textOfInvalid != null ? this.textOfInvalid : value;
	    };
	    DataColumn.prototype.getLookupIndex = function (value) {
	        if (this._values && this._values.length > 0) {
	            for (var i = 0, cnt = this._values.length; i < cnt; i++) {
	                if (this._values[i] == value) {
	                    return i;
	                }
	            }
	        }
	        return -1;
	    };
	    DataColumn.prototype.getLookupIndices = function (value) {
	        var indices = [];
	        if (value && this._values && this._values.length > 0) {
	            var values = Utils_1.Utils.isArray(value) ? value : String(value).split(this._valueSeparator);
	            for (var i = 0, cnt = values.length; i < cnt; i++) {
	                if (this._values.indexOf(values[i]) >= 0) {
	                    indices.push(this._values.indexOf(values[i]));
	                }
	            }
	        }
	        return indices;
	    };
	    DataColumn.prototype.getLookupValue = function (index) {
	        if (this._values && this._values.length > 0) {
	            return this._values[index];
	        }
	        return undefined;
	    };
	    DataColumn.prototype.getLookupValues = function (indices) {
	        var ret = [];
	        if (this._values && this._values.length > 0) {
	            for (var i = 0, cnt = indices.length; i < cnt; i++) {
	                if (indices[i] >= 0 && indices[i] < this._values.length) {
	                    ret.push(this._values[indices[i]]);
	                }
	            }
	        }
	        return ret;
	    };
	    DataColumn.prototype.getSourceValue = function (label) {
	        var lookupValues = this._values;
	        var lookupLabels = this._labels;
	        if (lookupLabels && lookupValues) {
	            var i = lookupLabels.indexOf(label);
	            if (i >= 0 && lookupValues.length > i) {
	                return lookupValues[i];
	            }
	            i = lookupValues.indexOf(label);
	            if (i >= 0) {
	                return lookupValues[i];
	            }
	        }
	        return undefined;
	    };
	    DataColumn.prototype.getSourceValues = function (labels) {
	        var lookupValues = this._values;
	        var lookupLabels = this._labels;
	        if (lookupLabels && lookupValues) {
	            var idx = void 0;
	            var values = [];
	            var vs = this._valueSeparator;
	            labels = Utils_1.Utils.isArray(labels) ? labels : vs && labels ? String(labels).split(vs) : Utils_1.Utils.makeArray(labels);
	            for (var i = 0, cnt = labels.length; i < cnt; i++) {
	                idx = lookupLabels.indexOf(labels[i]);
	                if (idx >= 0 && lookupValues.length > idx) {
	                    values.push(lookupValues[idx]);
	                }
	                else {
	                    values.push(labels[i]);
	                }
	            }
	            if (values.length > 0 && vs) {
	                return values.join(vs);
	            }
	            else if (values.length > 0) {
	                return values.join();
	            }
	        }
	        return undefined;
	    };
	    /* Filters */
	    DataColumn.prototype.clearFilters = function () {
	        this.setFilters(null);
	    };
	    DataColumn.prototype.addFilters = function (filters, overwrite) {
	        if (overwrite === void 0) { overwrite = false; }
	        if (filters) {
	            var grid = this.grid;
	            if (!grid || grid.canFiltering()) {
	                this._filters.addAll(Utils_1.Utils.makeArray(filters), overwrite);
	            }
	        }
	    };
	    DataColumn.prototype.removeFilters = function (filterNames) {
	        if (filterNames) {
	            var grid = this.grid;
	            if (!grid || grid.canFiltering()) {
	                this._filters.removeItems(Utils_1.Utils.makeArray(filterNames));
	            }
	        }
	    };
	    DataColumn.prototype.activateFilters = function (filterNames, active) {
	        if (filterNames) {
	            var grid = this.grid;
	            if (!grid || grid.canFiltering()) {
	                this._filters.activateItems(Utils_1.Utils.makeArray(filterNames), active);
	            }
	        }
	    };
	    DataColumn.prototype.activateAllFilters = function (active) {
	        var grid = this.grid;
	        if (!grid || grid.canFiltering()) {
	            this._filters.activateAll(active);
	        }
	    };
	    DataColumn.prototype.hideColumnFilters = function (filterNames, hide) {
	        this._filters.hideFilters(Utils_1.Utils.makeArray(filterNames), hide);
	    };
	    DataColumn.prototype.hideAllColumnFilters = function (hide) {
	        this._filters.hideAllFilters(hide);
	    };
	    DataColumn.prototype.toggleFilters = function (filterNames) {
	        if (filterNames) {
	            var grid = this.grid;
	            if (!grid || grid.canFiltering()) {
	                this._filters.toggleItems(Utils_1.Utils.makeArray(filterNames));
	            }
	        }
	    };
	    DataColumn.prototype.toggleAllFilters = function () {
	        var grid = this.grid;
	        if (!grid || grid.canFiltering()) {
	            this._filters.toggleAll();
	        }
	    };
	    DataColumn.prototype.getFilter = function (filterName) {
	        var index = this._filters.indexOf(filterName);
	        return this._filters.getItem(index);
	    };
	    DataColumn.prototype.getActiveFilters = function (active) {
	        return this._filters.getActiveItems(active);
	    };
	    DataColumn.prototype.getFilters = function () {
	        return this._filters.items;
	    };
	    Object.defineProperty(DataColumn.prototype, "hasFilters", {
	        get: function () {
	            return this._autoFilter || this._filters.count > 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DataColumn.prototype.isFiltered = function () {
	        return this._filters.activeCount > 0;
	    };
	    DataColumn.prototype.setFilters = function (value) {
	        var grid = this.grid;
	        if (!grid || grid.canFiltering()) {
	            this._filters.assignFrom(value);
	        }
	    };
	    DataColumn.prototype.onColumnFilterChanged = function (filterCollection, filter) {
	        var grid = this.grid;
	        grid && grid.columnFilterChanged(filterCollection, filter);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataColumn.prototype._prepareLayout = function (grid, layout) {
	        _super.prototype._prepareLayout.call(this, grid, layout);
	    };
	    DataColumn.prototype._resetIndices = function (grid) {
	        this._dataIndex = -1;
	        this._baseIndex = -1;
	        //this._labelFieldIndex = -1;
	        //this._objectKey = this._objectCallback = undefined;
	        var ds = grid.dataSource;
	        if (ds) {
	            if (this._fieldName) {
	                this._dataIndex = ds.getFieldIndex(this._fieldName);
	            }
	            else {
	                this._dataIndex = this._fieldIndex;
	            }
	            if (this._dataIndex >= 0) {
	                var field = ds.getField(this._dataIndex);
	                this._baseIndex = ds.getBaseField(this._dataIndex);
	                this._valueType = ds.getValueType(this._dataIndex);
	                // this._objectKey = field._objectKey;
	                // this._objectCallback = field._objectCallback;
	            }
	            // TODO 1.0의 dataColumn.prepare부분을 이쪽에서 임시로 처리하고 있다.
	            // setColumn등을 이용해서 column의 속성을 변경하는 경우를 대비해야 한다. columnsDirty를 이용해서 처리하는 방식으로 변경필요.
	            // column.dirty의 경우 여러개의 속성을 변경하는 경우 순서에 따라서 변경하지 못하는 경우가 발생한다.
	            this._labelFieldIndex = ds.getFieldIndex(this._labelField);
	            if (this._lookupKeyFields && this._lookupKeyFields.length > 0 && this._lookupSourceId) {
	                var len = this._lookupKeyFields.length;
	                var keyFieldIds = this._lookupKeyFieldIds = new Array(len);
	                for (var i = 0; i < len; i++) {
	                    keyFieldIds[i] = ds.getFieldIndex(this._lookupKeyFields[i]);
	                }
	                this._lookupSource = grid.lookupProvider.getSource(this._lookupSourceId);
	            }
	            else {
	                this._lookupSource = null;
	                this._lookupKeyFieldIds = [];
	            }
	            // this._saveFieldName = this._fieldName;
	            // this._saveLabelField = this._labelField;
	        }
	    };
	    DataColumn.prototype.isWritable = function () {
	        var w = this._editable && !this._readOnly;
	        if (w && this["$_grid"]) {
	            var layout = this.layout;
	            w = !layout["$_fixed"] || !layout["$_rfixed"] || this["$_grid"]["$_fixedColEditable"];
	        }
	        return w;
	    };
	    // canMerge(): boolean {
	    //     return this._mergeGrouped || super.canMerge();
	    // }
	    DataColumn.prototype.assignFrom = function (source) {
	        _super.prototype.assignFrom.call(this, source);
	        // source.values && (this.lookupValues = source.values);
	        // source.labels && (this.lookupLabels = source.labels);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataColumn.prototype.$_setMergeGrouped = function (value) {
	        this._mergeGrouped = value;
	    };
	    DataColumn.prototype.$_setGroupLevel = function (value) {
	        this._groupLevel = value;
	    };
	    DataColumn.prototype._changed = function () {
	        _super.prototype._changed.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DataColumn.CAPITAL_INDEXERS = ["value", "values"];
	    return DataColumn;
	}(ValueColumn));
	exports.DataColumn = DataColumn;
	var SeriesColumn = /** @class */ (function (_super) {
	    __extends(SeriesColumn, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SeriesColumn(config) {
	        var _this = _super.call(this, config) || this;
	        _this._fieldArray = _this._fieldArray || [];
	        _this._fields = _this._fields || [];
	        config && _this.assignFrom(config);
	        return _this;
	    }
	    SeriesColumn.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SeriesColumn.prototype, "fieldNames", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** fieldsNames */
	        get: function () {
	            return this._fieldNames;
	        },
	        set: function (value) {
	            if (value != this._fieldNames) {
	                this._fieldNames = value;
	                this._fieldArray = value ? value.split(",") : [];
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SeriesColumn.prototype, "fields", {
	        /** fields */
	        get: function () {
	            return this._fields;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SeriesColumn.prototype._resetIndices = function (grid) {
	        this._fields = [];
	        var ds = grid.dataSource;
	        if (ds) {
	            for (var i = 0, cnt = this._fieldArray.length; i < cnt; i++) {
	                var fld = this._fieldArray[i];
	                var arr = fld.split("..");
	                if (arr.length > 1) {
	                    var first = ds.getFieldIndex(arr[0]);
	                    var last = ds.getFieldIndex(arr[1]);
	                    if (first >= 0 && last >= 0) {
	                        var f1 = Math.min(first, last);
	                        var f2 = Math.max(first, last);
	                        for (var j = f1; j <= f2; j++) {
	                            this._fields.push(j);
	                        }
	                    }
	                }
	                else {
	                    var j = ds.getFieldIndex(fld);
	                    if (j >= 0) {
	                        this._fields.push(j);
	                    }
	                }
	            }
	        }
	    };
	    return SeriesColumn;
	}(ValueColumn));
	exports.SeriesColumn = SeriesColumn;
	});

	unwrapExports(GridColumn_1);
	var GridColumn_2 = GridColumn_1.ColumnObject;
	var GridColumn_3 = GridColumn_1.ColumnSummaryStyle;
	var GridColumn_4 = GridColumn_1.ColumnSummary;
	var GridColumn_5 = GridColumn_1.ColumnHeaderSummary;
	var GridColumn_6 = GridColumn_1.ColumnHeaderSummaryCollection;
	var GridColumn_7 = GridColumn_1.ColumnHeader;
	var GridColumn_8 = GridColumn_1.ColumnFooter;
	var GridColumn_9 = GridColumn_1.ColumnFooterCollection;
	var GridColumn_10 = GridColumn_1.ColumnStyle;
	var GridColumn_11 = GridColumn_1.GridColumn;
	var GridColumn_12 = GridColumn_1.ValueColumn;
	var GridColumn_13 = GridColumn_1.DataColumn;
	var GridColumn_14 = GridColumn_1.SeriesColumn;

	var SearchOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SearchOptions.ts
	// 2019. 07. 04. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var SearchOptions = /** @class */ (function (_super) {
	    __extends(SearchOptions, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SearchOptions(config) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.allFields = true;
	        _this.caseSensitive = false;
	        _this.partialMatch = false;
	        _this.regularExpression = false;
	        config && _this.extend(config);
	        return _this;
	    }
	    return SearchOptions;
	}(Base_1.Base));
	exports.SearchOptions = SearchOptions;
	var SearchCellOptions = /** @class */ (function (_super) {
	    __extends(SearchCellOptions, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SearchCellOptions(config) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.fields = null;
	        _this.caseSensitive = false;
	        _this.partialMatch = false;
	        _this.regularExpression = false;
	        _this.columns = null;
	        config && _this.extend(config);
	        return _this;
	    }
	    return SearchCellOptions;
	}(Base_1.Base));
	exports.SearchCellOptions = SearchCellOptions;
	});

	unwrapExports(SearchOptions_1);
	var SearchOptions_2 = SearchOptions_1.SearchOptions;
	var SearchOptions_3 = SearchOptions_1.SearchCellOptions;

	var DataEditCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataEditCommand.ts
	// 2019. 11. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var DataEditCommand = /** @class */ (function (_super) {
	    __extends(DataEditCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DataEditCommand(ds) {
	        var _this = _super.call(this) || this;
	        _this._ds = ds;
	        return _this;
	    }
	    DataEditCommand.prototype._doDispose = function () {
	        this._ds = null;
	        this._save = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataEditCommand.prototype.redo = function (redoing) {
	        if (redoing) {
	            this._doRedo(this._ds, this._save);
	        }
	        else {
	            this._save = this._doRun(this._ds);
	        }
	        return this._save.result;
	    };
	    DataEditCommand.prototype.undo = function () {
	        this._doUndo(this._ds, this._save);
	    };
	    DataEditCommand.prototype._cloneRow = function (values) {
	        if (Utils_1.Utils.isArray(values)) {
	            return values.slice();
	        }
	        else if (values) {
	            var v = {};
	            for (var p in values) {
	                v[p] = values[p];
	            }
	            return v;
	        }
	    };
	    DataEditCommand.prototype._cloneValues = function (values) {
	        if (values) {
	            var vals = [];
	            for (var i = 0; i < values.length; i++) {
	                var v = values[i];
	                if (Utils_1.Utils.isArray(v)) {
	                    vals.push(v.slice());
	                }
	                else if (v) {
	                    var v2 = {};
	                    for (var p in v) {
	                        v2[p] = v[p];
	                    }
	                    vals.push(v2);
	                }
	            }
	            return vals;
	        }
	        return null;
	    };
	    return DataEditCommand;
	}(EditCommand_1.EditCommand));
	exports.DataEditCommand = DataEditCommand;
	var LocalDataEditCommand = /** @class */ (function (_super) {
	    __extends(LocalDataEditCommand, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function LocalDataEditCommand(ds) {
	        return _super.call(this, ds) || this;
	    }
	    LocalDataEditCommand.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    return LocalDataEditCommand;
	}(DataEditCommand));
	exports.LocalDataEditCommand = LocalDataEditCommand;
	var LocalDataCommandStack = /** @class */ (function (_super) {
	    __extends(LocalDataCommandStack, _super);
	    function LocalDataCommandStack() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return LocalDataCommandStack;
	}(EditCommand_1.EditCommandStack));
	exports.LocalDataCommandStack = LocalDataCommandStack;
	});

	unwrapExports(DataEditCommand_1);
	var DataEditCommand_2 = DataEditCommand_1.DataEditCommand;
	var DataEditCommand_3 = DataEditCommand_1.LocalDataEditCommand;
	var DataEditCommand_4 = DataEditCommand_1.LocalDataCommandStack;

	var SetValueDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataEditCommand.ts
	// 2019. 11. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var SetValueDataCommand = /** @class */ (function (_super) {
	    __extends(SetValueDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function SetValueDataCommand(ds, row, field, value) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._field = field;
	        _this._value = value;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SetValueDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.row = ds["_keepRow"](this._row);
	        if (save.result = ds["$_setValue"](this._row, this._field, this._value)) {
	            this._newState = ds.getRowState(this._row);
	        }
	        return save;
	    };
	    SetValueDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_setValue"](this._row, this._field, this._value);
	    };
	    SetValueDataCommand.prototype._doUndo = function (ds, save) {
	        ds["_yieldRow"](this._row, save.row);
	        if (save.row.state != this._newState) {
	            ds.fireRowStateChanged(this._row);
	        }
	        ds.fireValueChanged(this._row, this._field);
	    };
	    return SetValueDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.SetValueDataCommand = SetValueDataCommand;
	});

	unwrapExports(SetValueDataCommand_1);
	var SetValueDataCommand_2 = SetValueDataCommand_1.SetValueDataCommand;

	var UpdateRowDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// UpdateRowDataCommand.ts
	// 2019. 11. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var UpdateRowDataCommand = /** @class */ (function (_super) {
	    __extends(UpdateRowDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function UpdateRowDataCommand(ds, row, values, strict) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._values = _this._cloneRow(values);
	        _this._strict = strict;
	        return _this;
	    }
	    UpdateRowDataCommand.prototype._doDispose = function () {
	        this._values = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    UpdateRowDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.row = ds["_keepRow"](this._row);
	        if (save.result = ds["$_updateRow"](this._row, this._values, this._strict)) {
	            this._newState = ds.getRowState(this._row);
	        }
	        return save;
	    };
	    UpdateRowDataCommand.prototype._doRedo = function (ds, save) {
	        //save.row = ds["_keepRow"](this._row);
	        ds["$_updateRow"](this._row, this._values, this._strict);
	    };
	    UpdateRowDataCommand.prototype._doUndo = function (ds, save) {
	        ds["_yieldRow"](this._row, save.row);
	        if (save.row.state != this._newState) {
	            ds.fireRowStateChanged(this._row);
	        }
	        ds.fireRowUpdated(this._row);
	    };
	    return UpdateRowDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.UpdateRowDataCommand = UpdateRowDataCommand;
	});

	unwrapExports(UpdateRowDataCommand_1);
	var UpdateRowDataCommand_2 = UpdateRowDataCommand_1.UpdateRowDataCommand;

	var InsertRowDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// InsertRowDataCommand.ts
	// 2019. 11. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var InsertRowDataCommand = /** @class */ (function (_super) {
	    __extends(InsertRowDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function InsertRowDataCommand(ds, row, values) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._values = values.slice();
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    InsertRowDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.result = ds["$_insertRow"](this._row, this._values);
	        return save;
	    };
	    InsertRowDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_insertRow"](this._row, this._values);
	    };
	    InsertRowDataCommand.prototype._doUndo = function (ds, save) {
	        ds["$_deleteRow"](this._row);
	    };
	    return InsertRowDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.InsertRowDataCommand = InsertRowDataCommand;
	});

	unwrapExports(InsertRowDataCommand_1);
	var InsertRowDataCommand_2 = InsertRowDataCommand_1.InsertRowDataCommand;

	var RemoveRowDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RemoveRowDataCommand.ts
	// 2019. 11. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var RemoveRowDataCommand = /** @class */ (function (_super) {
	    __extends(RemoveRowDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function RemoveRowDataCommand(ds, row) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RemoveRowDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.row = ds["_keepRow"](this._row);
	        save.result = ds["$_deleteRow"](this._row);
	        return save;
	    };
	    RemoveRowDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_deleteRow"](this._row);
	    };
	    RemoveRowDataCommand.prototype._doUndo = function (ds, save) {
	        ds["$_insertRow"](this._row, save.row.values);
	        ds["_yieldStates"](this._row, save.row);
	        ds["_yieldCommandStates"](this._row, save.row.outer);
	    };
	    return RemoveRowDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.RemoveRowDataCommand = RemoveRowDataCommand;
	});

	unwrapExports(RemoveRowDataCommand_1);
	var RemoveRowDataCommand_2 = RemoveRowDataCommand_1.RemoveRowDataCommand;

	var SetRowStateDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SetRowStateDataCommand.ts
	// 2019. 11. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var SetRowStateDataCommand = /** @class */ (function (_super) {
	    __extends(SetRowStateDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function SetRowStateDataCommand(ds, row, state, force) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._state = state;
	        _this._force = force;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SetRowStateDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.row = ds["_keepStates"](this._row);
	        ds["$_setRowState"](this._row, this._state, this._force);
	        return save;
	    };
	    SetRowStateDataCommand.prototype._doRedo = function (ds, save) {
	        //save.row = ds["_keepStates"](this._row);
	        ds["$_setRowState"](this._row, this._state, this._force);
	    };
	    SetRowStateDataCommand.prototype._doUndo = function (ds, save) {
	        ds["_yieldState"](this._row, save.row);
	        if (save.row.state != this._state) {
	            ds.fireRowStateChanged(this._row);
	        }
	    };
	    return SetRowStateDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.SetRowStateDataCommand = SetRowStateDataCommand;
	});

	unwrapExports(SetRowStateDataCommand_1);
	var SetRowStateDataCommand_2 = SetRowStateDataCommand_1.SetRowStateDataCommand;

	var ChageRowStateDataCommand = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ChangeRowStateDataCommand.ts
	// 2019. 11. 14. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var ChangeRowStateDataCommand = /** @class */ (function (_super) {
	    __extends(ChangeRowStateDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ChangeRowStateDataCommand(ds, row, state) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._state = state;
	        return _this;
	    }
	    ChangeRowStateDataCommand.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ChangeRowStateDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.state = ds["_keepState"](this._row);
	        ds["$_changeRowState"](this._row, this._state, true, true, true);
	        return save;
	    };
	    ChangeRowStateDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_changeRowState"](this._row, this._state, true, true, true);
	    };
	    ChangeRowStateDataCommand.prototype._doUndo = function (ds, save) {
	        ds["_yieldState"](this._row, save.state);
	        if (save.state != this._state) {
	            ds.fireRowStateChanged(this._row);
	        }
	    };
	    return ChangeRowStateDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.ChangeRowStateDataCommand = ChangeRowStateDataCommand;
	});

	unwrapExports(ChageRowStateDataCommand);
	var ChageRowStateDataCommand_1 = ChageRowStateDataCommand.ChangeRowStateDataCommand;

	var ClearRowStatesDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ClearRowStatesDataCommand.ts
	// 2019. 11. 13. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var ClearRowStatesDataCommand = /** @class */ (function (_super) {
	    __extends(ClearRowStatesDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ClearRowStatesDataCommand(ds, deleteRows, rowEvents) {
	        var _this = _super.call(this, ds) || this;
	        _this._deleteRows = deleteRows;
	        _this._rowEvents = rowEvents;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ClearRowStatesDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        var rows = save.rows = [];
	        save.orgValues = ds["_keepOrgValues"]();
	        var rslt = ds["$_clearRowStates"](this._deleteRows, this._rowEvents, true);
	        save.rows = rslt.rows; // deleted rows
	        save.states = rslt.states;
	        save.values = rslt.values;
	        return save;
	    };
	    ClearRowStatesDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_clearRowStates"](this._deleteRows, this._rowEvents, false);
	    };
	    ClearRowStatesDataCommand.prototype._doUndo = function (ds, save) {
	        var rows = save.rows;
	        var values = save.values;
	        var states = save.states;
	        if (values) {
	            for (var r = 0; r < rows.length; r++) {
	                ds["$_internalInsertRow"](r, values[r], save.row, true);
	            }
	        }
	        if (states) {
	            for (var r = 0; r < states.length; r++) {
	                if (states[r]) {
	                    ds["_yieldState"](r, states[r]);
	                }
	            }
	        }
	        ds["_yieldOrgValues"](save.rows);
	        // if (rows.length > 0) {
	        //     //ds.fireRowsInserted();
	        // }
	        // if (stateRows.length > 0) {
	        //     ds.fireRowStatesChanged(stateRows);
	        // }
	        if (rows.length > 0) {
	            ds._fireRefresh();
	        }
	    };
	    return ClearRowStatesDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.ClearRowStatesDataCommand = ClearRowStatesDataCommand;
	});

	unwrapExports(ClearRowStatesDataCommand_1);
	var ClearRowStatesDataCommand_2 = ClearRowStatesDataCommand_1.ClearRowStatesDataCommand;

	var UpdateRowsDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// UpdateRowsDataCommand.ts
	// 2019. 11. 14. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var UpdateRowsDataCommand = /** @class */ (function (_super) {
	    __extends(UpdateRowsDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function UpdateRowsDataCommand(ds, row, values, start, count, rowEvents, strict) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._values = _this._cloneValues(values);
	        _this._start = start;
	        _this._count = count;
	        _this._rowEvents = rowEvents;
	        _this._strict = strict;
	        return _this;
	    }
	    UpdateRowsDataCommand.prototype._doDispose = function () {
	        this._values = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    UpdateRowsDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        ds["$_updateRows"](this._row, this._values, this._start, this._count, this._strict, this._rowEvents, save);
	        return save;
	    };
	    UpdateRowsDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_updateRows"](this._row, this._values, this._start, this._count, this._strict, this._rowEvents, null);
	    };
	    UpdateRowsDataCommand.prototype._doUndo = function (ds, save) {
	        var rows = save.rows;
	        if (rows.length < 1)
	            return;
	        var vals = save.values;
	        var states = save.states;
	        var orgVals = save.orgValues;
	        for (var i = 0; i < rows.length; i++) {
	            var r = rows[i];
	            ds["$_restoreRow"](r, vals[i], states[r], orgVals[r]);
	        }
	        ds._fireRefresh();
	    };
	    return UpdateRowsDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.UpdateRowsDataCommand = UpdateRowsDataCommand;
	});

	unwrapExports(UpdateRowsDataCommand_1);
	var UpdateRowsDataCommand_2 = UpdateRowsDataCommand_1.UpdateRowsDataCommand;

	var RemoveRowsDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RemoveRowsDataCommand.ts
	// 2019. 11. 14. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var RemoveRowsDataCommand = /** @class */ (function (_super) {
	    __extends(RemoveRowsDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function RemoveRowsDataCommand(ds, rows, rowEvents) {
	        var _this = _super.call(this, ds) || this;
	        _this._rows = rows.slice();
	        _this._rowEvents = rowEvents;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RemoveRowsDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        ds["$_removeRows"](this._rows, this._rowEvents, save);
	        return save;
	    };
	    RemoveRowsDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_removeRows"](this._rows, this._rowEvents, null);
	    };
	    RemoveRowsDataCommand.prototype._doUndo = function (ds, save) {
	        var rows = save.rows;
	        if (rows.length < 1)
	            return;
	        var deletedRows = save.rows;
	        var rowSaves = save.rowSaves;
	        var statedRows = save.statedRows;
	        var states = save.states;
	        for (var i = 0; i < deletedRows.length; i++) {
	            var r = rows[i];
	            var rowSave = rowSaves[i];
	            ds["$_internalInsertRow"](r, rowSave.values, true);
	            ds["_yieldRow"](r, rowSave);
	        }
	        for (var i = 0; i < statedRows.length; i++) {
	            var r = statedRows[i];
	            ds["_yieldState"](r, states[i]);
	        }
	        ds._fireRefresh();
	    };
	    return RemoveRowsDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.RemoveRowsDataCommand = RemoveRowsDataCommand;
	});

	unwrapExports(RemoveRowsDataCommand_1);
	var RemoveRowsDataCommand_2 = RemoveRowsDataCommand_1.RemoveRowsDataCommand;

	var InsertRowsDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// InsertRowsDataCommand.ts
	// 2019. 11. 14. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var InsertRowsDataCommand = /** @class */ (function (_super) {
	    __extends(InsertRowsDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function InsertRowsDataCommand(ds, row, values, start, count, rowEvents) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._values = _this._cloneValues(values);
	        _this._start = start;
	        _this._count = count;
	        _this._rowEvents = rowEvents;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    InsertRowsDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        ds["$_insertRows"](this._row, this._values, this._start, this._count, this._rowEvents);
	        return save;
	    };
	    InsertRowsDataCommand.prototype._doRedo = function (ds, save) {
	        ds["$_insertRows"](this._row, this._values, this._start, this._count, this._rowEvents);
	    };
	    InsertRowsDataCommand.prototype._doUndo = function (ds, save) {
	        if (!this._rows) {
	            this._rows = [];
	            for (var i = 0; i < this._values.length; i++) {
	                this._rows.push(this._row + i);
	            }
	        }
	        ds["$_removeRows"](this._rows, false, null);
	    };
	    return InsertRowsDataCommand;
	}(DataEditCommand_1.LocalDataEditCommand));
	exports.InsertRowsDataCommand = InsertRowsDataCommand;
	});

	unwrapExports(InsertRowsDataCommand_1);
	var InsertRowsDataCommand_2 = InsertRowsDataCommand_1.InsertRowsDataCommand;

	var LocalDataProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FieldSummary.ts
	// 2019. 07. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	var LocalDataProvider = /** @class */ (function (_super) {
	    __extends(LocalDataProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LocalDataProvider(undoable) {
	        if (undoable === void 0) { undoable = false; }
	        var _this = _super.call(this) || this;
	        _this._points = [];
	        _this._nextPoint = 0;
	        _this._values = [];
	        _this._rowIds = [];
	        _this._rowStates = [];
	        _this._orgValues = null;
	        _this._needRestore = false;
	        _this._deletedCount = 0;
	        _this._nextRowId = 0;
	        _this._hiddenIds = [];
	        if (undoable) {
	            _this._commands = new DataEditCommand_1.LocalDataCommandStack(_this);
	        }
	        return _this;
	    }
	    LocalDataProvider.prototype._doDispose = function () {
	        this._commands = this._commands && this._commands.dispose();
	        this._values = null;
	        this._rowIds = null;
	        this._rowStates = null;
	        this._points = null;
	        this._orgValues = null;
	        this._hiddenIds = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(LocalDataProvider.prototype, "undoable", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** undoable */
	        get: function () {
	            return this._undoable && !!this._commands;
	        },
	        set: function (value) {
	            if (value != this.undoable) {
	                this._undoable = value;
	                this._commands && this._commands.flush();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    LocalDataProvider.prototype.getDataRow = function (rowId) {
	        return this._rowIds.indexOf(rowId);
	    };
	    Object.defineProperty(LocalDataProvider.prototype, "rowCount", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._values.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "isSummarized", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "deletedCount", {
	        get: function () {
	            return this._deletedCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "canUndo", {
	        get: function () {
	            return this._commands && this._commands.canUndo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "canRedo", {
	        get: function () {
	            return this._commands && this._commands.canRedo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "undoing", {
	        get: function () {
	            return this._commands && this._commands.undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalDataProvider.prototype, "redoing", {
	        get: function () {
	            return this._commands && this._commands.redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LocalDataProvider.prototype.getRowId = function (row) {
	        return this._rowIds[row];
	    };
	    LocalDataProvider.prototype.$_internalInsertField = function (index, field) {
	        index = _super.prototype.$_internalInsertField.call(this, index, field);
	        if (index >= 0) {
	            var nRows = this._values.length;
	            for (var r = 0; r < nRows; r++) {
	                var vals = this._values[r];
	                vals && vals.splice(index, 0, undefined);
	            }
	            if (this._orgValues) {
	                nRows = Math.min(nRows, this._orgValues.length);
	                for (var r = 0; r < nRows; r++) {
	                    var vals = this._orgValues[r];
	                    vals && vals.splice(index, 0, undefined);
	                }
	            }
	        }
	        return index;
	    };
	    LocalDataProvider.prototype.$_internalClearFields = function () {
	        _super.prototype.$_internalClearFields.call(this);
	        this.$_clearRows();
	    };
	    LocalDataProvider.prototype.setRowCount = function (newCount, fillDefaults, defaultValues, rowState) {
	        if (fillDefaults === void 0) { fillDefaults = false; }
	        if (defaultValues === void 0) { defaultValues = null; }
	        if (rowState === void 0) { rowState = RowState_1.RowState.NONE; }
	        if (!this._checkClientState())
	            return;
	        var values = this._values;
	        var oldCount = values.length;
	        var count = Math.max(0, newCount);
	        if (count == oldCount) {
	            return;
	        }
	        var ids = this._rowIds;
	        var states = this._rowStates;
	        this.refreshFieldFormats();
	        values.length = ids.length = states.length = count;
	        if (this._orgValues && this._orgValues.length > count) {
	            this._orgValues.length = count;
	        }
	        if (count > oldCount && (fillDefaults || defaultValues)) {
	            var flds = this.fieldCount;
	            var defaults = defaultValues;
	            if (defaults && !(defaults instanceof Array)) {
	                defaults = this.objectToRow(defaults);
	            }
	            if (defaults && defaults.length < 1) {
	                defaults = null;
	            }
	            if (fillDefaults || defaults) {
	                var defCount = defaults ? Math.min(defaults.length, flds) : 0;
	                for (var i = oldCount; i < count; i++) {
	                    var vals = [];
	                    if (fillDefaults) {
	                        for (var j = 0; j < flds; j++) {
	                            var fld = this.getField(j);
	                            vals[j] = fld.defaultValue !== undefined ? fld.defaultValue : fld.nullValue;
	                        }
	                    }
	                    if (defCount > 0) {
	                        for (var j = 0; j < defCount; j++) {
	                            var v = defaults[j];
	                            if (v !== undefined) {
	                                vals[j] = this.getField(j).readValue(v);
	                            }
	                        }
	                    }
	                    values[i] = vals;
	                }
	            }
	        }
	        else if (count < oldCount && this._deletedCount > 0) {
	            for (var i = oldCount - 1; i >= count; i--) {
	                if (states[i] == RowState_1.RowState.DELETED || states[i] == RowState_1.RowState.CREATE_AND_DELETED) {
	                    this._deletedCount--;
	                }
	                states[i] = RowState_1.RowState.NONE;
	            }
	        }
	        rowState = (this.checkStates && rowState) ? rowState : RowState_1.RowState.NONE;
	        for (var i = oldCount; i < count; i++) {
	            states[i] = rowState;
	            ids[i] = this._nextRowId++;
	        }
	        for (var i = this._hiddenIds.length - 1; i >= 0; i--) {
	            var j = this._hiddenIds[i];
	            ids.indexOf(j) < 0 && this._hiddenIds.splice(i, 1);
	        }
	        this.tags.setRowCount(count);
	        this._fireRefresh();
	        this._fireRowCountChanged();
	    };
	    LocalDataProvider.prototype.$_clearRows = function () {
	        this._values.length = 0;
	        this._values = [];
	        this._rowIds.length = 0;
	        this._rowIds = [];
	        this._rowStates.length = 0;
	        this._rowStates = [];
	        this._hiddenIds.length = 0;
	        this._hiddenIds = [];
	        if (this._orgValues) {
	            this._orgValues.length = 0;
	            this._orgValues = [];
	        }
	        else {
	            this._orgValues = null;
	        }
	        this._deletedCount = 0;
	        this.tags.clearRows();
	    };
	    LocalDataProvider.prototype.clearRows = function () {
	        if (!this._checkClientState())
	            return;
	        this.$_clearRows();
	        this._fireRefresh();
	        this._fireRowCountChanged();
	    };
	    LocalDataProvider.prototype.setRows = function (rows, start, count) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (!this._checkClientState())
	            return;
	        if (count == 0)
	            return;
	        this.refreshFieldFormats();
	        this.beginUpdate();
	        try {
	            this.$_clearRows();
	            var checkSt = this.checkStates;
	            var filters = this.filters;
	            var runtime = this.filterRuntime;
	            var len = void 0;
	            if (rows && (len = rows.length) > 0 && start < len) {
	                start = Math.max(0, start);
	                if (count < 0) {
	                    count = len;
	                }
	                else {
	                    count = Math.min(count, len - start);
	                }
	                if (filters) {
	                    this._values.length = this._rowIds.length = this._rowStates.length = count;
	                    filters.prepare(runtime, this);
	                    var end = len;
	                    var r = 0;
	                    var n = 0;
	                    for (var i = start; i < end && r < count; i++) {
	                        var row = rows[i];
	                        if (!(row instanceof Array)) {
	                            row = this.objectToRow(row);
	                        }
	                        if (filters.select(runtime, n++, row)) {
	                            this.$_internalSetRow(r++, row, checkSt);
	                        }
	                    }
	                    this._values.length = this._rowIds.length = this._rowStates.length = r;
	                }
	                else {
	                    var end = Math.min(len, start + count);
	                    if (end > start) {
	                        this._values.length = this._rowIds.length = this._rowStates.length = end - start;
	                        var r = 0;
	                        for (var i = start; i < end; i++) {
	                            var row = rows[i];
	                            if (!(row instanceof Array)) {
	                                row = this.objectToRow(row);
	                            }
	                            this.$_internalSetRow(r++, row, checkSt);
	                        }
	                    }
	                }
	            }
	        }
	        finally {
	            this.endUpdate(false);
	        }
	        this.tags.setRows();
	        this._fireRefresh();
	        this._fireRowCountChanged();
	    };
	    LocalDataProvider.prototype.setXmlRows = function (rows, start, count) {
	        if (count === void 0) { count = -1; }
	        if (!this._checkClientState())
	            return;
	        if (count == 0)
	            return;
	        // rows = DataHelper.xmlToArray(this, rows, start, count);
	        // this.setRows(rows);
	    };
	    LocalDataProvider.prototype.insertRows = function (row, values, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (this.undoable) {
	            this._commands.execute(new InsertRowsDataCommand_1.InsertRowsDataCommand(this, row, values, start, count, rowEvents));
	        }
	        else {
	            this.$_insertRows(row, values, start, count, rowEvents);
	        }
	    };
	    LocalDataProvider.prototype.$_insertRows = function (row, values, start, count, rowEvents) {
	        if (!this._checkClientState())
	            return;
	        if (!values)
	            return;
	        var len = values.length;
	        if (len < 1)
	            return;
	        count = (count < 0) ? len : Math.min(len, count);
	        if (count == 0) {
	            return;
	        }
	        if (row < 0 || row > this._values.length) {
	            throw new DataSource_1.DataSourceError("row is out of bounds:" + row);
	        }
	        this.refreshFieldFormats();
	        start = Math.max(0, start);
	        var end = Math.min(len, start + count);
	        if (rowEvents) {
	            var r = row;
	            for (var i = start; i < end; i++) {
	                var v = values[i];
	                if (!(v instanceof Array)) {
	                    v = this.objectToRow(v);
	                }
	                if (this.fireRowInserting(r, v)) {
	                    this.$_internalInsertRow(r, v, true);
	                    this.fireRowInserted(r);
	                    this._fireRowCountChanged();
	                    r++;
	                }
	            }
	        }
	        else {
	            var r = row;
	            for (var i = start; i < end; i++, r++) {
	                var v = values[i];
	                if (!(v instanceof Array)) {
	                    v = this.objectToRow(v);
	                }
	                this.$_internalInsertRow(r, v, false);
	            }
	            this.tags.insertRows(row, count = end - start);
	            this.fireRowsInserted(row, count);
	            this._fireRowCountChanged();
	        }
	    };
	    LocalDataProvider.prototype.appendRows = function (rows, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this.insertRows(this.rowCount, rows, start, count, rowEvents);
	    };
	    LocalDataProvider.prototype.insertXmlRows = function (row, rows, start, count, rowEvents) {
	        throw new Error("Method not implemented.");
	    };
	    LocalDataProvider.prototype.appendXmlRows = function (rows, start, count, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        this.insertXmlRows(this.rowCount, rows, start, count, rowEvents);
	    };
	    LocalDataProvider.prototype.updateRows = function (row, values, start, count, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (this.undoable) {
	            return this._commands.execute(new UpdateRowsDataCommand_1.UpdateRowsDataCommand(this, row, values, start, count, rowEvents, false));
	        }
	        else {
	            this.$_updateRows(row, values, start, count, false, rowEvents);
	        }
	    };
	    LocalDataProvider.prototype.updateStrictRows = function (row, values, start, count, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (this.undoable) {
	            return this._commands.execute(new UpdateRowsDataCommand_1.UpdateRowsDataCommand(this, row, values, start, count, rowEvents, true));
	        }
	        else {
	            this.$_updateRows(row, values, start, count, true, rowEvents);
	        }
	    };
	    LocalDataProvider.prototype.updateXmlRows = function (row, rows, start, count, rowEvents) {
	        throw new Error("Method not implemented.");
	    };
	    LocalDataProvider.prototype.getValue = function (row, field) {
	        this.$_checkRowIndex(row);
	        this._checkFieldIndex(field);
	        var vals = this._values[row];
	        return vals ? vals[field] : undefined;
	    };
	    LocalDataProvider.prototype.setValue = function (row, field, value) {
	        if (this.undoable) {
	            return this._commands.execute(new SetValueDataCommand_1.SetValueDataCommand(this, row, field, value));
	        }
	        else {
	            return this.$_setValue(row, field, value);
	        }
	    };
	    LocalDataProvider.prototype.$_setValue = function (row, field, value) {
	        if (!this._checkClientState())
	            return false;
	        this.$_checkRowIndex(row);
	        this._checkFieldIndex(field);
	        var fld = this.getField(field);
	        var state = this._rowStates[row];
	        if (!fld.updatable && (state == RowState_1.RowState.NONE || state == RowState_1.RowState.UPDATED)) {
	            return false;
	        }
	        var vals = this._values[row];
	        var newVal = fld.readValue(value);
	        if (vals && fld.equalValues(newVal, vals[field])) {
	            return false;
	        }
	        this.refreshFieldFormat(fld);
	        var oldVals;
	        var needState = this.checkStates && (state == RowState_1.RowState.NONE || !state);
	        if (!vals) {
	            this._values[row] = vals = [];
	        }
	        if (needState && this._orgValues) {
	            oldVals = vals.concat();
	        }
	        vals[field] = newVal;
	        this._internalCalculateValues(vals, row);
	        if (needState) {
	            if (oldVals) {
	                this._orgValues[row] = oldVals;
	            }
	            this.$_changeRowState(row, RowState_1.RowState.UPDATED, true);
	        }
	        else if (this._needRestore) {
	            this.restoreState(row);
	        }
	        this.tags.setValue(row, field);
	        this.fireValueChanged(row, field);
	        return true;
	    };
	    LocalDataProvider.prototype.updateRow = function (row, values) {
	        if (this.undoable) {
	            return this._commands.execute(new UpdateRowDataCommand_1.UpdateRowDataCommand(this, row, values, false));
	        }
	        else {
	            return this.$_updateRow(row, values, false);
	        }
	    };
	    LocalDataProvider.prototype.updateStrictRow = function (row, values) {
	        if (this.undoable) {
	            return this._commands.execute(new UpdateRowDataCommand_1.UpdateRowDataCommand(this, row, values, true));
	        }
	        else {
	            return this.$_updateRow(row, values, true);
	        }
	    };
	    LocalDataProvider.prototype.getRow = function (row) {
	        this.$_checkRowIndex(row);
	        var vals = this._values[row];
	        return vals ? vals.slice() : [];
	    };
	    LocalDataProvider.prototype.getRowObject = function (row) {
	        this.$_checkRowIndex(row);
	        return this.$_getRowObject(row, this.fieldCount);
	    };
	    LocalDataProvider.prototype.getRows = function (startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        var rowCount = this._values.length;
	        var r1 = Math.max(0, startRow);
	        var r2 = endRow < 0 ? rowCount - 1 : Math.min(rowCount - 1, endRow);
	        if (r1 >= rowCount || r2 < r1) {
	            return [];
	        }
	        var cnt = r2 - r1 + 1;
	        var rows = new Array(cnt);
	        for (var i = 0; i < cnt; i++) {
	            rows[i] = this._values[i + r1] || [];
	        }
	        return rows;
	    };
	    LocalDataProvider.prototype.getRowObjects = function (startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        var rowCount = this._values.length;
	        var r1 = Math.max(0, startRow);
	        var r2 = endRow < 0 ? rowCount - 1 : Math.min(rowCount - 1, endRow);
	        if (r1 >= rowCount || r2 < r1) {
	            return [];
	        }
	        var fldCount = this.fieldCount;
	        var cnt = r2 - r1 + 1;
	        var rows = new Array(cnt);
	        for (var i = 0; i < cnt; i++) {
	            rows[i] = this.$_getRowObject(i + r1, fldCount);
	        }
	        return rows;
	    };
	    LocalDataProvider.prototype.getOutputObject = function (options, row) {
	        var obj = this.getRowObject(row);
	        options && this.$_createOutputRows([obj], options);
	        return obj;
	    };
	    LocalDataProvider.prototype.getOutputObjects = function (options, startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        var rows = this.getRowObjects(startRow, endRow);
	        options && this.$_createOutputRows(rows, options, startRow);
	        return rows;
	    };
	    LocalDataProvider.prototype.getColumn = function (field, startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        this._checkFieldIndex(field);
	        var rowCount = this._values.length;
	        endRow = endRow < 0 ? rowCount - 1 : Math.min(rowCount - 1, endRow);
	        startRow = Math.max(0, startRow);
	        if (startRow >= rowCount || endRow < startRow) {
	            return null;
	        }
	        var values = new Array(endRow - startRow + 1);
	        for (var i = startRow; i <= endRow; i++) {
	            var vals = this._values[i];
	            values[i - startRow] = vals && vals[field];
	        }
	        return values;
	    };
	    LocalDataProvider.prototype.hasData = function (row) {
	        return row >= 0 && row < this._values.length && this._values[row] !== undefined;
	    };
	    LocalDataProvider.prototype.insertRow = function (row, values) {
	        if (this.undoable) {
	            return this._commands.execute(new InsertRowDataCommand_1.InsertRowDataCommand(this, row, values));
	        }
	        else {
	            return this.$_insertRow(row, values);
	        }
	    };
	    LocalDataProvider.prototype.$_insertRow = function (row, values, save) {
	        if (save === void 0) { save = undefined; }
	        if (!this._checkClientState())
	            return false;
	        if (row < 0 || row > this._values.length) {
	            throw new DataSource_1.DataSourceError("row is out of bounds:" + row);
	        }
	        this.refreshFieldFormats();
	        if (values && this.fireRowInserting(row, values)) {
	            if (!(values instanceof Array)) {
	                values = this.objectToRow(values);
	            }
	            this.$_internalInsertRow(row, values, true);
	            save && this._yieldStates(row, save);
	            this.fireRowInserted(row);
	            this._fireRowCountChanged();
	            return true;
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.appendRow = function (values) {
	        return this.insertRow(this.rowCount, values);
	    };
	    LocalDataProvider.prototype.removeRow = function (row) {
	        if (this.undoable) {
	            if (this.softDeleting && this.checkStates) {
	                var state = this._rowStates[row];
	                switch (state) {
	                    case RowState_1.RowState.CREATED:
	                        if (!this.deleteCreated) {
	                            return this._commands.execute(new ChageRowStateDataCommand.ChangeRowStateDataCommand(this, row, RowState_1.RowState.CREATE_AND_DELETED));
	                        }
	                        break;
	                    case RowState_1.RowState.DELETED:
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        break;
	                    default:
	                        return this._commands.execute(new ChageRowStateDataCommand.ChangeRowStateDataCommand(this, row, RowState_1.RowState.DELETED));
	                        break;
	                }
	            }
	            return this._commands.execute(new RemoveRowDataCommand_1.RemoveRowDataCommand(this, row));
	        }
	        else {
	            return this.$_removeRow(row);
	        }
	    };
	    LocalDataProvider.prototype.$_removeRow = function (row) {
	        if (!this._checkClientState())
	            return false;
	        this.$_checkRowIndex(row);
	        if (this.softDeleting && this.checkStates) {
	            var state = this._rowStates[row];
	            switch (state) {
	                case RowState_1.RowState.CREATED:
	                    if (this.deleteCreated) {
	                        this.$_deleteRow(row);
	                    }
	                    else {
	                        this.$_changeRowState(row, RowState_1.RowState.CREATE_AND_DELETED, true, true, true);
	                    }
	                    break;
	                case RowState_1.RowState.DELETED:
	                case RowState_1.RowState.CREATE_AND_DELETED:
	                    break;
	                default:
	                    this.$_changeRowState(row, RowState_1.RowState.DELETED, true, true, true);
	                    break;
	            }
	            return true;
	        }
	        else {
	            return this.$_deleteRow(row);
	        }
	    };
	    LocalDataProvider.prototype.removeRows = function (rows, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (this.undoable) {
	            this._commands.execute(new RemoveRowsDataCommand_1.RemoveRowsDataCommand(this, rows, rowEvents));
	        }
	        else {
	            this.$_removeRows(rows, rowEvents, null);
	        }
	    };
	    LocalDataProvider.prototype.$_removeRows = function (rows, rowEvents, save) {
	        if (!this._checkClientState())
	            return;
	        var deleteCreated = this.deleteCreated;
	        var cnt;
	        if (!rows || (cnt = rows.length) < 1) {
	            return;
	        }
	        if (save) {
	            save.rows = [];
	            save.rowSaves = [];
	            save.statedRows = [];
	            save.states = [];
	        }
	        if (this.softDeleting && this.checkStates) {
	            var stateRows = rowEvents ? null : [];
	            for (var i = cnt; i--;) {
	                var row = rows[i];
	                var state = this._rowStates[row];
	                var changed = false;
	                this.$_checkRowIndex(row);
	                switch (state) {
	                    case RowState_1.RowState.CREATED:
	                        if (!deleteCreated) {
	                            if (save) {
	                                save.statedRows.push(row);
	                                save.states.push(state);
	                            }
	                            changed = this.$_changeRowState(row, RowState_1.RowState.CREATE_AND_DELETED, rowEvents, false, true);
	                            rows.splice(i, 1);
	                        }
	                        break;
	                    case RowState_1.RowState.DELETED:
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        rows.splice(i, 1);
	                        break;
	                    default:
	                        if (save) {
	                            save.statedRows.push(row);
	                            save.states.push(state);
	                        }
	                        changed = this.$_changeRowState(row, RowState_1.RowState.DELETED, rowEvents, false, true);
	                        rows.splice(i, 1);
	                        break;
	                }
	                if (stateRows && changed) {
	                    stateRows.push(row);
	                }
	            }
	            if (!rowEvents) {
	                if (stateRows && stateRows.length > 0) {
	                    this.fireRowStatesChanged(stateRows);
	                }
	            }
	        }
	        if ((cnt = rows.length) > 0) {
	            if (cnt > 1) {
	                rows.sort(function (v1, v2) {
	                    return v1 - v2;
	                });
	            }
	            if (save) {
	                for (var i = 0; i < cnt; i++) {
	                    var row = rows[i];
	                    save.rows.push(row);
	                    save.rowSaves.push(this._keepRow(row));
	                }
	            }
	            if (rowEvents) {
	                for (var i = cnt; i--;) {
	                    var row = rows[i];
	                    this.$_checkRowIndex(row);
	                    this.$_deleteRow(row);
	                }
	            }
	            else if (this.fireRowsRemoving(rows)) {
	                for (var i = cnt; i--;) {
	                    var row = rows[i];
	                    var state = this._rowStates[row];
	                    this.$_checkRowIndex(row);
	                    this.$_internalRemoveRow(row);
	                    if (RowState_1.isDeletedState(state)) {
	                        this._deletedCount--;
	                    }
	                }
	                this.tags.removeRows(rows);
	                this.fireRowsRemoved(rows);
	                this._fireRowCountChanged();
	            }
	        }
	    };
	    LocalDataProvider.prototype.moveRow = function (row, newRow) {
	        if (!this._checkClientState())
	            return;
	        if (row == newRow) {
	            return;
	        }
	        this.$_checkRowIndex(row);
	        this.$_checkRowIndex(newRow);
	        if (this.fireRowMoving(row, newRow)) {
	            this.internalMoveRow(row, newRow);
	            this.tags.moveRow(row, newRow);
	            this.fireRowMoved(row, newRow);
	        }
	    };
	    LocalDataProvider.prototype.moveRows = function (row, count, newRow) {
	        if (!this._checkClientState())
	            return;
	        if (count < 1 || row == newRow) {
	            return;
	        }
	        this.$_checkRowIndex(row);
	        this.$_checkRowIndex(newRow);
	        if (this.fireRowsMoving(row, count, newRow)) {
	            this.internalMoveRows(row, count, newRow);
	            this.tags.moveRows(row, count, newRow);
	            this.fireRowsMoved(row, count, newRow);
	        }
	    };
	    LocalDataProvider.prototype.getRowState = function (row) {
	        this.$_checkRowIndex(row);
	        return this._rowStates[row] || RowState_1.RowState.NONE;
	    };
	    LocalDataProvider.prototype.$_checkDeleted = function (oldState, newState) {
	        if (RowState_1.isDeletedState(newState)) {
	            this._deletedCount++;
	        }
	        else if (RowState_1.isDeletedState(oldState) && !RowState_1.isDeletedState(newState)) {
	            this._deletedCount--;
	        }
	    };
	    LocalDataProvider.prototype.setRowState = function (row, state, force) {
	        if (this.undoable) {
	            return this._commands.execute(new SetRowStateDataCommand_1.SetRowStateDataCommand(this, row, state, force));
	        }
	        else {
	            return this.$_setRowState(row, state, force);
	        }
	    };
	    LocalDataProvider.prototype.$_setRowState = function (row, state, force) {
	        if (!this._checkClientState())
	            return;
	        this.$_checkRowIndex(row);
	        if (this._orgValues) {
	            this.$_changeRowStateEx(row, state, true, force, false);
	        }
	        else {
	            this.$_changeRowState(row, state, true, force);
	        }
	    };
	    LocalDataProvider.prototype.setRowStates = function (rows, state, force, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (!this._checkClientState())
	            return;
	        var cnt;
	        if (!rows || (cnt = rows.length) < 1) {
	            return;
	        }
	        if (rowEvents) {
	            for (var i = 0; i < cnt; i++) {
	                var row = rows[i];
	                this.$_checkRowIndex(row);
	                this.$_changeRowStateEx(row, state, true, force, false);
	            }
	        }
	        else {
	            var list = [];
	            var states = this._rowStates;
	            for (var i = 0; i < cnt; i++) {
	                var row = rows[i];
	                var oldState = states[row];
	                this.$_checkRowIndex(row);
	                if (state != oldState) {
	                    states[row] = state;
	                    list.push(row);
	                    this.$_checkDeleted(oldState, state);
	                    if (this._orgValues) {
	                        this.prepareOrgValues(row, oldState, state);
	                    }
	                }
	            }
	            if (list.length > 0) {
	                this.fireRowStatesChanged(list);
	            }
	        }
	    };
	    LocalDataProvider.prototype.clearRowStates = function (deleteRows, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (this.undoable) {
	            this._commands.execute(new ClearRowStatesDataCommand_1.ClearRowStatesDataCommand(this, deleteRows, rowEvents));
	        }
	        else {
	            this.$_clearRowStates(deleteRows, rowEvents);
	        }
	    };
	    LocalDataProvider.prototype.$_clearRowStates = function (deleteRows, rowEvents, save) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        if (save === void 0) { save = false; }
	        if (!this._checkClientState())
	            return;
	        var rows = [];
	        var states = save ? [] : null;
	        var values = save ? [] : null;
	        for (var i = this._rowStates.length; i--;) {
	            var state = this._rowStates[i];
	            states && (states[i] = state);
	            values && (values[i] = null);
	            switch (state) {
	                case RowState_1.RowState.CREATE_AND_DELETED:
	                case RowState_1.RowState.DELETED:
	                    if (deleteRows) {
	                        if (rowEvents) {
	                            this.$_deleteRow(i);
	                        }
	                        else {
	                            this.$_internalRemoveRow(i);
	                            this.tags.removeRow(i);
	                            this._deletedCount--;
	                        }
	                        rows.push(i);
	                        values && (values[i] = this._keepRow[i]);
	                    }
	                    else {
	                        this.$_changeRowState(i, RowState_1.RowState.NONE, rowEvents);
	                        this._deletedCount--;
	                    }
	                    break;
	                default:
	                    this.$_changeRowState(i, RowState_1.RowState.NONE, rowEvents);
	                    break;
	            }
	        }
	        this.$_resetOrgValues();
	        if (!rowEvents) {
	            if (rows.length > 0) {
	                this.fireRowsRemoved(rows);
	                this._fireRowCountChanged();
	            }
	            this.fireRowStatesCleared();
	        }
	        return save ? { rows: rows, states: states, values: values } : undefined;
	    };
	    LocalDataProvider.prototype.$_restoreStates = function (rows, states) {
	        this.fireRowStatesChanged(rows);
	    };
	    LocalDataProvider.prototype.getStateRows = function (state) {
	        var rows = [];
	        if (state) {
	            for (var i = 0, cnt = this._rowStates.length; i < cnt; i++) {
	                var st = this._rowStates[i];
	                if (st == state) {
	                    rows.push(i);
	                }
	            }
	        }
	        return rows;
	    };
	    LocalDataProvider.prototype.getAllStateRows = function () {
	        var rows = {};
	        var created = rows["created"] = [];
	        var updated = rows["updated"] = [];
	        var deleted = rows["deleted"] = [];
	        var cdeleted = rows["createAndDeleted"] = [];
	        for (var i = 0, cnt = this._rowStates.length; i < cnt; i++) {
	            var st = this._rowStates[i];
	            if (st === RowState_1.RowState.CREATED) {
	                created.push(i);
	            }
	            else if (st === RowState_1.RowState.UPDATED) {
	                updated.push(i);
	            }
	            else if (st === RowState_1.RowState.DELETED) {
	                deleted.push(i);
	            }
	            else if (st === RowState_1.RowState.CREATE_AND_DELETED) {
	                cdeleted.push(i);
	            }
	        }
	        return rows;
	    };
	    LocalDataProvider.prototype.getRowStateCount = function (states) {
	        var len = states ? states.length : 0;
	        var cnt = this._rowStates.length;
	        var count = 0;
	        if (len && cnt) {
	            if (len > 1) {
	                for (var i = 0; i < cnt; i++) {
	                    var state = this._rowStates[i];
	                    if (states.indexOf(state) >= 0) {
	                        count++;
	                    }
	                }
	            }
	            else {
	                var state = states[0];
	                for (var i = 0; i < cnt; i++) {
	                    if (this._rowStates[i] === state) {
	                        count++;
	                    }
	                }
	            }
	        }
	        return count;
	    };
	    LocalDataProvider.prototype.$_restoreState = function (row) {
	        var state = this._rowStates[row];
	        if (state === RowState_1.RowState.UPDATED) {
	            var orgs = this._orgValues[row];
	            if (orgs) {
	                var vals = this._values[row];
	                var strict = this.strictRestore;
	                for (var i = 0, cnt = this.fieldCount; i < cnt; i++) {
	                    var v1 = vals.length > i ? vals[i] : undefined;
	                    var v2 = orgs.length > i ? orgs[i] : undefined;
	                    var field = this.getField(i);
	                    if (strict) {
	                        if (!field.equalValues(v1, v2)) {
	                            return false;
	                        }
	                    }
	                    else {
	                        if (!field.sameValues(v1, v2)) {
	                            return false;
	                        }
	                    }
	                }
	                this._rowStates[row] = RowState_1.RowState.NONE;
	                return true;
	            }
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.restoreUpdatedStates = function (rows) {
	        if (!this._orgValues)
	            return;
	        if (!this._checkClientState())
	            return;
	        var list = [];
	        if (rows != null) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var r = rows[i];
	                if (r >= 0 && r < this._values.length) {
	                    if (this.$_restoreState(r)) {
	                        list.push(r);
	                    }
	                }
	            }
	        }
	        else {
	            for (var i = 0, cnt = this._values.length; i < cnt; i++) {
	                if (this.$_restoreState(i)) {
	                    list.push(i);
	                }
	            }
	        }
	        if (list.length > 0) {
	            this.fireRowStatesChanged(list);
	        }
	    };
	    LocalDataProvider.prototype.$_restoreUpdatedRow = function (row) {
	        var state = this._rowStates[row];
	        if (state === RowState_1.RowState.UPDATED) {
	            var orgs = this._orgValues[row];
	            if (orgs) {
	                var vals = this._values[row];
	                for (var i = 0, cnt = Math.min(orgs.length, this.fieldCount); i < cnt; i++) {
	                    vals[i] = orgs[i];
	                }
	                this._rowStates[row] = RowState_1.RowState.NONE;
	                return true;
	            }
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.$_restoreRow = function (row, values, state, orgValues) {
	        this._values[row] = values.slice();
	        this._rowStates[row] = state;
	        if (this._orgValues) {
	            this._orgValues[row] = orgValues && orgValues.slice();
	        }
	    };
	    LocalDataProvider.prototype.restoreUpdatedRows = function (rows) {
	        if (!this._orgValues)
	            return;
	        if (!this._checkClientState())
	            return;
	        var list = [];
	        if (rows != null) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var r = rows[i];
	                if (r >= 0 && r < this._values.length) {
	                    if (this.$_restoreUpdatedRow(r)) {
	                        list.push(r);
	                    }
	                }
	            }
	        }
	        else {
	            for (var i = 0, cnt = this._values.length; i < cnt; i++) {
	                if (this.$_restoreUpdatedRow(i)) {
	                    list.push(i);
	                }
	            }
	        }
	        if (list.length > 0) {
	            this.fireRestoreRows(list);
	            this.fireRowStatesChanged(list);
	        }
	    };
	    LocalDataProvider.prototype.getUpdatedCells = function (rows) {
	        var mode = this.restoreMode;
	        if (!this._orgValues || !(mode == RestoreMode_1.RestoreMode.AUTO || mode == RestoreMode_1.RestoreMode.EXPLICIT)) {
	            return null;
	        }
	        if (rows == null) {
	            rows = this.getStateRows(RowState_1.RowState.UPDATED);
	        }
	        if (rows == null) {
	            return null;
	        }
	        var ret = [];
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var row = rows[i];
	            var orgs = row >= 0 && this._orgValues && row < this._orgValues.length ? this._orgValues[row] : null;
	            if (orgs) {
	                var vals = this._values[row];
	                var strict = this.strictRestore;
	                var updateCells = [];
	                for (var j = 0, fcnt = this.fieldCount; j < fcnt; j++) {
	                    var v1 = vals.length > j ? vals[j] : undefined;
	                    var v2 = orgs.length > j ? orgs[j] : undefined;
	                    var field = this.getField(j);
	                    if (field.calculated)
	                        continue;
	                    if (strict) {
	                        if (!field.equalValues(v1, v2)) {
	                            updateCells.push({
	                                fieldName: this.getOrgFieldName(j),
	                                oldValue: orgs[j],
	                                newValue: vals[j]
	                            });
	                        }
	                    }
	                    else {
	                        if (!field.sameValues(v1, v2)) {
	                            updateCells.push({
	                                fieldName: this.getOrgFieldName(j),
	                                oldValue: orgs[j],
	                                newValue: vals[j]
	                            });
	                        }
	                    }
	                }
	                if (updateCells.length > 0) {
	                    ret.push({
	                        __rowId: row,
	                        updatedCells: updateCells
	                    });
	                }
	            }
	        }
	        return ret;
	    };
	    LocalDataProvider.prototype._doRestoreModeChanged = function () {
	        this.$_resetOrgValues();
	    };
	    LocalDataProvider.prototype.findRow = function (fields, values) {
	        if (fields.length < 1 || values.length < fields.length) {
	            return -1;
	        }
	        var flds = [];
	        var vals = [];
	        var rows = this._values;
	        for (var i = 0, cnt_1 = fields.length; i < cnt_1; i++) {
	            var c = void 0;
	            if (typeof fields[i] === "string") {
	                c = this.getFieldIndex(fields[i]);
	            }
	            else {
	                c = Number(fields[i]);
	            }
	            if (c >= 0 && c < this.fieldCount && flds.indexOf(c) < 0) {
	                flds.push(c);
	                vals.push(values[i]);
	            }
	        }
	        var len = flds.length;
	        for (var i = 0; i < len; i++) {
	            flds[i] = this.getField(flds[i]);
	        }
	        var cnt = rows.length;
	        for (var i = 0; i < cnt; i++) {
	            var row = rows[i];
	            var found = true;
	            for (var c = 0; c < len; c++) {
	                if (!flds[c].equalValues(vals[c], row[c])) {
	                    found = false;
	                    break;
	                }
	            }
	            if (found) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    LocalDataProvider.prototype.savePoint = function (saveStates) {
	        if (saveStates === void 0) { saveStates = true; }
	        if (!this._checkClientState())
	            return;
	        var values = this._values;
	        var flds = this.fieldCount;
	        var cnt = values ? values.length : 0;
	        if (flds > 0 && cnt > 0) {
	            var rows = new Array(cnt);
	            for (var i_1 = 0; i_1 < cnt; i_1++) {
	                var row = values[i_1] && values[i_1].concat();
	                rows[i_1] = row;
	            }
	            var states = saveStates ? this._rowStates.concat() : null;
	            var i = this._nextPoint++;
	            this._points.push({
	                id: i,
	                data: rows,
	                states: states
	            });
	            return i;
	        }
	        return -1;
	    };
	    LocalDataProvider.prototype.rollback = function (savePoint) {
	        if (!this._checkClientState())
	            return;
	        for (var i = this._points.length - 1; i >= 0; i--) {
	            var point = this._points[i];
	            if (point.id == savePoint) {
	                this.$_removeSavePoints(i + 1);
	                this.setRows(point.data);
	                var states = point.states;
	                if (states) {
	                    this._rowStates = states.concat();
	                }
	                break;
	            }
	        }
	    };
	    LocalDataProvider.prototype.$_removeSavePoints = function (index) {
	        var points = this._points;
	        for (var i = points.length - 1; i >= index; i--) {
	            var point = points[i];
	            point.data = null;
	            points.pop();
	        }
	    };
	    LocalDataProvider.prototype.clearSavePoints = function () {
	        this.$_removeSavePoints(0);
	    };
	    LocalDataProvider.prototype.getSavePoints = function () {
	        var points = [];
	        for (var i = 0, cnt = this._points.length; i < cnt; i++) {
	            points.push(this._points[i].id);
	        }
	        return points;
	    };
	    LocalDataProvider.prototype.canUpdateRow = function (row) {
	        return true;
	    };
	    LocalDataProvider.prototype.canAppendRow = function () {
	        return true;
	    };
	    LocalDataProvider.prototype.canInsertRow = function (row) {
	        return true;
	    };
	    LocalDataProvider.prototype.canDeleteRow = function (row) {
	        return true;
	    };
	    LocalDataProvider.prototype.$_getSortedRows = function (field) {
	        var compFunc;
	        var rows = new Array(this._values.length);
	        switch (this.getField(field).dataType) {
	            case Types.ValueType.NUMBER:
	                compFunc = this.compareNumbers;
	                break;
	            case Types.ValueType.DATETIME:
	                compFunc = this.compareDates;
	                break;
	            case Types.ValueType.BOOLEAN:
	                compFunc = this.compareBools;
	                break;
	            case Types.ValueType.OBJECT:
	                compFunc = this.compareObjects;
	                break;
	            default:
	                compFunc = this.compareValues;
	                break;
	        }
	        for (var i = rows.length; i--;) {
	            rows[i] = i;
	        }
	        this.$_sortRows(rows, field, compFunc.bind(this), 0, rows.length - 1);
	        return rows;
	    };
	    LocalDataProvider.prototype.getDistinctValues = function (field, maxCount, sortDir) {
	        if (maxCount === void 0) { maxCount = -1; }
	        if (sortDir === void 0) { sortDir = Types.SortDirection.ASCENDING; }
	        maxCount = arguments.length > 1 ? maxCount : -1;
	        this._checkFieldIndex(field);
	        var values = [];
	        if (maxCount < 0) {
	            maxCount = this._values.length;
	        }
	        if (maxCount > 0) {
	            var isNum = this.getField(field).dataType == Types.ValueType.NUMBER;
	            var rows = this.$_getSortedRows(field);
	            sortDir === Types.SortDirection.DESCENDING && rows.reverse();
	            var row = this._values[rows[0]];
	            values.push(row ? row[field] : undefined);
	            for (var i = 1, cnt = rows.length; i < cnt; i++) {
	                if (values.length >= maxCount) {
	                    break;
	                }
	                if (!this.equalValues(field, rows[i - 1], rows[i])) {
	                    var row_1 = this._values[rows[i]];
	                    var value = row_1 ? row_1[field] : undefined;
	                    if (values.indexOf(value) == -1 && (!isNum || !isNaN(value))) { // undefined나 NaN이 중복들어가는것을 방지
	                        values.push(value);
	                    }
	                }
	            }
	        }
	        return values;
	    };
	    LocalDataProvider.prototype.compareValues = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : null;
	            var v2 = vals2 ? vals2[field] : null;
	            if (v1 === undefined || v1 === null) {
	                return (v2 === undefined || v2 === null) ? 0 : -1;
	            }
	            if (v2 === undefined || v2 === null) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : (v1 < v2) ? -1 : 0;
	        }
	    };
	    LocalDataProvider.prototype.compareTexts = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : null;
	            var v2 = vals2 ? vals2[field] : null;
	            if (v1 === undefined || v1 === null) {
	                return (v2 === undefined || v2 === null) ? 0 : -1;
	            }
	            if (v2 === undefined || v2 === null) {
	                return 1;
	            }
	            v1 = String(v1).toLocaleLowerCase();
	            v2 = String(v2).toLocaleLowerCase();
	            return v1 > v2 ? 1 : (v1 < v2) ? -1 : 0;
	        }
	    };
	    LocalDataProvider.prototype.compareNumbers = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : NaN;
	            var v2 = vals2 ? vals2[field] : NaN;
	            if (isNaN(v1)) {
	                return (isNaN(v2)) ? 0 : -1;
	            }
	            if (isNaN(v2)) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : (v1 < v2) ? -1 : 0;
	        }
	    };
	    LocalDataProvider.prototype.compareDates = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : null;
	            var v2 = vals2 ? vals2[field] : null;
	            if (!(v1 instanceof Date)) {
	                return !(v2 instanceof Date) ? 0 : -1;
	            }
	            if (!(v2 instanceof Date)) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : v1 < v2 ? -1 : 0;
	        }
	    };
	    LocalDataProvider.prototype.compareBools = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? Boolean(vals1[field]) : false;
	            var v2 = vals2 ? Boolean(vals2[field]) : false;
	            return (v1 && !v2) ? 1 : (!v1 && v2) ? -1 : 0;
	        }
	    };
	    LocalDataProvider.prototype.compareObjects = function (field, row1, row2) {
	        var vals1 = this._values[row1];
	        var vals2 = this._values[row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : null;
	            var v2 = vals2 ? vals2[field] : null;
	            if (!v1) {
	                return !v2 ? 0 : -1;
	            }
	            if (!v2) {
	                return 1;
	            }
	            var fld = this.getField(field);
	            return fld["$_compareObject"](v1, v2, row1, row2);
	        }
	    };
	    LocalDataProvider.prototype.summarize = function (field, calcVars) {
	        if (field == null) {
	            return false;
	        }
	        field.clear();
	        var count = this.rowCount;
	        if (count < 1) {
	            return false;
	        }
	        var n = 0;
	        var f = field.field;
	        var sum = 0;
	        var min = NaN;
	        var max = NaN;
	        var i = 0;
	        while (i < count) {
	            var vals = this._values[i++];
	            var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	            if (!isNaN(v)) {
	                sum = min = max = v;
	                n++;
	                break;
	            }
	        }
	        while (i < count) {
	            var vals = this._values[i++];
	            var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	            if (!isNaN(v)) {
	                sum += v;
	                if (v < min)
	                    min = v;
	                if (v > max)
	                    max = v;
	                n++;
	            }
	        }
	        field.count = count;
	        if (n > 0) {
	            field.sum = sum;
	            field.min = min;
	            field.max = max;
	            field.avg = sum / count;
	            if (calcVars) {
	                var vars = 0;
	                var avg = field.avg;
	                for (var i_2 = 0; i_2 < count; i_2++) {
	                    var vals = this._values[i_2];
	                    var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	                    if (!isNaN(v)) {
	                        vars += Math.pow(v - avg, 2);
	                    }
	                }
	                field.varsp = vars / count;
	                field.vars = vars / (count - 1);
	            }
	            else {
	                field.varsp = NaN;
	                field.vars = NaN;
	            }
	        }
	        return true;
	    };
	    LocalDataProvider.prototype.summarizeRange = function (field, rows, calcVars) {
	        if (field == null || rows == null) {
	            return false;
	        }
	        field.clear();
	        var count = rows.length;
	        if (count < 1) {
	            return false;
	        }
	        var n = 0;
	        var f = field.field;
	        var sum = 0;
	        var min = NaN;
	        var max = NaN;
	        var i = 0;
	        while (i < count) {
	            var r = rows[i++];
	            var vals = this._values[r];
	            var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	            if (!isNaN(v)) {
	                sum = min = max = v;
	                n++;
	                break;
	            }
	        }
	        while (i < count) {
	            var r = rows[i++];
	            var vals = this._values[r];
	            var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	            if (!isNaN(v)) {
	                sum += v;
	                if (v < min)
	                    min = v;
	                if (v > max)
	                    max = v;
	                n++;
	            }
	        }
	        field.count = count;
	        if (n > 0) {
	            field.sum = sum;
	            field.min = min;
	            field.max = max;
	            field.avg = sum / count;
	            if (calcVars) {
	                var vars = 0;
	                var avg = field.avg;
	                for (var i_3 = 0; i_3 < count; i_3++) {
	                    var r = rows[i_3];
	                    var vals = this._values[r];
	                    var v = vals ? (vals[f] == null ? undefined : vals[f]) : NaN;
	                    if (!isNaN(v)) {
	                        vars += Math.pow(v - avg, 2);
	                    }
	                }
	                field.varsp = vars / count;
	                field.vars = vars / (count - 1);
	            }
	            else {
	                field.varsp = NaN;
	                field.vars = NaN;
	            }
	        }
	        return true;
	    };
	    LocalDataProvider.prototype._keepRow = function (row) {
	        var save = {};
	        save.rowId = this._rowIds[row];
	        save.values = this._values[row] && this._values[row].slice();
	        save.state = this._rowStates[row];
	        save.orgValues = this._orgValues && this._orgValues[row] && this._orgValues[row].slice();
	        save.outer = this._keepCommandStates(row);
	        return save;
	    };
	    LocalDataProvider.prototype._yieldRow = function (row, save) {
	        this._rowIds[row] = save.rowId;
	        this._values[row] = save.values && save.values.slice();
	        this._rowStates[row] = save.state;
	        if (this._orgValues) {
	            this._orgValues[row] = save.orgValues && save.orgValues.slice();
	        }
	        this._yieldCommandStates(row, save.outer);
	    };
	    LocalDataProvider.prototype._keepStates = function (row) {
	        var save = {};
	        save.rowId = this._rowIds[row];
	        save.state = this._rowStates[row];
	        save.orgValues = this._orgValues && this._orgValues[row] && this._orgValues[row].slice();
	        return save;
	    };
	    LocalDataProvider.prototype._yieldStates = function (row, save) {
	        this._rowIds[row] = save.rowId;
	        this._rowStates[row] = save.state;
	        if (this._orgValues) {
	            this._orgValues[row] = save.orgValues && save.orgValues.slice();
	        }
	    };
	    LocalDataProvider.prototype._keepState = function (row) {
	        return this._rowStates[row];
	    };
	    LocalDataProvider.prototype._yieldState = function (row, save) {
	        this._rowStates[row] = save;
	    };
	    LocalDataProvider.prototype._keepOrgValues = function () {
	        var orgs = this._orgValues;
	        if (orgs) {
	            var vals = [];
	            for (var i = 0; i < orgs.length; i++) {
	                vals.push(orgs[i] && orgs[i].slice());
	            }
	            return vals;
	        }
	        return null;
	    };
	    LocalDataProvider.prototype._yieldOrgValues = function (save) {
	        if (save) {
	            this._orgValues = [];
	            for (var i = 0; i < save.length; i++) {
	                this._orgValues.push(save[i] && save[i].slice());
	            }
	        }
	        else {
	            this._orgValues = save;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    LocalDataProvider.prototype.$_checkRowIndex = function (row) {
	        if (row < 0 || row >= this._values.length) {
	            //if ($_debug) debugger;
	            throw new DataSource_1.DataSourceError("row is out of bounds: " + row);
	        }
	    };
	    LocalDataProvider.prototype.$_resetOrgValues = function () {
	        var mode = this.restoreMode;
	        this._orgValues = (!this.checkStates || mode == RestoreMode_1.RestoreMode.NONE) ? null : [];
	        this._needRestore = this._orgValues && mode == RestoreMode_1.RestoreMode.AUTO;
	    };
	    LocalDataProvider.prototype.arrayToRow = function (values, row) {
	        var cols = Math.min(values ? values.length : 0, this.fieldCount);
	        var vals = new Array(cols);
	        for (var c = 0; c < cols; c++) {
	            vals[c] = this.getField(c).readValue(values[c]);
	        }
	        this._internalCalculateValues(vals, row);
	        return vals;
	    };
	    LocalDataProvider.prototype.$_internalSetRow = function (row, values, checkState) {
	        var vals = this.arrayToRow(values, row);
	        this._values[row] = vals;
	        this._rowIds[row] = this._nextRowId++;
	        if (this.checkStates) {
	            this._rowStates[row] = RowState_1.RowState.NONE;
	        }
	    };
	    LocalDataProvider.prototype.$_internalInsertRow = function (row, values, tagging) {
	        var vals = this.arrayToRow(values, row), append = row == this._values.length;
	        if (append) {
	            this._values.push(vals);
	            this._rowIds.push(this._nextRowId++);
	        }
	        else {
	            this._values.splice(row, 0, vals);
	            this._rowIds.splice(row, 0, this._nextRowId++);
	        }
	        tagging && this.tags.insertRow(row);
	        if (append) {
	            this._rowStates.push(this.checkStates ? RowState_1.RowState.CREATED : RowState_1.RowState.NONE);
	        }
	        else {
	            this._rowStates.splice(row, 0, this.checkStates ? RowState_1.RowState.CREATED : RowState_1.RowState.NONE);
	            if (this._orgValues) {
	                this._orgValues.splice(row, 0, undefined);
	            }
	        }
	    };
	    LocalDataProvider.prototype.$_updateRow = function (row, values, strict) {
	        if (strict === void 0) { strict = false; }
	        if (!this._checkClientState())
	            return;
	        this.$_checkRowIndex(row);
	        this.refreshFieldFormats();
	        if (values && this.fireRowUpdating(row, values)) {
	            this.$_internalUpdateRow(row, values, strict, true, true);
	            this.fireRowUpdated(row);
	            return true;
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.$_updateRows = function (row, values, start, count, strict, rowEvents, save) {
	        if (save === void 0) { save = null; }
	        if (!this._checkClientState())
	            return;
	        if (!values)
	            return;
	        var len = values.length;
	        if (len < 1) {
	            return;
	        }
	        count = (count < 0) ? len : Math.min(len, count);
	        if (count == 0) {
	            return;
	        }
	        start = Math.max(0, start);
	        this.refreshFieldFormats();
	        var rowCount = this.rowCount;
	        var end = Math.min(len, start + count);
	        if (end <= start) {
	            return;
	        }
	        if (save) {
	            save.rows = [];
	            save.values = [];
	            save.states = [];
	            save.orgValues = [];
	        }
	        if (rowEvents) {
	            var r = row;
	            for (var i = start; i < end && r < rowCount; i++, r++) {
	                var v = values[i];
	                if (this.fireRowUpdating(r, v)) {
	                    if (save) {
	                        save.rows.push(r);
	                        save.values.push(this._values[r].slice());
	                        save.states.push(this._rowStates[r]);
	                        save.orgValues.push(this._orgValues && this._orgValues[r]);
	                    }
	                    this.$_internalUpdateRow(r, v, strict, true, true);
	                    this.fireRowUpdated(r);
	                }
	            }
	        }
	        else {
	            var list = [];
	            var r = row;
	            for (var i = start; i < end && r < rowCount; i++, r++) {
	                if (this._rowStates[r] == RowState_1.RowState.NONE) {
	                    list.push(r);
	                }
	                if (save) {
	                    save.rows.push(r);
	                    save.values.push(this._values[r].slice());
	                    save.states.push(this._rowStates[r]);
	                    save.orgValues.push(this._orgValues && this._orgValues[r]);
	                }
	                var v = values[i];
	                this.$_internalUpdateRow(r, v, strict, false, false);
	            }
	            if (list.length > 0) {
	                this.fireRowStatesChanged(list);
	            }
	            this.tags.updateRows(row, count = end - start);
	            this.fireRowsUpdated(row, count);
	        }
	    };
	    LocalDataProvider.prototype.$_internalUpdateRow = function (row, values, strict, stateEvent, tagging) {
	        var fields = this.getFields();
	        var isAry = Utils_1.Utils.isArray(values);
	        var cnt = Math.min(fields.length, isAry ? values.length : fields.length);
	        var vals = this._values[row];
	        var state = this._rowStates[row];
	        var needState = this.checkStates && (state == RowState_1.RowState.NONE || !state);
	        var oldVals;
	        if (!vals) {
	            this._values[row] = vals = [];
	        }
	        if (needState && this._orgValues) {
	            oldVals = vals.concat();
	        }
	        var changed = false;
	        for (var c = 0; c < cnt; c++) {
	            var fld = fields[c];
	            if (fld.updatable || state == RowState_1.RowState.CREATED || state == RowState_1.RowState.CREATE_AND_DELETED) {
	                if (isAry || values.hasOwnProperty(fld.orgFieldName)) {
	                    var v = isAry ? values[c] : values[fld.orgFieldName];
	                    if (!strict || v !== undefined) {
	                        if (this._needRestore) {
	                            changed = changed || (strict ? !fld.equalValues(vals[c], fld.readValue(v)) : !fld.sameValues(vals[c], fld.readValue(v)));
	                        }
	                        else {
	                            changed = true;
	                        }
	                        vals[c] = fld.readValue(v);
	                    }
	                }
	            }
	        }
	        if (changed) {
	            this._internalCalculateValues(vals, row);
	        }
	        if (needState && changed) {
	            if (oldVals) {
	                this._orgValues[row] = oldVals;
	            }
	            this.$_changeRowState(row, RowState_1.RowState.UPDATED, stateEvent);
	        }
	        else if (this._needRestore) {
	            this.restoreState(row);
	        }
	        tagging && this.tags.updateRow(row);
	    };
	    LocalDataProvider.prototype.$_changeRowState = function (row, newState, fireEvent, force, checkDeleted) {
	        if (force === void 0) { force = false; }
	        if (checkDeleted === void 0) { checkDeleted = false; }
	        if (this.checkStates || force) {
	            var state = this._rowStates[row];
	            newState = newState || RowState_1.RowState.NONE;
	            if (newState != state) {
	                this._rowStates[row] = newState;
	                if (checkDeleted) {
	                    if (!RowState_1.isDeletedState(state) && RowState_1.isDeletedState(newState)) {
	                        this._deletedCount++;
	                    }
	                    else if (RowState_1.isDeletedState(state) && !RowState_1.isDeletedState(newState)) {
	                        this._deletedCount--;
	                    }
	                }
	                if (fireEvent) {
	                    this.fireRowStateChanged(row);
	                }
	                return true;
	            }
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.restoreState = function (row) {
	        var state = this._rowStates[row];
	        if (state === RowState_1.RowState.UPDATED) {
	            var orgs = this._orgValues[row];
	            if (orgs) {
	                var vals = this._values[row];
	                var strict = this.strictRestore;
	                for (var i = 0, cnt = this.fieldCount; i < cnt; i++) {
	                    var v1 = vals.length > i ? vals[i] : undefined;
	                    var v2 = orgs.length > i ? orgs[i] : undefined;
	                    if (strict) {
	                        if (!this.getField(i).equalValues(v1, v2)) {
	                            return false;
	                        }
	                    }
	                    else {
	                        if (!this.getField(i).sameValues(v1, v2)) {
	                            return false;
	                        }
	                    }
	                }
	                this._rowStates[row] = RowState_1.RowState.NONE;
	                return true;
	            }
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.prepareOrgValues = function (row, oldState, newState) {
	        if (newState == RowState_1.RowState.UPDATED) {
	            this._orgValues[row] = this._values[row] ? this._values[row].concat() : [];
	        }
	        else if (oldState == RowState_1.RowState.UPDATED) {
	            if (this._orgValues[row]) {
	                this._orgValues[row] = undefined;
	            }
	        }
	    };
	    LocalDataProvider.prototype.$_changeRowStateEx = function (row, newState, fireEvent, force, checkDeleted) {
	        var oldState = this._rowStates[row];
	        if (this.$_changeRowState(row, newState, false, force, checkDeleted)) {
	            if (this._orgValues) {
	                this.prepareOrgValues(row, oldState, newState);
	            }
	            if (fireEvent) {
	                this.fireRowStateChanged(row);
	            }
	            return true;
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.$_getRowObject = function (row, fldCount) {
	        var data = {};
	        var vals = this._values[row];
	        if (vals) {
	            for (var i = 0; i < fldCount; i++) {
	                var fld = this.getOrgFieldName(i);
	                data[fld] = vals[i];
	            }
	        }
	        return data;
	    };
	    LocalDataProvider.prototype.$_deleteRow = function (row) {
	        if (this.fireRowRemoving(row)) {
	            var state = this._rowStates[row];
	            this.$_internalRemoveRow(row);
	            if (RowState_1.isDeletedState(state)) {
	                this._deletedCount--;
	            }
	            this.tags.removeRow(row);
	            this.fireRowRemoved(row);
	            this._fireRowCountChanged();
	            return true;
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.$_internalRemoveRow = function (row) {
	        var rowId = this._rowIds[row];
	        this._hiddenIds.indexOf(rowId) >= 0 && this._hiddenIds.splice(this._hiddenIds.indexOf(rowId), 1);
	        this._values.splice(row, 1);
	        this._rowIds.splice(row, 1);
	        if (this._orgValues && this._orgValues.length > row) {
	            this._orgValues.splice(row, 1);
	        }
	        this._rowStates.splice(row, 1);
	    };
	    LocalDataProvider.prototype.internalMoveRow = function (row, newRow) {
	        var vals = this._values[row];
	        var id = this._rowIds[row];
	        var state = this._rowStates[row];
	        this._values.splice(row, 1);
	        this._rowIds.splice(row, 1);
	        this._rowStates.splice(row, 1);
	        this._values.splice(newRow, 0, vals);
	        this._rowIds.splice(newRow, 0, id);
	        this._rowStates.splice(newRow, 0, state);
	        if (this._orgValues && this._orgValues.length > row) {
	            vals = this._orgValues[row];
	            this._orgValues.splice(row, 1);
	            this._orgValues.splice(newRow, 0, vals);
	        }
	    };
	    LocalDataProvider.prototype.internalMoveRows = function (row, count, newRow) {
	        var rows = this._values.splice(row, count);
	        var ids = this._rowIds.splice(row, count);
	        var states = this._rowStates.splice(row, count);
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            this._values.splice(newRow + i, 0, rows[i]);
	            this._rowIds.splice(newRow + i, 0, ids[i]);
	            this._rowStates.splice(newRow + i, 0, states[i]);
	        }
	        if (this._orgValues && this._orgValues.length > row) {
	            rows = this._orgValues.splice(row, count);
	            this._orgValues.splice(newRow + i, 0, rows[i]);
	        }
	    };
	    LocalDataProvider.prototype.$_searchDataRow = function (fields, values, options, startDataRow, endDataRow) {
	        var rows = this.rowCount;
	        if (rows < 1) {
	            return -1;
	        }
	        var flds = Math.min(fields.length, values.length);
	        if (flds < 1) {
	            return -1;
	        }
	        var all = !options || options.allFields;
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < flds; c++) {
	            fieldTypes[c] = this.getField(fields[c]).dataType;
	        }
	        startDataRow = Math.max(0, startDataRow);
	        endDataRow = Math.min(rows - 1, endDataRow);
	        for (var i = startDataRow; i <= endDataRow; i++) {
	            var found = true;
	            for (var c = 0; c < flds; c++) {
	                var v = this.getValue(i, fields[c]);
	                switch (fieldTypes[c]) {
	                    case Types.ValueType.DATETIME:
	                    case Types.ValueType.DATE:
	                        if (values[c] instanceof Date) {
	                            found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                        }
	                        else {
	                            if (!dateConvert) {
	                                var fmt = /[.]/.test(values[c]) ? "yyyy.MM.dd" : /[/]/.test(values[c]) ? "yyyy/MM/dd" : /[-]/.test(values[c]) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                            }
	                            found = Utils_1.Utils.compareTextValue(values[c], v ? dateConvert.getText(v) : v, sensitive, partial);
	                        }
	                        break;
	                    default:
	                        found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                        break;
	                }
	                if (found && !all) {
	                    return i;
	                }
	                if (!found && all) {
	                    break;
	                }
	            }
	            if (found) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    LocalDataProvider.prototype.searchDataRow = function (fields, values, options, startDataRow, wrap) {
	        if (startDataRow === void 0) { startDataRow = 0; }
	        if (wrap === void 0) { wrap = true; }
	        var result = -1;
	        if (fields && fields.length > 0 && values && values.length > 0) {
	            options = options instanceof SearchOptions_1.SearchOptions ? options : options ? new SearchOptions_1.SearchOptions(options) : null;
	            var cnt = fields.length;
	            var flds = [];
	            for (var c = 0; c < cnt; c++) {
	                var n = parseFloat(fields[c]);
	                if (!isNaN(n)) {
	                    flds.push(n);
	                }
	                else {
	                    var f = this.getFieldIndex(fields[c]);
	                    if (f >= 0) {
	                        flds.push(f);
	                    }
	                }
	            }
	            if (flds.length > 0) {
	                cnt = this.rowCount;
	                startDataRow = Math.max(0, startDataRow);
	                result = startDataRow < cnt ? this.$_searchDataRow(flds, values, options, startDataRow, cnt - 1) : -1;
	                if (result < 0 && wrap && startDataRow > 0) {
	                    result = this.$_searchDataRow(flds, values, options, 0, startDataRow - 1);
	                }
	            }
	        }
	        return result;
	    };
	    LocalDataProvider.prototype.$_searchData = function (fields, value, options, startDataRow, endDataRow, startFieldIndex) {
	        var rows = this.rowCount;
	        if (rows < 1) {
	            return null;
	        }
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var fldCount = this.fieldCount;
	        var fldLen = fields.length;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < fldCount; c++) {
	            fieldTypes[c] = this.getField(c).dataType;
	        }
	        startDataRow = Math.max(0, startDataRow);
	        endDataRow = Math.min(rows - 1, endDataRow);
	        startFieldIndex = Math.max(0, startFieldIndex);
	        if (startFieldIndex >= fields.length) {
	            startDataRow++;
	            startFieldIndex = 0;
	        }
	        for (var i = startDataRow; i <= endDataRow; i++) {
	            var c = (i > startDataRow) ? 0 : startFieldIndex;
	            for (; c < fldLen; c++) {
	                var f = fields[c];
	                if (f >= 0 && f < fldCount) {
	                    var v = this.getValue(i, f);
	                    var found = false;
	                    switch (fieldTypes[f]) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.DATE:
	                            if (value instanceof Date) {
	                                found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                            }
	                            else {
	                                if (!dateConvert) {
	                                    var fmt = /[.]/.test(value) ? "yyyy.MM.dd" : /[/]/.test(value) ? "yyyy/MM/dd" : /[-]/.test(value) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                    dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                }
	                                found = Utils_1.Utils.compareTextValue(value, v ? dateConvert.getText(v) : v, sensitive, partial);
	                            }
	                            break;
	                        default:
	                            found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                            break;
	                    }
	                    if (found) {
	                        return {
	                            dataRow: i,
	                            fieldIndex: f,
	                            searchFieldIndex: c
	                        };
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    LocalDataProvider.prototype.searchData = function (fields, value, searchOptions, startDataRow, startFieldIndex, wrap) {
	        if (startDataRow === void 0) { startDataRow = 0; }
	        if (startFieldIndex === void 0) { startFieldIndex = 0; }
	        if (wrap === void 0) { wrap = true; }
	        var options = searchOptions instanceof SearchOptions_1.SearchCellOptions ? searchOptions : searchOptions ? new SearchOptions_1.SearchCellOptions(searchOptions) : null;
	        var result = null;
	        if (!fields || fields.length < 1) {
	            fields = [];
	            var arr = this.getFields();
	            for (var i = 0; i < arr.length; i++) {
	                fields.push(arr[i].orgFieldName);
	            }
	        }
	        if (fields && fields.length > 0 && value != null) {
	            var c, n;
	            var cnt = fields.length;
	            var flds = [];
	            for (c = 0; c < cnt; c++) {
	                n = parseFloat(fields[c]);
	                if (!isNaN(n)) {
	                    flds.push(n);
	                }
	                else {
	                    flds.push(this.getFieldIndex(fields[c]));
	                }
	            }
	            if (flds.length > 0) {
	                cnt = this.rowCount;
	                startDataRow = Math.max(0, startDataRow);
	                startFieldIndex = Math.max(0, startFieldIndex);
	                result = startDataRow < cnt ? this.$_searchData(flds, value, options, startDataRow, cnt - 1, startFieldIndex) : null;
	                if (!result && wrap && startDataRow > 0) {
	                    result = this.$_searchData(flds, value, options, 0, startDataRow - 1, 0);
	                }
	                if (result) {
	                    result.fieldName = this.getOrgFieldName(result["fieldIndex"]);
	                }
	            }
	        }
	        return result;
	    };
	    LocalDataProvider.prototype.isDataChanged = function (row, fieldIndex) {
	        if (this._rowStates[row] !== RowState_1.RowState.UPDATED || !this._orgValues) {
	            return false;
	        }
	        this.$_checkRowIndex(row);
	        this._checkFieldIndex(fieldIndex);
	        if (this._orgValues[row]) {
	            var v1 = this._orgValues[row][fieldIndex];
	            var v2 = this.getValue(row, fieldIndex);
	            var field = this.getField(fieldIndex);
	            return field && field.dataType !== Types.ValueType.OBJECT && !field.sameValues(v1, v2);
	        }
	        return false;
	    };
	    LocalDataProvider.prototype.$_hideRows = function (dataRows, hide) {
	        if (dataRows == null) {
	            return;
	        }
	        var rows = (Utils_1.Utils.isArray(dataRows) ? dataRows : [dataRows]);
	        var ids = [];
	        var oldCnt = this._hiddenIds.length;
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var rowId = this.getRowId(rows[i]);
	            if (rowId != undefined) {
	                ids.push(rowId);
	                if (hide) {
	                    this._hiddenIds.indexOf(rowId) < 0 && this._hiddenIds.push(rowId);
	                }
	                else {
	                    var idx = this._hiddenIds.indexOf(rowId);
	                    idx >= 0 && this._hiddenIds.splice(idx, 1);
	                }
	            }
	        }
	        this._hiddenIds.length !== oldCnt && this.fireRowHided(ids, hide);
	    };
	    LocalDataProvider.prototype.hideRows = function (dataRows) {
	        this.$_hideRows(dataRows, true);
	    };
	    LocalDataProvider.prototype.showRows = function (dataRows) {
	        this.$_hideRows(dataRows, false);
	    };
	    LocalDataProvider.prototype.clearHiddenRows = function () {
	        if (this._hiddenIds.length > 0) {
	            this._hiddenIds = [];
	            this.fireRowHided([], false);
	        }
	    };
	    LocalDataProvider.prototype.getHiddenRows = function () {
	        var ret = [];
	        for (var i = 0, cnt = this._hiddenIds.length; i < cnt; i++) {
	            var dataRow = this._rowIds.indexOf(this._hiddenIds[i]);
	            dataRow >= 0 && ret.push(dataRow);
	        }
	        ret.sort(function (a, b) { return a - b; });
	        return ret;
	    };
	    LocalDataProvider.prototype.isHiddenRow = function (dataRow) {
	        var rowId = this._rowIds[dataRow];
	        return this._hiddenIds.indexOf(rowId) >= 0;
	    };
	    Object.defineProperty(LocalDataProvider.prototype, "hiddenCount", {
	        get: function () {
	            return this._hiddenIds.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LocalDataProvider.prototype.undo = function () {
	        if (this.canUndo) {
	            this._commands.undo();
	        }
	    };
	    LocalDataProvider.prototype.redo = function () {
	        if (this.canRedo) {
	            this._commands.redo(true);
	        }
	    };
	    LocalDataProvider.prototype.clearCommandStack = function () {
	        this._commands.flush();
	    };
	    return LocalDataProvider;
	}(DataProvider_1.DataProvider));
	exports.LocalDataProvider = LocalDataProvider;
	});

	unwrapExports(LocalDataProvider_1);
	var LocalDataProvider_2 = LocalDataProvider_1.LocalDataProvider;

	var TreeDataTag = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeDataTag.ts
	// 2019. 09. 18. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var TreeDataTagCollection = /** @class */ (function (_super) {
	    __extends(TreeDataTagCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataTagCollection(owner) {
	        var _this = _super.call(this) || this;
	        _this._tags = new Array();
	        _this._owner = owner;
	        return _this;
	    }
	    TreeDataTagCollection.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeDataTagCollection.prototype.add = function (tag) {
	        if (tag) {
	            var tags = this._tags || (this._tags = []);
	            if (tags.indexOf(tag) < 0) {
	                tags.push(tag);
	            }
	            tag.connect(this._owner);
	        }
	    };
	    TreeDataTagCollection.prototype.remove = function (tag) {
	        if (tag && this._tags) {
	            var idx = this._tags.indexOf(tag);
	            if (idx >= 0) {
	                this._tags.splice(idx, 1);
	                tag.disconnect();
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.clearRows = function () {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].clearRows();
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.setRows = function () {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].setRows();
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.addRow = function (row) {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].addRow(row);
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.addRows = function (rows) {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].addRows(rows);
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.removeRow = function (row) {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].removeRow(row);
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.removeRows = function (rows) {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].removeRows(rows);
	            }
	        }
	    };
	    TreeDataTagCollection.prototype.updateRow = function (row) {
	        if (this._tags) {
	            for (var i = this._tags.length; i--;) {
	                this._tags[i].updateRow(row);
	            }
	        }
	    };
	    return TreeDataTagCollection;
	}(Base_1.Base));
	exports.TreeDataTagCollection = TreeDataTagCollection;
	});

	unwrapExports(TreeDataTag);
	var TreeDataTag_1 = TreeDataTag.TreeDataTagCollection;

	var DataHelper_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataHelper.ts
	// 2019. 09. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	function _getXmlAttr(xml, attr) {
	    return xml && xml.getAttribute(attr);
	}
	var DataHelper = /** @class */ (function (_super) {
	    __extends(DataHelper, _super);
	    function DataHelper() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DataHelper.csvToArray = function (ds, source, start, count, quoted, delimiter) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (quoted === void 0) { quoted = false; }
	        if (delimiter === void 0) { delimiter = ","; }
	        var lines = [];
	        var line = [];
	        var len = source.length;
	        var i = 0;
	        var s = [];
	        var started = false;
	        var quoting = false;
	        while (i < len) {
	            var c = source.charAt(i);
	            // next = i < len -1 ? source.charAt(i+1) : '';
	            if (c == '"') {
	                if (!started) { // 시작 
	                    started = quoting = true;
	                    !quoted && s.push(c);
	                }
	                else if (quoting && source.charAt(i + 1) == '"') { //quoting 시 따옴표 두개
	                    s.push(c);
	                    i++;
	                }
	                else if (quoting) { //quoting 시 따옴표 한개 
	                    quoting = false;
	                    !quoted && s.push(c);
	                }
	                else { //quoting 바깥쪽의 따옴표 
	                    s.push(c);
	                }
	            }
	            else if (!quoting && (c == delimiter || c == '\r' || c == '\n')) {
	                if (c == delimiter) {
	                    line.push(s.join(""));
	                }
	                else if (c == '\r' || c == '\n') {
	                    line.push(s.join(""));
	                    lines.push(line);
	                    line = [];
	                    if (source.charAt(i + 1) == '\n')
	                        i++;
	                }
	                s = [];
	                started = false;
	            }
	            else {
	                started = true;
	                s.push(c);
	            }
	            i++;
	        }
	        // 개행문자로 끝나지 않은 경우 처리
	        if (quoting)
	            s.splice(0, 0, '"');
	        if (s.length > 0) // \t로 끝나는 경우 다음 cell의 값이 공백...
	            line.push(s.join(""));
	        if (line.length > 0) {
	            lines.push(line);
	        }
	        if (start > 0) {
	            if (count <= 0) {
	                lines.splice(0, start);
	            }
	            else {
	                lines = lines.splice(start, count);
	            }
	        }
	        var flds = ds.getFields();
	        var fieldCount = flds.length;
	        var hasFlds = fieldCount > 0;
	        for (var i_1 = 0, cnt = lines.length; i_1 < cnt; i_1++) {
	            line = lines[i_1];
	            if (hasFlds && line.length > fieldCount) {
	                line.length = fieldCount;
	            }
	            for (var j = 0; j < fieldCount; j++) {
	                line[j] = flds[j].readValue(line[j]);
	            }
	        }
	        return lines;
	    };
	    DataHelper.xmlToRow = function (xml, fields, fieldNames) {
	        var nodes = xml.childNodes;
	        var fldCnt = fields.length;
	        var vals = new Array(fldCnt);
	        for (var j = 0, len = nodes.length; j < len; j++) {
	            var node = nodes[j];
	            var c = void 0;
	            if ((c = fieldNames.indexOf(node.tagName)) >= 0) {
	                vals[c] = fields[c].readValue(node.nodeValue || (node.hasChildNodes() && node.childNodes[0].nodeType === 3 && node.childNodes[0].nodeValue));
	            }
	        }
	        for (var j = 0; j < fldCnt; j++) {
	            if (vals[j] === undefined) {
	                vals[j] = fields[j].readValue(_getXmlAttr(xml, fieldNames[j]));
	            }
	        }
	        return vals;
	    };
	    DataHelper.xmlToArray = function (ds, xmlList, start, count) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        var rows = null;
	        var xmlToRow = DataHelper.xmlToRow;
	        var cnt = xmlList ? xmlList.length : 0;
	        if (cnt) {
	            start = Math.max(0, start);
	            if (count < 0) {
	                count = cnt;
	            }
	            count = Math.min(cnt - start, count);
	            if (count) {
	                var flds = ds.getFields();
	                var fldNames = ds.getOrgFieldNames();
	                var fldCnt = flds.length;
	                rows = new Array(count);
	                for (var i = 0; i < count; i++) {
	                    var xml = xmlList[i + start];
	                    var vals = xmlToRow(xml, flds, fldNames);
	                    rows[i] = vals;
	                }
	            }
	        }
	        return rows;
	    };
	    return DataHelper;
	}(Base_1.Base));
	exports.DataHelper = DataHelper;
	});

	unwrapExports(DataHelper_1);
	var DataHelper_2 = DataHelper_1.DataHelper;

	var XmlUtils_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// XmlUtil.ts 
	// 2019. 07. 25. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	// import { DOMParser as SDomParser, XMLSerializer as SXmlSerializer } from 'xmldom';
	var XmlUtils = /** @class */ (function () {
	    function XmlUtils() {
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    XmlUtils.parse = function (source) {
	        var parser = new window.DOMParser();
	        var doc = parser.parseFromString(source, "text/xml");
	        return doc;
	    };
	    XmlUtils.toString = function (doc) {
	        return new window.XMLSerializer().serializeToString(doc);
	    };
	    XmlUtils.getNodeValue = function (node) {
	        return node.firstChild.nodeValue;
	    };
	    XmlUtils.getAttr = function (node, attr) {
	        return node.getAttribute(attr);
	    };
	    XmlUtils.setAttr = function (xml, attr, value) {
	        xml.setAttribute(attr, value);
	    };
	    XmlUtils.addChild = function (doc, parent, child) {
	        var node = doc.createElement(child);
	        parent.appendChild(node);
	        return node;
	    };
	    XmlUtils.addChildWithAttr = function (doc, parent, child, attr, value) {
	        var node = doc.createElement(child);
	        node.setAttribute(attr, value);
	        parent.appendChild(node);
	        return node;
	    };
	    XmlUtils.addChildWithValue = function (doc, parent, child, value) {
	        var node = doc.createElement(child);
	        node.nodeValue = value;
	        parent.appendChild(node);
	        return node;
	    };
	    XmlUtils.parseXml = function (source) {
	        var doc = null;
	        try {
	            doc = new ActiveXObject("Microsoft.XMLDOM");
	            doc.async = false;
	            doc.loadXML(source);
	        }
	        catch (e) {
	            if (doc)
	                throw e;
	            doc = new window.DOMParser().parseFromString(source, "text/xml");
	        }
	        return doc;
	    };
	    return XmlUtils;
	}());
	exports.XmlUtils = XmlUtils;
	});

	unwrapExports(XmlUtils_1);
	var XmlUtils_2 = XmlUtils_1.XmlUtils;

	var DataLoader_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataLoader.ts
	// 2019. 09. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	function _getXmlList(xml, tagName) {
	    var nodes = [];
	    if (xml) {
	        var list = xml.childNodes;
	        if (list) {
	            for (var i = 0, cnt = list.length; i < cnt; i++) {
	                var node = list[i];
	                if (node.tagName === tagName) {
	                    nodes.push(node);
	                }
	            }
	        }
	    }
	    return nodes;
	}
	var DataPath = /** @class */ (function (_super) {
	    __extends(DataPath, _super);
	    function DataPath() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    DataPath.extractJson = function (source, path) {
	        var data = source;
	        path = path && path.trim();
	        if (path) {
	            var segs = path.split(".");
	            for (var k = 0; k < segs.length; k++) {
	                var seg = segs[k] && segs[k].trim();
	                if (seg) {
	                    var i = seg.indexOf("[");
	                    var j = seg.lastIndexOf("]");
	                    if (i > 0 && j > i) {
	                        var s = seg.substring(0, i);
	                        var arr = (s != "$") ? data[s] : data;
	                        if (Array.isArray(arr)) {
	                            s = seg.substring(i + 1, j);
	                            var idx = parseInt(s);
	                            if (idx >= 0 && idx < arr.length) {
	                                data = arr[idx];
	                            }
	                            else {
	                                data = null;
	                            }
	                        }
	                        else {
	                            data = null;
	                        }
	                    }
	                    else if (seg != "$") {
	                        data = data[seg];
	                    }
	                    if (!data) {
	                        break;
	                    }
	                }
	            }
	        }
	        return Array.isArray(data) ? data : null;
	    };
	    /**
	     * row => root의 "row" elements
	     * row.row => root -> row[0] -> "row" elements 즉, row[0].row 와 같다.
	     * row[0].row => root -> row[0] -> "row"
	     */
	    DataPath.extractXml = function (root, path) {
	        var data = null;
	        path = path && path.trim();
	        if (path) {
	            var segs = path.split(".");
	            for (var k = 0; k < segs.length; k++) {
	                var seg = segs[k] && segs[k].trim();
	                if (seg) {
	                    var i = seg.indexOf("[");
	                    var j = seg.lastIndexOf("]");
	                    if (i > 0 && j > i) {
	                        var s = seg.substring(0, i);
	                        if (data) {
	                            data = _getXmlList(data[0], s);
	                        }
	                        else {
	                            data = _getXmlList(root, s);
	                        }
	                        if (data) {
	                            s = seg.substring(i + 1, j);
	                            var idx = parseInt(s);
	                            data = data[idx];
	                        }
	                    }
	                    else {
	                        if (data) {
	                            data = _getXmlList(data[0], seg);
	                        }
	                        else {
	                            data = _getXmlList(root, seg);
	                        }
	                    }
	                    if (!data) {
	                        break;
	                    }
	                }
	            }
	        }
	        return data;
	    };
	    return DataPath;
	}(Base_1.Base));
	exports.DataPath = DataPath;
	var DataFillMode;
	(function (DataFillMode) {
	    DataFillMode[DataFillMode["SET"] = 0] = "SET";
	    DataFillMode[DataFillMode["APPEND"] = 1] = "APPEND";
	    DataFillMode[DataFillMode["INSERT"] = 2] = "INSERT";
	    DataFillMode[DataFillMode["UPDATE"] = 3] = "UPDATE";
	})(DataFillMode = exports.DataFillMode || (exports.DataFillMode = {}));
	var DataFillOptions = /** @class */ (function (_super) {
	    __extends(DataFillOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataFillOptions(source) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.fillMode = DataFillMode.SET;
	        _this.fillPos = 0;
	        _this.count = -1;
	        _this.rootArray = true;
	        _this.rows = "row";
	        _this.start = 0;
	        _this.delimiter = ",";
	        _this.quoted = false;
	        _this.parentId = 0;
	        _this.childrenField = null;
	        _this.treeField = null;
	        _this.iconField = null;
	        _this.needSorting = false;
	        _this.itemIndex = -1;
	        if (source) {
	            if (source.hasOwnProperty("append")) {
	                _this.fillMode = DataFillMode.APPEND;
	            }
	            if (source.hasOwnProperty("fillMode")) {
	                _this.fillMode = source.fillMode;
	            }
	            if (source.hasOwnProperty("fillPos")) {
	                _this.fillPos = source.fillPos;
	            }
	            if (source.hasOwnProperty("count")) {
	                _this.count = source.count;
	            }
	            if (source.hasOwnProperty("rootArray")) {
	                _this.rootArray = source.rootArray;
	            }
	            if (source.hasOwnProperty("rows")) {
	                _this.rows = source.rows;
	            }
	            if (source.hasOwnProperty("start")) {
	                _this.start = source.start;
	            }
	            if (source.hasOwnProperty("delimiter")) {
	                _this.delimiter = source.delimiter;
	            }
	            if (source.hasOwnProperty("quoted")) {
	                _this.quoted = source.quoted;
	            }
	            if (source.hasOwnProperty("itemIndex")) {
	                _this.itemIndex = source.itemIndex;
	            }
	            for (var p in source) {
	                if (source[p] !== undefined) {
	                    _this[p] = source[p];
	                }
	            }
	            _this.parentId = source.parentId || source.parent;
	            _this.childrenField = source.childrenField || source.children;
	            _this.treeField = source.treeField || source.tree;
	            _this.iconField = source.iconField || source.icon;
	            _this.needSorting = source.needSorting || source.sorting;
	        }
	        return _this;
	    }
	    return DataFillOptions;
	}(Base_1.Base));
	exports.DataFillOptions = DataFillOptions;
	var DataLoader = /** @class */ (function (_super) {
	    __extends(DataLoader, _super);
	    function DataLoader(provider) {
	        var _this = _super.call(this) || this;
	        _this._provider = provider;
	        return _this;
	    }
	    DataLoader.prototype._doDispose = function () {
	        this._provider = null;
	    };
	    DataLoader.prototype.load = function (type, data, options) {
	        var opts = new DataFillOptions(options);
	        if (this._checkEmpty(data, opts)) {
	            return 0;
	        }
	        switch (type) {
	            case 'json': return this._loadJson(data, opts);
	            case 'xml': return this._loadXml(data, opts);
	            case 'csv': return this._loadCsv(data, opts);
	        }
	        return 0;
	    };
	    DataLoader.prototype._loadJson = function (data, options) {
	        if (typeof data === "string") {
	            data = JSON.parse(data);
	        }
	        var rows = null;
	        if (options.rootArray) {
	            rows = Utils_1.Utils.isArray(data) ? data : null;
	        }
	        if (!rows) {
	            rows = DataPath.extractJson(data, options.rows);
	        }
	        if (rows) {
	            var fillPos = options.fillPos;
	            var start = options.start;
	            var count = options.count;
	            var itemIndex = options.itemIndex;
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.appendRows(rows, start, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setRows(rows, start, count);
	                    break;
	            }
	            return rows.length;
	        }
	        else {
	            this._fillEmpty(options);
	            return 0;
	        }
	    };
	    DataLoader.prototype._loadXml = function (data, options) {
	        if (typeof data === "string") {
	            data = XmlUtils_1.XmlUtils.parse(data);
	        }
	        if (data && data.documentElement) {
	            var fillPos = options.fillPos;
	            var start = options.start;
	            var count = options.count;
	            var rowProp = options.rows;
	            var itemIndex = options.itemIndex;
	            var rows = DataPath.extractXml(data.documentElement, rowProp);
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.appendXmlRows(rows, start, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertXmlRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateXmlRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setXmlRows(rows, start, count);
	                    break;
	            }
	            return rows.length;
	        }
	        else {
	            this._fillEmpty(options);
	            return 0;
	        }
	    };
	    DataLoader.prototype._loadCsv = function (data, options) {
	        var fillPos = options.fillPos;
	        var start = options.start;
	        var count = options.count;
	        var quoted = options.quoted;
	        var delimiter = options.delimiter;
	        var itemIndex = options.itemIndex;
	        var rows = DataHelper_1.DataHelper.csvToArray(this._provider, data, start, count, quoted, delimiter);
	        if (rows && (count = rows.length) > 0) {
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.appendRows(rows, 0, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertRows(fillPos, rows, 0, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateRows(fillPos, rows, 0, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setRows(rows, 0, count);
	                    break;
	            }
	            return rows.length;
	        }
	        else {
	            this._fillEmpty(options);
	            return 0;
	        }
	    };
	    DataLoader.prototype._fillEmpty = function (options) {
	        if (options.fillMode === DataFillMode.SET) {
	            this._provider.setRows(null);
	        }
	    };
	    DataLoader.prototype._checkEmpty = function (data, options) {
	        if (!data) {
	            this._fillEmpty(options);
	            return true;
	        }
	        return false;
	    };
	    return DataLoader;
	}(Base_1.Base));
	exports.DataLoader = DataLoader;
	});

	unwrapExports(DataLoader_1);
	var DataLoader_2 = DataLoader_1.DataPath;
	var DataLoader_3 = DataLoader_1.DataFillMode;
	var DataLoader_4 = DataLoader_1.DataFillOptions;
	var DataLoader_5 = DataLoader_1.DataLoader;

	var TreeDataSource_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeDataSource.ts
	// 2019. 09. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var TreeDataSource = /** @class */ (function (_super) {
	    __extends(TreeDataSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataSource(provider, rootRow) {
	        var _this = _super.call(this) || this;
	        _this._rowCount = 0;
	        _this._ds = provider;
	        _this._rootRow = rootRow;
	        return _this;
	    }
	    TreeDataSource.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeDataSource.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** provider */
	        get: function () {
	            return this._ds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataSource.prototype, "rootRow", {
	        /** rootRow */
	        get: function () {
	            return this._rootRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataSource.prototype, "insertedRows", {
	        /** insertedRows */
	        get: function () {
	            return this._rows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataSource.prototype, "insertedCount", {
	        /** insertedCount */
	        get: function () {
	            return this._rowCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeDataSource.prototype._prepareLoad = function (parent) {
	        this._rowCount = 0;
	        this._rows = [];
	    };
	    TreeDataSource.prototype._objectToArray = function (row, ds) {
	        var flds = ds.fieldCount;
	        var vals = new Array(flds);
	        for (var c = 0; c < flds; c++) {
	            var fld = ds.getOrgFieldName(c);
	            if (row.hasOwnProperty(fld)) {
	                vals[c] = row[fld];
	            }
	        }
	        ds["_internalCalculateValues"](vals, -1);
	        return vals;
	    };
	    TreeDataSource.prototype._createRow = function (childrenField, iconField, values) {
	        var row = new LocalTreeDataProvider_1.TreeDataRowImpl(this._ds, values);
	        this._ds["_internalCalculateValues"](row["_values"], row.rowId);
	        if (childrenField >= 0) {
	            this._ds["setHasChildren"](row, values[childrenField]);
	        }
	        if (iconField >= 0) {
	            this._ds["setIconIndex"](row, values[iconField]);
	        }
	        return row;
	    };
	    TreeDataSource.prototype._createRow2 = function (hasChildren, iconIndex, values) {
	        var row = new LocalTreeDataProvider_1.TreeDataRowImpl(this._ds, values);
	        this._ds["_internalCalculateValues"](row["_values"], row.rowId);
	        if (hasChildren !== undefined) {
	            this._ds["setHasChildren"](row, hasChildren);
	        }
	        if (iconIndex !== undefined) {
	            this._ds["setIconIndex"](row, iconIndex);
	        }
	        return row;
	    };
	    TreeDataSource.prototype._rowAdded = function (root, row) {
	        this._rowCount++;
	        if (this._rows && row.parent === root) {
	            this._rows.push(row);
	        }
	    };
	    TreeDataSource.prototype._addRow = function (root, parent, childrenField, iconField, values) {
	        var row = this._createRow(childrenField, iconField, values);
	        parent["_insertChild"](parent.count, row, true, true);
	        this._rowAdded(root, row);
	        return row;
	    };
	    TreeDataSource.prototype._addRow2 = function (root, parent, hasChildren, iconIndex, values) {
	        var row = this._createRow2(hasChildren, iconIndex, values);
	        parent["_insertChild"](parent.count, row, true, true);
	        this._rowAdded(root, row);
	        return row;
	    };
	    return TreeDataSource;
	}(Base_1.Base));
	exports.TreeDataSource = TreeDataSource;
	var ArraySourceImpl = /** @class */ (function (_super) {
	    __extends(ArraySourceImpl, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ArraySourceImpl(ds, rootRow) {
	        return _super.call(this, ds, rootRow) || this;
	    }
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ArraySourceImpl.prototype._loadData = function (source, parent, treeField, needSorting, childrenField, iconField) {
	        this._prepareLoad(parent);
	        if (!source || source.length < 1) {
	            return this._rowCount;
	        }
	        var ds = this.provider;
	        var cnt = source.length;
	        var rows = [];
	        for (var i = 0; i < cnt; i++) {
	            rows[i] = i;
	            if (!Array.isArray(source[i])) {
	                source[i] = this._objectToArray(source[i], ds);
	                //} else {
	                //	provider.$_internalCalculateValues(source[i]);
	            }
	        }
	        if (needSorting) {
	            this.$_sortRows(rows, source, treeField, 0, cnt - 1);
	        }
	        ds.beginUpdate();
	        try {
	            this.$_buildTree(parent ? parent : this.rootRow, rows, source, treeField, childrenField, iconField);
	        }
	        finally {
	            ds.endUpdate(false);
	        }
	        return this.insertedCount;
	    };
	    ArraySourceImpl.prototype.$_sortRows = function (rows, values, field, left, right) {
	        function compare(r1, r2) {
	            var s1 = values[r1][field];
	            var s2 = values[r2][field];
	            if (s1 == s2) {
	                return 0;
	            }
	            if (s1 < s2) {
	                return -1;
	            }
	            return 1;
	        }
	        do {
	            var r = void 0;
	            var v = void 0;
	            var i = left;
	            var j = right;
	            var m = rows[Math.floor((left + right) / 2)];
	            do {
	                while (true) {
	                    r = rows[i];
	                    v = compare(m, r);
	                    if (v <= 0)
	                        break;
	                    i++;
	                }
	                while (true) {
	                    r = rows[j];
	                    v = compare(m, r);
	                    if (v >= 0)
	                        break;
	                    j--;
	                }
	                if (i <= j) {
	                    if (i != j) {
	                        var t = rows[i];
	                        rows[i] = rows[j];
	                        rows[j] = t;
	                    }
	                    i++;
	                    j--;
	                }
	            } while (i <= j);
	            if (left < j) {
	                this.$_sortRows(rows, values, field, left, j);
	            }
	            left = i;
	        } while (left < right);
	    };
	    ArraySourceImpl.prototype.$_buildTree = function (parent, rows, values, treeField, childrenField, iconField) {
	        function getParent(self, prev, row, values) {
	            var tree = values[treeField];
	            while (prev != parent) {
	                var s = prev.getValue(treeField);
	                if (self.parentCallback) {
	                    if (self.parentCallback(s, tree)) {
	                        return prev;
	                    }
	                }
	                else if (tree.indexOf(s) == 0) {
	                    return prev;
	                }
	                prev = prev.parent;
	            }
	            return parent;
	        }
	        var r = rows[0];
	        var row = this._createRow(childrenField, iconField, values[r]);
	        var p = getParent(this, parent, row, values[r]);
	        p["_insertChild"](p.count, row, true, true);
	        this._rowAdded(parent, row);
	        if (rows.length > 1) {
	            var cnt = rows.length;
	            var prev = row;
	            for (var i = 1; i < cnt; i++) {
	                r = rows[i];
	                row = this._createRow(childrenField, iconField, values[r]);
	                p = getParent(this, prev, row, values[r]);
	                p["_insertChild"](p.count, row, true, true);
	                this._rowAdded(parent, row);
	                prev = row;
	            }
	        }
	    };
	    return ArraySourceImpl;
	}(TreeDataSource));
	var ArrayTreeSource = /** @class */ (function (_super) {
	    __extends(ArrayTreeSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ArrayTreeSource(ds, rootRow) {
	        return _super.call(this, ds, rootRow) || this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ArrayTreeSource.prototype.load = function (parent, source, treeField, needSorting, childrenField, iconField) {
	        return this._loadData(source, parent, treeField, needSorting, childrenField, iconField);
	    };
	    return ArrayTreeSource;
	}(ArraySourceImpl));
	exports.ArrayTreeSource = ArrayTreeSource;
	var CsvTreeSource = /** @class */ (function (_super) {
	    __extends(CsvTreeSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CsvTreeSource(ds, rootRow) {
	        return _super.call(this, ds, rootRow) || this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CsvTreeSource.prototype.load = function (parent, source, treeField, needSorting, childrenField, iconField) {
	        var rows = DataHelper_1.DataHelper.csvToArray(this.provider, source);
	        return this._loadData(rows, parent, treeField, needSorting, childrenField, iconField);
	    };
	    return CsvTreeSource;
	}(ArraySourceImpl));
	exports.CsvTreeSource = CsvTreeSource;
	var JsonTreeSource = /** @class */ (function (_super) {
	    __extends(JsonTreeSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function JsonTreeSource(ds, rootRow) {
	        return _super.call(this, ds, rootRow) || this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    JsonTreeSource.prototype.load = function (parent, source, rowsProp, childrenField, iconField) {
	        this._prepareLoad(parent);
	        if (source) {
	            var rows = DataLoader_1.DataPath.extractJson(source, rowsProp);
	            if (rows && rows.length > 0) {
	                this.provider.beginUpdate();
	                try {
	                    this.$_buildJsonTree(this.provider, parent ? parent : this.rootRow, rows, rowsProp, childrenField, iconField);
	                }
	                finally {
	                    this.provider.endUpdate(false);
	                }
	            }
	        }
	        return this._rowCount;
	    };
	    JsonTreeSource.prototype.load2 = function (parent, source, rowsProp, childRowsProp, childrenProp, iconProp) {
	        this._prepareLoad(parent);
	        if (source) {
	            var rows = DataLoader_1.DataPath.extractJson(source, rowsProp);
	            if (rows && rows.length > 0) {
	                this.provider.beginUpdate();
	                try {
	                    this.$_buildJsonTree2(this.provider, parent ? parent : this.rootRow, rows, childRowsProp, childrenProp, iconProp);
	                }
	                finally {
	                    this.provider.endUpdate(false);
	                }
	            }
	        }
	        return this._rowCount;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    JsonTreeSource.prototype.$_buildJsonTree = function (ds, parent, source, rowsProp, childrenField, iconField) {
	        function build(self, p, rows, fldNames) {
	            var flds = fldNames.length;
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var obj = rows[i];
	                var vals = new Array(flds);
	                for (var c = 0; c < flds; c++) {
	                    var fld = fldNames[c];
	                    if (obj.hasOwnProperty(fld)) {
	                        vals[c] = obj[fld];
	                    }
	                }
	                var row = self["_addRow"](parent, p, childrenField, iconField, vals);
	                if (obj.hasOwnProperty(rowsProp)) {
	                    var arr = obj[rowsProp];
	                    if (Array.isArray(arr) && arr.length > 0) {
	                        build(self, row, arr, fldNames);
	                    }
	                }
	            }
	        }
	        var fldNames = ds.getOrgFieldNames();
	        build(this, parent, source, fldNames);
	    };
	    JsonTreeSource.prototype.$_buildJsonTree2 = function (ds, parent, source, rowsProp, childrenProp, iconProp) {
	        function build(self, p, rows, fldNames) {
	            var flds = fldNames.length;
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var obj = rows[i];
	                var vals = new Array(flds);
	                for (var c = 0; c < flds; c++) {
	                    var fld = fldNames[c];
	                    if (obj.hasOwnProperty(fld)) {
	                        vals[c] = obj[fld];
	                    }
	                }
	                var row = self["_addRow2"](parent, p, obj[childrenProp], obj[iconProp], vals);
	                if (obj.hasOwnProperty(rowsProp)) {
	                    var arr = obj[rowsProp];
	                    if (Array.isArray(arr) && arr.length > 0) {
	                        build(self, row, arr, fldNames);
	                    }
	                }
	            }
	        }
	        var fldNames = ds.getOrgFieldNames();
	        build(this, parent, source, fldNames);
	    };
	    return JsonTreeSource;
	}(TreeDataSource));
	exports.JsonTreeSource = JsonTreeSource;
	var XmlTreeSource = /** @class */ (function (_super) {
	    __extends(XmlTreeSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function XmlTreeSource(ds, rootRow) {
	        return _super.call(this, ds, rootRow) || this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    XmlTreeSource.prototype.load = function (parent, source, rowsProp, childrenField, iconField) {
	        this._prepareLoad(parent);
	        if (source) {
	            var xml = typeof source === "string" ? XmlUtils_1.XmlUtils.parseXml(source) : source;
	            if (xml) {
	                var rows = DataLoader_1.DataPath.extractXml(xml.documentElement, rowsProp);
	                if (rows && rows.length > 0) {
	                    this.provider.beginUpdate();
	                    try {
	                        this.$_buildXmlTree(this.provider, parent ? parent : this.rootRow, rows, rowsProp, childrenField, iconField);
	                    }
	                    finally {
	                        this.provider.endUpdate(false);
	                    }
	                }
	            }
	        }
	        return this._rowCount;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    XmlTreeSource.prototype.$_buildXmlTree = function (ds, parent, source, rowElement, childrenField, iconField) {
	        function build(self, p, rows, fields, fieldNames) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var xml = rows[i];
	                var vals = DataHelper_1.DataHelper.xmlToRow(xml, fields, fieldNames);
	                var row = self["_addRow"](parent, p, childrenField, iconField, vals);
	                var elts = DataLoader_1.DataPath.extractXml(xml, rowElement);
	                if (elts && elts.length > 0) {
	                    build(self, row, elts, fields, fieldNames);
	                }
	            }
	        }
	        build(this, parent, source, ds.getFields(), ds.getOrgFieldNames());
	    };
	    return XmlTreeSource;
	}(ArraySourceImpl));
	exports.XmlTreeSource = XmlTreeSource;
	});

	unwrapExports(TreeDataSource_1);
	var TreeDataSource_2 = TreeDataSource_1.TreeDataSource;
	var TreeDataSource_3 = TreeDataSource_1.ArrayTreeSource;
	var TreeDataSource_4 = TreeDataSource_1.CsvTreeSource;
	var TreeDataSource_5 = TreeDataSource_1.JsonTreeSource;
	var TreeDataSource_6 = TreeDataSource_1.XmlTreeSource;

	var LocalTreeDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// UpdateTreeDataCommand.ts
	// 2019. 11. 15. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var LocalTreeDataCommand = /** @class */ (function (_super) {
	    __extends(LocalTreeDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function LocalTreeDataCommand(ds) {
	        return _super.call(this, ds) || this;
	    }
	    return LocalTreeDataCommand;
	}(DataEditCommand_1.DataEditCommand));
	exports.LocalTreeDataCommand = LocalTreeDataCommand;
	var LocalTreeDataCommandStack = /** @class */ (function (_super) {
	    __extends(LocalTreeDataCommandStack, _super);
	    function LocalTreeDataCommandStack() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return LocalTreeDataCommandStack;
	}(EditCommand_1.EditCommandStack));
	exports.LocalTreeDataCommandStack = LocalTreeDataCommandStack;
	});

	unwrapExports(LocalTreeDataCommand_1);
	var LocalTreeDataCommand_2 = LocalTreeDataCommand_1.LocalTreeDataCommand;
	var LocalTreeDataCommand_3 = LocalTreeDataCommand_1.LocalTreeDataCommandStack;

	var UpdateTreeDataCommand_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// UpdateTreeDataCommand.ts
	// 2019. 11. 15. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var UpdateTreeDataCommand = /** @class */ (function (_super) {
	    __extends(UpdateTreeDataCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function UpdateTreeDataCommand(ds, row, values, strict) {
	        var _this = _super.call(this, ds) || this;
	        _this._row = row;
	        _this._values = _this._cloneRow(values);
	        _this._strict = strict;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    UpdateTreeDataCommand.prototype._doRun = function (ds) {
	        var save = {};
	        save.row = this._row["_keepRow"](ds);
	        if (save.result = this._row["$_update"](ds, this._values, this._strict, false)) {
	            this._newState = this._row.rowState;
	        }
	        return save;
	    };
	    UpdateTreeDataCommand.prototype._doRedo = function (ds, save) {
	        this._row["$_update"](ds, this._values, this._strict, false);
	    };
	    UpdateTreeDataCommand.prototype._doUndo = function (ds, save) {
	        this._row["_yieldRow"](ds, save.row);
	        if (save.row.state != this._newState) {
	            ds["_fireRowStateChanged"](this._row, false);
	        }
	        ds["_rowUpdated"](this._row);
	    };
	    return UpdateTreeDataCommand;
	}(LocalTreeDataCommand_1.LocalTreeDataCommand));
	exports.UpdateTreeDataCommand = UpdateTreeDataCommand;
	});

	unwrapExports(UpdateTreeDataCommand_1);
	var UpdateTreeDataCommand_2 = UpdateTreeDataCommand_1.UpdateTreeDataCommand;

	var TreeDataProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeDataProvider.ts
	// 2019. 09. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var TreeDataRow = /** @class */ (function (_super) {
	    __extends(TreeDataRow, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataRow(ds) {
	        var _this = _super.call(this) || this;
	        _this._children = null;
	        _this._descendantCount = 0;
	        _this._rowId = ds && ds["_nextRowId"]++;
	        return _this;
	    }
	    TreeDataRow.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeDataRow.prototype, "rowId", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** rowId */
	        get: function () {
	            return this._rowId;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "provider", {
	        /** provider */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "parent", {
	        /** parent */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "index", {
	        /** index */
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "level", {
	        /** level */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "iconIndex", {
	        /** iconIndex */
	        get: function () {
	            return -1;
	        },
	        set: function (value) {
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "hasChildren", {
	        /** hasChildren */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._children ? this._children.length : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "descendantCount", {
	        /** descendantCount */
	        get: function () {
	            return this._descendantCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "children", {
	        /** children */
	        get: function () {
	            return this._children ? this._children.concat() : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "descendants", {
	        /** descendants */
	        get: function () {
	            function collectRows(p, rows) {
	                for (var i = 0, cnt = p.count; i < cnt; i++) {
	                    var row = p.getChild(i);
	                    rows.push(row);
	                    collectRows(row, rows);
	                }
	            }
	            if (this._children) {
	                var rows = [];
	                collectRows(this, rows);
	                return rows;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "ancestors", {
	        /** ancestors */
	        get: function () {
	            var rows = null;
	            var p = this.parent;
	            if (p) {
	                rows = [];
	                while (p && p.rowId >= 0) {
	                    rows.push(p);
	                    p = p.parent;
	                }
	            }
	            return rows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "rowState", {
	        /** rowState */
	        get: function () {
	            return RowState_1.RowState.NONE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRow.prototype, "values", {
	        /** values */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeDataRow.prototype.getChild = function (index) {
	        if (index >= 0) {
	            if (!this._children || index >= this._children.length) {
	                throw new RangeError("Index is invalid: " + index);
	            }
	            return this._children[index];
	        }
	        throw new RangeError("Index is invalid: " + index);
	    };
	    TreeDataRow.prototype.getChildObjects = function (recursive, childrenProp, iconProp, addRowId) {
	        var children = this._children;
	        if (children) {
	            var objects = [];
	            childrenProp = childrenProp || "rows";
	            iconProp = iconProp || "iconIndex";
	            for (var i = 0, cnt = children.length; i < cnt; i++) {
	                var child = children[i];
	                var obj = child.getObject();
	                if (addRowId) {
	                    obj["_rowId"] = child._rowId;
	                }
	                if (recursive) {
	                    obj[childrenProp] = child.getChildObjects(recursive, childrenProp, iconProp, addRowId);
	                }
	                obj[iconProp] = child.iconIndex;
	                objects.push(obj);
	            }
	            return objects;
	        }
	        return null;
	    };
	    TreeDataRow.prototype.$_createTreeOutputRows = function (rows, options, childrenProp) {
	        // function rowsToDataRows(rows, dataRows, childrenProp) {
	        //   for (var i=0, cnt=rows.length; i < cnt; i++) {
	        //   	var row = rows[i];
	        //     dataRows.push(rows[i]);
	        //     if (childrenProp && row[childrenProp] && row[childrenProp].length) {
	        //       rowsToDataRows(row[childrenProp], dataRows, childrenProp)
	        //     }
	        //   }
	        // }
	        // var dataRows = [];
	        // rowsToDataRows(rows,dataRows,childrenProp);
	        // var provider = this.provider();
	        // var fldCount = provider.fieldCount();
	        // var rowCount = dataRows.length;
	        // var r, row;
	        // if (!(options instanceof DataOutputOptions)) {
	        //     options = new DataOutputOptions(options);
	        // }
	        // var nullDate = options.nullDateText();
	        // var nullText = options.nullText();
	        // var nanText = options.nanText();
	        // for (var i = 0; i < fldCount; i++) {
	        //     var field = provider.getField(i);
	        //     var prop = field.orgFieldName();
	        //     var callback, writer;
	        //     if (field._dataType == ValueType.DATETIME && ((callback = options._datetimeCallback) || (writer = options._datetimeWriter) || (nullDate != null && nullDate != undefined) )) {
	        //         if (callback) {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 row[prop] = callback(row["_rowId"], prop, row[prop]);
	        //             }
	        //         } else {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 var d = row[prop];
	        //                 row[prop] = d ? writer ? writer.getText(row[prop]) : d : nullDate;
	        //             }
	        //         }
	        //     } else if (field._dataType == ValueType.BOOLEAN && ((callback = options._booleanCallback) || (writer = options._booleanFormatter))) {
	        //         if (callback) {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 row[prop] = callback(row["_rowId"], prop, row[prop]);
	        //             }
	        //         } else {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 row[prop] = writer.formatValue(row[prop]);
	        //             }
	        //         }
	        //     } else if (field._dataType == ValueType.NUMBER && ((callback = options._numberCallback) || (writer = options._numberFormatter) || (nanText != null && nanText != undefined))) {
	        //         if (callback) {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 row[prop] = callback(row["_rowId"], prop, row[prop]);
	        //             }
	        //         } else {
	        //             for (r = 0; r < rowCount; r++) {
	        //                 row = dataRows[r];
	        //                 var v = row[prop];
	        //                 row[prop] = v == null || isNaN(v) ? nanText : writer ? writer.format(v) : v;
	        //             }
	        //         }
	        //     } else if (nullText != null && nullText != undefined) {
	        //         for (r = 0; r < rowCount; r++) {
	        //             row = dataRows[r];
	        //             var v = row[prop];
	        //             row[prop] = v == null || v == undefined ? nullText : v;
	        //         }
	        //     }
	        // }
	        // for (var i =0, cnt=dataRows.length; i<cnt; i++) {
	        // 	delete dataRows[i]["_rowId"];
	        // }
	    };
	    TreeDataRow.prototype.getOutput = function (options, iconProp) {
	        // if (options) {
	        // 	var row = this.getObject();
	        // 	row[iconProp || "iconIndex"] = this.iconIndex();
	        // 	row["_rowId"] = this._rowId;
	        // 	this.$_createTreeOutputRows([row], options);
	        // 	return row;
	        // }
	        return null;
	    };
	    TreeDataRow.prototype.getChildOutputObjects = function (options, recursive, childrenProp, iconProp) {
	        var rows = this.getChildObjects(recursive, childrenProp, iconProp, true);
	        rows && options && this.$_createTreeOutputRows(rows, options, childrenProp);
	        return rows;
	    };
	    TreeDataRow.prototype.findById = function (rowId) {
	        if (this._children) {
	            for (var i = 0, cnt = this._children.length; i < cnt; i++) {
	                var child = this._children[i];
	                if (child.rowId == rowId) {
	                    return child;
	                }
	                child = child.findById(rowId);
	                if (child) {
	                    return child;
	                }
	            }
	        }
	        return null;
	    };
	    TreeDataRow.prototype.indexOf = function (child) {
	        return this._children ? this._children.indexOf(child) : -1;
	    };
	    TreeDataRow.prototype.insertChild = function (index, child, noState) {
	        return this._insertChild(index, child, false, noState);
	    };
	    TreeDataRow.prototype.addChild = function (child, noState) {
	        return this._insertChild(this.count, child, false, noState);
	    };
	    TreeDataRow.prototype.removeChild = function (child) {
	        return this._removeChild(child, false);
	    };
	    TreeDataRow.prototype.clearChildren = function () {
	        var ds = this.provider;
	        if (ds && !ds["_checkClientState"]())
	            return;
	        this._removeChildren();
	    };
	    TreeDataRow.prototype.findChild = function (fields, values) {
	        var ds = this.provider;
	        if (!ds || !fields || fields.length < 1 || !values || values.length < fields.length) {
	            return null;
	        }
	        var flds = [];
	        var vals = [];
	        for (var i = 0, cnt = fields.length; i < cnt; i++) {
	            var c = void 0;
	            if (typeof fields[i] === "string") {
	                c = ds.getFieldIndex(fields[i]);
	            }
	            else {
	                c = Number(fields[i]);
	            }
	            if (c >= 0 && c < ds.fieldCount && flds.indexOf(c) < 0) {
	                flds.push(c);
	                vals.push(values[i]);
	            }
	        }
	        for (var i = 0, len = flds.length; i < len; i++) {
	            flds[i] = ds.getField(flds[i]);
	        }
	        return this.$_findChild(flds, vals);
	    };
	    TreeDataRow.prototype.isAncestorOf = function (row) {
	        if (row && row !== this) {
	            var p = row.parent;
	            while (p && p !== this) {
	                p = p.parent;
	            }
	            return p === this;
	        }
	        return false;
	    };
	    TreeDataRow.prototype.clearRowStates = function (deleteRows, rowEvents) {
	        var ds = this.provider;
	        if (!ds) {
	            return;
	        }
	        var rows = [];
	        var deletes = deleteRows ? [] : null;
	        this._collectStateRows(rows, deletes);
	        var nState = rows.length;
	        var nDelete = deletes ? deletes.length : 0;
	        if (nState == 0 && nDelete == 0) {
	            return;
	        }
	        if (rowEvents) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                rows[i]._changeRowState(RowState_1.RowState.NONE, true, false);
	            }
	        }
	        else if (nState) {
	            ds.changeRowStates(rows, RowState_1.RowState.NONE);
	        }
	        if (nDelete) {
	            //   	if (rowEvents) {
	            //   		for (var i in deletes) {
	            // 		provider.deleteRow(deletes[i]);
	            // 	}
	            // } else {
	            ds.deleteRows(deletes);
	            // }
	        }
	    };
	    TreeDataRow.prototype.toTreeString = function () {
	        var s = this.rowId + "";
	        var indent = new Array(this.level + 1).join("  ");
	        for (var i = 0; i < this.count; i++) {
	            s += "\n" + indent + this.getChild(i).toTreeString();
	        }
	        return s;
	    };
	    TreeDataRow.prototype._checkFieldIndex = function (field) {
	        var flds = this.provider.fieldCount;
	        if (field < 0 || field >= flds) {
	            throw new DataSource_1.DataSourceError("Field index is out of bounds: " + field);
	        }
	    };
	    TreeDataRow.prototype._descendantCountChanged = function (count) {
	        this._descendantCount += count;
	        var p = this.parent;
	        if (p) {
	            p._descendantCountChanged(count);
	        }
	    };
	    TreeDataRow.prototype._moveChild = function (index, newIndex) {
	        if (index < 0 || index >= this._children.length) {
	            throw new RangeError("index is out of range: " + index);
	        }
	        if (newIndex < 0 || newIndex >= this._children.length) {
	            throw new RangeError("newIndex is out of range: " + newIndex);
	        }
	        var child = this._children[index];
	        if (index > newIndex) {
	            for (var i = index; i > newIndex; i--) {
	                this._children[i] = this._children[i - 1];
	            }
	        }
	        else {
	            for (var i = index; i < newIndex; i++) {
	                this._children[i] = this._children[i + 1];
	            }
	        }
	        this._children[newIndex] = child;
	    };
	    TreeDataRow.prototype._changeParent = function (parent, index) {
	        if (index < 0 || index > parent._children.length) {
	            throw new RangeError("index is out of range: " + index);
	        }
	        var old = this.parent;
	        var oldIndex = this.index;
	        old._children.splice(oldIndex, 1);
	        old._descendantCountChanged(-1 - this.descendantCount);
	        old._detach(this);
	        parent._children.splice(index, 0, this);
	        parent._descendantCountChanged(1 + this.descendantCount);
	        parent._attach(this);
	    };
	    TreeDataRow.prototype._insertChild = function (index, child, force, noState) {
	        var ds = this.provider;
	        if (ds && !force) {
	            if (!ds["_checkClientState"]()) {
	                return false;
	            }
	            ds.refreshFieldFormats();
	        }
	        if (!child) {
	            throw new Error("child is null");
	        }
	        this._children = this._children || [];
	        if (index < 0 || index > this._children.length) {
	            throw new RangeError("Insert index is invalid: " + index);
	        }
	        if (force || this._doChildAdding(index, child)) {
	            this._children.splice(index, 0, child);
	            this._descendantCountChanged(1 + child.descendantCount);
	            this._attach(child);
	            if (!noState) {
	                child._changeRowState(RowState_1.RowState.CREATED, true, false);
	            }
	            this._doChildAdded(index, child);
	            return true;
	        }
	        return false;
	    };
	    TreeDataRow.prototype._addChild = function (child, force, noState) {
	        return this._insertChild(this.count, child, force, noState);
	    };
	    TreeDataRow.prototype.$_removeChild = function (child, index, force) {
	        if (force || this._doChildRemoving(child)) {
	            this._children.splice(index, 1);
	            this._descendantCountChanged(-1 - child.descendantCount);
	            this._detach(child);
	            this._doChildRemoved(child);
	            return true;
	        }
	        return false;
	    };
	    TreeDataRow.prototype._removeChild = function (child, force) {
	        var ds = this.provider;
	        if (ds && !force) {
	            if (!ds["_checkClientState"]())
	                return;
	        }
	        if (child && this._children) {
	            for (var i = this._children.length; i--;) {
	                if (this._children[i] === child) {
	                    if (ds.softDeleting && ds.checkStates) {
	                        switch (child.rowState) {
	                            case RowState_1.RowState.CREATED:
	                                if (ds.deleteCreated) {
	                                    return this.$_removeChild(child, i, force);
	                                }
	                                else {
	                                    child._changeRowState(RowState_1.RowState.CREATE_AND_DELETED, true, false);
	                                }
	                                break;
	                            case RowState_1.RowState.DELETED:
	                            case RowState_1.RowState.CREATE_AND_DELETED:
	                                break;
	                            default:
	                                child._changeRowState(RowState_1.RowState.DELETED, true, false);
	                        }
	                    }
	                    else {
	                        return this.$_removeChild(child, i, force);
	                    }
	                }
	            }
	        }
	        return false;
	    };
	    TreeDataRow.prototype._removeChildren = function () {
	        if (this._children && this._children.length > 0) {
	            this._children.splice(0, this._children.length);
	            this._descendantCountChanged(-this._descendantCount);
	            this._doCleared();
	        }
	    };
	    TreeDataRow.prototype._setChildren = function (children) {
	        if (this._children && this._children.length > 0) {
	            this._children.splice(0, this._children.length);
	        }
	        var dcount = -this._descendantCount;
	        var cnt;
	        if (children && (cnt = children.length) > 0) {
	            if (!this._children) {
	                this._children = [];
	            }
	            for (var i = 0; i < cnt; i++) {
	                var child = children[i];
	                this._children.push(child);
	                dcount += 1 + child.descendantCount;
	                this._attach(child);
	            }
	        }
	        this._descendantCountChanged(dcount);
	    };
	    TreeDataRow.prototype.$_findChild = function (flds, vals) {
	        var len = flds.length;
	        var cnt = this.count;
	        for (var i = 0; i < cnt; i++) {
	            var child = this._children[i];
	            var found = true;
	            for (var c = 0; c < len; c++) {
	                if (!flds[c].equalValues(vals[c], child.getValue(flds[c].index))) {
	                    found = false;
	                    break;
	                }
	            }
	            if (found) {
	                return child;
	            }
	            child = child.$_findChild(flds, vals);
	            if (child) {
	                return child;
	            }
	        }
	        return null;
	    };
	    TreeDataRow.prototype._collectStateRows = function (rows, deletes) {
	        for (var i = this.count; i--;) {
	            var row = this.getChild(i);
	            var state = row.rowState;
	            if (deletes && (state == RowState_1.RowState.DELETED || state == RowState_1.RowState.CREATE_AND_DELETED)) {
	                deletes.push(row);
	            }
	            else {
	                if (state != RowState_1.RowState.NONE) {
	                    rows.push(row);
	                }
	                row._collectStateRows(rows, deletes);
	            }
	        }
	    };
	    TreeDataRow.prototype._clearOrgValues = function () {
	        for (var i = this.count; i--;) {
	            this.getChild(i)._clearOrgValues();
	        }
	    };
	    TreeDataRow.prototype._restoreState = function (recursive, restoredRows) {
	        if (recursive) {
	            for (var i = this.count; i--;) {
	                this.getChild(i)._restoreState(true, restoredRows);
	            }
	        }
	        return false;
	    };
	    TreeDataRow.prototype._restoreRow = function (recursive, restoredRows) {
	        if (recursive) {
	            for (var i = this.count; i--;) {
	                this.getChild(i)._restoreRow(true, restoredRows);
	            }
	        }
	        return false;
	    };
	    TreeDataRow.prototype._doChildAdding = function (index, child) {
	        var ds = this.provider;
	        return ds ? ds["_rowAdding"](this, index, child) : true;
	    };
	    TreeDataRow.prototype._doChildAdded = function (index, child) {
	        var ds = this.provider;
	        ds && ds["_rowAdded"](child);
	    };
	    TreeDataRow.prototype._doChildRemoving = function (child) {
	        var ds = this.provider;
	        return ds ? ds["_rowRemoving"](child) : true;
	    };
	    TreeDataRow.prototype._doChildRemoved = function (child) {
	        var ds = this.provider;
	        ds && ds["_rowRemoved"](child);
	    };
	    TreeDataRow.prototype._doCleared = function () {
	        var ds = this.provider;
	        ds && ds["_rowCleared"](this);
	    };
	    return TreeDataRow;
	}(Base_1.Base));
	exports.TreeDataRow = TreeDataRow;
	var RootTreeRow = /** @class */ (function (_super) {
	    __extends(RootTreeRow, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RootTreeRow(provider) {
	        var _this = _super.call(this, provider) || this;
	        _this._provider = provider;
	        return _this;
	    }
	    RootTreeRow.prototype._doDispose = function () {
	        this._provider = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RootTreeRow.prototype.set = function (source) {
	        var children = [];
	        for (var i = 0; i < source.count; i++) {
	            children.push(source.getChild(i).copy());
	        }
	        this._setChildren(children);
	    };
	    Object.defineProperty(RootTreeRow.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._provider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeRow.prototype, "rowId", {
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeRow.prototype, "index", {
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeRow.prototype, "hasChildren", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RootTreeRow.prototype.copy = function () {
	        var root = new RootTreeRow(null);
	        for (var i = 0, cnt = this.count; i < cnt; i++) {
	            var row = this.getChild(i).copy();
	            root._addChild(row, true, true);
	        }
	        root._provider = this._provider;
	        return root;
	    };
	    RootTreeRow.prototype._changeRowState = function (newState, fireEvent, refresh) {
	        return false;
	    };
	    RootTreeRow.prototype.getObject = function () {
	        return null;
	    };
	    RootTreeRow.prototype.getValue = function (field) {
	        return undefined;
	    };
	    RootTreeRow.prototype.setValue = function (field, value, noState) {
	    };
	    RootTreeRow.prototype._attach = function (child) {
	        child["_parent"] = this;
	    };
	    RootTreeRow.prototype._detach = function (child) {
	        if (child["_parent"] === this) {
	            child["_parent"] = null;
	        }
	    };
	    RootTreeRow.prototype.update = function (values) {
	        return false;
	    };
	    RootTreeRow.prototype.updateStrict = function (values) {
	        return false;
	    };
	    RootTreeRow.prototype.$_setHasChildren = function (value) {
	    };
	    RootTreeRow.prototype.$_setIconIndex = function (value) {
	    };
	    RootTreeRow.prototype._keepRow = function (ds) { };
	    RootTreeRow.prototype._yieldRow = function (ds, save) { };
	    RootTreeRow.prototype._keepStates = function (ds) { };
	    RootTreeRow.prototype._yieldStates = function (ds, save) { };
	    return RootTreeRow;
	}(TreeDataRow));
	exports.RootTreeRow = RootTreeRow;
	var TreeDataProvider = /** @class */ (function (_super) {
	    __extends(TreeDataProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataProvider() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._nextRowId = 0;
	        _this._commandListeners = [];
	        return _this;
	    }
	    TreeDataProvider.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // EditCommandStackOwner
	    //-------------------------------------------------------------------------
	    TreeDataProvider.prototype.editCommandStackChanged = function (stack, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    TreeDataProvider.prototype.registerCommandListener = function (listener) {
	        if (listener && this._commandListeners.indexOf(listener) < 0) {
	            this._commandListeners.push(listener);
	        }
	    };
	    TreeDataProvider.prototype.unregisterCommandListener = function (listener) {
	        var i = this._commandListeners.indexOf(listener);
	        if (i >= 0) {
	            this._commandListeners.splice(i, 1);
	        }
	    };
	    TreeDataProvider.prototype._keepCommandStates = function (row) {
	        if (this._commandListeners.length > 0) {
	            return this._commandListeners[0].getCommandStates(row);
	        }
	        return undefined;
	    };
	    TreeDataProvider.prototype._yieldCommandStates = function (row, save) {
	        if (this._commandListeners.length > 0) {
	            return this._commandListeners[0].setCommandStates(row, save);
	        }
	    };
	    return TreeDataProvider;
	}(DataSource_1.DataSource));
	exports.TreeDataProvider = TreeDataProvider;
	});

	unwrapExports(TreeDataProvider_1);
	var TreeDataProvider_2 = TreeDataProvider_1.TreeDataRow;
	var TreeDataProvider_3 = TreeDataProvider_1.RootTreeRow;
	var TreeDataProvider_4 = TreeDataProvider_1.TreeDataProvider;

	var LocalTreeDataProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// LocalTreeDataProvider.ts
	// 2019. 11. 15. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });











	var TreeDataRowImpl = /** @class */ (function (_super) {
	    __extends(TreeDataRowImpl, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataRowImpl(ds, values) {
	        var _this = _super.call(this, ds) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._iconIndex = -1;
	        _this._hasChildren = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._parent = null;
	        _this._values = null;
	        _this._orgValues = null;
	        _this._state = RowState_1.RowState.NONE;
	        _this._extents = 0;
	        if (ds && values) {
	            var flds = ds.fieldCount;
	            var cnt = Math.min(values.length, flds);
	            _this._values = new Array(flds);
	            for (var i = 0, cnt_1 = Math.min(values.length, flds); i < cnt_1; i++) {
	                _this._values[i] = ds.getField(i).readValue(values[i]);
	            }
	        }
	        return _this;
	    }
	    TreeDataRowImpl.prototype._doDispose = function () {
	        this._values = null;
	        this._orgValues = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeDataRowImpl.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._parent && this._parent.provider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "parent", {
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "index", {
	        get: function () {
	            return this._parent ? this._parent.indexOf(this) : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "level", {
	        get: function () {
	            return this._parent ? this._parent.level + 1 : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "hasChildren", {
	        get: function () {
	            return this._hasChildren;
	        },
	        set: function (value) {
	            if (value != this._hasChildren) {
	                this._hasChildren = value;
	                var ds = this.provider;
	                ds && ds["_hasChildrenChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "iconIndex", {
	        get: function () {
	            return this._iconIndex;
	        },
	        set: function (value) {
	            if (isNaN(value)) {
	                value = -1;
	            }
	            if (value != this._iconIndex) {
	                this._iconIndex = value;
	                var ds = this.provider;
	                ds && ds["_iconIndexChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "rowState", {
	        get: function () {
	            return this._state;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeDataRowImpl.prototype, "values", {
	        /** values */
	        get: function () {
	            return this._values && this._values.concat();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeDataRowImpl.prototype._attach = function (child) {
	        child._parent = this;
	    };
	    TreeDataRowImpl.prototype._detach = function (child) {
	        if (child._parent === this) {
	            child._parent = null;
	        }
	    };
	    TreeDataRowImpl.prototype._changeRowState = function (newState, fireEvent, refresh) {
	        var ds = this.provider;
	        if (ds && newState != this._state) {
	            var oldState = this._state;
	            this._state = newState;
	            if (newState == RowState_1.RowState.UPDATED && ds["_needOrgValues"]) {
	                this._orgValues = this._values.concat();
	            }
	            else if (oldState == RowState_1.RowState.UPDATED) {
	                if (this._orgValues) {
	                    this._orgValues = null;
	                }
	            }
	            if (fireEvent) {
	                ds["_stateChanged"](this, refresh);
	            }
	            return true;
	        }
	        return false;
	    };
	    TreeDataRowImpl.prototype.getValue = function (field) {
	        var ds = this.provider;
	        if (ds) {
	            this._checkFieldIndex(field);
	            if (this._values) {
	                return this._values[field];
	            }
	            throw new Error("Row data is not loaded");
	        }
	        return undefined;
	    };
	    TreeDataRowImpl.prototype.setValue = function (field, value, noState) {
	        var ds = this.provider;
	        if (ds) {
	            if (!ds["_checkClientState"]())
	                return;
	            ds.refreshFieldFormats();
	            this._checkFieldIndex(field);
	            if (this._values) {
	                if (value != this._values[field]) {
	                    var oldVals = null;
	                    var needState = ds.checkStates && (this._state == RowState_1.RowState.NONE || !this._state);
	                    if (!noState && needState && ds["_needOrgValues"]) {
	                        oldVals = this._values.concat();
	                    }
	                    this._values[field] = value;
	                    ds["_internalCalculateValues"](this._values, this.rowId);
	                    if (!noState && needState) {
	                        if (ds["_needOrgValues"]) {
	                            this._orgValues = oldVals;
	                        }
	                        this._state = RowState_1.RowState.UPDATED;
	                        ds["_stateChanged"](this, false);
	                    }
	                    else if (ds["_needRestore"]) {
	                        this.$_restoreState(ds);
	                    }
	                    ds["_valueChanged"](this, field);
	                }
	                return;
	            }
	            throw new Error("Row data is not loaded");
	        }
	    };
	    TreeDataRowImpl.prototype.getObject = function () {
	        var ds = this.provider;
	        if (ds) {
	            var cnt = ds.fieldCount;
	            var row = {};
	            for (var i = 0; i < cnt; i++) {
	                var fld = ds.getOrgFieldName(i);
	                row[fld] = this._values[i];
	            }
	            return row;
	        }
	        return null;
	    };
	    TreeDataRowImpl.prototype.copy = function () {
	        var row = new TreeDataRowImpl(null, null);
	        row["_rowId"] = this["_rowId"];
	        row._iconIndex = this._iconIndex;
	        row._hasChildren = this._hasChildren;
	        row._state = this._state;
	        row._values = this._values ? this._values.concat() : null;
	        for (var i = 0, cnt = this.count; i < cnt; i++) {
	            var child = this.getChild(i).copy();
	            row._addChild(child, true, true);
	        }
	        return row;
	    };
	    TreeDataRowImpl.prototype.update = function (values) {
	        var ds = this.provider;
	        if (ds) {
	            if (ds["_commands"]) {
	                return ds["_commands"].execute(new UpdateTreeDataCommand_1.UpdateTreeDataCommand(ds, this, values, false));
	            }
	            else {
	                return this.$_update(ds, values, false, false);
	            }
	        }
	        return false;
	    };
	    TreeDataRowImpl.prototype.updateStrict = function (values) {
	        var ds = this.provider;
	        if (ds) {
	            return this.$_update(ds, values, true, false);
	        }
	        return false;
	    };
	    TreeDataRowImpl.prototype._keepRow = function (ds) {
	        var save = {};
	        save.values = this._values && this._values.slice();
	        save.state = this._state;
	        save.orgValues = this._orgValues && this._orgValues.slice();
	        save.outer = ds["_keepCommandStates"](this);
	        return save;
	    };
	    TreeDataRowImpl.prototype._yieldRow = function (ds, save) {
	        this._values = save.values && save.values.slice();
	        this._state = save.state;
	        this._orgValues = save.orgValues && save.orgValues.slice();
	        ds["_yieldCommandStates"](this, save.outer);
	    };
	    TreeDataRowImpl.prototype._keepStates = function (ds) {
	        // const save: any = {};
	        // save.rowId = this._rowIds[row];
	        // save.state = this._rowStates[row];
	        // save.orgValues = this._orgValues && this._orgValues[row] && this._orgValues[row].slice();
	        // return save;
	    };
	    TreeDataRowImpl.prototype._yieldStates = function (ds, save) {
	        // this._rowIds[row] = save.rowId;
	        // this._rowStates[row] = save.state;
	        // if (this._orgValues) {
	        //     this._orgValues[row] = save.orgValues && save.orgValues.slice();
	        // }
	    };
	    TreeDataRowImpl.prototype._keepState = function () {
	        return this._state;
	    };
	    TreeDataRowImpl.prototype._yieldState = function (save) {
	        this._state = save;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeDataRowImpl.prototype.$_update = function (ds, values, strict, force) {
	        if (!force) {
	            if (!ds["_checkClientState"]())
	                return;
	            ds.refreshFieldFormats();
	        }
	        if (values && (force || ds["_rowUpdating"](this))) {
	            this.$_internalUpdate(values, strict, true);
	            ds["_rowUpdated"](this);
	            return true;
	        }
	        return false;
	    };
	    TreeDataRowImpl.prototype._clearOrgValues = function () {
	        if (this._orgValues) {
	            this._orgValues.length = 0;
	            this._orgValues = null;
	        }
	        _super.prototype._clearOrgValues.call(this);
	    };
	    TreeDataRowImpl.prototype._restoreState = function (recursive, restoredRows) {
	        var restored = this.$_restoreState(this.provider);
	        if (restored && restoredRows) {
	            restoredRows.push(this);
	        }
	        _super.prototype._restoreState.call(this, recursive, restoredRows);
	        return restored;
	    };
	    TreeDataRowImpl.prototype._restoreRow = function (recursive, restoredRows) {
	        var restored = false;
	        if (this._state === RowState_1.RowState.UPDATED) {
	            var orgs = this._orgValues;
	            if (orgs) {
	                var vals = this._values;
	                for (var i = 0, cnt = Math.min(orgs.length, this.provider.fieldCount); i < cnt; i++) {
	                    vals[i] = orgs[i];
	                }
	                this._state = RowState_1.RowState.NONE;
	                if (restoredRows) {
	                    restoredRows.push(this);
	                }
	                restored = true;
	            }
	        }
	        _super.prototype._restoreRow.call(this, recursive, restoredRows);
	        return restored;
	    };
	    TreeDataRowImpl.prototype.$_restoreState = function (ds) {
	        if (this._state == RowState_1.RowState.UPDATED && this._orgValues) {
	            var orgs = this._orgValues;
	            var vals = this._values;
	            var ds_1 = this.provider;
	            var strict = ds_1.strictRestore;
	            for (var i = 0, cnt = ds_1.fieldCount; i < cnt; i++) {
	                var v1 = vals.length > i ? vals[i] : undefined;
	                var v2 = orgs.length > i ? orgs[i] : undefined;
	                if (strict) {
	                    if (!ds_1.getField(i).equalValues(v1, v2)) {
	                        return false;
	                    }
	                }
	                else {
	                    if (!ds_1.getField(i).sameValues(v1, v2)) {
	                        return false;
	                    }
	                }
	            }
	            this._state = RowState_1.RowState.NONE;
	            return true;
	        }
	        return false;
	    };
	    TreeDataRowImpl.prototype.$_getUpdatedCells = function () {
	        var orgs = this._orgValues;
	        var vals = this._values;
	        var ds = this.provider;
	        var strict = ds.strictRestore;
	        var cells = [];
	        if (!orgs || orgs.length <= 0) {
	            return null;
	        }
	        for (var i = 0, cnt = ds.fieldCount; i < cnt; i++) {
	            var v1 = vals.length > i ? vals[i] : undefined;
	            var v2 = orgs.length > i ? orgs[i] : undefined;
	            var field = ds.getField(i);
	            if (field.calculated) {
	                continue;
	            }
	            if (strict) {
	                if (!field.equalValues(v1, v2)) {
	                    cells.push({
	                        fieldName: ds.getOrgFieldName(i),
	                        oldValue: orgs[i],
	                        newValue: vals[i]
	                    });
	                }
	            }
	            else {
	                if (!field.sameValues(v1, v2)) {
	                    cells.push({
	                        fieldName: ds.getOrgFieldName(i),
	                        oldValue: orgs[i],
	                        newValue: vals[i]
	                    });
	                }
	            }
	        }
	        return cells;
	    };
	    TreeDataRowImpl.prototype.$_setHasChildren = function (value) {
	        this._hasChildren = value;
	    };
	    TreeDataRowImpl.prototype.$_setIconIndex = function (value) {
	        this._iconIndex = isNaN(value) ? -1 : value;
	    };
	    TreeDataRowImpl.prototype.$_internalUpdate = function (values, strict, stateEvent) {
	        var changed = false;
	        var isAry = Array.isArray(values);
	        var ds = this.provider;
	        if (ds) {
	            var cnt = Math.min(ds.fieldCount, isAry ? values.length : ds.fieldCount);
	            var needState = ds.checkStates && (this._state == RowState_1.RowState.NONE || !this._state);
	            var oldVals = null;
	            if (needState && ds["_needOrgValues"]) {
	                oldVals = this._values.concat();
	            }
	            for (var i = 0; i < cnt; i++) {
	                var fld = ds.getField(i);
	                if (isAry || values.hasOwnProperty(fld.orgFieldName)) {
	                    var v = isAry ? values[i] : values[fld.orgFieldName];
	                    if (!strict || v !== undefined) {
	                        if (ds["_needRestore"]) {
	                            changed = changed || (strict ? !fld.equalValues(this._values[i], fld.readValue(v)) : !fld.sameValues(this._values[i], fld.readValue(v)));
	                        }
	                        else {
	                            changed = true;
	                        }
	                        this._values[i] = ds.getField(i).readValue(v);
	                    }
	                }
	            }
	            ds["_internalCalculateValues"](this._values, this.rowId);
	            if (needState && changed) {
	                if (oldVals) {
	                    this._orgValues = oldVals;
	                }
	                this._state = RowState_1.RowState.UPDATED;
	                if (stateEvent) {
	                    ds["_stateChanged"](this, false);
	                }
	            }
	            else if (ds["_needRestore"]) {
	                this.$_restoreState(ds);
	            }
	        }
	    };
	    return TreeDataRowImpl;
	}(TreeDataProvider_1.TreeDataRow));
	exports.TreeDataRowImpl = TreeDataRowImpl;
	var LocalTreeDataProvider = /** @class */ (function (_super) {
	    __extends(LocalTreeDataProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LocalTreeDataProvider(undoable) {
	        if (undoable === void 0) { undoable = false; }
	        var _this = _super.call(this) || this;
	        _this._countDirty = false;
	        _this._tagLock = false;
	        _this._points = [];
	        _this._nextPoint = 0;
	        _this._rowMap = [];
	        _this._needOrgValues = false;
	        _this._needRestore = false;
	        _this._checkParentProc = null;
	        _this._hiddenRows = [];
	        if (undoable) {
	            _this._commands = new LocalTreeDataCommand_1.LocalTreeDataCommandStack(_this);
	        }
	        _this._rootRow = new TreeDataProvider_1.RootTreeRow(_this);
	        _this._tags = new TreeDataTag.TreeDataTagCollection(_this);
	        return _this;
	    }
	    LocalTreeDataProvider.prototype._doDispose = function () {
	        this._commands = this._commands && this._commands.dispose();
	        this._points = null;
	        this._rootRow = null;
	        this._rowMap = null;
	        this._tags = null;
	        this._hiddenRows = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(LocalTreeDataProvider.prototype, "rootRow", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rootRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "parentCallback", {
	        /** parentCallback */
	        get: function () {
	            return this._parentCallback;
	        },
	        set: function (value) {
	            this._parentCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "needOrgValues", {
	        /** needOrgValues */
	        get: function () {
	            return this._needOrgValues;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "needRestore", {
	        /** needRestore */
	        get: function () {
	            return this._needRestore;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "undoable", {
	        /** undoable */
	        get: function () {
	            return this._undoable && !!this._commands;
	        },
	        set: function (value) {
	            if (value != this.undoable) {
	                this._undoable = value;
	                this._commands && this._commands.flush();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    LocalTreeDataProvider.prototype.addTag = function (tag) {
	        this._tags.add(tag);
	    };
	    LocalTreeDataProvider.prototype.removeTag = function (tag) {
	        this._tags.remove(tag);
	    };
	    LocalTreeDataProvider.prototype.setRows = function (rows, treeField, needSorting, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var count = 0;
	        var tfield = this.getFieldIndex(treeField);
	        if (tfield >= 0) {
	            this.beginUpdate();
	            try {
	                this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.ArrayTreeSource(this, this._rootRow);
	                source.parentCallback = this._parentCallback;
	                count = source.load(null, rows, tfield, needSorting, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	                this._checkSum(count);
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return count;
	    };
	    LocalTreeDataProvider.prototype.setCsvRows = function (rows, treeField, needSorting, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var count = 0;
	        var tfield = this.getFieldIndex(treeField);
	        if (tfield >= 0) {
	            this.beginUpdate();
	            try {
	                this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.CsvTreeSource(this, this._rootRow);
	                source.parentCallback = this._parentCallback;
	                count = source.load(null, rows, tfield, needSorting, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	                this._checkSum(count);
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return count;
	    };
	    LocalTreeDataProvider.prototype.setXmlRows = function (rows, rowElement, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var count = 0;
	        if (rows) {
	            this.beginUpdate();
	            try {
	                this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.XmlTreeSource(this, this._rootRow);
	                count = source.load(null, rows, rowElement, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	                this._checkSum(count);
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return count;
	    };
	    LocalTreeDataProvider.prototype.setJsonRows = function (rows, rowsProp, childrenProp, iconProp) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        if (rows) {
	            this.beginUpdate();
	            try {
	                this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.JsonTreeSource(this, this._rootRow);
	                this["_rowCount"] = source.load(null, rows, rowsProp, this.getFieldIndex(childrenProp), this.getFieldIndex(iconProp));
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return this.rowCount;
	    };
	    LocalTreeDataProvider.prototype.setJsonRows2 = function (rows, rowsProp, childRowsProp, childrenProp, iconProp) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        if (rows) {
	            this.beginUpdate();
	            try {
	                this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.JsonTreeSource(this, this._rootRow);
	                this["_rowCount"] = source.load2(null, rows, rowsProp, childRowsProp, childrenProp, iconProp);
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return this.rowCount;
	    };
	    LocalTreeDataProvider.prototype.appendDataRows = function (parent, rows, treeField, needSorting, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var cnt = 0;
	        var tfield = this.getFieldIndex(treeField);
	        if (tfield >= 0) {
	            var source = new TreeDataSource_1.ArrayTreeSource(this, this._rootRow);
	            source.parentCallback = this._parentCallback;
	            this.beginUpdate();
	            try {
	                this.refreshFieldFormats();
	                cnt = source.load(parent, rows, tfield, needSorting, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	            }
	            finally {
	                this.endUpdate(false);
	                if (cnt > 0) {
	                    var newRows = source.insertedRows;
	                    if (newRows && (cnt = newRows.length) > 0) {
	                        this._rowsAdded(parent, newRows);
	                    }
	                }
	                //source = null;
	            }
	        }
	        return cnt;
	    };
	    LocalTreeDataProvider.prototype.appendCsvRows = function (parent, rows, treeField, needSorting, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var count = 0;
	        var tfield = this.getFieldIndex(treeField);
	        if (tfield >= 0) {
	            this.beginUpdate();
	            try {
	                // this._clearRows();
	                this.refreshFieldFormats();
	                var source = new TreeDataSource_1.CsvTreeSource(this, this._rootRow);
	                source.parentCallback = this._parentCallback;
	                count = source.load(parent, rows, tfield, needSorting, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	                // this._checkSum(count);
	            }
	            finally {
	                this.endUpdate(false);
	            }
	        }
	        this._tags.setRows();
	        this._fireReset();
	        this._fireRowCountChanged();
	        return count;
	    };
	    LocalTreeDataProvider.prototype.appendXmlRows = function (parent, rows, rowElement, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var cnt = 0;
	        if (rows) {
	            var source = new TreeDataSource_1.XmlTreeSource(this, this._rootRow);
	            this.beginUpdate();
	            try {
	                this.refreshFieldFormats();
	                cnt = source.load(parent, rows, rowElement, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	            }
	            finally {
	                this.endUpdate(false);
	                if (cnt > 0) {
	                    var newRows = source.insertedRows;
	                    if (newRows && (cnt = newRows.length) > 0) {
	                        this._rowsAdded(parent, newRows);
	                    }
	                }
	                //source = null;
	            }
	        }
	        this._fireRowCountChanged();
	        return cnt;
	    };
	    LocalTreeDataProvider.prototype.appendJsonRows = function (parent, rows, rowsProp, childrenField, iconField) {
	        if (!this._checkClientState()) {
	            return -1;
	        }
	        var cnt = 0;
	        if (rows) {
	            var source = new TreeDataSource_1.JsonTreeSource(this, this._rootRow);
	            this.beginUpdate();
	            try {
	                this.refreshFieldFormats();
	                cnt = source.load(parent, rows, rowsProp, this.getFieldIndex(childrenField), this.getFieldIndex(iconField));
	            }
	            finally {
	                this.endUpdate(false);
	                if (cnt > 0) {
	                    var newRows = source.insertedRows;
	                    if (newRows && (cnt = newRows.length) > 0) {
	                        this._rowsAdded(parent, newRows);
	                    }
	                }
	                //source = null;
	            }
	        }
	        this._fireRowCountChanged();
	        return cnt;
	    };
	    LocalTreeDataProvider.prototype.setIconIndex = function (row, value) {
	        if (row.iconIndex != value) {
	            //row.iconIndex = value;
	            row["$_setIconIndex"](value);
	            return true;
	        }
	        return false;
	        // if (row instanceof TreeDataRowImpl && row.iconIndex != value) {
	        // 	row["$_setIconIndex"](value);
	        // 	return true;
	        // } else if (row.iconIndex != value) {
	        // 	row.setIconIndex(value);
	        // 	return true;
	        // }
	        // return false;
	    };
	    LocalTreeDataProvider.prototype.setHasChildren = function (row, value) {
	        if (value != row.hasChildren) {
	            row["$_setHasChildren"](value);
	            return true;
	        }
	        return false;
	        // if (row instanceof TreeDataRow && row.hasChildren() != value) {
	        // 	row._setHasChildren(value);
	        // 	return true;
	        // } else if (row.hasChildren() != value) {
	        // 	row._setHasChildren(value);
	        // 	return true;
	        // }
	        // return false;
	    };
	    LocalTreeDataProvider.prototype.getAllRows = function () {
	        var rows = [];
	        return rows;
	    };
	    LocalTreeDataProvider.prototype.getJsonRows = function (rowId, rowsProp, childrenProp) {
	        var rows = [];
	        return rows;
	    };
	    LocalTreeDataProvider.prototype.getChildCount = function (parent) {
	        var p = parent || this._rootRow;
	        return p.count;
	    };
	    LocalTreeDataProvider.prototype.getRows = function (parent) {
	        var p = parent ? parent : this._rootRow;
	        return p.children;
	    };
	    LocalTreeDataProvider.prototype.getDescendantCount = function (parent) {
	        var p = parent || this._rootRow;
	        return p.descendantCount;
	    };
	    LocalTreeDataProvider.prototype.getDescendants = function (parent, maxLevel) {
	        function collectRows(p, rows, maxLevel) {
	            for (var i = 0, cnt = p.count; i < cnt; i++) {
	                var row = void 0;
	                rows.push(row = p.getChild(i));
	                if (maxLevel > row.level) {
	                    collectRows(row, rows, maxLevel);
	                }
	            }
	        }
	        maxLevel = arguments.length > 1 ? maxLevel : 0;
	        var p = parent || this._rootRow;
	        if (maxLevel <= 0) {
	            return p.descendants;
	        }
	        else if (maxLevel > p.level) {
	            var rows = [];
	            collectRows(p, rows, maxLevel);
	            return rows;
	        }
	        else {
	            return null;
	        }
	    };
	    LocalTreeDataProvider.prototype.getChild = function (parent, index) {
	        var p = parent || this._rootRow;
	        return p.getChild(index);
	    };
	    LocalTreeDataProvider.prototype.hasData = function (rowId) {
	        return this.rowById(rowId) != null;
	    };
	    LocalTreeDataProvider.prototype.rowById = function (rowId) {
	        var row = this._rowMap[rowId];
	        if (!row) {
	            row = this._findRowById(rowId);
	            if (row) {
	                this._rowMap[rowId] = row;
	            }
	        }
	        return row;
	    };
	    LocalTreeDataProvider.prototype.createRow = function (values, iconIndex, hasChildren) {
	        var row = null;
	        this.refreshFieldFormats();
	        if (Array.isArray(values)) {
	            row = new TreeDataRowImpl(this, values);
	        }
	        else if (values) {
	            var vals = new Array(this.fieldCount);
	            for (var prop in values) {
	                var fld = this.getFieldIndex(prop);
	                if (fld >= 0) {
	                    vals[fld] = values[prop];
	                }
	            }
	            row = new TreeDataRowImpl(this, vals);
	        }
	        if (row) {
	            this._internalCalculateValues(row["_values"], row.rowId);
	            row["_iconIndex"] = iconIndex;
	            row["_hasChildren"] = hasChildren;
	        }
	        return row;
	    };
	    LocalTreeDataProvider.prototype.clearRows = function () {
	        if (!this._checkClientState()) {
	            return;
	        }
	        this._clearRows();
	        if (this._eventLock <= 0) {
	            this._fireRefresh();
	            this._fireRowCountChanged();
	        }
	    };
	    LocalTreeDataProvider.prototype.removeRows = function (rows) {
	        function checkOrphaned(row, from) {
	            for (var i = from; i >= 0; i--) {
	                if (rows[i].isAncestorOf(row)) {
	                    return false;
	                }
	            }
	            return true;
	        }
	        if (!this._checkClientState())
	            return;
	        if (!rows || rows.length < 1) {
	            return;
	        }
	        rows.sort(function (row1, row2) {
	            return row1.level - row2.level;
	        });
	        var orgRows = rows; // splice 이전 값 저장
	        for (var i = rows.length; i--;) {
	            if (rows[i].level > 1 && !checkOrphaned(rows[i], i - 1)) {
	                rows.splice(i, 1);
	            }
	        }
	        if (rows.length < 1 || !this._rowsRemoving(rows)) {
	            return false;
	        }
	        if (this.softDeleting && this.checkStates) {
	            var stateRows = [];
	            for (var i = rows.length - 1; i >= 0; i--) {
	                var row = rows[i];
	                var st = row.rowState;
	                var changed = false;
	                switch (st) {
	                    case RowState_1.RowState.CREATED:
	                        if (!this.deleteCreated) {
	                            changed = row["_changeRowState"](RowState_1.RowState.CREATE_AND_DELETED, false, false);
	                            rows.splice(i, 1);
	                        }
	                        break;
	                    case RowState_1.RowState.DELETED:
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        rows.splice(i, 1);
	                        break;
	                    default:
	                        changed = row["_changeRowState"](RowState_1.RowState.DELETED, true, false);
	                        rows.splice(i, 1);
	                        break;
	                }
	                if (changed) {
	                    stateRows.push(row);
	                }
	            }
	            if (stateRows.length > 0) {
	                this._fireRowStatesChanged(stateRows);
	            }
	        }
	        this.deleteRows(orgRows);
	        return true;
	    };
	    LocalTreeDataProvider.prototype.moveRowSibling = function (row, delta) {
	        if (delta == 0) {
	            return false;
	        }
	        if (!this._checkClientState()) {
	            return false;
	        }
	        var parent = row.parent;
	        var count = parent.children.length;
	        var index = row.index;
	        var newIndex = Math.min(Math.max(index + delta, 0), count - 1);
	        delta = newIndex - index;
	        if (delta == 0)
	            return false;
	        if (this._fireRowSiblingMoving(row, delta)) {
	            parent["_moveChild"](index, newIndex);
	            this._fireRowSiblingMoved(row, delta);
	            return true;
	        }
	        return false;
	    };
	    LocalTreeDataProvider.prototype.changeRowParent = function (row, parent, childIndex) {
	        if (row === parent) {
	            throw new Error("parent must not be self.");
	        }
	        if (row.isAncestorOf(parent)) {
	            throw new Error("can`t move to child of descendant.");
	        }
	        var old = row.parent;
	        if (old === parent && childIndex == row.index) {
	            return false;
	        }
	        if (!this._checkClientState()) {
	            return false;
	        }
	        if (!parent["_children"]) {
	            parent["_children"] = [];
	        }
	        var count = parent["_children"].length;
	        childIndex = Math.min(Math.max(childIndex, 0), count);
	        if (this._fireRowParentChanging(row, parent, childIndex)) {
	            row["_changeParent"](parent, childIndex);
	            if (!(parent instanceof TreeDataProvider_1.RootTreeRow)) {
	                this.setHasChildren(parent, true);
	            }
	            if (!(old instanceof TreeDataProvider_1.RootTreeRow) && old.count == 0) {
	                this.setHasChildren(old, false);
	            }
	            this._fireRowParentChanged(row, parent, childIndex);
	            return true;
	        }
	        return false;
	    };
	    LocalTreeDataProvider.prototype.toTreeString = function () {
	        return this._rootRow.toTreeString();
	    };
	    LocalTreeDataProvider.prototype.beginUpdate = function () {
	        this._checkClientState();
	        this._eventLock++;
	    };
	    LocalTreeDataProvider.prototype.endUpdate = function (refresh) {
	        if (refresh === void 0) { refresh = true; }
	        this._checkClientState();
	        this._eventLock = Math.max(0, this._eventLock - 1);
	        if (this._eventLock == 0) {
	            if (refresh) {
	                if (this._resetLock > 0) {
	                    this._fireReset();
	                }
	                else {
	                    this._fireRefresh();
	                }
	                if (this._countDirty) {
	                    this._fireRowCountChanged();
	                }
	            }
	            this._resetLock = 0;
	            this._countDirty = false;
	        }
	    };
	    LocalTreeDataProvider.prototype.$_extractTreeRowIds = function (rows) {
	        if (rows) {
	            var cnt = rows.length;
	            var ids = new Array(cnt);
	            for (var i = 0; i < cnt; i++) {
	                ids[i] = rows[i].rowId;
	            }
	            return ids;
	        }
	        return null;
	    };
	    LocalTreeDataProvider.prototype.$_searchDataRow = function (dataRows, fields, values, options, startIndex, endIndex) {
	        var rows = dataRows.length;
	        if (rows < 1) {
	            return -1;
	        }
	        var flds = Math.min(fields.length, values.length);
	        if (flds < 1) {
	            return -1;
	        }
	        var all = !options || options.allFields;
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < flds; c++) {
	            fieldTypes[c] = this.getField(fields[c]).dataType;
	        }
	        /* tree의 경우 dataRow가 0부터 시작하는 것이 아니고 순차적이지도 않다.전체 dataRow를 받아서 돌려야 한다. */
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(rows - 1, endIndex);
	        for (var i = startIndex; i <= endIndex; i++) {
	            var found = true;
	            if (found) {
	                for (var c = 0; c < flds; c++) {
	                    var v = this.rowById(dataRows[i]).getValue(fields[c]);
	                    switch (fieldTypes[c]) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.DATE:
	                            if (values[c] instanceof Date) {
	                                found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                            }
	                            else {
	                                if (!dateConvert) {
	                                    var fmt = /[.]/.test(values[c]) ? "yyyy.MM.dd" : /[/]/.test(values[c]) ? "yyyy/MM/dd" : /[-]/.test(values[c]) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                    dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                }
	                                found = Utils_1.Utils.compareTextValue(values[c], v ? dateConvert.getText(v) : v, sensitive, partial);
	                            }
	                            break;
	                        default:
	                            found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                            break;
	                    }
	                    if (found && !all) {
	                        return dataRows[i];
	                    }
	                    if (!found && all) {
	                        break;
	                    }
	                }
	            }
	            if (found) {
	                return dataRows[i];
	            }
	        }
	        return -1;
	    };
	    LocalTreeDataProvider.prototype.searchDataRow = function (fields, values, options, startRowId, wrap, parentId) {
	        if (startRowId === void 0) { startRowId = 0; }
	        if (wrap === void 0) { wrap = true; }
	        if (parentId === void 0) { parentId = null; }
	        options = options instanceof SearchOptions_1.SearchOptions ? options : options ? new SearchOptions_1.SearchOptions(options) : null;
	        var dataRows;
	        if (parentId != null) {
	            var row = this.rowById(parentId);
	            if (row) {
	                dataRows = this.$_extractTreeRowIds(row.descendants);
	            }
	            else {
	                return -1;
	            }
	        }
	        else {
	            dataRows = this.$_extractTreeRowIds(this._rootRow.descendants);
	        }
	        if (!Array.isArray(dataRows) || dataRows.length <= 0) {
	            return -1;
	        }
	        var rowCnt = dataRows.length;
	        var startIndex = Math.max(0, dataRows.indexOf(startRowId));
	        var result = -1;
	        if (fields && fields.length > 0 && values && values.length > 0) {
	            var cnt = fields.length;
	            var flds = [];
	            for (var c = 0; c < cnt; c++) {
	                var n = fields[c];
	                if (Utils_1.Utils.isNumber(n)) {
	                    flds.push(n);
	                }
	                else {
	                    var f = this.getFieldIndex(fields[c]);
	                    if (f >= 0) {
	                        flds.push(f);
	                    }
	                }
	            }
	            if (flds.length > 0) {
	                result = startIndex < rowCnt ? this.$_searchDataRow(dataRows, flds, values, options, startIndex, rowCnt - 1) : -1;
	                if (result < 0 && wrap && startIndex > 0) {
	                    result = this.$_searchDataRow(dataRows, flds, values, options, 0, startIndex - 1);
	                }
	            }
	        }
	        return result;
	    };
	    LocalTreeDataProvider.prototype.$_searchData = function (dataRows, fields, value, options, startIndex, endIndex, startFieldIndex) {
	        var rows = this.rowCount;
	        if (rows < 1) {
	            return null;
	        }
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var fldCount = this.fieldCount;
	        var fldLen = fields.length;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < fldCount; c++) {
	            fieldTypes[c] = this.getField(c).dataType;
	        }
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(rows - 1, endIndex);
	        startFieldIndex = Math.max(0, startFieldIndex);
	        if (startFieldIndex >= fields.length) {
	            startIndex++;
	            startFieldIndex = 0;
	        }
	        for (var i = startIndex; i <= endIndex; i++) {
	            var c = (i > startIndex) ? 0 : startFieldIndex;
	            for (; c < fldLen; c++) {
	                var found = false;
	                var f = fields[c];
	                if (f >= 0 && f < fldCount) {
	                    var v = this.rowById(dataRows[i]).getValue(f);
	                    switch (fieldTypes[f]) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.DATE:
	                            if (value instanceof Date) {
	                                found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                            }
	                            else {
	                                if (!dateConvert) {
	                                    var fmt = /[.]/.test(value) ? "yyyy.MM.dd" : /[/]/.test(value) ? "yyyy/MM/dd" : /[-]/.test(value) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                    dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                }
	                                found = Utils_1.Utils.compareTextValue(value, v ? dateConvert.getText(v) : v, sensitive, partial);
	                            }
	                            break;
	                        default:
	                            found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                            break;
	                    }
	                    if (found) {
	                        var returnObj = {
	                            dataRow: dataRows[i],
	                            fieldIndex: f,
	                            searchFieldIndex: c
	                        };
	                        return returnObj;
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    LocalTreeDataProvider.prototype.searchData = function (fields, value, options, startIndex, startFieldIndex, wrap, parentId) {
	        if (startIndex === void 0) { startIndex = 0; }
	        if (startFieldIndex === void 0) { startFieldIndex = 0; }
	        if (wrap === void 0) { wrap = true; }
	        if (parentId === void 0) { parentId = -1; }
	        options = options instanceof SearchOptions_1.SearchCellOptions ? options : options ? new SearchOptions_1.SearchCellOptions(options) : null;
	        var dataRows;
	        if (parentId >= 0) {
	            var row = this.rowById(parentId);
	            if (row) {
	                dataRows = this.$_extractTreeRowIds(row.descendants);
	            }
	            else {
	                return null;
	            }
	        }
	        else {
	            dataRows = this.$_extractTreeRowIds(this._rootRow.descendants);
	        }
	        if (!Array.isArray(dataRows) || dataRows.length <= 0) {
	            return null;
	        }
	        var rowCnt = dataRows.length;
	        var result = null;
	        startIndex = Math.max(0, dataRows.indexOf(startIndex));
	        if (!fields || fields.length < 1) {
	            fields = [];
	            var arr = this.getFields();
	            for (var i = 0; i < arr.length; i++) {
	                fields.push(arr[i].orgFieldName);
	            }
	        }
	        if (fields && fields.length > 0 && value != null) {
	            var cnt = fields.length;
	            var flds = [];
	            for (var c = 0; c < cnt; c++) {
	                var n = fields[c];
	                if (Utils_1.Utils.isNumber(n)) {
	                    flds.push(n);
	                }
	                else {
	                    flds.push(this.getFieldIndex(fields[c]));
	                }
	            }
	            if (flds.length > 0) {
	                startFieldIndex = Math.max(0, startFieldIndex);
	                result = startIndex < rowCnt ? this.$_searchData(dataRows, flds, value, options, startIndex, rowCnt - 1, startFieldIndex) : null;
	                if (!result && wrap && startIndex > 0) {
	                    result = this.$_searchData(dataRows, flds, value, options, 0, startIndex - 1, 0);
	                }
	                if (result) {
	                    result.fieldName = this.getOrgFieldName(result["fieldIndex"]);
	                }
	            }
	        }
	        return result;
	    };
	    LocalTreeDataProvider.prototype.$_hideDataRows = function (rowIds, hidden) {
	        if (rowIds == null) {
	            return;
	        }
	        var rows = (Utils_1.Utils.isArray(rowIds) ? rowIds : [rowIds]);
	        var oldCnt = this._hiddenRows.length;
	        var ids = [];
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var rowId = rows[i];
	            if (this._findRowById(rowId) != null) {
	                ids.push(rowId);
	                if (hidden) {
	                    this._hiddenRows.indexOf(rowId) < 0 && this._hiddenRows.push(rowId);
	                }
	                else {
	                    var idx = this._hiddenRows.indexOf(rowId);
	                    idx >= 0 && this._hiddenRows.splice(idx, 1);
	                }
	            }
	        }
	        this._hiddenRows.length !== oldCnt && this._fireRowsHiddenChanged(ids, hidden);
	    };
	    LocalTreeDataProvider.prototype.hideRows = function (rowIds) {
	        this.$_hideDataRows(rowIds, true);
	    };
	    LocalTreeDataProvider.prototype.showRows = function (rowIds) {
	        this.$_hideDataRows(rowIds, false);
	    };
	    LocalTreeDataProvider.prototype.clearHiddenRows = function () {
	        if (this._hiddenRows.length > 0) {
	            var rows = this._hiddenRows.concat();
	            this._hiddenRows = [];
	            this._fireRowsHiddenChanged(rows, false);
	        }
	    };
	    LocalTreeDataProvider.prototype.getHiddenRows = function () {
	        var ret = this._hiddenRows.concat();
	        ret.sort(function (r1, r2) {
	            return r1 - r2;
	        });
	        return ret;
	    };
	    LocalTreeDataProvider.prototype.isHiddenRow = function (rowId) {
	        var row = this.rowById(rowId);
	        return !!row && this._hiddenRows.indexOf(rowId) >= 0;
	    };
	    Object.defineProperty(LocalTreeDataProvider.prototype, "hiddenCount", {
	        get: function () {
	            return this._hiddenRows.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LocalTreeDataProvider.prototype.summarize = function (summary, calcVars) {
	        if (summary == null) {
	            return false;
	        }
	        summary.clear();
	        var count = this.rowCount;
	        if (count < 1) {
	            return false;
	        }
	        summary.count = count;
	        summary.sum = 0;
	        summary.min = Number.MAX_VALUE;
	        summary.max = Number.MIN_VALUE;
	        summary.dataCount = 0;
	        this.$_summarizeChildren(this._rootRow, summary);
	        summary.avg = summary.sum / summary.count;
	        summary.dataAvg = summary.dataCount === 0 ? NaN : summary.sum / summary.dataCount;
	        if (calcVars) {
	            var vars = this.$_summarizeVars(this._rootRow, summary);
	            summary.varsp = vars / summary.count;
	            summary.vars = vars / (summary.count - 1);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype.summarizeRange = function (summary, rows, calcVars) {
	        if (summary == null || rows == null) {
	            return false;
	        }
	        summary.clear();
	        var count = rows.length;
	        if (count < 1) {
	            return false;
	        }
	        var n = 0;
	        var f = summary.field;
	        var sum = 0;
	        var min = NaN;
	        var max = NaN;
	        var i = 0;
	        while (i < count) {
	            var row = rows[i++];
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                sum = min = max = v;
	                n++;
	                break;
	            }
	        }
	        while (i < count) {
	            var row = rows[i++];
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                sum += v;
	                if (v < min)
	                    min = v;
	                if (v > max)
	                    max = v;
	                n++;
	            }
	        }
	        summary.count = count;
	        if (n > 0) {
	            summary.sum = sum;
	            summary.min = min;
	            summary.max = max;
	            summary.avg = sum / count;
	            summary.dataCount = n;
	            summary.dataAvg = summary.dataCount === 0 ? NaN : summary.sum / summary.dataCount;
	            if (calcVars) {
	                if (count > 1) {
	                    var vars = 0;
	                    var avg = summary.avg;
	                    for (var i_1 = 0; i_1 < count; i_1++) {
	                        var row = rows[i_1++];
	                        var v = row.getValue(f);
	                        if (!isNaN(v)) {
	                            vars += Math.pow(v - avg, 2);
	                        }
	                    }
	                    summary.varsp = vars / count;
	                    summary.vars = vars / (count - 1);
	                }
	                else {
	                    summary.varsp = 0;
	                    summary.vars = 0;
	                }
	            }
	        }
	        return true;
	    };
	    Object.defineProperty(LocalTreeDataProvider.prototype, "rowCount", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rootRow.descendantCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "immediateUpdate", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "isSummarized", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "canUndo", {
	        get: function () {
	            return this._commands && this._commands.canUndo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "canRedo", {
	        get: function () {
	            return this._commands && this._commands.canRedo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "undoing", {
	        get: function () {
	            return this._commands && this._commands.undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(LocalTreeDataProvider.prototype, "redoing", {
	        get: function () {
	            return this._commands && this._commands.redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LocalTreeDataProvider.prototype.getRow = function (rowId) {
	        return this.rowById(rowId).values;
	    };
	    LocalTreeDataProvider.prototype.deleteRows = function (rows) {
	        if (!this._checkClientState()) {
	            return;
	        }
	        if (rows && rows.length > 0) {
	            var saveSoftDeleting = this["_softDeleting"];
	            this.beginUpdate();
	            try {
	                this["_softDeleting"] = false;
	                this._tagLock = true;
	                try {
	                    for (var i = rows.length - 1; i >= 0; i--) {
	                        var row = rows[i];
	                        var p = row && row.parent;
	                        p && p["_removeChild"](row, true);
	                    }
	                }
	                finally {
	                    this._tagLock = false;
	                }
	            }
	            finally {
	                this["_softDeleting"] = saveSoftDeleting;
	                this.endUpdate(false);
	            }
	            this._rowsRemoved(rows);
	        }
	    };
	    LocalTreeDataProvider.prototype.equalValues = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var fld = this["_fields"][field];
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            return fld.equalValues(v1, v2);
	        }
	        else {
	            return true;
	        }
	    };
	    LocalTreeDataProvider.prototype.sameValues = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var fld = this["_fields"][field];
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            return fld.sameValues(v1, v2);
	        }
	        else {
	            return true;
	        }
	    };
	    LocalTreeDataProvider.prototype.compareValues = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            if (v1 === null) {
	                return (v2 === null) ? 0 : -1;
	            }
	            if (v2 === null) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : (v1 < v2) ? -1 : 0;
	        }
	        else {
	            return 0;
	        }
	    };
	    LocalTreeDataProvider.prototype.compareNumbers = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            if (isNaN(v1)) {
	                return (isNaN(v2)) ? 0 : -1;
	            }
	            if (isNaN(v2)) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : (v1 < v2) ? -1 : 0;
	        }
	        else {
	            return 0;
	        }
	    };
	    LocalTreeDataProvider.prototype.compareBools = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            return (v1 && !v2) ? 1 : (!v1 && v2) ? -1 : 0;
	        }
	        else {
	            return 0;
	        }
	    };
	    LocalTreeDataProvider.prototype.compareDates = function (field, row1, row2) {
	        if (row1 !== row2) {
	            var v1 = row1.getValue(field);
	            var v2 = row2.getValue(field);
	            if (!(v1 instanceof Date)) {
	                return !(v2 instanceof Date) ? 0 : -1;
	            }
	            if (!(v2 instanceof Date)) {
	                return 1;
	            }
	            return v1 > v2 ? 1 : v1 < v2 ? -1 : 0;
	        }
	        else {
	            return 0;
	        }
	    };
	    LocalTreeDataProvider.prototype.compareObjects = function (field, row1, row2) {
	        var vals1 = this["_values"][row1];
	        var vals2 = this["_values"][row2];
	        if (vals1 === vals2) {
	            return 0;
	        }
	        else {
	            var v1 = vals1 ? vals1[field] : null;
	            var v2 = vals2 ? vals2[field] : null;
	            if (!v1) {
	                return !v2 ? 0 : -1;
	            }
	            if (!v2) {
	                return 1;
	            }
	            var fld = this.getField(field);
	            return fld["$_compareObject"](v1, v2, row1, row2);
	        }
	    };
	    LocalTreeDataProvider.prototype.$_getSortedRows = function (field) {
	        var compFunc;
	        switch (this.getField(field).dataType) {
	            case Types.ValueType.NUMBER:
	                compFunc = this.compareNumbers;
	                break;
	            case Types.ValueType.DATETIME:
	                compFunc = this.compareDates;
	                break;
	            case Types.ValueType.BOOLEAN:
	                compFunc = this.compareBools;
	                break;
	            case Types.ValueType.OBJECT:
	                compFunc = this.compareObjects;
	                break;
	            default:
	                compFunc = this.compareValues;
	                break;
	        }
	        var rows = this.getDescendants(this._rootRow, 0);
	        this.$_sortRows(rows, field, compFunc.bind(this), 0, rows.length - 1);
	        return rows;
	    };
	    LocalTreeDataProvider.prototype.getDistinctValues = function (field, maxCount, sortDir) {
	        if (maxCount === void 0) { maxCount = -1; }
	        if (sortDir === void 0) { sortDir = Types.SortDirection.ASCENDING; }
	        this._checkFieldIndex(field);
	        var values = [];
	        if (maxCount < 0) {
	            maxCount = this.getDescendantCount(this["_rootRow"]);
	        }
	        if (maxCount > 0) {
	            var isNum = this.getField(field).dataType == Types.ValueType.NUMBER;
	            var rows = this.$_getSortedRows(field);
	            sortDir === Types.SortDirection.DESCENDING && rows.reverse();
	            values.push(rows[0]["_values"][field]);
	            for (var i = 1, cnt = rows.length; i < cnt; i++) {
	                if (values.length >= maxCount) {
	                    break;
	                }
	                if (!this.equalValues(field, rows[i - 1], rows[i])) {
	                    var value = rows[i]["_values"][field];
	                    if (values.indexOf(value) == -1 && (!isNum || !isNaN(value))) { // undefined나 NaN이 중복들어가는것을 방지
	                        values.push(value);
	                    }
	                }
	            }
	        }
	        return values;
	    };
	    LocalTreeDataProvider.prototype._doFieldsReset = function () {
	        _super.prototype._doFieldsReset.call(this);
	        this._clearRows();
	        this._fireReset();
	    };
	    LocalTreeDataProvider.prototype.refreshClients = function () {
	        this._fireRefreshClient();
	    };
	    LocalTreeDataProvider.prototype.savePoint = function (saveStates) {
	        if (saveStates === void 0) { saveStates = true; }
	        if (!this._checkClientState()) {
	            return;
	        }
	        var flds = this.fieldCount;
	        if (flds > 0 && this._rootRow.count > 0) {
	            var root = this._rootRow.copy();
	            var i = this._nextPoint++;
	            if (!saveStates) {
	                root.clearRowStates(false, false);
	            }
	            this._points.push({
	                id: i,
	                data: root
	            });
	            return i;
	        }
	        return -1;
	    };
	    LocalTreeDataProvider.prototype.rollback = function (savePoint) {
	        if (savePoint === void 0) { savePoint = 0; }
	        if (!this._checkClientState()) {
	            return;
	        }
	        for (var i = this._points.length - 1; i >= 0; i--) {
	            var point = this._points[i];
	            if (point.id == savePoint) {
	                this.$_removeSavePoints(i + 1);
	                this._rowMap = [];
	                this._rootRow.set(point.data);
	                this._fireReset();
	                break;
	            }
	        }
	    };
	    LocalTreeDataProvider.prototype.$_removeSavePoints = function (index) {
	        var points = this._points;
	        for (var i = points.length - 1; i >= index; i--) {
	            var point = points[i];
	            point.data = null;
	            points.pop();
	        }
	    };
	    LocalTreeDataProvider.prototype.clearSavePoints = function () {
	        this.$_removeSavePoints(0);
	    };
	    LocalTreeDataProvider.prototype.getSavePoints = function () {
	        var points = [];
	        for (var i = 0, cnt = this._points.length; i < cnt; i++) {
	            points.push(this._points[i].id);
	        }
	        return points;
	    };
	    LocalTreeDataProvider.prototype._doCheckStatesChanged = function () {
	        this.$_resetOrgValues();
	    };
	    LocalTreeDataProvider.prototype._doRestoreModeChanged = function () {
	        this.$_resetOrgValues();
	    };
	    LocalTreeDataProvider.prototype._hasChildrenChanged = function (row) {
	        this._fireHasChildrenChanged(row);
	    };
	    LocalTreeDataProvider.prototype._iconIndexChanged = function (row) {
	        this._fireIconIndexChanged(row);
	    };
	    LocalTreeDataProvider.prototype._stateChanged = function (row, refresh) {
	        this._fireRowStateChanged(row, refresh);
	    };
	    LocalTreeDataProvider.prototype._valueChanged = function (row, field) {
	        this._fireValueChanged(row, field);
	    };
	    LocalTreeDataProvider.prototype._rowAdding = function (parent, index, child) {
	        return this._fireRowAdding(parent, index, child);
	    };
	    LocalTreeDataProvider.prototype._rowAdded = function (row) {
	        if (!this._tagLock) {
	            this._tags.addRow(row);
	        }
	        if (this._eventLock <= 0) {
	            this._fireRowAdded(row);
	            this._fireRowCountChanged();
	        }
	    };
	    LocalTreeDataProvider.prototype._rowsAdded = function (parent, rows) {
	        if (!this._tagLock) {
	            this._tags.addRows(rows);
	        }
	        if (this._eventLock <= 0) {
	            this._fireRowsAdded(parent, rows);
	            this._fireRowCountChanged();
	        }
	    };
	    LocalTreeDataProvider.prototype._rowRemoving = function (row) {
	        return this._fireRowRemoving(row);
	    };
	    LocalTreeDataProvider.prototype._rowRemoved = function (row) {
	        if (!this._tagLock) {
	            this._tags.removeRow(row);
	        }
	        if (this._eventLock <= 0) {
	            this._fireRowRemoved(row);
	            this._fireRowCountChanged();
	        }
	    };
	    LocalTreeDataProvider.prototype._rowsRemoving = function (rows) {
	        return this._fireRowsRemoving(rows);
	    };
	    LocalTreeDataProvider.prototype._rowsRemoved = function (rows) {
	        if (!this._tagLock) {
	            this._tags.removeRows(rows);
	        }
	        if (this._eventLock <= 0) {
	            this._fireRowsRemoved(rows);
	            this._fireRowCountChanged();
	        }
	    };
	    LocalTreeDataProvider.prototype._rowCleared = function (row) {
	        if (row) {
	            var rows = row.children;
	            this._tags.removeRows(rows);
	            if (this._eventLock <= 0) {
	                this._fireRowsRemoved(rows);
	                this._fireRowCountChanged();
	            }
	        }
	    };
	    LocalTreeDataProvider.prototype._rowUpdating = function (row) {
	        return this._fireRowUpdating(row);
	    };
	    LocalTreeDataProvider.prototype._rowUpdated = function (row) {
	        this._tags.updateRow(row);
	        if (this._eventLock <= 0) {
	            this._fireRowUpdated(row);
	        }
	    };
	    LocalTreeDataProvider.prototype.getRowId = function (row) {
	        throw new Error("Method not implemented.");
	    };
	    LocalTreeDataProvider.prototype.getValue = function (row, fieldIndex) {
	        throw new Error("Method not implemented.");
	    };
	    LocalTreeDataProvider.prototype.setValue = function (row, fieldIndex, value) {
	        throw new Error("Method not implemented.");
	    };
	    LocalTreeDataProvider.prototype.getRowObject = function (row) {
	        throw new Error("Method not implemented.");
	    };
	    LocalTreeDataProvider.prototype.getRowState = function (rowId) {
	        var row = this.rowById(rowId);
	        return row ? row.rowState : RowState_1.RowState.NONE;
	    };
	    LocalTreeDataProvider.prototype.setRowState = function (rowId, newState, force) {
	        var row = this.rowById(rowId);
	        if (row && (this.checkStates || force)) {
	            var state = row.rowState;
	            if (newState != state) {
	                row["_changeRowState"](newState, true, RowState_1.isDeletedState(state) ? true : undefined);
	            }
	        }
	    };
	    LocalTreeDataProvider.prototype.changeRowStates = function (rows, newState) {
	        var cnt = rows.length;
	        var changed = [];
	        for (var i = 0; i < cnt; i++) {
	            var row = rows[i];
	            if (row["_changeRowState"](newState, false, false)) {
	                changed.push(row);
	            }
	        }
	        if (changed.length > 0) {
	            this._fireRowStatesChanged(changed);
	        }
	    };
	    LocalTreeDataProvider.prototype.clearRowStates = function (deleteRows, fireStateEvents) {
	        if (!this._checkClientState())
	            return;
	        this._rootRow.clearRowStates(deleteRows, fireStateEvents);
	    };
	    LocalTreeDataProvider.prototype.$_collectStateRows = function (row, state, rows) {
	        for (var i = 0, cnt = row.count; i < cnt; i++) {
	            var child = row.getChild(i);
	            if (child.rowState == state) {
	                rows.push(child.rowId);
	            }
	            this.$_collectStateRows(child, state, rows);
	        }
	    };
	    LocalTreeDataProvider.prototype.getStateRows = function (state) {
	        var rows = [];
	        this.$_collectStateRows(this._rootRow, state, rows);
	        return rows;
	    };
	    LocalTreeDataProvider.prototype.$_collectAllStateRows = function (row, rows) {
	        for (var i = 0, cnt = row.count; i < cnt; i++) {
	            var child = row.getChild(i);
	            switch (child.rowState) {
	                case RowState_1.RowState.CREATED:
	                    rows.created.push(child.rowId);
	                    break;
	                case RowState_1.RowState.UPDATED:
	                    rows.updated.push(child.rowId);
	                    break;
	                case RowState_1.RowState.DELETED:
	                    rows.deleted.push(child.rowId);
	                    break;
	                case RowState_1.RowState.CREATE_AND_DELETED:
	                    rows.createAndDeleted.push(child.rowId);
	                    break;
	            }
	            this.$_collectAllStateRows(child, rows);
	        }
	    };
	    LocalTreeDataProvider.prototype.getAllStateRows = function () {
	        var rows = {
	            created: [],
	            updated: [],
	            deleted: [],
	            createAndDeleted: []
	        };
	        this.$_collectAllStateRows(this._rootRow, rows);
	        return rows;
	    };
	    LocalTreeDataProvider.prototype.setRowStates = function (rows, state, force, rowEvents) {
	        if (!this._checkClientState()) {
	            return;
	        }
	        var changedRows = rowEvents ? null : [];
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var row = this.rowById(rows[i]);
	            if (row) {
	                if (this.checkStates || force) {
	                    if (row["_changeRowState"](state, rowEvents, false) && !rowEvents) {
	                        changedRows.push(row);
	                    }
	                }
	            }
	        }
	        if (!rowEvents && changedRows.length > 0) {
	            this._fireRowStatesChanged(changedRows);
	        }
	    };
	    LocalTreeDataProvider.prototype.$_getRowStateCount = function (row, states) {
	        var count = 0;
	        for (var i = 0, cnt = row.count; i < cnt; i++) {
	            var child = row.getChild(i);
	            if (states.indexOf(child.rowState) >= 0) {
	                count++;
	            }
	            count += this.$_getRowStateCount(child, states);
	        }
	        return count;
	    };
	    LocalTreeDataProvider.prototype.getRowStateCount = function (states) {
	        return this.$_getRowStateCount(this._rootRow, states);
	    };
	    LocalTreeDataProvider.prototype.restoreUpdatedStates = function (rows) {
	        this.restoreUpdatedRows(rows);
	    };
	    LocalTreeDataProvider.prototype.restoreUpdatedRows = function (rows) {
	        if (!this._checkClientState()) {
	            return;
	        }
	        var list = [];
	        if (rows == null) {
	            this._rootRow["$_restoreRow"](true, list);
	        }
	        else {
	            for (var i = rows.length; i--;) {
	                var row = this.rowById(rows[i]);
	                if (row) {
	                    row["$_restoreRow"](false, list);
	                }
	            }
	        }
	        if (list.length == 1) {
	            this._fireRowStateChanged(list[0], false);
	        }
	        else if (list.length > 1) {
	            this._fireRowStatesChanged(list);
	        }
	    };
	    LocalTreeDataProvider.prototype.getUpdatedCells = function (rows) {
	        var mode = this.restoreMode;
	        if (!(mode == RestoreMode_1.RestoreMode.AUTO || mode == RestoreMode_1.RestoreMode.EXPLICIT)) {
	            return null;
	        }
	        if (rows == null) {
	            rows = this.getStateRows(RowState_1.RowState.UPDATED);
	        }
	        else if (!Array.isArray(rows)) {
	            if (typeof rows == "number") {
	                rows = [rows];
	            }
	            else {
	                return null;
	            }
	        }
	        if (!Array.isArray(rows)) {
	            return null;
	        }
	        var ret = [];
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var row = this.rowById(rows[i]);
	            if (row) {
	                var updatedCells = row["$_getUpdatedCells"]();
	                if (updatedCells && updatedCells.length > 0) {
	                    ret.push({
	                        __rowId: row.rowId,
	                        updatedCells: updatedCells
	                    });
	                }
	            }
	        }
	        return ret;
	    };
	    LocalTreeDataProvider.prototype.canUpdateRow = function (row) {
	        return true;
	    };
	    LocalTreeDataProvider.prototype.canInsertRow = function (row) {
	        return true;
	    };
	    LocalTreeDataProvider.prototype.canDeleteRow = function (row) {
	        return true;
	    };
	    LocalTreeDataProvider.prototype.isDataChanged = function (rowId, fieldIndex) {
	        var row = this.rowById(rowId);
	        if (!row) {
	            debugger;
	        }
	        var orgVals = row["_orgValues"];
	        if (row.rowState !== RowState_1.RowState.UPDATED || !orgVals) {
	            return false;
	        }
	        if (orgVals) {
	            var v1 = orgVals[fieldIndex];
	            var v2 = row["_values"][fieldIndex];
	            var field = this["_fields"][fieldIndex];
	            return field && field.dataType !== Types.ValueType.OBJECT && !field.sameValues(v1, v2);
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    LocalTreeDataProvider.prototype._findRowById = function (rowId) {
	        return this._rootRow.findById(rowId);
	    };
	    LocalTreeDataProvider.prototype._checkSum = function (count) {
	        if (count != this.rowCount) {
	            throw new Error("Invalid row count: " + count + " <> " + this.rowCount);
	        }
	    };
	    LocalTreeDataProvider.prototype._clearRows = function () {
	        this._rootRow["_removeChildren"]();
	        this._rowMap = [];
	        if (this._rootRow && this._rootRow.descendantCount > 0) ;
	        else {
	            this._nextRowId = 1; // rootRow가 0번이고 다음은 1부터 시작한다.
	        }
	        this._tags.clearRows();
	        this._checkSum(0);
	    };
	    LocalTreeDataProvider.prototype.findRow = function (fields, values) {
	        if (fields && fields.length > 0 && values && values.length >= fields.length) {
	            var row = this._rootRow.findChild(fields, values);
	            return row;
	        }
	        return null;
	    };
	    LocalTreeDataProvider.prototype.$_resetOrgValues = function () {
	        this._needOrgValues = this.checkStates && this.restoreMode != RestoreMode_1.RestoreMode.NONE;
	        this._needRestore = this._needOrgValues && this.restoreMode == RestoreMode_1.RestoreMode.AUTO;
	        this._rootRow["_clearOrgValues"]();
	    };
	    LocalTreeDataProvider.prototype.$_summarizeChildren = function (parent, summary) {
	        var f = summary.field;
	        var cnt = parent.count;
	        for (var i = 0; i < cnt; i++) {
	            var row = parent.getChild(i);
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                summary.sum += v;
	                summary.dataCount++;
	                if (v < summary.min)
	                    summary.min = v;
	                if (v > summary.max)
	                    summary.max = v;
	            }
	            this.$_summarizeChildren(row, summary);
	        }
	    };
	    LocalTreeDataProvider.prototype.$_summarizeVars = function (parent, summary) {
	        var f = summary.field;
	        var avg = summary.avg;
	        var cnt = parent.count;
	        var vars = 0;
	        for (var i = 0; i < cnt; i++) {
	            var row = parent.getChild(i);
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                vars += Math.pow(v - avg, 2);
	            }
	            vars += this.$_summarizeVars(row, summary);
	        }
	        return vars;
	    };
	    LocalTreeDataProvider.prototype._summarizeChildren = function (parent, field) {
	        var f = field.field;
	        var cnt = parent.count;
	        for (var i = 0; i < cnt; i++) {
	            var row = parent.getChild(i);
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                field.sum += v;
	                if (v < field.min)
	                    field.min = v;
	                if (v > field.max)
	                    field.max = v;
	            }
	            this._summarizeChildren(row, field);
	        }
	    };
	    LocalTreeDataProvider.prototype._summarizeVars = function (parent, field) {
	        var f = field.field;
	        var avg = field.avg;
	        var cnt = parent.count;
	        var vars = 0;
	        for (var i = 0; i < cnt; i++) {
	            var row = parent.getChild(i);
	            var v = row.getValue(f);
	            if (!isNaN(v)) {
	                vars += Math.pow(v - avg, 2);
	            }
	            vars += this._summarizeVars(row, field);
	        }
	        return vars;
	    };
	    LocalTreeDataProvider.prototype._summarize = function (field, calcVars) {
	        if (field == null) {
	            return false;
	        }
	        field.clear();
	        var count = this.rowCount;
	        if (count < 1) {
	            return false;
	        }
	        field.count = 0;
	        field.sum = 0;
	        field.min = Number.MIN_VALUE;
	        field.max = Number.MAX_VALUE;
	        this._summarizeChildren(this._rootRow, field);
	        field.avg = field.sum / field.count;
	        if (calcVars) {
	            var vars = this._summarizeVars(this._rootRow, field);
	            field.vars = vars / field.count;
	        }
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    LocalTreeDataProvider.prototype._fireDisposed = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.DISPOSED);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireReset = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.RESET);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRefresh = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.REFRESH);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRefreshClient = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.REFRESH_CLIENT);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireCleared = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.CLEARED);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowCountChanged = function () {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_COUNT_CHANGED, this.rowCount);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowAdding = function (row, index, child) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROW_ADDING, row, index, child);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowAdded = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_ADDED, row);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowsAdded = function (parent, rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROWS_ADDED, parent, rows);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowRemoving = function (row) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROW_REMOVING, row);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowRemoved = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_REMOVED, row);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowsRemoving = function (rows) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROWS_REMOVING, rows);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowsRemoved = function (rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROWS_REMOVED, rows);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowUpdating = function (row) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROW_UPDATING, row);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowUpdated = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_UPDATED, row);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireValueChanging = function (row, field, newValue) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.VALUE_CHNAGED, row, field, newValue);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireValueChanged = function (row, field) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.VALUE_CHNAGED, row, field);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireIconIndexChanged = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ICON_INDEX_CHANGED, row);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireHasChildrenChanged = function (row) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.HAS_CHILDREN_CHANGED, row);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowStateChanged = function (row, refresh) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_STATE_CHANGED, row, refresh);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowStatesChanged = function (rows) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_STATES_CHANGED, rows);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowSiblingMoving = function (row, delta) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROW_SIBLING_MOVING, row, delta);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowSiblingMoved = function (row, delta) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_SIBLING_MOVED, row, delta);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowParentChanging = function (row, parent, childIndex) {
	        if (this._eventLock <= 0) {
	            return this.fireConfirmEvent(LocalTreeDataProvider.ROW_PARENT_CHANGING, row, parent, childIndex);
	        }
	        return true;
	    };
	    LocalTreeDataProvider.prototype._fireRowParentChanged = function (row, parent, childIndex) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROW_PARENT_CHANGED, row, parent, childIndex);
	        }
	    };
	    LocalTreeDataProvider.prototype._fireRowsHiddenChanged = function (rowIds, hidden) {
	        if (this._eventLock <= 0) {
	            this.fireEvent(LocalTreeDataProvider.ROWS_HIDDEN_CHANGED, rowIds, hidden);
	        }
	    };
	    LocalTreeDataProvider.prototype.undo = function () {
	        if (this.canUndo) {
	            this._commands.undo();
	        }
	    };
	    LocalTreeDataProvider.prototype.redo = function () {
	        if (this.canRedo) {
	            this._commands.redo(true);
	        }
	    };
	    LocalTreeDataProvider.prototype.clearCommandStack = function () {
	        this._commands.flush();
	    };
	    //-------------------------------------------------------------------------
	    // event types
	    //-------------------------------------------------------------------------
	    LocalTreeDataProvider.DISPOSED = "onTreeDataProviderDisposed";
	    LocalTreeDataProvider.RESET = "onTreeDataProviderReset";
	    LocalTreeDataProvider.REFRESH = "onTreeDataProviderRefresh";
	    LocalTreeDataProvider.REFRESH_CLIENT = "onTreeDataProviderRefreshClient";
	    LocalTreeDataProvider.CLEARED = "onTreeDataProviderCleared";
	    LocalTreeDataProvider.ROW_COUNT_CHANGED = "onTreeDataProviderRowCountChanged";
	    LocalTreeDataProvider.ROW_ADDING = "onTreeDataProviderRowAdding";
	    LocalTreeDataProvider.ROW_ADDED = "onTreeDataProviderRowAdded";
	    LocalTreeDataProvider.ROWS_ADDED = "onTreeDataProviderRowsAdded";
	    LocalTreeDataProvider.ROW_REMOVING = "onTreeDataProviderRowRemoving";
	    LocalTreeDataProvider.ROW_REMOVED = "onTreeDataProviderRowRemoved";
	    LocalTreeDataProvider.ROWS_REMOVING = "onTreeDataProviderRowsRemoving";
	    LocalTreeDataProvider.ROWS_REMOVED = "onTreeDataProviderRowsRemoved";
	    LocalTreeDataProvider.ROW_UPDATING = "onTreeDataProviderRowUpdating";
	    LocalTreeDataProvider.ROW_UPDATED = "onTreeDataProviderRowUpdated";
	    LocalTreeDataProvider.VALUE_CHANGING = "onTreeDataProviderValueChanging";
	    LocalTreeDataProvider.VALUE_CHNAGED = "onTreeDataProviderValueChanged";
	    LocalTreeDataProvider.ICON_INDEX_CHANGED = "onTreeDataProviderIconIndexChanged";
	    LocalTreeDataProvider.HAS_CHILDREN_CHANGED = "onTreeDataProviderHasChildrenChanged";
	    LocalTreeDataProvider.ROW_STATE_CHANGED = "onTreeDataProviderRowStateChanged";
	    LocalTreeDataProvider.ROW_STATES_CHANGED = "onTreeDataProviderRowStatesChanged";
	    LocalTreeDataProvider.ROW_SIBLING_MOVING = "onTreeDataProviderRowSiblingMoving";
	    LocalTreeDataProvider.ROW_SIBLING_MOVED = "onTreeDataProviderRowSiblingMoved";
	    LocalTreeDataProvider.ROW_PARENT_CHANGING = "onTreeDataProviderRowParentChanging";
	    LocalTreeDataProvider.ROW_PARENT_CHANGED = "onTreeDataProviderRowParentChanged";
	    LocalTreeDataProvider.ROWS_HIDDEN_CHANGED = "onTreeDataProviderRowsHideChanged";
	    LocalTreeDataProvider.GET_HANDLER = "getHandler";
	    return LocalTreeDataProvider;
	}(TreeDataProvider_1.TreeDataProvider));
	exports.LocalTreeDataProvider = LocalTreeDataProvider;
	});

	unwrapExports(LocalTreeDataProvider_1);
	var LocalTreeDataProvider_2 = LocalTreeDataProvider_1.TreeDataRowImpl;
	var LocalTreeDataProvider_3 = LocalTreeDataProvider_1.LocalTreeDataProvider;

	var TreeDataLoader_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeDataLoader.ts
	// 2019. 09. 20. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var TreeDataLoader = /** @class */ (function (_super) {
	    __extends(TreeDataLoader, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeDataLoader(provider) {
	        var _this = _super.call(this) || this;
	        _this._ds = provider;
	        return _this;
	    }
	    TreeDataLoader.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeDataLoader.prototype.load = function (type, data, options) {
	        var opts = new DataLoader_1.DataFillOptions(options);
	        if (this.$_checkEmpty(data, opts)) {
	            return 0;
	        }
	        this.$_prepareLoad(opts);
	        type = type && type.toLowerCase();
	        switch (type) {
	            case "json": return this.$_loadJson(data, opts);
	            case "xml": return this.$_loadXml(data, opts);
	            case "csv": return this.$_loadCsv(data, opts);
	        }
	        return 0;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    /**
	     * @param data Json array 이거나 Json object.
	     * @param options DataLoadOptions.
	     */
	    TreeDataLoader.prototype.$_loadJson = function (data, options) {
	        if (typeof data === "string") {
	            data = JSON.parse(data);
	        }
	        if (data) {
	            var childrenField = options.childrenField;
	            var iconField = options.iconField;
	            if (options.fillMode == DataLoader_1.DataFillMode.APPEND) {
	                var parent_1 = this._ds.rowById(options.parentId);
	                return this._ds.appendJsonRows(parent_1, data, options.rows, childrenField, iconField);
	            }
	            else {
	                return this._ds.setJsonRows(data, options.rows, childrenField, iconField);
	            }
	            /*
	            var fillPos = options.fillPos;
	            var start = options.start;
	            var count = options.count;
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.addRows(rows, start, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setRows(rows, start, count);
	                    break;
	            }
	            return rows.length;
	            */
	        } /* else {
	            this.$_fillEmpty(options)
	            return 0;
	        }
	        */
	        return 0;
	    };
	    /**
	     * @param data Xml dom 객체이거나 Xml string.
	     * @param options DataLoadOptions.
	     */
	    TreeDataLoader.prototype.$_loadXml = function (data, options) {
	        if (typeof data === "string") {
	            data = XmlUtils_1.XmlUtils.parseXml(data);
	        }
	        if (data && data.documentElement) {
	            var childrenField = options.childrenField;
	            var iconField = options.iconField;
	            if (options.fillMode == DataLoader_1.DataFillMode.APPEND) {
	                var parent_2 = this._ds.rowById(options.parentId);
	                return this._ds.appendXmlRows(parent_2, data, options.rows, childrenField, iconField);
	            }
	            else {
	                return this._ds.setXmlRows(data, options.rows, childrenField, iconField);
	            }
	            /*
	            var fillPos = options.fillPos;
	            var start = options.start;
	            var count = options.count;
	            var rowProp = options.rows;
	            var rows = DataPath.extractXml(data.documentElement, rowProp);
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.appendXmlRows(rows, start, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertXmlRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateXmlRows(fillPos, rows, start, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setXmlRows(rows, start, count);
	                    break;
	            }
	            return rows.length;
	            */
	        }
	        return 0;
	    };
	    /**
	     * @param data csv text.
	     * @param options DataLoadOptions.
	     */
	    TreeDataLoader.prototype.$_loadCsv = function (data, options) {
	        var start = options.start;
	        var count = options.count;
	        var quoted = options.quoted;
	        var delimiter = options.delimiter;
	        var rows = DataHelper_1.DataHelper.csvToArray(this._ds, data, start, count, quoted, delimiter);
	        if (rows && (count = rows.length) > 0) {
	            var treeField = options.treeField; // || options.tree;
	            var childrenField = options.childrenField; // || options.children;
	            var iconField = options.iconField; // || options.icon;
	            var needSorting = options.needSorting; // || options.sorting;
	            if (options.fillMode == DataLoader_1.DataFillMode.APPEND) {
	                var parent = this._ds.rowById(options.parentId);
	                this._ds.appendDataRows(parent, rows, treeField, needSorting, childrenField, iconField);
	            }
	            else {
	                this._ds.setRows(rows, treeField, needSorting, childrenField, iconField);
	            }
	            return rows.length;
	            /*
	            switch (options.fillMode) {
	                case DataFillMode.APPEND:
	                    this._provider.addRows(rows, 0, count);
	                    break;
	                case DataFillMode.INSERT:
	                    this._provider.insertRows(fillPos, rows, 0, count);
	                    break;
	                case DataFillMode.UPDATE:
	                    this._provider.updateRows(fillPos, rows, 0, count);
	                    break;
	                case DataFillMode.SET:
	                default:
	                    this._provider.setRows(rows, 0, count);
	                    break;
	            }
	            return rows.length;
	            */
	        } /* else {
	            this.$_fillEmpty(options);
	            return 0;
	        }
	        */
	        return 0;
	    };
	    TreeDataLoader.prototype.$_fillEmpty = function (options) {
	        if (options.fillMode === DataLoader_1.DataFillMode.SET) {
	            this._ds.setRows(null, null, false, null, null);
	        }
	    };
	    TreeDataLoader.prototype.$_checkEmpty = function (data, options) {
	        if (!data) {
	            this.$_fillEmpty(options);
	            return true;
	        }
	        return false;
	    };
	    TreeDataLoader.prototype.$_prepareLoad = function (options) {
	        // if (options.filters) {
	        // 	let filters = new DataFilterCollection(this._provider.filterRuntime(), options.filters);
	        // 	options.filterMode && filters.setFilterMode(options.filterMode);
	        // }
	    };
	    return TreeDataLoader;
	}(Base_1.Base));
	exports.TreeDataLoader = TreeDataLoader;
	});

	unwrapExports(TreeDataLoader_1);
	var TreeDataLoader_2 = TreeDataLoader_1.TreeDataLoader;

	var DataDelegates = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataDelegates.ts 
	// 2020. 01. 22. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	var DataDelegateUtils = /** @class */ (function () {
	    function DataDelegateUtils() {
	    }
	    DataDelegateUtils.getFieldIndex = function (provider, field) {
	        if (typeof field == "string") {
	            return provider.getFieldIndex(field);
	        }
	        else {
	            return field;
	        }
	    };
	    DataDelegateUtils.fillData = function (provider, type, data, options) {
	        var loader = new DataLoader_1.DataLoader(provider);
	        try {
	            loader.load(type, data, options);
	        }
	        finally {
	            loader.dispose();
	        }
	    };
	    DataDelegateUtils.fillTreeData = function (provider, type, data, options) {
	        var loader = new TreeDataLoader_1.TreeDataLoader(provider);
	        try {
	            loader.load(type, data, options);
	        }
	        finally {
	            loader.dispose();
	        }
	    };
	    DataDelegateUtils.extractTreeRows = function (rows) {
	        if (rows) {
	            var cnt = rows.length;
	            var ids = new Array(cnt);
	            for (var i = 0; i < cnt; i++) {
	                ids[i] = rows[i].rowId;
	            }
	            return ids;
	        }
	        return null;
	    };
	    return DataDelegateUtils;
	}());
	exports.DataDelegateUtils = DataDelegateUtils;
	var EventListenerBase = /** @class */ (function () {
	    function EventListenerBase() {
	        this._debugging = Utils_1.Utils.isDebugging;
	    }
	    EventListenerBase.prototype.log = function (text) {
	        var args = [];
	        for (var _i = 1; _i < arguments.length; _i++) {
	            args[_i - 1] = arguments[_i];
	        }
	        this._debugging && console.log(text, args);
	    };
	    return EventListenerBase;
	}());
	exports.EventListenerBase = EventListenerBase;
	/**
	 * LocalDataProvider와 LocalTreeDataProvider의 기반 클래스
	 *
	 */
	var DataProviderBase = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataProviderBase(undoable) {
	        this._dp = this._createProvider(undoable);
	        this._listener = this._createListener(this._dp);
	    }
	    /**
	     * @internal
	     */
	    DataProviderBase.prototype.dispose = function () {
	        this._dp.dispose();
	        this._dp = null;
	    };
	    Object.defineProperty(DataProviderBase.prototype, "subTypeEnabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * DataField의 subType속성의 활성화 여부, 기본 true
	         */
	        get: function () {
	            return this._dp.subTypeEnabled;
	        },
	        set: function (value) {
	            this._dp.subTypeEnabled = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "undoable", {
	        /**
	         * undo/redo 사용 여부, 기본 false
	         */
	        get: function () {
	            return this._dp.undoable;
	        },
	        set: function (value) {
	            this._dp.undoable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "insertable", {
	        /**
	         * 행 삽입 가능 여부, 기본 true
	         */
	        get: function () {
	            return this._dp.insertable;
	        },
	        set: function (value) {
	            this._dp.insertable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "updatable", {
	        /**
	         * 행 수정 가능 여부, 기본 true
	         */
	        get: function () {
	            return this._dp.updatable;
	        },
	        set: function (value) {
	            this._dp.updatable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "deletable", {
	        /**
	         * 행 삭제 가능 여부, 기본 true
	         */
	        get: function () {
	            return this._dp.deletable;
	        },
	        set: function (value) {
	            this._dp.deletable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "softDeleting", {
	        /**
	         * 행 삭제 시 실제로 삭제하지 않고 RowState만 변경할지의 여부, 기본 false
	         */
	        get: function () {
	            return this._dp.softDeleting;
	        },
	        set: function (value) {
	            this._dp.softDeleting = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "deleteCreated", {
	        /**
	         * 추가된 행을 삭제 시 실제로 삭제할지의 여부, 기본 false
	         */
	        get: function () {
	            return this._dp.deleteCreated;
	        },
	        set: function (value) {
	            this._dp.deleteCreated = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "checkStates", {
	        /**
	         * 행 상태 관리 여부, 기본 true
	         */
	        get: function () {
	            return this._dp.checkStates;
	        },
	        set: function (value) {
	            this._dp.checkStates = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "restoreMode", {
	        /**
	         * 복원 모드, 기본 RestoreMode.NONE
	         */
	        get: function () {
	            return this._dp.restoreMode;
	        },
	        set: function (value) {
	            this._dp.restoreMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "strictRestore", {
	        /**
	         * 복원시 undefined, null, 빈문자열을 다른 값으로 인식할지의 여부, 기본값 false
	         */
	        get: function () {
	            return this._dp.strictRestore;
	        },
	        set: function (value) {
	            this._dp.strictRestore = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "booleanFormat", {
	        /**
	         * 데이터에서 Boolean으로 Parsing하기위한 포맷, 기본 null (기본 포맷 이용)
	         */
	        get: function () {
	            return this._dp.booleanFormat;
	        },
	        set: function (value) {
	            this._dp.booleanFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "datetimeFormat", {
	        /**
	         * 데이터에서 Data값으로 Parsing하기위한 포맷, 기본 null (기본 포맷 이용)
	         */
	        get: function () {
	            return this._dp.datetimeFormat;
	        },
	        set: function (value) {
	            this._dp.datetimeFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "baseYear", {
	        /**
	         * 데이터의 년도가 2자리일때 기준으로 하는 년도, 기본 2000
	         */
	        get: function () {
	            return this._dp.baseYear;
	        },
	        set: function (value) {
	            this._dp.baseYear = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "amText", {
	        /**
	         * 데이터에서 오전에 해당하는 문자열, 기본 'AM'
	         */
	        get: function () {
	            return this._dp.amText;
	        },
	        set: function (value) {
	            this._dp.amText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "pmText", {
	        /**
	         * 데이터에서 오후에 해당하는 문자열, 기본 'PM'
	         */
	        get: function () {
	            return this._dp.pmText;
	        },
	        set: function (value) {
	            this._dp.pmText;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataProviderBase.prototype, "commitBeforeDataEdit", {
	        /**
	         * 편집 상태일 때 다른 행에 대한 변경 함수(setValue등) 호출 시 이전 편집 자동 커밋 여부, 기본 fasle
	         */
	        get: function () {
	            return this._dp.commitBeforeDataEdit;
	        },
	        set: function (value) {
	            this._dp.commitBeforeDataEdit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /**
	     * 설정 정보를 반환한다
	     *
	     * @remarks
	     * 설정정보를 object형태로 return한다.
	     */
	    DataProviderBase.prototype.getOptions = function () {
	        var dp = this._dp;
	        return {
	            subTypeEnabled: dp.subTypeEnabled,
	            undoable: dp.undoable,
	            insertable: dp.insertable,
	            updatable: dp.updatable,
	            deletable: dp.deletable,
	            softDeleting: dp.softDeleting,
	            deleteCreated: dp.deleteCreated,
	            checkStates: dp.checkStates,
	            restoreMode: dp.restoreMode.toString(),
	            strictRestore: dp.strictRestore,
	            booleanFormat: dp.booleanFormat,
	            datetimeFormat: dp.datetimeFormat,
	            baseYear: dp.baseYear,
	            amText: dp.amText,
	            pmText: dp.pmText,
	            // alertClientError: dp.alertClientError,
	            // throwClientError: dp.throwClientError,
	            commitBeforeDataEdit: dp.commitBeforeDataEdit
	        };
	    };
	    /**
	     * 설정정보를 변경한다.
	     *
	     * @remarks
	     * options에 기입하지 않은 설정은 원래의 값을 유지한다.
	     *
	     * @param options - 설정정보 객체
	     */
	    DataProviderBase.prototype.setOptions = function (options) {
	        this._dp.assignFrom(options);
	    };
	    /**
	     * 일괄 갱신의 시작점을 지정한다.
	     *
	     * @remarks
	     * DataProvider에서 변경 작업이 발생하면 이를 View에 이벤트를 전달하여 처리하는데 일괄처리를 할때는 이벤트가 빈번히 발생하여 성능이 저하 될 수 있다.
	     * beginUpdate()를 호출하면 endUpdate()가 호출 되기전까지 이벤트를 발생하지 않고 endUpdate()가 호출될 때 일괄 발생한다.
	     * beginUpdate ~ endUpdate는 중첩될 수 있는데 반드시 쌍으로 호출되어야 하고 마지막 쌍의 endUpdate가 호출될때 이벤트가 View에 전달된다.
	     *
	     * @example
	     * ```
	     * dataProvider.beginUpdate();
	     * try {
	     *     for (var i = 0; i < 10; i++) {
	     *         var values = gridView.getValues(i);
	     *         dataProvider.addRow(values);
	     *     }
	     * } finally {
	     *     dataProvider.endUpdate();
	     * }
	     * ```
	     */
	    DataProviderBase.prototype.beginUpdate = function () {
	        this._dp.beginUpdate();
	    };
	    /**
	     * 일괄 갱신의 완료점을 지정한다.
	     *
	     * @remarks
	     * DataProvider에서 변경 작업이 발생하면 이를 View에 이벤트를 전달하여 처리하는데 일괄처리를 할때는 이벤트가 빈번히 발생하여 성능이 저하 될 수 있다.
	     * beginUpdate()를 호출하면 endUpdate()가 호출될 되기전까지 이벤트를 발생하지 않고 endUpdate()가 호출될대 일괄 발생한다.
	     * beginUpdate ~ endUpdate는 중첩될 수 있는데 반드시 쌍으로 호출되어야 하고 마지막 쌍의 endUpdate가 호출될때 이벤트가 View에 전달된다.

	     * @example
	     * ```
	     * dataProvider.beginUpdate();
	     * try {
	     *     for (var i = 0; i < 10; i++) {
	     *         var values = gridView.getValues(i);
	     *         dataProvider.addRow(values);
	     *     }
	     * } finally {
	     *     dataProvider.endUpdate();
	     * }
	     * ```
	     */
	    DataProviderBase.prototype.endUpdate = function (refresh) {
	        if (refresh === void 0) { refresh = true; }
	        this._dp.endUpdate(refresh);
	    };
	    /**
	     * DataField 객체들을 반환한다.
	     *
	     * @remarks
	     * 현재 DataProvider에 설정되어 있는 DataField 객체를 배열로 반환한다.
	     */
	    DataProviderBase.prototype.getFields = function () {
	        return this._dp.getFields();
	    };
	    /**
	     * 필드셋을 설정한다
	     *
	     * @remarks
	     * 기존 필드 정보와 binding된 데이터를 삭제하고 전달받은 필드 정보 배열로 부터 새로운 필드셋을 구성한다.
	     * fields의 갯수만큼 DataField 객체를 생성, 요소가 문자열일경우 fieldName으로, DataField인 경우 복제, DataFieldObject인 경우 속성값 기준으로 생성한다.
	     *
	     * @param fields - 생성할 DataField의 정보 배열
	     */
	    DataProviderBase.prototype.setFields = function (fields) {
	        if (Utils_1.Utils.isArray(fields)) {
	            this._dp.setFields(fields);
	        }
	    };
	    /**
	     * 필드를 추가로 생성한다.
	     *
	     * @remarks
	     * DataField 객체를 생성하여 기존 필드셋에 추가한다.
	     *
	     * @param field - 생성할 DataField의 정보값, 문자열일 경우 fieldName으로 설정
	     * @param resetFields - 기존 DataField에 binding된 데이터를 초기화 할지의 여부
	     * @param calculateData - Calculate Field를 다시 계산할지의 여부
	     */
	    DataProviderBase.prototype.addField = function (field, resetFields, calculateData) {
	        return this._dp.addField(field, resetFields, calculateData);
	    };
	    /**
	     * 현재 구성된 필드셋의 갯수를 반환한다.
	     */
	    DataProviderBase.prototype.getFieldCount = function () {
	        return this._dp.fieldCount;
	    };
	    /**
	     * 이름에 해당하는 필드를 반환한다.
	     *
	     * @remarks
	     * fieldName속성을 기준으로 해당하는 DataField 객체를 반환한다. fieldName이 모두 일치하지 않을 경우 null을 반환한다.
	     *
	     * @param name - 필드의 fieldName에 해당하는 값
	     */
	    DataProviderBase.prototype.fieldByName = function (name) {
	        return this._dp.fieldByName(name);
	    };
	    /**
	     * 필드들의 이름을 반환한다.
	     *
	     * @remarks
	     * 필드셋에서 필드의 fieldName 속성들을 배열로 반환한다.
	     * fieldName은 내부적으로 대문자로 저장되므로 대문자 문자열로 출력된다. 설정시의 fieldName으로 가져오려면 getOrgFieldNames()를 사용한다.
	     */
	    DataProviderBase.prototype.getFieldNames = function () {
	        return this._dp.getFieldNames();
	    };
	    /**
	     * 필드들의 원래의 이름을 반환한다.
	     *
	     * @remarks
	     * 필드셋에서 필드 설정당시의 fieldName 속성들을 반환한다.
	     */
	    DataProviderBase.prototype.getOrgFieldNames = function () {
	        return this._dp.getOrgFieldNames();
	    };
	    /**
	     * 특정 인덱스의 필드의 이름을 반환한다.
	     *
	     * @remarks
	     * 필드셋에서 fieldIndex에 위치된 필드의 fieldName속성을 반환한다.
	     * fieldName은 내부적으로 대문자로 저장되므로 대문자 문자열로 출력된다. 설정시의 fieldName으로 가져오려면 getOrgFieldName()을 사용한다.
	     *
	     * @param fieldIndex - 필드 인덱스
	     *
	     */
	    DataProviderBase.prototype.getFieldName = function (fieldIndex) {
	        return this._dp.getFieldName(fieldIndex);
	    };
	    /**
	     * 특정 인덱스의 필드의 원래 이름을 반환한다.
	     *
	     * @remarks
	     * 필드셋에서 fieldIndex에 위치된 필드의 설정당시의 fieldName속성을 반환한다.
	     *
	     * @param fieldIndex - 필드의 인덱스
	     *
	     */
	    DataProviderBase.prototype.getOrgFieldName = function (fieldIndex) {
	        return this._dp.getOrgFieldName(fieldIndex);
	    };
	    /**
	     * 필드명에 해당하는 인덱스를 반환한다.
	     *
	     * @remarks
	     * 필드셋에서 fieldName에 해당하는 필드의 인덱스를 반환한다.
	     *
	     * @param fieldName - 필드명, 대소문자를 구분하지 않는다.
	     *
	     */
	    DataProviderBase.prototype.getFieldIndex = function (fieldName) {
	        return this._dp.getFieldIndex(fieldName);
	    };
	    /**
	     * 행에 값이 채워져씼는지 여부를 반환한다.
	     *
	     * @remarks
	     * 지정한 데이터행이 값이 채워져있는지 빈 행인지 여부를 반환한다.
	     *
	     * @param row - 데이터셋의 행 번호
	     *
	     * @returns 값이 있으면 true, 데이터없이 추가된 빈 행이면 false
	     */
	    DataProviderBase.prototype.hasData = function (row) {
	        return this._dp.hasData(row);
	    };
	    /**
	     * 행의 값들을 반환한다.
	     *
	     * @remarks
	     * 해당 데이터 행의 값들을 배열로 반환한다.
	     *
	     * @param row - 데이터셋의 행 번호
	     * @returns 필드 순서대로 배열화한다.
	     */
	    DataProviderBase.prototype.getValues = function (row) {
	        return this._dp.getRow(row);
	    };
	    /**
	     * 행의 값을 Object형태로 변환한다.
	     *
	     * @remarks
	     * 지정한 데이터행의 값들을 Object 형태로 반환한다.
	     *
	     * @param grid - description
	     *
	     */
	    DataProviderBase.prototype.getJsonRow = function (row) {
	        return this._dp.getRowObject(row);
	    };
	    /**
	     * 행 상태 기록 여부를 지정한다.
	     *
	     * @remarks
	     * 행 추가/수정/삭제 상태가 변경될 때 상태를 기록할지를 결정한다.
	     * 기록 되지 않으면 softDeleting이 true여도 무시하고 삭제 된다.
	     * @param value - 항 상태 기록 여부
	     */
	    DataProviderBase.prototype.checkRowStates = function (value) {
	        this._dp.checkStates = value;
	    };
	    /**
	     * 특정 행의 상태를 반환한다.
	     *
	     * @remarks
	     * 지정한 데이터 행의 상태를 반환한다
	     *
	     * @param row - 데이터셋의 행 번호
	     * @returns 아무 상태도 없으면 RowState.NONE을 반환한다.
	     */
	    DataProviderBase.prototype.getRowState = function (row) {
	        return this._dp.getRowState(row);
	    };
	    /**
	     * 특정 상태를 갖는 데이터 행 인덱스들을 반환한다.
	     *
	     * @remarks
	     * 지정된 rowState값을 상태로 같는 행들의 인덱스를 배열로 반환한다.
	     *
	     * @param rowState - 행 상태
	     */
	    DataProviderBase.prototype.getStateRows = function (rowState) {
	        return this._dp.getStateRows(rowState);
	    };
	    /**
	     * 상태값을 갖는 모든 행의 인덱스를 반환한다.
	     *
	     * @remarks
	     * RowState.NONE이 아닌 행들의 번호를 상태별로 배열로 만들어 Object형태로 반환한다.
	     *
	     * @param grid - description
	     * @returns 'created', 'updated', 'deleted', 'createAndDeleted'을 속성으로 갖는 Object, 속성의 값들은 데이터 행 인덱스의 배열.
	     */
	    DataProviderBase.prototype.getAllStateRows = function () {
	        return this._dp.getAllStateRows();
	    };
	    /**
	     * 모든 행의 상태를 제거한다.
	     *
	     * @remarks
	     * 모든 데이터 행의 상태를 RowState.NONE으로 초기화한다.
	     *
	     * @param deleteRows - 행상태가 삭제인 행을 실제로 삭제할지의 여부, true이면 데이터셋에서 제거되고 false이면 행상태를 리셋하고 데이터를 보존한다.
	     * @param rowEvents - 상태가 제거된 행에 대해 onRowStateChanged등의 상태변경 이벤트를 발생시킬지의 여부
	     */
	    DataProviderBase.prototype.clearRowStates = function (deleteRows, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.clearRowStates(deleteRows, rowEvents);
	    };
	    /**
	     * 특정 행의 상태를 변경한다
	     *
	     * @param row - 상태를 변경할 데이터 행 인덱스
	     * @param state - 변경할 상태
	     * @param force - DataProvider의 상태 관리에 관계없이 적용 여부
	     */
	    DataProviderBase.prototype.setRowState = function (row, state, force) {
	        if (state === void 0) { state = RowState_1.RowState.NONE; }
	        if (force === void 0) { force = false; }
	        this._dp.setRowState(row, state, force);
	    };
	    /**
	     * 복수의 행의 상태를 일괄 변경한다.
	     *
	     * @remarks
	     * 배열로 전달된 데이터 행들의 상태를 일괄적으로 변경한다.
	     *
	     * @param rows - 상태를 변경할 데이터 행 인덱스의 배열
	     * @param state - 변경할 상태
	     * @param force -  DataProvider의 상태 관리에 관계없이 적용 여부
	     * @param rowEvents - true이면 각각의 데이터 행의 상태 변경 이벤트 발생, false이면 하나의 이벤트로 묶어서 발생
	     */
	    DataProviderBase.prototype.setRowStates = function (rows, state, force, rowEvents) {
	        if (state === void 0) { state = RowState_1.RowState.NONE; }
	        if (force === void 0) { force = false; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.setRowStates(rows, state, force, rowEvents);
	    };
	    /**
	     * 상태별 데이터 행 개수를 반환한다.
	     *
	     * @remarks
	     * 지정한 상태 배열 또는 문자열에 따라 포함된 상태별 행 건수를 반환한다.
	     *
	     * @param states - 행의 상태, 복수일때는 상태의 배열, 모든 상태를 알고싶은 경우 'all' 또는 '*' 문자열을 사용한다
	     * @returns 상태에 해당하는 데이터 행의 건수, RowState.NONE인 경우는 제외한다.
	     * @example
	     * ```
	     * var allStateCount = dataProvider.getRowStateCount('all');
	     * var updateCount = dataProvider.getRowStateCount(RealGrid.RowState.UPDATED);
	     * ```
	     */
	    DataProviderBase.prototype.getRowStateCount = function (states) {
	        if (!states) {
	            return 0;
	        }
	        var sts = [];
	        if (states == "*" || states == "all") {
	            sts.push(RowState_1.RowState.CREATED, RowState_1.RowState.UPDATED, RowState_1.RowState.DELETED, RowState_1.RowState.CREATE_AND_DELETED);
	        }
	        else {
	            var _states = Array.isArray(states) ? states : [states];
	            for (var i = 0, l = _states.length; i < l; i++) {
	                sts.push(_states[i]);
	            }
	        }
	        if (sts.length > 0) {
	            return this._dp.getRowStateCount(sts);
	        }
	    };
	    /**
	     * 지정한 행들의 상태를 복원한다.
	     *
	     * @remarks
	     * restoreMode속성이 RestoreMode.EXPLICIT일 때 값이 변경되었다가 원복된 행의 상태를 복원한다.
	     * 예를들어 상태가 RowState.NONE인 행을 편집하여 RowState.UPDATE상태가 되었을때 행의 값이 원래대로 돌아간후 호출하면 상태가 RowState.NONE으로 원복된다.
	     * restoreMode가 AUTO일 땐 행 값에 따라 자동으로 복원된다.
	     * @param rows - 상태를 원복하려는 데이터행 인덱스의 배열
	     */
	    DataProviderBase.prototype.restoreUpdatedStates = function (rows) {
	        return this._dp.restoreUpdatedStates(rows);
	    };
	    /**
	     * 지정한 행들의 값과 상태를 복원한다.
	     * @remarks
	     * restoreMode속성이 RestoreMode.EXPLICIT 또는 AUTO일 때, 지정된 행들의 변경내용과 상태를 원래대로 복원한다
	     * @param rows - 복원하려는 행의 인덱스 배열
	     */
	    DataProviderBase.prototype.restoreUpdatedRows = function (rows) {
	        return this._dp.restoreUpdatedRows(rows);
	    };
	    /**
	     * 지정한 행들의 변경된 셀정보를 반환한다
	     *
	     * @remarks
	     * restoreMode속성이 RestoreMode.EXPLICIT 또는 AUTO일 때, 지정된 행들 각각의 값이 변경된 셀의 정보를 반환한다.
	     * 반환 데이터 예)
	     * [
	     *   {
	     *     __rowId: 1,
	     *     updatedCells: [
	     *       {
	     *         fieldName: 'OrderID',
	     *         oldValue: '1002',
	     *         newValue: '1003',
	     *       },
	     *       {
	     *         fieldName: 'OrderCount',
	     *         oldValue: 20,
	     *         newValue: 30
	     *       }
	     *     ]
	     *   }
	     * ]
	     * @param rows - 변경된 셀의 정보를 가져올 행의 배열, null일 경우 상태가 RowState.UPDATED인 전체 행의 정보를 반환한다.
	     *
	     */
	    DataProviderBase.prototype.getUpdatedCells = function (rows) {
	        return this._dp.getUpdatedCells(rows);
	    };
	    /**
	     * 필드의 중복되지 않은 값들을 반환한다.
	     *
	     * @remarks
	     * 데이터셋에서 지정된 필드에 해당하는 값들을 중복을 배제하여 정렬상태로 반환한다,
	     *
	     * @param field - 필드 명 또는 필드 인덱스
	     * @param maxCount - 최대 건수, 정렬한 상태에서 위에부터 건수만큼 잘라서 반환한다.
	     * @param sortDir - 정렬 방법
	     */
	    DataProviderBase.prototype.getDistinctValues = function (field, maxCount, sortDir) {
	        if (maxCount === void 0) { maxCount = -1; }
	        if (sortDir === void 0) { sortDir = 'ascending'; }
	        var _dir = sortDir || Types.SortDirection.ASCENDING;
	        var _fld = typeof field == "string" ? this._dp.getFieldIndex(field) : field;
	        return this._dp.getDistinctValues(_fld, maxCount, _dir);
	    };
	    /**
	     * 데이터셋의 복구 시점을 기록한다.
	     *
	     * @remarks
	     * 데이터셋의 데이터및 상태를 복제하여 저장하고 포인트의 인덱스를 반환한다.
	     * 이후 rollback() 함수를 통해 특정 포인트로 돌아갈 수 있다.
	     * @param saveStates - 상태 기록 여부
	     */
	    DataProviderBase.prototype.savePoint = function (saveStates) {
	        if (saveStates === void 0) { saveStates = true; }
	        return this._dp.savePoint(saveStates);
	    };
	    /**
	     * 데이터셋을 복원한다
	     *
	     * @remarks
	     * 데이터셋의 데이터및 상태를 해당 포인트 시점으로 되돌린다.
	     *
	     * @param savePoint - 복구 포인트의 인덱스
	     */
	    DataProviderBase.prototype.rollback = function (savePoint) {
	        if (savePoint === void 0) { savePoint = 0; }
	        this._dp.rollback(savePoint);
	    };
	    /**
	     * 모든 복구시점을 제거한다.
	     *
	     * @remarks
	     * 모든 복구 시점과 관련 저장한 데이터및 상태를 삭제한다.
	     */
	    DataProviderBase.prototype.clearSavePoints = function () {
	        this._dp.clearSavePoints();
	    };
	    /**
	     * 모든 복구시점들을 반환한다.
	     *
	     * @remarks
	     * 저장된 모든 복구시점들의 인덱스를 배열로 반환한다.
	     */
	    DataProviderBase.prototype.getSavePoints = function () {
	        return this._dp.getSavePoints();
	    };
	    /**
	     * 특정 필드의 정렬 함수를 설정한다.
	     *
	     * @remarks
	     * 해당 필드의 정렬이 발생시 기본적으로 사용는 정렬 함수가 아닌 사용자 정의 정렬 함수를 설정한다.
	     * 정렬 함수는 자바스크립트 Array.prototype.sort()의 compareFunction과 동일하다.
	     * @param field - 정렬방식을 지정할 필드의 이름 또는 인덱스
	     * @prarm comparer - 사용자 정의 정렬 함수
	     * @example
	     * ```
	     * dataProvider.setDataCompare('OrderID', function(field, row1, row2) {
	     *   var val1 = dataProvider.getValue(row1, field);
	     *   var val2 = dataProvider.getValue(row2, field);
	     *   return val1 == val2 ? 0 : val1 > val2 ? 1 : -1;
	     * }
	     * ```
	     */
	    DataProviderBase.prototype.setDataComparer = function (field, comparer) {
	        var _fld = typeof field == "string" ? this._dp.getFieldIndex(field) : field;
	        this._dp.setDataComparer(_fld, comparer);
	    };
	    /**
	     * 데이터셋을 CSV파일로 내보낸다.
	     *
	     * @remarks
	     * options의 설정에 따라 데이터셋에 저장된 데이터를 CSV파일로 내보낸다.
	     * 이는 데이터 수준에서의 내보내기이므로 View에서 설정하는 상태와는 무관하게 진행된다.
	     *
	     * @param options - 내보내기 설정
	     */
	    DataProviderBase.prototype.exportToCsv = function (options) {
	        this._dp.exportToCsv(options);
	    };
	    /**
	     * DataProvider객체를 메모리에서 해제한다.
	     *
	     * @remarks
	     * DataProvider내부에서 사용된 객체와 데이터등을 제거하고 가비지 콜렉팅이 되도록 한다.
	     */
	    DataProviderBase.prototype.destroy = function () {
	        this.dispose();
	    };
	    /**
	     * 이전에 수정한 내용을 되돌린다.
	     */
	    DataProviderBase.prototype.undo = function () {
	        this._dp.undo();
	    };
	    /**
	     * 되돌린 내용을 다시 원복한다.
	     */
	    DataProviderBase.prototype.redo = function () {
	        this._dp.redo();
	    };
	    /**
	     * @internal
	     */
	    DataProviderBase.prototype.getProvider = function () {
	        return this._dp;
	    };
	    return DataProviderBase;
	}());
	exports.DataProviderBase = DataProviderBase;
	/**
	 * LocalDataProvider 클래스
	 *
	 */
	var LocalDataProvider = /** @class */ (function (_super) {
	    __extends(LocalDataProvider, _super);
	    function LocalDataProvider() {
	        var _this = _super !== null && _super.apply(this, arguments) || this;
	        /**
	         * @internal
	         */
	        _this._onRowCountChanged = null;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * 데이터 행의 건수가 변경되었음을 알리는 콜백
	         *
	         * @remarks
	         * 행 추가 및 삭제 등으로 데이터 행의 개수가 변경됐을 때 호출된다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param newCount - 변경 후 전체 데이터 행의 건수
	         */
	        _this.onRowCountChanged = null;
	        /**
	         * 데이터 행의 수정을 결정하는 콜백
	         *
	         * @remarks
	         * 데이터 행이 수정되기 직전에 호출하여 행의 수정 여부를 확인한다. 행의 수정이 완료된 후 onRowUpdated가 발생한다.
	         * 이벤트에 함수가 바인딩되지 않은 경우 기본으로 true를 반환한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 변경된 데이터 행의 인덱스
	         * @returns true이면 행의 수정을 완료하고 false이면 행의 수정을 취소한다.
	         */
	        _this.onRowUpdating = null;
	        /**
	         * 데이터 행이 수정되었음을 알리는 콜백
	         *
	         * @remarks
	         * onRowUpdating에서 true가 반환되었을 때 수정이 완료된 후에 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 변경될 데이터 행의 인덱스
	         */
	        _this.onRowUpdated = null;
	        /**
	         * 다수의 데이터 행이 일괄 수정되었음을 알라는 콜백
	         *
	         * @remarks
	         * updateRows등의 함수에서 이벤트 일괄 반영되도록 했을 때 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 변경된 시작 데이터 행의 인덱스
	         * @param count - 변경된 행의 건수
	         */
	        _this.onRowsUpdated = null;
	        /**
	         * 데이터 행 추가를 결정하는 콜백
	         *
	         * @remarks
	         * 데이터 행이 추가되기 직전에 호출하여 행의 추가 여부를 확인한다. 행의 수정이 완료된 후 onRowInserted가 발생한다.
	         * 이벤트에 함수가 바인딩되지 않은 경우 기본으로 true를 반환한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 추가될 데이터 행의 인덱스
	         * @param values - 추가될 데이터 값
	         * @returns true이면 행의 추가를 완료하고 false이면 행의 추가를 취소한다.
	         */
	        _this.onRowInserting = null;
	        /**
	         * 데이터 행이 추가되었을을 알리는 콜백
	         *
	         * @remarks
	         * onRowInserting콜백 함수에서 true가 반환되어 행이 추가된 후 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 추가된 데이터 행의 인덱스
	         */
	        _this.onRowInserted = null;
	        /**
	         * 다수의 데이터 행이 일괄 추가되었을 때 알리는 콜백.
	         *
	         * @remarks
	         * insertRows등의 함수에서 이벤트 일괄 반영되도록 했을 때 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 변경된 시작 데이터 행의 인덱스
	         * @param count - 변경된 행의 건수
	         */
	        _this.onRowsInserted = null;
	        /**
	         * 데이터 행의 삭제를 결정하는 콜백.
	         *
	         * @remarks
	         * 데이터 행이 삭제되기 직전에 호출하여 행의 삭제 여부를 확인한다. 행의 삭제가 완료된 후 onRowDeleted가 발생한다.
	         * 이벤트에 함수가 바인딩되지 않은 경우 기본으로 true를 반환한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 추가될 데이터 행의 인덱스
	         * @returns true이면 행의 삭제를 완료하고 false이면 행의 삭제를 취소한다.
	         */
	        _this.onRowDeleting = null;
	        /**
	         * 데이터 행이 삭제되었음을 알리는 콜백.
	         *
	         * @remarks
	         * onRowDeleting콜백 함수에서 true가 반환되어 행이 추가된 후 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 삭제된 데이터 행의 인덱스
	         */
	        _this.onRowDeleted = null;
	        /**
	         * 데이터 행이 삭제되었음을 알리는 콜백.
	         *
	         * @remarks
	         * onRowDeleting콜백 함수에서 true가 반환되어 행이 추가된 후 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 삭제된 데이터 행의 인덱스
	         */
	        _this.onRowsDeleted = null;
	        /**
	         * 데이터 행의 이동을 결정하는 콜백.
	         *
	         * @remarks
	         * 데이터 행이 이동 되기 직전에 호출하여 행의 이동 여부를 결정한다.행의 이동이 완료된 후 onRowMoved가 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 데이터 행의 원래의 인덱스
	         * @param newRow - 데이터 행의 이동후의 인덱스
	         */
	        _this.onRowMoving = null;
	        /**
	         * 데이터 행이 이동되었음을 알리는 콜백.
	         *
	         * @remarks
	         * onRowMoving콜백 함수에서 true가 반환되어 행이 이동된 후 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 데이터 행의 원래의 인덱스
	         * @param newRow - 데이터 행의 이동후의 인덱스
	         */
	        _this.onRowMoved = null;
	        /**
	         * 복수의 데이터 행의 이동을 결정하는 콜백.
	         *
	         * @remarks
	         * 복수의 데이터 행이 이동 되기 직전에 호출하여 행의 이동 여부를 결정한다.행들의 이동이 완료된 후 onRowsMoved가 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 첫 데이터 행의 원래의 인덱스
	         * @param count - 이동할 데이터 행의 건수
	         * @param newRow - 첫 데이터 행의 이동후의 인덱스
	         */
	        _this.onRowsMoving = null;
	        /**
	         * 복수의 데이터 행이 이동되었음을 알리는 콜백.
	         *
	         * @remarks
	         * onRowsMoving콜백 함수에서 true가 반환되어 행들이 이동된 후 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 첫 데이터 행의 원래의 인덱스
	         * @param count - 이동할 데이터 행의 건수
	         * @param newRow - 첫 데이터 행의 이동후의 인덱스
	         */
	        _this.onRowsMoved = null;
	        /**
	         * 데이터 셀의 값이 변경되었음을 알리는 콜백
	         *
	         * @remarks
	         * setValue()를 이용하여 데이터를 변경할 때 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 값이 변경된 행의 인덱스
	         * @param field - 값이 변경된 필드의 인덱스
	         */
	        _this.onValueChanged = null;
	        /**
	         * 데이터셋의 값이 변경되었었음을 알리는 콜백
	         *
	         * @remarks
	         * setValue()함수나 View에서의 입력으로 값이 바뀔 때 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         */
	        _this.onDataChanged = null;
	        /**
	         * 데이터 행의 상태가 변경되었음을 알리는 콜백
	         *
	         * @remarks
	         * 데이터행의 상태가 변경되는 경우 발생, 단 행 추가시에는 상태가 변경되었다 할 수 없으므로 예외로 한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param row - 상태가 변경된 데이터 행의 인덱스
	         */
	        _this.onRowStateChanged = null;
	        /**
	         * 복수의 데이터 행의 상태가 일괄 변경되었음을 알리는 콜백
	         *
	         * @remarks
	         * 복수의 데이터행의 상태가 일괄 변경되는 경우 발생, 단 행 추가시에는 상태가 변경되었다 할 수 없으므로 예외로 한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param rows - 상태가 변경된 데이터 행들의 인덱스 배열
	         */
	        _this.onRowStatesChanged = null;
	        /**
	         * 모든 행의 상태가 초기회 되었음을 알리는 콜백
	         *
	         * @remarks
	         * clearRowStates() 함수를 통해 행의 상태가 모두 초기화 한 후에 발생
	         *
	         * @param provider - DataProvider 컨트롤
	         */
	        _this.onRowStatesCleared = null;
	        /**
	         * 복수의 데이터 행의 상태가 복원되었음을 알리는 콜백
	         *
	         * @remarks
	         * restoreUpdatedRows() 함수를 통해 수정된 행들이 복원 되었을 때 발생한다.
	         *
	         * @param provider - DataProvider 컨트롤
	         * @param rows - 복원된 데이터 행들의 인덱스 배열
	         */
	        _this.onRestoreRows = null;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /**
	     * 데이터셋의 데이터 건수를 반환한다.
	     */
	    LocalDataProvider.prototype.getRowCount = function () {
	        return this._dp.rowCount;
	    };
	    /**
	     * 데이터셋의 데이터 건수를 설정하다.
	     *
	     * @remarks
	     * 데이터셋의 데이터 건수를 강제로 설정한다. 기존의 건수가 새로운 건수보다 많을 경우 잘려서 버려지고 새로운 건수가 많을 경우 새로운 행이 추가된다.
	     *
	     * @param newCount - 새로운 데이터 건수
	     * @param fillFieldDefaults - 새로운 행이 추가될때 필드의 기본값을 사용하여 값을 넣을지의 여부
	     * @param defaultValues - 새로운 행이 추가될때 각각의 필드에 해당하는 값들, 필드순서대로 사용한다.
	     * @param rowState - 새로운 행의 상태
	     */
	    LocalDataProvider.prototype.setRowCount = function (newCount, fillFieldDefaults, defaultValues, rowState) {
	        if (fillFieldDefaults === void 0) { fillFieldDefaults = false; }
	        if (defaultValues === void 0) { defaultValues = null; }
	        if (rowState === void 0) { rowState = 'none'; }
	        var _state = rowState;
	        return this._dp.setRowCount(newCount, fillFieldDefaults, defaultValues, _state);
	    };
	    /**
	     * 데이터셋에서 데이터를 필터링한다.
	     *
	     * @param filters - 필터 설정 값
	     * @param filterMode - 필터들의 연산 조건
	     * @example
	     * ```
	     * dataProvider.setFilters([
	     *   "value['field1']='가수'",
	     *   "value['field2']='여자'"
	     * ], "and");
	     * ```
	     */
	    LocalDataProvider.prototype.setFilters = function (filters, filterMode) {
	        if (filterMode === void 0) { filterMode = 'and'; }
	        this._dp.setFilters(filters, filterMode);
	    };
	    /**
	     * JSON 데이터 원본에서 데이터를 가져와 데이터셋을 생성한다.
	     *
	     * @param data - 데이터 원본, JSON문자열 또는 Object의 배열
	     * @param options - 데이터 추출및 채우는 방식 설정, DataFillOptions객체 또는 DataFillOptions와 동일 구조의 object, null이면 기본값으로 동작,
	     * @example
	     * ```
	     * dataProvider.fillJsonData([
	     *  {
	     *    FieldA: 'ABC',
	     *    FieldB: 10
	     *  }, {
	     *    FieldA: 'DEF',
	     *    FieldB: 30
	     *  }]);
	     * ```
	     */
	    LocalDataProvider.prototype.fillJsonData = function (data, options) {
	        var opts = options instanceof DataLoader_1.DataFillOptions ? options : new DataLoader_1.DataFillOptions(options);
	        DataDelegateUtils.fillData(this._dp, 'json', data, opts);
	    };
	    /**
	     * XML 데이터 원본에서 문자열을 파싱하여 데이터셋을 생성한다.
	     *
	     * @param data - XML 문자열
	     * @param options - 데이터 추출및 채우는 방식 설정, DataFillOptions객체 또는 DataFillOptions와 동일 구조의 object
	     */
	    LocalDataProvider.prototype.fillXmlData = function (data, options) {
	        var opts = options instanceof DataLoader_1.DataFillOptions ? options : new DataLoader_1.DataFillOptions(options);
	        DataDelegateUtils.fillData(this._dp, 'xml', data, opts);
	    };
	    /**
	     * CSV 데이터 원본에서 문자열을 파싱하여 데이터셋을 생성한다.
	     *
	     * @param data - CSV 문자열
	     * @param options - 데이터 추출및 채우는 방식 설정, DataFillOptions객체 또는 DataFillOptions와 동일 구조의 object
	     */
	    LocalDataProvider.prototype.fillCsvData = function (data, options) {
	        var opts = options instanceof DataLoader_1.DataFillOptions ? options : new DataLoader_1.DataFillOptions(options);
	        DataDelegateUtils.fillData(this._dp, 'csv', data, opts);
	    };
	    /**
	     * 데이터 원본에서 가져와 데이터셋을 채운다.
	     *
	     * @param rows - 데이터 원본, 2차원 배열 또는 Object의 배열
	     * @param start - 데이터 셋에 채울 데이터의 시작 행
	     * @param count - 데이터 셋에 채울 데이터 건수, -1이면 데이터 원본의 건수만큼 채운다.
	     * @example
	     * ```
	     * dataProvider.setRows([
	     *  {
	     *    FieldA: 'ABC',
	     *    FieldB: 10
	     *  }, {
	     *    FieldA: 'DEF',
	     *    FieldB: 30
	     *  }]);
	     * ```
	     */
	    LocalDataProvider.prototype.setRows = function (rows, start, count) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        this._dp.setRows(rows, start, count);
	    };
	    /**
	     * 데이터 원본에서 가져와 데이터셋에 추가한다.
	     *
	     * @param rows - 데이터 원본, 2차원 배열 또는 Object의 배열
	     * @param start - 데이터 셋에 채울 데이터의 시작 행
	     * @param count - 데이터 셋에 채울 데이터 건수, -1이면 데이터 원본의 건수만큼 추가된다.
	     * @param rowEvents - 이벤트를 일괄 발생 여부
	     * @example
	     * ```
	     * dataProvider.addRows([
	     *  {
	     *    FieldA: 'GHI',
	     *    FieldB: 15
	     *  }, {
	     *    FieldA: 'KLM',
	     *    FieldB: 31
	     *  }]);
	     * ```
	     */
	    LocalDataProvider.prototype.addRows = function (rows, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.appendRows(rows, start, count, rowEvents);
	    };
	    /**
	     * 데이터 원본에서 가져와 데이터셋의 특정 위치에 삽입한다.
	     *
	     * @param row - 삽입할 데이터 행의 인덱스
	     * @param rows - 데이터 원본, 2차원 배열 또는 Object의 배열
	     * @param start - 데이터 셋에 채울 데이터의 시작 행
	     * @param count - 데이터 셋에 채울 데이터 건수, -1이면 데이터 원본의 건수만큼 삽입된다.
	     * @param rowEvents - 이벤트를 일괄 발생 여부
	     * @example
	     * ```
	     * dataProvider.insertRows(10, [
	     *  {
	     *    FieldA: 'OPQ',
	     *    FieldB: 34
	     *  }, {
	     *    FieldA: 'RST',
	     *    FieldB: 27
	     *  }]);
	     * ```
	     */
	    LocalDataProvider.prototype.insertRows = function (row, rows, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.insertRows(row, rows, start, count, rowEvents);
	    };
	    /**
	     * 데이터 원본에서 가져와 데이터셋의 특정 위치에 변경한다.
	     *
	     * @param row - 변경할 데이터 행의 인덱스
	     * @param rows - 데이터 원본, 2차원 배열 또는 Object의 배열
	     * @param start - 데이터 셋에 채울 데이터의 시작 행
	     * @param count - 데이터 셋에 채울 데이터 건수, -1이면 데이터 원본의 건수만큼 변경된다.
	     * @param rowEvents - 이벤트를 일괄 발생할 여부
	     * @example
	     * ```
	     * dataProvider.updateRows(10, [
	     *  {
	     *    FieldA: 'OPQ',
	     *    FieldB: 34
	     *  }, {
	     *    FieldA: 'RST',
	     *    FieldB: 27
	     *  }]);
	     * ```
	     */
	    LocalDataProvider.prototype.updateRows = function (row, rows, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.updateRows(row, rows, start, count, rowEvents);
	    };
	    /**
	     * 데이터 원본에서 가져와 데이터셋의 특정 위치에 변경한다. (Strict)
	     *
	     * @remarks
	     * updateRows()와 기본동작이 유사하나 원본의 값이 undefined이거나 명시되지 않은 경우 기존의 값을 유지한다는 차이가 있다.
	     * @param row - 변경할 데이터 행의 인덱스
	     * @param rows - 데이터 원본, 2차원 배열 또는 Object의 배열
	     * @param start - 데이터 셋에 채울 데이터의 시작 행
	     * @param count - 데이터 셋에 채울 데이터 건수, -1이면 데이터 원본의 건수만큼 변경된다.
	     * @param rowEvents - 이벤트를 일괄 발생할 여부
	     */
	    LocalDataProvider.prototype.updateStrictRows = function (row, rows, start, count, rowEvents) {
	        if (start === void 0) { start = 0; }
	        if (count === void 0) { count = -1; }
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.updateStrictRows(row, rows, start, count, rowEvents);
	    };
	    /**
	     * 데이터 셋을 초기화한다
	     */
	    LocalDataProvider.prototype.clearRows = function () {
	        this._dp.clearRows();
	    };
	    /**
	     * 데이터셋의 특정 데이터 행의 값을 변경한다.
	     *
	     * @param row - 변경할 데이터 행의 인덱스
	     * @param values - 행의 변경할 데이터, 필드 인덱스 순서대로 배열에서 가져온다
	     */
	    LocalDataProvider.prototype.updateRow = function (row, values) {
	        this._dp.updateRow(row, values);
	    };
	    /**
	     * 데이터셋의 특정 데이터 행의 값을 변경한다.(Strict)
	     *
	     * @remarks
	     * updateRow()와 기본동작이 유사하나 원본의 값이 undefined이거나 명시되지 않은 경우 기존의 값을 유지한다는 차이가 있다.
	     * @param row - 변경할 데이터 행의 인덱스
	     * @param values - 행의 변경할 데이터, 필드 인덱스 순서대로 배열에서 가져온다
	     */
	    LocalDataProvider.prototype.updateStrictRow = function (row, values) {
	        this._dp.updateStrictRow(row, values);
	    };
	    /**
	     * 특정 행들을 View에게 감출 때 사용한다.
	     * @remarks
	     * 숨겨진 상태에서 데이터셋의 추가, 삭제가 발생하는 경우 인덱스가 변경되므로 주의를 요한다.
	     * @param dataRows - 감출 데이터 행의 인덱스 또는 인덱스 배열
	     */
	    LocalDataProvider.prototype.hideRows = function (dataRows) {
	        this._dp.hideRows(dataRows);
	    };
	    /**
	     * 감춰진 데이터행을 다시 표시한다.
	     *
	     * @param dataRows - 다시 표시할 데이터 행의 인덱스 또는 인덱스 배열
	     */
	    LocalDataProvider.prototype.showHiddenRows = function (dataRows) {
	        this._dp.showRows(dataRows);
	    };
	    /**
	     * 감춰진 데이터행들의 인덱스을 반환한다
	     */
	    LocalDataProvider.prototype.getHiddenRows = function () {
	        return this._dp.getHiddenRows();
	    };
	    /**
	     * 특정 행이 감춰줘있는지의 여부를 반환한다.
	     *
	     * @param dataRow - 확인할 데이터 행의 인덱스
	     */
	    LocalDataProvider.prototype.isHiddenRow = function (dataRow) {
	        return this._dp.isHiddenRow(dataRow);
	    };
	    /**
	     * 모든 행의 감춰진 상태를 초기환한다.
	     */
	    LocalDataProvider.prototype.resetHiddenRows = function () {
	        this._dp.clearHiddenRows();
	    };
	    // deprecated 
	    // setData (data, options)
	    /**
	     * 데이터 행을 추가한다
	     *
	     * @param values - 추가할 행의 값, 배열 또는 Object
	     */
	    LocalDataProvider.prototype.addRow = function (values) {
	        return this._dp.appendRow(values);
	    };
	    /**
	     * 특정 위치에 데이터 행을 삽입한다
	     *
	     * @param row - 삽입할 데이터 행의 인덱스
	     * @param values - 삽입할 행의 값, 배열 또는 Object
	     */
	    LocalDataProvider.prototype.insertRow = function (row, values) {
	        return this._dp.insertRow(row, values);
	    };
	    /**
	     * 특정 위치의 데이터 행을 제거한다
	     *
	     * @param row - 제거할 데이터 행의 인덱스
	     */
	    LocalDataProvider.prototype.removeRow = function (row) {
	        this._dp.removeRow(row);
	    };
	    /**
	     * 특정 위치의 복수의 데이터 행들을 제거한다
	     *
	     * @param rows - 제거할 데이터 행 인덱스의 배열
	     * @param rowEvents - 개별 이벤트 발생 여부
	     */
	    LocalDataProvider.prototype.removeRows = function (rows, rowEvents) {
	        if (rowEvents === void 0) { rowEvents = false; }
	        this._dp.removeRows(rows, rowEvents);
	    };
	    /**
	     * 특정 데이터 행을 이동한다
	     *
	     * @param rows - 이동할 데이터 행 인덱스
	     * @param newRow - 새로운 인덱스
	     */
	    LocalDataProvider.prototype.moveRow = function (row, newRow) {
	        this._dp.moveRow(row, newRow);
	    };
	    /**
	     * 복수의 데이터 행들을 이동한다.
	     *
	     * @param rows - 이동할 데이터 행들 중 첫 행의 인덱스
	     * @param count - 이동할 데이터 행의 건수
	     * @param newRow - 새로운 인덱스
	     */
	    LocalDataProvider.prototype.moveRows = function (row, count, newRow) {
	        this._dp.moveRows(row, count, newRow);
	    };
	    /**
	     * 특정 데이터 행의 특정 필드의 값을 반환한다.
	     *
	     * @param row - 값을 가져올 데이터 행의 인덱스
	     * @param field - 값을 가져올 필드의 인덱스 또는 필드명
	     */
	    LocalDataProvider.prototype.getValue = function (row, field) {
	        var fld = DataDelegateUtils.getFieldIndex(this._dp, field);
	        return this._dp.getValue(row, fld);
	    };
	    /**
	     * 특정 데이터 행의 특정 필드의 값을 변경한다.
	     *
	     * @param row - 값을 변경할 데이터 행의 인덱스
	     * @param field - 값을 변경할 필드의 인덱스 또는 필드명
	     * @param newValue - 변경할 새로운 값
	     */
	    LocalDataProvider.prototype.setValue = function (row, field, newValue) {
	        var fld = DataDelegateUtils.getFieldIndex(this._dp, field);
	        this._dp.setValue(row, fld, newValue);
	    };
	    /**
	     * 데이터 셋의 특정 구간의 데이터를 2차원 배열로 반환한다.
	     *
	     * @param startRow - 시작 데이터 행의 인덱스
	     * @param endRow - 끝 데이터 행의 인덱스, -1이면 데이터 셋의 끝까지
	     */
	    LocalDataProvider.prototype.getRows = function (startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        return this._dp.getRows(startRow, endRow);
	    };
	    /**
	     * 데이터 셋의 특정 구간의 데이터를 Object 배열로 반환한다.
	     *
	     * @param startRow - 시작 데이터 행의 인덱스
	     * @param endRow - 끝 데이터 행의 인덱스, -1이면 데이터 셋의 끝까지
	     */
	    LocalDataProvider.prototype.getJsonRows = function (startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        return this._dp.getRowObjects(startRow, endRow);
	    };
	    /**
	     * 데이터 셋의 특정 구간의 데이터를 설정에 따라 Object 배열로 반환한다.
	     *
	     * @param options - 데이터를 반환내는 방식 설정, DataOutputOptions과 동일
	     * @param startRow - 시작 데이터 행의 인덱스
	     * @param endRow - 끝 데이터 행의 인덱스, -1이면 데이터 셋의 끝까지
	     */
	    LocalDataProvider.prototype.getOutputRows = function (options, startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        var opts = new DataOutputOptions_1.DataOutputOptions(options);
	        var objs = null;
	        try {
	            objs = this._dp.getOutputObjects(opts, startRow, endRow);
	        }
	        finally {
	            opts.dispose();
	        }
	        return objs;
	    };
	    /**
	     * 데이터 셋의 특정 데이터 행을 설정에 따라 Object로 반환한다.
	     *
	     * @param options - 데이터를 반환내는 방식 설정, DataOutputOptions과 동일
	     * @param row - 데이터 행의 인덱스
	     */
	    LocalDataProvider.prototype.getOutputRow = function (options, row) {
	        var opts = new DataOutputOptions_1.DataOutputOptions(options);
	        var obj = null;
	        try {
	            obj = this._dp.getOutputObject(opts, row);
	        }
	        finally {
	            opts.dispose();
	        }
	        return obj;
	    };
	    /**
	     * 데이터 셋의 특정 필드에 해당하는 특정 구간의 데이터를 반환한다.
	     *
	     * @param filed - 필드의 인덱스 또는 필드명
	     * @param startRow - 시작 행의 인덱스
	     * @param endRow - 마지막 행의 인덱스, -1이면 데이터셋의 끝까지
	     */
	    LocalDataProvider.prototype.getFieldValues = function (field, startRow, endRow) {
	        if (startRow === void 0) { startRow = 0; }
	        if (endRow === void 0) { endRow = -1; }
	        var fld = DataDelegateUtils.getFieldIndex(this._dp, field);
	        return this._dp.getColumn(fld, startRow, endRow);
	    };
	    /**
	     * 검색 설정 방식에 따라 특정 값이 있는 행을 찾는다.
	     *
	     * @param options - 검색 방식.
	     * @returns 찾은 행의 인덱스.
	     */
	    LocalDataProvider.prototype.searchDataRow = function (options) {
	        if (options) {
	            var fields = options.fields;
	            var values = options.values;
	            var startrow = options.startIndex !== undefined ? options.startIndex : 0;
	            var wrap = options.wrap !== undefined ? options.wrap : true;
	            return this._dp.searchDataRow(fields, values, options, startrow, wrap);
	        }
	        return -1;
	    };
	    /**
	     * 검색 설정 방식에 따라 특정 값이 있는 셀을 찾는다.
	     *
	     * @param options - 검색 방식
	     * @returns 찾은 셀의 정보
	     */
	    LocalDataProvider.prototype.searchData = function (options) {
	        if (options) {
	            var fields = options.fields;
	            var value = options.value;
	            var startrow = options.startIndex !== undefined ? options.startIndex : 0;
	            var startFieldIndex = options.startFieldIndex !== undefined ? options.startFieldIndex : 0;
	            var wrap = options.wrap !== undefined ? options.wrap : true;
	            return this._dp.searchData(fields, value, options, startrow, startFieldIndex, wrap);
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    /**
	     * @internal
	     */
	    LocalDataProvider.prototype._createProvider = function (undoable) {
	        return new LocalDataProvider_1.LocalDataProvider(undoable);
	    };
	    /**
	     * @internal
	     */
	    LocalDataProvider.prototype._createListener = function (provider) {
	        return new GridProviderListener(this, provider);
	    };
	    return LocalDataProvider;
	}(DataProviderBase));
	exports.LocalDataProvider = LocalDataProvider;
	/**
	 * LocalTreeDataProvider 클래스
	 */
	var LocalTreeDataProvider = /** @class */ (function (_super) {
	    __extends(LocalTreeDataProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LocalTreeDataProvider(undoable) {
	        if (undoable === void 0) { undoable = false; }
	        return _super.call(this, undoable) || this;
	    }
	    /**
	     * @internal
	     */
	    LocalTreeDataProvider.prototype.dispose = function () {
	        _super.prototype.dispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /**
	     * 저장 된 데이터행의 갯수를 반환한다.
	     *
	     * @remarks
	     * 루트의 하위에 저장되어있는 모든 아이템의 갯수를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getRowCount = function () {
	        return this._dp.rowCount;
	    };
	    /**
	     * 트리의 데이터를 새로운 데이터로 설정한다.
	     *
	     * @remarks
	     * 트리의 기존 데이터행들을 모두 삭제하고 매개변수로 전달되는 배열의 배열을 데이터 행들로 추가한다.
	     *
	     * @param rows - 설정할 데이터.
	     * @param treeField - 필드 명.
	     * @param needSortnig - 정렬 여부.
	     * @param childrenField - 자식 행이 있는 지를 지시하는 필드. 자식의 필드 명.
	     * @param iconField - 트리 노드에 표시할 아이콘 경로를 값으로 가지고 있는 필드 이름.
	     *
	     */
	    LocalTreeDataProvider.prototype.setRows = function (rows, treeField, needSorting, childrenField, iconField) {
	        this._dp.setRows(rows, treeField, needSorting, childrenField, iconField);
	    };
	    /**
	     * 트리의 데이터를 새로운 CSV 데이터로 설정한다.
	     *
	     * @remarks
	     * 트리의 기존 데이터행들을 모두 삭제하고 매개변수로 전달되는 CSV를 데이터 행들로 추가한다.
	     *
	     * @param rows - 설정할 데이터.
	     * @param treeField - 필드 명.
	     * @param needSortnig - 정렬 여부.
	     * @param childrenField - 자식 행이 있는 지를 지시하는 필드. 자식의 필드 명.
	     * @param iconField - 트리 노드에 표시할 아이콘 경로를 값으로 가지고 있는 필드 이름.
	     *
	     */
	    LocalTreeDataProvider.prototype.setCsvRows = function (rows, treeField, needSorting, childrenField, iconField) {
	        this._dp.setCsvRows(rows, treeField, needSorting, childrenField, iconField);
	    };
	    /**
	     * 트리의 데이터를 새로운 XML 데이터로 설정한다.
	     *
	     * @remarks
	     * 트리의 기존 데이터행들을 모두 삭제하고 매개변수로 전달되는 XML을 데이터 행들로 추가한다.
	     * rowElement에 "row"를 입력하면 루트의 row element가 사용될 것이고,
	     * rowElement에 "row[0].row"를 입력하면 루트의 첫번째 행이 사용될 것이다.
	     * "row.row"는 "row[0].row"와 같다.
	     *
	     * @param xml - 설정할 데이터.
	     * @param rowElement - XML 중 트리의 데이터 행들로 사용될 element의 이름.
	     * @param childrenField - 자식 행이 있는 지를 지시하는 필드. 자식의 필드 명.
	     * @param iconField - 트리 노드에 표시할 아이콘 경로를 값으로 가지고 있는 필드 이름.
	     *
	     */
	    LocalTreeDataProvider.prototype.setXmlRows = function (xml, rowElement, childrenField, iconField) {
	        this._dp.setXmlRows(xml, rowElement, childrenField, iconField);
	    };
	    /**
	     * 트리의 데이터를 새로운 JSON 데이터로 설정한다.
	     *
	     * @remarks
	     * 트리의 기존 데이터행들을 모두 삭제하고 매개변수로 전달되는 JSON 객체를 데이터 행들로 추가한다.
	     *
	     * @param json - 설정할 데이터. Json 배열이거나 Json 배열을 속성으로 갖는 object. Json 배열이 아닌 경우 rowsProp에 지정된 속성을 배열로 지정해야 한다.
	     * @param rowsProp - Json 중 트리의 데이터 행들로 사용될 배열을 값으로 하는 속성의 이름.
	     * @param childrenProp - 자식 행이 있는 지를 지시하는 속성 이름. 해당 속성의 값이 자식의 필드 이름과 같아야한다.
	     * @param iconProp - 트리 노드에 표시할 아이콘 경로를 값으로 가지고 있는 속성 이름.
	     *
	     */
	    LocalTreeDataProvider.prototype.setObjectRows = function (json, rowsProp, childrenProp, iconProp) {
	        this._dp.setJsonRows(json, rowsProp, childrenProp, iconProp);
	    };
	    // old name setJsonRows2
	    /**
	     * ?
	     *
	     */
	    LocalTreeDataProvider.prototype.setNestedRows = function (json, rowsProp, childRowsProp, childrenProp, iconProp) {
	        this._dp.setJsonRows2(json, rowsProp, childRowsProp, childrenProp, iconProp);
	    };
	    /**
	     * 지정한 설정에 따라 Json 데이터를 로드하여 TreeDataProvider 로컬 저장소에 저장한다.
	     *
	     * @param data - json 형태의 data.
	     * @param options - DataFillOptions와 같은 모델의 설정 정보.
	     *
	     */
	    LocalTreeDataProvider.prototype.fillJsonData = function (data, options) {
	        var opts = new DataLoader_1.DataFillOptions(options);
	        try {
	            DataDelegateUtils.fillTreeData(this._dp, 'json', data, opts);
	        }
	        finally {
	            opts.dispose();
	            opts = null;
	        }
	    };
	    /**
	     * 지정한 설정에 따라 xml 데이터를 로드하여 TreeDataProvider 로컬 저장소에 저장한다.
	     *
	     * @param data - xml 형태의 data.
	     * @param options - DataFillOptions와 같은 모델의 설정 정보.
	     *
	     */
	    LocalTreeDataProvider.prototype.fillXmlData = function (data, options) {
	        var opts = new DataLoader_1.DataFillOptions(options);
	        try {
	            DataDelegateUtils.fillTreeData(this._dp, 'xml', data, opts);
	        }
	        finally {
	            opts.dispose();
	            opts = null;
	        }
	    };
	    /**
	     * 지정한 설정에 따라 csv 데이터를 로드하여 TreeDataProvider 로컬 저장소에 저장한다.
	     *
	     * @param data - csv 형태의 data.
	     * @param options - DataFillOptions와 같은 모델의 설정 정보.
	     *
	     */
	    LocalTreeDataProvider.prototype.fillCsvData = function (data, options) {
	        var opts = new DataLoader_1.DataFillOptions(options);
	        try {
	            DataDelegateUtils.fillTreeData(this._dp, 'csv', data, opts);
	        }
	        finally {
	            opts.dispose();
	            opts = null;
	        }
	    };
	    /**
	     * 트리 행에 표시된 아이콘 인덱스를 반환한다.
	     *
	     * @param row - 데이터 행의 트리 id.
	     *
	     */
	    LocalTreeDataProvider.prototype.getIconIndex = function (row) {
	        var r = this._dp.rowById(row);
	        return r.iconIndex;
	    };
	    /**
	     * 지정한 행의 아이콘을 변경한다.
	     *
	     * @param row - 아이콘을 변경할 행의 트리 id.
	     * @param iconIndex - 새로 변경할 아이콘 인덱스.
	     *
	     */
	    LocalTreeDataProvider.prototype.setIconIndex = function (row, iconIndex) {
	        var r = this._dp.rowById(row);
	        r.iconIndex = iconIndex;
	    };
	    /**
	     * 지정한 행의 부모의 row id를 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id.
	     * @returns 행 또는 부모 행이 존재하지 않을 경우 -1을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getParent = function (row) {
	        var r = this._dp.rowById(row);
	        return r && r.parent ? r.parent.rowId : -1;
	    };
	    /**
	     * 지정한 행의 level을 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id.
	     *
	     */
	    LocalTreeDataProvider.prototype.getLevel = function (row) {
	        var r = this._dp.rowById(row);
	        return r.level;
	    };
	    /**
	     * 지정한 행의 자식 행들의 개수를 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id. 0일 경우 루트 행의 자식 행들의 개수를 반환한다.
	     * @returns 지정한 행 또는 자식 행이 존재하지 않을 경우 0을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getChildCount = function (row) {
	        if (row === null || row === undefined) {
	            return this._dp.getChildCount(null);
	        }
	        else {
	            var r = this._dp.rowById(row);
	            return r && r.children ? r.children.length : 0;
	        }
	    };
	    /**
	     * 지정한 행의 모든 자식 행들의 row id를 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id, 0일 경우 루트 행의 자식 행들의 row id를 반환한다.
	     * @returns 지정한 행이 존재하지 않을 경우 null을 반환한다.
	     */
	    LocalTreeDataProvider.prototype.getChildren = function (row) {
	        var children;
	        if (row === null || row === undefined) {
	            children = this._dp.getRows(null);
	        }
	        else {
	            var r = this._dp.rowById(row);
	            children = r.children;
	        }
	        return DataDelegateUtils.extractTreeRows(children);
	    };
	    /**
	     * 지정한 행의 자손 행들의 개수를 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id, 0일 경우 루트 행의 자손 행들의 개수를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getDescendantCount = function (row) {
	        if (row === null || row === undefined) {
	            return this._dp.getDescendantCount(null);
	        }
	        else {
	            var r = this._dp.rowById(row);
	            return r.descendantCount;
	        }
	    };
	    /**
	     * 지정한 행의 자손 행들의 id를 반환한다.
	     *
	     * @param data - 지정한 데이터 행의 트리 id, 0일 경우 루트 행의 자손 행들의 row id를 반환한다.
	     * @param maxLevel - 반환할 수 있는 최대 레벨 깊이. 설정 된 값 이하의 레벨을 가진 행들만 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getDescendants = function (row, maxLevel) {
	        var r = null;
	        if (row !== null && row !== undefined) {
	            r = this._dp.rowById(row);
	        }
	        var descendants = this._dp.getDescendants(null, maxLevel);
	        return DataDelegateUtils.extractTreeRows(descendants);
	    };
	    /**
	     * 지정한 행의 조상 행들의 id를 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id.
	     * @returns 지정한 행 또는 행의 조상 행들이 존재하지 않을 경우 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getAncestors = function (row) {
	        var r = this._dp.rowById(row);
	        return r && r.ancestors ? DataDelegateUtils.extractTreeRows(r.ancestors) : null;
	    };
	    /**
	     * 지정한 데이터 행을 JSON 객체로 반환한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id.
	     * @returns 지정한 행이 존재하지 않을 경우 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getJsonRow = function (row) {
	        var r = this._dp.rowById(row);
	        return r ? r.getObject() : null;
	    };
	    /**
	     * 지정한 데이터 행과 자손들을 JSON 객체로 반환한다.
	     *
	     * @param data - 지정한 데이터 행의 트리 id, 지정하지 않거나 rowId를 -1로 지정하면 루트 행의 데이터를 가져옵니다.
	     * @param recursive - 자손을 포함할 것인지 여부. 기본값: false.
	     * @param childRowsProp - 자식 속성의 속성명을 지정한다. 기본값: 'rows'.
	     * @param iconProp - 아이콘 필드의 속성명을 지정한다. 기본값: 'iconIndex'.
	     * @returns 지정한 행이 존재하지 않을 경우 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getJsonRows = function (row, recursive, childRowsProp, iconProp) {
	        if (childRowsProp === void 0) { childRowsProp = 'rows'; }
	        if (iconProp === void 0) { iconProp = 'iconIndex'; }
	        var r = (row === null || row === undefined) ? this._dp.rootRow : this._dp.rowById(row);
	        return r ? r.getChildObjects(recursive, childRowsProp, iconProp, true) : null;
	    };
	    /**
	     * 지정한 데이터 행을 형식을 적용하여 JSON 객체로 가져온다.
	     *
	     * @param options - DataOutputOptions와 같은 모델의 설정 정보.
	     * @param row - 지정한 데이터 행의 트리 id. 지정하지 않을경우 루트 행의 결과를 반환한다.
	     * @param iconProp - 아이콘 필드의 속성명을 지정한다. 기본값: 'iconIndex'.
	     * @returns 지정한 데이터 행이 존재하지 않으면 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getOutputRow = function (options, row, iconProp) {
	        if (iconProp === void 0) { iconProp = 'iconIndex'; }
	        var opts = new DataOutputOptions_1.DataOutputOptions(options);
	        var obj;
	        try {
	            var r = (row === undefined || row === null) ? this._dp.rootRow : this._dp.rowById(row);
	            obj = r ? r.getOutput(options, iconProp) : null;
	        }
	        finally {
	            opts.dispose();
	        }
	        return obj;
	    };
	    /**
	     * 지정한 데이터 행과 자손들을 형식을 적용하여 JSON 객체로 가져온다.
	     *
	     * @param options - DataOutputOptions와 같은 모델의 설정 정보.
	     * @param row - 지정한 데이터 행의 트리 id. 지정하지 않을경우 루트 행의 결과를 반환한다.
	     * @param recursive - 자손을 포함할 것인지 여부. 기본값: false.
	     * @param childRowsProp - 자식 속성의 속성명을 지정한다. 기본값: 'rows'.
	     * @param iconProp - 아이콘 필드의 속성명을 지정한다. 기본값: 'iconIndex'.
	     * @returns 지정한 데이터 행이 존재하지 않으면 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getOutputRows = function (options, row, recursive, childRowsProp, iconProp) {
	        if (childRowsProp === void 0) { childRowsProp = 'rows'; }
	        if (iconProp === void 0) { iconProp = 'iconIndex'; }
	        var opts = new DataOutputOptions_1.DataOutputOptions(options);
	        var objs;
	        try {
	            var r = (row === undefined || row === null) ? this._dp.rootRow : this._dp.rowById(row);
	            objs = r ? r.getChildOutputObjects(opts, recursive, childRowsProp, iconProp) : null;
	        }
	        finally {
	            opts.dispose();
	        }
	        return objs;
	    };
	    /**
	     * 지정한 트리 행의 자식 행을 추가한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id. 지정하지 않을경우 루트 행을 지정한다.
	     * @param values - 추가할 행의 필드 값 배열 또는 Object.
	     * @param iconIndex - 트리 행에 표시할 아이콘 인덱스. 기본값: -1.
	     * @param hasChildren - 자식의 있는지 표시 여부. 기본값: false. true면 자식이 있는 것으로 표시.
	     * @returns 성공적으로 추가하면 추가된 행의 row id를, 실패하면 -1을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.addChildRow = function (row, values, iconIndex, hasChildren) {
	        if (iconIndex === void 0) { iconIndex = -1; }
	        if (hasChildren === void 0) { hasChildren = false; }
	        var dp = this._dp;
	        var parent = dp.rowById(row) || dp.rootRow;
	        var child = dp.createRow(values, iconIndex, hasChildren);
	        return parent.addChild(child, false) ? child.rowId : -1;
	    };
	    /**
	     * 지정한 트리 행의 자식행들 중 원하는 위치에 자식행을 추가한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id. 지정하지 않을경우 루트 행을 지정한다.
	     * @param index - 지정한 부모 행의 자식들 중 삽입하려는 행이 들어갈 위치.
	     * @param values - 필드값의 배열이나 필드들을 속성으로 하는 json 객체.
	     * @param iconIndex - 트리 행에 표시할 아이콘 인덱스. 기본값: -1.
	     * @param hasChildren - 자식의 있는지 표시 여부. 기본값: false. true면 자식이 있는 것으로 표시.
	     * @returns 성공적으로 추가하면 추가된 행의 row id를, 실패하면 -1을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.insertChildRow = function (row, index, values, iconIndex, hasChildren) {
	        if (iconIndex === void 0) { iconIndex = -1; }
	        if (hasChildren === void 0) { hasChildren = false; }
	        var dp = this._dp;
	        var parent = dp.rowById(row) || dp.rootRow;
	        var child = dp.createRow(values, iconIndex, hasChildren);
	        return parent.insertChild(index, child, false) ? child.rowId : -1;
	    };
	    /**
	     * 지정한 데이터행의 필드 값들을 수정한다.
	     *
	     * @param row - 지정한 데이터 행의 트리 id.
	     * @param values - 변경 값. 필드값의 배열이거나, array또는 json객체다.
	     * @returns 지정한 데이터 행이 존재할 경우 성공여부를, 하지 않을 경우 false를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.updateRow = function (row, values) {
	        var r = this._dp.rowById(row);
	        return r ? r.update(values) : false;
	    };
	    /**
	     * 지정한 기존 데이터행의 값을 수정한다.
	     *
	     * @param row - 지정할 데이터 행의 트리 id. undefined거나 명시되지 않은 경우 기존 값을 유지한다.
	     * @param values - 변경 값. 필드값의 배열이거나, array또는 json객체다.
	     * @returns 지정한 데이터 행이 존재할 경우 성공여부를, 하지 않을 경우 false를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.updateStrictRow = function (row, values) {
	        var r = this._dp.rowById(row);
	        return r ? r.updateStrict(values) : false;
	    };
	    /**
	     * 지정한 데이터행을 삭제한다.
	     *
	     * @remarks
	     * 지정한 데이터행이 조상행인 경우 모든 자손행들도 같이 삭제된다.
	     * DataProvider의 softDeleting이 true인 경우 실제로 삭제되지않고 rowState만 변경된다.
	     *
	     * @param row - 삭제할 데이터 행의 트리 id.
	     * @returns - 지정한 행 또는 행의 부모가 존재할 경우 성공여부를, 하지 않을경우 false를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.removeRow = function (row) {
	        var r = this._dp.rowById(row);
	        return r && r.parent ? r.parent.removeChild(r) : false;
	    };
	    /**
	     * 지정한 데이터 행들을 삭제한다.
	     *
	     * @remarks
	     * 지정한 데이터행이 조상행인 경우 모든 자손행들도 같이 삭제된다.
	     * DataProvider의 softDeleting이 true인 경우 실제로 삭제되지않고 rowState만 변경된다.
	     *
	     * @param rows - 삭제할 데이터 행들의 트리 id들. 지정하지 않거나 빈 배열을 입력할 경우, false를 반환한다.
	     * @returns - 삭제의 성공여부를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.removeRows = function (rows) {
	        if (rows && rows.length > 0) {
	            var rs = [];
	            for (var i = rows.length; i--;) {
	                var row = this._dp.rowById(rows[i]);
	                row && rs.push(row);
	            }
	            return this._dp.removeRows(rs);
	        }
	        return false;
	    };
	    /**
	     * DataProvider의 모든 행을 삭제한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.clearRows = function () {
	        this._dp.clearRows();
	    };
	    /**
	     * 지정한 행 또는 행들을 화면에서 감춘다.
	     *
	     * @remarks
	     * 숨겨진 상태에서 remove, insert가 발생하는 경우 dataRow가 변경될 수 있으므로 사용시 주의한다.
	     *
	     * @param dataRows - 숨기고 싶은 행 번호 또는 번호들.
	     *
	     */
	    LocalTreeDataProvider.prototype.hideRows = function (dataRows) {
	        this._dp.hideRows(dataRows);
	    };
	    /**
	     * 화면에서 감춘 행또는 행들을 보여준다.
	     *
	     * @remarks
	     * filterMode, sortMode:"explicit"인 경우 showHiddenRows()를 사용하면 필터나 소트가 재적용된다.
	     * 접힌(collapse) 상태로 표시된다.
	     *
	     * @param dataRows - 보이고 싶은 행 번호 또는 번호들.
	     *
	     */
	    LocalTreeDataProvider.prototype.showHiddenRows = function (dataRows) {
	        this._dp.showRows(dataRows);
	    };
	    /**
	     * 숨겨진 행들의 번호를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getHiddenRows = function () {
	        return this._dp.getHiddenRows();
	    };
	    /**
	     * 지정된 행이 숨겨진 행인지의 여부를 반환한다.
	     *
	     * @param dataRow - 지정한 데이터 행의 번호.
	     *
	     */
	    LocalTreeDataProvider.prototype.isHiddenRow = function (dataRow) {
	        return this._dp.isHiddenRow(dataRow);
	    };
	    /**
	     * 숨겨진 모든 행을 다시 표시한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.resetHiddenRows = function () {
	        this._dp.clearHiddenRows();
	    };
	    /**
	     * 지정한 데이터 셀의 값을 반환한다.
	     *
	     * @param row - 데이터 행의 트리 id.
	     * @param field - 필드명 또는 인덱스.
	     * @returns 해당 데이터 행이 존재하지 않을 경우 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.getValue = function (row, field) {
	        var r = this._dp.rowById(row);
	        var fld = DataDelegateUtils.getFieldIndex(this._dp, field);
	        return r ? r.getValue(fld) : null;
	    };
	    /**
	     * 지정한 데이터 셀의 값을 변경한다.
	     *
	     * @param row - 데이터 행의 트리 id.
	     * @param field - 필드명 또는 인덱스.
	     * @returns 해당 데이터 행이 존재하지 않을 경우 null을 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.setValue = function (row, field, value) {
	        var r = this._dp.rowById(row);
	        var fld = DataDelegateUtils.getFieldIndex(this._dp, field);
	        if (r) {
	            r.setValue(fld, value, false);
	        }
	    };
	    // move
	    /**
	     * 같은 부모의 형제 사이에서 특정 데이터행의 위치를 지정한 단계만큼 이동한다.
	     *
	     * @param row - 데이터 행의 트리 id.
	     * @param offset - 지정 단계 값.
	     * @returns 해당 데이터 행이 존재하지 않을 경우 false를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.moveRowSibling = function (row, offset) {
	        var r = this._dp.rowById(row);
	        return r ? this._dp.moveRowSibling(r, offset) : false;
	    };
	    /**
	     * 특정 데이터행의 위치를 지정한 행의 하위로 이동한다.
	     *
	     * @param row - 데이터 행의 트리 id.
	     * @param parent - 지정한 부모 행의 id. 이 행의 하위로 이동한다.
	     * @param index - 형제들 사이에서의 위치.
	     * @returns 해당 데이터 행 또는 그 부모행이 존재하지 않을 경우 false를 반환한다.
	     *
	     */
	    LocalTreeDataProvider.prototype.changeRowParent = function (row, parent, index) {
	        var r = this._dp.rowById(row);
	        var p = this._dp.rowById(parent);
	        return r && p ? this._dp.changeRowParent(r, p, index) : false;
	    };
	    /**
	     * 검색 설정 방식에 따라 특정 값이 있는 행을 찾는다.
	     *
	     * @param options - 검색 방식
	     * @returns 찾은 행의 인덱스
	     */
	    LocalTreeDataProvider.prototype.searchDataRow = function (options) {
	        if (options) {
	            var fields = options.fields;
	            var values = options.values;
	            var startrow = options.startIndex !== undefined ? options.startIndex : 0;
	            var wrap = options.wrap !== undefined ? options.wrap : true;
	            var parentId = options.parentId;
	            return this._dp.searchDataRow(fields, values, options, startrow, wrap, parentId);
	        }
	        return -1;
	    };
	    /**
	     * 검색 설정 방식에 따라 특정 값이 있는 셀을 찾는다.
	     *
	     * @param options - 검색 방식
	     * @returns 찾은 셀의 정보
	     */
	    LocalTreeDataProvider.prototype.searchData = function (options) {
	        if (options) {
	            var fields = options.fields;
	            var value = options.value;
	            var startrow = options.startIndex !== undefined ? options.startIndex : 0;
	            var startFieldIndex = options.startFieldIndex !== undefined ? options.startFieldIndex : 0;
	            var wrap = options.wrap !== undefined ? options.wrap : true;
	            var parentId = options.parentId;
	            return this._dp.searchData(fields, value, options, startrow, startFieldIndex, wrap, parentId);
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    /**
	     * @internal
	     */
	    LocalTreeDataProvider.prototype._createProvider = function (undoable) {
	        return new LocalTreeDataProvider_1.LocalTreeDataProvider(undoable);
	    };
	    /**
	     * @internal
	     */
	    LocalTreeDataProvider.prototype._createListener = function (provider) {
	        return new TreeProviderListener(this, provider);
	    };
	    return LocalTreeDataProvider;
	}(DataProviderBase));
	exports.LocalTreeDataProvider = LocalTreeDataProvider;
	var GridProviderListener = /** @class */ (function (_super) {
	    __extends(GridProviderListener, _super);
	    function GridProviderListener(_del, _provider) {
	        var _this = _super.call(this) || this;
	        _this._del = _del;
	        _this._provider = _provider;
	        _this._provider.addListener(_this);
	        return _this;
	    }
	    GridProviderListener.prototype.dispose = function () {
	        this._del = null;
	        this._provider.removeListener(this);
	        this._provider = null;
	    };
	    GridProviderListener.prototype.onDataProviderRowCountChanged = function (provider) {
	        this._del.onRowCountChanged ? this._del.onRowCountChanged(this._del, provider.rowCount) : this.log('onRowCountChanged: ' + provider.rowCount);
	    };
	    GridProviderListener.prototype.onDataProviderRowUpdating = function (provider, row, values) {
	        if (this._del.onRowUpdating) {
	            return this._del.onRowUpdating(this._del, row);
	        }
	        else {
	            this.log('onRowUpdating: ' + row);
	            return true;
	        }
	    };
	    GridProviderListener.prototype.onDataProviderRowUpdated = function (provider, row) {
	        this._del.onRowUpdated ? this._del.onRowUpdated(this._del, row) : this.log('onRowUpdated: ' + row);
	    };
	    GridProviderListener.prototype.onDataProviderRowsUpdated = function (provider, row, count) {
	        this._del.onRowsUpdated ? this._del.onRowsUpdated(this._del, row, count) : this.log('onRowsUpdated: ' + row + ', ' + count);
	    };
	    GridProviderListener.prototype.onDataProviderRowInserting = function (provider, row, values) {
	        if (this._del.onRowInserting) {
	            return this._del.onRowInserting(this._del, row, values);
	        }
	        else {
	            this.log('onRowInserting: ' + row);
	            return true;
	        }
	    };
	    GridProviderListener.prototype.onDataProviderRowInserted = function (provider, row) {
	        this._del.onRowInserted ? this._del.onRowInserted(this._del, row) : this.log('onRowInserted: ' + row);
	    };
	    GridProviderListener.prototype.onDataProviderRowsInserted = function (provider, row, count) {
	        this._del.onRowsInserted ? this._del.onRowsInserted(this._del, row, count) : this.log('onRowsInserted: ' + row + ', ' + count);
	    };
	    GridProviderListener.prototype.onDataProviderRowRemoving = function (provider, row) {
	        if (this._del.onRowDeleting) {
	            return this._del.onRowDeleting(this._del, row);
	        }
	        else {
	            this.log('onRowDeleting: ' + row);
	            return true;
	        }
	    };
	    GridProviderListener.prototype.onDataProviderRowRemoved = function (provider, row) {
	        this._del.onRowDeleted ? this._del.onRowDeleted(this._del, row) : this.log('onRowDeleted: ' + row);
	    };
	    GridProviderListener.prototype.onDataProviderRowsRemoving = function (provider, rows) {
	        return true;
	    };
	    GridProviderListener.prototype.onDataProviderRowsRemoved = function (provider, rows) {
	        this._del.onRowsDeleted ? this._del.onRowsDeleted(this._del, rows) : this.log('onRowsDeleted: ', rows);
	    };
	    GridProviderListener.prototype.onDataProviderRowMoving = function (provider, row, newRow) {
	        if (this._del.onRowMoving) {
	            return this._del.onRowMoving(this._del, row, newRow);
	        }
	        else {
	            this.log('onRowMoving: ' + row + ', ' + newRow);
	            return true;
	        }
	    };
	    GridProviderListener.prototype.onDataProviderRowMoved = function (provider, row, newRow) {
	        this._del.onRowMoved ? this._del.onRowMoved(this._del, row, newRow) : this.log('onRowMoved: ' + row + ', ' + newRow);
	    };
	    GridProviderListener.prototype.onDataProviderRowsMoving = function (provider, row, count, newRow) {
	        if (this._del.onRowsMoving) {
	            return this._del.onRowsMoving(this._del, row, count, newRow);
	        }
	        else {
	            this.log('onRowsMoving: ' + row + ', ' + count + ', ' + newRow);
	            return true;
	        }
	    };
	    GridProviderListener.prototype.onDataProviderRowsMoved = function (provider, row, count, newRow) {
	        this._del.onRowsMoved ? this._del.onRowsMoved(this._del, row, count, newRow) : this.log('onRowsMoved: ' + row + ', ' + count + ', ' + newRow);
	    };
	    GridProviderListener.prototype.onDataProviderValueChanged = function (provider, row, field) {
	        this._del.onValueChanged ? this._del.onValueChanged(this._del, row, field) : this.log('onValueChanged:' + row + ', ' + field);
	    };
	    GridProviderListener.prototype.onDataProviderDataChanged = function (provider) {
	        this._del.onDataChanged ? this._del.onDataChanged(this._del) : this.log('onDataChanged');
	    };
	    GridProviderListener.prototype.onDataProviderStateChanged = function (provider, row) {
	        this._del.onRowStateChanged ? this._del.onRowStateChanged(this._del, row) : this.log('onRowStateChanged: ' + row);
	    };
	    GridProviderListener.prototype.onDataProviderStatesChanged = function (provider, rows) {
	        this._del.onRowStatesChanged ? this._del.onRowStatesChanged(this._del, rows) : this.log('onRowStatesChanged', rows);
	    };
	    GridProviderListener.prototype.onDataProviderStatesCleared = function (provider) {
	        this._del.onRowStatesCleared ? this._del.onRowStatesCleared(this._del) : this.log('onRowStatesCleared');
	    };
	    GridProviderListener.prototype.onDataProviderRestoreRows = function (provider, rows) {
	        this._del.onRestoreRows ? this._del.onRestoreRows(this._del, rows) : this.log('onRestoreRows', rows);
	    };
	    return GridProviderListener;
	}(EventListenerBase));
	var TreeProviderListener = /** @class */ (function (_super) {
	    __extends(TreeProviderListener, _super);
	    function TreeProviderListener(_del, _provider) {
	        var _this = _super.call(this) || this;
	        _this._del = _del;
	        _this._provider = _provider;
	        _this._provider.addListener(_this);
	        return _this;
	    }
	    TreeProviderListener.prototype.dispose = function () {
	        this._del = null;
	        this._provider.removeListener(this);
	        this._provider = null;
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowCountChanged = function (provider) {
	        this._del.onRowCountChanged ? this._del.onRowCountChanged(this._del, provider.rowCount) : this.log('onRowCountChanged: ' + provider.rowCount);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowAdding = function (provider, row, index, child) {
	        if (this._del.onRowAdding) {
	            return this._del.onRowAdding(this._del, row.rowId, index, child._values);
	        }
	        {
	            this.log('onRowAdding: ' + row.rowId + ', ' + index, child._values);
	            return true;
	        }
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowAdded = function (provider, row) {
	        this._del.onRowAdded ? this._del.onRowAdded(this._del, row.rowId) : this.log('onRowAdded: ' + row.rowId);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowsAdded = function (provider, parent, rows) {
	        var rowIds = DataDelegateUtils.extractTreeRows(rows);
	        this._del.onRowsAdded ? this._del.onRowsAdded(this._del, parent.rowId, rowIds) : this.log('onRowsAdded: ' + parent.rowId, rowIds);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowRemoving = function (provider, row) {
	        if (this._del.onRowDeleting) {
	            return this._del.onRowDeleting(this._del, row.rowId);
	        }
	        else {
	            this.log('onRowDeleting: ' + row.rowId);
	            return true;
	        }
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowRemoved = function (provider, row) {
	        this._del.onRowDeleted ? this._del.onRowDeleted(this._del, row.rowId) : this.log('onRowDeleted: ' + row.rowId);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowsRemoved = function (provider, rows) {
	        var rowIds = DataDelegateUtils.extractTreeRows(rows);
	        this._del.onRowsDeleted ? this._del.onRowsDeleted(this._del, rowIds) : this.log('onRowsDeleted: ', rowIds);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowUpdating = function (provider, row) {
	        if (this._del.onRowUpdating) {
	            return this._del.onRowUpdating(this._del, row.rowId);
	        }
	        else {
	            this.log('onRowUpdating:' + row.rowId);
	            return true;
	        }
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowUpdated = function (provider, row) {
	        this._del.onRowUpdated ? this._del.onRowUpdated(this._del, row.rowId) : this.log('onRowUpdated: ' + row.rowId);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderValueChanged = function (provider, row, field) {
	        this._del.onValueChanged ? this._del.onValueChanged(this._del, row.rowId, field) : this.log('onValueChanged: ' + row.rowId + ', ' + field);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowStateChanged = function (provider, row) {
	        this._del.onRowStateChanged ? this._del.onRowStateChanged(this._del, row.rowId) : this.log('onRowStateChanged: ' + row.rowId);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowStatesChanged = function (provider, rows) {
	        var rowIds = DataDelegateUtils.extractTreeRows(rows);
	        this._del.onRowStatesChanged ? this._del.onRowStatesChanged(this._del, rowIds) : this.log('onRowStatesChanged: ', rowIds);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowSiblingMoving = function (provider, row, offset) {
	        if (this._del.onRowSiblingMoving) {
	            return this._del.onRowSiblingMoving(this._del, row.rowId, offset);
	        }
	        else {
	            this.log('onRowSiblingMoveing: ' + row.rowId + ', ' + offset);
	            return true;
	        }
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowSiblingMoved = function (provider, row, offset) {
	        this._del.onRowSiblingMoved ? this._del.onRowSiblingMoved(this._del, row.rowId, offset) : this.log('onSiblingMoved: ' + row.rowId + ', ' + offset);
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowParentChanging = function (provider, row, parent, index) {
	        if (this._del.onRowParentChanging) {
	            return this._del.onRowParentChanging(this._del, row.rowId, parent.rowId, index);
	        }
	        else {
	            this.log('onRowParentChanging: ' + row.rowId + ', ' + parent.rowId + ', ' + index);
	        }
	    };
	    TreeProviderListener.prototype.onTreeDataProviderRowParentChanged = function (provider, row, parent, index) {
	        this._del.onRowParentChanged ? this._del.onRowParentChanged(this._del, row.rowId, parent.rowId, index) : this.log('onRowParentChanged: ' + row.rowId + ', ' + parent.rowId + ', ' + index);
	    };
	    return TreeProviderListener;
	}(EventListenerBase));
	});

	unwrapExports(DataDelegates);
	var DataDelegates_1 = DataDelegates.DataDelegateUtils;
	var DataDelegates_2 = DataDelegates.EventListenerBase;
	var DataDelegates_3 = DataDelegates.DataProviderBase;
	var DataDelegates_4 = DataDelegates.LocalDataProvider;
	var DataDelegates_5 = DataDelegates.LocalTreeDataProvider;

	var ImageList_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ImageList.ts
	// 2019. 09. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var ImageList = /** @class */ (function (_super) {
	    __extends(ImageList, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function ImageList(name, rootUrl) {
	        var _this = _super.call(this) || this;
	        _this._urls = [];
	        _this._name = name;
	        _this._rootUrl = rootUrl;
	        return _this;
	    }
	    ImageList.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ImageList.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ImageList.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._urls.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ImageList.prototype.addUrl = function (url) {
	        if (url && this._urls.indexOf(url) < 0) {
	            this._urls.push(url);
	        }
	    };
	    ImageList.prototype.addUrls = function () {
	        var urls = [];
	        for (var _i = 0; _i < arguments.length; _i++) {
	            urls[_i] = arguments[_i];
	        }
	        if (urls) {
	            for (var i = 0; i < urls.length; i++) {
	                this.addUrl(urls[i]);
	            }
	        }
	    };
	    ImageList.prototype.getImage = function (index) {
	        if (index >= 0 && index < this._urls.length) {
	            return this._rootUrl + this._urls[index];
	        }
	        return null;
	    };
	    return ImageList;
	}(Base_1.Base));
	exports.ImageList = ImageList;
	});

	unwrapExports(ImageList_1);
	var ImageList_2 = ImageList_1.ImageList;

	var CustomRenderer = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TemplateCellRenderer.ts
	// 2019. 01. 21. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var CustomCellRenderer = /** @class */ (function (_super) {
	    __extends(CustomCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CustomCellRenderer(type) {
	        var _this = _super.call(this) || this;
	        _this._type = type;
	        return _this;
	    }
	    CustomCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CustomCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        // getRendererType(): string {
	        //     return null;
	        // };
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._type;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return CustomCellRenderer;
	}(CellRenderers.DataCellRenderer));
	exports.CustomCellRenderer = CustomCellRenderer;
	var CustomCellRendererImpl = /** @class */ (function (_super) {
	    __extends(CustomCellRendererImpl, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CustomCellRendererImpl(impl, type) {
	        var _this = _super.call(this) || this;
	        _this._impl = (impl && typeof impl.render) ? impl : null;
	        _this._impl && (_this._impl.type = type);
	        return _this;
	    }
	    CustomCellRendererImpl.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CustomCellRendererImpl.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._impl && this._impl.type;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CustomCellRendererImpl.prototype._doInitContent = function (dom) {
	        this._impl && this._impl.initContent && this._impl.initContent.call(this, dom);
	    };
	    CustomCellRendererImpl.prototype._doClearContent = function (dom) {
	        this._impl && this._impl.clearContent && this._impl.clearContent.call(this, dom);
	    };
	    CustomCellRendererImpl.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        if (this._impl) {
	            this._impl.render.call(this, grid.getHandler(), model, w, h);
	        }
	    };
	    CustomCellRendererImpl.prototype._doClick = function (event) {
	        return this._impl && this._impl.click && this._impl.click.call(this, event);
	    };
	    return CustomCellRendererImpl;
	}(CellRenderers.DataCellRenderer));
	exports.CustomCellRendererImpl = CustomCellRendererImpl;
	});

	unwrapExports(CustomRenderer);
	var CustomRenderer_1 = CustomRenderer.CustomCellRenderer;
	var CustomRenderer_2 = CustomRenderer.CustomCellRendererImpl;

	var TreeItemSorter = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeItemsSorter.ts
	// 2019. 09. 20. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var TreeItemsSorter = /** @class */ (function (_super) {
	    __extends(TreeItemsSorter, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemsSorter() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        _this.$_userComparer = function (field, leftItem, rightItem) {
	            if (this._comparer) {
	                return this._comparer(field, leftItem["_rowId"], rightItem["rowId"]);
	            }
	        };
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeItemsSorter.prototype.run = function (parent, field, dir, ignoreCase, left, right, checkRow) {
	        this._rs = parent.provider;
	        var ds = this._ds = this._rs.dataSource;
	        this._parent = parent;
	        this._field = field;
	        var fld = this._ds.getField(field);
	        //this._comparer = fld._comparer ? fld._comparer : _dataSource._comparers[field] ? _dataSource._comparers[field] : _items._labelComparer[field];
	        this._comparer = this._ds["_comparers"][field] || this._rs["_labelComparer"][field];
	        if (this._comparer) {
	            this._comparer = this.$_userComparer;
	        }
	        else {
	            switch (fld.dataType) {
	                case Types.ValueType.NUMBER:
	                    this._comparer = ds["compareNumbers"];
	                    break;
	                case Types.ValueType.DATETIME:
	                    this._comparer = ds["compareNumbers"];
	                    break;
	                case Types.ValueType.BOOLEAN:
	                    this._comparer = ds["compareBools"];
	                    break;
	                case Types.ValueType.OBJECT:
	                    this._comparer = ds["compareObjects"];
	                    break;
	                default:
	                    this._comparer = ignoreCase ? ds["compareTexts"] : ds["compareValues"];
	                    break;
	            }
	        }
	        this.$_sort(left, right, dir, checkRow);
	    };
	    TreeItemsSorter.prototype.$_sort = function (left, right, dir, checkRow) {
	        do {
	            var p = this._parent;
	            var field = this._field;
	            var i = left;
	            var j = right;
	            var m = Math.floor((left + right) / 2);
	            var mi = p.getItem(m).dataRow;
	            var mr = p.getItem(m).row;
	            do {
	                if (dir == Types.SortDirection.ASCENDING) {
	                    while (i <= j) {
	                        var v = this._comparer(this._field, mr, p.getItem(i).row);
	                        if (v == 0 && checkRow) {
	                            v = mi - p.getItem(i).dataRow;
	                        }
	                        if (v <= 0) {
	                            break;
	                        }
	                        i++;
	                    }
	                    while (i <= j) {
	                        var v = this._comparer(field, mr, p.getItem(j).row);
	                        if (v == 0 && checkRow) {
	                            v = mi - p.getItem(j).dataRow;
	                        }
	                        if (v >= 0) {
	                            break;
	                        }
	                        j--;
	                    }
	                }
	                else {
	                    while (i <= j) {
	                        var v = this._comparer(field, mr, p.getItem(i).row);
	                        if (v == 0 && checkRow) {
	                            v = mi - p.getItem(i).dataRow;
	                        }
	                        if (v >= 0) {
	                            break;
	                        }
	                        i++;
	                    }
	                    while (i <= j) {
	                        var v = this._comparer(field, mr, p.getItem(j).row);
	                        if (v == 0 && checkRow) {
	                            v = mi - p.getItem(j).dataRow;
	                        }
	                        if (v <= 0) {
	                            break;
	                        }
	                        j--;
	                    }
	                }
	                if (i <= j) {
	                    if (i != j) {
	                        p["_exchangeItems"](i, j);
	                    }
	                    i++;
	                    j--;
	                }
	            } while (i <= j);
	            if (left < j) {
	                this.$_sort(left, j, dir, checkRow);
	            }
	            left = i;
	        } while (left < right);
	    };
	    return TreeItemsSorter;
	}(Base_1.Base));
	exports.TreeItemsSorter = TreeItemsSorter;
	});

	unwrapExports(TreeItemSorter);
	var TreeItemSorter_1 = TreeItemSorter.TreeItemsSorter;

	var CellStyle = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CellStyle.ts
	// 2019. 07. 05. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var CellStyleMap = /** @class */ (function (_super) {
	    __extends(CellStyleMap, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellStyleMap(provider) {
	        var _this = _super.call(this) || this;
	        _this._styleMap = [];
	        _this._owner = provider;
	        return _this;
	    }
	    CellStyleMap.prototype._doDispose = function () {
	        this._styleMap = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellStyleMap.prototype, "isEmpty", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._styleMap.length == 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellStyleMap.prototype.setCellStyle = function (row, field, style) {
	        if (field < 0) {
	            this._styleMap[row] = style;
	        }
	        else {
	            var oldStyle = this._styleMap[row];
	            if (oldStyle) {
	                if (oldStyle instanceof Array) {
	                    oldStyle[field] = style;
	                }
	                else {
	                    var cnt = this._owner.dataSource.fieldCount;
	                    var styles_1 = [];
	                    for (var i = 0; i < cnt; i++) {
	                        styles_1[i] = oldStyle;
	                    }
	                    this._styleMap[row] = styles_1;
	                }
	            }
	            var styles = this._styleMap[row];
	            if (!styles) {
	                styles = [];
	            }
	            styles[field] = style;
	            this._styleMap[row] = styles;
	        }
	    };
	    CellStyleMap.prototype.setCellStyles = function (provider, rows, fieldMap) {
	        function setArray(self, ds, rows, fields) {
	            var cnt = rows.length;
	            var flds = Math.min(fields.length, ds.fieldCount);
	            for (var r = 0; r < cnt; r++) {
	                var vals = rows[r];
	                if (vals instanceof Array) {
	                    for (var f = 0; f < flds; f++) {
	                        var fld = fields[f];
	                        if (fld >= 0) {
	                            var style = null; //provider.getStyle(vals[fld]);
	                            if (style) {
	                                self.setCellStyle(r, f, style);
	                            }
	                        }
	                    }
	                }
	            }
	        }
	        function setObjects(self, rows, fields) {
	            for (var r = 0, cnt = rows.length; r < cnt; r++) {
	                var row = rows[r];
	                if (row) {
	                    for (var f in fields) {
	                        var fld = fields[f];
	                        var style = null; // provider.getStyle(row[f]);
	                        if (style) {
	                            self.setCellStyle(r, fld, style);
	                        }
	                    }
	                }
	            }
	        }
	        if (!rows || rows.length < 1 || !fieldMap) {
	            return;
	        }
	        var ds = this._owner.dataSource;
	        var fldCount = ds.fieldCount;
	        var fields = fieldMap;
	        if (fields instanceof Array) {
	            fields = fields.concat();
	            var cnt = Math.min(fldCount, fields.length);
	            for (var i = 0; i < cnt; i++) {
	                var fld = Math.floor(fields[i]);
	                if (isNaN(fld) || fld < 0) {
	                    fields[i] = -1;
	                }
	                else {
	                    fields[i] = fld;
	                }
	            }
	            setArray(this, ds, rows, fields);
	        }
	        else {
	            var fields_1 = [];
	            for (var f in fieldMap) {
	                var v = fieldMap[f];
	                var fld = !isNaN(v) ? Math.floor(v) : ds.getFieldIndex(v);
	                if (fld >= 0 && fld < fldCount) {
	                    fields_1[f] = fld;
	                }
	            }
	            setObjects(this, rows, fields_1);
	        }
	    };
	    CellStyleMap.prototype.removeCellStyle = function (style) {
	        for (var r = 0, cnt = this._styleMap.length; r < cnt; r++) {
	            var styles = this._styleMap[r];
	            if (styles instanceof Array) {
	                for (var i = styles.length - 1; i >= 0; i--) {
	                    if (styles[i] === style) {
	                        styles[i] = null;
	                    }
	                }
	            }
	            else {
	                if (this._styleMap[r] === style) {
	                    delete this._styleMap[r];
	                }
	            }
	        }
	    };
	    CellStyleMap.prototype.clearCellStyles = function () {
	        this._styleMap = [];
	    };
	    CellStyleMap.prototype.checkCellStyle = function (dataRow, field) {
	        var style = this._styleMap[dataRow];
	        if (style instanceof Array) {
	            return !!style[field];
	        }
	        else {
	            return !!style;
	        }
	    };
	    CellStyleMap.prototype.getCellStyle = function (dataRow, field) {
	        var style = this._styleMap[dataRow];
	        if (style instanceof Array) {
	            return style[field];
	        }
	        else {
	            return style;
	        }
	    };
	    CellStyleMap.prototype.connect = function (provider) {
	    };
	    CellStyleMap.prototype.disconnect = function () {
	    };
	    CellStyleMap.prototype.clearRows = function () {
	        this._styleMap = [];
	    };
	    CellStyleMap.prototype.setRows = function () {
	        if (this._owner.dataSource) {
	            this._styleMap.length = Math.min(this._styleMap.length, this._owner.dataSource.rowCount);
	        }
	    };
	    CellStyleMap.prototype.setRowCount = function (newCount) {
	        this._styleMap.length = newCount;
	    };
	    CellStyleMap.prototype.insertRow = function (row) {
	        this._styleMap.splice(row, 0, null);
	    };
	    CellStyleMap.prototype.insertRows = function (row, count) {
	        for (var i = 0; i < count; i++) {
	            this._styleMap.splice(row, 0, null);
	        }
	    };
	    CellStyleMap.prototype.removeRow = function (row) {
	        this._styleMap.splice(row, 1);
	    };
	    CellStyleMap.prototype.removeRows = function (rows) {
	        for (var i = rows.length - 1; i >= 0; i--) {
	            this._styleMap.splice(rows[i], 1);
	        }
	    };
	    CellStyleMap.prototype.updateRow = function () {
	    };
	    CellStyleMap.prototype.updateRows = function (row, count) {
	    };
	    CellStyleMap.prototype.setValue = function (row, field) {
	    };
	    CellStyleMap.prototype.moveRow = function (row, newRow) {
	        var styles = this._styleMap.splice(row, 1);
	        this._styleMap.splice(newRow, 0, styles[0]);
	    };
	    CellStyleMap.prototype.moveRows = function (row, count, newRow) {
	        var styles = this._styleMap.splice(row, count);
	        for (var i = 0; i < count; i++) {
	            this._styleMap.splice(newRow + i, 0, styles[i]);
	        }
	    };
	    return CellStyleMap;
	}(DataTag_1.DataTag));
	exports.CellStyleMap = CellStyleMap;
	var CellEditableMap = /** @class */ (function (_super) {
	    __extends(CellEditableMap, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellEditableMap(provider) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._editableMap = [];
	        return _this;
	    }
	    CellEditableMap.prototype._doDispose = function () {
	        this._editableMap = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellEditableMap.prototype, "isEmpty", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._editableMap.length == 0 && !this._editableMap[-1];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellEditableMap.prototype.setReadOnly = function (row, column, value) {
	        var map = this._editableMap[row] = this._editableMap[row] || [];
	        map[column] = map[column] || {};
	        map[column]._readOnly = value;
	    };
	    CellEditableMap.prototype.setEditable = function (row, column, value) {
	        var map = this._editableMap[row] = this._editableMap[row] || [];
	        map[column] = map[column] || {};
	        map[column]._editable = value;
	    };
	    CellEditableMap.prototype.getReadOnly = function (row, column) {
	        var map = this._editableMap[row] && this._editableMap[row][column];
	        return map && map._readOnly;
	    };
	    CellEditableMap.prototype.getEditable = function (row, column) {
	        var map = this._editableMap[row] && this._editableMap[row][column];
	        return map && map._editable;
	    };
	    CellEditableMap.prototype.setCursor = function (row, column, value) {
	        var map = this._editableMap[row] = this._editableMap[row] || [];
	        map[column] = map[column] || {};
	        map[column]._cursor = value;
	    };
	    CellEditableMap.prototype.getCursor = function (row, column) {
	        var map = this._editableMap[row] && this._editableMap[row][column];
	        return map && map._cursor;
	    };
	    CellEditableMap.prototype.setEditor = function (row, column, value) {
	        var map = this._editableMap[row] = this._editableMap[row] || [];
	        map[column] = map[column] || {};
	        map[column]._editor = value;
	    };
	    CellEditableMap.prototype.getEditor = function (row, column, value) {
	        var map = this._editableMap[row] && this._editableMap[row][column];
	        return map && map._editor;
	    };
	    CellEditableMap.prototype.removeEditableMap = function (row, column) {
	        if (row == null) {
	            return;
	        }
	        column = arguments.length < 2 ? -1 : column;
	        if (column < 0) {
	            delete this._editableMap[row];
	        }
	        else {
	            var map = this._editableMap[row];
	            map && (delete map[column]);
	        }
	    };
	    CellEditableMap.prototype.clearEditableMap = function () {
	        if (this._editableMap.length === 0 && this._editableMap[-1] == null) {
	            return false;
	        }
	        this._editableMap = [];
	        return true;
	    };
	    CellEditableMap.prototype.getWritable = function (row, column) {
	        var readOnly = this.getReadOnly(row, column);
	        var editable = this.getEditable(row, column);
	        return !readOnly && editable;
	    };
	    CellEditableMap.prototype.connect = function (ds) {
	    };
	    CellEditableMap.prototype.disconnect = function () {
	    };
	    // grid render시 초기화 하기 때문에 dataProvider의 변경은 관리하지 않는다.
	    CellEditableMap.prototype.clearRows = function () {
	        //return this.clearEditableMap();
	    };
	    CellEditableMap.prototype.setRows = function () {
	    };
	    CellEditableMap.prototype.setRowCount = function (newCount) {
	    };
	    CellEditableMap.prototype.insertRow = function (row) {
	    };
	    CellEditableMap.prototype.insertRows = function (row, count) {
	    };
	    CellEditableMap.prototype.removeRow = function (row) {
	    };
	    CellEditableMap.prototype.removeRows = function (rows) {
	    };
	    CellEditableMap.prototype.updateRow = function () {
	    };
	    CellEditableMap.prototype.updateRows = function (row, count) {
	    };
	    CellEditableMap.prototype.setValue = function (row, field) {
	    };
	    CellEditableMap.prototype.moveRow = function (row, newRow) {
	    };
	    CellEditableMap.prototype.moveRows = function (row, count, newRow) {
	    };
	    return CellEditableMap;
	}(DataTag_1.DataTag));
	exports.CellEditableMap = CellEditableMap;
	});

	unwrapExports(CellStyle);
	var CellStyle_1 = CellStyle.CellStyleMap;
	var CellStyle_2 = CellStyle.CellEditableMap;

	var DefaultItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DefaultItemProvider.ts
	// 2019. 07. 05. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });










	var CheckableExpressionRuntime = /** @class */ (function (_super) {
	    __extends(CheckableExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckableExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    return CheckableExpressionRuntime;
	}(Runtimes.DataRowExpressionRuntime));
	exports.CheckableExpressionRuntime = CheckableExpressionRuntime;
	var ItemCheckableTag = /** @class */ (function (_super) {
	    __extends(ItemCheckableTag, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ItemCheckableTag(owner, expression) {
	        var _this = _super.call(this) || this;
	        _this._runtime = new CheckableExpressionRuntime();
	        _this._owner = owner;
	        _this._exprNode = Expression.ExpressionParser.Default.parse(expression, ["value", "values"]);
	        _this._runtime = new CheckableExpressionRuntime();
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    ItemCheckableTag.clearCheckables = function (items) {
	        for (var i = items.itemCount; i--;) {
	            items.getItem(i)["_setCheckable"](true);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ItemCheckableTag.prototype.connect = function (ds) {
	        this._runtime.setDataSource(ds);
	    };
	    ItemCheckableTag.prototype.disconnect = function () {
	    };
	    ItemCheckableTag.prototype.clearRows = function () {
	        ItemCheckableTag.clearCheckables(this._owner);
	    };
	    ItemCheckableTag.prototype.setRows = function () {
	        var rows = this._owner["_rows"];
	        for (var i = rows.length; i--;) {
	            var item = rows[i];
	            this.$_setCheckable(item);
	        }
	    };
	    ItemCheckableTag.prototype.insertRow = function (row) {
	        var item = this._owner.getItemOfRow(row);
	        this.$_setCheckable(item);
	    };
	    ItemCheckableTag.prototype.insertRows = function (row, count) {
	        for (var i = 0; i < count; i++) {
	            var item = this._owner.getItemOfRow(row + i);
	            if (item instanceof GridItem_1.GridItem) {
	                this.$_setCheckable(item);
	            }
	        }
	    };
	    ItemCheckableTag.prototype.updateRow = function (row) {
	        var item = this._owner.getItemOfRow(row);
	        this.$_setCheckable(item);
	    };
	    ItemCheckableTag.prototype.updateRows = function (row, count) {
	        for (var i = 0; i < count; i++) {
	            var item = this._owner.getItemOfRow(row + i);
	            if (item instanceof GridItem_1.GridItem) {
	                this.$_setCheckable(item);
	            }
	        }
	    };
	    ItemCheckableTag.prototype.changeStates = function (rows) {
	        if (rows) {
	            for (var i = rows.length; i--;) {
	                var item = this._owner.getItemOfRow(rows[i]);
	                if (item instanceof GridItem_1.GridItem) {
	                    this.$_setCheckable(item);
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ItemCheckableTag.prototype.$_setCheckable = function (item) {
	        this._runtime.setItem(item);
	        item["_setCheckable"](this._exprNode.evaluate(this._runtime));
	    };
	    return ItemCheckableTag;
	}(DataTag_1.DataTag));
	var DefaultItemProvider = /** @class */ (function (_super) {
	    __extends(DefaultItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DefaultItemProvider(indexing) {
	        var _this = _super.call(this, indexing) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._sortMode = Types.SortMode.AUTO;
	        _this._filterMode = Types.FilterMode.AUTO;
	        _this._filterOr = false;
	        _this._checkableExpression = null;
	        _this._rows = [];
	        _this._filteredItems = [];
	        _this._pageItems = [];
	        _this._sortedItems = [];
	        _this._pubItems = _this._rows;
	        _this._items = _this._rows;
	        _this._distinctRows = [];
	        _this._cellStyles = new CellStyle.CellStyleMap(_this);
	        _this._editableMap = new CellStyle.CellEditableMap(_this);
	        _this._rowCount = 0;
	        _this._fixedCount = 0;
	        _this._fixedSorting = false;
	        _this._maxItemCount = 0;
	        _this._itemCount = 0;
	        _this._pubCount = 0;
	        _this._filtered = false;
	        _this._filtering = false;
	        _this._filters = [];
	        _this._filterRuntime = new ColumnFilter_1.ColumnFilterRuntime();
	        _this._filterLock = 0;
	        _this._fixedFiltering = false;
	        _this._sorted = false;
	        _this._sortFields = [];
	        _this._sortDirections = [];
	        _this._sortCases = [];
	        _this._labelComparer = {};
	        _this._sorter = null;
	        _this._defSorter = null;
	        _this._paging = false;
	        _this._pagingSource = Types.PagingSource.ROWS;
	        _this._pageSize = 10;
	        _this._pageCount = -1;
	        _this._pageStartIndex = -1;
	        _this._currPage = 0;
	        _this._pageStart = 0;
	        _this._summaryMode = Types.SummaryMode.AGGREGATE;
	        _this._summaryMap = null;
	        _this._checkableTag = null;
	        return _this;
	    }
	    DefaultItemProvider.prototype._doDispose = function () {
	        function disposeRows(rows) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                rows[i] && rows[i].dispose();
	            }
	            rows.length = 0;
	        }
	        this.dataSource = null;
	        disposeRows(this._rows);
	        disposeRows(this._filteredItems);
	        disposeRows(this._pageItems);
	        disposeRows(this._sortedItems);
	        disposeRows(this._pubItems);
	        disposeRows(this._items);
	        disposeRows(this._distinctRows);
	        this._cellStyles && this._cellStyles.dispose();
	        this._cellStyles = null;
	        this._editableMap && this._editableMap.dispose();
	        this._editableMap = null;
	        // this._filters: ColumnFilterRun[][] = [];
	        this._filterRuntime && this._filterRuntime.dispose();
	        this._filterRuntime = null;
	        this._sortFields.length = 0;
	        this._labelComparer = {};
	        this._summaryMap = null;
	        this._checkableTag = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // DataCommandListener
	    //-------------------------------------------------------------------------
	    DefaultItemProvider.prototype.getCommandStates = function (row) {
	        var item = this._rows[row];
	        return item["_extents"];
	    };
	    DefaultItemProvider.prototype.setCommandStates = function (row, states) {
	        var item = this._rows[row];
	        item["_extents"] = states;
	    };
	    Object.defineProperty(DefaultItemProvider.prototype, "isFilterOr", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** filterOr */
	        get: function () {
	            return this._filterOr;
	        },
	        set: function (value) {
	            if (value != this._filterOr) {
	                this._filterOr = value;
	                this.$_buildItems();
	                this._fireRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "isFiltered", {
	        /** filtered */
	        get: function () {
	            return this._filtered;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "isSorted", {
	        /** sorted */
	        get: function () {
	            return this._sorted;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "isPaging", {
	        /** paging */
	        get: function () {
	            return this._paging;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "pageStartIndex", {
	        /** pageStartIndex */
	        get: function () {
	            return this._pageStart;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "sorter", {
	        /** sorter */
	        get: function () {
	            return this._sorter || this._defSorter;
	        },
	        set: function (value) {
	            this._sorter = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "summaryMode", {
	        /** summaryMode */
	        set: function (value) {
	            if (value != this._summaryMode) {
	                this._summaryMode = value;
	                this.$_resetSummary();
	                this.$_buildItems();
	                this._fireRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "sortMode", {
	        /** sortMode */
	        get: function () {
	            return this._sortMode;
	        },
	        set: function (value) {
	            this._sortMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "filterMode", {
	        /** filterMode */
	        get: function () {
	            return this._filterMode;
	        },
	        set: function (value) {
	            this._filterMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "checkableExpression", {
	        /** checkableExpression */
	        get: function () {
	            return this._checkableExpression;
	        },
	        set: function (value) {
	            if (value != this._checkableExpression) {
	                this._checkableExpression = value;
	                if (this._checkableTag) {
	                    this._checkableTag.disconnect();
	                    this._checkableTag = null;
	                }
	                if (value) {
	                    this._checkableTag = new ItemCheckableTag(this, value);
	                    if (this._dataSource) {
	                        this._checkableTag.connect(this._dataSource);
	                    }
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "labelComparer", {
	        /** labelComparer */
	        get: function () {
	            return this._labelComparer;
	        },
	        set: function (value) {
	            this._labelComparer = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DefaultItemProvider.prototype.getFieldDomain = function (field) {
	        var rows = this._rows;
	        var cnt = rows.length;
	        var values = [];
	        var prev = undefined;
	        for (var i = 0; i < cnt; i++) {
	            var curr = this._dataSource.getValue(i, field);
	            if (curr != prev && values.indexOf(curr) < 0) {
	                values.push(curr);
	            }
	            prev = curr;
	        }
	        return values;
	    };
	    DefaultItemProvider.prototype.beginFilter = function () {
	        this._filterLock++;
	    };
	    DefaultItemProvider.prototype.endFilter = function (apply, filterCollection, filter) {
	        if (apply === void 0) { apply = true; }
	        if (filterCollection === void 0) { filterCollection = null; }
	        if (filter === void 0) { filter = null; }
	        if (this._filterLock > 0) {
	            this._filterLock = Math.max(0, this._filterLock - 1);
	            if (this._filterLock == 0 && apply) {
	                this.applyFilters(true, filterCollection, filter);
	            }
	        }
	    };
	    DefaultItemProvider.prototype.hasFilter = function (field) {
	        var filters = this._filters[field];
	        return filters && filters.length > 0;
	    };
	    DefaultItemProvider.prototype.addFilter = function (field, refFilter) {
	        var criteria = refFilter && refFilter.criteria;
	        if (field >= 0) {
	            this._fireFilterAdded(field, criteria);
	            var filters = this._filters[field];
	            if (!filters) {
	                filters = [];
	                this._filters[field] = filters;
	            }
	            var filter = new ColumnFilter_1.ColumnFilterRun(refFilter);
	            filters.push(filter);
	            this.applyFilters();
	            return filter;
	        }
	    };
	    DefaultItemProvider.prototype.removeFilter = function (field, filter) {
	        if (this._filtered && this._filters[field]) {
	            this._fireFilterRemoved(field, filter);
	            var filters = this._filters[field];
	            var i = filters.indexOf(filter);
	            if (i >= 0) {
	                filters.splice(i, 1);
	                this.applyFilters();
	            }
	        }
	    };
	    DefaultItemProvider.prototype.clearFilters = function (field) {
	        if (this._filtered && this._filters[field]) {
	            this._fireFilterCleared(field);
	            var filters = this._filters[field];
	            if (filters.length > 0) {
	                filters.length = 0;
	                delete this._filters[field];
	                this.applyFilters();
	            }
	        }
	    };
	    DefaultItemProvider.prototype.clearAllFilters = function () {
	        if (this._filtered) {
	            this._fireFilterAllCleared();
	            this._filters = [];
	            this.applyFilters();
	        }
	    };
	    DefaultItemProvider.prototype.hasFilters = function () {
	        var cnt = this._filters.length;
	        for (var i = 0; i < cnt; i++) {
	            var filters = this._filters[i];
	            if (filters && filters.length > 0) {
	                return true;
	            }
	        }
	        return false;
	    };
	    DefaultItemProvider.prototype.applyFilters = function (fireEvent, filterCollection, filter) {
	        if (fireEvent === void 0) { fireEvent = true; }
	        if (filterCollection === void 0) { filterCollection = null; }
	        if (filter === void 0) { filter = null; }
	        if (this._filterLock > 0) {
	            return;
	        }
	        this.$_buildItems();
	        try {
	            if (fireEvent) {
	                this._fireRefresh();
	            }
	        }
	        finally {
	            this._fireFiltered(filterCollection, filter);
	        }
	    };
	    DefaultItemProvider.prototype.orderBy = function (fields, directions, cases, fireEvent) {
	        if (fields === void 0) { fields = null; }
	        if (directions === void 0) { directions = null; }
	        if (cases === void 0) { cases = null; }
	        if (fireEvent === void 0) { fireEvent = true; }
	        this._fireSort(fields, directions, cases);
	        this._sortFields = [];
	        this._sortDirections = [];
	        this._sortCases = [];
	        var cnt = fields ? fields.length : 0;
	        var len = directions ? directions.length : 0;
	        var clen = cases ? cases.length : 0;
	        for (var i = 0; i < len; i++) {
	            directions[i] = (directions[i] == Types.SortDirection.ASCENDING || directions[i] == Types.SortDirection.DESCENDING) ? directions[i] : Types.SortDirection.ASCENDING;
	        }
	        for (var i = 0; i < cnt; i++) {
	            this._sortFields.push(fields[i]);
	            if (len > i) {
	                this._sortDirections.push(directions[i]);
	            }
	            else if (len > 0) {
	                this._sortDirections.push(directions[len - 1]);
	            }
	            else {
	                this._sortDirections.push(Types.SortDirection.ASCENDING);
	            }
	            if (clen > i) {
	                this._sortCases.push(cases[i]);
	            }
	            else if (clen > 0) {
	                this._sortCases.push(cases[clen - 1]);
	            }
	            else {
	                this._sortCases.push(Types.SortCase.SENSITIVE);
	            }
	        }
	        this._sorted = this.$_checkSorted();
	        this.$_buildItems();
	        try {
	            if (fireEvent) {
	                this._fireRefresh();
	            }
	        }
	        finally {
	            this._fireSorted();
	        }
	    };
	    DefaultItemProvider.prototype.getSortFields = function () {
	        return this._sortFields.slice();
	    };
	    DefaultItemProvider.prototype.getSortDirections = function () {
	        return this._sortDirections.slice();
	    };
	    DefaultItemProvider.prototype.getSortCases = function () {
	        return this._sortCases.concat();
	    };
	    DefaultItemProvider.prototype.setPaging = function (paging, pageSize, pageCount, source) {
	        if (pageSize === void 0) { pageSize = 10; }
	        if (pageCount === void 0) { pageCount = -1; }
	        if (source === void 0) { source = null; }
	        pageSize = Math.max(pageSize, 1);
	        pageCount = Math.max(pageCount, -1);
	        if (paging != this._paging || pageSize != this._pageSize || pageCount != this._pageCount || source != this._pagingSource) {
	            this._currPage = 0;
	            this._paging = paging;
	            this._pagingSource = source;
	            this._pageSize = pageSize;
	            this._pageCount = pageCount;
	            this.$_buildItems();
	            this._fireRefresh();
	        }
	    };
	    Object.defineProperty(DefaultItemProvider.prototype, "page", {
	        get: function () {
	            return this._paging ? this._currPage : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DefaultItemProvider.prototype.setPage = function (newPage, startIndex) {
	        if (newPage === void 0) { newPage = 0; }
	        if (startIndex === void 0) { startIndex = -1; }
	        if (this._paging) {
	            newPage = Math.max(0, Math.min(this.pageCount - 1, newPage));
	            startIndex = Math.max(-1, startIndex);
	            if (newPage != this._currPage || startIndex != this._pageStartIndex) {
	                this._currPage = newPage;
	                this._pageStartIndex = startIndex;
	                this.$_buildPage();
	                this._fireRefresh();
	            }
	        }
	    };
	    Object.defineProperty(DefaultItemProvider.prototype, "pageCount", {
	        get: function () {
	            if (this._paging) {
	                if (this._pageCount >= 0) {
	                    return this._pageCount;
	                }
	                else {
	                    return Math.floor((this._dataSource.rowCount + this._pageSize - 1) / this._pageSize);
	                }
	            }
	            else {
	                return 0;
	            }
	        },
	        set: function (value) {
	            if (this._paging) {
	                value = Math.max(-1, value);
	                if (value != this._pageCount) {
	                    this._pageCount = value;
	                    this.$_buildPage();
	                    this._fireRefresh();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DefaultItemProvider.prototype.getCheckedRows = function (allRows) {
	        var cnt = allRows ? this._dataSource.rowCount : this.itemCount;
	        var rows = [];
	        for (var i = 0; i < cnt; i++) {
	            var item = allRows ? this._rows[i] : this._pubItems[i];
	            if (item.checked) {
	                rows.push(item.dataRow);
	            }
	        }
	        return rows;
	    };
	    DefaultItemProvider.prototype.resetCheckables = function () {
	        for (var i = this._rows.length; i--;) {
	            this._rows[i]["_setCheckable"](true);
	        }
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.applyCheckables = function () {
	        if (this._checkableTag) {
	            this._checkableTag.setRows();
	        }
	        else {
	            ItemCheckableTag.clearCheckables(this);
	        }
	        this._fireRefresh();
	    };
	    Object.defineProperty(DefaultItemProvider.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._dataSource;
	        },
	        set: function (value) {
	            if (value !== this._dataSource) {
	                this.$_clearRows();
	                if (this._dataSource && !this["$_disposing"]) {
	                    this._dataSource.removeTag(this._cellStyles);
	                    this._dataSource.removeTag(this._editableMap);
	                    this._checkableTag && this._checkableTag.disconnect();
	                    this._dataSource.removeListener(this);
	                    this._dataSource.unregisterCommandListener(this);
	                }
	                this._dataSource = value;
	                if (this._dataSource) {
	                    this._checkableTag && this._checkableTag.connect(this._dataSource);
	                    this.$_buildRows();
	                    this._dataSource.addListener(this);
	                    this._dataSource.addTag(this._cellStyles);
	                    this._dataSource.addTag(this._editableMap);
	                    this._dataSource.registerCommandListener(this);
	                }
	                if (!this.disposing) {
	                    this.$_resetSummary();
	                    this._fireReset();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "itemCount", {
	        get: function () {
	            return this._pubCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "fixedCount", {
	        get: function () {
	            return this._fixedCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultItemProvider.prototype, "maxItemCount", {
	        get: function () {
	            return this._maxItemCount;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._maxItemCount) {
	                this._maxItemCount = value;
	                this._refreshItems();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DefaultItemProvider.prototype._hideDeletedChanged = function () {
	        this.$_buildItems();
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.getItem = function (index) {
	        if (index < 0 || index >= this._pubCount) {
	            return null;
	        }
	        return this._pubItems[index];
	    };
	    DefaultItemProvider.prototype.getItems = function (index, count) {
	        return this._pubItems.slice(index, index + count);
	    };
	    DefaultItemProvider.prototype.getIndexOfRow = function (dataRow) {
	        if (dataRow >= 0 && dataRow < this._rows.length) {
	            var row = this._rows[dataRow];
	            return row && this._pubItems.indexOf(row) >= 0 ? row.index : -1;
	            // return this._rows[dataRow]._index;
	        }
	        return -1;
	    };
	    DefaultItemProvider.prototype.getItemOfRow = function (dataRow, force) {
	        if (force === void 0) { force = false; }
	        if (dataRow >= 0 && dataRow < this._rows.length) {
	            var item = this._rows[dataRow];
	            return item.index >= 0 || force ? item : null;
	        }
	        return null;
	    };
	    DefaultItemProvider.prototype._refreshItems = function () {
	        var saveExtents = {};
	        this.$_saveExtents(saveExtents);
	        this.$_clearRows();
	        this.$_buildRows(saveExtents);
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.setFixed = function (count, sorting, filtering) {
	        count = Math.max(0, count);
	        if (count != this._fixedCount || sorting != this._fixedSorting || filtering != this._filtering) {
	            this._fixedCount = count;
	            this._fixedSorting = sorting;
	            this._fixedFiltering = filtering;
	            this.$_buildItems();
	            this._fireRefresh();
	        }
	    };
	    DefaultItemProvider.prototype.exchange = function (index1, index2) {
	        if (index1 == index2) {
	            return;
	        }
	        if (!this._sorted && !this._filtered) {
	            if (index1 < 0 || index1 >= this._rows.length) {
	                throw new Error("index1 is out of bounds: " + index1);
	            }
	            if (index2 < 0 || index2 >= this._rows.length) {
	                throw new Error("index2 is out of bounds: " + index1);
	            }
	            var t = this._rows[index1];
	            this._rows[index1] = this._rows[index2];
	            this._rows[index2] = t;
	        }
	    };
	    DefaultItemProvider.prototype.clearDisplayLevels = function () {
	        var rows = this._rows;
	        var cnt = rows.length;
	        for (var i = 0; i < cnt; i++) {
	            rows[i]["_displayLevel"] = -1;
	        }
	    };
	    DefaultItemProvider.prototype.getAllItems = function () {
	        return this._pubItems.slice();
	    };
	    DefaultItemProvider.prototype.hasCellStyle = function () {
	        return !this._cellStyles.isEmpty;
	    };
	    DefaultItemProvider.prototype.setCellStyle = function (row, field, style) {
	        this._cellStyles.setCellStyle(row, field, style);
	    };
	    DefaultItemProvider.prototype.setCellStyles = function (provider, rows, fieldMap) {
	        this._cellStyles.setCellStyles(provider, rows, fieldMap);
	    };
	    DefaultItemProvider.prototype.removeCellStyle = function (style) {
	        this._cellStyles.removeCellStyle(style);
	    };
	    DefaultItemProvider.prototype.clearCellStyles = function () {
	        this._cellStyles.clearCellStyles();
	    };
	    DefaultItemProvider.prototype.checkCellStyle = function (dataRow, field) {
	        return this._cellStyles.checkCellStyle(dataRow, field);
	    };
	    DefaultItemProvider.prototype.getCellStyle = function (dataRow, field) {
	        return this._cellStyles.getCellStyle(dataRow, field);
	    };
	    DefaultItemProvider.prototype.setCellEditable = function (dataRow, column, value) {
	        this._editableMap.setEditable(dataRow, column, value);
	    };
	    DefaultItemProvider.prototype.setCellReadOnly = function (dataRow, column, value) {
	        this._editableMap.setReadOnly(dataRow, column, value);
	    };
	    DefaultItemProvider.prototype.getCellEditable = function (dataRow, column) {
	        return this._editableMap.getEditable(dataRow, column);
	    };
	    DefaultItemProvider.prototype.getCellReadOnly = function (dataRow, column) {
	        return this._editableMap.getReadOnly(dataRow, column);
	    };
	    DefaultItemProvider.prototype.setCellCursor = function (dataRow, column, value) {
	        return this._editableMap.setCursor(dataRow, column, value);
	    };
	    DefaultItemProvider.prototype.getCellCursor = function (dataRow, column) {
	        return this._editableMap.getCursor(dataRow, column);
	    };
	    DefaultItemProvider.prototype.setCellEditor = function (dataRow, column, value) {
	        return this._editableMap.setEditor(dataRow, column, value);
	    };
	    DefaultItemProvider.prototype.getCellEditor = function (dataRow, column) {
	        return this._editableMap.getEditor(dataRow, column, undefined);
	    };
	    DefaultItemProvider.prototype.clearEditableMap = function () {
	        return this._editableMap.clearEditableMap();
	    };
	    DefaultItemProvider.prototype.getNumber = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.count : this.itemCount;
	    };
	    DefaultItemProvider.prototype.getSum = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.sum : NaN;
	    };
	    DefaultItemProvider.prototype.getMax = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.max : NaN;
	    };
	    DefaultItemProvider.prototype.getMin = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.min : NaN;
	    };
	    DefaultItemProvider.prototype.getAvg = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.avg : NaN;
	    };
	    DefaultItemProvider.prototype.getVar = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.vars : NaN;
	    };
	    DefaultItemProvider.prototype.getVarp = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.varsp : NaN;
	    };
	    DefaultItemProvider.prototype.getStdev = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? Math.sqrt(fs.vars) : NaN;
	    };
	    DefaultItemProvider.prototype.getStdevp = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? Math.sqrt(fs.varsp) : NaN;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DefaultItemProvider.prototype.$_saveExtents = function (exts) {
	        for (var i = 0, cnt = this._rows.length; i < cnt; i++) {
	            var row = this._rows[i];
	            row.dataRowId >= 0 && (exts[row.dataRowId] = row["_extents"]);
	        }
	    };
	    DefaultItemProvider.prototype.$_clearRows = function () {
	        this._rows.length = 0;
	        this._filteredItems.length = 0;
	        this._filtered = false;
	        this._sorted = false;
	        this._sortedItems.length = 0;
	        this._pubItems = this._rows;
	        this.$_clearDistincts();
	    };
	    DefaultItemProvider.prototype.$_clearIndicies = function () {
	        for (var i = this._rows.length; i--;) {
	            this._rows[i]["_index"] = -1;
	        }
	    };
	    DefaultItemProvider.prototype.$_clearDistincts = function () {
	        for (var i = this._distinctRows.length; i--;) {
	            this._distinctRows[i] = null;
	        }
	        this._distinctRows.length = 0;
	    };
	    DefaultItemProvider.prototype.$_buildRows = function (saveExtents) {
	        if (saveExtents === void 0) { saveExtents = null; }
	        var ds = this._dataSource;
	        if (!ds) {
	            return;
	        }
	        this._filtered = this.$_checkFiltered();
	        this._sorted = this.$_checkSorted();
	        this._rowCount = ds.rowCount;
	        if (!this._filtered && !this._paging && this.maxItemCount > 0) {
	            this._rowCount = Math.min(this._rowCount, this.maxItemCount);
	        }
	        this._rows = new Array(this._rowCount);
	        for (var i = 0, cnt = this._rows.length; i < cnt; i++) {
	            var row = this._rows[i] = this.$_createRow(i);
	            saveExtents && saveExtents.hasOwnProperty(row.dataId) && (row["_extents"] = saveExtents[row.dataId]);
	        }
	        this.$_buildItems();
	        this._checkableTag && this._checkableTag.setRows();
	    };
	    DefaultItemProvider.prototype.$_resetCounts = function () {
	        if (this._filtered) {
	            this._pubCount = this._itemCount = this._items.length;
	        }
	        else {
	            this._pubCount = this._itemCount = this._rowCount = this._rows.length;
	        }
	    };
	    DefaultItemProvider.prototype.$_buildItems = function (noFilter, noSort) {
	        if (noFilter === void 0) { noFilter = false; }
	        if (noSort === void 0) { noSort = false; }
	        var maxCount = this.maxItemCount > 0 ? this.maxItemCount : this._rows.length;
	        var hiddenRows = this._dataSource.hiddenCount;
	        this._rowCount = this._rows.length;
	        this._pubItems = this._items = this._rows;
	        this._pubCount = this._itemCount = this._rows.length;
	        this._filtered = this.$_checkFiltered();
	        this._sorted = this.$_checkSorted();
	        if (this._filtered || this._paging) {
	            this.$_clearIndicies();
	        }
	        if (this._filtered) {
	            this._filteredItems.length = 0;
	            if (this.hideDeleted || hiddenRows > 0) {
	                for (var i = 0; i < this._rowCount; i++) {
	                    var row = this._rows[i];
	                    var state = this._dataSource.getRowState(this._rows[i].dataRow);
	                    var hidden = this._dataSource.isHiddenRow(this._rows[i].dataRow);
	                    if (this.hideDeleted && RowState_1.isDeletedState(state) || hidden) {
	                        row["_index"] = -1;
	                    }
	                    else {
	                        row["_index"] = 0;
	                    }
	                }
	            }
	            else {
	                for (var i = 0; i < this._rowCount; i++) {
	                    this._rows[i]["_index"] = 0;
	                }
	            }
	            var fixedCount = this.fixedCount;
	            var exceptFiltering = (fixedCount > 0) && !this._fixedFiltering;
	            var nMax = this._rows.length;
	            if (!noFilter) {
	                for (var i = 0, len = this._filters.length; i < len; i++) {
	                    var filters = this._filters[i];
	                    if (filters) {
	                        for (var c = 0; c < filters.length; c++) {
	                            filters[c].prepare(this._filterRuntime, this._dataSource);
	                        }
	                    }
	                }
	            }
	            if (!this._paging) {
	                nMax = Math.min(nMax, maxCount);
	            }
	            var cnt = 0;
	            for (var i = 0; i < this._rowCount && cnt < nMax; i++) {
	                var row = this._rows[i];
	                if (row.index >= 0) {
	                    if (noFilter || exceptFiltering && cnt < fixedCount) {
	                        this._filteredItems.push(row);
	                        cnt++;
	                    }
	                    else {
	                        var selected = !this._filterOr; // filterOr 선택된 filter중 하나라도 만족하면 select;
	                        var fltCnt = 0;
	                        for (var y = 0, len = this._filters.length; y < len; y++) {
	                            var filters = this._filters[y];
	                            filters && fltCnt++;
	                            if (this._filterOr) {
	                                if (filters && this.$_select(filters, row, y)) {
	                                    selected = true;
	                                    break;
	                                }
	                            }
	                            else {
	                                if (filters && !this.$_select(filters, row, y)) {
	                                    selected = false;
	                                    break;
	                                }
	                            }
	                        }
	                        if (selected || fltCnt === 0) {
	                            this._filteredItems.push(row);
	                            cnt++;
	                        }
	                        else {
	                            row["_index"] = -1;
	                        }
	                    }
	                }
	            }
	            this._pubItems = this._items = this._filteredItems;
	            this._pubCount = this._itemCount = this._items.length;
	        }
	        else {
	            this._filteredItems.length = 0;
	        }
	        if (this._sorted) {
	            if (noSort) {
	                var items = this._sortedItems;
	                for (var i = items.length; i--;) {
	                    if (items[i].index < 0) {
	                        items.splice(i, 1);
	                    }
	                }
	            }
	            else {
	                this.$_sortRows();
	            }
	            this._pubItems = this._sortedItems;
	        }
	        else {
	            this._sortedItems.length = 0;
	        }
	        if (this._paging) {
	            this.$_buildPageItems();
	        }
	        this.$_clearSummary();
	        this._resetItemIndicies(0);
	    };
	    DefaultItemProvider.prototype.$_buildPageItems = function () {
	        var items = this._sorted ? this._sortedItems : this._filtered ? this._filteredItems : this._items;
	        this._pageItems.length = 0;
	        var i = this._pageStart = this._pageStartIndex >= 0 ? this._pageStartIndex : this._currPage * this._pageSize;
	        var itemCount = items.length;
	        var maxCount = this.maxItemCount > 0 ? this.maxItemCount : itemCount;
	        var cnt = Math.min(this._pageSize, maxCount);
	        for (; i < itemCount && cnt > 0; i++, cnt--) {
	            this._pageItems.push(items[i]);
	        }
	        this._pubItems = this._pageItems;
	        this._pubCount = this._pubItems.length;
	    };
	    DefaultItemProvider.prototype.$_buildPage = function () {
	        this.$_clearIndicies();
	        this.$_buildPageItems();
	        this._resetItemIndicies(0);
	    };
	    DefaultItemProvider.prototype.$_compareFuncs = function (sortFields, sortCases) {
	        var comparers = {};
	        var ds = this._dataSource;
	        for (var i = 0, cnt = sortFields.length; i < cnt; i++) {
	            var field = ds.getField(sortFields[i]);
	            if (field) {
	                var compFunc = ds.getDataComparer(field.index) ? ds.getDataComparer(field.index) : this._labelComparer[field.index];
	                var ignoreCase = sortCases[i] == Types.SortCase.INSENSITIVE;
	                if (!compFunc) {
	                    switch (field.dataType) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.NUMBER:
	                            compFunc = ds.compareNumbers.bind(ds);
	                            break;
	                        case Types.ValueType.BOOLEAN:
	                            compFunc = ds.compareBools.bind(ds);
	                            break;
	                        case Types.ValueType.OBJECT:
	                            compFunc = ds.compareObjects.bind(ds);
	                            break;
	                        default:
	                            compFunc = ignoreCase ? ds.compareTexts.bind(ds) : ds.compareValues.bind(ds);
	                            break;
	                    }
	                }
	                if (compFunc) {
	                    comparers[sortFields[i]] = compFunc;
	                }
	            }
	        }
	        return comparers;
	    };
	    DefaultItemProvider.prototype.$_sortRows = function (items) {
	        if (items === void 0) { items = null; }
	        var sortRows = items || this._items.slice();
	        var fixedRows = [];
	        if (this._fixedCount > 0 && !this._fixedSorting) {
	            fixedRows = sortRows.splice(0, this._fixedCount);
	        }
	        var comparers = this.$_compareFuncs(this._sortFields, this._sortCases);
	        sortRows.sort(function (r1, r2) {
	            var diff = 0;
	            var compFunc;
	            var sortDirection;
	            var checkRow;
	            for (var i = 0, cnt = this._sortFields.length; i < cnt; i++) {
	                sortDirection = this._sortDirections[i];
	                checkRow = this._sortFields.length == i + 1;
	                if (compFunc = comparers[this._sortFields[i]]) {
	                    diff = compFunc(this._sortFields[i], r1.dataRow, r2.dataRow);
	                    if (diff !== 0) {
	                        break;
	                    }
	                }
	            }
	            diff = diff * (sortDirection === Types.SortDirection.DESCENDING ? -1 : 1);
	            diff = diff === 0 && checkRow ? (sortDirection === Types.SortDirection.DESCENDING ? r2.dataRow - r1.dataRow : r1.dataRow - r2.dataRow) : diff;
	            return diff;
	        }.bind(this));
	        this._sortedItems = fixedRows.concat(sortRows);
	    };
	    DefaultItemProvider.prototype.$_createRow = function (row) {
	        var item = new GridItem_1.GridRow(row);
	        this.attachItem(item);
	        item["_dataRowId"] = item.dataId;
	        return item;
	    };
	    DefaultItemProvider.prototype.$_createAllRow = function () {
	        for (var i = 0; i < this._rowCount; i++) {
	            if (!this._rows[i]) {
	                this._rows[i] = this.$_createRow(i);
	            }
	        }
	    };
	    DefaultItemProvider.prototype.$_resetSummary = function () {
	        this._summaryMap = [];
	    };
	    DefaultItemProvider.prototype.$_clearSummary = function () {
	        if (this._summaryMap) {
	            for (var i = this._summaryMap.length - 1; i >= 0; i--) {
	                this._summaryMap[i] && this._summaryMap[i].clear();
	            }
	        }
	    };
	    DefaultItemProvider.prototype.$_getSummary = function (field) {
	        var fs = this._summaryMap[field];
	        if (!fs) {
	            var ds = this._dataSource;
	            if (ds && ds.canSummarize(field)) {
	                fs = new FieldSummary_1.FieldSummary(field);
	                this._summaryMap[field] = fs;
	            }
	        }
	        if (fs && fs.count == 0 && this.itemCount > 0) {
	            this.$_summarize(fs);
	        }
	        return fs;
	    };
	    DefaultItemProvider.prototype.$_summarize = function (fld) {
	        var ds = this._dataSource;
	        if (ds) {
	            if (this._filtered) {
	                var cnt = this._items.length;
	                var rows = new Array(cnt);
	                for (var i = 0; i < cnt; i++) {
	                    rows[i] = this._pubItems[i].dataRow;
	                }
	                ds.summarizeRange(fld, rows, this._summaryMode == Types.SummaryMode.STATISTICAL);
	            }
	            else {
	                ds.summarize(fld, this._summaryMode == Types.SummaryMode.STATISTICAL);
	            }
	        }
	    };
	    DefaultItemProvider.prototype.$_needSort = function () {
	        return this._sorted && this._sortMode == Types.SortMode.AUTO;
	    };
	    DefaultItemProvider.prototype.$_needFilter = function () {
	        return this._filtered && this._filterMode == Types.FilterMode.AUTO;
	    };
	    DefaultItemProvider.prototype.$_checkFiltered = function () {
	        if (this._dataSource) {
	            this._filters.length = this._dataSource.fieldCount;
	            return this.hasFilters() || (this.hideDeleted && this._dataSource.deletedCount > 0) || (this._dataSource.hiddenCount > 0);
	        }
	        return false;
	    };
	    DefaultItemProvider.prototype.$_select = function (filters, item, field) {
	        var cnt = filters.length;
	        for (var i = 0; i < cnt; i++) {
	            if (filters[i].select(this._filterRuntime, item, field)) {
	                return true;
	            }
	        }
	        return false;
	    };
	    DefaultItemProvider.prototype.$_checkSorted = function () {
	        for (var i = this._sortFields.length - 1; i >= 0; i--) {
	            if (this._sortFields[i] > this._dataSource.fieldCount) {
	                this._sortFields.splice(i, 1);
	                this._sortDirections.splice(i, 1);
	                this._sortCases.splice(i, 1);
	            }
	        }
	        return this._sortFields && this._sortFields.length > 0;
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    DefaultItemProvider.prototype.onDataSourceCommandStackChanged = function (ds, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    DefaultItemProvider.prototype.onDataProviderDisposed = function (ds) {
	        ds.removeTag(this._cellStyles);
	        ds.removeTag(this._editableMap);
	        this._checkableTag && this._checkableTag.disconnect();
	        this.$_clearRows();
	        this.$_resetSummary();
	        this._fireReset();
	        this.dataSource = null;
	    };
	    DefaultItemProvider.prototype.onDataProviderReset = function (ds) {
	        this.$_clearRows();
	        this.$_buildRows();
	        this.$_resetSummary();
	        this._fireReset();
	    };
	    DefaultItemProvider.prototype.onDataProviderRefresh = function (ds) {
	        this._refreshItems();
	    };
	    DefaultItemProvider.prototype.onDataProviderRefreshClient = function (ds) {
	        this._fireRefreshClient();
	    };
	    DefaultItemProvider.prototype.onDataProviderRowCountChanged = function (ds, newCount) {
	        this._fireRefreshClient();
	    };
	    DefaultItemProvider.prototype.onDataProviderRowInserting = function (ds, row, values) {
	        return true;
	    };
	    DefaultItemProvider.prototype.onDataProviderRowInserted = function (ds, row, itemIndex) {
	        var rows = this._rows;
	        var posRow = row < rows.length ? rows[row] : null;
	        var item = this.$_createRow(row);
	        rows.splice(row, 0, item);
	        for (var i = row, cnt = rows.length; i < cnt; i++) {
	            rows[i]["_dataRow"] = i;
	        }
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            if (this._filtered) {
	                var items = this._filteredItems;
	                row = itemIndex != null ? itemIndex : Math.max(0, posRow ? items.indexOf(posRow) : items.length);
	                items.splice(row, 0, item);
	            }
	            if (this._sorted) {
	                var items = this._sortedItems;
	                row = itemIndex != null ? itemIndex : Math.max(0, posRow ? items.indexOf(posRow) : items.length);
	                // row = Math.max(0, posRow ? items.indexOf(posRow) : items.length);
	                items.splice(row, 0, item);
	            }
	            this.$_clearSummary();
	            this.$_resetCounts();
	            this._resetItemIndicies(this._sorted ? 0 : row);
	        }
	        this._checkableTag && this._checkableTag.insertRow(item);
	        this._fireItemInserted(item);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsInserted = function (ds, row, count, itemIndex) {
	        if (count < 0) {
	            return;
	        }
	        var rows = this._rows;
	        var posRow = row < rows.length ? rows[row] : null;
	        var list = [];
	        var item;
	        for (var i = 0; i < count; i++) {
	            list.push(item = this.$_createRow(row + i));
	            rows.splice(row + i, 0, item);
	        }
	        var cnt = rows.length;
	        for (var i = row; i < cnt; i++) {
	            rows[i]["_dataRow"] = i;
	        }
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            if (this._filtered) {
	                var items = this._filteredItems;
	                row = itemIndex != null ? itemIndex : Math.max(0, posRow ? items.indexOf(posRow) : items.length);
	                for (var i = 0; i < list.length; i++) {
	                    items.splice(row + i, 0, list[i]);
	                }
	            }
	            if (this._sorted) {
	                var items = this._sortedItems;
	                row = itemIndex != null ? itemIndex : Math.max(0, posRow ? items.indexOf(posRow) : items.length);
	                for (var i = 0; i < list.length; i++) {
	                    items.splice(row + i, 0, list[i]);
	                }
	            }
	            this.$_clearSummary();
	            this.$_resetCounts();
	            this._resetItemIndicies(row);
	        }
	        this._checkableTag && this._checkableTag.insertRows(row, count);
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.onDataProviderRowRemoving = function (ds, row) {
	        return true;
	    };
	    DefaultItemProvider.prototype.$_silentRemoveRow = function (item) {
	        if (this._filtered) {
	            var items = this._filteredItems;
	            var r = items.indexOf(item);
	            r >= 0 && items.splice(r, 1);
	        }
	        if (this._sorted) {
	            var items = this._sortedItems;
	            var r = items.indexOf(item);
	            r >= 0 && items.splice(r, 1);
	        }
	        this.$_clearSummary();
	        this.$_resetCounts();
	        this._resetItemIndicies(0);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowRemoved = function (ds, rowIndex) {
	        var rows = this._rows;
	        var item = rows[rowIndex];
	        rows.splice(rowIndex, 1);
	        for (var i = rows.length - 1; i >= rowIndex; i--) {
	            rows[i]["_dataRow"] = i;
	        }
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_silentRemoveRow(item);
	        }
	        this._fireItemDeleted(item);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsRemoving = function (ds, rows) {
	        return true;
	    };
	    DefaultItemProvider.prototype.$_silentRemoveRows = function (list) {
	        if (this._filtered) {
	            var items = this._filteredItems;
	            for (var i = 0; i < list.length; i++) {
	                var item = list[i];
	                var row = items.indexOf(item);
	                row >= 0 && items.splice(row, 1);
	            }
	        }
	        if (this._sorted) {
	            var items = this._sortedItems;
	            for (var i = 0; i < list.length; i++) {
	                var item = list[i];
	                var row = items.indexOf(item);
	                row >= 0 && items.splice(row, 1);
	            }
	        }
	        this.$_clearSummary();
	        this.$_resetCounts();
	        this._resetItemIndicies(0);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsRemoved = function (ds, rows) {
	        if (!rows || rows.length < 1) {
	            return;
	        }
	        if (rows.length > 1) {
	            rows.sort(function (v1, v2) {
	                return v1 - v2;
	            });
	        }
	        var items = this._rows;
	        var row = rows[0];
	        var list = [];
	        for (var i = rows.length - 1; i >= 0; i--) {
	            list.push(items[rows[i]]);
	            items.splice(rows[i], 1);
	        }
	        for (var i = this._rows.length - 1; i >= row; i--) {
	            items[i]["_dataRow"] = i;
	        }
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_silentRemoveRows(list);
	        }
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.onDataProviderRowUpdating = function (ds, row, values) {
	        return true;
	    };
	    DefaultItemProvider.prototype.onDataProviderRowUpdated = function (ds, row) {
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_clearSummary();
	        }
	        this._checkableTag && this._checkableTag.updateRow(this._rows[row]);
	        this._rows[row] && this._fireItemUpdated(this._rows[row]);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsUpdated = function (ds, row, count) {
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_clearSummary();
	        }
	        this._checkableTag && this._checkableTag.updateRows(row, count);
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.onDataProviderValueChanging = function (ds, row, field, value) {
	        return true;
	    };
	    DefaultItemProvider.prototype.onDataProviderValueChanged = function (ds, row, field) {
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_clearSummary();
	        }
	        this._checkableTag && this._checkableTag.updateRow(this._rows[row]);
	        this._rows[row] && this._fireItemUpdated(this._rows[row]);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowMoving = function (ds, row, newRow) {
	        return true;
	    };
	    DefaultItemProvider.prototype.onDataProviderRowMoved = function (ds, row, newRow) {
	        var rows = this._rows;
	        var len = rows.length;
	        row = Math.min(row, newRow);
	        for (var i = row; i < len; i++) {
	            rows[i]["_dataRow"] = i;
	        }
	        if (this._sorted || this._paging || this.hideDeleted) {
	            this.$_buildItems();
	            this._resetItemIndicies(0);
	        }
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsMoving = function (ds, row, count, newRow) {
	        return true;
	    };
	    DefaultItemProvider.prototype.onDataProviderRowsMoved = function (ds, row, count, newRow) {
	        this._refreshItems();
	    };
	    DefaultItemProvider.prototype.onDataProviderStateChanged = function (ds, row) {
	        if (this.hideDeleted) {
	            var item = this._rows[row];
	            if (RowState_1.isDeletedState(item.rowState)) {
	                if (this.$_needFilter() || this.$_needSort() || this._paging) {
	                    this.$_buildItems();
	                }
	                else {
	                    if ((this.$_checkFiltered() && (!this._filteredItems || this._filteredItems.length <= 0)) || (this.isSorted && (!this._sortedItems || this._sortedItems.length <= 0))) {
	                        this.$_buildItems(true, true);
	                    }
	                    else {
	                        this.$_silentRemoveRow(item);
	                    }
	                    // this.$_buildItems(true,true);
	                }
	                this._fireRefresh();
	            }
	        }
	        this._checkableTag && this._checkableTag.updateRow(this._rows[row]);
	        this._fireRowStateChanged(this._rows[row]);
	    };
	    DefaultItemProvider.prototype.onDataProviderRowHided = function (ds, rows, hide) {
	        this._filtered = this.$_checkFiltered();
	        if (hide) {
	            if (this.$_needFilter() || this.$_needSort() || this._paging) {
	                this.$_buildItems();
	            }
	            else { // 최초 dataLoad후 filter, sort가 되지 않은 상태.
	                if ((this.$_checkFiltered() && (!this._filteredItems || this._filteredItems.length <= 0)) || (this.isSorted && (!this._sortedItems || this._sortedItems.length <= 0))) {
	                    this.$_buildItems(true, true);
	                }
	                else {
	                    var list = this.getItemsByRows(rows);
	                    this.$_silentRemoveRows(list);
	                }
	            }
	            this._fireRefresh();
	        }
	        else {
	            this._refreshItems();
	        }
	    };
	    DefaultItemProvider.prototype.onDataProviderStatesChanged = function (ds, rows) {
	        if (this.hideDeleted) {
	            var deleted = false;
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var r = rows[i];
	                var row = this._rows[r];
	                if (RowState_1.isDeletedState(row.rowState)) {
	                    deleted = true;
	                    break;
	                }
	            }
	            if (deleted) {
	                if (this.$_needFilter() || this.$_needSort() || this._paging) {
	                    this.$_buildItems(); // filter,sort를 하거나 paging인경우 item을 다시 만든다.
	                }
	                else {
	                    if ((this.$_checkFiltered() && (!this._filteredItems || this._filteredItems.length <= 0)) || (this.isSorted && (!this._sortedItems || this._sortedItems.length <= 0))) {
	                        this.$_buildItems(true, true);
	                    }
	                    else {
	                        var list = this.getItemsByRows(rows);
	                        this.$_silentRemoveRows(list);
	                    }
	                    // this.$_buildItems(true,true); //
	                }
	                this._fireRefresh();
	            }
	        }
	        this._checkableTag && this._checkableTag.changeStates(rows);
	        this._fireRowStatesChanged(this.getItemsByRows(rows));
	    };
	    DefaultItemProvider.prototype.onDataProviderRestoreRows = function (ds, rows) {
	        if (this.$_needFilter() || this.$_needSort() || this._paging) {
	            this.$_buildItems();
	        }
	        else {
	            this.$_clearSummary();
	        }
	        this._checkableTag && this._checkableTag.changeStates(rows);
	        this._fireRowStatesChanged(this.getItemsByRows(rows));
	        this._fireRefresh();
	    };
	    DefaultItemProvider.prototype.onDataProviderStatesCleared = function (ds) {
	        if (this._pubCount != ds.rowCount) {
	            this._refreshItems();
	        }
	        this._fireRowStatesCleared();
	    };
	    return DefaultItemProvider;
	}(ItemProvider_1.ItemProvider));
	exports.DefaultItemProvider = DefaultItemProvider;
	});

	unwrapExports(DefaultItemProvider_1);
	var DefaultItemProvider_2 = DefaultItemProvider_1.CheckableExpressionRuntime;
	var DefaultItemProvider_3 = DefaultItemProvider_1.DefaultItemProvider;

	var TreeItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeItemsProvider.ts
	// 2019. 09. 20. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });












	var TreeCheckableTag = /** @class */ (function (_super) {
	    __extends(TreeCheckableTag, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeCheckableTag(owner, expression) {
	        var _this = _super.call(this) || this;
	        _this._owner = owner;
	        _this._exprNode = Expression.ExpressionParser.Default.parse(expression, ["value", "values"]);
	        _this._runtime = new DefaultItemProvider_1.CheckableExpressionRuntime();
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    TreeCheckableTag.clearCheckables = function (rs) {
	        var clearCheckable = function (item) {
	            if (item) {
	                item.setCheckable(true);
	                for (var i = item.count; i--;) {
	                    var child = item.getItem(i);
	                    child instanceof TreeItem && clearCheckable(child);
	                }
	            }
	        };
	        for (var i = rs.itemCount; i--;) {
	            var item = rs.getItem(i);
	            if (item instanceof TreeItem) {
	                clearCheckable(item);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeCheckableTag.prototype.connect = function (ds) {
	        this._runtime.setDataSource(ds);
	    };
	    TreeCheckableTag.prototype.disconnect = function () {
	    };
	    TreeCheckableTag.prototype.clearRows = function () {
	        TreeCheckableTag.clearCheckables(this._owner);
	    };
	    TreeCheckableTag.prototype.setRows = function () {
	        for (var i = this._owner.itemCount; i--;) {
	            var item = this._owner.getItem(i);
	            if (item instanceof TreeItem) {
	                this.$_setCheckable(item, true);
	            }
	        }
	    };
	    TreeCheckableTag.prototype.addRow = function (row, recursive) {
	        if (recursive === void 0) { recursive = true; }
	        var item = this._owner.getItemOfRow(row.rowId);
	        if (item instanceof TreeItem) {
	            this.$_setCheckable(item, recursive);
	        }
	    };
	    TreeCheckableTag.prototype.addRows = function (rows) {
	        for (var i = rows.length; i--;) {
	            var item = this._owner.getItemOfRow(rows[i].rowId);
	            if (item instanceof TreeItem) {
	                this.$_setCheckable(item, true);
	            }
	        }
	    };
	    TreeCheckableTag.prototype.updateRow = function (row) {
	        var item = this._owner.getItemOfRow(row.rowId);
	        if (item instanceof TreeItem) {
	            this.$_setCheckable(item, false);
	        }
	    };
	    TreeCheckableTag.prototype.changeStates = function (rows) {
	        for (var i = rows.length; i--;) {
	            var item = this._owner.getItemOfRow(rows[i].rowId);
	            if (item instanceof TreeItem) {
	                this.$_setCheckable(item, false);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeCheckableTag.prototype.$_setCheckable = function (item, recursive) {
	        if (item) {
	            this._runtime.setItem(item);
	            item.setCheckable(this._exprNode.evaluate(this._runtime));
	            if (recursive) {
	                for (var i = item.count; i--;) {
	                    var child = item.getItem(i);
	                    child instanceof TreeItem && this.$_setCheckable(child, true);
	                }
	            }
	        }
	    };
	    return TreeCheckableTag;
	}(Base_1.Base));
	var TreeItemFooter = /** @class */ (function (_super) {
	    __extends(TreeItemFooter, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemFooter() {
	        return _super.call(this) || this;
	    }
	    Object.defineProperty(TreeItemFooter.prototype, "isLeaf", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return TreeItemFooter;
	}(GridItem_1.GridItem));
	exports.TreeItemFooter = TreeItemFooter;
	var TreeItem = /** @class */ (function (_super) {
	    __extends(TreeItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItem(dataRow) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._iconHeight = 0;
	        _this._dataRow = dataRow;
	        return _this;
	    }
	    TreeItem.getTemp = function (row) {
	        TreeItem.$_tempItem._dataRow = row;
	        return TreeItem.$_tempItem;
	    };
	    TreeItem.prototype.dispose = function () {
	        this._dataRow = null;
	        _super.prototype.dispose.call(this);
	    };
	    Object.defineProperty(TreeItem.prototype, "iconHeight", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** iconHeight */
	        get: function () {
	            return this._iconHeight;
	        },
	        set: function (value) {
	            this._iconHeight = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "row", {
	        /** row */
	        get: function () {
	            return this._dataRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "rowId", {
	        /** rowId */
	        get: function () {
	            return this._dataRow ? this._dataRow.rowId : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "iconIndex", {
	        /** iconIndex */
	        get: function () {
	            return this._dataRow.iconIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "hasChildren", {
	        /** hasChildren */
	        get: function () {
	            return this.count > 0 || this._dataRow.hasChildren;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "rootItem", {
	        /** rootItem */
	        get: function () {
	            var p = this;
	            while (p.level > 1) {
	                p = p.parent;
	            }
	            return p;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "summaryMode", {
	        // /** lastVisible */
	        // get lastVisible(): TreeItem {
	        // 	return (this.expanded && this.count > 0) ? this.lastVisible : this;
	        // }
	        /** summaryMode */
	        get: function () {
	            return Types.SummaryMode.AGGREGATE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "isData", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "isDataRow", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "checked", {
	        get: function () {
	            return this._dataRow && (this._dataRow["_extents"] & GridItem_1.ITEM_EXT_CHECKED) != 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "footer", {
	        get: function () {
	            return this._footer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "footerCount", {
	        get: function () {
	            return this._footer ? 1 : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "dataRow", {
	        get: function () {
	            return this._dataRow ? this._dataRow.rowId : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "dataId", {
	        get: function () {
	            return this._dataRow ? this._dataRow.rowId : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "descendantCount", {
	        get: function () {
	            return this._dataRow.descendantCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "rowState", {
	        get: function () {
	            return this._dataRow.rowState;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "isLeaf", {
	        get: function () {
	            return this.count == 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItem.prototype, "resizable", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeItem.prototype.getFooter = function (number) {
	        return this._footer;
	    };
	    TreeItem.prototype.isFooter = function (item) {
	        return item === this._footer;
	    };
	    TreeItem.prototype.canEdit = function () {
	        return true;
	    };
	    TreeItem.prototype.createFooter = function () {
	        if (!this._footer) {
	            this._footer = new TreeItemFooter();
	            //this._attachItem(this._footer);
	        }
	    };
	    TreeItem.prototype._setChecked = function (value) {
	        if (this._dataRow) {
	            var ext = this._dataRow["_extents"];
	            this._dataRow["_extents"] = value ? (ext | GridItem_1.ITEM_EXT_CHECKED) : (ext & ~GridItem_1.ITEM_EXT_CHECKED);
	        }
	    };
	    Object.defineProperty(TreeItem.prototype, "checkable", {
	        get: function () {
	            return !this._dataRow || (this._dataRow["_extents"] & GridItem_1.ITEM_UNCHECKABLE) == 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeItem.prototype._setCheckable = function (value) {
	        if (this._dataRow) {
	            var ext = this._dataRow["_extents"];
	            this._dataRow["_extents"] = value ? (ext & ~GridItem_1.ITEM_UNCHECKABLE) : (ext | GridItem_1.ITEM_UNCHECKABLE);
	        }
	    };
	    TreeItem.prototype.setExpanded = function (value, recursive, force) {
	        if (value != this.expanded || force) ;
	    };
	    TreeItem.prototype.getData = function (field) {
	        return this._dataRow.getValue(field);
	    };
	    TreeItem.prototype.setData = function (field, value) {
	        this._dataRow.setValue(field, value, false);
	    };
	    TreeItem.prototype.setItem = function (item, newItem) {
	        _super.prototype.setItem.call(this, item, newItem);
	        newItem._addChildren(item.children);
	        item.clear();
	    };
	    TreeItem.prototype.exchange = function (index1, index2) {
	        this._exchangeItems(index1, index2);
	    };
	    TreeItem.prototype.moveChild = function (index, delta) {
	        var newIndex = index + delta;
	        var children = this["_children"];
	        var child = children[index];
	        if (delta < 0) {
	            for (var i = index; i > newIndex; i--)
	                children[i] = children[i - 1];
	        }
	        else {
	            for (var i = index; i < newIndex; i++)
	                children[i] = children[i + 1];
	        }
	        children[newIndex] = child;
	    };
	    TreeItem.prototype.changeParent = function (parent, index) {
	        var old = this.parent;
	        old.remove(this);
	        if (parent) {
	            parent.insert(index, this);
	        }
	    };
	    TreeItem.prototype.getRowData = function () {
	        return this._dataRow && this._dataRow["_values"].concat();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    TreeItem.$_tempItem = new TreeItem(null);
	    return TreeItem;
	}(GridItem_1.GroupItem));
	exports.TreeItem = TreeItem;
	var RootTreeItem = /** @class */ (function (_super) {
	    __extends(RootTreeItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RootTreeItem(provider) {
	        var _this = _super.call(this, null) || this;
	        _this._rs = provider;
	        return _this;
	    }
	    Object.defineProperty(RootTreeItem.prototype, "id", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeItem.prototype, "provider", {
	        get: function () {
	            return this._rs;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeItem.prototype, "level", {
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeItem.prototype, "expanded", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RootTreeItem.prototype.setExpanded = function (value, recursive, force) {
	    };
	    Object.defineProperty(RootTreeItem.prototype, "isLeaf", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeItem.prototype, "visible", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RootTreeItem.prototype, "dataSource", {
	        get: function () {
	            return this._rs.dataSource;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RootTreeItem;
	}(TreeItem));
	var HierarchicalVisibleItems = /** @class */ (function (_super) {
	    __extends(HierarchicalVisibleItems, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HierarchicalVisibleItems(provider) {
	        var _this = _super.call(this) || this;
	        _this._fixedCount = 0;
	        _this._items = new Array();
	        _this._list = new Array();
	        _this._rs = provider;
	        return _this;
	    }
	    Object.defineProperty(HierarchicalVisibleItems.prototype, "provider", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rs;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HierarchicalVisibleItems.prototype, "count", {
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HierarchicalVisibleItems.prototype, "fixedCount", {
	        get: function () {
	            return this._fixedCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    HierarchicalVisibleItems.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    HierarchicalVisibleItems.prototype.setItem = function (index, newItem) {
	        this._items[index] = newItem;
	    };
	    HierarchicalVisibleItems.prototype.indexOf = function (item) {
	        return this._items.indexOf(item);
	    };
	    HierarchicalVisibleItems.prototype.clear = function () {
	        this._items.length = 0;
	    };
	    HierarchicalVisibleItems.prototype.expand = function (item, recursive, level) {
	        if (level === void 0) { level = 0; }
	        item && this.$_expandItem(item, recursive, level);
	    };
	    HierarchicalVisibleItems.prototype.collapse = function (item) {
	        if (item) {
	            var rs = this._rs;
	            var items = this._items;
	            var idx = item.index + 1;
	            while (idx < items.length && items[idx].level > item.level) {
	                if (items[idx] == item.footer) {
	                    if (!rs.footerWhenCollapsed) {
	                        items[idx]["_index"] = -1;
	                        items.splice(idx, 1);
	                    }
	                    break;
	                }
	                items[idx]["_index"] = -1;
	                items.splice(idx, 1);
	            }
	        }
	    };
	    HierarchicalVisibleItems.prototype.getNext = function (item) {
	        if (item && item.visible && item.index < this.count - 1) {
	            return this._items[item.index + 1];
	        }
	        return null;
	    };
	    HierarchicalVisibleItems.prototype.getPrior = function (item) {
	        if (item && item.visible && item.index > 0) {
	            return this._items[item.index - 1];
	        }
	        return null;
	    };
	    HierarchicalVisibleItems.prototype.insert = function (item, index) {
	        this._items.splice(index, 0, item);
	    };
	    HierarchicalVisibleItems.prototype.remove = function (item) {
	        var items = this._items;
	        var i = items.indexOf(item);
	        if (i >= 0) {
	            items.splice(i, 1);
	            if (item.expanded) {
	                while (i < items.length && item.isDescendant(items[i])) {
	                    items.splice(i, 1);
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HierarchicalVisibleItems.prototype.$_collectChildren = function (parent, list, recursive, level) {
	        for (var i = 0, cnt = parent.count; i < cnt; i++) {
	            var item = parent.getItem(i);
	            if (item) {
	                list.push(item);
	                if ((recursive && item.level < level) || item.expanded) {
	                    this.$_collectChildren(item, list, recursive, level);
	                }
	            }
	        }
	        var footer = parent.footer;
	        if (footer) {
	            list.push(parent.footer);
	        }
	    };
	    HierarchicalVisibleItems.prototype.$_expandItem = function (item, recursive, level) {
	        var items = this._items;
	        var list = this._list;
	        var idx;
	        if (item instanceof RootTreeItem) {
	            idx = this._fixedCount;
	        }
	        else {
	            idx = item.index + 1;
	        }
	        level = Math.max(0, level);
	        list.length = 0;
	        this.$_collectChildren(item, list, recursive, level > 0 ? item.level + level : 1000000);
	        if (recursive) {
	            var i = idx;
	            for (var cnt = items.length; i < cnt; i++) {
	                if (items[i].level <= item.level) {
	                    break;
	                }
	            }
	            items.splice(idx, i - idx);
	        }
	        for (var i = 0, cnt = list.length; i < cnt; i++) {
	            items.splice(idx + i, 0, list[i]);
	        }
	    };
	    HierarchicalVisibleItems.prototype._clearAndInit = function (fixedCount) {
	        this.clear();
	        this._fixedCount = Math.min(fixedCount, this._rs.itemCount);
	        for (var i = 0; i < this._fixedCount; i++) {
	            this._items.push(this._rs.getItem(i));
	        }
	    };
	    return HierarchicalVisibleItems;
	}(Base_1.Base));
	var TreeItemProvider = /** @class */ (function (_super) {
	    __extends(TreeItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemProvider() {
	        var _this = _super.call(this, null) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._sortMode = Types.SortMode.AUTO;
	        _this._expandWhenGrouping = true;
	        _this._footerWhenExpanded = true;
	        _this._footerWhenCollapsed = true;
	        _this._summaryMode = Types.SummaryMode.AGGREGATE;
	        _this._groupSummaryMode = Types.SummaryMode.AGGREGATE;
	        _this._checkableExpression = null;
	        _this._cellStyles = null; //new TreeCellStyleMap(this);
	        _this._editableMap = null; ///new TreeCellEditableMap(this);
	        _this._filters = {};
	        _this._filterRuntime = new ColumnFilter_1.ColumnFilterRuntime();
	        _this._filtered = false;
	        _this._sorter = new TreeItemSorter.TreeItemsSorter();
	        _this._sortFields = [];
	        _this._sortDirections = [];
	        _this._sortCases = [];
	        _this._visibleItems = new HierarchicalVisibleItems(_this);
	        _this._itemMap = [];
	        _this._itemCount = 0;
	        _this._summaryMap = null;
	        _this._checkableTag = null;
	        _this._filterLock = 0;
	        _this._addParentNodeOnFiltering = false;
	        return _this;
	    }
	    TreeItemProvider.prototype._doDispose = function () {
	        this._filters = null;
	        this._filterRuntime = null;
	        this._sorter = null;
	        this._sortFields = null;
	        this._sortDirections = null;
	        this._sortCases = null;
	        this._visibleItems = null;
	        this._itemMap = null;
	        this._summaryMap = null;
	        this._checkableExpression = null;
	        this._checkableTag = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // TreeDataCommandListener
	    //-------------------------------------------------------------------------
	    TreeItemProvider.prototype.getCommandStates = function (row) {
	        var item = this._itemMap[row.rowId];
	        return item["_extents"];
	    };
	    TreeItemProvider.prototype.setCommandStates = function (row, states) {
	        var item = this._itemMap[row.rowId];
	        item["_extents"] = states;
	    };
	    Object.defineProperty(TreeItemProvider.prototype, "expandWhenGrouping", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expandWhenGrouping */
	        get: function () {
	            return this._expandWhenGrouping;
	        },
	        set: function (value) {
	            if (value != this._expandWhenGrouping) {
	                this._expandWhenGrouping = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "footerWhenExpanded", {
	        /** footerWhenExpanded */
	        get: function () {
	            return this._footerWhenExpanded;
	        },
	        set: function (value) {
	            if (value != this._footerWhenExpanded) {
	                this._footerWhenExpanded = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "footerWhenCollapsed", {
	        /** footerWhenCollapsed */
	        get: function () {
	            return this._footerWhenCollapsed;
	        },
	        set: function (value) {
	            if (value != this._footerWhenCollapsed) {
	                this._footerWhenCollapsed = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "sorted", {
	        /** sorted */
	        get: function () {
	            return this._sortFields && this._sortFields.length > 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "labelComparer", {
	        /** labelComparer */
	        get: function () {
	            return this._labelComparer;
	        },
	        set: function (value) {
	            this._labelComparer = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "summaryMode", {
	        /** summaryMode */
	        get: function () {
	            return this._summaryMode;
	        },
	        set: function (value) {
	            if (value != this._summaryMode) {
	                this._summaryMode = value;
	                this.$_resetSummary();
	                this._fireRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "groupSummaryMode", {
	        /** groupSummaryMode */
	        get: function () {
	            return this._groupSummaryMode;
	        },
	        set: function (value) {
	            if (value != this._groupSummaryMode) {
	                this._groupSummaryMode = value;
	                this.$_resetGroupSummary();
	                this._fireRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "hideDeleted", {
	        /** hideDeleted */
	        get: function () {
	            return this["_hideDeleted"];
	        },
	        set: function (value) {
	            if (value != this["_hideDeleted"]) {
	                this["_hideDeleted"] = value;
	                this._saveAndRefresh();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "checkableExpression", {
	        /** checkableExpression */
	        get: function () {
	            return this._checkableExpression;
	        },
	        set: function (value) {
	            if (value != this._checkableExpression) {
	                this._checkableExpression = value;
	                if (this._checkableTag) {
	                    this._checkableTag.disconnect();
	                    this._checkableTag = null;
	                }
	                if (value) {
	                    this._checkableTag = new TreeCheckableTag(this, value);
	                    if (this.dataSource) {
	                        this._checkableTag.connect(this.dataSource);
	                    }
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeItemProvider.prototype.$_needSort = function () {
	        return this._sortFields && this._sortFields.length > 0 && this._sortMode == Types.SortMode.AUTO;
	    };
	    // addObserver(observer) {
	    // 	if (observer && this._observers.indexOf(observer) < 0) {
	    // 		this._observers.push(observer);
	    // 	}
	    // }
	    // removeObserver(observer) {
	    // 	var index = this._observers.indexOf(observer);
	    // 	if (index >= 0) {
	    // 		this._observers.splice(index, 1);
	    // 	}
	    // }
	    TreeItemProvider.prototype.insertItem = function (parent, item, index, after) {
	        var visibles = this._visibleItems;
	        if (parent.collapsed) {
	            visibles.expand(parent, false);
	        }
	        var i = visibles.indexOf(parent.getItem(index));
	        if (after) {
	            parent.insert(index + 1, item);
	            var cnt = visibles.count;
	            var lev = parent.level + 1;
	            while (++i < cnt) {
	                if (visibles.getItem(i).level <= lev) {
	                    break;
	                }
	            }
	            visibles.insert(item, i);
	        }
	        else {
	            parent.insert(index, item);
	            visibles.insert(item, i);
	        }
	    };
	    TreeItemProvider.prototype.appendItem = function (parent, item) {
	        var visibles = this._visibleItems;
	        if (parent.collapsed) {
	            visibles.expand(parent, false);
	        }
	        var i;
	        if (parent.count > 0) {
	            i = visibles.indexOf(parent.getItem(parent.count - 1));
	        }
	        else {
	            i = visibles.indexOf(parent);
	        }
	        var cnt = visibles.count;
	        var lev = parent.level;
	        while (++i < cnt) {
	            if (visibles.getItem(i).level <= lev) {
	                break;
	            }
	        }
	        parent.add(item);
	        visibles.insert(item, i);
	    };
	    TreeItemProvider.prototype.removeItem = function (item) {
	        this._visibleItems.remove(item);
	        item.parent.remove(item);
	    };
	    TreeItemProvider.prototype.$_calcLevel = function (item, level, visibleOnly) {
	        var i, child;
	        var cnt = item.count;
	        var lev = level;
	        for (i = 0; i < cnt; i++) {
	            child = item.getItem(i);
	            if (child) {
	                lev = Math.max(lev, level + 1);
	                if (!visibleOnly || child.expanded) {
	                    lev = Math.max(lev, this.$_calcLevel(child, level + 1, visibleOnly));
	                }
	            }
	        }
	        return lev;
	    };
	    TreeItemProvider.prototype.getLevels = function (visibleOnly) {
	        return this.$_calcLevel(this._rootItem, 0, visibleOnly);
	    };
	    TreeItemProvider.prototype.$_setExpanded = function (item, recursive, level) {
	        this._setExpanded(item, true);
	        this.dataSource.setHasChildren(item.row, false);
	        if (recursive) {
	            for (var i = 0, cnt = item.count; i < cnt; i++) {
	                var child = item.getItem(i);
	                if (child instanceof TreeItem && (child.expanded || child.level < level)) {
	                    this.$_setExpanded(child, true, level);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype._expandItem = function (item, force, recursive, level, fireEvents) {
	        if (item && (force || !item.expanded)) {
	            if (fireEvents && !this._fireExpanding(item)) {
	                return;
	            }
	            this._visibleItems.collapse(item);
	            this._visibleItems.expand(item, recursive, level);
	            this._resetItemIndicies(item === this._rootItem ? 0 : item.index);
	            this.$_setExpanded(item, recursive, level > 0 ? item.level + level : 1000000);
	            try {
	                this._fireRefresh();
	            }
	            finally {
	                if (fireEvents) {
	                    this._fireExpanded(item);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.expand = function (item, recursive, force, level) {
	        if (level === void 0) { level = 0; }
	        this._expandItem(item, force, recursive, level, true);
	    };
	    TreeItemProvider.prototype.expandAll = function (level) {
	        this._expandItem(this._rootItem, true, true, level > 0 ? level + 1 : 0, true);
	    };
	    TreeItemProvider.prototype.$_setCollapsed = function (item, recursive) {
	        this._setExpanded(item, false);
	        if (recursive) {
	            for (var i = 0, cnt = item.count; i < cnt; i++) {
	                var child = item.getItem(i);
	                if (child instanceof TreeItem) {
	                    this.$_setCollapsed(child, true);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype._collapseItem = function (item, force, recursive, fireEvents) {
	        if (item && (force || item.expanded)) {
	            if (fireEvents && !this._fireCollapsing(item)) {
	                return;
	            }
	            this._visibleItems.collapse(item);
	            this.$_setCollapsed(item, recursive);
	            if (item == this._rootItem) {
	                this._visibleItems.expand(this._rootItem, false);
	            }
	            this._resetItemIndicies(item === this._rootItem ? 0 : item.index);
	            try {
	                this._fireRefresh();
	            }
	            finally {
	                if (fireEvents) {
	                    this._fireCollapsed(item);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.collapse = function (item, recursive) {
	        this._collapseItem(item, false, recursive, true);
	    };
	    TreeItemProvider.prototype.collapseAll = function () {
	        this._collapseItem(this._rootItem, true, true, true);
	    };
	    TreeItemProvider.prototype.$_saveExpanded = function (map, item) {
	        for (var i = 0, cnt = item.count; i < cnt; i++) {
	            var child = item.getItem(i);
	            if (child) {
	                // child._extents = child.isExpanded() ? (child._extents | ITEM_EXT_SAVEEXPAND) : (child._extents & ~ITEM_EXT_SAVEEXPAND);
	                map[child.rowId] = GridItem_1.ITEM_EXT_FILTERED | (child.expanded ? GridItem_1.ITEM_EXT_SAVEEXPAND : 0);
	                if (child.count > 0) {
	                    this.$_saveExpanded(map, child);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.orderBy = function (fields, directions, textCases, fireEvent) {
	        if (fireEvent === void 0) { fireEvent = true; }
	        this._fireSort(fields, directions, textCases);
	        this._sortFields = [];
	        this._sortDirections = [];
	        this._sortCases = [];
	        var cnt = fields ? fields.length : 0;
	        var len = directions ? directions.length : 0;
	        var clen = textCases ? textCases.length : 0;
	        for (var i = 0; i < cnt; i++) {
	            this._sortFields.push(fields[i]);
	            if (len > i) {
	                this._sortDirections.push(directions[i]);
	            }
	            else if (len > 0) {
	                this._sortDirections.push(directions[len - 1]);
	            }
	            else {
	                this._sortDirections.push(Types.SortDirection.ASCENDING);
	            }
	            if (clen > i) {
	                this._sortCases.push(textCases[i]);
	            }
	            else if (clen > 0) {
	                this._sortCases.push(textCases[clen - 1]);
	            }
	            else {
	                this._sortCases.push(Types.SortCase.SENSITIVE);
	            }
	        }
	        var map = [];
	        this.$_saveExpanded(map, this._rootItem);
	        this.$_clearItems();
	        this.$_buildTree(map);
	        try {
	            if (fireEvent) {
	                this._fireRefresh();
	            }
	        }
	        finally {
	            this._fireSorted();
	        }
	    };
	    TreeItemProvider.prototype.getSortFields = function () {
	        return this._sortFields.concat();
	    };
	    TreeItemProvider.prototype.getSortDirections = function () {
	        return this._sortDirections.concat();
	    };
	    TreeItemProvider.prototype.getSortCases = function () {
	        return this._sortCases.concat();
	    };
	    TreeItemProvider.prototype.beginFiltering = function () {
	        this._filterLock++;
	    };
	    TreeItemProvider.prototype.$_prepareFiltering = function (map, item) {
	        var cnt = item["_dataRow"].count;
	        var rowId = item.rowId;
	        var filtered = rowId <= -1 ? true : this.$_selectItem(item);
	        for (var i = 0; i < cnt; i++) {
	            var child = new TreeItem(item["_dataRow"]["_children"][i]);
	            if (child && !this.dataSource.isHiddenRow(child.rowId)) {
	                filtered = this.$_prepareFiltering(map, child) || filtered;
	            }
	        }
	        map[rowId] = filtered && rowId >= 0 ? map[rowId] | GridItem_1.ITEM_EXT_FILTERED : map[rowId] & ~GridItem_1.ITEM_EXT_FILTERED;
	        return filtered;
	    };
	    TreeItemProvider.prototype.endFiltering = function (apply, filterCollection, filter) {
	        var prepareMap = [];
	        if (apply) {
	            // this.$_saveExpanded(prepareMap, this._rootItem); // expanded가 정리될때.
	            this._addParentNodeOnFiltering && this.$_prepareFiltering(prepareMap, this._rootItem);
	        }
	        if (this._filterLock > 0) {
	            this._filterLock = Math.max(0, this._filterLock - 1);
	            (apply && this._filterLock == 0) && this.applyFilters(prepareMap, filterCollection, filter);
	        }
	    };
	    TreeItemProvider.prototype.hasFilter = function (field) {
	        var filters = this._filters[field];
	        return filters ? filters.length > 0 : false;
	    };
	    TreeItemProvider.prototype.addFilter = function (field, refFilter) {
	        this._fireFilterAdded(field, refFilter.text);
	        var filters = this._filters[field];
	        if (!filters) {
	            filters = [];
	            this._filters[field] = filters;
	        }
	        var filter = new ColumnFilter_1.ColumnFilterRun(refFilter);
	        filters.push(filter);
	        // this.applyFilters();
	        return filter;
	    };
	    TreeItemProvider.prototype.removeFilter = function (field, filter) {
	        if (this._filtered && this._filters[field]) {
	            this._fireFilterRemoved(field, filter);
	            var filters = this._filters[field];
	            for (var i = filters.length; i--;) {
	                if (filters[i] === filter) {
	                    filters.splice(i, 1);
	                    this.applyFilters(null, null, null);
	                    break;
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.clearFilters = function (field) {
	        if (this._filtered && this._filters[field]) {
	            this._fireFilterCleared(field);
	            var filters = this._filters[field];
	            if (filters && filters.length > 0) {
	                filters.splice(0, filters.length);
	                this._filters[field] = null;
	                this.applyFilters(null, null, null);
	            }
	        }
	    };
	    TreeItemProvider.prototype.clearAllFilters = function () {
	        if (this._filtered) {
	            this._fireFilterAllCleared();
	            this._filters = {};
	            this.applyFilters(null, null, null);
	        }
	    };
	    TreeItemProvider.prototype.hasFilters = function () {
	        for (var fld in this._filters) {
	            var filters = this._filters[fld];
	            if (filters && filters.length > 0) {
	                return true;
	            }
	        }
	        return false;
	    };
	    TreeItemProvider.prototype.applyFilters = function (map, filterCollection, filter) {
	        var ds = this.dataSource;
	        var cnt = ds.fieldCount;
	        for (var fld in this._filters) {
	            if (Number(fld) >= cnt) {
	                this._filters[fld] = null;
	            }
	        }
	        this._filtered = this.hasFilters();
	        if (this._filtered) {
	            for (var f in this._filters) {
	                var filters = this._filters[f];
	                if (filters) {
	                    for (var i = filters.length; i--;) {
	                        filters[i].prepare(this._filterRuntime, ds);
	                    }
	                }
	            }
	        }
	        if (this._filterLock == 0) { // expanded가 정리될때.
	            this.$_clearItems();
	            this.$_buildTree(map);
	            try {
	                this._fireRefresh();
	            }
	            finally {
	                this._fireFiltered(filterCollection, filter);
	            }
	        }
	    };
	    TreeItemProvider.prototype.getItemByRow = function (row) {
	        return row ? this._itemMap[row.rowId] : null;
	    };
	    TreeItemProvider.prototype.getCheckedRows = function () {
	        function collectCheckedRows(parent, rows) {
	            if (parent instanceof TreeItem) {
	                for (var i = 0, cnt = parent.count; i < cnt; i++) {
	                    var item = parent.getItem(i);
	                    var r = void 0;
	                    item.checked && (r = item.row) && rows.push(r);
	                    collectCheckedRows(item, rows);
	                }
	            }
	        }
	        var rows = [];
	        collectCheckedRows(this._rootItem, rows);
	        return rows;
	    };
	    TreeItemProvider.prototype.getCheckedRowIds = function () {
	        function collectCheckedRows(parent, rows) {
	            if (parent instanceof TreeItem) {
	                for (var i = 0, cnt = parent.count; i < cnt; i++) {
	                    var item = parent.getItem(i);
	                    var r = void 0;
	                    if (item.checked && (r = item.dataRow) >= 0) {
	                        rows.push(r);
	                    }
	                    collectCheckedRows(item, rows);
	                }
	            }
	        }
	        var rows = [];
	        collectCheckedRows(this._rootItem, rows);
	        return rows;
	    };
	    TreeItemProvider.prototype.resetCheckables = function () {
	        if (this._checkableTag) {
	            this._checkableTag.clearRows();
	            this._fireRefresh();
	        }
	    };
	    TreeItemProvider.prototype.applyCheckables = function () {
	        if (this._checkableTag) {
	            this._checkableTag.setRows();
	        }
	        else {
	            TreeCheckableTag.clearCheckables(this);
	        }
	        this._fireRefresh();
	    };
	    TreeItemProvider.prototype.$_checkChildren = function (parent, checked, checkableOnly) {
	        for (var i = 0, cnt = parent.count; i < cnt; i++) {
	            var item = parent.getItem(i);
	            if (item) {
	                if (checkableOnly) {
	                    if (item.checkable) {
	                        this._setCheckItem(item, checked);
	                    }
	                }
	                else {
	                    this._setCheckItem(item, checked);
	                }
	            }
	            if (item instanceof TreeItem) {
	                this.$_checkChildren(item, checked, checkableOnly);
	            }
	        }
	    };
	    TreeItemProvider.prototype._clearChecked = function () {
	        this.$_checkChildren(this._rootItem, false, false);
	    };
	    TreeItemProvider.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent) {
	        if (visibleOnly) {
	            _super.prototype.checkAll.call(this, checked, visibleOnly, checkableOnly, checkEvent, false);
	        }
	        else {
	            this.$_checkChildren(this._rootItem, checked, checkableOnly);
	            checkEvent ? this._fireItemAllChecked(checked) : this._fireRefreshClient();
	        }
	    };
	    TreeItemProvider.prototype.hasCellstyle = function () {
	        return !this._cellStyles.isEmpty();
	    };
	    TreeItemProvider.prototype.setCellStyle = function (row, field, style) {
	        this._cellStyles.setCellStyle(row, field, style);
	    };
	    TreeItemProvider.prototype.setCellStyles = function (provider, rows, fieldMap) {
	        this._cellStyles.setCellStyles(provider, rows, fieldMap);
	    };
	    TreeItemProvider.prototype.removeCellStyle = function (style) {
	        this._cellStyles.removeCellStyle(style);
	    };
	    TreeItemProvider.prototype.clearCellStyles = function () {
	        this._cellStyles.clearCellStyles();
	    };
	    TreeItemProvider.prototype.checkCellStyle = function (rowId, field) {
	        return this._cellStyles.checkCellStyle(rowId, field);
	    };
	    TreeItemProvider.prototype.getCellStyle = function (dataRow, field) {
	        return this._cellStyles.getCellStyle(dataRow, field);
	    };
	    TreeItemProvider.prototype.setCellEditable = function (dataRow, column, value) {
	        this._editableMap.setEditable(dataRow, column, value);
	    };
	    TreeItemProvider.prototype.setCellReadOnly = function (dataRow, column, value) {
	        this._editableMap.setReadOnly(dataRow, column, value);
	    };
	    TreeItemProvider.prototype.getCellEditable = function (dataRow, column) {
	        return this._editableMap.getEditable(dataRow, column);
	    };
	    TreeItemProvider.prototype.getCellReadOnly = function (dataRow, column, value) {
	        return this._editableMap.getReadOnly(dataRow, column);
	    };
	    TreeItemProvider.prototype.setCellCursor = function (dataRow, column, value) {
	        this._editableMap.setCursor(dataRow, column, value);
	    };
	    TreeItemProvider.prototype.getCellCursor = function (dataRow, column) {
	        return this._editableMap.getCursor(dataRow, column);
	    };
	    TreeItemProvider.prototype.setCellEditor = function (dataRow, column, value) {
	        this._editableMap.setEditor(dataRow, column, value);
	    };
	    TreeItemProvider.prototype.getCellEditor = function (dataRow, column) {
	        return this._editableMap.getEditor(dataRow, column);
	    };
	    TreeItemProvider.prototype.clearEditableMap = function () {
	        return this._editableMap.clearEditableMap();
	    };
	    Object.defineProperty(TreeItemProvider.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._ds;
	        },
	        set: function (value) {
	            if (value === this._ds) {
	                return;
	            }
	            this.$_clearItems();
	            this.$_resetSummary();
	            if (this._ds) {
	                this._ds.removeTag(this._cellStyles);
	                this._ds.removeTag(this._editableMap);
	                this._ds.removeListener(this);
	                this._ds.unregisterCommandListener(this);
	            }
	            this._ds = value;
	            if (this._ds) {
	                this.$_buildTree(null);
	                this._ds.addTag(this._cellStyles);
	                this._ds.addTag(this._editableMap);
	                this._ds.addListener(this);
	                this._ds.registerCommandListener(this);
	            }
	            this._fireReset();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "itemCount", {
	        get: function () {
	            return this._visibleItems.count;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemProvider.prototype, "rowCount", {
	        get: function () {
	            return this._itemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeItemProvider.prototype._createRootItem = function () {
	        var root = new RootTreeItem(this);
	        this._setExpanded(root, true);
	        return root;
	    };
	    TreeItemProvider.prototype.getItem = function (index) {
	        if (index >= 0 && index < this._visibleItems.count) {
	            return this._visibleItems.getItem(index);
	        }
	        else {
	            return null;
	        }
	    };
	    TreeItemProvider.prototype.getItems = function (index, count) {
	        throw new Error("Method not implemented.");
	    };
	    TreeItemProvider.prototype.getItemOfRow = function (dataRow, force) {
	        throw new Error("Method not implemented.");
	    };
	    TreeItemProvider.prototype.$_collectItems = function (item, list) {
	        for (var i = 0, cnt = item.count; i < cnt; i++) {
	            var child = item.getItem(i);
	            if (child instanceof TreeItem) {
	                list.push(child);
	                this.$_collectItems(child, list);
	            }
	        }
	    };
	    TreeItemProvider.prototype.getAllItems = function () {
	        var items = [];
	        this.$_collectItems(this._rootItem, items);
	        return items;
	    };
	    TreeItemProvider.prototype.getSum = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.sum : NaN;
	    };
	    TreeItemProvider.prototype.getMax = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.max : NaN;
	    };
	    TreeItemProvider.prototype.getMin = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.min : NaN;
	    };
	    TreeItemProvider.prototype.getAvg = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.avg : NaN;
	    };
	    TreeItemProvider.prototype.getVar = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.vars : NaN;
	    };
	    TreeItemProvider.prototype.getVarp = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.varsp : NaN;
	    };
	    TreeItemProvider.prototype.getStdev = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? Math.sqrt(fs.vars) : NaN;
	    };
	    TreeItemProvider.prototype.getStdevp = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? Math.sqrt(fs.varsp) : NaN;
	    };
	    TreeItemProvider.prototype.getDataCount = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.dataCount : 0;
	    };
	    TreeItemProvider.prototype.getDataAvg = function (field) {
	        var fs = this.$_getSummary(field);
	        return fs ? fs.dataAvg : NaN;
	    };
	    TreeItemProvider.prototype.findItem = function (fields, values, options, startIndex, endIndex) {
	        var ds = this.dataSource;
	        if (!ds) {
	            return -1;
	        }
	        var rows = this.itemCount;
	        if (rows < 1) {
	            return -1;
	        }
	        var flds = Math.min(fields.length, values.length);
	        if (flds < 1) {
	            return -1;
	        }
	        var all = !options || options.allFields;
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < flds; c++) {
	            fieldTypes[c] = ds.getField(fields[c]).dataType;
	        }
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(this._visibleItems.count - 1, endIndex);
	        for (var i = startIndex; i <= endIndex; i++) {
	            var item = this._visibleItems.getItem(i);
	            var found = item.dataRow >= 0;
	            if (found) {
	                for (var c = 0; c < flds; c++) {
	                    var v = item.getData(fields[c]);
	                    switch (fieldTypes[c]) {
	                        case Types.ValueType.DATETIME:
	                        case Types.ValueType.DATE:
	                            if (values[c] instanceof Date) {
	                                found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                            }
	                            else {
	                                if (!dateConvert) {
	                                    var fmt = /[.]/.test(values[c]) ? "yyyy.MM.dd" : /[/]/.test(values[c]) ? "yyyy/MM/dd" : /[-]/.test(values[c]) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                    dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                }
	                                found = Utils_1.Utils.compareTextValue(values[c], v ? dateConvert.getText(v) : v, sensitive, partial);
	                            }
	                            break;
	                        default:
	                            found = Utils_1.Utils.compareTextValue(values[c], v, sensitive, partial);
	                            break;
	                    }
	                    if (found && !all) {
	                        return i;
	                    }
	                    if (!found && all) {
	                        break;
	                    }
	                }
	            }
	            if (found) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    TreeItemProvider.prototype.findCell = function (fields, value, options, startIndex, endIndex, startFieldIndex) {
	        var ds = this.dataSource;
	        if (!ds) {
	            return null;
	        }
	        var rows = this.itemCount;
	        if (rows < 1) {
	            return null;
	        }
	        var sensitive = options && options.caseSensitive;
	        var partial = options && options.partialMatch;
	        var fldCount = ds.fieldCount;
	        var fldLen = fields.length;
	        var dateConvert = null;
	        var fieldTypes = [];
	        for (var c = 0; c < fldCount; c++) {
	            fieldTypes[c] = ds.getField(c).dataType;
	        }
	        startIndex = Math.max(0, startIndex);
	        endIndex = Math.min(this._visibleItems.count - 1, endIndex);
	        startFieldIndex = Math.max(0, startFieldIndex);
	        if (startFieldIndex >= fields.length) {
	            startIndex++;
	            startFieldIndex = 0;
	        }
	        for (var i = startIndex; i <= endIndex; i++) {
	            var item = this._visibleItems.getItem(i);
	            var found = false;
	            if (item.dataRow >= 0) {
	                var c = (i > startIndex) ? 0 : startFieldIndex;
	                for (; c < fldLen; c++) {
	                    var f = fields[c];
	                    if (f >= 0 && f < fldCount) {
	                        var v = item.getData(f);
	                        switch (fieldTypes[f]) {
	                            case Types.ValueType.DATETIME:
	                            case Types.ValueType.DATE:
	                                if (value instanceof Date) {
	                                    found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                                }
	                                else {
	                                    if (!dateConvert) {
	                                        var fmt = /[.]/.test(value) ? "yyyy.MM.dd" : /[/]/.test(value) ? "yyyy/MM/dd" : /[-]/.test(value) ? "yyyy-MM-dd" : "yyyyMMdd";
	                                        dateConvert = new DateTimeConverter_1.DateTimeConverter(fmt);
	                                    }
	                                    found = Utils_1.Utils.compareTextValue(value, v ? dateConvert.getText(v) : v, sensitive, partial);
	                                }
	                                break;
	                            default:
	                                found = Utils_1.Utils.compareTextValue(value, v, sensitive, partial);
	                                break;
	                        }
	                        if (found) {
	                            var returnObj = {
	                                itemIndex: i,
	                                fieldIndex: f,
	                                searchFieldIndex: c
	                            };
	                            return returnObj;
	                        }
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeItemProvider.prototype.$_internalAddItem = function (parent, row, expandedMap) {
	        var item = TreeItem.getTemp(row);
	        var ds = this.dataSource;
	        if ((this.hideDeleted && RowState_1.isDeletedState(item.rowState)) || (ds.isHiddenRow(row.rowId))) {
	            item = null;
	        }
	        if (item && (expandedMap && (expandedMap[row.rowId] & GridItem_1.ITEM_EXT_FILTERED) || this.$_selectItem(item))) {
	            item = new TreeItem(row);
	            parent.insert(row.index, item);
	            this._itemCount++;
	            this._itemMap[row.rowId] = item;
	            return item;
	        }
	        return null;
	    };
	    TreeItemProvider.prototype.$_internalRemoveItem = function (item) {
	        if (item) {
	            item.parent.remove(item);
	            this._itemCount--;
	            this._itemMap[item.row.rowId] = undefined;
	        }
	    };
	    TreeItemProvider.prototype.$_internalRowStateChanged = function (item, refresh) {
	        if (refresh === void 0) { refresh = true; }
	        if (item) {
	            if (this.hideDeleted && RowState_1.isDeletedState(item.rowState)) {
	                var p = item.parent;
	                this.$_internalRemoveItem(item);
	                this.$_clearSummary();
	                if (p.expanded && p.visible) {
	                    this._visibleItems.remove(item);
	                    refresh = true;
	                }
	                refresh && this._fireRefresh();
	            }
	            else {
	                this._fireItemChanged(item);
	            }
	        }
	    };
	    TreeItemProvider.prototype.$_selectField = function (filters, item, field) {
	        for (var i = 0, cnt = filters.length; i < cnt; i++) {
	            var filter = filters[i];
	            if (filter.select(this._filterRuntime, item, field)) {
	                return true;
	            }
	        }
	        return false;
	    };
	    TreeItemProvider.prototype.$_selectItem = function (item) {
	        if (!item) {
	            return false;
	        }
	        for (var fld in this._filters) {
	            var filters = this._filters[fld];
	            if (filters && !this.$_selectField(filters, item, Number(fld))) {
	                return false;
	            }
	        }
	        return !!item && true;
	    };
	    TreeItemProvider.prototype._setItem = function (item, newItem) {
	        this._visibleItems.setItem(item.index, newItem);
	        this._resetItemIndex(item.index);
	    };
	    TreeItemProvider.prototype.$_resetVisibleItems = function () {
	        this._visibleItems["_clearAndInit"](this.fixedCount);
	        this._visibleItems.expand(this._rootItem, false);
	        this._setExpanded(this._rootItem, true);
	        this._resetItemIndicies(0);
	    };
	    TreeItemProvider.prototype.$_clearItems = function () {
	        this._visibleItems.clear();
	        this._rootItem.clear();
	        this._itemMap = [];
	        this._itemCount = 0;
	    };
	    TreeItemProvider.prototype.$_buildItems = function (parent, expandedMap) {
	        var row = parent.row;
	        var cnt = row.count;
	        for (var i = 0; i < cnt; i++) {
	            var child = row.getChild(i);
	            var item = this.$_internalAddItem(parent, child, expandedMap);
	            if (item) {
	                if (expandedMap) {
	                    // item._extents = expandedMap[child.rowId] ? (expandedMap[child.rowId] & ~ITEM_EXT_SAVEEXPAND) : 0;
	                    this._setExpanded(item, (expandedMap[child.rowId] & GridItem_1.ITEM_EXT_SAVEEXPAND) != 0);
	                }
	                if (child.count > 0) {
	                    this.$_buildItems(item, expandedMap);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.$_sortItem = function (parent) {
	        var cnt = parent.count;
	        if (cnt > 1) {
	            this.$_sort(parent, 0, 0, cnt - 1);
	        }
	        for (var i = 0; i < cnt; i++) {
	            var child = parent.getItem(i);
	            if (child instanceof TreeItem) {
	                this.$_sortItem(child);
	            }
	        }
	    };
	    TreeItemProvider.prototype.$_sort = function (parent, level, startIndex, endIndex) {
	        var field = this._sortFields[level];
	        var dir = this._sortDirections[level];
	        var ds = this.dataSource;
	        var ignoreCase = this._sortCases[level] == Types.SortCase.INSENSITIVE;
	        this._sorter.run(parent, field, dir, ignoreCase, startIndex, endIndex, level + 1 == this._sortFields.length);
	        var t = ds.getField(field).dataType;
	        var equalFunc;
	        if (t == Types.ValueType.TEXT && ignoreCase) {
	            equalFunc = ds["equalTexts"].bind(ds);
	        }
	        else {
	            equalFunc = ds["equalValues"].bind(ds);
	        }
	        if (level + 1 < this._sortFields.length) {
	            var i = startIndex;
	            var pi = i;
	            while (i < endIndex) {
	                i++;
	                if (!equalFunc(field, parent.getItem(i).row, parent.getItem(i - 1).row)) {
	                    this.$_sort(parent, level + 1, pi, i - 1);
	                    pi = i;
	                }
	            }
	            if (pi < endIndex) {
	                this.$_sort(parent, level + 1, pi, endIndex);
	            }
	        }
	    };
	    TreeItemProvider.prototype.$_buildTree = function (expandedMap) {
	        var ds = this.dataSource;
	        this._rootItem["_dataRow"] = ds.rootRow;
	        this._itemMap[this._rootItem["_dataRow"].rowId] = this._rootItem;
	        this.$_buildItems(this._rootItem, expandedMap);
	        this.$_clearSummary();
	        var flds = ds.fieldCount;
	        var sortFlds = this._sortFields;
	        var sortDirs = this._sortDirections;
	        var sortCases = this._sortCases;
	        for (var i = sortFlds.length; i--;) {
	            if (sortFlds[i] < 0 || sortFlds[i] >= flds) {
	                sortFlds.splice(i, 1);
	                sortDirs.splice(i, 1);
	                sortCases.splice(i, 1);
	            }
	        }
	        if (this.sorted && this._rootItem.count > 0) {
	            this.$_sortItem(this._rootItem);
	        }
	        this.$_resetVisibleItems();
	        if (this._checkableTag && (!expandedMap || expandedMap.length <= 0)) {
	            this._checkableTag.setRows();
	        }
	    };
	    TreeItemProvider.prototype.$_resetSummary = function () {
	        this._summaryMap = [];
	    };
	    TreeItemProvider.prototype.$_resetGroupSummary = function () {
	    };
	    TreeItemProvider.prototype.$_clearSummary = function () {
	        if (this._summaryMap) {
	            for (var i = this._summaryMap.length; i--;) {
	                this._summaryMap[i] && this._summaryMap[i].clear();
	            }
	        }
	    };
	    TreeItemProvider.prototype.$_getSummary = function (field) {
	        var summary = this._summaryMap[field];
	        if (!summary) {
	            var ds = this.dataSource;
	            if (ds && ds.canSummarize(field)) {
	                summary = new FieldSummary_1.FieldSummary(field);
	                this._summaryMap[field] = summary;
	            }
	        }
	        if (summary && summary.count == 0 && this.itemCount > 0) {
	            this.$_summarize(summary);
	        }
	        return summary;
	    };
	    TreeItemProvider.prototype.$_summarize = function (summary) {
	        var ds = this.dataSource;
	        if (ds) {
	            if (this._filtered || this.hideDeleted || ds.hiddenCount > 0) {
	                var items = this._rootItem.getDescendants(false);
	                var cnt = items.length;
	                var rows = [];
	                for (var i = 0; i < cnt; i++) {
	                    var item = items[i];
	                    if (item instanceof TreeItem && !ds.isHiddenRow(item.rowId)) {
	                        rows.push(item.row);
	                    }
	                }
	                summary.count = rows.length;
	                ds.summarizeRange(summary, rows, this.summaryMode == Types.SummaryMode.STATISTICAL);
	            }
	            else {
	                summary.count = ds.rowCount;
	                ds.summarize(summary, this.summaryMode == Types.SummaryMode.STATISTICAL);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    TreeItemProvider.prototype._fireItemChanged = function (item) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider.ITEM_CHANGED, item);
	        }
	    };
	    TreeItemProvider.prototype._fireExpanding = function (item) {
	        if (this["_eventLock"] <= 0) {
	            return this.fireConfirmEvent(TreeItemProvider.EXPANDING, item);
	        }
	        return true;
	    };
	    TreeItemProvider.prototype._fireExpanded = function (item) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider.EXPANDED, item);
	        }
	    };
	    TreeItemProvider.prototype._fireCollapsing = function (item) {
	        if (this["_eventLock"] <= 0) {
	            return this.fireConfirmEvent(TreeItemProvider.COLLAPSING, item);
	        }
	        return true;
	    };
	    TreeItemProvider.prototype._fireCollapsed = function (item) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider.COLLAPSED, item);
	        }
	    };
	    TreeItemProvider.prototype._fireParentChanging = function (itemIndex, parent, childIndex) {
	        if (this["_eventLock"] <= 0) {
	            return this.fireConfirmEvent(TreeItemProvider.PARENT_CHANGING, itemIndex, parent, childIndex);
	        }
	        return true;
	    };
	    TreeItemProvider.prototype._fireParentChanged = function (item, oldIndex, parent) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider.PARENT_CHANGED, item, oldIndex, parent);
	        }
	    };
	    TreeItemProvider.prototype._refreshItems = function () {
	        this.$_clearItems();
	        this.$_buildTree(null);
	        this._fireRefresh();
	    };
	    TreeItemProvider.prototype._saveAndRefresh = function () {
	        var save = [];
	        this.$_saveExpanded(save, this._rootItem);
	        this.$_clearItems();
	        this.$_buildTree(save);
	        this._fireRefresh();
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    TreeItemProvider.prototype.onDataSourceCommandStackChanged = function (ds, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    TreeItemProvider.prototype.onTreeDataProviderDisposed = function (ds) {
	        ds.removeTag(this._cellStyles);
	        this.$_clearItems();
	        this.$_resetSummary();
	        this._fireReset();
	        this.dataSource = null;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderReset = function (provider) {
	        this.$_clearItems();
	        this.$_resetSummary();
	        this.$_buildTree(null);
	        this._fireReset();
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRefresh = function (provider) {
	        this._refreshItems();
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRefreshClient = function (provider) {
	        this._fireRefreshClient();
	    };
	    TreeItemProvider.prototype.onDataProvderCleared = function (provider) {
	        this._refreshItems();
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowCountChanged = function (provider, newCount) {
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowAdding = function (provider, row, index) {
	        return true;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowAdded = function (provider, row) {
	        if (this.$_needSort()) {
	            this._saveAndRefresh();
	        }
	        else {
	            var p = this._itemMap[row.parent.rowId];
	            var item = this.$_internalAddItem(p, row, null);
	            if (item) {
	                this.$_buildItems(item, null);
	                this.$_clearSummary();
	                if (p.expanded) {
	                    this._expandItem(p, true, false, 0, false);
	                }
	                else {
	                    this._fireItemChanged(p);
	                }
	            }
	            else { // filter등에 의해서 item이 제거되는 경우 itemIndicies를 다시 설정해 주어야 한다.
	                this.$_resetVisibleItems();
	            }
	        }
	        if (this._checkableTag) {
	            this._checkableTag.addRow(row, false);
	            if (row.parent.level > 0) {
	                this._checkableTag.addRow(row.parent, false);
	            }
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowsAdded = function (provider, parent, rows) {
	        if (this.$_needSort()) {
	            this._saveAndRefresh();
	            return;
	        }
	        var p = this._itemMap[parent.rowId];
	        var cnt;
	        if (p && rows && (cnt = rows.length) > 0) {
	            for (var i = 0; i < cnt; i++) {
	                var row = rows[i];
	                var item = this.$_internalAddItem(p, row, null);
	                if (item) {
	                    this.$_buildItems(item, null);
	                }
	            }
	            this.$_clearSummary();
	            if (p.expanded) {
	                this._expandItem(p, true, false, 0, false);
	            }
	            else {
	                this._fireItemChanged(p);
	            }
	            if (this._checkableTag) {
	                this._checkableTag.addRows(rows);
	                if (parent.level > 0) {
	                    this._checkableTag.addRow(parent);
	                }
	            }
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowRemoving = function (provider, row) {
	        return true;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowRemoved = function (provider, row) {
	        var item = this._itemMap[row.rowId];
	        if (item) {
	            var p = item.parent;
	            this.$_internalRemoveItem(item);
	            this.$_clearSummary();
	            if (p.expanded && p.visible) {
	                this._visibleItems.remove(item);
	                this._fireRefresh();
	            }
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowsRemoving = function (provider, rows) {
	        return true;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowsRemoved = function (provider, rows) {
	        var cnt = rows.length;
	        var removed = false;
	        for (var i = 0; i < cnt; i++) {
	            var row = rows[i];
	            var item = this._itemMap[row.rowId];
	            if (item) {
	                var p = item.parent;
	                this.$_internalRemoveItem(item);
	                if (p.expanded && p.visible) {
	                    this._visibleItems.remove(item);
	                    removed = true;
	                }
	            }
	        }
	        this.$_clearSummary();
	        if (removed) {
	            this._fireRefresh();
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowUpdating = function (provider, row) {
	        return true;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowUpdated = function (provider, row) {
	        if (this.$_needSort()) {
	            this._saveAndRefresh();
	        }
	        else {
	            var item = this._itemMap[row.rowId];
	            this.$_clearSummary();
	            this._fireItemUpdated(item);
	        }
	        if (this._checkableTag) {
	            this._checkableTag.updateRow(row);
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderValueChanging = function (provider, row, field) {
	        return true;
	    };
	    TreeItemProvider.prototype.onTreeDataProviderValueChanged = function (provider, row, field) {
	        if (this.$_needSort()) {
	            this._saveAndRefresh();
	        }
	        else {
	            var item = this._itemMap[row.rowId];
	            this.$_clearSummary();
	            this._fireItemUpdated(item);
	        }
	        if (this._checkableTag) {
	            this._checkableTag.updateRow(row);
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderIconIndexChanged = function (provider, row) {
	        var item = this._itemMap[row.rowId];
	        if (item && item.isVisible()) {
	            this._fireItemChanged(item);
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderHasChildrenChanged = function (provider, row) {
	        var item = this._itemMap[row.rowId];
	        if (item && item.isVisible()) {
	            this._fireItemChanged(item);
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowStateChanged = function (provider, row, refresh) {
	        var item = this._itemMap[row.rowId];
	        this.$_internalRowStateChanged(item, refresh);
	        if (this._checkableTag) {
	            this._checkableTag.updateRow(row);
	        }
	        !item && refresh && this._saveAndRefresh();
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowStatesChanged = function (provider, rows) {
	        var len = rows.length;
	        var saveRefresh = false;
	        if (len == 1) {
	            var row = rows[0];
	            var item = this._itemMap[row.rowId];
	            saveRefresh = !item;
	            this.$_internalRowStateChanged(item);
	            if (this._checkableTag) {
	                this._checkableTag.updateRow(row);
	            }
	            saveRefresh && this._saveAndRefresh();
	        }
	        else if (len > 0) {
	            var removed = false;
	            if (this.hideDeleted) {
	                for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                    var item = this._itemMap[rows[i].rowId];
	                    saveRefresh = saveRefresh || !item;
	                    if (item && RowState_1.isDeletedState(item.rowState)) {
	                        var p = item.parent;
	                        this.$_internalRemoveItem(item);
	                        if (p.expanded && p.visible) {
	                            this._visibleItems.remove(item);
	                        }
	                        removed = true;
	                    }
	                }
	            }
	            if (this._checkableTag) {
	                this._checkableTag.changeStates(rows);
	            }
	            if (removed) {
	                this.$_clearSummary();
	            }
	            saveRefresh ? this._saveAndRefresh() : this._fireRefresh();
	            // this._fireRefresh();
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowSiblingMoved = function (provider, row, delta) {
	        if (!this.$_needSort()) { // sort중에는 row이동이 안된다.
	            var item = this._itemMap[row.rowId];
	            if (item) {
	                var parent_1 = item.parent;
	                parent_1.moveChild(item.childIndex, delta);
	                this.$_resetVisibleItems();
	                this._fireRefresh();
	            }
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowParentChanged = function (provider, row, parent, childIndex) {
	        var item = this._itemMap[row.rowId];
	        if (item) {
	            var p = this._itemMap[parent.rowId];
	            if (this.$_needSort()) { // sort중일때는 childIndex가 의미가 없다. 마지막으로 붙인다.
	                childIndex = p ? p.count() : 0;
	            }
	            item.changeParent(p, childIndex);
	            this.$_resetVisibleItems();
	            this._fireRefresh();
	        }
	    };
	    TreeItemProvider.prototype.onTreeDataProviderRowHiddenChanged = function (provider, rows, hidden) {
	        if (hidden) { // 숨기는 경우이다.
	            var changed = false;
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                var rowId = rows[i];
	                var item = this._itemMap[rowId];
	                if (item) {
	                    var p = item.parent;
	                    this.$_internalRemoveItem(item);
	                    if (p.expanded && p.visible) {
	                        this._visibleItems.remove(item);
	                    }
	                    changed = true;
	                }
	            }
	            if (changed) {
	                this.$_clearSummary();
	            }
	            this._fireRefresh();
	        }
	        else {
	            this._saveAndRefresh();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    TreeItemProvider.ITEM_CHANGED = "onTreeItemProviderItemChanged";
	    TreeItemProvider.EXPANDING = "onTreeItemProviderExpanding";
	    TreeItemProvider.EXPANDED = "onTreeItemProviderExpanded";
	    TreeItemProvider.COLLAPSING = "onTreeItemProviderCollapsing";
	    TreeItemProvider.COLLAPSED = "onTreeItemProviderCollapsed";
	    TreeItemProvider.PARENT_CHANGING = "onTreeItemProviderParentChanging";
	    TreeItemProvider.PARENT_CHANGED = "onTreeItemProviderParentChanged";
	    return TreeItemProvider;
	}(ItemProvider_1.ItemProvider));
	exports.TreeItemProvider = TreeItemProvider;
	});

	unwrapExports(TreeItemProvider_1);
	var TreeItemProvider_2 = TreeItemProvider_1.TreeItemFooter;
	var TreeItemProvider_3 = TreeItemProvider_1.TreeItem;
	var TreeItemProvider_4 = TreeItemProvider_1.TreeItemProvider;

	var Point_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Point.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var Point = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function Point(x, y) {
	        if (x === void 0) { x = 0; }
	        if (y === void 0) { y = 0; }
	        this.x = x;
	        this.y = y;
	    }
	    Point.empty = function () {
	        return new Point();
	    };
	    Point.create = function (x, y) {
	        if (x === void 0) { x = 0; }
	        if (y === void 0) { y = 0; }
	        return new Point(x, y);
	    };
	    Object.defineProperty(Point.prototype, "isEmpty", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** isEmpty */
	        get: function () {
	            return this.x === 0 || this.y === 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Point.prototype.clone = function () {
	        return new Point(this.x, this.y);
	    };
	    Point.prototype.equals = function (sz) {
	        return sz === this
	            || sz && this.x === sz.x && this.y === sz.y;
	    };
	    Point.prototype.setEmpty = function () {
	        this.x = this.y = 0;
	        return this;
	    };
	    Point.prototype.set = function (x, y) {
	        this.x = x;
	        this.y = y;
	        return this;
	    };
	    Point.prototype.round = function () {
	        var pt = this.clone();
	        pt.x >>>= 0;
	        pt.y >>>= 0;
	        return pt;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    Point.prototype.toString = function () {
	        return "{x: " + this.x + ", y: " + this.y + "}";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    Point.EMPTY = new Point();
	    return Point;
	}());
	exports.Point = Point;
	});

	unwrapExports(Point_1);
	var Point_2 = Point_1.Point;

	var VisualElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// VisualElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var VisualElement = /** @class */ (function (_super) {
	    __extends(VisualElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function VisualElement(name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._x = 0;
	        _this._y = 0;
	        _this._width = 0;
	        _this._height = 0;
	        _this._visible = true;
	        _this._mouseEnabled = true;
	        _this._elements = null;
	        _this._dirty = true;
	        _this._hovered = false;
	        _this._className = "";
	        _this._name = name;
	        var dom = _this._dom = _this._createDom();
	        dom && _this._initDom(dom);
	        return _this;
	    }
	    VisualElement.prototype._doDispose = function () {
	        this._removeEventListeners(this._dom);
	        Utils_1.Utils.detach(this._dom);
	        this._dom = null;
	        if (this._elements) {
	            for (var _i = 0, _a = this._elements; _i < _a.length; _i++) {
	                var child = _a[_i];
	                child.dispose();
	            }
	            this._elements.length = 0;
	        }
	        this._parent = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(VisualElement.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "container", {
	        /** container */
	        get: function () {
	            return this._parent && this._parent.container;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "parent", {
	        /** parent */
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "childCount", {
	        /** childCount */
	        get: function () {
	            return this._elements ? this._elements.length : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "isSingleton", {
	        /** isSingleton */
	        get: function () {
	            return this._parent && this._parent.childCount == 1 && this._parent._elements[0] === this;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "x", {
	        /** x */
	        get: function () {
	            return this._x;
	        },
	        set: function (value) {
	            if (value != this._x) {
	                this._x = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "y", {
	        /** y */
	        get: function () {
	            return this._y;
	        },
	        set: function (value) {
	            if (value != this._y) {
	                this._y = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "width", {
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._width) {
	                this._width = value;
	                this.sizeChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "height", {
	        /** height */
	        get: function () {
	            return this._height;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._height) {
	                this._height = value;
	                this.sizeChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "right", {
	        /** right */
	        get: function () {
	            return this._x + this._width;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "bottom", {
	        /** bottom */
	        get: function () {
	            return this._y + this._height;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "position", {
	        /** position */
	        get: function () {
	            return new Point_1.Point(this._x, this._y);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "bounds", {
	        /** bounds */
	        get: function () {
	            return new Rectangle_1.Rectangle(this._x, this._y, this._width, this._height);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "clientRect", {
	        /** clientRect */
	        get: function () {
	            return new Rectangle_1.Rectangle(0, 0, this._width, this._height);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "visible", {
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	                if (this._dom) {
	                    this._dom.style.display = this._visible ? this._getCssDisplay() : "none";
	                }
	                this.invalidate(true);
	                this._visibleChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "mouseEnabled", {
	        /** mouseEnabled */
	        get: function () {
	            return this._mouseEnabled;
	        },
	        set: function (value) {
	            this._mouseEnabled = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "hovered", {
	        /** hovered */
	        get: function () {
	            return this._hovered;
	        },
	        set: function (value) {
	            if (value != this._hovered) {
	                this._hovered = value;
	                this._hoverChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "isLayer", {
	        /** isLayer */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "clickable", {
	        /** clickable */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "mouseX", {
	        /** mouseX */
	        get: function () {
	            var container = this.container;
	            if (container) {
	                var x = container["_currentX"];
	                var p = this;
	                while (p && p !== undefined) {
	                    x -= p._x;
	                    p = p._parent;
	                }
	                return x;
	            }
	            else {
	                return NaN;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "mouseY", {
	        /** mouseY */
	        get: function () {
	            var container = this.container;
	            if (container) {
	                var y = container["_currentY"];
	                var p = this;
	                while (p && p !== undefined) {
	                    y -= p._y;
	                    p = p._parent;
	                }
	                return y;
	            }
	            else {
	                return NaN;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualElement.prototype, "style", {
	        /** style */
	        get: function () {
	            return this._dom.style;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    VisualElement.prototype.canHover = function () {
	        return true;
	    };
	    VisualElement.prototype.getChildren = function () {
	        return this._elements && this._elements.concat();
	    };
	    VisualElement.prototype.getChild = function (index) {
	        return this._elements[index];
	    };
	    VisualElement.prototype.indexOf = function (element) {
	        return this._elements ? this._elements.indexOf(element) : -1;
	    };
	    VisualElement.prototype.contains = function (element) {
	        return this._elements && this._elements.indexOf(element) >= 0;
	    };
	    VisualElement.prototype.getAncestor = function (cls) {
	        var p = this._parent;
	        while (p) {
	            if (p instanceof cls) {
	                return p;
	            }
	            p = p._parent;
	        }
	        return null;
	    };
	    VisualElement.prototype.addChild = function (child) {
	        return this.insertChild(-1, child);
	    };
	    VisualElement.prototype.insertChild = function (index, child) {
	        if (child && !this.contains(child)) {
	            var elts = this._elements || [];
	            var childDom = child._dom;
	            if (index < 0 || index >= elts.length) {
	                this._dom && childDom && this._dom.appendChild(childDom);
	                elts.push(child);
	            }
	            else {
	                if (childDom) {
	                    var sib = this._elements[index]._dom;
	                    this._dom && sib && this._dom.insertBefore(childDom, sib);
	                }
	                elts.splice(index, 0, child);
	            }
	            this._elements = elts;
	            child._parent = this;
	            child.$_attached(this);
	            this.invalidate();
	            return true;
	        }
	        return false;
	    };
	    VisualElement.prototype.removeChild = function (child) {
	        if (child && this._elements) {
	            var i = this._elements.indexOf(child);
	            if (i >= 0) {
	                return this.removeChildAt(i) === child;
	            }
	        }
	        return false;
	    };
	    VisualElement.prototype.removeChildAt = function (index) {
	        if (index >= 0 && index < this.childCount) {
	            var child = this._elements[index];
	            this._elements.splice(index, 1);
	            this._dom && child._dom && this._dom.removeChild(child._dom);
	            child._parent = null;
	            child._dirty = false;
	            child.$_detached(this);
	            this.invalidate();
	            return child;
	        }
	        return null;
	    };
	    VisualElement.prototype.removeLast = function () {
	        if (this._elements && this._elements.length > 0) {
	            return this.removeChildAt(this._elements.length - 1);
	        }
	        return null;
	    };
	    VisualElement.prototype.clear = function () {
	        var elts = this._elements;
	        var cnt = elts ? elts.length : 0;
	        if (cnt > 0) {
	            for (var _i = 0, elts_1 = elts; _i < elts_1.length; _i++) {
	                var elt = elts_1[_i];
	                elt._parent = null;
	                elt.$_detached(this);
	            }
	            this._elements = [];
	            if (this._dom) {
	                while (this._dom.lastChild) {
	                    this._dom.removeChild(this._dom.lastChild);
	                }
	            }
	            this.invalidate();
	            return true;
	        }
	        return false;
	    };
	    VisualElement.prototype.hideAll = function () {
	        if (this._elements) {
	            for (var _i = 0, _a = this._elements; _i < _a.length; _i++) {
	                var elt = _a[_i];
	                elt.visible = false;
	            }
	        }
	    };
	    VisualElement.prototype.invalidate = function (force, invalidateChildren) {
	        if (force === void 0) { force = false; }
	        if (invalidateChildren === void 0) { invalidateChildren = false; }
	        if (force || !this._dirty) {
	            this._dirty = true;
	            var container = this.container;
	            if (container) {
	                container.invalidateElement(this);
	            }
	        }
	        if (invalidateChildren) {
	            if (this._elements) {
	                for (var _i = 0, _a = this._elements; _i < _a.length; _i++) {
	                    var child = _a[_i];
	                    child.invalidate(force, true);
	                }
	            }
	        }
	    };
	    VisualElement.prototype.validate = function () {
	        this._dirty = false;
	    };
	    VisualElement.prototype.invalidateLayout = function () {
	        var container = this.container;
	        if (container) {
	            container["invalidateLayout"]();
	        }
	    };
	    VisualElement.prototype.getBounds = function (r) {
	        if (r === void 0) { r = null; }
	        if (r) {
	            return r.set(this._x, this._y, this._width, this._height);
	        }
	        else {
	            return new Rectangle_1.Rectangle(this._x, this._y, this._width, this._height);
	        }
	    };
	    VisualElement.prototype.getClientRect = function (r) {
	        if (r === void 0) { r = null; }
	        if (r) {
	            return r.set(0, 0, this._width, this._height);
	        }
	        else {
	            return new Rectangle_1.Rectangle(0, 0, this._width, this._height);
	        }
	    };
	    VisualElement.prototype.containsInBounds = function (x, y) {
	        return (x >= this._x && x < this._x + this._width && y >= this._y && y < this._y + this._height);
	    };
	    VisualElement.prototype.containsInClient = function (x, y) {
	        return (x >= 0 && x < this._width && y >= 0 && y < this._height);
	    };
	    VisualElement.prototype.parentToElement = function (parent, x, y) {
	        var p = this;
	        while (p && p != parent) {
	            x -= p._x;
	            y -= p._y;
	            p = p._parent;
	        }
	        return new Point_1.Point(x, y);
	    };
	    VisualElement.prototype.translateBy = function (descendant, r) {
	        if (r === void 0) { r = null; }
	        var p = descendant;
	        if (!r) {
	            r = new Rectangle_1.Rectangle(0, 0, this._width, this._height);
	        }
	        while (p && p !== this) {
	            r.x -= p._x;
	            r.y -= p._y;
	            p = p._parent;
	        }
	        return r;
	    };
	    VisualElement.prototype.topBy = function (parent, top) {
	        var y = this._y + top;
	        var p = this._parent;
	        while (p && p !== parent) {
	            y += p._y;
	            p = p._parent;
	        }
	        return y;
	    };
	    VisualElement.prototype.boundsBy = function (parent, r) {
	        if (r === void 0) { r = null; }
	        var x = this._x;
	        var y = this._y;
	        var p = this._parent;
	        if (r) {
	            x += r.x;
	            y += r.y;
	        }
	        while (p && p !== parent) {
	            x += p._x;
	            y += p._y;
	            p = p._parent;
	        }
	        return r ? new Rectangle_1.Rectangle(x, y, r.width, r.height) : new Rectangle_1.Rectangle(x, y, this._width, this._height);
	    };
	    VisualElement.prototype.boundsByContainer = function (r) {
	        if (r === void 0) { r = null; }
	        var x = this._x;
	        var y = this._y;
	        if (r) {
	            x += r.x;
	            y += r.y;
	        }
	        var p = this._parent;
	        while (p && p._x !== undefined) {
	            x += p._x;
	            y += p._y;
	            p = p._parent;
	        }
	        return r ? new Rectangle_1.Rectangle(x, y, r.width, r.height) : new Rectangle_1.Rectangle(x, y, this._width, this._height);
	    };
	    VisualElement.prototype.boundsByScreen = function (r) {
	        if (r === void 0) { r = null; }
	        r = this.boundsByContainer(r);
	        r = this.container.toScreen(r);
	        return r;
	    };
	    VisualElement.prototype.containerToElement = function (x, y) {
	        var p = this;
	        while (p) {
	            x -= p._x;
	            y -= p._y;
	            p = p._parent;
	        }
	        return new Point_1.Point(x, y);
	    };
	    VisualElement.prototype.hitTest = function (x, y) {
	        return x >= 0 && x < this._width && y >= 0 && y < this._height;
	    };
	    VisualElement.prototype.findChildAt = function (x, y, hitTesting) {
	        var elts = this._elements;
	        var cnt = elts ? elts.length : 0;
	        if (cnt > 0) {
	            for (var i = cnt - 1; i >= 0; i--) {
	                var elt = elts[i];
	                if (elt.visible) {
	                    var cx = x - elt._x;
	                    var cy = y - elt._y;
	                    if (hitTesting || elt._mouseEnabled) {
	                        if (elt.isLayer || elt.hitTest(cx, cy)) {
	                            var child = elt.findChildAt(cx, cy, hitTesting);
	                            if (child) {
	                                return child;
	                            }
	                            if (!elt.isLayer && elt._mouseEnabled) {
	                                return elt;
	                            }
	                        }
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    VisualElement.prototype.move = function (x, y) {
	        if (x != this._x || y != this._y) {
	            this._x = x;
	            this._y = y;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.resize = function (width, height) {
	        if (width != this._width || height != this._height) {
	            this._width = width;
	            this._height = height;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.setBounds = function (x, y, width, height) {
	        if (x != this._x || y != this._y || width != this._width || height != this._height) {
	            this._x = x;
	            this._y = y;
	            this._width = width;
	            this._height = height;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.setBoundsI = function (x, y, width, height) {
	        x >>= 0;
	        y >>= 0;
	        width >>= 0;
	        height >>= 0;
	        if (x != this._x || y != this._y || width != this._width || height != this._height) {
	            this._x = x;
	            this._y = y;
	            this._width = width;
	            this._height = height;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.setRect = function (r) {
	        if (r.x != this._x || r.y != this._y || r.width != this._width || r.height != this._height) {
	            this._x = r.x;
	            this._y = r.y;
	            this._width = r.width;
	            this._height = r.height;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.setRectI = function (r) {
	        var x = r.x >> 0;
	        var y = r.y >> 0;
	        var width = r.width >> 0;
	        var height = r.height >> 0;
	        if (x != this._x || y != this._y || width != this._width || height != this._height) {
	            this._x = x;
	            this._y = y;
	            this._width = width;
	            this._height = height;
	            this.invalidate();
	        }
	    };
	    VisualElement.prototype.draw = function () {
	        if (this._dirty && this._dom) {
	            this._beforeDraw(this._dom);
	            this._doDraw(this._dom);
	            this._dirty = false;
	        }
	    };
	    VisualElement.prototype.resetSize = function () {
	        this._dom && this._setSizeStyle(this._dom.style);
	    };
	    VisualElement.prototype.getHtml = function () {
	        return this._dom && this._dom.outerHTML;
	    };
	    VisualElement.prototype.setImportantStyle = function (style, value) {
	        this._dom.style.setProperty(style, value, "important");
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    VisualElement.prototype._createDom = function () {
	        return document.createElement("div");
	    };
	    VisualElement.prototype._initDom = function (dom) {
	        var css = dom.style;
	        // css["-webkit-print-color-adjust"] = "exact"; // for chrome printing
	        css.position = "absolute";
	        css.boxSizing = "border-box";
	        // css.padding = "0px";
	        // css.margin = "0px";
	        this._addEventListeners(dom);
	    };
	    VisualElement.prototype._addEventListeners = function (dom) {
	    };
	    VisualElement.prototype._removeEventListeners = function (dom) {
	    };
	    VisualElement.prototype.$_attached = function (parent) {
	        this._doAttached(parent);
	    };
	    VisualElement.prototype._doAttached = function (parent) {
	    };
	    VisualElement.prototype.$_detached = function (parent) {
	        this._doDetached(parent);
	    };
	    VisualElement.prototype._doDetached = function (parent) {
	    };
	    VisualElement.prototype._setSizeStyle = function (css) {
	        css.width = this._width + "px";
	        css.height = this._height + "px";
	    };
	    VisualElement.prototype._getCssDisplay = function () {
	        return "block";
	    };
	    VisualElement.prototype.resetClassName = function () {
	        this._setClassName(this._dom);
	    };
	    VisualElement.prototype._setClassName = function (dom) {
	        var sel = this._getCssSelector();
	        if (sel != this._className) {
	            this._className = sel;
	            (dom || this._dom).className = sel || '';
	        }
	    };
	    VisualElement.prototype._beforeDraw = function (dom) {
	        this._setClassName(dom);
	        var css = dom.style;
	        css.left = this._x + "px";
	        css.top = this._y + "px";
	        this._setSizeStyle(css);
	    };
	    VisualElement.prototype._hoverChanged = function () {
	    };
	    VisualElement.prototype._visibleChanged = function () {
	    };
	    VisualElement.prototype.sizeChanged = function () {
	        this.invalidate();
	        this._doSizeChanged();
	    };
	    VisualElement.prototype._doSizeChanged = function () {
	    };
	    return VisualElement;
	}(EventAware_1.EventAware));
	exports.VisualElement = VisualElement;
	var LayerElement = /** @class */ (function (_super) {
	    __extends(LayerElement, _super);
	    function LayerElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    Object.defineProperty(LayerElement.prototype, "isLayer", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    LayerElement.prototype._getCssSelector = function () {
	        return undefined;
	    };
	    LayerElement.prototype._doDraw = function (element) {
	    };
	    return LayerElement;
	}(VisualElement));
	exports.LayerElement = LayerElement;
	});

	unwrapExports(VisualElement_1);
	var VisualElement_2 = VisualElement_1.VisualElement;
	var VisualElement_3 = VisualElement_1.LayerElement;

	var Selections = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Selections.ts
	// 2019. 09. 30. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var SelectionMode;
	(function (SelectionMode) {
	    SelectionMode["NONE"] = "none";
	    SelectionMode["SINGLE"] = "single";
	    SelectionMode["EXTENDED"] = "extended";
	})(SelectionMode = exports.SelectionMode || (exports.SelectionMode = {}));
	var SelectionStyle;
	(function (SelectionStyle) {
	    SelectionStyle["BLOCK"] = "block";
	    SelectionStyle["ROWS"] = "rows";
	    SelectionStyle["COLUMNS"] = "columns";
	    SelectionStyle["SINGLE_ROW"] = "singleRow";
	    SelectionStyle["SINGLE_COLUMN"] = "singleColumn";
	    SelectionStyle["SINGLE"] = "single";
	    SelectionStyle["NONE"] = "none";
	})(SelectionStyle = exports.SelectionStyle || (exports.SelectionStyle = {}));
	var SelectionDisplay;
	(function (SelectionDisplay) {
	    SelectionDisplay["CELL"] = "cell";
	    SelectionDisplay["CELL_AND_BORDER"] = "cellAndBorder";
	    SelectionDisplay["MASK"] = "mask";
	})(SelectionDisplay = exports.SelectionDisplay || (exports.SelectionDisplay = {}));
	exports.isSingleSelectionStyle = function (value) {
	    return value == SelectionStyle.SINGLE_ROW || value == SelectionStyle.SINGLE_COLUMN || value == SelectionStyle.SINGLE;
	};
	exports.isRowSelectionStyle = function (value) {
	    return value == SelectionStyle.ROWS || value == SelectionStyle.SINGLE_ROW;
	};
	exports.isColumnSelectionStyle = function (value) {
	    return value == SelectionStyle.COLUMNS || value == SelectionStyle.SINGLE_COLUMN;
	};
	var SelectionItem = /** @class */ (function (_super) {
	    __extends(SelectionItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectionItem(manager) {
	        var _this = _super.call(this) || this;
	        _this._manager = manager;
	        return _this;
	    }
	    SelectionItem.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SelectionItem.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._manager && this._manager.grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SelectionItem.prototype.inflate = function (dir, newIndex) {
	        switch (dir) {
	            case "left":
	                this._inflateLeft(newIndex);
	                break;
	            case "right":
	                this._inflateRight(newIndex);
	                break;
	            case "top":
	                this._inflateTop(newIndex);
	                break;
	            case "bottom":
	                this._inflateBottom(newIndex);
	                break;
	        }
	    };
	    SelectionItem.prototype.getItems = function (dataOnly) {
	        if (dataOnly === void 0) { dataOnly = true; }
	        var grid = this.grid;
	        var items = [];
	        var range = this.getBounds();
	        var r1 = range.top;
	        var r2 = range.bottom;
	        for (var r = r1; r <= r2; r++) {
	            var item = grid.getItem(r);
	            if (item && (!dataOnly || item.dataRow >= 0)) {
	                items.push(item);
	            }
	        }
	        return items;
	    };
	    SelectionItem.prototype._resized = function () {
	        this._manager && this._manager["_itemResized"](this);
	    };
	    return SelectionItem;
	}(Base_1.Base));
	exports.SelectionItem = SelectionItem;
	var SelectionManager = /** @class */ (function (_super) {
	    __extends(SelectionManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectionManager(grid) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._exclusiveMode = true;
	        _this._itemStyle = SelectionStyle.BLOCK;
	        _this._items = [];
	        _this._locked = false;
	        _this._grid = grid;
	        return _this;
	    }
	    SelectionManager.prototype._doDispose = function () {
	        this._grid = null;
	        this._items = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SelectionManager.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SelectionManager.prototype, "exclusiveMode", {
	        /** exclusiveMode */
	        get: function () {
	            return this._exclusiveMode;
	        },
	        set: function (value) {
	            if (value != this._exclusiveMode) {
	                this._exclusiveMode = value;
	                this.clear();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SelectionManager.prototype, "itemStyle", {
	        /** itemStyle */
	        get: function () {
	            return this._itemStyle;
	        },
	        set: function (value) {
	            if (value != this._itemStyle) {
	                this._itemStyle = value;
	                this.clear();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SelectionManager.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SelectionManager.prototype, "single", {
	        /** single */
	        get: function () {
	            return this._items.length == 1 && this._items[0].single;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SelectionManager.prototype.lock = function () {
	        this._locked = true;
	    };
	    SelectionManager.prototype.unlock = function () {
	        this._locked = false;
	    };
	    SelectionManager.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    SelectionManager.prototype.add = function (start, end, style) {
	        if (this._locked) {
	            return null;
	        }
	        if (style == SelectionStyle.NONE) {
	            this.clear();
	            return null;
	        }
	        if (this._exclusiveMode && style != this._style) {
	            this.clear();
	        }
	        var item = null;
	        switch (style) {
	            case SelectionStyle.COLUMNS:
	                item = new ColumnSelection(this, start.layout, end.layout);
	                break;
	            case SelectionStyle.SINGLE_COLUMN:
	                item = new ColumnSelection(this, start.layout, start.layout);
	                break;
	            case SelectionStyle.ROWS:
	                item = new RowSelection(this, start.itemIndex, end.itemIndex);
	                break;
	            case SelectionStyle.SINGLE_ROW:
	                item = new RowSelection(this, start.itemIndex, start.itemIndex);
	                break;
	            case SelectionStyle.BLOCK:
	                item = new BlockSelection(this, start, end);
	                break;
	            case SelectionStyle.SINGLE:
	                item = new BlockSelection(this, start, start);
	                break;
	        }
	        return this._addItem(item);
	    };
	    SelectionManager.prototype.remove = function (item) {
	        if (this._locked) {
	            return;
	        }
	        var index = this._items.indexOf(item);
	        if (index >= 0) {
	            this._items.splice(index, 1);
	            this.fireEvent(SelectionManager.REMOVED, item);
	        }
	    };
	    SelectionManager.prototype.clear = function () {
	        if (this._locked) {
	            return;
	        }
	        if (this._items.length > 0) {
	            this._items.length = 0;
	            this.fireEvent(SelectionManager.CLEARED);
	        }
	    };
	    SelectionManager.prototype.containsItem = function (itemIndex) {
	        return false;
	    };
	    SelectionManager.prototype.containsColumn = function (column) {
	        return false;
	    };
	    SelectionManager.prototype.containsCell = function (index) {
	        return this.contains(index.itemIndex, index.column);
	    };
	    SelectionManager.prototype.contains = function (row, column) {
	        for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	            if (this._items[i].contains(row, column))
	                return true;
	        }
	        return false;
	    };
	    SelectionManager.prototype.normalize = function () {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SelectionManager.prototype._changed = function () {
	        this.fireEvent(SelectionManager.CHANGED);
	    };
	    SelectionManager.prototype._addItem = function (item) {
	        if (!item)
	            throw new Error("item is null");
	        if (this._items.indexOf(item) < 0) {
	            this._items.push(item);
	            this.fireEvent(SelectionManager.ADDED, item);
	        }
	        return item;
	    };
	    SelectionManager.prototype._itemResized = function (item) {
	        this.fireEvent(SelectionManager.RESIZED, item);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // event names
	    SelectionManager.CHANGED = "onSelectionChanged";
	    SelectionManager.ADDED = "onSelectionAdded";
	    SelectionManager.REMOVED = "onSelectionRemoved";
	    SelectionManager.CLEARED = "onSelectionCleared";
	    SelectionManager.RESIZED = "onSelectionResized";
	    SelectionManager.ENDED = "onSelectionEnded";
	    return SelectionManager;
	}(EventAware_1.EventAware));
	exports.SelectionManager = SelectionManager;
	var BlockSelection = /** @class */ (function (_super) {
	    __extends(BlockSelection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function BlockSelection(manager, startIndex, endIndex) {
	        var _this = _super.call(this, manager) || this;
	        _this._startIndex = startIndex.clone();
	        _this._endIndex = endIndex.clone();
	        return _this;
	    }
	    Object.defineProperty(BlockSelection.prototype, "startIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** startIndex */
	        get: function () {
	            return this._startIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BlockSelection.prototype, "endIndex", {
	        /** endIndex */
	        get: function () {
	            return this._endIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BlockSelection.prototype, "style", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SelectionStyle.BLOCK;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BlockSelection.prototype, "single", {
	        get: function () {
	            return CellIndex_1.CellIndex.areEquals(this._startIndex, this._endIndex);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    BlockSelection.prototype.getBounds = function () {
	        var grid = this.grid;
	        this._startIndex.normalize(grid);
	        this._endIndex.normalize(grid);
	        if (CellIndex_1.CellIndex.areEquals(this._startIndex, this._endIndex)) {
	            return CellIndex_1.CellRange.create(this._startIndex);
	        }
	        else {
	            var c1 = this._startIndex.layout && this._startIndex.layout.dataRoot;
	            var c2 = this._endIndex.layout && this._endIndex.layout.dataRoot;
	            return CellIndex_1.CellRange.createRange(this._startIndex.itemIndex, c1, this._endIndex.itemIndex, c2);
	        }
	    };
	    BlockSelection.prototype.contains = function (row, column) {
	        return this.getBounds().contains(row, column);
	    };
	    BlockSelection.prototype.resizeTo = function (newEnd) {
	        if (this.grid.isValid(newEnd) && !CellIndex_1.CellIndex.areEquals(newEnd, this._endIndex)) {
	            this._endIndex.assign(newEnd);
	            this._resized();
	        }
	    };
	    BlockSelection.prototype.intersectsWith = function (item) {
	        return this.getBounds().intersectsWith(item.getBounds());
	    };
	    BlockSelection.prototype.mergeWith = function (item) {
	    };
	    BlockSelection.prototype.getData = function (maxRows) {
	        if (maxRows === void 0) { maxRows = -1; }
	        if (maxRows == 0) {
	            return null;
	        }
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(this._startIndex.layout, this._endIndex.layout);
	        var cnt;
	        if (!columns || (cnt = columns.length) < 1) {
	            return null;
	        }
	        var r1 = Math.min(this._startIndex.itemIndex, this._endIndex.itemIndex);
	        var r2 = Math.max(this._startIndex.itemIndex, this._endIndex.itemIndex);
	        var rows = [];
	        for (var r = r1; r <= r2; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                var row = {};
	                for (var c = 0; c < cnt; c++) {
	                    var col = columns[c];
	                    row[col.fieldName] = item.getData(col.dataIndex);
	                }
	                rows.push(row);
	                if (maxRows > 0 && rows.length == maxRows) {
	                    break;
	                }
	            }
	        }
	        return rows;
	    };
	    BlockSelection.prototype._inflateLeft = function (newLeft) {
	        if (this._startIndex.layout.distance <= this._endIndex.layout.distance) {
	            if (newLeft.layout !== this._startIndex.layout) {
	                this._startIndex.layout = newLeft.layout;
	                this._resized();
	            }
	        }
	        else {
	            if (newLeft.layout !== this._endIndex.layout) {
	                this._endIndex.layout = newLeft.layout;
	                this._resized();
	            }
	        }
	    };
	    BlockSelection.prototype._inflateRight = function (newRight) {
	        if (this._startIndex.layout.distance > this._endIndex.layout.distance) {
	            if (newRight.layout !== this._startIndex.layout) {
	                this._startIndex.layout = newRight.layout;
	                this._resized();
	            }
	        }
	        else {
	            if (newRight.layout !== this._endIndex.layout) {
	                this._endIndex.layout = newRight.layout;
	                this._resized();
	            }
	        }
	    };
	    BlockSelection.prototype._inflateTop = function (newTop) {
	        var grid = this.grid;
	        var i = Math.max(0, Math.min(grid.itemCount - 1, newTop.itemIndex));
	        if (this._startIndex.itemIndex <= this._endIndex.itemIndex) {
	            if (i !== this._startIndex.itemIndex) {
	                this._startIndex.itemIndex = i;
	                this._resized();
	            }
	        }
	        else {
	            if (i !== this._endIndex.itemIndex) {
	                this._endIndex.itemIndex = i;
	                this._resized();
	            }
	        }
	    };
	    BlockSelection.prototype._inflateBottom = function (newBottom) {
	        var grid = this.grid;
	        var i = Math.max(0, Math.min(grid.itemCount - 1, newBottom.itemIndex));
	        if (this._startIndex.itemIndex > this._endIndex.itemIndex) {
	            if (i !== this._startIndex.itemIndex) {
	                this._startIndex.itemIndex = i;
	                this._resized();
	            }
	        }
	        else {
	            if (i !== this._endIndex.itemIndex) {
	                this._endIndex.itemIndex = i;
	                this._resized();
	            }
	        }
	    };
	    BlockSelection.prototype.setValues = function (value) {
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(this._startIndex.layout, this._endIndex.layout);
	        var cnt;
	        if (!columns || (cnt = columns.length) < 1) {
	            return;
	        }
	        var r1 = Math.min(this._startIndex.itemIndex, this._endIndex.itemIndex);
	        var r2 = Math.max(this._startIndex.itemIndex, this._endIndex.itemIndex);
	        for (var r = r1; r <= r2; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                for (var c = 0; c < cnt; c++) {
	                    var col = columns[c];
	                    item.setData(col.dataIndex, value);
	                }
	            }
	        }
	    };
	    BlockSelection.prototype.toString = function () {
	        return this._startIndex + " ~ " + this._endIndex;
	    };
	    return BlockSelection;
	}(SelectionItem));
	exports.BlockSelection = BlockSelection;
	var RowSelection = /** @class */ (function (_super) {
	    __extends(RowSelection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowSelection(manager, startRow, endRow) {
	        var _this = _super.call(this, manager) || this;
	        _this._startRow = startRow;
	        _this._endRow = endRow;
	        return _this;
	    }
	    Object.defineProperty(RowSelection.prototype, "startRow", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** startRow */
	        get: function () {
	            return this._startRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowSelection.prototype, "endRow", {
	        /** endRow */
	        get: function () {
	            return this._endRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowSelection.prototype, "topRow", {
	        /** topRow */
	        get: function () {
	            return Math.min(this._startRow, this._endRow);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowSelection.prototype, "bottomRow", {
	        /** bottomRow */
	        get: function () {
	            return Math.max(this._startRow, this._endRow);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowSelection.prototype, "style", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SelectionStyle.ROWS;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowSelection.prototype, "single", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RowSelection.prototype.getBounds = function () {
	        var grid = this.grid;
	        var itemCount = grid.itemCount;
	        this._startRow = Math.max(0, Math.min(itemCount - 1, this._startRow));
	        this._endRow = Math.max(0, Math.min(itemCount - 1, this._endRow));
	        if (this._startRow <= this._endRow) {
	            return CellIndex_1.CellRange.createRange(this._startRow, grid.getVisibleLayout(0), this._endRow, grid.getVisibleLayout(grid.visibleLayoutCount - 1));
	        }
	        else {
	            return CellIndex_1.CellRange.createRange(this._endRow, grid.getVisibleLayout(0), this._startRow, grid.getVisibleLayout(grid.visibleLayoutCount - 1));
	        }
	    };
	    RowSelection.prototype.contains = function (row, column) {
	        return (row >= this.topRow) && (row <= this.bottomRow);
	    };
	    RowSelection.prototype.resizeTo = function (endIndex) {
	        var row = Math.max(0, endIndex.itemIndex);
	        if (row != this._endRow) {
	            this._endRow = Math.max(0, Math.min(this.grid.itemCount - 1, row));
	            this._resized();
	        }
	    };
	    RowSelection.prototype.intersectsWith = function (item) {
	        return this.getBounds().intersectsWith(item.getBounds());
	    };
	    RowSelection.prototype.mergeWith = function (item) {
	    };
	    RowSelection.prototype.getData = function (maxRows) {
	        if (maxRows === void 0) { maxRows = -1; }
	        if (maxRows == 0) {
	            return null;
	        }
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(grid.getVisibleLayout(0), grid.getVisibleLayout(grid.visibleLayoutCount - 1));
	        if (!columns) {
	            return null;
	        }
	        var cnt = columns.length;
	        if (cnt < 1) {
	            return null;
	        }
	        var r1 = Math.max(0, Math.min(this._startRow, this._endRow));
	        var r2 = Math.min(grid.itemCount - 1, Math.max(this._startRow, this._endRow));
	        var rows = [];
	        for (var r = r1; r <= r2; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                var row = {};
	                for (var c = 0; c < cnt; c++) {
	                    var col = columns[c];
	                    row[col.fieldName] = item.getData(col.dataIndex);
	                }
	                rows.push(row);
	                if (maxRows > 0 && rows.length == maxRows) {
	                    break;
	                }
	            }
	        }
	        return rows;
	    };
	    RowSelection.prototype._inflateLeft = function (newLeft) {
	    };
	    RowSelection.prototype._inflateRight = function (newRight) {
	    };
	    RowSelection.prototype._inflateTop = function (newTop) {
	        var i = newTop.itemIndex;
	        if (i != this.topRow) {
	            if (this._startRow <= this._endRow) {
	                this._startRow = Math.max(0, Math.min(this.grid.itemCount - 1, i));
	            }
	            else {
	                this._endRow = Math.max(0, Math.min(this.grid.itemCount - 1, i));
	            }
	            this._resized();
	        }
	    };
	    RowSelection.prototype._inflateBottom = function (newBottom) {
	        var i = newBottom.itemIndex;
	        if (i != this.bottomRow) {
	            if (this._startRow > this._endRow) {
	                this._startRow = Math.max(0, Math.min(this.grid.itemCount - 1, i));
	            }
	            else {
	                this._endRow = Math.max(0, Math.min(this.grid.itemCount - 1, i));
	            }
	            this._resized();
	        }
	    };
	    RowSelection.prototype.setValues = function (value) {
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(grid.getVisibleLayout(0), grid.getVisibleLayout(grid.visibleLayoutCount - 1));
	        if (!columns) {
	            return;
	        }
	        var cnt = columns.length;
	        if (cnt < 1) {
	            return;
	        }
	        var r1 = Math.max(0, Math.min(this._startRow, this._endRow));
	        var r2 = Math.min(grid.itemCount - 1, Math.max(this._startRow, this._endRow));
	        for (var r = r1; r <= r2; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                for (var c = 0; c < cnt; c++) {
	                    var col = columns[c];
	                    item.setData(col.dataIndex, value);
	                }
	            }
	        }
	    };
	    return RowSelection;
	}(SelectionItem));
	exports.RowSelection = RowSelection;
	var ColumnSelection = /** @class */ (function (_super) {
	    __extends(ColumnSelection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnSelection(manager, startLayout, endLayout) {
	        var _this = _super.call(this, manager) || this;
	        _this._startLayout = startLayout;
	        _this._endLayout = endLayout;
	        return _this;
	    }
	    Object.defineProperty(ColumnSelection.prototype, "startLayout", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** startLayout */
	        get: function () {
	            return this._startLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSelection.prototype, "endLayout", {
	        /** endLayout */
	        get: function () {
	            return this._endLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSelection.prototype, "leftLayout", {
	        /** leftLayout */
	        get: function () {
	            return this._startLayout.distance <= this._endLayout.distance ? this._startLayout : this._endLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSelection.prototype, "rightLayout", {
	        /** rightLayout */
	        get: function () {
	            return this._startLayout.distance > this._endLayout.distance ? this._startLayout : this._endLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSelection.prototype, "style", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SelectionStyle.COLUMNS;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnSelection.prototype, "single", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ColumnSelection.prototype.getBounds = function () {
	        if (this._startLayout.distance <= this._endLayout.distance) {
	            return CellIndex_1.CellRange.createRange(0, this._startLayout, this._startLayout.grid.itemCount - 1, this._endLayout);
	        }
	        else {
	            return CellIndex_1.CellRange.createRange(0, this._endLayout, this._endLayout.grid.itemCount - 1, this._startLayout);
	        }
	    };
	    ColumnSelection.prototype.contains = function (row, column) {
	        //return GridColumn.compareLoc(column, this._startLayout) >= 0 && GridColumn.compareLoc(column, this._endLayout) <= 0;
	        return false;
	    };
	    ColumnSelection.prototype.resizeTo = function (newEnd) {
	        if (newEnd.layout !== this._endLayout) {
	            this._endLayout = newEnd.layout;
	            this._resized();
	        }
	    };
	    ColumnSelection.prototype.intersectsWith = function (item) {
	        return this.getBounds().intersectsWith(item.getBounds());
	    };
	    ColumnSelection.prototype.mergeWith = function (item) {
	    };
	    ColumnSelection.prototype.getData = function (maxRows) {
	        if (maxRows === void 0) { maxRows = -1; }
	        if (maxRows == 0) {
	            return null;
	        }
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(this._startLayout, this._endLayout);
	        if (!columns) {
	            return null;
	        }
	        var cnt = grid.itemCount;
	        var rows = [];
	        for (var r = 0; r < cnt; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                var row = {};
	                for (var c = 0, cols = columns.length; c < cols; c++) {
	                    row[columns[c].fieldName] = item.getData(columns[c].dataIndex);
	                }
	                rows.push(row);
	                if (maxRows > 0 && rows.length == maxRows) {
	                    break;
	                }
	            }
	        }
	        return rows;
	    };
	    ColumnSelection.prototype._inflateLeft = function (newLeft) {
	        var c = newLeft.layout;
	        if (c !== this.leftLayout) {
	            if (this._startLayout.distance <= this._endLayout.distance) {
	                this._startLayout = c;
	            }
	            else {
	                this._endLayout = c;
	            }
	            this._resized();
	        }
	    };
	    ColumnSelection.prototype._inflateRight = function (newRight) {
	        var c = newRight.layout;
	        if (c !== this.rightLayout) {
	            if (this._startLayout.distance > this._endLayout.distance) {
	                this._startLayout = c;
	            }
	            else {
	                this._endLayout = c;
	            }
	            this._resized();
	        }
	    };
	    ColumnSelection.prototype._inflateTop = function (newTop) {
	    };
	    ColumnSelection.prototype._inflateBottom = function (newBottom) {
	    };
	    ColumnSelection.prototype.setValues = function (value) {
	        var grid = this.grid;
	        var columns = grid.collectDataColumns(this._startLayout, this._endLayout);
	        if (!columns) {
	            return;
	        }
	        var cnt = grid.itemCount;
	        for (var r = 0; r < cnt; r++) {
	            var item = grid.getItem(r);
	            if (item) {
	                for (var c = 0, cols = columns.length; c < cols; c++) {
	                    item.setData(columns[c].dataIndex, value);
	                }
	            }
	        }
	    };
	    return ColumnSelection;
	}(SelectionItem));
	exports.ColumnSelection = ColumnSelection;
	var SelectionView = /** @class */ (function (_super) {
	    __extends(SelectionView, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectionView() {
	        return _super.call(this, "selectionView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SelectionView.prototype._getCssSelector = function () {
	        return "rg-selection";
	    };
	    SelectionView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	    };
	    return SelectionView;
	}(VisualElement_1.LayerElement));
	exports.SelectionView = SelectionView;
	var SelectionMask = /** @class */ (function (_super) {
	    __extends(SelectionMask, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectionMask() {
	        var _this = _super.call(this, "selectionMask") || this;
	        _this._toped = false;
	        _this._bottomed = false;
	        _this._lefted = false;
	        _this._righted = false;
	        _this._view = new SelectionView();
	        _this.addChild(_this._view);
	        return _this;
	    }
	    Object.defineProperty(SelectionMask.prototype, "item", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** item  */
	        get: function () {
	            return this._item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SelectionMask.prototype.prepare = function () {
	        this._toped = this._bottomed = this._lefted = this._righted = false;
	    };
	    SelectionMask.prototype.updateElement = function () {
	        var x = 0;
	        var y = 0;
	        var w = this.width;
	        var h = this.height;
	        if (this._lefted) {
	            x -= 10;
	            w += 10;
	        }
	        if (this._righted) {
	            w += 10;
	        }
	        if (this._toped) {
	            y -= 10;
	            h += 10;
	        }
	        if (this._bottomed) {
	            h += 10;
	        }
	        this._view.setBounds(x, y, w, h);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SelectionMask.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("overflow", "hidden");
	        this.setImportantStyle("pointer-events", "none");
	    };
	    return SelectionMask;
	}(VisualElement_1.LayerElement));
	exports.SelectionMask = SelectionMask;
	var SelectionLayer = /** @class */ (function (_super) {
	    __extends(SelectionLayer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectionLayer(grid) {
	        var _this = _super.call(this, "selectionLayer") || this;
	        _this._pool = [];
	        _this._views = {};
	        _this._grid = grid;
	        return _this;
	    }
	    SelectionLayer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SelectionLayer.prototype.addView = function (item) {
	        var h = item["$_hash"];
	        var view = this._views[h];
	        if (!view) {
	            view = this._pool.pop() || new SelectionMask();
	            this._views[h] = view;
	        }
	        view["_item"] = item;
	        this.addChild(view);
	        return view;
	    };
	    SelectionLayer.prototype.clearViews = function () {
	        for (var h in this._views) {
	            var v = this._views[h];
	            this.removeChild(v);
	            this._pool.push(v);
	        }
	        this._views = {};
	    };
	    SelectionLayer.prototype.layout = function () {
	        var lm = this._grid.layoutManager;
	        var sels = this._grid.selections;
	        for (var h in this._views) {
	            var view = this._views[h];
	            var item = view.item;
	            var visible = false;
	            var r = new Rectangle_1.Rectangle();
	            if (!item.single) {
	                view.prepare();
	                if (item instanceof RowSelection) {
	                    visible = this.$_getSelectionRowsRect(lm, item, view, r);
	                    view["_lefted"] = true;
	                    view["_righted"] = true;
	                }
	                else if (item instanceof ColumnSelection) {
	                    visible = this.$_getSelectionColumnsRect(lm, item, view, r);
	                    view["_toped"] = true;
	                    view["_bottomed"] = true;
	                }
	                else {
	                    visible = this.$_getSelectionRangeRect(lm, item, view, r);
	                }
	                if (visible) {
	                    // adjust bottom
	                    var y = lm.footerBounds.y;
	                    if (r.bottom > y) {
	                        view["_bottomed"] = true;
	                        r.bottom = y;
	                    }
	                }
	            }
	            view.visible = visible;
	            if (view.visible) {
	                view.setRectI(r);
	                view.updateElement(); //, mobile ? this._selectOptions.mobileStyles() : this._selectOptions.maskStyles());
	                view.invalidate();
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SelectionLayer.prototype.$_getSelectionRowsRect = function (lm, item, view, r) {
	        var grid = this._grid;
	        var range = item.getBounds();
	        var idx1 = range.r1;
	        var idx2 = range.r2;
	        var items = lm.itemCount;
	        var fixed = lm.fixedItemCount;
	        var t = grid.topIndex;
	        var r1;
	        var r2;
	        if (fixed > 0) {
	            if (idx1 >= t + fixed + items || idx2 < 0 || idx1 >= fixed && idx2 < t + fixed) {
	                return false;
	            }
	            var y = lm.fixedHeight + grid.fixedOptions.rowBarHeight;
	            if (idx1 < fixed) {
	                r1 = lm.getItemBounds(Math.max(0, idx1));
	            }
	            else {
	                r1 = lm.getItemBounds(Math.max(0, idx1 - t));
	                if (r1.y < y) {
	                    view["_toped"] = true;
	                }
	                r1.y = Math.max(r1.y, y);
	            }
	            if (idx2 < fixed) {
	                r2 = lm.getItemBounds(idx2);
	            }
	            else if (idx1 <= fixed && idx2 < fixed + t) { // fixed 영역과 body영역에 겹쳐있을 때
	                r2 = lm.getItemBounds(Math.min(fixed + t, fixed) - 1);
	            }
	            else if (idx2 >= t) {
	                r2 = lm.getItemBounds(Math.min(lm.itemCount + fixed - 1, idx2 - t));
	                r2.y = Math.max(r2.y, y);
	            }
	            else {
	                r2 = r1;
	            }
	        }
	        else if (items > 0) {
	            if (idx1 >= t + items || idx2 < t) {
	                return false;
	            }
	            var y = idx1 - t;
	            r1 = lm.getItemBounds(Math.max(0, y));
	            r2 = lm.getItemBounds(Math.min(items - 1, idx2 - t));
	            if (y < 0) {
	                view["_toped"] = true;
	            }
	        }
	        else {
	            return false;
	        }
	        r.copy(r1.union(r2));
	        r.offset(0, lm.contentBounds.y + lm.bodyBounds.y);
	        r.right = lm.rightLayoutCount > 0 ? lm.rightContentBounds.right : lm.bodyBounds.right;
	        return true;
	    };
	    SelectionLayer.prototype.$_getSelectionColumnsRect = function (lm, item, view, r) {
	        var grid = this._grid;
	        var range = item.getBounds();
	        var fixed = lm.fixedLayoutCount;
	        var rfixed = lm.rightLayoutCount;
	        var rstart = lm.rightFirstLayout;
	        var c1 = range.c1.root.vindex;
	        var c2 = range.c2.root.vindex;
	        var wbar = grid.fixedOptions.colBarWidth;
	        var r1 = lm.getDataLayoutRect(range.c1);
	        var r2 = lm.getDataLayoutRect(range.c2);
	        r.left = Math.min(r1.x, r2.x);
	        r.right = Math.max(r1.right, r2.right);
	        r.y = lm.headerBounds.bottom;
	        r.height = lm.getItemRect(lm.itemCount - 1).bottom;
	        if (lm.fixedItemCount > 0) {
	            r.height += lm.fixedHeight;
	        }
	        // adjust left
	        if (c1 >= fixed) {
	            var x = lm.fixedContentBounds.right;
	            if (r.x < x) {
	                view["_lefted"] = true;
	                r.left = Math.max(r.left, x);
	            }
	        }
	        // adjust right
	        if (rfixed > 0) {
	            var c = lm.rightFirstLayout;
	            if (c1 >= c) {
	                r.width = 0;
	            }
	            else if (c2 < c) {
	                r.right = Math.min(r.right, lm.rightContentBounds.x);
	                view["_righted"] = true;
	            }
	        }
	        return true;
	    };
	    SelectionLayer.prototype.$_getSelectionRangeRect = function (lm, item, view, r) {
	        var tr = new Rectangle_1.Rectangle();
	        if (!this.$_getSelectionRowsRect(lm, item, view, tr)) {
	            return false;
	        }
	        r.y = tr.y;
	        r.bottom = tr.bottom;
	        this.$_getSelectionColumnsRect(lm, item, view, tr);
	        r.x = tr.x;
	        r.right = tr.right;
	        return true;
	    };
	    return SelectionLayer;
	}(VisualElement_1.LayerElement));
	exports.SelectionLayer = SelectionLayer;
	});

	unwrapExports(Selections);
	var Selections_1 = Selections.SelectionMode;
	var Selections_2 = Selections.SelectionStyle;
	var Selections_3 = Selections.SelectionDisplay;
	var Selections_4 = Selections.isSingleSelectionStyle;
	var Selections_5 = Selections.isRowSelectionStyle;
	var Selections_6 = Selections.isColumnSelectionStyle;
	var Selections_7 = Selections.SelectionItem;
	var Selections_8 = Selections.SelectionManager;
	var Selections_9 = Selections.BlockSelection;
	var Selections_10 = Selections.RowSelection;
	var Selections_11 = Selections.ColumnSelection;
	var Selections_12 = Selections.SelectionView;
	var Selections_13 = Selections.SelectionMask;
	var Selections_14 = Selections.SelectionLayer;

	var SectionObject_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridObject.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var SectionObject = /** @class */ (function (_super) {
	    __extends(SectionObject, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SectionObject(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._displayOrder = 0;
	        _this._headText = null;
	        _this._footText = null;
	        _this._sumText = null;
	        _this._headCell = _this._createHeadCell();
	        _this._footCell = _this._createFootCell();
	        _this._sumCell = _this._createSumCell();
	        _this.visible = true;
	        return _this;
	    }
	    Object.defineProperty(SectionObject.prototype, "displayOrder", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** displayOrder */
	        get: function () {
	            return this._displayOrder;
	        },
	        set: function (value) {
	            if (value != this._displayOrder) {
	                this._displayOrder = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SectionObject.prototype, "headText", {
	        /** headText */
	        get: function () {
	            return this._headText;
	        },
	        set: function (value) {
	            if (value != this._headText) {
	                this._headText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SectionObject.prototype, "footText", {
	        /** footText */
	        get: function () {
	            return this._footText;
	        },
	        set: function (value) {
	            if (value != this._footText) {
	                this._footText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SectionObject.prototype, "sumText", {
	        /** sumText */
	        get: function () {
	            return this._sumText;
	        },
	        set: function (value) {
	            if (value != this._sumText) {
	                this._sumText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SectionObject.prototype, "popupMenu", {
	        /** popupMenu */
	        get: function () {
	            return this._popupMenu;
	        },
	        set: function (value) {
	            if (value != this._popupMenu) {
	                this._popupMenu = value;
	                if (typeof value === "string") {
	                    this._popupMenuName = value;
	                }
	                else {
	                    this._popupMenuName = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SectionObject.prototype, "popupMenuName", {
	        get: function () {
	            if (this._popupMenuName) {
	                return this._popupMenuName;
	            }
	            else if (this._popupMenu) {
	                this._popupMenuName = this.getHeadStyleName() + "_menu";
	                this._grid && this._grid.addPopupMenu(this._popupMenuName, this._popupMenu, true);
	                return this._grid && this._popupMenuName;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SectionObject.prototype.getHeadCell = function () {
	        var cell = this._headCell;
	        return cell;
	    };
	    SectionObject.prototype.getFootCell = function () {
	        var cell = this._footCell;
	        return cell;
	    };
	    SectionObject.prototype.getSumCell = function () {
	        var cell = this._sumCell;
	        return cell;
	    };
	    SectionObject.prototype._createHeadCell = function () {
	        return new GridCell_1.StyledCell(this);
	    };
	    SectionObject.prototype._createFootCell = function () {
	        return new GridCell_1.StyledCell(this);
	    };
	    SectionObject.prototype._createSumCell = function () {
	        return new GridCell_1.StyledCell(this);
	    };
	    return SectionObject;
	}(GridObject_1.VisualObject));
	exports.SectionObject = SectionObject;
	});

	unwrapExports(SectionObject_1);
	var SectionObject_2 = SectionObject_1.SectionObject;

	var RowIndicator_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RowIndicator.ts
	// 2019. 07. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var IndicatorValue;
	(function (IndicatorValue) {
	    IndicatorValue["NONE"] = "none";
	    IndicatorValue["INDEX"] = "index";
	    IndicatorValue["ROW"] = "row";
	})(IndicatorValue = exports.IndicatorValue || (exports.IndicatorValue = {}));
	var StateMark;
	(function (StateMark) {
	    StateMark["DEFAULT"] = "default";
	    StateMark["TEXT"] = "text";
	    StateMark["NONE"] = "none";
	    StateMark["IMAGE"] = "image";
	})(StateMark = exports.StateMark || (exports.StateMark = {}));
	var RowIndicatorCell = /** @class */ (function (_super) {
	    __extends(RowIndicatorCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowIndicatorCell(indicator) {
	        var _this = _super.call(this, "indicatorCell") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._itemState = GridItem_1.ItemState.NORMAL;
	        _this._indicator = indicator;
	        return _this;
	    }
	    RowIndicatorCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowIndicatorCell.prototype, "indicator", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** indicator */
	        get: function () {
	            return this._indicator;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicatorCell.prototype, "itemState", {
	        /** itemState */
	        get: function () {
	            return this._itemState;
	        },
	        set: function (value) {
	            if (value != this._itemState) {
	                this._itemState = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicatorCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            var indicator = this._indicator;
	            var index = this.index;
	            var item = index.item;
	            var s = "";
	            var r;
	            if (item && item.itemState == GridItem_1.ItemState.NORMAL) {
	                switch (indicator.displayValue) {
	                    case IndicatorValue.INDEX:
	                        r = indicator.owner.getIndicatorIndex(item);
	                        if (r >= 0) {
	                            r += indicator.indexOffset;
	                            if (!indicator.zeroBase) {
	                                r++;
	                            }
	                            s = String(r);
	                        }
	                        break;
	                    case IndicatorValue.ROW:
	                        r = index.dataRow;
	                        if (r >= 0) {
	                            r += indicator.rowOffset;
	                            if (!indicator.zeroBase) {
	                                r++;
	                            }
	                            s = String(r);
	                        }
	                        break;
	                }
	            }
	            return s;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicatorCell.prototype, "value", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowIndicatorCell;
	}(GridCell_1.GridCell));
	exports.RowIndicatorCell = RowIndicatorCell;
	var RowIndicator = /** @class */ (function (_super) {
	    __extends(RowIndicator, _super);
	    // private _stateImages: ConfigObject = {};
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowIndicator(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._displayValue = IndicatorValue.INDEX;
	        _this._zeroBase = false;
	        _this._indexOffset = 0;
	        _this._rowOffset = 0;
	        _this._minWidth = 40;
	        _this._maxWidth = 0;
	        _this._width = 0;
	        _this._selectable = true;
	        _this._mark = StateMark.DEFAULT;
	        _this._showFocus = true;
	        _this._showSelection = false;
	        _this._cell = new RowIndicatorCell(_this);
	        _this.headText = "No.";
	        _this.footText = "Σ";
	        _this.sumText = "Σ";
	        return _this;
	    }
	    RowIndicator.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowIndicator.prototype, "displayValue", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** displayValue */
	        get: function () {
	            return this._displayValue;
	        },
	        set: function (value) {
	            if (value != this._displayValue) {
	                this._displayValue = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "zeroBase", {
	        /** zeroBase */
	        get: function () {
	            return this._zeroBase;
	        },
	        set: function (value) {
	            if (value != this._zeroBase) {
	                this._zeroBase = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "indexOffset", {
	        /** indexOffset */
	        get: function () {
	            return this._indexOffset;
	        },
	        set: function (value) {
	            if (value != this._indexOffset) {
	                this._indexOffset = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "rowOffset", {
	        /** rowOffset */
	        get: function () {
	            return this._rowOffset;
	        },
	        set: function (value) {
	            if (value != this._rowOffset) {
	                this._rowOffset = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "minWidth", {
	        /** minWidth */
	        get: function () {
	            return this._minWidth;
	        },
	        set: function (value) {
	            if (value != this._minWidth) {
	                this._minWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "maxWidth", {
	        /** maxWidth */
	        get: function () {
	            return this._maxWidth;
	        },
	        set: function (value) {
	            if (value != this._maxWidth) {
	                this._maxWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "width", {
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            if (value != this._width) {
	                this._width = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "selectable", {
	        /** selectable */
	        get: function () {
	            return this._selectable;
	        },
	        set: function (value) {
	            if (value != this._selectable) {
	                this._selectable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "mark", {
	        /** mark */
	        get: function () {
	            return this._mark;
	        },
	        set: function (value) {
	            if (value != this._mark) {
	                this._mark = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "showFocus", {
	        // /** stateImages */
	        // get stateImages(): ConfigObject {
	        //     return this._stateImages;
	        // }
	        // set stateImages(value: ConfigObject) {
	        //     if (value != this._stateImages) {
	        // 		for (var state in value) {
	        // 			this._stateImages[state] = value[state];
	        // 		}
	        // 		this._changed();
	        //     }
	        // }
	        /**
	         * showFocus.
	         * true면 foucsed 행에 해당하는 셀을 "rg-rowindicator-focus" 스타일로 표시한다.
	         */
	        get: function () {
	            return this._showFocus;
	        },
	        set: function (value) {
	            if (value != this._showFocus) {
	                this._showFocus = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "showSelection", {
	        /**
	         * showSelection.
	         * true면 data 선택 영역에 맞춰 관련된 셀들을 "rg-rowindicator-select" 스타일로 표시한다.
	         */
	        get: function () {
	            return this._showSelection;
	        },
	        set: function (value) {
	            if (value != this._showSelection) {
	                this._showSelection = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowIndicator.prototype, "staticOrder", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RowIndicator.prototype.getCell = function (index) {
	        var cell = this._cell;
	        cell.setIndex(index);
	        // cell.styles = this.styles;
	        var item = index.item;
	        if (item) {
	            var state = index.item.itemState;
	            if (state == GridItem_1.ItemState.NORMAL && this._grid.focusedIndex.itemIndex == index.itemIndex) {
	                state = GridItem_1.ItemState.FOCUSED;
	            }
	            cell.itemState = state;
	        }
	        return cell;
	    };
	    RowIndicator.prototype.getHeadStyleName = function () {
	        return "rg-rowindicator-head";
	    };
	    RowIndicator.prototype.getFootStyleName = function () {
	        return "rg-rowindicator-foot";
	    };
	    RowIndicator.prototype.getSumStyleName = function () {
	        return "rg-rowindicator-sum";
	    };
	    return RowIndicator;
	}(SectionObject_1.SectionObject));
	exports.RowIndicator = RowIndicator;
	});

	unwrapExports(RowIndicator_1);
	var RowIndicator_2 = RowIndicator_1.IndicatorValue;
	var RowIndicator_3 = RowIndicator_1.StateMark;
	var RowIndicator_4 = RowIndicator_1.RowIndicatorCell;
	var RowIndicator_5 = RowIndicator_1.RowIndicator;

	var ExportOptions = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ExportOptions.ts 
	// 2019. 07. 18. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var DocumentTitleStyle = /** @class */ (function (_super) {
	    __extends(DocumentTitleStyle, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DocumentTitleStyle(config) {
	        var _this = _super.call(this) || this;
	        config && _this.extend(config);
	        return _this;
	    }
	    DocumentTitleStyle.ToCss = function (confg) {
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DocumentTitleStyle.prototype.proxy = function () {
	        return {
	            fontFamily: this.fontFamily,
	            fontSize: this.fontSize,
	            fontBold: this.fontBold,
	            textAlignment: this.textAlignment,
	            lineAlignment: this.lineAlignment,
	            foreground: this.foreground,
	            background: this.background,
	            borderLeft: this.borderLeft,
	            borderTop: this.borderTop,
	            borderRight: this.borderRight,
	            borderBottom: this.borderBottom
	        };
	    };
	    DocumentTitleStyle.prototype.toCss = function () {
	        var css = new CSSStyleDeclaration();
	        css.fontFamily = this.fontFamily;
	        css.fontSize = this.fontSize + "px";
	        css.fontWeight = this.fontBold ? "bold" : "normal";
	        css.verticalAlign = this.lineAlignment == "far" ? "bottom" : this.lineAlignment == "near" ? "top" : "middle";
	        css.textAlign = this.textAlignment == "far" ? "right" : this.textAlignment == "near" ? "left" : "center";
	        css.color = this.foreground;
	        css.background = this.background;
	        css.borderLeft = this.borderLeft;
	        css.borderTop = this.borderTop;
	        css.borderRight = this.borderRight;
	        css.borderBottom = this.borderBottom;
	        return css;
	    };
	    return DocumentTitleStyle;
	}(Base_1.Base));
	exports.DocumentTitleStyle = DocumentTitleStyle;
	var DocumentTitle = /** @class */ (function (_super) {
	    __extends(DocumentTitle, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DocumentTitle(config) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._styles = null;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.message = "";
	        _this.visible = true;
	        _this.spaceTop = 0;
	        _this.spaceBottom = 0;
	        _this.height = -1;
	        config && _this.extend(config);
	        if (config.styles) {
	            _this._styles = new DocumentTitleStyle(config.styles);
	        }
	        return _this;
	    }
	    DocumentTitle.prototype._doDispose = function () {
	        this._styles = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DocumentTitle.prototype, "cssStyle", {
	        get: function () {
	            return this._styles ? this._styles.toCss() : null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // method
	    //-------------------------------------------------------------------------
	    DocumentTitle.prototype.proxy = function () {
	        return {
	            message: this.message,
	            visible: this.visible,
	            styles: this._styles.proxy(),
	            spaceTop: this.spaceTop,
	            spaceBottom: this.spaceBottom,
	            height: this.height
	        };
	    };
	    return DocumentTitle;
	}(Base_1.Base));
	exports.DocumentTitle = DocumentTitle;
	exports.VIS_DEFAULT = "default";
	exports.VIS_HIDDEN = "hidden";
	exports.VIS_VISIBLE = "visible";
	exports.INDICATOR_DEFAULT = "default";
	exports.INDICATOR_ITEM = "item";
	exports.INDICATOR_ROW = "row";
	exports.PIXELS_PER_CHAR = 7;
	var ExportType;
	(function (ExportType) {
	    ExportType["EXCEL"] = "excel";
	    ExportType["CSV"] = "csv";
	})(ExportType = exports.ExportType || (exports.ExportType = {}));
	var ExportTarget;
	(function (ExportTarget) {
	    ExportTarget["LOCAL"] = "local";
	    ExportTarget["TARGET"] = "target";
	})(ExportTarget = exports.ExportTarget || (exports.ExportTarget = {}));
	var ExportBaseOptions = /** @class */ (function (_super) {
	    __extends(ExportBaseOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ExportBaseOptions(source) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._booleanFormatter = null;
	        _this._numberFormatter = null;
	        _this._datetimeWritter = null;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.type = ExportType.EXCEL;
	        _this.target = ExportTarget.LOCAL;
	        _this.url = undefined;
	        _this.nullDateText = "";
	        _this.datetimeCallback = null;
	        _this.numberCallback = null;
	        _this.booleanCallback = null;
	        _this.objectCallback = null;
	        _this.textCallback = null;
	        _this.start = 0;
	        _this.count = -1;
	        _this.done = null;
	        _this.showProgress = false;
	        _this.progressMessage = null;
	        _this.progressMax = 0;
	        _this.prepareProgress = 10;
	        _this.assignFrom(source);
	        _this.progressMessage = _this.progressMessage || "Exporting...";
	        return _this;
	    }
	    Object.defineProperty(ExportBaseOptions.prototype, "fileName", {
	        get: function () {
	            if (this._fileName.indexOf(".") < 0) {
	                var fileExt = this.type === ExportType.CSV ? ".csv" : ".xlsx";
	                return this._fileName + fileExt;
	            }
	            else {
	                return this._fileName;
	            }
	        },
	        set: function (value) {
	            if (value != this._fileName) {
	                this._fileName = value ? value.trim() : null;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "datetimeFormat", {
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                if (value) {
	                    this._datetimeWritter = DateTimeWriter_1.DateTimeWriter.getFormatter(value);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "booleanFormat", {
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                if (value) {
	                    this._booleanFormatter = BooleanFormatter_1.BooleanFormatter.getFormatter(value);
	                }
	                else {
	                    this._booleanFormatter = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "numberFormat", {
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                this._numberFormatter = value ? DecimalFormatter_1.DecimalFormatter.getFormatter(value) : null;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "booleanFormatter", {
	        get: function () {
	            return this._booleanFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "datetimeWriter", {
	        get: function () {
	            return this._datetimeWritter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ExportBaseOptions.prototype, "numberFormatter", {
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return ExportBaseOptions;
	}(Base_1.Base));
	exports.ExportBaseOptions = ExportBaseOptions;
	var GridExportOptions = /** @class */ (function (_super) {
	    __extends(GridExportOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridExportOptions(source) {
	        var _this = _super.call(this, source) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._documentTitle = null;
	        _this._documentSubtitle = null;
	        _this._documentTail = null;
	        _this.linear = false;
	        _this.allColumns = false;
	        _this.allItems = true;
	        _this.onlyCheckedItems = false;
	        _this.pagingAllItems = false;
	        _this.indicator = exports.VIS_DEFAULT;
	        _this.checkBar = exports.VIS_HIDDEN;
	        _this.header = exports.VIS_DEFAULT;
	        _this.footer = exports.VIS_DEFAULT;
	        _this.headerSummary = exports.VIS_DEFAULT;
	        _this.indicatorValue = exports.INDICATOR_DEFAULT;
	        _this.checkMark = "v";
	        _this.indenting = true;
	        _this.checkNumber = false;
	        _this.separateRows = false;
	        _this.showConfirm = true;
	        _this.confirmMessage = "Excel 문서로 저장하시겠습니까?";
	        _this.confirmTitle = "Excel 저장";
	        _this.lookupDisplay = false;
	        _this.compatibility = false;
	        _this.showLevelOutline = true;
	        _this.showProgress = false;
	        _this.progressMessage = null;
	        _this.applyFitStyle = false;
	        _this.applyDynamicStyles = false;
	        _this.applyDefaultColumnFormat = false;
	        _this.sheetName = null;
	        _this.exportSeriesColumn = false;
	        _this.replaceCrText = null;
	        _this.replaceLfText = null;
	        _this.showColumns = null;
	        _this.hideColumns = null;
	        return _this;
	    }
	    GridExportOptions.prototype._doDispose = function () {
	        this._documentTitle && (this._documentTitle = this._documentTitle.dispose());
	        this._documentSubtitle && (this._documentSubtitle = this._documentSubtitle.dispose());
	        this._documentTail && (this._documentTail = this._documentTail.dispose());
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridExportOptions.prototype, "documentTitle", {
	        get: function () {
	            return this._documentTitle;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridExportOptions.prototype, "documentSubtitle", {
	        get: function () {
	            return this._documentSubtitle;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridExportOptions.prototype, "documentTail", {
	        get: function () {
	            return this._documentTail;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // method
	    //-------------------------------------------------------------------------
	    GridExportOptions.prototype.indicatorVisible = function (grid) {
	        if (grid) {
	            switch (this.indicator) {
	                case exports.VIS_VISIBLE:
	                    return true;
	                case exports.VIS_HIDDEN:
	                    return false;
	                case exports.VIS_DEFAULT:
	                default:
	                    return grid.rowIndicator.visible;
	            }
	        }
	        return false;
	    };
	    GridExportOptions.prototype.checkBarVisible = function (grid) {
	        if (grid) {
	            switch (this.checkBar) {
	                case exports.VIS_VISIBLE:
	                    return true;
	                case exports.VIS_HIDDEN:
	                    return false;
	                case exports.VIS_DEFAULT:
	                default:
	                    return grid.checkBar.visible;
	            }
	        }
	        return false;
	    };
	    GridExportOptions.prototype.headerVisible = function (grid) {
	        if (grid) {
	            switch (this.header) {
	                case exports.VIS_VISIBLE:
	                    return true;
	                case exports.VIS_HIDDEN:
	                    return false;
	                case exports.VIS_DEFAULT:
	                default:
	                    return grid.header.visible;
	            }
	        }
	        return false;
	    };
	    GridExportOptions.prototype.headerSummaryVisible = function (grid) {
	        // header와 독립적으로 표시되도록 한다.
	        if (grid) {
	            switch (this.headerSummary) {
	                case exports.VIS_VISIBLE:
	                    return true;
	                case exports.VIS_HIDDEN:
	                    return false;
	                case exports.VIS_DEFAULT:
	                default:
	                    return grid.headerSummary.visible;
	            }
	        }
	        return false;
	    };
	    GridExportOptions.prototype.footerVisible = function (grid) {
	        if (grid) {
	            switch (this.footer) {
	                case exports.VIS_VISIBLE:
	                    return true;
	                case exports.VIS_HIDDEN:
	                    return false;
	                case exports.VIS_DEFAULT:
	                default:
	                    return grid.footer.visible;
	            }
	        }
	        return false;
	    };
	    GridExportOptions.prototype.showIndicatorRow = function (grid) {
	        if (grid) {
	            switch (this.indicatorValue) {
	                case exports.INDICATOR_ITEM:
	                    return false;
	                case exports.INDICATOR_ROW:
	                    return true;
	                case exports.INDICATOR_DEFAULT:
	                default:
	                    return grid.rowIndicator.displayValue == RowIndicator_1.IndicatorValue.ROW;
	            }
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridExportOptions.prototype.assignFrom = function (source) {
	        var proto = Object.getPrototypeOf(this);
	        for (var p in source) {
	            if (p == "type" || p == "target") {
	                if (typeof source[p]) {
	                    var value = source[p].toUpperCase();
	                    if (p == "type" && (value == "EXCEL" || value == "CSV")) {
	                        this.type = ExportType[value];
	                    }
	                    if (p == "target" && (value == "LOCAL" || value == "REMOTE")) {
	                        this.target = ExportTarget[value];
	                    }
	                }
	            }
	            else if (p == "documentTitle" || p == "documentSubtitle" || p == "documentTail") {
	                this["_" + p] = new DocumentTitle(source[p]);
	            }
	            else {
	                var desc = Object.getOwnPropertyDescriptor(proto, p);
	                if (desc && desc.set) {
	                    desc.set.call(this, source[p]);
	                }
	            }
	        }
	    };
	    return GridExportOptions;
	}(ExportBaseOptions));
	exports.GridExportOptions = GridExportOptions;
	var DataExportOptions = /** @class */ (function (_super) {
	    __extends(DataExportOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataExportOptions(source) {
	        var _this = _super.call(this, source) || this;
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        _this.lfText = null;
	        _this.crText = null;
	        _this.seperator = null;
	        _this.exportFields = null;
	        _this.hideFields = null;
	        _this.includeFieldNames = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataExportOptions.prototype.assignFrom = function (source) {
	        var proto = Object.getPrototypeOf(this);
	        for (var p in source) {
	            if (p == "type" || p == "target") {
	                if (typeof source[p]) {
	                    var value = source[p].toUpperCase();
	                    if (p == "type" && (value == "EXCEL" || value == "CSV")) {
	                        this.type = ExportType[value];
	                    }
	                    if (p == "target" && (value == "LOCAL" || value == "REMOTE")) {
	                        this.target = ExportTarget[value];
	                    }
	                }
	            }
	            else {
	                var desc = Object.getOwnPropertyDescriptor(proto, p);
	                if (desc && desc.set) {
	                    desc.set.call(this, source[p]);
	                }
	            }
	        }
	    };
	    return DataExportOptions;
	}(ExportBaseOptions));
	exports.DataExportOptions = DataExportOptions;
	var GridMultiExportOptions = /** @class */ (function (_super) {
	    __extends(GridMultiExportOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridMultiExportOptions(mainGrid, source) {
	        var _this = _super.call(this, source) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._grids = [];
	        _this._parseGrids(mainGrid, source);
	        return _this;
	    }
	    Object.defineProperty(GridMultiExportOptions.prototype, "exportGrids", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._grids;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridMultiExportOptions.prototype._doDispose = function () {
	        for (var i = this._grids.length; i--;) {
	            delete this._grids[i];
	        }
	        this._grids = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // method
	    //-------------------------------------------------------------------------
	    GridMultiExportOptions.prototype._parseGrids = function (mainGrid, source) {
	        var exGrids = source['exportGrids'];
	        if (exGrids && Array.isArray(exGrids)) {
	            for (var i = 0, l = exGrids.length; i < l; i++) {
	                var target = {
	                    grid: exGrids[i]['grid'],
	                    sheetName: exGrids[i]['sheetName']
	                };
	                this._grids.push(target);
	            }
	        }
	    };
	    return GridMultiExportOptions;
	}(GridExportOptions));
	exports.GridMultiExportOptions = GridMultiExportOptions;
	});

	unwrapExports(ExportOptions);
	var ExportOptions_1 = ExportOptions.DocumentTitleStyle;
	var ExportOptions_2 = ExportOptions.DocumentTitle;
	var ExportOptions_3 = ExportOptions.VIS_DEFAULT;
	var ExportOptions_4 = ExportOptions.VIS_HIDDEN;
	var ExportOptions_5 = ExportOptions.VIS_VISIBLE;
	var ExportOptions_6 = ExportOptions.INDICATOR_DEFAULT;
	var ExportOptions_7 = ExportOptions.INDICATOR_ITEM;
	var ExportOptions_8 = ExportOptions.INDICATOR_ROW;
	var ExportOptions_9 = ExportOptions.PIXELS_PER_CHAR;
	var ExportOptions_10 = ExportOptions.ExportType;
	var ExportOptions_11 = ExportOptions.ExportTarget;
	var ExportOptions_12 = ExportOptions.ExportBaseOptions;
	var ExportOptions_13 = ExportOptions.GridExportOptions;
	var ExportOptions_14 = ExportOptions.DataExportOptions;
	var ExportOptions_15 = ExportOptions.GridMultiExportOptions;

	var ExporterBase_1 = createCommonjsModule(function (module, exports) {
	Object.defineProperty(exports, "__esModule", { value: true });
	var ExporterBase = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ExporterBase() {
	        this.progressMax = 0;
	        this.prepareProgress = 10;
	        this.indicatorNo = 1;
	    }
	    //-------------------------------------------------------------------------
	    // method
	    //-------------------------------------------------------------------------
	    ExporterBase.prototype.export = function (grid, options) {
	        this.grid = grid;
	        this.options = options;
	    };
	    return ExporterBase;
	}());
	exports.ExporterBase = ExporterBase;
	});

	unwrapExports(ExporterBase_1);
	var ExporterBase_2 = ExporterBase_1.ExporterBase;

	var ExportCommon = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ExportCommon.ts 
	// 2019. 07. 11. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });


	var ColumnArrayItem = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnArrayItem(column) {
	        this.colIndex = 0;
	        this.colSpan = 0;
	        this.rowIndex = 0;
	        this.rowSpan = 0;
	        this.width = 0;
	        this.valueType = Types.ValueType.TEXT;
	        this.column = column;
	        this.dataColumn = column instanceof GridColumn_1.DataColumn ? column : null;
	    }
	    return ColumnArrayItem;
	}());
	exports.ColumnArrayItem = ColumnArrayItem;
	var ExportSparkType;
	(function (ExportSparkType) {
	    ExportSparkType["NONE"] = "";
	    ExportSparkType["LINE"] = "line";
	    ExportSparkType["COLUMN"] = "column";
	    ExportSparkType["STACKED"] = "stacked";
	})(ExportSparkType = exports.ExportSparkType || (exports.ExportSparkType = {}));
	var ColumnArray = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnArray(grid, linearize, allColumns, includes, excludes) {
	        this._grid = grid;
	        this._linearize = linearize;
	        this._allColumns = allColumns;
	        this._includes = includes;
	        this._excludes = excludes;
	        this._headerRows = [];
	        this._dataRows = [];
	        this._dataColumns = [];
	        //this._sparkColumns = [];
	        this.parse();
	    }
	    Object.defineProperty(ColumnArray.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnArray.prototype, "colCount", {
	        //-------------------------------------------------------------------------
	        // method
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._headerRows.length && this._headerRows[0].length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnArray.prototype, "headerRowCount", {
	        get: function () {
	            return this._headerRows.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnArray.prototype, "dataRowCount", {
	        get: function () {
	            return this._dataRows.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ColumnArray.prototype.getHeader = function (row, col) {
	        return this._headerRows[row][col];
	    };
	    ColumnArray.prototype.getItem = function (row, col) {
	        return this._dataRows[row][col];
	    };
	    ColumnArray.prototype.setItem = function (row, col, item) {
	        this._dataRows[row][col] = item;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnArray.prototype.parse = function () {
	        var grid = this._grid;
	        var linearize = this._linearize;
	        var allColumns = this._allColumns;
	        var includes = this._includes;
	        var excludes = this._excludes;
	        var headerLevels = 1;
	        var dataLevels = 1;
	        var cnt = (allColumns || includes.length > 0) ? grid.columnCount : grid.visibleLayoutCount;
	        var i;
	        /*
	        if (!linearize) {
	            for (i = 0; i < cnt; i++) {
	                let col: GridColumn = allColumns ? grid.getColumn(i) : grid.getVisibleColumn(i);
	                if (((allColumns || col.visible) && excludes.indexOf(col.name) < 0) || (!col.visible && includes.indexOf(col.name) >= 0)) {
	                    if (col instanceof GridColumnGroup) {
	                        headerLevels = Math.max(headerLevels, col.calcHeaderLevels(!allColumns, includes, excludes));
	                        dataLevels = Math.max(dataLevels, col.calcDataLevels(!allColumns, includes, excludes));
	                    }
	                }
	            }
	        }
	        */
	        for (i = 0; i < headerLevels; i++) {
	            this._headerRows.push([]);
	        }
	        for (i = 0; i < dataLevels; i++) {
	            this._dataRows.push([]);
	        }
	        // this.parseRows(true, this._headerRows);
	        // this.parseRows(false, this._dataRows);
	        // this.$_setDataColumns(this._dataRows);
	        // this.$_setSparkInfo(this._dataRows);
	    };
	    ColumnArray.prototype.$_parseRows = function (includeHeader, rows) {
	        var grid = this._grid;
	        var linearize = this._linearize;
	        var allColumns = this._allColumns;
	        var includes = this._includes;
	        var excludes = this._excludes;
	        function addColumn(x, y, w, h, column) {
	            for (var r = 0; r < h; r++) {
	                for (var c = 0; c < w; c++) {
	                    var item = new ColumnArrayItem(column);
	                    item.colIndex = c;
	                    item.colSpan = w;
	                    item.rowIndex = r;
	                    item.rowSpan = h;
	                    rows[y + r][x + c] = item;
	                    if (column instanceof GridColumn_1.DataColumn) {
	                        item.valueType = column.valueType || Types.ValueType.TEXT;
	                    }
	                    else {
	                        item.valueType = Types.ValueType.TEXT;
	                    }
	                }
	            }
	        }
	        /*
	        function addGroup(x: number, y: number, w: number, h: number, group:GridColumnGroup) {
	            let cnt: number = (allColumns || includes.length > 0) ? group.count() : group.visibleCount();
	            if (cnt < 1) {
	                addColumn(x, y, w, h, group);
	                return;
	            }
	            if (includeHeader && group.header.visible) {
	                if (group.hideChildHeaders) {
	                    addColumn(x, y, w, h, group);
	                    return;
	                }
	                addColumn(x, y, w, 1, group);
	                y++;
	                h--;
	            }
	            if (includeHeader && group.hideChildHeaders) {
	                addColumn(x, y, w, h, group);
	                return;
	            }
	            let i: number, hh: number, ww: number;
	            let column: GridColumn;
	            if (group.isVertical()) {
	                for (i = 0; i < cnt; i++) {
	                    column = allColumns ? group.getItem(i) : includes.length > 0 ? group.getOrderedItem(i) : group.getVisibleItem(i);
	                    if (((allColumns || column.visible) && excludes.indexOf(column.name) < 0) || (!column.visible && includes.indexOf(column.name) >= 0)) {
	                        if (column instanceof GridColumnGroup) {
	                            if (i < cnt - 1) {
	                                hh = includeHeader ? column.calcHeaderLevels(!allColumns, includes, excludes) : column.calcDataLevels(!allColumns, includes, excludes);
	                            } else {
	                                hh = h;
	                            }
	                            addGroup(x, y, w, hh, column);
	                            y += hh;
	                            h -= hh;
	                        } else if (i < cnt - 1) {
	                            addColumn(x, y, w, 1, column);
	                            y++;
	                            h--;
	                        } else {
	                            addColumn(x, y, w, h, column);
	                        }
	                    }
	                }
	            } else {
	                for (i = 0; i < cnt; i++) {
	                    column = allColumns ? group.getItem(i) : includes.length > 0 ? group.getOrderedItem(i) : group.getVisibleItem(i);
	                    // column = (allColumns || includes.length > 0)? group._columns.getItem(i): group.getVisibleItem(i);
	                    if (((allColumns || column.visible) && excludes.indexOf(column.name) < 0) || (!column.visible && includes.indexOf(column.name) >= 0)) {
	                        if (column instanceof GridColumnGroup) {
	                            if (i < cnt - 1) {
	                                ww = column.calcHorz(!allColumns, includes, excludes);
	                            } else {
	                                ww = w;
	                            }
	                            addGroup(x, y, ww, h, column);
	                            x += ww;
	                            w -= ww;
	                        } else if (i < cnt - 1) {
	                            addColumn(x, y, 1, h, column);
	                            x++;
	                            w--;
	                        } else {
	                            addColumn(x, y, w, h, column);
	                        }
	                    }
	                }
	            }
	        }*/
	        var h = rows.length;
	        var x = 0;
	        var y = 0;
	        var visibleOnly = !allColumns && includes.length == 0;
	        // if (linearize) {
	        //let columns = grid.getLeafColumns(!allColumns && includes.length == 0);
	        var colcount = visibleOnly ? grid.visibleLayoutCount : grid.columnCount;
	        for (var i = 0; i < colcount; i++) {
	            var col_1 = (visibleOnly ? grid.getVisibleLayout(i).firstColumn : grid.getColumn(i));
	            if ((((allColumns || col_1.layout.visible) && excludes.indexOf(col_1.name) < 0)) || (!col_1.layout.visible && includes.indexOf(col_1.name) >= 0)) {
	                addColumn(x++, y, 1, h, col_1);
	            }
	        }
	        /*} else {
	            let colcount = (allColumns || includes.length > 0) ? grid.columnCount : grid.visibleColumnCount;
	            for (let i = 0; i < cnt; i++) {
	                let col: GridColumn = allColumns ? grid.getColumn(i) : includes.length > 0 ? grid.rootColumn.getOrderedItem(i) : grid.getVisibleColumn(i);
	                // col = (allColumns || includes.length > 0) ? grid.rootColumn.getItem(i) : grid.getVisibleColumn(i);
	                if ((((allColumns || col.visible) && excludes.indexOf(col.name) < 0)) || (!col.visible && includes.indexOf(col.name) >= 0)) {
	                    if (col instanceof GridColumnGroup) {
	                        w = col.calcHorz(!allColumns, includes, excludes);
	                        addGroup(x, y, w, h, col);
	                    } else {
	                        w = 1;
	                        addColumn(x, y, w, h, col);
	                    //}
	                    x += w;
	                }
	            }
	        }*/
	    };
	    ColumnArray.prototype.setDataColumns = function (colArr) {
	        var cols;
	        var item;
	        this._dataColumns = [];
	        for (var r = 0, rCnt = colArr.length; r < rCnt; r++) {
	            cols = [];
	            for (var c = 0, cnt = colArr[r].length; c < cnt; c++) {
	                item = colArr[r][c];
	                cols.push(item.column.name);
	            }
	            this._dataColumns.push(cols);
	        }
	    };
	    ColumnArray.prototype.setSparkInfo = function (colArr) {
	        /*
	        function findColumn(grid: GridBase, fields: number[], row: number) {
	            let dataColumns = this._dataColumns;
	            let column: GridColumn;
	            let range: ExportCellRange = {
	                startCol: undefined,
	                endCol: undefined,
	                row: undefined
	            };
	            let startField: number = fields[0]
	            let endField: number = fields[fields.length - 1];
	            let startColumn: GridColumn = grid.columnByField(startField)
	            let endColumn: GridColumn = grid.columnByField(endField);

	            if (!startColumn || !endColumn) {
	                return null;
	            }
	            let startNameName = startColumn.name;
	            let endColumnName = endColumn.name;
	            for (let r = 0, rCnt = dataColumns.length; r < rCnt; r++) {
	                for (let c = 0, cnt = dataColumns[r].length; c < cnt; c++) {
	                    startColumn == dataColumns[r][c] && (range.startCol = c, range.row = r - row);
	                    endColumn == dataColumns[r][c] && (range.endCol = c);
	                }
	            }
	            return range;
	        };
	        let item: ColumnArrayItem;
	        let column: GridColumn;
	        let render: Renderer;
	        let fields: number[];
	        let grid: GridBase;
	        this._sparkColumns = [];
	        for (let r = 0, rCnt = colArr.length; r < rCnt; r++) {
	            for (let c = 0, cnt = colArr[r].length; c < cnt; c++) {
	                item = colArr[r][c];
	                column = item.column;
	                if (column instanceof SeriesColumn) {
	                    render = column.rendererObj();
	                    if (render && (render instanceof SparkChartRenderer)) {
	                        fields = column.fields;
	                        grid = column.grid as GridBase;
	                        let range: ExportCellRange = fields.length > 0 && findColumn(grid, fields, r);
	                        if (range) {
	                            let lineType = ExportSparkType.NONE;
	                            if (render instanceof SparkLineRenderer) {
	                                lineType = ExportSparkType.LINE;
	                            } else if (render instanceof SparkColumnRenderer) {
	                                lineType = ExportSparkType.COLUMN;
	                            } else if (render instanceof SparkWinLossRenderer) {
	                                lineType = ExportSparkType.STACKED;
	                            };
	                            let colorMarker: string;
	                            let colorSeries: string;
	                            if (lineType == ExportSparkType.LINE) {
	                                colorMarker = render.pointFill ? render.pointFill.color.toHex() : undefined;
	                                colorSeries = column.styles && column.styles.line.color ? column.styles.line.color.toHex() : undefined;
	                            } else if (lineType == ExportSparkType.COLUMN || lineType == ExportSparkType.STACKED) {
	                                colorSeries = column.styles.figureBackground && column.styles.figureBackground.color ? column.styles.line.color.toHex() : undefined;
	                            }
	                            let sparkLineGroup: ExportSparkLineGroup = {
	                                type: lineType,
	                                colors: {
	                                    colorHigh: render.highFill ? render.highFill.color.toHex() : undefined,
	                                    colorLow: render.lowFill ? render.lowFill.color.toHex() : undefined,
	                                    colorFirst: render.firstFill ? render.firstFill.color.toHex() : undefined,
	                                    colorLast: render.lastFill ? render.lastFill.color.toHex() : undefined,
	                                    colorMarkers: colorMarker,
	                                    colorSeries: colorSeries
	                                },
	                                sparkLines: {},
	                                range: range
	                            };
	                            item.sparkLineGroup = sparkLineGroup;
	                            this._sparkColumns[column["$_hash"]] = item;
	                        };
	                    }
	                }
	            }
	        }
	        */
	    };
	    return ColumnArray;
	}());
	exports.ColumnArray = ColumnArray;
	var Base64 = /** @class */ (function () {
	    function Base64() {
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Base64.encode = function (input) {
	        var output = "";
	        var chr1, chr2, chr3;
	        var enc1, enc2, enc3, enc4;
	        var i = 0;
	        input = Base64.utf8_encode(input);
	        while (i < input.length) {
	            chr1 = input.charCodeAt(i++);
	            chr2 = input.charCodeAt(i++);
	            chr3 = input.charCodeAt(i++);
	            enc1 = chr1 >> 2;
	            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
	            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
	            enc4 = chr3 & 63;
	            if (isNaN(chr2)) {
	                enc3 = enc4 = 64;
	            }
	            else if (isNaN(chr3)) {
	                enc4 = 64;
	            }
	            output = output +
	                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
	                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);
	        }
	        return output;
	    };
	    Base64.decode = function (input) {
	        var output = "";
	        var chr1, chr2, chr3;
	        var enc1, enc2, enc3, enc4;
	        var i = 0;
	        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
	        while (i < input.length) {
	            enc1 = Base64._keyStr.indexOf(input.charAt(i++));
	            enc2 = Base64._keyStr.indexOf(input.charAt(i++));
	            enc3 = Base64._keyStr.indexOf(input.charAt(i++));
	            enc4 = Base64._keyStr.indexOf(input.charAt(i++));
	            chr1 = (enc1 << 2) | (enc2 >> 4);
	            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
	            chr3 = ((enc3 & 3) << 6) | enc4;
	            output = output + String.fromCharCode(chr1);
	            if (enc3 != 64) {
	                output = output + String.fromCharCode(chr2);
	            }
	            if (enc4 != 64) {
	                output = output + String.fromCharCode(chr3);
	            }
	        }
	        output = Base64.utf8_decode(output);
	        return output;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    Base64.utf8_encode = function (string) {
	        string = string.replace(/\r\n/g, "\n");
	        var utftext = "";
	        for (var n = 0; n < string.length; n++) {
	            var c = string.charCodeAt(n);
	            if (c < 128) {
	                utftext += String.fromCharCode(c);
	            }
	            else if ((c > 127) && (c < 2048)) {
	                utftext += String.fromCharCode((c >> 6) | 192);
	                utftext += String.fromCharCode((c & 63) | 128);
	            }
	            else {
	                utftext += String.fromCharCode((c >> 12) | 224);
	                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
	                utftext += String.fromCharCode((c & 63) | 128);
	            }
	        }
	        return utftext;
	    };
	    Base64.utf8_decode = function (utftext) {
	        var string = "";
	        var i = 0;
	        var c = 0, c2 = 0, c3 = 0;
	        var len = utftext.length;
	        while (i < len) {
	            c = utftext.charCodeAt(i);
	            if (c < 128) {
	                string += String.fromCharCode(c);
	                i++;
	            }
	            else if ((c > 191) && (c < 224)) {
	                c2 = utftext.charCodeAt(i + 1);
	                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
	                i += 2;
	            }
	            else {
	                c2 = utftext.charCodeAt(i + 1);
	                c3 = utftext.charCodeAt(i + 2);
	                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
	                i += 3;
	            }
	        }
	        return string;
	    };
	    return Base64;
	}());
	exports.Base64 = Base64;
	});

	unwrapExports(ExportCommon);
	var ExportCommon_1 = ExportCommon.ColumnArrayItem;
	var ExportCommon_2 = ExportCommon.ExportSparkType;
	var ExportCommon_3 = ExportCommon.ColumnArray;
	var ExportCommon_4 = ExportCommon.Base64;

	var CsvExpoerters = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CsvExpoerters.ts 
	// 2019. 07. 18. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });







	var GridCsvExporter = /** @class */ (function (_super) {
	    __extends(GridCsvExporter, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridCsvExporter() {
	        return _super.call(this) || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridCsvExporter.prototype.export = function (grid, options) {
	        this.export(grid, options);
	        this.grid = grid;
	        var opts = this.options = options;
	        this.indicator = opts.indicatorVisible(grid) ? grid.rowIndicator : null,
	            this.header = opts.headerVisible(grid) ? grid.header : null,
	            this.headerSummary = opts.headerSummaryVisible(grid) ? grid.headerSummary : null,
	            this.footer = opts.footerVisible(grid) ? grid.footer : null,
	            this.indicatorHead = grid.rowIndicator.headText || "No",
	            this.indicatorFoot = grid.rowIndicator.footText || "",
	            this.indicatorSummary = grid.rowIndicator.sumText,
	            this.setProgress = function (pos) {
	                // TODO
	                // grid.setExportProgress(this.progressMax, pos+this.prepareProgress); 
	            };
	        // TODO
	        /*
	        if (grid instanceof TreeView) {
	            if (options.isAllItems()) {
	                context.allItems = grid.getAllItems();
	            }
	            this.$_buildTreeBook(context, function () {
	                save(self);
	            });
	        } else {
	        */
	        /*
	        if (options.isAllItems() && grid.isRowGrouped()) {
	            context.allItems = grid.getAllItems();
	            var fixed = grid.layoutManager().fixedItemCount();
	            if ( fixed> 0) {
	                for (var i=0; i<fixed; i++) {
	                    context.allItems.splice(i,0,grid.getItem(i));
	                }
	            }
	        } else if (options.isPagingAllItems() && grid.isPaged()) {
	            context.allItems = grid.getPagingAllItems();
	        } else if (options.isOnlyCheckedItems() && !grid.isRowGrouped()) {
	            context.allItems = grid.getCheckedItems();
	        }
	        */
	        this.done = function () {
	            this.save();
	        };
	        this.buildBook();
	        //}
	    };
	    GridCsvExporter.prototype.prepare = function () {
	    };
	    GridCsvExporter.prototype.finallize = function () {
	    };
	    GridCsvExporter.prototype.buildBook = function () {
	        //for (let i = 0, cnt = this.grids.length; i < cnt; i++) {
	        this.buildSheet(this.grid);
	        //}
	    };
	    GridCsvExporter.prototype.buildSheet = function (grid) {
	        if (this.header) {
	            this.buildHeader(grid);
	        }
	        if (this.headerSummary) {
	            this.buildHeaderSummary(grid);
	        }
	        this.buildItems(grid);
	        if (this.footer) {
	            this.buildFooter(grid);
	        }
	        this.done();
	    };
	    GridCsvExporter.prototype.addQuatation = function (value, dataType) {
	        if (value != null) {
	            if (this.options) {
	                var options = this.options;
	                var lfText = options.replaceCrText;
	                var crText = options.replaceLfText;
	                lfText && value && (value = value.replace(/\n/g, lfText));
	                crText && value && (value = value.replace(/\r/g, crText));
	            }
	            if (dataType === Types.ValueType.TEXT || value.indexOf("\n") >= 0 || value.indexOf(",") >= 0 || value.indexOf("\"") >= 0) {
	                value = '"' + value.replace(/\"/g, '""') + '"';
	            }
	        }
	        return value === null ? "" : value;
	    };
	    GridCsvExporter.prototype.buildHeader = function (grid) {
	        var texts = [];
	        this.indicator && (texts.push(this.indicatorHead));
	        var cnt = grid.visibleLayoutCount;
	        for (var i = 0; i < cnt; i++) {
	            var col = grid.getVisibleLayout(i).firstColumn;
	            texts.push(this.addQuatation(col.header.text));
	        }
	        this._rows.push(texts.join(','));
	    };
	    GridCsvExporter.prototype.buildHeaderSummary = function (grid) {
	        var s;
	        var row = [];
	        var options = this.options;
	        for (var i = 0, cnt = grid.visibleLayoutCount; i < cnt; i++) {
	            var layout = grid.getVisibleLayout(i);
	            var col = layout.firstColumn;
	            var cell = grid.headerSummary.getCell(layout);
	            var v = cell.value;
	            if (typeof v === "number") {
	                s = isNaN(v) ? cell.text : String(v);
	            }
	            else if (v instanceof Date) {
	                if (options.datetimeCallback) {
	                    v = options.datetimeCallback(-1, col.name, v);
	                    if (v instanceof Date) {
	                        s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                    }
	                    else {
	                        s = v;
	                    }
	                }
	                else {
	                    s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                }
	            }
	            else {
	                s = v == null ? cell.text : String(v);
	            }
	            row.push(this.addQuatation(s));
	        }
	        this._rows.push(row.join(','));
	    };
	    GridCsvExporter.prototype.buildFooter = function (grid) {
	        var s;
	        var options = this.options;
	        var footer = grid.footer;
	        var footerCnt = 1; //footer.count;
	        for (var i = 0; i < footerCnt; i++) {
	            var row = [];
	            if (this.indicator) {
	                row.push(i == 0 ? this.indicatorFoot : "");
	            }
	            for (var j = 0, cnt = grid.visibleLayoutCount; j < cnt; j++) {
	                var layout = grid.getVisibleLayout(j);
	                var col = layout.firstColumn;
	                var cell = footer.getCell(layout);
	                var v = cell.value;
	                if (typeof v == "number") {
	                    s = isNaN(v) ? cell.text : String(v);
	                }
	                else if (v instanceof Date) {
	                    if (options.datetimeCallback) {
	                        v = options.datetimeCallback(-1, col.name, v);
	                        if (v instanceof Date) {
	                            s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                        }
	                        else {
	                            s = v;
	                        }
	                    }
	                    else {
	                        s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                    }
	                }
	                else {
	                    s = v == null ? cell.text : String(v);
	                }
	                row.push(this.addQuatation(s));
	            }
	            this._rows.push(row.join(","));
	        }
	    };
	    GridCsvExporter.prototype.buildItems = function (grid) {
	        var cnt = this.allItems ? this.allItems.length : grid.itemSource.itemCount;
	        var allItems = this.allItems;
	        for (var i = 0; i < cnt; i++) {
	            var item = (allItems ? allItems[i] : grid.getItem(i));
	            this.buildRow(grid, item);
	            /*
	            if (item instanceof GridRow) {
	            } else if (item instanceof GroupItemImpl) {
	                this.buildGroupItem(this, item);
	            } else if (item instanceof MergedGroupHeader) {
	                this.buildMergedGroupHeader(this, item);
	            } else if (item instanceof MergedGroupFooter) {
	                this.buildMergedGroupFooter(this, item);
	            } else if (item instanceof GroupFooter) {
	                this.buildGroupFooter(this, item);
	            }
	            */
	        }
	    };
	    GridCsvExporter.prototype.buildRow = function (grid, item) {
	        var s;
	        var options = this.options;
	        var cnt = grid.visibleLayoutCount;
	        var displayCallback;
	        var row = [];
	        if (this.indicator) {
	            var ino = options.showIndicatorRow(grid) ? item.dataRow : this.indicatorNo++;
	            row.push(ino.toString());
	        }
	        for (var i = 0; i < cnt; i++) {
	            var col = grid.getVisibleLayout(i).firstColumn;
	            var field = void 0;
	            s = undefined;
	            if (col instanceof GridColumn_1.DataColumn) {
	                field = col.getField();
	                var v = item.getData(col.dataIndex);
	                // TODO
	                // displayCallback = col.displayCallback && col.displayCallback()
	                var cellIndex = new CellIndex_1.CellIndex(grid, item.index, col); // TODO: CellIndex.temp
	                switch (field.dataType) {
	                    case Types.ValueType.NUMBER:
	                        if (isNaN(v) || v == null) {
	                            s = "";
	                        }
	                        else if (options.numberCallback || displayCallback) {
	                            s = options.numberCallback ? options.numberCallback(item.index, col.name, v) : displayCallback();
	                        }
	                        else {
	                            s = String(v);
	                        }
	                        break;
	                    case Types.ValueType.BOOLEAN:
	                        if (v != null) {
	                            if (options.booleanCallback || displayCallback) {
	                                v = options.booleanCallback ? options.booleanCallback(item.index, col.name, v) : displayCallback();
	                            }
	                            else if (options.booleanFormat) {
	                                v = options.booleanFormatter.formatValue(v);
	                            }
	                            s = String(v);
	                        }
	                        break;
	                    case Types.ValueType.DATE:
	                    case Types.ValueType.DATETIME:
	                        if (v) {
	                            if (options.datetimeCallback || displayCallback) {
	                                v = options.datetimeCallback ? options.datetimeCallback(item.index, col.name, v) : displayCallback();
	                                if (v instanceof Date) {
	                                    s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                                }
	                                else {
	                                    s = v;
	                                }
	                            }
	                            else {
	                                s = DateTimeConverter_1.DateTimeConverter.Default.getText(v);
	                            }
	                        }
	                        break;
	                    case Types.ValueType.OBJECT:
	                        break;
	                    default:
	                        v = options.textCallback ? options.textCallback(item.index, col.name, v) :  displayCallback();
	                        s = v != null ? String(v) : "";
	                }
	            }
	            row.push(this.addQuatation(s, field && field.dataType));
	        }
	        this._rows.push(row.join(","));
	    };
	    GridCsvExporter.prototype.buildGroupHeader = function (grid, item) {
	        /*
	        let s = grid.rowGroup.getHeaderText(item)
	        let ret = [];
	        this.rowIndicator && !this.options.isrowIndicatorDataRow(grid) && ret.push(this.rowIndicatorNo++);
	        ret.push(this.addQuat(s));
	        let row = ret.join(",");
	        this.rows.push(row);
	        */
	    };
	    GridCsvExporter.prototype.buildGroupFooter = function (grid, item) {
	        /*
	        let rowGroup = grid.rowGroup();
	        let ret = [];
	        let cols = this.colArr;
	        let cnt = cols.length;
	        let col;
	        let v, s;
	        this.rowIndicator && !this.options.isrowIndicatorDataRow(grid) && ret.push(this.rowIndicatorNo++);
	        for (let i = 0; i < cnt; i++) {
	            col = cols[i];
	            s = "";
	            v = RowGroupFooterCell.getValue(item, col);
	            if (v instanceof Date) {
	                if (this.options._datetimeCallback) {
	                    v = this.options._datetimeCallback(item.index(), col.name(), v);
	                    if (v instanceof Date) {
	                        s = DatetimeConverter.Default.getText(v);
	                    } else {
	                        s = v;
	                    }
	                } else {
	                    s = DatetimeConverter.Default.getText(v);
	                }
	            } else if (isNaN(v)) {
	                if (item.index() > -1) {
	                    if (v === undefined || typeof v === "number") {
	                        let index = CellIndex.temp(grid, item.index(), col);
	                        let cell = rowGroup.getFooterCell(index);
	                        s = cell.displayText() || "";
	                    } else {
	                        s = String(v);
	                    }
	                } else {
	                    s = col.footer().groupText();
	                }
	            } else if (typeof v === "number") {
	                s = String(v);
	            };
	            ret[ret.length] = this.addQuat(s);
	        }
	        let row = ret.join(",");
	        this.rows.push(row);
	        */
	    };
	    GridCsvExporter.prototype.buildMergedGroupHeader = function (grid, item) {
	        /*
	        let s = grid.rowGroup().getHeaderText(item)
	        let ret = [];
	        let level = item.level();
	        this.rowIndicator && !this.options.isrowIndicatorDataRow(grid) && ret.push(this.rowIndicatorNo++);
	        for (let c = 0; c < level - 1; c++) {
	            ret[ret.length] = "";
	        }
	        ret.push(this.addQuat(s));
	        let row = ret.join(",");
	        this.rows.push(row);
	        */
	    };
	    GridCsvExporter.prototype.buildMergedGroupFooter = function (grid, item) {
	        /*
	        let rowGroup = grid.rowGroup();
	        let ret = [];
	        let level = item.level();
	        let cols = this.colArr;
	        let cnt = cols.length;
	        let v, s, col;
	        this.rowIndicator && !this.options.isrowIndicatorDataRow(grid) && ret.push(this.rowIndicatorNo++);
	        for (let c = 0; c < level - 1; c++) {
	            ret[ret.length] = "";
	        }
	        for (; c < cnt; c++) {
	            col = cols[c];
	            s = "";
	            v = RowGroupFooterCell.getValue(item, col);
	            if (v instanceof Date) {
	                if (this.options._datetimeCallback) {
	                    v = this.options._datetimeCallback(item.index(), col.name(), v);
	                    if (v instanceof Date) {
	                        s = DatetimeConverter.Default.getText(v);
	                    } else {
	                        s = v;
	                    }
	                } else {
	                    s = DatetimeConverter.Default.getText(v);
	                }
	            } else if (isNaN(v)) {
	                if (item.index() > -1) {
	                    if (v === undefined || typeof v === "number") {
	                        let index = CellIndex.temp(grid, item.index(), col);
	                        let cell = rowGroup.getFooterCell(index);
	                        s = cell.displayText() || "";
	                    } else {
	                        s = String(v);
	                    }
	                } else {
	                    s = col.footer().groupText();
	                }
	            } else if (typeof v === "number") {
	                s = String(v);
	            };
	            ret[ret.length] = this.addQuat(s);
	        }
	        let row = ret.join(",");
	        this.rows.push(row);
	        */
	    };
	    /*
	    protected buildTreeBook(): void {
	        for (let i = 0, cnt = this.grids.length; i < cnt; i++) {
	            this.buildSheet(this.grids[i]);
	        }
	    }
	    protected buildTreeSheet(grid: TreeView): void {
	        if (this.header) {
	            this.buildTreeHeader(grid);
	        };
	        if (this.headerSummary) {
	            this.buildTreeHeaderSummary(grid);
	        };
	        this.buildTreeItems(grid);
	        if (this.footer) {
	            this.buildTreeFooter(grid);
	        };
	        this.done();
	    }
	    protected buildTreeHeader(grid: TreeView): void {
	        this.buildHeader(grid);
	    }
	    protected buildTreeHeaderSummary(grid: TreeView): void {
	        this.buildHeaderSummary(grid);
	    }
	    protected buildTreeFooter(grid: TreeView): void {
	        this.buildFooter(grid);
	    }
	    protected buildTreeItems(grid: TreeView): void {
	        let cnt = this.allItems ? this.allItems.length : grid.itemCount;
	        let allItems = this.allItems;
	        let item;
	        let rows = this.rows;
	        for (let i = 0; i < cnt; i++) {
	            item = allItems ? allItems[i] : grid.getItem(i);
	            if (item instanceof TreeItem) {
	                this.buildTreeRow(grid, item);
	            } else {
	                throw "Unkonw tree item type";
	            }
	        }
	    }
	    protected buildTreeRow(grid: TreeView, item: GridRow): void {
	        this.buildRow(grid, item);
	    }
	    */
	    GridCsvExporter.prototype.save = function () {
	        var options = this.options;
	        var fileName = options.fileName || "realgrid.csv";
	        var data = "\ufeff" + this._rows.join("\n");
	        options.target == ExportOptions.ExportTarget.LOCAL ? this.saveLocal(fileName, data) : this.saveServer(fileName, data);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridCsvExporter.prototype.saveLocal = function (fileName, data) {
	        data = data;
	        var blob = new Blob([data], { type: "text/csv charset=UTF-8" });
	        if (window.navigator.msSaveOrOpenBlob) {
	            window.navigator.msSaveOrOpenBlob(blob, fileName);
	        }
	        else if (window.navigator.msSaveBlob) {
	            window.navigator.msSaveBlob(blob, fileName);
	        }
	        else {
	            var a = document.createElement("a");
	            document.body.appendChild(a);
	            var url = URL.createObjectURL(blob);
	            a.href = url;
	            a.download = fileName;
	            a.click();
	            document.body.removeChild(a);
	        }
	    };
	    GridCsvExporter.prototype.saveServer = function (fileName, data) {
	        var url = this.options.url;
	        var base64 = ExportCommon.Base64.encode(data);
	        var formtag = '<form name="tempForm" action="' + url + '" method="post">';
	        formtag += '<input type="hidden" name="fileName" value = "' + fileName + '"/>';
	        formtag += '<input type="hidden" name="data" value = "' + base64 + '"/>';
	        formtag += '<input id="submitBtn" type="submit"/>';
	        formtag += '</form>';
	        var div = document.createElement('div');
	        div.innerHTML = formtag;
	        document.body.appendChild(div);
	        document.getElementById("submitBtn").click();
	        document.body.removeChild(div);
	    };
	    GridCsvExporter.prototype.prepareColumns = function () {
	    };
	    return GridCsvExporter;
	}(ExporterBase_1.ExporterBase));
	exports.GridCsvExporter = GridCsvExporter;
	});

	unwrapExports(CsvExpoerters);
	var CsvExpoerters_1 = CsvExpoerters.GridCsvExporter;

	var SummaryRuntimes = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SummaryExpressionRuntime.ts
	// 2019. 08. 23. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var SummaryExpressionRuntime = /** @class */ (function (_super) {
	    __extends(SummaryExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SummaryExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    SummaryExpressionRuntime.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SummaryExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (SummaryExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return SummaryExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    SummaryExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case SummaryExpressionRuntime.ID_COUNT:
	                return this._getCount();
	            case SummaryExpressionRuntime.ID_SUM:
	                return this._getSum();
	            case SummaryExpressionRuntime.ID_MAX:
	                return this._getMax();
	            case SummaryExpressionRuntime.ID_MIN:
	                return this._getMin();
	            case SummaryExpressionRuntime.ID_AVG:
	                return this._getAvg();
	            case SummaryExpressionRuntime.ID_VAR:
	                return this._getVar();
	            case SummaryExpressionRuntime.ID_VARP:
	                return this._getVarp();
	            case SummaryExpressionRuntime.ID_STDEV:
	                return this._getStdev();
	            case SummaryExpressionRuntime.ID_STDEVP:
	                return this._getStdevp();
	            case SummaryExpressionRuntime.ID_DCOUNT:
	                return this._getDataCount();
	            case SummaryExpressionRuntime.ID_DSUM:
	                return this._getDataSum();
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    SummaryExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    SummaryExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SummaryExpressionRuntime.ID_COUNT = 0;
	    SummaryExpressionRuntime.ID_SUM = 1;
	    SummaryExpressionRuntime.ID_MAX = 2;
	    SummaryExpressionRuntime.ID_MIN = 3;
	    SummaryExpressionRuntime.ID_AVG = 4;
	    SummaryExpressionRuntime.ID_VAR = 5;
	    SummaryExpressionRuntime.ID_VARP = 6;
	    SummaryExpressionRuntime.ID_STDEV = 7;
	    SummaryExpressionRuntime.ID_STDEVP = 8;
	    SummaryExpressionRuntime.ID_DCOUNT = 9;
	    SummaryExpressionRuntime.ID_DSUM = 10;
	    SummaryExpressionRuntime.IDENTS = {
	        count: SummaryExpressionRuntime.ID_COUNT,
	        sum: SummaryExpressionRuntime.ID_SUM,
	        max: SummaryExpressionRuntime.ID_MAX,
	        min: SummaryExpressionRuntime.ID_MIN,
	        avg: SummaryExpressionRuntime.ID_AVG,
	        "var": SummaryExpressionRuntime.ID_VAR,
	        varp: SummaryExpressionRuntime.ID_VARP,
	        stdev: SummaryExpressionRuntime.ID_STDEV,
	        stdevp: SummaryExpressionRuntime.ID_STDEVP,
	        dcount: SummaryExpressionRuntime.ID_DCOUNT,
	        dsum: SummaryExpressionRuntime.ID_DSUM
	    };
	    return SummaryExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.SummaryExpressionRuntime = SummaryExpressionRuntime;
	var ColumnSummaryRuntime = /** @class */ (function (_super) {
	    __extends(ColumnSummaryRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnSummaryRuntime() {
	        return _super.call(this) || this;
	    }
	    ColumnSummaryRuntime.prototype._doDispose = function () {
	        this._grid = null;
	        this._ds = null;
	        this._column = null;
	        this._summarizer = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnSummaryRuntime.prototype.setColumn = function (column, summarizer) {
	        this._column = column;
	        this._grid = column.grid;
	        this._ds = this._grid.dataSource;
	        this._fieldCount = this._ds.fieldCount;
	        this._summarizer = summarizer;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnSummaryRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (SummaryExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return SummaryExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    ColumnSummaryRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._summarizer) {
	            if (index < 0 || index >= this._fieldCount) {
	                throw new Expression.ExpressionEvaluationError("Data field index out of bounds: " + index);
	            }
	            switch (idKey) {
	                case SummaryExpressionRuntime.ID_SUM:
	                    return this._summarizer.getSum(index);
	                case SummaryExpressionRuntime.ID_COUNT:
	                    return this._summarizer.getCount(index);
	                case SummaryExpressionRuntime.ID_MAX:
	                    return this._summarizer.getMax(index);
	                case SummaryExpressionRuntime.ID_MIN:
	                    return this._summarizer.getMin(index);
	                case SummaryExpressionRuntime.ID_AVG:
	                    return this._summarizer.getAvg(index);
	                case SummaryExpressionRuntime.ID_VAR:
	                    return this._summarizer.getVar(index);
	                case SummaryExpressionRuntime.ID_VARP:
	                    return this._summarizer.getVarp(index);
	                case SummaryExpressionRuntime.ID_STDEV:
	                    return this._summarizer.getStdev(index);
	                case SummaryExpressionRuntime.ID_STDEVP:
	                    return this._summarizer.getStdevp(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            switch (idKey) {
	                case SummaryExpressionRuntime.ID_SUM:
	                case SummaryExpressionRuntime.ID_COUNT:
	                    return 0;
	                case SummaryExpressionRuntime.ID_MAX:
	                case SummaryExpressionRuntime.ID_MIN:
	                case SummaryExpressionRuntime.ID_AVG:
	                case SummaryExpressionRuntime.ID_VAR:
	                case SummaryExpressionRuntime.ID_VARP:
	                case SummaryExpressionRuntime.ID_STDEV:
	                case SummaryExpressionRuntime.ID_STDEVP:
	                    return NaN;
	            }
	            return undefined;
	        }
	    };
	    ColumnSummaryRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (this._summarizer && this._ds) {
	            var idx = capitalized ? this._ds.getFieldIndexC(index) : this._ds.getFieldIndex(index);
	            if (idx < 0 || idx >= this._fieldCount) {
	                throw new Expression.ExpressionEvaluationError("Data field index out of bounds: " + idx);
	            }
	            switch (idKey) {
	                case SummaryExpressionRuntime.ID_SUM:
	                    return this._summarizer.getSum(idx);
	                case SummaryExpressionRuntime.ID_COUNT:
	                    return this._summarizer.getCount(idx);
	                case SummaryExpressionRuntime.ID_MAX:
	                    return this._summarizer.getMax(idx);
	                case SummaryExpressionRuntime.ID_MIN:
	                    return this._summarizer.getMin(idx);
	                case SummaryExpressionRuntime.ID_AVG:
	                    return this._summarizer.getAvg(idx);
	                case SummaryExpressionRuntime.ID_VAR:
	                    return this._summarizer.getVar(idx);
	                case SummaryExpressionRuntime.ID_VARP:
	                    return this._summarizer.getVarp(idx);
	                case SummaryExpressionRuntime.ID_STDEV:
	                    return this._summarizer.getStdev(idx);
	                case SummaryExpressionRuntime.ID_STDEVP:
	                    return this._summarizer.getStdevp(idx);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            switch (idKey) {
	                case SummaryExpressionRuntime.ID_SUM:
	                case SummaryExpressionRuntime.ID_COUNT:
	                    return 0;
	                case SummaryExpressionRuntime.ID_MAX:
	                case SummaryExpressionRuntime.ID_MIN:
	                case SummaryExpressionRuntime.ID_AVG:
	                case SummaryExpressionRuntime.ID_VAR:
	                case SummaryExpressionRuntime.ID_VARP:
	                case SummaryExpressionRuntime.ID_STDEV:
	                case SummaryExpressionRuntime.ID_STDEVP:
	                    return NaN;
	            }
	            return undefined;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnSummaryRuntime.prototype._getCount = function () {
	        return this._summarizer ? this._summarizer.getCount(this._column.dataIndex) : 0;
	    };
	    ColumnSummaryRuntime.prototype._getSum = function () {
	        return this._summarizer ? this._summarizer.getSum(this._column.dataIndex) : 0;
	    };
	    ColumnSummaryRuntime.prototype._getMax = function () {
	        return this._summarizer ? this._summarizer.getMax(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getMin = function () {
	        return this._summarizer ? this._summarizer.getMin(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getAvg = function () {
	        return this._summarizer ? this._summarizer.getAvg(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getVar = function () {
	        return this._summarizer ? this._summarizer.getVar(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getVarp = function () {
	        return this._summarizer ? this._summarizer.getVarp(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getStdev = function () {
	        return this._summarizer ? this._summarizer.getStdev(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getStdevp = function () {
	        return this._summarizer ? this._summarizer.getStdevp(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getDataCount = function () {
	        return this._summarizer ? this._summarizer.getDataCount(this._column.dataIndex) : NaN;
	    };
	    ColumnSummaryRuntime.prototype._getDataSum = function () {
	        return this._summarizer ? this._summarizer.getDataSum(this._column.dataIndex) : NaN;
	    };
	    return ColumnSummaryRuntime;
	}(SummaryExpressionRuntime));
	exports.ColumnSummaryRuntime = ColumnSummaryRuntime;
	var RowGroupSummaryRuntime = /** @class */ (function (_super) {
	    __extends(RowGroupSummaryRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupSummaryRuntime() {
	        return _super.call(this) || this;
	    }
	    RowGroupSummaryRuntime.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupSummaryRuntime.prototype, "item", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** item */
	        get: function () {
	            return this._item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupSummaryRuntime.prototype.setItem = function (value) {
	        this._item = value;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupSummaryRuntime.prototype._getCount = function () {
	        return this._item.getNumber(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getSum = function () {
	        return this._item.getSum(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getMax = function () {
	        return this._item.getMax(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getMin = function () {
	        return this._item.getMin(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getAvg = function () {
	        return this._item.getAvg(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getVar = function () {
	        return this._item.getVar(this._column.dataIndex, 1);
	    };
	    RowGroupSummaryRuntime.prototype._getVarp = function () {
	        return this._item.getVar(this._column.dataIndex, 0);
	    };
	    RowGroupSummaryRuntime.prototype._getStdev = function () {
	        return this._item.getStdev(this._column.dataIndex, 1);
	    };
	    RowGroupSummaryRuntime.prototype._getStdevp = function () {
	        return this._item.getStdev(this._column.dataIndex, 0);
	    };
	    RowGroupSummaryRuntime.prototype._getDataCount = function () {
	        return this._item.getDataCount(this._column.dataIndex);
	    };
	    RowGroupSummaryRuntime.prototype._getDataSum = function () {
	        return this._item.getDataSum(this._column.dataIndex);
	    };
	    return RowGroupSummaryRuntime;
	}(ColumnSummaryRuntime));
	exports.RowGroupSummaryRuntime = RowGroupSummaryRuntime;
	});

	unwrapExports(SummaryRuntimes);
	var SummaryRuntimes_1 = SummaryRuntimes.SummaryExpressionRuntime;
	var SummaryRuntimes_2 = SummaryRuntimes.ColumnSummaryRuntime;
	var SummaryRuntimes_3 = SummaryRuntimes.RowGroupSummaryRuntime;

	var ColumnCollection_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ColumnCollection.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var ColumnCollection = /** @class */ (function (_super) {
	    __extends(ColumnCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnCollection(owner) {
	        var _this = _super.call(this) || this;
	        _this._columns = [];
	        _this._nameMap = {};
	        _this._owner = owner;
	        return _this;
	    }
	    ColumnCollection.prototype._doDispose = function () {
	        this._columns = null;
	        this._owner = null;
	        this._nameMap = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnCollection.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._columns.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnCollection.prototype, "columns", {
	        /** columns */
	        get: function () {
	            return this._columns.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnCollection.prototype.getColumn = function (index) {
	        return this._columns[index];
	    };
	    ColumnCollection.prototype.setColumns = function (columns) {
	        var items = this._columns;
	        items.length = 0;
	        this._nameMap = {};
	        if (columns) {
	            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {
	                var col = columns_1[_i];
	                var column = this._addColumn(col);
	                if (!column) {
	                    throw new Error("column is undefined");
	                }
	                column["$_owner"] = this;
	            }
	        }
	    };
	    ColumnCollection.prototype.add = function (column, index) {
	        var col = this._addColumn(column, index === undefined ? -1 : index);
	        if (col != null) {
	            col["$_owner"] = this;
	        }
	        return col;
	    };
	    ColumnCollection.prototype.remove = function (column) {
	        if (this._removeColumn(column)) {
	            column["$_owner"] = undefined;
	            return true;
	        }
	        return false;
	    };
	    ColumnCollection.prototype.resetIndices = function () {
	        if (this._owner) {
	            for (var i = 0, cnt = this._columns.length; i < cnt; i++) {
	                var col = this._columns[i];
	                col["$_setIndex"](i);
	                col["_resetIndices"](this._owner);
	            }
	        }
	    };
	    // TODO 점검.
	    ColumnCollection.prototype.resetSortStates = function () {
	        if (this._owner) {
	            var sortDirections = this._owner.getSortDirections();
	            var sortFields = this._owner.getSortFields();
	            for (var i = 0, cnt = this._columns.length; i < cnt; i++) {
	                var col = this._columns[i];
	                if (col instanceof GridColumn_1.DataColumn) {
	                    col.sortOrder = sortFields.indexOf(col.dataIndex);
	                    col.sortDirection = sortDirections[col.sortOrder];
	                }
	            }
	        }
	    };
	    ColumnCollection.prototype.columnByName = function (name) {
	        return this._nameMap[name];
	    };
	    ColumnCollection.prototype.columnByField = function (field) {
	        if (field >= 0) {
	            for (var i = 0, cnt = this.count; i < cnt; i++) {
	                var column = this.getColumn(i);
	                if (column instanceof GridColumn_1.DataColumn && column.dataIndex == field) {
	                    return column;
	                }
	            }
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnCollection.prototype._addColumn = function (column, index) {
	        if (index === void 0) { index = -1; }
	        var items = this._columns;
	        if (column && !(column instanceof GridColumn_1.GridColumn)) {
	            column = GridBase_1.GridBase.createColumn(column);
	        }
	        if (column instanceof GridColumn_1.GridColumn) {
	            if (items.indexOf(column) >= 0) {
	                throw new Error("column is already contained");
	            }
	            //column._setParent(this._owner);
	            if (index < 0) {
	                items.push(column);
	            }
	            else {
	                items.splice(index, 0, column);
	            }
	            var name_1 = column.name;
	            if (name_1) {
	                this._nameMap[name_1] = column;
	            }
	            return column;
	        }
	        return null;
	    };
	    ColumnCollection.prototype._removeColumn = function (column) {
	        var i = this._columns.indexOf(column);
	        if (i >= 0) {
	            this._columns.splice(i, 1);
	            return true;
	        }
	        return false;
	    };
	    return ColumnCollection;
	}(Base_1.Base));
	exports.ColumnCollection = ColumnCollection;
	});

	unwrapExports(ColumnCollection_1);
	var ColumnCollection_2 = ColumnCollection_1.ColumnCollection;

	var GridHeader_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridHeader.ts
	// 2019. 07. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var HeaderCell = /** @class */ (function (_super) {
	    __extends(HeaderCell, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderCell() {
	        var _this = _super.call(this, "headerCell") || this;
	        _this._itemOffset = 2;
	        _this._itemGap = 2;
	        _this._imageIndex = -1;
	        _this._checkLocation = Types.ColumnHeaderItemLocation.NONE;
	        _this._imageLocation = Types.ColumnHeaderItemLocation.NONE;
	        _this._checked = false;
	        _this._showTooltip = true;
	        return _this;
	    }
	    HeaderCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(HeaderCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            this._text = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "template", {
	        /** template */
	        get: function () {
	            return this._template;
	        },
	        set: function (value) {
	            this._template = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "itemOffset", {
	        /** itemOffset */
	        get: function () {
	            return this._itemOffset;
	        },
	        set: function (value) {
	            this._itemOffset = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "itemGap", {
	        /** itemGap */
	        get: function () {
	            return this._itemGap;
	        },
	        set: function (value) {
	            this._itemGap = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "imageList", {
	        /** imageList */
	        get: function () {
	            return this._imageList;
	        },
	        set: function (value) {
	            this._imageList = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "imageIndex", {
	        /** imageIndex */
	        get: function () {
	            return this._imageIndex;
	        },
	        set: function (value) {
	            this._imageIndex = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "imageUrl", {
	        /** imageUrl */
	        get: function () {
	            return this._imageUrl;
	        },
	        set: function (value) {
	            this._imageUrl = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "checkLocation", {
	        /** checkLocation */
	        get: function () {
	            return this._checkLocation;
	        },
	        set: function (value) {
	            this._checkLocation = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "imageLocation", {
	        /** imageLocation */
	        get: function () {
	            return this._imageLocation;
	        },
	        set: function (value) {
	            this._imageLocation = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "checked", {
	        /** checked */
	        get: function () {
	            return this._checked;
	        },
	        set: function (value) {
	            this._checked = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "showTooltip", {
	        /** showTooltip */
	        get: function () {
	            return this._showTooltip;
	        },
	        set: function (value) {
	            this._showTooltip = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HeaderCell.prototype, "tooltip", {
	        /** tooltip */
	        get: function () {
	            return this._tooltip;
	        },
	        set: function (value) {
	            this._tooltip = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return HeaderCell;
	}(GridCell_1.GridCell));
	exports.HeaderCell = HeaderCell;
	var GridHeader = /** @class */ (function (_super) {
	    __extends(GridHeader, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridHeader(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minRowHeight = 21;
	        _this._minHeight = 23;
	        _this._height = 0;
	        _this._resizable = false;
	        _this._sortable = true;
	        _this._filterable = true;
	        // private _subTextLocation = SubTextLocation.LOWER;
	        _this._subTextGap = 1;
	        _this._itemOffset = 2;
	        _this._itemGap = 2;
	        _this._showSelection = false;
	        _this._showTooltip = false;
	        //private _heightFill = HeaderHeightFill.DEFAULT;
	        _this._sortWidth = 16;
	        _this._sortHeight = 16;
	        _this._filterWidth = 16;
	        _this._filterHeight = 16;
	        _this._popupWidth = 16;
	        _this._popupHeight = 16;
	        _this._checkWidth = 16; // 12 + 좌우 margins
	        _this._checkHeight = 16; // 12 + 상하 margins
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        // private _summary: HeaderSummary;
	        // private _groupStyles: VisualStyles;
	        // private _subStyles: VisualStyles;
	        _this._cell = new HeaderCell();
	        // this._summary = new HeaderSummary(this);
	        // this._groupStyles = new VisualStyles(this, "headerGroupStyles");
	        // this._subStyles = new VisualStyles(this, "headerSubSytles");
	        _this.visible = true;
	        return _this;
	    }
	    GridHeader.prototype._doDispose = function () {
	        // this._summary = null;
	        // this._groupStyles = null;
	        // this._subStyles = null;
	        this._cell = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridHeader.prototype, "minRowHeight", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minRowHeight */
	        get: function () {
	            return this._minRowHeight;
	        },
	        set: function (value) {
	            if (value != this._minRowHeight) {
	                this._minRowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "minHeight", {
	        /** minHeight */
	        get: function () {
	            return this._minHeight;
	        },
	        set: function (value) {
	            if (value != this._minHeight) {
	                this._minHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "height", {
	        /**
	         * height.
	         * 1. 0이면 => 기본 스타일로 tr의 높이를 계산해서 지정(table row의 최소 높이가 된다).
	         *    전체 헤더 높이가 커지면 row들이 다 표시되도록 element container의 높이를 보정한다.
	         * 2. 0보다 크면 => 지정한 높이로 전체 높이를 설정. tr 높이는 minRowHeight 높이로 설정.
	         *    conatiner 높이가 tr들의 높이합보다 큰 경우 배분한다.
	         *    container 높이를 보정하지 않는다.
	         * 3. 0보다 작으면 브라우저가 계산한 높이로 맞춘다.
	         * 4. heights 속성에 각 table row의 높이를 지정할 수 있다.
	         *    0보다 크면 tr 높이 설정. container높이를 보정하지 않는다.
	         *
	         * ! 전체 높이가 minHeight보다 작을 수 없다.
	         * ! 개별 tr의 높이는 minRowHeight보다 작을 수 없다.
	         */
	        get: function () {
	            return this._height;
	        },
	        set: function (value) {
	            if (value != this._height) {
	                this._height = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "heights", {
	        /**
	         * heights
	         * 각 table row의 높이를 지정할 수 있다.
	         * 0보다 크면 tr 높이 설정. container높이를 보정하지 않는다.
	         */
	        get: function () {
	            return this._heights && this._heights.slice();
	        },
	        set: function (value) {
	            if (value != this._heights) {
	                this._heights = value && value.slice();
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "resizable", {
	        /** resizable */
	        get: function () {
	            return this._resizable;
	        },
	        set: function (value) {
	            if (value != this._resizable) {
	                this._resizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "sortable", {
	        /** sortable */
	        get: function () {
	            return this._sortable;
	        },
	        set: function (value) {
	            if (value != this._sortable) {
	                this._sortable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "filterable", {
	        /** filterable */
	        get: function () {
	            return this._filterable;
	        },
	        set: function (value) {
	            if (value != this._filterable) {
	                this._filterable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "subTextGap", {
	        /** subTextLocation */
	        // get subTextLocation(): SubTextLocation {
	        //     return this._subTextLocation;
	        // }
	        // set subTextLocation(value: SubTextLocation) {
	        //     value = value || SubTextLocation.LOWER;
	        //     if (value != this._subTextLocation) {
	        //         this._subTextLocation = value;
	        //         this._changed();
	        //     }
	        // }
	        /** subTextGap */
	        get: function () {
	            return this._subTextGap;
	        },
	        set: function (value) {
	            if (value != this._subTextGap) {
	                this._subTextGap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "itemOffset", {
	        /** itemOffset */
	        get: function () {
	            return this._itemOffset;
	        },
	        set: function (value) {
	            if (value != this._itemOffset) {
	                this._itemOffset = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "itemGap", {
	        /** itemGap */
	        get: function () {
	            return this._itemGap;
	        },
	        set: function (value) {
	            if (value != this._itemGap) {
	                this._itemGap = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "imageList", {
	        /** imageList */
	        get: function () {
	            return this._imageList;
	        },
	        set: function (value) {
	            if (value != this._imageList) {
	                this._imageList = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "showTooltip", {
	        /** showTooltip */
	        get: function () {
	            return this._showTooltip;
	        },
	        set: function (value) {
	            if (value != this._showTooltip) {
	                this._showTooltip = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "showSelection", {
	        /**
	         * showSelection.
	         * true면 data 선택 영역에 맞춰 관련된 셀들에 선택 상태를 표시한다.
	         */
	        get: function () {
	            return this._showSelection;
	        },
	        set: function (value) {
	            if (value != this._showSelection) {
	                this._showSelection = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "sortWidth", {
	        /** sortWidth */
	        get: function () {
	            return this._sortWidth;
	        },
	        set: function (value) {
	            if (value != this._sortWidth) {
	                this._sortWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "sortHeight", {
	        /** sortHeight */
	        get: function () {
	            return this._sortHeight;
	        },
	        set: function (value) {
	            if (value != this._sortHeight) {
	                this._sortHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "filterWidth", {
	        /** filterWidth */
	        get: function () {
	            return this._filterWidth;
	        },
	        set: function (value) {
	            if (value != this._filterWidth) {
	                this._filterWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "filterHeight", {
	        /** filterHeight */
	        get: function () {
	            return this._filterHeight;
	        },
	        set: function (value) {
	            if (value != this._filterHeight) {
	                this._filterHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "popupWidth", {
	        /** popupWidth */
	        get: function () {
	            return this._popupWidth;
	        },
	        set: function (value) {
	            if (value != this._popupWidth) {
	                this._popupWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "popupHeight", {
	        /** popupHeight */
	        get: function () {
	            return this._popupHeight;
	        },
	        set: function (value) {
	            if (value != this._popupHeight) {
	                this._popupHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "checkWidth", {
	        /** checkWidth */
	        get: function () {
	            return this._checkWidth;
	        },
	        set: function (value) {
	            if (value != this._checkWidth) {
	                this._checkWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridHeader.prototype, "checkHeight", {
	        /** checkHeight */
	        get: function () {
	            return this._checkHeight;
	        },
	        set: function (value) {
	            if (value != this._checkHeight) {
	                this._checkHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    // setSummary(value: ConfigObject): void {
	    //     if (value !== this._summary) {
	    //         this._summary.assignFrom(value);
	    //     }
	    // }
	    // setGroupStyles(value: ConfigObject): void {
	    // 	if (value !== this._groupStyles) {
	    // 		this._groupStyles.extend(value);
	    // 	}
	    // }
	    // setSubStyles(value: ConfigObject): void {
	    //     if (value !== this._subStyles) {
	    //         this._subStyles.extend(value);
	    //     }
	    // }
	    GridHeader.prototype.getCell = function (layout) {
	        var cell = this._cell;
	        cell.setLayout(layout);
	        if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            cell.text = layout.header.text;
	        }
	        else {
	            var column = layout.firstColumn;
	            cell.index.set(-1, column);
	            if (column) {
	                var header = column.header;
	                var v = void 0;
	                cell.text = header.displayText;
	                cell.template = header.realizeTemplate();
	                cell.itemOffset = (v = header.itemOffset) === undefined ? this._itemOffset : v;
	                cell.itemGap = (v = header.itemGap) === undefined ? this._itemGap : v;
	                cell.imageList = this._imageList;
	                cell.imageIndex = header.imageIndex;
	                cell.imageUrl = header.imageUrl;
	                cell.checkLocation = header.checkLocation;
	                cell.imageLocation = header.imageLocation;
	                cell.checked = column.checked;
	                cell.showTooltip = header.showTooltip;
	                cell.tooltip = header.tooltip;
	            }
	        }
	        return cell;
	    };
	    // getGroupingCell(column): HeaderCell  {
	    // 	var cell = this._cell;
	    //     var header = column.header();
	    //     var v;
	    // 	cell.setIndex(this._grid.getIndex(-1, column));
	    // 	cell.setStyles(this._grid.rowGroup().panelStyles());
	    //     cell.setSubStyles(header.subStyles());
	    //     cell.setText(header.displayText());
	    //     cell.setSubText(header.subText());
	    //     cell.setSubLocation(!(v = header.subTextLocation()) ? this._subTextLocation : v);
	    //     cell.setSubTextGap((v = header.subTextGap()) === undefined ? this._subTextGap : v);
	    //     cell.setItemOffset((v = header.itemOffset()) === undefined ? this._itemOffset : v);
	    //     cell.setItemGap((v = header.itemGap()) === undefined ? this._itemGap : v);
	    //     cell.setImageList(this._imageList);
	    //     cell.setImageIndex(header.imageIndex());
	    //     cell.setImageUrl(header.imageUrl());
	    //     cell.setCheckLocation(header.checkLocation());
	    //     cell.setImageLocation(header.imageLocation());
	    //     cell.setChecked(column.isChecked());
	    // 	cell.setShowTooltip(header.isShowTooltip());
	    // 	cell.setTooltip(header.tooltip());
	    // 	return cell;
	    // }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridHeader.prototype.clean = function () {
	        _super.prototype.clean.call(this);
	        // this._summary.clean();
	    };
	    return GridHeader;
	}(GridObject_1.VisualObject));
	exports.GridHeader = GridHeader;
	});

	unwrapExports(GridHeader_1);
	var GridHeader_2 = GridHeader_1.HeaderCell;
	var GridHeader_3 = GridHeader_1.GridHeader;

	var GridFooter_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridFooter.ts
	// 2019. 07. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });









	var FooterExpressionRuntime = /** @class */ (function (_super) {
	    __extends(FooterExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FooterExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    FooterExpressionRuntime.prototype._doDispose = function () {
	        this._cell = null;
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FooterExpressionRuntime.prototype.setCell = function (cell) {
	        this._cell = cell;
	        this._grid = cell.index && cell.index.grid;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FooterExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (FooterExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return FooterExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    FooterExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case FooterExpressionRuntime.ID_VALUE:
	                return this._cell.value;
	            case FooterExpressionRuntime.ID_FIELD:
	                return this._cell.index.dataField;
	            case FooterExpressionRuntime.ID_LEVEL:
	                return this._cell.level;
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    FooterExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        return undefined;
	    };
	    FooterExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        return undefined;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FooterExpressionRuntime.ID_VALUE = 0;
	    FooterExpressionRuntime.ID_FIELD = 1;
	    FooterExpressionRuntime.ID_LEVEL = 2;
	    FooterExpressionRuntime.IDENTS = {
	        value: FooterExpressionRuntime.ID_VALUE,
	        field: FooterExpressionRuntime.ID_FIELD,
	        level: FooterExpressionRuntime.ID_LEVEL
	    };
	    return FooterExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.FooterExpressionRuntime = FooterExpressionRuntime;
	var SummaryCell = /** @class */ (function (_super) {
	    __extends(SummaryCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SummaryCell(name) {
	        var _this = _super.call(this, name) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._childIndex = 0;
	        _this._error = null;
	        _this._errorDetail = null;
	        return _this;
	    }
	    SummaryCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SummaryCell.prototype, "level", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** level */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCell.prototype, "error", {
	        /** error */
	        get: function () {
	            return this._error;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCell.prototype, "errorDetail", {
	        /** errorDetail */
	        get: function () {
	            return this._errorDetail;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SummaryCell.prototype.calculate = function () {
	        var column = this.dataColumn;
	        var grid = column && column.grid;
	        this._value = NaN;
	        this._error = null;
	        if (grid && grid.summaryMode != Types.SummaryMode.NONE && column.dataIndex >= 0) {
	            var summary = this._getSummary(column, this._childIndex);
	            var expr = summary && summary.expression;
	            try {
	                if (expr && grid.rowCount > 0) {
	                    var runtime = grid.columnSummaryRuntime;
	                    runtime.setColumn(column, grid.summarizer);
	                    this._value = summary.evaluate(runtime, this._childIndex);
	                }
	                var cb = summary.valueCallback;
	                if (cb) {
	                    this._value = cb(summary, this._value);
	                }
	            }
	            catch (err) {
	                this._error = err;
	                this._errorDetail = err;
	                //throwDebugError(err);
	            }
	        }
	    };
	    Object.defineProperty(SummaryCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        /** text */
	        get: function () {
	            if (this._error) {
	                return GridCell_1.GridCell.ERROR;
	            }
	            else {
	                debugger;
	                //return this.getDisplayText(null);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCell.prototype, "value", {
	        /** value */
	        get: function () {
	            return this._value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCell.prototype, "template", {
	        /** template */
	        get: function () {
	            var summary = this._getSummary(this.valueColumn, this._childIndex);
	            return summary ? summary.realizeTemplate(this) : undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SummaryCell.prototype.getDisplayText = function (cf) {
	        var v = this._value;
	        var col = this.dataColumn;
	        var s = '';
	        if (v !== undefined && col) {
	            if (col.valueType == Types.ValueType.DATETIME) {
	                var tf = void 0;
	                if (v instanceof Date && (tf = cf.datetimeWriter)) {
	                    s = tf.getText(this._value);
	                }
	                else if (v) {
	                    s = v;
	                }
	            }
	            else {
	                var nf = void 0;
	                var v2 = Number(v);
	                if (!isNaN(v2) && (nf = cf.numberFormatter)) {
	                    s = nf.getText(v2);
	                }
	                else if (v) {
	                    s = v;
	                }
	            }
	        }
	        if (s) {
	            var f = cf.prefix;
	            if (f)
	                s = f + s;
	            f = cf.suffix;
	            if (f)
	                s += f;
	        }
	        if (!s && col) {
	            s = this._getSummary(col, this._childIndex).text;
	        }
	        return s;
	    };
	    SummaryCell.prototype.getSummary = function () {
	        return this._getSummary(this.valueColumn, this._childIndex);
	    };
	    return SummaryCell;
	}(GridCell_1.GridCell));
	exports.SummaryCell = SummaryCell;
	var FooterCell = /** @class */ (function (_super) {
	    __extends(FooterCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FooterCell() {
	        return _super.call(this, "footerCell") || this;
	    }
	    FooterCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FooterCell.prototype, "footerIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** footerIndex */
	        get: function () {
	            return this._childIndex;
	        },
	        set: function (value) {
	            if (value != this._childIndex) {
	                this._childIndex = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FooterCell.prototype._getSummary = function (column, childIndex) {
	        return column && column.footers.getItem(childIndex);
	    };
	    return FooterCell;
	}(SummaryCell));
	exports.FooterCell = FooterCell;
	var GridSummaryObject = /** @class */ (function (_super) {
	    __extends(GridSummaryObject, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridSummaryObject(grid) {
	        var _this = _super.call(this, grid) || this;
	        _this._minHeight = 23;
	        _this._height = 0;
	        _this._resizable = false;
	        _this._numberFormat = DecimalFormatter_1.DecimalFormatter.DEFAULT_FORMAT;
	        _this._datetimeFormat = DateTimeWriter_1.DateTimeWriter.DEFAULT_FORMAT;
	        _this._childIndex = 0;
	        _this._displayIndex = 0;
	        _this._runtime = new FooterExpressionRuntime();
	        _this._datetimeWriter = DateTimeWriter_1.DateTimeWriter.Default;
	        _this._numberFormatter = DecimalFormatter_1.DecimalFormatter.Default;
	        _this._formatter = {
	            numberFormatter: null,
	            datetimeWriter: null,
	            booleanFormatter: null,
	            textFormatter: null,
	            prefix: '',
	            suffix: ''
	        };
	        _this._cell = _this._createCell();
	        _this.visible = true;
	        return _this;
	    }
	    GridSummaryObject.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridSummaryObject.prototype, "styleName", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** styleName */
	        get: function () {
	            return this._styleName;
	        },
	        set: function (value) {
	            if (value != this._styleName) {
	                this._styleName = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "displayIndex", {
	        /** displayIndex */
	        get: function () {
	            return this._displayIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "minHeight", {
	        /** minHeight */
	        get: function () {
	            return this._minHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._minHeight) {
	                this._minHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "height", {
	        /** height */
	        get: function () {
	            return this._height;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._height) {
	                this._height = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "resizable", {
	        /** resizable */
	        get: function () {
	            return this._resizable;
	        },
	        set: function (value) {
	            if (value != this._resizable) {
	                this._resizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "cellStyleCallback", {
	        /** cellStyleCallback */
	        get: function () {
	            return this._cellStyleCallback;
	        },
	        set: function (value) {
	            if (value !== this._cellStyleCallback) {
	                this._cellStyleCallback = value;
	                this.refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "textFormat", {
	        /** textFormat */
	        get: function () {
	            return this._textFormat;
	        },
	        set: function (value) {
	            if (value != this._textFormat) {
	                this._textFormat = value;
	                this._textFormatter = value ? TextFormatter_1.TextFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                this._datetimeWriter = value ? DateTimeWriter_1.DateTimeWriter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "numberFormat", {
	        /** numberFormat */
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                this._numberFormatter = value ? DecimalFormatter_1.DecimalFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolFormatter = value ? BooleanFormatter_1.BooleanFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "textFormatter", {
	        /** textFormatter */
	        get: function () {
	            return this._textFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "numberFormatter", {
	        /** numberFormatter */
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "datetimeWriter", {
	        /** datetimeWriter */
	        get: function () {
	            return this._datetimeWriter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSummaryObject.prototype, "boolFormatter", {
	        /** boolFormatter */
	        get: function () {
	            return this._boolFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridSummaryObject.prototype.getCell = function (layout) {
	        var cell = this._cell;
	        var column = layout.firstColumn;
	        cell.index.set(-1, column);
	        cell["_childIndex"] = this._childIndex;
	        cell.calculate();
	        return cell;
	    };
	    GridSummaryObject.prototype.getCellStyle = function (model, cs) {
	        var summary = model.getSummary();
	        var styleName = summary ? summary.styleName : '';
	        var cb = this._cellStyleCallback;
	        var style;
	        if (cb) {
	            style = cb(this._grid, model);
	            cs.assign(style);
	        }
	        if (summary) {
	            cb = summary.styleCallback;
	            if (cb) {
	                style = cb(this._grid, model);
	                cs.assign(style);
	            }
	        }
	        if (!cs.styleName && styleName) {
	            cs.styleName = styleName;
	        }
	        if (cs.styleName) {
	            cs.styleName = this.getCellStyleName() + " " + cs.styleName;
	        }
	        else {
	            cs.styleName = this.getCellStyleName();
	        }
	        return cs;
	    };
	    GridSummaryObject.prototype.getCellFormatters = function (summary, cf) {
	        if (cf) {
	            cf.numberFormatter = cf.numberFormatter || summary.numberFormatter || this.numberFormatter;
	            cf.datetimeWriter = cf.datetimeWriter || summary.datetimeWriter || this.datetimeWriter;
	            cf.booleanFormatter = cf.booleanFormatter || summary.boolFormatter || this.boolFormatter;
	            cf.textFormatter = cf.textFormatter || summary.textFormatter || this.textFormatter;
	            cf.prefix = cf.prefix || summary.prefix;
	            cf.suffix = cf.suffix || summary.suffix;
	        }
	        else {
	            cf = this._formatter;
	            cf.numberFormatter = summary.numberFormatter || this.numberFormatter;
	            cf.datetimeWriter = summary.datetimeWriter || this.datetimeWriter;
	            cf.booleanFormatter = summary.boolFormatter || this.boolFormatter;
	            cf.textFormatter = summary.textFormatter || this.textFormatter;
	            cf.prefix = summary.prefix;
	            cf.suffix = summary.suffix;
	        }
	        return cf;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridSummaryObject.prototype._visibleChanged = function () {
	        _super.prototype._visibleChanged.call(this);
	        this.$_owner && this.$_owner["$_visibleChanged"](this);
	    };
	    return GridSummaryObject;
	}(GridObject_1.VisualObject));
	exports.GridSummaryObject = GridSummaryObject;
	var GridFooter = /** @class */ (function (_super) {
	    __extends(GridFooter, _super);
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridFooter(grid) {
	        return _super.call(this, grid) || this;
	    }
	    Object.defineProperty(GridFooter.prototype, "footerIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** footerIndex */
	        get: function () {
	            return this._childIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridFooter.prototype.getCellStyleName = function () {
	        return GridFooter.CELL_CSS;
	    };
	    GridFooter.prototype._createCell = function () {
	        return new FooterCell();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridFooter.CELL_CSS = "rg-footer-cell";
	    return GridFooter;
	}(GridSummaryObject));
	exports.GridFooter = GridFooter;
	var SummaryCollection = /** @class */ (function (_super) {
	    __extends(SummaryCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SummaryCollection(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._items = [];
	        _this._visibles = [];
	        _this._items.push(_this._createSummary(grid));
	        _this._visibles.push(_this._items[0]);
	        return _this;
	    }
	    SummaryCollection.prototype._doDispose = function () {
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var summary = _a[_i];
	            summary.dispose();
	        }
	        this._items = null;
	        this._visibles = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SummaryCollection.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this["_visible"] && this._visibles.length > 0;
	        },
	        set: function (value) {
	            this._setVisible(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SummaryCollection.prototype, "visibleCount", {
	        /** visibleCount */
	        get: function () {
	            return this._visibles.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SummaryCollection.prototype.get = function (index) {
	        return this._items[index];
	    };
	    SummaryCollection.prototype.getVisible = function (index) {
	        return this._visibles[index];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SummaryCollection.prototype.assignFrom = function (source) {
	        _super.prototype.assignFrom.call(this, source);
	        var srcs;
	        if (source && source.items) {
	            srcs = Utils_1.Utils.makeArray(source.items);
	        }
	        else if (Utils_1.Utils.isArray(source)) {
	            srcs = source;
	        }
	        if (!srcs) {
	            return; // items가 없다면.
	        }
	        var len = srcs.length;
	        while (this._items.length > len) {
	            var item = this._items.pop();
	            item.dispose();
	        }
	        for (var i = 0, cnt = srcs.length; i < cnt; i++) {
	            var src = srcs[i];
	            if (src) {
	                if (!this._items[i]) {
	                    this._items[i] = this._createSummary();
	                }
	                this._items[i].assignFrom(src);
	            }
	        }
	        this.$_resetVisibles();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SummaryCollection.prototype.$_visibleChanged = function (summary) {
	        this.$_resetVisibles();
	    };
	    SummaryCollection.prototype.$_resetVisibles = function () {
	        this._visibles.length = 0;
	        for (var i = 0, v = 0; i < this._items.length; i++) {
	            var f = this._items[i];
	            f["_childIndex"] = i;
	            if (f.visible) {
	                this._visibles.push(f);
	                f["_displayIndex"] = v++;
	            }
	        }
	        this.owner && this.owner.refreshView();
	    };
	    return SummaryCollection;
	}(GridObject_1.VisualObject));
	exports.SummaryCollection = SummaryCollection;
	var GridFooterCollection = /** @class */ (function (_super) {
	    __extends(GridFooterCollection, _super);
	    function GridFooterCollection() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridFooterCollection.prototype._createSummary = function (grid) {
	        return new GridFooter(grid ? grid : this._grid);
	    };
	    return GridFooterCollection;
	}(SummaryCollection));
	exports.GridFooterCollection = GridFooterCollection;
	});

	unwrapExports(GridFooter_1);
	var GridFooter_2 = GridFooter_1.FooterExpressionRuntime;
	var GridFooter_3 = GridFooter_1.SummaryCell;
	var GridFooter_4 = GridFooter_1.FooterCell;
	var GridFooter_5 = GridFooter_1.GridSummaryObject;
	var GridFooter_6 = GridFooter_1.GridFooter;
	var GridFooter_7 = GridFooter_1.SummaryCollection;
	var GridFooter_8 = GridFooter_1.GridFooterCollection;

	var StateBar_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// StateBar.ts
	// 2019. 07. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var StateBarCell = /** @class */ (function (_super) {
	    __extends(StateBarCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function StateBarCell() {
	        return _super.call(this, "stateBarCell") || this;
	    }
	    StateBarCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(StateBarCell.prototype, "value", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        // get text(): string {
	        // 	switch (this.item.rowState) {
	        //         case RowState.CREATED:
	        //             return "C";
	        //         case RowState.UPDATED:
	        //             return "U";
	        //         case RowState.DELETED:
	        //             return "D";
	        //         case RowState.CREATE_AND_DELETED:
	        //             return "CD";
	        //         default:
	        //             return "";	
	        //     }
	        // }
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return StateBarCell;
	}(GridCell_1.GridCell));
	exports.StateBarCell = StateBarCell;
	var StateBar = /** @class */ (function (_super) {
	    __extends(StateBar, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function StateBar(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._width = 20;
	        _this._mark = RowIndicator_1.StateMark.DEFAULT;
	        _this._stateTexts = {};
	        _this._stateTexts[RowState_1.RowState.CREATED] = "C";
	        _this._stateTexts[RowState_1.RowState.UPDATED] = "U";
	        _this._stateTexts[RowState_1.RowState.DELETED] = "D";
	        _this._stateTexts[RowState_1.RowState.CREATE_AND_DELETED] = "X";
	        // this._stateStyles[RowState.CREATED] = null;
	        // this._stateStyles[RowState.UPDATED] = null;
	        // this._stateStyles[RowState.DELETED] = null;
	        // this._stateStyles[RowState.CREATE_AND_DELETED] = null;
	        _this._cell = new StateBarCell();
	        return _this;
	    }
	    StateBar.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(StateBar.prototype, "width", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            if (value != this._width) {
	                this._width = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(StateBar.prototype, "mark", {
	        /** mark */
	        get: function () {
	            return this._mark;
	        },
	        set: function (value) {
	            if (value != this._mark) {
	                this._mark = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(StateBar.prototype, "stateTexts", {
	        /** stateTexts */
	        get: function () {
	            return this._stateTexts;
	        },
	        set: function (value) {
	            if (value != this._stateTexts) {
	                for (var state in value) {
	                    if (this._stateTexts.hasOwnProperty(state)) {
	                        this._stateTexts[state] = value[state];
	                    }
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    // /** stateStyles */
	    // get stateStyles(): ConfigObject {
	    //     return this._stateStyles;
	    // }
	    // set stateStyles(value: ConfigObject) {
	    //     if (value != this._stateStyles) {
	    // 		for (var state in value) {
	    //             if (this._stateStyles.hasOwnProperty(state)) {
	    //                 if (value[state]) {
	    // 					const st = this._stateStyles[state] || new VisualStyles(this);
	    // 					st.copy(this.styles);
	    // 					st.extend(value[state],false);
	    // 					this._stateStyles[state] = st;
	    //                 } else {
	    //                     this._stateStyles[state] = null;
	    //                 }
	    //             }
	    // 		}
	    // 		this._changed();
	    //     }
	    // }
	    // /** stateImages */
	    // get stateImages(): ConfigObject {
	    //     return this._stateImages;
	    // }
	    // set stateImages(value: ConfigObject) {
	    //     if (value != this._stateImages) {
	    // 		for (var state in value) {
	    // 			this._stateImages[state] = value[state];
	    // 		}
	    // 		this._changed();
	    //     }
	    // }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    StateBar.prototype.stateText = function (rowState) {
	        return this.stateTexts[rowState] || "";
	    };
	    Object.defineProperty(StateBar.prototype, "staticOrder", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return 1000;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    StateBar.prototype.getCell = function (index) {
	        var cell = this._cell;
	        cell.setIndex(index);
	        // cell.styles = this.styles;
	        return cell;
	    };
	    StateBar.prototype.getHeadStyleName = function () {
	        return "rg-statebar-head";
	    };
	    StateBar.prototype.getFootStyleName = function () {
	        return "rg-statebar-foot";
	    };
	    StateBar.prototype.getSumStyleName = function () {
	        return "rg-statebar-sum";
	    };
	    return StateBar;
	}(SectionObject_1.SectionObject));
	exports.StateBar = StateBar;
	});

	unwrapExports(StateBar_1);
	var StateBar_2 = StateBar_1.StateBarCell;
	var StateBar_3 = StateBar_1.StateBar;

	var CheckBar_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CheckBar.ts
	// 2019. 07. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var CheckBarExpressionRuntime = /** @class */ (function (_super) {
	    __extends(CheckBarExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckBarExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    CheckBarExpressionRuntime.prototype._doDispose = function () {
	        this._cell = null;
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CheckBarExpressionRuntime.prototype.setCell = function (cell) {
	        this._cell = cell;
	        this._grid = cell.index && cell.index.grid;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CheckBarExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (CheckBarExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return CheckBarExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    CheckBarExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case CheckBarExpressionRuntime.ID_VALUE:
	                return this._cell.item.checked;
	            case CheckBarExpressionRuntime.ID_CHECKED:
	                return this._cell.item.checked;
	            case CheckBarExpressionRuntime.ID_CHECKABLE:
	                return this._cell.item.checkable;
	            case CheckBarExpressionRuntime.ID_ROW:
	                return this._cell.item.index;
	            case CheckBarExpressionRuntime.ID_DATA_ROW:
	                return this._cell.item.dataRow;
	            case CheckBarExpressionRuntime.ID_STATE:
	                switch (this._cell.item.rowState) {
	                    case RowState_1.RowState.CREATED:
	                        return "c";
	                    case RowState_1.RowState.UPDATED:
	                        return "u";
	                    case RowState_1.RowState.DELETED:
	                        return "d";
	                    case RowState_1.RowState.CREATE_AND_DELETED:
	                        return "x";
	                }
	                return undefined;
	        }
	        //if ($_debug) debugger;
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    CheckBarExpressionRuntime.prototype.evaluateIndexerI = function (idKey, index) {
	        if (this._cell) {
	            var item = this._cell.item;
	            var ds = item && item.dataSource;
	            var fieldCount = ds.fieldCount;
	            if (idKey == CheckBarExpressionRuntime.ID_VALUE || idKey == CheckBarExpressionRuntime.ID_VALUES) {
	                if (index < 0 || index >= fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field index out of bounds:" + index);
	                }
	                return item.getData(index);
	            }
	            throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	        }
	        else {
	            return undefined;
	        }
	    };
	    CheckBarExpressionRuntime.prototype.evaluateIndexerS = function (idKey, index, capitalized) {
	        if (idKey == CheckBarExpressionRuntime.ID_VALUE || idKey == CheckBarExpressionRuntime.ID_VALUES) {
	            var item = this._cell.item;
	            var ds = item && item.dataSource;
	            var fieldCount = ds.fieldCount;
	            if (ds) {
	                var idx = capitalized ? ds.getFieldIndexC(index) : ds.getFieldIndex(index);
	                if (idx < 0 || idx >= fieldCount) {
	                    throw new Expression.ExpressionEvaluationError("Data field is not exists:" + index);
	                }
	                return item.getData(idx);
	            }
	            else {
	                return undefined;
	            }
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier indexer: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    CheckBarExpressionRuntime.ID_VALUE = 0;
	    CheckBarExpressionRuntime.ID_VALUES = 1;
	    CheckBarExpressionRuntime.ID_CHECKED = 2;
	    CheckBarExpressionRuntime.ID_CHECKABLE = 3;
	    CheckBarExpressionRuntime.ID_ROW = 4;
	    CheckBarExpressionRuntime.ID_DATA_ROW = 5;
	    CheckBarExpressionRuntime.ID_STATE = 6;
	    CheckBarExpressionRuntime.IDENTS = {
	        value: CheckBarExpressionRuntime.ID_VALUE,
	        values: CheckBarExpressionRuntime.ID_VALUES,
	        checked: CheckBarExpressionRuntime.ID_CHECKED,
	        checkable: CheckBarExpressionRuntime.ID_CHECKABLE,
	        row: CheckBarExpressionRuntime.ID_ROW,
	        datarow: CheckBarExpressionRuntime.ID_DATA_ROW,
	        state: CheckBarExpressionRuntime.ID_STATE
	    };
	    return CheckBarExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.CheckBarExpressionRuntime = CheckBarExpressionRuntime;
	var CheckBarCell = /** @class */ (function (_super) {
	    __extends(CheckBarCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckBarCell() {
	        return _super.call(this, "checkBarCell") || this;
	    }
	    CheckBarCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CheckBarCell.prototype, "getText", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return String(this.index.dataRow);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBarCell.prototype, "value", {
	        get: function () {
	            return this.item.checked;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return CheckBarCell;
	}(GridCell_1.GridCell));
	exports.CheckBarCell = CheckBarCell;
	var CheckBar = /** @class */ (function (_super) {
	    __extends(CheckBar, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckBar(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._width = 20;
	        _this._exclusive = false;
	        _this._showAll = true;
	        _this._showGroup = true;
	        _this._visibleOnly = false;
	        _this._checkableOnly = true;
	        // private _headCheckImageUrl: string;
	        // private _headUnCheckImageUrl: string;
	        // private _checkImageUrl: string;
	        // private _unCheckImageUrl: string;
	        // private _drawCheckBox = true;
	        // private _radioImageUrl: string;
	        _this._syncHeadCheck = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cell = new CheckBarCell();
	        _this._runtime = new CheckBarExpressionRuntime();
	        // private _runStyles: VisualStyles;
	        // private _dynamicStyles: DynamicStyleCollection;
	        _this._allChecked = false;
	        return _this;
	        // this._runStyles = new VisualStyles(this, "runCheckBarStyles", null, false);
	        // this._dynamicStyles = new DynamicStyleCollection(this);
	    }
	    CheckBar.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CheckBar.prototype, "width", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            if (value != this._width) {
	                this._width = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "exclusive", {
	        /** exclusive */
	        get: function () {
	            return this._exclusive;
	        },
	        set: function (value) {
	            if (value != this._exclusive) {
	                this._exclusive = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "showAll", {
	        /** showAll */
	        get: function () {
	            return this._showAll;
	        },
	        set: function (value) {
	            if (value != this._showAll) {
	                this._showAll = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "showGroup", {
	        /** showGroup */
	        get: function () {
	            return this._showGroup;
	        },
	        set: function (value) {
	            if (value != this._showGroup) {
	                this._showGroup = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "visibleOnly", {
	        /** visibleOnly */
	        get: function () {
	            return this._visibleOnly;
	        },
	        set: function (value) {
	            if (value != this._visibleOnly) {
	                this._visibleOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "checkableOnly", {
	        /** checkableOnly */
	        get: function () {
	            return this._checkableOnly;
	        },
	        set: function (value) {
	            if (value != this._checkableOnly) {
	                this._checkableOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "checkableExpression", {
	        /** checkableExpression */
	        get: function () {
	            return this._checkableExpression;
	        },
	        set: function (value) {
	            if (value != this._checkableExpression) {
	                this._checkableExpression = value;
	                this._grid.itemSource["checkableExpression"] = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "syncHeadCheck", {
	        // /** dynamicStyles */
	        // get dynamicStyles(): DynamicStyleCollection {
	        //     return this._dynamicStyles;
	        // }
	        // /** headCheckImageUrl */
	        // get headCheckImageUrl(): string {
	        //     return this._headCheckImageUrl;
	        // }
	        // set headCheckImageUrl(value: string) {
	        //     if (value != this._headCheckImageUrl) {
	        //         this._headCheckImageUrl = value;
	        //         value && this._grid.getImage(value);
	        //         this._changed();
	        //     }
	        // }
	        // /** headUnCheckImageUrl */
	        // get headUnCheckImageUrl(): string {
	        //     return this._headUnCheckImageUrl;
	        // }
	        // set headUnCheckImageUrl(value: string) {
	        //     if (value != this._headUnCheckImageUrl) {
	        //         this._headUnCheckImageUrl = value;
	        //         value && this._grid.getImage(value);
	        //         this._changed();
	        //     }
	        // }
	        // /** checkImageUrl */
	        // get checkImageUrl(): string {
	        //     return this._checkImageUrl;
	        // }
	        // set checkImageUrl(value: string) {
	        //     if (value != this._checkImageUrl) {
	        //         this._checkImageUrl = value;
	        //         value && this._grid.getImage(value);
	        //         this._changed();
	        //     }
	        // }
	        // /** unCheckImageUrl */
	        // get unCheckImageUrl(): string {
	        //     return this._unCheckImageUrl;
	        // }
	        // set unCheckImageUrl(value: string) {
	        //     if (value != this._unCheckImageUrl) {
	        //         this._unCheckImageUrl = value;
	        //         value && this._grid.getImage(value);
	        //         this._changed();
	        //     }
	        // }
	        // /** drawCheckBox */
	        // get drawCheckBox(): boolean {
	        //     return this._drawCheckBox;
	        // }
	        // set drawCheckBox(value: boolean) {
	        //     if (value != this._drawCheckBox) {
	        //         this._drawCheckBox = value;
	        //         this._changed();
	        //     }
	        // }
	        // /** radioImageUrl */
	        // get radioImageUrl(): string {
	        //     return this._radioImageUrl;
	        // }
	        // set radioImageUrl(value: string) {
	        //     if (value != this._radioImageUrl) {
	        //         this._radioImageUrl = value;
	        //         value && this._grid.getImage(value);
	        //         this._changed();
	        //     }
	        // }
	        /** syncHeadCheck */
	        get: function () {
	            return this._syncHeadCheck;
	        },
	        set: function (value) {
	            if (value != this._syncHeadCheck) {
	                this._syncHeadCheck = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CheckBar.prototype, "staticOrder", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        // setDynamicStyles(value: any): void {
	        //     this._dynamicStyles.setItems(value);
	        //     this._changed();
	        // }
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return 2000;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CheckBar.prototype.getCell = function (index) {
	        var cell = this._cell;
	        cell.setIndex(index);
	        cell["_exclusive"] = this._exclusive;
	        // let d = this.dynamicStyles;
	        // if (d && d.count > 0) {
	        //     const r = this._runStyles;
	        // 	r.clearValues();
	        // 	r.setParent(this.styles);
	        // 	this._runtime.setCell(cell);
	        // 	d.applyInternal(this._runtime, r);
	        // 	cell.styles = r;
	        // } else {
	        // 	cell.styles = this.styles;
	        // }
	        return cell;
	    };
	    CheckBar.prototype.getHeadStyleName = function () {
	        return "rg-checkbar-head";
	    };
	    CheckBar.prototype.getFootStyleName = function () {
	        return "rg-checkbar-foot";
	    };
	    CheckBar.prototype.getSumStyleName = function () {
	        return "rg-checkbar-sum";
	    };
	    return CheckBar;
	}(SectionObject_1.SectionObject));
	exports.CheckBar = CheckBar;
	});

	unwrapExports(CheckBar_1);
	var CheckBar_2 = CheckBar_1.CheckBarExpressionRuntime;
	var CheckBar_3 = CheckBar_1.CheckBarCell;
	var CheckBar_4 = CheckBar_1.CheckBar;

	var GridBody_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridBody.ts
	// 2019. 07. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var GridBody = /** @class */ (function (_super) {
	    __extends(GridBody, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBody(grid) {
	        var _this = _super.call(this, grid) || this;
	        _this._cellButtonWidth = 16;
	        _this._editButtonWidth = 16;
	        _this._showChangeMarker = false;
	        _this._formatter = {
	            numberFormatter: null,
	            datetimeWriter: null,
	            booleanFormatter: null,
	            textFormatter: null,
	            prefix: '',
	            suffix: ''
	        };
	        _this._dataCell = new GridCell_1.DataCell();
	        _this._literalCell = new GridCell_1.LiteralCell();
	        _this._seriesCell = new GridCell_1.SeriesCell();
	        _this._mergedCell = new GridCell_1.MergedDataCell();
	        _this._rowRuntime = new Runtimes.DataRowExpressionRuntime();
	        _this._cellRuntime = new Runtimes.DataCellExpressionRuntime();
	        return _this;
	    }
	    GridBody.prototype._doDispose = function () {
	        this._dataCell = null;
	        this._literalCell = null;
	        this._seriesCell = null;
	        this._mergedCell = null;
	        this._rowRuntime = null;
	        this._cellRuntime = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridBody.prototype, "rowRuntime", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** rowRuntime */
	        get: function () {
	            return this._rowRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBody.prototype, "cellRunTime", {
	        /** cellRunTime */
	        get: function () {
	            return this._cellRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBody.prototype, "cellStyleCallback", {
	        /** cellStyleCallback */
	        get: function () {
	            return this._cellStyleCallback;
	        },
	        set: function (value) {
	            if (value !== this._cellStyleCallback) {
	                this._cellStyleCallback = value;
	                this.refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBody.prototype, "rowStyleCallback", {
	        /** rowStyleCallback */
	        get: function () {
	            return this._rowStyleCallback;
	        },
	        set: function (value) {
	            if (value !== this._rowStyleCallback) {
	                this._rowStyleCallback = value;
	                this.refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBody.prototype, "cellButtonWidth", {
	        /** cellButtonWidth */
	        get: function () {
	            return this._cellButtonWidth;
	        },
	        set: function (value) {
	            if (value != this._cellButtonWidth) {
	                this._cellButtonWidth = value;
	                this.refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBody.prototype, "editButtonWidth", {
	        /** editButtonWidth */
	        get: function () {
	            return this._editButtonWidth;
	        },
	        set: function (value) {
	            if (value != this._editButtonWidth) {
	                this._editButtonWidth = value;
	                this.refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridBody.prototype.getCell = function (index, merged) {
	        var column = index.column;
	        var dataColumn = index.dataColumn;
	        var fixed = index.colFixed;
	        var cell;
	        if (merged) {
	            cell = this._mergedCell;
	        }
	        else if (column instanceof GridColumn_1.DataColumn) {
	            cell = this._dataCell;
	        }
	        else if (column instanceof GridColumn_1.SeriesColumn) {
	            cell = this._seriesCell;
	        }
	        else if (column instanceof GridCell_1.LiteralCell) {
	            cell = this._literalCell;
	        }
	        else {
	            cell = this._dataCell;
	        }
	        cell.setIndex(index);
	        return cell;
	    };
	    GridBody.prototype.getCellSimple = function (index, merged) {
	        var col = index.column;
	        //var cell = merged ? this._mergedCell : col instanceof SeriesColumn ? this._seriesCell : col instanceof LiteralCell ? this._literalCell : col instanceof ColumnGroup ? this._groupCell : this._dataCell;
	        var cell = merged ? this._mergedCell : col instanceof GridColumn_1.SeriesColumn ? this._seriesCell : col instanceof GridCell_1.LiteralCell ? this._literalCell : this._dataCell;
	        cell.setIndex(index);
	        return cell;
	    };
	    GridBody.prototype.getCellStyle = function (model, cs) {
	        var column = model.valueColumn;
	        var styleName = column && column.styleName;
	        var cb = this._cellStyleCallback;
	        var style;
	        // body style callback
	        if (cb) {
	            style = cb(this._grid, model);
	            cs.assign(style);
	        }
	        // column style callback
	        if (column) {
	            style = column.getCellStyle(model);
	            cs.assign(style);
	        }
	        // 위에서 styleName이 지정되지 않으면 column의 styleName
	        if (!cs.styleName && styleName) {
	            cs.styleName = styleName;
	        }
	        // "rg-data-cell"은 기본 css
	        if (cs.styleName) {
	            cs.styleName = "rg-data-cell " + cs.styleName;
	        }
	        else {
	            cs.styleName = "rg-data-cell";
	        }
	        return cs;
	    };
	    GridBody.prototype.getCellFormatters = function (column, cf, options) {
	        if (cf) {
	            cf.numberFormatter = cf.numberFormatter || column.numberFormatter || options.numberFormatter;
	            cf.datetimeWriter = cf.datetimeWriter || column.datetimeWriter || options.datetimeWriter;
	            cf.booleanFormatter = cf.booleanFormatter || column.boolFormatter || options.boolFormatter;
	            cf.textFormatter = cf.textFormatter || column.textFormatter || options.textFormatter;
	            cf.prefix = cf.prefix || column.prefix;
	            cf.suffix = cf.suffix || column.suffix;
	        }
	        else {
	            // 동적 스타일 추가필요하면 아래처럼...
	            // ItemElement._updateDateCell(...)과 비슷하게 구현....
	            cf = this._formatter;
	            cf.numberFormatter = column.numberFormatter || options.numberFormatter;
	            cf.datetimeWriter = column.datetimeWriter || options.datetimeWriter;
	            cf.booleanFormatter = column.boolFormatter || options.boolFormatter;
	            cf.textFormatter = column.textFormatter || options.textFormatter;
	            cf.prefix = column.prefix;
	            cf.suffix = column.suffix;
	        }
	        return cf;
	    };
	    GridBody.prototype.getRowStyle = function (item, fixed) {
	        var cb = this._rowStyleCallback;
	        if (cb) {
	            var s = cb(this._grid, item, fixed);
	            if (s)
	                return s;
	        }
	        return fixed ? GridBody.FIXED_ROW_STYLE : GridBody.ROW_STYLE;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridBody.prototype._prepareUpdate = function () {
	        var grid = this._grid = this.owner;
	        this._ds = grid.dataSource;
	        this._rowRuntime.setDataSource(this._ds);
	        this._cellRuntime.setDataSource(this._ds);
	        this._showChangeMarker = grid.displayOptions.showChangeMarker;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridBody.ROW_STYLE = "rg-data-row";
	    GridBody.FIXED_ROW_STYLE = "rg-fixed-row";
	    return GridBody;
	}(GridObject_1.VisualObject));
	exports.GridBody = GridBody;
	});

	unwrapExports(GridBody_1);
	var GridBody_2 = GridBody_1.GridBody;

	var GridOptions = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridOptions.ts
	// 2019. 07. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var GridBaseOptions = /** @class */ (function (_super) {
	    __extends(GridBaseOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBaseOptions(grid) {
	        var _this = _super.call(this) || this;
	        _this._grid = grid;
	        return _this;
	    }
	    GridBaseOptions.prototype._doDispose = function () {
	        this._grid = null;
	        return _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridBaseOptions.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridBaseOptions.prototype._changed = function () {
	        this._grid && this._grid.optionsChanged(this);
	    };
	    GridBaseOptions.prototype._invalidateOwner = function () {
	        this._grid && this._grid.invalidate();
	    };
	    GridBaseOptions.prototype._layoutOwner = function () {
	        this._grid && this._grid.invalidateLayout();
	    };
	    GridBaseOptions.prototype._refreshOwner = function () {
	        this._grid && this._grid.refreshView();
	    };
	    GridBaseOptions.prototype._invalidateEditor = function () {
	        //this._grid && this._grid.editController().invalidateEditor();
	        //this._grid && this._grid.editController().reprepareEditor(this._grid.focusedIndex());
	    };
	    return GridBaseOptions;
	}(Base_1.Base));
	exports.GridBaseOptions = GridBaseOptions;
	});

	unwrapExports(GridOptions);
	var GridOptions_1 = GridOptions.GridBaseOptions;

	var FixedOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FixedOptions.ts
	// 2019. 07. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	/**
	 * 그리드의 고정 행 및 컬럼 영역에 대한 설정 모델.
	 *
	 * @remarks
	 * 그리드 위쪽에 하나 이상의 행을 수직 스크롤링에서 제외 시킬 수 있다.
	 * 하나 이상의 최상위 컬럼을 수평 스크롤에서 제외 시킬 수 있다.
	 */
	var FixedOptions = /** @class */ (function (_super) {
	    __extends(FixedOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FixedOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._colCount = 0;
	        _this._rightCount = 0;
	        _this._rowCount = 0;
	        _this._rightFixed = true;
	        _this._exceptFromFiltering = true;
	        _this._exceptFromSorting = true;
	        _this._editable = true;
	        _this._rowEditable = true;
	        _this._resizable = false;
	        _this._rowResizable = false;
	        _this._movable = false;
	        _this._colBarWidth = 3;
	        _this._rightBarWidth = 3;
	        _this._rowBarHeight = 3;
	        _this._ignoreColumnStyles = false;
	        _this._ignoreDynamicStyles = false;
	        _this._rowBarStyle = FixedOptions.ROW_BAR_STYLE;
	        _this._rowBarCellStyle = FixedOptions.ROW_BAR_CELL_STYLE;
	        _this._columnBarStyle = FixedOptions.COLUMN_BAR_STYLE;
	        return _this;
	    }
	    /**
	     * @internal
	     */
	    FixedOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FixedOptions.prototype, "colCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * 왼쪽 고정 컬럼의 개수.
	         *
	         * @remarks
	         * 최상위 컬럼 단위로 지정한다.
	         * 기본값: 0
	         *
	         */
	        get: function () {
	            return this._colCount;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._colCount) {
	                this._colCount = value;
	                var grid = this.grid;
	                if (grid) {
	                    // grid["$_rowGroupFooterMergeChanged"]();
	                    // grid["$_footerMergeChanged"]();
	                    // grid["$_headerSummaryMergeChanged"]();
	                    this._refreshOwner();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rightCount", {
	        /**
	         * 오른쪽 고정 컬럼의 개수.
	         *
	         * @remarks
	         * 최상위 컬럼 단위로 지정한다.
	         * 기본값: 0
	         *
	         */
	        get: function () {
	            return this._rightCount;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._rightCount) {
	                this._rightCount = value;
	                var grid = this.grid;
	                if (grid) {
	                    // grid["$_rowGroupFooterMergeChanged"]();
	                    // grid["$_footerMergeChanged"]();
	                    // grid["$_headerSummaryMergeChanged"]();
	                    this._refreshOwner();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowCount", {
	        /**
	         * 위쪽 고정 행의 개수.
	         *
	         * @remarks
	         * 기본값: 0.
	         *
	         */
	        get: function () {
	            return this._rowCount;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._rowCount) {
	                this._rowCount = value;
	                this.$_resetItemSource();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rightFixed", {
	        /**
	         * 오른쪽 고정 컬럼의 위치.
	         *
	         * @remarks
	         * true일 경우 컨테이너 오른쪽에, false일 경우 맨 오른쪽 컬럼 뒤에 고정 된다.
	         * 기본값: true.
	         */
	        get: function () {
	            return this._rightFixed;
	        },
	        set: function (value) {
	            if (value != this._rightFixed) {
	                this._rightFixed = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "exceptFromFiltering", {
	        /**
	         * 고정 행의 필터링 불가 여부.
	         *
	         * @remarks
	         * 기본값: true.
	         */
	        get: function () {
	            return this._exceptFromFiltering;
	        },
	        set: function (value) {
	            if (value != this._exceptFromFiltering) {
	                this._exceptFromFiltering = value;
	                this.$_resetItemSource();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "exceptFromSorting", {
	        /**
	         * 고정 행의 정렬 불가 여부.
	         *
	         * @remarks
	         * 기본값: true.
	         */
	        get: function () {
	            return this._exceptFromSorting;
	        },
	        set: function (value) {
	            if (value != this._exceptFromSorting) {
	                this._exceptFromSorting = value;
	                this.$_resetItemSource();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "editable", {
	        /**
	         * 고정 컬럼의 수정 가능 여부.
	         *
	         * @remarks
	         * false 시 다른 속성들과 상관 없이 고정된 컬럼을 수정할 수 없다.
	         * 기본값: true.
	         */
	        get: function () {
	            return this._editable;
	        },
	        set: function (value) {
	            if (value != this._editable) {
	                this._editable = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowEditable", {
	        /**
	         * 고정 행의 수정 가능 여부.
	         *
	         * @remarks
	         * false 시 다른 속성들과 상관 없이 고정된 행을 수정할 수 없다.
	         * 기본값: true.
	         */
	        get: function () {
	            return this._rowEditable;
	        },
	        set: function (value) {
	            if (value != this._rowEditable) {
	                this._rowEditable = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "resizable", {
	        /**
	         * 고정 컬럼의 너비 변경 가능 여부.
	         *
	         * @remarks
	         * false시 다른 속성들과 상관 없이 사용자가 고정 컬럼의 너비를 변경할 수 없다.
	         * 기본값: false.
	         */
	        get: function () {
	            return this._resizable;
	        },
	        set: function (value) {
	            if (value != this._resizable) {
	                this._resizable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowResizable", {
	        /**
	         * 고정 행의 높이 변경 가능 여부.
	         *
	         * @remarks
	         * false시 다른 속성들과 상관 없이 사용자가 고정 행의 높이를 변경할 수 없다.
	         * 기본값: false.
	         */
	        get: function () {
	            return this._rowResizable;
	        },
	        set: function (value) {
	            if (value != this._rowResizable) {
	                this._resizable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "movable", {
	        /**
	         * 고정 컬럼의 위치 변경 가능 여부
	         *
	         * @remarks
	         * false시 다른 속성들과 상관 없이 사용자가 고정 컬럼의 위치를 변경할 수 없다.
	         * 고정 컬럼 그룹에 포함된 컬럼들은 그룹 내에서 이동 가능하다.
	         * 최상위 컬럼에만 해당된다.
	         * 기본값: false.
	         */
	        get: function () {
	            return this._movable;
	        },
	        set: function (value) {
	            if (value != this._movable) {
	                this._movable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "ignoreColumnStyles", {
	        /**
	         * 고정 컬럼의 스타일 무시 여부.
	         *
	         * @remarks
	         * true면 고정 컬럼의 스타일들을 무시하고 고정 영역 스타일만으로 셀들을 렌더링한다.
	         * 기본값: false.
	         */
	        get: function () {
	            return this._ignoreColumnStyles;
	        },
	        set: function (value) {
	            if (value != this._ignoreColumnStyles) {
	                this._ignoreColumnStyles = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "ignoreDynamicStyles", {
	        /**
	         * 고정 컬럼의 동적 스타일 무시 여부.
	         *
	         * @remarks
	         * true면 고정 컬럼 셀들에 대한 모든 동적 스타일들을 무시한다.
	         * 기본값: false.
	         */
	        get: function () {
	            return this._ignoreDynamicStyles;
	        },
	        set: function (value) {
	            if (value != this._ignoreDynamicStyles) {
	                this._ignoreDynamicStyles = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "colBarWidth", {
	        /**
	         * 왼쪽 고정 컬럼 구분 바의 너비.
	         *
	         * @remarks
	         * 기본값: 3.
	         */
	        get: function () {
	            return this._colBarWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._colBarWidth) {
	                this._colBarWidth = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rightBarWidth", {
	        /**
	         * 오른쪽 고정 컬럼 구분 바의 너비.
	         *
	         * @remarks
	         * 기본값: 3.
	         */
	        get: function () {
	            return this._rightBarWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._rightBarWidth) {
	                this._rightBarWidth = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowBarHeight", {
	        /**
	         * 고정 행 구분 바의 높이.
	         *
	         * @remarks
	         * 기본값: 3.
	         */
	        get: function () {
	            return this._rowBarHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._rowBarHeight) {
	                this._rowBarHeight = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowBarStyle", {
	        /**
	         * 데이터 셀 영역의 고정 행 구분 바의 스타일 클래스 명
	         *
	         * @remarks
	         * 기본값: "rg-fixed-row-bar"
	         *
	         */
	        get: function () {
	            return this._rowBarStyle;
	        },
	        set: function (value) {
	            if (value != this._rowBarStyle) {
	                this._rowBarStyle = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "rowBarCellStyle", {
	        /**
	         * 데이터 셀 외 영역의 고정 행 구분 바의 스타일 클래스 명
	         *
	         * @remarks
	         * 기본값: "rg-fixed-row-bar-cell"
	         *
	         */
	        get: function () {
	            return this._rowBarCellStyle;
	        },
	        set: function (value) {
	            if (value != this._rowBarCellStyle) {
	                this._rowBarCellStyle = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FixedOptions.prototype, "columnBarStyle", {
	        /**
	         * 고정 컬럼 구분 바의 스타일 클래스 명
	         *
	         * @remarks
	         * 기본값: "rg-fixed-column-bar"
	         *
	         */
	        get: function () {
	            return this._columnBarStyle;
	        },
	        set: function (value) {
	            if (value != this._columnBarStyle) {
	                this._columnBarStyle = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FixedOptions.prototype.$_resetItemSource = function () {
	        var grid = this.grid;
	        var rs;
	        if (grid && (rs = grid.itemSource)) {
	            rs.setFixed(this._rowCount, !this._exceptFromSorting, !this._exceptFromFiltering);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FixedOptions.ROW_BAR_STYLE = "rg-fixed-row-bar";
	    FixedOptions.ROW_BAR_CELL_STYLE = "rg-fixed-row-bar-cell";
	    FixedOptions.COLUMN_BAR_STYLE = "rg-fixed-column-bar";
	    return FixedOptions;
	}(GridOptions.GridBaseOptions));
	exports.FixedOptions = FixedOptions;
	});

	unwrapExports(FixedOptions_1);
	var FixedOptions_2 = FixedOptions_1.FixedOptions;

	var DisplayOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DisplayOptions.ts
	// 2019. 07. 23. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var DisplayOptions = /** @class */ (function (_super) {
	    __extends(DisplayOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    // private _focusPen: Stroke;
	    // private _innerFocusPen: Stroke;
	    // private _focusActivePen: Stroke;
	    // private _focusBackgroundBrush: Fill;
	    // private _rowFocusBackgroundBrush: Fill;
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DisplayOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._refreshMode = Types.RefreshMode.ALL;
	        _this._columnResizable = true;
	        _this._columnMovable = true;
	        _this._parentChangable = false;
	        _this._minColumnWidth = 2;
	        _this._defaultColumnWidth = 120;
	        _this._fitStyle = Types.GridFitStyle.NONE;
	        _this._rowResizable = false;
	        _this._eachRowResizable = false;
	        _this._rowHeight = 0;
	        _this._minRowHeight = 23;
	        _this._maxRowHeight = 0;
	        _this._minCellWidth = 0;
	        _this._hscrollBar = true;
	        _this._vscrollBar = true;
	        _this._liveScroll = true;
	        _this._horizLiveScroll = true;
	        _this._scrollDuration = 0;
	        _this._hscrollDuration = 0;
	        _this._hintDelay = 0;
	        _this._emptyShowTooltip = false;
	        _this._rowChangeDelay = 0;
	        _this._horzScrollStep = 8;
	        _this._emptyMessage = "이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.";
	        _this._showEmptyMessage = true;
	        _this._heightMeasurer = null;
	        _this._fitWhenResized = true;
	        _this._focusVisible = true;
	        _this._rowFocusType = Types.RowMaskType.NONE;
	        _this._wheelEnabled = true;
	        _this._wheelScrollLines = 3;
	        _this._wheelScrollHorz = 16;
	        _this._wheelAccelDelay = 0;
	        _this._wheelAccelScroll = null;
	        _this._wheelEventPropagate = true;
	        _this._rightClickable = true;
	        _this._editItemMerging = false;
	        _this._showInnerFocus = true;
	        _this._toastZIndex = 3000;
	        // private _focusBackground: string | number = null;
	        // private _focusColor = "#ff333333";
	        // private _innerFocusColor = "#ff333333";
	        // private _focusActiveColor = "#ff5292f7";
	        // private _focusBorderWidth = 2;
	        // private _useCssStyleProgress = false;
	        _this._popupDropdownCount = 0;
	        _this._drawBorderTop = true;
	        _this._drawBorderBottom = true;
	        _this._drawBorderLeft = true;
	        _this._drawBorderRight = true;
	        _this._drawLastColumnRight = true;
	        _this._cursorCallback = null;
	        _this._selectionMode = Selections.SelectionMode.SINGLE;
	        _this._selectionStyle = Selections.SelectionStyle.BLOCK;
	        _this._selectionDisplay = Selections.SelectionDisplay.CELL;
	        _this._rowHoverType = Types.RowMaskType.NONE;
	        _this._rowBlockType = Types.RowMaskType.NONE;
	        _this._showEmptyTooltip = false;
	        _this._showChangeMarker = true;
	        return _this;
	        // this._focusPen = new SolidPen(this._focusColor, this._focusBorderWidth);
	        // this._innerFocusPen = new SolidPen(this._innerFocusColor, 1, [1,1]);
	        // this._focusActivePen = new SolidPen(this._focusActiveColor, this._focusBorderWidth);
	        // this._focusBackgroundBrush = new SolidBrush(this._focusBackground);
	        //this._rowFocusBackgroundBrush = new SolidBrush(this._rowFocusBackground);
	        // this._rowHoverMask = new RowHoverMask(grid);
	        // this._rowBlockMask = new RowBlockMask(grid);
	        // this._rowFocusOption = new RowFocusOption(grid);
	    }
	    DisplayOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DisplayOptions.prototype, "refreshMode", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** refreshMode */
	        get: function () {
	            return this._refreshMode;
	        },
	        set: function (value) {
	            if (value != this._refreshMode) {
	                this._refreshMode = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "columnResizable", {
	        /** columnResizable */
	        get: function () {
	            return this._columnResizable;
	        },
	        set: function (value) {
	            if (value != this._columnResizable) {
	                this._columnResizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "columnMovable", {
	        /** columnMovable */
	        get: function () {
	            return this._columnMovable;
	        },
	        set: function (value) {
	            if (value != this._columnMovable) {
	                this._columnMovable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "parentChangable", {
	        /** parentChangable */
	        get: function () {
	            return this._parentChangable;
	        },
	        set: function (value) {
	            if (value != this._parentChangable) {
	                this._parentChangable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "minColumnWidth", {
	        /** minColumnWidth */
	        get: function () {
	            return this._minColumnWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._minColumnWidth) {
	                this._minColumnWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "defaultColumnWidth", {
	        /** defaultColumnWidth */
	        get: function () {
	            return this._defaultColumnWidth;
	        },
	        set: function (value) {
	            if (value != this._defaultColumnWidth) {
	                this._defaultColumnWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "fitStyle", {
	        /** fitStyle */
	        get: function () {
	            return this._fitStyle;
	        },
	        set: function (value) {
	            if (value != this._fitStyle) {
	                //this._grid._columnWidthsDirty = this._grid._columnWidthsDirty || value === GridFitStyle.NONE;
	                this._fitStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowResizable", {
	        /** rowResizable */
	        get: function () {
	            return this._rowResizable;
	        },
	        set: function (value) {
	            if (value != this._rowResizable) {
	                this._rowResizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "eachRowResizable", {
	        /** eachRowResizable */
	        get: function () {
	            return this._eachRowResizable;
	        },
	        set: function (value) {
	            if (value != this._eachRowResizable) {
	                this._eachRowResizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowHeight", {
	        /** rowHeight */
	        get: function () {
	            return this._rowHeight;
	        },
	        set: function (value) {
	            if (value != this._rowHeight) {
	                this._rowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "minRowHeight", {
	        /** minRowHeight */
	        get: function () {
	            return this._minRowHeight;
	        },
	        set: function (value) {
	            value = Math.max(DisplayOptions.MIN_ROW_HEIGHT, value);
	            if (value != this._minRowHeight) {
	                this._minRowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "maxRowHeight", {
	        /** maxRowHeight */
	        get: function () {
	            return this._maxRowHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._maxRowHeight) {
	                this._maxRowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "minCellWidth", {
	        /** minCellWidth */
	        get: function () {
	            return this._minCellWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._minCellWidth) {
	                this._minCellWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "hscrollBar", {
	        /** hscrollBar */
	        get: function () {
	            return this._hscrollBar;
	        },
	        set: function (value) {
	            if (value != this._hscrollBar) {
	                this._hscrollBar = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "vscrollBar", {
	        /** vscrollBar */
	        get: function () {
	            return this._vscrollBar;
	        },
	        set: function (value) {
	            if (value != this._vscrollBar) {
	                this._vscrollBar = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "liveScroll", {
	        /** liveScroll */
	        get: function () {
	            return this._liveScroll;
	        },
	        set: function (value) {
	            if (value != this._liveScroll) {
	                this._liveScroll = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "horizLiveScroll", {
	        /** horizLiveScroll */
	        get: function () {
	            return this._horizLiveScroll;
	        },
	        set: function (value) {
	            if (value != this._horizLiveScroll) {
	                this._horizLiveScroll = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "scrollDuration", {
	        /** scrollDuration */
	        get: function () {
	            return this._scrollDuration;
	        },
	        set: function (value) {
	            if (value != this._scrollDuration) {
	                this._scrollDuration = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "hscrollDuration", {
	        /** hscrollDuration */
	        get: function () {
	            return this._hscrollDuration;
	        },
	        set: function (value) {
	            if (value != this._hscrollDuration) {
	                this._hscrollDuration = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "hintDelay", {
	        /** hintDelay */
	        get: function () {
	            return this._hintDelay;
	        },
	        set: function (value) {
	            value = Math.max(value, 0);
	            if (value != this._hintDelay) {
	                this._hintDelay = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "emptyShowTooltip", {
	        /** emptyShowTooltip */
	        get: function () {
	            return this._emptyShowTooltip;
	        },
	        set: function (value) {
	            if (value != this._emptyShowTooltip) {
	                this._emptyShowTooltip = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowChangeDelay", {
	        /** rowChangeDelay */
	        get: function () {
	            return this._rowChangeDelay;
	        },
	        set: function (value) {
	            if (value != this._rowChangeDelay) {
	                this._rowChangeDelay = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "horzScrollStep", {
	        /** horzScrollStep */
	        get: function () {
	            return this._horzScrollStep;
	        },
	        set: function (value) {
	            if (value != this._horzScrollStep) {
	                this._horzScrollStep = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "emptyMessage", {
	        /** emptyMessage */
	        get: function () {
	            return this._emptyMessage;
	        },
	        set: function (value) {
	            if (value != this._emptyMessage) {
	                this._emptyMessage = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "showEmptyMessage", {
	        /** showEmptyMessage */
	        get: function () {
	            return this._showEmptyMessage;
	        },
	        set: function (value) {
	            if (value != this._showEmptyMessage) {
	                this._showEmptyMessage = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "heightMeasurer", {
	        /** heightMeasurer */
	        get: function () {
	            return this._heightMeasurer;
	        },
	        set: function (value) {
	            if (value != this._heightMeasurer) {
	                this._heightMeasurer = value;
	                // if (value == "fixed") {
	                // 	this._grid.setHeightMeasurer(FixedHeightsMeasurer.Default);
	                // } else {
	                // 	this._grid.setHeightMeasurer(null);
	                // }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "fitWhenResized", {
	        /** fitWhenResized */
	        get: function () {
	            return this._fitWhenResized;
	        },
	        set: function (value) {
	            if (value != this._fitWhenResized) {
	                this._fitWhenResized = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "focusVisible", {
	        /** focusVisible */
	        get: function () {
	            return this._focusVisible;
	        },
	        set: function (value) {
	            if (value != this._focusVisible) {
	                this._focusVisible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowFocusType", {
	        /** rowFocusType */
	        get: function () {
	            return this._rowFocusType;
	        },
	        set: function (value) {
	            if (value != this._rowFocusType) {
	                this._rowFocusType = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelEnabled", {
	        /** wheelEnabled */
	        get: function () {
	            return this._wheelEnabled;
	        },
	        set: function (value) {
	            if (value != this._wheelEnabled) {
	                this._wheelEnabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelScrollLines", {
	        /** wheelScrollLines */
	        get: function () {
	            return this._wheelScrollLines;
	        },
	        set: function (value) {
	            if (value != this._wheelScrollLines) {
	                this._wheelScrollLines = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelScrollHorz", {
	        /** wheelScrollHorz */
	        get: function () {
	            return this._wheelScrollHorz;
	        },
	        set: function (value) {
	            if (value != this._wheelScrollHorz) {
	                this._wheelScrollHorz = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelAccelDelay", {
	        /** wheelAccelDelay */
	        get: function () {
	            return this._wheelAccelDelay;
	        },
	        set: function (value) {
	            if (value != this._wheelAccelDelay) {
	                this._wheelAccelDelay = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelAccelScroll", {
	        /** wheelAccelScroll */
	        get: function () {
	            return this._wheelAccelScroll;
	        },
	        set: function (value) {
	            if (value != this._wheelAccelScroll) {
	                this._wheelAccelScroll = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "wheelEventPropagate", {
	        /** wheelEventPropagate */
	        get: function () {
	            return this._wheelEventPropagate;
	        },
	        set: function (value) {
	            if (value != this._wheelEventPropagate) {
	                this._wheelEventPropagate = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rightClickable", {
	        /** rightClickable */
	        get: function () {
	            return this._rightClickable;
	        },
	        set: function (value) {
	            if (value != this._rightClickable) {
	                this._rightClickable = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "editItemMerging", {
	        /** editItemMerging */
	        get: function () {
	            return this._editItemMerging;
	        },
	        set: function (value) {
	            if (value != this._editItemMerging) {
	                this._editItemMerging = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "showInnerFocus", {
	        /** showInnerFocus */
	        get: function () {
	            return this._showInnerFocus;
	        },
	        set: function (value) {
	            if (value != this._showInnerFocus) {
	                this._showInnerFocus = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "toastZIndex", {
	        /** toastZIndex */
	        get: function () {
	            return this._toastZIndex;
	        },
	        set: function (value) {
	            if (value != this._toastZIndex) {
	                this._toastZIndex = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "popupDropdownCount", {
	        /** focusBackground */
	        // get focusBackground(): number | string {
	        //     return this._focusBackground;
	        // }
	        // set focusBackground(value: number | string) {
	        //     if (value != this._focusBackground) {
	        //         this._focusBackground = value;
	        // 		this._focusBackgroundBrush = new SolidBrush(value);
	        //         this._changed();
	        //     }
	        // }
	        /** focusColor */
	        // get focusColor(): string {
	        //     return this._focusColor;
	        // }
	        // set focusColor(value: string) {
	        //     if (value != this._focusColor) {
	        //         this._focusColor = value;
	        //         this._focusPen = new SolidPen(value, this._focusBorderWidth);
	        //         this._changed();
	        //     }
	        // }
	        /** innerFocusColor */
	        // get innerFocusColor(): string {
	        //     return this._innerFocusColor;
	        // }
	        // set innerFocusColor(value: string) {
	        //     if (value != this._innerFocusColor) {
	        //         this._innerFocusColor = value;
	        // 		this._innerFocusPen = new SolidPen(value, 1, [1,1]);
	        //         this._changed();
	        //     }
	        // }
	        /** focusActiveColor */
	        // get focusActiveColor(): string {
	        //     return this._focusActiveColor;
	        // }
	        // set focusActiveColor(value: string) {
	        //     if (value != this._focusActiveColor) {
	        //         this._focusActiveColor = value;
	        // 		this._focusActivePen = new SolidPen(value, this._focusBorderWidth);
	        //         this._changed();
	        //     }
	        // }
	        /** focusBorderWidth */
	        // get focusBorderWidth(): number {
	        //     return this._focusBorderWidth;
	        // }
	        // set focusBorderWidth(value: number) {
	        //     if (value != this._focusBorderWidth) {
	        //         this._focusBorderWidth = value;
	        // 		this._focusPen = new SolidPen(this._focusColor, value);
	        // 		this._focusActivePen = new SolidPen(this._focusActiveColor, value);
	        //         this._changed();
	        //     }
	        // }
	        /** useCssStyleProgress */
	        // get useCssStyleProgress(): boolean {
	        //     return this._useCssStyleProgress;
	        // }
	        // set useCssStyleProgress(value: boolean) {
	        //     if (value != this._useCssStyleProgress) {
	        //         this._useCssStyleProgress = value;
	        //     }
	        // }
	        /** popupDropdownCount */
	        get: function () {
	            return this._popupDropdownCount;
	        },
	        set: function (value) {
	            if (value != this._popupDropdownCount) {
	                this._popupDropdownCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "drawBorderTop", {
	        /** drawBorderTop */
	        get: function () {
	            return this._drawBorderTop;
	        },
	        set: function (value) {
	            if (value != this._drawBorderTop) {
	                this._drawBorderTop = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "drawBorderBottom", {
	        /** drawBorderBottom */
	        get: function () {
	            return this._drawBorderBottom;
	        },
	        set: function (value) {
	            if (value != this._drawBorderBottom) {
	                this._drawBorderBottom = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "drawBorderLeft", {
	        /** drawBorderLeft */
	        get: function () {
	            return this._drawBorderLeft;
	        },
	        set: function (value) {
	            if (value != this._drawBorderLeft) {
	                this._drawBorderLeft = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "drawBorderRight", {
	        /** drawBorderRight */
	        get: function () {
	            return this._drawBorderRight;
	        },
	        set: function (value) {
	            if (value != this._drawBorderRight) {
	                this._drawBorderRight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "drawLastColumnRight", {
	        /** drawLastColumnRight */
	        get: function () {
	            return this._drawLastColumnRight;
	        },
	        set: function (value) {
	            if (value != this._drawLastColumnRight) {
	                this._drawLastColumnRight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "cursorCallback", {
	        /** cursorCallback */
	        get: function () {
	            return this._cursorCallback;
	        },
	        set: function (value) {
	            this._cursorCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "selectionMode", {
	        /** selectionMode */
	        get: function () {
	            return this._selectionMode;
	        },
	        set: function (value) {
	            if (value != this._selectionMode) {
	                this._selectionMode = value;
	                this.grid.clearSelection();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "selectionStyle", {
	        /** selectionStyle */
	        get: function () {
	            return this._selectionStyle;
	        },
	        set: function (value) {
	            if (value != this._selectionStyle) {
	                var sels = this.grid.selections;
	                if (sels.count > 0) {
	                    var item = sels.getItem(0);
	                    var rng = item.getBounds();
	                    sels.clear();
	                }
	                this._selectionStyle = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "selectionDisplay", {
	        /** selectionDisplay */
	        get: function () {
	            return this._selectionDisplay;
	        },
	        set: function (value) {
	            if (value != this._selectionDisplay) {
	                this._selectionDisplay = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowHoverType", {
	        /** rowHoverType */
	        get: function () {
	            return this._rowHoverType;
	        },
	        set: function (value) {
	            if (value != this._rowHoverType) {
	                this._rowHoverType = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowBlockType", {
	        /** rowBlockType */
	        get: function () {
	            return this._rowBlockType;
	        },
	        set: function (value) {
	            if (value != this._rowBlockType) {
	                this._rowBlockType = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "rowBlockCallback", {
	        /** rowBlockCallback */
	        get: function () {
	            return this._rowBlockCallback;
	        },
	        set: function (value) {
	            if (value !== this._rowBlockCallback) {
	                this._rowBlockCallback = value;
	                if (this._rowBlockType != Types.RowMaskType.NONE) {
	                    this._refreshOwner();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "showEmptyTooltip", {
	        /** showEmptyTooltip */
	        get: function () {
	            return this._showEmptyTooltip;
	        },
	        set: function (value) {
	            this._showEmptyTooltip = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DisplayOptions.prototype, "showChangeMarker", {
	        /** showChangeMarker */
	        get: function () {
	            return this._showChangeMarker;
	        },
	        set: function (value) {
	            if (value != this._showChangeMarker) {
	                this._showChangeMarker = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DisplayOptions.MIN_ROW_HEIGHT = 20;
	    return DisplayOptions;
	}(GridOptions.GridBaseOptions));
	exports.DisplayOptions = DisplayOptions;
	});

	unwrapExports(DisplayOptions_1);
	var DisplayOptions_2 = DisplayOptions_1.DisplayOptions;

	var Size_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Size.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	var Size = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function Size(width, height) {
	        if (width === void 0) { width = 0; }
	        if (height === void 0) { height = 0; }
	        this.width = width;
	        this.height = height;
	    }
	    Size.empty = function () {
	        return new Size();
	    };
	    Size.create = function (w, h) {
	        if (w === void 0) { w = 0; }
	        if (h === void 0) { h = 0; }
	        return new Size(w, h);
	    };
	    Object.defineProperty(Size.prototype, "isEmpty", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** isEmpty */
	        get: function () {
	            return this.width === 0 || this.height === 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Size.prototype.clone = function () {
	        return new Size(this.width, this.height);
	    };
	    Size.prototype.equals = function (sz) {
	        return sz === this
	            || sz && this.width === sz.width && this.height === sz.height;
	    };
	    Size.prototype.setEmpty = function () {
	        this.width = this.height = 0;
	        return this;
	    };
	    Size.prototype.set = function (width, height) {
	        this.width = width;
	        this.height = height;
	        return this;
	    };
	    Size.prototype.round = function () {
	        var sz = this.clone();
	        sz.width >>>= 0;
	        sz.height >>>= 0;
	        return sz;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    Size.prototype.toString = function () {
	        return "{width: " + this.width + ", height: " + this.height + "}";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    Size.EMPTY = new Size();
	    return Size;
	}());
	exports.Size = Size;
	});

	unwrapExports(Size_1);
	var Size_2 = Size_1.Size;

	var GridElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var GridElement = /** @class */ (function (_super) {
	    __extends(GridElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridElement(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name) || this;
	    }
	    GridElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridElement.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            var p = this.parent;
	            while (p) {
	                if (p instanceof GridBase_1.GridBase) {
	                    return p;
	                }
	                p = p.parent;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridElement.prototype.measure = function (grid, hintWidth, hintHeight) {
	        this._setClassName(this["_dom"]);
	        return this._doMeasure(grid, hintWidth, hintHeight);
	    };
	    GridElement.prototype.layoutContent = function (lm) {
	        this._doPrepareContent(lm);
	        this._doLayoutContent(lm);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridElement.prototype._getCssSelector = function () {
	        return "";
	    };
	    GridElement.prototype._getCssDisplay = function () {
	        return "table";
	    };
	    GridElement.prototype._doDraw = function (element) {
	        this._doRender(element);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        return new Size_1.Size(hintWidth, hintHeight);
	    };
	    GridElement.prototype._doPrepareContent = function (lm) {
	    };
	    GridElement.prototype._doLayoutContent = function (lm) {
	    };
	    GridElement.prototype._doRender = function (dom) {
	    };
	    return GridElement;
	}(VisualElement_1.VisualElement));
	exports.GridElement = GridElement;
	var VisualObjectElement = /** @class */ (function (_super) {
	    __extends(VisualObjectElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function VisualObjectElement(model, name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this._cursor = "default";
	        _this._model = model;
	        return _this;
	    }
	    VisualObjectElement.prototype._doDispose = function () {
	        this._model = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(VisualObjectElement.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    VisualObjectElement.prototype.setCursor = function (value) {
	        if (value !== this._cursor) {
	            this._cursor = value;
	            this["_dom"].style.cursor = value;
	        }
	    };
	    return VisualObjectElement;
	}(GridElement));
	exports.VisualObjectElement = VisualObjectElement;
	var EmptyGridElement = /** @class */ (function (_super) {
	    __extends(EmptyGridElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EmptyGridElement() {
	        return _super.call(this, "emptyGridView") || this;
	    }
	    EmptyGridElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    EmptyGridElement.prototype._createDom = function () {
	        var div = _super.prototype._createDom.call(this);
	        var span = this._span = document.createElement("span");
	        div.appendChild(span);
	        return div;
	    };
	    EmptyGridElement.prototype._getCssSelector = function () {
	        return "rg-empty-grid";
	    };
	    EmptyGridElement.prototype._doDraw = function (element) {
	        var s = this.grid.displayOptions.emptyMessage;
	        this._span.textContent = s;
	    };
	    return EmptyGridElement;
	}(GridElement));
	exports.EmptyGridElement = EmptyGridElement;
	});

	unwrapExports(GridElement_1);
	var GridElement_2 = GridElement_1.GridElement;
	var GridElement_3 = GridElement_1.VisualObjectElement;
	var GridElement_4 = GridElement_1.EmptyGridElement;

	var TableBaseElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	/**
	 * 현재 화면에 표시되는 행들의 span 상태.
	 * fixedRow는 제외. ItemElement._visIndex로 접근해야 한다.
	 */
	// class SpanGrid extends Base {
	//     //-------------------------------------------------------------------------
	//     // consts
	//     //-------------------------------------------------------------------------
	//     private static readonly SINGLE = -1;
	//     private static readonly HIDDEN = 0xffff;
	//     //-------------------------------------------------------------------------
	//     // fields
	//     //-------------------------------------------------------------------------
	//     private _columns: ValueColumn[];
	//     private _cells: number[][] = [];
	//     private _height = 0;
	//     private _width = 0;
	//     private _nextId = 0;
	//     //-------------------------------------------------------------------------
	//     // constructor
	//     //-------------------------------------------------------------------------
	//     constructor() {
	//         super();
	//     }
	//     //-------------------------------------------------------------------------
	//     // properties
	//     //-------------------------------------------------------------------------
	//     get empty(): boolean {
	//         return this._nextId <= 0;
	//     }
	//     //-------------------------------------------------------------------------
	//     // methods
	//     //-------------------------------------------------------------------------
	//     prepare(rows: number, columns: ValueColumn[]): void {
	//         const cols = (this._columns = columns).length;
	//         if (rows > this._height || cols > this._width) {
	//             this._width = cols;
	//             this._cells = [];
	//             for (let r = 0; r < rows; r++) {
	//                 const cells = [];
	//                 this._cells.push(cells);
	//                 for (let c = 0; c < this._width; c++) {
	//                     cells.push(SpanGrid.SINGLE);
	//                 }
	//             }
	//         } else {
	//             for (let r = 0; r < this._height; r++) {
	//                 const cells = this._cells[r];
	//                 for (let c = 0; c < this._width; c++) {
	//                     cells[c] = SpanGrid.SINGLE;
	//                 }
	//             }
	//         }
	//         this._nextId = 0;
	//     }
	//     add(row: number, col: number, rowCount: number, colCount: number): number {
	//         const id = this._nextId++;
	//         for (let r = row; r < row + rowCount; r++) {
	//             const cells = this._cells[r];
	//             if (cells) {
	//                 for (let c = col; c < col + colCount; c++) {
	//                     cells[c] = id + SpanGrid.HIDDEN;
	//                 }
	//             }
	//         }
	//         this._cells[row][col] = id;
	//         return id;
	//     }
	//     /**
	//      * True면 body view에서는 무시하고, merged view에서 셀을 처리한다.
	//      */
	//     isMerged(row: number, col: number): boolean {
	//         return this._cells[row][col] > SpanGrid.SINGLE;
	//     }
	//     isMergeRoot(row: number, col: number): boolean {
	//         return this._cells[row][col] > SpanGrid.SINGLE && this._cells[row][col] < SpanGrid.HIDDEN;
	//     }
	//     isHidden(row: number, col: number): boolean {
	//         return this._cells[row][col] >= SpanGrid.HIDDEN;
	//     }
	//     get(row: number, col: number): {rows: number, cols: number} {
	//         const cells = this._cells;
	//         const v = cells[row][col];
	//         if (v > SpanGrid.SINGLE) {
	//             let nRow = 1;
	//             let nCol = 1;
	//             for (let r = row + 1; r < cells.length; r++) {
	//                 if (cells[r][col] == v) {
	//                     nRow++;
	//                 } else {
	//                     break;
	//                 }
	//             }
	//             for (let c = col + 1, cells2 = cells[row]; c < cells[row].length; c++) {
	//                 if (cells2[c] == v) {
	//                     nCol++;
	//                 } else {
	//                     break;
	//                 }
	//             }
	//             return {
	//                 rows: nRow,
	//                 cols: nCol
	//             };
	//         }
	//         return null;
	//     }
	//     getCellCount(row: number): number {
	//         const cells = this._cells[row];
	//         let n = 0;
	//         let p = SpanGrid.SINGLE;
	//         for (let i = 0; i < this._width; i++) {
	//             const v = cells[i];
	//             if (v >= 0) {
	//                 if (v != p) {
	//                     p = v;
	//                     if (p < SpanGrid.HIDDEN) {
	//                         n++;
	//                     }
	//                 }
	//             } else {
	//                 n++;
	//             }
	//         }
	//         return n;
	//     }
	//     getColIndex(row: number, col: number): number {
	//         const cells = this._cells[row];
	//         let n = -1;
	//         for (let i = 0; i <= col; i++) {
	//             const v = cells[i];
	//             if (v < SpanGrid.HIDDEN) {
	//                 n++;
	//             }
	//         }
	//         return n;
	//     }
	//     //-------------------------------------------------------------------------
	//     // internal members
	//     //-------------------------------------------------------------------------
	// }
	var TableBaseElement = /** @class */ (function (_super) {
	    __extends(TableBaseElement, _super);
	    // private _spanGrid: SpanGrid;
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TableBaseElement(model, name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, model, name) || this;
	    }
	    TableBaseElement.prototype._doDispose = function () {
	        this._tbody = null;
	        this._thead = null;
	        this._table = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TableBaseElement.prototype, "tableRowCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._tbody.childElementCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TableBaseElement.prototype.getCellPoint = function (td, p) {
	        p = p || new Point_1.Point();
	        p.x += td.offsetLeft;
	        p.y += td.offsetTop;
	        return p;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TableBaseElement.prototype._createDom = function () {
	        var dom = document.createElement("div");
	        var table = this._table = document.createElement("table");
	        var css = table.style;
	        css.setProperty("table-layout", "fixed", "important");
	        css.setProperty("width", "0px", "important");
	        table.className = "rg-table";
	        dom.appendChild(table);
	        this._thead = document.createElement("thead");
	        table.appendChild(this._thead);
	        this._tbody = document.createElement("tbody");
	        table.appendChild(this._tbody);
	        return dom;
	    };
	    TableBaseElement.prototype._clearSpans = function () {
	    };
	    TableBaseElement.prototype._addSpan = function (row, col, rowCount, colCount) {
	    };
	    TableBaseElement.prototype._addColSpan = function (row, col, count) {
	    };
	    TableBaseElement.prototype._addRowSpan = function (row, col, count) {
	    };
	    TableBaseElement.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.overflow = "hidden";
	    };
	    TableBaseElement.prototype._doPrepareContent = function (lm) {
	        this._doPrepareTableExtents(lm);
	        this._doPrepareTable(lm);
	    };
	    TableBaseElement.prototype._doDraw = function (element) {
	        this._doRender(element);
	        this._doRenderTable(this._tbody);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TableBaseElement.prototype._doPrepareTableExtents = function (lm) {
	    };
	    TableBaseElement.prototype._doPrepareTable = function (lm) {
	        this._doPrepareTableHead(lm, this._thead);
	        this._doPrepareTableRows(lm, this._tbody);
	    };
	    TableBaseElement.prototype._doPrepareTableHead = function (lm, head) {
	        var row;
	        if (head.childElementCount == 0) {
	            row = document.createElement("tr");
	            head.appendChild(row);
	            row.setAttribute("aria-hidden", "true");
	            var css = row.style;
	            //css.border = "0px none !important";
	            css.setProperty("border", "0px none", "important"); // TODO: 이렇게 하지 않으면 틀어진다! WHY?
	        }
	        else {
	            row = head.lastElementChild;
	        }
	        var count = this._getCellCount(lm);
	        while (row.childElementCount < count) {
	            var th = document.createElement("th");
	            th.scope = "col";
	            var css = th.style;
	            css.setProperty("visibility", "hidden", "important");
	            css.setProperty("margin", "0px", "important");
	            css.setProperty("padding", "0px", "important");
	            css.setProperty("font-size", "0px", "important");
	            css.setProperty("line-height", "0px", "important");
	            css.height = "0px";
	            row.appendChild(th);
	        }
	        while (row.childElementCount > count) {
	            row.removeChild(row.lastChild);
	        }
	        var children = row.children;
	        for (var i = 0; i < children.length; i++) {
	            var th = children[i];
	            var css = th.style;
	            css.width = this._getCellWidth(lm, i) + "px";
	        }
	    };
	    TableBaseElement.prototype._prepareTableRowCells = function (lm, row) {
	        var count = this._getCellCount(lm);
	        var i = 0;
	        while (row.childElementCount < count) {
	            var td = document.createElement("td");
	            row.appendChild(td);
	            var elt = this._prepareCellContent(td, i++);
	            td.appendChild(elt);
	        }
	        while (row.childElementCount > count) {
	            row.removeChild(row.lastChild);
	        }
	        return row.childElementCount;
	    };
	    TableBaseElement.prototype._isFixedHeight = function (lm) {
	        return true;
	    };
	    TableBaseElement.prototype._getMinRowHeight = function (lm) {
	        return lm.minRowHeight;
	    };
	    TableBaseElement.prototype._doPrepareTableRow = function (lm, index, tindex, tr) {
	        var count = this._prepareTableRowCells(lm, tr);
	        var fixed = this._isFixedHeight(lm); // 고정 높이.
	        var children = tr.children;
	        // 자유 높이일 경우에도 최소 높이 제한은 지켜야 한다.
	        var h = fixed ? this._getTableRowHeight(lm, tindex) : this._getMinRowHeight(lm);
	        var hMax = (h - 1) + "px";
	        var css = tr.style;
	        tr["$_view"] = this["$_hash"];
	        tr["$_type"] = this instanceof SimpleTableElement ? null : lm.getItem(index).isData ? "d" : 'g';
	        css.height = h + "px";
	        css.display = ""; // fixedBar에서 설정됐을 수 있다.
	        for (var i = 0, cnt = children.length; i < cnt; i++) {
	            var td = children[i];
	            var elt = td.firstElementChild;
	            if (!elt) {
	                elt = this._prepareCellContent(td, i);
	                td.appendChild(elt);
	            }
	            elt.style.maxHeight = fixed ? hMax : "";
	            elt.style.overflow = "hidden";
	        }
	    };
	    TableBaseElement.prototype._doRenderTable = function (body) {
	        var children = body.children;
	        for (var i = 0; i < children.length; i++) {
	            var child = children[i];
	            this._renderRow(child, i);
	        }
	    };
	    TableBaseElement.prototype._renderRow = function (dom, row) {
	        this._doDrawRow(row, dom);
	        var children = dom.children;
	        for (var i = 0; i < children.length; i++) {
	            var child = children[i];
	            this._renderCell(child.lastElementChild, row, i);
	        }
	    };
	    TableBaseElement.prototype._renderCell = function (dom, row, col) {
	        this._doDrawCell(row, col, dom);
	    };
	    TableBaseElement.prototype._prepareCellContent = function (cell, index) {
	        return document.createElement("div");
	    };
	    TableBaseElement.prototype._doDrawRow = function (row, dom) {
	    };
	    TableBaseElement.prototype._doDrawCell = function (row, col, dom) {
	    };
	    TableBaseElement.prototype._getTableRow = function (lm, row) {
	        return this._tbody.children[row];
	    };
	    TableBaseElement.prototype._getTableCell = function (row, col) {
	        return this._tbody.children[row].children[col];
	    };
	    TableBaseElement.prototype.getCellContent = function (row, col) {
	        //if (!this._tbody.children[row].children[col]) debugger;
	        return this._tbody.children[row].children[col].firstElementChild;
	    };
	    TableBaseElement.prototype.getContentAt = function (index) {
	        var grid = index.grid;
	        var lm = grid.layoutManager;
	        var fixedCount = lm.fixedItemCount;
	        var col = index.column ? index.column.index : 0;
	        var row;
	        if (fixedCount > 0) {
	            if (index.itemIndex < fixedCount) {
	                row = index.itemIndex;
	            }
	            else {
	                row = index.itemIndex - lm.topIndex + 1;
	            }
	        }
	        else {
	            row = index.itemIndex - lm.topIndex;
	        }
	        return this.getCellContent(row, col);
	    };
	    return TableBaseElement;
	}(GridElement_1.VisualObjectElement));
	exports.TableBaseElement = TableBaseElement;
	var SimpleTableElement = /** @class */ (function (_super) {
	    __extends(SimpleTableElement, _super);
	    function SimpleTableElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SimpleTableElement.prototype._doPrepareTableRows = function (lm, body) {
	        var rowCount = this._getTableRowCount(lm);
	        while (body.childElementCount < rowCount) {
	            var tr = document.createElement("tr");
	            body.appendChild(tr);
	        }
	        while (body.childElementCount > rowCount) {
	            body.removeChild(body.lastChild);
	        }
	        var children = body.children;
	        for (var i = 0; i < rowCount; i++) {
	            var tr = children[i];
	            var css = tr.style;
	            css.height = this._getTableRowHeight(lm, i) + "px";
	            this._doPrepareTableRow(lm, i, i, tr);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SimpleTableElement.prototype._getTableRowCount = function (lm) {
	        return 1;
	    };
	    return SimpleTableElement;
	}(TableBaseElement));
	exports.SimpleTableElement = SimpleTableElement;
	var DataTableElement = /** @class */ (function (_super) {
	    __extends(DataTableElement, _super);
	    function DataTableElement() {
	        var _this = _super !== null && _super.apply(this, arguments) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._trCount = 0;
	        _this._trs = 1; // 데이터행 당 table row 개수.
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataTableElement.prototype._getTrs = function (lm) {
	        return 1;
	    };
	    DataTableElement.prototype._getTableRowCount = function (lm) {
	        var nFixed = lm.fixedItemCount;
	        var n = nFixed + lm.itemCount;
	        // table rows
	        n *= this._trs;
	        // fixed bar
	        n += nFixed > 0 ? 1 : 0;
	        return n;
	    };
	    DataTableElement.prototype.$_getTableIndex = function (lm, row) {
	        var nFixed = lm.fixedItemCount;
	        var r = row * this._trs;
	        return nFixed > 0 && row >= nFixed ? r + 1 : r;
	    };
	    DataTableElement.prototype._getTableRow = function (lm, row) {
	        var r = this.$_getTableIndex(lm, row);
	        return this["_tbody"].children[r];
	    };
	    DataTableElement.prototype.$_getTableRowAt = function (lm, row) {
	        var r = this.$_getTableIndex(lm, row);
	        return this["_tbody"].children[r];
	    };
	    DataTableElement.prototype._getTableRowInternal = function (lm, row, index) {
	        var r = this.$_getTableIndex(lm, row);
	        return this["_tbody"].children[r + index];
	    };
	    DataTableElement.prototype._doPrepareTableRows = function (lm, body) {
	        var items = lm["$_getItems"]();
	        var trs = this._trs = this._getTrs(lm);
	        var fixedCount = lm.fixedItemCount;
	        var itemCount = lm.itemCount + fixedCount;
	        var trCount = this._trCount = this._getTableRowCount(lm);
	        while (body.childElementCount < trCount) {
	            var tr_1 = document.createElement("tr");
	            body.appendChild(tr_1);
	        }
	        while (body.childElementCount > trCount) {
	            body.removeChild(body.lastChild);
	        }
	        var children = body.children;
	        var i = 0;
	        var tr = 0;
	        if (fixedCount > 0) {
	            for (i = 0; i < fixedCount; i++) {
	                for (var r = 0; r < trs; r++, tr++) {
	                    this._doPrepareTableRow(lm, i, tr, children[tr]);
	                }
	            }
	            this.$_prepareFixedBar(lm, children[tr++]);
	        }
	        for (; i < itemCount; i++) {
	            var n = items[i].isData ? trs : 1;
	            for (var r = 0; r < n; r++, tr++) {
	                this._doPrepareTableRow(lm, i, tr, children[tr]);
	            }
	        }
	    };
	    DataTableElement.prototype.$_prepareFixedBar = function (lm, tr) {
	        var cnt = this._prepareTableRowCells(lm, tr);
	        var h = lm.fixedBarHeight;
	        var css = tr.style;
	        if (h > 0) {
	            css.height = lm.fixedBarHeight + "px";
	        }
	        else {
	            css.display = "none";
	        }
	        //css.background = "yellow";
	        var children = tr.children;
	        for (var i = 0; i < cnt; i++) {
	            var elt = children[i].firstElementChild;
	            if (elt) {
	                elt.rowSpan = 1;
	                elt.style.maxHeight = "0px";
	                elt.style.overflow = "hidden";
	            }
	        }
	        return h;
	    };
	    DataTableElement.prototype._getTableRowHeight = function (lm, tr) {
	        var fixed = lm.fixedItemCount;
	        if (fixed > 0 && tr > fixed) {
	            return lm.getTableItemHeight(tr - fixed);
	        }
	        else {
	            return lm.getTableItemHeight(tr);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DataTableElement.prototype._getCellContent = function (td) {
	        return td.firstElementChild;
	    };
	    DataTableElement.prototype._updateCellContent = function (grid, cell, td) {
	        this._doUpdateCellContent(grid, cell, this._getCellContent(td));
	    };
	    DataTableElement.prototype._doUpdateCellContent = function (grid, cell, dom) {
	    };
	    return DataTableElement;
	}(TableBaseElement));
	exports.DataTableElement = DataTableElement;
	});

	unwrapExports(TableBaseElement_1);
	var TableBaseElement_2 = TableBaseElement_1.TableBaseElement;
	var TableBaseElement_3 = TableBaseElement_1.SimpleTableElement;
	var TableBaseElement_4 = TableBaseElement_1.DataTableElement;

	var HeaderElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// HeaderElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var ROW_SPAN = "rowspan";
	var COL_SPAN = "colspan";
	var HeaderTableCell = /** @class */ (function () {
	    function HeaderTableCell(td) {
	        this.cell = null;
	        this.check = null;
	        this.sort = null;
	        this.filter = null;
	        this.popup = null;
	        this.layout = null;
	        this.visible = undefined;
	        this.spanned = false;
	        this.width = 0;
	        this.height = 0;
	        this.rowSpan = 1;
	        this.colSpan = 1;
	        this.className = "";
	        this.rendererClass = "";
	        this.text = undefined;
	        this.html = undefined;
	        this.showTooltip = true;
	        this.tooltip = "";
	        this.sortWidth = 0;
	        this.filterWidth = 0;
	        this.checkWidth = 0;
	        this.popupWidth = 0;
	        this.marginLeft = 0;
	        this.marginRight = 0;
	        this.marginTop = 0;
	        this.marginBottom = 0;
	        this.cell = td;
	    }
	    HeaderTableCell.prototype.dispose = function () {
	        this.cell = this.check = this.sort = this.filter = null;
	        this.layout = null;
	    };
	    // reset(td: HTMLTableCellElement): HeaderTableCell {
	    //     this.cell = td;
	    //     return this;
	    // }
	    HeaderTableCell.prototype.span = function () {
	        this.spanned = true;
	        this.clear(false);
	    };
	    HeaderTableCell.prototype.clear = function (visible) {
	        if (this.colSpan > 1) {
	            this.colSpan = 1;
	            this.cell.removeAttribute(COL_SPAN);
	        }
	        if (this.rowSpan > 1) {
	            this.rowSpan = 1;
	            this.cell.removeAttribute(ROW_SPAN);
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        //if (visible) {
	        var div = this.cell.firstElementChild;
	        var span = div.firstElementChild;
	        var css = div.style;
	        if (this.checkWidth > 0) {
	            div.removeChild(this.check);
	            this.check = null;
	            this.checkWidth = 0;
	        }
	        if (this.filterWidth > 0) {
	            div.removeChild(this.filter);
	            this.filter = null;
	            this.filterWidth = 0;
	        }
	        if (this.sortWidth > 0) {
	            div.removeChild(this.sort);
	            this.sort = null;
	            this.sortWidth = 0;
	        }
	        if (this.popupWidth > 0) {
	            div.removeChild(this.popup);
	            this.popup = null;
	            this.popupWidth = 0;
	        }
	        if (this.className) {
	            this.cell.className = this.className = "";
	        }
	        if (this.rendererClass) {
	            div.className = this.rendererClass = "";
	        }
	        if (this.marginLeft != 0) {
	            css.marginLeft = '';
	            this.marginLeft = 0;
	        }
	        if (this.marginRight != 0) {
	            css.marginRight = '';
	            this.marginRight = 0;
	        }
	        if (this.marginTop != 0) {
	            css.marginTop = '';
	            this.marginTop = 0;
	        }
	        if (this.marginBottom != 0) {
	            css.marginBottom = '';
	            this.marginBottom = 0;
	        }
	        if (this.text) {
	            span.textContent = this.text = "";
	        }
	        if (this.html) {
	            span.innerHTML = this.html = "";
	        }
	        //}
	        return this;
	    };
	    HeaderTableCell.prototype.setColSpan = function (value) {
	        if (this.colSpan != value) {
	            this.colSpan = value;
	            if (value > 1) {
	                this.cell.colSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        return this;
	    };
	    HeaderTableCell.prototype.setRowSpan = function (value) {
	        if (this.rowSpan != value) {
	            this.rowSpan = value;
	            if (value > 1) {
	                this.cell.rowSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        return this;
	    };
	    HeaderTableCell.prototype.setVisible = function (value) {
	        if (value !== this.visible) {
	            this.visible = value;
	            this.cell.style.display = value ? "" : "none";
	        }
	        return this;
	    };
	    HeaderTableCell.prototype.set = function (colSpan, rowSpan, visible) {
	        if (this.colSpan != colSpan) {
	            this.colSpan = colSpan;
	            if (colSpan > 1) {
	                this.cell.colSpan = colSpan;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        if (this.rowSpan != rowSpan) {
	            this.rowSpan = rowSpan;
	            if (rowSpan > 1) {
	                this.cell.rowSpan = rowSpan;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        return this;
	    };
	    HeaderTableCell.prototype.setText = function (elt, value) {
	        if (value != this.text) {
	            elt.textContent = this.text = value;
	        }
	    };
	    HeaderTableCell.prototype.setHtml = function (elt, value) {
	        if (value != this.html) {
	            elt.innerHTML = this.html = value;
	        }
	    };
	    HeaderTableCell.prototype.setClassName = function (value) {
	        if (value != this.className) {
	            this.cell.className = this.className = value;
	            return true;
	        }
	        return false;
	    };
	    HeaderTableCell.prototype.setRendererClassName = function (div, value) {
	        if (value != this.rendererClass) {
	            div.className = this.rendererClass = value;
	        }
	    };
	    HeaderTableCell.prototype.setDivMarigns = function (css, left, right, top, bottom) {
	        if (left != this.marginLeft) {
	            css.marginLeft = left ? (left + "px") : "";
	            this.marginLeft = left;
	        }
	        if (right != this.marginRight) {
	            css.marginRight = right ? (right + "px") : "";
	            this.marginRight = right;
	        }
	        if (top != this.marginTop) {
	            css.marginTop = top ? (top + "px") : "";
	            this.marginTop = top;
	        }
	        if (bottom != this.marginBottom) {
	            css.marginBottom = bottom ? (bottom + "px") : "";
	            this.marginBottom = bottom;
	        }
	    };
	    return HeaderTableCell;
	}());
	exports.HeaderTableCell = HeaderTableCell;
	var HeaderElement = /** @class */ (function (_super) {
	    __extends(HeaderElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderElement(model) {
	        var _this = _super.call(this, model, "headerView") || this;
	        _this._rowPoints = [];
	        _this._cells = [];
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    HeaderElement.renderCell = function (model, dom) {
	        dom.textContent = model.text || "";
	    };
	    HeaderElement.prototype._doDispose = function () {
	        for (var r = 0; r < this._cells.length; r++) {
	            var cells = this._cells[r];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c].dispose();
	                cells[c] = null;
	            }
	        }
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    // TODO: parentElement 가져오는 게 속도에 영향이 없으면 tr 인덱스를 활용할 것!
	    HeaderElement.prototype.tableCellByCell = function (cell) {
	        for (var r = 0; r < this._cells.length; r++) {
	            var cells = this._cells[r];
	            for (var c = 0; c < cells.length; c++) {
	                var obj = cells[c];
	                if (obj && obj.cell === cell) {
	                    return obj;
	                }
	            }
	        }
	        return null;
	    };
	    HeaderElement.prototype.layoutByCell = function (cell) {
	        var tc = this.tableCellByCell(cell);
	        return tc && tc.layout;
	    };
	    HeaderElement.prototype.columnByCell = function (cell) {
	        var obj = this.layoutByCell(cell);
	        return obj && obj["_columnObj"];
	    };
	    HeaderElement.prototype.refresh = function (grid) {
	        var lm = grid.layoutManager;
	        var headerLayouts = lm.cellLayouts["_headerCells"];
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm);
	        var c2 = this._getEndCell(lm);
	        for (var r = 0; r < headerLayouts.length; r++) {
	            var layouts = headerLayouts[r];
	            var tr = this._getTableRow(lm, r);
	            for (var c = c1; c <= c2; c++) {
	                var layout = layouts[c];
	                if (layout instanceof CellLayout.CellLayoutColumnItem) {
	                    var td = tr.children[c - f];
	                    td["$_foc"] = grid.isFocusedColumn(layout.firstColumn);
	                    Utils_1.Utils.setClassName(td, this.$_getCellSelector(layout, td));
	                }
	            }
	        }
	        // for (let i = this._start; i <= this._end; i++) {
	        //     const td = this._getTableCell(0, i - this._start);
	        //     td["$_foc"] = grid.isFocusedColumn(grid.columnByHash(td["$_col"]));
	        //     Utils.setClassName(td, this._getCellSelector(td));
	        //     // td.className = this._getCellSelector(td);
	        // }
	    };
	    HeaderElement.prototype.getRowAt = function (y) {
	        for (var i = 1; i < this._rowPoints.length - 1; i++) {
	            if (y < this._rowPoints[i])
	                return i - 1;
	        }
	        return this._rowPoints.length - 2;
	    };
	    HeaderElement.prototype.getLayoutHeight = function (layout, includeChildren) {
	        var row = layout.hrow;
	        var span = includeChildren ? layout.hlen : layout.hspan;
	        return this._rowPoints[row + span] - this._rowPoints[row];
	    };
	    HeaderElement.prototype.getLayoutPos = function (layout) {
	        return this._rowPoints[layout.hrow];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderElement.prototype._getCssSelector = function () {
	        return "rg-header";
	    };
	    HeaderElement.prototype._isFixedHeight = function () {
	        return this._fixedHeight;
	    };
	    HeaderElement.prototype._getMinRowHeight = function (lm) {
	        return this._minRowHeight;
	    };
	    HeaderElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        var span = document.createElement("span");
	        elt.appendChild(span);
	        return elt;
	    };
	    HeaderElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var header = this.model;
	        var rows = grid.layoutManager.headerRows;
	        var h = header.height;
	        this._minRowHeight = header.minRowHeight;
	        this._fixedHeight = h <= 0;
	        if (this._fixedHeight) {
	            h = Math.max(this._minRowHeight, grid.heightMeasurer.headerHeight) * rows;
	        }
	        h = Math.max(header.minHeight, h);
	        return Size_1.Size.create(hintWidth, h);
	    };
	    HeaderElement.prototype._doPrepareTableExtents = function (lm) {
	        var pts = this._rowPoints;
	        var h = this.height;
	        var hRow = Math.floor(h / lm.headerRows);
	        pts.length = this._getTableRowCount(lm) + 1;
	        pts[0] = 0;
	        if (pts.length > 0) {
	            var i = 1;
	            for (; i < pts.length - 1; i++) {
	                pts[i] = pts[i - 1] + hRow;
	            }
	            pts[i] = h;
	        }
	    };
	    HeaderElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var header = this.model;
	        var headerLayouts = lm.cellLayouts["_headerCells"];
	        var rows = headerLayouts.length;
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm) - f;
	        var c2 = this._getEndCell(lm) - f;
	        this.$_refreshCells(lm, headerLayouts, this["_tbody"]);
	        this.$_refreshSpans(rows, c1, c2);
	        for (var r = 0; r < rows; r++) {
	            var cells = this._cells[r];
	            for (var c = c1; c <= c2; c++) {
	                var cell = cells[c];
	                if (cell.visible) {
	                    var layout = cell.layout;
	                    var td = cell.cell;
	                    cell.setClassName(this.$_getCellSelector(layout, td));
	                    if (layout.isNull) {
	                        {
	                            cell.setText(td.firstElementChild.firstElementChild, layout.header.text);
	                        }
	                    }
	                    else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	                        {
	                            cell.setText(td.firstElementChild.firstElementChild, layout.header.text);
	                        }
	                    }
	                    else {
	                        var model = header.getCell(layout);
	                        this._updateCell(grid, header, model, cell);
	                    }
	                }
	            }
	        }
	    };
	    HeaderElement.prototype._doRender = function (dom) {
	    };
	    HeaderElement.prototype._getTableRowCount = function (lm) {
	        return lm.headerRows;
	    };
	    HeaderElement.prototype._getTableRowHeight = function (lm, row) {
	        return this._rowPoints[row + 1] - this._rowPoints[row];
	    };
	    HeaderElement.prototype.$_getCellHeight = function (layout) {
	        var r = layout.row;
	        var y1 = this._rowPoints[r];
	        var y2 = this._rowPoints[r + layout.hspan];
	        return y2 - y1;
	    };
	    HeaderElement.prototype._getCellCount = function (lm) {
	        return lm.cellCount - lm.fixedCellCount - lm.rightCellCount;
	    };
	    HeaderElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getCellWidth(col);
	    };
	    HeaderElement.prototype._doDrawCell = function (row, col, dom) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HeaderElement.prototype.$_getCellSelector = function (layout, td) {
	        if (layout instanceof CellLayout.CellLayoutGroupItem) {
	            return "rg-header-group-cell";
	        }
	        else {
	            return td["$_foc"] ? "rg-header-cell rg-header-focus" : "rg-header-cell";
	        }
	    };
	    HeaderElement.prototype._getFirstCell = function (lm) {
	        return lm["_firstCell"];
	    };
	    HeaderElement.prototype._getLastCell = function (lm) {
	        return lm["_lastCell"];
	    };
	    HeaderElement.prototype._getStartCell = function (lm) {
	        return lm.getStartCell();
	    };
	    HeaderElement.prototype._getEndCell = function (lm) {
	        return lm.getEndCell();
	    };
	    // table => cells
	    // ! fixed, norma, right header는 각각 다른 table이다.
	    HeaderElement.prototype.$_refreshCells = function (lm, headerLayouts, tbody) {
	        var t = Utils_1.Utils.getTimer();
	        var headerCells = this._cells;
	        var rows = tbody.children;
	        var nRow = rows.length;
	        var c1 = this._getFirstCell(lm);
	        var c2 = this._getLastCell(lm);
	        var cols = c2 - c1 + 1;
	        for (var r = headerCells.length; r < nRow; r++) {
	            headerCells.push([]);
	        }
	        for (var tr = 0; tr < nRow; tr++) {
	            var hcells = headerCells[tr];
	            var tds = rows[tr].children;
	            var layouts = headerLayouts[tr];
	            for (var c = 0; c < cols; c++) {
	                var td = tds[c];
	                var layout = layouts[c + c1];
	                var obj = hcells[c];
	                if (!obj) {
	                    obj = hcells[c] = new HeaderTableCell(tds[c]);
	                    obj.layout = layout;
	                }
	                else if (obj.cell !== td) {
	                    // td와 obj.cell이 항상 동일하므로 여기에 들어올 일이 없다.
	                    debugger;
	                }
	                else if (obj.layout != layout) {
	                    obj.layout = layout;
	                    obj.clear(true);
	                }
	                obj.height = this.$_getCellHeight(obj.layout);
	                obj.width = this._getCellWidth(lm, c);
	                obj.spanned = false;
	            }
	            // td 개수와 bcells 길이를 맞춘다.
	            // table의 td와 bcells의 td가 항상 동일힌 상태를 유지하도록 한다.
	            for (var c = cols; c < hcells.length; c++) {
	                hcells[c].dispose();
	            }
	            hcells.length = cols;
	        }
	        // tr 개수와 cell row 수를 맞춘다.
	        for (var tr = nRow; tr < headerCells.length; tr++) {
	            var cells = headerCells[tr];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c].dispose();
	                cells[c] = null;
	            }
	        }
	        headerCells.length = nRow;
	        t = Utils_1.Utils.getTimer() - t;
	        console.log("$$$$ REFRESH_HEADER_CELLS: " + t);
	    };
	    HeaderElement.prototype.$_refreshSpans = function (rows, c1, c2) {
	        for (var r = 0; r < rows; r++) {
	            var cells = this._cells[r];
	            for (var c = c1; c <= c2; c++) {
	                var cell = cells[c];
	                var layout = cell.layout;
	                var p = layout.parent;
	                var vert = p && p.vertical;
	                if (cell.spanned) ;
	                else if (layout.isProxy) {
	                    cell.clear(false);
	                }
	                else {
	                    var len = 0;
	                    var span = layout.getHeaderSpan() - 1;
	                    if (span > 0) {
	                        var i = 0;
	                        var idx = layout.vindex + 1;
	                        // span은 그룹 내에서...
	                        while (i++ < span && idx < p.visibleCount) {
	                            var sib = p.getVisible(idx++);
	                            if (vert) {
	                                len += sib["_hspan"];
	                                this._cells[r + i][c].span();
	                            }
	                            else {
	                                len += sib["_cspan"];
	                                cells[c + i].span();
	                            }
	                        }
	                    }
	                    if (layout instanceof CellLayout.CellLayoutGroupItem || layout.isNull) {
	                        cell.clear(true);
	                    }
	                    if (vert) {
	                        cell.set(layout["_cspan"], layout["_hspan"] + len, true);
	                    }
	                    else {
	                        cell.set(layout["_cspan"] + len, layout["_hspan"], true);
	                    }
	                }
	            }
	        }
	    };
	    HeaderElement.prototype._updateCell = function (grid, header, model, cell) {
	        var sortingOptions = grid.sortingOptions;
	        var filteringOptions = grid.filteringOptions;
	        var column = cell.layout.firstColumn;
	        var checkLoc = model.checkLocation;
	        var wCheck = (checkLoc && checkLoc != Types.ColumnHeaderItemLocation.NONE) ? header.checkWidth : 0;
	        var hCheck = wCheck > 0 ? header.checkWidth : 0;
	        var sortHandleVisible = column && this.$_canSortHandleVisible(sortingOptions, column);
	        var sortDir = (column && column.sortDirection) || Types.SortDirection.NONE;
	        var wSort = sortHandleVisible ? header.sortWidth : 0;
	        var wFilter = column && this.$_canFilterHandleVisible(filteringOptions, column) ? header.filterWidth : 0;
	        var wPopup = column && this.$_canPopupHandleVisible(column) ? header.popupWidth : 0;
	        var div = cell.cell.firstElementChild;
	        var span = div.firstElementChild;
	        var wCell = cell.width;
	        var hCell = cell.height;
	        var wLeft = 0;
	        var wRight = 0;
	        var wTop = 0;
	        var wBottom = 0;
	        cell.setRendererClassName(div, HeaderElement.RENDERER_STYLE);
	        // check box
	        var checkHandle = cell.check;
	        if (wCheck > 0) {
	            var css_1;
	            if (!checkHandle) {
	                checkHandle = document.createElement("input");
	                cell.check = checkHandle;
	                checkHandle.type = "checkbox";
	                checkHandle.className = "rg-header-check";
	                css_1 = checkHandle.style;
	                css_1.position = "absolute";
	                css_1.display = "inline-block";
	            }
	            else {
	                css_1 = checkHandle.style;
	            }
	            if (cell.checkWidth <= 0) {
	                div.appendChild(checkHandle);
	                cell.checkWidth = wCheck;
	            }
	            checkHandle.checked = column.checked;
	            var x = 0;
	            var y = 0;
	            switch (checkLoc) {
	                case "left":
	                case "leftEdge":
	                    wLeft += wCheck;
	                    y = Math.floor((hCell - header.checkHeight) / 2);
	                    break;
	                case "right":
	                case "rightEdge":
	                    wRight += wCheck;
	                    x = wCell - wCheck;
	                    y = Math.floor((hCell - header.checkHeight) / 2);
	                    break;
	                case "top":
	                case "topEdge":
	                    wTop += hCheck;
	                    x = Math.floor((wCell - wSort - wFilter - header.checkWidth) / 2);
	                    break;
	                case "bottom":
	                case "bottomEdge":
	                    wBottom += hCheck;
	                    x = Math.floor((wCell - wSort - wFilter - header.checkWidth) / 2);
	                    y = hCell - header.checkHeight;
	                    break;
	            }
	            css_1.left = x + "px";
	            css_1.top = y + "px";
	            //css.width = wCheck + "px";
	            //css.height = header.checkHeight + "px";
	        }
	        else if (cell.checkWidth > 0) {
	            div.removeChild(checkHandle);
	            cell.checkWidth = 0;
	        }
	        // filter hanlde
	        var filterHandle = cell.filter;
	        if (wFilter > 0) {
	            var css_2;
	            if (!filterHandle) {
	                filterHandle = document.createElement("span");
	                cell.filter = filterHandle;
	                css_2 = filterHandle.style;
	                css_2.position = "absolute";
	                css_2.display = "inline-block";
	            }
	            else {
	                css_2 = filterHandle.style;
	            }
	            if (cell.filterWidth <= 0) {
	                div.appendChild(filterHandle);
	                cell.filterWidth = wFilter;
	            }
	            filterHandle.className = "rg-header-filtering";
	            wRight += wFilter;
	            css_2.left = (wCell - wRight) + "px";
	            css_2.top = Math.floor((hCell - header.filterHeight) / 2) + "px";
	            css_2.width = wFilter + "px";
	            css_2.height = header.filterWidth + "px";
	        }
	        else if (cell.filterWidth > 0) {
	            div.removeChild(filterHandle);
	            cell.filterWidth = 0;
	        }
	        // sort handle
	        var sortHandle = cell.sort;
	        if (sortHandleVisible) {
	            var css_3;
	            if (!sortHandle) {
	                sortHandle = document.createElement("span");
	                cell.sort = sortHandle;
	                css_3 = sortHandle.style;
	                css_3.position = "absolute";
	                css_3.display = "inline-block";
	            }
	            else {
	                css_3 = sortHandle.style;
	            }
	            if (cell.sortWidth <= 0) {
	                div.appendChild(sortHandle);
	                cell.sortWidth = wSort;
	            }
	            switch (sortDir) {
	                case Types.SortDirection.DESCENDING:
	                    sortHandle.className = "rg-header-sort-descending";
	                    break;
	                case Types.SortDirection.ASCENDING:
	                    sortHandle.className = "rg-header-sort-ascending";
	                    break;
	                default:
	                    sortHandle.className = "rg-header-sort-none";
	                    break;
	            }
	            wRight += wSort;
	            css_3.left = (wCell - wRight) + "px";
	            css_3.top = "0px"; //Math.floor((hCell - header.sortHeight) / 2) + "px";
	            css_3.width = wSort + "px";
	            css_3.height = "100%"; //header.sortHeight + "px";
	            if (sortingOptions.showSortOrder && column.sortOrder >= 0) {
	                css_3.backgroundPositionY = "9px";
	                sortHandle.textContent = (column.sortOrder + 1).toString();
	            }
	            else {
	                css_3.backgroundPositionY = "center";
	                sortHandle.textContent = "";
	            }
	        }
	        else if (cell.sortWidth > 0) {
	            div.removeChild(sortHandle);
	            cell.sortWidth = 0;
	        }
	        // popup hanlde
	        var popupHandle = cell.popup;
	        if (wPopup > 0) {
	            var css_4;
	            if (!popupHandle) {
	                popupHandle = document.createElement("span");
	                cell.popup = popupHandle;
	                css_4 = popupHandle.style;
	                css_4.position = "absolute";
	                css_4.display = "inline-block";
	            }
	            else {
	                css_4 = popupHandle.style;
	            }
	            if (cell.popupWidth <= 0) {
	                div.appendChild(popupHandle);
	                cell.popupWidth = wPopup;
	            }
	            popupHandle.className = "rg-header-popup";
	            wRight += wPopup;
	            css_4.left = (wCell - wRight) + "px";
	            css_4.top = Math.floor((hCell - header.popupHeight) / 2) + "px";
	            css_4.width = wPopup + "px";
	            css_4.height = header.popupWidth + "px";
	        }
	        else if (cell.popupWidth > 0) {
	            div.removeChild(popupHandle);
	            cell.popupWidth = 0;
	        }
	        // div
	        var css = div.style;
	        // TODO columnHeader마다 다른 특성을 적용시킬곳이 필요.
	        cell.showTooltip = model.showTooltip;
	        cell.tooltip = model.tooltip;
	        cell.setDivMarigns(css, wLeft, wRight, wTop, wBottom);
	        // cell.setDivMarigns(span.style, wLeft, wRight, wTop, wBottom);
	        var t = model.template;
	        if (t) {
	            cell.setHtml(span, t);
	        }
	        else {
	            {
	                cell.setText(span, model.text || "");
	            }
	        }
	    };
	    HeaderElement.prototype.$_canPopupHandleVisible = function (column) {
	        return !!column.header.popupMenuName;
	    };
	    HeaderElement.prototype.$_canFilterHandleVisible = function (options, column) {
	        var visible = /*this.isShowHandles() &&*/ column.hasFilters;
	        if (visible) {
	            switch (options.handleVisibility) {
	                case Types.HandleVisibility.HIDDEN:
	                    visible = false;
	                    break;
	                // case HandleVisibility.HOVERED:
	                // 	visible = this.hovered || grid.isFilterSelecting(column);
	                // 	break;
	            }
	        }
	        return visible;
	    };
	    HeaderElement.prototype.$_canSortHandleVisible = function (options, column) {
	        switch (options.handleVisibility) {
	            case Types.HandleVisibility.VISIBLE:
	                return column.sortOrder >= 0;
	            case Types.HandleVisibility.HOVERED:
	                return this.hovered && column.sortOrder >= 0;
	            //     visible = this.hovered && column.sortOrder >= 0;
	            case Types.HandleVisibility.ALWAYS:
	                return true;
	            case Types.HandleVisibility.HIDDEN:
	                return false;
	        }
	        return column.sortOrder >= 0;
	    };
	    HeaderElement.prototype.$_canCheckHandleVisible = function (options, column) {
	        // var visible = this.isShowHandles() && column;
	        // if (visible) {
	        // 	switch (options.handleVisibility()) {
	        // 		case HandleVisibility.VISIBLE:
	        // 			visible = column.sortOrder() >= 0;
	        // 			break;
	        // 		case HandleVisibility.HOVERED:
	        // 			visible = this.isHovered();
	        // 			break;
	        // 		case HandleVisibility.HIDDEN:
	        // 			visible = false;
	        // 			break;
	        // 	}
	        // }
	        // return visible;
	        return false;
	    };
	    HeaderElement.prototype.$_checkHeight = function () {
	        return this["_table"].offsetHeight != this._rowPoints[this._rowPoints.length - 1];
	    };
	    HeaderElement.prototype.$_getHeights = function (heights) {
	        var rows = this["_tbody"].rows;
	        if (heights.length == 0) {
	            for (var i = 0, cnt = this._rowPoints.length - 1; i < cnt; i++) {
	                heights[i] = 0;
	            }
	        }
	        for (var i = 0; i < heights.length; i++) {
	            heights[i] = Math.max(heights[i], rows[i].offsetHeight);
	        }
	    };
	    HeaderElement.prototype.$_adjustHeights = function (heights) {
	        var rows = this["_tbody"].rows;
	        var pts = this._rowPoints;
	        pts[0] = 0;
	        for (var i = 0, cnt = pts.length - 1; i < cnt; i++) {
	            //const h = pts[i + 1] - pts[i];
	            //if (h != heights[i]) {
	            rows[i].style.height = heights[i] + "px";
	            //}
	            pts[i + 1] = pts[i] + heights[i];
	        }
	        return pts[pts.length - 1];
	    };
	    // h가 heights합보다 크면 나머지를 배분한다.
	    HeaderElement.prototype.$_distributeHeights = function (h, heights) {
	        var cnt = heights.length;
	        var sum = 0;
	        for (var i = 0; i < cnt; i++) {
	            sum += heights[i];
	        }
	        if (h > sum) {
	            var rows = this["_tbody"].rows;
	            var dh = h - sum;
	            var d = dh;
	            var i = 0;
	            for (; i < cnt - 1; i++) {
	                var dh2 = Math.floor(dh * heights[i] / sum);
	                heights[i] += dh2;
	                rows[i].style.height = heights[i] + "px";
	                d -= dh2;
	            }
	            heights[i] += d;
	            rows[i].style.height = heights[i] + "px";
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    HeaderElement.RENDERER_STYLE = "rg-header-renderer";
	    return HeaderElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.HeaderElement = HeaderElement;
	var FixedHeaderElement = /** @class */ (function (_super) {
	    __extends(FixedHeaderElement, _super);
	    function FixedHeaderElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedHeaderElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    FixedHeaderElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    FixedHeaderElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    FixedHeaderElement.prototype._getEndCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedHeaderElement.prototype._getCellCount = function (lm) {
	        return lm.fixedCellCount;
	    };
	    FixedHeaderElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getFixedCellWidth(col);
	    };
	    return FixedHeaderElement;
	}(HeaderElement));
	exports.FixedHeaderElement = FixedHeaderElement;
	var RightHeaderElement = /** @class */ (function (_super) {
	    __extends(RightHeaderElement, _super);
	    function RightHeaderElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightHeaderElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    RightHeaderElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    RightHeaderElement.prototype._getStartCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightHeaderElement.prototype._getEndCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightHeaderElement.prototype._getCellCount = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightHeaderElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getRightCellWidth(col);
	    };
	    return RightHeaderElement;
	}(HeaderElement));
	exports.RightHeaderElement = RightHeaderElement;
	});

	unwrapExports(HeaderElement_1);
	var HeaderElement_2 = HeaderElement_1.HeaderTableCell;
	var HeaderElement_3 = HeaderElement_1.HeaderElement;
	var HeaderElement_4 = HeaderElement_1.FixedHeaderElement;
	var HeaderElement_5 = HeaderElement_1.RightHeaderElement;

	var SectionObjectElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SectionObjectElement.ts
	// 2020. 02. 19. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var SectionObjectElement = /** @class */ (function (_super) {
	    __extends(SectionObjectElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SectionObjectElement(model, name) {
	        return _super.call(this, model, name) || this;
	    }
	    SectionObjectElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SectionObjectElement.prototype.getCellIndex = function (cell) {
	        return cell.parentElement["$_row"];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SectionObjectElement.prototype._isFixedHeight = function () {
	        return true;
	    };
	    SectionObjectElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    SectionObjectElement.prototype._doUpdateCellContent = function (grid, model, dom) {
	        dom.textContent = model.text;
	    };
	    SectionObjectElement.prototype._doRender = function (target) {
	    };
	    SectionObjectElement.prototype._getCellCount = function (lm) {
	        return 1;
	    };
	    SectionObjectElement.prototype._getCellWidth = function (lm, col) {
	        return this.width;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SectionObjectElement.prototype._layoutFixedBar = function (options, index) {
	        var trow = this["_tbody"].children[index];
	        trow["$_idx"] = index;
	        trow["$_row"] = -99;
	        Utils_1.Utils.setClassName(trow, options.rowBarStyle);
	        var td = trow.children[0];
	        td["$_foc"] = false;
	        Utils_1.Utils.setClassName(td, options.rowBarCellStyle);
	    };
	    return SectionObjectElement;
	}(TableBaseElement_1.DataTableElement));
	exports.SectionObjectElement = SectionObjectElement;
	});

	unwrapExports(SectionObjectElement_1);
	var SectionObjectElement_2 = SectionObjectElement_1.SectionObjectElement;

	var RowIndicatorElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RowIndicatorElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var RowIndicatorElement = /** @class */ (function (_super) {
	    __extends(RowIndicatorElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowIndicatorElement(model) {
	        var _this = _super.call(this, model, "rowIndicatorView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._count = 0;
	        return _this;
	    }
	    RowIndicatorElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowIndicatorElement.prototype.refresh = function (grid) {
	        for (var i = 0; i < this._count; i++) {
	            var td = this._getTableCell(i, 0);
	            td["$_foc"] = grid.isFocusedRow(td.parentElement["$_row"]);
	            Utils_1.Utils.setClassName(td, this.$_getCellSelector(td));
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowIndicatorElement.prototype._getCssSelector = function () {
	        return "rg-rowindicator";
	    };
	    // 점검 후 삭제!
	    RowIndicatorElement.prototype._doPrepareTableRows = function (lm, body) {
	        _super.prototype._doPrepareTableRows.call(this, lm, body);
	    };
	    RowIndicatorElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var indicator = this.model;
	        function calcWidth() {
	            // TODO itemCount의 번호가 모두 보일정도로 width조정 필요.
	            return indicator.width;
	        }
	        var width = calcWidth();
	        width = Math.max(indicator.minWidth > 0 ? indicator.minWidth : width, Math.min(indicator.maxWidth > 0 ? indicator.maxWidth : width));
	        return new Size_1.Size(width, hintHeight);
	    };
	    RowIndicatorElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var indicator = this.model;
	        var topIndex = lm.topIndex;
	        var itemCount = lm.itemCount;
	        var fixedCount = lm.fixedItemCount;
	        var count = this._count = fixedCount + itemCount;
	        var focused = grid.focusedRow;
	        for (var i = 0; i < count; i++) {
	            var row = (i < fixedCount) ? i : i + topIndex;
	            var index = CellIndex_1.CellIndex.temp(grid, row);
	            var cell = indicator.getCell(index);
	            var trow = this._getTableRow(lm, i);
	            var td = trow.children[0];
	            // fixed-row-bar 였을 수 있다.
	            if (trow["$_row"] < 0) {
	                trow.className = "";
	            }
	            trow["$_row"] = row;
	            td["$_foc"] = row == focused;
	            Utils_1.Utils.setClassName(td, this.$_getCellSelector(td));
	            this._updateCellContent(grid, cell, td);
	        }
	        if (fixedCount > 0) {
	            this._layoutFixedBar(grid.fixedOptions, fixedCount);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowIndicatorElement.prototype.$_getCellSelector = function (td) {
	        var focused = td["$_foc"];
	        if (focused) {
	            var item = this.grid.getItem(td.parentElement["$_row"]);
	            var state = item.itemState;
	            if (GridItem_1.ItemState_isInserting(state)) {
	                return "rg-rowindicator-cell rg-rowindicator-focus rg-rowindicator-inserting";
	            }
	            else if (state == GridItem_1.ItemState.UPDATING) {
	                return "rg-rowindicator-cell rg-rowindicator-focus rg-rowindicator-editing";
	            }
	            else {
	                return "rg-rowindicator-cell rg-rowindicator-focus";
	            }
	        }
	        else {
	            return "rg-rowindicator-cell";
	        }
	    };
	    return RowIndicatorElement;
	}(SectionObjectElement_1.SectionObjectElement));
	exports.RowIndicatorElement = RowIndicatorElement;
	});

	unwrapExports(RowIndicatorElement_1);
	var RowIndicatorElement_2 = RowIndicatorElement_1.RowIndicatorElement;

	var CellElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CellElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	/**
	 * TableBasedElement의 각 셀을 대표하는 view.
	 * 별도의 dom을 생성하지 않고, table view 생성시 cellDom으로 넘겨 받는다.
	 * 추가되는 자식 view들은 cellDom의 자식들이어야 한다.
	 */
	var CellElement = /** @class */ (function (_super) {
	    __extends(CellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellElement(name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this._fixed = false;
	        _this._index = new CellIndex_1.CellIndex();
	        return _this;
	    }
	    CellElement.prototype._doDispose = function () {
	        this._grid = null;
	        this._index && this._index.dispose();
	        this._index = null;
	        this._cellDom && this._cellDom.parentElement.removeChild(this._cellDom);
	        this._cellDom = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellElement.prototype, "fixed", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** fixed */
	        get: function () {
	            return this._fixed;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellElement.prototype, "index", {
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        set: function (value) {
	            if (!CellIndex_1.CellIndex.areEquals(this._index, value)) {
	                this._index.assignFrom(value);
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellElement.prototype, "item", {
	        /** item */
	        get: function () {
	            return this._index.item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellElement.prototype.updateCell = function (grid, model, dom) {
	        if (dom != this._cellDom) {
	            dom && this._clearCellDom(dom);
	            this._clearCellCache();
	            this._cellDom = dom;
	        }
	        this._grid = grid;
	        this.index = model.index;
	        this._doPrepareValue(grid, model);
	        this._doUpdateContent(grid, model, this._cellDom);
	    };
	    CellElement.prototype.removeCellDom = function (clear) {
	        if (clear === void 0) { clear = false; }
	        clear && this._cellDom && this._clearCellDom(this._cellDom);
	        this._cellDom = null;
	        this._clearCellCache();
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CellElement.prototype._createDom = function () {
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CellElement.prototype._clearCellDom = function (cellDom) {
	        cellDom.innerHTML = '';
	    };
	    CellElement.prototype._clearCellCache = function () {
	    };
	    Object.defineProperty(CellElement.prototype, "valueColumn", {
	        get: function () {
	            return this._index.valueColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellElement.prototype, "dataColumn", {
	        get: function () {
	            return this._index.dataColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellElement.prototype._changed = function () {
	        this.invalidate();
	    };
	    CellElement.prototype._doPrepareValue = function (grid, model) {
	    };
	    CellElement.prototype._doUpdateContent = function (grid, model, dom) {
	    };
	    CellElement.prototype._doLayoutContent = function (lm) {
	    };
	    return CellElement;
	}(GridElement_1.GridElement));
	exports.CellElement = CellElement;
	var ValueCellElement = /** @class */ (function (_super) {
	    __extends(ValueCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    // private _focused = false;
	    // private _numberFormatter: DecimalFormatter;
	    // private _datetimeWriter: DateTimeWriter;
	    // private _boolFormatter: BooleanFormatter;
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ValueCellElement(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name) || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    // /** focused */
	    // get focused(): boolean {
	    //     return this._focused;
	    // }
	    // set focused(value: boolean) {
	    //     if (value != this._focused) {
	    //         this._focused = value;
	    //         this._focusedChanged();
	    //     }
	    // }
	    // /** numberFormatter */
	    // get numberFormatter(): DecimalFormatter {
	    //     return this._numberFormatter;
	    // }
	    // set numberFormatter(value: DecimalFormatter) {
	    //     this._numberFormatter = value;
	    // }
	    // /** datetimeWriter */
	    // get datetimeWriter(): DateTimeWriter {
	    //     return this._datetimeWriter;
	    // }
	    // set datetimeWriter(value: DateTimeWriter) {
	    //     this._datetimeWriter = value;
	    // }
	    // /** boolFormatter */
	    // get boolFormatter(): BooleanFormatter {
	    //     return this._boolFormatter;
	    // }
	    // set boolFormatter(value: BooleanFormatter) {
	    //     this._boolFormatter = value;
	    // }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ValueCellElement.prototype._doPrepareValue = function (grid, model) {
	        // const options = grid.formatOptions;
	        // const col = this.valueColumn;
	        // // TODO: 기존에는 styles에서 가져온다. 동적으로 지정할 수 있도록 해야 한다.
	        // this._numberFormatter = options.getNumberFormatter(col.numberFormatter);
	        // this._datetimeWriter = options.getDateWriter(col.datetimeWriter);
	        // this._boolFormatter = options.getBoolFormatter(col.boolFormatter);
	    };
	    return ValueCellElement;
	}(CellElement));
	exports.ValueCellElement = ValueCellElement;
	});

	unwrapExports(CellElement_1);
	var CellElement_2 = CellElement_1.CellElement;
	var CellElement_3 = CellElement_1.ValueCellElement;

	var SeriesRenderers = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SeriesRenderers.ts
	// 2019. 11. 06. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var SeriesTextCellRenderer = /** @class */ (function (_super) {
	    __extends(SeriesTextCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SeriesTextCellRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._valueSeparator = ",";
	        return _this;
	    }
	    Object.defineProperty(SeriesTextCellRenderer.prototype, "valueSeparator", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** valueSeparator */
	        get: function () {
	            return this._valueSeparator;
	        },
	        set: function (value) {
	            if (value != this._valueSeparator) {
	                this._valueSeparator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SeriesTextCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SeriesTextCellRenderer.SERIES_TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SeriesTextCellRenderer.prototype._makeText = function (grid, model) {
	        var s = model.getDisplayText(grid, this._valueSeparator);
	        return s || "";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SeriesTextCellRenderer.SERIES_TYPE = "series";
	    return SeriesTextCellRenderer;
	}(CellRenderers.TextCellRenderer));
	exports.SeriesTextCellRenderer = SeriesTextCellRenderer;
	var SeriesCellRenderer = /** @class */ (function (_super) {
	    __extends(SeriesCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SeriesCellRenderer() {
	        return _super.call(this) || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SeriesCellRenderer.prototype._getValues = function (cell) {
	        return cell.value || [];
	    };
	    return SeriesCellRenderer;
	}(CellRenderers.DataCellRenderer));
	var SparkChartRenderer = /** @class */ (function (_super) {
	    __extends(SparkChartRenderer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SparkChartRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._baseValue = NaN;
	        _this.$_render = function (renderer, width, height) {
	            var values = this._values;
	            if (values && values.length) {
	                var cnt = values.length;
	                var min = values[0];
	                var max = values[0];
	                var i = 1;
	                while (isNaN(min) && i < cnt) {
	                    max = min = values[i++];
	                }
	                for (; i < cnt; i++) {
	                    var v = values[i];
	                    if (!isNaN(v)) {
	                        if (v < min)
	                            min = v;
	                        if (v > max)
	                            max = v;
	                    }
	                }
	                var base = isNaN(this._baseValue) ? min : this._baseValue;
	                if (!isNaN(min)) {
	                    this._renderChart(renderer, values, min, max, base);
	                }
	            }
	        }.bind(_this);
	        return _this;
	    }
	    Object.defineProperty(SparkChartRenderer.prototype, "baseValue", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** baseValue */
	        get: function () {
	            return this._baseValue;
	        },
	        set: function (value) {
	            if (value != this._baseValue) {
	                this._baseValue = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "firstStyle", {
	        /** firstStyle */
	        get: function () {
	            return this._firstStyle;
	        },
	        set: function (value) {
	            if (value != this._firstStyle) {
	                this._firstStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "lastStyle", {
	        /** lastStyle */
	        get: function () {
	            return this._lastStyle;
	        },
	        set: function (value) {
	            if (value != this._lastStyle) {
	                this._lastStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "highStyle", {
	        /** highStyle */
	        get: function () {
	            return this._highStyle;
	        },
	        set: function (value) {
	            if (value != this._highStyle) {
	                this._highStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "lowStyle", {
	        /** lowStyle */
	        get: function () {
	            return this._lowStyle;
	        },
	        set: function (value) {
	            if (value != this._lowStyle) {
	                this._lowStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "belowStyle", {
	        /** belowStyle */
	        get: function () {
	            return this._belowStyle;
	        },
	        set: function (value) {
	            if (value != this._belowStyle) {
	                this._belowStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkChartRenderer.prototype, "pointStyle", {
	        /** pointStyle */
	        get: function () {
	            return this._pointStyle;
	        },
	        set: function (value) {
	            if (value != this._pointStyle) {
	                this._pointStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SparkChartRenderer.prototype._doInitContent = function (dom) {
	        var div = this._div = document.createElement("div");
	        div.style.position = "relative";
	        div.style.height = "100%";
	        dom.appendChild(div);
	        var svg = this._svg = Svg.SvgElement.createSVG(div);
	        var css = svg.style;
	        css.position = "absolute";
	        css.left = "0px";
	        css.top = "0px";
	        css.width = "100%";
	        css.height = "100%";
	    };
	    SparkChartRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var div = this._div;
	        var svg = this._svg;
	        svg.setAttribute("class", this._getChartStyle());
	        this._values = this._getValues(model);
	        Svg.SvgElement.renderSVG2(svg, this.$_render);
	    };
	    SparkChartRenderer.prototype._getPoints = function (values, minimum, maximum) {
	        var cnt = values.length;
	        var pts = [];
	        var sx = 5; // 마지막 점들 등이 표시되도록 padding을 둔다. TODO: 상대값으로 개선 필요!
	        var w = 90;
	        var sy = 10;
	        var h = 80;
	        var len = maximum - minimum;
	        for (var i = 0; i < cnt; i++) {
	            var v = values[i];
	            var x = sx + i / (cnt - 1) * w;
	            var y = sy + ((isNaN(v) || len == 0) ? h : (1 - (v - minimum) / len) * h);
	            pts.push(x, y);
	        }
	        return pts;
	    };
	    SparkChartRenderer.prototype._getBasePoint = function (minimum, maximum, base) {
	        var h = 100;
	        var sy = 0;
	        var len = maximum - minimum;
	        var y = sy + ((isNaN(base) || len == 0) ? h : (1 - (base - minimum) / len) * h);
	        return y;
	    };
	    return SparkChartRenderer;
	}(SeriesCellRenderer));
	var SparkLineRenderer = /** @class */ (function (_super) {
	    __extends(SparkLineRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SparkLineRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._chartStyle = SparkLineRenderer.CHART_STYLE;
	        _this._curved = false;
	        _this.lastStyle = "rg-sparkline-renderer-last";
	        _this.highStyle = "rg-sparkline-renderer-high";
	        _this.lowStyle = "rg-sparkline-renderer-low";
	        return _this;
	    }
	    Object.defineProperty(SparkLineRenderer.prototype, "chartStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** chartStyle */
	        get: function () {
	            return this._chartStyle;
	        },
	        set: function (value) {
	            if (value != this._chartStyle) {
	                this._chartStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkLineRenderer.prototype, "curved", {
	        /** curved */
	        get: function () {
	            return this._curved;
	        },
	        set: function (value) {
	            if (value != this._curved) {
	                this._curved = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkLineRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SparkLineRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkLineRenderer.prototype, "styleName", {
	        get: function () {
	            return SparkLineRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SparkLineRenderer.prototype._getChartStyle = function () {
	        return this._chartStyle;
	    };
	    SparkLineRenderer.prototype._renderChart = function (g, values, minimum, maximum, base) {
	        var max = isNaN(base) ? maximum : Math.max(maximum, base);
	        var min = isNaN(base) ? minimum : Math.min(minimum, base);
	        var pts = this._getPoints(values, min, max);
	        var cnt = values.length;
	        var style;
	        for (var i = 0; i < cnt - 1; i++) {
	            g.sline(null, pts[i * 2] + "%", pts[i * 2 + 1] + "%", pts[(i + 1) * 2] + "%", pts[(i + 1) * 2 + 1] + "%");
	            if (style = this.pointStyle) {
	                var x = pts[i * 2];
	                var y = pts[i * 2 + 1];
	                g.scircle(style, x + "%", y + "%", 2 + "");
	            }
	        }
	        if (style = this.firstStyle) {
	            var x = pts[0];
	            var y = pts[1];
	            g.scircle(style, x + "%", y + "%", 2 + "");
	        }
	        if (style = this.lastStyle) {
	            var x = pts[(cnt - 1) * 2];
	            var y = pts[(cnt - 1) * 2 + 1];
	            g.scircle(style, x + "%", y + "%", 2 + "");
	        }
	        if (style = this.highStyle) {
	            for (var i = 0; i < cnt; i++) {
	                if (values[i] >= maximum) {
	                    var x = pts[i * 2];
	                    var y = pts[i * 2 + 1];
	                    g.scircle(style, x + "%", y + "%", 2 + "");
	                }
	            }
	        }
	        if (style = this.lowStyle) {
	            for (var i = 0; i < cnt; i++) {
	                if (values[i] <= minimum) {
	                    var x = pts[i * 2];
	                    var y = pts[i * 2 + 1];
	                    g.scircle(style, x + "%", y + "%", 2 + "");
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SparkLineRenderer.TYPE = "sparkline";
	    SparkLineRenderer.STYLE = "rg-sparkline-renderer";
	    SparkLineRenderer.STYLE_NAME = "rg-renderer " + SparkLineRenderer.STYLE;
	    SparkLineRenderer.CHART_STYLE = "rg-sparkline-renderer-chart";
	    return SparkLineRenderer;
	}(SparkChartRenderer));
	exports.SparkLineRenderer = SparkLineRenderer;
	var SparkColumnRenderer = /** @class */ (function (_super) {
	    __extends(SparkColumnRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SparkColumnRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._chartStyle = SparkColumnRenderer.CHART_STYLE;
	        _this._barWidth = 0.8;
	        _this.lastStyle = "rg-sparkcolumn-renderer-last";
	        _this.highStyle = "rg-sparkcolumn-renderer-high";
	        _this.lowStyle = "rg-sparkcolumn-renderer-low";
	        return _this;
	    }
	    Object.defineProperty(SparkColumnRenderer.prototype, "chartStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** chartStyle */
	        get: function () {
	            return this._chartStyle;
	        },
	        set: function (value) {
	            if (value != this._chartStyle) {
	                this._chartStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkColumnRenderer.prototype, "barWidth", {
	        /** barWidth */
	        get: function () {
	            return this._barWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._barWidth) {
	                this._barWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkColumnRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SparkColumnRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkColumnRenderer.prototype, "styleName", {
	        get: function () {
	            return SparkColumnRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SparkColumnRenderer.prototype._getChartStyle = function () {
	        return this._chartStyle;
	    };
	    SparkColumnRenderer.prototype._renderChart = function (g, values, minimum, maximum, base) {
	        var max = isNaN(base) ? maximum : Math.max(maximum, base);
	        var min = isNaN(base) ? minimum : base;
	        var cnt = values.length;
	        var p = this._getBasePoint(min, max, base);
	        var w = 100 / cnt;
	        var h = 100;
	        var x = 0 + w / 2;
	        var len = max - min;
	        var cw = w * this._barWidth;
	        var style;
	        for (var i = 0; i < cnt; i++) {
	            var v = values[i];
	            if (!isNaN(v)) {
	                if (v <= minimum && this.lowStyle) {
	                    style = this.lowStyle;
	                }
	                else if (v >= maximum && this.highStyle) {
	                    style = this.highStyle;
	                }
	                else if (v < base && this.belowStyle) {
	                    style = this.belowStyle;
	                }
	                else if (i == 0 && this.firstStyle) {
	                    style = this.firstStyle;
	                }
	                else if (i == (cnt - 1) && this.lastStyle) {
	                    style = this.lastStyle;
	                }
	                else {
	                    style = null;
	                }
	                var y = len == 0 ? 1 : Math.max(1, Math.floor((v - min) * h / len));
	                g.pbounds(style, x - cw / 2, p, cw, -y);
	            }
	            x += w;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SparkColumnRenderer.TYPE = "sparkcolumn";
	    SparkColumnRenderer.STYLE = "rg-sparkcolumn-renderer";
	    SparkColumnRenderer.STYLE_NAME = "rg-renderer " + SparkColumnRenderer.STYLE;
	    SparkColumnRenderer.CHART_STYLE = "rg-sparkcolumn-renderer-chart";
	    return SparkColumnRenderer;
	}(SparkChartRenderer));
	exports.SparkColumnRenderer = SparkColumnRenderer;
	var SparkWinLossRenderer = /** @class */ (function (_super) {
	    __extends(SparkWinLossRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SparkWinLossRenderer() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._chartStyle = SparkWinLossRenderer.CHART_STYLE;
	        _this._barWidth = 0.8;
	        _this._belowHeight = 0.4;
	        _this.belowStyle = "rg-sparkwinloss-renderer-below";
	        return _this;
	    }
	    Object.defineProperty(SparkWinLossRenderer.prototype, "chartStyle", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** chartStyle */
	        get: function () {
	            return this._chartStyle;
	        },
	        set: function (value) {
	            if (value != this._chartStyle) {
	                this._chartStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkWinLossRenderer.prototype, "barWidth", {
	        /** barWidth */
	        get: function () {
	            return this._barWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._barWidth) {
	                this._barWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkWinLossRenderer.prototype, "belowHeight", {
	        /** belowHeight */
	        get: function () {
	            return this._belowHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._belowHeight) {
	                this._belowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkWinLossRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return SparkWinLossRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SparkWinLossRenderer.prototype, "styleName", {
	        get: function () {
	            return SparkWinLossRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SparkWinLossRenderer.prototype._getChartStyle = function () {
	        return this._chartStyle;
	    };
	    SparkWinLossRenderer.prototype._renderChart = function (g, values, minimum, maximum, base) {
	        var cnt = values.length;
	        var w = 100 / cnt;
	        var h = 100;
	        var x = 0 + w / 2;
	        var sy = 0;
	        var cw = w * this._barWidth;
	        var p = sy + h * (1 - this._belowHeight);
	        for (var i = 0; i < cnt; i++) {
	            var v = values[i];
	            if (!isNaN(v) && v != base) {
	                var f = null;
	                if (v < base && this.belowStyle) {
	                    f = this.belowStyle;
	                }
	                var y = (v < base) ? (sy + h) : sy;
	                g.pbounds(f, Math.floor(x - cw / 2), Math.floor(y), Math.floor(cw), Math.floor(p - y));
	            }
	            x += w;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SparkWinLossRenderer.TYPE = "sparkwinloss";
	    SparkWinLossRenderer.STYLE = "rg-sparkwinloss-renderer";
	    SparkWinLossRenderer.STYLE_NAME = "rg-renderer " + SparkWinLossRenderer.STYLE;
	    SparkWinLossRenderer.CHART_STYLE = "rg-sparkwinloss-renderer-chart";
	    return SparkWinLossRenderer;
	}(SparkChartRenderer));
	exports.SparkWinLossRenderer = SparkWinLossRenderer;
	});

	unwrapExports(SeriesRenderers);
	var SeriesRenderers_1 = SeriesRenderers.SeriesTextCellRenderer;
	var SeriesRenderers_2 = SeriesRenderers.SparkLineRenderer;
	var SeriesRenderers_3 = SeriesRenderers.SparkColumnRenderer;
	var SeriesRenderers_4 = SeriesRenderers.SparkWinLossRenderer;

	var ItemElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ItemElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var GridColumn_2 = GridColumn_1;


	var DataCellElement = /** @class */ (function (_super) {
	    __extends(DataCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DataCellElement(name) {
	        return _super.call(this, name || "dataCellView") || this;
	    }
	    Object.defineProperty(DataCellElement.prototype, "expanderVisible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanderVisible */
	        get: function () {
	            return false;
	        },
	        set: function (value) {
	            if (value != this.expanderVisible) ;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataCellElement.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DataCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        dom.textContent = this._text;
	    };
	    return DataCellElement;
	}(CellElement_1.ValueCellElement));
	exports.DataCellElement = DataCellElement;
	/**
	 * dom을 생성하지 않고, table row로 대체한다.
	 */
	var ItemElement = /** @class */ (function (_super) {
	    __extends(ItemElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ItemElement(name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this._domIndex = -1; // table tr 위치값.
	        return _this;
	    }
	    ItemElement.prototype._doDispose = function () {
	        this._item = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ItemElement.prototype, "itemIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** itemIndex */
	        get: function () {
	            return this._item.index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ItemElement.prototype.updateItem = function (item, domIndex) {
	        this._item = item;
	        this._domIndex = domIndex;
	    };
	    ItemElement.prototype.clearContent = function (lm, trs) {
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ItemElement.prototype._createDom = function () {
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ItemElement.prototype._changed = function () {
	        this.invalidate();
	    };
	    ItemElement.prototype._getTableRow = function (lm, row) {
	        return this.parent["_getTableRow"](lm, this._domIndex);
	    };
	    ItemElement.prototype._getCellContent = function (col) {
	        return this.parent["getCellContent"](this._domIndex, col);
	    };
	    return ItemElement;
	}(GridElement_1.GridElement));
	exports.ItemElement = ItemElement;
	var GROUP_EXPANDER_EXPANDED = "rg-expander-expanded";
	var GROUP_EXPANDER_COLLAPSED = "rg-expander-collapsed";
	var RowElement = /** @class */ (function (_super) {
	    __extends(RowElement, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    // private _cells: {[key: number] : DataCellElement} = {};
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowElement(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name) || this;
	    }
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    RowElement.isExpander = function (elt) {
	        var cls = elt.className;
	        return cls == GROUP_EXPANDER_EXPANDED || cls == GROUP_EXPANDER_COLLAPSED;
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowElement.prototype.clearContent = function (lm, trs) {
	        var bodyView = this.parent;
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm) - f;
	        var c2 = this._getEndCell(lm) - f;
	        for (var r = 0; r < trs; r++) {
	            var bodyCells = bodyView["_cells"][this._domIndex + r];
	            if (!bodyCells)
	                debugger;
	            for (var i = c1; i <= c2; i++) {
	                var cell = bodyCells[i];
	                var renderer = cell.renderer2;
	                if (renderer) {
	                    renderer.clearContent();
	                }
	            }
	        }
	    };
	    RowElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var writable = grid.editOptions.isWritable();
	        var layouts = lm.cellLayouts;
	        var trs = layouts.dataRows;
	        var body = grid.body;
	        var bodyView = this.parent;
	        var bodyCells = bodyView["_cells"];
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm) - f;
	        var c2 = this._getEndCell(lm) - f;
	        var idx = grid.focusedIndex;
	        var focused = idx && idx.itemIndex == this._item.index;
	        var focusedCol = idx.column;
	        var itemIndex = this._item.index;
	        if (this._item instanceof GroupedItemProvider_1.MergedGroupFooter) {
	            // 나머지는 group footer에서 그린다.
	            c2 = Math.min(c2, grid.rowGroupLevels - 1);
	            itemIndex = this._item.parent.index;
	        }
	        var index = CellIndex_1.CellIndex.temp(grid, itemIndex);
	        for (var r = 0; r < trs; r++) {
	            var cells = bodyCells[this._domIndex + r];
	            for (var i = c1; i <= c2; i++) {
	                var cell = cells[i];
	                var layout = cell.layout;
	                if (cell.visible) {
	                    var column = layout.firstColumn;
	                    cell.width = lm.getCellWidth(i);
	                    cell.height = lm.getTableRowHeight(cell.trow);
	                    if (column instanceof GridColumn_2.ValueColumn) {
	                        index.layout = column.layout;
	                        var model = body.getCell(index, false);
	                        cell.mouseEntered = false; // 이렇게 해야 scroll 중 현재 셀에 버튼이 표시되지 않는다.
	                        cell.focused = focused && focusedCol === column;
	                        this._updateDataCell(grid, lm, body, model, column, cell);
	                    }
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowElement.prototype._getFirstCell = function (lm) {
	        return lm["_firstCell"];
	    };
	    RowElement.prototype._getLastCell = function (lm) {
	        return lm["_lastCell"];
	    };
	    RowElement.prototype._getStartCell = function (lm) {
	        return lm.getStartCell();
	    };
	    RowElement.prototype._getEndCell = function (lm) {
	        if (this._item instanceof GroupedItemProvider_1.MergedGroupHeader) {
	            return lm.getStartCell() + this._item.groupLevel;
	        }
	        else {
	            return lm.getEndCell();
	        }
	    };
	    RowElement.prototype._createRenderer = function (grid, model, type, config) {
	        var renderer = grid.delegate.createRenderer(type, config);
	        return renderer;
	    };
	    RowElement.prototype._getRenderer = function (grid, model) {
	        // TODO: 여기에서 동적 렌더러를 가져온다.
	        var r = model.valueColumn.renderer;
	        return r;
	    };
	    RowElement.prototype._renderDataCell = function (grid, body, model, cell) {
	        var td = cell.cell;
	        var r = this._getRenderer(grid, model);
	        var rt;
	        var cfg;
	        if (typeof r === 'string') {
	            rt = r;
	        }
	        else {
	            rt = (r && r.type) || (cell.layout.firstColumn instanceof GridColumn_1.SeriesColumn ? SeriesRenderers.SeriesTextCellRenderer.SERIES_TYPE : CellRenderers.TextCellRenderer.TYPE);
	            cfg = r;
	        }
	        var needInit = false;
	        if (!cell.renderer2 || cell.rendererChanged || cell.renderer2.type != rt) {
	            cell.renderer2 && cell.renderer2.clearAndDispose();
	            cell.renderer2 = this._createRenderer(grid, model, rt, cfg);
	            cell.rendererChanged = false;
	            needInit = true;
	        }
	        var dom = td.firstElementChild;
	        var renderer = cell.renderer2;
	        // renderer가 이전 dom을 가지고 있을 때...
	        if (!needInit && renderer && renderer["_dom"] != dom) {
	            renderer.clearContent();
	            needInit = true;
	        }
	        var wButton = this.$_buttonWidth(grid, cell);
	        var wEdit = this.$_editButtonWidth(grid, cell);
	        var cellButton = cell.cellButton;
	        var editButton = cell.editButton;
	        /* cell button */
	        if (wButton > 0) {
	            var css = void 0;
	            if (!cellButton) {
	                cellButton = document.createElement("span");
	                cell.cellButton = cellButton;
	                css = cellButton.style;
	                css.position = "absolute";
	                css.display = "inline-block";
	                css.height = "100%";
	            }
	            else {
	                css = cellButton.style;
	            }
	            if (cell.buttonWidth <= 0) {
	                td.appendChild(cellButton);
	                cell.buttonWidth = wButton;
	            }
	            cell.resetButtonClass();
	            cell.setButtonBounds(css, cell.width - wButton, 0, wButton, cell.height);
	        }
	        else if (cell.buttonWidth > 0) {
	            td.removeChild(cellButton);
	            cell.buttonWidth = 0;
	        }
	        /* edit button */
	        if (wEdit > 0) {
	            var css = void 0;
	            if (!editButton) {
	                editButton = document.createElement("span");
	                cell.editButton = editButton;
	                css = editButton.style;
	                css.position = "absolute";
	                css.display = "inline-block";
	                css.height = "100%";
	            }
	            else {
	                css = editButton.style;
	            }
	            if (cell.editWidth <= 0) {
	                td.appendChild(editButton);
	                cell.editWidth = wEdit;
	            }
	            cell.resetEditClass();
	            cell.setEditBounds(css, cell.width - wEdit - wButton, 0, wEdit, cell.height);
	        }
	        else if (cell.editWidth > 0) {
	            td.removeChild(editButton);
	            cell.editWidth = 0;
	        }
	        /* renderer */
	        var styleName = renderer.styleName;
	        //cell.setMarginRight(dom, wButton + wEdit);
	        if (needInit) {
	            renderer.initContent(model["_index"], dom, styleName);
	            // console.log("INIT")
	        }
	        else if (renderer.checkClassName(styleName)) {
	            renderer.clearContent();
	            renderer.initContent(model["_index"], dom, styleName);
	            // console.log("CLEAR")
	        }
	        renderer.renderCell(grid, model, cell);
	        /* change marker */
	        var changed = model.changed && body["_showChangeMarker"];
	        if (changed != cell.valueChanged) {
	            if (changed) {
	                var marker = cell.changedMarker;
	                if (!marker) {
	                    marker = cell.changedMarker = document.createElement("div");
	                    marker.className = "rg-changed-marker";
	                    marker.style.position = "absolute";
	                    marker.style.display = "block";
	                    marker.style.top = "0px";
	                    cell.changedMarker = marker;
	                }
	                td.appendChild(marker);
	            }
	            else {
	                if (cell.changedMarker && cell.valueChanged) {
	                    td.removeChild(cell.changedMarker);
	                }
	            }
	            cell.valueChanged = changed;
	        }
	        /** expander */
	        if (cell.merged && cell.groupItem) {
	            var expander = cell.expander;
	            if (!expander) {
	                expander = cell.expander = document.createElement("span");
	                expander.style.position = "absolute";
	                expander.style.display = "inline-block";
	                expander.style.top = "2px";
	                expander.style.left = "2px";
	                td.appendChild(expander);
	            }
	            expander.className = cell.groupItem.expanded ? GROUP_EXPANDER_EXPANDED : GROUP_EXPANDER_COLLAPSED;
	        }
	        else if (cell.expander) {
	            td.removeChild(cell.expander);
	            cell.expander = null;
	        }
	    };
	    RowElement.prototype._updateDataCell = function (grid, lm, body, model, dcol, bcell) {
	        //const td = bcell.cell;
	        var cs = body.getCellStyle(model, bcell.style.clear());
	        bcell.setClassName(cs.styleName);
	        bcell.refreshFormatters(cs);
	        body.getCellFormatters(dcol, bcell, grid.formatOptions);
	        bcell.setEditor(cs.editor || dcol.editor);
	        bcell.button = dcol.button;
	        var w = grid["$_editOptionsWritable"];
	        if (w) {
	            // if (this._cellStyles) {
	            //     w = this._cellStyles.calcWritable(col.isEditable(), col.isReadOnly());
	            // } else {
	            w = dcol.isWritable() &&
	                (lm.fixedItemCount < 1 || grid["$_fixedRowEditable"] || bcell.item.index >= lm.fixedItemCount);
	            // }
	        }
	        w = w && bcell.renderer2 && bcell.renderer2.canEditable();
	        bcell.writable = w;
	        // TODO cellLayout.cells를 이용하는 경우 관련 처리필요.
	        if (dcol instanceof GridColumn_1.DataColumn && dcol.layout.blanked) {
	            switch (model.blankState) {
	                case Types.BlankState.HEAD:
	                    bcell.setBorderBottom(0);
	                    break;
	                case Types.BlankState.BODY:
	                    bcell.setBorderBottom(0);
	                    break;
	                case Types.BlankState.TAIL:
	                    bcell.setBorderBottom(1);
	                    break;
	                case Types.BlankState.NONE:
	                    bcell.setBorderBottom(1);
	                    break;
	            }
	        }
	        else {
	            bcell.setBorderBottom(1);
	        }
	        // td.className = body.getCellStyle(model);
	        this._renderDataCell(grid, body, model, bcell); //td.lastElementChild as HTMLElement);
	    };
	    RowElement.prototype.$_getButtonVisible = function (grid, cell, visibility) {
	        var vis = false;
	        switch (visibility) {
	            case Types.ButtonVisibility.ALWAYS:
	                vis = true;
	                break;
	            case Types.ButtonVisibility.HIDDEN:
	                vis = false;
	                break;
	            case Types.ButtonVisibility.VISIBLE:
	                vis = cell.focused;
	                break;
	            case Types.ButtonVisibility.ROWFOCUSED:
	                vis = grid.focusedIndex && grid.focusedIndex.itemIndex == cell.item.index || cell.mouseEntered;
	                break;
	            case Types.ButtonVisibility.DEFAULT:
	            default:
	                vis = cell.focused || cell.mouseEntered;
	                break;
	        }
	        return vis;
	    };
	    RowElement.prototype.$_buttonWidth = function (grid, cell) {
	        var w = 0;
	        if (cell.button != Types.CellButton.NONE) {
	            // const focused = cell.focused;
	            // index = this.index();
	            // var focusIndex = grid.focusedIndex();
	            // if (this._innerIndex > 0) {
	            // 	focusIndex = focusIndex.clone();
	            // 	focusIndex.incRow(-this._innerIndex);
	            // }
	            // var equals = CellIndex.areEquals(focusIndex, index);
	            // if (focused) {
	            // 	if (!equals)
	            // 		this._focused = false;
	            // } else if (equals) {
	            // 	this._focused = true;
	            // }
	            var column = cell.layout.firstColumn;
	            if (this.$_getButtonVisible(grid, cell, column.buttonVisiblility)) {
	                w = grid.body.cellButtonWidth;
	            }
	        }
	        return w;
	    };
	    RowElement.prototype.$_editButtonWidth = function (grid, cell) {
	        var w = 0;
	        if (cell.writable) {
	            if (cell.renderer2 && !cell.renderer2.canEditable()) ;
	            else {
	                var item = cell.item;
	                var column = cell.dataColumn;
	                var editorType = cell.editorType;
	                if (grid.delegate.hasEditorButton(editorType)) {
	                    var editorListing = false;
	                    if (CellIndex_1.CellIndex.equalsTo(grid.focusedIndex, cell.item.index, cell.layout)) {
	                        var editor = grid.delegate.getCellEditor(editorType);
	                        editorListing = editor ? editor.listing : false;
	                    }
	                    if (editorListing || this.$_getButtonVisible(grid, cell, column.editButtonVisibility)) {
	                        w = grid.body.cellButtonWidth;
	                    }
	                }
	            }
	        }
	        return w;
	    };
	    return RowElement;
	}(ItemElement));
	exports.RowElement = RowElement;
	var FixedRowElement = /** @class */ (function (_super) {
	    __extends(FixedRowElement, _super);
	    function FixedRowElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedRowElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    FixedRowElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    FixedRowElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    FixedRowElement.prototype._getEndCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    return FixedRowElement;
	}(RowElement));
	exports.FixedRowElement = FixedRowElement;
	var RightRowElement = /** @class */ (function (_super) {
	    __extends(RightRowElement, _super);
	    function RightRowElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightRowElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    RightRowElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    RightRowElement.prototype._getStartCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightRowElement.prototype._getEndCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    return RightRowElement;
	}(RowElement));
	exports.RightRowElement = RightRowElement;
	});

	unwrapExports(ItemElement_1);
	var ItemElement_2 = ItemElement_1.DataCellElement;
	var ItemElement_3 = ItemElement_1.ItemElement;
	var ItemElement_4 = ItemElement_1.RowElement;
	var ItemElement_5 = ItemElement_1.FixedRowElement;
	var ItemElement_6 = ItemElement_1.RightRowElement;

	var GridBodyElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridBodyElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });














	var ROW_SPAN = "rowspan";
	var COL_SPAN = "colspan";
	var BodyTableCell = /** @class */ (function () {
	    function BodyTableCell(td) {
	        this.cell = null;
	        this.cellButton = null;
	        this.editButton = null;
	        this.changedMarker = null;
	        this.expander = null;
	        this.item = null;
	        this.rowIndex = -1; // 화면에 표시되는 행 index.
	        this.trow = -1; // 화면에 표시되는 table row index;
	        this.tcol = -1; // 화면에 표시되는 table cell index;
	        this.head = null; // row 병합셀의 head 아이템의 table row index;
	        this.layout = null;
	        this.visible = undefined;
	        this.merged = false;
	        this.spanned = false;
	        this.width = 0;
	        this.height = 0;
	        this.rowSpan = 1; // merge를 포함한 전체 row span
	        this.colSpan = 1; // merge를 포함한 전체 col span
	        this.text = undefined;
	        this.template = undefined;
	        this.className = "";
	        this.marginRight = -1;
	        this.style = new GridColumn_1.ColumnStyle();
	        this.rendererChanged = false;
	        this.valueChanged = false;
	        this.mouseEntered = false;
	        this.focused = false;
	        this.borderBottom = 1;
	        this.writable = true;
	        this.button = Types.CellButton.NONE;
	        this.buttonWidth = 0;
	        this.buttonClass = "";
	        this.buttonRect = new Rectangle_1.Rectangle(-1, -1, -1, -1);
	        this.editWidth = 0;
	        this.editClass = "";
	        this.editRect = new Rectangle_1.Rectangle(-1, -1, -1, -1);
	        this.cell = td;
	        this.text = td.textContent;
	    }
	    BodyTableCell.prototype.dispose = function () {
	        this.renderer2 = this.renderer2 && this.renderer2.clearAndDispose();
	        this.item = null;
	        this.cell = null;
	        this.layout = null;
	    };
	    Object.defineProperty(BodyTableCell.prototype, "dataColumn", {
	        get: function () {
	            return this.layout.firstColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    BodyTableCell.prototype.reset = function (td) {
	        //if (td !== this.cell) {
	        this.cell = td;
	        this.className = "";
	        this.text = undefined;
	        this.visible = undefined;
	        //}
	        return this;
	    };
	    BodyTableCell.prototype.span = function () {
	        this.spanned = true;
	        this.clear(false);
	    };
	    BodyTableCell.prototype.clear = function (visible) {
	        if (this.colSpan > 1) {
	            this.colSpan = 1;
	            this.cell.removeAttribute(COL_SPAN);
	        }
	        if (this.rowSpan > 1) {
	            this.rowSpan = 1;
	            this.cell.removeAttribute(ROW_SPAN);
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        return this;
	    };
	    BodyTableCell.prototype.setColSpan = function (value) {
	        if (this.colSpan != value) {
	            this.colSpan = value;
	            if (value > 1) {
	                this.cell.colSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        return this;
	    };
	    BodyTableCell.prototype.setRowSpan = function (value) {
	        if (this.rowSpan != value) {
	            this.rowSpan = value;
	            if (value > 1) {
	                this.cell.rowSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        return this;
	    };
	    BodyTableCell.prototype.setVisible = function (value) {
	        if (value !== this.visible) {
	            this.visible = value;
	            this.cell.style.display = value ? "" : "none";
	        }
	        return this;
	    };
	    BodyTableCell.prototype.set = function (colSpan, rowSpan, visible) {
	        if (this.colSpan != colSpan) {
	            this.colSpan = colSpan;
	            if (colSpan > 1) {
	                this.cell.colSpan = colSpan;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        if (this.rowSpan != rowSpan) {
	            this.rowSpan = rowSpan;
	            if (rowSpan > 1) {
	                this.cell.rowSpan = rowSpan;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        return this;
	    };
	    BodyTableCell.prototype.refreshFormatters = function (cs) {
	        var s;
	        this.textFormatter = null;
	        this.numberFormatter = null;
	        this.datetimeWriter = null;
	        this.booleanFormatter = null;
	        if (s = cs.textFormat) {
	            if (!this.textFormatter || this.textFormatter.format != s) {
	                this.textFormatter = TextFormatter_1.TextFormatter.getFormatter(s);
	            }
	        }
	        if (s = cs.numberFormat) {
	            if (!this.numberFormatter || this.numberFormatter.format != s) {
	                this.numberFormatter = DecimalFormatter_1.DecimalFormatter.getFormatter(s);
	            }
	        }
	        if (s = cs.datetimeFormat) {
	            if (!this.datetimeWriter || this.datetimeWriter.format != s) {
	                this.datetimeWriter = DateTimeWriter_1.DateTimeWriter.getFormatter(s);
	            }
	        }
	        if (s = cs.booleanFormat) {
	            if (!this.booleanFormatter || this.booleanFormatter.format != s) {
	                this.booleanFormatter = BooleanFormatter_1.BooleanFormatter.getFormatter(s);
	            }
	        }
	    };
	    BodyTableCell.prototype.setClassName = function (value) {
	        if (value != this.className) {
	            this.cell.className = this.className = value;
	            return true;
	        }
	        return false;
	    };
	    BodyTableCell.prototype.setEditor = function (value) {
	        this.editor = value;
	        this.editorType = GridColumn_1.ColumnStyle.getEditorType(value);
	    };
	    BodyTableCell.prototype.setBorderBottom = function (value) {
	        if (value != this.borderBottom) {
	            this.borderBottom = value;
	            this.cell.style.borderBottom = value == 0 ? "0" : "";
	        }
	    };
	    BodyTableCell.prototype.setMarginRight = function (dom, value) {
	        if (value != this.marginRight) {
	            this.marginRight = value;
	            dom.style.marginRight = value == 0 ? "0" : (value + "px");
	        }
	    };
	    BodyTableCell.prototype.isCellButton = function (dom) {
	        return dom === this.cellButton;
	    };
	    BodyTableCell.prototype.isEditButton = function (dom) {
	        return dom === this.editButton;
	    };
	    BodyTableCell.prototype.resetButtonClass = function () {
	        var s = this.button == Types.CellButton.POPUP ? "rg-button-popup" : "rg-button-action";
	        if (s != this.buttonClass) {
	            this.buttonClass = s;
	            this.cellButton.className = s;
	        }
	    };
	    BodyTableCell.prototype.resetEditClass = function () {
	        var s = this.editorType == "date" || this.editorType == "btdate" ? "rg-button-calendar" : "rg-button-list";
	        if (s != this.editClass) {
	            this.editClass = s;
	            this.editButton.className = s;
	        }
	    };
	    BodyTableCell.prototype.setButtonBounds = function (css, x, y, w, h) {
	        var r = this.buttonRect;
	        if (r.x != x) {
	            css.left = x != 0 ? (x + "px") : "0";
	            r.x = x;
	        }
	        if (r.y != y) {
	            css.top = y != 0 ? (y + "px") : "0";
	            r.y = y;
	        }
	        if (r.width != w) {
	            css.width = w + "px";
	            r.width = w;
	        }
	        // if (r.height != h) {
	        //     css.height = h + "px";
	        //     r.height = h;
	        // }
	    };
	    BodyTableCell.prototype.setEditBounds = function (css, x, y, w, h) {
	        var r = this.editRect;
	        if (r.x != x) {
	            css.left = x != 0 ? (x + "px") : "0";
	            r.x = x;
	        }
	        if (r.y != y) {
	            css.top = y != 0 ? (y + "px") : "0";
	            r.y = y;
	        }
	        if (r.width != w) {
	            css.width = w + "px";
	            r.width = w;
	        }
	        // if (r.height != h) {
	        //     css.height = h + "px";
	        //     r.height = h;
	        // }
	    };
	    BodyTableCell.prototype.getIndex = function (index) {
	        return index.set(this.item.index, this.layout.firstColumn);
	    };
	    BodyTableCell.prototype.toString = function () {
	        return "Body Cell(" + this.layout.col + ", " + this.item.index + ", " + this.layout.row + ")";
	    };
	    return BodyTableCell;
	}());
	exports.BodyTableCell = BodyTableCell;
	var GridBodyElement = /** @class */ (function (_super) {
	    __extends(GridBodyElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBodyElement(model) {
	        var _this = _super.call(this, model, "bodyView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._mergedGrouped = false;
	        _this._itemCount = 0;
	        _this._fixedCount = 0;
	        _this._itemViews = [];
	        _this._cells = [];
	        return _this;
	    }
	    GridBodyElement.prototype._doDispose = function () {
	        for (var r = 0; r < this._cells.length; r++) {
	            var cells = this._cells[r];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c].dispose();
	                cells[c] = null;
	            }
	        }
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    // TODO: parentElement 가져오는 게 속도에 영향이 없으면 tr 인덱스를 활용할 것!
	    GridBodyElement.prototype.bodyCellByCell = function (cell) {
	        for (var r = 0; r < this._cells.length; r++) {
	            var cells = this._cells[r];
	            for (var c = 0; c < cells.length; c++) {
	                var obj = cells[c];
	                if (obj && obj.cell === cell) {
	                    return obj;
	                }
	            }
	        }
	        return null;
	    };
	    GridBodyElement.prototype.layoutByCell = function (cell) {
	        var tc = this.bodyCellByCell(cell);
	        return tc && tc.layout;
	    };
	    GridBodyElement.prototype.columnByCell = function (cell) {
	        var tc = this.bodyCellByCell(cell);
	        return tc && tc.layout && tc.layout["_columnObj"];
	    };
	    // getCellRect(td: HTMLTableCellElement): Rectangle {
	    //     return new Rectangle(td.offsetLeft, td.offsetTop, td.offsetWidth, td.offsetHeight);
	    // }
	    GridBodyElement.prototype.getCellRectAt = function (lm, index, checkMerging) {
	        var cell = this.getCellAt(lm, index);
	        if (cell) {
	            if (checkMerging && cell.merged) {
	                cell = cell.head;
	            }
	            var tr = cell.trow;
	            var trs = checkMerging ? cell.rowSpan : cell.layout["_dspan"];
	            var rect = lm.getTableRowBounds(tr, trs);
	            var c = cell.tcol;
	            if (index.colFixed) {
	                rect.x = lm.getFixedCellPoint(c);
	                rect.width = lm.getFixedCellWidth(c);
	            }
	            else if (index.rightFixed) {
	                rect.x = lm.getRightCellPoint(c);
	                rect.width = lm.getRightCellWidth(c);
	            }
	            else {
	                rect.x = lm.getCellPoint(c);
	                rect.width = lm.getCellWidth(c);
	            }
	            return rect;
	        }
	        return null;
	    };
	    GridBodyElement.prototype.getRowView = function (item) {
	        for (var i = 0, cnt = this.childCount; i < cnt; i++) {
	            var v = this.getChild(i);
	            if (v["_item"] === item) {
	                return v;
	            }
	        }
	        return null;
	    };
	    GridBodyElement.prototype.getRowIndex = function (tr) {
	        return this._cells[tr][0].item.index;
	    };
	    GridBodyElement.prototype.cleanTableRows = function (count) {
	        var trows = this["_tbody"].rows;
	        for (var i = trows.length - 1; i >= count; i--) {
	            var trow = trows[i];
	            //if (trow["$_idx"] === undefined || trow["$_idx"] >= 0) {
	            trow["$_idx"] = -1;
	            trows[i].style.display = "none";
	            //}
	        }
	        for (var i = this._cells.length - 1; i >= count; i--) {
	            var cells = this._cells[i];
	            for (var i_1 = cells.length - 1; i_1 >= 0; i_1--) {
	                //cells[i].clear(false);
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridBodyElement.prototype._getCssSelector = function () {
	        return "rg-body";
	    };
	    GridBodyElement.prototype._isFixedHeight = function (lm) {
	        return !lm.isAutoRowHeights();
	    };
	    GridBodyElement.prototype._getTrs = function (lm) {
	        return lm.cellLayouts.dataRows;
	    };
	    GridBodyElement.prototype._getTableRowCount = function (lm) {
	        if (lm.isAutoRowHeights()) {
	            return Math.ceil(lm.bodyBounds.height / lm.grid.displayOptions.minRowHeight);
	        }
	        else if (lm.isRowGrouped()) {
	            var nFixed = lm.fixedItemCount;
	            var n = nFixed + lm.itemCount;
	            var trs = this._trs;
	            var count = 0;
	            for (var r = 0; r < n; r++) {
	                var item = lm.getItem(r);
	                count += item.isData ? trs : 1;
	            }
	            // fixed bar
	            count += nFixed ? 1 : 0;
	            return count;
	        }
	        else {
	            return _super.prototype._getTableRowCount.call(this, lm);
	        }
	    };
	    GridBodyElement.prototype.$_getTableIndex = function (lm, row) {
	        var nFixed = lm.fixedItemCount;
	        if (row >= nFixed && lm.isRowGrouped()) {
	            var trs = this._trs;
	            var r = nFixed * trs;
	            if (nFixed > 0)
	                r++;
	            for (var i = nFixed; i < row; i++) {
	                if (lm.getItem(i).isData)
	                    r += trs;
	                else
	                    r++;
	            }
	            return r;
	        }
	        else {
	            var r = row * this._trs;
	            return nFixed > 0 && row >= nFixed ? r + 1 : r;
	        }
	    };
	    // protected _getTableRow(lm: GridLayoutManager, row: number): HTMLTableRowElement {
	    //     return this["_tbody"].children[row * this._trs] as HTMLTableRowElement;
	    // }
	    // protected _getTableRowAt(lm: GridLayoutManager, index: number): HTMLTableRowElement {
	    //     return this["_tbody"].children[index] as HTMLTableRowElement;
	    // }
	    // protected _getTableRowInternal(lm: GridLayoutManager, row: number, index: number): HTMLTableRowElement {
	    //     return this["_tbody"].children[row * this._trs + index] as HTMLTableRowElement;
	    // }
	    // // 점검 후 삭제!
	    // protected _doPrepareTableRows(lm: GridLayoutManager, body: HTMLTableSectionElement): void {
	    //     super._doPrepareTableRows(lm, body);
	    // }
	    // // 점검 후 삭제!
	    // protected _doPrepareTableRow(lm: GridLayoutManager, index: number, tindex: number, tr: HTMLTableRowElement): void {
	    //     super._doPrepareTableRow(lm, index, tindex, tr);
	    // }
	    GridBodyElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        //let css = elt.style;
	        //css.whiteSpace = "nowrap"; <= rg-renderer 에서 처리.
	        return elt;
	    };
	    // protected _clearDataCellContent_2(tr: number, col: number): void {
	    //     const obj = this._cells[tr][col];
	    //     obj.setText(obj.cell.lastElementChild, "");
	    //     // data cell renderer에서 생성한 html들을 제거한다.
	    //     //Utils.clearChildren(obj.cell.lastElementChild as HTMLElement);
	    //     obj.cell.lastElementChild.innerHTML = "";
	    // }
	    // protected _prepareDataCellValue(grid: GridBase, model: GridCell): void {
	    //     const options = grid.formatOptions;
	    //     const col = model.valueColumn;
	    //     // TODO: 기존에는 styles에서 가져온다. 동적으로 지정할 수 있도록 해야 한다.
	    //     this._numberFormatter = options.getNumberFormatter(col.numberFormatter);
	    //     this._datetimeWriter = options.getDateWriter(col.datetimeWriter);
	    //     this._boolFormatter = options.getBoolFormatter(col.boolFormatter);
	    // }
	    GridBodyElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        return new Size_1.Size();
	    };
	    // table => cells
	    // ! fixed, norma, right body는 각각 다른 table이다.
	    GridBodyElement.prototype.$_refreshCells = function (lm, items, bodyLayouts, trs, tbody) {
	        var t = Utils_1.Utils.getTimer();
	        var bodyCells = this._cells;
	        var nItem = items.length;
	        var rows = tbody.children;
	        var nFixed = lm.fixedItemCount;
	        var fixed = nFixed > 0;
	        // TODO 점검 rowFixedBar를 감안해서 1을 더했지만. _getTableRowCount에서 이미 1을 더해주고 있다.
	        var nRow = rows.length; // + (fixed ? 1 : 0);
	        var c1 = this._getFirstCell(lm);
	        var c2 = this._getLastCell(lm);
	        var cols = c2 - c1 + 1;
	        for (var r = bodyCells.length; r < nRow; r++) {
	            bodyCells.push([]);
	        }
	        for (var r = 0, tr = 0; r < nItem && tr < nRow; r++) {
	            var item = items[r];
	            var n = item.isData ? trs : 1;
	            if (fixed && r == nFixed) {
	                // fixedBar
	                var bcells = bodyCells[tr];
	                var tds = rows[tr].children;
	                for (var c = 0; c < cols; c++) {
	                    var obj = bcells[c];
	                    if (!obj) {
	                        obj = bcells[c] = new BodyTableCell(tds[c]);
	                    }
	                    else if (obj.cell !== tds[c]) {
	                        obj.reset(tds[c]);
	                    }
	                    obj.item = null;
	                    obj.rowIndex = -1;
	                    obj.trow = tr;
	                    obj.tcol = c;
	                }
	                tr++;
	            }
	            for (var i = 0; i < n; i++) {
	                var bcells = bodyCells[tr];
	                var tds = rows[tr].children;
	                var layouts = bodyLayouts[i];
	                for (var c = 0; c < cols; c++) {
	                    var obj = bcells[c];
	                    if (!obj) {
	                        if (!tds[c])
	                            debugger;
	                        obj = bcells[c] = new BodyTableCell(tds[c]);
	                    }
	                    else if (obj.cell !== tds[c]) {
	                        obj.reset(tds[c]);
	                    }
	                    obj.item = item;
	                    obj.rowIndex = r;
	                    obj.trow = tr;
	                    obj.tcol = c;
	                    obj.layout = layouts[c + c1];
	                }
	                tr++;
	            }
	        }
	        for (var tr = nRow; tr < bodyCells.length; tr++) {
	            var cells = bodyCells[tr];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c] = null;
	            }
	        }
	        bodyCells.length = nRow;
	        t = Utils_1.Utils.getTimer() - t;
	        console.log("$$$$ REFRESH_CELLS: " + t);
	    };
	    GridBodyElement.prototype.$_refreshRowCells = function (lm, item, index, tr, bodyLayouts, trs, tbody) {
	        var bodyCells = this._cells;
	        var rows = tbody.children;
	        var c1 = this._getFirstCell(lm);
	        var c2 = this._getLastCell(lm);
	        var cols = c2 - c1 + 1;
	        for (var r = bodyCells.length, len = tr + trs; r < len; r++) {
	            bodyCells.push([]);
	        }
	        for (var i = 0; i < trs; i++) {
	            var bcells = bodyCells[tr];
	            if (!rows[tr])
	                debugger;
	            var tds = rows[tr].children;
	            var layouts = bodyLayouts[i];
	            for (var c = 0; c < cols; c++) {
	                var layout = layouts[c + c1];
	                var obj = bcells[c];
	                if (!obj) {
	                    obj = bcells[c] = new BodyTableCell(tds[c]);
	                    obj.layout = layout;
	                }
	                else if (obj.cell !== tds[c]) {
	                    // td 와 bcell을 맞추고 있으므로 여기 들어올 일이 없다.
	                    debugger;
	                    obj.reset(tds[c]);
	                }
	                else if (obj.layout !== layout) {
	                    // TODO 동일한 render type이지만 세부 속성이 달라진경우 체크필요.
	                    obj.rendererChanged = true;
	                    obj.layout = layout;
	                    obj.clear(true);
	                }
	                obj.spanned = false;
	                obj.item = item;
	                obj.rowIndex = index;
	                obj.trow = tr;
	                obj.tcol = c;
	            }
	            tr++;
	            // td 개수와 bcells 길이를 맞춘다.
	            // table의 td와 bcells의 td가 항상 동일힌 상태를 유지하도록 한다.
	            for (var c = cols; c < bcells.length; c++) {
	                if (!bcells[c])
	                    debugger;
	                bcells[c].dispose();
	            }
	            bcells.length = cols;
	        }
	    };
	    GridBodyElement.prototype._doLayoutContent = function (lm) {
	        var items = lm["$_getItems"]();
	        var cellLayouts = lm.cellLayouts;
	        var bodyLayouts = cellLayouts["_dataCells"];
	        this._mergedGrouped = lm.mergedRowGrouped;
	        this.$_refreshCells(lm, items, bodyLayouts, this._trs, this["_tbody"]);
	        var grid = this.grid;
	        var body = this.model;
	        var options = grid.fixedOptions;
	        var itemCount = this._itemCount = items.length;
	        var fixedCount = this._fixedCount = lm.fixedItemCount;
	        var fixed = fixedCount > 0;
	        // const dy = fixed ? 1 : 0;
	        var topIndex = grid.topIndex;
	        var trows = this["_tbody"].children;
	        var trs = this._trs;
	        var j, clsName;
	        while ((j = this.childCount) < itemCount) {
	            var item = items[j];
	            var view = this.$_borrowView(item);
	            this.addChild(view);
	        }
	        while ((j = this.childCount) > itemCount) {
	            this.$_removeView(j - 1);
	        }
	        var colCount = this._getEndCell(lm) - this._getStartCell(lm) + 1;
	        this.$_setCellsDisplay(lm, grid, this._cells, items, fixedCount, itemCount, colCount);
	        for (var i = 0, tr = 0; i < itemCount; i++) {
	            var item = items[i];
	            var view = this.getChild(i);
	            //const vr = i - fixedCount;
	            // fixed bar
	            if (fixed && i == fixedCount) {
	                trows[tr]["$_idx"] = tr;
	                trows[tr]["$_row"] = -99;
	                Utils_1.Utils.setClassName(trows[tr], options.rowBarStyle);
	                tr++;
	            }
	            var idx = item.index;
	            var dom = trows[tr];
	            dom["$_row"] = idx;
	            dom["$_idx"] = tr;
	            view.updateItem(item, tr++);
	            if (item.isDataRow || item instanceof GroupedItemProvider_1.MergedGroupHeader) {
	                var rect = lm.getItemBounds(idx);
	                view.setRect(rect);
	                clsName = body.getRowStyle(item, idx < fixedCount);
	                if (item.isDataRow) {
	                    for (var j_1 = 1; j_1 < trs; j_1++) {
	                        var dom2 = trows[tr++];
	                        dom2["$_idx"] = tr;
	                        dom2["$_row"] = idx;
	                        Utils_1.Utils.setClassName(dom2, clsName);
	                    }
	                }
	                view.layoutContent(lm);
	                Utils_1.Utils.setClassName(dom, clsName);
	            }
	            else if (item.isData) {
	                for (var j_2 = 1; j_2 < trs; j_2++) {
	                    var dom2 = trows[tr++];
	                    dom2["$_idx"] = tr;
	                    dom2["$_row"] = idx;
	                }
	                view.clearContent(lm, 1);
	                // 병합 그룹핑 상태에서 그룹셀의 행이 하나이고, 그 행이 그룹 footer이면 
	                if (item instanceof GroupedItemProvider_1.MergedGroupFooter && idx == grid.topIndex) {
	                    view.layoutContent(lm);
	                }
	            }
	            else {
	                view.clearContent(lm, 1);
	            }
	        }
	    };
	    GridBodyElement.prototype.layoutRow = function (info, index, tr, item) {
	        var lm = info.lm;
	        var fixedCount = info.fixedItemCount;
	        var body = this.model;
	        var cellLayouts = lm.cellLayouts;
	        var bodyLayouts = cellLayouts["_dataCells"];
	        var trows = this["_tbody"].rows;
	        var view;
	        this.$_refreshRowCells(lm, item, index, tr, bodyLayouts, this._trs, this["_tbody"]);
	        if (this.childCount <= index) {
	            view = this.$_borrowView(item);
	            this.addChild(view);
	        }
	        else {
	            view = this.getChild(index);
	        }
	        this.$_setRowCellsDisplay(lm, info, this._cells, item, index, tr);
	        var idx = item.index;
	        var dom = trows[tr];
	        //if (dom["$_idx"] < 0) {
	        dom.style.display = "";
	        //}
	        dom["$_row"] = idx;
	        dom["$_idx"] = tr;
	        view.updateItem(item, tr);
	        if (item.isDataRow || item instanceof GroupedItemProvider_1.MergedGroupHeader) {
	            view.setRect(lm.getItemBounds(idx));
	            var clsName = body.getRowStyle(item, idx < fixedCount);
	            if (item.isDataRow) {
	                for (var j = 1; j < this._trs; j++) {
	                    var dom2 = trows[tr + j];
	                    dom2["$_idx"] = tr + j;
	                    dom2["$_row"] = idx;
	                    Utils_1.Utils.setClassName(dom2, clsName);
	                }
	            }
	            view.layoutContent(lm);
	            Utils_1.Utils.setClassName(dom, clsName);
	        }
	        else if (item.isData) {
	            for (var j = 1; j < this._trs; j++) {
	                var dom2 = trows[tr + j];
	                dom2["$_idx"] = tr + j;
	                dom2["$_row"] = idx;
	            }
	            view.clearContent(lm, 1);
	            // 병합 그룹핑 상태에서 그룹셀의 행이 하나이고, 그 행이 그룹 footer이면 
	            if (item instanceof GroupedItemProvider_1.MergedGroupFooter && idx == info.grid.topIndex) {
	                view.layoutContent(lm);
	            }
	        }
	        else { // group footer
	            view.clearContent(lm, 1);
	        }
	    };
	    GridBodyElement.prototype.layoutFixedBar = function (lm, tr) {
	        var trow = this["_tbody"].children[tr];
	        var h = this["$_prepareFixedBar"](lm, trow);
	        trow["$_idx"] = tr;
	        trow["$_row"] = -99;
	        Utils_1.Utils.setClassName(trow, lm.grid.fixedOptions.rowBarStyle);
	        return h;
	    };
	    GridBodyElement.prototype._doRender = function (dom) {
	    };
	    GridBodyElement.prototype._getCellCount = function (lm) {
	        return lm.cellCount - lm.fixedCellCount - lm.rightCellCount;
	    };
	    GridBodyElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getCellWidth(col);
	    };
	    GridBodyElement.prototype._getTableRowHeight = function (lm, tr) {
	        return lm.getTableRowHeight(tr);
	    };
	    GridBodyElement.prototype._doDrawCell = function (row, col, dom) {
	    };
	    GridBodyElement.prototype.getCellAt = function (lm, index) {
	        var column = index.column;
	        var nFixed = lm.fixedItemCount;
	        var row = index.itemIndex;
	        if (row < lm.fixedItemCount || (row >= lm.topIndex && (row - lm.topIndex) < lm.fixedItemCount + lm.itemCount)) {
	            if (row >= nFixed) {
	                row -= lm.topIndex;
	            }
	            row = this.$_getTableIndex(lm, row);
	            if (row < this._cells.length) {
	                for (var r = 0; r < this._trs; r++) {
	                    var cells = this._cells[row + r];
	                    if (cells) {
	                        for (var c = 0; c < cells.length; c++) {
	                            var cell = cells[c];
	                            if (cell && cell.layout.isColumn(column)) {
	                                return cell;
	                            }
	                        }
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    GridBodyElement.prototype.getCellView = function (lm, index) {
	        var cell = this.getCellAt(lm, index);
	        return cell && cell.cell;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    // private $_getCellSelector(td: HTMLTableDataCellElement): string {
	    //     // _getDataCellSelector에서 리턴한다!
	    //     return "rg-body-cell";
	    // }
	    GridBodyElement.prototype._getFirstCell = function (lm) {
	        return lm["_firstCell"];
	    };
	    GridBodyElement.prototype._getLastCell = function (lm) {
	        return lm["_lastCell"];
	    };
	    GridBodyElement.prototype._getStartCell = function (lm) {
	        return lm.getStartCell();
	    };
	    GridBodyElement.prototype._getEndCell = function (lm) {
	        return lm.getEndCell();
	    };
	    GridBodyElement.prototype.$_removeView = function (row) {
	        var view = this.removeChildAt(row);
	        view.validate();
	        this._itemViews.push(view);
	    };
	    GridBodyElement.prototype.$_borrowView = function (item) {
	        var view = this._itemViews.pop();
	        if (!view) {
	            //view = this.grid().delegate().borrowItemView(item, this._fixed, this._rightFixed);
	            view = this.createRowElement();
	        }
	        return view;
	    };
	    GridBodyElement.prototype.createRowElement = function () {
	        return new ItemElement_1.RowElement();
	    };
	    GridBodyElement.prototype.$_setCellsDisplay = function (lm, grid, bodyCells, items, fixedCount, itemCount, colCount) {
	        var t = Utils_1.Utils.getTimer();
	        var c1 = this._getStartCell(lm) - this._getFirstCell(lm);
	        var fixed = fixedCount > 0;
	        var trs = this._trs;
	        var tr1 = 0;
	        var i = 0;
	        var heads = [];
	        if (fixed) {
	            for (; i < fixedCount; i++) {
	                for (var j = 0; j < trs; j++, tr1++) {
	                    var cells_1 = bodyCells[tr1];
	                    for (var c = 0; c < colCount; c++) {
	                        var cell = cells_1[c + c1];
	                        var layout = cell.layout;
	                        var column = layout.firstColumn;
	                        cell.merged = false;
	                        if (column) {
	                            cell.setColSpan(layout["_cspan"]);
	                            cell.setRowSpan(layout["_dspan"]);
	                            cell.setVisible(true);
	                        }
	                        else {
	                            cell.clear(false);
	                        }
	                    }
	                }
	            }
	            // fixed bar
	            var cells = bodyCells[tr1++];
	            for (var c = 0; c < colCount; c++) {
	                var cell = cells[c + c1];
	                cell.clear(true);
	            }
	        }
	        for (var r = tr1; i < itemCount; i++) {
	            var item = items[i];
	            if (item.isData || this._mergedGrouped) {
	                for (var j = 0; j < trs; j++) {
	                    var cells = bodyCells[r + j];
	                    for (var c = 0; c < colCount; c++) {
	                        var cell = cells[c + c1];
	                        var layout = cell.layout;
	                        var column = layout.firstColumn;
	                        cell.merged = false;
	                        if (column) {
	                            if (layout.merged) {
	                                var merges = column["_merges"];
	                                cell.merged = true;
	                                if (merges.isHidden(i - fixedCount)) {
	                                    cell.clear(false);
	                                    cell.head = heads[c];
	                                }
	                                else {
	                                    cell.setColSpan(layout["_cspan"]);
	                                    // 주의! 병합 행수가 table tr 수를 넘아갈 수 있다.
	                                    //      rowspan이 table tr 수보다 큰게 문제가 되면 itemCount에 맞춰 조정해줘야 한다!
	                                    cell.setRowSpan(merges.getMerged(i - fixedCount) * layout["_dspan"]);
	                                    cell.setVisible(true);
	                                    cell.groupItem = this._mergedGrouped && grid.findGroupItem(item, column.dataIndex);
	                                    heads[c] = cell.head = cell;
	                                }
	                            }
	                            else {
	                                cell.setColSpan(layout["_cspan"]);
	                                cell.setRowSpan(layout["_dspan"]);
	                                cell.setVisible(true);
	                            }
	                        }
	                        else {
	                            cell.clear(false);
	                        }
	                    }
	                }
	                r += trs;
	            }
	            else {
	                var cells = bodyCells[r++];
	                for (var c = 0; c < colCount; c++) {
	                    var cell = cells[c + c1];
	                    cell.clear(false);
	                    cell.merged = false;
	                }
	            }
	        }
	        t = Utils_1.Utils.getTimer() - t;
	        console.log("#### CELLS_DISPLAY: " + t);
	    };
	    GridBodyElement.prototype.$_setRowCellsDisplay = function (lm, info, bodyCells, item, index, tr) {
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm) - f;
	        var c2 = this._getEndCell(lm) - f;
	        var grid = info.grid;
	        var fixedCount = info.fixedItemCount;
	        var heads = info.mergeHeads;
	        var trs = this._trs;
	        if (item.isData || info.mergedRowGrouped) {
	            for (var j = 0; j < trs; j++) {
	                var cells = bodyCells[tr + j];
	                for (var c = c1; c <= c2; c++) {
	                    var cell = cells[c];
	                    var layout = cell.layout;
	                    var p = layout.parent;
	                    var vert = p && p.vertical;
	                    cell.merged = false;
	                    if (cell.spanned) ;
	                    else if (layout.isProxy) {
	                        cell.clear(false);
	                    }
	                    else {
	                        var cb = layout.spanCallback;
	                        var span = cb ? cb(layout, cell.item.index) : undefined;
	                        var len = 0;
	                        if (span === undefined) {
	                            span = layout.getDataSpan();
	                        }
	                        if (span > 1) {
	                            var i = 0;
	                            var idx = layout.vindex + 1;
	                            // span은 그룹 내에서...
	                            span--;
	                            while (i++ < span && idx < p.visibleCount) {
	                                var sib = p.getVisible(idx++);
	                                if (vert) {
	                                    len += sib["_dspan"];
	                                    this._cells[tr + j + i][c].span();
	                                }
	                                else {
	                                    len += sib["_cspan"];
	                                    cells[c + i].span();
	                                }
	                            }
	                        }
	                        var merges = layout.merged && layout["_merges"];
	                        if (merges) {
	                            cell.merged = true;
	                            // merge일 때 vert일 수 없다.
	                            if (merges.isHidden(index - fixedCount)) {
	                                cell.set(layout["_cspan"] + len, layout["_dspan"], false);
	                                cell.head = heads[c - c1];
	                            }
	                            else {
	                                // 주의! 병합 행수가 table tr 수를 넘아갈 수 있다.
	                                //      rowspan이 table tr 수보다 큰게 문제가 되면 itemCount에 맞춰 조정해줘야 한다!
	                                cell.set(layout["_cspan"] + len, merges.getMerged(index - fixedCount) * layout["_dspan"], true);
	                                cell.groupItem = info.mergedRowGrouped && grid.findGroupItem(item, layout.firstColumn.dataIndex);
	                                heads[c - c1] = cell.head = cell;
	                            }
	                        }
	                        else {
	                            if (vert) {
	                                cell.set(layout["_cspan"], layout["_dspan"] + len, true);
	                            }
	                            else {
	                                cell.set(layout["_cspan"] + len, layout["_dspan"], true);
	                            }
	                        }
	                    }
	                }
	            }
	        }
	        else {
	            var cells = bodyCells[tr];
	            for (var c = c1; c <= c2; c++) {
	                var cell = cells[c];
	                cell.clear(false);
	                cell.merged = false;
	            }
	        }
	    };
	    GridBodyElement.prototype.$_refreshSpans = function (rows, c1, c2) {
	    };
	    GridBodyElement.prototype.$_cleanBodyCells = function (rowCount) {
	        var bodyCells = this._cells;
	        for (var tr = rowCount; tr < bodyCells.length; tr++) {
	            var cells = bodyCells[tr];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c].dispose();
	                cells[c] = null;
	            }
	        }
	        bodyCells.length = rowCount;
	    };
	    GridBodyElement.prototype.$_resetHeights = function (fixedPts, pts) {
	        var rows = this["_tbody"].children;
	        var r = 0;
	        if (fixedPts.length > 0) {
	            for (var i = 1; i < fixedPts.length; i++) {
	                rows[r++].style.height = (fixedPts[i] - fixedPts[i - 1]) + "px";
	            }
	            r++; // fixed bar
	        }
	        for (var i = 1; i < pts.length; i++) {
	            rows[r++].style.height = (pts[i] - pts[i - 1]) + "px";
	        }
	    };
	    // TODO $_focusChanged/$_mouseEnteredChanged 통합필요.
	    GridBodyElement.prototype.$_focusChanged = function (grid, cell, focused) {
	        if (cell && focused != cell.focused && cell.item instanceof GridItem_1.GridRow) {
	            var rowView = this.getRowView(cell.item);
	            if (rowView) {
	                var body = this.model;
	                var dcol = cell.dataColumn;
	                cell.focused = focused;
	                if (dcol) {
	                    var model = body.getCell(CellIndex_1.CellIndex.temp(grid, cell.item.index, dcol), false);
	                    rowView["_updateDataCell"](grid, grid.layoutManager, body, model, dcol, cell);
	                }
	            }
	        }
	    };
	    GridBodyElement.prototype.$_mouseEnteredChanged = function (grid, cell, entered) {
	        if (cell && entered != cell.mouseEntered && cell.item instanceof GridItem_1.GridRow) {
	            var rowView = this.getRowView(cell.item);
	            if (rowView) {
	                var body = this.model;
	                var dcol = cell.dataColumn;
	                cell.mouseEntered = entered;
	                if (dcol) {
	                    var model = body.getCell(CellIndex_1.CellIndex.temp(grid, cell.item.index, dcol), false);
	                    rowView["_updateDataCell"](grid, grid.layoutManager, body, model, dcol, cell);
	                }
	            }
	        }
	    };
	    GridBodyElement.prototype.$_rendererChanged = function (layout) {
	        var bodyCells = this._cells;
	        for (var tr = 0; tr < bodyCells.length; tr++) {
	            var cells = bodyCells[tr];
	            for (var c = 0; c < cells.length; c++) {
	                if (cells[c].layout === layout) {
	                    cells[c].rendererChanged = true;
	                }
	            }
	        }
	    };
	    return GridBodyElement;
	}(TableBaseElement_1.DataTableElement));
	exports.GridBodyElement = GridBodyElement;
	var FixedBodyElement = /** @class */ (function (_super) {
	    __extends(FixedBodyElement, _super);
	    function FixedBodyElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedBodyElement.prototype._getCssSelector = function () {
	        return "rg-fixed-body";
	    };
	    FixedBodyElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    FixedBodyElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    FixedBodyElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    FixedBodyElement.prototype._getEndCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedBodyElement.prototype.createRowElement = function () {
	        return new ItemElement_1.FixedRowElement();
	    };
	    FixedBodyElement.prototype._getCellCount = function (lm) {
	        return lm.fixedCellCount;
	    };
	    FixedBodyElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getFixedCellWidth(col);
	    };
	    return FixedBodyElement;
	}(GridBodyElement));
	exports.FixedBodyElement = FixedBodyElement;
	var RightBodyElement = /** @class */ (function (_super) {
	    __extends(RightBodyElement, _super);
	    function RightBodyElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightBodyElement.prototype._getCssSelector = function () {
	        return "rg-fixed-body";
	    };
	    RightBodyElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    RightBodyElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    RightBodyElement.prototype._getStartCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightBodyElement.prototype._getEndCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightBodyElement.prototype.createRowElement = function () {
	        return new ItemElement_1.RightRowElement();
	    };
	    RightBodyElement.prototype._getCellCount = function (lm) {
	        return lm.rightCellCount;
	    };
	    RightBodyElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getRightCellWidth(col);
	    };
	    return RightBodyElement;
	}(GridBodyElement));
	exports.RightBodyElement = RightBodyElement;
	});

	unwrapExports(GridBodyElement_1);
	var GridBodyElement_2 = GridBodyElement_1.BodyTableCell;
	var GridBodyElement_3 = GridBodyElement_1.GridBodyElement;
	var GridBodyElement_4 = GridBodyElement_1.FixedBodyElement;
	var GridBodyElement_5 = GridBodyElement_1.RightBodyElement;

	var GridLayoutManager_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridLayoutManager.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });











	var GridLayoutManager = /** @class */ (function (_super) {
	    __extends(GridLayoutManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridLayoutManager(grid) {
	        var _this = _super.call(this) || this;
	        _this._refreshMode = Types.RefreshMode.ALL;
	        _this._leftPos = 0;
	        // private _columnCount = 0;
	        // private _fixedColCount = 0;
	        // private _rightColCount = 0;
	        _this._rightFixed = true;
	        // private _firstCol = 0;
	        // private _lastCol = 0;
	        // private _columnsLength = 0;
	        // private _columns: GridColumn[] = [];
	        // private _columnPoints: number[] = [];
	        // private _fixedColumnPoints: number[] = [];
	        // private _rightColumnPoints: number[] = [];
	        _this._footerCount = 0;
	        _this._headerSummaryCount = 0;
	        _this._layoutCount = 0;
	        _this._fixedLayoutCount = 0;
	        _this._rightLayoutCount = 0;
	        _this._firstLayout = 0;
	        _this._lastLayout = 0;
	        _this._layoutsLength = 0;
	        _this._layouts = [];
	        _this._layoutPoints = [];
	        _this._fixedLayoutPoints = [];
	        _this._rightLayoutPoints = [];
	        _this._cellCount = 0;
	        _this._fixedCellCount = 0;
	        _this._rightCellCount = 0;
	        _this._firstCell = 0; // (fixed/right를 제외한) 전체 시작 셀
	        _this._lastCell = 0; // (fixed/right를 제외한) 전체 끝 셀
	        _this._startCell = 0; // (fixed/right를 제외한) 표시되는 시작 셀
	        _this._endCell = 0; // (fixed/right를 제외한) 표시되는 끝 셀
	        _this._cellPoints = [];
	        _this._fixedCellPoints = [];
	        _this._rightCellPoints = [];
	        _this._trs = 1;
	        _this._rowGrouped = false;
	        _this._items = [];
	        _this._topIndex = 0;
	        _this._itemCount = 0;
	        _this._fixedItemCount = 0;
	        _this._fullItemCount = 0;
	        _this._availableItemCount = 0;
	        _this._fixedItemPoints = [];
	        _this._itemPoints = [];
	        _this._fixedTableRowCount = 0;
	        _this._tableRowCount = 0;
	        _this._fixedTableRowPoints = [];
	        _this._tableRowPoints = [];
	        _this._fixedDataHeight = 0;
	        _this._dataHeight = 0;
	        _this._fixedBarWidth = 0;
	        _this._rightBarWidth = 0;
	        _this._fixedBarHeight = 0;
	        _this._columnMerged = false;
	        _this._fixedColumnMerged = false;
	        _this._rightColumnMerged = false;
	        _this._fixedWidth = 0;
	        _this._rightWidth = 0;
	        _this._fixedHeight = 0;
	        _this._autoRowHeights = false;
	        _this._minRowHeight = DisplayOptions_1.DisplayOptions.MIN_ROW_HEIGHT;
	        _this._rowHeight = 0;
	        _this._hscrolled = false;
	        _this._vscrolled = false;
	        _this._hscrollBar = false;
	        _this._vscrollBar = false;
	        _this._scrollBarWidth = 0;
	        _this._scrollBarHeight = 0;
	        _this._scrollWidth = 0;
	        _this._columnFitted = false;
	        _this._compensated = 0;
	        _this._grid = grid;
	        return _this;
	    }
	    GridLayoutManager.prototype._doDispose = function () {
	        this._grid = null;
	        this._rs = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridLayoutManager.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "footerCount", {
	        /** footerCount */
	        get: function () {
	            return this._footerCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "headerSummaryCount", {
	        /** headerSummaryCount */
	        get: function () {
	            return this._headerSummaryCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "vscrollBar", {
	        /** vscrollBar */
	        get: function () {
	            return this._vscrollBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "hscrollBar", {
	        /** hscrollBar */
	        get: function () {
	            return this._hscrollBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "dataBounds", {
	        /** dataBounds */
	        get: function () {
	            return this._dataBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "bodyBounds", {
	        /** bodyBounds */
	        get: function () {
	            return this._bodyBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedBodyBounds", {
	        /** fixedBodyBounds */
	        get: function () {
	            return this._fixedBodyBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "gridBounds", {
	        /**
	         * 상단 영역, 하단 영역 제외. 고정 영역까지 제외, 스크롤바드르 제외한 영역.
	         */
	        get: function () {
	            return this._gridBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "headerBounds", {
	        /** headerBounds */
	        get: function () {
	            return this._headerBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "summaryBounds", {
	        /** summaryBounds */
	        get: function () {
	            return this._summaryBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "footerBounds", {
	        /** footerBounds */
	        get: function () {
	            return this._footerBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "topContentBounds", {
	        /** topContentBounds */
	        get: function () {
	            return this._topContentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "leftContentBounds", {
	        /** leftContentBounds */
	        get: function () {
	            return this._leftContentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "sideContentBounds", {
	        /** sideContentBounds */
	        get: function () {
	            return this._sideContentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "contentBounds", {
	        /** contentBounds */
	        get: function () {
	            return this._contentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedContentBounds", {
	        /** fixedContentBounds */
	        get: function () {
	            return this._fixedContentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightContentBounds", {
	        /** rightContentBounds */
	        get: function () {
	            return this._rightContentBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "indicatorBounds", {
	        /** indicatorBounds */
	        get: function () {
	            return this._indicatorBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "headBounds", {
	        /** headBounds */
	        get: function () {
	            return this._headBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "sumBounds", {
	        /** sumBounds */
	        get: function () {
	            return this._sumBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "footBounds", {
	        /** footBounds */
	        get: function () {
	            return this._footBounds;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedWidth", {
	        /** fixedWidth */
	        get: function () {
	            return this._fixedWidth;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightWidth", {
	        /** rightWidth */
	        get: function () {
	            return this._rightWidth;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "topIndex", {
	        /** topIndex */
	        get: function () {
	            return this._topIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "itemCount", {
	        /** itemCount */
	        get: function () {
	            return this._itemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedItemCount", {
	        /** fixedItemCount */
	        get: function () {
	            return this._fixedItemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fullItemCount", {
	        /** fullItemCount */
	        get: function () {
	            return this._fullItemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedTableRowCount", {
	        /** fixedTableRowCount */
	        get: function () {
	            return this._fixedTableRowCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "tableRowCount", {
	        /** tableRowCount */
	        get: function () {
	            return this._tableRowCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "leftPos", {
	        // /** columnCount */
	        // get columnCount(): number {
	        //     return this._columnCount;
	        // }
	        /** leftPos */
	        get: function () {
	            return this._leftPos;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "cellLayouts", {
	        // /** firstCol */
	        // get firstCol(): number {
	        //     return this._firstCol;
	        // }
	        // /** lastCol */
	        // get lastCol(): number {
	        //     return this._lastCol;
	        // }
	        // /** fixedColCount */
	        // get fixedColCount(): number {
	        //     return this._fixedColCount;
	        // }
	        // /** rightColCount */
	        // get rightColCount(): number {
	        //     return this._rightColCount;
	        // }
	        // /** rightFirstCol */
	        // get rightFirstCol(): number {
	        //     return this._columnCount - this._rightColCount;
	        // }
	        // /** columnsLength */
	        // get columnsLength(): number {
	        //     return this._columnsLength;
	        // }
	        /** cellLayouts */
	        get: function () {
	            return this._cellLayouts;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "layoutCount", {
	        /** layoutCount */
	        get: function () {
	            return this._layoutCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedLayoutCount", {
	        /** fixedLayoutCount */
	        get: function () {
	            return this._fixedLayoutCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightLayoutCount", {
	        /** rightLayoutCount */
	        get: function () {
	            return this._rightLayoutCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "firstLayout", {
	        /** firstLayout */
	        get: function () {
	            return this._firstLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "lastLayout", {
	        /** lastLayout */
	        get: function () {
	            return this._lastLayout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightFirstLayout", {
	        /** rightFirstLayout */
	        get: function () {
	            return this._layoutCount - this._rightLayoutCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "layoutsLength", {
	        /** layoutsLength */
	        get: function () {
	            return this._layoutsLength;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "cellCount", {
	        /** cellCount */
	        get: function () {
	            return this._cellCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedCellCount", {
	        /** fixedCellCount */
	        get: function () {
	            return this._fixedCellCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightCellCount", {
	        /** rightCellCount */
	        get: function () {
	            return this._rightCellCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "isColumnFitted", {
	        // /** firstCell */
	        // get firstCell(): number {
	        //     return this._firstCell;
	        // }
	        // /** lastCell */
	        // get lastCell(): number {
	        //     return this._lastCell;
	        // }
	        // /** startCell */
	        // get startCell(): number {
	        //     return this._startCell;
	        // }
	        // /** endCell */
	        // get endCell(): number {
	        //     return this._endCell;
	        // }
	        /** isColumnFitted */
	        get: function () {
	            return this._columnFitted;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "indicatorWidth", {
	        /** indicatorWidth */
	        get: function () {
	            return this._indicatorBounds.width;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "stateBarWidth", {
	        /** stateBarWidth */
	        get: function () {
	            return this._stateBarBounds.width;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "checkBarWidth", {
	        /** checkBarWidth */
	        get: function () {
	            return this._checkBarBounds.width;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "scrollWidth", {
	        /** _scrollWidth */
	        get: function () {
	            return this._scrollWidth;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedBarWidth", {
	        /** fixedBarWidth */
	        get: function () {
	            return this._fixedBarWidth;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightBarWidth", {
	        /** rightBarWidth */
	        get: function () {
	            return this._rightBarWidth;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedHeight", {
	        /** fixedHeight */
	        get: function () {
	            return this._fixedHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedBarHeight", {
	        /** fixedBarHeight */
	        get: function () {
	            return this._fixedBarHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rowGrouped", {
	        /** rowGrouped */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "mergedRowGrouped", {
	        /** mergedRowGrouped */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rowGroupLevels", {
	        /** rowGroupLevels */
	        get: function () {
	            return 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "columnMerged", {
	        /** columnMerged */
	        get: function () {
	            return this._columnMerged;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "fixedColumnMerged", {
	        /** fixedColumnMerged */
	        get: function () {
	            return this._fixedColumnMerged;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "rightColumnMerged", {
	        /** rightColumnMerged */
	        get: function () {
	            return this._rightColumnMerged;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "clientRect", {
	        /**
	         * 스크롤바를 제외한 그리드 전체 영역.
	         */
	        get: function () {
	            return this._clientRect;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "headerRows", {
	        get: function () {
	            return this._cellLayouts.headerRows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "headerSummaryRows", {
	        get: function () {
	            return this._cellLayouts.dataRows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "footerRows", {
	        get: function () {
	            return this._cellLayouts.dataRows;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "topPanelVisible", {
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridLayoutManager.prototype, "minRowHeight", {
	        get: function () {
	            return this._minRowHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridLayoutManager.prototype.getStartCell = function () {
	        return this._refreshMode == Types.RefreshMode.VISIBLE_ONLY ? this._startCell : this._firstCell;
	    };
	    GridLayoutManager.prototype.getEndCell = function () {
	        return this._refreshMode == Types.RefreshMode.VISIBLE_ONLY ? this._endCell : this._lastCell;
	    };
	    GridLayoutManager.prototype.getLayout = function (index) {
	        return this._layouts[index];
	    };
	    GridLayoutManager.prototype.getLayoutBounds = function (index) {
	        return new Rectangle_1.Rectangle(this._layoutPoints[index], 0, this._layoutPoints[index + 1] - this._layoutPoints[index], 0);
	    };
	    GridLayoutManager.prototype.getLayoutWidth = function (index) {
	        return this._layoutPoints[index + 1] - this._layoutPoints[index];
	    };
	    GridLayoutManager.prototype.getFixedLayoutWidth = function (index) {
	        return this._fixedLayoutPoints[index + 1] - this._fixedLayoutPoints[index];
	    };
	    GridLayoutManager.prototype.getRightLayoutWidth = function (index) {
	        return this._rightLayoutPoints[index + 1] - this._rightLayoutPoints[index];
	    };
	    GridLayoutManager.prototype.getCellIndex = function (x) {
	        var pts = this._cellPoints;
	        for (var i = 0; i < pts.length - 1; i++) {
	            if (x >= pts[i] && x < pts[i + 1]) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    GridLayoutManager.prototype.getLeftCell = function () {
	        return this.getCellIndex(this._leftPos);
	    };
	    GridLayoutManager.prototype.getCellPoint = function (index) {
	        return this._cellPoints[index];
	    };
	    GridLayoutManager.prototype.getCellWidth = function (index) {
	        return this._cellPoints[index + 1] - this._cellPoints[index];
	    };
	    GridLayoutManager.prototype.getFixedCellPoint = function (index) {
	        return this._fixedCellPoints[index];
	    };
	    GridLayoutManager.prototype.getFixedCellWidth = function (index) {
	        return this._fixedCellPoints[index + 1] - this._fixedCellPoints[index];
	    };
	    GridLayoutManager.prototype.getRightCellPoint = function (index) {
	        return this._rightCellPoints[index];
	    };
	    GridLayoutManager.prototype.getRightCellWidth = function (index) {
	        return this._rightCellPoints[index + 1] - this._rightCellPoints[index];
	    };
	    GridLayoutManager.prototype.$_getItems = function () {
	        return this._items;
	    };
	    GridLayoutManager.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    GridLayoutManager.prototype._calcDefaultRowHeight = function (grid) {
	        var options = this.grid.displayOptions;
	        var h = options.rowHeight;
	        // h가 0이면 기본 tr 높이 계산.
	        if (h <= 0) {
	            h = grid.heightMeasurer.rowHeight * this.cellLayouts.dataRows;
	        }
	        if (options.maxRowHeight > 0) {
	            h = Math.min(options.maxRowHeight, h);
	        }
	        h = Math.max(options.minRowHeight, h);
	        return h;
	    };
	    GridLayoutManager.prototype._calcRowHeight = function () {
	        return this._rowHeight;
	    };
	    GridLayoutManager.prototype.measure = function (bounds, leftPos, topIndex, scrollBarWidth, scrollBarHeight) {
	        var grid = this._grid;
	        this._rs = grid.itemSource;
	        this._cellLayouts = grid["_activeCellLayout"];
	        this._footerCount = grid.footers.visibleCount;
	        this._headerSummaryCount = grid.headerSummaries.visibleCount;
	        this._leftPos = leftPos;
	        this._topIndex = topIndex;
	        this._columnMerged = false;
	        this._fixedColumnMerged = false;
	        this._rightColumnMerged = false;
	        if (this._focusIndex && !grid.isValid(this._focusIndex)) {
	            this._focusIndex.normalize(grid);
	        }
	        this._doMeasure(bounds, scrollBarWidth, scrollBarHeight);
	        this._prevFocused = this._focusIndex;
	        this._focusIndex = null;
	    };
	    GridLayoutManager.prototype.layout = function (bounds) {
	        var grid = this._grid;
	        this._doLayout(grid, bounds);
	        this.$_adjustLayout(grid, this._gridBounds.clone());
	    };
	    GridLayoutManager.prototype.getItemHeight = function (item) {
	        var row = item.index;
	        if (row < this._fixedItemCount) {
	            return this._fixedItemPoints[row + 1] - this._fixedItemPoints[row];
	        }
	        else {
	            row -= this._fixedItemCount - this._topIndex;
	            return this._itemPoints[row + 1] - this._itemPoints[row];
	        }
	    };
	    GridLayoutManager.prototype.getTableItemHeight = function (row) {
	        if (row < this._fixedItemCount) {
	            return this._fixedItemPoints[row + 1] - this._fixedItemPoints[row];
	        }
	        else {
	            row -= this._fixedItemCount;
	            return this._itemPoints[row + 1] - this._itemPoints[row];
	        }
	    };
	    GridLayoutManager.prototype.getItemBounds = function (row) {
	        var y;
	        var h;
	        if (this._fixedItemCount > 0 && row < this._fixedItemCount) {
	            y = this._fixedItemPoints[row];
	            h = this._fixedItemPoints[row + 1] - y;
	        }
	        else {
	            row -= this._fixedItemCount;
	            y = this._itemPoints[row];
	            h = this._itemPoints[row + 1] - y;
	        }
	        return new Rectangle_1.Rectangle(0, y, 1000, h);
	        // if (this._fixedItemCount > 0 && row >= this._fixedItemCount) {
	        //     return new Rectangle(0, this._fixedBarHeight + row * 23, 1000, 23);
	        // } else {
	        //     return new Rectangle(0, row * 23, 1000, 23);
	        // }
	    };
	    GridLayoutManager.prototype.getItemRect = function (row, fixed) {
	        if (fixed === void 0) { fixed = false; }
	        var r = fixed ? this._fixedContentBounds : this._bodyBounds;
	        var sy = r.y;
	        var y;
	        var h;
	        if (this._fixedItemCount > 0 && row < this._fixedItemCount) {
	            y = this._fixedItemPoints[row] + sy;
	            h = this._fixedItemPoints[row + 1] + sy - y;
	        }
	        else {
	            row -= this._fixedItemCount;
	            y = this._itemPoints[row] + sy;
	            h = this._itemPoints[row + 1] + sy - y;
	        }
	        return new Rectangle_1.Rectangle(0, y, 1000, h);
	    };
	    GridLayoutManager.prototype.getTableRowHeight = function (row) {
	        if (row < this._fixedTableRowCount) {
	            return this._fixedTableRowPoints[row + 1] - this._fixedTableRowPoints[row];
	        }
	        else {
	            if (this._fixedItemCount > 0) {
	                row -= this._fixedItemCount * this._trs + 1; // fixed bar
	            }
	            return this._tableRowPoints[row + 1] - this._tableRowPoints[row];
	        }
	    };
	    GridLayoutManager.prototype.getTableRowBounds = function (row, span) {
	        var y;
	        var h;
	        if (this._fixedTableRowCount > 0 && row < this._fixedTableRowCount) {
	            y = this._fixedTableRowPoints[row];
	            h = this._fixedTableRowPoints[Math.min(row + span, this._fixedTableRowCount)] - y;
	        }
	        else {
	            if (this._fixedTableRowCount > 0) {
	                row -= this._fixedTableRowCount + 1;
	            }
	            y = this._tableRowPoints[row];
	            h = this._tableRowPoints[Math.min(row + span, this._tableRowCount)] - y;
	        }
	        return new Rectangle_1.Rectangle(0, y, 1000, h);
	        // if (this._fixedItemCount > 0 && row >= this._fixedItemCount) {
	        //     return new Rectangle(0, this._fixedBarHeight + row * 23, 1000, 23);
	        // } else {
	        //     return new Rectangle(0, row * 23, 1000, 23);
	        // }
	    };
	    GridLayoutManager.prototype.getTableRowIndex = function (y) {
	        y -= this.contentBounds.y + this.bodyBounds.y;
	        for (var i = 0; i < this._fixedTableRowCount; i++) {
	            if (y < this._fixedTableRowPoints[i + 1]) {
	                return i;
	            }
	        }
	        for (var i = 0; i < this._tableRowCount; i++) {
	            if (y < this._tableRowPoints[i + 1]) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    /**
	     * 사용자 수평 스크롤시 전체 layout없이 contentPane만 이동시킨다.
	     */
	    GridLayoutManager.prototype.setLeftPos = function (bounds, pos) {
	        var grid = this._grid;
	        this._leftPos = pos;
	        this.$_calcLeftPos(bounds, this._scrollBarWidth);
	        grid.contentPane.x = this._contentBounds.x = this.fixedContentBounds.right - this._leftPos;
	        // TODO: 아래를 없앤다! _doLayout() 마지막 부분 참조 !
	        //this._bodyBounds.x = this._contentBounds.x;
	    };
	    GridLayoutManager.prototype.isMergedCell = function (index) {
	        return false;
	    };
	    GridLayoutManager.prototype.getMergedCell = function (index) {
	        var layout = index.layout;
	        if (layout instanceof CellLayout.CellLayoutColumnItem && layout.canMerge()) {
	            var merges = layout["_merges"];
	            if (merges) {
	                return merges.getRoom(index);
	            }
	        }
	        return null;
	    };
	    // getColumnRect(index: number): Rectangle {
	    //     const rfixedCol = this.rightFirstCol;
	    //     let r: Rectangle;
	    // 	if (index < this._fixedColCount) {
	    //         const x = this._gridBounds.x; 
	    //         const i = index;
	    // 		r = new Rectangle(this._fixedColumnPoints[i] + x, 0, this._fixedColumnPoints[i + 1] - this._fixedColumnPoints[i], 0);
	    // 	} else if (index >= rfixedCol) {
	    // 		const x = this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth; 
	    // 		const i = index - rfixedCol;
	    // 		r = new Rectangle(this._rightColumnPoints[i] + x, 0, this._rightColumnPoints[i + 1] - this._rightColumnPoints[i], 0);
	    // 	} else {
	    // 		const x = this._bodyBounds.x; //this._fixedCols > 0 ? this._bodyBounds.x - this._leftPos : this._bodyBounds.x; // fixed Column이 존재하면 _bodyBounds에 _leftPos를 빼지 않는다.
	    // 		const i = index - this._fixedColCount;
	    // 		r = new Rectangle(this._columnPoints[i] + x, 0, this._columnPoints[i + 1] - this._columnPoints[i], 0);
	    // 	}
	    // 	return r;
	    // }
	    // getDataRootRect(column: GridColumn): Rectangle {
	    //     const r = this.getColumnRect(column.displayIndex);
	    //     return r;
	    // }
	    GridLayoutManager.prototype.getHeaderCellAt = function (x, y, proxy) {
	        if (proxy === void 0) { proxy = false; }
	        var layouts = this._cellLayouts["_headerCells"];
	        var headerView = this._grid.headerView;
	        var row = headerView.getRowAt(y - this._headerBounds.y - this._contentBounds.y);
	        var layout = null;
	        if (x < this._fixedContentBounds.right) {
	            x -= this._fixedContentBounds.x;
	            for (var i = 0; i < this._fixedCellCount; i++) {
	                if (x >= this._fixedCellPoints[i] && x < this._fixedCellPoints[i + 1]) {
	                    layout = layouts[row][i];
	                    break;
	                }
	            }
	        }
	        else if (x > this._rightContentBounds.x) {
	            x -= this._rightContentBounds.x;
	            for (var i = 0; i < this._rightCellCount; i++) {
	                if (x >= this._rightCellPoints[i] && x < this._rightCellPoints[i + 1]) {
	                    layout = layouts[row][i + this._rightCellCount];
	                    break;
	                }
	            }
	        }
	        else {
	            x -= this._contentBounds.x;
	            for (var i = 0; i < this._cellPoints.length; i++) {
	                if (x >= this._cellPoints[i] && x < this._cellPoints[i + 1]) {
	                    layout = layouts[row][i + this._fixedCellCount];
	                    break;
	                }
	            }
	        }
	        if (layout && !proxy && layout instanceof CellLayout.ProxyCellLayoutItem) {
	            return layout.source;
	        }
	        return layout;
	    };
	    // grid 기준의 좌표를 리턴한다.
	    GridLayoutManager.prototype.getHeaderCellRect = function (layout, inclueChildren) {
	        if (inclueChildren === void 0) { inclueChildren = false; }
	        var grid = this.grid;
	        var index = layout.dataRoot.hcol; //cellIndex;
	        var rfixedCellCount = this.cellCount - this.rightCellCount;
	        var span = layout.cspan;
	        var r;
	        if (index < this._fixedCellCount) {
	            var x = this._gridBounds.x;
	            var i = index;
	            r = new Rectangle_1.Rectangle(this._fixedCellPoints[i] + x, 0, this._fixedCellPoints[i + span] - this._fixedCellPoints[i], 0);
	        }
	        else if (index >= rfixedCellCount) {
	            var x = this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth;
	            var i = index - rfixedCellCount;
	            r = new Rectangle_1.Rectangle(this._rightCellPoints[i] + x, 0, this._rightCellPoints[i + span] - this._rightCellPoints[i], 0);
	        }
	        else {
	            var x = this._contentBounds.x; //this._fixedCols > 0 ? this._contentBounds.x - this._leftPos : this._contentBounds.x; // fixed Column이 존재하면 _bodyBounds에 _leftPos를 빼지 않는다.
	            var i = index - this._fixedCellCount;
	            r = new Rectangle_1.Rectangle(this._cellPoints[i] + x, 0, this._cellPoints[i + span] - this._cellPoints[i], 0);
	        }
	        r.y = this._contentBounds.y + grid.headerView.getLayoutPos(layout);
	        r.height = grid.headerView.getLayoutHeight(layout, inclueChildren);
	        return r;
	    };
	    GridLayoutManager.prototype.getLayoutRect = function (index) {
	        var rfixedLayout = this.rightFirstLayout;
	        var r;
	        if (index < this._fixedLayoutCount) {
	            var x = this._fixedContentBounds.x;
	            var i = index;
	            r = new Rectangle_1.Rectangle(this._fixedLayoutPoints[i] + x, 0, this._fixedLayoutPoints[i + 1] - this._fixedLayoutPoints[i], 0);
	        }
	        else if (index >= rfixedLayout) {
	            var x = this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth;
	            var i = index - rfixedLayout;
	            r = new Rectangle_1.Rectangle(this._rightLayoutPoints[i] + x, 0, this._rightLayoutPoints[i + 1] - this._rightLayoutPoints[i], 0);
	        }
	        else {
	            var x = this._contentBounds.x; //this._fixedCols > 0 ? this._contentBounds.x - this._leftPos : this._contentBounds.x; // fixed Column이 존재하면 _bodyBounds에 _leftPos를 빼지 않는다.
	            var i = index - this._fixedLayoutCount;
	            r = new Rectangle_1.Rectangle(this._layoutPoints[i] + x, 0, this._layoutPoints[i + 1] - this._layoutPoints[i], 0);
	        }
	        return r;
	    };
	    GridLayoutManager.prototype.getDataLayoutRect = function (layout) {
	        var index = layout.dataRoot.col; //cellIndex;
	        var rfixedLayout = this.cellCount - this.rightCellCount;
	        var r;
	        if (index < this._fixedCellCount) {
	            var x = this._fixedContentBounds.x;
	            var i = index;
	            r = new Rectangle_1.Rectangle(this._fixedCellPoints[i] + x, 0, this._fixedCellPoints[i + 1] - this._fixedCellPoints[i], 0);
	        }
	        else if (index >= rfixedLayout) {
	            var x = this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth;
	            var i = index - rfixedLayout;
	            r = new Rectangle_1.Rectangle(this._rightCellPoints[i] + x, 0, this._rightCellPoints[i + 1] - this._rightCellPoints[i], 0);
	        }
	        else {
	            var x = this._contentBounds.x; //this._fixedCols > 0 ? this._contentBounds.x - this._leftPos : this._contentBounds.x; // fixed Column이 존재하면 _bodyBounds에 _leftPos를 빼지 않는다.
	            var i = index - this._fixedCellCount;
	            r = new Rectangle_1.Rectangle(this._cellPoints[i] + x, 0, this._cellPoints[i + 1] - this._cellPoints[i], 0);
	        }
	        return r;
	    };
	    /*
	    getDataCellBounds(index: CellIndex): Rectangle {
	        const r = this.getItemBounds(index.itemIndex - this._topIndex);
	        const rfixedLayout = this.rightFirstLayout;
	        const col = index.column.layout.root.vindex;

	        if (col < this._fixedLayoutCount) {
	            r.x = this._fixedLayoutPoints[col];
	            r.width = this._fixedLayoutPoints[col + 1] - this._fixedLayoutPoints[col];
	        } else if (col >= rfixedLayout) {
	            const i = col - rfixedLayout;
	            r.x = this._rightLayoutPoints[i];
	            r.width = this._rightLayoutPoints[i + 1] - this._rightLayoutPoints[i];
	        } else {
	            const i = col - this._fixedLayoutCount;
	            r.x = this._layoutPoints[i];
	            r.width = this._layoutPoints[i + 1] - this._layoutPoints[i];
	        }
	        return r;
	    }
	    */
	    GridLayoutManager.prototype.getBodyView = function (index) {
	        var rfixedLayout = this.rightFirstLayout;
	        var layout = index instanceof CellLayout.CellLayoutItem ? index : index.layout;
	        var col = layout.root.vindex;
	        if (col < this._fixedLayoutCount) {
	            return this._grid.fixedBodyView;
	        }
	        else if (col >= rfixedLayout) {
	            return this._grid.rightBodyView;
	        }
	        else {
	            return this._grid.bodyView;
	        }
	    };
	    GridLayoutManager.prototype.mouseToIndex = function (target, x, y, index) {
	        index.set(-1, null);
	        if (this._layoutCount < 1) {
	            return index;
	        }
	        var grid = this.grid;
	        var h = this._summaryBounds.bottom;
	        var r = -1;
	        y -= this._contentBounds.y;
	        if (y >= h && y < this._footerBounds.y) {
	            for (var i = 0; i < this._fixedItemCount; i++) {
	                if (y >= h + this._fixedItemPoints[i] && y < h + this._fixedItemPoints[i + 1]) {
	                    r = i;
	                    y -= h + this._fixedItemPoints[i];
	                    break;
	                }
	            }
	            if (r < 0 && this._itemCount > 0) {
	                for (var i = 0; i < this._itemCount; i++) {
	                    if (y >= h + this._itemPoints[i] && y < h + this._itemPoints[i + 1]) {
	                        r = i;
	                        y -= h + this._itemPoints[i];
	                        break;
	                    }
	                }
	                if (r >= 0) {
	                    r += grid.topItem;
	                }
	            }
	        }
	        else if (y >= this._footerBounds.y) { // footer
	            r = -2;
	        }
	        else if (y < this._headerBounds.y) { // panel
	            r = -3;
	        }
	        index.itemIndex = r;
	        /*
	        let c = -1;
	        const w = this._gridBounds.x;
	        
	        if (x >= w && x <= this._clientRect.width) {
	            x = x - w;
	            
	            for (let i = 0; i < this._fixedLayoutCount; i++) {
	                if (x >= this._fixedLayoutPoints[i] && x < this._fixedLayoutPoints[i + 1]) {
	                    c = i;
	                    x -= this._fixedLayoutPoints[i];
	                    break;
	                }
	            }
	            
	            if (c < 0 && this._rightLayoutCount > 0) {
	                let rx = x - this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth + w;
	                
	                for (let i = 0; i < this._rightLayoutCount; i++) {
	                    if (rx >= this._rightLayoutPoints[i] && rx < this._rightLayoutPoints[i+1]) {
	                        c = i + this.rightFirstLayout;
	                        x = rx -= this._rightLayoutPoints[i];
	                        break;
	                    }
	                }
	            }
	            
	            if (c < 0) {
	                x = x - this._fixedWidth + this._leftPos;
	                
	                for (let i = this._firstLayout; i <= this._lastLayout; i++) {
	                    if (x >= this._layoutPoints[i - this._fixedLayoutCount] && x < this._layoutPoints[i - this._fixedLayoutCount + 1]) {
	                        c = i;
	                        x -= this._layoutPoints[i - this._fixedLayoutCount];
	                        break;
	                    }
	                }
	            }
	        }

	        if (c >= 0 && c < grid.visibleLayoutCount) {
	            index.layout = grid.getVisibleCellLayout(c);
	            
	            // const root = _cast(index.column().root(), ColumnGroup);
	            // if (root) {
	            // 	index.column(root.columnAtPoint(x, y));
	            // }
	        } else {
	            index.layout = null;
	            index.itemIndex = -1;
	        }
	        */
	        if (target) {
	            var td = grid.getCellViewOf(target);
	            var bodyView = td && grid.getBodyView(td);
	            var layout = bodyView instanceof GridBodyElement_1.GridBodyElement && bodyView.layoutByCell(td);
	            if (layout) {
	                index.layout = layout;
	                return index;
	            }
	        }
	        index.layout = null;
	        index.itemIndex = -1;
	        return index;
	    };
	    GridLayoutManager.prototype.mouseToIndexEx = function (target, x, y, index) {
	        if (this._layoutCount < 1) {
	            return index;
	        }
	        var grid = this.grid;
	        var topItem = this._topIndex + this._fixedItemCount;
	        var h = this._summaryBounds.bottom;
	        var r = 0;
	        y -= this._contentBounds.y;
	        if (y < h) {
	            r = -1;
	        }
	        else if (y >= this._bodyBounds.bottom && y < this._footerBounds.y) {
	            r = topItem + this._fullItemCount;
	        }
	        else if (y >= this._footerBounds.y) {
	            r = topItem + this._fullItemCount;
	        }
	        else {
	            r = -1;
	            y -= h;
	            for (var i = 0; i < this._fixedItemCount; i++) {
	                if (y >= this._fixedItemPoints[i] && y < this._fixedItemPoints[i + 1]) {
	                    r = i;
	                    break;
	                }
	            }
	            if (r < 0 && this._itemCount > 0) {
	                for (var i = 0; i < this._itemCount; i++) {
	                    if (y >= this._itemPoints[i] && y < this._itemPoints[i + 1]) {
	                        r = i;
	                        break;
	                    }
	                }
	                if (r >= 0) {
	                    r += topItem;
	                }
	            }
	        }
	        index.itemIndex = r;
	        var c = -1;
	        var w = this._gridBounds.x;
	        if (x < w) {
	            c = Math.max(0, this._firstLayout - 1);
	        }
	        else if (x >= this._bodyBounds.right && x < this._clientRect.right) {
	            c = grid.visibleLayoutCount - 1;
	        }
	        else if (x > this._clientRect.right) {
	            c = Math.min(grid.visibleLayoutCount - 1, this._lastLayout + 1);
	        }
	        else {
	            x = x - w;
	            for (var i = 0; i < this._fixedLayoutCount; i++) {
	                if (x >= this._fixedLayoutPoints[i] && x < this._fixedLayoutPoints[i + 1]) {
	                    c = i;
	                    break;
	                }
	            }
	            if (c < 0 && this._rightLayoutCount > 0) {
	                var rx = x - this._rightContentBounds.x + this._grid.fixedOptions.colBarWidth + w;
	                for (var i = 0; i < this._rightLayoutCount; i++) {
	                    if (rx >= this._rightLayoutPoints[i] && rx < this._rightLayoutPoints[i + 1]) {
	                        c = i + this.rightFirstLayout;
	                        break;
	                    }
	                }
	            }
	            if (c < 0) {
	                x = x - this._fixedWidth + this._leftPos;
	                for (var i = this._firstLayout; i <= this._lastLayout; i++) {
	                    if (x >= this._layoutPoints[i - this._fixedLayoutCount] && x < this._layoutPoints[i - this._fixedLayoutCount + 1]) {
	                        c = i;
	                        break;
	                    }
	                }
	            }
	        }
	        if (c >= 0 && c < grid.visibleLayoutCount) {
	            index.layout = grid.getVisibleCellLayout(c);
	        }
	        else {
	            index.layout = null;
	        }
	        return index;
	    };
	    GridLayoutManager.prototype.cellIsVisible = function (index) {
	        var i = index.itemIndex;
	        var fixed = this._fixedItemCount;
	        if (i >= fixed) {
	            if (i < this._topIndex + fixed) {
	                return false;
	            }
	            if (this._fullItemCount == 0 && i == this._topIndex + fixed) {
	                return true;
	            }
	            if (i >= this._topIndex + fixed + this._fullItemCount) {
	                return false;
	            }
	        }
	        var x;
	        var layout = index.layout;
	        var root = layout; //.root();
	        var c = root.vindex;
	        fixed = this._fixedLayoutCount;
	        if (c >= fixed) {
	            x = this.getLayoutBounds(c - fixed).x;
	            if (x < this._leftPos) {
	                return false;
	            }
	            if (x + index.layout.cellWidth - this._leftPos > this._nonfixedBounds.width - this._scrollBarWidth) {
	                return false;
	            }
	        }
	        return true;
	    };
	    GridLayoutManager.prototype.clearFocusRequest = function () {
	        this._focusIndex = null;
	    };
	    GridLayoutManager.prototype.focusIsVisible = function () {
	        return this._focusIndex && this.cellIsVisible(this._focusIndex);
	    };
	    GridLayoutManager.prototype.makeCellVisible = function (index) {
	        this._focusIndex = index.clone();
	    };
	    GridLayoutManager.prototype.isAutoRowHeights = function () {
	        return this._autoRowHeights;
	    };
	    GridLayoutManager.prototype.isRowGrouped = function () {
	        return this._rowGrouped;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    // private $_calcFixedColumnPoints(grid: GridBase): void {
	    //     const options = grid.fixedOptions;
	    //     const cols = this._columnCount = grid.visibleColumnCount;
	    //     this._fixedColCount = Math.min(options.colCount, cols);
	    //     this._rightColCount = Math.min(options.rightCount, cols - this._fixedColCount);
	    //     this._rightFixed = options.rightFixed;
	    //     this._columns = [];
	    //     this._fixedColumnPoints = [];
	    //     this._fixedWidth = 0;
	    //     if (this._fixedColCount > 0) {
	    //         let pts = this._fixedColumnPoints;
	    //         let x = 0;
	    //         pts.push(x);
	    //         for (let i = 0; i < this._fixedColCount; i++) {
	    //             const column = grid.getVisibleColumn(i);
	    //             this._columns.push(column);
	    //             x += column.width;
	    //             column["_displayIndex"] = i;
	    //             pts.push(x);
	    //         }    
	    //         const w = this._fixedBarWidth = options.colBarWidth;
	    // 		this._fixedWidth = this._fixedColumnPoints[this._fixedColCount] + w;
	    //     }
	    // }
	    // private $_calcColumnPoints(grid: GridBase): void {
	    //     this._columnsLength = 0;
	    //     this._columnPoints = [];
	    //     const cnt = grid.visibleColumnCount - this._fixedColCount - this._rightColCount;
	    // 	if (cnt > 0) {
	    //         let x = 0;
	    //         this._columnPoints.push(x);
	    //         for (let i = 0; i < cnt; i++) {
	    //             let column = grid.getVisibleColumn(i + this._fixedColCount);
	    //             this._columns.push(column);
	    //             x += column.width;
	    //             column["_displayIndex"] = i;
	    //             this._columnPoints.push(x);
	    //         }
	    //         this._columnsLength = x;
	    //     }
	    // }
	    // private $_calcRightColumnPoints(grid: GridBase): void {
	    //     const options = grid.fixedOptions;
	    //     const cols = this._columnCount;
	    //     this._rightColumnPoints = [];
	    //     this._rightWidth = 0;
	    //     if (this._rightColCount > 0) {
	    //         let pts = this._rightColumnPoints;
	    //         let x = 0;
	    //         pts.push(x);
	    //         for (let start = cols - this._rightColCount, i = start; i < cols; i++) {
	    //             const column = grid.getVisibleColumn(i);
	    //             this._columns.push(column);
	    //             x += column.width;
	    //             column["_displayIndex"] = i - start;
	    //             pts.push(x);
	    //         }    
	    //         const w = this._rightBarWidth = options.rightBarWidth;
	    // 		this._rightWidth = this._rightColumnPoints[this._rightColCount] + w;
	    //     }
	    // }
	    GridLayoutManager.prototype.$_calcFixedCellPoints = function (options, cellLayout) {
	        var count = this._layoutCount = cellLayout.visibleCount;
	        var widths = cellLayout["_cellWidths"];
	        this._fixedLayoutCount = Math.min(options.colCount, count);
	        this._rightLayoutCount = Math.min(options.rightCount, count - this._fixedLayoutCount);
	        this._rightFixed = options.rightFixed;
	        this._cellCount = 0;
	        this._fixedCellCount = 0;
	        this._rightCellCount = 0;
	        this._layouts = [];
	        this._fixedLayoutPoints = [];
	        this._fixedWidth = 0;
	        this._rightWidth = 0;
	        this._fixedCellPoints = [];
	        this._firstCell = 0;
	        this._lastCell = 0;
	        if (this._fixedLayoutCount > 0) {
	            var pts = this._fixedLayoutPoints;
	            var cellPts = this._fixedCellPoints;
	            var x = 0;
	            var c = 0;
	            pts.push(x);
	            cellPts.push(x);
	            for (var i = 0; i < this._fixedLayoutCount; i++) {
	                var layout = cellLayout.getVisible(i);
	                var cols = layout.cols;
	                for (var j = 0; j < cols; j++) {
	                    x += widths[c++];
	                    cellPts.push(x);
	                }
	                this._layouts.push(layout);
	                pts.push(x);
	            }
	            this._fixedCellCount = this._cellCount = c;
	            var w = this._fixedBarWidth = options.colBarWidth;
	            this._fixedWidth = pts[this._fixedLayoutCount] + w;
	        }
	    };
	    GridLayoutManager.prototype.$_calcCellPoints = function (cellLayout) {
	        var cnt = cellLayout.visibleCount - this._fixedLayoutCount - this._rightLayoutCount;
	        var widths = cellLayout["_cellWidths"];
	        var pts = this._layoutPoints = [];
	        var cellPts = this._cellPoints = [];
	        var nFixed = this._fixedLayoutCount;
	        var layouts = this._layouts;
	        this._firstCell = this._cellCount;
	        this._layoutsLength = 0;
	        if (cnt > 0) {
	            var x = 0;
	            var c = this._cellCount;
	            pts.push(x);
	            cellPts.push(x);
	            for (var i = 0; i < cnt; i++) {
	                var layout = cellLayout.getVisible(i + nFixed);
	                var cols = layout.cols;
	                for (var j = 0; j < cols; j++) {
	                    x += widths[c++];
	                    cellPts.push(x);
	                }
	                layouts.push(layout);
	                pts.push(x);
	            }
	            this._layoutsLength = x;
	            this._cellCount = c;
	            this._lastCell = c - 1;
	        }
	    };
	    GridLayoutManager.prototype.$_calcRightCellPoints = function (options, cellLayout) {
	        var widths = cellLayout["_cellWidths"];
	        var cols = this._layoutCount;
	        var pts = this._rightLayoutPoints = [];
	        var cellPts = this._rightCellPoints = [];
	        var layouts = this._layouts;
	        if (this._rightLayoutCount > 0) {
	            var x = 0;
	            var c = this._cellCount;
	            pts.push(x);
	            cellPts.push(x);
	            for (var start = cols - this._rightLayoutCount, i = start; i < cols; i++) {
	                var layout = cellLayout.getVisible(i);
	                var cols_1 = layout.cols;
	                for (var j = 0; j < cols_1; j++) {
	                    x += widths[c++];
	                    cellPts.push(x);
	                }
	                layouts.push(layout);
	                pts.push(x);
	            }
	            this._rightCellCount = c - this._cellCount;
	            this._cellCount = c;
	            var w = this._rightBarWidth = options.rightBarWidth;
	            this._rightWidth = pts[this._rightLayoutCount] + w;
	        }
	    };
	    GridLayoutManager.prototype.$_calcScrollWidth = function (bounds, sw) {
	        this._scrollWidth = bounds.width - this._leftContentBounds.width - this._sideContentBounds.width - this._fixedContentBounds.width - this._rightContentBounds.width - sw;
	    };
	    // private $_calcLeftPos_save(bounds: Rectangle, sw: number): void {
	    //     this.$_calcScrollWidth(bounds, sw);
	    //     let column: GridColumn;
	    // 	if (this._focusIndex && (column = this._focusIndex.column)) {
	    //         const root = column;//.root();
	    //         const i = root.displayIndex;
	    //         if (i >= this._fixedColCount && i < this.rightFirstCol) {
	    //             let x = this._columnPoints[i - this._fixedColCount];
	    //             // while (column != root) {
	    //             //     x += column.displayOffset();
	    //             //     column = column.parent();
	    //             // }
	    //             if (x < this._leftPos) {
	    //                 this._leftPos = x;
	    //             } else {
	    //                 //const dx = x + this._focusIndex.column.displayWidth() - this._leftPos - this._nonfixedBounds.width;
	    //                 const dx = x + this._focusIndex.column.width - this._leftPos - this._scrollWidth;// this._nonfixedBounds.width + sw;
	    //                 if (dx > 0) {
	    //                     this._leftPos = Math.min(x, this._leftPos + dx);
	    //                 }
	    //             }
	    //         }
	    // 	}
	    //     this._leftPos = Math.max(0, Math.min(this._leftPos, this._columnsLength - this._scrollWidth));
	    //     this._firstCol = this._fixedColCount;
	    //     this._lastCol = this._columnCount > 0 ? (this._columnCount - this._rightColCount - 1) : -1;
	    // }
	    GridLayoutManager.prototype.$_calcLeftPos = function (bounds, sw) {
	        this.$_calcScrollWidth(bounds, sw);
	        var column = this._focusIndex && this._focusIndex.column;
	        if (column) {
	            var layout = column.layout;
	            var root = layout.root;
	            var i = root.vindex;
	            if (i >= this._fixedLayoutCount && i < this.rightFirstLayout) {
	                var x = this._layoutPoints[i - this._fixedLayoutCount];
	                // while (column != root) {
	                //     x += column.displayOffset();
	                //     column = column.parent();
	                // }
	                if (x < this._leftPos) {
	                    this._leftPos = x;
	                }
	                else {
	                    //const dx = x + this._focusIndex.column.displayWidth() - this._leftPos - this._nonfixedBounds.width;
	                    var dx = x + layout.width - this._leftPos - this._scrollWidth; // this._nonfixedBounds.width + sw;
	                    if (dx > 0) {
	                        this._leftPos = Math.min(x, this._leftPos + dx);
	                    }
	                }
	            }
	        }
	        this._leftPos = Math.max(0, Math.min(this._leftPos, this._layoutsLength - this._scrollWidth));
	        this._firstLayout = this._fixedLayoutCount;
	        this._lastLayout = this._layoutCount > 0 ? (this._layoutCount - this._rightLayoutCount - 1) : -1;
	    };
	    GridLayoutManager.prototype.$_checkFitting = function (options, w) {
	        var fs = options.fitStyle;
	        if (fs != Types.GridFitStyle.NONE) {
	            var pts = this._cellPoints;
	            var cnt = pts.length;
	            if (cnt > 0) {
	                if (fs == Types.GridFitStyle.EVEN_FILL) {
	                    for (var i = 1, len = this._layoutsLength; i < cnt; i++) {
	                        pts[i] = pts[i] * w / len;
	                    }
	                    pts[cnt - 1] = w;
	                    this._layoutsLength = w;
	                    return true;
	                }
	                else {
	                    return w - pts[cnt - 1] > 0;
	                }
	            }
	        }
	        return false;
	    };
	    GridLayoutManager.prototype.$_fitColumns = function (options, cellLayout, w) {
	        var cw = this._layoutsLength;
	        var pts = this._cellPoints;
	        var cnt = pts.length;
	        var nFixed = this._fixedCellCount;
	        if (cnt > 0) {
	            var fs = options.fitStyle;
	            var widths = cellLayout["_cellWidths"];
	            var layouts = this._layouts;
	            if (fs == Types.GridFitStyle.EVEN || fs == Types.GridFitStyle.EVEN_FILL) {
	                for (var i = 1; i < cnt; i++) {
	                    pts[i] = Math.floor(pts[i] * w / cw);
	                }
	            }
	            else if (fs == Types.GridFitStyle.FILL) {
	                var sum = 0;
	                var fsum = 0;
	                for (var i = 0; i < cnt - 1; i++) {
	                    var dx = layouts[i + nFixed].fillWidth;
	                    if (dx > 0) {
	                        fsum += dx;
	                    }
	                    else {
	                        sum += widths[i + nFixed];
	                    }
	                }
	                if (fsum > 0) {
	                    sum = w - sum;
	                    for (var i = 1; i < cnt; i++) {
	                        var layout = layouts[i - 1 + nFixed];
	                        var fw = layout.fillWidth;
	                        if (fw > 0) {
	                            pts[i] = Math.floor(pts[i - 1] + fw * sum / fsum);
	                        }
	                        else {
	                            pts[i] = Math.floor(pts[i - 1] + widths[i - 1 + nFixed]);
	                        }
	                    }
	                }
	                else {
	                    for (var i = 1; i < cnt; i++) {
	                        pts[i] = Math.floor(pts[i] * w / cw);
	                    }
	                }
	            }
	            //columnPoints[i]의 값이 컬럼 최소넓이 보다 작을 때 이를 교정하기 위한 로직
	            var wmin = 2;
	            var correction = 0;
	            for (var i = 1; i < cnt - 1; i++) {
	                var colw = pts[i] - pts[i - 1];
	                if (colw < wmin) {
	                    correction = wmin - colw;
	                    pts[i] += wmin - colw;
	                }
	                else if (correction > 0 && colw > wmin + correction) {
	                    pts[i] -= correction;
	                    correction = 0;
	                }
	            }
	            for (var i = 0; i < cnt - 1; i++) {
	                var layout = this._layouts[nFixed + i];
	                layout["$_setFitWidth"](pts[i + 1] - pts[i]);
	            }
	        }
	        this._layoutsLength = pts[cnt - 1] = w;
	    };
	    GridLayoutManager.prototype.$_measureTopPane = function (grid) {
	        this._doMeasureTopPane(grid, this._topContentBounds);
	    };
	    GridLayoutManager.prototype._doMeasureTopPane = function (grid, bounds) {
	        bounds.height = 0;
	    };
	    GridLayoutManager.prototype.$_measureViewHeights = function (grid, r) {
	        var view;
	        var sz;
	        // header
	        this._headerBounds = r.clone();
	        if (grid.header.visible) {
	            view = grid.headerView;
	            sz = view.measure(grid, r.width, r.height);
	        }
	        else {
	            sz = Size_1.Size.EMPTY;
	        }
	        this._headerBounds.height = sz.height;
	        this._fixedHeaderBounds = this._headerBounds.clone();
	        this._rightHeaderBounds = this._headerBounds.clone();
	        // head
	        this._headBounds.y = r.y;
	        this._headBounds.height = this._headerBounds.height;
	        r.topBy(sz.height);
	        // summary
	        sz = Size_1.Size.EMPTY;
	        if (grid.headerSummaries.visible) {
	            this._summaryBounds = r.clone();
	            view = grid.headerSummaryView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            view = grid.fixedHeaderSummaryView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            view = grid.rightHeaderSummaryView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            this._summaryBounds.height = sz.height;
	            this._fixedSummaryBounds = this._summaryBounds.clone();
	            this._rightSummaryBounds = this._summaryBounds.clone();
	        }
	        else {
	            if (!this._summaryBounds)
	                this._summaryBounds = new Rectangle_1.Rectangle();
	            if (!this._fixedSummaryBounds)
	                this._fixedSummaryBounds = new Rectangle_1.Rectangle();
	            if (!this._rightSummaryBounds)
	                this._rightSummaryBounds = new Rectangle_1.Rectangle();
	        }
	        // sum
	        this._sumBounds.y = r.y;
	        this._sumBounds.height = this._summaryBounds.height;
	        r.topBy(sz.height);
	        // footer
	        sz = Size_1.Size.EMPTY;
	        if (grid.footers.visible) {
	            this._footerBounds = r.clone();
	            view = grid.footerView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            view = grid.fixedFooterView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            view = grid.rightFooterView;
	            if (view.visible) {
	                sz = view.measure(grid, r.width, r.height);
	            }
	            this._footerBounds.height = sz.height;
	            this._fixedFooterBounds = this._footerBounds.clone();
	            this._rightFooterBounds = this._footerBounds.clone();
	        }
	        else {
	            if (!this._footerBounds)
	                this._footerBounds = new Rectangle_1.Rectangle();
	            if (!this._fixedFooterBounds)
	                this._fixedFooterBounds = new Rectangle_1.Rectangle();
	            if (!this._rightFooterBounds)
	                this._rightFooterBounds = new Rectangle_1.Rectangle();
	        }
	        // foot
	        this._footBounds.y = r.bottom - this._footerBounds.height;
	        this._footBounds.height = this._footerBounds.height;
	        // left views
	        var y = this._sumBounds.bottom;
	        var h = this._footBounds.y - y;
	        this._indicatorBounds.y = y;
	        this._indicatorBounds.height = h;
	        this._stateBarBounds.y = y;
	        this._stateBarBounds.height = h;
	        this._checkBarBounds.y = y;
	        this._checkBarBounds.height = h;
	    };
	    GridLayoutManager.prototype.$_sortSections = function (grid) {
	        var objs = [grid.rowIndicator, grid.stateBar, grid.checkBar];
	        objs.sort(function (obj1, obj2) {
	            var i1 = obj1.displayOrder;
	            var i2 = obj2.displayOrder;
	            return i1 == i2 ? (obj1["staticOrder"] - obj2["staticOrder"]) : i1 - i2;
	        });
	        return objs;
	    };
	    Object.defineProperty(GridLayoutManager.prototype, "sectionObjects", {
	        get: function () {
	            return this._sectionObjects;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridLayoutManager.prototype.$_measureLeftPane = function (grid) {
	        var objs = this._sectionObjects = this.$_sortSections(grid);
	        var r = this._leftContentBounds.clone().move();
	        var view;
	        var sz;
	        this._leftContentBounds.width = 0;
	        // head
	        this._headBounds = r.clone();
	        //this._headBounds.height = this._headerBounds.height;
	        //r.topBy(this._headBounds.height);
	        // sum
	        this._sumBounds = r.clone();
	        //this._sumBounds.height = this._summaryBounds.height;
	        //r.topBy(this._sumBounds.height);
	        // foot
	        this._footBounds = r.clone();
	        //this._footBounds.height = this._footerBounds.height;
	        //this._footBounds.y = r.bottom - this._footBounds.height;
	        //r.bottomBy(-this._footBounds.height);
	        for (var _i = 0, objs_1 = objs; _i < objs_1.length; _i++) {
	            var obj = objs_1[_i];
	            if (obj instanceof RowIndicator_1.RowIndicator) {
	                // rowIndicator
	                this._indicatorBounds = r.clone();
	                if (grid.rowIndicator.visible) {
	                    view = grid.rowIndicatorView;
	                    sz = view.measure(grid, r.width, r.height);
	                }
	                else {
	                    sz = Size_1.Size.EMPTY;
	                }
	                this._indicatorBounds.width = sz.width;
	                this._leftContentBounds.width += sz.width;
	                r.leftBy(sz.width);
	            }
	            else if (obj instanceof StateBar_1.StateBar) {
	                // stateBar
	                this._stateBarBounds = r.clone();
	                if (grid.stateBar.visible) {
	                    view = grid.stateBarView;
	                    sz = view.measure(grid, r.width, r.height);
	                }
	                else {
	                    sz = Size_1.Size.EMPTY;
	                }
	                this._stateBarBounds.width = sz.width;
	                this._leftContentBounds.width += sz.width;
	                r.leftBy(sz.width);
	            }
	            else if (obj instanceof CheckBar_1.CheckBar) {
	                // checkBar
	                this._checkBarBounds = r.clone();
	                if (grid.checkBar.visible) {
	                    view = grid.checkBarView;
	                    sz = view.measure(grid, r.width, r.height);
	                }
	                else {
	                    sz = Size_1.Size.EMPTY;
	                }
	                this._checkBarBounds.width = sz.width;
	                this._leftContentBounds.width += sz.width;
	                r.leftBy(sz.width);
	            }
	        }
	        // content bounds
	        this._headBounds.width = this._leftContentBounds.width;
	        this._sumBounds.width = this._leftContentBounds.width;
	        this._footBounds.width = this._leftContentBounds.width;
	    };
	    GridLayoutManager.prototype._measureSidePane = function (grid) {
	        if (grid.isSidePaneVisible()) {
	            var r = this._sideContentBounds.clone();
	            var view = grid.sideContentPane;
	            var sz = view.measure(grid, r.width, r.height);
	            this._sideContentBounds.width = sz.width;
	        }
	        else {
	            this._sideContentBounds.width = 0;
	        }
	    };
	    GridLayoutManager.prototype.$_measureFixedPane = function (grid) {
	        var w = this._fixedContentBounds.width = this._fixedWidth;
	        var r = this._fixedContentBounds.clone().move();
	        // header
	        this._fixedHeaderBounds.x = r.x;
	        this._fixedHeaderBounds.y = r.y;
	        this._fixedHeaderBounds.width = r.width;
	        r.topBy(this._fixedHeaderBounds.height);
	        // summary
	        this._fixedSummaryBounds.x = r.x;
	        this._fixedSummaryBounds.y = this._fixedHeaderBounds.bottom;
	        this._fixedSummaryBounds.width = r.width;
	        r.topBy(this._fixedSummaryBounds.height);
	        // footer
	        this._fixedFooterBounds.x = r.x;
	        this._fixedFooterBounds.y = r.bottom - this._fixedFooterBounds.height;
	        this._fixedFooterBounds.width = r.width;
	        r.bottomBy(-this._fixedFooterBounds.height);
	        // body
	        this._fixedBodyBounds = r;
	    };
	    GridLayoutManager.prototype.$_measureRightPane = function (grid) {
	        var w = this._rightWidth;
	        this._rightContentBounds.width = w;
	        var r = this._rightContentBounds.clone();
	        r.x = this._rightBarWidth;
	        r.y = 0;
	        r.width -= r.x;
	        // header
	        this._rightHeaderBounds.x = r.x;
	        this._rightHeaderBounds.y = r.y;
	        this._rightHeaderBounds.width = r.width;
	        r.topBy(this._rightHeaderBounds.height);
	        // summary
	        this._rightSummaryBounds.x = r.x;
	        this._rightSummaryBounds.y = this._rightHeaderBounds.bottom;
	        this._rightSummaryBounds.width = r.width;
	        r.topBy(this._rightSummaryBounds.height);
	        // footer
	        this._rightFooterBounds.x = r.x;
	        this._rightFooterBounds.y = r.bottom - this._rightFooterBounds.height;
	        this._rightFooterBounds.width = r.width;
	        r.bottomBy(-this._rightFooterBounds.height);
	        // body
	        this._rightBodyBounds = r;
	    };
	    GridLayoutManager.prototype.$_measureContentPane = function (grid) {
	        var w = this._layoutsLength;
	        this._contentBounds.width = w;
	        var r = this._contentBounds.clone();
	        r.x = r.y = 0;
	        // header
	        if (this._headerBounds) {
	            this._headerBounds.x = r.x;
	            this._headerBounds.y = r.y;
	            this._headerBounds.width = r.width;
	            r.topBy(this._headerBounds.height);
	        }
	        // summary
	        if (this._summaryBounds) {
	            this._summaryBounds.x = r.x;
	            this._summaryBounds.y = this._headerBounds.bottom;
	            this._summaryBounds.width = r.width;
	            r.topBy(this._summaryBounds.height);
	        }
	        this._dataBounds = r.clone();
	        // footer
	        if (this._footerBounds) {
	            this._footerBounds.x = r.x;
	            this._footerBounds.y = r.bottom - this._footerBounds.height;
	            this._footerBounds.width = r.width;
	            r.bottomBy(-this._footerBounds.height);
	        }
	        // body
	        this._bodyBounds = r;
	    };
	    GridLayoutManager.prototype.$_calcItemHeight = function (grid, index) {
	        var item = grid.getItem(index);
	        var h = item.height;
	        if (!isNaN(h)) {
	            return h;
	        }
	        else {
	            return this._calcRowHeight();
	        }
	    };
	    GridLayoutManager.prototype.$_calcItemPoints = function (bounds) {
	        var grid = this.grid;
	        var rs = grid.itemSource;
	        // TODO +1 을 보정. rowHeight*layoutManager.itemCount가 bodyBounds.height와 동일한 경우 vScrollBar를 못 그림.
	        var height = bounds.height - this._topContentBounds.height
	            - this._headerBounds.height - this._summaryBounds.height - this._footBounds.height + 1;
	        var y = 0;
	        this._compensated = 0;
	        var fixedRows = rs ? Math.min(rs.fixedCount, rs.itemCount) : 0;
	        this._fixedItemCount = 0;
	        this._fixedBarHeight = 0;
	        this._fixedHeight = 0;
	        this._fixedItemPoints = [];
	        if (fixedRows > 0) {
	            this._fixedItemPoints.push(y);
	            for (var i = 0; i < fixedRows && y < height; i++) {
	                var h = this.$_calcItemHeight(grid, i);
	                y += h;
	                this._fixedItemPoints.push(y);
	                this._fixedItemCount++;
	            }
	            this._fixedHeight = y;
	            y += this._fixedBarHeight = grid.fixedOptions.rowBarHeight;
	        }
	        var cnt = grid.itemCount - this._fixedItemCount;
	        this._itemPoints = [y];
	        this._itemCount = 0;
	        this._fullItemCount = 0;
	        this._availableItemCount = 0;
	        if (cnt > 0 && y < height) {
	            var top_1 = this._topIndex;
	            var focusIndex = -1;
	            if (this._focusIndex) {
	                focusIndex = this._focusIndex.itemIndex;
	                if (focusIndex >= this._fixedItemCount && focusIndex < top_1 + this._fixedItemCount) {
	                    top_1 = this._topIndex = focusIndex - this._fixedItemCount;
	                }
	            }
	            for (var i = top_1; i < cnt && y < height; i++) {
	                var h = this.$_calcItemHeight(grid, i + this._fixedItemCount);
	                y += h;
	                this._itemCount++;
	                this._itemPoints.push(y);
	            }
	            this._fullItemCount = this._itemCount - (y > height ? 1 : 0);
	            if (focusIndex >= this._topIndex + this._fixedItemCount + this._fullItemCount) {
	                if (this.fixedItemCount > 0) {
	                    y = this._fixedHeight + grid.fixedOptions.rowBarHeight;
	                }
	                else {
	                    y = 0;
	                }
	                // if (eachRowResizable) {
	                //     h = this.$_calcItemHeight(grid, delegate, focusIndex);
	                //     if (h >= bounds.height - this._fixedHeight) {
	                //         this._topIndex = focusIndex - this._fixedItemCount;
	                //     } else {
	                //         for (i=focusIndex-1;i >= this._fixedItemCount ;i--) {
	                //             h += this.$_calcItemHeight(grid, delegate, i);
	                //             if (h >= bounds.height - y) {
	                //                 this._topIndex = Math.max(i-this._fixedItemCount+1,0);
	                //                 break;
	                //             }
	                //         }
	                //     }
	                // } else {
	                this._topIndex = focusIndex - this._fixedItemCount - Math.max(0, this._fullItemCount - 1); // fullItemCount가 0일 수 있다.
	                // }
	                this._itemPoints = [y];
	                this._itemCount = 0;
	                this._fullItemCount = 0;
	                this._availableItemCount = 0;
	                var cnt_1 = grid.itemCount - this._fixedItemCount;
	                // TODO 개선사항 스크롤되었을때 변경되는 부분만 재계산필요.
	                for (var i = this._topIndex; i < cnt_1 && y < height; i++) {
	                    var h = this.$_calcItemHeight(grid, i + this._fixedItemCount);
	                    y += h;
	                    this._itemCount++;
	                    this._itemPoints.push(y);
	                }
	                this._fullItemCount = this._itemCount - (y >= height ? 1 : 0);
	            }
	        }
	        else {
	            this._topIndex = 0;
	        }
	    };
	    GridLayoutManager.prototype.$_updateScrollInfo = function (options, bounds, sw, sh) {
	        var w = this._layoutsLength;
	        var h = this._itemPoints[this._itemPoints.length - 1];
	        var fitted = options.fitStyle == Types.GridFitStyle.EVEN_FILL;
	        this._hscrolled = w > this._scrollWidth;
	        this._vscrolled = this._topIndex > 0 || h > this._bodyBounds.height || this._topIndex + this._itemCount + this._fixedItemCount < this.grid.itemCount;
	        var hbar = sh > 0 && this._hscrolled && !fitted;
	        var vbar = sw > 0 && this._vscrolled;
	        if (!hbar && !vbar) ;
	        else if (hbar && vbar) ;
	        else if (hbar) {
	            // TODO: vbar가 true가 되는 경우
	            vbar = h > this._bodyBounds.height - sh;
	        }
	        else if (!fitted) { // if (vbar)
	            // TODO: hbar가 true가 되는 경우
	            hbar = w > this._scrollWidth - sw;
	        }
	        this._hscrollBar = hbar;
	        this._vscrollBar = vbar;
	        this._scrollBarWidth = vbar ? sw : 0;
	        this._scrollBarHeight = hbar ? sh : 0;
	        this._hscrolled = this._hscrolled || hbar;
	        this._vscrolled = this._vscrolled || vbar;
	        this._clientRect = bounds.clone();
	        this._clientRect.width -= this._hscrolled ? sw : 0;
	        this._clientRect.height -= this._vscrolled ? sh : 0;
	        // this._gridBounds.right = this._clientRect.right;
	        // this._gridBounds.bottom = this._footerBounds.y;
	    };
	    GridLayoutManager.prototype.$_adjustVerticals = function () {
	        var h = this._scrollBarHeight;
	        var pts = this._itemPoints;
	        if (h > 0) {
	            // left pane
	            this._leftContentBounds.height -= h;
	            this._footBounds.y -= h;
	            this._indicatorBounds.height -= h;
	            this._stateBarBounds.height -= h;
	            this._checkBarBounds.height -= h;
	            // side pane
	            this._sideContentBounds.height -= h;
	            // fixed pane
	            this._fixedContentBounds.height -= h;
	            this._fixedFooterBounds.y -= h;
	            this._fixedBodyBounds.height -= h;
	            // content pane
	            this._contentBounds.height -= h;
	            this._footerBounds.y -= h;
	            this._bodyBounds.height -= h;
	            // right pane
	            this._rightContentBounds.height -= h;
	            this._rightFooterBounds.y -= h;
	            this._rightBodyBounds.height -= h;
	            // adjust rows
	            var h2 = this._bodyBounds.height;
	            while (pts[pts.length - 2] > h2) {
	                this._itemCount--;
	                pts.pop();
	            }
	            if (this._compensated > 0) {
	                while (this._itemCount > 0 && pts[pts.length - 1] > h2) {
	                    this._itemCount--;
	                    this._topIndex++;
	                    pts.splice(0, 1);
	                    var h_1 = pts[1] - pts[0];
	                    for (var i = 0; i < pts.length; i++) {
	                        pts[i] -= h_1;
	                    }
	                }
	            }
	            this._fullItemCount = this._itemCount - (pts[this._itemCount] >= h2 ? 1 : 0);
	            var focusIndex = this._focusIndex ? this._focusIndex.itemIndex : -1;
	            if (focusIndex >= 0 && this._itemCount > this._fullItemCount) {
	                if (focusIndex >= this._topIndex + this._fixedItemCount + this._fullItemCount) {
	                    var hLast = pts[this._itemCount] - pts[this._itemCount - 1];
	                    var h_2 = 0;
	                    var n = 0;
	                    while (h_2 < hLast) {
	                        h_2 += pts[n + 1] - pts[n];
	                        n++;
	                    }
	                    this._topIndex += n;
	                    this._itemCount -= n - 1;
	                    this._fullItemCount -= n - 1;
	                    // 마지막행이면
	                    if (this._topIndex + this._fixedItemCount + this._itemCount > this.grid.itemCount) {
	                        this._itemCount--;
	                        // n++
	                    }
	                    pts.splice(0, n - 1);
	                    for (var i = 0; i < pts.length; i++) {
	                        pts[i] -= h_2;
	                    }
	                }
	            }
	        }
	        this._dataBounds.height = pts[pts.length - 1];
	        if (this._fullItemCount == this._itemCount) {
	            var y = pts[pts.length - 1];
	            this._indicatorBounds.height = y;
	            this._stateBarBounds.height = y;
	            this._checkBarBounds.height = y;
	        }
	    };
	    GridLayoutManager.prototype.$_adjustHorizontals = function (bounds) {
	        var w = this._scrollBarWidth;
	        //if (w > 0) {
	        this._rightContentBounds.x -= w;
	        this.$_calcLeftPos(bounds, w);
	        //}
	        // Fixed/Right를 제외한 표시 시작, 끝 셀 계산.
	        var pts = this._cellPoints;
	        var cnt = pts.length;
	        var x1 = this._leftPos;
	        var x2 = x1 + this._nonfixedBounds.width;
	        this._startCell = this._endCell = this._firstCell;
	        for (var i = 0; i < cnt; i++) {
	            if (pts[i] >= x1) {
	                this._startCell += i;
	                break;
	            }
	        }
	        for (var i = cnt - 1; i >= 0; i--) {
	            if (pts[i] <= x2) {
	                this._endCell += i - 1;
	                break;
	            }
	        }
	    };
	    GridLayoutManager.prototype.$_calcTableRowPoints = function () {
	        var trs = this._trs;
	        var items = this._items;
	        var nFixed = this._fixedItemCount;
	        var nItem = this._itemCount + nFixed;
	        var fixedPts = this._fixedTableRowPoints = [];
	        var pts = this._tableRowPoints = [];
	        var r = 0;
	        this._fixedTableRowCount = this._tableRowCount = 0;
	        this._fixedDataHeight = this._dataHeight = 0;
	        if (nFixed > 0) {
	            for (; r < nFixed; r++) {
	                var y = this._fixedItemPoints[r];
	                fixedPts.push(y);
	                this._fixedTableRowCount++;
	                if (items[r].isData) {
	                    var h = Math.floor((this._fixedItemPoints[r + 1] - y) / trs);
	                    for (var i = 1; i < trs; i++) {
	                        fixedPts.push(y += h);
	                        this._fixedTableRowCount++;
	                    }
	                }
	            }
	            fixedPts.push(this._fixedDataHeight = this._fixedItemPoints[nFixed]);
	        }
	        if (this.itemCount > 0) {
	            for (; r < nItem; r++) {
	                var y = this._itemPoints[r - nFixed];
	                var h = this._itemPoints[r - nFixed + 1] - y;
	                pts.push(y);
	                this._tableRowCount++;
	                if (items[r].isData) {
	                    h = Math.floor(h / trs);
	                    for (var i = 1; i < trs; i++) {
	                        pts.push(y += h);
	                        this._tableRowCount++;
	                    }
	                }
	            }
	            pts.push(this._dataHeight = this._itemPoints[this._itemCount]);
	            this._dataHeight += this._fixedDataHeight;
	        }
	    };
	    GridLayoutManager.prototype._doMeasure = function (bounds, scrollBarWidth, scrollBarHeight) {
	        var grid = this._grid;
	        var options = grid.displayOptions;
	        var fixedOptions = grid.fixedOptions;
	        var r = bounds.clone();
	        this._refreshMode = options.refreshMode;
	        this._autoRowHeights = options.rowHeight < 0;
	        this._items = [];
	        this._trs = this._cellLayouts.dataRows;
	        this._rowGrouped = this.rowGrouped || this.mergedRowGrouped;
	        this._hscrolled = this._vscrolled = false;
	        this._hscrollBar = this._vscrollBar = false;
	        // prepare default heights
	        this._minRowHeight = Math.max(DisplayOptions_1.DisplayOptions.MIN_ROW_HEIGHT, grid.displayOptions.minRowHeight);
	        grid.heightMeasurer.measure(grid);
	        // columns
	        this.$_calcFixedCellPoints(fixedOptions, this._cellLayouts);
	        this.$_calcCellPoints(this._cellLayouts);
	        this.$_calcRightCellPoints(fixedOptions, this._cellLayouts);
	        // top pane
	        this._topContentBounds = r.clone();
	        this.$_measureTopPane(grid);
	        r.topBy(this.topPanelVisible ? this._topContentBounds.height : 0);
	        // left pane
	        this._leftContentBounds = r.clone();
	        this.$_measureLeftPane(grid);
	        r.leftBy(this._leftContentBounds.width);
	        // side pane
	        this._sideContentBounds = r.clone();
	        this._measureSidePane(grid);
	        r.leftBy(this._sideContentBounds.width);
	        // views' heights
	        this.$_measureViewHeights(grid, r.clone().move());
	        // fixed pane
	        this._fixedContentBounds = r.clone();
	        this.$_measureFixedPane(grid);
	        r.leftBy(this._fixedContentBounds.width);
	        // right pane
	        this._rightContentBounds = r.clone();
	        this.$_measureRightPane(grid);
	        this._rightContentBounds.x = r.right - this._rightContentBounds.width;
	        r.width -= this._rightContentBounds.width;
	        // content pane
	        this._contentBounds = r.clone();
	        this.$_measureContentPane(grid);
	        this._nonfixedBounds = new Rectangle_1.Rectangle(this._fixedContentBounds.right, this._fixedContentBounds.y, bounds.width - this._fixedContentBounds.right - this.rightContentBounds.width, this._footerBounds.y - this._fixedContentBounds.y);
	        this._rowHeight = this._calcDefaultRowHeight(grid);
	        this.$_calcItemPoints(bounds);
	        this.$_checkColumnMerging(grid);
	        this.$_calcScrollWidth(bounds, scrollBarWidth);
	        this.$_updateScrollInfo(options, bounds, scrollBarWidth, scrollBarHeight);
	        this.$_adjustVerticals();
	        this.$_adjustHorizontals(bounds);
	        var oldFitted = this._columnFitted;
	        if (this._columnFitted = this.$_checkFitting(options, this._scrollWidth)) {
	            this.$_fitColumns(options, this.cellLayouts, this.scrollWidth);
	            this._contentBounds.width = this._layoutsLength;
	        }
	        else if (this._columnFitted != oldFitted) {
	            grid["_activeCellLayout"]["$_clearFitWidths"]();
	        }
	        this._gridBounds = new Rectangle_1.Rectangle(this._fixedContentBounds.x, this._fixedContentBounds.y, bounds.right - this._fixedContentBounds.x, this._footerBounds.y - 0); //this._fixedContentBounds.y);
	    };
	    GridLayoutManager.prototype.$_layoutTopPane = function (grid, pane) {
	        var r = this._topContentBounds;
	        if (this.topPanelVisible) {
	            pane.setRect(r);
	        }
	        else {
	            pane.setBounds(-10, -10, 1, 1);
	        }
	        this._doLayoutTopPane(grid, pane);
	    };
	    GridLayoutManager.prototype._doLayoutTopPane = function (grid, pane) {
	    };
	    GridLayoutManager.prototype.$_layoutLeftPane = function (grid, pane) {
	        var r = this._leftContentBounds;
	        var view;
	        if (pane.visible = !r.isEmpty) {
	            pane.setRect(r);
	            view = grid.headView;
	            if (view.visible = grid.header.visible) ;
	            view = grid.sumView;
	            if (view.visible = grid.headerSummaries.visible) {
	                view.setRect(this._sumBounds);
	                view.layoutContent(this);
	            }
	            view = grid.footView;
	            if (view.visible = grid.footers.visible) {
	                view.setRect(this._footBounds);
	                view.layoutContent(this);
	            }
	            view = grid.rowIndicatorView;
	            if (view.visible = grid.rowIndicator.visible) ;
	            view = grid.stateBarView;
	            if (view.visible = grid.stateBar.visible) ;
	            view = grid.checkBarView;
	            if (view.visible = grid.checkBar.visible) ;
	        }
	    };
	    GridLayoutManager.prototype._layoutSidePane = function (grid, pane) {
	        var r = this._sideContentBounds;
	        if (pane.visible = !r.isEmpty) {
	            pane.setRect(r);
	            pane.layoutContent(this, r.width, r.height);
	        }
	    };
	    GridLayoutManager.prototype._prepareItems = function ( /*parent: GridBodyElement, r: Rectangle*/) {
	        var top = this._topIndex + this._fixedItemCount;
	        for (var i = 0; i < this._fixedItemCount; i++) {
	            var item = this._rs.getItem(i);
	            this._items.push(item);
	        }
	        for (var i = 0; i < this._itemCount; i++) {
	            var item = this._rs.getItem(i + top);
	            this._items.push(item);
	        }
	    };
	    GridLayoutManager.prototype.$_layoutFixedPane = function (grid, pane) {
	        var r = this._fixedContentBounds;
	        var view;
	        if (pane.visible = !r.isEmpty) {
	            pane.setRect(r);
	            // header
	            view = grid.fixedHeaderView;
	            if (view.visible = grid.header.visible) {
	                view.setRect(this._fixedHeaderBounds);
	                view.layoutContent(this);
	            }
	            // summary
	            view = grid.fixedHeaderSummaryView;
	            if (view.visible = grid.headerSummaries.visible) {
	                view.setRect(this._fixedSummaryBounds);
	                view.layoutContent(this);
	            }
	            // footer
	            view = grid.fixedFooterView;
	            if (view.visible = grid.footers.visible) {
	                view.setRect(this._fixedFooterBounds);
	                view.layoutContent(this);
	            }
	            // body
	            view = grid.fixedBodyView;
	            view.visible = true;
	            // view.setRect(this._fixedBodyBounds);
	            // /*!this._autoRowHeights &&*/ view.layoutContent(this);
	            // // merge view
	            // view = grid.fixedMergeView;
	            // if (view.visible = this._fixedColumnMerged) {
	            //     // 굳이 크기를 맞출 필요 없다...
	            //     //view.setRect(this._fixedBodyBounds);
	            //     view.layoutContent(this);
	            // }
	            pane.layoutContent(this, r.width, r.height);
	        }
	        else {
	            grid.fixedHeaderView.visible = false;
	            grid.fixedHeaderSummaryView.visible = false;
	            grid.fixedFooterView.visible = false;
	            grid.fixedBodyView.visible = false;
	            grid.fixedMergeView.visible = false;
	        }
	    };
	    GridLayoutManager.prototype.$_layoutRightPane = function (grid, pane) {
	        var r = this._rightContentBounds;
	        var view;
	        if (pane.visible = !r.isEmpty) {
	            if (!this._rightFixed && !this._hscrolled) {
	                r.x = this._contentBounds.right;
	            }
	            pane.setRect(r);
	            // header
	            view = grid.rightHeaderView;
	            if (view.visible = grid.header.visible) {
	                view.setRect(this._rightHeaderBounds);
	                view.layoutContent(this);
	            }
	            // summary
	            view = grid.rightHeaderSummaryView;
	            if (view.visible = grid.headerSummaries.visible) {
	                view.setRect(this._rightSummaryBounds);
	                view.layoutContent(this);
	            }
	            // footer
	            view = grid.rightFooterView;
	            if (view.visible = grid.footers.visible) {
	                view.setRect(this._rightFooterBounds);
	                view.layoutContent(this);
	            }
	            // body
	            view = grid.rightBodyView;
	            view.visible = true;
	            // view.setRect(this._rightBodyBounds);
	            // /*!this._autoRowHeights &&*/ view.layoutContent(this);
	            // // merge
	            // view = grid.rightMergeView;
	            // if (view.visible = this._rightColumnMerged) {
	            //     // 굳이 크기를 맞출 필요 없다...
	            //     //view.setRect(this._rightBodyBounds);
	            //     view.layoutContent(this);
	            // }
	            pane.layoutContent(this, r.width, r.height);
	        }
	        else {
	            grid.rightHeaderView.visible = false;
	            grid.rightHeaderSummaryView.visible = false;
	            grid.rightFooterView.visible = false;
	            grid.rightBodyView.visible = false;
	            grid.rightMergeView.visible = false;
	        }
	    };
	    GridLayoutManager.prototype.$_layoutContentPane = function (grid, pane) {
	        var r = this._contentBounds;
	        var view;
	        if (pane.visible = !r.isEmpty) {
	            r.x -= this._leftPos;
	            pane.setRect(r);
	            // header
	            view = grid.headerView;
	            if (view.visible = grid.header.visible) {
	                this._headerBounds.width = r.width;
	                view.setRect(this._headerBounds);
	                view.layoutContent(this);
	            }
	            // summary
	            view = grid.headerSummaryView;
	            if (view.visible = grid.headerSummaries.visible) {
	                this._summaryBounds.width = r.width;
	                view.setRect(this._summaryBounds);
	                view.layoutContent(this);
	            }
	            // footer
	            view = grid.footerView;
	            if (view.visible = grid.footers.visible) {
	                this._footerBounds.width = r.width;
	                view.setRect(this._footerBounds);
	                view.layoutContent(this);
	            }
	            // body
	            view = grid.bodyView;
	            this._bodyBounds.width = r.width;
	            // view.setRect(this._bodyBounds);
	            // /*!this._autoRowHeights &&*/ view.layoutContent(this);
	            // // merge
	            // view = grid.mergeView;
	            // if (view.visible = this._columnMerged) {
	            //     // 굳이 크기를 맞출 필요 없다...
	            //     //view.setRect(this._bodyBounds);
	            //     view.layoutContent(this);
	            // }
	            pane.layoutContent(this, r.width, r.height);
	        }
	    };
	    // TODO
	    GridLayoutManager.prototype.$_layoutWatingPane = function (grid, pane) {
	        var r = grid.bounds.clone();
	        pane.setRect(r);
	        pane.layoutContent(this, r.width, r.height);
	        // 일단 전체크기.
	    };
	    GridLayoutManager.prototype._doLayout = function (grid, bounds) {
	        var layer;
	        //if (!this._autoRowHeights) {
	        this._prepareItems();
	        this.$_calcTableRowPoints();
	        //}
	        // top pane
	        layer = grid["_topContentPane"];
	        this.$_layoutTopPane(grid, layer);
	        // left pane
	        layer = grid["_leftContentPane"];
	        this.$_layoutLeftPane(grid, layer);
	        // side pane
	        layer = grid["_sideContentPane"];
	        if (layer) {
	            this._layoutSidePane(grid, layer);
	        }
	        var t = Date.now();
	        // fixed pane
	        layer = grid["_fixedContentPane"];
	        this.$_layoutFixedPane(grid, layer);
	        // right pane
	        layer = grid["_rightContentPane"];
	        this.$_layoutRightPane(grid, layer);
	        // content pane
	        layer = grid["_contentPane"];
	        this.$_layoutContentPane(grid, layer);
	        console.log("LAYOUT CONTENTS: " + (Date.now() - t));
	        // wating pane
	        layer = grid["_waitingPane"];
	        this.$_layoutWatingPane(grid, layer);
	        // TODO: 아래를 없애든지 y 위치도 재설정해야 한다!!
	        // this._bodyBounds.x = this._contentBounds.x;
	        // this._fixedBodyBounds.x = this._fixedContentBounds.x;
	        // this._rightBodyBounds.x = this._rightContentBounds.x;
	    };
	    GridLayoutManager.prototype.$_adjustLayout = function (grid, bounds) {
	        var hScrolled = this._hscrolled;
	        var vScrolled = this._vscrolled;
	        var items = this._items;
	        var pts = this._tableRowPoints;
	        //-- header, summary, footer의 높이가 계산된 높이와 달라졌다면 조정한다.
	        // header
	        var fixedPane = grid["_fixedContentPane"];
	        var rightPane = grid["_rightContentPane"];
	        var contentPane = grid["_contentPane"];
	        var fixedHeaderView = grid.fixedHeaderView;
	        var rightHeaderView = grid.rightHeaderView;
	        var headerView = grid.headerView;
	        var bLeft = grid.headView.visible;
	        var bFixed = fixedPane.visible && fixedHeaderView.visible;
	        var bRight = rightPane.visible && rightHeaderView.visible;
	        var bBody = contentPane.visible && headerView.visible;
	        var hOld = headerView.height;
	        var h = 0;
	        var diff = false;
	        var dy = 0; // 0이 아니면 행 수를 조정한다.
	        var y = 0;
	        var item;
	        var view;
	        // header
	        if (bFixed) {
	            diff = fixedHeaderView["$_checkHeight"]();
	        }
	        if (!diff && bRight) {
	            diff = rightHeaderView["$_checkHeight"]();
	        }
	        if (!diff && bBody) {
	            diff = headerView["$_checkHeight"]();
	        }
	        if (diff) {
	            var hHeader = grid.header.height;
	            var heights = [];
	            h = 0;
	            if (bFixed) {
	                fixedHeaderView["$_getHeights"](heights);
	                if (hHeader > 0) {
	                    fixedHeaderView["$_distributeHeights"](hHeader, heights);
	                }
	                else {
	                    h = Math.max(h, fixedHeaderView["$_adjustHeights"](heights));
	                }
	            }
	            if (bRight) {
	                rightHeaderView["$_getHeights"](heights);
	                if (hHeader > 0) {
	                    rightHeaderView["$_distributeHeights"](hHeader, heights);
	                }
	                else {
	                    h = Math.max(h, rightHeaderView["$_adjustHeights"](heights));
	                }
	            }
	            if (bBody) {
	                headerView["$_getHeights"](heights);
	                if (hHeader > 0) {
	                    headerView["$_distributeHeights"](hHeader, heights);
	                }
	                else {
	                    h = Math.max(h, headerView["$_adjustHeights"](heights));
	                }
	            }
	            // header 높이를 0보다 크게 지정하면 header container 높이를 header.height에 설정한대로 유지한다.
	            if (hHeader <= 0) {
	                dy += h - hOld;
	                this._headBounds.height = h;
	                this._fixedHeaderBounds.height = this._headerBounds.height = this._rightHeaderBounds.height = h;
	                bFixed && fixedHeaderView.setRect(this._fixedHeaderBounds);
	                bRight && rightHeaderView.setRect(this._rightHeaderBounds);
	                bBody && headerView.setRect(this._headerBounds);
	            }
	        }
	        // header summary
	        if (dy != 0) {
	            this._fixedSummaryBounds.y = this._rightSummaryBounds.y = this.summaryBounds.y = this._sumBounds.y += dy;
	        }
	        if (grid.headerSummaries.visible) {
	            if (dy != 0) {
	                bFixed && (grid.fixedHeaderSummaryView.y = this._fixedSummaryBounds.y);
	                bRight && (grid.rightHeaderSummaryView.y = this._rightSummaryBounds.y);
	                bBody && (grid.headerSummaryView.y = this._summaryBounds.y);
	                bLeft && (grid.sumView.y = this._sumBounds.y);
	            }
	        }
	        bounds.topBy(this._headBounds.height + this._sumBounds.height);
	        // body views
	        if (dy != 0) {
	            y = this._sumBounds.bottom;
	            h = Math.min(bounds.height, this._checkBarBounds.height);
	            this._indicatorBounds.y = this._stateBarBounds.y = this._checkBarBounds.y = y;
	            this._checkBarBounds.height = this._stateBarBounds.height = this._indicatorBounds.height = h;
	            this._fixedBodyBounds.y = this.bodyBounds.y = this._rightBodyBounds.y = y;
	            this._fixedBodyBounds.height = this._bodyBounds.height = this._rightBodyBounds.height = h;
	        }
	        view = grid.fixedBodyView;
	        if (view.visible) {
	            view.setRect(this._fixedBodyBounds);
	        }
	        view = grid.bodyView;
	        if (view.visible) {
	            view.setRect(this._bodyBounds);
	        }
	        view = grid.rightBodyView;
	        if (view.visible) {
	            view.setRect(this._rightBodyBounds);
	        }
	        if (items.length > 0) {
	            // body items
	            this.$_layoutBodyRows(grid, bFixed, bBody, bRight, this._bodyBounds.height);
	            // merge cells
	            // 스크롤바 표시 여부를 재검토한다.
	            // 헤더 높이 등어 커져서 마지막 data 행이 넘치면 (즉, 현재 스크롤 설정의 마지막이면서 행을 모두 표시하지 못하는 경우)
	            // 수직 스크롤바 속성이 수정되도록 하고, topIndex도 변경한다.
	            item = items[items.length - 1];
	            var vmax = grid["$_getVertScrollMax"]();
	            if (item.index == grid.itemCount - 1 && this._dataHeight > bounds.height && this._topIndex == vmax) {
	                console.log("VMAX: " + this._topIndex + ", " + this._fullItemCount + ", " + this._itemCount);
	                this._itemCount--;
	                this._fullItemCount--; // 수직 스크롤 속성이 조정된다.
	            }
	            // 요청된 focusIndex가 범위 안에 없으면 조정한다.
	        }
	        //-- left views
	        // head
	        view = grid.headView;
	        if (view.visible) {
	            view.setRect(this._headBounds);
	            view.layoutContent(this);
	        }
	        // indicator
	        view = grid.rowIndicatorView;
	        if (view.visible) {
	            view.setRect(this._indicatorBounds);
	            view.layoutContent(this);
	        }
	        // state bar
	        view = grid.stateBarView;
	        if (view.visible) {
	            view.setRect(this._stateBarBounds);
	            view.layoutContent(this);
	        }
	        // check bar
	        view = grid.checkBarView;
	        if (view.visible) {
	            view.setRect(this._checkBarBounds);
	            view.layoutContent(this);
	        }
	    };
	    GridLayoutManager.prototype.$_layoutBodyRows = function (grid, bFixed, bBody, bRight, height) {
	        var fixedView = (bFixed && this._fixedCellCount > 0) ? grid.fixedBodyView : null;
	        var bodyView = (bBody && this.cellCount > 0) ? grid.bodyView : null;
	        var rightView = (bRight && this._rightCellCount) > 0 ? grid.rightBodyView : null;
	        var view;
	        // 원래 bodyElement.layoutContent()에서 호출되어야 하지만 layoutContent()를 호출하지 않고 여기서 처리하므로...
	        if (fixedView) {
	            view = fixedView;
	            fixedView["_doPrepareContent"](this);
	        }
	        if (rightView) {
	            view = rightView;
	            rightView["_doPrepareContent"](this);
	        }
	        if (bodyView) {
	            view = bodyView;
	            bodyView["_doPrepareContent"](this);
	        }
	        if (!view)
	            return;
	        var rs = grid.itemSource;
	        var fixedRows = rs ? Math.min(rs.fixedCount, rs.itemCount) : 0;
	        var auto = this._autoRowHeights;
	        var info = {
	            lm: this,
	            grid: grid,
	            topIndex: this._topIndex,
	            fixedItemCount: fixedRows,
	            mergedRowGrouped: this.mergedRowGrouped,
	            mergeHeads: []
	        };
	        var hMin = this._minRowHeight;
	        var trs = view["_trs"];
	        var tr = 0;
	        var y = 0;
	        var y2 = 0;
	        var y3;
	        var h;
	        var heights;
	        var h2;
	        var item;
	        this._fixedItemCount = 0;
	        this._itemCount = 0;
	        this._compensated = 0;
	        this._fixedHeight = 0;
	        var fixedBar = false;
	        var fixedItemPts = [];
	        var fixedRowPts = [];
	        var rowPts = [];
	        this._fixedTableRowCount = 0;
	        this._tableRowCount = 0;
	        this._fixedDataHeight = this._dataHeight = 0;
	        if (fixedRows > 0) {
	            fixedItemPts.push(y);
	            fixedRowPts.push(y2);
	            for (var i = 0; i < fixedRows && y < height; i++) {
	                item = rs.getItem(i);
	                this._items.push(item);
	                fixedView && fixedView.layoutRow(info, i, tr, item);
	                bodyView && bodyView.layoutRow(info, i, tr, item);
	                rightView && rightView.layoutRow(info, i, tr, item);
	                if (auto) {
	                    h = item.height;
	                    heights = item.heights;
	                    if (isNaN(h)) {
	                        heights = [];
	                        for (var j = 0; j < trs; j++) {
	                            heights[j] = 0;
	                        }
	                        item.heights = heights;
	                        if (fixedView) {
	                            var trows = fixedView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                        if (bodyView) {
	                            var trows = bodyView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                        if (rightView) {
	                            var trows = rightView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                    }
	                    h = 0;
	                    for (var j = 0; j < trs; j++) {
	                        h += heights[j];
	                        fixedRowPts.push(y2 += heights[j]);
	                    }
	                    item.height = h;
	                }
	                else {
	                    y3 = y2;
	                    h = this._fixedItemPoints[i + 1] - this._fixedItemPoints[i];
	                    h2 = Math.floor((h) / trs);
	                    for (var j = 0; j < trs - 1; j++) {
	                        fixedRowPts.push(h2);
	                    }
	                    fixedRowPts.push(y2 = y3 + h);
	                }
	                this._fixedTableRowCount += trs;
	                y += h;
	                fixedItemPts.push(y);
	                this._fixedItemCount++;
	                this._fixedDataHeight = y;
	                tr += trs;
	            }
	            this._fixedHeight = y;
	            // fixed bar
	            if (y < height) {
	                h = 0;
	                if (fixedView) {
	                    h = fixedView.layoutFixedBar(this, tr);
	                }
	                if (bodyView) {
	                    h = bodyView.layoutFixedBar(this, tr);
	                }
	                if (rightView) {
	                    h = rightView.layoutFixedBar(this, tr);
	                }
	                tr++;
	                y += h;
	                y2 += h;
	                fixedBar = true;
	            }
	        }
	        var cnt = grid.itemCount - this._fixedItemCount;
	        var itemPts = [y];
	        rowPts.push(y);
	        this._itemCount = 0;
	        this._fullItemCount = 0;
	        this._availableItemCount = 0;
	        if (cnt > 0 && y < height) {
	            var top_2 = this._topIndex;
	            var focusIndex = -1;
	            if (this._focusIndex) {
	                focusIndex = this._focusIndex.itemIndex;
	                if (focusIndex >= this._fixedItemCount && focusIndex < top_2 + this._fixedItemCount) {
	                    top_2 = this._topIndex = focusIndex - this._fixedItemCount;
	                }
	            }
	            for (var i = top_2; i < cnt && y < height; i++) {
	                item = rs.getItem(i + fixedRows);
	                this._items.push(item);
	                var n = this._fixedItemCount + i - top_2;
	                fixedView && fixedView.layoutRow(info, n, tr, item);
	                bodyView && bodyView.layoutRow(info, n, tr, item);
	                rightView && rightView.layoutRow(info, n, tr, item);
	                if (!item.isData) {
	                    h = this._itemPoints[i - top_2 + 1] - this._itemPoints[i - top_2];
	                    rowPts.push(y2 += h);
	                }
	                else if (auto) {
	                    h = item.height;
	                    heights = item.heights;
	                    if (isNaN(h)) {
	                        item.heights = heights = [];
	                        for (var j = 0; j < trs; j++) {
	                            heights[j] = 0;
	                        }
	                        if (fixedView) {
	                            var trows = fixedView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                        if (bodyView) {
	                            var trows = bodyView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                        if (rightView) {
	                            var trows = rightView["_tbody"].children;
	                            for (var j = 0; j < trs; j++) {
	                                heights[j] = Math.max(heights[j], hMin, trows[tr + j].offsetHeight);
	                            }
	                        }
	                    }
	                    h = 0;
	                    for (var j = 0; j < trs; j++) {
	                        h += heights[j];
	                        rowPts.push(y2 += heights[j]);
	                    }
	                    item.height = h;
	                }
	                else {
	                    y3 = y2;
	                    h = this._itemPoints[i - top_2 + 1] - this._itemPoints[i - top_2];
	                    h2 = Math.floor(h / trs);
	                    for (var j = 0; j < trs - 1; j++) {
	                        rowPts.push(y2 += h2);
	                    }
	                    rowPts.push(y2 = y3 + h);
	                }
	                this._tableRowCount += trs;
	                y += h;
	                itemPts.push(y);
	                this._itemCount++;
	                this._dataHeight = y;
	                tr += trs;
	            }
	            this._fullItemCount = this._itemCount - (y > height ? 1 : 0);
	            // 자동 높이가 아닌 경우는 calcItemPoints 등에서 계산된 고정 높이로 이미 설정되어 있다.
	            if (auto) {
	                // table row height 재설정
	                if (fixedView) {
	                    fixedView["$_resetHeights"](fixedRowPts, rowPts);
	                }
	                if (bodyView) {
	                    bodyView["$_resetHeights"](fixedRowPts, rowPts);
	                }
	                if (rightView) {
	                    rightView["$_resetHeights"](fixedRowPts, rowPts);
	                }
	            }
	            /*
	            if (focusIndex >= this._topIndex + this._fixedItemCount + this._fullItemCount) {
	                if (this.fixedItemCount > 0) {
	                    y = this._fixedHeight + grid.fixedOptions.rowBarHeight;
	                } else {
	                    y = 0;
	                }
	                this._topIndex = focusIndex - this._fixedItemCount - Math.max(0, this._fullItemCount - 1); // fullItemCount가 0일 수 있다.

	                this._itemPoints = [y];
	                this._itemCount = 0;
	                this._fullItemCount = 0;
	                this._availableItemCount = 0;
	                const cnt = grid.itemCount - this._fixedItemCount;
	                // TODO 개선사항 스크롤되었을때 변경되는 부분만 재계산필요.
	                for (let i = this._topIndex; i < cnt && y < height; i++) {
	                    const h = this.$_calcItemHeight(grid, i + this._fixedItemCount);
	                    y += h;
	                    this._itemCount++;
	                    this._itemPoints.push(y);
	                }
	                this._fullItemCount = this._itemCount - (y >= height ? 1 : 0);
	            }
	            
	            // 아래가 남으면 채운다.
	            if (top > 0 && y < height) {
	                let h2 = height - y;
	                for (; top > 0 && h2 > 0; top--) {
	                    h = this.$_calcItemHeight(grid, top + this._fixedItemCount);
	                    if (h <= h2) {
	                        h2 -= h;
	                        y += h;
	                        this._itemCount++;
	                        this._itemPoints.push(y);
	                        this._compensated++;
	                    } else {
	                        break;
	                    }
	                }
	                if (this._compensated > 0) {
	                    this._topIndex = top;
	                    this._fullItemCount = this._itemCount - (h2 > 0 ? 1 : 0);
	                }
	            }
	            */
	        }
	        else {
	            this._topIndex = 0;
	        }
	        this._fixedItemPoints = fixedItemPts;
	        this._itemPoints = itemPts;
	        this._fixedTableRowPoints = fixedRowPts;
	        this._tableRowPoints = rowPts;
	        // 불필요한 item 객체들을 제거한다.
	        this._items.length = this.fixedItemCount + this._itemCount;
	        if (auto) {
	            var n = this._items.length + (this.fixedItemCount > 0 ? 1 : 0);
	            bFixed && fixedView.cleanTableRows(n);
	            bBody && bodyView.cleanTableRows(n);
	            bRight && rightView.cleanTableRows(n);
	        }
	        if (fixedBar)
	            tr--;
	        bFixed && fixedView["$_cleanBodyCells"](tr);
	        bBody && bodyView["$_cleanBodyCells"](tr);
	        bRight && bodyView["$_cleanBodyCells"](tr);
	    };
	    GridLayoutManager.prototype.$_prepareColumnMerges = function (mergeView, columns, first, last) {
	        var itemCount = this._itemCount;
	        var merged = false;
	        for (var i = 0, cnt = columns.length; i < cnt; i++) {
	            var col = columns[i];
	            var layout = col && col.layout;
	            if (layout && layout.canMerge()) {
	                var merges = layout["_merges"];
	                if (!merges) {
	                    merges = new ColumnMerge.ColumnMergeManager(layout);
	                    layout["_merges"] = merges;
	                }
	                merges.refresh(first, last);
	                merges.prepareCells(itemCount);
	                mergeView.addColumnRooms(this, i, col, merges);
	                col.layout["$_setMerged"](true);
	                merged = true;
	            }
	        }
	        return merged;
	    };
	    GridLayoutManager.prototype.$_checkColumnMerging = function (grid) {
	        var fixedCount = grid.fixedOptions.rowCount;
	        var itemCount = this._contentBounds.height / grid.displayOptions.minRowHeight - fixedCount;
	        var colCount = this._layoutCount;
	        var mergeView = grid.mergeView;
	        var fixedView = grid.fixedMergeView;
	        var rightView = grid.rightMergeView;
	        var first = fixedCount + this._topIndex;
	        var last = Math.min(grid.itemCount - 1, fixedCount + this._topIndex + itemCount - 1);
	        var fixed = this._fixedLayoutCount > 0;
	        var right = this._rightLayoutCount > 0;
	        mergeView.clearRooms();
	        if (fixed) {
	            fixedView.clearRooms();
	        }
	        if (right) {
	            rightView.clearRooms();
	        }
	        // fixed merge view
	        if (fixed) {
	            var columns_1 = grid.getHorzColumns(0, this._fixedLayoutCount);
	            this._fixedColumnMerged = this.$_prepareColumnMerges(fixedView, columns_1, first, last);
	        }
	        // right fixed merge view
	        if (right) {
	            var columns_2 = grid.getHorzColumns(colCount - this._rightLayoutCount, this._rightLayoutCount);
	            this._rightColumnMerged = this.$_prepareColumnMerges(rightView, columns_2, first, last);
	        }
	        // body merge view
	        var columns = grid.getHorzColumns(this._fixedLayoutCount, colCount - this._fixedLayoutCount - this._rightLayoutCount);
	        this._columnMerged = this.$_prepareColumnMerges(mergeView, columns, first, last);
	        // mergeView.clearFooters();
	        // if (fixed) {
	        // 	fixedMergeView.clearFooters();
	        // }
	        // if (rfixed) {
	        // 	rfixedMergeView.clearFooters();
	        // }
	        // grid.mergeHeaderView().clearHeaders();
	    };
	    return GridLayoutManager;
	}(Base_1.Base));
	exports.GridLayoutManager = GridLayoutManager;
	});

	unwrapExports(GridLayoutManager_1);
	var GridLayoutManager_2 = GridLayoutManager_1.GridLayoutManager;

	var StateBarElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// StateBarElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var StateBarElement = /** @class */ (function (_super) {
	    __extends(StateBarElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function StateBarElement(model) {
	        var _this = _super.call(this, model, "stateBarView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._textMark = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    StateBarElement.prototype._getCssSelector = function () {
	        return "rg-statebar";
	    };
	    StateBarElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var bar = grid.stateBar;
	        return new Size_1.Size(bar.width, hintHeight);
	    };
	    StateBarElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var statebar = this.model;
	        var mark = statebar.mark;
	        var imaged = mark == RowIndicator_1.StateMark.IMAGE || mark == RowIndicator_1.StateMark.DEFAULT;
	        var topIndex = lm.topIndex;
	        var itemCount = lm.itemCount;
	        var fixedCount = lm.fixedItemCount;
	        var count = fixedCount + itemCount;
	        var focused = grid.focusedRow;
	        this._textMark = mark == RowIndicator_1.StateMark.TEXT;
	        for (var i = 0; i < count; i++) {
	            var row = (i < fixedCount) ? i : i + topIndex;
	            var index = CellIndex_1.CellIndex.temp(grid, row);
	            var cell = statebar.getCell(index);
	            var trow = this._getTableRow(lm, i);
	            var td = trow.children[0];
	            // fixed-row-bar 였을 수 있다.
	            if (trow["$_row"] < 0) {
	                trow.className = "";
	            }
	            trow["$_row"] = row;
	            td["$_foc"] = row == focused;
	            Utils_1.Utils.setClassName(td, this.$_getCellSelector(td, imaged));
	            this._updateCellContent(grid, cell, td);
	        }
	        if (fixedCount > 0) {
	            this._layoutFixedBar(grid.fixedOptions, fixedCount);
	        }
	    };
	    StateBarElement.prototype._doUpdateCellContent = function (grid, model, dom) {
	        var stateBar = this.model;
	        dom.textContent = this._textMark ? stateBar.stateText(model.item.rowState) : "";
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    StateBarElement.prototype.$_getCellSelector = function (td, imageMark) {
	        var item = this.grid.getItem(td.parentElement["$_row"]);
	        var row = item.dataRow;
	        if (row >= 0 && imageMark) {
	            var state = item.rowState;
	            switch (state) {
	                case RowState_1.RowState.UPDATED:
	                    return "rg-statebar-cell rg-statebar-updated";
	                case RowState_1.RowState.CREATED:
	                    return "rg-statebar-cell rg-statebar-created";
	                case RowState_1.RowState.DELETED:
	                    return "rg-statebar-cell rg-statebar-deleted";
	                case RowState_1.RowState.CREATE_AND_DELETED:
	                    return "rg-statebar-cell rg-statebar-create-and-deleted";
	                default:
	                    return "rg-statebar-cell";
	            }
	        }
	        else {
	            return "rg-statebar-cell";
	        }
	    };
	    return StateBarElement;
	}(SectionObjectElement_1.SectionObjectElement));
	exports.StateBarElement = StateBarElement;
	});

	unwrapExports(StateBarElement_1);
	var StateBarElement_2 = StateBarElement_1.StateBarElement;

	var CheckBarElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// CheckBarElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var CheckBarElement = /** @class */ (function (_super) {
	    __extends(CheckBarElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckBarElement(model) {
	        var _this = _super.call(this, model, "checkBarView") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._fixedCount = 0;
	        _this._prevChecked = -1;
	        _this._exclusive = false;
	        _this._typeChanged = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CheckBarElement.prototype._getCssSelector = function () {
	        return "rg-checkbar";
	    };
	    CheckBarElement.prototype._prepareCellContent = function (cell, index) {
	        var div = document.createElement("div");
	        var check = document.createElement("input");
	        var css = check.style;
	        check.type = "checkbox";
	        check.className = "rg-checkbox";
	        css.display = "inline-block";
	        div.appendChild(check);
	        return div;
	    };
	    CheckBarElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var checkbar = this.model;
	        this._typeChanged = checkbar.exclusive != this._exclusive;
	        if (this._typeChanged) {
	            this._exclusive = checkbar.exclusive;
	        }
	        return new Size_1.Size(checkbar.width, hintHeight);
	    };
	    CheckBarElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var checkBar = this.model;
	        var topIndex = lm.topIndex;
	        var itemCount = lm.itemCount;
	        var fixedCount = this._fixedCount = lm.fixedItemCount;
	        var count = fixedCount + itemCount;
	        var focused = grid.focusedRow;
	        for (var i = 0; i < count; i++) {
	            var row = (i < fixedCount) ? i : i + topIndex;
	            var index = CellIndex_1.CellIndex.temp(grid, row);
	            var cell = checkBar.getCell(index);
	            var trow = this._getTableRow(lm, i);
	            var td = trow.children[0];
	            // fixed-row-bar 였을 수 있다.
	            if (trow["$_row"] < 0) {
	                trow.className = "";
	            }
	            trow["$_row"] = row;
	            td["$_foc"] = row == focused;
	            Utils_1.Utils.setClassName(td, this.$_getCellSelector());
	            this._updateCellContent(grid, cell, td);
	        }
	        if (fixedCount > 0) {
	            this._layoutFixedBar(grid.fixedOptions, fixedCount);
	        }
	    };
	    CheckBarElement.prototype._doUpdateCellContent = function (grid, model, dom) {
	        var item = model.item;
	        var checkbox = dom;
	        checkbox.checked = item && item.checked;
	        checkbox.disabled = item && !item.checkable;
	        //TODO 점검 reflow 확인 필요.
	        checkbox.style.visibility = grid.checkBar.showGroup || item instanceof GridItem_1.GridRow ? "visible" : "hidden";
	        if (this._typeChanged) {
	            checkbox.setAttribute("type", this._exclusive ? "radio" : "checkbox");
	        }
	    };
	    CheckBarElement.prototype.getCellContent = function (row, col) {
	        return _super.prototype.getCellContent.call(this, row, col).firstElementChild;
	    };
	    CheckBarElement.prototype._getCellContent = function (td) {
	        return td.firstElementChild.firstElementChild;
	    };
	    CheckBarElement.prototype.getCheckBox = function (td) {
	        return td.firstElementChild.firstElementChild;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CheckBarElement.prototype.$_getCellSelector = function () {
	        return CheckBarElement.CELL_CSS;
	    };
	    CheckBarElement.prototype.$_setPrevChecked = function (itemIndex) {
	        this._prevChecked = itemIndex;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    CheckBarElement.CELL_CSS = "rg-checkbar-cell";
	    return CheckBarElement;
	}(SectionObjectElement_1.SectionObjectElement));
	exports.CheckBarElement = CheckBarElement;
	});

	unwrapExports(CheckBarElement_1);
	var CheckBarElement_2 = CheckBarElement_1.CheckBarElement;

	var SummaryElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// SummaryElement.ts
	// 2020. 01. 08. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });









	var ROW_SPAN = "rowspan";
	var COL_SPAN = "colspan";
	var SummaryTableCell = /** @class */ (function () {
	    function SummaryTableCell(td) {
	        this.cell = null;
	        this.layout = null;
	        this.visible = undefined;
	        this.spanned = false;
	        this.rowSpan = 1;
	        this.colSpan = 1;
	        this.className = "";
	        this.rendererClass = "";
	        this.style = new GridColumn_1.ColumnSummaryStyle();
	        this.text = undefined;
	        this.html = undefined;
	        this.cell = td;
	        this.text = td.textContent;
	    }
	    SummaryTableCell.prototype.dispose = function () {
	        this.cell = null;
	        this.layout = null;
	    };
	    // reset(td: HTMLTableCellElement): SummaryTableCell {
	    //     //if (td !== this.cell) {
	    //         this.cell = td;
	    //         this.text = undefined;
	    //     //}
	    //     return this;
	    // }
	    SummaryTableCell.prototype.span = function () {
	        this.spanned = true;
	        this.clear(false);
	    };
	    SummaryTableCell.prototype.clear = function (visible) {
	        if (this.colSpan > 1) {
	            this.colSpan = 1;
	            this.cell.removeAttribute(COL_SPAN);
	        }
	        if (this.rowSpan > 1) {
	            this.rowSpan = 1;
	            this.cell.removeAttribute(ROW_SPAN);
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        var div = this.cell.firstElementChild;
	        //const css = div.style;
	        if (this.className) {
	            this.cell.className = this.className = "";
	        }
	        if (this.rendererClass) {
	            div.className = this.rendererClass = "";
	        }
	        if (this.text) {
	            div.textContent = this.text = "";
	        }
	        if (this.html) {
	            div.innerHTML = this.html = "";
	        }
	        return this;
	    };
	    SummaryTableCell.prototype.setColSpan = function (value) {
	        if (this.colSpan != value) {
	            this.colSpan = value;
	            if (value > 1) {
	                this.cell.colSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        return this;
	    };
	    SummaryTableCell.prototype.setRowSpan = function (value) {
	        if (this.rowSpan != value) {
	            this.rowSpan = value;
	            if (value > 1) {
	                this.cell.rowSpan = value;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        return this;
	    };
	    SummaryTableCell.prototype.setVisible = function (value) {
	        if (value !== this.visible) {
	            this.visible = value;
	            this.cell.style.display = value ? "" : "none";
	        }
	        return this;
	    };
	    SummaryTableCell.prototype.set = function (colSpan, rowSpan, visible) {
	        if (this.colSpan != colSpan) {
	            this.colSpan = colSpan;
	            if (colSpan > 1) {
	                this.cell.colSpan = colSpan;
	            }
	            else {
	                this.cell.removeAttribute(COL_SPAN);
	            }
	        }
	        if (this.rowSpan != rowSpan) {
	            this.rowSpan = rowSpan;
	            if (rowSpan > 1) {
	                this.cell.rowSpan = rowSpan;
	            }
	            else {
	                this.cell.removeAttribute(ROW_SPAN);
	            }
	        }
	        if (this.visible !== visible) {
	            this.visible = visible;
	            this.cell.style.display = visible ? "" : "none";
	        }
	        return this;
	    };
	    SummaryTableCell.prototype.refreshFormatters = function (cs) {
	        var s;
	        this.textFormatter = null;
	        this.numberFormatter = null;
	        this.datetimeWriter = null;
	        this.booleanFormatter = null;
	        if (s = cs.textFormat) {
	            if (!this.textFormatter || this.textFormatter.format != s) {
	                this.textFormatter = TextFormatter_1.TextFormatter.getFormatter(s);
	            }
	        }
	        if (s = cs.numberFormat) {
	            if (!this.numberFormatter || this.numberFormatter.format != s) {
	                this.numberFormatter = DecimalFormatter_1.DecimalFormatter.getFormatter(s);
	            }
	        }
	        if (s = cs.datetimeFormat) {
	            if (!this.datetimeWriter || this.datetimeWriter.format != s) {
	                this.datetimeWriter = DateTimeWriter_1.DateTimeWriter.getFormatter(s);
	            }
	        }
	        if (s = cs.booleanFormat) {
	            if (!this.booleanFormatter || this.booleanFormatter.format != s) {
	                this.booleanFormatter = BooleanFormatter_1.BooleanFormatter.getFormatter(s);
	            }
	        }
	    };
	    SummaryTableCell.prototype.setText = function (value) {
	        if (value !== this.text) {
	            this.cell.firstElementChild.textContent = (this.text = value) || "";
	        }
	    };
	    SummaryTableCell.prototype.setHtml = function (value) {
	        if (value !== this.html) {
	            this.cell.firstElementChild.innerHTML = (this.html = value) || "";
	        }
	    };
	    SummaryTableCell.prototype.setClassName = function (value) {
	        if (value != this.className) {
	            this.cell.className = this.className = value;
	            return true;
	        }
	        return false;
	    };
	    SummaryTableCell.prototype.setRendererClassName = function (value) {
	        if (value != this.rendererClass) {
	            this.cell.firstElementChild.className = this.rendererClass = value;
	        }
	    };
	    return SummaryTableCell;
	}());
	exports.SummaryTableCell = SummaryTableCell;
	var SummaryElement = /** @class */ (function (_super) {
	    __extends(SummaryElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SummaryElement(model, name) {
	        var _this = _super.call(this, model, name) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._rowPoints = [];
	        _this._cells = [];
	        return _this;
	    }
	    SummaryElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SummaryElement.prototype.tableCellByCell = function (cell) {
	        for (var r = 0; r < this._cells.length; r++) {
	            var cells = this._cells[r];
	            for (var c = 0; c < cells.length; c++) {
	                var obj = cells[c];
	                if (obj && obj.cell === cell) {
	                    return obj;
	                }
	            }
	        }
	        return null;
	    };
	    SummaryElement.prototype.layoutByCell = function (cell) {
	        var tc = this.tableCellByCell(cell);
	        return tc && tc.layout;
	    };
	    SummaryElement.prototype.columnByCell = function (cell) {
	        var obj = this.layoutByCell(cell);
	        return obj && obj["_columnObj"];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SummaryElement.prototype._getCellCount = function (lm) {
	        return lm.cellCount - lm.fixedCellCount - lm.rightCellCount;
	    };
	    SummaryElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getCellWidth(col);
	    };
	    SummaryElement.prototype._doDrawCell = function (row, col, dom) {
	    };
	    SummaryElement.prototype._doRender = function (dom) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SummaryElement.prototype._getFirstCell = function (lm) {
	        return lm["_firstCell"];
	    };
	    SummaryElement.prototype._getLastCell = function (lm) {
	        return lm["_lastCell"];
	    };
	    SummaryElement.prototype._getStartCell = function (lm) {
	        return lm.getStartCell();
	    };
	    SummaryElement.prototype._getEndCell = function (lm) {
	        return lm.getEndCell();
	    };
	    SummaryElement.prototype._prepareCellContent = function (cell, index) {
	        return document.createElement("div");
	    };
	    SummaryElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var lm = grid.layoutManager;
	        var frows = this._getSummaryRows(lm);
	        var footers = this._getCollection(); // as GridFooterCollection;
	        var h1 = this._getSummaryHeight(grid.heightMeasurer);
	        var y = 0;
	        var pts = this._rowPoints = [y];
	        var h = 0;
	        for (var i = 0, cnt = footers.count; i < cnt; i++) {
	            var footer = footers.get(i);
	            var h2 = footer.height;
	            if (h2 <= 0) {
	                h2 = h1 * frows;
	            }
	            h2 = Math.max(footer.minHeight, h2);
	            var hr = Math.floor(h2 / frows);
	            var h3 = 0;
	            for (var j = 0; j < frows - 1; j++) {
	                y += hr;
	                pts.push(y);
	                h3 += hr;
	            }
	            y += h2 - h3;
	            pts.push(y);
	            h += h2;
	        }
	        return Size_1.Size.create(hintWidth, h);
	    };
	    SummaryElement.prototype._doPrepareTableExtents = function (lm) {
	    };
	    SummaryElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var footers = this._getCollection();
	        var nFooter = this._getSummaryCount(lm);
	        var footerLayouts = lm.cellLayouts["_dataCells"];
	        var rows = footerLayouts.length;
	        var f = this._getFirstCell(lm);
	        var c1 = this._getStartCell(lm) - f;
	        var c2 = this._getEndCell(lm) - f;
	        this._refreshCells(lm, nFooter, footerLayouts, this["_tbody"]);
	        this.$_refreshSpans(rows * nFooter, c1, c2);
	        for (var f_1 = 0; f_1 < nFooter; f_1++) {
	            var footer = footers.getVisible(f_1);
	            for (var r = 0; r < rows; r++) {
	                var cells = this._cells[f_1 * rows + r];
	                var tr = this._getTableRow(lm, f_1 * rows + r);
	                footer.styleName && Utils_1.Utils.setClassName(tr, footer.styleName);
	                for (var c = c1; c <= c2; c++) {
	                    var cell = cells[c];
	                    var layout = cell.layout;
	                    if (layout.isProxy) {
	                        //cell.clear(false);
	                        cell.setText("");
	                        cell.setClassName(footer.getCellStyleName());
	                    }
	                    else if (layout instanceof CellLayout.CellLayoutGroupItem) {
	                        //cell.set(layout["_cspan"], layout["_dspan"], true);
	                        cell.setText("");
	                        cell.setClassName(footer.getCellStyleName());
	                    }
	                    else {
	                        //cell.set(layout["_cspan"], layout["_fspan"], true);
	                        var model = footer.getCell(layout);
	                        this._updateCell(grid, footer, model, cell);
	                    }
	                }
	            }
	        }
	    };
	    SummaryElement.prototype._updateCell = function (grid, summary, model, tcell) {
	        var scell = model;
	        var csum = scell.getSummary();
	        var cs = summary.getCellStyle(model, tcell.style.clear());
	        var t = scell.template;
	        tcell.setClassName(cs.styleName);
	        tcell.setRendererClassName(this._getRendererStyle());
	        tcell.refreshFormatters(cs);
	        if (csum) {
	            summary.getCellFormatters(scell.getSummary(), tcell);
	        }
	        if (csum) {
	            if (t === undefined) {
	                tcell.setText(scell.getDisplayText(tcell));
	            }
	            else {
	                tcell.setHtml(t);
	            }
	        }
	    };
	    SummaryElement.prototype._getTableRowHeight = function (lm, tr) {
	        return this._rowPoints[tr + 1] - this._rowPoints[tr];
	    };
	    // table => cells
	    // ! fixed, norma, right body는 각각 다른 table이다.
	    SummaryElement.prototype._refreshCells = function (lm, summaryCount, summaryLayouts, tbody) {
	        var t = Utils_1.Utils.getTimer();
	        var summaryCells = this._cells;
	        var rows = tbody.children;
	        var nRow = rows.length;
	        var nLayout = summaryLayouts.length;
	        var c1 = this._getFirstCell(lm);
	        var c2 = this._getLastCell(lm);
	        var cols = c2 - c1 + 1;
	        for (var r = summaryCells.length; r < nRow; r++) {
	            summaryCells.push([]);
	        }
	        for (var r = 0, tr = 0; r < summaryCount && tr < nRow; r++) {
	            for (var i = 0; i < nLayout; i++) {
	                var scells = summaryCells[tr];
	                var tds = rows[tr].children;
	                var layouts = summaryLayouts[i];
	                for (var c = 0; c < cols; c++) {
	                    var layout = layouts[c + c1];
	                    var obj = scells[c];
	                    if (!obj) {
	                        obj = scells[c] = new SummaryTableCell(tds[c]);
	                        obj.layout = layout;
	                    }
	                    else if (obj.cell !== tds[c]) {
	                        // td와 obj.cell이 항상 동일하므로 여기에 들어올 일이 없다.
	                        debugger;
	                    }
	                    else if (obj.layout != layout) {
	                        obj.layout = layout;
	                        obj.clear(true);
	                    }
	                    obj.spanned = false;
	                }
	                tr++;
	                // td 개수와 bcells 길이를 맞춘다.
	                // table의 td와 bcells의 td가 항상 동일힌 상태를 유지하도록 한다.
	                for (var c = cols; c < scells.length; c++) {
	                    scells[c].dispose();
	                }
	                scells.length = cols;
	            }
	        }
	        // tr 개수와 cell row 수를 맞춘다.
	        for (var tr = nRow; tr < summaryCells.length; tr++) {
	            var cells = summaryCells[tr];
	            for (var c = 0; c < cells.length; c++) {
	                cells[c].dispose();
	                cells[c] = null;
	            }
	        }
	        summaryCells.length = nRow;
	        t = Utils_1.Utils.getTimer() - t;
	        console.log("$$$$ REFRESH_" + this.constructor.name + "_CELLS: " + t);
	    };
	    SummaryElement.prototype.$_refreshSpans = function (rows, c1, c2) {
	        for (var r = 0; r < rows; r++) {
	            var cells = this._cells[r];
	            for (var c = c1; c <= c2; c++) {
	                var cell = cells[c];
	                var layout = cell.layout;
	                var p = layout.parent;
	                var vert = p && p.vertical;
	                if (cell.spanned) ;
	                else if (layout.isProxy) {
	                    cell.clear(false);
	                }
	                else {
	                    var len = 0;
	                    var span = this._getSpanOf(layout) - 1;
	                    if (span > 0) {
	                        var i = 0;
	                        var idx = layout.vindex + 1;
	                        // span은 그룹 내에서...
	                        while (i++ < span && idx < p.visibleCount) {
	                            var sib = p.getVisible(idx++);
	                            if (vert) {
	                                len += sib["_dspan"];
	                                this._cells[r + i][c].span();
	                            }
	                            else {
	                                len += sib["_cspan"];
	                                cells[c + i].span();
	                            }
	                        }
	                    }
	                    if (layout.isNull) {
	                        cell.clear(true);
	                    }
	                    if (vert) {
	                        cell.set(layout["_cspan"], layout["_dspan"] + len, true);
	                    }
	                    else {
	                        cell.set(layout["_cspan"] + len, layout["_dspan"], true);
	                    }
	                }
	            }
	        }
	    };
	    SummaryElement.prototype._doPrepareTableRow = function (lm, index, tindex, tr) {
	        _super.prototype._doPrepareTableRow.call(this, lm, index, tindex, tr);
	    };
	    return SummaryElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.SummaryElement = SummaryElement;
	});

	unwrapExports(SummaryElement_1);
	var SummaryElement_2 = SummaryElement_1.SummaryTableCell;
	var SummaryElement_3 = SummaryElement_1.SummaryElement;

	var FooterElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FooterElement.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var FooterElement = /** @class */ (function (_super) {
	    __extends(FooterElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FooterElement(model) {
	        return _super.call(this, model, "footerView") || this;
	    }
	    FooterElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FooterElement.prototype._getCssSelector = function () {
	        return "rg-footer";
	    };
	    FooterElement.prototype._getRendererStyle = function () {
	        return "rg-footer-renderer";
	    };
	    FooterElement.prototype._getSummaryRows = function (lm) {
	        return lm.footerRows;
	    };
	    FooterElement.prototype._getCollection = function () {
	        return this.model;
	    };
	    FooterElement.prototype._getSummaryHeight = function (heightMeasurer) {
	        return heightMeasurer.footerHeight;
	    };
	    FooterElement.prototype._getSummaryCount = function (lm) {
	        return lm.footerCount;
	    };
	    FooterElement.prototype._getSpanOf = function (layout) {
	        return layout.getFooterSpan();
	    };
	    FooterElement.prototype._getTableRowCount = function (lm) {
	        return lm.footerRows * lm.footerCount;
	    };
	    FooterElement.prototype._getSummaryItem = function (layout, index) {
	        return layout.firstColumn.footers.getItem(index);
	    };
	    return FooterElement;
	}(SummaryElement_1.SummaryElement));
	exports.FooterElement = FooterElement;
	var FixedFooterElement = /** @class */ (function (_super) {
	    __extends(FixedFooterElement, _super);
	    function FixedFooterElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedFooterElement.prototype._getCssSelector = function () {
	        return "rg-fixed-footer";
	    };
	    FixedFooterElement.prototype._getFirstCell = function (lm) {
	        return 0;
	    };
	    FixedFooterElement.prototype._getLastCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedFooterElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    FixedFooterElement.prototype._getEndCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedFooterElement.prototype._getCellCount = function (lm) {
	        return lm.fixedCellCount;
	    };
	    FixedFooterElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getFixedCellWidth(col);
	    };
	    return FixedFooterElement;
	}(FooterElement));
	exports.FixedFooterElement = FixedFooterElement;
	var RightFooterElement = /** @class */ (function (_super) {
	    __extends(RightFooterElement, _super);
	    function RightFooterElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightFooterElement.prototype._getCssSelector = function () {
	        return "rg-fixed-footer";
	    };
	    RightFooterElement.prototype._getFirstCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightFooterElement.prototype._getLastCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightFooterElement.prototype._getStartCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightFooterElement.prototype._getEndCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightFooterElement.prototype._getCellCount = function (lm) {
	        return lm.rightCellCount;
	    };
	    RightFooterElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getRightCellWidth(col);
	    };
	    return RightFooterElement;
	}(FooterElement));
	exports.RightFooterElement = RightFooterElement;
	});

	unwrapExports(FooterElement_1);
	var FooterElement_2 = FooterElement_1.FooterElement;
	var FooterElement_3 = FooterElement_1.FixedFooterElement;
	var FooterElement_4 = FooterElement_1.RightFooterElement;

	var DragTracker_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DragTracker.ts
	// 2019. 08. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var DragTracker = /** @class */ (function (_super) {
	    __extends(DragTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function DragTracker(container, name) {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._completed = false;
	        _this._dragging = false;
	        _this._currentX = 0;
	        _this._currentY = 0;
	        _this._container = container;
	        _this._name = name;
	        return _this;
	    }
	    Object.defineProperty(DragTracker.prototype, "container", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** container */
	        get: function () {
	            return this._container;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "name", {
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "active", {
	        /** active */
	        get: function () {
	            return this._active;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "dragging", {
	        /** dragging */
	        get: function () {
	            return this._dragging;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "startWhenCreated", {
	        /** startWhenCreated */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "completed", {
	        /** completed */
	        get: function () {
	            return this._completed;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DragTracker.prototype.activate = function () {
	        if (!this._active) {
	            this._doActivate();
	            this._active = true;
	        }
	    };
	    DragTracker.prototype.deactivate = function () {
	        if (this._active) {
	            this.cancel();
	            this._doDeactivate();
	            this._active = false;
	        }
	    };
	    DragTracker.prototype.start = function (eventTarget, x, y, shift) {
	        if (shift === void 0) { shift = false; }
	        this.cancel();
	        if (this._active && this._doStart(eventTarget, x, y, shift)) {
	            this._currentX = this._startX = x;
	            this._currentY = this._startY = y;
	            this._dragging = true;
	            this._completed = false;
	            this._showFeedback(x, y);
	            return true;
	        }
	        return false;
	    };
	    DragTracker.prototype.drag = function (eventTarget, x, y) {
	        if (this._dragging) {
	            this._currentX = x;
	            this._currentY = y;
	            if (this._doDrag(eventTarget, x, y)) {
	                this._moveFeedback(x, y);
	                return true;
	            }
	        }
	        return false;
	    };
	    DragTracker.prototype.cancel = function () {
	        try {
	            if (this._dragging) {
	                try {
	                    this._dragging = false;
	                    this._doCanceled(this._currentX, this._currentY);
	                }
	                finally {
	                    this._doEnded();
	                }
	            }
	        }
	        finally {
	            this._hideFeedback();
	        }
	    };
	    DragTracker.prototype.drop = function (eventTarget, x, y) {
	        try {
	            if (this._dragging) {
	                try {
	                    this._currentX = x;
	                    this._currentY = y;
	                    this._dragging = false;
	                    if (this._canAccept(eventTarget, x, y)) {
	                        this._doCompleted(eventTarget, x, y);
	                        this._completed = true;
	                    }
	                    else {
	                        this._doCanceled(x, y);
	                    }
	                }
	                finally {
	                    this._doEnded();
	                }
	            }
	        }
	        finally {
	            this._hideFeedback();
	        }
	    };
	    DragTracker.prototype.getNextRequest = function (x, y) {
	        return null;
	    };
	    Object.defineProperty(DragTracker.prototype, "currentX", {
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._currentX;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DragTracker.prototype, "currentY", {
	        get: function () {
	            return this._currentY;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DragTracker.prototype._showFeedback = function (x, y) {
	    };
	    DragTracker.prototype._moveFeedback = function (x, y) {
	    };
	    DragTracker.prototype._hideFeedback = function () {
	    };
	    DragTracker.prototype._doActivate = function () {
	    };
	    DragTracker.prototype._doDeactivate = function () {
	    };
	    DragTracker.prototype._doStart = function (eventTarget, x, y, shfit) {
	        return true;
	    };
	    DragTracker.prototype._doDrag = function (eventTarget, x, y) {
	        return true;
	    };
	    DragTracker.prototype._doCanceled = function (x, y) {
	    };
	    DragTracker.prototype._canAccept = function (eventTarget, x, y) {
	        return true;
	    };
	    DragTracker.prototype._doCompleted = function (eventTarget, x, y) {
	    };
	    DragTracker.prototype._doEnded = function () {
	    };
	    return DragTracker;
	}(Base_1.Base));
	exports.DragTracker = DragTracker;
	});

	unwrapExports(DragTracker_1);
	var DragTracker_2 = DragTracker_1.DragTracker;

	var VisualTool_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// VisualTool.ts
	// 2019. 07. 25. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var DRAG_THRESHOLD = 3;
	var VisualTool = /** @class */ (function (_super) {
	    __extends(VisualTool, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function VisualTool(owner, name) {
	        var _this = _super.call(this) || this;
	        _this._clickX = 0;
	        _this._clickY = 0;
	        _this._currX = 0;
	        _this._currY = 0;
	        _this._owner = owner;
	        _this._name = name;
	        _this._previous = null;
	        return _this;
	    }
	    VisualTool.prototype._doDispose = function () {
	        this._dragTracker = null;
	        this._previous = null;
	        this._owner = null;
	        this._mouseEventTarget = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(VisualTool.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualTool.prototype, "name", {
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualTool.prototype, "previous", {
	        /** previous */
	        get: function () {
	            return this._previous;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualTool.prototype, "dragTracker", {
	        /** dragTracker */
	        get: function () {
	            return this._dragTracker;
	        },
	        set: function (value) {
	            if (value !== this._dragTracker) {
	                if (this._dragTracker) {
	                    this._dragTracker.deactivate();
	                }
	                this._dragTracker = value;
	                if (this._dragTracker) {
	                    this._dragTracker.activate();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualTool.prototype, "dragging", {
	        /** dragging */
	        get: function () {
	            return this._dragTracker && this._dragTracker.dragging;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    VisualTool.prototype.findElementAt = function (x, y, hitTesting) {
	        return this._owner.findElementAt(x, y, hitTesting);
	    };
	    VisualTool.prototype.activate = function (previous) {
	        this._doActivated(previous);
	    };
	    VisualTool.prototype.deactivate = function () {
	        this._doDeactivated();
	    };
	    // keyDown(key: number, ctrl: boolean, shift: boolean, alt: boolean, event: Event): boolean {
	    VisualTool.prototype.keyDown = function (event) {
	        return this._doKeyDown(event);
	    };
	    VisualTool.prototype.keyUp = function (event) {
	        return this._doKeyUp(event);
	    };
	    VisualTool.prototype.keyPress = function (event) {
	        return this._doKeyPress(event);
	    };
	    VisualTool.prototype.mouseDown = function (event) {
	        var x = this._currX = this._clickX = event["mouseX"];
	        var y = this._currY = this._clickY = event["mouseY"];
	        if (this.dragging) {
	            this._stopDragTracker(x, y, false);
	        }
	        this._doMouseDown(event);
	    };
	    VisualTool.prototype.mouseMove = function (event) {
	        var x = this._currX = event["mouseX"];
	        var y = this._currY = event["mouseY"];
	        var tracker = this.dragTracker;
	        if (tracker) {
	            if (tracker.dragging) {
	                if (event.buttons == undefined || event.buttons > 0 || (Utils_1.Utils.ieOld && event.buttons >= 0)) {
	                    if (!tracker.drag(this._mouseEventTarget, x, y)) {
	                        var request = tracker.getNextRequest(x, y);
	                        if (request) {
	                            this._stopDragTracker(x, y, true);
	                            this.dragTracker = this._getDragTracker(request, x, y);
	                            this._startDragTracker(x, y, false);
	                        }
	                    }
	                }
	                else {
	                    this._stopDragTracker(x, y, true);
	                }
	            }
	            else if (Math.abs(x - this._clickX) >= DRAG_THRESHOLD || Math.abs(y - this._clickY) >= DRAG_THRESHOLD) {
	                this._startDragTracker(x, y, false);
	            }
	            else {
	                this._doMouseMove(event);
	            }
	        }
	        else {
	            this._doMouseMove(event);
	        }
	    };
	    VisualTool.prototype.mouseUp = function (event) {
	        var x = this._currX = event["mouseX"];
	        var y = this._currY = event["mouseY"];
	        if (this.dragging) {
	            //this.hasOwnProperty("_prevCheckIndex") && !(this._dragTracker instanceof ScrollThumbTracker) && (delete this._prevCheckIndex);
	            this._stopDragTracker(x, y, false);
	        }
	        else {
	            this._dragTracker = null;
	            this._doMouseUp(event);
	        }
	    };
	    VisualTool.prototype.mouseEnter = function (event) {
	        this._doMouseEnter(event);
	    };
	    VisualTool.prototype.mouseLeave = function (event) {
	        this._doMouseLeave(event);
	    };
	    VisualTool.prototype.mouseOver = function (event) {
	        this._doMouseOver(event);
	    };
	    VisualTool.prototype.mouseOutside = function () {
	        this._doMouseOutside();
	    };
	    VisualTool.prototype.mouseWheel = function (event) {
	        return this._doMouseWheel(event /*event.mouseX, event.mouseY, event.wheelDelta, event.wheelDelta*/);
	    };
	    VisualTool.prototype.contextMenu = function (event) {
	        return this._doContextMenu(event);
	    };
	    VisualTool.prototype.click = function (event) {
	        this._doClick(event);
	    };
	    VisualTool.prototype.dblclick = function (event) {
	        this._doDblClick(event);
	    };
	    VisualTool.prototype.setFocus = function (target) {
	        this._doSetFocus(target);
	    };
	    VisualTool.prototype.focusLeave = function () {
	        this._doFocusLeave();
	    };
	    Object.defineProperty(VisualTool.prototype, "mouseEventTarget", {
	        //-------------------------------------------------------------------------
	        // internal members
	        //-------------------------------------------------------------------------
	        /** mouseTarget */
	        get: function () {
	            return this._mouseEventTarget;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    VisualTool.prototype.isMouseEventTarget = function (elt) {
	        return elt["_dom"] === this._mouseEventTarget;
	    };
	    VisualTool.prototype._doActivated = function (previous) {
	    };
	    VisualTool.prototype._doDeactivated = function () {
	    };
	    VisualTool.prototype._doKeyDown = function (event) {
	        // key: number, ctrl: boolean, shift: boolean, alt: boolean, 
	        return false;
	    };
	    VisualTool.prototype._doKeyUp = function (event) {
	        return false;
	    };
	    VisualTool.prototype._doKeyPress = function (event) {
	        return false;
	    };
	    //x: number, y: number, ctrl: boolean, shift: boolean, button: number
	    VisualTool.prototype._doMouseDown = function (event) {
	    };
	    // x: number, y: number
	    VisualTool.prototype._doMouseMove = function (event) {
	    };
	    /** 그리드 밖에서도 호출된다. */
	    VisualTool.prototype._doMouseUp = function (event) {
	        // const x = event["mouseX"];
	        // const y = event["mouseY"];
	    };
	    // x: number, y: number
	    VisualTool.prototype._doMouseEnter = function (event) {
	    };
	    // x: number, y: number
	    VisualTool.prototype._doMouseLeave = function (event) {
	    };
	    // x: number, y: number
	    VisualTool.prototype._doMouseOver = function (event) {
	    };
	    VisualTool.prototype._doMouseOutside = function () {
	    };
	    VisualTool.prototype._doMouseWheel = function (event) {
	        return false;
	    };
	    VisualTool.prototype._doContextMenu = function (event) {
	        return;
	    };
	    /** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */
	    VisualTool.prototype._doClick = function (event) {
	    };
	    VisualTool.prototype._doDblClick = function (event) {
	    };
	    VisualTool.prototype._doSetFocus = function (target) {
	    };
	    VisualTool.prototype._doFocusLeave = function () {
	    };
	    VisualTool.prototype._getDragTracker = function (request, x, y) {
	        return null;
	    };
	    VisualTool.prototype._startDragTracker = function (x, y, shift) {
	        if (this._dragTracker) {
	            if (this._dragTracker.start(this._mouseEventTarget, x, y, shift)) {
	                this._doDragTrackerStarted(this._dragTracker);
	            }
	            else {
	                this._dragTracker = null;
	            }
	        }
	    };
	    VisualTool.prototype._stopDragTracker = function (x, y, canceled) {
	        if (this.dragging) {
	            var tracker = this._dragTracker;
	            if (canceled) {
	                tracker.cancel();
	            }
	            else {
	                tracker.drop(this._mouseEventTarget, x, y);
	            }
	            this.dragTracker = null;
	            this._doDragTrackerFinished(tracker, canceled);
	            //this._owner && this._owner.invalidate && this._owner.invalidate();
	        }
	    };
	    VisualTool.prototype._doDragTrackerStarted = function (dragTracker) {
	        //trace("dragTracker started: " + dragTracker.name());
	    };
	    VisualTool.prototype._doDragTrackerFinished = function (dragTracker, canceled) {
	        //trace("dragTracker stopped: " + dragTracker.name() + ", " + (canceled ? "canceled" : "completed"));
	    };
	    return VisualTool;
	}(Base_1.Base));
	exports.VisualTool = VisualTool;
	var EditRequest = /** @class */ (function (_super) {
	    __extends(EditRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditRequest() {
	        return _super.call(this) || this;
	    }
	    Object.defineProperty(EditRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** cursor */
	        get: function () {
	            return Types.Cursor.DEFAULT;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditRequest.prototype, "source", {
	        /** source */
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditRequest.prototype, "selectable", {
	        /** selectable */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditRequest.prototype, "dblClickable", {
	        /** dblClickable */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return EditRequest;
	}(Base_1.Base));
	exports.EditRequest = EditRequest;
	});

	unwrapExports(VisualTool_1);
	var VisualTool_2 = VisualTool_1.VisualTool;
	var VisualTool_3 = VisualTool_1.EditRequest;

	var ScrollBar_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var ScrollEventType;
	(function (ScrollEventType) {
	    ScrollEventType["LINE"] = "line";
	    ScrollEventType["PAGE"] = "page";
	    ScrollEventType["THUMB_TRACK"] = "thumbTrack";
	    ScrollEventType["THUMB_END"] = "thumbEnd";
	})(ScrollEventType = exports.ScrollEventType || (exports.ScrollEventType = {}));
	var ScrollElement = /** @class */ (function (_super) {
	    __extends(ScrollElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollElement(scrollBar, name) {
	        var _this = _super.call(this, name) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._pressed = false;
	        _this._scrollBar = scrollBar;
	        return _this;
	    }
	    ScrollElement.prototype._doDispose = function () {
	        this._scrollBar = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ScrollElement.prototype, "scrollBar", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** scrollBar */
	        get: function () {
	            return this._scrollBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollElement.prototype, "vertical", {
	        /** vertical */
	        get: function () {
	            return this._scrollBar.vertical;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollElement.prototype, "pressed", {
	        /** pressed */
	        get: function () {
	            return this._pressed;
	        },
	        set: function (value) {
	            if (value != this._pressed) {
	                this._pressed = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollElement.prototype._doDraw = function (dom) {
	        this._doRender(dom);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ScrollElement.prototype._doRender = function (dom) {
	    };
	    ScrollElement.prototype._changed = function () {
	        this.invalidate();
	    };
	    return ScrollElement;
	}(VisualElement_1.VisualElement));
	var ScrollEdge = /** @class */ (function (_super) {
	    __extends(ScrollEdge, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollEdge() {
	        return _super.call(this, null, "scrollEdgeView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollEdge.prototype._getCssSelector = function () {
	        return "rg-scrolledge";
	    };
	    return ScrollEdge;
	}(ScrollElement));
	exports.ScrollEdge = ScrollEdge;
	var ScrollTrack = /** @class */ (function (_super) {
	    __extends(ScrollTrack, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollTrack(scrollBar) {
	        return _super.call(this, scrollBar, "scrollTrackView") || this;
	    }
	    ScrollTrack.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollTrack.prototype._getCssSelector = function () {
	        return "rg-scrolltrack";
	    };
	    return ScrollTrack;
	}(ScrollElement));
	exports.ScrollTrack = ScrollTrack;
	var ScrollButton = /** @class */ (function (_super) {
	    __extends(ScrollButton, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollButton(scrollBar, far) {
	        var _this = _super.call(this, scrollBar, "scrollButtonView") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = true;
	        _this._far = far;
	        return _this;
	    }
	    Object.defineProperty(ScrollButton.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollButton.prototype, "far", {
	        /** far */
	        get: function () {
	            return this._far;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollButton.prototype._getCssSelector = function () {
	        if (this.scrollBar.vertical) {
	            return this._far ? "rg-scroll-down" : "rg-scroll-up";
	        }
	        else {
	            return this._far ? "rg-scroll-right" : "rg-scroll-left";
	        }
	    };
	    return ScrollButton;
	}(ScrollElement));
	exports.ScrollButton = ScrollButton;
	var ScrollThumb = /** @class */ (function (_super) {
	    __extends(ScrollThumb, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollThumb(scrollBar) {
	        return _super.call(this, scrollBar, "scrollThumbView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollThumb.prototype._getCssSelector = function () {
	        return "rg-scrollthumb";
	    };
	    return ScrollThumb;
	}(ScrollElement));
	exports.ScrollThumb = ScrollThumb;
	var ScrollBar = /** @class */ (function (_super) {
	    __extends(ScrollBar, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollBar(container, vertical) {
	        if (vertical === void 0) { vertical = false; }
	        var _this = _super.call(this, "scrollBarView") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._lineScrollSize = 1;
	        _this._pageScrollSize = 1;
	        _this._minThumbSize = 20;
	        _this._min = 0;
	        _this._max = 0;
	        _this._pos = 0;
	        _this._page = 0;
	        _this._maxPosition = 0;
	        _this._buttonSize = 20;
	        _this._needLayout = true;
	        _this._container = container;
	        _this._vertical = vertical;
	        _this._track = new ScrollTrack(_this);
	        _this.addChild(_this._track);
	        _this._thumb = new ScrollThumb(_this);
	        _this.addChild(_this._thumb);
	        _this._nearButton = new ScrollButton(_this, false);
	        _this.addChild(_this._nearButton);
	        _this._farButton = new ScrollButton(_this, true);
	        _this.addChild(_this._farButton);
	        return _this;
	    }
	    ScrollBar.prototype._doDispose = function () {
	        this._track = this._track.dispose();
	        this._thumb = this._thumb.dispose();
	        this._nearButton = this._nearButton.dispose();
	        this._farButton = this._farButton.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ScrollBar.prototype, "container", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** container */
	        get: function () {
	            return this._container;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "lineScrollSize", {
	        /** lineScrollSize */
	        get: function () {
	            return this._lineScrollSize;
	        },
	        set: function (value) {
	            value = Math.max(1, value);
	            if (value != this._lineScrollSize) {
	                this._lineScrollSize = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "pageScrollSize", {
	        /** pageScrollSize */
	        get: function () {
	            return this._pageScrollSize;
	        },
	        set: function (value) {
	            value = Math.max(1, value);
	            if (value != this._pageScrollSize) {
	                this._pageScrollSize = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "minThumbSize", {
	        /** minThumbSize */
	        get: function () {
	            return this._minThumbSize;
	        },
	        set: function (value) {
	            value = Math.max(8, value);
	            if (value != this._minThumbSize) {
	                this._minThumbSize = value;
	                this.invalidateLayout();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "vertical", {
	        /** vertical */
	        get: function () {
	            return this._vertical;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "pos", {
	        /** pos */
	        get: function () {
	            return this._pos;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollBar.prototype, "maxPosition", {
	        /** maxPosition */
	        get: function () {
	            return this._maxPosition;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ScrollBar.prototype.layoutContent = function () {
	        if (this._needLayout) {
	            this._needLayout = false;
	            this._doLayoutContent();
	        }
	    };
	    ScrollBar.prototype.setProperties = function (min, max, page) {
	        min = Math.max(0, min);
	        max = Math.max(min, max);
	        if (min != this._min || max != this._max || page != this._page) {
	            this._min = min;
	            this._max = max;
	            this._page = page;
	            this._pos = Math.min(this._max, Math.max(this._min, this._pos));
	            this._maxPosition = Math.max(0, this._max - this._page);
	            this.invalidate(); //Layout(); <-- 그리드 layout 중 다시 layout 요청된다.
	            this._needLayout = true;
	        }
	    };
	    ScrollBar.prototype.setPosition = function (value, layout) {
	        if (layout === void 0) { layout = true; }
	        value = Math.min(this._maxPosition, Math.max(this._min, value));
	        if (value != this._pos) {
	            this._pos = value;
	            this.invalidate(); //Layout(); <-- 그리드 layout 중 다시 layout 요청된다.
	            this._needLayout = true;
	            layout && this.layoutContent();
	        }
	    };
	    ScrollBar.prototype.ptInTrack = function (x, y, far) {
	        var p = this.containerToElement(x, y);
	        if (this._vertical) {
	            if (p.y >= this._nearButton.height && p.x < this._farButton.y) {
	                return !far && p.y < this._thumb.y || far && p.y >= this._thumb.bottom;
	            }
	        }
	        else {
	            if (x >= this._nearButton.width && x < this._farButton.x) {
	                return !far && p.x < this._thumb.x || far && p.x >= this._thumb.right;
	            }
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollBar.prototype._getCssSelector = function () {
	        return this._vertical ? "rg-vscrollbar" : "rg-hscrollbar";
	    };
	    ScrollBar.prototype.draw = function () {
	        _super.prototype.draw.call(this);
	    };
	    ScrollBar.prototype._doDraw = function (dom) {
	    };
	    ScrollBar.prototype._doSizeChanged = function () {
	        this.invalidateLayout();
	    };
	    ScrollBar.prototype.invalidateLayout = function () {
	        this._needLayout = true;
	        _super.prototype.invalidateLayout.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ScrollBar.prototype._doLayoutContent = function () {
	        var vertical = this._vertical;
	        var szBtn = this._buttonSize;
	        var h = this.height;
	        var w = this.width;
	        var szTrack = (vertical ? h : w) - szBtn * 2;
	        var szThumb = Math.min(szTrack, Math.max(this._minThumbSize, Math.floor(szTrack * this._page / (this._max - this._min + 1))));
	        var pos = szBtn + Math.min(szTrack - szThumb, Math.max(0, Math.floor((szTrack - szThumb) * this._pos / (this._maxPosition - this._min))));
	        this._track.setBounds(0, 0, w, h);
	        if (vertical) {
	            this._nearButton.setBounds(0, 0, w, szBtn);
	            this._farButton.setBounds(0, h - szBtn, w, szBtn);
	            if (szThumb <= szTrack) {
	                this._thumb.setBounds(2, pos, w - 4, szThumb);
	            }
	        }
	        else {
	            this._nearButton.setBounds(0, 0, szBtn, h);
	            this._farButton.setBounds(w - szBtn, 0, szBtn, h);
	            if (szThumb <= szTrack) {
	                this._thumb.setBounds(pos, 2, szThumb, h - 4);
	            }
	        }
	    };
	    ScrollBar.prototype._doScroll = function (eventType, delta, position) {
	        this.fireEvent(ScrollBar.SCROLLED, eventType, delta, position);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    ScrollBar.SCROLLED = "onScrollBarScrolled";
	    return ScrollBar;
	}(VisualElement_1.VisualElement));
	exports.ScrollBar = ScrollBar;
	var ScrollThumbTracker = /** @class */ (function (_super) {
	    __extends(ScrollThumbTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollThumbTracker(owner) {
	        return _super.call(this, owner, "scrollThumbTracker") || this;
	    }
	    ScrollThumbTracker.prototype._doDispose = function () {
	        this._thumb = this._thumb && this._thumb.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ScrollThumbTracker.prototype, "thumb", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** thumb */
	        get: function () {
	            return this._thumb;
	        },
	        set: function (value) {
	            this._thumb = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ScrollThumbTracker.prototype, "startWhenCreated", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ScrollThumbTracker.prototype._doStart = function (eventTarget, x, y) {
	        var bar = this._thumb.scrollBar;
	        var p = bar.containerToElement(x, y);
	        if (bar.vertical) {
	            this._offset = p.y - this._thumb.y;
	        }
	        else {
	            this._offset = p.x - this._thumb.x;
	        }
	        this._thumb.pressed = true;
	        return true;
	    };
	    ScrollThumbTracker.prototype._doDrag = function (eventTarget, x, y) {
	        return this.$_doScroll(x, y, ScrollEventType.THUMB_TRACK);
	    };
	    ScrollThumbTracker.prototype._doCompleted = function (eventTarget, x, y) {
	        return this.$_doScroll(x, y, ScrollEventType.THUMB_END);
	    };
	    ScrollThumbTracker.prototype._doCanceled = function (x, y) {
	    };
	    ScrollThumbTracker.prototype._doEnded = function () {
	        this._thumb.pressed = false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ScrollThumbTracker.prototype.$_doScroll = function (x, y, eventType) {
	        var bar = this._thumb.scrollBar;
	        var len = bar["_maxPosition"] - bar["_min"] + 1;
	        var szBtn = bar["_buttonSize"];
	        var p = bar.containerToElement(x, y);
	        if (bar.vertical) {
	            var scrLen = bar.height - szBtn * 2 - this._thumb.height;
	            if (scrLen <= 0) {
	                return false;
	            }
	            p.y -= this._offset;
	            p.y = (p.y - szBtn) * len / scrLen;
	            bar["_doScroll"](eventType, 0, Math.floor(p.y));
	        }
	        else {
	            var scrLen = bar.width - szBtn * 2 - this._thumb.width;
	            if (scrLen <= 0) {
	                return false;
	            }
	            p.x -= this._offset;
	            p.x = (p.x - szBtn) * len / scrLen;
	            bar["_doScroll"](eventType, 0, Math.floor(p.x));
	        }
	        return true;
	    };
	    return ScrollThumbTracker;
	}(DragTracker_1.DragTracker));
	exports.ScrollThumbTracker = ScrollThumbTracker;
	var ScrollButtonTimer = /** @class */ (function (_super) {
	    __extends(ScrollButtonTimer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollButtonTimer() {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._timer = undefined;
	        _this._ready = false;
	        return _this;
	    }
	    Object.defineProperty(ScrollButtonTimer.prototype, "active", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** active */
	        get: function () {
	            return this._timer !== undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ScrollButtonTimer.prototype.start = function (button) {
	        this._button = button;
	        this._scrollBar = button.scrollBar;
	        this._button.pressed = true;
	        this._active = true;
	        this.$_fireEvent();
	        setTimeout(function () {
	            if (this._ready) {
	                this._ready = false;
	                this._timer = setInterval(function () {
	                    if (this._active) {
	                        this.$_fireEvent();
	                    }
	                }.bind(this), 20);
	            }
	        }.bind(this), 200);
	        this._ready = true;
	    };
	    ScrollButtonTimer.prototype.move = function (x, y) {
	        var p = this._button.containerToElement(x, y);
	        this._active = this._button.containsInClient(p.x, p.y);
	        // this._active = this._button.containsInClient(x, y);
	    };
	    ScrollButtonTimer.prototype.stop = function () {
	        // 위 setTimeout callback이 실행되기 전에 stop()이 호출되면 무시해야 한다.
	        this._ready = false;
	        if (this._timer) {
	            clearInterval(this._timer);
	            this._timer == undefined;
	        }
	        // 아무데서나 stop이 호출될 수 있으므로 _button이 null일 수도 있다.
	        if (this._button) {
	            this._button.pressed = false;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ScrollButtonTimer.prototype.$_fireEvent = function () {
	        var delta = this._button.far ? 1 : -1;
	        var type = ScrollEventType.LINE;
	        this._scrollBar["_doScroll"](type, this._scrollBar.lineScrollSize * delta, 0);
	    };
	    return ScrollButtonTimer;
	}(EventAware_1.EventAware));
	exports.ScrollButtonTimer = ScrollButtonTimer;
	var ScrollTrackTimer = /** @class */ (function (_super) {
	    __extends(ScrollTrackTimer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollTrackTimer() {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._timer = undefined;
	        _this._ready = false;
	        _this._mouseX = 0;
	        _this._mouseY = 0;
	        return _this;
	    }
	    Object.defineProperty(ScrollTrackTimer.prototype, "active", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** active */
	        get: function () {
	            return this._active;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ScrollTrackTimer.prototype.start = function (bar, far, x, y) {
	        this._scrollBar = bar;
	        this._far = far;
	        this._active = true;
	        this.$_fireEvent();
	        setTimeout(function () {
	            if (this._ready) {
	                this._ready = false;
	                this._timer = setInterval(function () {
	                    if (this._active) {
	                        this.$_fireEvent();
	                    }
	                }.bind(this), 50);
	            }
	        }.bind(this), 200);
	        this._ready = true;
	        var p = this._scrollBar.containerToElement(x, y);
	        this._mouseX = p.x;
	        this._mouseY = p.y;
	    };
	    ScrollTrackTimer.prototype.move = function (x, y) {
	        var p = this._scrollBar.containerToElement(x, y);
	        this._mouseX = p.x;
	        this._mouseY = p.y;
	        this._active = this._scrollBar.ptInTrack(p.x, p.y, this._far);
	    };
	    ScrollTrackTimer.prototype.stop = function () {
	        this._ready = false;
	        if (this._timer) {
	            clearInterval(this._timer);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ScrollTrackTimer.prototype.$_fireEvent = function () {
	        var type = null;
	        var delta = 0;
	        var thumb = this._scrollBar["_thumb"];
	        if (this._scrollBar.vertical) {
	            var y = this._mouseY;
	            if (this._far && y > thumb.bottom) {
	                type = ScrollEventType.PAGE;
	                delta = 1;
	            }
	            else if (!this._far && y < thumb.y) {
	                type = ScrollEventType.PAGE;
	                delta = -1;
	            }
	        }
	        else {
	            var x = this._mouseX;
	            if (this._far && x > thumb.right) {
	                delta = 1;
	                type = ScrollEventType.PAGE;
	            }
	            else if (x < thumb.x) {
	                type = ScrollEventType.PAGE;
	                delta = -1;
	            }
	        }
	        delta != 0 && this._scrollBar["_doScroll"](type, this._scrollBar.pageScrollSize * delta, 0);
	    };
	    return ScrollTrackTimer;
	}(Base_1.Base));
	exports.ScrollTrackTimer = ScrollTrackTimer;
	/**
	 * window 수준의 event를 받기 위해 (capture가 이모저모 번거로운 일인 듯))
	 * 각 element의 event를 처리하지 않고 container 수준에서 처리하도록 한다.
	 * visual container에 scrollTool이 생성되고,
	 * scroll element가 클릭되면 active tool이 scroll tool이 된다.
	 * scroll 관련 action이 종료되면 이전 active tool로 재설정된다.
	 */
	var ScrollTool = /** @class */ (function (_super) {
	    __extends(ScrollTool, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ScrollTool(owner) {
	        var _this = _super.call(this, owner, "scrollTool") || this;
	        _this._buttonTimer = new ScrollButtonTimer();
	        _this._trackTimer = new ScrollTrackTimer();
	        _this._thumbTracker = new ScrollThumbTracker(owner);
	        return _this;
	    }
	    ScrollTool.prototype._doDispose = function () {
	        this._thumbTracker.cancel();
	        this._thumbTracker = this._thumbTracker.dispose();
	        this._buttonTimer.stop();
	        this._buttonTimer = this._buttonTimer.dispose();
	        this._trackTimer.stop();
	        this._trackTimer = this._trackTimer.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ScrollTool.prototype._doMouseDown = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        //console.log("SCROLLBAR DOWN: " + x + ", " + y);
	        if (this._clickElement) {
	            this._clickElement.pressed = false;
	            this._clickElement = null;
	        }
	        this._buttonTimer.stop();
	        this._trackTimer.stop();
	        var elt = this.findElementAt(x, y, false);
	        if (elt instanceof ScrollElement) {
	            this._clickElement = elt;
	            elt.pressed = true;
	            if (elt instanceof ScrollButton) {
	                this._buttonTimer.start(elt);
	            }
	            else if (elt instanceof ScrollThumb) {
	                this._thumbTracker.thumb = elt;
	                this.dragTracker = this._thumbTracker;
	            }
	            else if (elt instanceof ScrollTrack) {
	                var far = elt.scrollBar.ptInTrack(x, y, true);
	                this._trackTimer.start(elt.scrollBar, far, x, y);
	            }
	        }
	    };
	    ScrollTool.prototype._doMouseMove = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        //console.log("SCROLLBAR MOVE: " + x + ", " + y);
	        var elt = this._clickElement;
	        if (elt instanceof ScrollButton && this._buttonTimer.active) {
	            this._buttonTimer.move(x, y);
	        }
	        else if (elt instanceof ScrollTrack && this._trackTimer.active) {
	            this._trackTimer.move(x, y);
	        }
	    };
	    ScrollTool.prototype._doMouseUp = function (event) {
	        // const x = event["mouseX"];
	        // const y = event["mouseY"];
	        //console.log("SCROLLBAR UP: " + x + ", " + y);
	        if (this._clickElement) {
	            this._clickElement.pressed = false;
	            this._clickElement = null;
	        }
	        this._buttonTimer.stop();
	        this._trackTimer.stop();
	    };
	    return ScrollTool;
	}(VisualTool_1.VisualTool));
	exports.ScrollTool = ScrollTool;
	});

	unwrapExports(ScrollBar_1);
	var ScrollBar_2 = ScrollBar_1.ScrollEventType;
	var ScrollBar_3 = ScrollBar_1.ScrollEdge;
	var ScrollBar_4 = ScrollBar_1.ScrollTrack;
	var ScrollBar_5 = ScrollBar_1.ScrollButton;
	var ScrollBar_6 = ScrollBar_1.ScrollThumb;
	var ScrollBar_7 = ScrollBar_1.ScrollBar;
	var ScrollBar_8 = ScrollBar_1.ScrollThumbTracker;
	var ScrollBar_9 = ScrollBar_1.ScrollButtonTimer;
	var ScrollBar_10 = ScrollBar_1.ScrollTrackTimer;
	var ScrollBar_11 = ScrollBar_1.ScrollTool;

	var GridHeadElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridHeadElement.ts
	// 2019. 08. 07. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var GridHeadCellElement = /** @class */ (function (_super) {
	    __extends(GridHeadCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridHeadCellElement(model, name) {
	        if (name === void 0) { name = "gridHeadCellView"; }
	        var _this = _super.call(this, name) || this;
	        _this._text = "";
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._styleName = "";
	        _this._textChanged = false;
	        _this._model = model;
	        return _this;
	    }
	    Object.defineProperty(GridHeadCellElement.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridHeadCellElement.prototype.setStyleName = function (td, dom, s) {
	        if (s != this._styleName || dom != this["_cellDom"]) {
	            this._styleName = s;
	            this["_className"] = ""; // className이 변경되도록...
	            this._setClassName(td);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridHeadCellElement.prototype._getCssSelector = function () {
	        return this._styleName;
	    };
	    GridHeadCellElement.prototype._clearCellCache = function () {
	        _super.prototype._clearCellCache.call(this);
	        this._textChanged = true;
	    };
	    GridHeadCellElement.prototype._doPrepareValue = function (grid, model) {
	        var s = this._model.headText;
	        if (s != this._text) {
	            this._text = this._model.headText;
	            this._textChanged = true;
	        }
	    };
	    GridHeadCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        if (this._textChanged) {
	            this._textChanged = false;
	            dom.textContent = this._text;
	        }
	    };
	    return GridHeadCellElement;
	}(CellElement_1.CellElement));
	exports.GridHeadCellElement = GridHeadCellElement;
	var CheckHeadCellElement = /** @class */ (function (_super) {
	    __extends(CheckHeadCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CheckHeadCellElement(model) {
	        var _this = _super.call(this, model, "chekHeadCellView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._checked = false;
	        _this._checkVisible = false;
	        return _this;
	    }
	    Object.defineProperty(CheckHeadCellElement.prototype, "checked", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** checked */
	        get: function () {
	            return this._checked;
	        },
	        set: function (value) {
	            this._checked = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    CheckHeadCellElement.prototype._clearCellCache = function () {
	        this._check = null;
	    };
	    CheckHeadCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        var checkVisible = this.model.showAll;
	        if (checkVisible && !this._check) {
	            var check = this._check = document.createElement("input");
	            var css = check.style;
	            check.type = "checkbox";
	            check.className = "rg-checkbox";
	            css.display = "inline-block";
	            dom.appendChild(check);
	        }
	        if (checkVisible != this._checkVisible) {
	            this._check.style.display = checkVisible ? "inline-block" : "none";
	            this._check.checked = this._checked;
	            this._checkVisible = checkVisible;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    CheckHeadCellElement.prototype.$_updateContent = function () {
	        this._check.checked = this._checked;
	    };
	    return CheckHeadCellElement;
	}(GridHeadCellElement));
	exports.CheckHeadCellElement = CheckHeadCellElement;
	var GridHeadElement = /** @class */ (function (_super) {
	    __extends(GridHeadElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridHeadElement(grid) {
	        var _this = _super.call(this, null, "gridHeadView") || this;
	        _this._cells = [];
	        _this.addChild(_this._indicatorCell = new GridHeadCellElement(grid.rowIndicator));
	        _this.addChild(_this._stateCell = new GridHeadCellElement(grid.stateBar));
	        _this.addChild(_this._checkCell = new CheckHeadCellElement(grid.checkBar));
	        return _this;
	    }
	    GridHeadElement.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridHeadElement.prototype, "allChecked", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._checkCell.checked;
	        },
	        set: function (value) {
	            var view = this._checkCell;
	            view.checked = value;
	            view["$_updateContent"]();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridHeadElement.prototype.getHeadModel = function (td) {
	        for (var i = 0; i < this._cells.length; i++) {
	            if (td === this._getTableCell(0, i)) {
	                return this._cells[i].model;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridHeadElement.prototype._getCssSelector = function () {
	        return "rg-head";
	    };
	    GridHeadElement.prototype._doPrepareTableExtents = function (lm) {
	        var objs = lm.sectionObjects;
	        var cell;
	        this._cells = [];
	        for (var _i = 0, objs_1 = objs; _i < objs_1.length; _i++) {
	            var obj = objs_1[_i];
	            if (obj instanceof RowIndicator_1.RowIndicator) {
	                cell = this._indicatorCell;
	                if (cell.visible = cell.model.visible) {
	                    this._cells.push(cell);
	                    cell.width = lm.indicatorWidth;
	                }
	                else {
	                    cell.removeCellDom();
	                }
	            }
	            if (obj instanceof StateBar_1.StateBar) {
	                cell = this._stateCell;
	                if (cell.visible = cell.model.visible) {
	                    this._cells.push(cell);
	                    cell.width = lm.stateBarWidth;
	                }
	                else {
	                    cell.removeCellDom();
	                }
	            }
	            if (obj instanceof CheckBar_1.CheckBar) {
	                cell = this._checkCell;
	                if (cell.visible = cell.model.visible) {
	                    this._cells.push(cell);
	                    cell.width = lm.checkBarWidth;
	                }
	                else {
	                    cell.removeCellDom(true);
	                }
	            }
	        }
	    };
	    GridHeadElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    GridHeadElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var count = this._cells.length;
	        for (var i = 0; i < count; i++) {
	            var view = this._cells[i];
	            var model = view.model;
	            var cell = model.getHeadCell();
	            var td = this._getTableCell(0, i);
	            var dom = td.firstElementChild; // this.getCellContent(0, i);
	            var clsName = this.$_getCellSelector() + " " + model.getHeadStyleName();
	            view.setStyleName(td, dom, clsName);
	            view.updateCell(grid, cell, dom);
	        }
	    };
	    GridHeadElement.prototype._doRender = function (dom) {
	    };
	    GridHeadElement.prototype._getTableRowCount = function (lm) {
	        return 1;
	    };
	    GridHeadElement.prototype._getTableRowHeight = function (lm, tr) {
	        return this.height;
	    };
	    GridHeadElement.prototype._getCellCount = function (lm) {
	        return this._cells.length;
	    };
	    GridHeadElement.prototype._getCellWidth = function (lm, col) {
	        return this._cells[col].width;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridHeadElement.prototype.$_getCellSelector = function () {
	        return GridHeadElement.CELL_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridHeadElement.CELL_CSS = "rg-head-cell";
	    return GridHeadElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.GridHeadElement = GridHeadElement;
	});

	unwrapExports(GridHeadElement_1);
	var GridHeadElement_2 = GridHeadElement_1.GridHeadCellElement;
	var GridHeadElement_3 = GridHeadElement_1.CheckHeadCellElement;
	var GridHeadElement_4 = GridHeadElement_1.GridHeadElement;

	var GridFootElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridFootElement.ts
	// 2019. 08. 07. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var GridFootCellElement = /** @class */ (function (_super) {
	    __extends(GridFootCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridFootCellElement() {
	        var _this = _super.call(this, "gridHeadCellView") || this;
	        _this._text = "";
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._styleName = "";
	        _this._textChanged = false;
	        return _this;
	    }
	    Object.defineProperty(GridFootCellElement.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        set: function (value) {
	            if (value !== this._model) {
	                this._model = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridFootCellElement.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value || "";
	                this._textChanged = true;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridFootCellElement.prototype.setStyleName = function (dom, s) {
	        if (s != this._styleName) {
	            this._styleName = s;
	            this._setClassName(dom);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridFootCellElement.prototype._getCssSelector = function () {
	        return this._styleName;
	    };
	    GridFootCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        if (this._textChanged) {
	            this._textChanged = false;
	            dom.textContent = this._text;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridFootCellElement.prototype._doRender = function (dom) {
	    };
	    return GridFootCellElement;
	}(CellElement_1.CellElement));
	exports.GridFootCellElement = GridFootCellElement;
	var GridFootElement = /** @class */ (function (_super) {
	    __extends(GridFootElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridFootElement() {
	        var _this = _super.call(this, null, "gridFootView") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        _this._count = 0;
	        for (var i = 0; i < 3; i++) {
	            _this.addChild(_this._cells[i] = new GridFootCellElement());
	        }
	        return _this;
	    }
	    GridFootElement.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridFootElement.prototype.getFootModel = function (td) {
	        for (var i = 0; i < this._cells.length; i++) {
	            if (td === this._getTableCell(0, i)) {
	                return this._cells[i].model;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridFootElement.prototype._getCssSelector = function () {
	        return "rg-foot";
	    };
	    GridFootElement.prototype._doPrepareTableExtents = function (lm) {
	        var objs = lm.sectionObjects;
	        var cell;
	        this._count = 0;
	        for (var _i = 0, objs_1 = objs; _i < objs_1.length; _i++) {
	            var obj = objs_1[_i];
	            if (obj.visible) {
	                cell = this._cells[this._count++];
	                cell.model = obj;
	                if (obj instanceof RowIndicator_1.RowIndicator) {
	                    cell.width = lm.indicatorWidth;
	                }
	                else if (obj instanceof StateBar_1.StateBar) {
	                    cell.width = lm.stateBarWidth;
	                }
	                else if (obj instanceof CheckBar_1.CheckBar) {
	                    cell.width = lm.checkBarWidth;
	                }
	            }
	        }
	    };
	    GridFootElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    GridFootElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var count = this._count;
	        while (this.childCount < count) {
	            this.addChild(this._cells[this.childCount]);
	        }
	        while (this.childCount > count) {
	            this.removeLast();
	        }
	        for (var i = 0; i < count; i++) {
	            var view = this.getChild(i);
	            var model = view.model;
	            var cell = model.getFootCell();
	            var td = this._getTableCell(0, i);
	            var dom = td.firstElementChild; // this.getCellContent(0, i);
	            var clsName = this.$_getCellSelector() + " " + model.getFootStyleName();
	            view.setStyleName(td, clsName);
	            view.text = model.footText;
	            view.updateCell(grid, cell, dom);
	        }
	    };
	    GridFootElement.prototype._doRender = function (dom) {
	    };
	    GridFootElement.prototype._getTableRowCount = function (lm) {
	        return 1;
	    };
	    GridFootElement.prototype._getTableRowHeight = function (lm, tr) {
	        return this.height;
	    };
	    GridFootElement.prototype._getCellCount = function (lm) {
	        return this._count;
	    };
	    GridFootElement.prototype._getCellWidth = function (lm, col) {
	        return this._cells[col].width;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridFootElement.prototype.$_getCellSelector = function () {
	        return GridFootElement.CELL_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridFootElement.CELL_CSS = "rg-foot-cell";
	    return GridFootElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.GridFootElement = GridFootElement;
	});

	unwrapExports(GridFootElement_1);
	var GridFootElement_2 = GridFootElement_1.GridFootCellElement;
	var GridFootElement_3 = GridFootElement_1.GridFootElement;

	var FormatOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FormatOptions.ts
	// 2019. 08. 07. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var FormatOptions = /** @class */ (function (_super) {
	    __extends(FormatOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormatOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        _this._numberFormat = DecimalFormatter_1.DecimalFormatter.DEFAULT_FORMAT;
	        _this._datetimeFormat = DateTimeWriter_1.DateTimeWriter.DEFAULT_FORMAT;
	        _this._datetimeWriter = DateTimeWriter_1.DateTimeWriter.Default;
	        _this._numberFormatter = DecimalFormatter_1.DecimalFormatter.Default;
	        return _this;
	    }
	    FormatOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormatOptions.prototype, "textFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** textFormat */
	        get: function () {
	            return this._textFormat;
	        },
	        set: function (value) {
	            if (value != this._textFormat) {
	                this._textFormat = value;
	                this._textFormatter = value ? TextFormatter_1.TextFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "datetimeFormat", {
	        /** datetimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                this._datetimeWriter = value ? DateTimeWriter_1.DateTimeWriter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "numberFormat", {
	        /** numberFormat */
	        get: function () {
	            return this._numberFormat;
	        },
	        set: function (value) {
	            if (value != this._numberFormat) {
	                this._numberFormat = value;
	                this._numberFormatter = value ? DecimalFormatter_1.DecimalFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolFormatter = value ? BooleanFormatter_1.BooleanFormatter.getFormatter(value) : null;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "textFormatter", {
	        /** textFormatter */
	        get: function () {
	            return this._textFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "numberFormatter", {
	        /** numberFormatter */
	        get: function () {
	            return this._numberFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "datetimeWriter", {
	        /** datetimeWriter */
	        get: function () {
	            return this._datetimeWriter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormatOptions.prototype, "boolFormatter", {
	        /** boolFormatter */
	        get: function () {
	            return this._boolFormatter;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormatOptions.prototype.getTextFormatter = function (formatter) {
	        return formatter || this._textFormatter;
	    };
	    FormatOptions.prototype.getNumberFormatter = function (formatter) {
	        return formatter || this._numberFormatter;
	    };
	    FormatOptions.prototype.getDateWriter = function (writer) {
	        return writer || this._datetimeWriter;
	    };
	    FormatOptions.prototype.getBoolFormatter = function (formatter) {
	        return formatter || this._boolFormatter;
	    };
	    return FormatOptions;
	}(GridOptions.GridBaseOptions));
	exports.FormatOptions = FormatOptions;
	});

	unwrapExports(FormatOptions_1);
	var FormatOptions_2 = FormatOptions_1.FormatOptions;

	var Toast = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Toast.ts
	// 2020. 01. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var ToastOptions = /** @class */ (function (_super) {
	    __extends(ToastOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ToastOptions(source) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._message = "";
	        _this._visible = true;
	        _this._zIndex = undefined;
	        _this._styleName = "rg-toast";
	        source && _this.assignFrom(source);
	        return _this;
	    }
	    ToastOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ToastOptions.prototype, "message", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** message */
	        get: function () {
	            return this._message;
	        },
	        set: function (value) {
	            this._message = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToastOptions.prototype, "visible", {
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToastOptions.prototype, "zIndex", {
	        /** zIndex */
	        get: function () {
	            return this._zIndex;
	        },
	        set: function (value) {
	            if (value != this._zIndex) {
	                this._zIndex = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToastOptions.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            return this._styleName;
	        },
	        set: function (value) {
	            this._styleName = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ToastOptions.prototype.assignFrom = function (source) {
	        if (typeof source === 'string') {
	            this._message = source;
	            if (this._message) {
	                this._visible = true;
	            }
	        }
	        else if (typeof source === 'boolean') {
	            this._visible = source;
	        }
	        else {
	            _super.prototype.assignFrom.call(this, source);
	        }
	    };
	    return ToastOptions;
	}(Base_1.Base));
	exports.ToastOptions = ToastOptions;
	var ToastView = /** @class */ (function (_super) {
	    __extends(ToastView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ToastView(container) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minWidth = 0;
	        _this._maxWidth = 0;
	        _this._dropdownCount = 8;
	        _this._showing = false;
	        _this._container = container;
	        _this._element = _this.$_createElement();
	        return _this;
	    }
	    ToastView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ToastView.prototype, "minWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minWidth */
	        get: function () {
	            return this._minWidth;
	        },
	        set: function (value) {
	            this._minWidth = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToastView.prototype, "maxWidth", {
	        /** maxWidth */
	        get: function () {
	            return this._maxWidth;
	        },
	        set: function (value) {
	            this._maxWidth = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToastView.prototype, "dropDownCount", {
	        /** dropDownCount */
	        get: function () {
	            return this._dropdownCount;
	        },
	        set: function (value) {
	            this._dropdownCount = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ToastView.prototype.show = function (options) {
	        this._showing = true;
	        try {
	            this.$_show(options);
	        }
	        finally {
	            this._showing = false;
	        }
	    };
	    ToastView.prototype.hide = function () {
	        var elt = this._element;
	        if (!elt || !elt.parentNode) {
	            return;
	        }
	        this._container["_container"].removeChild(elt);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ToastView.prototype.$_createElement = function () {
	        var element = document.createElement("div");
	        element.onkeydown = function (e) {
	            if (e.keyCode == 27) {
	                this.hide();
	            }
	        }.bind(this);
	        this.$_disableSelection(element);
	        var span = this._span = document.createElement("span");
	        this.$_disableSelection(span);
	        element.appendChild(span);
	        return element;
	    };
	    ToastView.prototype.$_show = function (options) {
	        var s = options.message;
	        if (!s) {
	            return;
	        }
	        var elt = this._element;
	        if (!elt) {
	            return;
	        }
	        var span = this._span;
	        var displayOptions = this._container["_gridView"].displayOptions;
	        span.innerHTML = s;
	        elt.className = options.styleName;
	        elt.style.position = "absolute";
	        elt.style.overflow = "hidden";
	        elt.style.zIndex = options.zIndex != undefined ? options.zIndex : displayOptions.toastZIndex;
	        /*
	        if (styles) {
	            background = styles.background();
	            foreground = styles.foreground();
	            border = styles.border();
	            figureBackground = styles.figureBackground();
	            fontFamily = styles.fontFamily();
	            fontStyle = styles.fontItalic() ? "italic" : "noramal";
	            fontWidth = styles.fontBold() ? "bold" : "normal";
	            textDecoration = styles.fontUnderline() ? "underline" : "";
	            paddingLeft = styles.paddingLeft();
	            paddingRight = styles.paddingRight();
	            paddingTop = styles.paddingTop();
	            paddingBottom = styles.paddingBottom();
	        }
	        
	        if (background) {
	            elt.style.background = background.css();
	        } else if (_norgba) {
	            new SolidBrush("rgba(33, 33, 33, 0.8)").applyToCss(elt.style);
	        } else {
	            elt.style.background = "rgba(33, 33, 33, 0.8)";
	        }
	        if (foreground) {
	            elt.style.color = foreground.css();
	        } else {
	            elt.style.color = "rgb(255, 255, 255)";
	        }

	        if (border) {
	            elt.style.border = border.css();
	        } else {
	            elt.style.border = "1px solid rgb(200, 200, 200)";
	        }
	        if (figureBackground) {
	            elt.style.boxShadow = figureBackground.css() + " 1px 2px 5px";
	        } else {
	            elt.style.boxShadow = "rgb(0, 0, 0, 0.8) 1px 2px 5px";
	        }

	        elt.style.fontFamily = fontFamily ? fontFamily : "Tahoma";
	        elt.style.fontStyle = fontStyle ? fontStyle : "normal";
	        elt.style.fontWeight = fontWeight ? fontWeight : "normal";
	        elt.style.fontSize = fontSize ? fontSize + "pt" : "16pt";
	        elt.style.paddingTop = paddingTop ? paddingTop + "px" : "8px";
	        elt.style.paddingBottom = paddingBottom ? paddingBottom + "px" : "8px";
	        elt.style.paddingLeft = paddingLeft ? paddingLeft + "px" : "16px";
	        elt.style.paddingRight = paddingRight ? paddingRight + "px" : "16px";
	        if (textDecoration)
	            elt.style.textDecoration = textDecoration;
	        */
	        this._container["_container"].appendChild(elt);
	        var rElt = Utils_1.Utils.getBoundingClientRect2(elt);
	        var rContainer = Utils_1.Utils.getBoundingClientRect2(this._container["_container"]);
	        var w = rElt.width + 10;
	        var h = rElt.height + 10;
	        var cw = rContainer.width;
	        var ch = rContainer.height;
	        elt.style.left = ((cw - w) / 2) + "px";
	        elt.style.top = ((ch - h) / 2) + "px";
	    };
	    ToastView.prototype.$_disableSelection = function (element) {
	        if (typeof element.onselectstart !== 'undefined') {
	            element.onselectstart = function () { return false; };
	        }
	        else if (typeof element.style['MozUserSelect'] !== 'undefined') {
	            element.style['MozUserSelect'] = 'none';
	        }
	        else {
	            element.onmousedown = function () { return false; };
	        }
	    };
	    return ToastView;
	}(Base_1.Base));
	exports.ToastView = ToastView;
	var ToastManager = /** @class */ (function (_super) {
	    __extends(ToastManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ToastManager(grid) {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._container = grid.container;
	        return _this;
	    }
	    ToastManager.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ToastManager.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._active;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ToastManager.prototype.show = function (options, force, action) {
	        if (!this._active || force) {
	            this.close();
	            options = options instanceof ToastOptions ? options : options ? new ToastOptions(options) : null;
	            if (options && options.visible) {
	                if (!this._toast) {
	                    this._toast = new ToastView(this._container);
	                }
	                this._toast.show(options);
	                this._active = true;
	                if (action) {
	                    setTimeout(function () {
	                        try {
	                            action();
	                        }
	                        finally {
	                            this.close();
	                        }
	                    }.bind(this), 0);
	                }
	                return;
	            }
	        }
	        action && action();
	    };
	    ToastManager.prototype.close = function () {
	        if (this._active) {
	            this._toast && this._toast.hide();
	            this._active = false;
	        }
	    };
	    return ToastManager;
	}(Base_1.Base));
	exports.ToastManager = ToastManager;
	});

	unwrapExports(Toast);
	var Toast_1 = Toast.ToastOptions;
	var Toast_2 = Toast.ToastView;
	var Toast_3 = Toast.ToastManager;

	var SortingOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditOptions.ts
	// 2019. 12. 02. created by flowmt
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var SortingOptions = /** @class */ (function (_super) {
	    __extends(SortingOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SortingOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = true;
	        _this._style = Types.SortStyle.EXCLUSIVE;
	        _this._handleVisibility = Types.HandleVisibility.VISIBLE;
	        _this._commitBeforeSorting = true;
	        _this._toast = new Toast.ToastOptions({ visible: false, message: "Sorting..." });
	        _this._keepFocusedRow = false;
	        _this._textCase = Types.SortCase.SENSITIVE;
	        _this._showSortOrder = false;
	        _this._pageSorting = false;
	        return _this;
	        // TODO toast
	    }
	    SortingOptions.prototype._doDispose = function () {
	        this._toast = this._toast.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SortingOptions.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "style", {
	        /** style */
	        get: function () {
	            return this._style;
	        },
	        set: function (value) {
	            if (value != this._style) {
	                this._style = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "handleVisibility", {
	        /** handleVisibility */
	        get: function () {
	            return this._handleVisibility;
	        },
	        set: function (value) {
	            if (value != this._handleVisibility) {
	                this._handleVisibility = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "commitBeforeSorting", {
	        /* commitBeforeSorting */
	        get: function () {
	            return this._commitBeforeSorting;
	        },
	        set: function (value) {
	            if (value != this._commitBeforeSorting) {
	                this._commitBeforeSorting = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "keepFocusedRow", {
	        /* keepFocusedRow */
	        get: function () {
	            return this._keepFocusedRow;
	        },
	        set: function (value) {
	            if (value != this._keepFocusedRow) {
	                this._keepFocusedRow = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "textCase", {
	        /* textCase */
	        get: function () {
	            return this._textCase;
	        },
	        set: function (value) {
	            if (value != this._textCase) {
	                this._textCase = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "showSortOrder", {
	        /* showSortOrder */
	        get: function () {
	            return this._showSortOrder;
	        },
	        set: function (value) {
	            if (value != this._showSortOrder) {
	                this._showSortOrder = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "pageSorting", {
	        /* pageSorting */
	        get: function () {
	            return this._pageSorting;
	        },
	        set: function (value) {
	            if (value != this._pageSorting) {
	                this._pageSorting = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SortingOptions.prototype, "toast", {
	        /** toast */
	        get: function () {
	            return this._toast;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return SortingOptions;
	}(GridOptions.GridBaseOptions));
	exports.SortingOptions = SortingOptions;
	});

	unwrapExports(SortingOptions_1);
	var SortingOptions_2 = SortingOptions_1.SortingOptions;

	var ContentPane_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ContentPane.ts
	// 2019. 08. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var ContentPane = /** @class */ (function (_super) {
	    __extends(ContentPane, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ContentPane(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name) || this;
	    }
	    ContentPane.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ContentPane.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            var p = this.parent;
	            while (p) {
	                if (p instanceof GridBase_1.GridBase) {
	                    return p;
	                }
	                p = p.parent;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ContentPane.prototype.measure = function (grid, hintWidth, hintHeight) {
	        return this._doMeasure(grid, hintWidth, hintHeight);
	    };
	    ContentPane.prototype.layoutContent = function (lm, width, height) {
	        this._doLayoutContent(lm, width, height);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ContentPane.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        return new Size_1.Size(hintWidth, hintHeight);
	    };
	    ContentPane.prototype._doLayoutContent = function (lm, width, height) {
	    };
	    return ContentPane;
	}(VisualElement_1.LayerElement));
	exports.ContentPane = ContentPane;
	var LeftContentPane = /** @class */ (function (_super) {
	    __extends(LeftContentPane, _super);
	    function LeftContentPane() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    LeftContentPane.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.setProperty("background", "#fff", "important");
	    };
	    return LeftContentPane;
	}(ContentPane));
	exports.LeftContentPane = LeftContentPane;
	var DataContentPane = /** @class */ (function (_super) {
	    __extends(DataContentPane, _super);
	    function DataContentPane() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return DataContentPane;
	}(ContentPane));
	exports.DataContentPane = DataContentPane;
	var FixedColumnBarElement = /** @class */ (function (_super) {
	    __extends(FixedColumnBarElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FixedColumnBarElement(grid) {
	        var _this = _super.call(this, "fixedColumnBar") || this;
	        _this._grid = grid;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedColumnBarElement.prototype._getCssSelector = function () {
	        return this._grid.fixedOptions.columnBarStyle;
	    };
	    return FixedColumnBarElement;
	}(VisualElement_1.LayerElement));
	var FixedContentPane = /** @class */ (function (_super) {
	    __extends(FixedContentPane, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FixedContentPane(name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, name) || this;
	    }
	    FixedContentPane.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedContentPane.prototype._doLayoutContent = function (lm, width, height) {
	        if (!this._barView) {
	            this._barView = this._createBar(lm.grid);
	            this.addChild(this._barView);
	            this._barView2 = this._createBar(lm.grid);
	            this.addChild(this._barView2);
	        }
	        this._layoutBars(lm, width, height);
	        _super.prototype._doLayoutContent.call(this, lm, width, height);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FixedContentPane.prototype._createBar = function (grid) {
	        return new FixedColumnBarElement(grid);
	    };
	    FixedContentPane.prototype._layoutBars = function (lm, width, height) {
	        var w = lm.fixedBarWidth;
	        var hFoot = lm.footBounds.isEmpty ? 0 : lm.footBounds.height;
	        this._barView.visible = w > 0;
	        this._barView2.visible = false;
	        if (this._barView.visible) {
	            var h = Math.min(height - hFoot, lm.dataBounds.bottom);
	            this._barView.setBounds(width - w, 0, w, h);
	            if (hFoot > 0) {
	                this._barView2.visible = true;
	                this._barView2.setBounds(width - w, height - hFoot, w, hFoot);
	            }
	        }
	    };
	    return FixedContentPane;
	}(DataContentPane));
	exports.FixedContentPane = FixedContentPane;
	var RightColumnBarElement = /** @class */ (function (_super) {
	    __extends(RightColumnBarElement, _super);
	    function RightColumnBarElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    RightColumnBarElement.prototype._getCssSelector = function () {
	        return "rg-right-column-bar";
	    };
	    return RightColumnBarElement;
	}(VisualElement_1.LayerElement));
	var RightContentPane = /** @class */ (function (_super) {
	    __extends(RightContentPane, _super);
	    function RightContentPane() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightContentPane.prototype._createBar = function () {
	        return new RightColumnBarElement("rightColumnBar");
	    };
	    RightContentPane.prototype._layoutBars = function (lm, width, height) {
	        var w = lm.rightBarWidth;
	        var hFooter = lm.footBounds.isEmpty ? 0 : lm.footBounds.height;
	        this._barView.visible = w > 0;
	        this._barView2.visible = false;
	        if (this._barView.visible) {
	            var h = Math.min(height - hFooter, lm.dataBounds.bottom);
	            this._barView.setBounds(0, 0, w, h);
	            if (hFooter > 0) {
	                this._barView2.visible = true;
	                this._barView2.setBounds(0, height - hFooter, w, hFooter);
	            }
	        }
	    };
	    return RightContentPane;
	}(FixedContentPane));
	exports.RightContentPane = RightContentPane;
	// TODO 위치등을 결정해야 한다. message의 경우 사용자가 html로 입력을 하게 허용할것인가? 하위 element를 두고 text만 입력하게 할것인가?
	// waiting panel을 보여주고 싶어서.
	var WaitingPane = /** @class */ (function (_super) {
	    __extends(WaitingPane, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function WaitingPane(name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this.visible = false;
	        return _this;
	    }
	    Object.defineProperty(WaitingPane.prototype, "message", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._message;
	        },
	        set: function (value) {
	            if (value != this._message) {
	                this._message = value;
	                this["_dom"].innerHTML = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    WaitingPane.prototype._getCssSelector = function () {
	        return "rg-waiting";
	    };
	    WaitingPane.prototype._doLayoutContent = function (lm, width, height) {
	        _super.prototype._doLayoutContent.call(this, lm, width, height);
	    };
	    return WaitingPane;
	}(ContentPane));
	exports.WaitingPane = WaitingPane;
	// TODO 점검.
	// messagePane (data가 없는 경우 사용예정) 의 경우 keyboard, mouse event를 받을수 있어야 한다.
	// data가 없는 상태에서 키보드를 이용해서 data를 추가하는 경우 copy&paste등을 생각해야 한다.
	var MessagePane = /** @class */ (function (_super) {
	    __extends(MessagePane, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MessagePane(name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        _this.visible = false;
	        return _this;
	    }
	    Object.defineProperty(MessagePane.prototype, "message", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._message;
	        },
	        set: function (value) {
	            if (value != this._message) {
	                this._message = value;
	                this["_dom"].innerHTML = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    MessagePane.prototype._getCssSelector = function () {
	        return "rg-message-pane";
	    };
	    MessagePane.prototype._doLayoutContent = function (lm, width, height) {
	        _super.prototype._doLayoutContent.call(this, lm, width, height);
	    };
	    return MessagePane;
	}(ContentPane));
	exports.MessagePane = MessagePane;
	});

	unwrapExports(ContentPane_1);
	var ContentPane_2 = ContentPane_1.ContentPane;
	var ContentPane_3 = ContentPane_1.LeftContentPane;
	var ContentPane_4 = ContentPane_1.DataContentPane;
	var ContentPane_5 = ContentPane_1.FixedContentPane;
	var ContentPane_6 = ContentPane_1.RightContentPane;
	var ContentPane_7 = ContentPane_1.WaitingPane;
	var ContentPane_8 = ContentPane_1.MessagePane;

	var Editors = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Editors.ts
	// 2019. 07. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });










	var $$_EDITOR_THRESHOLD = Utils_1.Utils.isSafari ? 1 : 0;
	var $$_EMPTY_TEXT_VALUE = '***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er';
	var CellEditor = /** @class */ (function (_super) {
	    __extends(CellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function CellEditor(grid, parentElement) {
	        var _this = _super.call(this) || this;
	        _this._textCase = Types.TextInputCase.DEFAULT;
	        _this._readOnly = false;
	        _this._started = false;
	        _this._dateConverter = DateTimeConverter_1.DateTimeConverter.Default;
	        _this._boolConverter = BooleanConverter_1.BooleanConverter.Default;
	        _this._cellBounds = new Rectangle_1.Rectangle();
	        _this._checkHangeul = false;
	        _this._composing = false;
	        _this._grid = grid;
	        _this._options = grid.editorOptions;
	        _this._parentElement = parentElement;
	        _this._editor = _this._createEditor(parentElement);
	        // TODO 컬럼/셀 마다 editor의 스타일을 변경하는 경우 여기에 하면 안되고 GridDelegate 또는 BodyTableCell에서 처리 필요.
	        _this._editor.className = CellEditor.EDITOR_CSS + _this._getInputSelector();
	        _this._container && (_this._container.className = CellEditor.CONTAINER_CSS);
	        _this._editor["$_owner"] = _this;
	        _this._editIndex = grid.getIndex();
	        if (_this._editor) {
	            var gridContainer = grid.container;
	            gridContainer.$_addListener(_this._editor, "focus", function (e) {
	                this._grid["$_setEditFocused"](true, e);
	            }.bind(_this), false);
	            gridContainer.$_addListener(_this._editor, "focusin", function (e) {
	                this._grid["$_setEditFocused"](true, e);
	            }.bind(_this), false);
	            gridContainer.$_addListener(_this._editor, "blur", function (e) {
	                this._grid["$_setEditFocused"](false, e);
	            }.bind(_this), false);
	            gridContainer.$_addListener(_this._editor, "focusout", function (e) {
	                this._grid["$_setEditFocused"](false, e);
	            }.bind(_this), false);
	        }
	        _this.setVisible(false, true);
	        _this.$_setEditorId(_this._editor);
	        return _this;
	    }
	    CellEditor.prototype._doDispose = function () {
	        this._editor && this._editor.parentElement.removeChild(this._editor);
	        this._editor = null;
	        this._container && this._container.parentElement.removeChild(this._container);
	        this._container = null;
	        this._grid = null;
	        this._controller = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellEditor.prototype, "emptyValue", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** emptyValue */
	        get: function () {
	            return this._emptyValue;
	        },
	        set: function (value) {
	            if (value != this._emptyValue) {
	                this._emptyValue = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "textCase", {
	        /** textCase */
	        get: function () {
	            return this._textCase;
	        },
	        set: function (value) {
	            if (value != this._textCase) {
	                this._textCase = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "fontFamily", {
	        /** fontFamily */
	        get: function () {
	            return this._fontFamily;
	        },
	        set: function (value) {
	            if (value != this._fontFamily) {
	                this._fontFamily = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "fontSize", {
	        /** fontSize */
	        get: function () {
	            return this._fontSize;
	        },
	        set: function (value) {
	            if (value != this._fontSize) {
	                this._fontSize = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "datetimeFormat", {
	        /** dateTimeFormat */
	        get: function () {
	            return this._datetimeFormat;
	        },
	        set: function (value) {
	            if (value != this._datetimeFormat) {
	                this._datetimeFormat = value;
	                if (value) {
	                    if (!this._saveDateConverter) {
	                        this._saveDateConverter = new DateTimeConverter_1.DateTimeConverter(value);
	                    }
	                    this._saveDateConverter.formatString = value;
	                    this._dateConverter = this._saveDateConverter;
	                }
	                else {
	                    this._dateConverter = DateTimeConverter_1.DateTimeConverter.Default;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "todayChar", {
	        /** todayChar */
	        get: function () {
	            return this._todayChar;
	        },
	        set: function (value) {
	            if (value != this._todayChar) {
	                this._todayChar = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "nowChar", {
	        /** nowChar */
	        get: function () {
	            return this._nowChar;
	        },
	        set: function (value) {
	            if (value != this._nowChar) {
	                this._nowChar = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                if (value) {
	                    if (!this._saveBoolConverter) {
	                        this._saveBoolConverter = new BooleanConverter_1.BooleanConverter(value);
	                    }
	                    this._saveBoolConverter.format = value;
	                    this._boolConverter = this._saveBoolConverter;
	                }
	                else {
	                    this._boolConverter = BooleanConverter_1.BooleanConverter.Default;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "editor", {
	        /** editor */
	        get: function () {
	            return this._editor;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "visible", {
	        /** visible */
	        get: function () {
	            return parseInt(this._container.style.width) > $$_EDITOR_THRESHOLD && parseInt(this._container.style.height) > $$_EDITOR_THRESHOLD;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CellEditor.prototype.setVisible = function (value, force) {
	        if (this._editor instanceof HTMLInputElement) {
	            if (value && this._editor["value"] == $$_EMPTY_TEXT_VALUE) {
	                this._editor["value"] = "";
	            }
	            else if (!value && (this._editor["value"] == null || this._editor["value"] == undefined || this._editor["value"] == "")) {
	                this._editor["value"] = $$_EMPTY_TEXT_VALUE;
	                if (this._grid["$_editFocused"]) {
	                    this.selectAll();
	                }
	            }
	        }
	        if (!value) {
	            this._container.style.width = $$_EDITOR_THRESHOLD + "px";
	            this._container.style.height = $$_EDITOR_THRESHOLD + "px";
	        }
	    };
	    Object.defineProperty(CellEditor.prototype, "readOnly", {
	        /** readOnly */
	        get: function () {
	            return this._readOnly;
	        },
	        set: function (value) {
	            if (this._editor instanceof HTMLInputElement) {
	                this._editor.readOnly = this._readOnly = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "editing", {
	        /** editing */
	        get: function () {
	            return this._started;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "editIndex", {
	        /** editIndex */
	        get: function () {
	            return this._editIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "hasButton", {
	        /** hasButton */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "value", {
	        /** value */
	        get: function () {
	            return this._editor.value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CellEditor.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    CellEditor.prototype.applyOptions = function (options) {
	        options && this.assignFrom(options);
	    };
	    CellEditor.prototype.setEditIndex = function (value) {
	        this._editIndex.assign(value);
	    };
	    CellEditor.prototype.setController = function (value) {
	        this._controller = value;
	    };
	    CellEditor.prototype.beginEdit = function (clear, select) {
	        if (!this._started) {
	            if (this._started = this._doBeginEdit()) {
	                clear && this.clear();
	                select && this.selectAll();
	            }
	        }
	    };
	    CellEditor.prototype.endEdit = function () {
	        if (this._started) {
	            this._doEndEdit();
	            this._started = false;
	        }
	    };
	    CellEditor.prototype.isEdited = function () {
	        return false;
	    };
	    CellEditor.prototype.caretToLast = function () {
	    };
	    CellEditor.prototype.commit = function () {
	        this._doCommit();
	    };
	    CellEditor.prototype.setReadOnly = function (value) {
	    };
	    CellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        return undefined;
	    };
	    CellEditor.prototype.setEditValue = function (value) {
	        this._oldValue = value;
	    };
	    CellEditor.prototype.setCellEditValue = function (value, dropdown) {
	        if (!this.readOnly && this._requestStart(dropdown)) {
	            this.setEditValue(value);
	            this._doChanged();
	        }
	    };
	    CellEditor.prototype.getEditText = function () {
	        return "";
	    };
	    CellEditor.prototype.selectAll = function () {
	        if (this._grid["$_editFocused"]) {
	            //TODO performance 
	            this._selectAll();
	        }
	    };
	    CellEditor.prototype.clear = function () {
	        if (this._editor instanceof HTMLInputElement) {
	            //TODO performance
	            this._editor["value"] = "";
	        }
	    };
	    CellEditor.prototype.setFocus = function () {
	        //TODO performance
	        this._editor.focus({ preventScroll: true });
	    };
	    CellEditor.prototype.setEditorTitle = function (index) {
	        // const grid = index.grid;
	        // const options = grid.editorOptions;
	        // if (!grid._loading && this._editor && index && index.I() >= 0 && options && options._titleExprStatement) {
	        // 	this._editor.title = "";
	        // 	var item = index.item();
	        // 	if (!(item instanceof GridRow || item instanceof TreeItem)) {
	        // 		return;
	        // 	}
	        // 	var cell = grid._body.getCellSimple(index);
	        // 	if (!(cell instanceof DataCell)) {
	        // 		return;
	        // 	}
	        // 	var runtime = options._titleExprRuntime;
	        // 	var v = cell.value() instanceof Date ? this._dateConverter.getText(cell.value()) : cell.displayText();
	        // 	runtime.setCell(cell);
	        // 	runtime.setValue(v);
	        // 	var title = options._titleExprStatement.evaluate(options._titleExprRuntime)			
	        // 	this._editor.title = title;
	        // }
	    };
	    CellEditor.prototype.setBounds = function (x, y, w, h) {
	    };
	    CellEditor.prototype.setCellBounds = function (x, y, w, h) {
	        this._cellBounds.set(x, y, w, h);
	    };
	    CellEditor.prototype.closeList = function (accept) {
	    };
	    CellEditor.prototype.dropDownList = function (force) {
	    };
	    CellEditor.prototype.buttonClicked = function (index) {
	    };
	    CellEditor.prototype.initOptions = function () {
	        this._emptyValue = undefined;
	        this.booleanFormat = null;
	        this._todayChar = null;
	        this._nowChar = null;
	        this.datetimeFormat = null;
	        this._textCase = Types.TextInputCase.DEFAULT;
	        this._fontFamily = null;
	        this._fontSize = null;
	        this._checkHangeul = false;
	    };
	    CellEditor.prototype.$_setEditorId = function (editor) {
	    };
	    CellEditor.prototype._changed = function () {
	    };
	    CellEditor.prototype.$_setController = function (value) {
	        this._controller = value;
	    };
	    CellEditor.prototype._editField = function () {
	        return this._grid.dataSource ? this._grid.dataSource.getField(this._editIndex.dataField) : null;
	    };
	    CellEditor.prototype._isDateEditor = function () {
	        return false;
	    };
	    CellEditor.prototype._requestStart = function (dropDown) {
	        if (!this._started) {
	            this.selectAll();
	            return this._controller.onEditorStart(this);
	        }
	        return this._started;
	    };
	    CellEditor.prototype._valToStr = function (value) {
	        var index = this.editIndex;
	        var s = "";
	        try {
	            if (value !== undefined || this._mask) {
	                var fld = index.grid.dataSource.getField(index.dataField);
	                if (fld) {
	                    switch (fld.dataType) {
	                        case Types.ValueType.DATETIME:
	                            if (value) {
	                                s = this._dateConverter.getText(value);
	                            }
	                            if (this._mask) {
	                                s = this._mask.writeBuffer(s);
	                            }
	                            break;
	                        case Types.ValueType.BOOLEAN:
	                            s = this._boolConverter.toText(value);
	                            break;
	                        case Types.ValueType.NUMBER:
	                            if (!isNaN(value)) {
	                                s = Utils_1.Utils.toStr(value);
	                            }
	                            break;
	                        case Types.ValueType.OBJECT:
	                            var col = index.column;
	                            var dataRow = index.dataRow;
	                            var key = col["_objectKey"];
	                            var fn = col["_objectCallback"];
	                            if (value) {
	                                s = fn && typeof fn === "function" ? fn(fld.orgFieldName, dataRow, value) : key && value.hasOwnProperty(key) ? value[key] : value != null && typeof value == "object" ? JSON.stringify(value) : "";
	                            }
	                            break;
	                        default:
	                            s = this._mask ? this._mask.writeBuffer(value) : value;
	                            break;
	                    }
	                }
	                else {
	                    s = value;
	                }
	            }
	        }
	        catch (err) {
	            //_throwDebug(err);
	            s = value;
	        }
	        return s === null ? "" : s;
	    };
	    CellEditor.prototype._strToVal = function (s) {
	        s = Utils_1.Utils.toStr(s);
	        var index = this._editIndex;
	        var tcase = index.dataColumn && this._textCase == Types.TextInputCase.DEFAULT ? index.dataColumn.textInputCase : this._textCase;
	        try {
	            var fld = index.grid.dataSource.getField(index.dataField);
	            if (fld) {
	                var t = fld.dataType;
	                if (t == Types.ValueType.DATETIME || (s && this._isDateEditor() && t == Types.ValueType.TEXT)) {
	                    var dateFld = t == Types.ValueType.DATETIME;
	                    var d = null;
	                    if (s && s == this._nowChar) {
	                        d = new Date();
	                    }
	                    if (!d && s && s == this._todayChar) {
	                        d = new Date();
	                        d.setHours(0, 0, 0, 0);
	                    }
	                    if (!d) {
	                        this._mask && (s = this._mask.getStripValue());
	                        d = this._dateConverter.getDate(s);
	                    }
	                    return dateFld ? (!d || isNaN(d.getFullYear()) ? undefined : d) : d ? this._dateConverter.getText(d) : undefined;
	                }
	                else if (t == Types.ValueType.BOOLEAN) {
	                    return this._boolConverter.toBoolEx(s);
	                }
	                else if (t == Types.ValueType.NUMBER) {
	                    return parseFloat(s);
	                }
	                else if (t == Types.ValueType.TEXT) {
	                    this._mask && (s = this._mask.getStripValue());
	                }
	            }
	            if (tcase === Types.TextInputCase.UPPER) {
	                return s ? s.toLocaleUpperCase() : s;
	            }
	            else if (tcase === Types.TextInputCase.LOWER) {
	                return s ? s.toLocaleLowerCase() : s;
	            }
	            else {
	                return s;
	            }
	        }
	        catch (err) {
	            //_throwDebug(err);
	            return undefined;
	        }
	    };
	    CellEditor.prototype._dispatchKeyDown = function (event) {
	        if (!this._controller)
	            debugger;
	        return this._controller.onEditorKeyDown(this, event);
	    };
	    CellEditor.prototype._dispatchKeyPress = function (event) {
	        if (!this._controller)
	            debugger;
	        return this._controller.onEditorKeyPress(this, event);
	    };
	    CellEditor.prototype._dispatchKeyUp = function (event) {
	        if (!this._controller)
	            debugger;
	        return this._controller.onEditorKeyUp(this, event);
	    };
	    CellEditor.prototype._dispatchChange = function () {
	        this._controller.onEditorChange(this);
	    };
	    CellEditor.prototype._dispatchSearch = function (text) {
	        this._controller.onEditorSearch(this, text);
	    };
	    CellEditor.prototype._dispatchSearchCellButtonClick = function (text) {
	        return this._controller.onSearchCellButtonClick(this, text);
	    };
	    CellEditor.prototype._dispatchCommit = function () {
	        this._controller.onEditorCommit(this);
	    };
	    CellEditor.prototype._sendToParent = function (e, flag, nohandle) {
	        if (flag === void 0) { flag = undefined; }
	        try {
	            var ctrl = Utils_1.Utils.isMac && e.metaKey || !Utils_1.Utils.isMac && e.ctrlKey;
	            if (flag == 2) { // key press
	                if (this._dispatchKeyPress(e)) {
	                    if (e.preventDefault) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    }
	                    return true;
	                }
	            }
	            else if (flag == 3) { // key up
	                if (this._dispatchKeyUp(e)) {
	                    if (e.preventDefault) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    }
	                    return true;
	                }
	                ;
	                // maxLength를 체크해서 maxLength가 입력되었으면 다음 셀로 넘어간다.
	                try {
	                    var grid = this._controller["_grid"];
	                    var options = grid.editOptions;
	                    var moveNextCell = options.imaxLengthToNextCell;
	                    if (!!moveNextCell) {
	                        var skip = options.skipReadOnly;
	                        var activeTool = grid.activeTool;
	                        var maxLength = this["maxLength"];
	                        var idx = this.editIndex.clone();
	                        var isSpecialKey = Utils_1.Utils.included(e.keyCode, Types.Keys.UP, Types.Keys.PAGEUP, Types.Keys.DOWN, Types.Keys.PAGEDOWN, Types.Keys.F2, Types.Keys.TAB, Types.Keys.ENTER);
	                        if (!this._checkHangeul && !isSpecialKey && !ctrl && !e.altKey && grid && grid.isEditing(idx) && maxLength > 0 && !this._composing && e.keyCode > 47) {
	                            var len = this._editor["value"].length;
	                            if (len >= maxLength) {
	                                idx.right();
	                                if (skip && activeTool.checkReadOnly(idx)) {
	                                    if (!activeTool.skipReadOnly(idx, 1)) {
	                                        idx = this.editIndex.clone();
	                                    }
	                                }
	                                if (!CellIndex_1.CellIndex.areEquals(idx, this.editIndex)) {
	                                    activeTool.setFocused(idx, true);
	                                }
	                                return true;
	                            }
	                        }
	                    }
	                }
	                catch (err) {
	                    if (err instanceof Validation.ValidationError) {
	                        throw err;
	                    }
	                    return true;
	                    // 오류가 나도. 정상처리하도록 한다.
	                }
	            }
	            else { // key down
	                if (this._dispatchKeyDown(e)) {
	                    if (e.preventDefault) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    }
	                    return true;
	                }
	            }
	            return false;
	        }
	        finally {
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    CellEditor.Unselected = {};
	    CellEditor.InvalidFormat = {};
	    CellEditor.EDITOR_CSS = "rg-editor ";
	    CellEditor.CONTAINER_CSS = "rg-editor-container";
	    return CellEditor;
	}(EventAware_1.EventAware));
	exports.CellEditor = CellEditor;
	var DefaultDefinitions = function () {
	    return {
	        "9": new RegExp("[0-9 ]"),
	        "0": new RegExp("[0-9]"),
	        "a": new RegExp("[A-Za-z]"),
	        "*": new RegExp("[A-Za-z0-9]")
	    };
	};
	var EditMask = /** @class */ (function (_super) {
	    __extends(EditMask, _super);
	    //-------------------------------------------------------------------------
	    // constructors
	    //-------------------------------------------------------------------------
	    function EditMask(editor, options) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._includedFormat = false;
	        _this._showInvalidFormatMessage = true;
	        _this._overwrite = false;
	        _this._allowEmpty = false; // 공백이 허용되지 않는 mask이지만 입력값이 없을때는 허용
	        _this._restrictNull = false;
	        _this._definitions = DefaultDefinitions();
	        _this._tests = null;
	        _this._defBuffer = [];
	        _this._editor = editor;
	        options && _this.setOptions(options);
	        return _this;
	    }
	    EditMask.prototype._doDispose = function () {
	        this._definitions = null;
	        this._tests = null;
	        this._editor["_editor"] && (this._editor["_editor"].onclick = null);
	        this._editor = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditMask.prototype, "includedFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** includedFormat */
	        get: function () {
	            return this._includedFormat;
	        },
	        set: function (value) {
	            if (value != this._includedFormat) {
	                this._includedFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "placeHolder", {
	        /** placeHolder */
	        get: function () {
	            return this._placeHolder;
	        },
	        set: function (value) {
	            if (value != this._placeHolder) {
	                this._placeHolder = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "editMask", {
	        /** editMask */
	        get: function () {
	            return this._editMask;
	        },
	        set: function (value) {
	            if (value != this._editMask) {
	                this._editMask = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "definitions", {
	        /** definitions */
	        get: function () {
	            return this._definitions;
	        },
	        set: function (value) {
	            if (value != this._definitions) {
	                this._definitions = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "invalidFormatMessage", {
	        /** invalidFormatMessage */
	        get: function () {
	            return this._invalidFormatMessage;
	        },
	        set: function (value) {
	            if (value != this._invalidFormatMessage) {
	                this._invalidFormatMessage = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "showInvalidFormatMessage", {
	        /** showInvalidFormatMessage */
	        get: function () {
	            return this._showInvalidFormatMessage;
	        },
	        set: function (value) {
	            if (value != this._showInvalidFormatMessage) {
	                this._showInvalidFormatMessage = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "overWrite", {
	        /** overWrite */
	        get: function () {
	            return this._overwrite;
	        },
	        set: function (value) {
	            if (value != this._overwrite) {
	                this._overwrite = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "allowEmpty", {
	        /** allowEmpty */
	        get: function () {
	            return this._allowEmpty;
	        },
	        set: function (value) {
	            if (value != this._allowEmpty) {
	                this._allowEmpty = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditMask.prototype, "restrictNull", {
	        /** restrictNull */
	        get: function () {
	            return this._restrictNull;
	        },
	        set: function (value) {
	            if (value != this._restrictNull) {
	                this._restrictNull = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    EditMask.prototype.clickHandler = function (event) {
	        if (!this.restrictNull) {
	            return;
	        }
	        this._moveCaret();
	    };
	    EditMask.prototype.clearBuffer = function (begin, end) {
	        begin = arguments.length > 0 ? begin : 0;
	        end = arguments.length > 1 ? end : this._tests.length;
	        for (var i = begin; i < end; i++) {
	            this._buffer[i] = this.$_getPlaceHolder(i);
	            this._defBuffer[i] = "";
	        }
	    };
	    EditMask.prototype.writeBuffer = function (value, isPaste) {
	        if (isPaste === void 0) { isPaste = false; }
	        if (value) {
	            isPaste && this.clearBuffer();
	            for (var i = 0, j = 0, cnt = this._tests.length; i < cnt; i++) {
	                if (this._tests[i] && (this._tests[i] instanceof RegExp)) {
	                    var c = void 0;
	                    while ((c = value[j++])) {
	                        if (this._tests[i].test(c)) {
	                            this._buffer[i] = c;
	                            this._defBuffer[i] = c;
	                            break;
	                        }
	                    }
	                }
	            }
	        }
	        return this._buffer && this._buffer.join("");
	    };
	    EditMask.prototype.getStripValue = function () {
	        var ret = [];
	        var buf = [];
	        var allowEmpty = this.allowEmpty;
	        if (this._defBuffer.join("") == "") {
	            return null;
	        }
	        if (this.includedFormat) {
	            for (var i = 0, cnt = this._buffer.length; i < cnt; i++) {
	                var c = this._buffer[i];
	                if (!this._tests[i] || this._tests[i].test(c)) {
	                    ret.push(c);
	                }
	                else if (c == this.$_getPlaceHolder(i) && this._tests[i].test(" ")) {
	                    ret.push(" ");
	                }
	            }
	        }
	        else {
	            for (var i = 0, cnt = this._buffer.length; i < cnt; i++) {
	                if (this._tests[i] && this._tests[i] instanceof RegExp && this._tests[i].test(this._buffer[i])) {
	                    buf.length > 0 && (ret = ret.concat(buf), buf = []);
	                    ret.push(this._buffer[i]);
	                }
	                else if (this._tests[i] && typeof this._tests[i] == "function") {
	                    buf.length > 0 && (ret = ret.concat(buf), buf = []);
	                    ret.push(this._buffer[i]);
	                }
	            }
	        }
	        return ret.join("");
	    };
	    EditMask.prototype.setOptions = function (options) {
	        if (typeof options == "string") { // mask:"9999-99-99"등과 같이 문자열로 입력한 경우 사용한다.
	            this.$_parseMask(options);
	        }
	        else {
	            // 순서가 문제가 되는 경우가 있어서 하나씩 지정한다. (defineClass로 만들지 않음.)
	            options.definitions && this.$_parseDefinitions(options.definitions);
	            options.placeHolder && (this._placeHolder = options.placeHolder);
	            options.editMask && this.$_parseMask(options.editMask);
	            options.includedFormat && (this._includedFormat = options.includedFormat);
	            options.invalidFormatMessage && (this._invalidFormatMessage = options.invalidFormatMessage);
	            options.showInvlidFormatMessage && (this._showInvalidFormatMessage = options.showInvalidFormatMessage);
	            options.overWrite != null && (this._overwrite = !!options.overWrite);
	            options.allowEmpty != null && (this._allowEmpty = !!options.allowEmpty);
	            options.restrictNull !== undefined && (this._restrictNull = !!options.restrictNull);
	            if (this._restrictNull) {
	                var editor = this._editor["_editor"];
	                !editor.onclick && (editor.onclick = this.clickHandler.bind(this));
	            }
	        }
	    };
	    EditMask.prototype.checkValid = function () {
	        var allowEmpty = this.allowEmpty;
	        var checkData = [];
	        if (allowEmpty) {
	            for (var i = 0, cnt = this._tests.length; i < cnt; i++) {
	                checkData[i] = this.$_getPlaceHolder(i);
	            }
	            if (checkData.join("") === this._buffer.join("")) {
	                return true;
	            }
	        }
	        for (var i = 0, cnt = this._tests.length; i < cnt; i++) {
	            var c = this._buffer[i]; // == this.$_getPlaceHolder(i) ? " ": this._buffer[i];
	            if (this._tests[i] && !this._tests[i].test(c)) {
	                if (c == this.$_getPlaceHolder(i) && !this._tests[i].test(" ")) {
	                    return false;
	                }
	            }
	        }
	        return true;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditMask.prototype._changed = function () {
	    };
	    EditMask.prototype._moveCaret = function (start, end) {
	        var editor = this._editor["_editor"];
	        start = arguments.length > 0 ? start : editor["selectionStart"];
	        end = arguments.length > 1 ? end : editor["selectionEnd"];
	        var st = start, ed = end;
	        for (var i = start - 1; i >= 0; i--) {
	            if (this._tests[i] && this._tests[i].test(this._buffer[i])) {
	                st = i + 1;
	                break;
	            }
	            else {
	                st = i;
	            }
	        }
	        for (var i = end - 1; i >= 0; i--) {
	            if (this._tests[i] && this._tests[i].test(this._buffer[i])) {
	                ed = i + 1;
	                break;
	            }
	            else {
	                ed = i;
	            }
	        }
	        if (st != start || ed != end) {
	            for (var i = st; i <= start; i++) {
	                if (this._tests[i]) {
	                    break;
	                }
	                else {
	                    st++;
	                }
	            }
	            for (var i = ed; i <= end; i++) {
	                if (this._tests[i]) {
	                    break;
	                }
	                else {
	                    ed++;
	                }
	            }
	            editor["setSelectionRange"](st, ed);
	            return true;
	        }
	        return st != start || ed != end;
	    };
	    EditMask.prototype.$_setCaret = function (start, end) {
	        var editor = this._editor["_editor"];
	        // clearTimeout(this._caretTimer);
	        // this._caretTimer = setTimeout(function() {
	        editor["setSelectionRange"](start, end);
	        // }, 0);
	    };
	    /* 사용자가 지정한 format function은 아직 사용할수 없다. */
	    EditMask.prototype.$_parseDefinitions = function (defs) {
	        for (var def in defs) {
	            typeof defs[def] === "string" && (this._definitions[def] = new RegExp(defs[def]));
	        }
	    };
	    EditMask.prototype.$_parseMask = function (mask) {
	        var tests = this._tests = [];
	        var defs = this._definitions;
	        var am = mask.split("");
	        this._editMask = mask;
	        this._buffer = [];
	        for (var i = 0, cnt = am.length; i < cnt; i++) {
	            tests.push(defs[am[i]]);
	            this._buffer.push(defs[am[i]] ? this.$_getPlaceHolder(i) : am[i]);
	        }
	    };
	    EditMask.prototype.$_getPlaceHolder = function (n) {
	        if (this._placeHolder && this._placeHolder.length > n) {
	            return this._placeHolder[n];
	        }
	        return this._tests[n] ? "_" : (this._editMask && this._editMask.length > n ? this._editMask[n] : "_");
	    };
	    EditMask.prototype.$_seekPrev = function (pos) {
	        for (; --pos >= 0 && !this._tests[pos];)
	            ;
	        return pos;
	    };
	    EditMask.prototype.$_seekNext = function (pos) {
	        for (; ++pos < this._editMask.length && !this._tests[pos];)
	            ;
	        return pos;
	    };
	    EditMask.prototype.$_shiftL = function (begin, end) {
	        var len = this._editMask.length;
	        var buffer = this._buffer;
	        if (begin >= 0) {
	            for (var i = begin, j = this.$_seekNext(end); len > i; i++) {
	                if (this._tests[i]) {
	                    if (!(len > j && this._tests[i].test(buffer[j])))
	                        break;
	                    buffer[i] = buffer[j];
	                    this._defBuffer[i] = this._defBuffer[j];
	                    buffer[j] = this.$_getPlaceHolder(j);
	                    this._defBuffer[j] = "";
	                    j = this.$_seekNext(j);
	                }
	            }
	        }
	    };
	    EditMask.prototype.$_shiftR = function (begin) {
	        var j;
	        var t;
	        var len = this._editMask.length;
	        var buffer = this._buffer;
	        for (var i = begin, c_1 = this.$_getPlaceHolder(begin); len > i; i++)
	            if (this._tests[i]) {
	                if (j = this.$_seekNext(i), t = buffer[i], this._defBuffer[i] = c_1, buffer[i] = c_1, !(len > j && this._tests[j].test(t))) {
	                    break;
	                }
	                c_1 = t;
	            }
	    };
	    EditMask.prototype.keydown = function (event) {
	        var editor = this._editor.editor;
	        if (editor.readOnly) {
	            return;
	        }
	        var k = event.which || event.keyCode;
	        var start = editor.selectionStart, end = editor.selectionEnd;
	        if (k === 46 || k === 8) {
	            if (start == end) {
	                start = k !== 46 ? this.$_seekPrev(start) : end = this.$_seekNext(start - 1);
	                end = k === 46 ? this.$_seekNext(end) : end;
	            }
	            this.clearBuffer(start, end);
	            !this._overwrite && this.$_shiftL(start, end - 1);
	            editor.value = this.writeBuffer();
	            this.$_setCaret(Math.max(0, start), Math.max(0, start));
	        }
	        else if (k === Types.Keys.RIGHT || k === Types.Keys.END) {
	            return this._moveCaret();
	        }
	        this._pStart = editor.selectionStart;
	    };
	    EditMask.prototype.keyPress = function (event) {
	        var editor = this._editor.editor;
	        if (editor.readOnly) {
	            return;
	        }
	        this.restrictNull && this._moveCaret();
	        var pStart = editor.selectionStart, pEnd = editor.selectionEnd, k = event.which || event.keyCode, c;
	        this.clearBuffer(pStart, pEnd);
	        pStart !== pEnd && this.$_shiftL(pStart, pEnd - 1);
	        var p = this.$_seekNext(pStart - 1);
	        if (this._editMask && this._editMask.length > p && this._tests[p] && this._tests[p].test(c = String.fromCharCode(k))) {
	            !this._overwrite && this.$_shiftR(pStart);
	            this._buffer[p] = c;
	            this._defBuffer[p] = c;
	            editor.value = this.writeBuffer();
	            p = this.$_seekNext(p);
	            this.$_setCaret(Math.max(0, p), Math.max(0, p));
	        }
	        this._pStart = editor.selectionStart;
	    };
	    EditMask.prototype.input = function (event) {
	        var editor = this._editor.editor;
	        if (editor.readOnly) {
	            return;
	        }
	        var value = editor.value;
	        if (/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(value)) { // chrome, fireFox의 경우 한글을 입력할때 selectionStart, selectionEnd가 동일하다.
	            editor.value = editor.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g, "");
	            this._pStart != null && editor.setSelectionRange(this._pStart, this._pStart);
	            return;
	        }
	    };
	    return EditMask;
	}(Base_1.Base));
	exports.EditMask = EditMask;
	var TextCellEditor = /** @class */ (function (_super) {
	    __extends(TextCellEditor, _super);
	    function TextCellEditor() {
	        var _this = _super !== null && _super.apply(this, arguments) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._maxLength = 0;
	        // protected _textAlignment: Alignment;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._borderable = true;
	        _this._modified = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    TextCellEditor.prototype._doDispose = function () {
	        this._editor["$_owner"] = null;
	        this._editor.onkeydown = null;
	        this._editor.onkeyup = null;
	        this._editor.onkeypress = null;
	        this._editor.oninput = null;
	        this._editor.onpaste = null;
	        this._editor.oncopy = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TextCellEditor.prototype, "maxLength", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** maxLength */
	        get: function () {
	            return this._maxLength;
	        },
	        set: function (value) {
	            if (value != this._maxLength) {
	                this._maxLength = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TextCellEditor.prototype, "mask", {
	        /** mask */
	        get: function () {
	            return this._mask;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TextCellEditor.prototype, "text", {
	        // /** textAlignment */
	        // get textAlignment(): Alignment {
	        //     return this._textAlignment;
	        // }
	        // set textAlignment(value: Alignment) {
	        //     if (value != this._textAlignment) {
	        //         this._textAlignment = value;
	        // 		this.$_resetStyle();
	        //     }
	        // }
	        /** text */
	        get: function () {
	            return this._editor["value"];
	        },
	        set: function (value) {
	            if (this._editor && (value != this._editor["value"] || value != this._controller.getData(this._editIndex))) {
	                this._editor["value"] = value;
	                this._doChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TextCellEditor.prototype.setMask = function (options) {
	        this._mask = null;
	        if (options)
	            this._mask = new EditMask(this, options);
	    };
	    TextCellEditor.prototype.setAlignment = function (align) {
	        this._container.style.textAlign = "left";
	    };
	    Object.defineProperty(TextCellEditor.prototype, "readonly", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        set: function (value) {
	            this._editor["readOnly"] = this._readOnly = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TextCellEditor.prototype.isEdited = function () {
	        return this._modified;
	    };
	    TextCellEditor.prototype._createContainer = function () {
	        var elt = document.createElement("div");
	        var css = elt.style;
	        elt.spellcheck = false;
	        elt.setAttribute("aria-hidden", "true");
	        css.position = "absolute";
	        css.zIndex = "2000";
	        // css.boxSizing = "border-box";
	        // css.overflow = "hidden";
	        // css.border = "none";
	        css.width = "0px";
	        css.height = "0px";
	        css.padding = "0px";
	        css.margin = "0px";
	        // css.backgroundColor = "#fff";
	        // css.boxShadow = "rgba(0, 0, 0, 0.4) 1px 2px 5px";
	        // css.resize = "none";
	        /*
	         elt["spellCheck"] = false;
	         elt["aria-hidden"] = false;
	         elt.style["outline"] = "none";
	         elt.style["aria-hidden"] = false;
	         elt.style["max-width"] = "none";
	         elt.style["max-height"] = "none";
	         elt.style["background-color"] = "rgb(255, 255, 255)";
	         elt.style["box-shadow"] = "rgba(0, 0, 0, 0.4) 1px 2px 5px";
	         elt.style["color"] = "rgb(68, 84, 106)";
	         elt.style["word-wrap"] = "break-word";
	         */
	        return elt;
	    };
	    TextCellEditor.prototype._createEditor = function (parent) {
	        this._container = this._createContainer();
	        parent.appendChild(this._container);
	        var elt = document.createElement("input");
	        var css = elt.style;
	        elt.setAttribute("aria-hidden", "true");
	        elt.autocomplete = "off";
	        css.position = "absolute";
	        css.boxSizing = "border-box";
	        css.margin = "0px";
	        css.padding = "0px";
	        // css.fontFamily = $$_EDITOR_FONT_NAME;
	        // css.fontStyle = "normal";
	        // css.fontVariant = "normal";
	        // css.fontWeight = "normal";
	        // css.fontSize = $$_EDITOR_FONT_SIZE;
	        // css.lineHeight = "normal";
	        css.wordWrap = "normal";
	        css.overflow = "hidden";
	        css.resize = "none";
	        css.border = "none";
	        css.outline = "none";
	        // css.textAlign = "left";
	        // css.color = "rgb(68, 84, 106)";
	        css.left = "0px";
	        css.top = "0px";
	        css.width = "100%";
	        css.height = "100%";
	        // css.imeMode = "auto";
	        // css.cursor = "text";
	        css["-webkit-user-modify"] = "read-write-plaintext-only";
	        css["white-space"] = "pre";
	        css["-webkit-transform"] = "translateZ(0)";
	        elt.tabIndex = -1;
	        elt.onkeydown = this._keyDownHandler.bind(this);
	        elt.onkeyup = this._keyUpHandler.bind(this);
	        elt.onkeypress = this._keyPressHandler.bind(this);
	        elt.oninput = this._inputHandler.bind(this);
	        elt.onpaste = this._pasteHandler.bind(this);
	        elt.oncopy = this._copyHandler.bind(this);
	        var gridContainer = this._grid.container;
	        gridContainer.$_addListener(elt, "compositionstart", this._compositionstartHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "compositionupdate", this._compositionupdateHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "compositionend", this._compositionendHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "text", this._textHandler.bind(this), false);
	        this._container.appendChild(elt);
	        this._defMaxLength = elt.maxLength > 0 ? elt.maxLength : 1000000; // ff에서는 기본값이 -1
	        return elt;
	    };
	    TextCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._editor["readOnly"] = this._readOnly = false;
	        this._maxLength = 0;
	        this._mask && (this._mask.dispose(), this._mask = null);
	        // this.textAlignment = Alignment.NEAR;
	    };
	    TextCellEditor.prototype.applyOptions = function (options) {
	        _super.prototype.applyOptions.call(this, options);
	        // TODO 점검 
	        options.mask && this.setMask(options.mask);
	    };
	    TextCellEditor.prototype._selectAll = function () {
	        this._editor["select"]();
	    };
	    TextCellEditor.prototype._doBeginEdit = function () {
	        this._modified = false;
	        if (this.visible) { // 당연히 visible이어야 한다.
	            if (!this._editor["value"]) {
	                this._editor["setSelectionRange"](0, 0);
	            }
	        }
	        return true;
	    };
	    TextCellEditor.prototype._doEndEdit = function () {
	        this._modified = false;
	    };
	    TextCellEditor.prototype.caretToLast = function () {
	        var len = Utils_1.Utils.toStr(this._editor["value"]).length;
	        this._editor["setSelectionRange"](len, len);
	    };
	    TextCellEditor.prototype._doCommit = function () {
	    };
	    TextCellEditor.prototype.setEditIndex = function (value) {
	        _super.prototype.setEditIndex.call(this, value);
	        var grid = value && value.grid;
	        /*
	         m_editor.editable = !readOnly;
	         m_editor.maxChars = maxLength;
	         m_editor.textCase = textCase == TextInputCase.Default ? index.dataColumn.textInputCase : textCase;
	         setEditFont(grid, m_editor);
	         */
	        var vcolumn = value.valueColumn;
	        if (vcolumn) {
	            var tcase = this._textCase == Types.TextInputCase.DEFAULT ? vcolumn.textInputCase : this._textCase;
	            switch (tcase) {
	                case Types.TextInputCase.LOWER:
	                    this._editor.style.textTransform = "lowercase";
	                    break;
	                case Types.TextInputCase.UPPER:
	                    this._editor.style.textTransform = "uppercase";
	                    break;
	                default:
	                    this._editor.style.textTransform = "none";
	                    break;
	            }
	            this._editor["maxLength"] = this._maxLength > 0 ? this._maxLength : this._defMaxLength;
	        }
	    };
	    TextCellEditor.prototype.setEditValue = function (value) {
	        _super.prototype.setEditValue.call(this, value);
	        this._editor["value"] = this._valToStr(value);
	    };
	    TextCellEditor.prototype.setCellEditValue = function (value, dropdown) {
	        _super.prototype.setCellEditValue.call(this, value, dropdown);
	    };
	    TextCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        var fld = this._editField();
	        var v = this._emptyValue;
	        try {
	            var t = fld.dataType;
	            var s = this._editor["value"];
	            if (t == Types.ValueType.TEXT) {
	                if (!s && this._emptyValue !== undefined) {
	                    s = this._emptyValue;
	                }
	                v = this._strToVal(s);
	                if (v === undefined) {
	                    v = "";
	                }
	            }
	            else {
	                if (!Utils_1.Utils.isWhiteSpace(s)) {
	                    v = this._strToVal(s);
	                }
	                else if (this._emptyValue !== undefined) {
	                    v = this._strToVal(this._emptyValue);
	                }
	                else {
	                    switch (t) {
	                        case Types.ValueType.NUMBER:
	                            if (isNaN(this._oldValue)) {
	                                v = NaN;
	                            }
	                            break;
	                        case Types.ValueType.DATETIME:
	                            if (this._oldValue === null) {
	                                v = null;
	                            }
	                            break;
	                        case Types.ValueType.BOOLEAN:
	                            break;
	                    }
	                }
	            }
	            if (v === CellEditor.InvalidFormat)
	                return v;
	            v = fld.readValue(v);
	        }
	        catch (e) {
	            if (throwError)
	                throw e;
	            v = this._emptyValue;
	        }
	        return v;
	    };
	    TextCellEditor.prototype.getEditText = function () {
	        return this._editor["value"];
	    };
	    TextCellEditor.prototype.setVisible = function (value, force) {
	        _super.prototype.setVisible.call(this, value, force);
	        if (value && this._borderable) {
	            //var editorBorder = this._grid.displayOptions.focusActivePen.css() : this._editorBorder;
	            var css = this._container.style;
	            css.removeProperty("border");
	            css.removeProperty("box-shadow");
	            // this._container.style["border"] = editorBorder;
	            // this._container.style["box-shadow"] = this._editorShadow;
	        }
	        else {
	            this._container.style["border"] = "none";
	            this._container.style["box-shadow"] = "none";
	        }
	        if (Utils_1.Utils.isWinSafari) {
	            try {
	                this._editor.style["width"] = this._container.getBoundingClientRect().width + "px";
	                this._container.style.cssText = this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g, "");
	            }
	            catch (err) { }
	            setTimeout(function () { this._editor.style["width"] = "100%"; }.bind(this), 0);
	        }
	    };
	    TextCellEditor.prototype._doChanged = function () {
	        this._requestStart();
	        if (this._started && !this._editor["readOnly"]) {
	            this._modified = true;
	            this._dispatchChange();
	        }
	    };
	    TextCellEditor.prototype.setBounds = function (x, y, w, h) {
	        Utils_1.Utils.setBounds(this._container, x, y, w, h);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TextCellEditor.prototype._keyDownHandler = function (e) {
	        var editor = this._editor;
	        var k = e.keyCode;
	        if ((Utils_1.Utils.isIE || Utils_1.Utils.isEdge) && !this.visible && e.ctrlKey && k == Types.Keys.Z) {
	            return false;
	        }
	        if ((Utils_1.Utils.isIE) && e.ctrlKey && e.keyCode == Types.Keys.V && editor.readOnly) {
	            e.preventDefault();
	            this._pasteHandler(e);
	            return false;
	        }
	        this._inputValue = editor.value;
	        switch (k) {
	            case Types.Keys.BACK:
	            case Types.Keys.DELETE:
	                if (!this._sendToParent(e)) {
	                    if (!this.visible && this._requestStart()) {
	                        if (!editor.readOnly && this._controller["_getData"](this._editIndex)) {
	                            if (this._mask) {
	                                e.preventDefault();
	                                e.stopImmediatePropagation();
	                                this._mask["keydown"](e);
	                                this._doChanged(); // 일반 editor에서는 _inputHandler 에서 doChanged가 발생된다.
	                            }
	                            else {
	                                this.text = "";
	                            }
	                        }
	                    }
	                    else if (this._mask) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                        this._mask["keydown"](e);
	                        this._doChanged(); // 일반 editor에서는 _inputHandler 에서 doChanged가 발생된다.
	                    }
	                    if (k === Types.Keys.BACK && editor.readOnly) { // readonly일때 BackSpace이면 이전페이지가 실행되는것을 막아준다.
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    }
	                }
	                break;
	            case Types.Keys.TAB:
	                return !this._sendToParent(e);
	            case Types.Keys.LEFT:
	                if (!this.visible || (editor.selectionEnd == 0 && editor.selectionEnd == editor.selectionStart)) {
	                    return !this._sendToParent(e);
	                }
	                if (editor.readOnly && Utils_1.Utils.isChrome) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.RIGHT:
	                if (!this.visible || (editor.selectionEnd == editor.value.length && editor.selectionEnd == editor.selectionStart)) {
	                    return !this._sendToParent(e);
	                }
	                if (editor.readOnly && Utils_1.Utils.isChrome) {
	                    return !this._sendToParent(e);
	                }
	                if (!(e.altKey || e.ctrlKey || e.shiftKey) && this._mask && this._mask.restrictNull) {
	                    var start = editor.selectionStart;
	                    if (this._mask["_moveCaret"](start + 1, start + 1)) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    }
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.HOME:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.END:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                if (this._mask && this._mask.restrictNull) {
	                    var end = editor.value ? editor.value.length - 1 : 0;
	                    if (this._mask["_moveCaret"](end, end)) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                    } // null이 제한되면.
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.SPACE:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.UP:
	            case Types.Keys.PAGEUP:
	            case Types.Keys.DOWN:
	            case Types.Keys.PAGEDOWN:
	            case Types.Keys.ENTER:
	            case Types.Keys.ESCAPE:
	            case Types.Keys.F2:
	            case Types.Keys.INSERT:
	                e.preventDefault();
	                e.stopImmediatePropagation();
	                return !this._sendToParent(e);
	            case 229: // ime 변환 키 등...
	                this._sendToParent(e);
	                break;
	            default:
	                return !this._sendToParent(e, null, true);
	        }
	        if (Utils_1.Utils.isFirefox) {
	            if (!e.ctrlKey && !e.altKey && (k == 0 || k >= 32) && (k < 0x70 || k > 0x82)) {
	                this._requestStart();
	            }
	        }
	        else if (Utils_1.Utils.isIE) ;
	        return true; // false를 return하면 chrome에서는 key 입력이 진행되지 않는다.
	    };
	    TextCellEditor.prototype._keyUpHandler = function (e) {
	        var key = e.keyCode;
	        if (key == Types.Keys.BACK || key == Types.Keys.DELETE) {
	            if (Utils_1.Utils.ieOld && this.visible && !this._editor["readOnly"] && this._editor["value"] != this._inputValue) {
	                this._doChanged();
	            }
	        }
	        switch (e.keyCode) {
	            case Types.Keys.LEFT:
	            case Types.Keys.RIGHT:
	            case Types.Keys.HOME:
	            case Types.Keys.END:
	            case Types.Keys.SPACE:
	                if (!this.visible) {
	                    this._sendToParent(e, 3);
	                }
	                break;
	            default:
	                this._sendToParent(e, 3);
	                break;
	        }
	    };
	    TextCellEditor.prototype._keyPressHandler = function (e) {
	        var k = e.which || e.keyCode;
	        this._sendToParent(e, 2);
	        if (Utils_1.Utils.isFirefox) {
	            // if (!e.ctrlKey && !e.altKey && (k == 0 || k >= 32) && (k < 0x70 || k > 0x82)) {
	            if (!e.ctrlKey && !e.altKey && (k == 0 || k >= 32)) {
	                if (!this._requestStart()) {
	                    e.preventDefault();
	                }
	                else if (this._mask) {
	                    this._mask["_pStart"] = e.target["selectionStart"];
	                    this._mask["keyPress"](e);
	                    this._doChanged();
	                    e.preventDefault();
	                }
	            }
	        }
	        else if (k >= 32) {
	            if (!this._requestStart()) {
	                e.preventDefault();
	            }
	            else {
	                if (this._mask) {
	                    this._mask["_pStart"] = e.target["selectionStart"];
	                    this._mask["keyPress"](e);
	                    this._doChanged();
	                    e.preventDefault();
	                }
	            }
	            // !this._requestStart() ? e.preventDefault() : null; 
	        }
	    };
	    TextCellEditor.prototype._textHandler = function () {
	        this._requestStart();
	    };
	    TextCellEditor.prototype._compositionstartHandler = function (e) {
	        //trace("########## COMPOSITION START: ");
	        this._composing = true;
	        this._requestStart();
	        if (this._started && !this._editor["readOnly"]) {
	            this._modified = true;
	            this._dispatchChange();
	            this._checkHangeul = true;
	        }
	    };
	    TextCellEditor.prototype._compositionendHandler = function () {
	        this._composing = false;
	    };
	    TextCellEditor.prototype._compositionupdateHandler = function () {
	        this._composing = true;
	    };
	    TextCellEditor.prototype._changeHandler = function (e) {
	        /*
	        if (this.isVisible() && !this._editor.readOnly) {
	            console.log("### EDITOR.VALUE = " + this._editor.value);
	        }
	        */
	    };
	    TextCellEditor.prototype._inputHandler = function (e) {
	        /* IE 10에서는 placeholder가 있는 경우 oninput event가 focusin, focusout시점에 발생한다. 입력된 값을 확인해서 입력이 아니면 return*/
	        if (Utils_1.Utils.ieTen) {
	            if (this._editor["value"] == $$_EMPTY_TEXT_VALUE) {
	                return;
	            }
	            if (((this._inputValue == undefined || this._inputValue == null) ? "" : this._inputValue) === this._editor["value"]) {
	                return;
	            }
	        }
	        this._mask && this._mask["input"](e);
	        this._doChanged();
	    };
	    TextCellEditor.prototype._pasteHandler = function (e) {
	        if (this.visible) {
	            this._doChanged();
	            return;
	        }
	        e.preventDefault();
	        var options = this._grid.pasteOptions;
	        try {
	            var text = void 0;
	            var clp = (e["originalEvent"] || e).clipboardData;
	            if (clp) {
	                text = clp.getData('text/plain');
	            }
	            else {
	                text = window["clipboardData"].getData("text");
	            }
	            if (text != null) {
	                this._grid.pasteFromClipboard(text, e);
	            }
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError) {
	                if (options.throwValidationError) {
	                    throw err;
	                }
	            }
	            else if (err instanceof Validation.AbortError) {
	                alert(err.message);
	            }
	            else if (err) {
	                throw err;
	            }
	        }
	    };
	    TextCellEditor.prototype._copyHandler = function (e) {
	        if (!this.editing) {
	            var data = this._grid.copyToClipboard(e, null);
	            if (data != null) {
	                if (window["clipboardData"]) {
	                    window["clipboardData"].setData("Text", data);
	                }
	                else {
	                    e["clipboardData"].setData('text/plain', data);
	                }
	            }
	            return e.preventDefault();
	        }
	    };
	    // private $_resetStyle(): void {
	    // let align = "left";
	    // switch (this._textAlignment) {
	    // 	case Alignment.FAR :
	    // 		align = "right";
	    // 		break;
	    // 	case Alignment.CENTER :
	    // 		align = "center";
	    // 		break;
	    // }
	    // this._editor.style["text-align"] = align;
	    // }
	    TextCellEditor.prototype._getInputSelector = function () {
	        return null;
	    };
	    return TextCellEditor;
	}(CellEditor));
	exports.TextCellEditor = TextCellEditor;
	var LineCellEditor = /** @class */ (function (_super) {
	    __extends(LineCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LineCellEditor(grid, parentElement) {
	        return _super.call(this, grid, parentElement) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    LineCellEditor.prototype._createEditor = function (parent) {
	        var editor = _super.prototype._createEditor.call(this, parent);
	        editor.tabIndex = Utils_1.Utils.isMobile ? -1 : 0;
	        return editor;
	    };
	    LineCellEditor.prototype._getInputSelector = function () {
	        return LineCellEditor.INPUT_CSS;
	    };
	    LineCellEditor.INPUT_CSS = "rg-text-editor";
	    return LineCellEditor;
	}(TextCellEditor));
	exports.LineCellEditor = LineCellEditor;
	var PasswordCellEditor = /** @class */ (function (_super) {
	    __extends(PasswordCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PasswordCellEditor(grid, parentElement) {
	        return _super.call(this, grid, parentElement) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    PasswordCellEditor.prototype._createEditor = function (parent) {
	        var editor = _super.prototype._createEditor.call(this, parent);
	        editor.setAttribute("type", "password");
	        editor.tabIndex = Utils_1.Utils.isMobile ? -1 : 0;
	        return editor;
	    };
	    PasswordCellEditor.prototype._getInputSelector = function () {
	        return PasswordCellEditor.INPUT_CSS;
	    };
	    PasswordCellEditor.INPUT_CSS = "rg-password-editor";
	    return PasswordCellEditor;
	}(TextCellEditor));
	exports.PasswordCellEditor = PasswordCellEditor;
	var MultiLineCellEditor = /** @class */ (function (_super) {
	    __extends(MultiLineCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MultiLineCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._maxLength = 0;
	        _this._minHeight = 0;
	        _this._altEnterNewLine = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._modified = false;
	        _this._borderable = true;
	        return _this;
	    }
	    MultiLineCellEditor.prototype._doDispose = function () {
	        this._editor.onkeydown = null;
	        this._editor.onkeyup = null;
	        this._editor.onkeypress = null;
	        this._editor.oninput = null;
	        this._editor.onpaste = null;
	        this._editor.oncopy = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(MultiLineCellEditor.prototype, "maxLength", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** maxLength */
	        get: function () {
	            return this._maxLength;
	        },
	        set: function (value) {
	            if (value != this._maxLength) {
	                this._maxLength = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiLineCellEditor.prototype, "minHeight", {
	        /** minHeight */
	        get: function () {
	            return this._minHeight;
	        },
	        set: function (value) {
	            if (value != this._minHeight) {
	                this._minHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiLineCellEditor.prototype, "altEnterNewLine", {
	        /** altEnterNewLine */
	        get: function () {
	            return this._altEnterNewLine;
	        },
	        set: function (value) {
	            if (value != this._altEnterNewLine) {
	                this._altEnterNewLine = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiLineCellEditor.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._editor["value"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    MultiLineCellEditor.prototype.setAlignment = function (align) {
	        this._container.style.textAlign = "left";
	    };
	    MultiLineCellEditor.prototype.isEdited = function () {
	        return this._modified;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    MultiLineCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._maxLength = 0;
	        this._minHeight = 0;
	        this.setReadOnly(false);
	    };
	    MultiLineCellEditor.prototype.setReadOnly = function (value) {
	        this._editor["readOnly"] = this._readOnly = value;
	    };
	    MultiLineCellEditor.prototype._selectAll = function () {
	        this._editor["select"]();
	    };
	    MultiLineCellEditor.prototype._doBeginEdit = function () {
	        this._modified = false;
	        if (this.visible) { // 당연히 visible이어야 한다.
	            if (!this._editor["value"]) {
	                this._editor["setSelectionRange"](0, 0);
	            }
	        }
	        return true;
	    };
	    MultiLineCellEditor.prototype._doEndEdit = function () {
	        this._modified = false;
	    };
	    MultiLineCellEditor.prototype._doCommit = function () {
	    };
	    MultiLineCellEditor.prototype.setEditIndex = function (index) {
	        _super.prototype.setEditIndex.call(this, index);
	        var grid = index && index.grid;
	        /*
	         m_editor.editable = !readOnly;
	         m_editor.maxChars = maxLength;
	         m_editor.textCase = textCase == TextInputCase.Default ? index.dataColumn.textInputCase : textCase;
	         setEditFont(grid, m_editor);
	         */
	        var tcase = this._textCase == Types.TextInputCase.DEFAULT ? index.dataColumn.textInputCase : this._textCase;
	        switch (tcase) {
	            case Types.TextInputCase.LOWER:
	                this._editor.style.textTransform = "lowercase";
	                break;
	            case Types.TextInputCase.UPPER:
	                this._editor.style.textTransform = "uppercase";
	                break;
	            default:
	                this._editor.style.textTransform = "none";
	                break;
	        }
	        this._editor["maxLength"] = this._maxLength > 0 ? this._maxLength : 2000000000;
	    };
	    MultiLineCellEditor.prototype.setEditValue = function (value) {
	        _super.prototype.setEditValue.call(this, value);
	        this._editor["value"] = this._valToStr(value);
	    };
	    MultiLineCellEditor.prototype.setCellEditValue = function (value) {
	        _super.prototype.setCellEditValue.call(this, value, false);
	    };
	    MultiLineCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        var fld = this._editField();
	        var v = fld.nullValue;
	        try {
	            var t = fld.dataType;
	            var s = this._editor["value"];
	            if (t == Types.ValueType.TEXT) {
	                if (!s && this._emptyValue !== undefined) {
	                    s = this._emptyValue;
	                }
	                v = this._strToVal(s);
	                if (v === undefined) {
	                    v = "";
	                }
	            }
	            else {
	                if (!Utils_1.Utils.isWhiteSpace(s)) {
	                    v = this._strToVal(s);
	                }
	                else if (this._emptyValue !== undefined) {
	                    v = this._strToVal(this._emptyValue);
	                }
	                else {
	                    switch (t) {
	                        case Types.ValueType.NUMBER:
	                            if (isNaN(this._oldValue)) {
	                                v = NaN;
	                            }
	                            break;
	                        case Types.ValueType.DATETIME:
	                            if (this._oldValue === null) {
	                                v = null;
	                            }
	                            break;
	                        case Types.ValueType.BOOLEAN:
	                            break;
	                    }
	                }
	            }
	            v = fld.readValue(v);
	        }
	        catch (e) {
	            if (throwError)
	                throw e;
	        }
	        return v;
	    };
	    MultiLineCellEditor.prototype.getEditText = function () {
	        return this._editor["value"];
	    };
	    MultiLineCellEditor.prototype.setVisible = function (value, force) {
	        _super.prototype.setVisible.call(this, value, force);
	        if (value && this._borderable) {
	            var css = this._container.style;
	            css.removeProperty("border");
	            css.removeProperty("box-shadow");
	        }
	        else {
	            this._container.style["border"] = "none";
	            this._container.style["box-shadow"] = "none";
	        }
	        if (Utils_1.Utils.isWinSafari) {
	            try {
	                this._editor.style["width"] = this._container.getBoundingClientRect().width + "px";
	                this._container.style.cssText = this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g, "");
	            }
	            catch (err) { }
	            setTimeout(function () { this._editor.style["width"] = "100%"; }.bind(this), 0);
	        }
	    };
	    MultiLineCellEditor.prototype._doChanged = function () {
	        this._requestStart();
	        if (this._started && !this._editor["readOnly"]) {
	            this._modified = true;
	            this._dispatchChange();
	            this.$_resetBounds();
	        }
	    };
	    MultiLineCellEditor.prototype.$_resetBounds = function () {
	        var r = Utils_1.Utils.getClientRect(this._container);
	        var x = r["cx"];
	        var y = r["cy"];
	        var w = r.width; // Math.max(r.width, this._editor.scrollWidth + 4);
	        var h = Math.round(r.height); //Math.max(r.height, this._editor.scrollHeight + 4);
	        var empty = this._editor["value"] == $$_EMPTY_TEXT_VALUE;
	        if (!empty && this._editor.scrollWidth > w) {
	            w = this._editor.scrollWidth + 6;
	        }
	        if (!empty && this._editor.scrollHeight > h) {
	            h = this._editor.scrollHeight + 6;
	        }
	        var minHeight = isNaN(this._minHeight) ? 0 : this._minHeight;
	        if (minHeight > 0) {
	            h = Math.max(h, minHeight);
	        }
	        r = Utils_1.Utils.getClientRect(this._parentElement);
	        w = Math.min(r.width, w);
	        h = Math.min(r.height, h);
	        if (x + w > r.width) {
	            x = r.width - w;
	        }
	        if (y + h > r.height) {
	            y = r.height - h;
	        }
	        Utils_1.Utils.setBounds(this._container, Math.max(x, 0), Math.max(y, 0), w, h);
	    };
	    MultiLineCellEditor.prototype.$_createContainer = function () {
	        var elt = document.createElement("div");
	        var css = elt.style;
	        elt.spellcheck = false;
	        elt.setAttribute("aria-hidden", "true");
	        css.position = "absolute";
	        css.zIndex = "2000";
	        // css.boxSizing = "border-box";
	        // css.overflow = "hidden";
	        // css.border = "none";
	        css.width = "0px";
	        css.height = "0px";
	        css.padding = "0px";
	        css.margin = "0px";
	        // css.backgroundColor = "#fff";
	        // css.boxShadow = "rgba(0, 0, 0, 0.4) 1px 2px 5px";
	        // css.resize = "none";
	        /*
	         elt["spellCheck"] = false;
	         elt["aria-hidden"] = false;
	         elt.style["outline"] = "none";
	         elt.style["aria-hidden"] = false;
	         elt.style["max-width"] = "none";
	         elt.style["max-height"] = "none";
	         elt.style["background-color"] = "rgb(255, 255, 255)";
	         elt.style["box-shadow"] = "rgba(0, 0, 0, 0.4) 1px 2px 5px";
	         elt.style["color"] = "rgb(68, 84, 106)";
	         elt.style["word-wrap"] = "break-word";
	         */
	        return elt;
	    };
	    MultiLineCellEditor.prototype._createEditor = function (parent) {
	        this._container = this.$_createContainer();
	        parent.appendChild(this._container);
	        var elt = document.createElement("textarea");
	        var css = elt.style;
	        elt.autocomplete = "off";
	        elt.setAttribute("aria-hidden", "true");
	        // css.tabIndex = -1;
	        css.position = "absolute";
	        css.margin = "0px";
	        css.padding = "0px";
	        // css.fontFamily = $$_EDITOR_FONT_NAME;
	        // css.fontStyle = "normal";
	        // css.fontVariant = "normal";
	        // css.fontWeight = "normal";
	        // css.fontSize = $$_EDITOR_FONT_SIZE;
	        // css.lineHeight = "normal";
	        css.wordWrap = "normal";
	        css.overflow = "hidden";
	        css.resize = "none";
	        css.border = "none";
	        css.outline = "none";
	        // css.textAlign = "left";
	        // css.color = "rgb(68, 84, 106)";
	        css.left = "0px";
	        css.top = "0px";
	        css.width = "100%";
	        css.height = "100%";
	        // css.imeMode = "auto";
	        // css.cursor = "text";
	        css["-webkit-user-modify"] = "read-write-plaintext-only";
	        css["white-space"] = "pre";
	        css["-webkit-transform"] = "translateZ(0)";
	        elt.tabIndex = -1;
	        elt.onkeydown = this._keyDownHandler.bind(this);
	        elt.onkeyup = this._keyUpHandler.bind(this);
	        elt.onkeypress = this._keyPressHandler.bind(this);
	        elt.oninput = this._inputHandler.bind(this);
	        elt.onpaste = this._pasteHandler.bind(this);
	        elt.oncopy = this._copyHandler.bind(this);
	        var gridContainer = this._grid.container;
	        gridContainer.$_addListener(elt, "compositionstart", this._compositionstartHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "compositionupdate", this._compositionupdateHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "compositionend", this._compositionendHandler.bind(this), false);
	        gridContainer.$_addListener(elt, "text", this._textHandler.bind(this), false);
	        this._container.appendChild(elt);
	        return elt;
	    };
	    MultiLineCellEditor.prototype.setBounds = function (x, y, w, h) {
	        Utils_1.Utils.setBounds(this._container, x, y, w, h);
	        if (x > Utils_1.Utils["$_INVISIBLE_EDIT_BOUNDS"].x) {
	            this.$_resetBounds();
	        }
	    };
	    MultiLineCellEditor.prototype._getInputSelector = function () {
	        return MultiLineCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    MultiLineCellEditor.prototype._textHandler = function () {
	        this._requestStart();
	    };
	    MultiLineCellEditor.prototype._compositionstartHandler = function (e) {
	        //trace("########## COMPOSITION START: ");
	        this._composing = true;
	        this._requestStart();
	    };
	    MultiLineCellEditor.prototype._compositionendHandler = function () {
	        this._composing = false;
	    };
	    MultiLineCellEditor.prototype._compositionupdateHandler = function () {
	        this._composing = true;
	    };
	    MultiLineCellEditor.prototype._keyDownHandler = function (e) {
	        //trace("########## EDITOR KEYDOWN: " + e.keyCode);
	        var editor = this._editor;
	        var k = e.keyCode;
	        if ((Utils_1.Utils.isIE || Utils_1.Utils.isEdge) && !this.visible && e.ctrlKey && k == Types.Keys.Z) {
	            return false;
	        }
	        switch (k) {
	            case Types.Keys.BACK:
	            case Types.Keys.DELETE:
	                if (!this._sendToParent(e)) {
	                    if (!this.visible && this._requestStart()) {
	                        e.preventDefault();
	                        e.stopImmediatePropagation();
	                        if (!this._editor["readOnly"] && this._controller.getData(this._editIndex) /*this._editor.value*/) {
	                            this._editor["value"] = ""; // null이라고 하면 "NULL"이라 쓰는 브라우저가 있더라...
	                            this._modified = true;
	                            this._dispatchChange();
	                        }
	                    }
	                }
	                break;
	            case Types.Keys.TAB:
	                return !this._sendToParent(e);
	            case Types.Keys.LEFT:
	                if (!this.visible || (editor["selectionEnd"] == 0 && editor["selectionEnd"] == editor["selectionStart"])) {
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.RIGHT:
	                if (!this.visible || (editor["selectionEnd"] == editor["value"].length && editor["selectionEnd"] == editor["selectionStart"])) {
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.HOME:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.END:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.UP:
	            case Types.Keys.PAGEUP:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.DOWN:
	            case Types.Keys.PAGEDOWN:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                e.stopImmediatePropagation();
	                break;
	            case Types.Keys.SPACE:
	                if (!this.visible) {
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.ENTER:
	                if (this.altEnterNewLine) {
	                    if ((!e.altKey || !this.editing) && !e.shiftKey) {
	                        return !this._sendToParent(e);
	                    }
	                }
	                else {
	                    if ((!e.ctrlKey || !this.editing) && !e.shiftKey) {
	                        return !this._sendToParent(e);
	                    }
	                }
	                if (((this.altEnterNewLine && e.altKey) || (!this.altEnterNewLine && e.ctrlKey)) && !e.shiftKey) {
	                    e.preventDefault();
	                    e.stopImmediatePropagation();
	                    var s = editor["value"] === $$_EMPTY_TEXT_VALUE ? "" : editor["value"];
	                    if (s) {
	                        var i = editor["selectionEnd"];
	                        s = s.substring(0, i) + "\r\n" + s.substring(i);
	                        editor["value"] = s;
	                        editor["setSelectionRange"](i + 1, i + 1);
	                        this._doChanged();
	                    }
	                }
	                break;
	            case Types.Keys.ESCAPE:
	            case Types.Keys.F2:
	            case Types.Keys.INSERT:
	                e.preventDefault();
	                e.stopImmediatePropagation();
	                return !this._sendToParent(e);
	            case 229: // ime 변환 키 등...
	                break;
	            default:
	                this._sendToParent(e, null, true);
	                return true;
	        }
	        if (e.keyCode == 0) ;
	        return true;
	    };
	    MultiLineCellEditor.prototype._keyUpHandler = function (e) {
	        var key = e.keyCode;
	        if (key == Types.Keys.BACK || key == Types.Keys.DELETE) {
	            if (Utils_1.Utils.ieOld && this.visible && !this._editor["readOnly"] && this._editor["value"] != this._inputValue) {
	                this._doChanged();
	            }
	        }
	        switch (e.keyCode) {
	            case Types.Keys.LEFT:
	            case Types.Keys.RIGHT:
	            case Types.Keys.HOME:
	            case Types.Keys.END:
	            case Types.Keys.SPACE:
	                if (!this.visible) {
	                    this._sendToParent(e, 3);
	                }
	                break;
	            default:
	                this._sendToParent(e, 3);
	                break;
	        }
	    };
	    MultiLineCellEditor.prototype._keyPressHandler = function (e) {
	        if (e.keyCode >= 32) {
	            !this._requestStart() ? e.preventDefault() : null;
	        }
	    };
	    MultiLineCellEditor.prototype._inputHandler = function (e) {
	        this._doChanged();
	    };
	    MultiLineCellEditor.prototype._pasteHandler = function (e) {
	        if (this.visible) {
	            this._doChanged();
	            return;
	        }
	        e.preventDefault();
	        var options = this._grid.pasteOptions;
	        try {
	            var text = void 0;
	            var clp = (e["originalEvent"] || e).clipboardData;
	            if (clp) {
	                text = clp.getData('text/plain');
	            }
	            else {
	                text = window["clipboardData"].getData("text");
	            }
	            if (text != null) {
	                this._grid.pasteFromClipboard(text, e);
	            }
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError) {
	                if (options.throwValidationError) {
	                    throw err;
	                }
	            }
	            else if (err instanceof Validation.AbortError) {
	                alert(err.message);
	            }
	            else if (err) {
	                throw err;
	            }
	        }
	    };
	    MultiLineCellEditor.prototype._copyHandler = function (e) {
	        if (!this.editing) {
	            var data = this._grid.copyToClipboard(e, null);
	            if (data != null) {
	                if (window["clipboardData"]) {
	                    window["clipboardData"].setData("Text", data);
	                }
	                else {
	                    e["clipboardData"].setData('text/plain', data);
	                }
	            }
	            return e.preventDefault();
	        }
	    };
	    MultiLineCellEditor.INPUT_CSS = "rg-multiline-editor";
	    return MultiLineCellEditor;
	}(CellEditor));
	exports.MultiLineCellEditor = MultiLineCellEditor;
	var $$$_DEC_SEP = ".";
	var $$$_GRP_SEP = ",";
	var $$_HANGUL_REG = /[ㄱ-ㅎㅏ-ㅣ가-힝]/g;
	var NumberCellEditor = /** @class */ (function (_super) {
	    __extends(NumberCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function NumberCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._positiveOnly = false;
	        _this._integerOnly = false;
	        _this._decSep = $$$_DEC_SEP;
	        _this._groupSep = $$$_GRP_SEP;
	        _this._addString = "000";
	        _this._maxLengthExceptComma = false;
	        _this._maxIntegerLength = 0;
	        _this._blankWhenSpace = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._regxAll = /[0-9]|,|\.|\-|\+|e|E/;
	        _this._regxPos = /[0-9]|,|\.|\+|e|E/;
	        _this._regxInt = /[0-9]|,|\+|\-/;
	        _this._regxPosInt = /[0-9]|,|\+/;
	        _this._regx = _this._regxAll;
	        _this._numValue = undefined;
	        _this._decLen = undefined;
	        _this._decimalFormatter = undefined;
	        _this._isMultiple = false;
	        _this._editor.style.imeMode = "disabled";
	        _this._editor.style["-webkit-ime-mode"] = "disabled";
	        _this._editor.style["-moz-ime-mode"] = "disabled";
	        _this._editor.style["-ms-ime-mode"] = "disabled";
	        return _this;
	    }
	    Object.defineProperty(NumberCellEditor.prototype, "positiveOnly", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** positiveOnly */
	        get: function () {
	            return this._positiveOnly;
	        },
	        set: function (value) {
	            if (value != this._positiveOnly) {
	                this._positiveOnly = value;
	                this.$_resetRistrict();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "integerOnly", {
	        /** integerOnly */
	        get: function () {
	            return this._integerOnly;
	        },
	        set: function (value) {
	            if (value != this._integerOnly) {
	                this._integerOnly = value;
	                this.$_resetRistrict();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "decSep", {
	        /** decSep */
	        get: function () {
	            return this._decSep;
	        },
	        set: function (value) {
	            if (value != this._decSep) {
	                this._decSep = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "groupSep", {
	        /** groupSep */
	        get: function () {
	            return this._groupSep;
	        },
	        set: function (value) {
	            if (value != this._groupSep) {
	                this._groupSep = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "editFormat", {
	        /** editFormat */
	        get: function () {
	            return this._editFormat;
	        },
	        set: function (value) {
	            if (value != this._editFormat) {
	                this._editFormat = value;
	                if (value) {
	                    var decFormatter = this._decimalFormatter = new DecimalFormatter_1.DecimalFormatter(value);
	                    if (decFormatter) {
	                        this._decSep = decFormatter.separator ? decFormatter.separator : $$$_DEC_SEP;
	                        this._groupSep = decFormatter.groupSep ? decFormatter.groupSep : $$$_GRP_SEP;
	                        this._decLen = Math.max(decFormatter.minDigits, decFormatter.maxDigits);
	                    }
	                }
	                else {
	                    this._decimalFormatter = undefined;
	                    this._decSep = $$$_DEC_SEP;
	                    this._groupSep = $$$_GRP_SEP;
	                    this._decLen = undefined;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "multipleChar", {
	        /** multipleChar */
	        get: function () {
	            return this._multipleChar;
	        },
	        set: function (value) {
	            if (value != this._multipleChar) {
	                this._multipleChar = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "addString", {
	        /** addString */
	        get: function () {
	            return this._addString;
	        },
	        set: function (value) {
	            if (value != this._addString) {
	                this._addString = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "maxLengthExceptComma", {
	        /** maxLengthExceptComma */
	        get: function () {
	            return this._maxLengthExceptComma;
	        },
	        set: function (value) {
	            if (value != this._maxLengthExceptComma) {
	                this._maxLengthExceptComma = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "maxIntegerLength", {
	        /** maxIntegerLength */
	        get: function () {
	            return this._maxIntegerLength;
	        },
	        set: function (value) {
	            if (value != this._maxIntegerLength) {
	                this._maxIntegerLength = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(NumberCellEditor.prototype, "blankWhenSpace", {
	        /** blankWhenSpace */
	        get: function () {
	            return this._blankWhenSpace;
	        },
	        set: function (value) {
	            if (value != this._blankWhenSpace) {
	                this._blankWhenSpace = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    NumberCellEditor.prototype.setMask = function (options) {
	        this._mask = null;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    NumberCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._decSep = $$$_DEC_SEP;
	        this._groupSep = $$$_GRP_SEP;
	        this.editFormat = undefined;
	        this.positiveOnly = false;
	        this.integerOnly = false;
	    };
	    NumberCellEditor.prototype.setEditIndex = function (index) {
	        _super.prototype.setEditIndex.call(this, index);
	        this._editor["maxLength"] = (this.maxLengthExceptComma || this.maxLength <= 0) ? this._defMaxLength : this.maxLength;
	    };
	    NumberCellEditor.prototype._inputHandler = function (e) {
	        if (this._editFormat) {
	            var target = e.target;
	            this.$_editFormatting(e);
	        }
	        _super.prototype._inputHandler.call(this, e);
	    };
	    NumberCellEditor.prototype._keyPressHandler = function (e) {
	        if (Utils_1.Utils.isFirefox) {
	            if (e.ctrlKey || e.charCode === 0) {
	                _super.prototype._keyPressHandler.call(this, e);
	                return;
	            }
	        }
	        var chkLen = true;
	        var c = String.fromCharCode(e.keyCode || e.charCode);
	        if (!this._regx.test(c) || (e.target["value"] && e.target["value"].indexOf(this._decSep) >= 0 && c == this._decSep)) {
	            if (!this._multipleChar || c !== this._multipleChar) {
	                chkLen = false;
	                !(this.blankWhenSpace && c === " ") && e.preventDefault();
	            }
	        }
	        var ss = e.target["selectionStart"];
	        var se = e.target["selectionEnd"];
	        var value = e.target["value"];
	        var tsReg = new RegExp("\\" + this._groupSep, "g");
	        var s = value ? value.split("") : [];
	        s.splice(ss, se - ss, c === this._multipleChar ? this._addString : c);
	        s = s.join("").replace(tsReg, "");
	        if (this.maxLength > 0 && chkLen && this.maxLengthExceptComma && value && value !== $$_EMPTY_TEXT_VALUE) {
	            s.length > this.maxLength && e.preventDefault();
	        }
	        if (this._maxIntegerLength > 0 && c !== this._decSep) {
	            var int = Math.floor(this.$_strToNum(s));
	            if (!isNaN(int)) {
	                var len = Math.abs(int).toString().length;
	                this._maxIntegerLength < len && e.preventDefault();
	            }
	        }
	        this._isMultiple = c == this._multipleChar;
	        _super.prototype._keyPressHandler.call(this, e);
	    };
	    NumberCellEditor.prototype._keyDownHandler = function (e) {
	        var key = e.keyCode || e.charCode;
	        this._isMultiple = false;
	        if ((key === 8 || key === 46) && this.editing && this._editFormat) {
	            var elt = e.target;
	            var value = elt["value"];
	            var len = value.length;
	            var ary = value && value.split("");
	            var ss = elt["selectionStart"];
	            var se = elt["selectionEnd"];
	            if (ss !== se) {
	                return _super.prototype._keyDownHandler.call(this, e);
	            }
	            var c = value[key === 8 ? ss - 1 : ss];
	            if (c === this._groupSep || c === this._decSep) {
	                if (c === this._decSep && ss === (key === 8 ? value.length : value.length - 1)) ;
	                else {
	                    ary.splice(key === 8 ? ss - 2 : ss + 1, 1);
	                    elt["value"] = ary.join("");
	                    this.$_editFormatting(e);
	                    var value_1 = elt["value"];
	                    var aLen = len - (key === 8 ? value_1.length : len);
	                    elt["setSelectionRange"](ss - aLen, se - aLen);
	                    this._doChanged();
	                    e.preventDefault();
	                }
	            }
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    NumberCellEditor.prototype._dispatchChange = function () {
	        if (this.visible) {
	            this.$_resetValue();
	            _super.prototype._dispatchChange.call(this);
	        }
	    };
	    NumberCellEditor.prototype.setEditValue = function (value) {
	        var v = parseFloat(value);
	        if (isNaN(v)) {
	            this._editor["value"] = "";
	        }
	        else if (this._editFormat && (typeof v == "number")) {
	            var len = Math.max(0, v.toString().length - Math.floor(v).toFixed().length - 1, this._decimalFormatter._minDigits);
	            this._editor["value"] = this.$_formatNum(v, len);
	        }
	        else {
	            this._editor["value"] = v;
	        }
	    };
	    NumberCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        this.$_resetValue();
	        var fld = this._editField();
	        var v = fld.nullValue;
	        try {
	            var s = this._editor["value"];
	            s = s && s.trim();
	            if (s) {
	                var tsReg = new RegExp("\\" + this._groupSep, "g");
	                var dpReg = new RegExp("[\\" + this._decSep + "]+", "g");
	                s = s.replace(tsReg, "");
	                s = s.replace(dpReg, ".");
	                s = s.replace(/\++/g, "+");
	                s = s.replace(/\-+/g, "-");
	                s = s.replace(/\+\-/g, "+");
	                s = s.replace(/\-\+/g, "-");
	            }
	            v = s ? parseFloat(s) : undefined;
	        }
	        catch (e) {
	            if (throwError)
	                throw e;
	        }
	        return v;
	    };
	    NumberCellEditor.prototype.setCellEditValue = function (value) {
	        if (!this.readOnly && this._requestStart()) {
	            if (typeof value === "string" || typeof value === "number") {
	                value = this.$_strToNum(value);
	                this.setEditValue(value);
	                this._doChanged();
	            }
	        }
	    };
	    NumberCellEditor.prototype._getInputSelector = function () {
	        return NumberCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    NumberCellEditor.prototype.$_strToNum = function (numStr) {
	        numStr = "" + numStr;
	        var dpReg = new RegExp("\\" + this._decSep, "g");
	        var tsReg = new RegExp("\\" + this._groupSep, "g");
	        var sign = numStr[0] === "-";
	        numStr = numStr.replace(tsReg, "").replace(dpReg, ".");
	        var v = parseFloat(numStr);
	        return isNaN(v) ? NaN : sign ? -Math.abs(v) : v;
	    };
	    NumberCellEditor.prototype.$_formatNum = function (value, c) {
	        var n = value;
	        c = Math.abs(c);
	        c = isNaN(c) ? 2 : c;
	        var s = n < 0 ? "-" : n == 0 && 1 / n === -Infinity ? "-" : "";
	        var v = parseInt(n = Math.abs(+n || 0).toFixed(c));
	        var i = v + "";
	        var j = i.length;
	        j = i.length > 3 ? j % 3 : 0;
	        return s + (j ? i.substr(0, j) + this._groupSep : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + this._groupSep) + (c ? this._decSep + Math.abs(n - v).toFixed(c).slice(2) : "");
	    };
	    NumberCellEditor.prototype.$_editFormatting = function (e) {
	        var editor = this._editor;
	        var value = e.target["value"];
	        var isDecSep = value && value[value.length - 1] == this._decSep;
	        var selStart = e.target["selectionStart"];
	        var selEnd = e.target["selectionEnd"];
	        value = this._isMultiple && this._addString ? value.replace(/\+/g, this._addString) : value;
	        this._isMultiple && this._addString && (selStart += this._addString.length, selEnd += this._addString.length);
	        var ary = value.split(this._decSep);
	        var fLen = 0;
	        if (ary.length > 1) {
	            ary.length = 2;
	            ary[1] = ary[1].substr(0, this._decimalFormatter._maxDigits);
	            fLen = ary[1].length;
	            value = ary.join(this._decSep);
	        }
	        fLen = ary.length == 2 ? Math.min(ary[1].length, this._decLen != null ? this._decLen : 99) : 0;
	        var num = this.$_strToNum(value);
	        if (!isNaN(num)) {
	            if (this.maxLength > 0 || this.maxIntegerLength > 0) {
	                var s = String(num).split(".");
	                if (this.maxIntegerLength > 0) {
	                    s[0] = s[0].substr(0, this.maxIntegerLength);
	                }
	                var s2 = s.join(".");
	                if (this.maxLength > 0) {
	                    s2 = s2.substr(0, this.maxLength);
	                }
	                num = parseFloat(s2);
	            }
	            value = this.$_formatNum(num, fLen); //, this.decSep, this.groupSep);
	            value = isDecSep && this._decLen && value.indexOf(this._decSep) < 0 ? value + this._decSep : value;
	            var l1 = value.length, l2 = e.target["value"].length;
	            Math.abs(l1 - l2) == 1 && (l1 > l2 ? (selStart++, selEnd++) : (value.indexOf(this._decSep) >= selStart && (selStart--, selEnd--)));
	            e.target["value"] = value;
	            e.target["setSelectionRange"](selStart, selEnd);
	        }
	    };
	    NumberCellEditor.prototype.$_resetValue = function () {
	        if (this.visible) {
	            var editor = this._editor;
	            var s = editor.selectionStart;
	            var p = editor.selectionEnd;
	            var plen = editor.value ? editor.value.length : 0;
	            editor.value = editor.value.replace($$_HANGUL_REG, '').trim();
	            var alen = editor.value ? editor.value.length : 0;
	            alen == plen ? editor.setSelectionRange(s, p) : editor.setSelectionRange(p, p);
	        }
	    };
	    NumberCellEditor.prototype.$_resetRistrict = function () {
	        if (this._positiveOnly && this._integerOnly) {
	            this._regx = this._regxPosInt;
	        }
	        else if (this._positiveOnly) {
	            this._regx = this._regxPos;
	        }
	        else if (this._integerOnly) {
	            this._regx = this._regxInt;
	        }
	        else {
	            this._regx = this._regxAll;
	        }
	    };
	    NumberCellEditor.INPUT_CSS = "rg-number-editor";
	    return NumberCellEditor;
	}(TextCellEditor));
	exports.NumberCellEditor = NumberCellEditor;
	});

	unwrapExports(Editors);
	var Editors_1 = Editors.CellEditor;
	var Editors_2 = Editors.EditMask;
	var Editors_3 = Editors.TextCellEditor;
	var Editors_4 = Editors.LineCellEditor;
	var Editors_5 = Editors.PasswordCellEditor;
	var Editors_6 = Editors.MultiLineCellEditor;
	var Editors_7 = Editors.NumberCellEditor;

	var ListEditors = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// ListEditors.ts
	// 2019. 10. 16. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	// TODO: Editors.ts에서도 선언한다. 개선할 것!
	var $$_EMPTY_TEXT_VALUE = '***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er';
	var DropDownPosition;
	(function (DropDownPosition) {
	    DropDownPosition["BUTTON"] = "button";
	    DropDownPosition["EDITOR"] = "editor";
	})(DropDownPosition = exports.DropDownPosition || (exports.DropDownPosition = {}));
	var DropDownSortStyle;
	(function (DropDownSortStyle) {
	    DropDownSortStyle["NONE"] = "none";
	    DropDownSortStyle["ASCENDING"] = "ascending";
	    DropDownSortStyle["DESCENDING"] = "descending";
	})(DropDownSortStyle = exports.DropDownSortStyle || (exports.DropDownSortStyle = {}));
	var DropDownValueLabel;
	(function (DropDownValueLabel) {
	    DropDownValueLabel["VALUE"] = "value";
	    DropDownValueLabel["LABEL"] = "label";
	    DropDownValueLabel["VALUE_LABEL"] = "valueLabel";
	    DropDownValueLabel["LABEL_VALUE"] = "labelValue";
	})(DropDownValueLabel = exports.DropDownValueLabel || (exports.DropDownValueLabel = {}));
	var DropDownList = /** @class */ (function (_super) {
	    __extends(DropDownList, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DropDownList(container) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minWidth = 0;
	        _this._maxWidth = 0;
	        _this._dropDownCount = 8;
	        _this._caseSensitive = false;
	        _this._partialMatch = false;
	        _this._sortStyle = DropDownSortStyle.NONE;
	        _this._items = null;
	        _this._itemIndex = -1;
	        _this._dropDownPosition = DropDownPosition.BUTTON;
	        _this._dropDownWidth = -1; // -1: column width, 0: measured width, 0 < explicit width
	        _this._displayLabels = null;
	        _this._separator = null;
	        _this._itemColumned = false;
	        _this._viewGridInside = false;
	        _this._trimLabelText = true;
	        _this._initCount = 0;
	        _this._moreItemCount = 25;
	        _this._moreText = null;
	        _this._selected = false;
	        _this._mouseoverHandler = function (e) {
	            var div = this._currDiv = e.currentTarget;
	            if (Utils_1.Utils.getChildIndex(div) != this._itemIndex) {
	                div.style.background = "rgba(0, 255, 0, 0.2)";
	            }
	        }.bind(_this);
	        _this._mouseoutHandler = function (e) {
	            var div = this._currDiv = e.currentTarget;
	            if (Utils_1.Utils.getChildIndex(div) != this._itemIndex) {
	                div.style.background = "";
	            }
	        }.bind(_this);
	        _this._clickHandler = function (e) {
	            var div = e.currentTarget;
	            var idx = Utils_1.Utils.getChildIndex(div);
	            if (idx >= 0) {
	                this._itemIndex = idx;
	                this._selected = true;
	                this.fireEvent(DropDownList.CLOSE_UP, true);
	            }
	        }.bind(_this);
	        _this._nextClickHandler = function (e) {
	            var div = e.currentTarget;
	            this.$_addMoreItems(div);
	        }.bind(_this);
	        _this._container = container;
	        _this._element = _this._createList();
	        return _this;
	    }
	    DropDownList.prototype._doDispose = function () {
	        this._container = null;
	        this._containerElement = null;
	        this._items = null;
	        Utils_1.Utils.clearElements(this._element);
	        if (this._element.parentNode) {
	            this._element.parentNode.removeChild(this._element);
	        }
	        this._element = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DropDownList.prototype, "minWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minWidth */
	        get: function () {
	            return this._minWidth;
	        },
	        set: function (value) {
	            if (value != this._minWidth) {
	                this._minWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "maxWidth", {
	        /** maxWidth */
	        get: function () {
	            return this._maxWidth;
	        },
	        set: function (value) {
	            if (value != this._maxWidth) {
	                this._maxWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "dropDownCount", {
	        /** dropDownCount */
	        get: function () {
	            return this._dropDownCount;
	        },
	        set: function (value) {
	            if (value != this._dropDownCount) {
	                this._dropDownCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "caseSensitive", {
	        /** caseSensitive */
	        get: function () {
	            return this._caseSensitive;
	        },
	        set: function (value) {
	            if (value != this._caseSensitive) {
	                this._caseSensitive = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "partialMatch", {
	        /** partialMatch */
	        get: function () {
	            return this._partialMatch;
	        },
	        set: function (value) {
	            if (value != this._partialMatch) {
	                this._partialMatch = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "sortStyle", {
	        /** sortStyle */
	        get: function () {
	            return this._sortStyle;
	        },
	        set: function (value) {
	            if (value != this._sortStyle) {
	                this._sortStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items;
	        },
	        set: function (value) {
	            if (value !== this._items) {
	                this._items = [];
	                if (value) {
	                    for (var i = 0, cnt = value.length; i < cnt; i++) {
	                        this._items.push({
	                            label: value[i].label,
	                            value: value[i].value,
	                            index: i
	                        });
	                    }
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "itemIndex", {
	        /** itemIndex */
	        get: function () {
	            return this._itemIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "dropDownPosition", {
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            if (value != this._dropDownPosition) {
	                this._dropDownPosition = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "dropDownWidth", {
	        /** dropDownWidth */
	        get: function () {
	            return this._dropDownWidth;
	        },
	        set: function (value) {
	            if (value != this._dropDownWidth) {
	                this._dropDownWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "displayLabels", {
	        /** displayLabels */
	        get: function () {
	            return this._displayLabels;
	        },
	        set: function (value) {
	            if (value !== this._displayLabels) {
	                this._displayLabels = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "separator", {
	        /** separator */
	        get: function () {
	            return this._separator;
	        },
	        set: function (value) {
	            if (value != this._separator) {
	                this._separator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "itemColumned", {
	        /** itemColumned */
	        get: function () {
	            return this._itemColumned;
	        },
	        set: function (value) {
	            if (value != this._itemColumned) {
	                this._itemColumned = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "viewGridInside", {
	        /** viewGridInside */
	        get: function () {
	            return this._viewGridInside;
	        },
	        set: function (value) {
	            if (value != this._viewGridInside) {
	                this._viewGridInside = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "trimLabelText", {
	        /** trimLabelText */
	        get: function () {
	            return this._trimLabelText;
	        },
	        set: function (value) {
	            if (value != this._trimLabelText) {
	                this._trimLabelText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "initCount", {
	        /** initCount */
	        get: function () {
	            return this._initCount;
	        },
	        set: function (value) {
	            if (value != this._initCount) {
	                this._initCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "moreItemCount", {
	        /** moreItemCount */
	        get: function () {
	            return this._moreItemCount;
	        },
	        set: function (value) {
	            if (value != this._moreItemCount) {
	                this._moreItemCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "moreText", {
	        /** moreText */
	        get: function () {
	            return this._moreText;
	        },
	        set: function (value) {
	            if (value != this._moreText) {
	                this._moreText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return this._containerElement && this._containerElement.contains(this._element);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "itemCount", {
	        /** itemCount */
	        get: function () {
	            return this.initCount == 0 ? (this._items && this._items.length) : this._element.children.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "valueIndex", {
	        /** valueIndex */
	        get: function () {
	            var items = this._items;
	            var i = this._itemIndex;
	            return (items && i >= 0 && i < items.length) ? items[i].index : -1;
	        },
	        set: function (value) {
	            value = Math.max(-1, value);
	            this._itemIndex = -1;
	            if (value >= 0) {
	                for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	                    if (this._items[i].index == value) {
	                        this._itemIndex = value;
	                        break;
	                    }
	                }
	            }
	            this.listing && this._refreshItems();
	            this._selected = true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownList.prototype, "selected", {
	        /** selected */
	        get: function () {
	            return this._selected;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DropDownList.prototype.setItemIndex = function (value, forceRefresh, isSearch) {
	        if (forceRefresh === void 0) { forceRefresh = false; }
	        if (isSearch === void 0) { isSearch = false; }
	        var child = this._element.childNodes;
	        value = Math.max(-1, value);
	        if (value < this._items.length && (forceRefresh || value != this._itemIndex || value >= child.length - 1)) {
	            if (isSearch && value >= child.length - 1) {
	                var div = child[child.length - 1];
	                if (div["isMoreButton"]) {
	                    var addCount = value - (child.length - 1);
	                    addCount = (Math.floor(addCount / this.moreItemCount) + 1) * this.moreItemCount;
	                    this.$_addMoreItems(div, addCount);
	                }
	            }
	            this._itemIndex = value;
	            this.listing && this._refreshItems();
	            this._selected = value >= 0;
	        }
	    };
	    DropDownList.prototype.show = function (containerElement, x, y, cellWidth, editBounds) {
	        this._containerElement = this._viewGridInside ? this._container["_container"] : containerElement;
	        (this._sortStyle != DropDownSortStyle.NONE) && this.$_sortItems();
	        this._show(x, y, cellWidth, editBounds);
	    };
	    DropDownList.prototype.hide = function () {
	        Utils_1.Utils.detach(this._element);
	        this._containerElement = null;
	    };
	    DropDownList.prototype.currentIsMore = function (itemIndex) {
	        var item = this._element.childNodes[itemIndex != null ? itemIndex : this._itemIndex];
	        return item && item["isMoreButton"];
	    };
	    DropDownList.prototype.addMoreItems = function () {
	        if (this.currentIsMore(null)) {
	            var item = this._element.childNodes[this._itemIndex];
	            this.$_addMoreItems(item, 0);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DropDownList.prototype._changed = function () {
	    };
	    DropDownList.prototype._createList = function () {
	        var element = document.createElement("div");
	        element.className = "rg-dropdownlist";
	        element.onkeydown = function (e) {
	            if (e.keyCode == 27) {
	                this.fireEvent(DropDownList.CLOSE_UP, false);
	            }
	        }.bind(this);
	        return element;
	    };
	    DropDownList.prototype.$_sortItems = function () {
	        if (this._sortStyle == DropDownSortStyle.ASCENDING) {
	            this._items.sort(function (i1, i2) {
	                return i1.label < i2.label ? -1 : i1.label > i2.label ? 1 : 0;
	            });
	        }
	        else {
	            this._items.sort(function (i1, i2) {
	                return i1.label > i2.label ? -1 : i1.label < i2.label ? 1 : 0;
	            });
	        }
	    };
	    DropDownList.prototype._show = function (x, y, cellWidth, editBounds) {
	        var elt = this._element;
	        if (!elt) {
	            return;
	        }
	        var css = elt.style;
	        css.position = "absolute";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.minWidth = "20px";
	        css.minHeight = "10px";
	        css.overflow = "auto";
	        css.zIndex = "3000";
	        this._firstChild = null;
	        Utils_1.Utils.clearChildren(elt);
	        Utils_1.Utils.disableSelection(elt);
	        this._containerElement.appendChild(elt);
	        this._cellWidth = cellWidth;
	        this._editBounds = editBounds;
	        css.width = "10px";
	        this._buildItems();
	        this.$_resetHeight();
	        this._resetWidth(cellWidth);
	        this.$_resetPosition(x, y, cellWidth, editBounds);
	        this._selected = false;
	    };
	    DropDownList.prototype._getListElement = function () {
	        return this._element;
	    };
	    DropDownList.prototype.$_resetHeight = function () {
	        var elt = this._getListElement();
	        if (this._firstChild) {
	            var cr = Utils_1.Utils.getClientRect(this._firstChild);
	            var style = this._firstChild["currentStyle"] || window.getComputedStyle(this._firstChild);
	            var marginTop = parseInt(style.marginTop.replace("px", ""));
	            marginTop = isNaN(marginTop) ? 0 : marginTop;
	            var marginBottom = parseInt(style.marginBottom.replace("px", ""));
	            marginBottom = isNaN(marginBottom) ? 0 : marginBottom;
	            var h = (this._dropDownCount > 0) ? Math.min(this._dropDownCount, this._items.length) : this._items.length;
	            elt.style.height = ((cr.height + marginTop) * h + 4 + marginBottom) + "px";
	        }
	        else {
	            elt.style.height = "10px";
	        }
	    };
	    DropDownList.prototype._resetWidth = function (cellWidth) {
	        var elt = this._element;
	        var r = Utils_1.Utils.getClientRect(elt);
	        var dw = this._dropDownWidth;
	        var w = dw;
	        var ew = elt.offsetWidth ? elt.offsetWidth + (Utils_1.Utils.ieOld && elt.style.boxSizing === "border-box" ? 17 : 0) : 0;
	        if (w < 0) {
	            w = cellWidth;
	        }
	        else if (w == 0) {
	            w = 10; // Dom Size가 큰 상태에서는 줄어들지 않으므로 최소 크기(10)으로 설정 후 계산
	        }
	        elt.style.width = w + "px";
	        var cw = 0;
	        if (this._firstChild) {
	            var style = this._firstChild["currentStyle"] || window.getComputedStyle(this._firstChild);
	            var marginLeft = parseInt(style.marginLeft.replace("px", ""));
	            marginLeft = isNaN(marginLeft) ? 0 : marginLeft;
	            var marginRight = parseInt(style.marginRight.replace("px", ""));
	            marginRight = isNaN(marginRight) ? 0 : marginRight;
	            var childs = elt.childNodes;
	            for (var i = 0; i < childs.length; i++) {
	                cw = Math.max(cw, childs[i]["scrollWidth"]);
	            }
	            cw += elt.offsetWidth - elt.clientWidth + marginLeft + marginRight + 2;
	        }
	        //r = Dom.getBounds(elt);
	        //cw = Math.max(cw, r.width);
	        if (dw < 0) {
	            cw = Math.max(cw, w);
	        }
	        var sz = Utils_1.Utils.getBrowserSize(); // Dom.getBounds(this._containerElement);
	        cw = Math.min(cw, sz.width);
	        w = cw;
	        if (Utils_1.Utils.ieOld && (dw >= 0 || cw > w)) { // boxSizing: "border-box"일 때 IE 9에서 width가 text보다 작아지는 현상
	            w += 20;
	        }
	        if (w < r.width) {
	            elt.style.overflowX = "hidden";
	        }
	        else {
	            elt.style.overflowX = "auto";
	        }
	        elt.style.width = Math.max(w, ew) + "px";
	    };
	    DropDownList.prototype.$_resetPosition = function (x, y, cellWidth, editBounds) {
	        var br = Utils_1.Utils.getBrowserSize();
	        var pr = Utils_1.Utils.getClientRect(this._containerElement);
	        var cr = Utils_1.Utils.getClientRect(this._container["_container"]);
	        var w = br.width; // this._container.width(); // _container: grid container
	        var h = br.height; //this._container.height();
	        var r = Utils_1.Utils.getClientRect(this._element);
	        var sx = window.pageXOffset || document.documentElement.scrollLeft;
	        var sy = window.pageYOffset || document.documentElement.scrollTop;
	        if (document.documentElement.scrollWidth > document.documentElement.clientWidth) {
	            h -= 18;
	        }
	        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
	            w -= 18;
	        }
	        x += cr.left - pr.left;
	        y += cr.top - pr.top;
	        if (Utils_1.Utils.ieTen || Utils_1.Utils.ieOld || Utils_1.Utils.ieLeg) {
	            x += document.documentElement.scrollLeft;
	            y += document.documentElement.scrollTop;
	        }
	        if (y + r.height > h + sy) {
	            y = y - editBounds.height - r.height;
	            if (y < 0) {
	                y = h - r.height - 2;
	            }
	        }
	        if (this._dropDownPosition != DropDownPosition.EDITOR) { // BUTTON 이거나 잘못된 값.
	            x = Math.max(0, x + cellWidth - r.width);
	        }
	        else {
	            if (x + r.width > w + sx) {
	                x = w - r.width;
	            }
	        }
	        if (this._viewGridInside) {
	            y = editBounds.bottom - pr.top + 2;
	            if ((pr.bottom < editBounds.bottom + r.height) || (h + sy < editBounds.bottom + r.height)) {
	                y = editBounds.top - r.height - pr.top - 2;
	            }
	        }
	        Utils_1.Utils.move(this._element, Math.max(0, x), Math.max(0, y));
	    };
	    DropDownList.prototype._resetItems = function (x, y, cellWidth, editBounds) {
	        Utils_1.Utils.clearChildren(this._element);
	        this._firstChild = null;
	        this._buildItems();
	        this.$_resetHeight();
	        this._resetWidth(cellWidth);
	        this.$_resetPosition(x, y, cellWidth, editBounds);
	    };
	    DropDownList.prototype._buildItems = function (startIndex, addCount) {
	        if (startIndex === void 0) { startIndex = 0; }
	        if (addCount === void 0) { addCount = 0; }
	        var itemWidth = 0;
	        var font;
	        var addValue = function (div, item) {
	            var s = (item && item.value ? item.value.toString() : "");
	            var span = document.createElement("span");
	            span.style.whiteSpace = "pre";
	            span.innerHTML = s ? Utils_1.Utils.htmlEncode(s) : "&nbsp;";
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	            return span;
	        }.bind(this);
	        var addLabel = function (div, item, calcWidth) {
	            var s = (item && item.label ? item.label.toString() : "");
	            s = this._trimLabelText ? s.trim() : s;
	            var span = document.createElement("span");
	            !this._trimLabelText && (span.style.whiteSpace = "pre");
	            span.innerHTML = s ? Utils_1.Utils.htmlEncode(s) : "&nbsp;";
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	            return span;
	        }.bind(this);
	        var addSeparator = function (div, separator) {
	            var span = document.createElement("span");
	            span.style.whiteSpace = "pre";
	            span.innerHTML = separator ? Utils_1.Utils.htmlEncode(separator) : "&nbsp;";
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	        }.bind(this);
	        var calcWidth = function (span) {
	            if (!font) {
	                var style = window.getComputedStyle(span);
	                font = {
	                    font: style.fontSize + " " + style.fontFamily,
	                    size: parseInt(style.fontSize)
	                };
	            }
	            return itemWidth; // Math.max(itemWidth, g.getTextWidth(font, span.innerText));
	        }.bind(this);
	        var items = this._items;
	        var moreCount = addCount || (this._element.children.length > 0 ? this.moreItemCount : this.initCount);
	        if (!items || items.length < 1) {
	            return;
	        }
	        for (var i = startIndex, cnt = items.length; i < cnt; i++) {
	            if (this._initCount && i - startIndex >= moreCount && i < cnt) {
	                var div_1 = document.createElement("div");
	                var css_1 = div_1.style;
	                css_1.position = "relative";
	                css_1.cssFloat = "none";
	                css_1.paddingTop = "1px";
	                css_1.paddingBottom = "1px";
	                css_1.paddingLeft = "2px";
	                css_1.paddingRight = "2px";
	                css_1.whiteSpace = "nowrap";
	                css_1.cursor = "pointer";
	                css_1.textAlign = "center";
	                Utils_1.Utils.disableSelection(div_1);
	                div_1["nextIndex"] = i;
	                div_1.onmouseover = null; //!this._useCssStyle ? this._mouseoverHandler : null;
	                div_1.onmouseout = null; //!this._useCssStyle ? this._mouseoutHandler : null;
	                div_1.onclick = this._nextClickHandler;
	                div_1["isMoreButton"] = true;
	                div_1.className = "rg-dropdown-more";
	                addLabel(div_1, { label: this.moreText });
	                this._element.appendChild(div_1);
	                break;
	            }
	            var item = items[i];
	            var div = document.createElement("div");
	            var css = div.style;
	            css.position = "relative";
	            css.cssFloat = "none";
	            css.paddingTop = "1px";
	            css.paddingBottom = "1px";
	            css.paddingLeft = "2px";
	            css.paddingRight = "2px";
	            css.whiteSpace = "nowrap";
	            css.cursor = "default";
	            // !this._useCssStyle && (div.style.background = i == this._itemIndex ? "#333" : "");
	            // !this._useCssStyle && (div.style.color = i == this._itemIndex ? "#fff" : "");
	            div.className = i == this._itemIndex ? "rg-dropdown-select" : "rg-dropdown-item";
	            Utils_1.Utils.disableSelection(div);
	            this._element.appendChild(div);
	            if (i == 0)
	                this._firstChild = div;
	            div.onmouseover = null; //!this._useCssStyle ? this._mouseoverHandler : null;
	            div.onmouseout = null; //!this._useCssStyle ? this._mouseoutHandler : null;
	            div.onclick = this._clickHandler;
	            var span = null;
	            switch (this.displayLabels) {
	                case DropDownValueLabel.LABEL:
	                    addLabel(div, item);
	                    break;
	                case DropDownValueLabel.VALUE:
	                    addValue(div, item);
	                    break;
	                case DropDownValueLabel.LABEL_VALUE:
	                    span = addLabel(div, item, true);
	                    addSeparator(div, this._separator);
	                    addValue(div, item);
	                    break;
	                case DropDownValueLabel.VALUE_LABEL:
	                    span = addValue(div, item, true);
	                    addSeparator(div, this._separator);
	                    addLabel(div, item);
	                    break;
	            }
	            if (span && this._itemColumned) {
	                itemWidth = Math.max(itemWidth, calcWidth(span));
	            }
	        }
	        if (this._itemColumned && itemWidth) {
	            for (var i = 0, cnt = this._element.childNodes.length; i < cnt; i++) {
	                var span = this._element.childNodes[i].firstChild;
	                span.style.display = "inline-block";
	                span.style.width = itemWidth + "px";
	            }
	        }
	    };
	    DropDownList.prototype.$_addMoreItems = function (div, addCount) {
	        var idx = div["nextIndex"];
	        div.parentNode && div.parentNode.removeChild(div);
	        this._buildItems(idx, addCount);
	        this._resetWidth(this._cellWidth);
	        this.fireEvent(DropDownList.EDITOR_FOCUS);
	    };
	    DropDownList.prototype._refreshItems = function () {
	        var items = this._element.childNodes;
	        for (var i = 0; i < items.length; i++) {
	            var item = items[i];
	            item.className = i == this._itemIndex ? "rg-dropdown-select" : "rg-dropdown-item";
	        }
	        var idx = this._itemIndex;
	        if (idx >= 0 && idx < items.length) {
	            var item = items[idx];
	            if (item.offsetTop < this._element.scrollTop) {
	                this._element.scrollTop = item.offsetTop;
	            }
	            else {
	                var y = item.offsetTop + Utils_1.Utils.getSize(item).height;
	                if (y >= this._element.scrollTop + this._element.clientHeight) {
	                    this._element.scrollTop = y - this._element.clientHeight;
	                }
	            }
	        }
	    };
	    DropDownList.prototype.$_hangulToChosungAll = function (str) {
	        var cho = ["ㄱ", "ㄲ", "ㄴ", "ㄷ", "ㄸ", "ㄹ", "ㅁ", "ㅂ", "ㅃ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅉ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"];
	        var result = "";
	        for (var i = 0; i < str.length; i++) {
	            var code = str.charCodeAt(i) - 44032;
	            if (code > -1 && code < 11172)
	                result += cho[Math.floor(code / 588)];
	            else
	                result += str[i];
	        }
	        return result;
	    };
	    DropDownList.prototype.$_hangulToChosung = function (str) {
	        var result = { cho: str, org: str };
	        if (/[ㄱ-힝]/.test(str)) {
	            var rCho = ["ㄱ", "ㄲ", "ㄴ", "ㄷ", "ㄸ", "ㄹ", "ㅁ", "ㅂ", "ㅃ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅉ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"];
	            var rJung = ["ㅏ", "ㅐ", "ㅑ", "ㅒ", "ㅓ", "ㅔ", "ㅕ", "ㅖ", "ㅗ", "ㅘ", "ㅙ", "ㅚ", "ㅛ", "ㅜ", "ㅝ", "ㅞ", "ㅟ", "ㅠ", "ㅡ", "ㅢ", "ㅣ"];
	            var nTmp = str.charCodeAt(0) - 0xAC00;
	            var jong = nTmp % 28;
	            var jung = ((nTmp - jong) / 28) % 21;
	            var cho = (((nTmp - jong) / 28) - jung) / 21;
	            result.cho = rCho[cho] ? rCho[cho] : str;
	            if (rJung[jung]) {
	                result.org = str;
	            }
	        }
	        return result;
	    };
	    DropDownList.prototype.$_search = function (text, ignoreSelected) {
	        if (ignoreSelected === void 0) { ignoreSelected = false; }
	        try {
	            if (this._items && this._items.length > 0 && text) {
	                var items = this._items;
	                var cnt = items.length;
	                var t = this._caseSensitive ? text : text.toLowerCase();
	                var list = [];
	                for (var i = 0; i < cnt; i++) {
	                    var s = items[i].label.toString();
	                    if (s) {
	                        s = this._caseSensitive ? s : s.toLowerCase();
	                        if (this._partialMatch) {
	                            var sc = "";
	                            for (var y = 0; y < s.length; y++) {
	                                var htcS = this.$_hangulToChosung(s[y]);
	                                var htcT = this.$_hangulToChosung(t[y]);
	                                sc += htcT.org ? htcS.org : htcS.cho;
	                            }
	                            if (sc == t) {
	                                this.setItemIndex(i, ignoreSelected, true);
	                                return;
	                            }
	                        }
	                        else {
	                            if (s == t) {
	                                this.setItemIndex(i, ignoreSelected, true);
	                                return;
	                            }
	                        }
	                    }
	                    list.push(s);
	                }
	                for (var i = 0; i < cnt; i++) {
	                    var s = list[i];
	                    if (this._partialMatch) {
	                        var match = false;
	                        for (var y = 0; y < t.length; y++) {
	                            var c = this.$_hangulToChosung(s[y]);
	                            if ((c.org && c.org == t[y]) || (c.cho && c.cho == t[y]))
	                                match = true;
	                            else {
	                                match = false;
	                                break;
	                            }
	                        }
	                        if (match) {
	                            this.setItemIndex(i, ignoreSelected, true);
	                            return;
	                        }
	                    }
	                    else {
	                        if (s && s.indexOf(t) == 0) {
	                            this.setItemIndex(i, ignoreSelected, true);
	                            return;
	                        }
	                    }
	                }
	                for (var i = 0; i < cnt; i++) {
	                    var s = list[i];
	                    if (this._partialMatch) {
	                        var htcSA = this.$_hangulToChosungAll(s);
	                        var htcTA = this.$_hangulToChosungAll(t);
	                        var idx = htcSA.indexOf(htcTA);
	                        var sc = s.substr(0, idx);
	                        if (~idx) {
	                            for (var y = 0, z = idx, len = t.length; y < len; y++, z++) {
	                                var htcS = this.$_hangulToChosung(s[z]);
	                                var htcT = this.$_hangulToChosung(t[y]);
	                                sc += htcT.org ? htcS.org : htcS.cho;
	                            }
	                        }
	                        if (sc && sc.indexOf(t) > 0) {
	                            this.setItemIndex(i, ignoreSelected, true);
	                            return;
	                        }
	                    }
	                    else {
	                        if (s && s.indexOf(t) > 0) {
	                            this.setItemIndex(i, ignoreSelected, true);
	                            return;
	                        }
	                    }
	                }
	            }
	            this.setItemIndex(-1);
	        }
	        finally {
	            if (ignoreSelected) {
	                this._selected = true;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    DropDownList.CLOSE_UP = "onDropDownListCloseUp";
	    DropDownList.EDITOR_FOCUS = "onDropDownListEditorFocus";
	    return DropDownList;
	}(EventAware_1.EventAware));
	exports.DropDownList = DropDownList;
	var DropDownCellEditor = /** @class */ (function (_super) {
	    __extends(DropDownCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DropDownCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._values = null;
	        _this._items = null;
	        _this._labels = null;
	        _this._displayLabels = DropDownValueLabel.LABEL;
	        _this._domainOnly = false;
	        _this._textReadOnly = false;
	        _this._dropDownWidth = -1;
	        _this._dropDownPosition = DropDownPosition.BUTTON;
	        _this._dropDownCount = 8;
	        _this._itemSortStyle = DropDownSortStyle.NONE;
	        _this._caseSensitive = false;
	        _this._partialMatch = false;
	        _this._commitOnSelect = true;
	        _this._dropDownWhenClick = false;
	        _this._trimLabelText = true;
	        _this._separator = null;
	        _this._itemColumned = false;
	        _this._lookup = false;
	        _this._labeling = false;
	        _this._domain = null;
	        _this._closing = false;
	        _this._selectedIndex = -1;
	        _this._globalMouseHandler = function (e) {
	            var p = e.target;
	            while (p) {
	                if (p == this._list._element) {
	                    return;
	                }
	                p = p.parentElement;
	            }
	            this.closeUp(true);
	        }.bind(_this);
	        _this._list = _this._createDropDown(grid.container);
	        _this._list.addListener(_this);
	        _this._borderable = false;
	        return _this;
	    }
	    DropDownCellEditor.prototype._doDispose = function () {
	        this._list.removeListener(this);
	        this._list.dispose();
	        this._list = null;
	        this._globalMouseHandler = null;
	        this._items = null;
	        this._values = null;
	        this._labels = null;
	        this._value = undefined;
	        _super.prototype._doDispose.call(this);
	    };
	    DropDownCellEditor.prototype._createDropDown = function (container) {
	        return new DropDownList(container);
	    };
	    Object.defineProperty(DropDownCellEditor.prototype, "values", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** values */
	        get: function () {
	            return this._values;
	        },
	        set: function (value) {
	            this._values = value ? value.slice() : [];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._values;
	        },
	        set: function (value) {
	            this.values = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "labels", {
	        /** labels */
	        get: function () {
	            return this._labels;
	        },
	        set: function (value) {
	            this._labels = value ? value.slice() : [];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "displayLabels", {
	        /** displayLabels */
	        get: function () {
	            return this._displayLabels;
	        },
	        set: function (value) {
	            if (value != this._displayLabels) {
	                this._displayLabels = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "domainOnly", {
	        /** domainOnly */
	        get: function () {
	            return this._domainOnly;
	        },
	        set: function (value) {
	            if (value != this._domainOnly) {
	                this._domainOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "textReadOnly", {
	        /** textReadOnly */
	        get: function () {
	            return this._textReadOnly;
	        },
	        set: function (value) {
	            if (value != this._textReadOnly) {
	                this._textReadOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "dropDownWidth", {
	        /** dropDownWidth */
	        get: function () {
	            return this._dropDownWidth;
	        },
	        set: function (value) {
	            if (value != this._dropDownWidth) {
	                this._dropDownWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "dropDownPosition", {
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            if (value != this._dropDownPosition) {
	                this._dropDownPosition = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "dropDownCount", {
	        /** dropDownCount */
	        get: function () {
	            return this._dropDownCount;
	        },
	        set: function (value) {
	            if (value != this._dropDownCount) {
	                this._dropDownCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "itemSortStyle", {
	        /** itemSortStyle */
	        get: function () {
	            return this._itemSortStyle;
	        },
	        set: function (value) {
	            if (value != this.itemSortStyle) {
	                this.itemSortStyle = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "caseSensitive", {
	        /** caseSensitive */
	        get: function () {
	            return this._caseSensitive;
	        },
	        set: function (value) {
	            if (value != this._caseSensitive) {
	                this._caseSensitive = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "partialMatch", {
	        /** partialMatch */
	        get: function () {
	            return this._partialMatch;
	        },
	        set: function (value) {
	            if (value != this._partialMatch) {
	                this._partialMatch = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "commitOnSelect", {
	        /** commitOnSelect */
	        get: function () {
	            return this._commitOnSelect;
	        },
	        set: function (value) {
	            if (value != this._commitOnSelect) {
	                this._commitOnSelect = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "dropDownWhenClick", {
	        /** dropDownWhenClick */
	        get: function () {
	            return this._dropDownWhenClick;
	        },
	        set: function (value) {
	            if (value != this._dropDownWhenClick) {
	                this._dropDownWhenClick = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "trimLabelText", {
	        /** trimLabelText */
	        get: function () {
	            return this._trimLabelText;
	        },
	        set: function (value) {
	            if (value != this._trimLabelText) {
	                this._trimLabelText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "separator", {
	        /** separator */
	        get: function () {
	            return this._separator;
	        },
	        set: function (value) {
	            if (value != this._separator) {
	                this._separator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "itemColumned", {
	        /** itemColumned */
	        get: function () {
	            return this._itemColumned;
	        },
	        set: function (value) {
	            if (value != this._itemColumned) {
	                this._itemColumned = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DropDownCellEditor.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return this._list.listing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DropDownCellEditor.prototype.dropDown = function (force) {
	        if (force === void 0) { force = false; }
	        if (!this.readOnly && !this.listing && !this._closing) {
	            this._refreshItems();
	            if (force || this._items && this._items.length > 0) {
	                var list = this._list;
	                var options = this._options;
	                list.viewGridInside = options.viewGridInside;
	                list.displayLabels = this.displayLabels;
	                list.separator = this.separator;
	                list.itemColumned = this.itemColumned;
	                list.items = this._items;
	                var r = Utils_1.Utils.getClientRect(this._container);
	                this._saveIndex = this._selectedIndex;
	                this._saveText = this._editor["value"];
	                list.caseSensitive = this._caseSensitive;
	                list.partialMatch = this._partialMatch;
	                list.dropDownCount = this._dropDownCount;
	                list.dropDownWidth = this._dropDownWidth;
	                list.dropDownPosition = this._dropDownPosition;
	                list.sortStyle = this._itemSortStyle;
	                list.valueIndex = this._selectedIndex;
	                list.trimLabelText = this._trimLabelText;
	                list.show(document.documentElement, r["cx"] - 1, r["cy"] + r.height, this._cellBounds.width, Utils_1.Utils.getClientRect(this._editor));
	                list["$_search"](this._editor["value"], true);
	                window.addEventListener("mousedown", this._globalMouseHandler);
	                return true;
	            }
	        }
	        return false;
	    };
	    DropDownCellEditor.prototype.closeUp = function (accept) {
	        if (this.listing) {
	            this._closing = true;
	            try {
	                window.removeEventListener("mousedown", this._globalMouseHandler);
	                this._list.hide();
	                var idx = void 0;
	                if (accept && this._list.selected && (idx = this._list.itemIndex) >= 0 && this._items && this._items.length > idx) {
	                    this._selectedIndex = this._list.valueIndex;
	                    this._editor["value"] = this._labeling ? this._items[idx].label : this._items[idx].value;
	                    if (this._selectedIndex != this._saveIndex || this._editor["value"] != this._saveText) {
	                        this._dispatchChange();
	                    }
	                    if (this._commitOnSelect) {
	                        this._dispatchCommit();
	                    }
	                }
	                else {
	                    this._selectedIndex = -1;
	                }
	            }
	            finally {
	                this._closing = false;
	            }
	            return true;
	        }
	        return false;
	    };
	    Object.defineProperty(DropDownCellEditor.prototype, "hasButton", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DropDownCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._values = [];
	        this._labels = [];
	        this._displayLabels = DropDownValueLabel.LABEL;
	        this._separator = " - ";
	        this._itemColumned = false;
	        this._domainOnly = false;
	        this._textReadOnly = false;
	        this._dropDownWidth = -1;
	        this._dropDownPosition = DropDownPosition.BUTTON;
	        this._dropDownCount = 8;
	        this._itemSortStyle = DropDownSortStyle.NONE;
	        this._caseSensitive = false;
	        this._partialMatch = false;
	        this._commitOnSelect = true;
	        this._dropDownWhenClick = false;
	        this["_viewGridInside"] = false;
	        this["_initCount"] = 0;
	        this["_moreItemCount"] = 25;
	        this["_moreText"] = window["RG_CONST"] && window["RG_CONST"]["MORETEXT"] || "더보기";
	    };
	    DropDownCellEditor.prototype.setEditIndex = function (index) {
	        _super.prototype.setEditIndex.call(this, index);
	        this._lookup = false;
	        this._labeling = false;
	        this._domain = null;
	        this._items = null;
	        this._refreshItems();
	    };
	    DropDownCellEditor.prototype.setEditValue = function (value) {
	        var index = -1;
	        var v;
	        this._value = value;
	        if (this._lookup) {
	            var domain = this._domain;
	            if (domain) {
	                var i = index = domain.keys ? domain.keys.indexOf(value) : -1;
	                v = (i >= 0 && domain.values && domain.values.length > i) ? domain.values[i] : value;
	            }
	            else {
	                index = this._editIndex.dataColumn.getLookupIndex(value);
	            }
	            if (this._labeling) {
	                if (domain) {
	                    v = (index >= 0 && domain.values && domain.values.length > index) ? domain.values[index] : value;
	                }
	                else {
	                    v = index >= 0 ? this._editIndex.dataColumn.getLookupLabel(value) : value;
	                }
	                _super.prototype.setEditValue.call(this, v);
	            }
	            else {
	                _super.prototype.setEditValue.call(this, value);
	            }
	        }
	        else if (this._values) {
	            var i = 0;
	            for (var cnt = this._values.length; i < cnt; i++) {
	                if (value == this._values[i]) {
	                    index = i;
	                    break;
	                }
	            }
	            if (this._labeling && this._labels && (index < 0 || this._labels.length > index)) {
	                v = index >= 0 ? this._labels[i] : value;
	                _super.prototype.setEditValue.call(this, v);
	            }
	            else {
	                _super.prototype.setEditValue.call(this, value);
	            }
	        }
	        else {
	            _super.prototype.setEditValue.call(this, value);
	        }
	        this._selectedIndex = index;
	    };
	    DropDownCellEditor.prototype.isEdited = function () {
	        var modified = _super.prototype.isEdited.call(this);
	        if (modified && this.domainOnly) {
	            modified = this.$_getEditValue(false) !== undefined;
	        }
	        return modified;
	    };
	    DropDownCellEditor.prototype._getInputSelector = function () {
	        return DropDownCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DropDownCellEditor.prototype.setCellEditValue = function (value, dropdown) {
	        _super.prototype.setCellEditValue.call(this, value, dropdown);
	    };
	    DropDownCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        if (!this.isEdited() && this._selectedIndex < 0) {
	            return this._value;
	        }
	        else {
	            return this.$_getEditValue(throwError, validateValue);
	        }
	    };
	    DropDownCellEditor.prototype._createContainer = function () {
	        var elt = _super.prototype._createContainer.call(this);
	        elt.style.border = "none";
	        elt.style.boxShadow = "none";
	        return elt;
	    };
	    DropDownCellEditor.prototype.setBounds = function (x, y, w, h) {
	        x += 2;
	        y += 2;
	        w -= 4;
	        h -= 4;
	        _super.prototype.setBounds.call(this, x, y, w, h);
	    };
	    DropDownCellEditor.prototype._createEditor = function (parent) {
	        var editor = _super.prototype._createEditor.call(this, parent);
	        return editor;
	    };
	    DropDownCellEditor.prototype._textHandler = function () {
	        this._requestStart();
	    };
	    DropDownCellEditor.prototype._compositionstartHandler = function (e) {
	        _super.prototype._compositionstartHandler.call(this, e);
	    };
	    DropDownCellEditor.prototype._keyDownHandler = function (e) {
	        var list = this._list;
	        var itemIndex = list.itemIndex;
	        switch (e.keyCode) {
	            case Types.Keys.BACK:
	            case Types.Keys.DELETE:
	                if (!e.ctrlKey && this.textReadOnly) {
	                    this._requestStart();
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.SPACE:
	                if (this.listing && list.currentIsMore(itemIndex)) {
	                    list.addMoreItems();
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.ENTER:
	                if (this.listing && list.currentIsMore(itemIndex)) {
	                    list.addMoreItems();
	                    e.preventDefault();
	                    return true;
	                }
	                if (this.closeUp(true)) {
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.ESCAPE:
	                if (this.closeUp(false)) {
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.DOWN:
	                if (e.altKey && !this.listing) {
	                    this._requestStart();
	                    e.preventDefault();
	                    return true;
	                }
	                else if (this.listing) {
	                    this._list.setItemIndex(Math.min(list.itemCount - 1, itemIndex + 1));
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEDOWN:
	                if (this.listing) {
	                    this._list.setItemIndex(Math.min(list.itemCount - 1, itemIndex + list.dropDownCount));
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.UP:
	                if (e.altKey && this.listing) {
	                    this.closeUp(false);
	                    e.preventDefault();
	                    return true;
	                }
	                else if (this.listing) {
	                    this._list.setItemIndex(Math.max(0, itemIndex - 1));
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEUP:
	                if (this.listing) {
	                    this._list.setItemIndex(Math.max(0, itemIndex - list.dropDownCount));
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    DropDownCellEditor.prototype._keyPressHandler = function (e) {
	        _super.prototype._keyPressHandler.call(this, e);
	        e.keyCode && /* e.keyCode === Keys.SPACE &&*/ this["isTextReadOnly"] && this["isTextReadOnly"]() && e.preventDefault();
	    };
	    DropDownCellEditor.prototype._inputHandler = function (e) {
	        if (this["isTextReadOnly"] && this["isTextReadOnly"]()) {
	            e.target["value"] = this._oldValue || "";
	        }
	        _super.prototype._inputHandler.call(this, e);
	    };
	    DropDownCellEditor.prototype._pasteHandler = function (e) {
	        _super.prototype._pasteHandler.call(this, e);
	    };
	    DropDownCellEditor.prototype._copyHandler = function (e) {
	        _super.prototype._copyHandler.call(this, e);
	    };
	    DropDownCellEditor.prototype._requestStart = function (dropdown) {
	        if (_super.prototype._requestStart.call(this, dropdown)) {
	            dropdown !== false && this.dropDown();
	            return true;
	        }
	        return false;
	    };
	    DropDownCellEditor.prototype._doChanged = function () {
	        _super.prototype._doChanged.call(this);
	        if (this.listing) {
	            this._list["$_search"](this._editor["value"]);
	            this._selectedIndex = -1;
	        }
	    };
	    DropDownCellEditor.prototype.dropDownList = function (force) {
	        this.dropDown(force);
	    };
	    DropDownCellEditor.prototype.closeList = function (accept) {
	        this.closeUp(accept);
	    };
	    DropDownCellEditor.prototype.buttonClicked = function (index) {
	        this.listing ? this.closeUp(false) : this.dropDown();
	    };
	    DropDownCellEditor.prototype.$_setItems = function (values, labels) {
	        this._items = [];
	        for (var i = 0, cnt = values.length; i < cnt; i++) {
	            this._items.push({
	                value: values[i],
	                label: labels && labels.length > i ? labels[i] : values[i]
	            });
	        }
	    };
	    DropDownCellEditor.prototype._refreshItems = function (updateList, force) {
	        if (updateList === void 0) { updateList = false; }
	        if (force === void 0) { force = false; }
	        var index = this.editIndex;
	        var item = index.item;
	        if (this._values && (this._values.length > 0 || force)) {
	            this.$_setItems(this._values, this._labels);
	            this._labeling = this.displayLabels !== DropDownValueLabel.VALUE && this._labels && this._labels.length >= this._values.length;
	        }
	        else if (index.dataColumn && index.item && (index.dataRow >= 0 || GridItem_1.ItemState_isEditing(item.itemState))) {
	            var column = index.dataColumn;
	            if (column.lookupSource) {
	                var flds = column.lookupKeyFieldIds;
	                var keys = [];
	                for (var i = 0; i < flds.length - 1; i++) {
	                    keys.push(item.getData(flds[i]));
	                }
	                var domain = column.lookupSource.getTextDomain(keys);
	                if (domain && domain.values && domain.values.length > 0) {
	                    this.$_setItems(domain.keys, domain.values);
	                    this._labeling = true;
	                    this._lookup = true;
	                    this._domain = domain;
	                }
	            }
	            else if (column.values && column.values.length > 0) {
	                this.$_setItems(column.values, column.labels);
	                this._labeling = this.displayLabels !== DropDownValueLabel.VALUE && column.labels && column.labels.length >= column.values.length;
	                this._lookup = true;
	            }
	        }
	        if (updateList && this.listing) {
	            this._list.items = this._items;
	            var r = Utils_1.Utils.getClientRect(this._container);
	            this._list["_resetItems"](r["cx"] - 1, r["cy"] + r.height, this._cellBounds.width, Utils_1.Utils.getBounds(this._editor));
	        }
	    };
	    DropDownCellEditor.prototype.$_getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        if (validateValue === void 0) { validateValue = false; }
	        var t = this.text;
	        var org = Editors.TextCellEditor.prototype.getEditValue.call(this, throwError, validateValue);
	        var v = org;
	        var col = this._editIndex.dataColumn;
	        var index = this._selectedIndex;
	        var selected = index >= 0;
	        if (this._lookup) {
	            if (this._domain) {
	                if (this._labeling) {
	                    var i = selected ? index : this._domain.values ? this._domain.values.indexOf(t) : -1;
	                    v = (i >= 0 && this._domain.keys && this._domain.keys.length > i) ? this._domain.keys[i] : v;
	                }
	                if (this.domainOnly) {
	                    if (!this._domain.keys || this._domain.keys.indexOf(v) < 0) {
	                        return Editors.CellEditor.Unselected;
	                    }
	                }
	            }
	            else {
	                if (this._labeling) {
	                    if (selected) {
	                        v = col.getLookupValue(index);
	                    }
	                    else {
	                        v = col.getSourceValue(t);
	                    }
	                    if (v === undefined) {
	                        v = org;
	                    }
	                }
	                if (this.domainOnly) {
	                    if (!col.values || col.values.indexOf(v) < 0) {
	                        return Editors.CellEditor.Unselected;
	                    }
	                }
	            }
	        }
	        else {
	            if (this._labeling) {
	                var i = selected ? index : this._labels ? this._labels.indexOf(t) : -1;
	                if (i >= 0 && i < this._values.length) {
	                    v = this._values[i];
	                }
	            }
	            if (this.domainOnly) {
	                if (!this._values || this._values.indexOf(v) < 0) {
	                    return Editors.CellEditor.Unselected;
	                }
	            }
	        }
	        return v;
	    };
	    //-------------------------------------------------------------------------
	    // DropDownList event handlers
	    //-------------------------------------------------------------------------
	    DropDownCellEditor.prototype.onDropDownListCloseUp = function (list, accept) {
	        this.closeUp(accept);
	        !Utils_1.Utils.isMobile && this.setFocus();
	    };
	    DropDownCellEditor.prototype.onDropDownListEditorFocus = function () {
	        this.setFocus();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DropDownCellEditor.INPUT_CSS = "rg-list-editor";
	    return DropDownCellEditor;
	}(Editors.TextCellEditor));
	exports.DropDownCellEditor = DropDownCellEditor;
	var MultiCheckList = /** @class */ (function (_super) {
	    __extends(MultiCheckList, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MultiCheckList(container) {
	        var _this = _super.call(this, container) || this;
	        _this._selectItemIndices = [];
	        _this._acceptText = null;
	        _this._cancelText = null;
	        _this._showButtons = false;
	        _this._showAllCheck = false;
	        _this._acceptClickHandler = function (e) {
	            this.fireEvent(MultiCheckList.CLOSE_UP_2, true);
	        }.bind(_this);
	        _this._cancelClickHandler = function (e) {
	            this.fireEvent(MultiCheckList.CANCEL, false);
	        }.bind(_this);
	        _this._acceptMouseoverHandler = function (e) {
	            var label = e.currentTarget;
	            label.style.background = "rgba(9, 211, 140, 0.5)";
	        }.bind(_this);
	        _this._acceptMouseoutHander = function (e) {
	            var label = e.currentTarget;
	            label.style.background = "";
	        }.bind(_this);
	        _this._cancelMouseoverHandler = function (e) {
	            var label = e.currentTarget;
	            label.style.background = "#888";
	        }.bind(_this);
	        _this._cancelMouseoutHandler = function (e) {
	            var label = e.currentTarget;
	            label.style.background = "";
	        }.bind(_this);
	        _this._checkClickHandler = function (e) {
	            e.stopImmediatePropagation();
	            var div = e.currentTarget.parentNode;
	            if (div) {
	                var idx = Utils_1.Utils.getChildIndex(div);
	                var checked = e.currentTarget.checked;
	                this.$_changeCheckIndex(div, idx, checked, true);
	            }
	        }.bind(_this);
	        _this._allCheckMouseoverHandler = function (e) {
	            var div = e.currentTarget;
	            div.style.background = "rgba(0, 255, 0, 0.2)";
	            div.style.color = "";
	        }.bind(_this);
	        _this._allCheckMouseoutHandler = function (e) {
	            var div = this._currDiv = e.currentTarget;
	            div.style.background = "";
	            div.style.color = "";
	        }.bind(_this);
	        _this._allCheckClickHandler = function (e) {
	            e.stopImmediatePropagation();
	            if (e.eventPhase == 2 && e.currentTarget == this._allCheckElement) {
	                this._allCheck.checked = !this._allCheck.checked;
	                this.$_toggleAllCheck();
	            }
	            else if (e.eventPhase == 2 && e.currentTarget == this._allCheck) {
	                this.$_toggleAllCheck();
	                return;
	            }
	        }.bind(_this);
	        _this._mouseoverHandler = function (e) {
	            var div = this._currDiv = e.currentTarget;
	            var idx = Utils_1.Utils.getChildIndex(div);
	            var index = idx >= 0 && idx < this._items.length ? this._items[idx].index : idx;
	            if (this._selectItemIndices.indexOf(index) < 0) {
	                div.style.background = "rgba(0, 255, 0, 0.2)";
	                div.style.color = "";
	            }
	        }.bind(_this);
	        _this._mouseoutHandler = function (e) {
	            var div = this._currDiv = e.currentTarget;
	            var idx = Utils_1.Utils.getChildIndex(div);
	            var index = idx >= 0 && idx < this._items.length ? this._items[idx].index : idx;
	            if (this._selectItemIndices.indexOf(index) < 0) {
	                div.style.background = idx == this._itemIndex ? "#888" : "";
	                div.style.color = idx == this._itemIndex ? "#fff" : "";
	            }
	        }.bind(_this);
	        _this._clickHandler = function (e) {
	            var div = e.currentTarget;
	            if (e.eventPhase == 2) { // target
	                var idx = Utils_1.Utils.getChildIndex(div);
	                var check = void 0;
	                var inputs = div.getElementsByTagName("input");
	                for (var i = 0, cnt = inputs.length; i < cnt; i++) {
	                    if (inputs[i].type == "checkbox") {
	                        check = inputs[i];
	                        break;
	                    }
	                }
	                if (check) {
	                    check.checked = !check.checked;
	                }
	                this.$_changeCheckIndex(div, idx, check.checked, true);
	            }
	        }.bind(_this);
	        return _this;
	    }
	    Object.defineProperty(MultiCheckList.prototype, "valueIndices", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** valueIndices */
	        get: function () {
	            return this._selectItemIndices.slice();
	        },
	        set: function (value) {
	            this._selectItemIndices = [];
	            if (value == null) {
	                return;
	            }
	            this._selectItemIndices = value.slice();
	            this.listing && this._refreshItems();
	            this._selected = false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    MultiCheckList.prototype.changeCheckIndex = function (idx, checked, fireEvent) {
	        var items = this._listElement.childNodes;
	        if (idx >= 0 && idx < items.length) {
	            var item = items[idx];
	            var inputs = item.getElementsByTagName("input");
	            var check = void 0;
	            for (var i = 0, cnt = inputs.length; i < cnt; i++) {
	                if (inputs[i].type == "checkbox") {
	                    check = inputs[i];
	                    break;
	                }
	            }
	            if (check) {
	                check.checked = checked != null ? checked : !check.checked;
	                this.$_changeCheckIndex(item, idx, check.checked, fireEvent);
	            }
	        }
	    };
	    MultiCheckList.prototype.$_changeCheckIndex = function (div, idx, checked, fireEvent) {
	        var indices = this._selectItemIndices;
	        if (idx < 0 || idx >= this._items.length) {
	            return;
	        }
	        var index = this._items[idx].index;
	        if (checked) {
	            indices.indexOf(index) < 0 ? indices.push(index) : null;
	        }
	        else {
	            indices.indexOf(index) >= 0 ? indices.splice(indices.indexOf(index), 1) : null;
	        }
	        div.style.background = checked ? "#aaa" : this._itemIndex == idx ? "#888" : "";
	        div.style.color = (checked || this._itemIndex == idx) ? "#fff" : "";
	        div.className = checked ? "rg-multicheck-select" : "rg-multicheck-item";
	        this._selected = true;
	        fireEvent && this.fireEvent(MultiCheckList.CHECK_CLICK, false);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    MultiCheckList.prototype._createList = function () {
	        var element = document.createElement("div");
	        element.className = "rg-multicheck";
	        var allCheckDiv = document.createElement("div");
	        allCheckDiv.className = "rg-multicheck-allcheck";
	        this._allCheckElement = allCheckDiv;
	        allCheckDiv.style.paddingLeft = "2px";
	        Utils_1.Utils.disableSelection(allCheckDiv);
	        element.appendChild(allCheckDiv);
	        var listDiv = document.createElement("div");
	        listDiv.className = "rg-multicheck-list";
	        this._listElement = listDiv;
	        element.appendChild(listDiv);
	        var buttonDiv = document.createElement("div");
	        buttonDiv.style.textAlign = "center";
	        buttonDiv.className = "rg-multicheck-button";
	        this._buttonElement = buttonDiv;
	        buttonDiv.style.margin = "2px";
	        buttonDiv.style.paddingLeft = "2px";
	        Utils_1.Utils.disableSelection(buttonDiv);
	        element.appendChild(buttonDiv);
	        element.onkeydown = function (e) {
	            if (e.keyCode == 27) {
	                this.fireEvent(MultiCheckList.CLOSE_UP_2, false);
	            }
	        }.bind(this);
	        return element;
	    };
	    MultiCheckList.prototype._getListElement = function () {
	        return this._listElement;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    MultiCheckList.prototype.$_toggleAllCheck = function () {
	        var listElt = this._listElement;
	        var cnt = listElt.childElementCount;
	        var checked = this._allCheck.checked;
	        for (var i = 0; i < cnt; i++) {
	            this.changeCheckIndex(i, checked, false);
	        }
	        this.fireEvent(MultiCheckList.CHECK_CLICK, false);
	    };
	    MultiCheckList.prototype._show = function (x, y, cellWidth, editBounds) {
	        var elt = this._element;
	        if (!elt) {
	            return;
	        }
	        var css = elt.style;
	        css.position = "absolute";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.minWidth = "20px";
	        css.minHeight = "10px";
	        css.overflow = "visible";
	        css.zIndex = "3000";
	        css = this._listElement.style;
	        css.position = "relative";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.minWidth = "20px";
	        css.minHeight = "10px";
	        css.overflow = "auto";
	        css.zIndex = "3000";
	        css = this._buttonElement.style;
	        css.position = "relative";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.marginLeft = "0px";
	        css.marginRight = "0px";
	        this._firstChild = null;
	        Utils_1.Utils.clearChildren(this._listElement);
	        Utils_1.Utils.disableSelection(this._listElement);
	        this._containerElement.appendChild(elt);
	        this._buildItems();
	        this.$_buildButtons();
	        this.$_resetHeight();
	        this._resetWidth(cellWidth);
	        this.$_resetPosition(x, y, cellWidth, editBounds);
	        if (this._selectItemIndices.length > 0 && this._itemIndex < 0) {
	            this.setItemIndex(this._selectItemIndices[0]);
	        }
	        this._selected = false;
	    };
	    MultiCheckList.prototype._resetWidth = function (cellWidth) {
	        var elt = this._listElement;
	        var r = Utils_1.Utils.getClientRect(elt);
	        var dw = this.dropDownWidth;
	        var w = dw;
	        if (w < 0) {
	            w = cellWidth;
	        }
	        else if (w == 0) {
	            w = 10; // Dom Size가 큰 상태에서는 줄어들지 않으므로 최소 크기(10)으로 설정 후 계산
	        }
	        elt.style.width = w + "px";
	        var cw = 0;
	        if (this._firstChild) {
	            var style = this._firstChild["currentStyle"] || window.getComputedStyle(this._firstChild);
	            var marginLeft = parseInt(style.marginLeft.replace("px", ""));
	            marginLeft = isNaN(marginLeft) ? 0 : marginLeft;
	            var marginRight = parseInt(style.marginRight.replace("px", ""));
	            marginRight = isNaN(marginRight) ? 0 : marginRight;
	            var childs = elt.childNodes;
	            for (var i = 0; i < childs.length; i++) {
	                cw = Math.max(cw, childs[i]["scrollWidth"]);
	            }
	            cw += elt.offsetWidth - elt.clientWidth + marginLeft + marginRight; // + 4;
	        }
	        //r = Dom.getBounds(elt);
	        //cw = Math.max(cw, r.width);
	        if (dw < 0) {
	            cw = Math.max(cw, w);
	        }
	        var sz = Utils_1.Utils.getBrowserSize(); // Dom.getBounds(this._containerElement);
	        cw = Math.min(cw, sz.width);
	        w = cw;
	        if (Utils_1.Utils.ieOld && (dw >= 0 || cw > w)) { // boxSizing: "border-box"일 때 IE 9에서 width가 text보다 작아지는 현상
	            w += 20;
	        }
	        if (w < r.width) {
	            elt.style.overflowX = "hidden";
	        }
	        else {
	            elt.style.overflowX = "auto";
	        }
	        cw = Math.floor(this._buttonElement.getBoundingClientRect().width);
	        if (!isNaN(cw)) {
	            w = Math.max(w, cw);
	        }
	        elt.style.width = w + "px";
	    };
	    MultiCheckList.prototype.$_resetPosition = function (x, y, cellWidth, editBounds) {
	        var br = Utils_1.Utils.getBrowserSize();
	        var pr = Utils_1.Utils.getClientRect(this._containerElement);
	        var cr = Utils_1.Utils.getClientRect(this._container["_container"]);
	        var w = br.width; // this._container.width(); // _container: grid container
	        var h = br.height; //this._container.height();
	        // var r = this._dom.getBounds();
	        var r = Utils_1.Utils.getClientRect(this._element);
	        var sx = window.pageXOffset || document.documentElement.scrollLeft;
	        var sy = window.pageYOffset || document.documentElement.scrollTop;
	        if (document.documentElement.scrollWidth > document.documentElement.clientWidth) {
	            h -= 18;
	        }
	        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
	            w -= 18;
	        }
	        x += cr.left - pr.left;
	        y += cr.top - pr.top;
	        if (Utils_1.Utils.ieTen || Utils_1.Utils.ieOld || Utils_1.Utils.ieLeg) {
	            x += document.documentElement.scrollLeft;
	            y += document.documentElement.scrollTop;
	        }
	        if (y + r.height > h + sy) {
	            y = y - editBounds.height - r.height;
	            if (y < 0) {
	                y = h - r.height - 2;
	            }
	        }
	        if (this.dropDownPosition != DropDownPosition.EDITOR) { // BUTTON 이거나 잘못된 값.
	            x = Math.max(0, x + cellWidth - r.width);
	        }
	        else {
	            if (x + r.width > w + sx) {
	                x = w - r.width;
	            }
	        }
	        if (this.viewGridInside) {
	            y = editBounds.bottom - pr.top + 2;
	            if ((pr.bottom < editBounds.bottom + r.height) || (h + sy < editBounds.bottom + r.height)) {
	                y = editBounds.top - r.height - pr.top - 2;
	            }
	        }
	        // this._dom.move(Math.max(0, x), Math.max(0, y));
	        Utils_1.Utils.move(this._element, Math.max(0, x), Math.max(0, y));
	    };
	    MultiCheckList.prototype._resetItems = function (x, y, cellWidth, editBounds) {
	        Utils_1.Utils.clearChildren(this._listElement);
	        this._firstChild = null;
	        this._buildItems();
	        this.$_buildButtons();
	        this.$_resetHeight();
	        this._resetWidth(cellWidth);
	        this.$_resetPosition(x, y, cellWidth, editBounds);
	    };
	    MultiCheckList.prototype._buildItems = function () {
	        var itemWidth = 0;
	        var font;
	        var addValue = function (div, item, check) {
	            var s = (item ? item.value.toString() : "");
	            var span = document.createElement("label");
	            span.style.whiteSpace = "pre";
	            span.innerHTML = s ? Utils_1.Utils.htmlEncode(s) : "&nbsp;";
	            span.htmlFor = check && check.id;
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	            return span;
	        }.bind(this);
	        var addLabel = function (div, item, check) {
	            var s = (item ? item.label.toString() : "");
	            s = this._trimLabelText ? s.trim() : s;
	            var span = document.createElement("label");
	            !this._trimLabelText && (span.style.whiteSpace = "pre");
	            span.innerHTML = s ? Utils_1.Utils.htmlEncode(s) : "&nbsp;";
	            span.htmlFor = check && check.id;
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	            return span;
	        }.bind(this);
	        var addSeparator = function (div, separator) {
	            var span = document.createElement("span");
	            span.style.whiteSpace = "pre";
	            span.innerHTML = separator ? Utils_1.Utils.htmlEncode(separator) : "&nbsp;";
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	        }.bind(this);
	        var calcWidth = function (span) {
	            if (!font) {
	                var style = window.getComputedStyle(span);
	                font = {
	                    font: style.fontSize + " " + style.fontFamily,
	                    size: parseInt(style.fontSize)
	                };
	            }
	            return itemWidth; // Math.max(itemWidth, g.getTextWidth(font, span.innerText));
	        }.bind(this);
	        var items = this._items;
	        if (!items || items.length < 1) {
	            return;
	        }
	        for (var i = 0, cnt = items.length; i < cnt; i++) {
	            var item = items[i];
	            var div = document.createElement("div");
	            var css = div.style;
	            css.position = "relative";
	            css.cssFloat = "none";
	            css.paddingTop = "1px";
	            css.paddingBottom = "1px";
	            css.paddingLeft = "2px";
	            css.paddingRight = "2px";
	            css.whiteSpace = "nowrap";
	            css.cursor = "default";
	            var isChecked = this._selectItemIndices.indexOf(items[i].index) >= 0;
	            div.className = isChecked ? "rg-multicheck-select" : "rg-multicheck-item";
	            Utils_1.Utils.disableSelection(div);
	            this._listElement.appendChild(div);
	            if (i == 0)
	                this._firstChild = div;
	            div.onclick = this._clickHandler;
	            var check = document.createElement("input");
	            check.id = "$multiCheck_item_" + MultiCheckList.$_checkId++;
	            check.type = "checkBox";
	            check.onclick = this._checkClickHandler;
	            check.checked = isChecked;
	            div.appendChild(check);
	            var span = null;
	            switch (this.displayLabels) {
	                case DropDownValueLabel.LABEL:
	                    addLabel(div, item, check);
	                    break;
	                case DropDownValueLabel.VALUE:
	                    addValue(div, item, check);
	                    break;
	                case DropDownValueLabel.LABEL_VALUE:
	                    span = addLabel(div, item, check);
	                    addSeparator(div, this.separator);
	                    addValue(div, item, check);
	                    break;
	                case DropDownValueLabel.VALUE_LABEL:
	                    span = addValue(div, item, check);
	                    addSeparator(div, this.separator);
	                    addLabel(div, item, check);
	                    break;
	            }
	            if (span && this.itemColumned) {
	                itemWidth = Math.max(itemWidth, calcWidth(span));
	                div["_firstItem"] = span;
	            }
	        }
	        if (this.itemColumned && itemWidth) {
	            for (var i_1 = 0, cnt_1 = this._listElement.childNodes.length; i_1 < cnt_1; i_1++) {
	                var span = this._listElement.childNodes[i_1]["_firstItem"];
	                span && (span.style.display = "inline-block");
	                span && (span.style.width = itemWidth + "px");
	            }
	        }
	    };
	    MultiCheckList.prototype.setButtonOptions = function (acceptText, cancelText, showButtons, showAllCheck, allCheckText) {
	        this._acceptText = acceptText;
	        this._cancelText = cancelText;
	        this._showButtons = showButtons;
	        this._showAllCheck = showAllCheck;
	        this._allCheckText = allCheckText;
	        this.$_buildButtons();
	    };
	    MultiCheckList.prototype.$_buildButtons = function () {
	        if (!this._buttonElement) {
	            return;
	        }
	        this._buttonElement.style.display = this._showButtons ? "" : "none";
	        Utils_1.Utils.clearChildren(this._buttonElement);
	        var button = document.createElement("label");
	        var css = button.style;
	        button.innerHTML = this._acceptText;
	        button.onclick = this._acceptClickHandler;
	        button.className = "rg-multicheck-accept";
	        css.padding = "0px 3px";
	        css.marginRight = "0px";
	        css.marginLeft = "2px";
	        css.cursor = "pointer";
	        Utils_1.Utils.disableSelection(button);
	        this._buttonElement.appendChild(button);
	        button = document.createElement("label");
	        css = button.style;
	        button.innerHTML = this._cancelText;
	        button.onclick = this._cancelClickHandler;
	        button.className = "rg-multicheck-cancel";
	        css.padding = "0px 1px";
	        css.marginRight = "0px";
	        css.marginLeft = "2px";
	        css.cursor = "pointer";
	        Utils_1.Utils.disableSelection(button);
	        this._buttonElement.appendChild(button);
	        var allCheckDiv = this._allCheckElement;
	        allCheckDiv.onclick = this._allCheckClickHandler;
	        Utils_1.Utils.clearChildren(allCheckDiv);
	        if (this._showAllCheck) {
	            allCheckDiv.style.display = "";
	            var allCheck = document.createElement("input");
	            allCheck.type = "checkbox";
	            allCheck.id = "$multiCheck_item_" + MultiCheckList.$_checkId++;
	            allCheck.onclick = this._allCheckClickHandler;
	            this._allCheck = allCheck;
	            allCheckDiv.appendChild(allCheck);
	            var span = document.createElement("label");
	            span.innerHTML = this._allCheckText;
	            span.htmlFor = allCheck.id;
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            allCheckDiv.appendChild(span);
	        }
	        else {
	            allCheckDiv.style.display = "none";
	        }
	    };
	    MultiCheckList.prototype._refreshItems = function () {
	        var items = this._listElement.childNodes;
	        var idx = -1;
	        for (var i = 0; i < items.length; i++) {
	            idx = i < this._items.length ? this._items[i].index : -1;
	            var item = items[i];
	            if (i == this._itemIndex) {
	                item.style.background = "#888";
	                item.style.color = "#fff";
	            }
	            else {
	                item.style.background = this._selectItemIndices.indexOf(idx) >= 0 ? "#aaa" : "";
	                item.style.color = this._selectItemIndices.indexOf(idx) >= 0 ? "#fff" : "";
	            }
	        }
	        idx = this._itemIndex;
	        if (idx >= 0 && idx < items.length) {
	            var item = items[idx];
	            if (item.offsetTop < this._listElement.scrollTop) {
	                this._listElement.scrollTop = item.offsetTop;
	            }
	            else {
	                var y = item.offsetTop + Utils_1.Utils.getSize(item).height;
	                if (y >= this._listElement.scrollTop + this._listElement.clientHeight) {
	                    this._listElement.scrollTop = y - this._listElement.clientHeight;
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    MultiCheckList.CLOSE_UP_2 = "onMultiCheckListCloseUp";
	    MultiCheckList.CANCEL = "onMultiCheckListCancel";
	    MultiCheckList.CHECK_CLICK = "onMultiCheckListCheckClick";
	    MultiCheckList.$_checkId = 0;
	    return MultiCheckList;
	}(DropDownList));
	var MultiCheckCellEditor = /** @class */ (function (_super) {
	    __extends(MultiCheckCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MultiCheckCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._showButtons = true;
	        _this._showAllCheck = false;
	        return _this;
	    }
	    Object.defineProperty(MultiCheckCellEditor.prototype, "showButtons", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** showButtons */
	        get: function () {
	            return this._showButtons;
	        },
	        set: function (value) {
	            this._showButtons = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiCheckCellEditor.prototype, "acceptText", {
	        /** acceptText */
	        get: function () {
	            return this._acceptText;
	        },
	        set: function (value) {
	            this._acceptText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiCheckCellEditor.prototype, "cancelText", {
	        /** cancelText */
	        get: function () {
	            return this._cancelText;
	        },
	        set: function (value) {
	            this._cancelText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiCheckCellEditor.prototype, "allCheckText", {
	        /** allCheckText */
	        get: function () {
	            return this._allCheckText;
	        },
	        set: function (value) {
	            this._allCheckText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MultiCheckCellEditor.prototype, "showAllCheck", {
	        /** showAllCheck */
	        get: function () {
	            return this._showAllCheck;
	        },
	        set: function (value) {
	            this._showAllCheck = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    MultiCheckCellEditor.prototype._createDropDown = function (container) {
	        return new MultiCheckList(container);
	    };
	    MultiCheckCellEditor.prototype.setMask = function (options) {
	        this._mask = null;
	    };
	    MultiCheckCellEditor.prototype.dropDown = function (force) {
	        if (force === void 0) { force = false; }
	        if (!this.readOnly && !this.listing && !this._closing) {
	            this._refreshItems();
	            if (force || this._items && this._items.length > 0) {
	                var list = this._list;
	                var options = this._options;
	                list.viewGridInside = options.viewGridInside;
	                list.displayLabels = this.displayLabels;
	                list.separator = this.separator;
	                list.itemColumned = this.itemColumned;
	                list.items = this._items;
	                var r = Utils_1.Utils.getClientRect(this._container);
	                this._saveIndices = this._selectedIndices.slice();
	                this._saveText = this._editor["value"];
	                list.caseSensitive = this.caseSensitive;
	                list.dropDownCount = this.dropDownCount;
	                list.dropDownWidth = this.dropDownWidth;
	                list.dropDownPosition = this.dropDownPosition;
	                list.setButtonOptions(this.acceptText, this.cancelText, this.showButtons, this.showAllCheck, this.allCheckText);
	                list.sortStyle = this.itemSortStyle;
	                list.valueIndices = this._selectedIndices;
	                list.trimLabelText = this.trimLabelText;
	                list.show(document.documentElement, r["cx"] - 1, r["cy"] + r.height, this._cellBounds.width, Utils_1.Utils.getClientRect(this._editor));
	                window.addEventListener("mousedown", this._globalMouseHandler);
	                return true;
	            }
	        }
	        return false;
	    };
	    MultiCheckCellEditor.prototype.getCheckValues = function (indices, items) {
	        var ret = [];
	        for (var i = 0, len = indices.length; i < len; i++) {
	            if (indices[i] >= 0 && indices[i] < items.length) {
	                ret.push(this._labeling ? items[indices[i]].label : items[indices[i]].value);
	            }
	        }
	        return ret;
	    };
	    MultiCheckCellEditor.prototype.closeUp = function (accept) {
	        if (this.listing) {
	            this._closing = true;
	            try {
	                var list = this._list;
	                var column = this.editIndex && this.editIndex.dataColumn;
	                window.removeEventListener("mousedown", this._globalMouseHandler);
	                list.hide();
	                if (accept && list.selected) {
	                    this._selectedIndices = list.valueIndices;
	                    this._editor["value"] = this.getCheckValues(this._selectedIndices, this._items).join(column.valueSeparator);
	                    if (!Utils_1.Utils.equalArrays(this._saveIndices, this._selectedIndices) || this._editor["value"] != this._saveText) {
	                        this._dispatchChange();
	                    }
	                    if (this.commitOnSelect) {
	                        this._dispatchCommit();
	                    }
	                }
	                else {
	                    this._selectedIndices = this._saveIndices.slice();
	                }
	            }
	            finally {
	                this._closing = false;
	            }
	            return true;
	        }
	        return false;
	    };
	    MultiCheckCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._showButtons = true;
	        this._showAllCheck = false;
	        this._acceptText = window["RG_CONST"] && window["RG_CONST"]["MULTICHECKACCEPT"] ? window["RG_CONST"]["MULTICHECKACCEPT"] : "Accept";
	        this._cancelText = window["RG_CONST"] && window["RG_CONST"]["MULTICHECKCANCEL"] ? window["RG_CONST"]["MULTICHECKCANCEL"] : "Cancel";
	        this._allCheckText = window["RG_CONST"] && window["RG_CONST"]["MULTICHECKALLCHECK"] ? window["RG_CONST"]["MULTICHECKALLCHECK"] : "Check All";
	    };
	    MultiCheckCellEditor.prototype.applyOptions = function (source) {
	        _super.prototype.applyOptions.call(this, source);
	    };
	    MultiCheckCellEditor.prototype.setEditValue = function (value) {
	        var v;
	        var indices = [];
	        var labels = [];
	        var idx = -1;
	        var values = Utils_1.Utils.isArray(value) ? value : (value ? value.split(this._editIndex.dataColumn.valueSeparator) : []);
	        this._value = value;
	        if (this._lookup) {
	            var domain = this._domain;
	            if (domain) {
	                for (var i = 0, cnt = values.length; i < cnt; i++) {
	                    idx = domain.keys.indexOf(values[i]);
	                    if (idx >= 0) {
	                        indices.push(idx);
	                        labels.push(idx < domain.values.length ? domain.values[idx] : values[i]);
	                    }
	                }
	            }
	            else {
	                indices = this._editIndex.dataColumn.getLookupIndices(value);
	            }
	            if (this._labeling) {
	                if (domain) {
	                    v = labels.join(this._editIndex.dataColumn.valueSeparator);
	                }
	                else {
	                    v = indices.length > 0 ? this._editIndex.dataColumn.getLookupLabel(value) : value;
	                }
	                _super.prototype.setEditValue.call(this, v);
	            }
	            else {
	                _super.prototype.setEditValue.call(this, value);
	            }
	        }
	        else if (this._values) {
	            for (var i_2 = 0, cnt_2 = values.length; i_2 < cnt_2; i_2++) {
	                idx = this._values.indexOf(values[i_2]);
	                if (idx >= 0) {
	                    indices.push(idx);
	                    labels.push(this._labels && idx >= 0 && this._labels.length > idx ? this._labels[idx] : values[i_2]);
	                }
	            }
	            if (this._labeling && this._labels) {
	                v = labels.join(this._editIndex.dataColumn.valueSeparator);
	                _super.prototype.setEditValue.call(this, v);
	            }
	            else {
	                _super.prototype.setEditValue.call(this, value);
	            }
	        }
	        else {
	            _super.prototype.setEditValue.call(this, value);
	        }
	        this._selectedIndices = indices;
	    };
	    MultiCheckCellEditor.prototype.setCellEditValue = function (value, dropdown) {
	        _super.prototype.setCellEditValue.call(this, value, dropdown);
	    };
	    MultiCheckCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        if (validateValue === void 0) { validateValue = false; }
	        if (!this.isEdited() && !this._list.selected) {
	            return this._value;
	        }
	        else {
	            return this.$_getEditValue(throwError, validateValue);
	        }
	    };
	    MultiCheckCellEditor.prototype._keyDownHandler = function (e) {
	        var list = this._list;
	        if (e.ctrlKey && e.keyCode == Types.Keys.A && this.listing) {
	            e.preventDefault();
	            list["_allCheck"].checked = !list["_allCheck"].checked;
	            list["$_toggleAllCheck"]();
	            return true;
	        }
	        switch (e.keyCode) {
	            case Types.Keys.SPACE:
	                if (this.listing) {
	                    list.changeCheckIndex(list.itemIndex, null, true);
	                    e.preventDefault();
	                    return true;
	                }
	                break;
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    MultiCheckCellEditor.prototype.$_getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = false; }
	        if (validateValue === void 0) { validateValue = false; }
	        function getValues(self, value, lookupValues, lookupLabels, col) {
	            var ret = [];
	            var labels = value && value.split(col.valueSeparator());
	            if (labels && labels.length > 0) {
	                for (var i_3 = 0, cnt = labels.length; i_3 < cnt; i_3++) {
	                    if (lookupLabels.indexOf(labels[i_3]) >= 0 && lookupLabels.indexOf(labels[i_3]) < lookupValues.length) {
	                        ret.push(lookupValues[i_3]);
	                    }
	                    else if (lookupValues.indexOf(labels[i_3]) >= 0) {
	                        ret.push(lookupValues[i_3]);
	                    }
	                    else if (!self.isDomainOnly()) {
	                        ret.push(labels[i_3]);
	                    }
	                }
	            }
	            return ret;
	        }
	        var list = this._list;
	        var t = this.text;
	        var org = Editors.TextCellEditor.prototype.getEditValue.call(this, throwError, validateValue);
	        var v = org;
	        var col = this._editIndex.dataColumn;
	        var indices = this._selectedIndices.slice();
	        var values = [];
	        var selected = this._list.selected;
	        if (this._lookup) {
	            if (this._domain) {
	                if (this._labeling) {
	                    if (selected) {
	                        for (var i_4 = 0, cnt = indices.length; i_4 < cnt; i_4++) {
	                            indices[i_4] < this._domain.keys.length ? values.push(this._domain.keys[indices[i_4]]) : null;
	                        }
	                    }
	                    else {
	                        if (t) {
	                            values = getValues(this, t, this._domain.keys, this._domain.values, col);
	                        }
	                    }
	                    v = values.join(col.valueSeparator);
	                }
	            }
	            else {
	                if (this._labeling) {
	                    if (selected) {
	                        v = col.getLookupValues(indices);
	                    }
	                    else {
	                        v = col.getSourceValues(t);
	                    }
	                    if (v === undefined) {
	                        v = org;
	                    }
	                }
	                if (this.domainOnly) {
	                    if (!col.values) {
	                        return Editors.CellEditor.Unselected;
	                    }
	                    v = Utils_1.Utils.isArray(v) ? v : v && v.split ? v.split(col.valueSeparator) : [v];
	                    for (var i = v.length - 1; i >= 0; i--) {
	                        if (col.values.indexOf(v[i]) < 0) {
	                            v.splice(i, 1);
	                        }
	                    }
	                    // if (!col.values() || col.values().indexOf(v) < 0) {
	                    // 	return CellEditor.Unselected;
	                    // }
	                }
	            }
	        }
	        else {
	            if (this._labeling) {
	                if (selected) {
	                    for (var i_5 = 0, cnt = indices.length; i_5 < cnt; i_5++) {
	                        indices[i_5] < this._values.length ? values.push(this._values[indices[i_5]]) : null;
	                    }
	                }
	                else {
	                    if (t) {
	                        values = getValues(this, t, this._values, this._labels, col);
	                    }
	                }
	                v = values.join(col.valueSeparator);
	            }
	            if (this.domainOnly) {
	                if (!col.values) {
	                    return Editors.CellEditor.Unselected;
	                }
	                v = Utils_1.Utils.isArray(v) ? v : v && v.split ? v.split(col.valueSeparator) : [v];
	                for (var i = v.length - 1; i >= 0; i--) {
	                    if (col.values.indexOf(v[i]) < 0) {
	                        v.splice(i, 1);
	                    }
	                }
	                // if (!this._values || this._values.indexOf(v) < 0) {
	                // 	return CellEditor.Unselected;;
	                // }
	            }
	        }
	        return v;
	    };
	    MultiCheckCellEditor.prototype._getInputSelector = function () {
	        return MultiCheckCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    MultiCheckCellEditor.prototype.onMultiCheckListCloseUp = function (list, accept) {
	        this.closeUp(accept);
	        this.setFocus();
	    };
	    MultiCheckCellEditor.prototype.onMultiCheckListCheckClick = function (list) {
	        this._editor["value"] = this.getCheckValues(list["_selectItemIndices"], this._items).join(this.editIndex.dataColumn.valueSeparator);
	        this._selectedIndices = list["_selectItemIndices"].slice();
	        this._saveIndices = list["_selectItemIndices"].slice();
	        this._modified = true;
	        this._dispatchChange();
	        this._editor.focus();
	    };
	    MultiCheckCellEditor.prototype.onMultiCheckListCancel = function () {
	        this._controller.cancelEditor(true);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    MultiCheckCellEditor.INPUT_CSS = "rg-multicheck-editor";
	    return MultiCheckCellEditor;
	}(DropDownCellEditor));
	exports.MultiCheckCellEditor = MultiCheckCellEditor;
	var SearchCellEditor = /** @class */ (function (_super) {
	    __extends(SearchCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SearchCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._searchLength = 1;
	        _this._searchDelay = 1000;
	        _this._useCtrlEnterKey = false;
	        _this._useEnterKey = false;
	        _this._initCount = 0;
	        _this._moreItemCount = 25;
	        _this._reInquery = true;
	        _this._timer = undefined;
	        return _this;
	    }
	    Object.defineProperty(SearchCellEditor.prototype, "searchLength", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** searchLength */
	        get: function () {
	            return this._searchLength;
	        },
	        set: function (value) {
	            if (value != this._searchLength) {
	                this._searchLength = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "searchDelay", {
	        /** searchDelay */
	        get: function () {
	            return this._searchDelay;
	        },
	        set: function (value) {
	            if (value != this._searchDelay) {
	                this._searchDelay = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "useCtrlEnterKey", {
	        /** useCtrlEnterKey */
	        get: function () {
	            return this._useCtrlEnterKey;
	        },
	        set: function (value) {
	            if (value != this._useCtrlEnterKey) {
	                this._useCtrlEnterKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "useEnterKey", {
	        /** useEnterKey */
	        get: function () {
	            return this._useEnterKey;
	        },
	        set: function (value) {
	            if (value != this._useEnterKey) {
	                this._useEnterKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "initCount", {
	        /** initCount */
	        get: function () {
	            return this._initCount;
	        },
	        set: function (value) {
	            if (value != this._initCount) {
	                this._initCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "moreItemCount", {
	        /** moreItemCount */
	        get: function () {
	            return this._moreItemCount;
	        },
	        set: function (value) {
	            if (value != this._moreItemCount) {
	                this._moreItemCount = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "moreText", {
	        /** moreText */
	        get: function () {
	            return this._moreText;
	        },
	        set: function (value) {
	            if (value != this._moreText) {
	                this._moreText = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SearchCellEditor.prototype, "reInquery", {
	        /** reInquery */
	        get: function () {
	            return this._reInquery;
	        },
	        set: function (value) {
	            if (value != this._reInquery) {
	                this._reInquery = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    SearchCellEditor.prototype.fillItems = function (key, values, labels) {
	        if (this.listing && key == this.getEditText()) {
	            this.values = values;
	            this.labels = labels;
	            this._refreshItems(true, true);
	            this._list["$_search"](this._editor["value"], true);
	            return true;
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    SearchCellEditor.prototype._keyDownHandler = function (e) {
	        var key = e.keyCode == Types.Keys.ENTER;
	        if (key) {
	            if (e.ctrlKey) {
	                key = this.useCtrlEnterKey;
	            }
	            else {
	                key = this.useEnterKey && (!this._items || this._items.length < 1);
	            }
	        }
	        if (key && this.editing) {
	            e.preventDefault();
	            e.stopImmediatePropagation();
	            this.$_stopTimer();
	            var s = this.getEditText();
	            if (s && (s != this._searchKey)) {
	                this._searchKey = s;
	                this._dispatchSearch(s);
	            }
	            return true;
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    SearchCellEditor.prototype._keyUpHandler = function (e) {
	        _super.prototype._keyUpHandler.call(this, e);
	        /**
	         * 크롬에서 한글 입력 시, composing이 완료되는 시점에
	         * editor.value값이 새로 추가된 문자를 제외시키고 있다.
	         */
	        if (Utils_1.Utils.isChrome) {
	            this.$_search();
	        }
	    };
	    SearchCellEditor.prototype._inputHandler = function (e) {
	        _super.prototype._inputHandler.call(this, e);
	        if (!Utils_1.Utils.isChrome) {
	            this.$_search();
	        }
	    };
	    SearchCellEditor.prototype._doEndEdit = function () {
	        _super.prototype._doEndEdit.call(this);
	        this.$_stopTimer();
	        this._searchKey = null;
	    };
	    SearchCellEditor.prototype.dropDown = function (force) {
	        var list = this._list;
	        if (list) {
	            list.initCount = this.initCount;
	            list.moreItemCount = this.moreItemCount;
	            list.moreText = this.moreText;
	        }
	        return _super.prototype.dropDown.call(this, true);
	    };
	    SearchCellEditor.prototype.buttonClicked = function (index) {
	        if (this.listing) {
	            this.closeUp(false);
	        }
	        else {
	            this.dropDown();
	            var searchKey = this.getEditText();
	            var ret = this._dispatchSearchCellButtonClick(searchKey);
	            if (ret) {
	                if ((typeof ret === "object") && ret["values"]) {
	                    this.fillItems(searchKey, ret["values"], ret["labels"]);
	                }
	            }
	        }
	    };
	    SearchCellEditor.prototype._getInputSelector = function () {
	        return SearchCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    SearchCellEditor.prototype.$_search = function () {
	        var s = this.getEditText();
	        if (s && s !== $$_EMPTY_TEXT_VALUE && s.length >= this._searchLength) {
	            this.$_startTimer();
	        }
	        else {
	            this.$_stopTimer();
	        }
	    };
	    SearchCellEditor.prototype.$_startTimer = function () {
	        this.$_stopTimer();
	        if (!this.reInquery && this.listing && this._list["_items"].length > 0) {
	            return;
	        }
	        this._timer = setInterval(function () {
	            var s = this.getEditText();
	            if (s && s !== $$_EMPTY_TEXT_VALUE && (s != this._searchKey)) {
	                this._searchKey = s;
	                this.$_stopTimer();
	                this._dispatchSearch(s, true);
	            }
	        }.bind(this), this._searchDelay);
	    };
	    SearchCellEditor.prototype.$_stopTimer = function () {
	        this._timer && clearInterval(this._timer);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    SearchCellEditor.INPUT_CSS = "rg-search-editor";
	    // events
	    SearchCellEditor.SEARCH = "onSearchCellEditorSearch";
	    return SearchCellEditor;
	}(DropDownCellEditor));
	exports.SearchCellEditor = SearchCellEditor;
	});

	unwrapExports(ListEditors);
	var ListEditors_1 = ListEditors.DropDownPosition;
	var ListEditors_2 = ListEditors.DropDownSortStyle;
	var ListEditors_3 = ListEditors.DropDownValueLabel;
	var ListEditors_4 = ListEditors.DropDownList;
	var ListEditors_5 = ListEditors.DropDownCellEditor;
	var ListEditors_6 = ListEditors.MultiCheckCellEditor;
	var ListEditors_7 = ListEditors.SearchCellEditor;

	var DateEditors = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DateEditors.ts
	// 2019. 10. 16. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });







	// Editors.ts에서도 선언한다. 개선할 것!
	var $$_HANGUL_REG = /[ㄱ-ㅎㅏ-ㅣ가-힝]/g;
	// 입력된 년주차에 해당하는 기준 목요일을 구해온다.
	var $_getWeekThurs = function (weeks) {
	    if (!weeks) {
	        return null;
	    }
	    (weeks = String(weeks)) && (weeks = weeks.replace(/[^0-9]/g, ""));
	    var year = parseInt(weeks.substr(0, 4));
	    var week = parseInt(weeks.substr(4, 2));
	    if (isNaN(year) || year <= 0 || isNaN(week) || week < 0) {
	        return null; // 뭔가 잘못되었으면 null;
	    }
	    var d = new Date(year, 0, 1);
	    var day = 4 - d.getDay() + 1;
	    d.setDate(day);
	    // 해당년도부터 시작하면 -1 전년도부터 시작하면 0
	    if (d.getFullYear() == year) {
	        week--;
	    }
	    day = week * 7;
	    d.setDate(d.getDate() + day);
	    return d;
	};
	// ISO기준은 월요일이 시작요일이다.
	// 2017-01-01의 경우 ISO기준으로는 2016-52주이고 일반적인 달력으로는 2017-01주이다.
	// 1월 1일의 기준 목요일과 입력된 날짜의 기준 목요일을 구한다.
	// 1월 1일의 기준 목요일이 전 년도라면 1일 더해준다. 1월 첫 주의 경우 전년도 주차도 구해주어야 한다.
	var $_getYearWeeks = function (dt, startWeek, includeSeparator) {
	    if (includeSeparator === void 0) { includeSeparator = false; }
	    var thursDay = function (dt) {
	        var d = new Date(dt);
	        var day = d.getDay();
	        day = day < startWeek ? -3 - day : 4 - day;
	        var date = d.getDate();
	        d.setDate(date + day); // 기준 목요일이 된다.
	        return d;
	    };
	    var year = dt.getFullYear();
	    var firstThurs = thursDay(new Date(year, 0, 1));
	    var thurs = thursDay(new Date(year, dt.getMonth(), dt.getDate()));
	    var firstYear = firstThurs.getFullYear();
	    var thursYear = thurs.getFullYear();
	    var weeks;
	    // thurs 입력된 일자의 기준 목요일이 현재년도면 주차 return;
	    // 전년도면 
	    // 다음년도면 1주차가 된다.
	    if (thursYear < year) { // 기준 목요일의 년도가 입력된 일자의 년도보다 작다면 (1월1~3일정도) 전년도의 마지막 주차를 구해야 한다.
	        firstThurs = thursDay(new Date(firstYear, 0, 1));
	        weeks = Math.ceil((thurs.valueOf() - firstThurs.valueOf()) / (24 * 60 * 60 * 1000 * 7)) + (firstThurs.getFullYear() === thursYear ? 1 : 0);
	    }
	    else if (thursYear > year) { // 기준목요일의 년도가 다음년도이다. 이건 다음년도의 1주차로 처리한다.
	        weeks = 1;
	    }
	    else {
	        weeks = Math.ceil((thurs.valueOf() - firstThurs.valueOf()) / (24 * 60 * 60 * 1000 * 7)) + (firstYear === thursYear ? 1 : 0); // 처음 목요일이 해당 년도면 1을 더한다.
	    }
	    return String(thursYear) + (includeSeparator ? '-' : "") + (weeks < 10 ? "0" + weeks : String(weeks));
	};
	var Holiday = /** @class */ (function (_super) {
	    __extends(Holiday, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Holiday(owner) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._tooltips = [];
	        _this._items = [];
	        _this._enabled = true;
	        _this._owner = owner;
	        return _this;
	    }
	    Holiday.prototype._doDispose = function () {
	        this._owner = null;
	        this._tooltips = null;
	        this._items = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(Holiday.prototype, "tooltips", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** tooltips */
	        get: function () {
	            return this._tooltips;
	        },
	        set: function (value) {
	            this._tooltips = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Holiday.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items;
	        },
	        set: function (value) {
	            this._items = value.slice();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Holiday.prototype, "enabled", {
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            this._enabled = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Holiday.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items && this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Holiday.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            return this._styleName || "";
	        },
	        set: function (value) {
	            this._styleName = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Holiday.prototype.load = function (value) {
	        this.clear();
	    };
	    Holiday.prototype.clear = function () {
	        this._items = [];
	        this._tooltips = [];
	    };
	    Holiday.prototype.contains = function (date) {
	        return false;
	    };
	    Holiday.prototype.getTooltip = function (date) {
	        return null;
	    };
	    return Holiday;
	}(Base_1.Base));
	exports.Holiday = Holiday;
	var DateHoliday = /** @class */ (function (_super) {
	    __extends(DateHoliday, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DateHoliday(owner, value) {
	        var _this = _super.call(this, owner) || this;
	        value && _this.load(value);
	        return _this;
	    }
	    DateHoliday.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DateHoliday.prototype.load = function (value) {
	        _super.prototype.load.call(this, value);
	        if (value) {
	            var dates = Utils_1.Utils.makeArray(value.dates, true);
	            value.tooltips = Utils_1.Utils.makeArray(value.tooltips, true);
	            for (var i = 0, cnt = dates.length; i < cnt; i++) {
	                var date = dates[i];
	                var dt = void 0;
	                if (date instanceof Date) {
	                    dt = new Date(date);
	                    dt.setHours(0, 0, 0, 0);
	                }
	                else if (typeof date === "number") {
	                    dt = new Date(date);
	                    dt.setHours(0, 0, 0, 0);
	                }
	                else if (typeof date === "string") {
	                    if ((date.length === 4 || date.length === 8) && /^[0-9]*$/.test(date)) {
	                        date = date.length === 4 ? date.replace(/(\d{2})(\d{2})/, "$1/$2") : date.replace(/(\d{4})(\d{2})(\d{2})/, "$1/$2/$3");
	                    }
	                    var arr = date.split(/[.//-]/);
	                    if (arr.length == 2) {
	                        try {
	                            dt = parseInt(arr[0]).toString() + "/" + parseInt(arr[1]).toString();
	                        }
	                        catch (e) { }
	                    }
	                    else if (arr.length == 3) {
	                        // editorFormat에 따라서 변경해야 할 필요가 있다. 다국어 인경우.
	                        dt = DateTimeConverter_1.DateTimeConverter.getSimpleDateNull(date);
	                    }
	                }
	                if (dt) {
	                    this._items.push(dt);
	                    value.tooltips[i] && this._tooltips.push(value.tooltips[i]);
	                }
	            }
	            this.enabled = !!value.enabled;
	            this.styleName = value.styleName;
	        }
	    };
	    DateHoliday.prototype.getItemIndex = function (date) {
	        for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	            var item = this._items[i];
	            if (item instanceof Date && item.getFullYear() === date.getFullYear() && item.getMonth() === date.getMonth() && item.getDate() === date.getDate()) {
	                return i;
	            }
	            else if (item === (date.getMonth() + 1) + "/" + date.getDate()) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    DateHoliday.prototype.contains = function (date) {
	        return this.getItemIndex(date) >= 0;
	    };
	    DateHoliday.prototype.getTooltip = function (date) {
	        var idx = this.getItemIndex(date);
	        return idx >= 0 ? this._tooltips[idx] : null;
	    };
	    return DateHoliday;
	}(Holiday));
	var DayHoliday = /** @class */ (function (_super) {
	    __extends(DayHoliday, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DayHoliday(owner, value) {
	        var _this = _super.call(this, owner) || this;
	        value && _this.load(value);
	        return _this;
	    }
	    DayHoliday.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    DayHoliday.prototype.load = function (value) {
	        _super.prototype.load.call(this, value);
	        if (value) {
	            this._items = Utils_1.Utils.makeArray(value.days, true);
	            this._tooltips = Utils_1.Utils.makeArray(value.tooltips, true);
	            this.enabled = !!value.enabled;
	            this.styleName = value.styleName;
	        }
	    };
	    DayHoliday.prototype.contains = function (date) {
	        if (date instanceof Date) {
	            return this._items.indexOf(date.getDay()) >= 0;
	            // } else if (typeof date == "number") {
	            // 	return this._items.indexOf(date) >= 0;
	        }
	        return false;
	    };
	    DayHoliday.prototype.getTooltip = function (date) {
	        var idx = date instanceof Date ? this._items.indexOf(date.getDay()) : this._items.indexOf(date);
	        return idx >= 0 ? this._tooltips[idx] : null;
	    };
	    return DayHoliday;
	}(Holiday));
	var HolidayCollection = /** @class */ (function (_super) {
	    __extends(HolidayCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HolidayCollection() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._items = [];
	        _this._count = -1;
	        return _this;
	    }
	    HolidayCollection.prototype._doDispose = function () {
	        this._editor = null;
	        this._items = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(HolidayCollection.prototype, "items", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** items */
	        get: function () {
	            return this._items;
	        },
	        set: function (value) {
	            this._items = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HolidayCollection.prototype, "editor", {
	        /** editor */
	        get: function () {
	            return this._editor;
	        },
	        set: function (value) {
	            this._editor = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HolidayCollection.prototype, "isNull", {
	        /** isNull */
	        get: function () {
	            return this._count == -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HolidayCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._count;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    HolidayCollection.prototype.setNull = function () {
	        this._count = -1;
	    };
	    HolidayCollection.prototype.getDateConvert = function () {
	        return this._editor && this._editor["_dateConverter"];
	    };
	    HolidayCollection.prototype.clear = function () {
	        for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	            this._items[i].clear();
	        }
	        this._items = [];
	        this._count = -1;
	    };
	    HolidayCollection.prototype.load = function (values) {
	        this.clear();
	        if (!values) {
	            this._count = -1;
	            return;
	        }
	        values = Utils_1.Utils.isArray(values) ? values : [values];
	        for (var i = 0, cnt = values.length; i < cnt; i++) {
	            var value = values[i];
	            var item = void 0;
	            switch (value.type) {
	                case "day":
	                    item = new DayHoliday(this, value);
	                    break;
	                case "date":
	                    item = new DateHoliday(this, value);
	                    break;
	            }
	            if (item.count > 0) {
	                this._items.push(item);
	            }
	        }
	        this._count = this._items.length;
	    };
	    HolidayCollection.prototype.contains = function (date) {
	        for (var i = 0, cnt = this._items.length; i < cnt; i++) {
	            if (this._items[i].contains(date)) {
	                return this._items[i];
	            }
	        }
	        return null;
	    };
	    return HolidayCollection;
	}(Base_1.Base));
	exports.HolidayCollection = HolidayCollection;
	var MonthPicker = /** @class */ (function (_super) {
	    __extends(MonthPicker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MonthPicker(editor, list) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._month = -1;
	        _this._clickHandler = function (e) {
	            Utils_1.Utils.stopEvent(e, true);
	            var div = e.currentTarget;
	            var idx = Utils_1.Utils.getChildIndex(div);
	            if (idx >= 0) {
	                this._month = idx;
	                this.fireEvent(MonthPicker.CLOSE_UP, this._month);
	            }
	            this.hide();
	        }.bind(_this);
	        _this._listElement = list;
	        _this._months = editor.months;
	        _this._element = _this.$_createPicker();
	        return _this;
	    }
	    Object.defineProperty(MonthPicker.prototype, "month", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** month */
	        get: function () {
	            return this._month;
	        },
	        set: function (value) {
	            this._month = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MonthPicker.prototype, "listElement", {
	        /** listElement */
	        get: function () {
	            return this._listElement;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MonthPicker.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return this._container && this._container.contains(this._element);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    MonthPicker.prototype.show = function (containerElement, x, y, innerDropDown) {
	        this._container = containerElement;
	        if (containerElement) {
	            containerElement.appendChild(this._element);
	            var r = Utils_1.Utils.getClientRect(this._element);
	            var s = Utils_1.Utils.getScrolled();
	            if (innerDropDown && this._listElement) {
	                var width = this._listElement.getBoundingClientRect().width;
	                x = parseInt(this._listElement.style.left.replace("px", "")) + width / 2;
	                y = parseInt(this._listElement.style.top.replace("px", ""));
	            }
	            x = Math.max(s.sx, x - r.width - 2);
	            y = Math.max(s.sy, y - r.height / 2 + 13);
	            Utils_1.Utils.move(this._element, x, y);
	        }
	    };
	    MonthPicker.prototype.hide = function () {
	        Utils_1.Utils.detach(this._element);
	        this._container = null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    MonthPicker.prototype.$_createPicker = function () {
	        var element = document.createElement("div");
	        var css = element.style;
	        css.position = "absolute";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.zIndex = "3001";
	        element.className = "rg-cal-month-picker";
	        element.onkeydown = function (e) {
	            if (e.keyCode == 27) {
	                this.hide();
	            }
	        }.bind(this);
	        for (var i = 1; i <= 12; i++) {
	            var div = document.createElement("div");
	            var css_1 = div.style;
	            css_1.position = "relative";
	            css_1.cssFloat = "none";
	            div.className = "rg-cal-month-picker-item";
	            Utils_1.Utils.disableSelection(div);
	            element.appendChild(div);
	            div.onclick = this._clickHandler;
	            div.onmouseup = this._clickHandler;
	            var span = document.createElement("span");
	            span.innerHTML = Utils_1.Utils.htmlEncode((this._months ? this._months[i - 1] : i) + " ");
	            span.tabIndex = -1;
	            Utils_1.Utils.disableSelection(span);
	            div.appendChild(span);
	        }
	        return element;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    MonthPicker.CLOSE_UP = "onMonthPickerCloseUp";
	    return MonthPicker;
	}(EventAware_1.EventAware));
	var DatePicker = /** @class */ (function (_super) {
	    __extends(DatePicker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DatePicker(container, editor) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minWidth = 0;
	        _this._maxWidth = 0;
	        _this._yearNavigation = false;
	        _this._dropDownPosition = ListEditors.DropDownPosition.BUTTON;
	        _this._showToday = true;
	        _this._viewGridInside = false;
	        _this._showWeeks = false;
	        _this._startWeek = 0;
	        _this._weekSelectable = false;
	        _this._weekSeparator = "";
	        _this._date = new Date();
	        _this._selected = false;
	        _this._focused = true;
	        _this._clickHandler = function (e) {
	            var d = this.$_getCellDate(this._currDate, e.currentTarget["$_day"] + 1);
	            if (!this._editor.containsRange(d)) {
	                // 선택할수 없다.
	                return;
	            }
	            var holiday = this._holidays && this._holidays.contains(d);
	            if (holiday && !holiday.isEnabled()) {
	                return;
	            }
	            this._date = new Date(d);
	            this._selected = true;
	            this.fireEvent(DatePicker.CLOSE_UP, true);
	        }.bind(_this);
	        _this._yearWeekClickHandler = function (e) {
	            var week = e.currentTarget["$_yearWeek"];
	            var d;
	            week && (d = $_getWeekThurs(week));
	            if (!d || !this._editor.containsRange(d)) {
	                return;
	            }
	            this._date = new Date(d);
	            this._selected = true;
	            this.fireEvent(DatePicker.CLOSE_UP, true);
	        }.bind(_this);
	        _this._editor = editor;
	        _this._container = container;
	        _this._yearDisplayFormat = editor.yearDisplayFormat;
	        _this._monthDisplayFormat = editor.monthDisplayFormat;
	        _this._months = editor.months;
	        _this._weekDays = Utils_1.Utils.week_days;
	        _this._element = _this.$_createPicker();
	        _this._monthPicker = new MonthPicker(editor, _this._element);
	        _this._monthPicker.addListener(_this);
	        return _this;
	    }
	    Object.defineProperty(DatePicker.prototype, "minWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minWidth */
	        get: function () {
	            return this._minWidth;
	        },
	        set: function (value) {
	            if (value != this._minWidth) {
	                this._minWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "maxWidth", {
	        /** maxWidth */
	        get: function () {
	            return this._maxWidth;
	        },
	        set: function (value) {
	            if (value != this._maxWidth) {
	                this._maxWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "minDate", {
	        /** minDate */
	        get: function () {
	            return this._minDate;
	        },
	        set: function (value) {
	            if (value != this._minDate) {
	                this._minDate = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "maxDate", {
	        /** maxDate */
	        get: function () {
	            return this._maxDate;
	        },
	        set: function (value) {
	            if (value != this._maxDate) {
	                this._maxDate = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "yearNavigation", {
	        /** yearNavigation */
	        get: function () {
	            return this._yearNavigation;
	        },
	        set: function (value) {
	            if (value != this._yearNavigation) {
	                this._yearNavigation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "dropDownPosition", {
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            if (value != this._dropDownPosition) {
	                this._dropDownPosition = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "showToday", {
	        /** showToday */
	        get: function () {
	            return this._showToday;
	        },
	        set: function (value) {
	            if (value != this._showToday) {
	                this._showToday = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "yearDisplayFormat", {
	        /** yearDisplayFormat */
	        get: function () {
	            return this._yearDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._yearDisplayFormat) {
	                this._yearDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "monthDisplayFormat", {
	        /** monthDisplayFormat */
	        get: function () {
	            return this._monthDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._monthDisplayFormat) {
	                this._monthDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "months", {
	        /** months */
	        get: function () {
	            return this._months;
	        },
	        set: function (value) {
	            if (value != this._months) {
	                this._months = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "viewGridInside", {
	        /** viewGridInside */
	        get: function () {
	            return this._viewGridInside;
	        },
	        set: function (value) {
	            if (value != this._viewGridInside) {
	                this._viewGridInside = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "showWeeks", {
	        /** showWeeks */
	        get: function () {
	            return this._showWeeks;
	        },
	        set: function (value) {
	            if (value != this._showWeeks) {
	                this._showWeeks = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "startWeek", {
	        /** startWeek */
	        get: function () {
	            return this._startWeek;
	        },
	        set: function (value) {
	            if (value != this._startWeek) {
	                this._startWeek = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "weekSelectable", {
	        /** weekSelectable */
	        get: function () {
	            return this._weekSelectable;
	        },
	        set: function (value) {
	            if (value != this._weekSelectable) {
	                this._weekSelectable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "weekSeparator", {
	        /** weekSeparator */
	        get: function () {
	            return this._weekSeparator;
	        },
	        set: function (value) {
	            if (value != this._weekSeparator) {
	                this._weekSeparator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "holidays", {
	        /** holidays */
	        get: function () {
	            return this._holidays;
	        },
	        set: function (value) {
	            if (value != this._holidays) {
	                this._holidays = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "date", {
	        /** date */
	        get: function () {
	            return this._date;
	        },
	        set: function (value) {
	            if (value.getTime() != this._date.getTime()) {
	                this._currDate = new Date(value);
	                this._date = new Date(value);
	                if (this.listing) {
	                    this.$_buildCalendar();
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return this._containerElement && this._containerElement.contains(this._element);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "monthListing", {
	        /** monthListing */
	        get: function () {
	            return this._monthPicker.listing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "selected", {
	        /** selected */
	        get: function () {
	            return this._selected;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "focused", {
	        /** focused */
	        get: function () {
	            return this._focused;
	        },
	        set: function (value) {
	            if (value != this._focused) {
	                this._focused = value;
	                this._element.style.border = value ? "1px solid rgba(50, 50, 50, 1)" : "1px solid rgba(50, 50, 50, 0.3)";
	                this._element.style.boxShadow = value ? "rgba(0, 0, 0, 0.8) 1px 2px 5px" : "rgba(0, 0, 0, 0.5) 1px 2px 5px";
	                this._headerElement.style.backgroundColor = value ? "rgba(0, 200, 200, 0.1)" : "#e8e8e8";
	                this._headElement.style.opacity = value ? "1.0" : "0.5";
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DatePicker.prototype, "today", {
	        /** today */
	        get: function () {
	            return this.date = new Date();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DatePicker.prototype.setWeekDays = function (value) {
	        if (value != this._weekDays) {
	            if (Utils_1.Utils.isArray(value) && value.length >= 7) {
	                this._weekDays = value;
	            }
	            else {
	                this._weekDays = Utils_1.Utils.week_days;
	            }
	        }
	    };
	    DatePicker.prototype.closeMonth = function () {
	        this._monthPicker.hide();
	    };
	    DatePicker.prototype.show = function (containerElement, x, y, cellWidth, editBounds) {
	        this._containerElement = this._viewGridInside ? this._container["_container"] : containerElement;
	        this.$_show(x, y, cellWidth, editBounds);
	    };
	    DatePicker.prototype.hide = function () {
	        this.focused = false;
	        this._monthPicker.hide();
	        Utils_1.Utils.detach(this._element);
	        this._containerElement = null;
	    };
	    DatePicker.prototype.incDay = function (delta) {
	        var d;
	        if (this._date.getMonth() == this._currDate.getMonth()) {
	            d = new Date(this._date);
	            this._date && d.setDate(this._date.getDate() + delta);
	        }
	        else {
	            d = this._currDate;
	            d = new Date(d.getFullYear(), d.getMonth(), 1);
	        }
	        return this.date = d;
	    };
	    DatePicker.prototype.incMonth = function (delta) {
	        var d;
	        if (this._date.getMonth() == this._currDate.getMonth()) {
	            d = new Date(this._date);
	            this._date && Utils_1.Utils.incMonth(d, delta);
	        }
	        else {
	            d = this._currDate;
	            d = new Date(d.getFullYear(), d.getMonth(), 1);
	        }
	        return this.date = d;
	    };
	    DatePicker.prototype.firstDay = function () {
	        var d = new Date(this._currDate);
	        this._date && (d.setDate(1)); //this._date.getDate() - this._date.getDay());
	        return this.date = d;
	    };
	    DatePicker.prototype.lastDay = function () {
	        var d = new Date(this._currDate);
	        if (this._date) {
	            var y = d.getFullYear();
	            var m = d.getMonth();
	            var mdays = Utils_1.Utils.month_days[Utils_1.Utils.isLeapYear(y) ? 1 : 0][m];
	            d.setDate(mdays); //this._date.getDate() + 6 - this._date.getDay());
	        }
	        return this.date = d;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DatePicker.prototype._changed = function () {
	    };
	    DatePicker.prototype.$_getCellDate = function (value, date) {
	        var ret = new Date(value);
	        ret.setDate(date);
	        return ret;
	    };
	    DatePicker.prototype.$_createPicker = function () {
	        var element = document.createElement("div");
	        var css = element.style;
	        css.position = "absolute";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.margin = "0px";
	        css.overflow = "auto";
	        css.zIndex = "3000";
	        element.className = "rg-calendar";
	        this._header = this.$_createHeader();
	        element.appendChild(this._header);
	        this._calendar = this.$_createCalendar();
	        element.appendChild(this._calendar);
	        element.addEventListener("keydown", function (e) {
	            if (e.keyCode == 27) {
	                if (this.isMonthLisiting()) {
	                    this.closeMonth();
	                }
	                else {
	                    this.fireEvent(ListEditors.DropDownList.CLOSE_UP, false);
	                }
	            }
	        }.bind(this));
	        element.addEventListener("mouseup", function (e) {
	            this._editor.setFocus();
	        }.bind(this));
	        return element;
	    };
	    DatePicker.prototype.$_createHeader = function () {
	        var list = this;
	        var elt = this._headerElement = document.createElement("div");
	        var css = elt.style;
	        css.position = "relative";
	        elt.className = "rg-cal-header";
	        var prev = document.createElement("span");
	        css = prev.style;
	        css.position = "absolute";
	        css.left = "4px";
	        css.minWidth = "17px";
	        css.minHeight = "17px";
	        prev.className = "rg-cal-prev-month";
	        elt.appendChild(elt["$_prev"] = prev);
	        prev.onclick = function (e) {
	            Utils_1.Utils.incMonth(this._currDate, -1);
	            this.$_buildCalendar();
	        }.bind(this);
	        var next = document.createElement("span");
	        css = next.style;
	        css.position = "absolute";
	        css.right = "4px";
	        css.minWidth = "17px";
	        css.minHeight = "17px";
	        next.className = "rg-cal-next-month";
	        elt.appendChild(elt["$_next"] = next);
	        next.onclick = function (e) {
	            Utils_1.Utils.incMonth(this._currDate, 1);
	            this.$_buildCalendar();
	        }.bind(this);
	        var today = this._todayElement = document.createElement("span");
	        css = today.style;
	        css.position = "absolute";
	        css.right = "18px";
	        css.top = "2px";
	        today.className = "rg-cal-today-button";
	        elt.appendChild(today);
	        today.innerHTML = "Today";
	        today.onclick = function (e) {
	            var date = new Date();
	            // if (!list._editor.containsRange(date)) {
	            // 	return;
	            // }
	            list.focused = true;
	            list.date = date;
	            list._editor["$_selectDate"](list._currDate);
	        };
	        var title = document.createElement("div");
	        css = title.style;
	        css.position = "relative";
	        css.textAlign = "center";
	        css.marginLeft = "20px";
	        css.marginRight = "50px";
	        elt.appendChild(elt["$_title"] = title);
	        title.className = "rg-cal-yearmonth";
	        var year = document.createElement("span");
	        css = year.style;
	        css.position = "relative";
	        css.verticalAlign = "top";
	        css.height = "16px";
	        year.className = "rg-cal-year";
	        title.appendChild(title["$_year"] = year);
	        year.innerHTML = "2015년";
	        year.onclick = function (e) {
	        };
	        var yearSpin = this.$_createYearSpin();
	        title.appendChild(title["$_yearSpin"] = yearSpin);
	        var month = document.createElement("span");
	        css = month.style;
	        css.position = "relative";
	        css.verticalAlign = "top";
	        month.className = "rg-cal-month";
	        title.appendChild(title["$_month"] = month);
	        month.innerHTML = "1월";
	        month.onmousedown = function (e) {
	            Utils_1.Utils.stopEvent(e, true); /*
	            var r = Dom.getBounds(this._headerElement.$_title.$_month);
	            var x = r.left + (window.pageXOffset || document.documentElement.scrollLeft);
	            var y = r.top + (window.pageXOffset || document.documentElement.scrollLeft);
	            this._monthPicker.show(this._containerElement, x, y);
	            */
	            var p = Utils_1.Utils.getOffset(this._headerElement.$_title.$_month);
	            this._monthPicker.show(this._containerElement, p.x, p.y, this._viewGridInside);
	        }.bind(this);
	        return elt;
	    };
	    DatePicker.prototype.$_createYearSpin = function () {
	        var div = document.createElement("div");
	        var css = div.style;
	        css.display = "inline-block";
	        css.visibility = "hidden";
	        css.position = "relative";
	        css.width = "15px";
	        css.height = "16px";
	        css.marginLeft = "-4px";
	        css.marginRight = "2px";
	        var upper = document.createElement("span");
	        css = upper.style;
	        css.position = "absolute";
	        css.top = "0px";
	        css.left = "0px";
	        css.width = "15px";
	        css.height = "9px";
	        upper.className = "rg-cal-next-year";
	        div.appendChild(upper);
	        upper.onclick = function (e) {
	            this._currDate.setFullYear(this._currDate.getFullYear() + 1);
	            this.$_buildCalendar();
	        }.bind(this);
	        var lower = document.createElement("span");
	        css = lower.style;
	        css.position = "absolute";
	        css.top = "7px";
	        css.left = "0px";
	        css.width = "15px";
	        css.height = "9px";
	        lower.className = "rg-cal-prev-year";
	        div.appendChild(lower);
	        lower.onclick = function (e) {
	            this._currDate.setFullYear(this._currDate.getFullYear() - 1);
	            this.$_buildCalendar();
	        }.bind(this);
	        return div;
	    };
	    DatePicker.prototype.$_createCalendar = function () {
	        var weeks = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
	        var elt = document.createElement("table");
	        var css = elt.style;
	        css.margin = "2px";
	        elt.className = "rg-cal-days-table";
	        var head = this._headElement = document.createElement("thead");
	        head.className = "rg-cal-weeks";
	        elt.appendChild(elt["$_head"] = head);
	        var tr = document.createElement("tr");
	        head.appendChild(tr);
	        var cells = [];
	        var th = document.createElement("th");
	        css = th.style;
	        css.minWidth = "20px";
	        css.textAlign = "center";
	        th.className = "rg-cal-week-year-week";
	        tr.appendChild(th);
	        var span = document.createElement("span");
	        th.appendChild(span);
	        head["$_weeks"] = th;
	        for (var i = 0; i < 7; i++) {
	            var th_1 = document.createElement("th");
	            css = th_1.style;
	            css.minWidth = "20px";
	            css.textAlign = "center";
	            th_1.className = "rg-cal-week-" + weeks[i];
	            tr.appendChild(th_1);
	            var span_1 = document.createElement("span");
	            span_1.innerHTML = Utils_1.Utils.htmlEncode(this._weekDays[i]);
	            th_1.appendChild(span_1);
	            cells.push(span_1);
	        }
	        head["$_cells"] = cells;
	        var body = document.createElement("tbody");
	        body.className = "rg-cal-days";
	        elt.appendChild(elt["$_body"] = body);
	        var rows = body["$_rows"] = [];
	        var yearweeks = body["$_yearweeks"] = [];
	        for (var r = 0; r < 6; r++) {
	            var tr_1 = document.createElement("tr");
	            body.appendChild(tr_1);
	            rows.push(tr_1);
	            tr_1["$_cells"] = cells = [];
	            // 년주차를 표시.
	            var td = document.createElement("td");
	            css = td.style;
	            css.padding = "1px";
	            td.className = "rg-cal-day rg-cal-year-weeks";
	            tr_1.appendChild(td);
	            var span_2 = document.createElement("span");
	            td.appendChild(td["$_span"] = span_2);
	            yearweeks.push(td);
	            for (var i = 0; i < 7; i++) {
	                var td_1 = document.createElement("td");
	                css = td_1.style;
	                css.padding = "1px";
	                td_1.className = "rg-cal-day rg-cal-week-" + weeks[(i + this._startWeek) % 7];
	                tr_1.appendChild(td_1);
	                td_1.onclick = this._clickHandler;
	                var span_3 = document.createElement("span");
	                td_1.appendChild(td_1["$_span"] = span_3);
	                cells.push(td_1);
	            }
	        }
	        return elt;
	    };
	    DatePicker.prototype.$_show = function (x, y, cellWidth, editBounds) {
	        this.focused = false;
	        this._selected = false;
	        this._header["$_title"]["$_yearSpin"].style.visibility = this._yearNavigation ? "visible" : "hidden";
	        this._todayElement.style.display = this._showToday ? "initial" : "none";
	        this._header["$_title"].style.marginRight = this._showToday ? "50px" : "20px";
	        var d = this._date;
	        // if (!(d instanceof Date) || d == "Invalid Date") {
	        // 	d = null;
	        // }
	        this._currDate = d ? new Date(d) : new Date();
	        this._today = new Date();
	        this.$_buildCalendar();
	        Utils_1.Utils.disableSelection(this._element);
	        this._containerElement.appendChild(this._element);
	        var br = Utils_1.Utils.getBrowserSize();
	        var pr = Utils_1.Utils.getClientRect(this._containerElement);
	        var cr = Utils_1.Utils.getClientRect(this._container["_container"]);
	        var w = br.width; // this._container.width(); // _container: grid container
	        var h = br.height; //this._container.height();
	        var r = Utils_1.Utils.getClientRect(this._element);
	        var sx = window.pageXOffset || document.documentElement.scrollLeft;
	        var sy = window.pageYOffset || document.documentElement.scrollTop;
	        if (document.documentElement.scrollWidth > document.documentElement.clientWidth) {
	            h -= 18;
	        }
	        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
	            w -= 18;
	        }
	        x += cr.left - pr.left;
	        y += cr.top - pr.top;
	        if (Utils_1.Utils.ieTen || Utils_1.Utils.ieOld || Utils_1.Utils.ieLeg) {
	            x += document.documentElement.scrollLeft;
	            y += document.documentElement.scrollTop;
	        }
	        if (y + r.height > h + sy) {
	            y = y - editBounds.height - r.height;
	            if (y < 0) {
	                y = h - r.height - 2;
	            }
	        }
	        if (this._dropDownPosition != ListEditors.DropDownPosition.EDITOR) { // BUTTON 이거나 잘못된 값.
	            x = Math.max(0, x + cellWidth - r.width);
	        }
	        else {
	            if (x + r.width > w + sx) {
	                x = w - r.width;
	            }
	        }
	        if (this._viewGridInside) {
	            y = editBounds.bottom - pr.top + 2;
	            if ((pr.bottom < editBounds.bottom + r.height) || (h + sy < editBounds.bottom + r.height)) {
	                y = editBounds.top - r.height - pr.top - 2;
	            }
	        }
	        Utils_1.Utils.move(this._element, Math.max(0, x), Math.max(0, y));
	    };
	    DatePicker.prototype.$_checkFocusedWeek = function (date, weekElt, innerDate) {
	        var focused = this.$_isFocusedWeek(date, weekElt["$_yearWeek"]);
	        weekElt.className = "rg-cal-week-year-week " + focused ? "rg-cal-week-year-focusweek" : null;
	    };
	    DatePicker.prototype.$_isFocusedWeek = function (date, yearWeek) {
	        return date && yearWeek && $_getYearWeeks(date, this._startWeek) == yearWeek;
	    };
	    DatePicker.prototype.$_isFocusedDay = function (date, day) {
	        var t = this._date;
	        return t && date.getFullYear() == t.getFullYear() &&
	            date.getMonth() == t.getMonth() &&
	            day == t.getDate();
	    };
	    DatePicker.prototype.$_isToday = function (date, day) {
	        var t = this._today;
	        return t && date.getFullYear() == t.getFullYear() &&
	            date.getMonth() == t.getMonth() &&
	            day == t.getDate();
	    };
	    DatePicker.prototype.$_buildCalendar = function () {
	        var weeks = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
	        var header = this._header;
	        var date = this._currDate;
	        var prev = header["$_prev"];
	        var next = header["$_next"];
	        var title = header["$_title"];
	        var y = date.getFullYear();
	        var m = date.getMonth();
	        var clsName;
	        var holiday;
	        title.$_year.innerHTML = (this._yearDisplayFormat ? this._yearDisplayFormat.replace("{Y}", y + "") : y + "년") + "&nbsp;";
	        if (this._months && this._months.length > 0) {
	            title.$_month.innerHTML = this._months[m];
	        }
	        else {
	            title.$_month.innerHTML = this._monthDisplayFormat ? this._monthDisplayFormat.replace("{M}", (m + 1).toString()) : (m + 1) + "월";
	        }
	        if (m == 0) {
	            prev.title = (y - 1) + "/12";
	        }
	        else {
	            prev.title = y + "/" + Utils_1.Utils.pad(m);
	        }
	        if (m == 11) {
	            next.title = (y + 1) + "/01";
	        }
	        else {
	            next.title = y + "/" + Utils_1.Utils.pad(m + 2);
	        }
	        var cells = this._calendar["$_head"]["$_cells"];
	        for (var i = 0; i < 7; i++) {
	            var elt = cells[(i + 7 - this._startWeek) % 7];
	            elt.innerHTML = Utils_1.Utils.htmlEncode(this._weekDays[i]);
	            var th = elt.parentElement;
	            th.className = "rg-cal-week-" + weeks[i];
	        }
	        this._calendar["$_head"]["$_weeks"].style.display = this.showWeeks ? "" : "none";
	        var body = this._calendar["$_body"];
	        var yearWeeks = body["$_yearweeks"]; // td array
	        for (var i = 0, cnt = yearWeeks.length; i < cnt; i++) {
	            yearWeeks[i].style.display = this.showWeeks ? "" : "none";
	            yearWeeks[i].onclick = this.weekSelectable ? this._yearWeekClickHandler : null;
	        }
	        var rows = body.$_rows;
	        var mdays = Utils_1.Utils.month_days[Utils_1.Utils.isLeapYear(y) ? 1 : 0][m];
	        var d = new Date(date);
	        d.setDate(1);
	        var dow = (d.getDay() + 7 - this._startWeek) % 7;
	        if (mdays == 30 && dow == 6 || mdays == 31 && dow >= 5) {
	            Utils_1.Utils.addChild(body, rows[5]);
	        }
	        else {
	            Utils_1.Utils.removeChild(body, rows[5]);
	        }
	        if (mdays == 28 && dow == 0) {
	            Utils_1.Utils.removeChild(body, rows[4]);
	        }
	        else {
	            Utils_1.Utils.addChild(body, rows[4]);
	        }
	        var md = 0;
	        var weekElt = yearWeeks[0];
	        cells = rows[0].$_cells;
	        if (dow > 0) {
	            var y2 = y;
	            var m2 = m - 1;
	            if (m2 < 0) {
	                y2--;
	                m2 = 11;
	            }
	            var mdays2 = Utils_1.Utils.month_days[Utils_1.Utils.isLeapYear(y2) ? 1 : 0][m2];
	            for (var i = 0; i < dow; i++) {
	                var c = cells[i];
	                c.removeAttribute("title");
	                var d_1 = new Date(this._currDate);
	                c.$_day = i - dow;
	                d_1.setDate(c.$_day + 1);
	                var innerDate = this._editor.containsRange(d_1);
	                if (i === 0) {
	                    weekElt.$_yearWeek = $_getYearWeeks(d_1, this._startWeek);
	                    weekElt.$_span.innerText = weekElt.$_yearWeek.substr(4, 2);
	                    this.$_checkFocusedWeek(this._currDate, weekElt, innerDate);
	                }
	                c.$_span.innerHTML = (mdays2 - dow + i + 1);
	                c.className = "rg-cal-day rg-cal-prev-day " + (innerDate ? "" : "rg-cal-disable-day ") + "rg-cal-week-" + weeks[(i + this._startWeek) % 7];
	            }
	        }
	        for (var i = dow; i < 7; i++) {
	            var c = cells[i];
	            c.removeAttribute("title");
	            c.$_day = md++;
	            c.$_span.innerHTML = md;
	            (d = new Date(this._currDate)).setDate(md);
	            var innerDate = this._editor.containsRange(d);
	            if (i === 0) {
	                weekElt.$_yearWeek = $_getYearWeeks(d, this._startWeek);
	                weekElt.$_span.innerText = weekElt.$_yearWeek.substr(4, 2);
	                this.$_checkFocusedWeek(this._currDate, weekElt, innerDate);
	            }
	            clsName = "rg-cal-day " + (this.$_isFocusedDay(date, md) ? "rg-cal-focusday " : "");
	            clsName += this.$_isToday(date, md) ? "rg-cal-today " : "";
	            clsName += (holiday = this._holidays && this._holidays.contains(d)) ? holiday.styleName + " rg-cal-holiday " : "";
	            clsName += !innerDate ? "rg-cal-disable-day " : "";
	            clsName += "rg-cal-week-" + weeks[(i + this._startWeek) % 7];
	            c.className = clsName;
	            holiday && (clsName = holiday.getTooltip(this.$_getCellDate(date, md))) && (c.title = clsName);
	            // if (this.$_isFocusedDay(date, md)) {
	            //     c.className = "rg-cal-day rg-cal-focusday "+(innerDate ? "" : "rg-cal-disable-day ")+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	            // } else if (this.$_isToday(date, md)) {
	            //     c.className = "rg-cal-day rg-cal-today "+(innerDate ? "" : "rg-cal-disable-day ")+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	            // } else {
	            // 	const holiday = this._holidays && this._holidays.contains(d);
	            //     c.className = "rg-cal-day "+(innerDate ? "" : "rg-cal-disable-day ")+(holiday ? "rg-cal-holiday "+holiday.styleName : "" )+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	            // }
	        }
	        for (var r = 1; r < 6 && md < mdays; r++) {
	            cells = rows[r].$_cells;
	            var weekElt_1 = yearWeeks[r];
	            for (var i = 0; i < 7; i++) {
	                if (md < mdays) {
	                    var c = cells[i];
	                    c.removeAttribute("title");
	                    c.$_day = md++;
	                    (d = new Date(this._currDate)).setDate(md);
	                    var innerDate = this._editor.containsRange(d);
	                    if (i === 0) {
	                        weekElt_1.$_yearWeek = $_getYearWeeks(d, this._startWeek);
	                        weekElt_1.$_span.innerText = weekElt_1.$_yearWeek.substr(4, 2);
	                        this.$_checkFocusedWeek(this._currDate, weekElt_1, innerDate);
	                    }
	                    c.$_span.innerHTML = md;
	                    clsName = "rg-cal-day " + (this.$_isFocusedDay(date, md) ? "rg-cal-focusday " : "");
	                    clsName += this.$_isToday(date, md) ? "rg-cal-today " : "";
	                    clsName += (holiday = this._holidays && this._holidays.contains(d)) ? holiday.styleName + " rg-cal-holiday " : "";
	                    clsName += !innerDate ? "rg-cal-disable-day " : "";
	                    clsName += "rg-cal-week-" + weeks[(i + this._startWeek) % 7];
	                    c.className = clsName;
	                    holiday && (clsName = holiday.getTooltip(this.$_getCellDate(date, md))) && (c.title = clsName);
	                    // if (this.$_isFocusedDay(date, md)) {
	                    //     c.className = "rg-cal-day rg-cal-focusday "+(innerDate ? "" : "rg-cal-disable-day ")+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	                    // } else if (this.$_isToday(date, md)) {
	                    //     c.className = "rg-cal-day rg-cal-today "+(innerDate ? "" : "rg-cal-disable-day ")+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	                    // } else {
	                    // 	const holiday = this._holidays && this._holidays.contains(d);
	                    //     c.className = "rg-cal-day "+(innerDate ? "" : "rg-cal-disable-day ")+(holiday ? "rg-cal-holiday " : "" )+"rg-cal-week-"+weeks[(i+this._startWeek)% 7];
	                    // }
	                }
	                else {
	                    var j = 1;
	                    for (; i < 7; i++) {
	                        var c = cells[i];
	                        c.removeAttribute("title");
	                        c.$_day = md++;
	                        (d = new Date(this._currDate)).setDate(md);
	                        var innerDate = this._editor.containsRange(d);
	                        c.$_span.innerHTML = j++;
	                        c.className = "rg-cal-day rg-cal-next-day " + (innerDate ? "" : "rg-cal-disable-day ") + "rg-cal-week-" + weeks[(i + this._startWeek) % 7];
	                    }
	                }
	            }
	        }
	    };
	    // private $_refreshItems(): void {
	    // }
	    // private $_search(text: string): void {
	    // }
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    DatePicker.prototype.onMonthPickerCloseUp = function (picker, month) {
	        var delta = month - this._currDate.getMonth();
	        if (delta) {
	            Utils_1.Utils.incMonth(this._currDate, delta);
	            this.$_buildCalendar();
	        }
	        this._editor.setFocus();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DatePicker.CLOSE_UP = "onDatePickerCloseUp";
	    return DatePicker;
	}(EventAware_1.EventAware));
	var DateCellEditor = /** @class */ (function (_super) {
	    __extends(DateCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DateCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        _this._minDate = new Date(1970, 0, 1);
	        _this._maxDate = new Date(2100, 11, 31);
	        _this._yearNavigation = false;
	        _this._textReadOnly = false;
	        _this._dropDownPosition = ListEditors.DropDownPosition.BUTTON;
	        _this._dropDownWhenClick = false;
	        _this._showToday = true;
	        _this._yearDisplayFormat = "{Y}년";
	        _this._monthDisplayFormat = "{M}월";
	        _this._months = null;
	        _this._weekDays = null;
	        _this._showWeeks = false;
	        _this._startWeek = 0;
	        _this._weekSelectable = false;
	        _this._weekSeparator = "";
	        _this._commitOnSelect = false;
	        _this._holidays = null;
	        _this._holidayCollection = new HolidayCollection();
	        _this._closing = false;
	        _this._regx = /[0-9]|\.|\-|\/|a|A|p|P|m/;
	        _this._globalMouseHandler = function (e) {
	            var p = e.target;
	            while (p) {
	                if (p === this._list._element) {
	                    this._list._monthPicker.hide();
	                    return;
	                }
	                if (p === this._list._monthPicker._element) {
	                    return;
	                }
	                p = p.parentElement;
	            }
	            this.closeUp(true);
	        }.bind(_this);
	        var options = grid.editorOptions;
	        _this._yearDisplayFormat = options.yearDisplayFormat;
	        _this._monthDisplayFormat = options.monthDisplayFormat;
	        _this._months = options.months;
	        _this._weekDays = options.weekDays;
	        _this._list = new DatePicker(grid.container, _this);
	        _this._list.addListener(_this);
	        _this._borderable = false;
	        return _this;
	    }
	    DateCellEditor.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DateCellEditor.prototype, "editFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** editFormat */
	        get: function () {
	            return this._editFormat;
	        },
	        set: function (value) {
	            if (value != this._editFormat) {
	                this._editFormat = value;
	                this.datetimeFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "minDate", {
	        /** minDate */
	        get: function () {
	            return this._minDate;
	        },
	        set: function (value) {
	            if (value != this._minDate) {
	                this._minDate = !value ? null : value instanceof Date ? value : typeof value == "string" ? this._dateConverter.getDateNull(value) : null;
	                this._minDate && this._minDate.setHours(0, 0, 0, 0);
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "maxDate", {
	        /** maxDate */
	        get: function () {
	            return this._maxDate;
	        },
	        set: function (value) {
	            if (value != this._maxDate) {
	                this._maxDate = !value ? null : value instanceof Date ? value : typeof value == "string" ? this._dateConverter.getDateNull(value) : null;
	                this._maxDate && this._maxDate.setHours(23, 59, 59);
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "yearNavigation", {
	        /** yearNavigation */
	        get: function () {
	            return this._yearNavigation;
	        },
	        set: function (value) {
	            if (value != this._yearNavigation) {
	                this._yearNavigation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "textReadOnly", {
	        /** textReadOnly */
	        get: function () {
	            return this._textReadOnly;
	        },
	        set: function (value) {
	            if (value != this._textReadOnly) {
	                this._textReadOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "dropDownPosition", {
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            if (value != this._dropDownPosition) {
	                this._dropDownPosition = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "dropDownWhenClick", {
	        /** dropDownWhenClick */
	        get: function () {
	            return this._dropDownWhenClick;
	        },
	        set: function (value) {
	            if (value != this._dropDownWhenClick) {
	                this._dropDownWhenClick = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "showToday", {
	        /** showToday */
	        get: function () {
	            return this._showToday;
	        },
	        set: function (value) {
	            if (value != this._showToday) {
	                this._showToday = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "yearDisplayFormat", {
	        /** yearDisplayFormat */
	        get: function () {
	            return this._yearDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._yearDisplayFormat) {
	                this._yearDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "monthDisplayFormat", {
	        /** monthDisplayFormat */
	        get: function () {
	            return this._monthDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._monthDisplayFormat) {
	                this._monthDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "months", {
	        /** months */
	        get: function () {
	            return this._months;
	        },
	        set: function (value) {
	            if (value != this._months) {
	                this._months = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "weekDays", {
	        /** weekDays */
	        get: function () {
	            return this._weekDays;
	        },
	        set: function (value) {
	            if (value != this._weekDays) {
	                this._weekDays = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "showWeeks", {
	        /** showWeeks */
	        get: function () {
	            return this._showWeeks;
	        },
	        set: function (value) {
	            if (value != this._showWeeks) {
	                this._showWeeks = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "startWeek", {
	        /** startWeek */
	        get: function () {
	            return this._startWeek;
	        },
	        set: function (value) {
	            value = value == null ? 0 : (isNaN(value = Math.floor(value)) ? 0 : value);
	            if (value !== this._startWeek) {
	                this._startWeek = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "weekSelectable", {
	        /** weekSelectable */
	        get: function () {
	            return this._weekSelectable;
	        },
	        set: function (value) {
	            if (value != this._weekSelectable) {
	                this._weekSelectable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "weekSeparator", {
	        /** weekSeparator */
	        get: function () {
	            return this._weekSeparator;
	        },
	        set: function (value) {
	            if (value != this._weekSeparator) {
	                this._weekSeparator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "commitOnSelect", {
	        /** commitOnSelect */
	        get: function () {
	            return this._commitOnSelect;
	        },
	        set: function (value) {
	            if (value != this._commitOnSelect) {
	                this._commitOnSelect = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "defaultShowDate", {
	        /** defaultShowDate */
	        get: function () {
	            return this._defaultShowDate;
	        },
	        set: function (value) {
	            if (value != this._defaultShowDate) {
	                switch (value) {
	                    case Types.DefaultShowDate.TODAY:
	                    case Types.DefaultShowDate.NORMAL:
	                    case Types.DefaultShowDate.TODAY_WHEN_NULL:
	                        break;
	                    default:
	                        // var date = typeof value == "string" ? this._dateConverter.getDateNull(value) : value instanceof Date ? value : null;
	                        // value = date || "normal";
	                        break;
	                }
	                this._defaultShowDate = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "holidays", {
	        /** holidays */
	        get: function () {
	            return this._holidays;
	        },
	        set: function (value) {
	            if (value != this._holidays) {
	                this._holidays = value;
	                if (value) {
	                    this._holidayCollection = this._holidayCollection || new HolidayCollection();
	                    this._holidayCollection.editor = this;
	                    this._holidayCollection.load(value);
	                }
	                else {
	                    this._holidayCollection.setNull();
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "listing", {
	        get: function () {
	            return this._list.listing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DateCellEditor.prototype, "monthListing", {
	        get: function () {
	            return this._list.monthListing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DateCellEditor.prototype.dropDown = function () {
	        if (!this.readOnly && !this._controller["_readOnly"] && !this.listing && !this._closing) {
	            var options = this._grid.editorOptions;
	            var list = this._list;
	            var r = Utils_1.Utils.getClientRect(this._container);
	            list.viewGridInside = options.viewGridInside;
	            list.yearNavigation = this._yearNavigation;
	            list.dropDownPosition = this._dropDownPosition;
	            list.showToday = this._showToday;
	            list.yearDisplayFormat = this._yearDisplayFormat;
	            list.monthDisplayFormat = this._monthDisplayFormat;
	            list.months = this._months;
	            list.minDate = this._minDate;
	            list.maxDate = this._maxDate;
	            list.showWeeks = this._showWeeks;
	            list.startWeek = this._startWeek || 0;
	            list.weekSelectable = this.weekSelectable;
	            list.weekSeparator = this.weekSeparator;
	            list.holidays = this._holidayCollection.isNull ? options["_holidayCollection"] : this._holidayCollection;
	            if (this._weekDays && this._weekDays.length > 0) {
	                list.setWeekDays(this._weekDays);
	            }
	            this.$_setListDate();
	            // list.show(this._parentElement, r.cx - 1, r.cy + r.height, this._cellBounds.width, Dom.getBounds(this._editor));
	            list.show(document.documentElement, r["cx"] - 1, r["cy"] + r.height, this._cellBounds.width, Utils_1.Utils.getClientRect(this._editor));
	            window.addEventListener("mousedown", this._globalMouseHandler);
	            return true;
	        }
	        return false;
	    };
	    DateCellEditor.prototype.closeUp = function (accept) {
	        if (this.listing) {
	            this._closing = true;
	            try {
	                window.removeEventListener("mousedown", this._globalMouseHandler);
	                this._list.hide();
	                if (accept && this._list.selected) {
	                    this.$_selectDate(this._list.date);
	                    this._commitOnSelect && this._dispatchCommit();
	                }
	            }
	            finally {
	                this._closing = false;
	            }
	            return true;
	        }
	        return false;
	    };
	    DateCellEditor.prototype.containsRange = function (value) {
	        return (!this._minDate || value >= this._minDate) && (!this._maxDate || value <= this._maxDate);
	    };
	    Object.defineProperty(DateCellEditor.prototype, "hasButton", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DateCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._dropDownWhenClick = false;
	        this._yearNavigation = false;
	        this._textReadOnly = false;
	        this._showToday = true;
	        this._minDate = new Date(1970, 0, 1);
	        this._maxDate = new Date(2100, 11, 31);
	        this._showWeeks = false;
	        this._startWeek = 0;
	        this._weekSelectable = false;
	        this._weekSeparator = "";
	        this._commitOnSelect = false;
	        this._defaultShowDate = Types.DefaultShowDate.NORMAL;
	        this._holidayCollection && this._holidayCollection.setNull();
	    };
	    DateCellEditor.prototype.setEditIndex = function (index) {
	        _super.prototype.setEditIndex.call(this, index);
	        var dataType = this._editField().dataType;
	        this._weekSelectable = this._weekSelectable && dataType !== Types.ValueType.DATE && dataType !== Types.ValueType.DATETIME;
	    };
	    DateCellEditor.prototype.setEditValue = function (value) {
	        _super.prototype.setEditValue.call(this, value);
	        if (this.weekSelectable) {
	            this._date = $_getWeekThurs(value);
	        }
	        else {
	            this._date = typeof value === "string" ? this._dateConverter.getDateNull(value) : value;
	        }
	        this._editor["value"] = this._valToStr(value);
	    };
	    DateCellEditor.prototype.setCellEditValue = function (value, dropdown) {
	        _super.prototype.setCellEditValue.call(this, value, dropdown);
	    };
	    DateCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        if (throwError === void 0) { throwError = true; }
	        if (validateValue === void 0) { validateValue = false; }
	        var v = _super.prototype.getEditValue.call(this, throwError);
	        var valueType = this._editField().dataType;
	        if (v && validateValue && (valueType == Types.ValueType.DATE || valueType == Types.ValueType.DATETIME)) {
	            v = this._minDate ? Math.max(this._minDate.getTime(), v) : v;
	            v = this._maxDate ? Math.min(this._maxDate.getTime(), v) : v;
	            v && (v = new Date(v));
	        }
	        return v;
	    };
	    DateCellEditor.prototype._createContainer = function () {
	        var elt = _super.prototype._createContainer.call(this);
	        elt.style.border = "none";
	        elt.style.boxShadow = "none";
	        return elt;
	    };
	    DateCellEditor.prototype._createEditor = function (parent) {
	        var editor = _super.prototype._createEditor.call(this, parent);
	        return editor;
	    };
	    DateCellEditor.prototype._textHandler = function () {
	        this._requestStart(false);
	    };
	    DateCellEditor.prototype._compositionstartHandler = function (e) {
	        this._requestStart(false); //e);
	    };
	    DateCellEditor.prototype._keyDownHandler = function (e) {
	        var list = this._list;
	        if (list.monthListing) {
	            if (e.keyCode == Types.Keys.ESCAPE) {
	                this.closeMonthList();
	                Utils_1.Utils.stopEvent(e, true);
	                return true;
	            }
	            return false;
	        }
	        var listing = this.listing;
	        var focused = listing && list.focused;
	        switch (e.keyCode) {
	            case Types.Keys.ENTER:
	                if (this.closeUp(true)) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.ESCAPE:
	                if (this.closeUp(false)) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                break;
	            case Types.Keys.HOME:
	                if (focused) {
	                    e.preventDefault();
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                break;
	            case Types.Keys.END:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.lastDay());
	                    return true;
	                }
	                break;
	            case Types.Keys.LEFT:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incDay(-1));
	                    return true;
	                }
	                break;
	            case Types.Keys.RIGHT:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incDay(1));
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEUP:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incMonth(-1));
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEDOWN:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incMonth(1));
	                    return true;
	                }
	                break;
	            case Types.Keys.DOWN:
	                if (e.altKey && !listing) {
	                    this._requestStart();
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                else if (listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    if (focused) {
	                        this.$_selectDate(list.incDay(7));
	                    }
	                    else {
	                        this._list.focused = true;
	                        this.$_setListDate();
	                    }
	                    return true;
	                }
	                break;
	            case Types.Keys.UP:
	                if (e.altKey && listing) {
	                    this.closeUp(false);
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                else if (listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    if (focused) {
	                        var d = list.date;
	                        if (d.getDate() <= 7) { //} && d.getDay() + 1 >= d.getDate()) {
	                            this._list.focused = false;
	                        }
	                        else {
	                            this.$_selectDate(list.incDay(-7));
	                        }
	                    }
	                    else {
	                        this._list.focused = false;
	                    }
	                    return true;
	                }
	                break;
	            case Types.Keys.T:
	                if ((e.altKey || e.altKey && e.ctrlKey) && listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this._list.date = new Date();
	                    this.$_selectDate(this._list.date);
	                }
	                break;
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    DateCellEditor.prototype._keyPressHandler = function (e) {
	        var list = this._list;
	        var c = String.fromCharCode(e.keyCode || e.charCode);
	        if (c.toLocaleLowerCase() == this.todayChar) {
	            Utils_1.Utils.stopEvent(e, true);
	            if (this.listing) {
	                list.focused = true;
	                this.$_selectDate(list.today);
	                return true;
	            }
	        }
	        else {
	            if (Utils_1.Utils.isFirefox && (e.ctrlKey || e.charCode === 0)) {
	                _super.prototype._keyPressHandler.call(this, e);
	                return;
	            }
	            if (!this._regx.test(c)) {
	                e.preventDefault();
	                return;
	            }
	        }
	        _super.prototype._keyPressHandler.call(this, e);
	        e.keyCode && /* e.keyCode === Keys.SPACE &&*/ this.textReadOnly && e.preventDefault();
	    };
	    DateCellEditor.prototype.$_resetValue = function () {
	        if (this.visible) {
	            var editor = this._editor;
	            var s = editor.selectionStart;
	            var p = editor.selectionEnd;
	            var plen = editor.value ? editor.value.length : 0;
	            editor.value = editor.value.replace($$_HANGUL_REG, '');
	            var alen = editor.value ? editor.value.length : 0;
	            alen == plen ? editor.setSelectionRange(s, p) : editor.setSelectionRange(p, p);
	        }
	    };
	    DateCellEditor.prototype._dispatchChange = function () {
	        if (this.visible) {
	            this.$_resetValue();
	            _super.prototype._dispatchChange.call(this);
	        }
	    };
	    DateCellEditor.prototype._changeHandler = function (e) {
	        _super.prototype._changeHandler.call(this, e);
	    };
	    DateCellEditor.prototype._pasteHandler = function (e) {
	        _super.prototype._pasteHandler.call(this, e);
	    };
	    DateCellEditor.prototype._copyHandler = function (e) {
	        _super.prototype._copyHandler.call(this, e);
	    };
	    DateCellEditor.prototype._requestStart = function (dropdown) {
	        if (_super.prototype._requestStart.call(this)) {
	            dropdown !== false && this.dropDown();
	            return true;
	        }
	        return false;
	    };
	    DateCellEditor.prototype.setBounds = function (x, y, w, h) {
	        x += 2;
	        y += 2;
	        w -= 4;
	        h -= 4;
	        _super.prototype.setBounds.call(this, x, y, w, h);
	    };
	    DateCellEditor.prototype._doChanged = function () {
	        !this._started && this._requestStart();
	        // date Editor에서 this._readOnly=false// this._controller._readOnly를 이용해서 처리해야 한다.
	        // input element의 readOnly는 textReadOnly를 따라간다.
	        if (this._started && !this._controller.readOnly && this._controller.editable) {
	            this._modified = true;
	            this._dispatchChange();
	        }
	    };
	    DateCellEditor.prototype.dropDownList = function (force) {
	        this.dropDown();
	    };
	    DateCellEditor.prototype.closeList = function (accept) {
	        this.closeUp(accept);
	    };
	    DateCellEditor.prototype.closeMonthList = function () {
	        this._list.closeMonth();
	    };
	    DateCellEditor.prototype.buttonClicked = function (index) {
	        this.listing ? this.closeUp(false) : this.dropDown();
	    };
	    DateCellEditor.prototype._getInputSelector = function () {
	        return DateCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DateCellEditor.prototype._isDateEditor = function () {
	        var valueType = this._editField().dataType;
	        return valueType == Types.ValueType.DATE || valueType == Types.ValueType.DATETIME || !this.weekSelectable;
	    };
	    DateCellEditor.prototype.$_selectDate = function (d) {
	        if (d && d != this._date) {
	            this._date = d;
	            if (this.containsRange(d)) {
	                var s = void 0;
	                if (this.weekSelectable) {
	                    s = $_getYearWeeks(d, this._startWeek, !!this.weekSeparator);
	                }
	                else {
	                    s = this._dateConverter.getText(this._date);
	                }
	                if (this._mask) {
	                    s = this._mask.writeBuffer(s);
	                }
	                this._editor["value"] = s;
	                // this._dispatchChange();
	                this._doChanged();
	            }
	        }
	    };
	    DateCellEditor.prototype.$_setListDate = function () {
	        var d;
	        var s = this._editor["value"];
	        //s && this._mask && (s = this._mask.getStripValue(s));
	        this._mask && (s = this._mask.getStripValue());
	        if (this.weekSelectable) {
	            d = $_getWeekThurs(s);
	        }
	        else {
	            d = this._dateConverter.getDateNull(s);
	        }
	        switch (this._defaultShowDate) {
	            case Types.DefaultShowDate.TODAY:
	                d = new Date();
	                break;
	            case Types.DefaultShowDate.NORMAL:
	                break;
	            case Types.DefaultShowDate.TODAY_WHEN_NULL:
	                d = d || new Date();
	                break;
	            default:
	                //d = d || (typeof this._defaultShowDate === "string" ? this._dateConverter.getDateNull(s) : this._defaultShowDate instanceof Date ? this._defaultShowDate : null);
	                break;
	        }
	        if (d) {
	            this._list.date = d;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    DateCellEditor.prototype.onDatePickerCloseUp = function (list, accept) {
	        this.closeUp(accept);
	        !Utils_1.Utils.isMobile && this.setFocus();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    DateCellEditor.INPUT_CSS = "rg-date-editor";
	    return DateCellEditor;
	}(Editors.TextCellEditor));
	exports.DateCellEditor = DateCellEditor;
	var BTCalendarList = /** @class */ (function (_super) {
	    __extends(BTCalendarList, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function BTCalendarList(container, editor, btOptions) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._dropDownPosition = ListEditors.DropDownPosition.BUTTON;
	        _this._viewGridInside = false;
	        _this._selected = false;
	        _this._focused = false;
	        _this._jquery = window["jQuery"];
	        if (!_this._jquery) ;
	        _this._editor = editor;
	        _this._container = container;
	        _this._btOptions = btOptions;
	        _this._element = _this.$_createList();
	        return _this;
	    }
	    BTCalendarList.prototype._doDispose = function () {
	        this._jquery = null;
	        this._editor = null;
	        this._container = null;
	        this._containerElement = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(BTCalendarList.prototype, "dropDownPosition", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            this._dropDownPosition = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "date", {
	        /** date */
	        get: function () {
	            return this._date;
	        },
	        set: function (value) {
	            this._date = value;
	            if (value.getTime() !== this._date.getTime()) {
	                this._currDate = new Date(value);
	                this._date = new Date(value);
	                if (this.listing) {
	                    var dt = new Date(value.getFullYear(), value.getMonth(), value.getDate());
	                    this._jquery && this._jquery(this._element).datepicker("update", dt);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "minDate", {
	        /** minDate */
	        get: function () {
	            return this._minDate;
	        },
	        set: function (value) {
	            this._minDate = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "maxDate", {
	        /** maxDate */
	        get: function () {
	            return this._maxDate;
	        },
	        set: function (value) {
	            this._maxDate = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "viewGridInside", {
	        /** viewGridInside */
	        get: function () {
	            return this._viewGridInside;
	        },
	        set: function (value) {
	            this._viewGridInside = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "listing", {
	        /** listing */
	        get: function () {
	            return window["jQuery"] && window["jQuery"](this._element).data("datepicker");
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "selected", {
	        /** selected */
	        get: function () {
	            return this._selected;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTCalendarList.prototype, "focused", {
	        /** focused */
	        get: function () {
	            return this._focused;
	        },
	        set: function (value) {
	            if (value != this._focused) {
	                this._focused = value;
	                this._element.style.border = value ? "1px solid rgba(50, 50, 50, 1)" : "1px solid rgba(50, 50, 50, 0.3)";
	                this._element.style.boxShadow = value ? "rgba(0, 0, 0, 0.8) 1px 2px 5px" : "rgba(0, 0, 0, 0.5) 1px 2px 5px";
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    // 내부에서 생성된 BootStrap Datepicker삭제.
	    BTCalendarList.prototype.$_destroy = function () {
	        this._jquery && this._jquery(this._element).datepicker("destroy");
	    };
	    BTCalendarList.prototype.keydown = function (e) {
	        if (this._jquery) {
	            this._jquery(this._element).datepicker("keydown", e);
	            var dt = this._jquery(this._element).data("datepicker").viewDate;
	            if (dt instanceof Date) {
	                this.date = dt;
	                this._editor && this._editor.selectDate(this._date);
	            }
	        }
	    };
	    BTCalendarList.prototype.$_createList = function () {
	        var element = document.createElement("div");
	        var css = element.style;
	        css.position = "absolute";
	        css.cssFloat = "none";
	        css.clear = "both";
	        css.boxSizing = "border-box";
	        css.zIndex = "3001";
	        css.margin = "0px";
	        css.overflow = "auto";
	        element.className = "rg-calendar";
	        return element;
	    };
	    BTCalendarList.prototype.show = function (containerElement, x, y, cellWidth, editBounds) {
	        this._containerElement = this._viewGridInside ? this._container["_container"] : containerElement;
	        if (!this.$_createCalendar()) {
	            alert("BootStrap DatePicker Not Include");
	            return false;
	        }
	        this.$_show(x, y, cellWidth, editBounds);
	    };
	    BTCalendarList.prototype.$_createCalendar = function () {
	        var element = this._element;
	        var dt;
	        var options = this._btOptions;
	        if (this._date) {
	            dt = new Date(this._date.getFullYear(), this._date.getMonth(), this._date.getDate());
	        }
	        if (!this._jquery) {
	            return false;
	        }
	        this._jquery(element).datepicker && this._jquery(element).datepicker(options).datepicker("setDate", dt).on("changeDate", function (evt) {
	            var d = evt.date;
	            if (d && !this._editor.containsRange(d)) {
	                // message창.
	                return;
	            }
	            if (d) {
	                this._date = new Date(d);
	                // this._date.setDate(d + 1);
	                this._selected = true;
	            }
	            else {
	                this._date = undefined;
	                this._selected = true;
	            }
	            this.fireEvent(DatePicker.CLOSE_UP, true);
	        }.bind(this));
	        return true;
	    };
	    BTCalendarList.prototype.$_show = function (x, y, cellWidth, editBounds) {
	        this.focused = false;
	        this._selected = false;
	        this._containerElement.appendChild(this._element);
	        var d = this._date;
	        this._currDate = d ? new Date(d) : new Date();
	        var br = Utils_1.Utils.getBrowserSize();
	        var pr = Utils_1.Utils.getClientRect(this._containerElement);
	        var cr = Utils_1.Utils.getClientRect(this._container["_container"]);
	        var w = br.width; // this._container.width(); // _container: grid container
	        var h = br.height; //this._container.height();
	        var r = Utils_1.Utils.getClientRect(this._element);
	        var sx = window.pageXOffset || document.documentElement.scrollLeft;
	        var sy = window.pageYOffset || document.documentElement.scrollTop;
	        if (document.documentElement.scrollWidth > document.documentElement.clientWidth) {
	            h -= 18;
	        }
	        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
	            w -= 18;
	        }
	        x += cr.left - pr.left;
	        y += cr.top - pr.top;
	        if (Utils_1.Utils.ieTen || Utils_1.Utils.ieOld || Utils_1.Utils.ieLeg) {
	            x += document.documentElement.scrollLeft;
	            y += document.documentElement.scrollTop;
	        }
	        if (y + r.height > h + sy) {
	            y = y - editBounds.height - r.height;
	            if (y < 0) {
	                y = h - r.height - 2;
	            }
	        }
	        if (this._dropDownPosition != ListEditors.DropDownPosition.EDITOR) { // BUTTON 이거나 잘못된 값.
	            x = Math.max(0, x + cellWidth - r.width);
	        }
	        else {
	            if (x + r.width > w + sx) {
	                x = w - r.width;
	            }
	        }
	        if (this._viewGridInside) {
	            y = editBounds.bottom - pr.top + 2;
	            if ((pr.bottom < editBounds.bottom + r.height) || (h + sy < editBounds.bottom + r.height)) {
	                y = editBounds.top - r.height - pr.top - 2;
	            }
	        }
	        Utils_1.Utils.move(this._element, Math.max(0, x), Math.max(0, y));
	    };
	    BTCalendarList.prototype.today = function () {
	        return (this.date = new Date());
	    };
	    BTCalendarList.prototype.incDay = function (delta) {
	        var d;
	        if (this._date.getMonth() == this._currDate.getMonth()) {
	            d = new Date(this._date);
	            this._date && d.setDate(this._date.getDate() + delta);
	        }
	        else {
	            d = this._currDate;
	            d = new Date(d.getFullYear(), d.getMonth(), 1);
	        }
	        return (this.date = d);
	    };
	    BTCalendarList.prototype.incMonth = function (delta) {
	        var d;
	        if (this._date.getMonth() == this._currDate.getMonth()) {
	            d = new Date(this._date);
	            this._date && Utils_1.Utils.incMonth(d, delta);
	        }
	        else {
	            d = this._currDate;
	            d = new Date(d.getFullYear(), d.getMonth(), 1);
	        }
	        return (this.date = d);
	    };
	    BTCalendarList.prototype.firstDay = function () {
	        var d = new Date(this._currDate);
	        this._date && d.setDate(1); //this._date.getDate() - this._date.getDay());
	        return (this.date = d);
	    };
	    BTCalendarList.prototype.lastDay = function () {
	        var d = new Date(this._currDate);
	        if (this._date) {
	            var y = d.getFullYear();
	            var m = d.getMonth();
	            var mdays = Utils_1.Utils.month_days[Utils_1.Utils.isLeapYear(y) ? 1 : 0][m];
	            d.setDate(mdays); //this._date.getDate() + 6 - this._date.getDay());
	        }
	        return (this.date = d);
	    };
	    return BTCalendarList;
	}(EventAware_1.EventAware));
	var BTDateCellEditor = /** @class */ (function (_super) {
	    __extends(BTDateCellEditor, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function BTDateCellEditor(grid, parentElement) {
	        var _this = _super.call(this, grid, parentElement) || this;
	        _this._textReadOnly = false;
	        // private _editFormat: string;  datetimeFormat으로 대체.
	        _this._minDate = new Date(1970, 0, 1);
	        _this._maxDate = new Date(2100, 11, 31);
	        _this._dropDownPosition = ListEditors.DropDownPosition.BUTTON;
	        _this._dropDownWhenClick = false;
	        _this._commitOnSelect = false;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._regx = /[0-9]|\.|\-|\/|a|A|p|P|m/;
	        _this._closing = false;
	        _this._globalMouseHandler = function (e) {
	            var p = e.target;
	            while (p) {
	                if (p == this._list._element) {
	                    return;
	                }
	                p = p["parentNode"];
	            }
	            this.closeUp(true);
	        }.bind(_this);
	        _this._borderable = false;
	        return _this;
	    }
	    BTDateCellEditor.prototype._doDispose = function () {
	        this._globalMouseHandler = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(BTDateCellEditor.prototype, "list", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** list */
	        get: function () {
	            return this._list;
	        },
	        set: function (value) {
	            this._list = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "btOptions", {
	        /** btOptions */
	        get: function () {
	            return this._btOptions;
	        },
	        set: function (value) {
	            this._btOptions = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "textReadOnly", {
	        /** textReadOnly */
	        get: function () {
	            return this._textReadOnly;
	        },
	        set: function (value) {
	            this._textReadOnly = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "editFormat", {
	        /** editFormat */
	        get: function () {
	            return this.datetimeFormat;
	        },
	        set: function (value) {
	            this.datetimeFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "minDate", {
	        /** minDate */
	        get: function () {
	            return this._minDate;
	        },
	        set: function (value) {
	            this._minDate = !value ? null : value instanceof Date ? value : typeof value === "string" ? this._dateConverter.getDateNull(value) : null;
	            this._minDate && this._minDate.setHours(0, 0, 0, 0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "maxDate", {
	        /** maxDate */
	        get: function () {
	            return this._maxDate;
	        },
	        set: function (value) {
	            this._maxDate = !value ? null : value instanceof Date ? value : typeof value === "string" ? this._dateConverter.getDateNull(value) : null;
	            this._maxDate && this._maxDate.setHours(23, 59, 59);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "dropDownPosition", {
	        /** dropDownPosition */
	        get: function () {
	            return this._dropDownPosition;
	        },
	        set: function (value) {
	            this._dropDownPosition = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "dropDownWhenClick", {
	        /** dropDownWhenClick */
	        get: function () {
	            return this._dropDownWhenClick;
	        },
	        set: function (value) {
	            this._dropDownWhenClick = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "commitOnSelect", {
	        /** commitOnSelect */
	        get: function () {
	            return this._commitOnSelect;
	        },
	        set: function (value) {
	            this._commitOnSelect = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    BTDateCellEditor.prototype.dropDown = function () {
	        if (!this.readOnly && !this._controller["_readOnly"] && !this.listing && !this._closing) {
	            var grid = this._grid;
	            var list = this._list = new BTCalendarList(grid.container, this, this._btOptions);
	            list.addListener(this);
	            var r = Utils_1.Utils.getBounds(this._container); // input 의 div
	            list.viewGridInside = this._options && this._options.viewGridInside;
	            list.dropDownPosition = this._dropDownPosition;
	            list.minDate = this._minDate;
	            list.maxDate = this._maxDate;
	            // if (this._weekDays && this._weekDays.length > 0) {
	            //     list.weekDays = this._weekDays);
	            // }
	            this.$_setListDate();
	            list.show(document.documentElement, r.x - 1, r.y + r.height, this._cellBounds.width, Utils_1.Utils.getClientRect(this._editor));
	            window.addEventListener("mousedown", this._globalMouseHandler);
	            return true;
	        }
	        return false;
	    };
	    BTDateCellEditor.prototype.closeUp = function (accept) {
	        if (this.listing) {
	            this._closing = true;
	            try {
	                window.removeEventListener("mousedown", this._globalMouseHandler);
	                if (accept && this._list.selected) {
	                    this.$_selectDate(this._list.date);
	                    this._commitOnSelect && this._dispatchCommit();
	                }
	            }
	            finally {
	                this.$_listDestroy();
	                this._closing = false;
	            }
	            return true;
	        }
	        return false;
	    };
	    BTDateCellEditor.prototype.buttonClicked = function (index) {
	        this.listing ? this.closeUp(false) : this.dropDown();
	    };
	    BTDateCellEditor.prototype.dropDownList = function () {
	        this.dropDown();
	    };
	    BTDateCellEditor.prototype.closeList = function (accept) {
	        this.closeUp(accept);
	    };
	    BTDateCellEditor.prototype.$_setListDate = function () {
	        var s = this._editor["value"];
	        s && this._mask && (s = this._mask.getStripValue());
	        var d = this._dateConverter.getDateNull(s);
	        if (d) {
	            this._list.date = d;
	        }
	    };
	    BTDateCellEditor.prototype.selectDate = function (d) {
	        this.$_selectDate(d);
	    };
	    BTDateCellEditor.prototype.$_selectDate = function (d) {
	        if (d && d != this._date) {
	            this._date = d;
	            if (this.containsRange(d)) {
	                var s = this._dateConverter.getText(this._date);
	                if (this._mask)
	                    s = this._mask.writeBuffer(s);
	                this._editor["value"] = s;
	                // this._dispatchChange();
	                this._doChanged();
	            }
	        }
	        else if (d === undefined) {
	            this._editor["value"] = this._mask ? (this._mask.clearBuffer(), this._mask.writeBuffer(null)) : "";
	            this._doChanged();
	        }
	    };
	    BTDateCellEditor.prototype.containsRange = function (value) {
	        return (!this._minDate || value >= this._minDate) && (!this._maxDate || value <= this._maxDate);
	    };
	    Object.defineProperty(BTDateCellEditor.prototype, "listing", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return !!this._list && this._list.listing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(BTDateCellEditor.prototype, "hasButton", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    BTDateCellEditor.prototype.initOptions = function () {
	        _super.prototype.initOptions.call(this);
	        this._dropDownWhenClick = false;
	        this._textReadOnly = false;
	        this["_viewGridInside"] = false;
	        this._minDate = new Date(1970, 0, 1);
	        this._maxDate = new Date(2100, 11, 31);
	        this._commitOnSelect = false;
	    };
	    BTDateCellEditor.prototype._isDateEditor = function () {
	        return true;
	    };
	    BTDateCellEditor.prototype.setEditValue = function (value) {
	        _super.prototype.setEditValue.call(this, value);
	        this._date = typeof value === "string" ? this._dateConverter.getDateNull(value) : value;
	        this._editor["value"] = this._valToStr(value);
	    };
	    BTDateCellEditor.prototype.getEditValue = function (throwError, validateValue) {
	        var v = _super.prototype.getEditValue.call(this, throwError);
	        var valueType = this._editField().dataType;
	        if (v && validateValue && (valueType == Types.ValueType.DATE || valueType == Types.ValueType.DATETIME)) {
	            v = v.getTime();
	            v = this._minDate ? Math.max(this._minDate.getTime(), v) : v;
	            v = this._maxDate ? Math.min(this._maxDate.getTime(), v) : v;
	            v && (v = new Date(v));
	        }
	        return v;
	    };
	    BTDateCellEditor.prototype._requestStart = function (dropDown) {
	        if (_super.prototype._requestStart.call(this, dropDown)) {
	            dropDown !== false && this.dropDown();
	            return true;
	        }
	        return false;
	    };
	    BTDateCellEditor.prototype._textHandler = function () {
	        this._requestStart();
	    };
	    BTDateCellEditor.prototype._compositionstartHandler = function () {
	        this._requestStart();
	    };
	    BTDateCellEditor.prototype._keyDownHandler = function (e) {
	        var list = this._list;
	        var listing = this.listing;
	        var focused = listing && list.focused;
	        switch (e.keyCode) {
	            case Types.Keys.ENTER:
	                if (this.closeUp(true)) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    return !this._sendToParent(e);
	                }
	                break;
	            case Types.Keys.ESCAPE:
	                if (this.closeUp(false)) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                break;
	            case Types.Keys.HOME:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.firstDay());
	                    return true;
	                }
	                break;
	            case Types.Keys.END:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.lastDay());
	                    return true;
	                }
	                break;
	            case Types.Keys.LEFT:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    list && list.keydown(e);
	                    // this.$_selectDate(list.incDay(-1));
	                    return true;
	                }
	                break;
	            case Types.Keys.RIGHT:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    list && list.keydown(e);
	                    // this.$_selectDate(list.incDay(1));
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEUP:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incMonth(-1));
	                    return true;
	                }
	                break;
	            case Types.Keys.PAGEDOWN:
	                if (focused) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    this.$_selectDate(list.incMonth(1));
	                    return true;
	                }
	                break;
	            case Types.Keys.DOWN:
	                if (e.altKey && !listing) {
	                    this._requestStart();
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                else if (listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    if (focused) {
	                        list.keydown(e);
	                        // this.$_selectDate(list.incDay(7));
	                    }
	                    else {
	                        list.focused = true;
	                        this.$_setListDate();
	                    }
	                    return true;
	                }
	                break;
	            case Types.Keys.UP:
	                if (e.altKey && listing) {
	                    this.closeUp(false);
	                    Utils_1.Utils.stopEvent(e, true);
	                    return true;
	                }
	                else if (listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    if (focused) {
	                        var d = list.date;
	                        if (d.getDate() <= 7) { //} && d.getDay() + 1 >= d.getDate()) {
	                            list.focused = false;
	                        }
	                        else {
	                            list.keydown(e);
	                            // this.$_selectDate(list.incDay(-7));
	                        }
	                    }
	                    else {
	                        list.focused = false;
	                    }
	                    return true;
	                }
	                break;
	            case Types.Keys.T:
	                if ((e.altKey || e.altKey && e.ctrlKey) && listing) {
	                    Utils_1.Utils.stopEvent(e, true);
	                    list.date = new Date();
	                    this.$_selectDate(list.date);
	                }
	                break;
	        }
	        return _super.prototype._keyDownHandler.call(this, e);
	    };
	    BTDateCellEditor.prototype._keyPressHandler = function (e) {
	        var list = this._list;
	        var c = String.fromCharCode(e.keyCode || e.charCode);
	        if (c.toLocaleLowerCase() == this.todayChar) {
	            Utils_1.Utils.stopEvent(e, true);
	            if (this.listing) {
	                list.focused = true;
	                this.$_selectDate(list.today());
	                return true;
	            }
	        }
	        else {
	            if (Utils_1.Utils.isFirefox && (e.ctrlKey || e.charCode === 0)) {
	                return _super.prototype._keyPressHandler.call(this, e);
	            }
	            if (!this._regx.test(c)) {
	                e.preventDefault();
	                return;
	            }
	        }
	        _super.prototype._keyPressHandler.call(this, e);
	        e.keyCode && /* e.keyCode === Keys.SPACE &&*/ this.textReadOnly && e.preventDefault();
	    };
	    // 한글을 제거하기 위해서 사용한다.
	    BTDateCellEditor.prototype.$_resetValue = function () {
	        if (this.visible) {
	            var editor = this._editor;
	            var s = editor.selectionStart;
	            var p = editor.selectionEnd;
	            var plen = editor.value ? editor.value.length : 0;
	            editor.value = editor.value.replace($$_HANGUL_REG, '');
	            var alen = editor.value ? editor.value.length : 0;
	            alen == plen ? editor.setSelectionRange(s, p) : editor.setSelectionRange(p, p);
	        }
	    };
	    BTDateCellEditor.prototype.setBounds = function (x, y, w, h) {
	        x += 2;
	        y += 2;
	        w -= 4;
	        h -= 4;
	        _super.prototype.setBounds.call(this, x, y, w, h);
	    };
	    BTDateCellEditor.prototype._doChanged = function () {
	        this._started && this._requestStart();
	        // date Editor에서 this._readOnly=false// this._controller._readOnly를 이용해서 처리해야 한다.
	        // input element의 readOnly는 textReadOnly를 따라간다.
	        if (this._started && !this._controller.readOnly && this._controller.editable) {
	            this._modified = true;
	            this._dispatchChange();
	        }
	    };
	    BTDateCellEditor.prototype._dispatchChange = function () {
	        if (this.visible) {
	            this.$_resetValue();
	            _super.prototype._dispatchChange.call(this);
	        }
	    };
	    BTDateCellEditor.prototype.onDatePickerCloseUp = function (list, accept) {
	        this.closeUp(accept);
	        this.setFocus();
	    };
	    BTDateCellEditor.prototype._getInputSelector = function () {
	        return BTDateCellEditor.INPUT_CSS;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    BTDateCellEditor.prototype.$_listDestroy = function () {
	        var parent = this._list && this._list["_element"].parentElement;
	        if (this._list) {
	            this._list["$_destroy"]();
	            parent.removeChild(this._list["_element"]);
	            this._list.dispose();
	            delete this._list;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    BTDateCellEditor.INPUT_CSS = "rg-btdate-editor";
	    return BTDateCellEditor;
	}(Editors.TextCellEditor));
	exports.BTDateCellEditor = BTDateCellEditor;
	});

	unwrapExports(DateEditors);
	var DateEditors_1 = DateEditors.Holiday;
	var DateEditors_2 = DateEditors.HolidayCollection;
	var DateEditors_3 = DateEditors.DateCellEditor;
	var DateEditors_4 = DateEditors.BTDateCellEditor;

	var EditOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditOptions.ts
	// 2019. 08. 13. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });









	var EditOptions = /** @class */ (function (_super) {
	    __extends(EditOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._readOnly = false;
	        _this._editable = !Utils_1.Utils.isMobile();
	        _this._checkable = true;
	        _this._updatable = true;
	        _this._appendable = false;
	        _this._insertable = false;
	        _this._deletable = false;
	        _this._revertable = false;
	        _this._erasable = false;
	        _this._commitByCell = false;
	        _this._editWhenFocused = false;
	        _this._commitWhenNoEdit = false;
	        _this._commitWhenExitLast = false;
	        _this._commitWhenLeave = false;
	        _this._crossWhenExitLast = false;
	        _this._validateOnEdited = true;
	        _this._validateOnExit = false;
	        _this._hintOnError = true;
	        // private _deleteRowsMessage = Utils.win["RG_CONST"] && Utils.win["RG_CONST"]["DELETEROWSMESSAGE"] ? Utils.win["RG_CONST"]["DELETEROWSMESSAGE"] : "선택된 행(들)을 삭제하시겠습니까??";
	        // private _invalidFormatMessage: string = Utils.win["RG_CONST"] && Utils.win["RG_CONST"]["INVALIDFORMATMESSAGE"] ? Utils.win["RG_CONST"]["INVALIDFORMATMESSAGE"] : "잘못된 입력 유형입니다.";
	        _this._deleteRowsMessage = window["RG_CONST"] && window["RG_CONST"]["DELETEROWSMESSAGE"] ? window["RG_CONST"]["DELETEROWSMESSAGE"] : "선택된 행(들)을 삭제하시겠습니까??";
	        _this._invalidFormatMessage = window["RG_CONST"] && window["RG_CONST"]["INVALIDFORMATMESSAGE"] ? window["RG_CONST"]["INVALIDFORMATMESSAGE"] : "잘못된 입력 유형입니다.";
	        _this._showInvalidFormatMessage = true;
	        _this._deleteRowsConfirm = true;
	        _this._confirmWhenDelete = true;
	        _this._editWhenClickFocused = false;
	        _this._commitLevel = Types.ValidationLevel.IGNORE;
	        _this._useTabKey = true;
	        _this._useArrowKeys = true;
	        _this._skipReadOnly = false;
	        _this._skipReadOnlyCell = false;
	        _this._verticalMovingStep = CellIndex_1.VerticalMovingStep.ROW;
	        _this._enterToTab = false;
	        _this._enterToNextRow = false;
	        _this._enterToEdit = false;
	        _this._maxLengthToNextCell = false;
	        _this._forceInsert = false;
	        _this._forceAppend = false;
	        _this._checkDiff = false;
	        _this._checkCellDiff = false;
	        _this._strictDiff = false;
	        _this._deletableWhenEdit = true;
	        _this._showCommitError = true;
	        _this._firstCellWhenInsert = false;
	        _this._appendWhenInsertKey = false;
	        _this._appendWhenExitLast = false;
	        _this._showOnlyValidationMessage = true;
	        _this._displayEmptyEditRow = false;
	        _this._checkWhenSpace = false;
	        _this._buttonClickWhenSpace = false;
	        _this._exitGridWhenTab = false;
	        _this._innerDraggable = false;
	        _this._cancelWhenLastUndo = false;
	        return _this;
	    }
	    EditOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditOptions.prototype, "readOnly", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** readOnly */
	        get: function () {
	            return this._readOnly;
	        },
	        set: function (value) {
	            if (value != this._readOnly) {
	                this._readOnly = value;
	                this._refreshOwner();
	                this._invalidateEditor();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "editable", {
	        /** editable */
	        get: function () {
	            return this._editable;
	        },
	        set: function (value) {
	            if (value != this._editable) {
	                this._editable = value;
	                this._refreshOwner();
	                this._invalidateEditor();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "checkable", {
	        /** checkable */
	        get: function () {
	            return this._checkable;
	        },
	        set: function (value) {
	            if (value != this._checkable) {
	                this._checkable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "updatable", {
	        /** updatable */
	        get: function () {
	            return this._updatable;
	        },
	        set: function (value) {
	            if (value != this._updatable) {
	                this._updatable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "appendable", {
	        /** appendable */
	        get: function () {
	            return this._appendable;
	        },
	        set: function (value) {
	            if (value != this._appendable) {
	                this._appendable = value;
	                this.displayEmptyEditRow = this._displayEmptyEditRow;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "insertable", {
	        /** insertable */
	        get: function () {
	            return this._insertable;
	        },
	        set: function (value) {
	            if (value != this._insertable) {
	                this._insertable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "deletable", {
	        /** deletable */
	        get: function () {
	            return this._deletable;
	        },
	        set: function (value) {
	            if (value != this._deletable) {
	                this._deletable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "revertable", {
	        /** revertable */
	        get: function () {
	            return this._revertable;
	        },
	        set: function (value) {
	            if (value != this._revertable) {
	                this._revertable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "erasable", {
	        /** erasable */
	        get: function () {
	            return this._erasable;
	        },
	        set: function (value) {
	            if (value != this._erasable) {
	                this._erasable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "commitByCell", {
	        /** commitByCell */
	        get: function () {
	            return this._commitByCell;
	        },
	        set: function (value) {
	            if (value != this._commitByCell) {
	                this._commitByCell = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "editWhenFocused", {
	        /** editWhenFocused */
	        get: function () {
	            return this._editWhenFocused;
	        },
	        set: function (value) {
	            this._editWhenFocused = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "commitWhenNoEdit", {
	        /** commitWhenNoEdit */
	        get: function () {
	            return this._commitWhenNoEdit;
	        },
	        set: function (value) {
	            this._commitWhenNoEdit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "commitWhenExitLast", {
	        /** commitWhenExitLast */
	        get: function () {
	            return this._commitWhenExitLast;
	        },
	        set: function (value) {
	            this._commitWhenExitLast = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "commitWhenLeave", {
	        /** commitWhenLeave */
	        get: function () {
	            return this._commitWhenLeave;
	        },
	        set: function (value) {
	            this._commitWhenLeave = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "crossWhenExitLast", {
	        /** crossWhenExitLast */
	        get: function () {
	            return this._crossWhenExitLast;
	        },
	        set: function (value) {
	            this._crossWhenExitLast = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "validateOnEdited", {
	        /** validateOnEdited */
	        get: function () {
	            return this._validateOnEdited;
	        },
	        set: function (value) {
	            this._validateOnEdited = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "validateOnExit", {
	        /** validateOnExit */
	        get: function () {
	            return this._validateOnExit;
	        },
	        set: function (value) {
	            this._validateOnExit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "hintOnError", {
	        /** hintOnError */
	        get: function () {
	            return this._hintOnError;
	        },
	        set: function (value) {
	            this._hintOnError = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "deleteRowsMessage", {
	        /** deleteRowsMessage */
	        get: function () {
	            return this._deleteRowsMessage;
	        },
	        set: function (value) {
	            this._deleteRowsMessage = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "invalidFormatMessage", {
	        /** invalidFormatMessage */
	        get: function () {
	            return this._invalidFormatMessage;
	        },
	        set: function (value) {
	            this._invalidFormatMessage = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "showInvalidFormatMessage", {
	        /** showInvalidFormatMessage */
	        get: function () {
	            return this._showInvalidFormatMessage;
	        },
	        set: function (value) {
	            this._showInvalidFormatMessage = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "deleteRowsConfirm", {
	        /** deleteRowsConfirm */
	        get: function () {
	            return this._deleteRowsConfirm;
	        },
	        set: function (value) {
	            this._deleteRowsConfirm = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "confirmWhenDelete", {
	        /** confirmWhenDelete */
	        get: function () {
	            return this._confirmWhenDelete;
	        },
	        set: function (value) {
	            this._confirmWhenDelete = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "editWhenClickFocused", {
	        /** editWhenClickFocused */
	        get: function () {
	            return this._editWhenClickFocused;
	        },
	        set: function (value) {
	            this._editWhenClickFocused = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "commitLevel", {
	        /** commitLevel */
	        get: function () {
	            return this._commitLevel;
	        },
	        set: function (value) {
	            this._commitLevel = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "useTabKey", {
	        /** useTabKey */
	        get: function () {
	            return this._useTabKey;
	        },
	        set: function (value) {
	            this._useTabKey = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "useArrowKeys", {
	        /** useArrowKeys */
	        get: function () {
	            return this._useArrowKeys;
	        },
	        set: function (value) {
	            this._useArrowKeys = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "skipReadOnly", {
	        /** skipReadOnly */
	        get: function () {
	            return this._skipReadOnly;
	        },
	        set: function (value) {
	            this._skipReadOnly = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "skipReadOnlyCell", {
	        /** skipReadOnlyCell */
	        get: function () {
	            return this._skipReadOnlyCell;
	        },
	        set: function (value) {
	            this._skipReadOnlyCell = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "verticalMovingStep", {
	        /** verticalMovingStep */
	        get: function () {
	            return this._verticalMovingStep;
	        },
	        set: function (value) {
	            this._verticalMovingStep = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "enterToTab", {
	        /** enterToTab */
	        get: function () {
	            return this._enterToTab;
	        },
	        set: function (value) {
	            this._enterToTab = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "enterToNextRow", {
	        /** enterToNextRow */
	        get: function () {
	            return this._enterToNextRow;
	        },
	        set: function (value) {
	            this._enterToNextRow = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "enterToEdit", {
	        /** enterToEdit */
	        get: function () {
	            return this._enterToEdit;
	        },
	        set: function (value) {
	            this._enterToEdit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "maxLengthToNextCell", {
	        /** maxLengthToNextCell */
	        get: function () {
	            return this._maxLengthToNextCell;
	        },
	        set: function (value) {
	            this._maxLengthToNextCell = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "forceInsert", {
	        /** forceInsert */
	        get: function () {
	            return this._forceInsert;
	        },
	        set: function (value) {
	            this._forceInsert = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "forceAppend", {
	        /** forceAppend */
	        get: function () {
	            return this._forceAppend;
	        },
	        set: function (value) {
	            this._forceAppend = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "checkDiff", {
	        /** checkDiff */
	        get: function () {
	            return this._checkDiff;
	        },
	        set: function (value) {
	            this._checkDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "checkCellDiff", {
	        /** checkCellDiff */
	        get: function () {
	            return this._checkCellDiff;
	        },
	        set: function (value) {
	            this._checkCellDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "strictDiff", {
	        /** strictDiff */
	        get: function () {
	            return this._strictDiff;
	        },
	        set: function (value) {
	            this._strictDiff = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "deletableWhenEdit", {
	        /** deletableWhenEdit */
	        get: function () {
	            return this._deletableWhenEdit;
	        },
	        set: function (value) {
	            this._deletableWhenEdit = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "showCommitError", {
	        /** showCommitError */
	        get: function () {
	            return this._showCommitError;
	        },
	        set: function (value) {
	            this._showCommitError = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "firstCellWhenInsert", {
	        /** firstCellWhenInsert */
	        get: function () {
	            return this._firstCellWhenInsert;
	        },
	        set: function (value) {
	            this._firstCellWhenInsert = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "appendWhenInsertKey", {
	        /** appendWhenInsertKey */
	        get: function () {
	            return this._appendWhenInsertKey;
	        },
	        set: function (value) {
	            this._appendWhenInsertKey = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "appendWhenExitLast", {
	        /** appendWhenExitLast */
	        get: function () {
	            return this._appendWhenExitLast;
	        },
	        set: function (value) {
	            this._appendWhenExitLast = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "showOnlyValidationMessage", {
	        /** showOnlyValidationMessage */
	        get: function () {
	            return this._showOnlyValidationMessage;
	        },
	        set: function (value) {
	            this._showOnlyValidationMessage = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "displayEmptyEditRow", {
	        /** displayEmptyEditRow */
	        get: function () {
	            return this._displayEmptyEditRow;
	        },
	        set: function (value) {
	            var grid = this.grid;
	            // if (grid && grid instanceof TreeView) {
	            // 	this._displayEmptyEditRow = false;
	            // 	return;
	            // }
	            this._displayEmptyEditRow = value;
	            if (this._displayEmptyEditRow && this._appendable) {
	                grid.itemSource["appendDummy"]();
	            }
	            else {
	                grid.itemSource["cancelDummy"]();
	            }
	            this._refreshOwner();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "checkWhenSpace", {
	        /** checkWhenSpace */
	        get: function () {
	            return this._checkWhenSpace;
	        },
	        set: function (value) {
	            this._checkWhenSpace = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "buttonClickWhenSpace", {
	        /** buttonClickWhenSpace */
	        get: function () {
	            return this._buttonClickWhenSpace;
	        },
	        set: function (value) {
	            this._buttonClickWhenSpace = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "exitGridWhenTab", {
	        /** exitGridWhenTab */
	        get: function () {
	            return this._exitGridWhenTab;
	        },
	        set: function (value) {
	            this._exitGridWhenTab = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "innerDraggable", {
	        /** innerDraggable */
	        get: function () {
	            return this._innerDraggable;
	        },
	        set: function (value) {
	            this._innerDraggable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditOptions.prototype, "cancelWhenLastUndo", {
	        /** cancelWhenLastUndo */
	        get: function () {
	            return this._cancelWhenLastUndo;
	        },
	        set: function (value) {
	            this._cancelWhenLastUndo = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    EditOptions.prototype.isWritable = function () {
	        return this._editable && !this._readOnly;
	    };
	    EditOptions.prototype.canUpdate = function () {
	        return !this._readOnly && this._updatable;
	    };
	    EditOptions.prototype.canInsert = function () {
	        return !this._readOnly && this._insertable;
	    };
	    EditOptions.prototype.canAppend = function () {
	        return !this._readOnly && this._appendable;
	    };
	    EditOptions.prototype.canDelete = function () {
	        return !this._readOnly && this._deletable;
	    };
	    return EditOptions;
	}(GridOptions.GridBaseOptions));
	exports.EditOptions = EditOptions;
	var EditorTitleExpressionRuntime = /** @class */ (function (_super) {
	    __extends(EditorTitleExpressionRuntime, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditorTitleExpressionRuntime() {
	        return _super.call(this) || this;
	    }
	    EditorTitleExpressionRuntime.prototype._doDispose = function () {
	        this._cell = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditorTitleExpressionRuntime.prototype, "value", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** value */
	        set: function (value) {
	            this._value = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorTitleExpressionRuntime.prototype, "cell", {
	        /** cell */
	        set: function (value) {
	            this._cell = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditorTitleExpressionRuntime.prototype.isIdentifier = function (token) {
	        token = token.toLowerCase();
	        if (EditorTitleExpressionRuntime.IDENTS.hasOwnProperty(token)) {
	            return EditorTitleExpressionRuntime.IDENTS[token];
	        }
	        return _super.prototype.isIdentifier.call(this, token);
	    };
	    EditorTitleExpressionRuntime.prototype.evaluateIdentifier = function (idKey) {
	        switch (idKey) {
	            case EditorTitleExpressionRuntime.ID_VALUE:
	                return this._value;
	            case EditorTitleExpressionRuntime.ID_ROW:
	                return this._cell.itemIndex + 1;
	            case EditorTitleExpressionRuntime.ID_COLUMN_HEADER:
	                var column = this._cell && this._cell.column;
	                return column && column.header && column.header.text ? column.header.text : column.displayText;
	        }
	        throw new Expression.ExpressionEvaluationError("Invalid identifier key: " + idKey);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    EditorTitleExpressionRuntime.ID_VALUE = 0;
	    EditorTitleExpressionRuntime.ID_ROW = 1;
	    EditorTitleExpressionRuntime.ID_COLUMN_HEADER = 2;
	    EditorTitleExpressionRuntime.IDENTS = {
	        value: EditorTitleExpressionRuntime.ID_VALUE,
	        row: EditorTitleExpressionRuntime.ID_ROW,
	        dcount: EditorTitleExpressionRuntime.ID_COLUMN_HEADER
	    };
	    return EditorTitleExpressionRuntime;
	}(Expression.ExpressionRuntime));
	exports.EditorTitleExpressionRuntime = EditorTitleExpressionRuntime;
	var EditorOptions = /** @class */ (function (_super) {
	    __extends(EditorOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditorOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._yearDisplayFormat = window["RG_CONST"] && window["RG_CONST"]["YEARDISPLAYFORMAT"] ? window["RG_CONST"]["YEARDISPLAYFORMAT"] : "{Y}년";
	        _this._monthDisplayFormat = window["RG_CONST"] && window["RG_CONST"]["MONTHDISPLAYFORMAT"] ? window["RG_CONST"]["MONTHDISPLAYFORMAT"] : "{M}월";
	        _this._months = null;
	        _this._weekDays = null;
	        _this._viewGridInside = false;
	        _this._holidays = null;
	        _this._titleExprRuntime = new EditorTitleExpressionRuntime();
	        return _this;
	    }
	    EditorOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(EditorOptions.prototype, "yearDisplayFormat", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** yearDisplayFormat */
	        get: function () {
	            return this._yearDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._yearDisplayFormat) {
	                this._yearDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "monthDisplayFormat", {
	        /** monthDisplayFormat */
	        get: function () {
	            return this._monthDisplayFormat;
	        },
	        set: function (value) {
	            if (value != this._monthDisplayFormat) {
	                this._monthDisplayFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "months", {
	        /** months */
	        get: function () {
	            return this._months;
	        },
	        set: function (value) {
	            if (value != this._months) {
	                this._months = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "weekDays", {
	        /** weekDays */
	        get: function () {
	            return this._weekDays;
	        },
	        set: function (value) {
	            if (value != this._weekDays) {
	                this._weekDays = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "viewGridInside", {
	        /** viewGridInside */
	        get: function () {
	            return this._viewGridInside;
	        },
	        set: function (value) {
	            if (value != this._viewGridInside) {
	                this._viewGridInside = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "titleStatement", {
	        /** titleStatement */
	        get: function () {
	            return this._titleStatement;
	        },
	        set: function (value) {
	            if (value != this._titleStatement) {
	                this._titleStatement = value;
	                if (value) {
	                    if (this._titleExprStatement) {
	                        this._titleExprStatement.source = value;
	                    }
	                    else {
	                        this._titleExprStatement = new ExpressionStatement_1.ExpressionStatement(value);
	                    }
	                }
	                else {
	                    this._titleExprStatement = null;
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(EditorOptions.prototype, "holidays", {
	        /** holidays */
	        get: function () {
	            return this._holidays;
	        },
	        set: function (value) {
	            if (value != this._holidays) {
	                this._holidays = value;
	                if (value) {
	                    this._holidayCollection = this._holidayCollection || new DateEditors.HolidayCollection();
	                    this._holidayCollection.load(value);
	                }
	                else {
	                    this._holidayCollection && this._holidayCollection.clear();
	                }
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return EditorOptions;
	}(GridOptions.GridBaseOptions));
	exports.EditorOptions = EditorOptions;
	// TODO 정리 필요.
	// 1 copyDisplayText가 true이면 화면에 보여지는 대로 그렇지 않으면 실제 값으로
	// 2 lookupDisplay, format 등은 제거검토
	var CopyOptions = /** @class */ (function (_super) {
	    __extends(CopyOptions, _super);
	    // private _dateWriter: DateTimeWriter;
	    // private _boolWriter: BooleanFormatter;
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CopyOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = true;
	        _this._singleMode = false;
	        // private _datetimeFormat: string = null;
	        // private _booleanFormat = null;
	        // private _lookupDisplay =  false;
	        _this._copyDisplayText = false;
	        _this._includeHeaderText = false;
	        return _this;
	    }
	    CopyOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CopyOptions.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CopyOptions.prototype, "singleMode", {
	        /** singleMode */
	        get: function () {
	            return this._singleMode;
	        },
	        set: function (value) {
	            if (value != this._singleMode) {
	                this._singleMode = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CopyOptions.prototype, "copyDisplayText", {
	        // /** datetimeFormat */
	        // get datetimeFormat(): string {
	        //     return this._datetimeFormat;
	        // }
	        // set datetimeFormat(value: string) {
	        //     if (value != this._datetimeFormat) {
	        //         this._datetimeFormat = value;
	        // 		if (value) {
	        // 			this._dateWriter = new DateTimeWriter(value);
	        // 		} else {
	        // 			this._dateWriter = null;
	        // 		}
	        //     }
	        // }
	        // /** booleanFormat */
	        // get booleanFormat(): string {
	        //     return this._booleanFormat;
	        // }
	        // set booleanFormat(value: string) {
	        //     if (value != this._booleanFormat) {
	        //         this._booleanFormat = value;
	        // 		if (value) {
	        // 			this._boolWriter = new BooleanFormatter(value);
	        // 		} else {
	        // 			this._boolWriter = null;
	        // 		}
	        //     }
	        // }
	        // /** lookupDisplay */
	        // get lookupDisplay(): boolean {
	        //     return this._lookupDisplay;
	        // }
	        // set lookupDisplay(value: boolean) {
	        //     if (value != this._lookupDisplay) {
	        //         this._lookupDisplay = value;
	        //         this._changed();
	        //     }
	        // }
	        /** copyDisplayText */
	        get: function () {
	            return this._copyDisplayText;
	        },
	        set: function (value) {
	            this._copyDisplayText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(CopyOptions.prototype, "includeHeaderText", {
	        /** includeHeaderText */
	        get: function () {
	            return this._includeHeaderText;
	        },
	        set: function (value) {
	            this._includeHeaderText = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return CopyOptions;
	}(GridOptions.GridBaseOptions));
	exports.CopyOptions = CopyOptions;
	var PasteOptions = /** @class */ (function (_super) {
	    __extends(PasteOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PasteOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = true;
	        _this._singleMode = false;
	        _this._startEdit = true;
	        _this._commitEdit = true;
	        _this._enableAppend = true;
	        _this._fillFieldDefaults = false;
	        _this._fillColumnDefaults = false;
	        _this._forceRowValidation = false;
	        _this._forceColumnValidation = false;
	        _this._datetimeFormats = null;
	        _this._booleanFormat = null;
	        _this._numberChars = null;
	        _this._numberSeparator = null;
	        _this._numberCharsOfCols = {};
	        _this._numberSeparatorOfCols = {};
	        _this._selectionBase = false;
	        _this._selectBlockPaste = false;
	        _this._stopOnError = true;
	        _this._noEditEvent = false;
	        _this._noDataEvent = false;
	        _this._eventEachRow = false;
	        _this._checkReadOnly = false;
	        _this._checkDomainOnly = false;
	        _this._convertLookupLabel = false;
	        _this._applyNumberFormat = false;
	        _this._applyEditMask = false;
	        _this._applyMaxLength = false;
	        _this._throwValidationError = true;
	        return _this;
	    }
	    PasteOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PasteOptions.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "singleMode", {
	        /** singleMode */
	        get: function () {
	            return this._singleMode;
	        },
	        set: function (value) {
	            if (value != this._singleMode) {
	                this._singleMode = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "startEdit", {
	        /** startEdit */
	        get: function () {
	            return this._startEdit;
	        },
	        set: function (value) {
	            if (value != this._startEdit) {
	                this._startEdit = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "commitEdit", {
	        /** commitEdit */
	        get: function () {
	            return this._commitEdit;
	        },
	        set: function (value) {
	            if (value != this._commitEdit) {
	                this._commitEdit = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "enableAppend", {
	        /** enableAppend */
	        get: function () {
	            return this._enableAppend;
	        },
	        set: function (value) {
	            if (value != this._enableAppend) {
	                this._enableAppend = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "fillFieldDefaults", {
	        /** fillFieldDefaults */
	        get: function () {
	            return this._fillFieldDefaults;
	        },
	        set: function (value) {
	            if (value != this._fillFieldDefaults) {
	                this._fillFieldDefaults = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "fillColumnDefaults", {
	        /** fillColumnDefaults */
	        get: function () {
	            return this._fillColumnDefaults;
	        },
	        set: function (value) {
	            if (value != this._fillColumnDefaults) {
	                this._fillColumnDefaults = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "forceRowValidation", {
	        /** forceRowValidation */
	        get: function () {
	            return this._forceRowValidation;
	        },
	        set: function (value) {
	            if (value != this._forceRowValidation) {
	                this._forceRowValidation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "forceColumnValidation", {
	        /** forceColumnValidation */
	        get: function () {
	            return this._forceColumnValidation;
	        },
	        set: function (value) {
	            if (value != this._forceColumnValidation) {
	                this._forceColumnValidation = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "datetimeFormats", {
	        /** datetimeFormats */
	        get: function () {
	            return this._datetimeFormats;
	        },
	        set: function (value) {
	            if (value !== this._datetimeFormats) {
	                this._datetimeFormats = value && value.concat();
	                if (value) {
	                    this._dateReaders = [];
	                    for (var i = 0; i < this._datetimeFormats.length; i++) {
	                        this._dateReaders.push(new DateTimeReader_1.DateTimeReader(this._datetimeFormats[i]));
	                    }
	                }
	                else {
	                    this._dateReaders = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "dateReaders", {
	        /** dateReaders */
	        get: function () {
	            return this._dateReaders;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "booleanFormat", {
	        /** booleanFormat */
	        get: function () {
	            return this._booleanFormat;
	        },
	        set: function (value) {
	            if (value != this._booleanFormat) {
	                this._booleanFormat = value;
	                this._boolReader = value && new BooleanConverter_1.BooleanConverter(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "boolReader", {
	        /** boolReader */
	        get: function () {
	            return this._boolReader;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "numberChars", {
	        /** numberChars */
	        get: function () {
	            return this._numberChars;
	        },
	        set: function (value) {
	            if (value !== this._numberChars) {
	                this._numberChars = value;
	                if (value && value.length > 0) {
	                    var s = "[";
	                    for (var i = 0; i < value.length; i++) {
	                        var c = value[i];
	                        if (c == "\\") {
	                            s += "\\" + c;
	                        }
	                        else {
	                            s += c;
	                        }
	                    }
	                    s += "]";
	                    this._numberCharExp = new RegExp(s, "g");
	                }
	                else {
	                    this._numberCharExp = null;
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "numberSeparator", {
	        /** numberSeparator */
	        get: function () {
	            return this._numberSeparator;
	        },
	        set: function (value) {
	            if (value != this._numberSeparator) {
	                this._numberSeparator = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "numberCharsOfCols", {
	        /** numberCharsOfCols */
	        get: function () {
	            return this._numberCharsOfCols;
	        },
	        set: function (value) {
	            if (value !== this._numberCharsOfCols) {
	                this._numberCharsOfCols = value;
	                this._numberCharExpOfCols = {};
	                if (value) {
	                    for (var name_1 in value) {
	                        var col = value[name_1];
	                        if (col instanceof Array && col.length > 0) {
	                            var s = "[";
	                            for (var i = 0, l = col.length; i < l; i++) {
	                                var c = col[i];
	                                if (c == "\\") {
	                                    s += "\\" + c;
	                                }
	                                else {
	                                    s += c;
	                                }
	                            }
	                            s += "]";
	                            this._numberCharExpOfCols[name_1] = new RegExp(s, "g");
	                        }
	                        else {
	                            this._numberCharExpOfCols[name_1] = null;
	                        }
	                    }
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "numberCharExp", {
	        /** numberCharExp */
	        get: function () {
	            return this._numberCharExp;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "numberSeparatorOfCols", {
	        /** numberSeparatorOfCols */
	        get: function () {
	            return this._numberSeparatorOfCols;
	        },
	        set: function (value) {
	            if (value !== this._numberSeparatorOfCols) {
	                this._numberSeparatorOfCols = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "selectionBase", {
	        /** selectionBase */
	        get: function () {
	            return this._selectionBase;
	        },
	        set: function (value) {
	            if (value != this._selectionBase) {
	                this._singleMode = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "selectBlockPaste", {
	        /** selectBlockPaste */
	        get: function () {
	            return this._selectBlockPaste;
	        },
	        set: function (value) {
	            if (value != this._selectBlockPaste) {
	                this._selectBlockPaste = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "stopOnError", {
	        /** stopOnError */
	        get: function () {
	            return this._stopOnError;
	        },
	        set: function (value) {
	            if (value != this._stopOnError) {
	                this._stopOnError = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "noEditEvent", {
	        /** noEditEvent */
	        get: function () {
	            return this._noEditEvent;
	        },
	        set: function (value) {
	            if (value != this._noEditEvent) {
	                this._noEditEvent = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "noDataEvent", {
	        /** noDataEvent */
	        get: function () {
	            return this._noDataEvent;
	        },
	        set: function (value) {
	            if (value != this._noDataEvent) {
	                this._noDataEvent = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "eventEachRow", {
	        /** eventEachRow */
	        get: function () {
	            return this._eventEachRow;
	        },
	        set: function (value) {
	            if (value != this._eventEachRow) {
	                this._eventEachRow = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "checkReadOnly", {
	        /** checkReadOnly */
	        get: function () {
	            return this._checkReadOnly;
	        },
	        set: function (value) {
	            if (value != this._checkReadOnly) {
	                this._checkReadOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "checkDomainOnly", {
	        /** checkDomainOnly */
	        get: function () {
	            return this._checkDomainOnly;
	        },
	        set: function (value) {
	            if (value != this._checkDomainOnly) {
	                this._checkDomainOnly = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "convertLookupLabel", {
	        /** convertLookupLabel */
	        get: function () {
	            return this._convertLookupLabel;
	        },
	        set: function (value) {
	            if (value != this._convertLookupLabel) {
	                this._convertLookupLabel = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "applyNumberFormat", {
	        /** applyNumberFormat */
	        get: function () {
	            return this._applyNumberFormat;
	        },
	        set: function (value) {
	            if (value != this._applyNumberFormat) {
	                this._applyNumberFormat = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "applyEditMask", {
	        /** applyEditMask */
	        get: function () {
	            return this._applyEditMask;
	        },
	        set: function (value) {
	            if (value != this._applyEditMask) {
	                this._applyEditMask = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "applyMaxLength", {
	        /** applyMaxLength */
	        get: function () {
	            return this._applyMaxLength;
	        },
	        set: function (value) {
	            if (value != this._applyMaxLength) {
	                this._applyMaxLength = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PasteOptions.prototype, "throwValidationError", {
	        /** throwValidationError */
	        get: function () {
	            return this._throwValidationError;
	        },
	        set: function (value) {
	            if (value != this._throwValidationError) {
	                this._throwValidationError = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    PasteOptions.prototype.numberCharExpOfCol = function (col) {
	        return col && this._numberCharExpOfCols && this._numberCharExpOfCols[col] ? this._numberCharExpOfCols[col] : this._numberCharExp;
	    };
	    PasteOptions.prototype.numberSeparatorOfCol = function (col) {
	        return col && this._numberSeparatorOfCols && this._numberSeparatorOfCols[col] ? this._numberSeparatorOfCols[col] : this._numberSeparator;
	    };
	    return PasteOptions;
	}(GridOptions.GridBaseOptions));
	exports.PasteOptions = PasteOptions;
	var MobileOptions = /** @class */ (function (_super) {
	    __extends(MobileOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MobileOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._longTapDuration = 500;
	        _this._doubleTapInterval = 300;
	        _this._tapThreshold = 4;
	        _this._showEditCommander = true;
	        _this._showTooltip = false;
	        return _this;
	    }
	    MobileOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(MobileOptions.prototype, "longTapDuration", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** longTapDuration */
	        get: function () {
	            return this._longTapDuration;
	        },
	        set: function (value) {
	            if (value != this._longTapDuration) {
	                this._longTapDuration = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MobileOptions.prototype, "doubleTapInterval", {
	        /** doubleTapInterval */
	        get: function () {
	            return this._doubleTapInterval;
	        },
	        set: function (value) {
	            if (value != this._doubleTapInterval) {
	                this._doubleTapInterval = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MobileOptions.prototype, "tapThreshold", {
	        /** tapThreshold */
	        get: function () {
	            return this._tapThreshold;
	        },
	        set: function (value) {
	            if (value != this._tapThreshold) {
	                this._tapThreshold = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MobileOptions.prototype, "showEditCommander", {
	        /** showEditCommander */
	        get: function () {
	            return this._showEditCommander;
	        },
	        set: function (value) {
	            if (value != this._showEditCommander) {
	                this._showEditCommander = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MobileOptions.prototype, "showTooltip", {
	        /** showTooltip */
	        get: function () {
	            return this._showTooltip;
	        },
	        set: function (value) {
	            if (value != this._showTooltip) {
	                this._showTooltip = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return MobileOptions;
	}(GridOptions.GridBaseOptions));
	exports.MobileOptions = MobileOptions;
	});

	unwrapExports(EditOptions_1);
	var EditOptions_2 = EditOptions_1.EditOptions;
	var EditOptions_3 = EditOptions_1.EditorTitleExpressionRuntime;
	var EditOptions_4 = EditOptions_1.EditorOptions;
	var EditOptions_5 = EditOptions_1.CopyOptions;
	var EditOptions_6 = EditOptions_1.PasteOptions;
	var EditOptions_7 = EditOptions_1.MobileOptions;

	var ColumnMergeElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RowGroupMergeElement.ts
	// 2019. 09. 04. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var MergedDataCellElement = /** @class */ (function (_super) {
	    __extends(MergedDataCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function MergedDataCellElement() {
	        var _this = _super.call(this, "mergedDataCellView") || this;
	        _this._topIndex = -1;
	        _this._bottomIndex = -1;
	        return _this;
	    }
	    Object.defineProperty(MergedDataCellElement.prototype, "mergeRoom", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** mergeRoom */
	        get: function () {
	            return this._mergeRoom;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    // protected _focusedChanged(): void {
	    //     this._doLayoutHandles();
	    //     super._focusedChanged();
	    // }
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    MergedDataCellElement.prototype.$_setMergeRoom = function (value) {
	        this._mergeRoom = value;
	    };
	    return MergedDataCellElement;
	}(ItemElement_1.DataCellElement));
	exports.MergedDataCellElement = MergedDataCellElement;
	var ColumnMergeElement = /** @class */ (function (_super) {
	    __extends(ColumnMergeElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMergeElement(bodyView) {
	        var _this = _super.call(this, null, "mergedGoupLayer") || this;
	        _this._roomMap = {}; // [ColumnMergeRoom : MergedDataCellElement];
	        _this._scopeViews = {}; // [any, MergedDataCellElement[]]
	        _this._bodyView = bodyView;
	        _this._cellLayer = new VisualElement_1.LayerElement("mergedCellLayer");
	        _this.addChild(_this._cellLayer);
	        return _this;
	    }
	    ColumnMergeElement.prototype._doDispose = function () {
	        this._roomMap = null;
	        this._scopeViews = null;
	        this._tailIndex && this._tailIndex.dispose();
	        this._tailIndex = null;
	        this._headIndex && this._headIndex.dispose();
	        this._headIndex = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnMergeElement.prototype, "bodyView", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._bodyView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnMergeElement.prototype.clearRooms = function () {
	        this._roomMap = {};
	        for (var i = this._cellLayer.childCount - 1; i >= 0; i--) {
	            var view = this._cellLayer.getChild(i);
	            var room = view.mergeRoom;
	            var views = this.$_getViews(room.scope);
	            view.visible = false;
	            if (views.indexOf(view) < 0) {
	                views.push(view);
	            }
	        }
	    };
	    // public prepareSpanning(lm: GridLayoutManager, columns: ValueColumn[]): void {
	    //     this._bodyView.prepareSpanning(lm.itemCount, columns);
	    // }
	    // public spanningPrepared(lm: GridLayoutManager, spanned: boolean): void {
	    //     this._bodyView.spanningPrepared(lm, spanned);
	    // }
	    ColumnMergeElement.prototype.addColumnRooms = function (lm, col, column, merges) {
	        var fixed = lm.fixedItemCount;
	        var top = lm.topIndex;
	        var views = this.$_getViews(column);
	        var rooms = merges.getRooms();
	        for (var i = rooms.length - 1; i >= 0; i--) {
	            var room = rooms[i];
	            var view = void 0;
	            if (views.length > 0) {
	                view = views.pop();
	            }
	            else {
	                view = this._createCellElement(room);
	                this._cellLayer.addChild(view);
	            }
	            view.visible = true;
	            view["$_setMergeRoom"](room);
	            this._roomMap[room["$_hash"]] = view;
	            var head = Math.max(0, room.head - top - fixed);
	            var tail = room.tail - top - fixed;
	            //this._bodyView.addSpan(head, col, tail - head + 1, 1);
	            merges.addCells(head, tail - head + 1);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnMergeElement.prototype._doAttached = function (parent) {
	        _super.prototype._doAttached.call(this, parent);
	        var grid = this.grid;
	        this._headIndex = new CellIndex_1.CellIndex(grid);
	        this._tailIndex = new CellIndex_1.CellIndex(grid);
	    };
	    ColumnMergeElement.prototype._doLayoutContent = function (lm) {
	        var headerViews = this["_headerViews"];
	        var footerViews = this["_footerViews"];
	        var fixedFooterViews = this["_fixedFooterViews"];
	        var rightFooterViews = this["_rightFooterViews"];
	        var items = lm["$_getItems"]();
	        var itemCount = items.length;
	        var fixedCount = lm.fixedItemCount;
	        var w = this.width;
	        /*
	        for (let i = fixedCount; i < itemCount; i++) {
	            const item = items[i];

	            // group header
	            if (item instanceof MergedGroupHeader) {
	                const view = headerViews[nHeader++];
	                const r = lm.getItemBounds(i);
	                const indent = lm.getLevelIndent(item.level);

	                view.item = item;
	                view.setBounds(indent, r.y, w - indent, r.height);
	                view.layoutContent(lm);
	            } else if (item instanceof MergedGroupFooter) {
	                const tr = i < fixedCount ? i : fixed ? i + 1 : i;

	                // if (this._fixedView) {
	                //     const view = fixedFooterViews[nFooter];
	                //     view.updateItem(item, tr);
	                //     view.layoutContent(lm);
	                // }
	                // if (this._rightView) {
	                //     const view = rightFooterViews[nFooter];
	                //     view.updateItem(item, tr);
	                //     view.layoutContent(lm);
	                // }

	                const view = footerViews[nFooter++];
	                view.updateItem(item, tr, -1);
	                view.layoutContent(lm);
	            }
	        }
	        */
	        //this.$_layoutCells(lm);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnMergeElement.prototype.$_getViews = function (scope) {
	        var views = this._scopeViews[scope.$_hash];
	        if (!views) {
	            views = [];
	            this._scopeViews[scope.$_hash] = views;
	        }
	        return views;
	    };
	    // private $_getCellContent(row: number, col: number): HTMLElement {
	    //     return this._bodyView["getCellContent"](row, col);
	    // }
	    ColumnMergeElement.prototype._createCellElement = function (room) {
	        var view = null;
	        if (room != null) {
	            var column = room.column;
	            if (column instanceof GridColumn_1.SeriesColumn) ;
	            else if (column instanceof GridColumn_1.DataColumn) {
	                view = new MergedDataCellElement();
	            }
	        }
	        return view;
	    };
	    return ColumnMergeElement;
	}(GridElement_1.VisualObjectElement));
	exports.ColumnMergeElement = ColumnMergeElement;
	});

	unwrapExports(ColumnMergeElement_1);
	var ColumnMergeElement_2 = ColumnMergeElement_1.MergedDataCellElement;
	var ColumnMergeElement_3 = ColumnMergeElement_1.ColumnMergeElement;

	var EditRequests = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditRequests.ts
	// 2019. 10. 01. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var GridEditRequest = /** @class */ (function (_super) {
	    __extends(GridEditRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridEditRequest(owner) {
	        var _this = _super.call(this) || this;
	        _this._grid = owner;
	        return _this;
	    }
	    GridEditRequest.prototype._doDispose = function () {
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridEditRequest.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return GridEditRequest;
	}(VisualTool_1.EditRequest));
	exports.GridEditRequest = GridEditRequest;
	var CellRequest = /** @class */ (function (_super) {
	    __extends(CellRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellRequest(index) {
	        var _this = _super.call(this, index.grid) || this;
	        _this._index = index;
	        return _this;
	    }
	    CellRequest.prototype._doDispose = function () {
	        this._index.dispose();
	        this._index = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellRequest.prototype, "index", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** index */
	        get: function () {
	            return this._index;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return CellRequest;
	}(GridEditRequest));
	exports.CellRequest = CellRequest;
	var SelectRequest = /** @class */ (function (_super) {
	    __extends(SelectRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectRequest(index, style) {
	        var _this = _super.call(this, index) || this;
	        _this._style = style;
	        return _this;
	    }
	    SelectRequest.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SelectRequest.prototype, "style", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** style */
	        get: function () {
	            return this._style;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(SelectRequest.prototype, "manager", {
	        /** manager */
	        get: function () {
	            return this.grid.selections;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return SelectRequest;
	}(CellRequest));
	exports.SelectRequest = SelectRequest;
	var ColumnResizeRequest = /** @class */ (function (_super) {
	    __extends(ColumnResizeRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnResizeRequest(grid) {
	        return _super.call(this, grid) || this;
	    }
	    ColumnResizeRequest.prototype._doDispose = function () {
	        this._layout = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnResizeRequest.prototype, "layout", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** layout */
	        get: function () {
	            return this._layout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnResizeRequest.prototype, "x", {
	        /** x */
	        get: function () {
	            return this._x;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnResizeRequest.prototype, "y", {
	        /** y */
	        get: function () {
	            return this._y;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnResizeRequest.prototype, "offset", {
	        /** offset */
	        get: function () {
	            return this._offset;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnResizeRequest.prototype.init = function (layout, x, y, offset) {
	        this._layout = layout;
	        this._x = x;
	        this._y = y;
	        this._offset = offset;
	        return this;
	    };
	    Object.defineProperty(ColumnResizeRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.Cursor.COL_RESIZE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return ColumnResizeRequest;
	}(GridEditRequest));
	exports.ColumnResizeRequest = ColumnResizeRequest;
	var ColumnMoveRequest = /** @class */ (function (_super) {
	    __extends(ColumnMoveRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMoveRequest(grid) {
	        return _super.call(this, grid) || this;
	    }
	    ColumnMoveRequest.prototype._doDispose = function () {
	        this._layout = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ColumnMoveRequest.prototype, "layout", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** layout */
	        get: function () {
	            return this._layout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMoveRequest.prototype, "x", {
	        /** x */
	        get: function () {
	            return this._x;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMoveRequest.prototype, "y", {
	        /** y */
	        get: function () {
	            return this._y;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ColumnMoveRequest.prototype, "offset", {
	        /** offset */
	        get: function () {
	            return this._offset;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ColumnMoveRequest.prototype.init = function (layout, x, y, offset) {
	        this._layout = layout instanceof CellLayout.ProxyCellLayoutItem ? layout.source : layout;
	        this._x = x;
	        this._y = y;
	        this._offset = offset;
	        return this;
	    };
	    Object.defineProperty(ColumnMoveRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.Cursor.DEFAULT;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return ColumnMoveRequest;
	}(GridEditRequest));
	exports.ColumnMoveRequest = ColumnMoveRequest;
	var RowResizeRequest = /** @class */ (function (_super) {
	    __extends(RowResizeRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowResizeRequest(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._itemIndex = -1;
	        _this._variable = false;
	        _this._rowTop = 0;
	        _this._offset = 0;
	        return _this;
	    }
	    RowResizeRequest.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowResizeRequest.prototype, "itemIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** itemIndex */
	        get: function () {
	            return this._itemIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowResizeRequest.prototype, "variable", {
	        /** variable */
	        get: function () {
	            return this._variable;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowResizeRequest.prototype, "rowTop", {
	        /** rowTop */
	        get: function () {
	            return this._rowTop;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowResizeRequest.prototype, "offset", {
	        /** offset */
	        get: function () {
	            return this._offset;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowResizeRequest.prototype.init = function (itemIndex, variable, rowTop, offset) {
	        this._itemIndex = itemIndex;
	        this._variable = variable;
	        this._rowTop = rowTop;
	        this._offset = offset;
	        return this;
	    };
	    Object.defineProperty(RowResizeRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.Cursor.ROW_RESIZE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowResizeRequest;
	}(GridEditRequest));
	exports.RowResizeRequest = RowResizeRequest;
	});

	unwrapExports(EditRequests);
	var EditRequests_1 = EditRequests.GridEditRequest;
	var EditRequests_2 = EditRequests.CellRequest;
	var EditRequests_3 = EditRequests.SelectRequest;
	var EditRequests_4 = EditRequests.ColumnResizeRequest;
	var EditRequests_5 = EditRequests.ColumnMoveRequest;
	var EditRequests_6 = EditRequests.RowResizeRequest;

	var EditTrackers = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditTrackers.ts
	// 2019. 12. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var GridDragTracker = /** @class */ (function (_super) {
	    __extends(GridDragTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridDragTracker(grid, name) {
	        var _this = _super.call(this, grid.container, name) || this;
	        _this._grid = grid;
	        return _this;
	    }
	    GridDragTracker.prototype._doDispose = function () {
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridDragTracker.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridDragTracker.prototype, "startWhenCreated", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return GridDragTracker;
	}(DragTracker_1.DragTracker));
	exports.GridDragTracker = GridDragTracker;
	var ColumnResizeTracker = /** @class */ (function (_super) {
	    __extends(ColumnResizeTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnResizeTracker(request, feedback) {
	        var _this = _super.call(this, request.layout.grid, "columnResizeTracker") || this;
	        _this._request = request;
	        _this._feedback = feedback;
	        var layout = request.layout;
	        _this._layoutX = (request.x + request.offset) - layout.cellWidth;
	        _this._offset = request.offset;
	        return _this;
	    }
	    ColumnResizeTracker.prototype._doDispose = function () {
	        this._request = null;
	        this._feedback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnResizeTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        //console.log("##### COLUMN RESIZE START...");
	        var lm = this.grid.layoutManager;
	        var y1 = lm.contentBounds.y;
	        var y2 = lm.contentBounds.bottom;
	        this._feedback.resize(2, y2 - y1);
	        this._feedback.move(x - this._offset, y1);
	        this.grid.addFeedbackElement(this._feedback);
	        return true;
	    };
	    ColumnResizeTracker.prototype._doDrag = function (eventTarget, x, y) {
	        //console.log("##### COLUMN RESIING..." + x + ", " + y);
	        var layout = this._request.layout;
	        var minWidth = this.grid.displayOptions.minColumnWidth;
	        var maxWidth = 1000000;
	        var curWidth = layout.cellWidth;
	        x -= this._offset;
	        if (x >= this._layoutX + minWidth && x < this._layoutX + maxWidth) {
	            this._feedback.x = x;
	            return true;
	        }
	        return false;
	        // if (d < 0 && maxWidth > -1 && x > maxWidth || d > 0 && minWidth >= Column.MIN_WIDTH && x <= minWidth) {
	        // 	if (d < 0) {
	        // 		if (curWidth < maxWidth) {
	        // 			x = maxWidth;
	        // 		} else {
	        // 			return;
	        // 		}
	        // 	} else {
	        // 		if (curWidth > minWidth) {
	        // 			x = minWidth;
	        // 		} else {
	        // 			return;
	        // 		}
	        // 	}
	        // }
	        // if (x >= 2) {
	        // 	var columnFitted = this.grid() && this.grid().layoutManager()._columnFitted;
	        // 	ColumnGroup.changeWidth(column, x - this._startWidth, false, Column.MIN_WIDTH, columnFitted);
	        // 	this._startWidth = x;
	        // }
	    };
	    ColumnResizeTracker.prototype._doEnded = function () {
	        var w = this._feedback.x - this._layoutX;
	        this.grid.removeFeedbackElement(this._feedback);
	        this._request.layout.changeCellWidth(w, this.grid.layoutManager.isColumnFitted);
	        this.grid.container.setCursor(Types.Cursor.DEFAULT);
	        //console.log("##### COLUMN RESIZE ENDED: " + w);
	    };
	    return ColumnResizeTracker;
	}(GridDragTracker));
	exports.ColumnResizeTracker = ColumnResizeTracker;
	var ColumnMoveTracker = /** @class */ (function (_super) {
	    __extends(ColumnMoveTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnMoveTracker(request, cellFeedback, feedback) {
	        var _this = _super.call(this, request.layout.grid, "columnMoveTracker") || this;
	        _this._timer = null;
	        _this._colLoop = 0;
	        _this._colPrevLoop = 0;
	        _this._interval = 0;
	        _this._request = request;
	        _this._layout = request.layout;
	        _this._cellFeedback = cellFeedback;
	        _this._feedback = feedback;
	        return _this;
	    }
	    ColumnMoveTracker.prototype._doDispose = function () {
	        this._request = null;
	        this._cellFeedback = null;
	        this._feedback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnMoveTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var p = this._layout.parent;
	        var r = lm.getHeaderCellRect(this._layout);
	        if (p.horizontal) {
	            this._offset = x - r.x;
	            this._feedback.setBounds(r.x, r.y, 7, r.height);
	        }
	        else {
	            this._offset = y - r.y;
	            this._feedback.setBounds(r.x, r.y, r.width, 7);
	        }
	        this._feedback.visible = false;
	        this._cellFeedback.setBounds(r.x, r.y, r.width, r.height);
	        this._cellFeedback.model = grid.header.getCell(this._layout);
	        this._cellFeedback.dragging = false;
	        grid.addFeedbackElement(this._cellFeedback);
	        grid.addFeedbackElement(this._feedback);
	        return true;
	    };
	    ColumnMoveTracker.prototype._doDrag = function (eventTarget, x, y) {
	        var grid = this.grid;
	        var layout = this._layout;
	        var p = layout.parent;
	        var lm = this.grid.layoutManager;
	        if (y < lm.contentBounds.y && grid.canGrouping()) {
	            return false;
	        }
	        if (x < lm.gridBounds.x || x > lm.clientRect.right) {
	            this.$_startTimer();
	        }
	        else {
	            this.$_stopTimer();
	            var target = lm.getHeaderCellAt(x, y);
	            // TODO: 임시로... 자식 이동 가능한 경우를 고려해야 한다.
	            if (!target.isRoot) {
	                target = target.root;
	            }
	            if (target && target.isRoot && !grid.canMoveToIndex(target.vindex)) {
	                target = null;
	            }
	            this.$_setTarget(target);
	            //this._cellFeedback.model = grid.header.getCell(this._layout);
	            this._cellFeedback.dragging = true;
	            if (p.horizontal) {
	                this._cellFeedback.x = x - this._offset;
	            }
	            else {
	                this._cellFeedback.y = y + this._offset;
	            }
	        }
	        return true;
	    };
	    ColumnMoveTracker.prototype._doCanceled = function () {
	        this.$_stopTimer();
	    };
	    ColumnMoveTracker.prototype._doCompleted = function () {
	        this.$_stopTimer();
	        if (this._target) {
	            this._layout.vindex = this._target.vindex;
	        }
	    };
	    ColumnMoveTracker.prototype._doEnded = function () {
	        this.$_stopTimer();
	        this.grid.removeFeedbackElement(this._feedback);
	        this.grid.removeFeedbackElement(this._cellFeedback);
	    };
	    ColumnMoveTracker.prototype.getNextRequest = function (x, y) {
	        return this.grid.activeTool.getNextRequest(this._request, this._cellFeedback, x, y);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnMoveTracker.prototype.$_startTimer = function () {
	        if (!this._timer) {
	            this._colLoop = this._colPrevLoop = 0;
	            this._timer = setInterval(this.$_timerHandler.bind(this), 60);
	        }
	    };
	    ColumnMoveTracker.prototype.$_stopTimer = function () {
	        if (this._timer) {
	            clearInterval(this._timer);
	            this._timer = null;
	        }
	    };
	    ColumnMoveTracker.prototype.$_timerHandler = function () {
	        var grid = this._grid;
	        var x = this.currentX;
	        var lm = grid.layoutManager;
	        var cx = 0;
	        if (x > lm.clientRect.right) {
	            cx = Math.max(0, Math.min(3, (x - lm.clientRect.right) / 40));
	            this._interval = 4 - cx;
	            this._colLoop++;
	        }
	        else if (x < lm.gridBounds.x) {
	            cx = Math.max(0, Math.min(3, (lm.gridBounds.x - x) / 40));
	            this._interval = 4 - cx;
	            this._colLoop++;
	        }
	        if (cx > 0) {
	            this._interval = 4 - cx;
	        }
	        if (this._colLoop - this._colPrevLoop >= this._interval * 2) {
	            this._colPrevLoop = this._colLoop;
	            if (x > lm.clientRect.right) {
	                grid.leftCell += 1;
	            }
	            else if (x < lm.gridBounds.left && grid.leftPos > 0) {
	                grid.leftCell -= 1;
	            }
	        }
	        this.$_setTarget(null);
	    };
	    ColumnMoveTracker.prototype.$_setTarget = function (target) {
	        var layout = this._request.layout;
	        var p = layout.parent;
	        var feedback = this._feedback;
	        var css = feedback["_dom"].style;
	        var lm = this.grid.layoutManager;
	        var x = this.currentX;
	        var y = this.currentY;
	        this._target = target;
	        if (target != null && target.parent === p && target !== layout) {
	            var r = lm.getHeaderCellRect(target, true);
	            var c = layout.hcol;
	            feedback.visible = true;
	            if (p.horizontal) {
	                css.height = r.height + "px";
	                if (target.hcol < c) {
	                    css.borderRight = "none";
	                    css.borderLeft = "";
	                    feedback.x = r.x;
	                }
	                else if (target.hcol > c) {
	                    css.borderLeft = "none";
	                    css.borderRight = "";
	                    feedback.x = r.right - feedback.width;
	                }
	                this.grid.makeLayoutVisible(target);
	            }
	            else {
	                css.width = r.width + "px";
	                feedback.y = y + this._offset;
	            }
	        }
	        else {
	            feedback.visible = false;
	        }
	    };
	    return ColumnMoveTracker;
	}(GridDragTracker));
	exports.ColumnMoveTracker = ColumnMoveTracker;
	var RowResizeTracker = /** @class */ (function (_super) {
	    __extends(RowResizeTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowResizeTracker(request, feedback) {
	        var _this = _super.call(this, request.grid, "columnResizeTracker") || this;
	        _this._request = request;
	        _this._feedback = feedback;
	        return _this;
	    }
	    RowResizeTracker.prototype._doDispose = function () {
	        this._request = null;
	        this._feedback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowResizeTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        //console.log("##### ROW RESIZE START...");
	        var lm = this.grid.layoutManager;
	        var x1 = lm.leftContentBounds.x;
	        var x2 = lm.rightContentBounds.right;
	        this._feedback.resize(x2 - x1, 2);
	        this._feedback.move(x1, y - this._request.offset);
	        this.grid.addFeedbackElement(this._feedback);
	        return true;
	    };
	    RowResizeTracker.prototype._doDrag = function (eventTarget, x, y) {
	        var h = y - this._request.offset - this._request.rowTop;
	        if (h >= this.grid.displayOptions.minRowHeight) {
	            this._feedback.y = y - this._request.offset;
	            // if (this._request.variable) {
	            //     this.grid.setRowHeight(this._request.itemIndex, h);
	            // } else {
	            //     this.grid.displayOptions.rowHeight = h;
	            // }
	            return true;
	        }
	        return false;
	    };
	    RowResizeTracker.prototype._doCompleted = function (eventTarget, x, y) {
	        var h = Math.max(this.grid.displayOptions.minRowHeight, y - this._request.offset - this._request.rowTop);
	        if (this._request.variable) {
	            this.grid.setRowHeight(this._request.itemIndex, h);
	        }
	        else {
	            this.grid.displayOptions.rowHeight = h;
	        }
	    };
	    RowResizeTracker.prototype._doEnded = function () {
	        this.grid.removeFeedbackElement(this._feedback);
	    };
	    return RowResizeTracker;
	}(GridDragTracker));
	exports.RowResizeTracker = RowResizeTracker;
	});

	unwrapExports(EditTrackers);
	var EditTrackers_1 = EditTrackers.GridDragTracker;
	var EditTrackers_2 = EditTrackers.ColumnResizeTracker;
	var EditTrackers_3 = EditTrackers.ColumnMoveTracker;
	var EditTrackers_4 = EditTrackers.RowResizeTracker;

	var SelectTracker_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridTool.ts
	// 2019. 08. 08. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var SelectTracker = /** @class */ (function (_super) {
	    __extends(SelectTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function SelectTracker(request, name, x, y) {
	        var _this = _super.call(this, request.index.grid, name) || this;
	        _this._request = request;
	        _this._currX = x;
	        _this._currY = y;
	        return _this;
	    }
	    SelectTracker.prototype._doDispose = function () {
	        this._request.dispose();
	        this._request = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(SelectTracker.prototype, "startWhenCreated", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            // if (this._request.cell() instanceof GroupFooterCellElement ||
	            // 	this._request.cell() instanceof RowGroupHeaderCellElement) {
	            // 	return false;
	            // } else {
	            // 	return true;
	            // }
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SelectTracker.prototype._doEnded = function () {
	        var item = this._getItem();
	    };
	    return SelectTracker;
	}(EditTrackers.GridDragTracker));
	exports.SelectTracker = SelectTracker;
	var BlockSelectTracker = /** @class */ (function (_super) {
	    __extends(BlockSelectTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function BlockSelectTracker(request, x, y) {
	        var _this = _super.call(this, request, "blockSelectTracker", x, y) || this;
	        _this._timer = null;
	        _this._rowPrevLoop = 0;
	        _this._rowLoop = 0;
	        _this._colPrevLoop = 0;
	        _this._colLoop = 0;
	        _this._interval = 0;
	        return _this;
	    }
	    BlockSelectTracker.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    BlockSelectTracker.prototype._getItem = function () {
	        return this._item;
	    };
	    BlockSelectTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var manager = grid.selections;
	        var lm = grid.layoutManager;
	        var idx = this._request.index;
	        if (lm.isMergedCell(idx)) {
	            idx = grid.pointToIndex(eventTarget, x, y, true);
	        }
	        manager.itemStyle = Selections.SelectionStyle.BLOCK;
	        if (shift) {
	            this._item = manager.count > 0 && manager.getItem(0);
	        }
	        else {
	            manager.clear();
	            this._item = manager.add(idx, idx, Selections.SelectionStyle.BLOCK);
	        }
	        return Boolean(this._item);
	    };
	    BlockSelectTracker.prototype._doDrag = function (eventTarget, x, y) {
	        if (this._item) {
	            var grid = this.grid;
	            var lm = grid.layoutManager;
	            this._currX = x; // = grid.containerToGridX(x);
	            this._currY = y; // = grid.containerToGridY(y);
	            if (y > lm.footerBounds.y || y < lm.gridBounds.y || x < lm.gridBounds.x || x > lm.clientRect.right) {
	                this.$_startTimer();
	            }
	            else {
	                this.$_stopTimer();
	                var index = this.grid.pointToIndex(eventTarget, x, y, true);
	                // const index = this.grid.cellToIndex(eventTarget);
	                if (index.column && index.itemIndex >= 0) {
	                    this._item.resizeTo(index);
	                }
	            }
	            return true;
	        }
	        return false;
	    };
	    BlockSelectTracker.prototype._doEnded = function () {
	        this.$_stopTimer();
	        _super.prototype._doEnded.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    BlockSelectTracker.prototype.$_startTimer = function () {
	        if (!this._timer) {
	            this._rowLoop = this._rowPrevLoop = this._colLoop = this._colPrevLoop = 0;
	            this._timer = setInterval(this.$_timerHandler.bind(this), 30);
	            this._grid.selections.lock();
	        }
	    };
	    BlockSelectTracker.prototype.$_stopTimer = function () {
	        if (this._timer) {
	            clearInterval(this._timer);
	            this._timer = null;
	            this._grid.selections.unlock();
	        }
	    };
	    BlockSelectTracker.prototype.$_timerHandler = function () {
	        var grid = this._grid;
	        var x = this._currX;
	        var y = this._currY;
	        var lm = grid.layoutManager;
	        var cx = 0;
	        var cy = 0;
	        if (y > lm.footerBounds.y) {
	            cy = Math.max(0, Math.min(3, (y - lm.footerBounds.y) / 40));
	            this._interval = 4 - cy;
	            this._rowLoop++;
	        }
	        else if (y < lm.gridBounds.y) {
	            cy = Math.max(0, Math.min(3, (lm.gridBounds.y - y) / 40));
	            this._interval = 4 - cy;
	            this._rowLoop++;
	        }
	        if (x > lm.clientRect.right) {
	            cx = Math.max(0, Math.min(3, (x - lm.clientRect.right) / 40));
	            this._interval = 4 - cx;
	            this._colLoop++;
	        }
	        else if (x < lm.gridBounds.x) {
	            cx = Math.max(0, Math.min(3, (lm.gridBounds.x - x) / 40));
	            this._interval = 4 - cx;
	            this._colLoop++;
	        }
	        var scrolled = false;
	        var cnt = Math.max(cx, cy);
	        if (cnt > 0) {
	            this._interval = 4 - Math.max(cx, cy);
	        }
	        if (this._rowLoop - this._rowPrevLoop >= this._interval) {
	            this._rowPrevLoop = this._rowLoop;
	            if (y > lm.footerBounds.y) {
	                if (grid.topItem + lm.fullItemCount < grid.itemCount) {
	                    grid.topIndex = grid.topIndex + 1;
	                    scrolled = true;
	                }
	            }
	            else if (y < lm.gridBounds.y) {
	                if (grid.topItem > lm.fixedItemCount) {
	                    grid.topIndex = grid.topIndex - 1;
	                    scrolled = true;
	                }
	            }
	        }
	        if (!scrolled) {
	            if (this._colLoop - this._colPrevLoop >= this._interval * 2) {
	                this._colPrevLoop = this._colLoop;
	                if (x > lm.clientRect.right) {
	                    grid.leftLayout = grid.leftLayout + 1;
	                    scrolled = true;
	                }
	                else if (x < lm.gridBounds.left && grid.leftPos > 0) {
	                    grid.leftLayout = grid.leftLayout - 1;
	                    scrolled = true;
	                }
	            }
	        }
	        if (scrolled) {
	            var index = grid.pointToIndex(null, x, y, false);
	            if (index.column) {
	                index.itemIndex = Math.min(Math.max(0, index.itemIndex, grid.topIndex), grid.itemCount - 1);
	                this._item.resizeTo(index);
	            }
	        }
	    };
	    return BlockSelectTracker;
	}(SelectTracker));
	exports.BlockSelectTracker = BlockSelectTracker;
	var RowsSelectTracker = /** @class */ (function (_super) {
	    __extends(RowsSelectTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowsSelectTracker(request, x, y) {
	        var _this = _super.call(this, request, "rowsSelectTracker", x, y) || this;
	        _this._timer = null;
	        _this._prevLoop = 0;
	        _this._loop = 0;
	        _this._colPrevLoop = 0;
	        _this._colLoop = 0;
	        _this._interval = 0;
	        return _this;
	    }
	    RowsSelectTracker.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowsSelectTracker.prototype._getItem = function () {
	        return this._item;
	    };
	    RowsSelectTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var manager = grid.selections;
	        var lm = grid.layoutManager;
	        var idx = this._request.index;
	        if (lm.isMergedCell(idx)) {
	            idx = grid.pointToIndex(eventTarget, x, y, true);
	        }
	        manager.itemStyle = Selections.SelectionStyle.ROWS;
	        if (shift) {
	            this._item = manager.count > 0 && manager.getItem(0);
	        }
	        else {
	            manager.clear();
	            this._item = manager.add(idx, idx, Selections.SelectionStyle.ROWS);
	        }
	        return Boolean(this._item);
	    };
	    RowsSelectTracker.prototype._doDrag = function (eventTarget, x, y) {
	        if (this._item) {
	            var grid = this.grid;
	            var lm = grid.layoutManager;
	            this._currX = x; // = grid.containerToGridX(x);
	            this._currY = y; // = grid.containerToGridY(y);
	            if (y > lm.footerBounds.y || y < lm.gridBounds.y || x < 0 || x > lm.clientRect.right) {
	                this.$_startTimer();
	            }
	            else {
	                this.$_stopTimer();
	                var index = this.grid.pointToIndex(eventTarget, x, y, false);
	                if (index.itemIndex >= 0) {
	                    this._item.resizeTo(index);
	                }
	            }
	            return true;
	        }
	        return false;
	    };
	    RowsSelectTracker.prototype._doEnded = function () {
	        this.$_stopTimer();
	        _super.prototype._doEnded.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowsSelectTracker.prototype.$_startTimer = function () {
	        if (!this._timer) {
	            this._loop = this._prevLoop = this._colLoop = this._colPrevLoop = 0;
	            this._interval = 1;
	            this._timer = setInterval(this.$_timerHandler.bind(this), 30);
	            this._grid.selections.lock();
	        }
	    };
	    RowsSelectTracker.prototype.$_stopTimer = function () {
	        if (this._timer) {
	            clearInterval(this._timer);
	            this._timer = null;
	            this._grid.selections.unlock();
	        }
	    };
	    RowsSelectTracker.prototype.$_timerHandler = function () {
	        var grid = this._grid;
	        var x = this._currX;
	        var y = this._currY;
	        var lm = grid.layoutManager;
	        var cnt;
	        if (y > lm.footerBounds.y) {
	            cnt = Math.max(0, Math.min(3, (y - lm.footerBounds.y) / 40));
	            this._interval = 4 - cnt;
	            this._loop++;
	        }
	        else if (y < lm.gridBounds.y) {
	            cnt = Math.max(0, Math.min(3, (lm.gridBounds.y - y) / 40));
	            this._interval = 4 - cnt;
	            this._loop++;
	        }
	        if (this._loop - this._prevLoop >= this._interval) {
	            this._prevLoop = this._loop;
	            if (y > lm.footerBounds.y) {
	                grid.topIndex = grid.topIndex + 1;
	            }
	            else if (y < lm.gridBounds.y) {
	                grid.topIndex = grid.topIndex - 1;
	            }
	            var index = grid.pointToIndex(null, this._currX, this._currY, false); // 이 함수가 한 칸씩 밀어준다.
	            index.itemIndex = Math.min(Math.max(0, index.itemIndex, grid.topIndex), grid.itemCount - 1);
	            this._item.resizeTo(index);
	        }
	        else {
	            if (x > lm.clientRect.right) {
	                cnt = Math.max(0, Math.min(3, (x - lm.clientRect.right) / 40));
	                this._interval = 4 - cnt;
	                this._colLoop++;
	            }
	            else if (x < 0) {
	                cnt = Math.max(0, Math.min(3, (lm.gridBounds.x - x) / 40));
	                this._interval = 4 - cnt;
	                this._colLoop++;
	            }
	            if (this._colLoop - this._colPrevLoop >= this._interval * 2) {
	                this._colPrevLoop = this._colLoop;
	                if (x > lm.clientRect.right) {
	                    grid.leftLayout = grid.leftLayout + 1;
	                }
	                else if (x < lm.gridBounds.x && grid.leftPos > 0) {
	                    grid.leftLayout = grid.leftLayout - 1;
	                }
	                var index = grid.pointToIndex(null, this._currX, this._currY, false);
	                if (index.itemIndex >= 0) {
	                    index.itemIndex = Math.min(Math.max(0, index.itemIndex, grid.topIndex), grid.itemCount - 1);
	                    this._item.resizeTo(index);
	                }
	            }
	        }
	    };
	    return RowsSelectTracker;
	}(SelectTracker));
	exports.RowsSelectTracker = RowsSelectTracker;
	var ColumnsSelectTracker = /** @class */ (function (_super) {
	    __extends(ColumnsSelectTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ColumnsSelectTracker(request, x, y) {
	        var _this = _super.call(this, request, "columnsSelectTracker", x, y) || this;
	        _this._timer = null;
	        _this._prevLoop = 0;
	        _this._loop = 0;
	        _this._rowPrevLoop = 0;
	        _this._rowLoop = 0;
	        _this._interval = 0;
	        return _this;
	    }
	    ColumnsSelectTracker.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    ColumnsSelectTracker.prototype._getItem = function () {
	        return this._item;
	    };
	    ColumnsSelectTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var manager = grid.selections;
	        var lm = grid.layoutManager;
	        var idx = this._request.index;
	        if (lm.isMergedCell(idx)) {
	            idx = grid.pointToIndex(eventTarget, x, y, true);
	        }
	        manager.itemStyle = Selections.SelectionStyle.ROWS;
	        if (shift) {
	            this._item = manager.count > 0 && manager.getItem(0);
	        }
	        else {
	            manager.clear();
	            this._item = manager.add(idx, idx, Selections.SelectionStyle.COLUMNS);
	        }
	        return Boolean(this._item);
	    };
	    ColumnsSelectTracker.prototype._doDrag = function (eventTarget, x, y) {
	        if (this._item) {
	            var grid = this.grid;
	            var lm = grid.layoutManager;
	            this._currX = x; // = grid.containerToGridX(x);
	            this._currY = y; // = grid.containerToGridY(y);
	            if (x < lm.gridBounds.x || x > lm.clientRect.right || y > lm.footerBounds.y || y < 0) {
	                this.$_startTimer();
	            }
	            else {
	                this.$_stopTimer();
	                var index = this.grid.pointToIndex(eventTarget, x, y, false);
	                if (index.column != null) {
	                    this._item.resizeTo(index);
	                }
	            }
	            return true;
	        }
	        return false;
	    };
	    ColumnsSelectTracker.prototype._doEnded = function () {
	        this.$_stopTimer();
	        _super.prototype._doEnded.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ColumnsSelectTracker.prototype.$_startTimer = function () {
	        if (!this._timer) {
	            this._loop = this._prevLoop = this._rowLoop = this._rowPrevLoop = 0;
	            this._interval = 1;
	            this._timer = setInterval(this.$_timerHandler.bind(this), 30);
	            this._grid.selections.lock();
	        }
	    };
	    ColumnsSelectTracker.prototype.$_stopTimer = function () {
	        if (this._timer) {
	            clearInterval(this._timer);
	            this._timer = null;
	            this._grid.selections.unlock();
	        }
	    };
	    ColumnsSelectTracker.prototype.$_timerHandler = function () {
	        var grid = this._grid;
	        var x = this._currX;
	        var y = this._currY;
	        var lm = grid.layoutManager;
	        var cnt;
	        if (x > lm.clientRect.right) {
	            cnt = Math.max(0, Math.min(3, (x - lm.clientRect.right) / 40));
	            this._interval = 4 - cnt;
	            this._loop++;
	        }
	        else if (x < lm.gridBounds.x) {
	            cnt = Math.max(0, Math.min(3, (lm.gridBounds.x - x) / 40));
	            this._interval = 4 - cnt;
	            this._loop++;
	        }
	        if (this._loop - this._prevLoop >= this._interval * 2) {
	            this._prevLoop = this._loop;
	            if (x > lm.clientRect.right) {
	                grid.leftLayout = grid.leftLayout + 1;
	            }
	            else if (x < lm.gridBounds.x && grid.leftPos > 0) {
	                grid.leftLayout = grid.leftLayout - 1;
	            }
	            var index = grid.pointToIndex(null, this._currX, this._currY, false);
	            if (index.column) {
	                this._item.resizeTo(index);
	            }
	        }
	        else {
	            if (y > lm.footerBounds.y) {
	                cnt = Math.max(0, Math.min(3, (y - lm.footerBounds.y) / 40));
	                this._interval = 4 - cnt;
	                this._rowLoop++;
	            }
	            else if (y < 0) {
	                cnt = Math.max(0, Math.min(3, (lm.gridBounds.y - y) / 40));
	                this._interval = 4 - cnt;
	                this._rowLoop++;
	            }
	            if (this._rowLoop - this._rowPrevLoop >= this._interval) {
	                this._rowPrevLoop = this._rowLoop;
	                if (y > lm.footerBounds.y) {
	                    grid.topIndex = grid.topIndex + 1;
	                }
	                else if (y < lm.gridBounds.y) {
	                    grid.topIndex = grid.topIndex - 1;
	                }
	                var index = grid.pointToIndex(null, this._currX, this._currY, false);
	                if (index.column) {
	                    this._item.resizeTo(index);
	                }
	            }
	        }
	    };
	    return ColumnsSelectTracker;
	}(SelectTracker));
	exports.ColumnsSelectTracker = ColumnsSelectTracker;
	});

	unwrapExports(SelectTracker_1);
	var SelectTracker_2 = SelectTracker_1.SelectTracker;
	var SelectTracker_3 = SelectTracker_1.BlockSelectTracker;
	var SelectTracker_4 = SelectTracker_1.RowsSelectTracker;
	var SelectTracker_5 = SelectTracker_1.ColumnsSelectTracker;

	var Tooltip = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Tooltip.ts
	// 2020. 01. 10. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var TooltipOptions = /** @class */ (function (_super) {
	    __extends(TooltipOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TooltipOptions(source) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        source && _this.assignFrom(source);
	        return _this;
	    }
	    TooltipOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TooltipOptions.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            this._visible = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TooltipOptions.prototype, "message", {
	        /** message */
	        get: function () {
	            return this._message;
	        },
	        set: function (value) {
	            this._message = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TooltipOptions.prototype.assignFrom = function (source) {
	        if (typeof source === "string") {
	            this._message = source;
	            if (this._message) {
	                this._visible = true;
	            }
	        }
	        else if (typeof source == "boolean") {
	            this._visible = source;
	        }
	        else if (source) {
	            _super.prototype.assignFrom.call(this, source);
	        }
	    };
	    return TooltipOptions;
	}(Base_1.Base));
	exports.TooltipOptions = TooltipOptions;
	var ToolTipView = /** @class */ (function (_super) {
	    __extends(ToolTipView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ToolTipView(container) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minWidth = 0;
	        _this._maxWidth = 0;
	        _this._dropDownCount = 8;
	        _this._showing = false;
	        _this._container = container;
	        _this._element = _this.$_createElement();
	        return _this;
	    }
	    ToolTipView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ToolTipView.prototype, "minWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minWidth */
	        get: function () {
	            return this._minWidth;
	        },
	        set: function (value) {
	            this._minWidth = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToolTipView.prototype, "maxWidth", {
	        /** maxWidth */
	        get: function () {
	            return this._maxWidth;
	        },
	        set: function (value) {
	            this._maxWidth = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ToolTipView.prototype, "dropDownCount", {
	        /** dropDownCount */
	        get: function () {
	            return this._dropDownCount;
	        },
	        set: function (value) {
	            this._dropDownCount = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ToolTipView.prototype.show = function (options, x, y, bHeader) {
	        this._showing = true;
	        try {
	            this.$_show(options, x, y, bHeader);
	        }
	        finally {
	            this._showing = false;
	        }
	    };
	    ToolTipView.prototype.hide = function () {
	        var elt = this._element;
	        if (!elt || !elt.parentNode) {
	            return;
	        }
	        this._container["_container"].removeChild(elt);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ToolTipView.prototype.$_createElement = function () {
	        var element = document.createElement("div");
	        element.onkeydown = function (e) {
	            if (e.keyCode == 27) {
	                this.hide();
	            }
	        }.bind(this);
	        if (Utils_1.Utils.isMobile()) {
	            element.addEventListener("touchend", this.$_touchendHandler.bind(this), false);
	        }
	        this.$_disableSelection(element);
	        this._span = document.createElement("span");
	        element.appendChild(this._span);
	        this.$_disableSelection(this._span);
	        return element;
	    };
	    ToolTipView.prototype.$_touchendHandler = function (event) {
	        event.preventDefault();
	        this.hide();
	    };
	    ToolTipView.prototype.$_disableSelection = function (element) {
	        if (typeof element.onselectstart !== 'undefined') {
	            element.onselectstart = function () { return false; };
	        }
	        else if (typeof element.style["MozUserSelect"] !== 'undefined') {
	            element.style["MozUserSelect"] = 'none';
	        }
	        else {
	            element.onmousedown = function () {
	                return false;
	            };
	        }
	    };
	    ToolTipView.prototype.$_show = function (options, x, y, bHeader) {
	        //const grid = this._container.gridView;
	        var elt = this._element;
	        var s = options.message;
	        if (!elt || !s) {
	            return;
	        }
	        var span = this._span;
	        span.innerHTML = s.replace(/\n/g, "<br>");
	        Utils_1.Utils.setClassName(elt, "rg-tooltip");
	        var css = elt.style;
	        css.position = "absolute";
	        css.left = x + "px";
	        css.top = y + "px";
	        css.overflow = "hidden";
	        css.zIndex = "3000";
	        this._container["_container"].appendChild(elt);
	        var cr = elt.getBoundingClientRect();
	        var pr = this._container["_container"].getBoundingClientRect();
	        css.left = cr.right > pr.right ? Math.max((pr.right - cr.width - pr.left - 2), 0) + "px" : elt.style.left;
	        if (cr.bottom > pr.bottom) {
	            if (bHeader) {
	                elt.style.top = Math.max(0, y - (cr.bottom - pr.bottom)) + "px";
	            }
	            else {
	                //elt.style.top = Math.max(y - cr.height - grid.layoutManager.$_calcItemHeight(grid, grid.delegate, 0), 0) + "px";
	                //elt.style.top = Math.max(y - cr.height - 23, 0) + "px";
	                elt.style.top = Math.max(y - cr.height - pr.bottom, 0) + "px";
	            }
	        }
	        css.visibility = "visible";
	    };
	    return ToolTipView;
	}(Base_1.Base));
	exports.ToolTipView = ToolTipView;
	var TooltipManager = /** @class */ (function (_super) {
	    __extends(TooltipManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TooltipManager(grid) {
	        var _this = _super.call(this) || this;
	        _this._active = false;
	        _this._pos = new Point_1.Point();
	        _this._container = grid.container;
	        return _this;
	    }
	    TooltipManager.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TooltipManager.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._active;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TooltipManager.prototype.show = function (options, x, y, bHeader) {
	        if (!this._active) {
	            this.close();
	            options = options instanceof TooltipOptions ? options : options ? new TooltipOptions(options) : null;
	            if (options && options.visible) {
	                if (!this._tipView) {
	                    this._tipView = new ToolTipView(this._container);
	                }
	                this._tipView.show(options, x, y, bHeader);
	                var grid = this._container.gridView;
	                if (grid) {
	                    this._pos.set(grid.mouseX, grid.mouseY);
	                }
	                this._active = true;
	                return true;
	            }
	        }
	        return false;
	    };
	    TooltipManager.prototype.close = function (x, y) {
	        if (this._active && x !== undefined) {
	            var p = this._pos;
	            if (Math.abs(p.x - x) < 4 && Math.abs(p.y - y) < 4) {
	                return false;
	            }
	        }
	        this._timer && clearTimeout(this._timer);
	        if (this._active) {
	            this._tipView && this._tipView.hide();
	            this._active = false;
	            return true;
	        }
	        return false;
	    };
	    return TooltipManager;
	}(Base_1.Base));
	exports.TooltipManager = TooltipManager;
	});

	unwrapExports(Tooltip);
	var Tooltip_1 = Tooltip.TooltipOptions;
	var Tooltip_2 = Tooltip.ToolTipView;
	var Tooltip_3 = Tooltip.TooltipManager;

	var GridTool_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridTool.ts
	// 2019. 08. 08. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





















	var FocusView = /** @class */ (function (_super) {
	    __extends(FocusView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FocusView(inner) {
	        var _this = _super.call(this, "focusView") || this;
	        _this._editing = false;
	        _this._buttonWidth = 0;
	        _this._isLeftImageButton = false;
	        _this._inner = inner;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FocusView.prototype.setEditing = function (editing, buttonWidth, isLeftImageButton) {
	        if (editing != this._editing) {
	            this._editing = editing;
	            this._buttonWidth = buttonWidth;
	            this._isLeftImageButton = isLeftImageButton;
	            this.resetClassName();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FocusView.prototype._getCssSelector = function () {
	        return this._inner ? "rg-focus-inner" : this._editing ? "rg-focus-editing" : "rg-focus";
	    };
	    FocusView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	        this.setImportantStyle("background", "none");
	    };
	    return FocusView;
	}(VisualElement_1.LayerElement));
	exports.FocusView = FocusView;
	var FocusMask = /** @class */ (function (_super) {
	    __extends(FocusMask, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FocusMask(inner) {
	        if (inner === void 0) { inner = false; }
	        var _this = _super.call(this, "focusMask") || this;
	        _this._focusView = new FocusView(inner);
	        _this.addChild(_this._focusView);
	        return _this;
	    }
	    FocusMask.prototype._doDispose = function () {
	        this._focusView && this._focusView.dispose();
	        this._focusView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FocusMask.prototype.updateElement = function (dx, dy, width, height, editing) {
	        this._focusView.setBounds(dx, 0, width, height);
	        this._focusView.setEditing(editing, 0, false);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FocusMask.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	        this.setImportantStyle("background", "none");
	        this.setImportantStyle("border", "none");
	        this.setImportantStyle("overflow", "hidden");
	    };
	    return FocusMask;
	}(VisualElement_1.LayerElement));
	var RowBlockView = /** @class */ (function (_super) {
	    __extends(RowBlockView, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowBlockView() {
	        var _this = _super.call(this, "rowBlockView") || this;
	        _this.visible = false;
	        return _this;
	    }
	    RowBlockView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowBlockView.prototype._getCssSelector = function () {
	        return "rg-rowblock";
	    };
	    RowBlockView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	    };
	    return RowBlockView;
	}(VisualElement_1.LayerElement));
	exports.RowBlockView = RowBlockView;
	var HeaderCellResizer = /** @class */ (function (_super) {
	    __extends(HeaderCellResizer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderCellResizer() {
	        return _super.call(this, "headerCellResizer") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderCellResizer.prototype._getCssSelector = function () {
	        return "_rg-col-resizer_";
	    };
	    HeaderCellResizer.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        //this.setImportantStyle("pointer-events", "none");
	        //this.setImportantStyle("background", "none");
	    };
	    return HeaderCellResizer;
	}(VisualElement_1.LayerElement));
	exports.HeaderCellResizer = HeaderCellResizer;
	var HeaderCellFeedback = /** @class */ (function (_super) {
	    __extends(HeaderCellFeedback, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderCellFeedback() {
	        var _this = _super.call(this, "headerCellFeedback") || this;
	        _this.dragging = false;
	        return _this;
	    }
	    HeaderCellFeedback.prototype._doDispose = function () {
	        this._model = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(HeaderCellFeedback.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        set: function (value) {
	            this._model = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderCellFeedback.prototype._getCssSelector = function () {
	        return "rg-header rg-header-cell _rg-header-cell-feedback_";
	    };
	    HeaderCellFeedback.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	    };
	    HeaderCellFeedback.prototype._doDraw = function (dom) {
	        if (!this.dragging) {
	            HeaderElement_1.HeaderElement.renderCell(this._model, dom);
	        }
	    };
	    return HeaderCellFeedback;
	}(VisualElement_1.LayerElement));
	exports.HeaderCellFeedback = HeaderCellFeedback;
	var HeaderCellMover = /** @class */ (function (_super) {
	    __extends(HeaderCellMover, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderCellMover() {
	        return _super.call(this, "headerCellMover") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderCellMover.prototype._getCssSelector = function () {
	        return "_rg-header-cell-mover_";
	    };
	    HeaderCellMover.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	    };
	    HeaderCellMover.prototype._doDraw = function (dom) {
	    };
	    return HeaderCellMover;
	}(VisualElement_1.LayerElement));
	exports.HeaderCellMover = HeaderCellMover;
	var GridTool = /** @class */ (function (_super) {
	    __extends(GridTool, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridTool(owner, name) {
	        var _this = _super.call(this, owner, name) || this;
	        _this._focusMask = new FocusMask();
	        _this._innerFocusMask = new FocusMask(true);
	        _this._rowFocusView = new RowFocusView();
	        _this._rowBlockMask = new RowBlockView();
	        _this._rowBlockStart = -1;
	        _this._rowBlockEnd = -1;
	        var grid = _this._grid = owner.gridView;
	        _this._skipIndex = grid.getIndex();
	        grid.addFeedbackElement(_this._rowBlockMask);
	        grid.addFeedbackElement(_this._rowFocusView);
	        grid.addFeedbackElement(_this._focusMask);
	        grid.addFeedbackElement(_this._innerFocusMask);
	        return _this;
	    }
	    GridTool.prototype._doDispose = function () {
	        //this.grid.removeFeedbackElement(this._focusView);
	        this._skipIndex && this._skipIndex.dispose();
	        this._skipIndex = null;
	        this._focusMask = this._focusMask.dispose();
	        this._innerFocusMask = this._innerFocusMask.dispose();
	        this._rowFocusView && this._rowFocusView.dispose();
	        this._rowFocusView = null;
	        this._rowBlockMask && this._rowBlockMask.dispose();
	        this._rowBlockMask = null;
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridTool.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridTool.prototype, "focused", {
	        /** focused */
	        get: function () {
	            return this._grid.focusedIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridTool.prototype.setFocused = function (value, select) {
	        var grid = this._grid;
	        if (grid.isValid(value)) {
	            //const item = grid.getItem(value.itemIndex);
	            // if (!grid.isEditing() && item instanceof DummyEditItem) {
	            // 	grid.append();
	            // }
	            return this._grid.setFocusedIndex(value, select, true);
	        }
	    };
	    GridTool.prototype.layoutChanged = function () {
	        this.$_resetFocusedView();
	        this.$_resetRowBlockMask();
	        this._doLayoutChanged();
	    };
	    GridTool.prototype.resetFocused = function () {
	        this.$_resetFocusedView();
	    };
	    GridTool.prototype.focusedIndexChanging = function (newIndex) {
	    };
	    GridTool.prototype.focusedIndexChanged = function (oldIndex, newIndex) {
	        this.$_resetFocusedView();
	    };
	    GridTool.prototype.currentRowChanged = function (oldRow, row) {
	        //console.log("CURRENT ROW CHANGED: " + oldRow  + " => " + row);
	        var grid = this.grid;
	        var options = grid.displayOptions;
	        this._rowBlockStart = -1;
	        this._rowBlockEnd = -1;
	        if (options.rowBlockType != Types.RowMaskType.NONE) {
	            var cb = options.rowBlockCallback;
	            if (cb) {
	                var rslt = null;
	                if (rslt = cb(grid, row)) {
	                    this._rowBlockStart = rslt.start;
	                    this._rowBlockEnd = rslt.end;
	                }
	                else {
	                    this._rowBlockStart = this._rowBlockEnd = -1;
	                }
	            }
	        }
	        this.$_resetRowBlockMask();
	    };
	    GridTool.prototype.getNextRequest = function (request, hint, x, y) {
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridTool.prototype.isMouseEventTarget = function (elt) {
	        if (elt instanceof CellElement_1.CellElement) {
	            var table = elt.getAncestor(TableBaseElement_1.TableBaseElement);
	            if (table) {
	                var dom = table["getContentAt"](elt.index);
	                return dom == this.mouseEventTarget;
	            }
	        }
	        return _super.prototype.isMouseEventTarget.call(this, elt);
	    };
	    GridTool.prototype._doSetFocus = function (target) {
	        this.grid.editController.setFocus(true, target);
	    };
	    GridTool.prototype._doFocusLeave = function () {
	        if (this.grid.editOptions.commitWhenLeave) {
	            this.grid.itemSource.commit();
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridTool.prototype._findTableCell = function (source) {
	        var elt = source || this.mouseEventTarget;
	        while (elt && !(elt instanceof HTMLTableCellElement)) {
	            elt = elt.parentElement;
	        }
	        if (elt instanceof HTMLTableCellElement) {
	            if (this.grid.getTableView(elt)) {
	                return elt;
	            }
	        }
	        return null;
	    };
	    GridTool.prototype._doLayoutChanged = function () {
	    };
	    GridTool.prototype.$_resetFocusedView = function () {
	        var grid = this._grid;
	        var lm = grid.layoutManager;
	        var options = grid.displayOptions;
	        var index = grid.focusedIndex;
	        var vis = false;
	        var rowVis = false;
	        var inner = false;
	        if (options.focusVisible && grid.isValid(index)) {
	            var cell = grid.getFocusedCellView(index);
	            if (cell) {
	                var bodyView = grid.getBodyView(cell);
	                var bcell = bodyView.getCellAt(lm, index);
	                //let r = bodyView.getCellRect(cell);
	                var r = bodyView.getCellRectAt(lm, index, true);
	                r = bodyView.boundsByContainer(r);
	                // const fixed = lm.fixedColCount;
	                var editing = grid.isEditing();
	                // const r = cell.boundsBy(grid);
	                // if (cell instanceof RowGroupFooterElement) {
	                // 	var r2 = lm._rowGroupBounds;
	                // 	var aw = r2.x + cell._level * grid.rowGroup().levelIndent();
	                // 	r.setLeft(aw);
	                // 	r.width = r2.width - grid.leftPos() - cell._level * grid.rowGroup().levelIndent();
	                // }
	                // if (cell instanceof MergedFooterElement) {
	                // 	// 해당 컬럼의 right
	                // 	var c = cell._level - 1;
	                // 	var x = lm.getColumnBounds(c).right() + lm.fixedBounds().x;
	                // 	var fixedWidth = lm.fixedWidth();
	                // 	var leftPos = grid.leftPos();
	                // 	var er = lm._editBarBounds;
	                // 	if (fixed > 0) {
	                // 		if (c >= fixed) {
	                // 			x = Math.max(x + fixedWidth - leftPos , fixedWidth+lm.fixedBounds().x);
	                // 		} else if (c == fixed - 1) {
	                // 			x = fixedWidth + lm.fixedBounds().x;
	                // 		}
	                // 	} else if (fixed == 0) {
	                // 		x -= leftPos;
	                // 	}
	                // 	r.x = x;
	                // 	r.width = er.width + er.x - x ;
	                // }
	                if (r.width > 0 && r.height > 0) {
	                    // if (grid._container.$_rich) {
	                    // 	r.x++;
	                    // 	r.y++;
	                    // }
	                    var dx = 0;
	                    var w = r.width;
	                    if (!index.colFixed && !index.rightFixed) {
	                        var tr = lm.fixedContentBounds;
	                        dx = Math.max(0, tr.right - r.x);
	                        w = Math.max(0, r.width - dx);
	                        tr = lm.rightContentBounds;
	                        var dw = r.right - tr.x;
	                        w -= dw;
	                    }
	                    if (w > 0) {
	                        if (editing) {
	                            r.y--;
	                            r.height += 1;
	                        }
	                        this._focusMask.updateElement(-dx, 0, r.width, r.height, editing);
	                        var tr = lm.footerBounds;
	                        tr.y += lm.contentBounds.y;
	                        var dy = Math.max(0, r.bottom - tr.y);
	                        // TODO browser zoom에 대비한 대책 필요.
	                        // r.y *= this.grid["_zoomRatio"];
	                        // table의 tr갯수와 itemPoints가 일치하지 않는 오류 때문에 zoomRatio가 틀려지는 문제존재.
	                        r.width = w;
	                        r.x += dx;
	                        r.height = Math.max(0, r.height - dy);
	                        this._focusMask.setRect(r);
	                        vis = true;
	                    }
	                    if (bcell.merged) {
	                        if (options.showInnerFocus) {
	                            inner = true;
	                            var r_1 = bodyView.getCellRectAt(lm, index, false);
	                            r_1 = bodyView.boundsByContainer(r_1);
	                            this._innerFocusMask.setRect(r_1.inflate(-4, -4, -4, -4));
	                            this._innerFocusMask.updateElement(0, 0, r_1.width, r_1.height, editing);
	                        }
	                    }
	                }
	            }
	        }
	        var type = options.rowFocusType;
	        if (type != Types.RowMaskType.NONE) {
	            var y2 = lm.footerBounds.y;
	            var nFixed = lm.fixedItemCount;
	            var i = index.itemIndex;
	            i = i >= nFixed ? i - lm.topIndex : i;
	            if (i >= 0 && i <= lm.itemCount - 1) {
	                var r = lm.getItemBounds(i);
	                r.y += lm.contentBounds.y + lm.bodyBounds.y;
	                if (r.bottom > y2) {
	                    r.bottom = y2;
	                }
	                switch (type) {
	                    case Types.RowMaskType.DATA:
	                        r.x = grid.fixedContentPane.x;
	                        r.right = grid.rightContentPane.width ? grid.rightContentPane.right : grid.contentPane.right;
	                        break;
	                    case Types.RowMaskType.FILL:
	                        r.x = 0;
	                        r.width = grid.width;
	                        break;
	                    case Types.RowMaskType.ROW:
	                        r.x = 0;
	                        r.right = grid.rightContentPane.width ? grid.rightContentPane.right : grid.contentPane.right;
	                    default:
	                        break;
	                }
	                this._rowFocusView.setRect(r);
	                rowVis = true;
	            }
	            else {
	                rowVis = false;
	            }
	        }
	        this._rowFocusView.visible = rowVis;
	        // if (lm._gridBounds && options.isRowFocusVisible() && grid.isValid(index)) {
	        // 	var idx = index.I();
	        // 	var t = grid.topIndex();
	        // 	var fixed = lm.fixedItemCount();
	        // 	var itemCount = lm.itemCount();
	        // 	var fr;
	        // 	if (rowVis = idx < fixed || (idx >= t && idx <= t+itemCount)) {
	        // 		var y = fixed > 0 ? lm.fixedHeight() + grid.fixedOptions().rowBarHeight() : 0;
	        // 		var gr = lm.gridBounds(); 
	        // 		if (idx < fixed) {
	        // 			fr = lm.itemBounds(Math.max(0, idx));
	        // 		} else {
	        // 			fr = lm.itemBounds(Math.max(0, idx - t));
	        // 			fr.y = Math.max(fr.y, y);
	        // 		}
	        // 		fr.y += gr.y;
	        // 		fr.x = 0;
	        // 		fr.width = gr.x+gr.width;
	        // 		grid._container.$_rich && (fr.x++, fr.y++);
	        // 		this._rowFocusView.setRect(fr)
	        // 	}
	        // }
	        this._focusMask.visible = vis;
	        this._innerFocusMask.visible = inner;
	        // this._rowFocusView.setVisible(rowVis);
	        // this._innerFocusView && this._innerFocusView.setVisible(inner);
	        if (this._focusMask.visible) ;
	        // if (this._rowFocusView.isVisible()) {
	        // 	grid._resetRowFocusMask();
	        // }
	        // if (options._rowHoverMask.isVisible()) {
	        // 	var hView = this._rowHoverView;
	        // 	if (hView && this._rowFocusView.isVisible() && (!hView.$_hoverRow || hView.$_hoverRow.itemIndex() == index.I())){
	        // 		hView.setVisible(false);
	        // 	} else {
	        // 		this._resetRowHoverView();
	        // 	} 
	        // }
	    };
	    GridTool.prototype.$_resetRowBlockMask = function () {
	        // rowBlock은 fixedRow를 포함하지 않는다.
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var nFixed = lm.fixedItemCount;
	        var top = grid.topItem;
	        var start = Math.max(this._rowBlockStart - top + nFixed, nFixed);
	        var end = Math.min(Math.max(this._rowBlockEnd - top + nFixed), lm.itemCount + nFixed - 1);
	        // 
	        this._rowBlockMask.visible = start >= 0 && end >= 0 && start < (lm.itemCount) && start <= end && this._rowBlockStart !== this._rowBlockEnd;
	        if (this._rowBlockMask.visible) {
	            var y2 = lm.footerBounds.y;
	            var r = lm.getItemBounds(start);
	            var r2 = lm.getItemBounds(end);
	            r = r.union(r2);
	            r.y += lm.contentBounds.y + lm.bodyBounds.y;
	            if (r.bottom > y2) {
	                r.bottom = y2;
	            }
	            switch (grid.displayOptions.rowBlockType) {
	                case Types.RowMaskType.DATA:
	                    r.x = grid.fixedContentPane.x;
	                    r.right = grid.rightContentPane.width ? grid.rightContentPane.right : grid.contentPane.right;
	                    break;
	                case Types.RowMaskType.FILL:
	                    r.x = 0;
	                    r.width = grid.width;
	                    break;
	                case Types.RowMaskType.ROW:
	                    r.x = 0;
	                    r.right = grid.rightContentPane.width ? grid.rightContentPane.right : grid.contentPane.right;
	                default:
	                    break;
	            }
	            this._rowBlockMask.setRect(r);
	        }
	    };
	    GridTool.prototype._doCancel = function (grid) {
	        grid.closeFilterSelector();
	        if (grid.isEditing()) {
	            grid.cancelEditor(true);
	        }
	        else {
	            if (grid.itemEditCancel()) {
	                grid.cancel();
	            }
	        }
	    };
	    GridTool.prototype._doEnter = function (grid, options, focused) {
	        var editing = grid.isEditing();
	        if (editing && !options.enterToTab) {
	            grid.commitEditor(true);
	        }
	        else {
	            var index = focused.clone();
	            var skip = options.skipReadOnly;
	            var skipCell = options.skipReadOnlyCell;
	            if (!grid.isValid(index)) {
	                index.normalize(grid);
	            }
	            else if (options.enterToNextRow && index.itemIndex < grid.itemCount - 1) {
	                index.down();
	                if (skipCell && this._checkReadOnly(index)) {
	                    if (!this._skipReadOnlyCell(index, 1)) {
	                        index.assign(focused);
	                    }
	                }
	            }
	            else if ((!editing || options.enterToTab) && options.crossWhenExitLast && (index.isLast || options.skipReadOnly && index.isEditableLast()) && index.itemIndex < grid.itemCount - 1) {
	                index.down();
	                index.home();
	                skip && this._skipReadOnly(index, 1);
	            }
	            else if ((!editing || options.enterToTab) && options.commitWhenExitLast && index.isLast) {
	                try {
	                    grid.commit(options.commitWhenNoEdit);
	                }
	                catch (err) {
	                    if (err instanceof Validation.ValidationError) {
	                        err = grid["_fireValidationFail"](index.item.index, err.column, err);
	                        err ? alert(options.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                    }
	                    throw err;
	                }
	                if (options.appendWhenExitLast) {
	                    grid.append();
	                    if (grid.isItemEditing()) {
	                        index.down();
	                        index.home();
	                    }
	                }
	            }
	            else if (options.enterToTab && (grid.isEditing() || this._checkReadOnly(index))) {
	                if (grid.isEditing()) {
	                    grid.commitEditor(true);
	                }
	                index.next();
	                if (skip && !this._skipReadOnly(index, 1)) {
	                    index.assign(focused);
	                }
	            }
	            else if (!options.enterToEdit) {
	                index.next();
	                if (skip && !this._skipReadOnly(index, 1)) {
	                    index.assign(focused);
	                }
	            }
	            if (!CellIndex_1.CellIndex.areEquals(index, focused)) {
	                this.setFocused(index, true);
	            }
	            else if (grid.isValid(index) && options.enterToEdit) {
	                if (!grid.isEditing() && focused && focused.dataColumn && !this._checkReadOnly(focused)) {
	                    grid.showEditor(focused);
	                }
	            }
	        }
	        return true;
	    };
	    GridTool.prototype._doTab = function (grid, options, focused, ctrl, shift, event) {
	        var index = focused.clone();
	        if (!grid.isValid(index)) {
	            index.normalize(grid);
	            this._skipReadOnly(index, 1);
	        }
	        else if (options.useTabKey) {
	            var exitCond = options.exitGridWhenTab;
	            if (shift) {
	                if (options.crossWhenExitLast && (index.isFirst || options.skipReadOnly && index.isEditableFirst) && index.itemIndex > 0) {
	                    index.up();
	                    index.end();
	                }
	                else {
	                    index.prev();
	                }
	                if (options.skipReadOnly && !this._skipReadOnly(index, -1)) {
	                    index.assign(focused);
	                }
	                if (CellIndex_1.CellIndex.areEquals(index, focused) && exitCond) {
	                    switch (exitCond) {
	                        case "row":
	                            grid["_exiting"] = true;
	                            break;
	                        case "grid":
	                            grid["_exiting"] = index.itemIndex <= 0;
	                            break;
	                    }
	                    if (grid["_exiting"]) {
	                        //!Utils.isMobile() && grid._container._canvas.setAttribute("tabindex","-1");
	                        return false;
	                    }
	                }
	            }
	            else {
	                if (options.crossWhenExitLast && (index.isLast || options.skipReadOnly && index.isEditableLast()) && index.itemIndex < grid.itemCount - 1) {
	                    index.down(null, options.skipReadOnly && index.isEditableLast && options.crossWhenExitLast);
	                    index.home();
	                }
	                else if (options.commitWhenExitLast && index.isLast) {
	                    try {
	                        grid.commit(options.commitWhenNoEdit);
	                    }
	                    catch (err) {
	                        if (err instanceof Validation.ValidationError) {
	                            err = grid._fireValidationFail(index.itemIndex, err.column, err);
	                            err ? alert(options.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                        }
	                        throw err;
	                    }
	                    if (options.appendWhenExitLast) {
	                        grid.append();
	                        if (grid.isItemEditing()) {
	                            index.down();
	                            index.home();
	                        }
	                    }
	                }
	                else {
	                    index.next();
	                }
	                if (options.skipReadOnly && !this._skipReadOnly(index, 1)) {
	                    index.assign(focused);
	                }
	                if (CellIndex_1.CellIndex.areEquals(index, focused) && exitCond) {
	                    switch (exitCond) {
	                        case "row":
	                            grid["_exiting"] = true;
	                            break;
	                        case "grid":
	                            grid["_exiting"] = index.itemIndex >= (grid.itemCount - 1);
	                            break;
	                    }
	                    if (grid["_exiting"]) {
	                        return false;
	                    }
	                }
	            }
	            if (!CellIndex_1.CellIndex.areEquals(index, focused)) {
	                this.setFocused(index, true);
	            }
	            Utils_1.Utils.isMobile && event && event.preventDefault && event.preventDefault();
	            return true;
	        }
	        grid["_exiting"] = true; // itemCount <= 0 || not UseTabKey GridExit;
	        //shift && !Utils.isMobile && grid._container._canvas.setAttribute("tabindex","-1"); 
	        return false;
	    };
	    GridTool.prototype._checkReadOnly = function (index) {
	        var grid = this.grid;
	        if (!grid.isValid(index)) {
	            return true;
	        }
	        var column = index.dataColumn;
	        var readOnly = false; //grid.getCellWritable(index);
	        {
	            return !readOnly;
	        }
	        // const row = ItemState.isInserting(index.item().itemState()) ? -1 : index.dataRow();
	        // const style = _cast(grid.itemSource().getCellStyle(row, index.dataField()), DataCellStyle);
	        // if (style) {
	        // 	editable = style.isEditable();
	        // 	readOnly = style.isReadOnly();
	        // 	if (editable != null || readOnly != null) {
	        // 		return !((editable == null || editable) && !readOnly);
	        // 	}
	        // }
	        return !column.isWritable();
	    };
	    GridTool.prototype.checkReadOnly = function (index) {
	        return this._checkReadOnly(index);
	    };
	    GridTool.prototype._skipReadOnly = function (index, dx) {
	        var grid = this.grid;
	        var moved = false;
	        if (grid.editOptions.skipReadOnly) {
	            var idx = this._skipIndex;
	            idx.assign(index);
	            moved = !this._checkReadOnly(idx);
	            if (!moved) {
	                if (dx > 0) {
	                    while (idx.next()) {
	                        if (!this._checkReadOnly(idx)) {
	                            index.assign(idx);
	                            moved = true;
	                            break;
	                        }
	                    }
	                }
	                else {
	                    while (idx.prev()) {
	                        if (!this._checkReadOnly(idx)) {
	                            index.assign(idx);
	                            moved = true;
	                            break;
	                        }
	                    }
	                }
	            }
	        }
	        return moved;
	    };
	    GridTool.prototype.skipReadOnly = function (index, dx) {
	        return this._skipReadOnly(index, dx);
	    };
	    GridTool.prototype._skipReadOnlyCell = function (index, dx, limit) {
	        var grid = this.grid;
	        var col = index.dataColumn;
	        var hasVertical = false; //col.checkGroupExist(ColumnGroupOrientation.VERTICAL);
	        var moved = !col.isWritable() && !hasVertical;
	        if (!moved && grid.editOptions.skipReadOnlyCell) {
	            var idx = this._skipIndex;
	            idx.assign(index);
	            moved = !this._checkReadOnly(idx);
	            // if (!moved) {
	            // 	if (dx > 0) {
	            // 		while (idx.lower(grid.isItemEditing(idx.item))) {
	            // 			if (idx.itemIndex == -1 || !this.$_checkReadOnly(idx)) {
	            // 				index.assign(idx);
	            // 				moved = true;
	            // 				break;
	            // 			}
	            // 			if (CellIndex.areEquals(idx, limit)) {
	            // 				moved = false;
	            // 				break;
	            // 			}
	            // 		}
	            // 	} else {
	            // 		while (idx.upper(grid.isItemEditing(idx.item))) {
	            // 			if (idx.itemIndex == -1 || !this.$_checkReadOnly(idx)) {
	            // 				index.assign(idx);
	            // 				moved = true;
	            // 				break;
	            // 			}
	            // 			if (CellIndex.areEquals(idx, limit)) {
	            // 				moved = false;
	            // 				break;
	            // 			}
	            // 		}
	            // 	}
	            // }
	        }
	        return moved;
	    };
	    GridTool.prototype._commitCancel = function (item, options) {
	        var grid = this.grid;
	        try {
	            switch (item.itemState) {
	                case GridItem_1.ItemState.INSERTING:
	                    if (!grid.commit(options.forceInsert)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	                case GridItem_1.ItemState.APPENDING:
	                    if (!grid.commit(options.forceAppend)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	                case GridItem_1.ItemState.UPDATING:
	                    if (!grid.commit(options.commitWhenNoEdit)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	            }
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError) {
	                err = grid._fireValidationFail(item.index, err.column, err);
	                err ? alert(options.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                return false;
	            }
	            if (err instanceof Validation.AbortError) {
	                return false;
	            }
	            throw err;
	        }
	        return false;
	    };
	    GridTool.prototype._doColumnHeaderClicked = function (event, column) {
	    };
	    GridTool.prototype._editButtonClicked = function (index) {
	    };
	    return GridTool;
	}(VisualTool_1.VisualTool));
	exports.GridTool = GridTool;
	var RowHoverView = /** @class */ (function (_super) {
	    __extends(RowHoverView, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowHoverView() {
	        var _this = _super.call(this, "rowHoverView") || this;
	        _this.visible = false;
	        return _this;
	    }
	    RowHoverView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowHoverView.prototype._getCssSelector = function () {
	        return "rg-rowhover";
	    };
	    RowHoverView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	    };
	    return RowHoverView;
	}(VisualElement_1.LayerElement));
	exports.RowHoverView = RowHoverView;
	var RowFocusView = /** @class */ (function (_super) {
	    __extends(RowFocusView, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowFocusView() {
	        var _this = _super.call(this, "rowFocusView") || this;
	        _this.visible = false;
	        return _this;
	    }
	    RowFocusView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowFocusView.prototype._getCssSelector = function () {
	        return "rg-rowfocus";
	    };
	    RowFocusView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this.setImportantStyle("pointer-events", "none");
	    };
	    return RowFocusView;
	}(VisualElement_1.LayerElement));
	exports.RowFocusView = RowFocusView;
	var GridSelectionTool = /** @class */ (function (_super) {
	    __extends(GridSelectionTool, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridSelectionTool(owner, name) {
	        var _this = _super.call(this, owner, name) || this;
	        _this._cellResizer = new HeaderCellResizer();
	        _this._cellMover = new HeaderCellMover();
	        _this._cellFeedback = new HeaderCellFeedback();
	        _this._tooltipOptions = new Tooltip.TooltipOptions();
	        _this._checkScroll = Date.now();
	        _this._prevScroll = Date.now();
	        _this._tempRect = new Rectangle_1.Rectangle();
	        var grid = _this.grid;
	        _this._colResizeReq = new EditRequests.ColumnResizeRequest(grid);
	        _this._colMoveReq = new EditRequests.ColumnMoveRequest(grid);
	        _this._rowResizeReq = new EditRequests.RowResizeRequest(grid);
	        _this._tooltipIndex = new CellIndex_1.CellIndex(grid);
	        _this._tempIndex = new CellIndex_1.CellIndex(grid);
	        return _this;
	    }
	    GridSelectionTool.prototype._doDispose = function () {
	        this._clickCell = null;
	        this._clickElement = null;
	        this._cellResizer = this._cellResizer.dispose();
	        this._cellMover = this._cellMover.dispose();
	        this._cellFeedback = this._cellFeedback.dispose();
	        this._colResizeReq = this._colResizeReq.dispose();
	        this._colMoveReq = this._colMoveReq.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridSelectionTool.prototype.$_getIndexAt = function (grid, lm, bodyView, td, y) {
	        var idx = grid.getDataCellIndex(td, this._tempIndex);
	        var bcell = bodyView.getCellAt(lm, idx);
	        if (bcell.merged) {
	            var tr = lm.getTableRowIndex(y);
	            idx.itemIndex = bodyView.getRowIndex(tr);
	        }
	        return idx;
	    };
	    GridSelectionTool.prototype._doMouseDown = function (event) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var options = grid.editOptions;
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var ctrl = event.ctrlKey || event.metaKey;
	        this._hideTooltip();
	        grid.closePopups();
	        //grid._buttonClicked = false;		
	        //this._scrollTool.stop();
	        // if (grid.filterSelecting) {
	        //     grid.hideFilterSelector();
	        // }
	        var clickCell = this._clickCell = null;
	        //let clickElement = this._clickElement = null;
	        if (event.button == 0 || grid.displayOptions.rightClickable) {
	            clickCell = this._clickCell = this._findTableCell();
	            //clickElement = this._clickElement = this.findElementAt(x, y, false);
	            if (clickCell != null) {
	                var view = grid.getTableView(clickCell);
	                if (view instanceof GridBodyElement_1.GridBodyElement) {
	                    var idx = this.$_getIndexAt(grid, lm, view, clickCell, y);
	                    if (this.$_checkAppending(grid.focusedIndex, true, idx)) {
	                        this._clickElement = null;
	                        this._clickCell = null;
	                        return;
	                    }
	                    if (CellIndex_1.CellIndex.areEquals(idx, this.focused) && options.editWhenClickFocused) {
	                        grid.showEditor();
	                    }
	                    else {
	                        grid.setFocusedIndex(idx, true);
	                    }
	                }
	            }
	            if (event.button == 0) {
	                var target = this.mouseEventTarget;
	                var request = this._getEditRequest(target, x, y, ctrl, event.shiftKey) ||
	                    this._getSelectRequest(target, x, y, ctrl, event.shiftKey);
	                var tracker_1 = this._getDragTracker(request, x, y);
	                this.dragTracker = tracker_1;
	            }
	        }
	        //this._clickHandle = null;
	        //this._rightClicked = button > 1 ? true : false;
	        // if (button == 0 || grid.displayOptions().isRightClickable()) {
	        //     clickElement = this._clickElement = this.findElementAt(x, y, false);
	        //     if (this._scrollTool.start(clickElement, x, y)) return;
	        //     this._clickHandle = _cast(clickElement, HandleElement);
	        //     clickCell = this._clickCell = _cast(clickElement, CellElement);
	        //     this._clickPos.set(x, y);
	        //     if (this._clickHandle) {
	        //         if (this._clickHandle.isClickable()) {
	        //             this.$_handleClicked(this._clickHandle);
	        //             return;
	        //         }
	        //     }
	        // }
	        // if (clickCell instanceof DataCellElement && this.$_checkAppending(grid.focusedIndex(), true, clickCell)) {
	        // 	this._clickElement = null;
	        // 	this._clickCell = null;
	        // 	return;
	        // }
	        var tracker = this.dragTracker;
	        if (tracker && tracker.startWhenCreated) {
	            if (tracker instanceof SelectTracker_1.SelectTracker && event.shiftKey) ;
	            else {
	                this._startDragTracker(x, y, false);
	            }
	        }
	    };
	    GridSelectionTool.prototype._doMouseMove = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var grid = this.grid;
	        var cell = this._findTableCell();
	        var ct = grid.getCellType(cell);
	        var hovered = false;
	        var headerHovered = false;
	        if (grid.canHovering) {
	            if (ct === Types.TableCellType.DATA) {
	                var bodyView = grid.getBodyView(cell);
	                var tc = bodyView.bodyCellByCell(cell);
	                grid["$_setHoveredCell"](tc, y);
	                this.$_setHoveredCell(tc, x, y);
	                hovered = true;
	            }
	            else if (ct === Types.TableCellType.HEADER) {
	                var headerView = grid.getHeaderView(cell);
	                var tc = headerView.tableCellByCell(cell);
	                this.$_setHoverdHeaderCell(tc, x, y);
	                headerHovered = true;
	            }
	            if (!hovered) {
	                grid["$_setHoveredCell"](null, y);
	                this.$_setHoveredCell(null, x, y);
	            }
	            if (!headerHovered) {
	                this.$_setHoverdHeaderCell(null, x, y);
	            }
	        }
	        else {
	            this._hideTooltip();
	        }
	        if (this.dragTracker) {
	            this._hideTooltip();
	        }
	        else {
	            grid.setCursor(this.mouseEventTarget, Types.Cursor.DEFAULT);
	            var request = this._getEditRequest(this.mouseEventTarget, x, y, false, false);
	            if (request && request.cursor) {
	                grid.setCursor(this.mouseEventTarget, request.cursor);
	            }
	        }
	    };
	    /** 그리드 밖에서도 호출된다. */
	    GridSelectionTool.prototype._doMouseUp = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var elt = this.findElementAt(x, y, false);
	        var cell = this._findTableCell();
	        var grid = this.grid;
	        var cellType;
	        grid.setCursor(this.mouseEventTarget, Types.Cursor.DEFAULT);
	        if (cell && cell == this._clickCell) {
	            cellType = grid.getCellType(cell);
	            if (cellType === Types.TableCellType.HEADER) {
	                var request = this._getEditRequest(this.mouseEventTarget, x, y, false, false);
	                if (!(request instanceof EditRequests.ColumnResizeRequest)) {
	                    var headerView = grid.getHeaderView(cell);
	                    var column = headerView.columnByCell(cell);
	                    if (column) {
	                        this.$_columnHeaderClicked(event, column);
	                    }
	                }
	            }
	        }
	    };
	    /** 그리드 밖에서 마우스를 놓으면 호출되지 않는다. */
	    GridSelectionTool.prototype._doClick = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var grid = this.grid;
	        var elt = this.findElementAt(x, y, false);
	        var cell = this._findTableCell();
	        //console.log("CLICK: " + elt);
	        // if (elt == this._clickElement) {
	        //     if (elt instanceof CheckBarCellElement && this.isMouseEventTarget(elt)) {
	        //         this._checkCellClicked(elt, shift);
	        //     }
	        // }
	        if (cell && cell == this._clickCell) {
	            var cellType = this.grid.getCellType(cell);
	            if (cellType == Types.TableCellType.CHECK) {
	                this._checkCellClicked2(cell, event.shiftKey);
	            }
	            else if (cellType == Types.TableCellType.HEAD) {
	                if (event.target instanceof HTMLInputElement) {
	                    this._checkAllClicked();
	                }
	            }
	            else if (cellType == Types.TableCellType.DATA) {
	                var bodyView = grid.getBodyView(cell);
	                var bodyCell = bodyView.bodyCellByCell(cell);
	                if (bodyCell.isCellButton(event.target)) {
	                    this.$_cellButtonClicked(bodyCell);
	                    return;
	                }
	                if (bodyCell.isEditButton(event.target)) {
	                    this._editButtonClicked(bodyCell.getIndex(this._tempIndex));
	                    return;
	                }
	                var renderer = bodyCell.renderer2; // 동적 renderer를 어떻게 해야 할까?
	                if (renderer) {
	                    var rendererType = renderer.type;
	                    var index = renderer.index;
	                    if (renderer.click(event)) {
	                        return;
	                    }
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype._doDblClick = function (event) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var index = this.focused;
	        var cell = this._findTableCell();
	        if (cell && cell == this._clickCell) {
	            var item = grid.getItem(index.itemIndex);
	            var cellType = grid.getCellType(cell);
	            if (item && item.isDataRow && cellType == Types.TableCellType.DATA) {
	                var view = grid.getTableView(cell);
	                var clickIndex = this.$_getIndexAt(grid, lm, view, cell, y);
	                if (CellIndex_1.CellIndex.areEquals(clickIndex, index)) {
	                    grid.showEditor(clickIndex);
	                }
	            }
	            else if (cellType == Types.TableCellType.HEADER) {
	                var request = this._getEditRequest(this.mouseEventTarget, x, y, false, false);
	                if (request instanceof EditRequests.ColumnResizeRequest) {
	                    var layout = request.layout;
	                    if (layout instanceof CellLayout.CellLayoutColumnItem) {
	                        grid.fitLayoutWidth(layout);
	                    }
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype._doMouseWheel = function (event) {
	        var grid = this.grid;
	        var options = grid.displayOptions;
	        if (options.wheelEnabled && !event.ctrlKey) {
	            var isHorz = (event.shiftKey || event.deltaX) && options.wheelScrollHorz !== 0;
	            if (isHorz) {
	                var left = grid.leftPos;
	                var wheelScrollPos = Math.abs(options.wheelScrollHorz || 16) * ((event.deltaX || event.deltaY) > 0 ? 1 : -1);
	                grid.leftPos = left + wheelScrollPos;
	                // IE, Edge의 경우 forword, backword가 실행되는 경우가 있다. return true로 막아준다.
	                return Utils_1.Utils.isIE || Utils_1.Utils.isEdge ? true : (!options.wheelEventPropagate || left != grid.leftPos);
	            }
	            else {
	                var top_1 = grid.topIndex;
	                var curScroll = Date.now();
	                var wheelScrollLines = Math.abs(options.wheelScrollLines);
	                wheelScrollLines = !!wheelScrollLines ? wheelScrollLines : 3;
	                if (options.wheelAccelDelay > 0) {
	                    if (curScroll > this._prevScroll + 300) {
	                        this._checkScroll = curScroll;
	                    }
	                    else {
	                        if (this._checkScroll + options.wheelAccelDelay < curScroll) {
	                            var cnt = grid.itemCount;
	                            var wheelAccelScroll = options.wheelAccelScroll;
	                            if (wheelAccelScroll && !isNaN(wheelAccelScroll)) {
	                                wheelScrollLines = parseInt(wheelAccelScroll);
	                            }
	                            else if (typeof wheelAccelScroll === "string") {
	                                var s = wheelAccelScroll.trim();
	                                if (s.indexOf("%") > 0) {
	                                    var cnt_1 = grid.itemCount;
	                                    wheelScrollLines = parseInt(s.substr(0, s.length - 1)) / 100 * cnt_1;
	                                }
	                            }
	                        }
	                    }
	                }
	                this._prevScroll = curScroll;
	                grid.topIndex = grid.topIndex + (event.deltaY > 0 ? wheelScrollLines : -wheelScrollLines);
	                //grid.topIndex = grid.topIndex - event["wheelDelta"];
	                return !options.wheelEventPropagate || (top_1 != grid.topIndex);
	            }
	        }
	        return false;
	    };
	    GridSelectionTool.prototype._doMouseEnter = function (event) {
	    };
	    GridSelectionTool.prototype._doMouseLeave = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        this._hideTooltip(x, y);
	        this.$_setHoverdHeaderCell(null, x, y);
	        this.$_setHoveredCell(null, x, y);
	    };
	    GridSelectionTool.prototype._doMouseOver = function (event) {
	    };
	    GridSelectionTool.prototype._doContextMenu = function (event) {
	        var grid = this.grid;
	        return grid.doContextMenu(event);
	    };
	    GridSelectionTool.prototype._doKeyDown = function (event) {
	        var key = event.keyCode;
	        var ctrl = event.ctrlKey; // _isMac && event.metaKey || !_isMac && event.ctrlKey
	        var shift = event.shiftKey;
	        // const alt = event.altKey;
	        var grid = this.grid;
	        var options = grid.editOptions;
	        var lm = grid.layoutManager;
	        var skip = options.skipReadOnly;
	        var skipCell = options.skipReadOnlyCell;
	        var focused = grid.focusedIndex;
	        var index = focused.clone();
	        var vstep = options.verticalMovingStep;
	        var isMac = Utils_1.Utils.isMac;
	        var orgIndex;
	        var pmManager = grid.popupMenuManager;
	        if (pmManager.isShow() && Utils_1.Utils.included(key, Types.Keys.LEFT, Types.Keys.RIGHT, Types.Keys.UP, Types.Keys.DOWN, Types.Keys.ENTER, Types.Keys.SPACE)) {
	            pmManager.keyDown(event);
	            return true;
	        }
	        if (key == Types.Keys.ESCAPE) {
	            grid.closePopups();
	            this._doCancel(grid);
	        }
	        else if (key == Types.Keys.ENTER) {
	            return this._doEnter(grid, options, index);
	        }
	        else if (key == Types.Keys.TAB) {
	            return this._doTab(grid, options, index, ctrl, shift, event);
	        }
	        else if (key == Types.Keys.F2) {
	            if (!grid.isEditing() && index.dataColumn) {
	                grid.showEditor(index, shift);
	            }
	        }
	        else if (key == Types.Keys.Z && ctrl) {
	            return grid.undo();
	        }
	        else if (key == Types.Keys.Y && ctrl) {
	            return grid.redo();
	        }
	        else if (key == Types.Keys.INSERT) {
	            if (options.appendWhenInsertKey || grid.itemCount == 0) {
	                grid.append();
	            }
	            else {
	                grid.insert(index.item, event.shiftKey, ctrl);
	            }
	        }
	        else if (key == Types.Keys.DELETE) {
	            if (ctrl && shift) {
	                grid.revertSelection();
	                return true;
	            }
	            else if (ctrl) {
	                grid.deleteSelection();
	                return true;
	            }
	            else if (shift) {
	                grid.eraseSelection();
	            }
	            return false;
	        }
	        else if (Utils_1.Utils.included(key, Types.Keys.HOME, Types.Keys.END, Types.Keys.RIGHT, Types.Keys.LEFT, Types.Keys.DOWN, Types.Keys.UP, Types.Keys.PAGEDOWN, Types.Keys.PAGEUP)) {
	            var itemCount = grid.itemCount;
	            if (key == Types.Keys.DOWN && itemCount == 0) {
	                grid.append();
	                return true;
	            }
	            if (!grid.isValid(index)) {
	                index.normalize(grid);
	                this.setFocused(index, true);
	                return true;
	            }
	            if ((Utils_1.Utils.included(key, Types.Keys.DOWN, Types.Keys.PAGEDOWN) || (key == Types.Keys.END && ctrl)) && index.isBottom && this.$_checkAppending(index)) {
	                return true;
	            }
	            if ((Utils_1.Utils.included(key, Types.Keys.UP, Types.Keys.PAGEUP) || (key == Types.Keys.HOME && ctrl)) && index.isTop && this.$_checkAppending(index, true)) {
	                return true;
	            }
	            switch (key) {
	                case Types.Keys.HOME:
	                    if (ctrl) {
	                        var orgIndex_1 = index.clone();
	                        index.first();
	                        if (skip && this._checkReadOnly(index)) {
	                            if (!this._skipReadOnlyCell(index, 1, orgIndex_1)) {
	                                index.assign(focused);
	                                break;
	                            }
	                        }
	                    }
	                    else {
	                        index.home();
	                        this._skipReadOnly(index, 1);
	                    }
	                    break;
	                case Types.Keys.END:
	                    if (ctrl) {
	                        var orgIndex_2 = index.clone();
	                        index.last();
	                        if (skip && this._checkReadOnly(index)) {
	                            if (!this._skipReadOnlyCell(index, -1, orgIndex_2)) {
	                                index.assign(focused);
	                                break;
	                            }
	                        }
	                    }
	                    else {
	                        index.end();
	                        this._skipReadOnly(index, -1);
	                    }
	                    break;
	                case Types.Keys.RIGHT:
	                    index.right();
	                    if (skip && this._checkReadOnly(index)) {
	                        if (!this._skipReadOnly(index, 1)) {
	                            index.assign(focused);
	                            break;
	                        }
	                    }
	                    break;
	                case Types.Keys.LEFT:
	                    index.left();
	                    if (options && options.checkWhenSpace && CellIndex_1.CellIndex.areEquals(index, focused)) {
	                        var cb = grid.checkBar;
	                        var ci = cb && cb.getCell(index);
	                        if (ci && ci.index.item.checkable) ;
	                    }
	                    if (skip && this._checkReadOnly(index)) {
	                        if (!this._skipReadOnly(index, -1)) {
	                            index.assign(focused);
	                            break;
	                        }
	                    }
	                    break;
	                case Types.Keys.UP:
	                    try {
	                        if (index.itemIndex == 0 && index.isTop) {
	                            if (this.$_commitCancel(index.item, options)) {
	                                return true;
	                            }
	                            else if (ctrl && isMac) {
	                                index.first();
	                            }
	                            else {
	                                index.up(vstep);
	                            }
	                        }
	                        else {
	                            if (ctrl && isMac) {
	                                index.first();
	                            }
	                            else if (ctrl) {
	                                grid.topIndex--;
	                            }
	                            else {
	                                index.up(vstep, grid.isItemEditing(index.item));
	                            }
	                        }
	                    }
	                    finally {
	                        if (skipCell && this._checkReadOnly(index)) {
	                            if (!this._skipReadOnlyCell(index, -1)) {
	                                index.assign(focused);
	                            }
	                        }
	                    }
	                    break;
	                case Types.Keys.PAGEUP:
	                    if (ctrl && !isMac) {
	                        grid.topIndex = grid.topIndex - lm.fullItemCount;
	                        return true;
	                    }
	                    orgIndex = index.clone();
	                    index.incRow(-lm.fullItemCount);
	                    if (skip && this._checkReadOnly(index)) {
	                        if (!this._skipReadOnlyCell(index, 1, orgIndex)) {
	                            index.assign(focused);
	                            break;
	                        }
	                    }
	                    break;
	                case Types.Keys.DOWN:
	                    try {
	                        if (index.itemIndex == itemCount - 1 && (index.isBottom || vstep == CellIndex_1.VerticalMovingStep.ROW)) {
	                            if (index.isBottom) {
	                                if (this._commitCancel(index.item, options))
	                                    return true;
	                            }
	                            grid.append();
	                            if (ctrl && isMac) {
	                                index.last();
	                            }
	                            else {
	                                index.down(vstep, grid.isItemEditing(index.item));
	                            }
	                        }
	                        else {
	                            if (ctrl && isMac) {
	                                index.last();
	                            }
	                            else if (ctrl) {
	                                grid.topIndex = grid.topIndex + 1;
	                                return true;
	                            }
	                            else {
	                                index.down(vstep, grid.isItemEditing(index.item));
	                            }
	                        }
	                    }
	                    finally {
	                        if (skipCell && this._checkReadOnly(index)) {
	                            if (!this._skipReadOnlyCell(index, 1)) {
	                                index.assign(focused);
	                            }
	                        }
	                    }
	                    break;
	                case Types.Keys.PAGEDOWN:
	                    if (index.itemIndex == grid.itemCount - 1 && index.isBottom) {
	                        if (GridItem_1.ItemState_isInserting(index.item.itemState)) {
	                            if (grid.commit(options.forceAppend)) ;
	                            return true;
	                        }
	                    }
	                    if (ctrl && !isMac) {
	                        grid.topIndex = grid.topIndex + lm.fullItemCount;
	                        return true;
	                    }
	                    orgIndex = index.clone();
	                    index.incRow(lm.fullItemCount);
	                    if (skip && this._checkReadOnly(index)) {
	                        if (!this._skipReadOnlyCell(index, -1, orgIndex)) {
	                            index.assign(focused);
	                            break;
	                        }
	                    }
	                    break;
	            }
	            if (shift && grid.selections.count > 0) {
	                this.setFocused(index, false);
	                grid.selections.getItem(0).resizeTo(index);
	            }
	            else {
	                this.setFocused(index, true);
	            }
	            return true;
	        }
	        return _super.prototype._doKeyDown.call(this, event);
	    };
	    GridSelectionTool.prototype._doKeyPress = function (event) {
	        //this.grid._fireKeyPress(key);
	        return false;
	    };
	    GridSelectionTool.prototype._editButtonClicked = function (index) {
	        this.grid.makeCellVisible(index);
	        if (this.grid.showEditor(index)) {
	            this.grid.editorButtonClicked(index);
	        }
	        _super.prototype._editButtonClicked.call(this, index);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridSelectionTool.prototype._getSelectRequest = function (source, x, y, ctrl, shift) {
	        var grid = this.grid;
	        var options = grid.displayOptions;
	        var mode = options.selectionMode;
	        var style = options.selectionStyle;
	        var cell = this._findTableCell(source);
	        if (!cell)
	            return null;
	        var cellType = grid.getCellType(cell);
	        if (cellType == Types.TableCellType.INDICATOR) {
	            if (grid.rowIndicator.selectable && mode != Selections.SelectionMode.NONE && style != Selections.SelectionStyle.NONE && !Selections.isSingleSelectionStyle(style)) {
	                return new EditRequests.SelectRequest(grid.getIndex(grid.rowIndicatorView.getCellIndex(cell)), Selections.SelectionStyle.ROWS);
	            }
	        }
	        else if (cellType == Types.TableCellType.HEADER) {
	            if (ctrl) {
	                var column = grid.headerView.columnByCell(cell);
	                if (grid.rowIndicator.selectable && mode != Selections.SelectionMode.NONE && style != Selections.SelectionStyle.NONE && !Selections.isSingleSelectionStyle(style)) {
	                    return new EditRequests.SelectRequest(grid.getIndex(-1, column), Selections.SelectionStyle.COLUMNS);
	                }
	            }
	        }
	        else if (cellType == Types.TableCellType.DATA) {
	            var idx = grid.getDataCellIndex(cell);
	            //const layout = idx.layout;
	            if (mode != Selections.SelectionMode.NONE && style != Selections.SelectionStyle.NONE && !Selections.isSingleSelectionStyle(style)) {
	                if (grid.selections.count > 0 && shift) {
	                    return new EditRequests.SelectRequest(idx, grid.selections.itemStyle);
	                }
	                return new EditRequests.SelectRequest(idx, style);
	            }
	            this.grid.displayOptions.selectionStyle;
	        }
	        return null;
	    };
	    GridSelectionTool.prototype._getEditRequest = function (source, x, y, ctrl, shift) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var options = grid.displayOptions;
	        var td = this._findTableCell(source);
	        if (!td)
	            return null;
	        //const cellType = grid.getCellType(cell);
	        var view = grid.getTableView(td);
	        var req = this.$_getRowResizeRequest(view, td, x, y, ctrl);
	        if (req)
	            return req;
	        if (view instanceof RowIndicatorElement_1.RowIndicatorElement) ;
	        else if (view instanceof HeaderElement_1.HeaderElement) {
	            if (source instanceof HTMLInputElement) {
	                return null;
	            }
	            if (ctrl) ;
	            else {
	                var layout = view.layoutByCell(td);
	                if (layout) {
	                    var p = grid.cellToContainer(td, Point_1.Point.EMPTY.setEmpty());
	                    if (options.columnResizable && layout["_isResizable"]() &&
	                        (grid.fixedOptions.resizable || (layout.root.vindex >= lm.fixedLayoutCount && layout.root.vindex < lm.rightFirstLayout))) {
	                        p.x += layout.cellWidth;
	                        if (x >= p.x - 3 && x <= p.x + 3) {
	                            return this._colResizeReq.init(layout, x, y, x - p.x);
	                        }
	                    }
	                    if (options.columnMovable && layout["_isMovable"]() &&
	                        (!layout.isRoot || grid.canMoveIndex(layout.root.vindex))) {
	                        return this._colMoveReq.init(layout, x, y, x - p.x);
	                    }
	                }
	            }
	        }
	        else if (view instanceof GridBodyElement_1.GridBodyElement) ;
	        return null;
	    };
	    GridSelectionTool.prototype.$_getRowResizeRequest = function (view, cell, x, y, ctrl) {
	        var idx = -1;
	        if (view instanceof RowIndicatorElement_1.RowIndicatorElement || view instanceof StateBarElement_1.StateBarElement) {
	            idx = cell.parentElement["$_row"];
	        }
	        if (idx < 0) {
	            return null;
	        }
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var options = grid.displayOptions;
	        var variable = options.eachRowResizable && !ctrl;
	        var nFixed = lm.fixedItemCount;
	        var r = view.boundsByContainer(this._tempRect.setWidth(view.width));
	        if (r.width <= 0 || x < r.x || x >= r.right) {
	            return null;
	        }
	        if (options.rowResizable) {
	            var itemCount = lm.itemCount;
	            var topIndex = grid.topIndex;
	            var dy = lm.contentBounds.y;
	            for (var i = 0; i < itemCount; i++) {
	                var row = i + topIndex + nFixed;
	                if (row == idx) {
	                    r = lm.getItemRect(i + nFixed);
	                    r.y += dy;
	                    if (y <= r.bottom + 1 && y >= r.bottom - 2) {
	                        return this._rowResizeReq.init(row, variable, r.y, y - r.bottom - 1);
	                    }
	                }
	            }
	        }
	        return null;
	    };
	    GridSelectionTool.prototype._getDragTracker = function (request, x, y) {
	        if (request instanceof EditRequests.SelectRequest) {
	            switch (request.style) {
	                case Selections.SelectionStyle.ROWS:
	                    return new SelectTracker_1.RowsSelectTracker(request, x, y);
	                case Selections.SelectionStyle.COLUMNS:
	                    return new SelectTracker_1.ColumnsSelectTracker(request, x, y);
	                case Selections.SelectionStyle.BLOCK:
	                    return new SelectTracker_1.BlockSelectTracker(request, x, y);
	            }
	        }
	        else if (request instanceof EditRequests.ColumnResizeRequest) {
	            return new EditTrackers.ColumnResizeTracker(request, this._cellResizer);
	        }
	        else if (request instanceof EditRequests.ColumnMoveRequest) {
	            return new EditTrackers.ColumnMoveTracker(request, this._cellFeedback, this._cellMover);
	        }
	        else if (request instanceof EditRequests.RowResizeRequest) {
	            return new EditTrackers.RowResizeTracker(request, this._cellResizer);
	        }
	        return null;
	    };
	    // protected _checkCellClicked(cell: CheckBarCellElement, shift: boolean): void {
	    //     //console.log("CLICK CHECKBOX: " + cell);
	    //     const grid = this.grid;
	    //     if (grid.editOptions.checkable) {
	    //         const bar = grid.checkBar;
	    //         const item = cell.item;
	    //         if (item.checkable && (bar.showGroup || item.dataRow >= 0)) {
	    //             const box = cell["_cellDom"] as HTMLInputElement;
	    //             //grid.makeItemVisible(item.index);
	    //             grid.itemSource.checkItem(item, box.checked, bar.exclusive, true);
	    //         }
	    //     }
	    // }
	    GridSelectionTool.prototype._checkCellClicked2 = function (cell, shift) {
	        //console.log("CLICK CHECKBOX: " + cell);
	        var grid = this.grid;
	        var checkBar = grid.checkBar;
	        var view = grid.checkBarView;
	        if (grid.editOptions.checkable) {
	            var bar = grid.checkBar;
	            var item = grid.getItem(cell.parentElement["$_row"]);
	            if (item.checkable && (bar.showGroup || item.dataRow >= 0)) {
	                var box = grid.checkBarView.getCheckBox(cell);
	                if (box) {
	                    var index = item.index;
	                    var prev = view["_prevChecked"];
	                    grid.makeItemVisible(index);
	                    if (shift && prev >= 0 && !checkBar.exclusive) {
	                        var prevItem = grid.getItem(view["_prevChecked"]);
	                        var items = [];
	                        for (var i = Math.min(prev, index); i <= Math.max(prev, index); i++) {
	                            var item_1 = grid.getItem(i);
	                            if (item_1.checkable && item_1.dataRow >= 0) {
	                                items.push(item_1);
	                            }
	                        }
	                        if (items.length > 0) {
	                            grid.itemSource.checkItems(items, prevItem.checked, true);
	                        }
	                    }
	                    else {
	                        grid.itemSource.checkItem(item, box.checked, bar.exclusive, true);
	                        view["$_setPrevChecked"](item.index);
	                    }
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype._checkAllClicked = function () {
	        var grid = this.grid;
	        if (!grid.empty && grid.editOptions.checkable) {
	            var checkBar = grid.checkBar;
	            var headView = grid.headView;
	            if (checkBar.showAll && !checkBar.exclusive) {
	                headView.allChecked = !headView.allChecked;
	                grid.itemSource.checkAll(headView.allChecked, checkBar.visibleOnly, checkBar.checkableOnly, true, checkBar.showGroup);
	            }
	        }
	    };
	    GridSelectionTool.prototype._doColumnHeaderClicked = function (event, column) {
	        _super.prototype._doColumnHeaderClicked.call(this, event, column);
	        var rightClicked = event.button == 2;
	        if (!rightClicked) {
	            var dcol = column;
	            var grid = this.grid;
	            if (!grid.empty && dcol) {
	                var hcell = grid.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);
	                if (event.target === hcell.check) {
	                    hcell.check.checked = dcol.checked = !dcol.checked;
	                    grid["_columnCheckedChanged"](dcol);
	                }
	                else if (event.target === hcell.filter && dcol.hasFilters) {
	                    grid.selectColumnFilters(hcell);
	                }
	                else if (event.target === hcell.popup) {
	                    grid.doContextMenu(event);
	                }
	                else if (dcol.sortable && grid.sortingOptions.enabled) {
	                    grid.sortColumn(dcol, event);
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype.$_columnHeaderClicked = function (event, column) {
	        var rightClicked = event.button == 2;
	        this.grid._fireColumnHeaderClicked(column, rightClicked, event);
	        this._doColumnHeaderClicked(event, column);
	    };
	    GridSelectionTool.prototype.$_setHoveredCell = function (value, x, y) {
	        if (value != this._hoveredCell) {
	            this._hoveredCell = value;
	            this._hideTooltip(x, y);
	            this._tooltipShowTimer && clearTimeout(this._tooltipShowTimer);
	            var delay = this.grid.displayOptions.hintDelay;
	            if (delay > 0) {
	                var self_1 = this;
	                this._tooltipShowTimer = setTimeout(function () {
	                    self_1.$_showTooltip2(value);
	                }.bind(self_1), delay);
	            }
	            else {
	                this.$_showTooltip2(value);
	            }
	        }
	    };
	    GridSelectionTool.prototype._hideTooltip = function (x, y) {
	        this.grid.tooltipManager.close(x, y);
	        this._tooltipCell = null;
	        this._hoveredCell = null;
	        this._hoveredHeaderCell = null;
	        this._tooltipIndex.reset();
	    };
	    GridSelectionTool.prototype.$_showTooltip2 = function (cell) {
	        var grid = this.grid;
	        var layout = cell.layout;
	        var dcol = layout.firstColumn;
	        var dataId = cell.item.dataId;
	        var vcell = grid.validationManager["_cellList"][dataId] && grid.validationManager["_cellList"][dataId][dcol.dataIndex];
	        var index = this._tempIndex.set(cell.item.index, cell.layout.firstColumn);
	        var options = this._tooltipOptions;
	        if (grid.editOptions.hintOnError && dcol && grid.isItemEditing(cell.item) && dcol.error || vcell) {
	            if (vcell) {
	                options.message = vcell.message;
	            }
	            else {
	                options.message = dcol.error.message || dcol.error;
	            }
	            // options.setStyles({
	            // 	background: "#eeffcc99"
	            // });
	            this.$_showTooltip(cell, index, options);
	        }
	        else {
	            var renderer = cell.renderer2;
	            // if (renderer && cell instanceof MergedDataCellElement) {
	            // 	index = grid.pointToIndex(grid.mouseX(), grid.mouseY(), true);
	            // }
	            if (renderer && renderer.showTooltip && !CellIndex_1.CellIndex.areEquals(index, this._tooltipIndex)) {
	                var s = renderer.getTooltip(cell, index);
	                if (s || grid.displayOptions.showEmptyTooltip) {
	                    // if (renderer.isTooltipEllipsisTextOnly()) {
	                    // 	var txtWidth = renderer.measure(grid, cell, 0,0).width;
	                    // 	var w = Math.min(renderer._rect.width, cell.width());
	                    // 	if (txtWidth < w) {
	                    // 		return;
	                    // 	}
	                    // }
	                    var opts = grid["_fireShowTooltip"](index, s);
	                    // var defStyles = {
	                    // 		background: "#eeffffff"
	                    // 	};
	                    if (opts) {
	                        this._tooltipOptions.assignFrom(opts);
	                        this.$_showTooltip(cell, index, this._tooltipOptions);
	                    }
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype.$_showTooltip = function (cell, index, options) {
	        var grid = this.grid;
	        var tm = grid.tooltipManager;
	        var lm = grid.layoutManager;
	        if (tm.visible && this._tooltipCell == cell) {
	            return;
	        }
	        this._hideTooltip();
	        var view = grid.getBodyView(cell.cell);
	        var r = view.getCellRectAt(lm, index, true);
	        r = view.boundsByContainer(r);
	        // var elt = headerCell;
	        // if (headerCell instanceof ColumnView) {
	        //     var x = grid.mouseX()+8, y = grid.mouseY();
	        // } else {
	        //     var br = headerCell.boundsBy();
	        //     var x = headerCell._column.isFixed() ? br.x : Math.max(br.x, lm.nonfixedBounds().x)
	        //     var y = br.y + br.height;
	        // }
	        var x = r.x;
	        var y = r.y + r.height;
	        tm.show(options, x, y, true);
	        this._tooltipCell = cell;
	        this._tooltipIndex.assign(index);
	    };
	    GridSelectionTool.prototype.$_setHoverdHeaderCell = function (value, x, y) {
	        if (value != this._hoveredHeaderCell) {
	            console.log("HOVERED HEADER CELL: " + value);
	            this._hoveredHeaderCell = value;
	            this._hideTooltip(x, y);
	            this._tooltipShowTimer && clearTimeout(this._tooltipShowTimer);
	            var delay = this.grid.displayOptions.hintDelay;
	            if (delay > 0) {
	                var self_2 = this;
	                this._tooltipShowTimer = setTimeout(function () {
	                    self_2.$_showHeaderTooltip2(value);
	                }.bind(self_2), delay);
	            }
	            else {
	                this.$_showHeaderTooltip2(value);
	            }
	        }
	    };
	    GridSelectionTool.prototype.$_showHeaderTooltip2 = function (cell) {
	        var grid = this.grid;
	        if (grid.header.showTooltip && this._tooltipCell != cell) {
	            if (cell.showTooltip) {
	                var s = cell.tooltip || cell.text;
	                if (s) {
	                    var opts = grid["_fireShowHeaderTooltip"](cell.layout.firstColumn, s);
	                    if (opts) {
	                        this._tooltipOptions.assignFrom(opts);
	                        this.$_showHeaderTooltip(cell, this._tooltipOptions);
	                    }
	                }
	            }
	        }
	    };
	    GridSelectionTool.prototype.$_showHeaderTooltip = function (cell, options) {
	        var grid = this.grid;
	        var tm = grid.tooltipManager;
	        var lm = grid.layoutManager;
	        if (tm.visible && this._tooltipCell == cell) {
	            return;
	        }
	        this._hideTooltip();
	        var r = lm.getHeaderCellRect(cell.layout);
	        // var elt = headerCell;
	        // if (headerCell instanceof ColumnView) {
	        //     var x = grid.mouseX()+8, y = grid.mouseY();
	        // } else {
	        //     var br = headerCell.boundsBy();
	        //     var x = headerCell._column.isFixed() ? br.x : Math.max(br.x, lm.nonfixedBounds().x)
	        //     var y = br.y + br.height;
	        // }
	        var x = r.x;
	        var y = r.y + r.height;
	        tm.show(options, x, y, true);
	        this._tooltipCell = cell;
	    };
	    GridSelectionTool.prototype.$_cellButtonClicked = function (cell) {
	        var grid = this.grid;
	        var column = cell.layout.firstColumn;
	        if (column) {
	            var lm = grid.layoutManager;
	            var index = cell.getIndex(this._tempIndex);
	            var room = lm.getMergedCell(index);
	            // let view;
	            // if (room) {
	            // 	view = grid.getCellView(grid._mergeView, index, index.isFixedCol());
	            // } else {
	            // 	view = _cast(grid.getCellView(null, index), CellElement);
	            // }
	            // index = index.clone();
	            // if (view instanceof MergedDataCellElement) {
	            // 	index.setItemIndex(index.I()+view.innerIndex());
	            // }
	            switch (column.button) {
	                case Types.CellButton.POPUP:
	                    var menu = column.popupMenuName;
	                    var elt = grid.getCellViewOf(cell.cell);
	                    menu && elt && grid.popupMenuManager.show(menu, elt);
	                    break;
	                case Types.CellButton.ACTION:
	                    grid["_doCellButtonClicked"](index);
	                    break;
	                case Types.CellButton.IMAGE:
	                    // var renderer = column._imageButtonsRenderer;
	                    // if (renderer && buttonIndex >= 0 && buttonIndex < renderer._count ) {
	                    // 	var name = renderer._images[buttonIndex].name;
	                    // 	grid._fireImageButtonClicked(index, buttonIndex, name);
	                    // }
	                    break;
	            }
	        }
	    };
	    GridSelectionTool.prototype.$_commitCancel = function (item, options) {
	        var grid = this.grid;
	        try {
	            switch (item.itemState) {
	                case GridItem_1.ItemState.INSERTING:
	                    if (!grid.commit(options.forceInsert)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	                case GridItem_1.ItemState.APPENDING:
	                    if (!grid.commit(options.forceAppend)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	                case GridItem_1.ItemState.UPDATING:
	                    if (!grid.commit(options.commitWhenNoEdit)) {
	                        grid.cancel(true);
	                    }
	                    return true;
	            }
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError) {
	                err = grid._fireValidationFail(item.index, err.column, err);
	                err ? alert(options.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                return false;
	            }
	            if (err instanceof Validation.AbortError) {
	                return false;
	            }
	            throw err;
	        }
	        return false;
	    };
	    GridSelectionTool.prototype.$_checkAppending = function (index, cancel, clickIndex) {
	        if (cancel === void 0) { cancel = false; }
	        if (clickIndex === void 0) { clickIndex = null; }
	        var grid = this.grid;
	        if (index.itemIndex == grid.itemCount - 1 && GridItem_1.ItemState_isInserting(index.item.itemState)) {
	            var idx = index.itemIndex;
	            if (!clickIndex || clickIndex.itemIndex != idx) {
	                try {
	                    if (grid.commit(grid.editOptions.forceAppend, true)) {
	                        index = index.clone();
	                        index.itemIndex = idx;
	                        if (!grid.isValid(index)) {
	                            index.itemIndex = grid.getItemIndexOfRow(grid.dataSource.rowCount - 1);
	                        }
	                        this.setFocused(index, true);
	                    }
	                    else if (cancel) {
	                        grid.cancel(true);
	                        clickIndex && this.setFocused(clickIndex, true);
	                    }
	                }
	                catch (err) {
	                    if (err instanceof Validation.ValidationError) {
	                        err = grid._fireValidationFail(idx, err.column, err);
	                        err ? alert(grid.editOptions.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                        return true;
	                    }
	                    if (err instanceof Validation.AbortError) {
	                        return true;
	                    }
	                    throw err;
	                }
	                return true;
	            }
	        }
	        return false;
	    };
	    return GridSelectionTool;
	}(GridTool));
	exports.GridSelectionTool = GridSelectionTool;
	});

	unwrapExports(GridTool_1);
	var GridTool_2 = GridTool_1.FocusView;
	var GridTool_3 = GridTool_1.RowBlockView;
	var GridTool_4 = GridTool_1.HeaderCellResizer;
	var GridTool_5 = GridTool_1.HeaderCellFeedback;
	var GridTool_6 = GridTool_1.HeaderCellMover;
	var GridTool_7 = GridTool_1.GridTool;
	var GridTool_8 = GridTool_1.RowHoverView;
	var GridTool_9 = GridTool_1.RowFocusView;
	var GridTool_10 = GridTool_1.GridSelectionTool;

	var EditControllers = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditControllers.ts
	// 2019. 10. 21. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });









	var EditValueCommand = /** @class */ (function (_super) {
	    __extends(EditValueCommand, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function EditValueCommand(row, field, value, column) {
	        var _this = _super.call(this) || this;
	        _this._row = row;
	        _this._field = field;
	        _this._value = value;
	        _this._column = column;
	        _this._oldValue = row.getData(field);
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    EditValueCommand.prototype.undo = function () {
	        this._row.setData(this._field, this._oldValue);
	        this.$_focusCell();
	    };
	    EditValueCommand.prototype.redo = function () {
	        this._row.setData(this._field, this._value);
	        this.$_focusCell();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    EditValueCommand.prototype.$_focusCell = function () {
	        var grid = this._column.grid;
	        var index = grid.focusedIndex.clone();
	        index.layout = this._column.layout;
	        grid.setFocusedIndex(index);
	        grid.makeCellVisible(index);
	    };
	    return EditValueCommand;
	}(EditCommand_1.EditCommand));
	var DefaultEditController = /** @class */ (function (_super) {
	    __extends(DefaultEditController, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DefaultEditController(grid) {
	        var _this = _super.call(this) || this;
	        _this._editIndex = new CellIndex_1.CellIndex();
	        _this._editors = [];
	        _this._starting = false;
	        _this._editRow = -1;
	        //private _editState = UNDEFINED;
	        _this._needPrepare = false;
	        _this._modified = false;
	        _this._commiting = false;
	        _this._canceling = false;
	        _this._resetting = false;
	        _this._dirty = false;
	        _this._editable = false;
	        _this._readOnly = false;
	        _this.$_editFocused = false;
	        _this._resetFocused = false;
	        _this._style = new GridColumn_1.ColumnStyle();
	        _this._grid = grid;
	        // test code에서 defaultEditor가 생성되지 않을 수 있다!
	        _this._defaultEditor = grid.delegate.getDefaultCellEditor(); // this._createDefaultCellEditor();
	        _this._defaultEditor && _this._defaultEditor.setController(_this);
	        _this._defaultEditor && _this._internalHideEditor(_this._defaultEditor);
	        return _this;
	    }
	    DefaultEditController.prototype._doDispose = function () {
	        this._grid = null;
	        this._editIndex && this._editIndex.dispose();
	        this._editIndex = null;
	        this._editor && this._editor.dispose();
	        this._editor = null;
	        this._defaultEditor && this._defaultEditor.dispose();
	        this._defaultEditor = null;
	        this._editor = null;
	        this._editors = null; // 사용하는지 확인 필요.
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(DefaultEditController.prototype, "readOnly", {
	        //-------------------------------------------------------------------------
	        // EditController
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._readOnly;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultEditController.prototype, "editable", {
	        get: function () {
	            return this._editable;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DefaultEditController.prototype.onEditorStart = function (editor) {
	        if (!editor.visible && !this._commiting && !this._canceling) {
	            return this._activateEditor(false, false);
	        }
	    };
	    DefaultEditController.prototype.onEditorKeyDown = function (editor, event) {
	        var ctrl = event.ctrlKey; // TODO Mac일때 처리 관련 
	        if (this._editor) ;
	        return this._grid.activeTool.keyDown(event);
	    };
	    DefaultEditController.prototype.onEditorKeyPress = function (editor, event) {
	        return this._grid.activeTool.keyPress(event);
	    };
	    DefaultEditController.prototype.onEditorKeyUp = function (editor, event) {
	        return this._grid.activeTool.keyUp(event);
	    };
	    DefaultEditController.prototype.onEditorChange = function (editor) {
	        if (!this._modified) {
	            this._modified = true;
	            this._grid["_editorStarted"](this._editor, this._editIndex);
	        }
	        if (this.editing) {
	            this._grid.makeCellVisible(this._editIndex);
	            this._grid["_editorChange"](this._editor, this._editIndex, this._editor.getEditValue(false, false)); //, this._editor.getEditText());
	        }
	    };
	    DefaultEditController.prototype.onEditorSearch = function (editor, text) {
	        this._grid["_editorSearch"](this._editor, this._editIndex, text);
	    };
	    DefaultEditController.prototype.onSearchCellButtonClick = function (editor, text) {
	        return this._grid["_searchCellButtonClick"](this._editor, this._editIndex, text);
	    };
	    DefaultEditController.prototype.onEditorCommit = function (editor) {
	        return this.commitEditor(true);
	    };
	    Object.defineProperty(DefaultEditController.prototype, "editIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** editIndex */
	        get: function () {
	            return this._editIndex.clone();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultEditController.prototype, "editing", {
	        /** editing */
	        get: function () {
	            return this._editor && this._editor.editing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DefaultEditController.prototype, "editValue", {
	        /** editValue */
	        get: function () {
	            return this._editor && this._editor.value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DefaultEditController.prototype.setFocus = function (force, target) {
	        this.$_focusToEditor(force, target);
	    };
	    DefaultEditController.prototype.resetEditor = function (resetValue) {
	        if (this.editing) {
	            if (!this._grid.isValid(this._editIndex)) {
	                this.hideEditor();
	            }
	            else {
	                this._resetBounds();
	                if (resetValue && this.editing) {
	                    var v = this.getData(this._editIndex);
	                    this._resetting = true;
	                    try {
	                        this._editor.setEditValue(v);
	                        this._editor.beginEdit(false, true);
	                    }
	                    finally {
	                        this._resetting = false;
	                    }
	                }
	            }
	        }
	    };
	    DefaultEditController.prototype.reprepareEditor = function (index) {
	        if (CellIndex_1.CellIndex.areEquals(index, this._editIndex)) {
	            if (this.editing) {
	                this._editor.selectAll();
	            }
	            else {
	                this._prepareEditor(index);
	            }
	        }
	    };
	    DefaultEditController.prototype.invalidateEditor = function () {
	        this._dirty = true;
	    };
	    DefaultEditController.prototype.closeList = function (accept) {
	        if (this._editor) {
	            this._editor.closeList(accept);
	        }
	    };
	    DefaultEditController.prototype.focusedIndexChanging = function () {
	        if (this.editing) {
	            this.closeList(true);
	            return this.commitEditor(true);
	        }
	        return true;
	    };
	    DefaultEditController.prototype.focusedIndexChanged = function (oldIndex, newIndex, prepare) {
	        this._hideEditor();
	        if (this._grid.isValid(newIndex)) {
	            if (prepare) {
	                this._prepareEditor(newIndex);
	            }
	            else {
	                this._needPrepare = true;
	            }
	        }
	    };
	    DefaultEditController.prototype.prepareEditor = function (index) {
	        if (this._needPrepare) {
	            this._needPrepare = false;
	            if (this._grid.isValid(index)) {
	                this._prepareEditor(index);
	            }
	        }
	    };
	    DefaultEditController.prototype.dataColumnChanged = function (column) {
	        if (column && this._editor && this._editIndex && this._editIndex.dataColumn === column) {
	            var readOnly = !column.editable || column.readOnly;
	            if (readOnly != (!this._editable || this._readOnly)) {
	                if (this.editing) {
	                    this._editor.setReadOnly(readOnly);
	                }
	                else {
	                    this._prepareEditor(this._editIndex);
	                }
	            }
	        }
	    };
	    DefaultEditController.prototype.showEditor = function (index, dropdown) {
	        var grid = this._grid;
	        if (grid && grid.isValid(index)) {
	            if (this._editor && this._editor.editing) {
	                grid.makeCellVisible(index);
	                return true;
	            }
	            var canShow = /*(grid.isItemEditing(item) || grid.canUpdate(item, index.dataField())) &&*/ 
	            /* grid.canEdit(index) &&*/ this._editor && !this._editor.editing;
	            if (canShow) {
	                !this._showEditorTimer && this._prepareEditor(index);
	                // if (this._editor) {
	                // 	if (!this._editor.isTextReadOnly || !this._editor.isTextReadOnly()) {
	                // 		this._editor.setReadOnly(this._readOnly);
	                // 	} else if (this._editor.isTextReadOnly && this._editor.isTextReadOnly()){
	                // 		this._editor._editor && (this._editor._editor.readOnly = this._editor.isTextReadOnly()); 
	                // 	}
	                // }
	                grid.makeCellVisible(index);
	                return this._activateEditor(false, true, dropdown);
	            }
	        }
	        return false;
	    };
	    DefaultEditController.prototype.caretToLast = function () {
	        this._editor && this._editor.caretToLast();
	    };
	    DefaultEditController.prototype.hideEditor = function () {
	        if (this.editing) {
	            this._modified = false;
	            this._resetting = true;
	            try {
	                this._internalHideEditor(this._editor);
	                this._prepareEditor(this._editIndex);
	            }
	            finally {
	                this._resetting = false;
	            }
	        }
	    };
	    DefaultEditController.prototype.commitEditor = function (hideEditor, throwError) {
	        if (throwError === void 0) { throwError = false; }
	        if (!this.editing || this._commiting) {
	            return true;
	        }
	        var editor = this._editor;
	        if (!editor)
	            return false;
	        var grid = this._grid;
	        var editOptions = grid.editOptions;
	        var index = this._editIndex;
	        var column = index.dataColumn;
	        var commit = true;
	        var mask = editor["_mask"];
	        var v;
	        var err;
	        this._commiting = true;
	        try {
	            editor.commit();
	            if (this._modified || editor.isEdited()) {
	                if (column && column.dataIndex >= 0) {
	                    try {
	                        try {
	                            v = mask && !mask["checkValid"]() ? Editors.CellEditor.InvalidFormat : editor.getEditValue(true, true);
	                            if (v === Editors.CellEditor.InvalidFormat) {
	                                commit = false;
	                                editOptions.showInvalidFormatMessage && mask && mask.showInvalidFormatMessage && alert((mask && mask.invalidFormatMessage) || editOptions.invalidFormatMessage);
	                            }
	                            else if (v === Editors.CellEditor.Unselected) {
	                                commit = false;
	                            }
	                            else {
	                                var editResult = { text: editor.getEditText(), value: v };
	                                this._grid.getEditValue(editor, index, editResult);
	                                v = editResult.value;
	                                commit = this._grid.editorCommit(editor, index, this._getData(index), v);
	                            }
	                        }
	                        catch (e) {
	                            // err = e;
	                            //_trace(e.message || e);
	                            commit = false;
	                        }
	                        if (!this._grid.isItemEditing()) {
	                            this._modified = false;
	                        }
	                        else if (commit) {
	                            this._setData(index, v);
	                            if (this._grid.isItemEditing(index.item)) {
	                                v = this._getData(index);
	                                this._grid.validateCellCommit(index, v);
	                            }
	                            this._modified = false;
	                        }
	                    }
	                    catch (e) {
	                        err = e;
	                        commit = false;
	                    }
	                }
	            }
	            this._resetting = true;
	            if (hideEditor) {
	                try {
	                    this._internalHideEditor(editor);
	                    this._prepareEditor(index);
	                }
	                finally {
	                    this._resetting = false;
	                }
	            }
	            if (err) {
	                //_trace(err.message || err);
	                if (throwError) {
	                    throw err;
	                }
	                else if (editOptions.showCommitError) {
	                    alert(err.message || err);
	                }
	            }
	        }
	        finally {
	            this._commiting = false;
	        }
	        if (commit && this._isCellEditing()) {
	            var rs = grid.itemSource;
	            if (!rs.commit()) {
	                rs.cancel();
	                return true;
	            }
	        }
	        return commit;
	    };
	    DefaultEditController.prototype.cancelEditor = function (hideEditor) {
	        if (!this.editing) {
	            return;
	        }
	        this._canceling = true;
	        try {
	            try {
	                this._modified = false;
	                this._grid.editorCancel(this._editor, this._editIndex);
	            }
	            catch (err) {
	                throw err;
	            }
	            this._resetting = true;
	            try {
	                this._internalHideEditor(this._editor);
	                this._prepareEditor(this._editIndex);
	            }
	            finally {
	                this._resetting = false;
	            }
	        }
	        finally {
	            this._canceling = false;
	            this._grid.editorCanceled();
	        }
	        if (this._grid.editOptions.commitByCell) {
	            var rs = this._grid.itemSource;
	            if (rs.isUpdating) {
	                rs.cancel();
	            }
	        }
	    };
	    DefaultEditController.prototype.fillSearchItems = function (column, searchKey, values, labels) {
	        if (this.editing && this._editIndex.column === column && this._editor instanceof ListEditors.SearchCellEditor) {
	            this._editor.fillItems(searchKey, values, labels);
	        }
	    };
	    DefaultEditController.prototype.buttonClicked = function (index) {
	        if (this._editor && CellIndex_1.CellIndex.areEquals(this._editIndex, index) && this._editor.hasButton) {
	            this._editor.buttonClicked(this._editIndex);
	        }
	    };
	    DefaultEditController.prototype.getData = function (index) {
	        throw new Error("Method not implemented.");
	    };
	    DefaultEditController.prototype.setEditValue = function (value, dropDown) {
	        this._editor && this._editor.setCellEditValue(value, dropDown);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    // protected _createDefaultCellEditor(): CellEditor {
	    //     // test code에서 grid에 container가 설정되지 않을 수 있다.
	    //     if (this._grid.container) {
	    //         const parent = this._grid.container["_container"];
	    //         const editor = new LineCellEditor(this._grid, parent);
	    //         return editor;
	    //     }
	    //     return null;
	    // }
	    DefaultEditController.prototype._internalHideEditor = function (editor) {
	        this.closeList(false);
	        editor.setVisible(false, false);
	        editor.endEdit();
	        !this._grid["_loading"] && this._grid["_fireHideEditor"](editor["_editIndex"]);
	    };
	    DefaultEditController.prototype.$_hideEdit = function (index, editor) {
	        if (editor) {
	            //editor.setReadOnly(this._readOnly = true);
	            editor.setEditIndex(index);
	            editor.setVisible(false);
	            this.$_focusToEditor();
	        }
	    };
	    DefaultEditController.prototype.$_getCellEditor = function (index) {
	        // TODO: BodyTableCell 에 설정된 값들을 이용해야 한다!
	        var grid = this._grid;
	        var merged = false;
	        var cell = grid.body.getCell(index, merged);
	        var style = grid.body.getCellStyle(cell, this._style.clear());
	        var e = style.editor;
	        if (!e) {
	            var col = index.valueColumn;
	            if (col)
	                e = col.editor;
	        }
	        var editor = grid.delegate.getCellEditor(GridColumn_1.ColumnStyle.getEditorType(e));
	        if (editor) {
	            editor.initOptions();
	            e && editor.applyOptions(e);
	            editor.setController(this);
	        }
	        return editor;
	    };
	    // getCellEditor2(index: CellIndex): CellEditor {
	    // 	const grid = this._grid;
	    // 	const column = index.column;
	    //     const editor = this._grid.delegate.getEditorAt(index);
	    // 	//index.item && grid.body.getCell(index); // dynamicStyle적용.
	    // 	//const options = grid.getCellEditorOptions(index) || column.editorOptions();
	    // 	editor.initOptions();
	    // 	//options && this._editor.applyOptions(options);		
	    // 	return editor;
	    // }
	    DefaultEditController.prototype._prepareEditor = function (index) {
	        this._dirty = false;
	        if (!this._grid.isValid(index)) {
	            return;
	        }
	        this._hideEditor();
	        this._editor = this.$_getCellEditor(index);
	        if (!this._editor) {
	            return;
	        }
	        this._editIndex.assign(index);
	        this._editor.setReadOnly(false);
	        var grid = this._grid;
	        var options = grid.editOptions;
	        var editorOpts = grid.editorOptions;
	        var column = index.valueColumn;
	        var item = index.item;
	        var itemState = item.itemState;
	        var row = GridItem_1.ItemState_isInserting(itemState) ? -1 : index.dataRow;
	        //const style = null;//grid.itemSource.getCellStyle(row, index.dataField);
	        var editable = grid.canEdit(index);
	        // if (style) {
	        // 	editable = style.isEditable(editable);
	        // };
	        editorOpts["_titleExprStatement"] && this._editor.setEditorTitle(index);
	        if (!editable) {
	            this.$_hideEdit(index, this._editor);
	            return;
	        }
	        var readOnly = undefined; // style ? style.isReadOnly(false) : undefined;
	        if (readOnly === undefined && (readOnly = grid.getCellReadOnly(index)) === undefined) {
	            readOnly = options.readOnly || column["readOnly"] || (!GridItem_1.ItemState_isInserting(itemState) && !grid.canUpdate(item, index.dataField));
	        }
	        var ds = item.dataSource;
	        var field = ds ? ds.getField(index.dataField) : null;
	        this._readOnly = readOnly || !field || !field.updatable || !index.dataColumn || field.dataType == Types.ValueType.OBJECT;
	        this._editor.setReadOnly(this._readOnly);
	        this._editor.setEditIndex(index);
	        this._editable = true;
	        this._editor.clear();
	        var v = this._getData(index);
	        this._editor.setEditValue(v);
	        this._editor.selectAll();
	        if (options.editWhenFocused && !this._editor.editing) {
	            if (this._showEditorTimer) {
	                clearTimeout(this._showEditorTimer);
	            }
	            if (!this._canceling) {
	                this._showEditorTimer = setTimeout(function () {
	                    grid.showEditor();
	                    this._showEditorTimer = null;
	                }.bind(this), 100);
	            }
	        }
	        else {
	            this._editor.setVisible(false);
	        }
	        this.$_focusToEditor();
	    };
	    DefaultEditController.prototype._hideEditor = function () {
	        if (this._editor) {
	            try {
	                this._editor.clear();
	                this._editor.setVisible(false);
	            }
	            finally {
	                this._editor.endEdit();
	                this._editor = null;
	                this._editable = false;
	                this.$_focusToEditor();
	            }
	        }
	    };
	    DefaultEditController.prototype._initEditor = function (bClear, bSelect, bDropdown) {
	        if (this._dirty) {
	            this._dirty = false;
	            if (!this._starting) {
	                this._prepareEditor(this._editIndex);
	            }
	        }
	        var editor = this._editor;
	        if (editor) {
	            editor.endEdit();
	            this._resetBounds();
	            editor.setVisible(true);
	            editor.beginEdit(bClear, bSelect);
	            bClear && editor.clear();
	            bSelect && editor.selectAll();
	            bDropdown && editor.dropDownList(false);
	            this.$_focusToEditor(true);
	        }
	    };
	    DefaultEditController.prototype._setEditAttribute = function (attrs) {
	        var editor = this._editor;
	        if (editor) {
	            for (var attr in attrs) {
	                if (attr === "callback")
	                    continue;
	                editor["_editor"].setAttribute(attr, attrs[attr]);
	            }
	            if (attrs.callback && typeof attrs.callback == "function") {
	                attrs.callback();
	            }
	        }
	    };
	    DefaultEditController.prototype._editorActivated = function (editor) {
	        this._grid.editorActivated(editor);
	    };
	    DefaultEditController.prototype._activateEditor = function (bClear, bSelect, bDropdown) {
	        if (bDropdown === void 0) { bDropdown = false; }
	        var grid = this._grid;
	        var editor = this._editor;
	        var index = this._editIndex;
	        var attrs = {};
	        if (this._editable && editor && !editor.editing && grid.canShowEditor(index, attrs)) {
	            // if (!editor.isTextReadOnly || !editor.isTextReadOnly()) {
	            // 	editor.setReadOnly(this._readOnly);
	            // } else if (editor.isTextReadOnly && editor.isTextReadOnly()){
	            // 	editor._editor && (editor._editor.readOnly = editor.isTextReadOnly()); 
	            // }
	            this._initEditor(bClear, bSelect, bDropdown);
	            this._modified = false;
	            this._editorActivated(this._editor);
	            this._setEditAttribute(attrs);
	            return true;
	        }
	        return false;
	    };
	    DefaultEditController.prototype._resetBounds = function () {
	        if (this._editor) {
	            var r = this._grid.getEditBounds(this._editIndex);
	            r.x--;
	            r.y--;
	            r.width++;
	            r.height++;
	            /**
	             * ie에서 편집기가 그리드 크기 밖에 있는 상태에서,
	             * 편집기가 새로 focus를 받으면 편집기를 표시하기 위해 canvas를 강제 스크롤 시키고 있다.
	             * 편집기 너비/높이를 0으로 하면 그렇게 동작하지 않는다.
	             */
	            if (Utils_1.Utils.isIE && r.right > this._grid.width + 3) {
	                this._editor.setBounds(r.x + 10000, r.y, 0, 0);
	            }
	            else {
	                this._editor.setBounds(r.x, r.y, r.width, r.height);
	            }
	            r = this._grid.getEditCellBounds(this._editIndex);
	            this._editor.setCellBounds(r.x, r.y, r.width, r.height);
	            if (r.x < 0) {
	                this._resetFocused = true;
	            }
	        }
	    };
	    DefaultEditController.prototype.$_focusToEditor = function (force, target) {
	        if (force === void 0) { force = false; }
	        if (force || this._grid["$_editFocused"]) {
	            var grid = this._grid;
	            var editor = this._editor || this._defaultEditor;
	            grid["$_showFocusCell"] = grid["$_showFocusCell"] || (target && editor && target !== editor["_editor"]);
	            grid.container["_setFocusAndScroll"](editor);
	            if (!this.editing) {
	                this._editor && this._editor.selectAll();
	            }
	        }
	    };
	    DefaultEditController.prototype.$_focusToContainer = function () {
	    };
	    DefaultEditController.prototype._getData = function (index) {
	        var item = index.item;
	        if (item) {
	            var idx = index.dataColumn.dataIndex;
	            if (idx >= 0) {
	                return item.getData(idx);
	            }
	        }
	        return undefined;
	    };
	    DefaultEditController.prototype._setData = function (index, value) {
	        var item = index.item;
	        if (item) {
	            var idx = index.dataColumn.dataIndex;
	            if (idx >= 0) {
	                if (this._grid.undoable) {
	                    this._grid.execute(new EditValueCommand(index.item, idx, value, index.column));
	                }
	                else {
	                    item.setData(idx, value);
	                }
	            }
	        }
	    };
	    DefaultEditController.prototype._isEditKey = function (key) {
	        return (key == 8) || //backspace
	            (key >= 46 && key <= 90) || // delete, 0-9a-z
	            (key >= 96 && key <= 111) || // numberpad 0-9, *+-./
	            (key >= 186 && key <= 222) || // special char
	            (key == Types.Keys.ENTER && this._grid.editOptions.enterToEdit);
	    };
	    DefaultEditController.prototype._isCellEditing = function () {
	        if (this._grid.editOptions.commitByCell) {
	            var rs = this._grid.itemSource;
	            return rs.isUpdating; // rs.isEditing();
	        }
	        return false;
	    };
	    return DefaultEditController;
	}(Base_1.Base));
	exports.DefaultEditController = DefaultEditController;
	});

	unwrapExports(EditControllers);
	var EditControllers_1 = EditControllers.DefaultEditController;

	var GridDelegate_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridDelegate.ts
	// 2019. 10. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });








	var GridDelegate = /** @class */ (function (_super) {
	    __extends(GridDelegate, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridDelegate(grid) {
	        var _this = _super.call(this) || this;
	        _this._cellEditors = {};
	        _this._customRenderers = {};
	        _this._grid = grid;
	        return _this;
	    }
	    GridDelegate.prototype._doDispose = function () {
	        this._grid = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridDelegate.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridDelegate.prototype.getDefaultCellEditor = function () {
	        if (!this._defaultEditor) {
	            var parent = this._grid.container["_container"];
	            this._defaultEditor = new Editors.LineCellEditor(this._grid, parent);
	            //this._cellEditors[null] = this._defaultEditor;
	            this._defaultEditor.setController(this._grid.editController);
	        }
	        return this._defaultEditor;
	    };
	    GridDelegate.prototype.getCellEditor = function (editorType) {
	        var parent = this._grid.container["_container"];
	        var editor = this._cellEditors[editorType];
	        if (!editor) {
	            switch (editorType) {
	                case "list":
	                case "dropdown":
	                    editor = new ListEditors.DropDownCellEditor(this._grid, parent);
	                    break;
	                case "multiline":
	                    editor = new Editors.MultiLineCellEditor(this._grid, parent);
	                    break;
	                case "number":
	                    editor = new Editors.NumberCellEditor(this._grid, parent);
	                    break;
	                case "date":
	                    editor = new DateEditors.DateCellEditor(this._grid, parent);
	                    break;
	                case "btdate":
	                    editor = new DateEditors.BTDateCellEditor(this._grid, parent);
	                    break;
	                case "search":
	                    editor = new ListEditors.SearchCellEditor(this._grid, parent);
	                    break;
	                case "checklist":
	                    //case "multicheck":
	                    editor = new ListEditors.MultiCheckCellEditor(this._grid, parent);
	                    break;
	                case "password":
	                    editor = new Editors.PasswordCellEditor(this._grid, parent);
	                    break;
	                case "line":
	                default:
	                    editor = this.getDefaultCellEditor();
	                    break;
	            }
	            this._cellEditors[editorType] = editor;
	            editor && editor.setController(this._grid.editController);
	        }
	        return editor;
	    };
	    GridDelegate.prototype.createRenderer = function (rendererType, config) {
	        var r = null;
	        if (rendererType) {
	            switch (rendererType) {
	                case CellRenderers.TextCellRenderer.TYPE:
	                    r = new CellRenderers.TextCellRenderer();
	                    break;
	                case CellRenderers.BarCellRenderer.TYPE:
	                    r = new CellRenderers.BarCellRenderer();
	                    break;
	                case CellRenderers.ImageCellRenderer.TYPE:
	                    r = new CellRenderers.ImageCellRenderer();
	                    break;
	                case CellRenderers.IconCellRenderer.TYPE:
	                    r = new CellRenderers.IconCellRenderer();
	                    break;
	                case CellRenderers.CheckCellRenderer.TYPE:
	                    r = new CellRenderers.CheckCellRenderer();
	                    break;
	                case CellRenderers.ButtonCellRenderer.TYPE:
	                    r = new CellRenderers.ButtonCellRenderer();
	                    break;
	                case CellRenderers.ShapeCellRenderer.TYPE:
	                    r = new CellRenderers.ShapeCellRenderer();
	                    break;
	                case CellRenderers.LinkCellRenderer.TYPE:
	                    r = new CellRenderers.LinkCellRenderer();
	                    break;
	                case CellRenderers.SignalBarCellRenderer.TYPE:
	                    r = new CellRenderers.SignalBarCellRenderer();
	                    break;
	                case CellRenderers.Code39CellRenderer.TYPE:
	                    r = new CellRenderers.Code39CellRenderer();
	                    break;
	                case CellRenderers.Code128CellRenderer.TYPE:
	                    r = new CellRenderers.Code128CellRenderer();
	                    break;
	                case SeriesRenderers.SeriesTextCellRenderer.SERIES_TYPE:
	                    r = new SeriesRenderers.SeriesTextCellRenderer();
	                    break;
	                case SeriesRenderers.SparkLineRenderer.TYPE:
	                    r = new SeriesRenderers.SparkLineRenderer();
	                    break;
	                case SeriesRenderers.SparkColumnRenderer.TYPE:
	                    r = new SeriesRenderers.SparkColumnRenderer();
	                    break;
	                case SeriesRenderers.SparkWinLossRenderer.TYPE:
	                    r = new SeriesRenderers.SparkWinLossRenderer();
	                    break;
	                case TemplateRenderer.TemplateCellRenderer.TYPE:
	                    r = new TemplateRenderer.TemplateCellRenderer();
	                    break;
	            }
	            if (!r) {
	                var t = this._customRenderers[rendererType];
	                if (typeof t === 'function') {
	                    r = new t(rendererType);
	                }
	                else {
	                    r = new CustomRenderer.CustomCellRendererImpl(t, rendererType);
	                }
	            }
	            if (!r) {
	                console.log("Renderer type is invalid: " + rendererType);
	                debugger;
	                r = new CellRenderers.TextCellRenderer();
	            }
	            if (config) {
	                r.assignFrom(config);
	            }
	        }
	        return r;
	    };
	    GridDelegate.prototype.hasEditorButton = function (editorType) {
	        if (editorType) {
	            switch (editorType) {
	                case "list":
	                case "dropdown":
	                case "date":
	                case "btdate":
	                case "search":
	                case "checklist":
	                    //case "multicheck":
	                    return true;
	                case "multiline":
	                case "number":
	                case "line":
	                default:
	                    return false;
	            }
	        }
	        return false;
	    };
	    GridDelegate.prototype.addCustomRenderer = function (type, renderer) {
	        if (type && renderer) {
	            this._customRenderers[type] = renderer;
	        }
	    };
	    GridDelegate.prototype.removeCustomRenderer = function (type) {
	        delete this._customRenderers[type];
	    };
	    GridDelegate.prototype.clearCustomRenderers = function () {
	        this._customRenderers = {};
	    };
	    return GridDelegate;
	}(Base_1.Base));
	exports.GridDelegate = GridDelegate;
	});

	unwrapExports(GridDelegate_1);
	var GridDelegate_2 = GridDelegate_1.GridDelegate;

	var Lookup = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Lookup.ts
	// 2019. 12. 06. created by flowmt
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var LookupSource = /** @class */ (function (_super) {
	    __extends(LookupSource, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LookupSource(id) {
	        var _this = _super.call(this) || this;
	        _this._id = id;
	        return _this;
	    }
	    Object.defineProperty(LookupSource.prototype, "id", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** id */
	        get: function () {
	            return this._id;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    LookupSource.prototype.exists = function (keys) {
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    LookupSource.prototype._changed = function () {
	        this.fireEvent(LookupSource.CHANGED);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    LookupSource.CHANGED = "onLookupSourceChanged";
	    return LookupSource;
	}(EventAware_1.EventAware));
	exports.LookupSource = LookupSource;
	var LookupTree = /** @class */ (function (_super) {
	    __extends(LookupTree, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LookupTree(id, levels, ordered) {
	        if (levels === void 0) { levels = 0; }
	        if (ordered === void 0) { ordered = false; }
	        var _this = _super.call(this, id) || this;
	        if (levels < 1) {
	            throw "LookupTable levels must be equals or greater than 1";
	        }
	        _this._levels = levels;
	        _this._tree = {};
	        _this._listMap = ordered ? {} : null;
	        return _this;
	    }
	    LookupTree.prototype._doDispose = function () {
	        this._tree = this._listMap = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    LookupTree.prototype.clear = function () {
	        this._tree = this._listMap = {};
	        this._changed();
	    };
	    // load(options: ConfigObject): void {
	    // };
	    LookupTree.prototype.exists = function (keys) {
	        var len;
	        keys = Utils_1.Utils.makeArray(keys);
	        if (keys && (len = keys.length) > 0 && len <= this._levels) {
	            len = Math.min(len, this._levels) - 1;
	            if (len > 0) {
	                var key = void 0, map = this._tree;
	                for (var i = 0; i < len; i++) {
	                    key = keys[i];
	                    map = map[key];
	                    if (!map) {
	                        break;
	                    }
	                }
	                return map != null && map.hasOwnProperty(keys[len]);
	            }
	            else {
	                return this._tree.hasOwnProperty(keys[0]);
	            }
	        }
	        return false;
	    };
	    LookupTree.prototype.fill = function (keys, values) {
	        if (keys && keys.length > 0 && values && values.length > 0) {
	            var cnt = Math.min(keys.length, values.length);
	            for (var i = 0; i < cnt; i++) {
	                var k = Utils_1.Utils.makeArray(keys[i]);
	                this.$_add(k, values[i]);
	            }
	            this._changed();
	        }
	    };
	    LookupTree.prototype.fillRows = function (rows) {
	        if (rows && rows.length > 0) {
	            for (var i = 0, cnt = rows.length; i < cnt; i++) {
	                this.$_addRow(rows[i]);
	            }
	            this._changed();
	        }
	    };
	    LookupTree.prototype.add = function (keys, value) {
	        if (keys) {
	            this.$_add(keys, value);
	            this._changed();
	        }
	    };
	    LookupTree.prototype.addRow = function (row) {
	        if (row) {
	            this.$_addRow(row);
	            this._changed();
	        }
	    };
	    LookupTree.prototype.lookup = function (keys, valueSeparator) {
	        var map, key;
	        if (this._levels > 1) {
	            var i = void 0, len = this._levels - 1;
	            map = this._tree;
	            for (i = 0; i < len; i++) {
	                key = keys[i];
	                map = map[key];
	                if (!map) {
	                    break;
	                }
	            }
	        }
	        else {
	            map = this._tree;
	        }
	        key = keys[keys.length - 1];
	        if (map && key && valueSeparator) {
	            // multiCheck인경우 마지막 key값이 여러개일수 있다.
	            var values = key.split(valueSeparator);
	            var ret = [];
	            for (var i = 0, cnt = values.length; i < cnt; i++) {
	                ret.push(map[values[i]] ? map[values[i]] : values[i]);
	            }
	            return ret.join(valueSeparator);
	        }
	        else {
	            return map ? map[key] : undefined;
	        }
	    };
	    LookupTree.prototype.getDomain = function (keys) {
	        if (!keys || keys.length != this._levels - 1) {
	            throw "Keys length must be " + (this._levels - 1);
	        }
	        var i, cnt, key;
	        var dic = this._tree;
	        var domain = [], values = [];
	        if (this._levels > 1) {
	            for (i = 0, cnt = keys.length; i < cnt; i++) {
	                key = keys[i];
	                if (!(dic = dic[keys[i]])) {
	                    return {
	                        keys: domain,
	                        values: values
	                    };
	                }
	            }
	        }
	        if (this._listMap) {
	            var list = this._listMap[keys.slice(0, keys.length).join("~!~")];
	            cnt = list ? list.length : 0;
	            for (i = 0; i < cnt; i++) {
	                domain.push(list[i]);
	                values.push(dic[list[i]]);
	            }
	        }
	        else {
	            for (var k in dic) {
	                domain.push(k);
	                values.push(dic[k]);
	            }
	        }
	        return {
	            keys: domain,
	            values: values
	        };
	    };
	    LookupTree.prototype.getTextDomain = function (keys) {
	        var domain = this.getDomain(keys);
	        var domainKeys = domain.keys;
	        var domainValues = domain.values;
	        for (var i = 0, cnt = domain.keys.length; i < cnt; i++) {
	            domainKeys[i] = domainKeys[i] ? String(domainKeys[i]) : null;
	            domainValues[i] = domainValues[i] ? String(domainValues[i]) : null;
	        }
	        return domain;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------    
	    LookupTree.prototype.$_add = function (keys, value) {
	        if (!keys) {
	            return;
	        }
	        keys = Utils_1.Utils.makeArray(keys);
	        var levels = this._levels;
	        var k;
	        if (keys.length < levels) {
	            throw Error("Keys length must be equals or greater than " + levels);
	        }
	        var i, key, node;
	        var map = this._tree;
	        for (i = 0; i < levels - 1; i++) {
	            key = keys[i];
	            node = map[key];
	            if (!node) {
	                node = {};
	                map[key] = node;
	            }
	            map = node;
	        }
	        map[k = keys[levels - 1]] = value;
	        if (this._listMap) {
	            var keyStr = keys.slice(0, keys.length - 1).join("~!~");
	            var list = this._listMap[keyStr];
	            if (!Utils_1.Utils.isArray(list)) {
	                list = [];
	                this._listMap[keyStr] = list;
	            }
	            list.push(k);
	        }
	    };
	    LookupTree.prototype.$_addRow = function (row) {
	        if (row) {
	            if (row.length - 1 < this._levels) {
	                throw Error("Keys length must be equals or greater than " + this._levels);
	            }
	            var v = row[this._levels];
	            row = row.slice(0, this._levels);
	            this.$_add(row, v);
	        }
	    };
	    return LookupTree;
	}(LookupSource));
	var LookupSourceProvider = /** @class */ (function (_super) {
	    __extends(LookupSourceProvider, _super);
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LookupSourceProvider() {
	        return _super.call(this) || this;
	    }
	    LookupSourceProvider.prototype._changed = function () {
	        this.fireEvent(LookupSourceProvider.CHANGED);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    LookupSourceProvider.CHANGED = "onLookupSourceProviderChanged";
	    return LookupSourceProvider;
	}(EventAware_1.EventAware));
	exports.LookupSourceProvider = LookupSourceProvider;
	var LocalLookupSourceProvider = /** @class */ (function (_super) {
	    __extends(LocalLookupSourceProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function LocalLookupSourceProvider(config) {
	        if (config === void 0) { config = null; }
	        var _this = _super.call(this) || this;
	        _this._sources = {};
	        config && _this.load(config);
	        return _this;
	    }
	    LocalLookupSourceProvider.prototype.dispose = function () {
	        return _super.prototype.dispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    LocalLookupSourceProvider.prototype.load = function (config) {
	        if (config = Utils_1.Utils.makeArray(config)) {
	            this._sources = {};
	            for (var i = 0, cnt = config.length; i < cnt; i++) {
	                this.$_add(config[i]);
	            }
	            this._changed();
	        }
	    };
	    LocalLookupSourceProvider.prototype.add = function (config) {
	        var source = this.$_add(config);
	        source && this._changed();
	        return source;
	    };
	    LocalLookupSourceProvider.prototype.remove = function (id) {
	        this.$_remove(id) && this._changed();
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    LocalLookupSourceProvider.prototype.getSource = function (id) {
	        return this._sources[id];
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------    
	    LocalLookupSourceProvider.prototype.$_createSource = function (src) {
	        if (src) {
	            var tree = new LookupTree(src.id, src.levels, src.ordered);
	            tree.fill(src.keys, src.values);
	            return tree;
	        }
	        else {
	            return null;
	        }
	    };
	    LocalLookupSourceProvider.prototype.$_add = function (config) {
	        if (config && config.id) {
	            if (this._sources[config.id] != config) {
	                var source = this.$_createSource(config);
	                if (source) {
	                    this.$_remove(config.id);
	                    this._sources[config.id] = source;
	                    source.addListener(this);
	                    return source;
	                }
	            }
	        }
	    };
	    LocalLookupSourceProvider.prototype.$_remove = function (id) {
	        if (id) {
	            var source = this._sources[id];
	            if (source) {
	                source.removeListener(this);
	                delete this._sources[id];
	                return true;
	            }
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    LocalLookupSourceProvider.prototype.onLookupSourceChanged = function (source) {
	        this._changed();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    LocalLookupSourceProvider.CHANGED = "onLookupSourceProviderChanged";
	    return LocalLookupSourceProvider;
	}(LookupSourceProvider));
	exports.LocalLookupSourceProvider = LocalLookupSourceProvider;
	});

	unwrapExports(Lookup);
	var Lookup_1 = Lookup.LookupSource;
	var Lookup_2 = Lookup.LookupSourceProvider;
	var Lookup_3 = Lookup.LocalLookupSourceProvider;

	var Clipboard = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Clipboard.ts
	// 2019. 12. 10. created by flowmt
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });








	var ClipboardData = /** @class */ (function (_super) {
	    __extends(ClipboardData, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ClipboardData() {
	        return _super.call(this) || this;
	    }
	    ClipboardData.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ClipboardData.prototype.lastColumn = function () {
	        throw new Error("Method not implemented.");
	    };
	    ClipboardData.prototype.getText = function (scope, range) {
	        throw new Error("Method not implemented.");
	    };
	    ClipboardData.prototype.getCellText = function (scope, index) {
	        throw new Error("Method not implemented.");
	    };
	    ClipboardData.prototype.getRows = function () {
	        throw new Error("Method not implemented.");
	    };
	    ClipboardData.prototype.getCell = function () {
	        throw new Error("Method not implemented.");
	    };
	    return ClipboardData;
	}(Base_1.Base));
	exports.ClipboardData = ClipboardData;
	var ClipboardSource = /** @class */ (function (_super) {
	    __extends(ClipboardSource, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ClipboardSource() {
	        var _this = _super.call(this) || this;
	        _this._colCount = 0;
	        _this._blockPaste = false;
	        return _this;
	    }
	    ClipboardSource.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ClipboardSource.prototype, "rowCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._lines.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ClipboardSource.prototype, "colCount", {
	        get: function () {
	            return this._colCount;
	        },
	        set: function (value) {
	            this._colCount = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ClipboardSource.prototype, "blockPaste", {
	        get: function () {
	            return this._blockPaste;
	        },
	        set: function (value) {
	            this._blockPaste = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ClipboardSource.prototype.isEmpty = function () {
	        return this._lines.length == 0 || this._colCount == 0;
	    };
	    ClipboardSource.prototype.isSingle = function () {
	        return this._lines.length == 1 && this._colCount == 1;
	    };
	    ClipboardSource.prototype.isBlockPaste = function () {
	        return this._blockPaste;
	    };
	    ClipboardSource.prototype.get = function (row) {
	        return this._lines[row];
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    ClipboardSource.prototype.$_parseQuoted = function (data, selection) {
	    };
	    return ClipboardSource;
	}(Base_1.Base));
	exports.ClipboardSource = ClipboardSource;
	var DefalutClipboardData = /** @class */ (function (_super) {
	    __extends(DefalutClipboardData, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DefalutClipboardData() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._columns = null;
	        return _this;
	    }
	    DefalutClipboardData.prototype._doDispose = function () {
	        return _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    DefalutClipboardData.prototype.lastColumn = function () {
	        return this._columns ? this._columns[this._columns.length - 1] : null;
	    };
	    DefalutClipboardData.prototype.getText = function (scope, range) {
	        var grid = scope.grid;
	        var cells = this.$_rangeToCells(scope, null, range);
	        var column, index;
	        var rows = [], itemIndex, itemMax, f, c;
	        if (grid.copyOptions.includeHeaderText) {
	            for (f = 0; f < cells.length; f++) {
	                var row = [];
	                for (c = 0; c < cells[f].length; c++) {
	                    column = Utils_1.Utils.cast(cells[f][c], GridColumn_1.DataColumn);
	                    if (column) {
	                        row.push(column.header.displayText);
	                    }
	                    else {
	                        row.push("");
	                    }
	                }
	                rows.push(row.join("\t"));
	            }
	        }
	        for (itemIndex = range.r1, itemMax = range.r2; itemIndex <= itemMax; itemIndex++) {
	            var item = grid.getItem(itemIndex);
	            if (item.dataRow >= 0 || GridItem_1.ItemState_isInserting(item.itemState)) {
	                for (f = 0; f < cells.length; f++) {
	                    var row = [];
	                    for (c = 0; c < cells[f].length; c++) {
	                        column = Utils_1.Utils.cast(cells[f][c], GridColumn_1.DataColumn);
	                        if (column && !column.blankWhenCopy) {
	                            index = CellIndex_1.CellIndex.temp(grid, itemIndex, column).clone();
	                            row.push(scope.getData(index));
	                        }
	                        else {
	                            row.push("");
	                        }
	                    }
	                    rows.push(row.join("\t"));
	                }
	            }
	        }
	        return rows.join("\r\n") + "\r\n";
	    };
	    DefalutClipboardData.prototype.getCellText = function (scope, index) {
	        var data = "";
	        var grid = scope.grid;
	        if (grid.copyOptions.includeHeaderText) {
	            data = index.dataColumn.header.displayText + '\r\n';
	        }
	        data += scope.getData(index);
	        return data;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    DefalutClipboardData.prototype.$_parseQuoted = function (data, selection) {
	    };
	    // source: 붙여넣기 할때 사용된다.
	    DefalutClipboardData.prototype.$_rangeToCells = function (scope, source, range) {
	        range.normalizeData();
	        var col1 = range.c1;
	        var col2 = range.c2;
	        if (col1 != col1.dataRoot) {
	            col1 = col1.dataRoot;
	        }
	        if (col2 != col2.dataRoot) {
	            col2 = col2.dataRoot;
	        }
	        // 1.0에서는 dataColumn, groupColumn으로 되어있었지만. 많이 변경되었다. 참고해서 정리하자.
	        // 선택된 모양의 2차원 배열을 만드는것이 목적이다.
	        // grid._activeCellLayout._root._items 전체.
	        // layout에 rows/cols가 해당 item(column,group)이 가지고 있는 셀정보이다.
	        // dataRoot가 있는 셀과 없는 셀... 구분...
	        var width = 0, height = 0, w, c, colCount, col;
	        var cells = [];
	        var roots = scope.getDataRoots();
	        var items = this._columns = [];
	        var c1 = roots.indexOf(col1);
	        var c2 = roots.indexOf(col2);
	        for (c = c1; c <= c2; c++) {
	            col = roots[c];
	            items.push(col);
	            width += col.firstColumn ? col.cols : 0;
	            height = Math.max(height, col.rows);
	        }
	        for (c = 0; c < height; c++) {
	            cells.push(new Array(width));
	        }
	        for (w = 0, c = 0, colCount = items.length; c < colCount; c++) {
	            this.$_setFields(items[c], cells, w, 0);
	            w += items[c].firstColumn ? items[c].cols : 0;
	        }
	        return cells;
	    };
	    DefalutClipboardData.prototype.$_setFields = function (item, cells, x, y) {
	        var r, i, gItem;
	        var g = Utils_1.Utils.cast(item, CellLayout.CellLayoutGroupItem);
	        if (!g) {
	            if (cells[y].length > x) {
	                cells[y][x] = item.firstColumn;
	            }
	        }
	        else {
	            if (g.vertical) {
	                r = y;
	                for (i = 0; i < g.visibleCount; i++) {
	                    gItem = g.getVisible(i);
	                    this.$_setFields(gItem, cells, x, r);
	                    r += gItem.rows;
	                }
	            }
	            else {
	                r = x;
	                for (i = 0; i < g.visibleCount; i++) {
	                    gItem = g.getVisible(i);
	                    this.$_setFields(gItem, cells, r, y);
	                    r += gItem.cols;
	                }
	            }
	        }
	    };
	    return DefalutClipboardData;
	}(ClipboardData));
	exports.DefalutClipboardData = DefalutClipboardData;
	var ClipboardItem = /** @class */ (function (_super) {
	    __extends(ClipboardItem, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ClipboardItem() {
	        return _super.call(this) || this;
	    }
	    Object.defineProperty(ClipboardItem.prototype, "isLeaf", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            throw new Error("Method not implemented.");
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return ClipboardItem;
	}(GridItem_1.GridItem));
	exports.ClipboardItem = ClipboardItem;
	var ClipboardIndex = /** @class */ (function (_super) {
	    __extends(ClipboardIndex, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ClipboardIndex(grid, item) {
	        var _this = _super.call(this, grid) || this;
	        _this._item = item;
	        return _this;
	    }
	    ClipboardIndex.prototype._doDispose = function () {
	        return _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(ClipboardIndex.prototype, "isLeaf", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            throw new Error("Method not implemented.");
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(ClipboardIndex.prototype, "item", {
	        get: function () {
	            return this._item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return ClipboardIndex;
	}(CellIndex_1.CellIndex));
	exports.ClipboardIndex = ClipboardIndex;
	var ClipboardManager = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function ClipboardManager(grid) {
	        this._grid = grid;
	        this._data = new DefalutClipboardData();
	        this._appendingItem = new ClipboardItem();
	        this._appendingIndex = new ClipboardIndex(grid, this._appendingItem);
	    }
	    ClipboardManager.prototype.dispose = function () {
	        return null;
	    };
	    Object.defineProperty(ClipboardManager.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._grid;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    ClipboardManager.prototype.getDataRoots = function () {
	        // TODO dataRoot를 가져오는 부분을 임시로 처리한다.
	        // CellLayout에서 처리되어야 할 부분이다.
	        // 
	        var dataRoot;
	        var dataCells = this._grid["_activeCellLayout"]["_dataCells"];
	        var roots = [];
	        if (dataCells.length < 0 || dataCells[0].length < 0) {
	            return roots;
	        }
	        for (var i = 0, cnt = dataCells[0].length; i < cnt; i++) {
	            dataRoot = dataCells[0][i].dataRoot;
	            // if ()
	            roots.push(dataCells[0][i].dataRoot);
	        }
	        return roots;
	    };
	    // TODO index를 가지고 displayText를 만드는 부분을 완료하고 처리해야 한다.
	    // lookupDisplay, copyDisplayValue, format등 많은 부분이 중복되고 별도로 처리되고 있다.
	    // 하나로 처리할 방법이 필요하다.
	    // 마지막으로는 복사시 사용자가 값을 변경할수 있도록 해야 한다.
	    ClipboardManager.prototype.getData = function (index) {
	        var grid = this.grid;
	        var column = index.layout.firstColumn;
	        var item = grid.getItem(index.itemIndex);
	        var options = grid.copyOptions;
	        var cellView = new ItemElement_1.DataCellElement();
	        var field, s, v;
	        if (!item || !(GridItem_1.ItemState_isInserting(item.itemState) || item.dataRow >= 0)) {
	            return "";
	        }
	        v = item.getData(column.dataIndex);
	        if (column && (field = grid.dataSource.getField(column.dataIndex)) != null) {
	            if (options.copyDisplayText) {
	                grid.body.getCell(index, false);
	                // TODO cell -> cellView를 찾아오는 방법이 필요하다
	                // 화면에 표시되고 있지는 않지만 copy, export 등에서 format/displayText를 필요로 하는 경우 찾을 방법이 필요하다.
	                // TODO 검토
	                // 화면에 보이지 않는 영역에 있는 셀인 경우 동적 style이 적용되었다는 가정하에 처리되어야 한다.
	                // format(numberFormat, dateFormat, displayCallback 등) 많은 조건들 때문에 text가 달라진다. 이부분을 처리해야 한다.
	                // Lookup도 고민해야 한다.
	            }
	            else {
	                switch (field.dataType) {
	                    case Types.ValueType.DATETIME:
	                    case Types.ValueType.DATE:
	                        s = v ? String(v) : "";
	                        break;
	                    case Types.ValueType.BOOLEAN:
	                        s = v != null ? String(v) : "";
	                        break;
	                    case Types.ValueType.NUMBER:
	                        s = v == ( isNaN(v)) ? "" : String(v);
	                    case Types.ValueType.OBJECT:
	                        s = v && typeof v == "object" ? JSON.stringify(v) : "";
	                    default:
	                        s = v != null ? String(v) : "";
	                }
	            }
	            if (s && ((s.indexOf("\n") >= 0 || s.indexOf("\r\n") >= 0) || s.charAt(0) == '"')) {
	                s = s.replace(/\"/g, '""');
	                s = '"' + s + '"';
	            }
	            return s;
	        }
	        return "";
	    };
	    ClipboardManager.prototype.copyEmtpyToClipboard = function () {
	        return "";
	    };
	    ClipboardManager.prototype.copyToClipboard = function (range) {
	        return this._data.getText(this, range);
	    };
	    ClipboardManager.prototype.copyCellToClipboard = function (index) {
	        return this._data.getCellText(this, index);
	    };
	    return ClipboardManager;
	}());
	exports.ClipboardManager = ClipboardManager;
	});

	unwrapExports(Clipboard);
	var Clipboard_1 = Clipboard.ClipboardData;
	var Clipboard_2 = Clipboard.ClipboardSource;
	var Clipboard_3 = Clipboard.DefalutClipboardData;
	var Clipboard_4 = Clipboard.ClipboardItem;
	var Clipboard_5 = Clipboard.ClipboardIndex;
	var Clipboard_6 = Clipboard.ClipboardManager;

	var popupMenu = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// PopupMenu.ts
	// 2019. 12. 12. created by flowmt
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var PopupMenuBase = /** @class */ (function (_super) {
	    __extends(PopupMenuBase, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PopupMenuBase() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        _this._enabled = true;
	        return _this;
	    }
	    PopupMenuBase.prototype._doDispose = function () {
	        return _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PopupMenuBase.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            this._visible = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "enabled", {
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            this._enabled = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "label", {
	        /** label */
	        get: function () {
	            return this._label;
	        },
	        set: function (value) {
	            this._label = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "group", {
	        /** group */
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "manager", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "type", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuBase.prototype, "checked", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    PopupMenuBase.prototype.click = function () {
	    };
	    return PopupMenuBase;
	}(EventAware_1.EventAware));
	var PopupMenuItem = /** @class */ (function (_super) {
	    __extends(PopupMenuItem, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PopupMenuItem(parent, source) {
	        var _this = _super.call(this) || this;
	        _this._checked = false;
	        _this._parent = parent;
	        source && _this.assignFrom(source);
	        return _this;
	    }
	    PopupMenuItem.prototype._doDispose = function () {
	        this._parent = null;
	        this._callback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PopupMenuItem.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        /** type */
	        get: function () {
	            return this._type;
	        },
	        set: function (value) {
	            this._type = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuItem.prototype, "group", {
	        /** group */
	        get: function () {
	            return this._group;
	        },
	        set: function (value) {
	            this._group = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuItem.prototype, "checked", {
	        /** checked */
	        get: function () {
	            return this._checked;
	        },
	        set: function (value) {
	            this._checked = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuItem.prototype, "tag", {
	        /** tag */
	        get: function () {
	            return this._tag;
	        },
	        set: function (value) {
	            this._tag = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuItem.prototype, "callback", {
	        /** callback */
	        get: function () {
	            return this._callback;
	        },
	        set: function (value) {
	            this._callback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuItem.prototype, "parent", {
	        /** parent */
	        get: function () {
	            return this._parent;
	        },
	        set: function (value) {
	            this._parent = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    PopupMenuItem.prototype.isSeparator = function () {
	        return this._label === "-" || this._type === Types.MenuItemType.SEPARATOR;
	    };
	    PopupMenuItem.prototype.getData = function () {
	        return {
	            label: this._label,
	            checked: this._checked,
	            enabled: this._enabled,
	            tag: this._tag
	        };
	    };
	    PopupMenuItem.prototype.click = function () {
	        if (this._type === "check") {
	            this._checked = !this._checked;
	        }
	        this._parent && this._parent.itemClicked(this);
	    };
	    Object.defineProperty(PopupMenuItem.prototype, "manager", {
	        get: function () {
	            return this._parent.manager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    PopupMenuItem.prototype._itemClicked = function (menuItem) {
	    };
	    return PopupMenuItem;
	}(PopupMenuBase));
	exports.PopupMenuItem = PopupMenuItem;
	var PopupMenu = /** @class */ (function (_super) {
	    __extends(PopupMenu, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PopupMenu(name, parent, source) {
	        var _this = _super.call(this) || this;
	        _this._name = name;
	        _this._parent = parent;
	        _this._items = _this._load(source);
	        return _this;
	    }
	    PopupMenu.prototype._doDispose = function () {
	        this._items && this._items.forEach(function (item, idx) { item.dispose(); });
	        this._items = null;
	        this._parent = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PopupMenu.prototype, "name", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** name */
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenu.prototype, "items", {
	        /** items */
	        get: function () {
	            return this._items;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenu.prototype, "parent", {
	        /** parent */
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenu.prototype, "manager", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        get: function () {
	            var p = this._parent;
	            while (p) {
	                if (p.popupMenuManager instanceof PopupMenuManager) {
	                    return p.popupMenuManager;
	                }
	                if (p instanceof PopupMenuManager) {
	                    return p;
	                }
	                p = p._parent;
	            }
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    PopupMenu.prototype.count = function () {
	        return this._items ? this._items.length : 0;
	    };
	    PopupMenu.prototype.itemClicked = function (menuItem) {
	        if (menuItem.parent == this && menuItem.type === Types.MenuItemType.RADIO) {
	            var group = menuItem.group;
	            var item = void 0;
	            if (group) {
	                for (var i = 0; i < this._items.length; i++) {
	                    item = this._items[i];
	                    if (item instanceof PopupMenuItem && item.type === Types.MenuItemType.RADIO && item.group === group) {
	                        item.checked = false;
	                    }
	                }
	                menuItem.checked = true;
	            }
	        }
	        var index = this.manager["popupIndex"];
	        if (typeof menuItem.callback === "function") {
	            menuItem.callback(menuItem, index.proxy());
	        }
	        else if (this._parent instanceof PopupMenuManager) {
	            this._parent.doMenuItemClick(menuItem, index);
	        }
	        else if (this._parent.onMenuItemClick) { // GridBase 등.
	            this._parent.onMenuItemClick(menuItem, index);
	        }
	        else {
	            this._parent.itemClicked(menuItem); // popupMenuItem에서 클릭이 발생했을때.
	        }
	    };
	    // isDescendant(menu: PopupMenu) {
	    //     while (menu) {
	    //         if (menu == this) {
	    //             return true;
	    //         }
	    //         menu = menu._parent;
	    //     }
	    // }
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    PopupMenu.prototype._load = function (source) {
	        var items = [];
	        if (source) {
	            for (var i = 0, cnt = source.length; i < cnt; i++) {
	                var src = source[i];
	                if (Utils_1.Utils.isArray(src.children) && src.children.length > 0) {
	                    var menu = new PopupMenu(src.name, this, src.children);
	                    items.push(menu);
	                    menu._parent = this;
	                    menu._label = src.label;
	                }
	                else {
	                    var menu = new PopupMenuItem(this, src);
	                    items.push(menu);
	                }
	            }
	        }
	        return items;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    PopupMenu.CLICKED = "onPopupMenuClicked";
	    return PopupMenu;
	}(PopupMenuBase));
	exports.PopupMenu = PopupMenu;
	var PopupMenuView = /** @class */ (function (_super) {
	    __extends(PopupMenuView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PopupMenuView(container) {
	        var _this = _super.call(this) || this;
	        _this._showing = false;
	        _this._viewGridInside = false;
	        _this._container = container;
	        _this._element = _this._createElement();
	        _this._element.addEventListener("contextmenu", function (e) {
	            e.preventDefault();
	        });
	        return _this;
	    }
	    PopupMenuView._borrowView = function (container) {
	        return PopupMenuView.$_views.pop() || (new PopupMenuView(container));
	    };
	    PopupMenuView._returnView = function (view) {
	        PopupMenuView.$_views.push(view);
	    };
	    PopupMenuView.prototype._doDispose = function () {
	        // TODO popupMenuView는 RealGridJS에 static하게 존재한다. popupManager가 dispose된다고 view를 dispose해서는 안된다.
	        // 만약 dispose를 하게된다면 초기 상태로 돌려놓기만 해서 다른 그리드가 view를 생성할수 있도록 해야된다.
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PopupMenuView.prototype, "targetView", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** targetView */
	        get: function () {
	            return this._targetView;
	        },
	        set: function (value) {
	            this._targetView = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuView.prototype, "parentView", {
	        /** parentView */
	        get: function () {
	            return this._parentView;
	        },
	        set: function (value) {
	            this._parentView = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuView.prototype, "childView", {
	        /** childView */
	        get: function () {
	            return this._childView;
	        },
	        set: function (value) {
	            this._childView = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuView.prototype, "manager", {
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._menu.manager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    PopupMenuView.prototype.show = function (container, parentView, menuModel, x, y, width, targetHeight, e) {
	        if (!this._showing) {
	            this._showing = true;
	            try {
	                var p = menuModel.parent;
	                this._containerElement = container["_container"];
	                this._parentView = parentView;
	                this._firstItem = null;
	                this._menu = menuModel;
	                while (p._parent) {
	                    if (p instanceof GridBase_1.GridBase) {
	                        break;
	                    }
	                    p = p.parent;
	                }
	                if (p) {
	                    this._viewGridInside = (p instanceof GridBase_1.GridBase) ? p.editorOptions.viewGridInside : p instanceof PopupMenuManager ? p.grid.editorOptions.viewGridInside : false;
	                }
	                if (menuModel.parent instanceof GridBase_1.GridBase || menuModel.parent instanceof PopupMenuManager) {
	                    if (this._targetView) {
	                        this._targetView.getIndex(this.manager.popupIndex = new CellIndex_1.CellIndex(this.manager.grid));
	                    }
	                    else {
	                        var grid = this.manager.grid;
	                        // TODO popup이 그리드 전체에서 발생할수 있다. 
	                        // contextMenu뿐만 아니라 columnHeader, grid, 기타등등
	                        // index를 확장할 필요성이 있다.
	                        // grid.layoutManager.mouseToIndex( grid.container["_currentX"], grid.container["currentY"], index);
	                        this.manager.popupIndex = CellIndex_1.CellIndex.temp(grid, -1, null);
	                    }
	                }
	                this.$_show(container, this._menu, x, y, width, targetHeight);
	            }
	            finally {
	                this._showing = false;
	            }
	        }
	    };
	    PopupMenuView.prototype.boundsByContainer = function () {
	        return null;
	    };
	    PopupMenuView.prototype.hide = function (recursive) {
	        if (recursive === void 0) { recursive = true; }
	        if (recursive && this._parentView) {
	            this._parentView.hide(true);
	        }
	        else {
	            this.$_hideChildView();
	            var elt = this._element;
	            elt && elt.parentElement && elt.parentElement.removeChild(elt);
	        }
	    };
	    PopupMenuView.prototype.hideChild = function () {
	        this.$_hideChildView();
	    };
	    PopupMenuView.prototype.changeItemIndex = function (delta) {
	        var idx = this._itemIndex;
	        var menu = this._menu;
	        var items = menu["_items"];
	        var item;
	        if (delta == 0) {
	            this._itemIndex = -1;
	            this.$_refreshItems(this._itemIndex);
	            return;
	        }
	        if (!items || idx >= items.length) {
	            return;
	        }
	        while (true) {
	            idx += delta;
	            item = items[idx];
	            if (!item || item.enabled) {
	                break;
	            }
	        }
	        if (item) {
	            this._itemIndex = idx;
	            this.$_refreshItems(this._itemIndex);
	        }
	    };
	    PopupMenuView.prototype.menuItemClicked = function () {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    PopupMenuView.prototype.$_show = function (container, menu, x, y, width, targetHeight) {
	        if (!this._element) {
	            return;
	        }
	        var elt = this._element;
	        var manager = this.manager;
	        var dropdownCount = manager.dropdownCount;
	        var containerElt = this._viewGridInside ? container["_container"] : document.documentElement;
	        this._menu = menu;
	        this._itemIndex = -1;
	        Utils_1.Utils.clearElements(this._element);
	        this.$_buildItems(menu);
	        Utils_1.Utils.disableSelection(elt);
	        containerElt.appendChild(elt);
	        var cnt = menu.items.length;
	        if (dropdownCount && cnt > dropdownCount) ;
	        else {
	            elt.style.overflow = "hidden";
	            this._element.style.removeProperty("height");
	        }
	        var br = Utils_1.Utils.getBrowserSize();
	        // var pr = Utils.ieTen || Utils.ieOld ? Utils.getBounds(document.body) : Utils.getBounds(document.documentElement);
	        // var cr = Utils.getBounds(container["_containerDom"]); // grid.container;
	        var pr = Utils_1.Utils.ieTen || Utils_1.Utils.ieOld ? Utils_1.Utils.getClientRect(document.body) : Utils_1.Utils.getClientRect(document.documentElement);
	        var cr = Utils_1.Utils.getClientRect(container["_container"]);
	        var w = br.width;
	        var h = br.height;
	        // let r = Utils.getBounds(this._element);
	        var r = Utils_1.Utils.getClientRect(this._element);
	        var sx = window.pageXOffset || document.documentElement.scrollLeft;
	        var sy = window.pageYOffset || document.documentElement.scrollTop;
	        if (document.documentElement.scrollWidth > document.documentElement.clientWidth) {
	            h -= 18;
	        }
	        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
	            w -= 18;
	        }
	        // 위치를 결정하는 코드이다.
	        if (this._viewGridInside) {
	            if (y + cr.top + r.height > cr.bottom) {
	                if (!this._parentView) {
	                    y = y - r.height - targetHeight;
	                }
	                else {
	                    y = cr.bottom - r.height - cr.top - 3;
	                }
	            }
	            if (x + cr.left + r.width > cr.right) {
	                if (!this._parentView) {
	                    x = x - r.width - width;
	                }
	                else {
	                    x = cr.right - r.width - cr.left - 3;
	                }
	            }
	        }
	        else {
	            if (!this._parentView) {
	                x += cr.left - pr.left;
	                y += cr.top - pr.top;
	            }
	            if (y + r.height >= h + sy - 3) {
	                y = y - r.height - 3;
	                if (y < 0) {
	                    y = Math.max(0, h - r.height - 3);
	                }
	            }
	            if (x + r.width >= w + sx - 3) {
	                x = Math.max(0, w - r.width - 3);
	            }
	            else if (width !== undefined) {
	                if (r.width < width) {
	                    x += width - r.width;
	                }
	            }
	        }
	        Utils_1.Utils.move(this._element, Math.max(0, x), Math.max(0, y));
	    };
	    PopupMenuView.prototype._createElement = function () {
	        var keydown = function (evnet) {
	            if (evnet.keyCode == 27) {
	                this.hide();
	            }
	        }.bind(this);
	        var elt = document.createElement("div");
	        elt.style.setProperty("position", "absolute", "important");
	        elt.className = "rg-popup-menu";
	        this._container.$_addListener(elt, "keydown", keydown, false);
	        return elt;
	    };
	    PopupMenuView.prototype._showChild = function (menuDiv) {
	        if (this != this.manager.showingView) {
	            return;
	        }
	        if (this._childView && this._childView._menu === menuDiv["menuItem"] || this._currDiv !== menuDiv) {
	            return;
	        }
	        this.$_hideChildView();
	        var menuItem = menuDiv["menuItem"];
	        var r = this._element.getBoundingClientRect();
	        var x = this._element.offsetLeft + r.width - 4;
	        var y = this._element.offsetTop + menuDiv.offsetTop - this._element.scrollTop;
	        this._childView = PopupMenuView._borrowView(this._container);
	        this._childView.show(this._container, this, menuItem, x, y);
	    };
	    PopupMenuView.prototype.$_hideChildView = function () {
	        this.manager.showingView = null;
	        if (this._childView) {
	            this._childView.$_hideChildView();
	            this._childView._element && this._childView._element.parentElement && this._childView._element.parentElement.removeChild(this._childView._element);
	            PopupMenuView._returnView(this._childView);
	        }
	        this._childView = null;
	    };
	    // keyboard를 이용했을때가 주목적이다.
	    // 
	    PopupMenuView.prototype._menuItemActived = function (divElt) {
	        this._currDiv = divElt;
	        var menuItem = divElt["menuItem"];
	        var menuView = this.manager.showingView = this.manager.activeView = divElt["menuView"];
	        if (menuItem instanceof PopupMenuItem) {
	            menuView.childView && menuView.$_hideChildView();
	        }
	        else {
	            this._timer && clearTimeout(this._timer);
	            this._timer = window.setTimeout(function () {
	                menuView._showChild(divElt);
	            }, 200);
	        }
	    };
	    PopupMenuView.prototype._menuItemDeactived = function (divElt) {
	    };
	    PopupMenuView.prototype._menuItemClicked = function (divElt) {
	        var menuItem = divElt["menuItem"];
	        if (menuItem instanceof PopupMenu) {
	            menuItem.enabled && this._showChild(divElt);
	        }
	        else if (menuItem) {
	            this.hide(true);
	            menuItem.enabled && menuItem.click();
	            this.manager.close();
	        }
	        else {
	            this.$_hideChildView();
	        }
	    };
	    PopupMenuView.prototype.$_refreshItems = function (itemIndex) {
	        var elts = this._element;
	        for (var i = 0, cnt = elts.childElementCount; i < cnt; i++) {
	            var elt = elts.childNodes[i];
	            // TODO css로 변경필요.
	            elt.style.background = i === itemIndex ? "rgba(0,255,0,0.2)" : "";
	            if (i == itemIndex) {
	                var dCount = this.manager.dropdownCount;
	                if (dCount > 0) {
	                    var eltTop = elt.offsetTop;
	                    var eltHeight = elt.offsetHeight + 4;
	                    var parentHeight = elt.offsetHeight;
	                    var scrollTop = elt.scrollTop;
	                    // popupItem이 많아서 스크롤이 발생한 경우
	                    if (scrollTop > eltTop) {
	                        elt.scrollTop = Math.max(0, elt.scrollTop + (eltTop - scrollTop));
	                    }
	                    else if (scrollTop + parentHeight < eltTop + eltHeight) {
	                        elt.scrollTop = elt.scrollTop + eltTop + eltHeight - (scrollTop + parentHeight);
	                    }
	                }
	                this._menuItemActived(elt);
	            }
	        }
	    };
	    PopupMenuView.prototype.$_buildItems = function (menu) {
	        // TODO 지금현재는 div에 menuItem을 입력하고 있는데..
	        // 2.0 방식으로 menuItem에 _cellDom(_dom)을 연결하는 방식 필요.
	        var items = menu.items;
	        var clsList = [];
	        for (var i = 0, cnt = items.length; i < cnt; i++) {
	            var menuItem = items[i];
	            if (!menuItem.visible) {
	                continue;
	            }
	            var div = document.createElement("div");
	            div["menuView"] = this;
	            div["menuItem"] = menuItem;
	            div.style.position = "relative";
	            div.style.cssFloat = "none";
	            div.style.width = "100%";
	            if (menuItem instanceof PopupMenuItem && menuItem.isSeparator()) {
	                div.className = "rg-popup-separator";
	                var hr = document.createElement("hr");
	                hr.className = "rg-popup-separator-hr";
	                div.appendChild(hr);
	                div.onmouseover = function (e) {
	                    this._menuItemActived(e.currentTarget);
	                }.bind(this);
	            }
	            else {
	                !this._firstItem && (this._firstItem = div);
	                clsList.length = 0;
	                clsList.push("rg-popup-item");
	                menuItem.group && clsList.push("rg-popup-" + menuItem.group);
	                !menuItem.enabled && clsList.push("rg-popup-item-disabled");
	                div.className = clsList.join(" ");
	                div.style.whiteSpace = "pre";
	                div.onclick = function (event) {
	                    this._menuItemClicked(event.currentTarget);
	                }.bind(this);
	                div.onmouseover = function (event) {
	                    this._menuItemActived(event.currentTarget);
	                }.bind(this);
	                div.onmouseout = function (evnet) {
	                    this._menuItemDeactived(event.currentTarget);
	                }.bind(this);
	                // TODO check/radio로 변경 필요.
	                var check = document.createElement("span");
	                var css = check.style;
	                clsList.length = 0;
	                css.setProperty("display", "inline-block");
	                css.setProperty("min-width", "20px");
	                css.setProperty("min-height", "7px");
	                css.setProperty("vertical-align", "middle");
	                css.setProperty("pointer-events", "none", "important");
	                check.textContent = "";
	                if (Utils_1.Utils.included(menuItem.type, [Types.MenuItemType.CHECK, Types.MenuItemType.RADIO])) {
	                    clsList.push(menuItem.group ? "rg-popup-radio" : "rg-popup-check");
	                }
	                if (menuItem.checked) {
	                    clsList.push(menuItem.group ? "rg-popup-radio-checked" : "rg-popup-check-checked");
	                }
	                check.className = clsList.join(" ");
	                check.tabIndex = -1;
	                Utils_1.Utils.disableSelection(check);
	                div.appendChild(check);
	                var span = document.createElement("span");
	                span.id = "$popupMenu_item_" + PopupMenuView.$_menuId++;
	                span.style.paddingRight = "24px";
	                span.style.pointerEvents = "none";
	                span.style.verticalAlign = "middle";
	                span.innerHTML = menuItem.label;
	                span.tabIndex = -1;
	                Utils_1.Utils.disableSelection(span);
	                div.appendChild(span);
	                if (menuItem instanceof PopupMenu) {
	                    var arrow = document.createElement("span");
	                    arrow.className = "rg-popup-expander";
	                    div.appendChild(arrow);
	                    arrow.style.position = "absolute";
	                    arrow.style.right = "0px";
	                    arrow.style.width = "24px";
	                    arrow.style.height = (13 + 2 + 2) + "px"; // 13 = 10pt
	                    arrow.style.verticalAlign = "middle";
	                    arrow.style.setProperty("pointer-events", "none", "important");
	                    arrow.innerHTML = " ";
	                    arrow.tabIndex = -1;
	                    Utils_1.Utils.disableSelection(arrow);
	                    div.appendChild(arrow);
	                }
	            }
	            Utils_1.Utils.disableSelection(div);
	            this._element.appendChild(div);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    PopupMenuView.$_menuId = 0;
	    PopupMenuView.$_views = [];
	    return PopupMenuView;
	}(EventAware_1.EventAware));
	exports.PopupMenuView = PopupMenuView;
	var PopupMenuManager = /** @class */ (function (_super) {
	    __extends(PopupMenuManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function PopupMenuManager(visualContainer) {
	        var _this = _super.call(this) || this;
	        _this._dropdownCount = 0;
	        _this._grolbalMouseHandler = function (event) {
	            var p = event.target;
	            while (p) {
	                if (p === this._mainView._element || p["menuItem"]) {
	                    return;
	                }
	                p = p.parentElement;
	            }
	            this.close();
	        }.bind(_this);
	        _this._container = visualContainer;
	        _this._containerDom = visualContainer["_containerDom"];
	        _this._menus = [];
	        return _this;
	    }
	    PopupMenuManager.prototype._doDispose = function () {
	        this.close();
	        this._mainView = null;
	        this._showingView = null;
	        this._popupIndex = null;
	        this._activeView = null;
	        this._container = this._containerDom = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(PopupMenuManager.prototype, "popupIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** popupIndex */
	        get: function () {
	            return this._popupIndex;
	        },
	        set: function (value) {
	            this._popupIndex = value.clone();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuManager.prototype, "grid", {
	        get: function () {
	            return this._container.gridView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuManager.prototype, "dropdownCount", {
	        get: function () {
	            return this._dropdownCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuManager.prototype, "showingView", {
	        get: function () {
	            return this._showingView;
	        },
	        set: function (value) {
	            this._showingView = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(PopupMenuManager.prototype, "activeView", {
	        get: function () {
	            return this._activeView;
	        },
	        set: function (value) {
	            this._activeView = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    PopupMenuManager.prototype.popupManager = function () {
	        return this;
	    };
	    PopupMenuManager.prototype.isShow = function () {
	        return !!this._mainView;
	    };
	    PopupMenuManager.prototype.indexOf = function (name) {
	        for (var i = this._menus.length; i--;) {
	            if (Utils_1.Utils.compareTextValue(this._menus[i].name, name, true, false)) {
	                return i;
	            }
	        }
	        return -1;
	    };
	    PopupMenuManager.prototype.getMenu = function (name) {
	        for (var i = this._menus.length; i--;) {
	            if (Utils_1.Utils.compareTextValue(this._menus[i].name, name, true, false)) {
	                return this._menus[i];
	            }
	        }
	        return null;
	    };
	    PopupMenuManager.prototype.addMenu = function (name, menuItems, overwrite, parent) {
	        if (overwrite === void 0) { overwrite = false; }
	        if (parent === void 0) { parent = null; }
	        if (Utils_1.Utils.isWhiteSpace(name)) {
	            throw "Menu name is empty.";
	        }
	        var index;
	        if ((index = this.indexOf(name)) >= 0) {
	            if (!overwrite) {
	                return this._menus[index];
	            }
	        }
	        var menu = new PopupMenu(name, parent || this, menuItems);
	        if (overwrite && index > -1) {
	            this._menus[index] = menu;
	        }
	        else {
	            this._menus.push(menu);
	        }
	        return menu;
	    };
	    PopupMenuManager.prototype.removeMenu = function (name) {
	        var i = this.indexOf(name);
	        if (i > -1) {
	            var popupMenus = this._menus.splice(i, 1);
	            // TODO dispose 관련 코드 추가.
	        }
	    };
	    PopupMenuManager.prototype.clearMenus = function () {
	        this._menus.length = 0;
	        // TODO dispose 관련 코드 추가.
	    };
	    PopupMenuManager.prototype.show = function (menu, cell, cx, cy, width, height) {
	        if (cx === void 0) { cx = null; }
	        if (cy === void 0) { cy = null; }
	        if (width === void 0) { width = null; }
	        if (height === void 0) { height = null; }
	        var grid = this.grid;
	        if (typeof menu === "string") {
	            menu = this.getMenu(menu);
	        }
	        else if (!(menu instanceof PopupMenu)) {
	            menu = new PopupMenu(null, this, menu);
	        }
	        if (menu) {
	            if (cx != null && cy != null) {
	                width = isNaN(width = Math.round(width)) ? 0 : width;
	                height = isNaN(height = Math.round(height)) ? 0 : height;
	            }
	            else {
	                // TODO 위치 계산 수정 필요.
	                var cr = this.grid.container.getBound();
	                var r = cell.getBoundingClientRect();
	                var y = void 0;
	                if (cell instanceof ColumnMergeElement_1.MergedDataCellElement) ;
	                else {
	                    y = r.bottom;
	                }
	                cx = r.left - cr.x;
	                cy = y - cr.y;
	                width = r.width;
	                height = r.height;
	            }
	            this._mainView = this._activeView = PopupMenuView._borrowView(this._container);
	            var ct = grid.getCellType(cell);
	            var tc = void 0;
	            if (ct === Types.TableCellType.DATA) {
	                tc = grid.getBodyView(cell).bodyCellByCell(cell);
	            }
	            else if (ct === Types.TableCellType.HEADER) {
	                tc = grid.getHeaderView(cell).tableCellByCell(cell);
	            }
	            this._mainView.targetView = tc;
	            this._mainView.show(this._container, null, menu, cx, cy, width, height);
	            window.addEventListener("mousedown", this._grolbalMouseHandler, false);
	        }
	    };
	    PopupMenuManager.prototype.showContext = function (menu, e, x, y, target) {
	        if (menu && !this._mainView) {
	            this._mainView = this._activeView = PopupMenuView._borrowView(this._container);
	            this._mainView.show(this._container, null, menu, x, y, 0, 0, e);
	            window.addEventListener("mousedown", this._grolbalMouseHandler, false);
	        }
	    };
	    PopupMenuManager.prototype.close = function () {
	        if (this._mainView) {
	            this._mainView.hide();
	            PopupMenuView._returnView(this._mainView);
	            this._mainView.targetView = null;
	            this._mainView = null;
	            window.removeEventListener("mousedown", this._grolbalMouseHandler, false);
	        }
	    };
	    PopupMenuManager.prototype.keyDown = function (event) {
	        this._doKeydown(event);
	    };
	    PopupMenuManager.prototype.doMenuItemClick = function (menuItem, index) {
	        this.fireEvent(PopupMenuManager.MENU_ITEM_CLICKED, menuItem, index);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    PopupMenuManager.prototype._doKeydown = function (event) {
	        var menuView = this._activeView;
	        switch (event.keyCode) {
	            case Types.Keys.DOWN:
	                menuView.changeItemIndex(1);
	                break;
	            case Types.Keys.UP:
	                menuView.changeItemIndex(-1);
	                break;
	            case Types.Keys.LEFT:
	                if (menuView.parentView) {
	                    menuView.changeItemIndex(0);
	                    menuView.hideChild();
	                    this._showingView = this._activeView = menuView.parentView || this._mainView;
	                }
	                break;
	            case Types.Keys.RIGHT:
	                if (menuView && menuView.childView) {
	                    menuView = this._showingView = this._activeView = menuView.childView;
	                    menuView.changeItemIndex(1);
	                }
	                break;
	            case Types.Keys.ENTER:
	            case Types.Keys.SPACE:
	                menuView.menuItemClicked();
	                break;
	        }
	    };
	    PopupMenuManager.prototype.$_buildItems = function (menu) {
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    PopupMenuManager.MENU_ITEM_CLICKED = "onPopupMenuManagerMenuItemClicked";
	    return PopupMenuManager;
	}(EventAware_1.EventAware));
	exports.PopupMenuManager = PopupMenuManager;
	});

	unwrapExports(popupMenu);
	var popupMenu_1 = popupMenu.PopupMenuItem;
	var popupMenu_2 = popupMenu.PopupMenu;
	var popupMenu_3 = popupMenu.PopupMenuView;
	var popupMenu_4 = popupMenu.PopupMenuManager;

	var HeaderSummary_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// HeaderSummary.ts
	// 2019. 12. 23. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var HeaderSummaryCell = /** @class */ (function (_super) {
	    __extends(HeaderSummaryCell, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderSummaryCell() {
	        return _super.call(this, "summaryCell") || this;
	    }
	    HeaderSummaryCell.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(HeaderSummaryCell.prototype, "summaryIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** summaryIndex */
	        get: function () {
	            return this._childIndex;
	        },
	        set: function (value) {
	            this._childIndex = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HeaderSummaryCell.prototype._getSummary = function (column, childIndex) {
	        return column && column.headerSummaries.get(childIndex);
	    };
	    return HeaderSummaryCell;
	}(GridFooter_1.SummaryCell));
	exports.HeaderSummaryCell = HeaderSummaryCell;
	var HeaderSummary = /** @class */ (function (_super) {
	    __extends(HeaderSummary, _super);
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderSummary(grid) {
	        return _super.call(this, grid) || this;
	    }
	    Object.defineProperty(HeaderSummary.prototype, "summaryIndex", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** summaryIndex */
	        get: function () {
	            return this._childIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HeaderSummary.prototype.getCellStyleName = function () {
	        return HeaderSummary.CELL_CSS;
	    };
	    HeaderSummary.prototype._createCell = function () {
	        return new HeaderSummaryCell();
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    HeaderSummary.CELL_CSS = "rg-header-summary-cell";
	    return HeaderSummary;
	}(GridFooter_1.GridSummaryObject));
	exports.HeaderSummary = HeaderSummary;
	var HeaderSummaryCollection = /** @class */ (function (_super) {
	    __extends(HeaderSummaryCollection, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderSummaryCollection(grid) {
	        var _this = _super.call(this, grid) || this;
	        _this.visible = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderSummaryCollection.prototype._createSummary = function (grid) {
	        return new HeaderSummary(grid ? grid : this._grid);
	    };
	    return HeaderSummaryCollection;
	}(GridFooter_1.SummaryCollection));
	exports.HeaderSummaryCollection = HeaderSummaryCollection;
	});

	unwrapExports(HeaderSummary_1);
	var HeaderSummary_2 = HeaderSummary_1.HeaderSummaryCell;
	var HeaderSummary_3 = HeaderSummary_1.HeaderSummary;
	var HeaderSummary_4 = HeaderSummary_1.HeaderSummaryCollection;

	var HeaderSummaryElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// HeaderSummaryElement.ts
	// 2019. 12. 23. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var HeaderSummaryElement = /** @class */ (function (_super) {
	    __extends(HeaderSummaryElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HeaderSummaryElement(model) {
	        return _super.call(this, model, "headerSummaryView") || this;
	    }
	    HeaderSummaryElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HeaderSummaryElement.prototype._getCssSelector = function () {
	        return "rg-header-summary";
	    };
	    HeaderSummaryElement.prototype._getRendererStyle = function () {
	        return "rg-header-summary-renderer";
	    };
	    HeaderSummaryElement.prototype._getSummaryRows = function (lm) {
	        return lm.headerSummaryRows;
	    };
	    HeaderSummaryElement.prototype._getCollection = function () {
	        return this.model;
	    };
	    HeaderSummaryElement.prototype._getSummaryHeight = function (heightMeasurer) {
	        return heightMeasurer.summaryHeight;
	    };
	    HeaderSummaryElement.prototype._getSummaryCount = function (lm) {
	        return lm.headerSummaryCount;
	    };
	    HeaderSummaryElement.prototype._getSpanOf = function (layout) {
	        return layout.getSummarySpan();
	    };
	    HeaderSummaryElement.prototype._getSummaryItem = function (layout, index) {
	        return layout.firstColumn.headerSummaries.get(index);
	    };
	    HeaderSummaryElement.prototype._getTableRowCount = function (lm) {
	        return lm.headerSummaryRows * lm.headerSummaryCount;
	    };
	    return HeaderSummaryElement;
	}(SummaryElement_1.SummaryElement));
	exports.HeaderSummaryElement = HeaderSummaryElement;
	var FixedHeaderSummaryElement = /** @class */ (function (_super) {
	    __extends(FixedHeaderSummaryElement, _super);
	    function FixedHeaderSummaryElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FixedHeaderSummaryElement.prototype._getCssSelector = function () {
	        return "rg-fixed-header-summary";
	    };
	    FixedHeaderSummaryElement.prototype._getFirstCell = function (lm) {
	        return 0;
	    };
	    FixedHeaderSummaryElement.prototype._getLastCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedHeaderSummaryElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    FixedHeaderSummaryElement.prototype._getEndCell = function (lm) {
	        return lm.fixedCellCount - 1;
	    };
	    FixedHeaderSummaryElement.prototype._getCellCount = function (lm) {
	        return lm.fixedCellCount;
	    };
	    FixedHeaderSummaryElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getFixedCellWidth(col);
	    };
	    return FixedHeaderSummaryElement;
	}(HeaderSummaryElement));
	exports.FixedHeaderSummaryElement = FixedHeaderSummaryElement;
	var RightHeaderSummaryElement = /** @class */ (function (_super) {
	    __extends(RightHeaderSummaryElement, _super);
	    function RightHeaderSummaryElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RightHeaderSummaryElement.prototype._getCssSelector = function () {
	        return "rg-fixed-header-summary";
	    };
	    RightHeaderSummaryElement.prototype._getFirstCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightHeaderSummaryElement.prototype._getLastCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightHeaderSummaryElement.prototype._getStartCell = function (lm) {
	        return lm.cellCount - lm.rightCellCount;
	    };
	    RightHeaderSummaryElement.prototype._getEndCell = function (lm) {
	        return lm.cellCount - 1;
	    };
	    RightHeaderSummaryElement.prototype._getCellCount = function (lm) {
	        return lm.rightCellCount;
	    };
	    RightHeaderSummaryElement.prototype._getCellWidth = function (lm, col) {
	        return lm.getRightCellWidth(col);
	    };
	    return RightHeaderSummaryElement;
	}(HeaderSummaryElement));
	exports.RightHeaderSummaryElement = RightHeaderSummaryElement;
	});

	unwrapExports(HeaderSummaryElement_1);
	var HeaderSummaryElement_2 = HeaderSummaryElement_1.HeaderSummaryElement;
	var HeaderSummaryElement_3 = HeaderSummaryElement_1.FixedHeaderSummaryElement;
	var HeaderSummaryElement_4 = HeaderSummaryElement_1.RightHeaderSummaryElement;

	var GridSumElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridSumElement.ts
	// 2019. 12. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var GridSumCellElement = /** @class */ (function (_super) {
	    __extends(GridSumCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridSumCellElement() {
	        var _this = _super.call(this, "gridSumCellView") || this;
	        _this._text = "";
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._styleName = "";
	        _this._textChanged = false;
	        return _this;
	    }
	    Object.defineProperty(GridSumCellElement.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        set: function (value) {
	            if (value !== this._model) {
	                this._model = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridSumCellElement.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value || "";
	                this._textChanged = true;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridSumCellElement.prototype.setStyleName = function (dom, s) {
	        if (s != this._styleName) {
	            this._styleName = s;
	            this._setClassName(dom);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridSumCellElement.prototype._getCssSelector = function () {
	        return this._styleName;
	    };
	    GridSumCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        if (this._textChanged) {
	            this._textChanged = false;
	            dom.textContent = this._text;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridSumCellElement.prototype._doRender = function (dom) {
	    };
	    return GridSumCellElement;
	}(CellElement_1.CellElement));
	exports.GridSumCellElement = GridSumCellElement;
	var GridSumElement = /** @class */ (function (_super) {
	    __extends(GridSumElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridSumElement() {
	        var _this = _super.call(this, null, "gridSumView") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        _this._count = 0;
	        for (var i = 0; i < 3; i++) {
	            _this.addChild(_this._cells[i] = new GridSumCellElement());
	        }
	        return _this;
	    }
	    GridSumElement.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridSumElement.prototype.getSumModel = function (td) {
	        for (var i = 0; i < this._cells.length; i++) {
	            if (td === this._getTableCell(0, i)) {
	                return this._cells[i].model;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridSumElement.prototype._getCssSelector = function () {
	        return "rg-sum";
	    };
	    GridSumElement.prototype._doPrepareTableExtents = function (lm) {
	        var objs = lm.sectionObjects;
	        var cell;
	        this._count = 0;
	        for (var _i = 0, objs_1 = objs; _i < objs_1.length; _i++) {
	            var obj = objs_1[_i];
	            if (obj.visible) {
	                cell = this._cells[this._count++];
	                cell.model = obj;
	                if (obj instanceof RowIndicator_1.RowIndicator) {
	                    cell.width = lm.indicatorWidth;
	                }
	                else if (obj instanceof StateBar_1.StateBar) {
	                    cell.width = lm.stateBarWidth;
	                }
	                else if (obj instanceof CheckBar_1.CheckBar) {
	                    cell.width = lm.stateBarWidth;
	                }
	            }
	        }
	    };
	    GridSumElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    GridSumElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var count = this._count;
	        while (this.childCount < count) {
	            this.addChild(this._cells[this.childCount]);
	        }
	        while (this.childCount > count) {
	            this.removeLast();
	        }
	        for (var i = 0; i < count; i++) {
	            var view = this.getChild(i);
	            var model = view.model;
	            var cell = model.getSumCell();
	            var dom = this.getCellContent(0, i);
	            var clsName = this.$_getCellSelector() + " " + model.getSumStyleName();
	            view.setStyleName(dom, clsName);
	            view.text = model.sumText;
	            view.updateCell(grid, cell, dom);
	        }
	    };
	    GridSumElement.prototype._doRender = function (dom) {
	    };
	    GridSumElement.prototype._getTableRowCount = function (lm) {
	        return 1;
	    };
	    GridSumElement.prototype._getTableRowHeight = function (lm, tr) {
	        return this.height;
	    };
	    GridSumElement.prototype._getCellCount = function (lm) {
	        return this._count;
	    };
	    GridSumElement.prototype._getCellWidth = function (lm, col) {
	        return this._cells[col].width;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridSumElement.prototype.$_getCellSelector = function () {
	        return "rg-sum-cell";
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    GridSumElement.CELL_CSS = "rg-sum-cell";
	    return GridSumElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.GridSumElement = GridSumElement;
	});

	unwrapExports(GridSumElement_1);
	var GridSumElement_2 = GridSumElement_1.GridSumCellElement;
	var GridSumElement_3 = GridSumElement_1.GridSumElement;

	var FilteringOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// EditOptions.ts
	// 2019. 08. 13. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var FilteringOptions = /** @class */ (function (_super) {
	    __extends(FilteringOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilteringOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = true;
	        _this._handleVisibility = Types.HandleVisibility.VISIBLE;
	        _this._commitBeforeFiltering = true;
	        _this._toast = new Toast.ToastOptions({ visible: false, message: "Filtering..." });
	        _this._includeParentItem = true; // TreeView에서 하위 Item추가시 상위Item 추가
	        _this._selector = new FilterSelectorOptions(grid);
	        _this._automating = new FilterAutomatingOptions(grid);
	        return _this;
	    }
	    FilteringOptions.prototype._doDispose = function () {
	        this._selector = this._selector.dispose();
	        this._automating = this._automating.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FilteringOptions.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "handleVisibility", {
	        /** handleVisibility */
	        get: function () {
	            return this._handleVisibility;
	        },
	        set: function (value) {
	            if (value != this._handleVisibility) {
	                this._handleVisibility = value;
	                this._refreshOwner();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "commitBeforeFiltering", {
	        /** commitBeforeFiltering */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._commitBeforeFiltering) {
	                this._commitBeforeFiltering = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "includeParentItem", {
	        /** includeParentItem */
	        get: function () {
	            return this._includeParentItem;
	        },
	        set: function (value) {
	            if (value != this._includeParentItem) {
	                this._includeParentItem = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "selector", {
	        /** selector */
	        get: function () {
	            return this._selector;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "automating", {
	        /* automator */
	        get: function () {
	            return this._automating;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilteringOptions.prototype, "toast", {
	        /** toast */
	        get: function () {
	            return this._toast;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FilteringOptions.prototype.assignFrom = function (source) {
	        _super.prototype.assignFrom.call(this, source);
	        this._selector.assignFrom(source.selector);
	    };
	    return FilteringOptions;
	}(GridOptions.GridBaseOptions));
	exports.FilteringOptions = FilteringOptions;
	var FilterSelectorOptions = /** @class */ (function (_super) {
	    __extends(FilterSelectorOptions, _super);
	    // TODO option 적용시켜서 filterselector 만들기
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilterSelectorOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._showButtons = false;
	        _this._partialSearch = true;
	        _this._excludeCheck = true;
	        _this._acceptText = null;
	        _this._cancelText = null;
	        _this._maxItemCount = 10; // NOTE temp value, because of paging test;
	        _this._allCheckText = '(전체 선택)';
	        _this._searchedCheckText = '(조회 전체 선택)';
	        _this._emptyFilterText = '(값 없음)';
	        _this._searchPlaceholder = '검색...';
	        _this._autoFilterGrouping = true;
	        return _this;
	    }
	    Object.defineProperty(FilterSelectorOptions.prototype, "showButtons", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._showButtons;
	        },
	        set: function (value) {
	            if (value != this._showButtons) {
	                this._showButtons = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "partialSearch", {
	        get: function () {
	            return this._partialSearch;
	        },
	        set: function (value) {
	            if (value != this._partialSearch) {
	                this._partialSearch = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "acceptText", {
	        get: function () {
	            return this._acceptText;
	        },
	        set: function (value) {
	            if (value != this._acceptText) {
	                this._acceptText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "cancelText", {
	        get: function () {
	            return this._cancelText;
	        },
	        set: function (value) {
	            if (value != this._cancelText) {
	                this._cancelText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "maxItemCount", {
	        get: function () {
	            return this._maxItemCount;
	        },
	        set: function (value) {
	            if (value != this._maxItemCount) {
	                this._maxItemCount = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "allCheckText", {
	        get: function () {
	            return this._allCheckText;
	        },
	        set: function (value) {
	            if (value != this._allCheckText) {
	                this._allCheckText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "emptyFilterText", {
	        get: function () {
	            return this._emptyFilterText;
	        },
	        set: function (value) {
	            if (value != this._emptyFilterText) {
	                this._emptyFilterText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "searchPlaceholder", {
	        get: function () {
	            return this._searchPlaceholder;
	        },
	        set: function (value) {
	            if (value != this._searchPlaceholder) {
	                this._searchPlaceholder = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "excludeCheck", {
	        get: function () {
	            return this._excludeCheck;
	        },
	        set: function (value) {
	            if (value != this._excludeCheck) {
	                this._excludeCheck = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "searchedCheckText", {
	        get: function () {
	            return this._searchedCheckText;
	        },
	        set: function (value) {
	            if (value != this._searchedCheckText) {
	                this._searchedCheckText = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterSelectorOptions.prototype, "autoFilterGrouping", {
	        get: function () {
	            return this._autoFilterGrouping;
	        },
	        set: function (value) {
	            if (value != this._autoFilterGrouping) {
	                this._autoFilterGrouping = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return FilterSelectorOptions;
	}(GridOptions.GridBaseOptions));
	exports.FilterSelectorOptions = FilterSelectorOptions;
	var FilterAutomatingOptions = /** @class */ (function (_super) {
	    __extends(FilterAutomatingOptions, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilterAutomatingOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._dateCategorize = true;
	        _this._numberCategorize = true;
	        _this._textCategorize = false;
	        _this._dateYearFormat = 'YYYY년도';
	        _this._dateQuarterFormat = 'Q사분기';
	        _this._dateMonthFormat = 'M월';
	        _this._dateDayFormat = 'YYYY-MM-DD';
	        return _this;
	    }
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateCategorize", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._dateCategorize;
	        },
	        set: function (value) {
	            if (value != this._dateCategorize) {
	                this._dateCategorize = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "numberCategorize", {
	        get: function () {
	            return this._dateCategorize;
	        },
	        set: function (value) {
	            if (value != this._numberCategorize) {
	                this._numberCategorize = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "textCategorize", {
	        get: function () {
	            return this._textCategorize;
	        },
	        set: function (value) {
	            if (value != this._textCategorize) {
	                this._textCategorize = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateCategoryCallback", {
	        get: function () {
	            return this._dateCategoryCallback;
	        },
	        set: function (value) {
	            if (value != this._dateCategoryCallback) {
	                this._dateCategoryCallback = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "numberCategoryCallback", {
	        get: function () {
	            return this._dateCategoryCallback;
	        },
	        set: function (value) {
	            if (value != this._numberCategoryCallback) {
	                this._numberCategoryCallback = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "textCategoryCallback", {
	        get: function () {
	            return this._textCategoryCallback;
	        },
	        set: function (value) {
	            if (value != this._textCategoryCallback) {
	                this._textCategoryCallback = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateYearFormat", {
	        get: function () {
	            return this._dateYearFormat;
	        },
	        set: function (value) {
	            this._dateYearFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateQuarterFormat", {
	        get: function () {
	            return this._dateQuarterFormat;
	        },
	        set: function (value) {
	            this._dateQuarterFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateMonthFormat", {
	        get: function () {
	            return this._dateMonthFormat;
	        },
	        set: function (value) {
	            this._dateMonthFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterAutomatingOptions.prototype, "dateDayFormat", {
	        get: function () {
	            return this._dateDayFormat;
	        },
	        set: function (value) {
	            this._dateDayFormat = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return FilterAutomatingOptions;
	}(GridOptions.GridBaseOptions));
	exports.FilterAutomatingOptions = FilterAutomatingOptions;
	});

	unwrapExports(FilteringOptions_1);
	var FilteringOptions_2 = FilteringOptions_1.FilteringOptions;
	var FilteringOptions_3 = FilteringOptions_1.FilterSelectorOptions;
	var FilteringOptions_4 = FilteringOptions_1.FilterAutomatingOptions;

	var FilteringManager_1 = createCommonjsModule(function (module, exports) {
	Object.defineProperty(exports, "__esModule", { value: true });



	var ActiveState;
	(function (ActiveState) {
	    ActiveState["ACTIVE"] = "active";
	    ActiveState["UNACTIVE"] = "unactive";
	    ActiveState["INDETERMINATE"] = "indeterminate";
	})(ActiveState = exports.ActiveState || (exports.ActiveState = {}));
	var FilterItem = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilterItem(id, name, text, active, filter) {
	        this._isLeaf = true;
	        this._searched = false;
	        this._changed = false;
	        this._id = id;
	        this._name = name;
	        this._text = text;
	        this._active = active;
	        this._level = 0;
	        this._filter = filter;
	        this._childs = null;
	        this._founded = null;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    FilterItem.HasPartial = function (text, partial) {
	        if (!text && !partial)
	            return false;
	        return text.indexOf(partial) > -1;
	        // TODO: hangule search
	    };
	    FilterItem.prototype.dispose = function () {
	        this._filter = null;
	        this._clearSearch();
	        this._clearChilds();
	        this._childs = null;
	        this._founded = null;
	    };
	    Object.defineProperty(FilterItem.prototype, "id", {
	        //-------------------------------------------------------------------------
	        // property
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._id;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "name", {
	        get: function () {
	            return this._name;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "text", {
	        get: function () {
	            return this._text;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "active", {
	        get: function () {
	            return this._active;
	        },
	        set: function (value) {
	            if (value != this._active) {
	                this._active = value;
	                this._filter && (this._filter.active = value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "year", {
	        get: function () {
	            return this._year;
	        },
	        set: function (value) {
	            this._year = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "month", {
	        get: function () {
	            return this._month;
	        },
	        set: function (value) {
	            this._month = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "day", {
	        get: function () {
	            return this._day;
	        },
	        set: function (value) {
	            this._day = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "value", {
	        get: function () {
	            return this._value;
	        },
	        set: function (value) {
	            this._value = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "activeState", {
	        get: function () {
	            if (this._isLeaf) {
	                return this.active ? ActiveState.ACTIVE : ActiveState.UNACTIVE;
	            }
	            else {
	                var state = undefined;
	                for (var i = 0, l = this._childs.length; i < l; i++) {
	                    var child = this._childs[i];
	                    if (state && child.activeState != state) {
	                        return ActiveState.INDETERMINATE;
	                    }
	                    state = child.activeState;
	                }
	                return state;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "parent", {
	        get: function () {
	            return this._parent;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "level", {
	        get: function () {
	            return this._level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "isLeaf", {
	        get: function () {
	            return this._isLeaf;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "childCount", {
	        get: function () {
	            if (this._isLeaf) {
	                return 0;
	            }
	            else {
	                var items = this._searched ? this._founded : this._childs;
	                return items.length;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "descendantCount", {
	        get: function () {
	            if (this._isLeaf) {
	                return 0;
	            }
	            else {
	                var count = 0;
	                var items = this._searched ? this._founded : this._childs;
	                for (var i = 0, l = items.length; i < l; i++) {
	                    count += items[i].descendantCount + 1; // 1은 child 자신
	                }
	                return count;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FilterItem.prototype, "changed", {
	        get: function () {
	            return this._changed;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // property
	    //-------------------------------------------------------------------------
	    FilterItem.prototype.clear = function () {
	        if (!this._isLeaf) {
	            for (var i = this._childs.length; i--;) {
	                this._childs[i].dispose();
	                delete this._childs[i];
	            }
	            this._childs = null;
	            this._isLeaf = true;
	        }
	    };
	    FilterItem.prototype.resetChange = function () {
	        this._changed = false;
	    };
	    FilterItem.prototype.addChild = function (child) {
	        if (!this._childs) {
	            this._childs = [];
	        }
	        this._childs.push(child);
	        child._parent = this;
	        child._level = this._level + 1;
	        this._isLeaf = false;
	    };
	    FilterItem.prototype.getChild = function (index) {
	        return this._childs[index];
	    };
	    FilterItem.prototype.activate = function (active, apply) {
	        if (apply === void 0) { apply = true; }
	        var childs = this._founded || this._childs;
	        if (this._isLeaf) {
	            if (apply) {
	                this.active = active;
	            }
	            else {
	                this._tempActive(active);
	            }
	        }
	        else {
	            for (var i = 0, l = childs.length; i < l; i++) {
	                var child = childs[i];
	                child.activate(active, apply);
	            }
	        }
	    };
	    FilterItem.prototype.search = function (text) {
	        if (!this._isLeaf) {
	            var items = this._childs;
	            this._clearSearch();
	            if (text) {
	                var count = 0;
	                var childs = 0;
	                for (var i = 0, l = items.length; i < l; i++) {
	                    var item = items[i];
	                    if (item._isLeaf) {
	                        if (FilterItem.HasPartial(item._text, text)) {
	                            this._founded.push(item);
	                            count++;
	                        }
	                    }
	                    else {
	                        childs = item.search(text);
	                        if (childs > 0) {
	                            this._founded.push(item);
	                            count += childs + 1;
	                        }
	                    }
	                }
	                this._searched = true;
	                return count;
	            }
	            else if (text === '') {
	                return items.length;
	            }
	            else {
	                this._clearChilds();
	            }
	        }
	        return 0;
	    };
	    FilterItem.prototype.getAllDescendants = function () {
	        var items = this._searched ? this._founded : this._childs;
	        var descendants = [];
	        for (var i = 0, l = items.length; i < l; i++) {
	            var isLeaf = items[i].isLeaf;
	            descendants.push(items[i]);
	            if (!items[i].isLeaf) {
	                Array.prototype.push.apply(descendants, items[i].getAllDescendants());
	            }
	        }
	        return descendants;
	    };
	    FilterItem.prototype.getLeafs = function (searchOnly, activeOnly) {
	        if (searchOnly === void 0) { searchOnly = true; }
	        if (activeOnly === void 0) { activeOnly = false; }
	        var items = searchOnly && this._searched ? this._founded : this._childs;
	        var leafs = [];
	        for (var i = 0, l = items.length; i < l; i++) {
	            var item = items[i];
	            if (item._isLeaf) {
	                (!activeOnly || item._active) && leafs.push(items[i]);
	            }
	            else {
	                Array.prototype.push.apply(leafs, items[i].getLeafs(searchOnly, activeOnly));
	            }
	        }
	        return leafs;
	    };
	    FilterItem.prototype.excludeOutside = function () {
	        if (!this._isLeaf) {
	            var childs = this._childs;
	            var founds = this._founded;
	            if (founds) {
	                for (var i = 0, l = childs.length; i < l; i++) {
	                    var child = childs[i];
	                    if (founds.indexOf(child) < 0) {
	                        child.activate(false, false);
	                        if (!child._isLeaf) {
	                            child.excludeOutside();
	                        }
	                    }
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FilterItem.prototype._tempActive = function (value) {
	        if (value != this._active) {
	            this._active = value;
	            this._changed = true;
	        }
	    };
	    FilterItem.prototype._clearSearch = function () {
	        this._searched = false;
	        this._founded = [];
	    };
	    FilterItem.prototype._clearChilds = function () {
	        var childs = this._childs;
	        if (childs) {
	            for (var i = childs.length; i--;) {
	                childs[i].dispose();
	                delete childs[i];
	            }
	            this._childs = null;
	        }
	    };
	    return FilterItem;
	}());
	exports.FilterItem = FilterItem;
	var FilteringManager = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilteringManager() {
	        this._activeNames = null;
	        this._autoFilterStore = {};
	        this._rootItem = this._createItem(FilteringManager.ROOT_ITEM, '', false, null);
	    }
	    FilteringManager.prototype.dispose = function () {
	        this._rootItem.clear();
	        this._rootItem.dispose();
	        this._rootItem = null;
	    };
	    Object.defineProperty(FilteringManager.prototype, "searched", {
	        //-------------------------------------------------------------------------
	        // property
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._searched;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // method
	    //-------------------------------------------------------------------------
	    FilteringManager.prototype.buildItems = function (column, dataSource, autoFilter, options) {
	        this._currentFieldName = column.fieldName;
	        if (this._autoRunFilter) {
	            this._autoRunFilter = null;
	        }
	        var selector = options.selector;
	        var automating = this._automating = options.automating;
	        this._exclude = selector.excludeCheck;
	        var emptyText = selector.emptyFilterText;
	        this._autoFilter = autoFilter;
	        autoFilter && (this._activeNames = null);
	        this._column = column;
	        var filters = this._filters = column.filters;
	        var root = this._rootItem;
	        this.clear();
	        if (autoFilter) {
	            var categorize = false;
	            var categories = void 0;
	            this._valueType = column.valueType;
	            var values = dataSource.getDistinctValues(column.dataIndex);
	            switch (this._valueType) {
	                case Types.ValueType.DATETIME:
	                    categorize = automating.dateCategorize;
	                    if (categorize && automating.dateCategoryCallback) {
	                        categories = automating.dateCategoryCallback(column, values);
	                    }
	                    else {
	                        categories = this._categorizeDateValues(values, categorize, emptyText);
	                    }
	                    break;
	                case Types.ValueType.NUMBER:
	                    categorize = automating.numberCategorize;
	                    if (categorize && automating.numberCategoryCallback) {
	                        categories = automating.numberCategoryCallback(column, values);
	                    }
	                    else {
	                        categories = this._categorizeNumberValues(values, categorize, emptyText);
	                    }
	                    break;
	                case Types.ValueType.BOOLEAN:
	                    categories = [];
	                    var isEmpty = false;
	                    for (var i = 0; i < values.length; i++) {
	                        var v = values[i];
	                        if (v === null || v === undefined) {
	                            isEmpty = true;
	                            continue;
	                        }
	                        categories.push({ text: v.toString().toUpperCase(), value: v });
	                    }
	                    if (isEmpty) {
	                        categories.push({ text: emptyText, empty: true });
	                    }
	                    break;
	                case Types.ValueType.TEXT:
	                    categorize = automating.textCategorize;
	                    if (categorize && automating.textCategoryCallback) {
	                        categories = automating.textCategoryCallback(column, values);
	                    }
	                    else {
	                        categories = this._categorizeTextValues(values, categorize, emptyText);
	                    }
	                    break;
	                default:
	                    break;
	            }
	            categories && this._createCategories(categories, root, column.valueType);
	        }
	        else {
	            for (var i = 0, l = filters.count; i < l; i++) {
	                var filter = filters.getItem(i);
	                if (filter.visible) {
	                    root.addChild(this._createFilter(filter));
	                }
	            }
	        }
	    };
	    FilteringManager.prototype.search = function (text) {
	        this._rootItem.search(text);
	        this._searched = !!text;
	    };
	    FilteringManager.prototype.getAllDescendants = function () {
	        return this._rootItem.getAllDescendants();
	    };
	    FilteringManager.prototype.activateAll = function (active) {
	        if (this._exclude && this._searched) {
	            this._rootItem.excludeOutside();
	        }
	        this._rootItem.activate(active, false);
	        this._applyFilterActive();
	    };
	    FilteringManager.prototype.activateItems = function (items, actives) {
	        if (this._exclude && this._searched) {
	            this._rootItem.excludeOutside();
	        }
	        for (var i = 0, l = items.length; i < l; i++) {
	            var item = items[i];
	            item.activate(actives[i], false);
	        }
	        this._applyFilterActive();
	    };
	    FilteringManager.prototype.activate = function (item, active) {
	        if (this._exclude && this._searched) {
	            this._rootItem.excludeOutside();
	        }
	        if (this._autoFilter) {
	            item.activate(active, false);
	            this._applyAutoFilters();
	        }
	        else {
	            item.activate(active, true);
	        }
	    };
	    FilteringManager.prototype.clear = function () {
	        this._rootItem.clear();
	        this._indexer = 0;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FilteringManager.prototype._createCategories = function (categories, parent, type) {
	        for (var i = 0, l = categories.length; i < l; i++) {
	            var cat = categories[i];
	            var name_1 = cat.empty ? FilteringManager.EMPTY_FILTER : cat.text;
	            var text = cat.text;
	            var item = this._createItem(name_1, text, false);
	            cat.hasOwnProperty('value') && (item.value = cat.value);
	            parent.addChild(item);
	            if (cat.hasOwnProperty('childs')) {
	                this._createCategories(cat.childs, item, type);
	            }
	            else {
	                item.active = this._isActiveAutoFilter(name_1);
	                if (type == Types.ValueType.DATETIME) {
	                    var dcat = cat;
	                    item.year = dcat.year;
	                    item.month = dcat.month;
	                    item.day = dcat.day;
	                }
	                else if (type == Types.ValueType.BOOLEAN) {
	                    item.value = cat.value;
	                }
	                else {
	                    var vals = cat.values;
	                    if (Array.isArray(vals)) {
	                        for (var i_1 = 0, l_1 = vals.length; i_1 < l_1; i_1++) {
	                            var ctext = vals[i_1] + '';
	                            var cactive = this._isActiveAutoFilter(ctext);
	                            var child = this._createItem(ctext, ctext, cactive);
	                            child.value = vals[i_1];
	                            item.addChild(child);
	                        }
	                    }
	                }
	            }
	        }
	    };
	    FilteringManager.prototype._createItem = function (name, text, active, filter) {
	        var id = this._indexer++;
	        return new FilterItem(id, name, text, active, filter);
	    };
	    FilteringManager.prototype._createFilter = function (filter) {
	        var id = this._indexer++;
	        return new FilterItem(id, filter.name, filter.toString(), filter.active, filter);
	    };
	    FilteringManager.prototype._categorizeDateValues = function (values, catogorize, emptyText) {
	        if (!values)
	            return null;
	        function getDateProperties(d, cats, level) {
	            var vals = [];
	            for (var i = 0; i <= level; i++) {
	                vals.push(DateTimeConverter_1.DateTimeConverter.getDateProperty(d, cats[i]));
	            }
	            return vals;
	        }
	        function getDateText(values) {
	            var t = '';
	            for (var i = 0, len = values.length; i < len; i++) {
	                t += values[i] + '-';
	            }
	            return t;
	        }
	        function extractObject(values, level, output, from, to) {
	            if (from === void 0) { from = 0; }
	            if (to === void 0) { to = -1; }
	            to = to == -1 ? values.length - 1 : to;
	            var ptext = null;
	            var pfrom = from;
	            var cvals;
	            var cdate;
	            var hasEmpty = false;
	            for (var i = from; i <= to + 1; i++) {
	                var d = values[i];
	                var props = getDateProperties(d, properties, level);
	                var text = getDateText(props);
	                if (i > from && text != ptext) { // 바뀌다
	                    var v = cvals[level];
	                    if (cdate) {
	                        if (level === properties.length - 1) {
	                            var cat = {
	                                text: '',
	                                year: cdate.getFullYear(),
	                                month: cdate.getMonth(),
	                                day: cdate.getDate()
	                            };
	                            cat.text = formats[level](cat.year, cat.month, cat.day);
	                            output.push(cat);
	                        }
	                        else {
	                            var cat = {
	                                text: '',
	                                childs: []
	                            };
	                            cat.text = formats[level](cdate.getFullYear(), cdate.getMonth(), v);
	                            output.push(cat);
	                            extractObject(values, level + 1, cat.childs, pfrom, i - 1);
	                        }
	                    }
	                    pfrom = i;
	                }
	                if (i > from && (cdate === null || cdate === undefined)) {
	                    hasEmpty = true;
	                }
	                ptext = text;
	                cvals = props;
	                cdate = d;
	            }
	            if (level == 0 && hasEmpty) {
	                output.push({ text: emptyText, empty: true });
	            }
	        }
	        var getter = DateTimeConverter_1.DateTimeConverter.getDateProperty;
	        var years = 0, months = 0, days = 0;
	        var prev = { year: null, quarter: null, month: null, day: null };
	        var vlen = values.length;
	        for (var i = 0; i < vlen; i++) {
	            var v = values[i];
	            if (v) {
	                var year = getter(v, DateTimeConverter_1.DateProperty.YEAR);
	                var quarter = getter(v, DateTimeConverter_1.DateProperty.QUARTER);
	                var month = getter(v, DateTimeConverter_1.DateProperty.MONTH);
	                var day = getter(v, DateTimeConverter_1.DateProperty.DAY);
	                if (prev) {
	                    if (year != prev.year) {
	                        years++, months++, days++;
	                    }
	                    else if (quarter != prev.quarter) {
	                        months++, days++;
	                    }
	                    else if (month != prev.month) {
	                        months++, days++;
	                    }
	                    else if (day != prev.day) {
	                        days++;
	                    }
	                }
	                else {
	                    years++, months++, days++;
	                }
	                prev.year = year;
	                prev.quarter = quarter;
	                prev.month = month;
	                prev.day = day;
	            }
	        }
	        function $$_formatYear(fmt, value) {
	            var text = value + '';
	            if (!fmt) {
	                return text;
	            }
	            return fmt.replace('YYYY', text).replace('YY', text.slice(-2));
	        }
	        function $$_formatQuater(fmt, value) {
	            var text = (value + 1) + '';
	            if (!fmt) {
	                return text;
	            }
	            var pad = ('0' + text).slice(-2);
	            return fmt.replace('QQ', pad).replace('Q', text);
	        }
	        function $$_formatMonth(fmt, value) {
	            var text = (value + 1) + '';
	            if (!fmt) {
	                return text;
	            }
	            var pad = ('0' + text).slice(-2);
	            return fmt.replace('MM', pad).replace('M', text);
	        }
	        function $$_formatDay(fmt, value) {
	            var text = value + '';
	            if (!fmt) {
	                return text;
	            }
	            var pad = ('0' + text).slice(-2);
	            return fmt.replace('DD', pad).replace('D', text);
	        }
	        var opts = this._automating;
	        var properties = [];
	        var formats = [];
	        var hasYear = false, hasQuarter = false, hasMonth = false;
	        if (catogorize) {
	            hasYear = years > 1 && months > 6; // 년도수가 2이상, 월수가 7이상
	            if (hasYear) {
	                properties.push(DateTimeConverter_1.DateProperty.YEAR);
	                formats.push(function (p, p1, v) {
	                    return $$_formatYear(opts.dateYearFormat, v);
	                });
	            }
	            hasQuarter = months / years > 6; // 년도당 월 수가 6이상
	            if (hasQuarter) {
	                properties.push(DateTimeConverter_1.DateProperty.QUARTER);
	                formats.push(hasYear ? function (p, p1, v) {
	                    return $$_formatQuater(opts.dateQuarterFormat, v);
	                } : function (year, p1, v) {
	                    return $$_formatYear(opts.dateYearFormat, year) + ' ' + $$_formatQuater(opts.dateQuarterFormat, v);
	                });
	            }
	            hasMonth = days > 9 && months > 3; // 일수가 10이상이고 월수가 4이상
	            if (hasMonth) {
	                properties.push(DateTimeConverter_1.DateProperty.MONTH);
	                formats.push(hasYear || hasQuarter ? function (p, p1, v) {
	                    return $$_formatMonth(opts.dateMonthFormat, v);
	                } : function (year, p1, v) {
	                    return $$_formatYear(opts.dateYearFormat, year) + ' ' + $$_formatMonth(opts.dateMonthFormat, v);
	                });
	            }
	        }
	        properties.push(DateTimeConverter_1.DateProperty.DAY);
	        formats.push(function (y, m, d) {
	            var text = $$_formatYear(opts.dateDayFormat, y);
	            text = $$_formatMonth(text, m);
	            text = $$_formatDay(text, d);
	            return text;
	        });
	        var categories = [];
	        extractObject(values, 0, categories);
	        return categories;
	    };
	    FilteringManager.prototype._categorizeNumberValues = function (values, categorize, emptyText) {
	        if (!values)
	            return null;
	        var valids = values.filter(function (el) { return el != undefined && el != null; });
	        var min = Math.min.apply(null, valids);
	        var vlen = values.length;
	        var unit;
	        if (categorize && vlen > 15) {
	            var groupCount = Math.min(Math.max(4, Math.round(vlen / 5)), 8);
	            unit = Math.round(vlen / groupCount);
	        }
	        else {
	            unit = 1;
	        }
	        var categories = [];
	        var gvals = [];
	        var gindex = 0;
	        var gmin = min;
	        var isEmpty = false;
	        for (var i = 0; i < vlen; i++) {
	            var v = values[i];
	            if (v === undefined || v === null) {
	                isEmpty = true;
	                continue;
	            }
	            if (i == gindex + unit || i === vlen - 1) {
	                categories.push({ text: gmin + ' ~ ' + v, values: gvals });
	                gvals = [v];
	                gindex = i;
	                gmin = v;
	            }
	            else {
	                gvals.push(v);
	            }
	        }
	        if (isEmpty) {
	            categories.push({ text: emptyText, empty: true });
	        }
	        return categories;
	    };
	    FilteringManager.prototype._categorizeTextValues = function (values, categorize, emptyText) {
	        if (!values)
	            return null;
	        var vlen = values.length;
	        var categories = [];
	        var isEmpty = false;
	        if (categorize && vlen > 15) {
	            var charValues = [{}, {}, {}, {}];
	            var counts = [0, 0, 0, 0];
	            var charCounts = [0, 0, 0, 0];
	            for (var i = 0; i < vlen; i++) {
	                var v = values[i];
	                if (!v) {
	                    isEmpty = true;
	                    continue;
	                }
	                var char = v[0];
	                var ascii = char.charCodeAt(0);
	                var newed = false;
	                var index = void 0;
	                if (ascii >= 48 && ascii <= 57) { // numeric
	                    index = 0;
	                }
	                else if ((ascii >= 65 && ascii <= 90) || (ascii >= 97 && ascii <= 122)) { // alphbet
	                    index = 1;
	                }
	                else if (ascii >= 10000) { // unicode
	                    index = 2;
	                }
	                else { // etc
	                    index = 3;
	                }
	                if (charValues[index][char]) {
	                    charValues[index][char].push(v);
	                }
	                else {
	                    charValues[index][char] = [v];
	                    newed = true;
	                }
	                counts[index]++;
	                newed && charCounts[index]++;
	            }
	            var groupCount = Math.min(Math.max(4, Math.round(vlen / 5)), 8);
	            for (var g = 0; g < 4; g++) {
	                var cnt = counts[g] == 0 ? 0 : Math.max(1, Math.min(charCounts[g], Math.round((counts[g] / vlen * groupCount))));
	                var unit = Math.round(charCounts[g] / cnt);
	                var gunit = unit;
	                var chars = Object.keys(charValues[g]);
	                var charVals = charValues[g];
	                var minChar = '';
	                var gvals = [];
	                for (var char in charVals) {
	                    if (gunit === unit) {
	                        minChar = char;
	                    }
	                    Array.prototype.push.apply(gvals, charValues[g][char]);
	                    gunit--;
	                    if (gunit == 0) {
	                        categories.push({ text: unit == 1 ? char : minChar + ' ~ ' + char, values: gvals });
	                        gvals = [];
	                        gunit = unit;
	                    }
	                }
	            }
	        }
	        else {
	            for (var i = 0, l = values.length; i < l; i++) {
	                var v = values[i];
	                if (!v) {
	                    isEmpty = true;
	                    continue;
	                }
	                categories.push({ text: v, value: v });
	            }
	        }
	        if (isEmpty) {
	            categories.push({ text: emptyText, empty: true });
	        }
	        return categories;
	    };
	    FilteringManager.prototype._applyFilterActive = function () {
	        if (this._autoFilter) {
	            this._applyAutoFilters();
	        }
	        else {
	            var items = this._rootItem.getLeafs();
	            var actives = [];
	            var unactives = [];
	            for (var i = 0, l = items.length; i < l; i++) {
	                if (items[i].changed) {
	                    if (items[i].active) {
	                        actives.push(items[i].name);
	                    }
	                    else {
	                        unactives.push(items[i].name);
	                    }
	                    items[i].resetChange();
	                }
	            }
	            actives.length > 0 && this._filters.activateItems(actives, true);
	            unactives.length > 0 && this._filters.activateItems(unactives, false);
	        }
	    };
	    FilteringManager.prototype._isActiveAutoFilter = function (name) {
	        if (!this._autoRunFilter || !this._autoRunFilter.tag) {
	            return false;
	        }
	        if (!this._activeNames) {
	            this._activeNames = this._autoRunFilter.tag.split('","');
	        }
	        return this._activeNames.indexOf(name) > -1;
	    };
	    FilteringManager.prototype._applyAutoFilters = function () {
	        var t = new Date().getTime();
	        var valueType = this._valueType;
	        var names = [];
	        // exclude면 검색대상, 아니면 전체대상으로 list 작성
	        var items = this._rootItem.getLeafs(this._exclude, true);
	        var hasEmpty = false;
	        var criteria = '';
	        for (var i = 0, l = items.length; i < l; i++) {
	            var item = items[i];
	            var name_2 = item.name;
	            if (item.active) {
	                names.push(name_2);
	                if (name_2 === FilteringManager.EMPTY_FILTER) {
	                    hasEmpty = true;
	                }
	                else {
	                    if (criteria) {
	                        criteria += valueType === Types.ValueType.TEXT ? '|' : ' or ';
	                    }
	                    if (valueType === Types.ValueType.BOOLEAN) {
	                        if (item.value) {
	                            criteria += 'value';
	                        }
	                        else {
	                            criteria += 'not(value)';
	                        }
	                    }
	                    else if (valueType === Types.ValueType.DATETIME) {
	                        criteria += "((year(value) = " + item.year + ") and (month(value) = " + (item.month + 1) + ") and (day(value) = " + item.day + "))";
	                    }
	                    else if (valueType === Types.ValueType.NUMBER) {
	                        criteria += '(value = ' + item.value + ')';
	                    }
	                    else if (valueType === Types.ValueType.TEXT) {
	                        var val = item.value;
	                        var specialReg = /([\{\}\[\]\/\?\|\)\#\\\=\(\'\"])/g;
	                        val = val.replace(specialReg, "\\$1");
	                        criteria += '^' + val.replace(/\s/g, '\\\\s') + '$';
	                    }
	                }
	            }
	        }
	        if (criteria && valueType === Types.ValueType.TEXT) {
	            // criteria: "value match '^지목$|^기타$'"
	            criteria = 'value match \'' + criteria + '\'';
	        }
	        if (hasEmpty) {
	            if (criteria) {
	                criteria = '(' + criteria + ') or ';
	            }
	            criteria += '(value is empty)';
	            names.push(FilteringManager.EMPTY_FILTER);
	        }
	        this._runAutoFilter(true, criteria, names.join('","'));
	    };
	    FilteringManager.prototype._runAutoFilter = function (active, criteria, tag) {
	        if (criteria === void 0) { criteria = ''; }
	        if (tag === void 0) { tag = ''; }
	        this._filters.activateAll(false);
	        var filter = this._autoRunFilter;
	        if (!this._autoRunFilter) {
	            var prevAutoFilter = this._filters.itemByName(FilteringManager.AUTO_FILTER);
	            if (prevAutoFilter) {
	                filter = prevAutoFilter;
	            }
	            else {
	                filter = this._autoRunFilter = new ColumnFilter_1.ColumnFilter(criteria);
	                filter.name = FilteringManager.AUTO_FILTER;
	                this._filters.add(filter, active);
	                this._autoFilterStore[this._currentFieldName] = filter;
	            }
	        }
	        filter.criteria = criteria;
	        filter.tag = tag;
	        filter.active = active;
	    };
	    //-------------------------------------------------------------------------
	    // const
	    //-------------------------------------------------------------------------
	    FilteringManager.AUTO_FILTER = '$$auto_filter';
	    FilteringManager.EMPTY_FILTER = '$$empty';
	    FilteringManager.ROOT_ITEM = '$$rootItem';
	    FilteringManager.DAY_TIME = 86400000;
	    return FilteringManager;
	}());
	exports.FilteringManager = FilteringManager;
	});

	unwrapExports(FilteringManager_1);
	var FilteringManager_2 = FilteringManager_1.ActiveState;
	var FilteringManager_3 = FilteringManager_1.FilterItem;
	var FilteringManager_4 = FilteringManager_1.FilteringManager;

	var FilterSelector_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FilterSelector.ts
	// 2019. 12. 19. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var CheckType;
	(function (CheckType) {
	    CheckType["Check"] = "check";
	    CheckType["UnCheck"] = "uncheck";
	    CheckType["None"] = "none";
	})(CheckType || (CheckType = {}));
	var FilterSelector = /** @class */ (function (_super) {
	    __extends(FilterSelector, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FilterSelector(container, options) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._opened = false;
	        _this._hasFooter = false;
	        _this._hasSearchbox = false;
	        _this._itemsInfoStore = {}; // to search descendants and ancestor
	        _this._changedID = {};
	        _this._currentScrollTop = 0;
	        _this._willViewItemsIDStore = [];
	        _this._firstItemIndex = 0;
	        _this._defaultwvIDStore = [];
	        _this._containerDom = document.documentElement;
	        _this._element = document.createElement('div');
	        _this._element.className = "rg-filter-selector";
	        _this._element.style.position = 'absolute';
	        _this._options = options;
	        _this._soptions = options.selector;
	        _this._manager = new FilteringManager_1.FilteringManager();
	        return _this;
	    }
	    FilterSelector.prototype._doDispose = function () {
	        this._soptions = null;
	        this._manager.dispose();
	        this._manager = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FilterSelector.prototype, "opened", {
	        //-------------------------------------------------------------------------
	        // property
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._opened;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FilterSelector.prototype.show = function (column, cell, dataSource) {
	        if (this._opened) {
	            this.hide();
	        }
	        this._autoFiltering = column.autoFilter;
	        var r = cell.getBoundingClientRect();
	        var clientWidth = this._containerDom.clientWidth;
	        var x = r.right;
	        var y = r.bottom;
	        this._containerDom.appendChild(this._element);
	        var er = this._element.getBoundingClientRect();
	        this._setPosition(Math.max(0, Math.min(x, clientWidth) - er.width), y);
	        this._buildElements(column, dataSource, this._autoFiltering);
	        window.addEventListener("mousedown", this._globalMouseDownHandler.bind(this), false);
	        window.addEventListener("keydown", this._globalKeyDownHandler.bind(this), false);
	        this._opened = true;
	    };
	    FilterSelector.prototype.hide = function () {
	        if (this._opened) {
	            window.removeEventListener("mousedown", this._globalMouseDownHandler.bind(this), false);
	            window.removeEventListener("keydown", this._globalKeyDownHandler.bind(this), false);
	            this._finalizeElements();
	            this._containerDom.removeChild(this._element);
	            this._opened = false;
	        }
	    };
	    FilterSelector.prototype.isOwned = function (element) {
	        var p = element;
	        while (p) {
	            if (p == this._element) {
	                return true;
	            }
	            p = p.parentElement;
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FilterSelector.prototype._setPosition = function (x, y) {
	        this._element.style.left = x + "px";
	        this._element.style.top = y + "px";
	    };
	    // ANCHOR build - itemdom
	    FilterSelector.prototype._buildItemElement = function (text, level, className, id, isCollapsed) {
	        // division
	        var filterItem = document.createElement('div');
	        // collapse button
	        var padding = document.createElement('div');
	        filterItem.appendChild(padding);
	        // checkbox
	        var checkbox = document.createElement('input');
	        checkbox.type = 'checkbox';
	        checkbox.className = 'rg-filter-checkbox';
	        filterItem.appendChild(checkbox);
	        // text
	        var textNode = document.createTextNode('default');
	        filterItem.appendChild(textNode);
	        // collapse button
	        var collapseButton = document.createElement('div');
	        filterItem.appendChild(collapseButton);
	        // apply content
	        this._changeItemAttr(filterItem, text, level, className, id, isCollapsed);
	        return filterItem;
	    };
	    FilterSelector.prototype._changeItemAttr = function (filterItemDOM, text, level, className, id, isCollapsed, topPos) {
	        // division className
	        if (className) {
	            filterItemDOM.className = className;
	        }
	        var padding = filterItemDOM.children[0];
	        if (padding && level) {
	            var indent = 'rg-filter-item-indent-';
	            if (!this._isNoTreeCheckbox) {
	                indent += (level - 1);
	            }
	            else {
	                indent += 'none';
	            }
	            padding.className = indent;
	        }
	        var collap = filterItemDOM.children[2];
	        if (collap && className !== 'rg-filter-select-all') {
	            var c = collap;
	            if (isCollapsed !== undefined) {
	                if (isCollapsed) {
	                    c.classList.remove('rg-filter-item-expanded');
	                    c.classList.add('rg-filter-item-collapsed');
	                }
	                else {
	                    c.classList.remove('rg-filter-item-collapsed');
	                    c.classList.add('rg-filter-item-expanded');
	                }
	            }
	            else {
	                c.className = '';
	            }
	            var left = this._collapseButtonLeft;
	            if (left !== undefined) {
	                if (this._indentSize) {
	                    left += this._indentSize * level;
	                }
	                c.style.left = left + 'px';
	            }
	        }
	        // textNode
	        if (text !== undefined) {
	            var textNode = filterItemDOM.childNodes[2];
	            textNode.textContent = text;
	        }
	        if (topPos !== undefined) {
	            filterItemDOM.style.top = topPos + 'px';
	        }
	        // id
	        filterItemDOM.id = "rgf-" + id;
	    };
	    // ANCHOR iteminfo
	    FilterSelector.prototype._createItemInfo = function () {
	        this._isNoTreeCheckbox = true;
	        this._items = this._manager.getAllDescendants();
	        var len = this._items.length;
	        var prevStack = [];
	        for (var i = 0; i < len; i++) {
	            var item = this._items[i];
	            var itemChilds = [];
	            var lev = item.level;
	            var itemInfo = {
	                text: item.text,
	                state: item.activeState,
	                parent: item.parent.id,
	                childs: itemChilds,
	                index: i,
	                level: lev
	            };
	            if (!item.isLeaf) {
	                itemInfo.isCollapsed = true;
	            }
	            this._itemsInfoStore[item.id] = itemInfo;
	            // 전에거 기억
	            while (true) {
	                var prevIdx = prevStack.length - 1;
	                if (prevIdx !== -1) {
	                    var prev = prevStack[prevIdx];
	                    if (prev.level >= lev) {
	                        prevStack.pop();
	                    }
	                    else if (prev.level + 1 !== lev) {
	                        var tID = prev.childs[prev.childs.length - 1];
	                        var tChilds = this._itemsInfoStore[tID].childs;
	                        var tLev = this._itemsInfoStore[tID].level;
	                        var cAndL = {
	                            level: tLev,
	                            childs: tChilds
	                        };
	                        prevStack.push(cAndL);
	                    }
	                    else if (prev.level + 1 === lev) {
	                        prev.childs.push(item.id);
	                        break;
	                    }
	                    else {
	                        throw new Error('invalid access while creating iteminfo');
	                    }
	                }
	                else if (i !== len - 1) {
	                    var cAndL = {
	                        level: lev,
	                        childs: itemChilds
	                    };
	                    prevStack.push(cAndL);
	                    break;
	                }
	                else {
	                    break;
	                }
	            }
	            if (lev === 1) {
	                this._willViewItemsIDStore.push(item.id);
	                this._defaultwvIDStore.push(item.id);
	            }
	            else {
	                this._isNoTreeCheckbox = false;
	            }
	        }
	    };
	    FilterSelector.prototype._removeItemInfo = function () {
	        this._itemsInfoStore = {};
	    };
	    // ANCHOR  filterapply
	    FilterSelector.prototype._filtersApply = function (filterItems, actives) {
	        this._manager.activateItems(filterItems, actives);
	    };
	    FilterSelector.prototype._filtersApplyHelper = function () {
	        if (this._isAllChecked !== CheckType.None) {
	            this._changedID = {};
	            this._isAllChecked === CheckType.Check ? this._manager.activateAll(true) : this._manager.activateAll(false);
	            return;
	        }
	        var targetItems = [];
	        var actives = [];
	        var ids = Object.keys(this._changedID);
	        var len = ids.length;
	        for (var i = 0; i < len; i++) {
	            var id = Number(ids[i]);
	            var state = this._itemsInfoStore[id].state;
	            var idx = this._itemsInfoStore[id].index;
	            targetItems.push(this._items[idx]);
	            if (state === FilteringManager_1.ActiveState.ACTIVE) {
	                actives.push(true);
	            }
	            else if (state === FilteringManager_1.ActiveState.UNACTIVE) {
	                actives.push(false);
	            }
	            delete this._changedID[id];
	        }
	        this._filtersApply(targetItems, actives);
	    };
	    // ANCHOR check
	    FilterSelector.prototype._isAllboxCheck = function () {
	        // select all checkbox 처리. 전체를 검사하여 element.checked를 결정
	        this._isAllChecked = CheckType.None;
	        var selectAllBox;
	        if (this._selectAllElement.children[1] instanceof HTMLInputElement) {
	            selectAllBox = this._selectAllElement.children[1];
	        }
	        var infos = this._itemsInfoStore;
	        var prev;
	        for (var id in infos) {
	            if (!prev) {
	                prev = infos[id];
	                continue;
	            }
	            // 첫째가 indeterminate 일 경우
	            if (prev.state === FilteringManager_1.ActiveState.INDETERMINATE) {
	                selectAllBox.indeterminate = true;
	                selectAllBox.checked = false;
	                return;
	            }
	            if (prev.state !== infos[id].state) {
	                selectAllBox.indeterminate = true;
	                selectAllBox.checked = false;
	                return;
	            }
	        }
	        // 0개 있었을 때, 실질적 불가능
	        if (!prev) {
	            return;
	        }
	        // 모두 같은 경우
	        if (prev.state === FilteringManager_1.ActiveState.ACTIVE) {
	            selectAllBox.indeterminate = false;
	            selectAllBox.checked = true;
	            this._isAllChecked = CheckType.Check;
	        }
	        else {
	            selectAllBox.indeterminate = false;
	            selectAllBox.checked = false;
	            this._isAllChecked = CheckType.UnCheck;
	        }
	    };
	    FilterSelector.prototype._selectAll = function (active) {
	        // 목록의 info, changed 수정
	        var len = this._items.length;
	        var vLen = this._viewingFilterElements.length;
	        for (var i = 0; i < len; i++) {
	            // 화면에 보이는 거
	            if (i < vLen) {
	                var checkbox = this._viewingFilterElements[i].children[1];
	                if (checkbox instanceof HTMLInputElement) {
	                    checkbox.checked = active;
	                }
	                else {
	                    throw new Error('there is no check box at index: ' + i);
	                }
	            }
	            var id = this._items[i].id;
	            var item = this._itemsInfoStore[id];
	            if (active) {
	                if (item.state !== FilteringManager_1.ActiveState.ACTIVE) {
	                    this._changedID[id] = true;
	                }
	                else {
	                    delete this._changedID[id];
	                }
	                item.state = FilteringManager_1.ActiveState.ACTIVE;
	            }
	            else {
	                if (item.state === FilteringManager_1.ActiveState.ACTIVE) {
	                    this._changedID[id] = true;
	                }
	                else {
	                    delete this._changedID[i];
	                }
	                item.state = FilteringManager_1.ActiveState.UNACTIVE;
	            }
	        }
	        active ? this._isAllChecked = CheckType.Check : this._isAllChecked = CheckType.UnCheck;
	    };
	    // dom 상에서 체크 후 해당 값 리턴;
	    FilterSelector.prototype._checkSelectAllBoxDOM = function (event) {
	        var checked;
	        var element = event.target;
	        if (element instanceof HTMLInputElement) {
	            element.indeterminate = false;
	            checked = element.checked;
	        }
	        else if (element instanceof HTMLDivElement) {
	            var checkbox = element.children[1];
	            if (checkbox instanceof HTMLInputElement) {
	                checkbox.indeterminate = false;
	                checkbox.checked = !checkbox.checked;
	                checked = checkbox.checked;
	            }
	        }
	        return checked;
	    };
	    FilterSelector.prototype._checkboxDomCheck = function (element, state) {
	        var ele = element.children[1];
	        if (state === FilteringManager_1.ActiveState.ACTIVE) {
	            ele.indeterminate = false;
	            ele.checked = true;
	        }
	        else if (state === FilteringManager_1.ActiveState.UNACTIVE) {
	            ele.indeterminate = false;
	            ele.checked = false;
	        }
	        else if (state === FilteringManager_1.ActiveState.INDETERMINATE) {
	            ele.indeterminate = true;
	            ele.checked = false;
	        }
	        else {
	            throw new Error('invalid checkbox dom checking state: ' + state);
	        }
	    };
	    // ANCHOR smalls
	    FilterSelector.prototype._convertIDtoNumeric = function (id) {
	        return Number(id.substring(4));
	    };
	    FilterSelector.prototype._getItemDOMID = function (event, isCollapClicked) {
	        // viewport상에 보이는 인덱스 
	        var element = event.target;
	        if (isCollapClicked) {
	            element = element.parentElement;
	        }
	        else {
	            if (element instanceof HTMLInputElement) {
	                element = element.parentElement;
	            }
	            else if (element instanceof HTMLDivElement) {
	                var checkbox = element.children[1];
	                checkbox.checked = !checkbox.checked;
	            }
	        }
	        return this._convertIDtoNumeric(element.id);
	    };
	    FilterSelector.prototype._observeChange = function (id) {
	        if (this._changedID[id]) {
	            delete this._changedID[id];
	        }
	        else {
	            this._changedID[id] = true;
	        }
	    };
	    // ANCHOR boxhandling
	    FilterSelector.prototype._childsInfoActive = function (itemInfo, id, state) {
	        var childs = itemInfo.childs;
	        var len = childs.length;
	        for (var i = 0; i < len; i++) {
	            this._childsInfoActive(this._itemsInfoStore[childs[i]], childs[i], state);
	        }
	        var condi_1 = itemInfo.state === FilteringManager_1.ActiveState.ACTIVE && state !== FilteringManager_1.ActiveState.ACTIVE;
	        var condi_2 = itemInfo.state !== FilteringManager_1.ActiveState.ACTIVE && state === FilteringManager_1.ActiveState.ACTIVE;
	        if (condi_1 || condi_2) {
	            this._observeChange(id);
	        }
	        itemInfo.state = state;
	    };
	    FilterSelector.prototype._parentInfoActive = function (itemInfo, state) {
	        var pID = itemInfo.parent;
	        var infos = this._itemsInfoStore;
	        var pItemInfo = infos[pID];
	        if (pItemInfo) {
	            var childs = pItemInfo.childs;
	            var len = childs.length;
	            var pActive = this._isParentActive(childs, len);
	            var condi_1 = pItemInfo.state === FilteringManager_1.ActiveState.ACTIVE && state !== pActive;
	            var condi_2 = pItemInfo.state !== FilteringManager_1.ActiveState.ACTIVE && state === pActive;
	            if (condi_1 || condi_2) {
	                // observe
	                this._observeChange(pID);
	            }
	            pItemInfo.state = pActive;
	            this._parentInfoActive(pItemInfo, state);
	        }
	    };
	    FilterSelector.prototype._isParentActive = function (childs, len) {
	        var prev;
	        var infos = this._itemsInfoStore;
	        for (var i = 0; i < len; i++) {
	            var state = infos[childs[i]].state;
	            if (!prev) {
	                prev = state;
	            }
	            if (prev !== state) {
	                return FilteringManager_1.ActiveState.INDETERMINATE;
	            }
	        }
	        return prev;
	    };
	    FilterSelector.prototype._afterCheck = function () {
	        var vEles = this._viewingFilterElements;
	        var len = vEles.length;
	        for (var i = 0; i < len; i++) {
	            var id = this._convertIDtoNumeric(vEles[i].id);
	            var store = this._itemsInfoStore;
	            this._checkboxDomCheck(vEles[i], store[id].state);
	        }
	    };
	    // ANCHOR for collapsing
	    FilterSelector.prototype._changeItemDomContents = function (ele, wvindex) {
	        var id = this._willViewItemsIDStore[wvindex];
	        var itemInfo = this._itemsInfoStore[id];
	        this._changeItemAttr(ele, itemInfo.text, itemInfo.level, 'rg-filter-item', id, itemInfo.isCollapsed, wvindex * this._itemHeight);
	        this._checkboxDomCheck(ele, itemInfo.state);
	    };
	    FilterSelector.prototype._resizeListContainer = function () {
	        var num = this._willViewItemsIDStore.length;
	        this._listContainer.style.height = num * this._itemHeight + 'px';
	    };
	    FilterSelector.prototype._changeWillViewItemStore = function () {
	        var store = this._defaultwvIDStore;
	        var len = store.length;
	        this._willViewItemsIDStore = this._changeWillViewItemStoreHelper(store, len);
	    };
	    FilterSelector.prototype._changeWillViewItemStoreHelper = function (store, len) {
	        var res = [];
	        for (var i = 0; i < len; i++) {
	            res.push(store[i]);
	            var itemInfo = this._itemsInfoStore[store[i]];
	            var isCollapsed = itemInfo.isCollapsed;
	            if (isCollapsed !== undefined) {
	                var subres = void 0;
	                if (!isCollapsed) {
	                    var childs = this._itemsInfoStore[store[i]].childs;
	                    var len_1 = childs.length;
	                    subres = this._changeWillViewItemStoreHelper(childs, len_1);
	                    res = res.concat(subres);
	                }
	                else {
	                    var level = itemInfo.level;
	                    for (var j = i + 1; j < len; j++) {
	                        if (level < this._itemsInfoStore[store[j]].level) {
	                            i++;
	                        }
	                        else {
	                            break;
	                        }
	                    }
	                }
	            }
	        }
	        return res;
	    };
	    FilterSelector.prototype._getTopPosAsNum = function (element) {
	        var val = element.style.top;
	        return Number(val.substr(0, val.length - 2));
	    };
	    // ANCHOR  for scroll
	    FilterSelector.prototype._decideFirstItemIndex = function () {
	        var curr = this._currentScrollTop;
	        var height = this._itemHeight;
	        this._firstItemIndex = Math.floor(curr / height);
	    };
	    // ANCHOR for searching
	    FilterSelector.prototype._clearSearch = function () {
	        this._searchbox.value = '';
	        this._searchbox.dispatchEvent(new Event('input'));
	    };
	    // ANCHOR  build method
	    FilterSelector.prototype._buildElements = function (column, dataSource, autoFilter) {
	        var footerOption = this._soptions.showButtons;
	        this._hasFooter = false;
	        this._targetColumn = column;
	        var options = this._soptions;
	        // build items
	        this._manager.buildItems(column, dataSource, autoFilter, this._options);
	        // create checkinfo from build items
	        this._createItemInfo();
	        // header
	        this._header = document.createElement('div');
	        this._header.className = 'rg-filter-header';
	        this._element.appendChild(this._header);
	        // searchbox
	        var partialSearch = this._soptions.partialSearch;
	        var searchboxDiv;
	        if (partialSearch) {
	            searchboxDiv = document.createElement('div');
	            searchboxDiv.className = 'rg-filter-searchbox';
	            this._header.appendChild(searchboxDiv);
	        }
	        // selectall
	        this._buildSelectAllBox(footerOption);
	        // filterListViewport
	        this._filterListViewport = document.createElement('div');
	        this._filterListViewport.className = 'rg-filter-list-viewport';
	        this._filterListViewport.addEventListener('scroll', this._scrollHandler.bind(this));
	        this._element.appendChild(this._filterListViewport);
	        // list container which has longer height
	        this._listContainer = document.createElement('div');
	        this._listContainer.className = 'rg-filter-list';
	        this._listContainer.style.position = 'relative';
	        this._filterListViewport.appendChild(this._listContainer);
	        // rendering
	        this._buildFilterItems(footerOption);
	        if (partialSearch) {
	            this._buildSearchbox(searchboxDiv);
	        }
	        this._buildFooter(this._element, footerOption);
	    };
	    FilterSelector.prototype._buildSelectAllBox = function (footerOption) {
	        // 전체선택 text
	        var text = this._soptions.allCheckText;
	        console.log('selectall check text is ' + text);
	        // element creation
	        this._selectAllElement = this._buildItemElement(text, 0, 'rg-filter-select-all');
	        this._header.appendChild(this._selectAllElement);
	        var searchText;
	        if (this._manager.searched) {
	            searchText = this._soptions.searchedCheckText;
	        }
	        this._changeItemAttr(this._selectAllElement, searchText);
	        // all box event listenenr 추가
	        this._selectAllElement.addEventListener('click', this._selectAllHandler.bind(this));
	        // initialize
	        this._isAllboxCheck();
	    };
	    FilterSelector.prototype._buildFilterItem = function (footerOption, i) {
	        var items = this._items;
	        var container = this._listContainer;
	        //create
	        var isCollapsed = this._itemsInfoStore[items[i].id].isCollapsed;
	        var selectFilterEle = this._buildItemElement(items[i].text, items[i].level, 'rg-filter-item', items[i].id, isCollapsed);
	        //initialize
	        var selectFilterBox;
	        if (selectFilterEle.children[1] instanceof HTMLInputElement) {
	            selectFilterBox = selectFilterEle.children[1];
	        }
	        var state = items[i].activeState;
	        if (state === FilteringManager_1.ActiveState.ACTIVE) {
	            selectFilterBox.checked = true;
	        }
	        else if (state === FilteringManager_1.ActiveState.UNACTIVE) {
	            selectFilterBox.checked = false;
	        }
	        else {
	            selectFilterBox.indeterminate = true;
	        }
	        selectFilterEle.style.position = 'absolute'; // 위치지정
	        selectFilterEle.style.height = this._itemHeight + 'px'; // 자동줄바꿈 방지
	        //add event listener, appendchild
	        selectFilterEle.addEventListener('click', this._boxHandler.bind(this));
	        container.appendChild(selectFilterEle);
	        return selectFilterEle;
	    };
	    FilterSelector.prototype._buildFilterItems = function (footerOption) {
	        //--------------- praperation starts ---------------- //
	        //get item height
	        var preparedItem = this._buildItemElement(null, null, 'rg-filter-item');
	        this._listContainer.appendChild(preparedItem);
	        this._itemHeight = Math.floor(preparedItem.getBoundingClientRect().height);
	        // get collapsebutton
	        var left;
	        var padding = preparedItem.children[0];
	        padding.classList.add('rg-filter-item-indent-0');
	        var checkbox = preparedItem.children[1];
	        var checkboxLeft = checkbox.getBoundingClientRect().left;
	        var collap = preparedItem.children[2];
	        collap.classList.add('rg-filter-item-expanded');
	        if (checkbox && padding) {
	            padding.classList.add('rg-filter-item-indent-1');
	            left = 0 - collap.getBoundingClientRect().width;
	            this._collapseButtonLeft = left;
	            this._indentSize = checkbox.getBoundingClientRect().left - checkboxLeft;
	        }
	        this._listContainer.removeChild(preparedItem);
	        // --------------- praperation ends ----------------- //
	        var items = this._items;
	        var wvItems = this._willViewItemsIDStore;
	        var num = wvItems.length;
	        this._viewingFilterElements = [];
	        // calculate
	        var viewportHeight = this._filterListViewport.offsetHeight; // fixed viewport의 높이
	        var len = Math.min(this._items.length, Math.floor(viewportHeight / this._itemHeight) + 2); // 하나에 몇개 들어가느냐의 높이
	        this._viewingMaxItemLen = len; // 다른 데서 쓰기 위함
	        console.log('viewing maxItems number is: ' + len);
	        this._listContainer.style.height = num * this._itemHeight + 'px'; // listContainer의 높이
	        var initLen = num < len ? num : len;
	        // rendering
	        for (var i = 0; i < initLen; i++) {
	            var info = this._itemsInfoStore[wvItems[i]];
	            var index = info.index;
	            var filterItemElement = this._buildFilterItem(footerOption, index); // 처음에 rendering e.g. 5개
	            this._checkboxDomCheck(filterItemElement, info.state);
	            filterItemElement.style.top = i * this._itemHeight + 'px'; // top 위치 정해줌
	            this._viewingFilterElements.push(filterItemElement); // viewing에 추가
	        }
	    };
	    FilterSelector.prototype._buildSearchbox = function (searchboxDiv) {
	        this._searchbox = document.createElement('input');
	        this._searchbox.type = 'text';
	        var placeholder = this._soptions.searchPlaceholder;
	        this._searchbox.placeholder = placeholder;
	        this._searchbox.className = 'rg-filter-search-input';
	        searchboxDiv.appendChild(this._searchbox);
	        this._searchbox.addEventListener('input', this._searchHandler.bind(this));
	        this._hasSearchbox = true;
	    };
	    FilterSelector.prototype._buildFooter = function (container, footerOption) {
	        if (footerOption) {
	            this._footer = document.createElement('div');
	            this._footer.className = 'rg-filter-footer-container';
	            var confirm_1 = document.createElement('button');
	            confirm_1.className = 'rg-filter-footer-confirm-button';
	            var cancel = document.createElement('button');
	            cancel.className = 'rg-filter-footer-cancel-button';
	            this._footer.appendChild(cancel);
	            this._footer.appendChild(confirm_1);
	            confirm_1.textContent = this._soptions.acceptText || 'Confirm';
	            confirm_1.addEventListener('click', this._filtersApply.bind(this));
	            cancel.textContent = this._soptions.cancelText || 'Cancel';
	            cancel.addEventListener('click', this._finalizeElements.bind(this));
	            container.appendChild(this._footer);
	            this._hasFooter = true;
	        }
	    };
	    // ANCHOR finalize methods
	    FilterSelector.prototype._finalizeSearchbox = function () {
	        if (this._hasSearchbox) {
	            if (this._searchbox) {
	                this._searchbox.removeEventListener('input', this._searchHandler.bind(this));
	            }
	            // searchboxdiv 제거
	            this._searchbox.parentElement.parentElement.removeChild(this._searchbox.parentElement);
	            // searchbox 제거
	            this._searchbox.parentElement.removeChild(this._searchbox);
	            this._searchbox = null;
	            this._hasSearchbox = false;
	        }
	    };
	    FilterSelector.prototype._finalizeSelectAllBox = function () {
	        // select all box 제거
	        this._selectAllElement.removeEventListener('click', this._selectAllHandler.bind(this));
	        this._selectAllElement.removeChild(this._selectAllElement.children[1]);
	        this._selectAllElement.removeChild(this._selectAllElement.children[0]);
	        this._selectAllElement.parentElement.removeChild(this._selectAllElement);
	        this._selectAllElement = null;
	    };
	    FilterSelector.prototype._fianlizeFilterItem = function (i) {
	        var filBoxEle = this._viewingFilterElements[i];
	        var filCollap = filBoxEle.children[2];
	        var filChkbox = filBoxEle.children[1];
	        var filPadding = filBoxEle.children[0];
	        filBoxEle.removeEventListener('click', this._boxHandler.bind(this));
	        filBoxEle.removeChild(filCollap);
	        filBoxEle.removeChild(filChkbox);
	        filBoxEle.removeChild(filPadding);
	        filBoxEle.parentElement.removeChild(filBoxEle);
	    };
	    FilterSelector.prototype._finalizeFilterItems = function () {
	        var len = this._viewingFilterElements.length;
	        for (var i = len - 1; i > -1; i--) {
	            this._fianlizeFilterItem(i);
	        }
	        this._viewingMaxItemLen = 0;
	        this._itemHeight = 0;
	        this._currentScrollTop = 0;
	        this._isAllChecked = null;
	        this._collapseButtonLeft = 0;
	        this._indentSize = 0;
	        this._firstItemIndex = 0;
	        this._isNoTreeCheckbox = null;
	        this._viewingFilterElements = null;
	        this._willViewItemsIDStore = [];
	        this._defaultwvIDStore = [];
	        this._viewingMaxItemLen = 0;
	    };
	    FilterSelector.prototype._finalizeFooter = function () {
	        if (this._hasFooter) {
	            var confirm_2 = this._footer.children[1];
	            confirm_2.removeEventListener('click', this._filtersApply.bind(this));
	            this._footer.removeChild(confirm_2);
	            var cancel = this._footer.children[0];
	            cancel.removeEventListener('click', this._finalizeElements.bind(this));
	            this._footer.removeChild(cancel);
	            this._footer.parentElement.removeChild(this._footer);
	            this._footer = null;
	            this._hasFooter = false;
	        }
	    };
	    FilterSelector.prototype._finalizeHeader = function () {
	        this._finalizeSearchbox();
	        this._finalizeSelectAllBox();
	    };
	    FilterSelector.prototype._finalizeBody = function () {
	        this._finalizeFilterItems();
	        this._filterListViewport.removeChild(this._listContainer);
	        this._filterListViewport.removeEventListener('scroll', this._scrollHandler.bind(this));
	        this._listContainer = null;
	    };
	    FilterSelector.prototype._finalizeElements = function () {
	        this._clearSearch();
	        this._finalizeHeader();
	        this._finalizeBody();
	        this._removeItemInfo();
	        this._finalizeFooter();
	        this._element.removeChild(this._header);
	        this._element.removeChild(this._filterListViewport);
	        this._header = null;
	        this._filterListViewport = null;
	    };
	    //-------------------------------------------------------------------------
	    // handlers
	    //-------------------------------------------------------------------------
	    FilterSelector.prototype._globalMouseDownHandler = function (event) {
	        var p = event.target;
	        while (p) {
	            if (p === this._element) {
	                // event.stopImmediatePropagation();
	                return;
	            }
	            p = p.parentElement;
	        }
	        this.hide();
	    };
	    FilterSelector.prototype._globalKeyDownHandler = function (event) {
	        if (event.keyCode == 27) {
	            this.hide();
	        }
	    };
	    // ANCHOR  handlers
	    FilterSelector.prototype._searchHandler = function (event) {
	        if (event.target instanceof HTMLInputElement) {
	            this._finalizeFilterItems();
	            this._finalizeSelectAllBox();
	            this._removeItemInfo();
	            var text = event.target.value || '';
	            this._manager.search(text);
	            this._createItemInfo();
	            this._buildSelectAllBox(this._hasFooter);
	            this._buildFilterItems(this._hasFooter);
	        }
	    };
	    FilterSelector.prototype._selectAllHandler = function (event) {
	        console.log('select all box handler runned');
	        // allbox dom 체크
	        var checked = this._checkSelectAllBoxDOM(event);
	        // items dom 체크 및 정보변경
	        this._selectAll(checked);
	        if (!this._hasFooter) {
	            this._changedID = {};
	            this._manager.activateAll(checked);
	        }
	    };
	    FilterSelector.prototype._boxHandler = function (event) {
	        var isCollapClicked = event.target instanceof HTMLDivElement && !event.target.children[2];
	        // 해당 filterbox dom check 및 화면에서 id get
	        var id = this._getItemDOMID(event, isCollapClicked);
	        // iteminfo
	        var itemInfo = this._itemsInfoStore[id];
	        var isCollap = isCollapClicked && itemInfo.isCollapsed !== undefined;
	        if (isCollap) {
	            console.log('collapsing!');
	            this._collapseHandler(event);
	        }
	        else {
	            var state = void 0;
	            if (itemInfo.state === FilteringManager_1.ActiveState.ACTIVE) {
	                state = FilteringManager_1.ActiveState.UNACTIVE;
	            }
	            else {
	                state = FilteringManager_1.ActiveState.ACTIVE;
	            }
	            this._childsInfoActive(itemInfo, id, state);
	            this._parentInfoActive(itemInfo, state);
	            this._afterCheck();
	        }
	        var index = itemInfo.index;
	        console.log('ID is: ' + id);
	        console.log('res index is: ' + index);
	        // 전체선택 해당?
	        this._isAllboxCheck();
	        // footer가 없을 경우 필터적용
	        if (!isCollap && !this._hasFooter) {
	            if (itemInfo.isCollapsed === undefined) {
	                var value = itemInfo.state === FilteringManager_1.ActiveState.ACTIVE ? true : false;
	                this._changedID = {};
	                this._manager.activate(this._items[index], value);
	            }
	            else {
	                this._filtersApplyHelper();
	            }
	        }
	    };
	    FilterSelector.prototype._scrollHandler = function (event) {
	        this._currentScrollTop = this._filterListViewport.scrollTop;
	        var vEles = this._viewingFilterElements;
	        var len = vEles.length;
	        var wvlen = this._willViewItemsIDStore.length;
	        var max = this._viewingMaxItemLen;
	        var preIdx = this._firstItemIndex;
	        this._decideFirstItemIndex();
	        var idx = this._firstItemIndex;
	        var height = this._itemHeight;
	        console.log('----scroll----');
	        console.log('list scroll top is: ' + this._filterListViewport.scrollTop);
	        console.log('currentTop is: ' + this._currentScrollTop);
	        console.log('wvitemID index is: ' + idx);
	        var idxDiff = idx - preIdx;
	        var later;
	        for (var i = 0; i < len; i++) {
	            if (idxDiff > 0) {
	                var top_1 = this._getTopPosAsNum(vEles[i]);
	                var newTop = idx * height;
	                if (top_1 < newTop) {
	                    var newIdx = preIdx + len - 1 + idxDiff;
	                    if (newIdx >= wvlen) {
	                        later = vEles[i];
	                    }
	                    else {
	                        this._changeItemDomContents(vEles[i], newIdx);
	                    }
	                    idxDiff--;
	                }
	            }
	            else if (idxDiff < 0) {
	                var bot = this._getTopPosAsNum(vEles[i]) + height;
	                var newBot = (idx + len) * height;
	                if (bot > newBot) {
	                    this._changeItemDomContents(vEles[i], preIdx + idxDiff);
	                    idxDiff++;
	                }
	            }
	        }
	        if (later) {
	            this._changeItemDomContents(later, idx - 1);
	        }
	    };
	    FilterSelector.prototype._collapseHandler = function (event) {
	        var collap = event.target;
	        var fIDom = collap.parentElement;
	        var store = this._itemsInfoStore;
	        var id;
	        var top = this._getTopPosAsNum(fIDom);
	        if (fIDom) {
	            id = this._convertIDtoNumeric(fIDom.id);
	            if (store[id].isCollapsed !== undefined) {
	                store[id].isCollapsed = !store[id].isCollapsed;
	                this._changeWillViewItemStore();
	                this._resizeListContainer();
	                var wvlen = this._willViewItemsIDStore.length;
	                var maxLen = this._viewingMaxItemLen;
	                var vItems = this._viewingFilterElements;
	                var vlen = vItems.length;
	                // 빼주기
	                if (vlen > wvlen) {
	                    var wvCount = 0;
	                    var index = top / this._itemHeight;
	                    var later = [];
	                    var nonChanged = 0;
	                    for (var i = vlen - 1; i >= 0; i--) {
	                        var anotherTop = this._getTopPosAsNum(vItems[i]);
	                        if (top <= anotherTop) {
	                            if (wvCount < wvlen - index) {
	                                if (index + wvCount >= vItems.length) {
	                                    later.push(vItems[i]); // 콜랩스 후 다음 아이템이 없을 경우
	                                }
	                                else {
	                                    this._changeItemDomContents(vItems[i], index + wvCount);
	                                    wvCount++;
	                                }
	                            }
	                            else {
	                                // 콜랩스 후 vlen이 바뀐경우
	                                if (vItems.length + later.length === wvlen) {
	                                    later.push(vItems[i]);
	                                }
	                                else {
	                                    this._fianlizeFilterItem(i);
	                                    vItems.splice(i, 1);
	                                }
	                            }
	                        }
	                        else {
	                            nonChanged++;
	                        }
	                    }
	                    var lalen = later.length;
	                    for (var i = 1; i <= lalen; i++) {
	                        var newIdx = index - i - nonChanged;
	                        if (newIdx >= 0) {
	                            this._changeItemDomContents(later[i - 1], newIdx);
	                        }
	                    }
	                }
	                else {
	                    var nonChanged = 0;
	                    var laterTop = [];
	                    var index = top / this._itemHeight;
	                    var laterBot = void 0;
	                    var greatBotIdx = index;
	                    for (var i = 0; i < vlen; i++) {
	                        var anotherTop = this._getTopPosAsNum(vItems[i]);
	                        if (top <= anotherTop) {
	                            var wvindex = anotherTop / this._itemHeight;
	                            if (wvindex >= wvlen) {
	                                laterTop.push(vItems[i]);
	                            }
	                            else {
	                                this._changeItemDomContents(vItems[i], wvindex);
	                                if (greatBotIdx < wvindex) {
	                                    greatBotIdx = wvindex;
	                                }
	                            }
	                        }
	                        else {
	                            nonChanged++;
	                            var anotherBot = anotherTop + this._itemHeight;
	                            if (this._currentScrollTop > anotherBot) {
	                                laterBot = vItems[i];
	                            }
	                        }
	                    }
	                    var lalenT = laterTop.length;
	                    for (var i = 1; i <= lalenT; i++) {
	                        var newIdx = index - i - nonChanged;
	                        if (newIdx >= 0) {
	                            this._changeItemDomContents(laterTop[i - 1], newIdx);
	                        }
	                    }
	                    if (laterBot) {
	                        this._changeItemDomContents(laterBot, greatBotIdx + 1);
	                    }
	                }
	                // 더해주기
	                if (vlen < maxLen && vlen < wvlen) {
	                    var len = maxLen < wvlen ? maxLen - vlen : wvlen - vlen;
	                    for (var i = 0; i < len; i++) {
	                        var added = this._buildItemElement('default', 1);
	                        this._viewingFilterElements.push(added);
	                        added.style.position = 'absolute'; // 위치지정
	                        added.style.height = this._itemHeight + 'px';
	                        //add event listener, appendchild
	                        added.addEventListener('click', this._boxHandler.bind(this));
	                        this._listContainer.appendChild(added);
	                        this._changeItemDomContents(added, this._firstItemIndex + vlen + i);
	                    }
	                }
	            }
	        }
	    };
	    return FilterSelector;
	}(EventAware_1.EventAware));
	exports.FilterSelector = FilterSelector;
	});

	unwrapExports(FilterSelector_1);
	var FilterSelector_2 = FilterSelector_1.FilterSelector;

	var Globals = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Globals.ts
	// 2019. 08. 02. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });
	// export let $_doc = document;
	// export let $_win = window;
	exports.$_instanceOf = function (elt, clazz) {
	    return typeof (elt) === 'object' && Object.prototype.toString.call(elt).indexOf(clazz) >= 0;
	};
	// export const $_resetDocument = function(elt: HTMLElement): void {
	//     $_doc = elt.ownerDocument;
	//     $_win = $_doc.defaultView;
	// } 
	exports._gk = "dkdl";
	});

	unwrapExports(Globals);
	var Globals_1 = Globals.$_instanceOf;
	var Globals_2 = Globals._gk;

	var LicenseChecker_1 = createCommonjsModule(function (module, exports) {
	Object.defineProperty(exports, "__esModule", { value: true });


	var Base64 = /** @class */ (function () {
	    function Base64() {
	    }
	    // Convert a base64-encoded string to an array of bytes
	    Base64.decode = function (cipher) {
	        var tab = Base64.CHARACTERS;
	        var p = Base64.SUFFIX;
	        var s = cipher.split(""), out = [];
	        var l = s.length;
	        while (s[--l] == p) { } //  strip off trailing padding
	        for (var i = 0; i < l;) {
	            var t = tab.indexOf(s[i++]) << 18;
	            if (i <= l) {
	                t |= tab.indexOf(s[i++]) << 12;
	            }
	            if (i <= l) {
	                t |= tab.indexOf(s[i++]) << 6;
	            }
	            if (i <= l) {
	                t |= tab.indexOf(s[i++]);
	            }
	            out.push((t >>> 16) & 0xff);
	            out.push((t >>> 8) & 0xff);
	            out.push(t & 0xff);
	        }
	        //  strip off any null bytes
	        while (out[out.length - 1] == 0) {
	            out.pop();
	        }
	        return out; //  byte[]
	    };
	    Base64.SUFFIX = "=";
	    Base64.CHARACTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
	    return Base64;
	}());
	var Cryptor = /** @class */ (function () {
	    function Cryptor() {
	    }
	    Cryptor.union = function (v, box) {
	        var d = box.s3[v & 0xff];
	        v >>= 8;
	        var c = box.s2[v & 0xff];
	        v >>= 8;
	        var b = box.s1[v & 0xff];
	        v >>= 8;
	        var a = box.s0[v & 0xff];
	        var r = (((a >> 0x10) + (b >> 0x10) + (((a & 0xffff) + (b & 0xffff)) >> 0x10)) << 0x10) | (((a & 0xffff) + (b & 0xffff)) & 0xffff);
	        r = (((r >> 0x10) ^ (c >> 0x10)) << 0x10) | (((r & 0xffff) ^ (c & 0xffff)) & 0xffff);
	        return (((r >> 0x10) + (d >> 0x10) + (((r & 0xffff) + (d & 0xffff)) >> 0x10)) << 0x10) | (((r & 0xffff) + (d & 0xffff)) & 0xffff);
	    };
	    Cryptor.xor = function (x, y) {
	        return (((x >> 0x10) ^ (y >> 0x10)) << 0x10) | (((x & 0xffff) ^ (y & 0xffff)) & 0xffff);
	    };
	    Cryptor._encryptBlock = function (obj, box) {
	        var l = obj['left'];
	        var r = obj['right'];
	        var xor = Cryptor.xor;
	        var u = Cryptor.union;
	        l = xor(l, box.p[0]);
	        r = xor(r, xor(u(l, box), box.p[1]));
	        l = xor(l, xor(u(r, box), box.p[2]));
	        r = xor(r, xor(u(l, box), box.p[3]));
	        l = xor(l, xor(u(r, box), box.p[4]));
	        r = xor(r, xor(u(l, box), box.p[5]));
	        l = xor(l, xor(u(r, box), box.p[6]));
	        r = xor(r, xor(u(l, box), box.p[7]));
	        l = xor(l, xor(u(r, box), box.p[8]));
	        r = xor(r, xor(u(l, box), box.p[9]));
	        l = xor(l, xor(u(r, box), box.p[10]));
	        r = xor(r, xor(u(l, box), box.p[11]));
	        l = xor(l, xor(u(r, box), box.p[12]));
	        r = xor(r, xor(u(l, box), box.p[13]));
	        l = xor(l, xor(u(r, box), box.p[14]));
	        r = xor(r, xor(u(l, box), box.p[15]));
	        l = xor(l, xor(u(r, box), box.p[16]));
	        obj['right'] = l;
	        obj['left'] = xor(r, box.p[17]);
	    };
	    Cryptor._decryptBlock = function (obj, box) {
	        var l = obj['left'];
	        var r = obj['right'];
	        var xor = Cryptor.xor;
	        var $ = Cryptor.union;
	        l = xor(l, box.p[17]);
	        r = xor(r, xor($(l, box), box.p[16]));
	        l = xor(l, xor($(r, box), box.p[15]));
	        r = xor(r, xor($(l, box), box.p[14]));
	        l = xor(l, xor($(r, box), box.p[13]));
	        r = xor(r, xor($(l, box), box.p[12]));
	        l = xor(l, xor($(r, box), box.p[11]));
	        r = xor(r, xor($(l, box), box.p[10]));
	        l = xor(l, xor($(r, box), box.p[9]));
	        r = xor(r, xor($(l, box), box.p[8]));
	        l = xor(l, xor($(r, box), box.p[7]));
	        r = xor(r, xor($(l, box), box.p[6]));
	        l = xor(l, xor($(r, box), box.p[5]));
	        r = xor(r, xor($(l, box), box.p[4]));
	        l = xor(l, xor($(r, box), box.p[3]));
	        r = xor(r, xor($(l, box), box.p[2]));
	        l = xor(l, xor($(r, box), box.p[1]));
	        obj['right'] = l;
	        obj['left'] = xor(r, box.p[0]);
	    };
	    Cryptor._init = function (key) {
	        var bytes = key.split("").map(function (item) {
	            return item.charCodeAt(0) & 0xff;
	        });
	        var boxes = Cryptor.kb;
	        var eb = Cryptor._encryptBlock;
	        //  init the boxes
	        var pos = 0, data = 0, i, j, l;
	        var res = { left: 0, right: 0 };
	        var box = {
	            p: boxes.p.slice(0).map(function (item) {
	                var l = bytes.length, j;
	                for (j = 0; j < 4; j++) {
	                    data = (data * Cryptor.POW8) | bytes[pos++ % l];
	                }
	                return (((item >> 0x10) ^ (data >> 0x10)) << 0x10) | (((item & 0xffff) ^ (data & 0xffff)) & 0xffff);
	            }),
	            s0: boxes.s0.slice(0),
	            s1: boxes.s1.slice(0),
	            s2: boxes.s2.slice(0),
	            s3: boxes.s3.slice(0)
	        };
	        //  encrypt p and the s boxes
	        for (i = 0, l = box.p.length; i < l;) {
	            eb(res, box);
	            box.p[i++] = res.left, box.p[i++] = res.right;
	        }
	        for (i = 0; i < 4; i++) {
	            for (j = 0, l = box["s" + i].length; j < l;) {
	                eb(res, box);
	                box["s" + i][j++] = res.left, box["s" + i][j++] = res.right;
	            }
	        }
	        return box;
	    };
	    Cryptor.decrypt = function (ciphertext, key) {
	        var db = Cryptor._decryptBlock;
	        var bx = Cryptor._init(key);
	        var pt = [];
	        var c = Base64.decode(ciphertext);
	        var count = c.length >> 3, pos = 0;
	        var obj = { left: null, right: null };
	        for (var i = 0; i < count; i++) {
	            obj.left = c[pos] * Cryptor.POW24 | c[pos + 1] * Cryptor.POW16 | c[pos + 2] * Cryptor.POW8 | c[pos + 3];
	            obj.right = c[pos + 4] * Cryptor.POW24 | c[pos + 5] * Cryptor.POW16 | c[pos + 6] * Cryptor.POW8 | c[pos + 7];
	            db(obj, bx); //  decrypt the block
	            var left = obj.left;
	            var right = obj.right;
	            pt.push((left >> 24) & 0xff);
	            pt.push((left >> 16) & 0xff);
	            pt.push((left >> 8) & 0xff);
	            pt.push(left & 0xff);
	            pt.push((right >> 24) & 0xff);
	            pt.push((right >> 16) & 0xff);
	            pt.push((right >> 8) & 0xff);
	            pt.push(right & 0xff);
	            pos += 8;
	        }
	        //  check for padding, and remove.
	        if (pt[pt.length - 1] == pt[pt.length - 2] || pt[pt.length - 1] == 0x01) {
	            var n = pt[pt.length - 1];
	            pt.splice(pt.length - n, n);
	        }
	        //  convert to string
	        return pt.map(function (item) {
	            return String.fromCharCode(item);
	        }).join(""); //  string
	    };
	    Cryptor.POW2 = Math.pow(2, 2);
	    Cryptor.POW3 = Math.pow(2, 3);
	    Cryptor.POW4 = Math.pow(2, 4);
	    Cryptor.POW8 = Math.pow(2, 8);
	    Cryptor.POW16 = Math.pow(2, 16);
	    Cryptor.POW24 = Math.pow(2, 24);
	    Cryptor.kb = {
	        p: [0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822, 0x299f31d0, 0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c, 0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917, 0x9216d5d9, 0x8979fb1b],
	        s0: [0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed, 0x6a267e96, 0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7, 0x0801f2e2, 0x858efc16, 0x636920d8, 0x71574e69, 0xa458fea3, 0xf4933d7e, 0x0d95748f, 0x728eb658, 0x718bcd58, 0x82154aee, 0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013, 0xc5d1b023, 0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e, 0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda, 0x55605c60, 0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440, 0x55ca396a, 0x2aab10b6, 0xb4cc5c34, 0x1141e8ce, 0xa15486af, 0x7c72e993, 0xb3ee1411, 0x636fbc2a, 0x2ba9c55d, 0x741831f6, 0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c, 0x7a325381, 0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193, 0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d, 0xe98575b1, 0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5, 0x0f6d6ff3, 0x83f44239, 0x2e0b4482, 0xa4842004, 0x69c8f04a, 0x9e1f9b5e, 0x21c66842, 0xf6e96c9a, 0x670c9c61, 0xabd388f0, 0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3, 0x6eef0b6c, 0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176, 0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3, 0x3b8b5ebe, 0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6, 0x4ed3aa62, 0x363f7706, 0x1bfedf72, 0x429b023d, 0x37d0d724, 0xd00a1248, 0xdb0fead3, 0x49f1c09b, 0x075372c9, 0x80991b7b, 0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b, 0x976ce0bd, 0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463, 0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f, 0x9b30952c, 0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd, 0x660f2807, 0x192e4bb3, 0xc0cba857, 0x45c8740f, 0xd20b5f39, 0xb9d3fbdb, 0x5579c0bd, 0x1a60320a, 0xd6a100c6, 0x402c7279, 0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8, 0x3c7516df, 0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760, 0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e, 0xdf1769db, 0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573, 0x695b27b0, 0xbbca58c8, 0xe1ffa35d, 0xb8f011a0, 0x10fa3d98, 0xfd2183b8, 0x4afcb56c, 0x2dd1d35b, 0x9a53e479, 0xb6f84565, 0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33, 0x62fb1341, 0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4, 0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0, 0xafc725e0, 0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64, 0x8888b812, 0x900df01c, 0x4fad5ea0, 0x688fc31c, 0xd1cff191, 0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777, 0xea752dfe, 0x8b021fa1, 0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299, 0xb4a84fe0, 0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705, 0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5, 0xfb9d35cf, 0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49, 0x00250e2d, 0x2071b35e, 0x226800bb, 0x57b8e0af, 0x2464369b, 0xf009b91e, 0x5563911d, 0x59dfa6aa, 0x78c14389, 0xd95a537f, 0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9, 0x11c81968, 0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915, 0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5, 0x571be91f, 0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6, 0xff34052e, 0xc5855664, 0x53b02d5d, 0xa99f8fa1, 0x08ba4799, 0x6e85076a],
	        s1: [0x4b7a70e9, 0xb5b32944, 0xdb75092e, 0xc4192623, 0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266, 0xecaa8c71, 0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29, 0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6, 0x99f73fd6, 0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1, 0x4cdd2086, 0x8470eb26, 0x6382e9c6, 0x021ecc5e, 0x09686b3f, 0x3ebaefc9, 0x3c971814, 0x6b6a70a1, 0x687f3584, 0x52a0e286, 0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c, 0x8e7d44ec, 0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff, 0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9, 0x7ca92ff6, 0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc, 0xc8b57634, 0x9af3dda7, 0xa9446146, 0x0fd0030e, 0xecc8c73e, 0xa4751e41, 0xe238cd99, 0x3bea0e2f, 0x3280bba1, 0x183eb331, 0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf, 0x2cb81290, 0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810, 0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6, 0x9f84cd87, 0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c, 0xec7aec3a, 0xdb851dfa, 0x63094366, 0xc464c3d2, 0xef1c1847, 0x3215d908, 0xdd433b37, 0x24c2ba16, 0x12a14d43, 0x2a65c451, 0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55, 0x81ac77d6, 0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509, 0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570, 0xeae96fb1, 0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa, 0x2965dcb9, 0x99e71d0f, 0x803e89d6, 0x5266c825, 0x2e4cc978, 0x9c10b36a, 0xc6150eba, 0x94e2ea78, 0xa5fc3c53, 0x1e0a2df4, 0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960, 0x5223a708, 0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883, 0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185, 0x68ab9802, 0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84, 0x1521b628, 0x29076170, 0xecdd4775, 0x619f1510, 0x13cca830, 0xeb61bd96, 0x0334fe1e, 0xaa0363cf, 0xb5735c90, 0x4c70a239, 0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7, 0x9cab5cab, 0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50, 0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19, 0x875fa099, 0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77, 0x11ed935f, 0x16681281, 0x0e358829, 0xc7e61fd6, 0x96dedfa1, 0x7858ba99, 0x57f584a5, 0x1b227263, 0x9b83c3ff, 0x1ac24696, 0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128, 0x58ebf2ef, 0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3, 0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15, 0xfacb4fd0, 0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105, 0xd81e799e, 0x86854dc7, 0xe44b476a, 0x3d816250, 0xcf62a1f2, 0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3, 0x7f1524c3, 0x69cb7492, 0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d, 0x1462b174, 0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061, 0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759, 0xcbee7460, 0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e, 0xe8efd855, 0x61d99735, 0xa969a7aa, 0xc50c06c2, 0x5a04abfc, 0x800bcadc, 0x9e447a2e, 0xc3453484, 0xfdd56705, 0x0e1e9ec9, 0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340, 0xc5c43465, 0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a, 0xe6e39f2b, 0xdb83adf7],
	        s2: [0xe93d5a68, 0x948140f7, 0xf64c261c, 0x94692934, 0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068, 0xd4082471, 0x3320f46a, 0x43b7d4b7, 0x500061af, 0x1e39f62e, 0x97244546, 0x14214f74, 0xbf8b8840, 0x4d95fc1d, 0x96b591af, 0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785, 0x7fac6dd0, 0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a, 0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462, 0xd7486900, 0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c, 0xb58ce006, 0x7af4d6b6, 0xaace1e7c, 0xd3375fec, 0xce78a399, 0x406b2a42, 0x20fe9e35, 0xd9f385b9, 0xee39d7ab, 0x3b124e8b, 0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2, 0x3a6efa74, 0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397, 0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7, 0xd096954b, 0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33, 0xa62a4a56, 0x3f3125f9, 0x5ef47e1c, 0x9029317c, 0xfdf8e802, 0x04272f70, 0x80bb155c, 0x05282ce3, 0x95c11548, 0xe4c66d22, 0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f, 0x404779a4, 0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564, 0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2, 0x02e1329e, 0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1, 0x3b240b62, 0xeebeb922, 0x85b2a20e, 0xe6ba0d99, 0xde720c8c, 0x2da2f728, 0xd0127845, 0x95b794fd, 0x647d0862, 0xe7ccf5f0, 0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e, 0x0a476341, 0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8, 0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b, 0xdcd0e804, 0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b, 0x667b9ffb, 0xcedb7d9c, 0xa091cf0b, 0xd9155ea3, 0xbb132f88, 0x515bad24, 0x7b9479bf, 0x763bd6eb, 0x37392eb3, 0xcc115979, 0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b, 0x12754ccc, 0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350, 0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659, 0x0a121386, 0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f, 0xbebfe988, 0x64e4c3fe, 0x9dbc8057, 0xf0f7c086, 0x60787bf8, 0x6003604d, 0xd1fd8346, 0xf6381fb0, 0x7745ae04, 0xd736fccc, 0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f, 0x77a057be, 0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2, 0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255, 0x46fcd9b9, 0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2, 0x466e598e, 0x20b45770, 0x8cd55591, 0xc902de4c, 0xb90bace1, 0xbb8205d0, 0x11a86248, 0x7574a99e, 0xb77f19b6, 0xe0a9dc09, 0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c, 0x4a99a025, 0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169, 0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01, 0xa70683fa, 0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641, 0xc3604c06, 0x61a806b5, 0xf0177a28, 0xc0f586e0, 0x006058aa, 0x30dc7d62, 0x11e69ed7, 0x2338ea63, 0x53c2dd94, 0xc2c21634, 0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76, 0x6f05e409, 0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9, 0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3, 0x4dad0fc4, 0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c, 0x6fd5c7e7, 0x56e14ec4, 0x362abfce, 0xddc6c837, 0xd79a3234, 0x92638212, 0x670efa8e, 0x406000e0],
	        s3: [0x3a39ce37, 0xd3faf5cf, 0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742, 0xd3822740, 0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b, 0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f, 0xbc946e79, 0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d, 0xd5730a1d, 0x4cd04dc6, 0x2939bbdb, 0xa9ba4650, 0xac9526e8, 0xbe5ee304, 0xa1fad5f0, 0x6a2d519a, 0x63ef8ce2, 0x9a86ee22, 0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4, 0x83c061ba, 0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1, 0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69, 0x77fa0a59, 0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593, 0xe990fd5a, 0x9e34d797, 0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a, 0x017da67d, 0xd1cf3ed6, 0x7c7d2d28, 0x1f9f25cf, 0xadf2b89b, 0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6, 0x47b0acfd, 0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28, 0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4, 0x88f46dba, 0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2, 0x97271aec, 0xa93a072a, 0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb, 0x26dcf319, 0x7533d928, 0xb155fdf5, 0x03563482, 0x8aba3cbb, 0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f, 0x4de81751, 0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce, 0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369, 0x6413e680, 0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166, 0xb39a460a, 0x6445c0dd, 0x586cdecf, 0x1c20c8ae, 0x5bbef7dd, 0x1b588d40, 0xccd2017f, 0x6bb4e3bb, 0xdda26a7e, 0x3a59ff45, 0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb, 0x8d6612ae, 0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370, 0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08, 0x4eb4e2cc, 0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d, 0x06b89fb4, 0xce6ea048, 0x6f3f3b82, 0x3520ab82, 0x011a1d4b, 0x277227f8, 0x611560b1, 0xe7933fdc, 0xbb3a792b, 0x344525bd, 0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9, 0xe01cc87e, 0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a, 0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c, 0xe0b12b4f, 0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c, 0xbf97222c, 0x15e6fc2a, 0x0f91fc71, 0x9b941525, 0xfae59361, 0xceb69ceb, 0xc2a86459, 0x12baa8d1, 0xb6c1075e, 0xe3056a0c, 0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b, 0x4c98a0be, 0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e, 0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d, 0x9b992f2e, 0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891, 0xce6279cf, 0xcd3e7e6f, 0x1618b166, 0xfd2c1d05, 0x848fd2c5, 0xf6fb2299, 0xf523f357, 0xa6327623, 0x93a83531, 0x56cccd02, 0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc, 0xde966292, 0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a, 0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2, 0x35bdd2f6, 0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b, 0x53113ec0, 0x1640e3d3, 0x38abbd60, 0x2547adf0, 0xba38209c, 0xf746ce76, 0x77afa1c5, 0x20756060, 0x85cbfe4e, 0x8ae88dd8, 0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c, 0x01c36ae4, 0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f, 0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6],
	        k: [0x000000ca, 0x000000da, 0x000000cc, 0x00000064]
	    };
	    return Cryptor;
	}());
	exports.Cryptor = Cryptor;
	var LicenseChecker = /** @class */ (function () {
	    function LicenseChecker() {
	    }
	    LicenseChecker.eqaulsUpperDomain = function (domain, current) {
	        if (domain == current) {
	            return true;
	        }
	        else if (domain.indexOf("*") === 0) {
	            domain = domain.substr(1, domain.length - 1); // * remove
	            return (current.substr(current.indexOf(domain), domain.length) == domain);
	        }
	        return false;
	    };
	    LicenseChecker._getLDKey = function (chars) {
	        var mkey = "";
	        for (var i = 0, cnt = chars.length; i < cnt; i++) {
	            mkey += String.fromCharCode(chars[i] >> 1);
	        }
	        return mkey;
	    };
	    LicenseChecker.includedDomains = function (licenseDomain, currentDomain) {
	        var domains = licenseDomain.split(",");
	        for (var i = 0, cnt = domains.length; i < cnt; i++) {
	            if (this.eqaulsUpperDomain(domains[i], currentDomain)) {
	                return true;
	            }
	        }
	        return false;
	    };
	    LicenseChecker.decrypt = function (encryptedString) {
	        var decoded = Cryptor.decrypt(encryptedString, Globals._gk + this._getLDKey(Cryptor.kb.k));
	        var decObj = {};
	        var decArr = decoded.split(";");
	        for (var i = 0, cnt = decArr.length; i < cnt; i++) {
	            var kv = decArr[i].split("=");
	            var key = kv[0];
	            var value = kv[1];
	            if (value && value.length > 0)
	                decObj[key] = value;
	        }
	        return decObj;
	    };
	    return LicenseChecker;
	}());
	exports.lk = function () {
	    var server = location.hostname;
	    var lic;
	    try {
	        lic = realGridJsLic;
	    }
	    catch (e) {
	        return false;
	    }
	    if (!lic) {
	        return false;
	    }
	    var licInfo = LicenseChecker.decrypt(lic);
	    if (licInfo.name != 'RealGridJs') {
	        return false;
	    }
	    var licVender = licInfo.vender || null;
	    var appVender = AppInfo.globalRealGridInfo.vender || null;
	    if (licVender != appVender) {
	        return false;
	    }
	    var licServer = licInfo.server.toLowerCase();
	    if (AppInfo.globalRealGridInfo.license != AppInfo.LicenseType.Developer && !LicenseChecker.includedDomains(licServer, server.toLowerCase())) {
	        return false;
	    }
	    var licType = licInfo.lic.toLowerCase();
	    if (licType == AppInfo.LicenseType.Evaluation || licType == AppInfo.LicenseType.Limited) {
	        var arr = licInfo.expire.split(".").map(function (item) {
	            return parseInt(item);
	        });
	        var d = new Date(arr[0], arr[1], arr[2], 23, 59, 59, 999);
	        if (new Date() > d) {
	            return false;
	        }
	    }
	    return true;
	};
	});

	unwrapExports(LicenseChecker_1);
	var LicenseChecker_2 = LicenseChecker_1.Cryptor;
	var LicenseChecker_3 = LicenseChecker_1.lk;

	var RowGroup_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// RowGroup.ts
	// 2019. 07. 22. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });









	var RowGroupHeaderCell = /** @class */ (function (_super) {
	    __extends(RowGroupHeaderCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupHeaderCell(rowGroup) {
	        var _this = _super.call(this, "rowGroupHeaderCell") || this;
	        _this._rowGroup = rowGroup;
	        return _this;
	    }
	    RowGroupHeaderCell.prototype._doDispose = function () {
	        this._rowGroup = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupHeaderCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            if (this.item instanceof GridItem_1.GroupItemImpl) {
	                return this._rowGroup.getHeaderText(this.item);
	            }
	            else {
	                return "";
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupHeaderCell.prototype, "value", {
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowGroupHeaderCell;
	}(GridCell_1.GridCell));
	exports.RowGroupHeaderCell = RowGroupHeaderCell;
	var RowGroupFooterCell = /** @class */ (function (_super) {
	    __extends(RowGroupFooterCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFooterCell(rowGroup) {
	        var _this = _super.call(this, "rowGroupFooterCell") || this;
	        _this._value = NaN;
	        _this._rowGroup = rowGroup;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    // TODO 1.0에서는 GroupFooterCellElement에서 _value를 이용해서 displayText 다시 조합.(prepareValue)
	    // 2.0에는 cellElement가 없기 때문에 여기서 최종적으로 만들어야 한다.
	    // 추가적으로 필요한것들
	    // $_getValue에서 _value 설정. (expression, callback, text, footerText 등에서 return 된 값들.)
	    // $_displayText에서 실제 보여질값 return (format, prefix, suffix등이 조합된 string);
	    RowGroupFooterCell.$_getValue = function (item, column) {
	        if (column && column.dataIndex >= 0) {
	            var grid = column.grid;
	            var group = item.parent;
	            var footerIndex = group.getFooterIndex(item);
	            var footer = column.groupFooters.getItem(footerIndex);
	            if (footer && footer.expression) {
	                var runtime = grid.rowGroupSummaryRuntime;
	                runtime.setColumn(column, column.grid.summarizer);
	                runtime.setItem(group);
	                var v = footer.evaluate(runtime);
	                return v;
	            }
	            else if (footer && footer.valueCallback) {
	                var callback = footer.valueCallback;
	                // TODO arguments 정리 필요. 1.0 itemIndex, column.proxy(), grid, group 순
	                // 2.0에서는 grid, group, itemIndex, footerIndex 등이 필요. 
	                return callback(footer, null);
	                // } else if (footer._groupCallback) {
	                // 	var grid = column.grid();
	                // 	return footer._groupCallback(item._index, column.proxy(), grid && grid.getHandler(), $$_getItemProxy(group,true));
	            }
	            else if (group && column && grid.isGroupedColumn(column)) {
	                // rowGroup.footerStatement를 이용한 text
	                var s = grid.rowGroup.getFooterText(group);
	                return s == null ? undefined : s;
	            }
	            else {
	                return undefined;
	            }
	        }
	        else {
	            return undefined;
	        }
	    };
	    RowGroupFooterCell.getValue = function (item, column) {
	        try {
	            return RowGroupFooterCell.$_getValue(item, column);
	        }
	        catch (err) {
	            return GridCell_1.GridCell.ERROR;
	        }
	    };
	    RowGroupFooterCell.$_displayText = function (item, column, value) {
	        var s = isNaN(value) ? null : String(value);
	        if (!s) {
	            var grid = column.grid;
	            var group = Utils_1.Utils.cast(item.parent, GridItem_1.GroupItemImpl);
	            var rowGroup = grid.rowGroup;
	            var groupText = void 0;
	            if (group && column && grid.isGroupedColumn(column) && (groupText = rowGroup.getFooterText(group))) {
	                s = groupText;
	            }
	            else if (column) {
	                var footer = column.groupFooters.getItem(group.getFooterIndex(item));
	                if (footer) {
	                    s = footer.text;
	                }
	            }
	        }
	        return s || "";
	    };
	    RowGroupFooterCell.prototype._doDispose = function () {
	        this._rowGroup = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupFooterCell.prototype.calculate = function (item) {
	        this._value = NaN;
	        this._error = null;
	        try {
	            this._value = RowGroupFooterCell.$_getValue(this.item || item, this.index.dataColumn);
	        }
	        catch (err) {
	            this._error = err;
	            this._errorDetail = err;
	            //throwDebugError(err);
	            console.log("FOOTER ERROR: " + err);
	        }
	    };
	    Object.defineProperty(RowGroupFooterCell.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            if (this._error) {
	                return GridCell_1.GridCell.ERROR;
	            }
	            else {
	                return RowGroupFooterCell.$_displayText(this.item, this.index.dataColumn, this._value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupFooterCell.prototype, "value", {
	        get: function () {
	            return this._value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupFooterCell.prototype, "level", {
	        get: function () {
	            return this.index.item.level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowGroupFooterCell;
	}(GridCell_1.GridCell));
	exports.RowGroupFooterCell = RowGroupFooterCell;
	var RowGroupBarCell = /** @class */ (function (_super) {
	    __extends(RowGroupBarCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupBarCell() {
	        var _this = _super.call(this, "rowGroupBarCell") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._level = 0;
	        return _this;
	    }
	    Object.defineProperty(RowGroupBarCell.prototype, "level", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** level */
	        get: function () {
	            return this.item.level;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupBarCell.prototype, "getText", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return "";
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupBarCell.prototype, "value", {
	        get: function () {
	            return undefined;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowGroupBarCell;
	}(GridCell_1.GridCell));
	exports.RowGroupBarCell = RowGroupBarCell;
	var RowGroupFooter = /** @class */ (function (_super) {
	    __extends(RowGroupFooter, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFooter() {
	        return _super.call(this) || this;
	    }
	    RowGroupFooter.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupFooter.prototype, "styleName", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** properties */
	        get: function () {
	            return this._styleName;
	        },
	        set: function (value) {
	            if (value != this._styleName) {
	                this._styleName = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupFooter.prototype._changed = function () {
	        this.$_collection && this.$_collection["$_itemChanged"](this);
	    };
	    return RowGroupFooter;
	}(Base_1.Base));
	exports.RowGroupFooter = RowGroupFooter;
	var RowGroupFooterCollection = /** @class */ (function (_super) {
	    __extends(RowGroupFooterCollection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFooterCollection(owner) {
	        var _this = _super.call(this) || this;
	        _this._items = [];
	        _this._owner = owner;
	        _this._items.push(new RowGroupFooter());
	        _this._items[0]["$_collection"] = _this;
	        return _this;
	    }
	    RowGroupFooterCollection.prototype._doDispose = function () {
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var footer = _a[_i];
	            footer.dispose();
	        }
	        this._items = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupFooterCollection.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupFooterCollection.prototype, "count", {
	        /** count */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupFooterCollection.prototype.get = function (index) {
	        return this._items[index];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupFooterCollection.prototype.assignFrom = function (source) {
	        if (Utils_1.Utils.isArray(source)) {
	            var len = source.length;
	            while (this._items.length < len) {
	                this._items.push(null);
	            }
	            if (len > 0 && this._items.length > len) {
	                this._items.length = len;
	            }
	            if (len > 0) {
	                this._items[0].assignFrom(source[0]);
	            }
	            for (var i = 1; i < len; i++) {
	                var src = source[i];
	                if (src) {
	                    if (!this._items[i]) {
	                        this._items[i] = new RowGroupFooter();
	                    }
	                    this._items[i].assignFrom(source[i]);
	                    this._items[i]["$_collection"] = this;
	                }
	                else {
	                    this._items[i] = null;
	                }
	            }
	        }
	        else {
	            this._items[0].assignFrom(source);
	        }
	        this.$_itemChanged(null);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupFooterCollection.prototype.$_itemChanged = function (item) {
	        this._owner && this._owner.rowGroupFooterChanged(item);
	    };
	    return RowGroupFooterCollection;
	}(Base_1.Base));
	exports.RowGroupFooterCollection = RowGroupFooterCollection;
	var RowGroupLevel = /** @class */ (function (_super) {
	    __extends(RowGroupLevel, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupLevel() {
	        return _super.call(this) || this;
	    }
	    RowGroupLevel.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    return RowGroupLevel;
	}(Base_1.Base));
	exports.RowGroupLevel = RowGroupLevel;
	var RowGroup = /** @class */ (function (_super) {
	    __extends(RowGroup, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroup(grid) {
	        var _this = _super.call(this, grid) || this;
	        _this._mergeMode = false;
	        _this._sorting = true;
	        _this._expandedAdornments = Types.RowGroupAdornments.BOTH;
	        _this._collapsedAdornments = Types.RowGroupAdornments.HEADER;
	        _this._levelIndent = 20;
	        _this._mergeHeaderIndenting = true;
	        _this._mergeFooterIndenting = true;
	        _this._headerStatement = "${groupField}: ${groupValue} - ${rowCount} rows";
	        _this._expandedIconUrl = "images/expanded.png";
	        _this._collapsedIconUrl = "images/collapsed.png";
	        _this._mergeExpander = true;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._headerCell = new RowGroupHeaderCell(_this);
	        _this._footerCell = new RowGroupFooterCell(_this);
	        _this._barCell = new RowGroupBarCell();
	        _this._headerExprStatement = new ExpressionStatement_1.ExpressionStatement(_this._headerStatement);
	        _this._footerExprStatement = new ExpressionStatement_1.ExpressionStatement();
	        _this._statementRuntime = new Runtimes.RowGroupStatementRuntime();
	        _this._footers = new RowGroupFooterCollection(_this);
	        return _this;
	    }
	    RowGroup.prototype._doDispose = function () {
	        this._footers = this._footers.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // RowGroupFooterOwner
	    //-------------------------------------------------------------------------
	    RowGroup.prototype.rowGroupFooterChanged = function (footer) {
	        this._counterAware && this._counterAware.groupfFooterCounterChanged(this);
	    };
	    //-------------------------------------------------------------------------
	    // GroupFooterCounter
	    //-------------------------------------------------------------------------
	    RowGroup.prototype.getGroupFooterCount = function (group) {
	        // TODO: level별 count
	        return this._footers.count;
	    };
	    RowGroup.prototype.setCounterAware = function (obj) {
	        this._counterAware = obj;
	    };
	    Object.defineProperty(RowGroup.prototype, "mergeMode", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** mergeMode */
	        get: function () {
	            return this._mergeMode;
	        },
	        set: function (value) {
	            if (value != this._mergeMode) {
	                this._mergeMode = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "sorting", {
	        /** sorting */
	        get: function () {
	            return this._sorting;
	        },
	        set: function (value) {
	            if (value != this._sorting) {
	                this._sorting = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "expandedAdornments", {
	        /** expandedAdornments */
	        get: function () {
	            return this._expandedAdornments;
	        },
	        set: function (value) {
	            if (value != this._expandedAdornments) {
	                this._expandedAdornments = value;
	                this._grid && this._grid["$_rowGroupAdornmentsChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "collapsedAdornments", {
	        /** _collapsedAdornments */
	        get: function () {
	            return this._collapsedAdornments;
	        },
	        set: function (value) {
	            if (value != this._collapsedAdornments) {
	                this._collapsedAdornments = value;
	                this._grid && this._grid["$_rowGroupAdornmentsChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "createFooterCallback", {
	        /** createFooterCallback */
	        get: function () {
	            return this._createFooterCallback;
	        },
	        set: function (value) {
	            if (value !== this._createFooterCallback) {
	                this._createFooterCallback = value;
	                this._grid && this._grid["$_rowGroupAdornmentsChanged"](this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "levelIndent", {
	        /** levelIndent */
	        get: function () {
	            return this._levelIndent;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._levelIndent) {
	                this._levelIndent = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "mergeHeaderIndenting", {
	        /** mergeHeaderIndenting */
	        get: function () {
	            return this._mergeHeaderIndenting;
	        },
	        set: function (value) {
	            if (value != this._mergeHeaderIndenting) {
	                this._mergeHeaderIndenting = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "mergeFooterIndenting", {
	        /** mergeFooterIndenting */
	        get: function () {
	            return this._mergeFooterIndenting;
	        },
	        set: function (value) {
	            if (value != this._mergeFooterIndenting) {
	                this._mergeFooterIndenting = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "mergeExpander", {
	        /** mergeExpander */
	        get: function () {
	            return this._mergeExpander;
	        },
	        set: function (value) {
	            if (value != this._mergeExpander) {
	                this._mergeExpander = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroup.prototype, "footers", {
	        /** footers */
	        get: function () {
	            return this._footers;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RowGroup.prototype.setFooters = function (source) {
	        this._footers.assignFrom(source);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroup.prototype.getHeaderCell = function (item) {
	        this._headerCell.setIndex(CellIndex_1.CellIndex.temp(this.owner, item.index));
	        return this._headerCell;
	    };
	    RowGroup.prototype.getFooterCell = function (index) {
	        var item = index.item;
	        var group = item.parent;
	        //const level = getLevel()
	        var column = index.valueColumn;
	        this._footerCell.setIndex(index);
	        this._footerCell.calculate(item);
	        return this._footerCell;
	    };
	    RowGroup.prototype.getBarCell = function (index) {
	        this._barCell.setIndex(index);
	        return this._barCell;
	    };
	    RowGroup.prototype.getHeaderText = function (group) {
	        // if (!this._headerStatement && this._headerCallback && typeof this._headerCallback === "function") {
	        // 	return this._headerCallback($$_getItemProxy(group, true), this._grid && this._grid.getHandler());
	        // }
	        this._statementRuntime.setGrid(this.owner);
	        this._statementRuntime.setGroup(group);
	        return this._headerExprStatement.evaluate(this._statementRuntime);
	    };
	    RowGroup.prototype.getFooterText = function (group) {
	        if (this._footerExprStatement) {
	            this._statementRuntime.setGrid(this.owner);
	            this._statementRuntime.setGroup(group);
	            return this._footerExprStatement.evaluate(this._statementRuntime);
	        }
	        else {
	            return null;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroup.prototype._doChanged = function () {
	        this.owner["$_rowGroupChanged"](this);
	    };
	    return RowGroup;
	}(GridObject_1.VisualObject));
	exports.RowGroup = RowGroup;
	});

	unwrapExports(RowGroup_1);
	var RowGroup_2 = RowGroup_1.RowGroupHeaderCell;
	var RowGroup_3 = RowGroup_1.RowGroupFooterCell;
	var RowGroup_4 = RowGroup_1.RowGroupBarCell;
	var RowGroup_5 = RowGroup_1.RowGroupFooter;
	var RowGroup_6 = RowGroup_1.RowGroupFooterCollection;
	var RowGroup_7 = RowGroup_1.RowGroupLevel;
	var RowGroup_8 = RowGroup_1.RowGroup;

	var GridBase_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// static readonly ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
























































	var $_INVISIBLE_EDIT_BOUNDS = new Rectangle_1.Rectangle(-10000, -10000, 100, 100);
	var GridBase = /** @class */ (function (_super) {
	    __extends(GridBase, _super);
	    // private _currentRatio: number = 1;
	    // private _zoomRatio: number = 1;
	    // private _chkCount: number = 0;
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBase(container) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        // TODO _summaryMode/sortMode/filterMode등을 하나의 option으로 처리 필요.
	        _this._summaryMode = Types.SummaryMode.AGGREGATE;
	        _this._scrollBarWidth = 16;
	        _this._scrollBarHeight = 16;
	        _this._filterRunning = false;
	        _this._loading = true;
	        _this._userMode = false;
	        _this._userModeError = null;
	        _this._gridObjects = [];
	        _this._tableViews = {};
	        _this._imageLists = {};
	        _this._columnMap = {};
	        _this._columnLock = 0;
	        _this._columnsDirty = false;
	        _this._columnSummaryRuntime = new SummaryRuntimes.ColumnSummaryRuntime();
	        _this._columnValidationRuntime = new Validation.DataCellValidationRuntime();
	        _this._rowValidationRuntime = new Validation.DataRowValidationRuntime();
	        _this._layouted = false;
	        _this._resetting = false;
	        _this._focusedIndex = new CellIndex_1.CellIndex();
	        _this._leftPos = 0;
	        _this._horzScrolled = false;
	        _this._topIndex = 0;
	        _this._updateLock = false;
	        _this._hoveredY = -1;
	        _this._focusing = false;
	        _this._dataChanged = false;
	        _this._validations = new Validation.EditValidationCollection();
	        _this.$_editFocused = false;
	        _this.$_showFocusCell = false; // setFocus/tab을 이용한 focus시 cell도 표시하기 위해서.
	        _this._buttonClicked = false;
	        _this._needSyncHeadCheck = false;
	        _this._cellUpdateEventLock = false;
	        _this._currentRowId = -1;
	        _this._currentRow = -1;
	        _this.$_fixedColCount = 0;
	        _this.$_rfixedColCount = 0;
	        _this.$_editOptionsWritable = true;
	        _this.$_fixedRowEditable = false;
	        _this.$_fixedColEditable = false;
	        _this._cellLayoutDirty = false;
	        _this._container = container;
	        _this._addGridObject(_this._header = new GridHeader_1.GridHeader(_this));
	        //this._addGridObject(this._footer = this._createGridFooter());
	        _this._footers = new GridFooter_1.GridFooterCollection(_this);
	        _this._addGridObject(_this._headerSummaries = new HeaderSummary_1.HeaderSummaryCollection(_this));
	        _this._addGridObject(_this._rowIndicator = new RowIndicator_1.RowIndicator(_this));
	        _this._addGridObject(_this._stateBar = new StateBar_1.StateBar(_this));
	        _this._addGridObject(_this._checkBar = new CheckBar_1.CheckBar(_this));
	        _this._addGridObject(_this._body = new GridBody_1.GridBody(_this));
	        _this._rootElement = new VisualElement_1.LayerElement("grid root view");
	        _this.addChild(_this._rootElement);
	        _this._emptyView = new GridElement_1.EmptyGridElement();
	        _this.addChild(_this._emptyView);
	        _this._contentPane = new ContentPane_1.DataContentPane("contentPane");
	        _this.addElement(_this._contentPane);
	        _this._rightContentPane = new ContentPane_1.RightContentPane("rightContentPane");
	        _this.addElement(_this._rightContentPane);
	        _this._fixedContentPane = new ContentPane_1.FixedContentPane("fixedContentPane");
	        _this.addElement(_this._fixedContentPane);
	        _this._leftContentPane = new ContentPane_1.LeftContentPane("leftContentPane");
	        _this.addElement(_this._leftContentPane);
	        _this._sideContentPane = _this._createSidePane();
	        if (_this._sideContentPane)
	            _this.addElement(_this._sideContentPane);
	        _this._topContentPane = new ContentPane_1.ContentPane("topContentPane");
	        _this.addElement(_this._topContentPane);
	        _this._bodyView = _this._createBodyView(_this._body);
	        _this._fixedBodyView = _this._createFixedBodyView(_this._body);
	        _this._rightBodyView = _this._createRightBodyView(_this._body);
	        _this._mergeView = new ColumnMergeElement_1.ColumnMergeElement(_this._bodyView);
	        _this._fixedMergeView = new ColumnMergeElement_1.ColumnMergeElement(_this._fixedBodyView);
	        _this._rightMergeView = new ColumnMergeElement_1.ColumnMergeElement(_this._rightBodyView);
	        _this._headerView = new HeaderElement_1.HeaderElement(_this._header);
	        _this._fixedHeaderView = new HeaderElement_1.FixedHeaderElement(_this._header);
	        _this._rightHeaderView = new HeaderElement_1.RightHeaderElement(_this._header);
	        _this._headerSummaryView = new HeaderSummaryElement_1.HeaderSummaryElement(_this._headerSummaries);
	        _this._fixedHeaderSummaryView = new HeaderSummaryElement_1.FixedHeaderSummaryElement(_this._headerSummaries);
	        _this._rightHeaderSummaryView = new HeaderSummaryElement_1.RightHeaderSummaryElement(_this._headerSummaries);
	        _this._footerView = new FooterElement_1.FooterElement(_this.footers);
	        _this._fixedFooterView = new FooterElement_1.FixedFooterElement(_this.footers);
	        _this._rightFooterView = new FooterElement_1.RightFooterElement(_this.footers);
	        _this._rowIndicatorView = new RowIndicatorElement_1.RowIndicatorElement(_this._rowIndicator);
	        _this._stateBarView = new StateBarElement_1.StateBarElement(_this.stateBar);
	        _this._checkBarView = new CheckBarElement_1.CheckBarElement(_this.checkBar);
	        _this._headView = new GridHeadElement_1.GridHeadElement(_this);
	        _this._sumView = new GridSumElement_1.GridSumElement();
	        _this._footView = new GridFootElement_1.GridFootElement();
	        var tableViews = [
	            _this._rowIndicatorView, _this._stateBarView, _this._checkBarView,
	            _this._bodyView, _this._fixedBodyView, _this._rightBodyView,
	            _this._headerView, _this._fixedHeaderView, _this._rightHeaderView,
	            _this._headerSummaryView, _this._fixedHeaderSummaryView, _this._rightHeaderSummaryView,
	            _this._footerView, _this._fixedFooterView, _this._rightFooterView,
	            _this._headView, _this._sumView, _this._footView
	        ];
	        for (var i = tableViews.length - 1; i >= 0; i--) {
	            var v = tableViews[i];
	            _this._tableViews[v["$_hash"]] = v;
	        }
	        _this._contentPane.addChild(_this._bodyView);
	        _this._contentPane.addChild(_this._mergeView);
	        _this._contentPane.addChild(_this._footerView);
	        _this._contentPane.addChild(_this._headerSummaryView);
	        _this._contentPane.addChild(_this._headerView);
	        _this._fixedContentPane.addChild(_this._fixedBodyView);
	        _this._fixedContentPane.addChild(_this._fixedMergeView);
	        _this._fixedContentPane.addChild(_this._fixedFooterView);
	        _this._fixedContentPane.addChild(_this._fixedHeaderSummaryView);
	        _this._fixedContentPane.addChild(_this._fixedHeaderView);
	        _this._rightContentPane.addChild(_this._rightBodyView);
	        _this._rightContentPane.addChild(_this._rightMergeView);
	        _this._rightContentPane.addChild(_this._rightFooterView);
	        _this._rightContentPane.addChild(_this._rightHeaderSummaryView);
	        _this._rightContentPane.addChild(_this._rightHeaderView);
	        _this._leftContentPane.addChild(_this._rowIndicatorView);
	        _this._leftContentPane.addChild(_this._stateBarView);
	        _this._leftContentPane.addChild(_this._checkBarView);
	        _this._leftContentPane.addChild(_this._footView);
	        _this._leftContentPane.addChild(_this._sumView);
	        _this._leftContentPane.addChild(_this._headView);
	        _this._doCreateOtherElements();
	        _this._selectionLayer = new Selections.SelectionLayer(_this);
	        _this.addElement(_this._selectionLayer);
	        _this._feedbackLayer = new VisualElement_1.LayerElement("feedbackLayer");
	        _this.addElement(_this._feedbackLayer);
	        _this._rowHoverView = new GridTool_1.RowHoverView();
	        _this.addFeedbackElement(_this._rowHoverView);
	        _this._hscrollBar = new ScrollBar_1.ScrollBar(container, false);
	        _this._vscrollBar = new ScrollBar_1.ScrollBar(container, true);
	        _this._scrollEdge = new ScrollBar_1.ScrollEdge();
	        _this.addElement(_this._hscrollBar);
	        _this.addElement(_this._vscrollBar);
	        _this.addElement(_this._scrollEdge);
	        _this._hscrollBar.addListener(_this);
	        _this._vscrollBar.addListener(_this);
	        _this._selections = new Selections.SelectionManager(_this);
	        _this._selections.addListener(_this);
	        _this._fixedOptions = new FixedOptions_1.FixedOptions(_this);
	        _this._displayOptions = new DisplayOptions_1.DisplayOptions(_this);
	        _this._formatOptions = new FormatOptions_1.FormatOptions(_this);
	        _this._editOptions = new EditOptions_1.EditOptions(_this);
	        _this._editorOptions = new EditOptions_1.EditorOptions(_this);
	        _this._copyOptions = new EditOptions_1.CopyOptions(_this);
	        _this._pasteOptions = new EditOptions_1.PasteOptions(_this);
	        _this._sortingOptions = new SortingOptions_1.SortingOptions(_this);
	        _this._filteringOptions = new FilteringOptions_1.FilteringOptions(_this);
	        _this._initStyles();
	        _this._columns = new ColumnCollection_1.ColumnCollection(_this);
	        _this._activeCellLayout = _this._defaultCellLayout = new CellLayout.DefaultCellLayout(_this);
	        _this._delegate = _this._createDelegate();
	        _this._layoutManager = _this._createLayoutManager();
	        _this._editController = _this._createEditController();
	        _this._validationManager = new Validation.ValidationManager(_this);
	        _this._lookupProvider = new Lookup.LocalLookupSourceProvider();
	        _this._lookupProvider.addListener(_this);
	        _this._clipboardManager = new Clipboard.ClipboardManager(_this);
	        _this._popupMenuManager = new popupMenu.PopupMenuManager(_this._container);
	        _this._tooltipManager = new Tooltip.TooltipManager(_this);
	        _this._filterSelector = new FilterSelector_1.FilterSelector(_this._container, _this._filteringOptions);
	        _this._toastManager = new Toast.ToastManager(_this);
	        _this._waitingPane = new ContentPane_1.WaitingPane("waitingPane");
	        _this.addElement(_this._waitingPane);
	        _this._currentIndex = new CellIndex_1.CellIndex(_this);
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    GridBase.createColumn = function (source) {
	        if (source) {
	            var column = void 0;
	            if (source.type == "series") {
	                column = new GridColumn_1.SeriesColumn(source);
	            }
	            else {
	                column = new GridColumn_1.DataColumn(source);
	            }
	            return column;
	        }
	        return null;
	    };
	    GridBase.prototype._doDispose = function () {
	        if (Utils_1.Utils.$_getActiveGrid() == this) {
	            Utils_1.Utils.$_setActiveGrid(null);
	        }
	        this.clearListener();
	        this._container = this._container.dispose();
	        this._gridObjects.length = 0;
	        this._header = this._header.dispose();
	        this._headerSummaries = this._headerSummaries.dispose();
	        this._footers = this._footers.dispose();
	        this._rowIndicator = this._rowIndicator.dispose();
	        this._stateBar = this._stateBar.dispose();
	        this._checkBar = this._checkBar.dispose();
	        this._body = this._body.dispose();
	        this._rootElement = this._rootElement.dispose();
	        this._contentPane = this._contentPane.dispose();
	        this._rightContentPane = this._rightContentPane.dispose();
	        this._fixedContentPane = this._fixedContentPane.dispose();
	        this._leftContentPane = this._leftContentPane.dispose();
	        this._sideContentPane = this._sideContentPane.dispose();
	        this._topContentPane = this._topContentPane.dispose();
	        this._bodyView = this._bodyView.dispose();
	        this._fixedBodyView = this._fixedBodyView.dispose();
	        this._rightBodyView = this._rightBodyView.dispose();
	        this._mergeView = this._mergeView.dispose();
	        this._fixedMergeView = this._fixedMergeView.dispose();
	        this._rightMergeView = this._rightMergeView.dispose();
	        this._headerView = this._headerView.dispose();
	        this._fixedHeaderView = this._fixedHeaderView.dispose();
	        this._rightHeaderView = this._rightHeaderView.dispose();
	        this._headerSummaryView = this._headerSummaryView.dispose();
	        this._fixedHeaderSummaryView = this._fixedHeaderSummaryView.dispose();
	        this._rightHeaderSummaryView = this._rightHeaderSummaryView.dispose();
	        this._footerView = this._footerView.dispose();
	        this._fixedFooterView = this._fixedFooterView.dispose();
	        this._rightFooterView = this._rightFooterView.dispose();
	        this._rowIndicatorView = this._rowIndicatorView.dispose();
	        this._stateBarView = this._stateBarView.dispose();
	        this._checkBarView = this._checkBarView.dispose();
	        this._headView = this._headView.dispose();
	        this._sumView = this._sumView.dispose();
	        this._footView = this._footView.dispose();
	        this._selectionLayer = this._selectionLayer.dispose();
	        this._feedbackLayer = this._feedbackLayer.dispose();
	        this._hscrollBar = this._hscrollBar.dispose();
	        this._vscrollBar = this._vscrollBar.dispose();
	        this._scrollEdge = this._scrollEdge.dispose();
	        this._selections = this._selections.dispose();
	        this._fixedOptions = this._fixedOptions.dispose();
	        this._displayOptions = this._displayOptions.dispose();
	        this._formatOptions = this._formatOptions.dispose();
	        this._editOptions = this._editOptions.dispose();
	        this._editorOptions = this._editorOptions.dispose();
	        this._copyOptions = this._copyOptions.dispose();
	        this._pasteOptions = this._pasteOptions.dispose();
	        this._sortingOptions = this._sortingOptions.dispose();
	        this._filteringOptions = this._filteringOptions.dispose();
	        this._columns = this._columns.dispose();
	        this._activeCellLayout = null;
	        this._defaultCellLayout = this._defaultCellLayout.dispose();
	        this._delegate = this._delegate.dispose();
	        this._layoutManager = this._layoutManager.dispose();
	        this._editController = this._editController && this._editController.dispose();
	        this._filterSelector = this._filterSelector.dispose();
	        this._toastManager = this._toastManager.dispose();
	        this._tableViews = null;
	        this._lookupProvider = (this._lookupProvider && this._lookupProvider.dispose());
	        this._columnSummaryRuntime = this._columnSummaryRuntime && this._columnSummaryRuntime.dispose();
	        this._popupMenuManager = this._popupMenuManager && this._popupMenuManager.dispose();
	        this._tooltipManager = this._tooltipManager && this._tooltipManager.dispose();
	        this._focusedIndex = this._focusedIndex.dispose();
	        CellIndex_1.CellIndex.clearTemp();
	        return _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridBase.prototype, "activeTool", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** activeTool */
	        get: function () {
	            return this.container.activeTool;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "scrollBarWidth", {
	        /** scrollBarWidth */
	        get: function () {
	            return this._scrollBarWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._scrollBarWidth) {
	                this._scrollBarWidth = value;
	                this.invalidateLayout();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "scrollBarHeight", {
	        /** scrollBarHeight */
	        get: function () {
	            return this._scrollBarHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._scrollBarHeight) {
	                this._scrollBarHeight = value;
	                this.invalidateLayout();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "formView", {
	        /** formView */
	        get: function () {
	            return this._container.formView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "body", {
	        /** body */
	        get: function () {
	            return this._body;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "header", {
	        /** header */
	        get: function () {
	            return this._header;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "footers", {
	        /** footers */
	        get: function () {
	            return this._footers;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "footer", {
	        /** footer */
	        get: function () {
	            return this._footers.get(0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.setFooters = function (source) {
	        this._footers.assignFrom(source);
	    };
	    Object.defineProperty(GridBase.prototype, "headerSummaries", {
	        /** headerSummaries */
	        get: function () {
	            return this._headerSummaries;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "headerSummary", {
	        /** headerSummary */
	        get: function () {
	            return this._headerSummaries.get(0);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.setHeaderSummaries = function (source) {
	        this._headerSummaries.assignFrom(source);
	    };
	    Object.defineProperty(GridBase.prototype, "rowIndicator", {
	        /** indicator */
	        get: function () {
	            return this._rowIndicator;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "checkBar", {
	        /** checkBar */
	        get: function () {
	            return this._checkBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "stateBar", {
	        /** stateBar */
	        get: function () {
	            return this._stateBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "cellLayout", {
	        /** cellLayout */
	        set: function (value) {
	            if (this._activeCellLayout && this._activeCellLayout !== this._defaultCellLayout) {
	                this._activeCellLayout.dispose();
	            }
	            var layout = value && new CellLayout.GridCellLayout(this).load(value);
	            this._activeCellLayout = layout || this._defaultCellLayout;
	            this._activeCellLayout.invalidate();
	            this.refreshView();
	            this._cellLayoutDirty = true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype._cellLayoutChanged = function () {
	        this._cellLayoutDirty = true;
	    };
	    Object.defineProperty(GridBase.prototype, "layoutCount", {
	        get: function () {
	            return this._activeCellLayout.visibleCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "visibleLayoutCount", {
	        get: function () {
	            return this._activeCellLayout.visibleCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "columnCount", {
	        /** columnCount */
	        get: function () {
	            return this._columns.count;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "dataSource", {
	        /** visibleColumnCount */
	        // get visibleColumnCount(): number {
	        //     return this._activeCellLayout.visibleColumnCount;
	        // }
	        /** dataSource */
	        get: function () {
	            return this._items ? this._items.dataSource : null;
	        },
	        set: function (value) {
	            var old = this.dataSource;
	            if (this._items) {
	                this._items.dataSource = value;
	            }
	            if (this.dataSource != old) ;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "itemSource", {
	        /** itemSource */
	        get: function () {
	            return this._items;
	        },
	        set: function (value) {
	            if (this._items) {
	                this._items.removeListener(this);
	            }
	            this._items = value;
	            if (this._items) {
	                this._items.addListener(this);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "maxItemCount", {
	        /** maxItemCount */
	        get: function () {
	            return this.itemSource.maxItemCount;
	        },
	        set: function (value) {
	            this.itemSource.maxItemCount = Math.max(0, value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "itemCount", {
	        /** itemCount */
	        get: function () {
	            return this._items ? this._items.itemCount : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rowCount", {
	        /** rowCount */
	        get: function () {
	            var ds = this.dataSource;
	            return ds ? ds.rowCount : 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "summaryMode", {
	        /** summaryMode */
	        get: function () {
	            return this._summaryMode;
	        },
	        set: function (value) {
	            if (value != this._summaryMode) {
	                this._summaryMode = value;
	                this.$_summaryModeChanged();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "columnSummaryRuntime", {
	        /** columnSummaryRuntime */
	        get: function () {
	            return this._columnSummaryRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "columnValidationRuntime", {
	        /** columnValidationRuntime */
	        get: function () {
	            return this._columnValidationRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rowValidationRuntime", {
	        /** rowValidationRuntime */
	        get: function () {
	            return this._rowValidationRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "linkCellClickedCallback", {
	        /** linkCellClickedCallback */
	        get: function () {
	            return this._linkCellClickedCallback;
	        },
	        set: function (value) {
	            this._linkCellClickedCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "buttonCellClickedCallback", {
	        /** buttonCellClickedCallback */
	        get: function () {
	            return this._buttonCellClickedCallback;
	        },
	        set: function (value) {
	            this._buttonCellClickedCallback = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "focusedIndex", {
	        /** focusedIndex */
	        get: function () {
	            return this._focusedIndex;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "focusedLayout", {
	        /** focusedLayout */
	        get: function () {
	            return this._focusedIndex && this._focusedIndex.layout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "focusedColumn", {
	        /** focusedColumn */
	        get: function () {
	            return this._focusedIndex && this._focusedIndex.layout && this._focusedIndex.layout.firstColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "focusedRow", {
	        /** focusedRow */
	        get: function () {
	            return this._focusedIndex ? this._focusedIndex.itemIndex : -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "focusedItem", {
	        /** focusedItem */
	        get: function () {
	            return this._focusedIndex && this._focusedIndex.item;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rowIndicatorView", {
	        /** rowIndicatorView */
	        get: function () {
	            return this._rowIndicatorView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "stateBarView", {
	        /** stateBarView */
	        get: function () {
	            return this._stateBarView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "checkBarView", {
	        /** checkBarView */
	        get: function () {
	            return this._checkBarView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "topContentPane", {
	        /** topContentPane */
	        get: function () {
	            return this._topContentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "sideContentPane", {
	        /** sideContentPane */
	        get: function () {
	            return this._sideContentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "leftContentPane", {
	        /** leftContentPane */
	        get: function () {
	            return this._leftContentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "contentPane", {
	        /** contentPane */
	        get: function () {
	            return this._contentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedContentPane", {
	        /** fixedContentPane */
	        get: function () {
	            return this._fixedContentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightContentPane", {
	        /** rightContentPane */
	        get: function () {
	            return this._rightContentPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "bodyView", {
	        /** bodyView */
	        get: function () {
	            return this._bodyView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedBodyView", {
	        /** fixedBodyView */
	        get: function () {
	            return this._fixedBodyView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightBodyView", {
	        /** rightBodyView */
	        get: function () {
	            return this._rightBodyView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "mergeView", {
	        /** mergeView */
	        get: function () {
	            return this._mergeView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedMergeView", {
	        /** fixedMergeView */
	        get: function () {
	            return this._fixedMergeView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightMergeView", {
	        /** rightMergeView */
	        get: function () {
	            return this._rightMergeView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "headerView", {
	        /** headerView */
	        get: function () {
	            return this._headerView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedHeaderView", {
	        /** fixedHeaderView */
	        get: function () {
	            return this._fixedHeaderView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightHeaderView", {
	        /** rightHeaderView */
	        get: function () {
	            return this._rightHeaderView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "headerSummaryView", {
	        /** headerSummaryView */
	        get: function () {
	            return this._headerSummaryView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedHeaderSummaryView", {
	        /** fixedHeaderSummaryView */
	        get: function () {
	            return this._fixedHeaderSummaryView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightHeaderSummaryView", {
	        /** rightHeaderSummaryView */
	        get: function () {
	            return this._rightHeaderSummaryView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "footerView", {
	        /** footerView */
	        get: function () {
	            return this._footerView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedFooterView", {
	        /** fixedFooterView */
	        get: function () {
	            return this._fixedFooterView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rightFooterView", {
	        /** rightFooterView */
	        get: function () {
	            return this._rightFooterView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "headView", {
	        /** headView */
	        get: function () {
	            return this._headView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "sumView", {
	        /** sumView */
	        get: function () {
	            return this._sumView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "footView", {
	        /** footView */
	        get: function () {
	            return this._footView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "fixedOptions", {
	        /** fixedOptions */
	        get: function () {
	            return this._fixedOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "displayOptions", {
	        /** displayOptions */
	        get: function () {
	            return this._displayOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "formatOptions", {
	        /** formatOptions */
	        get: function () {
	            return this._formatOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "editOptions", {
	        /** editOptions */
	        get: function () {
	            return this._editOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "editorOptions", {
	        /** editorOptions */
	        get: function () {
	            return this._editorOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "copyOptions", {
	        /** copyOptions */
	        get: function () {
	            return this._copyOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "pasteOptions", {
	        /** pasteOptions */
	        get: function () {
	            return this._pasteOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "sortingOptions", {
	        /** sortingOptions */
	        get: function () {
	            return this._sortingOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "filteringOptions", {
	        /** filteringOptions */
	        get: function () {
	            return this._filteringOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "delegate", {
	        /** delegate */
	        get: function () {
	            return this._delegate;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "heightMeasurer", {
	        /** heightMeasurer */
	        get: function () {
	            return this.container.heightMeasurer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "layoutManager", {
	        /** layoutManager */
	        get: function () {
	            return this._layoutManager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "selections", {
	        /** selections */
	        get: function () {
	            return this._selections;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "editController", {
	        /** editController */
	        get: function () {
	            return this._editController;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "validations", {
	        /** validations */
	        get: function () {
	            return this._validations;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "validationManager", {
	        /** validationManager */
	        get: function () {
	            return this._validationManager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "popupMenuManager", {
	        /** popupMenuManager */
	        get: function () {
	            return this._popupMenuManager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "tooltipManager", {
	        /** popupMenuManager */
	        get: function () {
	            return this._tooltipManager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "toastManager", {
	        /** toastManager */
	        get: function () {
	            return this._toastManager;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "topIndex", {
	        /** topIndex */
	        get: function () {
	            return this._topIndex;
	        },
	        set: function (value) {
	            value = Math.max(0, Math.min(value, this.itemCount - this.layoutManager.fixedItemCount - 1, this._vscrollBar ? this._vscrollBar.maxPosition : 0));
	            //value = Math.max(0, Math.min(value, this.itemCount - this._layoutManager._fixedRows - 1, this._vscrollBar ? this._vscrollBar.maxPosition : 0));
	            // value = Math.max(0, Math.min(value, this.itemCount - 1));
	            if (value != this._topIndex) {
	                this._topIndex = value;
	                this.refreshView();
	                this.closePopups();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "topItem", {
	        // setTopIndex(topIndex: number, isFiltering: boolean = false) {
	        // 특이한 케이스 
	        // closePopup <= dropdown, popup, filter 등을 닫는다.
	        // closePopup2 <= filter를 제외하고 닫는다.
	        // filtering중 itemIndex가 변경되었을때 화면이 닫히는것을 방지하기 위해서 사용한다.
	        // _isFiltering을 추가해서 처리
	        // }
	        /** topItem */
	        get: function () {
	            return this._topIndex + this.layoutManager.fixedItemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "leftPos", {
	        /** leftPos */
	        get: function () {
	            return this._leftPos;
	        },
	        set: function (value) {
	            //value = isNaN(parseInt(value)) ? this.leftPos() : parseInt(value);
	            value = Math.max(0, Math.min(value, this._hscrollBar ? this._hscrollBar["_maxPosition"] : 0));
	            if (value != this._leftPos) {
	                this._leftPos = value;
	                if (this._displayOptions.refreshMode == Types.RefreshMode.VISIBLE_ONLY) {
	                    this.refreshView();
	                }
	                else {
	                    // TODO: 마우스 스크롤 시 data 변경이 없다면 전체 layout() 대신 contentPane만 이동 시키고 
	                    //       scrollbar만 변경시킨다. (_doPrepareRender 참조)
	                    this._horzScrolled = true;
	                    this.invalidate();
	                }
	                this.closePopups();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "leftCell", {
	        /** leftCell */
	        get: function () {
	            return this._layoutManager.getCellIndex(this.leftPos);
	        },
	        set: function (value) {
	            this.leftPos = this._layoutManager.getCellPoint(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "leftLayout", {
	        /** leftLayout */
	        get: function () {
	            return this._layoutManager.firstLayout;
	        },
	        set: function (value) {
	            var lm = this._layoutManager;
	            value = Math.max(lm.fixedLayoutCount, Math.min(value, lm.layoutCount - 1));
	            this.leftPos = lm.getLayoutBounds(value).x;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "undoable", {
	        /** undoable */
	        get: function () {
	            return false;
	        },
	        set: function (value) {
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "undoing", {
	        /** undoing */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "redoing", {
	        /** redoing */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "filtering", {
	        /** filtering */
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "lookupProvider", {
	        /** LookupProvider */
	        get: function () {
	            return this._lookupProvider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "canHovering", {
	        /** canHovering */
	        get: function () {
	            return !this.isEditing();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "hoveredCell", {
	        /** hoveredCell */
	        get: function () {
	            return this._hoveredCell;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "empty", {
	        /** empty */
	        get: function () {
	            return this.itemCount == 0 || this.visibleLayoutCount == 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridBase.prototype.addFeedbackElement = function (view) {
	        if (view && !this._feedbackLayer.contains(view)) {
	            this._feedbackLayer.addChild(view);
	            return true;
	        }
	    };
	    GridBase.prototype.removeFeedbackElement = function (view) {
	        var idx = this._feedbackLayer.indexOf(view);
	        if (idx >= 0) {
	            this._feedbackLayer.removeChildAt(idx);
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.getVisibleLayout = function (index) {
	        return this._activeCellLayout.getVisible(index);
	    };
	    GridBase.prototype.getColumn = function (index) {
	        return this._columns.getColumn(index);
	    };
	    // getVisibleColumn(index: number): GridColumn {
	    //     return this._activeLayout.getVisible(index);
	    // }
	    GridBase.prototype.setColumns = function (columns) {
	        this._columns.setColumns(columns);
	        this._columnMap = {};
	        for (var i = this._columns.count - 1; i >= 0; i--) {
	            var col = this._columns.getColumn(i);
	            this._columnMap[col["$_hash"]] = col;
	        }
	        this._columnsReset();
	    };
	    GridBase.prototype._checkEditing = function () {
	        if (this.itemSource instanceof EditableItemProvider_1.EditableItemProvider && this.itemSource.isEditing()) {
	            throw "Item is editing";
	        }
	    };
	    GridBase.prototype.addColumn = function (column, index) {
	        this._checkEditing();
	        var col = this._columns.add(column, index);
	        if (col) {
	            this._columnMap[col["$_hash"]] = col;
	            this._columnsReset();
	            this.dataSource && this.applyFilters();
	        }
	        return col;
	    };
	    GridBase.prototype.removeColumn = function (column) {
	        if (typeof column === 'string') {
	            column = this.columnByName(column);
	        }
	        if (!column) {
	            return false;
	        }
	        this._checkEditing();
	        if (this._columns.remove(column)) {
	            delete this._columnMap[column["$_hash"]];
	            this._columnsReset();
	            this.dataSource && this.applyFilters();
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.invalidateColumn = function (column) {
	        if (this._columnLock <= 0) {
	            this._resetColumnIndices(column);
	        }
	        if (!this._columnsDirty) {
	            this._columnsDirty = true;
	            this.refreshView();
	        }
	    };
	    GridBase.prototype.invalidateColumns = function () {
	        if (this._columnLock <= 0) ;
	        if (!this._columnsDirty) {
	            this._columnsDirty = true;
	            this.refreshView();
	        }
	    };
	    GridBase.prototype.getVisibleCellLayout = function (index) {
	        return this._activeCellLayout.getVisible(index);
	    };
	    GridBase.prototype.invalidate = function () {
	        this._container && this._container.invalidate(false);
	    };
	    GridBase.prototype.invalidateLayout = function () {
	        if (!this._updateLock) {
	            _super.prototype.invalidateLayout.call(this);
	            this._columnsDirty = true;
	        }
	    };
	    GridBase.prototype.invalidateCellLayouts = function () {
	        if (!this._updateLock) {
	            this.clearRowHeights();
	            _super.prototype.invalidateLayout.call(this);
	            this._columnsDirty = true;
	        }
	    };
	    GridBase.prototype.refreshView = function () {
	        if (!this._loading) {
	            this.invalidateLayout();
	            this.topIndex = this.topIndex; //, this._filterRunning);
	            this.leftPos = this.leftPos;
	            //this.setFocusedIndex(this.focusedIndex(), true);
	        }
	    };
	    GridBase.prototype.resetGrid = function () {
	        this._resetting = true;
	        this.topIndex = 0;
	        this.leftPos = 0;
	        //this.setFocusedIndex(this.getIndex(0, this.getFirstColumn()), true);
	        this.refreshView();
	    };
	    GridBase.prototype.getFirstCell = function () {
	        if (this.itemCount > 0) {
	            var index = 0;
	            for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	                if (this.getItem(i) instanceof GridItem_1.GridRow) {
	                    index = i;
	                    break;
	                }
	            }
	            return new CellIndex_1.CellIndex(this, index >= 0 ? index : 0, this.getFirstColumn());
	        }
	        return null;
	    };
	    // editor의 focus/focusin/blur/focusount 이벤트에서 호출된다.
	    // tab, setFocus()를 이용하는 경우 focus를 표시해 주어야 한다.
	    // focus를 표시할때 현재 화면 기준으로 firstCell을 찾아오자.
	    GridBase.prototype.$_setEditFocused = function (value, e) {
	        // var hasCommit = false;
	        // if (!value && !this.$_editFocused && (e.type == "focusout" || e.type == "blur")) {
	        //  	var options = this.editOptions();
	        //  	var editor = this._editController._editor;
	        //  	if (editor && editor.isListing && editor.isListing()) {
	        //  		hasCommit = false;
	        //  	} else if (options._gridExitWhenCommit && (this.isItemEdited() ||this.isItemEditing())) {
	        //     			hasCommit = true;
	        //    	}	    	
	        // }    		
	        if (value != this.$_editFocused) {
	            this.$_editFocused = value;
	            /*
	             아래를 실행하면 포커스 없는 상태에서 데이터 영역 외를 클릭하면 첫 셀로 포커스가 설정된다.
	            */
	            if (value && this.$_showFocusCell) {
	                var index = this.focusedIndex;
	                if (!index || !this.isValid(index)) {
	                    index = this.getFirstCell();
	                    index && this.setFocusedIndex(index);
	                }
	            }
	            this.$_showFocusCell = false;
	        }
	        value && e.type == "focusin" && Utils_1.Utils.isAncestorOf(this._container["_container"], e.target) && Utils_1.Utils.$_setActiveGrid(this);
	        // if (hasCommit) {
	        // 	this.commit(false,true);
	        // }
	    };
	    GridBase.prototype.getItem = function (index) {
	        return this._items.getItem(index);
	    };
	    GridBase.prototype.getItemIndexOfRow = function (dataRow) {
	        return this._items.getIndexOfRow(dataRow);
	    };
	    GridBase.prototype.getItemOfRow = function (dataRow, force) {
	        return this._items.getItemOfRow(dataRow, force);
	    };
	    GridBase.prototype.getItemIndiciesOfRows = function (dataRows) {
	        return this._items.getIndicesOfRows(dataRows);
	    };
	    GridBase.prototype.getIndicatorIndex = function (item) {
	        return item.index;
	    };
	    GridBase.prototype.getAllItems = function () {
	        return this._items.getAllItems();
	    };
	    GridBase.prototype.getImage = function (imageUrl) {
	        return null;
	    };
	    GridBase.prototype.getIndex = function (itemIndex, column) {
	        if (itemIndex === void 0) { itemIndex = -1; }
	        if (column === void 0) { column = null; }
	        return new CellIndex_1.CellIndex(this, itemIndex, column);
	    };
	    GridBase.prototype.getDataCellIndex = function (cell, index) {
	        var row = cell.parentElement["$_row"];
	        var layout = this.layoutByDataCell(cell);
	        return index != null ? index.set(row, layout) : new CellIndex_1.CellIndex(this, row, layout);
	    };
	    GridBase.prototype.getHandler = function () {
	        return this.fireObjectEvent(GridBase.GET_HANDLER);
	    };
	    GridBase.prototype.getDataColumns = function (visibleOnly) {
	        if (visibleOnly === void 0) { visibleOnly = true; }
	        return this._activeCellLayout.getDataColumns(visibleOnly);
	    };
	    GridBase.prototype.optionsChanged = function (options) {
	        this.refreshView();
	    };
	    GridBase.prototype.scrollRow = function (delta) {
	        var oldTop = this.topIndex;
	        this.topIndex = oldTop + delta;
	        delta = this.topIndex - oldTop;
	    };
	    GridBase.prototype.selectColumnFilters = function (cell) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        if (this._fireFiltering()) {
	            this._filterSelector.show(cell.layout.firstColumn, cell.cell, this.dataSource);
	        }
	    };
	    GridBase.prototype.closeFilterSelector = function () {
	        this._filterSelector.hide();
	    };
	    GridBase.prototype.closePopups = function () {
	        if (!this.filtering) {
	            this._filterSelector.hide();
	        }
	        //this._popupMenuManager.close();
	        //this._editController.closeList();
	    };
	    GridBase.prototype.layoutByDataCell = function (cell) {
	        return this._bodyView.layoutByCell(cell) || this._fixedBodyView.layoutByCell(cell) || this._rightBodyView.layoutByCell(cell);
	    };
	    GridBase.prototype.columnByHash = function (hash) {
	        return this._columnMap[hash];
	    };
	    GridBase.prototype.columnByDataCell = function (cell) {
	        return this._bodyView.columnByCell(cell) || this._fixedBodyView.columnByCell(cell) || this._rightBodyView.columnByCell(cell);
	    };
	    GridBase.prototype.columnByName = function (name) {
	        return this._columns.columnByName(name);
	    };
	    GridBase.prototype.columnByField = function (field) {
	        return this._columns.columnByField(field);
	    };
	    GridBase.prototype.getHorzColumns = function (start, count) {
	        return this._activeCellLayout.getHorzColumns(start, count);
	    };
	    GridBase.prototype.getGroupLevel = function (field) {
	        return -1;
	    };
	    GridBase.prototype.isGroupedColumn = function (column) {
	        return false;
	    };
	    GridBase.prototype.layoutByColumn = function (column) {
	        if (!(column instanceof GridColumn_1.GridColumn)) {
	            column = this.columnByName(column);
	        }
	        if (column) {
	            return this._activeCellLayout.layoutByColumn(column);
	        }
	        return null;
	    };
	    // force
	    // scrolled <= 편집기가 화면에 보이지 않는상태라면 강제로 scroll되는것을 막아주기위해서.
	    GridBase.prototype.setFocus = function () {
	        this.$_showFocusCell = true;
	        this._editController.setFocus(true);
	        // if ($$_activeGrid !== this) {
	        // 	$_setActiveGrid(this);
	        // }
	    };
	    GridBase.prototype.registerImageList = function (images) {
	        if (images && images.name && !this._imageLists.hasOwnProperty(images.name)) {
	            this._imageLists[images.name] = images;
	            this.$_assignImageList(images, false);
	        }
	    };
	    GridBase.prototype.unregisterImageList = function (images) {
	        if (images && images.name && this._imageLists.hasOwnProperty(images.name)) {
	            delete this._imageLists[images.name];
	            this.$_assignImageList(images, true);
	        }
	    };
	    GridBase.prototype.getImageList = function (imagesName) {
	        return imagesName && this._imageLists[imagesName];
	    };
	    GridBase.prototype.getListImage = function (images, index) {
	        if (images instanceof ImageList_1.ImageList) {
	            return images.getImage(index);
	        }
	        else if (images) {
	            images = this._imageLists[images];
	            return images ? images.getImage(index) : null;
	        }
	    };
	    GridBase.prototype.$_assignImageList = function (images, clear) {
	        var columns = this.getDataColumns();
	        for (var i = 0, cnt = columns.length; i < cnt; i++) {
	            var col = columns[i];
	            // if (col.imageList == images.name) {
	            // 	col._images = clear ? null : images;
	            // }
	        }
	    };
	    GridBase.prototype.getFirstLayout = function () {
	        return this._activeCellLayout.first;
	    };
	    GridBase.prototype.getFirstColumn = function () {
	        return this._activeCellLayout.firstColumn;
	    };
	    GridBase.prototype.collectColumns = function (columnsOnly, visibleOnly, ordered) {
	        //const columns = [];
	        //this._rootColumn.collectColumns(columns, columnsOnly, visibleOnly, ordered);
	        //return columns;
	        return this._activeCellLayout.collectColumns(columnsOnly, visibleOnly, ordered);
	    };
	    GridBase.prototype.collectDataColumns = function (c1, c2) {
	        return this._activeCellLayout.collectDataColumns(c1, c2);
	    };
	    GridBase.prototype.isValid = function (index) {
	        return index && index.grid === this &&
	            index.itemIndex >= 0 && index.itemIndex < this.itemCount &&
	            index.layout && index.layout.grid === this;
	    };
	    GridBase.prototype.getSelection = function () {
	        return this._selections.count > 0 ? this._selections.getItem(0) : null;
	    };
	    GridBase.prototype.clearSelection = function () {
	        var idx = this.focusedIndex;
	        this._selections.clear();
	        if (this.isValid(idx) && this.itemCount > 0 && this.visibleLayoutCount > 0) {
	            this._selections.add(idx, idx, this._displayOptions.selectionStyle);
	        }
	    };
	    GridBase.prototype.deleteSelection = function (force) {
	        if (force === void 0) { force = false; }
	        function checkDelete(self, item) {
	            var items = [];
	            items.push(item);
	            return checkDeleteAll(self, items);
	        }
	        function checkDeleteAll(self, items) {
	            try {
	                if (items && items.length > 0) {
	                    var rows = [];
	                    for (var i = 0, cnt_1 = items.length; i < cnt_1; i++) {
	                        var item = self.getItem(items[i]);
	                        if (item && item.dataRow >= 0) {
	                            rows.push(item.dataRow);
	                        }
	                    }
	                    if (rows.length > 0) {
	                        if (!self._fireRowsDeleting(rows)) {
	                            return false;
	                        }
	                    }
	                }
	            }
	            catch (err) {
	                alert(err);
	                return false;
	            }
	            return true;
	        }
	        function deleteSingleCell(self, selections) {
	            if (selections.count == 0 || selections.count == 1 && selections.getItem(0).single) {
	                var r_1 = -1;
	                var item = void 0;
	                if (selections.count == 0) {
	                    r_1 = self.focusedIndex.itemIndex;
	                }
	                else {
	                    r_1 = selections.getItem(0).getBounds().r1;
	                }
	                if (r_1 >= 0 && self.canDelete(item = self.getItem(r_1))) {
	                    if (force || !self.editOptions.confirmWhenDelete) {
	                        self.cancel();
	                        if (!GridItem_1.ItemState_isInserting(item.itemState)) {
	                            self.itemSource.remove(item);
	                        }
	                    }
	                    else {
	                        if (confirm(self.editOptions.deleteRowsMessage) && checkDelete(self, r_1)) {
	                            self.cancel();
	                            if (!GridItem_1.ItemState_isInserting(item.itemState)) {
	                                self.itemSource.remove(item);
	                            }
	                        }
	                    }
	                }
	                return true;
	            }
	            return false;
	        }
	        function removeItems(self, items) {
	            var editingItem = null;
	            for (var i = items.length; i--;) {
	                var item = self.getItem(items[i]);
	                var state = item.itemState;
	                if (GridItem_1.ItemState_isEditing(state)) {
	                    editingItem = item;
	                    if (GridItem_1.ItemState_isInserting(state)) {
	                        items.splice(i, 1);
	                    }
	                    break;
	                }
	            }
	            var rows = null;
	            if (items.length > 0) {
	                rows = self.itemSource.getRemovableRows(items);
	            }
	            if (editingItem) {
	                self.cancel();
	            }
	            if (rows) {
	                self.itemSource.removeRows(rows);
	            }
	        }
	        var options = this.editOptions;
	        var selections = this.selections;
	        var rs = this.itemSource;
	        if (!force && !options.deletable) { // || !isValid(m_focusedIndex))
	            return;
	        }
	        if (!(rs instanceof EditableItemProvider_1.EditableItemProvider)) {
	            return;
	        }
	        if (this.isItemEditing(null) && !options.deletableWhenEdit) {
	            alert(window["RG_CONST"] && window["RG_CONST"]["COMMITEDITING"] ? window["RG_CONST"]["COMMITEDITING"] : "먼저 편집을 완료 하십시오.");
	            return;
	        }
	        this.commitEditor(true);
	        if (deleteSingleCell(this, selections)) {
	            return;
	        }
	        var cnt = selections.count;
	        var items = [];
	        for (var i = 0; i < cnt; i++) {
	            var sel = selections.getItem(i);
	            if (sel.style == Selections.SelectionStyle.ROWS || sel.style == Selections.SelectionStyle.BLOCK) {
	                var range = sel.getBounds();
	                var r1 = Math.min(range.r1, range.r2);
	                var r2 = Math.max(range.r1, range.r2);
	                for (var r_2 = r1; r_2 <= r2; r_2++) {
	                    var item = this.getItem(r_2);
	                    // if (item.dataRow >= 0 || item instanceof EditItem || item instanceof TreeEditItem) {
	                    if (item.dataRow >= 0 || item.editable) {
	                        items.push(r_2);
	                    }
	                }
	            }
	        }
	        items.sort(function (v1, v2) {
	            return v2 - v2;
	        });
	        var r = -1;
	        for (var i = items.length; i--;) {
	            if (items[i] == r) {
	                items.splice(i, 1);
	            }
	            else {
	                r = items[i];
	            }
	        }
	        if (items.length > 0 && this.canDelete(this.getItem(items[0]))) {
	            if (force || !options.confirmWhenDelete) {
	                if (checkDeleteAll(this, items)) {
	                    removeItems(this, items);
	                    this.clearSelection();
	                }
	            }
	            else if (confirm(options.deleteRowsMessage) && checkDeleteAll(this, items)) {
	                removeItems(this, items);
	                this.clearSelection();
	            }
	        }
	    };
	    GridBase.prototype.revertSelection = function (force) {
	        if (force === void 0) { force = false; }
	        function revertSingleCell(self, selections) {
	            if (selections.count == 0 || selections.count == 1 && selections.getItem(0).single) {
	                var r_3 = -1;
	                if (selections.count == 0) {
	                    r_3 = self.focusedIndex.itemIndex;
	                }
	                else {
	                    r_3 = selections.getItem(0).getBounds().r1;
	                }
	                if (r_3 >= 0) {
	                    self.itemSource.revert(r_3);
	                    return true;
	                }
	            }
	            return false;
	        }
	        var options = this.editOptions;
	        var selections = this.selections;
	        var rs = this.itemSource;
	        if (!force && !options.revertable) {
	            return;
	        }
	        if (!(rs instanceof EditableItemProvider_1.EditableItemProvider)) {
	            return;
	        }
	        this.commitEditor(true);
	        if (revertSingleCell(this, selections)) {
	            return;
	        }
	        var cnt = selections.count;
	        var items = [];
	        for (var i = 0; i < cnt; i++) {
	            var sel = selections.getItem(i);
	            if (sel.style == Selections.SelectionStyle.ROWS || sel.style == Selections.SelectionStyle.BLOCK) {
	                var range = sel.getBounds();
	                var r1 = Math.min(range.r1, range.r2);
	                var r2 = Math.max(range.r1, range.r2);
	                for (var r_4 = r1; r_4 <= r2; r_4++) {
	                    var item = this.getItem(r_4);
	                    //if (item.dataRow >= 0 || item instanceof EditItem || item instanceof TreeEditItem) {
	                    if (item.dataRow >= 0 || item.editable) {
	                        items.push(r_4);
	                    }
	                }
	            }
	        }
	        items.sort(function (v1, v2) {
	            return v2 - v2;
	        });
	        var r = -1;
	        for (var i = items.length; i--;) {
	            if (items[i] == r) {
	                items.splice(i, 1);
	            }
	            else {
	                r = items[i];
	            }
	        }
	        if (items.length > 0) {
	            rs.revertAll(items);
	        }
	    };
	    GridBase.prototype.eraseSelection = function () {
	        function eraseSingle(self, selections) {
	            if (selections.count == 0 || selections.count == 1 && selections.getItem(0).single) {
	                var idx = self.focusedIndex;
	                self.setCellValue(idx, undefined);
	                return true;
	            }
	            return false;
	        }
	        var options = this.editOptions;
	        var selections = this.selections;
	        var rs = this.itemSource;
	        if (options.readOnly || !options.erasable || !options.updatable) {
	            return false;
	        }
	        if (!(rs instanceof EditableItemProvider_1.EditableItemProvider)) {
	            return false;
	        }
	        if (this.isItemEditing()) {
	            return false;
	        }
	        if (eraseSingle(this, selections)) {
	            return true;
	        }
	        var cnt = selections.count;
	        if (cnt < 1) {
	            return false;
	        }
	        var items = [];
	        for (var i = 0; i < cnt; i++) {
	            var sel = selections.getItem(i);
	            if (sel.style == Selections.SelectionStyle.ROWS || sel.style == Selections.SelectionStyle.BLOCK) {
	                items = items.concat(sel.getItems());
	            }
	        }
	        if (items.length == 0) {
	            return false;
	        }
	        // if (items.length > 1) {
	        //     items.sort(function (item1, item2): number {
	        //         return item1.index - item2.index;
	        //     });
	        // }
	        for (var i = 0; i < cnt; i++) {
	            var sel = selections.getItem(i);
	            sel.setValues(undefined);
	        }
	        return true;
	    };
	    GridBase.prototype.getSelectedRows = function () {
	        var item = this._selections.getItem(0);
	        if (item) {
	            var rs = this.itemSource;
	            var bounds = item.getBounds();
	            var rows = [];
	            for (var r = bounds.r1; r <= bounds.r2; r++) {
	                var item_1 = rs.getItem(r);
	                var row = item_1.dataRow;
	                if (row >= 0) {
	                    rows.push(row);
	                }
	            }
	            return rows;
	        }
	        return null;
	    };
	    GridBase.prototype.setFocusedIndex = function (value, select, focus) {
	        if (select === void 0) { select = true; }
	        if (focus === void 0) { focus = false; }
	        if (!this._focusing) {
	            this._focusing = true;
	            try {
	                this.$_doSetFocusedIndex(value, select, focus);
	            }
	            finally {
	                this._focusing = false;
	            }
	        }
	    };
	    GridBase.prototype.getTableCell = function (dom) {
	        var p = dom;
	        while (p) {
	            if (p instanceof HTMLTableCellElement) {
	                return p;
	            }
	            p = p.parentElement;
	        }
	        return null;
	    };
	    GridBase.prototype.getTableView = function (cell) {
	        return this._tableViews[cell.parentElement["$_view"]];
	    };
	    GridBase.prototype.getBodyViewAt = function (index) {
	        return this._layoutManager.getBodyView(index);
	    };
	    GridBase.prototype.getBodyView = function (cell) {
	        return this.getTableView(cell);
	    };
	    GridBase.prototype.getHeaderView = function (cell) {
	        return this.getTableView(cell);
	    };
	    GridBase.prototype.getCellType = function (cell) {
	        if (cell) {
	            var tr = cell.parentElement;
	            if (tr["$_row"] === -99)
	                return Types.TableCellType.FIXED_BAR;
	            var view = this._tableViews[tr["$_view"]];
	            if (view instanceof GridBodyElement_1.GridBodyElement)
	                return Types.TableCellType.DATA;
	            if (view instanceof HeaderElement_1.HeaderElement)
	                return Types.TableCellType.HEADER;
	            if (view instanceof FooterElement_1.FooterElement)
	                return Types.TableCellType.FOOTER;
	            if (view instanceof RowIndicatorElement_1.RowIndicatorElement)
	                return Types.TableCellType.INDICATOR;
	            if (view instanceof StateBarElement_1.StateBarElement)
	                return Types.TableCellType.STATE;
	            if (view instanceof CheckBarElement_1.CheckBarElement)
	                return Types.TableCellType.CHECK;
	            if (view instanceof GridHeadElement_1.GridHeadElement)
	                return Types.TableCellType.HEAD;
	            if (view instanceof GridFootElement_1.GridFootElement)
	                return Types.TableCellType.FOOT;
	            if (view instanceof GridSumElement_1.GridSumElement)
	                return Types.TableCellType.SUM;
	        }
	        return undefined;
	    };
	    GridBase.prototype.cellToIndex = function (dom) {
	        var index = CellIndex_1.CellIndex.temp(this, -1, null);
	        dom = this.getCellViewOf(dom);
	        if (dom instanceof HTMLTableCellElement) {
	            var bodyView = this.getBodyView(dom);
	            if (bodyView) {
	                index.layout = bodyView.layoutByCell(dom);
	                index.itemIndex = dom.parentElement["$_row"];
	            }
	        }
	        return index;
	    };
	    GridBase.prototype.cellToContainer = function (dom, p) {
	        if (p === void 0) { p = null; }
	        var p2 = p || new Point_1.Point();
	        var view = this.getTableView(dom);
	        view.getCellPoint(dom, p);
	        var r = view.boundsByContainer(Rectangle_1.Rectangle.Temp.set(p.x, p.y, 0, 0));
	        p2.set(r.x, r.y);
	        return p2;
	    };
	    GridBase.prototype.pointToIndex = function (eventTarget, x, y, clipped) {
	        var index = CellIndex_1.CellIndex.temp(this, -1, null);
	        if (clipped) {
	            this._layoutManager.mouseToIndex(this.getCellViewOf(eventTarget), x, y, index);
	        }
	        else {
	            this._layoutManager.mouseToIndexEx(this.getCellViewOf(eventTarget), x, y, index);
	        }
	        return index;
	    };
	    GridBase.prototype.getEditCellBounds = function (index) {
	        var lm = this.layoutManager;
	        var bodyView = lm.getBodyView(index);
	        var room = lm.getMergedCell(index);
	        var cell = bodyView.getCellAt(lm, index);
	        if (cell) {
	            //let r = lm.getDataCellBounds(index);
	            var r = bodyView.getCellRectAt(lm, index, false);
	            r = bodyView.boundsByContainer(r);
	            return r;
	            // let r = view.getBounds();
	            // r.x = r.y = 0;
	            // r = view.boundsByContainer(r);
	            // if (room) {
	            //     const i = index.itemIndex;
	            //     if (i >= lm.topIndex + lm.fixedItemCount && i < lm.topIndex + lm.itemCount + lm.fixedItemCount) {
	            //         const r1 = lm.getItemBounds(view._topIndex);
	            //         const r2 = lm.getItemBounds(index.itemIndex - this._topIndex);
	            //         r.y += r2.y - r1.y;
	            //         r.height = r2.height;
	            //     } else {
	            //         r = $_INVISIBLE_EDIT_BOUNDS.clone();
	            //     }
	            // }
	            //return r;
	        }
	        else {
	            return $_INVISIBLE_EDIT_BOUNDS.clone();
	        }
	    };
	    GridBase.prototype.getEditBounds = function (index) {
	        var item = index.item;
	        if (!item)
	            return null;
	        var lm = this.layoutManager;
	        var nFixed = lm.fixedItemCount;
	        if (nFixed > 0 && item.index >= nFixed && item.index - nFixed < lm.topIndex) {
	            return $_INVISIBLE_EDIT_BOUNDS.clone();
	        }
	        var bodyView = lm.getBodyView(index);
	        var room = lm.getMergedCell(index);
	        var cell = bodyView.getCellAt(lm, index);
	        if (cell) {
	            //let r = lm.getDataCellBounds(index);
	            var r = bodyView.getCellRectAt(lm, index, false);
	            r = bodyView.boundsByContainer(r);
	            r.width -= cell.editWidth + cell.buttonWidth;
	            return r;
	        }
	        return $_INVISIBLE_EDIT_BOUNDS.clone();
	        /*
	        const view = this.getCellView(room ? this._mergeView : null, index, index.isFixedCol());

	        if (view) {
	            var r = view.getBounds();
	            r.x = r.y = 0;
	            if (view instanceof DataCellElement) {
	                r.width -= view.getButtonsWidth();
	                view._isLeftImageButton && (r.x += view.getLeftButtonsWidth())
	            }
	            r = view.boundsByContainer(r);
	            if (room) {
	                var i = index.itemIndex();
	                if (i >= lm.topIndex() + lm.fixedRowCount() && i < lm.topIndex() + lm.itemCount() + lm.fixedRowCount()) {
	                    var r1 = lm.itemBounds(view._topIndex);
	                    var r2 = lm.itemBounds(index.I() - this._topIndex);
	                    r.y += r2.y - r1.y;
	                    r.height = r2.height;
	                } else {
	                    r = $_INVISIBLE_EDIT_BOUNDS.clone();
	                }
	            }
	            return r;
	        } else {
	            return $_INVISIBLE_EDIT_BOUNDS.clone();
	        }
	        */
	    };
	    GridBase.prototype.getCellViewOf = function (dom) {
	        while (dom) {
	            if (dom instanceof HTMLTableCellElement)
	                return dom;
	            dom = dom.parentElement;
	        }
	        return null;
	    };
	    GridBase.prototype.getCellView = function (owner, index, fixed, rightFixed) {
	        // var item, idx;
	        // var column = index._column;
	        // fixed = fixed || column.isFixed();
	        // rightFixed = rightFixed || column.isRightFixed();
	        // if (owner == null || owner instanceof GridBodyElement) {
	        // 	item = index.item();
	        // 	if (item && item.isEditable()) {
	        // 		idx = item.index();
	        // 		var rowView = rightFixed ? this._rfixedBodyView.findRowView(idx) : 
	        // 		                       fixed ? this._fixedBodyView.findRowView(idx) :
	        // 					                   this._bodyView.findRowView(idx);
	        // 		if (rowView && rowView.isVisible()) {
	        // 			return rowView.findCell(column);
	        // 		}
	        // 	}
	        // } else if (owner === this._rowGroupView) {
	        // 	return this._rowGroupView.getCellView(index, !!fixed, !!rightFixed);
	        // } else if (owner instanceof GridMergeElement) {
	        //     var mergeView = rightFixed ? this._rfixedMergeView : fixed ? this._fixedMergeView : this._mergeView;
	        // 	return  mergeView.getCellView(index);
	        // } else if (owner === this._mergeHeaderLayer) {
	        // 	return this._mergeHeaderLayer.getCellView(index);
	        // }
	        return null;
	    };
	    GridBase.prototype.getFocusedCellView = function (index) {
	        var item = index.item;
	        if (!item)
	            return null;
	        var lm = this.layoutManager;
	        var nFixed = lm.fixedItemCount;
	        if (nFixed > 0 && item.index >= nFixed && item.index - nFixed < lm.topIndex) {
	            return null;
	        }
	        var merged = item.merged;
	        var fixed = index.colFixed;
	        var rfixed = index.rightFixed;
	        // const grouped = item instanceof GroupItemImpl;
	        // let cell: HTMLTableCellElement;
	        if (item.isData || merged) {
	            var bodyView = rfixed ? this._rightBodyView : fixed ? this._fixedBodyView : this._bodyView;
	            return bodyView.getCellView(lm, index);
	        }
	        return null;
	        // var cell = isGroupItem ? null : 
	        // 				rfixed ? this.getCellView(this._rfixedMergeView, index, true) : 
	        //                  fixed ? this.getCellView(this._fixedMergeView, index, true) : null;
	        // if (!cell && !fixed && !isGroupItem) {
	        // 	cell = this.getCellView(this._mergeView, index, false);
	        // } 
	        // if (!cell && merged) {
	        // 	cell = this.getCellView(this._mergeHeaderLayer, index);
	        // } 
	        // if (!cell) {
	        // 	cell = this.getCellView(null, index, fixed);
	        // }
	        // if (!cell && !merged) {
	        // 	cell = this.getCellView(this._rowGroupView, index, false);
	        //     if (!cell) {
	        //         cell = this.getCellView(this._rowGroupView, index, true);
	        //     }
	        // }
	        // return cell;
	    };
	    GridBase.prototype.isFocusedRow = function (itemIndex) {
	        return this._focusedIndex.itemIndex == itemIndex;
	    };
	    GridBase.prototype.isFocusedColumn = function (column) {
	        return this._focusedIndex.column === column;
	    };
	    GridBase.prototype.pasteFromClipboard = function (text, e) {
	    };
	    // range api를 이용해서 복사하는 경우 {startItem:0, startColumn:"columnName", endItem:1, endColumn:"columnName"} 형식으로 지정한다.
	    // 1.0에서는 column이었지만 2.0에서는 layout으로 처리해야한다.
	    GridBase.prototype.copyToClipboard = function (event, range, force) {
	        if (force === void 0) { force = false; }
	        var item, isSingle = false;
	        var index = this.focusedIndex;
	        if (force || this.copyOptions.enabled) {
	            if (!force) {
	                var selections = this.selections;
	                isSingle = this.copyOptions.singleMode || selections.count == 0 || selections.single;
	                item = isSingle ? new Selections.BlockSelection(selections, index, index) : selections.getItem(0);
	                // TODO
	                // force = this._fireCopy(item, event);
	                force = true;
	            }
	            if (force) {
	                range = range || item.getBounds();
	                return isSingle ? this._clipboardManager.copyCellToClipboard(index) : this._clipboardManager.copyToClipboard(range);
	            }
	            else {
	                return null;
	            }
	        }
	        return this._clipboardManager.copyEmtpyToClipboard();
	    };
	    GridBase.prototype.toClipboard = function (selection, copy) {
	        if (copy === void 0) { copy = true; }
	        if (this.empty) {
	            return;
	        }
	        var range;
	        if (!selection || !(selection instanceof CellIndex_1.CellRange)) {
	            var startColumn = void 0;
	            var endColumn = void 0;
	            if (selection) {
	                // TODO column에서 layoutItem을 찾는 방법이 필요.
	                // startColumn = selection["startColumn"] ? this.columnByName(selection["startColumn"]) : this._activeCellLayout.firstColumn;
	                // endColumn = selection["endColumn"] ? this.columnByName(selection["endColumn"]) : this._activeCellLayout.firstColumn;
	                startColumn = this._activeCellLayout.first;
	                endColumn = this._activeCellLayout.first;
	            }
	            else {
	                startColumn = this._activeCellLayout.first;
	                endColumn = this._activeCellLayout.first;
	            }
	            if (!startColumn || !endColumn) {
	                return;
	            }
	            selection = selection || {};
	            var startItem = selection["startItem"] == null ? 0 : Math.max(0, selection.startItem);
	            var endItem = selection["endItem"] == null ? this.itemCount - 1 : Math.min(selection.endItem, this.itemCount - 1);
	            range = CellIndex_1.CellRange.createRange(startItem, startColumn, endItem, endColumn);
	        }
	        var text = this.copyToClipboard(null, range, true);
	        text = text == null ? "" : text;
	        if (copy) {
	            if (window["clipboardData"]) {
	                window["clipboardData"].setData('text', text);
	            }
	            else {
	                var area = document.createElement('textarea');
	                area.style.display = "none";
	                document.body.appendChild(area);
	                area.value = text;
	                area.select();
	                document.execCommand('copy');
	                setTimeout(function () {
	                    document.body.removeChild(area);
	                    area = null;
	                }, 100);
	            }
	        }
	        else {
	            return text;
	        }
	    };
	    GridBase.prototype.showToast = function (options, force) {
	        this._toastManager.show(options, force, null);
	    };
	    GridBase.prototype.hideToast = function (action) {
	        this._toastManager.close();
	        action && setTimeout(action, 0);
	    };
	    GridBase.prototype.isEditing = function (index) {
	        return this._editController.editing && (!index || CellIndex_1.CellIndex.areEquals(index, this._editController.editIndex));
	    };
	    GridBase.prototype.getEditItem = function () {
	        return this._editController.editing ? this.getItem(this._editController.editIndex.itemIndex) : null;
	    };
	    GridBase.prototype.isItemEditing = function (item) {
	        item = item || this.focusedIndex.item;
	        return item && (this.itemSource instanceof EditableItemProvider_1.EditableItemProvider) && this.itemSource.isEditing(item);
	    };
	    GridBase.prototype.isItemEdited = function (item) {
	        item = item || this.focusedIndex.item;
	        return item && (this.itemSource instanceof EditableItemProvider_1.EditableItemProvider) && this.itemSource.isEdited(item);
	    };
	    GridBase.prototype.getEditValue = function (editor, index, editResult) {
	        this._doGetEditValue(index, editResult);
	    };
	    GridBase.prototype._doGetEditValue = function (index, editResult) {
	        this._fireGetEditValue(index, editResult);
	    };
	    GridBase.prototype.editorCommit = function (editor, index, oldValue, newValue) {
	        return this._doCellCommit(index, oldValue, newValue);
	    };
	    GridBase.prototype._doCellCommit = function (index, oldValue, newValue) {
	        return this._fireEditCommit(index, oldValue, newValue);
	    };
	    GridBase.prototype.editorActivated = function (editor) {
	        //this.activeTool && this.activeTool.editorActivated(editor);
	    };
	    GridBase.prototype.$_validateCell = function (index, value, inserting) {
	        try {
	            this._fireValidateCell(index, inserting, value);
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError && err.level !== Types.ValidationLevel.IGNORE) {
	                err.column = index.column;
	                throw err;
	            }
	            throw err;
	        }
	    };
	    GridBase.prototype.$_validateRow = function (item, inserting) {
	        var columns = this.getDataColumns();
	        for (var i = 0, cnt = columns.length; i < cnt; i++) {
	            var column = columns[i];
	            var index = CellIndex_1.CellIndex.temp(this, item.index, column);
	            var value = item.getData(column.dataIndex);
	            this.$_validateCell(index, value, inserting);
	        }
	        var values = item.getRowObject();
	        try {
	            this._fireValidateRow(item, inserting, values);
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError && err.level !== Types.ValidationLevel.IGNORE) {
	                throw err;
	            }
	            throw err;
	        }
	    };
	    GridBase.prototype.$_validateCellValue = function (index, value) {
	        var column = index.dataColumn;
	        try {
	            var inserting = GridItem_1.ItemState_isInserting(index.item.itemState);
	            this._validationManager.validateCell(index, inserting);
	            this.$_validateCell(index, value, inserting);
	            column.error = null;
	            column.errorLevel = Types.ValidationLevel.IGNORE;
	            var dataId = index.dataId;
	            var dataIndex = column.dataIndex;
	            var row = this._validationManager["_cellList"][dataId];
	            if (row && row[dataIndex]) {
	                delete row[dataIndex];
	            }
	            return true;
	        }
	        catch (err) {
	            if (err instanceof Validation.ValidationError) {
	                column.error = err.message || err;
	                column.errorLevel = err.level || Types.ValidationLevel.ERROR;
	                this._validationManager["_userValidations"] && this._validationManager.addInvalidateCell(index, err);
	            }
	            else {
	                throw err;
	            }
	        }
	        return false;
	    };
	    GridBase.prototype.validateCellCommit = function (index, value) {
	        // if (this.editOptions.validateOnEdited) {
	        // 	this.$_validateCellValue(index, value);
	        // }
	    };
	    GridBase.prototype.checkValidateCells = function (itemIndices, visibleOnly) {
	        return this._validationManager.checkValidateCells(itemIndices, visibleOnly);
	    };
	    GridBase.prototype.getInvalidCellList = function () {
	        return this._validationManager.getInvalidCellList();
	    };
	    GridBase.prototype.clearInvalidCellList = function () {
	        this._validationManager.clearInvalidCellList();
	    };
	    GridBase.prototype.getCellEditable = function (index) {
	        // var dataRow = index.dataRow();
	        // var column = index.column().$_hash;
	        // return this.itemSource().getCellEditable(dataRow, column);
	        return undefined;
	    };
	    GridBase.prototype.getCellReadOnly = function (index) {
	        // var dataRow = index.dataRow();
	        // var column = index.column().$_hash;
	        // return this.itemSource().getCellReadOnly(dataRow, column);
	        return false;
	    };
	    GridBase.prototype.canWrite = function (index) {
	        var can = this._editOptions.editable && this.isValid(index) && (this.visibleLayoutCount > 0)
	            && index.item.canEdit() && index.dataColumn
	            && (this._fixedOptions.rowEditable || index.itemIndex >= this._layoutManager.fixedItemCount);
	        if (can) {
	            var body = this.getBodyViewAt(index);
	            var cell = body.getCellAt(this._layoutManager, index);
	            var renderer = cell && cell.renderer2;
	            can = renderer ? renderer.canEditable() : can;
	            if (can && index.fixed) {
	                can = this._fixedOptions.editable;
	            }
	        }
	        return can;
	    };
	    GridBase.prototype.canEdit = function (index) {
	        var cellEditable = this.getCellEditable(index);
	        if (typeof cellEditable === "boolean") {
	            return this.canWrite(index) && cellEditable;
	        }
	        return this.canWrite(index) && index.dataColumn.editable;
	    };
	    GridBase.prototype.canUpdate = function (item, field) {
	        return this.editOptions.canUpdate() &&
	            (this.visibleLayoutCount > 0) && this.itemSource && this.itemSource.canUpdate(item, field);
	    };
	    GridBase.prototype.canAppend = function () {
	        var rs = this.itemSource;
	        var can = !this.isEditing() && this.editOptions.canAppend() && (this.visibleLayoutCount > 0) && rs && rs.canAppend();
	        if (can) {
	            try {
	                if (!this._fireRowInserting(rs.itemCount, -1)) {
	                    return false;
	                }
	            }
	            catch (e) {
	                alert(e.message || e);
	                return false;
	            }
	        }
	        return can;
	    };
	    GridBase.prototype.canInsert = function (item, shift, ctrl) {
	        var rs = this.itemSource;
	        var can = !this.isEditing() && this._doCanInsert(item, shift, ctrl) && this.editOptions.canInsert() && (this.visibleLayoutCount > 0) && rs && rs.canInsert(item);
	        if (can) {
	            try {
	                if (!this._fireRowInserting(item.index + (shift ? 1 : 0), -1)) {
	                    return false;
	                }
	            }
	            catch (e) {
	                alert(e.message || e);
	                return false;
	            }
	        }
	        return can;
	    };
	    GridBase.prototype._doCanInsert = function (item, shift, ctrl) {
	        return true;
	    };
	    GridBase.prototype.canDelete = function (item) {
	        var rs = this.itemSource;
	        return this.editOptions.canDelete() && (this.visibleLayoutCount > 0) &&
	            rs && (this.isItemEditing(item) || rs.canDelete(item));
	    };
	    GridBase.prototype.canCommit = function (item) {
	        return this.isItemEditing(item) && (this.isItemEdited() || this.editOptions.commitWhenNoEdit);
	    };
	    GridBase.prototype.canCancel = function (item) {
	        return this.isItemEditing(item);
	    };
	    GridBase.prototype.edit = function (index) {
	        if (!index) {
	            index = this.focusedIndex;
	        }
	        if (!this.isValid(index) || !(this.itemSource instanceof EditableItemProvider_1.EditableItemProvider)) {
	            return false;
	        }
	        if (index.dataColumn && !this.canUpdate(index.item, index.dataField)) {
	            return false;
	        }
	        return this.itemSource.edit(index.item);
	    };
	    GridBase.prototype.insertAt = function (itemIndex, shift) {
	        return this.insert(this.getItem(itemIndex), shift);
	    };
	    GridBase.prototype.insert = function (item, shift, ctrl) {
	        if (item === void 0) { item = null; }
	        if (shift === void 0) { shift = false; }
	        if (ctrl === void 0) { ctrl = false; }
	        if (!item) {
	            item = this.focusedIndex ? this.focusedIndex.item : null;
	        }
	        if (!item) {
	            return false;
	        }
	        var rs = this.itemSource;
	        if (rs instanceof EditableItemProvider_1.EditableItemProvider && this.canInsert(item, shift, ctrl)) {
	            var defaults = this.$_getInsertDefaults(null);
	            this._cancelDummy();
	            return rs.insert(item, defaults, shift, ctrl);
	        }
	        return false;
	    };
	    GridBase.prototype.append = function () {
	        var rs = this.itemSource;
	        if (rs instanceof EditableItemProvider_1.EditableItemProvider && rs.dataSource && this.canAppend()) {
	            var defaults = this.$_getInsertDefaults(null);
	            this._cancelDummy();
	            return rs.append(defaults);
	        }
	        return false;
	    };
	    GridBase.prototype._appendDummy = function () {
	        var options = this._editOptions;
	        if (options.displayEmptyEditRow && options.appendable) ;
	    };
	    GridBase.prototype._cancelDummy = function () {
	        // this._items.cancelDummy();
	    };
	    GridBase.prototype.setValueAt = function (itemIndex, field, value) {
	        var item = this.getItem(itemIndex);
	        if (item) {
	            if (item instanceof EditableItemProvider_1.EditItem) {
	                item.setData(field, value);
	            }
	        }
	    };
	    GridBase.prototype.setCellValue = function (index, value) {
	        if (this.isValid(index)) {
	            this.setValueAt(index.itemIndex, index.dataField, value);
	        }
	    };
	    GridBase.prototype.canShowEditor = function (index, attrs) {
	        if (this.isValid(index)) {
	            // this._tmpIndex.assign(index);
	            // return this._fireShowEditor(this._tmpIndex, attrs);
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.hideEditor = function () {
	        this._editController.closeList(false);
	        this._editController.hideEditor();
	    };
	    GridBase.prototype.reprepareEditor = function () {
	        this._editController.reprepareEditor(this.focusedIndex);
	    };
	    GridBase.prototype.showEditor = function (index, append, dropdown) {
	        if (append === void 0) { append = false; }
	        if (dropdown === void 0) { dropdown = false; }
	        index = index || this.focusedIndex;
	        if (this._editController.showEditor(index, dropdown)) {
	            this.activeTool.resetFocused();
	            append && this._editController.caretToLast();
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.editorButtonClicked = function (index) {
	        this._editController.buttonClicked(index);
	        this._fireEditButtonClicked(index);
	    };
	    Object.defineProperty(GridBase.prototype, "canUndo", {
	        get: function () {
	            var ds = this.dataSource;
	            return ds && ds.canUndo && !this.isItemEditing();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.undo = function () {
	        if (this.canUndo) {
	            this.dataSource.undo();
	            return true;
	        }
	        return false;
	    };
	    Object.defineProperty(GridBase.prototype, "canRedo", {
	        get: function () {
	            var ds = this.dataSource;
	            return ds && ds.canRedo && !this.isItemEditing();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.redo = function () {
	        if (this.canRedo) {
	            this.dataSource.redo();
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.execute = function (command) {
	    };
	    GridBase.prototype.clearCommandStack = function (all) {
	        this.dataSource.clearCommandStack();
	    };
	    // get 과 set은 return 과 value의 type이 동일해야 되는데. 달라서.
	    GridBase.prototype.setLookups = function (value) {
	        if (value) {
	            if (!this._lookupProvider) {
	                this._lookupProvider = new Lookup.LocalLookupSourceProvider();
	                this._lookupProvider.addListener(this);
	            }
	            this._lookupProvider.load(value);
	        }
	    };
	    GridBase.prototype.addLookupSource = function (source) {
	        var provider = this._lookupProvider || (this._lookupProvider = new Lookup.LocalLookupSourceProvider());
	        provider.add(source);
	    };
	    GridBase.prototype.removeLookupSource = function (sourceId) {
	        this._lookupProvider && this._lookupProvider.remove(sourceId);
	    };
	    GridBase.prototype.existsLookupData = function (sourceId, keys) {
	        if (sourceId && keys) {
	            var source = this._lookupProvider && this._lookupProvider.getSource(sourceId);
	            if (!source) {
	                throw "Invalid lookup source id: " + sourceId;
	            }
	            return source.exists(Utils_1.Utils.makeArray(keys));
	        }
	    };
	    GridBase.prototype.fillLookupData = function (sourceId, data) {
	        if (sourceId && data) {
	            var source = this._lookupProvider && this._lookupProvider.getSource(sourceId);
	            if (!source) {
	                throw "Invalid lookup source id: " + sourceId;
	            }
	            if (data.rows) {
	                source.fillRows(data.rows);
	            }
	            else {
	                source.fill(data.keys, data.values);
	            }
	        }
	    };
	    GridBase.prototype.clearLookupData = function (sourceId) {
	        if (sourceId) {
	            var source = this._lookupProvider && this._lookupProvider.getSource(sourceId);
	            if (!source) {
	                throw "Invalid lookup source id: " + sourceId;
	            }
	            source.clear();
	        }
	    };
	    GridBase.prototype.addLookupData = function (sourceId, keys, value) {
	        if (value === void 0) { value = null; }
	        if (sourceId && keys) {
	            keys = Utils_1.Utils.makeArray(keys);
	            var source = this._lookupProvider && this._lookupProvider.getSource(sourceId);
	            if (!source) {
	                throw "Invalid lookup source id: " + sourceId;
	            }
	            if (!value) {
	                source.addRow(keys);
	            }
	            else {
	                source.add(keys, value);
	            }
	        }
	    };
	    GridBase.prototype.setOptions = function (source) {
	        // this.sortingOptions.assignFrom(source["sortingOptions"]);
	    };
	    GridBase.prototype.doContextMenu = function (e) {
	        var target = (e.target || e.srcElement);
	        var r = this.container.getBound();
	        var x = e.clientX - r.left;
	        var y = e.clientY - r.top;
	        var menuName;
	        // TODO 
	        // context메뉴가 눌렸을때 해당 element를 사용자에게 전달 elementName이 필요.
	        // 
	        var clickCell = this.activeTool["_findTableCell"]();
	        var cellType = this.getCellType(clickCell);
	        var eltName;
	        var view, model, retName;
	        // contextMenu가 필요한곳은 몇개 안될것이다. // head/ header/ body 나중에 필요하다면 확장한다고 생각하자.
	        if (cellType) {
	            view = this.getTableView(clickCell);
	            if (cellType === Types.TableCellType.HEAD) {
	                model = this.headView.getHeadModel(clickCell);
	                menuName = model && model.popupMenuName;
	                eltName = Utils_1.Utils.getClassName(model) + "Head";
	            }
	            else if (cellType === Types.TableCellType.FOOT) {
	                model = this.footView.getFootModel(clickCell);
	                menuName = model && model.popupMenuName;
	                eltName = Utils_1.Utils.getClassName(model) + "Foot";
	            }
	            else if (cellType === Types.TableCellType.SUM) {
	                model = this.sumView.getSumModel(clickCell);
	                menuName = model && model.popupMenuName;
	                eltName = Utils_1.Utils.getClassName(model) + "Sum";
	            }
	            else if (Utils_1.Utils.included(cellType, Types.TableCellType.HEADER, Types.TableCellType.DATA, Types.TableCellType.FOOTER)) {
	                model = view && view.columnByCell(clickCell);
	                switch (cellType) {
	                    case Types.TableCellType.HEADER:
	                        menuName = model && model.header.popupMenuName;
	                        eltName = Utils_1.Utils.getClassName(model) + "Header";
	                        break;
	                    case Types.TableCellType.DATA:
	                        menuName = model && model.popupMenuName;
	                        eltName = "DataCell";
	                        break;
	                    case Types.TableCellType.FOOTER:
	                        menuName = model && model.footer.popupMenuName;
	                        eltName = Utils_1.Utils.getClassName(model) + "Footer";
	                        break;
	                }
	            }
	            else if (Utils_1.Utils.included(cellType, Types.TableCellType.INDICATOR, Types.TableCellType.STATE, Types.TableCellType.CHECK)) {
	                model = view.model;
	                menuName = model && model.popupMenuName;
	                eltName = Utils_1.Utils.getClassName(model) + "Cell";
	            }
	        }
	        // var eltName = element && element.$name ? (element.$name+"").replace("Element","") : eltName;
	        // menuName이 return 될수 있다.
	        if ((retName = this._fireContextMenuPopup(x, y, eltName)) !== false) {
	            if (typeof retName === "string") {
	                menuName = retName;
	            }
	            else if (typeof retName === "boolean" && !retName) ;
	            else {
	                menuName = menuName || this._contextMenu;
	            }
	            if (menuName) {
	                e.preventDefault();
	                var popupMenu = this._popupMenuManager.getMenu(menuName);
	                popupMenu && this._popupMenuManager.showContext(popupMenu, e, x, y, target);
	            }
	        }
	        return;
	    };
	    GridBase.prototype.setContextMenu = function (menuItems) {
	        menuItems = Utils_1.Utils.makeArray(menuItems);
	        if (menuItems) {
	            this._contextMenu = "gridContextMenu";
	            this.popupMenuManager.addMenu(this._contextMenu, menuItems, true, this);
	        }
	        else {
	            this._contextMenu = null;
	        }
	        return this.popupMenuManager.getMenu(this._contextMenu);
	    };
	    GridBase.prototype.addPopupMenu = function (name, menuItems, overwrite) {
	        if (overwrite === void 0) { overwrite = true; }
	        menuItems = Utils_1.Utils.makeArray(menuItems);
	        if (!name || !menuItems) {
	            return;
	        }
	        this.popupMenuManager.addMenu(name, menuItems, overwrite);
	    };
	    GridBase.prototype.removePopupMenu = function (name) {
	        this.popupMenuManager.removeMenu(name);
	    };
	    GridBase.prototype.setCursor = function (target, cursor) {
	        if (target) {
	            var p = this.getTableCell(target);
	            if (p) {
	                var view = this.getTableView(p);
	                if (view instanceof GridElement_1.VisualObjectElement) {
	                    view.setCursor(cursor);
	                    return;
	                }
	            }
	        }
	        this._container.setCursor(cursor);
	    };
	    GridBase.prototype.canMoveIndex = function (index) {
	        var lm = this.layoutManager;
	        return this.fixedOptions.movable || (index >= lm.fixedLayoutCount && index < lm.rightFirstLayout);
	    };
	    GridBase.prototype.canMoveToIndex = function (index) {
	        var lm = this.layoutManager;
	        return this._fixedOptions.movable || (index >= lm.fixedLayoutCount && index < lm.rightFirstLayout);
	    };
	    GridBase.prototype.getEditCellValue = function () {
	        return this._editController.editValue;
	    };
	    GridBase.prototype.setEditCellValue = function (value, startEdit, dropDown) {
	        if (this.isEditing || startEdit) {
	            this._editController.setEditValue(value, dropDown);
	        }
	    };
	    GridBase.prototype.isCheckable = function (itemIndex) {
	        var item = this.getItem(itemIndex);
	        return item && item.checkable;
	    };
	    GridBase.prototype.setCheckable = function (itemIndex, value) {
	        var item = this.getItem(itemIndex);
	        item && item.setCheckable(value);
	    };
	    GridBase.prototype.isCheckedItem = function (itemIndex) {
	        var item = this.getItem(itemIndex);
	        return item && item.checked;
	    };
	    GridBase.prototype.isCheckedRow = function (dataRow) {
	        var item = this._items.getItemOfRow(dataRow, true);
	        return item && item.checked;
	    };
	    GridBase.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent) {
	        var groupCheckable = this._checkBar.showGroup;
	        this._items.checkAll(checked, visibleOnly, checkableOnly, checkEvent, groupCheckable);
	    };
	    GridBase.prototype.checkItem = function (itemIndex, checked, exclusive, checkEvent) {
	        var item = this.getItem(itemIndex);
	        item && this._items.checkItem(item, checked, exclusive, checkEvent);
	    };
	    GridBase.prototype.checkRow = function (dataRow, checked, exclusive, checkEvent) {
	        var item = this.getItemOfRow(dataRow, true);
	        item && this._items.checkItem(item, checked, exclusive, checkEvent);
	    };
	    GridBase.prototype.checkItems = function (itemIndicies, checked, checkEvent) {
	        var items = this._items.getItemsByIndices(itemIndicies);
	        this._items.checkItems(items, checked, checkEvent);
	    };
	    GridBase.prototype.checkRows = function (dataRows, checked, checkEvent) {
	        var items = this._items.getItemsByRows(dataRows, true);
	        this._items.checkItems(items, checked, checkEvent);
	    };
	    GridBase.prototype.setAllCheck = function (checked, itemChecked) {
	        this._headView.allChecked = checked;
	        if (itemChecked) {
	            var checkBar = this.checkBar;
	            this.checkAll(checked, checkBar.visibleOnly, checkBar.checkableOnly, false);
	        }
	    };
	    Object.defineProperty(GridBase.prototype, "allChecked", {
	        get: function () {
	            return this._headView.allChecked;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.resetCheckables = function () {
	    };
	    GridBase.prototype.applyCheckables = function () {
	    };
	    GridBase.prototype.registerCustomRenderer = function (type, renderer) {
	        this._delegate.addCustomRenderer(type, renderer);
	    };
	    GridBase.prototype.unregisterCustomRenderer = function (type) {
	        this._delegate.removeCustomRenderer(type);
	    };
	    GridBase.prototype.unregisterAllCustomRenderer = function () {
	        this._delegate.clearCustomRenderers();
	    };
	    GridBase.prototype.getValueAt = function (layout, itemIndex) {
	        var item = this.getItem(itemIndex);
	        var col = layout.firstColumn;
	        if (col instanceof GridColumn_1.DataColumn) {
	            return item && item.getData(col.dataIndex);
	        }
	    };
	    GridBase.prototype.getDisplayText = function (index) {
	        var col = index.dataColumn;
	        if (col) {
	            var fld = col.dataIndex;
	            if (fld >= 0) {
	                var item = index.item;
	                if (item instanceof GridItem_1.GridRow) {
	                    var v = item.getData(fld);
	                    if (col instanceof GridColumn_1.SeriesColumn) {
	                        return GridCell_1.SeriesCell.getText(v, null);
	                    }
	                    else {
	                        var f = this._body.getCellFormatters(col, null, this._formatOptions);
	                        return GridCell_1.DataCell["_getDisplayText"](this, index, v, f);
	                    }
	                }
	                else if (item instanceof GridItem_1.GroupFooter) {
	                    var v = RowGroup_1.RowGroupFooterCell.getValue(item, col);
	                    return RowGroup_1.RowGroupFooterCell["$_displayText"](item, col, v);
	                }
	            }
	        }
	        return '';
	    };
	    /**
	     * 1. 컬럼의 모든 데이터셀의 값을 가져와서
	     * 2. 컬럼의 format, prefix, suffix을 반영한 텍스트의 길이를 계산해서
	     * 3. 가장 큰 길이의 텍스트 너비로 설정한다.
	     * 4. lookup이 설정되면 lookup label을 사용한다.
	     * 5. layout의 보정 너비를 추가한다.
	     * 6. layout의 minWidth, maxWidth 범위에 들어가게 한다.
	     * 7. 컬럼 헤더의 너비나, 그룹헤더만 있는 경우 그룹헤더 너비보다 좁지 않게 한다.
	     */
	    GridBase.prototype.fitLayoutWidth = function (layout) {
	        var rs = this.itemSource;
	        var index = this.getIndex(0, layout.firstColumn);
	        var header = layout.firstColumn.header;
	        var s = "";
	        var s2 = "";
	        var len = 0;
	        var w = 0;
	        for (var r = 0, cnt = rs.itemCount; r < cnt; r++) {
	            index.itemIndex = r;
	            s2 = this.getDisplayText(index);
	            if (s2.length > len) {
	                len = s2.length;
	                s = s2;
	            }
	        }
	        //if (header.visible) {
	        s2 = header.displayText;
	        if (s2.length > len) {
	            s = s2;
	        }
	        //}
	        if (len > 0) {
	            // TODO: 아래처럼 해볼 수 있다.
	            // 1. 평균 너비를 갖는 문자를 택한다.
	            // 2. 길이만큼 알파벳 대소문자를 골고룰 배치한다.
	            // 3. 모든 행 텍스트에 대해 measureText() 한다. (성능?)
	            s += "W";
	            w = this.container.measureText("rg-data-cell", s);
	        }
	        layout.cellWidth = w;
	        return w;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridBase.prototype._getCssSelector = function () {
	        return "";
	    };
	    Object.defineProperty(GridBase.prototype, "container", {
	        get: function () {
	            return this._container;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype._createDelegate = function () {
	        return new GridDelegate_1.GridDelegate(this);
	    };
	    GridBase.prototype._createLayoutManager = function () {
	        return new GridLayoutManager_1.GridLayoutManager(this);
	    };
	    GridBase.prototype._createEditController = function () {
	        //return _isMobile() ? new MobileEditController(this) : new DefaultEditController(this);
	        return new EditControllers.DefaultEditController(this);
	    };
	    GridBase.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.setProperty("overflow", "hidden", "important");
	    };
	    GridBase.prototype.setRect = function (r) {
	        var changed = r.width != this.width || r.height != this.height;
	        _super.prototype.setRect.call(this, r);
	        // TODO: Container 크기 변경 시 그리드 크기가 변경되지 않는 문제.
	        changed && (this["_dirty"] = true);
	    };
	    GridBase.prototype._doDraw = function (element) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridBase.prototype.$_activate = function () {
	        this._container.activeTool = this._container.defaultTool;
	    };
	    GridBase.prototype.$_deactivate = function () {
	    };
	    GridBase.prototype._doCreateOtherElements = function () {
	    };
	    GridBase.prototype._createSidePane = function () {
	        return null;
	    };
	    GridBase.prototype.isSidePaneVisible = function () {
	        return false;
	    };
	    GridBase.prototype._createBodyView = function (body) {
	        return new GridBodyElement_1.GridBodyElement(body);
	    };
	    GridBase.prototype._createFixedBodyView = function (body) {
	        return new GridBodyElement_1.FixedBodyElement(body);
	    };
	    GridBase.prototype._createRightBodyView = function (body) {
	        return new GridBodyElement_1.RightBodyElement(body);
	    };
	    GridBase.prototype._createGridPanel = function () {
	        return null;
	    };
	    GridBase.prototype._createGridFooter = function () {
	        return new GridFooter_1.GridFooter(this);
	    };
	    GridBase.prototype._initStyles = function () {
	    };
	    GridBase.prototype._columnsReset = function () {
	        this._resetColumnIndices();
	        this._activeCellLayout["_columnsChanged"](this._columns);
	        this._columnsDirty = true;
	    };
	    GridBase.prototype._columnVisibleChanged = function (column) {
	        this._activeCellLayout["_columnChanged"](column);
	    };
	    GridBase.prototype._resetColumnIndices = function (column) {
	        if (column === void 0) { column = null; }
	        if (column) {
	            column["_resetIndices"](this);
	        }
	        else {
	            this._columns.resetIndices();
	        }
	        this.clearSelection();
	    };
	    GridBase.prototype._resetColumnSortStates = function () {
	        this._columns.resetSortStates();
	    };
	    GridBase.prototype._cleanGridObjects = function () {
	        for (var i = 0, cnt = this._gridObjects.length; i < cnt; i++) {
	            this._gridObjects[i].clean();
	        }
	        //this._stylesDirty = false;
	    };
	    GridBase.prototype._visualObjectChanged = function (object) {
	        this.invalidateLayout();
	    };
	    GridBase.prototype.$_summaryModeChanged = function () {
	        this._doSummaryModeChanged();
	    };
	    GridBase.prototype._doSummaryModeChanged = function () {
	    };
	    GridBase.prototype._addGridObject = function (obj) {
	        this._gridObjects.push(obj);
	    };
	    GridBase.prototype.addElement = function (view) {
	        this._rootElement.addChild(view);
	    };
	    // GridContainer에서 호출한다!
	    GridBase.prototype.$_prepareRender = function (bounds) {
	        this._doPrepareRender(bounds);
	    };
	    GridBase.prototype._doPrepareRender = function (bounds) {
	        if (this._horzScrolled) {
	            try {
	                var lm = this._layoutManager;
	                lm.setLeftPos(bounds, this._leftPos);
	                this._leftPos = lm.leftPos;
	                this.$_updateScrollBars(lm);
	                this._layoutSelectionViews();
	                this._editController.resetEditor(false);
	                this.container.defaultTool.layoutChanged();
	            }
	            finally {
	                this._horzScrolled = false;
	            }
	        }
	    };
	    // GridContainer에서 호출한다!
	    GridBase.prototype.$_layout = function (bounds) {
	        this._doLayout(bounds);
	    };
	    GridBase.prototype._doLayout = function (bounds) {
	        var lm = this._layoutManager;
	        this._resetting = false;
	        try {
	            this.$_doLayout(lm, bounds);
	        }
	        finally {
	            this._loading = false;
	        }
	        if (this._emptyView.visible = (this.empty && this._displayOptions.showEmptyMessage)) {
	            var r = lm.contentBounds;
	            r.topBy(lm.headerBounds.bottom);
	            this._emptyView.setBounds(0, r.y, this.width, r.height);
	        }
	        this._horzScrolled = false;
	        this._cleanGridObjects();
	        if (this._columnsDirty) {
	            this._columnsDirty = false;
	            this._activeCellLayout.cleanColumns();
	            //this._rootColumn.clean();
	        }
	        this.$_checkCurrentRow();
	        this._editController.prepareEditor(this.focusedIndex);
	        //if (this._cellLayoutDirty) {
	        this._cellLayoutDirty = false;
	        this.container.defaultTool.layoutChanged();
	        //}
	    };
	    GridBase.prototype.$_doLayout = function (lm, bounds) {
	        var r = bounds.clone();
	        var sw = this._displayOptions.vscrollBar ? this._scrollBarWidth : 0;
	        var sh = this._displayOptions.hscrollBar ? this._scrollBarHeight : 0;
	        var fixedCols = this.$_fixedColCount = this._fixedOptions.colCount;
	        var rfixedCols = this.$_rfixedColCount = this._fixedOptions.rightCount;
	        this.$_editOptionsWritable = this._editOptions.isWritable();
	        this.$_fixedRowEditable = this._fixedOptions.rowEditable;
	        this.$_fixedColEditable = this._fixedOptions.editable;
	        this._body["_prepareUpdate"]();
	        this._activeCellLayout["$_refresh"](this._columns, this._displayOptions.minCellWidth);
	        this._activeCellLayout["$_prepareLayout"](this, fixedCols, rfixedCols);
	        lm.measure(r, this._leftPos, this._topIndex, sw, sh);
	        var leftPos = this._leftPos = lm.leftPos;
	        var topIndex = this._topIndex = lm.topIndex;
	        lm.layout(r);
	        this.$_updateScrollBars(lm, r);
	        this._layoutSelectionViews();
	        this._layouted = true;
	        this._editController.resetEditor(false);
	        this.container.defaultTool.layoutChanged();
	        // TODO 그리드 zoom에 대해서 처리해야 한다.
	        /*
	        browser의 크기가 변경되면 focus의 위치가 browser가 그리는 것과 일치하지 않은 현상을 보정하기 위해서 그 비율을 가지고 있어야 한다.
	        
	        const ratio: number = window.devicePixelRatio;
	        // TODO 현재 보이는 itemCount만 필요.
	        if (this._currentRatio !== ratio && this.itemCount > 0 && this._chkCount !== this.itemCount) {
	            // 실제 dataTable크기.
	            const lm: GridLayoutManager = this.layoutManager;
	            const h1 = this._bodyView["_table"].getBoundingClientRect().height;
	            const h2 = lm["_itemPoints"][lm["_itemPoints"].length - 1];
	            this._zoomRatio = h1 / h2;
	            this._currentRatio = ratio;
	        }
	        */
	    };
	    GridBase.prototype._columnCheckedChanged = function (column) {
	        //console.log("COLUMN CHECEKD: " + column.checked)
	        this._fireColumnCheckedChanged(column);
	    };
	    GridBase.prototype.$_getVertScrollMax = function () {
	        if (this._vscrollBar && this._vscrollBar.visible) {
	            return this._vscrollBar.maxPosition;
	        }
	        return 0;
	    };
	    GridBase.prototype.$_updateScrollBars = function (lm, r) {
	        if (lm.hscrollBar) {
	            var hMax = lm.bodyBounds.width;
	            var hPage = Math.min(lm.scrollWidth);
	            this._hscrollBar.setProperties(0, hMax, hPage);
	            this._hscrollBar.setPosition(lm.leftPos);
	            this._hscrollBar.visible = true;
	        }
	        else if (this._hscrollBar) {
	            this._hscrollBar.setProperties(0, 0, 0);
	            this._hscrollBar.setPosition(0);
	            this._hscrollBar.visible = false;
	        }
	        if (lm.vscrollBar) {
	            var itemCount = this.itemCount;
	            var vMax = itemCount - lm.fixedItemCount;
	            var vPage = Math.min(lm.fullItemCount, itemCount - lm.topIndex);
	            this._vscrollBar.setProperties(0, vMax, vPage);
	            this._vscrollBar.setPosition(lm.topIndex);
	            this._vscrollBar.visible = true;
	        }
	        else if (this._vscrollBar) {
	            this._vscrollBar.setProperties(0, 0, 0);
	            this._vscrollBar.setPosition(0);
	            this._vscrollBar.visible = false;
	        }
	        //this._container && (this._container.defaultTool as GridTool).layoutChanged();
	        if (r) {
	            this._layoutScrollBars(lm, r);
	        }
	    };
	    GridBase.prototype._layoutScrollBars = function (lm, r) {
	        //this._scrollLayer.setBounds(r.x, r.y, r.width, r.height);
	        var sw = this._displayOptions.vscrollBar ? this._scrollBarWidth : 0;
	        var sh = this._displayOptions.hscrollBar ? this._scrollBarHeight : 0;
	        var hbar = this._hscrollBar;
	        var vbar = this._vscrollBar;
	        if (lm.hscrollBar) {
	            hbar.setBounds(r.x, r.bottom - sh, r.width - (lm.vscrollBar ? sw : 0), sh);
	            hbar.layoutContent();
	        }
	        if (lm.vscrollBar) {
	            vbar.setBounds(r.right - sw, r.y, sw, r.height - (lm.hscrollBar ? sh : 0));
	            vbar.layoutContent();
	        }
	        if (this._scrollEdge.visible = lm.vscrollBar && lm.hscrollBar) {
	            this._scrollEdge.setBounds(r.right - sw, r.bottom - sh, sw, sh);
	        }
	    };
	    GridBase.prototype._columnMergeRuleChanged = function (layout) {
	        this._populateMerges();
	        this.refreshView();
	    };
	    GridBase.prototype._canMerge = function () {
	        return false;
	    };
	    GridBase.prototype._populateMerges = function () {
	        if (!this._canMerge()) {
	            return;
	        }
	        var columns = this.getHorzColumns();
	        for (var i = 0, cnt = columns.length; i < cnt; i++) {
	            var col = columns[i];
	            var layout = col && col.layout;
	            if (layout && layout.canMerge()) {
	                var merges = layout["_merges"];
	                if (!merges) {
	                    merges = new ColumnMerge.ColumnMergeManager(layout);
	                    layout["_merges"] = merges;
	                }
	                merges.clear();
	                if (col instanceof GridColumn_1.DataColumn && col.mergeGrouped) {
	                    var level = this.getGroupLevel(col.dataIndex);
	                    if (level > 0) {
	                        merges.initialize(ColumnMerge.RowGroupMergeRule.INIT_COUNT);
	                    }
	                }
	                else {
	                    merges.initialize(ColumnMerge.ColumnMergeRule.INIT_COUNT);
	                }
	            }
	        }
	    };
	    GridBase.prototype._doRowGroupMergeModeChanged = function () {
	    };
	    GridBase.prototype._addSelectionView = function (item) {
	        this._selectionLayer.addView(item);
	    };
	    GridBase.prototype._clearSelectionViews = function () {
	        this._selectionLayer.clearViews();
	    };
	    GridBase.prototype._layoutSelectionViews = function () {
	        if (!this._layouted || this._resetting) {
	            return;
	        }
	        this._selectionLayer.layout();
	    };
	    GridBase.prototype.$_layoutRowBlock = function () {
	        var options = this.displayOptions;
	        if (options.rowBlockType != Types.RowMaskType.NONE) {
	            var cb = options.rowBlockType;
	        }
	    };
	    GridBase.prototype.$_checkCurrentRow = function (force) {
	        if (force === void 0) { force = false; }
	        if (this._focusedIndex) {
	            var id = this._focusedIndex.dataId;
	            var row_1 = this._focusedIndex.dataRow;
	            if (force || (id != this._currentRowId)) {
	                clearTimeout(this._rowChangeTimer);
	                var tool_1 = this.activeTool;
	                var oldRow_1 = this._currentRow;
	                var delay = this._displayOptions.rowChangeDelay;
	                var needFire = force || delay <= 0;
	                this._currentRowId = id;
	                this._currentRow = row_1;
	                if (needFire) {
	                    this._fireCurrentRowChanged(oldRow_1, row_1);
	                    tool_1.currentRowChanged(oldRow_1, row_1);
	                }
	                else if (delay > 0) {
	                    this._rowChangeTimer = setTimeout(function () {
	                        this._fireCurrentRowChanged(oldRow_1, row_1);
	                        tool_1.currentRowChanged(oldRow_1, row_1);
	                    }.bind(this), delay);
	                }
	                return true;
	            }
	        }
	        return false;
	    };
	    GridBase.prototype.$_doSetFocusedIndex = function (value, select, focus) {
	        var view;
	        var cell;
	        if (!value) {
	            return false;
	        }
	        if (!this.isValid(value)) {
	            value = value.clone();
	            value.normalize(this);
	        }
	        if (!this.isValid(value)) {
	            var ds = this.dataSource;
	            if (!ds || ds.rowCount == 0 || this.itemCount == 0) {
	                this._focusedIndex.itemIndex = -1;
	                this._focusedIndex.layout = this.getFirstLayout();
	            }
	            // if (ds && ds.rowCount > 0 && this.itemCount > 0) {
	            // } else {
	            // 	return false;	
	            // }
	            return false;
	        }
	        if (CellIndex_1.CellIndex.areEquals(value, this._focusedIndex)) {
	            return true;
	        }
	        var options = this._editOptions;
	        var oldIndex = this._focusedIndex.clone();
	        if (!this._fireCurrentChanging(oldIndex, value)) {
	            return false;
	        }
	        // if (this._changingMode === ChangingMode.BEFORE_EDITCOMMIT && !this._fireCurrentChanging(oldIndex, value)) {
	        //     return false;
	        // }
	        var rs = this.itemSource;
	        var tool = this.container.activeTool;
	        var lm = this.layoutManager;
	        if (!this._editController.focusedIndexChanging()) {
	            return false;
	        }
	        // if (this._changingMode === ChangingMode.NORMAL && !this._fireCurrentChanging(oldIndex, value)) {
	        //     return false;
	        // }
	        var item = oldIndex.item;
	        if (rs && value.itemIndex != oldIndex.itemIndex) {
	            try {
	                if (item) {
	                    switch (item.itemState) {
	                        case GridItem_1.ItemState.INSERTING:
	                            if (!this.commit(options.forceInsert, true)) {
	                                this.cancel(true);
	                                return false;
	                            }
	                            break;
	                        case GridItem_1.ItemState.APPENDING:
	                            if (!this.commit(options.forceAppend, true)) {
	                                this.cancel(true);
	                                return false;
	                            }
	                            break;
	                        case GridItem_1.ItemState.UPDATING:
	                            if (!this.commit(this.isEditing() && options.commitWhenNoEdit, true)) {
	                                this.cancel(true);
	                                return false;
	                            }
	                            break;
	                    }
	                }
	            }
	            catch (err) {
	                if (err instanceof Validation.ValidationError) {
	                    err = this._fireValidationFail(item.index, err.column, err);
	                    err ? alert(options.showOnlyValidationMessage && err.userMessage ? err.userMessage : err.toString()) : null;
	                    return false;
	                }
	                if (err instanceof Validation.AbortError) {
	                    return false;
	                }
	                throw err;
	            }
	        }
	        else if (item && this.isItemEditing(item) && options.validateOnExit) {
	            // this.$_validateCellValue(oldIndex, oldIndex.value);
	            this.invalidateLayout();
	        }
	        tool.focusedIndexChanging(value);
	        if (this.isValid(oldIndex)) ;
	        this._focusedIndex.assign(value);
	        // TODO oldIndex에대한 refresh 필요. editButton/cellButton등 처리 필요.
	        if (this.isValid(oldIndex)) {
	            view = lm.getBodyView(oldIndex);
	            cell = view.getCellAt(lm, oldIndex);
	            view["$_focusChanged"](this, cell, false);
	        }
	        // TODO 어디서 처리하는지 몰라서 일단 여기에 수정 필요.
	        view = lm.getBodyView(value);
	        cell = view.getCellAt(lm, value);
	        view["$_focusChanged"](this, cell, true);
	        if (rs instanceof EditableItemProvider_1.EditableItemProvider) {
	            rs.setDiffs(this._editOptions.checkDiff, this._editOptions.checkCellDiff, this._editOptions.strictDiff);
	        }
	        // TODO: new index가 화면 범위에 있어서 invalidLayout을 호출하지 않을 때는 마지막을 true로 지정해야 한다!
	        this._editController.focusedIndexChanged(oldIndex, value, false);
	        tool.focusedIndexChanged(oldIndex, value);
	        if (this.isValid(this._focusedIndex)) ;
	        if (select) {
	            this.clearSelection();
	        }
	        if (this.isValid(this._focusedIndex)) {
	            if (this._rowIndicatorView.visible) {
	                this._rowIndicatorView.refresh(this);
	            }
	            if (this._headerView.visible) {
	                this._headerView.refresh(this);
	            }
	            if (this._fixedHeaderView.visible) {
	                this._fixedHeaderView.refresh(this);
	            }
	            if (this._rightHeaderView.visible) {
	                this._rightHeaderView.refresh(this);
	            }
	        }
	        var force = !CellIndex_1.CellIndex.areEquals(this._focusedIndex, lm["_prevFocused"]);
	        if (focus || force) {
	            if (!this.$_makeFocusIndexVisible()) {
	                this._editController.resetEditor(false);
	                this._editController.prepareEditor(this.focusedIndex);
	            }
	        }
	        this._fireCurrentChanged(this._currentIndex.assign(this._focusedIndex));
	        // this.isValid(oldIndex) && oldIndex.item() instanceof GridRow && this.$_refreshRow(oldIndex._itemIndex);
	        // this.isValid(this._focusedIndex) && this._focusedIndex.item() instanceof GridRow && this.$_refreshRow(this._focusedIndex._itemIndex);
	        if (!this.$_checkCurrentRow()) ;
	        return true;
	    };
	    GridBase.prototype.$_makeFocusIndexVisible = function () {
	        return this.makeCellVisible(this._focusedIndex);
	    };
	    GridBase.prototype.makeCellVisible = function (index) {
	        if (this.isValid(index) || index && index.column) {
	            this.layoutManager.makeCellVisible(index);
	            if (!this.layoutManager.focusIsVisible()) {
	                this.invalidateLayout();
	                return true;
	            }
	            else {
	                this.layoutManager.clearFocusRequest();
	            }
	        }
	        return false;
	    };
	    GridBase.prototype.makeColumnVisible = function (column) {
	        if (column) {
	            var index = this.getIndex(this._focusedIndex ? this._focusedIndex.itemIndex : -1, column);
	            this.makeCellVisible(index);
	        }
	    };
	    GridBase.prototype.makeItemVisible = function (itemIndex) {
	        if (itemIndex >= 0) {
	            var index = this.getIndex(itemIndex, this._focusedIndex && this._focusedIndex.layout);
	            this.makeCellVisible(index);
	        }
	    };
	    GridBase.prototype.makeLayoutVisible = function (layout) {
	        if (layout) {
	            var index = this.getIndex(this._focusedIndex ? this._focusedIndex.itemIndex : -1, layout);
	            this.makeCellVisible(index);
	        }
	    };
	    GridBase.prototype.cancelEditor = function (hideEditor) {
	        hideEditor = arguments.length > 0 ? hideEditor : true;
	        this._editController.cancelEditor(hideEditor);
	    };
	    GridBase.prototype.itemEditCancel = function () {
	        //return this._fireItemEditCancel(this._itemProvider._editingItem);
	        return true;
	    };
	    GridBase.prototype.cancel = function (focus) {
	        if (focus === void 0) { focus = false; }
	        var editController = this.editController;
	        if (this.isEditing()) {
	            editController.cancelEditor(true);
	            editController.invalidateEditor();
	        }
	        var index = this.focusedIndex;
	        var rs = this.itemSource;
	        if (this.isValid(index) && rs.isEditing(index.item)) {
	            var dataId = index.dataId;
	            index = index.clone();
	            rs.cancel();
	            // if (this._validationManager._userValidations && dataId > -1) {
	            // 	this._validationManager.checkValidateCells(index.itemIndex());
	            // 	this._setColumnErrors(index.item());
	            // }
	            editController["_prepareEditor"](editController["_editIndex"]); // insert/append중인경우 editor에 값이 없다. 이것을 다시 채워준다.
	            index.normalize(this);
	            this.setFocusedIndex(index);
	            if (focus) {
	                this.$_makeFocusIndexVisible();
	            }
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.commitEditor = function (hideEditor) {
	        if (hideEditor === void 0) { hideEditor = true; }
	        this.editController.commitEditor(hideEditor, false);
	    };
	    GridBase.prototype.commit = function (force, raiseFailError) {
	        if (raiseFailError === void 0) { raiseFailError = false; }
	        var index = this.focusedIndex;
	        if (!this.isValid(index)) {
	            return false;
	        }
	        var rs = Utils_1.Utils.cast(this.itemSource, EditableItemProvider_1.EditableItemProvider);
	        if (!rs) {
	            return false;
	        }
	        if (this.isEditing()) {
	            this.editController.commitEditor(true, false);
	            this.editController.invalidateEditor();
	        }
	        var item = index.item;
	        if (rs.isEditing(item) && (force || rs.isEdited(item))) {
	            var inserting = GridItem_1.ItemState_isInserting(item.itemState);
	            // try {
	            // 	this._validationManager.validateRow(item, inserting);
	            // 	this.$_validateRow(item, inserting);
	            // } catch (err) {
	            // 	if (err instanceof ValidationError && err.column && err.column.setError) {
	            // 		err.column.setError(err.message || err);
	            // 		err.column.setErrorLevel(err.level || ValidationLevel.ERROR);
	            // 	}
	            // 	throw err;
	            // }
	            if (!rs.commit()) {
	                if (raiseFailError) {
	                    throw new Validation.AbortError("Commit failed.");
	                }
	                return false;
	            }
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.editorCancel = function (editor, index) {
	        //this._doCellCancel(index);
	    };
	    GridBase.prototype.editorCanceled = function () {
	        this.activeTool.resetFocused();
	    };
	    GridBase.prototype._editorStarted = function (editor, index) {
	        if (this.edit(index)) ;
	    };
	    GridBase.prototype._editorChange = function (editor, index, value) {
	        this._fireEditChange(index, value); //, text);
	    };
	    GridBase.prototype._editorSearch = function (editor, index, text) {
	        // this._fireEditSearch(index, text);
	    };
	    GridBase.prototype._searchCellButtonClick = function (editor, index, text) {
	        // return this._fireSearchCellButtonClick(index, text);
	        return true;
	    };
	    GridBase.prototype.$_getFieldDefaults = function (ds) {
	        function getDefault(grid, dataIndex) {
	            for (var i = 0; i < grid.columnCount; i++) {
	                var column = grid.getColumn(i);
	                if (column instanceof GridColumn_1.DataColumn && column.dataIndex == dataIndex) {
	                    var field = column.getField();
	                    var value = field && field.defaultValue;
	                    return value;
	                }
	            }
	            return undefined;
	        }
	        var flds = this.dataSource.fieldCount;
	        var values = [];
	        for (var i = 0; i < flds; i++) {
	            values.push(undefined);
	        }
	        for (var i = 0; i < flds; i++) {
	            var value = getDefault(this, i);
	            value && (values[i] = value);
	        }
	        return values;
	    };
	    GridBase.prototype.$_getColumnDefaults = function (defaults) {
	        for (var i = 0, cnt = this.columnCount; i < cnt; i++) {
	            var column = this.getColumn(i);
	            if (column instanceof GridColumn_1.DataColumn) {
	                var defValue = column.defaultValue;
	                defValue != null && (defaults[column.dataIndex] = column.defaultValue);
	            }
	        }
	    };
	    GridBase.prototype.$_getItemDefaults = function (item, defaults) {
	    };
	    GridBase.prototype.$_readDefaultValues = function (defaults) {
	    };
	    GridBase.prototype.$_getInsertDefaults = function (item) {
	        var defaults = this.$_getFieldDefaults(this.itemSource.dataSource);
	        this.$_getColumnDefaults(defaults);
	        this.$_getItemDefaults(null, defaults);
	        this.$_readDefaultValues(defaults);
	        return defaults;
	    };
	    GridBase.prototype._clearColumnErrors = function () {
	        // function clearErrors(group) {
	        // 	for (var i = 0, cnt = group.count(); i < cnt; i++) {
	        // 		var dc = group.getItem(i);
	        // 		if (dc instanceof DataColumn) {
	        // 			dc.setError(null);
	        // 		} else if (dc instanceof ColumnGroup) {
	        // 			clearErrors(dc);
	        // 		}
	        // 	}
	        // }
	        // clearErrors(this._rootColumn);
	    };
	    GridBase.prototype._setColumnErrors = function (item) {
	        // function setErrors(errData, group) {
	        // 	for (var i = 0, cnt = group.count(); i < cnt; i++) {
	        // 		var dc = group.getItem(i);
	        // 		if (dc instanceof DataColumn) {
	        // 			var err = errData[dc.dataIndex()];
	        // 			if (err) {
	        // 				dc.setError(err.message);
	        // 				dc.setErrorLevel(err.level)
	        // 			}
	        // 		} else if (dc instanceof ColumnGroup) {
	        // 			setErrors(errData, dc);
	        // 		}
	        // 	}
	        // }
	        // var errData = this._validationManager._validateCellList && this._validationManager._validateCellList[item.dataId()];
	        // if (!errData) {return}
	        // setErrors(errData, this._rootColumn);
	    };
	    //* Sort */
	    GridBase.prototype.sortColumn = function (column, event) {
	        if (column) {
	            if (this.sortingOptions.style == Types.SortStyle.EXCLUSIVE) {
	                (event && event.shiftKey) ? this.sortColumnWithStyle(Types.SortStyle.INCLUSIVE, column) : this.sortColumnWithStyle(Types.SortStyle.EXCLUSIVE, column);
	            }
	            else {
	                this.sortColumnWithStyle(this.sortingOptions.style, column);
	            }
	        }
	    };
	    GridBase.prototype.sortColumnWithStyle = function (sortStyle, column) {
	        if (!column) {
	            throw new Error("column is null");
	        }
	        if (this.isItemEditing(null) || column.dataIndex < 0) {
	            return;
	        }
	        var sortCase = this._sortingOptions.textCase;
	        if (sortStyle == Types.SortStyle.EXCLUSIVE) {
	            if (column.sortOrder < 0) {
	                this.orderBy([column], [Types.SortDirection.ASCENDING], [sortCase]);
	            }
	            else if (column.sortDirection == Types.SortDirection.ASCENDING) {
	                this.orderBy([column], [Types.SortDirection.DESCENDING], [sortCase]);
	            }
	            else if (this.isGroupedColumn(column) && this.itemSource["_groupSorting"]) {
	                this.orderBy([column], [Types.SortDirection.ASCENDING], [sortCase]);
	            }
	            else {
	                this.unsortColumnWithStyle(sortStyle, column);
	            }
	        }
	        else if (sortStyle == Types.SortStyle.INCLUSIVE || sortStyle == Types.SortStyle.REVERSE) {
	            if (column.sortOrder < 0) {
	                this.$$_addSort(column, Types.SortDirection.ASCENDING, sortCase, sortStyle == Types.SortStyle.REVERSE);
	            }
	            else if (column.sortDirection == Types.SortDirection.ASCENDING) {
	                this.$$_addSort(column, Types.SortDirection.DESCENDING, sortCase, sortStyle == Types.SortStyle.REVERSE);
	            }
	            else if (this.isGroupedColumn(column) && this.itemSource["_groupSorting"]) {
	                this.$$_addSort(column, Types.SortDirection.ASCENDING, sortCase, sortStyle == Types.SortStyle.REVERSE);
	            }
	            else {
	                this.unsortColumnWithStyle(sortStyle, column);
	            }
	        }
	    };
	    GridBase.prototype.orderBy = function (columns, directions, textCases) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        if (!columns || columns.length < 1) {
	            // this.setLabelComparer(labelComparer);
	            this._sortItems([], [], []);
	        }
	        else {
	            var flds = [];
	            var cnt = columns.length;
	            var column;
	            for (var i = 0; i < cnt; i++) {
	                column = columns[i];
	                flds.push(column.dataIndex);
	                // if (column.isSortByLabel() && column.isLookupDisplay()) {
	                //     labelComparer[column.dataIndex()] = new ColumnLabelComparer(column);
	                // };
	            }
	            // this.setLabelComparer(labelComparer);
	            this._sortItems(flds, directions, textCases);
	        }
	    };
	    GridBase.prototype.unsortColumnWithStyle = function (sortStyle, column) {
	        if (this.isItemEditing() || !column) {
	            return;
	        }
	        var flds = this.getSortFields();
	        var dirs = this.getSortDirections();
	        var cases = this.getSortCases();
	        var idx = flds.indexOf(column.dataIndex);
	        // const labelComparer = this.getLabelComparer();
	        if (idx < 0) {
	            return;
	        }
	        if (sortStyle == Types.SortStyle.EXCLUSIVE) {
	            this.orderBy([], [], []);
	        }
	        else if (sortStyle == Types.SortStyle.INCLUSIVE || sortStyle == Types.SortStyle.REVERSE) {
	            flds.splice(idx, 1);
	            dirs.splice(idx, 1);
	            cases.splice(idx, 1);
	            // delete labelComparer[column.dataIndex()]
	            this._sortItems(flds, dirs, cases);
	        }
	    };
	    GridBase.prototype.$$_addSort = function (column, sortDirection, sortCase, reverse) {
	        var flds = this.getSortFields();
	        var dirs = this.getSortDirections();
	        var cases = this.getSortCases();
	        var dataIndex = column.dataIndex;
	        var idx = flds.indexOf(dataIndex);
	        // var labelComparer = this.getLabelComparer();
	        if (idx >= 0) {
	            dirs[idx] = sortDirection;
	            cases[idx] = sortCase;
	        }
	        else if (reverse) {
	            flds.splice(0, 0, dataIndex);
	            dirs.splice(0, 0, sortDirection);
	            cases.splice(0, 0, sortCase);
	        }
	        else {
	            flds.push(dataIndex);
	            dirs.push(sortDirection);
	            cases.push(sortCase);
	        }
	        // if (column.isSortByLabel() && column.isLookupDisplay()) {
	        // 	if (!labelComparer[field]) {
	        // 		labelComparer[field] = new ColumnLabelComparer(column);
	        // 	}
	        // } else {
	        // 	delete labelComparer[field]
	        // };
	        this._sortItems(flds, dirs, cases);
	    };
	    GridBase.prototype._sortItems = function (fields, directions, textCases) {
	        var flds = fields.concat();
	        var dirs = directions ? directions.concat() : [];
	        var cases = textCases ? textCases.concat() : [];
	        if (this._fireSorting(flds, dirs)) {
	            this._toastManager.show(this.sortingOptions.toast, true, function () {
	                var row = this.sortingOptions.keepFocusedRow && this.focusedIndex ? this.focusedIndex.dataRow : -1;
	                this._doSortItems(fields, dirs, cases);
	                if (row >= 0) {
	                    var idx = CellIndex_1.CellIndex.temp(this, this.getItemIndexOfRow(row), this.focusedIndex.column);
	                    this.setFocusedIndex(idx, true, true);
	                }
	            }.bind(this));
	            // TODO 점검.
	            // this._doSortItems(fields, dirs, cases);
	        }
	    };
	    GridBase.prototype._doSortItems = function (fields, dirs, cases) {
	    };
	    GridBase.prototype.getSortFields = function () {
	        return null;
	    };
	    GridBase.prototype.getSortDirections = function () {
	        return null;
	    };
	    GridBase.prototype.getSortCases = function () {
	        return null;
	    };
	    GridBase.prototype.canFiltering = function () {
	        return this._fireFiltering();
	    };
	    Object.defineProperty(GridBase.prototype, "filterSelecting", {
	        get: function () {
	            return this._filterSelector.opened;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridBase.prototype.applyFilters = function (filterCollection, filter) {
	        if (this.isItemEditing(null)) {
	            return false;
	        }
	        if (this._fireFiltering()) {
	            this._toastManager.show(this.filteringOptions.toast, true, function () {
	                this.$_doApplyFilters(filterCollection, filter);
	            }.bind(this));
	            return true;
	        }
	        return false;
	    };
	    GridBase.prototype.$_doApplyFilters = function (filterCollection, filter) {
	        var applyCnt = this._items.itemCount;
	        this._items["beginFiltering"]();
	        try {
	            this._filterRunning = true;
	            this._items["clearAllFilters"]();
	            this.$_addFilters();
	        }
	        finally {
	            this._items["endFiltering"](filterCollection, filter);
	            this._filterRunning = false;
	        }
	        applyCnt !== this._items.itemCount && (this.topIndex = 0); // this.setTopIndex(0, true) 1.0
	    };
	    // 1.0에서는 columns가 hierarchy 구조이지만 2.0에서는 layout이 hierarchy이고 columns는 DataColumn array이다.
	    GridBase.prototype.$_addFilters = function () {
	        var cnt = this.columnCount;
	        for (var i = 0; i < cnt; i++) {
	            var column = this.getColumn(i);
	            var filters = column.filters;
	            if (filters && filters.activeCount > 0) {
	                for (var j = 0, fCnt = filters.count; j < fCnt; j++) {
	                    var filter = filters.getItem(j);
	                    filter.active && this._items["addFilter"](column.dataIndex, filter);
	                }
	            }
	        }
	    };
	    GridBase.prototype.columnFilterChanged = function (filterCollection, filter) {
	        this._doColumnFiltersChanged(filterCollection, filter);
	    };
	    GridBase.prototype.canGrouping = function () {
	        return false;
	    };
	    GridBase.prototype.$_layoutRowHover = function (bcell, y, type) {
	        var lm = this._layoutManager;
	        var y2 = lm.footerBounds.y + lm.contentBounds.y;
	        var idx = bcell.rowIndex;
	        if (bcell.merged) {
	            var tr = lm.getTableRowIndex(y);
	            idx = this._bodyView.getRowIndex(tr);
	        }
	        var r = lm.getItemBounds(idx);
	        r.y += lm.contentBounds.y + lm.bodyBounds.y;
	        if (r.bottom > y2) {
	            r.bottom = y2;
	        }
	        switch (type) {
	            case Types.RowMaskType.DATA:
	                r.x = this._fixedContentPane.x;
	                r.right = this._rightContentPane.width ? this._rightContentPane.right : this._contentPane.right;
	                break;
	            case Types.RowMaskType.FILL:
	                r.x = 0;
	                r.width = this.width;
	                break;
	            case Types.RowMaskType.ROW:
	                r.x = 0;
	                r.right = this._rightContentPane.width ? this._rightContentPane.right : this._contentPane.right;
	            default:
	                break;
	        }
	        this._rowHoverView.setRect(r);
	    };
	    GridBase.prototype.$_setHoveredCell = function (value, y) {
	        if (value !== this._hoveredCell) {
	            if (this._hoveredCell && this._hoveredCell.cell) {
	                var view = this.getBodyView(this._hoveredCell.cell);
	                view["$_mouseEnteredChanged"](this, this._hoveredCell, false);
	            }
	            this._hoveredCell = value;
	            if (this._hoveredCell) {
	                var view = this.getBodyView(this._hoveredCell.cell);
	                view["$_mouseEnteredChanged"](this, this._hoveredCell, true);
	            }
	            this._doHoveredCellChanged(value);
	        }
	        if (y != this._hoveredY) {
	            var rt = this._displayOptions.rowHoverType;
	            if (this._hoveredCell && rt && rt != Types.RowMaskType.NONE) {
	                this._rowHoverView.visible = true;
	                this.$_layoutRowHover(value, y, rt);
	            }
	            else {
	                this._rowHoverView.visible = false;
	            }
	            this._hoveredY = y;
	        }
	    };
	    GridBase.prototype._doHoveredCellChanged = function (cell) {
	    };
	    GridBase.prototype._doCellButtonClicked = function (index) {
	        this._fireCellButtonClicked(index);
	    };
	    GridBase.prototype._syncHeadCheck = function (checkedItems, checked) {
	        var checkBar = this.checkBar;
	        if (!checkBar.syncHeadCheck) {
	            return;
	        }
	        this._needSyncHeadCheck = false;
	        var showGroup = checkBar.showGroup;
	        if (checked === false) {
	            this._headView.allChecked = checked;
	        }
	        else if (checkedItems == null) {
	            this._headView.allChecked = checked;
	        }
	        else {
	            var allChecked = true;
	            if (checkBar.visibleOnly) {
	                for (var i = 0, cnt = this._items.itemCount; i < cnt; i++) {
	                    var item = this._items.getItem(i);
	                    //if ((item instanceof GridRow || item instanceof TreeItem || showGroup) &&  item.checkable && !item.checked) {
	                    if ((item.isData || showGroup) && item.checkable && !item.checked) {
	                        allChecked = false;
	                        break;
	                    }
	                }
	            }
	            else {
	                var items = this.getAllItems();
	                for (var i = 0, cnt = items.length; i < cnt; i++) {
	                    var item = items[i];
	                    // if ((item instanceof GridRow || item instanceof TreeItem || showGroup) &&  item.checkable && !item.checked) {
	                    if ((item.isData || showGroup) && item.checkable && !item.checked) {
	                        allChecked = false;
	                        break;
	                    }
	                }
	            }
	            this._headView.allChecked = allChecked;
	        }
	    };
	    GridBase.prototype.getRowHeight = function (itemIndex) {
	        var item = this.getItem(itemIndex);
	        return item ? item.height : NaN;
	    };
	    GridBase.prototype.setRowHeight = function (itemIndex, newHeight, refresh) {
	        if (refresh === void 0) { refresh = true; }
	        var item = this.getItem(itemIndex);
	        if (item) {
	            item.height = newHeight;
	            refresh && this.refreshView();
	        }
	    };
	    GridBase.prototype.clearRowHeights = function () {
	        if (this._items.clearRowHeights()) {
	            this.refreshView();
	        }
	    };
	    GridBase.prototype.$_rendererChanged = function (layout) {
	        var view = this._layoutManager.getBodyView(layout);
	        if (view) {
	            view["$_rendererChanged"](layout);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    GridBase.prototype._fireCurrentChanging = function (oldIndex, newIndex) {
	        return this.fireConfirmEvent(GridBase.CURRENT_CHANGING, oldIndex, newIndex);
	    };
	    GridBase.prototype._fireCurrentChanged = function (newIndex) {
	        this.fireEvent(GridBase.CURRENT_CHANGED, newIndex);
	    };
	    GridBase.prototype._fireCurrentRowChanged = function (oldRow, newRow) {
	        this.fireEvent(GridBase.CURRENT_ROW_CHANGED, oldRow, newRow);
	    };
	    GridBase.prototype._fireValidateCell = function (index, inserting, value) {
	        this.fireEvent(GridBase.VALIDATE_CELL, index, inserting, value);
	    };
	    GridBase.prototype._fireValidateRow = function (item, inserting, values) {
	        this.fireEvent(GridBase.VALIDATE_ROW, item, inserting, values);
	    };
	    GridBase.prototype._fireValidationFail = function (itemIndex, column, err) {
	        this.fireObjectEvent(GridBase.VALIDATION_FAIL, itemIndex, column, err);
	    };
	    GridBase.prototype._fireColumnHeaderClicked = function (column, rightClicked, event) {
	        this.fireEvent(GridBase.COLUMN_HEADER_CLICKED, column, rightClicked, event);
	    };
	    GridBase.prototype._fireColumnHeaderImageClicked = function (column) {
	        this.fireEvent(GridBase.COLUMN_HEADER_IMAGE_CLICKED, column);
	    };
	    GridBase.prototype._fireColumnHeaderDblClicked = function (column) {
	        this.fireEvent(GridBase.COLUMN_HEADER_DBL_CLICKED, column);
	    };
	    GridBase.prototype._fireColumnCheckedChanged = function (column) {
	        this.fireEvent(GridBase.COLUMN_CHECKED_CHANGED, column);
	    };
	    GridBase.prototype._fireFooterCellClicked = function (column) {
	        this.fireEvent(GridBase.FOOTER_CELL_CLICKED, column);
	    };
	    GridBase.prototype._fireFooterCellDblClicked = function (column) {
	        this.fireEvent(GridBase.FOOTER_CELL_DBL_CLICKED, column);
	    };
	    GridBase.prototype._fireHeaderSummaryCellClicked = function (column) {
	        this.fireEvent(GridBase.HEADERSUMMARY_CELL_CLICKED, column);
	    };
	    GridBase.prototype._fireHeaderSummaryCellDblClicked = function (column) {
	        this.fireEvent(GridBase.HEADERSUMMARY_CELL_DBL_CLICKED, column);
	    };
	    GridBase.prototype._fireCheckBarHeadClicked = function () {
	        this.fireEvent(GridBase.CHECK_BAR_HEAD_CLICKED);
	    };
	    GridBase.prototype._fireCheckBarFootClicked = function () {
	        this.fireEvent(GridBase.CHECK_BAR_FOOT_CLICKED);
	    };
	    GridBase.prototype._fireIndicatorCellClicked = function (index) {
	        this.fireEvent(GridBase.INDICATOR_CELL_CLICKED, index);
	    };
	    GridBase.prototype._fireStateBarCellClicked = function (index) {
	        this.fireEvent(GridBase.STATE_BAR_CELL_CLICKED, index);
	    };
	    GridBase.prototype._fireRowGroupHeadClicked = function () {
	        this.fireEvent(GridBase.ROWGROUP_HEAD_CLICKED);
	    };
	    GridBase.prototype._fireRowGroupFootClicked = function () {
	        this.fireEvent(GridBase.ROWGROUP_FOOT_CLICKED);
	    };
	    GridBase.prototype._fireRowGroupHeaderFooterClicked = function (kind, index) {
	        this.fireEvent(GridBase.ROWGROUP_HEADER_FOOTER_CLICKED, kind, index);
	    };
	    GridBase.prototype._fireRowGroupBarClicked = function (index) {
	        this.fireEvent(GridBase.ROWGROUP_BAR_CLICKED, index);
	    };
	    GridBase.prototype._fireCheckBarFootDblClicked = function () {
	        this.fireEvent(GridBase.CHECK_BAR_FOOT_DBL_CLICKED);
	    };
	    GridBase.prototype._fireIndicatorCellDblClicked = function (index) {
	        this.fireEvent(GridBase.INDICATOR_CELL_DBL_CLICKED, index);
	    };
	    GridBase.prototype._fireStateBarCellDblClicked = function (index) {
	        this.fireEvent(GridBase.STATE_BAR_CELL_DBL_CLICKED, index);
	    };
	    GridBase.prototype._fireRowGroupHeadDblClicked = function () {
	        this.fireEvent(GridBase.ROWGROUP_HEAD_DBL_CLICKED);
	    };
	    GridBase.prototype._fireRowGroupFootDblClicked = function () {
	        this.fireEvent(GridBase.ROWGROUP_FOOT_DBL_CLICKED);
	    };
	    GridBase.prototype._fireRowGroupHeaderFooterDblClicked = function (kind, index) {
	        this.fireEvent(GridBase.ROWGROUP_HEADER_FOOTER_DBL_CLICKED, kind, index);
	    };
	    GridBase.prototype._fireRowGroupBarDblClicked = function (index) {
	        this.fireEvent(GridBase.ROWGROUP_BAR_DBL_CLICKED, index);
	    };
	    GridBase.prototype._firePanelClicked = function () {
	        this.fireEvent(GridBase.PANEL_CLICKED);
	    };
	    GridBase.prototype._firePanelDblClicked = function () {
	        this.fireEvent(GridBase.PANEL_DBL_CLICKED);
	    };
	    GridBase.prototype._fireRowGroupPanelClicked = function (column) {
	        this.fireEvent(GridBase.ROWGROUP_PANEL_CLICKED, column);
	    };
	    GridBase.prototype._fireRowGroupPanelDblClicked = function (column) {
	        this.fireEvent(GridBase.ROWGROUP_PANEL_DBL_CLICKED, column);
	    };
	    GridBase.prototype._fireBodyEmptyClicked = function () {
	        this.fireEvent(GridBase.BODY_EMPTY_CLICKED);
	    };
	    GridBase.prototype._fireBodyEmptyDblClicked = function () {
	        this.fireEvent(GridBase.BODY_EMPTY_DBL_CLICKED);
	    };
	    GridBase.prototype._fireMenuItemClicked = function (menuItem, index) {
	        this.fireEvent(GridBase.MENU_ITEM_CLICKED, menuItem, index);
	    };
	    GridBase.prototype._fireContextMenuPopup = function (x, y, eltName) {
	        return this.fireObjectEvent(GridBase.CONTEXT_MENU_POPUP, x, y, eltName);
	    };
	    GridBase.prototype._fireContextMenuItemClicked = function (menuItem, index) {
	        this.fireEvent(GridBase.CONTEXT_MENU_ITEM_CLICKED, menuItem, index);
	    };
	    GridBase.prototype._fireCellButtonClicked = function (index) {
	        this._buttonClicked = true;
	        this.fireEvent(GridBase.CELL_BUTTON_CLICKED, index);
	    };
	    GridBase.prototype._fireEditButtonClicked = function (index) {
	        // this._buttonClicked = true;
	        this.fireEvent(GridBase.EDIT_BUTTON_CLICKED, index);
	    };
	    // _fireImageButtonClicked(index: CellIndex, buttonIndex: number, name: string): void {
	    // 	this._buttonClicked = true;
	    // 	this.fireEvent(GridBase.IMAGE_BUTTON_CLICKED, index, buttonIndex, name);
	    // }
	    GridBase.prototype._fireButtonClicked = function (index, buttonIndex, name) {
	        return this.fireEvent(GridBase.BUTTON_CLICKED, index, buttonIndex, name);
	    };
	    GridBase.prototype._fireLinkableCellClicked = function (index, url) {
	        return this.fireConfirmEvent(GridBase.LINKABLE_CELL_CLICKED, index, url);
	    };
	    GridBase.prototype._fireScrollToBottom = function () {
	        this.fireEvent(GridBase.SCROLL_TO_BOTTOM);
	    };
	    GridBase.prototype._fireTopIndexChanged = function (itemIndex) {
	        this.fireEvent(GridBase.TOPITEMINDEX_CHANGED, itemIndex);
	    };
	    GridBase.prototype._fireDataCellClicked = function (index) {
	        this.fireEvent(GridBase.DATA_CELL_CLICKED, index);
	    };
	    GridBase.prototype._fireDataCellDblClicked = function (index) {
	        this.fireEvent(GridBase.DATA_CELL_DBL_CLICKED, index);
	    };
	    GridBase.prototype._fireRowsDeleting = function (rows) {
	        return this.fireConfirmEvent(GridBase.ROWS_DELETING, rows);
	    };
	    GridBase.prototype._fireRowInserting = function (itemIndex, dataRow) {
	        return this.fireConfirmEvent(GridBase.ROW_INSERTING, itemIndex, dataRow);
	    };
	    GridBase.prototype._fireItemCommit = function (itemIndex, dataRow) {
	        this.fireEvent(GridBase.ITEM_COMMIT);
	    };
	    GridBase.prototype._fireSelectionChanged = function () {
	    };
	    GridBase.prototype._fireSelectionAdded = function (item) {
	    };
	    GridBase.prototype._fireSelectionRemoved = function () {
	    };
	    GridBase.prototype._fireSelectionCleared = function () {
	    };
	    GridBase.prototype._fireSelectionResized = function (item) {
	    };
	    GridBase.prototype._fireSelectionEnded = function (item) {
	    };
	    GridBase.prototype._fireUpdateStarted = function (item, appending) {
	        this.fireEvent(GridBase.UPDATE_STARTED, item);
	    };
	    GridBase.prototype._fireInsertStarted = function (item, appending) {
	        this.fireEvent(GridBase.INSERT_STARTED, item, appending);
	    };
	    GridBase.prototype._fireShowEditor = function (index, attrs) {
	        //return this.fireConfirmEvent(static readonly SHOW_EDITOR, index, attrs);
	    };
	    GridBase.prototype._fireHideEditor = function (index) {
	        //return this.fireEvent(static readonly HIDE_EDITOR, index);
	    };
	    GridBase.prototype._fireEditChange = function (index, value) {
	        this.fireEvent(GridBase.EDIT_CHANGE, index, value);
	    };
	    GridBase.prototype._fireGetEditValue = function (index, editResult) {
	        this.fireEvent(GridBase.GET_EDIT_VALUE, index, editResult);
	    };
	    GridBase.prototype._fireEditCommit = function (index, oldValue, newValue) {
	        return this.fireConfirmEvent(GridBase.EDIT_COMMIT, index, oldValue, newValue);
	    };
	    GridBase.prototype._fireEditCanceled = function (index) {
	        this.fireEvent(GridBase.EDIT_CANCELED, index);
	    };
	    GridBase.prototype._fireItemEditCancel = function (item) {
	        return this.fireConfirmEvent(GridBase.ITEM_EDIT_CANCEL, item);
	    };
	    GridBase.prototype._fireItemEditCanceled = function (item) {
	        this.fireEvent(GridBase.ITEM_EDIT_CANCELED, item);
	    };
	    GridBase.prototype._fireEditSearch = function (index, text) {
	        this.fireEvent(GridBase.EDIT_SEARCH, index, text);
	    };
	    GridBase.prototype._fireSearchCellButtonClick = function (index, text) {
	        this.fireObjectEvent(GridBase.SEARCH_BUTTON_CLICK, index, text);
	    };
	    GridBase.prototype._fireCellEdited = function (item, field) {
	        this.fireEvent(GridBase.CELL_EDITED, item, field);
	    };
	    GridBase.prototype._fireEditRowChanged = function (item, field, oldValue, newValue) {
	        this.fireEvent(GridBase.EDIT_ROW_CHANGED, item, field, oldValue, newValue);
	    };
	    GridBase.prototype._fireEditItemPasted = function (item, fields, oldValues, newValues) {
	        this.fireEvent(GridBase.EDIT_ROW_PASTED, item, fields, oldValues, newValues);
	    };
	    GridBase.prototype._fireItemsPasted = function (items) {
	        this.fireEvent(GridBase.ROWS_PASTED, items);
	    };
	    GridBase.prototype._fireItemChecked = function (item) {
	        this.fireEvent(GridBase.ITEM_CHECKED, item, item.checked);
	    };
	    GridBase.prototype._fireItemsChecked = function (items, checked) {
	        this.fireEvent(GridBase.ITEMS_CHECKED, items, checked);
	    };
	    GridBase.prototype._fireItemAllChecked = function (checked) {
	        this.fireEvent(GridBase.ITEM_ALL_CHECKED, checked);
	    };
	    GridBase.prototype._fireErrorClicked = function (cell, error) {
	        this.fireEvent(GridBase.ERROR_CLICKED, error);
	    };
	    GridBase.prototype._fireSorting = function (fields, directions) {
	        return this.fireConfirmEvent(GridBase.SORTING, fields, directions);
	    };
	    GridBase.prototype._fireFiltering = function () {
	        return this.fireConfirmEvent(GridBase.FILTERING);
	    };
	    // _fireFilterActionClicked(action: any, x: number, y: number): void {
	    // 	this.fireEvent(GridBase.FILTER_ACTION_CLICKED, action, x, y);
	    // }
	    GridBase.prototype._fireKeyDown = function (key, ctrl, shift, alt) {
	        return this.fireConfirmEvent(GridBase.KEY_DOWN, key, ctrl, shift, alt);
	    };
	    GridBase.prototype._fireKeyPress = function (key) {
	        this.fireEvent(GridBase.KEY_PRESS, key);
	    };
	    GridBase.prototype._fireKeyUp = function (key, ctrl, shift, alt) {
	        this.fireEvent(GridBase.KEY_UP, key, ctrl, shift, alt);
	    };
	    GridBase.prototype._fireShowTooltip = function (index, value) {
	        return this.fireObjectEvent(GridBase.SHOW_TOOLTIP, index, value);
	    };
	    GridBase.prototype._fireShowHeaderTooltip = function (column, value) {
	        return this.fireObjectEvent(GridBase.SHOW_HEADER_TOOLTIP, column, value);
	    };
	    GridBase.prototype._fireColumnPropertyChanged = function (column, property, value) {
	        this.fireEvent(GridBase.COLUMN_PROPERTY_CHANGED, column, property, value);
	    };
	    GridBase.prototype._fireShowInnerDragCursor = function (cells) {
	        this.fireObjectEvent(GridBase.SHOW_INNER_DRAG_CURSOR, cells);
	    };
	    GridBase.prototype._fireInnerDragStart = function (cells) {
	        this.fireConfirmEvent(GridBase.INNER_DRAG_START, cells);
	    };
	    GridBase.prototype._fireInnerDragOver = function (index, cells) {
	        // return this.fireConfirmEvent(GridBase.INNER_DRAG_OVER, index, cells);
	        this.fireObjectEvent(GridBase.INNER_DRAG_OVER, index, cells);
	    };
	    GridBase.prototype._fireInnerDrop = function (index, cells) {
	        return this.fireConfirmEvent(GridBase.INNER_DROP, index, cells);
	    };
	    GridBase.prototype._fireGridActivated = function () {
	        //return this.fireEvent(static readonly GRID_ACTIVATED);
	    };
	    GridBase.prototype._fireApplyCallback = function () {
	        var args = Array.prototype.slice.call(arguments, 0);
	        args.splice(0, 1, GridBase.APPLY_CALLBACK);
	        this.fireEvent.apply(this, args);
	    };
	    GridBase.prototype._firePaste = function (index, e) {
	        this.fireConfirmEvent(GridBase.PASTE, index, e);
	    };
	    GridBase.prototype._firePasted = function () {
	        this.fireEvent(GridBase.PASTED);
	    };
	    GridBase.prototype._fireCommandStackChanged = function (undoable, redoable) {
	        this.fireEvent(GridBase.COMMAND_STACK_CHANGED, undoable, redoable);
	        // this.onCommandStackChanged && this.onCommandStackChanged(this, undoable, redoable);
	    };
	    // //-------------------------------------------------------------------------
	    // // ImageListListener
	    // //-------------------------------------------------------------------------
	    // onImageListImageLoaded(images: ImageList, index: number): void {
	    // 	const img = images.getImage(index);
	    // 	console.log(images.name + "'s image loaded at " + index + " [" + img.width + "," + img.height + "]");
	    // 	this.invalidateLayout();
	    // }
	    //-------------------------------------------------------------------------
	    // ScrollBar event handlers
	    //-------------------------------------------------------------------------
	    GridBase.prototype.onScrollBarScrolled = function (bar, eventType, delta, position) {
	        var options = this.displayOptions;
	        if (bar.vertical) {
	            var t = this.topIndex;
	            switch (eventType) {
	                case ScrollBar_1.ScrollEventType.LINE:
	                    this.scrollRow(delta);
	                    return;
	                case ScrollBar_1.ScrollEventType.PAGE:
	                    t = this.topIndex + delta * bar["_page"];
	                    break;
	                case ScrollBar_1.ScrollEventType.THUMB_TRACK:
	                    // var scrollDuration = options.scrollDuration;
	                    // if (options.liveScroll || (this._scrolledTime > 0 && getTimer() - this._scrolledTime > scrollDuration)) {
	                    // 	this.setTopIndex(position);
	                    // 	this._scrolledTime = 0;
	                    // } else {
	                    // 	this._vscrollBar.setPosition(position, true);
	                    // 	if (scrollDuration > 0 && this._scrolledTime == 0)
	                    // 		this._scrolledTime = getTimer();
	                    // }
	                    t = position;
	                    break;
	                default:
	                    t = position;
	                    break;
	            }
	            if (t != this.topIndex) {
	                this.topIndex = t;
	            }
	        }
	        else {
	            var p = this.leftPos;
	            switch (eventType) {
	                case ScrollBar_1.ScrollEventType.LINE:
	                    p = this.leftPos + delta * 8, true;
	                    break;
	                case ScrollBar_1.ScrollEventType.PAGE:
	                    // 	if (this._layoutManager) { 
	                    // 		this.setLeftPos(this._layoutManager.scrollToNextColumn(), true);
	                    // 	} else {
	                    // 		this.setLeftPos(this.leftPos() + bar._page, true);
	                    // 	}
	                    // 	break;
	                    // case ScrollEventType.PAGE_LEFT:
	                    // 	if (this._layoutManager) { 
	                    // 		this.setLeftPos(this._layoutManager.scrollToPrevColumn(), true);
	                    // 	} else {
	                    // 		this.setLeftPos(this.leftPos() - bar._page, true);
	                    // 	}
	                    break;
	                case ScrollBar_1.ScrollEventType.THUMB_TRACK:
	                    // var scrollDuration = options.hscrollDuration();
	                    // if (options.isHorizLiveScroll() || (this._scrolledTime > 0 && getTimer() - this._scrolledTime > scrollDuration)) {
	                    // 	this.setLeftPos(position, false);
	                    // 	this._horzScrolling = false;
	                    // 	this._scrolledTime = 0;
	                    // } else {
	                    // 	this._hscrollBar.setPosition(position, true);
	                    // 	if (scrollDuration > 0 && this._scrolledTime == 0) {
	                    // 		this._scrolledTime = getTimer();
	                    // 	}
	                    // }
	                    p = position;
	                    break;
	                default:
	                    p = position;
	                    break;
	            }
	            if (p != this.leftPos) {
	                this.leftPos = p;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // ItemProvider event handlers
	    //-------------------------------------------------------------------------
	    GridBase.prototype.onItemProviderReset = function (rs) {
	        //_trace(">> onItemProviderReset");
	        this.hideEditor();
	        this._dataChanged = true;
	        //this._resetColumnIndicies();
	        this._populateMerges();
	        this.resetGrid();
	        this._syncHeadCheck([]);
	        //this._shadowDom && this._itemProvider && this._shadowDom.setItemProvider(this._itemProvider);
	    };
	    GridBase.prototype.onItemProviderRefresh = function (rs) {
	        //_trace(">> onItemProviderRefresh");
	        this.hideEditor();
	        this._dataChanged = true;
	        // TODO 점검.
	        this._resetColumnSortStates();
	        //this._resetColumnIndicies();
	        this._populateMerges();
	        this.refreshView();
	        this._needSyncHeadCheck && this._syncHeadCheck([]);
	        //this._shadowDom && this._itemProvider && this._shadowDom.setItemProvider(this._itemProvider);
	    };
	    GridBase.prototype.onItemProviderRefreshClient = function (rs) {
	        //Utils.trace(">> onItemProviderRefreshClient");
	        this.hideEditor();
	        this._dataChanged = true;
	        //this._resetColumnIndicies();
	        this._populateMerges();
	        this.refreshView();
	        this._needSyncHeadCheck && this._syncHeadCheck([]);
	        // this._shadowDom && this._itemProvider && this._shadowDom.setItemProvider(this._itemProvider);
	    };
	    GridBase.prototype.onItemProviderItemInserted = function (rs, item) {
	        //_trace(">> onItemProviderItemInserted: " + item.dataRow());
	        this.hideEditor();
	        this._dataChanged = true;
	        this._needSyncHeadCheck = true;
	        this._populateMerges();
	        this.refreshView();
	        if (rs.dataSource.undoing || rs.dataSource.redoing) {
	            var index = this._focusedIndex.clone();
	            index.itemIndex = item.index;
	            this.setFocusedIndex(index, true, true);
	        }
	    };
	    GridBase.prototype.onItemProviderItemDeleted = function (rs, item) {
	        //_trace(">> onItemProviderItemDeleted: " + item.dataRow());
	        this.hideEditor();
	        this._dataChanged = true;
	        this._needSyncHeadCheck = true;
	        this._populateMerges();
	        this.refreshView();
	        if (rs.dataSource.undoing || rs.dataSource.redoing) {
	            var index = this._focusedIndex.clone();
	            index.itemIndex = item.index;
	            this.setFocusedIndex(index, true, true);
	        }
	    };
	    GridBase.prototype.onItemProviderItemUpdated = function (rs, item) {
	        //_trace(">> onItemProviderItemUpdated: " + item.dataRow());
	        this.hideEditor();
	        this._dataChanged = true;
	        this._updateRows ? this._updateRows.push(item.dataId) : (this._updateRows = [item.dataId]);
	        this._populateMerges();
	        this.refreshView();
	        if (rs.dataSource.undoing || rs.dataSource.redoing) {
	            var index = this._focusedIndex.clone();
	            index.itemIndex = item.index;
	            this.setFocusedIndex(index, true, true);
	        }
	    };
	    GridBase.prototype.onItemProviderCheckableChanged = function (rs, item) {
	        //_trace(">> onItemProviderCheckableChanged: " + item.dataRow() + ", " + item.isCheckable());
	        this.refreshView();
	        this._syncHeadCheck([]);
	    };
	    GridBase.prototype.onItemProviderItemChecked = function (rs, item) {
	        //_trace(">> onItemProviderItemChecked: " + item.dataRow() + ", " + item.isChecked());
	        this.refreshView();
	        this._fireItemChecked(item);
	    };
	    GridBase.prototype.onItemProviderItemsChecked = function (rs, items, checked) {
	        //_trace(">> onItemProviderItemsChecked: " + items.length + " items, " + checked);
	        this.refreshView();
	        this._fireItemsChecked(items, checked);
	    };
	    GridBase.prototype.onItemProviderItemAllChecked = function (rs, checked) {
	        //_trace(">> onItemProviderItemAllChecked: " + checked);
	        this.refreshView();
	        this._fireItemAllChecked(checked);
	    };
	    GridBase.prototype.onItemProviderItemCheckChanged = function (rs, items, checked) {
	        //_trace(">> onItemProviderItemCheckChanged: " + checked);
	        this._syncHeadCheck(items, checked);
	    };
	    GridBase.prototype.onItemProviderRowStateChanged = function (itemProvider, item) {
	        //_trace(">> onItemProviderRowStateChanged: " + item.dataRow());
	        this.refreshView();
	    };
	    GridBase.prototype.onItemProviderRowStatesChanged = function (itemProvider, items) {
	        //_trace(">> onItemProviderRowStatesChanged");
	        this.refreshView();
	    };
	    GridBase.prototype.onItemProviderRowStatesCleared = function (itemProvider) {
	        //_trace(">> onItemProviderRowStatesCleared");
	        this.refreshView();
	    };
	    GridBase.prototype.onItemProviderSort = function (itemProvider, fields, directions) {
	        //_trace(">> onItemProviderSort");
	        this.refreshView();
	    };
	    GridBase.prototype.onItemProviderSorted = function (itemProvider) {
	        //_trace(">> onItemProviderSorted");
	        this.refreshView();
	        this.fireEvent(GridBase.SORTING_CHANGED);
	        //this._shadowDom && this._itemProvider && this._shadowDom.reset();
	    };
	    GridBase.prototype.onItemProviderFilterAdded = function (itemProvider) {
	        //_trace(">> onItemProviderFilterAdded");
	    };
	    GridBase.prototype.onItemProviderFilterRemoved = function (itemProvider) {
	        //_trace(">> onItemProviderFilterRemoved");
	    };
	    GridBase.prototype.onItemProviderFilterCleared = function (itemProvider) {
	        //_trace(">> onItemProviderFilterCleared");
	    };
	    GridBase.prototype.onItemProviderFilterAllCleared = function (itemProvider) {
	        //_trace("onItemProviderFilterAllCleared");
	    };
	    GridBase.prototype.onItemProviderFiltered = function (itemProvider, filterCollection, filter) {
	        this.refreshView();
	        !this._loading && this._syncHeadCheck([]); // filter의 경우 refresh이후에 이벤트가 발생 주의해서 처리.
	        this.fireEvent(GridBase.FILTERING_CHANGED, filterCollection, filter);
	        //this._shadowDom && this._itemProvider && this._shadowDom.reset();
	    };
	    GridBase.prototype.onItemProviderCommandStackChanged = function (rs, undoable, redoable) {
	        this._fireCommandStackChanged(undoable, redoable);
	    };
	    GridBase.prototype.$_focusEditItem = function (item) {
	        var index = this.getIndex(item.index, this.focusedIndex ? this.focusedIndex.column : null);
	        if (!index.column && this.visibleLayoutCount > 0) {
	            index["_layout"] = this.getVisibleLayout(0);
	        }
	        this.setFocusedIndex(index, true);
	        this.makeCellVisible(this.focusedIndex);
	    };
	    GridBase.prototype.$_beforeEditing = function (rs, item) {
	    };
	    GridBase.prototype.onItemEditUpdateStarted = function (rs, item) {
	        this.$_beforeEditing(rs, item);
	        //this._clearColumnErrors();
	        //this._setColumnErrors(item)
	        this.refreshView();
	        this._fireUpdateStarted(item, false);
	    };
	    GridBase.prototype.onItemEditAppendStarted = function (rs, item) {
	        this.$_beforeEditing(rs, item);
	        this.hideEditor();
	        this.reprepareEditor();
	        this._clearColumnErrors();
	        this._populateMerges();
	        this.refreshView();
	        this.$_focusEditItem(item);
	        this._fireInsertStarted(item, true);
	    };
	    GridBase.prototype.onItemEditInsertStarted = function (rs, item) {
	        this.$_beforeEditing(rs, item);
	        this.hideEditor();
	        this.reprepareEditor();
	        this._clearColumnErrors();
	        this._populateMerges();
	        this.refreshView();
	        this.$_focusEditItem(item);
	        this._fireInsertStarted(item, false);
	    };
	    GridBase.prototype.onItemEditCellEdited = function (rs, item, field) {
	        this.refreshView();
	        !this._cellUpdateEventLock && this._fireCellEdited(item, field);
	    };
	    GridBase.prototype.onItemEditCellUpdated = function (rs, item, field, oldValue, newValue) {
	        this.refreshView();
	        !this._cellUpdateEventLock && this._fireEditRowChanged(item, field, oldValue, newValue);
	    };
	    GridBase.prototype.onItemEditCommitting = function (rs, item) {
	    };
	    GridBase.prototype.onItemEditCommitted = function (rs, item) {
	        this._appendDummy();
	        this.hideEditor();
	        this.refreshView();
	    };
	    GridBase.prototype.onItemEditCanceled = function (rs) {
	        this._appendDummy();
	        this.hideEditor();
	        this._populateMerges();
	        this.refreshView();
	        this._fireItemEditCanceled(rs["_editingItem"]);
	    };
	    GridBase.prototype.onItemEditCommitRequest = function (rs) {
	        this.commit(false);
	    };
	    GridBase.prototype.onItemEditCancelReuqest = function (rs) {
	        this.cancel();
	    };
	    //-------------------------------------------------------------------------
	    // LookupSourceProvider event handlers
	    //-------------------------------------------------------------------------
	    GridBase.prototype.onLookupSourceProviderChanged = function (provider) {
	        this._resetColumnIndices();
	        this.refreshView();
	    };
	    //-------------------------------------------------------------------------
	    // SelectionManager event handlers
	    //-------------------------------------------------------------------------
	    GridBase.prototype.onSelectionChanged = function (manager) {
	        this._fireSelectionChanged();
	    };
	    GridBase.prototype.onSelectionAdded = function (manager, item) {
	        this._addSelectionView(item);
	        this._layoutSelectionViews();
	        this._fireSelectionAdded(item);
	        this._fireSelectionChanged();
	    };
	    GridBase.prototype.onSelectionRemoved = function (manager) {
	        this._fireSelectionRemoved();
	        this._fireSelectionChanged();
	    };
	    GridBase.prototype.onSelectionCleared = function (manager) {
	        this._clearSelectionViews();
	        this._fireSelectionCleared();
	        this._fireSelectionChanged();
	    };
	    GridBase.prototype.onSelectionResized = function (manager, item) {
	        this._layoutSelectionViews();
	        this._fireSelectionResized(item);
	        this._fireSelectionChanged();
	    };
	    GridBase.prototype.onSelectionEnded = function (manager, item) {
	        this._fireSelectionEnded(item);
	    };
	    //-------------------------------------------------------------------------
	    // MenuItem event handlers
	    //-------------------------------------------------------------------------
	    GridBase.prototype.onMenuItemClick = function (menuItem, index) {
	        this._fireContextMenuItemClicked(menuItem, index);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    GridBase.CURRENT_CHANGING = "onGridBaseCurrentChanging";
	    GridBase.CURRENT_CHANGED = "onGridBaseCurrentChanged";
	    GridBase.CURRENT_ROW_CHANGED = "onGridBaseCurrentRowChanged";
	    GridBase.VALIDATE_CELL = "onGridBaseValidateCell";
	    GridBase.VALIDATE_ROW = "onGridBaseValidateRow";
	    GridBase.VALIDATION_FAIL = "onGridBaseValidationFail";
	    GridBase.COLUMN_HEADER_CLICKED = "onGridBaseColumnHeaderClicked";
	    GridBase.COLUMN_HEADER_IMAGE_CLICKED = "onGridBaseColumnHeaderImageClicked";
	    GridBase.COLUMN_HEADER_DBL_CLICKED = "onGridBaseColumnHeaderDblClicked";
	    GridBase.COLUMN_CHECKED_CHANGED = "onGridBaseColumnCheckedChanged";
	    GridBase.FOOTER_CELL_CLICKED = "onGridBaseFooterCellClicked";
	    GridBase.FOOTER_CELL_DBL_CLICKED = "onGridBaseFooterCellDblClicked";
	    GridBase.HEADERSUMMARY_CELL_CLICKED = "onGridBaseHeaderSummaryCellClicked";
	    GridBase.HEADERSUMMARY_CELL_DBL_CLICKED = "onGridBaseHeaderSummaryCellDblClicked";
	    GridBase.CHECK_BAR_HEAD_CLICKED = "onGridBaseCheckBarHeadClicked";
	    GridBase.CHECK_BAR_FOOT_CLICKED = "onGridBaseCheckBarFootClicked";
	    GridBase.INDICATOR_CELL_CLICKED = "onGridBaseIndicatorCellClicked";
	    GridBase.STATE_BAR_CELL_CLICKED = "onGridBaseStateBarCellClicked";
	    GridBase.ROWGROUP_HEAD_CLICKED = "onGridBaseRowGroupHeadClicked";
	    GridBase.ROWGROUP_FOOT_CLICKED = "onGridBaseRowGroupFootClicked";
	    GridBase.ROWGROUP_BAR_CLICKED = "onGridBaseRowGroupBarClicked";
	    GridBase.ROWGROUP_HEADER_FOOTER_CLICKED = "onGridBaseRowGroupHeaderFooterClicked";
	    GridBase.CHECK_BAR_FOOT_DBL_CLICKED = "onGridBaseCheckBarFootDblClicked";
	    GridBase.INDICATOR_CELL_DBL_CLICKED = "onGridBaseIndicatorCellDblClicked";
	    GridBase.STATE_BAR_CELL_DBL_CLICKED = "onGridBaseStateBarCellDblClicked";
	    GridBase.ROWGROUP_HEAD_DBL_CLICKED = "onGridBaseRowGroupHeadDblClicked";
	    GridBase.ROWGROUP_FOOT_DBL_CLICKED = "onGridBaseRowGroupFootDblClicked";
	    GridBase.ROWGROUP_BAR_DBL_CLICKED = "onGridBaseRowGroupBarDblClicked";
	    GridBase.ROWGROUP_HEADER_FOOTER_DBL_CLICKED = "onGridBaseRowGroupHeaderFooterDblClicked";
	    GridBase.PANEL_CLICKED = "onGridBasePanelClicked";
	    GridBase.PANEL_DBL_CLICKED = "onGridBasePanelDblClicked";
	    GridBase.ROWGROUP_PANEL_CLICKED = "onGridBaseRowGroupPanelClicked";
	    GridBase.ROWGROUP_PANEL_DBL_CLICKED = "onGridBaseRowGroupPanelDblClicked";
	    GridBase.BODY_EMPTY_CLICKED = "onGridBaseBodyEmptyClicked";
	    GridBase.BODY_EMPTY_DBL_CLICKED = "onGridBaseBodyEmptyDblClicked";
	    GridBase.MENU_ITEM_CLICKED = "onGridBaseMenuItemClicked";
	    GridBase.CONTEXT_MENU_POPUP = "onGridBaseContextMenuPopup";
	    GridBase.CONTEXT_MENU_ITEM_CLICKED = "onGridBaseContextMenuItemClicked";
	    GridBase.CELL_BUTTON_CLICKED = "onGridBaseCellButtonClicked";
	    // static readonly IMAGE_BUTTON_CLICKED = "onGridBaseImageButtonClicked";
	    GridBase.EDIT_BUTTON_CLICKED = "onGridBaseEditButtonClicked";
	    // static readonly CLICKABLE_CELL_CLICKED = "onGridBaseClickableCellClicked";
	    GridBase.BUTTON_CLICKED = "onGridBaseButtonClicked";
	    GridBase.LINKABLE_CELL_CLICKED = "onGridBaseLinkableCellClicked";
	    GridBase.SCROLL_TO_BOTTOM = "onGridBaseScrollToBottom";
	    GridBase.TOPITEMINDEX_CHANGED = "onGridBaseTopItemIndexChanged";
	    GridBase.DATA_CELL_CLICKED = "onGridBaseDataCellClicked";
	    GridBase.DATA_CELL_DBL_CLICKED = "onGridBaseDataCellDblClicked";
	    GridBase.ROWS_DELETING = "onGridBaseRowsDeleting";
	    GridBase.ROW_INSERTING = "onGridBaseRowInserting";
	    GridBase.ITEM_COMMIT = "onGridBaseItemCommit";
	    GridBase.SELECTION_ADDED = "onGridBaseSelectionAdded";
	    GridBase.SELECTION_CHANGED = "onGridBaseSelectionChanged";
	    GridBase.SELECTION_REMOVED = "onGridBaseSelectionRemoved";
	    GridBase.SELECTION_CLEARED = "onGridBaseSelectionCleared";
	    GridBase.SELECTION_RESIZED = "onGridBaseSelectionResized";
	    GridBase.SELECTION_ENDED = "onGridBaseSelectionEnded";
	    GridBase.INSERT_STARTED = "onGridBaseInsertStarted";
	    GridBase.UPDATE_STARTED = "onGridBaseUpdateStarted";
	    GridBase.SHOW_EDITOR = "onGridBaseShowEditor";
	    GridBase.HIDE_EDITOR = "onGridBaseHideEditor";
	    GridBase.EDIT_CHANGE = "onGridBaseEditChange";
	    GridBase.GET_EDIT_VALUE = "onGridBaseGetEditValue";
	    GridBase.EDIT_COMMIT = "onGridBaseEditCommit";
	    GridBase.EDIT_CANCELED = "onGridBaseEditCanceled";
	    GridBase.ITEM_EDIT_CANCELED = "onGridBaseItemEditCanceled";
	    GridBase.ITEM_EDIT_CANCEL = "onGridBaseItemEditCancel";
	    GridBase.EDIT_SEARCH = "onGridBaseEditSearch";
	    GridBase.SEARCH_BUTTON_CLICK = "onGridBaseSearchCellButtonClick";
	    GridBase.CELL_EDITED = "onGridBaseCellEdited";
	    GridBase.EDIT_ROW_CHANGED = "onGridBaseEditRowChanged";
	    GridBase.EDIT_ROW_PASTED = "onGridBaseEditRowPasted";
	    GridBase.ROWS_PASTED = "onGridBaseRowsPasted";
	    GridBase.ITEM_CHECKED = "onGridBaseItemChecked";
	    GridBase.ITEMS_CHECKED = "onGridBaseItemsChecked";
	    GridBase.ITEM_ALL_CHECKED = "onGridBaseItemAllChecked";
	    GridBase.ERROR_CLICKED = "onGridBaseErrorClicked";
	    GridBase.SORTING = "onGridBaseSorting";
	    GridBase.SORTING_CHANGED = "onGridBaseSortingChanged";
	    GridBase.FILTERING = "onGridBaseFiltering";
	    GridBase.FILTERING_CHANGED = "onGridBaseFilteringChanged";
	    // static readonly FILTER_ACTION_CLICKED = "onGridBaseFilterActionClicked";
	    GridBase.KEY_PRESS = "onGridBaseKeyPress";
	    GridBase.KEY_DOWN = "onGridBaseKeyDown";
	    GridBase.KEY_UP = "onGridBaseKeyUp";
	    GridBase.SHOW_TOOLTIP = "onGridBaseShowTooltip";
	    GridBase.SHOW_HEADER_TOOLTIP = "onGridBaseShowHeaderTooltip";
	    GridBase.COLUMN_PROPERTY_CHANGED = "onGridBaseColumnPropertyChanged";
	    GridBase.SHOW_INNER_DRAG_CURSOR = "onGridBaseShowInnerDragCursor";
	    GridBase.INNER_DRAG_START = "onGridBaseInnerDragStart";
	    GridBase.INNER_DRAG_OVER = "onGridBaseInnerDragOver";
	    GridBase.INNER_DROP = "onGridBaseInnerDrop";
	    GridBase.GRID_ACTIVATED = "onGridBaseGridActivated";
	    GridBase.APPLY_CALLBACK = "onGridBaseApplyCallback";
	    GridBase.RUN_CALLBACK = "onApplyCallback";
	    GridBase.GET_HANDLER = "getHandler";
	    GridBase.PASTE = "onGridBasePaste";
	    GridBase.PASTED = "onGridBasePasted";
	    GridBase.COMMAND_STACK_CHANGED = "onGridBaseCommandStackChanged";
	    return GridBase;
	}(VisualElement_1.LayerElement));
	exports.GridBase = GridBase;
	});

	unwrapExports(GridBase_1);
	var GridBase_2 = GridBase_1.GridBase;

	var VisualContainer_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// VisualContainer.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });
	// import { $_doc, $_win, $_instanceOf, $_resetDocument } from "../Globals";







	window.requestAnimationFrame = window.requestAnimationFrame || window["mozRequestAnimationFrame"] ||
	    window.webkitRequestAnimationFrame || window["msRequestAnimationFrame"] ||
	    function (render) { return window.setTimeout(render, 10); };
	var RootElement = /** @class */ (function (_super) {
	    __extends(RootElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RootElement(name, container) {
	        var _this = _super.call(this, name) || this;
	        _this._contaner = container;
	        return _this;
	    }
	    Object.defineProperty(RootElement.prototype, "container", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._contaner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    RootElement.prototype._getCssSelector = function () {
	        return undefined;
	    };
	    RootElement.prototype._doDraw = function (element) {
	    };
	    return RootElement;
	}(VisualElement_1.VisualElement));
	var _isFirefox = typeof window["InstallTrigger"] !== 'undefined'; // Firefox 1.0+
	var _isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
	var VisualContainer = /** @class */ (function (_super) {
	    __extends(VisualContainer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function VisualContainer(containerId) {
	        var _this = _super.call(this) || this;
	        _this._updateRequested = false;
	        _this._layoutNeeded = false;
	        _this._invalidated = false;
	        _this._captured = false;
	        _this._focusing = false;
	        _this._focusingTarget = null;
	        _this._hovered = null;
	        _this._currentX = 0;
	        _this._currentY = 0;
	        _this._rendered = 0;
	        _this._defaultCursor = Types.Cursor.DEFAULT;
	        _this._drawing = false;
	        _this._offsetX = 0;
	        _this._offsetY = 0;
	        _this._clicked = 0;
	        _this._clicket = 0;
	        _this._children = [];
	        // private _containerRender = this._render.bind(this);
	        _this._eventHandlers = {};
	        _this._eventNodes = [];
	        // this.$_prepareContextMenu();
	        // private _popupMenuManager = new PopupMenuManager(this).addListener(this);
	        _this._contextMenu = null;
	        // this.onContextMenuItemClicked = null;
	        _this._containerRender = _this._render.bind(_this);
	        _this._scrollTool = new ScrollBar_1.ScrollTool(_this);
	        _this._cursor = "default";
	        _this._testWidth = NaN;
	        _this._testHeight = NaN;
	        _this.prepareContainer(containerId);
	        _this.invalidateLayout();
	        // this._registerEventHandlers(this._containerDom);
	        _this._registerEventHandlers(_this._rootElement["_dom"]);
	        _this.activeTool = _this._defaultTool = _this._createDefaultTool();
	        return _this;
	    }
	    VisualContainer.prototype._doDispose = function () {
	        this._activeTool = null;
	        this._defaultTool = this._defaultTool.dispose();
	        this._scrollTool = this._scrollTool.dispose();
	        this.$_removeListenerAll(null);
	        //_containerDiv: HTMLDivElement; 사용자가 지정한 div이다. 삭제해서는 안되고 하위에 생성된것들을 remove해야 한다.
	        Utils_1.Utils.detach(this._containerDom);
	        this._containerDom = null;
	        // this._container && this._container.parentElement.removeChild(this._container);
	        this._container = null; //
	        Utils_1.Utils.clearElements(this._containerDiv);
	        // private _container: HTMLDivElement; // 현재 정체가 의심스럽다. 필요없다고 판단되면 삭제 필요.
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(VisualContainer.prototype, "activeTool", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** activeTool */
	        get: function () {
	            return this._activeTool;
	        },
	        set: function (value) {
	            value = value || this._defaultTool;
	            if (value != this._activeTool) {
	                var old = this._activeTool;
	                if (old) {
	                    old.deactivate();
	                }
	                this._activeTool = value;
	                if (value) {
	                    value.activate(old);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualContainer.prototype, "defaultTool", {
	        /** defaultTool */
	        get: function () {
	            return this._defaultTool;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(VisualContainer.prototype, "measurer", {
	        /** measurer */
	        get: function () {
	            return this._measurer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    VisualContainer.prototype.findElementAt = function (x, y, hitTesting) {
	        return this._rootElement.findChildAt(x - this._rootElement["_x"], y - this._rootElement["_y"], hitTesting);
	    };
	    VisualContainer.prototype.setCursor = function (cursor) {
	        if (cursor != this._cursor) {
	            this._containerDom.style.cursor = this._cursor = cursor;
	        }
	    };
	    // TODO 사용되는 코드인지 확인 필요.
	    VisualContainer.prototype.setFocus = function () {
	        this._setFocusAndScroll(this._containerDom);
	    };
	    VisualContainer.prototype.updateNow = function () {
	        this._render(Utils_1.Utils.getTimer());
	    };
	    VisualContainer.prototype.toScreen = function (r) {
	        r.x += this._offsetX;
	        r.y += this._offsetY;
	        return r;
	    };
	    VisualContainer.prototype.getBound = function () {
	        var r = this._containerDom.getBoundingClientRect();
	        return new Rectangle_1.Rectangle(r.left, r.top, r.width, r.height);
	    };
	    VisualContainer.prototype.getHtml = function () {
	        return this._containerDom.outerHTML;
	    };
	    VisualContainer.prototype.addElement = function (element) {
	        return this._rootElement.addChild(element);
	    };
	    VisualContainer.prototype.removeElement = function (element) {
	        return this._rootElement.removeChild(element);
	    };
	    VisualContainer.prototype.resetSize = function (callback) {
	        // let clientRect: any;
	        // try {
	        //     clientRect = this._container.getBoundingClientRect();
	        // } catch (e){
	        //     clientRect = new {width:this._container.clientWidth, height:this._container.clientHeight};
	        // };
	        // if (this._width != parseInt(clientRect.width) /*this._container.clientWidth*/ || this._height != parseInt(clientRect.height) /*this._container.clientHeight*/) {
	        //     if (this._defContext) {
	        //         this._width = parseInt(clientRect.width);
	        //         this._height = parseInt(clientRect.height);
	        //         this._canvas.width = parseInt(clientRect.width) * this._deviceScale;//this._container.clientWidth;
	        //         this._canvas.height = parseInt(clientRect.height) * this._deviceScale;//this._container.clientHeight;
	        //         this._defContext.resize(this._width, this._height);
	        //         if (this._contexts) {
	        //             for (var i = 0; i < this._contexts.length; i++) {
	        //                 this._contexts[i].resize(this._width, this._height);
	        //             }
	        //         }
	        //     }
	        //     this.invalidateLayout();
	        //     //trace("resized: " + this._width + ", " + this._height);
	        // } else {
	        //     this.invalidateLayout();
	        // }
	        // const rect = this._containerDom.getBoundingClientRect();
	        // this._width = rect.width;
	        // this._height = rect.height;
	        this.invalidateLayout();
	    };
	    VisualContainer.prototype.measureText = function (style, text) {
	        this._textMeasurer.className = style;
	        this._textMeasurer.innerHTML = text;
	        return this._textMeasurer.offsetWidth;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    VisualContainer.prototype.prepareContainer = function (id) {
	        if (!id) {
	            throw new Error("container is null!");
	        }
	        if (Globals.$_instanceOf(id, "HTMLDivElement")) {
	            this._containerDiv = id;
	            // $_resetDocument(this._containerDiv);
	        }
	        else {
	            this._containerDiv = document.getElementById(id);
	        }
	        if (!(Globals.$_instanceOf(this._containerDiv, "HTMLDivElement"))) {
	            throw new Error("Invalid grid container element: " + id);
	        }
	        var container = this._containerDom = document.createElement("div");
	        this._container = this["_containerDom"]; // for 1.0 code
	        var css = container.style;
	        this._cursor = css.cursor;
	        this._containerDiv.appendChild(container);
	        container.setAttribute('tabindex', '0');
	        css.position = "relative"; // 이 것 때문에...
	        css.width = "100%";
	        css.height = "100%";
	        // css.borderStyle = "none";
	        // css.borderWidth = "0px";
	        css.boxSizing = "border-box";
	        css.overflow = "hidden";
	        css["-webkit-touch-callout"] = "none";
	        css["-webkit-user-select"] = "none";
	        css["user-select"] = "none";
	        css["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)";
	        // const rect = container.getBoundingClientRect();
	        // this._width = rect.width;
	        // this._height = rect.height;
	        this._rootElement = this._createRootElement();
	        this._measurer = document.createElement("div");
	        this._container.appendChild(this._measurer);
	        var span = this._textMeasurer = document.createElement("span");
	        span.style.position = "absolute";
	        span.style.left = "-10000px";
	        span.style.top = "-10000px";
	        span.style.display = "block";
	        this._container.appendChild(span);
	        this._doPrepareContainer(container);
	    };
	    VisualContainer.prototype._doPrepareContainer = function (dom) {
	    };
	    VisualContainer.prototype._createRootElement = function () {
	        var elt = new RootElement("root", this);
	        this._containerDom.appendChild(elt["_dom"]);
	        return elt;
	    };
	    VisualContainer.prototype.invalidateLayout = function () {
	        if (!this._layoutNeeded) {
	            this._layoutNeeded = true;
	            this.invalidate(true);
	        }
	    };
	    VisualContainer.prototype.invalidate = function (force) {
	        if ((!this._updateRequested || !this._invalidated) && (force || !this._drawing)) {
	            if (!this._requestTimer) {
	                this._requestTimer = window.requestAnimationFrame(this._containerRender);
	            }
	            this._updateRequested = true;
	            this._invalidated = true;
	        }
	    };
	    VisualContainer.prototype.invalidateElement = function (element) {
	        if (!this._drawing && !this._updateRequested) {
	            if (!this._requestTimer) {
	                this._requestTimer = window.requestAnimationFrame(this._containerRender);
	            }
	            this._updateRequested = true;
	        }
	    };
	    VisualContainer.prototype._render = function (timestamp) {
	        if (this.disposing) {
	            return;
	        }
	        this._updateRequested = false;
	        this._offsetX = this._containerDom.offsetLeft;
	        this._offsetY = this._containerDom.offsetTop;
	        // let op = this._gridContainer.offsetParent;
	        // while (op) {
	        //     this._offsetX += op.offsetLeft;
	        //     this._offsetY += op.offsetTop;
	        //     op = op.offsetParent;
	        // }
	        this._drawing = true;
	        try {
	            this.$$_render(timestamp); //, null, 0, 0);
	            // if (this._resetSizeCallback) {
	            //     this._resetSizeCallback();
	            //     delete this._resetSizeCallback;
	            // }
	        }
	        finally {
	            this._drawing = false;
	            this._invalidated = false;
	            this._requestTimer = null;
	        }
	    };
	    VisualContainer.prototype.$$_render = function (timestamp) {
	        var div = this._containerDom;
	        var x = 0; //div.clientLeft;
	        var y = 0; //div.clientTop;
	        var w = !isNaN(this._testWidth) ? this._testWidth : div.clientWidth;
	        var h = !isNaN(this._testHeight) ? this._testHeight : div.clientHeight;
	        this._layoutChildren(new Rectangle_1.Rectangle(x, y, w, h));
	        if (this._layoutNeeded) {
	            this._layoutNeeded = false;
	            this._doLayout(new Rectangle_1.Rectangle(x, y, w, h));
	        }
	        else {
	            this._doPrepareRender(new Rectangle_1.Rectangle(x, y, w, h));
	        }
	        this._doRenderHtml(new Rectangle_1.Rectangle(x, y, w, h));
	    };
	    VisualContainer.prototype._layoutChildren = function (bounds) {
	    };
	    VisualContainer.prototype._doLayout = function (bounds) {
	    };
	    VisualContainer.prototype._doPrepareRender = function (bounds) {
	    };
	    VisualContainer.prototype._doRenderHtml = function (bounds) {
	        this._doDrawContainer(bounds);
	        this._drawElement(this._rootElement);
	        this._validateChildren(this._rootElement);
	    };
	    VisualContainer.prototype._doDrawContainer = function (bounds) {
	    };
	    VisualContainer.prototype._drawElement = function (element) {
	        element.draw();
	        for (var i = 0, cnt = element.childCount; i < cnt; i++) {
	            var elt = element.getChild(i);
	            if (elt.visible) {
	                this._drawElement(elt);
	            }
	        }
	    };
	    VisualContainer.prototype._validateChildren = function (element) {
	        for (var i = 0, cnt = element.childCount; i < cnt; i++) {
	            var elt = element.getChild(i);
	            elt.validate();
	        }
	    };
	    VisualContainer.prototype._setFocusAndScroll = function (target) {
	        target.setFocus ? target.setFocus() : target.focus ? target.focus() : null;
	        // focus를 줄때 scroll할것인지를 option으로 처리해야 한다.
	        /*
	        const parr = [];

	        if (target) {
	            if (!this._focusing) {
	                this._focusing = true;
	                this._focusingTarget = target;

	                try {
	                    const x = Utils.win.pageXOffset;
	                    const y = Utils.win.pageYOffset;

	                    if (Utils.isFirefox || Utils.isChrome || Utils.isOpera) {
	                        let p = this._containerDiv && this._containerDiv.parentElement;
	                        while (p && !(p instanceof HTMLBodyElement)) {
	                            parr.push({element:p, st:p.scrollTop, sl:p.scrollLeft});
	                            p = p.parentElement;
	                        }
	                    }

	                    const isiFrame = self !== top;
	                    let topElement: any;
	                    let topX: number;
	                    let topY: number;

	                    if (isiFrame) {
	                        let p = self.frameElement;

	                        while (p) {
	                            if (p && p.tagName === "HTML") {
	                                topElement = p;
	                                topX = p.scrollLeft;
	                                topY = p.scrollTop;
	                                break;
	                            }
	                            p = p.parentElement;
	                        }
	                    }
	                    // target이 canvas이면 focus를 주지 않는다. 그럼 스크롤되지 않는다.
	                    target.setFocus ? target.setFocus() : target instanceof HTMLCanvasElement ? null : target.focus();
	                    if (Utils.win.pageXOffset != x || Utils.win.pageYOffset != y) {
	                        Utils.win.scrollTo(x, y);
	                    }
	                    if (Utils.isFirefox || Utils.isChrome || Utils.isOpera) {
	                        for (var i = parr.length; i--;) {
	                            if (parr[i].element.scrollTop != parr[i].st || parr[i].element.scrollLeft != parr[i].sl) {
	                                parr[i].element.scrollTop = parr[i].st;
	                                parr[i].element.scrollLeft = parr[i].sl;
	                            }
	                        }
	                    }
	                    if (isiFrame && topElement && (topX != topElement.scrollLeft || topY != topElement.scrollTop)) {
	                        topElement.scrollTo(topX, topY);
	                    }
	                } finally {
	                    this._focusing = false;
	                    this._focusingTarget = null;
	                }
	            } else if (target != this._focusingTarget) {
	                target.setFocus ? target.setFocus() : target instanceof HTMLCanvasElement ? null : target.focus();
	            }
	        }
	        */
	    };
	    VisualContainer.prototype._registerEventHandlers = function (container) {
	        var win = window;
	        container.style.cursor = this._defaultCursor;
	        this.$_addListener(win, "resize", this._resizeHandler.bind(this), false);
	        this.$_addListener(win, "mousemove", this._mouseMoveHandler.bind(this), false);
	        this.$_addListener(win, "mouseup", this._mouseUpHandler.bind(this), false);
	        this.$_addListener(win, "focus", this._focusHandlerFireFox.bind(this), true); // 이벤트가 발생한 객체에서만 발생하고 부모로 전달되지는 않는다.
	        this.$_addListener(win, "focusin", this._focusinHandler.bind(this), true); // 이벤트가 상위 객체로 전달된다.
	        this.$_addListener(win, "focusout", this._focusoutHandler.bind(this), true); // 이벤트가 상위 객체로 전달된다.
	        this.$_addListener(win, "mousedown", this._globalMouseDownHandler.bind(this), false);
	        // this.$_addListener(container, "keydown", this._keyDownHandler.bind(this), false);
	        // this.$_addListener(container, "keyup", this._keyUpHandler.bind(this), false);
	        // this.$_addListener(container, "keypress", this._keyPressHandler.bind(this), false);
	        this.$_addListener(container, "click", this._clickHandler.bind(this), false);
	        this.$_addListener(container, "dblclick", this._dblclickHandler.bind(this), false);
	        this.$_addListener(container, "mousedown", this._mouseDownHandler.bind(this), false);
	        this.$_addListener(container, "mouseenter", this._mouseEnterHandler.bind(this), false);
	        this.$_addListener(container, "mouseleave", this._mouseLeaveHandler.bind(this), false);
	        this.$_addListener(container, "mouseover", this._mouseOverHandler.bind(this), false);
	        this.$_addListener(container, "focus", this._focusHandler.bind(this), false);
	        this.$_addListener(container, "contextmenu", this._contextMenuHander.bind(this), false);
	        this.$_addListener(container, "blur", this._blurHandler.bind(this), false);
	        // this.$_addListener(canvas, "drop", this._dropHandler.bind(this), false);
	        this.$_addListener(container, "selectstart", this._selectstartHandler.bind(this), false);
	        this.$_addListener(container, "wheel", this._wheelHandler.bind(this), false);
	        {
	            this.$_addListener(container, "touchstart", this._touchStartHandler.bind(this), false);
	            this.$_addListener(container, "touchmove", this._touchMoveHandler.bind(this), false);
	            this.$_addListener(container, "touchend", this._touchEndHandler.bind(this), false);
	            this.$_addListener(container, "touchcancel", this._touchCancelHandler.bind(this), false);
	            this.$_addListener(container, "touchleave", this._touchLeaveHandler.bind(this), false);
	        }
	    };
	    VisualContainer.prototype.$_addListener = function (node, event, handler, capture) {
	        if (!(node in this._eventHandlers)) {
	            this._eventHandlers[node] = {};
	        }
	        if (!(event in this._eventHandlers[node])) {
	            this._eventHandlers[node][event] = [];
	        }
	        this._eventHandlers[node][event].push([handler, capture]);
	        node.addEventListener(event, handler, capture);
	        if (this._eventNodes.indexOf(node) < 0) {
	            this._eventNodes.push(node);
	        }
	    };
	    VisualContainer.prototype.$_removeListener = function (node, event) {
	        if (node in this._eventHandlers) {
	            var handlers = this._eventHandlers[node];
	            if (event in handlers) {
	                var eventHandlers = handlers[event];
	                for (var i = eventHandlers.length; i--;) {
	                    var handler = eventHandlers[i];
	                    node.removeEventListener(event, handler[0], handler[1]);
	                }
	            }
	        }
	    };
	    VisualContainer.prototype.$_removeListenerAll = function (node) {
	        if (node === void 0) { node = null; }
	        var nodes = node ? [node] : this._eventNodes;
	        for (var i = 0, cnt = nodes.length; i < cnt; i++) {
	            var elt = nodes[i];
	            if (elt in this._eventHandlers) {
	                var events = this._eventHandlers[elt];
	                for (var event in events) {
	                    var handlers = events[event];
	                    for (var j = handlers.length; j--;) {
	                        var handler = handlers[j];
	                        elt.removeEventListener(event, handler[0], handler[1]);
	                    }
	                }
	            }
	        }
	    };
	    VisualContainer.prototype._unloadHandler = function () {
	        // 등록된 모든 handler를 삭제해야한다.
	        // $_addListener로 등록했다면 $_removeListenerAll로 삭제가능.
	        this.$_removeListenerAll();
	        this._containerDiv = null;
	        this._containerDom = null;
	    };
	    VisualContainer.prototype._resizeHandler = function (event) {
	        // if (this._resizeDelay) {
	        // 	this._resizeTimer && clearTimeout(this._resizeTimer);
	        // 	this._resizeTimer = setTimeout(function() {this.resetSize()}.bind(this), this._resizeDelay);
	        // } else {
	        // 	this.resetSize();
	        // }
	        this.resetSize();
	    };
	    VisualContainer.prototype._keyDownHandler = function (event) {
	        if (this._activeTool) {
	            // const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
	            // this._activeTool.keyDown(event.keyCode, event.ctrlKey, event.shiftKey, event.altKey, event);
	            this._activeTool.keyDown(event);
	        }
	    };
	    VisualContainer.prototype._keyUpHandler = function (event) {
	        if (this._activeTool) {
	            // const ctrl = _isMac && event.metaKey || !_isMac && event.ctrlKey;
	            this._activeTool.keyUp(event);
	        }
	    };
	    VisualContainer.prototype._keyPressHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.keyPress(event);
	        }
	    };
	    VisualContainer.prototype.toOffset = function (event) {
	        /*
	         event.mouseX = event.clientX - _offsetX;
	         event.mouseY = event.clientY - _offsetY;
	         */
	        var elt = this._containerDom; // event.target; // canvas로 간주하면 window로 이벤트 핸들링을 해도 동일하게 적용된다.
	        var r = elt.getBoundingClientRect();
	        event.mouseX = event.clientX - r.left;
	        event.mouseY = event.clientY - r.top;
	        return event;
	    };
	    VisualContainer.prototype._clickHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.click(this.toOffset(event));
	        }
	    };
	    VisualContainer.prototype._dblclickHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.dblclick(this.toOffset(event));
	        }
	    };
	    VisualContainer.prototype._mouseDownHandler = function (event) {
	        // 임시로...
	        // this._containerDom.focus();
	        // 이것도 임시로. 
	        this._activeTool.setFocus();
	        this.toOffset(event);
	        this._currentX = event["mouseX"];
	        this._currentY = event["mouseY"];
	        var elt = this.findElementAt(this._currentX, this._currentY, false);
	        var view = elt && elt.getAncestor(ScrollBar_1.ScrollBar);
	        if (view) {
	            this.activeTool = this._scrollTool;
	        }
	        else if (!this.activeTool) {
	            this.activeTool = this._defaultTool;
	        }
	        if (this._activeTool) {
	            this._activeTool["_mouseEventTarget"] = event.target instanceof HTMLElement ? event.target : null;
	            this._activeTool.mouseDown(event);
	        }
	        // 브라우져에 따라서 mouseDown 후 focus가 이동하는 방법들이 다름
	        // mouseDown에서는 포커스를 이동시켜도 클릭한 곳에 focus가 가는 경우가 있음. 
	        // if (Utils.isIE) {
	        event.preventDefault(); // 클릭했을때 focus가 이동하는것을 막아주기 위해서 사용한다.
	        // }
	        // this._popupMenuManager.close();
	        // if (event.target === this._canvas) {
	        //     $$_activeGrid != this._gridView && $_setActiveGrid(this._gridView);
	        //     this._canvas.setAttribute('tabindex', '0');
	        //     this._captured = true;
	        //     this.checkClicked(event.clientX - this._offsetX, event.clientY - this._offsetY);
	        //     this.toOffset(event);
	        //     this._currentX = event.mouseX;
	        //     this._currentY = event.mouseY;
	        //     if (this._activeTool) {
	        //         this._activeTool.mouseDown(event);
	        //     }
	        //     /*
	        //     _stopEvent(event);
	        //     */
	        //     if (_isIE && (!this._activeTool || this._activeTool.isEditing())) {
	        //         _stopEvent(event);
	        //     }
	        // }
	    };
	    VisualContainer.prototype._mouseMoveHandler = function (event) {
	        this.toOffset(event);
	        this._currentX = event["mouseX"];
	        this._currentY = event["mouseY"];
	        if (this._activeTool) {
	            this._activeTool["_mouseEventTarget"] = event.target instanceof HTMLElement ? event.target : null;
	            this._activeTool.mouseMove(event);
	        }
	        // var hovered = this._hovered;
	        // if (!this._captured && event.target !== this._canvas) {
	        //     if (hovered) {
	        //         hovered.setHovered(false);
	        //         // hovered instanceof HeaderCellElement && hovered.invalidate(true,true);
	        //         this._hovered = null;
	        //     }
	        //     if (this._activeTool) {
	        //         this._activeTool.mouseOutside();
	        //     }
	        //     return;
	        // }
	        // this.toOffset(event);
	        // var x = event.mouseX;
	        // var y = event.mouseY;
	        // if (x != this._currentX || y != this._currentY) { // 같은 위치여도 발생하고 있다.
	        //     this._currentX = x;
	        //     this._currentY = y;
	        //     var elt = this.findElementAt(x, y, true);
	        //     if (!this._activeTool || !this._activeTool.isDragging()) {
	        //         if (elt && elt.canHover() && elt != this._hovered ) {
	        //             if (hovered) {
	        //                 hovered.setHovered(false);
	        //                 // if (hovered instanceof HeaderCellHandle) {
	        //                 //     hovered.invalidate();
	        //                 //      if (!(elt instanceof HeaderCellHandle))
	        //                 //         hovered._owner.invalidate();
	        //                 // }
	        //             }
	        //             this._hovered = elt;
	        //             if (this._hovered && this._hovered._mouseEnabled) {
	        //                 this._hovered.setHovered(true);
	        //                 // if (this._hovered instanceof HeadrCellHandle) {
	        //                 //     this._hovered.invalidate();
	        //                 // }
	        //             }
	        //         }
	        //     }
	        // }
	        // if (this._activeTool) {
	        //     this._activeTool.mouseMove(event);
	        // }
	    };
	    VisualContainer.prototype._mouseUpHandler = function (event) {
	        this.toOffset(event);
	        this._currentX = event["mouseX"];
	        this._currentY = event["mouseY"];
	        if (this._activeTool) {
	            this._activeTool["_mouseEventTarget"] = event.target instanceof HTMLElement ? event.target : null;
	            this._activeTool.mouseUp(event);
	            if (this._activeTool instanceof ScrollBar_1.ScrollTool) {
	                this.activeTool = this._activeTool.previous;
	            }
	        }
	        // if (!this._captured && event.target !== this._gridContainer) {
	        //     return;
	        // }
	        // this._captured = false;
	        // if (this._activeTool) {
	        //     this._activeTool.mouseUp(this.toOffset(event));
	        // }
	    };
	    VisualContainer.prototype._mouseEnterHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.mouseEnter(this.toOffset(event));
	        }
	    };
	    VisualContainer.prototype._mouseLeaveHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.mouseLeave(this.toOffset(event));
	        }
	    };
	    VisualContainer.prototype._mouseOverHandler = function (event) {
	        if (this._activeTool) {
	            this._activeTool.mouseLeave(this.toOffset(event));
	        }
	    };
	    VisualContainer.prototype._contextMenuHander = function (event) {
	        this.toOffset(event);
	        this._currentX = event["mouseX"];
	        this._currentY = event["mouseY"];
	        if (this._activeTool) {
	            this._activeTool["_mouseEventTarget"] = event.target instanceof HTMLElement ? event.target : null;
	            this._activeTool.contextMenu(event);
	        }
	    };
	    // IE 9 FireFox Chrome Opera Safari IE 11 Edge
	    VisualContainer.prototype._wheelHandler = function (event) {
	        if (this._activeTool) {
	            if (this._activeTool.mouseWheel(this.toOffset(event))) {
	                Utils_1.Utils.stopEvent(event);
	            }
	        }
	    };
	    VisualContainer.prototype._focusHandler = function (event) {
	    };
	    VisualContainer.prototype._blurHandler = function (event) {
	    };
	    VisualContainer.prototype._selectstartHandler = function (event) {
	        // IE9에서 선택 드래깅되는 문제
	        return false;
	    };
	    VisualContainer.prototype._focusinHandler = function (event) {
	        // if (!Utils.isAncestorOf(this._containerDom, event.target as HTMLElement)) {
	        //     debugger;
	        // }
	        // if (event.target === this._containerDom) {
	        //     //!this._gridView._exiting && !_isMobile() &&this._activeTool && this._activeTool.setFocus();
	        //     this._activeTool && this._activeTool.setFocus();
	        // }
	    };
	    VisualContainer.prototype._globalMouseDownHandler = function (event) {
	        if (!Utils_1.Utils.isAncestorOf(this._containerDiv, event.target)) {
	            //debugger;
	            this._activeTool && this._activeTool.focusLeave();
	        }
	    };
	    VisualContainer.prototype._focusoutHandler = function (event) {
	        var out = Utils_1.Utils.isAncestorOf(this._containerDiv, event.target) &&
	            event.relatedTarget &&
	            !Utils_1.Utils.isAncestorOf(this._containerDiv, event.relatedTarget);
	        if (out) {
	            //debugger;
	            this._activeTool && this._activeTool.focusLeave();
	        }
	    };
	    VisualContainer.prototype._focusHandlerFireFox = function (event) {
	        if (Utils_1.Utils.isAncestorOf(this._containerDiv, event.target)) {
	            this._activeTool.setFocus(event.target);
	        }
	        // event.target instanceof HTMLCanvasElement && event.target == this._canvas && $_setActiveGrid(this._gridView);
	        // if (event.target === this._canvas) {
	        //     !this._gridView._exiting && !_isMobile() && this._activeTool && this._activeTool.setFocus();
	        // }
	    };
	    VisualContainer.prototype._touchStartHandler = function (event) {
	        // if (this._activeTool) {
	        //     this._activeTool.touchStart(event);
	        // }
	    };
	    VisualContainer.prototype._touchMoveHandler = function (event) {
	        // if (this._activeTool) {
	        //     this._activeTool.touchMove(event);
	        // }
	    };
	    VisualContainer.prototype._touchEndHandler = function (event) {
	        // if (this._activeTool) {
	        //     this._activeTool.touchEnd(event);
	        // }
	    };
	    VisualContainer.prototype._touchCancelHandler = function (event) {
	        // if (this._activeTool) {
	        //     this._activeTool.touchCancel(event);
	        // }
	    };
	    VisualContainer.prototype._touchLeaveHandler = function (event) {
	        // if (this._activeTool) {
	        //     this._activeTool.touchEnd(event);
	        // }
	    };
	    VisualContainer.prototype.onMenuItemClick = function (menuItem) {
	        // this.onContextMenuItemClicked && this.onContextMenuItemClicked(this, menuItem);
	        // this.fireEvent(UIContainer.CONTEXT_MENU_ITEM_CLICKED, menuItem);
	    };
	    return VisualContainer;
	}(EventAware_1.EventAware));
	exports.VisualContainer = VisualContainer;
	});

	unwrapExports(VisualContainer_1);
	var VisualContainer_2 = VisualContainer_1.VisualContainer;

	var GridSummarizer = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridSummarizer.ts
	// 2019. 07. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var DefaultSummarizer = /** @class */ (function (_super) {
	    __extends(DefaultSummarizer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function DefaultSummarizer(provider) {
	        var _this = _super.call(this) || this;
	        _this._rs = provider;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // GridSummarizer
	    //-------------------------------------------------------------------------
	    DefaultSummarizer.prototype.getCount = function (field) {
	        return this._rs.itemCount;
	    };
	    DefaultSummarizer.prototype.getSum = function (field) {
	        return this._rs.getSum(field);
	    };
	    DefaultSummarizer.prototype.getMax = function (field) {
	        return this._rs.getMax(field);
	    };
	    DefaultSummarizer.prototype.getMin = function (field) {
	        return this._rs.getMin(field);
	    };
	    DefaultSummarizer.prototype.getAvg = function (field) {
	        return this._rs.getAvg(field);
	    };
	    DefaultSummarizer.prototype.getVar = function (field) {
	        return this._rs.getVar(field);
	    };
	    DefaultSummarizer.prototype.getVarp = function (field) {
	        return this._rs.getVarp(field);
	    };
	    DefaultSummarizer.prototype.getStdev = function (field) {
	        return this._rs.getStdev(field);
	    };
	    DefaultSummarizer.prototype.getStdevp = function (field) {
	        return this._rs.getStdevp(field);
	    };
	    DefaultSummarizer.prototype.getDataCount = function (field) {
	        throw new Error("Not implented.");
	        //return this._rs.itemCount;
	    };
	    DefaultSummarizer.prototype.getDataSum = function (field) {
	        throw new Error("Not implented.");
	        //return this._rs.getSum(field);
	    };
	    return DefaultSummarizer;
	}(Base_1.Base));
	exports.DefaultSummarizer = DefaultSummarizer;
	});

	unwrapExports(GridSummarizer);
	var GridSummarizer_1 = GridSummarizer.DefaultSummarizer;

	var GridItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridItemPovider.ts
	// 2019. 07. 11. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var GridItemProvider = /** @class */ (function (_super) {
	    __extends(GridItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridItemProvider(indexing, footerCounter) {
	        if (footerCounter === void 0) { footerCounter = null; }
	        var _this = _super.call(this, null, indexing) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._groupSorting = true;
	        _this._groupSortDirection = Types.SortDirection.ASCENDING;
	        _this._groupSortCase = Types.SortCase.SENSITIVE;
	        _this._rs = new DefaultItemProvider_1.DefaultItemProvider(false);
	        _this._rs.addListener(_this);
	        _this._groupedProvider = new GroupedItemProvider_1.GroupedItemProvider(_this._rs, false);
	        _this._groupedProvider.footerCounter = footerCounter;
	        _this.source = _this._groupedProvider;
	        _this._summarizer = new GridSummarizer.DefaultSummarizer(_this._rs);
	        return _this;
	    }
	    GridItemProvider.prototype._doDispose = function () {
	        this.clearListener();
	        // this.source && this.source.dispose();
	        // this.source = null;
	        this._rs && this._rs.dispose();
	        this._rs = null;
	        this._groupedProvider && this._groupedProvider.dispose();
	        this._groupedProvider = null;
	        this._summarizer && this._summarizer.dispose();
	        this._summarizer = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridItemProvider.prototype, "maxRowCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** maxRowCount */
	        get: function () {
	            return this._rs.maxItemCount;
	        },
	        set: function (value) {
	            this._rs.maxItemCount = Math.max(0, value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "hideDeleted", {
	        /** hideDeleted */
	        get: function () {
	            return this._rs.hideDeleted;
	        },
	        set: function (value) {
	            this._rs.hideDeleted = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "inclusiveFiltering", {
	        /** inclusiveFiltering */
	        get: function () {
	            return this._rs.isFilterOr;
	        },
	        set: function (value) {
	            this._rs.isFilterOr = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "summaryMode", {
	        /** summaryMode */
	        get: function () {
	            return this._rs.summaryMode;
	        },
	        set: function (value) {
	            this._rs.summaryMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "groupSummaryMode", {
	        /** groupSummaryMode */
	        get: function () {
	            return this._groupedProvider.summaryMode;
	        },
	        set: function (value) {
	            this._groupedProvider.summaryMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "sortMode", {
	        // /** isMergeMode */
	        // get mergeMode(): boolean {
	        //     return this._groupedProvider.mergeMode;
	        // }
	        // set mergeMode(value) {
	        //     this._groupedProvider.mergeMode = value;
	        // }
	        /** sortMode */
	        get: function () {
	            return this._rs.sortMode;
	        },
	        set: function (value) {
	            this._rs.sortMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "filterMode", {
	        /** filterMode */
	        get: function () {
	            return this._rs.filterMode;
	        },
	        set: function (value) {
	            this._rs.filterMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "grouped", {
	        /** grouped */
	        get: function () {
	            return this._groupedProvider.grouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "mergedGrouped", {
	        /** mergedGrouped */
	        get: function () {
	            return this._groupedProvider.grouped && this._groupedProvider.mergeMode;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "groupLevels", {
	        /** groupList */
	        // get groupList(): any {
	        // 	return this._groupedProvider.groupList;
	        // }
	        /** groupLevels */
	        get: function () {
	            return this._groupedProvider.groupCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "groupByFieldCount", {
	        get: function () {
	            return this._groupedProvider.groupCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "groupByFields", {
	        /** groupByFields */
	        get: function () {
	            return this._groupedProvider.groupedFields;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "expandWhenGrouping", {
	        /** expandWhenGrouping */
	        set: function (value) {
	            this._groupedProvider.expandWhenGrouping = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridItemProvider.prototype, "summarizer", {
	        /** summarizer */
	        get: function () {
	            return this._summarizer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridItemProvider.prototype.canGrouping = function (fields) {
	        return this._groupedProvider.canGrouping(fields);
	    };
	    GridItemProvider.prototype.getFieldDomain = function (field) {
	        return this._rs.getFieldDomain(field);
	    };
	    GridItemProvider.prototype.isFiltered = function (field) {
	        return field != null ? this._rs.hasFilter(field) : this._rs.hasFilters();
	    };
	    GridItemProvider.prototype.addFilter = function (field, refFiter) {
	        this._rs.addFilter(field, refFiter);
	    };
	    GridItemProvider.prototype.removeFilter = function (field, filter) {
	        this._rs.removeFilter(field, filter);
	    };
	    GridItemProvider.prototype.clearFilters = function (field) {
	        this._rs.clearFilters(field);
	    };
	    GridItemProvider.prototype.clearAllFilters = function () {
	        this._rs.clearAllFilters();
	    };
	    GridItemProvider.prototype.beginFiltering = function () {
	        this._rs.beginFilter();
	    };
	    GridItemProvider.prototype.endFiltering = function (filterCollection, filter) {
	        this._rs.endFilter(true, filterCollection, filter);
	    };
	    GridItemProvider.prototype.setHideDeletedRows = function (value) {
	        this._rs.hideDeleted = value;
	    };
	    GridItemProvider.prototype.orderBy = function (fields, directions, cases) {
	        if (this._groupedProvider.grouped && this._groupSorting) {
	            var len = directions ? directions.length : 0;
	            var clen = cases ? cases.length : 0;
	            var groupFields = this._groupedProvider.groupedFields;
	            var groupDirs = this._rs.getSortDirections();
	            var groupCases = this._rs.getSortCases();
	            var list = [];
	            for (var i = 0, cnt = groupFields.length; i < cnt; i++) {
	                list.push(groupFields[i]);
	            }
	            for (var i = 0, cnt = fields.length; i < cnt; i++) {
	                var fld = fields[i];
	                var g = list.indexOf(fld);
	                var dir = void 0;
	                var c = void 0;
	                if (len > i) {
	                    dir = directions[i];
	                }
	                else if (len > 0) { // 바로 앞의 것을 따라간다.
	                    dir = directions[len - 1];
	                }
	                else {
	                    dir = Types.SortDirection.ASCENDING;
	                }
	                if (clen > i) {
	                    c = cases[i];
	                }
	                else if (clen > 0) {
	                    c = cases[clen - 1];
	                }
	                else {
	                    c = Types.SortCase.SENSITIVE;
	                }
	                if (g < 0) {
	                    list.push(fld);
	                    groupDirs[list.length - 1] = dir;
	                    groupCases[list.length - 1] = c;
	                }
	                else {
	                    groupDirs[g] = dir;
	                    groupCases[g] = c;
	                }
	            }
	            groupFields = list;
	            this._rs.orderBy(groupFields, groupDirs, groupCases);
	        }
	        else {
	            this._rs.orderBy(fields, directions, cases);
	        }
	    };
	    GridItemProvider.prototype.getSortFields = function () {
	        return this._rs.getSortFields();
	    };
	    GridItemProvider.prototype.getSortDirections = function () {
	        return this._rs.getSortDirections();
	    };
	    GridItemProvider.prototype.getSortCases = function () {
	        return this._rs.getSortCases();
	    };
	    Object.defineProperty(GridItemProvider.prototype, "labelComparer", {
	        get: function () {
	            return this._rs.labelComparer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridItemProvider.prototype.setLabelComparer = function (comparer) {
	        this._rs.labelComparer = comparer;
	    };
	    GridItemProvider.prototype.groupBy = function (fields, sorting, direction, textCase) {
	        if (sorting === void 0) { sorting = true; }
	        if (direction === void 0) { direction = Types.SortDirection.ASCENDING; }
	        if (textCase === void 0) { textCase = Types.SortCase.SENSITIVE; }
	        if ((!fields || fields.length < 1) && !this._groupedProvider.grouped) {
	            return;
	        }
	        if (!this._groupedProvider.canGrouping(fields)) {
	            return;
	        }
	        this._groupSorting = sorting;
	        this._groupSortDirection = direction;
	        if (sorting) { // && fields && fields.length > 0) {
	            this._rs.orderBy(fields, [direction], [textCase], false);
	        }
	        this._groupedProvider.groupBy(fields);
	    };
	    GridItemProvider.prototype.groupByMode = function (fields, mergeMode) {
	        if (this._groupSorting) { // && fields && fields.length > 0) {
	            this._rs.orderBy(fields, [this._groupSortDirection], [this._groupSortCase], false);
	        }
	        if (!this._groupedProvider.canGrouping(fields)) {
	            return;
	        }
	        this._groupedProvider.groupByMode(fields, mergeMode);
	    };
	    GridItemProvider.prototype.addGroupBy = function (index, field, sorting) {
	        var fields;
	        if (this._groupedProvider.groupCount < 1) {
	            fields = [field];
	        }
	        else {
	            fields = this._groupedProvider.groupedFields;
	            fields.splice(index, 0, field);
	        }
	        this._groupSorting = index === 0 ? sorting : this._groupSorting;
	        if (!this._groupedProvider.canGrouping(fields)) {
	            return;
	        }
	        if (this._groupSorting) {
	            var dirs = [this._groupSortDirection];
	            this._rs.orderBy(fields, dirs, null, false);
	        }
	        this._groupedProvider.groupBy(fields);
	    };
	    GridItemProvider.prototype.removeGroupBy = function (field, includeLower) {
	        if (!this._groupedProvider.grouped) {
	            return;
	        }
	        var fields = this._groupedProvider.groupedFields;
	        var cnt = fields.length;
	        var idx = -1;
	        var rcnt = 0;
	        for (var i = cnt - 1; i >= 0; i--) {
	            rcnt++;
	            if (fields[i] == field) {
	                idx = i;
	                break;
	            }
	        }
	        if (idx >= 0) {
	            fields.splice(idx, includeLower ? rcnt : 1);
	            if (!this._groupedProvider.canGrouping(fields)) {
	                return;
	            }
	            if (this._groupSorting) {
	                this._rs.orderBy(fields, [this._groupSortDirection], null, false);
	            }
	            this._groupedProvider.groupBy(fields);
	        }
	        else {
	            if (!this._groupedProvider.canGrouping(null)) {
	                return;
	            }
	            if (this._groupSorting) {
	                this._rs.orderBy(null, null, null, false);
	            }
	        }
	    };
	    GridItemProvider.prototype.isGroupedField = function (field) {
	        return this._groupedProvider.isGroupedField(field);
	    };
	    GridItemProvider.prototype.getGroupLevel = function (field) {
	        return this._groupedProvider.getGroupLevel(field);
	    };
	    Object.defineProperty(GridItemProvider.prototype, "isGroupSorting", {
	        // setGroupedStyle(expandedAdornments, collapsedAdornments, createFooterCallback, handler) {
	        // 	this._groupedProvider._handler = handler;
	        // 	this._groupedProvider.setExpandedAdornments(expandedAdornments);
	        // 	this._groupedProvider.setCollapsedAdornments(collapsedAdornments);
	        // 	this._groupedProvider.setCreateFooterCallback(createFooterCallback);
	        // }
	        set: function (value) {
	            this._groupSorting = value;
	            this._groupedProvider["_groupSorting"] = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridItemProvider.prototype.expand = function (group, recursive, force, level) {
	        this._groupedProvider.expand(group, recursive, force, level);
	    };
	    GridItemProvider.prototype.collapse = function (group, recursive, force) {
	        this._groupedProvider.collapse(group, recursive, force);
	    };
	    GridItemProvider.prototype.setPaging = function (paging, pageSize, pageCount, pageSource) {
	        this._rs.setPaging(paging, pageSize, pageCount, pageSource);
	    };
	    Object.defineProperty(GridItemProvider.prototype, "page", {
	        get: function () {
	            return this._rs.page;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridItemProvider.prototype.setPage = function (value, startRow) {
	        this._rs.setPage(value, startRow);
	    };
	    Object.defineProperty(GridItemProvider.prototype, "pageCount", {
	        get: function () {
	            return this._rs.pageCount;
	        },
	        set: function (value) {
	            this._rs.pageCount = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridItemProvider.prototype.getDisplayItemIndex = function (item) {
	        return this._rs.isPaging ? item.index + this._rs.pageStartIndex : item.index;
	    };
	    GridItemProvider.prototype.getCheckedRows = function (allRows) {
	        return this._rs.getCheckedRows(allRows);
	    };
	    Object.defineProperty(GridItemProvider.prototype, "checkableExpression", {
	        set: function (expr) {
	            this._rs.checkableExpression = expr;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridItemProvider.prototype.resetCheckables = function () {
	        this._rs.resetCheckables();
	    };
	    GridItemProvider.prototype.applyCheckables = function () {
	        this._rs.applyCheckables();
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridItemProvider.prototype.getAllItems = function () {
	        return this._groupedProvider.getAllItems();
	    };
	    // getPagingAllItems(): GridItem[] {
	    // 	let rs = this._itemProvider;
	    // 	return rs.isSorted ? rs._sortedItems.slice() : rs._items.slice();
	    // }
	    GridItemProvider.prototype.findItem = function (fields, values, options, startIndex, endIndex) {
	        return this._groupedProvider.findItem(fields, values, options, startIndex, endIndex);
	    };
	    GridItemProvider.prototype.findCell = function (fields, value, options, startIndex, endIndex, startFieldIndex) {
	        return this._groupedProvider.findCell(fields, value, options, startIndex, endIndex, startFieldIndex);
	    };
	    GridItemProvider.prototype.checkItems = function (items, checked, checkEvent) {
	        this._groupedProvider.checkItems(items, checked, checkEvent);
	    };
	    GridItemProvider.prototype.checkItem = function (item, checked, exclusive, checkEvent) {
	        this._groupedProvider.checkItem(item, checked, exclusive, checkEvent);
	    };
	    GridItemProvider.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent, groupCheckable) {
	        this._groupedProvider.checkAll(checked, visibleOnly, checkableOnly, checkEvent, groupCheckable);
	    };
	    GridItemProvider.prototype.hasCellStyle = function () {
	        return this._rs.hasCellStyle();
	    };
	    GridItemProvider.prototype.setCellStyle = function (row, field, style) {
	        this._rs.setCellStyle(row, field, style);
	    };
	    GridItemProvider.prototype.setCellStyles = function (rs, rows, fieldMap) {
	        this._rs.setCellStyles(rs, rows, fieldMap);
	    };
	    GridItemProvider.prototype.clearCellStyles = function () {
	        this._rs.clearCellStyles();
	    };
	    GridItemProvider.prototype.removeCellStyle = function (style) {
	        this._rs.removeCellStyle(style);
	    };
	    GridItemProvider.prototype.getCellStyle = function (dataRow, field) {
	        return this._rs.getCellStyle(dataRow, field);
	    };
	    GridItemProvider.prototype.checkCellStyle = function (dataRow, field) {
	        return this._rs.checkCellStyle(dataRow, field);
	    };
	    GridItemProvider.prototype.setCellEditable = function (dataRow, column, value) {
	        this._rs.setCellEditable(dataRow, column, value);
	    };
	    GridItemProvider.prototype.setCellReadOnly = function (dataRow, column, value) {
	        this._rs.setCellReadOnly(dataRow, column, value);
	    };
	    GridItemProvider.prototype.getCellEditable = function (dataRow, column) {
	        return this._rs.getCellEditable(dataRow, column);
	    };
	    GridItemProvider.prototype.getCellReadOnly = function (dataRow, column) {
	        return this._rs.getCellReadOnly(dataRow, column);
	    };
	    GridItemProvider.prototype.setCellCursor = function (dataRow, column, value) {
	        this._rs.setCellCursor(dataRow, column, value);
	    };
	    GridItemProvider.prototype.getCellCursor = function (dataRow, column) {
	        return this._rs.getCellCursor(dataRow, column);
	    };
	    GridItemProvider.prototype.setCellEditor = function (dataRow, column, value) {
	        this._rs.setCellEditor(dataRow, column, value);
	    };
	    GridItemProvider.prototype.getCellEditor = function (dataRow, column) {
	        return this._rs.getCellEditor(dataRow, column);
	    };
	    GridItemProvider.prototype.clearEditableMap = function () {
	        return this._rs.clearEditableMap();
	    };
	    GridItemProvider.prototype.getItemOfRow = function (dataRow, force) {
	        if (force === void 0) { force = false; }
	        return this._rs.getItemOfRow(dataRow, force);
	    };
	    GridItemProvider.prototype._doBeginUpdate = function (item) {
	        var editItem = _super.prototype._doBeginUpdate.call(this, item);
	        this._groupedProvider["$_setEditItem"](editItem);
	        return editItem;
	    };
	    GridItemProvider.prototype._doBeginAppendDummy = function () {
	        var dummyEditItem = _super.prototype._doBeginAppendDummy.call(this);
	        this._groupedProvider["$_setDummyEditItem"](dummyEditItem);
	        return dummyEditItem;
	    };
	    GridItemProvider.prototype._doBeginAppend = function (defaultValues) {
	        var editItem = _super.prototype._doBeginAppend.call(this, defaultValues);
	        this._groupedProvider["$_setEditItem"](editItem);
	        return editItem;
	    };
	    GridItemProvider.prototype._doBeginInsert = function (item, defaultValues, shift, ctrl) {
	        var editItem = _super.prototype._doBeginInsert.call(this, item, defaultValues, shift, ctrl);
	        this._groupedProvider["$_setEditItem"](editItem);
	        return editItem;
	    };
	    GridItemProvider.prototype._doCancelDummyEdit = function () {
	        _super.prototype._doCancelDummyEdit.call(this);
	        this._groupedProvider["$_setDummyEditItem"](null);
	    };
	    GridItemProvider.prototype._doCancelEdit = function (state, orgItem) {
	        _super.prototype._doCancelEdit.call(this, state, orgItem);
	        this._groupedProvider["$_setEditItem"](null);
	    };
	    GridItemProvider.prototype._doCommitEdit = function (state, orgItem) {
	        if (_super.prototype._doCommitEdit.call(this, state, orgItem)) {
	            this._groupedProvider["$_setEditItem"](null);
	            return true;
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------	
	    GridItemProvider.prototype.onGroupedItemProviderGrouping = function (rs, fields) {
	        return this.fireConfirmEvent(GroupedItemProvider_1.GroupedItemProvider.GROUPING, fields);
	    };
	    GridItemProvider.prototype.onGroupedItemProviderGrouped = function (rs) {
	        this.fireEvent(GroupedItemProvider_1.GroupedItemProvider.GROUPED);
	    };
	    GridItemProvider.prototype.onGroupedItemProviderExpand = function (rs, group) {
	        this.fireEvent(GroupedItemProvider_1.GroupedItemProvider.EXPAND, group);
	    };
	    GridItemProvider.prototype.onGroupedItemProviderExpanded = function (rs, group) {
	        this.fireEvent(GroupedItemProvider_1.GroupedItemProvider.EXPANDED, group);
	    };
	    GridItemProvider.prototype.onGroupedItemProviderCollapse = function (rs, group) {
	        this.fireEvent(GroupedItemProvider_1.GroupedItemProvider.COLLAPSE, group);
	    };
	    GridItemProvider.prototype.onGroupedItemProviderCollapsed = function (rs, group) {
	        this.fireEvent(GroupedItemProvider_1.GroupedItemProvider.COLLAPSED, group);
	    };
	    GridItemProvider.prototype.onItemProviderFilterAdded = function (rs, field, criteria) {
	        this._fireFilterAdded(field, criteria);
	    };
	    GridItemProvider.prototype.onItemProviderFilterRemoved = function (rs, field, filter) {
	        this._fireFilterRemoved(field, filter);
	    };
	    GridItemProvider.prototype.onItemProviderFilterCleared = function (rs, field) {
	        this._fireFilterCleared(field);
	    };
	    GridItemProvider.prototype.onItemProviderFilterAllCleared = function (rs) {
	        this._fireFilterAllCleared();
	    };
	    GridItemProvider.prototype.onItemProviderFiltered = function (rs) {
	        //this.fireFiltered(filterCollection, filter);
	    };
	    GridItemProvider.prototype.onItemProviderSort = function (rs, fields, directions) {
	        this._fireSort(fields, directions, null);
	    };
	    GridItemProvider.prototype.onItemProviderSorted = function (rs) {
	        this._fireSorted();
	    };
	    return GridItemProvider;
	}(EditableItemProvider_1.EditableItemProviderImpl));
	exports.GridItemProvider = GridItemProvider;
	});

	unwrapExports(GridItemProvider_1);
	var GridItemProvider_2 = GridItemProvider_1.GridItemProvider;

	var HandleElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// HandleElement.ts
	// 2019. 09. 03. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var HandleElement = /** @class */ (function (_super) {
	    __extends(HandleElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function HandleElement(owner, name) {
	        if (name === void 0) { name = null; }
	        var _this = _super.call(this, name) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._clickable = false;
	        _this._owner = owner;
	        return _this;
	    }
	    HandleElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(HandleElement.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(HandleElement.prototype, "clickable", {
	        /** clickable */
	        get: function () {
	            return this._clickable;
	        },
	        set: function (value) {
	            if (value != this._clickable) {
	                this._clickable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    HandleElement.prototype._getCssSelector = function () {
	        return "";
	    };
	    HandleElement.prototype._doDraw = function (dom) {
	    };
	    HandleElement.prototype._hoverChanged = function () {
	        this.invalidate();
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    HandleElement.prototype._changed = function () {
	        this.invalidate();
	    };
	    return HandleElement;
	}(VisualElement_1.VisualElement));
	exports.HandleElement = HandleElement;
	var CellHandle = /** @class */ (function (_super) {
	    __extends(CellHandle, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function CellHandle(cellView, name) {
	        if (name === void 0) { name = null; }
	        return _super.call(this, cellView, name) || this;
	    }
	    CellHandle.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(CellHandle.prototype, "cellView", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** cellView */
	        get: function () {
	            return this.owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return CellHandle;
	}(HandleElement));
	exports.CellHandle = CellHandle;
	});

	unwrapExports(HandleElement_1);
	var HandleElement_2 = HandleElement_1.HandleElement;
	var HandleElement_3 = HandleElement_1.CellHandle;

	var RowGroupElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridElement.ts
	// 2019. 07. 24. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });












	var RowGroupHeadCellElement = /** @class */ (function (_super) {
	    __extends(RowGroupHeadCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupHeadCellElement() {
	        return _super.call(this, "rowGroupHeadCellView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupHeadCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        dom.textContent = "";
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupHeadCellElement.prototype._doRender = function (dom) {
	    };
	    return RowGroupHeadCellElement;
	}(CellElement_1.CellElement));
	var RowGroupHeadElement = /** @class */ (function (_super) {
	    __extends(RowGroupHeadElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupHeadElement() {
	        var _this = _super.call(this, null, "rowGroupHeadView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        _this._levels = 0;
	        _this._count = 0;
	        return _this;
	    }
	    RowGroupHeadElement.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupHeadElement.prototype.prepare = function (levels, summary) {
	        this._levels = levels;
	        this._count = summary ? levels * 2 : levels;
	        while (this._cells.length < this._count) {
	            var cell = new RowGroupHeadCellElement();
	            this._cells.push(cell);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupHeadElement.prototype._getCssSelector = function () {
	        return "rg-rowgroup-head";
	    };
	    RowGroupHeadElement.prototype._getTableRowHeight = function (lm, row) {
	        return (row == 1) ? lm.summaryBounds.height : lm.headBounds.height;
	    };
	    RowGroupHeadElement.prototype._doPrepareTableExtents = function (lm) {
	        if (this._count > 0) {
	            var w = this.width / this._levels;
	            for (var i = 0; i < this._count; i++) {
	                this._cells[i].width = w;
	            }
	        }
	    };
	    RowGroupHeadElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    RowGroupHeadElement.prototype._doLayoutContent = function (lm) {
	        var count = this._count;
	        while (this.childCount < count) {
	            this.addChild(this._cells[this.childCount]);
	        }
	        while (this.childCount > count) {
	            this.removeLast();
	        }
	    };
	    RowGroupHeadElement.prototype._doRender = function (dom) {
	    };
	    RowGroupHeadElement.prototype._getTableRowCount = function (lm) {
	        return 2;
	    };
	    RowGroupHeadElement.prototype._getCellCount = function (lm) {
	        return this._count;
	    };
	    RowGroupHeadElement.prototype._getCellWidth = function (lm, col) {
	        return this._cells[col].width;
	    };
	    return RowGroupHeadElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.RowGroupHeadElement = RowGroupHeadElement;
	var RowGroupFootCellElement = /** @class */ (function (_super) {
	    __extends(RowGroupFootCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFootCellElement() {
	        return _super.call(this, "rowGroupFootCellView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupFootCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        dom.textContent = "";
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupFootCellElement.prototype._doRender = function (dom) {
	    };
	    return RowGroupFootCellElement;
	}(CellElement_1.CellElement));
	var RowGroupFootElement = /** @class */ (function (_super) {
	    __extends(RowGroupFootElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFootElement() {
	        var _this = _super.call(this, null, "rowGroupFootView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        _this._levels = 0;
	        return _this;
	    }
	    RowGroupFootElement.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupFootElement.prototype.prepare = function (levels) {
	        this._levels = levels;
	        while (this._cells.length < levels) {
	            var cell = new RowGroupFootCellElement();
	            this._cells.push(cell);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupFootElement.prototype._getCssSelector = function () {
	        return "rg-rowgroup-foot";
	    };
	    RowGroupFootElement.prototype._getTableRowHeight = function (lm, row) {
	        return lm.footBounds.height;
	    };
	    RowGroupFootElement.prototype._doPrepareTableExtents = function (lm) {
	        if (this._levels > 0) {
	            var w = this.width / this._levels;
	            for (var i = 0; i < this._levels; i++) {
	                this._cells[i].width = w;
	            }
	        }
	    };
	    RowGroupFootElement.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    RowGroupFootElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var count = this._levels;
	        while (this.childCount < count) {
	            this.addChild(this._cells[this.childCount]);
	        }
	        while (this.childCount > count) {
	            this.removeLast();
	        }
	    };
	    RowGroupFootElement.prototype._doRender = function (dom) {
	    };
	    RowGroupFootElement.prototype._getTableRowCount = function (lm) {
	        return 1;
	    };
	    RowGroupFootElement.prototype._getCellCount = function (lm) {
	        return this._levels;
	    };
	    RowGroupFootElement.prototype._getCellWidth = function (lm, col) {
	        return this._cells[col].width;
	    };
	    return RowGroupFootElement;
	}(TableBaseElement_1.SimpleTableElement));
	exports.RowGroupFootElement = RowGroupFootElement;
	var RowGroupExpandHandle = /** @class */ (function (_super) {
	    __extends(RowGroupExpandHandle, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupExpandHandle(cellView) {
	        var _this = _super.call(this, cellView, "rowGroupExpandHandle") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._expanded = false;
	        _this.clickable = true;
	        return _this;
	    }
	    Object.defineProperty(RowGroupExpandHandle.prototype, "expanded", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanded */
	        get: function () {
	            return this._expanded;
	        },
	        set: function (value) {
	            if (value != this._expanded) {
	                this._expanded = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupExpandHandle.prototype._createDom = function () {
	        return document.createElement("img");
	    };
	    RowGroupExpandHandle.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        dom.style.position = "";
	        //dom.style.display = "inline-block";
	    };
	    RowGroupExpandHandle.prototype._getCssSelector = function () {
	        return "";
	    };
	    RowGroupExpandHandle.prototype._getCssDisplay = function () {
	        return "";
	    };
	    RowGroupExpandHandle.prototype._doDraw = function (dom) {
	        dom.src = this._expanded ? "images/expanded.png" : "images/collapsed.png";
	    };
	    return RowGroupExpandHandle;
	}(HandleElement_1.CellHandle));
	exports.RowGroupExpandHandle = RowGroupExpandHandle;
	var RowGroupBarCellElement = /** @class */ (function (_super) {
	    __extends(RowGroupBarCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupBarCellElement() {
	        var _this = _super.call(this, "rowGroupBarCell") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._level = 0;
	        _this._expander = new RowGroupExpandHandle(_this);
	        _this.addChild(_this._expander);
	        return _this;
	    }
	    Object.defineProperty(RowGroupBarCellElement.prototype, "level", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** level */
	        get: function () {
	            return this._level;
	        },
	        set: function (value) {
	            this._level = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupBarCellElement.prototype.updateCell = function (grid, model, dom) {
	        _super.prototype.updateCell.call(this, grid, model, dom);
	        var item = model.item;
	        if (item instanceof GridItem_1.GroupItemImpl && item.level == this.bar.l) {
	            dom.appendChild(this._expander["_dom"]);
	            // TODO 아이콘 크기에 맞게 표시되도록 개선할 것!
	            this._expander.setBounds(1, 1, 13, 13);
	            this._expander.expanded = item.expanded;
	            this._expander.visible = true;
	        }
	        else {
	            this._expander.visible = false;
	        }
	        dom.style.paddingTop = "2px";
	    };
	    RowGroupBarCellElement.prototype.validate = function () {
	        _super.prototype.validate.call(this);
	        var dom = this._expander["_dom"];
	        dom && dom.parentElement && dom.parentElement.removeChild(dom);
	    };
	    return RowGroupBarCellElement;
	}(CellElement_1.CellElement));
	var RowGroupBarContainer = /** @class */ (function (_super) {
	    __extends(RowGroupBarContainer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupBarContainer() {
	        var _this = _super.call(this, null, "rowGroupBarContainer") || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        _this._levels = 0;
	        _this._bars = [];
	        return _this;
	    }
	    RowGroupBarContainer.prototype._doDispose = function () {
	        this._cells = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupBarContainer.prototype.prepare = function (grid, levels) {
	        this._levels = levels;
	    };
	    RowGroupBarContainer.prototype.getLevelIndent = function (level) {
	        return level * this.width / this._levels;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupBarContainer.prototype._getCssSelector = function () {
	        return "rg-rowgroup-bar";
	    };
	    RowGroupBarContainer.prototype._prepareCellContent = function (cell, index) {
	        var elt = document.createElement("div");
	        return elt;
	    };
	    RowGroupBarContainer.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var rowGroup = grid.rowGroup;
	        var wLevel = this.width / this._levels;
	        var bars = this._bars;
	        var count = bars.length;
	        var topIndex = lm.topIndex;
	        var fixedCount = lm.fixedItemCount;
	        var fixed = fixedCount > 0;
	        var view;
	        while (this.childCount < count) {
	            if (this._cells.length > 0) {
	                view = this._cells.pop();
	            }
	            else {
	                view = this._createCell();
	            }
	            this.addChild(view);
	        }
	        while (this.childCount > count) {
	            view = this.removeLast();
	            view.validate();
	            this._cells.push(view);
	        }
	        for (var i = 0; i < count; i++) {
	            var bar = bars[i];
	            view = this.getChild(i);
	            var r = bar.tr1;
	            var row = !fixed ? r + topIndex : (r < fixedCount) ? r : r - 1 + topIndex;
	            var index = CellIndex_1.CellIndex.temp(grid, row);
	            var cell = rowGroup.getBarCell(index);
	            var rc = lm.getItemBounds(bar.r);
	            view.bar = bar;
	            view.level = bar.c + 1;
	            view.updateCell(grid, cell, this.getCellContent(r, bar.c));
	            rc.x = wLevel * bar.c;
	            rc.width = wLevel;
	            view.setRect(rc);
	        }
	    };
	    RowGroupBarContainer.prototype._doRender = function (target) {
	    };
	    RowGroupBarContainer.prototype._doPrepareTableRows = function (lm, body) {
	        _super.prototype._doPrepareTableRows.call(this, lm, body);
	        this.$_layoutBars(lm, body);
	    };
	    RowGroupBarContainer.prototype._getCellCount = function (lm) {
	        return this._levels;
	    };
	    RowGroupBarContainer.prototype._getCellWidth = function (lm, col) {
	        return this.width / this._levels;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    // private $_getCellSelector(td: HTMLTableDataCellElement): string {
	    //     return "rg-rowgroup-bar-cell";
	    // }
	    RowGroupBarContainer.prototype._createCell = function () {
	        return new RowGroupBarCellElement();
	    };
	    RowGroupBarContainer.prototype.$_calcLevels = function (items, level, index, count) {
	        var levels = new Array();
	        for (var i = index; i < count; i++) {
	            levels.push(items[i].level);
	        }
	        var p = -1;
	        var n = 0;
	        for (var i = 0; i < levels.length; i++) {
	            var lev = levels[i];
	            if (lev < level) {
	                levels[i] = 1;
	                if (p >= 0) {
	                    levels[p] = n;
	                    p = -1;
	                    n = 0;
	                }
	            }
	            else if (lev == level) {
	                if (p >= 0) {
	                    levels[p] = n;
	                }
	                p = i;
	                n = 1;
	            }
	            else {
	                if (p < 0) {
	                    p = i;
	                }
	                else {
	                    levels[i] = -1;
	                }
	                n++;
	            }
	        }
	        if (p >= 0) {
	            levels[p] = n;
	        }
	        return levels;
	    };
	    RowGroupBarContainer.prototype.$_layoutBars = function (lm, body) {
	        var grid = lm.grid;
	        var items = lm["$_getItems"]();
	        var itemCount = items.length;
	        var fixedCount = lm.fixedItemCount;
	        var top = lm.topIndex;
	        var trows = body.children;
	        var bars = this._bars = [];
	        if (itemCount < 1)
	            return;
	        for (var c = 0, colCount = this._getCellCount(lm); c < colCount; c++) {
	            var level = c + 1;
	            var i = 0;
	            var tr = 0;
	            if (fixedCount > 0) {
	                var trow = void 0;
	                var td = void 0;
	                for (; i < fixedCount; i++) {
	                    trow = trows[tr++];
	                    td = trow.children[c];
	                    td.style.display = "";
	                    td.removeAttribute("rowspan");
	                }
	                // fixed bar
	                trow = trows[tr++];
	                td = trow.children[c];
	                td.style.display = "";
	                td.removeAttribute("rowspan");
	            }
	            if (i < itemCount) {
	                var levels = this.$_calcLevels(items, level, i, itemCount);
	                for (var n = 0; i < itemCount; i++, n++, tr++) {
	                    var lev = levels[n];
	                    var trow = trows[tr];
	                    var td = trow.children[c];
	                    var item = items[i];
	                    if (lev > 0) {
	                        if (lev > 1 || item instanceof GridItem_1.GroupItemImpl && item.level == level) {
	                            bars.push({ r: i, tr1: tr, tr2: tr + lev - 1, c: c, l: level });
	                            td.rowSpan = lev;
	                            td.style.display = "";
	                        }
	                        else {
	                            td.removeAttribute("rowspan");
	                            td.style.display = "";
	                        }
	                    }
	                    else {
	                        td.removeAttribute("rowspan");
	                        td.style.display = "none";
	                    }
	                }
	            }
	        }
	        bars.sort(function (b1, b2) {
	            return b1.r - b2.r;
	        });
	    };
	    return RowGroupBarContainer;
	}(TableBaseElement_1.DataTableElement));
	exports.RowGroupBarContainer = RowGroupBarContainer;
	var RowGroupBarPane = /** @class */ (function (_super) {
	    __extends(RowGroupBarPane, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupBarPane() {
	        var _this = _super.call(this, "rowGroupBarPane") || this;
	        _this._barContainer = new RowGroupBarContainer();
	        _this.addChild(_this._barContainer);
	        _this._footView = new RowGroupFootElement();
	        _this.addChild(_this._footView);
	        _this._headView = new RowGroupHeadElement();
	        _this.addChild(_this._headView);
	        return _this;
	    }
	    RowGroupBarPane.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupBarPane.prototype, "levelCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this.grid.layoutManager.rowGroupLevels;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupBarPane.prototype.getLevelIndent = function (level) {
	        return this._barContainer.getLevelIndent(level);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupBarPane.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var levels = this.levelCount;
	        // this._prepareHeads();
	        // this._prepareFoots();
	        // this._prepareSummarys();
	        // this._prepareBars();
	        this._headView.prepare(levels, grid.headerSummaries.visible);
	        this._footView.prepare(levels);
	        this._barContainer.prepare(grid, levels);
	        return new Size_1.Size(this.levelCount * grid.rowGroup.levelIndent, hintHeight);
	    };
	    RowGroupBarPane.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var r = lm.headBounds;
	        var r2 = lm.summaryBounds;
	        if (this._headView.visible = (!r.isEmpty || !r2.isEmpty)) {
	            this._headView.setBounds(0, r.y, this.width, r.height + r2.height);
	            this._headView.layoutContent(lm);
	        }
	        r = lm.footBounds;
	        if (this._footView.visible = !r.isEmpty) {
	            this._footView.setBounds(0, r.y, this.width, r.height);
	            this._footView.layoutContent(lm);
	        }
	        r = lm.indicatorBounds;
	        this._barContainer.setBounds(0, r.y, this.width, r.height);
	        this._barContainer.layoutContent(lm);
	    };
	    return RowGroupBarPane;
	}(ContentPane_1.DataContentPane));
	exports.RowGroupBarPane = RowGroupBarPane;
	var RowGroupPane = /** @class */ (function (_super) {
	    __extends(RowGroupPane, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupPane() {
	        return _super.call(this, "rowGroupPane") || this;
	    }
	    RowGroupPane.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    return RowGroupPane;
	}(ContentPane_1.DataContentPane));
	exports.RowGroupPane = RowGroupPane;
	var RowGroupHeaderCellElement = /** @class */ (function (_super) {
	    __extends(RowGroupHeaderCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupHeaderCellElement() {
	        return _super.call(this, "rowGroupHeaderCellView") || this;
	    }
	    RowGroupHeaderCellElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupHeaderCellElement.prototype, "text", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        set: function (value) {
	            if (value != this._text) {
	                this._text = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupHeaderCellElement.prototype._createDom = function () {
	        return document.createElement("div");
	    };
	    RowGroupHeaderCellElement.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.top = "50%";
	        css.left = "0px";
	        css["msTransform"] = css.transform = "translate(0px, -50%)";
	        css.setProperty("overflow", "hidden", "important");
	        css.setProperty("pointer-events", "none", "important");
	    };
	    RowGroupHeaderCellElement.prototype._beforeDraw = function (dom) {
	    };
	    RowGroupHeaderCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        this["_dom"].textContent = model.text;
	    };
	    return RowGroupHeaderCellElement;
	}(CellElement_1.CellElement));
	exports.RowGroupHeaderCellElement = RowGroupHeaderCellElement;
	var RowGroupHeaderElement = /** @class */ (function (_super) {
	    __extends(RowGroupHeaderElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupHeaderElement() {
	        var _this = _super.call(this, "rowGroupHeaderView") || this;
	        _this._visIndex = -1;
	        _this._cellView = new RowGroupHeaderCellElement();
	        _this.addChild(_this._cellView);
	        return _this;
	    }
	    RowGroupHeaderElement.prototype._doDispose = function () {
	        this._item = null;
	        this._cellView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupHeaderElement.prototype, "item", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** item */
	        get: function () {
	            return this._item;
	        },
	        set: function (value) {
	            this._item = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupHeaderElement.prototype._getCssSelector = function () {
	        return "rg-rowgroup-header";
	    };
	    RowGroupHeaderElement.prototype._doDraw = function (dom) {
	        //dom.style.background = "#ffff0033";
	    };
	    RowGroupHeaderElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        this._cellView.updateCell(grid, grid.rowGroup.getHeaderCell(this._item), null);
	        this._cellView.setBounds(0, 0, this.width, this.height);
	    };
	    return RowGroupHeaderElement;
	}(GridElement_1.GridElement));
	exports.RowGroupHeaderElement = RowGroupHeaderElement;
	// export class RowGroupFooterCellElement extends ValueCellElement {
	//     //-------------------------------------------------------------------------
	//     // consts
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // property fields
	//     //-------------------------------------------------------------------------
	//     private _text: string;
	//     private _textVisible = true;
	//     //-------------------------------------------------------------------------
	//     // fields
	//     //-------------------------------------------------------------------------
	//     private _value: any;
	//     private _error: any;
	//     //-------------------------------------------------------------------------
	//     // constructor
	//     //-------------------------------------------------------------------------
	//     constructor() {
	//         super("rowGroupFooterCellView");
	//     }
	//     //-------------------------------------------------------------------------
	//     // properties
	//     //-------------------------------------------------------------------------
	//     /** text */
	//     get text(): string {
	//         return this._text;
	//     }
	//     set text(value: string) {
	//         if (value != this._text) {
	//             this._text = value;
	//             this._changed();
	//         }
	//     }
	//     /** textVisible */
	//     get textVisible(): boolean {
	//         return this._textVisible;
	//     }
	//     set textVisible(value: boolean) {
	//         if (value != this._textVisible) {
	//             this._textVisible = value;
	//             this._changed();
	//         }
	//     }
	//     /** value */
	//     get value(): number {
	//         return this._value;
	//     }
	//     /** error */
	//     get error(): any {
	//         return this._error;
	//     }
	//     //-------------------------------------------------------------------------
	//     // methods
	//     //-------------------------------------------------------------------------
	//     //-------------------------------------------------------------------------
	//     // overriden members
	//     //-------------------------------------------------------------------------
	//     protected _doPrepareValue(grid: GridBase, model: GridCell): void {
	//         super._doPrepareValue(grid, model);
	//         this._value = model.value;
	// 		this._error = model.error;
	//         let col = model.index.dataColumn;
	// 		let s: string = "";
	//         if (this._value !== undefined) {
	// 			if (model.index.column instanceof DataColumn && model.index.dataColumn.valueType == ValueType.DATETIME) {
	// 				if (this._value instanceof Date && this.datetimeWriter) {
	// 					s = this.datetimeWriter.getText(this._value)
	// 				} else {
	// 					s = model.text;
	// 				}
	// 			} else {
	// 				const v = Number(this._value);
	// 				if (!isNaN(v) && this.numberFormatter) {
	// 					s = this.numberFormatter.format(v);
	// 				} else if (this._value) {
	// 					s = this._value;
	// 				} else {
	// 					s = model.text;
	// 				}
	// 			}
	//         } else {
	//             s = model.text;
	//         }
	//         if (!s) {
	// 			// if (f = this.prefix()) {
	// 			// 	s = f + s;
	// 			// } 
	// 			// if (f = this.suffix()) {
	// 			// 	s = s + f;
	// 			// }
	//         }
	//         this._text = s;
	//         this._error = model.error;
	//     }
	//     protected _doUpdateContent(grid: GridBase, model: GridCell, dom: HTMLElement): void {
	//         dom.textContent = this._text;
	//     }
	//     //-------------------------------------------------------------------------
	//     // internal members
	//     //-------------------------------------------------------------------------
	// }
	var RowGroupFooterElement = /** @class */ (function (_super) {
	    __extends(RowGroupFooterElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //private _cells: {[key: number] : RowGroupFooterCellElement} = {};
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupFooterElement() {
	        return _super.call(this, "rowGroupFooterView") || this;
	    }
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupFooterElement.prototype._doLayoutContent_save = function (lm) {
	        var grid = lm.grid;
	        var rowGroup = grid.rowGroup;
	        var tr = this._getTableRow(lm, this._domIndex);
	        tr.className = "rg-rowgroup-footer";
	        //this.$_prepareCells(grid, rowGroup, lm, this._getStartCell(lm), this._getEndCell(lm));
	        //this.$_layoutCells(grid, rowGroup, lm, this._getStartCell(lm), this._getEndCell(lm));
	    };
	    RowGroupFooterElement.prototype._doLayoutContent = function (lm) {
	        var grid = lm.grid;
	        var rowGroup = grid.rowGroup;
	        var footerLayouts = lm.cellLayouts["_dataCells"];
	        var f = this._getFirstCell(lm);
	        var start = this._getStartCell(lm) - f;
	        var c1 = start;
	        var c2 = this._getEndCell(lm) - f;
	        if (this._item instanceof GroupedItemProvider_1.MergedGroupFooter) {
	            if (this._item["xxx"])
	                debugger;
	            // 앞 부분은 row element에서 그린다.
	            c1 = Math.max(start, grid.rowGroupLevels);
	        }
	        for (var r = 0; r < footerLayouts.length; r++) {
	            //const layouts = footerLayouts[r];
	            var tr = this._getTableRow(lm, this._domIndex + r);
	            var bcells = this._getBodyCells(this._domIndex + r);
	            tr.className = "rg-rowgroup-footer";
	            for (var c = c1; c <= c2; c++) {
	                //const layout = layouts[c + c1];
	                var bcell = bcells[c];
	                var layout = bcell.layout;
	                //const td = tr.children[c] as HTMLTableCellElement;
	                if (layout.isNull) {
	                    // td.style.display = "none";
	                    // td.removeAttribute("colspan");
	                    // td.removeAttribute("rowspan");
	                    if (!layout.isProxy) {
	                        bcell.setClassName("rg-rowgroup-footer-cell");
	                    }
	                }
	                else {
	                    // 확인 필요.
	                    // td.style.display = "";
	                    var index = CellIndex_1.CellIndex.temp(grid, this._item.index, layout);
	                    var model = rowGroup.getFooterCell(index);
	                    // if (layout["_cspan"] > 1) {
	                    //     td.colSpan = layout["_cspan"];
	                    // } else {
	                    //     td.removeAttribute("colspan");
	                    // }
	                    // if (layout["_fspan"] > 1) {
	                    //     td.rowSpan = layout["_fspan"];
	                    // } else {
	                    //     td.removeAttribute("rowspan");
	                    // }
	                    bcell.setClassName("rg-rowgroup-footer-cell");
	                    this._updateCell(grid, model, bcell);
	                }
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupFooterElement.prototype._getBodyCells = function (row) {
	        return this.parent["$_getBodyCells"](row);
	    };
	    RowGroupFooterElement.prototype._getTableRow = function (lm, row) {
	        return this.parent["$_getTableRow"](lm, row);
	    };
	    RowGroupFooterElement.prototype._getTableCell = function (col) {
	        return this.parent["$_getTableCell"](this._domIndex, col);
	    };
	    RowGroupFooterElement.prototype._getFirstCell = function (lm) {
	        return lm["_firstCell"];
	    };
	    RowGroupFooterElement.prototype._getLastCell = function (lm) {
	        return lm["_lastCell"];
	    };
	    RowGroupFooterElement.prototype._getStartCell = function (lm) {
	        return lm.getStartCell();
	    };
	    RowGroupFooterElement.prototype._getEndCell = function (lm) {
	        return lm.getEndCell();
	    };
	    /*
	    private $_prepareCell(grid: GridBase, rowGroup: RowGroup, lm: GridLayoutManager, col: number, room: any): void {
	        const column = lm.getLayout(col)["_columnObj"];
	        let view = this._cells[column["$_hash"]];

	        if (!view) {
	            view = new RowGroupFooterCellElement();
	            this._cells[column["$_hash"]] = view;
	            this.addChild(view);
	        }

	        view.visible = !room || room.base() === col;
	        
	        if (column instanceof ValueColumn) {
	            view.textVisible = !room || room.base() === col;
	        }

	        // var index = CellIndex.temp(grid, this.index(), column);
	        // var model = rowGroup.getFooterCell(index);
	        // view.updateCell(model);
	    }

	    private $_prepareCells(grid: GridBase, rowGroup: RowGroup, lm: GridLayoutManager, start: number, end: number): void {
	        // const mergeManager = grid.groupFooterMergeManager;
	        // const merged = mergeManager.count() > 0;

	        // if (grid.columnLayoutChanged) {
	        // 	this.clear();
	        // 	this._cells = {};
	        // }
	        this.hideAll();

	        for (let i = start; i <= end; i++) {
	            var room = null;//merged && mergeManager.findRoom(this._level, i);
	            this.$_prepareCell(grid, rowGroup, lm, i, room);
	        }
	        // if (merged) {
	        // 	var rooms = mergeManager.getRoomNames(this._level);
	        // 	for (var i = 0; i < rooms.length; i++) {
	        // 		var room = mergeManager.getRoom(this._level, rooms[i]);
	        // 		if (room && ((start > room.base() && start <= room.last()) ||
	        // 			         (end   < room.base() && end   >= room.start()))) {
	        // 			this._prepareCell(lm, room.base(), room);
	        // 		}
	        // 	}
	        // }
	    }
	    */
	    RowGroupFooterElement.prototype._getBodyView = function () {
	        return this.parent["_bodyView"];
	    };
	    // private $_layoutCells(grid: GridBase, rowGroup: RowGroup, lm: GridLayoutManager, start: number, end: number): void {
	    //     const bodyView = this._getBodyView();
	    //     const spanned = bodyView.spanned;
	    // 	const h = this.height;
	    //     for (let i = start; i <= end; i++) {
	    //         let col = i - start;
	    // 		const column = lm.getLayout(i)["_columnObj"] as ValueColumn;
	    //         // const view = this._cells[column["$_hash"]];
	    //         //view._shiftLeft = 0;
	    // 		const r = lm.getLayoutBounds(i);
	    // 		r.height = h;
	    //         // if (merged && (room = mergeManager.findRoom(this._level, i))) {
	    // 		// 	sr = lm.columnBounds(room.start());
	    // 		// 	er = lm.columnBounds(room.last());
	    // 		// 	r.width = er.right() - sr.x;
	    // 		// 	r.x = sr.x;
	    // 		// 	if (isChangeCellPos){
	    // 		// 		if (start == room.start()) {
	    // 		// 			r.width += w;
	    // 		// 			view._shiftLeft = w;
	    // 		// 		} else {
	    // 		// 			r.x += w;
	    // 		// 			view._shiftLeft = w;
	    // 		// 		}
	    // 		// 	}
	    // 		// } else {
	    // 		// 	if (isChangeCellPos) {
	    // 		// 		if (i == start) {
	    // 		// 			r.width += w;
	    // 		// 			view._shiftLeft = w;
	    // 		// 		} else {
	    // 		// 			r.x += w;
	    // 		// 		}
	    // 		// 	}
	    // 		// }
	    // 		// if (!isFixed && !isRightFixed) {
	    // 		// 	r.x -= leftPos;
	    //         // }
	    //         const index = CellIndex.temp(grid, this._item.index, column);
	    //         const model = rowGroup.getFooterCell(index);
	    //         const td = this._getTableCell(i - start);
	    //         if (spanned) {
	    //             const row = this._visIndex;
	    //             // if (bodyView.isMerged(row, col)) {
	    //             //     continue;
	    //             // }
	    //             if (column.isMerged(row)) {
	    //                 continue;
	    //             }
	    //         }
	    //         Utils.setClassName(td, "rg-rowgroup-footer-cell");
	    //         // td.className = "rg-rowgroup-footer-cell";
	    //         this._updateCell(grid, model, td);
	    //         // view.updateCell(grid, model, td.lastElementChild as HTMLElement);
	    //         // view.setRect(r);
	    // 		// view.layoutContent(lm);
	    //     }
	    //     // if (merged) {
	    // 	// 	var rooms = mergeManager.getRoomNames(this._level);
	    // 	// 	for (var i = 0; i < rooms.length; i++) {
	    // 	// 		var room = mergeManager.getRoom(this._level, rooms[i]);
	    // 	// 		if (room && ((start > room.base() && start <= room.last()) ||
	    // 	// 			         (end   < room.base() && end   >= room.start()))) {
	    // 	// 			sr = lm.columnBounds(room.start());
	    // 	// 			r = sr;	
	    // 	// 			er = lm.columnBounds(room.last());	
	    // 	// 			r.width = er.right() - sr.x;
	    // 	// 			if (isChangeCellPos){
	    // 	// 				if (start == room.start()) {
	    // 	// 					r.width += w;
	    // 	// 					view._shiftLeft = w;
	    // 	// 				} else {
	    // 	// 					r.x += w;
	    // 	// 					view._shiftLeft = w;
	    // 	// 				}
	    // 	// 			}
	    // 	// 			r.height = h;
	    // 	// 			if (!isFixed && !isRightFixed) {
	    // 	// 				r.x -= leftPos;
	    // 	// 			}
	    // 	// 			view = this._cells[lm.getColumn(room.base()).$_hash];
	    // 	// 			view.setRect(r);
	    // 	// 			view.layoutContent(lm);	
	    // 	// 		}
	    // 	// 	}		
	    // 	// }
	    // }
	    RowGroupFooterElement.prototype._updateCell = function (grid, model, cell) {
	        // TODO: group footer renderer가 필요
	        //cell.setText(cell.cell.lastElementChild, model.text);
	        cell.cell.lastElementChild.textContent = model.text;
	    };
	    return RowGroupFooterElement;
	}(ItemElement_1.ItemElement));
	exports.RowGroupFooterElement = RowGroupFooterElement;
	var RowGroupFixedFooterElement = /** @class */ (function (_super) {
	    __extends(RowGroupFixedFooterElement, _super);
	    function RowGroupFixedFooterElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupFixedFooterElement.prototype._getTableRow = function (lm, row) {
	        return this.parent["$_getFixedTableRow"](row);
	    };
	    RowGroupFixedFooterElement.prototype._getTableCell = function (col) {
	        return this.parent["$_getFixedTableCell"](this._domIndex, col);
	    };
	    RowGroupFixedFooterElement.prototype._getBodyView = function () {
	        return this.parent["_fixedView"];
	    };
	    RowGroupFixedFooterElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    RowGroupFixedFooterElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    RowGroupFixedFooterElement.prototype._getStartCell = function (lm) {
	        return 0;
	    };
	    RowGroupFixedFooterElement.prototype._getEndCell = function (lm) {
	        return lm.fixedLayoutCount - 1;
	    };
	    return RowGroupFixedFooterElement;
	}(RowGroupFooterElement));
	exports.RowGroupFixedFooterElement = RowGroupFixedFooterElement;
	var RowGroupRightFooterElement = /** @class */ (function (_super) {
	    __extends(RowGroupRightFooterElement, _super);
	    function RowGroupRightFooterElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupRightFooterElement.prototype._getTableRow = function (lm, row) {
	        return this.parent["$_getRightTableRow"](row);
	    };
	    RowGroupRightFooterElement.prototype._getTableCell = function (col) {
	        return this.parent["$_getRightTableCell"](this._domIndex, col);
	    };
	    RowGroupRightFooterElement.prototype._getBodyView = function () {
	        return this.parent["_rightView"];
	    };
	    RowGroupRightFooterElement.prototype._getFirstCell = function (lm) {
	        return this._getStartCell(lm);
	    };
	    RowGroupRightFooterElement.prototype._getLastCell = function (lm) {
	        return this._getEndCell(lm);
	    };
	    RowGroupRightFooterElement.prototype._getStartCell = function (lm) {
	        return lm.layoutCount - lm.rightLayoutCount;
	    };
	    RowGroupRightFooterElement.prototype._getEndCell = function (lm) {
	        return lm.layoutCount - 1;
	    };
	    return RowGroupRightFooterElement;
	}(RowGroupFooterElement));
	exports.RowGroupRightFooterElement = RowGroupRightFooterElement;
	var RowGroupElement = /** @class */ (function (_super) {
	    __extends(RowGroupElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupElement(name) {
	        var _this = _super.call(this, name || "rowGroupLayer") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._headerPool = [];
	        _this._headerViews = [];
	        _this._footerPool = [];
	        _this._footerViews = [];
	        _this._fixedFooterPool = [];
	        _this._fixedFooterViews = [];
	        _this._rightFooterPool = [];
	        _this._rightFooterViews = [];
	        _this._indents = [];
	        return _this;
	    }
	    RowGroupElement.prototype._doDispose = function () {
	        this._bodyView = this._fixedView = this._rightView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupElement.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** grid */
	        get: function () {
	            return this.getAncestor(GridView_1.GridView);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupElement.prototype.layout = function (lm) {
	        this._doPrepareContent(lm);
	        this._doLayoutContent(lm);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupElement.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.setProperty("overflow", "hidden", "important");
	        css.setProperty("pointer-events", "none", "important");
	    };
	    RowGroupElement.prototype._getCssSelector = function () {
	        return "rg-rowgroup-layer";
	    };
	    RowGroupElement.prototype._doDraw = function (dom) {
	        //dom.style.background = "#ffff0033";
	    };
	    RowGroupElement.prototype._doPrepareContent = function (lm) {
	        this.$_prepareHeaders(lm);
	    };
	    RowGroupElement.prototype.$_prepareIndents = function (lm) {
	        var indents = this._indents;
	        var levels = lm.rowGroupLevels + 1;
	        for (var i = 0; i < indents.length; i++) {
	            indents[i] = lm.getLevelIndent(i);
	        }
	        while (indents.length < levels) {
	            indents.push(lm.getLevelIndent(indents.length));
	        }
	        return indents;
	    };
	    RowGroupElement.prototype._doLayoutContent = function (lm) {
	        var indents = this.$_prepareIndents(lm);
	        var items = lm["$_getItems"]();
	        var itemCount = items.length;
	        var fixedCount = lm.fixedItemCount;
	        var fixed = fixedCount > 0;
	        var w = this.width;
	        var nHeader = 0;
	        var nFooter = 0;
	        var trs = this._bodyView["_trs"];
	        var i = fixedCount;
	        var tr = fixed ? i * trs + 1 : i * trs;
	        for (; i < itemCount; i++) {
	            var item = items[i];
	            // gropu header
	            if (item instanceof GridItem_1.GroupItemImpl) {
	                var view = this._headerViews[nHeader++];
	                var r = lm.getItemBounds(i);
	                var indent = indents[item.level];
	                view.item = item;
	                view["_visIndex"] = i - fixedCount;
	                view.setBounds(indent, r.y, w - indent, r.height);
	                view.layoutContent(lm);
	                tr++;
	            }
	            else if (item instanceof GridItem_1.GroupFooter) {
	                //const vr = i - fixedCount;
	                if (this._fixedView) {
	                    var view_1 = this._fixedFooterViews[nFooter];
	                    view_1.updateItem(item, tr);
	                    view_1.layoutContent(lm);
	                }
	                if (this._rightView) {
	                    var view_2 = this._rightFooterViews[nFooter];
	                    view_2.updateItem(item, tr);
	                    view_2.layoutContent(lm);
	                }
	                var view = this._footerViews[nFooter++];
	                if (!view)
	                    debugger;
	                view.updateItem(item, tr);
	                view.layoutContent(lm);
	                tr += trs;
	            }
	            else {
	                tr += trs;
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    RowGroupElement.prototype.$_prepareHeaders = function (lm) {
	        var items = lm["$_getItems"]();
	        var n = 0;
	        for (var i = lm.fixedItemCount, cnt = items.length; i < cnt; i++) {
	            if (items[i] instanceof GridItem_1.GroupItemImpl) {
	                n++;
	            }
	        }
	        while (this._headerViews.length < n) {
	            var view = this._headerPool.pop();
	            if (!view) {
	                view = new RowGroupHeaderElement();
	            }
	            this.addChild(view);
	            this._headerViews.push(view);
	        }
	        while (this._headerViews.length > n) {
	            var view = this._headerViews.pop();
	            this.removeChild(view);
	            this._headerPool.push(view);
	        }
	    };
	    /**
	     * GridViewLayoutManager에서 호출한다.
	     */
	    RowGroupElement.prototype.$_prepareGroupItems = function (lm, bodyView, fixedView, rightView) {
	        this._bodyView = bodyView;
	        this._fixedView = fixedView;
	        this._rightView = rightView;
	    };
	    /**
	     * GridViewLayoutManager에서 호출한다.
	     */
	    RowGroupElement.prototype.$_prepareGroupFooters = function (items, lm) {
	        var n = 0;
	        for (var i = lm.fixedItemCount, cnt = items.length; i < cnt; i++) {
	            if (items[i] instanceof GridItem_1.GroupFooter) {
	                n++;
	            }
	        }
	        while (this._footerViews.length < n) {
	            var view = this._footerPool.pop();
	            if (!view) {
	                view = new RowGroupFooterElement();
	            }
	            this.addChild(view);
	            this._footerViews.push(view);
	        }
	        while (this._footerViews.length > n) {
	            var view = this._footerViews.pop();
	            this.removeChild(view);
	            this._footerPool.push(view);
	        }
	        if (this._fixedView) {
	            while (this._fixedFooterViews.length < n) {
	                var view = this._fixedFooterPool.pop();
	                if (!view) {
	                    view = new RowGroupFixedFooterElement();
	                }
	                this.addChild(view);
	                this._fixedFooterViews.push(view);
	            }
	            while (this._fixedFooterViews.length > n) {
	                var view = this._fixedFooterViews.pop();
	                this.removeChild(view);
	                this._fixedFooterPool.push(view);
	            }
	        }
	        if (this._rightView) {
	            while (this._rightFooterViews.length < n) {
	                var view = this._rightFooterPool.pop();
	                if (!view) {
	                    view = new RowGroupRightFooterElement();
	                }
	                this.addChild(view);
	                this._rightFooterViews.push(view);
	            }
	            while (this._rightFooterViews.length > n) {
	                var view = this._rightFooterViews.pop();
	                this.removeChild(view);
	                this._rightFooterPool.push(view);
	            }
	        }
	    };
	    RowGroupElement.prototype.$_getTableRow = function (lm, row) {
	        return this._bodyView["_tbody"].children[row];
	    };
	    RowGroupElement.prototype.$_getTableCell = function (row, col) {
	        return this._bodyView["_tbody"].children[row].children[col];
	    };
	    RowGroupElement.prototype.$_getFixedTableRow = function (row) {
	        return this._fixedView["_tbody"].children[row];
	    };
	    RowGroupElement.prototype.$_getFixedTableCell = function (row, col) {
	        return this._fixedView["_tbody"].children[row].children[col];
	    };
	    RowGroupElement.prototype.$_getRightTableRow = function (row) {
	        return this._rightView["_tbody"].children[row];
	    };
	    RowGroupElement.prototype.$_getRightTableCell = function (row, col) {
	        return this._rightView["_tbody"].children[row].children[col];
	    };
	    RowGroupElement.prototype.$_getBodyCells = function (row) {
	        return this._bodyView["_cells"][row];
	    };
	    return RowGroupElement;
	}(VisualElement_1.LayerElement));
	exports.RowGroupElement = RowGroupElement;
	});

	unwrapExports(RowGroupElement_1);
	var RowGroupElement_2 = RowGroupElement_1.RowGroupHeadElement;
	var RowGroupElement_3 = RowGroupElement_1.RowGroupFootElement;
	var RowGroupElement_4 = RowGroupElement_1.RowGroupExpandHandle;
	var RowGroupElement_5 = RowGroupElement_1.RowGroupBarContainer;
	var RowGroupElement_6 = RowGroupElement_1.RowGroupBarPane;
	var RowGroupElement_7 = RowGroupElement_1.RowGroupPane;
	var RowGroupElement_8 = RowGroupElement_1.RowGroupHeaderCellElement;
	var RowGroupElement_9 = RowGroupElement_1.RowGroupHeaderElement;
	var RowGroupElement_10 = RowGroupElement_1.RowGroupFooterElement;
	var RowGroupElement_11 = RowGroupElement_1.RowGroupFixedFooterElement;
	var RowGroupElement_12 = RowGroupElement_1.RowGroupRightFooterElement;
	var RowGroupElement_13 = RowGroupElement_1.RowGroupElement;

	var GroupingOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GroupingOptions.ts
	// 2019. 08. 28. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });


	var GroupingOptions = /** @class */ (function (_super) {
	    __extends(GroupingOptions, _super);
	    // private _removeIncludeLower: false,
	    // private _removeButton: null,
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupingOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._enabled = false;
	        _this._prompt = "컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.";
	        _this._linear = false;
	        _this._expandWhenGrouping = true;
	        _this._summarizing = true;
	        _this._commitBeforeGrouping = true;
	        _this._commitBeforeExpand = true;
	        _this._commitBeforeCollapse = true;
	        _this._fixMergedColumns = true;
	        _this._toast = new Toast.ToastOptions({ visible: false, message: "Grouping..." });
	        return _this;
	    }
	    GroupingOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GroupingOptions.prototype, "enabled", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** enabled */
	        get: function () {
	            return this._enabled;
	        },
	        set: function (value) {
	            if (value != this._enabled) {
	                this._enabled = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "prompt", {
	        /** prompt */
	        get: function () {
	            return this._prompt;
	        },
	        set: function (value) {
	            if (value != this._prompt) {
	                this._prompt = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "linear", {
	        /** linear */
	        get: function () {
	            return this._linear;
	        },
	        set: function (value) {
	            if (value != this._linear) {
	                this._linear = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "expandWhenGrouping", {
	        /** expandWhenGrouping */
	        get: function () {
	            return this._expandWhenGrouping;
	        },
	        set: function (value) {
	            if (value != this._expandWhenGrouping) {
	                this._expandWhenGrouping = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "summarizing", {
	        /** summarizing */
	        get: function () {
	            return this._summarizing;
	        },
	        set: function (value) {
	            if (value != this._summarizing) {
	                this._summarizing = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "commitBeforeGrouping", {
	        /** commitBeforeGrouping */
	        get: function () {
	            return this._commitBeforeGrouping;
	        },
	        set: function (value) {
	            this._commitBeforeGrouping = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "commitBeforeExpand", {
	        /** commitBeforeExpand */
	        get: function () {
	            return this._commitBeforeExpand;
	        },
	        set: function (value) {
	            this._commitBeforeExpand = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "commitBeforeCollapse", {
	        /** commitBeforeCollapse */
	        get: function () {
	            return this._commitBeforeCollapse;
	        },
	        set: function (value) {
	            this._commitBeforeCollapse = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "fixMergedColumns", {
	        /** fixMergedColumns */
	        get: function () {
	            return this._fixMergedColumns;
	        },
	        set: function (value) {
	            this._fixMergedColumns = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupingOptions.prototype, "toast", {
	        /** toast */
	        get: function () {
	            return this._toast;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GroupingOptions.prototype._changed = function () {
	        this.grid["_groupingOptionsChanged"](this);
	        this._layoutOwner();
	    };
	    return GroupingOptions;
	}(GridOptions.GridBaseOptions));
	exports.GroupingOptions = GroupingOptions;
	});

	unwrapExports(GroupingOptions_1);
	var GroupingOptions_2 = GroupingOptions_1.GroupingOptions;

	var GroupPanelElement_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GroupPanelElement.ts
	// 2019. 12. 18. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var GroupPanelItemView = /** @class */ (function (_super) {
	    __extends(GroupPanelItemView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupPanelItemView() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._field = -1;
	        _this._text = "";
	        _this._textWidth = 0;
	        _this._textHeight = 0;
	        _this._closeHeight = 0;
	        _this._padHorz = 5;
	        _this._padVert = 4;
	        _this._itemGap = 8;
	        return _this;
	    }
	    GroupPanelItemView.prototype._doDispose = function () {
	        Utils_1.Utils.detach(this._textView);
	        Utils_1.Utils.detach(this._closeView);
	        this._textView = this._closeView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GroupPanelItemView.prototype, "field", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** field */
	        get: function () {
	            return this._field;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupPanelItemView.prototype, "text", {
	        /** text */
	        get: function () {
	            return this._text;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GroupPanelItemView.prototype.setColumn = function (column) {
	        this._field = column.dataIndex;
	        this._textView.textContent = this._text = column.displayText;
	    };
	    GroupPanelItemView.prototype.isCloseButton = function (span) {
	        return span === this._closeView;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GroupPanelItemView.prototype._getCssSelector = function () {
	        return "rg-header rg-header-cell rg-group-panel-item";
	    };
	    GroupPanelItemView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this._textView = document.createElement("span");
	        this._textView.className = "rg-group-panel-item-text";
	        this._textView.style.display = "inline-block";
	        dom.appendChild(this._textView);
	        this._closeView = document.createElement("span");
	        this._closeView.className = "rg-group-panel-item-close";
	        dom.appendChild(this._closeView);
	    };
	    GroupPanelItemView.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var w = (this._textWidth = this._textView.offsetWidth) + this._itemGap + this._closeView.offsetWidth + this._padHorz * 2;
	        var h = (this._textHeight = this._textView.offsetHeight);
	        h = Math.max(h, this._closeHeight = this._closeView.offsetHeight);
	        h += this._padVert * 2;
	        return new Size_1.Size(w, h);
	    };
	    GroupPanelItemView.prototype._doLayoutContent = function (lm) {
	    };
	    GroupPanelItemView.prototype._doDraw = function (dom) {
	        var h = this["_dom"].clientHeight;
	        this._textView.style.left = this._padHorz + "px";
	        this._textView.style.top = Math.floor((h - this._textHeight) / 2) + "px";
	        this._closeView.style.left = (this._padHorz + this._textWidth + this._itemGap) + "px";
	        this._closeView.style.top = Math.floor((h - this._closeHeight) / 2) + "px";
	    };
	    return GroupPanelItemView;
	}(GridElement_1.GridElement));
	exports.GroupPanelItemView = GroupPanelItemView;
	var GroupPanelElement = /** @class */ (function (_super) {
	    __extends(GroupPanelElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupPanelElement(model) {
	        var _this = _super.call(this, model) || this;
	        _this._itemViews = [];
	        _this._count = 0;
	        _this._padHorz = 16;
	        _this._padVert = 10;
	        _this._itemGap = 20;
	        return _this;
	    }
	    GroupPanelElement.prototype._doDispose = function () {
	        this._itemViews && this._itemViews.forEach(function (item, idx) { item.dispose(); });
	        this._itemViews = null;
	        Utils_1.Utils.detach(this._messageView);
	        this._messageView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GroupPanelElement.prototype._getCssSelector = function () {
	        return "rg-group-panel";
	    };
	    GroupPanelElement.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.overflow = "hidden";
	        var span = this._messageView = document.createElement("span");
	        span.className = "rg-group-panel-message";
	        dom.appendChild(span);
	    };
	    GroupPanelElement.prototype._doMeasure = function (grid, hintWidth, hintHeight) {
	        var options = grid.groupingOptions;
	        this._count = grid.rowGroupLevels;
	        var h = 0;
	        var css = this._messageView.style;
	        if (this._count > 0) {
	            css.display = "none";
	        }
	        else {
	            css.display = "";
	            css.left = this._padHorz + "px";
	            css.top = this._padVert + "px";
	            this._messageView.textContent = options.prompt;
	            h = this._messageView.offsetHeight;
	        }
	        this.$_prepareItemViews(grid, this._count);
	        if (this._count > 0) {
	            for (var i = 0; i < this._count; i++) {
	                var view = this._itemViews[i];
	                var sz = view.measure(grid, hintWidth, hintHeight);
	                view.width = sz.width;
	                h = Math.max(h, sz.height);
	            }
	            for (var i = 0; i < this._count; i++) {
	                var view = this.
	                    _itemViews[i];
	                view.height = h;
	            }
	        }
	        return new Size_1.Size(hintWidth, h + this._padVert * 2);
	    };
	    GroupPanelElement.prototype._doPrepareContent = function (lm) {
	    };
	    GroupPanelElement.prototype._doLayoutContent = function (lm) {
	        if (this._count > 0) {
	            var x = this._padHorz;
	            var y = this._padVert;
	            for (var i = 0; i < this._count; i++) {
	                var view = this._itemViews[i];
	                view.x = x;
	                view.y = y;
	                x += this._itemGap + view.width;
	            }
	        }
	    };
	    GroupPanelElement.prototype._doDraw = function (element) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GroupPanelElement.prototype.$_prepareItemViews = function (grid, count) {
	        var views = this._itemViews;
	        var fields = grid.rowGroupFields;
	        for (var i = views.length; i < count; i++) {
	            views.push(new GroupPanelItemView());
	        }
	        for (var i = 0; i < count; i++) {
	            var view = views[i];
	            view.setColumn(grid.columnByField(fields[i]));
	            view.visible = true;
	            this.addChild(view);
	        }
	        for (var i = count; i < views.length; i++) {
	            this.removeChild(views[i]);
	        }
	    };
	    return GroupPanelElement;
	}(GridElement_1.VisualObjectElement));
	exports.GroupPanelElement = GroupPanelElement;
	});

	unwrapExports(GroupPanelElement_1);
	var GroupPanelElement_2 = GroupPanelElement_1.GroupPanelItemView;
	var GroupPanelElement_3 = GroupPanelElement_1.GroupPanelElement;

	var GridView_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridView.ts
	// 2019. 07. 12. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });























	var GridView = /** @class */ (function (_super) {
	    __extends(GridView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridView(container) {
	        var _this = _super.call(this, container) || this;
	        _this._rowGroupSummaryRuntime = new SummaryRuntimes.RowGroupSummaryRuntime();
	        _this._addGridObject(_this._rowGroup = new RowGroup_1.RowGroup(_this));
	        _this._rs = _this._createItemSource();
	        _this.itemSource = _this._rs;
	        _this._groupingOptions = new GroupingOptions_1.GroupingOptions(_this);
	        _this._groupingOptionsChanged(_this._groupingOptions);
	        _this._groupPanelView = new GroupPanelElement_1.GroupPanelElement(_this.rowGroup);
	        _this.topContentPane.addChild(_this._groupPanelView);
	        return _this;
	    }
	    GridView.prototype._doDispose = function () {
	        this._rs.dispose();
	        this._rs = null;
	        this._groupPanelView = this.groupPanelView.dispose();
	        this._rowGroup = this._rowGroup.dispose();
	        this._groupingOptions = this._groupingOptions.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    GridView.prototype._doCreateOtherElements = function () {
	        this._groupView = new RowGroupElement_1.RowGroupElement();
	        this.addElement(this._groupView);
	    };
	    Object.defineProperty(GridView.prototype, "maxRowCount", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** maxRowCount */
	        get: function () {
	            return this._rs.maxRowCount;
	        },
	        set: function (value) {
	            this._rs.maxRowCount = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "rowGroup", {
	        /** rowGroup */
	        get: function () {
	            return this._rowGroup;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "groupPanelView", {
	        /** groupPanelView */
	        get: function () {
	            return this._groupPanelView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "groupBarPane", {
	        /** groupBarPane */
	        get: function () {
	            return this._groupBarPane;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "groupView", {
	        /** groupView */
	        get: function () {
	            return this._groupView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "groupingOptions", {
	        /** groupingOptions */
	        get: function () {
	            return this._groupingOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "paged", {
	        /** paged */
	        get: function () {
	            return this._rs.page >= 0;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "page", {
	        /** page */
	        get: function () {
	            return this._rs.page;
	        },
	        set: function (value) {
	            this.setPage(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "pageCount", {
	        /** pageCount */
	        get: function () {
	            return this._rs.pageCount;
	        },
	        set: function (value) {
	            var old = this._rs.pageCount;
	            this._rs.pageCount = value;
	            if (this._rs.pageCount != old) {
	                this.$_firePageCountChanged(this._rs.pageCount);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "pageSorting", {
	        set: function (value) {
	            //this._rs.pageSorting = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "rowGroupLevels", {
	        /** rowGroupLevels */
	        get: function () {
	            return this._rs.groupLevels;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "rowGroupFields", {
	        /** rowGroupFields */
	        get: function () {
	            return this._rs.groupByFields;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "rowGrouped", {
	        /** rowGrouped */
	        get: function () {
	            return this._rs.grouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "mergedRowGrouped", {
	        /** mergedRowGrouped */
	        get: function () {
	            return this._rs.mergedGrouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "rowGroupSummaryRuntime", {
	        /** rowGroupSummaryRuntime */
	        get: function () {
	            return this._rowGroupSummaryRuntime;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridView.prototype.isGrouped = function (column) {
	        return column && column.groupLevel > 0;
	    };
	    GridView.prototype.isGroupedField = function (field) {
	        return this._rs.isGroupedField(field);
	    };
	    GridView.prototype.getGroupLevel = function (field) {
	        return this._rs.getGroupLevel(field);
	    };
	    GridView.prototype.groupByFieldNames = function (fieldNames, sorting, direction) {
	        if (direction === void 0) { direction = Types.SortDirection.ASCENDING; }
	        var ds = this.dataSource;
	        //const labelComparer = {};
	        if (ds && fieldNames && fieldNames.length > 0) {
	            var flds = [];
	            for (var i = 0; i < fieldNames.length; i++) {
	                var fname = fieldNames[i];
	                var fld = ds.getFieldIndex(fname);
	                if (fld >= 0) {
	                    //const columns = this.columnsByFieldName(fname);
	                    //const column = columns && columns.length == 1 && columns[0];
	                    //column instanceof DataColumn && column.isSortByLabel() && column.isLookupDisplay() && (labelComparer[fld] = new ColumnLabelComparer(column));
	                    flds.push(fld);
	                }
	            }
	            if (flds.length > 0) {
	                sorting = sorting === undefined ? this.rowGroup.sorting : sorting;
	                //this.setLabelComparer(labelComparer);
	                this.groupBy(flds, sorting, direction);
	            }
	        }
	        else {
	            //this.setLabelComparer(labelComparer);
	            this.ungroupBy();
	        }
	    };
	    GridView.prototype.groupBy = function (fields, sorting, direction) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this.toastManager.show(this.groupingOptions.toast, true, function () {
	            this.$_doGroupBy(fields, sorting, direction);
	        }.bind(this));
	    };
	    GridView.prototype.clearGroupBy = function () {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.groupBy(null, true, Types.SortDirection.ASCENDING);
	        //this._rs.groupSorting = this.rowGroup.sorting;
	        this.$_doRowGroupFooterMergeChanged();
	        this.$_clearColumnMergeGrouped();
	    };
	    GridView.prototype.ungroupBy = function () {
	        this.clearGroupBy();
	    };
	    GridView.prototype.addGroupBy = function (index, column) {
	        if (!column) {
	            return;
	        }
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        if (this.isGrouped(column)) {
	            return;
	        }
	        if (!column.layout || !column.layout.visible) {
	            return;
	        }
	        // if (!column.isRoot && this.rowGroup.mergeMode) {
	        // 	return;
	        // }
	        if (column.dataIndex >= 0) {
	            this.toastManager.show(this.groupingOptions.toast, true, function () {
	                this.$_doAddGroupBy(index, column);
	            }.bind(this));
	        }
	    };
	    GridView.prototype.addGroupByField = function (index, field) {
	        var column = this.columnByField(field);
	        if (column) {
	            this.addGroupBy(index, column);
	        }
	    };
	    GridView.prototype.removeGroupByField = function (field) {
	        if (field < 0) {
	            return;
	        }
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        if (!this.isGroupedField(field)) {
	            return;
	        }
	        var includeLower = false; //this.groupingOptions().isRemoveIncludeLower();
	        //var labelComparer = this._items.getLabelComparer();
	        var fields = this._rs.groupByFields;
	        // if (includeLower) {
	        // 	for (var i = fields.length-1 ; i ; i--) {
	        // 		delete labelComparer[fields[i]];
	        // 		if (fields[i] == dataIndex) {
	        // 			break;
	        // 		}
	        // 	}
	        // } else {
	        // 	delete labelComparer[dataIndex];
	        // }
	        this._rs.removeGroupBy(field, includeLower);
	        fields = this._rs.groupByFields;
	        if (fields.length <= 0) ;
	        this.$_doRowGroupFooterMergeChanged();
	    };
	    GridView.prototype.removeGroupBy = function (column) {
	        this.removeGroupByField(column.dataIndex);
	    };
	    GridView.prototype.expand = function (group, recursive, force, level) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.expand(group, recursive, force, level);
	    };
	    GridView.prototype.collapse = function (group, recursive, force) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.collapse(group, recursive, force);
	    };
	    GridView.prototype.isGroupedColumn = function (column) {
	        return column && column.dataIndex >= 0 && this._rs.isGroupedField(column.dataIndex); // && column.root().displayIndex() < this._items.getGroupLevels();
	    };
	    // Sort
	    GridView.prototype.getSortFields = function () {
	        return this.itemSource.getSortFields();
	        // return this.itemSource.getSort
	    };
	    GridView.prototype.getSortDirections = function () {
	        return this.itemSource.getSortDirections();
	    };
	    GridView.prototype.getSortCases = function () {
	        return this.itemSource.getSortCases();
	    };
	    // paging
	    GridView.prototype.setPaging = function (paging, pageSize, pageCount) {
	        if (pageSize === void 0) { pageSize = 10; }
	        if (pageCount === void 0) { pageCount = -1; }
	        this._rs.setPaging(paging, pageSize, pageCount, null);
	    };
	    GridView.prototype.setPage = function (newPage, startItem) {
	        if (startItem === void 0) { startItem = -1; }
	        newPage = Math.max(0, Math.min(newPage, this._rs.pageCount - 1));
	        if (newPage != this._rs.page) {
	            var changed = false;
	            if (this.$_firePageChanging(newPage)) {
	                this._rs.setPage(newPage, startItem);
	                changed = true;
	            }
	            if (changed) {
	                this.$_firePageChanged(this._rs.page);
	            }
	        }
	    };
	    Object.defineProperty(GridView.prototype, "summarizer", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rs.summarizer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridView.prototype._createSidePane = function () {
	        return this._groupBarPane = new RowGroupElement_1.RowGroupBarPane();
	    };
	    GridView.prototype.isSidePaneVisible = function () {
	        return this.rowGrouped && !this.mergedRowGrouped;
	    };
	    GridView.prototype._createLayoutManager = function () {
	        return new GridViewLayoutManager(this);
	    };
	    GridView.prototype.canGrouping = function () {
	        return this._groupPanelView.visible;
	    };
	    GridView.prototype._canMerge = function () {
	        return true;
	    };
	    Object.defineProperty(GridView.prototype, "undoable", {
	        get: function () {
	            return this._rs.undoable;
	        },
	        set: function (value) {
	            this._rs.undoable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "canUndo", {
	        get: function () {
	            return this._rs.canUndo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "canRedo", {
	        get: function () {
	            return this._rs.canRedo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "undoing", {
	        get: function () {
	            return this._rs.undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "redoing", {
	        get: function () {
	            return this._rs.redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridView.prototype.undo = function () {
	        if (this._rs.canUndo) {
	            this._rs.cancelWhenLastUndo = this.editOptions.cancelWhenLastUndo;
	            this.editController.cancelEditor(true);
	            this._rs.undo();
	            return true;
	        }
	        return false;
	    };
	    GridView.prototype.redo = function () {
	        if (this._rs.canRedo) {
	            this._rs.redo();
	            return true;
	        }
	        return false;
	    };
	    GridView.prototype.execute = function (command) {
	        this._rs.execute(command);
	    };
	    GridView.prototype.clearCommandStack = function (all) {
	        if (all === void 0) { all = true; }
	        this._rs.clearCommandStack(all);
	    };
	    GridView.prototype._doSortItems = function (fields, directions, textCases) {
	        var rs = this.itemSource;
	        rs.orderBy(fields, directions, textCases);
	    };
	    GridView.prototype._doColumnFiltersChanged = function (filterCollection, filter) {
	        this.applyFilters(filterCollection, filter);
	        this.invalidateLayout();
	    };
	    // TODO 점검.
	    // gridBase에서는 items의 class확인해서 처리해야 하기때문에 어짜피 treeView와 gridView가 분리된다.
	    // 또는 GridItemProvider/TreeGridItemProvider에 있는 속성들을 통합해야 한다.
	    GridView.prototype.setOptions = function (source) {
	        if (source) {
	            var items = this._rs;
	            source["hideDeleted"] !== undefined && (items.hideDeleted = source["hideDeleted"]);
	            source["hideDeletedRows"] !== undefined && (items.hideDeleted = source["hideDeletedRows"]);
	            source["inclusiveFiltering"] !== undefined && (items.inclusiveFiltering = source["inclusiveFiltering"]);
	            source["filterOr"] !== undefined && (items.inclusiveFiltering = source["filterOr"]);
	            source["summaryMode"] !== undefined && (items.summaryMode = source["summaryMode"]);
	            source["groupSummaryMode"] !== undefined && (items.groupSummaryMode = source["groupSummaryMode"]);
	            // source["mergeMode"] !== undefined && (items.mergeMode = source["mergeMode"]);
	            source["sortMode"] !== undefined && (items.sortMode = source["sortMdoe"]);
	            source["filterMode"] !== undefined && (items.filterMode = source["filterMode"]);
	            _super.prototype.setOptions.call(this, source);
	        }
	    };
	    GridView.prototype._visualObjectChanged = function (obj) {
	        _super.prototype._visualObjectChanged.call(this, obj);
	        if (obj instanceof CheckBar_1.CheckBar) {
	            this._rs.checkableExpression = obj.checkableExpression;
	        }
	    };
	    GridView.prototype.resetCheckables = function () {
	        this._rs.resetCheckables();
	    };
	    GridView.prototype.applyCheckables = function () {
	        this._rs.applyCheckables();
	    };
	    GridView.prototype.getCheckedRows = function (sort, visibleOnly, allRows) {
	        var rows, item;
	        if (visibleOnly) {
	            rows = [];
	            for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	                item = this.getItem(i);
	                if (item.checked && item.dataRow >= 0) {
	                    rows.push(item.dataRow);
	                }
	            }
	        }
	        else {
	            rows = this._rs.getCheckedRows(allRows);
	        }
	        if (sort) {
	            rows.sort(function (r1, r2) { return r1 - r2; });
	        }
	        return rows;
	    };
	    GridView.prototype.getCheckedItems = function (allItems) {
	        var items = [];
	        for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	            var item = this.getItem(i);
	            if (item.checked && (allItems || item.dataRow >= 0)) {
	                items.push(item.index);
	            }
	        }
	        return items;
	    };
	    GridView.prototype.findGroupItem = function (item, field) {
	        var level = this.getGroupLevel(field);
	        var g = item instanceof GridItem_1.GroupItem ? item : item.parent;
	        while (g) {
	            if (g.level == level)
	                return g;
	            g = g.parent;
	        }
	        return null;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridView.prototype._createItemSource = function () {
	        var items = new GridItemProvider_1.GridItemProvider(true, this._rowGroup);
	        // items.summaryMode = this.summaryMode;
	        // items.rowGroupSummaryMode = this.rowGroup.summaryMode;
	        return items;
	    };
	    GridView.prototype.$_rowGroupChanged = function (options) {
	        this._doRowGroupMergeModeChanged();
	        // this._rs.mergeMode = options.mergeMode;
	    };
	    GridView.prototype._groupingOptionsChanged = function (options) {
	        this._rs.expandWhenGrouping = options.expandWhenGrouping;
	    };
	    GridView.prototype.$_rowGroupAdornmentsChanged = function (model) {
	        var rs = this._rs["_groupedProvider"];
	        rs.resetAdornments(model.expandedAdornments, model.collapsedAdornments, model.createFooterCallback);
	    };
	    GridView.prototype.$_getVisibleRootByField = function (fld) {
	        var cnt = this.visibleLayoutCount;
	        for (var i = 0; i < cnt; i++) {
	            var layout = this.getVisibleLayout(i);
	            var col = layout instanceof CellLayout.CellLayoutColumnItem && Utils_1.Utils.cast(layout.firstColumn, GridColumn_1.DataColumn);
	            if (col && col.dataIndex == fld) {
	                return col;
	            }
	        }
	        return null;
	    };
	    GridView.prototype.$_clearColumnMergeGrouped = function () {
	        this["_activeCellLayout"]["_clearMergeGrouped"]();
	    };
	    GridView.prototype._doRowGroupMergeModeChanged = function () {
	        _super.prototype._doRowGroupMergeModeChanged.call(this);
	        //this.rowGroupView() && this.rowGroupView().clearFooterViews();
	        this.$_clearColumnMergeGrouped();
	        var flds = this._rs.groupByFields;
	        if (this.rowGroup.mergeMode) {
	            if (flds && flds.length > 0) {
	                for (var i = flds.length - 1; i >= 0; i--) {
	                    var column = this.$_getVisibleRootByField(flds[i]);
	                    if (column) {
	                        column["$_setMergeGrouped"](true);
	                    }
	                    else {
	                        flds.splice(i, 1);
	                    }
	                }
	            }
	            this._rs.groupByMode(flds, true);
	        }
	        else {
	            this._rs.groupByMode(flds, false);
	        }
	    };
	    GridView.prototype.$_doRowGroupFooterMergeChanged = function () {
	        //this._groupFooterMergeManager.buildRooms(this);
	    };
	    GridView.prototype.$_doGroupBy = function (fields, sorting, direction) {
	        var ds = this.dataSource;
	        var cnt;
	        this.$_clearColumnMergeGrouped();
	        if (ds && fields && (cnt = fields.length) > 0) {
	            var fieldCount = ds.fieldCount;
	            var flds = [];
	            for (var i = 0; i < cnt; i++) {
	                if (fields[i] >= 0 && fields[i] < fieldCount) {
	                    flds.push(fields[i]);
	                }
	            }
	            if (flds.length > 0) {
	                if (this.rowGroup.mergeMode) {
	                    for (var i = flds.length - 1; i >= 0; i--) {
	                        var column = this.$_getVisibleRootByField(flds[i]);
	                        if (column) {
	                            column["$_setMergeGrouped"](true);
	                        }
	                        else {
	                            flds.splice(i, 1);
	                        }
	                    }
	                }
	                if (flds.length > 0) {
	                    this._rs.groupBy(flds, sorting, direction);
	                }
	            }
	        }
	        else {
	            this._rs.groupBy(null, true, Types.SortDirection.ASCENDING);
	        }
	        this.$_doRowGroupFooterMergeChanged();
	    };
	    GridView.prototype.$_doAddGroupBy = function (index, column) {
	        var field = column.dataIndex;
	        column["$_setMergeGrouped"](this.rowGroup.mergeMode);
	        try {
	            // if (column.isSortByLabel() && column.isLookupDisplay()) {
	            // 	var labelComparer = this._items.getLabelComparer();
	            // 	if (!labelComparer[field]) {
	            // 		labelComparer[field] = new ColumnLabelComparer(column);
	            // 	}
	            // }
	            this._rs.addGroupBy(index, field, this.rowGroup.sorting);
	            this.$_doRowGroupFooterMergeChanged();
	        }
	        catch (err) {
	            column["$_setMergeGrouped"](false);
	            throw err;
	        }
	    };
	    GridView.prototype.$_clearGroupedIndices = function () {
	        for (var i = this.columnCount - 1; i >= 0; i--) {
	            var column = Utils_1.Utils.cast(this.getColumn(i), GridColumn_1.DataColumn);
	            if (column) {
	                column["$_setGroupLevel"](this._rs.getGroupLevel(-1));
	            }
	        }
	    };
	    GridView.prototype.$_setGroupedIndices = function () {
	        for (var i = this.columnCount - 1; i >= 0; i--) {
	            var column = Utils_1.Utils.cast(this.getColumn(i), GridColumn_1.DataColumn);
	            if (column) {
	                column["$_setGroupLevel"](this._rs.getGroupLevel(column.dataIndex));
	            }
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event members
	    //-------------------------------------------------------------------------
	    GridView.prototype.$_firePageChanging = function (newPage) {
	        return this.fireConfirmEvent(GridView.PAGE_CHANGING, newPage);
	    };
	    GridView.prototype.$_firePageChanged = function (newPage) {
	        this.fireEvent(GridView.PAGE_CHANGED, newPage);
	    };
	    GridView.prototype.$_firePageCountChanged = function (newCount) {
	        this.fireEvent(GridView.PAGE_COUNT_CHANGED, newCount);
	    };
	    GridView.prototype.$_fireGrouping = function (fields) {
	        return this.fireConfirmEvent(GridView.GROUPING, fields);
	    };
	    GridView.prototype.$_fireGrouped = function () {
	        this.fireEvent(GridView.GROUPED);
	    };
	    GridView.prototype.$_fireExpanding = function (group) {
	        return this.fireConfirmEvent(GridView.EXPANDING, group);
	    };
	    GridView.prototype.$_fireExpanded = function (group) {
	        this.fireEvent(GridView.EXPANDED, group);
	    };
	    GridView.prototype.$_fireCollapsing = function (group) {
	        return this.fireConfirmEvent(GridView.COLLAPSING, group);
	    };
	    GridView.prototype.$_fireCollapsed = function (group) {
	        this.fireEvent(GridView.COLLAPSED, group);
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    GridView.prototype.onGroupedItemProviderGrouping = function (rs, fields) {
	        return this.$_fireGrouping(fields);
	    };
	    GridView.prototype.onGroupedItemProviderGrouped = function (rs) {
	        this.selections.clear();
	        this.$_clearGroupedIndices();
	        var fields = this._rs.groupByFields;
	        if (fields && fields.length > 0) {
	            this.$_setGroupedIndices();
	        }
	        if (this.rowGroup.mergeMode) {
	            var cols = [];
	            var cnt = this.visibleLayoutCount;
	            for (var i = 0; i < cnt; i++) {
	                var layout = this.getVisibleLayout(i);
	                var dcolumn = Utils_1.Utils.cast(layout.firstColumn, GridColumn_1.DataColumn);
	                if (dcolumn) {
	                    if (dcolumn.mergeGrouped && dcolumn.groupLevel <= 0) {
	                        var merges = dcolumn["_merges"];
	                        if (merges) {
	                            merges.clear();
	                        }
	                        dcolumn["$_setMergeGrouped"](false);
	                    }
	                    else if (dcolumn.mergeGrouped) {
	                        var merges = dcolumn["_merges"];
	                        if (!merges) {
	                            merges = new ColumnMerge.ColumnMergeManager(layout);
	                            dcolumn["_merges"] = merges;
	                        }
	                        cols.push(dcolumn);
	                    }
	                }
	            }
	            cnt = cols.length;
	            if (cnt > 0) {
	                cols = cols.sort(function (col1, col2) {
	                    return col1.groupLevel - col2.groupLevel;
	                });
	                for (var i = 0; i < cnt; i++) {
	                    cols[i].layout.vindex = i;
	                    var merges = cols[i]["_merges"];
	                    merges.clear();
	                    merges.initialize(ColumnMerge.RowGroupMergeRule.INIT_COUNT);
	                }
	            }
	            cnt = this.visibleLayoutCount;
	            for (var i = 0; i < cnt; i++) {
	                var dcolumn = Utils_1.Utils.cast(this.getVisibleLayout(i).firstColumn, GridColumn_1.DataColumn);
	                if (dcolumn && !dcolumn.mergeGrouped) {
	                    var merges = dcolumn["_merges"];
	                    if (merges) {
	                        merges.clear();
	                        merges.initialize(ColumnMerge.RowGroupMergeRule.INIT_COUNT);
	                    }
	                }
	            }
	        }
	        this._syncHeadCheck([]);
	        this.$_fireGrouped();
	        this._cellLayoutChanged();
	        this.container.defaultTool.layoutChanged();
	    };
	    GridView.prototype.onGroupedItemProviderExpand = function (rs, group) {
	        return this.$_fireExpanding(group);
	    };
	    GridView.prototype.onGroupedItemProviderExpanded = function (rs, group) {
	        this.$_fireExpanded(group);
	    };
	    GridView.prototype.onGroupedItemProviderCollapse = function (rs, group) {
	        return this.$_fireCollapsing(group);
	    };
	    GridView.prototype.onGroupedItemProviderCollapsed = function (rs, group) {
	        this.$_fireCollapsed(group);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    GridView.PAGE_CHANGING = "onGridViewPageChanging";
	    GridView.PAGE_CHANGED = "onGridViewPageChanged";
	    GridView.PAGE_COUNT_CHANGED = "onGridViewPageCountChanged";
	    GridView.GROUPING = "onGridViewGrouping";
	    GridView.GROUPED = "onGridViewGrouped";
	    GridView.EXPANDING = "onGridViewExpanding";
	    GridView.EXPANDED = "onGridViewExpanded";
	    GridView.COLLAPSING = "onGridViewCollapsing";
	    GridView.COLLAPSED = "onGridViewCollapsed";
	    return GridView;
	}(GridBase_1.GridBase));
	exports.GridView = GridView;
	var GridViewLayoutManager = /** @class */ (function (_super) {
	    __extends(GridViewLayoutManager, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridViewLayoutManager(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._panelVisible = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridViewLayoutManager.prototype.getLevelIndent = function (level) {
	        var grid = this.grid;
	        if (this.mergedRowGrouped) {
	            var fixed = this.fixedLayoutCount;
	            var w = 0;
	            for (var i = 0; i < level && i < fixed; i++) {
	                w += this.getFixedLayoutWidth(i);
	            }
	            for (var i = fixed; i < level; i++) {
	                w += this.getLayoutWidth(i - fixed);
	            }
	            if (!fixed) {
	                w -= this.leftPos;
	            }
	            else if (level > fixed) {
	                w = Math.max(this.fixedWidth, w + this.fixedBarWidth - this.leftPos);
	            }
	            else {
	                w += this.fixedBarWidth;
	            }
	            return w;
	        }
	        else {
	            return grid.groupBarPane.getLevelIndent(level);
	        }
	    };
	    Object.defineProperty(GridViewLayoutManager.prototype, "grid", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this["_grid"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridViewLayoutManager.prototype, "topPanelVisible", {
	        get: function () {
	            return this._panelVisible;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridViewLayoutManager.prototype, "rowGrouped", {
	        get: function () {
	            return !this.grid.rowGroup.mergeMode && this.grid.rowGrouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridViewLayoutManager.prototype, "mergedRowGrouped", {
	        get: function () {
	            return this.grid.rowGroup.mergeMode && this.grid.rowGrouped;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridViewLayoutManager.prototype, "rowGroupLevels", {
	        get: function () {
	            return this.grid.rowGroupLevels;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    GridViewLayoutManager.prototype.$_groupView = function (merged) {
	        var grid = this.grid;
	        //return merged ? grid["_mergedGroupView"] : grid["_groupView"];
	        return grid["_groupView"];
	    };
	    /**
	     * layout없이 content만 이동할 때.
	     */
	    GridViewLayoutManager.prototype.setLeftPos = function (bounds, pos) {
	        _super.prototype.setLeftPos.call(this, bounds, pos);
	        var grid = this.grid;
	        var merged = grid.mergedRowGrouped;
	        var layer = this.$_groupView(merged);
	        if (layer.visible) {
	            // TODO: 최소 호출하도록 한다.
	            this.$_layoutRowGroupView(grid, layer);
	        }
	    };
	    GridViewLayoutManager.prototype._prepareItems = function () {
	        _super.prototype._prepareItems.call(this);
	        var grid = this.grid;
	        if (grid.rowGrouped) {
	            var merged = grid.mergedRowGrouped;
	            var layer = this.$_groupView(merged);
	            var body = this.contentBounds.isEmpty ? null : grid.bodyView;
	            var fixed = this.fixedContentBounds.isEmpty ? null : grid.fixedBodyView;
	            var right = this.rightContentBounds.isEmpty ? null : grid.rightBodyView;
	            layer["$_prepareGroupItems"](this, body, fixed, right);
	            layer["$_prepareGroupFooters"](this["_items"], this);
	        }
	    };
	    GridViewLayoutManager.prototype._doMeasureTopPane = function (grid, bounds) {
	        var options = grid.groupingOptions;
	        var view = grid.groupPanelView;
	        // visible을 false 하면 messageView의 offsetParent가 설정되지 않는다.
	        //view.visible = options.enabled;
	        //if (view.visible) {
	        this._panelVisible = options.enabled;
	        if (this._panelVisible) {
	            var sz = view.measure(grid, bounds.width, bounds.height);
	            bounds.height = sz.height;
	        }
	        else {
	            bounds.height = 1; // 0으로 하면 messageView의 offsetParent가 설정되지 않는다.
	            bounds.width = 1;
	        }
	    };
	    GridViewLayoutManager.prototype._doLayoutTopPane = function (grid, pane) {
	        var view = grid.groupPanelView;
	        view.setBounds(0, 0, pane.width, pane.height);
	        if (this._panelVisible) {
	            view.layoutContent(this);
	        }
	    };
	    GridViewLayoutManager.prototype._doLayout = function (grid, bounds) {
	        _super.prototype._doLayout.call(this, grid, bounds);
	        var grouped = grid.rowGrouped;
	        var merged = grid.mergedRowGrouped;
	        var layer = this.$_groupView(merged);
	        this.$_groupView(!merged).visible = false;
	        if (layer.visible = grouped) {
	            this.$_layoutRowGroupView(grid, layer);
	        }
	    };
	    GridViewLayoutManager.prototype.isMergedCell = function (index) {
	        var grid = this.grid;
	        if (grid.rowGroup.mergeMode) {
	            if (grid.isGroupedColumn(index.dataColumn)) {
	                return true;
	            }
	        }
	        var layout = index.layout;
	        if (layout && layout.isColumn && index.layout.merged) {
	            var merges = layout.firstColumn["_merges"];
	            if (merges) {
	                return merges.getRoom(index) != null;
	            }
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridViewLayoutManager.prototype.$_layoutRowGroupView = function (grid, view) {
	        var rContent = this.contentBounds;
	        var r = this.sideContentBounds.clone();
	        r.top = rContent.y + this.bodyBounds.y;
	        //r.right = Math.min(grid.layoutManager.gridBounds.right, grid.fixedOptions.rightFixed ? this.contentBounds.right : this.rightContentBounds.right);
	        r.right = grid.fixedOptions.rightFixed ? rContent.right : this.rightContentBounds.right;
	        r.bottom = Math.min(this.footBounds.y + rContent.y, rContent.bottom);
	        view.setRect(r);
	        view.layout(this);
	    };
	    return GridViewLayoutManager;
	}(GridLayoutManager_1.GridLayoutManager));
	exports.GridViewLayoutManager = GridViewLayoutManager;
	var GridViewSelectionTool = /** @class */ (function (_super) {
	    __extends(GridViewSelectionTool, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridViewSelectionTool(owner) {
	        var _this = _super.call(this, owner, "gridSelectionTool") || this;
	        _this._panelCellReq = new GroupPanelCellRequest();
	        _this._panelCellFeedback = new GroupPanelCellFeedback();
	        _this._groupingReq = new RowGroupingRequest();
	        return _this;
	    }
	    GridViewSelectionTool.prototype._doDispose = function () {
	        this._panelCellReq = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridViewSelectionTool.prototype._doMouseDown = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var grid = this.grid;
	        var elt = this.findElementAt(x, y, false);
	        var target = this.mouseEventTarget;
	        if (target instanceof HTMLElement && ItemElement_1.RowElement.isExpander(target)) {
	            var cell = this._findTableCell(target);
	            var view = grid.getTableView(cell);
	            if (view instanceof GridBodyElement_1.GridBodyElement) {
	                var idx = grid.getDataCellIndex(cell, this["_tempIndex"]);
	                var bcell = view.getCellAt(grid.layoutManager, idx);
	                var item = bcell.groupItem;
	                if (item.expanded) {
	                    grid.collapse(item, false, false);
	                }
	                else {
	                    grid.expand(item, false, false, 0);
	                }
	            }
	            return;
	        }
	        if (elt instanceof RowGroupElement_1.RowGroupExpandHandle) {
	            var item = elt.cellView.item;
	            if (item instanceof GridItem_1.GroupItemImpl) {
	                if (item.expanded) {
	                    grid.collapse(item, false, false);
	                }
	                else {
	                    grid.expand(item, false, false, 0);
	                }
	            }
	            return;
	        }
	        _super.prototype._doMouseDown.call(this, event);
	    };
	    GridViewSelectionTool.prototype._doClick = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var grid = this.grid;
	        var elt = this.findElementAt(x, y, false);
	        if (elt instanceof GroupPanelElement_1.GroupPanelItemView) {
	            if (elt.isCloseButton(event.target)) {
	                grid.removeGroupByField(elt.field);
	            }
	        }
	        _super.prototype._doClick.call(this, event);
	    };
	    GridViewSelectionTool.prototype._getEditRequest = function (source, x, y, ctrl, shift) {
	        var req = _super.prototype._getEditRequest.call(this, source, x, y, ctrl, shift);
	        if (req)
	            return req;
	        var grid = this.grid;
	        var elt = this.findElementAt(x, y, false);
	        var cell = this._findTableCell(source);
	        var view = cell && grid.getTableView(cell);
	        if (view instanceof HeaderElement_1.HeaderElement) {
	            var layout = view.layoutByCell(cell);
	            var column = layout.firstColumn;
	            if (layout.isFixed && !grid.fixedOptions.movable && grid.groupingOptions.enabled && column) {
	                var r = grid.layoutManager.getHeaderCellRect(layout);
	                return this._groupingReq.init(layout, r, x, y);
	            }
	        }
	        if (elt instanceof GroupPanelElement_1.GroupPanelItemView) {
	            return this._panelCellReq.init(elt, x, y);
	        }
	    };
	    GridViewSelectionTool.prototype._getDragTracker = function (request, x, y) {
	        var grid = this.grid;
	        if (request instanceof GroupPanelCellRequest) {
	            return new GroupPanelCellTracker(grid, request, this._panelCellFeedback);
	        }
	        else if (request instanceof RowGroupingRequest) {
	            return new RowGroupingTracker(grid, request, this._panelCellFeedback);
	        }
	        return _super.prototype._getDragTracker.call(this, request, x, y);
	    };
	    GridViewSelectionTool.prototype.getNextRequest = function (request, hint, x, y) {
	        var grid = this.grid;
	        if (request instanceof EditRequests.ColumnMoveRequest && request.layout instanceof CellLayout.CellLayoutColumnItem) {
	            //if (grid.groupPanelView.visible && y < grid.groupPanelView.bottom) {
	            if (grid.layoutManager.topPanelVisible && y < grid.groupPanelView.bottom) {
	                return this._groupingReq.init(request.layout, hint, x, y);
	            }
	        }
	        return null;
	    };
	    return GridViewSelectionTool;
	}(GridTool_1.GridSelectionTool));
	exports.GridViewSelectionTool = GridViewSelectionTool;
	var GroupPanelCellRequest = /** @class */ (function (_super) {
	    __extends(GroupPanelCellRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupPanelCellRequest() {
	        var _this = _super.call(this) || this;
	        _this._field = -1;
	        return _this;
	    }
	    Object.defineProperty(GroupPanelCellRequest.prototype, "source", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** source */
	        get: function () {
	            return this._source;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupPanelCellRequest.prototype, "x", {
	        /** x */
	        get: function () {
	            return this._x;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupPanelCellRequest.prototype, "y", {
	        /** y */
	        get: function () {
	            return this._y;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GroupPanelCellRequest.prototype, "field", {
	        /** field */
	        get: function () {
	            return this._field;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GroupPanelCellRequest.prototype.init = function (source, x, y) {
	        this._source = source;
	        this._x = x;
	        this._y = y;
	        this._field = source.field;
	        return this;
	    };
	    Object.defineProperty(GroupPanelCellRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.Cursor.POINTER;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return GroupPanelCellRequest;
	}(VisualTool_1.EditRequest));
	var GroupPanelCellFeedback = /** @class */ (function (_super) {
	    __extends(GroupPanelCellFeedback, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupPanelCellFeedback() {
	        var _this = _super.call(this) || this;
	        _this._no = false;
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GroupPanelCellFeedback.prototype.setField = function (text, no) {
	        if (no === void 0) { no = false; }
	        this._textView.textContent = text;
	        this._noMark.style.display = (this._no = no) ? "inline-block" : "none";
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GroupPanelCellFeedback.prototype._getCssSelector = function () {
	        return "rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback";
	    };
	    GroupPanelCellFeedback.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        this._textView = document.createElement("span");
	        this._textView.className = "rg-group-panel-item-text";
	        this._textView.style.display = "inline-block";
	        dom.appendChild(this._textView);
	        this._noMark = document.createElement("span");
	        this._noMark.className = "rg-group-panel-no-mark";
	        this._noMark.style.display = "none";
	        dom.appendChild(this._noMark);
	    };
	    GroupPanelCellFeedback.prototype._doDraw = function (dom) {
	        // TODO: setField() 호출 후 한 번만 실행되도록 할 것!
	        var w = this._textView.offsetWidth;
	        var h = this._textView.offsetHeight;
	        var css = this._textView.style;
	        css.left = Math.max(0, ((this.width - w) / 2)) + "px";
	        css.top = Math.max(0, ((this.height - h) / 2)) + "px";
	        if (this._no) {
	            var w_1 = this._noMark.offsetWidth;
	            var h_1 = this._noMark.offsetHeight;
	            var css_1 = this._noMark.style;
	            css_1.left = Math.max(0, ((this.width - w_1) / 2)) + "px";
	            css_1.top = Math.max(0, ((this.height - h_1) / 2)) + "px";
	        }
	    };
	    return GroupPanelCellFeedback;
	}(VisualElement_1.VisualElement));
	var GroupPanelCellTracker = /** @class */ (function (_super) {
	    __extends(GroupPanelCellTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GroupPanelCellTracker(grid, request, feedback) {
	        var _this = _super.call(this, grid, "groupPanelCellTracker") || this;
	        _this._request = request;
	        _this._feedback = feedback;
	        return _this;
	    }
	    GroupPanelCellTracker.prototype._doDispose = function () {
	        this._request = null;
	        this._feedback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GroupPanelCellTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var r = this._request.source.boundsByContainer();
	        this._feedback.setRect(r);
	        this._feedback.setField(this._request.source.text);
	        this._feedback.visible = true;
	        grid.addFeedbackElement(this._feedback);
	        this._offsetX = x - r.x;
	        this._offsetY = y - r.y;
	        return true;
	    };
	    GroupPanelCellTracker.prototype._doDrag = function (eventTarget, x, y) {
	        x -= this._offsetX;
	        y -= this._offsetY;
	        this._feedback.move(x, y);
	        return true;
	    };
	    GroupPanelCellTracker.prototype._doCompleted = function () {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        if (this.currentY > lm.contentBounds.y) {
	            grid.removeGroupByField(this._request.field);
	        }
	    };
	    GroupPanelCellTracker.prototype._doEnded = function () {
	        this.grid.removeFeedbackElement(this._feedback);
	    };
	    return GroupPanelCellTracker;
	}(EditTrackers.GridDragTracker));
	var RowGroupingRequest = /** @class */ (function (_super) {
	    __extends(RowGroupingRequest, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupingRequest() {
	        return _super.call(this) || this;
	    }
	    RowGroupingRequest.prototype._doDispose = function () {
	        this._layout = null;
	        this._source = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(RowGroupingRequest.prototype, "layout", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** layout */
	        get: function () {
	            return this._layout;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupingRequest.prototype, "source", {
	        /** source */
	        get: function () {
	            return this._source;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupingRequest.prototype, "x", {
	        /** x */
	        get: function () {
	            return this._x;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RowGroupingRequest.prototype, "y", {
	        /** y */
	        get: function () {
	            return this._y;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    RowGroupingRequest.prototype.init = function (layout, source, x, y) {
	        this._layout = layout;
	        this._source = source;
	        this._x = x;
	        this._y = y;
	        return this;
	    };
	    Object.defineProperty(RowGroupingRequest.prototype, "cursor", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return Types.Cursor.POINTER;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RowGroupingRequest;
	}(VisualTool_1.EditRequest));
	var RowGroupingTracker = /** @class */ (function (_super) {
	    __extends(RowGroupingTracker, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function RowGroupingTracker(grid, request, feedback) {
	        var _this = _super.call(this, grid, "groupingCellTracker") || this;
	        _this._request = request;
	        _this._feedback = feedback;
	        return _this;
	    }
	    RowGroupingTracker.prototype._doDispose = function () {
	        this._request = null;
	        this._feedback = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    RowGroupingTracker.prototype._doStart = function (eventTarget, x, y, shift) {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        var src = this._request.source;
	        var r = src instanceof VisualElement_1.VisualElement ? src.boundsByContainer() : src;
	        var no = grid.isGroupedField(this._request.layout.firstColumn.dataIndex);
	        this._feedback.setRect(r);
	        this._feedback.setField(this._request.layout.firstColumn.displayText, no);
	        this._feedback.visible = true;
	        grid.addFeedbackElement(this._feedback);
	        this._offsetX = x - r.x;
	        this._offsetY = y - r.y;
	        return true;
	    };
	    RowGroupingTracker.prototype._doDrag = function (eventTarget, x, y) {
	        x -= this._offsetX;
	        y -= this._offsetY;
	        this._feedback.move(x, y);
	        return true;
	    };
	    RowGroupingTracker.prototype._doCompleted = function () {
	        var grid = this.grid;
	        var lm = grid.layoutManager;
	        if (this.currentY < lm.contentBounds.y) {
	            grid.addGroupByField(lm.rowGroupLevels, this._request.layout.firstColumn.dataIndex);
	        }
	    };
	    RowGroupingTracker.prototype._doEnded = function () {
	        this.grid.removeFeedbackElement(this._feedback);
	    };
	    return RowGroupingTracker;
	}(EditTrackers.GridDragTracker));
	});

	unwrapExports(GridView_1);
	var GridView_2 = GridView_1.GridView;
	var GridView_3 = GridView_1.GridViewLayoutManager;
	var GridView_4 = GridView_1.GridViewSelectionTool;

	var Form_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// Form.ts
	// 2020. 02. 27. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var Form = /** @class */ (function (_super) {
	    __extends(Form, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function Form() {
	        var _this = _super.call(this) || this;
	        _this._items = [];
	        _this._visibleChanged = false;
	        _this._visibleItems = [];
	        _this._title = new FormTitle(_this);
	        _this._footer = new FormFooter(_this);
	        _this._header = new FormHeader(_this);
	        _this._body = new FormBody(_this);
	        return _this;
	    }
	    Form.prototype._doDispose = function () {
	        this._title = this._title.dispose();
	        this._footer = this._footer.dispose();
	        this._header = this._header.dispose();
	        this._body = this._body.dispose();
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // FormItemContainer
	    //-------------------------------------------------------------------------
	    Form.prototype.itemVisibleChanged = function (item) {
	    };
	    Form.prototype.itemChanged = function (item) {
	    };
	    Object.defineProperty(Form.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** dataSource */
	        get: function () {
	            return this._ds;
	        },
	        set: function (value) {
	            if (value != this._ds) {
	                this._ds = value;
	                this.$_refreshItems();
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "title", {
	        /** title */
	        get: function () {
	            return this._title;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "footer", {
	        /** footer */
	        get: function () {
	            return this._footer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "header", {
	        /** header */
	        get: function () {
	            return this._header;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "body", {
	        /** body */
	        get: function () {
	            return this._body;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "itemCount", {
	        /** itemCount */
	        get: function () {
	            return this._items.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(Form.prototype, "visibleItemCount", {
	        /** visibleItemCount */
	        get: function () {
	            return this._visibleItems.length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    Form.prototype.load = function (source) {
	        if (source) {
	            source.title && this._title.assignFrom(source.title);
	            source.footer && this._footer.assignFrom(source.footer);
	            source.header && this._header.assignFrom(source.header);
	            source.body && this._body.assignFrom(source.body);
	            if (Utils_1.Utils.isArray(source.items)) {
	                this.$_loadItems(source.items, this._items = []);
	            }
	            this._changed();
	        }
	    };
	    Form.prototype.getItem = function (index) {
	        return this._items[index];
	    };
	    Form.prototype.getVisibleItem = function (index) {
	        return this._visibleItems[index];
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    Form.prototype._changed = function () {
	        this.fireEvent(Form.CHANGED);
	    };
	    Form.prototype.$_loadItems = function (source, items, group) {
	        if (group === void 0) { group = null; }
	        for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {
	            var src = source_1[_i];
	            if (src) {
	                var item = void 0;
	                if (!group && Utils_1.Utils.isArray(src.items)) {
	                    var g = item = new FormItemGroup();
	                    this.$_loadItems(src.items, g["_items"], g);
	                }
	                else if (typeof src.template === 'string') {
	                    item = new FormTemplateItem();
	                }
	                else if (typeof src.fieldName === 'string') {
	                    item = new FormFieldItem();
	                }
	                item.assignFrom(src);
	                if (item) {
	                    if (group) {
	                        group["_items"].push(item);
	                        item["$_attached"](group);
	                    }
	                    else {
	                        this._items.push(item);
	                        item["$_attached"](this);
	                    }
	                }
	            }
	        }
	        this._visibleChanged = true;
	    };
	    Form.prototype.$_resetvisibles = function () {
	        var visibles = this._visibleItems = [];
	        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
	            var item = _a[_i];
	            if (item.visible) {
	                visibles.push(item);
	                if (item instanceof FormItemGroup && item.expanded) {
	                    for (var _b = 0, _c = item["_items"]; _b < _c.length; _b++) {
	                        var item2 = _c[_b];
	                        if (item.visible) {
	                            visibles.push(item);
	                        }
	                    }
	                }
	            }
	        }
	    };
	    Form.prototype.$_refreshItems = function () {
	        var items = this._items;
	        if (items) {
	            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
	                var item = items_1[_i];
	                item["$_refresh"](this);
	            }
	        }
	    };
	    Form.prototype.$_prepareLayout = function () {
	        if (this._visibleChanged) {
	            this.$_resetvisibles();
	            this._visibleChanged = false;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    Form.CHANGED = "onFormChanged";
	    return Form;
	}(EventAware_1.EventAware));
	exports.Form = Form;
	var FormObject = /** @class */ (function (_super) {
	    __extends(FormObject, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormObject() {
	        return _super.call(this) || this;
	    }
	    FormObject.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormObject.prototype._changed = function () {
	    };
	    return FormObject;
	}(Base_1.Base));
	exports.FormObject = FormObject;
	var FormSection = /** @class */ (function (_super) {
	    __extends(FormSection, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormSection(owner) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        _this._styleName = "";
	        _this._owner = owner;
	        return _this;
	    }
	    FormSection.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormSection.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormSection.prototype, "visible", {
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormSection.prototype, "styleName", {
	        /** styleName */
	        get: function () {
	            var s = this._getDefaultStyle();
	            if (this._styleName) {
	                s += ' ' + this._styleName;
	            }
	            return s;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormSection.prototype._changed = function () {
	        _super.prototype._changed.call(this);
	    };
	    return FormSection;
	}(FormObject));
	exports.FormSection = FormSection;
	var FormTitle = /** @class */ (function (_super) {
	    __extends(FormTitle, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormTitle(owner) {
	        var _this = _super.call(this, owner) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._height = 30;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._labelCell = {
	            displayText: "Field"
	        };
	        _this._valueCell = {
	            displayText: "Value"
	        };
	        return _this;
	    }
	    FormTitle.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormTitle.prototype, "height", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** height */
	        get: function () {
	            return this._height;
	        },
	        set: function (value) {
	            if (value != this._height) {
	                this._height = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormTitle.prototype.getLabelCell = function () {
	        return this._labelCell;
	    };
	    FormTitle.prototype.getValueCell = function () {
	        return this._valueCell;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormTitle.prototype._getDefaultStyle = function () {
	        return FormTitle.STYLE_NAME;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormTitle.STYLE_NAME = "rg-form-title";
	    return FormTitle;
	}(FormSection));
	exports.FormTitle = FormTitle;
	var FormHeader = /** @class */ (function (_super) {
	    __extends(FormHeader, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormHeader(owner) {
	        var _this = _super.call(this, owner) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._width = 100;
	        return _this;
	    }
	    FormHeader.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormHeader.prototype, "width", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** width */
	        get: function () {
	            return this._width;
	        },
	        set: function (value) {
	            if (value != this._width) {
	                this._width = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormHeader.prototype._getDefaultStyle = function () {
	        return FormHeader.STYLE_NAME;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormHeader.STYLE_NAME = "rg-form-header";
	    return FormHeader;
	}(FormSection));
	exports.FormHeader = FormHeader;
	var FormBody = /** @class */ (function (_super) {
	    __extends(FormBody, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormBody(owner) {
	        var _this = _super.call(this, owner) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._minRowHeight = 23;
	        return _this;
	    }
	    FormBody.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormBody.prototype, "minRowHeight", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** minRowHeight */
	        get: function () {
	            return this._minRowHeight;
	        },
	        set: function (value) {
	            if (value != this._minRowHeight) {
	                this._minRowHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormBody.prototype._getDefaultStyle = function () {
	        return FormBody.STYLE_NAME;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormBody.STYLE_NAME = "rg-form-body";
	    return FormBody;
	}(FormSection));
	exports.FormBody = FormBody;
	var FormFooter = /** @class */ (function (_super) {
	    __extends(FormFooter, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormFooter(owner) {
	        var _this = _super.call(this, owner) || this;
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._height = 30;
	        return _this;
	    }
	    FormFooter.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormFooter.prototype, "height", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** height */
	        get: function () {
	            return this._height;
	        },
	        set: function (value) {
	            if (value != this._height) {
	                this._height = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormFooter.prototype._getDefaultStyle = function () {
	        return FormFooter.STYLE_NAME;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormFooter.STYLE_NAME = "rg-form-footer";
	    return FormFooter;
	}(FormSection));
	exports.FormFooter = FormFooter;
	var FormItem = /** @class */ (function (_super) {
	    __extends(FormItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormItem() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        // events
	        //public static readonly PAGE_CHANGING = "onGridViewPageChanging";
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._visible = true;
	        _this._height = 0;
	        return _this;
	    }
	    FormItem.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormItem.prototype, "visible", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** visible */
	        get: function () {
	            return this._visible;
	        },
	        set: function (value) {
	            if (value != this._visible) {
	                this._visible = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormItem.prototype.canEdit = function () {
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormItem.prototype.$_attached = function (group) {
	        this._group = group;
	    };
	    FormItem.prototype._changed = function () {
	    };
	    FormItem.prototype._headerChanged = function () {
	        this._changed();
	    };
	    FormItem.prototype.$_refresh = function (form) {
	    };
	    /**
	     * row는 FormView가 넘긴다.
	     */
	    FormItem.prototype.$_prepareLayout = function (form, row) {
	        this._doPrepare(form, row);
	    };
	    FormItem.prototype._doPrepare = function (form, row) {
	    };
	    return FormItem;
	}(Base_1.Base));
	exports.FormItem = FormItem;
	var FormItemHeader = /** @class */ (function (_super) {
	    __extends(FormItemHeader, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormItemHeader(owner) {
	        var _this = _super.call(this) || this;
	        _this._owner = owner;
	        return _this;
	    }
	    FormItemHeader.prototype._doDispose = function () {
	        this._owner = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormItemHeader.prototype, "owner", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** owner */
	        get: function () {
	            return this._owner;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormItemHeader.prototype._changed = function () {
	        this._owner && this._owner["_headerChanged"]();
	    };
	    return FormItemHeader;
	}(FormObject));
	exports.FormItemHeader = FormItemHeader;
	var FormValueItem = /** @class */ (function (_super) {
	    __extends(FormValueItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormValueItem() {
	        var _this = _super.call(this) || this;
	        _this._header = new FormItemHeader(_this);
	        return _this;
	    }
	    FormValueItem.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormValueItem.prototype, "valueChanged", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return FormValueItem;
	}(FormItem));
	exports.FormValueItem = FormValueItem;
	var FormItemGroup = /** @class */ (function (_super) {
	    __extends(FormItemGroup, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormItemGroup() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //public static readonly PAGE_CHANGING = "onGridViewPageChanging";
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._items = [];
	        _this._expanded = true;
	        return _this;
	    }
	    FormItemGroup.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // FormItemContainer
	    //-------------------------------------------------------------------------
	    FormItemGroup.prototype.itemVisibleChanged = function (item) {
	        this._group && this._group.itemVisibleChanged(this);
	    };
	    FormItemGroup.prototype.itemChanged = function (item) {
	        this._group && this._group.itemChanged(this);
	    };
	    Object.defineProperty(FormItemGroup.prototype, "expanded", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanded */
	        get: function () {
	            return this._expanded;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormItemGroup.prototype.expand = function () {
	        if (!this._expanded) {
	            this._expanded = true;
	            return true;
	        }
	        return false;
	    };
	    FormItemGroup.prototype.collapse = function () {
	        if (this._expanded) {
	            this._expanded = false;
	            return true;
	        }
	        return false;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormItemGroup.prototype._doPrepare = function (form, row) {
	    };
	    return FormItemGroup;
	}(FormItem));
	exports.FormItemGroup = FormItemGroup;
	var FormFieldItem = /** @class */ (function (_super) {
	    __extends(FormFieldItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormFieldItem() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._fieldIndex = -1;
	        return _this;
	    }
	    FormFieldItem.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormFieldItem.prototype, "fieldName", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** fieldName */
	        get: function () {
	            return this._fieldName;
	        },
	        set: function (value) {
	            if (value != this._fieldName) {
	                this._fieldName = value;
	                this._fieldIndex = -99;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormFieldItem.prototype._doPrepare = function (form, row) {
	        if (this._fieldIndex < -1) {
	            this._fieldIndex = form.dataSource.getFieldIndex(this._fieldName);
	        }
	    };
	    return FormFieldItem;
	}(FormValueItem));
	exports.FormFieldItem = FormFieldItem;
	var FormTemplateItem = /** @class */ (function (_super) {
	    __extends(FormTemplateItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormTemplateItem() {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._dirty = false;
	        _this._valueIndex = -1;
	        return _this;
	    }
	    FormTemplateItem.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormTemplateItem.prototype, "template", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** template */
	        get: function () {
	            return this._template;
	        },
	        set: function (value) {
	            if (value != this._template) {
	                this._template = value;
	                this._dirty = true;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormTemplateItem.prototype, "valueField", {
	        /** valueField */
	        get: function () {
	            return this._valueField;
	        },
	        set: function (value) {
	            if (value != this._valueField) {
	                this._valueField = value;
	                this._valueIndex = -99;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormTemplateItem.prototype._doPrepare = function (form, row) {
	        if (this._valueIndex < -1) {
	            this._valueIndex = form.dataSource.getFieldIndex(this._valueField);
	        }
	    };
	    return FormTemplateItem;
	}(FormValueItem));
	exports.FormTemplateItem = FormTemplateItem;
	});

	unwrapExports(Form_1);
	var Form_2 = Form_1.Form;
	var Form_3 = Form_1.FormObject;
	var Form_4 = Form_1.FormSection;
	var Form_5 = Form_1.FormTitle;
	var Form_6 = Form_1.FormHeader;
	var Form_7 = Form_1.FormBody;
	var Form_8 = Form_1.FormFooter;
	var Form_9 = Form_1.FormItem;
	var Form_10 = Form_1.FormItemHeader;
	var Form_11 = Form_1.FormValueItem;
	var Form_12 = Form_1.FormItemGroup;
	var Form_13 = Form_1.FormFieldItem;
	var Form_14 = Form_1.FormTemplateItem;

	var FormTool = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FormTool.ts
	// 2020. 02. 28. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var FormSelectionTool = /** @class */ (function (_super) {
	    __extends(FormSelectionTool, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormSelectionTool(owner) {
	        var _this = _super.call(this, owner, "formSelectionTool") || this;
	        var form = _this._form = owner.formView;
	        return _this;
	    }
	    FormSelectionTool.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormSelectionTool.prototype, "form", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** form */
	        get: function () {
	            return this._form;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return FormSelectionTool;
	}(VisualTool_1.VisualTool));
	exports.FormSelectionTool = FormSelectionTool;
	});

	unwrapExports(FormTool);
	var FormTool_1 = FormTool.FormSelectionTool;

	var FormView_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// FormView.ts
	// 2020. 02. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019-2020 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var FormOptions = /** @class */ (function (_super) {
	    __extends(FormOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormOptions(owner) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._editable = true;
	        _this._itemResizable = true;
	        _this._owner = owner;
	        return _this;
	    }
	    Object.defineProperty(FormOptions.prototype, "editable", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** editable */
	        get: function () {
	            return this._editable;
	        },
	        set: function (value) {
	            this._editable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormOptions.prototype, "itemResizable", {
	        /** itemResizable */
	        get: function () {
	            return this._itemResizable;
	        },
	        set: function (value) {
	            if (value != this._itemResizable) {
	                this._itemResizable = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormOptions.prototype._changed = function () {
	    };
	    return FormOptions;
	}(Base_1.Base));
	exports.FormOptions = FormOptions;
	var LayoutInfo = /** @class */ (function () {
	    function LayoutInfo() {
	    }
	    return LayoutInfo;
	}());
	var FormElement = /** @class */ (function (_super) {
	    __extends(FormElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormElement() {
	        return _super.call(this) || this;
	    }
	    FormElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormElement.prototype._changed = function () {
	    };
	    return FormElement;
	}(VisualElement_1.VisualElement));
	var FormLayerElement = /** @class */ (function (_super) {
	    __extends(FormLayerElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormLayerElement(name) {
	        return _super.call(this, name) || this;
	    }
	    FormLayerElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormLayerElement.prototype._changed = function () {
	    };
	    return FormLayerElement;
	}(VisualElement_1.LayerElement));
	var FormSectionElement = /** @class */ (function (_super) {
	    __extends(FormSectionElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormSectionElement(model, name) {
	        var _this = _super.call(this, name) || this;
	        _this._model = model;
	        return _this;
	    }
	    FormSectionElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormSectionElement.prototype, "model", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** model */
	        get: function () {
	            return this._model;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormSectionElement.prototype.measure = function (info, hintWidth, hintHeight) {
	        return this._doMeasure(info, hintWidth, hintHeight);
	    };
	    FormSectionElement.prototype.layoutContent = function (info) {
	        this._doLayoutContent(info, this.width, this.height);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormSectionElement.prototype._getCssSelector = function () {
	        return this._model.styleName;
	    };
	    FormSectionElement.prototype._changed = function () {
	    };
	    return FormSectionElement;
	}(VisualElement_1.LayerElement));
	var FormCellElement = /** @class */ (function (_super) {
	    __extends(FormCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormCellElement() {
	        return _super.call(this) || this;
	    }
	    FormCellElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormCellElement.prototype.updateContent = function (model) {
	        this._doUpdateContent(model);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormCellElement.prototype._getCssSelector = function () {
	        return "rg-form-cell";
	    };
	    FormCellElement.prototype._changed = function () {
	    };
	    FormCellElement.prototype._doUpdateContent = function (model) {
	    };
	    FormCellElement.prototype._doDraw = function (dom) {
	    };
	    return FormCellElement;
	}(VisualElement_1.VisualElement));
	var FormItemElement = /** @class */ (function (_super) {
	    __extends(FormItemElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormItemElement() {
	        return _super.call(this) || this;
	    }
	    FormItemElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormItemElement.prototype._changed = function () {
	    };
	    return FormItemElement;
	}(VisualElement_1.VisualElement));
	var FormView = /** @class */ (function (_super) {
	    __extends(FormView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormView(container) {
	        var _this = _super.call(this) || this;
	        _this._container = container;
	        var form = _this._form = new Form_1.Form();
	        _this.addChild(_this._titleView = new FormTitleView(form.title));
	        //this.addChild(this._headerView = new FormHeaderView(form.header));
	        _this.addChild(_this._bodyView = new FormBodyView(form.body));
	        _this.addChild(_this._footerView = new FormFooterView(form.footer));
	        // this.addChild(this._groupView = new FormGroupContainer(form.body));
	        _this._layoutInfo = new LayoutInfo();
	        _this.visible = false;
	        return _this;
	    }
	    FormView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(FormView.prototype, "container", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** container */
	        get: function () {
	            return this._container;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormView.prototype, "form", {
	        /** form */
	        get: function () {
	            return this._form;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormView.prototype, "options", {
	        /** options */
	        get: function () {
	            return this._options;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormView.prototype, "dataSource", {
	        /** dataSource */
	        get: function () {
	            return this._form.dataSource;
	        },
	        set: function (value) {
	            this._form.dataSource = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormView.prototype, "currentRow", {
	        /** currentRow */
	        get: function () {
	            return -1;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(FormView.prototype, "focusedItem", {
	        /** focusedItem */
	        get: function () {
	            return this._focusedItem;
	        },
	        set: function (value) {
	            if (value != this._focusedItem) {
	                this._focusedItem = value;
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    FormView.prototype.invalidateLayout = function () {
	        this._container.invalidateLayout();
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormView.prototype._getCssSelector = function () {
	        return FormView.STYLE_NAME;
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormView.prototype.$_initialzie = function () {
	        this._selectionTool = new FormTool.FormSelectionTool(this._container);
	    };
	    FormView.prototype.$_activate = function () {
	        this._container.activeTool = this._selectionTool;
	    };
	    FormView.prototype.$_deactivate = function () {
	    };
	    FormView.prototype.$_prepareRender = function (bounds) {
	    };
	    FormView.prototype.$_layout = function (bounds) {
	        var x = bounds.x;
	        var y = bounds.y;
	        var w = bounds.width;
	        var h = bounds.height;
	        var form = this._form;
	        var info = this._layoutInfo;
	        var view;
	        var sz;
	        this._form["$_prepareLayout"]();
	        info.labelWidth = form.header.width;
	        info.valueWidth = bounds.width - info.labelWidth;
	        // titleView
	        if ((view = this._titleView).visible = view.model.visible) {
	            sz = view.measure(info, w, h);
	            view.setBounds(x, y, w, sz.height);
	            view.layoutContent(info);
	            h -= sz.height;
	            y += sz.height;
	        }
	        // footerView
	        if ((view = this._footerView).visible = view.model.visible) {
	            sz = view.measure(info, w, h);
	            view.setBounds(x, bounds.bottom - sz.height, sz.width, sz.height);
	            view.layoutContent(info);
	            h -= sz.height;
	        }
	        // // headerView
	        // if ((view = this._headerView).visible = view.model.visible) {
	        //     sz = view.measure(info, w, h);
	        //     view.setBounds(x, y, sz.width, h);
	        //     w -= sz.width;
	        //     x += w;
	        // }
	        // bodyView
	        view = this._bodyView;
	        view.measure(info, w, h);
	        view.setBounds(x, y, w, h);
	        view.layoutContent(info);
	        // // groupView
	        // view = this._groupView;
	        // view.measure(info, bounds.width, h);
	        // view.setBounds(bounds.x, y, bounds.width, h);
	        // view.layoutContent(info);
	        // headerView
	        // view = this._headerView;
	        // view.layoutContent(info);
	    };
	    FormView.prototype._changed = function () {
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormView.STYLE_NAME = "rg-form-root rg-form";
	    return FormView;
	}(VisualElement_1.LayerElement));
	exports.FormView = FormView;
	var FormTitleCellElement = /** @class */ (function (_super) {
	    __extends(FormTitleCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormTitleCellElement() {
	        return _super.call(this) || this;
	    }
	    FormTitleCellElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormTitleCellElement.prototype._createDom = function () {
	        var dom = _super.prototype._createDom.call(this);
	        var div = document.createElement("div");
	        div.className = FormTitleCellElement.STYLE_NAME;
	        dom.appendChild(div);
	        this._span = document.createElement("span");
	        div.appendChild(this._span);
	        return dom;
	    };
	    FormTitleCellElement.prototype._doUpdateContent = function (model) {
	        var span = this._span;
	        span.textContent = model.displayText;
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    FormTitleCellElement.STYLE_NAME = "rg-form-title-cell";
	    return FormTitleCellElement;
	}(FormCellElement));
	exports.FormTitleCellElement = FormTitleCellElement;
	var FormTitleView = /** @class */ (function (_super) {
	    __extends(FormTitleView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormTitleView(model) {
	        var _this = _super.call(this, model, "titleView") || this;
	        _this._labelCell = new FormTitleCellElement();
	        _this.addChild(_this._labelCell);
	        _this._valueCell = new FormTitleCellElement();
	        _this.addChild(_this._valueCell);
	        return _this;
	    }
	    FormTitleView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormTitleView.prototype._doMeasure = function (info, hintWidth, hintHeight) {
	        var title = this.model;
	        return Size_1.Size.create(hintWidth, title.height);
	    };
	    FormTitleView.prototype._doLayoutContent = function (info, width, height) {
	        var title = this.model;
	        this._labelCell.setBounds(0, 0, info.labelWidth, height);
	        this._labelCell.updateContent(title.getLabelCell());
	        this._valueCell.setBounds(info.labelWidth, 0, info.valueWidth, height);
	        this._valueCell.updateContent(title.getValueCell());
	    };
	    FormTitleView.prototype._doDraw = function (dom) {
	    };
	    return FormTitleView;
	}(FormSectionElement));
	exports.FormTitleView = FormTitleView;
	var FormHeaderCellElement = /** @class */ (function (_super) {
	    __extends(FormHeaderCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormHeaderCellElement() {
	        return _super.call(this) || this;
	    }
	    FormHeaderCellElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormHeaderCellElement.prototype._getCssSelector = function () {
	        return "";
	    };
	    FormHeaderCellElement.prototype._doDraw = function (dom) {
	    };
	    return FormHeaderCellElement;
	}(FormCellElement));
	exports.FormHeaderCellElement = FormHeaderCellElement;
	var FormHeaderView = /** @class */ (function (_super) {
	    __extends(FormHeaderView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormHeaderView(header) {
	        var _this = _super.call(this, header, "headerView") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        // events
	        //public static readonly PAGE_CHANGING = "onGridViewPageChanging";
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._cells = [];
	        return _this;
	    }
	    FormHeaderView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormHeaderView.prototype._doMeasure = function (info, hintWidth, hintHeight) {
	        var header = this.model;
	        var w = header.width;
	        return Size_1.Size.create(w, hintHeight);
	    };
	    FormHeaderView.prototype._doLayoutContent = function (info, width, height) {
	    };
	    FormHeaderView.prototype._doDraw = function (dom) {
	    };
	    return FormHeaderView;
	}(FormSectionElement));
	exports.FormHeaderView = FormHeaderView;
	var FormFooterView = /** @class */ (function (_super) {
	    __extends(FormFooterView, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    //public static readonly PAGE_CHANGING = "onGridViewPageChanging";
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormFooterView(footer) {
	        return _super.call(this, footer, "footerView") || this;
	    }
	    FormFooterView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormFooterView.prototype._doMeasure = function (info, hintWidth, hintHeight) {
	        var footer = this.model;
	        return Size_1.Size.create(hintWidth, footer.height);
	    };
	    FormFooterView.prototype._doLayoutContent = function (info, width, height) {
	    };
	    FormFooterView.prototype._doDraw = function (dom) {
	    };
	    return FormFooterView;
	}(FormSectionElement));
	exports.FormFooterView = FormFooterView;
	var FormBodyCellElement = /** @class */ (function (_super) {
	    __extends(FormBodyCellElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormBodyCellElement() {
	        return _super.call(this) || this;
	    }
	    FormBodyCellElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormBodyCellElement.prototype._getCssSelector = function () {
	        return "";
	    };
	    FormBodyCellElement.prototype._doDraw = function (dom) {
	    };
	    return FormBodyCellElement;
	}(FormCellElement));
	exports.FormBodyCellElement = FormBodyCellElement;
	var FormGroupHeaderElement = /** @class */ (function (_super) {
	    __extends(FormGroupHeaderElement, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormGroupHeaderElement() {
	        return _super.call(this) || this;
	    }
	    FormGroupHeaderElement.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormGroupHeaderElement.prototype._getCssSelector = function () {
	        return "";
	    };
	    FormGroupHeaderElement.prototype._doDraw = function (dom) {
	    };
	    return FormGroupHeaderElement;
	}(FormElement));
	exports.FormGroupHeaderElement = FormGroupHeaderElement;
	var FormBodyView = /** @class */ (function (_super) {
	    __extends(FormBodyView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormBodyView(model) {
	        return _super.call(this, model, "bodyView") || this;
	    }
	    FormBodyView.prototype._doDispose = function () {
	        this._tbody = null;
	        this._thead = null;
	        this._table = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormBodyView.prototype._createDom = function () {
	        var dom = document.createElement("div");
	        var table = this._table = document.createElement("table");
	        var css = table.style;
	        css.setProperty("table-layout", "fixed", "important");
	        css.setProperty("width", "0px", "important");
	        table.className = "rg-table";
	        dom.appendChild(table);
	        this._thead = document.createElement("thead");
	        table.appendChild(this._thead);
	        this._tbody = document.createElement("tbody");
	        table.appendChild(this._tbody);
	        this.$_initTable();
	        return dom;
	    };
	    FormBodyView.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.overflow = "hidden";
	    };
	    FormBodyView.prototype._doMeasure = function (info, hintWidth, hintHeight) {
	        return Size_1.Size.create(hintWidth, hintHeight);
	    };
	    FormBodyView.prototype._doLayoutContent = function (info, width, height) {
	        var body = this.model;
	        this.$_updateHead(info);
	        this.$_updateRows(info, body);
	    };
	    FormBodyView.prototype._doDraw = function (dom) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    FormBodyView.prototype.$_initTable = function () {
	        var head = this._thead;
	        var row = document.createElement("tr");
	        head.appendChild(row);
	        row.setAttribute("aria-hidden", "true");
	        var css = row.style;
	        //css.border = "0px none !important";
	        css.setProperty("border", "0px none", "important"); // TODO: 이렇게 하지 않으면 틀어진다! WHY?
	        for (var i = 0; i < 2; i++) {
	            var th = document.createElement("th");
	            th.scope = "col";
	            css = th.style;
	            css.setProperty("visibility", "hidden", "important");
	            css.setProperty("margin", "0px", "important");
	            css.setProperty("padding", "0px", "important");
	            css.setProperty("font-size", "0px", "important");
	            css.setProperty("line-height", "0px", "important");
	            css.height = "0px";
	            row.appendChild(th);
	        }
	    };
	    FormBodyView.prototype.$_updateHead = function (info) {
	        var children = this._thead.firstElementChild.children;
	        var css = children[0].style;
	        css.width = info.labelWidth + 'px';
	        css = children[1].style;
	        css.width = info.valueWidth + 'px';
	    };
	    FormBodyView.prototype.$_updateRows = function (info, model) {
	        var form = model.owner;
	        var body = this._tbody;
	        var rowCount = 100; //form.visibleItemCount;
	        while (body.childElementCount < rowCount) {
	            var tr = document.createElement("tr");
	            for (var i = 0; i < 2; i++) {
	                var td = document.createElement("td");
	                tr.appendChild(td);
	            }
	            body.appendChild(tr);
	        }
	        while (body.childElementCount > rowCount) {
	            body.removeChild(body.lastChild);
	        }
	        var rows = body.rows;
	        var h = model.minRowHeight + "px";
	        for (var i = 0, cnt = rows.length; i < cnt; i++) {
	            var tr = rows[i];
	            var css = tr.style;
	            css.height = h;
	            this.$_updateRow(info, i, tr);
	        }
	    };
	    FormBodyView.prototype.$_updateRow = function (info, row, tr) {
	        var td = tr.children[0];
	        td.textContent = "XXX";
	        td = tr.children[1];
	        td.textContent = "ZZZ";
	    };
	    return FormBodyView;
	}(FormSectionElement));
	exports.FormBodyView = FormBodyView;
	var FormGroupContainer = /** @class */ (function (_super) {
	    __extends(FormGroupContainer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function FormGroupContainer(model) {
	        var _this = _super.call(this, model, "groupContainer") || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._headerViews = [];
	        return _this;
	    }
	    FormGroupContainer.prototype._doDispose = function () {
	        for (var _i = 0, _a = this._headerViews; _i < _a.length; _i++) {
	            var view = _a[_i];
	            view.dispose();
	        }
	        this._headerViews = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    FormGroupContainer.prototype._getCssSelector = function () {
	        return "";
	    };
	    FormGroupContainer.prototype._doMeasure = function (info, hintWidth, hintHeight) {
	        return Size_1.Size.create(hintWidth, hintHeight);
	    };
	    FormGroupContainer.prototype._doLayoutContent = function (info, width, height) {
	    };
	    FormGroupContainer.prototype._doDraw = function (dom) {
	    };
	    return FormGroupContainer;
	}(FormSectionElement));
	exports.FormGroupContainer = FormGroupContainer;
	});

	unwrapExports(FormView_1);
	var FormView_2 = FormView_1.FormOptions;
	var FormView_3 = FormView_1.FormView;
	var FormView_4 = FormView_1.FormTitleCellElement;
	var FormView_5 = FormView_1.FormTitleView;
	var FormView_6 = FormView_1.FormHeaderCellElement;
	var FormView_7 = FormView_1.FormHeaderView;
	var FormView_8 = FormView_1.FormFooterView;
	var FormView_9 = FormView_1.FormBodyCellElement;
	var FormView_10 = FormView_1.FormGroupHeaderElement;
	var FormView_11 = FormView_1.FormBodyView;
	var FormView_12 = FormView_1.FormGroupContainer;

	var GridContainer_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// GridContainer.ts
	// 2019. 07. 26. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });




	var GridContainer = /** @class */ (function (_super) {
	    __extends(GridContainer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridContainer(containerId) {
	        return _super.call(this, containerId) || this;
	    }
	    GridContainer.prototype._doDispose = function () {
	        this._gridView = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridContainer.prototype, "gridView", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** gridView */
	        get: function () {
	            return this._gridView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridContainer.prototype, "formView", {
	        /** formView */
	        get: function () {
	            if (!this._formView) {
	                this._formView = new FormView_1.FormView(this);
	                this._formView["$_initialzie"]();
	                this.addElement(this._formView);
	            }
	            return this._formView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridContainer.prototype, "heightMeasurer", {
	        /** heightMeasurer */
	        get: function () {
	            return this._heightMeasurer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    GridContainer.prototype._doPrepareContainer = function (dom) {
	        dom.className = "rg-root rg-grid";
	        this._gridView = this._createGridView();
	        this.addElement(this._gridView);
	        this._activeView = this._gridView;
	        this._heightMeasurer = new GridMeasurer(this.measurer);
	    };
	    GridContainer.prototype._createDefaultTool = function () {
	        return new GridView_1.GridViewSelectionTool(this);
	    };
	    GridContainer.prototype._doLayout = function (bounds) {
	        var r = bounds.clone();
	        if (this._formView && this._formView.visible) {
	            if (this._activeView !== this._formView) {
	                this._gridView["$_deactivate"]();
	                this._formView["$_activate"]();
	                this._activeView = this._formView;
	            }
	        }
	        else if (this._activeView === this._formView) {
	            this._formView && this._formView["$_deactivate"]();
	            this._gridView["$_activate"]();
	            this._activeView = this._gridView;
	        }
	        if (this._activeView === this._formView) {
	            this._formView.setRect(r);
	            r.x = r.y = 0;
	            this._formView["$_layout"](r);
	        }
	        else {
	            this._gridView.setRect(r);
	            r.x = r.y = 0;
	            this._gridView["$_layout"](r);
	        }
	    };
	    GridContainer.prototype._doPrepareRender = function (bounds) {
	        var r = bounds.clone();
	        if (this._gridView.visible) {
	            this._gridView.setRect(r);
	            r.x = r.y = 0;
	            this._gridView["$_prepareRender"](r);
	        }
	        if (this._formView && this._formView.visible) {
	            this._formView.setRect(r);
	            r.x = r.y = 0;
	            this._formView["$_prepareRender"](r);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridContainer.prototype._createGridView = function () {
	        return new GridView_1.GridView(this);
	    };
	    return GridContainer;
	}(VisualContainer_1.VisualContainer));
	exports.GridContainer = GridContainer;
	var GridMeasurer = /** @class */ (function (_super) {
	    __extends(GridMeasurer, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridMeasurer(container) {
	        var _this = _super.call(this) || this;
	        _this._bodyStyle = 'rg-body';
	        _this._headerStyle = 'rg-header';
	        _this._summaryStyle = 'rg-header-summary';
	        _this._footerStyle = 'rg-footer';
	        // table
	        _this._tableStyle = 'rg-table';
	        // tr
	        _this._dataRowStyle = 'rg-data-row';
	        _this._headerRowStyle = '';
	        _this._summaryRowStyle = '';
	        _this._footerRowStyle = '';
	        _this._groupHeaderStyle = 'rg-rowgroup-header';
	        _this._groupFooterStyle = 'rg-rowgroup-footer';
	        // td
	        _this._dataCellStyle = 'rg-data-cell';
	        _this._headerCellStyle = 'rg-header-cell';
	        _this._summaryCellStyle = 'rg-header-summary-cell';
	        _this._footerCellStyle = 'rg-footer-cell';
	        _this._groupFooterCellStyle = 'rg-rowgroup-footer-cell';
	        // heights
	        _this._rowHeight = 0;
	        _this._headerHeight = 0;
	        _this._summaryHeight = 0;
	        _this._footerHeight = 0;
	        _this._gfooterHeight = 0;
	        _this._dirty = true;
	        _this._container = container;
	        _this.$_prepareElements(container);
	        return _this;
	    }
	    GridMeasurer.prototype._doDispose = function () {
	        this._container = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(GridMeasurer.prototype, "rowHeight", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** rowHeight */
	        get: function () {
	            return this._rowHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridMeasurer.prototype, "headerHeight", {
	        /** headerHeight */
	        get: function () {
	            return this._headerHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridMeasurer.prototype, "summaryHeight", {
	        /** summaryHeight */
	        get: function () {
	            return this._summaryHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridMeasurer.prototype, "footerHeight", {
	        /** footerHeight */
	        get: function () {
	            return this._footerHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridMeasurer.prototype, "groupFooterHeight", {
	        /** groupFooterHeight */
	        get: function () {
	            return this._gfooterHeight;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    GridMeasurer.prototype.measure = function (grid) {
	        if (this._dirty) {
	            this._dirty = false;
	            var container = this._container;
	            var table = this._container.firstElementChild;
	            var tr = table.tBodies[0].rows[0];
	            var td = tr.cells[0];
	            var div = td.firstElementChild;
	            this._rowHeight = this.$_measureBody(container, tr, td, div);
	            this._headerHeight = this.$_measureHeader(container, tr, td, div);
	            this._summaryHeight = this.$_measureSummary(container, tr, td, div);
	            this._footerHeight = this.$_measureFooter(container, tr, td, div);
	            this._gfooterHeight = this.$_measureGroupFooter(container, tr, td, div);
	        }
	    };
	    GridMeasurer.prototype.invalidate = function () {
	        this._dirty = true;
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    GridMeasurer.prototype.$_prepareElements = function (container) {
	        var table = document.createElement('table');
	        container.appendChild(table);
	        var css = table.style;
	        //css.display = "none";
	        css.width = "1000px";
	        css.height = "1px";
	        css.left = "-10000px";
	        css.position = "absolute";
	        table.className = "rg-table";
	        var body = document.createElement("tbody");
	        table.appendChild(body);
	        var tr = document.createElement("tr");
	        body.appendChild(tr);
	        var td = document.createElement("td");
	        td.className = "rg-data-cell";
	        tr.appendChild(td);
	        var div = document.createElement("div");
	        td.appendChild(div);
	        div.textContent = "AYwyhi우리테크";
	    };
	    GridMeasurer.prototype.$_measureBody = function (container, tr, td, div) {
	        container.className = this._bodyStyle;
	        tr.className = this._dataRowStyle;
	        td.className = this._dataCellStyle;
	        return tr.offsetHeight;
	    };
	    GridMeasurer.prototype.$_measureGroupFooter = function (container, tr, td, div) {
	        container.className = this._bodyStyle;
	        tr.className = this._groupFooterStyle;
	        td.className = this._groupFooterCellStyle;
	        return tr.offsetHeight;
	    };
	    GridMeasurer.prototype.$_measureGroupHeader = function (container, tr, td, div) {
	        container.className = this._bodyStyle;
	        tr.className = this._groupHeaderStyle;
	        td.className = '';
	        return tr.offsetHeight;
	    };
	    GridMeasurer.prototype.$_measureHeader = function (container, tr, td, div) {
	        container.className = this._headerStyle;
	        tr.className = this._headerRowStyle;
	        td.className = this._headerCellStyle;
	        return tr.offsetHeight;
	    };
	    GridMeasurer.prototype.$_measureSummary = function (container, tr, td, div) {
	        container.className = this._summaryStyle;
	        tr.className = this._summaryRowStyle;
	        td.className = this._summaryCellStyle;
	        return tr.offsetHeight;
	    };
	    GridMeasurer.prototype.$_measureFooter = function (container, tr, td, div) {
	        container.className = this._footerStyle;
	        tr.className = this._footerRowStyle;
	        td.className = this._footerCellStyle;
	        return tr.offsetHeight;
	    };
	    return GridMeasurer;
	}(Base_1.Base));
	exports.GridMeasurer = GridMeasurer;
	});

	unwrapExports(GridContainer_1);
	var GridContainer_2 = GridContainer_1.GridContainer;
	var GridContainer_3 = GridContainer_1.GridMeasurer;

	var TreeGridItemProvider_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeGridItemProvider.ts
	// 2019. 09. 23. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });





	var TreeEditItem = /** @class */ (function (_super) {
	    __extends(TreeEditItem, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeEditItem(rs, item, state) {
	        var _this = _super.call(this, item && item.row) || this;
	        _this._values = [];
	        _this._started = false;
	        _this._checkDiff = false;
	        _this._strictDiff = false;
	        _this._rs = rs;
	        _this._item = item;
	        _this._state = state;
	        return _this;
	    }
	    TreeEditItem.prototype.dispose = function () {
	        this._values = null;
	        _super.prototype.dispose.call(this);
	    };
	    Object.defineProperty(TreeEditItem.prototype, "values", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** values */
	        get: function () {
	            return this._values.concat();
	        },
	        set: function (vals) {
	            var ds = this.dataSource;
	            var cnt = ds.fieldCount;
	            if (vals) {
	                cnt = Math.min(cnt, vals.length);
	                for (var i = 0; i < cnt; i++) {
	                    var fld = ds.getField(i);
	                    var oldValue = this._values[i];
	                    var newValue = fld.readValue(vals[i]);
	                    this._values[i] = newValue;
	                    if (this._started && parent && !fld.equalValues(oldValue, newValue)) {
	                        this._rs["_editItemCellUpdated"](this, i, oldValue, newValue);
	                    }
	                }
	            }
	            else {
	                this._values = [];
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeEditItem.prototype.beginEdit = function (checkDiff, strictDiff) {
	        this._started = true;
	        this._checkDiff = checkDiff;
	        this._strictDiff = strictDiff;
	    };
	    TreeEditItem.prototype.setValue = function (field, value) {
	        var ds = this.dataSource;
	        if (field < 0 && field >= ds.fieldCount) {
	            throw new RangeError("field index is out of bounds: " + field);
	        }
	        var fld = ds.getField(field);
	        var oldValue = this._values[field];
	        value = fld.readValue(value);
	        this._values[field] = value;
	        if (this._started && this.parent && !fld.equalValues(oldValue, value)) {
	            this._rs["_editItemCellUpdated"](this, field, oldValue, value);
	        }
	    };
	    Object.defineProperty(TreeEditItem.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rs.dataSource;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeEditItem.prototype, "itemState", {
	        get: function () {
	            return this._state;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeEditItem.prototype, "rowState", {
	        get: function () {
	            return this._item ? this._item.rowState : RowState_1.RowState.NONE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeEditItem.prototype, "editable", {
	        get: function () {
	            return true;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeEditItem.prototype, "expanded", {
	        get: function () {
	            return this._item ? this._item.expanded : false;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeEditItem.prototype.getData = function (field) {
	        if (field < 0 && field >= this.dataSource.fieldCount) {
	            throw new RangeError("field index is out of bounds: " + field);
	        }
	        return this._values[field];
	    };
	    TreeEditItem.prototype.setData = function (field, value) {
	        var ds = this.dataSource;
	        if (field < 0 && field >= ds.fieldCount) {
	            throw new RangeError("field index is out of bounds: " + field);
	        }
	        var fld = ds.getField(field);
	        var oldValue = this._values[field];
	        value = fld.readValue(value);
	        var can = !this._checkDiff;
	        if (!can) {
	            if (this._strictDiff) {
	                can = !fld.equalValues(oldValue, value);
	            }
	            else {
	                can = !fld.sameValues(oldValue, value);
	            }
	        }
	        if (can) {
	            this._values[field] = value;
	            if (this.parent) {
	                this._rs["_editItemCellUpdated"](this, field, oldValue, value);
	                this._rs["_editItemCellEdited"](this, field);
	            }
	        }
	    };
	    TreeEditItem.prototype.getRowData = function () {
	        return this._values.concat();
	    };
	    TreeEditItem.prototype.getRowObject = function () {
	        var ds = this.dataSource;
	        if (ds) {
	            var row = {};
	            for (var i = 0, cnt = ds.fieldCount; i < cnt; i++) {
	                var fld = ds.getOrgFieldName(i);
	                row[fld] = this._values[i];
	            }
	            return row;
	        }
	        else {
	            return null;
	        }
	    };
	    return TreeEditItem;
	}(TreeItemProvider_1.TreeItem));
	exports.TreeEditItem = TreeEditItem;
	var TreeGridItemProvider = /** @class */ (function (_super) {
	    __extends(TreeGridItemProvider, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeGridItemProvider(indexing) {
	        var _this = _super.call(this, null, indexing) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        _this._observers = [];
	        _this._appending = false;
	        _this._insertAfter = false;
	        _this._insertIndex = -1;
	        _this._rs = new TreeItemProvider_1.TreeItemProvider();
	        _this.source = _this._rs;
	        _this._summarizer = new GridSummarizer.DefaultSummarizer(_this._rs);
	        return _this;
	    }
	    TreeGridItemProvider.prototype._doDispose = function () {
	        this._rs = null;
	        this._summarizer = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "summarizer", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._summarizer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeGridItemProvider.prototype.getLevels = function (visibleOnly) {
	        return this._rs.getLevels(visibleOnly);
	    };
	    TreeGridItemProvider.prototype.orderBy = function (fields, directions, textCases) {
	        this._rs.orderBy(fields, directions, textCases);
	    };
	    TreeGridItemProvider.prototype.getSortFields = function () {
	        return this._rs.getSortFields();
	    };
	    TreeGridItemProvider.prototype.getSortDirections = function () {
	        return this._rs.getSortDirections();
	    };
	    TreeGridItemProvider.prototype.getSortCases = function () {
	        return this._rs.getSortCases();
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "labelComparer", {
	        get: function () {
	            return this._rs.labelComparer;
	        },
	        set: function (comparer) {
	            this._rs.labelComparer = comparer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeGridItemProvider.prototype.isFiltered = function (field) {
	        return field != null ? this._rs.hasFilter(field) : this._rs.hasFilters();
	    };
	    TreeGridItemProvider.prototype.addFilter = function (field, refFilter) {
	        this._rs.addFilter(field, refFilter);
	    };
	    TreeGridItemProvider.prototype.removeFilter = function (field, filter) {
	        this._rs.removeFilter(field, filter);
	    };
	    TreeGridItemProvider.prototype.clearFilters = function (field) {
	        this._rs.clearFilters(field);
	    };
	    TreeGridItemProvider.prototype.clearAllFilters = function () {
	        this._rs.clearAllFilters();
	    };
	    TreeGridItemProvider.prototype.beginFiltering = function () {
	        this._rs.beginFiltering();
	    };
	    TreeGridItemProvider.prototype.endFiltering = function (filterCollection, filter) {
	        //this._rs["_addParentNodeOnFiltering"] = this._addParentNodeOnFiltering;
	        this._rs.endFiltering(true, filterCollection, filter);
	    };
	    TreeGridItemProvider.prototype.expand = function (item, recursive, force, level) {
	        this._rs.expand(item, recursive, force, level);
	    };
	    TreeGridItemProvider.prototype.collapse = function (item, recursive) {
	        this._rs.collapse(item, recursive);
	    };
	    TreeGridItemProvider.prototype.expandAll = function (level) {
	        this._rs.expandAll(level);
	    };
	    TreeGridItemProvider.prototype.collapseAll = function () {
	        this._rs.collapseAll();
	    };
	    TreeGridItemProvider.prototype.getCheckedRows = function () {
	        return this._rs.getCheckedRows();
	    };
	    TreeGridItemProvider.prototype.getCheckedRowIds = function () {
	        return this._rs.getCheckedRowIds();
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "checkableExpression", {
	        set: function (value) {
	            this._rs.checkableExpression = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeGridItemProvider.prototype.resetCheckables = function () {
	        this._rs.resetCheckables();
	    };
	    TreeGridItemProvider.prototype.applyCheckables = function () {
	        this._rs.applyCheckables();
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "hideDeleted", {
	        get: function () {
	            return this._rs.hideDeleted;
	        },
	        set: function (value) {
	            this._rs.hideDeleted = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeGridItemProvider.prototype.getAllItems = function () {
	        return this._rs.getAllItems();
	    };
	    TreeGridItemProvider.prototype.getItem = function (index) {
	        return this._rs.getItem(index);
	    };
	    TreeGridItemProvider.prototype.getItemOfRow = function (dataRow) {
	        return this._rs.getItemOfRow(dataRow);
	    };
	    TreeGridItemProvider.prototype.findItem = function (fields, values, options, startIndex, endIndex) {
	        return this._rs.findItem(fields, values, options, startIndex, endIndex);
	    };
	    TreeGridItemProvider.prototype.findCell = function (fields, value, options, startIndex, endIndex, startFieldIndex) {
	        return this._rs.findCell(fields, value, options, startIndex, endIndex, startFieldIndex);
	    };
	    TreeGridItemProvider.prototype.checkItem = function (item, checked, exclusive, checkEvent) {
	        this._rs.checkItem(item, checked, exclusive, checkEvent);
	    };
	    TreeGridItemProvider.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent) {
	        this._rs.checkAll(checked, visibleOnly, checkableOnly, checkEvent);
	    };
	    TreeGridItemProvider.prototype.hasCellStyle = function () {
	        return this._rs.hasCellstyle();
	    };
	    TreeGridItemProvider.prototype.setCellStyle = function (row, field, style) {
	        this._rs.setCellStyle(row, field, style);
	    };
	    TreeGridItemProvider.prototype.setCellStyles = function (provider, rows, fieldMap) {
	        this._rs.setCellStyles(provider, rows, fieldMap);
	    };
	    TreeGridItemProvider.prototype.removeCellStyle = function (style) {
	        this._rs.removeCellStyle(style);
	    };
	    TreeGridItemProvider.prototype.clearCellStyles = function () {
	        this._rs.clearCellStyles();
	    };
	    TreeGridItemProvider.prototype.checkCellStyle = function (rowId, field) {
	        return this._rs.checkCellStyle(rowId, field);
	    };
	    TreeGridItemProvider.prototype.getCellStyle = function (dataRow, field) {
	        return this._rs.getCellStyle(dataRow, field);
	    };
	    TreeGridItemProvider.prototype.setCellEditable = function (dataRow, column, value) {
	        this._rs.setCellEditable(dataRow, column, value);
	    };
	    TreeGridItemProvider.prototype.setCellReadOnly = function (dataRow, column, value) {
	        this._rs.setCellReadOnly(dataRow, column, value);
	    };
	    TreeGridItemProvider.prototype.getCellEditable = function (dataRow, column) {
	        return this._rs.getCellEditable(dataRow, column);
	    };
	    TreeGridItemProvider.prototype.getCellReadOnly = function (dataRow, column) {
	        return this._rs.getCellReadOnly(dataRow, column, null);
	    };
	    TreeGridItemProvider.prototype.setCellCursor = function (dataRow, column, value) {
	        this._rs.setCellCursor(dataRow, column, value);
	    };
	    TreeGridItemProvider.prototype.getCellCursor = function (dataRow, column) {
	        return this._rs.getCellCursor(dataRow, column);
	    };
	    TreeGridItemProvider.prototype.setCellEditor = function (dataRow, column, value) {
	        this._rs.setCellEditor(dataRow, column, value);
	    };
	    TreeGridItemProvider.prototype.getCellEditor = function (dataRow, column) {
	        return this._rs.getCellEditor(dataRow, column);
	    };
	    TreeGridItemProvider.prototype.clearEditableMap = function () {
	        return this._rs.clearEditableMap();
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "summaryMode", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        set: function (value) {
	            this._rs.summaryMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeGridItemProvider.prototype, "groupSummaryMode", {
	        set: function (value) {
	            this._rs.groupSummaryMode = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeGridItemProvider.prototype, "itemCount", {
	        // set sortMode(value: SortMode) {
	        //     this._rs.sortMode = value;
	        // }
	        get: function () {
	            return this._rs.itemCount;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeGridItemProvider.prototype.getItems = function (index, count) {
	        throw new Error("Method not implemented.");
	    };
	    TreeGridItemProvider.prototype.canAppend = function () {
	        return false;
	    };
	    TreeGridItemProvider.prototype.canInsert = function (item) {
	        if (item) {
	            return true;
	        }
	        return false;
	    };
	    TreeGridItemProvider.prototype.canDelete = function (item) {
	        if (item) {
	            return true;
	        }
	        return false;
	    };
	    TreeGridItemProvider.prototype.$_replaceItem = function (item, newItem) {
	        var parent = item.parent;
	        parent.setItem(item, newItem);
	        this._rs["_setItem"](item, newItem);
	    };
	    TreeGridItemProvider.prototype._doBeginUpdate = function (item) {
	        this["_editingItem"] = this._editItem = this._createEditItem(item, GridItem_1.ItemState.UPDATING, null);
	        this.$_replaceItem(item, this._editItem);
	        return this._editItem;
	    };
	    TreeGridItemProvider.prototype._doBeginAppend = function (defaultValues) {
	        this["_editingItem"] = this._editItem = this._createEditItem(null, GridItem_1.ItemState.APPENDING, defaultValues);
	        return this._editItem;
	    };
	    TreeGridItemProvider.prototype._doBeginInsert = function (item, defaultValues, shift, ctrl) {
	        if (shift === void 0) { shift = false; }
	        if (ctrl === void 0) { ctrl = false; }
	        if (ctrl) {
	            this._appending = true;
	            item.setExpanded(true, false, false);
	            this["_editingItem"] = this._editItem = this._createEditItem(null, GridItem_1.ItemState.INSERTING, defaultValues);
	            this._rs.appendItem(item, this._editItem);
	        }
	        else {
	            var p = item.parent;
	            this._appending = false;
	            this._insertAfter = shift;
	            this._insertIndex = p.indexOf(item);
	            this["_editingItem"] = this._editItem = this._createEditItem(item, GridItem_1.ItemState.INSERTING, defaultValues);
	            this._rs.insertItem(p, this._editItem, this._insertIndex, this._insertAfter);
	        }
	        return this._editItem;
	    };
	    TreeGridItemProvider.prototype._doCompleteUpdate = function (orgItem) {
	        var ds = this.dataSource;
	        var rslt = false;
	        if (ds) {
	            this.$_replaceItem(this._editItem, orgItem);
	            var row = this._editItem.row;
	            try {
	                rslt = row.update(this._editItem.values);
	            }
	            catch (e) {
	                this.$_replaceItem(orgItem, this._editItem);
	                throw e;
	            }
	            if (rslt) ;
	            else {
	                this.$_replaceItem(orgItem, this._editItem);
	            }
	        }
	        return rslt;
	    };
	    TreeGridItemProvider.prototype._doCompleteInsert = function (appending) {
	        var ds = this.dataSource;
	        var rslt = false;
	        if (ds) {
	            var parent_1 = this._editItem.parent;
	            var row = parent_1.row;
	            var child = ds.createRow(this._editItem.values, -1, false);
	            var index = this._editItem.parent.indexOf(this._editItem);
	            this._rs.removeItem(this._editItem);
	            try {
	                if (this.isAppending) {
	                    rslt = row.addChild(child, false);
	                }
	                else {
	                    rslt = row.insertChild(index, child, false);
	                }
	            }
	            catch (e) {
	                if (this._appending) {
	                    this._rs.appendItem(parent_1, this._editItem);
	                }
	                else {
	                    this._rs.insertItem(parent_1, this._editItem, this._insertIndex, this._insertAfter);
	                }
	                throw e;
	            }
	            if (rslt) {
	                var item = parent_1.itemOfRow(child.rowId);
	                this._copyExtents(this._editItem, item);
	            }
	            else {
	                if (this._appending) {
	                    this._rs.appendItem(parent_1, this._editItem);
	                }
	                else {
	                    this._rs.insertItem(parent_1, this._editItem, this._insertIndex, this._insertAfter);
	                }
	            }
	        }
	        return rslt;
	    };
	    TreeGridItemProvider.prototype._doCancelEdit = function (state, orgItem) {
	        if (state == GridItem_1.ItemState.UPDATING) {
	            this.$_replaceItem(this._editItem, orgItem);
	            this._copyExtents(this._editItem, orgItem);
	        }
	        else if (state == GridItem_1.ItemState.INSERTING) {
	            if (this._editItem.parent) {
	                this._rs.removeItem(this._editItem);
	            }
	        }
	        _super.prototype._doCancelEdit.call(this, state, orgItem);
	    };
	    TreeGridItemProvider.prototype._doCommitEdit = function (state, orgItem) {
	        if (state == GridItem_1.ItemState.UPDATING) ;
	        else if (state == GridItem_1.ItemState.INSERTING) ;
	        return _super.prototype._doCommitEdit.call(this, state, orgItem);
	    };
	    TreeGridItemProvider.prototype.remove = function (item) {
	        if (item) {
	            var row = item.row;
	            if (row) {
	                row.parent.removeChild(row);
	            }
	        }
	    };
	    TreeGridItemProvider.prototype.removeAll = function (items) {
	        if (items && items.length > 0) {
	            var rows = [];
	            for (var i = 0, cnt = items.length; i < cnt; i++) {
	                var item = this._rs.getItem(items[i]);
	                rows.push(item.row);
	            }
	            this.dataSource.removeRows(rows);
	        }
	    };
	    TreeGridItemProvider.prototype.getRemovableRows = function (items) {
	        if (items.length > 0) {
	            var rows = [];
	            for (var i = 0, cnt = items.length; i < cnt; i++) {
	                var item = this._rs.getItem(items[i]);
	                rows.push(item.row);
	            }
	            return rows;
	        }
	    };
	    TreeGridItemProvider.prototype.removeRows = function (rows) {
	        if (rows) {
	            this.dataSource.removeRows(rows);
	        }
	    };
	    TreeGridItemProvider.prototype.setDataSource = function (value) {
	        this._rs.dataSource = value;
	    };
	    Object.defineProperty(TreeGridItemProvider.prototype, "rootItem", {
	        get: function () {
	            return this._rs["_rootItem"];
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeGridItemProvider.prototype._createEditItem = function (target, state, defaultValues) {
	        this["_editingItem"] = null;
	        var ds = this.dataSource;
	        if (!ds) {
	            return null;
	        }
	        var flds = ds.fieldCount;
	        switch (state) {
	            case GridItem_1.ItemState.UPDATING:
	                this["_editingItem"] = new TreeEditItem(this, target, state);
	                for (var i = 0; i < flds; i++) {
	                    this["_editingItem"].setValue(i, target.getData(i));
	                }
	                this._copyExtents(target, this["_editingItem"]);
	                break;
	            case GridItem_1.ItemState.INSERTING:
	            case GridItem_1.ItemState.APPENDING:
	                this["_editingItem"] = new TreeEditItem(this, null, state);
	                if (defaultValues) {
	                    for (var i = 0; i < flds; i++) {
	                        if (defaultValues.length > i) {
	                            this["_editingItem"].setValue(i, defaultValues[i]);
	                        }
	                    }
	                }
	                break;
	        }
	        return this["_editingItem"];
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    TreeGridItemProvider.prototype.onItemProviderFilterAdd = function (rs, field, criteria) {
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterRemove = function (rs, field, filter) {
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterClear = function (rs, field) {
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterClearAll = function (rs) {
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterAdded = function (rs, field, criteria) {
	        this._fireFilterAdded(field, criteria);
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterRemoved = function (rs, field, filter) {
	        this._fireFilterRemoved(field, filter);
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterCleared = function (rs, field) {
	        this._fireFilterCleared(field);
	    };
	    TreeGridItemProvider.prototype.onItemProviderFilterAllCleared = function (rs) {
	        this._fireFilterAllCleared();
	    };
	    TreeGridItemProvider.prototype.onItemProviderFiltered = function (rs) {
	        this._fireFiltered(null, null); //filterCollection, filter);
	    };
	    TreeGridItemProvider.prototype.onItemProviderSort = function (rs, fields, directions) {
	        this._fireSort(fields, directions, null);
	    };
	    TreeGridItemProvider.prototype.onItemProviderSorted = function (rs) {
	        this._fireSorted();
	    };
	    TreeGridItemProvider.prototype.onTreeItemProviderItemChanged = function (rs, item) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider_1.TreeItemProvider.ITEM_CHANGED, item);
	        }
	    };
	    TreeGridItemProvider.prototype.onTreeItemProviderExpanding = function (rs, item) {
	        if (this["_eventLock"] <= 0) {
	            return this.fireConfirmEvent(TreeItemProvider_1.TreeItemProvider.EXPANDING, item);
	        }
	        return true;
	    };
	    TreeGridItemProvider.prototype.onTreeItemProviderExpanded = function (rs, item) {
	        if (this["_eventLock"] <= 0) {
	            this.fireEvent(TreeItemProvider_1.TreeItemProvider.EXPANDED, item);
	        }
	    };
	    TreeGridItemProvider.prototype.onTreeItemProviderCollapsing = function (rs, item) {
	        if (this["_eventLock"] <= 0) {
	            return this.fireConfirmEvent(TreeItemProvider_1.TreeItemProvider.COLLAPSING, item);
	        }
	        return true;
	    };
	    return TreeGridItemProvider;
	}(EditableItemProvider_1.EditableItemProvider));
	exports.TreeGridItemProvider = TreeGridItemProvider;
	});

	unwrapExports(TreeGridItemProvider_1);
	var TreeGridItemProvider_2 = TreeGridItemProvider_1.TreeEditItem;
	var TreeGridItemProvider_3 = TreeGridItemProvider_1.TreeGridItemProvider;

	var TreeOptions_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeOptions.ts
	// 2019. 09. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });

	var TreeOptions = /** @class */ (function (_super) {
	    __extends(TreeOptions, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeOptions(grid) {
	        var _this = _super.call(this, grid) || this;
	        //-------------------------------------------------------------------------
	        // consts
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // static members
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._expanderWidth = 17;
	        _this._lineVisible = true;
	        _this._showCheckBox = false;
	        _this._defaultIcon = -1;
	        _this._iconWidth = 0; // 0 보다 큰 값으로 지정하면 아이콘이 존재하지 않아도 그 너비를 차지한다.
	        _this._iconHeight = 0;
	        _this._collapseWhenLeftKey = true;
	        _this._collapseWhenCtrlKey = true;
	        _this._expandWhenRightKey = true;
	        _this._expandWhenCtrlKey = true;
	        _this._expandedIconUrl = "images/tree-expanded.png";
	        _this._collapsedIconUrl = "images/tree-collapsed.png";
	        return _this;
	    }
	    TreeOptions.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeOptions.prototype, "expanderWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanderWidth */
	        get: function () {
	            return this._expanderWidth;
	        },
	        set: function (value) {
	            if (value != this._expanderWidth) {
	                this._expanderWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "lineVisible", {
	        /** lineVisible */
	        get: function () {
	            return this._lineVisible;
	        },
	        set: function (value) {
	            if (value != this._lineVisible) {
	                this._lineVisible = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "showCheckBox", {
	        /** showCheckBox */
	        get: function () {
	            return this._showCheckBox;
	        },
	        set: function (value) {
	            if (value != this._showCheckBox) {
	                this._showCheckBox = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "iconImages", {
	        /** iconImages */
	        get: function () {
	            return this._iconImages;
	        },
	        set: function (value) {
	            if (value != this._iconImages) {
	                this._iconImages = value;
	                this._icons = value && this.grid && this.grid.getImageList(value);
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "defaultIcon", {
	        /** defaultIcon */
	        get: function () {
	            return this._defaultIcon;
	        },
	        set: function (value) {
	            if (value != this._defaultIcon) {
	                this._defaultIcon = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "iconWidth", {
	        /** iconWidth */
	        get: function () {
	            return this._iconWidth;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._iconWidth) {
	                this._iconWidth = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "iconHeight", {
	        /** iconHeight */
	        get: function () {
	            return this._iconHeight;
	        },
	        set: function (value) {
	            value = Math.max(0, value);
	            if (value != this._iconHeight) {
	                this._iconHeight = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "collapseWhenLeftKey", {
	        /** collapseWhenLeftKey */
	        get: function () {
	            return this._collapseWhenLeftKey;
	        },
	        set: function (value) {
	            if (value != this._collapseWhenLeftKey) {
	                this._collapseWhenLeftKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "collapseWhenCtrlKey", {
	        /** collapseWhenCtrlKey */
	        get: function () {
	            return this._collapseWhenCtrlKey;
	        },
	        set: function (value) {
	            if (value != this._collapseWhenCtrlKey) {
	                this._collapseWhenCtrlKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "expandWhenRightKey", {
	        /** expandWhenRightKey */
	        get: function () {
	            return this._expandWhenRightKey;
	        },
	        set: function (value) {
	            if (value != this._expandWhenRightKey) {
	                this._expandWhenRightKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "expandWhenCtrlKey", {
	        /** expandWhenCtrlKey */
	        get: function () {
	            return this._expandWhenCtrlKey;
	        },
	        set: function (value) {
	            if (value != this._expandWhenCtrlKey) {
	                this._expandWhenCtrlKey = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeOptions.prototype, "icons", {
	        /** icons */
	        get: function () {
	            return this._icons;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return TreeOptions;
	}(GridOptions.GridBaseOptions));
	exports.TreeOptions = TreeOptions;
	});

	unwrapExports(TreeOptions_1);
	var TreeOptions_2 = TreeOptions_1.TreeOptions;

	var TreeElements = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeDataTag.ts
	// 2019. 09. 18. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });






	var TreeExpandHandle = /** @class */ (function (_super) {
	    __extends(TreeExpandHandle, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeExpandHandle(cellView) {
	        var _this = _super.call(this, cellView, "rowGroupExpandHandle") || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._expanded = false;
	        _this.clickable = true;
	        return _this;
	    }
	    Object.defineProperty(TreeExpandHandle.prototype, "expanded", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** expanded */
	        get: function () {
	            return this._expanded;
	        },
	        set: function (value) {
	            if (value != this._expanded) {
	                this._expanded = value;
	                this._changed();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeExpandHandle.prototype._createDom = function () {
	        return null;
	    };
	    return TreeExpandHandle;
	}(HandleElement_1.CellHandle));
	exports.TreeExpandHandle = TreeExpandHandle;
	var TreeCheckElement = /** @class */ (function (_super) {
	    __extends(TreeCheckElement, _super);
	    function TreeCheckElement() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeCheckElement.prototype._getCssSelector = function () {
	        throw new Error("Method not implemented.");
	    };
	    TreeCheckElement.prototype._doDraw = function (element) {
	        throw new Error("Method not implemented.");
	    };
	    return TreeCheckElement;
	}(VisualElement_1.VisualElement));
	var TreeCellElement = /** @class */ (function (_super) {
	    __extends(TreeCellElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeCellElement() {
	        var _this = _super.call(this, "treeCellView") || this;
	        _this._expander = new TreeExpandHandle(_this);
	        _this.addChild(_this._expander);
	        _this._expanderDom = document.createElement("span");
	        var css = _this._expanderDom.style;
	        var check = _this._checkDom = document.createElement("input");
	        check.type = "checkbox";
	        check.className = "rg-checkbox";
	        check.style.display = "inline-block";
	        css = check.style;
	        css.marginLeft = css.marginRight = "2px";
	        _this._iconDom = document.createElement("img");
	        css = _this._iconDom.style;
	        css.marginLeft = css.marginRight = "2px";
	        css.verticalAlign = "middle";
	        _this._valueDom = document.createElement("span");
	        return _this;
	    }
	    TreeCellElement.prototype._doDispose = function () {
	        this._expanderDom = null;
	        this._checkDom = null;
	        this._iconDom = null;
	        this._valueDom = null;
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeCellElement.prototype._doUpdateContent = function (grid, model, dom) {
	        //super._doUpdateContent(grid, model, dom);
	        var item = model.item;
	        var css = dom.style;
	        this._expander.expanded = item.expanded;
	        css.textAlign = "left";
	        css.textIndent = ((item.level - 1) * 16) + "px";
	        dom.appendChild(this._expanderDom);
	        //this._expander.src = this._expanded ? "images/tree-expanded.png" : "images/tree-collapsed.png";
	        this._expanderDom.className = item.isLeaf ? "rg-tree-leaf" : this._expander.expanded ? "rg-tree-expanded" : "rg-tree-collapsed";
	        dom.appendChild(this._iconDom);
	        this._iconDom.src = grid.getTreeIcon(item) || "";
	        dom.appendChild(this._checkDom);
	        dom.appendChild(this._valueDom);
	        this._valueDom.textContent = this.text;
	    };
	    TreeCellElement.prototype._doLayoutContent = function (lm) {
	        var dom = this._expanderDom;
	        this._expander.setBounds(dom.offsetLeft, dom.offsetTop, dom.offsetWidth, dom.offsetHeight);
	    };
	    return TreeCellElement;
	}(ItemElement_1.DataCellElement));
	var TreeCellRenderer = /** @class */ (function (_super) {
	    __extends(TreeCellRenderer, _super);
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeCellRenderer() {
	        return _super.call(this) || this;
	    }
	    TreeCellRenderer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeCellRenderer.prototype, "type", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // methods
	        //-------------------------------------------------------------------------
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return TreeCellRenderer.TYPE;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeCellRenderer.prototype, "styleName", {
	        get: function () {
	            return TreeCellRenderer.STYLE_NAME;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeCellRenderer.prototype._doInitContent = function (dom) {
	        var expander = this._expander = document.createElement("span");
	        dom.appendChild(expander);
	        var check = this._check = document.createElement("input");
	        check.type = "checkbox";
	        check.className = "rg-checkbox";
	        check.style.display = "inline-block";
	        var css = check.style;
	        css.marginLeft = css.marginRight = "2px";
	        dom.appendChild(check);
	        var icon = this._icon = document.createElement("img");
	        css = icon.style;
	        css.marginLeft = css.marginRight = "2px";
	        css.verticalAlign = "middle";
	        dom.appendChild(icon);
	        var span = this._span = document.createElement("span");
	        dom.appendChild(span);
	    };
	    TreeCellRenderer.prototype._doRenderCell = function (grid, model, bcell, w, h) {
	        var expander = this._expander;
	        var check = this._check;
	        var icon = this._icon;
	        var span = this._span;
	        var item = model.item;
	        expander.className = item.isLeaf ? "rg-tree-leaf" : item.expanded ? "rg-tree-expanded" : "rg-tree-collapsed";
	        icon.src = grid.getTreeIcon(item) || "";
	        span.textContent = this._makeText(grid, model, bcell);
	        //dom.style.textIndent = ((item.level - 1) * 16) + "px";
	        this["_dom"].style.setProperty("padding-left", ((item.level - 1) * 16) + "px", "important");
	        //expander.style.setProperty("margin-left", ((item.level - 1) * 16) + "px", "important");
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    TreeCellRenderer.TYPE = "tree";
	    TreeCellRenderer.STYLE = "rg-tree-renderer";
	    TreeCellRenderer.STYLE_NAME = "rg-renderer " + TreeCellRenderer.STYLE;
	    return TreeCellRenderer;
	}(CellRenderers.DataCellRenderer));
	exports.TreeCellRenderer = TreeCellRenderer;
	var TreeItemElement = /** @class */ (function (_super) {
	    __extends(TreeItemElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemElement() {
	        var _this = _super.call(this, "treeItemView") || this;
	        _this._treeCellView = new TreeCellElement();
	        _this.addChild(_this._treeCellView);
	        return _this;
	    }
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeItemElement.prototype.isTreeExpander = function (dom) {
	        var cls = dom.className;
	        return cls == "rg-tree-expanded" || cls == "rg-tree-collapsed";
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    // protected _getCell(column: GridColumn): DataCellElement {
	    //     if (column.index == 0) {
	    //         return this._treeCellView;
	    //     } else {
	    //         return super._getCell(column);
	    //     }
	    // }    
	    TreeItemElement.prototype._doLayoutContent = function (lm) {
	        _super.prototype._doLayoutContent.call(this, lm);
	    };
	    TreeItemElement.prototype._createRenderer = function (grid, model, type, config) {
	        if (model.dataColumn.index == 0) {
	            return new TreeCellRenderer();
	        }
	        return _super.prototype._createRenderer.call(this, grid, model, type, config);
	    };
	    return TreeItemElement;
	}(ItemElement_1.RowElement));
	exports.TreeItemElement = TreeItemElement;
	var TreeBodyElement = /** @class */ (function (_super) {
	    __extends(TreeBodyElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeBodyElement(body) {
	        return _super.call(this, body) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeBodyElement.prototype.createRowElement = function () {
	        return new TreeItemElement();
	    };
	    return TreeBodyElement;
	}(GridBodyElement_1.GridBodyElement));
	exports.TreeBodyElement = TreeBodyElement;
	var TreeLinesElement = /** @class */ (function (_super) {
	    __extends(TreeLinesElement, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeLinesElement(treeView) {
	        var _this = _super.call(this) || this;
	        //-------------------------------------------------------------------------
	        // property fields
	        //-------------------------------------------------------------------------
	        _this._levelWidth = 16;
	        _this._handleWidth = 9;
	        _this._handleHeight = 9;
	        _this._stroke = "gray";
	        _this._linePool = [];
	        _this._lines = [];
	        _this._startIndex = -1;
	        _this._endIndex = -1;
	        _this._treeView = treeView;
	        return _this;
	    }
	    TreeLinesElement.prototype._doDispose = function () {
	        this._linePool = null;
	        this._lines = null;
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeLinesElement.prototype, "levelWidth", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** levelWidth */
	        get: function () {
	            return this._levelWidth;
	        },
	        set: function (value) {
	            if (value != this._levelWidth) {
	                this._levelWidth = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeLinesElement.prototype, "handleWidth", {
	        /** handleWidth */
	        get: function () {
	            return this._handleWidth;
	        },
	        set: function (value) {
	            if (value != this._handleWidth) {
	                this._handleWidth = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeLinesElement.prototype, "handleHeight", {
	        /** handleHeight */
	        get: function () {
	            return this._handleHeight;
	        },
	        set: function (value) {
	            if (value != this._handleHeight) {
	                this._handleHeight = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeLinesElement.prototype, "stroke", {
	        /** stroke */
	        get: function () {
	            return this._stroke;
	        },
	        set: function (value) {
	            if (value != this._stroke) {
	                this._stroke = value;
	                this.invalidate();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeLinesElement.prototype.setRange = function (treeView, startIndex, endIndex) {
	        if (startIndex != this._startIndex || endIndex != this._endIndex) {
	            this._startIndex = startIndex;
	            this._endIndex = endIndex;
	            this.invalidate();
	        }
	    };
	    TreeLinesElement.prototype.layout = function (lm) {
	        var tree = this._treeView;
	        this.$_hideAll();
	        if (!tree || this._startIndex < 0 || this._endIndex < 0 || this._startIndex > this._endIndex) {
	            return;
	        }
	        var item = null;
	        var i;
	        for (i = this._startIndex; i <= this._endIndex; i++) {
	            item = tree.getItem(i);
	            if (item) {
	                break;
	            }
	        }
	        if (!item) {
	            return;
	        }
	        var level = item.level;
	        if (level > 1 || item.childIndex > 0) {
	            for (var j = 0; j < level; j++) {
	                var parent_1 = item.getAncestor(j);
	                var next = parent_1.last;
	                if (next && next.index >= i) {
	                    next = this.$_findLevelItem(j + 1, i);
	                    this.$_drawVertLine(lm, this.$_borrowLine(), null, next, parent_1.level);
	                }
	            }
	            if (item.childIndex > 0) {
	                this.$_drawVertLine(lm, this.$_borrowLine(), null, item, item.parent.level);
	            }
	        }
	        for (; i <= this._endIndex; i++) {
	            var item_1 = tree.getItem(i);
	            var parent_2 = item_1.parent;
	            var j = item_1.childIndex;
	            if (j < parent_2.count - 1) {
	                var next = parent_2.getItem(j + 1);
	                if (next.index > this._endIndex) {
	                    next = null;
	                }
	                this.$_drawVertLine(lm, this.$_borrowLine(), item_1, next, parent_2.level);
	            }
	            parent_2 = item_1;
	            if (parent_2 && parent_2.expanded && parent_2.count > 0) {
	                var next = parent_2.getItem(0);
	                if (next.index > this._endIndex) {
	                    next = null;
	                }
	                this.$_drawChildLine(lm, this.$_borrowLine(), item_1, next);
	            }
	            this.$_drawHorzLine(lm, this.$_borrowLine(), item_1);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeLinesElement.prototype._initDom = function (dom) {
	        _super.prototype._initDom.call(this, dom);
	        var css = dom.style;
	        css.setProperty("pointer-events", "none", "important");
	    };
	    TreeLinesElement.prototype._doDraw = function (dom) {
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeLinesElement.prototype.$_borrowLine = function () {
	        var line = this._linePool.pop();
	        if (!line) {
	            line = document.createElement("div");
	            line.className = "rg-tree-line";
	            var css = line.style;
	            css.position = "absolute";
	            this["_dom"].appendChild(line);
	            // css.border = "none";
	            // css.boxSizing = "border-box";
	            // css["-webkit-print-color-adjust"] = "exact";
	            // css.padding = "0px";
	            // css.margin = "0px";
	        }
	        line.style.display = "inline-block";
	        this._lines.push(line);
	        return line;
	    };
	    TreeLinesElement.prototype.$_hideAll = function () {
	        for (var i = this._lines.length - 1; i >= 0; i--) {
	            this._lines[i].style.display != "none" && (this._lines[i].style.display = "none");
	        }
	        this._linePool = this._linePool.concat(this._lines.splice(0, this._lines.length));
	    };
	    TreeLinesElement.prototype.$_findLevelItem = function (level, start) {
	        for (var i = start; i <= this._endIndex; i++) {
	            var item = this._treeView.getItem(i);
	            if (item && item.level == level) {
	                return item;
	            }
	        }
	        return null;
	    };
	    TreeLinesElement.prototype.$_setBounds = function (elt, x, y, w, h) {
	        var css = elt.style;
	        css.left = x + "px";
	        css.top = y + "px";
	        css.width = w == 1 ? "1px" : w + "px";
	        css.height = h == 1 ? "1px" : h + "px";
	    };
	    TreeLinesElement.prototype.$_drawVertLine = function (lm, elt, src, dst, level) {
	        var top = lm.topIndex;
	        var x1 = level * this._levelWidth + this._levelWidth / 2;
	        var y1 = 0;
	        var y2 = this.height;
	        if (src) {
	            var r = lm.getItemBounds(src.index - top);
	            var sz = (src instanceof TreeItemProvider_1.TreeItem && src.hasChildren) ? this._handleHeight : 0;
	            y1 = r.y + r.height / 2 + sz / 2;
	        }
	        if (dst) {
	            var r = lm.getItemBounds(dst.index - top);
	            var sz = (dst instanceof TreeItemProvider_1.TreeItem && dst.hasChildren) ? this._handleHeight : 0;
	            y2 = r.y + r.height / 2 - sz / 2;
	        }
	        this.$_setBounds(elt, x1, y1, 1, y2 - y1);
	    };
	    TreeLinesElement.prototype.$_drawHorzLine = function (lm, elt, item) {
	        var top = lm.topIndex;
	        var x1 = item.parent.level * this._levelWidth + this._levelWidth / 2;
	        var x2 = item.level * this._levelWidth;
	        var y = 0;
	        if (item.hasChildren) {
	            x1 += this._handleWidth / 2;
	        }
	        var r = lm.getItemBounds(item.index - top);
	        y = r.y + r.height / 2;
	        this.$_setBounds(elt, x1, y, x2 - x1, 1);
	    };
	    TreeLinesElement.prototype.$_drawChildLine = function (lm, elt, src, dst) {
	        var top = lm.topIndex;
	        var x1 = src.level * this._levelWidth + this._levelWidth / 2;
	        var y2 = this.height;
	        var r = lm.getItemBounds(src.index - top);
	        var y1;
	        { //this._treeView.treeOptions.showCheckBox()) {
	            var checkSize = 12;
	            checkSize -= 2;
	            y1 = r.y + r.height / 2 + checkSize / 2;
	            // } else if (this._options.icons() && src instanceof TreeItem && src.iconHeight() > 0) {
	            // 	y1 = r.y + r.height / 2 + src.iconHeight() / 2;
	            // } else {
	            // 	y1 = r.bottom() - r.height / 4;
	        }
	        if (dst) {
	            r = lm.getItemBounds(dst.index - top);
	            var sz = dst.hasChildren ? this._handleHeight : 0;
	            y2 = r.y + r.height / 2 - sz / 2;
	        }
	        this.$_setBounds(elt, x1, y1, 1, y2 - y1);
	    };
	    return TreeLinesElement;
	}(VisualElement_1.LayerElement));
	exports.TreeLinesElement = TreeLinesElement;
	});

	unwrapExports(TreeElements);
	var TreeElements_1 = TreeElements.TreeExpandHandle;
	var TreeElements_2 = TreeElements.TreeCellRenderer;
	var TreeElements_3 = TreeElements.TreeItemElement;
	var TreeElements_4 = TreeElements.TreeBodyElement;
	var TreeElements_5 = TreeElements.TreeLinesElement;

	var TreeView_1 = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// TreeView.ts
	// 2019. 09. 17. created by gslim
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });











	var TreeViewSelectionTool = /** @class */ (function (_super) {
	    __extends(TreeViewSelectionTool, _super);
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeViewSelectionTool(container) {
	        return _super.call(this, container, "treeViewSelectionTool") || this;
	    }
	    TreeViewSelectionTool.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    //-------------------------------------------------------------------------
	    // properties
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeViewSelectionTool.prototype._doKeyDown = function (event) {
	        // var item;
	        // var idx = this.focused.clone();
	        // var treeOptions = this.grid()._treeOptions;
	        // if (idx && (item = idx.item())) {
	        // 	switch (key) {
	        // 		case Keys.RIGHT:
	        // 			if ( (!ctrl && this.grid().visibleColumnCount() == 1 && idx.isRight() && treeOptions.isExpandWhenRightArrow()) || ( ctrl && treeOptions.isExpandWhenCtrlArrow()) ) {
	        // 				if (item.isExpanded()) {
	        // 					if (item.count() > 0) {
	        // 						idx.down();
	        // 						this.setFocused(idx, true);
	        // 						return true;
	        // 					}
	        // 				} else {
	        // 					item.setExpanded(true);
	        // 					return true;
	        // 				}
	        // 			}
	        // 			break;
	        // 		case Keys.LEFT:
	        // 			if ( (!ctrl && idx.isLeft() && treeOptions.isCollapseWhenLeftArrow()) || ( ctrl && treeOptions.isCollapseWhenCtrlArrow()) ) {
	        // 				if (item.isExpanded()) {
	        // 					item.setExpanded(false);
	        // 					return true;
	        // 				} else {
	        // 					if (!(item.parent() instanceof RootTreeItem)) {
	        // 						idx.itemIndex(item.parent().index());
	        // 						this.setFocused(idx, true);
	        // 						return true;
	        // 					}
	        // 				}
	        // 			}
	        // 			break;
	        // 	}
	        // }
	        return _super.prototype._doKeyDown.call(this, event);
	    };
	    TreeViewSelectionTool.prototype._doColumnHeaderClicked = function (event, column) {
	        // this._super(column);
	        // var tree = this.grid();
	        // var dcol = _cast(column, DataColumn);
	        // if (!tree.isEmpty() && dcol && dcol.isSortable() && tree.sortingOptions().isEnabled()) {
	        // 	tree.sortColumn(dcol,event);
	        // }
	    };
	    TreeViewSelectionTool.prototype._doElementClicked = function (element) {
	        // this._super(element);
	        // if (element instanceof TreeCheckElement) {
	        // 	var tree = this.grid();
	        // 	if (tree.editOptions().isCheckable()) {
	        // 		var item = element.item();
	        // 		item && item.isCheckable() && tree.itemSource().checkItem(item, !item.isChecked(), tree.checkBar().isExclusive(), true);
	        // 	}
	        // }
	    };
	    TreeViewSelectionTool.prototype._doHandleClicked = function (handle) {
	        // if (handle instanceof TreeExpandHandle) {
	        // 	var item = handle.cellView().item();
	        // 	if (item) {
	        // 		item.setExpanded(!item.isExpanded());
	        // 	}
	        // } else {
	        // 	this._super(handle);
	        // }
	    };
	    TreeViewSelectionTool.prototype._doMouseDown = function (event) {
	        var x = event["mouseX"];
	        var y = event["mouseY"];
	        var tree = this.grid;
	        var elt = this.findElementAt(x, y, false);
	        var target = this.mouseEventTarget;
	        if (elt instanceof TreeElements.TreeItemElement && elt.isTreeExpander(target)) {
	            var item = elt["_item"];
	            if (item instanceof TreeItemProvider_1.TreeItem) {
	                if (item.expanded) {
	                    tree.collapse(item, false);
	                }
	                else {
	                    tree.expand(item, false, false);
	                }
	            }
	            return;
	        }
	        _super.prototype._doMouseDown.call(this, event);
	    };
	    return TreeViewSelectionTool;
	}(GridTool_1.GridSelectionTool));
	var TreeContainer = /** @class */ (function (_super) {
	    __extends(TreeContainer, _super);
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // static members
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeContainer(containerId) {
	        return _super.call(this, containerId) || this;
	    }
	    TreeContainer.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeContainer.prototype, "treeView", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** treeView */
	        get: function () {
	            return this.gridView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeContainer.prototype._createGridView = function () {
	        return new TreeView(this);
	    };
	    TreeContainer.prototype._createDefaultTool = function () {
	        // if ($_mobileEnable) {
	        // 	return _isMobile() ? new MobileTreeSelectionTool(this) : new TreeSelectionTool(this);
	        // } else {
	        return new TreeViewSelectionTool(this);
	        // }		
	    };
	    return TreeContainer;
	}(GridContainer_1.GridContainer));
	exports.TreeContainer = TreeContainer;
	var TreeItemExpanderCell = /** @class */ (function (_super) {
	    __extends(TreeItemExpanderCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemExpanderCell() {
	        return _super.call(this, "treeItemExpanderCell") || this;
	    }
	    Object.defineProperty(TreeItemExpanderCell.prototype, "getText", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemExpanderCell.prototype, "value", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return TreeItemExpanderCell;
	}(GridCell_1.GridCell));
	var TreeItemFooterCell = /** @class */ (function (_super) {
	    __extends(TreeItemFooterCell, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeItemFooterCell() {
	        return _super.call(this, "treeItemFooterCell") || this;
	    }
	    Object.defineProperty(TreeItemFooterCell.prototype, "getText", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            var s = String(this.value());
	            if (!s) {
	                var index = this.index;
	                if (index.dataColumn) {
	                    s = index.column.footer.text;
	                }
	            }
	            return s;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeItemFooterCell.prototype, "value", {
	        get: function () {
	            return null;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return TreeItemFooterCell;
	}(GridCell_1.GridCell));
	var TreeView = /** @class */ (function (_super) {
	    __extends(TreeView, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeView(container) {
	        var _this = _super.call(this, container) || this;
	        _this._expanderCell = new TreeItemExpanderCell();
	        _this._footerCell = new TreeItemFooterCell();
	        _this._focusedRow = -1;
	        _this.itemSource = _this._rs = _this._createItemSource();
	        return _this;
	    }
	    TreeView.prototype._doDispose = function () {
	        _super.prototype._doDispose.call(this);
	    };
	    Object.defineProperty(TreeView.prototype, "treeOptions", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /** treeOptions */
	        get: function () {
	            return this._treeOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "linesView", {
	        /** linesView */
	        get: function () {
	            return this._linesView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    TreeView.prototype.getLevels = function (visibleOnly) {
	        return this._rs.getLevels(visibleOnly);
	    };
	    TreeView.prototype.getExpanderCell = function (index) {
	        //this._expanderCell.setStyles(this._treeOptions.expanderStyles());
	        this._expanderCell.setIndex(CellIndex_1.CellIndex.temp(this, index));
	        return this._expanderCell;
	    };
	    TreeView.prototype.getFooterCell = function (index) {
	        //this._footerCell.setStyles(this._treeOptions.footerStyles());
	        this._footerCell.setIndex(index);
	        return this._footerCell;
	    };
	    TreeView.prototype.expand = function (item, recursive, force, level) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.expand(item, recursive, force, level);
	    };
	    TreeView.prototype.collapse = function (item, recursive) {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.collapse(item, recursive);
	    };
	    TreeView.prototype.expandAll = function (level) {
	        if (level === void 0) { level = 0; }
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.expandAll(level);
	    };
	    TreeView.prototype.collapseAll = function () {
	        if (this.isItemEditing(null)) {
	            return;
	        }
	        this._rs.collapseAll();
	    };
	    TreeView.prototype.getTreeIcon = function (item) {
	        var images = this._treeOptions.icons;
	        if (images) {
	            var idx = item.iconIndex;
	            if (idx < 0 || idx >= images.count) {
	                idx = this._treeOptions.defaultIcon;
	            }
	            if (idx >= 0 && idx < images.count) {
	                return images.getImage(idx);
	            }
	        }
	        return null;
	    };
	    TreeView.prototype.getCheckedItems = function () {
	        var items = [];
	        for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	            var item = this.getItem(i);
	            item.checked && items.push(item);
	        }
	        return items;
	    };
	    TreeView.prototype.getCheckedItemIndices = function () {
	        var items = [];
	        for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	            var item = this.getItem(i);
	            item.checked && items.push(item.index);
	        }
	        return items;
	    };
	    TreeView.prototype.getCheckedRows = function (visibleOnly) {
	        var rows = null;
	        if (visibleOnly) {
	            rows = [];
	            for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	                var item = this.getItem(i);
	                item.checked && rows.push(item.row);
	            }
	        }
	        else {
	            rows = this._rs.getCheckedRows();
	        }
	        return rows;
	    };
	    TreeView.prototype.getCheckedRowIds = function (visibleOnly) {
	        var rows = null;
	        if (visibleOnly) {
	            rows = [];
	            for (var i = 0, cnt = this.itemCount; i < cnt; i++) {
	                var item = this.getItem(i);
	                item.checked && rows.push(item.dataRow);
	            }
	        }
	        else {
	            rows = this._rs.getCheckedRowIds();
	        }
	        return rows;
	    };
	    TreeView.prototype.checkChildren = function (parent, checked, recursive, visibleOnly, checkableOnly, checkEvent) {
	        if (checkableOnly === void 0) { checkableOnly = true; }
	        if (checkEvent === void 0) { checkEvent = false; }
	        if (parent) {
	            for (var i = 0, cnt = parent.count; i < cnt; i++) {
	                var item = parent.getItem(i);
	                if (checkableOnly) {
	                    item.checkable && item.setChecked(checked, checkEvent);
	                }
	                else {
	                    item.setChecked(checked, checkEvent);
	                }
	                if (recursive && (item.expanded || !visibleOnly)) {
	                    this.checkChildren(item, checked, true, visibleOnly, checkableOnly, checkEvent);
	                }
	            }
	        }
	    };
	    TreeView.prototype.resetCheckables = function () {
	        this._rs.resetCheckables();
	    };
	    TreeView.prototype.applyCheckables = function () {
	        this._rs.applyCheckables();
	    };
	    Object.defineProperty(TreeView.prototype, "dataSource", {
	        //-------------------------------------------------------------------------
	        // overriden members
	        //-------------------------------------------------------------------------
	        get: function () {
	            return this._rs && this._rs.dataSource;
	        },
	        set: function (value) {
	            this._rs && (this._rs.dataSource = value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "maxItemCount", {
	        get: function () {
	            return this._rs ? this._rs.maxItemCount : 0;
	        },
	        set: function (value) {
	            this._rs && (this._rs.maxItemCount = value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "summarizer", {
	        get: function () {
	            throw new Error("Method not implemented.");
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeView.prototype._initStyles = function () {
	        _super.prototype._initStyles.call(this);
	        this._treeOptions = new TreeOptions_1.TreeOptions(this);
	        //this._addGridObject(this._treeOptions = new TreeOptions(this));
	    };
	    TreeView.prototype._createItemSource = function () {
	        var rs = new TreeGridItemProvider_1.TreeGridItemProvider(true);
	        //rs._addParentNodeOnFiltering  = this._filteringOptions ? this._filteringOptions._addParentNodeOnFiltering : undefined;
	        return rs;
	    };
	    TreeView.prototype._createSidePane = function () {
	        this._linesView = new TreeElements.TreeLinesElement(this);
	        this.addElement(this._linesView);
	        return _super.prototype._createSidePane.call(this);
	    };
	    TreeView.prototype.addMasks = function () {
	        /*
	        m_linesMask = new Shape();
	        addMask(m_linesMask);
	        m_treeLinesView.mask = m_linesMask;
	        */
	    };
	    // _createDelegate() {
	    // 	return new TreeGridDelegate(this);
	    // }
	    TreeView.prototype._createLayoutManager = function () {
	        return new TreeGridLayoutManager(this);
	    };
	    TreeView.prototype._createBodyView = function (body) {
	        return new TreeElements.TreeBodyElement(body);
	    };
	    TreeView.prototype._createFixedBodyView = function (body) {
	        return _super.prototype._createFixedBodyView.call(this, body);
	    };
	    TreeView.prototype._createRightBodyView = function (body) {
	        return _super.prototype._createRightBodyView.call(this, body);
	    };
	    TreeView.prototype._visualObjectChanged = function (obj) {
	        _super.prototype._visualObjectChanged.call(this, obj);
	        if (obj instanceof CheckBar_1.CheckBar) ;
	    };
	    TreeView.prototype.append = function () {
	        return this.insert(this._rs.rootItem, false, true);
	    };
	    TreeView.prototype._doCanInsert = function (item, shift, ctrl) {
	        return item && (item.count > 0 || !ctrl || item.level == 0 || this.editOptions.appendable);
	    };
	    TreeView.prototype.getSummarizer = function () {
	        return this._rs.summarizer;
	    };
	    TreeView.prototype._doMaxRowCountChanged = function () {
	        this._rs.maxItemCount = this.maxItemCount;
	    };
	    // onImageListImageLoaded(images: ImageList, index: number): void {
	    //     super.onImageListImageLoaded(images, index);
	    // 	if (images === this._treeOptions.icons) {
	    // 		this.refreshView();
	    // 	}
	    // }
	    // onImageLoaded(url: string): void {
	    // 	// this._super(url);
	    // }
	    TreeView.prototype.getSortFields = function () {
	        return this._rs.getSortFields();
	    };
	    TreeView.prototype.getSortDirections = function () {
	        return this._rs.getSortDirections();
	    };
	    TreeView.prototype.getSortCases = function () {
	        return this._rs.getSortCases();
	    };
	    TreeView.prototype._doSortItems = function (fields, directions, textCases) {
	        this._rs.orderBy(fields, directions, textCases);
	    };
	    TreeView.prototype._doColumnFiltersChanged = function (filterCollection, filter) {
	        //this.applyFilters(filterCollection, filter);
	    };
	    TreeView.prototype.$_doLayout = function (lm, bounds) {
	        var treeOptions = this._treeOptions;
	        // treeOptions.expanderStyles().setParent(this.fixedOptions().colCount() > 0 ? this.fixedOptions().styles() : this.body().styles(), false);
	        _super.prototype.$_doLayout.call(this, lm, bounds);
	        // if (treeOptions.isLineVisible()) {
	        // 	this._treeLinesView.setVisible(true);
	        // 	this._treeLinesView.setStroke(treeOptions.expanderStyles().line());
	        // 	this._treeLinesView.invalidate();
	        // } else {
	        // 	this._treeLinesView.setVisible(false);
	        // }
	        /*
	        var r = m_treeLinesView.getGlobalBounds();
	        var g = m_linesMask.graphics;
	        g.clear();
	        if (r.width > 0 && r.height > 0) {
	            g.beginFill(0, 0);
	            g.drawRect(r.x, r.y, r.width, r.height);
	            g.endFill();
	        }
	        */
	    };
	    TreeView.prototype.assignImageList = function (list) {
	        // this._super(list);
	        // if (this.treeOptions().iconImages() == list.name()) {
	        // 	this.treeOptions._icons = list;
	        // }
	    };
	    TreeView.prototype.refreshView = function () {
	        // if (this._treeLinesView) {
	        // 	this._treeLinesView.invalidate();
	        // }
	        _super.prototype.refreshView.call(this);
	    };
	    TreeView.prototype.getEditBounds = function (index) {
	        /*
	        if (index.column().root().displayIndex() == 0) {
	            var view = this.getFocusedCellView();
	            if (view) {
	                var r = view.boundsByContainer();
	                if (view instanceof DataCellElement) {
	                    r.width -= view.getButtonsWidth();
	                }
	                r.width = Math.max(2, r.width);
	                return r;
	            }
	        }
	        */
	        return _super.prototype.getEditBounds.call(this, index);
	    };
	    TreeView.prototype.updatePastedRow = function (item, values, strict) {
	        if (item instanceof TreeItemProvider_1.TreeItem) {
	            var row = item.row;
	            if (row) {
	                strict ? row.updateStrict(values) : row.update(values);
	            }
	        }
	    };
	    TreeView.prototype.appendPastedRow = function (values) {
	        var ds = this.dataSource;
	        if (ds) {
	            var row = ds.createRow(values, -1, false);
	            ds.rootRow.addChild(row, false);
	        }
	    };
	    Object.defineProperty(TreeView.prototype, "undoable", {
	        get: function () {
	            return this._rs.undoable;
	        },
	        set: function (value) {
	            this._rs.undoable = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "canUndo", {
	        get: function () {
	            return this._rs.canUndo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "canRedo", {
	        get: function () {
	            return this._rs.canRedo;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "undoing", {
	        get: function () {
	            return this._rs.undoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(TreeView.prototype, "redoing", {
	        get: function () {
	            return this._rs.redoing;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TreeView.prototype.undo = function () {
	        if (this._rs.canUndo) {
	            this._rs.cancelWhenLastUndo = this.editOptions.cancelWhenLastUndo;
	            this.editController.cancelEditor(true);
	            this._rs.undo();
	            return true;
	        }
	        return false;
	    };
	    TreeView.prototype.redo = function () {
	        if (this._rs.canRedo) {
	            this._rs.redo();
	            return true;
	        }
	        return false;
	    };
	    TreeView.prototype.execute = function (command) {
	        this._rs.execute(command);
	    };
	    TreeView.prototype.clearCommandStack = function (all) {
	        if (all === void 0) { all = true; }
	        this._rs.clearCommandStack(all);
	    };
	    //-------------------------------------------------------------------------
	    // internal members
	    //-------------------------------------------------------------------------
	    TreeView.prototype.$_getVisibleAncestor = function (rowId) {
	        var item = this._rs.getItemOfRow(rowId);
	        if (item) {
	            while (item && !item.visible) {
	                item = item.parent;
	            }
	            return item;
	        }
	        else {
	            return null;
	        }
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------
	    TreeView.prototype.onItemProviderReset = function (rs) {
	        this._currentRowId = -1;
	        _super.prototype.onItemProviderReset.call(this, rs);
	    };
	    TreeView.prototype.onTreeItemProviderItemChanged = function (rs, item) {
	        //this._treeLinesView.invalidate();
	        this.invalidateLayout();
	        this.fireEvent(TreeView.CHANGED, item);
	    };
	    TreeView.prototype.onTreeItemProviderExpanding = function (rs, item) {
	        this._focusedRow = this.focusedIndex ? this.focusedIndex.dataRow : -1;
	        // if (this.editController().isEditing() && !this._items.isEditing()) {
	        // 	this.editController().cancelEditor(true);
	        // }
	        // return !this.editController().isEditing() && !this._items.isEditing() &&
	        // 	this.fireConfirmEvent(TreeView.EXPANDING, item);
	        return true;
	    };
	    TreeView.prototype.onTreeItemProviderExpanded = function (rs, item) {
	        // if (this._focusedRow >= 0) {
	        // 	var index = this.focusedIndex().clone();
	        // 	var item = this.$_getVisibleAncestor(this._focusedRow);
	        // 	index._itemIndex = item ? item.index() : -1;
	        // 	this.setFocusedIndex(index, true);
	        // }
	        // this.fireEvent(TreeView.EXPANDED, item);
	    };
	    TreeView.prototype.onTreeItemProviderCollapsing = function (rs, item) {
	        this._focusedRow = this.focusedIndex ? this.focusedIndex.dataRow : -1;
	        // if (this.editController().isEditing() && !this._items.isEditing()) {
	        // 	this.editController().cancelEditor(true);
	        // }
	        // return !this.editController().isEditing() && !this._items.isEditing() &&
	        //     this.fireConfirmEvent(TreeView.COLLAPSING, item);
	        return true;
	    };
	    TreeView.prototype.onTreeItemProviderCollapsed = function (rs, item) {
	        // if (this._focusedRow >= 0) {
	        // 	var index = this.focusedIndex().clone();
	        // 	var item = this.$_getVisibleAncestor(this._focusedRow);
	        // 	index._itemIndex = item ? item.index() : -1;
	        // 	this.setFocusedIndex(index, true);
	        // }
	        this.fireEvent(TreeView.COLLAPSED, item);
	    };
	    //-------------------------------------------------------------------------
	    // consts
	    //-------------------------------------------------------------------------
	    // events
	    TreeView.EXPANDING = "onTreeViewExpanding";
	    TreeView.EXPANDED = "onTreeViewExpanded";
	    TreeView.COLLAPSING = "onTreeViewCollapsing";
	    TreeView.COLLAPSED = "onTreeViewCollapsed";
	    TreeView.CHANGED = "onTreeViewChanged";
	    return TreeView;
	}(GridBase_1.GridBase));
	exports.TreeView = TreeView;
	var TreeGridLayoutManager = /** @class */ (function (_super) {
	    __extends(TreeGridLayoutManager, _super);
	    //-------------------------------------------------------------------------
	    // property fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // fields
	    //-------------------------------------------------------------------------
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function TreeGridLayoutManager(treeView) {
	        return _super.call(this, treeView) || this;
	    }
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    TreeGridLayoutManager.prototype._doLayout = function (grid, bounds) {
	        _super.prototype._doLayout.call(this, grid, bounds);
	        var tree = grid;
	        var elt = tree.linesView;
	        if (elt) {
	            var fixed = this.fixedLayoutCount > 0;
	            var r = (fixed ? this.fixedBodyBounds : this.bodyBounds).clone();
	            if (fixed) {
	                r.y += this.fixedContentBounds.y;
	                r.x += this.fixedContentBounds.x;
	            }
	            else {
	                r.y += this.contentBounds.y;
	                r.x += this.contentBounds.x;
	            }
	            if (this.layoutCount > 0) {
	                r.width = Math.max(0, this.getLayoutWidth(0));
	            }
	            else {
	                r.width = 0;
	            }
	            elt.setRect(r);
	            elt.levelWidth = 16; //tree.treeOptions().expanderWidth());
	            elt.setRange(tree, this.topIndex, Math.min(tree.itemCount, this.topIndex + this.itemCount) - 1);
	            elt.layout(this);
	        }
	    };
	    return TreeGridLayoutManager;
	}(GridLayoutManager_1.GridLayoutManager));
	exports.TreeGridLayoutManager = TreeGridLayoutManager;
	});

	unwrapExports(TreeView_1);
	var TreeView_2 = TreeView_1.TreeContainer;
	var TreeView_3 = TreeView_1.TreeView;
	var TreeView_4 = TreeView_1.TreeGridLayoutManager;

	var ViewDelegates = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// DataDelegates.ts 
	// 2020. 01. 22. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	var __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {
	    var extendStatics = function (d, b) {
	        extendStatics = Object.setPrototypeOf ||
	            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	        return extendStatics(d, b);
	    };
	    return function (d, b) {
	        extendStatics(d, b);
	        function __() { this.constructor = d; }
	        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	    };
	})();
	Object.defineProperty(exports, "__esModule", { value: true });



	var GridItem_2 = GridItem_1;


	var GridColumn_2 = GridColumn_1;













	var ViewDelegateUtils = /** @class */ (function () {
	    function ViewDelegateUtils() {
	    }
	    ViewDelegateUtils.getColumn = function (grid, column) {
	        if (column) {
	            if (typeof column === "string") {
	                return grid.columnByName(column);
	            }
	            else if (column instanceof GridColumn_1.GridColumn) {
	                return column;
	            }
	            else if (column.$_hash) {
	                return grid.columnByHash(column.$_hash);
	            }
	            else if (column.name) {
	                return grid.columnByName(column.name);
	            }
	        }
	        return null;
	    };
	    ViewDelegateUtils.getItemProxy = function (item, extended) {
	        if (extended === void 0) { extended = false; }
	        var p = item.parent;
	        var obj = {
	            type: undefined,
	            id: item.id,
	            parentId: p == null ? -1 : p.id,
	            itemIndex: item.index,
	            dataRow: -1,
	            checked: item.checked
	        };
	        if (extended) {
	            obj.childIndex = item.childIndex;
	            obj.level = item.level;
	        }
	        if (item instanceof GridItem_2.GridRow) {
	            obj.type = 'row';
	            obj.dataRow = item.dataRow;
	        }
	        else if (item instanceof GridItem_1.GroupItem) {
	            obj.count = item.children.length;
	            obj.expanded = item.expanded;
	            if (item instanceof GridItem_2.GroupItemImpl || item instanceof GroupedItemProvider_1.MergedGroupHeader) {
	                obj.type = 'group';
	                obj.footerId = item.footer ? item.footer.id : -1;
	                if (extended) {
	                    obj.firstItem = ViewDelegateUtils.getItemProxy(item.firstItem);
	                    obj.firstDataItem = ViewDelegateUtils.getItemProxy(item.firstDataItem);
	                    obj.dataRows = item.getRows();
	                }
	            }
	            else if (item instanceof TreeItemProvider_1.TreeItem) {
	                obj.type = 'tree';
	                obj.dataRow = item.dataRow ? item.dataRow : -1;
	            }
	        }
	        else if (item instanceof GridItem_2.GroupFooter) {
	            obj.type = 'footer';
	        }
	        return obj;
	    };
	    ViewDelegateUtils.getItemIndices = function (items) {
	        var indices = [];
	        for (var i = 0, l = items.length; i < l; i++) {
	            indices.push(items[i].id);
	        }
	        return indices;
	    };
	    ViewDelegateUtils.getValues = function (grid, item) {
	        var row;
	        var ds = item.dataSource;
	        if (grid.isItemEditing(item)) {
	            var rowObject = item.getRowObject();
	            rowObject["__rowId"] = item.dataRow;
	            return rowObject;
	        }
	        else if ((row = item.dataRow) >= 0) {
	            var rowObject = {};
	            if (item instanceof TreeItemProvider_1.TreeItem) {
	                var treeRow = item.row;
	                var values = treeRow.values;
	                rowObject['__rowId'] = treeRow.rowId;
	                for (var i = 0, cnt = ds.fieldCount; i < cnt; i++) {
	                    var fld = ds.getOrgFieldName(i);
	                    rowObject[fld] = values[i];
	                }
	            }
	            else {
	                var vals = ds.getRowObject(item.dataRow);
	                rowObject['__rowId'] = item.dataRow;
	                for (var fld in vals) {
	                    row[fld] = vals[fld];
	                }
	            }
	            return rowObject;
	        }
	        return null;
	    };
	    ViewDelegateUtils.setValues = function (grid, item, values, strict) {
	        var ds = item.dataSource;
	        var cnt = ds.fieldCount;
	        var oldValues;
	        var diff = false;
	        var row;
	        if (grid.isItemEditing(item)) {
	            var editItem = item;
	            if (editItem) {
	                editItem.values = values;
	            }
	            else {
	                for (var i = 0; i < cnt; i++) {
	                    var fld = ds.getOrgFieldName(i);
	                    if (values.hasOwnProperty(fld)) {
	                        item.setData(i, values[fld]);
	                    }
	                }
	            }
	        }
	        else if ((row = item.dataRow) >= 0) {
	            if (ds instanceof LocalTreeDataProvider_1.LocalTreeDataProvider) {
	                var r = ds.rowById(row);
	                if (r) {
	                    diff = false;
	                    oldValues = r.values || [];
	                    if (Array.isArray(values)) {
	                        for (var i = 0, l = values.length; i < l; i++) {
	                            if (diff = !ds.getField(i).equalValues(oldValues[i], values[i])) {
	                                break;
	                            }
	                        }
	                    }
	                    else {
	                        for (var i = 0; i < cnt; i++) {
	                            var fld = ds.getOrgFieldName(i);
	                            if (values.hasOwnProperty(fld)) {
	                                if (diff = !ds.getField(i).equalValues(oldValues[i], values[fld])) {
	                                    break;
	                                }
	                            }
	                        }
	                    }
	                    if (!diff) {
	                        return;
	                    }
	                    strict ? r.updateStrict(values) : r.update(values);
	                }
	            }
	            else if (ds instanceof LocalDataProvider_1.LocalDataProvider) {
	                diff = false;
	                oldValues = ds.getRow(row);
	                if (Array.isArray(values)) {
	                    for (var i = 0, l = values.length; i < l; i++) {
	                        if (diff = !ds.getField(i).equalValues(oldValues[i], values[i])) {
	                            break;
	                        }
	                    }
	                }
	                else {
	                    for (var i = 0; i < cnt; i++) {
	                        var fld = ds.getOrgFieldName(i);
	                        if (values.hasOwnProperty(fld)) {
	                            if (diff = !ds.getField(i).equalValues(oldValues[i], values[fld])) {
	                                break;
	                            }
	                        }
	                    }
	                }
	                if (!diff) {
	                    return;
	                }
	                strict ? ds.updateStrictRow(row, values) : ds.updateRow(row, values);
	            }
	        }
	    };
	    return ViewDelegateUtils;
	}());
	var CellType;
	(function (CellType) {
	    CellType["Header"] = "header";
	    CellType["Footer"] = "footer";
	    CellType["Summary"] = "summary";
	    CellType["Indicator"] = "indicator";
	    CellType["Statebar"] = "stateBar";
	    CellType["CheckBarHead"] = "checkHead";
	    CellType["CheckBarFoot"] = "checkFoot";
	    CellType["RowGroupHead"] = "rowGroupHead";
	    CellType["RowGroupFoot"] = "rowGroupFoot";
	    CellType["RowGroupBar"] = "rowGroupBar";
	    CellType["RowGroupHeader"] = "rowGroupHeader";
	    CellType["RowGroupFooter"] = "rowGroupFooter";
	    CellType["Panel"] = "panel";
	    CellType["RowGroupPanel"] = "rowGroupPanel";
	    CellType["BodyEmpty"] = "bodyEmpty";
	})(CellType = exports.CellType || (exports.CellType = {}));
	/**
	 * GridBase는 GridView와 TreeView의 기반 클래스(Base Class)이다.
	 */
	var GridBase = /** @class */ (function () {
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBase(container) {
	        //-------------------------------------------------------------------------
	        // callbacks
	        //-------------------------------------------------------------------------
	        /**
	         * 그리드의 포커스 셀의 위치가 변경되기 직전에 호출한다.
	         *
	         * @remarks
	         * 변경된 후에는 onCurrentChanged를 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param oldIndex - 변경 전 셀 위치정보.
	         * @param newIndex - 변경 되는 셀 위치정보.
	         * @returns callback 함수에서 명시적으로 false를 반환하면 current가 변경되지 않는다.
	         *
	         */
	        this.onCurrentChanging = null;
	        /**
	         * 그리드의 포커스 셀의 위치가 변경된 후 호출한다.
	         *
	         * @remarks
	         * 변경되기 직전에는 onCurrentChanging 을 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param newIndex - 변경 된 셀 위치정보.
	         *
	         */
	        this.onCurrentChanged = null;
	        /**
	         * dataRow의 위치가 변경된 후 호출한다.
	         *
	         * @remarks
	         * onCurrentChanged의 경우 선택된 cell의 itemIndex가 변경되는 경우 발생되지만, onCurrentRowChanged의 경우 선택된 cell의 dataRow가 변경되는 경우에 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param oldRow - 변경 전 데이터행의 dataRow.
	         * @param newRow - 변경 후 데이터행의 dataRow. -1인 경우, 신규행이거나 또는 dataProvider가 비워진 경우이다.
	         *
	         */
	        this.onCurrentRowChanged = null;
	        /**
	         * 셀 편집을 완료하고 다른 셀로 이동할때 Javascript를 통한 사용자 validation을 실행한다.
	         *
	         * @remarks
	         * 해당 컬럼 값에 문제가 있다면 검증 에러와 에러 메시지를 그리드에 반환값으로 전달한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - GridColumn 모델과 같은 구조의 컬럼 object.
	         * @param inserting - 열 추가 중이면 true. 열 수정 중이면 false.
	         * @param value - 입력된 필드의 값.
	         * @param itemIndex - 셀편집된 행의 아이템 인덱스.
	         * @param dataRow - 셀편집된 행의 데이터 행 번호.
	         * @returns errorLevel과 errorMessage 값을 포함하는 object를 그리드에 전달하면 검증에 실패한 것으로 판단한다.
	         *
	         */
	        this.onValidateColumn = null;
	        /**
	         * Javascript를 통한 행 단위 사용자 validation을 실행한다.
	         *
	         * @remarks
	         * 해당 행의 값들에 문제가 있다면 검증 에러와 에러 메시지를 그리드에 반환값으로 전달한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param dataRow - 검증하는 행의 데이터 행 번호.
	         * @param itemIndex - 검증하는 행의 아이템 인덱스.
	         * @param inserting - true: 열 추가 중, false: 열 수정 중.
	         * @param values - 입력된 필드들의 값.
	         * @returns errorLevel과 errorMessage 값을 포함하는 object를 그리드에 전달하면 검증에 실패한 것으로 판단한다.
	         *
	         */
	        this.onValidateRow = null;
	        /**
	         * validation 실패시 발생한다.
	         *
	         * @remarks
	         * 콜백함수에서 별도의 에러 처리가 가능하고, err 객체를 return 하면 자체 Validation 메세지가 표시되고 그 외의 경우 표시되지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 검증하는 행의 아이템 인덱스.
	         * @param column - GridColumn 모델과 같은 구조의 컬럼 object.
	         * @param error - 검증 결과.
	         * @returns errorLevel과 errorMessage 값을 포함하는 object를 그리드에 전달하면 검증에 실패한 것으로 판단한다. 아무 결과도 return 하지 않으면 검증 실패 메시지는 표시되지 않는다.
	         *
	         */
	        this.onValidationFail = null;
	        /**
	         * 사용자가 컬럼 헤더의 체크박스를 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - GridColumn과 같은 구조의 object.
	         * @param checked - 체크 여부.
	         *
	         */
	        this.onColumnCheckedChanged = null;
	        /**
	         * GridBase addPopupMenu로 추가한 팝업메뉴 항목이 클릭됐을 때 호출한다.
	         *
	         * @remarks
	         * MenuItem에 callback이 지정된 경우 호출되지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param item - MenuItem 객체.
	         * @param index - 클릭된 셀 정보.
	         *
	         */
	        this.onMenuItemClicked = null;
	        /**
	         * ContextMenu가 호출될때 표시되는 좌표가 반환된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param x - ContextMenu가 호출된 x좌표값.
	         * @param y - ContextMenu가 호출된 y좌표값.
	         * @param eltName - 마우스 오른쪽 버튼이 클릭된 영역명.
	         * @returns false를 반환하면 컨텍스트 메뉴가 표시되지 않는다.
	         *
	         */
	        this.onContextMenuPopup = null;
	        /**
	         * setContextMenu를 통해 추가한 컨텍스트 메뉴 항목을 클릭했을 때 호출한다.
	         *
	         * @remarks
	         * MenuItem에 callback이 지정된 경우 호출되지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param item - 클릭된 메뉴 항목의 정보.
	         * @param index - 마우스가 클릭된 위치의 셀 인덱스.
	         *
	         */
	        this.onContextMenuItemClicked = null;
	        /**
	         * 사용자가 데이터셀 내부의 action 버튼을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 데이터셀이 포함된 아이템의 위치정보.
	         * @param column - 데이터셀에 연결된 컬럼.
	         *
	         */
	        this.onCellButtonClicked = null;
	        /**
	         * LinkCellRenderer로 정의된 셀을 클릭시 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 클릭된 셀의 위치정보.
	         * @param data - 클릭된 셀에 담겨 있던 url 정보.
	         *
	         */
	        this.onLinkableCellClicked = null;
	        /**
	         * 사용자가 키보드나 스크롤 바 등을 통해 그리드에 마지막 행이 표시되는 시점에 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onScrollToBottom = null;
	        /**
	         * 수직 스크롤 바의 위치가 변경될때 발생된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 스크롤 중일때 그리드 상단에 표시되는 itemIndex 값.
	         *
	         */
	        this.onTopItemIndexChanged = null;
	        /**
	         * 사용자가 데이터 셀을 마우스로 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 클릭된 데이터 셀의 위치정보.
	         *
	         */
	        this.onDataCellClicked = null;
	        /**
	         * 사용자가 데이터 셀을 마우스로 더블클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 더블클릭된 데이터 셀의 위치정보.
	         *
	         */
	        this.onDataCellDblClicked = null;
	        /**
	         * 사용자가 Ctrl+Del 키를 누르거나 deleteSelection을 삭제할 때, 실제 삭제 직전에 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param rows - 삭제하려는 행들의 데이터행 인덱스 배열.
	         * @returns null이 아닌 값을 반환하면 지정 텍스트를 표시하고 삭제를 취소한다.
	         *
	         */
	        this.onRowsDeleting = null;
	        /**
	         * 사용자가 Insert 키를 눌러 새로운 행을 삽입하거나, 마지막 행에서 아래 화살표를 눌러 행을 추가하려고 할 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤
	         * @param itemIndex - 행 삽입 위치의 itemIndex.
	         * @param dataRow - 행 삽입 위치의 dataRow.
	         * @returns 행 추가를 금지 시킬 때 사용자에게 표시할 메시지를 반환한다.
	         *
	         */
	        this.onRowInserting = null;
	        /**
	         * 사용자가 마우스나 키보드로 선택 영역의 크기를 변경하는 중에 호출한다.
	         *
	         * @remarks
	         * 변경 중인 선택 영역의 정보는 getSelectionData 함수로 알 수 있다.
	         * grid.SelectOptions.style이 none인경우 발생하지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onSelectionChanged = null;
	        /**
	         * 선택 영역이 새로 추가됐을 때 호출한다.
	         *
	         * @remarks
	         * 변경 중인 선택 영역의 정보는 getSelectionData 함수로 알 수 있다.
	         * grid.SelectOptions.style이 none인경우 발생하지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param selection - 선택 영영 정보.
	         *
	         */
	        this.onSelectionAdded = null;
	        /**
	         * 사용자가 마우스나 키보드로 선택 영역 변경을 완료했을 때 호출한다.
	         *
	         * @remarks
	         * 변경된 선택 영역의 정보는 getSelection함수로 알수 있고 선택영역의 데이터는 getSelectionData 함수로 알 수 있다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onSelectionEnded = null;
	        /**
	         * Cell별로 Editor의 표시여부를 임의로 변경하기 위해서 사용한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 편집기가 열리려는 인덱스 정보. CellIndex 오브젝트와 같은 구조.
	         * @param attrs - ?
	         * @returns false 를 return하면 Editor가 표시되지 않는다.
	         *
	         */
	        this.onShowEditor = null;
	        /**
	         * 편집이 완료되고 편집기가 사라질때 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 편집된 CellIndex.
	         *
	         */
	        this.onHideEditor = null;
	        /**
	         * 아이템이 사용자의 Key입력등으로 값이 변경되면 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - CellIndex 모델 값을 갖는 현재 포커스 셀 위치정보.
	         * @param value - 편집중인 셀의 데이터 값.
	         *
	         */
	        this.onEditChange = null;
	        /**
	         * 셀 편집이 완료되었을때 발생하는 이벤트이다.
	         *
	         * @remarks
	         * DropDownCellEditor, SearchCellEditor, MultiCheckCellEditor의 경우 editResult.text에는 labels에 해당하는 값이 출력되고 editResult.value에는 values에 해당하는 값이 출력된다.
	         * DateCellEditor와 BTDateCellEditor의 경우에는 editResult.text에는 editor의 datetimeFormat으로 Formatting된 값이 출력되고 editResult.value에는 Date객체가 출력된다.
	         * 다른 Editor의 경우 text와 value에 동일한 값이 출력된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 편집된 CellIndex.
	         * @param editResult - 편집된 셀의 text와 value를 속성으로 갖는 단순한 객체. 셀 편집기의 종류에 따라 출력되는 값이 달라진다.
	         *
	         */
	        this.onGetEditValue = null;
	        /**
	         * 사용자 입력이 셀에 반영될때 발생한다.
	         *
	         * @remarks
	         * 편집중인 셀에서 다른 셀로 이동하거나 또는 commitEditor를 호출하면 발생한다.
	         * setValue 등 사용자 코드로 변경될때는 발생하지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 변경된 CellIndex.
	         * @param oldValue - 편집전 셀의 데이터 값.
	         * @param newValue - 편집전 셀의 데이터 값.
	         * @returns ?
	         *
	         */
	        this.onEditCommit = null;
	        /**
	         * 사용자가 편집중 ESCAPE 키를 입력하거나 cancel이 호출되어 편집이 취소된후 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 편집이 취소된 데이터 셀의 위치정보.
	         *
	         */
	        this.onEditCanceled = null;
	        /**
	         * 사용자가 행 편집을 취소했을때 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 편집이 취소된 행의 ItemIndex.
	         * @param state - 편집 취소된 행의 상태. updating, inserting, appending 이 반환된다.
	         *
	         */
	        this.onItemEditCanceled = null;
	        /**
	         * 사용자가 행 편집을 취소하는 도중 발생한다.
	         *
	         * @remarks
	         * MenuItem에 callback이 지정된 경우 호출되지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 편집이 취소된 행의 ItemIndex.
	         * @param state - 편집 취소된 행의 상태이다. updating, inserting, appending 이 반환된다.
	         * @returns 기본값: True, false 를 return 하면 행 편집 취소가 취소된다.(계속 편집 상태)
	         *
	         */
	        this.onItemEditCancel = null;
	        /**
	         * SearchCellEditor에서 searchLength와 searchDelay조건이 만족하면 발생한다. 또는 Ctrl+Enter키 또는 Enter키를 입력시 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 변경된 CellIndex.
	         * @param text - 셀이 입력된 값.
	         */
	        this.onEditSearch = null;
	        /**
	         * SearchCellEditor에서 버튼을 클릭했을때 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 변경된 CellIndex.
	         * @param text - 셀이 입력된 값.
	         *
	         */
	        this.onSearchCellButtonClick = null;
	        /**
	         * 수정이나 추가 중인 편집 아이템의 한 필드값이 편집 완료되었을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 편집 중인 행의 아이템 인덱스.
	         * @param row - 편집 중인 행의 데이터 행 번호.
	         * @param field - 방금 편집된 필드의 인덱스.
	         *
	         */
	        this.onCellEdited = null;
	        /**
	         * 사용자 입력으로 변경된 값이 행에 반영될때 발생한다.
	         *
	         * @remarks
	         * 그러나 PasteOptions.noEditEvent가 true이면 발생하지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 변경된 ItemIndex.
	         * @param row - 변경된 dataRow.
	         * @param field - 변경된 필드의 인덱스.
	         * @param oldValue - 편집전 셀의 데이터 값.
	         * @param newValue - 편집후 셀의 데이터 값.
	         *
	         */
	        this.onEditRowChanged = null;
	        /**
	         * 그리드 셀에 붙여넣기 할때 발생한다.
	         *
	         * @remarks
	         * 여러 행을 붙여넣기 할때는 onRowsPasted참조.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 변경된 ItemIndex.
	         * @param row - 변경된 dataRow.
	         * @param fields - 필드의 인덱스 값.
	         * @param oldValues - 편집전 셀의 데이터 값들.
	         * @param newValues - 편집후 셀의 데이터 값들.
	         *
	         */
	        this.onEditRowPasted = null;
	        /**
	         * 사용자가 여러 행을 붙여넣기 했을 때 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param items - 붙여넣기된 행들의 itemIndex들.
	         *
	         */
	        this.onRowsPasted = null;
	        /**
	         * 붙여 넣기 동작시 셀에 붙여넣는 동작시 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 클릭된 데이터 셀의 위치정보.
	         * @param value - 붙여넣기 중인 데이터 값.
	         * @returns false를 return하면 그 셀에는 붙여넣기가 되지 않는다.
	         *
	         */
	        this.onCellPasting = null;
	        /**
	         * 사용자가 checkBar의 체크박스를 클릭하거나 checkItem을 호출하여 체크를 변경한 경우 호출한다
	         *
	         * @param grid - GridBase 컨트롤
	         * @param index - 체크된 데이터행의 아이템 인덱스이다.
	         * @param checked - 체크되었으면 true, 해제되었으면 false가 출력된다.
	         *
	         */
	        this.onItemChecked = null;
	        /**
	         * 사용자가 checkBar의 Header를 클릭하여 전체선택, 해제를 하거나 또는 checkAll true 을 입력하여 전체선택,해제를 하면 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param checked - 체크가 되었으면 true, 해제가 되었으면 false가 출력된다.
	         *
	         */
	        this.onItemAllChecked = null;
	        /**
	         * 그리드에 발생한 에러창을 클릭할때 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param error - 에러 메세지.
	         *
	         */
	        this.onErrorClicked = null;
	        /**
	         * 정렬이 시작될때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param fields - 정렬하는 필드의 목록.
	         * @param direction - 각 필드에 대한 정렬 방식 목록.
	         * @returns False를 반환하면 정렬은 취소된다.
	         *
	         */
	        this.onSorting = null;
	        /**
	         * 정렬이 완료된 후 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onSortingChanged = null;
	        /**
	         * 필터링이 시작될때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @returns 기본값: True, 필터링 실행 여부를 지정한다. False를 반환하면 필터링은 취소된다.
	         *
	         */
	        this.onFiltering = null;
	        /**
	         * 컬럼에 필터들이 설정되어 있고, 그 필터의 상태가 변경될 경우 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 필터링된 컬럼 정보.
	         * @param filter - 해당 필터의 정보.
	         *
	         */
	        this.onFilteringChanged = null;
	        /**
	         * 키보드로 키 입력시 KeyDown 될 때 발생하는 콜백함수이다.
	         *
	         * @remarks
	         * 키를 입력하고 있는 동안 계속 발생된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param key - 키 코드.
	         * @param ctrl - 키 입력 여부.
	         * @param shift - 키 입력 여부.
	         * @param alt - 키 입력 여부.
	         * @returns 키 입력을 금지할때 false 를 반환한다.
	         *
	         */
	        this.onKeyDown = null;
	        /**
	         * 키보드로 키 입력시 발생하는 콜백함수이다.
	         *
	         * @remarks
	         * 키를 입력하고 있는 동안 계속 발생된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param key - 키 코드 대소문자를 구분한다.
	         *
	         */
	        this.onKeyPress = null;
	        /**
	         * 키보드로 키 입력시 KeyUp 될 때 발생하는 콜백함수이다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param key - 키 코드.
	         * @param ctrl - 키 입력 여부.
	         * @param shift - 키 입력 여부.
	         * @param alt - 키 입력 여부.
	         *
	         */
	        this.onKeyUp = null;
	        /**
	         * 데이터셀의 툴팁이 표시될때 발생하는 콜백 함수이다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 마우스 포인터가 위치한 영역의 인덱스 값.
	         * @param value - 마우스 포인터가 위치한 데이터셀의 값.
	         * @returns 툴팁에 표시할 값. 아무것도 return 하지 않으면 데이터 셀 값이 툴팁에 표시된다.
	         *
	         */
	        this.onShowTooltip = null;
	        /**
	         * 컬럼헤더셀의 툴팁이 표시될때 발생하는 콜백 함수이다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 툴팁이 표시될 컬럼.
	         * @param value - 툴팁에 표시될 값. 기본값으로 컬럼헤더 text가 전달된다.
	         * @returns 툴팁에 표시할 값.
	         *
	         */
	        this.onShowHeaderTooltip = null;
	        /**
	         * 컬럼의 속성 중 width, displayIndex, visible 속성 값이 변경되면 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 변경된 컬럼의 정보.
	         * @param property - 컬럼의 width, displayIndex, visible 속성 중 변경된 것.
	         * @param value - 변경된 값이 전달된다.
	         *
	         */
	        this.onColumnPropertyChanged = null;
	        /**
	         * 마우스가 선택된 셀의 테두리를 지나갈때 발생하는 이벤트이다.
	         *
	         * @remarks
	         * return값으로 cursor이름을 넘겨주면 마우스커서가 변경된다.
	         * (ex: “pointer”, “crosshair”, “move”, “wait” 등등, http://www.w3.org/wiki/CSS/Properties/cursor)
	         * null, false를 return하면 drag를 할 수 없다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param cells - 선택된 영역에 대한 정보.
	         * @returns 기본값: null, 드래그 가능여부나 가능할때 표시하려는 마우스 커서명을 지정한다.
	         *
	         */
	        this.onShowInnerDragCursor = null;
	        /**
	         * 드래그를 시작하면 발생하는 이벤트이다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param cells - 선택된 영역에 대한 정보.
	         * @returns false를 return하면 drag가 취소된다.
	         *
	         */
	        this.onInnerDragStart = null;
	        /**
	         * 드래그를 상태에서 마우스가 움직일때 발생하는 이벤트이다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 셀 위치정보.
	         * @param cells - 선택된 영역에 대한 정보.
	         * @returns 기본값: null, false를 지정하면 drop할 수 없다.
	         *
	         */
	        this.onInnerDragOver = null;
	        /**
	         * 드래그 상태에서 마우스버튼을 놓으면 발생하는 이벤트이다.
	         *
	         * @remarks
	         * drop된 CellIndex를 확인할 수 있다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 셀 위치정보.
	         * @param cells - 선택된 영역에 대한 정보.
	         * @returns ?
	         *
	         */
	        this.onInnerDrop = null;
	        /**
	         * 그리드가 선택되었을때 발생한다.
	         *
	         * @remarks
	         * grid를 전역변수에 저장해서 사용하는 것이 좋다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onGridActivated = null;
	        /**
	         * control + c 키로 복사하기 시 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param selection -
	         * @param event -
	         *
	         */
	        this.onCopy = null;
	        /**
	         * 그리드에 붙여넣기를 시작하기 전에 발생한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - 위치정보.
	         * @param event -
	         *
	         */
	        this.onPaste = null;
	        /**
	         * 그리드에 붙여넣기가 끝난 후 발생한다.
	         *
	         * 입력 에디터가 표시된 상태에서는 발생하지 않는다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onPasted = null;
	        /**
	         * 사용자가 checkBar의 체크박스를 클릭하거나 checkItem을 호출하여 체크를 변경한 경우 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param items - 체크된 데이터행의 ItemIndex.
	         * @param checked - true: 체크, false: 해제.
	         *
	         */
	        this.onItemsChecked = null;
	        // onElementClick: (grid: ViewDelegate, info: GridClickInfo) => void = null;
	        /**
	         * 사용자가 마우스로 컬럼 헤더셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         * @param rightClicked - 마우스 오른쪽 버튼이 클릭 되었는지의 여부.
	         *
	         */
	        this.onColumnHeaderClicked = null;
	        /**
	         * 사용자가 마우스로 컬럼 헤더셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onColumnHeaderDblClicked = null;
	        /**
	         * 사용자가 마우스로 컬럼 헤더셀의 이미지를 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onColumnHeaderImageClicked = null;
	        /**
	         * 사용자가 마우스로 컬럼 Footer셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onFooterCellClicked = null;
	        /**
	         * 사용자가 마우스로 컬럼 Footer셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onFooterCellDblClicked = null;
	        /**
	         * 사용자가 HeaderSummaryCell을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤
	         * @param column - 해당 컬럼.
	         */
	        this.onHeaderSummaryCellClicked = null;
	        /**
	         * 사용자가 HeaderSummaryCell을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onHeaderSummaryCellDblClicked = null;
	        /**
	         * CheckBar.showAll 속성이 false 일 때, 사용자가 마우스로 CheckBar의 Head를 클릭하였을때 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onCheckBarHeadClicked = null;
	        /**
	         * 사용자가 마우스로 CheckBarFoot셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onCheckBarFootClicked = null;
	        /**
	         * 사용자가 마우스로 CheckBarFoot셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onCheckBarFootDblClicked = null;
	        /**
	         * 사용자가 마우스로 Indicator셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 클릭된 영역의 인덱스 값, head = -1, foot = -2.
	         *
	         */
	        this.onIndicatorCellClicked = null;
	        /**
	         * 사용자가 마우스로 Indicator셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 클릭된 영역의 인덱스 값, head = -1, foot = -2.
	         *
	         */
	        this.onIndicatorCellDblClicked = null;
	        /**
	         * 사용자가 마우스로 StateBar셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 클릭된 영역의 인덱스 값, head = -1, foot = -2.
	         *
	         */
	        this.onStateBarCellClicked = null;
	        /**
	         * 사용자가 마우스로 StateBar셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param itemIndex - 클릭된 영역의 인덱스 값, head = -1, foot = -2.
	         *
	         */
	        this.onStateBarCellDblClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Head셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onRowGroupHeadClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Head셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onRowGroupHeadDblClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Foot셀을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onRowGroupFootClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Foot셀을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onRowGroupFootDblClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Bar를 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param index - RowGroup의 Level 값, expander를 클릭하는 경우 -1.
	         *
	         */
	        this.onRowGroupBarClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Bar를 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param level - RowGroup의 Level 값, expander를 클릭하는 경우 -1.
	         *
	         */
	        this.onRowGroupBarDblClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Header, Footer 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param kind - 종류. head = -1, foot = -2.
	         * @param level - 클릭된 영역의 위치정보.
	         *
	         */
	        this.onRowGroupHeaderFooterClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroup의 Header, Footer 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param kind - 종류. head = -1, foot = -2.
	         * @param index - 클릭된 영역의 위치정보.
	         *
	         */
	        this.onRowGroupHeaderFooterDblClicked = null;
	        /**
	         * 사용자가 마우스로 Panel을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onPanelClicked = null;
	        /**
	         * 사용자가 마우스로 Panel을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onPanelDblClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroupPanel을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onRowGroupPanelClicked = null;
	        /**
	         * 사용자가 마우스로 RowGroupPanel을 더블 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param column - 해당 컬럼.
	         *
	         */
	        this.onRowGroupPanelDblClicked = null;
	        /**
	         * 사용자가 마우스로 빈 영역을 클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onBodyEmptyClicked = null;
	        /**
	         * 사용자가 마우스로 빈 영역을 더블클릭했을 때 호출한다.
	         *
	         * @param grid - GridBase 컨트롤.
	         *
	         */
	        this.onBodyEmptyDblClicked = null;
	        /**
	         * CommandStack이 바뀐 후 호출 된다.
	         *
	         * @param grid - GridBase 컨트롤.
	         * @param undoable - 뒤로.
	         * @param redoable - 앞으로.
	         *
	         */
	        this.onCommandStackChanged = null;
	        this._view = this._createView(container);
	        this._listener = this._createListener(this._view);
	    }
	    /**
	     * @internal
	     */
	    GridBase.prototype.dispose = function () {
	        this._view.dispose();
	        this._view = null;
	        this._container && this._container.dispose();
	        this._container = null;
	    };
	    Object.defineProperty(GridBase.prototype, "fixedOptions", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * fixedOptions를 반환한다.
	         *
	         * @remarks
	         * fixedOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.fixedOptions.colCount = 2;
	         * ```
	         */
	        get: function () {
	            return this._view.fixedOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "displayOptions", {
	        /**
	         * displayOptions를 반환한다.
	         *
	         * @remarks
	         * displayOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.displayOptions.columnResizable = true;
	         * ```
	         */
	        get: function () {
	            return this._view.displayOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "formatOptions", {
	        /**
	         * formatOptions를 반환한다.
	         *
	         * @remarks
	         * formatOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.formatOptions.datetimeFormat = 'yyyy-mm-dd';
	         * ```
	         */
	        get: function () {
	            return this._view.formatOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "editOptions", {
	        /**
	         * editOptions를 반환한다.
	         *
	         * @remarks
	         * editOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.editOptions.deletable = true;
	         * ```
	         */
	        get: function () {
	            return this._view.editOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "editorOptions", {
	        /**
	         * editorOptions를 반환한다.
	         *
	         * @remarks
	         * editorOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.editorOptions.yearDisplayFormat = "{Y}년";
	         * ```
	         */
	        get: function () {
	            return this._view.editorOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "copyOptions", {
	        /**
	         * copyOptions를 반환한다.
	         *
	         * @remarks
	         * copyOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.copyOptions.singleMode = true;
	         * ```
	         */
	        get: function () {
	            return this._view.copyOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "pasteOptions", {
	        /**
	         * pasteOptions를 반환한다.
	         *
	         * @remarks
	         * pasteOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.pasteOptions.enableAppend = false;
	         * ```
	         */
	        get: function () {
	            return this._view.pasteOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "sortingOptions", {
	        /**
	         * sortingOptions를 반환한다.
	         *
	         * @remarks
	         * sortingOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.sortingOptions.style = 'reverse';
	         * ```
	         */
	        get: function () {
	            return this._view.sortingOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "filteringOptions", {
	        /**
	         * filteringOptions를 반환한다.
	         *
	         * @remarks
	         * filteringOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.filteringOptions.enabled = false;
	         * ```
	         */
	        get: function () {
	            return this._view.filteringOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "rowIndicator", {
	        /**
	         * rowIndicator를 반환한다.
	         *
	         * @remarks
	         * rowIndicator 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.rowIndicator.displayValue = 'row';
	         * ```
	         */
	        get: function () {
	            return this._view.rowIndicator;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "stateBar", {
	        /**
	         * stateBar를 반환한다.
	         *
	         * @remarks
	         * stateBar 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.stateBar.mark = 'image';
	         * ```
	         */
	        get: function () {
	            return this._view.stateBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "checkBar", {
	        /**
	         * checkBar를 반환한다.
	         *
	         * @remarks
	         * checkBar 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.checkBar.visibleOnly = true;
	         * ```
	         */
	        get: function () {
	            return this._view.checkBar;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "header", {
	        /**
	         * header를 반환한다.
	         *
	         * @remarks
	         * header 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.header.showTooltip = true;
	         * ```
	         */
	        get: function () {
	            return this._view.header;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridBase.prototype, "footer", {
	        /**
	         * footer를 반환한다.
	         *
	         * @remarks
	         * footer 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.footer.resizable = true;
	         * ```
	         */
	        get: function () {
	            return this._view.footer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    /**
	     * alert창에 입력된 메세지를 표시한다.
	     *
	     * @param message - 입력된 메세지.
	     *
	     */
	    GridBase.prototype.ping = function (message) {
	        if (this._view instanceof GridBase_1.GridBase) {
	            alert(message);
	        }
	    };
	    // beginUpdate() {
	    //     this._view.beginUpdate()
	    // }
	    // endUpdate(force) {
	    //     this._view.endUpdate(arguments.length > 0 ? force : true);
	    // }
	    /**
	     * 그리드를 내부적으로 새로 그린다.
	     *
	     */
	    GridBase.prototype.refresh = function () {
	        this._view.refreshView();
	    };
	    /**
	     * 그리드가 표시된 상태면 true를 반환한다.
	     *
	     */
	    GridBase.prototype.isVisible = function () {
	        return this._view.visible;
	    };
	    /**
	     * 그리드를 표시하거나 감춘다.
	     *
	     * @param value - true: 그리드 표시, false: 그리드 감추기
	     *
	     */
	    GridBase.prototype.setVisible = function (value) {
	        this._view.visible = value;
	    };
	    /**
	     * 그리드에 현재 표시된 Grid Item 개수를 반환한다.
	     *
	     * @remarks
	     * rowGroup의 header, footer가 있는 경우 itemCount에 포함된다.
	     *
	     */
	    GridBase.prototype.getItemCount = function () {
	        return this._view.itemCount;
	    };
	    /**
	     * 지정한 그리드 행의 Row Id 값을 반환한다.
	     *
	     * @param itemIndex - 그리드의 행번호.
	     *
	     */
	    GridBase.prototype.getDataRow = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        return item ? item.dataRow : -1;
	    };
	    /**
	     * 그리드 itemIndex와 연결된 dataRow를 반환한다.
	     *
	     * @param items - itemIndex 배열.
	     *
	     */
	    GridBase.prototype.getRowsOfItems = function (items) {
	        var rows = [];
	        if (items) {
	            for (var i = 0, cnt = items.length; i < cnt; i++) {
	                var item = this._view.getItem(items[i]);
	                item && rows.push(item.dataRow);
	            }
	        }
	        return rows;
	    };
	    /**
	     * dataRow와 연결된 itemIndex를 반환한다.
	     *
	     * @param dataRow - dataProvider의 rowIndex.
	     *
	     */
	    GridBase.prototype.getItemIndex = function (dataRow) {
	        return this._view.getItemIndexOfRow(dataRow);
	    };
	    /**
	     * 입력된 dataRow들과 연결된 그리드 itemIndex를 반환한다.
	     *
	     * @param rows - dataRow index 배열.
	     *
	     */
	    GridBase.prototype.getItemsOfRows = function (rows) {
	        return this._view.getItemIndiciesOfRows(rows);
	    };
	    /**
	     * 기존에 설정되어 있는 컬럼들을 반환한다.
	     *
	     */
	    GridBase.prototype.getColumns = function () {
	        var count = this._view.columnCount;
	        var columns = [];
	        for (var i = 0; i < count; i++) {
	            columns.push(this._view.getColumn(i));
	        }
	        return columns;
	    };
	    /**
	     * 기존에 설정되어 있는 컬럼들을 모두 제거하고 새로운 컬럼들로 그리드를 재구성한다.
	     *
	     * @param columns - 컬럼 설정 정보 배열. 배열의 각 항목은 GridColumn과 같은 내용으로 구성되는 object.
	     *
	     */
	    GridBase.prototype.setColumns = function (columns) {
	        this._view.setColumns(columns);
	    };
	    /**
	     * 설정되어 있는 컬럼들 외에 추가로 컬럼을 설정한다.
	     *
	     * @param column - 추가할 컬럼. GridColumn과 같은 내용으로 구성되는 object.
	     * @param index - 해당 컬럼이 위치할 인덱스(숨김컬럼 포함). 값을 지정하지 않으면 컬럼의 가장 마지막에 추가된다.
	     *
	     */
	    GridBase.prototype.addColumn = function (column, index) {
	        this._view.addColumn(column, index);
	    };
	    /**
	     * 해당 컬럼을 제거한다.
	     *
	     * @param column - 제거할 컬럼 이름.
	     *
	     */
	    GridBase.prototype.removeColumn = function (name) {
	        return this._view.removeColumn(name);
	    };
	    /**
	     * 그리드에 연결되어 있는 DataProvider를 반환한다.
	     *
	     */
	    GridBase.prototype.getDataSource = function () {
	        return this._dataDelegator;
	    };
	    /**
	     * 그리드에 Data Provider를 연결한다.
	     *
	     * @param dataProvider - DataProvider 객체.
	     *
	     */
	    GridBase.prototype.setDataSource = function (dataProvider) {
	        this._dataDelegator = dataProvider;
	        this._dataProvider = dataProvider ? dataProvider.getProvider() : null;
	        this._view.dataSource = this._dataProvider;
	    };
	    // options
	    /**
	     * 그리드 옵션 정보를 반환한다.
	     *
	     * @returns setOptions와 다르게 GridOptions에서 선언된 그리드 수준의 정보만을 반환한다.
	     *
	     */
	    GridBase.prototype.getOptions = function () {
	        return {
	            summaryMode: this._view.summaryMode.toString(),
	            fixedOptions: this.fixedOptions.toProxy(),
	            displayOptions: this.displayOptions.toProxy(),
	            formatOptions: this.formatOptions.toProxy(),
	            editOptions: this.editOptions.toProxy(),
	            editorOptions: this.editorOptions.toProxy(),
	            copyOptions: this.copyOptions.toProxy(),
	            pasteOptions: this.pasteOptions.toProxy(),
	            sortingOptions: this.sortingOptions.toProxy(),
	            filteringOptions: this.filteringOptions.toProxy()
	        };
	    };
	    /**
	     * 그리드 옵션 정보를 재설정한다.
	     *
	     * @remarks
	     * 그리드 수준의 정보만을 반환하는 getOptions와 달리 이 method를 통해 하위 구성 요소 및 다른 실행 정보들을 동시에 재설정할 수 있다.
	     *
	     * @param options - 설정 정보.
	     *
	     */
	    GridBase.prototype.setOptions = function (options) {
	        if (options) {
	            var view = this._view;
	            view.setOptions(options);
	            // view.assignFrom(options);
	            options.fixed && this.setFixedOptions(options.fixed);
	            options.display && this.setDisplayOptions(options.display);
	            options.format && this.setFormatOptions(options.format);
	            options.edit && this.setEditOptions(options.editOptions);
	            options.editor && this.setEditorOptions(options.editor);
	            options.copy && this.setCopyOptions(options.copy);
	            options.paste && this.setPasteOptions(options.paste);
	            options.sorting && this.setSortingOptions(options.sorting);
	            options.filtering && this.setFilteringOptions(options.filtering);
	        }
	    };
	    /**
	     * 그리드 고정 영역에 관한 설정 정보들을 FixedOptions의 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getFixedOptions = function () {
	        return this._view.fixedOptions.toProxy();
	    };
	    /**
	     * 그리드 고정 영역에 관한 정보를 FixedOptions의 모델로 설정한다.
	     *
	     * @param options - FixedOptions 모델과 같은 설정 정보. 변경하고자 하는 값들만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setFixedOptions = function (options) {
	        this._view.fixedOptions.assignFrom(options);
	    };
	    /**
	     * 그리드 표시와 관련된 설정 정보들을 DisplayOptions의 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getDisplayOptions = function () {
	        return this._view.displayOptions.toProxy();
	    };
	    /**
	     * 그리드 표시 정보를 DisplayOptions로 설정한다.
	     *
	     * @param options - DisplayOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setDisplayOptions = function (options) {
	        this._view.displayOptions.assignFrom(options);
	    };
	    /**
	     * 그리드의 FormatOptions을 반환한다.
	     *
	     */
	    GridBase.prototype.getFormatOptions = function () {
	        return this._view.formatOptions.toProxy();
	    };
	    /**
	     * 그리드의 FormatOptions를 설정한다.
	     *
	     * @param options - FormatOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setFormatOptions = function (options) {
	        this._view.formatOptions.assignFrom(options);
	    };
	    /**
	     * 그리드 편집 방식과 관련된 정보들을 EditOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getEditOptions = function () {
	        return this._view.editOptions.toProxy();
	    };
	    /**
	     * 그리드 편집 방식과 관련된 정보들을 EditOptions 모델로 재설정한다.
	     *
	     * @param options - EditOptions 모델과 같은 설정 정보. 변경하고자 하는 값들만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setEditOptions = function (options) {
	        this._view.editOptions.assignFrom(options);
	    };
	    /**
	     * 에디터 표시 정보를 EditorOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getEditorOptions = function () {
	        return this._view.editorOptions.toProxy();
	    };
	    /**
	     * 에디터 표시 정보를 EditorOptions 모델로 설정한다.
	     *
	     * @remarks
	     * date 에디터의 표시형태를 변경하는 경우 달력 팝업이 최초 실행(생성)되기 전에 먼저 설정되어야 하며(한번 실행되고난 후 중간에 변경할 수 없음), month 속성이 지정되면 monthDisplayFormat 속성은 무시된다.
	     *
	     * @param options - EditorOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setEditorOptions = function (options) {
	        this._view.editorOptions.assignFrom(options);
	    };
	    /**
	     * ctrl+c를 이용해서 그리드를 복사할때 적용되는 설정을 CopyOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getCopyOptions = function () {
	        return this._view.copyOptions.toProxy();
	    };
	    /**
	     * Copy 정보를 CopyOptions 모델로 설정한다.
	     *
	     * @param options - CopyOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setCopyOptions = function (options) {
	        this._view.copyOptions.assignFrom(options);
	    };
	    /**
	     * 그리드에 붙여넣기를 할때 적용되는 설정을 PasteOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getPasteOptons = function () {
	        return this._view.pasteOptions.toProxy();
	    };
	    /**
	     * 그리드에 PasteOptions 모델로 붙여넣기 정보를 설정한다.
	     *
	     * @param options - PasteOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setPasteOptions = function (options) {
	        this._view.pasteOptions.assignFrom(options);
	    };
	    /**
	     * 그리드 정렬과 관련된 설정 정보들을 SortingOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getSortingOptions = function () {
	        return this._view.sortingOptions.toProxy();
	    };
	    /**
	     * 그리드 정렬과 관련된 정보들을 SortingOptions 모델로 설정한다.
	     *
	     * @param options - SortingOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setSortingOptions = function (options) {
	        this._view.sortingOptions.assignFrom(options);
	    };
	    /**
	     * 그리드 필터링과 관련된 설정 정보들을 FilteringOptions 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getFilteringOptions = function () {
	        return this._view.filteringOptions.toProxy();
	    };
	    /**
	     * 그리드 필터링과 관련된 정보들을 FilteringOptions 모델로 설정한다.
	     *
	     * @param options - FilteringOptions 모델과 같은 설정 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setFilteringOptions = function (options) {
	        this._view.filteringOptions.assignFrom(options);
	    };
	    // components
	    /**
	     * 그리드 인디케이터와 관련된 설정 정보들을 RowIndicator 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getRowIndicator = function () {
	        return this._view.rowIndicator.toProxy();
	    };
	    /**
	     * 그리드 인디케이터와 관련된 설정 정보들을 RowIndicator 모델로 설정한다.
	     *
	     * @param value - RowIndicator 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setRowIndicator = function (value) {
	        this._view.rowIndicator.assignFrom(value);
	    };
	    /**
	     * 그리드 상태바의 설정 정보를 StateBar의 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getStateBar = function () {
	        return this._view.stateBar.toProxy();
	    };
	    /**
	     * 그리드 상태바의 설정 정보를 StateBar의 모델로 설정한다.
	     *
	     * @param value - StateBar 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setStateBar = function (value) {
	        this._view.stateBar.assignFrom(value);
	    };
	    /**
	     * 그리드 체크바와 관련된 설정 정보를 CheckBar의 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getCheckBar = function () {
	        return this._view.checkBar.toProxy();
	    };
	    /**
	     * 그리드 체크바의 설정 정보를 CheckBar의 모델로 설정한다.
	     *
	     * @param value - CheckBar 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     */
	    GridBase.prototype.setCheckBar = function (value) {
	        this._view.checkBar.assignFrom(value);
	    };
	    /**
	     * 그리드 헤더와 관련된 설정 정보들을 Header 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getHeader = function () {
	        return this._view.header.toProxy();
	    };
	    /**
	     * 그리드 헤더의 설정 정보를 Header 모델로 설정한다.
	     *
	     * @param value - Header 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setHeader = function (value) {
	        this._view.header.assignFrom(value);
	    };
	    /**
	     * 그리드 푸터와 관련된 설정 정보를 Footer 모델로 반환한다.
	     *
	     */
	    GridBase.prototype.getFooter = function () {
	        return this._view.footer.toProxy();
	    };
	    /**
	     * 그리드 푸터의 설정 정보를 Footer 모델로 설정한다.
	     *
	     * @param value - Footer 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setFooter = function (value) {
	        this._view.footer.assignFrom(value);
	    };
	    /**
	     * 그리드 푸터들의 설정 정보를 Footer 모델로 설정한다.
	     *
	     * @param value - Footer 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setFooters = function (value) {
	        this._view.footers.assignFrom(value);
	    };
	    /**
	     * 그리드 HeaderSummary들을 설정한다.
	     *
	     * @param value - HeaderSummary 모델과 같은 정보. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setHeaderSummaries = function (value) {
	        this._view.headerSummaries.assignFrom(value);
	    };
	    // styles
	    /**
	     * 셀 스타일을 변경한다.
	     *
	     * @param f - 스타일을 특정하기 위한 콜백함수.
	     *
	     */
	    GridBase.prototype.setCellStyleCallback = function (f) {
	        this._view.body.cellStyleCallback = f;
	    };
	    /**
	     * Row 스타일을 변경한다.
	     *
	     * @param f - 스타일을 특정하기 위한 콜백함수.
	     *
	     */
	    GridBase.prototype.setRowStyleCallback = function (f) {
	        this._view.body.rowStyleCallback = f;
	    };
	    /**
	     * Column들의 스타일을 변경한다.
	     *
	     * @param f - 스타일을 특정하기 위한 콜백함수.
	     *
	     */
	    GridBase.prototype.setColumnStyleCallback = function (name, f) {
	        var col = this._view.columnByName(name);
	        if (col && col instanceof GridColumn_1.ValueColumn) {
	            col.styleCallback = f;
	        }
	    };
	    /**
	     * 이젠 Test파일과의 호환성을 위해서 남겨놓는다. 빠른시간내 제거.
	     *
	     * @param f - 스타일을 특정하기 위한 콜백함수.
	     *
	     */
	    GridBase.prototype.setButtonClickCallback = function (f) {
	        this._view.buttonCellClickedCallback = f;
	    };
	    /**
	     * 이젠 Test파일과의 호환성을 위해서 남겨놓는다. 빠른시간내 제거.
	     *
	     * @param f - 스타일을 특정하기 위한 콜백함수.
	     *
	     */
	    GridBase.prototype.setLinkClickCallback = function (f) {
	        this._view.linkCellClickedCallback = f;
	    };
	    /**
	     * 하나 이상의 데이터 필드를 기준으로 Grid Item들을 정렬한다.
	     *
	     * @remarks
	     * 정렬은 Item Model 수준에서 실행되고, Data Provider 행들의 실제 위치는 변경되지 않는다.
	     *
	     * @param fieldNames - 정렬한 필드 이름 목록.
	     * @param sortDirs - 각 필드에 대한 정렬 방식 목록.
	     * @param textCases - 대소문자 구분.
	     *
	     */
	    GridBase.prototype.orderBy = function (fieldNames, sortDirs, textCases) {
	        if (fieldNames) {
	            var cols = [];
	            var dirs = [];
	            var cases = [];
	            var dp = this._dataProvider;
	            if (sortDirs) {
	                for (var i = 0, l = fieldNames.length; i < l; i++) {
	                    cols.push(this._view.columnByField(dp.getFieldIndex(fieldNames[i])));
	                    dirs.push(sortDirs && i < sortDirs.length ? Types.SortDirection[sortDirs[i]] || Types.SortDirection.ASCENDING : Types.SortDirection.ASCENDING);
	                    cases.push(textCases && i < textCases.length ? Types.SortCase[textCases[i]] || Types.SortCase.SENSITIVE : Types.SortCase.SENSITIVE);
	                }
	            }
	            this._view.orderBy(cols, dirs, cases);
	        }
	    };
	    /**
	     * 현재 정렬되어 있는 필드들의 Sort 정보를 반환한다.
	     *
	     * @returns Sort 필드 정보 배열. 배열의 각 항목은 “direction”, “orgFieldName”, “fieldName” 의 정보를 가지고 있다.
	     *
	     */
	    GridBase.prototype.getSortedFields = function () {
	        var view = this._view;
	        var cnt;
	        var flds = view.getSortFields();
	        var dirs = view.getSortDirections();
	        if (flds && (cnt = flds.length) > 0) {
	            var ds = this._dataProvider;
	            var fields = [];
	            for (var i = 0; i < cnt; i++) {
	                fields.push({
	                    fieldName: ds.getFieldName(flds[i]),
	                    orgFieldName: ds.getOrgFieldName(flds[i]),
	                    direction: dirs[i]
	                });
	            }
	            return fields;
	        }
	        return null;
	    };
	    /**
	     * 그리드가 focus 된다.
	     *
	     */
	    GridBase.prototype.setFocus = function () {
	        this._view.setFocus();
	    };
	    /**
	     * @internal
	     */
	    GridBase.prototype.layoutByColumn = function (column) {
	        return this._view.layoutByColumn(column);
	    };
	    /**
	     * 그리드에 설정되어 있는 컬럼들을 반환한다.
	     *
	     * @param columnsOnly - 기본값: false, false면 반환 시 컬럼 그룹들을 포함.
	     * @param visibleOnly - 기본값: false, false면 반환 시 숨긴 컬럼들을 포함.
	     * @param ordered - 기본값: true, ?
	     * @returns 컬럼 이름 배열.
	     *
	     */
	    GridBase.prototype.getColumnNames = function (columnsOnly, visibleOnly, ordered) {
	        if (ordered === void 0) { ordered = true; }
	        var columns = this._view.collectColumns(columnsOnly, visibleOnly, ordered);
	        var names = [];
	        for (var i = 0, l = columns.length; i < l; i++) {
	            names.push(columns[i].name);
	        }
	        return names;
	    };
	    /**
	     * 컬럼 이름으로 컬럼 설정 정보를 반환한다.
	     *
	     * @param name - 컬럼 이름.
	     * @returns 컬럼이 존재하지 않는 경우 null.
	     */
	    GridBase.prototype.columnByName = function (name) {
	        return this._view.columnByName(name);
	    };
	    /**
	     * 필드 이름으로 지정되는 데이터필드에 연결되어 있는 첫 번째 컬럼 정보를 반환한다.
	     *
	     * @param fieldName - 필드이름.
	     * @returns 컬럼 설정 정보나 컬럼이 존재하지 않는 경우 null.
	     *
	     */
	    GridBase.prototype.columnByField = function (fieldName) {
	        var fld = this._dataProvider.getFieldIndex(fieldName);
	        return fld > -1 ? this._view.columnByField(fld) : null;
	    };
	    // No Defined
	    // columnsByField(fieldName) {
	    //     const columns = this_view.columnsByFieldName(fieldName);
	    //  if (columns) {
	    //      var proxies = [];
	    //      for (var i = 0, cnt = columns.length; i < cnt; i++) {
	    //          proxies.push($$_getColumnProxy(columns[i]));
	    //      }
	    //      return proxies;
	    //  }
	    //  return null;
	    // }
	    // columnByTag(tag){
	    //     var column = this._view.columnByTag(tag);
	    //  return column && $$_getColumnProxy(column);
	    // }
	    // columnsByTag(tag) {
	    //     return _realgrid.columnsByTag(this._view, tag);
	    // }
	    /**
	     * 해당 GridColumn의 속성을 반환한다.
	     *
	     * @param column - 컬럼의 name 또는 컬럼 객체.
	     * @param prop - 속성 이름.
	     * @returns prop에 입력된 속성명의 값이다.
	     *
	     */
	    GridBase.prototype.getColumnProperty = function (column, prop) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col && prop) {
	            if (col[prop] instanceof Base_1.Base) {
	                return col[prop].toProxy();
	            }
	            else {
	                return col[prop];
	            }
	        }
	        return undefined;
	    };
	    /**
	     * 그리드에 설정되어 있는 컬럼의 특정 속성 정보를 변경한다.
	     *
	     * @remarks
	     * editor 속성 안에 있는 속성을 변경하려는 경우 editor 전체를 다시 지정해야 한다.
	     * values, labels를 변경하는 경우 setColumnProperty()로 변경할 수 없으며 setColumn()으로 컬럼 자체를 재지정해야 한다.
	     *
	     * @param column - 컬럼의 name 또는 컬럼 객체.
	     * @param prop - 속성 이름.
	     * @param value - 변경 값.
	     *
	     */
	    GridBase.prototype.setColumnProperty = function (column, prop, value) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col && prop) {
	            if (col[prop] instanceof Base_1.Base) {
	                col[prop].assignFrom(value);
	            }
	            else {
	                col[prop] = value;
	            }
	        }
	    };
	    /**
	     * 그리드에 설정되어 있는 컬럼의 정보를 변경한다.
	     *
	     * @remarks
	     * 이 method를 통해 컬럼 정보를 재설정하기 위해서는 먼저 columnByName 등으로 먼저 기존 설정 정보를 가져와야 한다.
	     *
	     * @param value - 변경할 정보. 컬럼의 name 또는 GridColumn과 같은 모델의 object.
	     *
	     */
	    GridBase.prototype.setColumn = function (value) {
	        var column = ViewDelegateUtils.getColumn(this._view, value);
	        if (column) {
	            column.assignFrom(value);
	        }
	    };
	    /**
	     * 현재 보여지고 있는 컬럼들을 반환한다.
	     *
	     * @returns 현재 보여지고 있는 컬럼들.
	     *
	     */
	    GridBase.prototype.getDisplayColumns = function () {
	        return this._view.collectColumns(true, true, true);
	    };
	    // layouts
	    /**
	     * 그리드의 컬럼 레이아웃을 설정한다.
	     *
	     * @param layout - 변경할 레이아웃 정보.
	     *
	     */
	    GridBase.prototype.setColumnLayout = function (layout) {
	        this._view.cellLayout = layout;
	    };
	    /**
	     * 해당 컬럼의 Layout 정보를 반환한다.
	     *
	     * @param column - 정보를 얻고자 하는 컬럼의 이름 또는 컬럼 오브젝트.
	     *
	     */
	    GridBase.prototype.getLayoutByColumn = function (column) {
	        return this._view.layoutByColumn(column).toProxy();
	    };
	    // No defined
	    // fitColumnWidth (column, maxWidth, minWidth, visibleOnly) {
	    //     maxWidth = arguments.length > 1 ? maxWidth : 0;
	    //     minWidth = arguments.length > 2 ? minWidth : 0;
	    //     return _realgrid.fitColumnWidth(this._view, column, maxWidth, minWidth, visibleOnly);
	    // }
	    // fitRowHeight (itemIndex, maxHeight, textOnly, refresh) {
	    //     maxHeight = arguments.length > 1 ? maxHeight : 0;
	    //     textOnly = arguments.length > 2 ? textOnly : true;
	    //     refresh = arguments.length > 3 ? refresh : true;
	    //     return _realgrid.fitRowHeight(this._view, itemIndex, maxHeight, textOnly, refresh);
	    // }
	    // fitRowHeightAll(maxHeight, textOnly) {
	    //     textOnly = arguments.length > 1 ? textOnly : true;
	    //     return _realgrid.fitRowHeightAll(this._view, maxHeight, textOnly);
	    // }
	    // var h = grid.getRowHeight(item.index);
	    // if (isNaN(h)) h = grid.layoutManager.getItemHeight(item);
	    // h += 4;
	    /**
	     * 행 높이를 지정한 높이로 변경한다.
	     *
	     * @remarks
	     * displayOptions.eachRowResizable: true로 지정되어 있어야 한다.
	     *
	     * @param itemIndex - 높이 변경할 아이템의 인덱스
	     * @param height - 기본값: 0, 0으로 지정시 displayOptions.minRowHeight, maxRowHeight 에 맞게 행 높이가 변경된다. 값 지정시 지정한 행 높이로 변경 된다.
	     * @param refresh - 기본값: true, 변경한 행 높이를 바로 화면에 반영할 것인지의 여부
	     *
	     */
	    GridBase.prototype.setRowHeight = function (itemIndex, height, refresh) {
	        if (height === void 0) { height = 0; }
	        if (refresh === void 0) { refresh = true; }
	        this._view.setRowHeight(itemIndex, height, refresh);
	    };
	    /**
	     * 행 높이를 반환한다.
	     *
	     * @param itemIndex - 높이를 반환할 아이템의 인덱스.
	     *
	     */
	    GridBase.prototype.getRowHeight = function (itemIndex) {
	        var h = this._view.getRowHeight(itemIndex);
	        if (isNaN(h)) {
	            var item = this._view.getItem(itemIndex);
	            h = this._view.layoutManager.getItemHeight(item);
	        }
	        return h;
	    };
	    // clearRowHeights(refresh) {
	    //     refresh = arguments.length > 1 ? refresh : true;
	    //     return _realgrid.clearRowHeights(this._view, refresh);
	    // }
	    // renderers
	    // CellRenderer deprecated. use cellStyleCallback
	    // addCellRenderers(renderers) {
	    //     return this._view.dataCellRenderers().addRenderers(renderers);
	    // }
	    // index
	    /**
	     * 현재 포커스 된 셀의 CellIndex 정보를 반환한다.
	     *
	     */
	    GridBase.prototype.getCurrent = function () {
	        var index = this._view.focusedIndex;
	        return index ? index.proxy() : null;
	    };
	    /**
	     * 포커스 셀의 위치를 지정한다.
	     *
	     * @remarks
	     * row의 경우 itemIndex > dataRow 순으로 적용되고, column의 경우 column > fieldIndex > fieldName 순으로 적용된다.
	     *
	     * @param current - 셀 위치정보.
	     * @param select - ?
	     */
	    GridBase.prototype.setCurrent = function (current, select) {
	        this._view.focusedIndex.assignFrom(current);
	    };
	    /**
	     * current를 첫번째 행, 첫번째 열로 초기화한다.
	     *
	     */
	    GridBase.prototype.resetCurrent = function () {
	        this._view.focusedIndex.reset();
	    };
	    /**
	     * (x, y) 좌표에 해당하는 셀의 위치정보를 반환한다.
	     *
	     * @param x - x 좌표.
	     * @param y - y 좌표.
	     * @returns 셀 위치정보.
	     */
	    GridBase.prototype.mouseToIndex = function (x, y) {
	        var index = this._view.pointToIndex(null, x, y, false);
	        return index ? index.proxy() : null;
	    };
	    /**
	     * 그리드에서 지정한 셀의 좌표값을 반환한다.
	     *
	     *
	     * @param itemIndex - 그리드의 행 번호.
	     * @param column - 컬럼 이름이나 컬럼 정보 객체.
	     * @returns 좌표값, 보이지 않는 영역에 있을 경우 null 이 반환.
	     */
	    GridBase.prototype.getCellBounds = function (itemIndex, column) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        var index = new CellIndex_1.CellIndex(this._view, itemIndex, col);
	        if (col && index) {
	            //const rect = this._view.layoutManager.getDataCellBounds(index);
	            var lm = this._view.layoutManager;
	            var bodyView = lm.getBodyView(index);
	            var rect = bodyView.getCellRectAt(lm, index, true);
	            return {
	                left: rect.x,
	                top: rect.y,
	                width: rect.width,
	                height: rect.height
	            };
	        }
	        else {
	            return null;
	        }
	    };
	    ///// column filters
	    /**
	     * 그리드 컬럼에 filter를 설정한다.
	     *
	     * @remarks
	     * 사용가능한 Operator와 variables는 Expression 참조.
	     *
	     * @param column - 설정 될 컬럼의 이름 또는 컬럼 객체.
	     * @param filters - filter 객체의 배열.
	     *
	     */
	    GridBase.prototype.setColumnFilters = function (column, filters) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.setFilters(filters);
	        }
	    };
	    /**
	     * 컬럼에 등록된 ColumnFilter 들을 제거한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     *
	     */
	    GridBase.prototype.clearColumnFilters = function (column) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.clearFilters();
	        }
	    };
	    /**
	     * 컬럼에 하나 이상의 필터를 등록한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param filters - 등록할 필터 객체의 배열.
	     * @param overwrite - 기본값: false, overwrite가 false시 중복된 이름의 필터가 있을 경우 에러를 발생시킨다.
	     *
	     */
	    GridBase.prototype.addColumnFilters = function (column, filters, overwrite) {
	        if (overwrite === void 0) { overwrite = false; }
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.addFilters(filters, overwrite);
	        }
	    };
	    /**
	     * 컬럼에 등록되어 있는 fllter들 중 filterNames에 포함된 필터명을 갖는 filter들을 제거한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param filterNames - 제거할 필터의 이름 또는 필터들의 이름의 배열.
	     *
	     */
	    GridBase.prototype.removeColumnFilters = function (column, filterNames) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.removeFilters(filterNames);
	        }
	    };
	    /**
	     * 컬럼에 등록된 ColumnFilter들 중, filterNames에 포함된 필터명을 갖는 filter들을 적용시키거나 해제한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param filterNames - 적용 또는 해제할 필터의 이름 혹은 필터들의 이름의 배열.
	     * @param active - true: 적용, false: 해제.
	     *
	     */
	    GridBase.prototype.activateColumnFilters = function (column, filterNames, active) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.activateFilters(filterNames, active);
	        }
	    };
	    /**
	     * 컬럼에 등록된 모든 ColumnFilter들을 적용 또는 해제시킨다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param active - true: 적용, false: 해제.
	     *
	     */
	    GridBase.prototype.activateAllColumnFilters = function (column, active) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.activateAllFilters(active);
	        }
	    };
	    /**
	     * 컬럼에 등록된 ColumnFilter들 중, filterNames에 포함된 필터명을 갖는 filter들을 숨기거나 보여준다.
	     *
	     * @remakrs
	     * active된 filter를 숨기는 경우 active된 상태로 숨겨진다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param filterNames - 필터의 이름 혹은 필터들의 이름의 배열.
	     * @param hide - 기본값: true, true: 숨김, false: 보여줌.
	     *
	     */
	    GridBase.prototype.hideColumnFilters = function (column, filterNames, hide) {
	        if (hide === void 0) { hide = true; }
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.hideColumnFilters(filterNames, hide);
	        }
	    };
	    /**
	     * 컬럼에 등록된 모든 ColumnFilter를 숨기거나 보여준다.
	     *
	     * @remarks
	     * active된 filter를 숨기는 경우 active된 상태로 숨겨진다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param hide - 기본값: true, true: 숨김, false: 보여줌.
	     */
	    GridBase.prototype.hideAllColumnFilters = function (column, hide) {
	        if (hide === void 0) { hide = true; }
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.hideAllColumnFilters(hide);
	        }
	    };
	    /**
	     * 해당 컬럼의 지정한 필터들을 토글한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param filterNames - 토글할 필터의 이름 혹은 필터들의 이름의 배열.
	     *
	     */
	    GridBase.prototype.toggleColumnFilters = function (column, filterNames) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.toggleFilters(filterNames);
	        }
	    };
	    /**
	     * 해당 컬럼의 지정한 모든 필터들을 토글한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     *
	     */
	    GridBase.prototype.toggleAllColumnFilters = function (column) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            col.toggleAllFilters();
	        }
	    };
	    /**
	     * 지정한 컬럼에서 필터 이름에 해당하는 필터를 반환한다.
	     *
	     * @param column - 지정한 컬럼의 이름 또는 컬럼 객체.
	     * @param filterName - 필터 이름.
	     * @returns ColumnFilter와 같은 모델의 필터 오브젝트.
	     *
	     */
	    GridBase.prototype.getColumnFilter = function (column, filterName) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            return col.getFilter(filterName).toProxy();
	        }
	        return null;
	    };
	    /**
	     * 지정한 컬럼에서 필터들을 반환한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @returns ColumnFilter와 같은 모델의 필터 오브젝트의 배열.
	     *
	     */
	    GridBase.prototype.getColumnFilters = function (column) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            var filters = col.getFilters();
	            var proxy = [];
	            for (var i = 0, l = filters.length; i < l; i++) {
	                proxy.push(filters[i].toProxy());
	            }
	            return proxy;
	        }
	        return null;
	    };
	    /**
	     * 등록된 ColumnFilter들 중 적용된 필터 또는 해제된 필터의 이름을 반환한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @param active - 기본값: true, true: 등록된 필터 반환, false: 해제된 필터 반환.
	     * @returns active 상태에 해당하는 ColumnFilter와 같은 모델의 필터 오브젝트의 배열.
	     *
	     */
	    GridBase.prototype.getActiveColumnFilters = function (column, active) {
	        if (active === void 0) { active = true; }
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            var filters = col.getActiveFilters(active);
	            var proxy = [];
	            for (var i = 0, l = filters.length; i < l; i++) {
	                proxy.push(filters[i].toProxy());
	            }
	            return proxy;
	        }
	        return null;
	    };
	    /**
	     * 그리드의 특정 컬럼이 필터링 되어 있는지 여부를 반환한다.
	     *
	     * @param column - 해당하는 컬럼의 이름 또는 컬럼 객체.
	     * @returns 필터링 여부.
	     *
	     */
	    GridBase.prototype.isFiltered = function (column) {
	        var col = ViewDelegateUtils.getColumn(this._view, column);
	        if (col instanceof GridColumn_2.DataColumn) {
	            return col.isFiltered();
	        }
	        return false;
	    };
	    /// values
	    /**
	     * 지정한 itemIndex의 값들을 JSON객체로 반환한다.
	     *
	     * @remarks
	     * itemIndex와 연결된 dataRow는 return되는 객체의 __rowId에 담겨있다.
	     *
	     * @param itemIndex - 정보를 가져올 아이템의 ItemIndex.
	     * @returns 입력된 itemIndex가 dataRow와 연결된 행이 아닌경우 null이 출력된다.
	     *
	     */
	    GridBase.prototype.getValues = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        return item ? ViewDelegateUtils.getValues(this._view, item) : null;
	    };
	    /**
	     * 지정한 itemIndex의 여러 필드의 값을 수정한다.
	     *
	     * @param itemIndex - 정보를 가져올 아이템의 ItemIndex.
	     * @param values - 수정할 필드와 필드 값들.
	     * @param strict - 기본값: false, true 일때 필드의 값을 undefined로 지정한 경우 기존의 값을 유지한다.
	     *
	     */
	    GridBase.prototype.setValues = function (itemIndex, values, strict) {
	        if (strict === void 0) { strict = false; }
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            ViewDelegateUtils.setValues(this._view, item, values, strict);
	        }
	    };
	    /**
	     * Grid Item 인덱스와 데이터 필드 인덱스로 지정되는 데이터셀의 값을 반환한다.
	     *
	     * @remarks
	     * 선택된 행이 수정중인 경우 수정된 값을 반환한다. 편집이 완료되지 않은 셀의 값은 가져올수 없다.
	     *
	     * @param itemIndex - 아이템 인덱스.
	     * @param field - 필드 인덱스 또는 필드 네임.
	     * @returns 데이터 필드의 값.
	     *
	     */
	    GridBase.prototype.getValue = function (itemIndex, field) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var fld = typeof field === 'string' ? this._dataProvider.getFieldIndex(field) : field;
	            return item.getData(fld);
	        }
	        return null;
	    };
	    /**
	     * Grid Item 인덱스와 데이터 필드 인덱스로 지정되는 데이터셀의 값을 변경한다.
	     *
	     * @remarks
	     * 그리드가 편집중인경우 편집중인 itemIndex의 값만 변경할수 있으며 편집이 완료된후 dataProvider에 값이 반영되고 편집중이 아닌경우 dataProvider에 즉시 반영된다.
	     *
	     * @param itemIndex - 아이템 인덱스.
	     * @param field - 필드 인덱스 또는 필드 네임.
	     * @param value - 필드에 설정할 값.
	     *
	     */
	    GridBase.prototype.setValue = function (itemIndex, field, value) {
	        var fld = typeof field === 'string' ? this._dataProvider.getFieldIndex(field) : field;
	        this._view.setValueAt(itemIndex, fld, value);
	    };
	    /**
	     * 그리드가 편집 중일때 현재 수정 중인 셀의 값을 반환한다.
	     *
	     * @returns 데이터 필드의 값.
	     *
	     */
	    GridBase.prototype.getEditValue = function () {
	        return this._view.getEditCellValue();
	    };
	    /**
	     * 포커스가 위치한 셀에 값을 설정한다.
	     *
	     * @param value - 설정하려는 값을 지정한다.
	     * @param startEdit - 기본값: false, true: 셀이 편집중이 아닌 경우 값을 설정하고 에디터를 표시. false: 값을 설정하지 않음.
	     * @param dropdown - 기본값: true, false: dropdownCellEditor, dateCellEditor등과 같이 dropdown이 되는 editor의 경우 dropdown을 표시하지 않는다.
	     *
	     */
	    GridBase.prototype.setEditValue = function (value, startEdit, dropdown) {
	        if (startEdit === void 0) { startEdit = false; }
	        if (dropdown === void 0) { dropdown = true; }
	        this._view.setEditCellValue(value, startEdit, dropdown);
	    };
	    // imageList deprecated 
	    // registerImageList (imageList) {
	    //     imageList && this._view.registerImageList(imageList._src);
	    // }
	    /**
	     * 사용자 지정의 렌더러를 등록한다.
	     *
	     * @remarks
	     * 두 가지 방법을 통해 등록할 수 있다.
	     * 첫번째는 오브젝트의 프로퍼티로 CustomRenderer와 같은 모델로 만들어 준 후 등록하는 것이다.
	     * 두번째는 RealGrid.CustomRenderer를 상속받은 클래스를 정의한 후 등록하는 것이다.
	     *
	     * @param type - 사용자가 지정한 렌더러 종류 (이름).
	     * @param renderer - CustomRenderer와 같은 모델의 오브젝트.
	     *
	     */
	    GridBase.prototype.registerCustomRenderer = function (type, renderer) {
	        this._view.registerCustomRenderer(type, renderer);
	    };
	    /**
	     * 사용자 지정의 렌더러를 등록 해제 한다.
	     *
	     * @param type - 해제 할 렌더러 종류 (이름).
	     *
	     */
	    GridBase.prototype.unregisterCustomRenderer = function (type) {
	        this._view.unregisterCustomRenderer(type);
	    };
	    /**
	     * 모든 사용자 지정의 렌더러를 등록 해제 한다.
	     */
	    GridBase.prototype.unregisterAllCustomRenderer = function () {
	        this._view.unregisterAllCustomRenderer();
	    };
	    // menu
	    /**
	     * 그리드에 Popup Menu를 추가한다.
	     *
	     * @remarks
	     * 추가된 메뉴는 데이터셀 등에 연결할 수 있다.
	     *
	     * @param name - 메뉴 이름.
	     * @param menuItems - 계층적 구조의 메뉴 정보.
	     *
	     */
	    GridBase.prototype.addPopupMenu = function (name, menuItems) {
	        this._view.addPopupMenu(name, menuItems);
	    };
	    /**
	     * 그리드에서 오른쪽 마우스를 클릭했을때 표시되는 컨텍스트 메뉴에 추가할 메뉴 항목들을 지정한다.
	     *
	     * @remarks
	     * 메뉴가 클릭되면 onContextMenuItemClicked callback을 호출한다.
	     *
	     * @param menuItems - 메뉴 정보 배열.
	     *
	     */
	    GridBase.prototype.setContextMenu = function (menuItems) {
	        this._view.setContextMenu(menuItems);
	    };
	    // editing
	    /**
	     * 현재 선택된 영역 정보를 반환한다.
	     *
	     */
	    GridBase.prototype.getSelection = function () {
	        return this._view.getSelection();
	    };
	    /**
	     * 그리드에서 선택할 영역을 지정한다. SelectionItem이 설정모델이다.
	     *
	     * @param item - SelectionItem 모델과 같은 설정 정보. SelectionItem 중 선택하고자 하는 영역의 속성만 전달하면 된다.
	     *
	     */
	    GridBase.prototype.setSelection = function (item) {
	        if (item.style && typeof item.style == 'string') {
	            var style = Selections.SelectionStyle[item.style] || Selections.SelectionStyle.BLOCK;
	            var startItem = 0, endItem = 0;
	            var startColumn = void 0, endColumn = void 0;
	            if (item.hasOwnProperty("startItem")) {
	                startItem = item.startItem;
	            }
	            else if (item.hasOwnProperty("startRow")) {
	                startItem = this._view.getItemIndexOfRow(item.startRow);
	            }
	            else if (style != 'singleColumn' && style != 'columns') {
	                return;
	            }
	            if (item.hasOwnProperty("endItem")) {
	                endItem = item.endItem;
	            }
	            else if (item.hasOwnProperty("endRow")) {
	                endItem = this._view.getItemIndexOfRow(item.endRow);
	            }
	            else if (style != 'singleColumn' && style != 'columns') {
	                return;
	            }
	            var start = new CellIndex_1.CellIndex(this._view, startItem, startColumn);
	            var end = new CellIndex_1.CellIndex(this._view, endItem, endColumn);
	            this._view.clearSelection();
	            this._view.selections.add(start, end, style);
	        }
	    };
	    /**
	     * 선택 영역을 제거한다.
	     *
	     */
	    GridBase.prototype.clearSelection = function () {
	        this._view.clearSelection();
	    };
	    /**
	     * 현재 선택된 행(itemIndex)들을 반환한다.
	     *
	     */
	    GridBase.prototype.getSelectedItems = function () {
	        var rows = this._view.getSelectedRows();
	        return this._view.getItemIndiciesOfRows(rows);
	    };
	    /**
	     * 현재 선택된 데이터 행(dataRow)들을 반환한다.
	     *
	     */
	    GridBase.prototype.getSelectedRows = function () {
	        return this._view.getSelectedRows();
	    };
	    /**
	     * 현재 선택된 행들을 삭제한다.
	     *
	     * @remarks
	     * grid.editOptions.deletable이 false인 경우 작동하지 않는다.
	     *
	     * @param force - true면 설정에 상관없이 선택된 행들을 삭제한다.
	     *
	     */
	    GridBase.prototype.deleteSelection = function (force) {
	        this._view.deleteSelection(force);
	    };
	    /**
	     * 현재 선택 영역에 포함된 셀들의 값을 반환한다.
	     *
	     * @param maxRows - 반환할 최대 행의 개수. 기본값: -1. 0보다 작은 값이면 제한 없이 모든 행을 반환한다.
	     * @returns 셀 데이터들
	     *
	     */
	    GridBase.prototype.getSelectionData = function (maxRows) {
	        if (maxRows === void 0) { maxRows = -1; }
	        if (this._view.selections.count > 0) {
	            var item = this._view.selections.getItem(0);
	            return item.getData(maxRows);
	        }
	        return null;
	    };
	    /**
	     * 선택한 영역에 포함된 셀들의 정보를 복사 혹은 반환한다.
	     *
	     * @remarks
	     *
	     * @param selection - 선택 영역의 정보.
	     * @param copy - 기본값: true, true: 클립보드에 복사, false: 반환.
	     * @returns copy = false 시 반환.
	     *
	     */
	    GridBase.prototype.copyToClipboard = function (selection, copy) {
	        if (copy === void 0) { copy = true; }
	        return this._view.toClipboard(selection, copy);
	    };
	    // editor
	    /**
	     * 현재 Editor의 내용을 Cell에 반영한다.
	     *
	     * @remarks
	     * 실행 후 onEditCommit -> onEditRowChanged -> onCellEdited 이벤트가 순차적으로 발생한다.
	     *
	     * @param hideEditor 기본값: true, Editor의 종료 여부를 지정.
	     *
	     */
	    GridBase.prototype.commitEditor = function (hideEditor) {
	        if (hideEditor === void 0) { hideEditor = true; }
	        this._view.commitEditor(hideEditor);
	    };
	    /**
	     * 편집 중인 행의 편집을 완료하고 DataProvider에 저장한다.
	     *
	     * @param force - 기본값: false, true: 입력/편집 중 편집을 취소한 행(RowState 변경은 없고, Indicator에 편집으로 표시된)을 commit.
	     * @returns  데이터 변경이 발생한 경우 true 반환.
	     */
	    GridBase.prototype.commit = function (force) {
	        if (force === void 0) { force = false; }
	        return this._view.commit(force);
	    };
	    /**
	     * 현재 편집 중인 행의 편집을 취소한다.
	     *
	     * @remarks
	     * 편집 중이 아니라면 아무 일도 하지 않는다.
	     * 편집을 완료할 때는 commit()을 호출한다.
	     *
	     * @param itemIndex - 높이 변경할 아이템의 인덱스.
	     * @returns 취소 성공 여부.
	     *
	     */
	    GridBase.prototype.cancel = function () {
	        return this._view.cancel();
	    };
	    // fillEditSearchItems (column, searchKey, values, labels) {
	    //     var col = _realgrid.$_getColumn(this._view, column);
	    //     this._view.fillEditSearchItems(col, searchKey, values, labels);
	    // }
	    /**
	     * 그리드가 현재 편집중이면 true를 반환한다.
	     *
	     */
	    GridBase.prototype.isItemEditing = function () {
	        return this._view.isItemEditing();
	    };
	    /**
	     * 그리드가 현재 편집중이면 true를 반환한다.
	     *
	     */
	    GridBase.prototype.isEditing = function () {
	        return this._view.isEditing();
	    };
	    /**
	     * 현재 위치한 셀에서 그리드의 editor를 표시한다.
	     *
	     * @remarks
	     * 그리드가 편집 불가 상태(editable: false)라면 editor는 표시되지 않는다.
	     *
	     */
	    GridBase.prototype.showEditor = function (dropdown) {
	        if (dropdown === void 0) { dropdown = false; }
	        this._view.showEditor(null, null, dropdown);
	    };
	    /**
	     * 현재 그리드에서 열려진 editor를 닫는다.
	     *
	     */
	    GridBase.prototype.hideEditor = function () {
	        this._view.hideEditor();
	    };
	    /**
	     * 편집을 취소하고 에디터 창을 닫는다.
	     *
	     */
	    GridBase.prototype.cancelEditor = function () {
	        this._view.cancelEditor(true);
	    };
	    // validation
	    /**
	     * 행(row) 수준의 편집 EditValidation 목록을 설정한다.
	     *
	     * @param value - EditValidation 모델과 같은 설정 정보들의 배열.
	     *
	     */
	    GridBase.prototype.setValidations = function (value) {
	        this._view.validations.assign(value);
	    };
	    /**
	     * 입력시 검증하는 것이 아닌 그리드에 있는 데이터들을 대상으로 일괄로 검증을 수행한다.
	     *
	     * @remarks
	     * column validation을 사용하여 검증을 수행하며 row validation은 하지 않는다.
	     *
	     * @param itemIndices - 그리드의 행 번호들, null로 지정하면 그리드 전체 행을 대상으로 검증을 수행.
	     * @param visibleOnly - 기본값: True, false이면 트리 그리드의 접혀있는 노드등 보이지 않는 행들도 검증 대상에 포함. false는 전체 행을 체크하는 경우에만 적용.
	     * @returns 검증에 실패한 셀 정보들.
	     *
	     */
	    GridBase.prototype.checkValidateCells = function (itemIndices, visibleOnly) {
	        if (visibleOnly === void 0) { visibleOnly = true; }
	        return this._view.checkValidateCells(itemIndices, visibleOnly);
	    };
	    /**
	     * 값 검증에 실패한 셀 정보들을 반환한다.
	     *
	     * @remarks
	     * 이 함수는 gridBase.checkValidateCells()를 먼저 실행한 후 검증에 실패한 데이터를 수정 후 다시 검증할 때 사용한다.
	     *
	     * @returns 검증에 실패한 셀 정보들
	     *
	     */
	    GridBase.prototype.getInvalidCellList = function () {
	        return this._view.getInvalidCellList();
	    };
	    /**
	     * 값 검증에 실패한 셀 정보들을 삭제한다.
	     *
	     * @remarks
	     * 이 함수는 gridBase.checkValidateCells()를 먼저 실행한 후 가져온 검증에 실패한 데이터의 목록을 지울때 사용한다.
	     *
	     */
	    GridBase.prototype.clearInvalidCellList = function () {
	        return this._view.clearInvalidCellList();
	    };
	    // items
	    /**
	     * 그리드가 편집중인 item의 정보를 반환한다.
	     *
	     * @returns 편집중인 그리드 item의 정보. 편집 중이 아닌 경우 null 반환.
	     *
	     */
	    GridBase.prototype.getEditingItem = function () {
	        var item = this._view.getEditItem();
	        if (item) {
	            var ds = this._dataProvider;
	            var itemData = item.getRowData();
	            var vals = {};
	            for (var i = ds.fieldCount, j = itemData.length; i-- && j--;) {
	                vals[ds.getOrgFieldName(i)] = itemData[i];
	            }
	            return {
	                itemIndex: item.index,
	                dataRow: item.dataRow,
	                values: vals
	            };
	        }
	        return null;
	    };
	    /**
	     * 그리드 Item의 상태값을 반환한다.
	     *
	     * @param itemIndex - 상태를 가져오려는 itemIndex.
	     * @returns 그리드 item의 상태값. 편집중이거나,추가,입력중이 아닌경우 “normal”이 출력된다. 편집:”updating”, 추가:”appending”, 삽입:”inseting”이 출력된다. 입력된 itemIndex가 현재 선택된 itemIndex인 경우 “focused”가 출력된다.
	     *
	     */
	    GridBase.prototype.getItemState = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var state = item.itemState;
	            if (state == GridItem_1.ItemState.NORMAL && this._view.focusedIndex.itemIndex == item.index) {
	                state = GridItem_1.ItemState.FOCUSED;
	            }
	            return state;
	        }
	        return null;
	    };
	    // toast
	    /**
	     * Toast 팝업 창을 표시한다.
	     *
	     * @param options - 메시지와 메시지 표시여부를 지정, 기본적으로 메시지만 지정해도 된다.
	     * @param force - 기존 toast창이 표시되어 있을때 강제로 다시 표시 여부를 지정한다.
	     *
	     */
	    GridBase.prototype.showToast = function (options, force) {
	        this._view.showToast(options, force);
	    };
	    /**
	     * Toast 팝업 창을 숨긴다.
	     *
	     * @param action - toast창을 숨긴 뒤 수행할 콜백함수를 지정한다.
	     *
	     */
	    GridBase.prototype.hideToast = function (action) {
	        this._view.hideToast(action);
	    };
	    // lookups
	    /**
	     * lookup tree에서 사용할 lookup source들을 등록한다.
	     *
	     * @remarks
	     * 추가등록되는 lookup source가 기존것과 중복되는경우 overwrite된다.
	     * ※ 기존id에 추가를 원하는 경우는 fillLookupData()를 사용한다.
	     *
	     * @param sources - LookupSource 정보 배열.
	     *
	     */
	    GridBase.prototype.setLookups = function (sources) {
	        this._view.setLookups(sources);
	    };
	    /**
	     * lookup tree에서 사용할 lookup source를 추가 등록한다.
	     *
	     * @remarks
	     * 추가등록되는 lookup source가 기존것과 중복되는경우 overwrite된다.
	     * ※ 기존id에 추가를 원하는 경우는 fillLookupData를 사용한다.
	     *
	     * @param source - LookupSource 오브젝트.
	     *
	     */
	    GridBase.prototype.addLookupSource = function (source) {
	        this._view.addLookupSource(source);
	    };
	    /**
	     * 지정한 룩업 소스를 삭제한다.
	     *
	     * @param sourceId - 삭제할 LookupSource id.
	     *
	     */
	    GridBase.prototype.removeLookupSource = function (sourceId) {
	        this._view.removeLookupSource(sourceId);
	    };
	    /**
	     * 지정된 lookupsource에 지정된 키가 존재하는지 여부를 반환한다
	     *
	     *
	     * @param sourceId - LookupSource의 Id.
	     * @param keys - 찾을 키 값, 값들.
	     *
	     */
	    GridBase.prototype.existsLookupData = function (sourceId, keys) {
	        return this._view.existsLookupData(sourceId, keys);
	    };
	    /**
	     * lookupSource에 lookupData를 추가한다.
	     *
	     * @remarks
	     *
	     * @param sourceId - LookupSource의 id.
	     * @param data - LookupData Object.
	     *
	     */
	    GridBase.prototype.fillLookupData = function (sourceId, data) {
	        this._view.fillLookupData(sourceId, data);
	    };
	    /**
	     * 지정된 SourceId에 해당하는 lookup source를 clear한다.
	     *
	     * @param sourceId - LookupSource의 id.
	     *
	     */
	    GridBase.prototype.clearLookupData = function (sourceId) {
	        this._view.clearLookupData(sourceId);
	    };
	    // checked
	    /**
	     * 지정한 itemIndex의 CheckBar에 체크의 가능 여부를 반환한다.
	     *
	     * @param itemIndex - 아이템의 index.
	     * @returns true: 체크 가능한 상태.
	     */
	    GridBase.prototype.isCheckable = function (itemIndex) {
	        return this._view.isCheckable(itemIndex);
	    };
	    /**
	     * 지정한 itemIndex의 CheckBar에 checkable 상태를 지정한다.
	     *
	     * @param itemIndex - 아이템의 index.
	     * @param value - checkable 상태.
	     *
	     */
	    GridBase.prototype.setCheckable = function (itemIndex, value) {
	        this._view.setCheckable(itemIndex, value);
	    };
	    /**
	     * CheckBar에 체크가 되어있으면 true를 반환한다.
	     *
	     * @param itemIndex - 아이템의 index.
	     *
	     */
	    GridBase.prototype.isCheckedItem = function (itemIndex) {
	        return this._view.isCheckedItem(itemIndex);
	    };
	    /**
	     * 입력된 dataRow와 연결된 item이 체크되어있으면 true를 반환한다.
	     *
	     * @param row - dataRow의 index.
	     *
	     */
	    GridBase.prototype.isCheckedRow = function (row) {
	        return this._view.isCheckedRow(row);
	    };
	    /**
	     * 지정된 아이템을 체크하거나 해제한다.
	     *
	     * @param itemIndex - 아이템의 index.
	     * @param checked - 기본값: true, true: 체크, false: 체크 해제.
	     * @param exclusive - 기본값: false, true: 체크된 다른아이템이 있는 경우 모두 해제하고 itemIndex로 입력된 아이템만 체크.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부를 지정.
	     *
	     */
	    GridBase.prototype.checkItem = function (itemIndex, checked, exclusive, checkEvent) {
	        if (checked === void 0) { checked = true; }
	        if (exclusive === void 0) { exclusive = false; }
	        if (checkEvent === void 0) { checkEvent = true; }
	        this._view.checkItem(itemIndex, checked, exclusive, checkEvent);
	    };
	    /**
	     * 지정된 row의 데이터행을 체크하거나 해제한다.
	     *
	     * @param row - dataRow의 index.
	     * @param checked - 기본값: true, true: 체크, false: 체크 해제.
	     * @param exclusive - 기본값: false, true: 체크된 다른아이템이 있는 경우 모두 해제하고 row로 입력된 아이템만 체크.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부를 지정.
	     *
	     */
	    GridBase.prototype.checkRow = function (row, checked, exclusive, checkEvent) {
	        if (checked === void 0) { checked = true; }
	        if (exclusive === void 0) { exclusive = false; }
	        if (checkEvent === void 0) { checkEvent = true; }
	        this._view.checkRow(row, checked, exclusive, checkEvent);
	    };
	    /**
	     * 입력된 아이템배열에 해당하는 아이템을 체크하거나 해제한다.
	     *
	     * @param itemIndicies - 아이템 index 배열.
	     * @param checked - 기본값: true, true: 체크, false: 체크 해제.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부를 지정.
	     *
	     */
	    GridBase.prototype.checkItems = function (itemIndicies, checked, checkEvent) {
	        if (checked === void 0) { checked = true; }
	        if (checkEvent === void 0) { checkEvent = true; }
	        this._view.checkItems(itemIndicies, checked, checkEvent);
	    };
	    /**
	     * 입력된 dataRow들과 연결된 Item을 체크하거나 해제한다.
	     *
	     * @param rows - dataRow의 index 배열.
	     * @param checked 기본값: true, true: 체크, false: 체크 해제.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부를 지정.
	     *
	     */
	    GridBase.prototype.checkRows = function (rows, checked, checkEvent) {
	        if (checked === void 0) { checked = true; }
	        if (checkEvent === void 0) { checkEvent = true; }
	        this._view.checkRows(rows, checked, checkEvent);
	    };
	    /**
	     * 그리드의 데이터행을 모두 체크,해제한다.
	     *
	     * @remarks
	     * CheckBar의 exclusive에 영향을 받지않는다.
	     *
	     * @param checked - 기본값: true, true: 체크, false: 체크 해제.
	     * @param visibleOnly - collapse로 인해 접혀서 보이지 않는 행의 포함여부.
	     * @param checkableOnly - 체크가능한 행만 체크할 것인지의 여부.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부를 지정.
	     *
	     */
	    GridBase.prototype.checkAll = function (checked, visibleOnly, checkableOnly, checkEvent) {
	        if (checked === void 0) { checked = true; }
	        if (visibleOnly === void 0) { visibleOnly = false; }
	        if (checkableOnly === void 0) { checkableOnly = true; }
	        if (checkEvent === void 0) { checkEvent = true; }
	        this._view.checkAll(checked, visibleOnly, checkableOnly, checkEvent);
	    };
	    /**
	     * CheckBar에 설정된 옵션으로 그리드의 데이터행을 모두 체크 또는 해제한다.
	     *
	     * @remarks
	     * CheckBar의 exclusive에 영향을 받지않는다.
	     * onItemChecked()는 발생하지 않는다.
	     * CheckBar|CheckBar.head의 v 표시를 활성 상태로 적용시킨다.
	     *
	     * @param checked - 기본값: true, true: 체크, false, 해제.
	     * @param itemChecked - 기본값: true, CheckBar.head의 v표시 활성 여부.
	     *
	     */
	    GridBase.prototype.setAllCheck = function (checked, itemChecked) {
	        if (checked === void 0) { checked = true; }
	        if (itemChecked === void 0) { itemChecked = true; }
	        this._view.setAllCheck(checked, itemChecked);
	    };
	    /**
	     * 모든 아이템들이 체크되어있는지 여부를 반환한다.
	     *
	     * @returns CheckBar|CheckBar.head의 v 표시가 활성 상태이면 true를 반환한다.
	     *
	     */
	    GridBase.prototype.isAllChecked = function () {
	        return this._view.allChecked;
	    };
	    /**
	     * CheckBar에 적용된 모든 행의 Checkable 상태를 초기화 한다.
	     *
	     * @param clearExpression - true이면 CheckBar의 checkableExpression을 clear시킨다.
	     *
	     */
	    GridBase.prototype.resetCheckables = function (clearExpression) {
	        this._view.resetCheckables();
	        if (clearExpression) {
	            this._view.checkBar.checkableExpression = null;
	        }
	    };
	    /**
	     * CheckBar에 Expression 기준으로 checkable을 적용한다.
	     *
	     */
	    GridBase.prototype.applyCheckables = function () {
	        this._view.applyCheckables();
	    };
	    /**
	     * CheckBar에 checkableExpression 설정한 후 적용을 동시에 수행할 수 있다.
	     *
	     * @param expression - 체크 가능 여부의 수식.
	     * @param apply - 기본값: true, 즉시 적용 여부.
	     *
	     */
	    GridBase.prototype.setCheckableExpression = function (expression, apply) {
	        if (apply === void 0) { apply = true; }
	        this._view.checkBar.checkableExpression = expression;
	        apply && this._view.applyCheckables();
	    };
	    // summary
	    /**
	     * Field의 합계값을 반환한다.
	     *
	     * @remarks
	     * summaryMode에 따라서 가져올수 있는 값이 다르다.
	     * dataType이 “number”인 field만 합계값을 가져올수 있다.
	     * summaryMode가 none인 경우 미리 계산을 해 놓지 않는다.
	     * summaryMode가 aggregate인 경우 “sum”,”avg”,”min”,’max”,”count”를 가져올수 있다.
	     * statistical인 경우 “var”,”varp”,”stdev”,”stdevp”을 추가적으로 가져올수 있다.
	     * “datacount” - 미구현
	     *
	     * @param field - 해당 필드명 혹은 index.
	     * @param type - 기본값: "sum", 다른 속성값은 getSummary 본문 참조.

	     * @returns
	     */
	    GridBase.prototype.getSummary = function (field, type) {
	        var summarizer = this._view.summarizer;
	        var fld = typeof field === 'string' ? this._dataProvider.getFieldIndex(field) : field;
	        if (fld == -1)
	            return null;
	        switch (type) {
	            case "count":
	                return summarizer.getCount(fld);
	            case "sum":
	                return summarizer.getSum(fld);
	            case "max":
	                return summarizer.getMax(fld);
	            case "min":
	                return summarizer.getMin(fld);
	            case "avg":
	                return summarizer.getAvg(fld);
	            case "var":
	                return summarizer.getVar(fld);
	            case "varp":
	                return summarizer.getVarp(fld);
	            case "stdev":
	                return summarizer.getStdev(fld);
	            case "stdevp":
	                return summarizer.getStdevp(fld);
	            case "datacount":
	                return summarizer.getDataCount(fld);
	            // case "dataavg":
	            //     return summarizer.get getDataAvg(fld);
	        }
	    };
	    // // TODO: item model 
	    // getModel (itemIndex: number, extended = false) {
	    //     const item = this._view.getItem(itemIndex);
	    //     return item && ViewDelegateUtils.getItemProxy(item, extended);
	    // }
	    // getModelAs (itemIndex: number, itemType, extended) {
	    //     return _realgrid.getModelAs(this._view, itemIndex, itemType, extended);
	    // }
	    // getGroupModel (itemIndex: number, extended) {
	    //     return _realgrid.getGroupModel(this._view, itemIndex, extended);
	    // }
	    // getParentModel (model, extended) {
	    //     return _realgrid.getParentModel(this._view, model, extended);
	    // }
	    // getRootModel (model, extended) {
	    //     return _realgrid.getRootModel(this._view, model, extended)
	    // }
	    // getChildModels (model, extended) {
	    //     return _realgrid.getChildModels(this._view, model, extended);
	    // }
	    // getDescendantModels(model, extended) {
	    //     return _realgrid.getDescendantModels(this._view, model, extended);
	    // }
	    // getChildModel (model, index, extended) {
	    //     return _realgrid.getChildModel(this._view, model, index, extended);
	    // }
	    // getModels (itemIndices, extended) {
	    //     return _realgrid.getModels(this._view, itemIndices, extended);
	    // }
	    // getModelOfRow (dataRow, extended) {
	    //     return _realgrid.getModelOfRow(this._view, dataRow, extended);
	    // }
	    // getModelsOfRows (dataRows, extended) {
	    //     return _realgrid.getModelsOfRows(this._view, dataRows, extended);
	    // }
	    // expandModel (model, recursive, force) {
	    //     recursive = arguments.length > 1 ? recursive : false;
	    //     force = arguments.length > 2 ? force : false;
	    //     _realgrid.expandModel(this._view, model, recursive, force);
	    // }
	    // collapseModel (model, recursive) {
	    //     recursive = arguments.length > 1 ? recursive : false;
	    //     _realgrid.collapseModel(this._view, model, recursive);
	    // }
	    // getGroupSummary (model, field, statistical) {
	    //     return _realgrid.getGroupSummary(this._view, model, field, statistical);
	    // }
	    // data cell styles deprecated
	    // hasCellStyle (id) {
	    //     return _realgrid.hasCellStyle(this._view, id);
	    // }
	    // addCellStyle (id, cellStyle, overwrite) {
	    //     overwrite = arguments.length > 2 ? overwrite : false;
	    //     _realgrid.addCellStyle(this._view, id, cellStyle, overwrite);
	    // }
	    // addCellStyles (cellStyles, overwrite) {
	    //     overwrite = arguments.length > 1 ? overwrite : false;
	    //     _realgrid.addCellStyles(this._view, cellStyles, overwrite);
	    // }
	    // removeCellStyles (ids) {
	    //     _realgrid.removeCellStyles(this._view, ids);
	    // }
	    // removeAllCellStyles () {
	    //     _realgrid.removeAllCellStyles(this._view);
	    // }
	    // setCellStyle (dataRow, field, styleId, updateNow) {
	    //     updateNow = arguments.length > 3 ? updateNow : true;
	    //     this._view.setDataCellStyle(dataRow, field, styleId, updateNow);
	    // }
	    // setCellStyles (dataRows, fields, styleId) {
	    //     this._view.setDataCellStyles(dataRows, fields, styleId);
	    // }
	    // setCellStyleRows (rows, fieldMap) {
	    //     this._view.setDataCellStyleRows(rows, fieldMap);
	    // }
	    // clearCellStyles () {
	    //     this._view.clearDataCellStyles();
	    // }
	    // getCellStyle (dataRow, field) {
	    //     return this._view.getDataCellStyleId(dataRow, field);
	    // }
	    // getCellApplyStyles (itemIndex, column) {
	    //     return _realgrid.getCellApplyStyles(this._view, itemIndex, column);  
	    // }
	    // progress : No Defined
	    // showProgress (modal) {
	    //     this._view.progressPan showProgress(modal);
	    // }
	    // setProgress (min, max, position, message) {
	    //     this._view.setProgress(min, max, position, message);
	    // }
	    // closeProgress () {
	    //     this._view.closeProgress();
	    // }
	    // // search : No defined 
	    // searchItem (options) {
	    //     this._view.search
	    //     if (options) {
	    //         var fields = options.fields;
	    //         var values = options.values;
	    //         var startIndex = options.startIndex !== undefined ? options.startIndex : 0;
	    //         var wrap = options.wrap !== undefined ? options.wrap : true;
	    //         var select = options.select !== undefined ? options.select : true;
	    //         return this._view.searchItem(fields, values, options, startIndex, wrap, select);
	    //     }
	    //     return -1;
	    // }
	    // searchCell (options) {
	    //     if (options) {
	    //         var fields = options.fields;
	    //         var value = options.value;
	    //         var startItemIndex = options.startItemIndex !== undefined ? options.startItemIndex : 0;
	    //         var startFieldIndex = options.startFieldIndex !== undefined ? options.startFieldIndex : 0;
	    //         var wrap = options.wrap !== undefined ? options.wrap : true;
	    //         var select = options.select !== undefined ? options.select : true;
	    //         return this._view.searchCell(fields, value, options, startItemIndex, startFieldIndex, wrap, select);
	    //     }
	    //     return null;
	    // }
	    // deprecated
	    // resetSize (callback) {
	    //     _realgrid.resetSize(this._view, callback);
	    // }
	    // resetShadowDom () {
	    //     _realgrid.resetShadowDom(this._view); 
	    // }
	    // setShadowDomOptions (options) {
	    //     _realgrid.setShadowDomOptions(this._view, options);
	    // }
	    /**
	     * 필터박스 또는 DropDown Editor를 닫는다.
	     *
	     */
	    GridBase.prototype.closeList = function () {
	        this._view.closePopups();
	    };
	    // // excel
	    /**
	     * 지정한 설정에 따라 현재 그리드의 모양과 데이터를 외부 문서로 내보낸다.
	     *
	     * @param options - GridExportOptions과 같은 설정 모델.
	     *
	     */
	    GridBase.prototype.exportGrid = function (options) {
	        if (options.type === "csv") {
	            var opts = new ExportOptions.ExportBaseOptions(options);
	            new CsvExpoerters.GridCsvExporter().export(this._view, opts);
	            // } else if (options.type === "excel") {
	            //     const opts = new GridMultiExportOptions(this._view, options);
	            //     new GridExcelExporter().export(this._view, opts); 
	        }
	    };
	    /**
	     * 현재를 기준으로 페이지를 이동한다.
	     *
	     * @param offset - 현재를 기준으로 이동하려는 페이지 수. 이전 페이지는 음수.
	     *
	     */
	    GridBase.prototype.scrollPage = function (offset) {
	        this._view.layoutManager['_vscrollBar']['_doScroll']()("pageDown", offset, 0);
	    };
	    // setLeftCol (value: number) {
	    //     this._view.layoutManager.setLeftCol(value);
	    // }
	    // setRightCol (value: number) {
	    //     this._view.layoutManager.setRightCol(arguments.length > 0 ? value : 0);
	    // }
	    /**
	     * 그리드 맨 위의 지정한 행의 index를 반환한다.
	     *
	     */
	    GridBase.prototype.getTopItem = function () {
	        return this._view.topIndex;
	    };
	    /**
	     * 그리드 맨 위에 지정한 행이 위치한다.
	     *
	     * @param itemIndex - 기본값: 0, 그리드 상단에 위치하고자 하는 행의 index.
	     *
	     */
	    GridBase.prototype.setTopItem = function (itemIndex) {
	        if (itemIndex === void 0) { itemIndex = 0; }
	        this._view.topIndex = itemIndex;
	    };
	    /**
	     * 가장 왼쪽 화면에 표시되고 있는 컬럼의 x 좌표값을 반환한다.
	     *
	     */
	    GridBase.prototype.getLeftPos = function () {
	        return this._view.leftPos;
	    };
	    /**
	     * 그리드 왼쪽 경계가 지정한 값에 위치한다.
	     *
	     * @param position - x좌표 값.
	     *
	     */
	    GridBase.prototype.setLeftPos = function (position) {
	        this._view.leftPos = position;
	    };
	    /**
	     * 그리드가 위치한 div를 반환한다.
	     *
	     */
	    GridBase.prototype.getContainer = function () {
	        return this._view.container['_containerDiv'];
	    };
	    // reprepareEditor () {
	    //     this._view.reprepareEditor();
	    // }
	    /**
	     * 그리드를 해제한다.
	     *
	     */
	    GridBase.prototype.destroy = function () {
	        this.dispose();
	    };
	    // clearWindowEventListeners () {
	    //     return this._view.clearWindowEventListeners();
	    // }
	    /**
	     * 그리드의 전체 아이템 갯수를 반환한다.
	     *
	     */
	    GridBase.prototype.fullItemCount = function () {
	        return this._view.layoutManager.fullItemCount;
	    };
	    /**
	     * 그리드에 연결되어 있는 datasource를 이전 상태로 되돌린다.
	     *
	     */
	    GridBase.prototype.undo = function () {
	        return this._view.undo();
	    };
	    /**
	     * 그리드에 연결되어 있는 datasource를 undo했을 때, 다시 수정 후 상태로 되돌린다.
	     *
	     */
	    GridBase.prototype.redo = function () {
	        return this._view.redo();
	    };
	    /**
	     * @internal
	     */
	    GridBase.prototype._getView = function () {
	        return this._view;
	    };
	    return GridBase;
	}());
	exports.GridBase = GridBase;
	/**
	 * GridView 클래스
	 *
	 */
	var GridView = /** @class */ (function (_super) {
	    __extends(GridView, _super);
	    function GridView() {
	        //-------------------------------------------------------------------------
	        // fields
	        //-------------------------------------------------------------------------
	        var _this = _super !== null && _super.apply(this, arguments) || this;
	        /**
	         * 그리드가 Paging 상태일 때, 다른 페이지로 이동하기 직전에 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param page - 새로 이동하게 될 페이지 인덱스.
	         * @returns false를 반환하면 페이지 이동이 취소된다.
	         */
	        _this.onPageChanging = null;
	        /**
	         * 그리드가 Paging 상태일 때, 다른 페이지로 이동한 후 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param page - 새로 이동한 페이지 인덱스.
	         *
	         */
	        _this.onPageChanged = null;
	        /**
	         * 그리드가 Paging 상태일 때, 다른 페이지로 이동한 후 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param pageCount - 변경된 페이지 수.
	         *
	         */
	        _this.onPageCountChanged = null;
	        /**
	         * Grouping이 시작될때 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param fields - Grouping되는 필드의 인덱스들.
	         * @returns 그룹핑 실행 여부. false를 반환하면 그룹핑은 취소된다.
	         *
	         */
	        _this.onGrouping = null;
	        /**
	         * Grouping 종료 후에 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         *
	         */
	        _this.onGrouped = null;
	        /**
	         * Grouping된 컬럼을 expand할 때 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param itemIndex - expand할 그루핑된 아이템의 id.
	         *
	         */
	        _this.onExpanding = null;
	        /**
	         * Grouping된 컬럼을 expand한 뒤에 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param itemIndex - expand한 그루핑된 아이템의 id.
	         *
	         */
	        _this.onExpanded = null;
	        /**
	         * Grouping된 컬럼을 collapse할 때 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param itemIndex - collapse할 그루핑된 아이템의 id.
	         *
	         */
	        _this.onCollapsing = null;
	        /**
	         * Grouping된 컬럼을 collapse한 뒤 호출한다.
	         *
	         * @param grid - GridView 컨트롤.
	         * @param itemIndex - collapse한 그루핑된 아이템의 id.
	         *
	         */
	        _this.onCollapsed = null;
	        return _this;
	    }
	    Object.defineProperty(GridView.prototype, "rowGroup", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * rowGroup를 반환한다.
	         *
	         * @remarks
	         * rowGroup 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.rowGroup.mergeMode = true;
	         * ```
	         */
	        get: function () {
	            return this._view.rowGroup;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(GridView.prototype, "groupingOptions", {
	        /**
	         * groupingOptions를 반환한다.
	         *
	         * @remarks
	         * groupingOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * gridView.groupingOptions.linear = true;
	         * ```
	         */
	        get: function () {
	            return this._view.groupingOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------
	    // components
	    /**
	     * 그리드의 RowGroup을 반환한다.
	     *
	     */
	    GridView.prototype.getRowGroup = function () {
	        return this._view.rowGroup;
	    };
	    /**
	     * 그리드의 RowGroup을 설정한다.
	     *
	     * @param value - RowGroup 모델과 같은 Object. 변경하고자 하는 속성만 전달하면 된다.
	     *
	     */
	    GridView.prototype.setRowGroup = function (value) {
	        this._view.rowGroup.assignFrom(value);
	    };
	    // options
	    /**
	     * 그리드 옵션 정보를 반환한다.
	     *
	     * @remarks
	     * GridBase의 getOptions에 반환되는 모델에 grouping 속성이 추가되어 반환된다.
	     *
	     * @returns setOptions와 다르게 GridOptions에서 선언된 그리드 수준의 정보만을 반환한다.
	     *
	     */
	    GridView.prototype.getOptions = function () {
	        var opts = _super.prototype.getOptions.call(this);
	        opts['grouping'] = this.groupingOptions.toProxy();
	        return opts;
	    };
	    /**
	     * 그리드 옵션 정보를 재설정한다.
	     *
	     * @remarks
	     * 그리드 수준의 정보만을 반환하는 getOptions와 달리 이 method를 통해 하위 구성 요소 및 다른 실행 정보들을 동시에 재설정할 수 있다.
	     *
	     * @param options - 설정 정보. GridBase의 setOptions의 value와 동일한 모델에서 grouping 속성이 추가되었다.
	     *
	     */
	    GridView.prototype.setOptions = function (options) {
	        _super.prototype.setOptions.call(this, options);
	        options.grouping && this._view.groupingOptions.assignFrom(options.grouping);
	    };
	    /**
	     * 그리드 RowGrouping에 관한 설정 정보들을 반환한다.
	     *
	     * @returns GroupingOptions와 동일한 모델이다.
	     *
	     */
	    GridView.prototype.getGroupingOptions = function () {
	        return this._view.groupingOptions.toProxy;
	    };
	    /**
	     * 그리드 RowGrouping에 관한 설정을 한다.
	     *
	     * @param value - 설정하고자 하는 정보. GroupingOptions와 동일한 모델이다.
	     *
	     */
	    GridView.prototype.setGroupingOptions = function (value) {
	        this._view.groupingOptions.assignFrom(value);
	    };
	    // row grouping
	    /**
	     * 지정한 필드 목록에 포함된 순서대로 또는 정렬 후 순서대로 행 그룹핑을 실행한다.
	     *
	     * @param fieldNames - 필드 이름 목록. 그룹을 해제하려는 경우 빈 배열을 입력.
	     * @param sorting - 정렬 여부.
	     * @param sortDirs - 정렬 방식.
	     *
	     */
	    GridView.prototype.groupBy = function (fieldNames, sorting, sortDirs) {
	        var dirs = sortDirs || undefined;
	        this._view.groupByFieldNames(fieldNames, sorting, dirs);
	    };
	    /**
	     * 그리드가 Grouping 되어 있는지 여부를 반환한다.
	     *
	     */
	    GridView.prototype.isGrouped = function () {
	        return this._view.rowGrouped;
	    };
	    /**
	     * 그리드가 mergeMode로 되어 있는지 여부를 반환한다.
	     *
	     * @returns RowGroupOptions 에 mergeMode가 true로 설정되면 반환값도 true.
	     *
	     */
	    GridView.prototype.isMergedGrouped = function () {
	        return this._view.mergedRowGrouped;
	    };
	    /**
	     * Grouping된 필드의 index들을 반환한다.
	     *
	     */
	    GridView.prototype.getGroupFields = function () {
	        return this._view.rowGroupFields;
	    };
	    /**
	     * Grouping된 필드의 이름들을 반환한다.
	     *
	     * @param orginal - 기본값: true, true: 지정한 이름으로 반환, false: 대문자로 반환.
	     * @returns 필드들의 이름들. DataProvider가 연결되어 있지 않으면, 필드들의 index들을 반환한다.
	     *
	     */
	    GridView.prototype.getGroupFieldNames = function (orginal) {
	        if (orginal === void 0) { orginal = true; }
	        var flds = this._view.rowGroupFields;
	        if (flds) {
	            var ds = this._dataProvider;
	            if (ds) {
	                var names = [];
	                for (var i = 0, l = flds.length; i < l; i++) {
	                    names.push(orginal ? ds.getOrgFieldName(flds[i]) : ds.getFieldName(flds[i]));
	                }
	                return names;
	            }
	            else {
	                return flds;
	            }
	        }
	        return null;
	    };
	    /**
	     * 현재 몇 level로 Grouping 되어 있는지를 반환한다.
	     *
	     * @returns group level의 깊이
	     *
	     */
	    GridView.prototype.getGroupLevels = function () {
	        return this._view.rowGroupLevels;
	    };
	    /**
	     * 지정한 필드의 그룹 level을 반환한다.
	     *
	     * @remarks
	     * 첫번째 그룹 레벨은 1이다.
	     *
	     * @param field - 필드명 또는 인덱스.
	     * @returns 해당 필드로 Grouping 되지 않았다면 0을 리턴 한다, 없는 필드명이 지정됐을 경우 -1이 반환된다.
	     *
	     */
	    GridView.prototype.getGroupLevel = function (field) {
	        var fld = typeof field === 'string' ? this._dataProvider.getFieldIndex(field) : field;
	        return fld > -1 ? this._view.getGroupLevel(fld) : -1;
	    };
	    /**
	     * 자신이 속한 그룹의 ItemIndex를 반환한다.
	     *
	     * @param itemIndex - 그리드 상의 index.
	     * @returns 그룹이 없거나, 그룹이 있을 경우 가장 첫 행의 getGroupIndex 결과는 -1 이다.
	     *
	     */
	    GridView.prototype.getGroupIndex = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var group = item.parent;
	            return group ? group.index : -1;
	        }
	        return -1;
	    };
	    /**
	     * 지정한 ItemIndex가 그룹 아이템인지의 여부를 반환한다.
	     *
	     * @param itemIndex - 그리드 상의 index.
	     *
	     */
	    GridView.prototype.isGroupItem = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        return item instanceof GridItem_1.GroupItem;
	    };
	    /**
	     * 지정한 itemIndex의 부모의 visible 여부를 반환한다.
	     *
	     * @param itemIndex - 그리드 상의 index.
	     * @returns 해당 아이템이 존재하지 않거나, 해당 아이템의 부모가 존재하지 않으면 false를 반환한다.
	     *
	     */
	    GridView.prototype.isParentVisible = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        return item && item.parent && item.parent.visible;
	    };
	    /**
	     * 지정한 그룹을 펼친다(expand).
	     *
	     * @remarks
	     * 지정한 아이템이 존재하지 않거나, 그룹이 아니라면 아무 일도 일어나지 않는다.
	     * recursive가 true일 때 level을 지정하면 해당 level까지 펼친다.
	     *
	     * @param itemIndex - 해당 그룹의 그리드 상의 index.
	     * @param recursive - 그룹에 포함된 자손 그룹의 펼침여부.
	     * @param force - 기본값: false, 이미 expanded 상태라도 recursive가 true일 때 자손들의 펼침여부.
	     * @param level - 기본값: 0, 0일 때 recursive가 true면 모든 자손 expand.
	     *
	     */
	    GridView.prototype.expandGroup = function (itemIndex, recursive, force, level) {
	        if (force === void 0) { force = false; }
	        if (level === void 0) { level = 0; }
	        var group = this._view.getItem(itemIndex);
	        if (group && group instanceof GridItem_1.GroupItem) {
	            this._view.expand(group, recursive, force, level);
	        }
	    };
	    /**
	     * 지정한 그룹을 접는다(collapse).
	     *
	     * @remarks
	     * 지정한 아이템이 존재하지 않거나, 그룹이 아니라면 아무 일도 일어나지 않는다.
	     *
	     * @param itemIndex - 해당 그룹의 그리드 상의 index.
	     * @param recursive - 그룹에 포함된 자손 그룹의 접힘여부. true 일때 이미 collapsed 상태라면 아무일도 하지 않는다.
	     * @param force - 기본값: false, 이미 collapsed 상태라도 recursive가 true일 때 자손들의 접힘여부.
	     *
	     */
	    GridView.prototype.collapseGroup = function (itemIndex, recursive, force) {
	        if (force === void 0) { force = false; }
	        var group = this._view.getItem(itemIndex);
	        if (group && group instanceof GridItem_1.GroupItem) {
	            this._view.collapse(group, recursive, force);
	        }
	    };
	    /**
	     * 지정한 그룹의 부모를 펼친다.
	     *
	     * @remarks
	     * 지정한 아이템 또는 그 부모가 존재하지 않거나, 그룹이 아니라면 아무 일도 일어나지 않는다.
	     * recursive가 true일 때 level을 지정하면 해당 level까지 펼친다.
	     *
	     * @param itemIndex - 해당 그룹의 그리드 상의 index.
	     * @param recursive - 부모 그룹에 포함된 자손 그룹의 펼침여부.
	     * @param force - 기본값: false, 이미 expanded 상태라도 recursive가 true일 때 부모 그룹의 자손들의 펼침여부.
	     * @param level - 기본값: 0, 0일 때 recursive가 true면 모든 자손 expand.
	     *
	     */
	    GridView.prototype.expandParent = function (itemIndex, recursive, force, level) {
	        if (force === void 0) { force = false; }
	        if (level === void 0) { level = 0; }
	        var item = this._view.getItem(itemIndex);
	        if (!item)
	            return;
	        var group = item.parent;
	        if (group && group instanceof GridItem_1.GroupItem) {
	            this._view.expand(group, recursive, force, level);
	        }
	    };
	    /**
	     * 지정한 그룹의 부모를 접는다(collapse).
	     *
	     * @remarks
	     * 지정한 아이템 또는 그 부모가 존재하지 않거나, 그룹이 아니라면 아무 일도 일어나지 않는다.
	     *
	     * @param itemIndex - 해당 그룹의 그리드 상의 index.
	     * @param recursive - 부모 그룹에 포함된 자손 그룹의 접힘여부. true 일때 이미 collapsed 상태라면 아무일도 하지 않는다.
	     * @param force - 기본값: false, 이미 collapsed 상태라도 recursive가 true일 때 부모 그룹의 자손들의 접힘여부.
	     *
	     */
	    GridView.prototype.collapseParent = function (itemIndex, recursive, force) {
	        if (force === void 0) { force = false; }
	        var item = this._view.getItem(itemIndex);
	        if (!item)
	            return;
	        var group = item.parent;
	        if (group && group instanceof GridItem_1.GroupItem) {
	            this._view.collapse(group, recursive, force);
	        }
	    };
	    /**
	     * 루트 그룹에서 Expanding 을 시작한다.
	     *
	     * @remarks
	     * recursive가 true일 때 level을 지정하면 해당 level까지 펼친다.
	     *
	     * @param recursive - 기본값: false, 그룹에 포함된 자손 그룹의 펼침여부.
	     * @param level - 기본값: undefined, undefined: recursive가 true시 모든 자손 expand.
	     *
	     */
	    GridView.prototype.expandAll = function (recursive, level) {
	        if (recursive === void 0) { recursive = false; }
	        if (level === void 0) { level = undefined; }
	        if (this._view.itemCount > 0) {
	            var p = this._view.itemSource.getItemOfRow(0, false);
	            p.root && this._view.expand(p.root, recursive, false, level);
	        }
	    };
	    /**
	     * 루트 그룹에서 Collapsing 을 시작한다.
	     *
	     * @param recursive - 기본값: false, 그룹에 포함된 자손 그룹의 접힘여부. true일 때 그룹에 포함된 자손 그룹도 접힌 상태가 된다.
	     *
	     */
	    GridView.prototype.collapseAll = function (recursive) {
	        if (recursive === void 0) { recursive = false; }
	        if (this._view.itemCount > 0) {
	            var p = this._view.itemSource.getItemOfRow(0, false);
	            p.root && this._view.collapse(p.root, recursive, false);
	        }
	    };
	    // editing
	    /**
	     * 그리드에 itemIndex로 입력된 데이터행 앞 또는 뒤에 새로운 데이터행을 생성한다.
	     *
	     * @remarks
	     * 그리드가 편집상태이거나 데이터건수가 없는 경우 추가되지 않는다.
	     * itemIndex를 입력하지 않으면 (-1이 입력되면), 이전에 실행된 beginInsertRow의 itemIndex 앞에 추가되거나 실행된적이 없으면 0번째 itemIndex앞에 추가된다.
	     * 0 이상의 값을 입력하면 데이터행 앞에 새로운 데이터행을 생성한다.
	     *
	     * @param itemIndex - 기본값: -1, 기준 데이터 행. 이 행 앞에 새로운 데이터행을 생성한다.
	     * @param shift - 기본값: false, true: 데이터 행 뒤에 생성.
	     *
	     */
	    GridView.prototype.beginInsertRow = function (itemIndex, shift) {
	        if (itemIndex === void 0) { itemIndex = -1; }
	        if (shift === void 0) { shift = false; }
	        this._view.insertAt(itemIndex, shift);
	    };
	    /**
	     * 그리드 마지막 데이터행 이후에 새로운 데이터행을 추가한다.
	     *
	     */
	    GridView.prototype.beginAppendRow = function () {
	        this._view.append();
	    };
	    /**
	     * 입력된 itemIndex에 해당하는 데이터 행을 편집상태로 변경한다.
	     *
	     * @param itemIndex - 행의 itemIndex.
	     *
	     */
	    GridView.prototype.beginUpdateRow = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var index = this._view.focusedIndex.clone();
	            index.itemIndex = item.index;
	            this._view.edit(index);
	        }
	    };
	    /**
	     * 그리드가 Paging 모드로 실행된다.
	     *
	     * @param paging - true 시 페이징 모드.
	     * @param size - 기본값: 10, 한 페이지에 표시할 행의 갯수.
	     * @param maxCount - 기본값: -1, 최대 페이지 갯수.
	     *
	     */
	    GridView.prototype.setPaging = function (paging, size, maxCount) {
	        if (size === void 0) { size = 10; }
	        if (maxCount === void 0) { maxCount = -1; }
	        this._view.setPaging(paging, size, maxCount);
	    };
	    /**
	     * Paging 모드에서 현재 페이지 번호를 반환한다.
	     *
	     */
	    GridView.prototype.getPage = function () {
	        return this._view.page;
	    };
	    /**
	     * Paging 모드일 때 표시할 페이지를 지정한다.
	     *
	     * @param page - 페이지 번호.
	     * @param startItem - 기본값: -1, 이 페이지에 표시할 첫번째 행의 인덱스. -1이면 setPaging에 지정한 페이지 크기에 따라 결정된다.
	     *
	     */
	    GridView.prototype.setPage = function (page, startItem) {
	        if (startItem === void 0) { startItem = -1; }
	        this._view.setPage(page, startItem);
	    };
	    /**
	     * Paging 모드일 때 전체 페이지 개수를 반환한다.
	     *
	     */
	    GridView.prototype.getPageCount = function () {
	        return this._view.pageCount;
	    };
	    /**
	     * Paging 개수를 변경한다.
	     *
	     * @param count - 새 페이지 개수.
	     *
	     */
	    GridView.prototype.setPageCount = function (count) {
	        this._view.pageCount = count;
	    };
	    // check
	    /**
	     * Check된 아이템들의 목록을 배열로 반환한다.
	     *
	     * @param rowOnly - 기본값: true, true: row만 반환, false: 그룹푸터 등 비데이터 영역도 반환.
	     *
	     */
	    GridView.prototype.getCheckedItems = function (rowOnly) {
	        if (rowOnly === void 0) { rowOnly = true; }
	        return this._view.getCheckedItems(!rowOnly);
	    };
	    /**
	     * Check된 데이터 행들의 목록을 반환한다.
	     *
	     * @param sort - 기본값: true, true: 오름차순으로 반환, false: 화면에 보이는 순서대로 반환.
	     * @param visibleOnly - 기본값: false, true로 입력하면 collapse되거나 페이징시 보이지 않는 행들은 제외한다.
	     * @param allRows - 기본값: false, true로 입력하면 페이징 처리시 보이지 않는 페이지들의 체크된 행들도 반환한다.
	     *
	     */
	    GridView.prototype.getCheckedRows = function (sort, visibleOnly, allRows) {
	        if (sort === void 0) { sort = true; }
	        if (visibleOnly === void 0) { visibleOnly = false; }
	        if (allRows === void 0) { allRows = false; }
	        return this._view.getCheckedRows(sort, visibleOnly, allRows);
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    /**
	     * @internal
	     */
	    GridView.prototype._createView = function (container) {
	        var gc = this._container = new GridContainer_1.GridContainer(container);
	        return gc.gridView;
	    };
	    /**
	     * @internal
	     */
	    GridView.prototype._createListener = function (view) {
	        return new GridViewListener(this, view);
	    };
	    return GridView;
	}(GridBase));
	exports.GridView = GridView;
	/**
	 * TreeView 클래스
	 *
	 */
	var TreeView = /** @class */ (function (_super) {
	    __extends(TreeView, _super);
	    function TreeView() {
	        var _this = _super !== null && _super.apply(this, arguments) || this;
	        /**
	         * TreeView의 아이템 노드가 펼쳐지기 직전에 호출한다.
	         *
	         * @param tree - TreeView 컨트롤.
	         * @param itemIndex - 펼쳐지려는 아이템 행의 index.
	         * @param rowId - 펼쳐지려는 행의 rowId.
	         *
	         * @returns false를 반환하면 펼쳐지지 않는다.
	         *
	         */
	        _this.onTreeItemExpanding = null;
	        /**
	         * TreeView의 아이템 노드가 펼쳐진 후에 호출한다.
	         *
	         * @param tree - TreeView 컨트롤.
	         * @param itemIndex - 펼쳐진 아이템 행의 index.
	         * @param rowId - 펼쳐진 행의 rowId.
	         *
	         */
	        _this.onTreeItemExpanded = null;
	        /**
	         * TreeView의 아이템 노드가 접히기 직전에 호출한다.
	         *
	         * @param tree - TreeView 컨트롤.
	         * @param itemIndex - 접으려는 아이템 행의 index.
	         * @param rowId - 접으려는 행의 rowId.
	         *
	         * @returns false를 반환하면 펼쳐지지 않는다.
	         *
	         */
	        _this.onTreeItemCollapsing = null;
	        /**
	         * TreeView의 아이템 노드가 접히기 직전에 호출한다.
	         *
	         * @param tree - TreeView 컨트롤.
	         * @param itemIndex - 접힌 아이템 행의 index.
	         * @param rowId - 접힌 행의 rowId.
	         *
	         */
	        _this.onTreeItemCollapsed = null;
	        /**
	         * TreeView의 값이 변경된 후 commit()시 발생한다.
	         *
	         * @param tree - TreeView 컨트롤.
	         * @param itemIndex - 값이 변경된 행의 index
	         * @param rowId - 값이 변경된 행의 rowId.
	         *
	         */
	        _this.onTreeItemChanged = null;
	        return _this;
	    }
	    Object.defineProperty(TreeView.prototype, "treeOptions", {
	        //-------------------------------------------------------------------------
	        // properties
	        //-------------------------------------------------------------------------
	        /**
	         * treeOptions를 반환한다.
	         *
	         * @remarks
	         * treeOptions 내 속성에 접근 해 정보를 전달하여 설정할 수 있다.
	         *
	         * @example
	         * ```
	         * treeView.treeOptions.iconWidth = 20;
	         * ```
	         */
	        get: function () {
	            return this._view.treeOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    //-------------------------------------------------------------------------
	    // methods
	    //-------------------------------------------------------------------------    
	    /**
	     * 트리 그리드 선택 표시 등, 관련된 설정 정보들을 가져온다.
	     *
	     * @remarks
	     * TreeView의 값이 변경된 후 commit()시 발생한다.
	     *
	     * @returns TreeOptions 설정 모델과 동일한 내용의 객체.
	     *
	     */
	    TreeView.prototype.getTreeOptions = function () {
	        return this._view.treeOptions.toProxy();
	    };
	    /**
	     * 트리뷰 표시 및 동작과 관련된 설정을 한다.
	     *
	     * @remarks
	     * TreeView의 값이 변경된 후 commit()시 발생한다.
	     *
	     * @returns TreeOptions 설정 모델과 동일한 내용의 객체. 변경하고자 하는 속성만 변경하면 된다.
	     *
	     */
	    TreeView.prototype.setTreeOptions = function (options) {
	        this._view.treeOptions.assignFrom(options);
	    };
	    // treeItem
	    /**
	     * 부모 행의 아이템의 index를 반환한다.
	     *
	     * @param itemIndex - 자식 행의 itemIndex.
	     *
	     */
	    TreeView.prototype.getParent = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        return item ? item.parentIndex : -1;
	    };
	    /**
	     * 자식 행의 아이템들의 index들을 반환한다.
	     *
	     * @param itemIndex - 부모 행의 itemIndex.
	     *
	     */
	    TreeView.prototype.getChildren = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var items = [];
	            for (var i = 0, cnt = item.count; i < cnt; i++) {
	                items.push(item.getItem(i).index);
	            }
	            return items;
	        }
	        return null;
	    };
	    /**
	     * 자손 행의 아이템들의 index들을 반환한다.
	     *
	     * @param itemIndex - 부모 행의 itemIndex.
	     *
	     */
	    TreeView.prototype.getDescendants = function (itemIndex) {
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var items = [];
	            var descs = item.getDescendants(false);
	            for (var i = 0, cnt = descs.length; i < cnt; i++) {
	                items.push(descs[i].index);
	            }
	            return items;
	        }
	        return null;
	    };
	    /**
	     * 조상 행의 아이템들의 index들을 반환한다.
	     *
	     * @param itemIndex - 해당 행의 itemIndex.
	     * @param includeRoot - 기본값: true, true: 숨겨진 최상위 루트행의 index값을 포함하여 결과값으로 반환한다.
	     *
	     */
	    TreeView.prototype.getAncestors = function (itemIndex, includeRoot) {
	        if (includeRoot === void 0) { includeRoot = true; }
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            var indices = [];
	            var items = item.getAncestors();
	            for (var i = 0, l = items.length; i < l; i++) {
	                if (!includeRoot && items[i] instanceof ItemProvider_1.RootItem) {
	                    continue;
	                }
	                indices.push(items[i].id);
	            }
	            return indices;
	        }
	        return null;
	    };
	    /**
	     * 트리뷰에 입력된 아이템을 펼친다.
	     *
	     * @remarks
	     * recursive가 true일 때 level을 지정하면 해당 level까지 펼친다.
	     *
	     * @param itemIndex - 펼치려는 아이템 행의 itemIndex.
	     * @param recursive - 기본값: false, 그룹에 포함된 자손 그룹의 펼침여부.
	     * @param force - 기본값: false, 이미 expanded 상태라도 recursive가 true일 때 자손들의 펼침여부.
	     * @param level - 기본값: 0, 0일 때 recursive가 true면 모든 자손 expand.
	     *
	     */
	    TreeView.prototype.expand = function (itemIndex, recursive, force, level) {
	        if (recursive === void 0) { recursive = false; }
	        if (force === void 0) { force = false; }
	        if (level === void 0) { level = 0; }
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            this._view.expand(item, recursive, force, level);
	        }
	    };
	    /**
	     * 트리뷰에 입력된 아이템을 접는다.
	     *
	     * @param itemIndex - 접으려는 아이템 행의 itemIndex.
	     * @param recursive - 기본값: false, 그룹에 포함된 자손 그룹의 접힘여부.
	     *
	     */
	    TreeView.prototype.collapse = function (itemIndex, recursive) {
	        if (recursive === void 0) { recursive = false; }
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            this._view.collapse(item, recursive);
	        }
	    };
	    /**
	     * 트리뷰의 모든 아이템을 펼친다.
	     *
	     * @remarks
	     * recursive가 true일 때 level을 지정하면 해당 level까지 펼친다.
	     *
	     * @param level - 기본값: 0, 0일 때 recursive가 true면 모든 자손 expand.
	     *
	     */
	    TreeView.prototype.expandAll = function (level) {
	        if (level === void 0) { level = 0; }
	        this._view.expandAll(level);
	    };
	    /**
	     * 트리뷰의 모든 아이템을 접는다.
	     *
	     */
	    TreeView.prototype.collapseAll = function () {
	        this._view.collapseAll();
	    };
	    // getDisplayValues (itemIndex, applyStyle) {
	    //     applyStyle = arguments.length > 1 ? applyStyle : true;
	    //     var row = _realgrid.getTreeValues(this._view, itemIndex);
	    //     return _realgrid.getDisplayValues(this._view, row, itemIndex, applyStyle);
	    // }
	    // // checked
	    /**
	     * Check된 아이템들의 index 목록을 배열로 반환한다.
	     *
	     */
	    TreeView.prototype.getCheckedItems = function () {
	        return this._view.getCheckedItemIndices();
	    };
	    /**
	     * Check된 데이터 행들의 index 목록을 반환한다.
	     *
	     * @param visibleOnly - 기본값: false, true로 입력하면 collapse되거나 페이징시 보이지 않는 행들은 제외한다.
	     * @returns check된 데이텅행들의 트리 아이디의 배열.
	     *
	     */
	    TreeView.prototype.getCheckedRows = function (visibleOnly) {
	        return this._view.getCheckedRowIds(visibleOnly);
	    };
	    /**
	     * 입력된 행의 자식 행들을 체크하거나 해제한다.
	     *
	     * @param itemIndex - 부모행의 ItemModel index.
	     * @param checked - true: 체크, false: 해제.
	     * @param recursive - 기본값: false, 그룹에 포함된 자손 그룹의 펼침여부.
	     * @param visibleOnly - true면 collapse되거나 페이징시 보이지 않는 행들은 제외한다.
	     * @param checkableOnly - true면 체크 가능한 상태인 것들만 체크 한다.
	     * @param checkEvent - 기본값: true, onItemChecked()의 발생 여부.
	     *
	     */
	    TreeView.prototype.checkChildren = function (itemIndex, checked, recursive, visibleOnly, checkableOnly, checkEvent) {
	        if (checkEvent === void 0) { checkEvent = true; }
	        var item = this._view.getItem(itemIndex);
	        if (item) {
	            this._view.checkChildren(item, checked, recursive, visibleOnly, checkableOnly, checkEvent);
	        }
	    };
	    //-------------------------------------------------------------------------
	    // overriden members
	    //-------------------------------------------------------------------------
	    /**
	     * @internal
	     */
	    TreeView.prototype._createView = function (container) {
	        var gc = this._container = new TreeView_1.TreeContainer(container);
	        return gc.gridView;
	    };
	    /**
	     * @internal
	     */
	    TreeView.prototype._createListener = function (view) {
	        return new TreeViewListener(this, view);
	    };
	    return TreeView;
	}(GridBase));
	exports.TreeView = TreeView;
	var GridBaseListener = /** @class */ (function (_super) {
	    __extends(GridBaseListener, _super);
	    //-------------------------------------------------------------------------
	    // constructor
	    //-------------------------------------------------------------------------
	    function GridBaseListener(del, view) {
	        var _this = _super.call(this) || this;
	        _this._del = del;
	        _this._view = view;
	        _this._view.addListener(_this);
	        return _this;
	    }
	    GridBaseListener.prototype.dispose = function () {
	        this._view.removeListener(this);
	        this._view = null;
	        this._del = null;
	    };
	    //-------------------------------------------------------------------------
	    // event handlers
	    //-------------------------------------------------------------------------    
	    GridBaseListener.prototype.onGridBaseCurrentChanging = function (grid, oldIndex, newIndex) {
	        return !this._del.onCurrentChanging || this._del.onCurrentChanging(this._del, oldIndex.proxy(), newIndex.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseCurrentChanged = function (grid, index) {
	        this._del.onCurrentChanged && this._del.onCurrentChanged(this._del, index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseCurrentRowChanged = function (grid, oldRow, newRow) {
	        this._del.onCurrentRowChanged && this._del.onCurrentRowChanged(this._del, oldRow, newRow);
	    };
	    GridBaseListener.prototype.onGridBaseValidateCell = function (grid, index, inserting, value) {
	        if (this._del.onValidateColumn) {
	            var itemIndex = index.itemIndex;
	            var dataRow = index.item && index.item.dataRow;
	            var err = this._del.onValidateColumn(this._del, index.column, inserting, value, itemIndex, dataRow);
	            if (err && err.level && err.message) {
	                throw new Validation.ValidationError(err.level, err.message, index.column && index.column, err.message);
	            }
	            else if (typeof err == "string" || typeof err == "number") {
	                throw new Validation.ValidationError(Types.ValidationLevel.ERROR, err, index.column && index.column, err);
	            }
	        }
	    };
	    GridBaseListener.prototype.onGridBaseValidateRow = function (grid, item, inserting, values) {
	        if (this._del.onValidateRow) {
	            var err = this._del.onValidateRow(this._del, item.index, item.dataRow, inserting, values);
	            if (err && err.level && err.message) {
	                throw new Validation.ValidationError(err.level, err.message, null, err.message);
	            }
	            else if (typeof err == "string" || typeof err == "number") {
	                throw new Validation.ValidationError(Types.ValidationLevel.ERROR, err, null, err);
	            }
	        }
	    };
	    GridBaseListener.prototype.onGridBaseValidationFail = function (grid, itemIndex, column, err) {
	        if (this._del.onValidationFail) {
	            var retErr = this._del.onValidationFail(this._del, itemIndex, column, { level: err.level, message: err.message });
	            if (retErr && retErr.level && retErr.message) {
	                err.level = retErr.level;
	                err.message = retErr.message;
	                err.userMessage = retErr.message;
	                return err;
	            }
	            else if (typeof retErr == "string" || typeof retErr == "number") {
	                err.message = retErr;
	                err.userMessage = retErr;
	                return err;
	            }
	        }
	        else {
	            return err;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseColumnHeaderClicked = function (grid, column, rightClicked) {
	        this._del.onColumnHeaderClicked ? this._del.onColumnHeaderClicked(this._del, column, rightClicked) : this.log("onColumnHeaderClicked: " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseColumnHeaderImageClicked = function (grid, column) {
	        this._del.onColumnHeaderImageClicked ? this._del.onColumnHeaderImageClicked(this._del, column) : this.log("onColumnHeaderImageClicked:" + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseColumnHeaderDblClicked = function (grid, column) {
	        this._del.onColumnHeaderDblClicked ? this._del.onColumnHeaderDblClicked(this._del, column) : this.log("onColumnHeaderDblClicked: " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseColumnCheckedChanged = function (grid, column, checked) {
	        this._del.onColumnCheckedChanged ? this._del.onColumnCheckedChanged(this._del, column, checked) : this.log("onColumnCheckedChanged: " + "(" + column.name + ", " + checked + ")");
	    };
	    GridBaseListener.prototype.onGridBaseFooterCellClicked = function (grid, column) {
	        this._del.onFooterCellClicked ? this._del.onFooterCellClicked(this._del, column) : this.log("onFooterCellClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseFooterCellDblClicked = function (grid, column) {
	        this._del.onFooterCellDblClicked ? this._del.onFooterCellDblClicked(this._del, column) : this.log("onFooterCellDblClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseHeaderSummaryCellClicked = function (grid, column) {
	        this._del.onHeaderSummaryCellClicked ? this._del.onHeaderSummaryCellClicked(this._del, column) : this.log("onHeaderSummaryCellClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseHeaderSummaryCellDblClicked = function (grid, column) {
	        this._del.onHeaderSummaryCellDblClicked ? this._del.onHeaderSummaryCellDblClicked(this._del, column) : this.log("onHeaderSummaryCellDblClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseCheckBarHeadClicked = function (grid) {
	        this._del.onCheckBarHeadClicked ? this._del.onCheckBarHeadClicked(this._del) : this.log("onCheckBarHeadClicked");
	    };
	    GridBaseListener.prototype.onGridBaseCheckBarFootClicked = function (grid) {
	        this._del.onCheckBarFootClicked ? this._del.onCheckBarFootClicked(this._del) : this.log("onCheckBarFootClicked");
	    };
	    GridBaseListener.prototype.onGridBaseIndicatorCellClicked = function (grid, index) {
	        this._del.onIndicatorCellClicked ? this._del.onIndicatorCellClicked(this._del, index.itemIndex) : this.log("onIndicatorCellClicked : " + "(" + index.itemIndex + ")");
	    };
	    GridBaseListener.prototype.onGridBaseStateBarCellClicked = function (grid, index) {
	        this._del.onStateBarCellClicked ? this._del.onStateBarCellClicked(this._del, index.itemIndex) : this.log("onStateBarCellClicked : " + "(" + index.itemIndex + ")");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupHeadClicked = function (grid) {
	        this._del.onRowGroupHeadClicked ? this._del.onRowGroupHeadClicked(this._del) : this.log("onRowGroupHeadClicked");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupFootClicked = function (grid) {
	        this._del.onRowGroupFootClicked ? this._del.onRowGroupFootClicked(this._del) : this.log("onRowGroupFootClicked");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupHeaderFooterClicked = function (grid, kind, index) {
	        this._del.onRowGroupHeaderFooterClicked ? this._del.onRowGroupHeaderFooterClicked(this._del, kind, index.proxy()) : this.log("onRowGroupHeaderFooterClicked: " + kind, index.proxy);
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupBarClicked = function (grid, index) {
	        this._del.onRowGroupBarClicked ? this._del.onRowGroupBarClicked(this._del, index) : this.log("onRowGroupBarClicked : " + "(" + index + ")");
	    };
	    GridBaseListener.prototype.onGridBaseCheckBarFootDblClicked = function (grid) {
	        this._del.onCheckBarFootDblClicked ? this._del.onCheckBarFootDblClicked(this._del) : this.log("onCheckBarFootDblClicked");
	    };
	    GridBaseListener.prototype.onGridBaseIndicatorCellDblClicked = function (grid, index) {
	        this._del.onIndicatorCellDblClicked ? this._del.onIndicatorCellDblClicked(this._del, index.itemIndex) : this.log("onIndicatorCellDblClicked : " + "(" + index.itemIndex + ")");
	    };
	    GridBaseListener.prototype.onGridBaseStateBarCellDblClicked = function (grid, index) {
	        this._del.onStateBarCellDblClicked ? this._del.onStateBarCellDblClicked(this._del, index.itemIndex) : this.log("onStateBarCellDblClicked : " + "(" + index.itemIndex + ")");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupHeadDblClicked = function (grid) {
	        this._del.onRowGroupHeadDblClicked ? this._del.onRowGroupHeadDblClicked(this._del) : this.log("onRowGroupHeadDblClicked");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupFootDblClicked = function (grid) {
	        this._del.onRowGroupFootDblClicked ? this._del.onRowGroupFootDblClicked(this._del) : this.log("onRowGroupFootDblClicked");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupBarDblClicked = function (grid, index) {
	        this._del.onRowGroupBarDblClicked ? this._del.onRowGroupBarDblClicked(this._del, index) : this.log("onRowGroupBarDblClicked : " + "(" + index + ")");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupHeaderFooterDblClicked = function (grid, kind, index) {
	        this._del.onRowGroupHeaderFooterDblClicked ? this._del.onRowGroupHeaderFooterDblClicked(this._del, kind, index.proxy()) : this.log("onRowGroupHeaderFooterDblClicked : " + "(" + index + ")");
	    };
	    GridBaseListener.prototype.onGridBasePanelClicked = function (grid) {
	        this._del.onPanelClicked ? this._del.onPanelClicked(this._del) : this.log("onPanelClicked");
	    };
	    GridBaseListener.prototype.onGridBasePanelDblClicked = function (grid) {
	        this._del.onPanelDblClicked ? this._del.onPanelDblClicked(this._del) : this.log("onPanelDblClicked");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupPanelClicked = function (grid, column) {
	        this._del.onRowGroupPanelClicked ? this._del.onRowGroupPanelClicked(this._del, column) : this.log("onRowGroupPanelClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseRowGroupPanelDblClicked = function (grid, column) {
	        this._del.onRowGroupPanelDblClicked ? this._del.onRowGroupPanelDblClicked(this._del, column) : this.log("onRowGroupPanelDblClicked : " + "(" + column.name + ")");
	    };
	    GridBaseListener.prototype.onGridBaseBodyEmptyClicked = function (grid) {
	        this._del.onBodyEmptyClicked ? this._del.onBodyEmptyClicked(this._del) : this.log("onBodyEmptyClicked");
	    };
	    GridBaseListener.prototype.onGridBaseBodyEmptyDblClicked = function (grid) {
	        this._del.onBodyEmptyDblClicked ? this._del.onBodyEmptyDblClicked(this._del) : this.log("onBodyEmptyDblClicked");
	    };
	    GridBaseListener.prototype.onGridBaseMenuItemClicked = function (grid, menuItem, index) {
	        this._del.onMenuItemClicked ? this._del.onMenuItemClicked(this._del, menuItem.toProxy(), index.proxy()) : this.log("onMenuItemClicked: ", menuItem.toProxy(), index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseContextMenuPopup = function (grid, x, y, elementName) {
	        return this._del.onContextMenuPopup ? this._del.onContextMenuPopup(this._del, x, y, elementName) : this.log("onContextMenuPopup: x = " + x + ", y = " + y);
	    };
	    GridBaseListener.prototype.onGridBaseContextMenuItemClicked = function (grid, menuItem, index) {
	        this._del.onContextMenuItemClicked ? this._del.onContextMenuItemClicked(this._del, menuItem.toProxy(), index.proxy()) : this.log("onContextMenuItemClicked: ", menuItem.toProxy(), index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseCellButtonClicked = function (grid, index) {
	        this._del.onCellButtonClicked ? this._del.onCellButtonClicked(this._del, index.proxy(), index.column) : this.log("onCellButtonClicked: ", index);
	    };
	    // onGridBaseImageButtonClicked(grid: GridBaseCore, index: CellIndex, column: GridColumn, buttonIndex: number, name: string) {
	    //     this._del.onImageButtonClicked ? this._del.onImageButtonClicked(this._del, index.itemIndex, column, buttonIndex, name) : this.log("onImageButtonClicked: " + index.itemIndex + ", " + column.name + ", " + buttonIndex + ", " + name);
	    // }
	    GridBaseListener.prototype.onGridBaseDataCellClicked = function (grid, index) {
	        this._del.onDataCellClicked ? this._del.onDataCellClicked(this._del, index.proxy()) : this.log('onDataCellClicked', index);
	    };
	    GridBaseListener.prototype.onGridBaseDataCellDblClicked = function (grid, index) {
	        this._del.onDataCellDblClicked ? this._del.onDataCellDblClicked(this._del, index.proxy()) : this.log('onDataCellDblClicked', index);
	    };
	    GridBaseListener.prototype.onGridBaseButtonClicked = function (grid, index, buttonIndex) {
	        this._del.onButtonClicked ? this._del.onButtonClicked(this._del, index.proxy(), buttonIndex) : this.log('onButtonClicked', index);
	    };
	    GridBaseListener.prototype.onGridBaseLinkableCellClicked = function (grid, index, url) {
	        return this._del.onLinkableCellClicked ? this._del.onLinkableCellClicked(this._del, index.proxy(), url) : this.log('onLinkableCellClicked', index, url);
	    };
	    GridBaseListener.prototype.onGridBaseScrollToBottom = function (grid) {
	        this._del.onScrollToBottom ? this._del.onScrollToBottom(this._del) : this.log('onScrollToBottom');
	    };
	    GridBaseListener.prototype.onGridBaseTopItemIndexChanged = function (grid, itemIndex) {
	        this._del.onTopItemIndexChanged ? this._del.onTopItemIndexChanged(this._del, itemIndex) : this.log('onTopItemIndexChanged: ' + itemIndex);
	    };
	    GridBaseListener.prototype.onGridBaseRowsDeleting = function (grid, rows) {
	        if (this._del.onRowsDeleting) {
	            return this._del.onRowsDeleting(this._del, rows);
	        }
	        else {
	            this.log('onRowsDeleting:', rows);
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseRowInserting = function (grid, itemIndex, dataRow) {
	        if (this._del.onRowInserting) {
	            return this._del.onRowInserting(this._del, itemIndex, dataRow);
	        }
	        else {
	            this.log('onRowInserting: ' + itemIndex, dataRow);
	        }
	    };
	    GridBaseListener.prototype.onGridBaseSelectionChanged = function (grid) {
	        this._del.onSelectionChanged ? this._del.onSelectionChanged(this._del) : this.log('onSelectionChanged');
	    };
	    GridBaseListener.prototype.onGridBaseSelectionAdded = function (grid, selection) {
	        this._del.onSelectionAdded ? this._del.onSelectionAdded(this._del, selection) : this.log('onSelectionAdded: ', selection);
	    };
	    GridBaseListener.prototype.onGridBaseSelectionEnded = function (grid) {
	        this._del.onSelectionEnded ? this._del.onSelectionEnded(this._del) : this.log('onSelectionEnded');
	    };
	    GridBaseListener.prototype.onGridBaseShowEditor = function (grid, index, attrs) {
	        return this._del.onShowEditor ? this._del.onShowEditor(this._del, index.proxy(), attrs) : this.log('onShowEditor', index.proxy(), attrs);
	    };
	    GridBaseListener.prototype.onGridBaseHideEditor = function (grid, index) {
	        return this._del.onHideEditor ? this._del.onHideEditor(this._del, index.proxy()) : this.log('onHideEditor: ', index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseEditChange = function (grid, index, value) {
	        this._del.onEditChange ? this._del.onEditChange(this._del, index.proxy(), value) : this.log('onEditChange: ' + value, index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseGetEditValue = function (grid, index, editResult) {
	        this._del.onGetEditValue && this._del.onGetEditValue(this._del, index.proxy(), editResult);
	    };
	    GridBaseListener.prototype.onGridBaseEditCommit = function (grid, index, oldValue, newValue) {
	        if (this._del.onEditCommit) {
	            return this._del.onEditCommit(this._del, index.proxy(), oldValue, newValue);
	        }
	        else {
	            this.log('onEditCommit', index.proxy(), oldValue, newValue);
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseEditCanceled = function (grid, index) {
	        this._del.onEditCanceled ? this._del.onEditCanceled(this._del, index.proxy()) : this.log('onEditCanceled', index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseItemEditCanceled = function (grid, item) {
	        this._del.onItemEditCanceled ? this._del.onItemEditCanceled(this._del, item.index, item.itemState) : this.log('onItemEditCanceled: ' + item.index + ', ' + item.itemState);
	    };
	    GridBaseListener.prototype.onGridBaseItemEditCancel = function (grid, item) {
	        if (this._del.onItemEditCancel) {
	            return this._del.onItemEditCancel(this._del, item.index, item.itemState);
	        }
	        else {
	            this.log('onItemEditCancel: ' + item.index + ', ' + item.itemState);
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseEditSearch = function (grid, index, text) {
	        this._del.onEditSearch ? this._del.onEditSearch(this._del, index.proxy(), text) : this.log('onEditSearch: ' + text, index.proxy());
	    };
	    GridBaseListener.prototype.onGridBaseSearchCellButtonClick = function (grid, index, text) {
	        if (this._del.onSearchCellButtonClick) {
	            return this._del.onSearchCellButtonClick(this._del, index.proxy(), text);
	        }
	        else {
	            this.log('onSearchCellButtonClick: ' + text, index.proxy());
	            return null;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseCellEdited = function (grid, item, field) {
	        return this._del.onCellEdited ? this._del.onCellEdited(this._del, item.index, item.dataRow, field) : this.log('onCellEdited: ' + item.index + ', ' + item.dataRow + ', ' + field);
	    };
	    GridBaseListener.prototype.onGridBaseEditRowChanged = function (grid, item, field, oldValue, newValue) {
	        return this._del.onEditRowChanged ? this._del.onEditRowChanged(this._del, item.index, item.dataRow, field, oldValue, newValue) : this.log('onEditRowChanged: ' + item.index + ', ' + item.dataRow + ', ' + field + ', ' + oldValue + ' => ' + newValue);
	    };
	    GridBaseListener.prototype.onGridBaseEditRowPasted = function (grid, item, fields, oldValues, newValues) {
	        return this._del.onEditRowPasted ? this._del.onEditRowPasted(this._del, item.index, item.dataRow, fields, oldValues, newValues) : this.log('onEditRowPasted: ' + item.index + ', ' + item.dataRow, fields, oldValues, newValues);
	    };
	    GridBaseListener.prototype.onGridBaseRowsPasted = function (grid, items) {
	        return this._del.onRowsPasted ? this._del.onRowsPasted(this._del, items) : this.log('onRowsPasted: ', items);
	    };
	    GridBaseListener.prototype.onGridBaseCellPasting = function (grid, index, value) {
	        return this._del.onCellPasting ? this._del.onCellPasting(this._del, index.proxy(), value) : this.log('onCellPasting: ', index, value);
	    };
	    GridBaseListener.prototype.onGridBaseItemChecked = function (grid, item, checked) {
	        return this._del.onItemChecked ? this._del.onItemChecked(this._del, item.index, checked) : this.log('');
	    };
	    GridBaseListener.prototype.onGridBaseItemsChecked = function (grid, items, checked) {
	        var indices = ViewDelegateUtils.getItemIndices(items);
	        return this._del.onItemsChecked ? this._del.onItemsChecked(this._del, indices, checked) : this.log('onItemsChecked: ' + checked, indices);
	    };
	    GridBaseListener.prototype.onGridBaseItemAllChecked = function (grid, checked) {
	        return this._del.onItemAllChecked ? this._del.onItemAllChecked(this._del, checked) : this.log('onItemAllChecked: ' + checked);
	    };
	    GridBaseListener.prototype.onGridBaseErrorClicked = function (grid, error) {
	        this._del.onErrorClicked ? this._del.onErrorClicked(this._del, error) : this.log('onErrorClicked: ' + error);
	    };
	    GridBaseListener.prototype.onGridBaseSorting = function (grid, fields, directions) {
	        var dirs = [];
	        for (var i = 0, l = directions.length; i < l; i++) {
	            dirs.push(directions[i] ? directions[i].toString() : 'ascending');
	        }
	        return this._del.onSorting ? this._del.onSorting(this._del, fields, directions) : this.log('onSorting: ', fields, dirs);
	    };
	    GridBaseListener.prototype.onGridBaseSortingChanged = function (grid) {
	        return this._del.onSortingChanged ? this._del.onSortingChanged(this._del) : this.log('onSortingChanged');
	    };
	    GridBaseListener.prototype.onGridBaseFiltering = function (grid) {
	        return this._del.onFiltering ? this._del.onFiltering(this._del) : this.log('onFiltering');
	    };
	    GridBaseListener.prototype.onGridBaseFilteringChanged = function (grid, filterCollection, filter) {
	        var column = filterCollection ? filterCollection.getOwner() : null;
	        var flt = filter ? filter.toProxy() : null;
	        var colName = column ? column.name : '';
	        var fltName = filter ? filter.name : '';
	        return this._del.onFilteringChanged ? this._del.onFilteringChanged(this._del, column, flt) : this.log('onFilteringChanged: ' + colName + ', ' + fltName);
	    };
	    GridBaseListener.prototype.onGridBaseKeyDown = function (grid, key, ctrl, shift, alt) {
	        return this._del.onKeyDown ? this._del.onKeyDown(this._del, key, ctrl, shift, alt) : this.log('onKeyDown: ' + key + ', ' + ctrl + ', ' + shift + ', ' + alt);
	    };
	    GridBaseListener.prototype.onGridBaseKeyPress = function (grid, key) {
	        this._del.onKeyPress ? this._del.onKeyPress(this._del, key) : this.log('onKeyDown: ' + key);
	    };
	    GridBaseListener.prototype.onGridBaseKeyUp = function (grid, key, ctrl, shift, alt) {
	        return this._del.onKeyUp ? this._del.onKeyUp(this._del, key, ctrl, shift, alt) : this.log('onKeyUp: ' + key + ', ' + ctrl + ', ' + shift + ', ' + alt);
	    };
	    GridBaseListener.prototype.onGridBaseShowTooltip = function (grid, index, value) {
	        if (this._del.onShowTooltip) {
	            return this._del.onShowTooltip(this._del, index.proxy(), value);
	        }
	        else {
	            this.log('onShowTooltip: ' + value, index.proxy());
	            return value;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseShowHeaderTooltip = function (grid, column, value) {
	        if (this._del.onShowHeaderTooltip) {
	            return this._del.onShowHeaderTooltip(this._del, column, value);
	        }
	        else {
	            this.log('onShowHeaderTooltip: ' + column.name + ', ' + value);
	            return value;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseColumnPropertyChanged = function (grid, column, property, value) {
	        this._del.onColumnPropertyChanged ? this._del.onColumnPropertyChanged(this._del, column, property, value) : this.log('onColumnPropertyChanged: ' + column.name + ', ' + property + ', ' + value);
	    };
	    GridBaseListener.prototype.onGridBaseShowInnerDragCursor = function (grid, cells) {
	        if (this._del.onShowInnerDragCursor) {
	            return this._del.onShowInnerDragCursor(this._del, cells);
	        }
	        else {
	            this.log('onShowInnerDragCursor: ', cells);
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseInnerDragStart = function (grid, cells) {
	        if (this._del.onInnerDragStart) {
	            this._del.onInnerDragStart(this._del, cells ? cells.proxy() : null);
	        }
	        else {
	            this.log('onInnerDragStart', cells);
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseInnerDragOver = function (grid, index, cells) {
	        if (this._del.onInnerDragOver) {
	            return this._del.onInnerDragOver(this._del, index.proxy(), cells);
	        }
	        else {
	            this.log('onInnerDragOver: ', index.proxy(), cells);
	            return null;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseInnerDrop = function (grid, dropIndex, cells) {
	        if (this._del.onInnerDrop) {
	            return this._del.onInnerDrop(this._del, dropIndex.proxy(), cells);
	        }
	        else {
	            return true;
	        }
	    };
	    GridBaseListener.prototype.onGridBaseGridActivated = function (grid) {
	        this._del.onGridActivated ? this._del.onGridActivated(this._del) : this.log('onGridActivated');
	    };
	    GridBaseListener.prototype.onGridBasePaste = function (grid, index, e) {
	        if (this._del.onPaste) {
	            return this._del.onPaste(this._del, index.proxy(), e);
	        }
	        else {
	            this.log('onPaste: ', index);
	        }
	    };
	    GridBaseListener.prototype.onGridBaseCopy = function (grid, selection, e) {
	        if (this._del.onCopy) {
	            this._del.onCopy(this._del, selection.toProxy(), e);
	        }
	        else {
	            this.log('onCopy: ', selection.toProxy());
	        }
	    };
	    GridBaseListener.prototype.onGridBasePasted = function (grid) {
	        this._del.onPasted ? this._del.onPasted(this._del) : this.log('onPasted');
	    };
	    GridBaseListener.prototype.onGridBaseCommandStackChanged = function (grid, undoable, redoable) {
	        this._del.onCommandStackChanged ? this._del.onCommandStackChanged(grid, undoable, redoable) : this.log("onImageButtonClicked: undoable" + undoable + ", redoable" + redoable);
	    };
	    GridBaseListener.prototype.getHandler = function () {
	        return this._del;
	    };
	    return GridBaseListener;
	}(DataDelegates.EventListenerBase));
	var GridViewListener = /** @class */ (function (_super) {
	    __extends(GridViewListener, _super);
	    function GridViewListener(del, view) {
	        return _super.call(this, del, view) || this;
	    }
	    GridViewListener.prototype.dispose = function () {
	        _super.prototype.dispose.call(this);
	    };
	    GridViewListener.prototype.onGridViewPageChanging = function (grid, newPage) {
	        if (this._del.onPageChanging) {
	            return this._del.onPageChanging(this._del, newPage);
	        }
	        else {
	            this.log("onPageChanging:" + newPage);
	            return true;
	        }
	    };
	    GridViewListener.prototype.onGridViewPageChanged = function (grid, page) {
	        this._del.onPageChanged ? this._del.onPageChanged(this._del, page) : this.log("onPageChanged:" + page);
	    };
	    GridViewListener.prototype.onGridViewPageCountChanged = function (grid, pageCount) {
	        this._del.onPageCountChanged ? this._del.onPageCountChanged(this._del, pageCount) : this.log("onPageCountChanged:" + pageCount);
	    };
	    GridViewListener.prototype.onGridViewGrouping = function (grid, fields) {
	        if (this._del.onGrouping) {
	            return this._del.onGrouping(this._del, fields);
	        }
	        else {
	            this.log("onGrouping", fields);
	            return true;
	        }
	    };
	    GridViewListener.prototype.onGridViewGrouped = function (grid) {
	        this._del.onGrouped ? this._del.onGrouped(this._del) : this.log("onGrouped");
	    };
	    GridViewListener.prototype.onGridViewExpanding = function (grid, group) {
	        if (this._del.onExpanding) {
	            return this._del.onExpanding(this._del, group.id);
	        }
	        else {
	            this.log("onGrouping: " + group.id);
	            return true;
	        }
	    };
	    GridViewListener.prototype.onGridViewExpanded = function (grid, group) {
	        this._del.onExpanded ? this._del.onExpanded(this._del, group.id) : this.log("onExpanded: " + group.id);
	    };
	    GridViewListener.prototype.onGridViewCollapsing = function (grid, group) {
	        if (this._del.onCollapsing) {
	            return this._del.onCollapsing(this._del, group.id);
	        }
	        else {
	            this.log("onCollapsing: " + group.id);
	            return true;
	        }
	    };
	    GridViewListener.prototype.onGridViewCollapsed = function (grid, group) {
	        this._del.onCollapsed ? this._del.onCollapsed(this._del, group.id) : this.log("onCollapsed: " + group.id);
	    };
	    return GridViewListener;
	}(GridBaseListener));
	var TreeViewListener = /** @class */ (function (_super) {
	    __extends(TreeViewListener, _super);
	    function TreeViewListener(del, view) {
	        return _super.call(this, del, view) || this;
	    }
	    TreeViewListener.prototype.dispose = function () {
	        _super.prototype.dispose.call(this);
	    };
	    TreeViewListener.prototype.onTreeViewExpanding = function (tree, itemIndex, rowId) {
	        if (this._del.onTreeItemExpanding) {
	            return this._del.onTreeItemExpanding(this._del, itemIndex, rowId);
	        }
	        else {
	            this.log("TreeItem expanding: " + itemIndex);
	            return true;
	        }
	    };
	    TreeViewListener.prototype.onTreeViewExpanded = function (tree, itemIndex, rowId) {
	        this._del.onTreeItemExpanded ? this._del.onTreeItemExpanded(this._del, itemIndex, rowId) : this.log("TreeItem expanded: " + itemIndex);
	    };
	    TreeViewListener.prototype.onTreeViewCollapsing = function (tree, itemIndex, rowId) {
	        if (this._del.onTreeItemCollapsing) {
	            return this._del.onTreeItemCollapsing(this._del, itemIndex, rowId);
	        }
	        else {
	            this.log("TreeItem collapsing: " + itemIndex);
	            return true;
	        }
	    };
	    TreeViewListener.prototype.onTreeViewCollapsed = function (tree, itemIndex, rowId) {
	        this._del.onTreeItemCollapsed ? this._del.onTreeItemCollapsed(this._del, itemIndex, rowId) : this.log("TreeItem collapsed: " + itemIndex);
	    };
	    TreeViewListener.prototype.onTreeViewChanged = function (tree, itemIndex, rowId) {
	        this._del.onTreeItemChanged ? this._del.onTreeItemChanged(this._del, itemIndex, rowId) : this.log("TreeItem item changed: " + itemIndex);
	    };
	    return TreeViewListener;
	}(GridBaseListener));
	});

	unwrapExports(ViewDelegates);
	var ViewDelegates_1 = ViewDelegates.CellType;
	var ViewDelegates_2 = ViewDelegates.GridBase;
	var ViewDelegates_3 = ViewDelegates.GridView;
	var ViewDelegates_4 = ViewDelegates.TreeView;

	var main = createCommonjsModule(function (module, exports) {
	////////////////////////////////////////////////////////////////////////////////
	// main.ts 
	// 2019. 07. 30. created by jun
	// -----------------------------------------------------------------------------
	// Copyright (c) 2019 Wooritech Inc.
	// All rights reserved.
	////////////////////////////////////////////////////////////////////////////////
	Object.defineProperty(exports, "__esModule", { value: true });






	var GridColumn_2 = GridColumn_1;








	var RealGrid = /** @class */ (function () {
	    function RealGrid() {
	    }
	    RealGrid.getVersion = function () {
	        return AppInfo.globalRealGridInfo.version;
	    };
	    RealGrid.getActiveGrid = function () {
	    };
	    RealGrid.exportGrid = function () {
	    };
	    Object.defineProperty(RealGrid, "ImageList", {
	        get: function () {
	            return ImageList_1.ImageList;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "GridView", {
	        get: function () {
	            return ViewDelegates.GridView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "TreeView", {
	        get: function () {
	            return ViewDelegates.TreeView;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "LocalDataProvider", {
	        get: function () {
	            return DataDelegates.LocalDataProvider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "LocalTreeDataProvider", {
	        get: function () {
	            return DataDelegates.LocalTreeDataProvider;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "DataType", {
	        get: function () {
	            return Types.ValueType;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "DataField", {
	        get: function () {
	            return DataField_1.DataField;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "DataColumn", {
	        get: function () {
	            return GridColumn_2.DataColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "DataOutputOptions", {
	        // static DataFillMode: typeof DataFillMode;
	        // static DataFillOptions: typeof DataFillOptions;
	        get: function () {
	            return DataOutputOptions_1.DataOutputOptions;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "RowState", {
	        get: function () {
	            return RowState_1.RowState;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "ColumnHeaderItemLocation", {
	        // static ChangingMode: typeof ChangingMode;
	        // static DropdownValueLabel: typeof DropdownValueLabel;
	        // static BackgroundImageLocation: typeof BackgroundImageLocation;
	        get: function () {
	            return Types.ColumnHeaderItemLocation;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "Column", {
	        // static SubTextLocation: typeof SubTextLocation
	        // static CellButton: typeof CellButton
	        // static ButtonVisibility: typeof ButtonVisibility
	        get: function () {
	            return GridColumn_1.GridColumn;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "Rectangle", {
	        get: function () {
	            return Rectangle_1.Rectangle;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "GroupItemImpl", {
	        /* options */
	        // static RowGroupOptions: typeof RowGroupOptions;
	        // static FixedOptions: typeof FixedOptions;
	        // static SelectOptions: typeof SelectOptions;
	        // static SortingOptions: SortingOptions;
	        // static FilterSelectorOptions: typeof FilterSelectorOptions;
	        // static FilteringOptions: typeof FilteringOptions;
	        // static GroupingOptions: typeof GroupingOptions;
	        // static ColumnHeaderOptions: typeof ColumnHeaderOptions;
	        // static ToastOptions: typeof ToastOptions;
	        // static DisplayOptions: typeof DisplayOptions;
	        // static EditOptions: typeof EditOptions;
	        // static EditorOptions: typeof EditorOptions;
	        // static CopyOptions: typeof CopyOptions;
	        // static PasteOptions: typeof PasteOptions;
	        // static SearchOptions: typeof SearchOptions;
	        // static GridExportOptions: typeof GridExportOptions;
	        // static EditValidation: typeof EditValidation;
	        // static ImageList: typeof ImageList
	        /* TODO debugger Only가 필요하다. */
	        get: function () {
	            return GridItem_1.GroupItemImpl;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "MergedGroupHeader", {
	        get: function () {
	            return GroupedItemProvider_1.MergedGroupHeader;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "GridRow", {
	        get: function () {
	            return GridItem_1.GridRow;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "CustomCellRenderer", {
	        get: function () {
	            return CustomRenderer.CustomCellRenderer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(RealGrid, "DataLoader", {
	        get: function () {
	            return DataLoader_1.DataLoader;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RealGrid;
	}());
	exports.default = RealGrid;
	});

	var main$1 = unwrapExports(main);

	return main$1;

}());
