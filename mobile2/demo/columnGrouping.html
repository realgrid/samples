
<!DOCTYPE html>
<html>
	<head>
		<title>열 그룹핑</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
	</head>
<body>
	<div id="page" data-role="page" data-theme="a" >
		<div data-role="header"  style="margin-bottom: 10px">
			<h1>열 그룹핑</h1>
			<a href="../indexdemo.html" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
		</div>
		<!-- HTML table Definition -->
		<div data-role="content">
			<div id="realgrid" style="height:500px"></div>
		</div>
		
		<!-- Java Scruipt Code -->

	<script>
	var dataProvider, gridView;
	var rows;
	var fields_01 = [{
	    "fieldName": "OrderID",
	    "dataType": "text"
	},
	{
	    "fieldName": "CustomerID",
	    "dataType": "text"
	},
	{
	    "fieldName": "EmployeeID",
	    "dataType": "text"
	},
	{
	    "fieldName": "OrderDate",
	    "dataType": "datetime",
	    "datetimeFormat": "yyyy-MM-dd",
	    "amText": "오전",
	    "pmText": "오후"
	},
	{
	    "fieldName": "CompanyName",
	    "dataType": "text"
	},
	{
	    "fieldName": "Country",
	    "dataType": "text"
	},
	{
	    "fieldName": "Phone",
	    "dataType": "text"
	},
	{
	    "fieldName": "ProductName",
	    "dataType": "text"
	},
	{
	    "fieldName": "QuantityPerUnit",
	    "dataType": "text"
	},
	{
	    "fieldName": "Quantity",
	    "dataType": "number"
	},
	{
	    "fieldName": "UnitPrice",
	    "dataType": "number"
	}];

	var columns_01 = [{
		"name":"Country",
		"fieldName":"Country",
		"type":"data",
		"width":"100",
		"header":{
			"text":"Country"
		}
	},{
		"name":"CompanyName",
		"fieldName":"CompanyName",
		"type":"data",
		"width":"120",
		"styleName":"blue-column",
		"header":{
			"text":"CompanyName",
		}
	},{
		"name":"UnitPrice2",
		"fieldName":"UnitPrice",
		"type":"data",
		"width":"100",
		"renderer":{
			"type":"bar",
			"origin":"left",
			"barWidth":"80%",
			"showTooltip":true
		},
		"header":{
			"text":"UnitPrice2"
		},
		"groupFooter":{
			"expression":"sum"
		},
		"footer":{
			"expression":"sum",
			"numberFormat":"#,000"
		}
	},{
		"name":"UnitPrice3",
		"fieldName":"UnitPrice",
		"type":"data",
		"width":"100",
		"renderer":{
			"type":"bar",
			"origin":"left",
			"barWidth":"80%",
			"showTooltip":true,
			"barStyle":"test-style"
		},
		"header":{
			"styleName":"blue-column",
			"text":"UnitPrice3"
		},
		"groupFooter":{
			"expression":"sum"
		},
		"footer":{
			"expression":"sum",
			"styles":{
				"textAlignment":"far",
				"numberFormat":"#,000"
			}
		}
	},{
		"name":"OrderID",
		"fieldName":"OrderID",
		"type":"data",
		"width":"80",
		"header":{
			"text":"Order ID",
			"showTooltip":false
		},
		"footer":{
			"expression":"max",
			"groupExpression":"max"
		}
	},{
		"name":"CustomerID",
		"fieldName":"CustomerID",
		"type":"data",
		"width":"90",
		"header":{
			"text":"Customer ID"
		}
	},{
		"name":"EmployeeID",
		"fieldName":"EmployeeID",
		"type":"data",
		"width":"90",
		"styles":{
			"textAlignment":"center"
		},
		"header":{
			"text":"Employee ID"
		},
		"footer":{
			"expression":"min",
			"groupExpression":"min"
		}
	},{
		"name":"OrderDate",
		"fieldName":"OrderDate",
		"type":"data",
		"width":"130",
		"header":{
			"text":"Order Date"
		}
	},{
		"name":"Phone",
		"fieldName":"Phone",
		"type":"data",
		"width":"100",
		"renderer":{
			"type":"button"
		},
		"header":{
			"text":"Button"
		}
	},{
		"name":"Phone",
		"fieldName":"Phone",
		"type":"data",
		"width":"100",
		"header":{
			"text":"Phone"
		}
	},{
		"name":"ProductName",
		"fieldName":"ProductName",
		"type":"data",
		"width":"200",
		"header":{
			"text":"Product Name"
		}
	},{
		"name":"QuantityPerUnit",
		"fieldName":"QuantityPerUnit",
		"type":"data",
		"width":"100",
		"header":{
			"text":"Quantity / Unit"
		}
	},{
		"name":"Quantity",
		"fieldName":"Quantity",
		"type":"data",
		"width":"100",
		"header":{
			"text":"Quantity"
		},
		"numberFormat":"#,##0",
		"footer":{
			"expression":"sum",
		}
	},{
		"name":"UnitPrice",
		"fieldName":"UnitPrice",
		"type":"data",
		"width":"100",
		"header":{
			"text":"Unit Price"
		},
		"footer":{
			"expression":"avg",
			"groupExpression":"max",
		}
	},{
		"name":"Country2",
		"fieldName":"Country",
		"type":"data",
		"width":"100",
	}]

	$(document).ready( function() {
		$(document).on( "pagecontainershow", function(){
            ScaleContentToDevice();        
        });

        $(window).on("resize orientationchange", function(){
            ScaleContentToDevice();
        });

	    dataProvider = new RealGrid.LocalDataProvider();
	    dataProvider.setFields(fields_01);
	    
	    gridView = new RealGrid.GridView("realgrid");
	    gridView.setDataSource(dataProvider);
	    gridView.setColumns(columns_01);

	    var layout3 = [
        //"OrderID",
        {
            name: "companyGroup",
            direction: "vertical",
            items: [
                {
                    items: [
                        {
                            column: "Country",
                            cellSpan: 3,
                            width: 50
                        },
                        50,50,
                        {
                            column: "CompanyName",
                            cellSpan: 3,
                            width: 50
                        },
                        50,50,
                    ],
                    header: false
                },
                {
                    items: [
                        {
                            column: "CustomerID",
                            cellSpan: 2,
                            width: 50
                        },
                        50,
                        {
                            column: "OrderDate", 
                            cellSpan: 2,
                            width: 50
                        },
                        50,
                        {
                            column: "OrderID", 
                            cellSpan: 2,
                            width: 50
                        },
                        50,
                    ],
                    header: false
                }
            ],
            header: {
                text: "Company Group",
                visible: false
            }
        }
    ];

	    gridView.setColumnLayout(layout3);

	    dataProvider.setRows(testJsonRows);
		setTimeout(function(){
			    gridView.refresh();
		},200);

		//gridView.displayOptions.fitStyle = "evenFill";

		gridView.displayOptions.emptyMessage = "표시할 데이타가 없습니다.";
		gridView.header.height = 50;
		gridView.displayOptions.rowHeight = 40;
		gridView.footer.height = 40;
		gridView.stateBar.width = 10;



		function ScaleContentToDevice(){
            var url = window.location.href;
			if(url.indexOf("indexdemo.html") == -1){
		        scroll(0, 0);
		        var content = $.mobile.getScreenHeight() - $(".ui-header").outerHeight() - $(".ui-footer").outerHeight() - $(".ui-content").outerHeight() + $(".ui-content").height() -55;
		        $(".ui-content").height(content);
		        gridView.refresh();
		    }else {
		    	var content = $.mobile.getScreenHeight() - $(".ui-header").outerHeight() - $(".ui-footer").outerHeight() - $(".ui-content").outerHeight() + $(".ui-content").height();
		        $(".ui-content").height(content);
		    }
	    }

	});




</script>
		
	</div>
</body>
</html>