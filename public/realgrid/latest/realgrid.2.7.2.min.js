
/** 
 * RealGrid v2.7.2.1534
 * Copyright (C) 2013-2023 WooriTech Inc.
 * All Rights Reserved. 
 */
var RealGrid=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){if(this instanceof t){var i=[null];return i.push.apply(i,arguments),new(Function.bind.apply(e,i))}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var o=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,o.get?o:{enumerable:!0,get:function(){return t[e]}})})),i}var i={},o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)};var n=function(){return n=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};var r=Object.create?function(t,e,i,o){void 0===o&&(o=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,o,n)}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s}function l(t){return this instanceof l?(this.v=t,this):new l(t)}var h=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var u=Object.freeze({__proto__:null,get __assign(){return n},__asyncDelegator:function(t){var e,i;return e={},o("next"),o("throw",(function(t){throw t})),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,n){e[o]=t[o]?function(e){return(i=!i)?{value:l(t[o](e)),done:!1}:n?n(e):e}:n}},__asyncGenerator:function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=i.apply(t,e||[]),r=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){n[t]&&(o[t]=function(e){return new Promise((function(i,o){r.push([t,e,i,o])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof l?Promise.resolve(i.value.v).then(h,u):d(r[0][2],i)}catch(t){d(r[0][3],t)}var i}function h(t){a("next",t)}function u(t){a("throw",t)}function d(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=s(t),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(i){e[i]=t[i]&&function(e){return new Promise((function(o,n){(function(t,e,i,o){Promise.resolve(o).then((function(e){t({value:e,done:i})}),e)})(o,n,(e=t[i](e)).done,e.value)}))}}},__await:l,__awaiter:function(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},__classPrivateFieldGet:function(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)},__classPrivateFieldIn:function(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)},__classPrivateFieldSet:function(t,e,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(t,i):n?n.value=i:e.set(t,i),i},__createBinding:r,__decorate:function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},__esDecorate:function(t,e,i,o,n,r){function s(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,l=o.kind,h="getter"===l?"get":"setter"===l?"set":"value",u=!e&&t?o.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,o.name):{}),c=!1,p=i.length-1;p>=0;p--){var _={};for(var f in o)_[f]="access"===f?{}:o[f];for(var f in o.access)_.access[f]=o.access[f];_.addInitializer=function(t){if(c)throw new TypeError("Cannot add initializers after decoration has completed");r.push(s(t||null))};var g=(0,i[p])("accessor"===l?{get:d.get,set:d.set}:d[h],_);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=s(g.get))&&(d.get=a),(a=s(g.set))&&(d.set=a),(a=s(g.init))&&n.push(a)}else(a=s(g))&&("field"===l?n.push(a):d[h]=a)}u&&Object.defineProperty(u,o.name,d),c=!0},__exportStar:function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)},__extends:function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__generator:function(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return h(e,t),e},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__param:function(t,e){return function(i,o){e(i,o,t)}},__propKey:function(t){return"symbol"==typeof t?t:"".concat(t)},__read:a,__rest:function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},__runInitializers:function(t,e,i){for(var o=arguments.length>2,n=0;n<e.length;n++)i=o?e[n].call(t,i):e[n].call(t);return o?i:void 0},__setFunctionName:function(t,e,i){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})},__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},__spreadArray:function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},__spreadArrays:function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o},__values:s}),d=e(u),c={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defineProp=void 0;e.defineProp=function(t,e,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(t.prototype,e,i)},t._dp=e.defineProp}(c);var p,_={},f={};function g(){return p||(p=1,Object.defineProperty(f,"__esModule",{value:!0}),f.licenseNo=f.globalRealGridInfo=void 0,f.globalRealGridInfo={name:"RealGrid2",version:"2.7.2.1534",license:"enterprise",code:null},f.licenseNo=""),f}var m,y={},v={};function C(){return m||(m=1,function(t){var e,i,o,n,r,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.TreeExpanderIconStyle=t.InlineFilterOperator=t.SyncGridHeight=t.GroupShowMode=t.ExitGridWhenTab=t.ExpanderVisibility=t.SummaryType=t.ItemType=t.ScrollOnEditing=t.RefreshMode=t.IconLocation=t.ButtonVisibility=t.CellButton=t.HandleVisibility=t.MenuItemType=t.SortStyle=t.DefaultShowDate=t.TextInputCase=t.RowMaskType=t.GridFitStyle=t.BlankState=t.ColumnHeaderItemLocation=t.SummaryMode=t.ValidationLevel_compare=t.ValidationLevel=t.ValidationMode=t.isFooterOnlyAdornment=t.isFooterAdornment=t.isHeaderAdornment=t.RowGroupAdornments=t.FilterMode=t.SortMode=t.PagingSource=t.SortCase=t.SortDirection=t.ValueType=t.T_LEV=t.T_FOC=t.T_IDX=t.T_HEI=t.T_FIX=t.T_ROW=t.T_VIEW=t.T_HASH=void 0,t.T_HASH="$_hash",t.T_VIEW="$_view",t.T_ROW="$_row",t.T_FIX="$_fix",t.T_HEI="$_hei",t.T_IDX="$_idx",t.T_FOC="$_foc",t.T_LEV="$_lev",(e=t.ValueType||(t.ValueType={})).TEXT="text",e.NUMBER="number",e.BOOLEAN="boolean",e.DATETIME="datetime",e.OBJECT="object",e.CHAR="char",e.UNUM="unum",e.INT="int",e.UINT="uint",e.DATE="date",(i=t.SortDirection||(t.SortDirection={})).ASCENDING="ascending",i.DESCENDING="descending",i.NONE="none",(o=t.SortCase||(t.SortCase={})).SENSITIVE="sensitive",o.INSENSITIVE="insensitive",(n=t.PagingSource||(t.PagingSource={})).ROWS="rows",n.ITEMS="items",(r=t.SortMode||(t.SortMode={})).AUTO="auto",r.EXPLICIT="explicit",(s=t.FilterMode||(t.FilterMode={})).AUTO="auto",s.EXPLICIT="explicit",function(t){t.NONE="none",t.HEADER="header",t.FOOTER="footer",t.SUMMARY="summary",t.BOTH="both"}(a=t.RowGroupAdornments||(t.RowGroupAdornments={}));t.isHeaderAdornment=function(t){return t==a.BOTH||t==a.HEADER};t.isFooterAdornment=function(t){return t==a.BOTH||t==a.FOOTER};var l,h;t.isFooterOnlyAdornment=function(t){return t==a.FOOTER||t==a.SUMMARY},(l=t.ValidationMode||(t.ValidationMode={})).ALWAYS="always",l.UPDATE="update",l.INSERT="insert",(h=t.ValidationLevel||(t.ValidationLevel={})).ERROR="error",h.WARNING="warning",h.INFO="info",h.IGNORE="ignore";var u,d,c,p,_,f,g,m,y,v,C,w,x,b,I,E,S,R,T,D,k,M,L,O={error:1,warning:2,info:3,ignore:4};t.ValidationLevel_compare=function(t,e){return O[t]-O[e]},(u=t.SummaryMode||(t.SummaryMode={})).NONE="none",u.AGGREGATE="aggregate",u.STATISTICAL="statistical",(d=t.ColumnHeaderItemLocation||(t.ColumnHeaderItemLocation={})).NONE="none",d.LEFT_EDGE="leftEdge",d.RIGHT_EDGE="rightEdge",d.TOP_EDGE="topEdge",d.BOTTOM_EDGE="bottomEdge",d.LEFT="left",d.RIGHT="right",d.TOP="top",d.BOTTOM="bottom",d.CENTER="center",(c=t.BlankState||(t.BlankState={})).NONE="none",c.HEAD="head",c.BODY="body",c.TAIL="tail",(p=t.GridFitStyle||(t.GridFitStyle={})).NONE="none",p.EVEN="even",p.EVEN_FILL="evenFill",p.FILL="fill",(_=t.RowMaskType||(t.RowMaskType={})).NONE="none",_.ROW="row",_.DATA="data",_.FILL="fill",_.CELL="cell",(f=t.TextInputCase||(t.TextInputCase={})).NORMAL="normal",f.UPPER="upper",f.LOWER="lower",f.DEFAULT="default",(g=t.DefaultShowDate||(t.DefaultShowDate={})).NORMAL="normal",g.TODAY="today",g.TODAY_WHEN_NULL="todayWhenNull",g.DEFAULT="default",g.DEFAULT_WHEN_NULL="defaultWhenNull",(m=t.SortStyle||(t.SortStyle={})).NONE="none",m.EXCLUSIVE="exclusive",m.INCLUSIVE="inclusive",m.REVERSE="reverse",(y=t.MenuItemType||(t.MenuItemType={})).NORMAL="normal",y.CHECK="check",y.RADIO="radio",y.SEPARATOR="separator",(v=t.HandleVisibility||(t.HandleVisibility={})).VISIBLE="visible",v.HOVERED="hovered",v.ALWAYS="always",v.HIDDEN="hidden",(C=t.CellButton||(t.CellButton={})).NONE="none",C.ACTION="action",C.POPUP="popup",(w=t.ButtonVisibility||(t.ButtonVisibility={})).ALWAYS="always",w.DEFAULT="default",w.VISIBLE="visible",w.HIDDEN="hidden",w.ROWFOCUSED="rowfocused",(x=t.IconLocation||(t.IconLocation={})).LEFT="left",x.RIGHT="right",x.LEFT_EDGE="leftEdge",x.RIGHT_EDGE="rightEdge",x.TOP="top",x.BOTTOM="bottom",x.TOP_EDGE="topEdge",x.BOTTOM_EDGE="bottomEdge",x.CENTER="center",(b=t.RefreshMode||(t.RefreshMode={})).ALL="all",b.VISIBLE_ONLY="visibleOnly",b.RECYCLE="recycle",(I=t.ScrollOnEditing||(t.ScrollOnEditing={})).CANCEL="cancel",I.COMMIT="commit",I.DEFAULT="default",(E=t.ItemType||(t.ItemType={})).ROW="row",E.GROUP="group",E.FOOTER="footer",E.TREE="tree",(S=t.SummaryType||(t.SummaryType={})).COUNT="count",S.SUM="sum",S.MAX="max",S.MIN="min",S.AVG="avg",S.VAR="var",S.VARP="varp",S.STDEV="stdev",S.STDEVP="stdevp",S.DATACOUNT="datacount",S.DATAAVG="dataavg",(R=t.ExpanderVisibility||(t.ExpanderVisibility={})).ALWAYS="always",R.DEFAULT="default",R.NONE="none",(T=t.ExitGridWhenTab||(t.ExitGridWhenTab={})).ROW="row",T.GRID="grid",T.NONE="none",(D=t.GroupShowMode||(t.GroupShowMode={})).EXPAND="expand",D.COLLAPSE="collapse",D.ALWAYS="always",(k=t.SyncGridHeight||(t.SyncGridHeight={})).NONE="none",k.OVER="over",k.ALWAYS="always",(M=t.InlineFilterOperator||(t.InlineFilterOperator={})).EQUAL="equal",M.NOT_EQUAL="notEqual",M.CONTAINS="contains",M.NOT_CONTAINS="notContains",M.STARTS_WITH="startsWith",M.ENDS_WITH="endsWith",M.RESET="reset",M.GREATER="greater",M.GREATER_EQUAL="greaterEqual",M.LOWER="lower",M.LOWER_EQUAL="lowerEqual",M.BETWEEN="between",M.EMPTY="empty",(L=t.TreeExpanderIconStyle||(t.TreeExpanderIconStyle={})).TRIANGLE="triangle",L.SQUARE="square"}(v)),v}var w,x,b={},I={};function E(){if(w)return I;w=1,Object.defineProperty(I,"__esModule",{value:!0}),I.Rectangle=void 0;var t=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}return _dp(t,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e}}),_dp(t,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e}}),_dp(t,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e}}),_dp(t,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e}}),_dp(t,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.getInner=function(){return new t(0,0,this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},t.prototype.rightBy=function(t){return this.width+=t,this},t.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},t.prototype.bottomBy=function(t){return this.height+=t,this},t.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},t.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},t.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},t.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},t.prototype.setWidth=function(t){return this.width=t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},t.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},t.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},t.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},t.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},t.Temp=new t,t}();return I.Rectangle=t,I}function S(){if(x)return b;x=1,Object.defineProperty(b,"__esModule",{value:!0}),b.Base64=b.Utils=b.getDocWin=b.getDoc=b.getWin=void 0;var t=E(),e="undefined"!=typeof window?window:{},i="undefined"!=typeof navigator?navigator.userAgent:"",o="undefined"!=typeof navigator?navigator.platform:"",n="undefined"!=typeof navigator?navigator.appVersion:"",r=o.toUpperCase().indexOf("MAC")>=0,s=!!e.opera||i.indexOf(" OPR/")>=0,a=!!e.whale,l=!!e.chrome&&!s,h=void 0!==e.InstallTrigger,u=!!e.safari||!l&&!s&&i.indexOf("Safari")>=0,d=i.toLowerCase().indexOf("edge/")>=0,c=/iPad|iPhone|iPod/.test(i)&&!e.MSStream,p=i.toLowerCase().indexOf("edg/")>=0&&i.toLowerCase().indexOf("chrome/")>=0,_=function(){try{for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return t>4?t:void 0}catch(t){return}}(),f=void 0!==_&&_<=9,g=void 0!==_&&_<=8,m=!!i.match(/Trident.*rv\:11\./),y=-1!==n.indexOf("MSIE 10"),v=-1!==n.indexOf("MSIE 9"),C=m||y||v,w=(new Date).getTime(),I=void 0,S=void 0,R=void 0,T=void 0;function D(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)}function k(t){return t.defaultView||t.parentWindow}b.getWin=D,b.getDoc=function(t){return t&&t.ownerDocument},b.getDocWin=k;var M=function(){function o(){}return o.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},o.setDebugging=function(t,e,i){o.$$_debugging=e,o.$$_keyLog=i},o.isDebugging=function(){return o.$$_debugging},o.setSlotMode=function(t){o.$$_slotMode=t},o.isSlotMode=function(){return o.$$_slotMode},o.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.isDebugging()&&console.log(t,e)},o.keyLog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.$$_keyLog&&console.log(t,e)},o.isArray=function(t){return Array.isArray(t)},o.isObject=function(t){return null!=t&&"object"==typeof t},o.makeArray=function(t,e){return void 0===e&&(e=!1),null!=t?o.isArray(t)?t:[t]:e?[]:void 0},o.isNumber=function(t){return"number"==typeof t},o.getNumber=function(t,e){return isNaN(parseFloat(t))?e:parseFloat(t)},o.getTimer=function(){return(new Date).getTime()-w},o.isWhiteSpace=function(t){return!t||!t.trim()},o.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},o.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,n=0;n<o;n++)if(null!=(i=t[n]))return i},o.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,n=0;n<o;n++)if(e[n]==t)return!0;return!1},o.valueIn=function(t,e){if("object"==typeof e)for(var i=Object.keys(e),o=0;o<i.length;o++)if(e[i[o]]===t)return!0;return!1},o.compareTextValue=function(t,e,i,o){if(t===e)return!0;var n=String(t),r=null==e?void 0:String(e);return!n&&!r||!(!n||!r)&&(i||(n=n.toLowerCase(),r=r.toLowerCase()),o?r.indexOf(n)>=0:n==r)},o.cast=function(t,e){return t instanceof e?t:null},o.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},o.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},o.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},o.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);for(var e=o.isArray(t)?[]:{},i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];t.hasOwnProperty(r)&&(e[r]=o.deepCopy(t[r]))}return e},o.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}return e},o.getBounds=function(e){var i=new t.Rectangle;return i.x=e.offsetLeft,i.y=e.offsetTop,i.width=e.offsetWidth,i.height=e.offsetHeight,i},o.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},o.setBounds=function(t,e,i,o,n){var r=t.style;r.left=e+"px",r.top=i+"px",r.width=o+"px",r.height=n+"px"},o.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},o.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},o.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},o.clearElements=function(t){for(var e;e=t.lastChild;)o.clearElements(e),t.removeChild(e)},o.addChild=function(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)},o.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)},o.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},o.setMobile=function(t){I=t},o.setTablet=function(t){R=t},o.isMobile=function(){return void 0!==I?I:(void 0===S&&(S=this.$_checkMobile()),S)},o.isTablet=function(){return void 0!==R?R:(void 0===T&&(T=this.$_checkTablet()),T)},o.$_checkTablet=function(){return o.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(i.toLowerCase())},o.$_checkMobile=function(){var t=!1;return(i.match(/Android/i)||i.match(/webOS/i)||i.match(/iPhone/i)||i.match(/iPad/i)||i.match(/iPod/i)||i.match(/BlackBerry/i)||i.match(/Windows Phone/i))&&(t=!0),t||(t="ontouchstart"in window&&i.indexOf("Macintosh")>=0),t},o.getBrowserSize=function(t){var e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},o.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},o.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},o.detach=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},o.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},o.getScrolled=function(t){var e=t.body,i=k(t),o=t.documentElement;return{sx:i.pageXOffset||o.scrollLeft||e.scrollLeft,sy:i.pageYOffset||o.scrollTop||e.scrollTop}},o.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,o=t.getBoundingClientRect(),n=e.body,r=e.documentElement,s=i.pageYOffset||r.scrollTop||n.scrollTop,a=i.pageXOffset||r.scrollLeft||n.scrollLeft,l=r.clientTop||n.clientTop||0,h=r.clientLeft||n.clientLeft||0,u=o.left+a-h,d=o.top+s-l;return{x:Math.round(u),y:Math.round(d)}},o.isAncestorOf=function(t,e,i){var o;if((e instanceof SVGElement||e.shadowRoot)&&i&&i.composedPath)for(var n=i.composedPath();n.length&&(o=n.shift())&&!(o instanceof HTMLElement););else o=e.parentElement;for(;o;){if(o==t)return!0;o=o.parentElement}return!1},o.getComposedPath=function(t){if(t.composedPath)return t.composedPath();for(var e=t.target,i=[];e;)i.push(e),e=e.parentElement;return i},o.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},o.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},o.equalObjects=function(t,e){return t==e||JSON.stringify(t)===JSON.stringify(e)},o.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},o.incMonth=function(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,o.month_days[o.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t},o.incYear=function(t,e){var i=t.getDate();return t.setDate(1),t.setFullYear(t.getFullYear()+e),t.setDate(Math.min(i,o.month_days[o.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t},o.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},o.addClassName=function(t,e){if(e=e||"",t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},o.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");(i=o.indexOf(e))>=0&&o.splice(i,1),t.className=o.join(" ")}},o.setStyle=function(t,e){var i=e.style;for(var o in t)null!=t[o]?i[o]=t[o]:(i.removeProperty?i.removeProperty(o):i.removeAttribute&&i.removeAttribute(o),i[o]="")},o.getBoundingClientRect2=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},o.getTextLength=function(t){for(var e=0,i=0,o=0;t&&(i=t.charCodeAt(o));o++)e+=i>>7?2:1;return e},o.isEmpty=function(t){return t&&Object.keys(t).length>0},o.isPassive=function(){if(null===o.$_supportPassive){o.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){o.$_supportPassive=!0}}))}catch(t){o.log("passive not support")}}return o.$_supportPassive},o.hangulToChosungAll=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i)-44032;e+=n>-1&&n<11172?o.cho[Math.floor(n/588)]:t[i]}return e},o.hangulToChosung=function(t){var e={cho:t,org:t};if(/[ㄱ-힝]/.test(t)){var i=o.cho,n=t.charCodeAt(0);n>=12593&&n<=12622&&(e.org=void 0),(n-=44032)>=0&&n<11172&&(e.cho=i[Math.floor(n/588)])}return e},o.addQuot=function(t,e){return t&&(t.indexOf("\n")>=0||t.indexOf("\r\n")>=0||'"'==t.charAt(0))&&(t='"'+(t=t.replace(/\"/g,'""'))+'"'),t},o.addQuatation=function(t,e,i,o){return null!=t&&((i||o)&&(i&&t&&(t=t.replace(/\n/g,i)),o&&t&&(t=t.replace(/\r/g,o))),(e||t.indexOf("\n")>=0||t.indexOf(",")>=0||t.indexOf('"')>=0)&&(t='"'+t.replace(/\"/g,'""')+'"')),null===t?"":t},o.isClickableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, a, select, button, [tabindex]"),(function(t){return e===t}))},o.isFocusableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, select"),(function(t){var i=t.type;return t===e&&"button"!==i&&"checkbox"!==i}))},o.objectToCssText=function(t){return"string"==typeof t?t:t?Object.keys(t).map((function(e){return"".concat(e.split(/(?=[A-Z])/).join("-").toLowerCase(),":").concat(t[e])})).join(";"):null},o.getLast=function(t){return t[t.length-1]},o.camelToHyphen=function(t,e,i){return void 0===i&&(i="-"),t?e?t.split(/(?=[A-Z])/).join(i).toUpperCase():t.split(/(?=[A-Z])/).join(i).toLowerCase():t},o.find=function(t,e){for(var i=0;i<t.length;i++)if(e.call(null,t[i],i,t))return t[i]},o.isInteractive=function(t){var e=D(t);return t instanceof(null==e?void 0:e.HTMLInputElement)&&"checkbox"===t.type||t instanceof(null==e?void 0:e.HTMLAnchorElement)},o.isIE=C,o.isEdge=d,o.ieAll=C||d,o.ieOld=f,o.isMac=r,o.isSafari=u,o.isChrome=l,o.isFirefox=h,o.isOpera=s,o.ieLeg=g,o.ieTen=y,o.ieNine=v,o.isiOS=c,o.isChromium=l||p||a||s,o.TextProp=o.ieAll?"innerText":"textContent",o.week_days=e.RG_CONST&&e.RG_CONST.WEEKDAYS?e.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],o.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],o.cho=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],o.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,o.$_INVISIBLE_EDIT_BOUNDS=new t.Rectangle(-1e4,-1e4,100,100),o.$$_debugging=!1,o.$$_keyLog=!1,o.$$_slotMode=!1,o.$_supportPassive=null,o}();b.Utils=M;var L=function(){function t(){}return t.encode=function(e){var i,o,n,r,s,a,l,h="",u=0,d=t.CHARACTERS;for(e=t.utf8_encode(e);u<e.length;)r=(i=e.charCodeAt(u++))>>2,s=(3&i)<<4|(o=e.charCodeAt(u++))>>4,a=(15&o)<<2|(n=e.charCodeAt(u++))>>6,l=63&n,isNaN(o)?a=l=64:isNaN(n)&&(l=64),h=h+d.charAt(r)+d.charAt(s)+d.charAt(a)+d.charAt(l);return h},t.decode=function(e){var i,o,n,r,s,a,l="",h=0,u=t.CHARACTERS;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)i=u.indexOf(e.charAt(h++))<<2|(r=u.indexOf(e.charAt(h++)))>>4,o=(15&r)<<4|(s=u.indexOf(e.charAt(h++)))>>2,n=(3&s)<<6|(a=u.indexOf(e.charAt(h++))),l+=String.fromCharCode(i),64!=s&&(l+=String.fromCharCode(o)),64!=a&&(l+=String.fromCharCode(n));return l=t.utf8_decode(l)},t.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.utf8_decode=function(t){for(var e="",i=0,o=0,n=0,r=0,s=t.length;i<s;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(n=t.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&n),i+=2):(n=t.charCodeAt(i+1),r=t.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&r),i+=3);return e},t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t.btoa=function(e){for(var i,o,n,r,s=t.CHARACTERS,a="",l=0,h=(e=String(e)).length%3;l<e.length;){if((o=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=o<<16|n<<8|r,a+=s.charAt(i>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i)}return h?a.slice(0,h-3)+"===".substring(h):a},t}();return b.Base64=L,b}var R,T={};function D(){return R||(R=1,function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.isDeletedState=t.RowState=void 0,function(t){t.NONE="none",t.CREATED="created",t.UPDATED="updated",t.DELETED="deleted",t.CREATE_AND_DELETED="createAndDeleted"}(e=t.RowState||(t.RowState={}));t.isDeletedState=function(t){return t==e.DELETED||t==e.CREATE_AND_DELETED}}(T)),T}var k,M={},L={},O={},F={};function P(){if(k)return F;k=1,Object.defineProperty(F,"__esModule",{value:!0}),F.BooleanConverter=void 0;var t=function(){function t(t){this.format=t}return _dp(t,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),t.prototype.toBool=function(t){return!!this.toBoolStrict(t)},t.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),i=this.$_toBool(t);return null!=i?i:e?Boolean(e):void 0},t.prototype.toBoolStrict=function(t){return this.$_toBool(t)},t.prototype.toText=function(t){return t?this._trueText:this._falseText},t.prototype.$_toBool=function(t){if(this._values){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},t.prototype.parse=function(t){var e=this;if(this._values={},t){this._trueText=this._falseText=null;var i=t.split(/[;\:]/),o=this._sensitive="0"!=i[2],n=i[0]?o?i[0].split(","):i[0].toLowerCase().split(","):null,r=i[1]?o?i[1].split(","):i[1].toLowerCase().split(","):null;n&&n.forEach((function(t){e._values[t]=!1,e._falseText=e._falseText||t})),r&&r.forEach((function(t){e._values[t]=!0,e._trueText=e._trueText||t}))}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},t.Default=new t("false,f,0:true,t,1:0"),t}();return F.BooleanConverter=t,F}var B,V,N={},A={};function $(){if(V)return N;V=1,Object.defineProperty(N,"__esModule",{value:!0}),N.DateTimeReader=void 0;var t=function(){if(B)return A;B=1,Object.defineProperty(A,"__esModule",{value:!0}),A.DateTimeParser=void 0;var t=S(),e=function(){function e(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}return _dp(e,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}}}),_dp(e,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)}}),_dp(e,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)}}),_dp(e,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)}}),e.prototype.parse=function(t,i){try{for(var o=0,n=1,r=1,s=0,a=0,l=0,h=0,u=0,d=0,c=this._patterns.length,p=0,_=t.length,f=0;f<c&&p<_;f++){var g=this._patterns[f],m=g.c,y=g.len;switch(m){case"y":o=parseInt(t.substr(p,y));break;case"M":n=parseInt(t.substr(p,y));break;case"d":r=parseInt(t.substr(p,y));break;case"a":if(this._amText&&t.indexOf(this._amText,p)==p)u=12,y=this._amText.length;else if("am"===t.substr(p,2).toLocaleLowerCase())u=12,y=2;else if(this._pmText&&t.indexOf(this._pmText,p)==p)d=12,y=this._pmText.length;else{if("pm"!==t.substr(p,2).toLocaleLowerCase()){if(i)throw"Invalid date value: "+t;return null}d=12,y=2}break;case"H":case"h":s=parseInt(t.substr(p,y));break;case"m":a=parseInt(t.substr(p,y));break;case"s":l=parseInt(t.substr(p,y));break;case"S":h=parseInt(t.substr(p,y));break;case".":case"/":case"-":case":":case" ":if(e.DATE_SEPARATORS.indexOf(t.charAt(p))<0){if(i)throw"Invalid date value: ".concat(t,", invalid token[").concat(t.charAt(p),"]");return null}break;default:if(i)throw"Invalid date value: ".concat(t,", invalid pattern[").concat(t.charAt(p),"]");return null}p+=y}return o<100&&(o+=this._baseYear),u>0?12==s&&(s=0):d>0&&s<12&&(s+=12),new Date(o,n-1,r,s,a,l,h)}catch(t){if(i)throw t;return null}},e.prototype.parseFormat=function(e){var i=this,o=function(t){t&&!isNaN(parseInt(t))&&(i._baseYear=parseInt(t))},n=function(t){if(t){var e=t.split(",");e.length>0&&e[0]&&(i._amText=e[0]||i._amText),e.length>1&&e[1]&&(i._pmText=e[1]||i._pmText)}},r=e.split(";");if(r.length>2)o(r[1]),n(r[2]);else if(r.length>1){var s=r[1];isNaN(parseInt(s))?s&&n(s):o(s)}var a,l,h,u=r[0],d=u.length,c=0;for(this._patterns=[];c<d;)if(a=c,l=u.charAt(c),t.Utils.isWhiteSpace(l)){for(c++;c<d&&t.Utils.isWhiteSpace(u.charAt(c));)c++;this._patterns.push({c:" ",p:a,len:c-a})}else{switch(h=0,l){case"y":4!=(h=this.getPattern(u,c,l))&&2!=h&&this.throwInvalidFormat(u);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(h=this.getPattern(u,c,l))&&this.throwInvalidFormat(u);break;case"S":3!=(h=this.getPattern(u,c,l))&&this.throwInvalidFormat(u);break;case"a":case".":case"/":case"-":case":":1!=(h=this.getPattern(u,c,l))&&this.throwInvalidFormat(u);break;default:this.throwInvalidFormat(u)}h>0&&(this._patterns.push({c:l,p:c,len:h}),c+=h)}},e.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},e.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},e.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},e.DATE_SEPARATORS="./-: ",e}();return A.DateTimeParser=e,A}(),e=function(){function e(e){this._format="",this._type=0,this._parser=new t.DateTimeParser(null),this.format=e}return e.initialize=function(){e.Default.amText="AM",e.Default.pmText="PM",e.Default.baseYear=2e3},e.getReader=function(t){var i=e.Formatters[t];return i||(e.Formatters[t]=i=new e(t)),i},e.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"!=typeof t)return null;var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,n=parseInt(e[2]);return i==(t=new Date(i,o,n)).getFullYear()&&o==t.getMonth()&&n==t.getDate()?t:null},_dp(e,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),_dp(e,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t}}),_dp(e,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t}}),_dp(e,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t}}),e.prototype.toDate=function(t,e){if(!t)return null;var i=null;switch(this._type){case 0:i=this._parser.parse(t,e);break;case 2:var o=parseInt(t);i=new Date(o);break;default:i=new Date(t)}return i&&!isNaN(i.getTime())?i:null},e.prototype.parse=function(t){if(t){if(t.indexOf("T")>0||t.indexOf("Z")>0||/([+\-])(\d\d)?(:)?(\d\d)?$/.test(t))this._type=e.Formats.indexOf("iso");else{var i=t.toLowerCase();this._type=Math.max(0,e.Formats.indexOf(i))}0==this._type&&(this._parser.format=t)}},e.Formats=["custom","iso","timestamp","platform"],e.Default=new e("yyyy/MM/dd HH:mm:ss"),e.Formatters={},e}();return N.DateTimeReader=e,e.initialize(),N}var H,U={};function G(){if(H)return U;H=1,Object.defineProperty(U,"__esModule",{value:!0}),U.Base=void 0;var t=0,e=function(){function e(e){this.$_disposed=!1,e||(this.$_hash=t++)}return e.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},e.prototype._doDispose=function(){},_dp(e,"disposing",{get:function(){return this.$_disposing}}),e.prototype.isMe=function(t){return t==this.$_hash},e.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,n=i.length;o<n;o++){var r=i[o],s=Object.getOwnPropertyDescriptor(t,r);s&&s.get&&e.push(r)}return e},e.prototype.doAssignSimple=function(t){return!1},e.prototype.assignFrom=function(t){var i=Object.getPrototypeOf(this);if(t instanceof e)for(var o=Object.getPrototypeOf(t),n={};o&&o.constructor!=e;){for(var r=this.$_getters(o),s=0,a=r.length;s<a;s++){if(!((d=r[s])in n))if(n[d]=null,c=Object.getOwnPropertyDescriptor(i,d)){if(c.set)(u=Object.getOwnPropertyDescriptor(o,d).get)&&c.set.call(this,u.call(t))}else for(var l=Object.getPrototypeOf(i);l;){var h=Object.getOwnPropertyDescriptor(l,d);if(h){var u;if(h.set)(u=Object.getOwnPropertyDescriptor(o,d).get)&&h.set.call(this,u.call(t));l=null}else l=Object.getPrototypeOf(l)}}o=Object.getPrototypeOf(o)}else if(!this.doAssignSimple(t))for(var d in t){var c;if(c=Object.getOwnPropertyDescriptor(i,d))c.set&&c.set.call(this,t[d]);else for(l=Object.getPrototypeOf(i);l;){var p=Object.getOwnPropertyDescriptor(l,d);p?(p.set&&p.set.call(this,t[d]),l=null):l=Object.getPrototypeOf(l)}}},e.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},e.prototype.toProxy=function(t){void 0===t&&(t=!0);for(var i={},o=Object.getPrototypeOf(this),n=[];o&&o.constructor!=e;){for(var r=this.$_getters(o),s=0,a=r.length;s<a;s++){var l=r[s],h=Object.getOwnPropertyDescriptor(o,l);if(h){if(h.get&&h.set&&n.indexOf(l)<0){n.push(l);var u=h.get.call(this);(t||void 0!==u)&&(i[l]=u)}}else for(var d=Object.getPrototypeOf(o);d;){var c=Object.getOwnPropertyDescriptor(d,l);if(c){if(c.get&&c.set&&n.indexOf(l)<0){n.push(l);u=c.get.call(this);(t||void 0!==u)&&(i[l]=c.get.call(this))}d=null}else d=Object.getPrototypeOf(d)}}o=Object.getPrototypeOf(o)}return i},e}();return U.Base=e,U}var W,j,z={};function Y(){if(W)return z;W=1,Object.defineProperty(z,"__esModule",{value:!0}),z.ExpressionParser=z.ExpressionNode=z.ExpressionRuntime=z.ExpressionEvaluationError=z.ExpressionSyntaxError=void 0;var t=d,e=G(),i=S(),o=function(e){function i(t,i){var o=e.call(this,t)||this;return o.message=t,o.tokenPos=i,o}return t.__extends(i,e),i}(Error);z.ExpressionSyntaxError=o;var n=function(e){function i(t){var i=e.call(this,t)||this;return i.message=t,i}return t.__extends(i,e),i}(Error);z.ExpressionEvaluationError=n;var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,n=t;o<n.length;o++){i[n[o]]=!0}return i},s=r(26,27),a=r(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),l=r(4,5,18,19),h=r(11,3,2,14,15,16,17),u=function(){function t(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var t=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=t>=1&&t<=9||11==t||t>=14&&t<=32,this.IS_END[t]=0==t;this.initProcs()}return t.prototype.clear=function(){this._source=null},t.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},t.prototype.unkownProc=function(){this._tokenId=0,this._run++},t.prototype.symbolProc=function(){this._tokenId=80,this._run++},t.prototype.commaProc=function(){this._tokenId=32,this._run++},t.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},t.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},t.prototype.equalProc=function(){this._tokenId=40,this._run++},t.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},t.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},t.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return t>e?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},t.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},t.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},t.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},t.prototype.minusProc=function(){this._tokenId=4,this._run++},t.prototype.plusProc=function(){this._tokenId=5,this._run++},t.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},t.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},t.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},t.prototype.slashProc=function(){this._tokenId=2,this._run++},t.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},t.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},t.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},t.prototype.starProc=function(){this._tokenId=3,this._run++},t.prototype.modProc=function(){this._tokenId=15,this._run++},t.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new o("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},t.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new o("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},t.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc;for(t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},_dp(t,"tokenId",{get:function(){return this._tokenId}}),_dp(t,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}}}),_dp(t,"tokenLen",{get:function(){return this._run-this._tokenPos}}),_dp(t,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)}}),_dp(t,"isSpace",{get:function(){return 71==this._tokenId}}),t.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},t.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},t.prototype.nextId=function(t){do{this.next()}while(this._run<this._len&&this._tokenId!=t);return null},t.prototype.nextNoSpace=function(){if(this._run<this._len)do{this.next()}while(this._run<this._len&&this.isSpace);return null},t.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||(10==(t=this._source.charCodeAt(e))||13==t)},t}(),c=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},i.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},i.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},i.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},i}(e.Base);z.ExpressionRuntime=c;var p=function(){function t(){}return _dp(t,"value",{get:function(){}}),_dp(t,"asLiteral",{get:function(){return null}}),t.prototype.prepareValue=function(){},t.prototype.getLiteral=function(){},t.prototype.isIdentifier=function(t){return!1},t.prototype.toString=function(){return String(this)},t}();z.ExpressionNode=p;var _=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i}(p);!function(e){function i(){return e.call(this)||this}t.__extends(i,e),i.prototype.evaluate=function(t){},i.prototype.toString=function(){return""},i.Default=new i}(p);var f=function(e){function o(){var t=e.call(this)||this;return t._operator=0,t}return t.__extends(o,e),o.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return e>i;case 42:return e>=i;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 54:return this.calcLikeHan(e,i,!1);case 56:return!this.calcLikeHan(e,i,!1);case 55:return this.calcLikeHan(e,i,!0);case 57:return!this.calcLikeHan(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new n("Unknown operator: "+this._operator)}},o.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e=this._leftExpr.toString(),i=this._rightExpr.toString(),o=void 0;switch(this._operator){case 40:o="=";break;case 45:o="<>";break;case 41:o=">";break;case 42:o=">=";break;case 43:o="<";break;case 44:o="<=";break;case 46:o="like";break;case 47:o="not like";break;case 48:o="ilike";break;case 49:o="not ilike";break;case 50:o="match";break;case 51:o="not match";break;case 52:o="imatch";break;case 53:o="not imatch";break;case 54:o="likeHan";break;case 56:o="not likehan";break;case 55:o="ilikeHan";break;case 57:o="not ilikehan";break;case 32:o=",";break;default:o="<<ERROR>>"}t="("+e+" "+o+" "+i+")"}else t=this._leftExpr.toString();return t},o.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},o.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},o.prototype.getLiteral=function(){return this._literal},o.prototype.calcLike=function(t,e,i){var o=String(t),n=String(e);if(o&&n){i&&(o=o.toLowerCase(),n=n.toLowerCase());var r=n.length;if(r>1){var s="%"==n.charAt(0),a="%"==n.charAt(r-1);return s&&a?(n=n.substr(1,r-2),o.indexOf(n,0)>=0):s?(n=n.substr(1,r-1),o.lastIndexOf(n)==o.length-n.length):a?(n=n.substr(0,r-1),0==o.indexOf(n,0)):o==n}return"%"!=n&&o==n}return!1},o.prototype.calcLikeHan=function(t,e,o){if(t&&e){t=String(t);var n=(e=String(e)).length,r="%"==e.charAt(0),s="%"==e.charAt(n-1);if(e=r&&s?e.substr(1,n-2):r?e.substr(1,n-1):s?e.substr(0,n-1):e,t.length<e.length)return;o&&(t=t.toLowerCase(),e=e.toLowerCase());var a=i.Utils.hangulToChosungAll(t),l=i.Utils.hangulToChosungAll(e),h=-1,u=void 0;if(r&&s){for(;(h=a.indexOf(l,h+1))>=0;){for(var d=0;d<l.length&&d+h<a.length;d++){var c=i.Utils.hangulToChosung(t[d+h]);if((p=i.Utils.hangulToChosung(e[d])).org&&p.org!==c.org||!p.cho||p.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(r){if((h=a.lastIndexOf(l))===a.length-l.length){for(d=0;d<l.length;d++){c=i.Utils.hangulToChosung(t[h+d]);if((p=i.Utils.hangulToChosung(e[d])).org&&p.org!==c.org||!p.cho||p.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(s){if(0===a.indexOf(l)){for(d=0;d<l.length;d++){var p;c=i.Utils.hangulToChosung(t[d]);if((p=i.Utils.hangulToChosung(e[d])).org&&p.org!==c.org||!p.cho||p.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}return t==e}return!1},o.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},o}(p),g=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),_dp(i,"value",{get:function(){}}),_dp(i,"asLiteral",{get:function(){return this}}),i.prototype.evaluate=function(t){},i}(p),m=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.toString=function(){return"defined"},i}(g),y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.toString=function(){return"empty"},i}(g),v=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),_dp(i,"value",{get:function(){return NaN}}),i.prototype.toString=function(){return"null"},i}(g),C=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.toString=function(){return"NaN"},i}(g),w=function(e){function i(t,o,n){var r=e.call(this)||this;return r._leftExpr=t,r._operator=o,r._isNot=27==o,r._value=-1,n instanceof m?r._value=i.DEFINED:n instanceof v?r._value=i.NULL:n instanceof y?r._value=i.EMPTY:n instanceof C&&(r._value=i.NAN),r}return t.__extends(i,e),i.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},i.prototype.getLiteral=function(){return null},i.prototype.evaluate=function(t){var e,o=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case i.DEFINED:e=void 0!==o;break;case i.NULL:e=null==o;break;case i.EMPTY:e=null==o||0==String(o).length;break;case i.NAN:e=null===o||isNaN(o);break;default:return}return this._isNot?!e:e},i.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case i.DEFINED:t="defined";break;case i.NULL:t="null";break;case i.EMPTY:t="empty";break;case i.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},i.DEFINED=0,i.NULL=1,i.EMPTY=2,i.NAN=3,i}(f),x=function(e){function i(t){var i=e.call(this)||this;return i._value=Number(t),i}return t.__extends(i,e),_dp(i,"value",{get:function(){return this._value}}),_dp(i,"asLiteral",{get:function(){return this}}),i.prototype.evaluate=function(t){return this._value},i.prototype.toString=function(){return String(this._value)},i}(_),b=function(e){function i(t){var i=e.call(this)||this;return i._value=parseInt(t),i}return t.__extends(i,e),_dp(i,"value",{get:function(){return this._value}}),_dp(i,"asLiteral",{get:function(){return this}}),i.prototype.evaluate=function(t){return this._value},i.prototype.toString=function(){return String(this._value)},i}(_),I=function(e){function i(t){var i=e.call(this)||this;i._value=t.substr(1,t.length-2);for(var o="",n=0,r=!1;n<i._value.length;)"\\"!=i._value[n]||r?(r=!1,o+=i._value[n++]):(r=!0,n++);return i._value=o,i}return t.__extends(i,e),_dp(i,"value",{get:function(){return this._value}}),_dp(i,"asLiteral",{get:function(){return this}}),i.prototype.evaluate=function(t){return this._value},i.prototype.toString=function(){return"'"+this._value+"'"},i}(_),E=function(e){function i(t){var i=e.call(this)||this;return i._idKey=-651212,i._literal=t,i}return t.__extends(i,e),_dp(i,"identifier",{get:function(){return this._literal}}),i.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},i.prototype.toString=function(){return this._literal},i}(p),R=function(e){function i(t,i,o){var n=e.call(this)||this;return n._idKey=-1490313,n._intIndex=NaN,n._strIndex=null,n._ident=t,n._indexer=i,n._capital=o,n}return t.__extends(i,e),i.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof f&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},i.prototype.getLiteral=function(){return null},i.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},i.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},i}(f),T=function(e){function i(t){var i=e.call(this)||this;return i._factor=t,i}return t.__extends(i,e),i.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof p&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},i.prototype.getLiteral=function(){return null},i}(p),D=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e?e.length:0},i.prototype.toString=function(){return"(len "+this._factor+")"},i}(T),k=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e?e.trim():e},i.prototype.toString=function(){return"(trim "+this._factor+")"},i}(T),M=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){return-(this._literal instanceof _?this._literal.value:this._factor.evaluate(t))},i.prototype.toString=function(){return"-"+this._factor},i}(T),L=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){return this._literal instanceof _?this._literal.value:this._factor.evaluate(t)},i.prototype.toString=function(){return"+"+this._factor},i}(T),O=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){return!(this._literal instanceof _?this._literal.value:this._factor.evaluate(t))},i.prototype.toString=function(){return"(not "+this._factor+")"},i}(T),F=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return Boolean(e)},i.prototype.toString=function(){return"(bool "+this._factor+")"},i}(T),P=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return Number(e)},i.prototype.toString=function(){return"(num "+this._factor+")"},i}(T),B=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return String(e)},i.prototype.toString=function(){return"(str "+this._factor+")"},i}(T),V=function(e){function o(t){return e.call(this,t)||this}return t.__extends(o,e),o.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var o=i.Utils.pad;e=o(e.getFullYear(),4)+o(e.getMonth()+1,2)+o(e.getDate(),2)}return String(e)},o.prototype.toString=function(){return"(datestr "+this._factor+")"},o}(T),N=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},i.prototype.toString=function(){return"(year "+this._factor+")"},i}(T),A=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},i.prototype.toString=function(){return"(month "+this._factor+")"},i}(T),$=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},i.prototype.toString=function(){return"(day "+this._factor+")"},i}(T),H=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._literal instanceof _?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},i.prototype.toString=function(){return"(hour "+this._factor+")"},i}(T),U=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(e._rightExpr){var o=e._leftExpr.evaluate(t),r=e._rightExpr.evaluate(t);if(32===e._operator){var s=Math.pow(10,r);return Math.floor(o*s)/s}throw new n("Unknown operator: "+e._operator)}return e._leftExpr.evaluate(t)},i.prototype.toString=function(){return"(rounddown "+this._factor+")"},i}(T),j=function(e){function i(){var t=e.call(this)||this;return t._factors=[],t._operators=[],t._literal=null,t}return t.__extends(i,e),i.prototype.addFactor=function(t){this._factors.push(t)},i.prototype.addOperator=function(t){this._operators.push(t)},i.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof E&&this._factors[0].identifier==t},i.prototype.prepareValue=function(){for(var t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();if(0==this._operators.length){var i=this._factors[0];this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral())}},i.prototype.getLiteral=function(){return this._literal},i.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var n=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&n;break;case 3:i*=n;break;case 2:i/=n;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(n));break;case 15:i%=n;break;case 16:i<<=n;break;case 17:i>>=n}}return i},i.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{t="("+this._factors[0].toString();for(var e=1;e<this._factors.length;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},i}(p),Y=function(e){function i(){var t=e.call(this)||this;return t._terms=[],t._operators=[],t._literal=null,t}return t.__extends(i,e),i.prototype.addTerm=function(t){this._terms.push(t)},i.prototype.addOperator=function(t){this._operators.push(t)},i.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},i.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},i.prototype.getLiteral=function(){return this._literal},i.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var n=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=n;break;case 5:i+=n;break;case 18:i=i||n;break;case 19:i^=n}}return i},i.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{t="("+this._terms[0].toString();for(var e=1;e<this._terms.length;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},i}(p),q=function(){function t(){this._node=null,this._capitalIndexers=null,this._lexer=new u}return t.prototype.syntaxError=function(t,e){throw new o(t,e)},t.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new o("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},t.prototype.nextToken=function(){this._lexer.nextNoSpace()},t.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(s[t=this._lexer.tokenId]){this.nextToken();var n=this.doSimpleExpression();n.prepareValue();var r=n.getLiteral();if(!(r instanceof g))throw new o("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new w(i,t,r)}else(e=new f)._leftExpr=i,(a[this._lexer.tokenId]||32==this._lexer.tokenId)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},t.prototype.doSimpleExpression=function(){var t=new Y;for(t.addTerm(this.doTerm());l[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},t.prototype.doTerm=function(){var t=new j;for(t.addFactor(this.doFactor());h[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},t.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new o("Unkown token: "+t,this._lexer.tokenLoc)},t.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new I(t)},t.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},t.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69==this._lexer.tokenId){this.nextToken();var e=this.doExpression();return this.expected(70),new R(t,e,this._capitalIndexers.indexOf(t)>=0)}return new E(t)},t.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new x(t)},t.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new b(t)},t.prototype.doMinus=function(){return this.nextToken(),new M(this.doFactor())},t.prototype.doPlus=function(){return this.nextToken(),new L(this.doFactor())},t.prototype.doNot=function(){return this.nextToken(),new O(this.doFactor())},t.prototype.doDefined=function(){return this.nextToken(),new m},t.prototype.doNull=function(){return this.nextToken(),new v},t.prototype.doEmpty=function(){return this.nextToken(),new y},t.prototype.doNaN=function(){return this.nextToken(),new C},t.prototype.doToBool=function(){return this.nextToken(),new F(this.doFactor())},t.prototype.doToNumber=function(){return this.nextToken(),new P(this.doFactor())},t.prototype.doToString=function(){return this.nextToken(),new B(this.doFactor())},t.prototype.doLength=function(){return this.nextToken(),new D(this.doFactor())},t.prototype.doTrim=function(){return this.nextToken(),new k(this.doFactor())},t.prototype.doToDateString=function(){return this.nextToken(),new V(this.doFactor())},t.prototype.doToYear=function(){return this.nextToken(),new N(this.doFactor())},t.prototype.doToMonth=function(){return this.nextToken(),new A(this.doFactor())},t.prototype.doToDay=function(){return this.nextToken(),new $(this.doFactor())},t.prototype.doToHour=function(){return this.nextToken(),new H(this.doFactor())},t.prototype.doRoundDown=function(){return this.nextToken(),new U(this.doFactor())},t.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},t.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},t.Default=new t,t}();return z.ExpressionParser=q,z}var q,X={};function K(){return q||(q=1,t=X,Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreMode=void 0,function(t){t.NONE="none",t.EXPLICIT="explicit",t.AUTO="auto"}(t.RestoreMode||(t.RestoreMode={}))),X;var t}var J,Z={};var Q,tt={};function et(){if(Q)return tt;Q=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.EventAware=void 0;var t=d,e=function(e){function i(){var t=e.call(this)||this;return t._listeners=[],t}return t.__extends(i,e),i.prototype._doDispose=function(){return this._listeners=null,e.prototype._doDispose.call(this)},_dp(i,"listenerCount",{get:function(){return this._listeners.length}}),i.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&e>=0?this._listeners.splice(e,0,t):this._listeners.push(t)),this},i.prototype.removeListener=function(t){if(!this.disposing&&null!=t&&this._listeners){var e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}return this},i.prototype.clearListener=function(){this._listeners.length=0},i.prototype.fireEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];r&&r.apply(n,e)}},i.prototype.fireConfirmEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if("boolean"==typeof s&&!s)return!1}}return!0},i.prototype.fireMessageEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if("string"==typeof s&&s)return s}}return null},i.prototype.fireObjectEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var n=this._listeners[i],r=n[t];if(r){var s=r.apply(n,e);if(null!=s)return s}}return null},i}(G().Base);return tt.EventAware=e,tt}var it,ot={},nt={};function rt(){if(it)return nt;it=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.DateTimeWriter=void 0;var t=S(),e=["yy","yyyy","YY","YYYY","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","T","t","Z","z","+"],i=[".","/","-",":"],o="A".charCodeAt(0),n="a".charCodeAt(0),r="Y".charCodeAt(0),s="y".charCodeAt(0),a="M".charCodeAt(0),l="m".charCodeAt(0),h="d".charCodeAt(0),u="H".charCodeAt(0),d="h".charCodeAt(0),c="S".charCodeAt(0),p="s".charCodeAt(0),_=function(t,e,i){void 0===i&&(i=0);var o=t.toString();return i&&o.length>=i?o.substr(0,i):(e=Math.max(o.length,e),("0000"+t.toString()).substr(-e))},f=function(){function f(t){this.format=t}return f.getFormatter=function(t){var e=f.Formatters[t];return e||(f.Formatters[t]=e=new f(t)),e},Object.defineProperty(f,"Default",{get:function(){return f.getFormatter(f.DEFAULT_FORMAT)}}),_dp(f,"format",{get:function(){return this._format},set:function(t){(t=t||f.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(t),this._format=t)}}),f.prototype.getText=function(t){if(!this._tokens)return"";var e=this._hasUTC,i=new Date(t);e||null==this._timeOff||(i=new Date(i.getTime()+60*i.getTimezoneOffset()*1e3+this._timeOff));for(var f=this._tokens,g="",m=e?i.getUTCHours():i.getHours(),y=0,v=f.length;y<v;y++){var C=f[y],w=C.length;switch(C.charCodeAt(0)){case r:case s:g+=_((e?i.getUTCFullYear():i.getFullYear())%Math.pow(10,w),w);break;case a:g+=_((e?i.getUTCMonth():i.getMonth())+1,w);break;case h:g+=_(e?i.getUTCDate():i.getDate(),w);break;case u:g+=_(m,w);break;case d:g+=_(this._hasAmPm?0==m?12:m>12?m-12:m:m,w);break;case l:g+=_(e?i.getUTCMinutes():i.getMinutes(),w);break;case p:g+=_(e?i.getUTCSeconds():i.getSeconds(),w);break;case n:case o:g+=m<12?this._amText:this._pmText;break;case c:g+=_(e?i.getUTCMilliseconds():i.getMilliseconds(),w,w);break;default:g+=C}}if(!e&&null!=this._timeOff){var x=this._timeOff>=0?"+":"-",b=Math.abs(this._timeOff/6e4);g+=x+"".concat(_(Math.floor(b/60),2),":").concat(_(b%60,2))}return g},f.prototype.parseDateFormatTokens=function(o){var n=[];if(o){var r,s=o.trim(),a=0;if(r=s.match(/([+\-])(\d\d)?(:)?(\d\d)?$/)){var l=r[1];if(null==r[2])this._timeOff=60*-(new Date).getTimezoneOffset()*1e3;else{var h=parseInt(r[2]),u=parseInt(r[4]||"00");this._timeOff=60*(60*h+u)*1e3,"-"===l&&(this._timeOff=-this._timeOff)}s=s.substr(0,r.index)}for(var d=s.length;a<d;){var c=s.charAt(a);if(i.indexOf(c)>=0)n.push(c),a++;else{for(var p=a++;a<d&&s.charAt(a)==c;)a++;if(c=s.substring(p,a),e.indexOf(c)<0&&/[a-zA-Z\+]/.test(c[0]))throw new Error("Invalid datetime write format: "+o);n.push(c)}if(a<d&&t.Utils.isWhiteSpace(c=s.charAt(a)))for(n.push(c);a<d&&t.Utils.isWhiteSpace(s.charAt(a));)a++}}return n},f.prototype.parse=function(t){if(this._amText="AM",this._pmText="PM",t){var e=t.split(";");this._format=e[0]||f.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,this._hasUTC=this._tokens.indexOf("z")>0||this._tokens.indexOf("Z")>0;var i=void 0;if(e.length>2?i=e[2]:e.length>1&&e[1]&&(i=e[1]),i){var o=i.split(",");o.length>0&&o[0]&&(this._amText=o[0]||this._amText),o.length>1&&o[1]&&(this._pmText=o[1]||this._pmText)}}},f.DEFAULT_FORMAT="yyyy/MM/dd",f.Formatters={},f}();return nt.DateTimeWriter=f,nt}var st,at={};function lt(){if(st)return at;st=1,Object.defineProperty(at,"__esModule",{value:!0}),at.BooleanFormatter=void 0;var t=function(){function t(t){this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},_dp(t,"format",{get:function(){return this._format}}),t.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},t.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},t.Formatters={},t}();return at.BooleanFormatter=t,at}var ht,ut,dt,ct={};function pt(){if(ht)return ct;ht=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.DecimalFormatter=void 0;var t=S(),e=".",i=",",o=function(e){return t.Utils.included(e,"c","f","C","F","a","A")},n=function(){function t(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)}}),_dp(t,"format",{get:function(){return this._format}}),_dp(t,"separator",{get:function(){return this._seperator}}),_dp(t,"groupSep",{get:function(){return this._groupSep}}),_dp(t,"minDigits",{get:function(){return this._minDigits}}),_dp(t,"maxDigits",{get:function(){return this._maxDigits}}),t.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},t.prototype.getText=function(t,i){void 0===i&&(i=!0);var o=Number(t);if(isNaN(o))return"";var n=this._minDigits,r=0;if(this._optDecimal){var s=(l=(""+o).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(l[1]?l[1].length:0)-(l[2]?+l[2]:0)):0;n=Math.min(Math.max(s,this._minDigits),this._maxDigits)}if(this._round)switch(r=Math.pow(10,n),this._round){case"c":o=Math.ceil(r*o)/r;break;case"f":var a=o.toString().split(".");o=parseFloat(a.length>1?a[0]+"."+a[1].substr(0,n):a[0])}o="a"===this._round?Math.abs(o):o;var l,h=(o=Number(o.toPrecision(15))).toFixed(n);return!i&&(r=parseFloat(h))===Math.abs(parseFloat(h))&&0===r&&(h=Math.abs(o).toFixed(n)),this._seperator&&(h=h.replace(e,this._seperator)),this._reg?n?h.replace(this._regDecimal,this._replacement):h.replace(this._reg,this._replacement):h},t.prototype._parse=function(t){if(t&&(t=t.trim()),t){var n=e,r=i;if(t.indexOf(";")>-1){var s=t.split(";");t=s[0],s.length>1&&s[1]&&!o(s[1])&&(n=s[1]),s.length>2&&s[2]&&!o(s[2])&&(r=s[2]),this._round=s[3]||s[2]||s[1],this._round=o(this._round)?this._round.toLowerCase():this._round}this._seperator=n==e?null:n,this._groupSep=r==i?null:r;var a=t.length,l=t.indexOf(e);if(this._optDecimal=t.indexOf("#",l)>0,l>=0){for(var h=l+1;h<a&&"0"==t.charAt(h);h++)this._minDigits++,this._maxDigits++;for(;h<a&&"#"==t.charAt(h);h++)this._maxDigits++;t=t.substr(0,l)}if(t){var u=t.length;t.charAt(u-1)==i&&(this._groupPos=3,t=t.substr(0,u-1))}if(t){var d=t.length,c=!0;for(h=d-1;h>=0;h--){var p=t.charAt(h);if("0"==p&&c);else if(0==this._groupPos&&p==i)this._groupPos=d-h-1;else{if("#"!=p)break;c=!1}}}this._groupPos>0&&(this._replacement="$&"+r,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+n+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+n+")","g"))}},t.DEFAULT_FORMAT="#,##0.0",t.Formatters={},t}();return ct.DecimalFormatter=n,ct}function _t(){if(ut)return ot;ut=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.DataOutputOptions=void 0;var t=d,e=G(),i=rt(),o=lt(),n=pt(),r=function(e){function r(t){var i=e.call(this)||this;return i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormatter=null,i.assignFrom(t),i}return t.__extends(r,e),_dp(r,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?i.DateTimeWriter.getFormatter(t):null)}}),_dp(r,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?o.BooleanFormatter.getFormatter(t):null)}}),_dp(r,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?n.DecimalFormatter.getFormatter(t):null)}}),_dp(r,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t}}),_dp(r,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t}}),_dp(r,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t}}),_dp(r,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t}}),_dp(r,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t}}),_dp(r,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t}}),_dp(r,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t}}),_dp(r,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(r,"booleanFormatter",{get:function(){return this._booleanFormatter}}),_dp(r,"numberFormatter",{get:function(){return this._numberFormatter}}),r}(e.Base);return ot.DataOutputOptions=r,ot}function ft(){if(dt)return L;dt=1,Object.defineProperty(L,"__esModule",{value:!0}),L.DataSource=L.ClientEditingError=L.DataSourceError=void 0;var t=d,e=function(){if(j)return O;j=1,Object.defineProperty(O,"__esModule",{value:!0}),O.DataField=void 0;var t=d,e=P(),i=$(),o=G(),n=C(),r=S(),s=Y(),a=["value","values"],l=function(o){function l(t,e,i){void 0===e&&(e=n.ValueType.TEXT),void 0===i&&(i=0);var r=o.call(this)||this;return r._index=-1,r._dataType=n.ValueType.TEXT,r._subType=null,r._runType=n.ValueType.TEXT,r._length=0,r._subTypeEnabled=!0,r._required=!1,r._updatable=!0,r._ranged=!1,r._runSet=null,r._typeLock=!1,r._objectKey=null,r._objectCallback=null,t&&(r.fieldName=t),null!=e&&(e===n.ValueType.DATE&&(e=n.ValueType.DATETIME,r._subType=n.ValueType.DATE,r._subTypeEnabled=!0),r._dataType=e),r._length=i,r}return t.__extends(l,o),_dp(l,"hash",{get:function(){return this._fieldName}}),_dp(l,"index",{get:function(){return this._index}}),_dp(l,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())}}),_dp(l,"orgFieldName",{get:function(){return this._orgFieldName}}),_dp(l,"orgAttrName",{get:function(){return this._orgAttrName}}),_dp(l,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())}}),_dp(l,"runType",{get:function(){return this._runType}}),_dp(l,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())}}),_dp(l,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())}}),_dp(l,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())}}),_dp(l,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())}}),_dp(l,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())}}),_dp(l,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())}}),_dp(l,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())}}),_dp(l,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())}}),_dp(l,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())}}),_dp(l,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)}}),_dp(l,"nullValue",{get:function(){return this._nullValue}}),_dp(l,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new e.BooleanConverter(t):null,this.changed())}}),_dp(l,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._dateParser=new i.DateTimeReader(t),this._amText&&(this._dateParser.amText=this._amText),this._pmText&&(this._dateParser.pmText=this._pmText),this._baseYear&&(this._dateParser.baseYear=this._baseYear)):this._dateParser=null,this.changed())}}),_dp(l,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())}}),_dp(l,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())}}),_dp(l,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())}}),_dp(l,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t,this._owner&&this._owner.updateField(this,!0))}}),_dp(l,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t,this._owner&&this._owner.updateField(this,!0))}}),_dp(l,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(l,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t}}),_dp(l,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t}}),_dp(l,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback}}),_dp(l,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)}}),l.prototype.isEmpty=function(t){var e=null==t||""===t;return e||this._dataType!=n.ValueType.NUMBER||(e=isNaN(t)),e},l.prototype.equalValues=function(t,e){return this._equalValues(t,e)},l.prototype.sameValues=function(t,e){return this._sameValues(t,e)},l.prototype.readValue=function(t){return this._readValue(t)},l.prototype.getBool=function(t,e){return"boolean"==typeof e?e:this._boolParser?this._boolParser.toBool(e):t.toBool(e)},l.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e,!1):t.toDate(e,!1)},l.prototype.clone=function(){var t=new l(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},l.prototype.$_resetTypes=function(t){this.resetTypes(t)},l.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},l.prototype.$_setIndex=function(t){this._index=t},l.prototype.$_prepare=function(t){this._owner=t},l.prototype.changed=function(){},l.prototype.resetTypes=function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser);var e=this._dataType,i=this._subType;if(this._runType=e,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(i)switch(e){case n.ValueType.TEXT:i==n.ValueType.CHAR&&this._length>0&&(e=i);break;case n.ValueType.NUMBER:i!=n.ValueType.UNUM&&i!=n.ValueType.INT&&i!=n.ValueType.UINT||(e=i);break;case n.ValueType.DATETIME:i==n.ValueType.DATE&&(e=i)}if(this._runType=e,this._runSet=null,this._set&&this._set.length){if(this._runType==n.ValueType.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++)(r=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(r.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==n.ValueType.DATE){for(this._runSet=[],o=0;o<this._set.length;o++){var r;if(r=this.getDate(this._ownerDateParser,this._set[o])){var s=new Date(r.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case n.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case n.ValueType.DATETIME:case n.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case n.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case n.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case n.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case n.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case n.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case n.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case n.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case n.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case n.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case n.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},l.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},l.prototype.equalDummyValues=function(t,e){return this.equalTextValues(t,e)},l.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},l.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},l.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},l.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},l.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},l.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},l.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},l.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},l.prototype.sameBoolValues=function(t,e){return this.equalBoolValues(t,e)},l.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},l.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},l.prototype.readDummyValue=function(t){return t},l.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},l.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e&&(e=e.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},l.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},l.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},l.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=t>=0?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=e>=0?Math.floor(e):Math.ceil(e)}return e}},l.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},l.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},l.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},l.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},l.prototype.readObjectValues=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Invalid Object String "+e+"\r\n"+t)}else if(null!=t&&"object"!=typeof t)try{t=JSON.parse(t)}catch(e){r.Utils.log("JSON.parse fail => ".concat(t))}return r.Utils.deepCopy(t)},l.prototype.$_compareObject=function(t,e,i,o){var n=this._objectKey,r=this._objectCallback,s=r?r(this.orgFieldName,i,t):n&&t.hasOwnProperty(n)?t[n]:null,a=r?r(this.orgFieldName,o,e):n&&e.hasOwnProperty(n)?e[n]:null;return s>a?1:s<a?-1:0},l.prototype.$_calculateValue=function(t,e,i,o,n,r,l){return this._valueCallback?this._valueCallback(t.handler,i,o,r,l):this._valueExpression?(this._exprNode||(this._exprNode=s.ExpressionParser.Default.parse(this._valueExpression,a)),e.setValues(l,n),this._exprNode.evaluate(e)):void 0},l}(o.Base);return O.DataField=l,O}(),i=D(),o=P(),n=$(),r=K(),s=function(){if(J)return Z;J=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.CalculateExpressionRuntime=void 0;var t=d,e=Y(),i=function(i){function o(){var t=i.call(this)||this;return t._values=null,t._fields=null,t._fieldCount=0,t}return t.__extends(o,i),o.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,i){if(this._values){if(t==o.ID_VALUE||t==o.ID_VALUES){if(i<0||i>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds:"+i);return this._values[i]}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},o.prototype.evaluateIndexerS=function(t,i,n){if(t!=o.ID_VALUE&&t!=o.ID_VALUES)throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._values&&this._fields){var r=this._fields.indexOf(i);if(r<0||r>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field is not exists:"+i);return this._values[r]}},o.ID_VALUE=0,o.ID_VALUES=1,o.IDENTS={value:o.ID_VALUE,values:o.ID_VALUES},o}(e.ExpressionRuntime);return Z.CalculateExpressionRuntime=i,Z}(),a=et(),l=_t(),h=S(),u=C(),c=function(){function t(){}return t.prototype.compare=function(t,e,i){return t.dataType==u.ValueType.NUMBER?Number(e)-Number(i):e>i?1:e<i?-1:0},t}(),p=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i}(Error);L.DataSourceError=p;var _=function(e){function i(){return e.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}return t.__extends(i,e),i}(Error);L.ClientEditingError=_;var f=function(a){function d(){var t=a.call(this)||this;return t._subTypeEnabled=!0,t._undoable=!1,t._insertable=!0,t._updatable=!0,t._deletable=!0,t._softDeleting=!1,t._deleteCreated=!1,t._checkStates=!0,t._restoreMode=r.RestoreMode.NONE,t._strictRestore=!1,t._booleanFormat=null,t._datetimeFormat=null,t._baseYear=2e3,t._amText="AM",t._pmText="PM",t._alertClientError=!0,t._throwClientError=!1,t._commitBeforeDataEdit=!1,t._fields=[],t._calcFields=[],t._fieldNames=[],t._fieldMap={},t._defComparer=new c,t._comparers=[],t._boolParser=o.BooleanConverter.Default,t._dateParser=n.DateTimeReader.Default,t._eventLock=0,t._resetLock=0,t._countLock=0,t._clients=[],t}return t.__extends(d,a),d.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){h.Utils.log("DataSource dispose catch error")}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,a.prototype._doDispose.call(this)},_dp(d,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++){i[e].$_resetTypes()}}}}),_dp(d,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t}}),_dp(d,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t}}),_dp(d,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t}}),_dp(d,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t}}),_dp(d,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t}}),_dp(d,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())}}),_dp(d,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}}}),_dp(d,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t}}),_dp(d,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new o.BooleanConverter(t):o.BooleanConverter.Default)}}),_dp(d,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())}}),_dp(d,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t}}),_dp(d,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())}}),_dp(d,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())}}),_dp(d,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t}}),_dp(d,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t}}),_dp(d,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t}}),_dp(d,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new s.CalculateExpressionRuntime),this._calculateRuntime}}),_dp(d,"fieldCount",{get:function(){return this._fields.length}}),_dp(d,"boolParser",{get:function(){return this._boolParser}}),_dp(d,"dateParser",{get:function(){return this._dateParser}}),_dp(d,"eventLocked",{get:function(){return this._eventLock>0}}),_dp(d,"valuesCallback",{get:function(){return this._valuesCallback},set:function(t){this._valuesCallback=t}}),d.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},d.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);e>=0&&this._clients.splice(e,1)}},d.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].cancelDataEditing()}},d.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].commitDataEditing()}},d.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},d.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},d.prototype.addField=function(t,e,i){if(this._checkClientState()){var o;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),i&&this._reCalculateFields(),this.endUpdate()}return o}},d.prototype.updateField=function(t,e){var i=0,o=this._calcFields;if(t.calculated&&o.indexOf(t)<0){i=o.length;for(var n=0;n<o.length;n++)if(o[n].index>=t.index){i=n;break}o.splice(i,0,t)}else t.calculated||(i=o.indexOf(t))>=0&&o.splice(i,1);if(e&&t.calculated){this.beginUpdate();try{this._reCalculateFields(t)}finally{this.endUpdate(!0)}}},d.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},d.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},d.prototype.getField=function(t){return"string"==typeof t&&(t=this.getFieldIndex(t)),this._fields[t]},d.prototype.getFields=function(){return this._fields.slice()},d.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var n=o[i];if(n.fieldName==e)return n}return null},d.prototype.getFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].fieldName);return t},d.prototype.getOrgFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].orgFieldName);return t},d.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},d.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},d.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},d.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},d.prototype.getBaseField=function(t){return t>=0&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},d.prototype.getValueType=function(t){return this._fields[t].dataType},d.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},d.prototype.objectToRow=function(t){var e=[],i=this._valuesCallback;if(i){var o=i.call(this,this.$_handler,t);if(o&&Array.isArray(o))return o.slice()}if(t)for(var n=0,r=this.fieldCount;n<r;n++){var s=this.getOrgFieldName(n);t.hasOwnProperty(s)&&(e[n]=t[s])}return e},d.prototype.canUpdateField=function(t,e){if(e>=0&&e<this._fields.length){if(!this._fields[e].updatable&&t>=0)try{var o=this.getRowState(t);return!o||o==i.RowState.CREATED||o==i.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},d.prototype.getDataComparer=function(t){return t>=0&&this._comparers[t]},d.prototype.setDataComparer=function(t,e){this._comparers[t]=e},d.prototype.canSummarize=function(t){return t>=0&&t<this.fieldCount},d.prototype.canAppendRow=function(){return!1},d.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var o in e)i[e[o]]=t[o];return i},d.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},d.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new _;return this._alertClientError&&alert((new _).message),!1}return!0},d.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new p("Invalid field index: "+t)},d.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++){e[t].$_setIndex(-1)}this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},d.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||t>i)throw h.Utils.isDebugging(),new p("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t),this._fieldMap[e.fieldName]=t;for(var o=t+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},d.prototype.$_addField=function(t,i,o,n){if(!t)throw new p("fieldName must be exists.");if(this.getFieldIndex(t)>=0)throw new p("fieldName is already exists: "+t);var r=new e.DataField(t,i,o);return n&&r.assignFrom(n),this.$_internalInsertField(this._fields.length,r),r},d.prototype.$_internalAddField=function(t){var i=null;return"string"==typeof t?i=this.$_addField(t,u.ValueType.TEXT,0):t instanceof e.DataField?(i=t.clone(),this.$_internalInsertField(this._fields.length,i)):t&&(i=this.$_addField(t.fieldName,t.dataType||u.ValueType.TEXT,t.length,t)),i},d.prototype._internalCalculateValues=function(t,e,i){var o=i?h.Utils.makeArray(i):this._calcFields;if(o.length>0){for(var n=[],r=0;r<t.length;r++)n[r]=this.getField(r).readValue(t[r]);r=0;for(var s=o.length;r<s;r++){var a=o[r],l=this._fieldMap[a.fieldName];t[l]=n[l]=a.readValue(a.$_calculateValue(this,this.calculateRuntime,e,a.orgFieldName,this._fieldNames,this.getOrgFieldNames(),n))}}},d.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++){e[t].$_refreshFormats(this)}},d.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},d.prototype._getRowValues=function(){return new Array(this.fieldCount)},d.prototype.$_createOutputRows=function(t,e,i){void 0===i&&(i=0);var o=this.fieldCount,n=t.length;e instanceof l.DataOutputOptions||(e=new l.DataOutputOptions(e));var r=e.nullDateText,s=e.nullText,a=e.nanText;try{for(var h=0;h<o;h++){var d=this.getField(h),c=d.dataType,p=d.orgFieldName,_=void 0,f=void 0,g=void 0,m=void 0,y=void 0,v=void 0;if(c==u.ValueType.DATETIME&&((_=e.datetimeCallback)||(m=e.datetimeWriter)||r))if(_)for(var C=0;C<n;C++){(b=t[C])[p]=_(this.handler,C+i,p,b[p])}else for(C=0;C<n;C++){var w=(b=t[C])[p];b[p]=w?m?m.getText(b[p]):w:r}else if(c==u.ValueType.BOOLEAN&&((f=e.booleanCallback)||(y=e.booleanFormatter)))if(f)for(C=0;C<n;C++){(b=t[C])[p]=f(this.handler,C+i,p,b[p])}else for(C=0;C<n;C++){(b=t[C])[p]=y.formatValue(b[p])}else if(c==u.ValueType.NUMBER&&((g=e.numberCallback)||(v=e.numberFormatter)||a))if(g)for(C=0;C<n;C++){(b=t[C])[p]=g(this.handler,C+i,p,b[p])}else for(C=0;C<n;C++){var x=(b=t[C])[p];b[p]=null==x||isNaN(x)?a:v?v.getText(x):x}else if(null!=s&&null!=s)for(C=0;C<n;C++){var b;x=(b=t[C])[p];b[p]=null==x||null==x?s:x}}}finally{e&&e.dispose()}},d.prototype.$_sortRows=function(t,e,i,o,n){do{var r=o,s=n,a=t[Math.floor((o+n)/2)];do{for(;r<=s&&!(i(e,a,t[r])<=0);)r++;for(;r<=s&&!(i(e,a,t[s])>=0);)s--;if(r<=s){if(r!=s){var l=t[r];t[r]=t[s],t[s]=l}r++,s--}}while(r<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=r}while(o<n)},d.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new n.DateTimeReader(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=n.DateTimeReader.Default},d.prototype._doCheckStatesChanged=function(){},d.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(d.COMMAND_STACK_CHANGED,t,e)},d.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",d}(a.EventAware);return L.DataSource=f,L}var gt,mt={},yt={};function vt(){if(gt)return yt;gt=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.DataTagCollection=yt.DataTag=void 0;var t=d,e=G(),i=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype.connect=function(t){},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){},i.prototype.setRows=function(){},i.prototype.setRowCount=function(t){},i.prototype.insertRow=function(t){},i.prototype.insertRows=function(t,e){},i.prototype.removeRow=function(t){},i.prototype.removeRows=function(t){},i.prototype.updateRow=function(t){},i.prototype.updateRows=function(t,e){},i.prototype.updateRowList=function(t){},i.prototype.setValue=function(t,e){},i.prototype.moveRow=function(t,e){},i.prototype.moveRows=function(t,e,i){},i.prototype.moveRowList=function(t,e){},i.prototype.changeStates=function(t){},i}(e.Base);yt.DataTag=i;var o=function(e){function i(t){var i=e.call(this)||this;return i._tags=[],i._owner=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._owner=null,this._tags=null,e.prototype._doDispose.call(this)},i.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},i.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},i.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].clearRows()}},i.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].setRows()}},i.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].setRowCount(t)}},i.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].insertRow(t)}},i.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].insertRows(t,e)}},i.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRow(t)}},i.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRows(t)}},i.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRow(t)}},i.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].updateRows(t,e)}},i.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRowList(t)}},i.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].setValue(t,e)}},i.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRow(t,e)}},i.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,n=this._tags;o<n.length;o++){n[o].moveRows(t,e,i)}},i.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRowList(t,e)}},i}(e.Base);return yt.DataTagCollection=o,yt}var Ct,wt,xt={};function bt(){if(wt)return mt;wt=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.DataProvider=void 0;var t=d,e=ft(),i=vt(),o=function(){if(Ct)return xt;Ct=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.DataFilterRuntime=xt.DataFilterCollection=xt.DataFilter=void 0;var t=d,e=Y(),i=function(){function t(t){this._active=!1,this._exprNode=null,this.criteria=t}return t.prototype.dispose=function(){this._exprNode=null},_dp(t,"criteria",{get:function(){return this._criteria},set:function(i){i!=this._criteria&&(this._criteria=i,this._exprNode=i?e.ExpressionParser.Default.parse(i,t.CAPITAL_INDEXERS):null)}}),t.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},t.CAPITAL_INDEXERS=["value","values","len"],t}();xt.DataFilter=i;var o=function(){function t(e,i){this._filterMode=t.FILTER_AND,this._or=!1,this.load(e),i&&(this.filterMode=i)}return t.prototype.dispose=function(){return this._filters&&this._filters.forEach((function(t,e){t.dispose()})),this._filters=null,null},_dp(t,"filterMode",{get:function(){return this._filterMode},set:function(e){var i=e?e.toLocaleLowerCase():e;i!=this._filterMode&&(this._filterMode=i,this._or=this._filterMode==t.FILTER_OR)}}),t.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,o=t.length;e<o;e++){var n=void 0,r=t[e];r&&("string"==typeof r?n=new i(r):r.criteria&&(n=new i(r.criteria))),n&&this._filters.push(n)}},t.prototype.prepare=function(t,e){t.prepare(e)},t.prototype.select=function(t,e,i){var o=this._filters,n=o.length;if(this._or){for(var r=0;r<n;r++)if(1==o[r].select(t,e,i))return!0;return!1}for(r=0;r<n;r++)if(0==o[r].select(t,e,i))return!1;return!0},t.FILTER_AND="and",t.FILTER_OR="or",t}();xt.DataFilterCollection=o;var n=function(i){function o(){var t=i.call(this)||this;return t._ds=null,t._fieldCount=0,t._row=-1,t._values=null,t}return t.__extends(o,i),o.prototype._doDispose=function(){this._ds=null,i.prototype._doDispose.call(this)},o.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},o.prototype.setRow=function(t,e){this._row=t,this._values=e},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){if(t===o.ID_ROW)return this._row;throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds:"+i);switch(t){case o.ID_VALUE:case o.ID_VALUES:return this._values[i]}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.evaluateIndexerS=function(t,i,n){switch(t){case o.ID_VALUE:case o.ID_VALUES:var r=this.getField(i,n);return this._values[r]}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.getField=function(t,i){var o=i?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(o<0||o>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field is not exits:"+t);return o},o.ID_ROW=0,o.ID_VALUE=1,o.ID_VALUES=2,o.IDENTS={row:o.ID_ROW,value:o.ID_VALUE,values:o.ID_VALUES},o}(e.ExpressionRuntime);return xt.DataFilterRuntime=n,xt}(),n=function(n){function r(){var t=n.call(this)||this;return t._tags=new i.DataTagCollection(t),t._filterRuntime=new o.DataFilterRuntime,t._commandListeners=[],t}return t.__extends(r,n),r.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,this._fireDispose(),n.prototype._doDispose.call(this)},r.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},_dp(r,"filters",{get:function(){return this._filters}}),_dp(r,"filterRuntime",{get:function(){return this._filterRuntime}}),_dp(r,"deletedCount",{get:function(){return 0}}),_dp(r,"tags",{get:function(){return this._tags}}),r.prototype.addTag=function(t){this._tags.add(t)},r.prototype.removeTag=function(t){this._tags.remove(t)},r.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new o.DataFilterCollection(null,t))},r.prototype.setFilters=function(t,e){!t||t instanceof o.DataFilterCollection?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new o.DataFilterCollection(t,e)},r.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new e.DataSourceError("row is out of range: "+t);for(var i={},o=0,n=this.fieldCount;o<n;o++){var r=this.getOrgFieldName(o),s=this.getValue(t,o);i[r]=s}return i},r.prototype.compareValues=function(t,e,i){return 0},r.prototype.compareTexts=function(t,e,i,o){return 0},r.prototype.compareNumbers=function(t,e,i){return 0},r.prototype.compareBools=function(t,e,i){return 0},r.prototype.compareObjects=function(t,e,i){return 0},r.prototype.summarize=function(t,e){return!1},r.prototype.summarizeRange=function(t,e,i){return!1},r.prototype.copyRows=function(t,e,i,o){},_dp(r,"hiddenCount",{get:function(){return 0}}),r.prototype.isHiddenRow=function(t){return!1},r.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},r.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;e>=0&&this._commandListeners.splice(e,1)},r.prototype.findRow=function(t,e,i){},r.prototype._doFieldsReset=function(){this._fireReset()},r.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},r.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},r.prototype._fireDispose=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDisposed")},r.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onDataProviderReset"):this._resetLock++},r.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},r.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},r.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},r.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",t,e)},r.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",t),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",t,e),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",t)},r.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",t),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",t)},r.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",t),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",t,e)},r.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",t),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",t,e),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",t),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",t,e)},r.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",t,e)},r.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",t,e,i)},r.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",t,e,i)},r.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",t,e)},r.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",t,e)},r.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",t,e,i)},r.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",t,e),this.fireEvent("onDataProviderDataChanged"))},r.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",t)},r.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",t)},r.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},r.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",t)},r.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",t,e)},r}(e.DataSource);return mt.DataProvider=n,mt}var It,Et={};function St(){if(It)return Et;It=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.SearchCellOptions=Et.SearchOptions=void 0;var t=d,e=G(),i=function(e){function i(t){var i=e.call(this)||this;return i.fields=[],i.values=[],i.startIndex=0,i.wrap=!0,i.select=!0,i.allFields=!0,i.caseSensitive=!1,i.partialMatch=!1,i.compareCallback=null,i.reverse=!1,t&&i.extend(t),i}return t.__extends(i,e),i}(e.Base);Et.SearchOptions=i;var o=function(e){function i(t){var i=e.call(this)||this;return i.fields=null,i.value=null,i.startIndex=0,i.startFieldIndex=0,i.wrap=!0,i.select=!0,i.caseSensitive=!1,i.partialMatch=!1,i.columns=null,i.compareCallback=null,i.reverse=!1,t&&i.extend(t),i}return t.__extends(i,e),i}(e.Base);return Et.SearchCellOptions=o,Et}var Rt,Tt,Dt={},kt={};function Mt(){if(Rt)return kt;Rt=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.EditCommandStack=kt.EditCommandGruop=kt.EditCommand=kt.EditCommandError=void 0;var t=d,e=G(),i=et(),o=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i}(Error);kt.EditCommandError=o;var n=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){},i.prototype.undo=function(){},i.prototype.redo=function(t){},i.prototype.execute=function(){return this.redo(!1)},i}(e.Base);kt.EditCommand=n;var r=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.undo=function(){},i.prototype.redo=function(t){},i.prototype.execute=function(){return this.redo(!1)},i}(n);kt.EditCommandGruop=r;var s=function(e){function i(t){var i=e.call(this)||this;return i._commands=[],i._current=-1,i._undoing=!1,i._redoing=!1,i._owner=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._owner=null,this._commands=null,e.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"length",{get:function(){return this._commands.length}}),_dp(i,"canUndo",{get:function(){return this._current>=0}}),_dp(i,"canRedo",{get:function(){return this._commands.length>this._current+1}}),_dp(i,"undoing",{get:function(){return this._undoing}}),_dp(i,"redoing",{get:function(){return this._redoing}}),i.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},i.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},i.prototype.execute=function(t){if(t){var e=this._current++;this._commands[this._current]=t,this.$_shrink(this._current+1);var i=void 0;try{i=t.execute()}catch(t){throw this.$_shrink(e+1),this._current=e,t}return this._changed(),i}},i.prototype.flush=function(){var t=this._commands.length;if(t>0){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},i.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},i.prototype.$_shrink=function(t){if(t>=0&&t<this._commands.length){for(var e=this._commands.length-1;e>=t;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},i}(i.EventAware);return kt.EditCommandStack=s,kt}function Lt(){if(Tt)return Dt;Tt=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.LocalDataCommandStack=Dt.LocalDataEditCommand=Dt.DataEditCommand=void 0;var t=d,e=Mt(),i=S(),o=function(e){function o(t){var i=e.call(this)||this;return i._ds=t,i}return t.__extends(o,e),o.prototype._doDispose=function(){this._ds=null,this._save=null,e.prototype._doDispose.call(this)},o.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},o.prototype.undo=function(){this._doUndo(this._ds,this._save)},o.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},o.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},o.prototype._cloneRow=function(t){if(i.Utils.isArray(t))return t.slice();if(t){var e={};for(var o in t)e[o]=t[o];return e}},o.prototype._cloneValues=function(t,e,o){if(void 0===e&&(e=0),void 0===o&&(o=-1),t){var n=t.length,r=[];o<0&&(o=n),e=Math.max(0,e);for(var s=Math.min(n,e+o),a=e;a<s;a++){var l=t[a];if(i.Utils.isArray(l))r.push(l.slice());else if(l){var h={};for(var u in l)h[u]=l[u];r.push(h)}}return r}return null},o}(e.EditCommand);Dt.DataEditCommand=o;var n=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i}(o);Dt.LocalDataEditCommand=n;var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i}(e.EditCommandStack);return Dt.LocalDataCommandStack=r,Dt}var Ot,Ft={};var Pt,Bt={};var Vt,Nt={};var At,$t={};var Ht,Ut={};var Gt,Wt={};var jt,zt={};var Yt,qt={};var Xt,Kt={};var Jt,Zt={};var Qt,te={};function ee(){if(Qt)return te;Qt=1,Object.defineProperty(te,"__esModule",{value:!0}),te.DataHelper=void 0;var t=d,e=G(),i=S();function o(t,e){return t&&t.getAttribute(e)}var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.csvToArray=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=",");for(var s=[],a=[],l=e.length,h=0,u=[],d=!1,c=!1;h<l;){var p=e.charAt(h);'"'==p?d?c&&'"'==e.charAt(h+1)?(u.push(p),h++):c?(c=!1,!n&&u.push(p)):u.push(p):(d=c=!0,!n&&u.push(p)):c||p!=r&&"\r"!=p&&"\n"!=p?(d=!0,u.push(p)):(p==r?a.push(u.join("")):"\r"!=p&&"\n"!=p||(a.push(u.join("")),s.push(a),a=[],"\n"==e.charAt(h+1)&&h++),u=[],d=!1),h++}c&&u.splice(0,0,'"'),u.length>0&&a.push(u.join("")),a.length>0&&s.push(a),i>0&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var _=t.getFields(),f=_.length,g=f>0,m=0,y=s.length;m<y;m++){a=s[m],g&&a.length>f&&(a.length=f);for(var v=0;v<f;v++)a[v]=_[v].readValue(a[v])}return s},n.xmlToRow=function(t,e,n){for(var r=t.childNodes,s=e.length,a=new Array(s),l=0,h=r.length;l<h;l++){var u,d=r[l];if((u=n.indexOf(d.tagName))>=0){var c=d.nodeValue;null==c&&d.hasChildNodes()&&(c=i.Utils.included(d.childNodes[0].nodeType,3,4)?d.childNodes[0].nodeValue:void 0),null!=c&&(a[u]=c)}}for(l=0;l<s;l++)if(void 0===a[l]){var p=o(t,n[l]);null!=p&&(a[l]=p)}return a},n.xmlToArray=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var r=null,s=n.xmlToRow,a=e?e.length:0;if(a&&(i=Math.max(0,i),o<0&&(o=a),o=Math.min(a-i,o))){var l=t.getFields(),h=t.getOrgFieldNames();l.length,r=new Array(o);for(var u=0;u<o;u++){var d=s(e[u+i],l,h);r[u]=d}}return r},n}(e.Base);return te.DataHelper=n,te}var ie,oe={};var ne,re={};var se,ae={};var le,he={};var ue,de={};var ce,pe,_e={};function fe(){if(pe)return M;pe=1,Object.defineProperty(M,"__esModule",{value:!0}),M.LocalDataProvider=void 0;var t=d,e=D(),i=ft(),o=bt(),n=S(),r=St(),s=K(),a=C(),l=Lt(),h=function(){if(Ot)return Ft;Ot=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.SetValueDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._field=o,r._value=n,r}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},i.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},i.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},i}(Lt().LocalDataEditCommand);return Ft.SetValueDataCommand=e,Ft}(),u=function(){if(Pt)return Bt;Pt=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.UpdateRowDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._values=r._cloneRow(o),r._strict=n,r}return t.__extends(i,e),i.prototype._doDispose=function(){this._values=null,e.prototype._doDispose.call(this)},i.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},i.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},i.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},i}(Lt().LocalDataEditCommand);return Bt.UpdateRowDataCommand=e,Bt}(),c=function(){if(Vt)return Nt;Vt=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.InsertRowDataCommand=void 0;var t=d,e=Lt(),i=S(),o=function(e){function o(t,o,n){var r=e.call(this,t)||this;return r._row=o,i.Utils.isArray(n)||(n=t.objectToRow(n)),r._values=n.slice(),r}return t.__extends(o,e),o.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},o.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},o.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},o}(e.LocalDataEditCommand);return Nt.InsertRowDataCommand=o,Nt}(),p=function(){if(At)return $t;At=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.RemoveRowDataCommand=void 0;var t=d,e=function(e){function i(t,i){var o=e.call(this,t)||this;return o._row=i,o}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},i.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},i.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},i}(Lt().LocalDataEditCommand);return $t.RemoveRowDataCommand=e,$t}(),_=function(){if(Ht)return Ut;Ht=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.SetRowStateDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._state=o,r._force=n,r}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},i.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},i.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},i}(Lt().LocalDataEditCommand);return Ut.SetRowStateDataCommand=e,Ut}(),f=function(){if(Gt)return Wt;Gt=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.ChangeRowStateDataCommand=void 0;var t=d,e=function(e){function i(t,i,o){var n=e.call(this,t)||this;return n._row=i,n._state=o,n}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},i.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},i.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},i}(Lt().LocalDataEditCommand);return Wt.ChangeRowStateDataCommand=e,Wt}(),g=function(){if(jt)return zt;jt=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.ClearRowStatesDataCommand=void 0;var t=d,e=Lt(),i=D(),o=function(e){function o(t,i,o){var n=e.call(this,t)||this;return n._deleteRows=i,n._rowEvents=o,n}return t.__extends(o,e),o.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},o.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},o.prototype._doUndo=function(t,e){var o=e.rows,n=e.values,r=e.states,s=[];if(n)for(var a=0;a<o.length;a++)t.$_internalInsertRow(a,n[a],e.row,!0);if(r)for(a=0;a<r.length;a++)r[a]&&(t._yieldState(a,r[a]),r[a]!==i.RowState.NONE&&s.push(a));t._yieldOrgValues(e.rows),(o.length>0||r.length>0)&&t._fireRefresh()},o}(e.LocalDataEditCommand);return zt.ClearRowStatesDataCommand=o,zt}(),m=function(){if(Yt)return qt;Yt=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.UpdateRowsDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n,r,s,a){var l=e.call(this,t)||this;return l._row=i,l._values=l._cloneValues(o,n,r),l._start=0,l._count=l._values.length,l._rowEvents=s,l._strict=a,l}return t.__extends(i,e),i.prototype._doDispose=function(){this._values=null,e.prototype._doDispose.call(this)},i.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},i.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},i.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},i}(Lt().LocalDataEditCommand);return qt.UpdateRowsDataCommand=e,qt}(),y=function(){if(Xt)return Kt;Xt=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.RemoveRowsDataCommand=void 0;var t=d,e=function(e){function i(t,i,o){var n=e.call(this,t)||this;return n._rows=i.slice(),n._rowEvents=o,n}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},i.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},i.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++)a=o[s],t._yieldState(a,r[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var h=n[s];t._yieldCommandStates(a,h.outer)}}},i}(Lt().LocalDataEditCommand);return Kt.RemoveRowsDataCommand=e,Kt}(),v=function(){if(Jt)return Zt;Jt=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.InsertRowsDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n,r,s){var a=e.call(this,t)||this;return a._row=i,a._values=a._cloneValues(o,n,r),a._start=0,a._count=a._values.length,a._rowEvents=s,a}return t.__extends(i,e),i.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},i.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},i.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}},i}(Lt().LocalDataEditCommand);return Zt.InsertRowsDataCommand=e,Zt}(),w=ee(),x=function(){if(ie)return oe;ie=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.MoveRowDataCommand=void 0;var t=d,e=function(e){function i(t,i,o){var n=e.call(this,t)||this;return n._row=i,n._newRow=o,n}return t.__extends(i,e),i.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},i.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},i.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},i}(Lt().LocalDataEditCommand);return oe.MoveRowDataCommand=e,oe}(),b=function(){if(ne)return re;ne=1,Object.defineProperty(re,"__esModule",{value:!0}),re.MoveRowsDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._count=o,r._newRow=n,r}return t.__extends(i,e),i.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},i}(Lt().LocalDataEditCommand);return re.MoveRowsDataCommand=e,re}(),I=function(){if(se)return ae;se=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.MoveRowListDataCommand=void 0;var t=d,e=function(e){function i(t,i,o){var n=e.call(this,t)||this;n._rows=i,n._newRows=i.slice();for(var r=o-i[0],s=0;s<i.length;s++)n._newRows[s]+=r;return n}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},i.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},i.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])},i}(Lt().LocalDataEditCommand);return ae.MoveRowListDataCommand=e,ae}(),E=function(){if(le)return he;le=1,Object.defineProperty(he,"__esModule",{value:!0}),he.FillValueDataCommand=void 0;var t=d,e=Lt(),i=S(),o=function(e){function o(t,o,n){var r=e.call(this,t)||this;return r._rowFields=i.Utils.deepCopy(o),r._value=n,r}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rowFields,this._value,e),e},o.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},o}(e.LocalDataEditCommand);return he.FillValueDataCommand=o,he}(),R=function(){if(ue)return de;ue=1,Object.defineProperty(de,"__esModule",{value:!0}),de.setRowCountDataCommand=void 0;var t=d,e=Lt(),i=D(),o=function(e){function o(t,o,n,r,s){void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=i.RowState.NONE);var a=e.call(this,t)||this;return a._newCount=o,a._oldCount=t.rowCount,a._fillDefaults=n,a._defaultValues=r,a._rowState=s,a}return t.__extends(o,e),o.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},o.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},o.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,o=e.statedRows;if(i.length<1&&o.length<1)return;for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++)a=o[s],t._yieldState(a,r[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var h=n[s];t._yieldCommandStates(a,h.outer)}}},o}(e.LocalDataEditCommand);return de.setRowCountDataCommand=o,de}(),T=function(){if(ce)return _e;ce=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.UpdateRowsDataCommand2=void 0;var t=d,e=Lt(),i=S(),o=function(e){function o(t,o,n,r){var s=e.call(this,t)||this;return s._values=i.Utils.deepCopy(o),s._rowEvents=n,s._strict=r,s}return t.__extends(o,e),o.prototype._doDispose=function(){this._values=null,e.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_updateRows2(this._values,this._strict,this._rowEvents,e),e},o.prototype._doRedo=function(t,e){t.$_updateRows2(this._values,this._strict,this._rowEvents,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}},o}(e.LocalDataEditCommand);return _e.UpdateRowsDataCommand2=o,_e}(),k=rt(),L=function(o){function d(t,e){var i=o.call(this)||this;return i._points=[],i._nextPoint=0,i._values=[],i._rowIds=[],i._rowStates=[],i._orgValues=null,i._needRestore=!1,i._deletedCount=0,i._nextRowId=0,i._hiddenIds=[],i.$_handler=e,t&&(i.undoable=!0,i._commands=new l.LocalDataCommandStack(i)),i}return t.__extends(d,o),d.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=this._rowIds=this._rowStates=this._points=this._orgValues=this._hiddenIds=[],o.prototype._doDispose.call(this)},_dp(d,"handler",{get:function(){return this.$_handler}}),_dp(d,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())}}),d.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},_dp(d,"rowCount",{get:function(){return this._values.length}}),_dp(d,"deletedCount",{get:function(){return this._deletedCount}}),_dp(d,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(d,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(d,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(d,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),d.prototype.getRowId=function(t){return this._rowIds[t]},d.prototype.$_internalInsertField=function(t,e){if((t=o.prototype.$_internalInsertField.call(this,t,e))>=0){for(var i=this._values.length,n=0;n<i;n++){(r=this._values[n])&&r.splice(t,0,void 0)}if(this._orgValues){i=Math.min(i,this._orgValues.length);for(n=0;n<i;n++){var r;(r=this._orgValues[n])&&r.splice(t,0,void 0)}}}return t},d.prototype.$_internalClearFields=function(){o.prototype.$_internalClearFields.call(this),this.$_clearRows()},d.prototype.setRowCount=function(t,i,o,n){void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=e.RowState.NONE),this.undoable?this._commands.execute(new R.setRowCountDataCommand(this,t,i,o,n)):this.$_setRowCount(t,i,o,n)},d.prototype.$_setRowCount=function(t,i,o,n,r){if(void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=e.RowState.NONE),void 0===r&&(r=null),this._checkClientState()){var s=this._values,a=s.length,l=Math.max(0,t);if(l!=a){var h=this._rowIds,u=this._rowStates;if(this.refreshFieldFormats(),r&&(r.rows=[],r.rowSaves=[],r.statedRows=[],r.states=[]),l>a&&(i||o)){var d=this.fieldCount,c=o;if(!c||c instanceof Array||(c=this.objectToRow(c)),c&&c.length<1&&(c=null),i||c)for(var p=c?Math.min(c.length,d):0,_=a;_<l;_++){var f=[];if(i)for(var g=0;g<d;g++){var m=this.getField(g);f[g]=void 0!==m.defaultValue?m.defaultValue:m.nullValue}if(p>0)for(g=0;g<p;g++){var y=c[g];void 0!==y&&(f[g]=this.getField(g).readValue(y))}s[_]=f}}else if(l>a)for(_=a;_<l;_++)s[_]=[];else if(l<a){if(r)for(_=l;_<a;_++){var v=_;r.statedRows.push(v),r.states.push(u[_]),r.rows.push(v),r.rowSaves.push(this._keepRow(v))}if(this._deletedCount>0)for(_=a-1;_>=l;_--)(0,e.isDeletedState)(u[_])&&this._deletedCount--}n=this.checkStates&&n?n:e.RowState.NONE,s.length=h.length=u.length=l,this._orgValues&&this._orgValues.length>l&&(this._orgValues.length=l);for(_=a;_<l;_++)u[_]=n,h[_]=this._nextRowId++;for(_=this._hiddenIds.length-1;_>=0;_--){g=this._hiddenIds[_];h.indexOf(g)<0&&this._hiddenIds.splice(_,1)}this.tags.setRowCount(l),this._fireRefresh(),this._fireRowCountChanged()}}},d.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},d.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},d.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,n=this.filters,r=this.filterRuntime,s=void 0;if(t&&(s=t.length)>0&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),n){this._values.length=this._rowIds.length=this._rowStates.length=i,n.prepare(r,this);for(var a=s,l=0,h=0,u=e;u<a&&l<i;u++){(d=t[u])instanceof Array||(d=this.objectToRow(d)),n.select(r,h++,d)&&this.$_internalSetRow(l++,d,o)}this._values.length=this._rowIds.length=this._rowStates.length=l}else{if((a=Math.min(s,e+i))>e){this._values.length=this._rowIds.length=this._rowStates.length=a-e;for(l=0,u=e;u<a;u++){var d;(d=t[u])instanceof Array||(d=this.objectToRow(d)),this.$_internalSetRow(l++,d,o)}}}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},d.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=w.DataHelper.xmlToArray(this,t,e,i),this.setRows(t))},d.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this.undoable?this._commands.execute(new v.InsertRowsDataCommand(this,t,e,i,o,n)):this.$_insertRows(t,e,i,o,n)},d.prototype.$_insertRows=function(t,e,o,n,r){if(this._checkClientState()&&e){var s=e.length;if(!(s<1)&&0!=(n=n<0?s:Math.min(s,n))){if(t<0||t>this._values.length)throw new i.DataSourceError("row is out of bounds:"+t);this.refreshFieldFormats(),o=Math.max(0,o);var a=Math.min(s,o+n);if(r)for(var l=t,h=o;h<a;h++){(u=e[h])instanceof Array||(u=this.objectToRow(u)),this.fireRowInserting(l,u)&&(this.$_internalInsertRow(l,u,!0),this.fireRowInserted(l),this._fireRowCountChanged(),l++)}else{for(l=t,h=o;h<a;h++,l++){var u;(u=e[h])instanceof Array||(u=this.objectToRow(u)),this.$_internalInsertRow(l,u,!1)}this.tags.insertRows(t,n=a-o),this.fireRowsInserted(t,n),this._fireRowCountChanged()}}}},d.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},d.prototype.insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=i;r<s.length;r++){var a=s[r];n.push(t.getRowObject(a))}if(e)for(var l=i.length-1;l>=0;l--)n[l]=this._convertValues(n[l],e);this.insertRows(o,n)},d.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},d.prototype.insertXmlRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._checkClientState()&&(e=w.DataHelper.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,n))},d.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},d.prototype.fillValue=function(t,e){if(this.undoable)return this._commands.execute(new E.FillValueDataCommand(this,t,e));this.$_fillValue(t,e)},d.prototype.updateRows=function(t,e,i,o,n,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new m.UpdateRowsDataCommand(this,t,e,i,o,r,n));this.$_updateRows(t,e,i,o,n,r)},d.prototype.updateRows2=function(t,e,i){if(this.undoable)return this._commands.execute(new T.UpdateRowsDataCommand2(this,t,i,e));this.$_updateRows2(t,e,i)},d.prototype.updateXmlRows=function(t,e,i,o,n){void 0===n&&(n=!1),this._checkClientState()&&(e=w.DataHelper.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,n))},d.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},d.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new h.SetValueDataCommand(this,t,e,i)):this.$_setValue(t,e,i)},d.prototype.$_setValue=function(t,o,n){if(!this._checkClientState())return!1;this.$_checkRowIndex(t),this._checkFieldIndex(o);var r=this.getField(o),s=this._rowStates[t];if(!r)throw new i.DataSourceError("Invalid field: "+o);if(!r.updatable&&(s==e.RowState.NONE||s==e.RowState.UPDATED))return!1;var a,l=this._values[t],h=r.readValue(n);if(l&&r.equalValues(h,l[o]))return!1;this.refreshFieldFormat(r);var u=this.checkStates&&(s==e.RowState.NONE||!s);return l||(this._values[t]=l=new Array(this.fieldCount)),u&&this._orgValues&&(a=l.concat()),l[o]=h,this._internalCalculateValues(l,t),u?(a&&(this._orgValues[t]=a),this.$_changeRowState(t,e.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(t),this.tags.setValue(t,o),this.fireValueChanged(t,o),!0},d.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new u.UpdateRowDataCommand(this,t,e,i)):this.$_updateRow(t,e,i)},d.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},d.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),n=e<0?i-1:Math.min(i-1,e);if(o>=i||n<o)return[];for(var r=n-o+1,s=new Array(r),a=0;a<r;a++)s[a]=this._values[a+o]?this._values[a+o].slice():[];return s},d.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},d.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var o=this._values.length,n=Math.max(0,t),r=e<0?o-1:Math.min(o-1,e);if(n>=o||r<n)return[];for(var s=r-n+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+n,i);return a},d.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},d.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(o,t,e),o},d.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),(e=Math.max(0,e))>=o||i<e)return null;for(var n=new Array(i-e+1),r=e;r<=i;r++){var s=this._values[r];n[r-e]=s&&s[t]}return n},d.prototype.hasData=function(t){var e=this._values;return t>=0&&t<e.length&&void 0!==e[t]&&e[t].length>0},d.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new c.InsertRowDataCommand(this,t,e)):this.$_insertRow(t,e)},d.prototype.$_insertRow=function(t,e,o){if(void 0===o&&(o=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new i.DataSourceError("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e))&&(n.Utils.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),o&&this._yieldStates(t,o),this.fireRowInserted(t),this._fireRowCountChanged(),!0)},d.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},d.prototype.removeRow=function(t){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[t]){case e.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new f.ChangeRowStateDataCommand(this,t,e.RowState.CREATE_AND_DELETED));break;case e.RowState.DELETED:case e.RowState.CREATE_AND_DELETED:return;default:return this._commands.execute(new f.ChangeRowStateDataCommand(this,t,e.RowState.DELETED))}return this._commands.execute(new p.RemoveRowDataCommand(this,t))}return this.$_removeRow(t)},d.prototype.$_removeRow=function(t){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(t),this.softDeleting&&this.checkStates){switch(this._rowStates[t]){case e.RowState.CREATED:this.deleteCreated?this.$_deleteRow(t):this.$_changeRowState(t,e.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case e.RowState.DELETED:case e.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(t,e.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)},d.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new y.RemoveRowsDataCommand(this,t,e)):this.$_removeRows(t,e,null)},d.prototype.$_removeRows=function(t,i,o){if(this._checkClientState()){var n,r=this.deleteCreated;if(t&&!((n=t.length)<1)){if(t=t.slice(),o&&(o.rows=[],o.rowSaves=[],o.statedRows=[],o.states=[]),this.softDeleting&&this.checkStates){for(var s=i?null:[],a=n;a--;){var l=t[a],h=this._rowStates[l],u=!1;switch(this.$_checkRowIndex(l),h){case e.RowState.CREATED:r||(o&&(o.statedRows.push(l),o.states.push(h)),u=this.$_changeRowState(l,e.RowState.CREATE_AND_DELETED,i,!1,!0),t.splice(a,1));break;case e.RowState.DELETED:case e.RowState.CREATE_AND_DELETED:t.splice(a,1);break;default:o&&(o.statedRows.push(l),o.states.push(h)),u=this.$_changeRowState(l,e.RowState.DELETED,i,!1,!0),t.splice(a,1)}s&&u&&s.push(l)}i||s&&s.length>0&&this.fireRowStatesChanged(s)}if((n=t.length)>0){if(n>1&&t.sort((function(t,e){return t-e})),o)for(a=0;a<n;a++){l=t[a];o.rows.push(l),o.rowSaves.push(this._keepRow(l))}if(i)for(a=n;a--;){l=t[a];this.$_checkRowIndex(l),this.$_deleteRow(l)}else if(this.fireRowsRemoving(t)){for(a=n;a--;){l=t[a],h=this._rowStates[l];this.$_checkRowIndex(l),this.$_internalRemoveRow(l),(0,e.isDeletedState)(h)&&this._deletedCount--}this.tags.removeRows(t),this.fireRowsRemoved(t),this._fireRowCountChanged()}}}}},d.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new x.MoveRowDataCommand(this,t,e)):void this.$_moveRow(t,e)},d.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},d.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new b.MoveRowsDataCommand(this,t,e,i)):void this.$_moveRows(t,e,i)},d.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},d.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort((function(t,e){return t-e})),this.undoable?this._commands.execute(new I.MoveRowListDataCommand(this,t,e)):this.$_moveRowList(t,e)},d.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];return this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0}},d.prototype.getRowState=function(t){return this.$_checkRowIndex(t),this._rowStates[t]||e.RowState.NONE},d.prototype.$_checkDeleted=function(t,i){(0,e.isDeletedState)(i)?this._deletedCount++:(0,e.isDeletedState)(t)&&!(0,e.isDeletedState)(i)&&this._deletedCount--},d.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new _.SetRowStateDataCommand(this,t,e,i)):this.$_setRowState(t,e,i)},d.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},d.prototype.setRowStates=function(t,e,i,o){var n;if((void 0===o&&(o=!1),this._checkClientState())&&(t&&!((n=t.length)<1)))if(o)for(var r=0;r<n;r++){var s=t[r];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(r=0;r<n;r++){var h=l[s=t[r]];this.$_checkRowIndex(s),e!=h&&(l[s]=e,a.push(s),this.$_checkDeleted(h,e),this._orgValues&&this.prepareOrgValues(s,h,e))}a.length>0&&this.fireRowStatesChanged(a)}},d.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new g.ClearRowStatesDataCommand(this,t,e)):this.$_clearRowStates(t,e)},d.prototype.$_clearRowStates=function(t,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkClientState()){for(var n=[],r=o?[]:null,s=o?[]:null,a=this._rowStates.length;a--;){var l=this._rowStates[a];switch(r&&(r[a]=l),s&&(s[a]=null),l){case e.RowState.CREATE_AND_DELETED:case e.RowState.DELETED:if(t){if(n.push(a),s){var h=this._keepRow(a);h&&(s[a]=h.values)}i?this.$_deleteRow(a):(this.$_internalRemoveRow(a),this.tags.removeRow(a),this._deletedCount--)}else this.$_changeRowState(a,e.RowState.NONE,i),this._deletedCount--;break;default:this.$_changeRowState(a,e.RowState.NONE,i)}}return this.$_resetOrgValues(),i||(n.length>0&&(this.fireRowsRemoved(n),this._fireRowCountChanged()),this.fireRowStatesCleared()),o?{rows:n,states:r,values:s}:void 0}},d.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},d.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++){this._rowStates[i]==t&&e.push(i)}return e},d.prototype.getAllStateRows=function(){for(var t={},i=t[e.RowState.CREATED]=[],o=t[e.RowState.UPDATED]=[],n=t[e.RowState.DELETED]=[],r=t[e.RowState.CREATE_AND_DELETED]=[],s=0,a=this._rowStates.length;s<a;s++){var l=this._rowStates[s];l===e.RowState.CREATED?i.push(s):l===e.RowState.UPDATED?o.push(s):l===e.RowState.DELETED?n.push(s):l===e.RowState.CREATE_AND_DELETED&&r.push(s)}return t},d.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(e>1)for(var n=0;n<i;n++){var r=this._rowStates[n];t.indexOf(r)>=0&&o++}else for(r=t[0],n=0;n<i;n++)this._rowStates[n]===r&&o++;return o},d.prototype.$_restoreState=function(t){if(this._rowStates[t]===e.RowState.UPDATED){var i=this._orgValues[t];if(i){for(var o=this._values[t],n=this.strictRestore,r=0,s=this.fieldCount;r<s;r++){var a=o.length>r?o[r]:void 0,l=i.length>r?i[r]:void 0,h=this.getField(r);if(n){if(!h.equalValues(a,l))return!1}else if(!h.sameValues(a,l))return!1}return this._rowStates[t]=e.RowState.NONE,!0}}return!1},d.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];n>=0&&n<this._values.length&&this.$_restoreState(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);e.length>0&&this.fireRowStatesChanged(e)}},d.prototype.$_restoreUpdatedRow=function(t){if(this._rowStates[t]===e.RowState.UPDATED){var i=this._orgValues[t];if(i){for(var o=this._values[t],n=0,r=Math.min(i.length,this.fieldCount);n<r;n++)o[n]=i[n];return this._rowStates[t]=e.RowState.NONE,!0}}return!1},d.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},d.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];n>=0&&n<this._values.length&&this.$_restoreUpdatedRow(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);e.length>0&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},d.prototype._reCalculateFields=function(t){var e=this;this._values.forEach((function(i,o){e._internalCalculateValues(i,o,t)}))},d.prototype.getUpdatedCells=function(t){var i=this.restoreMode;if(!this._orgValues||i!=s.RestoreMode.AUTO&&i!=s.RestoreMode.EXPLICIT)return null;if(null==t&&(t=this.getStateRows(e.RowState.UPDATED)),null==t)return null;for(var o=[],n=0,r=t.length;n<r;n++){var a=t[n],l=a>=0&&this._orgValues&&a<this._orgValues.length?this._orgValues[a]:null;if(l){for(var h=this._values[a],u=this.strictRestore,d=[],c=0,p=this.fieldCount;c<p;c++){var _=h.length>c?h[c]:void 0,f=l.length>c?l[c]:void 0,g=this.getField(c);g.calculated||(u?g.equalValues(_,f)||d.push({fieldName:this.getOrgFieldName(c),oldValue:l[c],newValue:h[c]}):g.sameValues(_,f)||d.push({fieldName:this.getOrgFieldName(c),oldValue:l[c],newValue:h[c]}))}d.length>0&&o.push({__rowId:a,updatedCells:d})}}return o},d.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},d.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var o=[],n=[],r=this._values,s=0,a=t.length;s<a;s++){var l=void 0;(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))>=0&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),n.push(e[s]))}var h=o.length;for(s=0;s<h;s++)o[s]=this.getField(o[s]);for(s=i,a=r.length;s<a;s++){var u=r[s],d=!0;for(l=0;l<h;l++)if(!o[l].equalValues(n[l],u[l])){d=!1;break}if(d)return s}return-1},d.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(i>0&&o>0){for(var n=new Array(o),r=0;r<o;r++){var s=e[r]&&e[r].concat();n[r]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:n,states:a}),l}return-1}},d.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var o=i.states;o&&(this._rowStates=o.concat());break}}},d.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},d.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},d.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},d.prototype.canUpdateRow=function(t){return!(this._rowStates[t]===e.RowState.NONE&&!this.updatable)},d.prototype.canAppendRow=function(){return!0},d.prototype.canInsertRow=function(t){return!0},d.prototype.canDeleteRow=function(t){return!0},d.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=a.SortDirection.ASCENDING),e=arguments.length>1?e:-1,this._checkFieldIndex(t),e<0&&(e=this._values.length),e>0){for(var o=this.getField(t).dataType,r=[],s=[],l=void 0,h=0,u=this.rowCount;h<u;h++)switch(l=this._values[h]?this._values[h][t]:void 0,o){case a.ValueType.NUMBER:null!=l&&isNaN(l)||r.indexOf(l)<0&&r.push(l);break;case a.ValueType.DATE:case a.ValueType.DATETIME:l?s.indexOf(l.getTime())<0&&(s.push(l.getTime()),r.push(l)):s.indexOf(void 0)<0&&(s.push(void 0),r.push(void 0));break;case a.ValueType.OBJECT:default:r.indexOf(l)<0&&r.push(l)}return i!==a.SortDirection.NONE&&(r=n.Utils.included(o,a.ValueType.DATETIME,a.ValueType.DATE,a.ValueType.NUMBER)?r.sort((function(t,e){return t-e})):r.sort(),i===a.SortDirection.DESCENDING&&(r=r.reverse())),r.slice(0,e)}return null},d.prototype.compareValues=function(t,e,i,o){var n=this._values[e],r=this._values[i];if(n===r)return 0;var s=n?n[t]:null,a=r?r[t]:null;return null==s?null==a?0:-1:null==a||(s=o?String(s).toLowerCase():s)>(a=o?String(a).toLowerCase():a)?1:s<a?-1:0},d.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},d.prototype.compareNumbers=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:NaN,s=n?n[t]:NaN;return isNaN(r)?isNaN(s)?0:-1:isNaN(s)||r>s?1:r<s?-1:0},d.prototype.compareDates=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r instanceof Date?s instanceof Date?r>s?1:r<s?-1:0:1:s instanceof Date?-1:0},d.prototype.compareBools=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=!!o&&Boolean(o[t]),s=!!n&&Boolean(n[t]);return r&&!s?1:!r&&s?-1:0},d.prototype.compareObjects=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e,i):1:s?-1:0},d.prototype.summarize=function(t,e){var i=this.rowCount;if(i<1)return!1;for(var o=[],n=0;n<i;n++)o.push(n);return this.summarizeRange(t,o,e)},d.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n,r,s,l=this.getField(t.field).dataType===a.ValueType.NUMBER,h=0,u=t.field,d=0;d<o;){var c=e[d++];null==(m=(g=this._values[c])&&g[u])||l&&(!l||isNaN(m))||(l&&(n=h?n+m:m),(l||""!=m)&&h++,(null==r||m<r)&&(r=m),(null==s||m>s)&&(s=m))}if(t.count=o,h>0)if(t.sum=n,t.min=r,t.max=s,l&&(t.avg=n/o),t.dataCount=h,l&&(t.dataAvg=n/h),i&&l){for(var p=0,_=t.avg,f=0;f<o;f++){var g,m;c=e[f];null!=(m=(g=this._values[c])&&g[u])&&(p+=Math.pow(m-_,2))}t.varsp=p/o,t.vars=p/(o-1)}else t.varsp=NaN,t.vars=NaN;return!0},d.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},d.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},d.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},d.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},d.prototype._keepState=function(t){return this._rowStates[t]},d.prototype._yieldState=function(t,e){this._rowStates[t]=e},d.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},d.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},d.prototype.$_checkRowIndex=function(t){if(isNaN(t)||t<0||t>=this._values.length)throw n.Utils.isDebugging(),new i.DataSourceError("row is out of bounds: "+t)},d.prototype.$_resetOrgValues=function(){var t=this.restoreMode;this._orgValues=this.checkStates&&t!=s.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&t==s.RestoreMode.AUTO},d.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),n=0;n<i;n++)o[n]=this.getField(n).readValue(t[n]);return this._internalCalculateValues(o,e),o},d.prototype.$_internalSetRow=function(t,i,o){var n=this.arrayToRow(i,t);this._values[t]=n,this._rowIds[t]=this._nextRowId++,this.checkStates&&(this._rowStates[t]=e.RowState.NONE)},d.prototype.$_internalInsertRow=function(t,i,o){var n=this.arrayToRow(i,t),r=t==this._values.length;r?(this._values.push(n),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,n),this._rowIds.splice(t,0,this._nextRowId++)),o&&this.tags.insertRow(t),r?this._rowStates.push(this.checkStates?e.RowState.CREATED:e.RowState.NONE):(this._rowStates.splice(t,0,this.checkStates?e.RowState.CREATED:e.RowState.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},d.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e))&&(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),!0)},d.prototype.$_updateRows=function(t,i,o,n,r,s,a){if(void 0===a&&(a=null),this._checkClientState()&&i){var l=i.length;if(!(l<1)&&0!=(n=n<0?l:Math.min(l,n))){o=Math.max(0,o),this.refreshFieldFormats();var h=this.rowCount,u=Math.min(l,o+n);if(!(u<=o))if(a&&(a.rows=[],a.values=[],a.states=[],a.orgValues=[]),s)for(var d=t,c=o;c<u&&d<h;c++,d++){var p=i[c];!this._values[d]&&(this._values[d]=new Array(this.fieldCount)),this.fireRowUpdating(d,p)&&(a&&(a.rows.push(d),a.values.push(this._values[d].slice()),a.states.push(this._rowStates[d]),a.orgValues.push(this._orgValues&&this._orgValues[d])),this.$_internalUpdateRow(d,p,r,!0,!0),this.fireRowUpdated(d))}else{var _=[];for(d=t,c=o;c<u&&d<h;c++,d++){this._rowStates[d]==e.RowState.NONE&&_.push(d),!this._values[d]&&(this._values[d]=new Array(this.fieldCount)),a&&(a.rows.push(d),a.values.push(this._values[d].slice()),a.states.push(this._rowStates[d]),a.orgValues.push(this._orgValues&&this._orgValues[d]));p=i[c];this.$_internalUpdateRow(d,p,r,!1,!1)}_.length>0&&this.fireRowStatesChanged(_),this.tags.updateRows(t,n=u-o),this.fireRowsUpdated(t,n)}}}},d.prototype.$_updateRows2=function(t,i,o,n){var r=this;if(this._checkClientState()&&t)if(this.refreshFieldFormats(),n&&(n.rows=[],n.values=[],n.states=[],n.orgValues=[]),Object.keys(t).forEach((function(t){return r.$_checkRowIndex(parseInt(t))})),o)for(var s in t){var a=Number(s),l=t[s];!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),this.fireRowUpdating(a,l)&&(n&&(n.rows.push(a),n.values.push(this._values[a].slice()),n.states.push(this._rowStates[a]),n.orgValues.push(this._orgValues&&this._orgValues[a])),this.$_internalUpdateRow(a,l,i,!0,!0),this.fireRowUpdated(a))}else{var h=[],u=[];for(var s in t){a=Number(s);this._rowStates[a]==e.RowState.NONE&&h.push(a),!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),n&&(n.rows.push(a),n.values.push(this._values[a].slice()),n.states.push(this._rowStates[a]),n.orgValues.push(this._orgValues&&this._orgValues[a]));l=t[s];this.$_internalUpdateRow(a,l,i,!1,!1),u.push(a)}h.length>0&&this.fireRowStatesChanged(h),this.tags.updateRowList(u),this.fireRowListUpdated(u)}},d.prototype.$_fillValue=function(t,i,o){if(void 0===o&&(o=null),this._checkClientState()&&Object.keys(t).length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);var n=[],r=[];for(var s in t){r.push(+s),this._rowStates[s]==e.RowState.NONE&&n.push(+s),!this._values[s]&&(this._values[s]=new Array(this.fieldCount)),o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s]));for(var a=this._values[s].slice(),l=0,h=t[s];l<h.length;l++){a[h[l]]=i}this.$_internalUpdateRow(+s,a,!1,!1,!1)}n.length>0&&this.fireRowStatesChanged(n),this.tags.updateRowList(r),this.fireRowListUpdated(r)}},d.prototype.$_internalUpdateRow=function(t,i,o,r,s){var a,l=this.getFields(),h=n.Utils.isArray(i),u=Math.min(l.length,h?i.length:l.length),d=this._values[t],c=this._rowStates[t],p=this.checkStates&&(c==e.RowState.NONE||!c);d||(this._values[t]=d=new Array(this.fieldCount)),p&&this._orgValues&&(a=n.Utils.deepCopy(d));for(var _=!1,f=0;f<u;f++){var g=l[f];if((g.updatable||c==e.RowState.CREATED||c==e.RowState.CREATE_AND_DELETED)&&(h||i.hasOwnProperty(g.orgFieldName))){var m=h?i[f]:i[g.orgFieldName];o&&void 0===m||(_=!this._needRestore||(_||(o?!g.equalValues(d[f],g.readValue(m)):!g.sameValues(d[f],g.readValue(m)))),d[f]=g.readValue(m))}}_&&this._internalCalculateValues(d,t),p&&_?(a&&(this._orgValues[t]=a),this.$_changeRowState(t,e.RowState.UPDATED,r)):this._needRestore&&this.restoreState(t),s&&this.tags.updateRow(t)},d.prototype.$_changeRowState=function(t,i,o,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),this.checkStates||n){var s=this._rowStates[t];if((i=i||e.RowState.NONE)!=s)return this._rowStates[t]=i,r&&(!(0,e.isDeletedState)(s)&&(0,e.isDeletedState)(i)?this._deletedCount++:(0,e.isDeletedState)(s)&&!(0,e.isDeletedState)(i)&&this._deletedCount--),o&&this.fireRowStateChanged(t),!0}return!1},d.prototype.restoreState=function(t){if(this._rowStates[t]===e.RowState.UPDATED){var i=this._orgValues[t];if(i){for(var o=this._values[t],n=this.strictRestore,r=0,s=this.fieldCount;r<s;r++){var a=o.length>r?o[r]:void 0,l=i.length>r?i[r]:void 0;if(n){if(!this.getField(r).equalValues(a,l))return!1}else if(!this.getField(r).sameValues(a,l))return!1}return this._rowStates[t]=e.RowState.NONE,!0}}return!1},d.prototype.prepareOrgValues=function(t,i,o){o==e.RowState.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:i==e.RowState.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},d.prototype.$_changeRowStateEx=function(t,e,i,o,n){var r=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,n)&&(this._orgValues&&this.prepareOrgValues(t,r,e),i&&this.fireRowStateChanged(t),!0)},d.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o){for(var n=0;n<this.fieldCount;n++){i[this.getOrgFieldName(n)]=o[n]}e&&(i.__rowState=this.getRowState(t))}return i},d.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var i=this._rowStates[t];return this.$_internalRemoveRow(t),(0,e.isDeletedState)(i)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},d.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];this._hiddenIds.indexOf(e)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},d.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],n=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,n),this._orgValues&&(this._orgValues.length=Math.max(this._orgValues.length,e+1),i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},d.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),n=this._rowIds.splice(t,e),r=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,n[s]),this._rowStates.splice(i+s,0,r[s]);if(this._orgValues){this._orgValues.length=Math.max(this._orgValues.length,i+e+1);for(s=0,a=(o=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,o[s])}},d.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],n=[],r=t.length-1;r>=0;r--){var s=t[r];i.push(this._values.splice(s,1)[0]),o.push(this._rowIds.splice(s,1)[0]),n.push(this._rowStates.splice(s,1)[0])}i=i.reverse(),o=o.reverse(),n=n.reverse();r=0;for(var a=t.length;r<a;r++)this._values.splice(e+r,0,i[r]),this._rowIds.splice(e+r,0,o[r]),this._rowStates.splice(e+r,0,n[r]);if(this._orgValues){i=[],this._orgValues.length=Math.max(this._orgValues.length,e+t.length+1);for(r=t.length-1;r>=0;r--)i.push(this._orgValues.splice(t[r],1)[0]);i=i.reverse();for(r=0,a=t.length;r<a;r++)this._orgValues.splice(e+r,0,i[r])}},d.prototype.$_searchDataRow=function(t,e,i,o,r){var s=this.rowCount;if(s<1)return-1;var l=Math.min(t.length,e.length);if(l<1)return-1;for(var h=i.allFields,u=i.caseSensitive,d=i.partialMatch,c=null,p=[],_=i.reverse,f=i.compareCallback||n.Utils.compareTextValue,g=0;g<l;g++)p[g]=this.getField(t[g]).dataType;o=Math.max(0,o),r=Math.min(s-1,r);for(var m=o;_?m>=r:m<=r;_?m--:m++){var y=!0;for(g=0;g<l;g++){var v=this.getValue(m,t[g]),C=this.getOrgFieldName(t[g]);switch(p[g]){case a.ValueType.DATETIME:case a.ValueType.DATE:if(e[g]instanceof Date)y=f.call(this.$_handler,e[g],v,u,d,m,C);else{if(!c){var w=/[.]/.test(e[g])?"yyyy.MM.dd":/[/]/.test(e[g])?"yyyy/MM/dd":/[-]/.test(e[g])?"yyyy-MM-dd":"yyyyMMdd";c=new k.DateTimeWriter(w)}y=f.call(this.$_handler,e[g],v?c.getText(v):v,u,d,m,C)}break;default:y=f.call(this.$_handler,e[g],v,u,d,m,C)}if(y&&!h)return m;if(!y&&h)break}if(y)return m}return-1},d.prototype.searchDataRow=function(t){var e=-1;t instanceof r.SearchOptions||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=this.rowCount-1),t=new r.SearchOptions(t));var i=t.fields,o=t.values,n=t.startIndex;if(i&&i.length>0&&o&&o.length>0){for(var s=i.length,a=[],l=0;l<s;l++){var h=parseFloat(i[l]);if(isNaN(h)){var u=this.getFieldIndex(i[l]);u>=0&&a.push(u)}else a.push(h)}if(a.length>0){s=this.rowCount;var d=t.reverse;n=d?Math.min(s,n):Math.max(0,n),(e=(d?n>-1:n<s)?this.$_searchDataRow(a,o,t,n,d?0:s-1):-1)<0&&t.wrap&&(d?n<s-1:n>0)&&(e=this.$_searchDataRow(a,o,t,d?s-1:0,d?n+1:n-1))}}return e},d.prototype.$_searchData=function(t,e,i,o,r,s){var l=this.rowCount;if(l<1)return null;for(var h=i.caseSensitive,u=i.partialMatch,d=this.fieldCount,c=t.length,p=i.reverse,_=null,f=[],g=0;g<d;g++)f[g]=this.getField(g).dataType;o=Math.max(0,o),r=Math.max(0,Math.min(l-1,r)),s=Math.max(p?-1:0,Math.min(s,c)),p?s<0&&(o--,s=c-1):s>=t.length&&(o++,s=0);for(var m=i.compareCallback||n.Utils.compareTextValue,y=o;p?y>=r:y<=r;p?y--:y++)for(g=p?y<o?c-1:s:y>o?0:s;p?g>=0:g<c;p?g--:g++){var v=t[g];if(v>=0&&v<d){var C=this.getValue(y,v),w=!1,x=this.getOrgFieldName(v);switch(f[v]){case a.ValueType.DATETIME:case a.ValueType.DATE:if(e instanceof Date)w=m.call(this.$_handler,e,C,h,u,y,x);else{if(!_){var b=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";_=new k.DateTimeWriter(b)}w=m.call(this.$_handler,e,C?_.getText(C):C,h,u,y,x)}break;default:w=m.call(this.$_handler,e,C,h,u,y,x)}if(w)return{dataRow:y,fieldIndex:v,searchFieldIndex:g,fieldName:x}}}return null},d.prototype.searchData=function(t){var e=this,i=t.value,o=this.rowCount,s=t.fields=n.Utils.makeArray(t.fields);s&&s.length||(s=this.getOrgFieldNames());var a=[];if(!(s&&s.length>0&&null!=i))return null;s.forEach((function(t){a.push(e.getFieldIndex(t))})),t instanceof r.SearchCellOptions||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=o-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=a.length-1)),t=new r.SearchCellOptions(t));var l=null,h=t.reverse,u=a.length,d=h?Math.min(o-1,t.startIndex):Math.max(0,t.startIndex),c=h?0:o-1,p=h?Math.min(u-1,t.startFieldIndex):Math.max(0,t.startFieldIndex),_=h?d<o-1||p<u-1:d>0||p>0;return!(l=(h?d>=0&&p>=0:d<o)?this.$_searchData(a,i,t,d,c,p):null)&&t.wrap&&_&&(l=this.$_searchData(a,i,t,h?o-1:0,d-1,h?p:0)),l&&(l.fieldName=this.getOrgFieldName(l.fieldIndex)),l},d.prototype.isDataChanged=function(t,i){if(this._rowStates[t]!==e.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(t),this._checkFieldIndex(i),this._orgValues[t]){var o=this._orgValues[t][i],n=this.getValue(t,i),r=this.getField(i);return r&&!r.sameValues(o,n)}return!1},d.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=n.Utils.isArray(t)?t:[t],o=[],r=this._hiddenIds.length,s=0,a=i.length;s<a;s++){var l=this.getRowId(i[s]);if(null!=l)if(o.push(l),e)this._hiddenIds.indexOf(l)<0&&this._hiddenIds.push(l);else{var h=this._hiddenIds.indexOf(l);h>=0&&this._hiddenIds.splice(h,1)}}this._hiddenIds.length!==r&&this.fireRowHided(o,e)}},d.prototype.hideRows=function(t){this.$_hideRows(t,!0)},d.prototype.showRows=function(t){this.$_hideRows(t,!1)},d.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&(this._hiddenIds=[],this.fireRowHided([],!1))},d.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);o>=0&&t.push(o)}return t.sort((function(t,e){return t-e})),t},d.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return this._hiddenIds.indexOf(e)>=0},_dp(d,"hiddenCount",{get:function(){return this._hiddenIds.length}}),d.prototype.undo=function(){this.canUndo&&this._commands.undo()},d.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},d.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},d}(o.DataProvider);return M.LocalDataProvider=L,M}var ge,me={},ye={};var ve,Ce,we,xe={},be={},Ie={};function Ee(){if(ve)return Ie;ve=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.XmlUtils=void 0;var t=function(){function t(){}return t.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},t.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},t.getNodeValue=function(t){return t.firstChild.nodeValue},t.getAttr=function(t,e){return t.getAttribute(e)},t.setAttr=function(t,e,i){t.setAttribute(e,i)},t.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},t.addChildWithAttr=function(t,e,i,o,n){var r=t.createElement(i);return r.setAttribute(o,n),e.appendChild(r),r},t.addChildWithValue=function(t,e,i,o){var n=t.createElement(i);return n.nodeValue=o,e.appendChild(n),n},t.parseXml=function(t){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(i){if(e)throw i;e=(new window.DOMParser).parseFromString(t,"text/xml")}return e},t}();return Ie.XmlUtils=t,Ie}function Se(){return Ce||(Ce=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DataLoader=t.DataFillOptions=t.DataFillMode=t.DataPath=void 0;var e=d,i=G(),o=S(),n=Ee(),r=ee();function s(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var n=0,r=o.length;n<r;n++){var s=o[n];s.tagName===e&&i.push(s)}}return i}var a,l=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s=r.indexOf("["),a=r.lastIndexOf("]");if(s>0&&a>s){var l=r.substring(0,s),h="$"!=l?i[l]:i;if(Array.isArray(h)){l=r.substring(s+1,a);var u=parseInt(l);i=u>=0&&u<h.length?h[u]:null}else i=null}else"$"!=r&&(i=i[r]);if(!i)break}}return Array.isArray(i)?i:null},i.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var a=r.indexOf("["),l=r.lastIndexOf("]");if(a>0&&l>a){var h=r.substring(0,a);if(i=s(i?i[0]:t,h))h=r.substring(a+1,l),i=i[parseInt(h)]}else i=s(i?i[0]:t,r);if(!i)break}}return i},i}(i.Base);t.DataPath=l,function(t){t.SET="set",t.APPEND="append",t.INSERT="insert",t.UPDATE="update"}(a=t.DataFillMode||(t.DataFillMode={}));var h=function(t){function i(e){var i=t.call(this)||this;if(i.fillMode=a.SET,i.fillPos=0,i.count=-1,i.rootArray=!0,i.rows="row",i.start=0,i.delimiter=",",i.quoted=!1,i.parentId=0,i.childrenField=null,i.treeField=null,i.iconField=null,i.needSorting=!1,i.noStates=!1,e){for(var o in e)null!=e[o]&&(i[o]=e[o]);i.parentId=e.parentId||e.parent,i.childrenField=e.childrenField||e.children,i.treeField=e.treeField||e.tree,i.iconField=e.iconField||e.icon,i.needSorting=e.needSorting||e.sorting}return i}return e.__extends(i,t),i}(i.Base);t.DataFillOptions=h;var u=function(t){function i(e){var i=t.call(this)||this;return i._provider=e,i}return e.__extends(i,t),i.prototype._doDispose=function(){this._provider=null},i.prototype.load=function(t,e,i){var o=new h(i);if(this._checkEmpty(e,o))return 0;var n=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=n,this._provider.fireDataLoadComplated()}},i.prototype._loadJson=function(t,e){"string"==typeof t&&(t=JSON.parse(t));var i=null;if(e.rootArray&&(i=o.Utils.isArray(t)?t:null),i||(i=l.extractJson(t,e.rows)),i){var n=e.fillPos,r=e.start,s=e.count;switch(e.fillMode){case a.APPEND:this._provider.appendRows(i,r,s);break;case a.INSERT:this._provider.insertRows(n,i,r,s);break;case a.UPDATE:this._provider.updateRows(n,i,r,s,!1);break;case a.SET:default:this._provider.setRows(i,r,s)}return i.length}return this._fillEmpty(e),0},i.prototype._loadXml=function(t,e){if("string"==typeof t&&(t=n.XmlUtils.parse(t)),t&&t.documentElement){var i=e.fillPos,o=e.start,r=e.count,s=e.rows,h=l.extractXml(t.documentElement,s);switch(e.fillMode){case a.APPEND:this._provider.appendXmlRows(h,o,r);break;case a.INSERT:this._provider.insertXmlRows(i,h,o,r);break;case a.UPDATE:this._provider.updateXmlRows(i,h,o,r);break;case a.SET:default:this._provider.setXmlRows(h,o,r)}return h.length}return this._fillEmpty(e),0},i.prototype._loadCsv=function(t,e){var i=e.fillPos,o=e.start,n=e.count,s=e.quoted,l=e.delimiter,h=r.DataHelper.csvToArray(this._provider,t,o,n,s,l);if(h&&(n=h.length)>0){switch(e.fillMode){case a.APPEND:this._provider.appendRows(h,0,n);break;case a.INSERT:this._provider.insertRows(i,h,0,n);break;case a.UPDATE:this._provider.updateRows(i,h,0,n,!1);break;case a.SET:default:this._provider.setRows(h,0,n)}return h.length}return this._fillEmpty(e),0},i.prototype._fillEmpty=function(t){t.fillMode===a.SET&&this._provider.setRows(null)},i.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},i}(i.Base);t.DataLoader=u}(be)),be}var Re,Te,De={},ke={};function Me(){if(Re)return ke;Re=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.LocalTreeDataCommandStack=ke.LocalTreeDataCommand=void 0;var t=d,e=Lt(),i=Mt(),o=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i}(e.DataEditCommand);ke.LocalTreeDataCommand=o;var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i}(i.EditCommandStack);return ke.LocalTreeDataCommandStack=n,ke}var Le,Oe={};function Fe(){if(Le)return Oe;Le=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.TreeDataProvider=Oe.RootTreeRow=Oe.TreeDataRow=void 0;var t=d,e=ft(),i=G(),o=D(),n=_t(),r=C(),s=function(i){function s(t){var e=i.call(this)||this;return e._children=null,e._descendantCount=0,e._rowId=t&&t._nextRowId++,e}return t.__extends(s,i),s.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var n=o[i];e.push(n.rowId)}return e},s.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(s,"rowId",{get:function(){return this._rowId}}),_dp(s,"provider",{get:function(){return null}}),_dp(s,"parent",{get:function(){return null}}),_dp(s,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1}}),_dp(s,"level",{get:function(){return 0}}),_dp(s,"iconIndex",{get:function(){return-1},set:function(t){}}),_dp(s,"hasChildren",{get:function(){return!1}}),_dp(s,"count",{get:function(){return this._children?this._children.length:0}}),_dp(s,"descendantCount",{get:function(){return this._descendantCount}}),_dp(s,"children",{get:function(){return this._children?this._children.concat():null}}),_dp(s,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,n=e.count;o<n;o++){var r=e.getChild(o);i.push(r),t(r,i)}}(this,t),t}return null}}),_dp(s,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&e.rowId>=0;)t.push(e),e=e.parent;return t}}),_dp(s,"rowState",{get:function(){return o.RowState.NONE}}),_dp(s,"values",{get:function(){return null}}),s.prototype.getChild=function(t){if(t>=0){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},s.prototype.getChildObjects=function(t,e,i,o,n,r){void 0===r&&(r=-1);var s=this._children;if(s){var a=[];e=e||"rows",i=i||"iconIndex";for(var l=0,h=s.length;l<h;l++){var u=s[l],d=u.getObject();o&&(d.__rowId=u._rowId),n&&(d.__rowState=u.rowState),t&&0!==r&&(d[e]=u.getChildObjects(t,e,i,o,n,r-1)),d[i]=u.iconIndex,a.push(d)}return a}return null},s.prototype.$_createTreeOutputRows=function(t,e,i){var o=[];!function t(e,i,o){for(var n=0,r=e.length;n<r;n++){var s=e[n];i.push(e[n]),o&&s[o]&&s[o].length&&t(s[o],i,o)}}(t,o,i);var s,a=this.provider,l=a.fieldCount,h=o.length;e instanceof n.DataOutputOptions||(e=new n.DataOutputOptions(e));for(var u=e.nullDateText,d=e.nullText,c=e.nanText,p=this.provider.handler,_=0;_<l;_++){var f=a.getField(_),g=f.orgFieldName,m=void 0,y=void 0;if(f.dataType==r.ValueType.DATETIME&&((m=e.datetimeCallback)||(y=e.datetimeWriter)||null!=u&&null!=u))if(m)for(var v=0;v<h;v++)(s=o[v])[g]=m(p,s._rowId,g,s[g]);else for(v=0;v<h;v++){var C=(s=o[v])[g];s[g]=C?y?y.getText(s[g]):C:u}else if(f.dataType==r.ValueType.BOOLEAN&&((m=e.booleanCallback)||(y=e.booleanFormatter)))if(m)for(v=0;v<h;v++)(s=o[v])[g]=m(p,s._rowId,g,s[g]);else for(v=0;v<h;v++)(s=o[v])[g]=y.formatValue(s[g]);else if(f.dataType==r.ValueType.NUMBER&&((m=e.numberCallback)||(y=e.numberFormatter)||null!=c&&null!=c))if(m)for(v=0;v<h;v++)(s=o[v])[g]=m(p,s._rowId,g,s[g]);else for(v=0;v<h;v++){var w=(s=o[v])[g];s[g]=null==w||isNaN(w)?c:y?y.getText(w):w}else if(null!=d&&null!=d)for(v=0;v<h;v++){w=(s=o[v])[g];s[g]=null==w||null==w?d:w}}for(var x=0,b=o.length;x<b;x++)delete o[x]._rowId},s.prototype.getOutput=function(t,e){if(t){var i=this.getObject();return i&&(i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t)),i}return null},s.prototype.getChildOutputObjects=function(t,e,i,o){var n=this.getChildObjects(e,i,o,!0,null==t?void 0:t.rowState);return n&&t&&this.$_createTreeOutputRows(n,t,i),n},s.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},s.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},s.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},s.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},s.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},s.prototype.removeChild=function(t,e){return this._removeChild(t,!1,e)},s.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},s.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],n=[],r=0,s=t.length;r<s;r++){var a=void 0;(a="string"==typeof t[r]?i.getFieldIndex(t[r]):Number(t[r]))>=0&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),n.push(e[r]))}r=0;for(var l=o.length;r<l;r++)o[r]=i.getField(o[r]);return this.$_findChild(o,n)},s.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},s.prototype.clearRowStates=function(t,e){var i=this.provider;if(i){var n=[],r=t?[]:null;this._collectStateRows(n,r);var s=n.length,a=r?r.length:0;if(0!=s||0!=a){if(e)for(var l=0,h=n.length;l<h;l++)n[l]._changeRowState(o.RowState.NONE,!0,!1);else s&&i.changeRowStates(n,o.RowState.NONE);a&&i.deleteRows(r)}}},s.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},s.prototype._checkFieldIndex=function(t){var i=this.provider.fieldCount;if(t<0||t>=i)throw new e.DataSourceError("Field index is out of bounds: "+t)},s.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},s.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(t>e)for(var o=t;o>e;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},s.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,n=[],r=t.length-1;r>=0;r--)n.push(o.splice(t[r],1)[0]);for(r=0;r<n.length;r++)o.splice(e,0,n[r])}},s.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},s.prototype._insertChild=function(t,e,i,n){var r=this.provider;if(r&&!i){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e))&&(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount),this._attach(e),n||e._changeRowState(o.RowState.CREATED,!0,!1),this._doChildAdded(t,e),!0)},s.prototype._insertChildren=function(t,e,i,n){var r=this.provider;if(r&&!i){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);if(i||this._doRowsAdding(t,e)){for(var s=0,a=0;a<e.length;a++){var l=e[a];this._children.splice(t+a,0,l),this._attach(l),s+=l.descendantCount,n||l._changeRowState(o.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(t,e),!0}return!1},s.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},s.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t))&&(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),!0)},s.prototype._removeChild=function(t,e,i){var n=this.provider;if(!n||e||n._checkClientState()){if(t&&this._children){var r=this._children.indexOf(t);if(!n.softDeleting||!n.checkStates)return this.$_removeChild(t,r,e);switch(t.rowState){case o.RowState.CREATED:if(n.deleteCreated)return this.$_removeChild(t,r,e);t._changeRowState(o.RowState.CREATE_AND_DELETED,!0,!1);break;case o.RowState.DELETED:case o.RowState.CREATE_AND_DELETED:break;default:t._changeRowState(o.RowState.DELETED,!0,!1)}if(i&&t.count>0)for(var s=t.children,a=t.count;a--;)t._removeChild(s[a],e,i)}return!1}},s.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},s.prototype._setChildren=function(t){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&(e=t.length)>0){this._children||(this._children=[]);for(var o=0;o<e;o++){var n=t[o];this._children.push(n),i+=1+n.descendantCount,this._attach(n)}}this._descendantCountChanged(i)},s.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,n=0;n<o;n++){for(var r=this._children[n],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],r.getValue(t[a].index))){s=!1;break}if(s)return r;if(r=r.$_findChild(t,e))return r}return null},s.prototype._collectStateRows=function(t,e){for(var i=this.count;i--;){var n=this.getChild(i),r=n.rowState;!e||r!=o.RowState.DELETED&&r!=o.RowState.CREATE_AND_DELETED?(r!=o.RowState.NONE&&t.push(n),n._collectStateRows(t,e)):e.push(n)}},s.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},s.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},s.prototype.$_restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i).$_restoreRow(!0,e);return!1},s.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},s.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},s.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},s.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},s.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},s.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},s.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},s}(i.Base);Oe.TreeDataRow=s;var a=function(e){function i(t){var i=e.call(this,t)||this;return i._provider=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._provider=null,e.prototype._doDispose.call(this)},i.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},_dp(i,"provider",{get:function(){return this._provider}}),_dp(i,"rowId",{get:function(){return-1}}),_dp(i,"index",{get:function(){return 0}}),_dp(i,"hasChildren",{get:function(){return!0}}),i.prototype.copy=function(){for(var t=new i(null),e=0,o=this.count;e<o;e++){var n=this.getChild(e).copy();t._addChild(n,!0,!0)}return t._provider=this._provider,t},i.prototype._changeRowState=function(t,e,i){return!1},i.prototype.getObject=function(){return null},i.prototype.getValue=function(t){},i.prototype.setValue=function(t,e,i){return!1},i.prototype._attach=function(t){t._parent=this},i.prototype._detach=function(t){t._parent===this&&(t._parent=null)},i.prototype.update=function(t,e){return!1},i.prototype.$_setHasChildren=function(t){},i.prototype.$_setIconIndex=function(t){},i.prototype._keepRow=function(t){},i.prototype._yieldRow=function(t,e){},i.prototype._keepStates=function(t){},i.prototype._yieldStates=function(t,e){},i}(s);Oe.RootTreeRow=a;var l=function(e){function i(){var t=e.call(this)||this;return t._nextRowId=0,t._commandListeners=[],t}return t.__extends(i,e),i.prototype._doDispose=function(){this._fireDispose(),e.prototype._doDispose.call(this)},i.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},i.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);e>=0&&this._commandListeners.splice(e,1)},i.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},i.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},i.prototype._fireDispose=function(){this.fireEvent("onTreeDataProviderDisposed")},i}(e.DataSource);return Oe.TreeDataProvider=l,Oe}var Pe,Be={};var Ve,Ne={};var Ae,$e,He={};function Ue(){if($e)return me;$e=1,Object.defineProperty(me,"__esModule",{value:!0}),me.LocalTreeDataProvider=me.TreeDataRowImpl=void 0;var t=d,e=D(),i=S(),o=function(){if(ge)return ye;ge=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.TreeDataTagCollection=void 0;var t=d,e=function(e){function i(t){var i=e.call(this)||this;return i._tags=new Array,i._owner=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},i.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},i.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},i.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},i.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},i.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},i.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},i.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},i.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},i.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},i}(G().Base);return ye.TreeDataTagCollection=e,ye}(),n=function(){if(we)return xe;we=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.XmlTreeSource=xe.JsonTreeSource=xe.CsvTreeSource=xe.ArrayTreeSource=xe.TreeDataSource=void 0;var t=d,e=G(),i=ee(),o=Se(),n=Ee(),r=function(e){function i(t,i){var o=e.call(this)||this;return o._rowCount=0,o._ds=t,o._rootRow=i,o}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"provider",{get:function(){return this._ds}}),_dp(i,"rootRow",{get:function(){return this._rootRow}}),_dp(i,"insertedRows",{get:function(){return this._rows}}),_dp(i,"insertedCount",{get:function(){return this._rowCount}}),i.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},i.prototype._createRow=function(t,e,i){return this._ds.createRow(i,isNaN(i[e])?-1:i[e],i[t],!1)},i.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},i.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},i.prototype._addRow=function(t,e,i,o,n){var r=this._createRow(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},i.prototype._addRow2=function(t,e,i,o,n){var r=this._createRow2(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},i}(e.Base);xe.TreeDataSource=r;var s=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype._loadData=function(t,e,i,o,n,r){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],h=new Array(t.length),u=0;u<a;u++)if(l[u]=u,Array.isArray(t[u])){if(Array.isArray(t[u]))for(var d=h[u]=new Array(s.fieldCount),c=0,p=s.fieldCount;c<p;c++)d[c]=t[u][c]}else h[u]=this.provider.objectToRow(t[u]);o&&this.$_sortRows(l,h,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,h,i,n,r)}finally{s.endUpdate(!1)}return this.insertedCount},i.prototype.$_sortRows=function(t,e,i,o,n){function r(t,o){var n=e[t][i],r=e[o][i];return n==r?0:n<r?-1:1}do{var s=o,a=n,l=t[Math.floor((o+n)/2)];do{for(;!(r(l,t[s])<=0);)s++;for(;!(r(l,t[a])>=0);)a--;if(s<=a){if(s!=a){var h=t[s];t[s]=t[a],t[a]=h}s++,a--}}while(s<=a);o<a&&this.$_sortRows(t,e,i,o,a),o=s}while(o<n)},i.prototype.$_buildTree=function(t,e,i,o,n,r){function s(e,i,n,r){for(var s=r[o];i!=t;){var a=i.getValue(o);if(e.parentCallback){if(e.parentCallback(a,s))return i}else if(0==s.indexOf(a))return i;i=i.parent}return t}var a=e[0],l=this._createRow(n,r,i[a]),h=s(this,t,0,i[a]);if(h._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),e.length>1)for(var u=e.length,d=l,c=1;c<u;c++)a=e[c],l=this._createRow(n,r,i[a]),(h=s(this,d,0,i[a]))._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),d=l},i}(r),a=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype.load=function(t,e,i,o,n,r){return this._loadData(e,t,i,o,n,r)},i}(s);xe.ArrayTreeSource=a;var l=function(e){function o(t,i){return e.call(this,t,i)||this}return t.__extends(o,e),o.prototype.load=function(t,e,o,n,r,s){var a=i.DataHelper.csvToArray(this.provider,e);return this._loadData(a,t,o,n,r,s)},o}(s);xe.CsvTreeSource=l;var h=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype.load=function(t,e,i,n,r){if(this._prepareLoad(t),e){var s=o.DataPath.extractJson(e,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,s,i,n,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},i.prototype.load2=function(t,e,i,n,r,s){if(this._prepareLoad(t),e){var a=o.DataPath.extractJson(e,i);if(a&&a.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,a,n,r,s)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},i.prototype.$_buildJsonTree=function(t,e,i,o,n,r){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,d=a.length;u<d;u++){for(var c=a[u],p=new Array(h),_=0;_<h;_++){var f=l[_];c.hasOwnProperty(f)&&(p[_]=c[f])}var g=i._addRow(e,s,n,r,p);if(c.hasOwnProperty(o)){var m=c[o];Array.isArray(m)&&m.length>0&&t(i,g,m,l)}}}(this,e,i,s)},i.prototype.$_buildJsonTree2=function(t,e,i,o,n,r){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,d=a.length;u<d;u++){for(var c=a[u],p=new Array(h),_=0;_<h;_++){var f=l[_];c.hasOwnProperty(f)&&(p[_]=c[f])}var g=i._addRow2(e,s,c[n],isNaN(c[r])?-1:c[r],p);if(c.hasOwnProperty(o)){var m=c[o];Array.isArray(m)&&m.length>0&&t(i,g,m,l)}}}(this,e,i,s)},i}(r);xe.JsonTreeSource=h;var u=function(e){function r(t,i){return e.call(this,t,i)||this}return t.__extends(r,e),r.prototype.load=function(t,e,i,r,s){if(this._prepareLoad(t),e){var a="string"==typeof e?n.XmlUtils.parseXml(e):e;if(a){var l=o.DataPath.extractXml(a.documentElement,i);if(l&&l.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,l,i,r,s)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},r.prototype.$_buildXmlTree=function(t,e,n,r,s,a){!function t(n,l,h,u,d){for(var c=0,p=h.length;c<p;c++){var _=h[c],f=i.DataHelper.xmlToRow(_,u,d),g=n._addRow(e,l,s,a,f),m=o.DataPath.extractXml(_,r);m&&m.length>0&&t(n,g,m,u,d)}}(this,e,n,t.getFields(),t.getOrgFieldNames())},r}(s);return xe.XmlTreeSource=u,xe}(),r=K(),s=C(),a=St(),l=function(){if(Te)return De;Te=1,Object.defineProperty(De,"__esModule",{value:!0}),De.UpdateTreeDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._values=r._cloneRow(o),r._strict=n,r}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},i.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},i.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},i}(Me().LocalTreeDataCommand);return De.UpdateTreeDataCommand=e,De}(),h=Fe(),u=Me(),c=function(){if(Pe)return Be;Pe=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.FillValueTreeDataCommand=void 0;var t=d,e=Me(),i=S(),o=function(e){function o(t,o,n){var r=e.call(this,t)||this;return r._rowFields=i.Utils.deepCopy(o),r._value=n,r}return t.__extends(o,e),o.prototype._doRun=function(t){var e=t,i={};for(var o in this._rowFields){var n=e.rowById(+o)._keepRow(e);i[o]=n}return e.$_fillValue(this._rowFields,this._value),i},o.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value)},o.prototype._doUndo=function(t,e){var i=t;for(var o in this._rowFields)i.rowById(+o)._yieldRow(t,e[o]);t._fireRefresh()},o}(e.LocalTreeDataCommand);return Be.FillValueTreeDataCommand=o,Be}(),p=function(){if(Ve)return Ne;Ve=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.UpdateRowsTreeDataCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._rows=i.slice(),r._values=r._cloneValues(o.slice()),r}return t.__extends(i,e),i.prototype._doRun=function(t){for(var e=t,i=[],o=0,n=this._rows;o<n.length;o++){var r=n[o]._keepRow(e);i.push(r)}return e.$_updateRows(this._rows,this._values,this._strict),i},i.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},i.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},i}(Me().LocalTreeDataCommand);return Ne.UpdateRowsTreeDataCommand=e,Ne}(),_=function(){if(Ae)return He;Ae=1,Object.defineProperty(He,"__esModule",{value:!0}),He.SetValueTreeCommand=void 0;var t=d,e=function(e){function i(t,i,o,n){var r=e.call(this,t)||this;return r._row=i,r._field=o,r._value=n instanceof Date?new Date(n):n,r}return t.__extends(i,e),i.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),e},i.prototype._doRedo=function(t,e){this._row.$_setValue(this._field,this._value,!1)},i.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row),t._valueChanged(this._row,this._field)},i}(Me().LocalTreeDataCommand);return He.SetValueTreeCommand=e,He}(),f=rt(),g=function(i){function o(t,o){var n=i.call(this,t)||this;if(n._iconIndex=-1,n._hasChildren=!1,n._parent=null,n._values=null,n._orgValues=null,n._state=e.RowState.NONE,t&&o){var r=t.fieldCount;n._values=new Array(r);for(var s=0,a=Math.min(o.length,r);s<a;s++)n._values[s]=t.getField(s).readValue(o[s])}return n}return t.__extends(o,i),o.prototype._doDispose=function(){this._values=null,this._orgValues=null,i.prototype._doDispose.call(this)},_dp(o,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(o,"parent",{get:function(){return this._parent}}),_dp(o,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(o,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(o,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}}}),_dp(o,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}}}),_dp(o,"rowState",{get:function(){return this._state}}),_dp(o,"values",{get:function(){return this._values&&this._values.slice()}}),o.prototype._attach=function(t){t._parent=this},o.prototype._detach=function(t){t._parent===this&&(t._parent=null)},o.prototype._changeRowState=function(t,i,o){var n=this.provider;if(n&&t!=this._state){var r=this._state;return this._state=t,t==e.RowState.UPDATED&&n._needOrgValues?this._orgValues=this._values.concat():r==e.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),i&&n._stateChanged(this,o),!0}return!1},o.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},o.prototype.setValue=function(t,e,i){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new _.SetValueTreeCommand(o,this,t,e)):this.$_setValue(t,e,i))},o.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++){i[t.getOrgFieldName(o)]=this._values[o]}return i}return null},o.prototype.copy=function(){var t=new o(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,i=this.count;e<i;e++){var n=this.getChild(e).copy();t._addChild(n,!0,!0)}return t},o.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new l.UpdateTreeDataCommand(i,this,t,e)):this.$_update(i,t,e,!1))},o.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},o.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},o.prototype._keepStates=function(t){},o.prototype._yieldStates=function(t,e){},o.prototype._keepState=function(){return this._state},o.prototype._yieldState=function(t){this._state=t},o.prototype.$_setValue=function(t,i,o){var n=this.provider;if(n){if(!n._checkClientState())return;if(n.refreshFieldFormats(),this._checkFieldIndex(t),this._values){if(i!=this._values[t]){var r=null,s=n.getField(t),a=n.checkStates&&(this._state==e.RowState.NONE||!this._state);!o&&a&&n._needOrgValues&&(r=this._values.concat()),this._values[t]=s.readValue(i),n._internalCalculateValues(this._values,this.rowId),!o&&a?(n._needOrgValues&&(this._orgValues=r),this._state=e.RowState.UPDATED,n._stateChanged(this,!1)):n._needRestore&&this.$_restoreState(n),n._valueChanged(this,t)}return!0}throw new Error("Row data is not loaded")}},o.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this))&&(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),!0)},o.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),i.prototype._clearOrgValues.call(this)},o.prototype._restoreState=function(t,e){var o=this.$_restoreState(this.provider);return o&&e&&e.push(this),i.prototype._restoreState.call(this,t,e),o},o.prototype.$_restoreRow=function(t,o){var n=!1;if(this._state===e.RowState.UPDATED){var r=this._orgValues;if(r){for(var s=this._values,a=0,l=Math.min(r.length,this.provider.fieldCount);a<l;a++)s[a]=r[a];this._state=e.RowState.NONE,o&&o.push(this),n=!0}}return i.prototype.$_restoreRow.call(this,t,o),n},o.prototype.$_restoreState=function(t){if(this._state==e.RowState.UPDATED&&this._orgValues){for(var i=this._orgValues,o=this._values,n=this.provider,r=n.strictRestore,s=0,a=n.fieldCount;s<a;s++){var l=o.length>s?o[s]:void 0,h=i.length>s?i[s]:void 0;if(r){if(!n.getField(s).equalValues(l,h))return!1}else if(!n.getField(s).sameValues(l,h))return!1}return this._state=e.RowState.NONE,!0}return!1},o.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,n=[];if(!t||t.length<=0)return null;for(var r=0,s=i.fieldCount;r<s;r++){var a=e.length>r?e[r]:void 0,l=t.length>r?t[r]:void 0,h=i.getField(r);h.calculated||(o?h.equalValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}):h.sameValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}))}return n},o.prototype.$_setHasChildren=function(t){this._hasChildren=t},o.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},o.prototype.$_internalUpdate=function(t,i,o){var n=!1,r=Array.isArray(t),s=this.provider;if(s){var a=Math.min(s.fieldCount,r?t.length:s.fieldCount),l=s.checkStates&&(this._state==e.RowState.NONE||!this._state),h=null;l&&s._needOrgValues&&(h=this._values.concat());for(var u=0;u<a;u++){var d=s.getField(u);if(r||t.hasOwnProperty(d.orgFieldName)){var c=r?t[u]:t[d.orgFieldName];i&&void 0===c||(n=!s._needRestore||(n||(i?!d.equalValues(this._values[u],d.readValue(c)):!d.sameValues(this._values[u],d.readValue(c)))),this._values[u]=s.getField(u).readValue(c))}}s._internalCalculateValues(this._values,this.rowId),l&&n?(h&&(this._orgValues=h),this._state=e.RowState.UPDATED,o&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},o}(h.TreeDataRow);me.TreeDataRowImpl=g;var m=function(l){function d(t,e){var i=l.call(this)||this;return i._countDirty=!1,i._tagLock=!1,i._points=[],i._nextPoint=0,i._rowMap=[],i._needOrgValues=!1,i._needRestore=!1,i._checkParentProc=null,i._hiddenRows=[],i.$_handler=e,t&&(i._commands=new u.LocalTreeDataCommandStack(i)),i._rootRow=new h.RootTreeRow(i),i._tags=new o.TreeDataTagCollection(i),i}return t.__extends(d,l),d.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=this._rowMap=this._hiddenRows=[],this._rootRow.clearChildren(),this._tags=this._tags&&this._tags.dispose(),l.prototype._doDispose.call(this),this._rootRow=null},_dp(d,"rootRow",{get:function(){return this._rootRow}}),_dp(d,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t}}),_dp(d,"needOrgValues",{get:function(){return this._needOrgValues}}),_dp(d,"needRestore",{get:function(){return this._needRestore}}),_dp(d,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())}}),_dp(d,"handler",{get:function(){return this.$_handler}}),d.prototype.addTag=function(t){this._tags&&this._tags.add(t)},d.prototype.removeTag=function(t){this._tags&&this._tags.remove(t)},d.prototype.setRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(e);if(a>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var l=new n.ArrayTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(null,t,a,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(s),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},d.prototype.setCsvRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(e);if(a>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var l=new n.CsvTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(null,t,a,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(s),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},d.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var r=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),r=new n.XmlTreeSource(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},d.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new n.JsonTreeSource(this,this._rootRow);this._rowCount=r.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},d.prototype.setJsonRows2=function(t,e,i,o,r){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new n.JsonTreeSource(this,this._rootRow);this._rowCount=s.load2(null,t,e,i,o,r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},d.prototype.appendDataRows=function(t,e,i,o,r,s){if(!this._checkClientState())return-1;var a=0,l=this.getFieldIndex(i);if(l>=0){var h=new n.ArrayTreeSource(this,this._rootRow);h.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),a=h.load(t,e,l,o,this.getFieldIndex(r),this.getFieldIndex(s))}finally{if(this.endUpdate(!1),a>0){var u=h.insertedRows;u&&(a=u.length)>0&&this._rowsAdded(t,u)}}}return a},d.prototype.appendCsvRows=function(t,e,i,o,r,s){if(!this._checkClientState())return-1;var a=0,l=this.getFieldIndex(i);if(l>=0){this.beginUpdate();try{this.refreshFieldFormats();var h=new n.CsvTreeSource(this,this._rootRow);h.parentCallback=this._parentCallback,a=h.load(t,e,l,o,this.getFieldIndex(r),this.getFieldIndex(s))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),a},d.prototype.appendXmlRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var s=0;if(e){var a=new n.XmlTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=a.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),s>0){var l=a.insertedRows;l&&(s=l.length)>0&&this._rowsAdded(t,l)}}}return this._fireRowCountChanged(),s},d.prototype.appendJsonRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var s=0;if(e){var a=new n.JsonTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=a.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),s>0){var l=a.insertedRows;l&&(s=l.length)>0&&this._rowsAdded(t,l)}}}return this._fireRowCountChanged(),s},d.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},d.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},d.prototype.getChildCount=function(t){return(t||this._rootRow).count},d.prototype.getRows=function(t){return(t||this._rootRow).children},d.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},d.prototype.getDescendants=function(t,e){e=arguments.length>1?e:0;var i=t||this._rootRow;if(e<=0)return i.descendants;if(e>i.level){var o=[];return function t(e,i,o){for(var n=0,r=e.count;n<r;n++){var s;i.push(s=e.getChild(n)),o>s.level&&t(s,i,o)}}(i,o,e),o}return null},d.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},d.prototype.hasData=function(t){return null!=this.rowById(t)},d.prototype.rowById=function(t){var e=this._rowMap[t];return e&&e.rowId===t||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},d.prototype.getDataRow=function(t){var e=this._rowMap[t];return null==e&&(e=this._findRowById(t)),null!=e?t:-1},d.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.rowById(r);(s||e)&&i.push(s)}return i}return null},d.prototype.createRow=function(t,e,i,o){void 0===o&&(o=!0);var n=null;if(o&&this.refreshFieldFormats(),Array.isArray(t))n=new g(this,t);else if(t){var r=new Array(this.fieldCount);for(var s in t){var a=this.getFieldIndex(s);a>=0&&(r[a]=t[s])}n=new g(this,r)}return n&&(this._internalCalculateValues(n._values,n.rowId),n._iconIndex=e,n._hasChildren=i),n},d.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},d.prototype.removeRows=function(t,i){for(var o=[],n=t.length;n--;){(l=this.rowById(t[n]))&&o.push(l)}function r(t,e){for(var i=e;i>=0;i--)if(o[i].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&o&&!(o.length<1)){o.sort((function(t,e){return t.level-e.level}));var s=o;for(n=o.length;n--;)o[n].level>1&&!r(o[n],n-1)&&o.splice(n,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){var a=[];for(n=o.length-1;n>=0;n--){var l,h=!1;switch((l=o[n]).rowState){case e.RowState.CREATED:this.deleteCreated||(h=l._changeRowState(e.RowState.CREATE_AND_DELETED,!1,!1),o.splice(n,1));break;case e.RowState.DELETED:case e.RowState.CREATE_AND_DELETED:o.splice(n,1);break;default:h=l._changeRowState(e.RowState.DELETED,!0,!1),o.splice(n,1)}if(h&&a.push(l),i&&l.count>0)for(var u=l.count;u--;)l.removeChild(l.children[u],i)}a.length>0&&this._fireRowStatesChanged(a)}return this.deleteRows(s),!0}},d.prototype.changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,n=t.index,r=Math.min(Math.max(n+e,0),o-1);return 0!=(e=r-n)&&(!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(n,r),this._fireRowSiblingMoved(t,e),!0))},d.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,n=t[0].index,r=Math.min(Math.max(n+e,0),o-1);if(0==(e=r-n))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var h=l[a];s.push(h.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,r),this._fireRowsSiblingMoved(t,e),!0)},d.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var n=e._children.length;return i=Math.min(Math.max(i,0),n),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof h.RootTreeRow||this.setHasChildren(e,!0),o instanceof h.RootTreeRow||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},d.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index)},d.prototype.toTreeString=function(){return this._rootRow.toTreeString()},d.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},d.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},d.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},d.prototype.$_searchDataRow=function(t,e,o,n,r,a){var l=t.length;if(l<1)return-1;var h=Math.min(e.length,o.length);if(h<1)return-1;for(var u=n.allFields,d=n.caseSensitive,c=n.partialMatch,p=null,_=[],g=n.compareCallback||i.Utils.compareTextValue,m=n.reverse,y=0;y<h;y++)_[y]=this.getField(e[y]).dataType;r=Math.max(0,r),a=Math.min(l-1,a);for(var v=r;m?v>=a:v<=a;m?v--:v++){var C=!0;if(C)for(y=0;y<h;y++){var w=this.rowById(t[v]).getValue(e[y]),x=this.getOrgFieldName(e[y]);switch(_[y]){case s.ValueType.DATETIME:case s.ValueType.DATE:if(o[y]instanceof Date)C=g.call(this.$_handler,o[y],w,d,c,t[v],x);else{if(!p){var b=/[.]/.test(o[y])?"yyyy.MM.dd":/[/]/.test(o[y])?"yyyy/MM/dd":/[-]/.test(o[y])?"yyyy-MM-dd":"yyyyMMdd";p=new f.DateTimeWriter(b)}C=g.call(this.$_handler,o[y],w?p.getText(w):w,d,c,t[v],x)}break;default:C=g.call(this.$_handler,o[y],w,d,c,t[v],x)}if(C&&!u)return t[v];if(!C&&u)break}if(C)return t[v]}return-1},d.prototype.searchDataRow=function(t,e){var o;if(void 0===e&&(e=null),null!=e){var n=this.rowById(e);if(!n)return-1;o=this.$_extractTreeRowIds(n.descendants)}else o=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(o)||o.length<=0)return-1;t instanceof a.SearchOptions||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=o.length-1),t=new a.SearchOptions(t));var r=t.reverse,s=o.length,l=Math.max(0,o.indexOf(t.startIndex)),h=t.fields,u=t.values,d=-1;if(h&&h.length>0&&u&&u.length>0){for(var c=h.length,p=[],_=0;_<c;_++){var f=h[_];if(i.Utils.isNumber(f))p.push(f);else{var g=this.getFieldIndex(h[_]);g>=0&&p.push(g)}}p.length>0&&(d=(r?l>0:l<s)?this.$_searchDataRow(o,p,u,t,l,r?0:s-1):-1)<0&&t.wrap&&(r?l<s-1:l>0)&&(d=this.$_searchDataRow(o,p,u,t,r?s-1:0,r?l+1:l-1))}return d},d.prototype.$_searchData=function(t,e,o,n,r,a,l){var h=this.rowCount;if(h<1)return null;for(var u=n&&n.caseSensitive,d=n&&n.partialMatch,c=this.fieldCount,p=e.length,_=null,g=[],m=n.reverse,y=n.compareCallback||i.Utils.compareTextValue,v=0;v<c;v++)g[v]=this.getField(v).dataType;r=Math.max(0,r),a=Math.min(h-1,a),l=Math.max(0,l),n.reverse?l<0&&(r--,l=e.length-1):l>=e.length&&(r++,l=0);for(var C=r;m?C>=a:C<=a;m?C--:C++)for(v=m?C<r?p-1:l:C>r?0:l;m?v>=0:v<p;m?v--:v++){var w=!1,x=e[v],b=this.getOrgFieldName(e[v]);if(x>=0&&x<c){var I=this.rowById(t[C]).getValue(x);switch(g[x]){case s.ValueType.DATETIME:case s.ValueType.DATE:if(o instanceof Date)w=y.call(this.$_handler,o,I,u,d,t[C],b);else{if(!_){var E=/[.]/.test(o)?"yyyy.MM.dd":/[/]/.test(o)?"yyyy/MM/dd":/[-]/.test(o)?"yyyy-MM-dd":"yyyyMMdd";_=new f.DateTimeWriter(E)}w=y.call(this.$_handler,o,I?_.getText(I):I,u,d,t[C],b)}break;default:w=y.call(this.$_handler,o,I,u,d,t[C],b)}if(w)return{dataRow:t[C],fieldIndex:x,searchFieldIndex:v,fieldName:b}}}return null},d.prototype.searchData=function(t,e){var o,n=this;if(void 0===e&&(e=-1),e>=0){var r=this.rowById(e);if(!r)return null;o=this.$_extractTreeRowIds(r.descendants)}else o=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(o)||o.length<=0)return null;var s=o.length,l=null,h=i.Utils.makeArray(t.fields)||this.getOrgFieldNames();h&&h.length||(h=this.getOrgFieldNames());var u=[];h.forEach((function(t){return u.push(n.getFieldIndex(t))})),t instanceof a.SearchCellOptions||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=s-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=u.length-1)),t=new a.SearchCellOptions(t));var d=t.reverse,c=u.length,p=t.value,_=o.indexOf(t.startIndex)<0?d?s-1:0:o.indexOf(t.startIndex),f=d?0:s-1,g=Math.max(0,Math.min(c-1,t.startFieldIndex)),m=d?_>=0&&g>0:_<s&&g<c,y=d?_<s-1||g<c-1:_>0||g>0;return null!=p&&u.length>0&&!(l=m?this.$_searchData(o,u,p,t,_,f,g):null)&&t.wrap&&y&&(l=this.$_searchData(o,u,p,t,d?s-1:0,_-1,d?g:0)),l},d.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var o=i.Utils.isArray(t)?t:[t],n=this._hiddenRows.length,r=[],s=0,a=o.length;s<a;s++){var l=o[s];if(null!=this._findRowById(l))if(r.push(l),e)this._hiddenRows.indexOf(l)<0&&this._hiddenRows.push(l);else{var h=this._hiddenRows.indexOf(l);h>=0&&this._hiddenRows.splice(h,1)}}this._hiddenRows.length!==n&&this._fireRowsHiddenChanged(r,e)}},d.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},d.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},d.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},d.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort((function(t,e){return t-e})),t},d.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&this._hiddenRows.indexOf(t)>=0},_dp(d,"hiddenCount",{get:function(){return this._hiddenRows.length}}),d.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=null,t.max=null,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},d.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n=0,r=t.field,a=this.getField(r).dataType===s.ValueType.NUMBER,l=null,h=null,u=null,d=0;d<o;){null==(f=e[d++].getValue(r))||a&&(!a||isNaN(f))||(a&&(l=n?l+f:f),(a||""!=f)&&n++,(null==h||f<h)&&(h=f),(null==u||f>u)&&(u=f))}if(t.count=o,n>0&&(l=null!=l?l:a?NaN:null,h=null!=h?h:a?NaN:null,u=null!=u?u:a?NaN:null,t.sum=l,t.min=h,t.max=u,t.avg=l/o,t.dataCount=n,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,i))if(o>1){for(var c=0,p=t.avg,_=0;_<o;_++){var f=e[_].getValue(r);isNaN(f)||(c+=Math.pow(f-p,2))}t.varsp=c/o,t.vars=c/(o-1)}else t.varsp=0,t.vars=0;return!0},_dp(d,"rowCount",{get:function(){return this._rootRow.descendantCount}}),_dp(d,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(d,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(d,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(d,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),d.prototype.getRow=function(t){return this.rowById(t).values},d.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&t.length>0){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;i>=0;i--){var o=t[i],n=o&&o.parent;n&&n._removeChild(o,!0,!1)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},d.prototype.equalValues=function(t,e,i){if(e!==i){var o=this._fields[t],n=e.getValue(t),r=i.getValue(t);return o.equalValues(n,r)}return!0},d.prototype.sameValues=function(t,e,i,o){if(e!==i){var n=this._fields[t],r=e.getValue(t),s=i.getValue(t);return o?String(r).toLowerCase()==String(s).toLowerCase():n.sameValues(r,s)}return!0},d.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},d.prototype.compareValues=function(t,e,i,o){if(e!==i){var n=e.getValue(t),r=i.getValue(t);return null==n?null==r?0:-1:null==r||(n=o?String(n).toLowerCase():n)>(r=o?String(r).toLowerCase():r)?1:n<r?-1:0}return 0},d.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},d.prototype.compareNumbers=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return isNaN(o)?isNaN(n)?0:-1:isNaN(n)||o>n?1:o<n?-1:0}return 0},d.prototype.compareBools=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return o&&!n?1:!o&&n?-1:0}return 0},d.prototype.compareDates=function(t,e,i){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return o instanceof Date?n instanceof Date?o>n?1:o<n?-1:0:1:n instanceof Date?-1:0}return 0},d.prototype.compareObjects=function(t,e,i){var o=e.values,n=i.values;if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e.rowId,i.rowId):1:s?-1:0},d.prototype.getDistinctValues=function(t,e,o){if(void 0===e&&(e=-1),void 0===o&&(o=s.SortDirection.ASCENDING),this._checkFieldIndex(t),e<0&&(e=this.getDescendantCount(this._rootRow)),e>0){for(var n=this.getDescendants(this._rootRow,0),r=this.getField(t).dataType,a=[],l=[],h=void 0,u=0,d=n.length;u<d;u++)switch(h=n[u].values[t],r){case s.ValueType.NUMBER:null!=h&&isNaN(h)||a.indexOf(h)<0&&a.push(h);break;case s.ValueType.DATE:case s.ValueType.DATETIME:h?l.indexOf(h.getTime())<0&&(l.push(h.getTime()),a.push(h)):(l.push(h),a.push(h));break;case s.ValueType.OBJECT:default:a.indexOf(h)<0&&a.push(h)}return o!==s.SortDirection.NONE&&(a=i.Utils.included(r,s.ValueType.DATETIME,s.ValueType.DATE)?a.sort((function(t,e){return t-e})):a.sort(),o===s.SortDirection.DESCENDING&&(a=a.reverse())),a.slice(0,e)}return null},d.prototype._doFieldsReset=function(){this._clearRows(),this._fireReset()},d.prototype.refreshClients=function(){this._fireRefreshClient()},d.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,nextRowId:this._nextRowId,data:e}),i}return-1}},d.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireRefresh();break}}},d.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},d.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},d.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},d.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},d.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},d.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},d.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},d.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},d.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},d.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},d.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},d.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},d.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},d.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},d.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},d.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},d.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},d.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},d.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},d.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},d.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},d.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},d.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},d.prototype.getRowId=function(t){return t},d.prototype.getValue=function(t,e){var i=this.rowById(t);if(i)return i.getValue(e)},d.prototype.setValue=function(t,e,i){var o=this.rowById(t);if(o)return o.setValue(e,i,!1)},d.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,o={},n=e._values;if(n)for(var r=0;r<i;r++){o[this.getOrgFieldName(r)]=n[r]}return o},d.prototype.getRowState=function(t){var i=this.rowById(t);return i?i.rowState:e.RowState.NONE},d.prototype.setRowState=function(t,i,o){var n=this.rowById(t);if(n&&(this.checkStates||o)){var r=n.rowState;i!=r&&n._changeRowState(i,!0,!!(0,e.isDeletedState)(r)||void 0)}},d.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],n=0;n<i;n++){var r=t[n];r._changeRowState(e,!1,!1)&&o.push(r)}o.length>0&&this._fireRowStatesChanged(o)},d.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},d.prototype.$_collectStateRows=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getChild(o);r.rowState==e&&i.push(r.rowId),this.$_collectStateRows(r,e,i)}},d.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},d.prototype.$_collectAllStateRows=function(t,i){for(var o=0,n=t.count;o<n;o++){var r=t.getChild(o);switch(r.rowState){case e.RowState.CREATED:case e.RowState.UPDATED:case e.RowState.DELETED:case e.RowState.CREATE_AND_DELETED:i[r.rowState].push(r.rowId)}this.$_collectAllStateRows(r,i)}},d.prototype.getAllStateRows=function(){var t={};return t[e.RowState.CREATED]=[],t[e.RowState.UPDATED]=[],t[e.RowState.DELETED]=[],t[e.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,t),t},d.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var n=o?null:[],r=0,s=t.length;r<s;r++){var a=this.rowById(t[r]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&n.push(a)}!o&&n.length>0&&this._fireRowStatesChanged(n)}},d.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,n=t.count;o<n;o++){var r=t.getChild(o);e.indexOf(r.rowState)>=0&&i++,i+=this.$_getRowStateCount(r,e)}return i},d.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},d.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},d.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):e.length>1&&this._fireRowStatesChanged(e)}},d.prototype._reCalculateFields=function(t){var e=this;this.getDescendants(this._rootRow,-1).forEach((function(i){e._internalCalculateValues(i._values,i.rowId,t)}))},d.prototype.getUpdatedCells=function(t){var i=this.restoreMode;if(i!=r.RestoreMode.AUTO&&i!=r.RestoreMode.EXPLICIT)return null;if(null==t)t=this.getStateRows(e.RowState.UPDATED);else if(!Array.isArray(t)){if("number"!=typeof t)return null;t=[t]}if(!Array.isArray(t))return null;for(var o=[],n=0,s=t.length;n<s;n++){var a=this.rowById(t[n]);if(a){var l=a.$_getUpdatedCells();l&&l.length>0&&o.push({__rowId:a.rowId,updatedCells:l})}}return o},d.prototype.canUpdateRow=function(t){return!0},d.prototype.canInsertRow=function(t){return!0},d.prototype.canDeleteRow=function(t){return!0},d.prototype.isDataChanged=function(t,o){if(t<0)return!1;var n=this.rowById(t);!n&&i.Utils.isDebugging();var r=n._orgValues;if(n.rowState!==e.RowState.UPDATED||!r)return!1;if(r){var s=r[o],a=n._values[o],l=this._fields[o];return l&&!l.sameValues(s,a)}return!1},d.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var o=this.objectToRow(i),n=new g(this,o),r=0;r<t.count;r++){var s=this.$_createFrom(t.getChild(r),e);n.addChild(s,!1)}return n},d.prototype.$_insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=t.rowsByIds(i,!1);r<s.length;r++){var a=s[r];n.push(this.$_createFrom(a,e))}var l=o>=0?this.rowById(o):null,h=l?l.parent:this.rootRow;if(o>=0){var u=h.indexOf(l);h.insertChildren(u,n,!1)}else h.insertChildren(h.count,n,!1)},d.prototype.insertChildNode=function(t,e,o,n,r,s){var a=i.Utils.getNumber(o[r],-1),l=o[n],h=this.createRow(o,a,l&&l.length>0);if(e>=0?t.insertChild(e,h,s):t.addChild(h,s),l)for(var u=0;u<l.length;u++)this.insertChildNode(h,-1,l[u],n,r,s);return h?h.rowId:-1},d.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},d.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},d.prototype.fillValue=function(t,e){Object.keys(t).length&&(this.undoable?this._commands.execute(new c.FillValueTreeDataCommand(this,t,e)):this.$_fillValue(t,e))},d.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],n=0;n<t.length;n++){var r=this.rowById(t[n]);r?o.push(r):e.splice(n,1)}this.undoable?this._commands.execute(new p.UpdateRowsTreeDataCommand(this,o,e,i)):this.$_updateRows(o,e,i)}},d.prototype._findRowById=function(t){return this._rootRow.findById(t)},d.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},d.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},d.prototype.$_prepareMap=function(){var t=this;!function e(i){var o=i.children;o&&o.forEach((function(i){t._rowMap[i.rowId]=i,e(i)}))}(this._rootRow)},d.prototype.$_removeMap=function(t){var e=this;(t=i.Utils.makeArray(t,!0)).forEach((function(t){e._rowMap[t.rowId]=void 0,e.$_removeMap(t.children),t.dispose()}))},d.prototype.$_fillValue=function(t,i){if(this._checkClientState()){var o=Object.keys(t);if(o&&o.length){this.refreshFieldFormats();var n=[],r=[];for(var s in t){var a=this.rowById(+s);r.push(a),a.rowState==e.RowState.NONE&&n.push(a);for(var l=a.values,h=t[s],u=0;u<h.length;u++)l[h[u]]=i;a.$_internalUpdate(l,!1,!1)}n.length>0&&this._fireRowStatesChanged(n),this._tags.updateRows(r),this._fireRowsUpdated(r)}}},d.prototype.$_updateRows=function(t,i,o){if(this._checkClientState()&&t&&i){var n=Math.min(t.length,i.length);if(!(n<1)){this.refreshFieldFormats();for(var r=[],s=0;s<n;s++){var a=t[s];a.rowState==e.RowState.NONE&&r.push(a),a.$_internalUpdate(i[s],o,!1)}r.length>0&&this._fireRowStatesChanged(r),this._tags.updateRows(t),this._fireRowsUpdated(t)}}},d.prototype.findRow=function(t,e){return t&&t.length>0&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},d.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=r.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==r.RestoreMode.AUTO,this._rootRow._clearOrgValues()},d.prototype.$_summarizeChildren=function(t,e){for(var i=e.field,o=t.count,n=this.getField(e.field).dataType===s.ValueType.NUMBER,r=0;r<o;r++){var a=t.getChild(r),l=a.getValue(i);null==l||n&&(!n||isNaN(l))||(n&&(e.sum=e.dataCount?e.sum+l:l),(n||""!=l)&&e.dataCount++,(null==e.min||l<e.min)&&(e.min=l),(null==e.max||l>e.max)&&(e.max=l)),this.$_summarizeChildren(a,e)}},d.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,n=t.count,r=0,s=0;s<n;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(r+=Math.pow(l-o,2)),r+=this.$_summarizeVars(a,e)}return r},d.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},d.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderReset")},d.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},d.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},d.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},d.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},d.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",t,e,i)},d.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",t)},d.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",t,e,i)},d.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",t,e)},d.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",t)},d.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",t)},d.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",t)},d.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",t)},d.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",t)},d.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",t)},d.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",t)},d.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",t)},d.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",t,e,i)},d.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",t,e)},d.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",t)},d.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",t)},d.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",t,e)},d.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",t)},d.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",t,e)},d.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",t,e)},d.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",t,e)},d.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",t,e)},d.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",t,e,i)},d.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",t,e,i)},d.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",t,e,i)},d.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",t,e,i)},d.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",t,e)},d.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},d.prototype.undo=function(){this.canUndo&&this._commands.undo()},d.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},d.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},d}(h.TreeDataProvider);return me.LocalTreeDataProvider=m,me}var Ge,We={};var je,ze={},Ye={};function qe(){return je||(je=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExportOptions=t.ExportBaseOptions=t.ExportTarget=t.ExportType=void 0;var e,i,o=d,n=S(),r=G();!function(t){t.EXCEL="excel",t.CSV="csv"}(e=t.ExportType||(t.ExportType={})),function(t){t.LOCAL="local",t.REMOTE="remote",t.STREAM="stream"}(i=t.ExportTarget||(t.ExportTarget={}));var s=function(t){function r(o){var n=t.call(this)||this;return n._type=e.EXCEL,n._target=i.LOCAL,n.url=void 0,n.done=null,n.showProgress=!1,n.progressMessage="Exporting...",n.prepareProgress=10,n.progressCallback=null,n.params=null,n.assignFrom(o),n.extend(o),n}return o.__extends(r,t),_dp(r,"type",{get:function(){return this._type},set:function(t){t&&n.Utils.valueIn(t,e)&&(this._type=t)}}),_dp(r,"target",{get:function(){return this._target},set:function(t){t&&n.Utils.valueIn(t,i)&&(this._target=t)}}),_dp(r,"zip",{get:function(){return this._zip},set:function(t){this._zip=t}}),_dp(r,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var t=this.type===e.CSV?".csv":".xlsx";return this._fileName+t}return this._fileName}return this.type===e.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)}}),r}(r.Base);t.ExportBaseOptions=s;var a=function(t){function e(e){var i=t.call(this,e)||this;return i.datetimeCallback=null,i.numberCallback=null,i.booleanCallback=null,i.objectCallback=null,i.textCallback=null,i.start=0,i.count=-1,i.replaceCrText=null,i.replaceLfText=null,i.seperator=null,i.assignFrom(e),i.extend(e),i}return o.__extends(e,t),_dp(e,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)}}),_dp(e,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t)}}),_dp(e,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)}}),e}(s);t.ExportOptions=a}(Ye)),Ye}var Xe,Ke,Je,Ze={};function Qe(){if(Xe)return Ze;Xe=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.ExporterBase=void 0;var t=S(),e=function(){function e(){}return e.prototype.dispose=function(){return null},e.prototype.saveLocal=function(e,i,o){var n=(0,t.getDocWin)(o),r=i instanceof Blob?i:new Blob([i],{type:"text/csv charset=UTF-8"});if(n.navigator.msSaveOrOpenBlob)n.navigator.msSaveOrOpenBlob(r,e);else if(n.navigator.msSaveOrOpenBlob)n.navigator.msSaveOrOpenBlob(r,e);else{var s=o.createElement("a");o.body.appendChild(s);var a=window.URL.createObjectURL(r);s.href=a,s.download=e,s.click(),setTimeout((function(){o.body.removeChild(s)}),100)}},e.prototype.saveServer=function(t,e,i,o,n){var r='<form name="tempForm" action="'+i+'" method="post">';if(r+='<input type="hidden" name="fileName" value = "'+t+'"/>',r+='<input type="hidden" name="data" value = "'+e+'"/>',r+='<input id="submitBtn" type="submit"/>',n)for(var s in n)r+='<input type="hidden" name="'+s+'" value = "'+n[s]+'"/>';r+="</form>";var a=o.createElement("div");a.innerHTML=r,o.body.appendChild(a),o.getElementById("submitBtn").click(),setTimeout((function(){o.body.removeChild(a)}),100)},e}();return Ze.ExporterBase=e,Ze}function ti(){if(Je)return y;Je=1,Object.defineProperty(y,"__esModule",{value:!0}),y.LocalTreeDataProvider=y.LocalDataProvider=y.DataProviderBase=y.EventListenerBase=void 0;var t=d,e=C(),i=S(),o=D(),n=fe(),r=Ue(),s=Se(),a=function(){if(Ge)return We;Ge=1,Object.defineProperty(We,"__esModule",{value:!0}),We.TreeDataLoader=void 0;var t=d,e=G(),i=Se(),o=Ee(),n=ee(),r=function(e){function r(t){var i=e.call(this)||this;return i._ds=t,i}return t.__extends(r,e),r.prototype._doDispose=function(){e.prototype._doDispose.call(this)},r.prototype.load=function(t,e,o){var n=new i.DataFillOptions(o);if(this.$_checkEmpty(e,n))return 0;switch(this.$_prepareLoad(n),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,n);case"xml":return this.$_loadXml(e,n);case"csv":return this.$_loadCsv(e,n)}return 0},r.prototype.$_loadJson=function(t,e){if("string"==typeof t&&(t=JSON.parse(t)),t){var o=e.childrenField,n=e.iconField;if(e.fillMode==i.DataFillMode.APPEND){var r=this._ds.rowById(e.parentId);return this._ds.appendJsonRows(r,t,e.rows,o,n)}return this._ds.setJsonRows(t,e.rows,o,n)}return 0},r.prototype.$_loadXml=function(t,e){if("string"==typeof t&&(t=o.XmlUtils.parseXml(t)),t&&t.documentElement){var n=e.childrenField,r=e.iconField;if(e.fillMode==i.DataFillMode.APPEND){var s=this._ds.rowById(e.parentId);return this._ds.appendXmlRows(s,t,e.rows,n,r)}return this._ds.setXmlRows(t,e.rows,n,r)}return 0},r.prototype.$_loadCsv=function(t,e){var o=e.start,r=e.count,s=e.quoted,a=e.delimiter,l=n.DataHelper.csvToArray(this._ds,t,o,r,s,a);if(l&&(r=l.length)>0){var h=e.treeField,u=e.childrenField,d=e.iconField,c=e.needSorting;if(e.fillMode==i.DataFillMode.APPEND){var p=this._ds.rowById(e.parentId);this._ds.appendDataRows(p,l,h,c,u,d)}else this._ds.setRows(l,h,c,u,d);return l.length}return 0},r.prototype.$_fillEmpty=function(t){t.fillMode===i.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},r.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},r.prototype.$_prepareLoad=function(t){},r}(e.Base);return We.TreeDataLoader=r,We}(),l=_t(),h=Fe(),u=function(){if(Ke)return ze;Ke=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.DataCsvExporter=ze.DataExportOptions=void 0;var t=d,e=Ue(),i=fe(),o=pt(),n=C(),r=S(),s=qe(),a=Qe(),l=rt(),h=lt(),u=function(e){function i(t){var i=e.call(this,t)||this;return i.exportFields=null,i.hideFields=null,i.includeFieldNames=!1,i.extend(t),i}return t.__extends(i,e),_dp(i,"type",{get:function(){return s.ExportType.CSV}}),i}(s.ExportOptions);ze.DataExportOptions=u;var c=function(a){function d(){return a.call(this)||this}return t.__extends(d,a),d.prototype.dispose=function(){return a.prototype.dispose.call(this),null},d.prototype.export=function(t,o){this._dataSource=t,this._exportOptions=o instanceof u?o:new u(o),this._exportFields=this.$_prepareFields(t,o.exportFields,o.hideFields),this._rows=[],t instanceof e.LocalTreeDataProvider?this.$_buildTreeBook((function(){this.save()})):t instanceof i.LocalDataProvider&&this.$_buildBook((function(){this.save()}))},d.prototype.$_prepareFields=function(t,e,i){var o=t.getFields();return e?e.map((function(e){return t.fieldByName(e)})).filter((function(t){return t})):i?o.filter((function(t){return i.indexOf(t.orgFieldName)<0})):o},d.prototype.addQuatation=function(t,e){return r.Utils.addQuatation(t,e===n.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},d.prototype.$_buildFieldName=function(){return this._exportFields.map((function(t){return t.orgFieldName})).join(this._exportOptions.seperator||",")},d.prototype.$_buildBook=function(t){var e=this._exportOptions,i=this._dataSource.rowCount,o=Math.max(0,e.start),n=-1==e.count?i:Math.min(Math.max(e.count,0),i),r=Math.min(i,o+n);e.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var a=o;a<r;a++)this._rows.push(this.$_buildItem(a));if(e.target===s.ExportTarget.STREAM){var l=this._rows.join("\n");e.done&&"function"==typeof e.done&&e.done(l)}else e.done&&"function"==typeof e.done&&e.done(),t.call(this)},d.prototype.$_buildTreeBook=function(t){for(var e=this._exportOptions,i=this._dataSource.getDescendants(null,0),o=0;o<i.length;o++)this._rows.push(this.$_buildItem(i[o]));if(e.target===s.ExportTarget.STREAM){var n=this._rows.join("\n");e.done&&"function"==typeof e.done&&e.done(n)}else e.done&&"function"==typeof e.done&&e.done(),t.call(this)},d.prototype.$_buildItem=function(t){var i,r,s,a=this._dataSource,u=this._exportFields;a instanceof e.LocalTreeDataProvider?(r=t?t.values:[],s=t.rowId):(r=a.getRow(t),s=t);for(var d,c,p=[],_=u.length,f=this._exportOptions,g=f.seperator,m=0;m<_;m++){if(c=void 0,i=u[m])switch(d=r[i.index],i.dataType){case n.ValueType.NUMBER:c=isNaN(d)||null==d?"":f.numberCallback?null!=(c=f.numberCallback(s,i.orgFieldName,d,a.$_handler))?String(c):c:f.numberFormat?o.DecimalFormatter.getFormatter(f.numberFormat).getText(d):String(d);break;case n.ValueType.BOOLEAN:null!=d&&(f.booleanCallback?d=null!=(d=f.booleanCallback(s,i.orgFieldName,d,a.$_handler))?String(d):d:f.booleanFormat&&(d=h.BooleanFormatter.getFormatter(f.booleanFormat).formatValue(d)),c=String(d));break;case n.ValueType.DATE:case n.ValueType.DATETIME:d&&(c=f.datetimeCallback?(d=f.datetimeCallback(s,i.orgFieldName,d,a.$_handler))instanceof Date?l.DateTimeWriter.Default.getText(d):d:f.datetimeFormat?l.DateTimeWriter.getFormatter(f.datetimeFormat).getText(d):l.DateTimeWriter.Default.getText(d));break;case n.ValueType.OBJECT:d&&(c="object"==typeof(d=f.objectCallback?f.objectCallback(s,i.orgFieldName,d,a.$_handler):d)?JSON.stringify(d):String(d));break;default:c=null!=(d=f.textCallback?f.textCallback(s,i.orgFieldName,d,a.$_handler):d)?String(d):""}p[p.length]=this.addQuatation(c,i&&i.dataType)}return p.join(g||",")},d.prototype.save=function(){var t=this._exportOptions,e=t.fileName,i="\ufeff"+this._rows.join("\n");t.target==s.ExportTarget.LOCAL?this.saveLocal(e,i,document):this.saveServer(e,r.Base64.encode(i),t.url,document,t.params)},d}(a.ExporterBase);return ze.DataCsvExporter=c,ze}(),c=function(){function t(){}return t.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},t.fillData=function(t,e,i,o){var n=new s.DataLoader(t);try{n.load(e,i,o)}finally{n.dispose()}},t.fillTreeData=function(t,e,i,o){var n=new a.TreeDataLoader(t);try{n.load(e,i,o)}finally{n.dispose()}},t.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},t}(),p=function(){};y.EventListenerBase=p;var _=function(){function t(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}return t.prototype.dispose=function(){return this._dp.dispose(),this._dp=null},_dp(t,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t}}),_dp(t,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t}}),_dp(t,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t}}),_dp(t,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t}}),_dp(t,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t}}),_dp(t,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t}}),_dp(t,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t}}),_dp(t,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t}}),_dp(t,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t}}),_dp(t,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t}}),_dp(t,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t}}),_dp(t,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t}}),_dp(t,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t}}),_dp(t,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t}}),_dp(t,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText=t}}),_dp(t,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t}}),_dp(t,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(t){this._dp.valuesCallback=t}}),t.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},t.prototype.setOptions=function(t){this._dp.assignFrom(t)},t.prototype.beginUpdate=function(){this._dp.beginUpdate()},t.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},t.prototype.getFields=function(){return this._dp.getFields()},t.prototype.setFields=function(t){i.Utils.isArray(t)&&this._dp.setFields(t)},t.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},t.prototype.getFieldCount=function(){return this._dp.fieldCount},t.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},t.prototype.getFieldNames=function(){return this._dp.getFieldNames()},t.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},t.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},t.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},t.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},t.prototype.hasData=function(t){return this._dp.hasData(t)},t.prototype.getValues=function(t){return this._dp.getRow(t)},t.prototype.checkRowStates=function(t){this._dp.checkStates=t},t.prototype.getRowState=function(t){return this._dp.getRowState(t)},t.prototype.getStateRows=function(t){return void 0===t&&(t=o.RowState.NONE),this._dp.getStateRows(t)},t.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},t.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},t.prototype.setRowState=function(t,e,i){void 0===e&&(e=o.RowState.NONE),void 0===i&&(i=!1),this._dp.setRowState(t,e,i)},t.prototype.setRowStates=function(t,e,i,n){void 0===e&&(e=o.RowState.NONE),void 0===i&&(i=!1),void 0===n&&(n=!1),this._dp.setRowStates(t,e,i,n)},t.prototype.getRowStateCount=function(t){if(!t)return 0;var e=[];if("*"==t||"all"==t)e.push(o.RowState.CREATED,o.RowState.UPDATED,o.RowState.DELETED,o.RowState.CREATE_AND_DELETED);else for(var i=Array.isArray(t)?t:[t],n=0,r=i.length;n<r;n++)e.push(i[n]);return e.length>0?this._dp.getRowStateCount(e):void 0},t.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},t.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(i.Utils.makeArray(t))},t.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},t.prototype.getDistinctValues=function(t,i,o){void 0===i&&(i=-1),void 0===o&&(o=e.SortDirection.ASCENDING);var n=o||e.SortDirection.ASCENDING,r="string"==typeof t?this._dp.getFieldIndex(t):t;return this._dp.getDistinctValues(r,i,n)},t.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},t.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},t.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},t.prototype.getSavePoints=function(){return this._dp.getSavePoints()},t.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},t.prototype.exportToCsv=function(t){(new u.DataCsvExporter).export(this._dp,t)},t.prototype.destroy=function(){return this.dispose()},t.prototype.undo=function(){this._dp.undo()},t.prototype.redo=function(){this._dp.redo()},t.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},t.prototype.getProvider=function(){return this._dp},t}();y.DataProviderBase=_;var f=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}return t.__extends(i,e),_dp(i,"rowCount",{get:function(){return this._dp.rowCount},set:function(t){this._dp.setRowCount(t)}}),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRowCount=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i=null),void 0===n&&(n=o.RowState.NONE),this._dp.setRowCount(t,e,i,n)},i.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},i.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},i.prototype.fillJsonData=function(t,e){var i=e instanceof s.DataFillOptions?e:new s.DataFillOptions(e);c.fillData(this._dp,"json",t,i)},i.prototype.fillXmlData=function(t,e){var i=e instanceof s.DataFillOptions?e:new s.DataFillOptions(e);c.fillData(this._dp,"xml",t,i)},i.prototype.fillCsvData=function(t,e){var i=e instanceof s.DataFillOptions?e:new s.DataFillOptions(e);c.fillData(this._dp,"csv",t,i)},i.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},i.prototype.addRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this._dp.appendRows(t,e,i,o)},i.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._dp.insertRows(t,e,i,o,n)},i.prototype.updateRows=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._dp.updateRows(t,e,i,o,n,r)},i.prototype.updateRowsByDataRow=function(t,e,i){this._dp.updateRows2(t,e,i)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},i.prototype.hideRows=function(t){this._dp.hideRows(t)},i.prototype.showHiddenRows=function(t){this._dp.showRows(t)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.addRow=function(t){return this._dp.appendRow(t)},i.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},i.prototype.removeRow=function(t){this._dp.removeRow(t)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},i.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},i.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},i.prototype.getValue=function(t,e){var i=c.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},i.prototype.setValue=function(t,e,i){var o=c.getFieldIndex(this._dp,e);this._dp.setValue(t,o,i)},i.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},i.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},i.prototype.getJsonRows=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),this._dp.getRowObjects(t,e,i)},i.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},i.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=c.getFieldIndex(this._dp,t);return this._dp.getFieldValues(o,e,i)},i.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},i.prototype.searchData=function(t){return t?this._dp.searchData(t):null},i.prototype._createProvider=function(t){return new n.LocalDataProvider(t,this)},i.prototype._createListener=function(t){return new m(this,t)},i}(_);y.LocalDataProvider=f;var g=function(e){function i(t){void 0===t&&(t=!1);var i=e.call(this,t)||this;return i.onRowCountChanged=null,i.onRowAdding=null,i.onRowAdded=null,i.onRowsAdded=null,i.onRowDeleting=null,i.onRowDeleted=null,i.onRowsDeleted=null,i.onRowUpdating=null,i.onRowUpdated=null,i.onRowsUpdating=null,i.onRowsUpdated=null,i.onValueChanged=null,i.onDataChanged=null,i.onRowStateChanged=null,i.onRowStatesChanged=null,i.onRowSiblingMoving=null,i.onRowSiblingMoved=null,i.onRowsSiblingMoving=null,i.onRowsSiblingMoved=null,i.onRowParentChanging=null,i.onRowParentChanged=null,i}return t.__extends(i,e),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRows=function(t,e,i,o,n){void 0===i&&(i=!1),this._dp.setRows(t,e,i,o,n)},i.prototype.setCsvRows=function(t,e,i,o,n){this._dp.setCsvRows(t,e,i,o,n)},i.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},i.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},i.prototype.setNestedRows=function(t,e,i,o,n){this._dp.setJsonRows2(t,e,i,o,n)},i.prototype.fillJsonData=function(t,e){var i=new s.DataFillOptions(e);try{c.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},i.prototype.fillXmlData=function(t,e){var i=new s.DataFillOptions(e);try{c.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},i.prototype.fillCsvData=function(t,e){var i=new s.DataFillOptions(e);try{c.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},i.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},i.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},i.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},i.prototype.getLevel=function(t){return this._dp.rowById(t).level},i.prototype.getChildCount=function(t){var e=this._dp;if(null==t||-1==t)return e.getChildCount(null);var i=e.rowById(t);return i&&i.children?i.children.length:0},i.prototype.getChildren=function(t){var e,i=this._dp;null==t||-1==t?e=i.getRows(null):e=i.rowById(t).children;return c.extractTreeRows(e)},i.prototype.getDescendantCount=function(t){var e=this._dp;return null==t||-1==t?e.getDescendantCount(null):e.rowById(t).descendantCount},i.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null,o=this._dp;null!=t&&-1!=t&&(i=o.rowById(t));var n=o.getDescendants(i,e);return c.extractTreeRows(n)},i.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?c.extractTreeRows(e.ancestors):null},i.prototype.getJsonRow=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconIndex"),void 0===r&&(r=-1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a){var l=a.getObject()||{};return e&&(l.__rowState=a.rowState),i&&0!==r&&(l[o]=a.getChildObjects(i,o,n,!1,e,r-1)),l}return null},i.prototype.getJsonRows=function(t,e,i,o,n){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");var r=this._dp,s=null==t||t<=-1?r.rootRow:r.rowById(t);return s?s.getChildObjects(e,i,o,!0,n):null},i.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var o,n=new l.DataOutputOptions(t);try{var r=this._dp,s=null==e||e<0?r.rootRow:r.rowById(e);o=s?s.getOutput(n,i):null}finally{n.dispose()}return o},i.prototype.getOutputRows=function(t,e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===n&&(n="iconIndex");var r,s=new l.DataOutputOptions(t);try{var a=this._dp,h=null==e||e<=-1?a.rootRow:a.rowById(e);r=h?h.getChildOutputObjects(s,i,o,n):null}finally{s.dispose()}return r},i.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var n=this._dp,r=n.rowById(t)||n.rootRow,s=n.createRow(e,i,o);return r.addChild(s,!1)?s.rowId:-1},i.prototype.insertChildRow=function(t,e,i,o,n){void 0===o&&(o=-1),void 0===n&&(n=!1);var r=this._dp,s=r.rowById(t)||r.rootRow,a=r.createRow(i,o,n);return s.insertChild(e,a,!1)?a.rowId:-1},i.prototype.insertChildNode=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconField"),void 0===r&&(r=!1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a)return s.insertChildNode(a,e,i,o,n,r)},i.prototype.updateRow=function(t,e,i){var o=this._dp.rowById(t);return!!o&&o.update(e,i)},i.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},i.prototype.removeRow=function(t,e){var i=this._dp.rowById(t);return!(!i||!i.parent)&&i.parent.removeChild(i,e)},i.prototype.removeRows=function(t,e){return!!(t&&t.length>0)&&this._dp.removeRows(t,e)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.hideRows=function(t){this._dp.hideRows(t)},i.prototype.showHiddenRows=function(t){this._dp.showRows(t)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.getValue=function(t,e){var i=this._dp,o=i.rowById(t),n=c.getFieldIndex(i,e);return o?o.getValue(n):null},i.prototype.setValue=function(t,e,i){var o=this._dp,n=o.rowById(t),r=c.getFieldIndex(o,e);n&&n.setValue(r,i,!1)},i.prototype.moveRowSibling=function(t,e){var i=this._dp,o=i.rowById(t);return!!o&&i.changeRowIndex(o,e)},i.prototype.changeRowParent=function(t,e,i){var o=this._dp,n=o.rowById(t),r=e<0?o.rootRow:o.rowById(e);return!(!n||!r)&&o.changeRowParent(n,r,i)},i.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},i.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},i.prototype._createProvider=function(t){return new r.LocalTreeDataProvider(t,this)},i.prototype._createListener=function(t){return new v(this,t)},i}(_);y.LocalTreeDataProvider=g;var m=function(e){function o(t,i){var o=e.call(this)||this;return o._del=t,o._provider=i,o._provider.addListener(o),o}return t.__extends(o,e),o.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},o.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):i.Utils.log("onRowCountChanged: "+t.rowCount)},o.prototype.onDataProviderRowUpdating=function(t,e,o){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(i.Utils.log("onRowUpdating: "+e),!0)},o.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):i.Utils.log("onRowUpdated: "+e)},o.prototype.onDataProviderRowsUpdated=function(t,e,o){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,o):i.Utils.log("onRowsUpdated: "+e+", "+o)},o.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):i.Utils.log("onRowListUpdated: "+e)},o.prototype.onDataProviderRowInserting=function(t,e,o){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,o):(i.Utils.log("onRowInserting: "+e),!0)},o.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):i.Utils.log("onRowInserted: "+e)},o.prototype.onDataProviderRowsInserted=function(t,e,o){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,o):i.Utils.log("onRowsInserted: "+e+", "+o)},o.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(i.Utils.log("onRowDeleting: "+e),!0)},o.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):i.Utils.log("onRowDeleted: "+e)},o.prototype.onDataProviderRowsRemoving=function(t,e){return!0},o.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):i.Utils.log("onRowsDeleted: ",e)},o.prototype.onDataProviderRowMoving=function(t,e,o){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,o):(i.Utils.log("onRowMoving: "+e+", "+o),!0)},o.prototype.onDataProviderRowMoved=function(t,e,o){this._del.onRowMoved?this._del.onRowMoved(this._del,e,o):i.Utils.log("onRowMoved: "+e+", "+o)},o.prototype.onDataProviderRowsMoving=function(t,e,o,n){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,o,n):(i.Utils.log("onRowsMoving: "+e+", "+o+", "+n),!0)},o.prototype.onDataProviderRowsMoved=function(t,e,o,n){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,o,n):i.Utils.log("onRowsMoved: "+e+", "+o+", "+n)},o.prototype.onDataProviderRowListMoving=function(t,e,o){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,o):(i.Utils.log("onRowListMoving: ",e,", ",o),!0)},o.prototype.onDataProviderRowListMoved=function(t,e,o){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,o):i.Utils.log("onRowListMoved: ",e,o)},o.prototype.onDataProviderValueChanged=function(t,e,o){this._del.onValueChanged?this._del.onValueChanged(this._del,e,o):i.Utils.log("onValueChanged:"+e+", "+o)},o.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):i.Utils.log("onDataChanged")},o.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):i.Utils.log("onRowStateChanged: "+e)},o.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):i.Utils.log("onRowStatesChanged",e)},o.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):i.Utils.log("onRowStatesCleared")},o.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):i.Utils.log("onRestoreRows",e)},o}(p),v=function(e){function o(t,i){var o=e.call(this)||this;return o._del=t,o._provider=i,o._provider.addListener(o),o}return t.__extends(o,e),o.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},o.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):i.Utils.log("onRowCountChanged: "+t.rowCount)},o.prototype.onTreeDataProviderRowAdding=function(t,e,o,n){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,o,n._values):(i.Utils.log("onRowAdding: "+e.rowId+", "+o,n._values),!0)},o.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):i.Utils.log("onRowAdded: "+e.rowId)},o.prototype.onTreeDataProviderRowsAdded=function(t,e,o){var n=c.extractTreeRows(o);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,n):i.Utils.log("onRowsAdded: "+e.rowId,n)},o.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(i.Utils.log("onRowDeleting: "+e.rowId),!0)},o.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):i.Utils.log("onRowDeleted: "+e.rowId)},o.prototype.onTreeDataProviderRowsRemoved=function(t,e){var o=c.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,o):i.Utils.log("onRowsDeleted: ",o)},o.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(i.Utils.log("onRowUpdating:"+e.rowId),!0)},o.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):i.Utils.log("onRowUpdated: "+e.rowId)},o.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,h.TreeDataRow.getRowIds(e)):(i.Utils.log("onRowUpdating:"+e.length),!0)},o.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,h.TreeDataRow.getRowIds(e)):i.Utils.log("onRowsUpdated: "+e.length)},o.prototype.onTreeDataProviderValueChanged=function(t,e,o){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,o):i.Utils.log("onValueChanged: "+e.rowId+", "+o)},o.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):i.Utils.log("onRowStateChanged: "+e.rowId)},o.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var o=c.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,o):i.Utils.log("onRowStatesChanged: ",o)},o.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,o){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,o):(i.Utils.log("onRowSiblingMoveing: "+e.rowId+", "+o),!0)},o.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,o){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,o):i.Utils.log("onSiblingMoved: "+e.rowId+", "+o)},o.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,o){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,h.TreeDataRow.getRowIds(e),o):(i.Utils.log("onRowSiblingMoveing: ",e,o),!0)},o.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,o){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,h.TreeDataRow.getRowIds(e),o):i.Utils.log("onSiblingMoved: ",e,o)},o.prototype.onTreeDataProviderRowParentChanging=function(t,e,o,n){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,o.rowId,n);i.Utils.log("onRowParentChanging: "+e.rowId+", "+o.rowId+", "+n)},o.prototype.onTreeDataProviderRowParentChanged=function(t,e,o,n){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,o.rowId,n):i.Utils.log("onRowParentChanged: "+e.rowId+", "+o.rowId+", "+n)},o}(p);return y}var ei,ii,oi,ni,ri={},si={},ai={},li={},hi={};function ui(){if(ei)return hi;ei=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.FieldSummary=void 0;var t=function(){function t(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return t.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},t}();return hi.FieldSummary=t,hi}function di(){return ii||(ii=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GroupFooter=t.GroupItemImpl=t.GroupItem=t.GridRow=t.GridItem=t.RowStyle=t.ItemState_isInsertItem=t.ItemState_isInserting=t.ItemState_isEditing=t.ItemState=t.ITEM_EXT_CHECKED=void 0;var e=d,i=D(),o=ui(),n=bt(),r=C(),s=S();t.ITEM_EXT_CHECKED=1;var a,l=65536,h=131072,u=196608,c=4294705152;!function(t){t.NORMAL="normal",t.FOCUSED="focused",t.UPDATING="updating",t.INSERTING="inserting",t.APPENDING="appending",t.DUMMY="dummy"}(a=t.ItemState||(t.ItemState={}));t.ItemState_isEditing=function(t){return t==a.UPDATING||t==a.INSERTING||t==a.APPENDING};t.ItemState_isInserting=function(t){return t==a.INSERTING||t==a.APPENDING};t.ItemState_isInsertItem=function(t,e){return t==a.INSERTING||t==a.APPENDING||e==i.RowState.CREATED};var p=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},t.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},t}();t.RowStyle=p;var _=function(){function e(){this._id=e.$$_grid_item_id++,this._index=-1}return e.prototype.dispose=function(){this._parent=null},_dp(e,"id",{get:function(){return this._id}}),_dp(e,"index",{get:function(){return this._index}}),_dp(e,"parent",{get:function(){return this._parent}}),_dp(e,"parentIndex",{get:function(){return this._parent?this._parent._index:-1}}),_dp(e,"root",{get:function(){for(var t=this._parent;t&&t.level>1;)t=t._parent;return t}}),_dp(e,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(e,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(e,"isData",{get:function(){return!1}}),_dp(e,"isDataRow",{get:function(){return!1}}),_dp(e,"visible",{get:function(){return this._parent&&this._index>=0}}),_dp(e,"displayLevel",{get:function(){return this.level}}),_dp(e,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(e,"dataSource",{get:function(){return this._parent&&this._parent.dataSource}}),_dp(e,"dataRow",{get:function(){return-1}}),_dp(e,"dataId",{get:function(){return-1}}),_dp(e,"dataRowId",{get:function(){return-1}}),_dp(e,"rowState",{get:function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;return e?e.getRowState(t):i.RowState.NONE}return i.RowState.NONE}}),_dp(e,"itemState",{get:function(){return a.NORMAL}}),_dp(e,"checked",{get:function(){var e=0!=(this._getExtents()&t.ITEM_EXT_CHECKED);return this.provider.getItemChecked(this,e)}}),_dp(e,"checkable",{get:function(){return 0==(4&this._getExtents())}}),_dp(e,"editable",{get:function(){return!1}}),_dp(e,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())}}),_dp(e,"resizable",{get:function(){return!1}}),_dp(e,"merged",{get:function(){return!1}}),_dp(e,"height",{get:function(){var t=this._getExtents();return t&u?(t&c)>>>18:NaN}}),e.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(i&u)return this._setExtents(-196609&i),!0}else{if(t!=(i&c)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?-196609&i|h:-196609&i|l,this._setExtents(262143&i|t),!0;if(e){if(0==(i&h))return i=-196609&i|h,this._setExtents(i),!0}else if(0==(i&l))return i=-196609&i|l,this._setExtents(i),!0}},e.prototype.$_clearHeight=function(t){t?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),this.heights=null,0==this.index&&s.Utils.log("HEIGHT",this.height)},_dp(e,"heights",{get:function(){return this._heights},set:function(t){this._heights=t}}),e.prototype.getShadowRow=function(){return this.dataRow},e.prototype.getHeight=function(t){return this._heights[t]},e.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},e.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},e.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof g?this:null},e.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},e.prototype.getAncestors=function(){var t=null,e=this._parent;if(e){t=[];do{t.push(e),e=e._parent}while(e)}return t},e.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},e.prototype.getData=function(t){var e=this.dataSource;t=e.getFieldIndex(t);var i=this.getShadowRow();return e&&i>=0?e.getValue(i,t):void 0},e.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},e.prototype.getRowData=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRow(t)}return null},e.prototype.getRowObject=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},e.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},e.prototype.canEdit=function(){return!1},e.prototype._setIndex=function(t){this._index=t},e.prototype._setChecked=function(e){this.provider.setItemChecked(this,e)||this._setExtents(e?this._getExtents()|t.ITEM_EXT_CHECKED:this._getExtents()&~t.ITEM_EXT_CHECKED)},e.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},e.PARENT="_parent",e.$$_grid_item_id=0,e}();t.GridItem=_;var f=function(t){function i(e){var i=t.call(this)||this;return i._displayLevel=-1,i._extents=0,i._dataRow=e,i}return e.__extends(i,t),_dp(i,"dataRowId",{get:function(){return this._dataRowId}}),_dp(i,"editable",{get:function(){return this._editable}}),_dp(i,"readOnly",{get:function(){return this._readOnly}}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},_dp(i,"isData",{get:function(){return!0}}),_dp(i,"isDataRow",{get:function(){return!0}}),_dp(i,"dataRow",{get:function(){return this._dataRow}}),_dp(i,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),_dp(i,"isLeaf",{get:function(){return!0}}),_dp(i,"resizable",{get:function(){return!0}}),_dp(i,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level}}),_dp(i,"type",{get:function(){return r.ItemType.ROW}}),i.prototype.canEdit=function(){return!0},i.prototype.getShadowRow=function(){return this._dataRow},i.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},i}(_);t.GridRow=f;var g=function(t){function i(){var e=t.call(this)||this;return e._children=[],e._expanded=!1,e._descendantCount=0,e._summaries=null,e._rows=null,e}return e.__extends(i,t),i.prototype.dispose=function(){this._children=null,t.prototype.dispose.call(this)},_dp(i,"expanded",{get:function(){return this._expanded}}),_dp(i,"collapsed",{get:function(){return!this.expanded}}),_dp(i,"count",{get:function(){return this._children.length}}),_dp(i,"children",{get:function(){return this._children.slice()}}),_dp(i,"allFooterCount",{get:function(){return 0}}),_dp(i,"rows",{get:function(){return!this._rows&&this.$_collectRows(this,this._rows=[]),this._rows}}),_dp(i,"first",{get:function(){return this._children.length>0?this._children[0]:null}}),_dp(i,"last",{get:function(){var t=this._children.length;return t>0?this._children[t-1]:null}}),_dp(i,"firstItem",{get:function(){if(this._children.length>0){var t=this._children[0];return t instanceof i?t.firstItem:t}return null}}),_dp(i,"firstDataItem",{get:function(){if(this._children.length>0)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof i)return this._children[t].firstDataItem;if(this._children[t]instanceof f)return this._children[t]}return null}}),i.prototype.getFirstVisibleItem=function(t){return this},i.prototype.getLastItem=function(t){var e;if(this._children.length>0){for(var o=this._children.length;o&&(e=this._children[o-1],t&&e instanceof y);o--);return e instanceof i?e.getLastItem(t):e}return null},_dp(i,"lastDataItem",{get:function(){var t=this._children.length;if(t>0)for(;t>0;t--){var e=this._children[t-1];if(e instanceof i)return e.lastDataItem;if(e instanceof f)return e}return null}}),_dp(i,"descendantCount",{get:function(){return this._descendantCount}}),_dp(i,"expandable",{get:function(){return!0}}),_dp(i,"collapsable",{get:function(){return!0}}),i.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},i.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},i.prototype.getFooterIndex=function(t){return 0},i.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},i.prototype.indexOf=function(t){for(var e=this._children.length-1;e>=0;e--)if(this._children[e]==t)return e;return-1},i.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},i.prototype.getDescendants=function(t){if((!t||this._expanded)&&this._children&&this._children.length>0){var e=[];return function e(o,n){for(var r=o.count,s=0;s<r;s++){var a=o.getItem(s);n.push(a),a instanceof i&&(!t||a.expanded)&&e(a,n)}}(this,e),e}return null},i.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},i.prototype.insert=function(t,e){this._addChild(e,t)},i.prototype.add=function(t){this._addChild(t,-1)},i.prototype.addAll=function(t){var e,i=this,o=t.map((function(t){return t[_.PARENT]=i,t}));(e=this._children).push.apply(e,o)},i.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this._children.splice(e,1),t instanceof _&&(t[_.PARENT]=null))},i.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},i.prototype.setExpanded=function(t,e,i){(t!=this._expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof o.FieldSummary?e.count:e?e.length:this._descendantCount},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof o.FieldSummary)return e.dataCount;if(e){var i=this.dataSource,n=e.length,r=0;if(n>0){for(var s=0;s<n;s++){var a=i.getValue(e[s],t);null!=a&&""!==a&&r++}return r}}return 0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof o.FieldSummary)return e.dataAvg;if(e){for(var i=this.dataSource,n=e.length,r=0,s=0,a=0;a<n;a++){var l=i.getValue(e[a],t);isNaN(l)||(r+=l,s++)}return s>0&&!isNaN(r)?r/s:NaN}return NaN},i.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof o.FieldSummary)return e.sum;if(e){for(var i=this.dataSource,n=e.length,r=void 0,s=0;s<n;s++){var a=i.getValue(e[s],t);isNaN(a)||(r=(isNaN(r)?0:r)+a)}return r}return NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t),i=this.dataSource,n=i.getField(t).dataType===r.ValueType.NUMBER;if(e instanceof o.FieldSummary)return e.max;if(e){for(var s=e.length,a=void 0,l=0,h=null;l<s;)null!=(a=i.getValue(e[l++],t))&&(!n||!isNaN(a))&&(h=null==h||a>h?a:h);return h}return n?NaN:null},i.prototype.getMin=function(t){var e=this.$_getSummary(t),i=this.dataSource,n=i.getField(t).dataType===r.ValueType.NUMBER;if(e instanceof o.FieldSummary)return e.min;if(e){for(var s=e.length,a=void 0,l=0,h=null;l<s;)null!=(a=i.getValue(e[l++],t))&&(!n||!isNaN(a))&&(h=null==h||a<h?a:h);return h}return n?NaN:null},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof o.FieldSummary)return e.avg;if(e){var i=this.getSum(t);if(!isNaN(i))return i/e.length}return NaN},i.prototype.getVar=function(t,e){void 0===e&&(e=0);var i=this.$_getSummary(t);if(i instanceof o.FieldSummary)return 0===e?i.varsp:i.vars;if(i&&this.provider.summaryMode==r.SummaryMode.STATISTICAL){var n=this.dataSource,s=i.length;if(s>1){for(var a=0,l=0;l<s;l++)a+=n.getValue(i[l],t);var h=a/s;a=0;for(l=0;l<s;l++)a+=Math.pow(n.getValue(i[l],t)-h,2);return a/=s-e}if(1==s)return 0}return NaN},i.prototype.getStdev=function(t,e){void 0===e&&(e=0);var i=this.$_getSummary(t);if(i instanceof o.FieldSummary)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.provider.summaryMode==r.SummaryMode.STATISTICAL){var n=this.dataSource,s=i.length;if("string"==typeof t&&(t=n.getFieldIndex(t)),s>1){for(var a=0,l=0;l<s;l++)a+=n.getValue(i[l],t);var h=a/s;a=0;for(l=0;l<s;l++)a+=Math.pow(n.getValue(i[l],t)-h,2);return a=Math.sqrt(a/(s-e))}if(1==s)return 0}return NaN},i.prototype.getStdevp=function(t){return this.getStdev(t,1)},_dp(i,"isLeaf",{get:function(){return!1}}),i.prototype._setExpanded=function(t){this._expanded=t},i.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},i.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof _&&(e[_.PARENT]=this)},i.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[_.PARENT]=this)},i.prototype._addChildren=function(t){var e;if(t&&(e=t.length)>0)for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[_.PARENT]=this,this._children.push(o))}},i.prototype._removeChild=function(t){var e=this.indexOf(t);return e>=0&&(this._children.splice(e,1),t instanceof _&&(t[_.PARENT]=null)),e},i.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},i.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||t>=i)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),n=this._children[t];if(e<0)for(var r=t;r>o;r--)this._children[r]=this._children[r-1];else for(r=t;r<o;r++)this._children[r]=this._children[r+1];this._children[o]=n},i.prototype.$_collectRows=function(t,e){for(var o=t.count,n=0;n<o;n++){var r=t.getItem(n);r instanceof i?this.$_collectRows(r,e):r.isDataRow&&e.push(r.dataRow)}},i.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof n.DataProvider))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},i.prototype.$_summarize=function(t,e){var i=this.provider.summaryMode;if(i!=r.SummaryMode.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&e.canSummarize(t)){var n=new o.FieldSummary(t);return e.summarizeRange(n,this._rows,i==r.SummaryMode.STATISTICAL),n}return this._rows}return null},i.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},i.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;e>=0;e--){var o=this.getItem(e);o instanceof i&&o._restoreExpanded(!0)}},i}(_);t.GroupItem=g;var m=function(t){function i(e){var i=t.call(this)||this;return i._footers=0,i._extents=0,i._allFooters=[],i._groupField=e,i}return e.__extends(i,t),i.prototype.dispose=function(){this._allFooters=null,t.prototype.dispose.call(this)},_dp(i,"groupField",{get:function(){return this._groupField}}),_dp(i,"groupValue",{get:function(){return this._groupValue},set:function(t){this._groupValue=t}}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},_dp(i,"footer",{get:function(){return this._footer}}),_dp(i,"type",{get:function(){return r.ItemType.GROUP}}),_dp(i,"footerCount",{get:function(){return this._footers}}),_dp(i,"allFooterCount",{get:function(){return this._allFooters.length}}),i.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},i.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},i.prototype.getFooterIndex=function(t){return t.$_footerIndex},i.prototype.isFooter=function(t){if(t===this._footer)return!0;if(this._footers>1)for(var e=this._children,i=e.length-1;i>=0;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},i.prototype._addChild=function(e,i){e instanceof y?(this._allFooters.push(e),e[_.PARENT]=this,e.hiddenFooter||(t.prototype._addChild.call(this,e,i),this._footer=this._footer||e,this._footers++)):t.prototype._addChild.call(this,e,i)},i.prototype.getFirstVisibleItem=function(t){if(this.visible)return this;for(var e=0,i=this.children.length;e<i;e++){var o=this.children[e];if(t&&this.footer&&this.footer.visible)return this.footer;if(o instanceof g){var n=o.getFirstVisibleItem(t);if(n)return n}else if(o.visible)return o}return null},i}(g);t.GroupItemImpl=m;var y=function(t){function i(){var e=t.call(this)||this;return e.$_footerIndex=0,e._hiddenFooter=!1,e._extents=0,e}return e.__extends(i,t),_dp(i,"footerIndex",{get:function(){return this.$_footerIndex}}),_dp(i,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex}}),_dp(i,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t}}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},_dp(i,"isLeaf",{get:function(){return!0}}),_dp(i,"isData",{get:function(){return!0}}),_dp(i,"displayLevel",{get:function(){return this.level}}),_dp(i,"type",{get:function(){return r.ItemType.FOOTER}}),i}(_);t.GroupFooter=y}(li)),li}function ci(){if(oi)return ai;oi=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.ProxyItemProvider=ai.ItemProvider=ai.RootItem=void 0;var t=d,e=C(),i=di(),o=et(),n=function(e){function i(t){var i=e.call(this,-1)||this;return i._provider=t,i}return t.__extends(i,e),_dp(i,"provider",{get:function(){return this._provider}}),_dp(i,"level",{get:function(){return 0}}),_dp(i,"expanded",{get:function(){return!1}}),_dp(i,"isLeaf",{get:function(){return!1}}),_dp(i,"dataSource",{get:function(){return this._provider.dataSource}}),_dp(i,"expandable",{get:function(){return!1}}),_dp(i,"collapsable",{get:function(){return!1}}),i}(i.GroupItemImpl);ai.RootItem=n;var r=function(o){function r(t){var e=o.call(this)||this;return e._hideDeleted=!1,e._eventLock=0,e._rowHeighted=!1,e._explicitHeighted=!1,e._indexing=t,e._rootItem=e._createRootItem(),e}return t.__extends(r,o),r.prototype._doDispose=function(){return this._rootItem.dispose(),null},_dp(r,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())}}),_dp(r,"summaryMode",{get:function(){return e.SummaryMode.AGGREGATE},set:function(t){}}),_dp(r,"sortMode",{get:function(){return e.SortMode.AUTO},set:function(t){}}),_dp(r,"fixedCount",{get:function(){return 0}}),_dp(r,"maxItemCount",{get:function(){return 0},set:function(t){}}),_dp(r,"movable",{get:function(){return!1}}),r.prototype.setFixed=function(t,e,i,o){},r.prototype.attachItem=function(t){t._parent=this._rootItem},r.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]);n&&e.push(n)}return e},r.prototype.getIndexOfRow=function(t,e){var i=this.getItemOfRow(t,e);return i?i.index:-1},r.prototype.getIndicesOfRows=function(t,e){var i=[],o=t?t.length:0;if(o)for(var n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);i.push(r?r.index:-1)}return i},r.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);r&&i.push(r)}return i},r.prototype.exchange=function(t,e){},r.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},r.prototype.setGroupCheckable=function(t){},r.prototype.checkItem=function(t,e,i,o){if(t){var n=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=n&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=n&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},r.prototype.checkItems=function(t,e,o){if(t&&t.length>0){for(var n=0,r=t.length;n<r;n++){var s=t[n];s instanceof i.GridItem&&this._setChecked(s,e)}o?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},r.prototype.checkAll=function(t,e,i,o,n){var r=this.itemCount;if(i)for(var s=0;s<r;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<r;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},r.prototype._setCheckItem=function(t,e){t._setChecked(e)},r.prototype._clearDisplayLevels=function(){},r.prototype.canUpdate=function(t,e){if(t){var o=this.dataSource;if(!o)return!1;var n=t.dataRow;if(!o.canUpdateField(n,e))return!1;var r=t.itemState,s=(0,i.ItemState_isInserting)(r)||r===i.ItemState.DUMMY;return(n>=0||s)&&(s||o.canUpdateRow(n))}return!1},r.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},r.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},r.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return e>=0&&i&&i.canDeleteRow(e)}return!1},r.prototype.appendDummy=function(){},r.prototype.cancelDummy=function(){},r.prototype.findItem=function(t,e,i,o,n){return-1},r.prototype.findCell=function(t,e,i,o,n,r){return null},r.prototype.getNumber=function(t){return NaN},r.prototype.getSum=function(t){return NaN},r.prototype.getMax=function(t){return NaN},r.prototype.getMin=function(t){return NaN},r.prototype.getAvg=function(t){return NaN},r.prototype.getVar=function(t){return NaN},r.prototype.getVarp=function(t){return NaN},r.prototype.getStdev=function(t){return NaN},r.prototype.getStdevp=function(t){return NaN},r.prototype.getDataCount=function(t){return NaN},r.prototype.getDataAvg=function(t){return NaN},_dp(r,"isIndexing",{get:function(){return this._indexing}}),r.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},r.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;i>=0;i--){var o=this.getItem(i);isNaN(o.height)&&!o.heights||(o.$_clearHeight(t),o.heights=null,e=!0)}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},r.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},r.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},r.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},r.prototype.setItemChecked=function(t,e){if(this._checkFieldIndex>-1){var i=this.dataSource.getField(this._checkFieldIndex),o=i.readBooleanValue(t.getData(this._checkFieldIndex));return!!o!=e&&(o=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,o)),!0}return!1},_dp(r,"rootItem",{get:function(){return this._rootItem}}),r.prototype._createRootItem=function(){return new n(this)},r.prototype._hideDeletedChanged=function(){},r.prototype.$_canFire=function(){return this._eventLock<=0},r.prototype._setChecked=function(t,e){t._setChecked(e)},r.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},r.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},r.prototype._setExpanded=function(t,e){t._setExpanded(e)},r.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},r.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},r.prototype._copyExtents=function(t,e){t instanceof i.GridItem&&e instanceof i.GridItem&&e._setExtents(t._getExtents())},r.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onItemProviderReset")},r.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh")},r.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},r.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",t)},r.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",t)},r.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",t)},r.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",t)},r.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",t)},r.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",t,e)},r.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",t)},r.prototype._fireItemCheckChanged=function(t,e){this.fireEvent("onItemProviderItemCheckChanged",t,e)},r.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",t)},r.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",t)},r.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},r.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderSort",t,e,i)},r.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},r.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",t,e)},r.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",t,e)},r.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")},r.prototype.canGrouping=function(t){return!1},r}(o.EventAware);ai.ItemProvider=r;var s=function(e){function i(t,i){var o=e.call(this,i)||this;return o._initialize(),o.source=t,o}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))}}),_dp(i,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)}}),_dp(i,"rowCount",{get:function(){return this._source?this._source.rowCount:0}}),_dp(i,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0}}),_dp(i,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)}}),_dp(i,"sorted",{get:function(){return this._source&&this._source.sorted}}),i.prototype.setFixed=function(t,e,i,o){this._source&&this._source.setFixed(t,e,i,o)},i.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},i.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},i.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},i.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},i.prototype._initialize=function(){},i.prototype._clearItems=function(){},i.prototype._populateItems=function(){this._resetItemIndicies(0)},i.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},i.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},i.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},i.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},i.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},i.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},i.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},i.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},i.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},i.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},i.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},i.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},i.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},i.prototype.onItemProviderFiltered=function(t,e,i){},i.prototype.onItemProviderSort=function(t,e,i){},i.prototype.onItemProviderSorted=function(t){},i.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()},i}(r);return ai.ProxyItemProvider=s,ai}function pi(){if(ni)return si;ni=1,Object.defineProperty(si,"__esModule",{value:!0}),si.EditableItemProviderImpl=si.EditableItemProvider=si.EditItem=si.DummyEditItem=void 0;var t=d,e=ci(),i=di(),o=ft(),n=bt(),r=Mt(),s=D(),a=function(e){function i(t,i,o,n,r){var s=e.call(this,n)||this;return s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._target=i,t.attachItem(s),s._setIndex(o),s._state=r,s.$_setDisplayLevel(i?i.displayLevel:0),s}return t.__extends(i,e),_dp(i,"values",{get:function(){},set:function(t){}}),i.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},i.prototype.setValue=function(t,e){},_dp(i,"resizable",{get:function(){return!1}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"editable",{get:function(){return!0}}),i.prototype.getData=function(t){return null},i.prototype.setData=function(t,e){},i.prototype.getRowData=function(){return null},i.prototype.getRowObject=function(){return null},i.prototype._clearDisplayLevels=function(){},i}(i.GridRow);si.DummyEditItem=a;var l=function(e){function n(t,i,o,n,r){var s=e.call(this,n)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=i,t.attachItem(s),s._setIndex(o),s._state=r,s.$_setDisplayLevel(i?i.displayLevel:0),s._invalidFields=[],s}return t.__extends(n,e),_dp(n,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var n=0;n<o;n++){var r=i.getField(n),s=this._values[n],a=r.readValue(t[n]);this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}}else if(t)for(n=0;n<o;n++){var l=i.getOrgFieldName(n);if(t.hasOwnProperty(l)){r=i.getField(n),s=this._values[n],a=r.readValue(t[l]);this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}}}}),_dp(n,"invalidFields",{get:function(){return this._invalidFields}}),n.prototype.beginEdit=function(t,e){(0,i.ItemState_isInserting)(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},n.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new o.DataSourceError("field index is out of bounds: "+t);var n=i.getField(t),r=this._values[t];e=n.readValue(e),this._values[t]=e,this._started&&!n.equalValues(r,e)&&this.provider._editItemCellUpdated(this,t,r,e),this.$_clearHeight(!1)},_dp(n,"resizable",{get:function(){return!1}}),_dp(n,"itemState",{get:function(){return this._state}}),_dp(n,"level",{get:function(){return this._target?this._target.level:1}}),n.prototype.getData=function(t){if((t=this.dataSource.getFieldIndex(t))<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},n.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t],r=!this._checkDiff;e=o.readValue(e),r||(r=this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)),r&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,n,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},n.prototype.getRowData=function(){return this._values.concat()},n.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},n.prototype.isEdited=function(t){return this._changeValues[t]},n.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?this._getExtents()|i.ITEM_EXT_CHECKED:this._getExtents()&~i.ITEM_EXT_CHECKED)},n.prototype._clearDisplayLevels=function(){},n}(i.GridRow);si.EditItem=l;var h=function(e){function o(t,o){var n=e.call(this,t,o)||this;return n._checkDiff=!1,n._checkCellDiff=!1,n._strictDiff=!1,n._undoable=!1,n._cancelWhenLastUndo=!1,n._orgItem=null,n._editingItem=null,n._dummyEditItem=null,n._editingState=i.ItemState.NORMAL,n._insertMode=0,n._modified=!1,n._commiting=!1,n._saveDs=null,n._commands=new r.EditCommandStack(n),t&&(n._saveDs=t.dataSource)&&n._saveDs.registerClient(n),n}return t.__extends(o,e),o.prototype._doDispose=function(){this._saveDs=null,e.prototype._doDispose.call(this)},o.prototype.isDataEditing=function(){return this.isEditing()},o.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},o.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},o.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},_dp(o,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(o,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(o,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(o,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null}}),_dp(o,"isUpdating",{get:function(){return this._editingState==i.ItemState.UPDATING}}),_dp(o,"isInserting",{get:function(){return this._editingState==i.ItemState.INSERTING}}),_dp(o,"isAppending",{get:function(){return this._editingState==i.ItemState.APPENDING}}),_dp(o,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)}}),_dp(o,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(o,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo}}),_dp(o,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo}}),_dp(o,"undoing",{get:function(){return this._commands.undoing}}),_dp(o,"redoing",{get:function(){return this._commands.redoing}}),o.prototype.isEditing=function(t){return(0,i.ItemState_isEditing)(this._editingState)&&(!t||t===this._editingItem)},o.prototype.isEdited=function(t){return(0,i.ItemState_isEditing)(this._editingState)&&(!t||t===this._editingItem)&&this._modified},o.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},o.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},o.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&e>=0&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},o.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},o.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},o.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},o.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},o.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},o.prototype.commit=function(t){if(this.isEditing()){this._commiting=!0;try{var e=this.dataSource;if(e){if(this._editingState==i.ItemState.UPDATING&&this.isCheckDiff){for(var o=this._editingItem.values,n=o.length,r=this.isStrictDiff,s=!1,a=0;a<n;a++)if(r){if(!e.getField(a).equalValues(this._orgItem.getData(a),o[a])){s=!0;break}}else if(!e.getField(a).sameValues(this._orgItem.getData(a),o[a])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this._commitEdit(t)}}finally{this._commiting=!1}}return!0},o.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},o.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},o.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},o.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},o.prototype.revert=function(t){},o.prototype.revertAll=function(t){},o.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},o.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},o.prototype._beginUpdate=function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=t,this._editingState=i.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},o.prototype._doBeginUpdate=function(t){return null},o.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},o.prototype._doBeginAppendDummy=function(){return null},o.prototype._beginAppend=function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=i.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},o.prototype._doBeginAppend=function(t){return null},o.prototype._beginInsert=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,o,n),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=i.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},o.prototype._doBeginInsert=function(t,e,i,o){return null},o.prototype._updateEditingRow=function(t){return!1},o.prototype._insertEditingRow=function(t){return!1},o.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},o.prototype._cancelEdit=function(){this._checkEditing();var t=this._editingState;try{this._editingState=i.ItemState.NORMAL,this._doCancelEdit(t,this._orgItem)}catch(e){throw this._editingState=t,e}this._modified=!1,this._commands.flush(),this.fireCanceled()},o.prototype._doCancelDummyEdit=function(){},o.prototype._doCancelEdit=function(t,e){t==i.ItemState.INSERTING&&this._resetItemIndicies(0)},o.prototype._commitEdit=function(t){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var e=this._editingState,o=!1;if(this.isUpdating)try{this._editingState=i.ItemState.NORMAL,o=this._doCompleteUpdate(this._orgItem,t)}catch(t){throw this._editingState=e,t}else try{this._editingState=i.ItemState.NORMAL,o=this._doCompleteInsert(e==i.ItemState.APPENDING)}catch(t){throw this._editingState=e,t}return o?(this._modified=!1,this._doCommitEdit(e,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=e,o},o.prototype._doCommitEdit=function(t,e){return!1},o.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},o.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},o.prototype.$_editingItem=function(){return this._editingItem},o.prototype.$_dummyItem=function(){return this._dummyEditItem},o.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(o.UPDATE_STARTED,t)},o.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(o.APPEND_STARTED,t)},o.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(o.INSERT_STARTED,t)},o.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(o.CELL_EDITED,t,e)},o.prototype.fireItemCellUpdated=function(t,e,i,n){this.$_canFire()&&this.fireEvent(o.CELL_UPDATED,t,e,i,n)},o.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(o.COMMITTING,t)},o.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(o.COMMITTED,t)},o.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(o.CANCELED)},o.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(o.COMMIT_REQUEST)},o.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(o.CANCEL_REQUEST)},o.prototype.onItemProviderReset=function(t){e.prototype.onItemProviderReset.call(this,t);var i=this.dataSource;i!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=i,this._saveDs&&this._saveDs.registerClient(this))},o.prototype.onItemProviderRefresh=function(t){e.prototype.onItemProviderRefresh.call(this,t)},o.prototype.onItemProviderRefreshClient=function(t){e.prototype.onItemProviderRefreshClient.call(this,t)},o.prototype.onItemProviderItemInserted=function(t,i){e.prototype.onItemProviderItemInserted.call(this,t,i)},o.prototype.onItemProviderItemDeleted=function(t,i){e.prototype.onItemProviderItemDeleted.call(this,t,i)},o.prototype.onItemProviderItemUpdated=function(t,i){e.prototype.onItemProviderItemUpdated.call(this,t,i)},o.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},o.UPDATE_STARTED="onItemEditUpdateStarted",o.APPEND_STARTED="onItemEditAppendStarted",o.INSERT_STARTED="onItemEditInsertStarted",o.CELL_EDITED="onItemEditCellEdited",o.CELL_UPDATED="onItemEditCellUpdated",o.COMMITTING="onItemEditCommitting",o.COMMITTED="onItemEditCommitted",o.CANCELED="onItemEditCanceled",o.COMMIT_REQUEST="onItemEditCommitRequest",o.CANCEL_REQUEST="onItemEditCancelRequest",o}(e.ProxyItemProvider);si.EditableItemProvider=h;var u=function(e){function o(t,i){var o=e.call(this,t,i)||this;return o._insertRow=-1,o}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+=this.$_dummyItem()?1:0}}),o.prototype.getItem=function(t,e){var i=this.source;if(e)return i.getItem(t,e);var o,n=this.$_editingItem(),r=this.$_dummyItem();return this.isEditing()&&n.index==t?n:(this.isInserting?o=t>n.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(o=i.getItem(t)),o||(r&&t==this.itemCount-1?r:null))},o.prototype.getItems=function(t,e){return this.source.getItems(t,e)},o.prototype._doBeginUpdate=function(t){return this._createEditItem(t,i.ItemState.UPDATING,null,!1,!1)},o.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},o.prototype._doBeginAppend=function(t){return this._createEditItem(null,i.ItemState.APPENDING,t,!1,!1)},o.prototype._doBeginInsert=function(t,e,o,n){return this._createEditItem(t,i.ItemState.INSERTING,e,o,n)},o.prototype._doCompleteUpdate=function(t,e){var i=this.dataSource;if(i instanceof n.DataProvider){var o=this.$_editingItem();return this._copyExtents(o,t),e||i.updateRow(o.dataRow,o.values,!1)}return!1},o.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this.$_editingItem(),n=t?e.rowCount:Math.max(0,this._insertRow),r=o.values;if(i=e.insertRow(n,r,o._index2)){var s=this.getItemOfRow(n,!0);s&&(o._setCheckable(s.checkable),this._copyExtents(o,s),o.heights&&(s.heights=o.heights.slice()))}}return i},o.prototype.remove=function(t,e){var i=this.dataSource;if(t&&!this.isEditing(t)&&i){var o=t.dataRow;o>=0&&i.removeRow(o,e)}},o.prototype.revert=function(t){if(t instanceof i.GridItem||(t=this.getItem(t)),t){var e=this.dataSource;if(e){var o=t.dataRow,n=e.getRowState(o);n==s.RowState.DELETED?e.setRowState(o,s.RowState.NONE,!1):n==s.RowState.CREATE_AND_DELETED&&e.setRowState(o,s.RowState.CREATED,!1)}}},o.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e)for(var i=t.length;i--;){var o=this.getItem(t[i]);if(o){var n=o.dataRow,r=e.getRowState(n);r==s.RowState.DELETED?e.setRowState(n,s.RowState.NONE,!1):r==s.RowState.CREATE_AND_DELETED&&e.setRowState(n,s.RowState.CREATED,!1)}}}},o.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]).dataRow;n>=0&&e.push(n)}return e},o.prototype.removeRows=function(t,e){t&&(t.length>1?this.dataSource.removeRows(t,!1,e):this.dataSource.removeRow(t[0],e))},o.prototype.updateRows2=function(t){this.dataSource.updateRows2(t,!1,!1)},o.prototype._createDummyEditItem=function(){return new a(this,null,this.itemCount,-1,i.ItemState.DUMMY)},o.prototype._createEditItem=function(t,e,o,n,r){var s=this.dataSource;if(!s)return null;var a=null,h=s.fieldCount;switch(e){case i.ItemState.UPDATING:a=new l(this,t,t.index,t.dataRow,e);for(var u=0;u<h;u++)a.setValue(u,t.getData(u));this._copyExtents(t,a),t.heights&&(a._heights=t.heights.slice());break;case i.ItemState.INSERTING:case i.ItemState.APPENDING:var d=this._rs,c=e==i.ItemState.INSERTING&&t?n?t.index+1:t.index:this.itemCount;if(a=new l(this,t,c,-1,e),e==i.ItemState.INSERTING){var p=t.dataRow,_=t;if(p<=-1){for(var f=this.source._visibleItems;(_=f.getNext(_))&&!(_ instanceof i.GridRow););this._insertRow=_?_.dataRow:s.rowCount}else this._insertRow=n?Math.min(s.rowCount,p+1):p;if(t instanceof i.GridRow&&n&&d){var g=d._pubItems.indexOf(_);g++>=0&&g<=d._pubItems.length&&(a._index2=g)}}if(o)for(u=0;u<h;u++)o.length>u&&a.setValue(u,o[u])}return a},o}(h);return si.EditableItemProviderImpl=u,si}var _i,fi={},gi={},mi={};function yi(){if(_i)return mi;_i=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.ExpressionStatement=mi.ExpressionStatementError=void 0;var t=d,e=function(e){function i(t,i){var o=e.call(this,t)||this;return o.message=t,o.tokenPos=i,o}return t.__extends(i,e),i}(Error);mi.ExpressionStatementError=e;var i=function(){function t(t){this.literal=t}return t.prototype.evaluate=function(t){return this.literal},t}(),o=function(){function t(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}return t.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},t}(),n=function(){function t(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}return t.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var n=e.substr(0,i).trim(),r=e.substring(i+1,o).replace(/['|"]/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(n)),t.evaluateIndexerS(this.idKey,r,this.capital)}},t}(),r=function(){function t(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}return _dp(t,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))}}),t.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,n=e.length;o<n;o++){i+=e[o].evaluate(t)||""}return i}catch(t){if(!this._silentError)throw new t}return null},t.prototype._parse=function(t){if(this._tokens=[],t)for(var e,r=t.length,s=0;s<r;){var a=t.indexOf("${",s);if(a>=0){var l=t.indexOf("}",a+2);if(l>=0){if(a>s){var h=t.substring(s,a);e=new i(h),this._tokens.push(e)}if(c=t.substring(a+2,l).trim()){var u,d=void 0;e=(u=c.indexOf("["))&&(d=c.indexOf("]"))&&u<d?new n(c):new o(c),this._tokens.push(e)}s=l+1}else a=-1}if(a<0){var c=t.substr(s,r);e=new i(c),this._tokens.push(e);break}}},t}();return mi.ExpressionStatement=r,mi}var vi,Ci={};function wi(){return vi||(vi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnFilterRuntime=t.ColumnFilterCollection=t.ColumnFilterRun=t.ColumnFilterCategory=t.ColumnFilter=t.ActiveState=void 0;var e,i=d,o=et(),n=Y(),r=D(),s=S();!function(t){t.ACTIVE="active",t.UNACTIVE="unactive",t.INDETERMINATE="indeterminate"}(e=t.ActiveState||(t.ActiveState={}));var a=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._visible=!0,i._level=0,i._category=null,i.criteria=e,i}return i.__extends(e,t),e.prototype._doDispose=function(){this._criteria=null,this._category=null,t.prototype._doDispose.call(this)},_dp(e,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(e,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())}}),_dp(e,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()}}),_dp(e,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()}}),_dp(e,"description",{get:function(){return this._description},set:function(t){this._description=t}}),_dp(e,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())}}),_dp(e,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()}}),_dp(e,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(e,"category",{get:function(){return this._category},set:function(t){this._category=t}}),_dp(e,"level",{get:function(){return this._level},set:function(t){this._level=t}}),e.prototype.toString=function(){return this._text||this._name},e.prototype.changed=function(){this.fireEvent(e.CHANGED)},e.prototype.criteriaChanged=function(){},e.prototype.callbackChanged=function(){},e.CHANGED="onColumnFilterChanged",e}(o.EventAware);t.ColumnFilter=a;var l=function(t){function o(){var e=t.call(this,null)||this;return e._childs=[],e}return i.__extends(o,t),_dp(o,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t}}),_dp(o,"count",{get:function(){return this._childs.length}}),_dp(o,"activeState",{get:function(){for(var t=void 0,i=0,o=this._childs.length;i<o;i++){if(null!=t&&this._childs[i].active!=t)return e.INDETERMINATE;t=this._childs[i].active}return t?e.ACTIVE:e.UNACTIVE}}),o.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},o.prototype.clear=function(){this._childs=[]},o.prototype.add=function(t,e,i,o,n){var r=new a(o);return r.name=e,r.text=i,r.active=n,this.addChild(r),t.add(r),r},o.prototype.addChild=function(t){t.level=this.level+1,t.category=this,this._childs.push(t)},o.prototype.getChild=function(t){return this._childs[t]},o}(a);t.ColumnFilterCategory=l;var h=function(){function t(t){this._model=t,this.parse()}return t.prototype._doDispose=function(){this._exprNode=null,this._model=null},_dp(t,"model",{get:function(){return this._model}}),t.prototype.prepare=function(t,e){t.setDataSource(e)},t.prototype.select=function(t,e,i,o){var n=this._model.callback;return n?n.call(this,t._ds.handler,i.dataRow,e.level+1,o,this._model,i.getData(o)):!this._exprNode||(t.setData(i,o,this._model),this._exprNode.evaluate(t))},t.prototype.criteriaChanged=function(){this.parse()},t.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=n.ExpressionParser.Default.parse(this._model.criteria,null):this._exprNode=null)},t}();t.ColumnFilterRun=h;var u=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._names={},i._updating=!1,i._nextId=1,i._owner=e,i}return i.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(e,"count",{get:function(){return this._items.length}}),_dp(e,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++){i[e].active&&t++}return t}}),_dp(e,"items",{get:function(){return this._items.slice()}}),_dp(e,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++){if(e[t].visible)return!0}return!1}}),e.prototype.getOwner=function(){return this._owner},e.prototype.getItem=function(t){return this._items[t]},e.prototype.indexOf=function(t){for(var e=this._items.length-1;e>=0;e--)if(this._items[e].name==t)return e;return-1},e.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;i>=0;i--)this._items[i].active==t&&e.push(this._items[i]);return e},e.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],o=i.length,n=0;n<o;n++)if((t=i[n])&&t.name){this.$_checkName(t.name);var r=new a(null);r.assignFrom(t),this._items.push(r),this._names[t.name]=r,r.addListener(this)}(e||this.count>0)&&this.changed(null)}},e.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(e>0){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},e.prototype.add=function(t,e){void 0===e&&(e=!0);var i=s.Utils.cast(t,a);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),i&&(this._items.push(i),i._owner=this,this._names[i.name]=i,i.addListener(this),e&&this.changed(null))},e.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&t.length>0){for(var i=0,o=t.length,n=0;n<o;n++){var r=s.Utils.cast(t[n],a);if(r?this._items.indexOf(r)<0&&r.name&&(e||this.$_checkName(r.name)):t[n]&&t[n].name&&(e||this.$_checkName(t[n].name),(r=new a(null)).assignFrom(t[n])),r){var l=this.indexOf(r.name);l>=0?(this._items[l]&&this._items[l].removeListener(this),this._items[l]=r):this._items.push(r),r.addListener(this),this._names[r.name]=r,i++}}i>0&&this.changed(null)}},e.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;i>=0;i--){var o=this.indexOf(t[i]);if(o>=0){var n=this._items[o];this._items.splice(o,1),delete this._names[n.name],n.removeListener(this),e++}}e>0&&this.changed(null)}},e.prototype.$_activateItems=function(t,e,i){var o=!1;this._updating=!0;try{t.forEach((function(t){t.active!=e&&(t._active=e,o=!0)}))}finally{this._updating=!1}i&&o&&this.changed(null)},e.prototype.activateItems=function(t,e,i){var o=this;if(void 0===i&&(i=!0),t){var n=t.filter((function(t){return t&&o._names[t]})).map((function(t){return o._names[t]}));this.$_activateItems(n,e,i)}},e.prototype.activateAll=function(t,e){this.$_activateItems(this._items,t,e)},e.prototype.$_hideFilters=function(t,e){t.forEach((function(t){t&&(t.visible=!e)}))},e.prototype.hideFilters=function(t,e){var i=this;t&&this.$_hideFilters(t.filter((function(t){return i._names[t]})).map((function(t){return i._names[t]})),e)},e.prototype.hideAllFilters=function(t){this.$_hideFilters(this._items,t)},e.prototype.$_toggleItems=function(t){var e=!1;this._updating=!0;try{t.forEach((function(t){t._active=!t.active,e=!0}))}finally{this._updating=!1}e&&this.changed(null)},e.prototype.toggleItems=function(t){var e=this;t&&this.$_toggleItems(t.filter((function(t){return e._names[t]})).map((function(t){return e._names[t]})))},e.prototype.toggleAll=function(){this.$_toggleItems(this._items)},e.prototype.changed=function(t){this._updating||this.fireEvent(a.CHANGED,t)},e.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},e.prototype.onColumnFilterChanged=function(t){this.changed(t)},e.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},e.prototype.onColumnFilterUserAdd=function(t,e,i){},e}(o.EventAware);t.ColumnFilterCollection=u;var c=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e._fieldCount=0,e}return i.__extends(e,t),e.prototype._doDispose=function(){this._item=this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},e.prototype.setData=function(t,e,i){this._item=t,this._field=e,this._model=i},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.$_getLookupText=function(t){var e=t._owner._owner;if(e.lookupDisplay){var i=e.lookupSource;if(i){for(var o=e.lookupKeyFieldIds,n=o.length,r=[],s=0;s<n;s++)r.push(this._item.getData(o[s]));return i.lookup(r,e.valueSeparator)}var a=e.labelFieldIndex;return a>=0?this._item.getData(a):e.getLookupLabel(this._item.getData(e.fieldName))}return""},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._item.getData(this._field);case e.ID_TEXT:return this.$_getLookupText(this._model);case e.ID_STATE:switch(this._item.rowState){case r.RowState.CREATED:return"c";case r.RowState.UPDATED:return"u";case r.RowState.DELETED:return"d";case r.RowState.CREATE_AND_DELETED:return"x"}return;case e.ID_CHANGED_CELL:var i=this._item.dataRow,o=this._field;return o>=0&&this._item.rowState==r.RowState.UPDATED&&this._ds.isDataChanged(i,o);case e.ID_FIELD:return this._field}throw new n.ExpressionEvaluationError("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new n.ExpressionEvaluationError("Data field index out of bounds:"+i);return this._item.getData(i)}throw new n.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new n.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new n.ExpressionEvaluationError("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_VALUES=2,e.ID_STATE=3,e.ID_CHANGED_CELL=4,e.ID_TEXT=5,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,values:e.ID_VALUES,state:e.ID_STATE,changedcell:e.ID_CHANGED_CELL,text:e.ID_TEXT},e}(n.ExpressionRuntime);t.ColumnFilterRuntime=c}(Ci)),Ci}var xi,bi={};function Ii(){if(xi)return bi;xi=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.VisualObject=bi.GridObject=void 0;var t=d,e=function(e){function i(t){var i=e.call(this)||this;return i._dirty=!1,i._grid=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._grid}}),_dp(i,"dirty",{get:function(){return this._dirty},set:function(t){t!==this._dirty&&(this._dirty=t,this.invalidate())}}),i.prototype.clean=function(){this._dirty&&(this._dirty=!1)},i.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},i.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},i.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},i.prototype._doChanged=function(){},i}(et().EventAware);bi.GridObject=e;var i=function(e){function i(t){var i=e.call(this,t)||this;return i._visible=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())}}),i.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},i.prototype._visibleChanged=function(){this._changed()},i}(e);return bi.VisualObject=i,bi}var Ei,Si,Ri={},Ti={},Di={},ki={};function Mi(){if(Ei)return ki;Ei=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.RowGroupStatementRuntime=ki.EqualBlankRuntime=ki.DataRowExpressionRuntime=void 0;var t=d,e=Y(),i=di(),o=S(),n=D(),r=function(r){function s(){var t=r.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}return t.__extends(s,r),s.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,r.prototype._doDispose.call(this)},_dp(s,"index",{get:function(){return this._item.index}}),_dp(s,"item",{get:function(){return this._item}}),s.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},s.prototype.setItem=function(t){this._item=t,this._group=o.Utils.cast(t,i.GroupItem)},s.prototype.isIdentifier=function(t){return t=t.toLowerCase(),s.IDENTS.hasOwnProperty(t)?s.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},s.prototype.evaluateIdentifier=function(t){switch(t){case s.ID_ROW:return this._item.index;case s.ID_DATAROW:return this._item.dataRow;case s.ID_CHECKED:return this._item.checked;case s.ID_STATE:switch(this._item.rowState){case n.RowState.CREATED:return"c";case n.RowState.UPDATED:return"u";case n.RowState.DELETED:return"d";case n.RowState.CREATE_AND_DELETED:return"x"}return;case s.ID_COUNT:return this._group?this._group.count:0;case s.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},s.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==s.ID_VALUE||t==s.ID_VALUES){if(i<0||i>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds:"+i);return this._item.getData(i)}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},s.prototype.evaluateIndexerS=function(t,i,o){if(t!=s.ID_VALUE&&t!=s.ID_VALUES)throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){var n=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(n<0||n>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field is not exists:"+i);return this._item.getData(n)}},s.ID_ROW=0,s.ID_DATAROW=1,s.ID_CHECKED=2,s.ID_VALUE=3,s.ID_VALUES=4,s.ID_STATE=5,s.ID_COUNT=6,s.ID_DCOUNT=7,s.IDENTS={row:s.ID_ROW,datarow:s.ID_DATAROW,checked:s.ID_CHECKED,value:s.ID_VALUE,values:s.ID_VALUES,state:s.ID_STATE,count:s.ID_COUNT,dcount:s.ID_DCOUNT},s}(e.ExpressionRuntime);ki.DataRowExpressionRuntime=r;var s=function(i){function o(){var t=i.call(this)||this;return t._fieldCount=0,t}return t.__extends(o,i),o.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,i.prototype._doDispose.call(this)},o.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},o.prototype.setItem=function(t){this._item=t},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){var i;switch(t){case o.ID_VALUE:return this._item.getData(this._cell.index.dataField);case o.ID_BASE:return(i=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(i):void 0;case o.ID_PREV_VALUES:var n=this._cell.index.column,r=this._grid.getDataColumns();i=r.indexOf(n);var s=[];if(r.length||i<0)return;for(var a=0,l=Math.min(i,r.length);a<l;a++)s.push(this._item.getData(r[a].dataIndex));return s.join("`")}throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==o.ID_VALUE||t==o.ID_VALUES){if(i<0||i>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds:"+i);return this._item.getData(i)}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},o.prototype.evaluateIndexerS=function(t,i,n){if(t!=o.ID_VALUE&&t!=o.ID_VALUES)throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var r=n?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field is not exists:"+i);return this._item.getData(r)}},o.ID_VALUE=0,o.ID_VALUES=1,o.ID_BASE=2,o.ID_PREV_VALUES=3,o.IDENTS={value:o.ID_VALUE,values:o.ID_VALUES,base:o.ID_BASE,prevvalues:o.ID_PREV_VALUES},o}(e.ExpressionRuntime);ki.EqualBlankRuntime=s;var a=function(i){function o(){return i.call(this)||this}return t.__extends(o,i),o.prototype.setGrid=function(t){this._grid=t},o.prototype.setGroup=function(t){this._group=t},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){var i,n,r=this._group;switch(t){case o.ID_GROUP_FIELD:return(i=r.dataSource.getField(r.groupField))?i.fieldName:"";case o.ID_FIELD_HEADER:return(i=r.dataSource.getField(r.groupField))?i.header:"";case o.ID_GROUP_COLUMN:return(n=this._grid?this._grid.columnByField(r.groupField):null)?n.displayText:r.dataSource.getFieldName(r.groupField);case o.ID_COLUMN_HEADER:return(n=this._grid?this._grid.columnByField(r.groupField):null)?n.header.text||n.displayText:r.dataSource.getFieldName(r.groupField);case o.ID_COLUMN_FOOTER:return(n=this._grid?this._grid.columnByField(r.groupField):null)?n.footer.text||n.displayText:r.dataSource.getFieldName(r.groupField);case o.ID_GROUP_VALUE:return r?r.groupValue:void 0;case o.ID_ROW_COUNT:return r.descendantCount}throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,i){switch(t){case o.ID_SUM:case o.ID_MAX:case o.ID_MIN:case o.ID_AVG:case o.ID_DATA_COUNT:case o.ID_DATA_AVG:if(isNaN(i)||i<0)return;var n=void 0;switch(t){case o.ID_SUM:n=this._group.getSum(i);break;case o.ID_MAX:n=this._group.getMax(i);break;case o.ID_MIN:n=this._group.getMin(i);break;case o.ID_AVG:n=this._group.getAvg(i);break;case o.ID_DATA_COUNT:n=this._group.getDataCount(i);break;case o.ID_DATA_AVG:n=this._group.getDataAvg(i)}return isNaN(n)?"":String(n)}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,n=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,n)},o.ID_GROUP_FIELD=0,o.ID_FIELD_HEADER=1,o.ID_GROUP_COLUMN=2,o.ID_COLUMN_HEADER=3,o.ID_COLUMN_FOOTER=4,o.ID_GROUP_VALUE=5,o.ID_ROW_COUNT=6,o.ID_SUM=7,o.ID_MAX=8,o.ID_MIN=9,o.ID_AVG=10,o.ID_DATA_COUNT=11,o.ID_DATA_AVG=12,o.IDENTS={groupfield:o.ID_GROUP_FIELD,fieldheader:o.ID_FIELD_HEADER,groupcolumn:o.ID_GROUP_COLUMN,columnheader:o.ID_COLUMN_HEADER,columnfooter:o.ID_COLUMN_FOOTER,groupvalue:o.ID_GROUP_VALUE,rowcount:o.ID_ROW_COUNT,sum:o.ID_SUM,max:o.ID_MAX,min:o.ID_MIN,avg:o.ID_AVG,datacount:o.ID_DATA_COUNT,dataavg:o.ID_DATA_AVG},o}(e.ExpressionRuntime);return ki.RowGroupStatementRuntime=a,ki}function Li(){if(Si)return Di;Si=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.MergedDataCell=Di.SeriesCell=Di.LiteralCell=Di.HiddenDataCell=Di.DataCell=Di.ValueCell=Di.StyledCell=Di.GridCell=void 0;var t=d,e=G(),i=Do(),o=di(),n=C(),r=xo(),s=Mi(),a=function(e){function o(t){var o=e.call(this)||this;return o._index=new i.CellIndex,o._name=t,o}return t.__extends(o,e),o.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,e.prototype._doDispose.call(this)},_dp(o,"name",{get:function(){return this._name}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"item",{get:function(){return this._index.item}}),_dp(o,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(o,"dataColumn",{get:function(){return this._index.dataColumn}}),_dp(o,"text",{get:function(){return null}}),_dp(o,"value",{get:function(){}}),_dp(o,"level",{get:function(){return 0}}),o.prototype.setIndex=function(t){this._index.assignFrom(t)},o.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},o.prototype.setLayout=function(t){this._index.layout=t},o.ERROR="<<ERROR>>",o}(e.Base);Di.GridCell=a;var l=function(e){function i(t,i){void 0===i&&(i=null);var o=e.call(this,i)||this;return o._model=t,o}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"model",{get:function(){return this._model},set:function(t){this._model=t}}),i}(a);Di.StyledCell=l;var h=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getBlankState=function(){return n.BlankState.NONE},i.prototype.isValueChanged=function(){return!1},i}(a);Di.ValueCell=h;var u=function(e){function r(t){return void 0===t&&(t=null),e.call(this,t||"dataCell")||this}return t.__extends(r,e),r.getText=function(t,e){var i=e.dataIndex>=0?t.getData(e.dataIndex):void 0;return r._getText(t,e,i)},r._getText=function(t,e,o){var r,s=e;if(s.lookupDisplay){var a=s.lookupSource;if(a){for(var l=s.lookupKeyFieldIds,h=l.length,u=[],d=0;d<h;d++)u.push(t.getData(l[d]));r=void 0!==(r=a.lookup(u,s.valueSeparator))?r:null!=s.textOfInvalid?s.textOfInvalid:o}else{var c=s.labelFieldIndex;r=c>=0?t.getData(c):s.getLookupLabel(o)}}else{var p,_=void 0;if(r=o,s.valueType==n.ValueType.NUMBER&&null!=(p=s.nanText)&&isNaN(r))r=p;else if(_=s.displayCallback){r=_(s.grid.handler,i.DummyCellIndex.tempItem(s.grid,t,e).proxy(),r)}else null!=r&&"object"==typeof r&&(r=JSON.stringify(r))}return null==r?"":String(r)},r._getDisplayText=function(t,e,i,o,s){var a,l=t.formatOptions,h=s.textFormatter||void 0===i.textFormat&&l.textFormatter,u=s.numberFormatter||void 0===i.numberFormat&&l.numberFormatter,d=s.booleanFormatter||void 0===i.booleanFormat&&l.boolFormatter,c=s.datetimeWriter||void 0===i.datetimeFormat&&l.datetimeWriter;if(i){switch(i.valueType){case n.ValueType.TEXT:a=o&&h?h.getText(o):r._getText(e,i,o);break;case n.ValueType.NUMBER:var p=Number(o);a=isNaN(p)||null==p?i.nanText:0==p&&null!=i.zeroText?i.zeroText:u?u.getText(p,i.displayMinusZero):r._getText(e,i,o);break;case n.ValueType.DATETIME:a=o instanceof Date&&c?c.getText(o):r._getText(e,i,o);break;case n.ValueType.BOOLEAN:a=d?d.formatValue(o):r._getText(e,i,o);break;case n.ValueType.OBJECT:var _=i.getField(),f=e.dataRow,g=i.objectKey||_.objectKey,m=i.objectCallback||_.objectCallback;if(o){var y=m&&"function"==typeof m?m(_.orgFieldName,f,o):g?o[g]:r._getText(e,i,o);switch(typeof y){case"string":a=r._getText(e,i,y);break;case"number":a=u?u.getText(y,i.displayMinusZero):String(y);break;case"boolean":a=d?d.formatValue(y):String(y);break;default:a=y instanceof Date&&c?c.getText(y):y?String(y):""}}break;default:a=r._getText(e,i,o)}if(a){var v=s.prefix;v&&(a=v+a),(v=s.suffix)&&(a+=v)}}return a},r.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new s.EqualBlankRuntime),this._equalBlankRuntime},r.prototype._doDispose=function(){e.prototype._doDispose.call(this)},r.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(t>=0)return this.item.getData(t)},r.prototype.getDisplayText=function(t,e){return r._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},_dp(r,"value",{get:function(){return this.getValue()}}),r.prototype.getBlankState=function(){var t=function(t,e){return t instanceof Date&&e instanceof Date?+t==+e:t==e},e=function(t){return d?(c.setItem(t),d.evaluate(c)):t.getData(h.dataIndex)},i=function(i,r,a){if(i>=r&&i<a){var l=e(u),h=i===r?null:p.getItem(i-1),d=i===a-1?null:p.getItem(i+1);if(s=h instanceof o.GridRow&&t(l,e(h))?n.BlankState.BODY:n.BlankState.HEAD,!(d instanceof o.GridRow&&t(l,e(d))))switch(s){case n.BlankState.BODY:s=n.BlankState.TAIL;break;case n.BlankState.HEAD:s=n.BlankState.NONE}}return s},s=n.BlankState.NONE,a=this.index,l=a.layout,h=this.dataColumn,u=this.item,d=l.equalBlankNode,c=d&&r.equalBlankRuntime(),p=l.grid,_=p.fixedOptions.rowCount,f=p.layoutManager.topIndex,g=p.fixedOptions.blankRows;if(l&&l.blanked&&l.dataRoot&&u.dataRow>=0){var m=a.itemIndex;return d&&c&&c.setDataArguments(u.dataSource,this,u),s=m<_&&g?i(m,0,_):i(m,_+f,p.itemCount)}return s},r.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return t>=0&&this.item.isChanged(t)},r}(h);Di.DataCell=u;var c=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.setItem=function(t){this.$_item=t},_dp(i,"item",{get:function(){return this.$_item}}),i}(u);Di.HiddenDataCell=c;var p=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"literalCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return""}}),_dp(i,"value",{get:function(){return null}}),i.prototype.getDisplayText=function(t){return this.text},i}(h);Di.LiteralCell=p;var _=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"seriesCell")||this}return t.__extends(i,e),i.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},_dp(i,"getText",{get:function(){return null}}),_dp(i,"value",{get:function(){var t=this.index.column;if(t instanceof r.SeriesColumn){var e=t.fields,i=e?e.length:0;if(i>0){for(var o=this.item,n=new Array(i),s=0;s<i;s++)e[s]>=0&&(n[s]=o.getData(e[s]));return n}}return[]}}),i}(h);Di.SeriesCell=_;var f=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"mergedDataCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getValue=function(){var t=this.index,i=t.item;return i instanceof o.GridRow?e.prototype.getValue.call(this):(i=(i instanceof o.GroupItem?i:i.parent).firstItem).getData(t.dataField)},_dp(i,"text",{get:function(){return this.getValue()}}),i}(u);return Di.MergedDataCell=f,Di}var Oi,Fi={};var Pi,Bi={};function Vi(){if(Pi)return Bi;Pi=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.SvgElement=Bi.SvgRenderer=void 0;var t=d,e=G(),i=S(),o="http://www.w3.org/2000/svg",n=0,r=function(e){function r(t,i){var o=e.call(this)||this;return o._transforms=[],o._defs=t,o._element=i,o}return t.__extends(r,e),r.prototype._doDispose=function(){this.clear(),e.prototype._doDispose.call(this)},_dp(r,"doc",{get:function(){return(0,i.getDoc)(this._element)||document}}),r.prototype.init=function(t,e){return this._defs=t,this._element=e,this},r.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},r.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},r.prototype.restore=function(){this._trans=this._transforms.pop()},r.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},r.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},r.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},r.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},r.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},r.prototype.clip=function(t,e,i,r){var s=this.doc,a=n++,l=s.createElementNS(o,"clipPath");l.setAttributeNS(null,"id","clip"+a);var h=s.createElementNS(o,"rect");h.x.baseVal.value=t,h.y.baseVal.value=e,h.width.baseVal.value=i,h.height.baseVal.value=r,l.appendChild(h),this._defs.appendChild(l)},r.prototype.sline=function(t,e,i,n,r){var s=this.doc.createElementNS(o,"line");this._element.appendChild(s),s.x1.baseVal.valueAsString=e,s.y1.baseVal.valueAsString=i,s.x2.baseVal.valueAsString=n,s.y2.baseVal.valueAsString=r,t&&s.setAttribute("class",t)},r.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(o,"polygon");this._element.appendChild(i);var n=[];n.push(e[0]+","+e[1]);for(var r=2;r<e.length;r+=2)n.push(e[r]+","+e[r+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",n.join(" ")),t&&i.setAttribute("class",t)}},r.prototype.bounds=function(t,e,i,n,r){var s=this.doc.createElementNS(o,"rect");this._element.appendChild(s),s.x.baseVal.value=e,s.y.baseVal.value=r<0?i+r:i,s.width.baseVal.value=n,s.height.baseVal.value=Math.abs(r),t&&s.setAttribute("class",t)},r.prototype.pbounds=function(t,e,i,n,r){var s=this.doc.createElementNS(o,"rect");this._element.appendChild(s),s.x.baseVal.valueAsString=e+"%",s.y.baseVal.valueAsString=(r<0?i+r:i)+"%",s.width.baseVal.valueAsString=n+"%",s.height.baseVal.valueAsString=Math.abs(r)+"%",t&&s.setAttribute("class",t)},r.prototype.sbounds=function(t,e,i,n,r){var s=this.doc.createElementNS(o,"rect");this._element.appendChild(s),s.x.baseVal.valueAsString=e,s.y.baseVal.valueAsString=i,s.width.baseVal.valueAsString=n,s.height.baseVal.valueAsString=r,t&&s.setAttribute("class",t)},r.prototype.scircle=function(t,e,i,n){var r=this.doc.createElementNS(o,"circle");this._element.appendChild(r),r.cx.baseVal.valueAsString=e,r.cy.baseVal.valueAsString=i,r.r.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},r.prototype.ellipse=function(t,e,i,n,r){var s=this.doc.createElementNS(o,"ellipse"),a=n/2,l=r/2;this._element.appendChild(s),s.cx.baseVal.value=e+a,s.cy.baseVal.value=i+l,s.rx.baseVal.value=a,s.ry.baseVal.value=l,t&&s.setAttribute("class",t)},r}(e.Base);Bi.SvgRenderer=r;var s=function(e){function n(t){var n=e.call(this)||this,s=(0,i.getDoc)(t),a=n._element=s.createElementNS(o,"svg"),l=a.style,h=n._defs=s.createElementNS(o,"defs");return a.appendChild(h),l.background="",l.border="none",l.pointerEvents="none",t.appendChild(a),n._renderer=new r(n._defs),n}return t.__extends(n,e),n.createSVG=function(t){var e=(0,i.getDoc)(t),n=e.createElementNS(o,"svg"),r=n.style,s=e.createElementNS(o,"defs");n.appendChild(s),r.background="",r.border="none",r.pointerEvents="none";var a=e.createElementNS(o,"g");return n.appendChild(a),t.appendChild(n),n},n.renderSVG=function(t,e,i){var o=e.lastElementChild,n=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,n,e.clientWidth,e.clientHeight),n.clear()},n.renderSVG2=function(t,e,n){var r=(0,i.getDoc)(e);e.childElementCount>1&&e.removeChild(e.lastElementChild);var s=r.createElementNS(o,"g"),a=this._renderer.init(e.firstChild,s);e.appendChild(s),n.call(t,e,a),a.clear()},n.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,e.prototype._doDispose.call(this)},_dp(n,"element",{get:function(){return this._element}}),n.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},n.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var t=(0,i.getDoc)(this._element).createElementNS(o,"g");this._element.appendChild(t),this._renderer._element=t},n.prototype._doRender=function(t,e,i){},n._renderer=new r,n}(e.Base);return Bi.SvgElement=s,Bi}var Ni,Ai={};var $i,Hi,Ui,Gi={};function Wi(){return Hi||(Hi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Code128CellRenderer=t.Code39CellRenderer=t.SignalBarCellRenderer=t.FlexShapeCellRenderer=t.ShapeCellRenderer=t.LinkCellRenderer=t.ButtonCellRenderer=t.FlexCheckCellRenderer=t.CheckCellRenderer=t.FlexIconCellRenderer=t.IconCellRenderer=t.FlexibleCellRenderer=t.ImageCellRenderer=t.BarCellRenderer=t.BarOrigin=t.TextCellRenderer=t.DataCellRenderer=t.RendererEditResult=void 0;var e=d,i=Li(),o=function(){if(Oi)return Fi;Oi=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Code39=Fi.Code128=void 0;var t=d,e=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}}}),_dp(i,"error",{get:function(){return this._error}}),i.prototype.render=function(t,e){this._doRender(t,e,!1)},i.prototype.renders=function(t,e){this._doRender(t,e,!0)},i}(G().Base),i=function(e){function i(){var t=e.call(this)||this;return t.minBarWidth=1,t.maxBarWidth=0,t.barWidth=0,t}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var n=this.barWidth;n<=0&&(n=Math.floor(e.width/o),n=Math.max(this.minBarWidth,n),this.maxBarWidth>0&&(n=Math.min(this.maxBarWidth,n))),o*=n,e.x+=(e.width-o)/2,e.x=Math.floor(e.x),this._drawBars(t,this.barStyle,i,e.x,e.y,n,e.height)}},i}(e),o=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],n=[103,104,105],r=[251658240,15728640,983040,61440,3840,240,15],s=function(e){function i(){var t=e.call(this)||this;return t.quietZoneWidth=10,t}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t),r=n[i],s=o[r],a=r;if(this._weights.push(s),2==i)for(var l=0;l<e;l+=2){var h=t.substr(l,2);r=parseInt(h),r=this.$_convert(i,r),s=o[r],this._weights.push(s),a+=r*(Math.floor(l/2)+1)}else for(l=0;l<e;l++)r=t.charCodeAt(l),r=this.$_convert(i,r),s=o[r],this._weights.push(s),a+=r*(l+1);a%=103,this._weights.push(o[a]),this._weights.push(o[106])}},i.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},i.prototype._drawBars=function(t,e,i,o,n,s,a){o+=10*s;for(var l,h=this._weights.length-1,u=0;u<h;u++){l=this._weights[u];for(var d=0;d<6;d++){var c=(l&r[d+1])>>4*(5-d);c*=s,d%2==0&&(i?t.sbounds(e,o+"",n+"%",c+"",a+"%"):t.bounds(e,o,n,c,a)),o+=c}}for(l=this._weights[h],d=0;d<7;d++)c=(l&r[d])>>4*(6-d),c*=s,d%2==0&&(i?t.sbounds(e,o+"",n+"%",c+"",a+"%"):t.bounds(e,o,n,c,a)),o+=c},i.prototype.$_convert=function(t,e){switch(t){case 0:if(e>=0&&e<32)return e+64;if(e>=32&&e<96)return e-32;break;case 1:if(e>=32&&e<128)return e-32;break;case 2:if(e>=0&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},i.prototype.$_detectType=function(t){return t.length%2==0&&/^\d+$/.test(t)?2:/[a-z]/.test(t)?1:0},i}(i);Fi.Code128=s;var a={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},l=function(e){function i(){var t=e.call(this)||this;return t._wideWidth=3,t}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(a["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),n=a[o];if(!n)throw new Error("Invalid Code39 character: "+o);this._codes.push(n)}this._codes.push(a["*"])}},i.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},i.prototype._drawBars=function(t,e,i,o,n,r,s){var a=this._codes.length;if(a>2)for(var l=0;l<a;l++){for(var h=this._codes[l],u=0;u<9;u++){var d="n"==h.charAt(u)?1:this._wideWidth;d*=r,u%2==0&&(i?t.sbounds(e,o+"",n+"%",d+"",s+"%"):t.bounds(e,o,n,d,s)),o+=d}l<a-1&&(o+=r)}},i}(i);return Fi.Code39=l,Fi}(),n=Vi(),r=E(),s=function(){if(Ni)return Ai;Ni=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.EllipseShape=Ai.PolygonShape=Ai.ShapeDrawing=void 0;var t=d,e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},i}(G().Base);Ai.ShapeDrawing=e;var i={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},o={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},n=function(e){function n(t){var i=e.call(this)||this;return i._shape=t,i}return t.__extends(n,e),_dp(n,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?n.INVERTED_TRIANLGE:t.toLowerCase():null}}),n.prototype._doDraw=function(t,e,n){var r=this._shape;if(i.hasOwnProperty(r)){if(d=i[r]){for(var s=0,a=0,l=0,h=(d=d.slice()).length/2;l<h;l++)d[2*l]=s+d[2*l]*e,d[2*l+1]=a+d[2*l+1]*n;d.push(d[0],d[1]),t.polygon(null,d)}}else if(o.hasOwnProperty(r)){var u=o[r];if(u){var d;for(s=0,a=0,l=0,h=(d=u[0].slice()).length/2;l<h;l++)d[2*l]=s+d[2*l]*e,d[2*l+1]=a+d[2*l+1]*n;for(d.push(d[0],d[1]),t.polygon(null,d),l=0,h=(d=(d=u[1]).slice()).length/2;l<h;l++)d[2*l]=s+d[2*l]*e,d[2*l+1]=a+d[2*l+1]*n;d.push(d[0],d[1]),t.polygon(null,d)}}},n.RECTANGLE="rectangle",n.TRIANLGE="triangle",n.INVERTED_TRIANLGE="itriangle",n.DIAMOND="diamond",n.UP_ARROW="uparrow",n.DOWN_ARROW="downarrow",n.LEFT_ARROW="leftarrow",n.RIGHT_ARROW="rightarrow",n.PLUS="plus",n.MINUS="minus",n.EQUAL="equal",n.STAR="star",n}(e);Ai.PolygonShape=n;var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},i}(e);return Ai.EllipseShape=r,Ai}(),a=C(),l=G(),h=S(),u=function(){if($i)return Gi;$i=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.RenderHelper=void 0;var t=C(),e=S(),i=function(){function i(){}return i.layoutFlex=function(i,o,n,r,s,a){var l=a===t.IconLocation.CENTER,h=e.Utils.included(a,t.IconLocation.LEFT,t.IconLocation.LEFT_EDGE),u=e.Utils.included(a,t.IconLocation.RIGHT,t.IconLocation.RIGHT_EDGE),d=e.Utils.included(a,t.IconLocation.TOP,t.IconLocation.TOP_EDGE),c=e.Utils.included(a,t.IconLocation.BOTTOM,t.IconLocation.BOTTOM_EDGE),p=e.Utils.included(a,t.IconLocation.LEFT_EDGE,t.IconLocation.RIGHT_EDGE,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE),_=i.style,f=l||h||u?"row":"column";f+=u||c?"-reverse":"",_.flexDirection=f,_.justifyContent=p?"start":"center",_.alignItems="center",(_=o.style).paddingTop=d&&p?s+"px":"",_.paddingBottom=c&&p?s+"px":"",(_=n.style).display=l?"none":"",_.paddingLeft=h?r+"px":"",_.paddingRight=u?r+"px":"",_.paddingTop=d?r+"px":"",_.paddingBottom=c?r+"px":"",_.flexGrow=p?"1":""},i.clearFlex=function(t){var e=t.style;e.removeProperty("display"),e.removeProperty("flex-direction"),e.removeProperty("justify-content"),e.removeProperty("align-items"),e.removeProperty("flex-grow")},i}();return Gi.RenderHelper=i,Gi}(),c=function(){this.commit=!0,this.value=void 0};t.RendererEditResult=c;var p=function(t){function i(){var e=t.call(this)||this;return e._refreshFocusChanged=!1,e._clickOnlyFocusedCell=!0,e._textProp=h.Utils.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return e.__extends(i,t),i.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(e.classList.length>1)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&i.length>1)return i[1]}return e.className}},i.prototype._doDispose=function(){this._dom=null,this._index=null,t.prototype._doDispose.call(this)},i.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},i.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,e&&(e[h.Utils.TextProp]=""),this._doInitContent(e),this._inited=!0)},i.prototype.initFormContent=function(t,e){this._inited||(this._dom=t,t.className=this._className=e,this._doInitContent(t),this._inited=!0)},i.prototype.clearContent=function(){this._inited?(this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]="",this._doClearContent(this._dom)},i.prototype.checkClassName=function(t){return t!=this._className},i.prototype.initOptions=function(){this._doInitOptions()},_dp(i,"grid",{get:function(){return this._index&&this._index.grid}}),_dp(i,"index",{get:function(){return this._index}}),_dp(i,"styleName",{get:function(){return"rg-renderer"}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(i,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this._changed()}}),_dp(i,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t}}),_dp(i,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t}}),_dp(i,"itemClickable",{get:function(){return this._itemClickable}}),i.prototype.renderCell=function(t,e,i){if(t.accessibility){var o=this._ariaLabelCallback||t.body.ariaLabelCallback,n=o&&o.call(this,t.handler,e);n?i.cell.setAttribute("aria-label",n):i.cell.removeAttribute("aria-label")}this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},i.prototype.getTooltip=function(t,e){var i=e.grid,o=i.body,n=e.column,r=o.getCellAt(t.item,n,!1),s=r&&this._makeText(i,r,t);return s||void 0},i.prototype.canShowInnerFocus=function(){return!1},i.prototype.canEdit=function(){return!1},i.prototype.canEditClickAt=function(t){return!1},i.prototype.preventDefaultEditClick=function(t){t.preventDefault()},i.prototype.editClick=function(t,e){var i=new c;if(this._doEditClick(t,e,i))return i},i.prototype._doEditClick=function(t,e,i){return!1},i.prototype.preventDefaultClick=function(t){t.preventDefault()},i.prototype.canClick=function(t){return!1},i.prototype.canClickSpaceKey=function(t){return!1},i.prototype.click=function(t,e,i){return this._doClick(t,e,i)},i.prototype.itemClick=function(){this._doItemClick()},i.prototype._doItemClick=function(){},i.prototype._doClick=function(t,e,i){},i.prototype.canEditKey=function(t){return!1},i.prototype.editKey=function(t,e){var i=new c;if(this._doEditKey(t,e,i))return i},i.prototype._doEditKey=function(t,e,i){return!1},i.prototype.moveClickElement=function(t,e){},i.prototype._doInitContent=function(t){},i.prototype._doClearContent=function(t){t&&(t[this._textProp]="")},i.prototype._doRenderCell=function(t,e,i,o,n){},i.prototype._changed=function(){this._dirty=!0},i.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(o>=0){var n=t.dataSource.getFieldIndex(i);if(n>=0)return t.dataSource.getValue(o,n)}},i.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||e.dataColumn.placeHolder||""},i.prototype._clearHeight=function(){this._dom.style.height=""},i.prototype._setHeight=function(t){this._dom.style.height=t>=0?t+"px":""},i.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},i.prototype._doInitOptions=function(){},i}(l.Base);t.DataCellRenderer=p;var _,f=function(t){function o(){return t.call(this)||this}return e.__extends(o,t),o.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(o,"type",{get:function(){return o.TYPE}}),o.prototype._doRenderCell=function(t,e,o,n,r){if(e instanceof i.ValueCell)if(e.index.itemIndex!==t.layoutManager.topIndex)switch(e.getBlankState()){case a.BlankState.BODY:case a.BlankState.TAIL:this.$_setText(e.dataColumn.equalBlankText);break;default:this.$_setText(this._makeText(t,e,o))}else this.$_setText(this._makeText(t,e,o))},o.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},o.TYPE="text",o.Default=new o,o}(p);t.TextCellRenderer=f,function(t){t.DEFAULT="default",t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(_=t.BarOrigin||(t.BarOrigin={}));var g=function(t){function i(){var e=t.call(this)||this;return e._barStyle=i.BAR_STYLE,e._rightBarStyle=i.BAR_RIGHT_STYLE,e._topBarStyle=i.BAR_TOP_STYLE,e._bottomBarStyle=i.BAR_BOTTOM_STYLE,e._minimum=0,e._maximum=100,e._barWidth="80%",e._showLabel=!0,e._origin=_.LEFT,e._absoluteValue=!1,e._percentShapeWidth=80,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(i,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())}}),_dp(i,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())}}),_dp(i,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())}}),_dp(i,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(i,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(i,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())}}),_dp(i,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&(this._barWidth=t,"string"==typeof t&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())}}),_dp(i,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())}}),_dp(i,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e,i,o=(0,h.getDoc)(t);t[this._textProp]="",(e=this._div=o.createElement("div")).style.position="relative",t.appendChild(e);var n=(i=this._span=o.createElement("span")).style;n.display="inline-block",n.position="absolute",n.top="50%",n.right="50%",n.msTransform=i.style.transform="translate(50%, -50%)",t.appendChild(i)},i.prototype._doRenderCell=function(t,e,o,n,r){var s=this._div,a=s.style,l=this._absoluteValue?Math.abs(e.value):e.value,h=Math.max(0,Math.min(1,(l-this._minimum)/(this._maximum-this._minimum)));switch(isNaN(h)&&(h=0),this._origin){case _.RIGHT:this.$_renderBar(_.RIGHT,a,h),s.className=this.rightBarStyle||i.BAR_RIGHT_STYLE;break;case _.TOP:this.$_renderBar(_.TOP,a,h),s.className=this.topBarStyle||i.BAR_TOP_STYLE;break;case _.BOTTOM:this.$_renderBar(_.BOTTOM,a,h),s.className=this.bottomBarStyle||i.BAR_BOTTOM_STYLE;break;case _.LEFT:default:this.$_renderBar(_.LEFT,a,h),s.className=this.barStyle||i.BAR_STYLE}this.$_setText(this._showLabel?this._makeText(t,e,o):"")},i.prototype.$_renderBar=function(t,e,i){if(e.removeProperty("transform"),e.removeProperty("ms-transform"),t===_.LEFT||t===_.RIGHT)if(e.left=t===_.LEFT?"0px":100*(1-i)+"%",e.width=100*i+"%",isNaN(this._percentShapeWidth)){var o=this._barWidth;e.top="50%",e.msTransform=e.transform="translate(0%,-50%)",e.height=o+"px"}else e.top=(100-this._percentShapeWidth)/2+"%",e.height=this._percentShapeWidth+"%";else if(e.top=t===_.TOP?"0px":100*(1-i)+"%",e.height=100*i+"%",isNaN(this._percentShapeWidth)){var n=this._barWidth;e.left="50%",e.msTransform=e.transform="translate(-50%,0%)",e.width=n+"px"}else e.left=(100-this._percentShapeWidth)/2+"%",e.width=this._percentShapeWidth+"%"},i.prototype.$_setText=function(t){this._span[this._textProp]=t||""},i.TYPE="bar",i.STYLE="rg-bar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-bar-renderer-bar",i.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",i.BAR_TOP_STYLE="rg-bar-renderer-bar-top",i.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",i}(p);t.BarCellRenderer=g;var m=function(t){function i(){var e=t.call(this)||this;return e._spaceKey=!1,e._enterKey=!1,e._itemClickable=!0,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())}}),_dp(i,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())}}),_dp(i,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())}}),_dp(i,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(i,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(i,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())}}),_dp(i,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(i,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._img=(0,h.getDoc)(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},i.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this.$_getImageUrl(t,e);if(s){r.src=s;var a=this.$_getTitle(t,e);r.alt=a||"",isNaN(this._imageHeight)?r.style.height="":r.style.height=this._imageHeight+"px"}else r.removeAttribute("src"),r.alt=""},i.prototype.canClick=function(t){return t.target===this._img},i.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},i.prototype._doItemClick=function(){this._img.click()},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0},i.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},i.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},i.TYPE="image",i.STYLE="rg-image-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(p);t.ImageCellRenderer=m;var y=function(t){function i(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this)||this;return o._itemGap=4,o._verticalEdgePad=2,o._textVisible=!0,o._reversed=!1,o._splitted=!1,o._imgFixed=!1,o._imgMiddle=!1,o._imgCenter=!1,o._imgHeight=16,o._imgWidth=16,o._imgLeft=0,o._imgRight=0,o._imgTop=0,o._imgBottom=0,o._spanVis=void 0,o._spanPadRight=0,o._spanPadLeft=0,o._spanCenter=!1,o._spanText="",o._imgWidth=e,o._imgHeight=i,o}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(i,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())}}),_dp(i,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())}}),i.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._reset()},i.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[h.Utils.TextProp]="")},i.prototype.$_setImgFixed=function(t,e,i){(e!=this._imgFixed||i)&&(this._imgFixed=e,t.style.position=e?"absolute":"")},i.prototype.$_setImgMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},i.prototype.$_setImgCenter=function(t,e,i){(e!=this._imgCenter||i)&&(this._imgCenter=e,t.style.textAlign=e?"center":"")},i.prototype.$_setImgWidth=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgWidth||i)&&(this._imgWidth=e,t.style.width=e>0?e+"px":"")},i.prototype.$_setImgHeight=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgHeight||i)&&(this._imgHeight=e,t.style.height=e>0?e+"px":"")},i.prototype.$_setImgBounds=function(t,e,i,o,n,r){(e!=this._imgTop||r)&&(this._imgTop=e,t.style.top=e>0?e+"px":""),(i!=this._imgLeft||r)&&(this._imgLeft=i,t.style.left=i>0?i+"px":""),(o!=this._imgBottom||r)&&(this._imgBottom=o,t.style.bottom=o>0?o+"px":""),(n!=this._imgRight||r)&&(this._imgRight=n,t.style.right=n>0?n+"px":"")},i.prototype.$_clearImgBounds=function(t,e){(this._imgTop>0||e)&&(this._imgTop=0,t.style.top=""),(this._imgLeft>0||e)&&(this._imgLeft=0,t.style.left=""),(this._imgBottom>0||e)&&(this._imgBottom=0,t.style.bottom=""),(this._imgRight>0||e)&&(this._imgRight=0,t.style.right="")},i.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none",this.grid.accessibility&&(t?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true")))},i.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=t>0?t+"px":"")},i.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=t>0?t+"px":"")},i.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;this._spanCenter=t,t?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},i.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},i.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},i.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},i.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutLeftEdge=function(t,e,i,o,n){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,2,0,0,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},i.prototype.$_layoutRightEdge=function(t,e,i,o,n){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,0,0,2,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},i.prototype.$_layoutTopEdge=function(t,e,i,o,n,r,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-r)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((n-s)/n)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutBottomEdge=function(t,e,i,o,n,r,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-r)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(n-s)/n*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},i}(p);t.FlexibleCellRenderer=y;var v=function(t){function i(){var e=t.call(this)||this;return e._iconWidth=NaN,e._iconHeight=NaN,e._iconLocation=a.IconLocation.LEFT,e._spaceKey=!1,e._enterKey=!1,e._imgSrc="",e._itemClickable=!0,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())}}),_dp(i,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(i,"titleCallback",{get:function(){return this._titleCallback},set:function(t){this._titleCallback=t,this._changed()}}),_dp(i,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()}}),_dp(i,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())}}),_dp(i,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())}}),_dp(i,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())}}),_dp(i,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())}}),_dp(i,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(i,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()}}),i.prototype._doInitContent=function(t){var e=(0,h.getDoc)(t),i=this._img=e.createElement("img");i.alt="",t.appendChild(i);var o=this._span=e.createElement("span");t.appendChild(o),this._br=e.createElement("br")},i.prototype._reset=function(){t.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},i.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=a.IconLocation.LEFT},i.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this._span;if(this.$_setImgWidth(r,this._iconWidth,!1),this.$_setImgHeight(r,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(t,e),this.$_getTitle(t,e)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case a.IconLocation.LEFT:this.$_layoutLeft(this._dom,r,s,!1);break;case a.IconLocation.RIGHT:this.$_layoutRight(this._dom,r,s,!1);break;case a.IconLocation.TOP:this.$_layoutTop(this._dom,r,s,!1);break;case a.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,r,s,!1);break;case a.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,r,s,this._iconWidth,!1);break;case a.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,r,s,this._iconWidth,!1);break;case a.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case a.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case a.IconLocation.CENTER:this.$_layoutCenter(this._dom,r,s,!1);break;default:this.$_layoutLeft(this._dom,r,s,!1)}this._oldLocation=this._iconLocation}this._iconLocation==a.IconLocation.TOP_EDGE||this._iconLocation==a.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.canClick=function(t){return t.target===this._img},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},i.prototype._doItemClick=function(){this._img.click()},i.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},i.prototype.$_getTitle=function(t,e){var i,o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),i||""},i.prototype.$_setImgSrc=function(t,e){t==this._imgSrc&&e===this._img.alt||(this._imgSrc=t,t?(this._img.src=t,this._img.alt=e):(this._img.removeAttribute("src"),this._img.alt=""))},i.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(a.IconLocation.LEFT)},i.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},i.TYPE="icon",i.STYLE="rg-icon-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(y);t.IconCellRenderer=v;var w=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype._doInitContent=function(e){t.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),u.RenderHelper.clearFlex(e)},i.prototype.$_layoutLeft=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT)},i.prototype.$_layoutRight=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP)},i.prototype.$_layoutBottom=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.CENTER)},i}(v);t.FlexIconCellRenderer=w;var x=function(t){function i(){var e=t.call(this,16,16)||this;return e._strictValue=!1,e._threeStates=!1,e._checkLocation=a.IconLocation.CENTER,e._useImages=!1,e._checkedStyle=i.CHECKED_STYLE,e._uncheckedStyle=i.UNCHECKED_STYLE,e._intermediateStyle=i.INTERMEDIATE_STYLE,e._editable=!0,e._spaceKey=!0,e._showInnerFocus=!1,e._oldUsed=!1,e._useChanged=!1,e._values={},e.refreshFocusChanged=!0,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())}}),_dp(i,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())}}),_dp(i,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())}}),_dp(i,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())}}),_dp(i,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())}}),_dp(i,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())}}),_dp(i,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(i,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(i,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())}}),_dp(i,"editable",{get:function(){return this._editable},set:function(t){this._editable=t}}),_dp(i,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t}}),_dp(i,"clickOnlyFocusedCell",{get:function(){return!this.grid.editOptions.commitByCell||this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t}}),_dp(i,"readOnlySetDisabled",{get:function(){return this._readOnlySetDisabled},set:function(t){t!=this._readOnlySetDisabled&&(this._readOnlySetDisabled=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype.canEdit=function(){var t=this.grid.editOptions;if(t.columnEditableFirst){if(!(null!=this.editable?this.editable:t.editable))return!1}else if(!t.editable||!this.editable)return!1;return this._editable},i.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},i.prototype._doInitContent=function(t){var e=(0,h.getDoc)(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var o=this._span=e.createElement("span");t.appendChild(i),t.appendChild(o);var n=this._image=e.createElement("span");n.className=this._checkedStyle,n.style.display="inline-block",this._br=e.createElement("br")},i.prototype._reset=function(){t.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},i.prototype._doRenderCell=function(t,e,o,n,r){var s=this._check,l=this._image,u=this._span,d=this._dom,c=s;this._imgWidth=t.container.measureCheckWidth(),this._imgHeight=t.container.measureCheckHeight();var p=this.$_getChecked(t,e.value,e.index,this._getCheckedCallback),_=s.id="".concat(i.FOR_ID,"-").concat(e.dataColumn.$_hash,"-").concat(e.item.index);if(u.setAttribute("for",_),s.checked=p,s.indeterminate=this._threeStates&&void 0===p,s.disabled=this._readOnlySetDisabled&&!this.canEdit(),this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(d.removeChild(l),this._check.style.display="inline-block"):(d.insertBefore(l,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(l.className=p?this._checkedStyle:void 0===p&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,this._readOnlySetDisabled&&!this.canEdit()&&(l.className+=" disabled"),c=l),o.merged&&this.canEdit()&&!h.Utils.included(this.checkLocation,a.IconLocation.TOP_EDGE,a.IconLocation.BOTTOM_EDGE)&&o.focused||d.style.removeProperty("top"),this.$_setSpanText(this._makeText(t,e,o)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case a.IconLocation.LEFT:this.$_layoutLeft(d,c,u);break;case a.IconLocation.RIGHT:this.$_layoutRight(d,c,u);break;case a.IconLocation.TOP:this.$_layoutTop(d,c,u);break;case a.IconLocation.BOTTOM:this.$_layoutBottom(d,c,u);break;case a.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(d,c,u);break;case a.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(d,c,u);break;case a.IconLocation.TOP_EDGE:this.$_layoutTopEdge(d,c,u,n,r);break;case a.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(d,c,u,n,r);break;case a.IconLocation.CENTER:this.$_layoutCenter(d,c,u);break;default:this.$_layoutLeft(d,c,u)}this._oldLocation=this._checkLocation}this._checkLocation==a.IconLocation.TOP_EDGE||this._checkLocation==a.IconLocation.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},i.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},i.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},i.prototype._doEditClick=function(t,e,i){if(e.target===this._check||e.target===this._image)return this.$_edit(t,i),!0},i.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},i.prototype._doItemClick=function(){this._check.click()},i.prototype.moveClickElement=function(t,e){var i=this._dom;e||!this.canEdit()||h.Utils.included(a.IconLocation.TOP_EDGE,a.IconLocation.BOTTOM_EDGE)||(i.style.top=t+"px")},i.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=(e=t.length)>0?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(",")){e=void 0;this._trueValue=(e=t.length)>0?t[0]:void 0;for(i=0;i<e;i++)this._values[t[i]]=!0}else this._trueValue=void 0},i.prototype.$_getChecked=function(t,e,i,o){if(o)return o(t.handler,i.itemIndex,i.dataColumn,e);var n=i.dataColumn;if(n&&n.valueType===a.ValueType.OBJECT){var r=n.getField(),s=n.objectKey||r.objectKey;e=null==e?void 0:e[s]}if("boolean"==typeof e)return e;var l=String(e);return this._values.hasOwnProperty(l)?this._values[l]:this._threeStates&&(this._strictValue||""==e||null==e)?void 0:Boolean(e)},i.prototype.$_edit=function(t,e){var i,o=t.grid,n=t.dataColumn,r=t.value,s=this.$_getChecked(o,t.value,t,this._getCheckedCallback);i=!s&&(void 0===s||(!this._threeStates||void 0));var l=this._setCheckedCallback;if(l?i=l(o.handler,t.itemIndex,t.dataColumn,r,i):void 0!==this._trueValue&&i?i=this._trueValue:void 0!==this._falseValue&&!1===i&&(i=this._falseValue),n&&n.valueType===a.ValueType.OBJECT){var h=n.getField(),u=r||{};u[n.objectKey||h.objectKey]=i,e.value=u}else e.value=i},i.prototype.$_layoutLeft=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutLeft.call(this,e,r,o,n)},i.prototype.$_layoutRight=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutRight.call(this,e,r,o,n)},i.prototype.$_layoutTop=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutTop.call(this,e,r,o,n)},i.prototype.$_layoutBottom=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutBottom.call(this,e,r,o,n)},i.prototype.$_layoutLeftEdge=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutLeftEdge.call(this,e,r,o,this._imgWidth,n)},i.prototype.$_layoutRightEdge=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutRightEdge.call(this,e,r,o,this._imgWidth,n)},i.prototype.$_layoutTopEdge=function(e,i,o,n,r){var s=this._useImages,a=s?this._image:i;t.prototype.$_layoutTopEdge.call(this,e,a,o,n,r,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutBottomEdge=function(e,i,o,n,r){var s=this._useImages,a=s?this._image:i;t.prototype.$_layoutBottomEdge.call(this,e,a,o,n,r,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutCenter=function(e,i,o){var n=this._useImages,r=n?this._image:i;t.prototype.$_layoutCenter.call(this,e,r,o,n)},i.prototype.$_setImageMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e)},i.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(a.IconLocation.LEFT)},i.TYPE="check",i.STYLE="rg-check-renderer",i.FOR_ID="$$-check-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.CHECKED_STYLE="rg-check-renderer-checked",i.UNCHECKED_STYLE="rg-check-renderer-unchecked",i.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",i}(y);t.CheckCellRenderer=x;var b=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype._doInitContent=function(e){t.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),u.RenderHelper.clearFlex(e)},i.prototype.$_layoutLeft=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT)},i.prototype.$_layoutRight=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP)},i.prototype.$_layoutBottom=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(t,e,i,o,n){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(t,e,i,o,n){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.CENTER)},i}(x);t.FlexCheckCellRenderer=b;var I=function(t){function i(){var e=t.call(this)||this;return e._buttonStyle=i.BUTTON_STYLE,e._hideWhenEmpty=!0,e._spaceKey=!0,e._enterKey=!1,e._itemClickable=!0,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())}}),_dp(i,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())}}),_dp(i,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(i,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._button=(0,h.getDoc)(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},i.prototype._doRenderCell=function(t,e,i,o,n){var r=this._button;r[this._textProp]=this._makeText(t,e,i),r.setAttribute("class",this._buttonStyle),r.style.visibility=this._hideWhenEmpty&&this._isEmpty(e.value)?"hidden":""},i.prototype.canClick=function(t){return t.target===this._button},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},i.prototype._doItemClick=function(){this._button.click()},i.TYPE="button",i.STYLE="rg-button-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BUTTON_STYLE="rg-button-renderer-button",i}(p);t.ButtonCellRenderer=I;var R=function(t){function i(){var e=t.call(this)||this;return e._spaceKey=!0,e._enterKey=!1,e._itemClickable=!0,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())}}),_dp(i,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())}}),_dp(i,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())}}),_dp(i,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(i,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(i,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(i,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(i,"classCallback",{get:function(){return this._classCallback},set:function(t){this._classCallback=t}}),_dp(i,"target",{get:function(){return this._target},set:function(t){this._target=t}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._anchor=(0,h.getDoc)(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},i.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},i.prototype._doRenderCell=function(t,e,i,o,n){var r=this._anchor;r[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(r.removeAttribute("target"),r.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(r.target=null==this.target?"_blank":this.target,r.href=this._url));var s=this.$_getTitle(t,e);s?r.title=s:delete r.title;var a=this.$_getStyle(t,e);a?r.className=a:r.removeAttribute("class")},i.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},i.prototype.canClick=function(t){return t.target===this._anchor},i.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doItemClick=function(){this._anchor.click()},i.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},i.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},i.prototype.$_getStyle=function(t,e){var i="",o=this._classCallback;return o&&(i=o.call(this,t.handler,e)),i||""},i.TYPE="link",i.STYLE="rg-link-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(p);t.LinkCellRenderer=R;var T=function(t){function i(){var e=t.call(this)||this;return e._shapeStyle=i.SHAPE_STYLE,e._shape=s.PolygonShape.STAR,e._shapeWidth=16,e._shapeHeight=16,e._shapeLocation=a.IconLocation.LEFT,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())}}),_dp(i,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())}}),_dp(i,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())}}),_dp(i,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())}}),_dp(i,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())}}),_dp(i,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())}}),_dp(i,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=(0,h.getDoc)(t),i=(this._svg=n.SvgElement.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,r=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=o+"px",i.height=r+"px";var s=this._span=e.createElement("span");t.appendChild(s),this._br=e.createElement("br")},i.prototype._reset=function(){t.prototype._reset.call(this),this._splitted=this._reversed=void 0},i.prototype._doRenderCell=function(t,e,i,o,r){var s=this._svg,l=this._span;if(this._runShape=this.$_getShape(t,e),s.setAttribute("class",this._shapeStyle),n.SvgElement.renderSVG(t,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case a.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,l,!1);break;case a.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,l,!1);break;case a.IconLocation.TOP:this.$_layoutTop(this._dom,s,l,!1);break;case a.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,l,!1);break;case a.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,l,this._shapeWidth,!1);break;case a.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,l,this._shapeWidth,!1);break;case a.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,l,o,r,this._shapeWidth,this._shapeHeight,!1);break;case a.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,l,o,r,this._shapeWidth,this._shapeHeight,!1);break;case a.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,l,!1);break;default:this.$_layoutLeft(this._dom,s,l,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==a.IconLocation.TOP_EDGE||this._shapeLocation==a.IconLocation.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},i.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},i.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new s.EllipseShape:(e=this._polygon?this._polygon:this._polygon=new s.PolygonShape(t),this._polygon.shape=t)),e},i.prototype.$_render=function(t,e,i,o){if(this._runShape){var n=this.$_getDrawing(this._runShape);n&&n.draw(e,i,o)}},i.TYPE="shape",i.STYLE="rg-shape-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.SHAPE_STYLE="rg-shape-renderer-shape",i}(y);t.ShapeCellRenderer=T;var D=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype._doInitContent=function(e){e.style.setProperty("display","flex","important"),t.prototype._doInitContent.call(this,e)},i.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),u.RenderHelper.clearFlex(e)},i.prototype.$_layoutLeft=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT)},i.prototype.$_layoutRight=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP)},i.prototype.$_layoutBottom=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(t,e,i,o,n){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(t,e,i,o,n){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(t,e,i){u.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,a.IconLocation.CENTER)},i}(T);t.FlexShapeCellRenderer=D;var k=function(t){function i(){var e=t.call(this)||this;return e._barStyle=i.BAR_STYLE,e._inactiveStyle=i.INACTIVE_STYLE,e._barCount=10,e._minimum=NaN,e._maximum=NaN,e._startRate=50,e._endRate=100,e._absoluteValue=!1,e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(i,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())}}),_dp(i,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())}}),_dp(i,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(i,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(i,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())}}),_dp(i,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())}}),_dp(i,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._div=(0,h.getDoc)(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=n.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},i.prototype._doRenderCell=function(t,e,i,o,r){var s=this._svg;this._value=parseFloat(e.value),s.setAttribute("class",this._barStyle),n.SvgElement.renderSVG2(t,s,this.$_render.bind(this))},i.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var o=100/Math.max(this._startRate,this._endRate),n=(100-2*(this._barCount+1))/this._barCount,r=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var h=l<i?null:this._inactiveStyle;e.sbounds(h,r+"%",100-s+"%",n+"%",s+"%"),r+=n+2,s+=a}},i.TYPE="signalbar",i.STYLE="rg-signalbar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-signalbar-renderer-bar",i.INACTIVE_STYLE="rg-signalbar-renderer-inactive",i}(p);t.SignalBarCellRenderer=k;var M=function(t){function i(){var e=t.call(this)||this;return e._barStyle=i.BAR_STYLE,e._barcode=new o.Code39,e.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new r.Rectangle(0,0,i,100)))}.bind(e),e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._div=(0,h.getDoc)(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=n.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},i.prototype._doRenderCell=function(t,e,i,o,r){var s=this._svg;this._value=null==e.value?"":String(e.value),this._value&&(this._value=this._value.toUpperCase()),s.setAttribute("class",this._barStyle),n.SvgElement.renderSVG(t,s,this.$_render)},i.TYPE="code39",i.STYLE="rg-code39-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-code39-renderer-bar",i}(p);t.Code39CellRenderer=M;var L=function(t){function i(){var e=t.call(this)||this;return e._barStyle=i.BAR_STYLE,e._barcode=new o.Code128,e.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new r.Rectangle(0,0,i,100)))}.bind(e),e}return e.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._doInitContent=function(t){var e=this._div=(0,h.getDoc)(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=n.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},i.prototype._doRenderCell=function(t,e,i,o,r){var s=this._svg;this._value=null==e.value?"":String(e.value),s.setAttribute("class",this._barStyle),n.SvgElement.renderSVG(t,s,this.$_render)},i.TYPE="code128",i.STYLE="rg-code128-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-code128-renderer-bar",i}(p);t.Code128CellRenderer=L}(Ti)),Ti}function ji(){if(Ui)return Ri;Ui=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.TemplateCellRenderer=Ri.HtmlTemplateParser=void 0;var t=d,e=Wi(),i=Li(),o=S(),n=/\$\{[^{}]*\}/g,r=function(){function t(){this._template="",this._tokens=[]}return _dp(t,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)}}),_dp(t,"pattern",{set:function(t){this._pattern=t}}),t.prototype.realize=function(t,e,o,n){for(var r="",s=0,a=this._tokens;s<a.length;s++){var l=a[s];if("string"==typeof l)r+=l||"";else if(1==l.type)r+=e.value||"";else if(2==l.type)r+=e.item.getData(t.dataSource.getFieldIndex(l.field))||"";else if(4===l.type){r+=(e instanceof i.DataCell?e.getDisplayText(t,o):e.value)||""}else if(n){r+=n.call(this,t.handler,e,l.field)||""}else r+=l.field}return r},t.prototype.realizeHeader=function(t,e,i){for(var o,n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];if("string"==typeof a)n+=a;else if(1==a.type)n+=t.displayText;else if(null!=(o=t.getValue(a.field)))n+=String(o);else if(e){n+=e.call(this,i.handler,t,a.field)+""||""}else n+=a.field}return n},t.prototype.realizeSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,h=0,u=r;h<u.length;h++){var d=u[h];"string"==typeof d?s+=d:1==d.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(d.field))?s+=String(n):s+=o?(n=o.call(this,l.handler,a,t.summaryIndex,t,d.field))||"":d.field}return s},t.prototype.realizeGroupSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,h=0,u=r;h<u.length;h++){var d=u[h];"string"==typeof d?s+=d:1==d.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(d.field))?s+=String(n):s+=o?(n=o.call(this,l.handler,a,t.summaryIndex,e.index.item.parent,d.field))||"":d.field}return s},t.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i,o=t.length,r=this._pattern||n,s=0;i=r.exec(t);){var a=i[0],l=i.index;l>s&&(e.push(t.substring(s,l)),s=l);var h=a.substring(2,a.length-1),u={type:"value"===h?1:"text"===h?4:0==h.indexOf("value:")?2:3,field:h};2==u.type&&(u.field=u.field.substring(6)),e.push(u),s+=a.length}s<o&&e.push(t.substring(s,o))}},t}();Ri.HtmlTemplateParser=r;var s=function(e){function i(){var t=e.call(this)||this;return t._output=void 0,t._inputFocusable=!1,t._html="",t._parser=new r,t.template="<span>${value}</span>",t._itemClickable=!0,t}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())}}),_dp(i,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)}}),_dp(i,"output",{get:function(){return this._output},set:function(t){this._output=t}}),_dp(i,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())}}),_dp(i,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(i,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),i.prototype.clearAndAssignFrom=function(t){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",e.prototype.assignFrom.call(this,t)},_dp(i,"type",{get:function(){return i.TYPE}}),i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),this._html=null},i.prototype.canClick=function(t){var e=(0,o.getWin)(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._dom===i)},i.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},i.prototype._doRenderCell=function(t,e,i,o,n){var r=this._callback;r?this.$_setHtml(r.call(this,t.handler,e,o,n)):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback))},i.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},i.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},i.TYPE="html",i}(e.DataCellRenderer);return Ri.TemplateCellRenderer=s,Ri}var zi,Yi={},qi={},Xi={},Ki={};var Ji,Zi={},Qi={};function to(){if(Ji)return Qi;Ji=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.GroupedItemProvider=Qi.MergedGroupHeader=Qi.MergedGroupFooter=void 0;var t=d,e=ci(),i=di(),o=G(),n=C(),r=S(),s=rt(),a=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},i}(i.GroupFooter);Qi.MergedGroupFooter=a;var l=function(e){function i(t,i){var o=e.call(this,i)||this;return o._level=0,o._level=t,o}return t.__extends(i,e),_dp(i,"groupLevel",{get:function(){return this._level}}),i.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},_dp(i,"merged",{get:function(){return!0}}),i}(i.GroupItemImpl);Qi.MergedGroupHeader=l;var h=function(o){function r(t){var e=o.call(this)||this;return e._fixedCount=0,e._items=[],e._list=[],e._rowCount=NaN,e._rs=t,e}return t.__extends(r,o),r.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(r,"provider",{get:function(){return this._rs}}),_dp(r,"count",{get:function(){return this._items.length}}),_dp(r,"fixedCount",{get:function(){return this._fixedCount}}),_dp(r,"items",{get:function(){return this._items.slice()}}),_dp(r,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,o=t.length-1;o>=0;o--)t[o]instanceof i.GridRow&&e++;this._rowCount=e}return this._rowCount}}),r.prototype.getItem=function(t){return this._items[t]},r.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,o=0,n=(t=t||this._items).length;o<n;o++){var r=t[o];r._parent=e._rootItem,r._index=-1,r instanceof i.GroupItemImpl&&r._children&&this.clear(r._children)}t.length=0,this.$_changed()},r.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},r.prototype.collapse=function(t,e){var o,r,s=this._rs,l=this._items;if(t._expanded=!1,s.mergeMode){if((u=t.index)>=0?(l.splice(u,1),t._index=-1):(u=this.$_firstIndex(t,s.expandedAdornments==n.RowGroupAdornments.SUMMARY,!0))<0&&(u=t.firstItem.index),u>=0)for(;u<l.length;){if(!(d=l[u]).isDescendantOf(t))break;if(l.splice(u,1),d._index=-1,e&&(d instanceof i.GroupItem||d instanceof a))(c=d instanceof i.GroupItem?d:d instanceof a&&d.parent._expanded?d.parent:null)&&(c._expanded=!1)}switch(o=t.footerCount,s.collapsedAdornments){case n.RowGroupAdornments.BOTH:t._index=u,l.splice(u++,0,t);for(var h=0;h<o;h++)l.splice(u+h,0,r=t.getFooter(h)),r._index=u+h;break;case n.RowGroupAdornments.FOOTER:case n.RowGroupAdornments.SUMMARY:if(o=t.footerCount)for(h=0;h<o;h++)l.splice(u+h,0,r=t.getFooter(h)),r._index=u+h;else if(o=t.allFooterCount)for(h=0;h<o;h++)l.splice(u+h,0,r=t._allFooters[h]),r._index=u+h;break;case n.RowGroupAdornments.HEADER:default:t._index=u,l.splice(u,0,t)}}else{var u;for((u=t.index)>=0?(l.splice(u,1),t._index=-1):(u=this.$_firstIndex(t,s.expandedAdornments==n.RowGroupAdornments.SUMMARY,!1))<0&&(u=t.firstItem.index);u<l.length;){var d,c;if(!(d=l[u]).isDescendantOf(t))break;if(l.splice(u,1),d._index=-1,e&&(d instanceof i.GroupItem||d instanceof i.GroupFooter))(c=d instanceof i.GroupItem?d:d instanceof i.GroupFooter&&d.parent._expanded?d.parent:null)&&(c._expanded=!1)}switch(s.collapsedAdornments){case n.RowGroupAdornments.BOTH:t._index=u,l.splice(u++,0,t),o=t.footerCount;for(h=0;h<o;h++)(r=t.getFooter(h))._index=u+h,l.splice(u+h,0,r);break;case n.RowGroupAdornments.FOOTER:case n.RowGroupAdornments.SUMMARY:if(o=t.footerCount)for(h=0;h<o;h++)(r=t.getFooter(h))._index=u+h,l.splice(u+h,0,r);else for(h=0;h<t.allFooterCount;h++)(r=t._allFooters[h])._index=u+h,l.splice(u+h,0,r);break;case n.RowGroupAdornments.HEADER:default:t._index=u,l.splice(u,0,t)}}return this.$_changed(),!0},r.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},r.prototype.getPrior=function(t){return null!=t&&t.visible&&t.index>0?this._items[t.index-1]:null},r.prototype.$_changed=function(){this._rowCount=NaN},r.prototype.$_collectChildren=function(t,o,r,s,a){var l=this._rs,h=l.expandedAdornments,u=l.collapsedAdornments;if(s&&t&&t._setExpanded(!0),l.mergeMode){var d=void 0;if(!(t instanceof e.RootItem))if(h==n.RowGroupAdornments.HEADER||h==n.RowGroupAdornments.BOTH)o.push(t);else if(h==n.RowGroupAdornments.SUMMARY)for(var c=0,p=t.footerCount;c<p;c++)d=t.getFooter(c),o.push(d);for(var _=0,f=t.count;_<f;_++){if((y=t.getItem(_))instanceof i.GroupItem){var g=y;if(r&&(!a||g.level<=a)||g.expanded)this.$_collectChildren(g,o,r,s,a);else{var m=g.footerCount;switch(u){case n.RowGroupAdornments.BOTH:o.push(g);for(c=0;c<m;c++)d=g.getFooter(c),o.push(d);break;case n.RowGroupAdornments.SUMMARY:case n.RowGroupAdornments.FOOTER:if(m)for(c=0;c<m;c++)d=g.getFooter(c),o.push(d);else for(c=0;c<g.allFooterCount;c++)d=g._allFooters[c],o.push(d);break;case n.RowGroupAdornments.HEADER:default:o.push(g)}}}else t.isFooter(y)||o.push(y)}if(!(t instanceof e.RootItem)&&t.footer&&(h==n.RowGroupAdornments.FOOTER||h==n.RowGroupAdornments.BOTH))for(_=0,f=t.footerCount;_<f;_++)o.push(t.getFooter(_))}else{if(!(t instanceof e.RootItem))if(h==n.RowGroupAdornments.SUMMARY){d=t.footer,m=t.footerCount;if(d){c=t.indexOf(d);o.push(d);for(_=1;_<m;_++)d=t.getItem(c+_),o.push(d)}else{m=t.allFooterCount;for(_=0;_<m;_++)d=t._allFooters[_],o.push(d)}}else(0,n.isHeaderAdornment)(h)&&o.push(t);for(_=0,f=t.count;_<f;_++){var y;if((y=t.getItem(_))instanceof i.GroupItem){g=y,d=void 0,m=void 0;if(r&&(!a||g.level<=a)||g.expanded)this.$_collectChildren(g,o,r,s,a);else switch(u){case n.RowGroupAdornments.HEADER:o.push(g);break;case n.RowGroupAdornments.FOOTER:case n.RowGroupAdornments.SUMMARY:if(d=g.footer){if(m=g.footerCount,o.push(d),m>1){c=g.indexOf(d);for(var v=1;v<m;v++)d=g.getItem(c+v),o.push(d)}}else{m=g.allFooterCount;for(v=0;v<m;v++)d=g._allFooters[v],o.push(d)}break;case n.RowGroupAdornments.NONE:break;case n.RowGroupAdornments.BOTH:default:if(o.push(g),(d=g.footer)&&(m=g.footerCount,o.push(d),m>1))for(c=g.indexOf(d),v=1;v<m;v++)d=g.getItem(c+v),o.push(d)}}else y instanceof i.GroupFooter||o.push(y)}if(!(t instanceof e.RootItem))if((0,n.isFooterAdornment)(h))if(d=t.footer){m=t.footerCount;if(o.push(d),m>1)for(c=t.indexOf(d),_=1;_<m;_++)d=t.getItem(c+_),o.push(d)}}},r.prototype.$_expandItem=function(t,i,o,r){var s;if(t instanceof e.RootItem)s=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case n.RowGroupAdornments.BOTH:s=t.index,this._items.splice(s,1+t.footerCount);break;case n.RowGroupAdornments.FOOTER:case n.RowGroupAdornments.SUMMARY:var a=t.footer;a?(s=a.index,this._items.splice(s,t.footerCount)):t.allFooterCount>0&&(s=t._allFooters[0].index,this._items.splice(s,t.allFooterCount));break;case n.RowGroupAdornments.HEADER:default:s=t.index,this._items.splice(s,1)}o&&(t._index=-1)}else{switch(this._rs.collapsedAdornments){case n.RowGroupAdornments.BOTH:s=t.index,this._items.splice(s,1+t.footerCount);break;case n.RowGroupAdornments.FOOTER:case n.RowGroupAdornments.SUMMARY:t.footerCount>0?(s=t.footer.index,this._items.splice(s,t.footerCount)):t.allFooterCount>0&&(s=t._allFooters[0].index,this._items.splice(s,t.allFooterCount));break;case n.RowGroupAdornments.HEADER:default:s=t.index,this._items.splice(s,1)}o&&(t._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(t,this._list,i,o,r);for(var l=this._list.length,h=0;h<l;h++)this._items.splice(s+h,0,this._list[h])},r.prototype.$_firstIndex=function(t,e,i){var o=t.index;if(o>=0)return o;for(var n=this._items,r=0,s=n.length;r<s;r++){var a=n[r];if(t.isDescendant(a))return a.index}return-1},r.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},r.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},r}(o.Base),u=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},c=function(e){function o(t,i){var o=e.call(this,t,i)||this;return o._expandedAdornments=n.RowGroupAdornments.BOTH,o._collapsedAdornments=n.RowGroupAdornments.HEADER,o._indentVisible=!0,o._expandWhenGrouping=!1,o._mergeMode=!1,o._summaryMode=n.SummaryMode.AGGREGATE,o._groupSorting=!0,o._grouped=!1,o._checkable=!0,o}return t.__extends(o,e),o.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),e.prototype._doDispose.call(this)},o.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},o.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},_dp(o,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),this._footerCounter=t,t&&t.setCounterAware(this),this.$_footerCounterChanged())}}),_dp(o,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),_dp(o,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),o.prototype.resetAdornments=function(t,e,i){(i||e.expandedAdornments!=this._expandedAdornments||e.collapsedAdornments!=this._collapsedAdornments||e.indentVisible!=this._indentVisible)&&(this._expandedAdornments=e.expandedAdornments,this._collapsedAdornments=e.collapsedAdornments,this._callbackOnwer=t,this._footerCallback=e.createFooterCallback,this._valueForGroupCallback=e.valueForGroupCallback,this._indentVisible=e.indentVisible,this.grouped&&(this._populateItems(),this._fireRefresh()))},_dp(o,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t}}),_dp(o,"mergeMode",{get:function(){return this._mergeMode}}),_dp(o,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())}}),_dp(o,"grouped",{get:function(){return this._grouped}}),_dp(o,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0}}),_dp(o,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)}}),_dp(o,"visibleRowCount",{get:function(){return this._visibleItems.rowCount}}),_dp(o,"indentVisible",{get:function(){return this._indentVisible}}),o.prototype.canGrouping=function(t){return this.fireGrouping(t)},o.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},o.prototype.groupByMode=function(t,e){this._mergeMode=null!=e?e:this._mergeMode,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},o.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},o.prototype.getGroupLevel=function(t){if(this._groupFields&&t>=0)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},_dp(o,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null}}),o.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},o.prototype.$_collapseChild=function(t,e,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s instanceof i.GroupItemImpl&&(s._expanded=!1,this.$_collapseChild(s,e,o))}},o.prototype.collapse=function(t,e,i,o){if(t&&t.expanded){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){t.index>=0&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t,o)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},o.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var o=this._rootItem.getItem(e);o instanceof i.GroupItem&&this.collapse(o,t,!0,null)}},o.prototype.expandAll=function(t,e){for(var o=0;o<this._rootItem.count;o++){var n=this._rootItem.getItem(o);n instanceof i.GroupItem&&this.expand(n,t,!0,e)}},o.prototype.findItem=function(t,e,i,o,a){var l=this.dataSource;if(!l)return-1;var h=this.itemCount;if(h<1)return-1;var u=Math.min(t.length,e.length);if(u<1)return-1;var d=!i||i.allFields,c=i&&i.caseSensitive,p=i&&i.partialMatch,_=null,f=[],g=i.reverse;o=Math.max(0,o),a=Math.min(h-1,a);for(var m=0;m<u;m++)f[m]=l.getField(t[m]).dataType;var y=i.compareCallback;y="function"==typeof y?y:r.Utils.compareTextValue;for(var v=o;g?v>=a:v<=a;g?v--:v++){var C=this.$_getItem(v),w=C.dataRow,x=w>=0;if(x)for(m=0;m<u;m++){var b=C.getData(t[m]),I=l.getOrgFieldName(t[m]);switch(f[m]){case n.ValueType.DATETIME:case n.ValueType.DATE:if(e[m]instanceof Date)x=y.call(l.handler,e[m],b,c,p,w,I);else{if(!_){var E=/[.]/.test(e[m])?"yyyy.MM.dd":/[/]/.test(e[m])?"yyyy/MM/dd":/[-]/.test(e[m])?"yyyy-MM-dd":"yyyyMMdd";_=new s.DateTimeWriter(E)}x=y.call(l.handler,e[m],b?_.getText(b):b,c,p,w,I)}break;default:x=y.call(l.handler,e[m],b,c,p,w,I)}if(x&&!d)return v;if(!x&&d)break}if(x)return v}return-1},o.prototype.findCell=function(t,e,i,o,a,l){var h=this.dataSource;if(!h)return null;var u=this.itemCount;if(u<1)return null;var d=i.caseSensitive,c=i.partialMatch,p=this.dataSource.fieldCount,_=t.length,f=i.reverse,g=null,m=[],y=i.compareCallback;y="function"==typeof y?y:r.Utils.compareTextValue;for(var v=0;v<p;v++)m[v]=h.getField(v).dataType;o=Math.max(0,o),a=Math.min(u-1,a),l=Math.max(f?-1:0,Math.min(l,_-1)),f?l<0&&(l=t.length-1,o--):l>=t.length&&(o++,l=0);for(var C=o;f?C>=a:C<=a;f?C--:C++){var w=this.$_getItem(C),x=w.dataRow;if(x>=0)for(v=f?C<o?_-1:l:C>o?0:l;f?v>=0:v<_;f?v--:v++){var b=t[v];if(b>=0&&b<p){var I=w.getData(b),E=h.getOrgFieldName(b),S=!1;switch(m[b]){case n.ValueType.DATETIME:case n.ValueType.DATE:if(e instanceof Date)S=y.call(h.handler,e,I,d,c,x,E);else{if(!g){var R=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";g=new s.DateTimeWriter(R)}S=y.call(h.handler,e,I?g.getText(I):I,d,c,x,E)}break;default:S=y.call(h.handler,e,I,d,c,x,E)}if(S)return{itemIndex:C,fieldIndex:b,searchFieldIndex:v}}}}return null},o.prototype.getGroupItem=function(t){return function e(o){for(var n=0,r=o.children.length;n<r;n++){var s=o.children[n];if(s.id===t)return s;if(s instanceof i.GroupItemImpl){var a=e(s);if(a)return a}}}(this._rootItem)},_dp(o,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount}}),o.prototype.getItem=function(t,e){return this.grouped&&!e?t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},o.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],n=Math.min(i.count,t+e-1),r=t;r<n;r++){var s=i.getItem(r);o.push(s)}return o}return this.source.getItems(t,e)},o.prototype.getAllItems=function(){if(this.grouped){var t=new h(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},o.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},o.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=0,n=i.count;o<n;o++){var r=i.getItem(o);if(r.dataRow==t)return r}return null}return this.source.getItemOfRow(t,e)},o.prototype._initialize=function(){e.prototype._initialize.call(this),this._visibleItems=new h(this)},o.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},o.prototype._populateItems=function(){this.$_populateItems(!1)},o.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):e.prototype._resetItemIndicies.call(this,t)},o.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):e.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},o.prototype.$_groupCheckable=function(t,e){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);(r instanceof i.GroupItem||r instanceof i.GroupFooter)&&r.setCheckable(e),r instanceof i.GroupItem&&this.$_groupCheckable(r,e)}},o.prototype.setGroupCheckable=function(t){t!=this._checkable&&(this._checkable=t,this.$_groupCheckable(this.rootItem,t))},o.prototype.checkAll=function(t,i,o,n,r){if(this._editItem&&(o?this._editItem.checkable&&this._editItem._setChecked(t):this._editItem._setChecked(t)),i||!this.grouped)e.prototype.checkAll.call(this,t,i,o,n,r);else{var s=this._visibleItems.fixedCount;if(s>0)if(o)for(var a=s;a--;){var l=this.getItem(a);l.checkable&&l._setChecked(t)}else for(a=s;a--;)this.getItem(a)._setChecked(t);var h=this.source._checkFieldIndex>-1;h&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,t,o,r)}finally{h&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,t),n?this._fireItemAllChecked(t):this._fireRefreshClient()}},o.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},o.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},o.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var o=this._visibleItems.getItem(t);if(o instanceof i.GridRow)return o}},o.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;t>=0;t--){var e=this._visibleItems.getItem(t);if(e instanceof i.GridRow)return e}},o.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;e>=0;e--)if((t=this._visibleItems.getItem(e))instanceof i.GridRow)return t}return this.getFirstRow()},o.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,o=this._visibleItems.count;e<o;e++)if((t=this._visibleItems.getItem(e))instanceof i.GridRow)return t}return this.getLastRow()},o.prototype.$_saveExpand=function(t,e){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);if(r instanceof i.GroupItemImpl||r instanceof l){var s=r.firstItem._dataRowId,a=this.dataSource.getDataRow(s),h=r._groupField;a>=0&&h>=0&&(e[s]={expanded:r._expanded,children:[]},this.$_saveExpand(r,e[s].children))}}},o.prototype.$_restoreExpand=function(t,e){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);if(r instanceof i.GroupItemImpl||r instanceof l){var s=r.firstItem._dataRowId,a=this.dataSource.getDataRow(s),h=r._groupField;a>=0&&h>=0&&e[s]&&(r._setExpanded(e[s].expanded),this.$_restoreExpand(r,e[s].children))}}},o.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&i>0&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var n=this.dataSource.fieldCount,r=this._groupFields.length-1;r>=0;r--)this._groupFields[r]>=n&&this._groupFields.splice(r,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&i>0&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},o.prototype.$_checkChildren=function(t,e,o,n){for(var r=0,s=t.count;r<s;r++){var a=t.getItem(r);a&&(o?(n||a.isDataRow)&&a.checkable&&a._setChecked(e):a._setChecked(e)),a instanceof i.GroupItem&&this.$_checkChildren(a,e,o,n)}},o.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},o.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},o.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new u(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},o.prototype.$_resetDisplayLevels=function(t){for(var e=0,o=t.count;e<o;e++){var n=r.Utils.cast(t.getItem(e),i.GroupItem);if(n){var s=r.Utils.cast(n.firstItem,i.GridRow);s&&s._displayLevel<0&&(s._displayLevel=n.level),this.$_resetDisplayLevels(n)}}},o.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,n=t.endIndex;if(!(n<o)){var r=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new u(o,o);l.level=r,t.children.push(l);var h=!this.mergeMode&&this._valueForGroupCallback,d=e.getItem(o),c=d.getData(s);c=h?h.call(this._callbackOnwer,this._callbackOnwer,d.dataRow,a.orgFieldName,c):c;for(var p=o+1;p<=n;p++){var _=(d=e.getItem(p)).getData(s);_=h?h.call(this._callbackOnwer,this._callbackOnwer,d.dataRow,a.orgFieldName,_):_,a.equalValues(_,c)||(l&&(l.endIndex=p-1,l.groupValue=c),(l=new u(p,p)).level=r,t.children.push(l)),c=_}l&&(l.endIndex=n,l.groupValue=c);p=0;for(var f=t.children.length;p<f;p++)this.$_buildGroups(t.children[p],e,i)}}},o.prototype.$_buildItems=function(t,e,o){var n,r=this.mergeMode,s=e.children.length;if(s>0){n=e.level;for(var h=o[e.level],u=0;u<s;u++){var d=r?new l(n,h):new i.GroupItemImpl(h);d._setExpanded(this.expandWhenGrouping),t.add(d),d._setCheckable(this._checkable),d.groupValue=e.children[u].groupValue,this.$_buildItems(d,e.children[u],o)}}else{var c=e.endIndex-e.startIndex+1,p=this.source.getItems(e.startIndex,c);t.addAll(p),this._incDescendents(t,c)}if((n=t.level)>0){var _=this._callbackOnwer,f=this._footerCallback;if(this._footerCounter)for(var g=0,m=(u=0,this._footerCounter.getGroupFooterCount(t));u<m;u++){var y=!(!f||f(_,t,u));(v=r?new a:new i.GroupFooter).$_footerIndex=u,v.$_vindex=y?-1:g++,v.hiddenFooter=y,t.add(v),v.setCheckable(this._checkable)}else if(f||f(_,t,0)){var v=r?new a:new i.GroupFooter;t.add(v)}}},o.prototype.$_setEditItem=function(t){this._editItem=t},o.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},o.prototype.fireGrouping=function(t){return this.fireConfirmEvent(o.GROUPING,t)},o.prototype.fireGrouped=function(t){this.fireEvent(o.GROUPED)},o.prototype.fireExpand=function(t){return this.fireConfirmEvent(o.EXPAND,t)},o.prototype.fireExpanded=function(t){this.fireEvent(o.EXPANDED,t)},o.prototype.fireCollapse=function(t){return this.fireConfirmEvent(o.COLLAPSE,t)},o.prototype.fireCollapsed=function(t,e){this.fireEvent(o.COLLAPSED,t,e)},o.prototype.onItemProviderRefresh=function(t){this._grouped&&(this.$_populateItems(!0),this._fireRefresh())},o.GROUPING="onGroupedItemProviderGrouping",o.GROUPED="onGroupedItemProviderGrouped",o.EXPAND="onGroupedItemProviderExpand",o.EXPANDED="onGroupedItemProviderExpanded",o.COLLAPSE="onGroupedItemProviderCollapse",o.COLLAPSED="onGroupedItemProviderCollapsed",o}(e.ProxyItemProvider);return Qi.GroupedItemProvider=c,Qi}var eo,io,oo,no={};function ro(){if(io)return Zi;io=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.DefaultItemProvider=Zi.CheckableExpressionRuntime=void 0;var t=d,e=ci(),i=di(),o=wi(),n=C(),r=ui(),s=Y(),a=Mi(),l=vt(),h=D(),u=to(),c=function(){if(eo)return no;eo=1,Object.defineProperty(no,"__esModule",{value:!0}),no.CellStyleMapTag=void 0;var t=d,e=function(e){function i(t){var i=e.call(this)||this;return i._styleMap={},i._owner=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._styleMap=null,e.prototype._doDispose.call(this)},i.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},i.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},i.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(e?delete i[e]:delete this._styleMap[t])}return!0},i.prototype.connect=function(t){this._styleMap={}},i.prototype.disconnect=function(){this._styleMap={}},i.prototype.clearRows=function(){this._styleMap={}},i.prototype.setRows=function(){this._styleMap={}},i.prototype.removeRow=function(t){var e=this._owner.getItemOfRow(t,!0);e&&delete this._styleMap[e.dataRowId]},i.prototype.removeRows=function(t){var e=this;t.forEach((function(t){var i=e._owner.getItemOfRow(t,!0);i&&delete e._styleMap[i.dataRowId]}))},i}(vt().DataTag);return no.CellStyleMapTag=e,no}(),p=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i}(a.DataRowExpressionRuntime);Zi.CheckableExpressionRuntime=p;var _=function(e){function o(t,i,o){var n=e.call(this)||this;return n._runtime=new p,n._owner=t,n._exprNode=s.ExpressionParser.Default.parse(i,["value","values"]),n._runtime=new p,n._callback=o,n}return t.__extends(o,e),o.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},o.prototype.connect=function(t){this._runtime.setDataSource(t)},o.prototype.disconnect=function(){},o.prototype.clearRows=function(){o.clearCheckables(this._owner)},o.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},o.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},o.prototype.insertRows=function(t,e){for(var o=0;o<e;o++){var n=this._owner.getItemOfRow(t+o,!0);n instanceof i.GridItem&&this.$_setCheckable(n)}},o.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},o.prototype.updateRows=function(t,e){for(var o=0;o<e;o++){var n=this._owner.getItemOfRow(t+o,!0);n instanceof i.GridItem&&this.$_setCheckable(n)}},o.prototype.updateRowList=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e],r=this._owner.getItemOfRow(n,!0);r instanceof i.GridItem&&this.$_setCheckable(r)}},o.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var o=this._owner.getItemOfRow(t[e],!0);o instanceof i.GridItem&&this.$_setCheckable(o)}},o.prototype.$_setCheckable=function(t){var e,i=this._callback;i?e=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),e=this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},o}(l.DataTag),f=function(e){function s(t){var i=e.call(this,t)||this;return i._sortMode=n.SortMode.AUTO,i._filterMode=n.FilterMode.AUTO,i._filterOr=!1,i._checkableExpression=null,i._rows=[],i._filteredItems=[],i._pageItems=[],i._sortedItems=[],i._pubItems=i._rows,i._items=i._rows,i._distinctRows=[],i._rowCount=0,i._fixedCount=0,i._fixedSorting=!1,i._maxItemCount=0,i._itemCount=0,i._pubCount=0,i._filtered=!1,i._filtering=!1,i._filters=[],i._filterRuntime=new o.ColumnFilterRuntime,i._filterLock=0,i._fixedFiltering=!1,i._sorted=!1,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._labelComparer={},i._paging=!1,i._pagingSource=n.PagingSource.ROWS,i._pageSize=10,i._pageCount=-1,i._pageStartIndex=-1,i._currPage=0,i._pageStart=0,i._summaryMode=n.SummaryMode.AGGREGATE,i._summaryMap=null,i._checkableTag=null,i._cellStyleMapTag=new c.CellStyleMapTag(i),i}return t.__extends(s,e),s.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,e.prototype._doDispose.call(this)},s.prototype.getCommandStates=function(t){var e=this._rows[t];return e&&e._getExtents()},s.prototype.setCommandStates=function(t,e){var i=this._rows[t];null!=e&&i&&i._setExtents(e)},_dp(s,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())}}),_dp(s,"isSorted",{get:function(){return this._sorted}}),_dp(s,"isPaging",{get:function(){return this._paging}}),_dp(s,"pageStartIndex",{get:function(){return this._pageStart}}),_dp(s,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())}}),_dp(s,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t}}),_dp(s,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t}}),_dp(s,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new _(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))}}),_dp(s,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new _(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))}}),_dp(s,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),s.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,n=0;n<e;n++){var r=this._dataSource.getValue(n,t);r!=o&&i.indexOf(r)<0&&i.push(r),o=r}return i},s.prototype.beginFilter=function(){this._filterLock++},s.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},s.prototype.hasFilter=function(t){var e=this._filters[t];return e&&e.length>0},s.prototype.addFilter=function(t,e){if(e&&e.criteria,t>=0){var i=this._filters[t];if(i||(i=[],this._filters[t]=i),e.criteria||e.callback){var n=new o.ColumnFilterRun(e);return i.push(n),this.applyFilters(),n}}},s.prototype.clearAllFilters=function(){this._filtered&&(this._filters=[],this.applyFilters())},s.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&i.length>0)return!0}return!1},s.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(this._filterLock>0)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},s.prototype.orderBy=function(t,e,i,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,s=e?e.length:0,a=i?i.length:0,l=0;l<s;l++)e[l]=e[l]==n.SortDirection.ASCENDING||e[l]==n.SortDirection.DESCENDING?e[l]:n.SortDirection.ASCENDING;for(l=0;l<r;l++)this._sortFields.push(t[l]),s>l?this._sortDirections.push(e[l]):s>0?this._sortDirections.push(e[s-1]):this._sortDirections.push(n.SortDirection.ASCENDING),a>l?this._sortCases.push(i[l]):a>0?this._sortCases.push(i[a-1]):this._sortCases.push(n.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},s.prototype.getSortFields=function(){return this._sortFields.slice()},s.prototype.getSortDirections=function(){return this._sortDirections.slice()},s.prototype.getSortCases=function(){return this._sortCases.concat()},s.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},_dp(s,"page",{get:function(){return this._paging?this._currPage:-1}}),s.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},_dp(s,"pageCount",{get:function(){if(this._paging){if(this._pageCount>=0)return this._pageCount;var t=this.$_getPageItems();return Math.floor((t.length+this._pageSize-1)/this._pageSize)}return 0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())}}),s.prototype.getPageOfDataRow=function(t){if(this._paging){if(t<0||t>=this._dataSource.rowCount)return-1;var e=this.$_getPageItems();if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(e[i].dataRow===t)return Math.floor(i/this._pageSize);return-1}return 0},s.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var n=t?this._rows[o]:this._pubItems[o];n.checked&&i.push(n.dataRow)}return i},s.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},s.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():_.clearCheckables(this),this._fireRefresh()},s.prototype.setCheckFieldIndex=function(t){e.prototype.setCheckFieldIndex.call(this,t)},s.prototype.getJsonRows=function(){return this._pubItems.map((function(t){return t.getRowObject()}))},s.prototype.addCellStyle=function(t,e,i){return this._cellStyleMapTag.addCellStyle(t,e,i)},s.prototype.removeCellStyle=function(t,e){return this._cellStyleMapTag.removeCellStyle(t,e)},s.prototype.getUserCellStyle=function(t,e){return this._cellStyleMapTag.getCellStyle(t,e)},_dp(s,"dataSource",{get:function(){return this._dataSource},set:function(t){if(t!==this._dataSource){this.$_clearRows(!0);var e=this._dataSource;e&&(this._checkableTag&&this._checkableTag.disconnect(),this._cellStyleMapTag.disconnect(),e.disposing||(e.removeTag(this._cellStyleMapTag),e.removeListener(this),e.unregisterCommandListener(this))),(e=this._dataSource=t)&&(this._checkableTag&&this._checkableTag.connect(e),this._cellStyleMapTag.connect(e),e.addTag(this._cellStyleMapTag),this.$_buildRows(),e.addListener(this),e.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset())}}}),_dp(s,"itemCount",{get:function(){return this._pubCount}}),_dp(s,"rowCount",{get:function(){return this._pubCount}}),_dp(s,"itemLength",{get:function(){return this._items.length}}),_dp(s,"fixedCount",{get:function(){return this._fixedCount}}),_dp(s,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())}}),_dp(s,"sorted",{get:function(){return this._sorted}}),_dp(s,"movable",{get:function(){return!this.sorted}}),s.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},s.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},s.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},s.prototype.getIndexOfRow=function(t){if(t>=0&&t<this._rows.length){var e=this._rows[t];return e&&this._pubItems.indexOf(e)>=0?e.index:-1}return-1},s.prototype.getItemOfRow=function(t,e){if(t>=0&&t<this._rows.length){var i=this._rows[t];return i.index>=0||e?i:null}return null},s.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},s.prototype.setFixed=function(t,e,i,o){t=Math.max(0,t),(o||t!=this._fixedCount||e!=this._fixedSorting||i!=this._filtering)&&(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},s.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},s.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},s.prototype.getAllItems=function(){return this._pubItems.slice()},s.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},s.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},s.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},s.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},s.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},s.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},s.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},s.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},s.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},s.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},s.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},s.prototype.canGrouping=function(t){return this.fireGrouping(t)},s.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];o.dataRowId>=0&&(t[o.dataRowId]={exts:o._extents,heights:o.heights&&o.heights.slice()})}},s.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},s.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},s.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},s.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var n=this._rows[i]=this.$_createRow(i);if(t&&t.hasOwnProperty(n.dataId)){var r=t[n.dataId];n._extents=r.exts,n.heights=r.heights&&r.heights.slice()}}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},s.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},s.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||this._dataSource.hiddenCount>0)for(var o=0;o<this._rowCount;o++){var n=this._rows[o],r=this._dataSource.getRowState(this._rows[o].dataRow),s=this._dataSource.isHiddenRow(this._rows[o].dataRow);this.hideDeleted&&(0,h.isDeletedState)(r)||s?n._index=-1:n._index=0}else for(o=0;o<this._rowCount;o++)this._rows[o]._index=0;var a=this.fixedCount,l=a>0&&!this._fixedFiltering,u=this._rows.length;if(!t){o=0;for(var d=this._filters.length;o<d;o++){if(m=this._filters[o])for(var c=0;c<m.length;c++)m[c].prepare(this._filterRuntime,this._dataSource)}}this._paging||(u=Math.min(u,i));var p=0;for(o=0;o<this._rowCount&&p<u;o++){if((n=this._rows[o]).index>=0)if(t||l&&p<a)this._filteredItems.push(n),p++;else{var _=!this._filterOr,f=0,g=0;for(d=this._filters.length;g<d;g++){var m;if((m=this._filters[g])&&f++,this._filterOr){if(m&&this.$_select(m,n,g)){_=!0;break}}else if(m&&!this.$_select(m,n,g)){_=!1;break}}_||0===f?(this._filteredItems.push(n),p++):n._index=-1}}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var y=this._sortedItems;for(o=y.length;o--;)y[o].index<0&&y.splice(o,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},s.prototype.$_buildPageItems=function(){var t=this.$_getPageItems();this._pageItems.length=0;for(var e=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=this.maxItemCount>0?this.maxItemCount:i,n=Math.min(this._pageSize,o);e<i&&n>0;e++,n--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},s.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},s.prototype.$_compareFuncs=function(t,e){for(var i={},o=this._dataSource,r=0,s=t.length;r<s;r++){var a=o.getField(t[r]);if(a){var l=o.getDataComparer(a.index)||this._labelComparer[a.index],h=e[r]==n.SortCase.INSENSITIVE;if(!l)switch(a.dataType){case n.ValueType.DATETIME:case n.ValueType.NUMBER:l=o.compareNumbers.bind(o);break;case n.ValueType.BOOLEAN:l=o.compareBools.bind(o);break;case n.ValueType.OBJECT:l=o.compareObjects.bind(o);break;default:l=h?o.compareTexts.bind(o):o.compareValues.bind(o)}l&&(i[t[r]]=l)}}return i},s.prototype.$_sortRows=function(t){var e=this;void 0===t&&(t=null);var i=t||this._items.slice(),o=[];this._fixedCount>0&&!this._fixedSorting&&(o=i.splice(0,this._fixedCount));var r=this.$_compareFuncs(this._sortFields,this._sortCases);i.sort((function(t,i){for(var o,s,a,l=0,h=0,u=e._sortFields.length;h<u&&(s=e._sortDirections[h],a=e._sortFields.length==h+1,!(o=r[e._sortFields[h]])||0===(l=o(e._sortFields[h],t.dataRow,i.dataRow)));h++);return l=0===(l*=s===n.SortDirection.DESCENDING?-1:1)&&a?s===n.SortDirection.DESCENDING?i.dataRow-t.dataRow:t.dataRow-i.dataRow:l})),this._sortedItems=o.concat(i)},s.prototype.$_createRow=function(t){var e=new i.GridRow(t);return this.attachItem(e),e._dataRowId=e.dataId,e},s.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},s.prototype.$_resetSummary=function(){this._summaryMap=[]},s.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;t>=0;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},s.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new r.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},s.prototype.$_summarize=function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,o=new Array(i),r=0;r<i;r++)o[r]=this._items[r].dataRow;e.summarizeRange(t,o,this._summaryMode==n.SummaryMode.STATISTICAL)}else e.summarize(t,this._summaryMode==n.SummaryMode.STATISTICAL)},s.prototype.$_needSort=function(){return this._sorted&&this._sortMode==n.SortMode.AUTO},s.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==n.FilterMode.AUTO},s.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},s.prototype.$_select=function(t,e,i){for(var o=0,n=t.length;o<n;o++)if(t[o].select(this._filterRuntime,e.parent,e,i))return!0},s.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;t>=0;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&this._sortFields.length>0},s.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},s.prototype.fireGrouping=function(t){return this.fireConfirmEvent(u.GroupedItemProvider.GROUPING,t)},s.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},s.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},s.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},s.prototype.onDataProviderRefresh=function(t){this._refreshItems()},s.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},s.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},s.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},s.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,n=e<o.length?o[e]:null,r=this.$_createRow(e);o.splice(e,0,r);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)}if(this._sorted){l=this._sortedItems;e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(r),this._fireRefresh()},s.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var n,r=this._rows,s=e<r.length?r[e]:null,a=[],l=0;l<i;l++)a.push(n=this.$_createRow(e+l)),r.splice(e+l,0,n);var h=r.length;for(l=e;l<h;l++)r[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var u=this._filteredItems;e=null!=o?o:Math.max(0,s?u.indexOf(s):u.length);for(l=0;l<a.length;l++)u.splice(e+l,0,a[l])}if(this._sorted){u=this._sortedItems;e=null!=o?o:Math.max(0,s?u.indexOf(s):u.length);for(l=0;l<a.length;l++)u.splice(e+l,0,a[l])}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},s.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&((i=(e=this._filteredItems).indexOf(t))>=0&&e.splice(i,1));this._sorted&&((i=(e=this._sortedItems).indexOf(t))>=0&&e.splice(i,1));this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},s.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var n=i.length-1;n>=e;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o),this._fireRefresh()},s.prototype.onDataProviderRowsRemoving=function(t,e){return!0},s.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var o=t[i];(n=e.indexOf(o))>=0&&e.splice(n,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var n;o=t[i];(n=e.indexOf(o))>=0&&e.splice(n,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},s.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){e.length>1&&e.sort((function(t,e){return t-e}));for(var i=this._rows,o=e[0],n=[],r=e.length-1;r>=0;r--)n.push(i[e[r]]),i.splice(e[r],1);for(r=this._rows.length-1;r>=o;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(n),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},s.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},s.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},s.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},s.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},s.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},s.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},s.prototype.onDataProviderRowMoving=function(t,e,i){return!0},s.prototype.onDataProviderRowMoved=function(t,e,i){var o=this._rows,n=o.splice(e,1);o.splice(i,0,n[0]);for(var r=o.length,s=e=Math.min(e,i);s<r;s++)o[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},s.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},s.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},s.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},s.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},s.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];(0,h.isDeletedState)(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},s.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var o=this.getItemsByRows(e);this.$_silentRemoveRows(o)}this._fireRefresh()}else this._refreshItems()},s.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i=!1,o=0,n=e.length;o<n;o++){var r=e[o],s=this._rows[r];if((0,h.isDeletedState)(s.rowState)){i=!0;break}}if(i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var a=this.getItemsByRows(e);this.$_silentRemoveRows(a)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},s.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},s.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},s}(e.ItemProvider);return Zi.DefaultItemProvider=f,Zi}function so(){if(oo)return Xi;oo=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.TreeItemProvider=Xi.RootTreeItem=Xi.TreeItem=Xi.TreeItemFooter=void 0;var t=d,e=di(),i=D(),o=C(),n=ci(),r=G(),s=wi(),a=function(){if(zi)return Ki;zi=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.TreeItemsSorter=void 0;var t=d,e=G(),i=C(),o=function(e){function o(){var t=e.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},t}return t.__extends(o,e),o.prototype.run=function(t,e,o,n,r,s,a){this._rs=t.provider;var l=this._ds=this._rs.dataSource;this._parent=t,this._field=e;var h=this._ds.getField(e);if(this._labelComparer=this._ds._comparers[e]||this._rs._labelComparer[e],this._labelComparer)this._comparer=this.$_userComparer;else switch(h.dataType){case i.ValueType.NUMBER:case i.ValueType.DATETIME:this._comparer=l.compareNumbers;break;case i.ValueType.BOOLEAN:this._comparer=l.compareBools;break;case i.ValueType.OBJECT:this._comparer=l.compareObjects.bind(l);break;default:this._comparer=n?l.compareTexts.bind(l):l.compareValues.bind(l)}this.$_sort(r,s,o,a)},o.prototype.$_sort=function(t,e,o,n){do{var r=this._parent,s=this._field,a=t,l=e,h=Math.floor((t+e)/2),u=r.getItem(h).dataRow,d=r.getItem(h).row;do{if(o==i.SortDirection.ASCENDING){for(;a<=l&&(0==(c=this._comparer(this._field,d,r.getItem(a).row))&&n&&(c=u-r.getItem(a).dataRow),!(c<=0));)a++;for(;a<=l&&(0==(c=this._comparer(s,d,r.getItem(l).row))&&n&&(c=u-r.getItem(l).dataRow),!(c>=0));)l--}else{for(;a<=l&&(0==(c=this._comparer(s,d,r.getItem(a).row))&&n&&(c=u-r.getItem(a).dataRow),!(c>=0));)a++;for(;a<=l;){var c;if(0==(c=this._comparer(s,d,r.getItem(l).row))&&n&&(c=u-r.getItem(l).dataRow),c<=0)break;l--}}a<=l&&(a!=l&&r._exchangeItems(a,l),a++,l--)}while(a<=l);t<l&&this.$_sort(t,l,o,n),t=a}while(t<e)},o}(e.Base);return Ki.TreeItemsSorter=o,Ki}(),l=Y(),h=ro(),u=ui(),c=S(),p=rt(),_=function(e){function i(t,i,o){var n=e.call(this)||this;return n._owner=t,n._exprNode=l.ExpressionParser.Default.parse(i,["value","values"]),n._runtime=new h.CheckableExpressionRuntime,n._callback=o,n}return t.__extends(i,e),i.clearCheckables=function(t){for(var e=function(t){if(t){t.setCheckable(!0);for(var i=t.count;i--;){var o=t.getItem(i);o instanceof y&&e(o)}}},i=t.itemCount;i--;){var o=t.getItem(i);o instanceof y&&e(o)}},i.prototype.connect=function(t){this._runtime.setDataSource(t)},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){i.clearCheckables(this._owner)},i.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof y&&this.$_setCheckable(e,!0)}},i.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof y&&this.$_setCheckable(i,e)},i.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof y&&this.$_setCheckable(i,!0)}},i.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof y&&this.$_setCheckable(e,!1)},i.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._owner.getItemOfRow(o.rowId);n instanceof y&&this.$_setCheckable(n,!1)}},i.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof y&&this.$_setCheckable(i,!1)}},i.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0;if(i?o=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),o=this._exprNode.evaluate(this._runtime)),t.setCheckable(o),e)for(var n=t.count;n--;){var r=t.getItem(n);r instanceof y&&this.$_setCheckable(r,!0)}}},i}(r.Base),f=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._extents={},t}return t.__extends(i,e),i.prototype.connect=function(t){this._extents={}},i.prototype.disconnect=function(){this._extents={}},i.prototype.clearRows=function(){this._extents={}},i.prototype.setRows=function(){},i.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;e>=0;e--)this.addRow(t.getChild(e))},i.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},i.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;e>=0;e--)this.removeRow(t.getChild(e))},i.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},i.prototype.updateRow=function(t){},i.prototype.updateRows=function(t){},i.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},i.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},i}(r.Base),g=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._styleMap={},t}return t.__extends(i,e),i.prototype.connect=function(t){this._styleMap={}},i.prototype.disconnect=function(){this._styleMap={}},i.prototype.clearRows=function(){this._styleMap={}},i.prototype.setRows=function(){this._styleMap={}},i.prototype.addRow=function(t){},i.prototype.addRows=function(t){},i.prototype.removeRow=function(t){delete this._styleMap[t.rowId]},i.prototype.removeRows=function(t){var e=this;t.forEach((function(t){return delete e._styleMap[t.rowId]}))},i.prototype.updateRow=function(t){},i.prototype.updateRows=function(t){},i.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},i.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},i.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(i[e]&&delete i[e],Object.keys(i).length||this._styleMap[t])}return!0},i}(r.Base),m=function(e){function i(){var t=e.call(this)||this;return t._extents=0,t}return t.__extends(i,e),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},_dp(i,"isLeaf",{get:function(){return!0}}),_dp(i,"type",{get:function(){}}),i}(e.GridItem);Xi.TreeItemFooter=m;var y=function(i){function n(t){var e=i.call(this)||this;return e._iconHeight=0,e._dataRow=t,e}return t.__extends(n,i),n.getTemp=function(t,i){return n.$_tempItem._dataRow=t,n.$_tempItem[e.GridItem.PARENT]=i,n.$_tempItem},n.prototype.dispose=function(){this._dataRow=null,i.prototype.dispose.call(this)},_dp(n,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t}}),_dp(n,"row",{get:function(){return this._dataRow}}),_dp(n,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(n,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1}}),_dp(n,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren}}),_dp(n,"rootItem",{get:function(){for(var t=this;t.level>1;)t=t.parent;return t}}),_dp(n,"summaryMode",{get:function(){return o.SummaryMode.AGGREGATE}}),_dp(n,"editable",{get:function(){return this._editable}}),_dp(n,"readOnly",{get:function(){return this._readOnly}}),n.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},n.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},n.prototype._setExtents=function(t){var e;null===(e=this.provider)||void 0===e||e._extents.setExtents(this,t)},_dp(n,"isData",{get:function(){return!0}}),_dp(n,"isDataRow",{get:function(){return!0}}),_dp(n,"footer",{get:function(){return this._footer}}),_dp(n,"footerCount",{get:function(){return this._footer?1:0}}),_dp(n,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),n.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},_dp(n,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(n,"descendantCount",{get:function(){return this._dataRow.descendantCount}}),_dp(n,"rowState",{get:function(){return this._dataRow.rowState}}),_dp(n,"isLeaf",{get:function(){return!this.hasChildren}}),_dp(n,"resizable",{get:function(){return!0}}),_dp(n,"type",{get:function(){return o.ItemType.TREE}}),n.prototype.getFooter=function(t){return this._footer},n.prototype.isFooter=function(t){return t===this._footer},n.prototype.canEdit=function(){return!0},n.prototype.createFooter=function(){this._footer||(this._footer=new m)},n.prototype.setExpanded=function(t,e,i){(t!=this.expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},n.prototype.getData=function(t){return t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.getValue(t)},n.prototype.setData=function(t,e){t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.setValue(t,e,!1)},n.prototype.setItem=function(t,e){i.prototype.setItem.call(this,t,e),e._addChildren(t.children),t.clear()},n.prototype.exchange=function(t,e){this._exchangeItems(t,e)},n.prototype.moveChild=function(t,e){var i=t+e,o=this._children,n=o[t];if(e<0)for(var r=t;r>i;r--)o[r]=o[r-1];else for(r=t;r<i;r++)o[r]=o[r+1];o[i]=n},n.prototype.moveChildren=function(t,e,i){for(var o=this._children,n=o.splice(t,e),r=t+i,s=0;s<e;s++)o.splice(r+s,0,n[s])},n.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},n.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},n.$_tempItem=new n(null),n}(e.GroupItem);Xi.TreeItem=y;var v=function(e){function i(t){var i=e.call(this,null)||this;return i._rs=t,i}return t.__extends(i,e),_dp(i,"id",{get:function(){return-1}}),_dp(i,"provider",{get:function(){return this._rs}}),_dp(i,"level",{get:function(){return 0}}),_dp(i,"expanded",{get:function(){return!0}}),i.prototype.setExpanded=function(t,e,i){},_dp(i,"isLeaf",{get:function(){return!1}}),_dp(i,"visible",{get:function(){return!0}}),_dp(i,"dataSource",{get:function(){return this._rs.dataSource}}),i}(y);Xi.RootTreeItem=v;var w=function(e){function i(t){var i=e.call(this)||this;return i._fixedCount=0,i._items=new Array,i._list=new Array,i._rs=t,i}return t.__extends(i,e),_dp(i,"provider",{get:function(){return this._rs}}),_dp(i,"count",{get:function(){return this._items.length}}),_dp(i,"fixedCount",{get:function(){return this._fixedCount}}),i.prototype.getItem=function(t){return this._items[t]},i.prototype.setItem=function(t,e){this._items[t]=e},i.prototype.indexOf=function(t){return this._items.indexOf(t)},i.prototype.clear=function(){this._items.length=0},i.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},i.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},i.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},i.prototype.getPrior=function(t){return t&&t.visible&&t.index>0?this._items[t.index-1]:null},i.prototype.insert=function(t,e){this._items.splice(e,0,t)},i.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(i>=0&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},i.prototype.$_collectChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},i.prototype.$_expandItem=function(t,e,i){var o,n=this._items,r=this._list;if(o=t instanceof v?this._fixedCount:t.index+1,i=Math.max(0,i),r.length=0,this.$_collectChildren(t,r,e,i>0?t.level+i:1e6),e){for(var s=o,a=n.length;s<a&&!(n[s].level<=t.level);s++);n.splice(o,s-o)}for(s=0,a=r.length;s<a;s++)n.splice(o+s,0,r[s])},i.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},i}(r.Base),x=function(n){function r(){var t=n.call(this,null)||this;return t._sortMode=o.SortMode.AUTO,t._expandWhenGrouping=!0,t._footerWhenExpanded=!0,t._footerWhenCollapsed=!0,t._labelComparer={},t._summaryMode=o.SummaryMode.AGGREGATE,t._groupSummaryMode=o.SummaryMode.AGGREGATE,t._checkableExpression=null,t._checkableCallback=null,t._extents=new f,t._filters={},t._filterRuntime=new s.ColumnFilterRuntime,t._filtered=!1,t._sorter=new a.TreeItemsSorter,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._visibleItems=new w(t),t._itemMap=[],t._itemCount=0,t._summaryMap=null,t._filterLock=0,t._includeParentItem=!0,t._cellStyleMap=new g,t}return t.__extends(r,n),r.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null;var t=this.dataSource;t&&!t.disposing&&(t.removeTag(this._extents),t.removeTag(this._cellStyleMap),t.removeListener(this),t.unregisterCommandListener(this)),n.prototype._doDispose.call(this)},r.prototype.getCommandStates=function(t){var e=this._itemMap[t.rowId];return e&&e._getExtents()},r.prototype.setCommandStates=function(t,e){var i=t&&this._itemMap[t.rowId];null!=e&&i&&i._setExtents(e)},_dp(r,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)}}),_dp(r,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)}}),_dp(r,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)}}),_dp(r,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),_dp(r,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())}}),_dp(r,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())}}),_dp(r,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())}}),_dp(r,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new _(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(r,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new _(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(r,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)}}),_dp(r,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t}}),r.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==o.SortMode.AUTO},r.prototype.insertItem=function(t,e,i,o){var n=this._visibleItems;t.collapsed&&n.expand(t,!1);var r=n.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=n.count,a=t.level+1;++r<s&&!(n.getItem(r).level<=a););n.insert(e,r)}else t.insert(i,e),n.insert(e,r)},r.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=t.count>0?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var n=o.count,r=t.level;++i<n&&!(o.getItem(i).level<=r););t.add(e),o.insert(e,i)},r.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},r.prototype.$_calcLevel=function(t,e,i){var o,n,r=t.count,s=e;for(o=0;o<r;o++)(n=t.getItem(o))&&(s=Math.max(s,e+1),i&&!n.expanded||(s=Math.max(s,this.$_calcLevel(n,e+1,i))));return s},r.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},r.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof y&&(r.expanded||r.level<i)&&this.$_setExpanded(r,!0,i)}},r.prototype._expandItem=function(t,e,i,o,n){if(t&&(e||!t.expanded)){if(n&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,o>0?t.level+o:1e6);try{this._fireRefresh()}finally{n&&this._fireExpanded(t)}}},r.prototype.expand=function(t,e,i,o){void 0===o&&(o=0),this._expandItem(t,i,e,o,!0)},r.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,t>0?t+1:0,!0)},r.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof y&&this.$_setCollapsed(n,!0)}},r.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},r.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},r.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},r.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},r.prototype.orderBy=function(t,e,i,n){void 0===n&&(n=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,s=e?e.length:0,a=i?i.length:0,l=0;l<r;l++)this._sortFields.push(t[l]),s>l?this._sortDirections.push(e[l]):s>0?this._sortDirections.push(e[s-1]):this._sortDirections.push(o.SortDirection.ASCENDING),a>l?this._sortCases.push(i[l]):a>0?this._sortCases.push(i[a-1]):this._sortCases.push(o.SortCase.SENSITIVE);try{this._saveAndRefresh(!0,n),n&&this._fireRefresh()}finally{this._fireSorted()}},r.prototype.getSortFields=function(){return this._sortFields.concat()},r.prototype.getSortDirections=function(){return this._sortDirections.concat()},r.prototype.getSortCases=function(){return this._sortCases.concat()},r.prototype.beginFiltering=function(){this._filterLock++},r.prototype.$_prepareFiltering=function(t,i){for(var o=i._dataRow.count,n=i.rowId,r=n<=-1||this.$_selectItem(i.parent,i),s=0;s<o;s++){var a=new y(i._dataRow._children[s]);a[e.GridItem.PARENT]=i,a&&!this.dataSource.isHiddenRow(a.rowId)&&(r=this.$_prepareFiltering(t,a)||r)}return t[n]=r},r.prototype.endFiltering=function(t,e,i){var o={};t&&this._includeParentItem&&(o={},this.$_prepareFilters(),this.$_prepareFiltering(o,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,o))},r.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&e.length>0},r.prototype.addFilter=function(t,e){var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new s.ColumnFilterRun(e);return i.push(o),o},r.prototype.clearAllFilters=function(){this._filtered&&(this._filters={},this.applyFilters(null,null))},r.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&e.length>0)return!0}return!1},r.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters())for(var o in this._filters){var n=this._filters[o];if(n)for(var r=n.length;r--;)n[r].prepare(this._filterRuntime,t)}},r.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},r.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},r.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof y)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.row)&&i.push(s),t(r,i)}}(this._rootItem,t),t},r.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof y)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.dataRow)>=0&&i.push(s),t(r,i)}}(this._rootItem,t),t},r.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},r.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():_.clearCheckables(this),this._fireRefresh()},r.prototype.$_checkChildren=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r&&(i?r.checkable&&this._setCheckItem(r,e):this._setCheckItem(r,e)),r instanceof y&&this.$_checkChildren(r,e,i)}},r.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},r.prototype.checkAll=function(t,e,i,o){e?n.prototype.checkAll.call(this,t,e,i,o,!1):(this.$_checkChildren(this._rootItem,t,i),o?this._fireItemAllChecked(t):this._fireRefreshClient())},r.prototype.addCellStyle=function(t,e,i){return this._cellStyleMap.addCellStyle(t,e,i)},r.prototype.removeCellStyle=function(t,e){return this._cellStyleMap.removeCellStyle(t,e)},r.prototype.getUserCellStyle=function(t,e){return this._cellStyleMap.getCellStyle(t,e)},_dp(r,"dataSource",{get:function(){return this._ds},set:function(t){if(t!==this._ds){this.$_clearItems(),this.$_resetSummary();var e=this._ds;e&&!e.disposing&&(e.removeTag(this._extents),e.removeTag(this._cellStyleMap),e.removeListener(this),e.unregisterCommandListener(this)),(e=this._ds=t)&&(this.$_buildTree(),e.addTag(this._extents),e.addTag(this._cellStyleMap),e.addListener(this,0),e.registerCommandListener(this)),this._fireReset()}}}),_dp(r,"itemCount",{get:function(){return this._visibleItems.count}}),_dp(r,"rowCount",{get:function(){return this._itemCount}}),_dp(r,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0}}),_dp(r,"movable",{get:function(){return!this.sorted}}),r.prototype._createRootItem=function(){var t=new v(this);return this._setExpanded(t,!0),t},r.prototype.getItem=function(t){return t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},r.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},r.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},r.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof y&&(e.push(n),this.$_collectItems(n,e))}},r.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},r.prototype.getJsonRows=function(){return this.getAllItems().map((function(t){var e=t.getRowObject();return e.__level=t.level,e}))},r.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},r.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},r.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},r.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},r.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},r.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},r.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},r.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},r.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},r.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},r.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},r.prototype.findItem=function(t,e,i,n,r){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var a=Math.min(t.length,e.length);if(a<1)return-1;var l=i.allFields,h=i.caseSensitive,u=i.partialMatch,d=null,_=[],f=i.reverse,g=i.compareCallback;g="function"==typeof g?g:c.Utils.compareTextValue;for(var m=0;m<a;m++)_[m]=s.getField(t[m]).dataType;n=Math.max(0,n),r=Math.min(this._visibleItems.count-1,r);for(var y=n;f?y>=r:y<=r;f?y--:y++){var v=this._visibleItems.getItem(y),C=v.dataRow,w=v.dataRow>=0;if(w)for(m=0;m<a;m++){var x=v.getData(t[m]),b=s.getOrgFieldName(t[m]);switch(_[m]){case o.ValueType.DATETIME:case o.ValueType.DATE:if(e[m]instanceof Date)w=g.call(s.handler,e[m],x,h,u,C,b);else{if(!d){var I=/[.]/.test(e[m])?"yyyy.MM.dd":/[/]/.test(e[m])?"yyyy/MM/dd":/[-]/.test(e[m])?"yyyy-MM-dd":"yyyyMMdd";d=new p.DateTimeWriter(I)}w=g.call(s.handler,e[m],x?d.getText(x):x,h,u,C,b)}break;default:w=g.call(s.handler,e[m],x,h,u,C,b)}if(w&&!l)return y;if(!w&&l)break}if(w)return y}return-1},r.prototype.findCell=function(t,e,i,n,r,s){var a=this.dataSource;if(!a)return null;if(this.itemCount<1)return null;for(var l=i.reverse,h=i.caseSensitive,u=i.partialMatch,d=a.fieldCount,_=t.length,f=null,g=[],m=0;m<d;m++)g[m]=a.getField(m).dataType;n=Math.max(0,n),r=Math.min(this._visibleItems.count-1,r),s=Math.max(l?-1:0,Math.min(s,_-1)),l?s<0&&(s=t.length-1,n--):s>=t.length&&(n++,s=0);var y=i.compareCallback;y="function"==typeof y?y:c.Utils.compareTextValue;for(var v=n;l?v>=r:v<=r;l?v--:v++){var C=this._visibleItems.getItem(v),w=C.dataRow,x=!1;if(C.dataRow>=0)for(m=l?v<n?_-1:s:v>n?0:s;l?m>=0:m<_;l?m--:m++){var b=t[m],I=a.getOrgFieldName(b);if(b>=0&&b<d){var E=C.getData(b);switch(g[b]){case o.ValueType.DATETIME:case o.ValueType.DATE:if(e instanceof Date)x=y.call(a.handler,e,E,h,u,w,I);else{if(!f){var S=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";f=new p.DateTimeWriter(S)}x=y.call(a.handler,e,E?f.getText(E):E,h,u,w,I)}break;default:x=y.call(a.handler,e,E,h,u,w,I)}if(x)return{itemIndex:v,fieldIndex:b,searchFieldIndex:m}}}}return null},r.prototype.$_internalAddItem=function(t,e,o){var n=y.getTemp(e,t),r=this.dataSource;if(!(this.hideDeleted&&(0,i.isDeletedState)(n.rowState)||r.isHiddenRow(e.rowId)))return n&&(null!=o?o:this.$_selectItem(t,n))?(n=new y(e),t.insert(e.index,n),this._itemCount++,this._itemMap[e.rowId]=n,n):void 0},r.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},r.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&(0,i.isDeletedState)(t.rowState)){var o=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},r.prototype.$_selectField=function(t,e,i,o){for(var n=0,r=t.length;n<r;n++){var a=t[n];if(!(a.model instanceof s.ColumnFilterCategory)&&a.select(this._filterRuntime,e,i,o))return!0}return!1},r.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var o=this._filters[i];if(o&&!this.$_selectField(o,t,e,Number(i)))return!1}return!!e},r.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},r.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},r.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},r.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var o=t.row,n=o.count,r=0;r<n;r++){var s=o.getChild(r),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),s.count>0&&this.$_buildItems(a,e,i))}},r.prototype.$_sortItem=function(t){var e=t.count;e>1&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof y&&this.$_sortItem(o)}},r.prototype.$_sort=function(t,e,i,n){var r,s=this._sortFields[e],a=this._sortDirections[e],l=this.dataSource,h=this._sortCases[e]==o.SortCase.INSENSITIVE;if(this._sorter.run(t,s,a,h,i,n,e+1==this._sortFields.length),r=l.getField(s).dataType==o.ValueType.TEXT&&h?l.equalTexts.bind(l):l.equalValues.bind(l),e+1<this._sortFields.length){for(var u=i,d=u;u<n;)u++,r(s,t.getItem(u).row,t.getItem(u-1).row)||(this.$_sort(t,e+1,d,u-1),d=u);d<n&&this.$_sort(t,e+1,d,n)}},r.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var o=i.fieldCount,n=this._sortFields,r=this._sortDirections,s=this._sortCases,a=n.length;a--;)(n[a]<0||n[a]>=o)&&(n.splice(a,1),r.splice(a,1),s.splice(a,1));this.sorted&&this._rootItem.count>0&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},r.prototype.$_resetSummary=function(){this._summaryMap=[]},r.prototype.$_resetGroupSummary=function(){},r.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},r.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new u.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},r.prototype.$_summarize=function(t){var e=this.dataSource;if(e)if(this._filtered||this.hideDeleted||e.hiddenCount>0){for(var i=this._rootItem.getDescendants(!1),n=i.length,r=[],s=0;s<n;s++){var a=i[s];a instanceof y&&!e.isHiddenRow(a.rowId)&&r.push(a.row)}t.count=r.length,e.summarizeRange(t,r,this.summaryMode==o.SummaryMode.STATISTICAL)}else t.count=e.rowCount,e.summarize(t,this.summaryMode==o.SummaryMode.STATISTICAL)},r.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(r.ITEM_CHANGED,t)},r.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.EXPANDING,t)},r.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(r.EXPANDED,t)},r.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.COLLAPSING,t)},r.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(r.COLLAPSED,t)},r.prototype._fireParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.PARENT_CHANGING,t,e,i)},r.prototype._fireParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(r.PARENT_CHANGED,t,e,i)},r.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},r.prototype._saveAndRefresh=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&function t(e,i){i[e.dataId]=!0,e.children.length>0&&e.children.forEach((function(e){t(e,i)}))}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},r.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},r.prototype.onTreeDataProviderDisposed=function(t){this.disposing||(this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null)},r.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},r.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},r.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},r.prototype.onDataProvderCleared=function(t){this._refreshItems()},r.prototype.onTreeDataProviderRowCountChanged=function(t,e){},r.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},r.prototype.onTreeDataProviderRowAdded=function(t,e){var i=this._itemMap[e.parent.rowId];if(i){var o=this.$_internalAddItem(i,e,!0);o?(this.$_buildItems(o),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),e.parent.level>0&&this._checkableTag.addRow(e.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},r.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o,n=this._itemMap[e.rowId];if(n&&i&&(o=i.length)>0){for(var r=0;r<o;r++){var s=i[r],a=this.$_internalAddItem(n,s,!0);a&&this.$_buildItems(a)}this.$_clearSummary(),n.expanded?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n),this._checkableTag&&(this._checkableTag.addRows(i),e.level>0&&this._checkableTag.addRow(e))}this.$_needSort()&&this._saveAndRefresh()},r.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},r.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},r.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},r.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,n=0;n<i;n++){var r=e[n],s=this._itemMap[r.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},r.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},r.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},r.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},r.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},r.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},r.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},r.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},r.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},r.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},r.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var o=e.length,n=!1;if(1==o){var r=e[0];n=!(h=this._itemMap[r.rowId]),this.$_internalRowStateChanged(h),this._checkableTag&&this._checkableTag.updateRow(r),n&&this._saveAndRefresh()}else if(o>0){var s=!1;if(this.hideDeleted)for(var a=0,l=e.length;a<l;a++){var h=this._itemMap[e[a].rowId];if(n=n||!h,h&&(0,i.isDeletedState)(h.rowState)){var u=h.parent;this.$_internalRemoveItem(h),u.expanded&&u.visible&&this._visibleItems.remove(h),s=!0}}this._checkableTag&&this._checkableTag.changeStates(e),s&&this.$_clearSummary(),n?this._saveAndRefresh():this._fireRefresh()}},r.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];if(o)o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh()}},r.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e[0].rowId];if(o)o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh()}},r.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var n=this._itemMap[e.rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0),n.changeParent(r,o),this.$_resetVisibleItems(),this._fireRefresh()}},r.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){var n=this._itemMap[e[0].rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0);for(var s=0;s<e.length;s++){var a=e[s];(n=this._itemMap[a.rowId]).changeParent(r,o+s)}this.$_resetVisibleItems(),this._fireRefresh()}},r.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var o=!1,n=0,r=e.length;n<r;n++){var s=e[n],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},r.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},r.ITEM_CHANGED="onTreeItemProviderItemChanged",r.EXPANDING="onTreeItemProviderExpanding",r.EXPANDED="onTreeItemProviderExpanded",r.COLLAPSING="onTreeItemProviderCollapsing",r.COLLAPSED="onTreeItemProviderCollapsed",r.PARENT_CHANGING="onTreeItemProviderParentChanging",r.PARENT_CHANGED="onTreeItemProviderParentChanged",r}(n.ItemProvider);return Xi.TreeItemProvider=x,Xi}var ao,lo,ho,uo={};function co(){if(ao)return uo;ao=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.DefaultSummarizer=void 0;var t=d,e=function(e){function i(t){var i=e.call(this)||this;return i._rs=t,i}return t.__extends(i,e),i.prototype.getCount=function(t){return this._rs.getNumber(t)},i.prototype.getSum=function(t){return this._rs.getSum(t)},i.prototype.getMax=function(t){return this._rs.getMax(t)},i.prototype.getMin=function(t){return this._rs.getMin(t)},i.prototype.getAvg=function(t){return this._rs.getAvg(t)},i.prototype.getVar=function(t){return this._rs.getVar(t)},i.prototype.getVarp=function(t){return this._rs.getVarp(t)},i.prototype.getStdev=function(t){return this._rs.getStdev(t)},i.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},i.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},i.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},i}(G().Base);return uo.DefaultSummarizer=e,uo}function po(){if(lo)return qi;lo=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.TreeGridItemProvider=qi.TreeEditItem=void 0;var t=d,e=so(),i=di(),o=pi(),n=D(),r=co(),s=function(e){function i(t,i,o){var n=e.call(this,i&&i.row)||this;return n._values=[],n._changeValues=[],n._started=!1,n._checkDiff=!1,n._strictDiff=!1,n._invalidFields=[],n._rs=t,n._target=i,n._state=o,n}return t.__extends(i,e),i.prototype.dispose=function(){this._values=null,e.prototype.dispose.call(this)},_dp(i,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var n=e.getField(o),r=this._values[o],s=n.readValue(t[o]);this._values[o]=s,this._started&&parent&&!n.equalValues(r,s)&&this._rs._editItemCellUpdated(this,o,r,s)}}else this._values=[]}}),_dp(i,"invalidFields",{get:function(){return this._invalidFields}}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(n,e)&&this._rs._editItemCellUpdated(this,t,n,e)},_dp(i,"dataSource",{get:function(){return this._rs.dataSource}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"rowState",{get:function(){return this._target?this._target.rowState:n.RowState.NONE}}),_dp(i,"expanded",{get:function(){return!!this._target&&this._target.expanded}}),i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e);var r=!this._checkDiff;r||(r=this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)),r&&(this._values[t]=e,this._changeValues[t]=!0,this.parent&&(this._rs._editItemCellUpdated(this,t,n,e),this._rs._editItemCellEdited(this,t)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},i.prototype.isEdited=function(t){return this._changeValues[t]},_dp(i,"provider",{get:function(){return this._rs&&this._rs.source}}),i}(e.TreeItem);qi.TreeEditItem=s;var a=function(o){function n(t){var i=o.call(this,null,t)||this;return i._observers=[],i._appending=!1,i._insertAfter=!1,i._insertIndex=-1,i._rs=new e.TreeItemProvider,i.source=i._rs,i._summarizer=new r.DefaultSummarizer(i._rs),i}return t.__extends(n,o),n.prototype._doDispose=function(){this._rs=this._rs&&this._rs.dispose(),this._summarizer=null,o.prototype._doDispose.call(this)},_dp(n,"summarizer",{get:function(){return this._summarizer}}),n.prototype.getLevels=function(t){return this._rs.getLevels(t)},n.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},n.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},n.prototype.getSortFields=function(){return this._rs.getSortFields()},n.prototype.getSortDirections=function(){return this._rs.getSortDirections()},n.prototype.getSortCases=function(){return this._rs.getSortCases()},_dp(n,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t}}),n.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},n.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},n.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},n.prototype.beginFiltering=function(){this._rs.beginFiltering()},n.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},_dp(n,"includeParentItem",{set:function(t){this._rs.includeParentItem=t}}),n.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},n.prototype.collapse=function(t,e){this._rs.collapse(t,e)},n.prototype.expandAll=function(t){this._rs.expandAll(t)},n.prototype.collapseAll=function(){this._rs.collapseAll()},n.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},n.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},_dp(n,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(n,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),n.prototype.resetCheckables=function(){this._rs.resetCheckables()},n.prototype.applyCheckables=function(){this._rs.applyCheckables()},n.prototype.getAllItems=function(){return this._rs.getAllItems()},n.prototype.getItem=function(t){return this._rs.getItem(t)},n.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},n.prototype.findItem=function(t,e,i,o,n){return this._rs.findItem(t,e,i,o,n)},n.prototype.findCell=function(t,e,i,o,n,r){return this._rs.findCell(t,e,i,o,n,r)},n.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},n.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},n.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},n.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(n,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(n,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t}}),_dp(n,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(n,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(n,"itemCount",{get:function(){return this._rs.itemCount}}),_dp(n,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(n,"sorted",{get:function(){return this._rs.sorted}}),_dp(n,"movable",{get:function(){return this._rs.movable}}),n.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},n.prototype.canAppend=function(){return!1},n.prototype.canInsert=function(t){return!!t},n.prototype.canDelete=function(t){return!!t},n.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},n.prototype._doBeginUpdate=function(t){return this._editingItem=this._editItem=this._createEditItem(t,i.ItemState.UPDATING,null),this.$_replaceItem(t,this._editItem),this._editItem},n.prototype._doBeginAppend=function(t){return this._editingItem=this._editItem=this._createEditItem(null,i.ItemState.APPENDING,t),this._editItem},n.prototype._doBeginInsert=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),n)this._appending=!0,t.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,i.ItemState.INSERTING,e),this._rs.appendItem(t,this._editItem);else{var r=t.parent;this._appending=!1,this._insertAfter=o,this._insertIndex=r.indexOf(t),this._editingItem=this._editItem=this._createEditItem(t,i.ItemState.INSERTING,e),this._rs.insertItem(r,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},n.prototype._doCompleteUpdate=function(t){var e=!1;if(this.dataSource){this.$_replaceItem(this._editItem,t);var i=this._editItem.row;try{e=i.update(this._editItem.values,!1)}catch(e){throw this.$_replaceItem(t,this._editItem),e}e||this.$_replaceItem(t,this._editItem)}return e},n.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=this._editItem,o=!1;if(e){var n=i.parent,r=n.row,s=e.createRow(i.values,-1,!1),a=i.parent.indexOf(i);this._rs.removeItem(i);try{o=this.isAppending?r.addChild(s,!1):r.insertChild(a,s,!1)}catch(t){throw this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter),t}if(o){var l=n.itemOfRow(s.rowId);i.setCheckable(l.checkable),this._copyExtents(i,l),i.heights&&(l.heights=i.heights.slice())}else this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter)}return o},n.prototype._doCancelEdit=function(t,e){t==i.ItemState.UPDATING?(this.$_replaceItem(this._editItem,e),this._copyExtents(this._editItem,e)):t==i.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),o.prototype._doCancelEdit.call(this,t,e)},n.prototype._doCommitEdit=function(t,e){return t==i.ItemState.UPDATING||i.ItemState.INSERTING,o.prototype._doCommitEdit.call(this,t,e)},n.prototype.remove=function(t,e){if(t){var i=t.row;i&&i.parent.removeChild(i,e)}},n.prototype.getRemovableRows=function(t){if(t.length>0){for(var e=[],i=0,o=t.length;i<o;i++){var n=this._rs.getItem(t[i]);e.push(n.dataId)}return e}},n.prototype.removeRows=function(t,e){t&&this.dataSource.removeRows(t,e)},n.prototype.updateRows2=function(t){},n.prototype.setDataSource=function(t){this._rs.dataSource=t},_dp(n,"rootItem",{get:function(){return this._rs._rootItem}}),n.prototype._createEditItem=function(t,e,o){this._editingItem=null;var n=this.dataSource;if(!n)return null;var r,a=n.fieldCount;switch(e){case i.ItemState.UPDATING:r=this._editingItem=new s(this,t,e);for(var l=0;l<a;l++)r.setValue(l,t.getData(l));this._copyExtents(t,r),t.heights&&(r.heights=t.heights.slice());break;case i.ItemState.INSERTING:case i.ItemState.APPENDING:if((r=this._editingItem=new s(this,null,e))._setExtents(0),o)for(l=0;l<a;l++)o.length>l&&r.setValue(l,o[l])}return this._editingItem},n.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},n.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},n.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},n.prototype.onItemProviderFilterAdd=function(t,e,i){},n.prototype.onItemProviderFilterRemove=function(t,e,i){},n.prototype.onItemProviderFilterClear=function(t,e){},n.prototype.onItemProviderFilterClearAll=function(t){},n.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},n.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},n.prototype.onItemProviderSorted=function(t){this._fireSorted()},n.prototype.onTreeItemProviderItemChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.TreeItemProvider.ITEM_CHANGED,i)},n.prototype.onTreeItemProviderExpanding=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.TreeItemProvider.EXPANDING,i)},n.prototype.onTreeItemProviderExpanded=function(t,i){this._eventLock<=0&&this.fireEvent(e.TreeItemProvider.EXPANDED,i)},n.prototype.onTreeItemProviderCollapsing=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.TreeItemProvider.COLLAPSING,i)},n.prototype.onTreeItemProviderCollapsed=function(t,i){this._eventLock<=0&&this.fireEvent(e.TreeItemProvider.COLLAPSED,i)},n}(o.EditableItemProvider);return qi.TreeGridItemProvider=a,qi}function _o(){if(ho)return Yi;ho=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ValidationManager=Yi.DataCellValidationRuntime=Yi.DataRowValidationRuntime=Yi.EditValidationCollection=Yi.EditValidation=Yi.ValidationError=Yi.AbortError=void 0;var t=d,e=C(),i=G(),o=Y(),n=S(),r=di(),s=Do(),a=pi(),l=po(),h=function(e){function i(t){var o=e.call(this,t)||this;return Object.setPrototypeOf(o,i.prototype),o}return t.__extends(i,e),i}(Error);Yi.AbortError=h;var u=function(e){function i(t,o,n,r){var s=e.call(this,o)||this;return Object.setPrototypeOf(s,i.prototype),s.level=t,s.column=n,s.userMessage=r,s}return t.__extends(i,e),i.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},i}(h);Yi.ValidationError=u;var c=function(i){function n(t){var o=i.call(this)||this;return o._active=!0,o._mode=e.ValidationMode.ALWAYS,o._level=e.ValidationLevel.ERROR,o._name=t,o}return t.__extends(n,i),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"active",{get:function(){return this._active},set:function(t){this._active=t}}),_dp(n,"mode",{get:function(){return this._mode},set:function(t){this._mode=t}}),_dp(n,"level",{get:function(){return this._level},set:function(t){this._level=t}}),_dp(n,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?o.ExpressionParser.Default.parse(t,n.CAPITAL_INDEXERS):null)}}),_dp(n,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(n,"description",{get:function(){return this._description},set:function(t){this._description=t}}),n.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new u(this._level,e,null,this._message)}},n.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},n.CAPITAL_INDEXERS=["value","values"],n}(i.Base);Yi.EditValidation=c;var p=function(i){function o(t){var e=i.call(this)||this;return e._items=[],e._isColumn=t,e}return t.__extends(o,i),o.prototype._doDispose=function(){this._items=null,i.prototype._doDispose.call(this)},_dp(o,"count",{get:function(){return this._items.length}}),_dp(o,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)}}),o.prototype.clear=function(){this._items=[]},o.prototype.addAll=function(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},o.prototype.validate=function(t,i,o,n){for(var r=0;r<this._items.length;r++){var s=this._items[r];if(s.active&&(s.mode==t||s.mode==e.ValidationMode.ALWAYS))try{s.validate(i)}catch(t){if(!(o=o&&!this._isColumn)||(0,e.ValidationLevel_compare)(s.level,n)<0)throw t instanceof u?(t.level=s.level,t):new u(s.level,t)}}},o.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){n.Utils.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new c;o.assignFrom(t[e]),this._items.push(o)}}},o}(i.Base);Yi.EditValidationCollection=p;var _=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._dataSource=null,t._fieldCount=0,t}return t.__extends(i,e),i.prototype._doDispose=function(){this._item=null,this._dataSource=null,e.prototype._doDispose.call(this)},_dp(i,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0}}),i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){switch(t){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked}throw new o.ExpressionEvaluationError("Invalid identifier key: "+t)},i.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new o.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case i.ID_VALUE:case i.ID_VALUES:return this._item.getData(e)}throw new o.ExpressionEvaluationError("Invalid identifier indexer: "+t)},i.prototype.evaluateIndexerS=function(t,e,n){var r=n?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(r<0||r>=this._fieldCount)throw new o.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case i.ID_VALUE:case i.ID_VALUES:return this._item.getData(r)}throw new o.ExpressionEvaluationError("Invalid identifier indexer: "+t)},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES},i}(o.ExpressionRuntime);Yi.DataRowValidationRuntime=_;var f=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._index=null,this._dataSource=null,e.prototype._doDispose.call(this)},i.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){switch(t){case i.ID_VALUE:return this._value;case i.ID_ROW:return this._index.itemIndex;case i.ID_DATAROW:return this._index.item.dataRow;case i.ID_INDEX:return this._index.column.index;case i.ID_FIELD:return this._index.dataColumn.dataIndex;case i.ID_CHECKED:var e=this._index.item;return!!e&&e.checked;case i.ID_TAG:return this._index.column.tag;case i.ID_BASE:var n=this._index.dataColumn.baseIndex;return n>=0?this._index.item.getData(n):void 0}throw new o.ExpressionEvaluationError("Invalid identifier key: "+t)},i.prototype.evaluateIndexerI=function(t,e){var n=this._dataSource.fieldCount;if(e<0||e>=n)throw new o.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case i.ID_VALUE:case i.ID_VALUES:return this._index.item.getData(e)}throw new o.ExpressionEvaluationError("Invalid identifier indexer: "+t)},i.prototype.evaluateIndexerS=function(t,e,n){var r=n?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e),s=this._dataSource.fieldCount;if(r<0||r>=s)throw new o.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case i.ID_VALUE:case i.ID_VALUES:return this._index.item.getData(r)}throw new o.ExpressionEvaluationError("Invalid identifier indexer: "+t)},i.ID_VALUE=0,i.ID_ROW=1,i.ID_DATAROW=2,i.ID_INDEX=3,i.ID_FIELD=4,i.ID_CHECKED=5,i.ID_TAG=6,i.ID_BASE=7,i.ID_VALUES=8,i.IDENTS={value:i.ID_VALUE,row:i.ID_ROW,datarow:i.ID_DATAROW,index:i.ID_INDEX,field:i.ID_FIELD,checked:i.ID_CHECKED,tag:i.ID_TAG,base:i.ID_BASE,values:i.ID_VALUES},i}(o.ExpressionRuntime);Yi.DataCellValidationRuntime=f;var g=function(i){function o(t){var e=i.call(this)||this;return e._cellList={},e._owner=t,e}return t.__extends(o,i),_dp(o,"owner",{get:function(){return this._owner}}),_dp(o,"cellList",{get:function(){return this._cellList}}),o.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},o.prototype.validateRow=function(t,i,o,n){var r=this._owner.editOptions.commitLevel;if(!o)for(var a=this._owner.getDataColumns(),l=0,h=a.length;l<h;l++){var d=a[l],c=s.CellIndex.temp(this._owner,t.index,d);try{this.$_validateCell(c,i,!0,r,n)}catch(t){if(!(t instanceof u))throw t;if((0,e.ValidationLevel_compare)(t.level,r)<0)throw t;!n&&this.addInvalidateCell(c,t)}}var p=this._owner.validations;if(p&&p.count>0){var _=this._owner.rowValidationRuntime;_.item=t,p.validate(i?e.ValidationMode.INSERT:e.ValidationMode.UPDATE,_,!0,r)}this.owner._fireValidateRow(t,i,t.getRowObject())},o.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},o.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},o.prototype.getError=function(t){return t.item?(this._cellList[(0,r.ItemState_isEditing)(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},o.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},o.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},o.prototype.getInvalidCells=function(t){var e,i=[],o=this._cellList;if(null!=t){var r=this._owner.dataSource.getRowId(t);if(null==r)return null;(e={})[r]=this._cellList[r],o=e}for(var s in o){var a=o[s];for(var l in a){var h=a[l];i.push(n.Utils.deepCopy(h))}}return i.length>0?i:null},o.prototype.validateCells=function(t,i,o){var r=this._owner,a=r.getDataColumns(),l=[];if(t=n.Utils.makeArray(t))for(var h=0,u=t.length;h<u;h++){(c=r.getItem(t[h]))&&c.isDataRow&&(delete this._cellList[c.dataId],l.push(c))}else{if(i)for(h=0,u=r.itemCount;h<u;h++){(c=r.getItem(h))&&c.isDataRow&&(delete this._cellList[c.dataId],l.push(c))}else l=!r.isTree()&&r.paged&&o?r.itemSource.getPagingAllItems():r.getAllItems();this._cellList={}}h=0;for(var d=l.length;h<d;h++){var c;if((c=l[h]).isDataRow){var p=0;for(u=a.length;p<u;p++){var _=a[p],f=s.DummyCellIndex.tempItem(r,c,_);try{this.$_validateCell(f,!1,!1,e.ValidationLevel.IGNORE,!1)}catch(t){n.Utils.log("validateCells valiation fail add")}}}}return r.refreshView(),this.getInvalidCells()},o.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},o.prototype.checkRowIds=function(){var t=this.owner.dataSource;for(var e in this._cellList){var i=parseInt(e);-1!==i&&t.getDataRow(i)<0&&delete this._cellList[i]}},o.prototype.$_validateCell=function(t,i,o,n,r){var s=t.dataColumn;if(s){var h=this.owner.editOptions.validateOnlyEditColumn,d=!0;if((t.item instanceof a.EditItem||t.item instanceof l.TreeEditItem)&&(d=t.item.isEdited(s.dataIndex)),!h||d||s.required)try{var c=t.item.getData(s.dataIndex);if(s.required){var p=s.grid,_=p&&p.dataSource&&p.dataSource.getField(s.dataIndex);if(_&&_.isEmpty(c)){var f=s.requiredMessage||"Value is required: "+s.fieldName;throw new u(s.requiredLevel||e.ValidationLevel.ERROR,f,s,s.requiredMessage)}}var g=s.validations;if(g&&g.count>0){var m=this._owner.columnValidationRuntime;m.setIndex(t),g.validate(i?e.ValidationMode.INSERT:e.ValidationMode.UPDATE,m,o,n)}this.owner._fireValidateCell(t,i,t.item.getData(t.dataField)),!r&&this.$_clearInvalidateCell(t)}catch(e){throw e instanceof u&&(e.column=s,!r&&this.$_addInvalidateCell(t,e)),e}}},o.prototype.$_addInvalidateCell=function(t,e){var i=(0,r.ItemState_isEditing)(t.item.itemState)?-1:t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var n=this._cellList;(n[i]=n[i]||{})[o]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name,fieldName:t.dataColumn.fieldName}}},o.prototype.$_clearInvalidateCell=function(t){var e=(0,r.ItemState_isEditing)(t.item.itemState)?-1:t.dataId,i=t.dataField,o=this._cellList[e];o&&o[i]&&delete o[i]},o.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()},o}(i.Base);return Yi.ValidationManager=g,Yi}var fo,go={};function mo(){if(fo)return go;fo=1,Object.defineProperty(go,"__esModule",{value:!0}),go.TextFormatter=void 0;var t=S(),e=/(.*)/,i="$1",o=function(){function o(t){this._pattern=e,this._replace=i,this.$_parse(this._format=t)}return o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},_dp(o,"format",{get:function(){return this._format}}),o.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},o.prototype.$_parse=function(e){if(e){var i=e.trim().split(t.Utils.colonreg);if(i.length>1){var o=i[0].trim(),n=i[1].trim();o&&n&&('"'==o.charAt(0)&&(o=o.substr(1,o.length-2)),o&&('"'==n.charAt(0)&&(n=o.substr(1,n.length-2)),n&&(this._pattern=new RegExp(o,i[2]||""),this._replace=n)))}}},o.Formatters={},o}();return go.TextFormatter=o,go}var yo,vo,Co={};function wo(){if(yo)return Co;yo=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ColumnMergeManager=Co.ColumnMergeRoom=Co.GridMergeRoom=Co.ColumnMergeRule=Co.RowGroupMergeRule=Co.GridMergeRule=void 0;var t=d,e=G(),i=di(),o=S(),n=Y(),r=xo(),s=Do(),a=pi(),l=to(),h=C(),u=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._changed=function(){},i.INIT_COUNT=200,i}(e.Base);Co.GridMergeRule=u;var c=function(e){function n(){var t=e.call(this)||this;return t._level=0,t._mergeMode=!1,t}return t.__extends(n,e),n.getDefault=function(t,e){var i=n.$_default;return i._level=t,i._mergeMode=e,i},n.prototype.parseInit=function(t,e,i,o,n){var r=t.itemCount;(o=Math.min(r-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,n):this.$_parseNormal(t,e,i,o,n))},n.prototype.parseBounds=function(t,e,i,o,n){if(!(t.itemCount<1)){for(i=Math.max(0,i);i>=0&&n[i]<=0;){var r=t.getItem(i);if(r==this.$_getAncestor(r,this._level))break;i--}for(;i<=o&&n[i]>0;)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,n):this.$_parseNormalBounds(t,e,i,o,n))}},n.prototype.$_getAncestor=function(t,e){var n=o.Utils.cast(t,i.GroupItem);for(n||(n=t.parent);n.level>e;)n=n.parent;return n},n.prototype.$_parseNormal=function(t,e,o,n,r){var s=t.itemCount;if(!(s<1)){var a=t.fixedCount,l=t.getItem(o),h=l,u=o,d=u+1;for(r[u]=u+1;d<s;)l=t.getItem(d),(d==a||l.level!=h.level||l.constructor!==h.constructor||l instanceof i.GroupFooter||l instanceof i.GroupItemImpl)&&(u=d),r[d]=u+1,d++,h=l}},n.prototype.$_parseMerged=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=n[l]=l+1;h<r;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>=o)break;a=u,l=h}n[h]=l+1,h++}},n.prototype.$_parseNormalBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,u=h+1;for(n[h]=h+1;u<r;)a=t.getItem(u),u!=s&&a.level==l.level&&a.constructor===l.constructor||(h=u),n[u]=h+1,u++,l=a}},n.prototype.$_parseMergedBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=l+1;for(n[l]=l+1;h<r;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>o)break;a=u,l=h}n[h]=l+1,h++}}},n.$_default=new n,n}(u);Co.RowGroupMergeRule=c;var p=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}return t.__extends(i,e),i.getObjectText=function(t,e,i,o){var n=e.objectKey||e.objectCallback,r=n?e.objectKey:i.objectKey,s=n?e.objectCallback:i.objectCallback;return s&&"function"==typeof s?s(i.orgFieldName,t.dataRow,o):r&&o.hasOwnProperty(r)?o[r]:JSON.stringify(o)},i.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},i.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},i.prototype.setItem=function(t,e){this._item=t,this._field=e},i.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){if(this._item){var e=void 0;switch(t){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_GROUP:return this._item.parent;case i.ID_VALUE:var o=this._ds.getField(this._field);return null!=(e=this._item.getData(this._field))&&o.dataType===h.ValueType.OBJECT?i.getObjectText(this._item,this._column,o,e):e;case i.ID_PREV_VALUES:var r=this._grid.getDataColumns(),s=r.indexOf(this._column);if(!r.length||s<1)return"";for(var a=[],l=0,u=Math.min(s,r.length);l<u;l++)null!=(e=this._item.getData(r[l].dataIndex))&&this._ds.getField(r[l].dataIndex).dataType===h.ValueType.OBJECT?a.push(i.getObjectText(this._item,r[l],r[l].getField(),e)):a.push(e);return a.join("`")}throw new n.ExpressionEvaluationError("Invalid identifier key: "+t)}},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new n.ExpressionEvaluationError("Data field index out of bounds:"+e);var o=this._item.getData(e);if(null!=o&&this._ds.getField(e).dataType===h.ValueType.OBJECT){var r=this._column.grid.columnByField(e);return i.getObjectText(this._item,r,r.getField(),o)}return o}throw new n.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new n.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(r<0||r>=this._fieldCount)throw new n.ExpressionEvaluationError("Data field is not exists:"+e);var s=this._item.getData(r);if(null!=s&&this._ds.getField(r).dataType===h.ValueType.OBJECT){var a=this._column.grid.columnByField(r);return i.getObjectText(this._item,a,a.getField(),s)}return s}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(n.ExpressionRuntime),_={},f=function(e){function o(t){var i=e.call(this)||this;return i._runtime=o.$_runtime=o.$_runtime||new p,i.criteria=t,i}return t.__extends(o,e),o.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new o(e):null},o.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,e.prototype._doDispose.call(this)},_dp(o,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?n.ExpressionParser.Default.parse(t,null):null,this._changed())}}),o.prototype.parseInit=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout);for(var u=null,d=i;d<a&&(u=t.getItem(d),!this.$_isRow(u,false));)n[d]=d+1,d++;if(!(d>=a)){var c,p=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==h.ValueType.OBJECT,f=i=d;if(n[f]=f+1,!(u.dataRow>=l))for(p?c=u.getData(e):(this._runtime.setItem(u,e),c=this._exprNode.evaluate(this._runtime)),d=i+1;d<a;d++)if(u=t.getItem(d),this.$_isRow(u,false)){if(u.dataRow>=l)break;var g=void 0;if(p?g=u.getData(e):(this._runtime.setItem(u,e),g=this._exprNode.evaluate(this._runtime)),d==s||null==g&&r||(g instanceof Date&&c instanceof Date?+g!=+c:g!=c)){if(d>=o)break;f=d,c=g}n[d]=f+1}else{if(d>=o)break;c=_,f=d,n[d]=f+1}}}},o.prototype.parseBounds=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=!1,a=t.itemCount;if(!(a<1)){var l=t.fixedCount,u=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==h.ValueType.OBJECT,d=_,c=Math.max(0,i),p=c,f=-1;if(this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout),c>0&&n[c]<=0){var g=t.getItem(c);if(this.$_isRow(g,s)){var m=void 0;for(u?m=t.getItem(c).getData(e):(this._runtime.setItem(g,e),m=this._exprNode.evaluate(this._runtime)),c--;c>=0&&(g=t.getItem(c),this.$_isRow(g,s))&&(u?d=g.getData(e):(this._runtime.setItem(g,e),d=this._exprNode.evaluate(this._runtime)),!(c==l||null==d&&r||(d instanceof Date&&m instanceof Date?+d!=+m:d!=m)));)c--;for(var y=p-1;y>c;y--)n[y]=c+2;p-1>c&&(f=c+1)}else{n[c]=c+1;for(y=p-1;y>c;y--)n[y]=c+2;for(p-1>c+1&&(f=c+2),c--;c>=0&&n[c]<=0&&!this.$_isRow(t.getItem(c),s);)n[c]=c+1,c--}}for(c=Math.max(0,i);c<=o&&n[c]>0;)c++;for(;c<=o&&!this.$_isRow(t.getItem(c),s);)n[c]=c+1,c++;if(c<o){p=c;g=t.getItem(c),m=void 0;for(u?m=g.getData(e):(this._runtime.setItem(g,e),m=this._exprNode.evaluate(this._runtime)),c++;c<a;)if(g=t.getItem(c),this.$_isRow(g,s)){if(u?d=g.getData(e):(this._runtime.setItem(g,e),d=this._exprNode.evaluate(this._runtime)),c==l||void 0===d&&r||(d instanceof Date&&m instanceof Date?+d!=+m:d!=m)){var v=p;f>=0&&(v=f,f=-1);for(y=p;y<c;y++)n[y]=v+1;if(c>=o)break;m=d,p=c}else n[c]=p+1;c++}else{v=p;f>=0&&(v=f,f=-1);for(y=p;y<c;y++)n[y]=v+1;for(n[c]=c+1,c++;c<a&&!this.$_isRow(t.getItem(c),s);)n[c]=c+1,c++;if(p=c,c>=o)break}if(c==a&&(d instanceof Date&&m instanceof Date?+d==+m:d==m))for(v=f>=0?f:p,y=p;y<c;y++)n[y]=v+1}}},o.prototype.$_isRow=function(t,e){var o=t instanceof i.GridRow&&!(t instanceof a.DummyEditItem);if(o&&!e){var n=t.parent;o=n.expanded||n.firstItem!==t}return o},o.$_runtime=null,o}(u);Co.ColumnMergeRule=f;var g=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),_dp(i,"head",{get:function(){return-1}}),_dp(i,"tail",{get:function(){return-1}}),i}(e.Base);Co.GridMergeRoom=g;var m=function(e){function i(t){var i=e.call(this)||this;return i._group=null,i._column=t.c1._columnObj,i._head=t.top,i._tail=t.bottom,i}return t.__extends(i,e),i.borrow=function(t){var e=i.$_rooms.pop();return e?(e._head=t.top,e._tail=t.bottom):e=new i(t),e},i.returnTo=function(t){if(t){var e=i.$_rooms;e.indexOf(t)<0&&e.push(t)}},_dp(i,"column",{get:function(){return this._column}}),_dp(i,"head",{get:function(){return this._head}}),_dp(i,"tail",{get:function(){return this._tail}}),_dp(i,"scope",{get:function(){return this._column}}),_dp(i,"group",{get:function(){return this._group},set:function(t){this._group=t}}),i.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},i.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},i.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},i.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},i.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},i.$_rooms=new Array,i.$_roomCount=0,i}(g);Co.ColumnMergeRoom=m;var y=-1,v=65535,w=function(e){function o(t){var i=e.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._layout=t,t._merges=i,i}return t.__extends(o,e),o.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,e.prototype._doDispose.call(this)},_dp(o,"count",{get:function(){return this._rooms.length}}),o.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},o.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,n=this._layout.firstColumn,r=e.getGroupLevel(n.dataIndex),s=e.isGroupedColumn(n)&&n.mergeGrouped?c.getDefault(r,i.mergeMode):this._layout.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(o.itemCount),l=e.fixedOptions.mergeRows?0:o.fixedCount,h=o.itemCount;h--;)a[h]=0;s._layout=this._layout,s.parseInit(o,n.dataIndex,l,t,a)}this._inited=!0}},o.prototype.refreshRooms=function(t,e,o){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var n=this._layout.grid,r=this._layout.firstColumn;if(n&&r){var s=this._rooms,a=n.layoutManager.fixedItemCount,h=n.itemSource,u=n.getGroupLevel(r.dataIndex),d=u>0&&r.mergeGrouped?c.getDefault(u,n.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),p=n.displayOptions.editItemMerging,_=0;if(this._fixedRooms.length=0,this._rooms.length=0,d&&(d._layout=this._layout,d.parseBounds(h,r.dataIndex,t,e,this._flags)),o)for(;_<a;){if(g=this.$_checkFixedMerge(h,r,_,a)){if(u<1){var f=new m(g);this._fixedRooms.push(f)}_=g.r2+1}else _+=1}for(_=t;_<=e;){var g;if(g=this.$_checkMerge(h,r,_,0==s.length,a)){var y;if(u<1)if((y=h.getItem(g.r2))instanceof l.MergedGroupHeader||y instanceof l.MergedGroupFooter);else{f=new m(g);this._rooms.push(f)}else if((y=p?h.source.getItem(g.top):h.getItem(g.top)).level>=u){for(var v=y instanceof i.GroupItem?y:y.parent;v.level>u;)v=v.parent;(f=new m(g)).group=v,s.push(f)}_=g.r2+1}else _+=1}}}},o.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},o.prototype.getRooms=function(){return this._rooms.slice()},o.prototype.scroll=function(t){},o.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},o.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=y;for(;i.length<t;)i.push(y)}var n=this._cells;for(o=0;o<n.length;o++)n[o]=y;for(;n.length<e;)n.push(y)},o.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){n=i[o];var r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},o.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+v;return i[t]=o,o},o.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+v;return i[t]=o,o},o.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>y:this._cells[t-e]>y},o.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>y&&this._fixedCells[t]<v:(t-=e,this._cells[t]>y&&this._cells[t]<v)},o.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=v:this._cells[t-e]>=v},o.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(r=this._fixedCells)[t],n=t+1;n<r.length&&r[n]-v==o;n++,i++);else{t-=e;var r;for(o=(r=this._cells)[t],n=t+1;n<r.length&&r[n]-v==o;n++,i++);}return i},o.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<n.length&&n[h]-v==r;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},o.prototype.$_checkFixedMerge=function(t,e,o,n){if(n>0){var r=e.grid,a=r.displayOptions,l=e.mergeEdit&&r.editOptions.commitByCell||a.editItemMerging,h=o,u=this._flags[h],d=t.getItem(h);if(u<=0||(0,i.ItemState_isEditing)(d.itemState)&&!l)return null;for(;h&&!(this._flags[h-1]<u||(0,i.ItemState_isEditing)(t.getItem(h-1).itemState));)h--;for(var c=o+1;c<=n;){var p=(0,i.ItemState_isEditing)(t.getItem(c).itemState);if(c==n||this._flags[c]>u||p&&!l)return c>h+1||p?s.CellRange.createRange(h,e.layout,c-1,e.layout):null;c++}}return null},o.prototype.$_checkMerge=function(t,e,o,n,a){if(o>=0){var h=e.grid,u=h.displayOptions,d=e.mergeEdit&&h.editOptions.commitByCell&&h.isEditing()&&h.isItemEditing()||u.editItemMerging,c=o,p=this._flags[c],_=t.getItem(c);if(p<=0||(0,i.ItemState_isEditing)(_.itemState)&&!d)return null;if(n)for(;c>a&&!(this._flags[c-1]<p||(0,i.ItemState_isEditing)(t.getItem(c-1).itemState));)c--;for(var f=t.itemCount,g=o+1;g<f;){var m=(0,i.ItemState_isEditing)(t.getItem(g).itemState);if(this._flags[g]>p||this._flags[g]<=0||m&&!d){if(g>c+1)return s.CellRange.createRange(c,e.layout,g-1,e.layout);var y=e instanceof r.DataColumn?e.groupLevel:-1;return(_=t.getItem(c))instanceof l.MergedGroupHeader&&_.collapsed||_ instanceof l.MergedGroupFooter&&_.parent.level==y&&(g==o+1||_.parent.collapsed)||(_ instanceof l.MergedGroupHeader||_ instanceof l.MergedGroupFooter)&&_.parent.level>y?s.CellRange.createRange(c,e.layout,g-1,e.layout):null}g++}if(g>c){if(g>c+1)return s.CellRange.createRange(c,e.layout,g-1,e.layout);y=e instanceof r.DataColumn?e.groupLevel:-1;return(_=t.getItem(c))instanceof l.MergedGroupHeader&&_.collapsed||_ instanceof l.MergedGroupFooter&&_.parent.level==y&&(g==o+1||_.parent.collapsed)||(_ instanceof l.MergedGroupHeader||_ instanceof l.MergedGroupFooter)&&_.parent.level>y?s.CellRange.createRange(c,e.layout,g-1,e.layout):null}}return null},o.MERGE_ROOMS="mergeRooms",o}(e.Base);return Co.ColumnMergeManager=w,Co}function xo(){if(vo)return gi;vo=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.ColumnLayoutCollection=gi.SeriesColumn=gi.DataColumn=gi.ValueColumn=gi.GridColumn=gi.ColumnStyle=gi.ColumnFooterCollection=gi.ColumnFooter=gi.ColumnHeader=gi.ColumnHeaderSummaryCollection=gi.ColumnHeaderSummary=gi.ColumnSummary=gi.ColumnSummaryStyle=gi.ColumnObject=void 0;var t=d,e=G(),i=S(),o=yi(),n=rt(),r=pt(),s=lt(),a=wi(),l=Ii(),h=Y(),u=C(),c=ji(),p=_o(),_=mo(),f=wo(),g=function(e){function o(t){var i=e.call(this,null)||this;return i._column=t,i}return t.__extends(o,e),o.prototype._doDispose=function(){this._column=null,this._template=null,e.prototype._doDispose.call(this)},_dp(o,"column",{get:function(){return this._column}}),_dp(o,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new c.HtmlTemplateParser),this._template.template=t):this._template=void 0,this._changed())}}),_dp(o,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?i.Utils.extendObj(t,this._values={}):this._values=void 0,this._changed())}}),_dp(o,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(o,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),o.prototype.getValue=function(t){return this._values&&this._values[t]},o.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},o}(l.GridObject);gi.ColumnObject=g;var m=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)for(var e=0,o=Object.keys(t);e<o.length;e++){var n=o[e];this[n]=i.Utils.deepCopy(t[n])}return this},t}();gi.ColumnSummaryStyle=m;var y=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"summaryIndex",{get:function(){var t=this.$_owner;return t?t.getIndex(this):-1}}),_dp(i,"index",{get:function(){return this.summaryIndex}}),_dp(i,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(i,"expression",{get:function(){return this._expression},set:function(t){t&&(t=t.trim()),t!=this._expression&&(this._expression=t,this._exprNode=t?h.ExpressionParser.Default.parse(t):void 0,this._changed())}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(i,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(i,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(i,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),_dp(i,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?r.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?n.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(i,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?s.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?_.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(i,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(i,"textFormatter",{get:function(){return this._textFormatter}}),_dp(i,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(i,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(i,"boolFormatter",{get:function(){return this._boolFormatter}}),_dp(i,"value",{get:function(){return this._value}}),i.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},i.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e,this._templateCallback):void 0},i.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e,this._templateCallback):void 0},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},i.prototype._doChanged=function(){},i}(g);gi.ColumnSummary=y;var v=function(e){function o(t,i){var o=e.call(this)||this;return o._items=[],o._column=t,o._type=i,o._items.push(o.$_createSummary()),o}return t.__extends(o,e),o.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach((function(t){t.dispose()})),this._items=null,e.prototype._doDispose.call(this)},_dp(o,"column",{get:function(){return this._column}}),_dp(o,"count",{get:function(){return this._items.length}}),_dp(o,"type",{get:function(){return this._type}}),o.prototype.get=function(t){return t>=0&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},o.prototype.getIndex=function(t){return this._items.indexOf(t)},o.prototype.assignFrom=function(t){var e=t&&t.items?i.Utils.makeArray(t.items,!0):i.Utils.makeArray(t,!0),o=this._items;if(i.Utils.isArray(e)){for(var n=Math.max(e.length,1),r=0;r<n;r++)o[r]||(o[r]=this.$_createSummary()),o[r].assignFrom(e[r]);this._items.length=n}},o}(e.Base),w=function(e){function i(t){var i=e.call(this,t.column)||this;return i.$_owner=t,i}return t.__extends(i,e),i.prototype._doChanged=function(){this.column._headerSummaryChanged()},i}(y);gi.ColumnHeaderSummary=w;var x=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype.$_createSummary=function(){return new w(this)},i}(v);gi.ColumnHeaderSummaryCollection=x;var b=function(e){function i(t){var i=e.call(this,t)||this;return i._checkLocation=u.ColumnHeaderItemLocation.NONE,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(i,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(i,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(i,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())}}),_dp(i,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),_dp(i,"displayText",{get:function(){var t=this.column,e=this._text;if(!e&&t instanceof k){var i=t.getField();e=i?i.header||i.orgFieldName:t.fieldName}return e||(e=t.name),e}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())}}),_dp(i,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)}}),_dp(i,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),i.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,this.templateCallback,this.column.grid):void 0},i.prototype._doChanged=function(){this.column&&this.column._headerChanged()},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},i}(g);gi.ColumnHeader=b;var I=function(e){function i(t){var i=e.call(this,t.column)||this;return i.$_owner=t,i}return t.__extends(i,e),i.prototype._doChanged=function(){this.column._footerChanged()},i}(y);gi.ColumnFooter=I;var E=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype.$_createSummary=function(){return new I(this)},i}(v);gi.ColumnFooterCollection=E;var R=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)if(t instanceof T)for(var e=0,o=Object.keys(this);e<o.length;e++){(s=o[e])in t&&(this[s]=i.Utils.deepCopy(t[s]))}else for(var n=0,r=Object.keys(t);n<r.length;n++){var s;"readonly"===(s=r[n]).toLowerCase()?this.readOnly=t[s]:this.hasOwnProperty(s)&&(this[s]=i.Utils.deepCopy(t[s]))}return this},t.prototype.toFormatter=function(t){var e;return t||(t={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0}),(e=this.textFormat)&&(t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=_.TextFormatter.getFormatter(e))),(e=this.numberFormat)&&(t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=r.DecimalFormatter.getFormatter(e))),(e=this.datetimeFormat)&&(t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=n.DateTimeWriter.getFormatter(e))),(e=this.booleanFormat)&&(t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=s.BooleanFormatter.getFormatter(e))),(e=this.prefix)&&(t.prefix&&t.prefix==e||(t.prefix=e)),(e=this.suffix)&&(t.suffix&&t.suffix==e||(t.suffix=e)),t},t}();gi.ColumnStyle=R;var T=function(e){function i(t){var i=e.call(this)||this;return i._visible=!0,i._resizable=!0,i._movable=!0,i._checked=!1,i._fillWidth=NaN,i._dirty=!1,i._index=-1,i._states={},i._header=new b(i),i._footers=new E(i,"footer"),i._headerSummaries=new x(i,"summary"),i._groupFooters=new E(i,"groupFooter"),t&&i.assignFrom(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),e.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())}}),i.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},_dp(i,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))}}),_dp(i,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}}}),_dp(i,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())}}),_dp(i,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(i,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(i,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())}}),_dp(i,"header",{get:function(){return this._header}}),i.prototype.setHeader=function(t){this._header.assignFrom(t)},_dp(i,"footers",{get:function(){return this._footers}}),i.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},_dp(i,"footer",{get:function(){return this._footers.get(0)}}),i.prototype.setFooter=function(t){this.setFooters(t)},_dp(i,"headerSummaries",{get:function(){return this._headerSummaries}}),i.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},_dp(i,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),i.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},_dp(i,"groupFooters",{get:function(){return this._groupFooters}}),i.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},_dp(i,"groupFooter",{get:function(){return this._groupFooters.get(0)}}),i.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},_dp(i,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0}}),_dp(i,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(i,"index",{get:function(){return this._index}}),_dp(i,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index}}),_dp(i,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width}}),_dp(i,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1}}),_dp(i,"dataRoot",{get:function(){return this}}),_dp(i,"layout",{get:function(){return this._layout}}),i.prototype.clean=function(){this._dirty=!1},i.prototype.isWritable=function(){return!1},i.prototype.stateFor=function(t){return this._states[t]},i.prototype.setState=function(t,e){this._states[t]=e},i.prototype.getFooter=function(t){return this._footers.get(t)},i.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),this._header.assignFrom(t.header),this._footers.assignFrom(t.footers||t.footer),this._headerSummaries.assignFrom(t.summaries||t.summary||t.headerSummaries||t.headerSummary),this._groupFooters.assignFrom(t.groupFooters||t.groupFooter)},i.prototype.toString=function(){return this.displayText},i.prototype._prepareLayout=function(t,e){},i.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},i.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},i.prototype.$_setIndex=function(t){this._index=t},i.prototype._headerChanged=function(){this._changed()},i.prototype._headerSummaryChanged=function(){this._changed()},i.prototype._footerChanged=function(){this._changed()},i.prototype._resetIndices=function(t){},i.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},i.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},i}(e.Base);gi.GridColumn=T;var D=function(e){function i(t){var i=e.call(this,t)||this;return i._blankWhenCopy=!1,i._blankWhenExport=!1,i._ignoreDefaultDynamicStyles=!1,i._textInputCase=u.TextInputCase.NORMAL,i._button=u.CellButton.NONE,i._buttonVisibility=u.ButtonVisibility.DEFAULT,i._editButtonVisibility=u.ButtonVisibility.DEFAULT,i._displayMinusZero=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,e.prototype._doDispose.call(this)},_dp(i,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?r.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())}}),_dp(i,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?n.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(i,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?s.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?_.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(i,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(i,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(i,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())}}),_dp(i,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())}}),_dp(i,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())}}),_dp(i,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(i,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)}}),_dp(i,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(i,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()}}),_dp(i,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()}}),_dp(i,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())}}),_dp(i,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())}}),_dp(i,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed()}}),_dp(i,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())}}),_dp(i,"textFormatter",{get:function(){return this._textFormatter}}),_dp(i,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(i,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(i,"boolFormatter",{get:function(){return this._boolFormatter}}),_dp(i,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(i,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),_dp(i,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),i.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},i.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i}(T);gi.ValueColumn=D;var k=function(e){function n(t){var i=e.call(this)||this;return i._fieldIndex=-1,i._readOnly=!1,i._valueSeparator=",",i._breakMergeOnEmpty=!1,i._equalBlank=!1,i._equalBlankText="",i._values=null,i._labels=null,i._lookupDisplay=!1,i._lookupSource=null,i._lookupKeyFields=null,i._lookupKeyFieldIds=null,i._mergeGrouped=!1,i._sortable=!0,i._sortOrder=-1,i._sortByLabel=!1,i._filterable=!0,i._filterIconVisible=!0,i._autoFilter=!1,i._filterSelectorWidth=0,i._lookupData=null,i._required=!1,i._requiredLevel=u.ValidationLevel.ERROR,i._validations=new p.EditValidationCollection(!0),i._groupable=!0,i._dataIndex=-1,i._baseIndex=-1,i._valueType=u.ValueType.TEXT,i._groupLevel=-1,i._labelFieldIndex=-1,i._filters=new a.ColumnFilterCollection(i),i._filters.addListener(i),i._autoFilters=new a.ColumnFilterCollection(i),i._autoFilters.addListener(i),i._inlineFilters=new a.ColumnFilterCollection(i),i._inlineFilters.addListener(i),t&&i.assignFrom(t),i}return t.__extends(n,e),n.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),e.prototype._doDispose.call(this)},_dp(n,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())}}),_dp(n,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())}}),_dp(n,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())}}),_dp(n,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())}}),_dp(n,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())}}),_dp(n,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())}}),_dp(n,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t}}),_dp(n,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())}}),_dp(n,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?f.ColumnMergeRule.createRule(t):null;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}}}),_dp(n,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}}}),_dp(n,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())}}),_dp(n,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?h.ExpressionParser.Default.parse(t,null):void 0,this._layoutChanged())}}),_dp(n,"equalBlankText",{get:function(){return this._equalBlankText},set:function(t){t!=this._equalBlankText&&(this._equalBlankText=t,this._layoutChanged())}}),_dp(n,"equalBlankLine",{get:function(){return this._equalBlankLine},set:function(t){t!=this._equalBlankLine&&(this._equalBlankLine=t,this._layoutChanged())}}),_dp(n,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(t){t!=this._mergeEdit&&(this._mergeEdit=t)}}),_dp(n,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())}}),_dp(n,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&(this._excelFormulaStatement=t,t?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new o.ExpressionStatement(t):this._excelFormulaExprStatement=null,this._changed())}}),_dp(n,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement}}),_dp(n,"dataIndex",{get:function(){return this._dataIndex}}),_dp(n,"baseIndex",{get:function(){return this._baseIndex}}),_dp(n,"valueType",{get:function(){return this._valueType}}),_dp(n,"groupLevel",{get:function(){return this._groupLevel}}),_dp(n,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map((function(t,e){return null!=t?String(t):t})):[],this._lookupMap=null,this._changed())}}),_dp(n,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())}}),_dp(n,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())}}),_dp(n,"lookupSource",{get:function(){return this._lookupSource}}),_dp(n,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(n,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=i.Utils.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(n,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds}}),_dp(n,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())}}),_dp(n,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())}}),_dp(n,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())}}),_dp(n,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())}}),_dp(n,"labelFieldIndex",{get:function(){return this._labelFieldIndex}}),_dp(n,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()}}),_dp(n,"mergeGrouped",{get:function(){return this._mergeGrouped}}),_dp(n,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())}}),_dp(n,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t}}),_dp(n,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t}}),_dp(n,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())}}),_dp(n,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())}}),_dp(n,"filterIconVisible",{get:function(){return this._filterIconVisible},set:function(t){this._filterIconVisible!=t&&(this._filterIconVisible=t,this._changed())}}),_dp(n,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(this._autoFilter=t,!t&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())}}),_dp(n,"filters",{get:function(){return this._filters},set:function(t){t instanceof a.ColumnFilterCollection||this.setFilters(t)}}),_dp(n,"autoFilters",{get:function(){return this._autoFilters}}),_dp(n,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(t){t!==this._showInlineFilter&&(this._showInlineFilter=t,this._changed())}}),_dp(n,"filterSelectorWidth",{get:function(){return this._filterSelectorWidth},set:function(t){this._filterSelectorWidth=t}}),_dp(n,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())}}),_dp(n,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())}}),_dp(n,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())}}),_dp(n,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(n,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)}}),_dp(n,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())}}),_dp(n,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()}}),_dp(n,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index}}),_dp(n,"lookupData",{get:function(){return this._lookupData},set:function(t){if(t!==this._lookupData){var e=void 0,o=void 0,n=void 0,r=void 0,s={};if(this._lookupData=i.Utils.deepCopy(t),t){i.Utils.isArray(t)?s.list=t:s=t,this._labels=[],this._values=[],this._lookupMap=null,e=s.hasOwnProperty("value")?s.value:"value",o=s.hasOwnProperty("label")?s.label:"label";for(var a=0,l=s.list.length;a<l;a++)null!=(r=null!=(n=s.list[a])[e]?n[e]:n.code)&&this._values.push(null!=n[e]?n[e]:n.code),null!=r&&this._labels.push(null!=n[o]?n[o]:null!=n.text?n.text:r)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}}}),_dp(n,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t}}),n.prototype.getField=function(){var t=this._dataIndex;if(t>=0){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},n.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&e.length>0){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var n;if("string"==typeof t&&t&&this._valueSeparator){for(var r=t.split(this._valueSeparator),s=[],a=(o=0,r.length);o<a;o++)s.push(this._lookupMap&&this._lookupMap[r[o]]?this._lookupMap[r[o]]:r[o]);if(s.length<=0)return"";n=s.join(this._valueSeparator)}else n=this._lookupMap?this._lookupMap[t]:void 0;return n||(null!=this.textOfInvalid?this.textOfInvalid:t)},n.prototype.getLookupIndex=function(t){if(this._values&&this._values.length>0)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},n.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&this._values.length>0)for(var o=i.Utils.isArray(t)?t:String(t).split(this._valueSeparator),n=0,r=o.length;n<r;n++)this._values.indexOf(o[n])>=0&&e.push(this._values.indexOf(o[n]));return e},n.prototype.getLookupValue=function(t){if(this._values&&this._values.length>0)return this._values[t]},n.prototype.getLookupValues=function(t){var e=[];if(this._values&&this._values.length>0)for(var i=0,o=t.length;i<o;i++)t[i]>=0&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},n.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var o=i.indexOf(t);if(o>=0&&e.length>o)return e[o];if((o=e.indexOf(t))>=0)return e[o]}},n.prototype.getSourceValues=function(t){var e=this._values,o=this._labels;if(o&&e){for(var n=void 0,r=[],s=this._valueSeparator,a=0,l=(t=i.Utils.isArray(t)?t:s&&t?String(t).split(s):i.Utils.makeArray(t)).length;a<l;a++)(n=o.indexOf(t[a]))>=0&&e.length>n?r.push(e[n]):r.push(t[a]);if(r.length>0&&s)return r.join(s);if(r.length>0)return r.join()}},_dp(n,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters}}),n.prototype.clearFilters=function(){this.setFilters(null)},n.prototype.addFilters=function(t,e){if(t){var o=this.grid;o&&!o.canFiltering()||this._filters.addAll(i.Utils.makeArray(t),e)}},n.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(i.Utils.makeArray(t))}},n.prototype.activateFilters=function(t,e){if(t){var o=this.grid;o&&!o.canFiltering()||this.$_filters.activateItems(i.Utils.makeArray(t),e)}},n.prototype.activateAllFilters=function(t,e){void 0===e&&(e=!0);var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateAll(t,e)},n.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(i.Utils.makeArray(t),e)},n.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},n.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleItems(i.Utils.makeArray(t))}},n.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},n.prototype.getFilter=function(t){var e=this.$_filters,i=e.indexOf(t);return e.getItem(i)},n.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},_dp(n,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0}}),n.prototype.isFiltered=function(){return this.$_filters.activeCount>0||this._inlineFilters.activeCount>0},n.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},n.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;if(e&&i&&this._autoFilter){var o=e.filterSelector._manager;o&&o.buildItems(this,i,!0,t)}},n.prototype.setInlineFilter=function(t,e){var i=this._inlineFilters,o=i.getItem(0);o||(i.add({name:"inlineFilter"},!1),o=i.getItem(0)),o.criteria!=t&&(void 0===t?(o.criteria=void 0,e?o.active=!1:o._active=!1):(o._active=!1,o.criteria=t,o.active=!!o.criteria))},n.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},n.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},n.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},n.prototype.isWritable=function(){var t=this.grid.editOptions;return(t.columnEditableFirst?null!=this._editable?this._editable:t.editable:t.editable&&!1!==this._editable)&&!this._readOnly},n.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},n.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},n.prototype.$_setGroupLevel=function(t){this._groupLevel=t},n.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},n.prototype._changed=function(){e.prototype._changed.call(this)},n.CAPITAL_INDEXERS=["value","values"],n}(D);gi.DataColumn=k;var M=function(e){function i(t){var i=e.call(this)||this;return i._fieldArray=i._fieldArray||[],i._fields=i._fields||[],t&&i.assignFrom(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())}}),_dp(i,"fields",{get:function(){return this._fields}}),i.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var n=this._fieldArray[i],r=n.split("..");if(r.length>1){var s=e.getFieldIndex(r[0]),a=e.getFieldIndex(r[1]);if(s>=0&&a>=0)for(var l=Math.min(s,a),h=Math.max(s,a),u=l;u<=h;u++)this._fields.push(u)}else{(u=e.getFieldIndex(n))>=0&&this._fields.push(u)}}},i}(D);gi.SeriesColumn=M;var L=function(){function t(){this._layouts={}}return t.prototype._doDispose=function(){this._layouts=null},t.prototype.find=function(t){return this._layouts[t]},t.prototype.clear=function(){this._layouts={}},t.prototype.load=function(t){if(t=i.Utils.makeArray(t),this._layouts={},t)for(var e=0,o=t.length;e<o;e++){var n=t[e];n.name&&!this._layouts[n.name]&&(this._layouts[n.name]=n.items)}},t}();return gi.ColumnLayoutCollection=L,gi}var bo,Io,Eo,So={},Ro={};function To(){return Io||(Io=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCellLayout=t.GridCellLayout=t.CellLayoutGroupItem=t.CellLayoutGroupHeader=t.CellLayoutHeader=t.ColumnLayoutDirection=t.CellLayoutColumnItem=t.ProxyCellLayoutItem=t.CellLayoutItem=void 0;var e=d,i=S(),o=G(),n=et(),r=xo(),s=wo(),a=Y(),l=function(){return bo||(bo=1,t=Ro,Object.defineProperty(t,"__esModule",{value:!0}),t.CellLayoutType=void 0,(e=t.CellLayoutType||(t.CellLayoutType={})).GROUP="group",e.COLUMN="column",e.PROXY="proxy"),Ro;var t,e}(),h=ji(),u=C(),c=function(t){function o(){var e=t.call(this)||this;return e._visible=!0,e._width=NaN,e._fillWidth=NaN,e._index=-1,e._vindex=-1,e._row=0,e._col=0,e._hrow=0,e._hcol=0,e._cspan=1,e._hspan=1,e._dspan=1,e._clen=1,e._hlen=1,e._dlen=1,e._cellWidth=0,e._fitWidth=NaN,e._defColSpan=1,e._header=e._createHeader(),e._header&&(e._header._layout=e),e}return e.__extends(o,t),o.compareLoc=function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root.vindex,o=e.root.vindex;return i==o&&(t.group===e.group?(i=t.vindex,o=e.vindex):(i=t.dataRoot.vindex,o=e.dataRoot.vindex)),i-o},o.getSource=function(t){return t instanceof p?t.source:t},o.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),t.prototype._doDispose.call(this)},_dp(o,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid}}),_dp(o,"source",{get:function(){return this}}),_dp(o,"isNull",{get:function(){return!1}}),_dp(o,"isProxy",{get:function(){return!1}}),_dp(o,"type",{get:function(){return this._type}}),_dp(o,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))}}),o.prototype.$_isVisible=function(t){return this._visible},_dp(o,"header",{get:function(){return this._header}}),_dp(o,"owner",{get:function(){return this._parent&&this._parent.owner}}),_dp(o,"parent",{get:function(){return this._parent}}),_dp(o,"group",{get:function(){return this._parent instanceof R?null:this._parent}}),_dp(o,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof R)return this._root=t;t=t._parent}return this._root}}),_dp(o,"isRoot",{get:function(){return this.root===this}}),_dp(o,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)do{this._dataRoot=t,t=t.group}while(t);else this._dataRoot=this}return this._dataRoot}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e){this._propChanged("displayIndex",this._vindex,e);var i=this.firstColumn;i&&this instanceof f&&i.$_layoutIndexChanged(e,this._vindex)}}}),_dp(o,"row",{get:function(){return this._row}}),_dp(o,"col",{get:function(){return this._col}}),_dp(o,"hrow",{get:function(){return this._hrow}}),_dp(o,"hcol",{get:function(){return this._hcol}}),_dp(o,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))}}),_dp(o,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))}}),_dp(o,"groupShowMode",{get:function(){return this._groupShowMode},set:function(t){t!=this._groupShowMode&&(this._groupShowMode=t,this._changed())}}),_dp(o,"domWidth",{get:function(){if(!!this.grid&&this.grid.layoutManager.isColumnFitted){var t=this.grid,e=t.layoutManager,i=t.fixedOptions.colCount,o=e.cellCount,n=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints,r=this.$_fixed?this._col:this.$_rfixed?this._col-(o-i):this._col-i;return n[r+(this instanceof y?this._clen:this._defColSpan)]-n[r]}return this.cellWidth}}),_dp(o,"distance",{get:function(){return this._col}}),_dp(o,"cspan",{get:function(){return this._cspan}}),_dp(o,"hspan",{get:function(){return this._hspan}}),_dp(o,"hlen",{get:function(){return this._hlen}}),_dp(o,"merged",{get:function(){return this._merged}}),_dp(o,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed}}),o.prototype.load=function(t){"string"!=typeof t&&(void 0!==t.width&&(this.width=t.width),void 0!==t.header&&this._header.assignFrom(t.header),void 0!==t.fillWidth&&(this.fillWidth=t.fillWidth),this.groupShowMode=i.Utils.valueIn(t.groupShowMode,u.GroupShowMode)?t.groupShowMode:u.GroupShowMode.ALWAYS,void 0!==t.visible&&(this.visible=t.visible))},o.prototype.isColumn=function(t){return!1},o.prototype.cleanColumns=function(){},o.prototype.findLayout=function(t){return null},o.prototype.getHeaderSpan=function(){return 1},o.prototype.getSummarySpan=function(t){return 1},o.prototype.getFooterSpan=function(t){return 1},o.prototype.getDataSpan=function(){return 1},o.prototype.getGroupFooterSpan=function(t,e){return 1},o.prototype.getDataColumn=function(){return null},o.prototype.getFooterUserSpan=function(t){return null},o.prototype.getSummaryUserSpan=function(t){return null},o.prototype._createHeader=function(){return null},o.prototype._headerChanged=function(){this._changed()},o.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},o.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},o.prototype._getWidth=function(t){return t},o.prototype._getFillWidth=function(t){return t},o.prototype.changeCellWidth=function(t,e,i){var o=this.owner,n=o&&o.grid,r=n&&n._loading,s=i?this.cellWidth:this.domWidth,a=this.domWidth,l=this.grid.displayOptions.minCellWidth;if(isNaN(s)&&r&&i)this.width=t;else{var h=t-s;if(e&&!i&&(h*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),h=Math.round(h))if(this.grid._columnsDirty&&this.owner.$_refresh(this.grid._columns,l),o&&o.isShowing(this)){if(o){var u=this._col,d=void 0;d=this instanceof y?this._clen:this._defColSpan,o.$_changeCellWidths(u,d,h,l);var c=o._cellWidths;if(c&&c.length)for(var p=o._dataCells,_=0;_<p.length;_++)for(var g=p[_],m=0;m<d;m++)g[u+m]._cellWidth=c[u+m];o.$_calcGroupWidths()}setTimeout(function(){if(this.domWidth!=a){var t=this.firstColumn;this._propChanged("displayWidth",this.domWidth,a),t&&this instanceof f&&t.$_layoutWidthChanged(a,this.domWidth)}}.bind(this),50)}else{if(this instanceof y||this._defColSpan>1)return;this._cellWidth=t}}},o.prototype._setFitWidth=function(t){this._fitWidth=t},o.prototype._clearFitWidth=function(){this._fitWidth=NaN},o.prototype._changed=function(){this._parent&&this._parent._changed()},o.prototype.$_setMerged=function(t){this._merged=t},o.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireLayoutPropertyChanged(this,t,e,i)},o}(o.Base);t.CellLayoutItem=c;var p=function(t){function i(e,i){var o=t.call(this)||this;return o._type=l.CellLayoutType.PROXY,o._source=e,o._index=i,o}return e.__extends(i,t),_dp(i,"cellWidth",{get:function(){return this._cellWidth},set:function(t){}}),_dp(i,"isNull",{get:function(){return!0}}),_dp(i,"isProxy",{get:function(){return!0}}),_dp(i,"source",{get:function(){return this._source}}),_dp(i,"visible",{get:function(){return this._source.visible}}),i.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},_dp(i,"cols",{get:function(){return this._source.cols}}),_dp(i,"headerRows",{get:function(){return this._source.headerRows}}),_dp(i,"rows",{get:function(){return this._source.rows}}),_dp(i,"root",{get:function(){return this._source.root}}),_dp(i,"displayText",{get:function(){return null}}),_dp(i,"first",{get:function(){return this}}),_dp(i,"last",{get:function(){return this}}),_dp(i,"firstColumn",{get:function(){return this._source.firstColumn}}),_dp(i,"lastColumn",{get:function(){return this._source.lastColumn}}),_dp(i,"boundColumn",{get:function(){return this._source.boundColumn}}),i.prototype.load=function(t){},i.prototype._isResizable=function(){return!1},i.prototype._isMovable=function(){return!1},i.prototype.clearMergeGrouped=function(){},i}(c);t.ProxyCellLayoutItem=p;var _,f=function(t){function o(e){var i=t.call(this)||this;return i._cellSpan=1,i._cellWidths=[],i._cols=1,i._rows=1,i._blanked=!1,i._type=l.CellLayoutType.COLUMN,i._column=e,i._columnObj=e instanceof r.ValueColumn?e:null,i}return e.__extends(o,t),o.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,t.prototype._doDispose.call(this)},_dp(o,"column",{get:function(){return this._column}}),_dp(o,"cellWidth",{get:function(){if(this.owner.isShowing(this)){var t=this.owner.getCellWidths(this._col,this._defColSpan);return isNaN(t)&&(t=this.width),t||this._cellWidth}return this._cellWidths&&this._cellWidths.reduce((function(t,e){return t+e}),0)||this._cellWidth},set:function(t){if(!this.owner._loading){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;t=Math.max(this.grid.displayOptions.minCellWidth,t),this.changeCellWidth(t,e,!0)}}}),_dp(o,"merges",{get:function(){return this._merges}}),_dp(o,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?s.ColumnMergeRule.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}}}),_dp(o,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}}}),o.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof r.DataColumn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},_dp(o,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())}}),_dp(o,"equalBlankNode",{get:function(){return this._blankNodeRun}}),_dp(o,"blanked",{get:function(){return this._blanked}}),_dp(o,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?a.ExpressionParser.Default.parse(t,null):void 0===t?void 0:null,this._changed())}}),_dp(o,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())}}),_dp(o,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())}}),_dp(o,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())}}),_dp(o,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())}}),_dp(o,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())}}),_dp(o,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())}}),_dp(o,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())}}),_dp(o,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())}}),_dp(o,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())}}),_dp(o,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())}}),_dp(o,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())}}),_dp(o,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())}}),_dp(o,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())}}),_dp(o,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=i.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(o,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=i.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(o,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=i.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(o,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())}}),o.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;if(this._columnObj instanceof r.DataColumn){if(this._columnObj.mergeGrouped)return!0;if(void 0===this._mergeRuleObj)return null!=this._columnObj._mergeRuleObj}},_dp(o,"isNull",{get:function(){return!this._columnObj}}),_dp(o,"cols",{get:function(){return this._cols}}),_dp(o,"headerRows",{get:function(){return 1}}),_dp(o,"rows",{get:function(){return this._rows},set:function(t){this._rows=t}}),_dp(o,"first",{get:function(){return this}}),_dp(o,"last",{get:function(){return this}}),_dp(o,"firstColumn",{get:function(){return this._columnObj}}),_dp(o,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);e-- >0;){var i=t[e];if(i instanceof o&&i.lastColumn)return i.lastColumn}return null}}),_dp(o,"boundColumn",{get:function(){return this._columnObj}}),_dp(o,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()}}),o.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},o.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},o.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},o.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},o.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},o.prototype.getGroupFooterUserSpan=function(t,e){var i,o=this._groupFooterUserSpanCallback;return o&&(i=o(this.grid.handler,this,t,t.index,e)),i||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},o.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,n=this._groupFooterSpans;return o?void 0===(i=o(this.grid.handler,this,t,e))&&n&&n.length>e&&(i=n[e]):n&&n.length>e&&(i=n[e]),void 0===i?this._cellSpan:i},o.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},o.prototype.getDataColumn=function(){return this._columnObj},o.prototype._createHeader=function(){return new g(this)},o.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},o.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},o.prototype.isColumn=function(t){return this._columnObj===t},o.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},o.prototype.load=function(e){if(this.assignFrom(e),t.prototype.load.call(this,e),!this._columnObj&&"string"==typeof this._column){var i=this.owner&&this.owner.grid;this._columnObj=i?i.columnByName(this._column):null}},o.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},o.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},o.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},o.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},o.prototype._prepareLayout=function(e,i,o){if(t.prototype._prepareLayout.call(this,e,i,o),this._columnObj){this._columnObj._prepareLayout(e,this);var n=this.parent.direction===_.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=n===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))}},o.prototype.toString=function(){return"string"==typeof this._column?this._column:t.prototype.toString.call(this)},o.prototype.clearMergeGrouped=function(){this.firstColumn instanceof r.DataColumn&&this.firstColumn.$_setMergeGrouped(!1)},o.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){var o=this._columnObj.$_hash;if(t[o])throw new Error("Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText));i||(this._columnObj._layout=this),!i&&(this._columnObj._layout=this),t[o]=this}},o.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof r.DataColumn?this._columnObj._mergeRuleObj:null},o}(c);t.CellLayoutColumnItem=f,function(t){t.VERTICAL="vertical",t.HORIZONTAL="horizontal"}(_=t.ColumnLayoutDirection||(t.ColumnLayoutDirection={}));var g=function(t){function i(e){var i=t.call(this)||this;return i._layout=e,i}return e.__extends(i,t),_dp(i,"layout",{get:function(){return this._layout}}),_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(i,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t}}),_dp(i,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t}}),_dp(i,"rows",{get:function(){return 1}}),i.prototype.isVisible=function(){return!0},i.prototype.getDisplayText=function(){return this._text},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},i.prototype._changed=function(){this._layout&&this._layout._headerChanged()},i}(o.Base);t.CellLayoutHeader=g;var m=function(t){function o(e){var i=t.call(this,e)||this;return i._visible=!0,i._showTooltip=void 0,i}return e.__extends(o,t),_dp(o,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),_dp(o,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new h.HtmlTemplateParser),this._template.template=t):this._template=void 0,this._changed())}}),_dp(o,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?i.Utils.extendObj(t,this._values={}):this._values=void 0,this._changed())}}),_dp(o,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(o,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())}}),_dp(o,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),_dp(o,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())}}),_dp(o,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(o,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(t){t!==this._rows&&(this._rows=t,this._changed())}}),_dp(o,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),o.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._layout.grid):void 0},o.prototype.getValue=function(t){return this._values&&this._values[t]},o.prototype.doAssignSimple=function(e){return!t.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},o.prototype.isVisible=function(){return this._visible},o.prototype.getDisplayText=function(){return this.text||this.layout.name},_dp(o,"displayText",{get:function(){return this.getDisplayText()}}),o}(g);t.CellLayoutGroupHeader=m;var y=function(t){function o(e,i){var o=t.call(this)||this;return o._direction=_.HORIZONTAL,o._items=[],o._resizable=!0,o._movable=!0,o._hideChildHeaders=!1,o._childColumnMovable=!0,o._visibles=[],o._cols=0,o._rows=0,o._headerRows=0,o._expandedLayouts=[],o._collapsedLayouts=[],o._type=l.CellLayoutType.GROUP,o._name=e,o._direction=i==_.VERTICAL?_.VERTICAL:_.HORIZONTAL,o}return e.__extends(o,t),o.getNext=function(t){var e=t&&t.parent;return e?((t=e.nextOf(t))||(t=o.getNext(e)),t):null},o.getPrev=function(t){var e=t&&t.parent;return e?((t=e.prevOf(t))||(t=o.getPrev(e)),t):null},o.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},o.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},o.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},o.isRight=function(t){return o.isBottom(t)},o.prototype._doDispose=function(){this._items.forEach((function(t){t&&t.dispose()})),this._visibles=this._items=null,t.prototype._doDispose.call(this)},_dp(o,"name",{get:function(){return this._name}}),_dp(o,"direction",{get:function(){return this._direction},set:function(t){t!=_.VERTICAL&&(t=_.HORIZONTAL),t!=this._direction&&(this._direction=t,this._changed())}}),_dp(o,"vertical",{get:function(){return this._direction==_.VERTICAL}}),_dp(o,"horizontal",{get:function(){return this._direction!=_.VERTICAL}}),_dp(o,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t}}),_dp(o,"movable",{get:function(){return this._movable},set:function(t){this._movable=t}}),_dp(o,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())}}),_dp(o,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t}}),_dp(o,"count",{get:function(){return this._items.length}}),_dp(o,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++){i[e]._parent=this}this._changed()}}),_dp(o,"visibleCount",{get:function(){return this._visibles.length}}),_dp(o,"visibles",{get:function(){return this._visibles.slice()}}),o.prototype.$_isVisible=function(t){return this.visible&&this._visibles.length>0},_dp(o,"expandable",{get:function(){return this._expandable},set:function(t){t!=this._expandable&&(this._expandable=t,this._changed())}}),_dp(o,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&this.owner.expandLayout(this,t)}}),o.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},o.prototype.getItem=function(t){return this._items[t]},o.prototype.getVisible=function(t){return this._visibles[t]},o.prototype.addLayout=function(t,e){if(!this.owner.isDefault()){var i,n,s,a=this.grid,h=this.owner;if(a&&a._checkEditing(),"string"==typeof t?s=h.layoutByName(t):t instanceof r.ValueColumn?s=h.layoutByColumn(t):t&&"string"==typeof t.column&&(s=h.layoutByName(t.column)),s)throw new Error("addLayout fail - Column or Group is already contained in layouts: "+s.firstColumn.name);if("string"==typeof t||t instanceof r.ValueColumn)i="string"==typeof t&&u(a,t),n=new f(t);else if(t)if("string"==typeof t.column)i=u(a,t.column),n=new f(t.column);else if((t.type===l.CellLayoutType.GROUP||t.items)&&t.name){if(h.layoutByName(t.name))throw new Error("addLayout fail - group is already contained in layouts: "+t.name);n=new o(t.name,t.direction)}return n?("object"==typeof t&&n.load(t),this.addItem(n,e),(n instanceof f&&i||n instanceof o&&n._items.length)&&this.owner._root&&this.owner._root.resetColumns(a._columns),n):void 0}function u(t,e){var i=t.columnByName(e);if(!i)throw new Error("not exists column ".concat(e));return i}},o.prototype.removeLayout=function(t){if(!this.owner.isDefault()){var e=this.grid;e&&e._checkEditing(),"string"==typeof t?t=this.layoutByName(t):t instanceof r.ValueColumn&&(t=t.layout),t instanceof c&&t.parent.removeItem(t,!0)}},o.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&e>=0&&e<=this._items.length&&(this._items.splice(e,0,t),t._parent=this,this._changed())},o.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,i=this._items;e<i.length;e++){var n=i[e];t&&n instanceof o&&n.clear(),n._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},o.prototype.removeItem=function(t,e){var i=this.indexOf(t);if(i>=0){if(t instanceof f&&t.cellSpan>1)for(var o=t.cellSpan-1;o--;){var n=this._items.splice(i+o,1)[0];n&&(n._detach(),e&&n.dispose())}this._items.splice(i,1),t._detach(),e&&t.dispose(),this._changed()}},o.prototype.layoutByName=function(t){if(t)for(var e=0,i=this._items;e<i.length;e++){var n=i[e];if(n instanceof f&&n.firstColumn.name===t)return n;if(n instanceof o){if(n.name===t)return n;var r=n.layoutByName(t);if(r)return r}}return null},o.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=v(this,e+1)}catch(t){i.Utils.log("nextOf fail")}return null},o.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(e>0)return t=w(this,e-1)}catch(t){i.Utils.log("prevOf fail")}return null},o.prototype.isExpandable=function(){return this.expandable&&this._expandedLayouts.length>0&&this._collapsedLayouts.length>0},o.prototype.expandAll=function(t,e){this.expandable&&(this.expanded=t),this._items.forEach((function(i){i instanceof o&&i.expandAll(t,e)}))},o.prototype._clearFitWidth=function(){t.prototype._clearFitWidth.call(this);for(var e=0,i=this._visibles;e<i.length;e++){i[e]._clearFitWidth()}},_dp(o,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)}}),_dp(o,"cols",{get:function(){return this._cols}}),_dp(o,"headerRows",{get:function(){return this._headerRows}}),_dp(o,"rows",{get:function(){return this._rows}}),_dp(o,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this}}),_dp(o,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return t>0?this._visibles[t-1].last:this}}),_dp(o,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null}}),_dp(o,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;t>=0;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null}}),_dp(o,"boundColumn",{get:function(){return this.firstColumn}}),_dp(o,"displayText",{get:function(){return this._header&&this._header.text||this._name}}),o.prototype._createHeader=function(){return new m(this)},o.prototype.load=function(e){this.clear(),void 0!==e.hideChildHeaders&&(this.hideChildHeaders=e.hideChildHeaders),this.expandable=e.expandable,this._expanded=null==e.expanded||e.expanded,void 0!==e.resizable&&(this.resizable=e.resizable),void 0!==e.childColumnMovable&&(this.childColumnMovable=e.childColumnMovable),void 0!==e.movable&&(this.movable=e.movable),null==e.rows||isNaN(e.rows)||(this._rows=e.rows),e.items&&this._loadItems(e.items),t.prototype.load.call(this,e)},o.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},o.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},o.prototype._isResizable=function(){return this._resizable},o.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},o.prototype._setFitWidth=function(e){if(t.prototype._setFitWidth.call(this,e),this.vertical)for(var i=0,o=this._visibles;i<o.length;i++){if((u=o[i])instanceof f){var n=u._cellWidth/this.cellWidth*e;u._setFitWidth(n)}else u._setFitWidth(e)}else{for(var r=0,s=0,a=this._visibles;s<a.length;s++){r+=(u=a[s])._cellWidth}for(var l=0,h=this._visibles;l<h.length;l++){var u;n=(u=h[l])._cellWidth/r*e;u._setFitWidth(n)}}},o.prototype._prepareLayout=function(e,i,o){t.prototype._prepareLayout.call(this,e,i,o);for(var n=0,r=this._visibles;n<r.length;n++){r[n]._prepareLayout(e,i,o)}},o.prototype.toString=function(){return this._name||t.prototype.toString.call(this)},o.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},o.prototype._loadItems=function(t){for(var e,i=0,n=0,s=t;n<s.length;n++){var a=s[n],h=void 0;i++,"string"==typeof a?e=h=new f(a):"number"==typeof a?(h=new p(e,i))._width=a:a&&(a.type===l.CellLayoutType.GROUP||a.items?h=new o(a.name,a.direction):"string"==typeof a.column?e=h=new f(a.column):a instanceof r.ValueColumn&&(e=h=new f(a))),h&&(h._parent=this,h.load(a),this._items.push(h))}},o.prototype.$_bindColumns=function(t,e,i){for(var n=0,r=this._items;n<r.length;n++){var s=r[n];s._root=null,s instanceof o?s.$_bindColumns(t,e,i):!s.isProxy&&s.$_bindColumn(t,e,i)}},o.prototype.$_parseExpandLayouts=function(t){var e=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach((function(i,n){if(!i.isProxy){switch(i.groupShowMode){case u.GroupShowMode.EXPAND:e._expandedLayouts.push(i);break;case u.GroupShowMode.COLLAPSE:e._collapsedLayouts.push(i);break;default:e._expandedLayouts.push(i),e._collapsedLayouts.push(i)}i instanceof o&&i.$_parseExpandLayouts(t)}}))},o.prototype.$_parseHeaderCells=function(t,e,i){var n=this._direction===_.HORIZONTAL,r=0,s=this._header.isVisible()?this._header.rows:0;if(s&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var a=0,l=this._visibles;a<l.length;a++){var h=l[a],u=!h.isProxy&&h.header.isVisible()?h.header.rows:h.isProxy&&!n?1:0;if(h._hrow=e,h._hcol=i,h._hspan=u,h._hlen=u,h instanceof o)if(u>0&&(t[e][i]=h),h.$_parseHeaderCells(t,e+u,i),u>0){for(var d=0;d<u;d++)for(var c=0===d?1:0;c<h.cols;c++)t[e+d][i+c]=new p(h,c);n?i+=h.cols:e+=h.headerRows}else n?i+=h.cols:e+=h.headerRows;else if(t[e][i]=h,n){for(d=1;d<this.headerRows-s;d++)t[e+d][i]=new p(h,d),h._hspan++;h._hlen=h._hspan,i+=h.cols}else{for(d=1;d<this.cols;d++)t[e][i+d]=new p(h,d);e+=h.rows}n?r=Math.max(h._hlen,r):r+=h._hlen}this._hlen=n?r+s:Math.max(1,r+s)},o.prototype.$_fillHorz=function(t,e,i,o,n,r,s){for(var a=o+r,l=n,h=l+i-1,u=0,d=e-r;u<d;u++)for(var _=h;_>=l;_--){var g=t[a+u][_];if(null!=g){g=c.getSource(g);for(var m=_+1;m<=h;m++){var y=t[a+u][m]=new p(g,m-l);s?(y._hrow=a+u,y._hcol=m):(y._row=a+u,y._col=m,y._parent=g.group,g.row===y.row&&(g._cspan++,g instanceof f&&g._clen++))}break}}},o.prototype.$_fillVert=function(t,e,i,o,n,r,s){for(var a=o+r,l=o+e-1,h=n+i-1,u=n;u<=h;u++)for(var d=l;d>=a;d--){var _=t[d][u];if(null!=_){_=c.getSource(_);for(var g=d+1;g<=l;g++){var m=t[g][u]=new p(_,g-a);s?(m._hrow=g,m._hcol=u,_.hcol===m.hcol&&(_._hspan++,_ instanceof f&&_._hlen++)):(m._row=g,m._col=u,_.col===m.col&&(_._dspan++,_ instanceof f&&_._dlen++),m._parent=_.group)}break}}},o.prototype.$_adjustHeaderCells=function(t){var e=this._header.isVisible()?this._header.rows:0;if(e&&this._hideChildHeaders){this._hspan=this._hlen;for(var i=0,n=0;n<this._hlen;n++)for(var r=0;r<this._clen;r++)if(n||r){var s=this._hrow+n,a=this._hcol+r,l=t[s][a]=new p(this,i++);l._hrow=s,l._hcol=a}}else if(this._direction===_.VERTICAL){for(var h=this._clen,u=0,d=this._visibles;u<d.length;u++){(g=d[u])instanceof o&&(g._clen=this._clen,g.$_adjustHeaderCells(t))}this.$_fillVert(t,this._hlen,h,this._hrow,this._hcol,e,!0),this.$_fillHorz(t,this._hlen,h,this._hrow,this._hcol,e,!0)}else{for(var c=0,f=this._visibles;c<f.length;c++){var g;(g=f[c])instanceof o&&(g._hlen=this._hlen-e,g.$_adjustHeaderCells(t))}this.$_fillVert(t,this._hlen,this._cols,this._hrow,this._hcol,e,!0),this.$_fillHorz(t,this._hlen,this._cols,this._hrow,this._hcol,e,!0)}},o.prototype.$_parseDataCells=function(t,e,i){for(var n,r=this._direction!=_.VERTICAL,s=0,a=0,l=0,h=this._visibles;l<h.length;l++){var u=h[l];if(u._row=e,u._col=i,u._dspan=1,u._dlen=1,u._cspan=1,u._clen=1,u instanceof o){if(u.$_parseDataCells(t,e,i),r)i+=u.cols;else if(e+=u.rows,2==this.rows){for(var d=1/0,c=0,f=0,g=this.visibles;f<g.length;f++){var m=g[f];d=Math.min(d,m.cols),c=Math.max(c,m.cols),m.ignoreCalcWidth=!1}if(1===d&&c>1)for(var y=0,v=this.visibles;y<v.length;y++){(m=v[y]).ignoreCalcWidth=1===m.cols}}}else if(t[e][i]=u,r){for(var C=1;C<this.rows;C++)t[e+C][i]=n=new p(u,C),u._dspan++,n._col=i,n._row=e+C,n._parent=this;u._dlen=u._dspan,i+=u.cols}else{for(C=1;C<this.cols;C++)t[e][i+C]=n=new p(u,C),u._cspan++,n._col=i+C,n._row=e,n._parent=this;u._clen=u._cspan,e+=u.rows}r?(a+=u._clen,s=Math.max(u._dlen,s)):(a=Math.max(u._clen,a),s+=u._dlen)}r?(a=Math.max(1,a),this._dlen=s):this._dlen=Math.max(1,s),this._cspan=this._clen=a},o.prototype.$_adjustDataCells=function(t){if(this._direction===_.VERTICAL){for(var e=0,i=this._visibles;e<i.length;e++){(s=i[e])instanceof o&&(s._cspan=s._clen=this._clen,s.$_adjustDataCells(t))}this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(t,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var n=0,r=this._visibles;n<r.length;n++){var s;(s=r[n])instanceof o&&(s._dlen=this._dlen,s.$_adjustDataCells(t))}this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(t,this._dlen,this._clen,this._row,this._col,0,!1)}},o.prototype.$_calcSpans=function(){var t=this._header.isVisible();if(this._direction==_.HORIZONTAL){for(var e=0,i=1,n=1,r=0,s=this._visibles;r<s.length;r++){(d=s[r])instanceof o&&d.$_calcSpans(),e+=d.cols,i=Math.max(i,d.headerRows),n=Math.max(n,d.rows)}this._rows=n,this._cols=e,t&&this._hideChildHeaders?this._headerRows=this._header.rows:this._headerRows=i+(t?this._header.rows:0)}else{this._cols=1,this._headerRows=t?this._header.rows:0,this._rows=0;for(var a=0,l=this._visibles;a<l.length;a++){(d=l[a])instanceof o&&d.$_calcSpans(),this._headerRows+=d.headerRows,this._rows+=d.rows,this._cols=Math.max(d.cols,this._cols)}for(var h=0,u=this._visibles;h<u.length;h++){var d;(d=u[h])instanceof o&&(d._cols=this._cols)}t&&this._hideChildHeaders&&(this._headerRows=this._header.rows)}},o.prototype.$_resetVisibles=function(t){var e=0,i=0,n=this.visibles;this._visibles=[];for(var r=0,s=this._items;r<s.length;r++){var a=s[r];a._index=e++,a instanceof o&&a.$_resetVisibles(t);var l=a.$_isVisible(t);l&&this.expandable&&(l=this._expanded?this._expandedLayouts.indexOf(a)>=0:this._collapsedLayouts.indexOf(a)>=0),l&&(this._visibles.push(a),a._vindex=i++)}if(!t&&n.length!=this._visibles.length&&this.direction===_.HORIZONTAL)for(var h=this;h;)h._cellWidth=NaN,h.width=NaN,h=h.parent;this.$_calcSpans()},o.prototype.$_getLeaf=function(t,e){for(var i=0,n=this._visibles;i<n.length;i++){var r=n[i];if(r instanceof o){var s=r.row,a=s+r.rows;if(t>=s&&t<a){var l=r.col,h=l+r.cols;if(e>=l&&e<h)return this.$_getLeaf(t-s,e-l)}}else if(r.row===t&&r.col===e)return r}return null},o.prototype.$_collectCellWidths=function(t){for(var e=[],i=0,n=this._visibles;i<n.length;i++){var r=n[i],s=r._cellWidth||r.width;if(r instanceof f&&(isNaN(s)||0==s)&&(s=t),r instanceof o){var a=r.$_collectCellWidths(t);isNaN(s)&&(s=a),r._cellWidth=s}else r._cellWidth=s;e.push(s)}var l=this.width;return isNaN(l)&&(l=this.vertical?Math.max.apply(null,e):e.reduce((function(t,e){return t+e}),0)),l},o.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var o=e.slice(),n=0;n<o.length;n++)o[n]=0;var r=this.owner._moveColumn,s=t.slice();if(r){var a=s.splice(r.first.row,1);s.splice(0,0,a[0])}for(var l=0;l<s.length;l++)for(var h=s[l],u=0;u<h.length;u++){var d=h[u];r?e[u]=e[u]||d._cellWidth:(!d.isProxy||d._cellWidth>0&&!d.ignoreCalcWidth)&&(e[u]+=d._cellWidth,o[u]++)}for(n=0;n<e.length;n++)e[n]=Math.round(e[n]/Math.max(o[n],1))}for(l=0;l<t.length;l++)for(h=t[l],u=0;u<h.length;u++){var c=h[u];if(c._cellWidth=e[u],c instanceof f){var p=c._cellWidths=[];for(n=0;n<c.cspan;n++)p[n]=e[u+n]||0}}},o.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},o.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},o.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},o.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},o.prototype.$_collectHorzColumns=function(t,e,i){if(this.horizontal)for(var n=e;n<=i;n++){var r=this._visibles[n];r instanceof o?r.$_collectHorzColumns(t,0,r.visibleCount-1):r instanceof f&&t.push(r._columnObj)}},o.prototype.$_changeChildVIndex=function(t,e){t&&(e!=t.vindex&&e>=0&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index))},o.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&e>=0&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var o=this._items.splice(i,t.getHeaderSpan()),n=0;n<o.length;n++)this._items.splice(e+n,0,o[n]);this.$_resetVisibles(),this._childIndexChanged(t)}}},o}(c);t.CellLayoutGroupItem=y;var v=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof f)return n;if(n instanceof y&&(n=c.getSource(n.first))instanceof f)return n}return null},w=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof f)return o;if(o instanceof y&&(o=c.getSource(o.last))instanceof f)return o}return null},x=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);if(r instanceof f){var s=r._columnObj;s&&e.push(s)}else r instanceof y&&x(r,e,i)}},b=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);r instanceof f?e.push(r):r instanceof y&&b(r,e,i)}},I=function(t,e,i,o,n){for(var r=o?t.visibleCount:t.count,s=0;s<r;s++){var a=o?t.getVisible(s):t.getItem(s);if(a instanceof f&&!n){var l=a._columnObj;l&&e.push(l.name)}else a instanceof y&&((!i||n)&&e.push(a.name),I(a,e,i,o,n))}},E=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var s=i?t.getVisible(n):t.getItem(n);if(s instanceof f){var a=s._columnObj;a instanceof r.DataColumn&&e.push(a)}else s instanceof y&&E(s,e,i)}},R=function(t){function i(e){var i=t.call(this,"$_root_$",null)||this;return i._owner=e,i.header._visible=!1,i}return e.__extends(i,t),_dp(i,"cellWidth",{get:function(){return this._cellWidth},set:function(t){}}),_dp(i,"expandable",{get:function(){return!1},set:function(t){}}),i.prototype.resetColumns=function(t){this.items.length>0&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},_dp(i,"grid",{get:function(){return this._owner.grid}}),_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"root",{get:function(){return this}}),i.prototype._changed=function(){this._owner&&this._owner._changed()},i.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},i.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},i.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},i.prototype._setColumns=function(t){var e=this._items;e.length=0;for(var i=0,o=t.count;i<o;i++){var n=new f(t.getColumn(i));e.push(n),n._parent=this}this.resetColumns(t)},i}(y),T=function(t){function i(e){var i=t.call(this)||this;return i._cellWidths=[],i._grid=e,i._root=new R(i),i}return e.__extends(i,t),i.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),t.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"count",{get:function(){return this._root.count}}),_dp(i,"visibleCount",{get:function(){return this._root.visibleCount}}),_dp(i,"headerRows",{get:function(){return this._root._hlen}}),_dp(i,"dataRows",{get:function(){return this._root._dlen}}),_dp(i,"first",{get:function(){return this._root.first}}),_dp(i,"last",{get:function(){return this._root.last}}),_dp(i,"firstColumn",{get:function(){return this._root.firstColumn}}),i.prototype.load=function(t){return this.$_clear(),this._loading=!0,this._root._loadItems(t),this._changed(),this._loading=!1,this},i.prototype.resetColumns=function(t){this._root.resetColumns(t)},i.prototype.cleanColumns=function(){this._root.cleanColumns()},i.prototype.invalidate=function(){this._changed()},i.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._moveColumn=t,this._changed()},i.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},i.prototype.getVisible=function(t){return this._root.getVisible(t)},i.prototype.addLayout=function(t,e){return this._root.addLayout(t,e)},i.prototype.removeLayout=function(t){this._root.removeLayout(t)},i.prototype.expandLayout=function(t,e){this.fireExpanding(t,e)&&(t._expanded=e,this._root.$_resetVisibles(),this._changed(),this.fireExpanded(t,e))},i.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},i.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},i.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},i.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof f&&i[o]._columnObj===t)return{row:e,col:o}},i.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof f&&i[o]._columnObj===t)return{row:e,col:o}},i.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return E(this._root,e,t),e},i.prototype.collectColumns=function(t,e,i){var o=[];return x(this._root,o,e),o},i.prototype.collectLayouts=function(t){var e=[];return b(this._root,e,!0),e},i.prototype.collectColumnNames=function(t,e,i,o){var n=[],r=this._root;return o?"string"==typeof o?r=function t(e,i){for(var n=0,r=e.count;n<r;n++){var s=e.getItem(n);if(s instanceof y)return s.name===o?s:t(s)}}(r):o instanceof y&&(r=o):r=this._root,r?(I(r,n,t,e,i),n):null},i.prototype.collectDataColumns=function(t,e){t=t.source,e=e.source;var i=Math.min(t.col,e.col),o=Math.max(t.col+t._defColSpan,e.col+e._defColSpan)-1,n=[];E(this._root,n,!0);for(var r=n.length-1;r>=0;r--){var s=n[r].layout.col;(s<i||s>o)&&n.splice(r,1)}return n},i.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},i.prototype.getHomeOf=function(t){return t=c.getSource(t),t=this._dataCells[t?t.row:0][0],c.getSource(t)},i.prototype.getEndOf=function(t){t=c.getSource(t);var e=this._dataCells,i=t?t.row:e.length-1;return t=e[i][e[i].length-1],c.getSource(t)},i.prototype.getTopOf=function(t){return t=this._dataCells[0][t.col],c.getSource(t)},i.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],e?t:c.getSource(t)},i.prototype.getLowerOf=function(t){t=c.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return i+t.rows<e.length?t=e[i+t.rows][o]:(n=1,t=e[0][o]),{dy:n,layout:c.getSource(t)}},i.prototype.getUpperOf=function(t){t=c.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return i>0?t=e[i-1][o]:(n=-1,t=e[e.length-1][o]),{dy:n,layout:c.getSource(t)}},i.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?(t=e[i+t.cspan],c.getSource(t)):null},i.prototype.getLeftOf=function(t){t=c.getSource(t);var e=this._dataCells[t.row],i=t.col;return i>0?(t=e[i-1],c.getSource(t)):null},i.prototype.getCellWidths=function(t,e){for(var i=0,o=0;o<e;o++)i+=this._cellWidths[o+t];return i},i.prototype.getLayout=function(t,e,i,o,n,r){function s(a){var l,h;if(a instanceof f){var u=a.firstColumn;if(u)return d=(d=u.visible&&a.visible||i)&&n.indexOf(u.name)<0||o.indexOf(u.name)>=0,(c=a.toProxy(!1)).visible=t?d:a.visible,c.width=(t&&e?a._fitWidth:a._cellWidth)||a.width,c.column=u.name,c}else{if(a.isProxy)return(t&&e?a._fitWidth:a._cellWidth)||a.width;if(a instanceof y){var d,c;h=a._items,l=[],d=(d=a.visible||i)&&n.indexOf(a.name)<0||o.indexOf(a.name)>=0;for(var p=0,_=h.length;p<_;p++)l.push(s.call(this,h[p]));if((c=a.toProxy(!1)).name=a.name,c.items=l,c.visible=t?d:a.visible,c.header=a.header&&a.header.toProxy(!1),t&&c.expandable)switch(r){case"current":break;case"expand":c.expanded=!0;break;case"collapse":c.expanded=!1;break;default:c.expandable=!1}return delete c.width,c}}}void 0===o&&(o=[]),void 0===n&&(n=[]),e=e&&!!this.grid.layoutManager.isColumnFitted;for(var a=this._root._items,l=[],h=0,u=a.length;h<u;h++)l.push(s.call(this,a[h]));return l},i.prototype.expandAll=function(t,e){this._root.expandAll(t,e)},i.prototype.isShowing=function(t){for(var e=t;e&&e.parent;){if(e.parent.visibles.indexOf(e)<0)return!1;e=e.parent}return!0},i.prototype.isDefault=function(){return!1},i.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateCellLayouts()}},i.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},i.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},i.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},i.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,o=e.length;i<o;i++){var n=e[i],r=this.layoutByColumn(n);if(r&&r.canMerge()){var a=r.merges;a||(a=new s.ColumnMergeManager(r)),a.clear(),a.initialize(10),a.refreshRooms(0,t.itemCount-1,!0)}}},i.prototype.$_prepareLayout=function(t,e,i){for(var o=0,n=this._root.visibleCount;o<n;o++)this._root.getVisible(o)._prepareLayout(t,o<e,o>=n-i)},i.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},i.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},i.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var h=l[a],u=0;u<h.length;){var d=h[u];if(d._defColSpan=1,d.isNull)u++;else for(;++u<h.length;){var c=h[u];if(!(!c||c.isProxy&&c.source===d||c.isNull&&c.group===d.group))break;d._defColSpan++}}},i.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&t.$_collectCellWidths(e);for(var i=this._cellWidths=[],o=0,n=t.cols;o<n;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},i.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},i.prototype._columnsChanged=function(t){},i.prototype._columnChanged=function(t){},i.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},i.prototype._itemWidthChanged=function(t){this.invalidateSize()},i.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},i.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},i.prototype.$_changeCellWidths=function(t,e,i,o){for(var n=this._cellWidths,r=[],s=0,a=0;a<e;a++)s+=n[t+a],r.push(s);var l=i/s;for(a=0;a<e-1;a++)r[a]=Math.round(r[a]*l);r[e-1]=i;for(a=e-1;a>0;a--)n[t+a]=Math.max(n[t+a]+r[a]-r[a-1],o);n[t]=Math.max(n[t]+r[0],o),this.invalidateSize()},i.prototype.$_calcGroupWidths=function(){var t=this._cellWidths;!function e(i){for(var o=0,n=0;n<i._clen;n++)o+=t[i.col+n];i._width=i._cellWidth=o;for(var r=0,s=i.visibles;r<s.length;r++){var a=s[r];a instanceof y&&e(a)}}(this._root)},i.prototype.fireExpanding=function(t,e){return this.fireConfirmEvent(e?i.LAYOUT_EXPANDING:i.LAYOUT_COLLAPSING,t)},i.prototype.fireExpanded=function(t,e){this.fireEvent(e?i.LAYOUT_EXPANDED:i.LAYOUT_COLLAPSED,t)},i.LAYOUT_EXPANDING="onLayoutExpanding",i.LAYOUT_COLLAPSING="onLayoutCollapsing",i.LAYOUT_EXPANDED="onLayoutExpanded",i.LAYOUT_COLLAPSED="onLayoutCollapsed",i}(n.EventAware);t.GridCellLayout=T;var D=function(t){function i(e){return t.call(this,e)||this}return e.__extends(i,t),i.prototype._columnsChanged=function(e){this.setColumns(e),t.prototype._columnsChanged.call(this,e)},i.prototype.addLayout=function(t){return null},i.prototype.removeLayout=function(t){},i.prototype.isDefault=function(){return!0},i}(T);t.DefaultCellLayout=D}(So)),So}function Do(){return Eo||(Eo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CellRange=t.DummyCellIndex=t.CellIndex=t.FocusMoveStep=t.VerticalMoveStep=void 0;var e,i,o=d,n=G(),r=xo(),s=To();!function(t){t.ROW="row",t.CELL="cell"}(e=t.VerticalMoveStep||(t.VerticalMoveStep={})),function(t){t.GROUP="group",t.CELL="cell"}(i=t.FocusMoveStep||(t.FocusMoveStep={}));var a=function(t){function n(e,i,o){void 0===i&&(i=-1);var n=t.call(this,!0)||this;return n._itemIndex=-1,n._grid=e,n._itemIndex=i,n._layout=o instanceof r.GridColumn?o.layout:o,n}return o.__extends(n,t),n.temp=function(t,e,i){return void 0===e&&(e=0),n.$_temp||(n.$_temp=new n),n.$_temp._grid=t,n.$_temp._itemIndex=e,n.$_temp._layout=i instanceof s.CellLayoutItem?i:i&&i.layout,n.$_temp},n.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},n.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},n.clearTemp=function(){n.$_temp&&(n.$_temp=n.$_temp.dispose())},n.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},n.prototype._doDispose=function(){this._grid=null,this._layout=null,t.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t}}),_dp(n,"layout",{get:function(){return this._layout},set:function(t){this._layout=t}}),_dp(n,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout}}),_dp(n,"dataColumn",{get:function(){var t=this.column;return t instanceof r.DataColumn?t:null}}),_dp(n,"valueColumn",{get:function(){var t=this.column;return t instanceof r.ValueColumn?t:null}}),_dp(n,"dataField",{get:function(){var t=this.dataColumn;return t instanceof r.DataColumn?t.dataIndex:-1}}),_dp(n,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)}}),_dp(n,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}}}),_dp(n,"fieldName",{get:function(){return this.dataColumn&&this.dataColumn.fieldName},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}}}),_dp(n,"fieldIndex",{get:function(){return this.dataColumn&&this.dataColumn.fieldIndex},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}}}),_dp(n,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1}}),_dp(n,"value",{get:function(){var t=this.column;if(t instanceof r.DataColumn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}}}),_dp(n,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1}}),_dp(n,"rowFixed",{get:function(){if(this._grid){var t=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1}}),_dp(n,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1}}),_dp(n,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1}}),_dp(n,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):s.CellLayoutGroupItem.isTop(this._layout))}}),_dp(n,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):s.CellLayoutGroupItem.isBottom(this._layout))}}),_dp(n,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&s.CellLayoutGroupItem.isLeft(this._layout):0==this._layout.vindex}return!1}}),_dp(n,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&s.CellLayoutGroupItem.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1}}),_dp(n,"isFirst",{get:function(){if(this._layout&&(this._grid&&this._grid.visibleLayoutCount>0))return s.CellLayoutItem.getSource(this._grid.activeCellLayout.first)===this._layout;return!1}}),_dp(n,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn);if(i>=0){for(var o=i;o--;){var s=e[o];if(s instanceof r.SeriesColumn)return!1;var a=n.temp(t,this.itemIndex,s);if(t.getWritableAt(a))return!1}return!0}}return!1}}),_dp(n,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn)+1,o=e.length;i<o;i++){var s=e[i];if(s instanceof r.SeriesColumn)return!1;var a=n.temp(t,this.itemIndex,s);if(t.getWritableAt(a))return!1}return!0}}),_dp(n,"isLast",{get:function(){if(this._layout&&(this._grid&&this._grid.visibleLayoutCount>0))return s.CellLayoutItem.getSource(this._grid.activeCellLayout.last)===this._layout;return!1}}),n.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof r.GridColumn?e.layout:e,this},n.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},n.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},n.prototype.clone=function(){return new n(this._grid,this._itemIndex,this._layout)},n.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},n.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},n.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},n.prototype.first=function(){this._grid&&(this._itemIndex=0)},n.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},n.prototype.right=function(){if(this.grid.editOptions.focusMoveStep!==i.GROUP){var t=this._grid&&this.$_gridLayout().getRightOf(this._layout);t&&(this._layout=t)}else this.next()},n.prototype.left=function(){if(this.grid.editOptions.focusMoveStep!==i.GROUP){var t=this._grid&&this.$_gridLayout().getLeftOf(this._layout);t&&(this._layout=t)}else this.prev()},n.prototype.next=function(){if(this.grid.editOptions.focusMoveStep!==i.GROUP){var t=h(this._grid,this._layout);if(t)return this._layout=t,!0}else{var e=this.layout.root.vindex;e<this.grid.activeCellLayout.visibleCount-1&&(this._layout=this.grid.activeCellLayout.getVisible(e+1).first)}},n.prototype.prev=function(){if(this.grid.editOptions.focusMoveStep!==i.GROUP){var t=u(this._grid,this._layout);if(t)return this._layout=t,!0}else{var e=this.layout.root.vindex;e>0&&(this._layout=this.grid.activeCellLayout.getVisible(e-1).first)}},n.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},n.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},n.prototype.firstCell=function(){this._layout=this._grid&&s.CellLayoutItem.getSource(this.grid.activeCellLayout.first)},n.prototype.lastCell=function(){this._layout=this.grid&&s.CellLayoutItem.getSource(this.grid.activeCellLayout.last)},n.prototype.down=function(t,o,n){if(void 0===t&&(t=e.ROW),this._grid)return this.itemIndex<this._grid.itemCount-1&&this.grid.editOptions.focusMoveStep===i.GROUP?(this.incRow(1),void(this.layout=this.layout.root.first)):void(t==e.ROW&&!o||this.isBottom||n?this._itemIndex<this._grid.itemCount-1&&(t==e.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},n.prototype.up=function(t,o,n){if(void 0===t&&(t=e.ROW),this._grid){if(this.itemIndex>0&&this.grid.editOptions.focusMoveStep===i.GROUP)return this.incRow(-1),void(this.layout=this.layout.root.first);if(t==e.ROW&&!o||this.isTop||n){if(this._itemIndex>0){if(t==e.CELL)if(this._grid.spanned){var r=this._grid.$_getUpperOfCell(this);this._layout=r||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout}},n.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},n.prototype.assignFrom=function(e){e instanceof n?(this._grid=e._grid,this._layout=e._layout,this._itemIndex=e._itemIndex):t.prototype.assignFrom.call(this,e)},n.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},n.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},n.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},n}(n.Base);t.CellIndex=a;var l=function(t){function e(e,i,o){var n=t.call(this,e,i&&i.index,o)||this;return n._item=i,n}return o.__extends(e,t),e.tempItem=function(t,i,o){return e.$_itemTemp||(e.$_itemTemp=new e),e.$_itemTemp._grid=t,e.$_itemTemp._item=i,e.$_itemTemp._itemIndex=i.index,e.$_itemTemp._layout=o instanceof s.CellLayoutItem?o:o&&o.layout,e.$_itemTemp},_dp(e,"item",{get:function(){return this._item}}),e}(a);t.DummyCellIndex=l;var h=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=s.CellLayoutGroupItem.getNext(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)+1,r=i.layoutCount;n<r;n++){if((o=i.getLayout(n))instanceof s.CellLayoutColumnItem)return o;if(o instanceof s.CellLayoutGroupItem&&(o=s.CellLayoutItem.getSource(o.first)))return o}},u=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=s.CellLayoutGroupItem.getPrev(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)-1;n>=0;n--){if((o=i.getLayout(n))instanceof s.CellLayoutColumnItem)return o;if(o instanceof s.CellLayoutGroupItem&&(o=s.CellLayoutItem.getSource(o.last)))return o}},c=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return o.__extends(e,t),e.$_setRange=function(t,e,i,o,n){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=n.col?i:n,t._col2=i.col<=n.col?n:i,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,t.layout,i.itemIndex,i.layout);var o=new e;return o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,t.layout,i.itemIndex,i.layout):(o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o)},e.createRange=function(t,i,o,n){return e.$_setRange(new e,t,i,o,n)},_dp(e,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2}}),_dp(e,"r1",{get:function(){return this._row1}}),_dp(e,"c1",{get:function(){return this._col1}}),_dp(e,"r2",{get:function(){return this._row2}}),_dp(e,"c2",{get:function(){return this._col2}}),_dp(e,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(e,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(e,"firstCell",{get:function(){var t=new a;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t}}),_dp(e,"lastCell",{get:function(){var t=new a;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t}}),e.prototype.contains=function(t,e){if(e){var i=e.col;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else{e=this._col1;this._col1=this._col2,this._col2=e}return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(n.Base);t.CellRange=c}(fi)),fi}var ko,Mo={},Lo={};function Oo(){if(ko)return Lo;ko=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.RowGroupSummaryRuntime=Lo.ColumnSummaryRuntime=Lo.SummaryExpressionRuntime=void 0;var t=d,e=Y(),i=function(i){function o(){return i.call(this)||this}return t.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){switch(t){case o.ID_COUNT:return this._getCount();case o.ID_SUM:return this._getSum();case o.ID_MAX:return this._getMax();case o.ID_MIN:return this._getMin();case o.ID_AVG:return this._getAvg();case o.ID_VAR:return this._getVar();case o.ID_VARP:return this._getVarp();case o.ID_STDEV:return this._getStdev();case o.ID_STDEVP:return this._getStdevp();case o.ID_DATA_COUNT:return this._getDataCount();case o.ID_DATA_AVG:return this._getDataAvg()}throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,i){throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.evaluateIndexerS=function(t,i,o){throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.ID_COUNT=0,o.ID_SUM=1,o.ID_MAX=2,o.ID_MIN=3,o.ID_AVG=4,o.ID_VAR=5,o.ID_VARP=6,o.ID_STDEV=7,o.ID_STDEVP=8,o.ID_DATA_COUNT=9,o.ID_DATA_AVG=10,o.IDENTS={count:o.ID_COUNT,sum:o.ID_SUM,max:o.ID_MAX,min:o.ID_MIN,avg:o.ID_AVG,var:o.ID_VAR,varp:o.ID_VARP,stdev:o.ID_STDEV,stdevp:o.ID_STDEVP,datacount:o.ID_DATA_COUNT,dataavg:o.ID_DATA_AVG},o}(e.ExpressionRuntime);Lo.SummaryExpressionRuntime=i;var o=function(o){function n(){return o.call(this)||this}return t.__extends(n,o),n.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,o.prototype._doDispose.call(this)},n.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:o.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIndexerI=function(t,o){if(this._summarizer){if(o<0||o>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds: "+o);switch(t){case i.ID_SUM:return this._summarizer.getSum(o);case i.ID_COUNT:return this._summarizer.getCount(o);case i.ID_MAX:return this._summarizer.getMax(o);case i.ID_MIN:return this._summarizer.getMin(o);case i.ID_AVG:return this._summarizer.getAvg(o);case i.ID_VAR:return this._summarizer.getVar(o);case i.ID_VARP:return this._summarizer.getVarp(o);case i.ID_STDEV:return this._summarizer.getStdev(o);case i.ID_STDEVP:return this._summarizer.getStdevp(o);case i.ID_DATA_COUNT:return this._summarizer.getDataCount(o);case i.ID_DATA_AVG:return this._summarizer.getDataAvg(o)}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case i.ID_SUM:case i.ID_COUNT:return 0;case i.ID_MAX:case i.ID_MIN:case i.ID_AVG:case i.ID_VAR:case i.ID_VARP:case i.ID_STDEV:case i.ID_STDEVP:return NaN}},n.prototype.evaluateIndexerS=function(t,o,n){if(this._summarizer&&this._ds){var r=n?this._ds.getFieldIndexC(o):this._ds.getFieldIndex(o);if(r<0||r>=this._fieldCount)throw new e.ExpressionEvaluationError("Data field index out of bounds: "+r);switch(t){case i.ID_SUM:return this._summarizer.getSum(r);case i.ID_COUNT:return this._summarizer.getCount(r);case i.ID_MAX:return this._summarizer.getMax(r);case i.ID_MIN:return this._summarizer.getMin(r);case i.ID_AVG:return this._summarizer.getAvg(r);case i.ID_VAR:return this._summarizer.getVar(r);case i.ID_VARP:return this._summarizer.getVarp(r);case i.ID_STDEV:return this._summarizer.getStdev(r);case i.ID_STDEVP:return this._summarizer.getStdevp(r)}throw new e.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case i.ID_SUM:case i.ID_COUNT:return 0;case i.ID_MAX:case i.ID_MIN:case i.ID_AVG:case i.ID_VAR:case i.ID_VARP:case i.ID_STDEV:case i.ID_STDEVP:return NaN}},n.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},n.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},n.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},n.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},n.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},n.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},n.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},n.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},n.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},n.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},n.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},n}(i);Lo.ColumnSummaryRuntime=o;var n=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"item",{get:function(){return this._item}}),i.prototype.setItem=function(t){this._item=t},i.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},i.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},i.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},i.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},i.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},i.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},i.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},i.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},i.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},i.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},i.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},i}(o);return Lo.RowGroupSummaryRuntime=n,Lo}var Fo,Po={};var Bo,Vo={};var No,Ao={};function $o(){if(No)return Ao;No=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.GridFooterCollection=Ao.SummaryCollection=Ao.GridFooter=Ao.GridSummaryObject=Ao.FooterCell=Ao.SummaryCell=Ao.FooterExpressionRuntime=void 0;var t=d,e=Y(),i=Li(),o=xo(),n=C(),r=Ii(),s=S(),a=function(i){function o(){return i.call(this)||this}return t.__extends(o,i),o.prototype._doDispose=function(){this._cell=null,i.prototype._doDispose.call(this)},o.prototype.setCell=function(t){this._cell=t},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){switch(t){case o.ID_VALUE:return this._cell.value;case o.ID_FIELD:return this._cell.index.dataField;case o.ID_LEVEL:return this._cell.level}throw new e.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,e){},o.prototype.evaluateIndexerS=function(t,e,i){},o.ID_VALUE=0,o.ID_FIELD=1,o.ID_LEVEL=2,o.IDENTS={value:o.ID_VALUE,field:o.ID_FIELD,level:o.ID_LEVEL},o}(e.ExpressionRuntime);Ao.FooterExpressionRuntime=a;var l=function(e){function r(t){var i=e.call(this,t)||this;return i._childIndex=0,i._error=null,i._errorDetail=null,i}return t.__extends(r,e),r.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(r,"level",{get:function(){return 0}}),_dp(r,"error",{get:function(){return this._error}}),_dp(r,"errorDetail",{get:function(){return this._errorDetail}}),r.prototype.calculate=function(){var t=this.valueColumn,e=t&&t.grid,i=this._getSummary(t,this._childIndex);if(this._value=NaN,this._error=null,e&&i&&e.itemSource.summaryMode!=n.SummaryMode.NONE){i._value=void 0;var r=i.expression,s=void 0;try{if(r&&e.dataCount>0&&t instanceof o.DataColumn&&t.dataIndex>=0){var a=e.columnSummaryRuntime;a.setColumn(t,e.summarizer),s=i.evaluate(a,this._childIndex)}var l=i.valueCallback;l&&(s=l(e.handler,t,this._childIndex,i,s)),i._value=this._value=s}catch(t){this._error=t,this._errorDetail=t,i._value=void 0}}},_dp(r,"text",{get:function(){if(this._error)return i.GridCell.ERROR}}),_dp(r,"value",{get:function(){return this._value}}),r.prototype.getDisplayText=function(t){var e,i=this._value,o=this.valueColumn,n="";if(void 0!==i&&o)if("string"==typeof i)n=i+"";else if("boolean"==typeof i)n=String(i);else if(i instanceof Date){var r=t.datetimeWriter;n=r?r.getText(this._value):String(i)}else if("number"!=typeof i||isNaN(i))null==i&&(n="");else{var s=t.numberFormatter;n=s?s.getText(i):String(i)}if(n){var a=t.prefix;a&&(n=a+n),(a=t.suffix)&&(n+=a)}return!n&&o&&(n=null===(e=this._getSummary(o,this._childIndex))||void 0===e?void 0:e.text),n},r.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},r.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},r}(i.GridCell);Ao.SummaryCell=l;var h=function(e){function i(){return e.call(this,"footerCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)}}),i.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},i}(l);Ao.FooterCell=h;var u=function(e){function i(t){var i=e.call(this,t)||this;return i._minHeight=23,i._height=0,i._heights=[],i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._childIndex=0,i._displayIndex=0,i._runtime=new a,i._cell=i._createCell(),i.visible=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(i,"displayIndex",{get:function(){return this._displayIndex}}),_dp(i,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(i,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())}}),_dp(i,"heights",{get:function(){return this._heights},set:function(t){this._heights=t.slice(),this._changed()}}),_dp(i,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),i.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},i.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var o,n=t.getSummary(),r=this._cellStyleCallback;r&&(o=r(this._grid.handler,t),e.assign(o)),n&&(r=n.styleCallback)&&(o=r(this._grid.handler,t),e.assign(o));var s=e.styleName||n&&n.styleName||"";return i&&(e.styleName=this.getCellStyleName()+" "+s),e},i.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},i.prototype._visibleChanged=function(){e.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},i.prototype._doChanged=function(){e.prototype._doChanged.call(this),this.$_owner&&this.$_owner._doChanged()},i}(r.VisualObject);Ao.GridSummaryObject=u;var c=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),_dp(i,"footerIndex",{get:function(){return this._childIndex}}),i.prototype.getCellStyleName=function(){return i.CELL_CSS},i.prototype._createCell=function(){return new h},i.CELL_CSS="rg-footer-cell",i}(u);Ao.GridFooter=c;var p=function(e){function i(t){var i=e.call(this,t)||this;i._items=[],i._visibles=[];var o=i._createSummary(t);return o.$_owner=i,i._items.push(o),i._visibles.push(i._items[0]),i}return t.__extends(i,e),i.prototype._doDispose=function(){for(var t=0,i=this._items;t<i.length;t++){i[t].dispose()}this._items=null,this._visibles=null,e.prototype._doDispose.call(this)},_dp(i,"canShow",{get:function(){return this.visible&&this._visibles.length>0}}),_dp(i,"count",{get:function(){return this._items.length}}),_dp(i,"visibleCount",{get:function(){return this._visibles.length}}),_dp(i,"dirty",{get:function(){for(var t=this._dirty,e=0,i=this._visibles;e<i.length;e++){var o=i[e];t=t||o.dirty}return t}}),i.prototype.get=function(t){return this._items[t]},i.prototype.getVisible=function(t){return this._visibles[t]},i.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},i.prototype.assignFrom=function(t){var i;if(e.prototype.assignFrom.call(this,t),t&&t.items?i=s.Utils.makeArray(t.items):s.Utils.isArray(t)&&(i=t),i){for(var o=this._items,n=i.length;o.length>n;)o.pop().dispose();o.length=n;for(var r=0,a=i.length;r<a;r++){var l=i[r];l&&(o[r]||(o[r]=this._createSummary()),o[r].assignFrom(l),o[r].$_owner=this)}this.$_resetVisibles()}},i.prototype.clean=function(){for(var t=0,i=this._items;t<i.length;t++){i[t].clean()}e.prototype.clean.call(this)},i.prototype.toProxy=function(){for(var t=e.prototype.toProxy.call(this),i=[],o=0;o<this._items.length;o++)i.push(this._items[o].toProxy());return i.length>0&&(t.items=i.slice()),t},i.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},i.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var t=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this._changed()},i.prototype._doChanged=function(){e.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(r.VisualObject);Ao.SummaryCollection=p;var _=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._createSummary=function(t){return new c(t||this._grid)},i}(p);return Ao.GridFooterCollection=_,Ao}var Ho,Uo,Go={},Wo={};function jo(){if(Ho)return Wo;Ho=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.SectionObject=void 0;var t=d,e=Li(),i=function(i){function o(t){var e=i.call(this,t)||this;return e._displayOrder=0,e._headText=null,e._footText=null,e._sumText=null,e._headCell=e._createHeadCell(),e._footCell=e._createFootCell(),e._sumCell=e._createSumCell(),e._filterCell=e._createFilterCell(),e.visible=!0,e}return t.__extends(o,i),_dp(o,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())}}),_dp(o,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())}}),_dp(o,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())}}),_dp(o,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())}}),_dp(o,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(o,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),_dp(o,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t}}),_dp(o,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),o.prototype.getHeadCell=function(){return this._headCell},o.prototype.getFootCell=function(){return this._footCell},o.prototype.getSumCell=function(){return this._sumCell},o.prototype.getFilterCell=function(){return this._filterCell},o.prototype._createHeadCell=function(){return new e.StyledCell(this)},o.prototype._createFootCell=function(){return new e.StyledCell(this)},o.prototype._createSumCell=function(){return new e.StyledCell(this)},o.prototype._createFilterCell=function(){return new e.StyledCell(this)},o.prototype._visibleChanged=function(){i.prototype._visibleChanged.call(this),this._visChanged=!0},o}(Ii().VisualObject);return Wo.SectionObject=i,Wo}function zo(){return Uo||(Uo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RowIndicator=t.RowIndicatorCell=t.StateMark=t.IndicatorValue=void 0;var e,i,o=d,n=Li(),r=jo(),s=di();!function(t){t.NONE="none",t.INDEX="index",t.REVERSE="reverse",t.ROW="row"}(e=t.IndicatorValue||(t.IndicatorValue={})),function(t){t.IMAGE="image",t.TEXT="text",t.NONE="none"}(i=t.StateMark||(t.StateMark={}));var a=function(t){function i(e){var i=t.call(this,"indicatorCell")||this;return i._itemState=s.ItemState.NORMAL,i._indicator=e,i}return o.__extends(i,t),i.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(i,"indicator",{get:function(){return this._indicator}}),_dp(i,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)}}),_dp(i,"text",{get:function(){var t,i=this._indicator,o=i.owner,n=this.index,r=n.item,a="",l=o.indicatorReverse(i.displayValue);if(r&&r.itemState==s.ItemState.NORMAL)switch(i.displayValue){case e.INDEX:case e.REVERSE:(t=o.getIndicatorIndex(r,l))>=0&&(t+=i.indexOffset,!i.zeroBase&&t++,a=String(t));break;case e.ROW:r.isDataRow&&(t=n.dataRow,t+=i.rowOffset,i.zeroBase||t++,a=String(t))}return a}}),_dp(i,"value",{get:function(){return null}}),i}(n.GridCell);t.RowIndicatorCell=a;var l=function(t){function n(o){var n=t.call(this,o)||this;return n._displayValue=e.INDEX,n._zeroBase=!1,n._indexOffset=0,n._rowOffset=0,n._minWidth=32,n._maxWidth=0,n._width=0,n._selectable=!0,n._mark=i.IMAGE,n._showFocus=!0,n._showSelection=!0,n._displayWidth=0,n._cell=new a(n),n.headText="No.",n.footText="Σ",n.sumText="Σ",n}return o.__extends(n,t),n.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(n,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())}}),_dp(n,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())}}),_dp(n,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())}}),_dp(n,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())}}),_dp(n,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(n,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(n,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(n,"displayWidth",{get:function(){return this._displayWidth}}),_dp(n,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())}}),_dp(n,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(n,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())}}),_dp(n,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),n.prototype.getCellType=function(){return"indicator"},_dp(n,"staticOrder",{get:function(){return 0}}),n.prototype.getCell=function(t){var e=this._cell;if(e.setIndex(t),t.item){var i=t.item.itemState;i==s.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==t.itemIndex&&(i=s.ItemState.FOCUSED),e.itemState=i}return e},n.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},n.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},n.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},n.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"},n}(r.SectionObject);t.RowIndicator=l}(Go)),Go}var Yo,qo={};function Xo(){if(Yo)return qo;Yo=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.StateBar=qo.StateBarCell=void 0;var t=d,e=Li(),i=jo(),o=D(),n=zo(),r=function(e){function i(t){var i=e.call(this,"stateBarCell")||this;return i._bar=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._bar=null,e.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]}}),_dp(i,"value",{get:function(){return null}}),i}(e.GridCell);qo.StateBarCell=r;var s=function(e){function i(t){var i=e.call(this,t)||this;return i._width=20,i._mark=n.StateMark.IMAGE,i._stateTexts={},i._errorVisible=!1,i._stateTexts[o.RowState.CREATED]="C",i._stateTexts[o.RowState.UPDATED]="U",i._stateTexts[o.RowState.DELETED]="D",i._stateTexts[o.RowState.CREATE_AND_DELETED]="X",i._cell=new r(i),i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(i,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(i,"stateTexts",{get:function(){return t.__assign({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}}}),_dp(i,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())}}),i.prototype.getCellType=function(){return"state"},_dp(i,"staticOrder",{get:function(){return 1e3}}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},i.prototype.getHeadStyleName=function(){return"rg-statebar-head"},i.prototype.getFootStyleName=function(){return"rg-statebar-foot"},i.prototype.getSumStyleName=function(){return"rg-statebar-sum"},i.prototype.getFilterStyleName=function(){return"rg-statebar-filter"},i}(i.SectionObject);return qo.StateBar=s,qo}var Ko,Jo={};function Zo(){if(Ko)return Jo;Ko=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.CheckBarMergeManager=Jo.CheckBarMergeRoom=Jo.CheckBarMergeRule=Jo.IndexRange=Jo.CheckBar=Jo.CheckBarCell=void 0;var t=d,e=Li(),i=jo(),o=Do(),n=wo(),r=Y(),s=di(),a=pi(),l=G(),h=to(),u=C(),c=function(e){function i(){return e.call(this,"checkBarCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"getText",{get:function(){return String(this.index.dataRow)}}),_dp(i,"value",{get:function(){return this.item.checked}}),i}(e.GridCell);Jo.CheckBarCell=c;var p=function(e){function i(t){var i=e.call(this,t)||this;return i._width=20,i._exclusive=!1,i._showAll=!0,i._showGroup=!0,i._visibleOnly=!1,i._checkableOnly=!0,i._syncHeadCheck=!1,i._useImages=!1,i._checkLocation=u.ColumnHeaderItemLocation.TOP,i._itemGap=5,i._fieldIndex=-1,i._breakMergeOnEmpty=!1,i._cell=new c,i._merged=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(i,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())}}),_dp(i,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(i,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())}}),_dp(i,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._grid.itemSource.setGroupCheckable(t),this._changed())}}),_dp(i,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())}}),_dp(i,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())}}),_dp(i,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())}}),_dp(i,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()}}),_dp(i,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())}}),_dp(i,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid.setCheckFieldIndex(this._fieldIndex),this._changed())}}),_dp(i,"fieldIndex",{get:function(){return this._fieldIndex}}),_dp(i,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())}}),_dp(i,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?m.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))}}),_dp(i,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())}}),_dp(i,"focusMove",{get:function(){return!!this._focusMove},set:function(t){this._focusMove=t}}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},i.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},i.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},i.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},i.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},i.prototype.canMerge=function(){return null!=this._mergeRuleObj},i.prototype.getCellType=function(){return"check"},_dp(i,"staticOrder",{get:function(){return 2e3}}),_dp(i,"merges",{get:function(){return this._merges}}),i.prototype._doChanged=function(){this._grid&&(this._grid._itemCheckChanged=this._syncHeadCheck)},_dp(i,"merged",{get:function(){return this._merged}}),i}(i.SectionObject);Jo.CheckBar=p;var _=function(e){function i(){var t=e.call(this)||this;return t._row1=0,t._row2=0,t}return t.__extends(i,e),i.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},i.create=function(t,e){if(e&&t!==e)return i.$_setRange(new i,t.itemIndex,e.itemIndex);var o=new i;return o._row1=o._row2=t.itemIndex,o},i.temp=function(t,e){var o=i.$_TEMP;return e&&t!==e?i.$_setRange(o,t.itemIndex,e.itemIndex):(o._row1=o._row2=t.itemIndex,o)},i.createRange=function(t,e){return i.$_setRange(new i,t,e)},_dp(i,"empty",{get:function(){return this._row2<this._row1}}),_dp(i,"r1",{get:function(){return this._row1}}),_dp(i,"r2",{get:function(){return this._row2}}),_dp(i,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(i,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(i,"firstCell",{get:function(){var t=new o.CellIndex;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t}}),_dp(i,"lastCell",{get:function(){var t=new o.CellIndex;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t}}),i.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},i.prototype.intersectsWith=function(t){return!1},i.NULL=new i,i.$_TEMP=new i,i}(l.Base);Jo.IndexRange=_;var f=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._ds=null,t._fieldCount=0,t}return t.__extends(i,e),i.prototype._doDispose=function(){this._item=null,this._ds=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setCell=function(t){this._item=t.item},i.prototype.setItem=function(t){this._item=t},i.prototype.clear=function(){this._item=null,this._ds=null},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_GROUP:return this._item.parent}throw new r.ExpressionEvaluationError("Invalid identifier key: "+t)}},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new r.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}throw new r.ExpressionEvaluationError("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new r.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var n=o?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(n<0||n>=this._fieldCount)throw new r.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(n)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(r.ExpressionRuntime),g={},m=function(e){function i(t){var o=e.call(this)||this;return o._runtime=i.$_runtime=i.$_runtime||new f,o.criteria=t,o}return t.__extends(i,e),i.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new i(e):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,e.prototype._doDispose.call(this)},_dp(i,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?r.ExpressionParser.Default.parse(t,null):null,this._changed())}}),i.prototype.parseInit=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var h=null;i<a&&(h=t.getItem(i),!this.$_isRow(h,false));)n[i]=i+1,i++;if(!(i>=a)){this._runtime.setItem(h);var u=this._exprNode.evaluate(this._runtime),d=h.checked,c=i;if(n[c]=c+1,!(h.dataRow>=l)){this._runtime.setItem(h);for(var p=i+1;p<a;p++)if(h=t.getItem(p),this.$_isRow(h,false)){if(h.dataRow>=l)break;this._runtime.setItem(h);var _=this._exprNode.evaluate(this._runtime),f=h.checked;if(p==s||void 0===_&&r||(_ instanceof Date&&u instanceof Date?+_!=+u:_!=u)||f!=d){if(p>=o)break;c=p,u=_,d=f}n[p]=c+1}else{if(p>=o)break;u=g,c=p,n[p]=c+1}}}}},i.prototype.parseBounds=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=!1,a=t.itemCount;if(!(a<1)){var l,h,u,d=t.fixedCount,c=g,p=Math.max(0,i),_=p,f=-1;if(this._runtime.setDataSource(t.dataSource),p>0&&n[p]<=0){var m=t.getItem(p);if(this.$_isRow(m,s)){for(this._runtime.setItem(m),h=this._exprNode.evaluate(this._runtime),u=m.checked,p--;p>=0&&(m=t.getItem(p),this.$_isRow(m,s))&&(this._runtime.setItem(m),c=this._exprNode.evaluate(this._runtime),l=m.checked,!(p==d||void 0===c&&r||(c instanceof Date&&h instanceof Date?+c!=+h:c!=h)||u!=l));)p--;for(var y=_-1;y>p;y--)n[y]=p+2;_-1>p&&(f=p+1)}else{n[p]=p+1;for(y=_-1;y>p;y--)n[y]=p+2;for(_-1>p+1&&(f=p+2),p--;p>=0&&n[p]<=0&&!this.$_isRow(t.getItem(p),s);)n[p]=p+1,p--}}for(p=Math.max(0,i);p<=o&&n[p]>0;)p++;for(;p<=o&&!this.$_isRow(t.getItem(p),s);)n[p]=p+1,p++;if(p<o){_=p;m=t.getItem(p);for(this._runtime.setItem(m),h=this._exprNode.evaluate(this._runtime),u=m.checked,p++;p<a;)if(m=t.getItem(p),this.$_isRow(m,s)){if(this._runtime.setItem(m),c=this._exprNode.evaluate(this._runtime),l=m.checked,p==d||void 0===c&&r||(c instanceof Date&&h instanceof Date?+c!=+h:c!=h)||u!=l){var v=_;f>=0&&(v=f,f=-1);for(y=_;y<p;y++)n[y]=v+1;if(p>=o)break;h=c,u=l,_=p}else n[p]=_+1;p++}else{v=_;f>=0&&(v=f,f=-1);for(y=_;y<p;y++)n[y]=v+1;for(n[p]=p+1,p++;p<a&&!this.$_isRow(t.getItem(p),s);)n[p]=p+1,p++;if(_=p,p>=o)break}if(p==a&&(c instanceof Date&&h instanceof Date?+c==+h:c==h)||u!=l)for(v=f>=0?f:_,y=_;y<p;y++)n[y]=v+1}}},i.prototype.$_isRow=function(t,e){var i=t instanceof s.GridRow&&!(t instanceof a.DummyEditItem);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},i.$_runtime=null,i}(n.GridMergeRule);Jo.CheckBarMergeRule=m;var y=function(e){function i(t,i){var o=e.call(this)||this;return o._checkBar=i,o._head=t.top,o._tail=t.bottom,o}return t.__extends(i,e),i.borrow=function(t,e){var o=i.$_rooms.pop();return o?(o._head=t.top,o._tail=t.bottom):o=new i(t,e),o},i.returnTo=function(t){if(t){var e=i.$_rooms;e.indexOf(t)<0&&e.push(t)}},_dp(i,"head",{get:function(){return this._head}}),_dp(i,"tail",{get:function(){return this._tail}}),_dp(i,"scope",{get:function(){return this._checkBar}}),_dp(i,"group",{get:function(){return null},set:function(t){}}),i.prototype.getHead=function(t){return t?t.set(this._head,null):t=new o.CellIndex(this._checkBar.owner,this._head,null),t},i.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new o.CellIndex(this._checkBar.owner,this._tail,null),t},i.prototype.isHead=function(t){return t.itemIndex==this._head},i.prototype.isTail=function(t){return t.itemIndex==this._tail},i.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},i.$_rooms=new Array,i}(n.GridMergeRoom);Jo.CheckBarMergeRoom=y;var v=-1,w=65535,x=function(e){function i(t){var i=e.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._checkBar=t,t._merges=i,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,e.prototype._doDispose.call(this)},_dp(i,"count",{get:function(){return this._rooms.length}}),i.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},i.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,o=this._checkBar._mergeRuleObj;if(o){for(var n=this._flags=new Array(i.itemCount),r=e.fixedOptions.mergeRows?0:i.fixedCount,s=i.itemCount;s--;)n[s]=0;o._checkBar=this._checkBar,o.parseInit(i,-1,r,t,n)}this._inited=!0}},i.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._checkBar.owner;if(o){var n=this._rooms,r=o.layoutManager.fixedItemCount,s=o.itemSource,a=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,a&&(a._checkBar=this._checkBar,a.parseBounds(s,-1,t,e,this._flags)),i)for(;l<r;){if(d=this.$_checkFixedMerge(s,l,r)){var u=new y(d,this._checkBar);this._fixedRooms.push(u),l=d.r2+1}else l+=1}for(l=t;l<=e;){var d;if(null!=(d=this.$_checkMerge(s,l,0==n.length,r))){var c=s.getItem(d.r2);if(c instanceof h.MergedGroupHeader||c instanceof h.MergedGroupFooter);else{u=new y(d,this._checkBar);this._rooms.push(u)}l=d.r2+1}else l+=1}}}},i.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},i.prototype.getRooms=function(){return this._rooms.slice()},i.prototype.scroll=function(t){},i.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},i.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=v;for(;i.length<t;)i.push(v)}var n=this._cells;for(o=0;o<n.length;o++)n[o]=v;for(;n.length<e;)n.push(v)},i.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){n=i[o];var r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},i.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+w;return i[t]=o,o},i.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+w;return i[t]=o,o},i.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>v:this._cells[t-e]>v},i.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>v&&this._fixedCells[t]<w:(t-=e,this._cells[t]>v&&this._cells[t]<w)},i.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=w:this._cells[t-e]>=w},i.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(r=this._fixedCells)[t],n=t+1;n<r.length&&r[n]-w==o;n++,i++);else{t-=e;var r;for(o=(r=this._cells)[t],n=t+1;n<r.length&&r[n]-w==o;n++,i++);}return i},i.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<n.length&&n[h]-w==r;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},i.prototype.$_checkFixedMerge=function(t,e,i){if(i>0){var o=e,n=this._flags[o];if(n<=0)return null;for(var r=e+1;r<=i;){if(r==i||this._flags[r]>n)return r>o+1?_.createRange(o,r-1):null;r++}}return null},i.prototype.$_checkMerge=function(t,e,i,o){if(e>=0){var n=e,r=this._flags[n];t.getItem(n);if(r<=0)return null;if(i)for(;n>o&&!(this._flags[n-1]<r);)n--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>r||this._flags[a]<=0)return a>n+1?_.createRange(n,a-1):t.getItem(n).isDataRow?null:_.createRange(n,a-1);a++}if(a>n)return a>n+1?_.createRange(n,a-1):t.getItem(n).isDataRow?null:_.createRange(n,a-1)}return null},i.MERGE_ROOMS="mergeRooms",i}(l.Base);return Jo.CheckBarMergeManager=x,Jo}var Qo,tn,en,on={},nn={},rn={},sn={},an={};function ln(){if(Qo)return an;Qo=1,Object.defineProperty(an,"__esModule",{value:!0}),an.Point=void 0;var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},_dp(t,"isEmpty",{get:function(){return 0===this.x||0===this.y}}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},t.prototype.setEmpty=function(){return this.x=this.y=0,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},t}();return an.Point=t,an}function hn(){if(tn)return sn;tn=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.ViewLayer=sn.LayerElement=sn.VisualElement=void 0;var t=d,e=et(),i=ln(),o=E(),n=S(),r=function(e){function r(t,i){void 0===i&&(i=null);var o=e.call(this)||this;o._x=0,o._y=0,o._width=0,o._height=0,o._visible=!0,o._mouseEnabled=!0,o._elements=null,o._dirty=!0,o._className="",o._name=i;var n=o._dom=o._createDom(t);return n&&o._initDom(n),o}return t.__extends(r,e),r.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),n.Utils.detach(this._dom),this._dom=null),this._elements){for(var t=0,i=this._elements;t<i.length;t++){i[t].dispose()}this._elements.length=0}this._parent=null,e.prototype._doDispose.call(this)},_dp(r,"name",{get:function(){return this._name}}),_dp(r,"container",{get:function(){return this._parent&&this._parent.container}}),_dp(r,"parent",{get:function(){return this._parent}}),_dp(r,"childCount",{get:function(){return this._elements?this._elements.length:0}}),_dp(r,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this}}),_dp(r,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())}}),_dp(r,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())}}),_dp(r,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())}}),_dp(r,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())}}),_dp(r,"right",{get:function(){return this._x+this._width}}),_dp(r,"bottom",{get:function(){return this._y+this._height}}),_dp(r,"position",{get:function(){return new i.Point(this._x,this._y)}}),_dp(r,"bounds",{get:function(){return new o.Rectangle(this._x,this._y,this._width,this._height)}}),_dp(r,"clientRect",{get:function(){return new o.Rectangle(0,0,this._width,this._height)}}),_dp(r,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())}}),_dp(r,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t}}),_dp(r,"isLayer",{get:function(){return!1}}),_dp(r,"clickable",{get:function(){return!1}}),_dp(r,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN}}),_dp(r,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN}}),_dp(r,"doc",{get:function(){return(0,n.getDoc)(this._dom)}}),_dp(r,"style",{get:function(){return this._dom&&this._dom.style}}),r.prototype.isDom=function(t){return t===this._dom},r.prototype.canHover=function(){return!0},r.prototype.getChildren=function(){return this._elements&&this._elements.concat()},r.prototype.getChild=function(t){return this._elements[t]},r.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},r.prototype.contains=function(t){return this._elements&&this._elements.indexOf(t)>=0},r.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},r.prototype.addChild=function(t){return this.insertChild(-1,t)},r.prototype.insertChild=function(t,e){if(e&&!this.contains(e)){var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var n=this._elements[t]._dom;this._dom&&n&&this._dom.insertBefore(o,n)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0}return!1},r.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(e>=0)return this.removeChildAt(e)===t}return!1},r.prototype.removeChildAt=function(t){if(t>=0&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},r.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},r.prototype.clear=function(){var t=this._elements;if((t?t.length:0)>0){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},r.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++){e[t].visible=!1}},r.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,n=this._elements;o<n.length;o++){n[o].invalidate(t,!0)}},r.prototype.validate=function(){this._dirty=!1},r.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},r.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new o.Rectangle(this._x,this._y,this._width,this._height)},r.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new o.Rectangle(0,0,this._width,this._height)},r.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},r.prototype.containsInClient=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},r.prototype.parentToElement=function(t,e,o){for(var n=this;n&&n!=t;)e-=n._x,o-=n._y,n=n._parent;return new i.Point(e,o)},r.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e||(e=new o.Rectangle(0,0,this._width,this._height));i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},r.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},r.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,n=this._y,r=this._parent;for(e&&(i+=e.x,n+=e.y);r&&r!==t;)i+=r._x,n+=r._y,r=r._parent;return e?new o.Rectangle(i,n,e.width,e.height):new o.Rectangle(i,n,this._width,this._height)},r.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var n=this._parent;n&&void 0!==n._x;)e+=n._x,i+=n._y,n=n._parent;return t?new o.Rectangle(e,i,t.width,t.height):new o.Rectangle(e,i,this._width,this._height)},r.prototype.pointByContainer=function(t,e){for(var o=this._parent;o&&void 0!==o._x;)t+=o._x,e+=o._y,o=o._parent;return new i.Point(t+this._x,e+this._y)},r.prototype.containerToElement=function(t,e){for(var o=this;o;)t-=o._x,e-=o._y,o=o._parent;return new i.Point(t,e)},r.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),t=this.container.toScreen(t)},r.prototype.hitTest=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},r.prototype.findChildAt=function(t,e,i){var o=this._elements,n=o?o.length:0;if(n>0)for(var r=n-1;r>=0;r--){var s=o[r];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var h=s.findChildAt(a,l,i);if(h)return h;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},r.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},r.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},r.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},r.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},r.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},r.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,n=t.height>>0;e==this._x&&i==this._y&&o==this._width&&n==this._height||(this._x=e,this._y=i,this._width=o,this._height=n,this.sizeChanged())},r.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},r.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},r.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},r.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},r.prototype._createDom=function(t){return t.createElement("div")},r.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},r.prototype._addEventListeners=function(t){},r.prototype._removeEventListeners=function(t){},r.prototype.$_attached=function(t){this._doAttached(t)},r.prototype._doAttached=function(t){},r.prototype.$_detached=function(t){this._doDetached(t)},r.prototype._doDetached=function(t){},r.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},r.prototype._getCssDisplay=function(){return"block"},r.prototype.resetStyleName=function(){this._setClassName(this._dom)},r.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},r.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},r.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},r.prototype._hoverChanged=function(){},r.prototype._visibleChanged=function(){},r.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},r.prototype._doSizeChanged=function(){},r}(e.EventAware);sn.VisualElement=r;var s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),_dp(i,"isLayer",{get:function(){return!0}}),i.prototype._getCssSelector=function(){},i.prototype._doDraw=function(t){},i}(r);sn.LayerElement=s;var a=function(e){function i(t,i){void 0===i&&(i=!1);var o=e.call(this,t)||this;return o._active=i,o}return t.__extends(i,e),_dp(i,"active",{get:function(){return this._active}}),i}(s);return sn.ViewLayer=a,sn}function un(){return en||(en=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionLayer=t.SelectionMask=t.SelectionView=t.ColumnSelection=t.RowSelection=t.BlockSelection=t.SelectionManager=t.SelectionItem=t.isColumnSelection=t.isRowSelection=t.isSingleSelectionStyle=t.SelectionDisplay=t.SelectionStyle=t.SelectionMode=void 0;var e,i,o,n=d,r=G(),s=Do(),a=et(),l=hn(),h=E(),u=S();!function(t){t.NONE="none",t.SINGLE="single",t.EXTENDED="extended"}(e=t.SelectionMode||(t.SelectionMode={})),function(t){t.BLOCK="block",t.GROUP="group",t.ROWS="rows",t.COLUMNS="columns",t.SINGLE_ROW="singleRow",t.SINGLE_COLUMN="singleColumn",t.SINGLE="single",t.NONE="none"}(i=t.SelectionStyle||(t.SelectionStyle={})),(o=t.SelectionDisplay||(t.SelectionDisplay={})).CELL="cell",o.CELL_AND_BORDER="cellAndBorder",o.MASK="mask";t.isSingleSelectionStyle=function(t){return t==i.SINGLE_ROW||t==i.SINGLE_COLUMN||t==i.SINGLE};t.isRowSelection=function(t){var e=t&&t.style;return e==i.ROWS||e==i.SINGLE_ROW};t.isColumnSelection=function(t){var e=t&&t.style;return e==i.COLUMNS||e==i.SINGLE_COLUMN};var c=function(t){function e(e,i){var o=t.call(this)||this;return o._manager=e,o._runStyle=i,o}return n.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(e,"grid",{get:function(){return this._manager&&this._manager.grid}}),_dp(e,"runStyle",{get:function(){return this._runStyle}}),e.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows(),o=this.grid,n={};if(i&&i.rows&&i.rows.length>0&&i.fields&&i.fields.length>0){for(var r=0;r<i.rows.length;r++){for(var s=[],a=0;a<i.fields.length;a++)o.getWritable(o.getItemIndexOfRow(i.rows[r]),o.columnByField(i.fields[a]))&&s.push(i.fields[a]);s.length&&(n[i.rows[r]]=s.slice())}e.fillValue(n,t)}},e.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},e.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a)}return i},e.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a.index)}return i},e.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,n=i.bottom,r=o;r<=n;r++){var s=t.getItem(r);if(s&&s.dataRow>=0){var a=s.dataRow;a>=0&&e.push(a)}}return e},e.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},e.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),o=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:o?o.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},_dp(e,"startItem",{get:function(){return this.getBounds().r1}}),_dp(e,"startRow",{get:function(){var t=this.grid.getItem(this.getBounds().r1);return t?t.dataRow:-1}}),_dp(e,"startColumn",{get:function(){return this.getBounds().c1.firstColumn.name}}),_dp(e,"endItem",{get:function(){return this.getBounds().r2}}),_dp(e,"endRow",{get:function(){var t=this.grid.getItem(this.getBounds().r2);return t?t.dataRow:-1}}),_dp(e,"endColumn",{get:function(){return this.getBounds().c2.firstColumn.name}}),_dp(e,"startLayout",{get:function(){return this.getBounds().c1}}),_dp(e,"endLayout",{get:function(){return this.getBounds().c2}}),e}(r.Base);t.SelectionItem=c;var p=function(o){function r(t){var e=o.call(this)||this;return e._items=[],e._locked=!1,e._grid=t,e}return n.__extends(r,o),r.prototype._doDispose=function(){this._grid=null,this._items=null,o.prototype._doDispose.call(this)},_dp(r,"grid",{get:function(){return this._grid}}),_dp(r,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==e.EXTENDED}}),_dp(r,"count",{get:function(){return this._items.length}}),_dp(r,"single",{get:function(){return 1==this._items.length&&this._items[0].single}}),r.prototype.lock=function(){this._locked=!0},r.prototype.unlock=function(){this._locked=!1},r.prototype.getItem=function(t){return this._items[t]},r.prototype.getItems=function(){return this._items.slice()},r.prototype.lastItem=function(){return this._items[this._items.length-1]},r.prototype.add=function(t,e,o){if(this._locked)return null;if(o==i.NONE)return this.clear(),null;this.exclusiveMode&&this.clear();var n=null;switch(o){case i.COLUMNS:n=new g(this,o,t.layout,e.layout);break;case i.SINGLE_COLUMN:n=new g(this,o,t.layout,t.layout);break;case i.ROWS:n=new f(this,o,t.itemIndex,e.itemIndex);break;case i.SINGLE_ROW:n=new f(this,o,t.itemIndex,t.itemIndex);break;case i.BLOCK:n=new _(this,o,t,e);break;case i.GROUP:(t=t.clone()).layout=t.layout.root.first,(e=e.clone()).layout=e.layout.root.last.source,n=new _(this,o,t,e);break;case i.SINGLE:n=new _(this,o,t,t)}return n&&this.$_addItem(n)},r.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);e>=0&&(this._items.splice(e,1),this.fireEvent(r.REMOVED,t),this._changed())}},r.prototype.clear=function(){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(r.CLEARED))},r.prototype.selectBlock=function(t,e){e&&this.clear(),this.containsCell(t)||this.$_addItem(new _(this,i.BLOCK,t,t))},r.prototype.selectRow=function(t,e){e&&this.clear(),this.containsItem(t,f)||this.$_addItem(new f(this,i.ROWS,t,t))},r.prototype.containsItem=function(t,e){for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];if((!e||n instanceof e)&&n.containsItem(t))return!0}return!1},r.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},r.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},r.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},r.prototype.normalize=function(){},r.prototype.canResize=function(e){return e&&!(0,t.isSingleSelectionStyle)(e._runStyle)},r.prototype._changed=function(t){this.fireEvent(r.CHANGED,t)},r.prototype.$_addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(r.ADDED,t),this._changed(t)),t},r.prototype.$_itemResized=function(t){this.fireEvent(r.RESIZED,t),this._changed(t)},r.prototype.$_ended=function(t){this.fireEvent(r.ENDED,t)},r.CHANGED="onSelectionChanged",r.ADDED="onSelectionAdded",r.REMOVED="onSelectionRemoved",r.CLEARED="onSelectionCleared",r.RESIZED="onSelectionResized",r.ENDED="onSelectionEnded",r}(a.EventAware);t.SelectionManager=p;var _=function(t){function e(e,i,o,n){var r=t.call(this,e,i)||this;return r._startIndex=o.clone(),r._endIndex=n.clone(),u.Utils.isDebugging()&&r._startIndex.layout,u.Utils.isDebugging()&&r._endIndex.layout,r}return n.__extends(e,t),_dp(e,"startIndex",{get:function(){return this._startIndex}}),_dp(e,"endIndex",{get:function(){return this._endIndex}}),_dp(e,"style",{get:function(){return this._runStyle||i.BLOCK}}),_dp(e,"single",{get:function(){return s.CellIndex.areEquals(this._startIndex,this._endIndex)}}),e.prototype.getBounds=function(){var t=this.grid;this._startIndex.normalize(t),this._endIndex.normalize(t);var e=this._startIndex.clone(),o=this._endIndex.clone();this._runStyle===i.GROUP&&(e.layout.root.vindex>o.layout.root.vindex&&(e=this._endIndex.clone(),o=this._startIndex.clone()),e.layout=e.layout.root.first,o.layout=o.layout.root.last);if(s.CellIndex.areEquals(e,o))return s.CellRange.create(e);var n=t.activeCellLayout._dataCells,r=e.layout,a=o.layout,l=void 0,h=void 0;return r.col<=a.col?(l=n[0][r.col],h=n[n.length-1][a.col]):(l=n[0][a.col],h=n[n.length-1][r.col]),s.CellRange.createRange(e.itemIndex,l,o.itemIndex,h)},e.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t>=e&&t<=i},e.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,o=this._endIndex.layout.distance;return i<o?e>=i&&e<=o:e>=o&&e<=i},e.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},e.prototype.resizeTo=function(t){var e=this.grid,i=e.displayOptions;e.isValid(t)&&!s.CellIndex.areEquals(t,this._endIndex)&&(i.selectAtSingleRow&&(t.itemIndex=this.startItem),this._endIndex.assign(t),this._resized())},e.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=this.getBounds(),n=this.single?[o.c1.boundColumn]:i.collectDataColumns(o.c1,o.c2);if(!n||(e=n.length)<1)return null;for(var r=o.r1,s=o.r2,a=[],l=r;l<=s;l++){var h=i.getItem(l);if(h&&h.isDataRow){var u={};u.__rowId=h.dataRow;for(var d=0;d<e;d++){var c=n[d];u[c.fieldName]=h.getData(c.dataIndex)}if(a.push(u),t>0&&a.length==t)break}}return a},e.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},e.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},e.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},e.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},e.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),n=[],r=[],s=i;s<=o;s++)n.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];r.push(h.dataIndex)}return{rows:n,fields:r}}},e.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},e}(c);t.BlockSelection=_;var f=function(t){function e(e,i,o,n){var r=t.call(this,e,i)||this;return r._startRow=o,r._endRow=n,r}return n.__extends(e,t),_dp(e,"startRow",{get:function(){return this._startRow}}),_dp(e,"endRow",{get:function(){return this._endRow}}),_dp(e,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)}}),_dp(e,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)}}),_dp(e,"style",{get:function(){return this._runStyle||i.ROWS}}),_dp(e,"single",{get:function(){return!1}}),e.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?s.CellRange.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):s.CellRange.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},e.prototype.contains=function(t,e){return this.containsItem(t)},e.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},e.prototype.containsLayout=function(t){return!0},e.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var n=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=n;a<=r;a++){var l=e.getItem(a);if(l&&l.isDataRow){var h={};h.__rowId=l.dataRow;for(var u=0;u<o;u++){var d=i[u];h[d.fieldName]=l.getData(d.dataIndex)}if(s.push(h),t>0&&s.length==t)break}}return s},e.prototype._inflateLeft=function(t){},e.prototype._inflateRight=function(t){},e.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),r=[],s=[],a=o;a<=n;a++)r.push(t.getItem(a).dataRow);for(var l=0,h=i;l<h.length;l++){var u=h[l];s.push(u.dataIndex)}return{rows:r,fields:s}}},e}(c);t.RowSelection=f;var g=function(t){function e(e,i,o,n){var r=t.call(this,e,i)||this;return r._startLayout=o,r._endLayout=n,r}return n.__extends(e,t),_dp(e,"startLayout",{get:function(){return this._startLayout}}),_dp(e,"endLayout",{get:function(){return this._endLayout}}),_dp(e,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout}}),_dp(e,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout}}),_dp(e,"style",{get:function(){return this._runStyle||i.COLUMNS}}),_dp(e,"single",{get:function(){return!1}}),e.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(e.col>i.col){var o=e;e=i,i=o}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var n=this.grid.itemCount-1;return s.CellRange.createRange(0,e,n,i)},e.prototype.contains=function(t,e){return this.containsLayout(e)},e.prototype.containsItem=function(t){return!0},e.prototype.containsLayout=function(t){return t.col>=this.leftLayout.col&&t.col<=this.rightLayout.col},e.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},e.prototype.moveRow=function(t){},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,n=[],r=0;r<o;r++){var s=e.getItem(r);if(s&&s.isDataRow){var a={};a.__rowId=s.dataRow;for(var l=0,h=i.length;l<h;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(n.push(a),t>0&&n.length==t)break}}return n},e.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},e.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},e.prototype._inflateTop=function(t){},e.prototype._inflateBottom=function(t){},e.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],n=[],r=0;r<i;r++)o.push(t.getItem(r).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];n.push(l.dataIndex)}return{rows:o,fields:n}}},e}(c);t.ColumnSelection=g;var m=function(t){function e(e){return t.call(this,e,"selectionView")||this}return n.__extends(e,t),e.prototype._getCssSelector=function(){return"rg-selection"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(l.LayerElement);t.SelectionView=m;var y=function(t){function e(e){var i=t.call(this,e,"selectionMask")||this;return i._toped=!1,i._bottomed=!1,i._lefted=!1,i._righted=!1,i._view=new m(e),i.addChild(i._view),i}return n.__extends(e,t),_dp(e,"item",{get:function(){return this._item}}),e.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},e.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e}(l.LayerElement);t.SelectionMask=y;var v=function(t){function e(e,i){var o=t.call(this,e.doc,i)||this;return o._pool=[],o._views={},o._rangeRect=new h.Rectangle,o._grid=e,o}return n.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new y(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},e.prototype.removeView=function(t){var e=t.$_hash,i=this._views[e];i&&(this.removeChild(i),this._pool.push(i),delete this._views[e])},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new h.Rectangle,i=Object.keys(this._views);for(var o in this._views){var n=this._views[o],r=n.item,a=!1;if(!(1===i.length&&r.single&&s.CellIndex.areEquals(r._startIndex,this._grid.focusedIndex))&&(n.prepare(),r instanceof f?(a=this.$_getSelectionRowsRect(t,r,n,e),n._lefted=!0,n._righted=!0):r instanceof g?(a=this.$_getSelectionColumnsRect(t,r,n,e),n._toped=!0,n._bottomed=!0):a=this.$_getSelectionRangeRect(t,r,n,e),a)){var l=t.contentBounds.y+t.footerBounds.y;e.bottom>l&&(n._bottomed=!0,e.bottom=l)}n.visible=a,n.visible&&(n.setRectI(e),n.updateElement(),n.invalidate())}},e.prototype.$_getSelectionRowsRect=function(t,e,i,o){var n,r,s=this._grid,a=e.getBounds(),l=a.r1,h=a.r2,u=t.itemCount,d=t.fixedItemCount,c=s.topIndex;if(d>0){if(l>=c+d+u||h<0||l>=d&&h<c+d)return!1;var p=t.fixedHeight+s.fixedOptions.rowBarHeight;l<d?n=t.getTableItemBounds(Math.max(0,l)):((n=t.getTableItemBounds(Math.max(0,l-c))).y<p&&(i._toped=!0),n.y=Math.max(n.y,p)),h<d?r=t.getTableItemBounds(h):l<=d&&h<d+c?r=t.getTableItemBounds(Math.min(d+c,d)-1):h>=c?(r=t.getTableItemBounds(Math.min(t.itemCount+d-1,h-c))).y=Math.max(r.y,p):r=n}else{if(!(u>0))return!1;if(l>=c+u||h<c)return!1;p=l-c;n=t.getTableItemBounds(Math.max(0,p)),r=t.getTableItemBounds(Math.min(u-1,h-c)),p<0&&(i._toped=!0)}return o.copy(n.union(r)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=t.rightLayoutCount>0?t.rightContentBounds.right:t.contentBounds.right,!0},e.prototype.$_getSelectionColumnsRect=function(t,e,i,o,n){var r=this._grid,s=e.getBounds(),a=t.fixedLayoutCount,l=t.rightLayoutCount;t.rightFirstLayout;var h=s.c1.col,u=s.c2.col;r.fixedOptions.colBarWidth;var d=t.getDataRect(s.c1),c=t.getDataRect(s.c2);if(o.left=Math.min(d.x,c.x),o.right=Math.max(d.right,c.right),o.y=t.contentBounds.y+t.headerBounds.bottom+t.summaryBounds.height,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),n&&n.copy(o),h>=a){var p=t.fixedContentBounds.right;o.x<p&&(i._lefted=!0,o.left=Math.max(o.left,p)),o.right<p&&(i._righted=!0,o.width=0)}if(l>0){var _=t.rightFirstLayout,f=t.rightContentBounds;o.left>f.left?o.width=0:u<_&&o.right>=t.rightContentBounds.left&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)}return!0},e.prototype.$_getSelectionRangeRect=function(t,e,i,o,n){var r=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,r)&&(o.y=r.y,o.bottom=r.bottom,this.$_getSelectionColumnsRect(t,e,i,r,n),o.x=r.x,o.right=r.right,n&&(n.y=o.y,n.height=o.height),!0)},e}(l.LayerElement);t.SelectionLayer=v}(rn)),rn}var dn,cn,pn={},_n={};function fn(){if(cn)return pn;cn=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.PopupCellEditor=pn.EditorMarquee=pn.NumberCellEditor=pn.MultiLineCellEditor=pn.PasswordCellEditor=pn.LineCellEditor=pn.TextCellEditor=pn.TextCellEditorBase=pn.EditMask=pn.CellEditor=void 0;var t=d,e=S(),i=et(),o=Do(),n=function(){if(dn)return _n;dn=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.DateTimeConverter=void 0;var t=$(),e=rt(),i=S(),o=function(){function o(i){this._format=i,this._reader=t.DateTimeReader.getReader(i),this._writer=e.DateTimeWriter.getFormatter(i),o.validateDateFormat(i)}return o.getConverter=function(t){var e=o.Formatters;if(e[t])return e[t];var i=new o(t);return e[t]=i},o.validateDateFormat=function(t){if(t=t&&t.trim()){var e=t.indexOf("a")>=0||t.indexOf("A")>=0;if(e&&t.indexOf("H")>=0)throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(t.indexOf("h")>=0&&!e)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}},_dp(o,"format",{get:function(){return this._format}}),o.prototype.getDate=function(t){return this._reader.toDate(t,!0)},o.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(e){return i.Utils.log("getDateNull Fail string => ".concat(t)),null}},o.prototype.getText=function(t){return this._writer.getText(t)},o.DEFAULT_FORMAT="yyyy/MM/dd",o.Formatters={},o.Default=o.getConverter(o.DEFAULT_FORMAT),o}();return _n.DateTimeConverter=o,_n}(),r=P(),s=E(),a=C(),l=_o(),h=pt(),u=hn(),c=e.Utils.isSafari?1:0,p=function(i){function h(t,o){var l=i.call(this)||this;if(l._textCase=a.TextInputCase.DEFAULT,l._readOnly=!1,l._textReadOnly=!1,l._allowEmpty=!1,l._isMobile=e.Utils.isMobile(),l._isTablet=e.Utils.isTablet(),l._started=!1,l._dateConverter=n.DateTimeConverter.Default,l._boolConverter=r.BooleanConverter.Default,l._cellBounds=new s.Rectangle,l._checkHangeul=!1,l._composing=!1,l._grid=t,l._options=t.editorOptions,l._parentElement=o,l._editor=l._createEditor(o),l._editor.className=h.EDITOR_CSS+l._getInputSelector(),l._container&&(l._container.className=h.CONTAINER_CSS),l._editor.$_owner=l,l._editIndex=t.getIndex(),l._editor){var u=t.container;u.$_addListener(l._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(l),!1),u.$_addListener(l._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(l),!1),u.$_addListener(l._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(l),!1),u.$_addListener(l._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(l),!1)}return l.setVisible(!1,!0),l.$_setEditorId(l._editor),l}return t.__extends(h,i),h.copyProc=function(t,e){if(!t.isDisabled()&&!t.editing){var i=t._grid.copyToClipboard(e,null);return null!=i&&(e.clipboardData?e.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i)),e.preventDefault()}},h.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},h.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},h.prototype._doDispose=function(){this.unprepare(),this._editor=e.Utils.detach(this._editor),this._container=e.Utils.detach(this._container),this._container=null,this._grid=null,this._controller=null,i.prototype._doDispose.call(this)},_dp(h,"native",{get:function(){return!1}}),_dp(h,"buttonCount",{get:function(){return 0}}),_dp(h,"hasList",{get:function(){return!1}}),_dp(h,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())}}),_dp(h,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(h,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateConverter=t?n.DateTimeConverter.getConverter(t):n.DateTimeConverter.Default)}}),_dp(h,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())}}),_dp(h,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())}}),_dp(h,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,t?(this._saveBoolConverter||(this._saveBoolConverter=new r.BooleanConverter(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=r.BooleanConverter.Default)}}),_dp(h,"editor",{get:function(){return this._editor}}),_dp(h,"visible",{get:function(){return parseInt(this._container.style.width)>c&&parseInt(this._container.style.height)>c}}),h.prototype.setVisible=function(t,i){void 0===i&&(i=!1);var o=i?!t:this.visible;if(!t&&(this._container.style.width=c+"px",this._container.style.height=c+"px",e.Utils.isMobile())){var n=this._grid;if(n){var r=n.container._containerDom,s=(0,e.getDoc)(this._container);this._editor===s.activeElement&&r&&r.focus({preventScroll:!0})}else this._editor.blur()}t!=o&&this._doVisibleChanged(t)},h.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},_dp(h,"readOnly",{get:function(){return this._readOnly},set:function(t){var i=(0,e.getWin)(this._container);this._editor instanceof i.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)}}),_dp(h,"textReadOnly",{get:function(){return this._textReadOnly}}),h.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},_dp(h,"allowEmpty",{get:function(){return this._allowEmpty}}),h.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},_dp(h,"editing",{get:function(){return this._started}}),_dp(h,"editIndex",{get:function(){return this._editIndex}}),_dp(h,"value",{get:function(){return this._editor.value}}),_dp(h,"listing",{get:function(){return!1}}),h.prototype.hasButton=function(t,e){return!1},h.prototype.applyOptions=function(t){t&&this.assignFrom(t)},h.prototype.setEditIndex=function(t){this._editIndex.assign(t)},h.prototype.setController=function(t){this._controller=t},h.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},h.prototype.unprepare=function(){},h.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},h.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},h.prototype.isEdited=function(){return!1},h.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},h.prototype.caretToLast=function(){},h.prototype.commit=function(){this._doCommit()},h.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},h.prototype.getEditValue=function(t,e){},h.prototype.setEditValue=function(t){this._oldValue=t},h.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},h.prototype.getEditText=function(){return""},h.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&e.Utils.isMobile()||this._selectAll())},h.prototype.clear=function(){var t=(0,e.getWin)(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},h.prototype.setFocus=function(){var t=!e.Utils.isMobile();!this._grid.handler._draggable&&(!this._isMobile||!this.hasList)&&this._editor.focus({preventScroll:t})},h.prototype.setEditorTitle=function(t){},h.prototype.setBounds=function(t,e,i,o,n){},h.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},h.prototype.closeList=function(t){},h.prototype.dropDownList=function(t){},h.prototype.buttonClicked=function(t,e){},h.prototype.buttonDown=function(t,e){},h.prototype.buttonUp=function(t,e){},h.prototype.setButtonStyle=function(t,e,i,o,n){return!1},h.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=a.TextInputCase.DEFAULT,this._checkHangeul=!1},h.prototype.$_setEditorId=function(t){},h.prototype._changed=function(){},h.prototype.$_setController=function(t){this._controller=t},h.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},h.prototype._isDateEditor=function(){return!1},h.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},h.prototype._valToStr=function(t){var i=this.editIndex,o="";try{if(void 0!==t||this._mask){var n=i.grid.dataSource.getField(i.dataField);if(n)switch(n.dataType){case a.ValueType.DATETIME:t&&(o=this._dateConverter.getText(t)),this._mask&&(o=this._mask.writeBuffer(o));break;case a.ValueType.BOOLEAN:o=this._boolConverter.toText(t);break;case a.ValueType.NUMBER:isNaN(t)||(o=e.Utils.toStr(t));break;case a.ValueType.OBJECT:var r=i.column._objectKey||n.objectKey;t&&(o=r?t[r]:null!=t&&"object"==typeof t?JSON.stringify(t):"");break;default:o=this._mask?this._mask.writeBuffer(t):t}else o=t}}catch(e){o=t}return null==o?"":o},h.prototype._strToVal=function(t){t=e.Utils.toStr(t);var i=this._editIndex,o=i.dataColumn&&this._textCase==a.TextInputCase.DEFAULT?i.dataColumn.textInputCase:this._textCase;try{var n=i.grid.dataSource.getField(i.dataField);if(n){var r=n.dataType;if(r==a.ValueType.DATETIME||t&&this._isDateEditor()&&r==a.ValueType.TEXT){var s=r==a.ValueType.DATETIME,l=null;return t&&t==this._nowChar&&(l=new Date),!l&&t&&t==this._todayChar&&(l=new Date).setHours(0,0,0,0),l||(this._mask&&(t=this._mask.getStripValue()),l=this._dateConverter.getDate(t)),s?!l||isNaN(l.getFullYear())?void 0:l:l?this._dateConverter.getText(l):void 0}if(r==a.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(t);if(r==a.ValueType.NUMBER)return parseFloat(t);r==a.ValueType.TEXT&&this._mask&&(t=this._mask.getStripValue())}return o===a.TextInputCase.UPPER?t?t.toLocaleUpperCase():t:o===a.TextInputCase.LOWER&&t?t.toLocaleLowerCase():t}catch(t){return}},h.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},h.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},h.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},h.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},h.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},h.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},h.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},h.prototype._sendToParent=function(t,i,n){void 0===i&&(i=void 0);try{var r=e.Utils.isMac&&t.metaKey||!e.Utils.isMac&&t.ctrlKey;if(2==i){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==i){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var s=this._controller._grid,a=s.editOptions;if(a.maxLengthToNextCell){var h=a.skipReadOnly,u=s.activeTool,d=this.maxLength,c=this.editIndex.clone(),p=e.Utils.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!p&&!r&&!t.altKey&&s&&s.isEditing(c)&&d>0&&!this._composing&&t.keyCode>47){var _=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof R&&this.maxLengthExceptComma){var f=this.getEditValue();isNaN(f)&&null!=f||(_=String(f))}if(_&&_.length>=d)return s.getBodyViewAt(c).spanRight(s.layoutManager,c),c.right(),h&&u._checkReadOnly(c)&&(u._skipReadOnly(c,1)||(c=this.editIndex.clone())),o.CellIndex.areEquals(c,this.editIndex)||u.setFocused(c,!0,!0),!0}}}catch(t){if(t instanceof l.ValidationError)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},h.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var i=this._grid;if(i){var o=i.container._containerDom,n=(0,e.getDoc)(o);this._editor==n.activeElement&&o&&o.focus()}else this._editor.blur()},h.Unselected={},h.InvalidFormat={},h.EDITOR_CSS="rg-editor ",h.CONTAINER_CSS="rg-editor-container",h}(i.EventAware);pn.CellEditor=p;var _=function(){return{9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/}},f=function(){function t(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions=_(),this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}return t.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,null},_dp(t,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())}}),_dp(t,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())}}),_dp(t,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())}}),_dp(t,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())}}),_dp(t,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())}}),_dp(t,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())}}),_dp(t,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())}}),_dp(t,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())}}),_dp(t,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())}}),t.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},t.prototype.clearBuffer=function(t,e){t=arguments.length>0?t:0,e=arguments.length>1?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},t.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,n=this._tests.length;i<n;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var r=void 0;r=t[o++];)if(this._tests[i].test(r)){this._buffer[i]=r,this._defBuffer[i]=r;break}}return this._buffer&&this._buffer.join("")},t.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var n=this._buffer[i];!this._tests[i]||this._tests[i].test(n)?t.push(n):n==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])&&(e.length>0&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},t.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.allowEmpty&&(this._allowEmpty=t.allowEmpty),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overwrite&&(this._overwrite=t.overwrite),null!=t.overWrite&&(this._overwrite=t.overWrite),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},t.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},t.prototype._changed=function(){},t.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=arguments.length>0?t:i.selectionStart,n=e=arguments.length>1?e:i.selectionEnd,r=t-1;r>=0;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){o=r+1;break}o=r}for(r=e-1;r>=0;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){n=r+1;break}n=r}if(o!=t||n!=e){for(r=o;r<=t&&!this._tests[r];r++)o++;for(r=n;r<=e&&!this._tests[r];r++)n++;return i.setSelectionRange(o,n),!0}return o!=t||n!=e},t.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},t.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},t.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var n=0,r=o.length;n<r;n++)e.push(i[o[n]]),this._buffer.push(i[o[n]]?this.$_getPlaceHolder(n):o[n])},t.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},t.prototype.$_seekPrev=function(t){for(;--t>=0&&!this._tests[t];);return Math.max(0,t)},t.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return Math.min(this._editMask.length,t)},t.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(t>=0)for(var n=t,r=this.$_seekNext(e);i>n;n++)if(this._tests[n]){if(!(i>r&&this._tests[n].test(o[r])))break;o[n]=o[r],this._defBuffer[n]=this._defBuffer[r],o[r]=this.$_getPlaceHolder(r),this._defBuffer[r]="",r=this.$_seekNext(r)}},t.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,n=this._buffer,r=t,s=this.$_getPlaceHolder(t);o>r;r++)if(this._tests[r]){if(e=this.$_seekNext(r),i=n[r],this._defBuffer[r]=s,n[r]=s,!(o>e&&this._tests[e].test(i)))break;s=i}},t.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,o=e.selectionStart,n=e.selectionEnd;if(46===i||8===i)o==n&&(o=46!==i?this.$_seekPrev(o):n=this.$_seekNext(o-1),n=46===i?this.$_seekNext(n):n),this.clearBuffer(o,n),!this._overwrite&&this.$_shiftL(o,n-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},t.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,o=e.selectionStart,n=e.selectionEnd,r=t.which||t.keyCode;this.clearBuffer(o,n),o!==n&&this.$_shiftL(o,n-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(r))&&(!this._overwrite&&this.$_shiftR(o),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},t.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(i)&&(e.value=e.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))}},t}();pn.EditMask=f;var g=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}return t.__extends(o,i),_dp(o,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())}}),_dp(o,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)}}),o.prototype.initOptions=function(){i.prototype.initOptions.call(this),this._maxLength=0},_dp(o,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t}}),o.prototype.isEdited=function(){return this._modified},o.prototype.setVisible=function(t,e){i.prototype.setVisible.call(this,t,e);var o=this._container.style;t?(o.border="",o.boxShadow=""):t||(o.border="none",o.boxShadow="none")},o.prototype.setEditIndex=function(t){i.prototype.setEditIndex.call(this,t);var o=this._editor.style;e.Utils.isMobile()?o.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(o.fontSize=this.fontSize+"px");var n=t.valueColumn;if(n)switch(this._textCase==a.TextInputCase.DEFAULT?n.textInputCase:this._textCase){case a.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case a.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},o.prototype.getEditText=function(){return this._editor.value},o.prototype.setEditValue=function(t){i.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},o.prototype.getEditValue=function(t,i){void 0===t&&(t=!0);var o=this._editField(),n=this._emptyValue;try{var r=o.dataType,s=this._editor.value;if(r==a.ValueType.TEXT)s||void 0===this._emptyValue||(s=this._emptyValue),void 0===(n=this._strToVal(s))&&(n="");else{if(r===a.ValueType.OBJECT){var l=this._editIndex.dataColumn.objectKey||o.objectKey,h=this._editIndex.item.getData(o.index)||{};return h[l]=s,h}if(e.Utils.isWhiteSpace(s))if(void 0!==this._emptyValue)n=this._strToVal(this._emptyValue);else switch(r){case a.ValueType.NUMBER:isNaN(this._oldValue)&&(n=NaN);break;case a.ValueType.DATETIME:null===this._oldValue&&(n=null);case a.ValueType.BOOLEAN:}else n=this._strToVal(s)}if(n===p.InvalidFormat)return n;n=o.readValue(n)}catch(e){if(t)throw e;n=this._emptyValue}return n},o.prototype._selectAll=function(){var t=this._editor;if(t.select&&t.value){var e=t.value;t.value="",t.value=e,t.select()}},o.prototype._setSelectionRange=function(t,i){try{var o=this._editor;(!e.Utils.isMobile()||!this.hasList)&&null!=o.selectionStart&&o.setSelectionRange(t,i)}catch(t){e.Utils.log("setSelectionRange fail type => ".concat(this._editor.getAttribute("type")))}},o.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return e.Utils.isMobile()&&this.caretToLast(),!0},o.prototype._doEndEdit=function(){this._modified=!1},o.prototype._doCommit=function(){},o}(p);pn.TextCellEditorBase=g;var m=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return t.__extends(o,i),o.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,i.prototype._doDispose.call(this)},_dp(o,"mask",{get:function(){return this._mask}}),_dp(o,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())}}),o.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new f(this,t))},o.prototype.setAlignment=function(t){this._container.style.textAlign="left"},o.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},o.prototype._createEditor=function(t){var i=(0,e.getDoc)(t);this._container=this._createContainer(i),t.appendChild(this._container);var o=i.createElement("input"),n=o.style;o.setAttribute("aria-hidden","true"),o.autocomplete="off",n.position="absolute",n.boxSizing="border-box",n.margin="0px",n.padding="0px 2px",n.wordWrap="normal",n.overflow="hidden",n.resize="none",n.border="none",n.outline="none",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n["-webkit-user-modify"]="read-write-plaintext-only",n["white-space"]="pre",n["-webkit-transform"]="translateZ(0)",o.tabIndex=-1,o.onkeydown=this._keyDownHandler.bind(this),o.onkeyup=this._keyUpHandler.bind(this),o.onkeypress=this._keyPressHandler.bind(this),o.oninput=this._inputHandler.bind(this),o.onpaste=this._pasteHandler.bind(this),o.oncopy=this._copyHandler.bind(this);var r=this._grid.container;return r.$_addListener(o,"compositionstart",this._compositionstartHandler.bind(this),!1),r.$_addListener(o,"compositionupdate",this._compositionupdateHandler.bind(this),!1),r.$_addListener(o,"compositionend",this._compositionendHandler.bind(this),!1),r.$_addListener(o,"text",this._textHandler.bind(this),!1),this._container.appendChild(o),this._defMaxLength=o.maxLength>0?o.maxLength:1e6,o},o.prototype.initOptions=function(){i.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},o.prototype.applyOptions=function(t){i.prototype.applyOptions.call(this,t),t.mask&&this.setMask(t.mask)},o.prototype.caretToLast=function(){var t=e.Utils.toStr(this._editor.value).length;this._setSelectionRange(t,t)},o.prototype.setEditIndex=function(t){i.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},o.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},o.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._dispatchChange())},o.prototype.setBounds=function(t,i,o,n,r){e.Utils.setBounds(this._container,t,i,o,n),0==o||0==n?this._editor.style.width="100%":r>0&&(this._editor.style.height=Math.round(n-4)+"px",this._editor.style.width=r+"px")},o.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._editor,o=t.keyCode;if((e.Utils.isIE||e.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==o)return!1;if(e.Utils.isIE&&t.ctrlKey&&86==t.keyCode&&i.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(e.Utils.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void(0,e.getDoc)(this._editor).execCommand("copy");switch(this._inputValue=i.value,o){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?i.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===o&&i.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==i.selectionEnd&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(i.readOnly&&e.Utils.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||i.selectionEnd==i.value.length&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(i.readOnly&&e.Utils.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var n=i.selectionStart;this._mask._moveCaret(n+1,n+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var r=i.value?i.value.length-1:0;this._mask._moveCaret(r,r)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return e.Utils.isFirefox?!t.ctrlKey&&!t.altKey&&229!==o&&o>=32&&(o<112||o>130)&&this._requestStart():e.Utils.isIE,!0}},o.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var i=t.keyCode;switch(8!=i&&46!=i||e.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},o.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=t.which||t.keyCode;this._sendToParent(t,2),e.Utils.isFirefox?t.ctrlKey||t.altKey||!(0==i||i>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):e.Utils.isMac&&t.metaKey&&(122===i||121===i)?t.preventDefault():e.Utils.isMac&&t.metaKey&&(99===i||118===i)||i>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())}},o.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},o.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},o.prototype._compositionendHandler=function(){this._composing=!1},o.prototype._compositionupdateHandler=function(){this._composing=!0},o.prototype._changeHandler=function(t){},o.prototype._inputHandler=function(t){this.isDisabled()||e.Utils.isIE&&!this._started||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())},o.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;if(null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible){if(this._mask){t.preventDefault();var n=this._editor,r=n.value,s=n.selectionStart,a=n.selectionEnd;r=r.substr(0,s)+i+r.substr(a),n.value=this._mask.writeBuffer(r,!0)}return void this._doChanged()}t.preventDefault(),this._grid.pasteFromClipboard(i,t)}}catch(t){if(t instanceof l.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof l.AbortError)alert(t.message);else if(t)throw t}}},o.prototype._copyHandler=function(t){p.copyProc(this,t)},o.prototype._getInputSelector=function(){return null},o}(g);pn.TextCellEditor=m;var y=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),_dp(i,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){t!=this._inputCharacters&&(this._inputCharacters=t)}}),_dp(i,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){t!=this._ignoreCharacters&&(this._ignoreCharacters=t)}}),i.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,e.prototype.initOptions.call(this)},i.prototype._inputHandler=function(t){this.$_resetValue(),e.prototype._inputHandler.call(this,t)},i.prototype._keyDownHandler=function(t){return this._pStart=t.target.selectionStart,e.prototype._keyDownHandler.call(this,t)},i.prototype._createEditor=function(t){var i=e.prototype._createEditor.call(this,t);return i.tabIndex=-1,i},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_resetValue=function(){var t,e=this._editor,i=e.value;if(this.visible){var o;if(t=this.inputCharacters)(o=new RegExp("[^"+t+"]","g")).test(i)&&(e.value=i=i.replace(o,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart));if(t=this.ignoreCharacters)(o=new RegExp("["+t+"]","g")).test(i)&&(e.value=e.value.replace(o,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart));this._pStart=null}},i.INPUT_CSS="rg-text-editor",i}(m);pn.LineCellEditor=y;var v=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype._createEditor=function(t){var i=e.prototype._createEditor.call(this,t);return i.setAttribute("type","password"),i.tabIndex=-1,i},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.prepare=function(){},i.INPUT_CSS="rg-password-editor",i}(m);pn.PasswordCellEditor=v;var w=function(i){function o(t,e){return i.call(this,t,e)||this}return t.__extends(o,i),o.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,i.prototype._doDispose.call(this)},_dp(o,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(o,"height",{get:function(){return this._height},set:function(t){this._height=t}}),_dp(o,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())}}),_dp(o,"text",{get:function(){return this._editor.value}}),o.prototype.setAlignment=function(t){this._container.style.textAlign="left"},o.prototype.initOptions=function(){i.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},o.prototype.setEditIndex=function(t){i.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},o.prototype.setCellEditValue=function(t){i.prototype.setCellEditValue.call(this,t,!1)},o.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},o.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},o.prototype.$_resetBounds=function(){var t,i=e.Utils.getClientRect(this._container);this._height<0?(t=this._grid.getEditCellBounds(this,this._editIndex).height,t+=e.Utils.isMobile()?3:1):this._height>0&&(t=this._height);var o=i.cx,n=i.cy,r=i.width,s=Math.round(i.height);this._editor.scrollWidth>r&&(r=this._editor.scrollWidth+6),t?(this._editor.style.overflow="auto",s=t):this._editor.scrollHeight>s&&(s=this._editor.scrollHeight+6);var a=isNaN(this._minHeight)?0:this._minHeight;a>0&&(s=Math.max(s,a)),i=e.Utils.getClientRect(this._parentElement),r=Math.min(i.width,r),s=Math.min(i.height,s),o+r>i.width&&(o=i.width-r),n+s>i.height&&(n=i.height-s),e.Utils.setBounds(this._container,Math.max(o,0),Math.max(n,0),r,s)},o.prototype.$_createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},o.prototype._createEditor=function(t){var i=(0,e.getDoc)(t);this._container=this.$_createContainer(i),t.appendChild(this._container);var o=i.createElement("textarea"),n=o.style;o.autocomplete="off",o.setAttribute("aria-hidden","true"),n.position="absolute",n.margin="0px",n.padding="0px",n.wordWrap="normal",n.overflow="hidden",n.resize="none",n.border="none",n.outline="none",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n["-webkit-user-modify"]="read-write-plaintext-only",n["white-space"]="pre",n["-webkit-transform"]="translateZ(0)",o.tabIndex=-1,o.onkeydown=this._keyDownHandler.bind(this),o.onkeyup=this._keyUpHandler.bind(this),o.onkeypress=this._keyPressHandler.bind(this),o.oninput=this._inputHandler.bind(this),o.onpaste=this._pasteHandler.bind(this),o.oncopy=this._copyHandler.bind(this);var r=this._grid.container;return r.$_addListener(o,"compositionstart",this._compositionstartHandler.bind(this),!1),r.$_addListener(o,"compositionupdate",this._compositionupdateHandler.bind(this),!1),r.$_addListener(o,"compositionend",this._compositionendHandler.bind(this),!1),r.$_addListener(o,"text",this._textHandler.bind(this),!1),this._container.appendChild(o),o},o.prototype.setBounds=function(t,i,o,n){e.Utils.setBounds(this._container,t,i,o,n),t>e.Utils.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},o.prototype._getInputSelector=function(){return o.INPUT_CSS},o.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},o.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},o.prototype._compositionendHandler=function(){this._composing=!1},o.prototype._compositionupdateHandler=function(){this._composing=!0},o.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._editor,o=t.keyCode;if((e.Utils.isIE||e.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==o)return!1;if(e.Utils.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void(0,e.getDoc)(this._editor).execCommand("copy");switch(o){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==i.selectionEnd&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||i.selectionEnd==i.value.length&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:var n=t.ctrlKey||e.Utils.isMac&&t.metaKey;if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(n&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&n)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var r=i.value;if(r){var s=i.selectionEnd;r=r.substring(0,s)+"\r\n"+r.substring(s),i.value=r,i.setSelectionRange(s+1,s+1),this._doChanged()}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},o.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var i=t.keyCode;switch(8!=i&&46!=i||e.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},o.prototype._keyPressHandler=function(t){var i=t.which||t.keyCode;this.isDisabled()||(e.Utils.isMac&&t.metaKey&&(122===i||121===i)?t.preventDefault():e.Utils.isMac&&t.metaKey&&(99===i||118===i)||i>=32&&!this._requestStart()&&t.preventDefault())},o.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},o.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof l.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof l.AbortError)alert(t.message);else if(t)throw t}}},o.prototype._copyHandler=function(t){p.copyProc(this,t)},o.INPUT_CSS="rg-multiline-editor",o}(g);pn.MultiLineCellEditor=w;var x=".",b=",",I=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,R=function(i){function o(t,e){var o=i.call(this,t,e)||this;return o._addString="000",o._maxIntegerLength=0,o._step=1,o._delay=100,o._regxAll=/[\d]|,|\.|\-|\+|e|E/,o._regxPos=/[\d]|,|\.|\+|e|E/,o._regxInt=/[\d]|,|\+|\-/,o._regxPosInt=/[\d]|,|\+/,o._regx=o._regxAll,o._decLen=void 0,o._decimalFormatter=void 0,o._isMultiple=!1,o._decSep=x,o._groupSep=b,o._active=!1,o._stepChanged=!1,o._editor.style["ime-mode"]="disabled",o._editor.style["-webkit-ime-mode"]="disabled",o._editor.style["-moz-ime-mode"]="disabled",o._editor.style["-ms-ime-mode"]="disabled",o}return t.__extends(o,i),_dp(o,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())}}),_dp(o,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())}}),_dp(o,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t,t){var e=this._decimalFormatter=new h.DecimalFormatter(t);e&&(this._decSep=e.separator?e.separator:x,this._groupSep=e.groupSep?e.groupSep:b,this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=x,this._groupSep=b,this._decLen=void 0}}),_dp(o,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())}}),_dp(o,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())}}),_dp(o,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())}}),_dp(o,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())}}),_dp(o,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())}}),_dp(o,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())}}),_dp(o,"max",{get:function(){return this._max},set:function(t){this._max=t}}),_dp(o,"min",{get:function(){return this._min},set:function(t){this._min=t}}),_dp(o,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)}}),_dp(o,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(o,"direction",{get:function(){return this._direction},set:function(t){this._direction=t}}),_dp(o,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t}}),o.prototype.setMask=function(t){this._mask=null},o.prototype.initOptions=function(){i.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},o.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},_dp(o,"buttonCount",{get:function(){return 2}}),o.prototype.setEditIndex=function(t){i.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},o.prototype._inputHandler=function(t){t.data&&t.data.match(I)?t.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(t),i.prototype._inputHandler.call(this,t))},o.prototype._keyPressHandler=function(t){if(!e.Utils.isFirefox||!t.ctrlKey&&0!==t.charCode){var o=!0,n=String.fromCharCode(t.keyCode||t.charCode);(!this._regx.test(n)||t.target.value&&t.target.value.indexOf(this._decSep)>=0&&n==this._decSep)&&(this._multipleChar&&n===this._multipleChar||(o=!1,(!this.blankWhenSpace||" "!==n)&&t.preventDefault()));var r=t.target.selectionStart,s=t.target.selectionEnd,a=t.target.value,l=new RegExp("\\"+this._groupSep,"g"),h=a?a.split(""):[];if(h.splice(r,s-r,n===this._multipleChar?this._addString:n),h=h.join("").replace(l,""),this.maxLength>0&&o&&this.maxLengthExceptComma&&a){var u=h&&"-"===h[0];u&&(h=h.substr(1)),h.length>this.maxLength&&t.preventDefault(),h=u?"-"+h:h}if(this._maxIntegerLength>0&&n!==this._decSep){var d=Math.floor(this.$_strToNum(h));if(!isNaN(d)){var c=Math.abs(d).toString().length;this._maxIntegerLength<c&&t.preventDefault()}}this._isMultiple=n==this._multipleChar,i.prototype._keyPressHandler.call(this,t)}else i.prototype._keyPressHandler.call(this,t)},o.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=t.keyCode||t.charCode;if(this._isMultiple=!1,(8===e||46===e)&&this.editing&&this._editFormat){var o=t.target,n=o.value,r=n.length,s=n&&n.split(""),a=o.selectionStart,l=o.selectionEnd;if(a!==l)return i.prototype._keyDownHandler.call(this,t);var h=n[8===e?a-1:a];if(h===this._groupSep||h===this._decSep)if(h===this._decSep&&a===(8===e?n.length:n.length-1));else{s.splice(8===e?a-2:a+1,1),o.value=s.join(""),this.$_editFormatting(t),n=o.value;var u=r-(8===e?n.length:r);o.setSelectionRange(a-u,l-u),this._doChanged(),t.preventDefault()}}return i.prototype._keyDownHandler.call(this,t)}},o.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart()},o.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),i.prototype._dispatchChange.call(this))},o.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e},o.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),this.$_resetValue();var i=this._emptyValue;try{var o=this._editor.value;if(o=o&&o.trim()){var n=new RegExp("\\"+this._groupSep,"g"),r=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(n,"")).replace(r,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=o?parseFloat(o):null!=i?i:void 0}catch(e){if(t)throw e}return i},o.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},o.prototype.buttonDown=function(t,i){var o,n=i.target;e.Utils.stopEvent(i),"up"===n.$_editButtonType?o=this.step:"down"===n.$_editButtonType&&(o=-this.step),o&&(this.$_changeStepValue(o),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(o)}.bind(this),this._delay))}.bind(this),300))},o.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},o.prototype.setButtonStyle=function(t,e,i,o,n){var r=t.style;i?(0===e?r.top="0px":r.removeProperty("top"),0===e?r.removeProperty("bottom"):r.bottom="0px",r.right=o+"px",r.height="9px"):(r.top="0px",r.removeProperty("bottom"),r.right=o+n*e+"px",r.height="100%"),r.width=n+"px";var s=0===e?"rg-button-step-up":"rg-button-step-down";return t.className=s,t.$_editButtonType=0===e?"up":"down",!0},o.prototype._getInputSelector=function(){return o.INPUT_CSS},o.prototype.setFocus=function(){!this._stepChanged&&i.prototype.setFocus.call(this)},o.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var n=parseFloat(t);return isNaN(n)?NaN:o?-Math.abs(n):n},o.prototype.$_formatNum=function(t,e,i){var o=t,n=o<0||0==o&&1/o==-1/0?"-":"",r=Math.max(e,i);r=isNaN(r)?2:r;var s=parseInt(o=Math.abs(+o||0).toFixed(r))+"",a=s.length>3?s.length%3:0;if(o.indexOf(".")>=0){for(var l=o.split(".")[1].split("");l.length>0&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);o=l.join(""),r=l.length}return n+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(r?this._decSep+o:"")},o.prototype.$_editFormatting=function(t){var e=t.target.value,i=e&&"-"===e[0],o=e&&e[e.length-1]==this._decSep,n=t.target.selectionStart,r=t.target.selectionEnd;this._isMultiple&&this._addString&&(e=e.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString),n+=this._addString.length,r+=this._addString.length);var s,a=e.split(this._decSep);a.length>1&&(a.length=2,a[1]=a[1].substr(0,this._decimalFormatter._maxDigits),e=a.join(this._decSep)),s=2==a.length?Math.min(a[1].length,null!=this._decLen?this._decLen:99):0;var l=this.$_strToNum(e);if(!isNaN(l)){if(this.maxLength>0||this.maxIntegerLength>0){l=Math.abs(l);var h=String(l).split(".");this.maxIntegerLength>0&&(h[0]=h[0].substr(0,this.maxIntegerLength));var u=h.join(".");this.maxLength>0&&(u=u.substr(0,this.maxLength)),l=parseFloat(u),i&&(l=-l)}e=this.$_formatNum(l,s,this._decimalFormatter.maxDigits);var d=(e=o&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,c=t.target.value.length;1==Math.abs(d-c)&&(d>c?(n++,r++):e.indexOf(this._decSep)>=n-1&&(n--,r--)),t.target.value=e,t.target.setSelectionRange(n,r)}},o.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(I,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},o.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},o.prototype.$_changeStepValue=function(t){var e=this.getEditValue();e=null==e||e==isNaN(e)?0:e,e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},o.INPUT_CSS="rg-number-editor",o}(m);pn.NumberCellEditor=R;var T=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-editor-marquee"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.pointerEvents="none"},i.prototype._doDraw=function(t){},i.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left=i.left+"px",e.top=-i.top+"px",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)},i}(u.VisualElement);pn.EditorMarquee=T;var D=function(i){function o(t,o){var n=i.call(this,t,o)||this;if(n._isMobile){var r=(0,e.getDoc)(o);n._marquee=new T(r)}return n}return t.__extends(o,i),o.prototype.hasButton=function(t,e){return!0},_dp(o,"buttonCount",{get:function(){return 1}}),_dp(o,"hasList",{get:function(){return!0}}),o.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},o.prototype._centerPopup=function(t,i){var o=i.getBoundingClientRect(),n=t.getBoundingClientRect(),r=(0,e.getWin)(t).innerHeight;t.appendChild(i),i.style.left=(n.width-o.width)/2+"px",i.style.top=(r-o.height)/2-n.top+"px"},o.prototype._closeMarquee=function(){this._marquee&&e.Utils.detach(this._marquee._dom)},o.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},_dp(o,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(o,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)}}),o}(m);return pn.PopupCellEditor=D,pn}var gn,mn,yn,vn={};function Cn(){return gn||(gn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NativeListCellEditor=t.SearchCellEditor=t.MultiCheckCellEditor=t.DropDownCellEditor=t.DropDownList=t.DropDownValueLabel=t.DropDownSortStyle=t.DropDownPosition=void 0;var e,i,o,n=d,r=S(),s=fn(),a=et(),l=C(),h=di();!function(t){t.BUTTON="button",t.EDITOR="editor"}(e=t.DropDownPosition||(t.DropDownPosition={})),function(t){t.NONE="none",t.ASCENDING="ascending",t.DESCENDING="descending"}(i=t.DropDownSortStyle||(t.DropDownSortStyle={})),function(t){t.VALUE="value",t.LABEL="label",t.VALUE_LABEL="valueLabel",t.LABEL_VALUE="labelValue"}(o=t.DropDownValueLabel||(t.DropDownValueLabel={}));var u=function(t){function s(o){var n=t.call(this)||this;return n._minWidth=0,n._maxWidth=0,n._dropDownCount=8,n._caseSensitive=!1,n._partialMatch=!1,n._sortStyle=i.NONE,n._items=null,n._itemIndex=-1,n._dropDownPosition=e.BUTTON,n._dropDownWidth=-1,n._displayLabels=null,n._separator=null,n._itemColumned=!1,n._viewGridInside=!1,n._trimLabelText=!0,n._initCount=0,n._moreItemCount=25,n._moreText=null,n._selected=!1,n._clickHandler=function(t){var e=t.currentTarget,i=r.Utils.getChildIndex(e);i>=0&&(this._itemIndex=i,this._selected=!0,this.fireEvent(s.CLOSE_UP,!0))}.bind(n),n._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(n),n._container=o,n._element=n._createList(o.doc),n}return n.__extends(s,t),s.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,r.Utils.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,t.prototype._doDispose.call(this)},_dp(s,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(s,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(s,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(s,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(s,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(s,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())}}),_dp(s,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})}}),_dp(s,"itemIndex",{get:function(){return this._itemIndex}}),_dp(s,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(s,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(s,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(s,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(s,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(s,"viewGridInside",{get:function(){return this._viewGridInside||r.Utils.isSlotMode()},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(s,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(s,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(s,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(s,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(s,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(s,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length}}),_dp(s,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&e>=0&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,t>=0)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()}}),_dp(s,"selected",{get:function(){return this._selected}}),s.prototype.setItemIndex=function(t,e,i){var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var n=o[o.length-1];if(n.isMoreButton){var r=t-(o.length-1);r=(Math.floor(r/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(n,r)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=t>=0}},s.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},s.prototype.show=function(t,e,o,n,r){this._containerElement=this.viewGridInside?this._container._container:t,this._sortStyle!=i.NONE&&this.$_sortItems(),this._show(e,o,n,r)},s.prototype.hide=function(){r.Utils.detach(this._element),this._containerElement=null},s.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},s.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},s.prototype._changed=function(){},s.prototype._createList=function(t){var e=t.createElement("div");return e.className="rg-dropdownlist",e.id="rg-dropdown-list-"+c.$$_LIST_ID++,e.setAttribute("role","listbox"),e},s.prototype.$_sortItems=function(){this._sortStyle==i.ASCENDING?this._items.sort((function(t,e){return t.label<e.label?-1:t.label>e.label?1:0})):this._items.sort((function(t,e){return t.label>e.label?-1:t.label<e.label?1:0}))},s.prototype._show=function(t,e,i,o){var n=this._element;if(n){var s=n.style;s.position="absolute",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="auto",this._firstChild=null,r.Utils.clearChildren(n),r.Utils.disableSelection(n),this._containerElement.appendChild(n),this._cellWidth=i,this._editBounds=o,s.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},s.prototype._getListElement=function(){return this._element},s.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=(0,r.getWin)(this._firstChild),i=r.Utils.getClientRect(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),n=parseInt(o.marginTop.replace("px",""));n=isNaN(n)?0:n;var s=parseInt(o.marginBottom.replace("px",""));s=isNaN(s)?0:s;var a=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+n)*a+4+s+"px"}else t.style.height="10px"},s.prototype._resetWidth=function(t){var e=this._element,i=r.Utils.getClientRect(e),o=this._dropDownWidth,n=o,s=e.offsetWidth?e.offsetWidth+(r.Utils.ieOld&&"border-box"===e.style.boxSizing?17:0):0;n<0?n=t:0==n&&(n=10),e.style.width=n+"px";var a=0;if(this._firstChild){var l=(0,r.getWin)(this._firstChild),h=this._firstChild.currentStyle||l.getComputedStyle(this._firstChild),u=parseInt(h.marginLeft.replace("px",""));u=isNaN(u)?0:u;var d=parseInt(h.marginRight.replace("px",""));d=isNaN(d)?0:d;for(var c=e.childNodes,p=0;p<c.length;p++)a=Math.max(a,c[p].scrollWidth);a+=e.offsetWidth-e.clientWidth+u+d+2}o<0&&(a=Math.max(a,n));var _=r.Utils.getBrowserSize();n=a=Math.min(a,_.width),r.Utils.ieOld&&(o>=0||a>n)&&(n+=20),n<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(n,s)+"px"},s.prototype.$_resetPosition=function(t,i,o,n){var s=(0,r.getDoc)(this._element),a=(0,r.getWin)(this._element),l=r.Utils.getBrowserSize(),h=r.Utils.getClientRect(this._containerElement),u=r.Utils.getClientRect(this._container._container),d=l.width,c=l.height,p=r.Utils.getClientRect(this._element),_=a.pageXOffset||s.documentElement.scrollLeft,f=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(c-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(d-=18),t+=u.left-h.left,i+=u.top-h.top,(r.Utils.ieTen||r.Utils.ieOld||r.Utils.ieLeg)&&(t+=s.documentElement.scrollLeft,i+=s.documentElement.scrollTop),i+p.height>c+f&&n&&(i=i-n.height-p.height)<0&&(i=c-p.height-2),this._dropDownPosition!=e.EDITOR?t=Math.max(0,t+o-p.width):t+p.width>d+_&&(t=d-p.width),!r.Utils.isMobile()&&this.viewGridInside&&n&&(i=n.bottom-h.top+2,(h.bottom<n.bottom+p.height||c+f<n.bottom+p.height)&&(i=n.top-p.height-h.top-2)),r.Utils.isMobile()&&!r.Utils.isTablet()||this._element.offsetParent||(t+=s.documentElement.offsetLeft,i+=s.documentElement.offsetTop),r.Utils.move(this._element,Math.max(0,t),Math.max(0,i))},s.prototype._resetItems=function(t,e,i,o){r.Utils.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},s.prototype._buildItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i,n=(0,r.getDoc)(this._element),s=0,a=function(t,e){var i=e&&e.value?e.value.toString():"",o=n.createElement("span");return o.style.whiteSpace="pre",o.innerHTML=i?r.Utils.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-value",r.Utils.disableSelection(o),t.appendChild(o),o},l=function(t,e){var i=e&&e.label?e.label.toString():"";i=this._trimLabelText?i.trim():i;var o=n.createElement("span");return!this._trimLabelText&&(o.style.whiteSpace="pre"),o.innerHTML=i?r.Utils.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-label",r.Utils.disableSelection(o),t.appendChild(o),o}.bind(this),h=function(t,e){var i=n.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?r.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",r.Utils.disableSelection(i),t.appendChild(i)},u=function(t){var e=r.Utils.getTextLength(t.textContent);e>s&&(i=t,s=e)},d=this._items,c=e||(this._element.children.length>0?this.moreItemCount:this.initCount);if(d&&!(d.length<1)){for(var p=t,_=d.length;p<_;p++){if(this._initCount&&p-t>=c&&p<_){var f=n.createElement("div"),g=f.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="pointer",g.textAlign="center",r.Utils.disableSelection(f),f.nextIndex=p,f.onclick=this._nextClickHandler,f.isMoreButton=!0,f.className="rg-dropdown-more",l(f,{label:this.moreText}),this._element.appendChild(f);break}var m=d[p],y=n.createElement("div");y.setAttribute("role","option"),y.id=this._element.id+"-"+p.toString();var v=y.style;v.position="relative",v.cssFloat="none",v.paddingTop="1px",v.paddingBottom="1px",v.paddingLeft="2px",v.paddingRight="2px",v.whiteSpace="nowrap",v.cursor="default",y.className=p==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",p===this._itemIndex?y.setAttribute("aria-selected","true"):y.removeAttribute("aria-selected"),r.Utils.disableSelection(y),this._element.appendChild(y),0==p&&(this._firstChild=y),y.onclick=this._clickHandler;var C=null;switch(this.displayLabels){case o.LABEL:l(y,m);break;case o.VALUE:a(y,m);break;case o.LABEL_VALUE:C=l(y,m),h(y,this._separator),a(y,m);break;case o.VALUE_LABEL:C=a(y,m),h(y,this._separator),l(y,m)}C&&this._itemColumned&&u(C)}if(this._itemColumned&&i){var w=Math.ceil(i.getBoundingClientRect().width);for(p=0,_=this._element.childNodes.length;p<_;p++){(C=this._element.childNodes[p].firstChild).style.display="inline-block",C.style.width=w+"px"}}}},s.prototype.$_addMoreItems=function(t,e){var i=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(i,e),this._resetWidth(this._cellWidth),this.fireEvent(s.EDITOR_FOCUS)},s.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++){(i=t[e]).className=e==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",e==this._itemIndex?i.setAttribute("aria-selected","true"):i.removeAttribute("aria-selected"),e==this._itemIndex&&this.fireEvent(s.ACTIVE_DESCENDENT,i.id)}var i,o=this._itemIndex;if(o>=0&&o<t.length)if((i=t[o]).offsetTop<this._element.scrollTop)this._element.scrollTop=i.offsetTop;else{var n=i.offsetTop+r.Utils.getSize(i).height;n>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight)}},s.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&this._items.length>0&&t){for(var i=this._items,o=i.length,n=this._caseSensitive?t:t.toLowerCase(),s=[],a=0;a<o;a++){if(d=i[a].label.toString())if(d=this._caseSensitive?d:d.toLowerCase(),this._partialMatch){for(var l="",h=0;h<d.length;h++){var u=r.Utils.hangulToChosung(d[h]);l+=r.Utils.hangulToChosung(n[h]).org?u.org:u.cho}if(l==n)return void this.setItemIndex(a,e,!0)}else if(d==n)return void this.setItemIndex(a,e,!0);s.push(d)}for(a=0;a<o;a++){var d=s[a];if(this._partialMatch){var c=!1;for(h=0;h<n.length;h++){var p=r.Utils.hangulToChosung(d[h]);if(!(p.org&&p.org==n[h]||p.cho&&p.cho==n[h])){c=!1;break}c=!0}if(c)return void this.setItemIndex(a,e,!0)}else if(d&&0==d.indexOf(n))return void this.setItemIndex(a,e,!0)}for(a=0;a<o;a++){d=s[a];if(this._partialMatch){var _=r.Utils.hangulToChosungAll(d),f=r.Utils.hangulToChosungAll(n),g=_.indexOf(f);l=d.substr(0,g);if(~g){h=0;for(var m=g,y=n.length;h<y;h++,m++){u=r.Utils.hangulToChosung(d[m]);l+=r.Utils.hangulToChosung(n[h]).org?u.org:u.cho}}if(l&&l.indexOf(n)>0)return void this.setItemIndex(a,e,!0)}else if(d&&d.indexOf(n)>0)return void this.setItemIndex(a,e,!0)}}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},s.CLOSE_UP="onDropDownListCloseUp",s.EDITOR_FOCUS="onDropDownListEditorFocus",s.ACTIVE_DESCENDENT="onDropDownListActiveDescendant",s}(a.EventAware);t.DropDownList=u;var c=function(t){function a(n,r){var s=t.call(this,n,r)||this;s._values=null,s._items=null,s._labels=null,s._displayLabels=o.LABEL,s._domainOnly=!1,s._dropDownWidth=-1,s._dropDownPosition=e.BUTTON,s._dropDownCount=8,s._itemSortStyle=i.NONE,s._caseSensitive=!1,s._partialMatch=!1,s._commitOnSelect=!0,s._dropDownWhenClick=!1,s._trimLabelText=!0,s._separator=null,s._itemColumned=!1,s._lookup=!1,s._labeling=!1,s._domain=null,s._closing=!1,s._selectedIndex=-1,s._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(s);var a=s._list=s._createDropDown(n.container);return s._setEditorAria("aria-owns",a._element.id),s._setEditorAria("aria-expanded","false"),s._setEditorAria("aria-haspopup","true"),s._setEditorAria("role","combobox"),s._list.addListener(s),s}return n.__extends(a,t),a.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,t.prototype._doDispose.call(this)},_dp(a,"values",{get:function(){return this._values},set:function(t){(t=r.Utils.makeArray(t,!0))?this._values=t.map((function(t){return null!=t?String(t):t})):this._values=[]}}),_dp(a,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]}}),_dp(a,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(a,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())}}),_dp(a,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(a,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(a,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(a,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())}}),_dp(a,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(a,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(a,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(a,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(a,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(a,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(a,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(a,"listing",{get:function(){return this._list.listing}}),a.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=(0,r.getDoc)(this._container),i=(0,r.getWin)(this._container);if(this._grid,t||this._items&&this._items.length>0){var o=this._list,n=this._options,s=e.documentElement,a=r.Utils.getClientRect(this._container);o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,o.caseSensitive=this._caseSensitive,o.partialMatch=this._partialMatch,o.dropDownCount=this._dropDownCount,o.dropDownWidth=this._dropDownWidth,o.dropDownPosition=this._dropDownPosition,o.sortStyle=this._itemSortStyle,o.valueIndex=this._selectedIndex,o.trimLabelText=this._trimLabelText;var l=this._grid.displayOptions;return o.setZIndex(l.baseZindex+3),this._isMobile&&!this._isTablet?(this._showMarquee(s),o.viewGridInside=!1,o.show(s,0,0,0,null),this._centerPopup(s,o._element)):o.show(e.documentElement,a.cx+1,a.cy+a.height,this._cellBounds.width,r.Utils.getClientRect(this._editor)),o.$_search(this._editor.value,!0),this._setEditorAria("aria-expanded","true"),!r.Utils.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},a.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;var i=this._isMobile&&!this._isTablet;try{var o=(0,r.getWin)(this._container);!r.Utils.isSlotMode()&&o.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var n=void 0;if(t&&this._list.selected&&(n=this._list.valueIndex)>=0&&this._items&&this._items.length>n){this._selectedIndex=this._list.valueIndex;var s=this._items[n].value,a=this._labeling?this._items[n].label:this._items[n].value;this._editor.value=a,i?this._commitListValue(s):(n==this._saveIndex&&a==this._saveText||this._dispatchChange(),e&&this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},a.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=o.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=e.BUTTON,this._dropDownCount=8,this._itemSortStyle=i.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기",this._setEditorAria("aria-activedescendant",null)},a.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},a.prototype.setEditValue=function(e){var i=this,o=-1,n=function(e,o){var n;t.prototype.setEditValue.call(i,e?((n={})[e]=o,n):o)};this._value=e;var r=this._editIndex.dataColumn,s=r.getField(),a=r.objectKey||s.objectKey;if(e=a&&e?e[a]:e,this._lookup){var l=this._domain;if(l){var h=o=l.keys?l.keys.indexOf(e):-1;h>=0&&l.values&&l.values.length>h?l.values[h]:e}else o=this._editIndex.dataColumn.getLookupIndex(e);this._labeling?n(a,l?o>=0&&l.values&&l.values.length>o?l.values[o]:e:o>=0?this._editIndex.dataColumn.getLookupLabel(e):e):n(a,e)}else this._values&&this._labeling&&this._labels?n(a,this._labels[this._values.indexOf(e)]||e):n(a,e);this._selectedIndex=o},a.prototype.isEdited=function(){var e=t.prototype.isEdited.call(this);return e&&this.domainOnly&&(e=void 0!==this.$_getEditValue(!1)),e},a.prototype._getInputSelector=function(){return a.INPUT_CSS},a.prototype._setEditorAria=function(t,e){e?this._editor.setAttribute(t,e):this._editor.removeAttribute(t)},a.prototype._createDropDown=function(t){return new u(t)},a.prototype.setCellEditValue=function(e,i){t.prototype.setCellEditValue.call(this,e,i)},a.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},a.prototype.setBounds=function(e,i,o,n,r){t.prototype.setBounds.call(this,e,i,o,n,r)},a.prototype._createEditor=function(e){return t.prototype._createEditor.call(this,e)},a.prototype._textHandler=function(){this._requestStart()},a.prototype._compositionstartHandler=function(e){t.prototype._compositionstartHandler.call(this,e)},a.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list,o=i.itemIndex;switch(e.keyCode){case 8:case 46:if(!e.ctrlKey&&!e.shiftKey&&this.domainOnly&&this.allowEmpty);else if(!e.ctrlKey&&!e.shiftKey&&this.textReadOnly)return this._requestStart(),e.preventDefault(),!0;break;case 32:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),e.preventDefault(),!0;break;case 13:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),e.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(e);break;case 27:if(this.closeUp(!1,!1))return e.preventDefault(),!0;break;case 40:if(!e.shiftKey&&e.altKey&&!this.listing)return this._requestStart(),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+1)),e.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+i.dropDownCount)),e.preventDefault(),!0;break;case 38:if(e.altKey&&this.listing)return this.closeUp(!1,!1),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,o-1)),e.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,o-i.dropDownCount)),e.preventDefault(),!0}return t.prototype._keyDownHandler.call(this,e)}},a.prototype._keyPressHandler=function(e){this.isDisabled()||(t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault())},a.prototype._inputHandler=function(e){this.isDisabled()||(this.textReadOnly&&(e.target.value=this._oldValue||""),t.prototype._inputHandler.call(this,e))},a.prototype._pasteHandler=function(e){this.isDisabled()||t.prototype._pasteHandler.call(this,e)},a.prototype._copyHandler=function(e){this.isDisabled()||t.prototype._copyHandler.call(this,e)},a.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},a.prototype._doChanged=function(){this._selectedIndex=-1,t.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},a.prototype.dropDownList=function(t){this.dropDown(t)&&this._setEditorAria("aria-expanded","true")},a.prototype.closeList=function(t){this.closeUp(t,!1),this._setEditorAria("aria-expanded","false")},a.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1,!1):this.dropDown()},a.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},a.prototype._refreshItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.editIndex,n=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==o.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn&&i.item&&(i.dataRow>=0||(0,h.ItemState_isEditing)(n.itemState))){var s=i.dataColumn;if(s.lookupSource){for(var a=s.lookupKeyFieldIds,l=[],u=0;u<a.length-1;u++)l.push(n.getData(a[u]));var d=s.lookupSource.getTextDomain(l);d&&d.values&&d.values.length>0&&(this.$_setItems(d.keys,d.values),this._labeling=!0,this._lookup=!0,this._domain=d)}else s.values&&s.values.length>0&&(this.$_setItems(s.values,s.labels),this._labeling=this.displayLabels!==o.VALUE&&s.labels&&s.labels.length>=s.values.length,this._lookup=!0)}if(t&&this.listing){this._list.items=this._items;var c=r.Utils.getClientRect(this._container);this._list._resetItems(c.cx-1,c.cy+c.height,this._cellBounds.width,r.Utils.getClientRect(this._editor))}},a.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=this.text,o=s.TextCellEditor.prototype.getEditValue.call(this,t,e),n=this._editIndex.dataColumn,r=this._selectedIndex,a=r>=0,h=n.getField(),u=h.dataType===l.ValueType.OBJECT&&(n.objectKey||h.objectKey),d=u&&o?o[u]:o;if(this._lookup){if(this._domain){if(this._labeling)d=(c=a?r:this._domain.values?this._domain.values.indexOf(i):-1)>=0&&this._domain.keys&&this._domain.keys.length>c?this._domain.keys[c]:d;if(this.domainOnly&&d&&(!this._domain.keys||this._domain.keys.indexOf(d)<0))return s.CellEditor.Unselected}else if(this._labeling&&(d=a?n.getLookupValue(r):n.getSourceValue(i)||(u?o[u]:o)),this.domainOnly&&d&&(!n.values||n.values.indexOf(d)<0))return s.CellEditor.Unselected}else{var c;if(this._labeling)(c=a?r:this._labels?this._labels.indexOf(i):-1)>=0&&c<this._values.length&&(d=this._values[c]);if(this.domainOnly&&d&&(!this._values||this._values.indexOf(d)<0))return s.CellEditor.Unselected}return u?(o[u]=d,o):d},a.prototype.setActiveDescendant=function(t){this._setEditorAria("aria-activedescendant",t)},a.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e,!0),!r.Utils.isMobile()&&this.setFocus()},a.prototype.onDropDownListEditorFocus=function(){this.setFocus()},a.prototype.onDropDownListActiveDescendant=function(t,e){this.setActiveDescendant(e)},a.INPUT_CSS="rg-list-editor",a.$$_LIST_ID=0,a}(s.PopupCellEditor);t.DropDownCellEditor=c;var p=function(t){function e(i){var o=t.call(this,i)||this;return o._selectItemIndices=[],o._acceptText=null,o._cancelText=null,o._showButtons=!1,o._showAllCheck=!1,o._acceptClickHandler=function(t){this.fireEvent(e.CLOSE_UP_2,!0)}.bind(o),o._cancelClickHandler=function(t){this.fireEvent(e.CANCEL,!1)}.bind(o),o._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var o=r.Utils.getChildIndex(i),n=e.checked;this.$_changeCheckIndex(i,o,n,!0)}}.bind(o),o._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(o),o._divClickHandler=function(t){r.Utils.stopEvent(t,!0),t.currentTarget.firstElementChild.click()}.bind(o),o}return n.__extends(e,t),_dp(e,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)}}),e.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(t>=0&&t<o.length){for(var n=o[t],r=n.getElementsByTagName("input"),s=void 0,a=0,l=r.length;a<l;a++)if("checkbox"==r[a].type){s=r[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(n,t,s.checked,i))}},e.prototype.$_changeCheckIndex=function(t,i,o,n){var r=this._selectItemIndices;if(!(i<0||i>=this._items.length)){var s=this._items[i].index;o?r.indexOf(s)<0&&r.push(s):r.indexOf(s)>=0&&r.splice(r.indexOf(s),1),t.className="rg-multicheck-item"+(o?" rg-multicheck-select":""),t.setAttribute("aria-selected",o?"true":"false"),this._selected=!0,this.$_changeAllCheck(),n&&this.fireEvent(e.CHECK_CLICK)}},e.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div");e.className="rg-multicheck",e.id="rg-dropdown-list-"+c.$$_LIST_ID++,e.setAttribute("role","listbox");var i=t.createElement("div");i.className="rg-multicheck-allcheck",this._allCheckElement=i,i.style.paddingLeft="2px",r.Utils.disableSelection(i),e.appendChild(i);var o=t.createElement("div");o.className="rg-multicheck-list",this._listElement=o,e.appendChild(o);var n=t.createElement("div");return n.style.textAlign="center",n.style.whiteSpace="nowrap",n.className="rg-multicheck-button",this._buttonElement=n,n.style.margin="2px",r.Utils.disableSelection(n),e.appendChild(n),e},e.prototype._getListElement=function(){return this._listElement},e.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},e.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,i=this._allCheck.checked,o=0;o<t;o++)this.changeCheckIndex(o,i,!1);this.fireEvent(e.CHECK_CLICK)},e.prototype.$_changeAllCheck=function(){if(this._showAllCheck){for(var t=!0,e=this._listElement.children,i=0;i<e.length;i++){var o=e[i].firstElementChild;t=t&&o.checked}this._allCheck.checked=t}},e.prototype._show=function(t,e,i,o){var n=this._element;if(n){var s=n.style;s.position="absolute",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="visible",(s=this._listElement.style).position="relative",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.minWidth="20px",s.minHeight="10px",s.overflow="auto",(s=this._buttonElement.style).position="relative",s.cssFloat="none",s.clear="both",s.boxSizing="border-box",s.marginLeft="0px",s.marginRight="0px",this._firstChild=null,r.Utils.clearChildren(this._listElement),r.Utils.disableSelection(this._listElement),this._containerElement.appendChild(n),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort((function(t,e){return t-e}))[0]),this._selected=!1}},e.prototype._resetWidth=function(e){t.prototype._resetWidth.call(this,e);var i=this._element,o=Math.floor(this._buttonElement.getBoundingClientRect().width),n=i.getBoundingClientRect().width;isNaN(o)||(n=Math.max(n,o)),i.style.width=n+"px"},e.prototype._resetItems=function(t,e,i,o){r.Utils.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},e.prototype._buildItems=function(){var t,i=this._container.doc,n=0,s=function(t,e,o){var n=e?e.value.toString():"",s=i.createElement("label");return s.style.whiteSpace="pre",s.innerHTML=n?r.Utils.htmlEncode(n):"&nbsp;",s.htmlFor=o&&o.id,s.tabIndex=-1,s.className="rg-dropdown-value",r.Utils.disableSelection(s),t.appendChild(s),s}.bind(this),a=function(t,e,o){var n=e?e.label.toString():"";n=this._trimLabelText?n.trim():n;var s=i.createElement("label");return!this._trimLabelText&&(s.style.whiteSpace="pre"),s.innerHTML=n?r.Utils.htmlEncode(n):"&nbsp;",s.htmlFor=o&&o.id,s.tabIndex=-1,s.className="rg-dropdown-label",r.Utils.disableSelection(s),t.appendChild(s),s}.bind(this),l=function(t,e){var o=i.createElement("span");o.style.whiteSpace="pre",o.style.pointerEvents="none",o.innerHTML=e?r.Utils.htmlEncode(e):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-separator",r.Utils.disableSelection(o),t.appendChild(o)}.bind(this),h=function(e){var i=r.Utils.getTextLength(e.textContent);i>n&&(t=e,n=i)}.bind(this),u=this._items;if(u&&!(u.length<1)){for(var d=0,c=u.length;d<c;d++){var p=u[d],_=i.createElement("div");_.setAttribute("role","option"),_.id=this._element.id+"-"+d.toString();var f=_.style;f.position="relative",f.cssFloat="none",f.paddingTop="1px",f.paddingBottom="1px",f.paddingLeft="2px",f.paddingRight="2px",f.whiteSpace="nowrap",f.cursor="default";var g=this._selectItemIndices.indexOf(u[d].index)>=0;_.className="rg-multicheck-item"+(g?" rg-multicheck-select":""),r.Utils.disableSelection(_),this._listElement.appendChild(_),0==d&&(this._firstChild=_),_.onclick=this._divClickHandler;var m=i.createElement("input");m.id="$multiCheck_item_"+e.$_checkId++,m.type="checkBox",m.onclick=this._checkClickHandler,m.checked=g,_.setAttribute("aria-selected",g?"true":"false"),_.appendChild(m);var y=null;switch(this.displayLabels){case o.LABEL:a(_,p,m);break;case o.VALUE:s(_,p,m);break;case o.LABEL_VALUE:y=a(_,p,m),l(_,this.separator),s(_,p,m);break;case o.VALUE_LABEL:y=s(_,p,m),l(_,this.separator),a(_,p,m)}y&&this.itemColumned&&(h(y),_._span=y)}if(this.itemColumned&&t){var v=Math.ceil(t.getBoundingClientRect().width);if(v>0)for(d=0,c=this._listElement.childNodes.length;d<c;d++){(y=this._listElement.childNodes[d]._span)&&(y.style.display="inline-block",y.style.width=v+"px")}}}},e.prototype.setButtonOptions=function(t,e,i,o,n){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=n,this.$_buildButtons()},e.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",r.Utils.clearChildren(this._buttonElement);var i=t.createElement("label"),o=i.style;i.innerHTML=this._acceptText,i.onclick=this._acceptClickHandler,i.className="rg-multicheck-accept",o.cursor="pointer",r.Utils.disableSelection(i),this._buttonElement.appendChild(i),o=(i=t.createElement("label")).style,i.innerHTML=this._cancelText,i.onclick=this._cancelClickHandler,i.className="rg-multicheck-cancel",o.marginLeft="2px",o.cursor="pointer",r.Utils.disableSelection(i),this._buttonElement.appendChild(i);var n=this._allCheckElement;if(n.onclick=this._allCheckClickHandler,r.Utils.clearChildren(n),this._showAllCheck){n.style.display="";var s=t.createElement("input");s.type="checkbox",s.id="$multiCheck_item_"+e.$_checkId++,s.onclick=this._allCheckClickHandler,this._allCheck=s,n.appendChild(s);var a=t.createElement("label");a.innerHTML=this._allCheckText,a.htmlFor=s.id,a.tabIndex=-1,r.Utils.disableSelection(a),n.appendChild(a),this.$_changeAllCheck()}else n.style.display="none"}},e.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i===this._itemIndex?(r.Utils.addClassName(o,"rg-multicheck-selectitem"),this.fireEvent(u.ACTIVE_DESCENDENT,o.id)):r.Utils.removeClassName(o,"rg-multicheck-selectitem")}if((e=this._itemIndex)>=0&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var n=o.offsetTop+r.Utils.getSize(o).height;n>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=n-this._listElement.clientHeight)}},e.CLOSE_UP_2="onMultiCheckListCloseUp",e.CANCEL="onMultiCheckListCancel",e.CHECK_CLICK="onMultiCheckListCheckClick",e.$_checkId=0,e}(u),_=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._showButtons=!0,o._showAllCheck=!1,o._setEditorAria("aria-multiselectable","true"),o}return n.__extends(e,t),_dp(e,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(e,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t}}),_dp(e,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t}}),_dp(e,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t}}),_dp(e,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t}}),e.prototype._createDropDown=function(t){return new p(t)},e.prototype.setMask=function(t){this._mask=null},e.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=(0,r.getDoc)(this._container),i=(0,r.getWin)(this._container);if(t||this._items&&this._items.length>0){this._grid;var o=this._list,n=this._options;this._selectedIndices=this._selectedIndices||[],o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items;var s=r.Utils.getClientRect(this._container);this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,o.caseSensitive=this.caseSensitive,o.dropDownCount=this.dropDownCount,o.dropDownWidth=this.dropDownWidth,o.dropDownPosition=this.dropDownPosition,o.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),o.sortStyle=this.itemSortStyle,o.valueIndices=this._selectedIndices.slice(),o.trimLabelText=this.trimLabelText;var a=this._grid.displayOptions;if(o.setZIndex(a.baseZindex+3),this._isMobile&&!this._isTablet){var l=e.documentElement;o.viewGridInside=!1,this._showMarquee(l),o.show(l,0,0,0,null),this._centerPopup(l,o._element)}else o.show(e.documentElement,s.cx+1,s.cy+s.height,this._cellBounds.width,r.Utils.getClientRect(this._editor));return!r.Utils.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}}return!1},e.prototype.getCheckValues=function(t,e,i){for(var o=[],n=0,r=t.length;n<r;n++)t[n]>=0&&t[n]<e.length&&o.push(this._labeling&&!i?e[t[n]].label:e[t[n]].value);return o},e.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;try{var i=this._list,o=this.editIndex&&this.editIndex.dataColumn,n=(0,r.getWin)(this._container);if(!r.Utils.isSlotMode()&&n.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),i.hide(),t&&i.selected){if(this._selectedIndices=i.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(o.valueSeparator),!r.Utils.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var s=this.getCheckValues(this._selectedIndices,this._items,!0).join(o.valueSeparator);this._commitListValue(s)}else this._dispatchChange(),e&&this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e)},e.prototype.setEditValue=function(t){var e,i=[],o=[],n=-1,a=this._editIndex.dataColumn,l=a.getField(),h=a.objectKey||l.objectKey;h&&t&&(t=t[h]);var u=r.Utils.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var d=this._domain;if(d)for(var c=0,p=u.length;c<p;c++)(n=d.keys.indexOf(u[c]))>=0&&(i.push(n),o.push(n<d.values.length?d.values[n]:u[c]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=d?o.join(this._editIndex.dataColumn.valueSeparator):i.length>0?this._editIndex.dataColumn.getLookupLabel(t):t,s.TextCellEditor.prototype.setEditValue.call(this,e)):s.TextCellEditor.prototype.setEditValue.call(this,t)}else if(this._values){for(c=0,p=u.length;c<p;c++)(n=this._values.indexOf(u[c]))>=0&&(i.push(n),o.push(this._labels&&n>=0&&this._labels.length>n?this._labels[n]:u[c]));this._labeling&&this._labels?(e=o.join(this._editIndex.dataColumn.valueSeparator),s.TextCellEditor.prototype.setEditValue.call(this,e)):s.TextCellEditor.prototype.setEditValue.call(this,t)}else s.TextCellEditor.prototype.setEditValue.call(this,t);this._selectedIndices=i},e.prototype.setCellEditValue=function(e,i){t.prototype.setCellEditValue.call(this,e,i)},e.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list;if(e.ctrlKey&&65==e.keyCode&&this.listing)return e.preventDefault(),i._allCheck.checked=!i._allCheck.checked,i.$_toggleAllCheck(),!0;if(32===e.keyCode)if(this.listing)return i.changeCheckIndex(i.itemIndex,null,!0),e.preventDefault(),!0;return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){t.prototype._keyPressHandler.call(this,e),this._list._selected=!1},e.prototype._inputHandler=function(e){t.prototype._inputHandler.call(this,e),this._list._selected=!1},e.prototype.$_getEditValue=function(t,e){function i(t,e,i,o,n){var r=[],s=e&&e.split(n.valueSeparator);if(s&&s.length>0)for(var a=0,l=s.length;a<l;a++)o.indexOf(s[a])>=0&&o.indexOf(s[a])<i.length?r.push(i[o.indexOf(s[a])]):(i.indexOf(s[a])>=0||!t.domainOnly)&&r.push(s[a]);return r}void 0===t&&(t=!1),void 0===e&&(e=!1);var o=this._strToVal(this.text),n=s.TextCellEditor.prototype.getEditValue.call(this,t,e),a=this._editIndex.dataColumn,h=a.getField(),u=h.dataType===l.ValueType.OBJECT&&(a.objectKey||h.objectKey),d=u?n[u]:n,c=this._selectedIndices.slice(),p=[],_=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(_)for(var f=0,g=c.length;f<g;f++)c[f]<this._domain.keys.length&&p.push(this._domain.keys[c[f]]);else o&&(p=i(this,o,this._domain.keys,this._domain.values,a));d=p.join(a.valueSeparator)}}else if(this._labeling&&void 0===(d=_?a.getLookupValues(c):a.getSourceValues(o))&&(d=n),this.domainOnly&&d){if(!a.values)return s.CellEditor.Unselected;for(f=(d=r.Utils.isArray(d)?d:d&&d.split?d.split(a.valueSeparator):[d]).length-1;f>=0;f--)a.values.indexOf(d[f])<0&&d.splice(f,1)}}else{if(this._labeling){if(_)for(f=0,g=c.length;f<g;f++)c[f]<this._values.length&&p.push(this._values[c[f]]);else o&&(p=i(this,o,this._values,this._labels,a));d=p.join(a.valueSeparator)}if(this.domainOnly&&d){if(!this._values)return s.CellEditor.Unselected;for(f=(d=r.Utils.isArray(d)?d:d&&d.split?d.split(a.valueSeparator):[d]).length-1;f>=0;f--)this._values.indexOf(d[f])<0&&d.splice(f,1)}}return d=r.Utils.isArray(d)?d.join(a.valueSeparator):d,u?(n[u]=d,n):d},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e,!0),!this._isMobile&&this.setFocus()},e.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},e.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},e.INPUT_CSS="rg-multicheck-editor",e}(c);t.MultiCheckCellEditor=_;var f=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._searchLength=1,o._searchDelay=1e3,o._useCtrlEnterKey=!1,o._useEnterKey=!1,o._initCount=0,o._moreItemCount=25,o._reInquery=!0,o._timer=void 0,o._editor.setAttribute("aria-autocomplate","list"),o}return n.__extends(e,t),_dp(e,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())}}),_dp(e,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())}}),_dp(e,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())}}),_dp(e,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())}}),_dp(e,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(e,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(e,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(e,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())}}),e.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText())&&(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),!0)},e.prototype.$_setItems=function(e,i){t.prototype.$_setItems.call(this,e,i),(!this.values||this.values.length<=0)&&(this.values=e,this.labels=i)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=13==e.keyCode;if(i&&(i=e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),i&&this.editing){e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer();var o=this.getEditText();return o&&o!=this._searchKey&&(this._searchKey=o,this._dispatchSearch(o)),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._inputHandler=function(e){this.isDisabled()||(t.prototype._inputHandler.call(this,e),this.$_search())},e.prototype._doEndEdit=function(){t.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},e.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=this.text,o=s.TextCellEditor.prototype.getEditValue.call(this,t,e),n=this._selectedIndex,r=n>=0;if(this._labeling){var a=r?n:this._labels?this._labels.indexOf(i):-1;a>=0&&a<this._values.length&&(o=this._values[a])}return this.domainOnly&&o&&(!this._values||this._values.indexOf(o)<0)?s.CellEditor.Unselected:o},e.prototype.dropDown=function(e){var i=this._list;return i&&(i.initCount=this.initCount,i.moreItemCount=this.moreItemCount,i.moreText=this.moreText),t.prototype.dropDown.call(this,!0)},e.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1,!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},e.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setTimeout(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},e.prototype.$_stopTimer=function(){this._timer&&clearTimeout(this._timer)},e.INPUT_CSS="rg-search-editor",e}(c);t.SearchCellEditor=f;var g=function(t){function e(e,o){var n=t.call(this,e,o)||this;return n._values=null,n._items=null,n._labels=null,n._sortStyle=i.NONE,n._itemIndex=-1,n._displayLabels=null,n._separator=null,n._itemColumned=!1,n._trimLabelText=!0,n.$_selectChanged=null,n._handled=!1,n._globalKeyDownHandler=function(t){var e=(0,r.getWin)(this._container);if(!(t.target instanceof e.HTMLTableCellElement))return this._keyDownHandler(t)}.bind(n),n}return n.__extends(e,t),e.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,t.prototype.dispose.call(this)},_dp(e,"native",{get:function(){return!0}}),_dp(e,"buttonCount",{get:function(){return 1}}),e.prototype.hasButton=function(t,e){return null==t||t},e.prototype._createEditor=function(t){var e=(0,r.getDoc)(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),o=i.style;return i.setAttribute("aria-hidden","true"),o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",this.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),i.addEventListener("change",this.$_selectChanged),this._container.appendChild(i),i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._refreshItems(),this._resetPosition()},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this._itemIndex=-1;for(var i=this._editor.options,o=0,n=i.length;o<n;o++)i[o].value===e?(this._itemIndex=o,i[o].selected=!0):i[o].selected=!1},e.prototype.prepare=function(){var t=(0,r.getWin)(this._container);this._handled||(!r.Utils.isSlotMode()&&t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},e.prototype.unprepare=function(){var t=(0,r.getWin)(this._container);!r.Utils.isSlotMode()&&t.removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode,o=r.Utils.isIE&&this.visible;switch(i){case 40:if(e.altKey)return this._requestStart(),!0;if(o)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(o)return!1}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._resetPosition=function(){var t=this._grid.getEditCellBounds(this,this._editIndex);t.x--,t.y--,this.setBounds(t.x,t.y,0,0,0)},e.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(i.dataRow>=0||(0,h.ItemState_isEditing)(o.itemState))){var n=i.dataColumn;if(n.lookupSource){for(var r=n.lookupKeyFieldIds,s=[],a=0;a<r.length-1;a++)s.push(o.getData(r[a]));var l=n.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&this.$_setItems(l.keys,l.values)}else n.values&&n.values.length>0&&this.$_setItems(n.values,n.labels)}},e.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,n=(0,r.getDoc)(i),s=o.length-1;s>=0;s--)o.remove(s);s=0;for(var a=t.length;s<a;s++){var l=n.createElement("option");l.value=t[s],l.text=e&&e.length>s?e[s]:t[s],this._items.push({value:l.value,label:l.text}),i.options.add(l,null)}},e.prototype.getEditValue=function(){return this.$_getEditValue()},e.prototype.$_getEditValue=function(){return this._editor.value},e.INPUT_CSS="rg-nlist-editor",e}(s.TextCellEditor);t.NativeListCellEditor=g}(vn)),vn}function wn(){if(mn)return nn;mn=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ClipboardManager=nn.ClipboardIndex=nn.ClipboardItem=nn.DefaultClipboardData=nn.ClipboardSource=nn.ClipboardData=void 0;var t=d,e=di(),i=Do(),o=To(),n=S(),r=xo(),s=C(),a=G(),l=un(),h=un(),u=pt(),c=fn(),p=Cn(),_=_o(),f=rt(),g=lt(),m=Li(),y=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){throw new Error("Method not implemented.")},i.prototype.getText=function(t,e,i,o){throw new Error("Method not implemented.")},i.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},i.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},i.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},i}(a.Base);nn.ClipboardData=y;var v=function(e){function o(t,i,o){var n=e.call(this)||this;return n._colCount=0,n._blockPaste=!1,n._lines=[],n._colCount=0,n._blockPaste=!1,n._parse(t,i,o),n}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"rowCount",{get:function(){return this._lines.length}}),_dp(o,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t}}),_dp(o,"empty",{get:function(){return 0==this._lines.length||0==this._colCount}}),_dp(o,"single",{get:function(){return 1==this._lines.length&&1==this._colCount}}),_dp(o,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t}}),_dp(o,"startIndex",{get:function(){return this._startIndex}}),o.prototype.get=function(t){return this._lines[t]},o.prototype._parse=function(t,e,o){var n,r,s,a,l,u=this._lines,d=[],c=t.length,p=0,_="";if(""===t)d.push(t),u.push(d),this._colCount=1;else{for(;p<c;)l=!1,n=t.charAt(p),r=p<c-1?t.charAt(p+1):"",'"'==n?a?s&&'"'==r?(_+=n,p++):s?s=!1:_+=n:(a=!0,s=!0):s||"\r"!=n&&"\n"!=n&&"\t"!=n?(a=!0,_+=n):("\t"==n&&(d.push(_),l=!0),"\r"!=n&&"\n"!=n||(d.push(_),this._colCount=Math.max(this._colCount,d.length),u.push(d),d=[],"\r"==n&&"\n"==r&&p++),_="",a=!1),p++;s&&(_='"'+_),(_.length>0||l)&&d.push(_),d.length>0&&(this._colCount=Math.max(this._colCount,d.length),u.push(d))}if(e&&e instanceof h.BlockSelection&&!e.single&&(!o||1===this._colCount&&1===u.length)){var f=e.startIndex,g=e.endIndex;if(f&&g){var m=e.grid,y=f.layout,v=g.layout,C=f.itemIndex,w=g.itemIndex;if(y.col>v.col){var x=y;y=v,v=x}if(C>w){var b=C;C=w,w=b}y=m.activeCellLayout.getTopOf(y);var I=(v=m.activeCellLayout.getBottomOf(v,!0)).col-y.col+1,E=(v.row-y.row+1)*(w-C+1);p=0;for(var S=0,R=u.length;S<R;S++){for(var T=u[S].slice(),D=T.length;D<I;D++)u[S].push(T[p]),p=p>=T.length?0:p;this._colCount=Math.max(this._colCount,u[S].length)}p=0;for(S=u.length;S<E;S++)u.push(u[p++]),p=p>=u.length?0:p;this._blockPaste=!0,this._startIndex=i.CellIndex.temp(m,C,y)}}},o}(a.Base);nn.ClipboardSource=v;var w=function(s){function a(){var t=s.call(this)||this;return t._lastLayout=null,t}return t.__extends(a,s),a.prototype._doDispose=function(){return s.prototype._doDispose.call(this)},a.prototype.lastLayout=function(){return this._lastLayout},a.prototype.getText=function(t,o,s,a){var l,h,u,d,c=t.grid,p=this._rangeToCells(t,null,o,a),_=[];if(c.copyOptions.includeHeaderText)for(u=0;u<p.length;u++){var f=[];for(d=0;d<p[u].length;d++)(l=n.Utils.cast(p[u][d],r.DataColumn))?f.push(n.Utils.addQuot(l.header.displayText)):f.push("");_.push(f.join("\t"))}if(!s){s=[];for(var g=o.r1,m=o.r2;g<=m;g++)s.push(g)}return s.forEach((function(o){var s=c.getItem(o);if(s.dataRow>=0||(0,e.ItemState_isInserting)(s.itemState))for(u=0;u<p.length;u++){var a=[];for(d=0;d<p[u].length;d++)(l=n.Utils.cast(p[u][d],r.DataColumn))&&!l.blankWhenCopy?(h=i.CellIndex.temp(c,o,l).clone(),a.push(t.getData(h))):a.push("");_.push(a.join("\t"))}})),_.join("\r\n")+"\r\n"},a.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+=t.getData(e)},a.prototype.getRows=function(t,e,o){if(null==e)return null;var n,r=o.grid,s=r.pasteOptions,a=r.getSelection(),u=o.dataColumn;if(a&&a.single&&!r.isTree()&&u.mergeEdit&&r.editOptions.commitByCell){var d=r.getMergedItems(o.itemIndex,u,!0,!0),c=new i.CellIndex(r,d[0],u),p=new i.CellIndex(r,d[d.length-1],u);a=new h.BlockSelection(r.selections,l.SelectionStyle.BLOCK,c,p),n=!0}else{if(s.selectBlockPaste&&r.selections.count>1)return void alert("multi selection paste not supported");a=s.selectBlockPaste&&a}var _=new v(e,a,n);if(_.empty)return null;if(_.single)return _.get(0)[0];_.blockPaste&&_.startIndex&&o.assign(_.startIndex);for(var f=r.activeCellLayout._dataCells,g=f[0][o.layout.col],m=f[f.length-1][Math.min(f[0].length-1,o.layout.col+_.colCount-1)],y=new i.CellIndex(r,o.itemIndex,g),C=new i.CellIndex(r,o.itemIndex,m),w=i.CellRange.create(y,C),x=this._rangeToCells(t,_,w,null),b=void 0,I=void 0,E=void 0,S=void 0,R=[],T=0,D=_.rowCount;T<D;){var k={columns:[],values:[]};for(b=0;b<x.length&&T<D;b++,T++){var M=x[b],L=_.get(T);for(k.columns.push(M),k.values.push(S=[]),E=Math.min(L.length,M.length),I=0;I<E;I++)M[I]?S.push(L[I]):S.push("")}R.push(k)}return R},a.prototype.getCell=function(t,e,i){if(!e)return null;var o=new v(e);return o.empty?null:o.get(0)[0]},a.prototype._rangeToCells=function(t,e,i,n){i.normalizeData(),this._lastLayout=null;var r=i.c1,s=i.c2,a=t.grid.activeCellLayout._dataCells,l=r===s?r.row:0,h=r===s?r.row:a.length-1,u=[];if(n){for(var d=[],c=l;c<=h;c++){for(var p=[],_=0;_<a[0].length;_++){var f=a[c][_];n.indexOf(f)>=0?(p.push(f.firstColumn),d[_]=d[_]||f):p.push(null)}u.push(p)}for(_=a[0].length-1;_>=0;_--)for(c=l;c<=h;c++)!d[_]&&u[c].splice(_,1)}else for(c=l;c<=h;c++){p=[];var g=r.source,m=s.source,y=g.col,v=m.col+m._defColSpan-1;for(_=y;_<=v;_++){(f=a[c][_])instanceof o.CellLayoutColumnItem?p.push(f.firstColumn):p.push(null)}u.push(p)}return this._lastLayout=a[h][s.col],u},a}(y);nn.DefaultClipboardData=w;var x=function(i){function o(t){var e=i.call(this)||this;return e._values=null,e._dataRow=-1,e._grid=t,e}return t.__extends(o,i),_dp(o,"isLeaf",{get:function(){return!0}}),_dp(o,"dataSource",{get:function(){return this._grid.dataSource}}),_dp(o,"checked",{get:function(){return 0!=(this._getExtents()&e.ITEM_EXT_CHECKED)}}),_dp(o,"type",{get:function(){return s.ItemType.ROW}}),o.prototype._getExtents=function(){return 0},o.prototype._setExtents=function(t){},_dp(o,"values",{set:function(t){this._values=t}}),_dp(o,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t}}),_dp(o,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),o.prototype.getRowObject=function(){for(var t={},e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=e.getOrgFieldName(o),s=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[r]=s}return t},o.prototype.getRowData=function(){for(var t=[],e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[o]=r}return t},o.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values.hasOwnProperty(t)||this._dataRow<0?this._values[t]:this.dataSource.getRow(this._dataRow)[t]},o.prototype.setIndex=function(t){this._setIndex(t)},o}(e.GridItem);nn.ClipboardItem=x;var b=function(e){function i(t,i){var o=e.call(this,t)||this;return o._item=i,o}return t.__extends(i,e),i.prototype._doDispose=function(){return e.prototype._doDispose.call(this)},_dp(i,"item",{get:function(){return this._item}}),i}(i.CellIndex);nn.ClipboardIndex=b;var I=function(){function t(t){this._grid=t,this._data=new w,this._appendingItem=new x(t),this._appendingIndex=new b(t,this._appendingItem)}return t.prototype.dispose=function(){return null},_dp(t,"grid",{get:function(){return this._grid}}),_dp(t,"appendingIndex",{get:function(){return this._appendingIndex}}),_dp(t,"isPasting",{get:function(){return this._pasting}}),t.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(!t.length||!t[0].length)return e;for(var i=0,o=t[0].length;i<o;i++)e.push(t[0][i].dataRoot);return e},t.prototype.getData=function(t){var i,o,r,a=this.grid,l=t.layout.firstColumn,h=a.getItem(t.itemIndex),u=a.copyOptions,d=u.datetimeFormat?f.DateTimeWriter.getFormatter(u.datetimeFormat):null,c=u.booleanFormat?g.BooleanFormatter.getFormatter(u.booleanFormat):null,p=u.copyTextCallback;if(!h||!((0,e.ItemState_isInserting)(h.itemState)||h.dataRow>=0))return"";if(r=h.getData(l.dataIndex),l&&null!=(i=a.dataSource.getField(l.dataIndex))){if(null==(o=p?p.call(this,a,t.itemIndex,t.dataColumn,r):void 0))if(u.copyDisplayText)o=a.getDisplayText(t);else switch(i.dataType){case s.ValueType.DATETIME:case s.ValueType.DATE:o=r?d?d.getText(r):String(r):"";break;case s.ValueType.BOOLEAN:o=null!=r?c?c.formatValue(r):String(r):"";break;case s.ValueType.NUMBER:o=null==r||isNaN(r)?"":String(r);break;case s.ValueType.OBJECT:o=r&&"object"==typeof r?JSON.stringify(r):"";break;default:o=u.lookupDisplay&&(l.lookupDisplay||l.labelField)?m.DataCell.getText(h,l):null!=r?String(r):""}return n.Utils.addQuot(o)}return""},t.prototype.copyEmtpyToClipboard=function(){return""},t.prototype.copyToClipboard=function(t,e,i){return this._data.getText(this,t,e,i)},t.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},t.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},t.prototype.pasteFromClipboard=function(t,e){var o=t.clone(),n=this.grid.pasteOptions.forceAppend;if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var r=this._data.getRows(this,e,t);null!=r&&("string"==typeof r?this._pasteSingleCell(t,r):1!=r.length||n?(r.length>1||1===r.length&&n)&&this._pasteMultiLines(t,r):this._pasteSingleLine(t,r[0]))}i.CellIndex.areEquals(t,o)||this._grid.setFocusedIndex(o,!1,!1)}},t.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&e.selections.count>0){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},t.prototype._convertValue=function(t,e,i,o,n,r){var a=void 0,l=i.dataIndex,h=t.getField(l),d=this._grid;switch(h.dataType){case s.ValueType.NUMBER:var _=d.delegate.getCellEditor(c.CellEditor.getEditorType(i.editor));a=NaN;var f=void 0;if(o){var g=void 0;if(e.applyNumberFormat||e.applyMaxLength){var m=d.body.getCell(r,!1);"object"!=typeof(g=i.getCellStyle(m))&&(g=void 0);var y=g&&g.editor||i.editor;"number"===c.CellEditor.getEditorType(y)&&((_=d.delegate.getCellEditor("number")).initOptions(),_.applyOptions(y))}var v=i.name;if(e.applyNumberFormat){var C=_&&_.editFormat||g&&g.numberFormat||i.numberFormat||d.formatOptions.numberFormat;C&&(f=new u.DecimalFormatter(C))}var w=e.numberCharExpOfCol(v);w&&(o=o.replace(w,""));var x=e.numberSeparatorOfCol(v);if(x&&(o=o.replace(x,".")),a=f?+parseFloat(o).toFixed(f.maxDigits):parseFloat(o),e.applyMaxLength){var b=String(a).split(".");_&&_.maxIntegerLength>0&&(b[0]=b[0].substr(0,_.maxIntegerLength)),o=b.join("."),_&&_.maxLength>0&&(o=o.substr(0,_.maxLength)),a=parseFloat(o)}}else""==o&&(a=null);break;case s.ValueType.DATETIME:a=null;var I=e.dateReaders;if(o&&I)for(var E=0;E<I.length&&!(a=I[E].toDate(o,!1));E++);null===a&&(a=new Date(o),isNaN(a.getTime())&&(a=null)),null===a&&(a=h.readValue(o));break;case s.ValueType.BOOLEAN:a=void 0;var S=e.boolReader;o&&S&&(a=S.toBoolStrict(o)),void 0===a&&(a=h.readValue(o));break;default:if(o=String(o)){var R=d.delegate.getCellEditor(c.CellEditor.getEditorType(i.editor));if(R instanceof p.DropDownCellEditor){R.initOptions(),R.applyOptions(i.editor);var T=e.checkDomainOnly&&R.domainOnly,D=e.convertLookupLabel,k=-1,M=[],L=[];if(T||D)if(R.values&&R.values.length>0)L=R.values,M=R.labels;else if(i.lookupSource){var O=i.lookupSource,F=i.lookupKeyFieldIds,P=[];for(E=0;E<F.length-1;E++)P.push(n[F[E]]);var B=O.getTextDomain(P);L=B&&B.keys,M=B&&B.values}else i.values&&i.values.length>0&&(L=i.values,M=i.labels);o=D&&L&&M&&L.indexOf(o)<0&&(k=M.indexOf(o))>=0?L[k]:o,o=L&&L.indexOf(o)>=0?o:T?"":o}else e.applyMaxLength&&R&&R instanceof c.TextCellEditor&&R.maxLength>0&&(o=o.substr(0,R.maxLength)),i.textInputCase==s.TextInputCase.LOWER?o=o.toLocaleLowerCase():i.textInputCase==s.TextInputCase.UPPER&&(o=o.toLocaleUpperCase())}a=o}return a},t.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));i.length>0&&e._fireItemsPasted(i)},t.prototype._cellWritable=function(t,i,o){var n=this._grid,r=n._fireCellPasting(t,o);if("boolean"==typeof r)return r;if(!n.pasteOptions.checkReadOnly)return!0;var s=n.body.getIndexCellStyle(t);if(s&&(null!=s.readOnly||null!=s.editable))return null!=s.editable?s.editable&&!s.readOnly:!s.readOnly;var a=n.body.getRowStyle(t.item,t.itemIndex<n.fixedOptions.rowCount);if("object"==typeof a&&(null!=a.readOnly||null!=a.editable))return null!=a.editable?a.editable&&!a.readOnly:!a.readOnly;var l=n.fixedOptions;if((t.colFixed||t.rightFixed)&&!l.editable||t.rowFixed&&!l.rowEditable)return!1;var h,u=t.item&&t.item.itemState;switch(i||u){case e.ItemState.NORMAL:case e.ItemState.FOCUSED:case e.ItemState.UPDATING:h=n.canUpdate(t.item,t.dataField);break;default:h=!0}var d=this.grid.getBodyCellAt(t,!1);if(d&&d.renderer2&&d.renderer2.canEdit())return h&&!t.dataColumn.readOnly;if(!d){var c=t.dataColumn.renderer;if(c&&"check"===c.type&&null!=c.editable)return h&&c.editable&&!t.dataColumn.readOnly}return h&&t.dataColumn.isWritable()},t.prototype._applyMaskValue=function(t,e){var i,o=this.grid.body.getIndexCellStyle(t);if(o.editor&&o.editor.mask?i=o.editor.mask:o.editor||(i=t.dataColumn.editor&&t.dataColumn.editor.mask),i){var n=new c.EditMask(null,i);return n.clearBuffer(),n.writeBuffer(e,!0),n.checkValid()?n.getStripValue():null}return e},t.prototype._applyInputChars=function(t,e){if(!this.grid.pasteOptions.applyInputChars)return e;var i,o,n=this.grid.body.getIndexCellStyle(t).editor||t.dataColumn.editor;return n?((o=n.inputCharacters)&&(i=new RegExp("[^"+o+"]","g")).test(e)&&(e=e.replace(i,"")),(o=n.ignoreCharacters)&&(i=new RegExp("["+o+"]","g")).test(e)&&(e=e.replace(i,"")),e):e},t.prototype._pasteSingleCell=function(t,i){var o,n=this._grid,r=n.dataSource,a=t.dataColumn,l=n.pasteOptions;if(null!=i&&r&&a&&!n.editOptions.readOnly&&t.item.canEdit()){i.lastIndexOf("\r\n")==i.length-1&&(i=i.substr(0,i.length-2)),i.lastIndexOf("\n")==i.length-1&&(i=i.substr(0,i.length-1));var h=this._convertValue(r,l,a,i,t.item&&t.item.getRowData(),t);if(h=l.applyEditMask?this._applyMaskValue(t,h):h,h=this._applyInputChars(t,h),this._cellWritable(t,null,h))if(n.isItemEditing()||/*!grid.editOptions.commitByCell &&*/l.startEdit&&n.edit(t)){o=t.item;var u=[],d=[];d[t.dataField]=h,u[t.dataField]=o.getData(t.dataField),n.setCellUpdateEventLock(l.noEditEvent);try{o.setData(a.dataIndex,h)}finally{n.setCellUpdateEventLock(!1)}n.validateCellCommit(t,t.item.getData(t.dataField)),n.editOptions.commitByCell&&n.commit(!1,!1,!0),n._fireEditItemPasted(o,[t.dataField],u,d),n.refreshView()}else{this._pasting=!0;try{var c=n.validationManager,p=l.forceRowValidation,f=l.forceColumnValidation;o=t.item;var g=this._appendingItem.values=p||f?o.getRowData():[];g[a.dataIndex]=h;var m=(0,e.ItemState_isInserting)(o.itemState);if(this._appendingItem.dataRow=o.dataRow,this._appendingItem.setIndex(o.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,p&&c.validateRow(this._appendingItem,m,!0,!0),f){this._appendingIndex.column=a;try{c.validateCell(this._appendingIndex,m,!0)}catch(t){if(!(t instanceof _.ValidationError))throw t;if((0,s.ValidationLevel_compare)(t.level,n.editOptions.commitLevel)<0)throw t}}c.clearInvalidCell(this._appendingIndex),n.updatePastedRow(o,g,!p)}finally{this._pasting=!1}}}},t.prototype._pasteSingleLine=function(t,o){var n,r,a,h,u,d,c,p=this._grid,f=p.dataSource,g=p.pasteOptions,m=p.editOptions,y=!1;if(f&&!m.readOnly&&f){if(p.isItemEditing()||/*!editOptions.commitByCell && */g.startEdit&&p.edit(t)){var v=[],C=[],w=[],x=t.column;for(r=t.item,a=Math.min(o.columns.length,o.values.length),h=0;h<a;h++){var b=o.columns[h],I=o.values[h];for(u=0;u<I.length;u++){c=b[u];var E=I[u];if(c){var S=i.CellIndex.temp(p,t.itemIndex,c),R=r.getData(c.dataIndex);n=this._convertValue(f,g,c,E,r&&r.getRowData(),S),n=g.applyEditMask?this._applyMaskValue(S,n):n,n=this._applyInputChars(S,n),p.setCellUpdateEventLock(g.noEditEvent);try{(d=this._cellWritable(S,null,n))&&r.setData(c.dataIndex,n)}finally{p.setCellUpdateEventLock(!1)}d&&(t.column=c,p.validateCellCommit(t,r.getData(c.dataIndex)),v.push(c.dataIndex),C[c.dataIndex]=R,w[c.dataIndex]=n,y=!0)}}}y&&(m.commitByCell&&p.commit(!1),p._fireEditItemPasted(r,v,C,w),t.column=x,p.refreshView())}else{this._pasting=!0;try{var T=p.validationManager,D=g.forceRowValidation,k=g.forceColumnValidation,M=this._appendingItem;r=t.item,M.setIndex(r.index),M.dataRow=r.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex;w=M.values=D||k?r.getRowData():[];a=Math.min(o.columns.length,o.values.length);b=void 0,I=void 0;for(h=0;h<a;h++)for(b=o.columns[h],I=o.values[h],u=0;u<I.length;u++)if(c=b[u]){S=i.DummyCellIndex.tempItem(p,M,c);n=this._convertValue(f,g,c,I[u],M&&M.getRowData(),S),n=g.applyEditMask?this._applyMaskValue(S,n):n,n=this._applyInputChars(S,n),(d=this._cellWritable(S,null,n))&&(w[c.dataIndex]=n,y=!0)}if(y){var L=(0,e.ItemState_isInserting)(r.itemState);if(D&&T.validateRow(M,L,!0,!0),k)for(h=0;h<a;h++)for(b=o.columns[h],I=o.values[h],u=0;u<I.length;u++){this._appendingIndex.column=b[u];try{T.validateCell(this._appendingIndex,L,!0)}catch(t){if(!(t instanceof _.ValidationError))throw t;if((0,s.ValidationLevel_compare)(t.level,m.commitLevel)<0)throw t}}T.clearInvalidCells(r.dataId),p.updatePastedRow(r,w,!D)}}finally{this._pasting=!1}}p.selections.clear(),p.selections.add(t,new i.CellIndex(p,t.itemIndex,this._data.lastLayout()),l.SelectionStyle.BLOCK)}},t.prototype._pasteMultiLines=function(t,o){var n=this._grid,a=n.dataSource;if(a){var h=n.pasteOptions,u=h.forceAppend,d=h.checkReadOnly;if(d&&n.editOptions.readOnly)return;var c=h.noDataEvent,p=o.length,f=t.itemIndex,g=a.fieldCount,m=n.getDataColumns(!1),y=m.length,v=n.validationManager,C=h.forceRowValidation,w=h.forceColumnValidation,x=this._appendingItem,b=this._appendingIndex,I=void 0,E=void 0,S=void 0,R=void 0,T=h.eventEachRow,D=[];h.commitEdit&&n.commit(!1)||n.cancel();var k=n.itemCount;c&&a.beginUpdate();var M=void 0,L=void 0;if(!n.isTree()){var O=n.itemSource;M=O.filterMode,L=O.sortMode,O.filterMode=s.FilterMode.EXPLICIT,O.sortMode=s.SortMode.EXPLICIT}try{for(this._pasting=!0,I=0;I<p&&f<k&&!u;I++)try{if((q=n.getItem(f)).itemState==e.ItemState.APPENDING)break;for(;q&&q.dataRow<0;)f++,q=n.getItem(f);if(null==q)break;var F=o[I],P=x.values=C||w?q.getRowData():[],B=C||w?q.getRowData():[],V=!1,N=[];for(x.setIndex(q.index),x.dataRow=q.dataRow,S=Math.min(F.columns.length,F.values.length),E=0;E<S;E++){var A=F.columns[E],$=F.values[E];for(R=0;R<$.length;R++){if((W=A[R])&&W instanceof r.DataColumn){var H=i.DummyCellIndex.tempItem(n,x,W),U=this._convertValue(a,h,W,$[R],x&&x.getRowData(),H);U=h.applyEditMask?this._applyMaskValue(H,U):U,U=this._applyInputChars(H,U),(j=this._cellWritable(H,null,U))&&(V=V||j||!d,N.push(W.dataIndex),B[W.dataIndex]=q.getData(W.dataIndex),P[W.dataIndex]=U)}}}if(V)try{b.column=null,b.itemIndex=q.index;var G=(0,e.ItemState_isInserting)(q.itemState);if(C&&v.validateRow(x,G,!0,!0),w)for(R=0;R<y;R++){var W=m[R];b.column=W;try{v.validateCell(b,G,!0)}catch(t){if(!(t instanceof _.ValidationError))throw t;if((0,s.ValidationLevel_compare)(t.level,n.editOptions.commitLevel)<0)throw t}}n.updatePastedRow(q,P,!C),v.clearInvalidCells(x.dataId),T&&n._fireEditItemPasted(q,N,B,P),D.push(q.dataRow)}catch(t){if(h.stopOnError)throw t}f++}catch(e){throw f=Math.max(t.itemIndex,f-1),n.setFocusedIndex(t,!1),n.selections.clear(),n.selections.add(t,new i.CellIndex(n,f,this._data.lastLayout()),l.SelectionStyle.BLOCK),e}if(I<p&&h.enableAppend){for(;I<p;I++){F=o[I],P=x.values=[],B=[];x.dataRow=-1,x.setIndex(-1);try{N=[];for(S=Math.min(F.columns.length,F.values.length),E=0;E<S;E++){A=F.columns[E],$=F.values[E];for(R=0;R<$.length;R++){if(W=A[R]){var j;H=i.DummyCellIndex.tempItem(n,x,W),U=this._convertValue(a,h,W,$[R],P,H);U=h.applyEditMask?this._applyMaskValue(H,U):U,U=this._applyInputChars(H,U),(j=this._cellWritable(H,e.ItemState.APPENDING,U))&&(N.push(W.dataIndex),P[W.dataIndex]=U,B[W.dataIndex]=void 0)}}}if(h.fillColumnDefaults)for(R=0;R<y;R++){(W=m[R]).dataIndex>-1&&void 0===P[W.dataIndex]&&void 0!==W.defaultValue&&(P[W.dataIndex]=W.defaultValue)}if(h.fillFieldDefaults)for(R=0;R<g;R++)if(void 0===P[R]){var z=a.getField(R);void 0!==z.defaultValue&&(P[R]=z.defaultValue)}try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,C&&v.validateRow(x,!0,!0,!0),h.forceColumnValidation)for(R=0;R<y;R++){W=m[R];this._appendingIndex.column=W;try{v.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof _.ValidationError))throw t;if((0,s.ValidationLevel_compare)(t.level,n.editOptions.commitLevel)<0)throw t}}var Y=n.appendPastedRow(P);if(T){var q=n.getItem(n.getItemIndexOfRow(Y));n._fireEditItemPasted(q,N,B,P)}D.push(Y)}catch(t){if(h.stopOnError)throw t}}catch(e){throw f=Math.max(t.itemIndex,n.itemCount-1),n.setFocusedIndex(t,!1),n.selections.clear(),n.selections.add(t,new i.CellIndex(t.grid,f,this._data.lastLayout()),l.SelectionStyle.BLOCK),e}}f=c?-1:n.itemCount}this._fireRowsPasted(D)}catch(t){throw this._fireRowsPasted(D),t}finally{if(this._pasting=!1,c&&(a.endUpdate(),f<0&&(f=a.rowCount)),!n.isTree()){var X=n.itemSource;(X.isFiltered(null)&&X.filterMode!==M||X.sorted&&X.sortMode!==L)&&(X.filterMode=M,X.sortMode=L,X._refreshItems())}}u&&D.length>0&&((t=t.clone()).itemIndex=f-D.length),n.setFocusedIndex(t,!1),n.selections.clear(),n.selections.add(t,new i.CellIndex(t.grid,f-1,this._data.lastLayout()),l.SelectionStyle.BLOCK)}},t}();return nn.ClipboardManager=I,nn}function xn(){if(yn)return on;yn=1,Object.defineProperty(on,"__esModule",{value:!0}),on.GridBody=void 0;var t=d,e=Li(),i=Ii(),o=di(),n=xo(),r=C(),s=wn(),a=function(i){function a(t){var r=i.call(this,t)||this;return r._cellButtonWidth=16,r._cellButtonHeight=16,r._editButtonWidth=16,r._editButtonHeight=16,r._errorIconWidth=16,r._errorIconHeight=16,r._showChangeMarker=!1,r._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},r._buttonHeight=16,r._dataCell=new e.DataCell,r._hiddenCell=new e.HiddenDataCell,r._literalCell=new e.LiteralCell,r._seriesCell=new e.SeriesCell,r._mergedCell=new e.MergedDataCell,r._cs=new n.ColumnStyle,r._rowCs=new o.RowStyle,r}return t.__extends(a,i),a.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._cs=null,this._rowCs=null,i.prototype._doDispose.call(this)},_dp(a,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),_dp(a,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())}}),_dp(a,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this.refreshOwner()}}),_dp(a,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())}}),_dp(a,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())}}),_dp(a,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())}}),_dp(a,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"buttonHeight",{get:function(){return this._buttonHeight}}),a.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},a.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},a.prototype.getCellAt=function(t,i,o){var a,l=this._grid;if(o?a=this._mergedCell:i instanceof n.DataColumn?t.index<0||t instanceof s.ClipboardItem?(a=this._hiddenCell,this._hiddenCell.setItem(t)):a=this._dataCell:a=i instanceof n.SeriesColumn?this._seriesCell:i instanceof e.LiteralCell?this._literalCell:this._dataCell,a.setIndex2(l,t?t.index:-1,i),i instanceof n.DataColumn){var h=l.validationManager.getError(a.index);h?(a.error=h.message,a.errorLevel=h.level):(a.error=null,a.errorLevel=r.ValidationLevel.IGNORE)}return a},a.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},a.prototype.getCellSimple=function(t,i){var o=t.column,r=i?this._mergedCell:o instanceof n.SeriesColumn?this._seriesCell:o instanceof e.LiteralCell?this._literalCell:this._dataCell;return r.setIndex(t),r},a.prototype.getIndexCellStyle=function(t,e){var i=this.getCell(t,!1);return this.getCellStyle(i,this._cs.clear(),!1,e)},a.prototype.getCellStyle=function(t,e,i,o){void 0===o&&(o=!0);var n,r=t.valueColumn,s=this._cellStyleCallback;s&&(n=s(this._grid.handler,t),e.assign(n)),r&&(n=r.getCellStyle(t),e.assign(n));var a=this.getUserCellStyle(t.index.dataRow,t.valueColumn.name);a&&e.assign(a);var l=e.styleName||r&&r.styleName||"";return o&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+l),e},a.prototype.getCellFormatters=function(t,e,i,o){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),i){var n=i.grid,r=n.body.getCell(i,!1);e=(o=n.body.getCellStyle(r,o)).toFormatter(e)}return e},a.prototype.getRowStyle=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var n=this._grid,r=this._rowCs;if(r.clear(),o){var s=this._rowStyleCallback;if(s){var l=s(n.handler,t,e)||{};r.assign(l)}var h=this.getUserCellStyle(t.dataRow,-1);h&&r.assign(h)}if(!r.styleName){var u=a.ROW_STYLE;t.index%2&&n.displayOptions.useAlternateRowStyle&&(u+=a.ALTERNATE_ROW_STYLE),e&&(u+=a.FIXED_ROW_STYLE),i||(u+=a.STATE_ROW_STYLES[t.rowState]||""),t.checked&&(u+=a.CHECKED_ROW_STYLE),r.styleName=u}return r},a.prototype.addUserCellStyle=function(t,e,i){var o=this._grid,n=o.getItemOfRow(t,!0);n&&(o.itemSource.addCellStyle(n.dataId,e,i)&&o.refreshView())},a.prototype.removeUserCellStyle=function(t,e){var i=this._grid,o=null!=t?i.getItemOfRow(t,!0):null;(o||null==t)&&(i.itemSource.removeCellStyle(o?o.dataRowId:null,e)&&i.refreshView())},a.prototype.getUserCellStyle=function(t,e){var i=this._grid,o=i.getItemOfRow(t,!0);if(o)return i.itemSource.getUserCellStyle(o.dataId,e)},a.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._showChangeMarker=t.displayOptions.showChangeMarker},a.ROW_STYLE=" rg-data-row",a.ALTERNATE_ROW_STYLE=" rg-alternate-row",a.FIXED_ROW_STYLE=" rg-fixed-row",a.CHECKED_ROW_STYLE=" rg-checked-row",a.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},a}(i.VisualObject);return on.GridBody=a,on}var bn,In,En={},Sn={};function Rn(){if(bn)return Sn;bn=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.GridBaseOptions=void 0;var t=d,e=function(e){function i(t){var i=e.call(this)||this;return i._grid=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){return this._grid=null,e.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),i.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},i.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},i.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},i.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},i}(G().Base);return Sn.GridBaseOptions=e,Sn}function Tn(){if(In)return En;In=1,Object.defineProperty(En,"__esModule",{value:!0}),En.FixedOptions=void 0;var t=d,e=function(e){function i(t){var i=e.call(this,t)||this;return i._colCount=0,i._rightCount=0,i._rowCount=0,i._rightFixed=!0,i._exceptFromFiltering=!0,i._exceptFromSorting=!0,i._editable=!0,i._rowEditable=!0,i._resizable=!1,i._rowResizable=!1,i._movable=!1,i._colBarWidth=3,i._rightBarWidth=3,i._rowBarHeight=3,i._mergeRows=!1,i._blankRows=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())}}),_dp(i,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())}}),_dp(i,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())}}),_dp(i,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())}}),_dp(i,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())}}),_dp(i,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())}}),_dp(i,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())}}),_dp(i,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())}}),_dp(i,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)}}),_dp(i,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)}}),_dp(i,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)}}),_dp(i,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())}}),_dp(i,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())}}),_dp(i,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())}}),_dp(i,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))}}),_dp(i,"blankRows",{get:function(){return this._blankRows},set:function(t){t!=this._blankRows&&(this._blankRows=t,this.$_resetItemSource(!0))}}),i.prototype._refreshOwner=function(){e.prototype._refreshOwner.call(this),this.grid&&this.grid.invalidateColumns()},i.prototype.$_resetItemSource=function(t){var e,i=this.grid;i&&(e=i.itemSource)&&e.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering,t)},i.ROW_BAR_STYLE="rg-fixed-row-bar",i.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",i.COLUMN_BAR_STYLE="rg-fixed-column-bar",i}(Rn().GridBaseOptions);return En.FixedOptions=e,En}var Dn,kn={};function Mn(){if(Dn)return kn;Dn=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.DisplayOptions=void 0;var t=d,e=Rn(),i=C(),o=un(),n=S(),r=function(e){function r(t){var r=e.call(this,t)||this;return r._refreshMode=i.RefreshMode.ALL,r._columnResizable=!0,r._columnMovable=!0,r._minCellWidth=8,r._defaultColumnWidth=100,r._fitStyle=i.GridFitStyle.NONE,r._rowResizable=!1,r._eachRowResizable=!1,r._autoClearHeights=!0,r._rowHeight=0,r._refCalcHeights=!0,r._dataHeights=null,r._minTableRowHeight=23,r._minRowHeight=23,r._maxRowHeight=0,r._hscrollBar=!0,r._vscrollBar=!0,r._liveScroll=!0,r._scrollDuration=0,r._hscrollDuration=0,r._hintDelay=0,r._showTooltip=!1,r._rowChangeDelay=0,r._horzPageScroll=!1,r._emptyMessage="이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",r._showEmptyMessage=!1,r._focusVisible=!0,r._focusType="layer",r._rowFocusType=i.RowMaskType.NONE,r._groupFocusVisible=!1,r._wheelEnabled=!0,r._wheelScrollLines=3,r._wheelScrollHorz=16,r._wheelAccelDelay=0,r._wheelAccelScroll=null,r._wheelDeltaY=0,r._wheelEventPropagate=!0,r._rightClickable=!0,r._remergeWhenColumnMoved=!0,r._editItemMerging=!1,r._showInnerFocus=!0,r._toastZIndex=3e3,r._popupDropdownCount=0,r._selectionMode=o.SelectionMode.SINGLE,r._selectionStyle=o.SelectionStyle.BLOCK,r._selectionDisplay=o.SelectionDisplay.CELL,r._selectAndImmediateDrag=!1,r._selectAtSingleRow=!1,r._rowHoverType=i.RowMaskType.NONE,r._rowBlockType=i.RowMaskType.NONE,r._showEmptyTooltip=!1,r._showChangeMarker=!0,r._showNativeEditButton=!1,r._baseZindex=2e3,r._useAlternateRowStyle=!0,r._useFocusClass=!1,r._watchDisplayChange=!0,r._syncGridHeight=i.SyncGridHeight.NONE,n.Utils.isMobile()&&(r._selectionStyle=o.SelectionStyle.NONE),(n.Utils.ieNine||n.Utils.ieTen)&&(r._focusType="line"),t.setWatchTimer(r._watchDisplayChange),r}return t.__extends(r,e),r.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(r,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this.grid.setNeedRefresh(!0),this._changed())}}),_dp(r,"columnResizable",{get:function(){return this._columnResizable},set:function(t){this._columnResizable=t}}),_dp(r,"columnMovable",{get:function(){return this._columnMovable},set:function(t){this._columnMovable=t}}),_dp(r,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())}}),_dp(r,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())}}),_dp(r,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(t){t!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=t,this._changed())}}),_dp(r,"rowResizable",{get:function(){return this._rowResizable},set:function(t){this._rowResizable=t}}),_dp(r,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){this._eachRowResizable=t}}),_dp(r,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())}}),_dp(r,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(t){t!=this._refCalcHeights&&(this._refCalcHeights=t)}}),_dp(r,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(r,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&t.length>0?this._dataHeights=t.slice():this._dataHeights=null,this._changed()}}),_dp(r,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(r.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())}}),_dp(r,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(r.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(r,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(r,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())}}),_dp(r,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())}}),_dp(r,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())}}),_dp(r,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())}}),_dp(r,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){this._scrollDuration=t}}),_dp(r,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){this._hscrollDuration=t}}),_dp(r,"hintDelay",{get:function(){return this._hintDelay},set:function(t){this._hintDelay=Math.max(t,0)}}),_dp(r,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(r,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){this._rowChangeDelay=t}}),_dp(r,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){this._horzPageScroll=t}}),_dp(r,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))}}),_dp(r,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())}}),_dp(r,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())}}),_dp(r,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())}}),_dp(r,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())}}),_dp(r,"groupFocusVisible",{get:function(){return this._groupFocusVisible},set:function(t){t!==this._groupFocusVisible&&(this._groupFocusVisible=t,this._changed())}}),_dp(r,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){this._wheelEnabled=t}}),_dp(r,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){this._wheelScrollLines=t}}),_dp(r,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){this._wheelScrollHorz=t}}),_dp(r,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){this._wheelAccelDelay=t}}),_dp(r,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){this._wheelAccelScroll=t}}),_dp(r,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(t){this._wheelDeltaY=t}}),_dp(r,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){this._wheelEventPropagate=t}}),_dp(r,"rightClickable",{get:function(){return this._rightClickable},set:function(t){this._rightClickable=t}}),_dp(r,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t}}),_dp(r,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())}}),_dp(r,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())}}),_dp(r,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){this._toastZIndex=t}}),_dp(r,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){this._popupDropdownCount=t}}),_dp(r,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearAddSelection())}}),_dp(r,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){t!=this._selectionStyle&&(this.grid.selections.clear(),this._selectionStyle=t,this._refreshOwner())}}),_dp(r,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())}}),_dp(r,"selectAndImmediateDrag",{get:function(){return this._selectAndImmediateDrag},set:function(t){this._selectAndImmediateDrag=t}}),_dp(r,"selectAtSingleRow",{get:function(){return this._selectAtSingleRow},set:function(t){this._selectAtSingleRow=t}}),_dp(r,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())}}),_dp(r,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())}}),_dp(r,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(t){t!==this._rowBlockCallback&&(this._rowBlockCallback=t,this._rowBlockType!=i.RowMaskType.NONE&&this._refreshOwner())}}),_dp(r,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t}}),_dp(r,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())}}),_dp(r,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t}}),_dp(r,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())}}),_dp(r,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)}}),_dp(r,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())}}),_dp(r,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())}}),_dp(r,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t}}),_dp(r,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))}}),_dp(r,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(t){t!=this._syncGridHeight&&(this._syncGridHeight=t,t!==i.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())}}),_dp(r,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(t){this._rowHeightCallback=t,this.grid.clearRowHeights(!1),this._changed()}}),r.MIN_TABLE_ROW_HEIGHT=15,r}(e.GridBaseOptions);return kn.DisplayOptions=r,kn}var Ln,On={},Fn={};function Pn(){if(Ln)return Fn;Ln=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Size=void 0;var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},_dp(t,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.set=function(t,e){return this.width=t,this.height=e,this},t.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},t.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},t.EMPTY=new t,t}();return Fn.Size=t,Fn}var Bn,Vn,Nn={},An={};function $n(){if(Bn)return An;Bn=1,Object.defineProperty(An,"__esModule",{value:!0}),An.EmptyGridElement=An.VisualObjectElement=An.isItemElement=An.GridElement=void 0;var t=d,e=hn(),i=Sa(),o=Pn(),n=S(),r=function(e){function n(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return t.__extends(n,e),n.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof i.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t){(this.grid._loading||this.visible)&&(this._doPrepareContent(t),this._doLayoutContent(t))},n.prototype._getCssSelector=function(){return""},n.prototype._getCssDisplay=function(){return"table"},n.prototype._doDraw=function(t){this._doRender(t)},n.prototype._doMeasure=function(t,e,i){return new o.Size(e,i)},n.prototype._doPrepareContent=function(t){},n.prototype._doLayoutContent=function(t){},n.prototype._doRender=function(t){},n}(e.VisualElement);An.GridElement=r,An.isItemElement=function(t){return t&&"itemIndex"in t};var s=function(e){function i(t,i,o){void 0===o&&(o=null);var r=e.call(this,t,o)||this;return r._ff=n.Utils.isFirefox,r._chromium=n.Utils.isChromium,r._textProp=n.Utils.TextProp,r._cursor="default",r._model=i,r}return t.__extends(i,e),i.prototype._doDispose=function(){this._model=null,e.prototype._doDispose.call(this)},_dp(i,"model",{get:function(){return this._model}}),i.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},i}(r);An.VisualObjectElement=s;var a=function(e){function i(t){return e.call(this,t,"emptyGridView")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.setMessage=function(t){this._span[n.Utils.TextProp]=t},i.prototype._createDom=function(t){var i=e.prototype._createDom.call(this,t),o=this._span=t.createElement("span");return i.appendChild(o),i},i.prototype._getCssSelector=function(){return"rg-empty-grid"},i.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},i}(r);return An.EmptyGridElement=a,An}function Hn(){if(Vn)return Nn;Vn=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.DataTableElement=Nn.SimpleTableElement=Nn.TableBaseElement=void 0;var t=d,e=$n(),i=ln(),o=S(),n=C(),r=function(e){function r(t,i,o){void 0===o&&(o=null);var n=e.call(this,t,i,o)||this;return n._explicitWidth=NaN,n}return t.__extends(r,e),r.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,e.prototype._doDispose.call(this)},_dp(r,"tableRowCount",{get:function(){return this._tbody.childElementCount}}),r.prototype.getCellPoint=function(t,e){return(e=e||new i.Point).x+=t.offsetLeft,e.y+=t.offsetTop,e},r.prototype._getTableHidden=function(){return!0},r.prototype._getTableCaption=function(){return""},r.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table");this._getTableHidden()&&i.setAttribute("aria-hidden","true"),i.setAttribute("role","grid");var o=i.createCaption();o.textContent="grid table ";var n=o.style;return n.width=n.height="0px",n.overflow="hidden",n.setProperty("padding","0px","important"),n.boxSizing="border-box",(n=i.style).setProperty("table-layout","fixed","important"),n.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},r.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t[n.T_VIEW]=this[n.T_HASH],t.style.overflow="hidden"},r.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);o.Utils.equalNumbers(e,this._explicitWidth)||(this._table.style.width=e>0?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},r.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},r.prototype._getExplicitWidth=function(t){return NaN},r.prototype._doPrepareTableExtents=function(t){},r.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},r.prototype._doPrepareTableHead=function(t,e){var i,n=(0,o.getDoc)(e);0==e.childElementCount?((i=n.createElement("tr")).setAttribute("role","row"),e.appendChild(i),this._getTableHidden()&&i.setAttribute("aria-hidden","true"),(h=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var r=this._getCellCount(t);i.childElementCount<r;){(l=n.createElement("th")).scope="col",(h=l.style).setProperty("margin","0px","important"),h.setProperty("padding","0px","important"),h.setProperty("font-size","0px","important"),h.setProperty("line-height","0px","important"),h.height="0px",i.appendChild(l)}for(;i.childElementCount>r;)i.removeChild(i.lastChild);for(var s=i.children,a=0;a<s.length;a++){var l,h;(h=(l=s[a]).style).width=this._getCellWidth(t,a)+"px"}},r.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),n=(0,o.getDoc)(e),r=e.childElementCount;r<i;){var s=n.createElement("td");s.setAttribute("role","gridcell"),e.appendChild(s);var a=this._prepareCellContent(s,r++);s.appendChild(a)}for(;e.childElementCount>i;){a=e.lastElementChild;this._cleanCellContent(a),e.removeChild(e.lastElementChild)}return e.childElementCount},r.prototype._isFixedHeight=function(t){return!0},r.prototype._getMinRowHeight=function(t){return t.minRowHeight},r.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var r=this._isFixedHeight(t),s=o.children,a=this._isDataTable(),l=r?this._getTableRowHeight(t,i):this._getMinRowHeight(t),h=isNaN(l)||l<2?"0px":l-2+"px",u=o.style;o[n.T_VIEW]=this[n.T_HASH],o[n.T_FIX]=r,o[n.T_HEI]=r?l:0,a||r?u.setProperty("height",l+"px"):u.removeProperty("height"),u.display="";for(var d=this._getStartCell(t)-this._getFirstCell(t),c=s.length;d<c&&d<=this._getEndCell(t);d++){var p=s[d];this._ff&&(p.style.height="100%");var _=p.firstElementChild;_||(_=this._prepareCellContent(p,d),p.appendChild(_));var f=_.style,g=r?h:"";!r&&a&&f.removeProperty("height"),g!=f.maxHeight&&(f.maxHeight=g),"hidden"!==f.overflow&&(f.overflow="hidden")}},r.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},r.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var n=i[o];this._renderCell(n.lastElementChild,e,o)}},r.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},r.prototype._prepareCellContent=function(t,e){return(0,o.getDoc)(t).createElement("div")},r.prototype._cleanCellContent=function(t){},r.prototype._doDrawRow=function(t,e){},r.prototype._doDrawCell=function(t,e,i){},r.prototype._getTableRow=function(t,e){return this._tbody.children[e]},r.prototype._getTableRows=function(t,e,i){for(var o=[],n=0;n<i;n++)o.push(this._tbody.children[e+n]);return o},r.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},r.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},r.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,n=t.column?t.column.index:0;return e=o>0?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,n)},r.prototype._getFirstCell=function(t){return t.firstCell},r.prototype._getStartCell=function(t){return t.startCell},r.prototype._getLastCell=function(t){return t.lastCell},r.prototype._getEndCell=function(t){return t.endCell},r}(e.VisualObjectElement);Nn.TableBaseElement=r;var s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._isDataTable=function(){return!1},i.prototype._doPrepareTableRows=function(t,e){for(var i=Math.max(0,this._getTableRowCount(t)),n=(0,o.getDoc)(e);e.childElementCount<i;){(a=n.createElement("tr")).setAttribute("role","row"),e.appendChild(a)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var r=e.children,s=0;s<i;s++){var a;(a=r[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,a)}},i.prototype._getTableRowCount=function(t){return 1},i}(r);Nn.SimpleTableElement=s;var a=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._trCount=0,t._trs=1,t}return t.__extends(i,e),i.prototype._isDataTable=function(){return!0},i.prototype._getTrs=function(t){return 1},i.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+=e>0?1:0},i.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return i>0&&e>=i?o+1:o},i.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},i.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),n=this._trs=this._getTrs(t),r=t.fixedItemCount,s=t.itemCount+r,a=this._trCount=Math.max(0,this._getTableRowCount(t)),l=(0,o.getDoc)(e);e.childElementCount<a;){var h=l.createElement("tr");h.setAttribute("role","row"),e.appendChild(h)}for(;e.childElementCount>a;)e.removeChild(e.lastChild);var u=e.children,d=0,c=0;if(r>0){for(d=0;d<r;d++)for(var p=0;p<n;p++,c++)this._doPrepareTableRow(t,d,c,u[c]);this.$_prepareFixedBar(t,u[c++])}for(;d<s&&c<a;d++){var _=i[d].isData?n:1;for(p=0;p<_&&c<a;p++,c++)this._doPrepareTableRow(t,d,c,u[c])}},i.prototype.$_prepareFixedBar=function(t,e){var i=(0,o.getWin)(e),n=this._prepareTableRowCells(t,e),r=t.fixedBarHeight,s=e.style;r>0?s.height=t.fixedBarHeight+"px":s.display="none";for(var a=e.children,l=0;l<n;l++){var h=a[l];h instanceof i.HTMLTableCellElement&&(h.rowSpan=1,h.style.display=""),(h=a[l].firstElementChild)&&(h.style.maxHeight="0px",h.style.overflow="hidden")}return r},i.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},i.prototype._getCellContent=function(t){return t.firstElementChild},i.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},i.prototype._doUpdateCellContent=function(t,e,i){},i}(r);return Nn.DataTableElement=a,Nn}var Un,Gn={},Wn={},jn={};function zn(){if(Un)return jn;Un=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.ValueCellElement=jn.CellElement=void 0;var t=d,e=$n(),i=Do(),o=S(),n=function(e){function n(t,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n._fixed=!1,n._index=new i.CellIndex,n}return t.__extends(n,e),n.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=o.Utils.detach(this._cellDom),e.prototype._doDispose.call(this)},_dp(n,"fixed",{get:function(){return this._fixed}}),_dp(n,"index",{get:function(){return this._index},set:function(t){i.CellIndex.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())}}),_dp(n,"item",{get:function(){return this._index.item}}),n.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},n.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},n.prototype._createDom=function(t){return null},n.prototype._clearCellDom=function(t){t.innerHTML=""},n.prototype._clearCellCache=function(){},_dp(n,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(n,"dataColumn",{get:function(){return this._index.dataColumn}}),n.prototype._changed=function(){this.invalidate()},n.prototype._doPrepareValue=function(t,e){},n.prototype._doUpdateContent=function(t,e,i){},n.prototype._doLayoutContent=function(t){},n}(e.GridElement);jn.CellElement=n;var r=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return t.__extends(i,e),i.prototype._doPrepareValue=function(t,e){},i}(n);return jn.ValueCellElement=r,jn}var Yn,qn,Xn,Kn,Jn={};function Zn(){if(Yn)return Jn;Yn=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.SparkWinLossRenderer=Jn.SparkColumnRenderer=Jn.SparkLineRenderer=Jn.SparkChartRenderer=Jn.SeriesTextCellRenderer=void 0;var t=d,e=Wi(),i=S(),o=Vi(),n=function(e){function i(){var t=e.call(this)||this;return t._valueSeparator=",",t}return t.__extends(i,e),_dp(i,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){this._valueSeparator=t}}),_dp(i,"type",{get:function(){return i.SERIES_TYPE}}),i.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},i.SERIES_TYPE="series",i}(e.TextCellRenderer);Jn.SeriesTextCellRenderer=n;var r=function(e){function n(){var t=e.call(this)||this;return t._baseValue=NaN,t.$_render=function(t,e,i,o){var n=this._values;if(n&&n.length){for(var r=n.length,s=n[0],a=n[0],l=1;isNaN(s)&&l<r;)a=s=n[l++];for(;l<r;l++){var h=n[l];isNaN(h)||(h<s&&(s=h),h>a&&(a=h))}var u=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,n,s,a,u)}}.bind(t),t}return t.__extends(n,e),n.interfaced=function(t){return i.Utils.included(t.type,s.TYPE,a.TYPE,l.TYPE)},_dp(n,"baseValue",{get:function(){return this._baseValue},set:function(t){this._baseValue=t}}),_dp(n,"firstStyle",{get:function(){return this._firstStyle},set:function(t){this._firstStyle=t}}),_dp(n,"lastStyle",{get:function(){return this._lastStyle},set:function(t){this._lastStyle=t}}),_dp(n,"highStyle",{get:function(){return this._highStyle},set:function(t){this._highStyle=t}}),_dp(n,"lowStyle",{get:function(){return this._lowStyle},set:function(t){this._lowStyle=t}}),_dp(n,"belowStyle",{get:function(){return this._belowStyle},set:function(t){this._belowStyle=t}}),_dp(n,"pointStyle",{get:function(){return this._pointStyle},set:function(t){this._pointStyle=t}}),n.prototype._doInitContent=function(t){var e=(0,i.getDoc)(t),n=this._div=e.createElement("div");n.style.position="relative",n.style.height="100%",t.appendChild(n);var r=(this._svg=o.SvgElement.createSVG(n)).style;r.position="absolute",r.left=r.top="0px",r.width=r.height="100%"},n.prototype._doRenderCell=function(t,e,i,n,r){var s=this._svg;s.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),o.SvgElement.renderSVG2(t,s,this.$_render)},n.prototype._getPoints=function(t,e,i){for(var o=t.length,n=[],r=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,h=10+(isNaN(a)||0==r?80:80*(1-(a-e)/r));n.push(l,h)}return n},n.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},n}(function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._getValues=function(t){return t.value||[]},i}(e.DataCellRenderer));Jn.SparkChartRenderer=r;var s=function(e){function i(){var t=e.call(this)||this;return t._chartStyle=i.CHART_STYLE,t.lastStyle=i.LAST_STYLE,t.highStyle=i.HIGH_STYLE,t.lowStyle=i.LOW_STYLE,t}return t.__extends(i,e),i.interfaced=function(t){return t.type==i.TYPE},_dp(i,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:Math.min(i,n),l=this._getPoints(e,a,s),h=e.length,u=0;u<h-1;u++)if(t.sline(null,l[2*u]+"%",l[2*u+1]+"%",l[2*(u+1)]+"%",l[2*(u+1)+1]+"%"),r=this.pointStyle){var d=l[2*u],c=l[2*u+1];t.scircle(r,d+"%",c+"%","2")}if(r=this.firstStyle){d=l[0],c=l[1];t.scircle(r,d+"%",c+"%","2")}if(r=this.lastStyle){d=l[2*(h-1)],c=l[2*(h-1)+1];t.scircle(r,d+"%",c+"%","2")}if(r=this.highStyle)for(u=0;u<h;u++)if(e[u]>=o){d=l[2*u],c=l[2*u+1];t.scircle(r,d+"%",c+"%","2")}if(r=this.lowStyle)for(u=0;u<h;u++)if(e[u]<=i){d=l[2*u],c=l[2*u+1];t.scircle(r,d+"%",c+"%","2")}},i.TYPE="sparkline",i.STYLE="rg-sparkline-renderer",i.CHART_STYLE="rg-sparkline-renderer-chart",i.LAST_STYLE="rg-sparkline-renderer-last",i.HIGH_STYLE="rg-sparkline-renderer-high",i.LOW_STYLE="rg-sparkline-renderer-low",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(r);Jn.SparkLineRenderer=s;var a=function(e){function i(){var t=e.call(this)||this;return t._chartStyle=i.CHART_STYLE,t._barWidth=.8,t.lastStyle=i.LAST_STYLE,t.highStyle=i.HIGH_STYLE,t.lowStyle=i.LOW_STYLE,t}return t.__extends(i,e),i.interfaced=function(t){return t.type===i.TYPE},_dp(i,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t}}),_dp(i,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:n,l=e.length,h=this._getBasePoint(a,s,n),u=100/l,d=0+u/2,c=s-a,p=u*this._barWidth,_=0;_<l;_++){var f=e[_];if(!isNaN(f))if(r=f<=i&&this.lowStyle?this.lowStyle:f>=o&&this.highStyle?this.highStyle:f<n&&this.belowStyle?this.belowStyle:0==_&&this.firstStyle?this.firstStyle:_==l-1&&this.lastStyle?this.lastStyle:null,isNaN(this.baseValue)&&a<0)if(s<0){var g=0,m=0===c?100:Math.max(1,Math.floor(Math.abs(f-s)/c*100));t.pbounds(r,d-p/2,g,p,m)}else{g=0===c?100:Math.floor(Math.abs(a)/c*100),m=Math.max(1,Math.floor(Math.abs(f)/c*100));f>0?t.pbounds(r,d-p/2,100-g-m,p,m):t.pbounds(r,d-p/2,100-g,p,m)}else{m=0==c?100:Math.max(1,Math.floor(100*(f-a)/c));t.pbounds(r,d-p/2,h,p,-m)}d+=u}},i.TYPE="sparkcolumn",i.STYLE="rg-sparkcolumn-renderer",i.CHART_STYLE="rg-sparkcolumn-renderer-chart",i.LAST_STYLE="rg-sparkcolumn-renderer-last",i.HIGH_STYLE="rg-sparkcolumn-renderer-high",i.LOW_STYLE="rg-sparkcolumn-renderer-low",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(r);Jn.SparkColumnRenderer=a;var l=function(e){function i(){var t=e.call(this)||this;return t._chartStyle=i.CHART_STYLE,t._barWidth=.8,t._belowHeight=.4,t.belowStyle=i.BELOW_STYLE,t}return t.__extends(i,e),i.interfaced=function(t){return t.type===i.TYPE},_dp(i,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t}}),_dp(i,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))}}),_dp(i,"belowHeight",{get:function(){return this._belowHeight},set:function(t){this._belowHeight=Math.min(1,Math.max(0,t))}}),_dp(i,"type",{get:function(){return i.TYPE}}),_dp(i,"styleName",{get:function(){return i.STYLE_NAME}}),i.prototype._getChartStyle=function(){return this._chartStyle},i.prototype._renderChart=function(t,e,i,o,n){for(var r=e.length,s=100/r,a=0+s/2,l=s*this._barWidth,h=0+100*(1-this._belowHeight),u=0;u<r;u++){var d=e[u];if(!isNaN(d)&&d!=n){var c=null;d<n&&this.belowStyle&&(c=this.belowStyle);var p=d<n?100:0;t.pbounds(c,Math.floor(a-l/2),Math.floor(p),Math.floor(l),Math.floor(h-p))}a+=s}},i.TYPE="sparkwinloss",i.STYLE="rg-sparkwinloss-renderer",i.CHART_STYLE="rg-sparkwinloss-renderer-chart",i.BELOW_STYLE="rg-sparkwinloss-renderer-below",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(r);return Jn.SparkWinLossRenderer=l,Jn}function Qn(){if(qn)return Wn;qn=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.RightRowElement=Wn.FixedRowElement=Wn.RowElement=Wn.ItemElement=Wn.DataCellElement=void 0;var t=d,e=$n(),i=zn(),o=Do(),n=xo(),r=C(),s=tr(),a=Wi(),l=Zn(),h=to(),u=S(),c=To(),p=function(e){function i(t,i){return e.call(this,t,i||"dataCellView")||this}return t.__extends(i,e),_dp(i,"text",{get:function(){return this._text}}),i.prototype._doUpdateContent=function(t,e,i){i[u.Utils.TextProp]=this._text},i}(i.ValueCellElement);Wn.DataCellElement=p;var _=function(e){function i(t,i){void 0===i&&(i=null);var o=e.call(this,t,i)||this;return o._domIndex=-1,o._trs=1,o._fixedHeight=!1,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._item=null,e.prototype._doDispose.call(this)},_dp(i,"itemIndex",{get:function(){return this._item.index}}),i.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},i.prototype.clearContent=function(t,e){},i.prototype._createDom=function(){return null},i.prototype.$_getDefaultRenderer=function(t,e){return a.TextCellRenderer.TYPE},i.prototype._changed=function(){this.invalidate()},i.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},i.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},i.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},i}(e.GridElement);Wn.ItemElement=_;var f="rg-expander-expanded",g="rg-expander-collapsed",m=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return t.__extends(i,e),i.isExpander=function(t){var e=t.className;return"string"==typeof e&&(e==f||e==g||e.indexOf("rg-tree-expanded")>=0||e.indexOf("rg-tree-collapsed")>=0)},i.prototype.resetButtons=function(t,e,i){for(var o=t.layoutManager,r=this._trs,s=this.parent._cells,a=this._getFirstCell(o),l=this._getStartCell(o)-a,h=this._getEndCell(o)-a,u=e&&i&&e.head===i.head&&t.canMergeEditing(i),d=0;d<r;d++)for(var c=s[this._domIndex+d],p=l;p<=h;p++){var _=c[p],f=_.layout,g=f.firstColumn;!f.isProxy&&this._item.isDataRow&&g instanceof n.ValueColumn&&!u&&this.$_setButtons(t,_,_.cell.firstElementChild)}},i.prototype.moveCellButtons=function(t,e,i){var o=Math.min(i-e.item.index,e.rowSpan-1);if(!this.grid.canMergeEditing(e)&&o!=e.buttonsOffset){var n=e.rowIndex,r=n+o,s=t.getTableItemBounds(n),a=t.getTableItemBounds(r),l=t.grid.body.buttonHeight,h=a.y-s.y;h=Math.floor(h+(a.height-l)/2),e.buttons.style.top=h+"px",e.buttonsOffset=o}},i.prototype.cellRefresh=function(t,e,i,o,n){var r=t.layoutManager;this._updateDataCell(t,r,e,i,o,n)},i.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),n=this._getStartCell(t)-o,r=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=n;l<=r;l++){var h=a[l],d=h.renderer2;d&&d.clearContent(),h.setBorderBottom(1),h.changedMarker&&(u.Utils.detach(h.changedMarker),h.valueChanged=!1)}},i.prototype._doLayoutContent=function(t){var e,i=t.grid,r=this._trs,s=i.body,a=this.parent,l=a._cells,u=this._getFirstCell(t),d=this._getStartCell(t)-u,p=this._getEndCell(t)-u,_=i.focusedIndex,f=_&&_.itemIndex==this._item.index,g=_.column,m=this._item.index;this._item instanceof h.MergedGroupFooter&&(p=Math.min(p,this._item.parent.level-1),(m=(e=this._item.parent.firstDataItem).index)>=0&&(e=null));for(var y=o.CellIndex.temp(i,m),v=a._tbody.rows,C=0;C<r;C++)for(var w=l[this._domIndex+C],x=v[this._domIndex+C],b=d;b<=p;b++){var I=w[b],E=I.layout;if(!E.isProxy){var S=E.firstColumn;if(!(E instanceof c.CellLayoutColumnItem&&i.isRecycleMode()&&x.recycle)||I.merged||E.blanked){I.focused=f&&g===S,I.mouseEntered=!1,y.layout=E;var R=e?s.getHidden(y,e):s.getCellAt(this._item,S,!1);I.visible?(I.width=t.getCellWidth(b),I.height=t.getTableRowHeightFixed(I.trow,I.rowSpan),S instanceof n.ValueColumn?this._updateDataCell(i,t,s,R,S,I):this._clearDataCell(I)):S instanceof n.ValueColumn&&this._updateDataCell(i,t,s,R,S,I,!1)}}}},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell(!1)},i.prototype._getEndCell=function(t){return this._item instanceof h.MergedGroupHeader?Math.min(t.getStartCell(!1)+this._item.groupLevel,t.getEndCell(!1)):t.getEndCell(!1)},i.prototype._createRenderer=function(t,e,i,o,n){return t.delegate.createRenderer(i,o,n)},i.prototype.$_getRenderer=function(t,e,i,o,r){var s,a,h,u,d=e.valueColumn.renderer,c=i.renderer;"string"==typeof c?h=c:c&&(h=c.type,u=c),"string"==typeof d?s=d:d&&(s=d.type,a=d);var p=h||s||(o instanceof n.SeriesColumn?l.SeriesTextCellRenderer.SERIES_TYPE:this.$_getDefaultRenderer(t,e));if(!r.renderer2||r.rendererChanged||r.renderer2.type!=p)return this._createRenderer(t,e,p,a,u);r.renderer2&&c&&r.renderer2.assignFrom(c)},i.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype.$_clearAriaProperty=function(t){t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-haspopup")},i.prototype._renderDataCell=function(t,e,i,o,n,r){var a=n.cell,l=t.doc,h=!1,d=this.$_getRenderer(t,i,o,r,n);d&&(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=d,n.rendererChanged=!1,h=!0);var c=a.firstElementChild,p=n.renderer2;(n.heighted=this._fixedHeight)&&(c.style.maxHeight=n.height-2+"px"),!h&&p&&p._dom!=c&&(p.clearContent(),h=!0),t.accessibility&&this.$_clearAriaProperty(a),this.$_setButtons(t,n,c);var _=!1,m=n.merged&&t.findGroupItem(n.item,r.dataIndex);if(m&&r.mergeGrouped&&t.rowGroup.$_isExpanderVisible(m)){var y=n.expander;y||((y=n.expander=l.createElement("span")).style.position="absolute",y.style.display="inline-block",y.style.top="2px",y.style.left="2px",a.appendChild(y)),_=m.expanded,y.className=_?f:g}else n.clearExpander();var v=p.styleName;n.expander&&(v+=" "+(_?"rg-expanded-cell":"rg-collapsed-cell")),h?p.initContent(i._index,c,v):p.checkClassName(v)?(p.clearContent(),p.initContent(i._index,c,v)):p.index.assign(i._index),p.renderCell(t,i,n);var C=e._showChangeMarker&&i.isValueChanged();if(C!=n.valueChanged){if(C){var w=n.changedMarker;w||((w=n.changedMarker=l.createElement("div")).className="rg-changed-marker",w.style.position="absolute",w.style.display="block",w.style.top="0px",n.changedMarker=w),a.appendChild(w)}else n.changedMarker&&n.valueChanged&&u.Utils.detach(n.changedMarker);n.valueChanged=C}s.TableCell.addEdgeMark(o.edgeMark||r.edgeMark,n,l)},i.prototype._clearDataCell=function(t){t.setClassName(""),t.setEditor(null,null),t.button=r.CellButton.NONE,t.error=void 0,t.editable=!1,t.readonly=!0,t.setBorderBottom(1);var e=t.cell.firstElementChild;this._fixedHeight&&(e.style.maxHeight=t.height-2+"px"),t.renderer2&&t.renderer2.clearContent(),t.valueChanged=!1},i.prototype._updateDataCell=function(t,e,i,s,a,l,h){void 0===h&&(h=!0);var d=i.getCellStyle(s,l.style.clear(),l.merged);(null==s.value||""==s.value)&&a instanceof n.DataColumn&&a.placeHolder&&(d.styleName+=" "+(s.dataColumn.placeHolderStyleName||"rg-data-empty-cell"));var c=t.cellGhostStyle;if(u.Utils.setStyle(c,l.cell),d.style){for(var p in d.style)c[p]=void 0;d.style&&u.Utils.setStyle(d.style,l.cell)}l.refreshFormatters(d),i.getCellFormatters(a,l),l.setEditor(d.editor,a.editor),l.button=a.button,l.error=s.error,l.errorLevel=s.errorLevel;var _=o.CellIndex.temp(t,l.item.index,l.dataColumn);if(l.editable=t.getEditableAt(_,l.style),l.readonly=t.getReadOnlyAt(_,l.style),l.editable&&!l.readonly||(d.styleName+=" rg-data-readonly-cell"),l.setClassName(d.styleName),!l.merged&&a instanceof n.DataColumn&&a.layout.blanked&&!a.equalBlankLine)switch(s.getBlankState()){case r.BlankState.HEAD:case r.BlankState.BODY:l.setBorderBottom(0);break;case r.BlankState.TAIL:case r.BlankState.NONE:l.setBorderBottom(1)}else l.setBorderBottom(1);h?this._renderDataCell(t,i,s,d,l,a):l.renderer2&&(l.renderer2=l.renderer2&&l.renderer2.clearAndDispose())},i.prototype.$_getButtonVisible=function(t,e,i,o){if(o){var n=t.getIndex(e.item.index,e.dataColumn);return o(t.handler,n.proxy(),e.focused,e.mouseEntered)}var s=!0,a=e&&e.item,l=t.getIndex(t.focusedRow,e.dataColumn),h=e.merged?e.head.contains(t.focusedIndex):a.index===t.focusedRow&&e.dataColumn===t.focusedColumn,u=a.index===t.focusedRow,d=e.mouseEntered&&e.item.isDataRow,c=t.focusedItem&&t.focusedItem.isDataRow;switch(i){case r.ButtonVisibility.ALWAYS:s=!e.mouseEntered&&!e.focused||e.item.isDataRow;break;case r.ButtonVisibility.HIDDEN:s=!1;break;case r.ButtonVisibility.VISIBLE:s=h&&c;break;case r.ButtonVisibility.ROWFOCUSED:s=u?c:d;break;case r.ButtonVisibility.DEFAULT:default:s=h?c:d}return!u&&e.merged&&i===r.ButtonVisibility.ROWFOCUSED?e.head.contains(t.focusedIndex)?c:e.head.contains(l)?e.mouseEntered?e.item.isDataRow:c:e.mouseEntered&&e.item.isDataRow:s},i.prototype.$_buttonWidth=function(t,e){var i=0;if(e.button!=r.CellButton.NONE){var o=e.layout.getDataColumn();this.$_getButtonVisible(t,e,o.buttonVisibility,o.buttonVisibleCallback)&&(i=t.body.cellButtonWidth)}return i},i.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.editable&&!e.readonly){var n=e.layout,r=n.getDataColumn(),s=e.editorType,a=t.delegate.getCellEditor(s),l=e.editor||r.editor;if(a.hasButton(t.displayOptions.showNativeEditButton,l)){var h=!1;o.CellIndex.equalsTo(t.focusedIndex,e.item.index,n)&&(h=!!a&&a.listing),t.isEditing()&&e.contains(t.focusedIndex)&&t.canMergeEditing(e)&&e.editWidth>0&&(h=!0),(h||this.$_getButtonVisible(t,e,r.editButtonVisibility,null))&&(i=t.body.editButtonWidth)}}return i},i.prototype.$_editButtonCount=function(t,e){var i=e.editorType,o=t.delegate.getCellEditor(i);return o?o.buttonCount:0},i.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType){var i=e.editor||e.dataColumn.editor||{};return null==i.direction||"horizontal"!==i.direction}},i.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},i.prototype.$_setButtons=function(t,e,i,n){var s,a,l=e.cell,h=t.doc,u=t.layoutManager,d=e.dataColumn,c=this.$_buttonWidth(t,e),p=this.$_editButtonWidth(t,e),_=this.$_errorWidth(t,e),f=p&&this.$_editButtonCount(t,e),g=p&&this.$_editButtonVerti(t,e),m=t.canMergeEditing(e),y=d&&(d.buttonVisibility===r.ButtonVisibility.ROWFOCUSED||d.editButtonVisibility===r.ButtonVisibility.ROWFOCUSED),v=0,C=0,w=void 0;if(c>0&&C++,p>0&&(C+=f),_>0&&C++,e.merged&&(l=(e=e.head).cell,i=e.cell.firstElementChild),C>0){(w=e.buttons)||((w=e.buttons=h.createElement("div")).className="rg-cell-buttons",w.style.position="absolute",w.style.overflow="hidden",l.appendChild(w));var x=t.body.buttonHeight,b=e.height,I=-100;if((s=w.style).height=x+"px",s.right="0px",e.merged){var E=e.rowIndex,S=u.getTableItemBounds(E),R=E,T=t.getIndex(t.focusedRow,e.dataColumn);if(!m&&(e.contains(t.focusedIndex)||y&&e.contains(T)||n))if(t.focusedRow<t.topIndex)I=-100,e.buttonsOffset=-1;else if(t.focusedRow>t.topIndex+u.itemCount)I=1e4,e.buttonsOffset=-1;else{R=E+(t.focusedRow-e.item.index);var D=u.getTableItemBounds(R);I=D.y-S.y,I=Math.floor(I+(D.height-x)/2),e.buttonsOffset=R-E}else I=e.cell.getBoundingClientRect().height,I=Math.floor((I-x)/2),e.buttonsOffset=m?0:-1}else I=Math.floor((b-x)/2),e.buttonsOffset=0;s.top=Math.floor(I)+"px",v=w.childElementCount}else e.buttons&&(e.clearButtons(),i.style.maxWidth="");for(var k=v;k<C;k++){var M=h.createElement("span");(a=M.style).position="absolute",a.display="inline-block",a.height="100%",a.top="0px",w.appendChild(M)}for(k=v;k>C;k--)w.removeChild(w.lastElementChild);var L=C>0?w.children:null;if(C=0,c>0){if(e.cellButton=L[C++],(a=e.cellButton.style).right="0px",a.width=c+"px",e.resetButtonClass(),t.accessibility){l.removeAttribute("aria-haspopup");var O=e.renderer2;O&&e.button==r.CellButton.POPUP&&!O.itemClickable&&l.setAttribute("aria-haspopup","true")}e.buttonWidth=c}else e.cellButton=null,e.buttonWidth=0;if(p>0){e.editButtons=[];var F=e.editorType,P=t.delegate.getCellEditor(F);for(k=0;k<f;k++){var B=L[C++];P.setButtonStyle(B,k,g,c,p)||((a=B.style).right=c+p*k+"px",a.width=p+"px",e.resetEditClass(B,k)),e.editButtons.push(B)}e.editWidth=p*(g?1:f);var V=o.CellIndex.equalsTo(t.editController.editIndex,e.item.index,e.layout),N=t.canMergeEditing(e)&&e.contains(t.editController.editIndex);this.$_setButtonZIndex(t,e,t.isEditing()&&(V||N),P)}else e.editButtons=null,e.editWidth=0;if(_>0?(e.errorIcon=L[C],(a=e.errorIcon.style).right=c+e.editWidth+"px",a.width=_+"px",e.resetErrorClass(),e.errorWidth=_):(e.errorIcon=null,e.errorWidth=0),w){var A=e.buttonWidth+e.editWidth+e.errorWidth,$=this.$_getCellWidth2(u,e.tcol,e.colSpan);s.width=A+"px",i.style.maxWidth=$-A+"px"}else i.style.maxWidth=""},i.prototype.$_setButtonZIndex=function(t,e,i,o){var n=e.merged?e.head:e,r=t.displayOptions.baseZindex;function s(t){!i||o&&o.native?t.removeProperty("z-index"):t.zIndex=String(r+1)}n.editButtons&&n.editButtons.forEach((function(t){s(t.style)})),n.cellButton&&s(n.cellButton.style),n.errorIcon&&s(n.errorIcon.style)},i}(_);Wn.RowElement=m;var y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},i}(m);Wn.FixedRowElement=y;var v=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},i}(m);return Wn.RightRowElement=v,Wn}function tr(){if(Xn)return Gn;Xn=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.RightBodyElement=Gn.FixedBodyElement=Gn.GridBodyElement=Gn.BodyTableCell=Gn.TableCell=void 0;var t=d,e=Pn(),i=pt(),o=rt(),n=lt(),r=S(),s=Hn(),a=di(),l=Qn(),h=xo(),u=to(),c=C(),p=mo(),_=Tn(),f=fn(),g="rowspan",m="colspan",y=function(){function t(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}return t.addEdgeMark=function(t,e,i){if(t!==e.edgeMark){var o=e.cell;if(t){var n=e.edgeMarker;switch(n||(n=e.edgeMarker=i.createElement("div")),t){case"leftTop":n.className="rg-edgemarker-lefttop";break;case"leftBottom":n.className="rg-edgemarker-leftbottom";break;case"rightTop":n.className="rg-edgemarker-righttop";break;case"rightBottom":n.className="rg-edgemarker-rightbottom";break;default:n.className=t}o.appendChild(n)}else e.edgeMarker&&o.removeChild(e.edgeMarker);e.edgeMark=t}},t.prototype.dispose=function(){this.cell=null},t.prototype.setColSpan=function(t){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute(m)),this},t.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(this.rowSpan=t,t>1?this.cell.rowSpan=t:this.cell.removeAttribute(g)),this},t.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.set=function(t,e,i){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute(m)),this.rowSpan!=e&&(this.rowSpan=e,e>1?this.cell.rowSpan=e:this.cell.removeAttribute(g)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},t.prototype.clear=function(t){return this.colSpan>1&&(this.colSpan=1,this.cell.removeAttribute(m)),this.rowSpan>1&&(this.rowSpan=1,this.cell.removeAttribute(g)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.isClickableElt=function(t){return!1},t}();Gn.TableCell=y;var v=function(e){function s(t){var i=e.call(this,t)||this;return i.cellButton=null,i.editButtons=null,i.errorIcon=null,i.buttons=null,i.changedMarker=null,i.expander=null,i.item=null,i.grouped=!1,i.rowIndex=-1,i.rows=0,i.trow=-1,i.tcol=-1,i.head=null,i.merged=!1,i.spanHead=null,i.heighted=!1,i.buttonsOffset=0,i.template=void 0,i.marginRight=-1,i.style=new h.ColumnStyle,i.rendererChanged=!1,i.valueChanged=!1,i.mouseEntered=!1,i.focused=!1,i.borderBottom=1,i.readonly=void 0,i.editable=void 0,i.error=void 0,i.errorLevel=c.ValidationLevel.IGNORE,i.errorWidth=0,i.button=c.CellButton.NONE,i.buttonWidth=0,i.editWidth=0,i.edgeMarker=null,i.text=t[r.Utils.TextProp],i}return t.__extends(s,e),s.prototype.dispose=function(){e.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach((function(t){r.Utils.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},_dp(s,"dataColumn",{get:function(){return this.layout.getDataColumn()}}),s.prototype.reset=function(t){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach((function(t){r.Utils.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=t,this},s.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},s.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=p.TextFormatter.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=i.DecimalFormatter.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=o.DateTimeWriter.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=n.BooleanFormatter.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},s.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},s.prototype.setEditor=function(t,e){this.editor=t,this.editorType=f.CellEditor.getEditorType2(t,e)},s.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},s.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},s.prototype.isCellButton=function(t){return t===this.cellButton},s.prototype.isEditButton=function(t){return this.editButtons&&this.editButtons.some((function(e){return e===t}))},s.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},s.prototype.resetButtonClass=function(){var t=this.button==c.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=t},s.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},s.prototype.resetErrorClass=function(){var t;switch(this.errorLevel){case c.ValidationLevel.ERROR:t="rg-validation-error";break;case c.ValidationLevel.WARNING:t="rg-validation-warning";break;case c.ValidationLevel.INFO:t="rg-validation-info";break;default:t=""}this.errorIcon.className=t},s.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},s.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},s.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},s.prototype.contains=function(t){if(t.layout===this.layout){var e=t.itemIndex,i=this.item.index,o=i+this.rowSpan/this.layout._dspan;return i<=e&&e<o}return!1},s.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},s}(y);Gn.BodyTableCell=v;var w=function(i){function o(t,e){var o=i.call(this,t,e,"bodyView")||this;return o._itemViews=[],o._cells=[],o._spanned=!1,o._ghostStyle={},o}return t.__extends(o,i),o.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],o=0;o<e.length;o++)e[o].dispose(),e[o]=null;this._cells=this._ghostStyle=null,i.prototype._doDispose.call(this)},_dp(o,"fixed",{get:function(){return!1}}),_dp(o,"rightFixed",{get:function(){return!1}}),_dp(o,"firstCell",{get:function(){return this._cells[0][0]}}),_dp(o,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]}}),_dp(o,"spanned",{get:function(){return this._spanned}}),o.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[c.T_ROW],i=0;i<this._cells.length;i++){var o=this._cells[i],n=o[0].item;if(n&&n.index==e)for(var r=0;r<o.length;r++){var s=o[r];if(s&&s.cell===t)return s}}},o.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],o=i[0].item;if(o&&o.index==t.itemIndex)for(var n=0;n<i.length;n++){var r=i[n];if(r&&r.layout===t.layout)return r}}},o.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},o.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},o.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=e;o<this._cells.length;o++)for(var n=this._cells[o],r=i;r<n.length;r++){var s=n[r];if(s&&s.layout===t)return s}},o.prototype.getCellRectAt=function(t,e,i){var o=this.getCellAt(t,e);return o&&this.getCellRect(t,o,i)},o.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var o=e.layout,n=e.trow,r=e.rowSpan,s=i||r>1&&r==o.getDataSpan()?r:e.item.isData?o._dspan:1,a=t.getTableRowBounds(n,s),l=e.tcol,h=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,h)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,h)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,h)),a},o.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},o.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},o.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},o.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},o.prototype.getCheckedLayout=function(t){return t.spanned&&(t=this.getUpperOf(t)),t},o.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i+1;n<e.length;n++){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},o.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o+1;r<e.length;r++){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.spanHead.trow===s.trow)return!1}return!0},o.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i-1;n>=0;n--){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},o.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o-1;r>=0;r--){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},o.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},o.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},o.prototype.tdClone=function(t){var e=this.grid,i=t&&e.isValid(t)&&this.getCellAt(e.layoutManager,t);if(i){var o=(i=i.merged?i.head:i).cell,n=o.parentElement;if(n){var s=o.cloneNode(!1);s.appendChild(o.firstElementChild.cloneNode(!1)),s.style.display="none",i.rendererChanged=!0,n.insertBefore(s,o.nextElementSibling),i.reset(s),s.setAttribute("tabindex","0");var a=[];if(n=this._table,r.Utils.isIE)for(;n&&n!==e.container._containerDom;)a.push({top:n.scrollTop,left:n.scrollLeft}),n=n.parentElement;if(s.style.display="",s.focus({preventScroll:!0}),r.Utils.detach(o),n=this._table,r.Utils.isIE)for(;n&&n!==e.container._containerDom;){var l=a.shift();l&&l.top!==n.scrollTop&&(n.scrollTop=l.top),l&&l.left!==n.scrollLeft&&(n.scrollLeft=l.left),n=n.parentElement}}else o.focus()}},o.prototype.refreshTdFocused=function(t,e){var i=this.grid,o=t&&i.isValid(t)&&this.getCellAt(i.layoutManager,t);if(o){o=o.merged?o.head:o;var n=this._tbody,r=Array.prototype.slice.call(n.querySelectorAll("td"));e?s.call(this,o):setTimeout(function(){s.call(this,o)}.bind(this),15)}function s(t){var e=t.cell;e&&(r.forEach((function(t){t!==e&&t.removeAttribute("tabindex")})),e.setAttribute("tabindex","0"),e.focus({preventScroll:!0}))}},o.prototype.cleanRecycle=function(){for(var t=this._tbody,e=0;e<t.rows.length;e++)t.rows[e].recycle=!1},o.prototype.reArrangeRows=function(e,i){for(var o=this.grid,n=this._tbody,r=this._cells,s=o.itemSource,a=0,l=e.topIndex+e.fixedItemCount,h=0;h<n.rows.length;h++)n.rows[h].recycle=!0;var u=0===e.fixedTableRowCount?0:e.fixedTableRowCount+1;if(i<0){for(;i++<0;){a+=s.getItem(l+i+e.itemCount-1).isData?this._trs:1}for(;a-- >0;)n.rows[n.rows.length-1].recycle=!1,n.insertBefore(n.rows[n.rows.length-1],n.rows[u]),r.splice.apply(r,t.__spreadArray([u,0],r.splice(-1),!1))}else{for(;i-- >0;){a+=s.getItem(l+i).isData?this._trs:1}for(;a-- >0;){var d=n.removeChild(n.rows[u]);d.recycle=!1,n.appendChild(d),r.push.apply(r,r.splice(u,1))}}},o.prototype._doAttached=function(t){var e=this._table;e&&e.setAttribute("role",this.grid.isTree()?"treegrid":"grid")},o.prototype._getCssSelector=function(){return"rg-body"},o.prototype._getTableHidden=function(){return!1},o.prototype._getTableCaption=function(){var t=this.grid;return t&&t.accessibility&&t.WaiOptions&&t.WaiOptions.getDescription()||""},o.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},o.prototype._getTrs=function(t){return t.trs},o.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,o=this.grid,n=this._trs;if(t.syncHeight()){for(var r=0,s=0,a=this.grid.itemCount;s<a;s++)r+=o.getItem(s).isData?n:1;return r+(e?1:0)}if(t.isAutoRowHeights())return(a=Math.max(0,Math.ceil(t._itemsBounds/t.grid.displayOptions.minTableRowHeight)+this._trs-1))+(t.grid.displayOptions.refCalcHeights?5:0);if(t.isRowGrouped()){for(var l=e+t.itemCount,h=(r=0,0);h<l;h++)r+=t.getItem(h).isData?n:1;return r+=e?1:0}return i.prototype._getTableRowCount.call(this,t)},o.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(e>=i&&t.isRowGrouped()){var o=this._trs,n=i*o;i>0&&n++;for(var r=i;r<e;r++)t.getItem(r).isData?n+=o:n++;return n}n=e*this._trs;return i>0&&e>=i?n+1:n},o.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},o.prototype._doPrepareTableHead=function(t,e){if(this.grid._columnsDirty||t.syncHeight()){i.prototype._doPrepareTableHead.call(this,t,e),this._table.caption.innerHTML=this._getTableCaption();for(var o=this._getFirstCell(t),n=this._getLastCell(t)-o+1,s=t.cellLayouts._dataCells,a=0;a<1;a++)for(var l=s[a],h=e.children[a],u=0;u<n;u++){var d=l[u+o];d=d.isProxy?d.source:d;var c=h.children[u];d&&c&&(c[r.Utils.TextProp]=d.header.getDisplayText()||d.firstColumn.header.displayText)}}},o.prototype._doMeasure=function(t,i,o){return this._spanned=!1,new e.Size},o.prototype.$_refreshRowCells=function(t,e,i,o,n,s,a){for(var l=this._cells,h=a.children,u=this._getFirstCell(t),d=this._getLastCell(t)-u+1,c=l.length,p=o+s;c<p;c++)l.push([]);for(var _=0;_<s;_++){var f=l[o],g=h[o];this.grid.accessibility&&(e?(g.removeAttribute("aria-hidden"),g.setAttribute("aria-rowindex",(e.index+2).toString())):(g.setAttribute("aria-hidden","true"),g.removeAttribute("aria-rowindex"))),this._ghostStyle&&r.Utils.setStyle(this._ghostStyle,g);for(var m=g.children,y=n[_],C=0;C<d;C++){var w=m[C],x=y[C+u],b=f[C];b?b.cell!==w?b.reset(w):b.layout!==x&&(b.rendererChanged=!0,b.layout=x,b.clear(!0)):(b=f[C]=new v(w)).layout=x,b.spanned=!1,b.item=e,b.rowIndex=i,b.trow=o,b.tcol=C}o++;for(C=d;C<f.length;C++)r.Utils.isDebugging()&&f[C],f[C].dispose();f.length=d}},o.prototype.layoutRow=function(t,e,i,o,n){function s(t,e){var i=this._ghostStyle=this._ghostStyle||{};for(var o in t)i[o]=void 0;r.Utils.setStyle(t,e)}var a,l=t.lm,h=t.fixedItemCount,d=this.model,p=l.cellLayouts._dataCells,_=this._tbody.rows,f=n.isData?this._trs:1;this.$_refreshRowCells(l,n,i,o,p,f,this._tbody),this.childCount<=i?(a=this.$_borrowView(n),this.addChild(a)):a=this.getChild(i),this.$_setRowCellsDisplay(l,t,e,this._cells,n,i,o,f);var g=n.index,m=_[o];if(m.style.display="",m[c.T_ROW]=g,m[c.T_IDX]=o,a.updateItem(n,o,f,this._isFixedHeight(l)),n.isDataRow||n instanceof u.MergedGroupHeader){var y=l.getItemBounds(i);y.width=this.width,a.setRect(y);var v=d.getRowStyle(n,g<h),C=v.styleName;if(n.isDataRow){n.setEditable(v.editable,v.readOnly);for(var w=1;w<this._trs;w++){(x=_[o+w])[c.T_IDX]=o+w,x[c.T_ROW]=g,r.Utils.setClassName(x,C),v.style&&s.call(this,v.style,x)}}a.layoutContent(l),r.Utils.setClassName(m,C),v.style&&s.call(this,v.style,m)}else if(n.isData){for(w=1;w<this._trs;w++){var x;(x=_[o+w])[c.T_IDX]=o+w,x[c.T_ROW]=g}this.grid.isRecycleMode()&&_[o].recycle||a.clearContent(l,this._trs),n instanceof u.MergedGroupFooter&&a.layoutContent(l)}else a.clearContent(l,1)},o.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,n=o.rows[e],s=this.$_prepareFixedBar(t,n),a=t.grid.hoveredCell;a&&a.trow==e&&a.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),n[c.T_IDX]=e,n[c.T_ROW]=-99,n.style.display="",r.Utils.setClassName(n,_.FixedOptions.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var l=0,h=this._cells[e];l<h.length;l++){var u=h[l];u.className="",u.clearExpander(),u.clearButtons()}return s},o.prototype._doRender=function(t){},o.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},o.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},o.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},o.prototype._doDrawCell=function(t,e,i){},o.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,n=t.topIndex,r=e.itemIndex;if((o>0&&r<o||r>=n&&r-n>=o&&r-n<o+t.itemCount)&&(r>=o&&(r-=n),(r=this.$_getTableIndex(t,r))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[r+s];if(a)for(var l=0;l<a.length;l++){var h=a[l];if(h&&h.layout===i)return h}}return null},o.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},o.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},o.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},o.prototype._getStartCell=function(t){return t.getStartCell(!1)},o.prototype._getEndCell=function(t){return t.getEndCell(!1)},o.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},o.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e||(e=this.createRowElement()),e},o.prototype.createRowElement=function(){return new l.RowElement(this.doc)},o.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),n=this._getFirstCell(t)-o,s=this._getLastCell(t)-o,a=e[i],l=_.FixedOptions.ROW_BAR_CELL_STYLE,h=n;h<=s;h++){var u=a[h];u.clear(!0),r.Utils.setClassName(u.cell,l)}},o.prototype.$_setRowCellsDisplay=function(t,e,i,o,n,r,s,l){var h=this._getFirstCell(t),d=this._getFirstCell(t)-h,c=this._getLastCell(t)-h,p=e.grid,_=e.fixedItemCount,f=i,g=n.isData,m=n.level;if(g||e.mergedRowGrouped)for(var y=0;y<l;y++)for(var v=(Y=o[s+y]).length,C=d;C<=c;C++){var w=(q=Y[C]).layout,x=w.getDataColumn(),b=w.parent,I=b&&b.vertical;if(q.merged=!1,q.head=null,q.grouped=!1,q.spanned);else if(w.isProxy){for(var E=void 0,S=s;S<s+l;S++){var R=o[S];if(!R)break;for(var T=0;T<R.length;T++)if(R[T].layout===w.source){E=R[T];break}if(E)break}E?q.span(E):q.clear(!1)}else if(!g&&C+h>=m)q.grouped=!0,q.clear(!0);else{var D=!0,k=void 0,M=1;x&&x.mergeGrouped&&x.groupLevel<=n.parent.level||(n.isDataRow?(void 0===(M=(k=w.spanCallback)?k(p.handler,w,q.item.index):void 0)&&(M=w.dataSpan),void 0===M&&(D=!1,M=w.cellSpan)):a.GroupFooter);var L=0;if(M>1){var O=0,F=w.vindex+1;if(I)for(M--;O++<M&&O<l;){if(!(U=b.getVisible(F++)))break;L+=U._dspan,this._cells[s+y+O][C].span(q),this._spanned=!0}else{for(var P=w._dspan,B=[],V=0;V<P;V++)B.push(0);for(var N=0;N<P;N++){B[N]+=w._defColSpan;for(var A=1;A<M&&C-d+A<v;A++){var $=this._cells[s+y+N][C+A].layout;$&&!$.isProxy&&(B[N]+=$._defColSpan)}}var H=Math.max.apply(Math,B);for(D=D&&H===M;O++<M-1&&C-d+O<v&&(D||F<b.visibleCount);){var U;if(!(U=D?Y[C+O].layout:b.getVisible(F++)))break;!U.isProxy&&(L+=U._defColSpan)}for(w._defColSpan+L!==M&&(L=0),O=1;O<w._defColSpan+L;O++){if(P>1&&D)for(A=1;A<l&&P>A;A++)this._cells[s+y+A][C+O].span(q);Y[C+O].span(q)}}}var G=w._defColSpan,W=w._dspan,j=w.merged&&w.merges;if(j&&n instanceof u.MergedGroupFooter&&C>=n.parent.level&&(j=null),j)if(q.merged=j.isMerged(r,_),j.isHidden(r,_))q.set(G+L,W,!1),q.head=f[C-d];else{var z=void 0;z=n.isData?(q.rows=j.getMerged(r,_))*W:j.getMerged2(p,n.index,r-_,W),q.set(G+L,z,!0),f[C-d]=q.head=q}else I?q.set(G,W+L,!0):q.set(G+L,W,!0)}}else{var Y=o[s];for(C=d;C<=c;C++){var q;(q=Y[C]).clear(!1),q.merged=!1,q.grouped=!0}}},o.prototype.$_refreshSpans=function(t,e,i){},o.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},o.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].dispose(),o[n]=null;e.length=t},o.prototype.$_cleanTableRows=function(t){var e=this._tbody.rows;if(this.grid.isRecycleMode())for(var i=e.length-1;i>=t;i--){var o=e[i];r.Utils.detach(o)}else{for(i=e.length-1;i>=this._cells.length;i--)for(var n=e[i].cells,s=n.length;s--;){for(var a=n[s];a.childElementCount>1;)a.removeChild(a.lastElementChild);a.removeAttribute(g),a.removeAttribute(m)}for(i=e.length-1;i>=t;i--){(o=e[i]).childElementCount>0?(o[c.T_IDX]=-1,o.style.display="none"):r.Utils.detach(o)}}},o.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var n=1;n<t.length;n++)i[o++].style.height=t[n]-t[n-1]+"px";o++}for(n=1;n<e.length;n++)i[o++].style.height=e[n]-e[n-1]+"px"},o.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var n=1;n<t.length;n++)for(var r=t[n]-t[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px";o++}for(n=1;n<e.length;n++)for(r=e[n]-e[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px"},o.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,n=this._cells.length;o<n;o++)for(var s=this._cells[o],a=0,l=s.length;a<l;a++){var h=s[a],u=h.height,d=t.getTableRowHeightFixed(h.trow,h.rowSpan);if(u!=d&&(h.height=d,(h.buttonWidth>0||h.editWidth>0)&&h.buttons&&(h.buttons.style.top=Math.floor((d-i)/2)+"px")),e&&!h.heighted){var c=Math.max(0,h.height-2);h.cell.firstElementChild.style.maxHeight=c+"px",r.Utils.ieTen&&(h.cell.firstElementChild.style.height=c+"px")}}},o.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},o.prototype.$_mouseEnteredChanged=function(t,e,i){this.$_cellStateChanged(t,e,"mouseEntered",i)},o.prototype.$_cellStateChanged=function(t,e,i,o){var n=t.canMergeEditing(e);if(e&&e.item,e&&o!=e[i]){var r=this.getRowView(e.item);if(r instanceof l.ItemElement){var s=this.model,a=e.dataColumn;if(e[i]=o,a&&"data"===t.getCellType(e.cell)){var h=s.getCellAt(e.item,a,!1);if(r.$_setButtons(t,e,e.cell.firstElementChild),e.merged&&e.head){var u=e.head,d=t.layoutManager,c=this.getCellRect(d,e,!1),p=this.getCellRect(d,e,!0),_=u.renderer2;if(e.focused){var f=c.top-p.top+c.height/2-p.height/2;_.moveClickElement(f,n)}else e.mouseEntered||u.contains(t.focusedIndex)||_.moveClickElement(0,n)}r instanceof l.RowElement&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&r.cellRefresh(t,s,h,a,e)}}}},o.prototype.$_buttonZIndexChanged=function(t,e,i,o){var n=e&&e.item;if(n&&n.isDataRow){var r=this.getRowView(n);if(r instanceof l.ItemElement)e.dataColumn&&r.$_setButtonZIndex(t,e,i,o)}},o.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].layout===t&&(o[n].rendererChanged=!0)},o}(s.DataTableElement);Gn.GridBodyElement=w;var x=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),_dp(i,"fixed",{get:function(){return!0}}),i.prototype._getCssSelector=function(){return"rg-fixed-body"},i.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype._getCellCount=function(t){return t.fixedCellCount},i.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},i.prototype.createRowElement=function(){return new l.FixedRowElement(this.doc)},i}(w);Gn.FixedBodyElement=x;var b=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),_dp(i,"rightFixed",{get:function(){return!0}}),i.prototype._getCssSelector=function(){return"rg-fixed-body"},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype.createRowElement=function(){return new l.RightRowElement(this.doc)},i.prototype._getCellCount=function(t){return t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},i}(w);return Gn.RightBodyElement=b,Gn}function er(){if(Kn)return On;Kn=1,Object.defineProperty(On,"__esModule",{value:!0}),On.RightHeaderElement=On.FixedHeaderElement=On.HeaderElement=On.HeaderTableCell=void 0;var t=d,e=Pn(),i=Hn(),o=To(),n=S(),r=C(),s=tr(),a=function(e){function i(t){var i=e.call(this,t)||this;return i.check=null,i.sort=null,i.filter=null,i.popup=null,i.textSpan=null,i.expander=null,i.rendererClass="",i.html=void 0,i.tooltip="",i.sortWidth=0,i.filterWidth=0,i.checkWidth=0,i.popupWidth=0,i.expanderWidth=0,i.marginLeft=0,i.marginRight=0,i.marginTop=0,i.marginBottom=0,i.edgeMarker=null,i.textSpan=t.firstElementChild.firstElementChild,i}return t.__extends(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){e.prototype.clear.call(this,t);var i=this.cell.firstElementChild,o=this.textSpan,r=i.style;return this.checkWidth>0&&(i.removeChild(this.check),this.check=null,this.checkWidth=0),this.filterWidth>0&&(i.removeChild(this.filter),this.filter=null,this.filterWidth=0),this.sortWidth>0&&(i.removeChild(this.sort),this.sort=null,this.sortWidth=0),this.popupWidth>0&&(i.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.expander&&(i.removeChild(this.expander),this.expander=null),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),0!=this.marginLeft&&(r.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(r.marginRight="",this.marginRight=0),0!=this.marginTop&&(r.marginTop="",this.marginTop=0),0!=this.marginBottom&&(r.marginBottom="",this.marginBottom=0),this.text&&(o[n.Utils.TextProp]=this.text=""),this.html&&(o.innerHTML=this.html=""),this},i.prototype.setText=function(t,e){e!=this.text&&(t[n.Utils.TextProp]=this.text=e,this.html="")},i.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e,this.text="")},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},i.prototype.setDivMarigns=function(t,e,i,o,n){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),n!=this.marginBottom&&(t.marginBottom=n?n+"px":"",this.marginBottom=n)},i.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},i.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check||t===this.expander},i}(s.TableCell);On.HeaderTableCell=a;var l=function(i){function l(t,e){var o=i.call(this,t,e,"headerView")||this;return o._fixedHeight=!0,o._rowPoints=[],o._cells=[],o._pointerEnterHandler=o.$_pointerEnter.bind(o),o._pointerLeaveHandler=o.$_pointerLeave.bind(o),o}return t.__extends(l,i),l.renderCell=function(t,e){e[n.Utils.TextProp]=t.text||""},l.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],o=0;o<e.length;o++)e[o].cell.removeEventListener("pointerenter",this._pointerEnterHandler),e[o].cell.removeEventListener("pointerleave",this._pointerLeaveHandler),e[o].dispose(),e[o]=null;this._cells=null,i.prototype._doDispose.call(this)},l.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},l.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},l.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var n=i[0].length,r=this._getFirstCell(t),s=this._getStartCell(t)-r,a=this._getEndCell(t)-r,l=s;l<=a;l++)for(var h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=s-1;l>=0;l--)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=a+1;l<n;l++)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l]}},l.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},l.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},l.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n.layout===t){if(n.spanned)if(n.layout.parent.vertical){for(var r=e-1;r>=0;r--)if(!this._cells[r][o].spanned)return this._cells[r][o].layout}else for(r=o-1;r>=0;r--)if(!i[r].spanned)return i[r].layout;return t}}},l.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,n=this._getFirstCell(i),s=this._getLastCell(i)-n+1,a=0;a<this._cells.length;a++)for(var l=this._cells[a],h=0;h<s;h++){var u=l[h],d=u.layout;if(u.visible&&d instanceof o.CellLayoutColumnItem){var c=u.cell;c[r.T_FOC]=d.isColumn(e),u.setClassName(this.$_getCellSelector(d,c))}}},l.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},l.prototype.getLayoutHeight=function(t,e,i){var n,r;return t instanceof o.CellLayoutGroupItem?(n=t.hrow,r=i?t.hlen:t.hspan):(n=t.hrow,r=i?e.rowSpan:t.hspan),this._rowPoints[n+r]-this._rowPoints[n]},l.prototype.getMeasureHeights=function(){var t=new Array(this._cells.length);return t.forEach((function(t,e,i){i[e]=0})),this._cells.forEach((function(e,i){e.forEach((function(e){if(e.visible){var o=e.textSpan.getBoundingClientRect();t[i]=Math.max(t[i],o.height+5)}}))})),t},l.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},l.prototype._getCssSelector=function(){return"rg-header"},l.prototype._isFixedHeight=function(){return this._fixedHeight},l.prototype._getMinRowHeight=function(t){return this._minRowHeight},l.prototype._prepareCellContent=function(t,e){var i=(0,n.getDoc)(t),o=i.createElement("div"),r=i.createElement("span");return t.addEventListener("pointerenter",this._pointerEnterHandler,!1),t.addEventListener("pointerleave",this._pointerLeaveHandler,!1),o.appendChild(r),o},l.prototype._cleanCellContent=function(t){t.removeEventListener("pointerenter",this._pointerEnterHandler,!1),t.removeEventListener("pointerleave",this._pointerLeaveHandler,!1)},l.prototype._doMeasure=function(t,i,o){var n=this.model,r=t.layoutManager.headerRows,s=n.height,a=n.heights,l=[];if(this._minRowHeight=n.minRowHeight,a&&a.length>0){for(var h=0,u=0;u<r;u++)h+=l[u]=Math.max(a[u]||this._minRowHeight,this._minRowHeight);s=h}return s=s<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*r:Math.max(this._minRowHeight*r,s),this._fixedHeight=s>=0,s=Math.max(this._minRowHeight*r,n.minHeight,s),n.setCalcHeights(l),e.Size.create(i,s)},l.prototype._doPrepareTableExtents=function(t){var e=this.model,i=this._rowPoints,o=this.height,n=e.getCalcHeights(),r=Math.floor(o/t.headerRows);if(i.length=this._getTableRowCount(t)+1,i[0]=0,i.length>0){for(var s=1;s<i.length-1;s++)i[s]=i[s-1]+(n[s-1]||r);i[s]=o}},l.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var s=i[r].layout.source,a=o.children[r];a&&s&&(a[n.Utils.TextProp]=s.header.getDisplayText()||s.firstColumn.header.displayText)}},l.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,n=this.model,s=t.cellLayouts._headerCells,a=s.length,l=this._getFirstCell(t),h=this._getStartCell(t)-l,u=this._getEndCell(t)-l;this.$_refreshCells(t,s,this._tbody),this.$_refreshSpans(t,a),this.$_refreshHeadTitle(t,this._thead);for(var d=0;d<a;d++)for(var c=this._cells[d],p=h;p<=u;p++){var _=c[p];if(_.visible||p===h){var f=void 0;_.layout.isProxy?(f=_.layout.source,_=this.tableCellByLayout(f)):f=_.layout;var g=_.cell;if(g[r.T_FOC]=f.isColumn(i),_.setClassName(this.$_getCellSelector(f,g)),f.isNull)_.setText(_.textSpan,f.header.getDisplayText());else if(f instanceof o.CellLayoutGroupItem){var m=n.getCell(f);this._updateGroupCell(e,n,m,_)}else{m=n.getCell(f);this._updateCell(e,n,m,_)}}}},l.prototype._doRender=function(t){},l.prototype._getTableRowCount=function(t){return t.headerRows},l.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},l.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},l.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},l.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},l.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},l.prototype._doDrawCell=function(t,e,i){},l.prototype._doPrepareTableRow=function(t,e,o,r){i.prototype._doPrepareTableRow.call(this,t,e,o,r);var s=this.model;n.Utils.setClassName(r,s.getStyleName())},l.prototype.$_getCellSelector=function(t,e){var i,n="";if(t instanceof o.CellLayoutGroupItem)n="rg-header-group-cell",(i=t.header.styleName)&&(n+=" "+i);else{n="rg-header-cell",e[r.T_FOC]?n+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(n+=" rg-header-select");var s=t.firstColumn;(i=i||s&&s.header.styleName)&&(n+=" "+i)}return n},l.prototype.$_hoverChanged=function(t,e){var i=this.grid.getTableCell(t.target),n=this.tableCellByCell(i),r=this.model,s=n.layout,a=r.getCell(s);n.hovered=e,s instanceof o.CellLayoutColumnItem&&this._updateCell(this.grid,r,a,n)},l.prototype.$_pointerEnter=function(t){this.$_hoverChanged(t,!0)},l.prototype.$_pointerLeave=function(t){this.$_hoverChanged(t,!1)},l.prototype._getStartCell=function(t){return t.getStartCell()},l.prototype._getEndCell=function(t){return t.getEndCell()},l.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),l=this._getLastCell(t)-s+1,h=o.length;h<r;h++)o.push([]);for(var u=0;u<r;u++){for(var d=o[u],c=n[u].children,p=e[u],_=0;_<l;_++){var f=c[_],g=p[_+s],m=d[_];m?m.cell!==f||m.layout!=g&&(m.layout=g,m.clear(!0)):(m=d[_]=new a(c[_])).layout=g,m.height=this.$_getCellHeight(m),m.width=this._getCellWidth(t,_),m.spanned=!1}for(_=l;_<d.length;_++)d[_].dispose();d.length=l}for(u=r;u<o.length;u++){var y=o[u];for(_=0;_<y.length;_++)y[_].dispose(),y[_]=null}o.length=r},l.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),n=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,h=n;h<=r;h++){var u=a[h],d=u.layout,c=d.parent,p=c&&c.vertical;if(u.spanned);else if(d.isProxy)u.clear(!1);else{var _=0,f=d.getHeaderSpan()-1;if(f>0){var g=0,m=d.vindex+1;if(p)for(;g++<f&&g<e;){_+=c.getVisible(m++)._hspan,this._cells[s+g][h].span()}else for(;g++<f&&h-n+g<l&&m<c.visibleCount;){_+=c.getVisible(m++)._cspan,a[h+g].span()}}(d instanceof o.CellLayoutGroupItem||d.isNull)&&u.clear(!0),p?u.set(d._cspan,d._hspan+_,!0):u.set(d._cspan+_,d._hspan,!0),u.width=this._getCellWidth2(t,h,u.colSpan)}}},l.prototype._updateCell=function(t,e,i,o){var a=t.doc,h=t.sortingOptions,u=t.filteringOptions,d=o.layout.firstColumn,c=i.checkLocation,p=c&&c!=r.ColumnHeaderItemLocation.NONE?e.checkWidth:0,_=p>0?e.checkWidth:0,f=d&&this.$_canSortHandleVisible(h,d,o),g=d&&d.sortDirection||r.SortDirection.NONE,m=f?e.sortWidth:0,y=d&&this.$_canFilterHandleVisible(u,d,o)?e.filterWidth:0,v=d&&this.$_canPopupHandleVisible(e,d,o)?e.popupWidth:0,C=o.cell.firstElementChild,w=o.textSpan,x=o.width,b=this.$_getCellHeight(o),I=0,E=0,S=0,R=0,T=C.style;o.setRendererClassName(C,l.RENDERER_STYLE),T.maxHeight=Math.max(b-2,0)+"px";var D=o.check;if(p>0){var k=w.style;D?T=D.style:(D=a.createElement("input"),o.check=D,D.type="checkbox",D.className="rg-header-check",(T=D.style).position="absolute",T.display="inline-block",T.verticalAlign="middle"),o.checkWidth<=0&&(C.appendChild(D),o.checkWidth=p),D.checked=d.checked,D.title=i.text+" "+d.checked?"checked":"unchecked";var M=-1,L=-1;switch(k.removeProperty("display"),c){case r.ColumnHeaderItemLocation.LEFT:case r.ColumnHeaderItemLocation.LEFT_EDGE:C.insertBefore(D,o.textSpan),c===r.ColumnHeaderItemLocation.LEFT?(T.position="relative",T.removeProperty("left"),T.removeProperty("top")):(T.position="absolute",I+=p,M=0,L=Math.floor((b-e.checkHeight)/2));break;case r.ColumnHeaderItemLocation.RIGHT:case r.ColumnHeaderItemLocation.RIGHT_EDGE:C.insertBefore(o.textSpan,D),c===r.ColumnHeaderItemLocation.RIGHT?(T.position="relative",T.removeProperty("left"),T.removeProperty("top")):(T.position="absolute",E+=p,M=x-p,L=Math.floor((b-e.checkHeight)/2));break;case"top":case"topEdge":C.insertBefore(D,o.textSpan),c===r.ColumnHeaderItemLocation.TOP?(k.display="block",T.position="relative",T.removeProperty("left"),T.removeProperty("top")):(T.position="absolute",S+=_,M=Math.floor((x-m-y-e.checkWidth)/2),L=0);break;case"bottom":case"bottomEdge":C.insertBefore(o.textSpan,D),c===r.ColumnHeaderItemLocation.BOTTOM?(k.display="block",T.position="relative",T.removeProperty("left"),T.removeProperty("top")):(T.position="absolute",R+=_,M=Math.floor((x-m-y-e.checkWidth)/2),L=b-e.checkHeight)}M>-1&&(T.left=M+"px"),L>-1&&(T.top=L+"px")}else o.checkWidth>0&&(C.removeChild(D),o.checkWidth=0);var O=o.filter;y>0?(O?T=O.style:(O=a.createElement("span"),o.filter=O,(T=O.style).position="absolute",T.display="inline-block"),o.filterWidth<=0&&(C.appendChild(O),o.filterWidth=y),O.className="rg-header-filtering"+(d.isFiltered()?" filter-activated":""),E+=y,T.left=x-E+"px",T.top=Math.floor((b-e.filterHeight)/2)+"px",T.width=y+"px",T.height=e.filterWidth+"px"):o.filterWidth>0&&(C.removeChild(O),o.filterWidth=0);var F=o.sort;if(f){switch(F?T=F.style:(F=a.createElement("span"),o.sort=F,(T=F.style).position="absolute",T.display="inline-block"),o.sortWidth<=0&&(C.appendChild(F),o.sortWidth=m),g){case r.SortDirection.DESCENDING:F.className="rg-header-sort-descending";break;case r.SortDirection.ASCENDING:F.className="rg-header-sort-ascending";break;default:F.className="rg-header-sort-none"}E+=m,T.left=x-E+"px",T.width=m+"px",h.showSortOrder&&d.sortOrder>=0?(F[n.Utils.TextProp]=(d.sortOrder+1).toString(),T.top=Math.max(0,Math.floor((b-e.sortHeight-10)/2))+"px",T.height=Math.min(o.height,e.sortHeight+10)+"px",T.backgroundPositionY=n.Utils.isIE?"5px":"70%",T.lineHeight=n.Utils.isIE?"1.5em":"1em"):(F[n.Utils.TextProp]="",T.backgroundPositionY="center",T.top=Math.floor((b-e.sortHeight)/2)+"px",T.height=e.sortHeight+"px")}else o.sortWidth>0&&(C.removeChild(F),o.sortWidth=0);var P=o.popup;v>0?(P?T=P.style:(P=a.createElement("span"),o.popup=P,(T=P.style).position="absolute",T.display="inline-block"),o.popupWidth<=0&&(C.appendChild(P),o.popupWidth=v),P.className="rg-header-popup",E+=v,T.left=x-E+"px",T.top=Math.floor((b-e.popupHeight)/2)+"px",T.width=v+"px",T.height=e.popupWidth+"px"):o.popupWidth>0&&(C.removeChild(P),o.popupWidth=0),T=C.style,o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(T,I,E,S,R);var B=i.template;B?o.setHtml(w,B):o.setText(w,i.text||""),s.TableCell.addEdgeMark(i.edgeMark,o,a)},l.prototype._updateGroupCell=function(t,e,i,o){var n=t.doc,r=o.cell.firstElementChild,a=o.textSpan,l=this.$_getCellHeight(o),h=o.layout,u=0,d=r.style;d.maxHeight=Math.max(l-2,0)+"px";var c=this.$_canExpanderHandleVisible(h),p=o.expander;if(c){o.expander||((p=o.expander=n.createElement("span")).style.position="absolute",p.style.display="inline-block"),p.className=h.expanded?"rg-column-expanded":"rg-column-collapsed";var _=p.style;_.left="2px",_.top=Math.floor((l-e.expanderHeight)/2)+"px",_.width=e.expanderWidth+"px",_.height=e.expanderHeight+"px",u+=e.expanderWidth+2,r.appendChild(o.expander)}else o.expander&&r.removeChild(o.expander);o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(d,u,0,0,0);var f=i.template;f?o.setHtml(a,f):o.setText(a,i.text||""),s.TableCell.addEdgeMark(i.edgeMark,o,n)},l.prototype.$_canPopupHandleVisible=function(t,e,i){if(null==e.header.popupMenuName)return!1;switch(t.showPopupMenu){case r.HandleVisibility.VISIBLE:case r.HandleVisibility.ALWAYS:return!0;case r.HandleVisibility.HOVERED:return i.hovered;case r.HandleVisibility.HIDDEN:return!1}},l.prototype.$_canFilterHandleVisible=function(t,e,i){var o=t.enabled&&e.hasFilters&&e.filterable&&e.filterIconVisible;if(o)switch(t.handleVisibility){case r.HandleVisibility.HIDDEN:o=!1;break;case r.HandleVisibility.HOVERED:o=o&&i.hovered}return o},l.prototype.$_canSortHandleVisible=function(t,e,i){switch(t.handleVisibility){case r.HandleVisibility.VISIBLE:return e.sortOrder>=0;case r.HandleVisibility.HOVERED:return i.hovered&&e.sortOrder>=0;case r.HandleVisibility.ALWAYS:return e.sortable||e.sortOrder>=0;case r.HandleVisibility.HIDDEN:return!1}},l.prototype.$_canCheckHandleVisible=function(t,e){return!1},l.prototype.$_canExpanderHandleVisible=function(t){return t.isExpandable()},l.prototype.$_checkHeight=function(){return this._dirty&&this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},l.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,o=this._rowPoints.length-1;i<o;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},l.prototype.$_adjustHeights=function(t){var e=this._tbody.rows,i=this._rowPoints;i[0]=0;for(var o=0,n=i.length-1;o<n;o++)e[o].style.height=t[o]+"px",i[o+1]=i[o]+t[o];return i[i.length-1]},l.prototype.$_distributeHeights=function(t,e){for(var i=e.length,o=0,n=0;n<i;n++)o+=e[n];if(t>o){var r=this._tbody.rows,s=t-o,a=s;for(n=0;n<i-1;n++){var l=Math.floor(s*e[n]/o);e[n]+=l,r[n].style.height=e[n]+"px",a-=l}e[n]+=a,r[n]&&(r[n].style.height=e[n]+"px")}},l.RENDERER_STYLE="rg-header-renderer",l}(i.SimpleTableElement);On.HeaderElement=l;var h=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype._getCellCount=function(t){return t.fixedCellCount},i.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},i.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},i.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},i}(l);On.FixedHeaderElement=h;var u=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype._getCellCount=function(t){return t.cellCount-1},i.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},i.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},i.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},i}(l);return On.RightHeaderElement=u,On}var ir,or={};function nr(){if(ir)return or;ir=1,Object.defineProperty(or,"__esModule",{value:!0}),or.GridLayoutManager=void 0;var t=d,e=G(),i=E(),o=Do(),n=wo(),r=To(),s=tr(),a=S(),l=Mn(),h=C(),u=Zo(),c=function(e){function d(t){var i=e.call(this)||this;return i._refreshMode=h.RefreshMode.ALL,i._leftPos=0,i._rightFixed=!0,i._footerCount=0,i._headerSummaryCount=0,i._layoutCount=0,i._fixedLayoutCount=0,i._rightLayoutCount=0,i._firstLayout=0,i._lastLayout=0,i._layoutsLength=0,i._layouts=[],i._layoutPoints=[],i._fixedLayoutPoints=[],i._rightLayoutPoints=[],i._cellCount=0,i._fixedCellCount=0,i._rightCellCount=0,i._firstCell=0,i._lastCell=0,i._startCell=0,i._endCell=0,i._cellPoints=[],i._fixedCellPoints=[],i._rightCellPoints=[],i._trs=1,i._rowGrouped=!1,i._items=[],i._topIndex=0,i._itemCount=0,i._fixedItemCount=0,i._fullItemCount=0,i._fixedItemPoints=[],i._itemPoints=[],i._fixedTableRowCount=0,i._tableRowCount=0,i._fixedTableRowPoints=[],i._tableRowPoints=[],i._fixedTableItemPoints=[],i._tableItemPoints=[],i._fixedDataHeight=0,i._dataRowHeights=[],i._dataHeight=0,i._fixedBarWidth=0,i._rightBarWidth=0,i._fixedBarHeight=0,i._itemsBounds=0,i._fixedWidth=0,i._rightWidth=0,i._fixedHeight=0,i._autoRowHeights=!1,i._minRowHeight=l.DisplayOptions.MIN_TABLE_ROW_HEIGHT,i._minItemHeight=l.DisplayOptions.MIN_TABLE_ROW_HEIGHT,i._maxHeight=l.DisplayOptions.MIN_TABLE_ROW_HEIGHT,i._itemHeight=0,i._hscrolled=!1,i._vscrolled=!1,i._hscrollBar=!1,i._vscrollBar=!1,i._scrollBarWidth=0,i._scrollBarHeight=0,i._scrollWidth=0,i._fitStyle=void 0,i._grid=t,i}return t.__extends(d,e),d.prototype._doDispose=function(){this._grid=null,this._rs=null,e.prototype._doDispose.call(this)},_dp(d,"grid",{get:function(){return this._grid}}),_dp(d,"footerCount",{get:function(){return this._footerCount}}),_dp(d,"headerSummaryCount",{get:function(){return this._headerSummaryCount}}),_dp(d,"vscrollBar",{get:function(){return this._vscrollBar}}),_dp(d,"hscrollBar",{get:function(){return this._hscrollBar}}),_dp(d,"scrollBarWidth",{get:function(){return this._scrollBarWidth}}),_dp(d,"scrollBarHeight",{get:function(){return this._scrollBarHeight}}),_dp(d,"dataBounds",{get:function(){return this._dataBounds}}),_dp(d,"bodyBounds",{get:function(){return this._bodyBounds}}),_dp(d,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds}}),_dp(d,"gridBounds",{get:function(){return this._gridBounds}}),_dp(d,"headerBounds",{get:function(){return this._headerBounds}}),_dp(d,"summaryBounds",{get:function(){return this._summaryBounds}}),_dp(d,"footerBounds",{get:function(){return this._footerBounds}}),_dp(d,"filterPanelBounds",{get:function(){return this._filterPanelBounds}}),_dp(d,"topContentBounds",{get:function(){return this._topContentBounds}}),_dp(d,"leftContentBounds",{get:function(){return this._leftContentBounds}}),_dp(d,"rowBarBounds",{get:function(){return this._rowBarBounds}}),_dp(d,"sideContentBounds",{get:function(){return this._sideContentBounds}}),_dp(d,"contentBounds",{get:function(){return this._contentBounds}}),_dp(d,"fixedContentBounds",{get:function(){return this._fixedContentBounds}}),_dp(d,"nonFixedBounds",{get:function(){return this._nonFixedBounds}}),_dp(d,"rightContentBounds",{get:function(){return this._rightContentBounds}}),_dp(d,"headBounds",{get:function(){return this._headBounds}}),_dp(d,"sumBounds",{get:function(){return this._sumBounds}}),_dp(d,"footBounds",{get:function(){return this._footBounds}}),_dp(d,"fixedWidth",{get:function(){return this._fixedWidth}}),_dp(d,"rightWidth",{get:function(){return this._rightWidth}}),_dp(d,"defaultItemHeight",{get:function(){return this._itemHeight}}),_dp(d,"topIndex",{get:function(){return this._topIndex}}),_dp(d,"itemCount",{get:function(){return this._itemCount}}),_dp(d,"fixedItemCount",{get:function(){return this._fixedItemCount}}),_dp(d,"fullItemCount",{get:function(){return this._fullItemCount}}),_dp(d,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount}}),_dp(d,"tableRowCount",{get:function(){return this._tableRowCount}}),_dp(d,"trs",{get:function(){return this._cellLayouts.dataRows}}),_dp(d,"leftPos",{get:function(){return this._leftPos}}),_dp(d,"cellLayouts",{get:function(){return this._cellLayouts}}),_dp(d,"layoutCount",{get:function(){return this._layoutCount}}),_dp(d,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount}}),_dp(d,"rightLayoutCount",{get:function(){return this._rightLayoutCount}}),_dp(d,"firstLayout",{get:function(){return this._firstLayout}}),_dp(d,"lastLayout",{get:function(){return this._lastLayout}}),_dp(d,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount}}),_dp(d,"layoutsLength",{get:function(){return this._layoutsLength}}),_dp(d,"cellCount",{get:function(){return this._cellCount}}),_dp(d,"fixedCellCount",{get:function(){return this._fixedCellCount}}),_dp(d,"rightCellCount",{get:function(){return this._rightCellCount}}),_dp(d,"firstCell",{get:function(){return this._firstCell}}),_dp(d,"lastCell",{get:function(){return this._lastCell}}),_dp(d,"startCell",{get:function(){return this._startCell}}),_dp(d,"endCell",{get:function(){return this._endCell}}),_dp(d,"isColumnFitted",{get:function(){return!!this._fitStyle}}),_dp(d,"scrollWidth",{get:function(){return this._scrollWidth}}),_dp(d,"fixedBarWidth",{get:function(){return this._fixedBarWidth}}),_dp(d,"rightBarWidth",{get:function(){return this._rightBarWidth}}),_dp(d,"fixedHeight",{get:function(){return this._fixedHeight}}),_dp(d,"fixedBarHeight",{get:function(){return this._fixedBarHeight}}),_dp(d,"rowGrouped",{get:function(){return!1}}),_dp(d,"mergedRowGrouped",{get:function(){return!1}}),_dp(d,"rowGroupFields",{get:function(){return null}}),_dp(d,"rowGroupLevels",{get:function(){return 0}}),_dp(d,"clientRect",{get:function(){return this._clientRect}}),_dp(d,"headerRows",{get:function(){return this._cellLayouts.headerRows}}),_dp(d,"dataRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(d,"topPanelVisible",{get:function(){return!1}}),_dp(d,"minRowHeight",{get:function(){return this._minRowHeight}}),_dp(d,"minItemHeight",{get:function(){return this._minItemHeight}}),_dp(d,"fitStyle",{get:function(){return this._fitStyle}}),d.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==h.SyncGridHeight.NONE},d.prototype.fitSyncHeight=function(){return this._fitSyncHeight},d.prototype.getStartCell=function(t){if(void 0===t&&(t=!0),t)return this._firstCell;var e=this.grid,i=e.isRecycleMode();switch(this._refreshMode){case h.RefreshMode.VISIBLE_ONLY:return this._startCell;case h.RefreshMode.RECYCLE:return i?e._needRefresh&&e._horzScrolled?this._firstCell:this._startCell:this._firstCell;default:return this._firstCell}},d.prototype.getEndCell=function(t){if(void 0===t&&(t=!0),t)return this._lastCell;var e=this.grid,i=e.isRecycleMode();switch(this._refreshMode){case h.RefreshMode.VISIBLE_ONLY:return this._endCell;case h.RefreshMode.RECYCLE:return i?e._needRefresh&&e._horzScrolled?this._lastCell:this._endCell:this._lastCell;default:return this._lastCell}},d.prototype.getLayout=function(t){return this._layouts[t]},d.prototype.getLayoutBounds=function(t){return new i.Rectangle(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},d.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},d.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},d.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},d.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},d.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},d.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},d.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},d.prototype.getCellPoint=function(t){return this._cellPoints[t]},d.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},d.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},d.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},d.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},d.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},d.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},d.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},d.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},d.prototype.$_getItems=function(){return this._items},d.prototype.getItem=function(t){return this._items[t]},d.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],o=e.dataHeights;if(o&&o.length>0)for(var n=0;n<t;n++){var r=Math.floor(Math.max(e.minTableRowHeight,o[n]||e.minTableRowHeight));i.push(r)}return i.slice()},d.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return i&&i.length>0&&(e=i.reduce((function(t,e){return t+e}),0)),e<=0&&(e=t.heightMeasurer.rowHeight*this._trs),i.length>0&&this._maxHeight>0&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(e=Math.min(this._maxHeight,e)),e=Math.max(this._minItemHeight,e)},d.prototype.measure=function(t,e,i,o,n){var r=this._grid;this._rs=r.itemSource,this._cellLayouts=r._activeCellLayout,this._footerCount=r.footers.visibleCount,this._headerSummaryCount=r.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._focusIndex&&!r.isValid(this._focusIndex)&&this._focusIndex.normalize(r),this._prevVscrolled=this._vscrolled,this._prevHscrolled=this._hscrolled,this._doMeasure(t,o,n),this._prevVscrolled===this._vscrolled&&this._prevHscrolled===this._hscrolled||(r._columnsDirty=!0)},d.prototype.layout=function(t){var e=this._grid;e.invalidateGridObject(),this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=e.displayOptions.syncGridHeight},d.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},d.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},d.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},d.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},d.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},d.prototype.getItemBounds=function(t){var e,o;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],o=this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],o=this._itemPoints[t+1]-e),new i.Rectangle(0,e,1e3,o)},d.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var o,n,r=(e?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&t<this._fixedItemCount?(o=this._fixedItemPoints[t]+r,n=this._fixedItemPoints[t+1]+r-o):(t-=this._fixedItemCount,o=this._itemPoints[t]+r,n=this._itemPoints[t+1]+r-o),new i.Rectangle(0,o,1e3,n)},d.prototype.getTableItemBounds=function(t){var e,o;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],o=this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],o=this._tableItemPoints[t+1]-e),new i.Rectangle(0,e,1e3,o)},d.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(i>1&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},d.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(this._fixedItemCount>0&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},d.prototype.getTableRowBounds=function(t,e){var o,n;return this._fixedTableRowCount>0&&t<this._fixedTableRowCount?(o=this._fixedTableRowPoints[t],n=this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-o):(this._fixedTableRowCount>0&&(t-=this._fixedTableRowCount+1),o=this._tableRowPoints[t],n=this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-o),new i.Rectangle(0,o,1e3,n)},d.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=Math.round(this._fixedTableRowPoints[e+1]))return e;for(e=0;e<this._tableRowCount;e++)if(t<=Math.round(this._tableRowPoints[e+1]))return e+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},d.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},d.prototype.isMergedCell=function(t){return!1},d.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof r.CellLayoutColumnItem&&e.canMerge()){var i=e.merges;return i&&i.getRoom(t)}return null},d.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,n=this._grid,r=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=n.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){o=n.rightHeaderView,t-=this._rightContentBounds.x;for(a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else{o=n.headerView,t-=this._contentBounds.x;for(a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}}if(s>=0){var l=r[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=o.getSpanRoot(l))&&!i?l.source:l}},d.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var o,n,r=this.grid,s=t.hcol,a=this.cellCount-this.rightCellCount;if(s<this._fixedCellCount){var l=this._fixedContentBounds.x,h=s,u=(n=r.fixedHeaderView.tableCellByLayout(t))?n.colSpan:t.cols;o=new i.Rectangle(this._fixedCellPoints[h]+l,0,this._fixedCellPoints[h+u]-this._fixedCellPoints[h],0)}else if(s>=a){l=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,h=s-a,u=(n=r.rightHeaderView.tableCellByLayout(t))?n.colSpan:t.cols;o=new i.Rectangle(this._rightCellPoints[h]+l,0,this._rightCellPoints[h+u]-this._rightCellPoints[h],0)}else{l=this._contentBounds.x,h=s-this._fixedCellCount,u=(n=r.headerView.tableCellByLayout(t))?n.colSpan:t.cols;o=new i.Rectangle(this._cellPoints[h]+l,0,this._cellPoints[h+u]-this._cellPoints[h],0)}return o.y=this._contentBounds.y+r.headerView.getLayoutPos(t),o.height=r.headerView.getLayoutHeight(t,n,e),o},d.prototype.getDataRect=function(t){var e,o=(t=t.source).col,n=t instanceof r.CellLayoutGroupItem?t._clen:t._defColSpan,s=this.cellCount-this.rightCellCount;if(o<this._fixedCellCount){var a=this._fixedContentBounds.x,l=o;e=new i.Rectangle(this._fixedCellPoints[l]+a,0,this._fixedCellPoints[l+n]-this._fixedCellPoints[l],0)}else if(o>=s){a=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,l=o-s;e=new i.Rectangle(this._rightCellPoints[l]+a,0,this._rightCellPoints[l+n]-this._rightCellPoints[l],0)}else{a=this._contentBounds.x,l=o-this._fixedCellCount;e=new i.Rectangle(this._cellPoints[l]+a,0,this._cellPoints[l+n]-this._cellPoints[l],0)}return e},d.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof r.CellLayoutItem?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:i>=e?this._grid.rightBodyView:this._grid.bodyView},d.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var n=this.grid,r=this._summaryBounds.bottom,a=-1;if((i-=this._contentBounds.y)>=r&&i<this._footerBounds.y){for(var l=0;l<this._fixedItemCount;l++)if(i>=r+this._fixedItemPoints[l]&&i<r+this._fixedItemPoints[l+1]){a=l,i-=r+this._fixedItemPoints[l];break}if(a<0&&this._itemCount>0){for(l=0;l<this._itemCount;l++)if(i>=r+this._itemPoints[l]&&i<r+this._itemPoints[l+1]){a=l;break}a>=0&&(a+=n.topItem)}}else i>=this._footerBounds.y?a=-2:i<this._headerBounds.y&&(a=-3);if(o.itemIndex=a,t){var h=n.getCellViewOf(t),u=h&&n.getBodyView(h),d=u instanceof s.GridBodyElement&&u.layoutByCell(h);if(d)return o.layout=d,o}return o},d.prototype.mouseToIndexEx=function(t,e,i,o){if(this._layoutCount<1)return o;var n=this.grid,r=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=r+this._fullItemCount;else if(i>=this._footerBounds.y)a=r+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&this._itemCount>0){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}a>=0&&(a+=r)}}o.itemIndex=a;var h=-1,u=this._gridBounds.x;if(e<u)h=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)h=n.visibleLayoutCount-1;else{e-=u;for(l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){h=l;break}if(h<0&&this._rightLayoutCount>0){var d=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+u;for(l=0;l<this._rightLayoutCount;l++)if(d>=this._rightLayoutPoints[l]&&d<this._rightLayoutPoints[l+1]){h=l+this.rightFirstLayout;break}}if(h<0){e=e-this._fixedWidth+this._leftPos;for(l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){h=l;break}}}return h>=0&&h<n.visibleLayoutCount?o.layout=n.getVisibleLayout(h):o.layout=null,o},d.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(e>=i){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var o=t.layout,n=o.col;if(n>=(i=this._fixedLayoutCount)){if(n=o.col-this._fixedCellCount,this._cellPoints[n]<this._leftPos)return!1;if(this._cellPoints[n+o.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},d.prototype.clearFocusRequest=function(){this._focusIndex=null},d.prototype.focusIsVisible=function(t){return(t=t||this._focusIndex)&&this.cellIsVisible(t)},d.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},d.prototype.isAutoRowHeights=function(){return this._autoRowHeights},d.prototype.isRowGrouped=function(){return this._rowGrouped},d.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},d.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;t>=0;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},d.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==h.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},d.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,n=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-n-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],n>0){var r=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=0,h=0;s.push(l),a.push(l);for(var u=0;u<n;u++){for(var d=e.getVisible(u),c=d.cols,p=0;p<c;p++)l+=o[h++],a.push(l);r.push(d),s.push(l)}this._fixedCellCount=this._cellCount=h,this._fixedWidth=s[n]+(this._fixedBarWidth=t.colBarWidth)}},d.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],n=this._cellPoints=[],r=this._fixedLayoutCount,s=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,e>0){var a=0,l=this._cellCount;o.push(a),n.push(a);for(var h=0;h<e;h++){for(var u=t.getVisible(h+r),d=u.cols,c=0;c<d;c++)a+=i[l++],n.push(a);s.push(u),o.push(a)}this._layoutsLength=a,this._cellCount=l,this._lastCell=l-1}},d.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,n=this._rightLayoutPoints=[],r=this._rightCellPoints=[],s=this._layouts;if(this._rightLayoutCount>0){var a=0,l=this._cellCount;n.push(a),r.push(a);for(var h=o-this._rightLayoutCount;h<o;h++){for(var u=e.getVisible(h),d=0;d<u.cols;d++)a+=i[l++],r.push(a);s.push(u),n.push(a)}this._rightCellCount=l-this._cellCount,this._cellCount=l,this._rightWidth=n[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},d.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},d.prototype.$_calcLeftPos=function(){var t=this._focusIndex&&this._focusIndex.layout,e=this._leftPos;if(t){var i=t.root.vindex,n=this._cellPoints,r=this.grid,s=r.editOptions.focusMoveStep===o.FocusMoveStep.GROUP;if(!r.isSwiping&&i>=this._fixedLayoutCount&&i<this.rightFirstLayout){var a=t.col-this._fixedCellCount,l=n[a],h=r.displayOptions.horzPageScroll&&"keydown"===r._eventFrom&&r._prevTop===this._topIndex;if(l<this._leftPos)h&&this._leftPos>=n[a+1]&&(l=l-(this.gridBounds.width+n[a]-n[a+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),e=l;else{var u=n[a+(s?t.root.cols:t.cols)]-this._leftPos-this._scrollWidth;h&&n[a]-this._leftPos>=this._scrollWidth&&(u=Math.max(n[a]-n[this.getLeftCell()],u)),u>0&&(e=Math.min(l,this._leftPos+u))}}}(e=Math.max(0,Math.min(e,this._layoutsLength-this._scrollWidth)))!==this._leftPos&&(this.grid._horzScrolled=!0,this._leftPos=e),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},d.prototype.$_checkFitting=function(t,e){var i=t.fitStyle;if(i!=h.GridFitStyle.NONE){var o=this._cellPoints,n=o.length;if(n>0)return i==h.GridFitStyle.EVEN_FILL||e-o[n-1]>0?i:void 0}},d.prototype.$_fitColumns=function(t,e,o){var n=this;if(t.fitStyleIncludeFixed&&this._fixedCellCount+this._rightCellCount>0){var r=[this._fixedLayoutPoints,this._layoutPoints,this._rightLayoutPoints],s=0;r.forEach((function(t){t.length>0&&(s+=t[t.length-1])}));var l=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth;l=l-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),r.forEach((function(t){for(var e=1;e<t.length;e++)t[e]=Math.round(t[e]*(l/s))}));var u=0;r.forEach((function(t,i){var o=0===i?n._fixedCellPoints:1===i?n._cellPoints:n._rightCellPoints,r=t.length,s=e._cellWidths,a=0;o.length=0,o.push(a);for(var l=0;l<r-1;l++){var h=n._cellLayouts.getVisible(u++),d=h._cellWidth,c=t[l+1]-t[l],p=c/d,_=h.hcol,f=h.cols,g=a;h._setFitWidth(c);for(var m=0;m<f-1;m++)g+=s[_+m]*p,o.push(Math.round(g));a+=c,o.push(Math.round(a))}o[o.length-1]=t[r-1]})),this._layoutsLength=a.Utils.getLast(this._layoutPoints),this._fixedWidth=this._fixedCellCount?a.Utils.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?a.Utils.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new i.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(var d=0;d<this._layoutCount;d++){(T=this._cellLayouts.getVisible(d)).isFixed&&T._clearFitWidth()}var c=this._layoutsLength,p=this._layoutPoints,_=p.length,f=this._fixedLayoutCount,g=[];for(d=1;d<p.length;d++)g.push(p[d]-p[d-1]);if(_>0){var m=t.fitStyle,y=this._layouts;if(m==h.GridFitStyle.EVEN||m==h.GridFitStyle.EVEN_FILL)for(d=1;d<_;d++)p[d]=p[d]*o/c;else if(m==h.GridFitStyle.FILL){var v=0,C=0;for(d=0;d<_-1;d++){var w=y[d+f].fillWidth;w>0?C+=w:v+=g[d]}if(C>0){v=o-v;for(d=1;d<_;d++){var x=(T=y[d-1+f]).fillWidth;p[d]=x>0?p[d-1]+x*v/C:p[d-1]+g[d-1]}}else for(d=1;d<_;d++)p[d]=p[d]*o/c}var b=0;for(d=0;d<_-1;d++)p[d]=Math.round(p[d]);for(d=1;d<_-1;d++){var I=p[d]-p[d-1];I<2?(b=2-I,p[d]+=2-I):b>0&&I>2+b&&(p[d]-=b,b=0)}var E=this._cellPoints=[],S=e._cellWidths,R=0;E.push(R);for(d=0;d<_-1;d++){var T,D=(T=this._cellLayouts.getVisible(d+f))._cellWidth,k=p[d+1]-p[d],M=k/D,L=T.hcol,O=T.cols,F=R;T._setFitWidth(k);for(var P=0;P<O-1;P++)F+=S[L+P]*M,E.push(Math.round(F));R+=k,E.push(Math.round(R))}E[E.length-1]=p[_-1]}this._layoutsLength=p[_-1]=o}},d.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},d.prototype._doMeasureTopPane=function(t,e){e.height=0},d.prototype.$_measureViewHeights=function(t,e){var o;o=0,t.header.visible?(this._headerBounds=e.clone(),o=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=o):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new i.Rectangle,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=o,e.topBy(o),o=0,t.filterPanel.visible?(this._filterPanelBounds=e.clone(),o=t.filterPanelView.measure(t,e.width,e.height).height,this._filterPanelBounds.height=o):(this._filterPanelBounds=this._filterPanelBounds||new i.Rectangle,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=e.y,this._filterBounds.height=o,e.topBy(o),o=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),o=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=o):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new i.Rectangle,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=o,e.topBy(o),o=0,t.footers.canShow?(this._footerBounds=e.clone(),o=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=o):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new i.Rectangle,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=o;var n=this._sumBounds.bottom;o=this._footBounds.y-n,this._rowBarBounds.y=n,this._rowBarBounds.height=o},d.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o})),e},_dp(d,"sectionObjects",{get:function(){return this._sectionObjects}}),d.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),this._filterBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},d.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},d.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=i.x,this._fixedFilterBounds.y=i.y,this._fixedFilterBounds.width=i.width,i.topBy(this._fixedFilterBounds.height),e>0&&(t.fixedFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),e>0&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),e>0&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},d.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=i.x,this._rightFilterBounds.y=i.y,this._rightFilterBounds.width=i.width,i.topBy(this._rightFilterBounds.height),e>0&&(t.rightFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),e>0&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),e>0&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},d.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=i.x,this._filterPanelBounds.y=i.y,this._filterPanelBounds.width=i.width,i.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footBounds.y=this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},d.prototype.getRowHeightOfCallback=function(t,e){var i=t.getItem(e),o=t.displayOptions.rowHeightCallback;if(o){var n=o.call(this,t.handler,i.type,e),r=[],s=void 0,a=this.trs;if(null!=n){if(Array.isArray(n)){r=n.slice(0,a);for(l=n.length;l<a;l++)r.push(this.minRowHeight)}else{s=0;for(var l=1;l<a;l++){var h=Math.max(this.minRowHeight,l%2?Math.floor(n/a):Math.round(n/a));r.push(h),s+=h}r.push(Math.max(n-s,this.minRowHeight))}var u=r.reduce((function(t,e){return t+e}),0);return i.heights=r.slice(),u}}},d.prototype.$_getItemHeight=function(t,e){var i=t.getItem(e),o=i.height;if(!isNaN(o))return o;if(this._autoRowHeights)return this._minItemHeight;if(t.displayOptions.rowHeightCallback&&a.Utils.included(i.type,h.ItemType.ROW,h.ItemType.TREE)){var n=this.getRowHeightOfCallback(t,e);if(n)return n;i.heights=null}else i.heights=null;return this._itemHeight},d.prototype.$_calcItemPoints=function(t){var e=this.grid;if("mousedown"===e._eventFrom&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))return;t=null==t||t;var i=e.itemSource,o=this.syncHeight(),n=o?1/0:this._itemsBounds;this._topIndex=o?0:this._topIndex;var r=0,s=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],s>0){this._fixedItemPoints.push(r);for(var a=0;a<s&&r<n;a++){r+=this.$_getItemHeight(e,a),this._fixedItemPoints.push(r),this._fixedItemCount++}this._fixedHeight=r,r+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var l=e.itemCount-this._fixedItemCount;if(this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,l>0&&r<n){var h=this._topIndex,u=-1;if(this._focusIndex&&(u=this._focusIndex.itemIndex)>=this._fixedItemCount&&u<h+this._fixedItemCount){var d=u-this._fixedItemCount;null==(c=e.topIndexChanging(h,u-this._fixedItemCount-h,!0,!1))||isNaN(c)||(d=this._topIndex+c),h=this._topIndex=d}for(a=h;a<l&&r<n;a++){r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r)}if(this._fullItemCount=this._itemCount-(r>n?1:0),t&&u>=this._topIndex+this._fixedItemCount+this._fullItemCount){r=this.fixedItemCount>0?this._fixedHeight+e.fixedOptions.rowBarHeight:0;var c,p=u-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;null==(c=e.topIndexChanging(this._topIndex,p,t,!1))||isNaN(c)||(p=c),this._topIndex+=p,this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0;for(a=this._topIndex;a<e.itemCount-this._fixedItemCount&&r<n;a++){r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r)}this._fullItemCount=this._itemCount-(r>=n?1:0)}}else this._topIndex=0},d.prototype.$_updateScrollInfo=function(t,e,i){var o=this._reqScrollBarWidth,n=this._reqScrollBarHeight,r=i?this._tableItemPoints:this._itemPoints,s=r[r.length-1],a=this._layoutsLength,l=e.fitStyle==h.GridFitStyle.EVEN_FILL,u=this.syncHeight();this._hscrolled=a>this._scrollWidth,this._vscrolled=!u&&(this._topIndex>0||t.itemCount>this._itemCount+this._fixedItemCount||s>this._bodyBounds.height);var d=n>0&&this._hscrolled&&!l,c=o>0&&this._vscrolled;d!=c&&(d?o>0&&!u&&(c=s>this._bodyBounds.height-n):n>0&&!l&&(d=a>this._scrollWidth-o)),this._hscrollBar=d,this._vscrollBar=c,this._hscrolled=this._hscrolled||d,this._vscrolled=this._vscrolled||c,this._scrollBarWidth=c?o:0,this._scrollBarHeight=d?n:0,this._scrollWidth-=this._scrollBarWidth},d.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},d.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(t>0){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this.syncHeight()?1/0:this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=Math.max(0,this._itemCount-(e[this._itemCount]>=i?1:0));var o=this._focusIndex?this._focusIndex.itemIndex:-1;if(o>=0&&this._itemCount>this._fullItemCount&&o>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var n=this.grid,r=e[this._itemCount],s=0;r>i;)r-=e[++s];var a=n._prevTop+1!==this._topIndex;if(s>0&&"mousedown"!==n._eventFrom){var l=n.topIndexChanging(this._topIndex,s,!!this._focusIndex,!0);null==l||isNaN(l)||(s=l),e.splice(0,s),this._topIndex+=s,this._itemCount-=s,this._fullItemCount-=s,r=e[0];for(var h=0;h<e.length;h++)e[h]-=r;if(r=e[e.length-1],n.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;r<i&&this._topIndex+this._fixedItemCount+this._itemCount<n.itemCount;)e.push(r+=this.$_getItemHeight(n,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;a&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var u=e[e.length-1];this._rowBarBounds.height=u}},d.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,n=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var r=0;r<i;r++)if(e[r]>o){this._startCell+=r-1;break}for(r=i-2;r>=0;r--)if(e[r]<n){this._endCell+=r;break}},d.prototype.$_calcTableRowPoints=function(){var t,e,i=this._trs,o=this._items,n=this._fixedItemCount,r=this._itemCount+n,s=this._fixedTableRowPoints=[],a=this._tableRowPoints=[],l=this._dataRowHeights,h=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,n>0){for(var u=this._fixedItemPoints;h<n;h++){var d=u[h];if(t=o[h],s.push(d),this._fixedTableRowCount++,t.isData){e=t.heights||l;for(var c=Math.floor((u[h+1]-d)/i),p=Math.round(u[h+1]-d)/i,_=1;_<i;_++)s.push(d+=e[_-1]?e[_-1]:_%2?c:p),this._fixedTableRowCount++}}s.push(this._fixedDataHeight=this._fixedItemPoints[n])}if(this.itemCount>0){for(u=this._itemPoints;h<r;h++){d=u[h-n],c=u[h-n+1]-d;if(t=o[h],a.push(d),this._tableRowCount++,t.isData){e=t.heights||l;var f=Math.floor(c/i);for(p=Math.round(c/i),_=1;_<i;_++)a.push(d+=e[_-1]?e[_-1]:_%2?f:p),this._tableRowCount++}}a.push(this._dataHeight=u[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},d.prototype._doMeasure=function(t,e,o){var n=this._grid,r=n.displayOptions,s=n.fixedOptions,a=t.clone();this._refreshMode=r.refreshMode,this._autoRowHeights=r.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=o,this._minRowHeight=r.minTableRowHeight,this._maxHeight=r.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,r.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),n.heightMeasurer.measure(n),this.$_calcFixedCellPoints(s,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(s,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(n);var l=n.container._containerDiv;!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==n.displayOptions.syncGridHeight&&l.style.height!==n.container._orgCssHeight&&(l.style.height=n.container._orgCssHeight),function(){this._topContentBounds=a.clone(),this.$_measureTopPane(n),a.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=a.clone(),this.$_measureLeftPane(n),a.leftBy(this._leftContentBounds.width),this._sideContentBounds=a.clone(),this._measureSidePane(n),a.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(n,a.clone().move()),this._fixedContentBounds=a.clone(),this.$_measureFixedPane(n),a.leftBy(this._fixedContentBounds.width),this._rightContentBounds=a.clone(),this.$_measureRightPane(n),this._rightContentBounds.x=a.right-this._rightContentBounds.width,a.width-=this._rightContentBounds.width,this._contentBounds=a.clone(),this.$_measureContentPane(n),this._clientRect=t.clone(),this._nonFixedBounds=new i.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height)}.call(this),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(n,r);var h=this._fitStyle;(this._fitStyle=this.$_checkFitting(r,this._scrollWidth))?(this.$_fitColumns(r,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):n._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=h)&&n.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new i.Rectangle(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},d.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},d.prototype._doLayoutTopPane=function(t,e){},d.prototype.$_layoutLeftPane=function(t,e){var i=this._leftContentBounds;function o(t,e,i,o){(t.visible=e.visible)&&(t._table.parentElement!==t._dom&&t._dom.appendChild(t._table),i&&(t.setRect(o),t.layoutContent(this)))}(e.visible=!i.isEmpty)?(e.setRect(i),o.call(this,t.headView,t.header,!1,this._headBounds),o.call(this,t.sumView,t.headerSummaries,!0,this._sumBounds),o.call(this,t.footView,t.footers,!0,this._footBounds),o.call(this,t.filterView,t.filterPanel,!0,this._filterBounds),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible):[t.headView,t.sumView,t.footView].forEach((function(t){t&&a.Utils.detach(t._table)}))},d.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},d.prototype._prepareItems=function(t){for(var e=this._topIndex+this._fixedItemCount,i=0;i<this._fixedItemCount;i++){var o=this._rs.getItem(i);this._items.push(o)}var n=this.grid.bodyView,r=t?n._getTableRowCount(this):this._itemCount;for(i=0;i<r;i++){if(!(o=this._rs.getItem(i+e)))break;this._items.push(o)}t&&(this._itemCount=this._items.length-this._fixedItemCount)},d.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;if(e.visible=!o.isEmpty){var n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFilterView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(i.setRect(this._fixedFilterBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,e.layoutContent(this,o.width,o.height)}else t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFilterView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1},d.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds,n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFilterView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(i.setRect(this._rightFilterBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFilterView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},d.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds,n=t._columnsDirty||t._cellLayoutDirty||t._needPosition,r=n||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.filterPanelView).visible=t.filterPanel.visible)&&(n||t.filterPanel.dirty)&&(this._filterPanelBounds.width=o.width,i.setRect(this._filterPanelBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(r||t.headerSummaries.dirty)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(r||t.footers.dirty)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=o.width,e.layoutContent(this,o.width,o.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},d.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},d.prototype._doLayout=function(t,e){var i;this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i),i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i)},d.prototype.$_adjustHeader=function(t,e,i,o){var n=t.fixedHeaderView,r=t.rightHeaderView,s=t.headerView,a=t.header.height,l=s.height,h=0,u=!1;if(i&&(u=n.$_checkHeight()),!u&&o&&(u=r.$_checkHeight()),!u&&e&&(u=s.$_checkHeight()),u){var d=[],c=0;i&&(n.$_getHeights(d),a>0?n.$_distributeHeights(a,d):c=Math.max(c,n.$_adjustHeights(d))),o&&(r.$_getHeights(d),a>0?r.$_distributeHeights(a,d):c=Math.max(c,r.$_adjustHeights(d))),e&&(s.$_getHeights(d),a>0?s.$_distributeHeights(a,d):c=Math.max(c,s.$_adjustHeights(d))),a<0&&(h+=c-l,this._headBounds.height=c,i&&this._fixedHeaderBounds.height!=c&&(this._fixedHeaderBounds.height=c,n.setRect(this._fixedHeaderBounds),n.$_adjustHeights(d)),o&&this._rightHeaderBounds.height!=c&&(this._rightHeaderBounds.height=c,r.setRect(this._rightHeaderBounds),r.$_adjustHeights(d)),e&&this._headerBounds.height!=c&&(this._headerBounds.height=c,s.setRect(this._headerBounds),s.$_adjustHeights(d)))}return h},d.prototype._adjustLayout=function(t,e){var o,n=this._autoRowHeights,r=t._fixedContentPane,s=t._rightContentPane,a=t._contentPane,l=t.fixedHeaderView,u=t.rightHeaderView,d=t.headerView,c=t.headView.visible,p=r.visible,_=s.visible,f=a.visible,g=0,m=0,y=this.$_adjustHeader(t,f,p&&d.visible&&l.visible,_&&u.visible);if(0!=y&&(m=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=y,p&&(t.fixedFilterView.y=m),_&&(t.rightFilterView.y=m),f&&(t.filterPanelView.y=m),c&&(t.filterView.y=m)),0!=y&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),t.headerSummaries.canShow&&0!=y&&(p&&(t.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),_&&(t.rightHeaderSummaryView.y=this._rightSummaryBounds.y),f&&(t.headerSummaryView.y=this._summaryBounds.y),c&&(t.sumView.y=this._sumBounds.y)),e.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),0!=y&&(m=this._sumBounds.bottom,g=Math.min(e.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=m,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=g),(o=t.fixedBodyView).visible&&o.setRect(this._fixedBodyBounds),(o=t.bodyView).visible&&o.setRect(this._bodyBounds),(o=t.rightBodyView).visible&&o.setRect(this._rightBodyBounds),this.$_layoutBodyRows(t,p,f,_,this._bodyBounds.height),this.$_adjustTableRowHeights(),n&&this.$_recalcScrollInfo(t),this.syncHeight()){var v=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,C=t.container._containerDom,w=t.container._containerDiv,x=C.offsetWidth-C.clientWidth,b=w.offsetHeight,I=this._tableItemPoints[this._tableItemPoints.length-1];(this._fitSyncHeight=this.itemCount>0&&(v+I+x>=b||t.displayOptions.syncGridHeight===h.SyncGridHeight.ALWAYS))?w.style.height=v+I+x+"px":(t.recallHeight(),I=b-v-x+(this.topPanelVisible?0:1));var E=new i.Rectangle(0,0,C.clientWidth,C.clientHeight);t.setRect(E),this._topContentBounds.width=E.width,this.$_layoutTopPane(t,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=I,t.bodyView.setRect(this._bodyBounds),t.fixedBodyView.setRect(this._fixedBodyBounds),t.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(t,t._contentPane),this.$_layoutFixedPane(t,t._fixedContentPane),this.$_layoutRightPane(t,t._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,t.footView.y=t.footerView.y=t.fixedFooterView.y=t.rightFooterView.y=this._bodyBounds.bottom,e=this._gridBounds.clone()}else this._fitSyncHeight=!1;if(this._topIndex>0){var S=n?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+S<=this._gridBounds.bottom&&(n?this.$_fillBottomAuto(t,p,f,_,this._bodyBounds.height):this.$_fillBottomFixed(t,p,f,_,this._bodyBounds.height)),0==this._topIndex){var R=this._vscrollBar;this.$_recalcScrollInfo(t),this._vscrollBar!=R&&this._fitStyle&&(this.$_layoutBodyRows(t,p,f,_,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}t.fixedBodyView.visible&&t.fixedBodyView.$_resetCellHeights2(this,n),t.bodyView.visible&&t.bodyView.$_resetCellHeights2(this,n),t.rightBodyView.visible&&t.rightBodyView.$_resetCellHeights2(this,n);var T=this._tableItemPoints;(this._dataBounds.height=T[T.length-1],m=this._sumBounds.bottom,g=Math.min(e.height,this._dataBounds.height),this._rowBarBounds.y=m,this._rowBarBounds.height=g,p)&&t._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height);_&&t._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height);(o=t.headView).visible&&(o.setRect(this._headBounds),o.layoutContent(this)),(o=t.rowBarContainer).visible&&(o.setRect(this._rowBarBounds),o.layoutContent(this))},d.prototype.$_layoutBodyRows=function(t,e,i,o,n,r){function s(t,e,i,o){_._items.push(t),v.forEach((function(n,r){n&&n.layoutRow(e,C[r],i,o,t)}))}function l(e,i,o,n){var r=e.height,s=[];if(!t.displayOptions.refCalcHeights||isNaN(r)){for(var a=0;a<S;a++)s[a]=0;v.forEach((function(t){for(var e=t&&t._tbody.children,i=0;e&&i<S;i++)s[i]=Math.round(Math.max(s[i],E,e[o+i].offsetHeight))})),e.heights=s}else if(e.heights)s=e.heights;else{var l=0,h=0;for(a=0;a<S;a++)l+=h=a%2?Math.floor(r/S):Math.round(r/S),s.push(h);s.push(x-l)}r=0;var u=s.reduce((function(t,e){return t+e}),0)+3;if(u>R){var d=R/u;u=R;for(var c=0;c<s.length-1;c++)u-=s[c]=Math.max(E,Math.floor(s[c]*d));s[s.length-1]=Math.max(E,u)}for(c=0;c<S;c++)r+=s[c],n.push(i+=s[c]);return f.setRowHeight(e,r,!1),r}void 0===r&&(r=!0);var h,u=e&&this._fixedCellCount>0?t.fixedBodyView:null,d=i&&this.cellCount>0?t.bodyView:null,c=(o&&this._rightCellCount)>0?t.rightBodyView:null,p=this._dataRowHeights,_=this;if(r&&this.$_checkColumnMerging(t,this.syncHeight()),h=d||u||c){var f=t.itemSource,g=f?Math.min(f.fixedCount,f.itemCount):0,m=this._autoRowHeights,y={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:g,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},v=[u,d,c],C=[[],[],[]];v.forEach((function(t){t&&t._doPrepareContent(_)})),n=this.syncHeight()?1/0:n;var w,x,b,I,E=this._minRowHeight,S=h._trs,R=this._maxHeight>0?Math.min(Math.max(this._maxHeight,E*S),n):n,T=Math.floor(v.reduce((function(t,e){return e?Math.max(e.tableRowCount,t):t}),0)/S),D=0,k=0,M=0,L=[],O=[],F=[];this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[];var P=Math.min(g,this._fixedItemCount,Math.ceil(n/E));if(this._fixedHeight=0,g>0){L.push(k),O.push(M);for(var B=D,V=0;V<P;V++)s(f.getItem(V),y,V,B),B+=S;for(V=0;V<g&&k<n;V++){I=f.getItem(V);var N=S;if(this._items.indexOf(I)<0&&s(I,y,V,D),m)M+=x=l(I,M,D,O);else{w=M,x=this._fixedItemPoints[V+1]-this._fixedItemPoints[V],b=Math.floor(x/N);for(var A=Math.round(x/N),$=I.heights||p,H=0;H<N-1;H++)O.push(M+=$[H]?$[H]:H%2?A:b);O.push(M=w+x)}this._fixedTableRowCount+=N,k+=x,L.push(k),this._fixedDataHeight=k,D+=N}this._fixedHeight=k,k<n&&(x=0,v.forEach((function(t){t&&(x=t.layoutFixedBar(_,D))})),D++,k+=x,M+=x),T=T-this._fixedItemCount-1}this._fixedItemCount=L.length?L.length-1:0;var U=t.itemCount-this._fixedItemCount,G=[k];if(F.push(k),P=Math.min(U,T,Math.ceil((n-k)/E)),this._itemCount=0,this._fullItemCount=0,U>0&&k<n){var W=this._topIndex,j=-1;this._focusIndex&&(j=this._focusIndex.itemIndex)>=this._fixedItemCount&&j<W+this._fixedItemCount&&(W=this._topIndex=j-this._fixedItemCount);for(B=D,V=0;V<P&&V+W<U&&(I=f.getItem(V+W+g));V++)s(I,y,this._fixedItemCount+V,B),B+=I.isData?S:1;for(V=W;V<U&&k<n;V++){N=(I=f.getItem(V+g)).isData?S:1;if(this._items.indexOf(I)<0&&s(I,y,this._fixedItemCount+V-W,D),I.isData)if(m)M+=x=l(I,M,D,F);else{w=M,x=this._itemPoints[V-W+1]-this._itemPoints[V-W],b=Math.floor(x/N);for(A=Math.round(x/N),$=I.heights||p,H=0;H<N-1;H++)F.push(M+=$[H]?$[H]:H%2?A:b);F.push(M=w+x)}else x=this._itemPoints[V-W+1]-this._itemPoints[V-W],F.push(M+=x);this._tableRowCount+=N,k+=x,G.push(k),this._itemCount++,this._dataHeight=k,D+=N}this._fullItemCount=this._itemCount-(k>n?1:0)}m&&v.forEach((function(t){t&&t.$_resetHeights(O,F)})),a.Utils.ieOld&&v.forEach((function(t){t&&t.$_resetCellStyleHeights(O,F)})),this._fixedItemPoints=L,this._itemPoints=G,this._fixedTableRowPoints=O,this._tableRowPoints=F,this._dataBounds.height=G[G.length-1];var z=this._items.length=this.fixedItemCount+this._itemCount;v.forEach((function(t){t&&t.cleanRows(z,D)}))}},d.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){for(var t=this._items,e=this._trs,i=this._fixedTableRowPoints,o=this._fixedTableItemPoints=[0],n=0,r=1,s=this._fixedItemCount;r<=s;r++,n++)o.push(i[r*e]);i=this._tableRowPoints,o=this._tableItemPoints=[i[0]];r=0;var a=0;for(s=this._itemCount;r<s;r++,n++)t[n].isData?o.push(i[a+=e]):o.push(i[++a])}else this._tableItemPoints=this._tableRowPoints.slice()},d.prototype.$_fillBottomFixed=function(t,e,i,o,n){for(var r=this._dataBounds.height,s=this._topIndex,a=0;(r+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&s>=0;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights()},d.prototype.$_fillBottomAuto=function(t,e,i,o,n){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var r=this._tableItemPoints,s=r[1]-r[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights(),s+(r=this._tableItemPoints)[r.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights();break}}},d.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var r=this._fixedItemCount,s=this._itemCount,a=!1,l=0,h=t.length;l<h;l++){var d=t[l],c=d&&d.layout;if(c&&c.canMerge())(p=c.merges)||((p=new n.ColumnMergeManager(c)).clear(),p.initialize(n.GridMergeRule.INIT_COUNT)),p.refreshRooms(e,i,o),p.prepareCells(r,s),p.refreshCells(r,this.topIndex),c.$_setMerged(!0),a=!0;else c.$_setMerged(!1)}var p,_=this.grid.checkBar;_.canMerge()?((p=_.merges)||((p=new u.CheckBarMergeManager(_)).clear(),p.initialize(n.GridMergeRule.INIT_COUNT)),p.refreshRooms(e,i,o),p.prepareCells(r,s),p.refreshCells(r,this.topIndex),_._merged=!0):_._merged=!1;return a},d.prototype.$_checkColumnMerging=function(t,e){void 0===e&&(e=!1);var i=t.fixedOptions,o=i.rowCount,n=this._contentBounds.height/this._minItemHeight-o,r=this._topIndex,s=o>0&&i.mergeRows,a=e?o:o+r,l=e?t.itemCount-1:Math.min(t.itemCount-1,o+r+n-1);l>=0&&this.$_prepareColumnMerges(t.getHorzColumns(),a,l,s)},d}(e.Base);return or.GridLayoutManager=c,or}var rr,sr,ar={},lr={};function hr(){if(rr)return lr;rr=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.SummaryElement=lr.SummaryTableCell=void 0;var t=d,e=Pn(),i=Hn(),o=To(),n=S(),r=xo(),s=pt(),a=rt(),l=lt(),h=mo(),u=function(e){function i(t){var i=e.call(this,t)||this;return i.summaryIndex=0,i.rowIndex=-1,i.rendererClass="",i.style=new r.ColumnSummaryStyle,i.html=void 0,i.text=t[n.Utils.TextProp],i}return t.__extends(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){e.prototype.clear.call(this,t);var i=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),this.text&&(i[n.Utils.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html=""),this},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=h.TextFormatter.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=s.DecimalFormatter.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=a.DateTimeWriter.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=l.BooleanFormatter.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},i.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[n.Utils.TextProp]=(this.text=t)||"")},i.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},i}(tr().TableCell);lr.SummaryTableCell=u;var c=function(i){function r(t,e,o){var n=i.call(this,t,e,o)||this;return n._rowPoints=[],n._cells=[],n}return t.__extends(r,i),r.prototype._doDispose=function(){i.prototype._doDispose.call(this)},r.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}return null},r.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},r.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},r.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},r.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},r.prototype._doDrawCell=function(t,e,i){},r.prototype._doRender=function(t){},r.prototype._getStartCell=function(t){return t.getStartCell()},r.prototype._getEndCell=function(t){return t.getEndCell()},r.prototype._prepareCellContent=function(t,e){return(0,n.getDoc)(t).createElement("div")},r.prototype._doMeasure=function(t,i,o){for(var n=t.layoutManager,r=this._getSummaryRows(n),s=this._getCollection(),a=this._getSummaryHeight(t.heightMeasurer),l=0,h=this._rowPoints=[l],u=0,d=t.layoutManager.getDataRowHeights(r),c=d.reduce((function(t,e){return t+e}),0),p=0,_=s.visibleCount;p<_;p++){var f=s.getVisible(p),g=Math.max(c,f.height);g<=0&&(g=a*r),g=Math.max(f.minHeight,g);var m=f.heights;if(m&&m.length>0){for(var y=0;y<r;y++)m[y]=isNaN(m[y])||null==m?a:m[y];g=m.reduce((function(t,e){return t+e}),0)}for(var v=Math.floor(g/r),C=0,w=0;w<r-1;w++)m&&m.length>0?(l+=m[w],h.push(l),C+=m[w]):d[w]?(l+=Math.round(d[w]*(g/c)),h.push(l),C+=Math.round(d[w]*(g/c))):(l+=v,h.push(l),C+=v);l+=g-C,h.push(l),u+=g}return e.Size.create(i,u)},r.prototype._doPrepareTableExtents=function(t){},r.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var s=i[r].layout.source,a=o.children[r];a&&s&&(a[n.Utils.TextProp]=(s.header.getDisplayText()||s.firstColumn.header.displayText)+" summary")}},r.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),r=this._getSummaryCount(t),s=t.cellLayouts._dataCells,a=s.length,l=this._getFirstCell(t),h=this._getStartCell(t)-l,u=this._getEndCell(t)-l;this._refreshCells(t,r,s,this._tbody),this.$_refreshSpans(t,a*r),this.$_refreshHeadTitle(t,this._thead);for(var d=0;d<r;d++)for(var c=i.getVisible(d),p=0;p<a;p++){var _=this._cells[d*a+p],f=this._getTableRow(t,d*a+p);n.Utils.setClassName(f,c.styleName||"");for(var g=h;g<=u;g++){var m=_[g];if(m.visible){var y=m.layout;if(y.isProxy)m.setText(""),m.setClassName(c.getCellStyleName());else if(y instanceof o.CellLayoutGroupItem)m.setText(""),m.setClassName(c.getCellStyleName());else{var v=c.getCell(y);this._updateCell(e,c,v,m)}}}}},r.prototype._updateCell=function(t,e,i,o){var n=i,r=n.getSummary(),s=e.getCellStyle(i,o.style.clear());if(o.setClassName(s.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(s),r){e.getCellFormatters(r,o);var a=n.getTemplate(o);void 0===a?o.setText(n.getDisplayText(o)):o.setHtml(a)}else o.setText("")},r.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},r.prototype._refreshCells=function(t,e,i,o){for(var n=this._cells,r=o.children,s=r.length,a=i.length,l=this._getFirstCell(t),h=this._getLastCell(t)-l+1,d=n.length;d<s;d++)n.push([]);d=0;for(var c=0;d<e&&c<s;d++)for(var p=0;p<a;p++){for(var _=n[c],f=r[c].children,g=i[p],m=0;m<h;m++){var y=g[m+l],v=_[m];v?v.cell!==f[m]||v.layout!=y&&(v.layout=y,v.clear(!0)):(v=_[m]=new u(f[m])).layout=y,v.spanned=!1,v.summaryIndex=d,v.rowIndex=c}c++;for(m=h;m<_.length;m++)_[m].dispose();_.length=h}for(c=s;c<n.length;c++){var C=n[c];for(m=0;m<C.length;m++)C[m].dispose(),C[m]=null}n.length=s},r.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=this._rowPoints,a=0;a<e;a++)for(var l=this._cells[a],h=l.length,u=o;u<=n;u++){var d=l[u],c=d.layout,p=c.parent,_=p&&p.vertical;if(d.spanned);else if(c.isProxy)d.clear(!1);else{var f=0,g=0,m=this._getSpanOf(c,d.summaryIndex)-1,y=this._getUserSpanOf(c,d.summaryIndex);if(y){var v=y.footerCount||0,C=v>0?v*e:y.rowspan||1,w=y.colspan||1;d.set(w,C,!0);for(var x=0;x<C;x++)for(var b=0;b<w;b++){var I=this._cells[x+a]&&this._cells[x+a][b+u];I&&I!==d&&I.span()}}if(!y&&m>0){var E=0,S=c.vindex+1;if(_)for(;E++<m&&E<r;){if(!(R=p.getVisible(S++)))break;g+=R._dspan,this._cells[a+E][u].span()}else for(;E++<m&&u-o+E<h&&S<p.visibleCount;){var R;if(!(R=p.getVisible(S++)))break;f+=R._cspan,l[u+E].span()}}c.isNull&&d.clear(!0),!y&&d.set(c._cspan+f,c._dspan+g,!0),d.rowSpan>1&&(d.height=s[d.rowIndex+d.rowSpan]-s[d.rowIndex],d.cell.firstElementChild.style.maxHeight=d.height-2+"px")}}},r.prototype._doPrepareTableRow=function(t,e,o,n){i.prototype._doPrepareTableRow.call(this,t,e,o,n)},r}(i.SimpleTableElement);return lr.SummaryElement=c,lr}var ur,dr={},cr={};function pr(){if(ur)return cr;ur=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr._gk=cr.$_instanceOf=void 0;return cr.$_instanceOf=function(t,e){return"object"==typeof t&&Object.prototype.toString.call(t).indexOf(e)>=0},cr._gk="dkdl",cr}var _r,fr={},gr={};function mr(){if(_r)return gr;_r=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.DragTracker=void 0;var t=d,e=function(e){function i(t,i){var o=e.call(this)||this;return o._active=!1,o._completed=!1,o._dragging=!1,o._currentX=0,o._currentY=0,o._container=t,o._name=i,o}return t.__extends(i,e),_dp(i,"container",{get:function(){return this._container}}),_dp(i,"name",{get:function(){return this._name}}),_dp(i,"active",{get:function(){return this._active}}),_dp(i,"dragging",{get:function(){return this._dragging}}),_dp(i,"startWhenCreated",{get:function(){return!1}}),_dp(i,"completed",{get:function(){return this._completed}}),_dp(i,"linkable",{get:function(){return!1}}),_dp(i,"clickable",{get:function(){return!1}}),_dp(i,"scrollable",{get:function(){return!1}}),i.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},i.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},i.prototype.start=function(t,e,i,o){return void 0===o&&(o=null),this.cancel(),!(!this._active||!this._doStart(t,e,i,o))&&(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),!0)},i.prototype.drag=function(t,e,i,o){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i,o)))&&(this._moveFeedback(e,i),!0)},i.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.drop=function(t,e,i,o){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i,o)?(this._doCompleted(t,e,i,o),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.getRequest=function(){return null},i.prototype.getNextRequest=function(t,e){return null},i.prototype.init=function(t,e,i){this._doInit(t,e,i)},_dp(i,"currentX",{get:function(){return this._currentX}}),_dp(i,"currentY",{get:function(){return this._currentY}}),i.prototype._showFeedback=function(t,e){},i.prototype._moveFeedback=function(t,e){},i.prototype._hideFeedback=function(){},i.prototype._doActivate=function(){},i.prototype._doDeactivate=function(){},i.prototype._doStart=function(t,e,i,o){return!0},i.prototype._doDrag=function(t,e,i,o){return!0},i.prototype._doCanceled=function(t,e){},i.prototype._canAccept=function(t,e,i,o){return!0},i.prototype._doCompleted=function(t,e,i,o){},i.prototype._doEnded=function(){},i.prototype._doInit=function(t,e,i){},i}(G().Base);return gr.DragTracker=e,gr}var yr,vr,Cr,wr,xr,br,Ir={},Er={},Sr={},Rr={};function Tr(){return yr||(yr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DataDropOptions=t.DragFeedbackStyle=t.DataDropMode=void 0;var e,i,o=d,n=Rn();!function(t){t.COPY="copy",t.MOVE="move"}(e=t.DataDropMode||(t.DataDropMode={})),function(t){t.LINE="line",t.ROW="row",t.CELL="cell",t.GROUP="group"}(i=t.DragFeedbackStyle||(t.DragFeedbackStyle={}));var r="${rows}",s="${mode}",a=function(t){function n(o){var n=t.call(this,o)||this;return n._dropMode=e.COPY,n._proxyLabel=r+"행 "+s,n._feedbackStyle=i.LINE,n._scroll=!0,n._cursor="move",n._dropOtherElement=!1,n}return o.__extends(n,t),n.prototype._doDispose=function(){t.prototype._doDispose.call(this)},_dp(n,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t}}),_dp(n,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(n,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t}}),_dp(n,"feedbackStyle",{get:function(){return this._feedbackStyle},set:function(t){this._feedbackStyle=t}}),_dp(n,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t}}),_dp(n,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t}}),_dp(n,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t}}),_dp(n,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t}}),_dp(n,"scroll",{get:function(){return this._scroll},set:function(t){this._scroll=t}}),_dp(n,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor=t}}),_dp(n,"dropOtherElement",{get:function(){return this._dropOtherElement},set:function(t){this._dropOtherElement=t}}),n.prototype.getEnabled=function(t,e,i,o,n,r){if(!this.dropOtherElement&&r)return!1;var s=this._dragCallback;if(s)return!1!==s(t.handler,e,r||this.grid.handler,i.index,i.column);if(this.grid===t&&!r){var a=t.layoutManager;return(n-=a.contentBounds.y)<=a.footerBounds.y&&n>=a.summaryBounds.bottom}return!0},n.prototype.getLabel=function(t,i,o,n){var a=this._labelCallback,l=void 0;return a&&(l=a(t.handler,i,n||this.grid.handler,o.index,o.column)),void 0===l&&this._proxyLabel&&(l=(l=(l=(l=this._proxyLabel.replace(r,i.length+"")).replace(s,t==this.grid||this.dropMode==e.MOVE?"이동":"복사")).replace("${from}",i[0]+"")).replace("${to}",o.index+"")),l},n}(n.GridBaseOptions);t.DataDropOptions=a}(Rr)),Rr}function Dr(){if(vr)return Sr;vr=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.RowMoveTracker=Sr.HeaderResizeTracker=Sr.RowResizeTracker=Sr.ColumnMoveTracker=Sr.ColumnResizeTracker=Sr.GridDragTracker=void 0;var t=d,e=mr(),i=un(),o=S(),n=Tr(),r=function(e){function i(t,i){var o=e.call(this,t.container,i)||this;return o._grid=t,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"startWhenCreated",{get:function(){return!1}}),i}(e.DragTracker);Sr.GridDragTracker=r;var s=function(e){function i(t,i){var o=e.call(this,t.layout.grid,"columnResizeTracker")||this;o._request=t,o._feedback=i;var n=t.layout;return o._layoutX=t.x+t.offset-n.domWidth,o._offset=t.offset,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=null,this._feedback=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.contentBounds.y,s=n.contentBounds.bottom;return this._feedback.resize(2,s-r),this._feedback.move(e-this._offset,r),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(t,e,i,o){this._request.layout;var n=this.grid.displayOptions.minCellWidth;return(e-=this._offset)>=this._layoutX+n&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},i.prototype._doEnded=function(){var t=this.grid.displayOptions.minCellWidth,e=Math.max(t,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(e,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},i}(r);Sr.ColumnResizeTracker=s;var a=function(e){function i(t,i,o){var n=e.call(this,t.layout.grid,"columnMoveTracker")||this;return n._timer=null,n._colLoop=0,n._colPrevLoop=0,n._interval=0,n._request=t,n._layout=t.layout,n._cellFeedback=i,n._feedback=o,n}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,o,n){var r=this.grid,s=r.layoutManager,a=this._layout.parent,l=this._request.offset,h=s.getHeaderCellRect(this._layout,!0);a.horizontal?(this._offset=l>0?l:e-h.x,this._feedback.setBounds(h.x,h.y,i.WING_SIZE,h.height)):(this._offset=l>0?l:o-h.y,this._feedback.setBounds(h.x,h.y,h.width,i.WING_SIZE)),this._request.offset=this._offset,this._feedback.visible=!1,this._cellFeedback.setBounds(h.x,h.y,h.width,h.height),this._cellFeedback.model=r.header.getCell(this._layout),this._cellFeedback.dragging=!1,r.addFeedbackElement(this._cellFeedback),r.addFeedbackElement(this._feedback);var u=this._feedback._dom.style;return u.borderLeft=u.borderRight=u.borderTop=u.borderBottom="",!0},i.prototype._doDrag=function(t,e,i,n){var r=this.grid,s=this._layout.parent,a=this.grid.layoutManager;if(i<a.contentBounds.y&&r.canGrouping())return!1;if(e<a.gridBounds.x||e>a.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var l=a.getHeaderCellAt(e,i),h=this.$_findTarget(l);o.Utils.log("MOVE: ",this._layout.displayText+" => "+(null==h?void 0:h.displayText)),h&&!r.canMoveToLayout(h)&&(h=null),this.$_setTarget(h),this._cellFeedback.dragging=!0,s.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},i.prototype._doCanceled=function(){this.$_stopTimer()},i.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},i.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},i.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},i.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),o>0&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&t.leftPos>0&&(t.leftCell-=1)),this.$_setTarget(null)},i.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},i.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,n=o._dom.style,r=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=t,o.visible=null!=t&&t.parent===i&&t!==e){var s=r.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;n.height=s.height+"px",t.hcol<a?(n.borderRight="none",n.borderLeft="",o.x=s.x):t.hcol>a&&(n.borderLeft="none",n.borderRight="",o.x=s.right-o.width)}else{var l=e.row;n.width=s.width+"px",t.row<l?(n.borderBottom="none",n.borderTop="",o.y=s.y):t.row>l&&(n.borderTop="none",n.borderBottom="",o.y=s.bottom-o.height)}}},i.WING_SIZE=7,i}(r);Sr.ColumnMoveTracker=a;var l=function(e){function i(t,i){var o=e.call(this,t.grid,"rowResizeTracker")||this;return o._request=t,o._feedback=i,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=null,this._feedback=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},i.prototype._doCompleted=function(t,e,i,o){var n=this.grid,r=n.displayOptions,s=Math.max(r.minRowHeight,i-this._request.offset-this._request.rowTop);(s=0===r.maxRowHeight?s:Math.min(r.maxRowHeight,s))>=n.layoutManager.bodyBounds.height&&(s=n.layoutManager.bodyBounds.height-1),this._request.variable?n.setRowHeight(this._request.itemIndex,s):r.rowHeight=s},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(r);Sr.RowResizeTracker=l;var h=function(e){function i(t,i){var o=e.call(this,t.grid,"rowResizeTracker")||this;return o._request=t,o._feedback=i,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=null,this._feedback=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},i.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},i.prototype._doCompleted=function(t,e,i,o){var n=this.grid.header,r=Math.max(n.minHeight,i-this._request.offset-this._request.top);n.height=r},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(r);Sr.HeaderResizeTracker=h;var u=function(e){function r(t,i,o){var n=e.call(this,t.grid,"rowMoveTracker")||this;return n._timer=null,n._request=t,n._proxy=i,n._line=o,n}return t.__extends(r,e),r.updateLineFeedback=function(t,e,i,r,s,a,l,h,u){var d={index:-1,position:0,column:void 0};if(a<0||l<0||a>=t.width||l>=t.height)return s.visible=!1,d;var c=s.feedbackStyle=t.dataDropOptions.feedbackStyle,p=t.layoutManager;l-=p.contentBounds.y;var _=0,f=p.contentBounds.right,g=-1,m=-1,y=0,v=2,C=t.cellToIndex(u),w=!1,x=o.Utils.included(c,n.DragFeedbackStyle.CELL,n.DragFeedbackStyle.GROUP);if(l<p.summaryBounds.bottom)m=Math.max(0,p.topIndex-1),g=p.getTableItemTop(0);else if(l>=p.footerBounds.y)m=p.topIndex+p.fullItemCount,g=p.getTableItemBottom(p.fullItemCount);else{var b=l-p.summaryBounds.bottom,I=p.getTableItemIndex(b),E=p.getTableItemHeight(I);if((m=I)>=p.fixedItemCount&&(m+=p.topIndex),m!=e||x){var S=p.getTableItemTop(I);if(c===n.DragFeedbackStyle.ROW){g=S,v=E;var R=Math.floor(E/3);b<S+R?y=-1:b>S+2*R&&(y=1)}else if(c===n.DragFeedbackStyle.GROUP){if(C&&t.isValid(C)){var T=p.getDataRect(C.layout.root),D=C.layout.root.first;v=E,g=S,f=(_=T.x)+T.width,d.column=D.getDataColumn().name,w=D!==i}}else if(c===n.DragFeedbackStyle.CELL){if(C&&t.isValid(C)){var k=p.getBodyView(C);g=(T=k.getCellRectAt(p,C,!0)).y,v=(T=k.boundsByContainer(T)).height,f=(_=T.x)+T.width,w=C.layout!==i,d.column=C.layout.getDataColumn().name}}else b<S+E/2?(g=S,m>e&&(m=Math.max(p.topIndex,m-1)),y=-1):((g=I>-1?p.getTableItemBottom(I):h?0:-1)>=0&&m<e&&m++,y=1)}}return g+=p.contentBounds.y+p.summaryBounds.bottom,s.visible=m>e?m>e+r-1:m>=0&&(m!=e||w),s.visible?(s.resize(f-_,v),0==t.itemCount&&(g+=p.defaultItemHeight),s.move(_,g)):m=-1,t.dataDropOptions.scroll&&(l<p.summaryBounds.bottom?t.topIndex--:l>=p.footerBounds.y&&t.topIndex++),d.index=m,d.position=y,d},r.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,e.prototype._doDispose.call(this)},_dp(r,"request",{get:function(){return this._request}}),_dp(r,"sourceItems",{get:function(){return this._sourceItems}}),r.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},r.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},_dp(r,"startWhenCreated",{get:function(){return!0}}),_dp(r,"linkable",{get:function(){return!0}}),r.prototype.getRequest=function(){return this._request},r.prototype._doStart=function(t,e,r,s){var a=this.grid,l=(0,o.getDoc)(t),h=a.selections.count;if(this._sourceItems=[],0===h||(0,i.isColumnSelection)(a.selections.getItem(0)))if(a.displayOptions.selectionStyle===i.SelectionStyle.NONE)a.selections.selectBlock(a.focusedIndex,!0);else switch(a.dataDropOptions.feedbackStyle){case n.DragFeedbackStyle.LINE:case n.DragFeedbackStyle.ROW:a.selections.selectRow(this._request.itemIndex,!0);break;case n.DragFeedbackStyle.CELL:case n.DragFeedbackStyle.GROUP:a.selections.selectBlock(a.focusedIndex,!0)}if(a.selections.count>=1){this._sourceItems=a.selections.getItem(0).getItemIndices(),l.body.appendChild(this._proxy._dom),a.addFeedbackElement(this._line);var u=this.$_updateLine(e,r,t);return this._proxy.setZIndex(a.displayOptions.baseZindex+6),this.$_updateProxy(e,r,u,t),!0}return!1},r.prototype._doDrag=function(t,e,i,o){var n=this.grid.layoutManager;t=this.$_getTarget(o,t);var r=this.$_updateLine(e,i,t);return this.$_updateProxy(e,i,r,t),(i-=n.contentBounds.y)>n.footerBounds.y||i<n.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},r.prototype._doCompleted=function(t,e,i,r){var s=this._targetRow,a=this.grid;t=this.$_getTarget(r,t);var l,h=a.container.findContainer(null,t);if(h?s.index>=0&&(l=a.canMoveRow(!0,!1)&&a.dataDropOptions.getEnabled(a,this._sourceItems,s,e,i)):l=a.canMoveRow(!1,!0)&&a.dataDropOptions.getEnabled(a,this._sourceItems,s,e,i,t),l){var u=this._request.itemIndex,d=a.dataDropOptions.callback;if(d)h?d(a.handler,this._sourceItems,a.handler,s.index,s.column):d(a.handler,this._sourceItems,t,null,null);else if(h===a.container){var c=s.index>u?s.index-(u+this._sourceItems.length-1):s.index-u,p=a.dataDropOptions.feedbackStyle;o.Utils.included(p,n.DragFeedbackStyle.CELL,n.DragFeedbackStyle.GROUP)||a.moveSelection(c,"mouseup")}}},r.prototype._doCanceled=function(t,e){},r.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},r.prototype.$_getTarget=function(t,e){var i;if(o.Utils.isMobile()){var n=(0,o.getDoc)(t.target);i=n&&n.elementFromPoint(t.clientX,t.clientY)}return i||e},r.prototype.$_updateLine=function(t,e,i){return this._targetRow=r.updateLineFeedback(this.grid,this._request.itemIndex,this._request.layout,this._sourceItems.length,this._line,t,e,!1,i)},r.prototype.$_updateProxy=function(t,e,i,n){var r=this.grid,s=r.container.findContainer(null,n),a=s!==r.container,l=o.Utils.getOffset(r.container._containerDom);l.y+=e,l.x+=t+20;var h=!0;if(!a)for(var u=r.selections.getItem(0).getItems(),d=u[0].level,c=1,p=u.length;c<p;c++)if(u[c].level!==d){h=!1;break}if(h=s?h&&r.canMoveRow(!0,a)&&(a||r.dataDropOptions.getEnabled(r,this._sourceItems,i,t,e)):h&&r.canMoveRow(!1,!0)&&r.dataDropOptions.getEnabled(r,this._sourceItems,i,t,e,n),this._proxy.move(l.x,l.y),this._proxy.setEnabled(void 0!==h?h:i.index>=0),!a||!s){var _=r.dataDropOptions.getLabel(r,this._sourceItems,i,!s&&n);this._proxy.setLabel(_)}return this._proxy.draw(),h},r.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},r.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},r.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e,null)},r}(r);return Sr.RowMoveTracker=u,Sr}function kr(){if(Cr)return Er;Cr=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.ColumnsSelectTracker=Er.RowsSelectTracker=Er.BlockSelectTracker=Er.SelectTracker=void 0;var t=d,e=un(),i=Dr(),o=Do(),n=function(e){function i(t,i,o,n){var r=e.call(this,t.index.grid,i)||this;return r._request=t,r._currX=o,r._currY=n,r}return t.__extends(i,e),i.prototype._doDispose=function(){this._request.dispose(),this._request=null,e.prototype._doDispose.call(this)},_dp(i,"startWhenCreated",{get:function(){return!1}}),_dp(i,"clickable",{get:function(){return!0}}),_dp(i,"scrollable",{get:function(){var t=this._getItem().getBounds();return t.top===t.bottom}}),i.prototype.getRequest=function(){return this._request},i.prototype._doCanceled=function(){},i.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},i.prototype.spanHome=function(t){var e=this.grid;e.getBodyViewAt(t).spanHead(e.layoutManager,t)},i.prototype.spanRight=function(t){var e=this.grid;e.getBodyViewAt(t).spanRight(e.layoutManager,t)},i}(i.GridDragTracker);Er.SelectTracker=n;var r=function(i){function n(t,e,o){var n=i.call(this,t,"blockSelectTracker",e,o)||this;return n._timer=null,n._rowPrevLoop=0,n._rowLoop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}return t.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},n.prototype._doStart=function(t,i,o,n){var r=this.grid,s=r.selections,a=r.layoutManager,l=n&&n.shiftKey,h=n&&(n.ctrlKey||n.metaKey),u=this._request.index;if(a.isMergedCell(u)&&!(u=r.pointToIndex(t,i,o,!0)).layout)return!1;if(l)this._item=s.count>0&&s.lastItem();else{var d=void 0;h||1===s.count&&s.lastItem()instanceof e.BlockSelection?d=s.lastItem():s.clear(),d&&d instanceof e.BlockSelection?this._item=d:this._item=s.add(u,u,e.SelectionStyle.BLOCK)}return!!this._item},n.prototype._doDrag=function(t,e,i,n){if(this._item){var r=this.grid;if(r.displayOptions.selectAndImmediateDrag)return!1;var s=r.layoutManager;if(this._currX=e,this._currY=i,i-s.contentBounds.y>s.footerBounds.y||i<s.gridBounds.y||e<s.gridBounds.x||e>s.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var a=r.pointToIndex(t,e,i,!0);a.column&&a.itemIndex>=0&&(o.CellIndex.compareHorz(a,this._item.startIndex)>=0?(this.spanRight(a),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(a))}return!0}},n.prototype._doEnded=function(){this.$_stopTimer(),i.prototype._doEnded.call(this)},n.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,null,t,e)},n.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},n.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},n.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,n=0,r=0;i>o.footerBounds.y?(r=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-r,this._rowLoop++):i<o.gridBounds.y&&(r=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-r,this._rowLoop++),e>o.clientRect.right?(n=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-n,this._colLoop++):e<o.gridBounds.x&&(n=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-n,this._colLoop++);var s=!1;if(Math.max(n,r)>0&&(this._interval=4-Math.max(n,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&t.leftPos>0&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},n}(n);Er.BlockSelectTracker=r;var s=function(i){function o(t,e,o){var n=i.call(this,t,"rowsSelectTracker",e,o)||this;return n._timer=null,n._prevLoop=0,n._loop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}return t.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},o.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},o.prototype._doStart=function(t,i,o,n){var r=this.grid,s=r.selections,a=r.layoutManager,l=n&&n.shiftKey,h=n&&(n.ctrlKey||n.metaKey),u=this._request.index;if(a.isMergedCell(u)&&(u=r.pointToIndex(t,i,o,!0)),l)this._item=s.count>0&&s.lastItem();else{var d=void 0;h||1===s.count&&s.lastItem()instanceof e.RowSelection?d=s.lastItem():s.clear(),d&&d instanceof e.RowSelection?this._item=d:this._item=s.add(u,u,e.SelectionStyle.ROWS)}return!!this._item},o.prototype._doDrag=function(t,e,i,o){if(this._item){var n=this.grid;if(n.displayOptions.selectAndImmediateDrag)return!1;var r=n.layoutManager;if(this._currX=e,this._currY=i,i>r.footerBounds.y||i<r.gridBounds.y||e<0||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=this.grid.pointToIndex(t,e,i,!1);s.itemIndex>=0&&this._item.resizeTo(s)}return!0}return!1},o.prototype._doEnded=function(){this.$_stopTimer(),i.prototype._doEnded.call(this)},o.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},o.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},o.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;(n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._loop++):n<r.gridBounds.y&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval)?(this._prevLoop=this._loop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},o}(n);Er.RowsSelectTracker=s;var a=function(i){function o(t,e,o){var n=i.call(this,t,"columnsSelectTracker",e,o)||this;return n._timer=null,n._prevLoop=0,n._loop=0,n._rowPrevLoop=0,n._rowLoop=0,n._interval=0,n}return t.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(o,"startWhenCreated",{get:function(){return!0}}),o.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},o.prototype._doStart=function(t,i,o,n){var r,s=this.grid,a=s.selections,l=s.layoutManager,h=n&&n.shiftKey,u=n&&(n.ctrlKey||n.metaKey),d=this._request.index;return l.isMergedCell(d)&&(d=s.pointToIndex(t,i,o,!0)),h?r=a.count>0&&a.lastItem():u||1===a.count&&a.lastItem()instanceof e.ColumnSelection?r=a.lastItem():a.clear(),r&&r instanceof e.ColumnSelection&&r.containsLayout(d.layout)?this._item=r:this._item=a.add(d,d,e.SelectionStyle.COLUMNS),!!this._item},o.prototype._doDrag=function(t,e,i,o){if(this._item){var n=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<n.gridBounds.x||e>n.clientRect.right||i>n.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!0);null!=r.column&&this._item.resizeTo(r)}return!0}return!1},o.prototype._doEnded=function(){this.$_stopTimer(),i.prototype._doEnded.call(this)},o.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},o.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},o.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;(o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._loop++):o<r.gridBounds.x&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval)?(this._prevLoop=this._loop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):n<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},o}(n);return Er.ColumnsSelectTracker=a,Er}function Mr(){if(wr)return Ir;wr=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.EditRequest=Ir.VisualTool=void 0;var t=d,e=G(),i=S(),o=kr(),n=function(e){function n(t,i){var o=e.call(this)||this;return o._clickX=0,o._clickY=0,o._mouseX=0,o._mouseY=0,o._longTimerHander=function(){o._longPressed=!0},o._owner=t,o._name=i,o._previous=null,o}return t.__extends(n,e),n.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,e.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"previous",{get:function(){return this._previous}}),_dp(n,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())}}),_dp(n,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging}}),_dp(n,"mouseX",{get:function(){return this._mouseX}}),_dp(n,"mouseY",{get:function(){return this._mouseY}}),n.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},n.prototype.activate=function(t){this._doActivated(t)},n.prototype.deactivate=function(){this._doDeactivated()},n.prototype.keyDown=function(t){return this._doKeyDown(t)},n.prototype.keyUp=function(t){return this._doKeyUp(t)},n.prototype.keyPress=function(t){return this._doKeyPress(t)},n.prototype.pointerDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._longPressed=!1,this._touchEvents=[{x:e,y:i,t:t.timeStamp}],this.dragging&&this._stopDragTracker(e,i,!1,t),this._doPointerDown(t)},n.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._doMouseDown(t),this.dragging&&this._stopDragTracker(e,i,!1,t)},n.prototype.pointerCancel=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!0,t):(this._dragTracker instanceof o.SelectTracker&&this._dragTracker._doEnded(),this._dragTracker=null),this._touchEvents=[],this._doPointerCancel(t)},n.prototype.dragFrom=function(t,e){},n.prototype.dropFrom=function(t,e){},n.prototype.cancelFrom=function(t){},n.prototype.pointerMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,n=t.buttons;if(o){if(o.dragging){if(1===n){if(!o.drag(this._mouseEventTarget,e,i,t)){var r=o.getNextRequest(e,i);r&&(this._stopDragTracker(e,i,!0,t),this.dragTracker=this._getDragTracker(r,e,i),this._startDragTracker(e,i,t))}}else this._stopDragTracker(e,i,!0,t);return}if(Math.abs(e-this._clickX)>=3||Math.abs(i-this._clickY)>=3){if(1===n)return void this._startDragTracker(e,i,t);this._stopDragTracker(e,i,!0,t),this._dragTracker=null}}this._doPointerMove(t)},n.prototype.pointerUp=function(t){var e=this._mouseX=t.mouseX,n=this._mouseY=t.mouseY;clearTimeout(this._longTimer),this._longPressed=!1,this._touchEvents&&this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),this.dragging?(i.Utils.isMobile()&&"pointerup"===t.type&&this._checkSwipe(t),this._stopDragTracker(e,n,!1,t),this._dragTracker.clickable&&this._doPointerUp(t)):(this._dragTracker instanceof o.SelectTracker&&this._dragTracker._doEnded(),this._dragTracker=null,this._doPointerUp(t)),this._touchEvents=[]},n.prototype.mouseEnter=function(t){this._doMouseEnter(t)},n.prototype.mouseLeave=function(t){this._doMouseLeave(t)},n.prototype.mouseOver=function(t){this._doMouseOver(t)},n.prototype.mouseOutside=function(){this._doMouseOutside()},n.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},n.prototype.contextMenu=function(t){return this._doContextMenu(t)},n.prototype.click=function(t){this._doClick(t)},n.prototype.dblclick=function(t){this._doDblClick(t)},n.prototype.setFocus=function(t){this._doSetFocus(t)},n.prototype.focusLeave=function(t){this._doFocusLeave(t)},n.prototype.resetFocused=function(){},n.prototype.touchMove=function(t){return this._doTouchMove(t)},n.prototype._checkSwipe=function(t){},_dp(n,"mouseEventTarget",{get:function(){return this._mouseEventTarget}}),n.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},n.prototype._doActivated=function(t){},n.prototype._doDeactivated=function(){},n.prototype._doKeyDown=function(t){return!1},n.prototype._doKeyUp=function(t){return!1},n.prototype._doKeyPress=function(t){return!1},n.prototype._doPointerDown=function(t){},n.prototype._doPointerCancel=function(t){},n.prototype._doPointerMove=function(t){},n.prototype._doPointerUp=function(t){},n.prototype._doMouseDown=function(t){},n.prototype._doMouseEnter=function(t){},n.prototype._doMouseLeave=function(t){},n.prototype._doMouseOver=function(t){},n.prototype._doMouseOutside=function(){},n.prototype._doMouseWheel=function(t){return!1},n.prototype._doContextMenu=function(t){},n.prototype._doClick=function(t){},n.prototype._doDblClick=function(t){},n.prototype._doSetFocus=function(t){},n.prototype._doFocusLeave=function(t){},n.prototype._getDragTracker=function(t,e,i){return null},n.prototype._startDragTracker=function(t,e,i){void 0===i&&(i=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},n.prototype._stopDragTracker=function(t,e,i,o){if(this.dragging){var n=this._dragTracker;i?n.cancel():n.drop(this._mouseEventTarget,t,e,o),this._doDragTrackerFinished(n,i)}},n.prototype._doDragTrackerStarted=function(t){},n.prototype._doDragTrackerFinished=function(t,e){},n.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},n.prototype._doTouchMove=function(t){return!0},n}(e.Base);Ir.VisualTool=n;var r=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),_dp(i,"cursor",{get:function(){return"default"}}),_dp(i,"source",{get:function(){}}),_dp(i,"selectable",{get:function(){return!1}}),_dp(i,"dblClickable",{get:function(){return!1}}),i}(e.Base);return Ir.EditRequest=r,Ir}function Lr(){return xr||(xr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollTipView=t.ScrollTool=t.ScrollTrackTimer=t.ScrollButtonTimer=t.ScrollThumbTracker=t.ScrollBar=t.ScrollThumb=t.ScrollButton=t.ScrollTrack=t.ScrollEdge=t.ScrollEventType=void 0;var e,i=d,o=hn(),n=mr(),r=Mr(),s=et(),a=G(),l=S();!function(t){t.LINE="line",t.PAGE="page",t.THUMB_TRACK="thumbTrack",t.THUMB_END="thumbEnd",t.SCROLL_END="scrollEnd"}(e=t.ScrollEventType||(t.ScrollEventType={}));var h=function(t){function e(e,i,o){var n=t.call(this,e,o)||this;return n._scrollBar=i,n}return i.__extends(e,t),e.prototype._doDispose=function(){this._scrollBar=null,t.prototype._doDispose.call(this)},_dp(e,"scrollBar",{get:function(){return this._scrollBar}}),_dp(e,"vertical",{get:function(){return this._scrollBar.vertical}}),e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doRender=function(t){},e.prototype._changed=function(){this.invalidate()},e}(o.VisualElement),u=function(t){function e(e){return t.call(this,e,null,"scrollEdgeView")||this}return i.__extends(e,t),e.prototype._getCssSelector=function(){return"rg-scrolledge"},e}(h);t.ScrollEdge=u;var c=function(t){function e(e){return t.call(this,e.doc,e,"scrollTrackView")||this}return i.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-scrolltrack"},e}(h);t.ScrollTrack=c;var p=function(t){function e(e,i){var o=t.call(this,e.doc,e,"scrollButtonView")||this;return o._enabled=!0,o._far=i,o}return i.__extends(e,t),_dp(e,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(e,"far",{get:function(){return this._far}}),e.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},e}(h);t.ScrollButton=p;var _=function(t){function e(e){return t.call(this,e.doc,e,"scrollThumbView")||this}return i.__extends(e,t),e.prototype._getCssSelector=function(){return"rg-scrollthumb"},e}(h);t.ScrollThumb=_;var f=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e.doc,"scrollBarView")||this;return o._lineScrollSize=1,o._pageScrollSize=1,o._minThumbSize=20,o._min=0,o._max=0,o._pos=0,o._page=0,o._maxPosition=0,o._buttonSize=20,o._needLayout=!0,o._tipView=null,o._container=e,o._vertical=i,o._track=new c(o),o.addChild(o._track),o._thumb=new _(o),o.addChild(o._thumb),o._nearButton=new p(o,!1),o.addChild(o._nearButton),o._farButton=new p(o,!0),o.addChild(o._farButton),o}return i.__extends(e,t),e.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),t.prototype._doDispose.call(this)},_dp(e,"container",{get:function(){return this._container}}),_dp(e,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)}}),_dp(e,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)}}),_dp(e,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())}}),_dp(e,"vertical",{get:function(){return this._vertical}}),_dp(e,"pos",{get:function(){return this._pos}}),_dp(e,"maxPosition",{get:function(){return this._maxPosition}}),_dp(e,"buttonSize",{get:function(){return this._buttonSize}}),_dp(e,"tipView",{set:function(t){this._tipView=t}}),e.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},e.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},e.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},e.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var o=this._tipView.width();e=this.x-o-5,i=this._thumb.y}else{var n=this._tipView.height();e=this._thumb.x,i=this.y-n-5}this._tipView.move(e,i)}},e.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},e.prototype.draw=function(){t.prototype.draw.call(this)},e.prototype._doDraw=function(t){},e.prototype._doSizeChanged=function(){this.invalidateLayout()},e.prototype.invalidateLayout=function(){this._needLayout=!0,t.prototype.invalidateLayout.call(this)},e.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,n=(t?i:o)-2*e,r=Math.min(n,Math.max(this._minThumbSize,Math.floor(n*this._page/(this._max-this._min+1)))),s=e+Math.min(n-r,Math.max(0,Math.floor((n-r)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),r<=n&&this._thumb.setBounds(2,s,o-4,r)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),r<=n&&this._thumb.setBounds(s,2,r,i-4))},e.prototype._doScroll=function(t,i,o){this.fireEvent(e.SCROLLED,t,i,o)},e.SCROLLED="onScrollBarScrolled",e}(o.VisualElement);t.ScrollBar=f;var g=function(t){function o(e){return t.call(this,e,"scrollThumbTracker")||this}return i.__extends(o,t),o.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),t.prototype._doDispose.call(this)},_dp(o,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t}}),_dp(o,"startWhenCreated",{get:function(){return!0}}),o.prototype._doStart=function(t,e,i,o){var n=this._thumb.scrollBar,r=n.containerToElement(e,i);return n.vertical?this._offset=r.y-this._thumb.y:this._offset=r.x-this._thumb.x,l.Utils.isSlotMode()&&o instanceof PointerEvent&&t.setPointerCapture(o.pointerId),!0},o.prototype._doDrag=function(t,i,o,n){return this.$_doScroll(i,o,e.THUMB_TRACK)},o.prototype._doCompleted=function(t,i,o,n){return l.Utils.isSlotMode()&&n instanceof PointerEvent&&t.releasePointerCapture(n.pointerId),this.$_doScroll(i,o,e.THUMB_END)},o.prototype._doCanceled=function(t,e){},o.prototype._doEnded=function(){},o.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,n=o._maxPosition-o._min+1,r=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*r-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=o.width-2*r-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},o}(n.DragTracker);t.ScrollThumbTracker=g;var m=function(t){function o(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return i.__extends(o,t),_dp(o,"active",{get:function(){return void 0!==this._timer}}),o.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},o.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},o.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},o.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,i=e.LINE;this._scrollBar._doScroll(i,this._scrollBar.lineScrollSize*t,0)},o}(s.EventAware);t.ScrollButtonTimer=m;var y=function(t){function o(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return i.__extends(o,t),_dp(o,"active",{get:function(){return this._active}}),o.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0;var n=this._scrollBar.containerToElement(i,o);this._mouseX=n.x,this._mouseY=n.y,this.$_fireEvent()},o.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},o.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},o.prototype.$_fireEvent=function(){var t=null,i=0,o=this._scrollBar._thumb;if(this._scrollBar.vertical){var n=this._mouseY;this._far&&n>o.bottom?(t=e.PAGE,i=1):!this._far&&n<o.y&&(t=e.PAGE,i=-1)}else{var r=this._mouseX;this._far&&r>o.right?(i=1,t=e.PAGE):r<o.x&&(t=e.PAGE,i=-1)}0!=i&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*i,0)},o}(a.Base);t.ScrollTrackTimer=y;var v=function(t){function o(e){var i=t.call(this,e,"scrollTool")||this;return i._buttonTimer=new m,i._trackTimer=new y,i._thumbTracker=new g(e),i}return i.__extends(o,t),o.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),t.prototype._doDispose.call(this)},o.prototype._doPointerDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(o instanceof h)if(this._clickElement=o,o instanceof p)this._buttonTimer.start(o);else if(o instanceof _)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof c){var n=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,n,e,i)}},o.prototype._doPointerMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement;1===t.buttons?o instanceof p&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof c&&this._trackTimer.active&&this._trackTimer.move(e,i):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},o.prototype._doPointerUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(e.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},o}(r.VisualTool);t.ScrollTool=v;var C=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i._element=i.$_createElement(e.doc),i}return i.__extends(e,t),e.prototype._doDispose=function(){this._element=l.Utils.detach(this._element),this._container=null,t.prototype._doDispose.call(this)},e.prototype.show=function(){this._container._container.appendChild(this._element)},e.prototype.hide=function(){l.Utils.detach(this._element)},e.prototype.move=function(t,e){l.Utils.move(this._element,t,e)},e.prototype.setText=function(t){this._element.innerHTML=t},e.prototype.width=function(){return this._element.offsetWidth},e.prototype.height=function(){return this._element.offsetHeight},e.prototype.getRect=function(){return this._element.getBoundingClientRect()},e.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},e}(a.Base);t.ScrollTipView=C}(fr)),fr}function Or(){if(br)return dr;br=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.VisualContainer=void 0;var t=d,e=pr(),i=et(),o=hn(),n=S(),r=E(),s=Lr(),a=ln(),l=function(e){function i(t,i,o){var n=e.call(this,t,i)||this;return n._contaner=o,n}return t.__extends(i,e),_dp(i,"container",{get:function(){return this._contaner}}),i.prototype._getCssSelector=function(){},i.prototype._doDraw=function(t){},i}(o.VisualElement),h=function(i){function o(t,e,n){var r=i.call(this)||this;return r._disabled=!1,r._updateRequested=!1,r._layoutNeeded=!1,r._invalidated=!1,r._currentX=0,r._currentY=0,r._defaultCursor="default",r._drawing=!1,r._eventHandlers={},r._eventNodes=[],r._containerRender=r._render.bind(r),r._scrollTool=new s.ScrollTool(r),r._cursor="default",r._testWidth=NaN,r._testHeight=NaN,r.prepareContainer(t,e,n),r.invalidateLayout(),r._registerEventHandlers(r._rootElement._dom,r._containerDom),r.activeTool=r._defaultTool=r._createDefaultTool(),o.$_Containers[r.$_hash]=r,r}return t.__extends(o,i),o.prototype.getMouseContainer=function(){return o.$_Containers[o.$_mouseContainer]},o.prototype.findContainer=function(t,e){for(var i in o.$_Containers){var n=o.$_Containers[i];if(n.contains(e||t.target))return n}return null},o.getActiveGrid=function(){var t=o.$_Containers[o.$_ActiveGrid];return t&&t._gridView},o.setActiveGrid=function(t){if(t!==o.$_ActiveGrid){var e=o.$_Containers[t],i=void 0;if(e=e&&e._gridView,window.RealGrid&&(i=window.RealGrid.onActiveGridChanged)){var n=o.$_Containers[o.$_ActiveGrid];i((n=n&&n._gridView)&&n.handler,e&&e.handler)}e._fireGridActivated()}o.$_ActiveGrid=t},o.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),(0,e.$_instanceOf)(t,"HTMLDivElement"))for(var i in o.$_Containers){var n=o.$_Containers[i];if(n._containerDiv===t)return n.gridView}},o.clearContainer=function(t){o[t]&&delete o[t],o.$_ActiveGrid===t&&(o.$_ActiveGrid=null)},o.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},o.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),n.Utils.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,n.Utils.clearElements(this._containerDiv),i.prototype._doDispose.call(this),delete o.$_Containers[this.$_hash]},_dp(o,"doc",{get:function(){return this._doc}}),_dp(o,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())}}),_dp(o,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),this._activeTool=t,t&&t.activate(e)}}}),_dp(o,"defaultTool",{get:function(){return this._defaultTool}}),_dp(o,"measurer",{get:function(){return this._measurer}}),o.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},o.prototype.getTableCell=function(t){return null},o.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},o.prototype.setFocus=function(){this._containerDom.focus()},o.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(n.Utils.getTimer())},o.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},o.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},o.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new r.Rectangle(t.left,t.top,t.width,t.height)},o.prototype.getHtml=function(){return this._containerDom.outerHTML},o.prototype.addElement=function(t){return this._rootElement.addChild(t)},o.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},o.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},o.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var o=this._textMeasurer.style;return i?(o.fontSize=i.fontSize,o.fontFamily=i.fontFamily,o.fontWeight=i.fontWeight,o.fontStyle=i.fontStyle):(o.removeProperty("font-size"),o.removeProperty("font-family"),o.removeProperty("font-weight"),o.removeProperty("font-style")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},o.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=this._checkMeasurer.getBoundingClientRect(),e=(0,n.getDocWin)(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},o.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},o.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},o.prototype.contains=function(t){var e=t;if(e instanceof(0,n.getDocWin)(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},o.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},o.prototype.offsetDomPosition=function(t,e){var i=(0,n.getDocWin)(this._doc),o=this._containerDom.getBoundingClientRect(),r=t.getBoundingClientRect(),s=i.getComputedStyle(this._containerDom);return e.x=r.left-o.left-Math.round(parseFloat(s.borderLeftWidth)),e.y=r.top-o.top-Math.round(parseFloat(s.borderTopWidth)),e},o.prototype.cancelOtherContainer=function(t){for(var e in o.$_Containers){var i=o.$_Containers[e];if(i!==this){var n=i._activeTool;n&&n.cancelFrom(t)}}},o.prototype.getContainerWidth=function(){return this._containerDiv.getBoundingClientRect().width},o.prototype._doDisabledChanged=function(){},o.prototype.prepareContainer=function(t,i,o){if(!t)throw new Error("container is null!");if((0,e.$_instanceOf)(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!(0,e.$_instanceOf)(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var r=this._doc=this._containerDiv.ownerDocument,s=(0,n.getDocWin)(r),a=this._containerDiv.getElementsByClassName("rg-root");if(a&&a.length>0)throw new Error("Grid is already contained ContainerDiv");s.requestAnimationFrame=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame||function(t){return s.setTimeout(t,10)};var l=this._containerDom=r.createElement("div");this._container=this._containerDom;var h=l.style;this._cursor=h.cursor,this._containerDiv.appendChild(l),l.setAttribute("tabindex","0"),h.position="relative",h.width="100%",h.height="100%",h.boxSizing="border-box",h.overflow="hidden",h["-webkit-touch-callout"]="none",h["-webkit-user-select"]="none",h["user-select"]="none",h["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(r),this._measurer=r.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer);var u=this._textMeasurer=r.createElement("span");u.setAttribute("aria-hidden","true"),u.style.position="absolute",u.style.left="-10000px",u.style.top="-10000px",u.style.display="block",this._container.appendChild(u);var d=this._checkMeasurer=r.createElement("input");d.type="checkbox",d.title="grid check measurer",d.tabIndex=-1,d.setAttribute("aria-hidden","true"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-11000px",d.style.display="block",this._container.appendChild(d),this._doPrepareContainer(l,i,o)},o.prototype._doPrepareContainer=function(t,e,i){},o.prototype._createRootElement=function(t){var e=new l(t,"root",this);return this._containerDom.appendChild(e._dom),e},o.prototype.isLayoutNeeded=function(){return this._layoutNeeded},o.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},o.prototype.invalidate=function(t){var e=(0,n.getDocWin)(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},o.prototype.invalidateElement=function(t){var e=(0,n.getDocWin)(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},o.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},o.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new r.Rectangle(0,0,i,o)),this._layoutNeeded)try{this._doLayout(new r.Rectangle(0,0,i,o))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new r.Rectangle(0,0,i,o));this._doRenderHtml(new r.Rectangle(0,0,i,o))},o.prototype._doLayout=function(t){},o.prototype._doAfterRender=function(){},o.prototype._doPrepareRender=function(t){},o.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},o.prototype._doDrawContainer=function(t){},o.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},o.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++){t.getChild(e).validate()}},o.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},o.prototype._registerEventHandlers=function(t,e){var i=n.Utils.isSlotMode()?e.parentElement:(0,n.getWin)(t);t.style.cursor=this._defaultCursor,this.$_addListener((0,n.getWin)(t),"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"pointermove",this._pointerMoveHandler.bind(this),!1),this.$_addListener(i,"pointerup",this._pointerUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener((0,n.getWin)(t),"pointerdown",this._globalPointerDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),!n.Utils.isMobile()&&this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"pointerdown",this._pointerDownHandler.bind(this),!1),this.$_addListener(t,"pointerenter",this._pointerEnterHandler.bind(this),!1),this.$_addListener(t,"pointerleave",this._pointerLeaveHandler.bind(this),!1),this.$_addListener(t,"pointerover",this._pointerOverHandler.bind(this),!1),this.$_addListener(t,"pointercancel",this._pointerCancelHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!n.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!1)},o.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},o.prototype.$_removeListener=function(t,e,i){if(t in this._eventHandlers){var o=this._eventHandlers[t];if(e in o){for(var n=o[e],r=n.length;r--;){var s=n[r];t.removeEventListener(e,s[0],s[1]),n.splice(r,1)}i&&delete o[e]}}},o.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var n=e[i];if(n in this._eventHandlers){var r=this._eventHandlers[n];for(var s in r)for(var a=r[s],l=a.length;l--;){var h=a[l];n.removeEventListener(s,h[0],h[1])}}}},o.prototype.$_existListener=function(t,e){var i=this._eventHandlers[t];return i&&i[e]},o.prototype.addMouseEvent=function(t){this.$_addListener(this._rootElement._dom,"mousedown",this._mouseDownHandler.bind(this),{once:!0}),this.$_addListener(this._rootElement._dom,"mouseup",this._mouseUpHandler.bind(this),{once:!0})},o.prototype.removeMouseEvent=function(){this.$_removeListener(this._rootElement._dom,"mousedown",!0),this.$_removeListener(this._rootElement._dom,"mouseup",!0)},o.prototype._doResized=function(t){},o.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},o.prototype._isOutChildElement=function(t){return!1},o.prototype.$_checkKeyElement=function(t){var e=(0,n.getWin)(t.target);return t.target===t.currentTarget&&t.target===this._containerDom||t.target instanceof e.HTMLTableCellElement&&n.Utils.isAncestorOf(this._containerDom,t.target,t)},o.prototype._keyDownHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyDown(t)},o.prototype._keyUpHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyUp(t)},o.prototype._keyPressHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyPress(t)},o.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new a.Point(t.clientX-e.left,t.clientY-e.top)},o.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},o.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},o.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},o.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},o.prototype.$_setMouseTarget=function(t){for(var e=(0,n.getWin)(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},o.prototype._pointerDownHandler=function(t){if(t.isPrimary)if(this._isEnabled()){o.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(s.ScrollBar)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.pointerDown(t)}else t.preventDefault()},o.prototype._mouseDownHandler=function(t){if(this._isEnabled()){o.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(s.ScrollBar)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)}else t.preventDefault()},o.prototype._mouseUpHandler=function(t){this.removeMouseEvent(),this.$_pointerUpHandler(t)},o.prototype._pointerMoveHandler=function(t){var e;if(this._containerDom.parentElement&&t.isPrimary&&(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled())){e=this._activeTool,this.$_setMouseTarget(t),e.pointerMove(t);var i=e.dragTracker;if(i&&i.linkable&&o.$_mouseContainer==this.$_hash)for(var n in o.$_Containers){var r=o.$_Containers[n];r!==this&&(e=r._activeTool)&&e.dragFrom(t,i)}}},o.prototype.$_pointerUpHandler=function(t){var e=o.$_mouseContainer==this.$_hash,i=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var n=i.dragTracker;if(this.$_setMouseTarget(t),i.pointerUp(t),i instanceof s.ScrollTool&&(this.activeTool=i.previous),n&&n.linkable&&e){var r=this.findContainer(t);if(r&&r!==this){var a=r._activeTool;a&&a.dropFrom(t,n)}}}else t.preventDefault()}finally{i&&(this.setCursor("default"),i.dragTracker=null),e&&(o.$_mouseContainer=-1)}},o.prototype._pointerUpHandler=function(t){t.isPrimary&&(!this.activeTool.dragging&&this.$_existListener(this._rootElement._dom,"mouseup")||(this.removeMouseEvent(),this.$_pointerUpHandler(t)))},o.prototype._pointerEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},o.prototype._pointerLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},o.prototype._pointerOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},o.prototype._pointerCancelHandler=function(t){this._isEnabled()&&this._activeTool.pointerCancel(this.toOffset(t))},o.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},o.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&n.Utils.stopEvent(t))},o.prototype._focusHandler=function(t){},o.prototype._blurHandler=function(t){},o.prototype._selectstartHandler=function(t){return!1},o.prototype._focusinHandler=function(t){},o.prototype._globalPointerDownHandler=function(t){n.Utils.isAncestorOf(this._containerDiv,t.target,t)||this._isOutChildElement(t)||(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t))},o.prototype._focusoutHandler=function(t){var e=t.relatedTarget;if(n.Utils.isAncestorOf(this._containerDiv,t.target,t)&&e&&!n.Utils.isAncestorOf(this._containerDiv,e,t)&&!this._isOutChildElement(t)){if(!e&&!t.sourceCapabilities)return;this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t)}},o.prototype._focusHandlerFireFox=function(t){t.target===this._containerDom||n.Utils.isAncestorOf(this._containerDom,t.target,t)?this._isEnabled()&&(this._focused=!0,this._activeTool.setFocus(t.target)):this._isOutChildElement(t)||(this._containerDom.setAttribute("tabindex","0"),this._focused=!1)},o.prototype._touchMoveHandler=function(t){if(!(t.touches.length>1))return this.toOffsetTouch(t),this._activeTool.touchMove(t)},o.$_Containers={},o.$_mouseContainer=-1,o.$_ActiveGrid=null,o}(i.EventAware);return dr.VisualContainer=h,dr}var Fr,Pr={};function Br(){if(Fr)return Pr;Fr=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.GridHeadElement=Pr.CheckHeadCellElement=Pr.GridHeadCellElement=void 0;var t=d,e=Hn(),i=jo(),o=zo(),n=Xo(),r=Zo(),s=zn(),a=C(),l=S(),h=function(e){function i(t,i,o){void 0===o&&(o="gridHeadCellView");var n=e.call(this,t,o)||this;return n._text="",n._styleName="",n._textChanged=!1,n._model=i,n}return t.__extends(i,e),_dp(i,"model",{get:function(){return this._model}}),i.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._clearCellCache=function(){e.prototype._clearCellCache.call(this),this._textChanged=!0},i.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[l.Utils.TextProp]=this._text)},i}(s.CellElement);Pr.GridHeadCellElement=h;var u=function(e){function i(t,i){var o=e.call(this,t,i,"chekHeadCellView")||this;return o._checked=!1,o}return t.__extends(i,e),_dp(i,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),i.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},i.prototype._doUpdateContent=function(t,e,i){var o,n=t.doc,r=this.model,s=r.showAll&&!r.exclusive;if(s&&!this._check){var h=this._check=n.createElement("input");h.id="$$-grid-head-check-"+this.model.$_hash,o=h.style,h.type="checkbox",h.className="rg-checkbox",h.tabIndex=-1,o.display=r.useImages?"none":"inline-block",i.appendChild(h);var u=this._image=n.createElement("span");(o=u.style).display=r.useImages?"inline-block":"none",i.appendChild(u);var d=this._label=n.createElement("label");d.setAttribute("for",this._check.id),d[l.Utils.TextProp]="grid head check",(o=d.style).display="none",i.appendChild(d)}if(s?(this._check.style.display=r.useImages?"none":"inline-block",this._image.style.display=r.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(l.Utils.detach(this._check),l.Utils.detach(this._image),l.Utils.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=n.createElement("span"),this._span.style.display="block",i.appendChild(this._span)),this._span[l.Utils.TextProp]=this._text),s&&this._span&&this._text){var c=r.useImages?this._image:this._check,p=this._span,_=c.parentElement,f=null!=r.itemGap?r.itemGap+"px":"5px";switch((o=p.style).margin="",r.checkLocation){case a.ColumnHeaderItemLocation.BOTTOM:_.insertBefore(p,c),o.display="block",o.marginBottom=f;break;case a.ColumnHeaderItemLocation.LEFT:_.insertBefore(c,p),o.display="inline-block",o.marginLeft=f;break;case a.ColumnHeaderItemLocation.RIGHT:_.insertBefore(p,c),o.display="inline-block",o.marginRight=f;break;case a.ColumnHeaderItemLocation.TOP:default:_.insertBefore(c,p),o.display="block",o.marginTop=f}}},i.prototype.$_updateContent=function(){var t=this.model;t.showAll&&!t.exclusive&&this._check&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")},i}(h);Pr.CheckHeadCellElement=u;var c=function(e){function s(t){var i=e.call(this,t.doc,null,"gridHeadView")||this;i._cells=[];var o=t.doc;return i.addChild(i._indicatorCell=new h(o,t.rowIndicator)),i.addChild(i._stateCell=new h(o,t.stateBar)),i.addChild(i._checkCell=new u(o,t.checkBar)),i}return t.__extends(s,e),s.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},_dp(s,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()}}),s.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},s.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e instanceof i.SectionObject?e.getCellType():void 0},s.prototype._getCssSelector=function(){return"rg-head"},s.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,s=t.sectionObjects;this._cells=[];for(var a=0,l=s;a<l.length;a++){var h=l[a];h instanceof o.RowIndicator&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),h instanceof n.StateBar&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),h instanceof r.CheckBar&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},s.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},s.prototype._doLayoutContent=function(t){var e=t.grid,i=this._cells.length;this._getTableRowCount(t);for(var o=this._thead,n=o&&o.children[0],r=0;r<i;r++){var s=this._cells[r],a=s.model;if(a.dirty||s._dirty||e._columnsDirty){var h=a.getHeadCell(),u=this._getTableCell(0,r),d=u.firstElementChild,c=this.$_getCellSelector()+" "+a.getHeadStyleName();if(n){var p=n.children[r];p&&(p[l.Utils.TextProp]=a.getCellType()+" head")}s.setStyleName(u,d,c),s.updateCell(e,h,d)}}},s.prototype._doRender=function(t){},s.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},s.prototype._getTableRowCount=function(t){return 1},s.prototype._getTableRowHeight=function(t,e){return this.height},s.prototype._getCellCount=function(t){return this._cells.length},s.prototype._getCellWidth=function(t,e){return this._cells[e].width},s.prototype._doPrepareTableRow=function(t,i,o,n){e.prototype._doPrepareTableRow.call(this,t,i,o,n);var r=t.grid.header.styleName;l.Utils.setClassName(n,r)},s.prototype.$_getCellSelector=function(){return s.CELL_CSS},s.CELL_CSS="rg-head-cell",s}(e.SimpleTableElement);return Pr.GridHeadElement=c,Pr}var Vr,Nr={};var Ar,$r={};var Hr,Ur,Gr={},Wr={};function jr(){if(Hr)return Wr;Hr=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.ToastManager=Wr.ToastView=Wr.ToastOptions=void 0;var t=d,e=G(),i=S(),o=function(e){function i(t){var i=e.call(this)||this;return i._message="",i._visible=!0,i._zIndex=void 0,i._styleName="rg-toast",t&&i.assignFrom(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(i,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)}}),_dp(i,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t}}),i.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:e.prototype.assignFrom.call(this,t)},i}(e.Base);Wr.ToastOptions=o;var n=function(e){function o(t){var i=e.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropdownCount=8,i._showing=!1,i._container=t,i._element=i.$_createElement(t.doc),i}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(o,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(o,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t}}),o.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},o.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},o.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},o.prototype.$_show=function(t){var e=t.message;if(e){var o=this._element;if(o){var n=this._span,r=this._container._gridView.displayOptions;n.innerHTML=e,o.className=t.styleName,o.style.position="absolute",o.style.overflow="hidden",o.style.zIndex=null!=t.zIndex?t.zIndex:r.toastZIndex,this._container._container.appendChild(o);var s=i.Utils.getBoundingClientRect2(o),a=i.Utils.getBoundingClientRect2(this._container._container),l=s.width+10,h=s.height+10,u=a.width,d=a.height;o.style.left=(u-l)/2+"px",o.style.top=(d-h)/2+"px"}}},o.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},o}(e.Base);Wr.ToastView=n;var r=function(e){function i(t){var i=e.call(this)||this;return i._active=!1,i._container=t.container,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._active}}),i.prototype.show=function(t,e,i){if((!this._active||e)&&(this.close(),(t=t instanceof o?t:t?new o(t):null)&&t.visible))return this._toast||(this._toast=new n(this._container)),this._toast.show(t),this._active=!0,void(i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0));i&&i()},i.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},i}(e.Base);return Wr.ToastManager=r,Wr}var zr,Yr={};function qr(){if(zr)return Yr;zr=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.MessagePane=Yr.RightContentPane=Yr.FixedContentPane=Yr.DataContentPane=Yr.LeftContentPane=Yr.ContentPane=void 0;var t=d,e=hn(),i=Sa(),o=Pn(),n=Tn(),r=function(e){function n(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return t.__extends(n,e),n.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof i.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},n.prototype._doMeasure=function(t,e,i){return new o.Size(e,i)},n.prototype._doLayoutContent=function(t,e,i){},n}(e.LayerElement);Yr.ContentPane=r;var s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._initDom=function(t){e.prototype._initDom.call(this,t)},i}(r);Yr.LeftContentPane=s;var a=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i}(r);Yr.DataContentPane=a;var l=function(e){function i(t){var i=e.call(this,t.doc,"fixedColumnBar")||this;return i._grid=t,i}return t.__extends(i,e),i.prototype._getCssSelector=function(){return n.FixedOptions.COLUMN_BAR_STYLE},i}(e.LayerElement),h=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},i.prototype._doLayoutContent=function(t,i,o){this._barView||(this._barView=this._createBar(t.grid),this.addChild(this._barView),this._barView2=this._createBar(t.grid),this.addChild(this._barView2)),e.prototype._doLayoutContent.call(this,t,i,o)},i.prototype._createBar=function(t){return new l(t)},i.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,n=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,r),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-n,o,n))}},i}(a);Yr.FixedContentPane=h;var u=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-right-column-bar"},i}(e.LayerElement),c=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._createBar=function(){return new u(this.doc,"rightColumnBar")},i.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,n=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(0,0,o,r),n>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-n,o,n))}},i}(h);Yr.RightContentPane=c;var p=function(e){function i(t,i){void 0===i&&(i=null);var o=e.call(this,t,i)||this;return o.visible=!1,o}return t.__extends(i,e),_dp(i,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())}}),i.prototype._getCssSelector=function(){return"rg-message-pane"},i.prototype._doLayoutContent=function(t,i,o){e.prototype._doLayoutContent.call(this,t,i,o)},i}(r);return Yr.MessagePane=p,Yr}var Xr,Kr,Jr,Zr={},Qr={},ts={};function es(){if(Kr)return Qr;Kr=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.NativeDateCellEditor=Qr.BTDateCellEditor=Qr.DateCellEditor=Qr.HolidayCollection=Qr.Holiday=void 0;var t,e,i=d,o=G(),n=S(),r=fn(),s=Cn(),a=et(),l=C(),h=rt(),u=$(),c=(Xr||(Xr=1,t=ts,Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSelectType=void 0,(e=t.TimeSelectType||(t.TimeSelectType={})).NONE="none",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"),ts),p=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,_=function(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),n=4-o.getDay()+1;return o.setDate(n),o.getFullYear()==e&&i--,n=7*i,o.setDate(o.getDate()+n),o},f=function(t,e,i){var o,n=function(t){var i=new Date(t),o=i.getDay();o=o<e?-3-o:4-o;var n=i.getDate();return i.setDate(n+o),i},r=t.getFullYear(),s=n(new Date(r,0,1)),a=n(new Date(r,t.getMonth(),t.getDate())),l=s.getFullYear(),h=a.getFullYear();return h<r?(s=n(new Date(l,0,1)),o=Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===h?1:0)):o=h>r?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===h?1:0),String(h)+(null!=i?i:"")+(o<10?"0"+o:String(o))},g=function(t){function e(e){var i=t.call(this)||this;return i._tooltips=[],i._items=[],i._enabled=!0,i._owner=e,i}return i.__extends(e,t),e.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,t.prototype._doDispose.call(this)},_dp(e,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t}}),_dp(e,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()}}),_dp(e,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(e,"count",{get:function(){return this._items&&this._items.length}}),_dp(e,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t}}),e.prototype.load=function(t){this.clear()},e.prototype.clear=function(){this._items=[],this._tooltips=[]},e.prototype.contains=function(t){return!1},e.prototype.getTooltip=function(t){return null},e}(o.Base);Qr.Holiday=g;var m,y=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return i.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){if(t.prototype.load.call(this,e),e){var i=n.Utils.makeArray(e.dates,!0);e.tooltips=n.Utils.makeArray(e.tooltips,!0);for(var o=0,r=i.length;o<r;o++){var s=i[o],a=void 0;if(s instanceof Date||"number"==typeof s)(a=new Date(s)).setHours(0,0,0,0);else if("string"==typeof s){4!==s.length&&8!==s.length||!/^[0-9]*$/.test(s)||(s=4===s.length?s.replace(/(\d{2})(\d{2})/,"$1/$2"):s.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var l=s.split(/[.//-]/);if(2==l.length)try{a=parseInt(l[0]).toString()+"/"+parseInt(l[1]).toString()}catch(t){n.Utils.log("잘못된 날짜형식 (".concat(s,")"))}else 3==l.length&&(a=u.DateTimeReader.getSimpleDateNull(s))}a&&(this._items.push(a),e.tooltips[o]&&this._tooltips.push(e.tooltips[o]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},e.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},e.prototype.contains=function(t){return this.getItemIndex(t)>=0},e.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return e>=0?this._tooltips[e]:null},e}(g),v=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return i.__extends(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){t.prototype.load.call(this,e),e&&(this._items=n.Utils.makeArray(e.days,!0),this._tooltips=n.Utils.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},e.prototype.contains=function(t){return t instanceof Date&&this._items.indexOf(t.getDay())>=0},e.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return e>=0?this._tooltips[e]:null},e}(g),w=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._count=-1,e}return i.__extends(e,t),e.prototype._doDispose=function(){this._editor=null,this._items=null,t.prototype._doDispose.call(this)},_dp(e,"items",{get:function(){return this._items},set:function(t){this._items=t}}),_dp(e,"editor",{get:function(){return this._editor},set:function(t){this._editor=t}}),_dp(e,"isNull",{get:function(){return-1==this._count}}),_dp(e,"count",{get:function(){return this._count}}),e.prototype.setNull=function(){this.clear()},e.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},e.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=n.Utils.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],r=void 0;switch(o.type){case"day":r=new v(this,o);break;case"date":r=new y(this,o)}r.count>0&&this._items.push(r)}this._count=this._items.length}else this._count=-1},e.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},e}(o.Base);Qr.HolidayCollection=w,function(t){t.DAY="day",t.MONTH="month",t.YEAR="year"}(m||(m={}));var x=function(t){function e(i,o){var r=t.call(this)||this;return r._minWidth=0,r._maxWidth=0,r._dropDownPosition=s.DropDownPosition.BUTTON,r._showToday=!0,r._viewGridInside=!1,r._showWeeks=!1,r._startWeek=0,r._weekSelectable=!1,r._weekSeparator="",r._currentMode=m.DAY,r._date=new Date,r._selected=!1,r._focused=!0,r._canceled=!1,r._touchs=null,r._applyTouchs=null,r._clickHandler=function(t){var i=r.$_getCellDate(r._currDate,t.currentTarget.$_day+1);if(r._editor.containsRange(i)){var o=r._holidays&&r._holidays.contains(i);o&&!o.enabled||(r.date=new Date(i),r._selected=!0,r.focused=!0,r._editor.$_selectDate(r._date),!r.showButtons&&r._editor.timeSelectType===c.TimeSelectType.NONE&&r.fireEvent(e.CLOSE_UP,!0))}},r._dblClickHandler=function(t){r.fireEvent(e.CLOSE_UP,!0)},r._yearWeekClickHandler=function(t){var i,o=t.currentTarget.$_yearWeek;o&&(i=_(o)),i&&this._editor.containsRange(i)&&(this._date=new Date(i),this._selected=!0,this._editor.$_selectDate(this._date),!this.showButtons&&this.fireEvent(e.CLOSE_UP,!0))}.bind(r),r._mouseupHandler=function(t){!this._isMobile&&this._editor.setFocus()}.bind(r),r._timeWheelHandler=function(t){n.Utils.stopEvent(t),r._doTimeWheel(t)},r._timeClickHandler=function(t){n.Utils.stopEvent(t),r._doTimeClick(t)},r._touchStartHandler=function(t){r._touchs=[],r._applyTouchs=[],r._swipeTimer=clearInterval(r._swipeTimer),1!=t.touches.length&&(r._touchId=void 0),r._touchId=t.touches[0].identifier;var e=t.touches[0];r._touchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp}),r._applyTouchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp})},r._touchEndHandler=function(t){r._checkSwipe(t.target),r._touchs=r._applyTouchs=null},r._touchMoveHandler=function(t){if(!(t.touches.length>1)){n.Utils.stopEvent(t);var e=r._touchs,i=r._applyTouchs,o=t.touches[0],s={x:o.clientX,y:o.clientY,t:t.timeStamp};e.push(s),i.push(s);var a=i[0].y,l=i[i.length-1].y;Math.abs(a-l)>13&&(r._applyTouchs=[],r._doTimeScroll(t.target,a-l))}},r._checkSwipe=function(t){var e=r._touchs,i=e.length;if(!(i<2)){for(var o=e[i-1],n=e[i-2],s=i-3;s>=0&&!(o.t-n.t>100);s--)n=e[s];var a=n.x,l=n.y,h=o.x,u=o.y,d=Math.sqrt(Math.pow(a-h,2)+Math.pow(l-u,2))/Math.max(16,o.t-n.t),c=.998;if(d>.1){var p=Math.log(.1/d)/Math.log(c),_=d*(1-Math.pow(c,p+1))/(1-c),f="right",g=Math.round(180*Math.atan2(u-l,h-a)/Math.PI);return g<0&&(g=360+g),g>45&&g<=135?f="bottom":g>135&&g<=225?f="left":g>225&&g<=315&&(f="top"),r.onSwipeHandler(p,_,f,t)}return!1}},r.$_scrollRow=function(){n.Utils.getTimer()-r._swipeStarted<r._swipeDuration?r._doTimeScroll(r._swipeTarget,r._swipeDistance):r._swipeTimer=clearInterval(r._swipeTimer)},r.$_nextMonth=function(t){n.Utils.incMonth(r._currDate,1),r.$_buildCalendar()},r.$_prevMonth=function(t){n.Utils.incMonth(r._currDate,-1),r.$_buildCalendar()},r.$_nextYearMonth=function(t){n.Utils.incYear(r._currDate,1),r.$_buildMonths()},r.$_prevYearMonth=function(t){n.Utils.incYear(r._currDate,-1),r.$_buildMonths()},r.$_nextYear=function(){var t=r._yearTable.tBodies[0].rows[2].cells[3],e=parseInt(t.getAttribute("year"));r.$_buildYear(e)},r.$_prevYear=function(){var t=r._yearTable.tBodies[0].rows[0].cells[0],e=parseInt(t.getAttribute("year"))-4;r.$_buildYear(e)},r._editor=o,r._container=i,r._yearDisplayFormat=o.yearDisplayFormat,r._monthDisplayFormat=o.monthDisplayFormat,r._months=o.months,r._weekDays=n.Utils.week_days,r._element=r.$_createPicker(o),r._element.addEventListener("pointerup",r._mouseupHandler),r}return i.__extends(e,t),e.prototype.onSwipeHandler=function(t,e,i,o){this._swipeDuration=t,this._swipeStarted=n.Utils.getTimer(),this._swipeTarget=o;var r=1;switch(i){case"bottom":r=-1;case"top":this._swipeDistance=r*e/20,this._swipeTimer=setInterval(this.$_scrollRow,40)}return!0},e.prototype._doDispose=function(){var e=this;if(this._element){var i=function(t){t&&(t.removeEventListener("wheel",e._timeWheelHandler),t.removeEventListener("click",e._timeClickHandler),t.removeEventListener("touchstart",e._touchStartHandler),t.removeEventListener("touchend",e._touchEndHandler),t.removeEventListener("touchmove",e._touchMoveHandler),t.removeEventListener("dblclick",e._dblClickHandler))};this._element.removeEventListener("pointerup",this._mouseupHandler),i(this._hourElement.$_UL),i(this._minuteElement.$_UL),i(this._secondElement.$_UL),n.Utils.detach(this._element)}t.prototype._doDispose.call(this)},_dp(e,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(e,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(e,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())}}),_dp(e,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())}}),_dp(e,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(e,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())}}),_dp(e,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(e,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(e,"months",{get:function(){return this._months},set:function(t){n.Utils.isArray(t)&&(this._months=t,this._months.length=12,this._changed())}}),_dp(e,"viewGridInside",{get:function(){return this._viewGridInside||n.Utils.isSlotMode()},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(e,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())}}),_dp(e,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())}}),_dp(e,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())}}),_dp(e,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())}}),_dp(e,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())}}),_dp(e,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&(this.$_buildCalendar(),this._setTime(this._date,!1))):null===t&&(this._date=null)}}),_dp(e,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(e,"selected",{get:function(){return this._selected}}),_dp(e,"canceled",{get:function(){return this._canceled}}),_dp(e,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=t?"1.0":"0.5")}}),_dp(e,"today",{get:function(){return this.date=new Date}}),_dp(e,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t}}),_dp(e,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement[n.Utils.TextProp]=t),this._saveLabel=t)}}),_dp(e,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement[n.Utils.TextProp]=t),this._cancelLabel=t)}}),_dp(e,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement[n.Utils.TextProp]=t),this._deleteLabel=t)}}),_dp(e,"todayLabel",{get:function(){return this._todayLabel},set:function(t){t!=this._todayLabel&&(this._todayElement&&(this._todayElement[n.Utils.TextProp]=t),this._todayLabel=t)}}),_dp(e,"currentMode",{get:function(){return this._currentMode},set:function(t){if(this._currentMode!==t){this._currentMode=t;for(var e=this._bodyElement,i=void 0,o=this._header,r=o.$_prev,s=o.$_next,a=this._currDate||new Date;i=e.lastElementChild;)e.removeChild(i);var l=a.getMonth(),h=a.getFullYear();switch(this._currentMode){case m.DAY:e.appendChild(this._calendarElement),r.onclick=this.$_prevMonth,s.onclick=this.$_nextMonth,r.title=0==l?h-1+"/12":h+"/"+n.Utils.pad(l),s.title=s.title=11==l?h+1+"/01":h+"/"+n.Utils.pad(l+2);break;case m.MONTH:e.appendChild(this._monthsElement),this.$_buildMonths(),r.onclick=this.$_prevYearMonth,s.onclick=this.$_nextYearMonth,r.title="".concat(h-1,"/").concat(l+1),s.title="".concat(h+1,"/").concat(l+1);break;case m.YEAR:e.appendChild(this._yearsElement),this.$_buildYear(a.getFullYear()),r.onclick=this.$_prevYear,s.onclick=this.$_nextYear,r.title="".concat(10*Math.floor(h/10)-11,"-").concat(10*Math.floor(h/10)),s.title="".concat(10*Math.floor(h/10)+11,"-").concat(10*Math.floor(h/10)+20)}}}}),_dp(e,"hours",{get:function(){return this._hours},set:function(t){if(t)this._hours=t.slice();else{this._hours=[];for(var e=0;e<24;e++)this._hours.push(e)}this.$_buildHourMinutes(c.TimeSelectType.HOUR)}}),_dp(e,"minutes",{get:function(){return this._minutes},set:function(t){if(t)this._minutes=t.slice();else{this._minutes=[];for(var e=0;e<60;e++)this._minutes.push(e)}this.$_buildHourMinutes(c.TimeSelectType.MINUTE)}}),e.prototype.setWeekDays=function(t){t!=this._weekDays&&(n.Utils.isArray(t)&&t.length>=7?this._weekDays=t:this._weekDays=n.Utils.week_days)},e.prototype.show=function(t,e,i,o,r){this._containerElement=!n.Utils.isMobile()&&this.viewGridInside?this._container._container:t,this._element.style.removeProperty("width"),this._timeContainer.style.setProperty("height","0px"),this.$_show(e,i,o,r)},e.prototype.hide=function(){this.focused=!1,n.Utils.detach(this._element),this._containerElement=null},e.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date)).setDate(this._date.getDate()+t):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),n.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.startDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()-(e+7)%7),this.date=t},e.prototype.endDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()+(6-e)),this.date=t},e.prototype.incHour=function(t){var e,i=new Date(this._currDate),o=i.getHours(),n=this._hours;return n?(e=n.indexOf(o))>=0?null==(o=n[e+t])&&(o=1===t?n[0]:n[n.length-1]):o=n[0]:o=(24+o+t)%24,i.setHours(o),this.$_setTime(this._hourElement,null,o,!0),this.date=i},e.prototype.incMinute=function(t){var e,i=new Date(this._currDate),o=this._minutes,n=i.getMinutes();return o?(e=o.indexOf(n))>=0?null==(n=o[e+t])&&(n=1===t?o[0]:o[o.length-1]):n=o[0]:n=(24+n+t)%24,i.setMinutes(n),this.$_setTime(this._minuteElement,null,n,!0),this.date=i},e.prototype.incSecond=function(t){var e=new Date(this._currDate),i=e.getSeconds();return i=(60+i+t)%60,e.setSeconds(i),this.$_setTime(this._secondElement,null,i,!0),this.date=e},e.prototype.setCurrentLoc=function(t){var e="focused";1===t?n.Utils.addClassName(this._hourElement,e):n.Utils.removeClassName(this._hourElement,e),2===t?n.Utils.addClassName(this._minuteElement,e):n.Utils.removeClassName(this._minuteElement,e),3===t?n.Utils.addClassName(this._secondElement,e):n.Utils.removeClassName(this._secondElement,e)},e.prototype._changed=function(){},e.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},e.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div");this._id=i.id="rg-calendar-"+b.$$_LIST_ID++;var o=i.style;return o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._bodyElement=this.$_createBody(e),i.appendChild(this._bodyElement),this._calendarElement=this.$_createCalTable(e),this._monthsElement=this.$_createMonths(e),this._yearsElement=this.$_createYears(e),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},e.prototype.$_createBody=function(t){var e=t.createElement("div");return e.className="rg-calendar-body",e},e.prototype.$_createCalTable=function(t){var e,i=t.createElement("div");(e=i.style).display="flex",e.flexDirection="row";var o=this._dateContainer=t.createElement("div");(e=o.style).display="inline-block",i.appendChild(o),this._calendar=this.$_createCalendar(t),o.appendChild(this._calendar);var n=this._timeContainer=t.createElement("div");return i.appendChild(n),(e=n.style).display="none",e.overflow="hidden",e.height="0px",n.appendChild(this._hourElement=this.$_createHour(t)),n.appendChild(this._minuteElement=this.$_createMinute(t)),n.appendChild(this._secondElement=this.$_createSecond(t)),i},e.prototype._getCell=function(t){for(var e=(0,n.getWin)(t);t&&!(t instanceof e.HTMLTableCellElement);)t=t.parentElement;return t},e.prototype.$_setCurrentTime=function(t,e,i){for(var o=t.parentElement.clientHeight,r=t.offsetTop,s=0,a=0;a<t.childElementCount;a++){var l=t.children[a];e&&(l.setAttribute("time-value",e[a].toString()),l[n.Utils.TextProp]=n.Utils.pad(e[a])),e[a]===i?n.Utils.addClassName(l,"rg-cal-time-select"):n.Utils.removeClassName(l,"rg-cal-time-select"),(r+=s||(s=l.clientHeight+2))>o?l.style.visibility="hidden":l.style.removeProperty("visibility")}},e.prototype._doTimeScroll=function(t,e){for(var i=(0,n.getWin)(this._containerElement),o=t;!(o instanceof i.HTMLUListElement)||null==o;)o=o.parentElement;if(o){var r=o.parentElement;if(!(r.scrollHeight<=r.clientHeight)){var s;switch(o.firstElementChild.getAttribute("kind")){case c.TimeSelectType.HOUR:s=this._currDate.getHours();break;case c.TimeSelectType.MINUTE:s=this._currDate.getMinutes();break;case c.TimeSelectType.SECOND:s=this._currDate.getSeconds()}if(o){for(var a=[],l=0;l<o.childElementCount;l++)a.push(Number(o.children[l].getAttribute("time-value")));e>0?a.push(a.shift()):a.unshift(a.pop()),this.$_setCurrentTime(o,a,s)}}}},e.prototype._doTimeWheel=function(t){this._doTimeScroll(t.target,t.deltaY)},e.prototype._doTimeClick=function(t){var i=t.target,o=new Date(this._currDate),n=i.getAttribute("kind"),r=Number(i.getAttribute("time-value"));switch(n){case c.TimeSelectType.HOUR:o.setHours(r);break;case c.TimeSelectType.MINUTE:o.setMinutes(r);break;case c.TimeSelectType.SECOND:o.setSeconds(r)}this._editor.$_selectDate(this.date=o),n===this._editor.timeSelectType&&!this.showButtons&&this.fireEvent(e.CLOSE_UP,!0)},e.prototype._changeCurrent=function(t){switch(this._currentMode){case m.DAY:this.currentMode=t?m.MONTH:m.DAY;break;case m.MONTH:this.currentMode=t?m.YEAR:m.DAY;break;case m.YEAR:this.currentMode=t?m.YEAR:m.MONTH}},e.prototype.$_createHeader=function(t){var e=this,i=function(t,e){var i=t.createElement("span"),o=i.style;return o.position="relative",o.minWidth="17px",o.minHeight="17px",i},o=this,n=this._headerElement=t.createElement("div"),r=n.style;r.position="relative",r.display="flex",n.className="rg-cal-header";var s=n.appendChild(n.$_prev=i(t));s.className="rg-cal-prev-month",s.onclick=this.$_prevMonth;var a=t.createElement("div");(r=a.style).position="relative",r.textAlign="center",r.display="flex",r.alignItems="center",r.justifyContent="center",r.height="100%",r.flexGrow="1",n.appendChild(n.$_title=a),a.className="rg-cal-yearmonth";var l=t.createElement("div");(r=l.style).position="relative",r.fontSize="14px",l.className="rg-cal-year",a.appendChild(a.$_year=l),l.onclick=function(t){e._currentMode!==m.YEAR&&e._changeCurrent(!0)};var h=this._todayElement=t.createElement("span");(r=h.style).position="relative",h.className="rg-cal-today-button",n.appendChild(h),h.innerHTML=this.todayLabel,h.onclick=function(t){var e=new Date;o.focused=!0,o.date=e,o._selected=!0,o.currentMode=m.DAY,o._editor.$_selectDate(o._currDate),o._setTime(e,!0)};var u=n.appendChild(n.$_next=i(t));return u.className="rg-cal-next-month",u.onclick=this.$_nextMonth,n},e.prototype.$_createFooter=function(t){var i,o=t.createElement("div"),r=o.style;return r.display="none",o.className="rg-cal-buttons",i=this._deleteElement=t.createElement("span"),this._deleteLabel&&(i[n.Utils.TextProp]=this._deleteLabel),i.className="rg-cal-delete-button",(r=i.style).float="left",i.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),o.appendChild(i),i=this._saveElement=t.createElement("span"),this._saveLabel&&(i[n.Utils.TextProp]=this._saveLabel),i.className="rg-cal-save-button",(r=i.style).float="right",i.onclick=function(t){this.fireEvent(e.CLOSE_UP,!0)}.bind(this),o.appendChild(i),i=this._cancelElement=t.createElement("span"),this._cancelLabel&&(i[n.Utils.TextProp]=this._cancelLabel),i.className="rg-cal-cancel-button",(r=i.style).float="right",i.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(e.CLOSE_UP,!1)}.bind(this),o.appendChild(i),o},e.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),o=i.style;o.margin="2px",i.className="rg-cal-days-table";var r=i.createTHead();r.className="rg-cal-weeks";var s=t.createElement("tr");r.appendChild(s);var a=[],l=t.createElement("th");(o=l.style).minWidth="20px",o.textAlign="center",l.className="rg-cal-week-year-week",s.appendChild(l);var h=t.createElement("span");l.appendChild(h),r.$_weeks=l;for(var u=0;u<7;u++){var d=t.createElement("th");(o=d.style).minWidth="20px",o.textAlign="center",d.className="rg-cal-week-"+e[u],s.appendChild(d);var c=t.createElement("span");c.innerHTML=n.Utils.htmlEncode(this._weekDays[u]),d.appendChild(c),a.push(c)}r.$_cells=a;var p=t.createElement("tbody");p.className="rg-cal-days",i.appendChild(i.$_body=p);for(var _=p.$_rows=[],f=p.$_yearweeks=[],g=0;g<6;g++){var m=t.createElement("tr");p.appendChild(m),_.push(m),m.$_cells=a=[];var y=t.createElement("td");(o=y.style).padding="1px",m.appendChild(y);var v=t.createElement("span");y.appendChild(y.$_span=v),f.push(y);for(u=0;u<7;u++){var C=t.createElement("td");(o=C.style).padding="1px",C.className="rg-cal-day rg-cal-week-"+e[(u+this._startWeek)%7],m.appendChild(C),C.onclick=this._clickHandler,C.ondblclick=this._dblClickHandler;var w=t.createElement("span");C.appendChild(C.$_span=w),C.id=this._id+"-"+g.toString()+"-"+u.toString(),a.push(C)}}return i},e.prototype.$_buildYear=function(t){for(var e=this._yearTable.tBodies[0],i=this._currDate.getFullYear(),o=t=10*Math.floor(t/10)-1,r=0;r<3;r++)for(var s=e.rows[r],a=0;a<4;a++){var l=s.cells[a];l.setAttribute("year",t.toString()),l.firstElementChild[n.Utils.TextProp]=this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",t+""):t+"",i===t?n.Utils.addClassName(l,"rg-cal-focusday"):n.Utils.removeClassName(l,"rg-cal-focusday"),t++}var h="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",o+""):o," - ").concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",--t+""):--t);this._headerElement.$_title.$_year[n.Utils.TextProp]=h},e.prototype.$_buildMonths=function(){for(var t=this._months,e=0,i=this._currDate.getMonth(),o=this._monthTable.tBodies[0],r=0;r<3;r++)for(var s=o.rows[r],a=0;a<4;a++){var l=s.cells[a];l.setAttribute("month",e.toString());var h=l.firstElementChild;t&&t[e]?h[n.Utils.TextProp]=t[e]:h[n.Utils.TextProp]=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",e+1+""):"".concat(e+1),i===e?n.Utils.addClassName(l,"rg-cal-focusday"):n.Utils.removeClassName(l,"rg-cal-focusday"),e++}var u=this._currDate.getFullYear(),d="".concat(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",u+""):u);this._headerElement.$_title.$_year[n.Utils.TextProp]=d},e.prototype.$_buildHourMinutes=function(t){var e,i,o=this._container.doc;switch(t){case c.TimeSelectType.HOUR:e=this._hourElement,i=this._hours;break;case c.TimeSelectType.MINUTE:e=this._minuteElement,i=this._minutes}var r=e.$_UL;if(r){for(;r.lastElementChild;)r.removeChild(r.lastElementChild);i.forEach((function(e){var i=o.createElement("li");i.className="rg-cal-time-item",i.setAttribute("time-value",e.toString()),i[n.Utils.TextProp]=n.Utils.pad(e,2),i.setAttribute("kind",t),r.appendChild(i)}))}},e.prototype.$_createMonths=function(t){var e=this,i=t.createElement("div"),o=this._monthTable=t.createElement("table");o.className="rg-cal-month-table";var n=t.createElement("tbody");o.appendChild(n);for(var r=0;r<3;r++){var s=n.appendChild(t.createElement("tr"));s.className="rg-cal-month-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-month-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){var i=e._getCell(t.target);if(i){var o=parseInt(i.getAttribute("month")),n=e._currDate.getDate(),r=new Date(e._currDate.getFullYear(),o+1,0).getDate();e._currDate.setMonth(o,Math.min(n,r)),e._changeCurrent(!1),e.$_buildCalendar()}},i},e.prototype.$_createYears=function(t){var e=this,i=t.createElement("div"),o=this._yearTable=t.createElement("table");o.className="rg-cal-year-table";for(var n=o.appendChild(t.createElement("tbody")),r=0;r<3;r++){var s=n.appendChild(t.createElement("tr"));s.className="rg-cal-year-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-year-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){var i=e._getCell(t.target);if(i){var o=parseInt(i.getAttribute("year"));e._currDate.setFullYear(o),e._changeCurrent(!1)}},i},e.prototype.$_createTimeElt=function(t,e,i,o){var r=e.style;e.className="rg-cal-time rg-cal-time-".concat(o),r.display="inline-block",r.height="100%",r.overflow="hidden",r.position="relative";var s=t.createElement("div");s.className="rg-time-header";var a=t.createElement("div");switch(a.className="rg-time-title",e.$_Label=a,o){case c.TimeSelectType.HOUR:a[n.Utils.TextProp]=this._editor.hourLabel;break;case c.TimeSelectType.MINUTE:a[n.Utils.TextProp]=this._editor.minuteLabel;break;case c.TimeSelectType.SECOND:a[n.Utils.TextProp]=this._editor.secondLabel}s.appendChild(a),e.appendChild(s);var l=t.createElement("ul");l.addEventListener("wheel",this._timeWheelHandler),l.addEventListener("click",this._timeClickHandler),l.addEventListener("touchstart",this._touchStartHandler),l.addEventListener("touchend",this._touchEndHandler),l.addEventListener("touchmove",this._touchMoveHandler),l.addEventListener("dblclick",this._dblClickHandler),l.className="rg-cal-time-list";for(var h=0;h<i;h++){var u=t.createElement("li");u.className="rg-cal-time-item",u.setAttribute("time-value",h.toString()),u[n.Utils.TextProp]=n.Utils.pad(h,2),u.setAttribute("kind",o),l.appendChild(u)}e.appendChild(l),e.$_UL=l},e.prototype.$_createHour=function(t){var e=t.createElement("div");return this.$_createTimeElt(t,e,24,c.TimeSelectType.HOUR),e},e.prototype.$_createMinute=function(t){var e=t.createElement("div");return this.$_createTimeElt(t,e,60,c.TimeSelectType.MINUTE),e},e.prototype.$_createSecond=function(t){var e=t.createElement("div");return this.$_createTimeElt(t,e,60,c.TimeSelectType.SECOND),e},e.prototype.$_show=function(t,e,i,o){var r=(0,n.getDoc)(this._element),a=(0,n.getDocWin)(r);this.focused=!1,this._selected=!1,this._canceled=!1,this._footer.style.display=this.showButtons?"":"none",this._showToday?this._todayElement.style.removeProperty("display"):this._todayElement.style.setProperty("display","none");var l=this._date;this._currDate=l?new Date(l):new Date,this._today=new Date;for(var h,u=this._bodyElement;h=u.lastElementChild;)u.removeChild(h);this._bodyElement.appendChild(this._calendarElement),this.currentMode=m.DAY,this.setCurrentLoc(0),this.$_buildCalendar(),n.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element),this._timeContainer.style.height=this._dateContainer.getBoundingClientRect().height+"px",this.$_setTimeSelector(),this._setTime(this._currDate,!0);var d=n.Utils.getBrowserSize(),c=n.Utils.getClientRect(this._containerElement),p=n.Utils.getClientRect(this._container._container),_=d.width,f=d.height,g=n.Utils.getClientRect(this._element),y=a.pageXOffset||r.documentElement.scrollLeft,v=a.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(f-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(_-=18),t+=p.left-c.left,e+=p.top-c.top,(n.Utils.ieTen||n.Utils.ieOld||n.Utils.ieLeg)&&(t+=r.documentElement.scrollLeft,e+=r.documentElement.scrollTop),e+g.height>f+v&&(e=e-o.height-g.height)<0&&(e=f-g.height-2),this._dropDownPosition!=s.DropDownPosition.EDITOR?t=Math.max(0,t+i-g.width):t+g.width>_+y&&(t=_-g.width),!n.Utils.isMobile()&&this.viewGridInside&&(e=o.bottom-c.top+2,(c.bottom<o.bottom+g.height||f+v<o.bottom+g.height)&&(e=o.top-g.height-c.top-2)),n.Utils.isMobile()&&!n.Utils.isTablet()||this._element.offsetParent||(t+=r.documentElement.offsetLeft,e+=r.documentElement.offsetTop),n.Utils.move(this._element,Math.max(0,t),Math.max(0,e)),this._element.style.setProperty("width",Math.ceil(g.width)+"px")},e.prototype.$_checkFocusedWeek=function(t,e,i){var o=["rg-cal-week-year-week"];this.$_isFocusedWeek(t,e.$_yearWeek)&&o.push("rg-cal-week-year-focusweek"),this.weekSelectable&&o.push("rg-week-selectable"),e.className=o.join(" ")},e.prototype.$_isFocusedWeek=function(t,e){return t&&e&&f(t,this._startWeek)==e},e.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},e.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},e.prototype.$_setTime=function(t,e,i,o){var r=t.$_UL,s=t.$_Label;if(r){s&&e&&(s[n.Utils.TextProp]=e);var a=[].map.call(r.children,(function(t){return Number(t.getAttribute("time-value"))})),l=a.indexOf(i);if(!(l<0)){if(!this.listing||o)if(l>2){var h=a.splice(0,l-2);a.push.apply(a,h)}else if(l<2){h=a.splice(a.length-l);a.unshift.apply(a,h)}this.$_setCurrentTime(r,a,i)}}},e.prototype._setTime=function(t,e){this.$_setTime(this._hourElement,this._editor.hourLabel,t.getHours(),e),this.$_setTime(this._minuteElement,this._editor.minuteLabel,t.getMinutes(),e),this.$_setTime(this._secondElement,this._editor.secondLabel,t.getSeconds(),e)},e.prototype.$_setTimeSelector=function(){var t=this._editor.timeSelectType,e=this._hourElement.style,i=this._minuteElement.style,o=this._secondElement.style;e.display=i.display=o.display="none";var n=0;switch(t){case c.TimeSelectType.SECOND:o.display="inline-block",n++;case c.TimeSelectType.MINUTE:i.display="inline-block",n++;case c.TimeSelectType.HOUR:e.display="inline-block",n++}var r=this._headerElement.clientHeight+"px";this._hourElement.firstElementChild.style.height=this._minuteElement.firstElementChild.style.height=this._secondElement.firstElementChild.style.height=r,this._timeContainer.style.display=n?"inline-block":"none"},e.prototype.$_buildCalendar=function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],o=this._header,r=this._currDate,s=o.$_title,a=r.getFullYear(),l=r.getMonth(),h="";h=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",a+""):a+"년")+"&nbsp;",this._months&&this._months.length>0?h+=this._months[l]:h+=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(l+1).toString()):l+1+"월",s.$_year.innerHTML=h,h=s.$_year.innerText;for(var u=this._calendar.tHead.$_cells,d=0;d<7;d++){var c=u[(d+7-this._startWeek)%7];c.innerHTML=n.Utils.htmlEncode(this._weekDays[d]),c.parentElement.className="rg-cal-week-"+i[d]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var p=this._calendar.$_body,_=p.$_yearweeks,g=(d=0,_.length);d<g;d++)_[d].style.display=this.showWeeks?"":"none",_[d].onclick=this.weekSelectable?this._yearWeekClickHandler:null,_[d].ondblclick=this.weekSelectable?this._dblClickHandler:null;var m=p.$_rows,y=n.Utils.month_days[n.Utils.isLeapYear(a)?1:0][l],v=new Date(r);v.setDate(1);var C=(v.getDay()+7-this._startWeek)%7;30==y&&6==C||31==y&&C>=5?n.Utils.addChild(p,m[5]):n.Utils.removeChild(p,m[5]),28==y&&0==C?n.Utils.removeChild(p,m[4]):n.Utils.addChild(p,m[4]);var w,x,b=0,I=_[0];if(u=m[0].$_cells,C>0){var E=a,S=l-1;S<0&&(E--,S=11);var R=n.Utils.month_days[n.Utils.isLeapYear(E)?1:0][S];for(d=0;d<C;d++){(O=u[d]).removeAttribute("title");var T=new Date(this._currDate);O.$_day=d-C,T.setDate(O.$_day+1);var D=this._editor.containsRange(T);0===d&&(I.$_yearWeek=f(T,this._startWeek),I.$_span.innerText=I.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,I,D)),O.$_span.innerHTML=R-C+d+1,O.className="rg-cal-day rg-cal-prev-day "+(D?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(d+this._startWeek)%7]}}for(d=C;d<7;d++){(O=u[d]).removeAttribute("title"),O.$_day=b++,O.$_span.innerHTML=b,(v=new Date(this._currDate)).setDate(b);D=this._editor.containsRange(v);0===d&&(I.$_yearWeek=f(v,this._startWeek),I.$_span.innerText=I.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,I,D)),w=this.$_isFocusedDay(r,b),x=this.$_isToday(r,b),w&&this._editor._editor.setAttribute("aria-activedescendant",O.id),O.setAttribute("aria-label",h+" "+b.toString()),x?O.setAttribute("aria-current","date"):O.removeAttribute("aria-current"),D?O.removeAttribute("aria-disabled"):O.setAttribute("aria-disabled","true"),t="rg-cal-day "+(w?"rg-cal-focusday ":""),t+=x?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(v))?e.styleName+" rg-cal-holiday ":"",t+=D?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(d+this._startWeek)%7],O.className=t,e&&(t=e.getTooltip(this.$_getCellDate(r,b)))&&(O.title=t)}for(var k=1;k<6&&b<y;k++){u=m[k].$_cells;var M=_[k];for(d=0;d<7;d++)if(b<y){(O=u[d]).removeAttribute("title"),O.$_day=b++,(v=new Date(this._currDate)).setDate(b);D=this._editor.containsRange(v);0===d&&(M.$_yearWeek=f(v,this._startWeek),M.$_span.innerText=M.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,M,D)),O.$_span.innerHTML=b,w=this.$_isFocusedDay(r,b),x=this.$_isToday(r,b),w&&this._editor._editor.setAttribute("aria-activedescendant",O.id),O.setAttribute("aria-label",h+" "+b.toString()),x?O.setAttribute("aria-current","date"):O.removeAttribute("aria-current"),D?O.removeAttribute("aria-disabled"):O.setAttribute("aria-disabled","true"),t="rg-cal-day "+(w?"rg-cal-focusday ":""),t+=this.$_isToday(r,b)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(v))?e.styleName+" rg-cal-holiday ":"",t+=D?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(d+this._startWeek)%7],O.className=t,e&&(t=e.getTooltip(this.$_getCellDate(r,b)))&&(O.title=t)}else for(var L=1;d<7;d++){var O;(O=u[d]).removeAttribute("title"),O.$_day=b++,(v=new Date(this._currDate)).setDate(b);D=this._editor.containsRange(v);O.$_span.innerHTML=L++,O.className="rg-cal-day rg-cal-next-day "+(D?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(d+this._startWeek)%7]}}},e.CLOSE_UP="onDatePickerCloseUp",e}(a.EventAware),b=function(t){function e(e,i){var o=t.call(this,e,i)||this;o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._dropDownPosition=s.DropDownPosition.BUTTON,o._dropDownWhenClick=!1,o._showToday=!0,o._yearDisplayFormat="{Y}년",o._monthDisplayFormat="{M}월",o._months=null,o._weekDays=null,o._showWeeks=!1,o._startWeek=0,o._weekSelectable=!1,o._weekSeparator="",o._commitOnSelect=!1,o._holidays=null,o._showButtons=!0,o._saveLabel="Save",o._cancelLabel="Cancel",o._deleteLabel="Delete",o._todayLabel="Today",o._timeSelectType=c.TimeSelectType.NONE,o._currentLoc=0,o._hourLabel="시",o._minuteLabel="분",o._secondLabel="초",o._holidayCollection=new w,o._closing=!1,o._regx=/[\d\-.:/apmz+ ]/i,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o);var n=e.editorOptions;o._yearDisplayFormat=n.yearDisplayFormat,o._monthDisplayFormat=n.monthDisplayFormat,o._months=n.months,o._weekDays=n.weekDays,o._baseZindex=e.displayOptions.baseZindex,o._list=new x(e.container,o),o._list.addListener(o);var r=o._editor;return r.setAttribute("aria-owns",o._list._element.id),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true"),o}return i.__extends(e,t),e.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),t.prototype._doDispose.call(this)},_dp(e,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){t!=this.datetimeFormat&&(this.datetimeFormat=t,this._changed())}}),_dp(e,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(e,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(e,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(e,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(e,"showToday",{get:function(){return this._showToday},set:function(t){this._showToday=t}}),_dp(e,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){this._yearDisplayFormat=t}}),_dp(e,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){this._monthDisplayFormat=t}}),_dp(e,"months",{get:function(){return this._months},set:function(t){this._months=t.slice()}}),_dp(e,"weekDays",{get:function(){return this._weekDays},set:function(t){this._weekDays=t}}),_dp(e,"showWeeks",{get:function(){return this._showWeeks},set:function(t){this._showWeeks=t}}),_dp(e,"startWeek",{get:function(){return this._startWeek},set:function(t){t=null==t||isNaN(t=Math.floor(t))?0:t,this._startWeek=t}}),_dp(e,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){this._weekSelectable=t}}),_dp(e,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){this._weekSeparator=t}}),_dp(e,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(e,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())}}),_dp(e,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())}}),_dp(e,"holidays",{get:function(){return this._holidays},set:function(t){this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new w,this._holidayCollection.editor=this,this._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()}}),_dp(e,"listing",{get:function(){return this._list.listing}}),_dp(e,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(e,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel=t}}),_dp(e,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t}}),_dp(e,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t}}),_dp(e,"todayLabel",{get:function(){return this._todayLabel},set:function(t){this._todayLabel=t}}),_dp(e,"hourLabel",{get:function(){return this._hourLabel},set:function(t){this._hourLabel=t}}),_dp(e,"minuteLabel",{get:function(){return this._minuteLabel},set:function(t){this._minuteLabel=t}}),_dp(e,"secondLabel",{get:function(){return this._secondLabel},set:function(t){this._secondLabel=t}}),_dp(e,"hours",{get:function(){return this._hours},set:function(t){var e=this;if("string"==typeof t){this._hours=[];try{t.split(",").forEach((function(t){var i=t.split("-");if(1===i.length&&i[0]&&!isNaN(parseInt(i[0])))e._hours.push(parseInt(i[0]));else if(i.length=2)for(var o=parseInt(i[0]),n=parseInt(i[1]),r=o;r<n;r++)e._hours.indexOf(r)<0&&e._hours.push(r)}))}catch(t){this._hours=void 0}}else this._hours=t?t.slice():null}}),_dp(e,"minutes",{get:function(){return this._minutes},set:function(t){this._minutes=t?t.slice():null}}),_dp(e,"timeSelectType",{get:function(){return this._timeSelectType},set:function(t){this._timeSelectType=t}}),e.prototype.dropDown=function(t){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var e=(0,n.getDoc)(this._container),i=(0,n.getDocWin)(e),o=this._grid.editorOptions,r=this._list,s=e.documentElement,a=n.Utils.getClientRect(this._container);return this._currentLoc=0,r.viewGridInside=o.viewGridInside,r.dropDownPosition=this._dropDownPosition,r.showToday=this._showToday,r.yearDisplayFormat=this._yearDisplayFormat,r.monthDisplayFormat=this._monthDisplayFormat,r.months=this._months,r.minDate=this._minDate,r.maxDate=this._maxDate,r.showWeeks=this._showWeeks,r.startWeek=this._startWeek||0,r.weekSelectable=this.weekSelectable,r.weekSeparator=this.weekSeparator,r.showButtons=this.showButtons,r.saveLabel=this.saveLabel,r.cancelLabel=this.cancelLabel,r.deleteLabel=this.deleteLabel,r.currentMode=m.DAY,r.holidays=this._holidayCollection.isNull?o._holidayCollection:this._holidayCollection,r.hours=this.hours,r.minutes=this.minutes,r.todayLabel=this.todayLabel,this._weekDays&&this._weekDays.length>0&&r.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(s),r.show(s,0,0,0,null),this._centerPopup(s,r._element)):r.show(s,a.cx+1,a.cy+a.height,this._cellBounds.width,n.Utils.getClientRect(this._editor)),r.focused=t,this._editor.setAttribute("aria-expanded","true"),!n.Utils.isSlotMode()&&i.addEventListener("pointerdown",this._globalMouseHandler),!0}},e.prototype.closeUp=function(t){if(this.listing){var e=(0,n.getDoc)(this._container),i=(0,n.getDocWin)(e);this._closing=!0;try{i.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},e.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=l.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete",this._todayLabel="Today",this._timeSelectType=c.TimeSelectType.NONE,this._hours=null,this._minutes=null},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editField().dataType;this._weekSelectable=this._weekSelectable&&i!==l.ValueType.DATE&&i!==l.ValueType.DATETIME},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this.weekSelectable?this._date=_(e):this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},e.prototype.getEditValue=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o=t.prototype.getEditValue.call(this,e),n=this._editField().dataType;return o&&i&&(n==l.ValueType.DATE||n==l.ValueType.DATETIME)&&(o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},e.prototype._createEditor=function(e){return t.prototype._createEditor.call(this,e)},e.prototype._textHandler=function(){this._requestStart(!1)},e.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list,o=this.listing,r=o&&i.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return n.Utils.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return n.Utils.stopEvent(e,!0),!0;break;case 36:case 35:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(36===e.keyCode?i.startDay():i.endDay()),!0;break;case 37:case 39:if(r){if(0===this._currentLoc)return this.$_selectDate(i.incDay(37===e.keyCode?-1:1)),n.Utils.stopEvent(e,!0),!0;if(this._setLocation(39===e.keyCode))return n.Utils.stopEvent(e,!0),!0}break;case 33:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.incMonth(e.shiftKey?-12:-1)),!0;break;case 34:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.incMonth(e.shiftKey?12:1)),!0;break;case 40:if(e.altKey&&!o)return this._requestStart(),n.Utils.stopEvent(e,!0),this._list.focused=!0,this.$_setListDate(),!0;if(o)return n.Utils.stopEvent(e,!0),r?0===this._currentLoc?this.$_selectDate(i.incDay(7)):1===this._currentLoc?this.$_selectDate(i.incHour(1)):2===this._currentLoc?this.$_selectDate(i.incMinute(1)):3===this._currentLoc&&this.$_selectDate(i.incSecond(1)):this._list.focused=!0,!0;break;case 38:if(e.altKey&&o)return this.closeUp(!1),n.Utils.stopEvent(e,!0),!0;if(o)return n.Utils.stopEvent(e,!0),r?0===this._currentLoc?this.$_selectDate(i.incDay(-7)):1===this._currentLoc?this.$_selectDate(i.incHour(-1)):2===this._currentLoc?this.$_selectDate(i.incMinute(-1)):3===this._currentLoc&&this.$_selectDate(i.incSecond(-1)):this._list.focused=!1,!0;break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(n.Utils.stopEvent(e,!0),this._list.date=new Date,this.$_selectDate(this._list.date));break;case 9:if(r&&this.timeSelectType!==c.TimeSelectType.NONE&&this._setLocation(!e.shiftKey))return n.Utils.stopEvent(e,!0),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._setLocation=function(t){var e=this._timeSelectType,i=this._currentLoc,o=1;if(e!==c.TimeSelectType.NONE){switch(e){case c.TimeSelectType.SECOND:o++;case c.TimeSelectType.MINUTE:o++;case c.TimeSelectType.HOUR:o++}return t?++i:--i,i<0||i>=o?!1:(this._list.setCurrentLoc(this._currentLoc=i),!0)}this._currentLoc=0},e.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var i=this._list,o=e.keyCode||e.which,r=String.fromCharCode(o);if(r.toLocaleLowerCase()==this.todayChar){if(n.Utils.stopEvent(e,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today),i._setTime(i.today,!0),!0}else{if(n.Utils.isFirefox&&(e.ctrlKey||0===o))return void t.prototype._keyPressHandler.call(this,e);if(n.Utils.isMac&&e.metaKey&&n.Utils.included(o,99,118))return void t.prototype._keyPressHandler.call(this,e);if(!this._regx.test(r))return void e.preventDefault()}t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},e.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(p,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},e.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),t.prototype._dispatchChange.call(this))},e.prototype._changeHandler=function(e){t.prototype._changeHandler.call(this,e)},e.prototype._pasteHandler=function(e){t.prototype._pasteHandler.call(this,e)},e.prototype._copyHandler=function(e){t.prototype._copyHandler.call(this,e)},e.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this)&&(this._isMobile?e&&this.dropDown(!1):!1!==e&&this.dropDown(!1),!0)},e.prototype.setBounds=function(e,i,o,n,r){t.prototype.setBounds.call(this,e,i,o,n,r)},e.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},e.prototype.dropDownList=function(t){this.dropDown(!0)},e.prototype.closeList=function(t){this.closeUp(t)},e.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown(!0)},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._isDateEditor=function(){var t=this._editField().dataType;return t==l.ValueType.DATE||t==l.ValueType.DATETIME||!this.weekSelectable},e.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?f(t,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},e.prototype.$_setListDate=function(){var t,e=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),i=this._editor.value;switch(this._mask&&(i=this._mask.getStripValue()),t=this.weekSelectable?_(i):this._dateConverter.getDateNull(i),this._defaultShowDate){case l.DefaultShowDate.TODAY:t=new Date;break;case l.DefaultShowDate.NORMAL:break;case l.DefaultShowDate.TODAY_WHEN_NULL:t=t||new Date;break;case l.DefaultShowDate.DEFAULT_WHEN_NULL:t=t||e;break;case l.DefaultShowDate.DEFAULT:t=e}t&&(this._list.date=t)},e.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},e.INPUT_CSS="rg-date-editor",e.$$_LIST_ID=0,e}(r.PopupCellEditor);Qr.DateCellEditor=b;var I=function(t){function e(e,i,o){var r=t.call(this)||this;r._dropDownPosition=s.DropDownPosition.BUTTON,r._viewGridInside=!1,r._selected=!1,r._focused=!1;var a=(0,n.getDocWin)(e.doc);return r._jquery=a&&a.jQuery,r._editor=i,r._container=e,r._btOptions=o,r._element=r.$_createList(e.doc),r}return i.__extends(e,t),e.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,t.prototype._doDispose.call(this)},_dp(e,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(e,"date",{get:function(){return this._date},set:function(t){if(this._date=t,t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}}}),_dp(e,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t}}),_dp(e,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t}}),_dp(e,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t}}),_dp(e,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")}}),_dp(e,"selected",{get:function(){return this._selected}}),_dp(e,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")}}),e.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},e.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},e.prototype.$_createList=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e.className="rg-calendar",e},e.prototype.show=function(t,e,i,o,r){if(this._containerElement=n.Utils.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,r)},e.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){var e=t.date;e&&!this._editor.containsRange(e)||(e?(this._date=new Date(e),this._selected=!0):(this._date=void 0,this._selected=!0),this.fireEvent(x.CLOSE_UP,!0))}.bind(this)),!0)},e.prototype.$_show=function(t,e,i,o){var r=this._container.doc,a=(0,n.getDocWin)(r);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var l=this._date;this._currDate=l?new Date(l):new Date;var h=n.Utils.getBrowserSize(),u=n.Utils.getClientRect(this._containerElement),d=n.Utils.getClientRect(this._container._container),c=h.width,p=h.height,_=n.Utils.getClientRect(this._element),f=a.pageXOffset||r.documentElement.scrollLeft,g=a.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(p-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(c-=18),t+=d.left-u.left,e+=d.top-u.top,(n.Utils.ieTen||n.Utils.ieOld||n.Utils.ieLeg)&&(t+=r.documentElement.scrollLeft,e+=r.documentElement.scrollTop),e+_.height>p+g&&o&&(e=e-o.height-_.height)<0&&(e=p-_.height-2),this._dropDownPosition!=s.DropDownPosition.EDITOR?t=Math.max(0,t+i-_.width):t+_.width>c+f&&(t=c-_.width),!n.Utils.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-u.top+2,(u.bottom<o.bottom+_.height||p+g<o.bottom+_.height)&&(e=o.top-_.height-u.top-2)),n.Utils.isMobile()&&!n.Utils.isTablet()||this._element.offsetParent||(t+=r.documentElement.offsetLeft,e+=r.documentElement.offsetTop),n.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},e.prototype.today=function(){return this.date=new Date},e.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&n.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},e.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=n.Utils.month_days[n.Utils.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},e}(a.EventAware),E=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._dropDownPosition=s.DropDownPosition.BUTTON,o._dropDownWhenClick=!1,o._commitOnSelect=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._closing=!1,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(o),o}return i.__extends(e,t),e.prototype._doDispose=function(){this._globalMouseHandler=null,t.prototype._doDispose.call(this)},_dp(e,"list",{get:function(){return this._list},set:function(t){this._list=t}}),_dp(e,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t}}),_dp(e,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t}}),_dp(e,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)}}),_dp(e,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)}}),_dp(e,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(e,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t}}),_dp(e,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t}}),e.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=(0,n.getDoc)(this._container),e=(0,n.getDocWin)(t),i=this._grid,o=this._list=new I(i.container,this,this._btOptions),r=t.documentElement,s=n.Utils.getBounds(this._container);return o.addListener(this),o.viewGridInside=this._options&&this._options.viewGridInside,o.dropDownPosition=this._dropDownPosition,o.minDate=this._minDate,o.maxDate=this._maxDate,this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(r),o.show(r,0,0,0,null),this._centerPopup(r,o._element)):o.show(t.documentElement,s.x+1,s.y+s.height,this._cellBounds.width,n.Utils.getClientRect(this._editor)),!n.Utils.isSlotMode()&&e.addEventListener("pointerdown",this._globalMouseHandler),!0}return!1},e.prototype.closeUp=function(t){if(this.listing){var e=(0,n.getDoc)(this._container),i=(0,n.getDocWin)(e);this._closing=!0;try{!n.Utils.isSlotMode()&&i.removeEventListener("pointerdown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},e.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},e.prototype.dropDownList=function(){this.dropDown()},e.prototype.closeList=function(t){this.closeUp(t)},e.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},e.prototype.selectDate=function(t){this.$_selectDate(t)},e.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},e.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},_dp(e,"listing",{get:function(){return!!this._list&&this._list.listing}}),e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},e.prototype._isDateEditor=function(){return!0},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},e.prototype.getEditValue=function(e,i){var o=t.prototype.getEditValue.call(this,e),n=this._editField().dataType;return o&&i&&(n==l.ValueType.DATE||n==l.ValueType.DATETIME)&&(o=o.getTime(),o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},e.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},e.prototype._textHandler=function(){this._requestStart()},e.prototype._compositionstartHandler=function(){this._requestStart()},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list,o=this.listing,r=o&&i.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return n.Utils.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return n.Utils.stopEvent(e,!0),!0;break;case 36:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.firstDay()),!0;break;case 35:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:case 39:if(r)return n.Utils.stopEvent(e,!0),i&&i.keydown(e),!0;break;case 33:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(r)return n.Utils.stopEvent(e,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(e.altKey&&!o)return this._requestStart(),n.Utils.stopEvent(e,!0),!0;if(o)return n.Utils.stopEvent(e,!0),r?i.keydown(e):(i.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&o)return this.closeUp(!1),n.Utils.stopEvent(e,!0),!0;if(o){if(n.Utils.stopEvent(e,!0),r)i.date.getDate()<=7?i.focused=!1:i.keydown(e);else i.focused=!1;return!0}break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(n.Utils.stopEvent(e,!0),i.date=new Date,this.$_selectDate(i.date))}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var i=this._list,o=String.fromCharCode(e.keyCode||e.charCode);if(o.toLocaleLowerCase()==this.todayChar){if(n.Utils.stopEvent(e,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today()),!0}else{if(n.Utils.isFirefox&&(e.ctrlKey||0===e.charCode))return t.prototype._keyPressHandler.call(this,e);if(!this._regx.test(o))return void e.preventDefault()}t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},e.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(p,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},e.prototype.setBounds=function(e,i,o,n,r){t.prototype.setBounds.call(this,e,i,o,n,r)},e.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},e.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),t.prototype._dispatchChange.call(this))},e.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},e.INPUT_CSS="rg-btdate-editor",e}(r.PopupCellEditor);Qr.BTDateCellEditor=E;var R=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o}return i.__extends(e,t),_dp(e,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(e,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(e,"native",{get:function(){return!0}}),_dp(e,"buttonCount",{get:function(){return 1}}),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","date"),i.tabIndex=this._isMobile?-1:0,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this)},e.prototype.hasButton=function(t,e){return null==t||t},e.prototype.setVisible=function(e,i){void 0===i&&(i=!1),t.prototype.setVisible.call(this,e,i),this.visible&&this._editor.click()},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor;i.min=this._minDate?this.$_toInputDate(this._minDate):"",i.max=this._maxDate?this.$_toInputDate(this._maxDate):""},e.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){if(40===e.keyCode)if(e.altKey)return this._requestStart(),!0;return t.prototype._keyDownHandler.call(this,e)}},e.prototype.setBounds=function(e,i,o,r,s){t.prototype.setBounds.call(this,e,i,o,r,0),this._editor&&n.Utils.isiOS&&(this._editor.style.minWidth=o+"px",this._editor.style.width=o+"px")},e.prototype.$_toInputDate=function(t){return t?e.Formatter.getText(t):""},e.INPUT_CSS="rg-ndate-editor",e.Formatter=h.DateTimeWriter.getFormatter("yyyy-MM-dd"),e}(r.TextCellEditor);return Qr.NativeDateCellEditor=R,Qr}var is,os={},ns={};function rs(){if(is)return ns;is=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.RowMoveRequest=ns.HeaderResizeRequest=ns.RowResizeRequest=ns.ColumnMoveRequest=ns.ColumnResizeRequest=ns.SelectRequest=ns.CellRequest=ns.GridEditRequest=void 0;var t=d,e=Mr(),i=un(),o=To(),n=function(e){function i(t){var i=e.call(this)||this;return i._grid=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),i.prototype.canFocus=function(){return!0},i}(e.EditRequest);ns.GridEditRequest=n;var r=function(e){function i(t){var i=e.call(this,t.grid)||this;return i._index=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._index.dispose(),this._index=null,e.prototype._doDispose.call(this)},_dp(i,"index",{get:function(){return this._index}}),i}(n);ns.CellRequest=r;var s=function(e){function i(t,i){var o=e.call(this,t)||this;return o._style=i,o}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"style",{get:function(){return this._style}}),_dp(i,"manager",{get:function(){return this.grid.selections}}),_dp(i,"selectable",{get:function(){return!0}}),i}(r);ns.SelectRequest=s;var a=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._layout=null,e.prototype._doDispose.call(this)},_dp(i,"layout",{get:function(){return this._layout}}),_dp(i,"x",{get:function(){return this._x}}),_dp(i,"y",{get:function(){return this._y}}),_dp(i,"offset",{get:function(){return this._offset}}),i.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},_dp(i,"cursor",{get:function(){return"col-resize"}}),i}(n);ns.ColumnResizeRequest=a;var l=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._layout=null,e.prototype._doDispose.call(this)},_dp(i,"layout",{get:function(){return this._layout}}),_dp(i,"x",{get:function(){return this._x}}),_dp(i,"y",{get:function(){return this._y}}),_dp(i,"offset",{get:function(){return this._offset},set:function(t){this._offset=t}}),i.prototype.init=function(t,e,i,n){return this._layout=o.CellLayoutItem.getSource(t),this._x=e,this._y=i,null!=n&&(this._offset=n),this},_dp(i,"cursor",{get:function(){return"default"}}),i}(n);ns.ColumnMoveRequest=l;var h=function(e){function i(t){var i=e.call(this,t)||this;return i._itemIndex=-1,i._variable=!1,i._rowTop=0,i._offset=0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"itemIndex",{get:function(){return this._itemIndex}}),_dp(i,"variable",{get:function(){return this._variable}}),_dp(i,"rowTop",{get:function(){return this._rowTop}}),_dp(i,"offset",{get:function(){return this._offset}}),i.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},_dp(i,"cursor",{get:function(){return"row-resize"}}),i.prototype.canFocus=function(){return!1},i}(n);ns.RowResizeRequest=h;var u=function(e){function i(t){var i=e.call(this,t)||this;return i._offset=0,i._top=0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"top",{get:function(){return this._top}}),_dp(i,"offset",{get:function(){return this._offset}}),i.prototype.init=function(t,e){return this._top=t,this._offset=e,this},_dp(i,"cursor",{get:function(){return"row-resize"}}),i}(n);ns.HeaderResizeRequest=u;var c=function(e){function o(t){var i=e.call(this,t)||this;return i._itemIndex=-1,i._offset=0,i._layout=null,i}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"itemIndex",{get:function(){return this._itemIndex}}),_dp(o,"offset",{get:function(){return this._offset}}),_dp(o,"layout",{get:function(){return this._layout}}),o.prototype.init=function(t,e){return this._selStyle=t&&t.style,this._selStyle&&this._selStyle!=i.SelectionStyle.COLUMNS&&this._selStyle!=i.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=t.getBounds().top,this._layout=t.startLayout,this._offset=e-this._itemIndex):(this._itemIndex=e,this._offset=0,this._layout=null),this},_dp(o,"cursor",{get:function(){return this.grid.dataDropOptions.cursor}}),o.prototype.canFocus=function(){return this._selStyle==i.SelectionStyle.COLUMNS||this._selStyle==i.SelectionStyle.SINGLE_COLUMN},o}(n);return ns.RowMoveRequest=c,ns}var ss,as={};function ls(){if(ss)return as;ss=1,Object.defineProperty(as,"__esModule",{value:!0}),as.TooltipManager=as.ToolTipView=as.TooltipOptions=void 0;var t=d,e=G(),i=S(),o=ln(),n=function(e){function i(t){var i=e.call(this)||this;return i._visible=!0,t&&i.assignFrom(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(i,"message",{get:function(){return this._message},set:function(t){this._message=t}}),i.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:t&&e.prototype.assignFrom.call(this,t)},i}(e.Base);as.TooltipOptions=n;var r=function(e){function o(t){var o=e.call(this)||this;return o._minWidth=0,o._maxWidth=0,o._dropDownCount=8,o._showing=!1,o.$_touchendHandler=null,o._container=t,o._element=o.$_createElement(t.doc),o.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(o),i.Utils.isMobile()&&o._element.addEventListener("touchend",o.$_touchendHandler,!1),o}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),i.Utils.detach(this._element)},_dp(o,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(o,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(o,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t}}),o.prototype.show=function(t,e,i,o,n){this._showing=!0;try{this.$_show(t,e,i,o,n)}finally{this._showing=!1}},o.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},o.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},o.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},o.prototype.$_show=function(t,e,o,n,r){var s=this._container.gridView.displayOptions.baseZindex+4,a=this._element,l=t.message;if(a&&l){this._span.innerHTML=l.replace(/\n/g,"<br>"),i.Utils.setClassName(a,"rg-tooltip");var h=a.style;h.position="absolute",h.left=e+"px",h.top=o+"px",h.overflow="hidden",h.zIndex=String(s),this._container._container.appendChild(a);var u=a.getBoundingClientRect(),d=this._container._container.getBoundingClientRect();h.left=u.right>d.right?Math.max(d.right-u.width-d.left-2,0)+"px":a.style.left,u.bottom>d.bottom&&(a.style.top=r?Math.max(0,o-(u.bottom-d.bottom))+"px":Math.max(o-u.height-n,0)+"px"),h.visibility="visible"}},o}(e.Base);as.ToolTipView=r;var s=function(e){function i(t){var i=e.call(this)||this;return i._active=!1,i._pos=new o.Point,i._container=t.container,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._container=null,e.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._active}}),i.prototype.show=function(t,e,i,o,s){if(!this._active&&(this.close(),(t=t instanceof n?t:t?new n(t):null)&&t.visible)){this._tipView||(this._tipView=new r(this._container)),this._tipView.show(t,e,i,o,s);var a=this._container.gridView;return a&&this._pos.set(a.mouseX,a.mouseY),this._active=!0,!0}return!1},i.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},i}(e.Base);return as.TooltipManager=s,as}var hs,us,ds={},cs={};function ps(){if(hs)return cs;hs=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.CustomCellRendererImpl=cs.CustomCellRenderer=void 0;var t=d,e=Wi(),i=function(e){function i(t){var i=e.call(this)||this;return i._type=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"type",{get:function(){return this._type}}),i}(e.DataCellRenderer);cs.CustomCellRenderer=i;var o=function(e){function i(t,i){var o=e.call(this)||this;return o._inputFocusable=!1,t&&"function"==typeof t.render?(o._impl=t,o._impl.type=i,o.assignFrom(o._impl)):o._impl=null,o._itemClickable=!0,o}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),_dp(i,"type",{get:function(){return this._impl&&this._impl.type}}),i.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},i.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},i.prototype._doRenderCell=function(t,e,i,o,n){var r={};r.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,n,r)},i.prototype.preventDefaultEditClick=function(t){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,t):e.prototype.preventDefaultEditClick.call(this,t)},i.prototype._doEditClick=function(t,i,o){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,t,i,o):e.prototype._doEditClick.call(this,t,i,o)},i.prototype.canEditClickAt=function(t){return this._impl&&this._impl.canEditClickAt?this._impl.canEditClickAt.call(this,t):e.prototype.canEditClickAt.call(this,t)},i.prototype.preventDefaultClick=function(t){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,t):e.prototype.preventDefaultClick.call(this,t)},i.prototype._doClick=function(t,i){return this._impl&&this._impl.click?this._impl.click.call(this,i):e.prototype._doClick.call(this,t,i)},i.prototype._doEditKey=function(t,i,o){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,i,o):e.prototype._doEditKey.call(this,t,i,o)},i.prototype.canClick=function(t){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,t):e.prototype.canClick.call(this,t)},i.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):e.prototype.canEdit.call(this)},i.prototype.canEditKey=function(t){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,t):e.prototype.canEditKey.call(this,t)},i}(e.DataCellRenderer);return cs.CustomCellRendererImpl=o,cs}function _s(){if(us)return ds;us=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.DefaultEditController=ds.EditValueCommand=void 0;var t=d,e=fn(),i=G(),o=Do(),n=Cn(),r=C(),s=S(),a=Mt(),l=ji(),h=ps(),u=function(e){function i(t,i,o,n){var r=e.call(this)||this;return r._row=t,r._field=i,r._value=o,r._column=n,r._oldValue=s.Utils.deepCopy(t.getData(i)),r}return t.__extends(i,e),i.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},i.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},i.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},i}(a.EditCommand);ds.EditValueCommand=u;var c=function(i){function a(t){var e=i.call(this)||this;return e._editIndex=new o.CellIndex,e._starting=!1,e._needPrepare=!1,e._modified=!1,e._commiting=!1,e._canceling=!1,e._resetting=!1,e._dirty=!1,e._editable=!1,e._readOnly=!1,e._resetFocused=!1,e._grid=t,e._defaultEditor=t.delegate.getDefaultCellEditor(),e._defaultEditor&&e._defaultEditor.setController(e),e._defaultEditor&&e._internalHideEditor(e._defaultEditor),e}return t.__extends(a,i),a.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,i.prototype._doDispose.call(this)},_dp(a,"readOnly",{get:function(){return this._readOnly}}),_dp(a,"editable",{get:function(){return this._editable}}),a.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},a.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},a.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},a.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},a.prototype.onEditorChange=function(t){if(this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var i=t.getEditValue(!1,!1);i=i===e.CellEditor.Unselected?t.getEditText():i,this._grid._editorChange(t,this._editIndex,i)}},a.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},a.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},a.prototype.onEditorCommit=function(t){return this.commitEditor(!0,!1,!0,!1)},_dp(a,"editIndex",{get:function(){return this._editIndex.clone()}}),_dp(a,"editing",{get:function(){return this._editor&&this._editor.editing}}),_dp(a,"editValue",{get:function(){return this._editor&&this._editor.value}}),a.prototype.setFocus=function(t,e){var i;if(e&&(!this._editor||e!==this._editor.editor)){var o=(0,s.getWin)(e),n=this._grid,r=void 0,a=null===(i=this._editor)||void 0===i?void 0:i.editor;if((e instanceof o.HTMLInputElement||e instanceof o.HTMLSelectElement)&&(r=n.getTableCell(e))){var u=n.getCellType(r),d=n.getTableView(r),c=d&&d.tableCellByCell&&d.tableCellByCell(r);if("data"===u){var p=this._grid.focusedIndex.clone(),_=this._grid.getBodyCellAt(p,!0),f=_&&_.renderer2;if((f instanceof l.TemplateCellRenderer||f instanceof h.CustomCellRendererImpl)&&f.inputFocusable)return;a&&(a.tabIndex=-1)}else if("inlineFilter"===u){if(n.isItemEditing()&&n.filterPanel.beforeCommit&&n.commit(!1),!n.isEditing())return a&&(a.tabIndex=0),void n.makeColumnVisible(c.layout&&c.layout.firstColumn)}else if(s.Utils.included(u,"header","layoutHeader","footer","summary")&&!c.isClickableElt(e)&&s.Utils.isFocusableTemplate(r,e))return}}this.$_focusToEditor(t,e)},a.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},a.prototype.invalidateEditor=function(){this._dirty=!0},a.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},a.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0,!1,!0,!1))},a.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},a.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&this._prepareEditor(t))},a.prototype.requestPrepareEditor=function(){this._needPrepare=!0},a.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit()){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing&&(!this._showEditorTimer&&this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return!0}},a.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},a.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},a.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},a.prototype.commitEditor=function(t,i,n,r){if(!this.editing||this._commiting)return!0;var s=this._editor;if(!s)return!1;var a,l,h=this._grid,u=h.editOptions,d=this._editIndex,c=d.dataColumn,p=!0,_=s._mask;this._commiting=!0;try{if(s.commit(),(this._modified||s.isEdited())&&c&&c.dataIndex>=0)try{try{if((a=_&&!_.checkValid()?e.CellEditor.InvalidFormat:s.getEditValue(!0,!0))===e.CellEditor.InvalidFormat)p=!1,u.showInvalidFormatMessage&&_&&_.showInvalidFormatMessage&&alert(_&&_.invalidFormatMessage||u.invalidFormatMessage);else if(a===e.CellEditor.Unselected)this._modified=!1,p=!0;else{var f={text:s.getEditText(),value:a};this._grid.getEditValue(s,d,f),a=f.value,p=r||this._grid.editorCommit(d,this._getData(d),a)}}catch(t){p=!1}this._grid.isItemEditing()?p&&a!==e.CellEditor.Unselected&&(this._setData(d,a),this._grid.isItemEditing(d.item)&&(a=this._getData(d),this._grid.validateCellCommit(d,a)),this._modified=!1):this._modified=!1}catch(t){l=t,p=!1}if(this._resetting=!0,p&&t)try{this._internalHideEditor(s),this._prepareEditor(d,n),s.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(l){if(i)throw l;u.showCommitError&&alert(l.message||l)}}finally{this._commiting=!1}if(p&&h.isCellEditing()){var g=h.itemSource,m=g.editingItem.invalidFields,y=h.validationManager.getError(d);if(y)return m.push(c.dataIndex),u.showCommitError&&alert(y.userMessage||y.message||y),!1;if(m.indexOf(c.dataIndex)>=0&&m.splice(m.indexOf(c.dataIndex),1),h.validationManager.clearInvalidCell(d),m.length>0)return!0;var v=h.canMergeEditing(h.getBodyCellAt(d,!0));if(!g.commit(v))return g.cancel(),!0;h.validationManager.cloneError(-1,d.dataId);var C=o.CellIndex.temp(h,d.itemIndex,c);if(v&&a!==e.CellEditor.Unselected){var w=c.layout.merges.getRoom(d),x={},b={};b[c.fieldName]=a;for(var I=w.head;I<=w.tail;I++){var E=h.getItem(I);C.itemIndex=E.index,E.isDataRow&&(x[E.dataRow]=b),h.validationManager.clearInvalidCell(C)}g.updateRows2(x)}}return p},a.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},a.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof n.SearchCellEditor&&this._editor.fillItems(e,i,o)},a.prototype.buttonClicked=function(t,e){var i=this._editor,n=this._grid,r=n.getBodyCellAt(t,!1),s=t.layout.getDataColumn();i&&o.CellIndex.areEquals(this._editIndex,t)&&i.hasButton(n.displayOptions.showNativeEditButton,r.editor||s.editor)&&i.buttonClicked(this._editIndex,e)},a.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},a.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},a.prototype.getData=function(t){return this._getData(t)},a.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},a.prototype.currentEditor=function(){return this._editor},a.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(t.editIndex)},a.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},a.prototype.$_getCellEditor=function(t){var i,o=this._grid,n=o.getBodyCellAt(t);if(!(i=n&&n.editor)){var r=t.valueColumn;r&&(i=r.editor)}var s=o.delegate.getCellEditor(e.CellEditor.getEditorType(i));return s&&(s.initOptions(),i&&s.applyOptions(i),s.setController(this)),s},a.prototype.resetEditable=function(t){var e=this._editor;if(!e)return!1;var i=this._grid;e.setReadOnly(!1);var o=i.editorOptions,n=t.valueColumn,s=t.item,a=i.canEditAt(t);if(o._titleExprStatement&&this._editor.setEditorTitle(t),!a)return this._editable=!1,this.$_hideEdit(t,this._editor),!1;var l=!i.canWriteAt(t);if(!l){var h=s.dataSource,u=h?h.getField(t.dataField):null;l=!u||u.dataType==r.ValueType.OBJECT&&null==(n.objectKey||u.objectKey)}return this._readOnly=l,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(t),this._editable=!0,!0},a.prototype.remainFocusing=function(t){this._resetFocused=t},a.prototype._prepareEditor=function(t,e){var i=this;void 0===e&&(e=!0);var o=this._grid,n=o.editOptions;if(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor)){this._editIndex.assign(t);var r,s=this._getData(t);if(this.resetEditable(t))this._editor.prepare(),this._editor.setEditValue(s),this._editor.selectAll(),n.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=(r=this._resetFocused,setTimeout((function(){!i._editor.editing&&!r&&o.showEditor(null,!1,i._editor.dropDownWhenClick),i.remainFocusing(!1),i._showEditorTimer=null}),100)))):this._editor.setVisible(!1),e&&this.$_focusToEditor();else this._editor&&(this._editor.editor.value=this._editor._valToStr(s))}},a.prototype._hideEditor=function(t){if(void 0===t&&(t=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,t&&this.$_focusToEditor()}},a.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},a.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e)for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i])},a.prototype._editorActivated=function(t){this._grid.editorActivated(t)},a.prototype._activateEditor=function(t,i,o){void 0===o&&(o=!1);var n=this._grid,r=this._editor,a=this._editIndex,l={},h={};if(this._editable&&r&&!r.editing&&n.$_canShowEditor(a,l,h)){l.type&&(r=this._editor=n.delegate.getCellEditor(e.CellEditor.getEditorType(l.type))||r),s.Utils.isEmpty(l)||(r.applyOptions(l),r.setEditIndex(a));var u=r._editor;return r.textReadOnly?r.textReadOnly&&u&&(u.readOnly=r.textReadOnly):r.setReadOnly(this._readOnly),this.$_setEditorAttrs(h),this._initEditor(t,i,o),(0,s.getDoc)(u).activeElement!==u&&(!s.Utils.isMobile()||!r.hasList)&&u.focus(),this._modified=!1,this._editorActivated(this._editor),h&&"function"==typeof h.callback&&h.callback(),!0}return!1},a.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width;s.Utils.isMobile()&&s.Utils.isiOS&&(e-=3),t.x--,t.y--,t.width++,t.height++,s.Utils.isMobile()&&(t.y-=1,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height)}},a.prototype.$_focusToEditor=function(t,e){var i=this._grid;if(t||i.$_editFocused){var o=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&o&&e!==o._editor,i.container._setFocusAndScroll(o),this.editing||this._editor&&this._editor.selectAll()}},a.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var o=e.dataIndex;if(o>=0)return i.getData(o)}},a.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;o>=0&&(this._grid.undoable?this._grid.execute(new u(t.item,o,e,t.column)):i.setData(o,e))}},a.prototype._isEditKey=function(t){return 8==t||t>=46&&t<=90||t>=96&&t<=111||t>=186&&t<=222||13==t&&this._grid.editOptions.enterToEdit},a}(i.Base);return ds.DefaultEditController=c,ds}var fs,gs={};function ms(){if(fs)return gs;fs=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.RowBarElement=void 0;var t=d,e=C(),i=$n(),o=S(),n=function(i){function n(t,e,o){var n=i.call(this,t,e,o)||this;return n._col=-1,n._colChanged=!1,n}return t.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.getCellIndex=function(t){return t.parentElement[e.T_ROW]},n.prototype._createDom=function(){return null},n.prototype._prepareContent=function(t,e){var i=(0,o.getDoc)(t).createElement("div");return this._prepareCellContent(i,t),i},n.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&o.Utils.detach(e)},n.prototype._prepareCellContent=function(t,e){},n.prototype._updateCellContent=function(t,e,i,o){i[this._textProp]=e.text},n.prototype._doRender=function(t){},n.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},n.prototype._layoutCell=function(t,e,i){if(this._colChanged){i.removeAttribute("rowspan"),i.style.removeProperty("display");var o=i.firstElementChild;this._clearCellContent(o),this._prepareCellContent(o,i)}},n.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},n.prototype.$_getCellSelector=function(t,i){var o=this.model.cellStyleCallback,n=this.grid,r=t.parentElement[e.T_ROW],s=n.getItem(r),a=n.getCellType(t);if(o){var l=o(this.grid.handler,a,null==s?void 0:s.index);return l?" "+l:""}return""},n}(i.VisualObjectElement);return gs.RowBarElement=n,gs}var ys,vs={},Cs={};var ws,xs={};var bs,Is,Es={};function Ss(){if(Is)return vs;Is=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.RowBarContainer=void 0;var t=d,e=Hn(),i=S(),o=Tn(),n=C(),r=Pn(),s=zo(),a=Xo(),l=Do(),h=function(){if(ys)return Cs;ys=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.RowIndicatorElement=void 0;var t=d,e=di(),i=S(),o=C(),n=ms(),r=Tn(),s=function(n){function s(t,e){return n.call(this,t,e,"rowIndicatorView")||this}return t.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},s.prototype.refresh=function(t,e){for(var n=0;n<e;n++){var r=this._getTableCell(n);r[o.T_FOC]=t.isFocusedRow(r.parentElement[o.T_ROW]),i.Utils.setClassName(r,this.$_getCellSelector(r))}},s.prototype._getCssSelector=function(){return"rg-rowindicator"},s.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var o=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",o)+1}return i=Math.max(e.minWidth>0?e.minWidth:i,Math.min(e.maxWidth>0?e.maxWidth:i)),e._displayWidth=i,i},s.prototype._layoutCell=function(t,e,o){if(n.prototype._layoutCell.call(this,t,e,o),e){var r=this.model.getCell(e);i.Utils.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(t,r,o.firstElementChild,o)}},s.prototype.$_getCellSelector=function(t,s){var a=this.grid,l=t.parentElement[o.T_ROW],h=t[o.T_FOC],u=this.model,d="rg-rowindicator-cell";if(-99===l)return r.FixedOptions.ROW_BAR_CELL_STYLE;if(h){d+=u.showFocus?" rg-rowindicator-focus":"";var c=a.getItem(l);i.Utils.isDebugging();var p=c&&c.itemState;(0,e.ItemState_isInserting)(p)?d+=" rg-rowindicator-inserting":p==e.ItemState.UPDATING&&(d+=" rg-rowindicator-editing")}else a.isSelectedItem(l)&&u.showSelection&&(d+=" rg-rowindicator-select");return d+n.prototype.$_getCellSelector.call(this,t,s)},s}(n.RowBarElement);return Cs.RowIndicatorElement=s,Cs}(),u=function(){if(ws)return xs;ws=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.StateBarElement=void 0;var t=d,e=D(),i=zo(),o=S(),n=C(),r=function(r){function s(t,e){var i=r.call(this,t,e,"stateBarView")||this;return i._textMark=!1,i}return t.__extends(s,r),s.prototype.rowOf=function(t){return t.parentElement[n.T_ROW]},s.prototype._getCssSelector=function(){return"rg-statebar"},s.prototype.measureWidth=function(t){return t.stateBar.width},s.prototype._layoutCell=function(t,e,n){if(r.prototype._layoutCell.call(this,t,e,n),e){var s=this.model,a=s.mark,l=a==i.StateMark.IMAGE;this._textMark=a==i.StateMark.TEXT;var h=s.getCell(e);o.Utils.setClassName(n,this.$_getCellSelector(n,l)),this._updateCellContent(t,h,n.firstElementChild,n)}},s.prototype._updateCellContent=function(t,e,i,n){i[o.Utils.TextProp]=this._textMark&&e.text||""},s.prototype.$_getCellSelector=function(t,i){var o=this.grid,s=o.getItem(t.parentElement[n.T_ROW]),a=s.dataRow,l="rg-statebar-cell ";if(o.isItemEditing(s)&&this._error&&this.model.errorVisible)switch(this._error.level){case n.ValidationLevel.INFO:l+=" rg-statebar-info";break;case n.ValidationLevel.WARNING:l+=" rg-statebar-warning";break;case n.ValidationLevel.ERROR:l+=" rg-statebar-error"}else if(a>=0&&i)switch(s.rowState){case e.RowState.UPDATED:l+=" rg-statebar-updated";break;case e.RowState.CREATED:l+=" rg-statebar-created";break;case e.RowState.DELETED:l+=" rg-statebar-deleted";break;case e.RowState.CREATE_AND_DELETED:l+=" rg-statebar-create-and-deleted"}return l+r.prototype.$_getCellSelector.call(this,t,i)},s}(ms().RowBarElement);return xs.StateBarElement=r,xs}(),c=function(){if(bs)return Es;bs=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.CheckBarElement=void 0;var t=d,e=S(),i=di(),o=C(),n=ms(),r=so(),s=function(n){function s(t,e){var i=n.call(this,t,e,"checkBarView")||this;return i._fixedCount=0,i._prevChecked=-1,i._exclusive=!1,i._typeChanged=!1,i._useImage=!1,i._imageChanged=!1,i}return t.__extends(s,n),s.prototype.rowOf=function(t){return t.parentElement[o.T_ROW]},s.prototype._getCssSelector=function(){return"rg-checkbar"},s.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},s.prototype._clearCellContent=function(t){t[this._textProp]="",n.prototype._clearCellContent.call(this,t)},s.prototype._prepareCellContent=function(t,i){var o=(0,e.getDoc)(t),n=s.FOR_ID+this.rowOf(i)+"-"+this.model.$_hash,r=o.createElement("input"),a=r.style;r.type=this._exclusive?"radio":"checkbox",r.id=n,r.tabIndex=-1,r.className=this._exclusive?"rg-radio":"rg-checkbox",a.display=this._useImage?"none":"inline-block",t.appendChild(r);var l=o.createElement("span");(a=l.style).display=this._useImage?"inline-block":"none",t.appendChild(l);var h=o.createElement("label");h.setAttribute("for",n),(a=h.style).display="none",t.appendChild(h)},s.prototype.measureWidth=function(t){return this.model.width},s.prototype._layoutCell=function(t,i,o){n.prototype._layoutCell.call(this,t,i,o);var r=i&&this.model.getCell(i);e.Utils.setClassName(o,this.$_getCellSelector(o)),o.style.display="",o.removeAttribute("rowspan");var s=t.fixedOptions.rowCount,a=t.checkBar;if(a._merged&&i){var l=a._merges,h=i.itemIndex;if(h=h<s?h:h-t.layoutManager.topIndex,l.isMerged(h,s))if(l.isHidden(h,s))o.style.display="none",o.removeAttribute("rowspan");else{var u=l.getMerged(h,s);o.rowSpan=u}else o.removeAttribute("rowspan")}r&&this._updateCellContent(t,r,o.firstElementChild.firstElementChild,o)},s.prototype._updateCellContent=function(t,o,n,a){var l=o.item,h=n,u=t.checkBar,d=s.FOR_ID+this.rowOf(a)+"-"+this.model.$_hash;h.checked=l&&l.checked,h.disabled=l&&!l.checkable,h.id=d,a.firstElementChild.style.display=l instanceof i.GridRow||l instanceof r.TreeItem||u.showGroup&&u.fieldIndex<0&&!u.merged?"":"none";var c=this._useImage;this._typeChanged&&(h.setAttribute("type",this._exclusive?"radio":"checkbox"),h.className=this._exclusive?"rg-radio":"rg-checkbox");var p=h.nextElementSibling;if(this._imageChanged&&p&&(h.style.display=c?"none":"inline-block",p.style.display=c?"inline-block":"none"),c&&p){var _=h.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";_+=h.disabled?" disabled":"",p.className=_}var f=p.nextElementSibling;f.removeAttribute("for"),f.setAttribute("for",d),f[e.Utils.TextProp]=this.rowOf(a)+1+" row "+(l&&l.checkable?l.checked?"checked":"unchecked":"check disable")},s.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},s.prototype.$_getCellSelector=function(t,e){var i=s.CELL_CSS,r=t.parentElement[o.T_ROW],a=this.grid.getItem(r);return(i+=a&&a.checkable?"":" rg-checkbar-disabled")+n.prototype.$_getCellSelector.call(this,t,e)},s.prototype.$_setPrevChecked=function(t){this._prevChecked=t},s.FOR_ID="$$-check-bar-cell",s.CELL_CSS="rg-checkbar-cell",s}(n.RowBarElement);return Es.CheckBarElement=s,Es}(),p=xn(),_=function(e){function d(t){var i=e.call(this,t.doc,null,"rowBarContainer")||this;i._count=0;var o=t.doc;return i._bars=[t.rowIndicator,t.stateBar,t.checkBar],i.addChild(i._indicatorView=new h.RowIndicatorElement(o,t.rowIndicator)),i.addChild(i._stateView=new u.StateBarElement(o,t.stateBar)),i.addChild(i._checkView=new c.CheckBarElement(o,t.checkBar)),i._views=[i._indicatorView,i._stateView,i._checkView],i}return t.__extends(d,e),d.prototype._doDispose=function(){this._bars=this._views=null,e.prototype._doDispose.call(this)},_dp(d,"rowIndicator",{get:function(){return this._indicatorView}}),_dp(d,"stateBar",{get:function(){return this._stateView}}),_dp(d,"checkBar",{get:function(){return this._checkView}}),_dp(d,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t}}),d.prototype.isVisible=function(){return this._indicatorView.visible||this._stateView.visible||this._checkView.visible},d.prototype.getCellIndex=function(t){return t.parentElement[n.T_ROW]},d.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},d.prototype.rowOf=function(t){return t.parentElement[n.T_ROW]},d.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},d.prototype.getCellType=function(t){var e=this._views[t.cellIndex];return e instanceof h.RowIndicatorElement?"indicator":e instanceof u.StateBarElement?"state":e instanceof c.CheckBarElement?"check":void 0},d.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof h.RowIndicatorElement},d.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},d.prototype._isFixedHeight=function(){return!0},d.prototype._doPrepareContent=function(t){if(this._views.length){this._dirty&&this._dom.appendChild(this._table);for(var o=0,n=this._views;o<n.length;o++){var r=n[o];(r._dirty||r.model.dirty)&&r._doPrepareContent(t)}}else i.Utils.detach(this._table);e.prototype._doPrepareContent.call(this,t)},d.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},d.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return i>0&&e>i?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},d.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,n=0,s=this._views;n<s.length;n++){var a=s[n];o+=a.width=a.measureWidth(t)}return new r.Size(o,i)},d.prototype._doLayoutContent=function(t){for(var e=t.grid,o=t.topIndex,r=t.itemCount,s=t.fixedItemCount,a=this._count=s+r,h=this._bars.length,u=e.focusedRow,d=this._views,c=this._thead,p=c&&c.children[0],_=e.displayOptions.useAlternateRowStyle,f=0;f<a;f++){var g=f<s?f:f+o,m=l.CellIndex.temp(e,g),y=this._getTableRow(t,f);i.Utils.setClassName(y,this.getStyleName(m.item,m.itemIndex%2&&_)),y[n.T_ROW]=g;for(var v=0;v<h;v++){var C=y.cells[v];if(C[n.T_FOC]=g==u,d[v]._layoutCell(e,m,C),0===f&&p){var w=p.cells[v];w&&(w[i.Utils.TextProp]=this.getCellType(C)+" column")}}}s>0&&this._layoutFixedBar(e.fixedOptions,s)},d.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},d.prototype._doRender=function(t){},d.prototype._doDraw=function(t){this._views.forEach((function(t){t.validate()}))},d.prototype._getCellCount=function(t){return this._bars.length},d.prototype._getCellWidth=function(t,e){return this._views[e].width},d.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),e.length>1&&e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}));for(var o=0,n=e.length;o<n;o++){var r=e[o],l=void 0;(l=r instanceof s.RowIndicator?this._indicatorView:r instanceof a.StateBar?this._stateView:this._checkView).$_setCol(o),l._colChanged=l._colChanged||r.visChanged,i.push(l),r.visChanged=!1}this._indicatorView.visible=i.indexOf(this._indicatorView)>=0,this._stateView.visible=i.indexOf(this._stateView)>=0,this._checkView.visible=i.indexOf(this._checkView)>=0},d.prototype._layoutFixedBar=function(t,e){var r=this._tbody.children[e];r[n.T_IDX]=e,r[n.T_ROW]=-99,i.Utils.setClassName(r,o.FixedOptions.ROW_BAR_STYLE);for(var s=0;s<r.childElementCount;s++){var a=r.children[s];a[n.T_FOC]=!1;var l=this._views[s];l._colChanged&&l._layoutCell(this.grid,null,a),i.Utils.setClassName(a,o.FixedOptions.ROW_BAR_CELL_STYLE)}},d.prototype.getStyleName=function(t,e){var i=d.ROW_STYLE;return i+=p.GridBody.STATE_ROW_STYLES[t.rowState]||"",(i+=e?d.ALTERNATE_ROW_STYLE:"").trim()},d.ROW_STYLE="rg-row-bar",d.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar",d}(e.DataTableElement);return vs.RowBarContainer=_,vs}var Rs,Ts={};function Ds(){if(Rs)return Ts;Rs=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.TouchSelectTracker=Ts.TouchScrollTracker=Ts.TouchDragTracker=Ts.TouchSelectRequest=Ts.TouchScrollRequest=Ts.MobileEditRequest=void 0;var t=d,e=C(),i=rs(),o=Dr(),n=hr(),r=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t}}),i}(i.GridEditRequest);Ts.MobileEditRequest=r;var s=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i}(r);Ts.TouchScrollRequest=s;var a=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"handle",{get:function(){return this._handle},set:function(t){this._handle=t}}),i}(r);Ts.TouchSelectRequest=a;var l=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),_dp(i,"request",{get:function(){return this._request},set:function(t){this._request=t}}),i.prototype.stop=function(){},i.prototype.end=function(t){this._doEnd(t)},i.prototype._doEnd=function(t){},i.prototype.getRequest=function(){return this._request},i}(o.GridDragTracker);Ts.TouchDragTracker=l;var h=function(i){function o(t){var e=i.call(this,t,"mobileBodyScrollTracker")||this;return e._tapX=NaN,e._tapY=NaN,e._vertical=!0,e}return t.__extends(o,i),o.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},o.prototype._doStart=function(t,i,o,n){var r=this._grid;if(r.isEditing())switch(r.mobileOptions.scrollOnEditing){case e.ScrollOnEditing.CANCEL:r.cancelEditor(!0);break;case e.ScrollOnEditing.COMMIT:r.commitEditor(!0);case e.ScrollOnEditing.DEFAULT:}return this._scrolling=void 0,this._dragTableItemPoints=r.layoutManager._tableItemPoints,this._dragTopIndex=r.topIndex,this._dragLeftPos=r.leftPos,this._doDrag(t,i,o,n),!0},o.prototype._doDrag=function(t,e,i,o){var r=this._grid,s=r.activeTool,a=e-this._tapX,l=i-this._tapY;if(s.findElementAt(o.mouseX,o.mouseY,!1)instanceof n.SummaryElement?this._vertical=!1:this._vertical=Math.abs(2*l)>=Math.abs(a),this._vertical){if(Math.abs(l)>5){var h=r.topIndex,u=r.layoutManager.fullItemCount,d=r.itemCount;if(u===d)return this._scrolling=!1,!1;if(void 0===this._scrolling){if(h+u>=d&&l<0||0==h&&l>0)return this._scrolling=!1,!1;this._scrolling=!0}else if(this._scrolling){for(var c=0,p=this._dragTableItemPoints;++c<p.length&&!(p[c]>=Math.abs(l)););r.topIndex=this._dragTopIndex+--c*(l>0?-1:1)}}}else Math.abs(a)>5&&(this._scrolling=!0,r.leftPos=this._dragLeftPos-a);return!0},o.prototype._doEnd=function(t){this._scrolling=void 0},o.prototype._doCanceled=function(t,e){this._scrolling=void 0},o.prototype._doInit=function(t,e,i){this._tapY=e,this._tapX=t},o}(l);Ts.TouchScrollTracker=h;var u=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype._doStart=function(t,e,i,o){return!0},i.prototype._doDrag=function(t,e,i,o){var n=this._grid.pointToIndex(null,e,i,!1);if(n&&n.itemIndex>=0){var r=this.request.handle,s=r.selectionMask.item;s&&s.inflate(r.dir,n)}return!0},i}(l);return Ts.TouchSelectTracker=u,Ts}var ks,Ms,Ls={};function Os(){if(ks)return Ls;ks=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.MobileSelectionMask=Ls.MobileSelectionLayer=Ls.MobileSelectionHandle=void 0;var t=d,e=hn(),i=un(),o=E(),n=function(e){function i(t,i){var o=e.call(this,t.doc,"mobileSelectionHandle")||this;return o._dir=i,o._owner=t,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._owner=null,e.prototype._doDispose.call(this)},_dp(i,"selectionMask",{get:function(){return this._owner}}),_dp(i,"dir",{get:function(){return this._dir}}),i.prototype._getCssSelector=function(){return i.STYLE_NAME+this._dir+"-handle"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.background="red"},i.prototype._doDraw=function(){},i.STYLE_NAME="rg-selection-handle",i}(e.VisualElement);Ls.MobileSelectionHandle=n;var r=function(e){function n(t,i){return e.call(this,t,i)||this}return t.__extends(n,e),n.prototype._doDispose=function(){},n.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},n.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new s(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},n.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},n.prototype.layout=function(){var t=this._grid.layoutManager;this._grid.selections;var e=new o.Rectangle;for(var n in this._views){var r=this._views[n],s=r.item,a=!1,l=new o.Rectangle;if(r.prepare(),s instanceof i.RowSelection||s instanceof i.ColumnSelection||(a=this.$_getMobileSelectionRangeRect(t,s,r,l,e)),a){var h=t.footerBounds.y+t.contentBounds.y;l.bottom>h&&(r._bottomed=!0,l.bottom=h)}r.visible=a,r.visible&&(r.setRectI(l),r.updateElement(),this._layoutHandle(r,l,e),r.invalidate(!1,!0))}},n.prototype._layoutHandle=function(t,e,i){var o,n,r=13,s=13;t._lefted?t.leftHandle.visible=!1:(t.leftHandle.visible=!0,o=i.x-6.5,n=e.y+(e.height-r)/2,t.leftHandle.setBounds(o,n,s,r)),o=i.x+(i.width-s)/2,n=e.y-6.5,!t._toped&&o>=e.x?(t.topHandle.visible=!0,t.topHandle.setBounds(o,n,s,r)):t.topHandle.visible=!1,n=e.bottom-6.5,!t._bottomed&&o>=e.x?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(o,n,s,r)):t.bottomHandle.visible=!1,t._righted?t.rightHandle.visible=!1:(t.rightHandle.visible=!0,o=i.right-6.5,n=e.y+(e.height-r)/2,t.rightHandle.setBounds(o,n,s,r))},n.prototype.$_getMobileSelectionRowsRect=function(t,i,o,n){return e.prototype.$_getSelectionRowsRect.call(this,t,i,o,n)},n.prototype.$_getMobileSelectionColumnsRect=function(t,i,o,n){return e.prototype.$_getSelectionColumnsRect.call(this,t,i,o,n)},n.prototype.$_getMobileSelectionRangeRect=function(t,i,o,n,r){return e.prototype.$_getSelectionRangeRect.call(this,t,i,o,n,r)},n}(i.SelectionLayer);Ls.MobileSelectionLayer=r;var s=function(e){function i(t){var i=e.call(this,t)||this;return i._leftHandle=new n(i,"left"),i._topHandle=new n(i,"top"),i._bottomHandle=new n(i,"bottom"),i._rightHandle=new n(i,"right"),i}return t.__extends(i,e),i.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),e.prototype._doDispose.call(this)},_dp(i,"leftHandle",{get:function(){return this._leftHandle}}),_dp(i,"topHandle",{get:function(){return this._topHandle}}),_dp(i,"bottomHandle",{get:function(){return this._bottomHandle}}),_dp(i,"rightHandle",{get:function(){return this._rightHandle}}),i.prototype.prepare=function(){e.prototype.prepare.call(this)},i.prototype.updateElement=function(){e.prototype.updateElement.call(this)},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},i.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},i}(i.SelectionMask);return Ls.MobileSelectionMask=s,Ls}function Fs(){if(Ms)return os;Ms=1,Object.defineProperty(os,"__esModule",{value:!0}),os.GridSelectionTool=os.RowFocusView=os.RowHoverView=os.GridTool=os.RowMoverProxy=os.RowMoverLine=os.HeaderCellMover=os.HeaderCellFeedback=os.HeaderCellResizer=os.RowBlockView=os.GroupFocusView=os.FocusMask=os.FocusView=os.ClickData=void 0;var t=d,e=Mr(),i=Sa(),o=hn(),n=zn(),r=Hn(),s=Do(),a=tr(),l=rs(),h=un(),u=C(),c=S(),p=_o(),_=di(),f=xo(),g=ln(),m=Dr(),y=er(),v=kr(),w=ls(),x=E(),b=pi(),I=To(),R=$n(),T=Qn(),D=_s(),k=to(),M=ms(),L=Ss(),O=Br(),F=Ds(),P=Os(),B=Tr(),V=hr(),N=function(){function t(){}return t.getData=function(e){var i=new t;return i.cellType=e,i},t.getSub=function(e,i){var o=new t;return o.cellType=e,o.subType=i,o},t.getField=function(e,i,o){var n=new t;return n.cellType=e,n.field=n.fieldIndex=i,n.fieldName=o,n},t.getItem=function(e,i,o){var n=new t;return n.cellType=e,n.itemIndex=i,null!=o&&(n.dataRow=o),n},t.getLayout=function(e,i){var o=new t;return o.cellType=e,i instanceof I.CellLayoutGroupItem?(o.subType="layoutHeader",o.column=i.name):(o.column=i.firstColumn&&i.firstColumn.name,i.firstColumn instanceof f.DataColumn&&(o.field=o.fieldIndex=i.firstColumn.dataIndex,o.fieldName=i.firstColumn.fieldName)),o},t.getCell=function(e,i,o){var n=new t;"data"===e&&(n.editable=i.editable,n.readOnly=i.readonly);var r=i.layout;return n.cellType=e,n.itemIndex=o?o.itemIndex:i.item.index,n.dataRow=o?o.dataRow:i.item.dataRow,n.column=i.layout.firstColumn&&i.layout.firstColumn.name,r.firstColumn instanceof f.DataColumn&&(n.field=n.fieldIndex=r.firstColumn.dataIndex,n.fieldName=r.firstColumn.fieldName),n},t.getGroupFooter=function(e,i,o,n){var r=new t,s=o.firstColumn;return r.cellType=e,r.itemIndex=i,r.index=n,r.column=s&&s.name,s instanceof f.DataColumn&&(r.field=r.fieldIndex=s.dataIndex,r.fieldName=s.fieldName),r},t.getSummary=function(e,i,o){var n=new t;return n.cellType=e,n.index=i,n.column=o.firstColumn&&o.firstColumn.name,o.firstColumn instanceof f.DataColumn&&(n.field=n.fieldIndex=o.firstColumn.dataIndex,n.fieldName=o.firstColumn.fieldName),n},t.getGroupElt=function(e,i){var o=new t;return o.cellType=e,o.groupLevel=i,o},t}();os.ClickData=N;var A=function(e){function i(t,i){var o=e.call(this,t,"focusView")||this;return o._editing=!1,o._focusType="layer",o._inner=i,o}return t.__extends(i,e),_dp(i,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))}}),i.prototype.$_createLine=function(t){function e(t,e,i){var o=t.createElement("div");o.className=e?"rg-focus-inner-line":"rg-focus-line";var n=o.style;return n.display="none",n.position="absolute",n.boxSizing="border-box",n.left="0px",n.top="0px",1!==i&&(n.borderTop="none"),2!==i&&(n.borderBottom="none"),3!==i&&(n.borderLeft="none"),4!==i&&(n.borderRight="none"),o}var i=(0,c.getDoc)(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},i.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},i.prototype.$_linePosition=function(t,e,i,o){var n=this._topLine.style,r=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,h=this.parent.height;r.left=n.left=-t+"px",r.width=n.width=l+t+"px",r.top=o-2+"px",a.height=s.height=h+"px",a.left=i-2+"px",r.display=h<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},i.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this.resetStyleName())},i.prototype.setActivated=function(t){this._setClassName(null)},i.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},i.prototype.setBounds=function(t,i,o,n){if("line"===this._focusType){var r=this._dom.style;r.left=t+"px",r.top=i+"px",this.width=o,this.height=n,this.$_linePosition(t,i,o,n)}else this.x++,e.prototype.setBounds.call(this,t,i,o,n)},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i.prototype._beforeDraw=function(t){if("line"===this._focusType){this._setClassName(t);var i=t.style;i.left=this.x+"px",i.top=this.y+"px"}else e.prototype._beforeDraw.call(this,t)},i}(o.LayerElement);os.FocusView=A;var $=function(e){function i(t,i){void 0===i&&(i=!1);var o=e.call(this,t,"focusMask")||this;return o._focusType="layer",o._focusView=new A(t,i),o.addChild(o._focusView),o}return t.__extends(i,e),i.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,e.prototype._doDispose.call(this)},_dp(i,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))}}),i.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},i.prototype.updateElement=function(t,e,i,o,n){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(n,0,!1)},i.prototype.setActivated=function(t){this._focusView.setActivated(t)},i.prototype._getCssSelector=function(){return"rg-focus-mask"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(t){if("line"===this._focusType){this._setClassName(t);var i=t.style;i.left=this.x+"px",i.top=this.y+"px"}else e.prototype._beforeDraw.call(this,t)},i.prototype.setRect=function(t){"line"===this._focusType?t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height||(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):e.prototype.setRect.call(this,t)},i}(o.LayerElement);os.FocusMask=$;var H=function(e){function i(t){var i=e.call(this,t,"groupFocusView")||this;return i.visible=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-group-focus"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.GroupFocusView=H;var U=function(e){function i(t,i){var o=e.call(this,t,"focusMask")||this;return o._groupFocusView=new H(t),o.addChild(o._groupFocusView),o}return t.__extends(i,e),i.prototype._doDispose=function(){this._groupFocusView=this._groupFocusView&&this._groupFocusView.dispose(),e.prototype._doDispose.call(this)},i.prototype.updateElement=function(t,e,i,o){this._groupFocusView.setBounds(t,e,i,o)},i.prototype._getCssSelector=function(){return"rg-group-focus-mask"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(t){e.prototype._beforeDraw.call(this,t)},i}(o.LayerElement),G=function(e){function i(t){var i=e.call(this,t,"rowBlockView")||this;return i.visible=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowblock"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.RowBlockView=G;var W=function(e){function i(t){return e.call(this,t,"headerCellResizer")||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"_rg-col-resizer_"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.HeaderCellResizer=W;var j=function(e){function i(t){var i=e.call(this,t,"headerCellFeedback")||this;return i._modelChanged=!1,i.dragging=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._model=null,e.prototype._doDispose.call(this)},_dp(i,"model",{set:function(t){this._model=t,this._modelChanged=!0}}),i.prototype._createDom=function(t){var e=t.createElement("table");e.setAttribute("aria-hidden","true");var i=e.createCaption();i.textContent="grid table feedback",i.style.width=i.style.height="0px",i.style.padding="none",i.style.boxSizing="border-box",i.style.overflow="hidden",e.style.setProperty("table-layout","fixed","important");var o=t.createElement("tbody");e.appendChild(o);var n=t.createElement("tr");o.appendChild(n);var r=this._cell=t.createElement("td");return n.appendChild(r),r.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},i.prototype._getCssSelector=function(){return"rg-table"},i.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(y.HeaderElement.renderCell(this._model,this._cell),this._modelChanged=!1)},i}(o.LayerElement);os.HeaderCellFeedback=j;var z=function(e){function i(t){return e.call(this,t,"headerCellMover")||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t)},i.prototype._doDraw=function(t){},i}(o.LayerElement);os.HeaderCellMover=z;var Y=function(e){function i(t){var i=e.call(this,t,"rowMoverLine")||this;return i._feedbackStyle=B.DragFeedbackStyle.LINE,i}return t.__extends(i,e),_dp(i,"feedbackStyle",{set:function(t){this._feedbackStyle=t}}),i.prototype._getCssSelector=function(){switch(this._feedbackStyle){case B.DragFeedbackStyle.LINE:return"_rg-row-mover-line_";case B.DragFeedbackStyle.ROW:return"_rg-row-mover-block_";case B.DragFeedbackStyle.GROUP:case B.DragFeedbackStyle.CELL:return"_rg-row-mover-group_"}},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.RowMoverLine=Y;var q=function(e){function i(t){var i=e.call(this,t,"rowMover")||this;return i._enabled=!0,i._label="1행 이동",i}return t.__extends(i,e),i.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},i.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},i.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},i.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),t.style.whiteSpace="nowrap"},i.prototype._setSizeStyle=function(t){},i.prototype._doDraw=function(t){t[c.Utils.TextProp]=this._label},i}(o.LayerElement);os.RowMoverProxy=q;var X=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._rowBlockStart=-1,o._rowBlockEnd=-1;var n=t.doc,r=o._grid=t.gridView;return o._skipIndex=r.getIndex(),o._tempIndex=r.getIndex(),o._tempInnerIndex=r.getIndex(),r.addFeedbackElement(o._rowBlockMask=new G(n)),r.addFeedbackElement(o._rowFocusView=new J(n)),r.addFeedbackElement(o._focusMask=new $(n)),r.addFeedbackElement(o._innerFocusMask=new $(n,!0)),r.addFeedbackElement(o._groupFocusMask=new U(n)),o}return t.__extends(i,e),i.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._groupFocusMask=this._groupFocusMask&&this._groupFocusMask.dispose(),this._grid=null,e.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"focused",{get:function(){return this._grid.focusedIndex}}),i.prototype.setFocused=function(t,e,i){var o=this._grid;if(o.isValid(t)){var n=o.getItem(t.itemIndex);return!o.isEditing()&&n instanceof b.DummyEditItem&&o.append(),this._grid.setFocusedIndex(t,e,!0,i)}return!1},i.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype.focusedIndexChanging=function(t){},i.prototype.focusedIndexChanged=function(t,e){var i=this.grid,o=i.layoutManager,n=o.fixedItemCount,r=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||n>0&&r<n||r>=o.topIndex+n&&r<=n+o.topIndex+o.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof b.DummyEditItem&&i.append()},i.prototype.currentRowChanged=function(t,e){var i=this.grid,o=i.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,o.rowBlockType!=u.RowMaskType.NONE){var n=o.rowBlockCallback;if(n){var r;(r=n(i.handler,i.getItemIndexOfRow(e)))?(this._rowBlockStart=r.start,this._rowBlockEnd=r.end):this._rowBlockStart=this._rowBlockEnd=-1}}this.$_resetRowBlockMask()},i.prototype.getNextRequest=function(t,e,i,o){return null},i.prototype.isMouseEventTarget=function(t){if(t instanceof n.CellElement){var i=t.getAncestor(r.TableBaseElement);if(i)return i.getContentAt(t.index)==this.mouseEventTarget}return e.prototype.isMouseEventTarget.call(this,t)},i.prototype._doSetFocus=function(t){!c.Utils.isMobile()&&this.grid.setFocus(t),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doFocusLeave=function(t){var e=this.grid;e._resetTdFocus=void 0,e.editOptions.commitWhenLeave&&(e.isEditing()||e.isItemEdited())&&e.commit(!1,void 0,!1),c.Utils.isSlotMode()&&e.closePopups(),this._focusMask.setActivated(e.container._focused)},i.prototype._doLayoutChanged=function(){},i.prototype.$_resetFocusView=function(){var t=this._grid,e=t.layoutManager,i=t.displayOptions,o=t.focusedIndex,n=t.fixedOptions,r=this._tempInnerIndex.assign(o),s=!1,a=!1,l=!1;if(i.focusVisible&&t.isValid(r)&&!t.isEditing()){var h=r.item,d=t.getBodyViewAt(r),c=d.getCellAt(e,r),p=c;if(!c&&r.layout.merged){var _=e.getMergeRoom(r);_&&(r.itemIndex=e.fixedItemCount+e.topIndex,_.contains(r)&&(c=d.getCellAt(e,r)),c||(r.itemIndex=e.fixedItemCount+e.topIndex+e.itemCount-1,_.contains(r)&&(c=d.getCellAt(e,r))))}if(c&&!c.grouped){var f=t.isEditing(),g=d.getCellRectAt(e,r,!0);if((g=d.boundsByContainer(g)).width>0&&g.height>0){var m=0,y=g.width;if(!r.colFixed&&!r.rightFixed){var v=e.fixedContentBounds;m=Math.max(0,v.right-g.x),y=Math.max(0,g.width-m),v=e.rightContentBounds,y-=g.right-v.x}if(y>0){f&&(g.y--,g.height+=1);var C=g.clone();if((v=e.footerBounds.clone()).y+=e.contentBounds.y,Math.max(0,g.bottom-v.y),g.width=Math.min(g.width,y),g.x+=m,g.bottom=Math.min(g.bottom,v.y),this._focusMask.setRect(g),this._focusMask.focusType=i.focusType,this._focusMask.updateElement(-m,0,C.width,C.height,f),s=!0,!(t.canMergeEditing(p)&&!1))if(p&&p.merged){if(i.showInnerFocus)if((I=d.getCellRectAt(e,r,!1)).height<g.height){this._innerFocusMask.focusType=i.focusType,I.height=Math.min(I.height,g.height);var w=(I=d.boundsByContainer(I)).width-8,x=I.height-8;I.bottom=Math.min(g.bottom+4,I.bottom),this._innerFocusMask.setRect(I.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,w,x,f),l=!0}}else{var b=d.getCellAt(e,r);if(b&&b.renderer2&&b.editable&&b.renderer2.canShowInnerFocus()){var I=d.getCellRectAt(e,r,!1);w=(I=d.boundsByContainer(I)).width-8,x=I.height-8;I.bottom=Math.min(g.bottom+4,I.bottom),this._innerFocusMask.setRect(I.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,w,x,f),l=!0}}}}}else if(!h.isData){var E=t.getRowView(d,h);if(E){g=E.boundsByContainer();this._focusMask.updateElement(0,0,g.width,g.height,!1),g.x<e.leftContentBounds.right&&(g.x=e.leftContentBounds.right,g.width-=e.leftContentBounds.right-g.x),this._focusMask.setRect(g),s=!0}}}var S=i.rowFocusType;if(S!=u.RowMaskType.NONE){var R=e.footerBounds.y+e.contentBounds.y,T=e.fixedItemCount;if((k=(k=r.itemIndex)>=T?k-e.topIndex:k)>=0&&k<=e.itemCount-1){switch((g=e.getTableItemBounds(k)).y+=e.contentBounds.y+e.bodyBounds.y,g.bottom>R&&(g.bottom=R),S){case u.RowMaskType.DATA:g.x=t.fixedContentPane.x,g.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case u.RowMaskType.FILL:g.x=0,g.width=t.width;break;case u.RowMaskType.ROW:g.x=0,g.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}this._rowFocusView.setRect(g),a=!0}else a=!1}if(this._groupFocusMask.visible=i.groupFocusVisible&&t.isValid(o)){var D=o.layout.root;if(D){var k;R=e.footerBounds.y+e.contentBounds.y,T=e.fixedItemCount;if((k=(k=o.itemIndex)>=T?k-e.topIndex:k)>=0&&k<=e.itemCount+T-1){g=e.getTableItemBounds(k),m=0;(I=e.getDataRect(D)).height=g.height,g.x=I.x;y=I.width;g.y+=e.contentBounds.y+e.bodyBounds.y,g.bottom>R&&(g.bottom=R);v=void 0;if(v=!o.colFixed&&n.colCount>0?e.fixedContentBounds:e.rowBarBounds,g.x=Math.max(v.right,I.x),m=Math.min(0,I.x-v.right),!o.rightFixed&&n.rightCount>0){var M=e.rightContentBounds;y-=Math.max(0,I.right-M.x)}y<=0&&(this._groupFocusMask.visible=!1),g.width=y,g.x-=1,g.y-=1,g.width++,g.height++,this._groupFocusMask.setRect(g),this._groupFocusMask.updateElement(m,0,I.width+1,I.height+1)}else this._groupFocusMask.visible=!1}}this._rowFocusView.visible=a,this._focusMask.visible=s,this._innerFocusMask.visible=l,this._focusMask.visible,t.setFocusedClass(o,!0),t.setFocusedRowClass(o,!0)},i.prototype.$_resetRowBlockMask=function(){var t=this.grid,e=t.layoutManager,i=e.fixedItemCount,o=t.topItem,n=this._rowBlockMask,r=t.displayOptions.rowBlockType,s=this._rowBlockStart,a=this._rowBlockEnd,l=Math.max(s-o+i,i),h=Math.min(Math.max(a-o+i),e.itemCount+i-1);if(n.visible=r&&r!=u.RowMaskType.NONE&&l>=0&&h>=0&&l<e.itemCount&&l<=h&&s!==a,n.visible){var d=e.footerBounds.y+e.contentBounds.y,c=e.getTableItemBounds(l),p=e.getTableItemBounds(h);switch((c=c.union(p)).y+=e.contentBounds.y+e.bodyBounds.y,c.bottom>d&&(c.bottom=d),r){case u.RowMaskType.DATA:c.x=t.fixedContentPane.x,c.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case u.RowMaskType.FILL:c.x=0,c.width=t.width;break;case u.RowMaskType.ROW:c.x=0,c.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}n.setRect(c)}},i.prototype.$_resetFocusButton=function(t){var e,i=this.grid;if(i.isValid(t)){var o=i.getBodyViewAt(t),n=i.getBodyCellAt(t),r=this._tempIndex.assign(t);if(!n&&r.layout.merged){var s=i.layoutManager;(e=s.getMergeRoom(r))&&(r.itemIndex=s.fixedItemCount+s.topIndex,e.contains(r)&&(n=i.getBodyCellAt(r)),n||(r.itemIndex=s.fixedItemCount+s.topIndex+s.itemCount-1,e.contains(r)&&(n=i.getBodyCellAt(r))))}var a=o&&n&&o.getRowView(n.item);a&&a.$_setButtons(i,n,n.cell.firstElementChild,e)}},i.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0,null),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},i.prototype._doEnter=function(t,e,i,o){var n=t.isEditing(),r=o.shiftKey;if(n&&!e.enterToTab)t.commitEditor(!0);else{var a=i.clone(),l=e.skipReadOnly,h=e.skipReadOnlyCell;if(t.isValid(a))if(e.enterToNextRow&&(!r&&a.itemIndex<t.itemCount-1||r&&a.itemIndex>0))r?a.up():a.down(),h&&this._checkReadOnly(a)&&(this._skipReadOnlyCell(a,r?-1:1)||a.assign(i));else if(!r&&(!e.enterToEdit||n)&&e.enterToTab&&e.crossWhenExitLast&&(a.isLast||e.skipReadOnly&&a.isEditableLast)&&a.itemIndex<t.itemCount-1)a.down(),a.firstCell(),l&&this._skipReadOnly(a,1);else if(r&&(!e.enterToEdit||n)&&e.enterToTab&&e.crossWhenExitLast&&(a.isFirst||e.skipReadOnly&&a.isEditableFirst)&&a.itemIndex>0)a.up(),a.lastCell(),l&&this._skipReadOnly(a,-1);else if((!n||e.enterToTab)&&e.commitWhenExitLast&&a.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof p.ValidationError&&(i=t._fireValidationFail(a.item.index,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&a.itemIndex===t.itemCount-1&&(t.append(),t.isItemEditing()&&(a.down(),a.firstCell()))}else(e.enterToTab&&(t.isEditing()||this._checkReadOnly(a))||!e.enterToEdit)&&(t.isEditing()&&t.commitEditor(!0),r?(a.prev(),this._getPrevVisible(t,a)):(a.next(),this._getNextVisible(t,a)),l&&!this._skipReadOnly(a,r?-1:1)&&a.assign(i));else a.normalize(t);s.CellIndex.areEquals(a,i)?t.isValid(a)&&e.enterToEdit&&!n&&!t.isEditing()&&i&&i.dataColumn&&!this._checkReadOnly(i)&&t.showEditor(i):this.setFocused(a,!0,!0)}return!0},i.prototype._doTab=function(t,e,i,o,n,r){var a=i.clone(),l=!1;if(t.isValid(a)){if(e.useTabKey){var h=e.exitGridWhenTab;if(n){if(e.crossWhenExitLast&&(a.isFirst||e.skipReadOnly&&a.isEditableFirst)&&a.itemIndex>0?(a.up(),a.lastCell()):(a.prev(),this._getPrevVisible(t,a)),e.skipReadOnly&&!this._skipReadOnly(a,-1)&&a.assign(i),s.CellIndex.areEquals(a,i)&&h){switch(h){case"row":l=!0;break;case"grid":l=a.itemIndex<=0}if(l)return!c.Utils.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(e.crossWhenExitLast&&(a.isLast||e.skipReadOnly&&a.isEditableLast)&&a.itemIndex<t.itemCount-1)a.down(null,e.skipReadOnly&&a.isEditableLast&&e.crossWhenExitLast),a.firstCell();else if(e.commitWhenExitLast&&a.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof p.ValidationError&&(i=t._fireValidationFail(a.itemIndex,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(a.down(),a.firstCell()))}else a.next(),this._getNextVisible(t,a);if(e.skipReadOnly&&!this._skipReadOnly(a,1)&&a.assign(i),s.CellIndex.areEquals(a,i)&&h){switch(h){case"row":l=!0;break;case"grid":l=a.itemIndex>=t.itemCount-1}if(l)return!1}}return s.CellIndex.areEquals(a,i)||this.setFocused(a,!0,!0),r&&(r.preventDefault&&r.preventDefault(),r.stopImmediatePropagation()),!0}}else a.normalize(t),this._skipReadOnly(a,1);return n&&!c.Utils.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1},i.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},i.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},i.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.getWritableAt(t);return null!=i?!i:!t.dataColumn.isWritable()},i.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(e>0){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},i.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,n=!t.dataColumn.isWritable()&&!0;if(!n&&o.editOptions.skipReadOnlyCell){var r=this._skipIndex;r.assign(t),n=!this._checkReadOnly(r)}return n},i.prototype._commitCancel=function(t,e){var i=this.grid;try{switch(t.itemState){case _.ItemState.INSERTING:return i.commit(e.forceInsert)||i.cancel(!0),!0;case _.ItemState.APPENDING:return i.commit(e.forceAppend)||i.cancel(!0),!0;case _.ItemState.UPDATING:return i.commit(e.commitWhenNoEdit)||i.cancel(!0),!0}}catch(o){if(o instanceof p.ValidationError)return(o=i._fireValidationFail(t.index,o.column,o))&&alert(e.showOnlyValidationMessage&&o.userMessage?o.userMessage:o.toString()),!1;if(o instanceof p.AbortError)return!1;throw o}return!1},i.prototype._doColumnHeaderClicked=function(t,e){},i.prototype._editButtonClicked=function(t,e){},i}(e.VisualTool);os.GridTool=X;var K=function(e){function i(t){var i=e.call(this,t,"rowHoverView")||this;return i.visible=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowhover"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.RowHoverView=K;var J=function(e){function i(t){var i=e.call(this,t,"rowFocusView")||this;return i.visible=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowfocus"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(o.LayerElement);os.RowFocusView=J;var Z=function(e){function o(t,i){var o=e.call(this,t,i)||this;o._tooltipOptions=new w.TooltipOptions,o._checkScroll=Date.now(),o._prevScroll=Date.now(),o._wheelDeltaY=0,o._tempRect=new x.Rectangle,o._reqPoint=new g.Point,o._swipeTimer=null,o._swipeDistance=0,o._swipeDuration=0,o._swipeStarted=null,o._swipeAmount=0;var n=t.doc,r=o.grid;return o._cellResizer=new W(n),o._cellMover=new z(n),o._cellFeedback=new j(n),o._rowMoverLine=new Y(n),o._rowMoverProxy=new q(n),o._colResizeReq=new l.ColumnResizeRequest(r),o._colMoveReq=new l.ColumnMoveRequest(r),o._rowResizeReq=new l.RowResizeRequest(r),o._headerResizeReq=new l.HeaderResizeRequest(r),o._rowMoveReq=new l.RowMoveRequest(r),o._tooltipIndex=new s.CellIndex(r),c.Utils.isMobile()&&(o._touchScrollRequest=new F.TouchScrollRequest(r),o._touchScrollTracker=new F.TouchScrollTracker(r),o._touchSelectRequest=new F.TouchSelectRequest(r),o._touchSelectTracker=new F.TouchSelectTracker(r)),o}return t.__extends(o,e),o.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),clearTimeout(this._tooltipShowTimer),e.prototype._doDispose.call(this)},o.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},o.prototype._doDragTrackerFinished=function(t,e){t.clickable||(this._clickCell=this._clickElement=null)},o.prototype.$_getIndexAt=function(t,e,i,o,n){var r=t.getDataCellIndex(o,this._tempIndex),s=i.getCellAt(e,r);if(s&&s.merged){var a=e.getTableRowIndex(n);if(a<0)return r;var l=i.getRowIndex(a);r.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return r},o.prototype._doPointerDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,d=t.button,p=this.grid,_=p.layoutManager,f=p.editOptions,g=p.focusedIndex.clone(),m=p.selections.exclusiveMode;this._longTimer=c.Utils.isMobile()&&setTimeout(this._longTimerHander,p.mobileOptions.longTapDuration),this._hideTooltip(),p.closePopups(),p.setEventFrom("mousedown"),this._scrollY=window.scrollY,clearInterval(this._swipeTimer),this._touchMoving=!1;var C=this._clickCell=null,w=this._clickElement=null;if(0==d||p.displayOptions.rightClickable&&2==d){var x=this._tempIndex,b=this.mouseEventTarget,I=0==d&&(this._getEditRequest(b,g,e,i,o,n,r)||this._getSelectRequest(b,e,i,o,n,r)||c.Utils.isMobile()&&this._getTouchRequest(t));if(!(I instanceof l.GridEditRequest)||I.canFocus())if(C=this._clickCell=this._findTableCell(),w=this._clickElement=this.findElementAt(e,i,!1),C){var E=p.getTableView(C),S=E instanceof y.HeaderElement,T=E instanceof a.GridBodyElement,D=E instanceof L.RowBarContainer&&E.isRowIndicator(C);if(S||T||D){var k=p.selections.lastItem();if(T?(x=this.$_getIndexAt(p,_,E,C,i),p.editOptions.focusMoveStep===s.FocusMoveStep.GROUP&&(x.layout=x.layout.root.first)):S?(x.assign(p.focusedIndex),x.layout=E.layoutByCell(C)):(x.assign(p.focusedIndex),x.itemIndex=C.parentElement[u.T_ROW]),S){if(o&&n)k&&this.$_resizeSelection(k,x,h.SelectionStyle.COLUMNS);else if(n)return}else{if(n&&k){var M=S?h.SelectionStyle.COLUMNS:D?h.SelectionStyle.ROWS:null;return void this.$_resizeSelection(k,x,M)}if(T){if(this.$_checkAppending(p.focusedIndex,!0,x))return this._clickElement=null,void(this._clickCell=null);var O=E.getCellAt(_,x),P=E.bodyCellByCell(this._clickCell);if(P&&O&&0===d&&P.isEditButton(t.target))this.setFocused(x,!0,!0)&&O.editable&&!O.readonly&&p.editController.buttonDown(x,t);else if(c.Utils.isMobile()&&I instanceof F.TouchScrollRequest)this.grid.container.addMouseEvent(null);else if(s.CellIndex.areEquals(x,this.focused)&&f.editWhenClickFocused)p.showEditor();else{var B=!(o&&p.selections.containsCell(x));this.setFocused(x,m||!o,B)||I instanceof l.SelectRequest&&(I=null)}}else if(D&&p.rowIndicator.selectable)if(null==x.column&&x.item.isDataRow&&(x.layout=p.getFirstLayout()),I instanceof l.SelectRequest){if(this.setFocused(x,m||!o,!1)){var V=k&&(0,h.isRowSelection)(k)?k.getItemIndices():[];(1!==V.length||V[0]!==x.itemIndex)&&p.selections.selectRow(x.itemIndex,!o)}}else{B=void 0;B=p.displayOptions.selectionStyle===h.SelectionStyle.SINGLE_ROW?!(o&&p.selections.containsItem(x.itemIndex,null)):!(o&&p.selections.containsCell(x)),this.setFocused(x,m||!o,B)}}}}else(0,R.isItemElement)(w)&&(x.assign(p.focusedIndex),x.itemIndex=w.itemIndex,this.setFocused(x,!0,!0));!I||p.isItemEditing()&&I.selectable||(this.dragTracker=this._getDragTracker(I,e,i))}p.$_resetHovering(e,i);var N=this.dragTracker;N&&N.startWhenCreated?(N instanceof v.SelectTracker&&t.shiftKey,this._startDragTracker(e,i,t)):N&&N.init(e,i,t)},o.prototype._doPointerCancel=function(t){this.grid.container.removeMouseEvent()},o.prototype._doMouseDown=function(t){var e=this.grid,i=e.editOptions,o=t.ctrlKey||t.metaKey,n=e.selections.exclusiveMode,r=t.mouseX,a=t.mouseY,l=this._tempIndex;if(s.CellIndex.areEquals(l,this.focused)&&i.editWhenClickFocused)e.showEditor();else{var h=!(o&&e.selections.containsCell(l));this.setFocused(l,n||!o,h)}e.$_resetHovering(r,a)},o.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,o=i.container,n=o.getMouseContainer(),r={index:-1,position:0,column:void 0};if(n&&n!==o)if(o.findContainer(t)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof m.RowMoveTracker){var s=o.eventToContainer(t),a=o.findElementAt(s.x,s.y,!1);if(0==i.itemCount||a instanceof T.RowElement||a instanceof M.RowBarElement||a instanceof L.RowBarContainer){var l=m.RowMoveTracker.updateLineFeedback(i,Number.MAX_VALUE,null,1,this._rowMoverLine,s.x,s.y,!0,t.target),h=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(n.gridView,e.sourceItems,l),u=i.dataDropOptions.getLabel(n.gridView,e.sourceItems,l,null);return e.setEnabled(h),e.setLabel(u),i.addFeedbackElement(this._rowMoverLine),h?l:r}a?(e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)):i.removeFeedbackElement(this._rowMoverLine)}return r},o.prototype.getNextRequest=function(t,e,i,o){if(t instanceof l.SelectRequest){var n=this.grid.getSelection();return this._rowMoveReq.init(n,n.startItem)}return null},o.prototype.dragFrom=function(t,e){e instanceof m.RowMoveTracker&&this.$_checkOtherGridRowMoving(t,e)},o.prototype.dropFrom=function(t,e){if(e instanceof m.RowMoveTracker){var i=this.grid,o=0==i.itemCount?{index:0,position:0,column:void 0}:this.$_checkOtherGridRowMoving(t,e);i.removeFeedbackElement(this._rowMoverLine),o.index>=0&&i.$_dropData(e.grid,e.sourceItems,o)}},o.prototype.cancelFrom=function(t){var e=this.grid;t instanceof m.RowMoveTracker&&e.removeFeedbackElement(this._rowMoverLine)},o.prototype._doPointerMove=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,l=s.layoutManager;s.$_resetHovering(e,i)||this._hideTooltip();var h=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r);if(c.Utils.isMobile()&&!h&&(h=this._getTouchRequest(t)),h&&h.cursor?s.setCursor(this.mouseEventTarget,h.cursor):s.setCursor(this.mouseEventTarget,"default"),!h&&!this.dragging){var u=this._findTableCell(),d=u&&s.getTableView(u);if(d instanceof a.GridBodyElement){var p=d.bodyCellByCell(u);if(p&&p.merged){var _=p.head||p,f=this.$_getIndexAt(s,l,d,u,i);if(!_.contains(s.focusedIndex)){if(p.buttons){var g=d.getRowView(_.item);g instanceof T.RowElement&&g.moveCellButtons(l,_,f.itemIndex)}var m=s.canMergeEditing(_);if(_.renderer2&&_.renderer2.refreshFocusChanged){var y=d.getCellRectAt(l,f,!1),v=d.getCellRect(l,_,!0),C=_.renderer2,w=y.top-v.top+y.height/2-v.height/2;C.moveClickElement(w,m)}}}}}},o.prototype._doPointerUp=function(t){this.grid.container;var e=t.mouseX,i=t.mouseY,o=this._findTableCell(),n=this.grid,r=n.focusedIndex,a=n.layoutManager;n.setEventFrom("mouseup");var h=n.getCellType(o);if(n.setCursor(this.mouseEventTarget,"default"),n.editController.buttonUp(null,t),"data"===h&&(!this.dragTracker||this.dragTracker.scrollable)){var u=o&&n.cellToIndex(o);n.isValid(r)&&s.CellIndex.areEquals(r,u)&&!a.focusIsVisible(r)&&(a.makeCellVisible(r),n.invalidateLayout())}if(o&&o==this._clickCell&&("header"===h&&!(this._getEditRequest(this.mouseEventTarget,r,e,i,!1,!1,!1)instanceof l.ColumnResizeRequest))){var d=n.getHeaderView(o).layoutByCell(o);d&&this.$_columnHeaderClicked(t,d)}},o.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o,n=this.grid,r=this.findElementAt(e,i,!1),a=this._findTableCell(),l=n.getCellType(a),h=this.focused,d="data"===l&&n.cellToIndex(a);(!n._eventFrom||n._eventFrom.indexOf("key")>=0)&&(this._clickCell=a=this._findTableCell(t.target),h=a&&n.getDataCellIndex(a)),n.setEventFrom(null);try{if(a&&a==this._clickCell){var p=n.getCellType(a),_=void 0,f=void 0;switch(p){case"head":if(this.$_gridCellClicked(o=N.getSub(p,n.headView.getCellType(a))),"check"===o.subType){var g=n.headView._checkCell;c.Utils.included(t.target,g._check,g._image,g._span)&&this._checkAllClicked()}break;case"foot":this.$_gridCellClicked(N.getSub(p,n.footView.getCellType(a)));break;case"indicator":case"state":case"check":"check"===p&&this.$_checkCellClicked2(a,t),_=n.rowBarContainer.rowOf(a),f=n.getRowOfItem(_),this.$_gridCellClicked(N.getItem(p,_,f));break;case"header":var m=n.getHeaderView(a),y=n.headerView.tableCellByCell(a);y&&y.isClickableElt(t.target)||this.$_gridCellClicked(N.getLayout(p,m.layoutByCell(a)));break;case"data":var v=n.getBodyView(a).bodyCellByCell(a),C=s.CellIndex.areEquals(h,d)||v.contains(h);if(C&&v.grouped)this.$_gridCellClicked(N.getItem("groupHeader",v.item.index,null));else{if(C&&v.isCellButton(t.target))return this.$_cellButtonClicked(v),void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(N.getCell(p,v,h)));if(C&&T.RowElement.isExpander(t.target))return void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(N.getCell(p,v,h)));var w=n.editController._editor;if(C&&(v.isEditButton(t.target)||!v.readonly&&w&&w.dropDownWhenClick))return n.canMergeEditing(v)?this._tempIndex=n.focusedIndex.clone():v.getEditIndex(this._tempIndex),this._editButtonClicked(this._tempIndex,t),void this.$_gridCellClicked(N.getCell(p,v,h));var x=v.renderer2;if(x)if(C||!x.clickOnlyFocusedCell)return o=N.getCell(p,v,d),this.$_performRendererClick(v,t,o)?void((!n.editOptions.exceptDataClickWhenButton||!x.itemClickable)&&this.$_gridCellClicked(o)):void this.$_gridCellClicked(N.getCell(p,v,d));c.Utils.isInteractive(t.target)&&c.Utils.stopEvent(t,!0)}break;case"footer":var b=n.getFooterView(a).tableCellByCell(a);this.$_gridCellClicked(N.getSummary(p,b.summaryIndex,b.layout));break;case"summary":var I=n.getSummaryView(a).tableCellByCell(a);this.$_gridCellClicked(N.getSummary(p,I.summaryIndex,I.layout));break;case"inlineFilter":var E=n.getFilterView(a).tableCellByCell(a),S=t.target;S===E.operatorButton&&n.popupMenuManager.show(E.popupMenu,S,this._tempIndex.set(-1,E.layout,this.grid),!1);break;case"sum":this.$_gridCellClicked(N.getSub(p,n.sumView.getCellType(a)));break;case"filter":this.$_gridCellClicked(N.getSub(p,n.filterView.getCellType(a)));break;case"groupFooter":var R=n.getBodyView(a).bodyCellByCell(a),D=R.item.footerIndex;this.$_gridCellClicked(N.getGroupFooter(p,R.item.index,R.layout,D));break;case"groupHead":case"groupFoot":var k=a[u.T_LEV];this.$_gridCellClicked(N.getGroupElt(p,k));break;case"groupBar":var M=a[u.T_ROW];f=this.grid.getRowOfItem(M),this.$_gridCellClicked(N.getItem(p,M,f))}}else if(r&&r===this._clickElement){var L=this._getClickData(r,t);L&&("gridEmpty"===L.cellType&&n.isEditing()&&n.commitEditor(!0),this.$_gridCellClicked(L))}}finally{if(c.Utils.isMobile()){var O=n.mobileOptions.doubleTapInterval||500;this._clickTimeStamp&&this._clickTimeStamp+O>t.timeStamp&&this._clickElt===this._findTableCell(t.target)?"data"!==l||s.CellIndex.areEquals(this._clickIndex,d)?(this._clickTimeStamp=null,this._clickIndex=null,this._doDblClick(t)):this._clickTimeStamp=t.timeStamp:(this._clickTimeStamp=t.timeStamp,this._clickElt=this._findTableCell(t.target),"data"===l&&(this._clickIndex=d.clone()))}}},o.prototype._getClickData=function(t,e){if(t instanceof i.GridBase||t instanceof R.EmptyGridElement||t instanceof a.GridBodyElement)return N.getData("gridEmpty")},o.prototype.$_commitRendererEdit=function(t,e,i){var o=e.item,n=e.dataField,r=e.dataColumn,s=!1;try{(s=t.editorCommit(e,o.getData(n),i))&&(t.undoable?t.execute(new D.EditValueCommand(e.item,n,i,e.column)):o.setData(n,i),t.isItemEditing(e.item)&&t.validateCellCommit(e,i))}catch(e){if(!t.editOptions.showCommitError)throw e;alert(e.message||e)}if(s&&t.isCellEditing()){var a=t.itemSource,l=a.editingItem.invalidFields,h=t.validationManager.getError(e);if(h)return l.push(r.dataIndex),void(t.editOptions.showCommitError&&alert(h.userMessage||h.message||h));if(l.indexOf(r.dataIndex)>=0&&l.splice(l.indexOf(r.dataIndex),1),t.validationManager.clearInvalidCell(e),l.length>0)return;var u=t.canMergeEditing(t.getBodyCellAt(e,!0));if(a.commit(u)||a.cancel(),u){var d=r.layout.merges.getRoom(e),c={},p={};p[r.fieldName]=i;for(var _=d.head;_<=d.tail;_++){var f=t.getItem(_);f.isDataRow&&(c[f.dataRow]=p)}a.updateRows2(c)}}},o.prototype.$_performRendererClick=function(t,e,i){var o,n=t.renderer2,r=this.grid,s=r.layoutManager;if(n){if(t.merged)if(""===e.pointerType)o=r.focusedIndex.clone();else{var a=e.mouseY,l=this._findTableCell(),h=l&&r.getTableView(l);o=this.$_getIndexAt(r,s,h,l,a)}else o=n.index;if(r.canWriteAt(o)&&n.canEdit()&&n.canEditClickAt(e)&&r.edit(o)){var u=n.editClick(o,e);if(u)return u.commit&&this.$_commitRendererEdit(r,o,u.value),!0}if(n.canClick(e)){var d=n.click(o,e);if(d)return c.Utils.extendObj(i,d),!1===r._fireCellItemClicked(o,d)&&n.preventDefaultClick(e),!0}return n.preventDefaultEditClick(e),!1}},o.prototype.$_performRendererKey=function(t,e){var i,o=t.renderer2,n=t.head;if(o)i=o.index;else{if(!n||!(o=n.renderer2))return;var r=t.rowIndex-n.rowIndex;(i=o.index.clone()).incRow(r)}var a=this.grid,l=a.canWriteAt(i)&&o.canEdit();if(s.CellIndex.areEquals(i,a.focusedIndex)){var h=N.getCell(a.getCellType(t.cell),t,i);if(l&&o.canEditKey(e)||o.canClickSpaceKey(e))return o.itemClick(),!0;if(32===e.keyCode&&a.editOptions.buttonClickWhenSpace)return t.button===u.CellButton.ACTION||t.button===u.CellButton.POPUP?(a.closePopups(),t.cellButton.click(),!0):(this.$_gridCellClicked(h),!0)}},o.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,a=this.grid,h=a.layoutManager,d=this.focused,p=this.findElementAt(e,i,!1),_=this._findTableCell();if(a.setEventFrom(null),_&&_==this._clickCell){var f=a.getCellType(_),g=void 0,m=void 0;switch(f){case"head":this.$_gridCellDblClicked(N.getSub(f,a.headView.getCellType(_)));break;case"foot":this.$_gridCellDblClicked(N.getSub(f,a.footView.getCellType(_)));break;case"indicator":case"state":case"check":g=a.rowBarContainer.rowOf(_),m=a.getRowOfItem(g),this.$_gridCellDblClicked(N.getItem(f,g,m));break;case"header":var y=a.getHeaderView(_),v=a.headerView.tableCellByCell(_);v&&v.isClickableElt(t.target)||this.$_gridCellDblClicked(N.getLayout(f,y.layoutByCell(_)));var C=this._getEditRequest(this.mouseEventTarget,a.focusedIndex,e,i,o,n,r);if(C instanceof l.ColumnResizeRequest){var w=C.layout;w.firstColumn&&a.fitLayoutWidth(w)}break;case"data":var x=a.getBodyView(_),b=x.bodyCellByCell(_),I=this.$_getIndexAt(a,h,x,_,i);if(T.RowElement.isExpander(t.target))return;if(b.grouped)this.$_gridCellDblClicked(N.getItem("groupHeader",b.item.index,null));else if(this.$_gridCellDblClicked(N.getCell(f,b,d)),s.CellIndex.areEquals(I,d)){var E=a.editController.currentEditor();a.showEditor(I,void 0,c.Utils.isMobile()&&(null==E?void 0:E.hasList))}break;case"footer":var S=a.getFooterView(_).tableCellByCell(_);this.$_gridCellDblClicked(N.getSummary(f,S.summaryIndex,S.layout));break;case"summary":var R=a.getSummaryView(_).tableCellByCell(_);this.$_gridCellDblClicked(N.getSummary(f,R.summaryIndex,R.layout));break;case"sum":this.$_gridCellDblClicked(N.getSub(f,a.sumView.getCellType(_)));break;case"groupFooter":var D=a.getBodyView(_).bodyCellByCell(_),k=D.item.footerIndex;this.$_gridCellDblClicked(N.getGroupFooter(f,D.item.index,D.layout,k));break;case"groupHead":case"groupFoot":var M=_[u.T_LEV];this.$_gridCellDblClicked(N.getGroupElt(f,M));break;case"groupBar":var L=_[u.T_ROW];m=a.getRowOfItem(L),this.$_gridCellDblClicked(N.getItem(f,L,m))}}else if(p&&p===this._clickElement){var O=this._getClickData(p,t);O&&this.$_gridCellDblClicked(O)}},o.prototype._doMouseWheel=function(t){var e=this.grid;e.setEventFrom(null),e.scrollOnEditing();var i=e.displayOptions;if(i.wheelEnabled&&!t.ctrlKey){if(!e._fireWheel(t))return!0;if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz){var o=e.leftPos,n=Math.abs(i.wheelScrollHorz||16)*((t.deltaX||t.deltaY)>0?1:-1);return e.leftPos=o+n,!0}var r=e.topIndex,s=Date.now(),a=Math.abs(i.wheelScrollLines);a=a||3;var l=e.displayOptions.wheelDeltaY;if(l>0){if(!(this._wheelDeltaY+Math.abs(t.deltaY)>=l))return void(this._wheelDeltaY+=Math.abs(t.deltaY));this._wheelDeltaY=0}if(i.wheelAccelDelay>0)if(s>this._prevScroll+300)this._checkScroll=s;else if(this._checkScroll+i.wheelAccelDelay<s){var h=i.wheelAccelScroll;if(h&&!isNaN(h))a=parseInt(h);else if("string"==typeof h){var u=h.trim();if(u.indexOf("%")>0){var d=e.itemCount;a=parseInt(u.substr(0,u.length-1))/100*d}}}return this._prevScroll=s,e.topIndex=e.topIndex+(t.deltaY>0?a:-a),!i.wheelEventPropagate||r!=e.topIndex}return!1},o.prototype._doMouseEnter=function(t){},o.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},o.prototype._doMouseOver=function(t){},o.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},o.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},o.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},o.prototype._doKeyDown=function(t){var i,o=t.keyCode,n=t.ctrlKey,r=c.Utils.isMac,a=r&&t.metaKey||!r&&t.ctrlKey,l=t.shiftKey,u=t.altKey,d=this.grid,p=d.editOptions,f=d.layoutManager,g=d.popupMenuManager,m=p.skipReadOnly,y=p.skipReadOnlyCell,v=d.focusedIndex,C=v.clone(),w=p.verticalMoveStep;if(!d._fireKeyDown(t))return!0;if(!d.isEditing()&&d.accessibility&&c.Utils.included(o,40,34,38,33,32,37,39)&&c.Utils.stopEvent(t),g.isShow()&&c.Utils.included(o,37,39,38,40,13,32)){var x=d.getBodyCellAt(v);return g.keyDown(t,x&&x.cell),!0}if((d.setEventFrom("keydown"),v&&!d.isEditing())&&((x=d.getBodyCellAt(v))&&this.$_performRendererKey(x,t)))return!0;if(!d.isEditing()&&d.accessibility&&(67===o||86===o)&&a)return d.editController.setFocus(!0),!1;if(27==o)d.closePopups(),this._doCancel(d);else{if(13==o)return this._doEnter(d,p,C,t);if(9==o)return this._doTab(d,p,C,n,l,t);if(113==o)!d.isEditing()&&C.dataColumn&&(d.accessibility&&d.$_setEditFocused(!0,null),d.showEditor(C,l));else{if(c.Utils.isMac&&t.metaKey&&t.shiftKey&&90===t.keyCode)return d.redo();if(90==o&&a)return d.undo();if(89==o&&a)return d.redo();if(45==o)p.appendWhenInsertKey||0==d.itemCount?d.append():d.insert(C.item,t.shiftKey,n);else{if(46==o)return n&&l?(d.revertSelection(),!0):n?(d.deleteSelection(),!0):!!l&&(d.eraseSelection(!1),!0);if(u&&l&&40==o)d.moveSelection(1,"keydown");else if(u&&l&&38==o)d.moveSelection(-1,"keydown");else if(32==o&&l&&a&&d.rowBarContainer.rowIndicator.visible){var b=d.selections.getItem(0),I=b&&((0,h.isRowSelection)(b)||c.Utils.included(b.style,h.SelectionStyle.BLOCK,h.SelectionStyle.GROUP))&&b.getItems(d.checkBar.merged||d.checkBar.fieldIndex>=0);I||d.checkBar.merged?(I=I||[C.item],d.toggleChecks(I,C.item)):d.toggleCheck(C.itemIndex)}else if(d.editOptions.useArrowKeys&&c.Utils.included(o,36,35,39,37,40,38,34,33)){c.Utils.isMobile()&&t&&t.preventDefault&&t.preventDefault();var E=d.itemCount;if(40==o&&0==E)return d.append(),!0;if(!d.isValid(C))return C.normalize(d),this.setFocused(C,!0,!0),!0;if((c.Utils.included(o,40,34)||35==o&&n)&&C.isBottom&&this.$_checkAppending(C))return!0;if((c.Utils.included(o,38,33)||36==o&&n)&&C.isTop&&this.$_checkAppending(C,!0))return!0;var S=d.getBodyViewAt(C);if(!S)return!0;switch(o){case 36:if(n){if(this.$_doHome(C,v,m))break}else C.home(),this._skipReadOnly(C,1);break;case 35:if(n){if(this.$_doEnd(C,v,m))break}else C.end(),this._skipReadOnly(C,-1);break;case 39:if(S.spanRight(f,C),C.right(),m&&this._checkReadOnly(C)&&!this._skipReadOnly(C,1)){C.assign(v);break}break;case 37:if(C.left(),m&&this._checkReadOnly(C)&&!this._skipReadOnly(C,-1)){C.assign(v);break}break;case 38:if(r&&a){this.$_doHome(C,v,m);break}try{if(0==C.itemIndex&&C.isTop){if(this.$_commitCancel(C.item,p))return!0;n&&r?C.first():d.filterPanel.visible?d.inlineFilterFocus(C.layout):C.up(w)}else if(n&&r)C.first();else{if(n)return void d.topIndex--;C.up(w,d.isItemEditing(C.item))}}finally{y&&this._checkReadOnly(C)&&(this._skipReadOnlyCell(C,-1)||C.assign(v))}break;case 33:if(n&&!r)return d.topIndex=d.topIndex-f.fullItemCount,!0;if(i=C.clone(),C.incRow(-f.fullItemCount),m&&this._checkReadOnly(C)&&!this._skipReadOnlyCell(C,1,i)){C.assign(v);break}break;case 40:if(r&&a){this.$_doEnd(C,v,m);break}try{if(C.itemIndex!=E-1||!C.isBottom&&w!=s.VerticalMoveStep.ROW)if(n&&r)C.last();else{if(n)return d.topIndex++,!0;C.down(w,d.isItemEditing(C.item))}else{if(C.isBottom&&this._commitCancel(C.item,p))return!0;d.append(),n&&r?C.last():C.down(w,d.isItemEditing(C.item))}}finally{y&&this._checkReadOnly(C)&&(this._skipReadOnlyCell(C,1)||C.assign(v))}break;case 34:if(C.itemIndex==d.itemCount-1&&C.isBottom&&(0,_.ItemState_isInserting)(C.item.itemState))return d.commit(p.forceAppend),!0;if(n&&!r)return d.topIndex=d.topIndex+f.fullItemCount,!0;if(i=C.clone(),C.incRow(f.fullItemCount),m&&this._checkReadOnly(C)&&!this._skipReadOnlyCell(C,-1,i)){C.assign(v);break}}return S.spanHead(f,C),l&&d.selections.count>0&&!(0,h.isSingleSelectionStyle)(d.displayOptions.selectionStyle)?(this.setFocused(C,!1,!1),d.selections.lastItem().resizeTo(C)):this.setFocused(C,!0,!0),!0}}}}return e.prototype._doKeyDown.call(this,t)},o.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},o.prototype._doKeyUp=function(t){if(c.Utils.isIE){var e=t.ctrlKey,i=t.keyCode,o=this.grid;90===i&&e&&o.undo()}this.grid._fireKeyUp(t)},o.prototype._editButtonClicked=function(t,i){this.grid.makeCellVisible(t),this.grid.showEditor(t)&&this.grid.editorButtonClicked(t,i),e.prototype._editButtonClicked.call(this,t,i)},o.prototype._getSelectRequest=function(t,e,i,o,n,r){var s=this.grid,a=s.displayOptions,u=a.selectionMode,d=a.selectionStyle,p=this._findTableCell(t);if(!p)return null;var _=s.getCellType(p);if("indicator"==_){if(s.rowIndicator.selectable&&u!=h.SelectionMode.NONE&&d!=h.SelectionStyle.NONE&&!(0,h.isSingleSelectionStyle)(d))return new l.SelectRequest(s.getIndex(s.rowBarContainer.getCellIndex(p)),h.SelectionStyle.ROWS)}else if("header"==_){if(o){var f=s.headerView.columnByCell(p);if(s.rowIndicator.selectable&&u!=h.SelectionMode.NONE&&d!=h.SelectionStyle.NONE&&!(0,h.isSingleSelectionStyle)(d))return new l.SelectRequest(s.getIndex(-1,f),h.SelectionStyle.COLUMNS)}}else if("data"==_){var g=s.getDataCellIndex(p,this._tempIndex);if(o&&s.selections.containsCell(g))return null;if(u!=h.SelectionMode.NONE&&d!=h.SelectionStyle.NONE&&!(0,h.isSingleSelectionStyle)(d)&&!c.Utils.isMobile())return new l.SelectRequest(g.clone(),d)}return null},o.prototype._getEditRequest=function(t,e,i,o,n,r,l){var h=(0,c.getDocWin)(this.grid.doc),u=this.grid,d=u.layoutManager,p=u.displayOptions,_=this._findTableCell(t);if(!_)return null;var f=u.getTableView(_),g=this.$_getRowResizeRequest(f,_,i,o,n,r,l);if(g)return g;if(f instanceof L.RowBarContainer&&f.isRowIndicator(_)){if(l&&(c.Utils.isIE||c.Utils.isEdge)&&(l=n),l&&u.canMoveRow(!1,!1)){var m=u.getSelection(),v=u.rowBarContainer.rowOf(_),C=!1;if(m?C=m.containsItem(v):v==e.itemIndex&&(C=!0),C)return this._rowMoveReq.init(m,v)}}else if(f instanceof y.HeaderElement){if(t instanceof h.HTMLInputElement)return null;if(n);else{var w=f.layoutByCell(_);if(w){var x=u.cellToContainer(_,this._reqPoint.setEmpty());if(p.columnResizable&&w._isResizable()&&(u.fixedOptions.resizable||w.root.vindex>=d.fixedLayoutCount&&w.root.vindex<d.rightFirstLayout)){var b=u.headerView.tableCellByLayout2(d,w);if(x.x+=b?b.width:w.domWidth,i>=x.x-3&&i<=x.x+3)return this._colResizeReq.init(w,i,o,i-x.x)}if(p.columnMovable&&w._isMovable()&&(!w.isRoot||u.canMoveLayout(w)))return this._colMoveReq.init(w,i,o,-1)}}}else if(f instanceof a.GridBodyElement){var I=u.getDataCellIndex(_,this._tempIndex);v=I&&I.itemIndex;if(u.canMoveRow(!1,!1)&&v>=0){var E=!1;m=u.getSelection();if((b=u.getBodyCellAt(I,!0)).expander===t)return null;if(l&&(c.Utils.isIE||c.Utils.isEdge)&&(l=n),m?(E=m.containsItem(v))&&!l&&(E=m.containsLayout(I.layout)&&this._canMoveRowAt(f,I,i)):e&&v==e.itemIndex&&(E=!!l||s.CellIndex.areEquals(I,e)&&this._canMoveRowAt(f,I,i)),E)return this._rowMoveReq.init(m,v)}}else if(f instanceof O.GridHeadElement){var S=f.boundsByContainer();if(u.header.resizable&&o<=S.bottom+1&&o>=S.bottom-2)return this._headerResizeReq.init(S.top,o-S.bottom-1)}},o.prototype.$_resizeSelection=function(t,e,i){var o=this.grid.selections,n=t?t.runStyle:i;if(!(0,h.isSingleSelectionStyle)(n)&&c.Utils.included(i,h.SelectionStyle.ROWS,h.SelectionStyle.COLUMNS,h.SelectionStyle.SINGLE_COLUMN)&&(n=i),t){if(t.runStyle!=n){this.grid.selections.clear();var r=t.getBounds();t=o.add(r.firstCell,r.lastCell,n)}o.canResize(t)&&t.resizeTo(e)}else t=o.add(e,e,n)},o.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},o.prototype.$_getRowResizeRequest=function(t,e,i,o,n,r,s){var l=-1,h=this.grid;if(t instanceof L.RowBarContainer?l=e.parentElement.$_row:t instanceof a.GridBodyElement&&(h.rowBarContainer.isVisible()||t.rightFixed||(h.fixedOptions.colCount>0&&t.fixed||0===h.fixedOptions.colCount)&&0===e.cellIndex&&(l=e.parentElement.$_row)),l<0)return null;var u=h.layoutManager,d=h.displayOptions,c=d.eachRowResizable&&!n,p=u.fixedItemCount,_=u.contentBounds.y,f=t.boundsByContainer(this._tempRect.setWidth(t.width));if(f.width<=0||i<f.x||i>=f.right)return null;if(l<p){if(h.fixedOptions.rowResizable&&(!d.dataHeights||d.dataHeights.length<=0)&&((f=u.getItemRect(l)).y+=_,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(l,c,f.y,o-f.bottom-1)}else if(d.rowResizable&&(!d.dataHeights||d.dataHeights.length<=0))for(var g=u.itemCount,m=h.topIndex,y=0;y<g;y++){var v=y+m+p;if(v==l&&((f=u.getItemRect(y+p)).y+=_,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(v,c,f.y,o-f.bottom-1)}return null},o.prototype._getDragTracker=function(t,e,i){if(t instanceof l.SelectRequest)switch(t.style){case h.SelectionStyle.ROWS:return new v.RowsSelectTracker(t,e,i);case h.SelectionStyle.COLUMNS:return new v.ColumnsSelectTracker(t,e,i);case h.SelectionStyle.BLOCK:case h.SelectionStyle.GROUP:return new v.BlockSelectTracker(t,e,i)}else{if(t instanceof l.ColumnResizeRequest)return new m.ColumnResizeTracker(t,this._cellResizer);if(t instanceof l.ColumnMoveRequest)return new m.ColumnMoveTracker(t,this._cellFeedback,this._cellMover);if(t instanceof l.RowResizeRequest)return new m.RowResizeTracker(t,this._cellResizer);if(t instanceof l.RowMoveRequest)return new m.RowMoveTracker(t,this._rowMoverProxy,this._rowMoverLine);if(t instanceof l.HeaderResizeRequest)return new m.HeaderResizeTracker(t,this._cellResizer);if(c.Utils.isMobile()){if(t instanceof F.TouchScrollRequest)return this._touchScrollTracker.request=t,this._touchScrollTracker;if(t instanceof F.TouchSelectRequest)return this._touchSelectTracker.request=t,this._touchSelectTracker}}return null},o.prototype.$_checkCellClicked2=function(t,e){if(t!==e.target&&t.firstElementChild!==e.target){var i=(0,c.getWin)(t),o=this.grid,n=o.rowBarContainer.getCheckBox(t);if(o.editOptions.checkable){var r=o.getEditItem(),s=o.getItem(t.parentElement[u.T_ROW]);if(r&&r.dataRow!==s.dataRow){var a=o.editOptions;switch(r.itemState){case _.ItemState.APPENDING:o.commit(a.forceAppend);break;case _.ItemState.INSERTING:o.commit(a.forceInsert);break;case _.ItemState.UPDATING:o.commit(a.commitWhenNoEdit)}}e.target instanceof i.HTMLSpanElement&&s.checkable&&(n.checked=o.checkBar.exclusive||!n.checked),this._doCheck(n,s,e.shiftKey)}else e.preventDefault()}},o.prototype._doCheck=function(t,e,i){var o=this.grid,n=o.checkBar,r=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var a=o.checkBar;if(e.checkable&&(a.showGroup||e.dataRow>=0)&&t){var l=r._prevChecked,h=void 0,u=void 0,d=[],c=-1,p=-1,_=void 0;if(i&&l>=0&&!n.exclusive||a.merged){i&&l>=0?(h=s.CellIndex.temp(o,l,null),u=o.getItem(l).checked,a.merged?(c=(_=a.merges.getRoom(h))?_.head:l,p=_?_.tail:l):(c=l,p=e.index)):(u=t.checked,c=p=e.index,r.$_setPrevChecked(e.index),n.exclusive&&o.itemSource._clearChecked()),a.merged?(h=s.CellIndex.temp(o,e.index,null),_=a.merges.getRoom(h),c=Math.min(_?_.head:e.index,c),p=Math.max(_?_.tail:e.index,p)):(c=Math.min(c,e.index),p=Math.max(c,p));for(var f=c;f<=p;f++){var g=o.getItem(f);g.checkable&&g.dataRow>=0&&d.push(g)}d.length>0&&o.itemSource.checkItems(d,u,!0)}else if(o.itemSource.checkItem(e,t.checked,a.exclusive,!0),r.$_setPrevChecked(e.index),a.focusMove){var m=o.focusedIndex.clone();m.itemIndex=e.index,this.setFocused(m,!0,!0)}}}},o.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0))}},o.prototype._doColumnHeaderClicked=function(t,i){if(e.prototype._doColumnHeaderClicked.call(this,t,i),!(2==t.button)){var o=i instanceof I.CellLayoutColumnItem?i.getDataColumn():null,n=this.grid,r=n.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(o)if(t.target===r.check)r.check.checked=o.checked=!o.checked,n._columnCheckedChanged(o);else if(t.target===r.filter&&o.hasFilters)n.selectColumnFilters(r);else if(t.target===r.popup){var s=o.header.popupMenuName,a=n.getCellViewOf(r.cell);s&&a&&n.popupMenuManager.show(s,a,null,!0)}else c.Utils.isClickableTemplate(r.cell,t.target)||!o.sortable||!n.sortingOptions.enabled||this.dragTracker instanceof v.ColumnsSelectTracker||n.sortColumn(o,t);else i instanceof I.CellLayoutGroupItem&&t.target===r.expander&&i.expandable&&(i.expanded=!i.expanded)}},o.prototype.$_columnHeaderClicked=function(t,e){t.button,this._doColumnHeaderClicked(t,e),t.preventDefault()},o.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},o.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},o.prototype.$_setHoveredCell=function(t,e,i){var o=this.grid,n=this._findTableCell();if(t&&n){var r=o.getTableView(n),a=this.$_getIndexAt(o,o.layoutManager,r,n,i);if(t!==this._tooltipCell||!s.CellIndex.areEquals(this._tooltipIndex,a)){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var l=o.displayOptions.hintDelay;if(t)if(l>0){var h=this;this._tooltipShowTimer=setTimeout(function(){h.$_showTooltip2(t,a)}.bind(h),l)}else this.$_showTooltip2(t,a)}}},o.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._tooltipIndex.reset()},o.prototype.$_showTooltip2=function(t,e){var i=this.grid,o=i.validationManager.getError(e),n=this._tooltipOptions;if(i.editOptions.hintOnError&&o)n.message=o.message,this.$_showTooltip(t,e,n);else{var r=t.renderer2,a=i.getCellType(t.cell),l=e.item,h="data"===a&&(!c.Utils.isMobile()||i.mobileOptions.showTooltip);if(l instanceof k.MergedGroupHeader?h=h&&e.dataColumn.groupLevel>0&&l.groupLevel+1>=e.dataColumn.groupLevel:l instanceof k.MergedGroupFooter&&(h=h&&e.dataColumn&&l.level>e.dataColumn.groupLevel),(h=h&&!!r)&&(h=i.displayOptions.showTooltip?!1!==r.showTooltip:r.showTooltip),h&&!s.CellIndex.areEquals(e,this._tooltipIndex)){var u=r.getTooltip(t,e);if(u||i.displayOptions.showEmptyTooltip){var d=i._fireShowTooltip(e,u);d&&(this._tooltipOptions.assignFrom(d),this.$_showTooltip(t,e,this._tooltipOptions))}}}},o.prototype.$_showTooltip=function(t,e,i){var o=this.grid,n=o.tooltipManager,r=o.layoutManager;if(!n.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(r,e,!1);a=s.boundsByContainer(a);var l=t.layout.isFixed?a.x:Math.max(a.x,r.nonFixedBounds.x),h=a.y+a.height;n.show(i,l,h,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},o.prototype.$_showStateError=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager,r=this._tooltipOptions;if(t!==this._tooltipCell){this._hideTooltip(),r.message=e;var s=i.focusedIndex.itemIndex,a=i.rowBarContainer.boundsByContainer(),l=n.getItemBounds(s<n.fixedItemCount?s:s-n.topIndex);o.show(r,a.x,a.y+l.bottom,l.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null)}},o.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(o>0){var n=this;this._tooltipShowTimer=setTimeout(function(){n.$_showHeaderTooltip2(t)}.bind(n),o)}else this.$_showHeaderTooltip2(t)}},o.prototype.$_showHeaderTooltip2=function(t){var e=this.grid,i=e.header.showTooltip;if(!1!==i&&this._tooltipCell!=t){var o=t&&t.showTooltip;if(void 0===i?o:!1!==o){var n=t.tooltip||t.text;if(n){var r=e._fireShowHeaderTooltip(t.layout.firstColumn,n,t.layout);r&&(this._tooltipOptions.assignFrom(r),this.$_showHeaderTooltip(t,this._tooltipOptions))}}}},o.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var r=n.getHeaderCellRect(t.layout,!1),s=t.layout.isFixed?r.x:Math.max(r.x,n.nonFixedBounds.x),a=r.y+r.height;o.show(e,s,a,0,!0),this._tooltipCell=t}},o.prototype.$_cellButtonClicked=function(t){var e=this.grid,i=t.layout.firstColumn;if(i){e.layoutManager;var o=t.getEditIndex(this._tempIndex);switch(i.button){case u.CellButton.POPUP:var n=i.popupMenuName,r=e.getCellViewOf(t.cell);n&&r&&e.popupMenuManager.show(n,r,o,!0);break;case u.CellButton.ACTION:e._doCellButtonClicked(o)}}},o.prototype.$_commitCancel=function(t,e){var i=this.grid;try{switch(t.itemState){case _.ItemState.INSERTING:return i.commit(e.forceInsert)||i.cancel(!0),!0;case _.ItemState.APPENDING:return i.commit(e.forceAppend)||i.cancel(!0),!0;case _.ItemState.UPDATING:return i.commit(e.commitWhenNoEdit)||i.cancel(!0),!0}}catch(o){if(o instanceof p.ValidationError)return(o=i._fireValidationFail(t.index,o.column,o))&&alert(e.showOnlyValidationMessage&&o.userMessage?o.userMessage:o.toString()),!1;if(o instanceof p.AbortError)return!1;throw o}return!1},o.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&(0,_.ItemState_isInserting)(t.item.itemState)){var n=t.itemIndex;if(!i||i.itemIndex!=n){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=n,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0,!0)):e&&(o.cancel(!0),i&&this.setFocused(i,!0,!0))}catch(t){if(t instanceof p.ValidationError)return(t=o._fireValidationFail(n,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof p.AbortError)return!0;throw t}return!0}}return!1},o.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof P.MobileSelectionLayer){var o=i.getSelectHandle(t.target);if(o)return this._touchSelectRequest.handle=o,this._touchSelectRequest}var n=e.getCellViewOf(t.target),r=e.getCellType(n);if(!n){var s=this.findElementAt(t.mouseX,t.mouseY,!1),a=this._getClickData(s,t);r=a&&a.cellType}switch(r){case"data":var l=e.getBodyCellbyCell(t.target);if(l&&l.isEditButton(t.target))return;return this._touchScrollRequest;case"gridEmpty":case"footer":case"summary":case"groupFooter":case"groupHeader":case"indicator":case"state":case"check":return this._touchScrollRequest}},o.prototype.onLongTapHandler=function(t,e,i){var o=this.grid,n=o.cellToIndex(t.target),r=this.grid.getBodyCellbyCell(t.target);if(r&&r.isEditButton(t.target))return this.setFocused(n,!0,!0),r.editable&&!r.readonly&&o.editController.buttonDown(n,t),!0},o.prototype._doTouchMove=function(t){var e=this.grid.mobileOptions;if(!this._longPressed){clearTimeout(this._longTimer),this._longPressed=!1;var i=this.dragTracker,o=!!i;return i instanceof F.TouchScrollTracker&&(o=i._scrolling),(o||this._swipeTimer||!e.scrollPropagate)&&t.cancelable&&t.preventDefault(),this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),!1}},o.prototype._checkSwipe=function(t){if(this.dragTracker instanceof F.TouchScrollTracker){var e=this.grid,i=this._clickCell&&e.getTableView(this._clickCell);if(!((i=i||this.findElementAt(t.mouseX,t.mouseY,!1))instanceof V.SummaryElement||i instanceof R.EmptyGridElement||i instanceof a.GridBodyElement)){var o=this._getClickData(i,t);if(o&&"groupHeader"!==o.cellType)return}var n=this._touchEvents,r=n.length;if(!(r<2)){for(var s=n[r-1],l=n[r-2],h=r-3;h>=0&&!(s.t-l.t>100);h--)l=n[h];var u=l.x,d=l.y,p=s.x,_=s.y,f=Math.sqrt(Math.pow(u-p,2)+Math.pow(d-_,2))/Math.max(16,s.t-l.t),g=.998;if(f>.1){var m=Math.log(.1/f)/Math.log(g),y=f*(1-Math.pow(g,m+1))/(1-g),v="right",C=Math.round(180*Math.atan2(_-d,p-u)/Math.PI);if(C<0&&(C=360+C),C>45&&C<=135?v="bottom":C>135&&C<=225?v="left":C>225&&C<=315&&(v="top"),i instanceof V.SummaryElement&&c.Utils.included(v,"bottom","top"))return;return this.onSwipeHandler(m,y,v,t)}}}},o.prototype.onSwipeHandler=function(t,e,i,o){this._touchMoving=!0,this._swipeDuration=t,this._swipeStarted=c.Utils.getTimer(),this._swipeAmount=0;var n=1;switch(i){case"right":n=-1;case"left":this._swipeDistance=n*e/20,this._swipeTimer=setInterval(this.$_scrollLeftPos.bind(this),50);break;case"bottom":n=-1;case"top":this._swipeDistance=n*e/20,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},o.prototype.$_checkTopBottom=function(t){var e=this.grid,i=e.layoutManager;return 0===e.topIndex&&t<0||e.topIndex+i.fullItemCount>=e.itemCount&&t>0},o.prototype.$_scrollRow=function(){var t=c.Utils.getTimer();if(Math.abs(this._scrollY-window.scrollY)>10)this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer);else if(t-this._swipeStarted<this._swipeDuration){var e=Math.floor(50*(this._swipeDistance-this._swipeAmount)/this._swipeDuration);this._swipeAmount-=e,this.grid.topIndex+=e,this.$_checkTopBottom(e)&&(this._swipeTimer=clearInterval(this._swipeTimer))}else this._swipeTimer=clearInterval(this._swipeTimer)},o.prototype.$_scrollLeftPos=function(){c.Utils.getTimer()-this._swipeStarted<this._swipeDuration?this.grid.leftPos+=Math.floor(this._swipeDistance):this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer)},o}(X);return os.GridSelectionTool=Z,os}var Ps,Bs={};var Vs,Ns={};var As,$s={};function Hs(){if(As)return $s;As=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.PopupMenuManager=$s.PopupMenuView=$s.PopupMenu=$s.PopupMenuItem=void 0;var t=d,e=et(),i=C(),o=S(),n=Sa(),r=Fs(),s=function(e){function i(t){var i=e.call(this)||this;return i._visible=!0,i._enabled=!0,t&&t.name&&(i._name=t.name),t&&i.assignFrom(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){return e.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(i,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(i,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(t){this._enabled=t}}),_dp(i,"label",{get:function(){return this._label},set:function(t){this._label=t}}),_dp(i,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(i,"group",{get:function(){return null}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t}}),_dp(i,"manager",{get:function(){return null}}),_dp(i,"type",{get:function(){return null}}),_dp(i,"checked",{get:function(){return null}}),i.prototype.click=function(){},i.prototype.isSeparator=function(){return!1},i}(e.EventAware),a=function(e){function o(t,i){var o=e.call(this,i)||this;return o._parent=t,o}return t.__extends(o,e),o.prototype._doDispose=function(){this._parent=null,this._callback=null,e.prototype._doDispose.call(this)},_dp(o,"type",{get:function(){return this._type},set:function(t){this._type=t}}),_dp(o,"group",{get:function(){return this._group},set:function(t){this._group=t}}),_dp(o,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(o,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(o,"parent",{get:function(){return this._parent},set:function(t){this._parent=t}}),o.prototype.isSeparator=function(){return"-"===this._label||this._type===i.MenuItemType.SEPARATOR},o.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},o.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},_dp(o,"manager",{get:function(){return this._parent.manager}}),o.prototype._itemClicked=function(t){},o}(s);$s.PopupMenuItem=a;var l=function(e){function n(t,i){var o=e.call(this,i)||this;return o._parent=t,o._items=o._load(i.children),o}return t.__extends(n,e),n.prototype._doDispose=function(){this._items&&this._items.forEach((function(t,e){t.dispose()})),this._items=null,this._parent=null,e.prototype._doDispose.call(this)},_dp(n,"children",{get:function(){return this._items}}),_dp(n,"parent",{get:function(){return this._parent}}),_dp(n,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof u)return t.popupMenuManager;if(t instanceof u)return t;t=t._parent}return null}}),n.prototype.count=function(){return this._items?this._items.length:0},n.prototype.itemClicked=function(t){if(t.parent==this&&t.type===i.MenuItemType.RADIO){var e=t.group,o=void 0;if(e){for(var n=0;n<this._items.length;n++)(o=this._items[n])instanceof a&&o.type===i.MenuItemType.RADIO&&o.group===e&&(o.checked=!1);t.checked=!0}}var r=this.manager.grid;"function"==typeof t.callback?t.callback.call(this,r.handler,t.toProxy(),this.manager.clickData):this._parent instanceof u?this._parent.doMenuItemClick(t,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,this.manager.clickData):this._parent.itemClicked(t)},n.prototype.addMenu=function(e,i){var n;void 0===i&&(i=-1);var r=this._load(o.Utils.makeArray(e));i<0&&(i=this._items.length),(n=this._items).splice.apply(n,t.__spreadArray([i,0],r,!1))},n.prototype.removeMenu=function(t){var e=this.getMenu(t);if(e){var i=this._items.indexOf(e);return this._items.splice(i,1),e.dispose(),!0}},n.prototype.getMenu=function(t){return o.Utils.find(this._items,(function(e){return e.name===t}))},n.prototype._load=function(t){var e=[];if(t)for(var i=0,r=t.length;i<r;i++){var s=t[i];if(o.Utils.isArray(s.children)&&s.children.length>0){var l=new n(this,s);e.push(l)}else{l=new a(this,s);e.push(l)}}return e},n.CLICKED="onPopupMenuClicked",n}(s);$s.PopupMenu=l;var h=function(e){function r(t){var i=e.call(this)||this;return i._showing=!1,i._viewGridInside=!1,i._container=t,i._element=i._createElement(),i._element.addEventListener("contextmenu",(function(t){t.preventDefault()})),i}return t.__extends(r,e),r._borrowView=function(t){var e=r.$_views[t.$_hash]||[];return r.$_views[t.$_hash]=e,e.pop()||new r(t)},r._returnView=function(t){r.$_views[t._container.$_hash].push(t)},r.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(r,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t}}),_dp(r,"childView",{get:function(){return this._childView},set:function(t){this._childView=t}}),_dp(r,"currDiv",{get:function(){return this._currDiv}}),_dp(r,"manager",{get:function(){return this._menu.manager}}),r.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},r.prototype.show=function(t,e,i,o,r,s,a,l){if(!this._showing){this._showing=!0;try{var h=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;h._parent&&!(h instanceof n.GridBase);)h=h.parent;h&&(this._viewGridInside=h instanceof n.GridBase?h.editorOptions.viewGridInside:h instanceof u&&h.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,r,s,a)}finally{this._showing=!1}}},r.prototype.boundsByContainer=function(){return null},r.prototype.hide=function(t){void 0===t&&(t=!0),t&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),o.Utils.detach(this._element))},r.prototype.hideChild=function(){this.$_hideChildView()},r.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},r.prototype.getActiveElementId=function(){var t=this._menu._items[this._itemIndex];return t?t._elementId:""},r.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},r.prototype.$_show=function(t,e,i,n,r,s){if(this._element){var a=t.doc,l=(0,o.getDocWin)(a),h=this._element,u=h.style,d=this.manager,c=t.gridView.displayOptions.baseZindex,p=t._containerDiv;this._element.style.zIndex=String(c+4);var _,f=d.dropdownCount;if(this._viewGridInside)_=t._container;else{var g=p.parentNode;_=!o.Utils.isSlotMode()||1!==g.nodeType&&11!==g.nodeType?a.documentElement:g}h.id="rg-popup-"+this._menu.name,this._menu=e,this._itemIndex=-1,o.Utils.clearElements(this._element),this.$_buildItems(e),o.Utils.disableSelection(h),_.appendChild(h);var m=0;if(f&&e.children.length>f)for(var y=0,v=0;y<e.children.length&&v<f;y++){var C=this._element.children[y];C.menuItem.isSeparator()||(m+=C.offsetHeight,v++)}m>0&&m<h.offsetHeight?(u.height=m+2+"px",u.overflow="auto"):(u.removeProperty("height"),u.overflow="hidden");var w=o.Utils.getBrowserSize(),x=o.Utils.ieTen||o.Utils.ieOld?o.Utils.getClientRect(a.body):o.Utils.getClientRect(a.documentElement),b=o.Utils.getClientRect(t._container),I=w.width,E=w.height,S=o.Utils.getClientRect(h),R=l.pageXOffset||a.documentElement.scrollLeft,T=l.pageYOffset||a.documentElement.scrollTop;a.documentElement.scrollWidth>a.documentElement.clientWidth&&(E-=18),a.documentElement.scrollHeight>a.documentElement.clientHeight&&(I-=18),this._viewGridInside?(S.height>=b.height&&(u.height=b.height-4+"px",u.overflow="auto",S=o.Utils.getClientRect(this._element)),n+b.top+S.height>b.bottom&&(n=this._parentView?b.bottom-S.height-b.top-3:n-S.height-s),i+b.left+S.width>b.right&&(i=this._parentView?b.right-S.width-b.left-3:i-S.width-r)):(this._parentView||(_===p.parentNode?(i+=p.offsetLeft,n+=p.offsetTop):(i+=b.left-x.left,n+=b.top-x.top)),S.height>=E&&(u.height=E-4+"px",u.overflow="auto",S=o.Utils.getClientRect(this._element)),n+S.height>=E+T-3&&(n=n-S.height-3)<0&&(n=Math.max(0,E-S.height-3)),i+S.width>=I+R-3?i=Math.max(0,I-S.width-3):void 0!==r&&S.width<r&&(i+=r-S.width)),o.Utils.move(this._element,Math.max(0,i),Math.max(0,n))}},r.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",e.setAttribute("role","listbox"),e.tabIndex=-1,this._container.$_addListener(e,"keydown",t,!1),e},r.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,i=this._element.getBoundingClientRect(),o=this._element.offsetLeft+i.width-4,n=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=r._borrowView(this._container),this._childView.show(this._container,this,e,o,n)}},r.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),o.Utils.detach(this._childView._element),r._returnView(this._childView)),this._childView=null},r.prototype._menuItemActived=function(t){this._currDiv=t;var e=t.menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof a?i.childView&&i.$_hideChildView():e instanceof l&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){i._showChild(t)}),200))},r.prototype._menuItemDeactived=function(t){},r.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof l?e.enabled&&this._showChild(t):e?e.enabled&&(this.hide(!0),this.manager.close(),e.enabled&&e.click()):this.$_hideChildView()},r.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,n=e.childElementCount;i<n;i++){var r=e.childNodes[i];if(i===t?o.Utils.addClassName(r,"rg-popup-item-focused"):o.Utils.removeClassName(r,"rg-popup-item-focused"),i==t){var s=r.offsetTop,a=r.offsetHeight+4,l=e.offsetHeight,h=e.scrollTop;h>s?e.scrollTop=Math.max(0,e.scrollTop+(s-h)):h+l<s+a&&(e.scrollTop=e.scrollTop+s+a-(h+l)),this._menuItemActived(r)}}},r.prototype.$_buildItems=function(t){for(var e=t.children,n=[],s=this._container.doc,h=0,u=e.length;h<u;h++){var d=r.$_menuId++,c=e[h];if(c.visible){var p=s.createElement("div");if(p.menuView=this,p.menuItem=c,p.setAttribute("role","option"),p.id=c._elementId="rg-popup-item"+d,c instanceof a&&c.isSeparator()){p.className="rg-popup-separator";var _=s.createElement("hr");_.className="rg-popup-separator-hr",p.appendChild(_),p.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{!this._firstItem&&(this._firstItem=p),n.length=0,n.push("rg-popup-item"),c.group&&n.push("rg-popup-"+c.group),!c.enabled&&n.push("rg-popup-item-disable"),p.className=n.join(" "),p.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),p.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),p.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this),n=["rg-popup-content"],o.Utils.included(c.type,i.MenuItemType.CHECK,i.MenuItemType.RADIO)&&(c.checked?n.push(c.group?"rg-popup-radio-checked":"rg-popup-check-checked"):n.push(c.group?"rg-popup-radio":"rg-popup-check")),c.styleName&&n.push(c.styleName),c instanceof l&&n.push("rg-popup-expander");var f=s.createElement("span");f.id="$popupMenu_item_"+d,f.innerHTML=c.label,f.className=n.join(" "),o.Utils.disableSelection(f),p.appendChild(f)}o.Utils.disableSelection(p),this._element.appendChild(p)}}},r.$_menuId=0,r.$_views={},r}(e.EventAware);$s.PopupMenuView=h;var u=function(e){function i(t){var i=e.call(this)||this;return i._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(i),i._container=t,i._containerDom=t._containerDom,i._menus=[],i}return t.__extends(i,e),i.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,e.prototype._doDispose.call(this)},_dp(i,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t}}),_dp(i,"grid",{get:function(){return this._container.gridView}}),_dp(i,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount}}),_dp(i,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t}}),_dp(i,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t}}),i.prototype.popupManager=function(){return this},i.prototype.isShow=function(){return!!this._mainView},i.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(o.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},i.prototype.getMenu=function(t){return o.Utils.find(this._menus,(function(e){return e.name===t}))},i.prototype.addMenu=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=null),o.Utils.isWhiteSpace(t))throw"Menu name is empty.";var r=o.Utils.find(this._menus,(function(e){return e.name===t}));if(r&&!i)return r;var s=this._menus.indexOf(r);return r&&r.dispose(),r=new l(n||this,{name:t,children:e}),s>=0?this._menus.splice(s,1,r):this._menus.push(r),r},i.prototype.removeMenu=function(t){var e=this.indexOf(t);e>-1&&this._menus.splice(e,1).forEach((function(t){return t.dispose()}))},i.prototype.show=function(t,e,n,s){var a=this.grid,u=(0,o.getWin)(this._containerDom),d=n&&a.getBodyCellAt(n);if("string"==typeof t)t=this.getMenu(t);else if(!(t instanceof l)){t=new l(this,{children:t})}if(t){var c=this.grid.container.getBound(),p=void 0;if(d)p=(d.cellButton||d.merged&&d.head.cellButton||d.cell).getBoundingClientRect();else p=e.getBoundingClientRect();var _=p.bottom,f=p.left-c.x,g=_-c.y,m=p.width,y=p.height;if(this._mainView=this._activeView=h._borrowView(this._container),e instanceof u.HTMLTableCellElement){var v=a.getCellType(e),C=a.getTableView(e),w=void 0;if("data"===v)w=(d=d||C.bodyCellByCell(e)).grouped?r.ClickData.getItem("groupHeader",d.item.index,null):r.ClickData.getCell(v,d,n);else if("header"===v){var x=C.layoutByCell(e);w=r.ClickData.getLayout(v,x)}this.clickData=w}else if(e instanceof u.HTMLElement){var b=a.getCellViewOf(e),I=(C=a.getTableView(b)).tableCellByCell&&C.tableCellByCell(b);"inlineFilter"===(v=a.getCellType(b))&&(this.clickData=r.ClickData.getLayout(v,I.layout))}var E="string"==typeof t?t:t.name,S=s?this.fireObjectEvent(i.POPUP_MENU_POPUP,f,g,this.clickData,E,!1):t;if("string"==typeof S)t=this.getMenu(S);else if(!1===S)return;t&&(this._mainView.show(this._container,null,t,f,g,m,y),!o.Utils.isSlotMode()&&e&&e.setAttribute("aria-activedescendant",this._mainView.getElementId()),!o.Utils.isSlotMode()&&u.addEventListener("pointerdown",this._grolbalMouseHandler,!1))}},i.prototype.showContext=function(t,e,i,n,r){if(t&&!this._mainView){var s=(0,o.getWin)(this._containerDom);this.clickData=r,this._mainView=this._activeView=h._borrowView(this._container),this._mainView.show(this._container,null,t,i,n,0,0,e),!o.Utils.isSlotMode()&&s.addEventListener("pointerdown",this._grolbalMouseHandler,!1)}},i.prototype.close=function(){if(this._mainView){var t=(0,o.getWin)(this._containerDom);this._mainView.hide(),h._returnView(this._mainView),this._mainView=null,!o.Utils.isSlotMode()&&t.removeEventListener("pointerdown",this._grolbalMouseHandler,!1)}},i.prototype.keyDown=function(t,e){this._doKeydown(t,e)},i.prototype.doMenuItemClick=function(t,e){this.fireEvent(i.MENU_ITEM_CLICKED,t,e)},i.prototype._doKeydown=function(t,e){var i=this._activeView,n=null==i?void 0:i.currDiv;switch(t.keyCode){case 40:i.changeItemIndex(1);break;case 38:i.changeItemIndex(-1);break;case 37:i.parentView&&(i.changeItemIndex(0),i.hideChild(),this._showingView=this._activeView=i.parentView||this._mainView);break;case 39:i&&i.childView&&(i=this._showingView=this._activeView=i.childView).changeItemIndex(1);break;case 13:case 32:n&&n.parentElement&&i.menuItemClicked(n)}!o.Utils.isSlotMode()&&e&&e.setAttribute("aria-activedescendant",i.getActiveElementId())},i.prototype.$_buildItems=function(t){},i.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",i.POPUP_MENU_POPUP="onPopupMenuManagerPopup",i}(e.EventAware);return $s.PopupMenuManager=u,$s}var Us,Gs={};var Ws,js={};var zs,Ys={};var qs,Xs={};var Ks,Js,Zs={},Qs={};function ta(){if(Ks)return Qs;Ks=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.FilteringManager=void 0;var t,e=wi(),i=C(),o=S();!function(t){t[t.ALL=0]="ALL",t[t.YQ=1]="YQ",t[t.YM=2]="YM",t[t.Y=3]="Y",t[t.QM=4]="QM",t[t.Q=5]="Q",t[t.M=6]="M",t[t.NONE=7]="NONE"}(t||(t={}));var n=function(){function n(t){this._options=t}return n.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),t.indexOf(e)>=0)return!0;for(var n=o.Utils.hangulToChosungAll(t),r=o.Utils.hangulToChosungAll(e),s=-1,a=!1;(s=n.indexOf(r,s+1))>=0;){for(var l=0;l<r.length&&l+s<n.length;l++){var h=o.Utils.hangulToChosung(t[l+s]),u=o.Utils.hangulToChosung(e[l]);if(u.org&&u.org!==h.org||!u.cho||u.cho!==h.cho){a=!1;break}a=!0}if(a)return!0}return!1},n.getDateProperty=function(t,e){if(!t)return null;switch(e){case 0:return t.getFullYear();case 1:return t.getMonth()>5?2:1;case 2:return Math.floor(t.getMonth()/3);case 3:return t.getMonth();case 4:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case 5:return t.getDate();case 6:return t.getHours()}},n.prototype.dispose=function(){return this._filters=null,this._options=null,null},_dp(n,"searched",{get:function(){return this._searched}}),n.prototype.buildItems=function(t,e,o,n){void 0===n&&(n=!0);var r=this._options.selector,s=this._options.automating,a=r.emptyFilterText;this._autoFilter=o;var l=this._filters=o?t.autoFilters:t.filters,h=[];if(o){t.autoFilters.activeCount>0&&(h=this._getActivatedFilters(t.autoFilters)),t.autoFilters.clear(!1);var u=!1,d=void 0;this._valueType=t.valueType;var c=s.filteredDataOnly?t.grid.getDistinctItemValues(t.dataIndex):e.getDistinctValues(t.dataIndex);switch(this._valueType){case i.ValueType.DATETIME:d=(u=s.dateCategorize)&&s.dateCategoryCallback?s.dateCategoryCallback(t,c):this._categorizeDateValues(c,u,a);break;case i.ValueType.NUMBER:d=(u=s.numberCategorize)&&s.numberCategoryCallback?s.numberCategoryCallback(t,c):this._categorizeNumberValues(c,u,a);break;case i.ValueType.BOOLEAN:d=[];for(var p=!1,_=0;_<c.length;_++){var f=c[_];null!=f?d.push({text:f.toString().toUpperCase(),value:f}):p=!0}p&&r.showEmptyFilter&&d.push({text:a,empty:!0});break;case i.ValueType.TEXT:u=s.textCategorize,d=t.lookupSource&&this._options.automating.lookupDisplay&&!s.textCategoryCallback?this._categorizeLookupTree(e,t,a):u&&s.textCategoryCallback?s.textCategoryCallback(t,c):this._categorizeTextValues(c,u,a)}d&&this._createCategories(d,null,t.valueType,l),this._filters.activateItems(h,!0,n)}},n.prototype.search=function(t){var i=[];function o(t,e){if(i.indexOf(t)<0){for(var o=[],n=t;n;)i.indexOf(n)<0&&o.push(n),n=n.category;Array.prototype.push.apply(i,o.reverse())}}for(var r=0,s=this._filters.count;r<s;r++){var a=this._filters.getItem(r);if(!(a instanceof e.ColumnFilterCategory)){var l=this._autoFilter?a.tag:a.toString(),h=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,u=this._options.selector.searchIgnoreCase,d=n.HasPartial;(d(l,t,u)||h&&d(a.toString(),t,u))&&o(a)}}return i},n.prototype._getActivatedFilters=function(t){for(var i=[],o=t.count;o--;){var n=t.getItem(o);n instanceof e.ColumnFilterCategory||!n.active||i.push(n.name)}return i},n.prototype._createCategories=function(t,r,s,a){var l=a.getOwner(),h=this._options.automating.lookupDisplay&&l.lookupDisplay,u=h&&l.lookupSource;function d(t,e,o){if(u&&o.fieldIds){for(var n=o,r=[],s=0;s<n.fieldIds.length;s++)null==n.keys[s]||""==n.keys[s]?r.push("(values[".concat(n.fieldIds[s],"] is empty)")):r.push("(values[".concat(n.fieldIds[s],"] = '").concat(n.keys[s],"')"));return r.join(" and ")}if(null==t||o.empty)return"value is empty";if(e==i.ValueType.DATETIME){var a=o;return"(year(value) = ".concat(a.year,") and (month(value) = ").concat(a.month+1,") and (day(value) = ").concat(a.day,")")}return e==i.ValueType.BOOLEAN?o.value?"value":"not(value)":e==i.ValueType.NUMBER?"value = "+t:"value = '"+(t=t.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"))+"'"}function c(t,e,o){return s===i.ValueType.TEXT&&t&&!e.empty?l.getLookupLabel(t):o}for(var p=o.Utils.pad,_=0,f=t.length;_<f;_++){var g=t[_],m=g.hasOwnProperty("childs"),y=g.hasOwnProperty("values"),v=void 0;(v=m||y?new e.ColumnFilterCategory:new e.ColumnFilter(d(g.value,s,g))).text=u?g.text:h?c(g.value,g,g.text):g.text;var C="";if(C=g.name?g.name:g.empty?n.EMPTY_FILTER:s==i.ValueType.DATETIME&&m&&r?r.name+" "+g.text:g.text,v.name=C,this._filters.add(v,!1),r&&r.addChild(v),v instanceof e.ColumnFilterCategory){if(m)this._createCategories(g.childs,v,s,a);else if(o.Utils.isArray(g.values))for(var w=g.values,x=0,b=w.length;x<b;x++){var I=w[x],E=I+"",S=new e.ColumnFilter(d(I,s,g));S.name=E,S.text=h?c(I,g,E):E,S.tag=E,v.addChild(S),this._filters.add(S,!1)}}else if(s!=i.ValueType.DATETIME||g.empty)v.tag=g.text;else{var R=g;v.tag="".concat(R.year,"-").concat(p(R.month+1,2),"-").concat(p(R.day,2))}}},n.prototype._categorizeDateValues=function(e,i,o){if(!e)return null;var r=!1,s=!1,a=!1;for(var l=n.getDateProperty,h=0,u=0,d=0,c={year:null,quarter:null,month:null,day:null},p=e.length,_=0;_<p;_++){var f=e[_];if(f){var g=l(f,0),m=l(f,2),y=l(f,3),v=l(f,5);c?g!=c.year?(h++,u++,d++):m!=c.quarter||y!=c.month?(u++,d++):v!=c.day&&d++:(h++,u++,d++),c.year=g,c.quarter=m,c.month=y,c.day=v}}function C(t,e){var i=e+"";return t?t.replace("YYYY",i).replace("YY",i.slice(-2)):i}function w(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("QQ",o).replace("Q",i)}function x(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("MM",o).replace("M",i)}var b=this._options.automating,I=[],E=[];i&&((r=h>1&&u>6)&&(I.push(0),E.push((function(t,e,i){return C(b.dateYearFormat,i)}))),(s=u/h>6)&&(I.push(2),E.push(r?function(t,e,i){return w(b.dateQuarterFormat,i)}:function(t,e,i){return C(b.dateYearFormat,t)+" "+w(b.dateQuarterFormat,i)})),(a=d>9&&u>3)&&(I.push(3),E.push(r||s?function(t,e,i){return x(b.dateMonthFormat,i)}:function(t,e,i){return C(b.dateYearFormat,t)+" "+x(b.dateMonthFormat,i)}))),I.push(5),E.push((function(t,e,i){var o=C(b.dateDayFormat,t);return o=function(t,e){var i=e+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("DD",o).replace("D",i)}(o=x(o,e),i)}));var S=[];return function e(i,l,h,u,d){void 0===u&&(u=0),void 0===d&&(d=-1),d=-1==d?i.length-1:d;for(var c,p,_=null,f=u,g=!1,m=function(o){var d=i[o],m=function(t,e,i){for(var o=[],r=0;r<=i;r++)o.push(n.getDateProperty(t,e[r]));return o}(d,I,l),v=function(t,e,i){if(!t)return null;switch(e[i]){case 0:return t.getFullYear().toString();case 1:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case 2:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case 3:return t.getFullYear().toString()+t.getMonth().toString();case 5:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(d,I,l);if(o>u&&v!=_){var C=c[l];if(p)if(l===I.length-1){var w={text:"",year:p.getFullYear(),month:p.getMonth(),day:p.getDate(),value:p};w.text=E[l](w.year,w.month,w.day),h.push(w)}else{var x={text:"",childs:[]},b=function(){x.year=p.getFullYear()},S=function(){x.quarter=Math.floor(p.getMonth()/3)},R=function(){x.month=p.getMonth()},T=r&&s&&a?t.ALL:r&&s?t.YQ:r&&a?t.YM:r?t.Y:s&&a?t.QM:s?t.Q:a?t.M:t.NONE;T===t.ALL?0===l?b():1===l?(b(),S()):2===l&&(b(),S(),R()):T===t.YQ?0===l?b():1===l&&(b(),S()):T===t.YM?0===l?b():1===l&&(b(),R()):T===t.Y?b():T===t.QM?0===l?S():1===l&&(S(),R()):T===t.Q?S():T===t.M&&R(),x.text=E[l](p.getFullYear(),p.getMonth(),C),h.push(x),e.call(y,i,l+1,x.childs,f,o-1)}f=o}o>u&&null==p&&(g=!0),_=v,c=m,p=d},y=this,v=u;v<=d+1;v++)m(v);0==l&&g&&this._options.selector.showEmptyFilter&&h.push({text:o,empty:!0})}.call(this,e,0,S),S},n.prototype._categorizeNumberValues=function(t,e,i){if(!t||!t.length)return null;var o=t.filter((function(t){return null!=t&&null!=t&&!isNaN(t)})).sort((function(t,e){return t-e})),n=o.length,r=o.length!==t.length,s=1,a=[];if(e&&n>15)for(s=Math.round(n/Math.min(Math.max(4,Math.round(n/5)),8));o.length>0;){var l=o.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var h=0;h<n;h++)a.push({text:o[h]+"",value:o[h]});return r&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0}),a},n.prototype._categorizeLookupTree=function(t,e,i){var o=e.grid,n=[];if(this._options.automating.filteredDataOnly)o._items._rs.getAllItems().forEach((function(t){n.push(t.dataRow)}));else if(o.isTree())t.getDescendants(null,-1).forEach((function(t){n.push(t.rowId)}));else for(var r=t.rowCount,s=0;s<r;s++)n.push(s);var a=[],l=e.lookupKeyFieldIds,h={},u={};function d(n,r,s,a,l){var h=s.shift(),c=t.getValue(r,h);l.push(h),a.push(c);var p=n[c];p||(p=n[c]={value:c,name:a.join("-"),keys:a.slice(),fieldIds:l.slice()}),s.length?(!p.text&&(p.text=function(t,e,i){var n=u[t];if(!n)for(var r=o.columnsByField(t),s=0;s<r.length;s++)if(r[s].lookupSource||r[s].lookupDisplay){n=u[t]=r[s];break}return n?n.lookupSource?n.lookupSource.lookup(e,n.valueSeparator):n.lookupDisplay?n.getLookupLabel(i):i:i}(h,a,c)||c||i),p.childs=p.childs||{},d(p.childs,r,s,a,l)):!p.text&&(p.text=c?e.lookupSource.lookup(a,e.valueSeparator)||c:i)}for(s=0;s<n.length;s++)d(h,n[s],l.slice(),[],[]);return function t(e,i){Object.keys(e).sort().forEach((function(o){var n=e[o],r={value:n.value,text:n.text,name:n.name,fieldIds:n.fieldIds,keys:n.keys};i.push(r),n.hasOwnProperty("childs")&&(r.childs=[],t(n.childs,r.childs))}))}(h,a),a},n.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,n=[],r=!1;if(e&&o>15){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],h=0;h<o;h++){var u=t[h];if(u){var d=(x=u[0]).charCodeAt(0),c=!1,p=void 0;s[p=d>=48&&d<=57?0:d>=65&&d<=90||d>=97&&d<=122?1:d>=1e4?2:3][x]?s[p][x].push(u):(s[p][x]=[u],c=!0),a[p]++,c&&l[p]++}else r=!0}for(var _=Math.min(Math.max(4,Math.round(o/5)),8),f=0;f<4;f++){var g=0==a[f]?0:Math.max(1,Math.min(l[f],Math.round(a[f]/o*_))),m=Math.round(l[f]/g),y=m,v=s[f],C="",w=[];for(var x in v)y===m&&(C=x),Array.prototype.push.apply(w,s[f][x]),0==--y&&(n.push({text:1==m?x:C+" ~ "+x,values:w}),w=[],y=m)}}else{h=0;for(var b=t.length;h<b;h++){var I=t[h];I?n.push({text:I,value:I}):r=!0}}return r&&this._options.selector.showEmptyFilter&&n.push({text:i,empty:!0}),n},n.EMPTY_FILTER="$$empty",n}();return Qs.FilteringManager=n,Qs}var ea,ia,oa={},na={};function ra(){if(ia)return oa;ia=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.lk=void 0;var e=(ea||(ea=1,function(e){var i,o=t&&t.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.h=e.r=void 0;var n=function(){function t(){}return t.encode=function(e){for(var i=t.CHARACTERS,o=[],n=e.length,r=n%3,s=n-r,a=0;a<s;){var l=e[a++]<<16|e[a++]<<8|e[a++];o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(i.charAt(63&l))}switch(r){case 2:l=e[s++]<<16|e[s++]<<8,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(t.SUFFIX);break;case 1:l=e[s++]<<16,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(t.SUFFIX),o.push(t.SUFFIX)}return o.join("")},t.decode=function(e){for(var i=t.CHARACTERS,o=t.SUFFIX,n=e.split(""),r=[],s=n.length;n[--s]===o;);for(var a=0;a<s;){var l=i.indexOf(n[a++])<<18;a<=s&&(l|=i.indexOf(n[a++])<<12),a<=s&&(l|=i.indexOf(n[a++])<<6),a<=s&&(l|=i.indexOf(n[a++])),r.push(l>>>16&255),r.push(l>>>8&255),r.push(255&l)}for(;0===r[r.length-1];)r.pop();return r},t.SUFFIX="=",t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),r=function(){function t(){}return t.union=function(t,e){var i=e.s3[255&t],o=e.s2[255&(t>>=8)],n=e.s1[255&(t>>=8)];return((n=((n=((t=e.s0[255&(t>>=8)])>>16)+(n>>16)+((65535&t)+(65535&n)>>16)<<16|(65535&t)+(65535&n)&65535)>>16^o>>16)<<16|65535&(65535&n^65535&o))>>16)+(i>>16)+((65535&n)+(65535&i)>>16)<<16|(65535&n)+(65535&i)&65535},t.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},t._encryptBlock=function(e,i){var o=e.left,n=e.right,r=t.xor,s=t.union;o=r(o,i.p[0]),n=r(n,r(s(o,i),i.p[1])),o=r(o,r(s(n,i),i.p[2])),n=r(n,r(s(o,i),i.p[3])),o=r(o,r(s(n,i),i.p[4])),n=r(n,r(s(o,i),i.p[5])),o=r(o,r(s(n,i),i.p[6])),n=r(n,r(s(o,i),i.p[7])),o=r(o,r(s(n,i),i.p[8])),n=r(n,r(s(o,i),i.p[9])),o=r(o,r(s(n,i),i.p[10])),n=r(n,r(s(o,i),i.p[11])),o=r(o,r(s(n,i),i.p[12])),n=r(n,r(s(o,i),i.p[13])),o=r(o,r(s(n,i),i.p[14])),n=r(n,r(s(o,i),i.p[15])),o=r(o,r(s(n,i),i.p[16])),e.right=o,e.left=r(n,i.p[17])},t._decryptBlock=function(e,i){var o=e.left,n=e.right,r=t.xor,s=t.union;o=r(o,i.p[17]),n=r(n,r(s(o,i),i.p[16])),o=r(o,r(s(n,i),i.p[15])),n=r(n,r(s(o,i),i.p[14])),o=r(o,r(s(n,i),i.p[13])),n=r(n,r(s(o,i),i.p[12])),o=r(o,r(s(n,i),i.p[11])),n=r(n,r(s(o,i),i.p[10])),o=r(o,r(s(n,i),i.p[9])),n=r(n,r(s(o,i),i.p[8])),o=r(o,r(s(n,i),i.p[7])),n=r(n,r(s(o,i),i.p[6])),o=r(o,r(s(n,i),i.p[5])),n=r(n,r(s(o,i),i.p[4])),o=r(o,r(s(n,i),i.p[3])),n=r(n,r(s(o,i),i.p[2])),o=r(o,r(s(n,i),i.p[1])),e.right=o,e.left=r(n,i.p[0])},t._init=function(e){for(var i,o=e.split("").map((function(t){return 255&t.charCodeAt(0)})),n=(e=t.kb,t._encryptBlock),r=0,s=0,a={left:0,right:0},l={p:e.p.slice(0).map((function(e){for(var i=o.length,n=0;n<4;n++)s=s*t.POW8|o[r++%i];return(e>>16^s>>16)<<16|65535&(65535&e^65535&s)})),s0:e.s0.slice(0),s1:e.s1.slice(0),s2:e.s2.slice(0),s3:e.s3.slice(0)},h=0,u=l.p.length;h<u;)n(a,l),l.p[h++]=a.left,l.p[h++]=a.right;for(h=0;h<4;h++)for(i=0,u=l["s"+h].length;i<u;)n(a,l),l["s"+h][i++]=a.left,l["s"+h][i++]=a.right;return l},t.encrypt=function(e,i){for(var o=t._encryptBlock,r=t._init(i),s=8-(7&e.length),a=0;a<s;a++)e+=String.fromCharCode(s);var l=0,h=[],u=e.length>>3,d={left:null,right:null};for(a=0;a<u;a++)d.left=e.charCodeAt(l)*t.POW24|e.charCodeAt(l+1)*t.POW16|e.charCodeAt(l+2)*t.POW8|e.charCodeAt(l+3),d.right=e.charCodeAt(l+4)*t.POW24|e.charCodeAt(l+5)*t.POW16|e.charCodeAt(l+6)*t.POW8|e.charCodeAt(l+7),o(d,r),h.push(d.left>>24&255),h.push(d.left>>16&255),h.push(d.left>>8&255),h.push(255&d.left),h.push(d.right>>24&255),h.push(d.right>>16&255),h.push(d.right>>8&255),h.push(255&d.right),l+=8;return n.encode(h)},t.decrypt=function(e,i){for(var o=t._decryptBlock,r=t._init(i),s=[],a=n.decode(e),l=0,h=a.length>>3,u={left:null,right:null},d=0;d<h;d++){u.left=a[l]*t.POW24|a[l+1]*t.POW16|a[l+2]*t.POW8|a[l+3],u.right=a[l+4]*t.POW24|a[l+5]*t.POW16|a[l+6]*t.POW8|a[l+7],o(u,r);var c=u.left,p=u.right;s.push(c>>24&255),s.push(c>>16&255),s.push(c>>8&255),s.push(255&c),s.push(p>>24&255),s.push(p>>16&255),s.push(p>>8&255),s.push(255&p),l+=8}return s[s.length-1]!==s[s.length-2]&&1!==s[s.length-1]||(e=s[s.length-1],s.splice(s.length-e,e)),s.map((function(t){return String.fromCharCode(t)})).join("")},t.POW2=Math.pow(2,2),t.POW3=Math.pow(2,3),t.POW4=Math.pow(2,4),t.POW8=Math.pow(2,8),t.POW16=Math.pow(2,16),t.POW24=Math.pow(2,24),t.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},t}(),s=String.fromCharCode(100,107,100,108),a=function(){function t(t){this._gk=null!=t?t:s}return t.prototype._ldk=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},t.prototype.get=function(){return this._gk+this._ldk(r.kb.k)},t}(),l=function(){function t(){}return t.run=function(t,e){return e=new a(e).get(),r.encrypt(t,e)},t}();e.r=l;var h=function(t){function e(){var i=t.call(this)||this;return Object.setPrototypeOf(i,e.prototype),i}return o(e,t),e}(Error),u=function(){function t(t,e){this._gk=e,this._code=t,this._lic=this.run()}return t.prototype.run=function(){for(var t={},e=r.decrypt(this._code,new a(this._gk).get()).split(";"),i=0,o=e.length;i<o;i++){var n,s=(n=e[i].split("="))[0];(n=n[1])&&0<n.length&&(t[s]=n)}return t},Object.defineProperty(t.prototype,"lic",{get:function(){return this._lic},enumerable:!1,configurable:!0}),t.prototype.is=function(t,e){return t in this._lic&&this._lic[t]===e},t.prototype.includes=function(t,e){return t in this._lic&&0<=e.indexOf(this._lic[t])},t.prototype.expired=function(t,e){return!(t in this._lic)||!this._lic[t]||(t=this._lic[t],e=(e?new Date(new Date(t).setMonth(new Date(t).getMonth()+e)):new Date(t)).getTime(),t=Date.now(),!isNaN(e)&&e<t)},t.prototype.validate=function(t){var e=this,i=!1;try{t.forEach((function(t){var o=Object.keys(t),n=Object.values(t);o.forEach((function(t,o){if(o=n[o],!(i=Array.isArray(o)?e.includes(t,o):e.is(t,o)))throw new h}))}))}catch(t){if(!(t instanceof h))throw t;i=!1}return i},t}();e.h=u}(na)),na),i=g(),o=pr();function n(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)}function r(t,e,i){for(var o=t.split(","),r=0,s=o.length;r<s;r++){var a=o[r];if(n(a,e))return!0;if(i&&a&&"*"===a[0]&&"*."!==a.substr(0,1))if(new RegExp("^/"+a.substr(1)+"/").exec(i))return!0}return!1}return oa.lk=function(){var t;try{if(!(t=realGrid2Lic))return 1}catch(t){return 1}var n=null;try{if(!(n=new e.h(t,o._gk)))return 1}catch(t){return 1}if(!n.is("name",i.globalRealGridInfo.name))return 2;var s=null===window||void 0===window?void 0:window.location,a=s?s.hostname:"",l=s?s.pathname.toLowerCase():"",h=r,u=n.is("lic","Enterprise"),d=n.is("lic","Evaluation"),c=n.is("lic","Limited"),p=n.is("lic","Subscription"),_=h(n.lic.server,a,l),f=!u&&h(n.lic.server,"*",null);return u||d||c||p?_||f?!u&&n.expired("expire",1)?f?32:16:(i.globalRealGridInfo.license=n.lic.lic,i.globalRealGridInfo.expire=n.lic.expire,0):8:64},oa}var sa,aa={};function la(){if(sa)return aa;sa=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.RowGroup=aa.RowGroupFooterCollection=aa.RowGroupFooter=aa.RowGroupBarCell=aa.RowGroupFooterCell=aa.RowGroupHeaderCell=void 0;var t=d,e=Ii(),i=Li(),o=di(),n=yi(),r=Mi(),s=S(),a=Do(),l=G(),h=C(),u=function(e){function i(t){var i=e.call(this,"rowGroupHeaderCell")||this;return i._rowGroup=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._rowGroup=null,e.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this.item instanceof o.GroupItemImpl?this._rowGroup.getHeaderText(this.item):""}}),_dp(i,"value",{get:function(){}}),i}(i.GridCell);aa.RowGroupHeaderCell=u;var c=function(e){function n(t){var i=e.call(this,"rowGroupFooterCell")||this;return i._footerIndex=0,i._value=NaN,i._rowGroup=t,i}return t.__extends(n,e),n.$_getValue=function(t,e){if(e&&e.dataIndex>=0){var i=e.grid,o=t.parent,n=o.getFooterIndex(t),r=e.groupFooters.get(n),s=r&&r.expression,a=r&&r.valueCallback;if(s||a){var l=null;if(s){var h=i.rowGroupSummaryRuntime;h.setColumn(e,e.grid.summarizer),h.setItem(o),l=r.evaluate(h)}return a?a(i.handler,e,n,o,l):l}if(o&&i.isGroupedColumn(e)){var u=i.rowGroup.getFooterText(o);return null==u?void 0:u}}else;},n.getValue=function(t,e){try{return n.$_getValue(t,e)}catch(t){return i.GridCell.ERROR}},n.$_displayText=function(t,e,i,n){var r="";if(void 0!==i&&e){if(i instanceof Date){var a=n.datetimeWriter;r=a?a.getText(i):String(i)}else if("number"==typeof i){var l=n.numberFormatter;r=l?l.getText(i):isNaN(i)?"":String(i)}else"string"==typeof i?r=i+"":"boolean"==typeof i&&(r=String(i));if(r){var h=n.prefix;h&&(r=h+r),(h=n.suffix)&&(r+=h)}}if(!r){var u=s.Utils.cast(t.parent,o.GroupItemImpl);if(e){var d=e.groupFooters.get(u.getFooterIndex(t));d&&(r=d.text)}}return r||""},n.prototype._doDispose=function(){this._rowGroup=null,e.prototype._doDispose.call(this)},_dp(n,"footerIndex",{get:function(){return this._footerIndex}}),n.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=n.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,s.Utils.log("FOOTER ERROR: "+t)}},n.prototype.getDisplayText=function(t){return this._error?i.GridCell.ERROR:n.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},n.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},n.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},_dp(n,"value",{get:function(){return this._value}}),_dp(n,"level",{get:function(){return this.index.item.level}}),n.prototype.setIndex=function(t){e.prototype.setIndex.call(this,t),this._footerIndex=t.item.$_footerIndex},n.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},n}(i.GridCell);aa.RowGroupFooterCell=c;var p=function(e){function i(){var t=e.call(this,"rowGroupBarCell")||this;return t._level=0,t}return t.__extends(i,e),_dp(i,"level",{get:function(){return this.item.level}}),_dp(i,"getText",{get:function(){return""}}),_dp(i,"value",{get:function(){}}),i}(i.GridCell);aa.RowGroupBarCell=p;var _=function(e){function i(t){var i=e.call(this)||this;return i._index=0,i.$_owner=t,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"index",{get:function(){return this._index}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(i,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(i,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(i,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),i.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},i}(l.Base);aa.RowGroupFooter=_;var f=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._owner=t,i._items.push(new _(i)),i}return t.__extends(i,e),i.prototype._doDispose=function(){for(var t=0,i=this._items;t<i.length;t++){i[t].dispose()}this._items=null,e.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new _(this))._index=e.length,e.push(i);for(;e.length>t;)(i=e.pop()).dispose();this.$_itemChanged(null)}}}),_dp(i,"items",{get:function(){return this._items}}),i.prototype.get=function(t){return this._items[t]},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t);var i=this._items,o=t&&t.items?s.Utils.makeArray(t.items,!0):t;if(s.Utils.isArray(o))for(var n=Math.max(o.length,1),r=0;r<n;r++)i[r]||(i[r]=new _(this)),i[r].assignFrom(o[r]),i[r]._index=r;else i[0].assignFrom(o),i[0]._index=0;this.$_itemChanged(null)},i.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},i}(l.Base);aa.RowGroupFooterCollection=f;var g=function(e){function i(t){var i=e.call(this,t)||this;return i._mergeMode=!1,i._sorting=!0,i._expandedAdornments=h.RowGroupAdornments.BOTH,i._collapsedAdornments=h.RowGroupAdornments.HEADER,i._indentVisible=!0,i._levelIndent=20,i._mergeHeaderIndenting=!0,i._mergeFooterIndenting=!0,i._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",i._expanderVisibility=h.ExpanderVisibility.DEFAULT,i._headerCell=new u(i),i._footerCell=new c(i),i._barCell=new p,i._headerStatementExpr=new n.ExpressionStatement(i._headerStatement),i._footerStatementExpr=new n.ExpressionStatement,i._statementRuntime=new r.RowGroupStatementRuntime,i._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._footers=new f(i),i}return t.__extends(i,e),i.prototype._doDispose=function(){this._footers=this._footers.dispose(),e.prototype._doDispose.call(this)},i.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},i.prototype.getGroupFooterCount=function(t){return this._footers.count},i.prototype.setCounterAware=function(t){this._counterAware=t},_dp(i,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())}}),_dp(i,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())}}),_dp(i,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(i,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!==h.RowGroupAdornments.NONE&&t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(i,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0))}}),_dp(i,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())}}),_dp(i,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())}}),_dp(i,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())}}),_dp(i,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())}}),_dp(i,"footers",{get:function(){return this._footers},set:function(t){this.setFooters(t)}}),i.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(i,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())}}),_dp(i,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()}}),_dp(i,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())}}),_dp(i,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(t){this.expanderVisibility=t}}),_dp(i,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(t){t!==this.expanderVisibility&&(this._expanderVisibility=t,this._changed())}}),_dp(i,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()}}),_dp(i,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(t){this._valueForGroupCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()}}),i.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(a.CellIndex.temp(this.owner,t.index)),this._headerCell},i.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},i.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,n=e.styleCallback;return o&&(i+=" "+o),n&&(o=n(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},i.prototype.getFooterCellStyle=function(t,e,o){void 0===o&&(o=!0);var n=t.footerIndex,r=this._footers.get(n).cellStyleCallback,s=t.index.column.groupFooters.get(t.footerIndex);if(r){var a=r(this._grid.handler,t);e.assign(a)}if(s){var l=s.styleCallback;if(l){var h=l(this._grid.handler,t);e.assign(h)}}return!e.styleName&&s&&(e.styleName=s.styleName),o&&(e.styleName?e.styleName=i.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=i.FOOTER_CELL_STYLE),e},i.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},i.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},i.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},i.prototype.getFooterText=function(t){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)},i.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},i.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if((e+=Math.max(t.descendantCount,t.count)-i)>1)return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&++e>1)return!0;return!1},i.prototype.$_isExpanderVisible=function(t){if(!t.expanded)return!0;if(this._expanderVisibleCallback){var e=this._expanderVisibleCallback.call(this._grid,this._grid.handler,t);return null==e||e}switch(this._expanderVisibility){case h.ExpanderVisibility.NONE:return!1;case h.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(t)}},i.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",i.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",i}(e.VisualObject);return aa.RowGroup=g,aa}var ha,ua={};var da,ca={};var pa,_a={};var fa,ga={};var ma,ya={};var va,Ca={};var wa,xa={};var ba,Ia,Ea={};function Sa(){if(Ia)return Mo;Ia=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.GridBase=void 0;var t=d,e=S(),i=xo(),o=di(),n=Oo(),r=function(){if(Fo)return Po;Fo=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.ColumnCollection=void 0;var t=d,e=G(),i=Sa(),o=xo(),n=S(),r=function(e){function r(t){var i=e.call(this)||this;return i._columns=[],i._orgColumns=[],i._nameMap={},i._owner=t,i}return t.__extends(r,e),r.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,e.prototype._doDispose.call(this)},_dp(r,"owner",{get:function(){return this._owner}}),_dp(r,"count",{get:function(){return this._columns.length}}),_dp(r,"columns",{get:function(){return this._columns.slice()}}),r.prototype.getColumn=function(t){return this._columns[t]},r.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._addColumn(o);if(!n)throw new Error("column is undefined");n.$_owner=this}this._orgColumns=this._columns.slice()},r.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},r.prototype.remove=function(t){return!!this._removeColumn(t)},r.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},r.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,n=this._columns.length;i<n;i++){var r=this._columns[i];r instanceof o.DataColumn&&(r.sortOrder=e.indexOf(r.dataIndex),r.sortDirection=t[r.sortOrder])}},r.prototype.columnByName=function(t){return this._nameMap[t]},r.prototype.columnByField=function(t){if(t>=0)for(var e=0,i=this.count;e<i;e++){var n=this.getColumn(e);if(n instanceof o.DataColumn&&n.dataIndex==t)return n}return null},r.prototype.columnsByField=function(t){var e=[];if(t>=0)for(var i=0,n=this.count;i<n;i++){var r=this.getColumn(i);r instanceof o.DataColumn&&r.dataIndex==t&&e.push(r)}return e},r.prototype.columnByTag=function(t){if(t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e),r=o.tag;if(n.Utils.isArray(t)&&n.Utils.equalArrays(t,r)||t instanceof Date&&r instanceof Date&&t.getTime()===r.getTime()||"object"==typeof t&&"object"==typeof r&&n.Utils.equalObjects(t,r)||r===t)return o}return null},r.prototype.columnsByTag=function(t){if(t){for(var e=[],i=0,o=this.count;i<o;i++){var r=this.getColumn(i),s=r.tag;(n.Utils.isArray(t)&&n.Utils.equalArrays(t,s)||t instanceof Date&&s instanceof Date&&t.getTime()===s.getTime()||"object"==typeof t&&"object"==typeof s&&n.Utils.equalObjects(t,s)||s===t)&&e.push(r)}return e.length?e:null}return null},r.prototype.restoreColumns=function(){this._restoreColumn()},r.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var n=this._columns;if(!t||t instanceof o.GridColumn||("string"==typeof t&&(t={fieldName:t}),t=i.GridBase.createColumn(t)),t instanceof o.GridColumn){if(n.indexOf(t)>=0)throw new Error("column is already contained");e<0?n.push(t):n.splice(e,0,t);var r=t.name;if(!r||this._nameMap[r])if(r=t instanceof o.DataColumn?t.fieldName:t instanceof o.SeriesColumn?"series":"column",this._nameMap[r]){for(var s=0;s<1e3;s++)if(!this._nameMap[r+s]){t.name=r+=s;break}}else t.name=r;return r&&(this._nameMap[r]=t),t}return null},r.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return e>=0&&(this._columns.splice(e,1),t.$_owner=void 0,delete this._nameMap[t.name],!0)},r.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},r.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++)e[t].dispose()},r}(e.Base);return Po.ColumnCollection=r,Po}(),s=To(),a=Do(),l=function(){if(Bo)return Vo;Bo=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.GridHeader=Vo.HeaderCell=void 0;var t=d,e=Ii(),i=Li(),o=C(),n=To(),r=S(),s=xo(),a=function(e){function i(){var t=e.call(this,"headerCell")||this;return t._itemOffset=2,t._itemGap=2,t._checkLocation=o.ColumnHeaderItemLocation.NONE,t._checked=!1,t}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this._text},set:function(t){this._text=t}}),_dp(i,"template",{get:function(){return this._template},set:function(t){this._template=t}}),_dp(i,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t}}),_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t}}),_dp(i,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t}}),_dp(i,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(i,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t}}),_dp(i,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t}}),i}(i.GridCell);Vo.HeaderCell=a;var l=function(e){function i(t){var i=e.call(this,t)||this;return i._minRowHeight=21,i._minHeight=23,i._height=0,i._resizable=!1,i._itemOffset=2,i._itemGap=2,i._showSelection=!1,i._showTooltip=!1,i._sortWidth=16,i._sortHeight=16,i._filterWidth=16,i._filterHeight=16,i._popupWidth=16,i._popupHeight=16,i._expanderWidth=16,i._expanderHeight=16,i._checkWidth=16,i._checkHeight=16,i._showPopupMenu=o.HandleVisibility.VISIBLE,i._cell=new a,i.visible=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._cell=null,e.prototype._doDispose.call(this)},_dp(i,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(i,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(i,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(i,"displayHeight",{get:function(){return this._grid.headerView.height}}),_dp(i,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=r.Utils.makeArray(t,!0),this._heights=t&&t.slice();for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]);this._changed()}}}),_dp(i,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(i,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(i,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),_dp(i,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())}}),_dp(i,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())}}),_dp(i,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())}}),_dp(i,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())}}),_dp(i,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())}}),_dp(i,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())}}),_dp(i,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._popupWidth=t,this._changed())}}),_dp(i,"expanderHeight",{get:function(){return this._expanderHeight},set:function(t){t!=this._expanderHeight&&(this._popupHeight=t,this._changed())}}),_dp(i,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())}}),_dp(i,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())}}),_dp(i,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(i,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),i.prototype.setCalcHeights=function(t){this._calcHeights=t.slice()},i.prototype.getCalcHeights=function(){return this._calcHeights},i.prototype.getCell=function(t){var e=this._cell;e.setLayout(t);var i=t instanceof n.CellLayoutGroupItem?t.header:t.firstColumn.header;if(i&&(e.text=i.displayText,e.template=i.realizeTemplate(),e.showTooltip=i.showTooltip,e.tooltip=i.tooltip,e.edgeMark=i.edgeMark,i instanceof s.ColumnHeader)){var o=t.firstColumn,r=void 0;e.index.set(-1,t.firstColumn),e.itemOffset=void 0===(r=i.itemOffset)?this._itemOffset:r,e.itemGap=void 0===(r=i.itemGap)?this._itemGap:r,e.checkLocation=i.checkLocation,e.checked=o.checked}return e},i.prototype.getStyleName=function(){return this._styleName},i.prototype._doChanged=function(){e.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(e.VisualObject);return Vo.GridHeader=l,Vo}(),h=$o(),u=zo(),c=Xo(),p=Zo(),_=xn(),f=Tn(),g=Mn(),m=C(),y=hn(),v=er(),w=tr(),x=E(),b=nr(),I=function(){if(sr)return ar;sr=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.RightFooterElement=ar.FixedFooterElement=ar.FooterElement=void 0;var t=d,e=function(e){function i(t,i){return e.call(this,t,i,"footerView")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-footer"},i.prototype._getRendererStyle=function(){return"rg-footer-renderer"},i.prototype._getSummaryRows=function(t){return t.dataRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(t){return t.footerHeight},i.prototype._getSummaryCount=function(t){return t.footerCount},i.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},i.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},i.prototype._getTableRowCount=function(t){return t.dataRows*t.footerCount},i.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},i}(hr().SummaryElement);ar.FooterElement=e;var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-footer"},i.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype._getCellCount=function(t){return t.fixedCellCount},i.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},i}(e);ar.FixedFooterElement=i;var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-footer"},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype._getCellCount=function(t){return t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},i}(e);return ar.RightFooterElement=o,ar}(),R=Or(),T=Lr(),k=Br(),M=function(){if(Vr)return Nr;Vr=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.GridFootElement=Nr.GridFootCellElement=void 0;var t=d,e=Hn(),i=jo(),o=zo(),n=Xo(),r=Zo(),s=zn(),a=S(),l=function(e){function i(t){var i=e.call(this,t,"gridFootCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return t.__extends(i,e),_dp(i,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),i.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[a.Utils.TextProp]=this._text)},i.prototype._doRender=function(t){},i}(s.CellElement);Nr.GridFootCellElement=l;var h=function(e){function s(t){var i=e.call(this,t,null,"gridFootView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new l(t));return i}return t.__extends(s,e),s.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},s.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},s.prototype.getCellType=function(t){var e=this.getFootModel(t);return e instanceof i.SectionObject?e.getCellType():void 0},s.prototype._getCssSelector=function(){return"rg-foot"},s.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,s=t.sectionObjects;this._count=0;for(var a=0,l=s;a<l.length;a++){var h=l[a];h.visible&&((e=this._cells[this._count++]).model=h,h instanceof o.RowIndicator?e.width=i.rowIndicator.width:h instanceof n.StateBar?e.width=i.stateBar.width:h instanceof r.CheckBar&&(e.width=i.checkBar.width))}},s.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},s.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),l=s.model;if(l.dirty){var h=l.getFootCell(),u=this._getTableCell(0,r),d=u.firstElementChild,c=this.$_getCellSelector()+" "+l.getFootStyleName();if(n){var p=n.children[r];p&&(p[a.Utils.TextProp]=l.getCellType()+" foot")}s.setStyleName(u,c),s.text=l.footText,s.updateCell(e,h,d)}}},s.prototype._doRender=function(t){},s.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},s.prototype._getTableRowCount=function(t){return 1},s.prototype._getTableRowHeight=function(t,e){return this.height},s.prototype._getCellCount=function(t){return this._count},s.prototype._getCellWidth=function(t,e){return this._cells[e].width},s.prototype.$_getCellSelector=function(){return s.CELL_CSS},s.CELL_CSS="rg-foot-cell",s}(e.SimpleTableElement);return Nr.GridFootElement=h,Nr}(),L=function(){if(Ar)return $r;Ar=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.FormatOptions=void 0;var t=d,e=Rn(),i=rt(),o=pt(),n=lt(),r=mo(),s=function(e){function s(t){var n=e.call(this,t)||this;return n._numberFormat=o.DecimalFormatter.DEFAULT_FORMAT,n._datetimeFormat=i.DateTimeWriter.DEFAULT_FORMAT,n._datetimeWriter=i.DateTimeWriter.Default,n._numberFormatter=o.DecimalFormatter.Default,n}return t.__extends(s,e),s.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(s,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?r.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(s,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?i.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(s,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?o.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(s,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?n.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(s,"textFormatter",{get:function(){return this._textFormatter}}),_dp(s,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(s,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(s,"boolFormatter",{get:function(){return this._boolFormatter}}),s}(e.GridBaseOptions);return $r.FormatOptions=s,$r}(),O=function(){if(Ur)return Gr;Ur=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.SortingOptions=void 0;var t=d,e=Rn(),i=C(),o=jr(),n=function(e){function n(t){var n=e.call(this,t)||this;return n._enabled=!0,n._style=i.SortStyle.EXCLUSIVE,n._handleVisibility=i.HandleVisibility.VISIBLE,n._commitBeforeSorting=!0,n._toast=new o.ToastOptions({visible:!1,message:"Sorting..."}),n._keepFocusedRow=!1,n._textCase=i.SortCase.SENSITIVE,n._showSortOrder=!1,n._pageSorting=!1,n}return t.__extends(n,e),n.prototype._doDispose=function(){this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())}}),_dp(n,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())}}),_dp(n,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())}}),_dp(n,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(n,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())}}),_dp(n,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())}}),_dp(n,"toast",{get:function(){return this._toast}}),n}(e.GridBaseOptions);return Gr.SortingOptions=n,Gr}(),F=qr(),B=function(){if(Jr)return Zr;Jr=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.MobileOptions=Zr.PasteOptions=Zr.CopyOptions=Zr.EditorOptions=Zr.EditorTitleExpressionRuntime=Zr.EditOptions=void 0;var t=d,e=Rn(),i=P(),o=$(),n=yi(),r=Y(),s=Do(),a=es(),l=S(),h=C(),u=function(e){function i(t){var i=e.call(this,t)||this;return i._readOnly=!1,i._editable=!l.Utils.isMobile(),i._checkable=!0,i._updatable=!0,i._appendable=!1,i._insertable=!1,i._deletable=!1,i._revertable=!1,i._erasable=!1,i._movable=!1,i._commitByCell=!1,i._editWhenFocused=!1,i._commitWhenNoEdit=!1,i._commitWhenExitLast=!1,i._commitWhenLeave=!1,i._crossWhenExitLast=!1,i._validateOnEdited=!0,i._validateOnExit=!1,i._hintOnError=!0,i._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",i._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",i._showInvalidFormatMessage=!0,i._confirmWhenDelete=!0,i._editWhenClickFocused=!1,i._commitLevel=h.ValidationLevel.IGNORE,i._useTabKey=!0,i._useArrowKeys=!0,i._skipReadOnly=!1,i._skipReadOnlyCell=!1,i._verticalMoveStep=s.VerticalMoveStep.CELL,i._focusMoveStep=s.FocusMoveStep.CELL,i._enterToTab=!1,i._enterToNextRow=!1,i._enterToEdit=!1,i._maxLengthToNextCell=!1,i._forceInsert=!1,i._forceAppend=!1,i._checkDiff=!1,i._checkCellDiff=!1,i._strictDiff=!1,i._deletableWhenEdit=!0,i._showCommitError=!1,i._firstCellWhenInsert=!1,i._appendWhenInsertKey=!1,i._appendWhenExitLast=!1,i._showOnlyValidationMessage=!0,i._displayEmptyEditRow=!1,i._buttonClickWhenSpace=!1,i._exitGridWhenTab=h.ExitGridWhenTab.NONE,i._cancelWhenLastUndo=!1,i._exceptDataClickWhenButton=!1,i._removeValidateOnCommit=!1,i._validateOnlyEditColumn=!1,i._columnEditableFirst=!1,i._currentChangingFirat=!1,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this.$_invalidateEditor())}}),_dp(i,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this.$_invalidateEditor())}}),_dp(i,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this.$_invalidateEditor())}}),_dp(i,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())}}),_dp(i,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())}}),_dp(i,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())}}),_dp(i,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())}}),_dp(i,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())}}),_dp(i,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())}}),_dp(i,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())}}),_dp(i,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(i,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())}}),_dp(i,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t}}),_dp(i,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t}}),_dp(i,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t}}),_dp(i,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t}}),_dp(i,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t}}),_dp(i,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t}}),_dp(i,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t}}),_dp(i,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t}}),_dp(i,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t}}),_dp(i,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t}}),_dp(i,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t}}),_dp(i,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t}}),_dp(i,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t}}),_dp(i,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t}}),_dp(i,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t}}),_dp(i,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t}}),_dp(i,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t}}),_dp(i,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t}}),_dp(i,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t}}),_dp(i,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t}}),_dp(i,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t}}),_dp(i,"focusMoveStep",{get:function(){return this._focusMoveStep},set:function(t){this._focusMoveStep=t}}),_dp(i,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t}}),_dp(i,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t}}),_dp(i,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t}}),_dp(i,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t}}),_dp(i,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t}}),_dp(i,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t}}),_dp(i,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(i,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(i,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(i,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t}}),_dp(i,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t}}),_dp(i,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t}}),_dp(i,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t}}),_dp(i,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t}}),_dp(i,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t}}),_dp(i,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()}}),_dp(i,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t}}),_dp(i,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t}}),_dp(i,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(i,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t}}),_dp(i,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t}}),_dp(i,"currentChangingFirst",{get:function(){return this._currentChangingFirat},set:function(t){this._currentChangingFirat=t}}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i.prototype.$_invalidateEditor=function(){this.grid&&this.grid.requestPrepareEditor()},i}(e.GridBaseOptions);Zr.EditOptions=u;var c=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._cell=null,e.prototype._doDispose.call(this)},_dp(i,"value",{set:function(t){this._value=t}}),_dp(i,"cell",{set:function(t){this._cell=t}}),i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){switch(t){case i.ID_VALUE:return this._value;case i.ID_ROW:return this._cell.itemIndex+1;case i.ID_COLUMN_HEADER:var e=this._cell&&this._cell.column;return e&&e.header&&e.header.text?e.header.text:e.displayText}throw new r.ExpressionEvaluationError("Invalid identifier key: "+t)},i.ID_VALUE=0,i.ID_ROW=1,i.ID_COLUMN_HEADER=2,i.IDENTS={value:i.ID_VALUE,row:i.ID_ROW,dcount:i.ID_COLUMN_HEADER},i}(r.ExpressionRuntime);Zr.EditorTitleExpressionRuntime=c;var p=function(e){function i(t){var i=e.call(this,t)||this;return i._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",i._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",i._months=null,i._weekDays=null,i._viewGridInside=!1,i._holidays=null,i._titleExprRuntime=new c,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(i,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(i,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(i,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())}}),_dp(i,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(i,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&(this._titleStatement=t,t?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new n.ExpressionStatement(t):this._titleExprStatement=null,this._changed())}}),_dp(i,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new a.HolidayCollection,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())}}),i}(e.GridBaseOptions);Zr.EditorOptions=p;var _=function(e){function i(t){var i=e.call(this,t)||this;return i._enabled=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(i,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t}}),_dp(i,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){this._datetimeFormat=t}}),_dp(i,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){this._booleanFormat=t}}),_dp(i,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t}}),_dp(i,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t}}),_dp(i,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t}}),_dp(i,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t}}),i}(e.GridBaseOptions);Zr.CopyOptions=_;var f=function(e){function n(t){var i=e.call(this,t)||this;return i._enabled=!0,i._startEdit=!0,i._commitEdit=!0,i._enableAppend=!0,i._numberCharsOfCols={},i._numberSeparatorOfCols={},i._stopOnError=!0,i._throwValidationError=!0,i}return t.__extends(n,e),n.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(n,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t}}),_dp(n,"startEdit",{get:function(){return this._startEdit},set:function(t){this._startEdit=t}}),_dp(n,"commitEdit",{get:function(){return this._commitEdit},set:function(t){this._commitEdit=t}}),_dp(n,"enableAppend",{get:function(){return this._enableAppend},set:function(t){this._enableAppend=t}}),_dp(n,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t}}),_dp(n,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){this._fillFieldDefaults=t}}),_dp(n,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){this._fillColumnDefaults=t}}),_dp(n,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){this._forceRowValidation=t}}),_dp(n,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){this._forceColumnValidation=t}}),_dp(n,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new o.DateTimeReader(this._datetimeFormats[e]))}else this._dateReaders=null}}),_dp(n,"dateReaders",{get:function(){return this._dateReaders}}),_dp(n,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new i.BooleanConverter(t))}}),_dp(n,"boolReader",{get:function(){return this._boolReader}}),_dp(n,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if(this._numberChars=t,t&&t.length>0){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null}}),_dp(n,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){this._numberSeparator=t}}),_dp(n,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&i.length>0){for(var o="[",n=0,r=i.length;n<r;n++){var s=i[n];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}}}),_dp(n,"numberCharExp",{get:function(){return this._numberCharExp}}),_dp(n,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){this._numberSeparatorOfCols=t}}),_dp(n,"selectionBase",{get:function(){return this._selectionBase},set:function(t){this._selectionBase=t}}),_dp(n,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){this._selectBlockPaste=t}}),_dp(n,"stopOnError",{get:function(){return this._stopOnError},set:function(t){this._stopOnError=t}}),_dp(n,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())}}),_dp(n,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){this._noDataEvent=t}}),_dp(n,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){this._eventEachRow=t}}),_dp(n,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){this._checkReadOnly=t}}),_dp(n,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){this._checkDomainOnly=t}}),_dp(n,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){this._convertLookupLabel=t}}),_dp(n,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){this._applyNumberFormat=t}}),_dp(n,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){this._applyEditMask=t}}),_dp(n,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){this._applyMaxLength=t}}),_dp(n,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){this._applyInputChars=t}}),_dp(n,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){this._throwValidationError=t}}),n.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},n.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},n}(e.GridBaseOptions);Zr.PasteOptions=f;var g=function(e){function i(t){var i=e.call(this,t)||this;return i._longTapDuration=500,i._doubleTapInterval=500,i._tapThreshold=10,i._showEditCommander=!1,i._showTooltip=!1,i._scrollPropagate=!0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())}}),_dp(i,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())}}),_dp(i,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())}}),_dp(i,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(i,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(t){this.grid.editOptions.scrollOnEditing=t}}),_dp(i,"scrollPropagate",{get:function(){return this._scrollPropagate},set:function(t){this._scrollPropagate=t}}),i}(e.GridBaseOptions);return Zr.MobileOptions=g,Zr}(),V=wo(),N=un(),A=Fs(),H=pi(),U=fn(),W=_s(),j=function(){if(Ps)return Bs;Ps=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.GridDelegate=void 0;var t=d,e=G(),i=fn(),o=Cn(),n=es(),r=Wi(),s=Zn(),a=ji(),l=ps(),h=S(),u=function(e){function u(t){var i=e.call(this)||this;return i._cellEditors={},i._customRenderers={},i._grid=t,i}return t.__extends(u,e),u.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},_dp(u,"grid",{get:function(){return this._grid}}),u.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new i.LineCellEditor(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},u.prototype.getCellEditor=function(t){var e=this._grid.container._container,r=this._cellEditors[t];if(!r){switch(t){case"list":case"dropdown":r=new o.DropDownCellEditor(this._grid,e);break;case"nlist":r=new o.NativeListCellEditor(this._grid,e);break;case"multiline":r=new i.MultiLineCellEditor(this._grid,e);break;case"number":r=new i.NumberCellEditor(this._grid,e);break;case"date":r=new n.DateCellEditor(this._grid,e);break;case"btdate":r=new n.BTDateCellEditor(this._grid,e);break;case"search":r=new o.SearchCellEditor(this._grid,e);break;case"checklist":r=new o.MultiCheckCellEditor(this._grid,e);break;case"password":r=new i.PasswordCellEditor(this._grid,e);break;case"ndate":r=new n.NativeDateCellEditor(this._grid,e);break;default:r=this.getDefaultCellEditor()}this._cellEditors[t]=r,r&&r.setController(this._grid.editController)}return r},u.prototype.$_checkFlexible=function(t,e){if(!h.Utils.ieOld&&!h.Utils.ieTen)return t&&t.flexible||e&&e.flexible},u.prototype.createRenderer=function(t,e,i){var o=null;if(t){switch(t){case r.TextCellRenderer.TYPE:o=new r.TextCellRenderer;break;case r.BarCellRenderer.TYPE:o=new r.BarCellRenderer;break;case r.ImageCellRenderer.TYPE:o=new r.ImageCellRenderer;break;case r.IconCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new r.FlexIconCellRenderer:new r.IconCellRenderer;break;case r.CheckCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new r.FlexCheckCellRenderer:new r.CheckCellRenderer;break;case r.ButtonCellRenderer.TYPE:o=new r.ButtonCellRenderer;break;case r.ShapeCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new r.FlexShapeCellRenderer:new r.ShapeCellRenderer;break;case r.LinkCellRenderer.TYPE:o=new r.LinkCellRenderer;break;case r.SignalBarCellRenderer.TYPE:o=new r.SignalBarCellRenderer;break;case r.Code39CellRenderer.TYPE:o=new r.Code39CellRenderer;break;case r.Code128CellRenderer.TYPE:o=new r.Code128CellRenderer;break;case s.SeriesTextCellRenderer.SERIES_TYPE:o=new s.SeriesTextCellRenderer;break;case s.SparkLineRenderer.TYPE:o=new s.SparkLineRenderer;break;case s.SparkColumnRenderer.TYPE:o=new s.SparkColumnRenderer;break;case s.SparkWinLossRenderer.TYPE:o=new s.SparkWinLossRenderer;break;case a.TemplateCellRenderer.TYPE:o=new a.TemplateCellRenderer}if(!o){var n=this._customRenderers[t];o="function"==typeof n?new n(t):new l.CustomCellRendererImpl(n,t)}o||(h.Utils.log("Renderer type is invalid: "+t),o=new r.TextCellRenderer),e&&o.assignFrom(e),i&&o.assignFrom(i)}return o},u.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},u.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},u.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},u.prototype.clearCustomRenderers=function(){this._customRenderers={}},u}(e.Base);return Bs.GridDelegate=u,Bs}(),z=_o(),q=function(){if(Vs)return Ns;Vs=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.LocalLookupSourceProvider=Ns.LookupSourceProvider=Ns.LookupSource=void 0;var t=d,e=et(),i=S(),o=function(e){function i(t){var i=e.call(this)||this;return i._id=t,i}return t.__extends(i,e),_dp(i,"id",{get:function(){return this._id}}),i.prototype.exists=function(t){return!1},i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.CHANGED="onLookupSourceChanged",i}(e.EventAware);Ns.LookupSource=o;var n=function(e){function o(t,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var n=e.call(this,t)||this;if(i<1)throw new Error("LookupTable levels must be equals or greater than 1");return n._levels=i,n._tree={},n._listMap=o?{}:null,n}return t.__extends(o,e),o.prototype._doDispose=function(){this._tree=this._listMap=null,e.prototype._doDispose.call(this)},o.prototype.clear=function(){this._tree=this._listMap={},this._changed()},o.prototype.exists=function(t){var e;if((t=i.Utils.makeArray(t))&&(e=t.length)>0&&e<=this._levels){if((e=Math.min(e,this._levels)-1)>0){for(var o=this._tree,n=0;n<e&&(o=o[t[n]]);n++);return null!=o&&o.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},o.prototype.fill=function(t,e){if(t&&t.length>0&&e&&e.length>0){for(var o=Math.min(t.length,e.length),n=0;n<o;n++){var r=i.Utils.makeArray(t[n]);this.$_add(r,e[n])}this._changed()}},o.prototype.fillRows=function(t){if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},o.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},o.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},o.prototype.lookup=function(t,e){var i;if(this._levels>1){var o=void 0,n=this._levels-1;for(i=this._tree,o=0;o<n&&(i=i[t[o]]);o++);}else i=this._tree;var r=t[t.length-1];if(i&&r&&e){for(var s=r.split(e),a=[],l=(o=0,s.length);o<l;o++)a.push(i[s[o]]?i[s[o]]:s[o]);return a.join(e)}return i?i[r]:void 0},o.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var e,i,o=this._tree,n=[],r=[];if(this._levels>1)for(e=0,i=t.length;e<i;e++)if(!(o=o[t[e]]))return{keys:n,values:r};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)n.push(s[e]),r.push(o[s[e]])}else for(var a in o)n.push(a),r.push(o[a]);return{keys:n,values:r}},o.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,n=0,r=e.keys.length;n<r;n++)i[n]=i[n]?String(i[n]):null,o[n]=o[n]?String(o[n]):null;return e},o.prototype.$_add=function(t,e){if(t){t=i.Utils.makeArray(t);var o,n,r,s,a=this._levels;if(t.length<a)throw Error("Keys length must be equals or greater than "+a);var l=this._tree;for(n=0;n<a-1;n++)(s=l[r=t[n]])||(s={},l[r]=s),l=s;if(l[o=t[a-1]]=e,this._listMap){var h=t.slice(0,t.length-1).join("~!~"),u=this._listMap[h];i.Utils.isArray(u)||(u=[],this._listMap[h]=u),u.push(o)}}},o.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},o}(o),r=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.CHANGED="onLookupSourceProviderChanged",i}(e.EventAware);Ns.LookupSourceProvider=r;var s=function(e){function o(t){void 0===t&&(t=null);var i=e.call(this)||this;return i._sources={},t&&i.load(t),i}return t.__extends(o,e),o.prototype.dispose=function(){return e.prototype.dispose.call(this)},o.prototype.load=function(t){if(t=i.Utils.makeArray(t)){this._sources={};for(var e=0,o=t.length;e<o;e++)this.$_add(t[e]);this._changed()}},o.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},o.prototype.remove=function(t){this.$_remove(t)&&this._changed()},o.prototype.getSource=function(t){return this._sources[t]},o.prototype.$_createSource=function(t){if(t){var e=new n(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},o.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),this._sources[t.id]=e,e.addListener(this),e}},o.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},o.prototype.onLookupSourceChanged=function(t){this._changed()},o.CHANGED="onLookupSourceProviderChanged",o}(r);return Ns.LocalLookupSourceProvider=s,Ns}(),X=wn(),K=Hs(),J=$n(),Z=function(){if(Us)return Gs;Us=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.HeaderSummaryCollection=Gs.HeaderSummary=Gs.HeaderSummaryCell=void 0;var t=d,e=$o(),i=function(e){function i(){return e.call(this,"summaryCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t}}),i.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},i}(e.SummaryCell);Gs.HeaderSummaryCell=i;var o=function(e){function o(t){return e.call(this,t)||this}return t.__extends(o,e),_dp(o,"summaryIndex",{get:function(){return this._childIndex}}),o.prototype.getCellStyleName=function(){return o.CELL_CSS},o.prototype._createCell=function(){return new i},o.CELL_CSS="rg-header-summary-cell",o}(e.GridSummaryObject);Gs.HeaderSummary=o;var n=function(e){function i(t){var i=e.call(this,t)||this;return i.visible=!1,i}return t.__extends(i,e),i.prototype._createSummary=function(t){return new o(t||this._grid)},i}(e.SummaryCollection);return Gs.HeaderSummaryCollection=n,Gs}(),Q=function(){if(Ws)return js;Ws=1,Object.defineProperty(js,"__esModule",{value:!0}),js.RightHeaderSummaryElement=js.FixedHeaderSummaryElement=js.HeaderSummaryElement=void 0;var t=d,e=function(e){function i(t,i){return e.call(this,t,i,"headerSummaryView")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-header-summary"},i.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},i.prototype._getSummaryRows=function(t){return t.dataRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(t){return t.summaryHeight},i.prototype._getSummaryCount=function(t){return t.headerSummaryCount},i.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},i.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},i.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},i.prototype._getTableRowCount=function(t){return t.dataRows*t.headerSummaryCount},i}(hr().SummaryElement);js.HeaderSummaryElement=e;var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},i.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype._getCellCount=function(t){return t.fixedCellCount},i.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},i}(e);js.FixedHeaderSummaryElement=i;var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype._getCellCount=function(t){return t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},i}(e);return js.RightHeaderSummaryElement=o,js}(),tt=function(){if(zs)return Ys;zs=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.GridSumElement=Ys.GridSumCellElement=void 0;var t=d,e=Hn(),i=jo(),o=zo(),n=Xo(),r=Zo(),s=zn(),a=S(),l=function(e){function i(t){var i=e.call(this,t,"gridSumCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return t.__extends(i,e),_dp(i,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),i.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[a.Utils.TextProp]=this._text)},i.prototype._doRender=function(t){},i}(s.CellElement);Ys.GridSumCellElement=l;var h=function(e){function s(t){var i=e.call(this,t,null,"gridSumView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new l(t));return i}return t.__extends(s,e),s.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},s.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},s.prototype.getCellType=function(t){var e=this.getSumModel(t);return e instanceof i.SectionObject?e.getCellType():void 0},s.prototype._getCssSelector=function(){return"rg-sum"},s.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,s=t.sectionObjects;this._count=0;for(var a=0,l=s;a<l.length;a++){var h=l[a];h.visible&&((e=this._cells[this._count++]).model=h,h instanceof o.RowIndicator?e.width=i.rowIndicator.width:h instanceof n.StateBar?e.width=i.stateBar.width:h instanceof r.CheckBar&&(e.width=i.checkBar.width))}},s.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},s.prototype._doLayoutContent=function(t){var e=t.grid,i=this._count;this._getTableRowCount(t);for(var o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),l=s.model;if(l.dirty||e._columnsDirty){var h=l.getSumCell(),u=this._getTableCell(0,r),d=u.firstElementChild,c=this.$_getCellSelector()+" "+l.getSumStyleName();if(n){var p=n.children[r];p&&(p[a.Utils.TextProp]=l.getCellType()+" sum")}s.setStyleName(u,c),s.text=l.sumText,s.updateCell(e,h,d)}}},s.prototype._doRender=function(t){},s.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},s.prototype._getTableRowCount=function(t){return 1},s.prototype._getTableRowHeight=function(t,e){return this.height},s.prototype._getCellCount=function(t){return this._count},s.prototype._getCellWidth=function(t,e){return this._cells[e].width},s.prototype.$_getCellSelector=function(){return"rg-sum-cell"},s.CELL_CSS="rg-sum-cell",s}(e.SimpleTableElement);return Ys.GridSumElement=h,Ys}(),it=function(){if(qs)return Xs;qs=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.FilterAutomatingOptions=Xs.FilterSelectorOptions=Xs.FilteringOptions=void 0;var t=d,e=Rn(),i=C(),o=jr(),n=function(e){function n(t){var n=e.call(this,t)||this;return n._enabled=!0,n._handleVisibility=i.HandleVisibility.VISIBLE,n._commitBeforeFiltering=!0,n._toast=new o.ToastOptions({visible:!1,message:"Filtering..."}),n._includeParentItem=!0,n._selector=new s(t),n._automating=new a(t),n}return t.__extends(n,e),n.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())}}),_dp(n,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){this._commitBeforeFiltering=t}}),_dp(n,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t}}),_dp(n,"selector",{get:function(){return this._selector}}),_dp(n,"automating",{get:function(){return this._automating}}),_dp(n,"toast",{get:function(){return this._toast}}),n.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),t.selector&&this._selector.assignFrom(t.selector),t.automating&&this._automating.assignFrom(t.automating),t.toast&&this._toast.assignFrom(t.toast)},n}(e.GridBaseOptions);Xs.FilteringOptions=n;var r="rg-filter-selector",s=function(e){function i(t){var i=e.call(this,t)||this;return i._listHeight=170,i._partialSearch=!0,i._filterReset=!0,i._filtersResetText="전체 초기화",i._acceptText="확인",i._cancelText="취소",i._allCheckText="(전체 선택)",i._searchedCheckText="(조회 전체 선택)",i._filterResetText="초기화",i._showEmptyFilter=!0,i._emptyFilterText="(값 없음)",i._searchPlaceholder="검색...",i._maxWidth=0,i._width=0,i._minWidth=0,i._style=r,i}return t.__extends(i,e),_dp(i,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)}}),_dp(i,"showButtons",{get:function(){return!!this._showButtons},set:function(t){this._showButtons=t}}),_dp(i,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)}}),_dp(i,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)}}),_dp(i,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)}}),_dp(i,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)}}),_dp(i,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){t!==this._showEmptyFilter&&(this._showEmptyFilter=t)}}),_dp(i,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)}}),_dp(i,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)}}),_dp(i,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)}}),_dp(i,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)}}),_dp(i,"closeWhenClick",{get:function(){return!!this._closeWhenClick},set:function(t){this._closeWhenClick=t}}),_dp(i,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)}}),_dp(i,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)}}),_dp(i,"filterResetText",{get:function(){return this._filterResetText},set:function(t){t!=this._filterResetText&&(this._filterResetText=t)}}),_dp(i,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)}}),_dp(i,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t)}}),_dp(i,"minWidth",{get:function(){return this._minWidth},set:function(t){t!==this._minWidth&&(this._minWidth=t)}}),_dp(i,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t}}),_dp(i,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t}}),_dp(i,"activeWhenEnter",{get:function(){return!!this._activeWhenEnter},set:function(t){this._activeWhenEnter=t}}),i}(e.GridBaseOptions);Xs.FilterSelectorOptions=s;var a=function(e){function i(t){var i=e.call(this,t)||this;return i._dateCategorize=!0,i._numberCategorize=!0,i._textCategorize=!1,i._dateYearFormat="YYYY년도",i._dateQuarterFormat="Q사분기",i._dateMonthFormat="M월",i._dateDayFormat="YYYY-MM-DD",i._lookupDisplay=!1,i}return t.__extends(i,e),_dp(i,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)}}),_dp(i,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)}}),_dp(i,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)}}),_dp(i,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)}}),_dp(i,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)}}),_dp(i,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)}}),_dp(i,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t}}),_dp(i,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t}}),_dp(i,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t}}),_dp(i,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t}}),_dp(i,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t}}),_dp(i,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(t){this._filteredDataOnly=t}}),i}(e.GridBaseOptions);return Xs.FilterAutomatingOptions=a,Xs}(),ot=function(){if(Js)return Zs;Js=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.FilterSelector=void 0;var t=d,e=et(),i=ta(),o=S(),n=wi(),r=function(e){function r(t,n,r){var s=e.call(this)||this;s._opened=!1,s._grid=r,s._gridContainer=r.container._containerDom;var a=(0,o.getDoc)(s._gridContainer),l=s._element=a.createElement("div");return l.style.position="absolute",l.style.display="none",l.className=n.selector.style,l.setAttribute("aria-hidden","true"),s._options=n,s._soptions=n.selector,s._manager=new i.FilteringManager(s._options),s._globalMouseDownHandler=s._globalMouseDownHandler.bind(s),s._globalKeyDownHandler=s._globalKeyDownHandler.bind(s),s._scrollHandler=s._scrollHandler.bind(s),s._wheelHandler=s._wheelHandler.bind(s),s._resetClickHandler=s._resetClickHandler.bind(s),s._searchInputHandler=s._searchInputHandler.bind(s),s._searchKeyDownHandler=s._searchKeyDownHandler.bind(s),s._checkAllClickHandler=s._checkAllClickHandler.bind(s),s._confirmClickHandler=s._confirmClickHandler.bind(s),s._cancelClickHandler=s._cancelClickHandler.bind(s),s._itemClickHandler=s._itemClickHandler.bind(s),s}return t.__extends(r,e),_dp(r,"opened",{get:function(){return this._opened}}),_dp(r,"column",{get:function(){return this._targetColumn}}),_dp(r,"doc",{get:function(){return(0,o.getDoc)(this._element)}}),r.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,o.Utils.detach(this._element),e.prototype._doDispose.call(this)},r.prototype.show=function(t,e,i){this._opened&&this.hide();var n,r=this._element,s=this._soptions,a=this._grid.container._containerDiv,l=o.Utils.isSlotMode()?a:a.parentElement;!o.Utils.isSlotMode()&&(n=a.nextElementSibling)?l.insertBefore(r,n):l.appendChild(r),this._targetColumn=t,r.className=s.style,r.tabIndex=-1,r.style.display="block",this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering);var h=e.getBoundingClientRect(),u=this._gridContainer.parentElement.clientWidth,d=s.width,c=t.filterSelectorWidth,p=r.style,_=s.minWidth,f=0;c>0?f=c:-1===d?(f=this._viewWidth,_=Math.max(_,140)):-2===d?f=t.layout.cellWidth:d>0&&(f=d),f>0?(_>0&&(f=Math.max(_,f)),s.maxWidth>0&&(f=Math.min(f,s.maxWidth)),f=Math.min(f,u),p.width=Math.max(f,_)+"px"):p.removeProperty("width");var g=(0,o.getWin)(this._gridContainer),m=r.getBoundingClientRect(),y=r.offsetParent instanceof g.HTMLBodyElement,v=y?{left:0,top:0}:r.offsetParent.getBoundingClientRect(),C=m.left-v.left+(h.right-m.right)+(y?g.scrollX||g.pageXOffset:r.offsetParent.scrollLeft),w=h.bottom-v.top+(y?g.scrollY||g.pageYOffset:r.offsetParent.scrollTop);p.left=Math.max(0,C)+"px",p.top=w+"px",!o.Utils.isSlotMode()&&g.addEventListener("pointerdown",this._globalMouseDownHandler,!1),!o.Utils.isSlotMode()&&g.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},r.prototype.hide=function(){if(this._opened){o.Utils.detach(this._element);var t=(0,o.getWin)(this._gridContainer);!o.Utils.isSlotMode()&&t.removeEventListener("pointerdown",this._globalMouseDownHandler,!1),!o.Utils.isSlotMode()&&t.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},r.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=(t=t instanceof n.ColumnFilterCollection?t.items:t).length,i=[],o=0;o<e;o++){var r=t[o],s=r.level;if(this._autoFiltering||r.visible){var a={text:r.toString(),index:o,level:s,filter:r};if(this._items.push(a),r instanceof n.ColumnFilterCategory?a.expanded=!1:a.state=r.active?n.ActiveState.ACTIVE:n.ActiveState.UNACTIVE,i[s]=a,s>0){var l=i[s-1];a.parent=l,l.childs||(l.childs=[]),l.childs.push(a)}0==s&&this._roots.push(a),this._visbleItemMap[o]=a}}this._calcluateStates(),this._visibleCount=this._calcVisibleItems(),this._dirties=[]},r.prototype._build=function(t,e,i){var o=this._soptions,n=this._applyBatch=o.showButtons,r=this.doc;this._manager.buildItems(t,e,i,!1),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=r.createElement("div"),this._headerDiv.className="rg-filter-header",o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var s=this._viewportDiv=r.createElement("div");s.className="rg-filter-list-viewport",s.style.height=o.listHeight+"px",s.addEventListener("scroll",this._scrollHandler),s.addEventListener("wheel",this._wheelHandler),this._listDiv=r.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",s.appendChild(this._listDiv),this._element.appendChild(s),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),n&&this._buildFooter(this._element),this._searched=!1},r.prototype._finalize=function(){var t;this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;for(this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._resetDiv=o.Utils.detach(this._resetDiv)),(t=this._searchDiv)&&(t.removeEventListener("input",this._searchInputHandler),t.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=o.Utils.detach(this._searchInput),this._searchDiv=o.Utils.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=o.Utils.detach(this._selectAllDiv),this._headerDiv=o.Utils.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=o.Utils.detach(this._confirmButton),this._cancelButton=o.Utils.detach(this._cancelButton),this._footerDiv=o.Utils.detach(this._footerDiv)),e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.removeEventListener("scroll",this._scrollHandler),i.removeEventListener("wheel",this._wheelHandler),this._listDiv=o.Utils.detach(this._listDiv),this._viewportDiv=o.Utils.detach(this._viewportDiv)},r.prototype._buildSelectAllBox=function(){var t=this.doc,e=this._soptions.allCheckText,i=this._selectAllDiv=t.createElement("div");i.className="rg-filter-select-all",this._soptions.textToTitle&&e&&(i.title=e);var n=this._selectAllCheck=t.createElement("input");n.type="checkbox",n.className="rg-filter-checkbox",this._setCheckState(n,this._allCheck),i.appendChild(n);var r=this._selectAllText=t.createElement("div");r.className="rg-filter-text",r.innerHTML=o.Utils.htmlEncode(e),i.appendChild(r);var s=this._columnReset=t.createElement("div");s.className="rg-filter-column-reset",s.innerHTML=o.Utils.htmlEncode(this._soptions.filterResetText),i.appendChild(s),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},r.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},r.prototype._buildItems=function(){var t="temp임시",e=o.Utils.getTextLength(t),i=0;this._filters.items.forEach((function(n){i=Math.max(i,n.level);var r=n.toString();e<o.Utils.getTextLength(r)&&(e=o.Utils.getTextLength(r),t=r)}));var n=this._listDiv,r=n.style;r.display="inline-block";var s=this._buildItemElement(t,0,void 0,"rg-filter-item");s.style.position="relative",n.appendChild(s),this._itemHeight=Math.floor(s.getBoundingClientRect().height),this._viewWidth=Math.floor(s.getBoundingClientRect().width)+15*i+4,n.removeChild(s),r.height="1500px";var a=this._viewportDiv.offsetWidth-this._viewportDiv.clientWidth;r.removeProperty("height");var l=this._visibleCount,h=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(h/this._itemHeight));var u=this._pageCount;r.height=l*this._itemHeight+"px",u<=this._items.length&&(this._viewWidth+=a+2),r.removeProperty("display");var d=l<u?l:u;this._itemElements=[];for(var c=0;c<d;c++){var p=this._visibleItems[c];this._itemElements.push(this._buildItem(p,c))}},r.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox";var o=this._searchInput=this.doc.createElement("input");o.type="text",o.placeholder=this._soptions.searchPlaceholder,o.className="rg-filter-search-input",o.autocomplete="off",o.addEventListener("input",this._searchInputHandler),o.addEventListener("keydown",this._searchKeyDownHandler),i.appendChild(o),t.appendChild(i)},r.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i);var o=this._cancelButton=e.createElement("input");o.type="button",o.className="rg-filter-cancel",o.value=this._soptions.cancelText,o.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(o),t.appendChild(this._footerDiv)},r.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,n=i[t],r=n.expanded,s=this._buildItemElement(n.text,n.level,n.state,"rg-filter-item",r);return s.filter_id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler),o.appendChild(s),s},r.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),o.Utils.detach(e),this._itemElements.splice(t,1)},r.prototype._buildItemElement=function(t,e,i,n,r){var s,a=this.doc,l=a.createElement("div");n&&(l.className=n,l.tabIndex=-1),this._soptions.textToTitle&&t&&(l.title=t);var h=a.createElement("div");h.className="rg-filter-item-indent-"+e,l.appendChild(h);var u=a.createElement("div"),d="rg-filter-expander";void 0!==r&&(d+=" "+(r?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),u.className=d,l.appendChild(u);var c=a.createElement("input");c.type="checkbox",c.className="rg-filter-checkbox",this._setCheckState(c,i),l.appendChild(c);var p=a.createElement("div");return s=p.style,p.className="rg-filter-text",s.position="relative",s.display="inline",s.pointerEvents="none",p.innerHTML=o.Utils.htmlEncode(t),l.appendChild(p),l},r.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var r=t[i];if(e&&r.state!=e)return n.ActiveState.INDETERMINATE;e=r.state}return e||n.ActiveState.UNACTIVE},r.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},r.prototype._calcVisibleItems=function(){function t(t){for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0}var e=0;this._visibleItems=[];for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];n.parent&&!t(n)||(e++,this._visibleItems.push(i))}return e},r.prototype._setCheckState=function(t,e){t.checked=e==n.ActiveState.ACTIVE,t.indeterminate=e==n.ActiveState.INDETERMINATE},r.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},r.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var e=this._itemElements[t],i=parseInt(e.filter_id),o=this._visbleItemMap[i],n=e.childNodes[r.INDEX_CHECKBOX];this._setCheckState(n,o.state)}},r.prototype._doRedraw=function(t){void 0===t&&(t=0);var e=this._itemElements,i=this._pageCount,o=Math.min(i,this._visibleCount),n=Math.max(0,this._visibleItems.indexOf(t));n+i>this._visibleCount&&(n=Math.max(0,this._visibleCount-i));for(var r=0,s=0;s<o;s++){var a=this._visibleItems[s+n];!e[s]&&s<o&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),r++}for(s=e.length-1;s>r-1;s--)this._removeItem(s);var l=this._visibleCount*this._itemHeight;this._listDiv.style.height=l+"px";var h=this._viewportDiv;h.scrollTop+h.offsetHeight>l&&(h.scrollTop=l-h.offsetHeight)},r.prototype._changeItemModel=function(t,e){var i=(0,o.getWin)(t),n=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&n.text&&(t.title=n.text);for(var r=t.childNodes.length;r--;){var s=t.childNodes.item(r);if(s instanceof i.HTMLElement){var a=s.className;if(a)if(a.indexOf("rg-filter-item-indent-")>-1)s.className="rg-filter-item-indent-"+n.level;else if(a.indexOf("rg-filter-expander")>-1){var l="rg-filter-expander";void 0!==n.expanded&&(l+=" "+(n.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),s.className=l}else if(s instanceof i.HTMLInputElement&&"rg-filter-checkbox"==a)this._setCheckState(s,n.state);else if(a.indexOf("rg-filter-text")>=0){var h=o.Utils.htmlEncode(n.text),u=this._searchInput?this._searchInput.value:"",d="g"+(this._soptions.searchIgnoreCase?"i":"");h=u?h.replace(new RegExp(u,d),(function(t,e,i){return'<span class="rg-filter-search-text">'.concat(t,"</span>")})):h,s.innerHTML="<span>"+h+"</span>"}}}},r.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,o=t.length;i<o;i++){var n=this._visibleItems[e+i];this._changeItemModel(t[i],n),t[i].style.top=(e+i)*this._itemHeight+"px"}},r.prototype._doSearch=function(t,e){void 0===e&&(e=!0),t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllText.textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,e&&this._calcAllChecked(),this._doRedraw(),this._searched=!!t},r.prototype._resetActive=function(){for(var t=this._items.length;t--;)this._items[t].state=n.ActiveState.UNACTIVE;this._filters.activateAll(!1,!0),this._redrawCheck()},r.prototype._activateAll=function(t){for(var e=!this._applyBatch,i=this._items.length;i--;){var o=this._items[i];o.childs||(o.state=t?n.ActiveState.ACTIVE:n.ActiveState.UNACTIVE,(!e||this._searched)&&this._dirties.push(o))}if(e&&(this._searched?this._doFilterApply():this._filters.activateAll(t,!0)),this._calcluateStates(),this._itemElements.length){var r=this._itemElements[0].filter_id,s=Math.max(0,this._visibleItems.indexOf(parseInt(r)));this._doRedraw(s)}},r.prototype._doCheck=function(t,e){var i=e?n.ActiveState.ACTIVE:n.ActiveState.UNACTIVE,o=this._applyBatch||void 0!==t.childs,r=this._applyBatch?this._dirties:[];if(function t(i,o,n,r){if(i.state!=o)if(i.state=o,i.childs)for(var s=i.childs.length;s--;)t(i.childs[s],o,n,r);else n?r.push(i):i.filter.active=e}(t,i,o,r),o&&!this._applyBatch){for(var s=[],a=0,l=r.length;a<l;a++)s.push(r[a].filter.name);s.length>0&&this._filters.activateItems(s,e)}for(var h=t.parent;h;)h.state=this._calculateState(h.childs),h=h.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},r.prototype._doFilterApply=function(){this._filters._updating=!0;try{for(var t=this._dirties,e=t.length;e--;){var i=t[e];i.filter.active=i.state==n.ActiveState.ACTIVE}this._filters._updating=!1,t.length&&this._filters.changed(1==t.length?t[0].filter:null)}finally{this._filters._updating=!1}this._dirties=[]},r.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();var i=parseInt(this._itemElements[0].filter_id);this._doRedraw(i)},r.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},r.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},r.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(e>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},r.prototype._scrollHandler=function(t){this._doScroll()},r.prototype._searchInputHandler=function(t){var e=t.target;e instanceof(0,o.getWin)(e).HTMLInputElement&&this._doSearch(e.value)},r.prototype._searchKeyDownHandler=function(t){if(13==t.keyCode&&(this._doSearch(this._searchInput.value),this._searched&&this._soptions.activeWhenEnter&&this._items.length)){var e=this._selectAllCheck;e.checked=!(e.indeterminate=!1),this.$_allCheck(!0)}},r.prototype.$_refreshItem=function(t){for(var e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[],this._manager.buildItems(t,t.grid.dataSource,t.autoFilter,!1),this._createItemInfo(t.autoFilters),this._buildItems(),this._dirties=[]},r.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length,i=this._targetColumn,o=this._selectAllCheck;this._setCheckState(o,n.ActiveState.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(this._searchInput.value="");for(var r=0;r<e;r++)t[r].activateAllFilters(!1);this._soptions.closeWhenClick?this.hide():i.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(i)},r.prototype.$_allCheck=function(t){this._activateAll(t),this._allCheck=t?n.ActiveState.ACTIVE:n.ActiveState.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},r.prototype._checkAllClickHandler=function(t){var e=this._selectAllCheck,i=t.target;if(i===this._columnReset){e.checked=e.indeterminate=!1,this._doSearch(this._searchInput.value="",!1);var o=this._targetColumn;this._resetActive(),o.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(o)}else i!==e?(e.checked=!e.checked,e.indeterminate=!1,this.$_allCheck(e.checked)):i===e&&this.$_allCheck(e.checked)},r.prototype._itemClickHandler=function(t){var e=t.target,i=e.className.indexOf("rg-filter-expander")>-1,o="rg-filter-checkbox"==e.className,n=e;"rg-filter-item"!==e.className&&(n=n.parentElement);var s=parseInt(n.filter_id),a=this._visbleItemMap[s];if(i)void 0!==a.expanded&&this._doExpand(a,!a.expanded);else{var l=void 0;o?l=e:(l=n.children.item(r.INDEX_CHECKBOX)).checked=!l.checked,this._doCheck(a,l.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()}},r.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},r.prototype._cancelClickHandler=function(){this.hide()},r.INDEX_CHECKBOX=2,r}(e.EventAware);return Zs.FilterSelector=r,Zs}(),nt=ls(),st=ra(),at=jr(),ht=Li(),ut=la(),dt=Os(),ct=Tr(),_t=St(),ft=function(){if(ha)return ua;ha=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.DebugLayer=void 0;var t=d,e=hn(),i=S(),o=function(e){function o(t){var i=e.call(this,t.doc,"gridDebugLayer")||this;return i._owner=t,i}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},o.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},o.prototype._getCssSelector=function(){return"rg-debug-layer"},o.prototype._initDom=function(t){var e=t.style,o=(0,i.getDoc)(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(o,"Client")),t.appendChild(this._topContent=this.$_createElement(o,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(o,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(o,"Fixed Content")),t.appendChild(this._content=this.$_createElement(o,"Content")),t.appendChild(this._rightContent=this.$_createElement(o,"Right Content")),t.appendChild(this._grid=this.$_createElement(o,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(o,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(o,"Non Fixed","g"))},o.prototype.$_createElement=function(t,e,o){void 0===o&&(o="r");var n=t.createElement("span"),r=n.style;return r.display="inline-block",r.position="absolute",r.boxSizing="border-box",r.pointerEvents="none","b"==o?(r.border="2px dashed rgba(0, 0, 255, 0.5)",r.color="blue"):"g"==o?(r.paddingTop="20px",r.border="2px solid rgba(0, 128, 0, 0.5)",r.color="rgb(0, 128, 0)"):(r.border="1px solid rgba(255, 0, 0, 0.7)",r.color="red"),r.fontWeight="bold",r.textAlign="center",r.verticalAlign="middle",r.whiteSpace="normal",n[i.Utils.TextProp]=e,n},o.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},o}(e.LayerElement);return ua.DebugLayer=o,ua}(),gt=function(){if(da)return ca;da=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.ProgressManager=void 0;var t=d,e=et(),i=S();!function(e){function o(){var t=e.call(this)||this;return t._min=0,t._max=100,t._step=1,t._next=0,t._completed=!1,t._timer=void 0,t}t.__extends(o,e),_dp(o,"min",{get:function(){return this._min},set:function(t){this._min=t}}),_dp(o,"max",{get:function(){return this._max},set:function(t){this._max=t}}),_dp(o,"step",{get:function(){return this._step},set:function(t){this._step=t}}),o.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=(0,i.getWin)(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},o.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this._completed&&this.$_complete()},o.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}}(e.EventAware);var o=function(e){function o(t){var o=e.call(this)||this;o._message="Load data...",o._min=0,o._max=0,o._pos=0;var n=(0,i.getDoc)(t);return o._dom=o.$_createElement(n),o}return t.__extends(o,e),_dp(o,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(o,"position",{get:function(){return this._pos}}),o.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},o.prototype.setProperties=function(t,e,i,o,n){void 0===o&&(o=null),void 0===n&&(n=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,n&&this.$_refreshView()},o.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},o.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var o=t.getBoundingClientRect(),n=i.Utils.getSize(this._dom);i.Utils.move(this._dom,(o.width-n.width)/2,(o.height-n.height)/3)},o.prototype.close=function(){i.Utils.detach(this._dom)},o.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},o.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var o=t.createElement("div");return o.className="rg-progress-progress",(i=o.style).height="100%",i.width="0px",e.appendChild(e.$_led=o),e},o.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var o=e.style;return o.width="100%",o.textAlign="center",e.appendChild(e.$_span=i),e},o.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,o=e.$_led;t.$_msg.$_span.innerHTML=i.Utils.htmlEncode(this._message);var n=i.Utils.getSize(e);o.style.width=Math.min(n.width-1,Math.floor(n.width*(this._pos-this._min)/(this._max-this._min)))+"px"},o.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=i.Utils.htmlEncode(this._message)},o}(e.EventAware),n=function(e){function i(t){var i=e.call(this)||this;return i._container=t,i}return t.__extends(i,e),i.prototype.show=function(t,e,i){this._view||(this._view=new o(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},i.prototype.close=function(){this._view&&this._view.close()},i.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",e>t&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},i.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new r(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},i.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},i.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()},i}(e.EventAware);ca.ProgressManager=n;var r=function(e){function o(t){var o=e.call(this)||this,n=(0,i.getDoc)(t);return o._dom=o.$_createElement(n),o}return t.__extends(o,e),o.prototype.show=function(t){t.appendChild(this._dom)},o.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},o.prototype.close=function(){i.Utils.detach(this._dom)},o.prototype.isShowing=function(){return!!this._dom.parentElement},o.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},o}(e.EventAware);return ca}(),mt=Qn(),yt=Ss(),vt=so(),Ct=po(),wt=kr(),xt=D(),bt=function(){if(pa)return _a;pa=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.WaiOptions=void 0;var t=d,e=function(e){function i(t){var i=e.call(this,t)||this;return i._title="리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",i._description="${columns} 열로 이루어진 데이터 테이블입니다.",i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)}}),_dp(i,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)}}),i.prototype.getDescription=function(){var t,e=this.title?"<strong>"+this.title+"</strong>":"",i="";if(t=this.grid){var o=t.layoutManager.cellLayouts._dataCells,n=o&&o[0];n&&n.forEach((function(t){t.isProxy||(i+=t.displayText+", ")}))}return e+(i=this.description?"<span>"+this.description.replace("${columns}",i.substr(0,i.length-2))+"</span>":"")},i}(Rn().GridBaseOptions);return _a.WaiOptions=e,_a}(),It=function(){if(fa)return ga;fa=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.WaterMarkLayer=void 0;var t=d,e=hn(),i=S(),o=function(e){function o(t){var i=e.call(this,t.doc,"watermark")||this;return i._grid=t,i}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(o,"active",{get:function(){return this._active},set:function(t){this._active=t}}),o.prototype.refresh=function(){var t=32===this._grid.container._lkCheck;if(t){this._active=!0;var e=this._dom;e&&!e.parentElement&&this._grid._dom.appendChild(e),this.$_setDiv(e,t),this.$_setSpan(this._span,t,this.message||i.Base64.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0}},o.prototype._getCssSelector=function(){return"rg-watermark-layer"},o.prototype._initDom=function(t){var e=(0,i.getDoc)(t);t.appendChild(this._span=this.$_createElement(e,""))},o.prototype._setSizeStyle=function(t){var e=this._active;t.width=e?"100%":"0px",t.height=e?"100%":"0px"},o.prototype.$_setDiv=function(t,e){var i=t.style;i.position="absolute",i.zIndex="1",e?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),i.removeProperty("pointer-events")):i.pointerEvents="none"},o.prototype.$_setSpan=function(t,e,o){var n=t.style;e&&(n.display="inline-block",n.position="absolute",n.boxSizing="border-box",n.pointerEvents="none",n.fontWeight="bold",n.textAlign="center",n.verticalAlign="middle",n.whiteSpace="normal",n.top="50%",n.left="50%",n.transform="translate(-50%, -50%)",n.fontSize="50px",t[i.Utils.TextProp]=o)},o.prototype.$_createElement=function(t,e){return t.createElement("span")},o}(e.LayerElement);return ga.WaterMarkLayer=o,ga}(),Et=function(){if(ma)return ya;ma=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.FilterPanel=ya.FilterPanelCell=void 0;var t=d,e=Hs(),i=S(),o=C(),n=Li(),r=Ii(),s=function(e){function i(){return e.call(this,"filterPanelCell")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i}(n.GridCell);ya.FilterPanelCell=s;var a=function(n){function r(t){var e=n.call(this,t)||this;return e._showInput=!0,e._height=23,e._minRowHeight=23,e._filterDelay=500,e._ignoreCase=!0,e._trimData=!1,e._beforeCommit=!0,e._defaultNumberOperator=o.InlineFilterOperator.GREATER_EQUAL,e._defaultTextOperator=o.InlineFilterOperator.CONTAINS,e._defaultDateOperator=o.InlineFilterOperator.GREATER_EQUAL,e.visible=!1,e._cell=new s,e}return t.__extends(r,n),_dp(r,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._changed())}}),_dp(r,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!==this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(r,"showInput",{get:function(){return this._showInput},set:function(t){t!=this._showInput&&(this._showInput=t)}}),_dp(r,"ignoreCase",{get:function(){return this._ignoreCase},set:function(t){t!==this._ignoreCase&&(this._ignoreCase=t)}}),_dp(r,"filterDelay",{get:function(){return this._filterDelay},set:function(t){this._filterDelay=t}}),_dp(r,"beforeCommit",{get:function(){return this._beforeCommit},set:function(t){t!=this._beforeCommit&&(this._beforeCommit=t)}}),_dp(r,"textOperators",{get:function(){return this._textOperators||r.$_DefaultTextOperators},set:function(t){this._grid.closePopups(!1),this._textOperators=this.$_setOperators(t),this.$_getPopup(r.$_TEXT_POPUP,this.textOperators,!0)}}),_dp(r,"numberOperators",{get:function(){return this._numberOperators||r.$_DefaultNumberOperators},set:function(t){this._grid.closePopups(!1),this._numberOperators=this.$_setOperators(t),this.$_getPopup(r.$_NUMBER_POPUP,this.numberOperators,!0)}}),_dp(r,"dateOperators",{get:function(){return this._dateOperators||r.$_DefaultDateOperators},set:function(t){this._grid.closePopups(!1),this._dateOperators=this.$_setOperators(t),this.$_getPopup(r.$_DATE_POPUP,this.dateOperators,!0)}}),_dp(r,"trimData",{get:function(){return this._trimData},set:function(t){t!==this._trimData&&(this._trimData=t,this._changed())}}),_dp(r,"filterPanelCallback",{get:function(){return this._filterPanelCallback},set:function(t){this._filterPanelCallback=t}}),r.prototype.getPopup=function(t){switch(t.valueType){case o.ValueType.DATE:case o.ValueType.DATETIME:return this.$_getPopup(r.$_DATE_POPUP,this.dateOperators,!1);case o.ValueType.NUMBER:case o.ValueType.UINT:case o.ValueType.INT:case o.ValueType.UNUM:return this.$_getPopup(r.$_NUMBER_POPUP,this.numberOperators,!1);case o.ValueType.TEXT:case o.ValueType.CHAR:return this.$_getPopup(r.$_TEXT_POPUP,this.textOperators,!1)}},r.prototype.clearInput=function(t){("string"!=typeof t||(t=this._grid.columnByName(t)))&&this._grid.clearInlineFilter(t)},r.prototype.getCell=function(t){var e=this._cell,i=t.getDataColumn();return e.index.set(-1,i),e.showInput=!!i&&i.filterable&&(this.showInput?!1!==i.showInlineFilter:i.showInlineFilter),e.filterOperator=i._inlineFilterOp||this.$_getDefaultOperator(i),e.filterText=i._inlineFilterText||"",e},r.prototype.assignFrom=function(t){n.prototype.assignFrom.call(this,t)},r.prototype._doChanged=function(){this._grid&&this._grid.invalidatePosition()},r.prototype.$_getPopup=function(t,o,n){var r=this._grid,s=r.popupMenuManager,a=s.getMenu(t);if(!a||n){for(var l=[],h=Object.keys(o),u=r.filterOperatorCallback.bind(r),d=0,c=h;d<c.length;d++){var p=c[d],_=new e.PopupMenuItem(null,{label:o[p],tag:p,styleName:"rg-inline-filter-icon rg-inline-filter-".concat(i.Utils.camelToHyphen(p)),callback:u});l.push(_)}a=s.addMenu(t,l,!0,null)}return a.name},r.prototype.$_getDefaultOperator=function(t){switch(t.valueType){case o.ValueType.DATE:case o.ValueType.DATETIME:return this._defaultDateOperator;case o.ValueType.NUMBER:case o.ValueType.UNUM:case o.ValueType.UINT:case o.ValueType.INT:return this._defaultNumberOperator;case o.ValueType.CHAR:case o.ValueType.TEXT:return this._defaultTextOperator}},r.prototype._createCell=function(){return new s},r.prototype.$_setOperators=function(t){var e,i=Object.keys(t);if(i.length<=0){var n=Object.keys(o.InlineFilterOperator);e={};for(var r=0;r<i.length;r++)for(var s=i[r],a=0;a<n.length;a++)o.InlineFilterOperator[n[a]].toLowerCase()==s.toLowerCase()&&(e[o.InlineFilterOperator[n[a]]]=t[s])}return e},r.$_TEXT_POPUP="$$_textOperators_$$",r.$_NUMBER_POPUP="$$_numberOperators_$$",r.$_DATE_POPUP="$$_dateOperators_$$",r.$_DefaultTextOperators={contains:"포함",notContains:"포함하지 않음",startsWith:"시작 문자",endsWith:"끝 문자",equal:"같음",notEqual:"같지 않음",empty:"값 없음",reset:"초기화"},r.$_DefaultNumberOperators={equal:"같음",notEqual:"같지 않음",greater:"보다 큼",greaterEqual:"크거나 같음",lower:"보다 작음",lowerEqual:"작거나 같음",between:"범위",empty:"값 없음",reset:"초기화"},r.$_DefaultDateOperators={contains:"포함",notContains:"포함하지 않음",startsWith:"시작 문자",endsWith:"끝 문자",equal:"같음",notEqual:"같지 않음",greater:"보다 큼",greaterEqual:"크거나 같음",lower:"보다 작음",lowerEqual:"작거나 같음",empty:"값 없음",reset:"초기화"},r}(r.VisualObject);return ya.FilterPanel=a,ya}(),Rt=function(){if(va)return Ca;va=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.RightFilterPanelElement=Ca.FixedFilterPanelElement=Ca.FilterPanelElement=Ca.FilterTableCell=void 0;var t=d,e=To(),i=Hn(),o=tr(),n=S(),r=Pn(),s=C(),a=Do(),l=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=null,t.operatorButton=null,t.popupMenu=null,t}return t.__extends(i,e),i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){return e.prototype.clear.call(this,t),this.className&&(this.cell.className=this.className=""),this},i.prototype.setOperator=function(t){this.setClass(t),this.setPlaceHolder(t)},i.prototype.setClass=function(t){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(t?" rg-inline-filter-".concat(n.Utils.camelToHyphen(t)):""))},i.prototype.setPlaceHolder=function(t){this.input&&(this.input.placeholder=t===s.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},i.prototype.setFocus=function(){this.input.focus()},i}(o.TableCell);Ca.FilterTableCell=l;var h=function(i){function o(t,e){var o=i.call(this,t,e,"filterPanelView")||this;return o._rowPoints=[],o._cells=[],o}return t.__extends(o,i),o.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],o=0;o<e.length;o++)e[o].dispose(),e[o]=null;this._cells=null,i.prototype._doDispose.call(this)},o.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},o.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},o.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},o.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},o.prototype.operatorChange=function(t,e,i,o){var n=e.tag,r=i.getDataColumn(),a=this.model.getCell(i);n===s.InlineFilterOperator.RESET&&(t.input.value="",n=a.filterOperator),t.setOperator(n),this._filterRun(this.model,t.input.value,n,r)},o.prototype.clearInput=function(t,e){if(t)t.input.value="",this._filterRun(this.model,"",void 0,e);else for(var i=0,o=this._cells.length;i<o;i++)for(var n=0,r=this._cells[i].length;n<r;n++){(t=this._cells[i][n]).input.value="";var s=t.layout.getDataColumn();s._inlineFilterText="",s&&s.setInlineFilter(void 0,!1)}},o.prototype.setFocus=function(t){t.setFocus()},o.prototype._getCssSelector=function(){return"rg-filter-panel"},o.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},o.prototype._getTableRowCount=function(t){return t.dataRows},o.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},o.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},o.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},o.prototype._doPrepareTableRow=function(t,e,o,n){i.prototype._doPrepareTableRow.call(this,t,e,o,n)},o.prototype._prepareCellContent=function(t,e){var i=(0,n.getDoc)(t).createElement("div");return i.className=this._getRendererStyle(),i},o.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager.dataRows,n=Math.max(t.filterPanel.height,t.filterPanel.minRowHeight*o),s=0,a=this._rowPoints=[s],l=0;l<o-1;l++)a.push(s+=Math.round(n/o));return a.push(s=n),r.Size.create(e,s)},o.prototype._doPrepareTableExtents=function(t){},o.prototype._doLayoutContent=function(t){var i=t.grid,o=t.cellLayouts._dataCells,r=o.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s,h=this.model;this.$_refreshCells(t,o,this._tbody),this.$_refreshSpans(t,r),this.$_refreshHeadTitle(t,this._thead);for(var u=0;u<r;u++){var d=this._cells[u],c=this._getTableRow(t,u);n.Utils.setClassName(c,"rg-filter-panel-row");for(var p=a;p<=l;p++){var _=d[p];if(_.visible){var f=_.layout;if(f.isProxy||f instanceof e.CellLayoutGroupItem)_.clear(!1);else{var g=h.getCell(f);this._updateCell(i,h,g,_)}}}}},o.prototype._updateCell=function(t,e,i,o){var n=t.doc,r=t.container,s=o.input,a=o.operatorButton,l=o.cell.firstElementChild;a||(a=o.operatorButton=n.createElement("span"),l.appendChild(a)),s||((s=o.input=n.createElement("input")).type="text",r.$_addListener(s,"keyup",this._keyupHandler.bind(this),!1),r.$_addListener(s,"input",this._inputHandler.bind(this),!1),l.appendChild(s)),s.value=i.filterText;var h=this._rowPoints[1]-this._rowPoints[0];l.style.display=i.showInput?"":"none";var u=a.style;u.width="20px",u.height="".concat(h-6,"px"),(u=s.style).width=o.width-30+"px",u.height="".concat(h-6,"px"),o.setOperator(i.filterOperator),o.popupMenu=e.getPopup(o.layout.getDataColumn())},o.prototype._keyupHandler=function(t){var e=this.grid,i=t.keyCode||t.charCode;if(n.Utils.included(i,38,40)){var o=e.getTableCell(t.target),r=this.tableCellByCell(o),s=a.CellIndex.temp(e,-1,r.layout),l=void 0;if(38!==i||s.isTop){if(40===i){if(s.isBottom)return s.itemIndex=e.topIndex,e.setFocusedIndex(s,!0,!0,!0),void e.setFocus();s.down(a.VerticalMoveStep.CELL),l=s.layout}}else s.up(a.VerticalMoveStep.CELL),l=s.layout;l&&(r=this.tableCellByLayout(s.layout)).setFocus()}else 13===i&&this.$_search(t,!0)},o.prototype._inputHandler=function(t){this.$_search(t,!1)},o.prototype.$_search=function(t,e){var i,o=t.target,n=this.grid,r=this.model;i=o.value;var s=n.getTableCell(o),a=this.columnByCell(s);if(a){var l=r.getCell(a.layout);e?(clearTimeout(this._timer),this._filterRun(r,i,l.filterOperator,a)):this._startTimer(i,l.filterOperator,a)}},o.prototype._startTimer=function(t,e,i){var o=this.model;clearTimeout(this._timer),this._timer=setTimeout(function(){this._filterRun(o,t,e,i)}.bind(this),o.filterDelay)},o.prototype._filterRun=function(t,e,i,o){var r,a,l=e,h=t.filterPanelCallback;if(h){var u=this.grid;if(!1!==h.call(this,u.handler,o,i,e))return o.setInlineFilter(void 0,!0),void(o._inlineFilterText=e)}if(null!=e&&""!=e||i===s.InlineFilterOperator.EMPTY)switch(o.valueType){case s.ValueType.DATE:case s.ValueType.DATETIME:case s.ValueType.NUMBER:var d=e=e.replace(/[^0-9\-.~]/g,"");switch(n.Utils.included(o.valueType,s.ValueType.DATE,s.ValueType.DATETIME)?(e=e.replace(/-/g,""),a="datestr(value)",d='"'.concat(e,'"')):a="value",i){case s.InlineFilterOperator.EQUAL:r="".concat(a," = ").concat(d);break;case s.InlineFilterOperator.NOT_EQUAL:r="".concat(a," <> ").concat(d);break;case s.InlineFilterOperator.GREATER:r="".concat(a," > ").concat(d);break;case s.InlineFilterOperator.GREATER_EQUAL:r="".concat(a," >= ").concat(d);break;case s.InlineFilterOperator.LOWER:r="".concat(a," < ").concat(d);break;case s.InlineFilterOperator.LOWER_EQUAL:r="".concat(a," <= ").concat(d);break;case s.InlineFilterOperator.CONTAINS:r="".concat(a," like '%").concat(e,"%'");break;case s.InlineFilterOperator.NOT_CONTAINS:r="".concat(a," not like '%").concat(e,"%'");break;case s.InlineFilterOperator.STARTS_WITH:r="".concat(a," like '").concat(e,"%'");break;case s.InlineFilterOperator.ENDS_WITH:r="".concat(a," like '%").concat(e,"'");break;case s.InlineFilterOperator.EMPTY:r="value is empty";break;case s.InlineFilterOperator.BETWEEN:var c=d.split("~").sort((function(t,e){return parseFloat(t)-parseFloat(e)}));r=2===c.length&&c[1]?"(value >= ".concat(c[0],") and (value <= ").concat(c[1],")"):"value >= ".concat(c[0])}break;case s.ValueType.TEXT:default:a=o.lookupDisplay?"text":"value",a=t.trimData?"trim(".concat(a,")"):a;var p=t.ignoreCase?"i":"";switch(e=t.trimData&&e?e.trim():e,e=t.ignoreCase&&e?e.toLowerCase():e,i){case s.InlineFilterOperator.CONTAINS:r="".concat(a," ").concat(p,"likehan '%").concat(e,"%'");break;case s.InlineFilterOperator.NOT_CONTAINS:r="".concat(a," not ").concat(p,"likehan '%").concat(e,"%'");break;case s.InlineFilterOperator.STARTS_WITH:r="".concat(a," ").concat(p,"likehan '").concat(e,"%'");break;case s.InlineFilterOperator.ENDS_WITH:r="".concat(a," ").concat(p,"likehan '%").concat(e,"'");break;case s.InlineFilterOperator.EQUAL:r="".concat(a," ").concat(p,"like '").concat(e,"'");break;case s.InlineFilterOperator.NOT_EQUAL:r="".concat(a," not ").concat(p,"like '").concat(e,"'");break;case s.InlineFilterOperator.EMPTY:r="value is empty"}}else r=void 0;var _=this.tableCellByLayout(o.layout);r!=_.criteria&&(_.criteria=r,o.setInlineFilter(r,!0)),i&&(o._inlineFilterOp=i),o._inlineFilterText=l},o.prototype._getStartCell=function(t){return t.getStartCell()},o.prototype._getEndCell=function(t){return t.getEndCell()},o.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},o.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,h=o.length;h<r;h++)o.push([]);for(var u=0;u<r;u++){for(var d=o[u],c=n[u].children,p=e[u],_=0;_<a;_++){var f=c[_],g=p[_+s],m=d[_];m?m.cell!==f||m.layout!=g&&(m.layout=g,m.clear(!0)):(m=d[_]=new l(c[_])).layout=g,m.height=this.$_getCellHeight(m),m.width=this._getCellWidth(t,_),m.spanned=!1}for(_=a;_<d.length;_++)d[_].dispose();d.length=a}for(u=r;u<o.length;u++){var y=o[u];for(_=0;_<y.length;_++)y[_].dispose(),y[_]=null}o.length=r},o.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,h=o;h<=n;h++){var u=a[h],d=u.layout,c=d.parent,p=c&&c.vertical;if(u.spanned);else if(d.isProxy)u.clear(!1);else{var _=0,f=0,g=d.getDataSpan()-1;if(g>0){var m=0,y=d.vindex+1;if(p)for(;m++<g&&m<r&&(v=c.getVisible(y++));)f+=v._dspan,this._cells[s+m][h].span();else for(;m++<g&&h-o+m<l&&y<c.visibleCount;){var v;if(!(v=c.getVisible(y++)))break;_+=v._cspan,a[h+m].span()}}d.isNull&&u.clear(!0),u.set(d._cspan+_,d._dspan+f,!0)}}},o.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var s=i[r].layout.source,a=o.children[r];a&&s&&(a[n.Utils.TextProp]=s.header.getDisplayText()||s.firstColumn.header.displayText)}},o.RENDERER_STYLE="rg-filter-renderer",o}(i.SimpleTableElement);Ca.FilterPanelElement=h;var u=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},i.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i.prototype._getCellCount=function(t){return t.fixedCellCount},i.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},i}(h);Ca.FixedFilterPanelElement=u;var c=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i.prototype._getCellCount=function(t){return t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},i}(h);return Ca.RightFilterPanelElement=c,Ca}(),Tt=function(){if(wa)return xa;wa=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.GridFilterElement=xa.GridFilterCellElement=void 0;var t=d,e=Hn(),i=jo(),o=zo(),n=Xo(),r=Zo(),s=zn(),a=S(),l=function(e){function i(t){var i=e.call(this,t,"gridFilterCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return t.__extends(i,e),_dp(i,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),i.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[a.Utils.TextProp]=this._text)},i.prototype._doRender=function(t){},i}(s.CellElement);xa.GridFilterCellElement=l;var h=function(e){function s(t){var i=e.call(this,t,null,"gridFilterView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new l(t));return i}return t.__extends(s,e),s.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},s.prototype.getFilterModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},s.prototype.getCellType=function(t){var e=this.getFilterModel(t);return e instanceof i.SectionObject?e.getCellType():void 0},s.prototype._getCssSelector=function(){return"rg-filter"},s.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,s=t.sectionObjects;this._count=0;for(var a=0,l=s;a<l.length;a++){var h=l[a];h.visible&&((e=this._cells[this._count++]).model=h,h instanceof o.RowIndicator?e.width=i.rowIndicator.width:h instanceof n.StateBar?e.width=i.stateBar.width:h instanceof r.CheckBar&&(e.width=i.checkBar.width))}},s.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},s.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s=this.getChild(r),l=s.model,h=l.getFilterCell(),u=this._getTableCell(0,r),d=u.firstElementChild,c=this.$_getCellSelector()+" "+l.getFilterStyleName();if(n){var p=n.children[r];p&&(p[a.Utils.TextProp]=l.getCellType()+" filter")}s.setStyleName(u,c),s.updateCell(e,h,d)}},s.prototype._doRender=function(t){},s.prototype._getTableRowCount=function(t){return 1},s.prototype._getTableRowHeight=function(t,e){return this.height},s.prototype._getCellCount=function(t){return this._count},s.prototype._getCellWidth=function(t,e){return this._cells[e].width},s.prototype.$_getCellSelector=function(){return s.CELL_CSS},s.CELL_CSS="rg-filter-cell",s}(e.SimpleTableElement);return xa.GridFilterElement=h,xa}(),Dt=Ds(),kt=function(){if(ba)return Ea;ba=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.MobileEditController=void 0;var t=d,e=G(),i=S(),o=_s(),n=function(){function t(t,e){this._containerDom=t,this._commandType=e,this.$_createDom()}return t.prototype.getCommandType=function(){return this._commandType},t.prototype.$_getStyle=function(){return"commit"===this._commandType?"rg-editor-commit":"cancel"===this._commandType?"rg-editor-cancel":void 0},t.prototype.$_createDom=function(){var t=this._containerDom,e=(0,i.getDoc)(t),o=this._dom=e.createElement("div");o.style.touchAction="none",this.$_createButton(),i.Utils.addChild(t,o)},t.prototype.$_createButton=function(){var t=this._containerDom,e=(0,i.getDoc)(t),o=this._button=e.createElement("div");o.style.touchAction="none",o.style.pointerEvents="none",o.className=this.$_getStyle(),i.Utils.addChild(this._dom,o)},t}(),r=function(e){function o(t){var i=e.call(this)||this;return i._owner=t,i._commands=[],i.$_clickHandler=i._clickHandler.bind(i),i}return t.__extends(o,e),_dp(o,"showing",{get:function(){return this._showing}}),o.prototype.setContainerDom=function(t){this._containerDom=t},o.prototype.show=function(t){var e=this._containerDom,r=(0,i.getDoc)(e);if(this._dom||((this._dom=r.createElement("div")).className=o.STYLE),!this._commands||0==this._commands.length){var s=new n(this._dom,"commit");this._commands.push(s),s=new n(this._dom,"cancel"),this._commands.push(s)}i.Utils.addChild(this._containerDom,this._dom),this._dom.addEventListener("click",this.$_clickHandler),this._showing=!0,this.$_setPosition(t)},o.prototype.hide=function(){this._showing=!1,this._dom.removeEventListener("click",this.$_clickHandler),i.Utils.detach(this._dom)},o.prototype.setPosition=function(t){this._dom&&this.$_setPosition(t)},o.prototype._clickHandler=function(t){t.target!==this._dom&&this.$_doClick(t)},o.prototype.$_doClick=function(t){var e=this.$_findCommand(t.target);if(e)switch(e.getCommandType()){case"commit":this._owner.commitCommand(t);break;case"cancel":this._owner.cancelCommand(t)}},o.prototype.$_findCommand=function(t){for(var e=0;e<this._commands.length;e++)if(this._commands[e]._dom===t)return this._commands[e];return null},o.prototype.$_setPosition=function(t){var e=this._dom.style,i=this._dom.getBoundingClientRect(),o=t.right-i.width,n=t.top-i.height;e.left=o+"px",e.top=n+"px"},o.STYLE="rg-mobile-command-view",o}(e.Base),s=function(e){function i(t){var i=e.call(this,t)||this;return i._commandView=new r(i),i._commandView.setContainerDom(t.container._containerDom),i}return t.__extends(i,e),i.prototype.commitCommand=function(t){this.commitEditor(!0,!1,!0,!1)},i.prototype.cancelCommand=function(t){this.cancelEditor(!0)},i.prototype._showCommand=function(t){this._commandView&&this._commandView.show(t)},i.prototype._resetPosition=function(t){this._commandView&&this._commandView.setPosition(t)},i.prototype._hideCommand=function(){this._commandView&&this._commandView.showing&&this._commandView.hide()},i.prototype._editorActivated=function(t){e.prototype._editorActivated.call(this,t);var i=this._grid;if(this._grid.mobileOptions.showEditCommander&&i.$_canShowEditCommand(this._editIndex)){var o=this._grid.getEditCellBounds(this._editor,this._editIndex);this._showCommand(o)}},i.prototype._internalHideEditor=function(t){e.prototype._internalHideEditor.call(this,t),this._hideCommand()},i.prototype._resetBounds=function(){e.prototype._resetBounds.call(this);var t=this._grid.getEditCellBounds(this._editor,this._editIndex);this._resetPosition(t)},i}(o.DefaultEditController);return Ea.MobileEditController=s,Ea}(),Mt=function(d){function C(t,e,o){var m=d.call(this,t.doc,!0)||this;m._debugging=!1,m._scrollBarWidth=16,m._scrollBarHeight=16,m._keepNullFocus=!0,m._loading=!0,m._dataLoad=!1,m._gridObjects=[],m._tableViews={},m._columnMap={},m._columnLayouts=new i.ColumnLayoutCollection,m._columnLock=0,m._columnsDirty=!1,m._columnSummaryRuntime=new n.ColumnSummaryRuntime,m._columnValidationRuntime=new z.DataCellValidationRuntime,m._rowValidationRuntime=new z.DataRowValidationRuntime,m._layouted=!1,m._resetting=!1,m._needMerge=!1,m._leftPos=0,m._horzScrolled=!1,m._topIndex=0,m._prevTop=0,m._prevLeftPos=0,m._prevLast=-1,m._updateLock=!1,m._hoveredY=-1,m._focusing=!1,m._dataChanged=!1,m._validations=new z.EditValidationCollection(!1),m.$_editFocused=!1,m.$_showFocusCell=!1,m._itemCheckChanged=!1,m._cellUpdateEventLock=!1,m._currentRowId=-1,m._currentRow=-1,m._scrolledTime=0,m._cellLayoutDirty=!1,m._needRefresh=!0,m._needPosition=!0,m._fitHeader=!1,m._cellGhostStyle={};var C=t.doc,w=t._lkCheck=(0,st.lk)();switch(w){case 0:case 32:break;default:return m}m._container=t,m._addGridObject(m._header=new l.GridHeader(m)),m._addGridObject(m._footers=new h.GridFooterCollection(m)),m._addGridObject(m._headerSummaries=new Z.HeaderSummaryCollection(m)),m._addGridObject(m._rowIndicator=new u.RowIndicator(m)),m._addGridObject(m._stateBar=new c.StateBar(m)),m._addGridObject(m._checkBar=new p.CheckBar(m)),m._addGridObject(m._body=new _.GridBody(m)),m._addGridObject(m._filterPanel=new Et.FilterPanel(m)),m.addChild(m._rootElement=new y.LayerElement(C,"grid root view")),m._debugView=new ft.DebugLayer(m),32===w&&m.addChild(m._watermarkLayer=new It.WaterMarkLayer(m)),m.addChild(m._emptyView=new J.EmptyGridElement(C)),m.addElement(m._contentPane=new F.DataContentPane(C,"contentPane")),m.addElement(m._rightContentPane=new F.RightContentPane(C,"rightContentPane")),m.addElement(m._fixedContentPane=new F.FixedContentPane(C,"fixedContentPane")),m._doContentPanesCreated(),m.addElement(m._leftContentPane=new F.LeftContentPane(C,"leftContentPane")),m._sideContentPane=m._createSidePane(),m._sideContentPane&&m.addElement(m._sideContentPane),m.addElement(m._topContentPane=new F.ContentPane(C,"topContentPane")),m._filterPanelView=new Rt.FilterPanelElement(C,m._filterPanel),m._fixedFilterView=new Rt.FixedFilterPanelElement(C,m._filterPanel),m._rightFilterView=new Rt.RightFilterPanelElement(C,m._filterPanel),m._bodyView=m._createBodyView(m._body),m._fixedBodyView=m._createFixedBodyView(m._body),m._rightBodyView=m._createRightBodyView(m._body),m._headerView=new v.HeaderElement(C,m._header),m._fixedHeaderView=new v.FixedHeaderElement(C,m._header),m._rightHeaderView=new v.RightHeaderElement(C,m._header),m._headerSummaryView=new Q.HeaderSummaryElement(C,m._headerSummaries),m._fixedHeaderSummaryView=new Q.FixedHeaderSummaryElement(C,m._headerSummaries),m._rightHeaderSummaryView=new Q.RightHeaderSummaryElement(C,m._headerSummaries),m._footerView=new I.FooterElement(C,m.footers),m._fixedFooterView=new I.FixedFooterElement(C,m.footers),m._rightFooterView=new I.RightFooterElement(C,m.footers),m._rowBarContainer=new yt.RowBarContainer(m),m._headView=new k.GridHeadElement(m),m._sumView=new tt.GridSumElement(C),m._footView=new M.GridFootElement(C),m._filterView=new Tt.GridFilterElement(C);for(var x=[m._rowBarContainer,m._bodyView,m._fixedBodyView,m._rightBodyView,m._headerView,m._fixedHeaderView,m._rightHeaderView,m._headerSummaryView,m._fixedHeaderSummaryView,m._rightHeaderSummaryView,m._footerView,m._fixedFooterView,m._rightFooterView,m._headView,m._sumView,m._footView,m._filterView,m._filterPanelView,m._fixedFilterView,m._rightFilterView],b=x.length-1;b>=0;b--){var E=x[b];m._tableViews[E.$_hash]=E}return m._contentPane.addChild(m._headerView),m._contentPane.addChild(m._headerSummaryView),m._contentPane.addChild(m._filterPanelView),m._contentPane.addChild(m._bodyView),m._contentPane.addChild(m._footerView),m._fixedContentPane.addChild(m._fixedBodyView),m._fixedContentPane.addChild(m._fixedFooterView),m._fixedContentPane.addChild(m._fixedHeaderSummaryView),m._fixedContentPane.addChild(m._fixedHeaderView),m._fixedContentPane.addChild(m._fixedFilterView),m._rightContentPane.addChild(m._rightBodyView),m._rightContentPane.addChild(m._rightFooterView),m._rightContentPane.addChild(m._rightHeaderSummaryView),m._rightContentPane.addChild(m._rightHeaderView),m._rightContentPane.addChild(m._rightFilterView),m._leftContentPane.addChild(m._rowBarContainer),m._leftContentPane.addChild(m._footView),m._leftContentPane.addChild(m._sumView),m._leftContentPane.addChild(m._headView),m._leftContentPane.addChild(m._filterView),m._doCreateOtherElements(),m.addElement(m._selectionLayer=m._createSelectionLayer()),m.addElement(m._feedbackLayer=new y.LayerElement(C,"feedbackLayer")),m.addFeedbackElement(m._rowHoverView=new A.RowHoverView(C)),m.addElement(m._hscrollBar=new T.ScrollBar(t,!1)),m.addElement(m._vscrollBar=new T.ScrollBar(t,!0)),m.addElement(m._scrollEdge=new T.ScrollEdge(C)),m._hscrollBar.addListener(m),m._vscrollBar.addListener(m),m._selections=new N.SelectionManager(m),m._selections.addListener(m),m._fixedOptions=new f.FixedOptions(m),m._displayOptions=new g.DisplayOptions(m),m._formatOptions=new L.FormatOptions(m),m._editOptions=new B.EditOptions(m),m._editorOptions=new B.EditorOptions(m),m._copyOptions=new B.CopyOptions(m),m._pasteOptions=new B.PasteOptions(m),m._dataDropOptions=new ct.DataDropOptions(m),m._sortingOptions=new O.SortingOptions(m),m._filteringOptions=new it.FilteringOptions(m),m._waiOptions=new bt.WaiOptions(m),m._mobileOptions=new B.MobileOptions(m),m._initStyles(),m._columns=new r.ColumnCollection(m),m._activeCellLayout=m._defaultCellLayout=new s.DefaultCellLayout(m),m._defaultCellLayout.addListener(m),m._delegate=m._createDelegate(),m._layoutManager=m._createLayoutManager(),m._editController=m._createEditController(),m._validationManager=new z.ValidationManager(m),m._lookupProvider=new q.LocalLookupSourceProvider,m._lookupProvider.addListener(m),m._clipboardManager=new X.ClipboardManager(m),m._progressManager=new gt.ProgressManager(m._container._containerDom),m._popupMenuManager=new K.PopupMenuManager(m._container),m._popupMenuManager.addListener(m),m._tooltipManager=new nt.TooltipManager(m),m._filterSelector=new ot.FilterSelector(m._container,m._filteringOptions,m),m._toastManager=new at.ToastManager(m),m._currentIndex=new a.CellIndex(m),m._editorIndex=new a.CellIndex(m),m._focusedIndex=new a.CellIndex(m),(m._accessibility=e)&&m._waiOptions.assignFrom(o),m}return t.__extends(C,d),C.createColumn=function(t){if(t){return"series"==t.type?new i.SeriesColumn(t):new i.DataColumn(t)}return null},C.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),a.CellIndex.clearTemp(),this._cellGhostStyle={},d.prototype._doDispose.call(this)},_dp(C,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&(this._debugging=t,t?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))}}),_dp(C,"activeTool",{get:function(){return this.container.activeTool}}),_dp(C,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())}}),_dp(C,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())}}),_dp(C,"body",{get:function(){return this._body}}),_dp(C,"header",{get:function(){return this._header}}),_dp(C,"footers",{get:function(){return this._footers}}),_dp(C,"footer",{get:function(){return this._footers.get(0)}}),C.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(C,"headerSummaries",{get:function(){return this._headerSummaries}}),_dp(C,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),C.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},_dp(C,"rowIndicator",{get:function(){return this._rowIndicator}}),_dp(C,"checkBar",{get:function(){return this._checkBar}}),_dp(C,"stateBar",{get:function(){return this._stateBar}}),_dp(C,"filterPanel",{get:function(){return this._filterPanel}}),_dp(C,"activeCellLayout",{get:function(){return this._activeCellLayout}}),C.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},_dp(C,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(C,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(C,"columnCount",{get:function(){return this._columns.count}}),_dp(C,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource;this._items&&(this._items.dataSource=t),this.dataSource}}),_dp(C,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)}}),_dp(C,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)}}),_dp(C,"itemCount",{get:function(){return this._items?this._items.itemCount:0}}),_dp(C,"rowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(C,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(C,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0}}),_dp(C,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime}}),_dp(C,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime}}),_dp(C,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime}}),_dp(C,"focusedIndex",{get:function(){return this._focusedIndex}}),_dp(C,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout}}),_dp(C,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn}}),_dp(C,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1}}),_dp(C,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item}}),_dp(C,"rowBarContainer",{get:function(){return this._rowBarContainer}}),_dp(C,"topContentPane",{get:function(){return this._topContentPane}}),_dp(C,"sideContentPane",{get:function(){return this._sideContentPane}}),_dp(C,"leftContentPane",{get:function(){return this._leftContentPane}}),_dp(C,"contentPane",{get:function(){return this._contentPane}}),_dp(C,"fixedContentPane",{get:function(){return this._fixedContentPane}}),_dp(C,"rightContentPane",{get:function(){return this._rightContentPane}}),_dp(C,"bodyView",{get:function(){return this._bodyView}}),_dp(C,"fixedBodyView",{get:function(){return this._fixedBodyView}}),_dp(C,"rightBodyView",{get:function(){return this._rightBodyView}}),_dp(C,"headerView",{get:function(){return this._headerView}}),_dp(C,"fixedHeaderView",{get:function(){return this._fixedHeaderView}}),_dp(C,"rightHeaderView",{get:function(){return this._rightHeaderView}}),_dp(C,"headerSummaryView",{get:function(){return this._headerSummaryView}}),_dp(C,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView}}),_dp(C,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView}}),_dp(C,"footerView",{get:function(){return this._footerView}}),_dp(C,"fixedFooterView",{get:function(){return this._fixedFooterView}}),_dp(C,"rightFooterView",{get:function(){return this._rightFooterView}}),_dp(C,"filterPanelView",{get:function(){return this._filterPanelView}}),_dp(C,"fixedFilterView",{get:function(){return this._fixedFilterView}}),_dp(C,"rightFilterView",{get:function(){return this._rightFilterView}}),_dp(C,"headView",{get:function(){return this._headView}}),_dp(C,"sumView",{get:function(){return this._sumView}}),_dp(C,"footView",{get:function(){return this._footView}}),_dp(C,"filterView",{get:function(){return this._filterView}}),_dp(C,"fixedOptions",{get:function(){return this._fixedOptions}}),_dp(C,"displayOptions",{get:function(){return this._displayOptions}}),_dp(C,"formatOptions",{get:function(){return this._formatOptions}}),_dp(C,"editOptions",{get:function(){return this._editOptions}}),_dp(C,"editorOptions",{get:function(){return this._editorOptions}}),_dp(C,"copyOptions",{get:function(){return this._copyOptions}}),_dp(C,"pasteOptions",{get:function(){return this._pasteOptions}}),_dp(C,"dataDropOptions",{get:function(){return this._dataDropOptions}}),_dp(C,"sortingOptions",{get:function(){return this._sortingOptions}}),_dp(C,"filteringOptions",{get:function(){return this._filteringOptions}}),_dp(C,"mobileOptions",{get:function(){return this._mobileOptions}}),_dp(C,"WaiOptions",{get:function(){return this._waiOptions}}),_dp(C,"accessibility",{get:function(){return this._accessibility}}),_dp(C,"delegate",{get:function(){return this._delegate}}),_dp(C,"heightMeasurer",{get:function(){return this.container.heightMeasurer}}),_dp(C,"layoutManager",{get:function(){return this._layoutManager}}),_dp(C,"selections",{get:function(){return this._selections}}),_dp(C,"selectionLayer",{get:function(){return this._selectionLayer}}),_dp(C,"editController",{get:function(){return this._editController}}),_dp(C,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(C,"validationManager",{get:function(){return this._validationManager}}),_dp(C,"popupMenuManager",{get:function(){return this._popupMenuManager}}),_dp(C,"tooltipManager",{get:function(){return this._tooltipManager}}),_dp(C,"toastManager",{get:function(){return this._toastManager}}),_dp(C,"topIndex",{get:function(){return this._topIndex},set:function(t){if((t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex){var i=this.topIndexChanging(this._topIndex,t-this._topIndex,!1,!1);null==i||isNaN(i)||(t=this._topIndex+i,t=Math.min(this.itemCount-1,Math.max(0,t))),this._topIndex!==t&&(this._needRefresh=!0),this._topIndex=t,this.refreshView(),e.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups()}}}),_dp(C,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount}}),_dp(C,"leftPos",{get:function(){return this._leftPos},set:function(t){(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=t,this._horzScrolled=!0,this._displayOptions.refreshMode==m.RefreshMode.VISIBLE_ONLY||this.isRecycleMode()&&this._needRefresh?this.refreshView():this.invalidate(),this.closePopups()),!this.isRecycleMode()&&this._debugging&&this._debugView.layout()}}),_dp(C,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)}}),_dp(C,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x}}),_dp(C,"lookupProvider",{get:function(){return this._lookupProvider}}),_dp(C,"canHovering",{get:function(){return!this.isEditing()}}),_dp(C,"hoveredCell",{get:function(){return this._hoveredCell}}),_dp(C,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount}}),_dp(C,"sorted",{get:function(){return this.itemSource.sorted}}),_dp(C,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned}}),_dp(C,"isSwiping",{get:function(){var t=this.activeTool,e=t.dragTracker;return e instanceof Dt.TouchDragTracker&&e.dragging||t._touchMoving}}),_dp(C,"cellGhostStyle",{get:function(){return this._cellGhostStyle=this._cellGhostStyle||{}}}),C.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},C.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},C.prototype.setEventFrom=function(t){this._eventFrom=t},C.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},C.prototype.getColumn=function(t){return this._columns.getColumn(t)},C.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;e>=0;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},C.prototype.setCellLayout=function(t){this._beforeChangeLayout();var e=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var i=t&&new s.GridCellLayout(this).load(t);i&&i.addListener(this);var o=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=i||this._defaultCellLayout,this._cellLayoutDirty=!0,this._clearSelectionViews(),this.invalidateLayout(),this._activeCellLayout.isDefault()&&this.setColumns(this._columns.columns),this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.$_refresh(this._columns,this.displayOptions.minCellWidth),this._activeCellLayout.invalidate(),this.refreshView(),o&&e&&setTimeout(function(){o.layout=this._activeCellLayout.layoutByColumn(e),this.setFocusedIndex(o)}.bind(this),10),this.clearRowHeights(),this._populateMerges()},C.prototype._checkEditing=function(){if(this.itemSource instanceof H.EditableItemProvider&&this.itemSource.isEditing())throw new Error("Item is editing")},C.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),this.dataSource&&this.applyFilters()),i},C.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},C.prototype.addLayout=function(t,e){return this.activeCellLayout.addLayout(t,e)},C.prototype.removeLayout=function(t){this.activeCellLayout.removeLayout(t)},C.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},C.prototype.linearizeColumns=function(t){var i=this._activeCellLayout.collectColumns(!0,!0,!0);if(t=e.Utils.makeArray(t),i&&i.length>0){if(t&&t.length>0)for(var o=function(e){i.sort((function(i,o){var n=i[t[e]],r=o[t[e]];return n<r?1:n>r?-1:0}))},n=0;n<t.length;n++)o(n);var r=[];i.forEach((function(t){r.push(t.name)})),this.setCellLayout(r)}},C.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},C.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},C.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},C.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},C.prototype.beginUpdate=function(){this._updateLock=!0},C.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},C.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},C.prototype.invalidateLayout=function(){this._updateLock||this._loading||d.prototype.invalidateLayout.call(this)},C.prototype.invalidatePosition=function(){this._needPosition=!0},C.prototype.setNeedRefresh=function(t){this._needRefresh=!0,t&&d.prototype.invalidate.call(this,!1,!0)},C.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),d.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},C.prototype.refreshView=function(t){if(!this._loading){if(t){var e=this._container;e._layoutNeeded=!0,this._needPosition=!0,this._horzScrolled=this._horzScrolled||this._needRefresh,e._render(Date.now())}else this.invalidateLayout();this.topIndex=this._topIndex,this.leftPos=this._leftPos}},C.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},C.prototype.getFirstCell=function(){if(this.itemCount>0){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof o.GridRow){t=e;break}return new a.CellIndex(this,t>=0?t:0,this.getFirstColumn())}return null},C.prototype.$_setEditFocused=function(t,i){if(t!=this.$_editFocused){if(this.$_editFocused=t,t&&this.$_showFocusCell){var o=this.focusedIndex;!o||this.isValid(o)}this.$_showFocusCell=!1}t&&i&&"focusin"==i.type&&e.Utils.isAncestorOf(this._container._container,i.target,i)&&R.VisualContainer.setActiveGrid(this.container.$_hash)},C.prototype.getItem=function(t){return this._items.getItem(t)},C.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},C.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},C.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},C.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},C.prototype.getItemOfModel=function(t){return null},C.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.getItem(r),a=s?s.dataRow:-1;(e||a>=0)&&i.push(a)}return i},C.prototype.getIndicatorIndex=function(t,e){return e?this.itemCount-t.index-1:t.index},C.prototype.indicatorReverse=function(t){return t===u.IndicatorValue.REVERSE},C.prototype.getAllItems=function(){return this._items.getAllItems()},C.prototype.getImage=function(t){return null},C.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new a.CellIndex(this,t,e)},C.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],n=i.$_row,r=o.layoutByCell(t);return null!=e?e.set(n,r):a.CellIndex.temp(this,n,r)},_dp(C,"handler",{get:function(){return this.$_handler}}),C.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},C.prototype.optionsChanged=function(t){this._columnsDirty=!0,this.refreshView()},C.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t},C.prototype.selectColumnFilters=function(t){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{if(!this.commit(!1))return}catch(t){var e=this.focusedItem;if(e&&t instanceof z.ValidationError)return void((t=this._fireValidationFail(e.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}this._fireFiltering()&&(this.hideEditor(!0),this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource))},C.prototype.closeFilterSelector=function(){this._filterSelector.hide()},C.prototype.closePopups=function(t){void 0===t&&(t=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},C.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},C.prototype.columnByHash=function(t){return this._columnMap[t]},C.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},C.prototype.columnByName=function(t){return this._columns.columnByName(t)},C.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},C.prototype.columnsByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnsByField(t)},C.prototype.columnByTag=function(t){return this._columns.columnByTag(t)},C.prototype.columnsByTag=function(t){return this._columns.columnsByTag(t)},C.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},C.prototype.getGroupLevel=function(t){return-1},C.prototype.isGroupedColumn=function(t){return!1},C.prototype.layoutByColumn=function(t){return t instanceof i.GridColumn||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},C.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},C.prototype.setFocus=function(t){function i(t){this.$_showFocusCell=!0;var i=this.focusedIndex.clone();if(i&&!this.isValid(i)&&(i.set(Math.max(0===this.topIndex?0:this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(i,!0,!0)),this._accessibility&&!this.isEditing()&&this.isValid(i))if(this.layoutManager.cellIsVisible(i)&&!this._resetTdFocus){var o=this.getBodyCellAt(i,!0);if(o&&t!==o.cell)this.getBodyViewAt(i).refreshTdFocused(i,!1)}else this._resetTdFocus=!0;else e.Utils.isMobile()?this.container.setFocus():this._editController.setFocus(!0,t);R.VisualContainer.getActiveGrid()!==this&&R.VisualContainer.setActiveGrid(this.container.$_hash)}this.activeCellLayout.visibleCount>0?i.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,i.call(this,t)}.bind(this),10))},C.prototype.getFirstLayout=function(){return this._activeCellLayout.first},C.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},C.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},C.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},C.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},C.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},C.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},C.prototype.isValid=function(t){return t&&t.grid===this&&t.itemIndex>=0&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this},C.prototype.getSelection=function(t){return void 0===t&&(t=0),t>=0&&t<this._selections.count?this._selections.getItem(t):null},C.prototype.getSelections=function(){return this._selections.getItems()},C.prototype.clearAddSelection=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=this.focusedIndex;t&&this._selections.clear(),e&&this.isValid(i)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(i,i,this._displayOptions.selectionStyle)},C.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},C.prototype.$_deleteSelection=function(t,i){function n(t,e){try{if(e&&e.length>0){for(var i=[],o=0,n=e.length;o<n;o++){var r=t.getItem(e[o]);r&&r.dataRow>=0&&i.push(r.dataRow)}if(i.length>0&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function r(t,e){var r=t.recursiveDeleting();return!!e&&((i||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&n(t,[e.index]))&&(t.cancel(),(0,o.ItemState_isInserting)(e.itemState)||t.itemSource.remove(e,r)),!0)}function s(t,e){for(var i=null,n=e.length;n--;){var r=t.getItem(e[n]),s=r.itemState;if((0,o.ItemState_isEditing)(s)){i=r,(0,o.ItemState_isInserting)(s)&&e.splice(n,1);break}}var a=null;e.length>0&&(a=t.itemSource.getRemovableRows(e)),i&&t.cancel(),a&&t.itemSource.removeRows(a,t.recursiveDeleting())}void 0===i&&(i=!1);var a=this.editOptions,l=this.selections,h=this.itemSource;if((i||a.deletable)&&h instanceof H.EditableItemProvider)if(!this.isItemEditing(null)||a.deletableWhenEdit){if(this.commitEditor(!0),r(this,t))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,o=-1;return(o=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0&&t.canDelete(i=t.getItem(o))&&r(t,i),!0}return!1}(this,l)){for(var u=l.count,d=[],c=0;c<u;c++){var p=l.getItem(c);if((0,N.isRowSelection)(p)||e.Utils.included(p.style,N.SelectionStyle.BLOCK,N.SelectionStyle.GROUP))for(var _=p.getBounds(),f=Math.min(_.r1,_.r2),g=Math.max(_.r1,_.r2),m=f;m<=g;m++){var y=this.getItem(m);(y.dataRow>=0||y.editable)&&d.push(m)}}d.sort((function(t,e){return t-e}));var v=-1;for(c=d.length;c--;)d[c]==v?d.splice(c,1):v=d[c];d.length>0&&this.canDelete(this.getItem(d[0]))&&(i||!a.confirmWhenDelete?n(this,d)&&(s(this,d),this.clearAddSelection(!0)):confirm(a.deleteRowsMessage)&&n(this,d)&&(s(this,d),this.clearAddSelection(!0)))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.")},C.prototype.revertSelection=function(t){void 0===t&&(t=!1);var i=this.editOptions,o=this.selections,n=this.itemSource;if((t||i.revertable)&&n instanceof H.EditableItemProvider&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if((i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0)return t.itemSource.revert(i),!0}return!1}(this,o))){for(var r=o.count,s=[],a=0;a<r;a++){var l=o.getItem(a);if((0,N.isRowSelection)(l)||e.Utils.included(l.style,N.SelectionStyle.BLOCK,N.SelectionStyle.GROUP))for(var h=l.getBounds(),u=Math.min(h.r1,h.r2),d=Math.max(h.r1,h.r2),c=u;c<=d;c++){var p=this.getItem(c);(p.dataRow>=0||p.editable)&&s.push(c)}}s.sort((function(t,e){return t-e}));var _=-1;for(a=s.length;a--;)s[a]==_?s.splice(a,1):_=s[a];s.length>0&&n.revertAll(s)}},C.prototype.eraseSelection=function(t){var i=this.editOptions,o=this.selections,n=this.itemSource;if(i.readOnly||!t&&!i.erasable||!i.updatable)return!1;if(!(n instanceof H.EditableItemProvider))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.getWritableAt(i)&&t.setCellValue(i,void 0),!0}return!1}(this,o))return!0;var r=o.count;if(r<1)return!1;for(var s=[],a=0;a<r;a++){var l=o.getItem(a);((0,N.isRowSelection)(l)||e.Utils.included(l.style,N.SelectionStyle.BLOCK,N.SelectionStyle.GROUP))&&(s=s.concat(l.getItems()))}if(s.length>0){for(a=0;a<r;a++)o.getItem(a).setValues(void 0);return!0}},C.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},C.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);for(var e=this._selections,i=[],o=0;o<e.count;o++){e.getItem(o).getItemIndices(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}))}return i},C.prototype.getSelectedRows=function(){for(var t=this._selections,e=[],i=0;i<t.count;i++){t.getItem(i).getRows().forEach((function(t){e.indexOf(t)<0&&e.push(t)}))}return e},C.prototype.getSelectedLayouts=function(){for(var t=this.activeCellLayout.collectLayouts(!0),e=this._selections,i=[],o=0;o<t.length;o++)e.containsLayout(t[o])&&i.indexOf(t[o])<0&&i.push(t[o]);return i},C.prototype.setFocusedIndex=function(t,e,i,o){if(void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i,!0,o)}finally{this._focusing=!1}}},C.prototype.setFocusedItem=function(t){t instanceof o.GridItem&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},C.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},C.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this._editController.remainFocusing(!0),this.$_doSetFocusedIndex(e,!0,!1,!1,!1)}finally{this._focusing=!1}}},C.prototype.getTableCell=function(t){if(!t)return null;for(var i=t,o=(0,e.getWin)(i);i&&!(i instanceof o.HTMLTableCellElement);)i=i.parentElement;if(i instanceof o.HTMLTableCellElement&&i.parentElement){var n=i.parentElement[m.T_VIEW];if(n)return i;for(i=i.parentElement;i;){if(i instanceof o.HTMLTableCellElement&&(n=i.parentElement[m.T_VIEW]))return i;i=i.parentElement}}return null},C.prototype.getTableView=function(t){return this._tableViews[t.parentElement[m.T_VIEW]]},C.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},C.prototype.getBodyView=function(t){return this.getTableView(t)},C.prototype.getRowView=function(t,e){return t.getRowView(e)},C.prototype.getHeaderView=function(t){return this.getTableView(t)},C.prototype.getFooterView=function(t){return this.getTableView(t)},C.prototype.getSummaryView=function(t){return this.getTableView(t)},C.prototype.getFilterView=function(t){return this.getTableView(t)},C.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e[m.T_ROW])return"fixedbar";var i=this._tableViews[e[m.T_VIEW]];if(!(i instanceof w.GridBodyElement))return i instanceof yt.RowBarContainer?i.getCellType(t):i instanceof v.HeaderElement?"header":i instanceof I.FooterElement?"footer":i instanceof Q.HeaderSummaryElement?"summary":i instanceof Rt.FilterPanelElement?"inlineFilter":i instanceof k.GridHeadElement?"head":i instanceof M.GridFootElement?"foot":i instanceof tt.GridSumElement?"sum":i instanceof Tt.GridFilterElement?"filter":this._getCellTypeOf(i);var n=i.bodyCellByCell(t);if(n)return!(n.item instanceof o.GroupFooter)||n.dataColumn&&n.dataColumn.mergeGrouped?"data":"groupFooter"}},C.prototype._getCellTypeOf=function(t){},C.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,o=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return o&&e&&o.merged&&o.head?o.head:o},C.prototype.getHeaderCellAt=function(t){return this._headerView.visible&&this._headerView.tableCellByLayout(t)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(t)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(t)},C.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},C.prototype.cellToIndex=function(t){var i=a.CellIndex.temp(this,-1,null);if((t=this.getCellViewOf(t))&&t instanceof(0,e.getWin)(t).HTMLTableCellElement){var o=this.getBodyView(t);o&&o instanceof w.GridBodyElement&&(i.layout=o.layoutByCell(t),i.itemIndex=t.parentElement[m.T_ROW])}return i},C.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=this.getTableView(t);e=i.getCellPoint(t,e);var o=i.boundsByContainer(x.Rectangle.Temp.set(e.x,e.y,0,0));return e.set(o.x,o.y),e},C.prototype.pointToIndex=function(t,e,i,o){var n=a.CellIndex.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,n):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,n),n},C.prototype.getCellRectAt=function(t,e,i){var o=this.getBodyViewAt(e);if(o){var n=o.getCellAt(t,e);return n&&o.getCellRect(t,n,i)}},C.prototype.getEditCellBounds=function(t,i){var o=this.layoutManager,n=o.getBodyView(i),r=n.getCellAt(o,i);if(r){var s=this.canMergeEditing(r),a=n.getCellRectAt(o,i,s);return a=n.boundsByContainer(a),!i.colFixed&&a.width>o.nonFixedBounds.width&&(a.width=o.nonFixedBounds.width),a}return e.Utils.$_INVISIBLE_EDIT_BOUNDS.clone()},C.prototype.getEditBounds=function(t,i){var o=i.item;if(!o)return null;var n=this.layoutManager,r=n.fixedItemCount;if(r>0&&o.index>=r&&o.index-r<n.topIndex)return e.Utils.$_INVISIBLE_EDIT_BOUNDS.clone();var s=n.getBodyView(i),a=s.getCellAt(n,i);if(a){a=a.merged?a.head:a;var l=s.getCellRectAt(n,i,!1);return(l=s.boundsByContainer(l)).width-=(t.native?0:a.editWidth)+a.buttonWidth+a.errorWidth,l}return e.Utils.$_INVISIBLE_EDIT_BOUNDS.clone()},C.prototype.getCellViewOf=function(t){for(var i=(0,e.getWin)(t);t;){if(t instanceof i.HTMLTableCellElement)return t;t=t.parentElement}return null},C.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,o=i.fixedItemCount;if(o>0&&e.index>=o&&e.index-o<i.topIndex)return null;var n=e.merged,r=t.colFixed,s=t.rightFixed;return e.isData||n?(s?this._rightBodyView:r?this._fixedBodyView:this._bodyView).getCellView(i,t):null},C.prototype.isFocusedCell=function(t){return a.CellIndex.areEquals(t,this._focusedIndex)},C.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},C.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},C.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},C.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone(),n=this.pasteOptions;if(i.normalize(this),this.isValid(i)&&i.dataColumn&&n.enabled&&this._firePaste(i,e))try{n.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&(0,o.ItemState_isEditing)(i.item.itemState)&&this.refreshView()),this._firePasted()}catch(t){throw t instanceof z.ValidationError&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},C.prototype.copyToClipboard=function(t,e,i){void 0===i&&(i=!1);var o,n=!1,r=this.focusedIndex,s=this.selections;if(i||this.copyOptions.enabled){if(i||(o=(n=this.copyOptions.singleMode||0==s.count||s.single)?new N.BlockSelection(s,N.SelectionStyle.BLOCK,r,r):s.getItems(),i=this._fireCopy(o,t)),i){var a=void 0,l=void 0;if(!e&&Array.isArray(o)){var h=o.length>1,u=o.length>1,d=!0;if(o.length>1&&o.forEach((function(t){d=d&&(t instanceof N.RowSelection||t instanceof N.ColumnSelection),h=h&&t instanceof N.RowSelection,u=u&&t instanceof N.ColumnSelection})),!d)return alert("multi selection copy not supported"),null;a=h?this.getSelectedItemIndices(!1):null,l=u?this.getSelectedLayouts():null}return e=e||(Array.isArray(o)?o[0].getBounds():o.getBounds()),n?this._clipboardManager.copyCellToClipboard(r):this._clipboardManager.copyToClipboard(e,a,l)}return null}return this._clipboardManager.copyEmtpyToClipboard()},C.prototype.toClipboard=function(t,o){void 0===o&&(o=!0);var n=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof i.GridColumn&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var r;if(!(t&&t instanceof a.CellRange)){var s=void 0,l=void 0;if(t?(s=n(t.startColumn),l=n(t.endColumn)):(s=this._activeCellLayout.first,l=this._activeCellLayout.last),!s||!l)return;var h=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),u=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);r=a.CellRange.createRange(h,s,u,l)}var d=this.copyToClipboard(null,r,!0);if(d=null==d?"":d,!o)return d;if(e.Utils.isIE&&window.clipboardData)window.clipboardData.setData("text",d);else{var c=this.doc,p=c.createElement("textarea"),_=p.style;_.position="absolute",_.top="-10000px",c.body.appendChild(p),p.value=d,p.select(),c.execCommand("copy"),setTimeout((function(){c.body.removeChild(p)}),100)}}},C.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},C.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},C.prototype.isEditing=function(t){return this._editController.editing&&(!t||a.CellIndex.areEquals(t,this._editController.editIndex))},C.prototype.getEditItem=function(){return this.itemSource instanceof H.EditableItemProvider&&this.itemSource.editingItem},C.prototype.isItemEditing=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof H.EditableItemProvider&&this.itemSource.isEditing(t)},C.prototype.isItemEdited=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof H.EditableItemProvider&&this.itemSource.isEdited(t)},C.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},C.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},C.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},C.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},C.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case m.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case m.ScrollOnEditing.COMMIT:this.commitEditor(!0);case m.ScrollOnEditing.DEFAULT:}},C.prototype._doCellCommit=function(t,e,i){return this._fireEditCommit(t,e,i)},C.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0,t)},C.prototype._doEditorActivated=function(t,e,i){var o=this.getBodyCellAt(t,!1),n=o&&this.getBodyView(o.cell);n&&n.$_buttonZIndexChanged(this,o,e,i)},C.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},C.prototype.$_validateCellValue=function(t,e){try{var i=(0,o.ItemState_isInserting)(t.item.itemState);return this._validationManager.validateCell(t,i,!1),!0}catch(e){if(!(e instanceof z.ValidationError))throw e;this._validationManager.addInvalidateCell(t,e)}return!1},C.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},C.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},C.prototype.validateCells=function(t,e,i){return this._validationManager.validateCells(t,e,i)},C.prototype.getInvalidCells=function(t){return this._validationManager.getInvalidCells(t)},C.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},C.prototype.getEditableAt=function(t,e){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){var o=t.item;if(null!=o.editable)return o.editable}var n=this.editOptions;if(n.columnEditableFirst){if(!(null!=i.editable?i.editable:n.editable))return!1}else{if(!n.editable)return!1;if(!1===i.editable)return!1}var r=this.fixedOptions;return!(t.colFixed&&!r.editable)&&!(t.rowFixed&&!r.rowEditable)},C.prototype.getReadOnlyAt=function(t,e){var i=t.dataColumn;if(!i)return!0;var n=this._items.getItem(t.itemIndex);return!n||(e&&null!=e.readOnly?e.readOnly:(n=n.merged&&n instanceof o.GroupItem?n.firstDataItem:n,!this.editOptions.updatable&&!(0,o.ItemState_isInsertItem)(n.itemState,n.rowState)||(!this._items.canUpdate(n,i.dataIndex)||(!!this._editOptions.readOnly||!!i.readOnly))))},C.prototype.getWritableAt=function(t){if(!this.isValid(t))return!1;var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);if(i){var o=i.merged&&i.head||i;return(null==i.editable||i.editable||o.renderer2&&o.renderer2.canEdit())&&!i.readonly}var n=t.dataColumn,r=this.body.getCell(t,!1),s=r&&n.getCellStyle(r),a=n.readOnly,l=n.isWritable();return s&&"string"!=typeof s&&(a=null!==s.readOnly?s.readOnly:n.readOnly,l=null!==s.editable?s.editable:n.isWritable()),l&&!a}},C.prototype.getWritable=function(t,e){var i=e.layout,o=a.CellIndex.temp(this,t,i),n=this.getWritableAt(o);return void 0===n?e.isWritable():n},C.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},C.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},C.prototype.canUpdate=function(t,e){return this.editOptions.canUpdate(t.rowState===xt.RowState.CREATED)&&this.visibleLayoutCount>0&&this.itemSource&&this.itemSource.canUpdate(t,e)},C.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&this.visibleLayoutCount>0&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},C.prototype.canInsert=function(t,e,i){var o=this.itemSource,n=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&this.visibleLayoutCount>0&&o&&o.canInsert(t);if(n)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return n},C.prototype._doCanInsert=function(t,e,i){return!0},C.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&e&&(this.isItemEditing(t)||e.canDelete(t))},C.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},C.prototype.canCancel=function(t){return this.isItemEditing(t)},C.prototype.canMergeEditing=function(t){return!this.isTree()&&t&&t.merged&&this.editOptions.commitByCell&&t.dataColumn&&t.dataColumn.mergeEdit},C.prototype.edit=function(t){return t||(t=this.focusedIndex),!!(this.isValid(t)&&this.itemSource instanceof H.EditableItemProvider)&&(!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(!(0,o.ItemState_isEditing)(t.item.itemState)&&this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item)))},C.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},C.prototype.insert=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=!1),t||(t=this.focusedIndex?this.focusedIndex.item:null),!t)return!1;var o=this.itemSource;if(o instanceof H.EditableItemProvider&&this.canInsert(t,e,i)){var n=this.$_getInsertDefaults(null);return this._cancelDummy(),o.insert(t,n,e,i)}return!1},C.prototype.append=function(){var t=this.itemSource;if(t instanceof H.EditableItemProvider&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},C.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},C.prototype._cancelDummy=function(){this._items.cancelDummy()},C.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);if(o&&e>=0)if(o instanceof H.EditItem||o instanceof Ct.TreeEditItem)o.setValue(e,i);else{var n=o.dataRow;n>=0&&this.dataSource.setValue(n,e,i)}},C.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},C.prototype.recallHeight=function(){this._container.recallHeight()},C.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},C.prototype.$_canShowEditCommand=function(t){if(this.isValid(t))return this._fireShowEditCommand(t)},C.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},C.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},C.prototype.fillEditSearchItems=function(t,e,i,o){this._editController.fillSearchItems(t,e,i,o)},C.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},C.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},C.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},_dp(C,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()}}),C.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},_dp(C,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()}}),C.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},C.prototype.execute=function(t){},C.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},C.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new q.LocalLookupSourceProvider,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},C.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new q.LocalLookupSourceProvider)).add(t)},C.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},C.prototype.existsLookupData=function(t,i){if(t&&i){var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw new Error("Invalid lookup source id: "+t);return o.exists(e.Utils.makeArray(i))}},C.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},C.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw new Error("Invalid lookup source id: "+t);e.clear()}},C.prototype.addLookupData=function(t,i,o){if(void 0===o&&(o=null),t&&i){i=e.Utils.makeArray(i);var n=this._lookupProvider&&this._lookupProvider.getSource(t);if(!n)throw new Error("Invalid lookup source id: "+t);o?n.add(i,o):n.addRow(i)}},C.prototype.setOptions=function(t){},C.prototype.doContextMenu=function(t){var e,i,o,n,r,s,l,h=t.mouseX,u=t.mouseY,d=this.activeTool,c=d._findTableCell(),p=d.findElementAt(h,u,!1);if(c){var _=this.getTableView(c),f=this.getCellType(c),g=void 0,y=void 0;switch(f){case"head":e=A.ClickData.getSub(f,this.headView.getCellType(c)),s=(i=this.headView.getHeadModel(c))&&i.popupMenuName;break;case"foot":e=A.ClickData.getSub(f,this.footView.getCellType(c)),s=(i=this.footView.getFootModel(c))&&i.popupMenuName;break;case"indicator":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=A.ClickData.getItem(f,g,y),s=this.rowIndicator.popupMenuName;break;case"state":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=A.ClickData.getItem(f,g,y),s=this.stateBar.popupMenuName;break;case"check":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=A.ClickData.getItem(f,g,y),s=this.checkBar.popupMenuName;break;case"header":l=_.layoutByCell(c),e=A.ClickData.getLayout(f,l),s=l.firstColumn.header.popupMenuName;break;case"data":if((n=_.bodyCellByCell(c)).grouped)e=A.ClickData.getItem("groupHeader",n.item.index,null);else{var v=a.CellIndex.temp(this,p instanceof mt.RowElement?p.itemIndex:n.item.index,n.layout);e=A.ClickData.getCell(f,n,v),s=n.dataColumn.popupMenuName}break;case"groupFooter":n=_.bodyCellByCell(c),r=p&&p._item&&p._item.$_footerIndex,e=A.ClickData.getGroupFooter(f,n.item.index,n.layout,r);var C=n.dataColumn.groupFooters.get(r);s=C&&C.popupMenuName;break;case"footer":case"summary":var w=_.tableCellByCell(c);r=w.summaryIndex;var x="footer"===f?w.layout.firstColumn.footers.get(r):w.layout.firstColumn.headerSummaries.get(r);e=A.ClickData.getSummary(f,w.summaryIndex,w.layout),s=x&&x.popupMenuName;break;case"groupHead":case"groupFoot":var b=c[m.T_LEV];e=A.ClickData.getGroupElt(f,b);break;case"groupBar":var I=c[m.T_ROW];y=this.getRowOfItem(I),e=A.ClickData.getItem(f,I,y)}}else p&&p===d._clickElement&&(e=d._getClickData(p));if(!1!==(o=this._fireContextMenuPopup(h,u,e,s||this._contextMenu,!0))){var E=this._popupMenuManager;if("string"==typeof o?s=o:null!=o&&"object"==typeof o||(s=s||this._contextMenu),s){t.preventDefault();var S=E.getMenu(s);S&&E.showContext(S,t,h,u,e)}}return null},C.prototype.setContextMenu=function(t){return t?this.addPopupMenu(this._contextMenu="gridContextMenu",t,!0,this):this._contextMenu=null},C.prototype.addPopupMenu=function(t,i,o,n){if(void 0===o&&(o=!0),i=e.Utils.makeArray(i),t&&i)return this.popupMenuManager.addMenu(t,i,o,n)},C.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},C.prototype.getPopupMenu=function(t){return this.popupMenuManager.getMenu(t)},C.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t),o=i?this.getTableView(i):this._tableViews[t[m.T_VIEW]];if(o instanceof J.VisualObjectElement)return void o.setCursor(e)}this._container.setCursor(e)},C.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},C.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},C.prototype.getEditCellValue=function(){return this._editController.editValue},C.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},C.prototype.searchItem=function(t){t instanceof _t.SearchOptions||(t=new _t.SearchOptions(t));var i=e.Utils.makeArray(t.fields),o=e.Utils.makeArray(t.values),n=this.itemSource,r=t.startIndex,s=t.reverse,a=-1;if(i&&i.length>0&&o&&o.length>0&&n){var l=void 0,h=void 0,u=void 0,d=void 0,c=i.length,p=[];for(l=0;l<c;l++)h=parseFloat(i[l]),!isNaN(h)&&h>=0?p.push(h):(u=this.dataSource.getFieldIndex(i[l]))>=0&&p.push(u);if(p.length>0){var _=n.itemCount;r=s?Math.min(_-1,r):Math.max(0,r),(a=(s?r>=0:r<_)?n.findItem(p,o,t,r,s?0:_-1):-1)<0&&t.wrap&&(s?r<_-1:r>0)&&(a=n.findItem(p,o,t,s?_-1:0,s?r+1:r-1))}a>=0&&t.select&&(d=this.getIndex(a,e.Utils.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(d,!0,!0))}return a},C.prototype.searchCell=function(t){var o,n,r,s=this.itemSource,a=s&&s.dataSource,l=s.itemCount,h=t.fields=e.Utils.makeArray(t.fields),u=t.columns=e.Utils.makeArray(t.columns),d=[],c=null;if(a)if(!h&&u)for(o=0,n=u.length;o<n;o++){var p=this.columnByName(u[o]);if(p instanceof i.DataColumn){if(p.dataIndex<0)throw new Error("invalid search Column "+u[o]);d.push(p.dataIndex)}}else for(o=0,n=(h=h||a.getOrgFieldNames()).length;o<n;o++)r=parseFloat(h[o]),!isNaN(r)&&r>=0?d.push(r):d.push(a.getFieldIndex(h[o]));t instanceof _t.SearchCellOptions||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=l-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=d.length-1)),t=new _t.SearchCellOptions(t));var _=t.wrap,f=t.select,g=t.value,m=t.reverse;if(a&&d&&d.length>0&&null!=g){if(d.length>0){var y=m?Math.min(l-1,t.startIndex):Math.max(0,t.startIndex),v=Math.max(m?-1:0,t.startFieldIndex),C=m?y>=0:y<l,w=m?y<l-1||v<d.length:y>0||v>0,x=m?0:l-1;!(c=C?s.findCell(d,g,t,y,x,v):null)&&_&&w&&(c=s.findCell(d,g,t,m?l-1:0,y,m?v:0)),c&&(c.fieldName=a.getOrgFieldName(c.fieldIndex))}if(c&&f){var b=void 0;(b=u?this.getIndex(c.itemIndex,e.Utils.pick(this.columnByName(u[c.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(c.itemIndex,e.Utils.pick(this.columnByField(c.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(b,!0,!0)}}return c},C.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},C.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},C.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},C.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},C.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},C.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},C.prototype.checkAll=function(t,e,i,o){var n=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,o,n)},C.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},C.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var o=t[0],n=t[t.length-1],r=o.index,s=n.index,l=this.checkBar.merges,h=l.getRoom(a.CellIndex.temp(this,r,null));r=Math.min(r,h?h.head:r),h=l.getRoom(a.CellIndex.temp(this,s,null)),s=Math.max(s,h?h.tail:s),t=[];for(var u=r;u<=s;u++){var d=this.getItem(u);d.checkable&&d.isDataRow&&t.push(d)}}for(u=0;u<t.length;u++)t[u].checkable&&t[u].dataRow>=0&&i.push(t[u]);var c=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),i.length>0&&this._items.checkItems(i,c,!0)}},C.prototype.checkItem=function(t,e,i,o){var n=this.getItem(t);n&&this._items.checkItem(n,e,i,o)},C.prototype.checkRow=function(t,e,i,o){var n,r=this.getItemIndexOfRow(t);r>-1&&(n=this.getItem(r))&&(n=n instanceof H.EditItem?n:null),(n=n||this.getItemOfRow(t,!0))&&this._items.checkItem(n,e,i,o)},C.prototype.checkItems=function(t,e,i){var o=this._items.getItemsByIndices(t);this._items.checkItems(o,e,i)},C.prototype.checkRows=function(t,e,i){var o=this._items.getItemsByRows(t,!0);this._items.checkItems(o,e,i)},C.prototype.setAllCheck=function(t,e){var i=this.checkBar.exclusive;if(this._headView.allChecked=t,e&&(!i||!t)){var o=this.checkBar;this.checkAll(t,o.visibleOnly,o.checkableOnly,!1)}},_dp(C,"allChecked",{get:function(){return this._headView.allChecked}}),C.prototype.resetCheckables=function(){},C.prototype.applyCheckables=function(){},C.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},C.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},C.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},C.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},C.prototype.getValueAt=function(t,e){var o=this.getItem(e),n=t.firstColumn;if(n instanceof i.DataColumn)return o&&o.getData(n.dataIndex)},C.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},C.prototype.getDistinctItemValues=function(t,i,n){void 0===i&&(i=-1),void 0===n&&(n=m.SortDirection.ASCENDING);var r=this.columnByField(t);if(!r)return null;if(0!=i){var s=r.getField().dataType,a=[],l=[];return this._items._rs.getAllItems().forEach((function(e){if(e instanceof o.GridRow||e instanceof vt.TreeItem){var i=e.getData(t);switch(s){case m.ValueType.NUMBER:null!=i&&isNaN(i)||a.indexOf(i)<0&&a.push(i);break;case m.ValueType.DATE:case m.ValueType.DATETIME:i?l.indexOf(i.getTime())<0&&(l.push(i.getTime()),a.push(i)):a.indexOf(i)<0&&a.push(i);break;default:a.indexOf(i)<0&&a.push(i)}}})),n!==m.SortDirection.NONE&&(e.Utils.included(s,m.ValueType.DATETIME,m.ValueType.DATE,m.ValueType.NUMBER)?a.sort((function(t,e){return t-e})):a.sort(),n===m.SortDirection.DESCENDING&&a.reverse()),i<0?a:a.slice(0,i)}return null},C.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var n=e.dataIndex;if(n>=0){var r=t.item;if(r instanceof o.GridRow||r instanceof vt.TreeItem){var s=r.getData(n);if(e instanceof i.SeriesColumn)return ht.SeriesCell.getText(s);var a=new i.ColumnStyle,l=this._body.getCellFormatters(e,null,t,a);return ht.DataCell._getDisplayText(this,r,e,s,l)}if(r instanceof o.GroupFooter){var h=e.groupFooters.get(r.$_footerIndex);s=ut.RowGroupFooterCell.getValue(r,e),l=this._rowGroup.getFooterCellFormatters(h,null);return ut.RowGroupFooterCell.$_displayText(r,e,s,l)}}}return""},C.prototype._fitLayoutWidth=function(t,i){var o,n,r=function(t){var i=(0,e.getWin)(t).getComputedStyle(t),o={};if(i){u=i.paddingLeft;var n=parseInt(u.substr(0,u.indexOf("px")));d+=n>0?n:0,u=i.paddingRight,n=parseInt(u.substr(0,u.indexOf("px"))),d+=n>0?n:0,o={fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontStyle:i.fontStyle}}return{w:d,font:o}};if(!t.visible)return 0;var s=this.itemSource,a=this.getIndex(this.topIndex,t.firstColumn),l=t.firstColumn.header,h="",u="",d=0,c=0,p=0,_=null===(n=null===(o=this.getHeaderCellAt(t))||void 0===o?void 0:o.cell)||void 0===n?void 0:n.firstElementChild;if(i&&_){var f=r(_),g=f.w,y=f.font;c=g+this.container.measureText("rg-header-cell",l.displayText,y)+2}else i&&(p=e.Utils.getTextLength(h),c=d+this.container.measureText("rg-header-cell",l.displayText,null)+2);var v,C=this.getBodyCellAt(a,!1),w=C&&C.renderer2&&C.renderer2._dom;if(w){var x=r(w),b=x.w;v=x.font,d=b}for(var I=0,E=s.itemCount;I<E;I++)a.itemIndex=I,u=this.getDisplayText(a),e.Utils.getTextLength(u)>p&&(p=e.Utils.getTextLength(u),h=u);if(p>0){d+=this.container.measureText("rg-data-cell",h,v)+2;var S=t.getDataColumn(),R=S.editor,T=this.delegate.getCellEditor(U.CellEditor.getEditorType(R));T.hasButton(this.displayOptions.showNativeEditButton,R)&&(d+=this.body.editButtonWidth*T.buttonCount),S.button!==m.CellButton.NONE&&(d+=this.body.cellButtonWidth)}return Math.max(d,c)},C.prototype.fitLayoutWidth=function(t,e,i,o){var n=0;function r(t,e){var i=this.getHeaderCellAt(t);if(o&&i){var n=i.textSpan,r=n.style.whiteSpace;n.style.whiteSpace="nowrap";var s=n.getBoundingClientRect().width;return n.style.whiteSpace=r,s+=i.expander?i.expander.getBoundingClientRect().width:0,Math.max(s+6,e)}return e}return o=null==o||o,t instanceof s.CellLayoutColumnItem?n=this._fitLayoutWidth(t,o):t instanceof s.CellLayoutGroupItem&&(n=function t(e){for(var i=e.direction===s.ColumnLayoutDirection.HORIZONTAL,n=0,a=0,l=e.visibles;a<l.length;a++){var h=l[a],u=0;h instanceof s.CellLayoutColumnItem?(u=this._fitLayoutWidth(h,o),1===h._defColSpan&&(h.cellWidth=u)):h instanceof s.CellLayoutGroupItem&&(u=t.call(this,h),u=r.call(this,h,u)),n=i?n+u:Math.max(n,u)}return n}.call(this,t),n=r.call(this,t,n)),i&&i>this.displayOptions.minCellWidth&&(n=Math.max(n,i)),e&&e>this.displayOptions.minCellWidth&&(n=Math.min(n,e)),t.cellWidth=n},C.prototype.$_fitHeaderHeight=function(){var t=this._headerView.getMeasureHeights(),e=t.reduce((function(t,e){return t+e}),0);return this.header.heights=t.slice(),this.header.height=e,e},C.prototype.fitHeaderHeight=function(){this._loading?this._fitHeader=!0:this.$_fitHeaderHeight()},C.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.movable)},C.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0,e))return this._doMoveRows(t,e)},C.prototype.moveSelection=function(t,e){var i=this.getSelectedItems(!1);if(i&&i.length>0){var o=i[0],n=o.index,r=this.itemSource;if(t>0&&n+t<=r.itemCount||t<0&&n>0){var s=this._getMoveTarget(e,i,n,t);if(this.moveRows(i,s)){t=this.isTree()?o.index-n:t;var a=this.getSelection();a.moveRow(t),this._selections.clear(),this._selections.$_addItem(a);var l=this._focusedIndex.clone();l.itemIndex=this.isTree()?o.index:n+t,this.setFocusedIndex(l,!1,!0,!1)}}}},C.prototype.isSelectedItem=function(t){return this.selections.containsItem(t,null)},C.prototype.isSelectedLayout=function(t){return this.selections.containsLayout(t)},C.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.isFiltered()&&e.push(o)}return e},C.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},C.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},C.prototype.closeProgress=function(){this._progressManager.close()},C.prototype.showLoading=function(t){this._progressManager.loaderShowing()||(t?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},C.prototype.hideLoading=function(){this._progressManager.closeLoader(),void 0!==this._progressManager._gridDisabled&&(this.container.disabled=this._progressManager._gridDisabled)},C.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},C.prototype.endExportProgress=function(){this._progressManager.close()},C.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},C.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},C.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},C.prototype.layoutExpandAll=function(t,e){this._activeCellLayout.expandAll(t,e)},C.prototype.isRecycleMode=function(){return this.displayOptions.refreshMode===m.RefreshMode.RECYCLE},C.prototype.invalidateGridObject=function(){var t=!1,e=this._gridObjects;return e.forEach((function(e){e instanceof _.GridBody||(t=t||e.dirty)})),t&&e.forEach((function(t){t instanceof _.GridBody||(t._dirty=!0)})),t},C.prototype._getCssSelector=function(){return""},_dp(C,"container",{get:function(){return this._container}}),C.prototype._createDelegate=function(){return new j.GridDelegate(this)},C.prototype._createLayoutManager=function(){return new b.GridLayoutManager(this)},C.prototype._createEditController=function(){return e.Utils.isMobile()?new kt.MobileEditController(this):new W.DefaultEditController(this)},C.prototype._createSelectionLayer=function(){return e.Utils.isMobile()?new dt.MobileSelectionLayer(this,"mobileSelectionLayer"):new N.SelectionLayer(this,"selectionLayer")},C.prototype._initDom=function(t){d.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},C.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;d.prototype.setRect.call(this,t),e&&(this._dirty=!0)},C.prototype._doDraw=function(t){},C.prototype.$_containerResized=function(){e.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10),this._columnsDirty=!0},C.prototype._doCreateOtherElements=function(){},C.prototype._doContentPanesCreated=function(){},C.prototype._createSidePane=function(){return null},C.prototype.isSidePaneVisible=function(){return!1},C.prototype._createBodyView=function(t){return new w.GridBodyElement(this.doc,t)},C.prototype._createFixedBodyView=function(t){return new w.FixedBodyElement(this.doc,t)},C.prototype._createRightBodyView=function(t){return new w.RightBodyElement(this.doc,t)},C.prototype._initStyles=function(){},C.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},C.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},C.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),!t&&!this._cellLayoutDirty&&this.clearAddSelection(!0)},C.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},C.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},C.prototype._visualObjectChanged=function(t){this.invalidateLayout()},C.prototype._addGridObject=function(t){this._gridObjects.push(t)},C.prototype.addElement=function(t){this._rootElement.addChild(t)},C.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},C.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},C.prototype.$_layout=function(t){this._doLayout(t)},C.prototype.$_detectWidth=function(){return!this.displayOptions.watchDisplayChange&&this.layoutManager.syncHeight()},C.prototype.$_beforeRender=function(){this._itemCheckChanged&&this._syncHeadCheck([]),this._beforeCount=this.layoutManager.itemCount,this.$_detectWidth()&&(this._beforeWidth=this.container.getContainerWidth())},C.prototype.$_afterRender=function(){var t=this.$_detectWidth()&&this._beforeWidth!=this.container.getContainerWidth();if(this._layoutManager.needRelayout()||this._fitHeader||t)this._fitHeader&&this.$_fitHeaderHeight(),this._fitHeader=!1,this.invalidateLayout();else{if(this._topIndexChanged&&(this._topIndexChanged=!1,this._needRefresh=!0,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this.leftPos!==this._prevLeftPos&&(this._fireLeftPosChanged(this.leftPos),this._prevLeftPos=this.leftPos),this._beforeCount<this.layoutManager.itemCount&&(this._needRefresh=!0),this._resetTdFocus&&this._container._focused){var i=this.focusedIndex,o=this.doc;e.Utils.isAncestorOf(this.container._containerDom,o.activeElement,null)&&this.accessibility&&this.isValid(i)&&this.layoutManager.cellIsVisible(i)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,this.getBodyViewAt(i).refreshTdFocused(i,!0)}.bind(this),20)),delete this._resetTdFocus}[this.fixedBodyView,this.bodyView,this.rightBodyView].forEach((function(t){if(t.visible)for(var e=t._tbody.rows,i=0,o=e.length;i<o;i++)e[i].recycle=!1})),this._fireDataLoadComplated(),this._horzScrolled&&this._needRefresh&&(this._needRefresh=!1),this._horzScrolled=!1,this._dataChanged=!1,this._needPosition=!1,this._itemCheckChanged=!1,this._fitHeader=!1,this._watermarkLayer&&this._watermarkLayer.refresh()}},C.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},C.prototype._doLayout=function(t){var i=this._layoutManager;this._resetting=!1;try{this.$_doLayout(i,t)}finally{this._loading=!1,this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var o=i.bodyBounds.clone();o.topBy(i.topContentBounds.bottom),this._emptyView.setBounds(0,o.y,this.width,o.height)}if(this._debugging&&this._debugView.layout(),this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),i.itemCount>0){var n=i.topIndex,r=n+i.fullItemCount;this._topIndexChanged=n!==this._prevTop,this._prevTop=n,r==this._prevLast||r!=this.itemCount||e.Utils.included(this.displayOptions.syncGridHeight,[m.SyncGridHeight.ALWAYS,m.SyncGridHeight.OVER])||setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=r}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._editController.remainFocusing(!1),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},C.prototype.$_doLayout=function(t,e){var i=this._displayOptions,o=this._fixedOptions,n=e.clone(),r=i.vscrollBar?this._scrollBarWidth:0,s=i.hscrollBar?this._scrollBarHeight:0;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,i.minCellWidth),this._columnsDirty&&this._activeCellLayout.$_prepareLayout(this,o.colCount,o.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate();var a=t.topIndex,l=t.leftPos;if(t.measure(n,this._leftPos,this._topIndex,r,s),a!==t.topIndex){var h=t.topIndex-a,u=[this.fixedBodyView,this.bodyView,this.rightBodyView];this.isRecycleMode()&&!this._dataLoad&&h&&Math.abs(h)<t.fullItemCount/2?u.forEach((function(e){e&&e.visible&&e.reArrangeRows(t,h)})):u.forEach((function(t){t&&t.cleanRecycle()}))}if(this._horzScrolled=this._horzScrolled||l!==t.leftPos,t.layout(n),this._leftPos=t.leftPos,this._topIndex=t.topIndex,this.displayOptions.refreshMode!==m.RefreshMode.RECYCLE){var d=this.container._containerDom;n=new x.Rectangle(0,0,d.clientWidth,d.clientHeight)}this.$_updateScrollBars(t,n),this._layoutSelectionViews(),this._layouted=!0},C.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},C.prototype.$_updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,o=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,o),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var n=this.itemCount,r=n-t.fixedItemCount,s=Math.min(t.fullItemCount,n-t.topIndex);this._vscrollBar.setProperties(0,r,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);e&&this.$_layoutScrollBars(t,e)},C.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,n=this._hscrollBar,r=this._vscrollBar;t.hscrollBar&&(n.setBounds(e.x,e.bottom-o,e.width-i,o),n.layoutContent()),t.vscrollBar&&(r.setBounds(e.right-i,e.y,i,e.height-o),r.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},C.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},C.prototype._canMerge=function(){return!1},C.prototype._populateMerges=function(){this._needMerge=!0},C.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,o=t.length;e<o;e++){var n,r=t[e],s=r&&r.layout;if(s&&s.canMerge())if((n=s.merges)||(n=new V.ColumnMergeManager(s)),n.clear(),r instanceof i.DataColumn&&r.mergeGrouped)this.getGroupLevel(r.dataIndex)>0&&n.initialize(V.GridMergeRule.INIT_COUNT);else n.initialize(V.GridMergeRule.INIT_COUNT)}if(this._checkBar.canMerge())(n=this._checkBar.merges||new p.CheckBarMergeManager(this._checkBar)).clear(),n.initialize(V.GridMergeRule.INIT_COUNT)}},C.prototype._doRowGroupMergeModeChanged=function(){},C.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},C.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},C.prototype._removeSelectionView=function(t){this._selectionLayer.removeView(t)},C.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},C.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var o=this.container.defaultTool,n=this._currentRow,r=this._displayOptions.rowChangeDelay,s=t||r<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)):r>0&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)}.bind(this),r)),!0}}return!1},C.prototype.$_doSetFocusedIndex=function(t,e,i,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),!t){if(n)return!1;t=this.getIndex(-1,null)}var s,l,h;if(!this.isValid(t)&&n&&(t=t.clone()).normalize(this),!this.isValid(t)){var u=this.dataSource;if(!u||0==u.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}var d=1===this.selections.count?this.getSelection(0):null;if(a.CellIndex.areEquals(t,this._focusedIndex))return!(d&&d.single&&this.selections.containsCell(t))&&this.clearAddSelection(e,r),!0;var c=this._editOptions,p=this._focusedIndex.clone(),_=this.itemSource,f=this.container.defaultTool,g=this.layoutManager;if(this.editOptions.currentChangingFirst?!this._fireCurrentChanging(p,t)||!this._editController.focusedIndexChanging():!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(p,t)){var m=this.activeTool.dragTracker;return m instanceof wt.SelectTracker&&(m.dragging?m.cancel():this.activeTool.dragTracker=null),!1}var y=p.item;if(!this.isItemEditing(y)||this.isItemEdited(y)||t.itemIndex==p.itemIndex||y.itemState!==o.ItemState.UPDATING||c.commitWhenNoEdit)if(_&&t.itemIndex!=p.itemIndex)try{if(y)switch(y.itemState){case o.ItemState.INSERTING:if(!this.commit(c.forceInsert,!0))return this.cancel(!0),!1;break;case o.ItemState.APPENDING:if(!this.commit(c.forceAppend,!0))return this.cancel(!0),!1;break;case o.ItemState.UPDATING:if(!this.commit(c.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof z.ValidationError)return(t=this._fireValidationFail(y.index,t.column,t))&&alert(c.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof z.AbortError)return!1;throw t}else y&&this.isItemEditing(y)&&c.validateOnExit&&this.invalidateLayout();else this.cancel(!0);f.focusedIndexChanging(t),this._focusedIndex.assign(t),this.$_checkFocusedLayout(),h=this.getBodyCellAt(p,!1),l=this.getBodyCellAt(t,!1),this.isValid(p)&&(s=g.getBodyView(p)).$_focusChanged(this,h,!1),this.isValid(t)&&(s=g.getBodyView(t)).$_focusChanged(this,l,!0),_ instanceof H.EditableItemProvider&&_.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(p,t,!1),f.focusedIndexChanged(p,t);var v=this._focusedIndex,C=this.isValid(v);d&&(0,N.isSingleSelectionStyle)(d.style)&&this.selections.containsCell(v)||this.clearAddSelection(e,r),this._layouted&&this._refreshSideViews();var w=!a.CellIndex.areEquals(v,g._prevFocused);if(i||w)if(this.$_makeFocusedIndexVisible())this._resetTdFocus=!1,this.accessibility&&!this.isEditing()&&this.isValid(v)&&this.isValid(p)&&(s=this.getBodyViewAt(p),"mousedown"!==this._eventFrom&&p.itemIndex!==v.itemIndex&&s&&s.tdClone(p),this._resetTdFocus=!0);else{var x,b;if(this._editController.resetEditor(!1),this.isValid(v)&&this.getItem(v.itemIndex).canEdit()&&this._editController.prepareEditor(v),this.isValid(p))if(x=this.getBodyViewAt(p))(b=x.getRowView(p.item))instanceof mt.RowElement&&b.resetButtons(this,h,l);if(!this.container.isLayoutNeeded()&&C)if(x=this.getBodyViewAt(v))(b=x.getRowView(v.item))instanceof mt.RowElement&&b.resetButtons(this,h,l);this.accessibility&&!this.isEditing()&&this.isValid(v)&&this.layoutManager.cellIsVisible(v)&&(s=this.getBodyViewAt(v))&&s.refreshTdFocused(v,!0)}return this._fireCurrentChanged(this._currentIndex.assign(v)),this.$_checkCurrentRow(),!0},C.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},C.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},C.prototype.makeCellVisible=function(t){if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},C.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},C.prototype.makeItemVisible=function(t){if(t>=0){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},C.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(arguments.length>0)||t,this._editController.cancelEditor(t))},C.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},C.prototype.$_cancelItem=function(t,i){void 0===i&&(i=!1);var o=e.Utils.cast(this.itemSource,H.EditableItemProvider);return!!(o&&t&&o.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),o.cancel(),i&&this.resetFocusedIndex(),!0)},C.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;return!(!this.isValid(i)||!this.$_cancelItem(i.item))&&(i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof H.DummyEditItem&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0)},C.prototype.commitEditor=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEditing()&&this.editController.commitEditor(t,!1,!0,e)},C.prototype.$_commitItem=function(t,i,n){var r=e.Utils.cast(this.itemSource,H.EditableItemProvider),s=this.validationManager;if(r&&t&&r.isEditing(t)&&(i||r.isEdited(t))){var a=(0,o.ItemState_isInserting)(t.itemState);try{s.validateRow(t,a,!1,!1),this._rowBarContainer.stateError=void 0}catch(t){throw t instanceof z.ValidationError&&(t.level=t.level||m.ValidationLevel.ERROR,!t.column&&(this._rowBarContainer.stateError=t)),t}if(!r.commit()){if(n)throw new z.AbortError("Commit failed.");return!1}return t.dataId>-1&&s.cloneError(-1,t.dataId),s.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&t.dataId>-1&&s.clearInvalidCells(t.dataId),!0}},C.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var o=this.focusedIndex,n=!0;return!!this.isValid(o)&&(this.isEditing()&&(n=this.editController.commitEditor(!0,!1,i,t),this.editController.invalidateEditor()),n&&this.$_commitItem(o.item,t,e))},C.prototype.editorCancel=function(t,e){this._doCellCancel(e)},C.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},C.prototype.editorCanceled=function(){this.activeTool.resetFocused()},C.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},C.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},C.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},C.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},C.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var o=0;o<t.columnCount;o++){var n=t.getColumn(o);if(n instanceof i.DataColumn&&n.dataIndex==e){var r=n.getField();return r&&r.defaultValue}}}for(var o=this.dataSource.fieldCount,n=[],r=0;r<o;r++)n.push(void 0);for(r=0;r<o;r++){var s=e(this,r);s&&(n[r]=s)}return n},C.prototype.$_getColumnDefaults=function(t){for(var e=0,o=this.columnCount;e<o;e++){var n=this.getColumn(e);n instanceof i.DataColumn&&null!=n.defaultValue&&(t[n.dataIndex]=n.defaultValue)}},C.prototype.$_getItemDefaults=function(t,e){},C.prototype.$_readDefaultValues=function(t){},C.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},C.prototype.sortColumn=function(t,e){t&&(this.sortingOptions.style==m.SortStyle.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(m.SortStyle.INCLUSIVE,t):this.sortColumnWithStyle(m.SortStyle.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions.style,t))},C.prototype.sortColumnWithStyle=function(t,e){if(!e)throw new Error("column is null");if(!(this.isItemEditing(null)||e.dataIndex<0)){var i=this._sortingOptions.textCase;t==m.SortStyle.EXCLUSIVE?e.sortOrder<0?this.orderBy([e],[m.SortDirection.ASCENDING],[i]):e.sortDirection==m.SortDirection.ASCENDING?this.orderBy([e],[m.SortDirection.DESCENDING],[i]):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.orderBy([e],[m.SortDirection.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=m.SortStyle.INCLUSIVE&&t!=m.SortStyle.REVERSE||(e.sortOrder<0?this.$$_addSort(e,m.SortDirection.ASCENDING,i,t==m.SortStyle.REVERSE):e.sortDirection==m.SortDirection.ASCENDING?this.$$_addSort(e,m.SortDirection.DESCENDING,i,t==m.SortStyle.REVERSE):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.$$_addSort(e,m.SortDirection.ASCENDING,i,t==m.SortStyle.REVERSE):this.unsortColumnWithStyle(t,e))}},C.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],n=t.length,r=0;r<n;r++){var s=t[r];o.push(s.dataIndex)}this._sortItems(o,e,i)}},C.prototype.unsortColumnWithStyle=function(t,e){if(!this.isItemEditing()&&e){var i=this.getSortFields(),o=this.getSortDirections(),n=this.getSortCases(),r=i.indexOf(e.dataIndex);r<0||(t==m.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):t!=m.SortStyle.INCLUSIVE&&t!=m.SortStyle.REVERSE||(i.splice(r,1),o.splice(r,1),n.splice(r,1),this._sortItems(i,o,n)))}},C.prototype.$$_addSort=function(t,e,i,o){var n=this.getSortFields(),r=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=n.indexOf(a);l>=0?(r[l]=e,s[l]=i):o?(n.splice(0,0,a),r.splice(0,0,e),s.splice(0,0,i)):(n.push(a),r.push(e),s.push(i)),this._sortItems(n,r,s)},C.prototype._sortItems=function(t,e,i){var o=this,n=t.concat(),r=e?e.concat():[],s=i?i.concat():[];this._fireSorting(n,r)&&this._toastManager.show(this.sortingOptions.toast,!0,(function(){var e=o.sortingOptions.keepFocusedRow&&o.focusedIndex?o.focusedIndex.dataRow:-1;if(o._doSortItems(t,r,s),e>=0){var i=a.CellIndex.temp(o,o.getItemIndexOfRow(e),o.focusedIndex.column);o._editController.remainFocusing(!0),o.setFocusedIndex(i,!0,!0)}}))},C.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=n(o))}return e;function n(t){var e=t.grid;return function(i,o,n){var r=e.getItemOfRow(o,!0),s=e.getItemOfRow(n,!0),a=ht.DataCell.getText(r,t),l=ht.DataCell.getText(s,t);return a==l?0:null==a?null==l?0:-1:null==l||a>l?1:a<l?-1:0}}},C.prototype._doSortItems=function(t,e,i){},C.prototype.getSortFields=function(){return null},C.prototype.getSortDirections=function(){return null},C.prototype.getSortCases=function(){return null},C.prototype.canFiltering=function(){return this._fireFiltering()},_dp(C,"filterSelecting",{get:function(){return this._filterSelector.opened}}),_dp(C,"filterSelector",{get:function(){return this._filterSelector}}),C.prototype.applyFilters=function(t,e){var i=this;return!this.isItemEditing(null)&&(!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,(function(){i._editController.remainFocusing(!0),i.$_doApplyFilters(t,e)})),!0))},C.prototype.$_findFilterView=function(t){if(!t)return{};for(var e,i=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],o=0;o<i.length;o++)if(i[o].visible&&(e=i[o].tableCellByLayout(t)))return{view:i[o],cell:e};return{}},C.prototype.filterOperatorCallback=function(t,e,i){var o=this.layoutByName(i.column),n=this.$_findFilterView(o),r=n.view,s=n.cell;s&&r.operatorChange(s,e,o,i)},C.prototype.clearInlineFilter=function(t){var e=t&&t.layout;if(e){var i=this.$_findFilterView(e),o=i.view,n=i.cell;o.clearInput(n,t)}else[this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach((function(t){return t.clearInput()})),this.$_doApplyFilters(null,null)},C.prototype.inlineFilterFocus=function(t){var e=this.$_findFilterView(t),i=e.view,o=e.cell;i.setFocus(o)},C.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),i!==this._items.itemCount&&(this.topIndex=0),this._filterRunning=!1}},C.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&o.activeCount>0)for(var n=0,r=o.count;n<r;n++){var s;(s=o.getItem(n)).active&&this._items.addFilter(i.dataIndex,s)}if((o=i._inlineFilters)&&o.activeCount>0)(s=o.getItem(0)).active&&this._items.addFilter(i.dataIndex,s)}},C.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},C.prototype.canGrouping=function(){return!1},C.prototype.$_layoutRowHover=function(t,e,i){var o=this._layoutManager,n=o.footerBounds.y+o.contentBounds.y,r=this.getBodyView(t.cell);if(r){var s=o.getTableRowIndex(e);if(!(s<0)){s=r.getViewIndex(s);var a=o.getTableItemBounds(s);switch(a.y+=o.contentBounds.y+o.bodyBounds.y,a.bottom>n&&(a.bottom=n),i){case m.RowMaskType.DATA:a.x=this._fixedContentPane.x,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case m.RowMaskType.FILL:a.x=0,a.width=this.width;break;case m.RowMaskType.CELL:var l=r.pointByContainer(0,0),h=r.getCellRect(o,t,!0);a.x=h.x+l.x,a.width=h.width;break;case m.RowMaskType.ROW:a.x=0,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(a)}}},C.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var o=this.activeTool;if(o instanceof A.GridSelectionTool&&this.canHovering){var n=this.container.getTableCell(o.mouseEventTarget);if(i&&this.isRecycleMode()){var r=a.CellIndex.temp(this);this.layoutManager.mouseToIndex(n,t,e,r);var s=this.getBodyCellAt(r);s&&(n=s.cell)}var l=this.getCellType(n),h=!1,u=!1,d=!1;if("data"===l){var c=this.getBodyView(n).bodyCellByCell(n);this.$_setHoveredCell(c,e,i),o.$_setHoveredCell(c,t,e),h=!0}else if("header"===l){c=this.getHeaderView(n).tableCellByCell(n);o.$_setHoveredHeaderCell(c,t,e),u=!0}else if("state"===l&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var p=this._rowBarContainer.rowOf(n);this.isItemEditing(this.getItem(p))&&(d=!0,o.$_showStateError(n,this._rowBarContainer.stateError.message))}return!(h||u||d)&&o._hideTooltip(),h||this.$_setHoveredCell(null,e,!1),!0}},C.prototype.$_getCellAt=function(t,e){var i=this.getBodyView(t),o=this.layoutManager,n=this.getDataCellIndex(t,this._currentIndex),r=i.getCellAt(o,n);if(r&&r.merged){var s=o.getTableRowIndex(e);if(s<0)return r;var a=i.getRowIndex(s);return n.itemIndex=Math.min(Math.max(r.item.index,a),r.item.index+r.rowSpan-1),i.getCellAt(o,n)}return r},C.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1);var o=t?this.$_getCellAt(t.cell,e):t;if(i||o!==this._hoveredCell){if(this._hoveredCell&&this._hoveredCell.cell)this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1);if(o)this.getBodyView(o.cell).$_mouseEnteredChanged(this,o,!0);this._doHoveredCellChanged(this._hoveredCell=o)}(i||e!=this._hoveredY)&&(this._hoveredY=e,this.$_resetRowHover())},C.prototype.$_resetRowHover=function(){var t=this._displayOptions.rowHoverType;this._hoveredCell&&t&&t!=m.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,t)):this._rowHoverView.visible=!1},C.prototype.$_resetFocusRender=function(t,e){var i=this.getBodyCellAt(this.focusedIndex,!0),o=i&&i.merged&&(i.renderer2||i.head.renderer2),n=this.canMergeEditing(i);if(o&&o.refreshFocusChanged){var r=this.layoutManager,s=this.getBodyViewAt(this.focusedIndex),a=s.getCellRectAt(r,this.focusedIndex,!1),l=s.getCellRectAt(r,this.focusedIndex,!0),h=a.top-l.top+a.height/2-l.height/2;o.moveClickElement(h,n)}},C.prototype._doHoveredCellChanged=function(t){},C.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},C.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){var o=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var n=0,r=void 0,s=i.visibleOnly,a=s?this._items.itemCount:(r=this.getAllItems()).length,l=0;l<a;l++){var h=s?this._items.getItem(l):r[l];if((h.isDataRow||o)&&h.checkable){if(!h.checked){n=-1;break}n++}}this._headView.allChecked=n>0}}},C.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},C.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var o=this.getItem(t);o&&(this._items.setRowHeight(o,e,!0),i&&this.refreshView())},C.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items.clearRowHeights(t)&&this.refreshView()},C.prototype.setFocusedClass=function(t,i){if(this.displayOptions.useFocusClass){var o=this.getBodyCellAt(t,!0);o&&o.cell&&(i?e.Utils.addClassName(o.cell,"rg-focused-cell"):e.Utils.removeClassName(o.cell,"rg-focused-cell"))}},C.prototype.setFocusedRowClass=function(t,i){function o(t,o){var n=t.getRowView(o);if(n)for(var r=0,s=n._getTableRows(this.layoutManager);r<s.length;r++){var a=s[r];i?e.Utils.addClassName(a,"rg-focused-row"):e.Utils.removeClassName(a,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var n=t.item;o.call(this,this.bodyView,n),o.call(this,this.fixedBodyView,n),o.call(this,this.rightBodyView,n)}},C.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},C.prototype.topIndexChanging=function(t,e,i,o){return this._fireTopIndexChanging(t,e,i,o)},C.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},C.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);e.length>0&&this.dataSource.removeRows(e)},C.prototype.$_dropData=function(t,e,i){var o=this.dataDropOptions,n=o.callback,r=i.index;if(n)n(t.handler,e,this.handler,i.index,i.column);else if(r>=0){var s=t.getRowsOfItems(e),a=void 0,l=o.fieldMapCallback;if(l&&(a=l(t.handler,e,this.handler,r,i.column)),a=a||o.fieldMap,r<this.itemCount){var h=this.getRowOfItem(r);h>=0&&this.dataSource.insertRowsFrom(t.dataSource,a,s,h)}else this.dataSource.appendRowsFrom(t.dataSource,a,s)}o.dropMode==ct.DataDropMode.MOVE&&t.$_clearDropData(e)},C.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);if(t&&t.spanned)t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout}},C.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},C.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},C.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},C.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},C.prototype.setCheckFieldIndex=function(t){this._items.setCheckFieldIndex(t)},C.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent("onGridBaseCurrentChanging",t,e)},C.prototype._fireCurrentChanged=function(t){this.fireEvent("onGridBaseCurrentChanged",t)},C.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent("onGridBaseCurrentRowChanged",t,e)},C.prototype._fireValidateCell=function(t,e,i){this.fireEvent("onGridBaseValidateCell",t,e,i)},C.prototype._fireValidateRow=function(t,e,i){this.fireEvent("onGridBaseValidateRow",t,e,i)},C.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent("onGridBaseValidationFail",t,e,i)},C.prototype._fireCellClicked=function(t){this.fireEvent("onGridBaseCellClicked",t)},C.prototype._fireCellDblClicked=function(t){this.fireEvent("onGridBaseCellDblClicked",t)},C.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent("onGridBaseCellItemClicked",t,e)},C.prototype._fireColumnCheckedChanged=function(t){this.fireEvent("onGridBaseColumnCheckedChanged",t,t.checked)},C.prototype._firePopupMenuPopup=function(t,e,i,o,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i,o,n)},C.prototype._fireMenuItemClicked=function(t,e){this.fireEvent("onGridBaseMenuItemClicked",t,e)},C.prototype._fireContextMenuPopup=function(t,e,i,o,n){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i,o,n)},C.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent("onGridBaseContextMenuItemClicked",t,e)},C.prototype._fireCellButtonClicked=function(t){this.fireEvent("onGridBaseCellButtonClicked",t)},C.prototype._fireEditButtonClicked=function(t){this.fireEvent("onGridBaseEditButtonClicked",t)},C.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},C.prototype._fireTopIndexChanging=function(t,e,i,o){return this.fireObjectEvent("onGridBaseTopIndexChanging",t,e,i,o)},C.prototype._fireTopIndexChanged=function(t){this.fireEvent("onGridBaseTopIndexChanged",t)},C.prototype._fireLeftPosChanged=function(t){this.fireEvent("onGridBaseLeftPosChanged",t)},C.prototype._fireDataCellClicked=function(t){this.fireEvent("onGridBaseDataCellClicked",t)},C.prototype._fireDataCellDblClicked=function(t){this.fireEvent("onGridBaseDataCellDblClicked",t)},C.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent("onGridBaseRowsDeleting",t)},C.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent("onGridBaseRowInserting",t,e)},C.prototype._fireItemCommit=function(t,e){this.fireEvent("onGridBaseItemCommit")},C.prototype._fireSelectionChanged=function(t){return this.fireEvent("onGridBaseSelectionChanged",t)},C.prototype._fireSelectionAdded=function(t){return this.fireEvent("onGridBaseSelectionAdded",t)},C.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},C.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},C.prototype._fireSelectionResized=function(t){return this.fireEvent("onGridBaseSelectionResized")},C.prototype._fireSelectionEnded=function(t){return this.fireEvent("onGridBaseSelectionEnded",t)},C.prototype._fireUpdateStarted=function(t,e){this.fireEvent("onGridBaseUpdateStarted",t)},C.prototype._fireInsertStarted=function(t,e){this.fireEvent("onGridBaseInsertStarted",t,e)},C.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent("onGridBaseShowEditor",t,e,i)},C.prototype._fireShowEditCommand=function(t){return this.fireConfirmEvent("onGridBaseShowEditCommand",t)},C.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1,null),this.fireEvent("onGridBaseHideEditor",t)},C.prototype._fireEditChange=function(t,e){this.fireEvent("onGridBaseEditChange",t,e)},C.prototype._fireGetEditValue=function(t,e){this.fireEvent("onGridBaseGetEditValue",t,e)},C.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent("onGridBaseEditCommit",t,e,i)},C.prototype._fireEditCanceled=function(t){this.fireEvent("onGridBaseEditCanceled",t)},C.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent("onGridBaseItemEditCancel",t)},C.prototype._fireItemEditCanceled=function(t){this.fireEvent("onGridBaseItemEditCanceled",t)},C.prototype._fireEditSearch=function(t,e){this.fireEvent("onGridBaseEditSearch",t,e)},C.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",t,e)},C.prototype._fireCellEdited=function(t,e){this.fireEvent("onGridBaseCellEdited",t,e)},C.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent("onGridBaseEditRowChanged",t,e,i,o)},C.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent("onGridBaseEditRowPasted",t,e,i,o)},C.prototype._fireItemsPasted=function(t){this.fireEvent("onGridBaseRowsPasted",t)},C.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent("onGridBaseCellPasting",t,e)},C.prototype._fireItemChecked=function(t){this.fireEvent("onGridBaseItemChecked",t,t.checked)},C.prototype._fireItemsChecked=function(t,e){this.fireEvent("onGridBaseItemsChecked",t,e)},C.prototype._fireItemAllChecked=function(t){this.fireEvent("onGridBaseItemAllChecked",t)},C.prototype._fireErrorClicked=function(t,e){this.fireEvent("onGridBaseErrorClicked",e)},C.prototype._fireSorting=function(t,e){return this.fireConfirmEvent("onGridBaseSorting",t,e)},C.prototype._fireFiltering=function(){return this.fireConfirmEvent("onGridBaseFiltering")},C.prototype._fireKeyDown=function(t){return this.fireConfirmEvent("onGridBaseKeyDown",t)},C.prototype._fireWheel=function(t){return this.fireConfirmEvent("onGridBaseWheel",t)},C.prototype._fireKeyPress=function(t){this.fireEvent("onGridBaseKeyPress",t)},C.prototype._fireKeyUp=function(t){this.fireEvent("onGridBaseKeyUp",t)},C.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowTooltip",t,e)},C.prototype._fireShowHeaderTooltip=function(t,e,i){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",t,e,i)},C.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseColumnPropertyChanged",t,e,i,o)},C.prototype._fireLayoutPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseLayoutPropertyChanged",t,e,i,o)},C.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},C.prototype._fireCopy=function(t,e){return this.fireConfirmEvent("onGridBaseCopy",t,e)},C.prototype._firePaste=function(t,e){return this.fireConfirmEvent("onGridBasePaste",t,e)},C.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},C.prototype._fireCommandStackChanged=function(t,e){this.fireEvent("onGridBaseCommandStackChanged",t,e)},C.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},C.prototype.onPopupMenuManagerPopup=function(t,e,i,o,n,r){return this._firePopupMenuPopup(e,i,o,n,r)},C.prototype.onScrollBarScrolled=function(t,i,o,n){var r,s,a,l=this.displayOptions,h=this.fixedOptions,u=l.scrollMessageCallback,d=i===T.ScrollEventType.SCROLL_END;if(!d&&this.scrollOnEditing(),t.vertical){var c=-1;switch(i){case T.ScrollEventType.LINE:return void this.scrollRow(o);case T.ScrollEventType.PAGE:c=this.topIndex+o*t._page;break;case T.ScrollEventType.THUMB_TRACK:var p=l.scrollDuration;l.liveScroll||this._scrolledTime>0&&e.Utils.getTimer()-this._scrolledTime>p?(c=n,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new T.ScrollTipView(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(n,!0),s=this._vscrollBar.pos+h.rowCount,r=u?u(this.handler,t.vertical,s):String(s+1),this._vscrollBar.setText(r),p>0&&0==this._scrolledTime&&(this._scrolledTime=e.Utils.getTimer()));break;case T.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,c=n,d=!0;break;default:c=n}c>=0&&(this.topIndex=c)}else{var _=-1;switch(i){case T.ScrollEventType.LINE:_=this.leftPos+8*o;break;case T.ScrollEventType.PAGE:_=o>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case T.ScrollEventType.THUMB_TRACK:p=l.hscrollDuration;l.liveScroll||this._scrolledTime>0&&e.Utils.getTimer()-this._scrolledTime>p?(_=n,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new T.ScrollTipView(this.container)),this._hscrollBar.tipView=this._scrollTipView,(a=this._layoutManager.getPositionToVIndex(n))>-1&&(r=u?u(this.handler,t.vertical,a):this.getVisibleLayout(a).getDataColumn().header.displayText,this._hscrollBar.setText(r)),this._hscrollBar.setPosition(n,!0),p>0&&0==this._scrolledTime&&(this._scrolledTime=e.Utils.getTimer()));break;case T.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,_=n,d=!0;break;default:_=n}_>=0&&(this.leftPos=_)}d&&!e.Utils.isMobile()&&this.setFocus()},C.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},C.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!0,this.resetGrid(),this.$_refreshInvalidList(!0)},C.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this._itemCheckChanged=!0,this.refreshView(),!this._keepNullFocus&&this.setFocusedIndex(this.focusedIndex,!0),this.$_refreshInvalidList(!1)},C.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView()},C.prototype.onItemProviderItemInserted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},C.prototype.onItemProviderItemDeleted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},C.prototype.onItemProviderItemUpdated=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},C.prototype.onItemProviderCheckableChanged=function(t,e){this._itemCheckChanged=!0,this.refreshView()},C.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},C.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},C.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},C.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._itemCheckChanged=!0,this.checkBar.canMerge()&&this._populateMerges()},C.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},C.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},C.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},C.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},C.prototype.onItemProviderSorted=function(t){this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},C.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!this._loading,this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseFilteringChanged",e,i)},C.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},C.prototype.onItemProviderDataLoadComplated=function(t){this._prevLast=0,this._dataLoad=!0},C.prototype.$_focusEditItem=function(t){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&this.visibleLayoutCount>0&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)},C.prototype.$_beforeEditing=function(t,e){},C.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1)},C.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0)},C.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1)},C.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(e,i)},C.prototype.onItemEditCellUpdated=function(t,e,i,o,n){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(e,i,o,n)},C.prototype.onItemEditCommitting=function(t,e){},C.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView()},C.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem)},C.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},C.prototype.onItemEditCancelReuqest=function(t){this.cancel()},C.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},C.prototype.onSelectionChanged=function(t,e){this._refreshSideViews(),this._fireSelectionChanged(e)},C.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},C.prototype.onSelectionRemoved=function(t,e){this._removeSelectionView(e),this._fireSelectionRemoved()},C.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._refreshSideViews(),this._fireSelectionCleared()},C.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},C.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},C.prototype.onLayoutExpanding=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutExpanding",e)},C.prototype.onLayoutExpanded=function(t,e){this.fireEvent("onGridBaseLayoutExpanded",e)},C.prototype.onLayoutCollapsing=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutCollapsing",e)},C.prototype.onLayoutCollapsed=function(t,e){this.fireEvent("onGridBaseLayoutCollapsed",e)},C.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},C}(y.ViewLayer);return Mo.GridBase=Mt,Mo}var Ra,Ta,Da={},ka={};function Ma(){if(Ra)return ka;Ra=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.GridExporterBase=void 0;var t=d,e=function(e){function i(){var t=e.call(this)||this;return t.prepareProgress=10,t.indicatorNo=1,t}return t.__extends(i,e),i.prototype.dispose=function(){return null},i.prototype.export=function(t,e){this.grid=t},i}(Qe().ExporterBase);return ka.GridExporterBase=e,ka}var La,Oa={};function Fa(){return La||(La=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GridMultiExportOptions=t.GridExportOptions=t.ExportLayoutExpand=t.PIXELS_PER_CHAR=t.INDICATOR_REVERSE=t.INDICATOR_ROW=t.INDICATOR_ITEM=t.INDICATOR_DEFAULT=t.VIS_VISIBLE=t.VIS_HIDDEN=t.VIS_DEFAULT=t.DocumentTitle=void 0;var e,i=d,o=G(),n=S(),r=zo(),s=qe(),a=function(t){function e(e){var i=t.call(this)||this;return i._styles=null,i.message="",i.visible=!0,i.spaceTop=0,i.spaceBottom=0,i.height=-1,i.styleName="",e&&i.extend(e),i._styles=e&&e.styles?e.styles:null,i}return i.__extends(e,t),e.prototype._doDispose=function(){this._styles=null,t.prototype._doDispose.call(this)},_dp(e,"cssStyle",{get:function(){return this._styles}}),e}(o.Base);t.DocumentTitle=a,t.VIS_DEFAULT="default",t.VIS_HIDDEN="hidden",t.VIS_VISIBLE="visible",t.INDICATOR_DEFAULT="default",t.INDICATOR_ITEM="item",t.INDICATOR_ROW="row",t.INDICATOR_REVERSE="reverse",t.PIXELS_PER_CHAR=7,(e=t.ExportLayoutExpand||(t.ExportLayoutExpand={})).IGNORE="ignore",e.CURRENT="current",e.EXPAND="expand",e.COLLAPSE="collapse";var l=function(e){function o(i){var o=e.call(this,i)||this;return o.nullDateText="",o.linear=!1,o.allColumns=!1,o.allItems=!0,o.onlyCheckedItems=!1,o.pagingAllItems=!1,o.indicator=t.VIS_DEFAULT,o.checkBar=t.VIS_HIDDEN,o.header=t.VIS_DEFAULT,o.footer=t.VIS_DEFAULT,o.headerSummary=t.VIS_DEFAULT,o.indicatorValue=t.INDICATOR_DEFAULT,o.checkMark="v",o.unCheckMark="",o.indenting=!0,o.separateRows=!1,o.lookupDisplay=!1,o.showLevelOutline=!1,o.applyFitStyle=!0,o.applyDynamicStyles=!1,o.applyDefaultColumnFormat=!1,o.applyFixed=!1,o.sheetName=null,o.exportSeriesColumn=!1,o.showColumns=[],o.hideColumns=[],o.hiddenColumns=[],o.exportLink=!1,o.exportTemplate=!1,o.sheetAttrs=null,o.stylePrefix="",o.layoutExpand=null,o.exportImage=void 0,o.bulkImageDownload=!0,o.exportLayout=void 0,o.userCells=void 0,o.userCellsCallback=void 0,o.sheetProtect=!1,o.protectPassword=void 0,o.extend(i),o}return i.__extends(o,e),o.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),e.prototype._doDispose.call(this)},_dp(o,"documentTitle",{get:function(){return this._documentTitle},set:function(t){this._documentTitle=new a(t)}}),_dp(o,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(t){this._documentSubtitle=new a(t)}}),_dp(o,"documentTail",{get:function(){return this._documentTail},set:function(t){this._documentTail=new a(t)}}),_dp(o,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},n.Utils.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(t){this._protectProperties=t?n.Utils.deepCopy(t):void 0}}),o.prototype.indicatorVisible=function(e){if(e)switch(this.indicator){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.rowIndicator.visible}return!1},o.prototype.checkBarVisible=function(e){if(e)switch(this.checkBar){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.checkBar.visible}return!1},o.prototype.headerVisible=function(e){if(e)switch(this.header){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.header.visible}return!1},o.prototype.headerSummaryVisible=function(e){if(e)switch(this.headerSummary){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.headerSummaries.visible&&e.headerSummaries.visibleCount>0}return!1},o.prototype.footerVisible=function(e){if(e)switch(this.footer){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.footers.visible&&e.footers.visibleCount>0}return!1},o.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case t.INDICATOR_REVERSE:case t.INDICATOR_ITEM:return!1;case t.INDICATOR_ROW:return!0;case t.INDICATOR_DEFAULT:default:return e.rowIndicator.displayValue==r.IndicatorValue.ROW}return!1},o.prototype.showIndicatorReverse=function(e){if(e)switch(this.indicatorValue){case t.INDICATOR_ROW:case t.INDICATOR_ITEM:return!1;case t.INDICATOR_REVERSE:return!0;default:return e.rowIndicator.displayValue==r.IndicatorValue.REVERSE}},_dp(o,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)}}),_dp(o,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)}}),_dp(o,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)}}),o}(s.ExportOptions);t.GridExportOptions=l;var h=function(t){function e(e,i){var o=t.call(this,i)||this;return o._grids=[],o._parseGrids(e,i),o}return i.__extends(e,t),_dp(e,"exportGrids",{get:function(){return this._grids}}),e.prototype._doDispose=function(){this._grids=null,t.prototype._doDispose.call(this)},e.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,n=i.length;o<n;o++){var r,s=i[o].grid;s=s.$_handler?s:s._view,(r=new l(e)).assignFrom(i[o]),r.extend(i[o]),r.grid=s;var a={grid:s,sheetName:i[o].sheetName,options:r};this._grids.push(a)}else(r=new l(e)).extend(e),r.grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:r})},e}(l);t.GridMultiExportOptions=h}(Oa)),Oa}var Pa,Ba,Va={},Na={},Aa={};function $a(){if(Pa)return Aa;Pa=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.Color=void 0;var t=S(),e=t.Utils.hex,i=function(){function i(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof t?i._parse(t,this,e,!1):t instanceof i?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)}return i._parse=function(e,i,n,r){if(e){var s=e.length;if("#"==(e=e.trim().toLowerCase()).charAt(0))if(e=e.substr(1),--s>=6&&s<=8)i._b=t.Utils.toInt(e.substr(s-2,2),16),i._g=t.Utils.toInt(e.substr(s-4,2),16),i._r=t.Utils.toInt(e.substr(s-6,2),16),i._a=6==s?n?NaN:1:t.Utils.toInt(e.substr(0,s-6),16)/255;else{if(3!=s){if(r)throw"Invalid color value text: "+e;return!1}i._r=t.Utils.toInt(e.charAt(0)+e.charAt(0),16),i._g=t.Utils.toInt(e.charAt(1)+e.charAt(1),16),i._b=t.Utils.toInt(e.charAt(2)+e.charAt(2),16),i._a=n?NaN:1}else if(0==e.indexOf("rgba(")&&")"==e.charAt(s-1)){var a=(e=e.substring(5,s-1)).split(",");i._r=t.Utils.toInt(a[0]),i._g=t.Utils.toInt(a[1]),i._b=t.Utils.toInt(a[2]),i._a=t.Utils.toFloat(a[3])}else{if(0!=e.indexOf("rgb(")||")"!=e.charAt(s-1)){if(o.hasOwnProperty(e)){a=o[e];return i._r=a._r,i._g=a._g,i._b=a._b,i._a=a._a,a}if(r)throw new Error("Invalid color text: "+e);return!1}var a=(e=e.substring(4,s-1)).split(",");i._r=t.Utils.toInt(a[0]),i._g=t.Utils.toInt(a[1]),i._b=t.Utils.toInt(a[2]),i._a=n?NaN:1}return!0}return!1},i.prototype.toHex=function(){return""+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},i.prototype.toColorHex=function(){return""+e(this._r)+e(this._g)+e(this._b)},i.prototype.toString=function(){return"#"+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},i}();Aa.Color=i;var o={transparent:new i("#00000000"),ltGray:new i("#d3d3d3"),ltgray:new i("#d3d3d3"),aliceblue:new i("#f0f8ff"),antiquewhite:new i("#faebd7"),aqua:new i("#00ffff"),aquamarine:new i("#7fffd4"),azure:new i("#f0ffff"),beige:new i("#f5f5dc"),bisque:new i("#ffe4c4"),black:new i("#000000"),blanchedalmond:new i("#ffebcd"),blue:new i("#0000ff"),blueviolet:new i("#8a2be2"),brown:new i("#a52a2a"),burlywood:new i("#deb887"),cadetblue:new i("#5f9ea0"),chartreuse:new i("#7fff00"),chocolate:new i("#d2691e"),coral:new i("#ff7f50"),cornflowerblue:new i("#6495ed"),cornsilk:new i("#fff8dc"),crimson:new i("#dc143c"),cyan:new i("#00ffff"),darkblue:new i("#00008b"),darkcyan:new i("#008b8b"),darkgoldenrod:new i("#b8860b"),darkgray:new i("#a9a9a9"),darkgreen:new i("#006400"),darkgrey:new i("#a9a9a9"),darkkhaki:new i("#bdb76b"),darkmagenta:new i("#8b008b"),darkolivegreen:new i("#556b2f"),darkorange:new i("#ff8c00"),darkorchid:new i("#9932cc"),darkred:new i("#8b0000"),darksalmon:new i("#e9967a"),darkseagreen:new i("#8fbc8f"),darkslateblue:new i("#483d8b"),darkslategray:new i("#2f4f4f"),darkslategrey:new i("#2f4f4f"),darkturquoise:new i("#00ced1"),darkviolet:new i("#9400d3"),deeppink:new i("#ff1493"),deepskyblue:new i("#00bfff"),dimgray:new i("#696969"),dimGray:new i("#696969"),dimgrey:new i("#696969"),dodgerblue:new i("#1e90ff"),firebrick:new i("#b22222"),floralwhite:new i("#fffaf0"),forestgreen:new i("#228b22"),fuchsia:new i("#ff00ff"),gainsboro:new i("#dcdcdc"),ghostwhite:new i("#f8f8ff"),goldenrod:new i("#daa520"),gold:new i("#ffd700"),gray:new i("#808080"),green:new i("#008000"),greenyellow:new i("#adff2f"),grey:new i("#808080"),honeydew:new i("#f0fff0"),hotpink:new i("#ff69b4"),indianred:new i("#cd5c5c"),indigo:new i("#4b0082"),ivory:new i("#fffff0"),khaki:new i("#f0e68c"),lavenderblush:new i("#fff0f5"),lavender:new i("#e6e6fa"),lawngreen:new i("#7cfc00"),lemonchiffon:new i("#fffacd"),lightblue:new i("#add8e6"),lightcoral:new i("#f08080"),lightcyan:new i("#e0ffff"),lightgoldenrodyellow:new i("#fafad2"),lightgray:new i("#d3d3d3"),lightgreen:new i("#90ee90"),lightgrey:new i("#d3d3d3"),lightpink:new i("#ffb6c1"),lightsalmon:new i("#ffa07a"),lightseagreen:new i("#20b2aa"),lightskyblue:new i("#87cefa"),lightslategray:new i("#778899"),lightslategrey:new i("#778899"),lightsteelblue:new i("#b0c4de"),lightyellow:new i("#ffffe0"),lime:new i("#00ff00"),limegreen:new i("#32cd32"),linen:new i("#faf0e6"),magenta:new i("#ff00ff"),maroon:new i("#800000"),mediumaquamarine:new i("#66cdaa"),mediumblue:new i("#0000cd"),mediumorchid:new i("#ba55d3"),mediumpurple:new i("#9370db"),mediumseagreen:new i("#3cb371"),mediumslateblue:new i("#7b68ee"),mediumspringgreen:new i("#00fa9a"),mediumturquoise:new i("#48d1cc"),mediumvioletred:new i("#c71585"),midnightblue:new i("#191970"),mintcream:new i("#f5fffa"),mistyrose:new i("#ffe4e1"),moccasin:new i("#ffe4b5"),navajowhite:new i("#ffdead"),navy:new i("#000080"),oldlace:new i("#fdf5e6"),olive:new i("#808000"),olivedrab:new i("#6b8e23"),orange:new i("#ffa500"),orangered:new i("#ff4500"),orchid:new i("#da70d6"),palegoldenrod:new i("#eee8aa"),palegreen:new i("#98fb98"),paleturquoise:new i("#afeeee"),palevioletred:new i("#db7093"),papayawhip:new i("#ffefd5"),peachpuff:new i("#ffdab9"),peru:new i("#cd853f"),pink:new i("#ffc0cb"),plum:new i("#dda0dd"),powderblue:new i("#b0e0e6"),purple:new i("#800080"),rebeccapurple:new i("#663399"),red:new i("#ff0000"),rosybrown:new i("#bc8f8f"),royalblue:new i("#4169e1"),saddlebrown:new i("#8b4513"),salmon:new i("#fa8072"),sandybrown:new i("#f4a460"),seagreen:new i("#2e8b57"),seashell:new i("#fff5ee"),sienna:new i("#a0522d"),silver:new i("#c0c0c0"),skyblue:new i("#87ceeb"),slateblue:new i("#6a5acd"),slategray:new i("#708090"),slategrey:new i("#708090"),snow:new i("#fffafa"),springgreen:new i("#00ff7f"),steelblue:new i("#4682b4"),tan:new i("#d2b48c"),teal:new i("#008080"),thistle:new i("#d8bfd8"),tomato:new i("#ff6347"),turquoise:new i("#40e0d0"),violet:new i("#ee82ee"),wheat:new i("#f5deb3"),white:new i("#ffffff"),whitesmoke:new i("#f5f5f5"),yellow:new i("#ffff00"),yellowgreen:new i("#9acd32")};return Aa}function Ha(){if(Ba)return Na;Ba=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.encryptExcelPassword=Na.ImageFileDownLoader=Na.ExcelFormatConverter=Na.ExportPreparer=Na.CssFactory=void 0;var t=d,e=xo(),i=To(),o=Zn(),n=$a(),r=S(),s=C(),a=Fa(),l=function(){function t(){}return t.parseDocumentStyles=function(t){for(var e,i,o,n={},r=t.styleSheets,s=0,a=r.length;s<a;s++){e=r[s];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var l=i.length;l--;){var h=(o=i[l]).selectorText;if(h)if(h.indexOf(",")>-1)for(var u=h.split(","),d=u.length;d--;){var c=u[d].trim();c&&(n[c]=o.style)}else n[o.selectorText]=o.style}}return n},t.extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];"inherit"==t[n]||r.Utils.included(n,"background-color")&&r.Utils.included(t[n],"none","initial","unset")||(e[n]||(e[e.length]=n,e.length++),e[n]=t[n])}},t.$_getSelectorStyle=function(t,e){return t[e]},t.getSelectorStyle=function(e,i){if(t.prefix){var o=[],n={length:0};o.push(t.$_getSelectorStyle(e,i)),o.push(t.$_getSelectorStyle(e,t.prefix+i));for(var r=0,s=o.length;r<s;r++)o[r]&&t.extendCssStyle(o[r],n);return n}return t.$_getSelectorStyle(e,i)},t}();Na.CssFactory=l;var h=function(){function t(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse(e)}return t.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},_dp(t,"grid",{get:function(){return this._grid}}),_dp(t,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0}}),_dp(t,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length}}),_dp(t,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length}}),_dp(t,"sparkColumns",{get:function(){return this._sparkColumns}}),_dp(t,"documentCssStyles",{get:function(){return this._documentCssStyles}}),_dp(t,"groupModel",{get:function(){return this._groupModel}}),t.prototype.getHeader=function(t,e){return this._headerCells[t][e]},t.prototype.getItem=function(t,e){return this._dataCells[t][e]},t.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},t.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},t.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},t.prototype.getItemLevel=function(t){for(var e=this.grid,i=t.parent,o=t.level-1;i&&i.level>0;){var n=e.columnByField(i.groupField),r=n.layout;n.visible&&r.visible||o--,i=i.parent}return Math.max(o,0)},t.prototype.prepareLayout=function(){var t,e=this.grid,o=this._exportOptions,n=e.activeCellLayout;if(o.linear){for(var r=n.getDataColumns(!1),s=[],a=0;a<=r.length-1;a++){var l=r[a],h=l.visible&&l.layout.visible||o.allColumns;(h=h&&o.hideColumns.indexOf(l.name)<0||o.showColumns.indexOf(l.name)>=0)&&s.push({column:l.name,width:l.layout.domWidth||l.layout.width})}t=new i.GridCellLayout(e).load(s)}else t=o.exportLayout?new i.GridCellLayout(e).load(o.exportLayout):new i.GridCellLayout(e).load(e.activeCellLayout.getLayout(!0,o.applyFitStyle,o.allColumns,o.showColumns,o.hideColumns,o.layoutExpand));return t},t.prototype.parse=function(t){var e=this._grid,i=this._layout=this.prepareLayout(),o=this._exportOptions.stylePrefix;l.prefix=o?o.trim()+" ":void 0,i.$_refresh2(e._columns,e.displayOptions.minCellWidth),i.$_prepareLayout(e,e.fixedOptions.colCount,e.fixedOptions.rightCount),i.$_prepareMerges(e);var n=e.footers,r=e.headerSummaries;this._setCellInfo(i._headerCells,this._headerCells=[]),this._setCellInfo(i._dataCells,this._dataCells=[]),this._setFooterInfo(i._dataCells,t.footer===a.VIS_VISIBLE?n.count:n.visibleCount,this._footerCells=[]),this._setFooterInfo(i._dataCells,t.headerSummary===a.VIS_VISIBLE?r.count:r.visibleCount,this._summaryCells=[]),this._documentCssStyles=l.parseDocumentStyles(e.doc),this._setDataColumns(i._dataCells),this._setSparkInfo(this._dataCells)},t.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var o=[],n=0;n<t[i].length;n++)o.push({layout:t[i][n],spanned:!1});e.push(o)}},t.prototype._setFooterInfo=function(t,e,i){for(var o=0;o<e;o++)for(var n=0;n<t.length;n++){for(var r=[],s=0;s<t[n].length;s++)r.push({footerIndex:o,layout:t[n][s],spanned:!1});i.push(r)}},t.prototype.setGroupFooterItms=function(t,e,i){this._groupModel=t;var o=this._groupFooterCells=[],n=this._dataCells,a=!1;if(!(t.footerCount>0)){var l=t.provider._expandedAdornments,h=t.provider._collapsedAdornments;a=i?e&&!t.expanded&&r.Utils.included(h,s.RowGroupAdornments.SUMMARY,s.RowGroupAdornments.FOOTER):(a=t.expanded&&l===s.RowGroupAdornments.SUMMARY)||!e&&!t.expanded&&r.Utils.included(h,s.RowGroupAdornments.SUMMARY,s.RowGroupAdornments.FOOTER)}for(var u=a?t.allFooterCount:t.footerCount,d=0;d<u;d++)for(var c=a?t._allFooters[d]:t.getFooter(d),p=0;p<n.length;p++){for(var _=[],f=0;f<n[p].length;f++)_.push({footerIndex:c.footerIndex,layout:n[p][f].layout,spanned:!1});o.push(_)}},t.prototype.getGroupFooterCells=function(){return this._groupFooterCells},t.prototype._setDataColumns=function(t){var e,i;this._dataColumns=[];for(var o=0,n=t.length;o<n;o++){e=[];for(var r=0,s=t[o].length;r<s;r++)(i=t[o][r]).isProxy&&(i=i.source),e.push(i.firstColumn);this._dataColumns.push(e)}},t.prototype._setSparkInfo=function(t){function r(t,e){var i={start:void 0,end:void 0,row:void 0},o=d[0],n=d[d.length-1],r=c.columnByField(o),s=c.columnByField(n);if(!r||!s)return null;for(var a=0,l=e.length;a<l;a++)for(var h=0,u=e[a].length;h<u;h++)r==e[a][h]&&(i.start=h,i.row=a-t),s==e[a][h]&&(i.end=h);return i}var s,a,h,u,d,c,p=this.documentCssStyles;this._sparkColumns=[];for(var _=0,f=t.length;_<f;_++)for(var g=0,m=t[_].length;g<m;g++)if((h=(a=(s=t[_][g]).layout)instanceof i.CellLayoutColumnItem?a.firstColumn:null)instanceof e.SeriesColumn&&(u=h.renderer)&&o.SparkChartRenderer.interfaced(u)){d=h.fields,c=h.grid;var y=d.length>0&&r(_,this._dataColumns);if(y){var v=u.firstStyle,C=u.lastStyle,w=u.highStyle,x=u.lowStyle,b=void 0,I=void 0,E=void 0;if(o.SparkLineRenderer.interfaced(u)){b="line",!C&&(C=o.SparkLineRenderer.LAST_STYLE),!w&&(w=o.SparkLineRenderer.HIGH_STYLE),!x&&(x=o.SparkLineRenderer.LOW_STYLE);var S=u.pointStyle?l.getSelectorStyle(p,"."+u.pointStyle):void 0;I=S?new n.Color(S.fill).toHex():void 0,E=(T=l.getSelectorStyle(p,"."+o.SparkLineRenderer.CHART_STYLE))?new n.Color(T.stroke).toHex():void 0}else{var R=void 0;o.SparkColumnRenderer.interfaced(u)?(b="column",R=o.SparkColumnRenderer.CHART_STYLE,!C&&(C=o.SparkColumnRenderer.LAST_STYLE),!w&&(w=o.SparkColumnRenderer.HIGH_STYLE),!x&&(x=o.SparkColumnRenderer.LOW_STYLE)):(b="stacked",R=o.SparkWinLossRenderer.CHART_STYLE);var T=l.getSelectorStyle(p,"."+R);E=new n.Color(T.fill).toHex()}var D=w?l.getSelectorStyle(p,"."+w):void 0,k=x?l.getSelectorStyle(p,"."+x):void 0,M=v?l.getSelectorStyle(p,"."+v):void 0,L=C?l.getSelectorStyle(p,"."+C):void 0,O={type:b,colors:{colorHigh:D&&D.fill?new n.Color(D.fill).toHex():void 0,colorLow:k&&k.fill?new n.Color(k.fill).toHex():void 0,colorFirst:M&&M.fill?new n.Color(M.fill).toHex():void 0,colorLast:L&&L.fill?new n.Color(L.fill).toHex():void 0,colorMarkers:I,colorSeries:E},sparkLines:{},range:y};s.sparkLineGroup=O,this._sparkColumns[h.$_hash]=s}}},t}();Na.ExportPreparer=h;var u=function(){function t(){}return t.convertNumberFormat=function(t){return t.indexOf(";")>0&&(t=t.split(";")[0]),t.indexOf(".#")>0?t.replace(".#",".0"):t},t.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var n=t.charAt(o);switch(n){case"y":case"d":case"m":case"s":case":":e+=n;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(o>=i-1||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":case"T":case"t":case"Z":case"z":case"+":break;case".":case"/":case"-":case" ":(o>=i-1||"S"!=t.charAt(o+1))&&(e=e+"\\"+n);break;default:e=e+'"'+n+'"'}}return e},t}();Na.ExcelFormatConverter=u;var c=function(){function e(){this._contentTypes={},this._bulkDownload=!0}return _dp(e,"bulkDownload",{get:function(){return this._bulkDownload}}),_dp(e,"buldDownload",{set:function(t){this._bulkDownload=t}}),e.prototype.executeDownLoad=function(e,i,o){return t.__awaiter(this,void 0,void 0,(function(){var n,s,a,l,h;return t.__generator(this,(function(t){switch(t.label){case 0:if(n=[],s=Object.keys(i),!this.bulkDownload)return[3,1];for(a=0;a<s.length;a++)l=s[a],h=i[l],n.push(this.download(h).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var n=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),s="data:".concat(t.type,";base64,").concat(r.Base64.btoa(n)),a=document.createElement("img");a.style.position="fixed",a.style.top="-10000px",a.style.left="-10000px",a.src=s,a.onload=function(){t.width=a.width,t.height=a.height,a.src="",e(t)},a.onerror=function(){i()}}finally{}}))})).catch((function(){})));return Promise.all(n).catch((function(){})).finally((function(){o&&o.call(e,i)})),[3,6];case 1:a=0,t.label=2;case 2:return a<s.length?(l=s[a],h=i[l],[4,this.download(h).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var n=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),s="data:".concat(t.type,";base64,").concat(r.Base64.btoa(n)),a=document.createElement("img");a.style.position="fixed",a.style.top="-10000px",a.style.left="-10000px",a.src=s,a.onload=function(){t.width=a.width,t.height=a.height,a.src="",e(t)},a.onerror=function(){i()}}finally{}}))})).catch((function(){}))]):[3,5];case 3:t.sent(),t.label=4;case 4:return a++,[3,2];case 5:o&&o.call(e,i),t.label=6;case 6:return[2]}}))}))},e.prototype.getContentTypes=function(){return this._contentTypes},e.prototype.getExtension=function(t,e){var i=function(t){return Array.prototype.map.call(t,(function(t){return r.Utils.hex(t)})).join("")};if(t){var o="",n=t.toLowerCase().split(/\s*(?:;|$)\s*/),s=r.Utils.find(n,(function(t){return 0===t.indexOf("image")}));s&&(o=s.indexOf("svg")>=0?"svg":s.substring(6));var a=r.Utils.find(n,(function(t){return t.indexOf("octet-stream")>=0}));if(!o&&a&&e.byteLength>20){var l=new Uint8Array(e),h=i(l.slice(0,10)),u=i(l.slice(-18));0===h.indexOf("474946")?(o="gif",t="image/gif"):0===h.indexOf("89504e47")?(o="png",t="image/png"):0===h.indexOf("ffd8")&&"ffd9"===u.substr(-4)?(o="jpeg",t="image/jpeg"):0===h.indexOf("424d")&&(o="bmp",t="image/bmp")}return o&&!this._contentTypes.hasOwnProperty(o)&&(this._contentTypes[o]=t),{ext:o,type:t}}},e.prototype.download=function(t){var e=this;return new Promise((function(i,o){var n=new XMLHttpRequest;n.open("GET",t.url),n.onload=function(){if(200===n.status){var o=e.getExtension(n.getResponseHeader("content-type"),n.response),r=o.ext,s=o.type;r?(t.fileName="".concat(t.id,".").concat(r),t.type=s,t.buffer=n.response,i(t)):i(null)}else i(null)},n.onerror=function(){o()},n.responseType="arraybuffer",n.send()}))},e}();return Na.ImageFileDownLoader=c,Na.encryptExcelPassword=function(t){var e,i,o=0,n=function(t){for(var e=[],i=t.split(""),o=0;o<i.length;++o)e[o]=i[o].charCodeAt(0);return e}(t),r=n.length+1;i=r,(e="undefined"!=typeof Buffer?Buffer.alloc?Buffer.alloc(i):new Buffer(i):"undefined"!=typeof Uint8Array?new Uint8Array(i):new Array(i))[0]=n.length;for(var s=1;s<r;++s)e[s]=n[s-1];for(s=r-1;s>=0;--s)o=((0==(16384&o)?0:1)|o<<1&32767)^e[s];return(52811^o).toString(16).toUpperCase()},Na}var Ua,Ga,Wa={},ja={};function za(){if(Ga)return Wa;Ga=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.ExcelWorkbook=Wa.ExcelWorksheet=Wa.ExcelRow=Wa.ExcelColumn=Wa.ExcelWorkbookStyles=Wa.ExcelStyle=Wa.ExcelUtil=void 0;var t=d,e=Ee(),i=function(){if(Ua)return ja;Ua=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.TextXmlManager=void 0;var t=/\<|\>|\&|\"/;function e(e){return t.test(e)?e.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):e}var i=function(){function t(){}return t.createDocument=function(t,e){var i={name:t,attrs:{}};for(var o in e)i.attrs[o]=e[o];return i},t.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var i=e.childs.length;i--;)t.removeItem(e.childs[i]),delete e.childs[i];e.childs=null},t.addChild=function(i,o,n,r){var s={name:o,attrs:n};return r&&t.addText(s,e(r)),t.addChildElement(i,s),s},t.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},t.addProperty=function(t,i,o){t.attrs||(t.attrs={}),t.attrs[i]=e(o)},t.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},t.toString=function(e){var i="<"+e.name;for(var o in e.attrs)i+=" "+o+'="'+e.attrs[o]+'"';if(e.childs||e.texts){if(i+=">",e.texts)for(var n=0,r=e.texts.length;n<r;n++)i+=e.texts[n];if(e.childs)for(n=0,r=e.childs.length;n<r;n++)i+=t.toString(e.childs[n]);i+="</"+e.name+">"}else i+="/>";return i},t}();return ja.TextXmlManager=i,ja}(),o=$a(),n=Ha(),r=S(),s=C(),a=function(){function t(){}return t.toColCaption=function(t){for(var e="";t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},t.toRange=function(e,i,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=1),void 0===r&&(r=1);var s=i+1;return o?t.toColCaption(e)+s+":"+t.toColCaption(e+n-1)+(s+r-1):t.toColCaption(e)+s},t.daysOfYear=function(e){for(var i=0,o=0;o<e.getMonth();o++)i+=t.$$_MONTH_DAYS[o];if(e.getMonth()>=2){var n=e.getFullYear();(n%400==0||n%4==0&&n%100!=0)&&i++}return i+=e.getDate()},t.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},t.toExcelDate=function(e){var i=(1e3*(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())+e.getMilliseconds())/t.$$_DAY_MILLISECONDS,o=t.daysOfPriorYears(e.getFullYear())+this.daysOfYear(e)+i;return o>=60&&o++,o},t.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t.$$_DAY_MILLISECONDS=864e5,t.$$_MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30],t}();Wa.ExcelUtil=a;var l=function(){function t(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return t.prototype.dispose=function(){for(var t in this._strings=null,this._stringMap)delete this._stringMap[t];this._stringMap=null},_dp(t,"count",{get:function(){return this._count}}),t.prototype.uniqueCount=function(){return this._nextId},t.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},t.prototype.getIndex=function(t){return this._stringMap[t]},t.prototype.createPart=function(){var t=i.TextXmlManager.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});i.TextXmlManager.addProperty(t,"count",this._count.toString()),i.TextXmlManager.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,o=0,n=this._strings.length;o<n;o++){var r=i.TextXmlManager.addChild(t,"si"),s=this._strings[o].replace(/([\u0000-\u0008\u000b\u000c\u000e-\u001F])/g,(function(t){return"_x".concat(("0000"+t.charCodeAt(0).toString(16)).substr(-4),"_")})),l=i.TextXmlManager.addChild(r,"t",null,s);e.test(this._strings[o])&&i.TextXmlManager.addProperty(l,"xml:space","preserve")}var h=i.TextXmlManager.toString(t);return a.XML_HEAD_STRING+h},t}(),h=function(){function t(t,e){this._id=t,this._url=e}return _dp(t,"id",{get:function(){return this._id}}),_dp(t,"url",{get:function(){return this._url}}),t}(),u=function(){function t(){this._images=[],this._imageMap={}}return t.prototype.add=function(t){if(this._images.indexOf(t)<0){var e=this._images.push(t);this._imageMap[t]=new h(e,t)}return t},t.prototype.getImageMap=function(){return this._imageMap},t.prototype.getImage=function(t){return this._imageMap&&this._imageMap[t]},t.prototype.getImageId=function(t){return this._imageMap&&this._imageMap[t]&&this._imageMap[t].id},t}(),c=function(){function t(t,e,i,o,n,r){switch(this._cols=1,this._cHeights=[],this._col=t,this._row=e,this._cWidth=7*i,this._cHeight=o>0?o/.75:-1,this._imageUrl=r,n){case s.IconLocation.CENTER:this._location=s.IconLocation.CENTER;break;case s.IconLocation.RIGHT:case s.IconLocation.RIGHT_EDGE:this._location=s.IconLocation.RIGHT;break;default:this._location=s.IconLocation.LEFT}}return _dp(t,"col",{get:function(){return this._col.toString()}}),_dp(t,"row",{get:function(){return this._row.toString()}}),_dp(t,"toCol",{get:function(){return(this._col+this._cols-1).toString()}}),_dp(t,"toRow",{get:function(){return this._toRow.toString()}}),_dp(t,"fromX",{get:function(){return Math.round((null!=this._fromX?this._fromX:2)*t.emu).toString()}}),_dp(t,"fromY",{get:function(){return Math.round((null!=this._fromY?this._fromY:2)*t.emu).toString()}}),_dp(t,"colOff",{get:function(){return Math.round(this._xOffset*t.emu).toString()}}),_dp(t,"rowOff",{get:function(){return Math.round(this._yOffset*t.emu).toString()}}),_dp(t,"imageUrl",{get:function(){return this._imageUrl}}),t.prototype.calcPosition=function(t,e){var i,o=this._rHeight,n=this._rWidth;null!=o&&o>0&&null!=n&&n>0?(t=n,e=o):null!=o&&o>0?(i=o/e,e=o,t*=i):null!=n&&n>0&&(i=n/t,t=n,e*=i),this._cWidth=this._cWidth<0?t:this._cWidth,this._cHeight=this._cHeight<0?e:this._cHeight,i=1,(this._cWidth<t||this._cHeight<e)&&(e*=i=Math.min((this._cWidth-2)/t,(this._cHeight-2)/e),t*=i);var r=1;this._location===s.IconLocation.CENTER?r=Math.max(1,this._cWidth/2-t/2):this._location===s.IconLocation.RIGHT&&(r=this._cWidth-t-1);for(var a=this._cHeight/2-e/2,l=this._row,h=l,u=a,d=a+e,c=1;c<this._cHeights.length;c++)a>=this._cHeights[c]&&(l++,u-=this._cHeights[c]-this._cHeights[c-1]),a+e>this._cHeights[c]&&(h++,d-=this._cHeights[c]-this._cHeights[c-1]);this._row=l,this._toRow=h,this._fromX=r,this._fromY=Math.max(1,u),this._xOffset=this._fromX+t,this._yOffset=Math.min(d,this._cHeight-1)},t.emu=9525,t}(),p=function(){function t(t,e,i){this._infos=[],this._book=t,this._sheet=e,this._index=i}return t.prototype.dispose=function(){return null},_dp(t,"fileName",{get:function(){return"drawing"+this._index+".xml"}}),_dp(t,"relationId",{get:function(){return"rId"+this._rId}}),_dp(t,"rId",{set:function(t){this._rId=t}}),t.prototype.createPart=function(){for(var t=i.TextXmlManager,e=t.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),o=this._infos,n=0;n<o.length;n++){var r=o[n],s=this._book.getExcelImage(r.imageUrl);if(s&&s.fileName){var l=this._sheet.getMergeInfo(r.row,r.col);if(l){for(var h=[0],u=-1,d=l.row;d<l.row+l.rows;d++){var c=this._sheet.getRow(d);if(!(c._height>0)){u=-1,h=[];break}h.push(u+=c._height/.75)}r._cols=l.cols,r._cHeight=u,r._cHeights=h}r.calcPosition(s.width,s.height);var p=t.addChild(e,"xdr:twoCellAnchor",{editAs:"oneCell"}),_=t.addChild(p,"xdr:from");t.addChild(_,"xdr:col",null,r.col),t.addChild(_,"xdr:colOff",null,r.fromX),t.addChild(_,"xdr:row",null,r.row),t.addChild(_,"xdr:rowOff",null,r.fromY),_=t.addChild(p,"xdr:to"),t.addChild(_,"xdr:col",null,r.toCol),t.addChild(_,"xdr:colOff",null,r.colOff),t.addChild(_,"xdr:row",null,r.toRow),t.addChild(_,"xdr:rowOff",null,r.rowOff);var f=t.addChild(p,"xdr:pic"),g=t.addChild(f,"xdr:nvPicPr");t.addChild(g,"xdr:cNvPr",{id:n+2,name:"picture "+n});var m=t.addChild(g,"xdr:cNvPicPr");t.addChild(m,"a:picLocks",{noChangeAspect:"1"});var y=t.addChild(f,"xdr:blipFill"),v=t.addChild(y,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this._book.getImageIndex(r.imageUrl)}),C=t.addChild(v,"a:extLst"),w=t.addChild(C,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"});t.addChild(w,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),t.addChild(t.addChild(y,"a:stretch"),"a:fillRect");var x=t.addChild(f,"xdr:spPr"),b=t.addChild(x,"a:xfrm");t.addChild(b,"a:off",{x:"1",y:"1"}),t.addChild(b,"a:ext",{cx:"1181100",cy:"1189663"}),t.addChild(t.addChild(x,"a:prstGeom",{prst:"rect"}),"a:avLst"),t.addChild(p,"xdr:clientData")}}var I=i.TextXmlManager.toString(e);return a.XML_HEAD_STRING+I},t.prototype.add=function(t,e,i,o,n,r,s,a){var l=new c(t,e,i,o,n,r);return l._rWidth=s,l._rHeight=a,this._infos.push(l),l},t.prototype.createSheetRel=function(){var t=i.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=i.TextXmlManager.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"});i.TextXmlManager.addProperty(e,"Id",this.relationId),i.TextXmlManager.addProperty(e,"Target","../drawings/"+this.fileName);var o=i.TextXmlManager.toString(t);return a.XML_HEAD_STRING+o},t.prototype.createRel=function(){var t=[];this._infos.forEach((function(e){t.indexOf(e.imageUrl)<0&&t.push(e.imageUrl)}));for(var e=i.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),o=0;o<t.length;o++){var n=t[o],r=this._book.getExcelImage(n);if(r&&r.fileName){var s=i.TextXmlManager.addChild(e,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"});i.TextXmlManager.addProperty(s,"Id","rId"+this._book.getImageIndex(n).toString()),i.TextXmlManager.addProperty(s,"Target","../media/"+r.fileName)}}var l=i.TextXmlManager.toString(e);return a.XML_HEAD_STRING+l},t}(),_=function(){function t(t){this._id=t}return t.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},_dp(t,"id",{get:function(){return this._id}}),t.prototype.dispose=function(){},t}(),f=function(){function t(){this._items=[],this._indexer=0}return t.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose();this._items=null},t.prototype.getIndexer=function(){return this._indexer++},t.prototype.create=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=this._items.length;o--;)if((t=this._items[o]).equals.apply(t,e))return t;return t=this.createInstance.apply(this,e),this._items.push(t),t},t.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},t}(),g=function(i){function o(t,e,o,n,r,s,a){var l=i.call(this,t)||this;return l._bold=void 0,l._italic=void 0,l._underline=void 0,l._name=e,l._size=o,l._color=n,l._bold=r,l._italic=s,l._underline=a,l}return t.__extends(o,i),o.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=null==this._bold?t._bold:this._bold,this._italic=null==this._italic?t._italic:this._italic,this._underline=null==this._underline?t._underline:this._underline},o.prototype.equals=function(t,e,i,o,n,r){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==o&&this._italic==n&&this._underline==r},o.prototype.toXml=function(t,i){e.XmlUtils.addChildWithAttr(t,i,"sz","val",this._size||10),e.XmlUtils.addChildWithAttr(t,i,"name","val",this._name||"Calibri"),e.XmlUtils.addChildWithAttr(t,i,"color","rgb",this._color||"ff000000"),e.XmlUtils.addChildWithAttr(t,i,"b","val",this._bold?"true":"false"),e.XmlUtils.addChildWithAttr(t,i,"i","val",this._italic?"true":"false"),this._underline&&e.XmlUtils.addChild(t,i,"u")},o}(_),m=function(i){function n(t){var e=i.call(this)||this,o=(0,r.getWin)(t).getComputedStyle(t);return e._defFontSize=e.$_convertUnit(o.fontSize||"16px"),e}return t.__extends(n,i),n.prototype.createInstance=function(t,e,i,o,n,r){return new g(this.getIndexer(),t,e,i,o,n,r)},n.prototype.createFromCss=function(t){var e=t["font-family"];e?(e.indexOf(",")>-1&&(e=e.split(",")[0]),e=e.replace(/\"/g,"")):e=void 0;var i=this.$_convertUnit(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var n=t.color;n&&(n="#"==n.charAt(0)?t.color:new o.Color(n).toColorHex());var r="bold"==t["font-weight"],s="italic"==t["font-style"],a="underline"==t["font-decoration"];return this.create(e,i,n,r,s,a)},n.prototype.toXml=function(t,i){for(var o=this._items.length,n=0;n<o;n++){var r=e.XmlUtils.addChild(t,i,"font");this._items[n].toXml(t,r)}e.XmlUtils.setAttr(i,"count",o)},n.prototype.$_convertUnit=function(t){return null==t?void 0:"string"==typeof t?t.indexOf("px")>0?parseFloat(t):t.indexOf("pt")>0?Math.round(1.3333*parseFloat(t)):t.indexOf("em")>0?parseFloat(t)*this._defFontSize:12:parseInt(t)},n}(f),y=function(i){function o(t,e,o,n,r,s,a){void 0===e&&(e="solid"),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===a&&(a=90);var l=i.call(this,t)||this;return l._pattern=e,l._color=o,l._linear=r,l._color2=s,l._degree=a,l._tint=n,l}return t.__extends(o,i),o.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=null==t._linear?this._linear:t._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},o.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},o.prototype.equals=function(t,e,i,o,n,r){return void 0===t&&(t="solid"),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===r&&(r=90),this._pattern==t&&this._color==e&&this._color2==n&&this._linear==o&&this._degree==r&&this._tint==i},o.prototype.toXml=function(t,i){var o,n=this._tint||0;if(this._linear){var r=e.XmlUtils.addChildWithAttr(t,i,"gradientFill","degree",this._degree||90),s=e.XmlUtils.addChildWithAttr(t,r,"stop","position","0");o=e.XmlUtils.addChild(t,s,"color"),e.XmlUtils.setAttr(o,"rgb",this._color),e.XmlUtils.setAttr(o,"tint",this._tint||0),s=e.XmlUtils.addChildWithAttr(t,r,"stop","position","1"),o=e.XmlUtils.addChild(t,s,"color"),e.XmlUtils.setAttr(o,"rgb",this._color2),e.XmlUtils.setAttr(o,"tint",n)}else{var a=e.XmlUtils.addChildWithAttr(t,i,"patternFill","patternType",this._pattern.toString());"none"!=this._pattern&&null!=this._color&&(o=e.XmlUtils.addChild(t,a,"fgColor"),e.XmlUtils.setAttr(o,"rgb",this._color),e.XmlUtils.setAttr(o,"tint",n))}},o}(_),v=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return t.__extends(n,i),n.prototype.createInstance=function(t,e,i,o,n,r){return new y(this.getIndexer(),t,e,i,o,n,r)},n.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",n=e?e.indexOf(i):-1;if(n>-1){var r=this._splitEscape(e.slice(n+i.length,e.length-1)),s=void 0,a=void 0,l=void 0;r.length>2?(s=new o.Color(r[1]),a=new o.Color(r[2]),l=parseInt(r[0])):(s=new o.Color(r[0]),a=new o.Color(r[1]),l=180),l=(l+270)%360;var h=1-s._a;return this.create("none",s.toHex(),h,!0,a.toHex(),l)}if(t["background-color"]){var u=new o.Color(t["background-color"]);h=1-u._a;return u?this.create("solid",u.toHex(),h):this._items[0]}},n.prototype.toXml=function(t,i){for(var o=this._items.length,n=0;n<o;n++){var r=e.XmlUtils.addChild(t,i,"fill");this._items[n].toXml(t,r)}e.XmlUtils.setAttr(i,"count",o)},n.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,n="",r=0;r<t.length;r++){var s=t[r];s!=e||o?(" "!=s||o)&&(n+=s):(i.push(n),n=""),"("==s&&(o=!0),")"==s&&(o=!1)}return n&&i.push(n),i}return null},n}(f),w=function(i){function o(t,e,o,n){void 0===o&&(o=1),void 0===n&&(n="none");var r=i.call(this,t)||this;return r._color=e,r._width=o,r._type=n,r}return t.__extends(o,i),o.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&(t._color==e._color&&t._type==e._type&&t._width==e._width)},o.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},o.prototype.toXml=function(t,i){var o=this._width<=1?"thin":this._width<=2?"medium":"thick";e.XmlUtils.setAttr(i,"style",o),e.XmlUtils.addChildWithAttr(t,i,"color","rgb",this._color)},o}(_),x=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype.createInstance=function(t,e,i){return new w(this.getIndexer(),t,e,i)},i.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var n=new o.Color(t[e+"-color"]),r=i,s=parseInt(t[e+"-width"]);if(!n&&isNaN(s))return this._items[0];if(isNaN(s))s=0;else if(0===s)return;return this.create(n.toColorHex(),s,r)}},i}(f),b=function(i){function o(t,e,o,n,r){var s=i.call(this,t)||this;return s._left=e,s._top=o,s._right=n,s._bottom=r,s}return t.__extends(o,i),o.equalsObj=function(t,e){return w.equalsObj(t._left,e._left)&&w.equalsObj(t._top,e._top)&&w.equalsObj(t._right,e._right)&&w.equalsObj(t._bottom,e._bottom)},_dp(o,"left",{get:function(){return this._left}}),_dp(o,"right",{get:function(){return this._right}}),_dp(o,"top",{get:function(){return this._top}}),_dp(o,"bottom",{get:function(){return this._bottom}}),o.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,i.prototype.dispose.call(this)},o.prototype.equals=function(t,e,i,o){return w.EqualsById(this._left,t)&&w.EqualsById(this._top,e)&&w.EqualsById(this._right,i)&&w.EqualsById(this._bottom,o)},o.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},o.prototype.borderToXml=function(t,i,o){var n=e.XmlUtils.addChild(t,i,o),r=this[o];r&&r.toXml(t,n)},o}(_),I=function(i){function o(t){var e=i.call(this)||this;return e._lines=t,e}return t.__extends(o,i),o.prototype.dispose=function(){this._lines=null,i.prototype.dispose.call(this)},o.prototype.createInstance=function(t,e,i,o){return new b(this.getIndexer(),t,e,i,o)},o.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),n=e.createFromCss(t,"border-top"),r=e.createFromCss(t,"border-bottom");return i||o||n||r?this.create(i,n,o,r):void 0},o.prototype.extend=function(t,e){t=t||{};for(var i=new b(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),o=this._items.length;o--;){var n=this._items[o];if(b.equalsObj(this._items[o],i))return n}return i._id=this.getIndexer(),this._items.push(i),i},o.prototype.toXml=function(t,i){for(var o=this._items.length,n=0;n<o;n++){var r=e.XmlUtils.addChild(t,i,"border");this._items[n].toXml(t,r)}e.XmlUtils.setAttr(i,"count",o)},o}(f),E=function(i){function o(t,e,o,n,r,s,a,l,h){void 0===r&&(r=!1),void 0===s&&(s=0);var u=i.call(this,e)||this;return u._collection=t,u._horzAlign=o,u._vertAlign=n,u._wrapText=r,u._formatId=s,u._font=a,u._fill=l,u._border=h,u}return t.__extends(o,i),_dp(o,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t}}),_dp(o,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t}}),o.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,i.prototype.dispose.call(this)},o.prototype.equals=function(t,e,i,o,n,s,a,l){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&g.EqualsById(this._font,n)&&y.EqualsById(this._fill,s)&&b.EqualsById(this._border,a)&&r.Utils.equalObjects(this._cellProptectProps,l)},o.prototype.toXml=function(t,i){var o=this;e.XmlUtils.setAttr(i,"borderId",(this._border?this._border.id:0)+""),e.XmlUtils.setAttr(i,"fillId",(this._fill?this._fill.id:0)+""),e.XmlUtils.setAttr(i,"fontId",(this._font?this._font.id:0)+""),e.XmlUtils.setAttr(i,"numFmtId",this._formatId+""),e.XmlUtils.setAttr(i,"xfId","0");var n=e.XmlUtils.addChild(t,i,"alignment");if(e.XmlUtils.setAttr(n,"horizontal",this._horzAlign||"left"),e.XmlUtils.setAttr(n,"vertical",this._vertAlign||"center"),this._wrapText&&e.XmlUtils.setAttr(n,"wrapText","1"),this._cellProptectProps){var r=e.XmlUtils.addChild(t,i,"protection");Object.keys(this._cellProptectProps).forEach((function(t){e.XmlUtils.setAttr(r,t,o._cellProptectProps[t])}))}},o.prototype.cloneAsNew=function(t,e,i,n,r,s,a,l,h){return new o(this._collection,t,e||this._horzAlign,i||this._vertAlign,null!=n?n:this._wrapText,null!=r?r:this._formatId,s||this._font,a||this._fill,l||this._border)},o}(_);Wa.ExcelStyle=E;var R=function(i){function o(t,e,o){var n=i.call(this)||this;return n._fonts=t,n._fills=e,n._borders=o,n}return t.__extends(o,i),o.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,i.prototype.dispose.call(this)},o.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border,t._cellProptectProps))return i}return t._id=this.getIndexer(),t._collection=this,t},o.prototype.changeFormatId=function(t,e){for(var i,o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border,t._cellProptectProps))return i;return(i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null))._cellProptectProps=r.Utils.deepCopy(t._cellProptectProps),this._items.push(i),i},o.prototype.changeBorder=function(t,e){for(var i,o=this._borders.extend(t._border,e),n=this._items.length;n--;)if((i=this._items[n]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,o,t._cellProptectProps))return i;var s=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,o);return s._cellProptectProps=r.Utils.deepCopy(t._cellProptectProps),this._items.push(s),s},o.prototype.createInstance=function(t,e,i,o,n,r,s){return void 0===i&&(i=!1),void 0===o&&(o=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null),new E(this,this.getIndexer(),t,e,i,o,n,r,s)},o.prototype.createFromCss=function(t,e,i,o,n,r,s){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===s&&(s=null);var a,l,h=e?this._borders.createFromCss(t):null,u=i?this._fonts.createFromCss(t):null,d=o?this._fills.createFromCss(t):null,c=t["text-align"];c&&("center"==c?a="center":"right"==c?a="right":"left"==c&&(a="left"));var p=t["vertical-align"];return p&&("top"==p?l="top":"bottom"==p&&(l="bottom")),this.create(a,l,n,r,u,d,h,s)},o.prototype.toXml=function(t,i){for(var o=this._items.length,n=0;n<o;n++){var r=e.XmlUtils.addChild(t,i,"xf");this._items[n].toXml(t,r)}e.XmlUtils.setAttr(i,"count",o)},o}(f),T=function(){function t(t){this._numberFmts=[],this._fonts=new m(t),this._fills=new v,this._lines=new x,this._borders=new I(this._lines),this._styles=new R(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return t.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},t.prototype.addNumberFormat=function(e){var i=this._numberFmts.indexOf(e);return i<0&&(this._numberFmts.push(e),i=this._numberFmts.length-1),t.EXCEL_NUMFMT_START+i},t.prototype.addStyle=function(t,e,i,o,n,r){return t?this._styles.createFromCss(t,e,i,o,n,r):null},t.prototype.extendStyle=function(t,e,i,o,n){o=null==o?t._formatId:o;var s=this._styles.createFromCss(e,!0,!0,!0,i,o,n);return s._border=s._border||t._border,s._fill=s._fill||t._fill,s._font&&t._font?s._font.assignFrom(t._font):s._font=s._font||t._font,s._horzAlign=s._horzAlign||t._horzAlign,s._vertAlign=s._vertAlign||t._vertAlign,s._wrapText=null!=s._wrapText?s._wrapText:t._wrapText,s._formatId=null!=o&&null!=s._formatId?s._formatId:t._formatId,s._cellProptectProps=r.Utils.deepCopy(n)||r.Utils.deepCopy(t._cellProptectProps),this._styles.addStyle(s)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',i=e.XmlUtils.parse(t),o=i.documentElement;if(this._numberFmts.length>0){var n=e.XmlUtils.addChild(i,o,"numFmts");this._createNumberFormats(i,n)}var r=e.XmlUtils.addChild(i,o,"fonts");this._createFonts(i,r);var s=e.XmlUtils.addChild(i,o,"fills");this._createFills(i,s);var l=e.XmlUtils.addChild(i,o,"borders");this._createBorders(i,l);var h=e.XmlUtils.addChild(i,o,"cellStyleXfs");this._createDefXfs(i,h);var u=e.XmlUtils.addChild(i,o,"cellXfs");return this._createStyles(i,u),t=e.XmlUtils.toString(i),a.XML_HEAD_STRING+t},t.prototype._createNumberFormats=function(i,o){for(var n=0,r=this._numberFmts.length;n<r;n++){var s=e.XmlUtils.addChild(i,o,"numFmt");e.XmlUtils.setAttr(s,"formatCode",this._numberFmts[n]),e.XmlUtils.setAttr(s,"numFmtId",t.EXCEL_NUMFMT_START+n)}},t.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},t.prototype._createFills=function(t,e){this._fills.toXml(t,e)},t.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},t.prototype._createDefXfs=function(t,i){var o=e.XmlUtils.addChildWithAttr(t,i,"xf","count",1);e.XmlUtils.setAttr(o,"borderId",0),e.XmlUtils.setAttr(o,"fillId",0),e.XmlUtils.setAttr(o,"fontId",0),e.XmlUtils.setAttr(o,"numFmtId",0)},t.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},t.EXCEL_NUMFMT_START=200,t}();Wa.ExcelWorkbookStyles=T;var D=function(e){function o(t,i,o,n,r){var s=e.call(this,t)||this;return s._hash=i,s._width=o,s._style=n,s._hidden=r,s}return t.__extends(o,e),o.prototype.dispose=function(){this._style=null,e.prototype.dispose.call(this)},o.prototype.equals=function(t){return this.id==t},o.prototype.toTextXml=function(t){var e=this.id+1,o={min:e,max:e,width:this._width,customWidth:"1"};this._style&&(o.style=this._style.id),this._hidden&&(o.hidden="1"),i.TextXmlManager.addChild(t,"col",o)},o}(_);Wa.ExcelColumn=D;var k=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.createInstance=function(t,e,i,o){return new D(this.getIndexer(),t,e,i,o)},_dp(o,"count",{get:function(){return this._items.length}}),o.prototype.toTextXml=function(t){for(var e=i.TextXmlManager.addChild(t,"cols"),o=0,n=this.count;o<n;o++)this._items[o].toTextXml(e)},o.prototype.getWidth=function(t){for(var e=0;e<this._items.length;e++){var i=this._items[e];if(i._hash===t)return i._width}return-1},o}(f),M=function(){function t(t,e,i,o,n,r){void 0===n&&(n=""),this._range=a.toRange(e,t),this._style=i,this._type=n,this._fomula=r,this._value=o}return t.prototype.dispose=function(){this._style=null},_dp(t,"style",{get:function(){return this._style},set:function(t){this._style=t}}),t.prototype.toXmlText=function(){var e=[];return e.push("<"+t.ELEMENT_NAME),e.push(' r="'.concat(this._range,'"')),""!=this._type&&e.push(' t="'.concat(this._type,'"')),this._style&&e.push(' s="'.concat(this._style.id,'"')),e.push(">"),this._fomula&&e.push("<f>".concat(this._fomula,"</f>")),null!=this._value&&e.push("<v>".concat(this._value,"</v>")),e.push("</"+t.ELEMENT_NAME+">"),e.join("")},t.ELEMENT_NAME="c",t}(),L=function(){function t(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}return _dp(t,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t}}),_dp(t,"index",{get:function(){return this._index}}),t.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null;this._cells=null},t.prototype.toXmlText=function(){var e=[];e.push("<"+t.ELEMENT_NAME),e.push(' r="'.concat(this._index+1,'"')),this._height&&this._height>-1&&(e.push(' ht="'.concat(this._height,'"')),e.push(' customHeight="1"')),null!=this._outlineLevel&&e.push(' outlineLevel="'.concat(this._outlineLevel,'"')),e.push(">");for(var i=0,o=this._cells.length;i<o;i++){var n=this._cells[i];n&&e.push(n.toXmlText())}return e.push("</"+t.ELEMENT_NAME+">"),e.join("")},t.prototype.borrowCell=function(t,e,i,o,n){void 0===o&&(o="");var r=this._cells[t];r&&r.dispose(),r=new M(this._index,t,e,i,o,n),this._cells[t]=r},t.prototype.addBlank=function(t,e){this.borrowCell(t,e)},t.prototype.addCell=function(t,e,i,o,n){this.borrowCell(t,o,i,e,n)},t.prototype.addText=function(t,e,i){var o=null!=e?String(e):"",n=this._book.addSharedString(o);this.addCell(t,"s",n,i)},t.prototype.addNumber=function(t,e,i,o){var n=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",n,i,o)},t.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},t.prototype.addDate=function(t,e,i){if(e){var o=a.toExcelDate(e);this.addNumber(t,o,i)}else this.addCell(t,"s","",i)},t.prototype.addLink=function(t,e,i,o){if(i&&""!=i){var n=document.createElement("div");n.innerText=n.textContent=i,i=n.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),n.innerText=n.textContent=e,i='HYPERLINK("'+i+((e=n.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"))?'","'+e+'")':'")'),this.addCell(t,"str",e,o,i)}else this.addText(t,e,o)},t.prototype.addImage=function(t,e,i,o,n,r,a,l){if(n)return e&&o!==s.IconLocation.CENTER?this.addText(t,e,r):this.addBlank(t,r),this._sheet.addImage(t,this._index,i,this._height,o,n,a,l);e?this.addText(t,e,r):this.addBlank(t,r)},t.prototype.addSparkLine=function(t,e,i,o){var n=i.layout.firstColumn,r=this._sheet,s=this._index,l=r.borrowSparkGroup(n.index,i.sparkLineGroup),h=l.range.start,u=l.range.end-h+1,d=l.range.row;d=null==d?0:d;var c=l.sparkLines,p=r.name+"!"+a.toRange(e+h,s+d,!0,u);c[a.toRange(t,this._index)]=p,this.addBlank(t,o)},t.ELEMENT_NAME="row",t.LINE_REGEX=/\r|\n|\r\n/,t.BR_REGEX=/<br>|<br\/>/,t}();Wa.ExcelRow=L;var O=function(){function t(t,e,i,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=t,this._index=e,this._name=i,this._attrs=o.sheetAttrs,this._protectPassword=o.protectPassword,this._protectProperties=o.protectProperties,this._sheetProtect=o.sheetProtect,this._columns=new k,this._prepare()}return t.prototype.dispose=function(){this._txmerge=null,i.TextXmlManager.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},_dp(t,"id",{get:function(){return t.RELATION_ID+this._index}}),_dp(t,"name",{get:function(){return this._name}}),_dp(t,"colCount",{get:function(){return this._columns.count}}),_dp(t,"rowCount",{get:function(){return this._dataRows.length}}),_dp(t,"workbook",{get:function(){return this._book}}),_dp(t,"drawing",{get:function(){return this._drawing}}),t.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},t.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},t.prototype.setFirstCol=function(t){this._firstCol<0&&(this._firstCol=t)},t.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null;this._dataRows=[]},t.prototype.addColumn=function(t,e,i,o){return this._columns.createUnique(t,e,i,o)},t.prototype.getColumnWidth=function(t){return this._columns.getWidth(t)},t.prototype.getMergeInfo=function(t,e){return this._mergeInfos["".concat(t,":").concat(e)]},t.prototype.addRow=function(t,e){return this._dataRows[t]=new L(this,t,e)},t.prototype.getRow=function(t){return this._dataRows[t]},t.prototype.borrowRow=function(t,e){return this._dataRows[t]||this.addRow(t,e)},t.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},t.prototype.setRowLevel=function(t,e){if(e>=0){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},t.prototype.addMerge=function(t,e,i,o){if(i>1||o>1){var n=a.toRange(e,t,!0,o,i);this._mergeInfos["".concat(t,":").concat(e)]={row:t,rows:i,col:e,cols:o,range:n}}},t.prototype.createPart=function(){var t=this._txdoc,e="A1:"+a.toRange(this._columns.count-1,this._dataRows.length-1);i.TextXmlManager.addChild(t,"dimension",{ref:e}),this._outlineLevel>0&&i.TextXmlManager.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var o=i.TextXmlManager.addChild(t,"sheetViews"),s={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&r.Utils.extendObj(this._attrs,s),0==this._book.count&&(s.tabSelected=1);var l=i.TextXmlManager.addChild(o,"sheetView",s);(this._fixedCol>0||this._fixedRow>0)&&i.TextXmlManager.addChild(l,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:a.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t);for(var h=i.TextXmlManager.addChild(t,"sheetData"),u=this._dataRows,d=this._borderEdges,c=0,p=u.length;c<p;c++){if(c==this._firstRow){for(var _=0,f=Math.max(0,this._firstCol);f<u[c]._cells.length;f++){(g=u[c]._cells[f])&&d&&(g.style=this._book.changeBorderId(g.style,d[_++?"top":"leftTop"]))}for(f=u[c]._cells.length;f--;){if((g=u[c]._cells[f])&&d){g.style=this._book.changeBorderId(g.style,d.rightTop);break}}}else if(c===this._lastRow){for(_=0,f=Math.max(0,this._firstCol);f<u[c]._cells.length;f++){(g=u[c]._cells[f])&&d&&(g.style=this._book.changeBorderId(g.style,d[_++?"bottom":"leftBottom"]))}for(f=u[c]._cells.length;f--;){if((g=u[c]._cells[f])&&d){g.style=this._book.changeBorderId(g.style,d.rightBottom);break}}}else if(c>this._firstRow&&c<this._lastRow){for(f=Math.max(0,this._firstCol);f<u[c]._cells.length;f++){if((g=u[c]._cells[f])&&d){g.style=this._book.changeBorderId(g.style,d.left);break}}for(f=u[c]._cells.length;f--;){var g;if((g=u[c]._cells[f])&&d){g.style=this._book.changeBorderId(g.style,d.right);break}}}u[c]&&i.TextXmlManager.addText(h,u[c].toXmlText())}if(this._sheetProtect){var m=i.TextXmlManager.addChild(t,"sheetProtection");if(i.TextXmlManager.addProperty(m,"sheet","1"),this._protectPassword){var y=(0,n.encryptExcelPassword)(this._protectPassword);i.TextXmlManager.addProperty(m,"password",y)}if(this._protectProperties){var v=this._protectProperties;Object.keys(v).forEach((function(t){i.TextXmlManager.addProperty(m,t,v[t])}))}}if(this._mergeCount=Object.keys(this._mergeInfos).length,this._mergeCount>0){for(var C in i.TextXmlManager.addProperty(this._txmerge,"count",this._mergeCount+""),this._mergeInfos)i.TextXmlManager.addChild(this._txmerge,"mergeCell",{ref:this._mergeInfos[C].range});i.TextXmlManager.addChildElement(this._txdoc,this._txmerge)}if(this._drawing&&i.TextXmlManager.addChild(t,"drawing",{"r:id":this._drawing.relationId}),Object.keys(this._sparkGroups).length>0){var w=i.TextXmlManager.addChild(t,"extLst"),x=i.TextXmlManager.addChild(w,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),b=i.TextXmlManager.addChild(x,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var c in this._sparkGroups){var I=this._sparkGroups[c],E=I.colors,S=I.sparkLines,R=i.TextXmlManager.addChild(b,"x14:sparklineGroup",{type:I.type||"line"});E.colorSeries&&i.TextXmlManager.addChild(R,"x14:colorSeries",{rgb:E.colorSeries}),E.colorMarkers&&(i.TextXmlManager.addProperty(R,"markers","1"),i.TextXmlManager.addChild(R,"x14:colorMarkers",{rgb:E.colorMarkers})),E.colorFirst&&(i.TextXmlManager.addProperty(R,"first","1"),i.TextXmlManager.addChild(R,"x14:colorFirst",{rgb:E.colorFirst})),E.colorLast&&(i.TextXmlManager.addProperty(R,"last","1"),i.TextXmlManager.addChild(R,"x14:colorLast",{rgb:E.colorLast})),E.colorHigh&&(i.TextXmlManager.addProperty(R,"high","1"),i.TextXmlManager.addChild(R,"x14:colorHigh",{rgb:E.colorHigh})),E.colorLow&&(i.TextXmlManager.addProperty(R,"low","1"),i.TextXmlManager.addChild(R,"x14:colorLow",{rgb:E.colorLow}));var T=i.TextXmlManager.addChild(R,"x14:sparklines");for(var D in S){var k=i.TextXmlManager.addChild(T,"x14:sparkline");i.TextXmlManager.addChild(k,"xm:f",void 0,S[D]),i.TextXmlManager.addChild(k,"xm:sqref",void 0,D)}}}return a.XML_HEAD_STRING+i.TextXmlManager.toString(t)},t.prototype.createBorderEdges=function(t){function e(e){var i={};return e.forEach((function(e){i["border-".concat(e,"-style")]=t["border-".concat(e,"-style")],i["border-".concat(e,"-color")]=t["border-".concat(e,"-color")],i["border-".concat(e,"-width")]=t["border-".concat(e,"-width")]})),this._book._styles._borders.createFromCss(i)||{}}t&&(this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])})},t.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},t.prototype.addImage=function(t,e,i,o,n,r,s,a){void 0===this._drawing&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++);var l=this._book.addImage(r);return this._drawing.add(t,e,i,o,n,l,s,a)},t.prototype._prepare=function(){this._txdoc=i.TextXmlManager.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=i.TextXmlManager.createDocument("mergeCells")},t.RELATION_ID="rId",t}();Wa.ExcelWorksheet=O;var F=function(){function t(t){this._sheet_indexer=3,this._drawing_indexer=1,this._parts={},this._parts={},this._strings=new l,this._images=new u,this._styles=new T(t),this._downloader=new n.ImageFileDownLoader,this._sheets=[],this._drawings=[],this._preapreTemplateParts()}return t.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach((function(t){t.dispose()})),this._drawings=null,this._sheets.forEach((function(t){t.dispose()})),this._sheets=null},_dp(t,"currentSheet",{get:function(){return this._currentSheet}}),_dp(t,"count",{get:function(){return this._sheets?this._sheets.length:0}}),_dp(t,"styles",{get:function(){return this._styles}}),_dp(t,"downloader",{get:function(){return this._downloader}}),_dp(t,"hasDrawing",{get:function(){return this._drawing_indexer>1}}),t.prototype.createSheet=function(t,e){var i=new O(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(i),this._currentSheet=i,i},t.prototype.createDrawing=function(t){var e=new p(this,t,this._drawing_indexer++);return this._drawings.push(e),e},t.prototype.addSharedString=function(t){return this._strings.add(t)},t.prototype.addImage=function(t){return this._images.add(t)},t.prototype.getImageMap=function(){return this._images.getImageMap()},t.prototype.getExcelImage=function(t){return this._images.getImage(t)},t.prototype.getImageIndex=function(t){return this._images.getImageId(t)},t.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},t.prototype.addStyle=function(t,e,i,o,n,r){if(null==n){var s=t.whiteSpace||t["white-space"];n=null!=s&&"none"!==s&&"nowrap"!==s}return this._styles.addStyle(t,e,i,o,n,r)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.extendStyle=function(t,e,i,o,n){return this._styles.extendStyle(t,e,i,o,n)},t.prototype.createParts=function(){var t=this._parts,e=i.TextXmlManager.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(i.TextXmlManager.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),i.TextXmlManager.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),i.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),i.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),i.TextXmlManager.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),i.TextXmlManager.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),i.TextXmlManager.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),this._drawings.length>0){for(var o=0;o<this._drawings.length;o++){var n="/xl/drawings/"+(f=this._drawings[o]).fileName;i.TextXmlManager.addChild(e,"Override",{PartName:n,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}var r=this.downloader.getContentTypes();Object.keys(r).forEach((function(t){i.TextXmlManager.addChild(e,"Default",{Extension:t,ContentType:r[t]})}))}var s=i.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});i.TextXmlManager.addChild(s,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),i.TextXmlManager.addChild(s,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var l=i.TextXmlManager.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});i.TextXmlManager.addChild(l,"workbookPr",{date1904:"false"});var h=i.TextXmlManager.addChild(l,"bookViews");i.TextXmlManager.addChild(h,"workbookView",{activeTab:"0"});for(var u=i.TextXmlManager.addChild(l,"sheets"),d=(o=0,this._sheets.length);o<d;o++){var c=this._sheets[o],p="worksheets/sheet"+(o+1).toString()+".xml",_="xl/"+p;if(t[_]=c.createPart(),e&&i.TextXmlManager.addChild(e,"Override",{PartName:"/"+_,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),u&&i.TextXmlManager.addChild(u,"sheet",{name:c.name||"Sheet"+(o+1).toString(),sheetId:(o+1).toString(),"r:id":c.id}),s&&i.TextXmlManager.addChild(s,"Relationship",{Id:c.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:p}),c.drawing){var f=c.drawing;t[_="xl/worksheets/_rels/sheet"+(o+1).toString()+".xml.rels"]=f.createSheetRel(),t[_="xl/drawings/_rels/"+f.fileName+".rels"]=f.createRel(),t[_="xl/drawings/"+f.fileName]=f.createPart()}}var g=a.XML_HEAD_STRING;return t["[Content_Types].xml"]=g+i.TextXmlManager.toString(e),t["xl/workbook.xml"]=g+i.TextXmlManager.toString(l),t["xl/_rels/workbook.xml.rels"]=g+i.TextXmlManager.toString(s),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},t.prototype._preapreTemplateParts=function(){var t=this._parts,e=a.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},t}();return Wa.ExcelWorkbook=F,Wa}var Ya,qa={},Xa={};function Ka(){if(Ya)return Xa;Ya=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.GridItemProvider=void 0;var t=d,e=pi(),i=C(),o=ro(),n=to(),r=co(),s=function(e){function s(t,s){void 0===s&&(s=null);var a=e.call(this,null,t)||this;return a._groupSorting=!0,a._groupSortDirection=i.SortDirection.ASCENDING,a._groupSortCase=i.SortCase.SENSITIVE,a.source=a._rs=new o.DefaultItemProvider(!1),a._groupedProvider=new n.GroupedItemProvider(a._rs,!1),a._groupedProvider.footerCounter=s,a._summarizer=new r.DefaultSummarizer(a._rs),a}return t.__extends(s,e),s.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},_dp(s,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)}}),_dp(s,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(s,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t}}),_dp(s,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(s,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t}}),_dp(s,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(s,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t}}),_dp(s,"grouped",{get:function(){return this._groupedProvider.grouped}}),_dp(s,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode}}),_dp(s,"groupLevels",{get:function(){return this._groupedProvider.groupCount}}),_dp(s,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount}}),_dp(s,"groupByFields",{get:function(){return this._groupedProvider.groupedFields}}),_dp(s,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t}}),_dp(s,"summarizer",{get:function(){return this._summarizer}}),s.prototype.canGrouping=function(t){return this.source.canGrouping(t)},s.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},s.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},s.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},s.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},s.prototype.beginFiltering=function(){this._rs.beginFilter()},s.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},s.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},s.prototype.orderBy=function(t,e,o){if(this._groupedProvider.grouped&&this._groupSorting){for(var n=e?e.length:0,r=o?o.length:0,s=this._groupedProvider.groupedFields,a=this._rs.getSortDirections(),l=this._rs.getSortCases(),h=[],u=0,d=s.length;u<d;u++)h.push(s[u]);for(u=0,d=t.length;u<d;u++){var c=t[u],p=h.indexOf(c),_=void 0,f=void 0;_=n>u?e[u]:n>0?e[n-1]:i.SortDirection.ASCENDING,f=r>u?o[u]:r>0?o[r-1]:i.SortCase.SENSITIVE,p<0?(h.push(c),a[h.length-1]=_,l[h.length-1]=f):(a[p]=_,l[p]=f)}s=h,this._rs.orderBy(s,a,l)}else this._rs.orderBy(t,e,o)},s.prototype.getSortFields=function(){return this._rs.getSortFields()},s.prototype.getSortDirections=function(){return this._rs.getSortDirections()},s.prototype.getSortCases=function(){return this._rs.getSortCases()},s.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},s.prototype.groupBy=function(t,e,o,n){void 0===e&&(e=!0),void 0===o&&(o=i.SortDirection.ASCENDING),void 0===n&&(n=i.SortCase.SENSITIVE),(t&&!(t.length<1)||this._groupedProvider.grouped)&&this.source.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=o,e&&this._rs.orderBy(t,[o],[n],!1),this.$_groupBy(t))},s.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this.source.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},s.prototype.$_groupBy=function(t,e){t&&t.length>0?(this.source=this._groupedProvider,this._groupedProvider.groupByMode(t,e)):(this._groupedProvider.groupByMode(t,e),this.source=this._rs)},s.prototype.addGroupBy=function(t,e,i){var o;if(this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this.source.canGrouping(o)){if(this._groupSorting){var n=[this._groupSortDirection];this._rs.orderBy(o,n,null,!1)}this.$_groupBy(o)}},s.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,n=0,r=i.length-1;r>=0;r--)if(n++,i[r]==t){o=r;break}if(o>=0){if(i.splice(o,e?n:1),!this.source.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this.$_groupBy(i)}else{if(!this.source.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},s.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},s.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},s.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},s.prototype.collapse=function(t,e,i,o){this._groupedProvider.collapse(t,e,i,o)},s.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},s.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},s.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},_dp(s,"page",{get:function(){return this._rs.page}}),s.prototype.setPage=function(t,e){this._rs.setPage(t,e)},_dp(s,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t}}),s.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},s.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},s.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},_dp(s,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(s,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),s.prototype.resetCheckables=function(){this._rs.resetCheckables()},s.prototype.applyCheckables=function(){this._rs.applyCheckables()},s.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},s.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},s.prototype.getPrevRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&t.index>0?this._rs.getItem(t.index-1):this._rs.getItem(0)},s.prototype.getNextRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},s.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},s.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(s,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(s,"itemLength",{get:function(){return this._rs.itemLength}}),_dp(s,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount}}),_dp(s,"sorted",{get:function(){return this._rs.sorted}}),_dp(s,"movable",{get:function(){return!this.grouped&&this._rs.movable}}),s.prototype.getAllItems=function(){return this.source.getAllItems()},s.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},s.prototype.findItem=function(t,e,i,o,n){return this._groupedProvider.findItem(t,e,i,o,n)},s.prototype.findCell=function(t,e,i,o,n,r){return this._groupedProvider.findCell(t,e,i,o,n,r)},s.prototype.checkItems=function(t,e,i){this.source.checkItems(t,e,i)},s.prototype.checkItem=function(t,e,i,o){this.source.checkItem(t,e,i,o)},s.prototype.checkAll=function(t,e,i,o,n){this.source.checkAll(t,e,i,o,n)},s.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},s.prototype.setItemChecked=function(t,e){return this._rs.setItemChecked(t,e)},s.prototype.getItemChecked=function(t,e){return this._rs.getItemChecked(t,e)},s.prototype.setGroupCheckable=function(t){this.grouped&&this._groupedProvider.setGroupCheckable(t)},s.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},s.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},s.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},s.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},s.prototype._doBeginUpdate=function(t){var i=e.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(i),i},s.prototype._doBeginAppendDummy=function(){var t=e.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},s.prototype._doBeginAppend=function(t){var i=e.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(i),i},s.prototype._doBeginInsert=function(t,i,o,n){var r=e.prototype._doBeginInsert.call(this,t,i,o,n);return this._groupedProvider.$_setEditItem(r),r},s.prototype._doCancelDummyEdit=function(){e.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},s.prototype._doCancelEdit=function(t,i){e.prototype._doCancelEdit.call(this,t,i),this._groupedProvider.$_setEditItem(null)},s.prototype._doCommitEdit=function(t,i){return!!e.prototype._doCommitEdit.call(this,t,i)&&(this._groupedProvider.$_setEditItem(null),!0)},s.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(n.GroupedItemProvider.GROUPING,e)},s.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(n.GroupedItemProvider.GROUPED)},s.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(n.GroupedItemProvider.EXPAND,e)},s.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(n.GroupedItemProvider.EXPANDED,e)},s.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(n.GroupedItemProvider.COLLAPSE,e)},s.prototype.onGroupedItemProviderCollapsed=function(t,e,i){this.fireEvent(n.GroupedItemProvider.COLLAPSED,e,i)},s.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},s.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},s.prototype.onItemProviderSorted=function(t){this._fireSorted()},s}(e.EditableItemProviderImpl);return Xa.GridItemProvider=s,Xa}var Ja,Za,Qa={},tl={};function el(){if(Ja)return tl;Ja=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.CellHandle=tl.HandleElement=void 0;var t=d,e=function(e){function i(t,i,o){void 0===o&&(o=null);var n=e.call(this,t,o)||this;return n._clickable=!1,n._owner=i,n}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())}}),i.prototype._getCssSelector=function(){return""},i.prototype._doDraw=function(t){},i.prototype._hoverChanged=function(){this.invalidate()},i.prototype._changed=function(){this.invalidate()},i}(hn().VisualElement);tl.HandleElement=e;var i=function(e){function i(t,i,o){return void 0===o&&(o=null),e.call(this,t,i,o)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"cellView",{get:function(){return this.owner}}),i}(e);return tl.CellHandle=i,tl}var il,ol={};var nl,rl,sl={};function al(){if(rl)return qa;rl=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.GridViewSelectionTool=qa.GridViewLayoutManager=qa.GridView=void 0;var t=d,e=Sa(),i=Ka(),o=Fs(),n=di(),r=C(),s=S(),a=Oo(),l=function(){if(Za)return Qa;Za=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.RowGroupElement=Qa.RowGroupRightFooterElement=Qa.RowGroupFixedFooterElement=Qa.RowGroupFooterElement=Qa.RowGroupRightHeaderElement=Qa.RowGroupHeaderElement=Qa.RowGroupHeaderCellElement=Qa.RowGroupPane=Qa.RowGroupBarPane=Qa.RowGroupBarContainer=Qa.RowGroupExpandHandle=Qa.RowGroupFootElement=Qa.RowGroupHeadElement=void 0;var t=d,e=qr(),i=Hn(),o=zn(),n=di(),r=al(),s=Pn(),a=Do(),l=hn(),h=$n(),u=Qn(),c=el(),p=S(),_=to(),f=la(),g=C(),m=Tn(),y=function(e){function i(t,i){return e.call(this,t,i)||this}return t.__extends(i,e),i.prototype._doUpdateContent=function(t,e,i){i[p.Utils.TextProp]=""},i.prototype._doRender=function(t){},i}(o.CellElement),v=function(e){function i(t,i){var o=e.call(this,t,null,i)||this;return o._cells=[],o._levels=0,o}return t.__extends(i,e),i.prototype._doDispose=function(){this._cells.forEach((function(t){t.dispose()})),this._cells=null,e.prototype._doDispose.call(this)},i.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=this.$_createCell();this._cells.push(e)}},i.prototype._doPrepareTableExtents=function(t){if(this._levels>0)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},i.prototype._doPrepareTableRow=function(t,i,o,n){e.prototype._doPrepareTableRow.call(this,t,i,o,n),n.className=this.$_getRowClassName(i)},i.prototype._prepareCellContent=function(t,e){var i=(0,p.getDoc)(t);return t[g.T_LEV]=e+1,i.createElement("div")},i.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},i.prototype._doRender=function(t){},i.prototype._getCellCount=function(t){return this._levels},i.prototype._getCellWidth=function(t,e){return this._cells[e].width},i}(i.SimpleTableElement),w=function(e){function i(t){return e.call(this,t,"rowGroupHeadView")||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-rowgroup-head"},i.prototype._getTableRowHeight=function(t,e){var i=this.grid,o=[];return i.header.visible&&o.push(t.headBounds.height),i.filterPanel.visible&&o.push(t.filterPanelBounds.height),i.headerSummaries.visible&&o.push(t.sumBounds.height),o[e]||0},i.prototype.$_createCell=function(){return new y(this.doc,"rowGroupHeadCellView")},i.prototype._getTableRowCount=function(t){var e=this.grid,i=0;return e.header.visible&&i++,e.filterPanel.visible&&i++,e.headerSummaries.isVisible()&&i++,i},i.prototype.$_getRowClassName=function(t){var e=this.grid,i=[];return e.header.visible&&i.push(""),e.filterPanel.visible&&i.push("rg-rowgroup-filter-panel"),e.headerSummaries.isVisible()&&i.push("rg-rowgroup-summary"),i[t]||""},i}(v);Qa.RowGroupHeadElement=w;var x=function(e){function i(t){return e.call(this,t,"rowGroupFootView")||this}return t.__extends(i,e),i.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},i.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},i.prototype.$_createCell=function(){return new y(this.doc,"rowGroupFootCellView")},i.prototype._getTableRowCount=function(t){return 1},i.prototype.$_getRowClassName=function(t){return"rg-rowgroup-foot-row"},i}(v);Qa.RowGroupFootElement=x;var b="rg-rowgroup-expander",I=b+" rg-rowgroup-expander-expanded",E=b+" rg-rowgroup-expander-collapsed",R=function(e){function i(t,i){var o=e.call(this,t,i,"rowGroupExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return t.__extends(i,e),i.isExpander=function(t){var e=t.className;return e&&e.indexOf(b)>=0},_dp(i,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),i.prototype._createDom=function(t){return t.createElement("span")},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.position="",t.style.display="inline-block"},i.prototype._getCssSelector=function(){return this._expanded?I:E},i.prototype._getCssDisplay=function(){return""},i.prototype._beforeDraw=function(t){this._setClassName(t)},i}(c.CellHandle);Qa.RowGroupExpandHandle=R;var T=function(e){function i(t){var i=e.call(this,t,"rowGroupBarCell")||this;return i._level=0,i._expander=new R(t,i),i.addChild(i._expander),i}return t.__extends(i,e),_dp(i,"level",{get:function(){return this._level},set:function(t){this._level=t}}),i.prototype.updateCell=function(t,i,o){e.prototype.updateCell.call(this,t,i,o);var r,s=i.item,a=s.getAncestor(this.bar.l);if(a){var l=t.rowGroup;r=(a.expanded?l.expandedAdornments:l.collapsedAdornments)===g.RowGroupAdornments.SUMMARY}if(a&&(s instanceof n.GroupItemImpl&&s===a||a.getFirstVisibleItem(r)===s)&&a.level===this.bar.l){var h=this._expander._dom;o.appendChild(h),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=a.expanded;var u=t.rowGroup.$_isExpanderVisible(a);this._expander.visible=!a.expanded||null==u||u,h[g.T_ROW]=s.index}else this._expander.visible=!1;o.style.paddingTop="2px"},i.prototype.validate=function(){e.prototype.validate.call(this);var t=this._expander._dom;p.Utils.detach(t)},i}(o.CellElement),D=function(e){function i(t){var i=e.call(this,t,null,"rowGroupBarContainer")||this;return i._cells=[],i._levels=0,i._bars=[],i}return t.__extends(i,e),i.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},i.prototype.prepare=function(t,e){this._levels=e},i.prototype.getLevelIndent=function(t){return t*this.width/this._levels},i.prototype.getViewOf=function(t){for(var e=this.getChildren(),i=0,o=e.length;i<o;i++){var n=e[i];if(n._expander._dom===t)return n}},i.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},i.prototype._prepareCellContent=function(t,e){return(0,p.getDoc)(t).createElement("div")},i.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,n=this.width/this._levels,r=this._bars,s=r.length,l=t.topIndex,h=t.fixedItemCount,u=h>0;this.childCount<s;)e=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var d=0;d<s;d++){var c=r[d];e=this.getChild(d);var p=c.tr1,_=u?p<h?p:p-1+l:p+l,f=a.CellIndex.temp(i,_),g=o.getBarCell(f),m=t.getTableItemBounds(c.r);e.bar=c,e.level=c.c+1,e.updateCell(i,g,this.getCellContent(p,c.c)),m.x=n*c.c,m.width=n,e.setRect(m)}},i.prototype._doRender=function(t){},i.prototype._doPrepareTableRows=function(t,i){e.prototype._doPrepareTableRows.call(this,t,i),this.$_layoutBarCells(t,i)},i.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount>0&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},i.prototype._getCellCount=function(t){return this._levels},i.prototype._getCellWidth=function(t,e){return this.width/this._levels},i.prototype._createCell=function(){return new T(this.doc)},i.prototype.$_calcLevels=function(t,e,i,o){for(var n,r=[],s=1,a=0,l=0;l<o-i;l++){var h=t[l+i].getAncestor(e);r.push(-1),h&&n===h||(r[a]=s,n=h,a=r.length-1,s=0),s++}return r[a]=s,r},i.prototype.$_layoutBarCells=function(t,e){var i=t.$_getItems(),o=i.length,r=t.fixedItemCount,s=e.children,a=this._bars=[];if(!(o<1)){for(var l=0,h=this._getCellCount(t);l<h;l++){var u=l+1,d=0,c=0;if(r>0){for(var _=void 0,f=void 0;d<r;d++,c++)(f=(_=s[c]).children[l]).style.display="",f.removeAttribute("rowspan"),p.Utils.setClassName(f,""),0===l&&p.Utils.setClassName(_,""),f[g.T_ROW]=d;_=s[c++],0===l&&p.Utils.setClassName(_,m.FixedOptions.ROW_BAR_STYLE),(f=_.children[l]).style.display="",f.removeAttribute("rowspan"),p.Utils.setClassName(f,m.FixedOptions.ROW_BAR_CELL_STYLE)}if(d<o)for(var y=this.$_calcLevels(i,u,d,o),v=0;d<o;d++,v++,c++){var C=y[v],w=(f=(_=s[c]).children[l],i[d]),x=w.getAncestor(u);if(0===l&&p.Utils.setClassName(_,""),f.removeAttribute("rowspan"),C>0){var b=this.grid.rowGroup,I=x&&(x.expanded?b.expandedAdornments:b.collapsedAdornments)===g.RowGroupAdornments.SUMMARY,E=1===C&&x&&(w instanceof n.GroupItemImpl||x.getFirstVisibleItem(I)===w);(C>1||E)&&(a.push({r:d,tr1:c,tr2:c+C-1,c:l,l:u}),f.rowSpan=C),f.style.display="",p.Utils.setClassName(f,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(u)),f[g.T_ROW]=w.index}else f.style.display="none",p.Utils.setClassName(f,"")}}a.sort((function(t,e){return t.r-e.r}))}},i}(i.DataTableElement);Qa.RowGroupBarContainer=D;var k=function(e){function i(t){var i=e.call(this,t,"rowGroupBarPane")||this;return i._barContainer=new D(t),i.addChild(i._barContainer),i._footView=new x(t),i.addChild(i._footView),i._headView=new w(t),i.addChild(i._headView),i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels}}),i.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},i.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o),this._footView.prepare(o),this._barContainer.prepare(t,o),new s.Size(this.levelCount*t.rowGroup.levelIndent,i)},i.prototype._doLayoutContent=function(t){var e=this.grid,i=t.headBounds;if(this._headView.visible=e.header.visible||e.headerSummaries.isVisible()||e.filterPanel.visible){var o=0;e.header.visible&&(o+=i.height),e.headerSummaries.isVisible()&&(o+=t.summaryBounds.height),e.filterPanel.visible&&(o+=t.filterPanelBounds.height),this._headView.setBounds(0,i.y,this.width,o),this._headView.layoutContent(t)}i=t.footBounds,(this._footView.visible=e.footers.isVisible())&&(this._footView.setBounds(0,i.y,this.width,i.height),this._footView.layoutContent(t)),i=t.rowBarBounds,this._barContainer.setBounds(0,i.y,this.width,i.height),this._barContainer.layoutContent(t)},i.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},i}(e.ContentPane);Qa.RowGroupBarPane=k;var M=function(e){function i(t){return e.call(this,t,"rowGroupPane")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i}(e.ContentPane);Qa.RowGroupPane=M;var L=function(e){function i(t){var i=e.call(this,t,"rowGroupHeaderCellView")||this;return i._indent=0,i}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)}}),i.prototype._createDom=function(t){return t.createElement("div")},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t);var i=t.style;i.top="50%",i.msTransform=i.transform="translate(0px, -50%)",i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},i.prototype._beforeDraw=function(t){},i.prototype._doUpdateContent=function(t,e,i){i[p.Utils.TextProp]=e.text,i.style.left=this._indent>0?this._indent+"px":""},i}(o.CellElement);Qa.RowGroupHeaderCellElement=L;var O=function(e){function i(t){var i=e.call(this,t,"rowGroupHeaderView")||this;return i._cellView=new L(t),i.addChild(i._cellView),i}return t.__extends(i,e),i.prototype._doDispose=function(){this._item=null,this._cellView=null,e.prototype._doDispose.call(this)},_dp(i,"item",{get:function(){return this._item},set:function(t){this._item=t}}),_dp(i,"itemIndex",{get:function(){return this._item.index}}),i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},i.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},i.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},i}(h.GridElement);Qa.RowGroupHeaderElement=O;var F=function(e){function i(t){return e.call(this,t,"rowGroupRightHeaderView")||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._item=null,e.prototype._doDispose.call(this)},_dp(i,"item",{get:function(){return this._item},set:function(t){this._item=t}}),i.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},i}(h.GridElement);Qa.RowGroupRightHeaderElement=F;var P=function(e){function i(t){return e.call(this,t,"rowGroupFooterView")||this}return t.__extends(i,e),i.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=r,l=this._getEndCell(t)-n,h=this._item instanceof _.MergedGroupFooter;h&&(s=Math.max(r,this._item.parent.level-n)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,l),s=0;for(var u=0;u<o;u++){var d=this._getTableRow(t,this._domIndex+u),c=this._getBodyCells(this._domIndex+u),p=i.getFooterStyleName(this._item);d.className=p;for(var g=s;g<=l;g++){var m=c[g],y=m.layout;if(!(h&&m.merged&&m.head&&m===m.head))if(e.isRecycleMode()&&d.recycle);else if(m.clearExpander(),m.clearButtons(),m.renderer2&&m.renderer2.clearContent(),m.visible)if(y.isNull)y.isProxy||m.setClassName(f.RowGroup.FOOTER_CELL_STYLE);else{var v=a.CellIndex.temp(e,this._item.index,y),C=i.getFooterCell(v);this._updateCell(e,i,C,m)}}}},i.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},i.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},i.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell(!1)},i.prototype._getEndCell=function(t){return t.getEndCell(!1)},i.prototype._getBodyView=function(){return this.parent._bodyView},i.prototype._updateCell=function(t,e,i,o){var n=i.dataColumn.groupFooters.get(i.footerIndex),r=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary(),a=o.cell.firstElementChild;if(o.setClassName(r.styleName),p.Utils.setClassName(a,f.RowGroup.FOOTER_CELL_RENDERER),o.refreshFormatters(r),e.getFooterCellFormatters(n,o),s){var l=i.getTemplate(o);void 0===l?a[p.Utils.TextProp]=i.getDisplayText(o):a.innerHTML=l}else a[p.Utils.TextProp]=""},i.prototype.$_refreshSpans=function(t,e,i,o,n){for(var r=this.grid.layoutManager._tableRowPoints,s=0;s<i;s++)for(var a=this._getBodyCells(this._domIndex+s),l=o;l<=n;l++){var h=a[l],u=h.layout,d=u.parent,c=d&&d.vertical;if(h.spanned);else if(u.isProxy)h.clear(!1);else{var p=0,_=0,f=u.getGroupFooterUserSpan(this._item.parent,e),g=f?0:u.getGroupFooterSpan(t,e)-1;if(f){var m=this._item,y=(m.parent.footerCount-m.vindex)*i,v=f.footerCount||0,C=v>0?v*i:f.rowspan||1,w=f.colspan||1;C=Math.min(C,y),h.set(w,C,!0);for(var x=0;x<C;x++)for(var b=this._getBodyCells(this._domIndex+x+s),I=0;I<w;I++){var E=b&&b[I+l];E&&E!==h&&E.span(h)}}else if(g>0){var S=0,R=u.vindex+1;if(c)for(;S++<g&&S<i;)_+=(T=d.getVisible(R++))._dspan,this._getBodyCells(this._domIndex+s+1)[l].span(h);else for(;S++<g&&l-o+S<a.length&&R<d.visibleCount;){var T;if(!(T=d.getVisible(R++)))break;p+=T._cspan,a[l+S].span(h)}}u.isNull&&h.clear(!0),!f&&h.set(u._cspan+p,u._dspan+_,!0),h.rowSpan>1&&(h.height=r[h.rowIndex+h.rowSpan]-r[h.rowIndex],h.cell.firstElementChild.style.maxHeight=h.height-2+"px")}}},i}(u.ItemElement);Qa.RowGroupFooterElement=P;var B=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},i.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},i.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},i.prototype._getBodyView=function(){return this.parent._fixedView},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i}(P);Qa.RowGroupFixedFooterElement=B;var V=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(i,e),i.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},i.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},i.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},i.prototype._getBodyView=function(){return this.parent._rightView},i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i}(P);Qa.RowGroupRightFooterElement=V;var N=function(e){function i(t,i){var o=e.call(this,t,i||"rowGroupLayer")||this;return o._headerPool=[],o._headerViews=[],o._rightHeaderPool=[],o._rightHeaderViews=[],o._footerPool=[],o._footerViews=[],o._fixedFooterPool=[],o._fixedFooterViews=[],o._rightFooterPool=[],o._rightFooterViews=[],o._indents=[],o}return t.__extends(i,e),i.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,e.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this.getAncestor(r.GridView)}}),i.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},i.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t);var i=t.style;i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},i.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},i.prototype._doDraw=function(t){},i.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},i.prototype.$_prepareIndents=function(t){for(var e=this._indents=[],i=t.rowGroupLevels+1,o=0;o<i;o++)e[o]=t.getLevelIndent(o);return e},i.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),o=t.$_getItems(),r=o.length,s=t.fixedItemCount,a=s>0,l=this._rightView,h=t.contentBounds.right-t.sideContentBounds.x,u=0,d=0,c=t.trs,_=s,f=a?_*c+1:_*c;for(l&&(e=t.rightContentBounds.clone(),h=Math.min(h,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));_<r;_++){var m=o[_];if(m instanceof n.GroupItemImpl){var y=this._headerViews[u],v=t.getTableItemBounds(_),C=i[m.level];if(y.item=m,y.setBounds(C,v.y,h-C,v.height),y.layoutContent(t),l){var w=this._rightHeaderViews[u];w.item=m,w.setBounds(e.x,v.y,e.width,v.height),w.layoutContent(t)}u++,f++}else if(m instanceof n.GroupFooter){var x=this.grid,b=x.displayOptions.refreshMode;!x._needRefresh&&x._horzScrolled&&b!==g.RefreshMode.VISIBLE_ONLY||(this._fixedView&&((y=this._fixedFooterViews[d]).updateItem(m,f,c,!0),y.layoutContent(t)),this._rightView&&((y=this._rightFooterViews[d]).updateItem(m,f,c,!0),y.layoutContent(t)),this._bodyView&&(y=this._footerViews[d++],p.Utils.isDebugging(),y.updateItem(m,f,c,!0),y.layoutContent(t))),f+=c}else f+=c}},i.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,r=e.length;o<r;o++)e[o]instanceof n.GroupItemImpl&&i++;for(var s=this._headerPool,a=this._headerViews;a.length<i;)(l=s.pop())||(l=new O(this.doc)),this.addChild(l),a.push(l);for(;a.length>i;){var l=a.pop();this.removeChild(l),s.push(l)}var h=this._rightHeaderPool,u=this._rightHeaderViews;if(this._rightView){for(;u.length<i;)(l=h.pop())||(l=new F(this.doc)),this.addChild(l),u.push(l);for(;u.length>i;)l=u.pop(),this.removeChild(l),h.push(l)}else for(;u.length>0;)l=u.pop(),this.removeChild(l),h.push(l)},i.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},i.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,r=t.length;o<r;o++)t[o]instanceof n.GroupFooter&&i++;for(;this._footerViews.length<i;)(s=this._footerPool.pop())||(s=new P(this.doc)),this.addChild(s),this._footerViews.push(s);for(;this._footerViews.length>i;){var s=this._footerViews.pop();this.removeChild(s),this._footerPool.push(s)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)(s=this._fixedFooterPool.pop())||(s=new B(this.doc)),this.addChild(s),this._fixedFooterViews.push(s);for(;this._fixedFooterViews.length>i;)s=this._fixedFooterViews.pop(),this.removeChild(s),this._fixedFooterPool.push(s)}else for(;this._fixedFooterViews.length>0;)s=this._fixedFooterViews.pop(),this.removeChild(s),this._fixedFooterPool.push(s);if(this._rightView){for(;this._rightFooterViews.length<i;)(s=this._rightFooterPool.pop())||(s=new V(this.doc)),this.addChild(s),this._rightFooterViews.push(s);for(;this._rightFooterViews.length>i;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)}else for(;this._rightFooterViews.length>0;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)},i.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},i.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},i.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},i.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},i.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},i.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},i.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},i.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},i.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},i}(l.LayerElement);return Qa.RowGroupElement=N,Qa}(),h=nr(),u=function(){if(il)return ol;il=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.GroupingOptions=void 0;var t=d,e=Rn(),i=jr(),o=function(e){function o(t){var o=e.call(this,t)||this;return o._enabled=!0,o._prompt="컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",o._expandWhenGrouping=!0,o._summarizing=!0,o._commitBeforeGrouping=!0,o._commitBeforeExpand=!0,o._commitBeforeCollapse=!0,o._fixMergedColumns=!0,o._toast=new i.ToastOptions({visible:!1,message:"Grouping..."}),o._headerClickable=!1,o}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(o,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())}}),_dp(o,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())}}),_dp(o,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())}}),_dp(o,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t}}),_dp(o,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t}}),_dp(o,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t}}),_dp(o,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t}}),_dp(o,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t}}),_dp(o,"toast",{get:function(){return this._toast}}),o.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},o}(e.GridBaseOptions);return ol.GroupingOptions=o,ol}(),c=to(),p=la(),_=To(),f=function(){if(nl)return sl;nl=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.GroupPanelElement=sl.GroupPanelItemView=void 0;var t=d,e=Pn(),i=$n(),o=S(),n=function(i){function n(t){var e=i.call(this,t)||this;return e._field=-1,e._text="",e._textWidth=0,e._textHeight=0,e._closeHeight=0,e._padHorz=5,e._padVert=4,e._itemGap=8,e}return t.__extends(n,i),n.prototype._doDispose=function(){o.Utils.detach(this._textView),o.Utils.detach(this._closeView),this._textView=this._closeView=null,i.prototype._doDispose.call(this)},_dp(n,"field",{get:function(){return this._field}}),_dp(n,"text",{get:function(){return this._text}}),n.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[o.Utils.TextProp]=this._text=t.displayText},n.prototype.isCloseButton=function(t){return t===this._closeView},n.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},n.prototype._initDom=function(t){i.prototype._initDom.call(this,t);var e=(0,o.getDoc)(t);this._textView=e.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._closeView=e.createElement("span"),this._closeView.className="rg-group-panel-item-close",t.appendChild(this._closeView)},n.prototype._doMeasure=function(t,i,o){var n=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,r=this._textHeight=this._textView.offsetHeight;return r=Math.max(r,this._closeHeight=this._closeView.offsetHeight),r+=2*this._padVert,new e.Size(n,r)},n.prototype._doLayoutContent=function(t){},n.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},n}(i.GridElement);sl.GroupPanelItemView=n;var r=function(i){function r(t,e){var o=i.call(this,t,e)||this;return o._minHeight=0,o._itemViews=[],o._count=0,o._padHorz=16,o._padVert=10,o._itemGap=20,o.visible=!1,o}return t.__extends(r,i),r.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach((function(t,e){t.dispose()})),this._itemViews=null,o.Utils.detach(this._messageView),this._messageView=null,i.prototype._doDispose.call(this)},_dp(r,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())}}),r.prototype._getCssSelector=function(){return"rg-group-panel"},r.prototype._initDom=function(t){i.prototype._initDom.call(this,t);var e=(0,o.getDoc)(t);t.style.overflow="hidden";var n=this._messageView=e.createElement("span");n.className="rg-group-panel-message",t.appendChild(n)},r.prototype._doMeasure=function(t,i,n){var r=t.groupingOptions;this._count=t.rowGroupLevels;var s=this.minHeight,a=0,l=this._messageView.style;if(this._count>0?l.display="none":(l.display="",this._messageView[o.Utils.TextProp]=r.prompt,a=this._messageView.offsetHeight,s=Math.max(s,a+2*this._padVert),l.left=this._padHorz+"px",l.top=(s-a)/2+"px"),this.$_prepareItemViews(t,this._count),this._count>0){for(var h=0;h<this._count;h++){var u=(d=this._itemViews[h]).measure(t,i,n);d.width=u.width,a=Math.max(a,u.height)}for(s=Math.max(s,a+2*this._padVert),h=0;h<this._count;h++){var d;(d=this._itemViews[h]).height=a,d.y=(s-a)/2}}return new e.Size(i,s)},r.prototype._doPrepareContent=function(t){},r.prototype._doLayoutContent=function(t){if(this._count>0){var e=this._padHorz;this._padVert;for(var i=0;i<this._count;i++){var o=this._itemViews[i];o.x=e,e+=this._itemGap+o.width}}},r.prototype._doDraw=function(t){},r.prototype._visibleChanged=function(){var t=this.grid;t&&(t.invalidateLayout(),t.invalidatePosition())},r.prototype._doSizeChanged=function(){var t=this.grid;this.invalidate(!0),t&&(t.invalidateLayout(),t.invalidatePosition())},r.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,r=i.length;r<e;r++)i.push(new n(t.doc));for(r=0;r<e;r++){var s=i[r];s.setColumn(t.$_getVisibleRootByField(o[r],!0)),s.visible=!0,this.addChild(s)}for(r=e;r<i.length;r++)this.removeChild(i[r])},r}(i.VisualObjectElement);return sl.GroupPanelElement=r,sl}(),g=rs(),m=Mr(),y=Dr(),v=hn(),w=Do(),x=xo(),b=Zo(),I=tr(),E=Qn(),R=er(),T=wo(),D=zo(),k=function(e){function o(t,i,o){var n=e.call(this,t,i,o)||this;n._rowGroupSummaryRuntime=new a.RowGroupSummaryRuntime,n._addGridObject(n._rowGroup=new p.RowGroup(n)),n._rs=n._createItemSource(),n.itemSource=n._rs,n._groupingOptions=new u.GroupingOptions(n),n._groupingOptionsChanged(n._groupingOptions),n._groupPanelView=new f.GroupPanelElement(n.doc,n.rowGroup),n.topContentPane.addChild(n._groupPanelView);for(var r=[n._groupBarPane._headView,n._groupBarPane._footView,n._groupBarPane._barContainer],s=r.length-1;s>=0;s--){var l=r[s];n._tableViews[l.$_hash]=l}return n}return t.__extends(o,e),o.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),e.prototype._doDispose.call(this)},o.prototype._doCreateOtherElements=function(){this._groupView=new l.RowGroupElement(this.doc),this.addElement(this._groupView)},_dp(o,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t}}),_dp(o,"rowGroup",{get:function(){return this._rowGroup}}),_dp(o,"groupPanelView",{get:function(){return this._groupPanelView}}),_dp(o,"groupBarPane",{get:function(){return this._groupBarPane}}),_dp(o,"groupView",{get:function(){return this._groupView}}),_dp(o,"groupingOptions",{get:function(){return this._groupingOptions}}),_dp(o,"paged",{get:function(){return this._rs.page>=0}}),_dp(o,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)}}),_dp(o,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)}}),_dp(o,"rowGroupLevels",{get:function(){return this._rs.groupLevels}}),_dp(o,"rowGroupFields",{get:function(){return this._rs.groupByFields}}),_dp(o,"rowGrouped",{get:function(){return this._rs.grouped}}),_dp(o,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped}}),_dp(o,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime}}),o.prototype.isTree=function(){return!1},o.prototype.recursiveDeleting=function(){return!1},o.prototype._beforeChangeLayout=function(){this.ungroupBy()},o.prototype.isGrouped=function(t){return t&&t.groupLevel>0},o.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},o.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},o.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},o.prototype.groupByFieldNames=function(t,e,i){void 0===i&&(i=r.SortDirection.ASCENDING);var o=this.dataSource;if(o&&t&&t.length>0){for(var n=[],s=0;s<t.length;s++){var a=t[s],l=o.getFieldIndex(a),h=this.columnByField(a),u=h&&this.layoutByColumn(h);!u||this.rowGroup.mergeMode&&u.parent!=this.activeCellLayout._root||l>=0&&n.push(l)}n.length>0&&(e=void 0===e?this.rowGroup.sorting:e,this.groupBy(n,e,i))}else this.ungroupBy()},o.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},o.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,r.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},o.prototype.ungroupBy=function(){this.clearGroupBy()},o.prototype.addGroupBy=function(t,e){var i=this;e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||e.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,(function(){i.editController.remainFocusing(!0),i.$_doAddGroupBy(t,e)}))))},o.prototype.removeGroupByField=function(t){if(!(t<0)&&!this.isItemEditing(null)&&this.isGroupedField(t)){this._rs.removeGroupBy(t,!1),this.$_doRowGroupFooterMergeChanged(),this.editController.remainFocusing(!0)}},o.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},o.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},o.prototype.collapse=function(t,e,i,o){this.isItemEditing(null)||this._rs.collapse(t,e,i,o)},o.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},o.prototype.isGroupedColumn=function(t){return t&&t.dataIndex>=0&&this._rs.isGroupedField(t.dataIndex)},o.prototype.getSortFields=function(){return this.itemSource.getSortFields()},o.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},o.prototype.getSortCases=function(){return this.itemSource.getSortCases()},o.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},o.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},o.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},_dp(o,"isLayer",{get:function(){return!1}}),_dp(o,"summarizer",{get:function(){return this._rs.summarizer}}),o.prototype._createSidePane=function(){return this._groupBarPane=new l.RowGroupBarPane(this.doc)},o.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},o.prototype._createLayoutManager=function(){return new M(this)},o.prototype.canGrouping=function(){return this._groupPanelView.visible},o.prototype._canMerge=function(){return this.dataCount>0},_dp(o,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(o,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(o,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(o,"undoing",{get:function(){return this._rs.undoing}}),_dp(o,"redoing",{get:function(){return this._rs.redoing}}),o.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},o.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},o.prototype.execute=function(t){this._rs.execute(t)},o.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},o.prototype.getRowView=function(t,i){return i instanceof n.GroupItemImpl?this._groupView.getHeaderView(i):e.prototype.getRowView.call(this,t,i)},o.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},o.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},o.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(i.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(i.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(i.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),void 0!==t.filterMode&&(i.filterMode=t.filterMode),e.prototype.setOptions.call(this,t)}},o.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t),t instanceof b.CheckBar&&(this._rs.checkableExpression=t.checkableExpression)},o.prototype.resetCheckables=function(){this._rs.resetCheckables()},o.prototype.applyCheckables=function(){this._rs.applyCheckables()},o.prototype.getCheckedRows=function(t,e,i){var o,n;if(e){o=[];for(var r=0,s=this.itemCount;r<s;r++)(n=this.getItem(r)).checked&&n.dataRow>=0&&o.push(n.dataRow)}else o=this._rs.getCheckedRows(i);return t&&o.sort((function(t,e){return t-e})),o},o.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||n.dataRow>=0)&&e.push(n.index)}return e},o.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||n.dataRow>=0)&&e.push(n)}return e},o.prototype.getMergedItems=function(t,e,i,o){var n=function(){return l.index<u?h.mergeRows?a.$_checkFixedMerge(this.itemSource,r,t,u):null:a.$_checkMerge(this.itemSource,r,t,!0,u)}.bind(this),r=e instanceof x.DataColumn?e:this.columnByName(e),s=r.layout,a=s.merges,l=this.getItem(t);if(!l)return null;if(!a)return o?i&&!l.isDataRow?null:[l.index]:null;var h=this.fixedOptions,u=h.rowCount,d=n();if(!d){var c=this.getGroupLevel(r.dataIndex);(c>0&&r.mergeGrouped&&!this.isTree()?T.RowGroupMergeRule.getDefault(c,this.rowGroup.mergeMode):s.$_mergeRuleObj()).parseBounds(this.itemSource,r.dataIndex,0,this.itemCount-1,a._flags),d=n()}if(!d&&o)return[t];if(d){for(var p=[],_=d.top;_<=d.bottom;_++)(this.getItem(_).isDataRow||!i)&&p.push(_);return p.length>0?p:null}return null},o.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(i>0)for(var o=t instanceof n.GroupItem?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},o.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.id>=0?this._rs.getGroupItem(t.id):null},o.prototype.getJsonRows=function(){return this._rs.getJsonRows()},o.prototype.getIndicatorIndex=function(t,e){var i=this._rs.getDisplayItemIndex(t),o=this.paged?this._rs.itemLength:this.itemCount;return e?o-i-1:i},o.prototype.indicatorReverse=function(t){return!(this.rowGrouped&&this.paged)&&t===D.IndicatorValue.REVERSE},o.prototype.getFirstRow=function(){return this._rs.getFirstRow()},o.prototype.getLastRow=function(){return this._rs.getLastRow()},o.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},o.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},o.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t){for(var o=!1,n=0;n<t.length;n++){var r=t[n];r&&r.isDataRow&&(o=!0)}return o}},o.prototype._getMoveTarget=function(t,e,i,o){return this.getItem(i+o)},o.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(i>=0){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataRow;a>=0&&o.push(a)}if(o.length>0)return this.dataSource.moveRowList(o,i)}},o.prototype._getCellTypeOf=function(t){return t instanceof l.RowGroupHeadElement?"groupHead":t instanceof l.RowGroupFootElement?"groupFoot":t instanceof l.RowGroupBarContainer?"groupBar":void 0},o.prototype.updatePastedRow=function(t,e,i){var o=t.dataRow;if(o>=0){var n=this.dataSource;n&&n.updateRow(o,e,i)}},o.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e)return e.appendRow(t)},o.prototype.getSummaryCount=function(t){return"groupFooter"===t?this.rowGroup.footers.count:e.prototype.getSummaryCount.call(this,t)},o.prototype.isRecycleMode=function(){return e.prototype.isRecycleMode.call(this)&&(!this.rowGrouped||1===this.activeCellLayout.dataRows)},o.prototype._createItemSource=function(){return new i.GridItemProvider(!0,this._rowGroup)},o.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},o.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping,this.groupPanelView&&this.groupPanelView.invalidate()},o.prototype.$_rowGroupAdornmentsChanged=function(t,e){this._rs._groupedProvider.resetAdornments(this.handler,t,e)},o.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,o=0;o<i;o++){var n=this.getVisibleLayout(o),r=n instanceof _.CellLayoutColumnItem&&s.Utils.cast(n.firstColumn,x.DataColumn);if(r&&r.dataIndex==t)return r}return e?this.columnByField(t):null},o.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},o.prototype._doRowGroupMergeModeChanged=function(){e.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&t.length>0)for(var i=t.length-1;i>=0;i--){var o=this.$_getVisibleRootByField(t[i],!1);o?o.$_setMergeGrouped(!0):t.splice(i,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},o.prototype.$_doRowGroupFooterMergeChanged=function(){},o.prototype.$_doGroupBy=function(t,e,i){var o,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&t&&(o=t.length)>0){for(var s=n.fieldCount,a=[],l=0;l<o;l++)t[l]>=0&&t[l]<s&&a.push(t[l]);if(a.length>0){if(this.rowGroup.mergeMode)for(l=a.length-1;l>=0;l--){var h=this.$_getVisibleRootByField(a[l],!1);h?h.$_setMergeGrouped(!0):a.splice(l,1)}a.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(a)),this._rs.groupBy(a,e,i))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,r.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},o.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},o.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=s.Utils.cast(this.getColumn(t),x.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},o.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=s.Utils.cast(this.getColumn(t),x.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},o.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(o.PAGE_CHANGING,t)},o.prototype.$_firePageChanged=function(t){this.fireEvent(o.PAGE_CHANGED,t)},o.prototype.$_firePageCountChanged=function(t){this.fireEvent(o.PAGE_COUNT_CHANGED,t)},o.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(o.GROUPING,t)},o.prototype.$_fireGrouped=function(){this.fireEvent(o.GROUPED)},o.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(o.EXPANDING,t)},o.prototype.$_fireExpanded=function(t){this.fireEvent(o.EXPANDED,t)},o.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(o.COLLAPSING,t)},o.prototype.$_fireCollapsed=function(t){this.fireEvent(o.COLLAPSED,t)},o.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},o.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices(),this.groupPanelView.invalidate(),this.setNeedRefresh(!0);var e,i=this._rs.groupByFields;if(i&&i.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var o=[],n=this.visibleLayoutCount,r=0;r<n;r++){var a=this.getVisibleLayout(r),l=s.Utils.cast(a.firstColumn,x.DataColumn);e=a.merges,l&&(l.mergeGrouped&&l.groupLevel<=0?(e&&e.clear(),l.$_setMergeGrouped(!1)):l.mergeGrouped&&(e||(e=new T.ColumnMergeManager(a)),o.push(l)))}if((n=o.length)>0){o=o.sort((function(t,e){return t.groupLevel-e.groupLevel}));for(r=0;r<n;r++)(e=o[r].layout.merges).clear(),e.initialize(T.GridMergeRule.INIT_COUNT),o[r].layout.vindex=r}n=this.visibleLayoutCount;for(r=0;r<n;r++){(l=s.Utils.cast(this.getVisibleLayout(r).firstColumn,x.DataColumn))&&!l.mergeGrouped&&(e=l.layout.merges)&&(e.clear(),e.initialize(T.GridMergeRule.INIT_COUNT))}}this.requestPrepareEditor(),this._itemCheckChanged=!0,this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},o.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},o.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},o.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},o.prototype.onGroupedItemProviderCollapsed=function(t,e,i){if(i&&this.topIndex>e.getFirstVisibleItem(!1).index&&e instanceof c.MergedGroupHeader){var o=e.getFirstVisibleItem(!1),n=this.layoutByColumn(this.columnByField(e.groupField)),r=w.DummyCellIndex.tempItem(this,o,n);w.CellIndex.areEquals(this.focusedIndex,r)?this.topIndex=r.itemIndex:this.setFocusedIndex(r)}this.$_fireCollapsed(e)},o.PAGE_CHANGING="onGridViewPageChanging",o.PAGE_CHANGED="onGridViewPageChanged",o.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",o.GROUPING="onGridViewGrouping",o.GROUPED="onGridViewGrouped",o.EXPANDING="onGridViewExpanding",o.EXPANDED="onGridViewExpanded",o.COLLAPSING="onGridViewCollapsing",o.COLLAPSED="onGridViewCollapsed",o}(e.GridBase);qa.GridView=k;var M=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),_dp(i,"panelVisible",{get:function(){return this.grid.groupPanelView.visible}}),i.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,n=0;n<t;n++)o+=n<i?this.getFixedLayoutWidth(n):this.getLayoutWidth(n-i);return i?t>i?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):t===i&&(o+=this.fixedBarWidth):o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"topPanelVisible",{get:function(){return this.panelVisible}}),_dp(i,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(i,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(i,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels}}),_dp(i,"rowGroupFields",{get:function(){return this.grid.rowGroupFields}}),i.prototype.$_groupView=function(t){return this.grid.groupView},i.prototype.setLeftPos=function(t,i){e.prototype.setLeftPos.call(this,t,i);var o=this.grid,n=o.mergedRowGrouped,r=this.$_groupView(n);r.visible&&this.$_layoutRowGroupView(o,r)},i.prototype._prepareItems=function(t){e.prototype._prepareItems.call(this,t);var i=this.grid;if(i.rowGrouped){var o=i.mergedRowGrouped,n=this.$_groupView(o),r=this.contentBounds.isEmpty?null:i.bodyView,s=this.fixedContentBounds.isEmpty?null:i.fixedBodyView,a=this.rightContentBounds.isEmpty?null:i.rightBodyView;n.$_prepareGroupItems(this,r,s,a),n.$_prepareGroupFooters(this._items,this)}},i.prototype._doMeasureTopPane=function(t,e){var i=t.groupPanelView;if(this.panelVisible)if(i._dirty){var o=i.measure(t,e.width,e.height);e.height=o.height}else e.height=i.bounds.height;else e.height=1,e.width=1},i.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},i.prototype._doLayout=function(t,i){e.prototype._doLayout.call(this,t,i)},i.prototype._adjustLayout=function(t,i){e.prototype._adjustLayout.call(this,t,i);var o=t.rowGrouped,n=t.mergedRowGrouped,r=t._sideContentPane;r&&this._layoutSidePane(t,r);var s=this.$_groupView(n);this.$_groupView(!n).visible=!1,(s.visible=o)&&this.$_layoutRowGroupView(t,s)},i.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var o=i.merges;if(o)return null!=o.getRoom(t)}return!1},i.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)},i}(h.GridLayoutManager);qa.GridViewLayoutManager=M;var L=function(e){function i(t){var i=e.call(this,t,"gridSelectionTool")||this;return i._panelCellReq=new O,i._panelCellFeedback=new F(t.doc),i._groupingReq=new B,i}return t.__extends(i,e),i.prototype._doDispose=function(){this._panelCellReq=null,e.prototype._doDispose.call(this)},i.prototype._doPointerDown=function(t){var i=this.grid,o=this.mouseEventTarget;if(o instanceof(0,s.getWin)(t.target).HTMLElement&&(E.RowElement.isExpander(o)||l.RowGroupExpandHandle.isExpander(o))){var a=this._findTableCell(o),h=i.getTableView(a);if(E.RowElement.isExpander(o)&&h instanceof I.GridBodyElement){var u=i.getDataCellIndex(a,this._tempIndex),d=h.getCellAt(i.layoutManager,u),c=i.findGroupItem(d.item,d.layout.firstColumn.dataIndex);this.$_toggleExpanded(i,c,t)}else if(l.RowGroupExpandHandle.isExpander(o)&&h instanceof l.RowGroupBarContainer){var p=h.getViewOf(o);return void((c=(c=i.getItem(o[r.T_ROW])).getAncestor(p.level))instanceof n.GroupItemImpl&&this.$_toggleExpanded(i,c,t))}}e.prototype._doPointerDown.call(this,t)},i.prototype._doClick=function(t){var i=t.mouseX,o=t.mouseY,n=this.grid,r=this.findElementAt(i,o,!1);r instanceof f.GroupPanelItemView&&r.isCloseButton(t.target)&&n.removeGroupByField(r.field),e.prototype._doClick.call(this,t)},i.prototype._doDblClick=function(t){var i=t.mouseX,o=t.mouseY,n=this.grid,r=this.findElementAt(i,o,!1);r instanceof l.RowGroupHeaderElement&&n.groupingOptions.headerClickable?this.$_toggleExpanded(n,r.item,t):e.prototype._doDblClick.call(this,t)},i.prototype._getEditRequest=function(t,i,o,n,r,s,a){var l=e.prototype._getEditRequest.call(this,t,i,o,n,r,s,a);if(l)return l;var h=this.grid,u=this.findElementAt(o,n,!1),d=this._findTableCell(t),c=d&&h.getTableView(d);if(c instanceof R.HeaderElement){var p=c.layoutByCell(d),_=p.firstColumn;if(h.groupPanelView.visible&&_&&_.groupable&&h.groupingOptions.enabled){var g=h.layoutManager.getHeaderCellRect(p);return this._groupingReq.init(p,g,o,n)}}return u instanceof f.GroupPanelItemView?this._panelCellReq.init(u,o,n):void 0},i.prototype._getDragTracker=function(t,i,o){var n=this.grid;return t instanceof O?new P(n,t,this._panelCellFeedback):t instanceof B?new V(n,t,this._panelCellFeedback):e.prototype._getDragTracker.call(this,t,i,o)},i.prototype.getNextRequest=function(t,i,n,r){if(!(t instanceof g.ColumnMoveRequest&&t.layout instanceof _.CellLayoutColumnItem))return t instanceof B&&t.layout instanceof _.CellLayoutColumnItem&&i instanceof o.HeaderCellFeedback?this._colMoveReq.init(t.layout,n,r,null):e.prototype.getNextRequest.call(this,t,i,n,r);var s=this.grid,a=t.layout.firstColumn;return s.groupingOptions.enabled&&s.layoutManager.topPanelVisible&&a instanceof x.DataColumn&&a.groupable&&r+3<s.groupPanelView.bottom?this._groupingReq.init(t.layout,i,n,r):void 0},i.prototype._getClickData=function(t,i){if(t instanceof l.RowGroupHeaderElement)return o.ClickData.getItem("groupHeader",t.itemIndex,null);if(t instanceof f.GroupPanelElement)return o.ClickData.getData("groupPanel");if(t instanceof f.GroupPanelItemView){if(t.isCloseButton(i.target))return;var n=this.grid.dataSource.getOrgFieldName(t.field);return o.ClickData.getField("groupColumn",t.field,n)}return e.prototype._getClickData.call(this,t,i)},i.prototype.$_toggleExpanded=function(t,e,i){e.expanded?t.collapse(e,!1,!1,i):t.expand(e,!1,!1,0)},i}(o.GridSelectionTool);qa.GridViewSelectionTool=L;var O=function(e){function i(){var t=e.call(this)||this;return t._field=-1,t}return t.__extends(i,e),_dp(i,"source",{get:function(){return this._source}}),_dp(i,"x",{get:function(){return this._x}}),_dp(i,"y",{get:function(){return this._y}}),_dp(i,"field",{get:function(){return this._field}}),i.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},_dp(i,"cursor",{get:function(){return"pointer"}}),i}(m.EditRequest),F=function(e){function i(t){var i=e.call(this,t)||this;return i._no=!1,i}return t.__extends(i,e),i.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[s.Utils.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},i.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t);var i=this.doc;this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._noMark=i.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",t.appendChild(this._noMark)},i.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no&&(e=this._noMark.offsetWidth,i=this._noMark.offsetHeight,(o=this._noMark.style).left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px")},i}(v.VisualElement),P=function(e){function i(t,i,o){var n=e.call(this,t,"groupPanelCellTracker")||this;return n._request=i,n._feedback=o,n}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=null,this._feedback=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source.boundsByContainer();return this._feedback.setRect(r),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-r.x,this._offsetY=i-r.y,!0},i.prototype._doDrag=function(t,e,i,o){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},i.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i}(y.GridDragTracker),B=function(e){function i(){return e.call(this)||this}return t.__extends(i,e),i.prototype._doDispose=function(){this._layout=null,this._source=null,e.prototype._doDispose.call(this)},_dp(i,"layout",{get:function(){return this._layout}}),_dp(i,"source",{get:function(){return this._source}}),_dp(i,"x",{get:function(){return this._x}}),_dp(i,"y",{get:function(){return this._y}}),i.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},_dp(i,"cursor",{get:function(){return"pointer"}}),i}(m.EditRequest),V=function(e){function i(t,i,o){var n=e.call(this,t,"groupingCellTracker")||this;return n._request=i,n._feedback=o,n}return t.__extends(i,e),i.prototype._doDispose=function(){this._request=null,this._feedback=null,e.prototype._doDispose.call(this)},i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source,s=r instanceof v.VisualElement?r.boundsByContainer():r,a=n.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},i.prototype._doDrag=function(t,e,i,o){return!(i>this.grid.layoutManager.topContentBounds.bottom)&&(e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0)},i.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;if(this.currentY<e.contentBounds.y){var i=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);t.addGroupBy(e.rowGroupLevels,i)}},i.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},i.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._request.source,t,e)},i}(y.GridDragTracker);return qa}var ll,hl={},ul={};function dl(){if(ll)return ul;ll=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.GridMeasurer=ul.GridContainer=void 0;var t=d,e=Or(),i=al(),o=E(),n=G(),r=S(),s=function(e){function n(t,i,o,n){void 0===o&&(o=!1),void 0===n&&(n=null);var r=e.call(this,t,o,n)||this,s=r._containerDom.parentElement;return s.style.height&&(r._orgCssHeight=s.style.height),r._gridView&&(r._gridView.$_handler=i),r}return t.__extends(n,e),n.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),e.prototype._doDispose.call(this)},_dp(n,"gridView",{get:function(){return this._gridView}}),_dp(n,"heightMeasurer",{get:function(){return this._heightMeasurer}}),n.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},n.prototype.recallHeight=function(){var t=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?t.height=this._orgCssHeight:t.removeProperty("height"))},n.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},n.prototype._doResized=function(t){e.prototype._doResized.call(this,t),this._gridView.$_containerResized()},n.prototype._isOutChildElement=function(t){var e=this.gridView,i="focusout"===t.type?t.relatedTarget:t.target;if(e.filterSelector.opened&&r.Utils.isAncestorOf(e.filterSelector._element,i,t))return!0;if(i instanceof SVGElement)for(var o=r.Utils.getComposedPath(t);o&&o.length&&!((i=o.shift())instanceof HTMLElement););var n=i&&i.className||"";if(n.indexOf("rg-popup")>=0)return!0;try{if(n.indexOf("rg-editor")>=0&&i.$_owner._grid.container!==this)return!1;if(n.indexOf("rg-root")>=0&&i!==this._containerDom)return!1;if(e.isEditing())for(var s=i;s;){if((s.className||"").indexOf("rg-")>=0)return!0;s=s.parentElement}}catch(t){r.Utils.log("check outer elements fail => ".concat(i))}return!1},n.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",r.Utils.isMobile()&&(t.style.touchAction="unset"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._heightMeasurer=new a(this.measurer),this._sizeInfo=new o.Rectangle(0,0,t.clientWidth,t.clientHeight)},n.prototype._createDefaultTool=function(){return new i.GridViewSelectionTool(this)},n.prototype._doLayout=function(t){var e=this._gridView,i=t.clone();e.setRect(i),i.x=i.y=0,e.$_layout(i)},n.prototype._layoutChildren=function(t){this._sizeInfo.width=t.width,this._sizeInfo.height=t.height},n.prototype._doBeforeRender=function(){var t=this.gridView,e=t._dom;if(e&&e.scrollLeft>0){var i=e.scrollLeft;t.leftPos=i,e.scrollLeft=0}t.visible&&t.$_beforeRender()},n.prototype._doAfterRender=function(){if(!this.gridView.fitSyncHeight()){var t=this._containerDom.parentElement;this._orgCssHeight=t.style.height}this._gridView.visible&&this._gridView.$_afterRender()},n.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e))},n.prototype._createGridView=function(t,e){return new i.GridView(this,t,e)},n.prototype._resizeHandler=function(t){if(null==this._watchTimer){var e=this;this._resizeTimer=setTimeout((function(){e._displayObserver()}),100)}},n.prototype.$_displayObserver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,o=this._sizeInfo;e>0&&i>0&&(Math.abs(this._sizeInfo.width-e)>=1||Math.abs(this._sizeInfo.height-i)>=1)&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=t.parentElement.style.height),o.width=e,o.height=i,this.invalidateLayout(),this._doResized(null))},n}(e.VisualContainer);ul.GridContainer=s;var a=function(e){function i(t){var i=e.call(this)||this;return i._bodyStyle="rg-body",i._headerStyle="rg-header",i._summaryStyle="rg-header-summary",i._footerStyle="rg-footer",i._dataRowStyle="rg-data-row",i._headerRowStyle="",i._summaryRowStyle="",i._footerRowStyle="",i._groupFooterStyle="rg-rowgroup-footer",i._dataCellStyle="rg-data-cell",i._headerCellStyle="rg-header-cell",i._summaryCellStyle="rg-header-summary-cell",i._footerCellStyle="rg-footer-cell",i._groupFooterCellStyle="rg-rowgroup-footer-cell",i._rowHeight=0,i._headerHeight=0,i._summaryHeight=0,i._footerHeight=0,i._gfooterHeight=0,i._dirty=!0,i._container=t,i.$_prepareElements(t),i}return t.__extends(i,e),i.prototype._doDispose=function(){this._container=null,e.prototype._doDispose.call(this)},_dp(i,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))}}),_dp(i,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))}}),_dp(i,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))}}),_dp(i,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))}}),_dp(i,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)}}),i.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},i.prototype.invalidate=function(){this._dirty=!0},i.prototype.$_prepareElements=function(t){var e=(0,r.getDoc)(t),i=e.createElement("table");i.setAttribute("aria-hidden","true");var o=i.createCaption();o.textContent="grid measurer table",o.style.width=o.style.height="0px",o.style.padding="none",o.style.boxSizing="border-box",o.style.overflow="hidden",t.appendChild(i);var n=i.style;n.width="1000px",n.height="1px",n.left="-10000px",n.position="absolute",i.className="rg-table";var s=e.createElement("tbody");i.appendChild(s);var a=e.createElement("tr");s.appendChild(a);var l=e.createElement("td");l.className="rg-data-cell",a.appendChild(l);var h=e.createElement("div");l.appendChild(h),h[r.Utils.TextProp]="AYwyhi우리테크"},i.prototype.$_measure=function(t,e,i){var o=this._container,n=this._container.firstElementChild.tBodies[0].rows[0],r=n.cells[0];return o.className=t,n.className=e,r.className=i,n.offsetHeight},i}(n.Base);return ul.GridMeasurer=a,ul}var cl,pl={};var _l,fl,gl,ml,yl,vl={};function Cl(){if(fl)return hl;fl=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.TreeGridLayoutManager=hl.TreeView=hl.TreeContainer=hl.TreeViewSelectionTool=void 0;var t=d,e=Sa(),i=dl(),o=nr(),n=Fs(),r=so(),s=Li(),a=po(),l=Do(),h=function(){if(cl)return pl;cl=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.TreeOptions=void 0;var t=d,e=Rn(),i=C(),o=function(e){function o(t){var o=e.call(this,t)||this;return o._levelIndent=16,o._lineVisible=!0,o._showCheckBox=!1,o._iconImagesRoot="",o._defaultIcon=-1,o._collapseWhenLeftKey=!0,o._collapseWhenCtrlKey=!0,o._expandWhenRightKey=!0,o._expandWhenCtrlKey=!0,o._iconVisible=!0,o._expanderIconStyle=i.TreeExpanderIconStyle.TRIANGLE,o._expandedIcon=-1,o._collapsedIcon=-1,o._recursiveSoftDeleting=!1,o}return t.__extends(o,e),o.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(o,"levelIndent",{get:function(){return this._levelIndent}}),_dp(o,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())}}),_dp(o,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())}}),_dp(o,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())}}),_dp(o,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())}}),_dp(o,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())}}),_dp(o,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())}}),_dp(o,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())}}),_dp(o,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(o,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){this._collapseWhenLeftKey=t}}),_dp(o,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){this._collapseWhenCtrlKey=t}}),_dp(o,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){this._expandWhenRightKey=t}}),_dp(o,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){this._expandWhenCtrlKey=t}}),_dp(o,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())}}),_dp(o,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(t){t!=this._expanderIconStyle&&(this._expanderIconStyle=t,this._changed())}}),_dp(o,"recursiveDeleting",{get:function(){return this._recursiveSoftDeleting},set:function(t){this._recursiveSoftDeleting=t}}),o}(e.GridBaseOptions);return pl.TreeOptions=o,pl}(),u=C(),c=Zo(),p=(_l||(_l=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TreeLinesElement=t.RightTreeBodyElement=t.FixedTreeBodyElement=t.TreeBodyElement=t.RightTreeItemElement=t.FixedTreeItemElement=t.TreeItemElement=t.TreeCellRenderer=t.TREE_INDENT=t.TreeExpandHandle=void 0;var e=d,i=tr(),o=Qn(),n=el(),r=hn(),s=so(),a=Wi(),l=S(),h=C(),u=function(t){function i(e,i){var o=t.call(this,e,i,"treeExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return e.__extends(i,t),_dp(i,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),i.prototype._createDom=function(){return null},i}(n.CellHandle);t.TreeExpandHandle=u,t.TREE_INDENT=3;var c=function(i){function o(t){var e=i.call(this)||this;return e._exclusive=!1,e.assignFrom(t),e}return e.__extends(o,i),o.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=null,i.prototype._doDispose.call(this)},_dp(o,"type",{get:function(){return o.TYPE}}),_dp(o,"styleName",{get:function(){return o.STYLE_NAME}}),o.prototype._doInitContent=function(t){var e=(0,l.getDoc)(t),i=this._expander=e.createElement("span");t.appendChild(i);var o=this._check=e.createElement("input");o.type="checkbox",o.className="rg-tree-checkbox",o.style.display="inline-block",t.appendChild(o);var n=this._icon=e.createElement("img");n.className="rg-tree-icon",n.alt="",t.appendChild(n);var r=this._span=e.createElement("span");t.appendChild(r);var s=this._label=e.createElement("label");s.style.display="none",t.appendChild(s)},o.prototype._doRenderCell=function(e,i,n,r,s){var a=e.treeOptions,u=a.showCheckBox,d=a.levelIndent,c=this._expander,p=this._dom,_=this._check,f=this._icon,g=this._span,m=this._label,y=i.item,v=n.cell,C=a.expanderIconStyle===h.TreeExpanderIconStyle.SQUARE?" square":"";if(c.className=y.isLeaf?"rg-tree-leaf":y.expanded?"rg-tree-expanded"+C:"rg-tree-collapsed"+C,e.accessibility&&(y.isLeaf?v.removeAttribute("aria-expanded"):v.setAttribute("aria-expanded",y.expanded?"true":"false")),this._exclusive!=e.checkBar.exclusive&&(this._exclusive=e.checkBar.exclusive,_.setAttribute("type",this._exclusive?"radio":"checkbox"),_.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),u){_.parentElement||p.insertBefore(_,this._span),_.checked=y.checked;var w=_.id=o.FOR_ID+i.item.index;m.setAttribute("for",w),m[l.Utils.TextProp]=this._makeText(e,i,n)+(_.checked?" checked":" unchecked")}else _.parentElement&&p.removeChild(_);if(a.iconVisible){f.parentElement||p.insertBefore(f,this._span);var x=e.getTreeIcon(y);x?(f.src=x,f.removeAttribute("height"),f.style.removeProperty("visibility")):(f.removeAttribute("src"),f.height=1,f.style.visibility="hidden")}else f.parentElement&&p.removeChild(f);g[l.Utils.TextProp]=this._makeText(e,i,n),p.style.setProperty("padding-left",t.TREE_INDENT+(y.level-1)*d+"px","important")},o.TYPE="tree",o.FOR_ID="$$-tree-check",o.STYLE="rg-tree-renderer",o.STYLE_NAME="rg-renderer "+o.STYLE,o}(a.DataCellRenderer);t.TreeCellRenderer=c;var p=function(t){function i(e){return t.call(this,e,"treeItemView")||this}return e.__extends(i,t),i.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},i.prototype._doLayoutContent=function(e){t.prototype._doLayoutContent.call(this,e)},i.prototype._createRenderer=function(e,i,o,n,r){var s=e.layoutManager,a=i.dataColumn.layout;return 0===s.getHorzColumnIndex(a)?new c(n):t.prototype._createRenderer.call(this,e,i,o,n,r)},i.prototype.$_getDefaultRenderer=function(t,e){var i=t.layoutManager,o=e.dataColumn.layout;return 0===i.getHorzColumnIndex(o)?c.TYPE:a.TextCellRenderer.TYPE},i}(o.RowElement);t.TreeItemElement=p;var _=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return 0},i.prototype._getEndCell=function(t){return t.fixedCellCount-1},i}(p);t.FixedTreeItemElement=_;var f=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype._getFirstCell=function(t){return this._getStartCell(t)},i.prototype._getLastCell=function(t){return this._getEndCell(t)},i.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},i.prototype._getEndCell=function(t){return t.cellCount-1},i}(p);t.RightTreeItemElement=f;var g=function(t){function i(e,i){return t.call(this,e,i)||this}return e.__extends(i,t),i.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof c},i.prototype.createRowElement=function(){return new p(this.doc)},i}(i.GridBodyElement);t.TreeBodyElement=g;var m=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof c},i.prototype.createRowElement=function(){return new _(this.doc)},i}(i.FixedBodyElement);t.FixedTreeBodyElement=m;var y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(i,t),i.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof c},i.prototype.createRowElement=function(){return new f(this.doc)},i}(i.RightBodyElement);t.RightTreeBodyElement=y;var v=function(i){function o(t){var e=i.call(this,t.doc)||this;return e._levelWidth=16,e._handleWidth=9,e._handleHeight=9,e._stroke="gray",e._linePool=[],e._lines=[],e._startIndex=-1,e._endIndex=-1,e._treeView=t,e}return e.__extends(o,i),o.prototype._doDispose=function(){this._linePool=null,this._lines=null,i.prototype._doDispose.call(this)},_dp(o,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())}}),_dp(o,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())}}),_dp(o,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())}}),_dp(o,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())}}),o.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},o.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var n=o.level;if(n>1||o.childIndex>0){for(var r=0;r<n;r++){var s=o.getAncestor(r);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(r+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}o.childIndex>0&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=(o=e.getItem(i)).parent;(r=o.childIndex)<l.count-1&&((a=l.getItem(r+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),o,a,l.level)),(l=o)&&l.expanded&&l.count>0&&((a=l.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),o,a)),this.$_drawHorzLine(t,this.$_borrowLine(),o)}}}},o.prototype._getCssSelector=function(){return"rg-tree-lines"},o.prototype._initDom=function(t){i.prototype._initDom.call(this,t);var e=t.style;e.setProperty("pointer-events","none","important"),e.setProperty("overflow","hidden")},o.prototype._doDraw=function(t){},o.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},o.prototype.$_hideAll=function(){for(var t=this._lines.length-1;t>=0;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},o.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},o.prototype.$_setBounds=function(e,i,o,n,r){var s=e.style;s.left=t.TREE_INDENT+i+"px",s.top=o+"px",s.width=1==n?"1px":n+"px",s.height=1==r?"1px":r+"px"},o.prototype.$_drawVertLine=function(t,e,i,o,n){var r=t.topIndex,a=n*this._levelWidth+this._levelWidth/2,l=0,h=this.height,u=this._handleHeight;if(i){var d=t.getItemBounds(i.index-r),c=i instanceof s.TreeItem&&i.hasChildren?u+2:0;l=d.y+d.height/2+c/2+1}o&&(d=t.getItemBounds(o.index-r),c=o instanceof s.TreeItem&&o.hasChildren?u:0,h=d.y+d.height/2-c/2),this.$_setBounds(e,a,l,1,h-l)},o.prototype.$_drawHorzLine=function(t,e,i){var o,n=t.topIndex,r=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth+1;i.hasChildren&&(r+=this._handleWidth/2+1);var a=t.getItemBounds(i.index-n);o=a.y+a.height/2,this.$_setBounds(e,r,o,s-r,1)},o.prototype.$_drawChildLine=function(t,e,i,o){var n,r=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-r);if(n=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-r);var h=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-h/2}this.$_setBounds(e,s,n,1,a-n)},o}(r.LayerElement);t.TreeLinesElement=v}(vl)),vl),_=fn(),f=S(),g=Qn(),m=function(e){function i(t){return e.call(this,t,"treeViewSelectionTool")||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._doKeyDown=function(t){var i,o=this.focused.clone(),n=this.grid.treeOptions,s=t.which,a=t.ctrlKey||t.metaKey;if(o&&(i=o.item))switch(s){case 39:if(!a&&1==this.grid.visibleLayoutCount&&o.isRight&&n.expandWhenRightKey||a&&n.expandWhenCtrlKey){if(!i.expanded)return i.setExpanded(!0,!1,!1),!0;if(i.count>0)return o.down(),this.setFocused(o,!0,!0),!0}break;case 37:if(!a&&o.isLeft&&n.collapseWhenLeftKey||a&&n.collapseWhenCtrlKey){if(i.expanded)return i.setExpanded(!1,!1,!1),!0;if(!(i.parent instanceof r.RootTreeItem))return o.itemIndex=i.parent.index,this.setFocused(o,!0,!0),!0}}return e.prototype._doKeyDown.call(this,t)},i.prototype._doPointerDown=function(t){var i=t.mouseX,o=t.mouseY,n=t.altKey,s=this.grid,a=this.findElementAt(i,o,!1),l=this.mouseEventTarget;if(a instanceof p.TreeItemElement&&g.RowElement.isExpander(l)&&!n){var h=a._item;h instanceof r.TreeItem&&(h.expanded?s.collapse(h,!1):s.expand(h,!1,!1))}e.prototype._doPointerDown.call(this,t)},i.prototype._doClick=function(t,i,o){i=i||t.mouseX,o=o||t.mouseY;var n=t.shiftKey,r=this.grid;this.focused;var s=this.findElementAt(i,o,!1),a=this.mouseEventTarget;if(s instanceof p.TreeItemElement&&s.isCheckBox(a))if(r.editOptions.checkable){var l=r.getItem(s.itemIndex);this._doCheck(a,l,n)}else t.preventDefault();e.prototype._doClick.call(this,t,i,o)},i.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),n=p.TREE_INDENT+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?n:20)){var r=this.grid.getSelectedItems();if(r.length>1)for(var s=r[0].level,a=1;a<r.length;a++)if(r[a].level<s)return!1;return!0}},i}(n.GridSelectionTool);hl.TreeViewSelectionTool=m;var y=function(e){function i(t,i,o,n){return e.call(this,t,i,o,n)||this}return t.__extends(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},_dp(i,"treeView",{get:function(){return this.gridView}}),i.prototype._createGridView=function(t,e){return new x(this,t,e)},i.prototype._createDefaultTool=function(){return new m(this)},i}(i.GridContainer);hl.TreeContainer=y;var v=function(e){function i(){return e.call(this,"treeItemExpanderCell")||this}return t.__extends(i,e),_dp(i,"getText",{get:function(){return null}}),_dp(i,"value",{get:function(){return null}}),i}(s.GridCell),w=function(e){function i(){return e.call(this,"treeItemFooterCell")||this}return t.__extends(i,e),_dp(i,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t}}),_dp(i,"value",{get:function(){return null}}),i}(s.GridCell),x=function(e){function i(t,i,o){var n=e.call(this,t,i,o)||this;return n._expanderCell=new v,n._footerCell=new w,n._focusedRow=-1,n.itemSource=n._rs=n._createItemSource(),n}return t.__extends(i,e),i.prototype._doDispose=function(){this.itemSource=this._rs=this.itemSource&&this.itemSource.dispose(),e.prototype._doDispose.call(this)},_dp(i,"treeOptions",{get:function(){return this._treeOptions}}),_dp(i,"linesView",{get:function(){return this._linesView}}),i.prototype.isTree=function(){return!0},i.prototype.recursiveDeleting=function(){return this.treeOptions.recursiveDeleting},i.prototype._beforeChangeLayout=function(){},i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(l.CellIndex.temp(this,t)),this._expanderCell},i.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},i.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},i.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},i.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},i.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},i.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0;o=t.hasChildren&&t.expanded&&e.expandedIcon>-1?e.expandedIcon:t.hasChildren&&t.collapsed&&e.collapsedIcon>-1?e.collapsedIcon:t.iconIndex;var n=e.iconCallback;if(n){var r=n(this.handler,t.index,t.dataRow,o);if("string"==typeof r)return r;isNaN(r)||(o=r)}if((o<0||o>=i.length)&&(o=e.defaultIcon),o>=0&&o<i.length)return e.iconImagesRoot+i[o]}},i.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},i.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},i.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.row)}}else e=this._rs.getCheckedRows();return e},i.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.dataRow)}}else e=this._rs.getCheckedRowIds();return e},i.prototype.checkChildren=function(t,e,i,o,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);n?l.checkable&&l.setChecked(e,r):l.setChecked(e,r),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,n,r)}},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.dataRow>=0?this.getItemOfRow(t.dataRow,!1):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(i,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)}}),_dp(i,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)}}),_dp(i,"summarizer",{get:function(){return this._rs.summarizer}}),i.prototype._initStyles=function(){e.prototype._initStyles.call(this),this._treeOptions=new h.TreeOptions(this)},i.prototype._createItemSource=function(){return new a.TreeGridItemProvider(!0)},i.prototype._doContentPanesCreated=function(){this._linesView=new p.TreeLinesElement(this),this.addElement(this._linesView)},i.prototype._createSidePane=function(){return e.prototype._createSidePane.call(this)},i.prototype._createLayoutManager=function(){return new b(this)},i.prototype._createBodyView=function(t){return new p.TreeBodyElement(this.doc,t)},i.prototype._createFixedBodyView=function(t){return new p.FixedTreeBodyElement(this.doc,t)},i.prototype._createRightBodyView=function(t){return new p.RightTreeBodyElement(this.doc,t)},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t),c.CheckBar},i.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},i.prototype._doCanInsert=function(t,e,i){return t&&(t.count>0||!i||0==t.level||this.editOptions.appendable)},i.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),e.prototype.setOptions.call(this,t)}},i.prototype._doPrepareRender=function(t){var i=this._horzScrolled;e.prototype._doPrepareRender.call(this,t),i&&this.layoutManager.$_layoutLines()},i.prototype.$_doLayout=function(t,i){this._treeOptions,e.prototype.$_doLayout.call(this,t,i)},i.prototype.assignImageList=function(t){},i.prototype.refreshView=function(){e.prototype.refreshView.call(this)},i.prototype.getEditBounds=function(t,i){return e.prototype.getEditBounds.call(this,t,i)},i.prototype.updatePastedRow=function(t,e,i){if(t instanceof r.TreeItem){var o=t.row;o&&o.update(e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);return e.rootRow.addChild(i,!1),i.rowId}},_dp(i,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(i,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(i,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(i,"undoing",{get:function(){return this._rs.undoing}}),_dp(i,"redoing",{get:function(){return this._rs.redoing}}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getFirstRow=function(){return null},i.prototype.getLastRow=function(){return null},i.prototype.getPrevRow=function(t){return null},i.prototype.getNextRow=function(t){return null},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t&&t.length>0){var o=t[0].parent;if(o!==i.parent)return!1;for(var n=1,r=t.length;n<r;n++)if(o!==t[n].parent)return!1;var s=!1;for(n=0;n<t.length;n++){var a=t[n];a&&a.isDataRow&&(s=!0)}return s}},i.prototype._getMoveTarget=function(t,e,i,o){if("keydown"===t){var n=this.getItem(i),r=n.parent;if(n.childIndex+e.length>=r.children.length&&o>0||0===n.childIndex&&o<0)return;var s=this.getItem(i+o);if(n.level===s.level)return s;var a=n.childIndex+o;if(!r||a<0||a>=r.children.length)return;return r.children[a]}return this.getItem(i+o)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(i>=0){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataId;a>=0&&o.push(a)}if(o.length>0){var l=this.dataSource,h=l.rowsByIds(o,!1);if(h.length>0)return l.moveRows(h,l.rowById(i))}}return!1},i.prototype._fitLayoutWidth=function(t){if(!t.visible)return 0;var e,i=this.itemSource,o=this.getIndex(this.topIndex,t.firstColumn),n="",r=0;e=n=t.firstColumn.header.displayText;var s,a=this.getBodyCellAt(o,!1),l=a&&a.renderer2&&a.renderer2._dom,h=a&&a.renderer2 instanceof p.TreeCellRenderer,d={0:f.Utils.getTextLength(e)},c={0:e};if(l){var g=(0,f.getWin)(l).getComputedStyle(l);if(g){n=g.paddingLeft;var m=parseInt(n.substr(0,n.indexOf("px")));r+=m>0?m:0,n=g.paddingRight,r+=(m=parseInt(n.substr(0,n.indexOf("px"))))>0?m:0,s={fontSize:g.fontSize,fontFamily:g.fontFamily,fontWeight:g.fontWeight,fontStyle:g.fontStyle}}}for(var y=0,v=i.itemCount;y<v;y++){o.itemIndex=y,d[I=h?o.item.level:0]=d[I]||0,n=this.getDisplayText(o),f.Utils.getTextLength(n)>d[I]&&(d[I]=f.Utils.getTextLength(n),c[I]=n)}for(var C=0,w=0,x=0,b=Object.keys(d);x<b.length;x++){var I=b[x];C=h?parseInt(I)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,C+=this.container.measureText("rg-data-cell",c[I],s),w=Math.max(w,C)}r+=w;var E=t.firstColumn,S=E.editor,R=this.delegate.getCellEditor(_.CellEditor.getEditorType(S));return R.hasButton(this.displayOptions.showNativeEditButton,S)&&(r+=this.body.editButtonWidth*R.buttonCount),E.button!==u.CellButton.NONE&&(r+=this.body.cellButtonWidth),r},i.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},i.prototype.onItemProviderReset=function(t){this._currentRowId=-1,e.prototype.onItemProviderReset.call(this,t)},i.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(i.CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this.fireEvent(i.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,e)},i.EXPANDING="onTreeViewExpanding",i.EXPANDED="onTreeViewExpanded",i.COLLAPSING="onTreeViewCollapsing",i.COLLAPSED="onTreeViewCollapsed",i.CHANGED="onTreeViewChanged",i}(e.GridBase);hl.TreeView=x;var b=function(e){function i(t){return e.call(this,t)||this}return t.__extends(i,e),i.prototype.layout=function(t){e.prototype.layout.call(this,t),this.$_layoutLines()},i.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=this.fixedLayoutCount>0,o=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(o.y+=this.fixedContentBounds.y,o.x+=this.fixedContentBounds.x):(o.y+=this.contentBounds.y,o.x+=this.contentBounds.x),this.layoutCount>0?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,e.setRect(o),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},i}(o.GridLayoutManager);return hl.TreeGridLayoutManager=b,hl}function wl(){if(ml)return ri;ml=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.TreeView=ri.GridView=ri.GridBase=void 0;var t=d,e=C(),i=S(),o=G(),n=pi(),r=di(),s=Do(),a=Sa(),l=xo(),h=ti(),u=Ue(),c=fe(),p=so(),_=un(),f=to(),g=function(){if(Ta)return Da;Ta=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.GridCsvExporter=void 0;var t=d,e=qe(),i=Ma(),o=xo(),n=Do(),r=C(),s=so(),a=S(),l=S(),h=rt(),u=function(i){function u(){return i.call(this)||this}return t.__extends(u,i),u.prototype.dispose=function(){return i.prototype.dispose.call(this),null},u.prototype.export=function(t,e){i.prototype.export.call(this,t,e);var n=this._exportOptions=e;this._cols=[];var r=t.collectColumns(!0,!0,!0);this._cols=r.filter((function(t){return t instanceof o.ValueColumn})),this.indicator=n.indicatorVisible(t)?t.rowIndicator:null,this.header=n.headerVisible(t),this.headerSummary=n.headerSummaryVisible(t),this.footer=n.footerVisible(t),this.indicatorHead=t.rowIndicator.headText||"No",this.indicatorFoot=t.rowIndicator.footText||"",this.indicatorSummary=t.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},u.prototype.prepare=function(){},u.prototype.finallize=function(){},u.prototype.buildBook=function(){this.buildSheet(this.grid)},u.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},u.prototype.addQuatation=function(t,e){return a.Utils.addQuatation(t,e===r.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},u.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var o=i.length,n=0;n<o;n++){var r=i[n];e.push(this.addQuatation(r.header.displayText))}this._rows.push(e.join(","))},u.prototype.buildSummaryItem=function(t,e,i){var o,n=this._exportOptions,r=e?t.footers:t.headerSummaries;if(r.visible)for(var s=r.visibleCount,a=0;a<s;a++){var l=[];this.indicator&&l.push(0==a?this.indicatorFoot:"");for(var u=r.getVisible(a),d=0,c=this._cols.length;d<c;d++){var p=this._cols[d],_=u.getCell(p.layout),f=_.getSummary(),g=_.value;o="number"==typeof g?isNaN(g)?_.text:String(g):g instanceof Date?n.datetimeCallback?(g=n.datetimeCallback(-1,p.name,g,t.handler))instanceof Date?h.DateTimeWriter.Default.getText(g):g:h.DateTimeWriter.Default.getText(g):null==g?_.text||f.text:String(g),l.push(this.addQuatation(o))}this._rows.push(l.join(","))}},u.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);this.buildRow(t,n)}},u.prototype.buildRow=function(t,e){var i,r=this._exportOptions,s=[];if(this.indicator){var a=r.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;s.push(a.toString())}for(var l=0,h=this._cols.length;l<h;l++){var u=this._cols[l],d=void 0;if(i=void 0,u instanceof o.DataColumn)if(d=u.getField()){var c=n.DummyCellIndex.tempItem(t,e,u);i=t.getDisplayText(c)}else i="";s.push(this.addQuatation(i,d&&d.dataType))}this._rows.push(s.join(","))},u.prototype.buildGroupHeader=function(t,e){},u.prototype.buildGroupFooter=function(t,e){},u.prototype.buildMergedGroupHeader=function(t,e){},u.prototype.buildMergedGroupFooter=function(t,e){},u.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},u.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);if(!(n instanceof s.TreeItem))throw"Unkonw tree item type";this.buildTreeRow(t,n)}},u.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},u.prototype.save=function(){var t=this._exportOptions,i=t.fileName,o="\ufeff"+this._rows.join("\n"),n=this.grid.doc;t.done&&"function"==typeof t.done&&(t.target===e.ExportTarget.STREAM?t.done(o):t.done()),t.target==e.ExportTarget.LOCAL?this.saveLocal(i,o,n):t.target==e.ExportTarget.REMOTE&&this.saveServer(i,l.Base64.encode(o),t.url,n,t.params)},u}(i.GridExporterBase);return Da.GridCsvExporter=u,Da}(),m=Fa(),y=_o(),v=function(){if(gl)return Va;gl=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.GridExcelExporter=Va.ColumnExportStatementRuntime=void 0;var t=d,e=qe(),i=Ma(),o=Ha(),n=za(),r=al(),s=di(),a=la(),l=C(),h=xo(),u=Cl(),c=Do(),p=Li(),_=to(),f=$o(),g=Ka(),m=so(),y=S(),v=Zn(),w=Wi(),x=To(),b=Y(),I=ji(),E=Fa(),R=lt(),T=function(e){function i(){var t=e.call(this)||this;return t._columns=null,t}return t.__extends(i,e),i.prototype._doDispose=function(){this._columns=null,e.prototype._doDispose.call(this)},i.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof x.CellLayoutColumnItem&&this._columns.push(t[e].layout.firstColumn.name)},i.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(t){if(t===i.ID_ROW)return String(this._itemIndex+1);throw new b.ExpressionEvaluationError("Invalid identifier key: "+t)},i.prototype.evaluateIndexerI=function(t,e){if(t==i.ID_EXCELCOLUMN){if(e<0||e>=this._columns.length)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._columns[e]}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+t)},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_EXCELCOLUMN)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._columns){var r=this._columns.indexOf(e);if(r<0||r>=this._columns.length)throw new b.ExpressionEvaluationError("Column is not exists:"+e);return n.ExcelUtil.toColCaption(r+this._startCol)}},i.ID_EXCELCOLUMN=0,i.ID_ROW=1,i.IDENTS={excelcolumn:i.ID_EXCELCOLUMN,row:i.ID_ROW},i}(b.ExpressionRuntime);Va.ColumnExportStatementRuntime=T;var D=function(i){function d(){var t=i.call(this)||this;return t._gridIndex=0,t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowLevels=0,t._indents=0,t._indentWidth=3,t._seriesCell=new p.SeriesCell,t._excelFormulaRuntime=new T,t}return t.__extends(d,i),d.prototype.dispose=function(){return i.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},d.prototype._progressCallback=function(t,e,i,o){var n=this._progressGrid,r=this._multiOptions;n&&n.setExportProgress(i,o+r.prepareProgress,r.progressMessage)},d.prototype.export=function(t,e){if(i.prototype.export.call(this,t,e),this._progressGrid=t,e){var o=this._multiOptions=e,r=this._multiOptions.exportGrids;if(r&&!(r.length<=0)){var s=(0,y.getDoc)(t.container._containerDiv).documentElement,a=new n.ExcelWorkbook(s);if(this._mergeHeads={},o.showProgress)this._allCount=this._prepareCount(o,r),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(a,o,this._gridIndex=0,function t(){var i=++this._gridIndex;i<o.exportGrids.length?this._exportGridAsync(a,o,i,t.bind(this)):(!e.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}.bind(this));else{for(var l=0,h=r.length;l<h;l++)this._exportGrid(a,r[l].options);this.save()}}}},d.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},d.prototype.buildSheet=function(t,e){var i=this,n=this._exportOptions,r=this._workbook,s=r.createSheet(this._sheetName,n),a=t.displayOptions;if(this._defaultHeight=a.rowHeight||a.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,n.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var l=t.layoutManager.fixedItemCount;if(l>0)for(var h=0;h<l;h++)this.allItems.splice(h,0,t.getItem(h))}else if(n.pagingAllItems&&t.paged){var u=t.itemSource;u instanceof g.GridItemProvider&&(this.allItems=u.getPagingAllItems()),n.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=this.allItems.filter((function(t){return t.checked})))}else n.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var d=this.allItems,c=d?d.length:t.itemCount;if(!this._rowGrouped){this._startItem=n.start>0?n.start:0;var p=n.count>0?n.count:c;c=p>0?this._startItem+p>c?c-this._startItem:p:c-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+c,this._currentRow=n.yOffset,s.setFirstCol(this._startCol=n.xOffset),this._prepareCommonStyles(t),this._buildColumns(t),s.createBorderEdges(o.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,n.headerSummary),this.buildItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,n.footer),i._buildDocumentTail(r),i._buildUserCells(t,r),e&&e()}))},d.prototype.buildHeader=function(t){for(var e=this._workbook,i=e.currentSheet,n=this._preparer,r=n.colCount,s=n.headerRowCount,a=t.header.heights||[],l=a&&a.length>0?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*s)/s,h=[],u=0;u<s;u++)h.push(Math.max(a[u]||l,l)*d.LINE_HEIGHT);var c=this._indents,p=this._currentRow;i.setFirstRow(this._currentRow);var _,f=this._startCol,g=this._headerCellStyle,m=[];for(u=0;u<s;u++)m.push(i.borrowRow(p+u,h[u]));if(this.indicator){if((_=m[0]).addText(f,this.indicatorHead,g),s>1){for(u=1;u<s;u++)m[u].addBlank(f,g);i.addMerge(p,f,s,1)}f++}if(this.checkBar){if((_=m[0]).addText(f,this.checkBarHead,g),s>1){for(u=1;u<s;u++)m[u].addBlank(f,g);i.addMerge(p,f,s,1)}f++}if(c>0){for(var y=0;y<c;y++){for(u=0;u<s;u++)m[u].addBlank(y+f,this._indentHeadStyle);i.addMerge(p,y+f,s,1)}f+=c}for(u=0;u<s;u++){var v=p+u;for(_=m[u],y=0;y<r;y++){var C=n.getHeader(u,y),w=C&&C.layout,b=y+f;if(w.isProxy||C.spanned)_.addBlank(b,g);else{var I=w.displayText,E=this._preparer.documentCssStyles,S=w instanceof x.CellLayoutColumnItem?w.firstColumn.header:w.header,R=S.exportStyleName||S.styleName;g=this._headerCellStyle,R&&(g=this._parseStyles(e,this._inheritStyles([this._headerCssStyle,o.CssFactory.getSelectorStyle(E,"."+R)]),!0)),_.addText(b,I,g);var T=0,D=w.getHeaderSpan()-1,k=w.parent,M=k&&k.vertical;if(D>0){var L=0,O=w.vindex+1;if(M)for(;L++<D&&L<s;)T+=k.getVisible(O++)._hspan,n.getHeader(u+L,y).spanned=!0;else for(;L++<D&&y+L<r&&O<k.visibleCount;)T+=k.getVisible(O++)._cspan,n.getHeader(u,y+L).spanned=!0}M?i.addMerge(v,b,w.hspan+T,w.cspan):i.addMerge(v,b,w.hspan,w.cspan+T)}}}this._currentRow+=s,this._exportOptions.applyFixed&&i.setFixedInfo(this._currentRow,void 0),i.setLastRow(this._currentRow-1)},d.prototype.buildSummaryItem=function(t,e,i){function o(t,i,o,r,s){var a=n.getCell(o.layout),l=this._exportOptions,h=a.value;if(h instanceof Date)l.datetimeCallback?(h=l.datetimeCallback(-1,o.name,h))instanceof Date?t.addDate(i,h,s):t.addText(i,h,s):t.addDate(i,h,s);else if(isNaN(h)){var u=e?o.getFooter(n._childIndex):o.getHeaderSummary(n._childIndex),d=u&&n.getCellFormatters(u,null),c=d?a.getDisplayText(d):h;t.addText(i,c||"",s)}else t.addNumber(i,h,s)}var n,r=this._workbook.currentSheet,s=this._preparer,a=s.colCount,l=s.dataRowCount,h=this._indents,u=e?t.footers:t.headerSummaries,c=i===E.VIS_VISIBLE?u.count:u.visibleCount,p=c*l,_=this._currentRow;r.setFirstRow(this._currentRow);for(var f,g=this._startCol,m=t.layoutManager.getDataRowHeights(l),y=m.reduce((function(t,e){return t+e}),0),v=[],C=0;C<c;C++){var w=(n=i===E.VIS_VISIBLE?u.get(C):u.getVisible(C)).heights||[],x=w.reduce((function(t,e){return t+e}),0),b=n.height;b=-1===b?-1:b>0?b/l:Math.max(n.minHeight,t.heightMeasurer.summaryHeight,b);for(var I=0;I<l;I++)x>0&&w[I]>0?v.push(w[I]*d.LINE_HEIGHT):y>0&&m[I]>0?v.push(m[I]*n.height/y*d.LINE_HEIGHT):v.push(-1===b?-1:b*d.LINE_HEIGHT)}for(C=0;C<c*l;C++)r.borrowRow(_+C,v[C]);if(this.indicator){C=0;for(var S=0;C<c;C++)for(var R=0;R<l;R++)f=r.borrowRow(_+S,v[S]),e?0===S?f.addText(g,this.indicatorFoot,this._indicatorFootStyle):f.addBlank(g,this._indicatorFootStyle):0===S?f.addText(g,this.indicatorSummary,this._indicatorSumStyle):f.addBlank(g,this._indicatorSumStyle),S++;r.addMerge(_,g++,p,1)}if(this.checkBar){for(C=0,S=0;C<c;C++)for(R=0;R<l;R++)f=r.borrowRow(_+S,v[S]),e?0===S?f.addText(g,this.checkBarSummary,this._checkBarSumStyle):f.addBlank(g,this._checkBarSumStyle):0===S?f.addText(g,this.checkBarFoot,this._checkBarFootStyle):f.addBlank(g,this._checkBarFootStyle),S++;r.addMerge(_,g++,p,1)}if(h>0){for(var T=0;T<h;T++){for(C=0,S=0;C<c;C++)for(R=0;R<l;R++)(f=r.borrowRow(_+S,v[S])).addBlank(g+T,this._indentFootStyle),S++;r.addMerge(_,g+T,c*l,1)}g+=h}for(var D=_,k=(e?s.getFooterItem:s.getSummaryItem).bind(s),M=(I=0,0);I<c;I++)for(n=i===E.VIS_VISIBLE?u.get(I):u.getVisible(I),C=0;C<l;C++,M++){for(f=r.borrowRow(D,v[M]),T=0;T<a;T++){var L=k(I*l+C,T),O=L.layout,F=O.firstColumn,P=T+g,B=O.firstColumn.$_hash,V=(e?this._columnFooterStyles:this._columnSummaryStyles)[B][I];if(O.isProxy||L.spanned)f.addBlank(P,V);else{var N=0,A=e?O.getFooterSpan(I)-1:O.getSummarySpan(I)-1,$=e?O.getFooterUserSpan(n._childIndex):O.getSummaryUserSpan(n._childIndex),H=O.parent,U=H&&H.vertical;if($){var G=$.footerCount||0,W=G>0?G*l:$.rowspan||1,j=$.colspan||1;o.call(this,f,P,F,I,V);for(var z=0,Y=0,q=0;q<W;q++){var X=(e?s._footerCells:s._summaryCells)[I*l+C+q];X&&z++;for(var K=0;X&&K<j;K++){var J=X[T+K];J&&(Y=Math.max(Y,K+1),J.spanned=!0)}}(W>1||j>1)&&r.addMerge(D,P,z,Y)}else{if(A>0){var Z=0,Q=O.vindex+1;if(U)for(;Z++<A&&Z<l;)N+=H.getVisible(Q++)._dspan,k(I*l+C+Z,T).spanned=!0;else for(;Z++<A&&T+Z<a&&Q<H.visibleCount;)N+=H.getVisible(Q++)._cspan,k(I*l+C,T+Z).spanned=!0}o.call(this,f,P,F,I,V),U?r.addMerge(D,P,O._dspan+N,O._cspan):r.addMerge(D,P,O._dspan,O._cspan+N)}}}D++}this._rowGrouped&&this._exportOptions.showLevelOutline&&r.setRowLevel(D,1),this._currentRow+=p,r.setLastRow(this._currentRow-1)},d.prototype.buildItems=function(t,e){for(var i=this._exportOptions,o=i.showIndicatorRow(t),n=i.showIndicatorReverse(t),r=this.allItems,a=r?r.length:t.itemCount,l=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,h=this._indexItem;h<l;h++){var u=r?r[h]:t.getItem(h);if(this._indicatorNo=o?u.isDataRow?u.dataRow+1:void 0:n?a-h:h+1,u instanceof s.GridRow)this.buildRow(t,u);else if(u instanceof _.MergedGroupHeader)this.buildMergedGroupHeader(t,u);else if(u instanceof _.MergedGroupFooter||u instanceof s.GroupFooter)this._preparer.groupModel!=u.parent&&this._preparer.setGroupFooterItms(u.parent,i.allItems,t.rowGroup.mergeMode),u instanceof _.MergedGroupFooter?this.buildMergedGroupFooter(t,u):this.buildGroupFooter(t,u);else{if(!(u instanceof s.GroupItemImpl))throw new Error("Unkown item type");this.buildGroupHeader(t,u)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=l,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},d.prototype.buildRow=function(t,e){var i,o,n=t.rowGroup,r=this._preparer,s=r.dataRowCount,a=r.colCount,h=t.layoutManager,u=this._columnMerged,p=this._mergeHeads,_=this._indents,f=this._workbook.currentSheet,g=this._currentRow;f.setFirstRow(this._currentRow);var m,y=this._startCol,v=t.displayOptions,C=v.rowHeightCallback;e.index>=0&&C&&(h.getRowHeightOfCallback(t,e.index),m=e.heights);var w=(m=m||h.getDataRowHeights(s)).reduce((function(t,e){return t+e}),0)||e.height;isNaN(w)&&(w=-1===v.rowHeight?-1:Math.max(v.rowHeight||0,v.minRowHeight*s)),w=-1===w?-1:w>0?w/s:w;for(var x=n.expandedAdornments===l.RowGroupAdornments.SUMMARY&&n.mergeMode,b=[],I=0;I<s;I++)b.push(f.borrowRow(g+I,-1===w?-1:(m[I]||w)*d.LINE_HEIGHT));for(this.indicator&&this._buildIndicatorCell(t,f,b,this._indicatorNo,g,y++,s),this.checkBar&&this._buildCheckBarCell(t,f,b,e.checked,g,y++,s),I=0;I<s;I++){var E=b[I];E._row=I;var S=g+I,R=y;for(i=0;i<_;i++)E.addBlank(R,this._indentBarStyle),R++;for(i=0;i<a;i++){var T=i+R,D=r.getItem(I,i),k=D.layout,M=k.firstColumn,L=M.$_hash,O=this._columnStyles[L],F=c.DummyCellIndex.tempItem(t,e,k);if(k.isProxy||D.spanned)E.addBlank(T,D.style||O);else{var P=k._dspan,B=!1,V=!1;if(u){var N=h.getMergeRoom(F);if(N)if(N.isHead(F)&&0==I||this._startItem>0&&e.index==this._startItem&&!x)O=this._buildValueCell(t,f,E,e,k,T,R),p[L]={startRow:S,style:O},B=!0,V=!M.mergeGrouped&&e.isDataRow;else{var A=p[L];E.addBlank(T,A.style||O),(N.isTail(F)||this._lastItem>0&&e.index==this._lastItem-1)&&(P=S-A.startRow+s,f.addMerge(A.startRow,T,P,1+(A.cols||0)),delete p[L]),B=!0,V=!M.mergeGrouped&&e.isDataRow}else if(this.allItems&&!e.visible&&t.isGroupedColumn(M)&&this._mergedGrouped){for(E.addBlank(T,O),B=!0,o=e.parent;M.groupLevel!=o.level&&o;)o=o.parent;var $=p[L]?p[L].startRow:void 0;switch(t.rowGroup.expandedAdornments){case l.RowGroupAdornments.NONE:e==o.firstItem&&e==o.lastDataItem?B=!1:e==o.firstItem?(O=this._buildValueCell(t,f,E,e,k,T,R),p[L]={startRow:S,style:O}):e==o.lastDataItem&&(P=S-$+s,f.addMerge($,T,P,1));break;case l.RowGroupAdornments.BOTH:e==o.lastDataItem&&0==o.footerCount&&(P=S-$+s,f.addMerge($,T,P,1));break;case l.RowGroupAdornments.HEADER:case l.RowGroupAdornments.SUMMARY:e==o.firstItem&&e==o.lastDataItem?p[L]?(P=S-$+s,f.addMerge($,T,P,1),delete p[L]):B=!1:e==o.lastDataItem?(P=S-$+s,f.addMerge($,T,P,1),delete p[L]):o.firstDataItem;break;case l.RowGroupAdornments.FOOTER:e==o.firstItem&&(O=this._buildValueCell(t,f,E,e,k,T,R),p[L]={startRow:S,style:O}),e==o.lastDataItem&&(o.footerCount>0||(P=S-p[L].startRow+s,f.addMerge(p[L].startRow,T,P,1),delete p[L]))}}}if(!B||V){var H=!V&&this._buildValueCell(t,f,E,e,k,T,R),U=k.parent,G=U&&U.vertical,W=!0,j=k.spanCallback,z=j?j(t.handler,k,e.index):void 0;void 0===z&&(z=k.dataSpan),void 0===z&&(W=!1,z=k.cellSpan);var Y=0;if(z>0){var q=0,X=k.vindex+1;if(G)for(z--;q++<z&&q<s;)Y+=(it=U.getVisible(X++))._dspan,r.getItem(I+q,i).spanned=!0,r.getItem(I+q,i).style=H;else{for(var K=k._dspan,J=[],Z=0;Z<K;Z++)J.push(0);for(var Q=0;Q<K;Q++){J[Q]+=k._defColSpan;for(var tt=1;tt<z&&i+tt<a;tt++){var et=r.getItem(I+Q,i+tt).layout;et&&!et.isProxy&&(J[Q]+=et._defColSpan)}}for(W=Math.max.apply(Math,J)===z;q++<z-1&&i+q<a&&(W||X<U.visibleCount);){var it;if(!(it=W?r.getItem(I,i+q).layout:U.getVisible(X++)))break;!it.isProxy&&(Y+=it._defColSpan)}for(k._defColSpan+Y!==z&&(Y=0),q=1;q<k._defColSpan+Y;q++){if(K>1&&W)for(tt=1;tt<s&&K>tt;tt++)r.getItem(I+tt,i+q).spanned=!0,r.getItem(I+tt,i+q).style=H;r.getItem(I,i+q).spanned=!0,r.getItem(I,i+q).style=H}}}if(V){var ot=p[L];ot&&(ot.cols=Y)}else G?f.addMerge(S,T,k._dspan+Y,k._defColSpan):f.addMerge(S,T,k._dspan,k._defColSpan+Y)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&f.setRowLevel(S,e.level)}this._currentRow+=s,f.setLastRow(this._currentRow-1)},d.prototype.buildGroupHeader=function(t,e){var i=this._workbook,n=i.currentSheet,r=this._preparer,s=e.level-1,a=this._indentBarStyle,l=r.colCount,h=this._currentRow;n.setFirstRow(this._currentRow);var u=this._startCol,c=t.layoutManager.getDataRowHeights(r.dataRowCount).reduce((function(t,e){return t+e}),0);c=c||Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*r.dataRowCount);var p=this._exportOptions,_=n.borrowRow(h,c*d.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,n,_,this._indicatorNo,h,u++,1),this.checkBar&&this._buildCheckBarCell(t,n,_,e.checked,h,u++,1),p.indenting)for(var f=0;f<s;f++)_.addBlank(u,a),u++;var g=t.rowGroup.getHeaderText(e),m=this._groupHeaderStyle,y=this._preparer.documentCssStyles,v=this._dynamicStyles,C="groupheader-style=.rg-rowgroup-header-level-"+e.level;if(v[C])m=v[C];else{var w=o.CssFactory.getSelectorStyle(y,".rg-rowgroup-header-level-"+e.level);w&&(m=this._extendStyles(i,m,w)),this._dynamicStyles[C]=m}_.addText(u,g,m),this._indents>0&&(l+=this._indents-(e.level-1));for(var x=1;x<l;x++)_.addBlank(x+u,m);n.addMerge(h,u,1,l),this._rowGrouped&&p.showLevelOutline&&n.setRowLevel(h,e.level),this._currentRow++,n.setLastRow(this._currentRow-1)},d.prototype.buildGroupFooter=function(t,e){function i(i,o,n,r){var s=a.RowGroupFooterCell.getValue(e,n),l=this._exportOptions;if(s instanceof Date)l.datetimeCallback?(s=l.datetimeCallback(e.index,n.name,s))instanceof Date?i.addDate(o,s,r):i.addText(o,s,r):i.addDate(o,s,r);else if(isNaN(s))if(s)i.addText(o,s,r);else{var h=void 0;if(e){var u=c.DummyCellIndex.tempItem(t,e,n);h=t.getDisplayText(u)||""}else h=n.groupFooter.text||"";i.addText(o,h,r)}else i.addNumber(o,s,r)}var o,n,r,s=this._workbook.currentSheet,h=this._exportOptions,u=this._preparer,p=u.dataRowCount,_=u.colCount,f=this._groupFooterCellStyle,g=this._indentBarStyle,m=this._indents,y=e.level,v=this._currentRow;s.setFirstRow(this._currentRow);for(var C=this._startCol,w=t.rowGroup.expandedAdornments==l.RowGroupAdornments.SUMMARY,x=Math.max(Math.max(this._defaultHeight,t.displayOptions.minRowHeight)/p,t.displayOptions.minTableRowHeight),b=t.layoutManager.getDataRowHeights(p),I=[],E=0;E<p;E++)I.push(s.borrowRow(v+E,(b[E]||x)*d.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,s,I,this._indicatorNo,v,C++,p),this.checkBar&&this._buildCheckBarCell(t,s,I,e.checked,v,C++,p);var S=u.getGroupFooterCells(),R=e.vindex*p;for(E=0;E<p;E++){var T=v+E,D=C,k=I[E];if(m>0)for(var M=0;M<m;M++)w?M<y-2?k.addBlank(D,g):k.addBlank(D,f):k.addBlank(D,g),0==E&&p>1&&s.addMerge(T,D,p,1),D++;for(M=0;M<_;M++){o=M+D;var L=S[R+E][M],O=L.layout;if(n=O.firstColumn,r=this._columnGroupFooterStyles[n.$_hash][e.footerIndex],h.applyDynamicStyles){var F=c.DummyCellIndex.tempItem(t,e,O),P=t.rowGroup.getFooterCell(F),B=P.getSummary();r=this.$_summaryStyleSet(P,B,r)}if(O.isProxy||L.spanned)k.addBlank(o,r);else{var V=O.parent,N=V&&V.vertical,A=0,$=0,H=O.getGroupFooterUserSpan(e.parent,e.footerIndex),U=H?0:O.getGroupFooterSpan(e.index,e.footerIndex)-1;if(H){var G=H.footerCount||0;A=G>0?G*p:H.rowspan||1,$=H.colspan||1,A=Math.min((e.parent.footerCount-e.vindex)*p,A),s.addMerge(T,o,A,$);for(var W=0;W<A;W++)for(var j=0;j<$;j++)S[R+W+E][M+j].spanned=!0}else if(U>0){var z=0;if(F=O.vindex+1,N)for(;z++<U&&z<p;)A+=V.getVisible(F++)._dspan,S[R+z][M].spanned=!0;else for(;z++<U&&F<Math.min(_,V.visibleCount);)$+=V.getVisible(F++)._cspan,S[R+E][M+z].spanned=!0}i.call(this,k,o,n,r),!H&&s.addMerge(T,o,O._dspan+A,O._cspan+$)}this._rowGrouped&&h.showLevelOutline&&s.setRowLevel(T,e.level)}}this._currentRow+=p,s.setLastRow(this._currentRow-1)},d.prototype.buildMergedGroupHeader=function(t,e){var i=this._workbook.currentSheet,o=this._preparer,n=e.level,r=Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*o.dataRowCount),s=o.colCount,a=this._currentRow;i.setFirstRow(this._currentRow);var l=this._startCol,h=i.borrowRow(a,-1===r?-1:r*d.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(t,i,h,this._indicatorNo,a,l++,1),this.checkBar&&this._buildCheckBarCell(t,i,h,e.checked,a,l++,1);for(var u=0;u<n-1;u++){var c=o.getItem(0,l+u);h.addBlank(l+u,this._columnStyles[c.layout.firstColumn.$_hash])}var p=n-1,_=o.getItem(0,p).layout,f=_.firstColumn,g=this._buildValueCell(t,i,h,e.firstItem,_,l+p);this._mergeHeads[f.$_hash]={startRow:a,style:g};var m=t.rowGroup.getHeaderText(e);for(u=l+n,g=this._groupHeaderStyle,n<o.colCount&&h.addText(u++,m,g);u<s+l;u++)h.addBlank(u,g);s-n>1&&i.addMerge(a,n+l,1,s-n),this._currentRow++,i.setLastRow(this._currentRow-1)},d.prototype.buildMergedGroupFooter=function(t,e){function i(i,o,n,r){var s=a.RowGroupFooterCell.getValue(e,n),l=this._exportOptions;if(s instanceof Date)l.datetimeCallback?(s=l.datetimeCallback(e.index,n.name,s))instanceof Date?i.addDate(o,s,r):i.addText(o,s,r):i.addDate(o,s,r);else if(isNaN(s)){var h=c.DummyCellIndex.tempItem(t,e,n),u=t.getDisplayText(h)||"";i.addText(o,u,r)}else i.addNumber(o,s,r)}var o,n,r,s,h=this._workbook.currentSheet,u=this._exportOptions,p=this._preparer,_=p.dataRowCount,f=p.colCount,g=p.getItemLevel(e),m=this._currentRow;h.setFirstRow(this._currentRow);for(var y=this._startCol,v=t.rowGroup.expandedAdornments==l.RowGroupAdornments.SUMMARY,C=Math.max(Math.max(this._defaultHeight,t.displayOptions.minRowHeight)/_,t.displayOptions.minTableRowHeight),w=t.layoutManager.getDataRowHeights(_),x=[],b=t.layoutManager,I=0;I<_;I++){var E=h.borrowRow(m+I,(w[I]||C)*d.LINE_HEIGHT);E._row=I,x.push(E)}for(this.indicator&&this._buildIndicatorCell(t,h,x,this._indicatorNo,m,y++,_),this.checkBar&&this._buildCheckBarCell(t,h,x,e.checked,m,y++,_),o=0;o<g;o++){r=(F=p.getItem(0,o).layout).firstColumn;var S=this._mergeHeads[r.$_hash];s=S?S.style:this._columnStyles[r.$_hash];for(var R=e.parent;R&&r.groupLevel!==R.level;)R=R.parent;if(this.allItems||e.parent.expanded){for(I=0;I<_;I++)v&&0===I&&R&&R.getFirstVisibleItem(!0)===e?(s=this._buildValueCell(t,h,x[I],e.parent.firstItem,F,y+o),this._mergeHeads[r.$_hash]={startRow:m,style:s}):x[I].addBlank(y+o,s);if(this._columnMerged)if(v)r.groupLevel;else{var T=this._mergeHeads[r.$_hash].startRow;if(e.visible){var D=c.DummyCellIndex.tempItem(t,e,F),k=b.getMergeRoom(D);k&&k.isTail(D)&&h.addMerge(T,o+y,m+_-T,F._defColSpan)}else R&&R.last===e&&h.addMerge(T,o+y,m+_-T,F._defColSpan)}}else for(I=0;I<_;I++)this._buildValueCell(t,h,x[I],e.parent.firstItem,F,y+o)}var M=p.getGroupFooterCells(),L=e.vindex*_;for(I=0;I<_;I++){var O=m+I;for(o=g;o<f;o++){n=o+y;var F,P=M[L+I][o];if(r=(F=P.layout).firstColumn,F.isProxy||P.spanned)s=this._columnStyles[r.$_hash],x[I].addBlank(n,s);else{var B=F.parent,V=B&&B.vertical,N=0,A=0,$=F.getGroupFooterUserSpan(e.parent,e.footerIndex),H=$?0:F.getGroupFooterSpan(e.index,e.footerIndex)-1;if($){var U=$.footerCount||0;N=U>0?U*_:$.rowspan||1,A=$.colspan||1,N=Math.min((e.parent.footerCount-e.vindex)*_,N),h.addMerge(O,n,N,A);for(var G=0;G<N;G++)for(var W=0;W<A;W++)M[L+G+I][W+o].spanned=!0}else if(H>0){var j=0,z=F.vindex+1;if(V)for(;j++<H&&j<_;)N+=B.getVisible(z++)._dspan,M[L+j][o].spanned=!0;else for(;j++<H&&z<Math.min(f-1,B.visibleCount);)A+=B.getVisible(z++)._cspan,M[L+I][o+j].spanned=!0}if(s=this._columnGroupFooterStyles[r.$_hash][e.footerIndex],u.applyDynamicStyles){z=c.DummyCellIndex.tempItem(t,e,F);var Y=t.rowGroup.getFooterCell(z),q=Y.getSummary();s=this.$_summaryStyleSet(Y,q,s)}i.call(this,x[I],n,r,s),!$&&h.addMerge(O,n,F._dspan+N,F._cspan+A)}this._rowGrouped&&u.showLevelOutline&&h.setRowLevel(O,g)}}this._currentRow+=_,h.setLastRow(this._currentRow-1)},d.prototype.buildTreeSheet=function(t,e){var i=this,n=this._exportOptions,r=this._workbook;n.allItems&&(this.allItems=t.getAllItems());var s=this.allItems,a=s?s.length:t.itemCount,l=r.createSheet(this._sheetName,n),h=t.displayOptions;if(this._defaultHeight=h.rowHeight||h.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=n.start>0?n.start:0;var u=n.count>0?n.count:a;a=u>0?this._startItem+u>a?a-this._startItem:u:a-this._startItem}this._lastItem=this._startItem+a,this._prepareCommonStyles(t),this._currentRow=n.yOffset,this._startCol=n.xOffset,this._buildColumns(t),l.createBorderEdges(o.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,n.headerSummary),this.buildTreeItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,n.footer),i._buildDocumentTail(r),i._buildUserCells(t,r),e&&e()}))},d.prototype.buildTreeItems=function(t,e){for(var i=this._exportOptions.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,r=this._indexItem;r<n;r++){var a=o?o[r]:t.getItem(r);if(this._indicatorNo=a instanceof s.GridRow&&i?a.dataRow:r+1,!(a instanceof m.TreeItem))throw new Error("Unkown tree item type");this.buildTreeRow(t,a),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildTreeItems(t,e)}.bind(this),0)},d.prototype.buildTreeRow=function(t,e){var i,o=this._workbook.currentSheet,n=this._preparer,r=n.dataRowCount,s=n.colCount,a=this._indents,l=e.level,h=this._currentRow;o.setFirstRow(this._currentRow);var u=this._startCol,c=t.displayOptions,p=t.layoutManager.getDataRowHeights(r),_=p.reduce((function(t,e){return t+e}),0)||e.height;isNaN(_)&&(_=(c.rowHeight||c.minRowHeight)*r),_=-1===_?-1:_>0?_/r:_;for(var f=[],g=0;g<r;g++)f.push(o.borrowRow(h+g,-1===_?-1:(p[g]||_)*d.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,o,f,this._indicatorNo,h,u++,r),this.checkBar&&this._buildCheckBarCell(t,o,f,e.checked,h,u++,r);var m=this._bodyCellStyle;for(g=0;g<r;g++){var y=f[g];y._row=g;var v=h+g,C=a>0?u+l-1:u,w=n.getItem(g,0),x=w.layout,b=x.firstColumn,I=this._columnStyles[b.$_hash],E=a>0?a-l+1:0;for(i=0;i<l-1;i++)y.addBlank(i+u,m);for(x.isProxy||w.spanned?y.addBlank(C,I):(this._buildValueCell(t,o,y,e,x,C,C),o.addMerge(v,C,x._dspan,x._defColSpan+E)),i=0;i<E;i++)y.addBlank(1+i+C,I);for(C=a>0?u+a:u,i=1;i<s;i++){var S=i+C;if(b=(x=(w=n.getItem(g,i)).layout).firstColumn,I=this._columnStyles[b.$_hash],x.isProxy||w.spanned)y.addBlank(S,I);else{var R=x.parent,T=R&&R.vertical,D=x.spanCallback,k=D?D(t.handler,x,e.index)-1:void 0;void 0===k&&(k=x.getDataSpan()-1);var M=0;if(k>0){var L=0,O=x.vindex+1;if(T)for(;L++<k&&L<r;)M+=R.getVisible(O++)._dspan,n.getItem(g+L,i).spanned=!0;else for(;L++<k&&i+L<s&&O<R.visibleCount;)M+=R.getVisible(O++)._cspan,n.getItem(g,i+L).spanned=!0}this._buildValueCell(t,o,y,e,x,S,C),T?o.addMerge(v,S,x._dspan+M,x._cspan):o.addMerge(v,S,x._dspan,x._cspan+M)}}this._exportOptions.showLevelOutline&&o.setRowLevel(h,e.level)}this._currentRow+=r,o.setLastRow(this._currentRow-1)},d.prototype.prepare=function(){},d.prototype.finallize=function(){},d.prototype.save=function(){var t=this._multiOptions.zip||JSZip,i=function(i){var h=new t;if(i)for(var u=h.folder("xl/media"),d=Object.keys(i),c=0;c<d.length;c++){var p=i[d[c]];p.fileName&&p.buffer&&u.file(p.fileName,p.buffer)}var _=this._workbook.createParts();for(var f in _){var g=_[f];g.indexOf('xmlns=""')>=0&&(g=g.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),h.file(f,g)}if(a)h.generateAsync?h.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(),l.saveLocal(r,t,o)})):(n.done&&"function"==typeof n.done&&n.done(),l.saveLocal(r,h.generate({type:"blob",compression:"DEFLATE"}),o));else if(n.target===e.ExportTarget.STREAM)if(h.generateAsync)h.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(t)}));else{var m=h.generate({type:"base64",compression:"DEFLATE"});n.done&&"function"==typeof n.done&&n.done(m)}else h.generateAsync?h.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){n.progressCallback&&n.progressCallback(null,"zip",100,t.percent)})).then((function(t){n.done&&"function"==typeof n.done&&n.done(),l.saveServer(r,t,n.url,o,s)})):(n.done&&"function"==typeof n.done&&n.done(),l.saveServer(r,h.generate({type:"base64",compression:"DEFLATE"}),n.url,o,s))}.bind(this),o=this.grid.doc,n=this._multiOptions,r=n.fileName,s=n.params,a="local"==n.target,l=this,h=this._workbook;if(t.support.blob||!a)if(h.hasDrawing){var u=h.getImageMap();h.downloader.buldDownload=n.bulkImageDownload,h.downloader.executeDownLoad(this,u,i)}else i();else alert("not supported on this browser")},d.prototype._prepareCount=function(t,e){for(var i=0,o=0,n=e.length;o<n;o++){var s=void 0,a=e[o].grid;if(a instanceof r.GridView)if(t.allItems&&this._rowGrouped){s=a.itemSource.getAllItems();var l=a.layoutManager.fixedItemCount;if(l>0)for(var h=0;h<l;h++)s.splice(h,0,a.getItem(h))}else t.pagingAllItems&&a.paged?s=a.itemSource.getPagingAllItems():t.onlyCheckedItems&&!a.rowGrouped&&(s=a.getCheckedItems(!1));else a instanceof u.TreeView&&t.allItems&&(s=a.getAllItems());i+=s?s.length:a.itemCount}return i},d.prototype._inheritStyles=function(t){for(var e={length:0},i=0,n=t.length;i<n;i++)t[i]&&o.CssFactory.extendCssStyle(t[i],e);return e},d.prototype._prepareCommonStyles=function(t){var e,i,n=this,s=this._preparer.documentCssStyles,a=function(t){return o.CssFactory.getSelectorStyle(s,t)},l=function(t){var e=[];return t.forEach((function(t){var i="string"==typeof t?a(t):t;i&&e.push(i)})),n._inheritStyles(e)},h=a("table"),u=l([h,a("tr"),a("td")]),d=l(["html",".rg-root"]),c=a(".rg-header"),p=a(".rg-footer"),_=a(".rg-header-summary"),f=a(".rg-body"),g=a(".rg-fixed-body"),m=l([".rg-root table",".rg-root .rg-table",".rg-root table tr",".rg-root .rg-table tr",".rg-root table tr td",".rg-root .rg-table tr td",".rg-root .rg-table td"]),y=l([m,".rg-header table",".rg-header .rg-table",".rg-header table tr",".rg-header .rg-table tr",".rg-header table tr td",".rg-header .rg-table tr td"]),v=l([m,".rg-footer table",".rg-footer .rg-table",".rg-footer table tr",".rg-footer .rg-table tr",".rg-footer table tr td",".rg-footer .rg-table tr td"]),C=l([m,".rg-header-summary table",".rg-header-summary .rg-table",".rg-header-summary table tr",".rg-header-summary .rg-table tr",".rg-header-summary table tr td",".rg-header-summary .rg-table tr td"]),w=l([m,".rg-body table",".rg-body .rg-table",".rg-body table tr",".rg-body .rg-table tr",".rg-body table tr td",".rg-body .rg-table tr td"]),x=l([m,".rg-fixed-body .rg-table",".rg-fixed-body .rg-table tr",".rg-fixed-body table tr",".rg-fixed-body .rg-table tr td",".rg-fixed-body table tr td",".rg-fixed-body .rg-data-row"]),b=l([m,".rg-rowgroup-bar .rg-table",".rg-rowgroup-bar .rg-table tr",".rg-rowgroup-bar table tr",".rg-rowgroup-bar .rg-table tr td",".rg-rowgroup-bar table tr td"]),I=l([m,".rg-rowgroup-head .rg-table",".rg-rowgroup-head .rg-table tr",".rg-rowgroup-head table tr",".rg-rowgroup-head .rg-table tr td",".rg-rowgroup-head table tr td"]),S=l([m,".rg-rowgroup-foot .rg-table",".rg-rowgroup-foot .rg-table tr",".rg-rowgroup-foot table tr",".rg-rowgroup-foot .rg-table tr td",".rg-rowgroup-foot table tr td"]),R=l([m,w]),T=a(".rg-header-cell"),D=a(".rg-footer-cell"),k=a(".rg-header-summary-cell"),M=a(".rg-data-cell"),L=a(".rg-rowgroup-header"),O=a(".rg-rowgroup-footer"),F=a(".rg-rowgroup-footer-cell"),P=l([d,".rg-rowgroup-head",u,I]),B=l([d,".rg-rowgroup-foot",u,S]),V=l([d,".rg-rowgroup-bar",u,".rg-rowgroup-bar-cell",b]),N=a(".rg-data-row"),A=a(".rg-fixed-row"),$=l([d,".rg-rowbarcontainer",u,m,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td",".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell"]),H=l([d,".rg-foot",u,m,".rg-foot .rg-table tr td",".rg-rowindicator-foot"]),U=l([d,".rg-sum",u,m,".rg-sum .rg-table tr td",".rg-rowindicator-sum"]);this._indicatorCellStyle=this._parseStyles(this._workbook,$),this._indicatorFootStyle=this._parseStyles(this._workbook,H),this._indicatorSumStyle=this._parseStyles(this._workbook,U);var G=l([d,".rg-rowbarcontainer",u,m,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td.rg-checkbar-cell"]),W=l([d,".rg-foot",u,m,".rg-foot .rg-table tr td",".rg-checkbar-foot"]),j=l([d,".rg-sum",u,m,".rg-sum .rg-table tr td",".rg-checkbar-sum"]);this._checkBarCellStyle=this._parseStyles(this._workbook,G),this._checkBarFootStyle=this._parseStyles(this._workbook,W),this._checkBarSumStyle=this._parseStyles(this._workbook,j),i=this._headerCssStyle=l([d,c,a("."+t.header.styleName),u,T,y,a("."+t.header.exportStyleName)]),this._headerCellStyle=this._parseStyles(this._workbook,i,!0);var z=this._exportOptions,Y=z.footer===E.VIS_VISIBLE,q=z.headerSummary===E.VIS_VISIBLE;this._footerCellStyles=[];for(var X=0;X<(Y?t.footers.count:t.footers.visibleCount);X++)i=l([d,p,i=(e=(Y?t.footers.get(X):t.footers.getVisible(X)).styleName)?a("."+e):null,u,D,v]),this._footerCellStyles.push(this._parseStyles(this._workbook,i,!0));for(this._summaryCellStyles=[],X=0;X<(q?t.headerSummaries.count:t.headerSummaries.visibleCount);X++)i=l([d,_,i=(e=(q?t.headerSummaries.get(X):t.headerSummaries.getVisible(X)).styleName)?a("."+e):null,u,k,C]),this._summaryCellStyles.push(this._parseStyles(this._workbook,i,!0));if(this._groupFooterCellStyles=[],t instanceof r.GridView)for(X=0;X<t.rowGroup.footers.count;X++){var K=t.rowGroup.footers.get(X);i=l([d,O,i=(e=K.exportStyleName||K.styleName)?a("."+e):null,u,F,R]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,i,!0))}i=this._cellCssStyle=l([d,f,h,w,N,M]),this._bodyCellStyle=this._parseStyles(this._workbook,i,!1),i=l([d,f,h,A,w,M]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,i,!1),i=this._fixedCellCssStyle=l([d,g,h,N,x,M]),this._fixedCellStyle=this._parseStyles(this._workbook,i,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,l([d,L])),this._groupFooterCellStyle=this._parseStyles(this._workbook,l([d,h,O,F,w])),this._indentHeadStyle=this._parseStyles(this._workbook,P),this._indentFootStyle=this._parseStyles(this._workbook,B),this._indentBarStyle=this._parseStyles(this._workbook,V),this._dynamicStyles={}},d.prototype._exportGridAsync=function(t,e,i,o){if(void 0===o&&(o=null),i<e.exportGrids.length){var n=e.exportGrids[i];setTimeout(function(){this._exportGrid(t,n.options,function(){o()}.bind(this))}.bind(this))}},d.prototype._exportGrid=function(t,e,i){var n=e.grid;this._preparer=new o.ExportPreparer(n,e),this._exportOptions=e,this.indicator=e.indicatorVisible(n)?n.rowIndicator:null,this.checkBar=e.checkBarVisible(n)?n.checkBar:null,this.header=e.headerVisible(n),this.headerSummary=e.headerSummaryVisible(n),this.footer=e.footerVisible(n),this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.allItems=null,this.buildBook(function(){this._preparer&&this._preparer.dispose(),i&&i()}.bind(this))},d.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},d.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},d.prototype._extendStyles=function(t,e,i,o,n,r){return void 0===o&&(o=!0),t.extendStyle(e,i,o,n,r)},d.prototype.$_summaryStyleSet=function(t,e,i){var n=this._exportOptions,r=this._workbook,s=void 0;if(e){var l=e.exportStyleName||e.styleName,u=void 0;if(n.applyDynamicStyles)if(t instanceof f.GridSummaryObject){var d=new h.ColumnSummaryStyle;l=(u=t.getCellStyle(t.getCell(e.column.layout),d,!1)).exportStyleName||u.styleName||l}else t instanceof a.RowGroupFooterCell&&(d=new h.ColumnStyle,l=(u=this.grid.rowGroup.getFooterCellStyle(t,d,!1)).exportStyleName||u.styleName||l);var c=void 0,p=void 0;if((c=u&&u.numberFormat||e.numberFormat)?c=o.ExcelFormatConverter.convertNumberFormat(c):(c=u&&u.datetimeFormat||e.datetimeFormat)&&(c=o.ExcelFormatConverter.convertDateFormat(c)),c&&((p=e.prefix)&&(c='"'+p+'"'+c),(p=e.suffix)&&(c=c+'"'+p+'"'),s=r.addNumberFormat(c)),l||void 0!==s){for(var _=this._preparer.documentCssStyles,g=l?l.trim().split(" "):[],m=[],y=0,v=g.length;y<v;y++)m.push(o.CssFactory.getSelectorStyle(_,"."+g[y]));if(e.$_owner.type){var C=e.$_owner.type+"=styleName="+l+"formatId="+s,w=this._dynamicStyles;return w[C]||(w[C]=this._extendStyles(r,i,this._inheritStyles(m),!0,s)),w[C]}return this._extendStyles(r,i,this._inheritStyles(m),!0,s)}}return i},d.prototype._buildColumns=function(t){for(var e,i,n,s=this._exportOptions,a=this._workbook,c=a.currentSheet,p=this._preparer,_=0;_<this._startCol;_++)c.addColumn(-1,s.xOffsetWidth/d.PIXELS_PER_CHAR,null);if(this.indicator&&(n=Math.round(t.rowIndicator.minWidth/d.PIXELS_PER_CHAR),c.addColumn(t.rowIndicator.$_hash,n,null)),this.checkBar&&(n=Math.round(t.checkBar.width/d.PIXELS_PER_CHAR),c.addColumn(t.checkBar.$_hash,n,null)),s.indenting&&(t instanceof r.GridView&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(t.rowGroup.expandedAdornments===l.RowGroupAdornments.SUMMARY?0:1):t instanceof u.TreeView&&(this._indents=this._rowLevels-1),this._indents>0))for(_=0;_<this._indents;_++)n=Math.max(this._indentWidth,1),c.addColumn(-1,n,null);var f=t.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var g=p.colCount,m=p.dataRowCount,y=!1;for(_=0;_<m;_++)for(var v=0;v<g;v++){var C=p.getItem(_,v).layout;if(e=C.firstColumn,0===_&&(n=Math.round(C._cellWidth/d.PIXELS_PER_CHAR),c.addColumn(e.$_hash,n,null,s.hiddenColumns.indexOf(e.name)>=0)),i=e.$_hash,!this._columnStyles[i]){var x=t.dataSource;if(e instanceof h.ValueColumn){var b=this._textFormatId;if(e instanceof h.DataColumn){var I=s.exportLink&&e.renderer&&e.renderer.type==w.LinkCellRenderer.TYPE&&!e.excelFormat,S=x.getField(e.dataIndex),R=S?S.dataType:l.ValueType.TEXT;R===l.ValueType.NUMBER?b=this._numberFormatId:R===l.ValueType.DATETIME&&(b=this._dateFormatId);var T=e.excelFormat,D=void 0;null!=T?b="number"==typeof T||parseInt(T)>0?parseInt(T):a.addNumberFormat(T):I?b=0:(R==l.ValueType.NUMBER?"string"==typeof(T=null===e.numberFormat?void 0:e.numberFormat||s.numberFormat||f.numberFormat)&&(T=o.ExcelFormatConverter.convertNumberFormat(T)):R==l.ValueType.DATETIME&&"string"==typeof(T=e.datetimeFormat||s.datetimeFormat||f.datetimeFormat)&&(T=o.ExcelFormatConverter.convertDateFormat(T)),T&&((D=e.prefix)&&(T='"'+D+'"'+T),(D=e.suffix)&&(T=T+'"'+D+'"'),b=a.addNumberFormat(T)))}this._columnStyles[i]=this._changeFormatId(a,C.isFixed?this._fixedCellStyle:this._bodyCellStyle,b),this._columnFixedStyles[i]=this._changeFormatId(a,this._bodyFixedCellStyle,b),this._columnFooterStyles[i]=[],this._columnSummaryStyles[i]=[],this._columnGroupFooterStyles[i]=[];for(var k=s.footer===E.VIS_VISIBLE,M=s.headerSummary===E.VIS_VISIBLE,L=0;L<(k?t.footers.count:t.footers.visibleCount);L++){var O=k?t.footers.get(L):t.footers.getVisible(L),F=e.footers.get(O._childIndex);this._columnFooterStyles[i][L]=this.$_summaryStyleSet(O,F,this._footerCellStyles[L])}for(L=0;L<(M?t.headerSummaries.count:t.headerSummaries.visibleCount);L++){var P=M?t.headerSummaries.get(L):t.headerSummaries.getVisible(L),B=e.headerSummaries.get(P._childIndex);this._columnSummaryStyles[i][L]=this.$_summaryStyleSet(P,B,this._summaryCellStyles[L])}if(t instanceof r.GridView)for(L=0;L<t.rowGroup.footers.count;L++){var V=t.rowGroup.footers.get(L),N=e.groupFooters.get(V.index);this._columnGroupFooterStyles[i][L]=this.$_summaryStyleSet(null,N,this._groupFooterCellStyles[L])}}t instanceof r.GridView&&(s.separateRows||s.onlyCheckedItems&&!t.rowGrouped||e instanceof h.DataColumn&&(e.mergeRule||e.layout.mergeRule||t.rowGroup.mergeMode&&t.isGroupedColumn(e))&&(y=!0))}}this._columnMerged=y},d.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){for(var n=this._currentRow,r=this._startCol,s=void 0,a=t.currentSheet,l=0;l<e.spaceTop;l++){s=a.addRow(n+l,void 0);for(var h=0;h<i;h++)s.addBlank(r+h,void 0)}n+=e.spaceTop;var u=e.message,d=void 0;if(e.styleName){var c=this._preparer.documentCssStyles,p=[];e.styleName.split(" ").forEach((function(t){p.push(o.CssFactory.getSelectorStyle(c,"."+t))})),d=this._parseStyles(t,this._inheritStyles(p),!0)}else d=this._parseStyles(t,e.cssStyle,!0);for(s=a.addRow(n,e.height),l=0;l<i;l++)0==l?(s.addText(r,u,d),a.addMerge(n,r,1,i)):s.addBlank(r+l,d);for(n++,l=0;l<e.spaceBottom;l++)for(s=a.addRow(n+l,void 0),h=0;h<i;h++)s.addBlank(r+h,void 0);n+=e.spaceBottom,this._currentRow=n}},d.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTitle,o),this._buildTitleCommon(i,e.documentSubtitle,o)},d.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTail,o)},d.prototype._buildIndicatorCell=function(t,e,i,o,n,r,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(r,o,a),s>1){for(var l=1;l<s;l++)i[l].addBlank(r,a);e.addMerge(n,r,s,1)}},d.prototype._buildCheckBarCell=function(t,e,i,o,n,r,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,h=this._exportOptions.checkMark,u=this._exportOptions.unCheckMark;if(l.addText(r,o?h:u||"",a),s>1){for(var d=1;d<s;d++)i[d].addBlank(r,a);e.addMerge(n,r,s,1)}},d.prototype._buildValueCell=function(t,e,i,n,r,s,a){void 0===a&&(a=0);var u,d,_=this._workbook,f=n.index>=0&&n.index<t.fixedOptions.rowCount,g=t.body,m=this._exportOptions,y=c.DummyCellIndex.tempItem(t,n,r),C=r.firstColumn,x=g.getRowStyle(n,f,!0,m.applyDynamicStyles),b=x.exportStyleName||x.styleName,E=C.exportStyleName||C.styleName;m.applyDynamicStyles&&(d=g.getIndexCellStyle(y,!1));var S,T=d&&d.renderer||C.renderer,D=(!r.isFixed&&f?this._columnFixedStyles[C.$_hash]:this._columnStyles[C.$_hash])||this._bodyCellStyle;if(m.applyFixed&&(!t.isTree()&&f&&e.setFixedInfo(i.index+1,void 0),r.$_fixed&&e.setFixedInfo(void 0,s+1)),C.blankWhenExport)i.addBlank(s,D);else if(C instanceof h.DataColumn){var k=C.dataIndex,M=d&&d.cellProtectProps||C.cellProtectProps,L=t.dataSource.getField(k),O=m.exportLink&&!C.excelFormat&&C.renderer&&C.renderer.type==w.LinkCellRenderer.TYPE,F=m.exportTemplate&&C.renderer&&C.renderer.type===I.TemplateCellRenderer.TYPE,P=!1!==m.exportImage&&T&&(T.type===w.ImageCellRenderer.TYPE||T.type===w.IconCellRenderer.TYPE),B=(P=P&&(m.exportImage?!1!==T.exportImage:!!T.exportImage))&&T.type===w.IconCellRenderer.TYPE,V=P&&T.type===w.ImageCellRenderer.TYPE,N=void 0;if(L){var A=n.getData(k);if(N=C.displayCallback,b||E||d||M){var $=void 0,H=void 0,U=[r.isFixed?this._fixedCellCssStyle:this._cellCssStyle];if(d&&"object"==typeof d){var G=d;$="string"==typeof($=d.exportStyleName||d.styleName||E)?$:void 0;var W=void 0;if(H=d.excelFormat);else if(L.dataType==l.ValueType.NUMBER?H=(W=G.numberFormat)?o.ExcelFormatConverter.convertNumberFormat(W):void 0:L.dataType==l.ValueType.DATETIME&&(H=(W=G.datetimeFormat)?o.ExcelFormatConverter.convertDateFormat(W):void 0),H){var j=G.prefix;j&&(H='"'+j+'"'+H);var z=G.suffix;z&&(H=H+'"'+z+'"')}}else $="string"==typeof d?d:void 0;var Y=this._preparer.documentCssStyles,q=this._dynamicStyles;if(q[dt=C.$_hash+"="+b+"="+E+"="+JSON.stringify(d)+"="+JSON.stringify(M)+"="+!0])D=q[dt];else{var X=[];if(b){var K=b.trim().split(" ");Array.prototype.push.apply(X,K),r.isFixed&&K.forEach((function(t){X.push("rg-fixed-body .".concat(t))}))}E&&Array.prototype.push.apply(X,E.trim().split(" ")),$&&Array.prototype.push.apply(X,$.trim().split(" "));for(var J=0,Z=X.length;J<Z;J++)U.push(o.CssFactory.getSelectorStyle(Y,"."+X[J]));var Q=void 0;H&&(Q=_.addNumberFormat(H)),S=this._inheritStyles(U),O&&(S["font-decoration"]="underline",S.color="blue");var tt=S.whiteSpace||S["white-space"],et=null!=tt&&"none"!=tt&&"nowrap"!=tt,it=S.textWrap||S["text-wrap"];et=et||"nowrap"!==it,D=this._extendStyles(_,D,S,et,Q,M),this._dynamicStyles[dt]=D}}switch(L.dataType){case"number":(m.numberCallback||N)&&(A=m.numberCallback?m.numberCallback(n.index,C.name,A,t.handler):N(t.handler,y.proxy(),A));var ot=C.excelFormulaExprStatement,nt=void 0;if(ot){var rt=this._excelFormulaRuntime;rt.setItemIndex(i.index,a),rt.setColumns(this._preparer._dataCells[i._row]),nt=ot.evaluate(rt)}null!=A||nt?"number"==typeof A?i.addNumber(s,A,D,nt):i.addText(s,A,D):i.addBlank(s,D);break;case"datetime":case"date":A?m.datetimeCallback||N?(A=m.datetimeCallback?m.datetimeCallback(n.index,C.name,A,t.handler):N(t.handler,y.proxy(),A))instanceof Date?i.addDate(s,A,D):i.addText(s,A,D):i.addDate(s,A,D):m.nullDateText?i.addText(s,m.nullDateText,D):i.addBlank(s,D);break;case"boolean":m.booleanCallback||N?"boolean"==typeof(A=m.booleanCallback?m.booleanCallback(n.index,C.name,A,t.handler):N(t.handler,y.proxy(),A))?i.addBool(s,A,D):i.addText(s,A,D):m.booleanFormat?(A=R.BooleanFormatter.getFormatter(m.booleanFormat).formatValue(A),i.addText(s,A,D)):i.addBool(s,A,D);break;default:if(u=A||"",m.lookupDisplay&&(C.labelField||C.lookupDisplay))u=p.DataCell.getText(n,C);else if(F){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(C.renderer):this._templateRenderer=t.delegate.createRenderer(I.TemplateCellRenderer.TYPE,C.renderer,null);var st=this._templateRenderer._parser,at=C.renderer.callback,lt=t.body.getCell(y,!1),ht=at?at.call(this,t.handler,lt,-1,-1):st.realize(t,lt,null,this._templateRenderer.valueCallback);u=ht?ht.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""}else if(L.dataType===l.ValueType.OBJECT&&"object"==typeof A)if(m.objectCallback)u=m.objectCallback(n.index,C.name,A,t.handler);else{var ut=C.objectKey||C.objectCallback,dt=ut?C.objectKey:L.objectKey,ct=ut?C.objectCallback:L.objectCallback;u=ct&&"function"==typeof ct?ct(L.orgFieldName,n.dataRow,A):dt&&A.hasOwnProperty(dt)?A[dt]:JSON.stringify(A)}else null!=A&&(u=C.textFormatter?C.textFormatter.getText(A):u);if("number"==typeof(u=m.textCallback?m.textCallback(n.index,C.name,u,t.handler):N&&!C.textFormatter?N(t.handler,y.proxy(),A):u))i.addNumber(s,u,D);else if(u&&O)if(lt=t.body.getCell(y,!1),this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(C.renderer)):this._linkRenderer=t.delegate.createRenderer(w.LinkCellRenderer.TYPE,C.renderer,null),gt=this._linkRenderer){var pt=gt.$_getUrl(t,lt);i.addLink(s,u,pt,D)}else i.addText(s,u,D);else if(V){lt=t.body.getCell(y,!1),this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(T)):this._imageRenderer=t.delegate.createRenderer(w.ImageCellRenderer.TYPE,T,null);var _t=(gt=this._imageRenderer).$_getImageUrl(t,lt),ft=e.getColumnWidth(lt.dataColumn.$_hash);_t?i.addImage(s,u,ft,l.IconLocation.CENTER,_t,D,-1,gt.imageHeight):i.addText(s,u,D)}else if(B){var gt;lt=t.body.getCell(y,!1),this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(T)):this._iconRenderer=t.delegate.createRenderer(w.IconCellRenderer.TYPE,T,null),_t=(gt=this._iconRenderer).$_getIconUrl(t,lt),ft=e.getColumnWidth(lt.dataColumn.$_hash),_t?i.addImage(s,u,ft,gt.iconLocation,_t,D,gt.iconWidth,gt.iconHeight):i.addText(s,u,D)}else u?i.addText(s,u,D):i.addBlank(s,D)}}else i.addBlank(s,D)}else if(C instanceof h.SeriesColumn){var mt=C.renderer;if(mt&&mt.type&&mt.type!=v.SeriesTextCellRenderer.TYPE){var yt=this._preparer;m.exportSeriesColumn&&v.SparkChartRenderer.interfaced(mt)&&yt.sparkColumns[C.$_hash]?i.addSparkLine(s,a,yt.sparkColumns[C.$_hash],D):i.addBlank(s,D)}else{this._seriesCell.setIndex(y);var vt=this._seriesCell.value;vt?(W=p.SeriesCell.getText(vt,","),i.addText(s,W,D)):i.addBlank(s,D)}}return D},d.prototype._buildUserCells=function(t,e){var i=this,n=this._exportOptions,r=e.currentSheet,s=n.userCellsCallback,a=n.userCells||s&&s(t.handler,r.rowCount,r.colCount,r.name);if(y.Utils.isArray(a)){var l=this._dynamicStyles,h=this._preparer.documentCssStyles,u=r.workbook.styles._styles._items[0],d=t.doc.createElement("userCell").style;a.forEach((function(t){var n,s,a;if(t.format&&(a=e.addNumberFormat(t.format)),t.styleName){var c=t.styleName;n="userCells;styleName=".concat(c,";formatId=").concat(a);var p=c?c.trim().split(" "):[];if(!(s=l[n])){for(var _=[],f=0,g=p.length;f<g;f++)_.push(o.CssFactory.getSelectorStyle(h,"."+p[f]));var m=i._inheritStyles(_);s=l[n]=i._parseStyles(e,m,!!m.whiteSpace&&null),a&&(s._formatId=a)}}else if(t.styles){var v=y.Utils.objectToCssText(t.styles);n="userCells;styleName=".concat(v,";formatId=").concat(a),(s=l[n])||(d.cssText=v,s=l[n]=i._parseStyles(e,d,!!d.whiteSpace&&null),a&&(s._formatId=a))}else a&&(n="userCells;styleName=".concat(void 0,";formatId=").concat(a),(s=l[n])||(s=l[n]=i._extendStyles(e,u,{},!1,a)));s=s||u;var C=t.mergeRow||1,w=t.mergeCol||1,x=y.Utils.makeArray(t.heights,!0);for(f=0;f<C;f++)for(var b=0;b<w;b++){var I=r.borrowRow(t.row+f,x[f]||t.height||-1);if(0===f&&0===b){var E=t.value;switch(typeof E){case"string":I.addText(t.col,E,s);break;case"number":I.addNumber(t.col,E,s,t.formula);break;case"boolean":I.addBool(t.col,null==E?null:E,s);break;default:E instanceof Date&&I.addDate(t.col,E,s)}}else I.addBlank(t.col+b,s)}C*w>1&&r.addMerge(t.row,t.col,C,w)}))}},d.CSS_HEAD="rg-header",d.CSS_FOOT="rg-footer",d.CSS_BODY="rg-body",d.CSS_FIXED="rg-fixed-body",d.CSS_TABLE="rg-table",d.CSS_ROWGROUP_BAR="rg-rowgroup-bar",d.CSS_ROWGROUP_HEAD="rg-rowgroup-head",d.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",d.CSS_HEAD_CELL="rg-header-cell",d.CSS_INDICATOR="rg-rowindicator-cell",d.CSS_CHECK="rg-checkbar-cell",d.CSS_DATA_ROW="rg-data-row",d.PIXELS_PER_CHAR=7,d.LINE_HEIGHT=.75,d}(i.GridExporterBase);return Va.GridExcelExporter=D,Va}(),w=dl(),x=Cl(),b=To(),I=Li(),E=Lr(),R=ci(),T=la(),D=function(){function t(){}return t.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof l.GridColumn)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},t.getItemProxy=function(e,i){var o=e.parent,n={type:void 0,id:e.id,parentId:null==o?-1:o.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked};return i&&(n.childIndex=e.childIndex,n.level=e.level),e instanceof r.GridRow?(n.type="row",n.dataRow=e.dataRow):e instanceof r.GroupItem?(n.count=e.children.length,n.expanded=e.expanded,e instanceof r.GroupItemImpl||e instanceof f.MergedGroupHeader?(n.type="group",n.footerId=e.footer?e.footer.id:-1,e instanceof R.RootItem||i&&(n.firstItem=t.getItemProxy(e.firstItem),n.firstDataItem=t.getItemProxy(e.firstDataItem),n.dataRows=e.getRows())):e instanceof p.TreeItem&&(n.type="tree",n.dataRow=e.dataRow?e.dataRow:-1)):e instanceof r.GroupFooter&&(n.type="footer"),n},t.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].index);return e},t.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(e.dataRow>=0){if(e instanceof p.TreeItem){var n=e.row,r=n.values;i.__rowId=n.rowId;for(var s=0,a=o.fieldCount;s<a;s++){i[o.getOrgFieldName(s)]=r[s]}}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},t.getDisplayValues=function(t,e,i){var o=t.getDataColumns();if(e){for(var n=i?{}:e.getRowObject(),r=new l.ColumnStyle,a=0,h=o.length;a<h;a++){var u=o[a],d=e.index>=0?s.CellIndex.temp(t,e.index,u):s.DummyCellIndex.tempItem(t,e,u),c=t.body.getCell(d,!1);c._index=d,r.clear(),r.assign(u),t.body.getCellStyle(c,r);var p=r.toFormatter(null);n[i?u.name:u.fieldName]=I.DataCell._getDisplayText(t,e,u,e.getData(u.dataIndex),p)}return n}},t.setValues=function(t,e,i,o){var n,r,s,a=e.dataSource,l=a.fieldCount;if(t.isItemEditing(e)){if(e)e.values=i;else for(var h=0;h<l;h++){var d=a.getOrgFieldName(h);i.hasOwnProperty(d)&&e.setData(h,i[d])}}else if((s=e.dataRow)>=0)if(a instanceof u.LocalTreeDataProvider){var p=a.rowById(s);if(p){if(n=p.values||[],Array.isArray(i)){h=0;for(var _=i.length;h<_&&!(r=!a.getField(h).equalValues(n[h],i[h]));h++);}else for(h=0;h<l;h++){d=a.getOrgFieldName(h);if(i.hasOwnProperty(d)&&(r=!a.getField(h).equalValues(n[h],i[d])))break}if(!r)return;p.update(i,o)}}else if(a instanceof c.LocalDataProvider){if(n=a.getRow(s),Array.isArray(i))for(h=0,_=i.length;h<_&&!(r=!a.getField(h).equalValues(n[h],i[h]));h++);else for(h=0;h<l;h++){d=a.getOrgFieldName(h);if(i.hasOwnProperty(d)&&(r=!a.getField(h).equalValues(n[h],i[d])))break}if(!r)return;a.updateRow(s,i,o)}},t}(),k=function(){function t(t,e,i){this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onPopupMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onLeftPosChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onShowEditCommand=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onWheel=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this.onLayoutExpanding=null,this.onLayoutExpanded=null,this.onLayoutCollapsing=null,this.onLayoutCollapsed=null,this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}return t.prototype.dispose=function(){return this._view.dispose(),this._view=null,this._container=this._container&&this._container.dispose(),this._listener=this._listener&&this._listener.dispose()},_dp(t,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t}}),_dp(t,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t}}),_dp(t,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t}}),_dp(t,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t}}),_dp(t,"undoing",{get:function(){return this._view.undoing}}),_dp(t,"redoing",{get:function(){return this._view.redoing}}),_dp(t,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t}}),_dp(t,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t}}),_dp(t,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t}}),_dp(t,"fixedOptions",{get:function(){return this._view.fixedOptions}}),_dp(t,"displayOptions",{get:function(){return this._view.displayOptions}}),_dp(t,"formatOptions",{get:function(){return this._view.formatOptions}}),_dp(t,"editOptions",{get:function(){return this._view.editOptions}}),_dp(t,"editorOptions",{get:function(){return this._view.editorOptions}}),_dp(t,"copyOptions",{get:function(){return this._view.copyOptions}}),_dp(t,"pasteOptions",{get:function(){return this._view.pasteOptions}}),_dp(t,"sortingOptions",{get:function(){return this._view.sortingOptions}}),_dp(t,"filteringOptions",{get:function(){return this._view.filteringOptions}}),_dp(t,"mobileOptions",{get:function(){return this._view.mobileOptions}}),_dp(t,"dataDropOptions",{get:function(){return this._view.dataDropOptions}}),_dp(t,"rowIndicator",{get:function(){return this._view.rowIndicator}}),_dp(t,"stateBar",{get:function(){return this._view.stateBar}}),_dp(t,"checkBar",{get:function(){return this._view.checkBar}}),_dp(t,"header",{get:function(){return this._view.header}}),_dp(t,"footer",{get:function(){return this._view.footer}}),_dp(t,"footers",{get:function(){return this._view.footers}}),_dp(t,"headerSummary",{get:function(){return this._view.headerSummary}}),_dp(t,"headerSummaries",{get:function(){return this._view.headerSummaries}}),_dp(t,"filterPanel",{get:function(){return this._view.filterPanel}}),t.prototype.ping=function(t){this._view instanceof a.GridBase&&alert(t)},t.prototype.refresh=function(t){this._view.refreshView(t)},t.prototype.beginUpdate=function(){this._view.beginUpdate()},t.prototype.endUpdate=function(t){this._view.endUpdate(t)},t.prototype.isVisible=function(){return this._view.visible},t.prototype.setVisible=function(t){this._view.visible=t},t.prototype.getItemCount=function(){return this._view.itemCount},t.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},t.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this._view.getItem(t[i]);n&&e.push(n.dataRow)}return e},t.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},t.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},t.prototype.restoreColumns=function(){this._view.restoreColumns()},t.prototype.getDataSource=function(){return this._dataDelegator},t.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},t.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),hideDeletedRows:this._view.itemSource.hideDeleted,sortMode:this._view.itemSource.sortMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},t.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries))},t.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},t.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},t.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},t.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},t.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},t.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},t.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},t.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},t.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},t.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},t.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},t.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},t.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},t.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},t.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},t.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},t.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},t.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},t.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},t.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},t.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},t.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},t.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},t.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},t.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},t.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},t.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},t.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},t.prototype.getHeader=function(){return this._view.header.toProxy()},t.prototype.setHeader=function(t){this._view.header.assignFrom(t)},t.prototype.getFooter=function(){return this._view.footer.toProxy()},t.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},t.prototype.getFooters=function(){return this._view.footers.toProxy()},t.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},t.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},t.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},t.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},t.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},t.prototype.setFilterPanel=function(t){this._view.filterPanel.assignFrom(t)},t.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},t.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},t.prototype.addUserCellStyle=function(t,e,i){this._view.body.addUserCellStyle(t,e,i)},t.prototype.removeUserCellStyle=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._view.body.removeUserCellStyle(t,e)},t.prototype.getUserCellStyle=function(t,e){return this._view.body.getUserCellStyle(t,e)},t.prototype.setAriaLabelCallback=function(t){this._view.body.ariaLabelCallback=t},t.prototype.orderBy=function(t,o,n){if(t){var r=[],s=[],a=[];t=i.Utils.makeArray(t,!1),o=i.Utils.makeArray(o,!0),n=i.Utils.makeArray(n,!0);for(var l=0,h=t.length;l<h;l++)r.push(this._view.columnByField(t[l])),s.push(o[l]||e.SortDirection.ASCENDING),a.push(n[l]||e.SortCase.SENSITIVE);this._view.orderBy(r,s,a)}},t.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&(t=i.length)>0){for(var n=this._dataProvider,r=[],s=0;s<t;s++)r.push({fieldName:n.getFieldName(i[s]),orgFieldName:n.getOrgFieldName(i[s]),direction:o[s]});return r}return null},t.prototype.setFocus=function(){this._view.setFocus()},t.prototype.getColumn=function(t){return this._view.getColumn(t)},t.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},t.prototype.setColumns=function(t){this._view.setColumns(t)},t.prototype.addColumn=function(t,e){return this._view.addColumn(t,e)},t.prototype.removeColumn=function(t){return this._view.removeColumn(t)},t.prototype.addLayout=function(t,e){return this._view.addLayout(t,e)},t.prototype.removeLayout=function(t){this._view.removeLayout(t)},t.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},t.prototype.layoutByName=function(t){return this._view.layoutByName(t)},t.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},t.prototype.columnByName=function(t){return this._view.columnByName(t)},t.prototype.columnByField=function(t){return this._view.columnByField(t)},t.prototype.columnByTag=function(t){return this._view.columnByTag(t)},t.prototype.columnsByTag=function(t){return this._view.columnsByTag(t)},t.prototype.getColumnProperty=function(t,e){var i=D.getColumn(this._view,t);if(i&&e)return i[e]instanceof o.Base?i[e].toProxy():i[e]},t.prototype.setColumnProperty=function(t,e,i){var n=D.getColumn(this._view,t);n&&e&&(n[e]instanceof o.Base?n[e].assignFrom(i):n[e]=i)},t.prototype.setColumn=function(t){var e=D.getColumn(this._view,t);e&&e.assignFrom(t)},t.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},t.prototype.setColumnLayout=function(t){("string"!=typeof t||(t=this._view.findColumnLayout(t)))&&this._view.setCellLayout(t)},t.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},t.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},t.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},t.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},t.prototype.fitLayoutWidth=function(t,e,i,o){var n;return t?t instanceof b.CellLayoutItem?n=t:"string"==typeof t?n=this._view.layoutByName(t):t.name&&(n=this._view.layoutByColumn(t.name)):null==t&&(n=this._view.activeCellLayout._root),n&&this._view.fitLayoutWidth(n,e,i,o)},t.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},t.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},t.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},t.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},t.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},t.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},t.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},t.prototype.mouseToIndex=function(t,e){var i=this._view.pointToIndex(null,t,e,!1);return i?i.proxy():null},t.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var o=D.getColumn(this._view,e),n=new s.CellIndex(this._view,t,o);if(o&&n){var r=this._view.layoutManager,a=r.getBodyView(n),l=a.getCellRectAt(r,n,!0);if(l=l&&(i?a.boundsByScreen(l):a.boundsByContainer(l)))return{x:l.x,y:l.y,width:l.width,height:l.height}}return null},t.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},t.prototype.setColumnFilters=function(t,e){var i=D.getColumn(this._view,t);i instanceof l.DataColumn&&i.setFilters(e)},t.prototype.clearColumnFilters=function(t){var e=D.getColumn(this._view,t);e instanceof l.DataColumn&&e.clearFilters()},t.prototype.addColumnFilters=function(t,e,i){var o=D.getColumn(this._view,t);o instanceof l.DataColumn&&o.addFilters(e,i)},t.prototype.removeColumnFilters=function(t,e){var i=D.getColumn(this._view,t);i instanceof l.DataColumn&&i.removeFilters(e)},t.prototype.activateColumnFilters=function(t,e,i){var o=D.getColumn(this._view,t);o instanceof l.DataColumn&&o.activateFilters(e,i)},t.prototype.activateAllColumnFilters=function(t,e){var i=D.getColumn(this._view,t);i instanceof l.DataColumn&&i.activateAllFilters(e)},t.prototype.resetFilters=function(){this._view.itemSource.beginFiltering();try{this._view.itemSource.clearAllFilters(),this._view.getDataColumns(!1).forEach((function(t){t.isFiltered()&&(t.activateAllFilters(!1,!1),t.setInlineFilter(null,!1))}))}finally{this._view.itemSource.endFiltering(null,null)}},t.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var o=D.getColumn(this._view,t);o instanceof l.DataColumn&&(o.hideColumnFilters(e,i),this._view.closePopups())},t.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=D.getColumn(this._view,t);i instanceof l.DataColumn&&(i.hideAllColumnFilters(e),this._view.closePopups())},t.prototype.toggleColumnFilters=function(t,e){var i=D.getColumn(this._view,t);i instanceof l.DataColumn&&i.toggleFilters(e)},t.prototype.toggleAllColumnFilters=function(t){var e=D.getColumn(this._view,t);e instanceof l.DataColumn&&e.toggleAllFilters()},t.prototype.getColumnFilter=function(t,e){var i=D.getColumn(this._view,t);return i instanceof l.DataColumn&&i.getFilter(e)?i.getFilter(e).toProxy():null},t.prototype.getColumnFilters=function(t){var e=D.getColumn(this._view,t);if(e instanceof l.DataColumn){for(var i=e.autoFilter?e.autoFilters.items:e.filters.items,o=[],n=0,r=i.length;n<r;n++)o.push(i[n].toProxy());return o}return null},t.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=D.getColumn(this._view,t);if(i instanceof l.DataColumn){for(var o=i.getActiveFilters(e),n=[],r=0,s=o.length;r<s;r++)n.push(o[r].toProxy());return n}return null},t.prototype.isFiltered=function(t){if(t){var e=D.getColumn(this._view,t);return e instanceof l.DataColumn&&e.isFiltered()}var i=this._view.getFilteredColumns();return i&&i.length>0},t.prototype.autoFiltersRefresh=function(t,e){t=t?i.Utils.makeArray(t):this._view.getChildColumnNames(null);for(var o=0;o<t.length;o++){var n=D.getColumn(this._view,t[o]);n instanceof l.DataColumn&&n.autoFilterRefresh(e)}},t.prototype.getValues=function(t){var e=this._view.getItem(t);return e?D.getValues(this._view,e):null},t.prototype.getDisplayValues=function(t,e){var i=this._view.getItem(t);if(i)return D.getDisplayValues(this._view,i,e)},t.prototype.getDisplayValuesOfRow=function(t,e){var i=this._view.getItemOfRow(t,!0);if(i)return D.getDisplayValues(this._view,i,e)},t.prototype.getJsonRows=function(){return this._view.getJsonRows()},t.prototype.setValues=function(t,e,i){var o=this._view.getItem(t);o&&D.setValues(this._view,o,e,i)},t.prototype.getValue=function(t,e){var i,o=this._view._clipboardManager;if(o.isPasting&&(i=o.appendingIndex.item).index!==t&&(i=null),i=i||this._view.getItem(t)){var n="string"==typeof e?this._dataProvider.getFieldIndex(e):e;return i.getData(n)}return null},t.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},t.prototype.getEditValue=function(){return this._view.getEditCellValue()},t.prototype.setEditValue=function(t,e,i){void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},t.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},t.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},t.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},t.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},t.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},t.prototype.getPopupMenu=function(t){return this._view.getPopupMenu(t)},t.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},t.prototype.setContextMenu=function(t){return this._view.setContextMenu(t)},t.prototype.getSelection=function(t){void 0===t&&(t=0);var e=this._view.getSelection(t);return e?e.toProxy():null},t.prototype.getSelections=function(){var t=this._view.getSelections(),e=[];return t.forEach((function(t){e.push(t.toProxy())})),e},t.prototype.setSelection=function(t){t.style&&"string"==typeof t.style&&(this._view.clearAddSelection(!0,!1),this.addSelection(t))},t.prototype.addSelection=function(t){if(t.style&&"string"==typeof t.style){var e,o,n=i.Utils.valueIn(t.style,_.SelectionStyle)?t.style:_.SelectionStyle.BLOCK,r=0,a=0;if(t.hasOwnProperty("startItem"))a=r=t.startItem;else if(t.hasOwnProperty("startRow"))a=r=this._view.getItemIndexOfRow(t.startRow);else if("singleColumn"!=n&&"columns"!=n)return;if(t.hasOwnProperty("endItem"))a=t.endItem;else if(t.hasOwnProperty("endRow"))a=this._view.getItemIndexOfRow(t.endRow);else if("singleColumn"!=n&&"columns"!=n)return;e=D.getColumn(this._view,t.startColumn),o=D.getColumn(this._view,t.endColumn);var l=new s.CellIndex(this._view,r,e),h=new s.CellIndex(this._view,a,o);this._view.selections.add(l,h,n)}},t.prototype.clearSelection=function(){this._view.clearAddSelection()},t.prototype.removeSelection=function(t){var e=this._view.selections.getItem(t);e&&this._view.selections.remove(e)},t.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},t.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},t.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},t.prototype.eraseSelection=function(t){this._view.eraseSelection(t)},t.prototype.getSelectionData=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=0),e>=0&&e<this._view.selections.count?this._view.selections.getItem(e).getData(t):null},t.prototype.getSelectionsData=function(){var t=[],e=this._view.selections.getItems(),o={};return e.forEach((function(t){t.getData(-1).forEach((function(t){var e=t.__rowId;e>=0&&(o[e]=o[e]||{},i.Utils.extendObj(t,o[e]))}))})),Object.keys(o).forEach((function(e){t.push(o[e])})),t},t.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},t.prototype.commitEditor=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.commitEditor(t,e)},t.prototype.commit=function(t){return this._view.commit(t)},t.prototype.cancel=function(){return this._view.cancel()},t.prototype.fillEditSearchItems=function(t,e,i,o){var n=D.getColumn(this._view,t);this._view.fillEditSearchItems(n,e,i,o)},t.prototype.isItemEditing=function(){return this._view.isItemEditing()},t.prototype.isEditing=function(){return this._view.isEditing()},t.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},t.prototype.hideEditor=function(){this._view.hideEditor(!0)},t.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},t.prototype.setValidations=function(t){this._view.validations=t},t.prototype.validateCells=function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!1),this._view.validateCells(t,e,i)},t.prototype.getInvalidCells=function(t){var e;return null!=t&&(e=this.getDataRow(t))<0?null:this._view.getInvalidCells(e)},t.prototype.getInvalidCellsOfRow=function(t){return null==t?null:this._view.getInvalidCells(t)},t.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},t.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},t.prototype.getItemState=function(t){var e=this._view.getItem(t);if(e){var i=e.itemState;return i==r.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==e.index&&(i=r.ItemState.FOCUSED),i}return null},t.prototype.showToast=function(t,e){this._view.showToast(t,e)},t.prototype.hideToast=function(t){this._view.hideToast(t)},t.prototype.setLookups=function(t){this._view.setLookups(t)},t.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},t.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},t.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},t.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},t.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},t.prototype.isCheckable=function(t){return this._view.isCheckable(t)},t.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},t.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},t.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},t.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},t.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},t.prototype.checkItem=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkItem(t,e,i,o)},t.prototype.checkRow=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkRow(t,e,i,o)},t.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},t.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},t.prototype.checkAll=function(t,e,i,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.checkAll(t,e,i,o)},t.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},t.prototype.isAllChecked=function(){return this._view.allChecked},t.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},t.prototype.applyCheckables=function(){this._view.applyCheckables()},t.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},t.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},t.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},t.prototype.getModel=function(t,e){var i=this._view.getItem(t);return i&&D.getItemProxy(i,e)},t.prototype.getModelAs=function(t,e,o){var n=this._view.getItem(t);switch(e){case"row":n=i.Utils.cast(n,r.GridRow);break;case"group":n=i.Utils.cast(n,r.GroupItem);break;case"footer":n=i.Utils.cast(n,r.GroupFooter);break;case"tree":n=i.Utils.cast(n,p.TreeItem)}return n?D.getItemProxy(n,o):null},t.prototype.getGroupModel=function(t,e){var i=this._view.getItem(t);return!i||i instanceof r.GroupItem||(i=i.parent instanceof R.RootItem?null:i.parent),i?D.getItemProxy(i,e):null},t.prototype.getRootModel=function(t,e){if(!t||!this._view.isTree()&&!this._view.rowGrouped)return null;if(t){var i=this._view.getItem(t.index);if(i)return i.root?D.getItemProxy(i.root,e):null}return null},t.prototype.getModels=function(t,e){if(t=i.Utils.makeArray(t)){for(var o=[],n=0,r=t.length;n<r;n++){var s=this._view.getItem(t[n]);s&&o.push(D.getItemProxy(s,e))}return o}},t.prototype.getModelOfRow=function(t,e){var i=this._view.getItemOfRow(t,!1);return i?D.getItemProxy(i,e):null},t.prototype.getModelsOfRows=function(t,e){if(t=i.Utils.makeArray(t)){for(var o=[],n=0,r=t.length;n<r;n++){var s=this._view.getItemOfRow(t[n],!1);s&&o.push(D.getItemProxy(s,e))}return o}},t.prototype.getParentModel=function(t,e){var i;return t&&(i=this._view.getItemOfModel(t)),!i||i instanceof n.EditItem||!this._view.isTree()&&!this._view.rowGrouped?null:D.getItemProxy(i.parent,e)},t.prototype.getChildModel=function(t,e,i){var o=t&&this._view.getItemOfModel(t);if(o instanceof r.GroupItem){var n=o.getItem(e);return n?D.getItemProxy(n,i):null}return null},t.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof r.GroupItem){for(var o=[],n=0,s=i.count;n<s;n++)o.push(D.getItemProxy(i.children[n],e));return o}return null},t.prototype.getDescendantModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof r.GroupItem){var o=i.getDescendants(!1),n=[];if(o)for(var s=0,a=o.length;s<a;s++)n.push(D.getItemProxy(o[s],e));return n}return null},t.prototype.getGroupSummary=function(t,e,i){if(t){var o=this._view.getItemOfModel(t),n="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(o instanceof r.GroupItem&&n>=0){var s={count:o.getNumber(n),sum:o.getSum(n),max:o.getMax(n),min:o.getMin(n),avg:o.getAvg(n),datacount:o.getDataCount(n),dataavg:o.getSum(n)/o.getDataCount(n)};return i&&(s.var=o.getVar(n,1),s.varp=o.getVar(n,0),s.stdev=o.getStdev(n,1),s.stdevp=o.getStdev(n,0)),s}}return null},t.prototype.getDistinctItemValues=function(t,i,o){return void 0===i&&(i=-1),void 0===o&&(o=e.SortDirection.ASCENDING),t=this._dataProvider.getFieldIndex(t),this._view.getDistinctItemValues(t,i,o)},t.prototype.showProgress=function(){this._view.showProgress()},t.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},t.prototype.closeProgress=function(){this._view.closeProgress()},t.prototype.showLoading=function(t){this._view.showLoading(t)},t.prototype.closeLoading=function(){this._view.hideLoading()},t.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},t.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},t.prototype.resetSize=function(t){this._view.container.resetSize(t)},t.prototype.closeList=function(){this._view.closePopups()},t.prototype.exportGrid=function(t){if("csv"===t.type){var e=new m.GridExportOptions(t);(new g.GridCsvExporter).export(this._view,e)}else if("excel"===t.type){e=new m.GridMultiExportOptions(this._view,t);(new v.GridExcelExporter).export(this._view,e)}},t.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(E.ScrollEventType.PAGE,t,0)},t.prototype.getTopItem=function(){return this._view.topIndex},t.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},t.prototype.getLeftPos=function(){return this._view.leftPos},t.prototype.setLeftPos=function(t){this._view.leftPos=t},t.prototype.setLeftCol=function(t){var e;if("string"==typeof t){var i=this._view.layoutByName(t);i&&(e=i._col)}else e=t;this._view.leftCell=e},t.prototype.getContainer=function(){return this._view.container._containerDiv},t.prototype.requestPrepareEditor=function(){this._view.requestPrepareEditor()},t.prototype.destroy=function(){return this.dispose()},t.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},t.prototype.undo=function(){return this._view.undo()},t.prototype.redo=function(){return this._view.redo()},t.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},t.prototype._getView=function(){return this._view},t}();ri.GridBase=k;var M=function(e){function i(t,i,o){var n=e.call(this,t,i,o)||this;return n.onPageChanging=null,n.onPageChanged=null,n.onPageCountChanged=null,n.onGrouping=null,n.onGrouped=null,n.onExpanding=null,n.onExpanded=null,n.onCollapsing=null,n.onCollapsed=null,i&&(n.shadowDom=n._view._shadowDom),n}return t.__extends(i,e),_dp(i,"rowGroup",{get:function(){return this._view.rowGroup}}),_dp(i,"groupPanel",{get:function(){return this._view.groupPanelView}}),_dp(i,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t}}),_dp(i,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t}}),_dp(i,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t}}),_dp(i,"groupingOptions",{get:function(){return this._view.groupingOptions}}),i.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},i.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},i.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},i.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},i.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this),i=this._view._rs;return t.filterOr=i.inclusiveFiltering,t.groupSummaryMode=i.groupSummaryMode.toString(),t.filterMode=i.filterMode.toString(),t.grouping=this.groupingOptions,t.groupPanel=this.groupPanel,t},i.prototype.setOptions=function(t){e.prototype.setOptions.call(this,t),t.grouping&&this._view.groupingOptions.assignFrom(t.grouping),t.groupPanel&&this._view.groupPanelView.assignFrom(t.groupPanel)},i.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},i.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},i.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},i.prototype.isGrouped=function(){return this._view.rowGrouped},i.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},i.prototype.getGroupFields=function(){return this._view.rowGroupFields},i.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],n=0,r=e.length;n<r;n++)o.push(t?i.getOrgFieldName(e[n]):i.getFieldName(e[n]));return o}return e}return null},i.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},i.prototype.getGroupLevel=function(t){return(t=this._dataProvider.getFieldIndex(t))>-1?this._view.getGroupLevel(t):-1},i.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},i.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof r.GroupItem},i.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},i.prototype.expandGroup=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);n&&n instanceof r.GroupItem&&this._view.expand(n,e,i,o)},i.prototype.collapseGroup=function(t,e,i){var o=this._view.getItem(t);o&&o instanceof r.GroupItem&&this._view.collapse(o,e,i)},i.prototype.expandParent=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);if(n){var r=n.parent;r&&r.expandable&&(r.collapsed||i)&&this._view.expand(r,e,i,o)}},i.prototype.collapseParent=function(t,e,i){var o=this._view.getItem(t);if(o){var n=o.parent;n&&n.collapsable&&n instanceof r.GroupItem&&this._view.collapse(n,e,i)}},i.prototype.expandAll=function(t,e){void 0===t&&(t=!0),this._view.itemCount>0&&this._view.expandAll(t,e)},i.prototype.collapseAll=function(t){this._view.itemCount>0&&this._view.collapseAll(t)},i.prototype.getGroupSummaryValue=function(t,e,i){if(t&&this._view.rowGrouped){var o=this._view.getItemOfModel(t),n=D.getColumn(this._view,e);if(o instanceof r.GroupItemImpl){var s=o._allFooters;return null!=(i=1===o.allFooterCount?0:i)&&o._allFooters[i]?(o=o._allFooters[i],T.RowGroupFooterCell.getValue(o,n)):s.map((function(t){return T.RowGroupFooterCell.getValue(t,n)}))}if(o instanceof r.GroupFooter)return T.RowGroupFooterCell.getValue(o,n)}return null},i.prototype.layoutExpandAll=function(t){this._view.layoutExpandAll(!0,t)},i.prototype.layoutCollapseAll=function(t){this._view.layoutExpandAll(!1,t)},i.prototype.beginInsertRow=function(t,e){void 0===t&&(t=-1),this._view.insertAt(t,e)},i.prototype.beginAppendRow=function(){this._view.append()},i.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},i.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},i.prototype.getPage=function(){return this._view.page},i.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},i.prototype.getPageCount=function(){return this._view.pageCount},i.prototype.setPageCount=function(t){this._view.pageCount=t},i.prototype.getPageOfDataRow=function(t){return this._view.getPageOfDataRow(t)},i.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},i.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),this._view.getCheckedRows(t,e,i)},i.prototype.getMergedItems=function(t,e,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.getMergedItems(t,e,i,o)},i.prototype._createView=function(t,e,i){return(this._container=new w.GridContainer(t,this,e,i)).gridView},i.prototype._createListener=function(t){return new F(this,t)},i}(k);ri.GridView=M;var L=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTreeItemExpanding=null,t.onTreeItemExpanded=null,t.onTreeItemCollapsing=null,t.onTreeItemCollapsed=null,t.onTreeItemChanged=null,t}return t.__extends(i,e),_dp(i,"treeOptions",{get:function(){return this._view.treeOptions}}),i.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},i.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},i.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},i.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,n=e.count;o<n;o++)i.push(e.getItem(o).index);return i}return null},i.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=e.getDescendants(!1)||[],n=0,r=o.length;n<r;n++)i.push(o[n].index);return i}return null},i.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var o=[],n=i.getAncestors(),r=0,s=n.length;r<s;r++)!e&&n[r]instanceof p.RootTreeItem||o.push(n[r].index);return o}return null},i.prototype.expand=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItem(t);n&&this._view.expand(n,e,i,o)},i.prototype.expandModel=function(t,e,i,o){void 0===o&&(o=0);var n=this._view.getItemOfModel(t);n&&this._view.expand(n,e,i,o)},i.prototype.collapse=function(t,e){var i=this._view.getItem(t);i&&this._view.collapse(i,e)},i.prototype.collapseModel=function(t,e){var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},i.prototype.expandAll=function(t){void 0===t&&(t=0),this._view.expandAll(t)},i.prototype.collapseAll=function(){this._view.collapseAll()},i.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},i.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},i.prototype.checkChildren=function(t,e,i,o,n,r){void 0===r&&(r=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,o,n,r)},i.prototype._createView=function(t,e,i){return(this._container=new x.TreeContainer(t,this,e,i)).gridView},i.prototype._createListener=function(t){return new P(this,t)},i}(k);ri.TreeView=L;var O=function(o){function n(t,e){var i=o.call(this)||this;return i._del=t,i._view=e,i._view.addListener(i),i}return t.__extends(n,o),n.prototype.dispose=function(){return this._view.removeListener(this),this._view=null,this._del=null},n.prototype.onGridBaseCurrentChanging=function(t,e,o){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),o.proxy()):(i.Utils.log("onCurrentChanging",e,o),!0)},n.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):i.Utils.log("onCurrentChanged",e)},n.prototype.onGridBaseCurrentRowChanged=function(t,e,o){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,o):i.Utils.log("onCurrentRowChanged",e,o)},n.prototype.onGridBaseValidateCell=function(t,i,o,n){if(this._del.onValidateColumn){var r=i.itemIndex,s=i.item&&i.item.dataRow,a=this._del.onValidateColumn(this._del,i.column,o,n,r,s);if(a&&a.level&&a.message)throw new y.ValidationError(a.level,a.message,i.column,a.message);if("string"==typeof a||"number"==typeof a)throw new y.ValidationError(e.ValidationLevel.ERROR,a,i.column,a)}},n.prototype.onGridBaseValidateRow=function(t,i,o,n){if(this._del.onValidateRow){var r=this._del.onValidateRow(this._del,i.index,i.dataRow,o,n);if(r&&r.level&&r.message)throw new y.ValidationError(r.level,r.message,null,r.message);if("string"==typeof r||"number"==typeof r)throw new y.ValidationError(e.ValidationLevel.ERROR,r,null,r)}},n.prototype.onGridBaseValidationFail=function(t,e,i,o){if(!this._del.onValidationFail)return o;var n=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message});return n&&n.level&&n.message?(o.level=n.level,o.message=n.message,o.userMessage=n.message,o):"string"==typeof n||"number"==typeof n?(o.message=n,o.userMessage=n,o):void 0},n.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):i.Utils.log("onCellClicked: ",e)},n.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):i.Utils.log("onCellDblClicked: ",e)},n.prototype.onGridBaseCellItemClicked=function(t,e,o){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),o):i.Utils.log("onCellItemClicked: ",o)},n.prototype.onGridBaseColumnCheckedChanged=function(t,e,o){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,o):i.Utils.log("onColumnCheckedChanged: ("+e.name+", "+o+")")},n.prototype.onGridBaseMenuItemClicked=function(t,e,o){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),o):i.Utils.log("onMenuItemClicked: ",e.toProxy(),o)},n.prototype.onGridBaseContextMenuPopup=function(t,e,o,n,r,s){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,o,n,r,s):i.Utils.log("onContextMenuPopup: x = ",e,", y = ",o,", clickData =",n)},n.prototype.onGridBaseContextMenuItemClicked=function(t,e,o){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),o):i.Utils.log("onContextMenuItemClicked: ",e.toProxy(),o)},n.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):i.Utils.log("onCellButtonClicked: ",e)},n.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):i.Utils.log("onScrollToBottom")},n.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):i.Utils.log("onTopItemIndexChanged: "+e)},n.prototype.onGridBaseLeftPosChanged=function(t,e){this._del.onLeftPosChanged?this._del.onLeftPosChanged(this._del,e):i.Utils.log("onLeftPosChanged: "+e)},n.prototype.onGridBaseTopIndexChanging=function(t,e,o,n,r){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,e,o,n,r):i.Utils.log("onTopItemIndexChanging: ",e,o,n,r)},n.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(i.Utils.log("onRowsDeleting:",e),!0)},n.prototype.onGridBaseRowInserting=function(t,e,o){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,o);i.Utils.log("onRowInserting: "+e,o)},n.prototype.onGridBaseSelectionCleared=function(t){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):i.Utils.log("onSelectionCleared")},n.prototype.onGridBaseSelectionChanged=function(t,e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,e):i.Utils.log("onSelectionChanged")},n.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):i.Utils.log("onSelectionAdded: ",e)},n.prototype.onGridBaseSelectionEnded=function(t,e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,e):i.Utils.log("onSelectionEnded")},n.prototype.onGridBaseShowEditor=function(t,e,o,n){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),o,n):i.Utils.log("onShowEditor",e.proxy(),o,n)},n.prototype.onGridBaseShowEditCommand=function(t,e){return this._del.onShowEditCommand&&this._del.onShowEditCommand(this._del,e.proxy())},n.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):i.Utils.log("onHideEditor: ",e.proxy())},n.prototype.onGridBaseEditChange=function(t,e,o){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),o):i.Utils.log("onEditChange: "+o,e.proxy())},n.prototype.onGridBaseGetEditValue=function(t,e,o){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),o):i.Utils.log("onGetEditValue: ",e,o)},n.prototype.onGridBaseEditCommit=function(t,e,o,n){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),o,n):(i.Utils.log("onEditCommit",e.proxy(),o,n),!0)},n.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):i.Utils.log("onEditCanceled",e.proxy())},n.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):i.Utils.log("onItemEditCanceled: "+e.index+", "+e.itemState)},n.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(i.Utils.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},n.prototype.onGridBaseEditSearch=function(t,e,o){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),o):i.Utils.log("onEditSearch: "+o,e.proxy())},n.prototype.onGridBaseSearchCellButtonClick=function(t,e,o){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),o):(i.Utils.log("onSearchCellButtonClick: "+o,e.proxy()),null)},n.prototype.onGridBaseCellEdited=function(t,e,o){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,o):i.Utils.log("onCellEdited: "+e.index+", "+e.dataRow+", "+o)},n.prototype.onGridBaseEditRowChanged=function(t,e,o,n,r){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,o,n,r):i.Utils.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+o+", "+n+" => "+r)},n.prototype.onGridBaseEditRowPasted=function(t,e,o,n,r){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,o,n,r):i.Utils.log("onEditRowPasted: "+e.index+", "+e.dataRow,o,n,r)},n.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):i.Utils.log("onRowsPasted: ",e)},n.prototype.onGridBaseCellPasting=function(t,e,o){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),o):i.Utils.log("onCellPasting: ",e,o)},n.prototype.onGridBaseItemChecked=function(t,e,o){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,o):i.Utils.log("onItemChecked",e.index,o)},n.prototype.onGridBaseItemsChecked=function(t,e,o){var n=D.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,n,o):i.Utils.log("onItemsChecked: "+o,n)},n.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):i.Utils.log("onItemAllChecked: "+e)},n.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):i.Utils.log("onErrorClicked: "+e)},n.prototype.onGridBaseSorting=function(t,e,o){for(var n=[],r=0,s=o.length;r<s;r++)n.push(o[r]?o[r].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,o):i.Utils.log("onSorting: ",e,n)},n.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):i.Utils.log("onSortingChanged")},n.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):i.Utils.log("onFiltering")},n.prototype.onGridBaseFilteringChanged=function(t,e,o){var n=e?e.getOwner():null,r=o?o.toProxy():null,s=n?n.name:"",a=o?o.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,n,r):i.Utils.log("onFilteringChanged: "+s+", "+a)},n.prototype.onGridBaseWheel=function(t,e){return this._del.onWheel?this._del.onWheel(this._del,e):i.Utils.keyLog("onWheel: "+e)},n.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):i.Utils.keyLog("onKeyDown: "+e)},n.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):i.Utils.keyLog("onKeyPress: "+e)},n.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):i.Utils.keyLog("onKeyUp: "+e)},n.prototype.onGridBaseShowTooltip=function(t,e,o){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),o):(i.Utils.log("onShowTooltip: "+o,e.proxy()),o)},n.prototype.onGridBaseShowHeaderTooltip=function(t,e,o,n){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,o,n):(i.Utils.log("onShowHeaderTooltip: "+e.name+", "+o),o)},n.prototype.onGridBaseColumnPropertyChanged=function(t,e,o,n,r){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,o,n,r):i.Utils.log("onColumnPropertyChanged: "+e.name+", "+o+", "+n+", "+r)},n.prototype.onGridBaseLayoutPropertyChanged=function(t,e,o,n,r){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,o,n,r):i.Utils.log("onLayoutPropertyChanged: "+e.name+", "+o+", "+n+", "+r)},n.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):i.Utils.log("onGridActivated")},n.prototype.onGridBasePaste=function(t,e,o){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),o);i.Utils.log("onPaste: ",e)},n.prototype.onGridBaseCopy=function(t,e,o){var n;if(Array.isArray(e)?(n=[],e.forEach((function(t){n.push(t.toProxy())}))):n=e.toProxy(),this._del.onCopy)return this._del.onCopy(this._del,n,o);i.Utils.log("onCopy: ",n)},n.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):i.Utils.log("onPasted")},n.prototype.onGridBaseCommandStackChanged=function(t,e,o){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,o):i.Utils.log("onCommandStackChanged: undoable "+e+", redoable "+o)},n.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):i.Utils.log("onDataLoadComplated: ")},n.prototype.onGridBaseLayoutExpanding=function(t,e){return this._del.onLayoutExpanding?this._del.onLayoutExpanding(t.handler,e):(i.Utils.log("onLayoutExpanding"),!0)},n.prototype.onGridBaseLayoutExpanded=function(t,e){this._del.onLayoutExpanded?this._del.onLayoutExpanded(t.handler,e):i.Utils.log("onLayoutExpanded")},n.prototype.onGridBaseLayoutCollapsing=function(t,e){return this._del.onLayoutCollapsing?this._del.onLayoutCollapsing(t.handler,e):(i.Utils.log("onLayoutCollapsing"),!0)},n.prototype.onGridBaseLayoutCollapsed=function(t,e){this._del.onLayoutCollapsed?this._del.onLayoutCollapsed(t.handler,e):i.Utils.log("onLayoutCollapsed")},n}(h.EventListenerBase),F=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(i.Utils.log("onPageChanging:"+e),!0)},o.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):i.Utils.log("onPageChanged:"+e)},o.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):i.Utils.log("onPageCountChanged:"+e)},o.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(i.Utils.log("onGrouping",e),!0)},o.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):i.Utils.log("onGrouped")},o.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(i.Utils.log("onExpanding: "+e.index),!0)},o.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):i.Utils.log("onExpanded: "+e.index)},o.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(i.Utils.log("onCollapsing: "+e.index),!0)},o.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):i.Utils.log("onCollapsed: "+e.index)},o}(O),P=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(i.Utils.log("TreeItem expanding: "+e),!0)},o.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):i.Utils.log("TreeItem expanded: "+e)},o.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(i.Utils.log("TreeItem collapsing: "+e),!0)},o.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):i.Utils.log("TreeItem collapsed: "+e)},o.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):i.Utils.log("TreeItem item changed: "+e)},o}(O);return ri}Object.defineProperty(i,"__esModule",{value:!0});var xl=d.__importDefault(function(){if(yl)return _;yl=1,Object.defineProperty(_,"__esModule",{value:!0});var t=g(),e=ti(),i=wl(),o=S(),n=Or(),r=C(),s=function(){function s(){}return s.getVersion=function(){return t.globalRealGridInfo.version},s.getLicenseType=function(){return t.globalRealGridInfo.license},s.getLicenseCode=function(){return t.globalRealGridInfo.code},s.getActiveGrid=function(){var t=n.VisualContainer.getActiveGrid();return t&&t.handler},s.getGridInstance=function(t){var e=n.VisualContainer.getGridInstance(t);return e&&e.handler},s.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),o=void 0,n=0;n<e.length;n++){var r=e[n].grid;if(r===i){o=r;break}o=o||r}if(o)return void o.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},s.setDebug=function(t,e,i){o.Utils.setDebugging(t,e,i)},s.setMobile=function(t){o.Utils.setMobile(t)},s.setTablet=function(t){o.Utils.setTablet(t)},s.setSlotMode=function(t){o.Utils.setSlotMode(t)},Object.defineProperty(s,"GridView",{get:function(){return i.GridView}}),Object.defineProperty(s,"TreeView",{get:function(){return i.TreeView}}),Object.defineProperty(s,"LocalDataProvider",{get:function(){return e.LocalDataProvider}}),Object.defineProperty(s,"LocalTreeDataProvider",{get:function(){return e.LocalTreeDataProvider}}),Object.defineProperty(s,"ValueType",{get:function(){return r.ValueType}}),s}();return _.default=s,_}());return i.default=xl.default}();
